A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp36_2.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp36_2.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1     ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     
                +1     3     
                +1     4     
                +1     5     
                +1     6     
                +1     7     
                +1     8     
                +1     9     
                +1    10     
                +1    11     
                +1    12     
                +1    13     
                +1    14     
                +1    15     
  0080          +1    16     sfr P0       =  0x80;   /* PORT 0                                                  */   
  0081          +1    17     sfr SP       =  0x81;   /* STACK POINTER                                           */
  0082          +1    18     sfr DPL      =  0x82;   /* DATA POINTER - LOW BYTE                                 */
  0083          +1    19     sfr DPH      =  0x83;   /* DATA POINTER - HIGH BYTE                                */
  0084          +1    20     sfr P4       =  0x84;   /* PORT 4                                                          
                                                                                                    */
  0085          +1    21     sfr P5       =  0x85;   /* PORT 5                                                  */
  0086          +1    22     sfr P6       =  0x86;   /* PORT 6                                                          
                                                                                                    */                  
                                                                                                               
  0087          +1    23     sfr PCON     =  0x87;   /* POWER CONTROL                                           */
  0088          +1    24     sfr TCON     =  0x88;   /* TIMER CONTROL                                           */
  0089          +1    25     sfr TMOD     =  0x89;   /* TIMER MODE                                              */
  008A          +1    26     sfr TL0      =  0x8A;   /* TIMER 0 - LOW BYTE                                      */
  008B          +1    27     sfr TL1      =  0x8B;   /* TIMER 1 - LOW BYTE                                      */
  008C          +1    28     sfr TH0      =  0x8C;   /* TIMER 0 - HIGH BYTE                                     */   
  008D          +1    29     sfr TH1      =  0x8D;   /* TIMER 1 - HIGH BYTE                                     */
  008E          +1    30     sfr CKCON    =  0x8E;   /* CLOCK CONTROL                                           */
  008F          +1    31     sfr PSCTL    =  0x8F;   /* PROGRAM STORE R/W CONTROL                               */
  0090          +1    32     sfr P1       =  0x90;   /* PORT 1                                                  */
  0091          +1    33     sfr TMR3CN   =  0x91;   /* TIMER 3 CONTROL                                         */
  0092          +1    34     sfr TMR3RLL  =  0x92;   /* TIMER 3 RELOAD REGISTER - LOW BYTE                      */
  0093          +1    35     sfr TMR3RLH  =  0x93;   /* TIMER 3 RELOAD REGISTER - HIGH BYTE                     */
  0094          +1    36     sfr TMR3L    =  0x94;   /* TIMER 3 - LOW BYTE                                      */
  0095          +1    37     sfr TMR3H    =  0x95;   /* TIMER 3 - HIGH BYTE                                     */
  0096          +1    38     sfr P7           =  0x96;   /* PORT 7                                                  */
  0098          +1    39     sfr SCON0    =  0x98;   /* SERIAL PORT 0 CONTROL                                   */
  0099          +1    40     sfr SBUF0    =  0x99;   /* SERIAL PORT 0 BUFFER                                    */
  009A          +1    41     sfr SPI0CFG  =  0x9A;   /* SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION             */
  009B          +1    42     sfr SPI0DAT  =  0x9B;   /* SERIAL PERIPHERAL INTERFACE 0 DATA                      */
  009C          +1    43     sfr ADC1     =  0x9C;   /* ADC 1 DATA                                              */
  009D          +1    44     sfr SPI0CKR  =  0x9D;   /* SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL        */
  009E          +1    45     sfr CPT0CN   =  0x9E;   /* COMPARATOR 0 CONTROL                                    */
  009F          +1    46     sfr CPT1CN   =  0x9F;   /* COMPARATOR 1 CONTROL                                    */
  00A0          +1    47     sfr P2       =  0xA0;   /* PORT 2                                                  */
  00A1          +1    48     sfr EMI0TC   =  0xA1;   /* EMIF TIMING CONTROL                                     */
  00A3          +1    49     sfr EMI0CF   =  0xA3;   /* EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION          */
  00A4          +1    50     sfr P0MDOUT  =  0xA4;   /* PORT 0 OUTPUT MODE CONFIGURATION                        */
  00A5          +1    51     sfr P1MDOUT  =  0xA5;   /* PORT 1 OUTPUT MODE CONFIGURATION                        */
  00A6          +1    52     sfr P2MDOUT  =  0xA6;   /* PORT 2 OUTPUT MODE CONFIGURATION                        */
  00A7          +1    53     sfr P3MDOUT  =  0xA7;   /* PORT 3 OUTPUT MODE CONFIGURATION                        */
  00A8          +1    54     sfr IE       =  0xA8;   /* INTERRUPT ENABLE                                        */
  00A9          +1    55     sfr SADDR0   =  0xA9;   /* SERIAL PORT 0 SLAVE ADDRESS                             */
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     2

  00AA          +1    56     sfr ADC1CN   =  0xAA;   /* ADC 1 CONTROL                                           */
  00AB          +1    57     sfr ADC1CF   =  0xAB;   /* ADC 1 ANALOG MUX CONFIGURATION                          */
  00AC          +1    58     sfr AMX1SL   =  0xAC;   /* ADC 1 ANALOG MUX CHANNEL SELECT                         */
  00AD          +1    59     sfr P3IF     =  0xAD;   /* PORT 3 EXTERNAL INTERRUPT FLAGS                         */
  00AE          +1    60     sfr SADEN1   =  0xAE;   /* SERIAL PORT 1 SLAVE ADDRESS MASK                        */
  00AF          +1    61     sfr EMI0CN   =  0xAF;   /* EXTERNAL MEMORY INTERFACE CONTROL                       */
  00B0          +1    62     sfr P3       =  0xB0;   /* PORT 3                                                  */
  00B1          +1    63     sfr OSCXCN   =  0xB1;   /* EXTERNAL OSCILLATOR CONTROL                             */
  00B2          +1    64     sfr OSCICN   =  0xB2;   /* INTERNAL OSCILLATOR CONTROL                             */
  00B5          +1    65     sfr P74OUT   =  0xB5;   /* PORTS 4 - 7 OUTPUT MODE                                 */
  00B6          +1    66     sfr FLSCL    =  0xB6;   /* FLASH MEMORY TIMING PRESCALER                           */
  00B7          +1    67     sfr FLACL    =  0xB7;   /* FLASH ACESS LIMIT                                       */
  00B8          +1    68     sfr IP       =  0xB8;   /* INTERRUPT PRIORITY                                      */
  00B9          +1    69     sfr SADEN0   =  0xB9;   /* SERIAL PORT 0 SLAVE ADDRESS MASK                        */
  00BA          +1    70     sfr AMX0CF   =  0xBA;   /* ADC 0 MUX CONFIGURATION                                 */
  00BB          +1    71     sfr AMX0SL   =  0xBB;   /* ADC 0 MUX CHANNEL SELECTION                             */
  00BC          +1    72     sfr ADC0CF   =  0xBC;   /* ADC 0 CONFIGURATION                                     */
  00BD          +1    73     sfr P1MDIN   =  0xBD;   /* PORT 1 INPUT MODE                                       */
  00BE          +1    74     sfr ADC0L    =  0xBE;   /* ADC 0 DATA - LOW BYTE                                   */
  00BF          +1    75     sfr ADC0H    =  0xBF;   /* ADC 0 DATA - HIGH BYTE                                  */
  00C0          +1    76     sfr SMB0CN   =  0xC0;   /* SMBUS 0 CONTROL                                         */
  00C1          +1    77     sfr SMB0STA  =  0xC1;   /* SMBUS 0 STATUS                                          */
  00C2          +1    78     sfr SMB0DAT  =  0xC2;   /* SMBUS 0 DATA                                            */
  00C3          +1    79     sfr SMB0ADR  =  0xC3;   /* SMBUS 0 SLAVE ADDRESS                                   */
  00C4          +1    80     sfr ADC0GTL  =  0xC4;   /* ADC 0 GREATER-THAN REGISTER - LOW BYTE                  */
  00C5          +1    81     sfr ADC0GTH  =  0xC5;   /* ADC 0 GREATER-THAN REGISTER - HIGH BYTE                 */
  00C6          +1    82     sfr ADC0LTL  =  0xC6;   /* ADC 0 LESS-THAN REGISTER - LOW BYTE                     */
  00C7          +1    83     sfr ADC0LTH  =  0xC7;   /* ADC 0 LESS-THAN REGISTER - HIGH BYTE                    */
  00C8          +1    84     sfr T2CON    =  0xC8;   /* TIMER 2 CONTROL                                         */
  00C9          +1    85     sfr T4CON    =  0xC9;   /* TIMER 4 CONTROL                                         */
  00CA          +1    86     sfr RCAP2L   =  0xCA;   /* TIMER 2 CAPTURE REGISTER - LOW BYTE                     */
  00CB          +1    87     sfr RCAP2H   =  0xCB;   /* TIMER 2 CAPTURE REGISTER - HIGH BYTE                    */
  00CC          +1    88     sfr TL2      =  0xCC;   /* TIMER 2 - LOW BYTE                                      */
  00CD          +1    89     sfr TH2      =  0xCD;   /* TIMER 2 - HIGH BYTE                                     */
  00CF          +1    90     sfr SMB0CR   =  0xCF;   /* SMBUS 0 CLOCK RATE                                      */
  00D0          +1    91     sfr PSW      =  0xD0;   /* PROGRAM STATUS WORD                                     */
  00D1          +1    92     sfr REF0CN   =  0xD1;   /* VOLTAGE REFERENCE 0 CONTROL                             */
  00D2          +1    93     sfr DAC0L    =  0xD2;   /* DAC 0 REGISTER - LOW BYTE                               */
  00D3          +1    94     sfr DAC0H    =  0xD3;   /* DAC 0 REGISTER - HIGH BYTE                              */
  00D4          +1    95     sfr DAC0CN   =  0xD4;   /* DAC 0 CONTROL                                           */
  00D5          +1    96     sfr DAC1L    =  0xD5;   /* DAC 1 REGISTER - LOW BYTE                               */
  00D6          +1    97     sfr DAC1H    =  0xD6;   /* DAC 1 REGISTER - HIGH BYTE                              */
  00D7          +1    98     sfr DAC1CN   =  0xD7;   /* DAC 1 CONTROL                                           */
  00D8          +1    99     sfr PCA0CN   =  0xD8;   /* PCA 0 COUNTER CONTROL                                   */
  00D9          +1   100     sfr PCA0MD   =  0xD9;   /* PCA 0 COUNTER MODE                                      */
  00DA          +1   101     sfr PCA0CPM0 =  0xDA;   /* CONTROL REGISTER FOR PCA 0 MODULE 0                     */
  00DB          +1   102     sfr PCA0CPM1 =  0xDB;   /* CONTROL REGISTER FOR PCA 0 MODULE 1                     */
  00DC          +1   103     sfr PCA0CPM2 =  0xDC;   /* CONTROL REGISTER FOR PCA 0 MODULE 2                     */
  00DD          +1   104     sfr PCA0CPM3 =  0xDD;   /* CONTROL REGISTER FOR PCA 0 MODULE 3                     */
  00DE          +1   105     sfr PCA0CPM4 =  0xDE;   /* CONTROL REGISTER FOR PCA 0 MODULE 4                     */
  00E0          +1   106     sfr ACC      =  0xE0;   /* ACCUMULATOR                                             */
  00E1          +1   107     sfr XBR0     =  0xE1;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 0               */
  00E2          +1   108     sfr XBR1     =  0xE2;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 1               */
  00E3          +1   109     sfr XBR2     =  0xE3;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 2               */
  00E4          +1   110     sfr RCAP4L   =  0xE4;   /* TIMER 4 CAPTURE REGISTER - LOW BYTE                     */
  00E5          +1   111     sfr RCAP4H   =  0xE5;   /* TIMER 4 CAPTURE REGISTER - HIGH BYTE                    */
  00E6          +1   112     sfr EIE1     =  0xE6;   /* EXTERNAL INTERRUPT ENABLE 1                             */
  00E7          +1   113     sfr EIE2     =  0xE7;   /* EXTERNAL INTERRUPT ENABLE 2                             */
  00E8          +1   114     sfr ADC0CN   =  0xE8;   /* ADC 0 CONTROL                                           */   
  00E9          +1   115     sfr PCA0L    =  0xE9;   /* PCA 0 TIMER - LOW BYTE                                  */   
  00EA          +1   116     sfr PCA0CPL0 =   0xEA;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE  */
  00EB          +1   117     sfr PCA0CPL1 =   0xEB;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE  */
  00EC          +1   118     sfr PCA0CPL2 =   0xEC;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE  */
  00ED          +1   119     sfr PCA0CPL3 =   0xED;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE  */
  00EE          +1   120     sfr PCA0CPL4 =   0xEE;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE  */
  00EF          +1   121     sfr RSTSRC   =   0xEF;   /* RESET SOURCE                                            */
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     3

  00F0          +1   122     sfr B        =   0xF0;   /* B REGISTER                                              */
  00F1          +1   123     sfr SCON1    =  0xF1;   /* SERIAL PORT 1 CONTROL                                   */
  00F2          +1   124     sfr SBUF1    =  0xF2;   /* SERAIL PORT 1 DATA                                      */
  00F3          +1   125     sfr SADDR1   =  0xF3;   /* SERAIL PORT 1                                           */ 
  00F4          +1   126     sfr TL4      =  0xF4;   /* TIMER 4 DATA - LOW BYTE                                 */
  00F5          +1   127     sfr TH4      =  0xF5;   /* TIMER 4 DATA - HIGH BYTE                                */
  00F6          +1   128     sfr EIP1     =   0xF6;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 1                  */
  00F7          +1   129     sfr EIP2     =   0xF7;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 2                  */
  00F8          +1   130     sfr SPI0CN   =   0xF8;   /* SERIAL PERIPHERAL INTERFACE 0 CONTROL                   */  
  00F9          +1   131     sfr PCA0H    =   0xF9;          /* PCA 0 TIMER - HIGH BYTE                                 
                             */
  00FA          +1   132     sfr PCA0CPH0 =   0xFA;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE 
                             */
  00FB          +1   133     sfr PCA0CPH1 =   0xFB;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE 
                             */
  00FC          +1   134     sfr PCA0CPH2 =   0xFC;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE 
                             */
  00FD          +1   135     sfr PCA0CPH3 =   0xFD;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE 
                             */
  00FE          +1   136     sfr PCA0CPH4 =   0xFE;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE 
                             */   
  00FF          +1   137     sfr WDTCN    =   0xFF;          /* WATCHDOG TIMER CONTROL                                  
                             */
                +1   138             
                +1   139     
                +1   140     
                +1   141     
                +1   142     
  008F          +1   143     sbit TF1   = TCON ^ 7;              /* TIMER 1 OVERFLOW FLAG      */
  008E          +1   144     sbit TR1   = TCON ^ 6;              /* TIMER 1 ON/OFF CONTROL     */
  008D          +1   145     sbit TF0   = TCON ^ 5;              /* TIMER 0 OVERFLOW FLAG      */
  008C          +1   146     sbit TR0   = TCON ^ 4;              /* TIMER 0 ON/OFF CONTROL     */
  008B          +1   147     sbit IE1   = TCON ^ 3;              /* EXT. INTERRUPT 1 EDGE FLAG */
  008A          +1   148     sbit IT1   = TCON ^ 2;              /* EXT. INTERRUPT 1 TYPE      */
  0089          +1   149     sbit IE0   = TCON ^ 1;              /* EXT. INTERRUPT 0 EDGE FLAG */
  0088          +1   150     sbit IT0   = TCON ^ 0;              /* EXT. INTERRUPT 0 TYPE      */
                +1   151     
                +1   152     
  009F          +1   153     sbit SM00  = SCON0 ^ 7;             /* SERIAL MODE CONTROL BIT 0           */   
  009E          +1   154     sbit SM10  = SCON0 ^ 6;             /* SERIAL MODE CONTROL BIT 1           */
  009D          +1   155     sbit SM20  = SCON0 ^ 5;             /* MULTIPROCESSOR COMMUNICATION ENABLE */
  009C          +1   156     sbit REN0  = SCON0 ^ 4;             /* RECEIVE ENABLE                      */
  009B          +1   157     sbit TB80  = SCON0 ^ 3;             /* TRANSMIT BIT 8                      */
  009A          +1   158     sbit RB80  = SCON0 ^ 2;             /* RECEIVE BIT 8                       */
  0099          +1   159     sbit TI0   = SCON0 ^ 1;             /* TRANSMIT INTERRUPT FLAG             */
  0098          +1   160     sbit RI0   = SCON0 ^ 0;             /* RECEIVE INTERRUPT FLAG              */
                +1   161     
                +1   162     
  00AF          +1   163     sbit EA    = IE ^ 7;                /* GLOBAL INTERRUPT ENABLE      */  
  00AD          +1   164     sbit ET2   = IE ^ 5;                /* TIMER 2 INTERRUPT ENABLE     */
  00AC          +1   165     sbit ES0   = IE ^ 4;                /* UART0 INTERRUPT ENABLE       */
  00AB          +1   166     sbit ET1   = IE ^ 3;                /* TIMER 1 INTERRUPT ENABLE     */
  00AA          +1   167     sbit EX1   = IE ^ 2;                /* EXTERNAL INTERRUPT 1 ENABLE  */
  00A9          +1   168     sbit ET0   = IE ^ 1;                /* TIMER 0 INTERRUPT ENABLE     */
  00A8          +1   169     sbit EX0   = IE ^ 0;                /* EXTERNAL INTERRUPT 0 ENABLE  */
                +1   170     
                +1   171     
  00BD          +1   172     sbit PT2   = IP ^ 5;                /* TIMER 2 PRIORITY                                 */ 
                                  
  00BC          +1   173     sbit PS    = IP ^ 4;                /* SERIAL PORT PRIORITY                             */
  00BB          +1   174     sbit PT1   = IP ^ 3;                /* TIMER 1 PRIORITY                                 */
  00BA          +1   175     sbit PX1   = IP ^ 2;                /* EXTERNAL INTERRUPT 1 PRIORITY    */
  00B9          +1   176     sbit PT0   = IP ^ 1;                /* TIMER 0 PRIORITY                                 */
  00B8          +1   177     sbit PX0   = IP ^ 0;                /* EXTERNAL INTERRUPT 0 PRIORITY    */              
                +1   178     
                +1   179     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     4

  00C7          +1   180     sbit BUSY     =   SMB0CN ^ 7;       /* SMBUS 0 BUSY                    */
  00C6          +1   181     sbit ENSMB    =   SMB0CN ^ 6;       /* SMBUS 0 ENABLE                  */
  00C5          +1   182     sbit STA      =   SMB0CN ^ 5;       /* SMBUS 0 START FLAG              */
  00C4          +1   183     sbit STO      =   SMB0CN ^ 4;       /* SMBUS 0 STOP FLAG               */
  00C3          +1   184     sbit SI       =   SMB0CN ^ 3;       /* SMBUS 0 INTERRUPT PENDING FLAG  */
  00C2          +1   185     sbit AA       =   SMB0CN ^ 2;       /* SMBUS 0 ASSERT/ACKNOWLEDGE FLAG */
  00C1          +1   186     sbit SMBFTE   =   SMB0CN ^ 1;       /* SMBUS 0 FREE TIMER ENABLE       */
  00C0          +1   187     sbit SMBTOE   =   SMB0CN ^ 0;       /* SMBUS 0 TIMEOUT ENABLE          */
                +1   188     
                +1   189     
  00CF          +1   190     sbit TF2   = T2CON ^ 7;             /* TIMER 2 OVERFLOW FLAG        */
  00CE          +1   191     sbit EXF2  = T2CON ^ 6;             /* EXTERNAL FLAG                */
  00CD          +1   192     sbit RCLK0 = T2CON ^ 5;             /* UART0 RX CLOCK SOURCE        */
  00CC          +1   193     sbit TCLK0 = T2CON ^ 4;             /* UART0 TX CLOCK SOURCE        */
  00CB          +1   194     sbit EXEN2 = T2CON ^ 3;             /* TIMER 2 EXTERNAL ENABLE FLAG */  
  00CA          +1   195     sbit TR2   = T2CON ^ 2;             /* TIMER 2 ON/OFF CONTROL       */
  00C9          +1   196     sbit CT2   = T2CON ^ 1;             /* TIMER OR COUNTER SELECT      */
  00C8          +1   197     sbit CPRL2 = T2CON ^ 0;             /* CAPTURE OR RELOAD SELECT     */
                +1   198     
                +1   199     
  00D7          +1   200     sbit CY    = PSW ^ 7;               /* CARRY FLAG              */       
  00D6          +1   201     sbit AC    = PSW ^ 6;               /* AUXILIARY CARRY FLAG    */
  00D5          +1   202     sbit F0    = PSW ^ 5;               /* USER FLAG 0             */
  00D4          +1   203     sbit RS1   = PSW ^ 4;               /* REGISTER BANK SELECT 1  */
  00D3          +1   204     sbit RS0   = PSW ^ 3;               /* REGISTER BANK SELECT 0  */
  00D2          +1   205     sbit OV    = PSW ^ 2;               /* OVERFLOW FLAG           */
  00D1          +1   206     sbit F1    = PSW ^ 1;               /* USER FLAG 1             */
  00D0          +1   207     sbit P     = PSW ^ 0;               /* ACCUMULATOR PARITY FLAG */
                +1   208     
                +1   209     
  00DF          +1   210     sbit CF    =   PCA0CN ^ 7;          /* PCA 0 COUNTER OVERFLOW FLAG   */
  00DE          +1   211     sbit CR    =   PCA0CN ^ 6;          /* PCA 0 COUNTER RUN CONTROL BIT */
  00DC          +1   212     sbit CCF4  =   PCA0CN ^ 4;          /* PCA 0 MODULE 4 INTERRUPT FLAG */
  00DB          +1   213     sbit CCF3  =   PCA0CN ^ 3;          /* PCA 0 MODULE 3 INTERRUPT FLAG */
  00DA          +1   214     sbit CCF2  =   PCA0CN ^ 2;          /* PCA 0 MODULE 2 INTERRUPT FLAG */
  00D9          +1   215     sbit CCF1  =   PCA0CN ^ 1;          /* PCA 0 MODULE 1 INTERRUPT FLAG */
  00D8          +1   216     sbit CCF0  =   PCA0CN ^ 0;          /* PCA 0 MODULE 0 INTERRUPT FLAG */
                +1   217     
                +1   218     
  00EF          +1   219     sbit AD0EN     =   ADC0CN ^ 7;      /* ADC 0 ENABLE                              */
  00EE          +1   220     sbit AD0TM     =   ADC0CN ^ 6;      /* ADC 0 TRACK MODE                          */
  00ED          +1   221     sbit AD0INT    =   ADC0CN ^ 5;      /* ADC 0 CONVERISION COMPLETE INTERRUPT FLAG */
  00EC          +1   222     sbit AD0BUSY   =   ADC0CN ^ 4;      /* ADC 0 BUSY FLAG                           */
  00EB          +1   223     sbit AD0CM1    =   ADC0CN ^ 3;      /* ADC 0 START OF CONVERSION MODE BIT 1      */
  00EA          +1   224     sbit AD0CM0    =   ADC0CN ^ 2;      /* ADC 0 START OF CONVERSION MODE BIT 0      */
  00E9          +1   225     sbit AD0WINT   =   ADC0CN ^ 1;      /* ADC 0 WINDOW COMPARE INTERRUPT FLAG       */
  00E8          +1   226     sbit AD0LJST   =   ADC0CN ^ 0;      /* ADC 0 RIGHT JUSTIFY DATA BIT              */
                +1   227     
                +1   228     
  00FF          +1   229     sbit SPIF     =   SPI0CN ^ 7;       /* SPI 0 INTERRUPT FLAG                     */
  00FE          +1   230     sbit WCOL     =   SPI0CN ^ 6;       /* SPI 0 WRITE COLLISION FLAG       */
  00FD          +1   231     sbit MODF     =   SPI0CN ^ 5;       /* SPI 0 MODE FAULT FLAG            */
  00FC          +1   232     sbit RXOVRN   =   SPI0CN ^ 4;       /* SPI 0 RX OVERRUN FLAG            */
  00FB          +1   233     sbit TXBSY    =   SPI0CN ^ 3;       /* SPI 0 TX BUSY FLAG                       */
  00FA          +1   234     sbit SLVSEL   =   SPI0CN ^ 2;       /* SPI 0 SLAVE SELECT                       */
  00F9          +1   235     sbit MSTEN    =   SPI0CN ^ 1;       /* SPI 0 MASTER ENABLE                      */
  00F8          +1   236     sbit SPIEN    =   SPI0CN ^ 0;       /* SPI 0 SPI ENABLE                         */         
                                          
                     237     
                     238     ;+        CSEG AT 0
                     239              
                     240     NAME    MAIN
                     241                       ; EXTRN CODE(end1)
                     242                       ; EXTRN CODE(numb)
                     243                       ; EXTRN CODE(SOROS)
                     244                       ; EXTRN CODE(Abegin)
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     5

                     245     
                     246                     ;PUBLIC gener,bitmas,bitrs,bitznak 
                     247                     ;PUBLIC meff
                     248                     ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 249             org 0h;    cseg AT 0
0000 020000   F      250                     jmp     begin   ;Main        ; Locate a jump to the start of code at 
0003                 251             org 3
0003 32              252                     reti   
000B                 253             org 0bh
000B 32              254                     reti
0013                 255             org 13h
0013 32              256                     reti
001B                 257             org 1bh
                     258     ;? timer1
001B 32              259                     reti
0023                 260             org 23h
0023 020000   F      261                     jmp     rs_byte ;!reti
002B                 262             org 2bh
002B 020000   F      263                     jmp     inter2  ;Timer2, IE.5,IP.5(ET2,PT2)
0033                 264             org 33h
0033 32              265                     reti
003B                 266             org 3bh
003B 32              267                     reti
0043                 268             org 43h
0043 32              269                     reti
004B                 270             org 4bh
004B 32              271                     reti
0053                 272             org 53h
0053 32              273                     reti
005B                 274             org 5bh
005B 32              275                     reti 
0063                 276             org 63h
0063 32              277                     reti
006B                 278             org 6bh
006B 32              279                     reti
0073                 280             org 73h
0073 32              281                     reti
0093                 282             org     93h
0093 020000   F      283                     jmp             keyb1           ;IE6
009B                 284             org     9bh
009B 020000   F      285                     jmp             keyb2      ;IE7
                     286     
  00CA               287     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               288     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     289      
                     290     Main         SEGMENT  CODE
                     291     
----                 292                     DSEG
                     293       
  0040               294     bufind  DATA    40h;буффер индикации 12byte
  004F               295     abin            DATA    4fh     ;4byte long~adec's digits
  0053               296     adec            DATA    53h     ;53h..5dh 10byte
  006E               297     chmas           DATA    6eh     ;счетчик л-тов незаполн массива
  006F               298     mabin           DATA    6fh
  0077               299     reacp           DATA    77h     ;результат чтения асп 4byte int (hex)
  003D               300     chkl            DATA    3dh     ;счетчик задержки клавиатуры 2bait                         
  003F               301     chmasN  DATA    3fh     ;n=2,n=10 суммирование n значений       =20(27.12.06)
  003C               302     savba           DATA    3ch     ;сохр байта индикации при миганиии      
  003B               303     movrig      DATA        3bh     ;крайне правое положение
  003A               304     movleft     DATA        3ah     ;крайне левое положение                  
  0039               305     nuerr           DATA    39h     ;номер ошибки (для интерфейса)  
  0038               306     nblok           DATA    38h     ;номер введенного блока
  0037               307     nelem           DATA    37h     ;номер лемента в блоке 0..200
  0036               308     saus            DATA    36h     ;сохр упр слово
  0034               309     sadiap  DATA    34H     ;сохр диапазон на кот проходила запись блока1
  0033               310     chind2  DATA    33h     ;счетчик индикации
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     6

  0032               311     sadiap2 DATA    32h     ;сохр диапазон на кот проходила запись блока2
  0031               312     sadiap3 DATA    31h     ;сохр диапазон на кот проходила запись блока3
  0030               313     sadiap4 DATA    30h     ;сохр диапазон на кот проходила запись блока4
                     314     ;DATA           2fh
                     315     ;;;;;
  0020               316     cellbit         DATA    20h
  0000               317     bitznak         BIT     cellbit.0       ;20.0           
  0001               318     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               319     znmat                   BIT     cellbit.2       ;20.2
  0003               320     bitrs                   BIT     cellbit.3       ;20.3
  0004               321     bitizm          BIT     cellbit.4       ;20.4 вкл реж измерения
  0005               322     bitavp          BIT     cellbit.5       ;20.5  бит режима avp
  0006               323     bitvi11         BIT     cellbit.6       ;20.6   бит нажатия ввод режима вычислить R!!!
  0007               324     bitzus          BIT     cellbit.7       ;20.7;флаг задержки     после установки us      
                     325     
  0021               326     cellbit1                DATA    21h
                     327     ;?bitbuf                BIT     cellbit1.0      ;21.0   
  0009               328     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               329     bitbon          BIT     cellbit1.2      ;21.2  буфер вкл
  000B               330     bitmem          BIT     cellbit1.3      ;21.3 нажата кн память
                     331     ;bmem11         BIT     cellbit1.4      ;21.4    бит ПАМ11
  000D               332     bifl_kt         BIT     cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     333     ;bmem13         BIT     cellbit1.6      ;21.6            
  000F               334     bitnul          BIT     cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     335     
  0022               336     cellbit2                DATA    22h
  0010               337     bitt2                   BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               338     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               339     bitklb          BIT     cellbit2.2      ;22.2  признак калибровки
  0013               340     bitv19          BIT     cellbit2.3      ;22.3   бит установки скор итерфейса 19.6
  0014               341     bitvich         BIT     cellbit2.4      ;22.4  1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               342     biteizm         BIT     cellbit2.5      ;22.5   признак теста измерения 
  0016               343     bitpar          BIT     cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               344     bitoll          BIT     cellbit2.7      ;22.7 бит перегрузки
                     345     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     346     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     347     ;и выдает т.н. буфер индикации  
  0023               348     cellbit3                DATA    23h
  0018               349     knizm                   BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               350     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               351     bitakt          BIT     cellbit3.2      ;22.2  бит такта
  001B               352     bitznB          BIT     cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               353     bitprer         BIT     cellbit3.4      ;22.4    
                     354     ;bit                    BIT             cellbit3.5      ;22.5    
                     355     ;bit                    BIT             cellbit3.6      ;22.6            
                     356     ;bit                    BIT             cellbit3.7      ;22.7
                     357     
  000C               358     is_2            BIT     cellbit1.4      ;бит 'to RS direct out'
  000E               359     is_mem  BIT     cellbit1.6      ;21.6            
  001F               360     is_izm  BIT     cellbit3.7
  001D               361     is_cmd  BIT     cellbit3.5
  001E               362     is_rs           BIT     cellbit3.6      ;out rez_A3
  00DB               363     buf_in  DATA    0DBh    ;4
  0024               364     cnt_out DATA    24h
  0025               365     cnt_in  DATA    25h
  0026               366     p_out           DATA    26h     ;??
  0027               367     p_in            DATA    27h
  004E               368     cmd_rez DATA    4Eh
  0098               369     RI              BIT     SCON0.0
  0099               370     TI              BIT     SCON0.1
                     371     
                     372     
  005E               373     rez_Ame data 5eh;float   (РЕЗ1-AN)*K
                     374     ;hex
  0062               375     rez_A           data 62h        ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               376     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     7

  006A               377     rez_A0  data 6ah        ;рез изм по нажатию кн НУЛЬ
  007B               378     rez_A2  data 7bh        ; A2
  0098               379     chinkor data  98h       ;80h,счетчик интервала коррекции  2byte
  0081               380     chavt           data  81h       ;счетчик автокалибровки  2byte
  0083               381     chdel           data  83h       ; счетчик задержки
                     382     ;float
  0084               383     kor0_AN data  84h       ;4byte  AN      результат коррекции 0
  0088               384     rezAp           data  88h       ;4byte  A+
  008C               385     rezAm           data  8ch       ;4byte  A-
  0090               386     koefKp  data  90h       ;4byte  K+
  0094               387     koefKm  data  94h       ;4byte  K-
                     388     ;hex 
  009A               389     parT            data  9ah       ;параметр времени измерения
  009B               390     chbefore        data  9bh       ;счетчик предварительного суммирования
  009C               391     rez_A3          data  9ch       ;A3
                     392     ;FLOAT
  00A0               393     koefKD  data  0a0h      ;KD кофф диапазона
  00A4               394     rez_Ak  data  0a4h      ;Ak
  00A8               395     parol           data  0a8h      ;храним в памяти пароль
  00AC               396     chind           data  0ach      ;счетчик индикации
                     397     ;chbuf  data  0adh       ;счетчик периода загрузки в буфер и интерфейс
  00AE               398     diap            data  0aeh      ;номер диапазона
  00AF               399     parN            data  0afh      ;N  пар разрядности индикатора
  00B0               400     level           data  0b0h      ;уровень в меню, выч    ,Tизм
  00B1               401     vichR           data  0b1h      ;параметр =11,12,13,21          state of menu VychR
  00B2               402     marker  data  0b2h      ;номер мигающего знакоместа
  00B3               403     summa           data  0b3h      ;ячейка для суммирования        rez_A
  00B7               404     load            data  0b7h      ;яч для загрузки текстов на индикатор
  00B8               405     work            data  0b8h      ;рабочая ячейка
  00BC               406     konstA  data  0bch      ;введенная с крана константа A
                     407     ;konstB data  0c0h       ;введенная с крана константа B
  00C0               408     saven_bl2       data    0c0h    ;копия адреса последней записанной ячейки блока2
  00C2               409     saven_bl3       data  0c2h      ;копия адреса последней записанной ячейки блока3 
                     410                ;c4 1bait
  00C5               411     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               412     rez_R           data    0c9h    ;рез вычисления R 4baita
  00CD               413     interva data  0cdh      ;значение интервала (запись)2baita
  00CF               414     chbuf           data  0cfh      ;счетчик периода загрузки в буфер и интерфейс
  00D3               415     saven_bl        data  0d3h      ;номер ячейки в блоке 2 baita
  00D5               416     volume  data    0d5h    ;объем блока 2 baita
  00D6               417     chblok  data    0d6h    ;volume;кол измерений блока
  00D7               418     copy_hl data  0d7h      ;адрес ячейки блока для просмотра 
  00D9               419     saven_bl4       data  0d9h      ;копия адреса последней записанной ячейки блока4
                     420     ;data           0dbh e0h-граница стека
                     421     
                     422     ;внешнее ОЗУ 64K
                     423     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     424     ;ячейку  стирается целая страница 0..ffh рпзу
                     425     ;               XSEG AT 100h
                     426             PUBLIC    MASS0
  0100               427     MASS0  xdata 0100h;     скользящий массив измерения
  0104               428     MASS1  xdata 0104h;
  0108               429     MASS2  xdata 0108h;
  010C               430     MASS3  xdata 010ch;
  0110               431     MASS4  xdata 0110h;
  0114               432     MASS5  xdata 0114h;
  0118               433     MASS6  xdata 0118h;
  011C               434     MASS7  xdata 011ch;
  0120               435     MASS8  xdata 0120h;
  0124               436     MASS9  xdata 0124h;
  0128               437     MASS10  xdata 0128h;
  012C               438     MASS11  xdata 012ch;
  0130               439     MASS12  xdata 0130h;
  0134               440     MASS13  xdata 0134h;
  0138               441     MASS14  xdata 0138h;
  013C               442     MASS15  xdata 013ch;
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     8

  0140               443     MASS16  xdata 0140h;
  0144               444     MASS17  xdata 0144h;
  0148               445     MASS18  xdata 0148h;
  014C               446     MASS19  xdata 014ch;
  0E00               447     chbuf1  xdata 0e00h;счетчик буфера 1
                     448     ;xdata  0e04
  0000               449                     rr0     EQU     00
  0001               450                     rr1     equ     01
  0006               451                     rr6   equ       06
  0002               452                     rr2     equ     02
  0003               453                     rr3     equ     03
  0007               454                     rr7   equ       07
  0008               455                     r8      equ     08
  0009               456                     r9      equ     09
  000A               457                     r10     equ     10
  000B               458                     r11   equ       11
                     459     
----                 460                  rseg     Main         ; Switch to this code segment.
                     461     
                     462                  using    0            ; Specify register bank for the following
                     463     
0100                 464             org 100h
                     465     ;$EJECT
                     466     
0100 7581E0          467     begin:  mov             sp, #0e0h               ;?8
                     468     
0103 75E900          469                     mov             PCA0L,#00;=0x00;
0106 75D900          470                     mov             PCA0MD,#00;= 0x00;
0109 75A41F          471                     mov             P0MDOUT,#1fh;=0x1f;
010C 75A5CC          472                     mov             P1MDOUT,#0cch;86h;8fh;=0x8f;
010F 75A600          473                     mov             P2MDOUT,#00;=0x00;
                     474             
0112 75A73F          475                     mov             P3MDOUT,#3fh;
0115 75B5FF          476                     mov             P74OUT ,#0ffh;=0xff;
0118 75D103          477                     mov             REF0CN,#03h;=0x03;
                     478             
011B 75E114          479                     mov             XBR0,#14h;= 0x14;
011E 75E200          480                     mov             XBR1,#00; =0x00;
0121 75E300          481                     mov             XBR2,#00;=0x00
0124 75B0C0          482                     mov             P3,#0c0h
0127 75FFDE          483                     mov             WDTCN,#0deh;=0xde;запрет работы WDT
012A 75FFAD          484                     mov             WDTCN,#0adh;=0xad;                                   
012D 758922          485                     mov             TMOD,#22h;=0x22;        регистр режимов
0130 758E30          486                     mov             CKCON,#30h;=0x30; сист частота/12     
0133 758CF9          487                     mov             TH0,#0f9h;=0xf9;  Установка таймера
0136 758AF9          488                     mov             TL0,#0f9h;=0xf9; 
0139 75E680          489                     mov             EIE1,#80h;=0x80;
                     490     
013C 75D480          491                     mov             DAC0CN,#80h;=0x80;
013F 75D780          492                     mov             DAC1CN,#80h;=0x80;
0142 75B167          493                     mov             OSCXCN,#67h;=0x67;
                     494     
                     495     
0145                 496     gener:  ;+mov           a, oscxcn
                     497             ;+cjne  a,#11100111b,gener      ;?E7
0145 75B288          498                     mov             OSCICN,#88h;=0x84;
0148 75CA00          499                     mov             TMR2RLL,#0;=0;
014B 75CBD1          500                     mov             TMR2RLH,#0d1h;=0xd1;
                     501       
014E D28E            502                     setb    TCON.6                  ;регистр управления
0150 D28C            503                     setb            tcon.4
0152 75EF00          504                     mov             RSTSRC,#0;=00   ;//источники сброса 
0155 75E340          505                     mov             XBR2,#40h
0158 75E10E          506                     mov             XBR0,#0eh;06h;16h
015B 75F803          507                     mov             SPI0CN,#03
015E 759D31          508                     mov             spi0ckr,#31H;;;;;;;;#04
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE     9

                     509     ;установка скорости
0161 759850          510                     mov             SCON0,#50h;01010000;скорость обмена определяется таймером1
0164 758780          511                     mov             PCON,#10000000b;удвоенная скорость передачи SMOD0=1
0167 758E10          512                     mov             CKCON,#00010000b;TIM=1                  ? was 30h
016A 758920          513                     mov             TMOD,#00100000b;реж2 внутр ист синхр ? was 22h
016D 758840          514                     mov             TCON,#01000000b;счетчик запущен ?.4,.6 was set
0170 75D900          515                     mov             PCA0MD,#00              ;PCA 
0173 75DA00          516                     mov             PCA0CPM0,#00000000b;00000110b;01000010b;
0176 75EA00          517                     mov             PCA0CPL0,#00
0179 75FA9C          518                     mov             PCA0CPH0,#9ch;регулировка звука 088h;90h
017C 75D840          519                     mov             PCA0CN,#40h
017F 75C800          520                     mov             T2CON,#00
                     521     ;               mov     TH1,#244        ;220~19600
                     522     ;               setb    TR1     ;start Timer1
                     523     
                     524     ;?      mov   SBUF0,#37h
                     525     
                     526     ;       mov     3,#33
                     527     ;       mov     r2,#30
                     528     ;       mov     r0,#0DAh
                     529     
                     530     ;debug: mov     A,r2
                     531     ;               mov     @r0,A
                     532     ;               inc     r2
                     533     ;               inc     r0
                     534     ;               djnz    3,debug ;jmp    debug   ;interrupt debug
                     535     
                     536     
                     537     ;       mov     SBUF,#7
                     538     ;       jnb     TI,$
                     539     ;       clr     TI
                     540     
                     541     ;               mov     IE,#90h ;RS, ?Tim1
                     542     
0182 7A50            543                     mov             r2,#50h                 ;57.6->19.2
0184 7B2C            544                     mov             r3,#2ch
0186 120454          545                     call    re4byte                 ;502ch 1 bait skor
0189 E508            546                     mov             a,r8
018B B4000A          547                     cjne            a,#00,yst19
018E C213            548                     clr             bitv19                  ;57.6
0190 758DF4          549                     mov             TH1,#244
0193 758BFD          550                     mov             TL1,#0FDh
0196 8008            551                     jmp             yst1
0198 900000   F      552     yst19:  mov     dptr,#teS19_2
019B D213            553                     setb    bitv19                  ;19,2
019D 758DDC          554                     mov     TH1,#220
01A0                 555     yst1:
01A0 D28E            556                     setb    TR1     ;start Timer1
01A2 75E730          557                     mov             EIE2,#30H;00110000
                     558             ;       mov             EIP2,#30H
                     559     
                     560     ;       mov     p_in,#buf_in    ; for receive
                     561     ;       mov     cnt_out,#0      ;??
                     562     ;       mov     cnt_in,#0
                     563     
01A5 75A880          564                     mov     IE,#80h ;??80//Снятие блокировки всех прерываний+RS
                     565     ;ozu
01A8 E4              566                     clr     a
01A9 7800            567                     mov     r0,#00h 
01AB F6              568     mecle:  mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              569                     inc     r0
01AD B87FFB          570                     cjne    r0,#7fh,mecle
01B0 7880            571                     mov     r0,#80h
01B2 F6              572     meff:           mov     @r0,a 
01B3 F2              573                     movx @r0,a
01B4 08              574                     inc     r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    10

01B5 B8DFFA          575                     cjne    r0,#0dfh,meff
                     576     
                     577     
                     578     ;               mov     cnt_out,#33             ;+
                     579     ;               mov     p_out,#0DAh
                     580     
01B8 120000   F      581                     call    clmassix
                     582     ;обнулить внешнее озу 4кбайта
01BB 900000          583                     mov     dptr,#0
01BE E4              584     extcle: clr     a
01BF F0              585                     movx    @dptr,a
01C0 A3              586                     inc     dptr
01C1 E583            587                     mov     a,dph
01C3 B410F8          588                     cjne    a,#10h,extcle
                     589     
01C6 7898            590                     mov             r0,#chinkor
01C8 7600            591                     mov             @r0,#0;1;
01CA 08              592                     inc             r0
01CB 7619            593                     mov             @r0,#19h;64h;0c8h;90h;
                     594     
01CD 7881            595                     mov             r0,#chavt
01CF 7601            596                     mov             @r0,#1
01D1 08              597                     inc             r0
01D2 7690            598                     mov             @r0,#90h
                     599     
01D4 78B2            600                     mov             r0,#marker
01D6 76FF            601                     mov             @r0,#0ffh
                     602                     ;mov            r0,#chind
                     603                     ;mov            @r0,#1
                     604     ;after_2:               
01D8 74FF            605                     mov             a,#0ffh
01DA F585            606                     mov             p5,a
01DC 799A            607                     mov             r1,#parT
01DE 7702            608                     mov             @r1,#2                  ;Tizm=1s
01E0 79AE            609                     mov             r1,#diap
01E2 7705            610                     mov             @r1,#5                  ;10-7a
01E4 753405          611                     mov             sadiap,#5
01E7 79AF            612                     mov             r1,#parN
01E9 7702            613                     mov             @r1,#2
01EB 7400            614                     mov             a,#00h
01ED F585            615                     mov             p5,a
01EF D204            616                     setb            bitizm
                     617     
01F1 799B            618                     mov             r1,#chbefore
01F3 7700            619                     mov             @r1,#0
                     620     
01F5 900000   F      621                     mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      622                     call    ldc_long
01FB 7890            623                     mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      624                     call    saver2
0200 7894            625                     mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      626                     call    saver2
0205 78A0            627                     mov             r0,#koefKD
0207 120000   F      628                     call    saver2
020A 78CF            629                     mov             r0,#chbuf
020C 120000   F      630                     call    saver2
020F 900158          631                     mov             dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            632                     mov             r1,#saven_bl
0214 E583            633                     mov             a,dph
0216 F7              634                     mov             @r1,a
0217 09              635                     inc             r1
0218 E582            636                     mov             a,dpl
021A F7              637                     mov             @r1,a
                     638     
021B 900478          639                     mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            640                     mov             r1,#saven_bl2
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    11

0220 E583            641                     mov             a,dph
0222 F7              642                     mov             @r1,a
0223 09              643                     inc             r1
0224 E582            644                     mov             a,dpl
0226 F7              645                     mov             @r1,a
0227 900798          646                     mov                     dptr,#798h;3 блок(2е с конца измерение) 
022A 79C2            647                     mov             r1,#saven_bl3
022C E583            648                     mov             a,dph
022E F7              649                     mov             @r1,a
022F 09              650                     inc             r1
0230 E582            651                     mov             a,dpl
0232 F7              652                     mov             @r1,a
0233 900AB8          653                     mov             dptr,#0ab8h;4 блок(2е с конца измерение)        
0236 79D9            654                     mov             r1,#saven_bl4
0238 E583            655                     mov             a,dph
023A F7              656                     mov             @r1,a
023B 09              657                     inc             r1
023C E582            658                     mov             a,dpl
023E F7              659                     mov             @r1,a
023F 753801          660                     mov             nblok,#1                        ;номер введенного блока
0242 753701          661                     mov             nelem,#1
0245 78CD            662                     mov             r0,#interva
0247 7600            663                     mov             @r0,#0
0249 08              664                     inc             r0
024A 7601            665                     mov             @r0,#1
024C 7840            666                     mov             r0,#bufind
024E                 667     age2:
024E 76FD            668                     mov             @r0,#0fdh         ;погасить индикатор
0250 08              669                     inc             r0
0251 B84CFA          670                     cjne    r0,#bufind+12,age2              
0254 120000   F      671                     call    ind
0257 120000   F      672                     call    z_1s
                     673     
                     674                     ;зажечь все лементы индикации
025A 7840            675                     mov     r0,#bufind
025C 7669            676     ageon:  mov     @r0,#69h;0feh;?
025E 08              677                     inc     r0
025F B84CFA          678                     cjne    r0,#bufind+12,ageon             
0262 120000   F      679                     call    ind
0265 120000   F      680                     call    z_1s            ;1sec
                     681     
0268 120000   F      682                     call    z_15;z_1ms
026B 434B10          683                     orl     bufind+11,#10h;бит точки после 1 знакоместа
                     684     
026E 7C60            685                     mov     r4,#60h
0270 7D00            686                     mov     r5,#00         
0272 120000   F      687                     call    iniacp;инициализация acp
0275 120000   F      688                     call    loadUS          ;us 10-7 A
                     689     
0278                 690     after_2:                
                     691                             
0278 D204            692                     setb            bitizm
027A 7527DB          693             mov     p_in,#buf_in    ; for receive
027D 752400          694             mov     cnt_out,#0      ;??
0280 752500          695             mov     cnt_in,#0
0283 75A890          696             mov     IE,#90h ;Снятие блокировки всех прерываний+RS
                     697     
0286                 698     rebyte:
                     699     
0286 301D03          700             jnb     is_cmd,me3              ;??
0289 120000   F      701             call    cmd_tree
028C                 702     me3:
                     703     ;after_2:               ;??
                     704     
028C C217            705                     clr             bitoll
028E 3095FD          706                     jnb             p1.5,$
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    12

0291 2095FD          707                     jb              p1.5,$
                     708                     ;mov            a,P6            ;p6.4=0
                     709                     ;anl            a,#0efh
                     710                     ;mov            P6,a
                     711                     ;nop
                     712                     ;nop
                     713                                     
                     714                     ;mov            a,P6                    ;p6.4=1 
                     715                     ;orl            a,#10h
                     716                     ;mov            P6,a                        
0294 7411            717                     mov             a,#11h
0296 120000   F      718                     call    write
                     719             ;чтение acp
0299 120000   F      720                     call    read    
029C F578            721                     mov     reacp+1,A       ;старший байт 
029E 120000   F      722                     call    read    
02A1 F579            723                     mov     reacp+2,A       ;средний байт 
02A3 120000   F      724                     call    read
02A6 F57A            725                     mov     reacp+3,A               ;мл байт
                     726     
02A8 7878            727                     mov             r0,#reacp+1
02AA E6              728                     mov             a,@r0
02AB 20E743          729                     jb              acc.7,znplus;
02AE D200            730                     setb    bitznak
02B0 4480            731                     orl             a,#80h  ;ост содерж яч 
02B2 F6              732                     mov             @r0,a
                     733                                     
02B3 18              734     mmm:            dec             r0;,#reacp
02B4 76FF            735                     mov             @r0,#0ffh
02B6 8041            736                     jmp             goznak
                     737     
02B8 120000   F      738     mem10ms:        call            ind
02BB 80C9            739                     jmp             rebyte  ;10ms
                     740     
02BD                 741     labelA: ;разрешить ie6,ie7
                     742     ;               mov             a,chkl+1                ;low
                     743     ;               jnz             no0key
02BD E53D            744                     mov             a,chkl
02BF 30E70B          745                     jnb             acc.7,no0key;jnz                        no0key
02C2 E5AD            746                     mov             a,P3IF
02C4 543F            747                     anl             a,#3fh
02C6 F5AD            748                     mov             P3IF,a
02C8 75E730          749                     mov             EIE2,#30h ;EIE2.5,EIE2.4
02CB 800D            750                     jmp             yes0key
                     751                        
02CD                 752     no0key: ;mov            r1,#chkl 
                     753                     ;call   chdec
02CD C3              754                     clr             c
02CE E53E            755                     mov             a,chkl+1;chkl-1
02D0 9401            756                     subb            a,#1
02D2 F53E            757                     mov             chkl+1,a
02D4 E53D            758                     mov             a,chkl
02D6 9400            759                     subb            a,#0
02D8 F53D            760                     mov             chkl,a
                     761     
02DA                 762     yes0key:
02DA 2004A9          763                     jb              bitizm,rebyte
                     764              ;буфер 2 выдать на индикацию
02DD E533            765                     mov             a,chind2                        ;реже выдавать на индикацию
02DF 700B            766                     jnz             nochind
02E1 753364          767                     mov             chind2,#100
02E4 120000   F      768                     call            ind
02E7 120000   F      769     yes0key1:       call            z_1ms;z_01s
                     770                     ;call   z_01s
                     771                     ;call   z_01s
02EA 80D1            772                     jmp             labelA
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    13

                     773     
02EC 14              774     nochind:        dec             a
02ED F533            775                     mov             chind2,a
02EF 80F6            776                     jmp             yes0key1;labelA
                     777             
02F1 C200            778     znplus: clr     bitznak
02F3 547F            779                     anl             a,#7fh;fdh                      ;+
02F5 F6              780                     mov             @r0,a
02F6 18              781                     dec             r0      ;,#reacp
02F7 7600            782                     mov             @r0,#00h
                     783                             
02F9                 784     goznak:
02F9 787A            785                     mov             r0,#reacp+3
02FB E6              786                     mov             a,@r0
02FC 7F05            787                     mov             r7,#5           ;6 сдвиг на 5 разрядов вправо
02FE C3              788     sdvig3:         clr             c
02FF 13              789                     rrc             a
0300 DFFC            790                     djnz            r7,sdvig3       ;d7,d6,d5         мл байт
0302 FA              791                     mov             r2,a            ;сохр байт
0303 18              792                     dec             r0              ;reacp+2
0304 E6              793                     mov             a,@r0
0305 C0E0            794                     push    acc
0307 C3              795                     clr             c
0308 7F03            796                     mov             r7,#3;2
030A C3              797     sdvig2:         clr             c
030B 33              798                     rlc             a
030C DFFC            799                     djnz            r7,sdvig2       ;d12..d11        средний байт
030E 4A              800                     orl             a,r2
030F F57A            801                     mov             reacp+3,a       ;сформ мл байт
0311 D0E0            802                     pop     acc
0313 7F05            803                     mov             r7,#5;6
0315 C3              804     sdvig1:         clr             c
0316 13              805                     rrc             a
0317 DFFC            806                     djnz    r7,sdvig1               ;d15,d14          ср байт
0319 FA              807                     mov             r2,a    ;сохр
031A E578            808                     mov             a,reacp+1
031C C0E0            809                     push    acc
                     810                     ;       push    acc
031E 7F03            811                     mov             r7,#3;2
0320 C3              812     sdvig0:         clr             c
0321 33              813                     rlc             a
0322 DFFC            814                     djnz    r7,sdvig0               ;d21..d16
0324 4A              815                     orl             a,r2
0325 F579            816                     mov             reacp+2,a       ;сформ средний  байт
0327 D0E0            817                     pop             acc             ;reacp+1
0329 20E70B          818                     jb              acc.7,sdvm
032C C3              819                     clr             c
032D 7F05            820                     mov             r7,#5;6
032F C3              821     sdvig4:         clr             c
0330 13              822                     rrc             a
0331 DFFC            823                     djnz            r7,sdvig4       ;d23,d22
0333 F578            824                     mov             reacp+1,a
0335 8008            825                     jmp             readyacp        ;ankor;klmas
                     826     
0337 7F05            827     sdvm:           mov             r7,#5;6
0339 D3              828     sdvig6: setb            c
033A 13              829                     rrc             a
033B DFFC            830                     djnz            r7,sdvig6 ;       d23,d22
033D F578            831                     mov             reacp+1,a
                     832     ; reacp..reacp+3-результат чтения асп(hex) 
033F 7898            833     readyacp:       mov             r0,#chinkor
0341 E6              834                     mov             a,@r0
0342 30E702          835                     jnb             acc.7,gopart
0345 8044            836                     jmp             sumt2
                     837                     
0347                 838     gopart:
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    14

0347 789A            839                     mov             r0,#parT        ;параметр времени
0349 793F            840                     mov             r1,#chmasN
034B B6013A          841                     cjne            @r0,#1,noparT1
                     842             ;РЕЗ+РЕЗ
034E 7877            843                     mov             r0,#reacp
0350 120000   F      844                     call            resar2  ;reacp->r2..r5
0353 78B6            845                     mov             r0,#summa+3     ;rez_A+3
0355 120000   F      846                     call            ladd
0358 78B3            847                     mov             r0,#summa;rez_A
035A 120000   F      848                     call            saver2
035D 793F            849                     mov             r1,#chmasN
035F 7714            850                     mov             @r1,#20;10
0361 789B            851                     mov             r0,#chbefore
0363 B6631E          852                     cjne            @r0,#99,nobef99
                     853             ;РЕЗ/100
0366 900000   F      854                     MOV     DPTR,#ch100 
0369 120000   F      855     allsum: CALL  ldc_ltemp          ; ltemp <-- 100
036C 120000   F      856                     call    zdiv;divide
036F 7862            857                     mov     r0,#rez_A
0371 120000   F      858                     call    saver2          ;сумма 100 отсчетов /100
0374 78C5            859                     mov     r0,#Rez_del
0376 120000   F      860                     call    saver2  
                     861     
0379 78B3            862                     mov             r0,#summa
037B 120000   F      863                     call            clear4
                     864     
037E 799B            865                     mov             r1,#chbefore
0380 7700            866                     mov             @r1,#0
0382 8070            867                     jmp             klmas           ;загр в массив скользящее ср
0384 06              868     nobef99:        inc             @r0                     ;chbefore
0385 020000   F      869                     jmp             rebyte;labelA;метка A
                     870     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     871     ;а потом уже располагаем  в скользящий массив  из n
                     872     
                     873     
0388 B6021D          874     noparT1:        cjne    @r0,#2,noparT2
                     875             ;РЕЗ+РЕЗ
038B                 876     sumt2:
038B 7877            877                     mov     r0,#reacp
038D 120000   F      878                     call    resar2          ;reacp->r2..r5
0390 78B6            879                     mov     r0,#summa+3;rez_A+3
0392 120000   F      880                     call    ladd
0395 78B3            881                     mov     r0,#summa;rez_A
0397 120000   F      882                     call    saver2
039A 789B            883                     mov     r0,#chbefore
039C 793F            884                     mov     r1,#chmasN
039E 770A            885                     mov     @r1,#10
03A0 B613E1          886                     cjne    @r0,#19,nobef99;9,nobef99
                     887             ;РЕЗ/20
03A3 900000   F      888                     MOV     DPTR,#ch20;ch10 
03A6 80C1            889                     jmp     allsum
                     890     
03A8 B6031D          891     noparT2:        cjne    @r0,#3,noparT3
03AB 7877            892                     mov     r0,#reacp
03AD 120000   F      893                     call    resar2          ;reacp->r2..r5
03B0 78B6            894                     mov     r0,#summa+3;rez_A+3
03B2 120000   F      895                     call    ladd
03B5 78B3            896                     mov     r0,#summa;rez_A
03B7 120000   F      897                     call    saver2
03BA 789B            898                     mov     r0,#chbefore
03BC 793F            899                     mov     r1,#chmasN
03BE 7702            900                     mov     @r1,#2;4                                        ;n=4
03C0 B609C1          901                     cjne    @r0,#9,nobef99;9,nobef99
                     902             ;РЕЗ/10
03C3 900000   F      903                     MOV             DPTR,#ch10 
03C6 80A1            904                     jmp             allsum
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    15

                     905                             
03C8 B6041D          906     noparT3:        cjne    @r0,#4,noparT4
03CB                 907     aapar:          
03CB 7877            908                     mov             r0,#reacp
03CD 120000   F      909                     call            resar2          ;reacp->r2..r5
03D0 78B6            910                     mov             r0,#summa+3;rez_A+3
03D2 120000   F      911                     call            ladd
03D5 78B3            912                     mov             r0,#summa;rez_A
03D7 120000   F      913                     call            saver2
03DA 789B            914                     mov             r0,#chbefore
03DC 793F            915                     mov             r1,#chmasN
03DE 7702            916                     mov             @r1,#2;4
03E0 B604A1          917                     cjne    @r0,#4,nobef99;9,nobef99
                     918             ;РЕЗ/10
03E3 900000   F      919                     MOV             DPTR,#ch5
03E6 8081            920                     jmp             allsum
                     921     
03E8 7702            922     noparT4:        mov             @r1,#2          ;chmasN n=2
03EA 7877            923                     mov             r0,#reacp
03EC 120000   F      924                     call            resar2          ;reacp->r2..r5
03EF 7862            925                     mov             r0,#rez_A
03F1 120000   F      926                     call            saver2
                     927     ;загрузить А в массив из 2/10 значений
                     928     
03F4                 929     klmas:           
03F4 793F            930                     mov     r1,#chmasN
03F6 B7021A          931                     cjne    @r1,#2,mas10
03F9 900100          932                     MOV     dptr,#MASS0
03FC 120000   F      933                     CALL    xCIKLWR           ; MASS0 --> MASS1
                     934     
03FF 7862            935                     mov     r0,#rez_A
0401 120000   F      936                     call    resar2          ;->r2..r5
0404 900100          937                     mov     dptr,#MASS0
0407 120000   F      938                   call      saveIr2                 ; R2-R5 --> MAS0
                     939                     
040A 900107          940                   MOV       dptr,#MASS1+3
040D 120000   F      941                   CALL      addx
0410 020000   F      942                     jmp     endsum
                     943     ;массив из 10-ти измерений      ?
0413 B70A7D          944     mas10:  cjne    @r1,#10,mas20
0416 900120          945                     mov     dptr,#MASS8
0419 120000   F      946                   CALL      xCIKLWR         ;MASS8->MASS9
041C 90011C          947                     mov     dptr,#MASS7
041F 120000   F      948                   CALL      xCIKLWR         ;MASS7->MASS8
0422 900118          949             MOV     dptr,#MASS6
0425 120000   F      950                   CALL      xCIKLWR            ; MASS6 --> MASS7
0428 900114          951                   MOV       dptr,#MASS5
042B 120000   F      952                     CALL    xCIKLWR           ; MASS5 --> MASS6
042E 900110          953                   MOV       dptr,#MASS4
0431 120000   F      954                     CALL    xCIKLWR           ; MASS4 --> MASS5
0434 90010C          955                     mov     dptr,#MASS3
0437 120000   F      956                     CALL    xCIKLWR         ;MASS3->MASS4
043A 900108          957             MOV     dptr,#MASS2
                     958     
043D 120000   F      959                   CALL      xCIKLWR            ; MASS2 --> MASS3
0440 900104          960                     MOV     dptr,#MASS1
0443 120000   F      961                   CALL      xCIKLWR           ; MASS1 --> MASS2
0446 900100          962                   MOV       dptr,#MASS0
0449 120000   F      963                     CALL    xCIKLWR           ; MASS0 --> MASS1
                     964     
044C 7862            965                     mov     r0,#rez_A
044E 120000   F      966                     call    resar2          ;->r2..r5
                     967             ;call   aform
0451 900100          968                     mov     dptr,#MASS0
0454 120000   F      969                   call      saveIr2                 ; R2-R5 --> MAS0
                     970              
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    16

0457 900107          971                   MOV       dptr,#MASS1+3
045A 120000   F      972                   CALL      addx
045D 90010B          973                   MOV       dptr,#MASS2+3
0460 120000   F      974                   CALL      addx
0463 90010F          975                   MOV       dptr,#MASS3+3
0466 120000   F      976                  CALL       addx
0469 900113          977                   MOV       dptr,#MASS4+3
046C 120000   F      978                   call      addx
046F 900117          979                     MOV     dptr,#MASS5+3
0472 120000   F      980                  CALL       addx
0475 90011B          981                   MOV       dptr,#MASS6+3
0478 120000   F      982                   CALL      addx
047B 90011F          983                   MOV       dptr,#MASS7+3
047E 120000   F      984                  CALL       addx
0481 900123          985                  MOV        dptr,#MASS8+3
0484 120000   F      986                   call      addx
0487 900127          987                     MOV     dptr,#MASS9+3
048A 120000   F      988                  call       addx
048D 020000   F      989                     jmp             endsum
                     990     
0490 020000   F      991     rmas4:  jmp             mas4
                     992     ;массив из 20-ти измерений
0493 B714FA          993     mas20:  cjne    @r1,#20,rmas4
0496 900148          994                     mov             dptr,#MASS18
0499 120000   F      995                   CALL              xCIKLWR         ;MASS18->MASS19 ?
049C 900144          996                     mov             dptr,#MASS17
049F 120000   F      997                   CALL              xCIKLWR         ;MASS17->MASS18
04A2 900140          998             MOV       dptr,#MASS16
04A5 120000   F      999                   CALL         xCIKLWR         ; MASS16 --> MASS17
04A8 90013C         1000                   MOV          dptr,#MASS15
                    1001                    
04AB 120000   F     1002                   CALL         xCIKLWR        ; MASS15 --> MASS16
04AE 900138         1003                   MOV          dptr,#MASS14
04B1 120000   F     1004                   CALL         xCIKLWR        ; MASS14 --> MASS15
04B4 900134         1005                     mov             dptr,#MASS13
04B7 120000   F     1006                   CALL              xCIKLWR         ;MASS13->MASS14
04BA 900130         1007             MOV        dptr,#MASS12
04BD 120000   F     1008                   CALL         xCIKLWR         ; MASS12 --> MASS13
04C0 90012C         1009                   MOV          dptr,#MASS11
                    1010                     
04C3 120000   F     1011                   CALL         xCIKLWR        ; MASS11 --> MASS12
04C6 900128         1012                   MOV          dptr,#MASS10
04C9 120000   F     1013                   CALL         xCIKLWR        ; MASS10 --> MASS11
04CC 900124         1014                     MOV        dptr,#MASS9
04CF 120000   F     1015                   CALL         xCIKLWR        ; MASS9 --> MASS10
04D2 900120         1016                     mov             dptr,#MASS8
04D5 120000   F     1017                   CALL              xCIKLWR         ;MASS8->MASS9
04D8 90011C         1018                     mov             dptr,#MASS7
04DB 120000   F     1019                  CALL               xCIKLWR         ;MASS7->MASS8
04DE 900118         1020                     MOV       dptr,#MASS6
04E1 120000   F     1021                   CALL         xCIKLWR         ; MASS6 --> MASS7
04E4 900114         1022                   MOV          dptr,#MASS5
04E7 120000   F     1023                   CALL         xCIKLWR        ; MASS5 --> MASS6
04EA 900110         1024                   MOV          dptr,#MASS4
04ED 120000   F     1025                   CALL         xCIKLWR        ; MASS4 --> MASS5
04F0 90010C         1026                     mov             dptr,#MASS3
                    1027     
04F3 120000   F     1028                   CALL              xCIKLWR         ;MASS3->MASS4
04F6 900108         1029             MOV        dptr,#MASS2
04F9 120000   F     1030                   CALL         xCIKLWR         ; MASS2 --> MASS3
04FC 900104         1031                   MOV          dptr,#MASS1
04FF 120000   F     1032                   CALL         xCIKLWR        ; MASS1 --> MASS2
0502 900100         1033                   MOV          dptr,#MASS0
0505 120000   F     1034                   CALL         xCIKLWR        ; MASS0 --> MASS1
                    1035                             
0508 7862           1036                     mov             r0,#rez_A
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    17

050A 120000   F     1037                     call    resar2          ;->r2..r5
                    1038             ;call   aform
050D 900100         1039                     mov     dptr,#MASS0
0510 120000   F     1040                   call      saveIr2                 ; R2-R5 --> MAS0
0513 900107         1041                   MOV       dptr,#MASS1+3
0516 120000   F     1042                   CALL      addx
0519 90010B         1043                   MOV       dptr,#MASS2+3
051C 120000   F     1044                   CALL      addx
051F 90010F         1045                   MOV       dptr,#MASS3+3
0522 120000   F     1046                  CALL       addx
0525 900113         1047                   MOV       dptr,#MASS4+3
0528 120000   F     1048                   call      addx
052B 900117         1049                     MOV     dptr,#MASS5+3
052E 120000   F     1050                  CALL       addx
0531 90011B         1051                  MOV        dptr,#MASS6+3
0534 120000   F     1052                  CALL       addx
0537 90011F         1053                  MOV        dptr,#MASS7+3
053A 120000   F     1054                  CALL       addx
053D 900123         1055                  MOV        dptr,#MASS8+3
0540 120000   F     1056                  call       addx
0543 900127         1057                     MOV     dptr,#MASS9+3
0546 120000   F     1058                  call       addx
                    1059     ;27
0549 90012B         1060                     MOV        dptr,#MASS10+3
054C 120000   F     1061                   CALL       addx
054F 90012F         1062                     MOV     dptr,#MASS11+3
0552 120000   F     1063                   CALL       addx
0555 900133         1064                   MOV       dptr,#MASS12+3
0558 120000   F     1065                   CALL       addx
055B 900137         1066                   MOV       dptr,#MASS13+3
055E 120000   F     1067                  CALL        addx
0561 90013B         1068                   MOV       dptr,#MASS14+3
0564 120000   F     1069                   call       addx
0567 90013F         1070                     MOV   dptr,#MASS15+3
056A 120000   F     1071                     CALL     addx
056D 900143         1072                   MOV       dptr,#MASS16+3
0570 120000   F     1073                   CALL       addx
0573 900147         1074                   MOV       dptr,#MASS17+3
0576 120000   F     1075                  CALL        addx
0579 90014B         1076                  MOV        dptr,#MASS18+3
057C 120000   F     1077                   call       addx
057F 90014F         1078                     MOV     dptr,#MASS19+3
0582 120000   F     1079                  call        addx
0585 802F           1080                     jmp             endsum
                    1081     ;массив из 4х измерений
0587                1082     mas4:                   
0587 900108         1083                     MOV        dptr,#MASS2
058A 120000   F     1084                   CALL         xCIKLWR         ; MASS2 --> MASS3
058D 900104         1085                   MOV          dptr,#MASS1
0590 120000   F     1086                   CALL         xCIKLWR        ; MASS1 --> MASS2
0593 900100         1087                   MOV          dptr,#MASS0
0596 120000   F     1088                   CALL         xCIKLWR        ; MASS0 --> MASS1
                    1089                     
0599 7862           1090                     mov     r0,#rez_A
059B 120000   F     1091                     call    resar2          ;->r2..r5
                    1092             ;call   aform
059E 900100         1093                     mov     dptr,#MASS0
05A1 120000   F     1094                   call      saveIr2                 ; R2-R5 --> MAS0
                    1095              
05A4 900107         1096                   MOV       dptr,#MASS1+3
05A7 120000   F     1097                   CALL      addx
05AA 90010B         1098                   MOV       dptr,#MASS2+3
05AD 120000   F     1099                   CALL      addx
05B0 90010F         1100                   MOV       dptr,#MASS3+3
05B3 120000   F     1101                  CALL       addx
                    1102                  
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    18

05B6                1103     endsum: ;23.03  
05B6 786E           1104                     mov     r0,#chmas;8.11.06               ;0..n(0..2,0..10)
05B8 06             1105                     inc     @r0
05B9 E6             1106                     mov     a,@r0   
05BA 200105         1107                     jb      bitmas,masfull          ;массив заполнен 2/10 значениями
05BD B53F31         1108                     cjne    a,chmasN,masx5
05C0 D201           1109                     setb    bitmas                  ;массив заполнен
05C2 853F6E         1110     masfull:        mov     chmas,chmasN
05C5 783F           1111                     mov     r0,#chmasN
05C7 E6             1112                     mov     a,@r0
                    1113     ;masfull:
05C8 B40208         1114                     cjne    a,#2,nochn2
05CB 900000   F     1115                     MOV     DPTR,#ch2;10 
05CE 120000   F     1116                     CALL  ldc_ltemp          ; ltemp <-- 2
05D1 8028           1117                     jmp     mas5div
                    1118     
05D3 B40A08         1119     nochn2: cjne    a,#10,nochn10
05D6 900000   F     1120                     MOV     DPTR,#ch10 
05D9 120000   F     1121                     CALL  ldc_ltemp          ; ltemp <-- 10
05DC 801D           1122                     jmp     mas5div
                    1123     
05DE B41408         1124     nochn10:        cjne    a,#20,nochn20
05E1 900000   F     1125                     MOV     DPTR,#ch20 
05E4 120000   F     1126                     CALL  ldc_ltemp          ; ltemp <-- 20
05E7 8012           1127                     jmp     mas5div
                    1128     
05E9 900000   F     1129     nochn20:        MOV     DPTR,#ch4 
05EC 120000   F     1130                     CALL  ldc_ltemp          ; ltemp <-- 4
05EF 800A           1131                     jmp     mas5div
                    1132     
05F1 856E0B         1133     masx5:  mov     ltemp+3,chmas                   ;массив не заполнен
05F4 E4             1134                     clr     a
05F5 F50A           1135                     mov     ltemp+2,a
05F7 F509           1136                     mov     ltemp+1,a
05F9 F508           1137                     mov     ltemp,a
                    1138     
05FB 120000   F     1139     mas5div:        CALL    zdiv;divide, R2-R5 =(MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1140     ;получен результат 3 байта и знак
05FE 7866           1141                     mov     r0,#rez_A1
0600 120000   F     1142                     call    saver2           ;сохр среднее по массиву
                    1143     ;;8.11.06                       mov             chmasN,#0
0603 C3             1144                     clr     c
0604 799A           1145                     mov     r1,#parT
0606 7402           1146                     mov     a,#2
0608 97             1147                     subb    a,@r1
0609 501D           1148                     jnc     ankor           ;T<3
                    1149                             ;A-=РЕЗ1                                ;T>3
060B 120402         1150                     call    altof                   ;r2..r5->float
060E 785E           1151                     mov     r0,#rez_Ame
0610 120000   F     1152                     call    saver2
                    1153     
0613 7890           1154                     mov     r0,#koefKp;->r8..r11
0615 EA             1155                     mov     a,r2
0616 30E702         1156                     jnb     acc.7,nminus3
0619 7894           1157                     mov     r0,#koefKm;->r8..r11
061B 120000   F     1158     nminus3:        call    resar8
061E 120203         1159                     call    flmul  ;результат в плавающем формате м.б. его сохранить?
0621 785E           1160                     mov     r0,#rez_Ame
0623 120000   F     1161                     call    saver2
0626 8021           1162                     jmp     gotoKD
                    1163     
0628 7898           1164     ankor:  mov     r0,#chinkor
062A E6             1165                     mov     a,@r0
062B 30E703         1166                     jnb     acc.7,nokorr
                    1167             ;коррекция 0
062E 020000   F     1168                     jmp     kornul
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    19

0631                1169     nokorr: 
                    1170                     ;mov    r10,#00         ;       chavt
                    1171                     ;mov    r11,#00h
0631 7881           1172                     mov     r0,#chavt       
0633 E6             1173                     mov     a,@r0;call      chcmp           ;сравн счетчик авто калибровки с 0h
0634 30E737         1174                     jnb     acc.7,nonulavt;jnz              nonulavt        
0637 750A00         1175                     mov     r10,#0;1;00;02          
063A 750BC8         1176                     mov     r11,#0c8h;90h;0c8h;58h
063D 7898           1177                     mov     r0,#chinkor
063F 120000   F     1178                     call    chcmp
0642 7045           1179                     jnz     noavk
                    1180             ;автокалибровка
0644 020000   F     1181                     jmp             autoka;noavk;
                    1182     
0647 8079           1183     rafterK:        jmp             afterK
                    1184     
0649 C3             1185     gotoKD:         clr             c
064A 799A           1186                     mov             r1,#parT
064C 7404           1187                     mov             a,#4
064E 97             1188                     subb            a,@r1
064F 50F6           1189                     jnc             rafterK         ;T<5
                    1190             ;A1-=A- *KD                     ;T>5
                    1191             ;call           findkoef                                ;r2,r3-hex
                    1192             ;call           rebyte2                         ;r2..r5- hex
                    1193             ;       call    altof                   ;r2..r5->float
                    1194             ;       mov     dptr,#CHtho;100000
                    1195             ;       call    ldc_ltemp                       ;r8..r11
                    1196             ;       call    fldiv
                    1197             ;       call    move28
0651 785E           1198                     mov     r0,#rez_Ame;->r2..r5   ?/
0653 120000   F     1199                     call    resar2
                    1200             ;call   flmul
0656 120343         1201                     call    ftol                    ;float->int
0659 7866           1202                     mov     r0,#rez_A1
065B 120000   F     1203                     call    saver2
065E 786A           1204                     mov     r0,#rez_A0;->r8..r11 hex
0660 120000   F     1205                     call    resar8
0663 120000   F     1206                     call    lsub            ;A3=A-1-A0
0666 789C           1207                     mov     r0,#rez_A3
0668 120000   F     1208                     call    saver2
                    1209     
066B 020000   F     1210                     jmp     labelB  ;?upper
                    1211      ;;;;;;;;;;; 9.11.06
066E 789A           1212     nonulavt:       mov     r0,#parT
0670 E6             1213                     mov     a,@r0
0671 6401           1214                     xrl     a,#01
0673 700F           1215                     jnz     avtdec1
0675 7982           1216                     mov     r1,#chavt+1     ;T=1 chavt-10
0677 120000   F     1217                     call    tenmin
067A 7999           1218     kordec10:       mov     r1,#chinkor+1
067C 120000   F     1219                     call    tenmin
067F 801E           1220                     jmp     rezmul
                    1221     
0681 020000   F     1222     rmo220: jmp     mo220
                    1223     
0684 7981           1224     avtdec1:        mov     r1,#chavt       
0686 120000   F     1225                     call    chdec           ;chavt-1
                    1226     ;               jmp             kordec1;rezmul
0689 789A           1227     noavk:  mov     r0,#parT
068B E6             1228                     mov     a,@r0
068C 6401           1229                     xrl     a,#01
068E 700A           1230                     jnz     kordec1
                    1231             ;T=1 chinkor-10
0690 7999           1232                     mov     r1,#chinkor+1
0692 120000   F     1233                     call    tenmin
0695 8008           1234                     jmp     rezmul
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    20

                    1235     
0697 020000   F     1236     rnotestizm:     jmp     notestizm
069A 7998           1237     kordec1:        mov     r1,#chinkor
069C 120000   F     1238                     call    chdec           ; chinkor-1
                    1239                        ;9.11.06
                    1240     ;(РЕЗ1-АN)*K
069F 7866           1241     rezmul: mov     r0,#rez_A1;->r2..r5
06A1 120000   F     1242                     call    resar2
06A4 120402         1243                     call    altof   ;r2..r5->float  6.06    
06A7 7884           1244                     mov     r0,#kor0_AN;->r8..r11
06A9 120000   F     1245                     call    resar8
06AC 1201D1         1246                     call    flsub
06AF 7890           1247                     mov     r0,#koefKp;->r8..r11
06B1 EA             1248                     mov     a,r2
06B2 30E702         1249                     jnb     acc.7,nminus
                    1250                     ;jnb            bitznak,nminus
                    1251                     
06B5 7894           1252                     mov     r0,#koefKm;->r8..r11
06B7 120000   F     1253     nminus: call    resar8
06BA 120203         1254                     call    flmul  ;результат в плавающем формате м.б. его сохранить?
06BD 785E           1255                     mov     r0,#rez_Ame
06BF 120000   F     1256                     call    saver2
                    1257      
06C2 EA             1258     afterK: mov     a,r2
06C3 547F           1259                     anl     a,#7fh
06C5 FA             1260                     mov     r2,a
06C6 900000   F     1261                     mov     dptr,#ch_250;220;220000
06C9 120000   F     1262                     call    ldc_ltemp                       ;r8..r11=8
06CC 1201D6         1263                     call    flcmp
06CF 50B0           1264                     jnc     rmo220          ;A>220000
                    1265     
06D1 3015C3         1266                     jnb     biteizm,rnotestizm
06D4 78B1           1267                     mov     r0,#vichR
06D6 B62155         1268                     cjne    @r0,#21h,note21
06D9 7A50           1269                     mov     r2,#50h         ;-11a
06DB 7B18           1270                     mov     r3,#18h         ;k8
06DD 12046C         1271                     call    rebyte2                         ;r2..r5- hex
06E0 120402         1272                     call    altof                   ;r2..r5->float
06E3 C002           1273                     push    rr2
06E5 C003           1274                     push    rr3
06E7 C004           1275                     push    rr4
06E9 C005           1276                     push    rr5
06EB 7A50           1277                     mov     r2,#50h         ;k10
06ED 7B20           1278                     mov     r3,#20h
06EF 12046C         1279     re11_7: call    rebyte2                 ;r2..r5
06F2 120402         1280                     call    altof                   ;r2..r5->float
06F5 120000   F     1281                     call    move28
06F8 D005           1282                     pop     rr5
06FA D004           1283                     pop     rr4
06FC D003           1284                     pop     rr3
06FE D002           1285                     pop     rr2
0700 1202B7         1286                     call    fldiv
                    1287             ;       mov                     dptr,#ch_10
                    1288             ;       call            ldc_ltemp                       ;r8..r11
                    1289             ;       call            flmul
                    1290             ;;;;;2.02.07
0703 C002           1291                     push    rr2
0705 C003           1292                     push    rr3
0707 C004           1293                     push    rr4
0709 C005           1294                     push    rr5
070B 7A50           1295                     mov     r2,#50h                 ;-11a
070D 7B2C           1296                     mov     r3,#2ch                 ;Km
070F 12046C         1297                     call    rebyte2                         ;r2..r5- hex
0712 120402         1298                     call    altof                   ;r2..r5->float
0715 120000   F     1299                     call    move28
0718 D005           1300                     pop     rr5
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    21

071A D004           1301                     pop     rr4
071C D003           1302                     pop     rr3
071E D002           1303                     pop     rr2
0720 120203         1304                     call    flmul                           ;*Km
0723 900000   F     1305                     mov     dptr,#CHtho;100000
0726 120000   F     1306                     call    ldc_ltemp                       ;r8..r11=8
0729 1202B7         1307                     call    fldiv
                    1308     
072C 8050           1309                     jmp     temul
072E B62218         1310     note21: cjne    @r0,#22h,note22
0731 7A50           1311                     mov     r2,#50h                 ;-09a
0733 7B10           1312                     mov     r3,#10h                 ;k6
0735 12046C         1313                     call    rebyte2                 ;r2..r5- hex
0738 120402         1314                     call    altof                   ;r2..r5->float
073B C002           1315                     push    rr2
073D C003           1316                     push    rr3
073F C004           1317                     push    rr4
0741 C005           1318                     push    rr5
0743 7A50           1319                     mov     r2,#50h                 ;k8
0745 7B18           1320                     mov     r3,#18h
0747 80A6           1321                     jmp     re11_7
0749 7A50           1322     note22: mov     r2,#50h                 ;-7a
074B 7B08           1323                     mov     r3,#08h                 ;k4
074D 12046C         1324                     call    rebyte2                         ;r2..r5- hex
0750 120402         1325                     call    altof                   ;r2..r5->float
0753 C002           1326                     push    rr2
0755 C003           1327                     push    rr3
0757 C004           1328                     push    rr4
0759 C005           1329                     push    rr5
075B 7A50           1330                     mov     r2,#50h                 ;k6
075D 7B10           1331                     mov     r3,#10h
075F 808E           1332                     jmp     re11_7  
                    1333     
0761                1334     notestizm:
0761 301208         1335                     jnb     bitklb,komulpz
0764 900000   F     1336                     mov     dptr,#chk       ;100000
0767 120000   F     1337                     call    ldc_long        ;r2..r5
076A 8006           1338                     jmp     komul
076C 120000   F     1339     komulpz:        call    findkoef        ;r2,r3-hex
076F 12046C         1340                     call    rebyte2         ;r2..r5- hex
                    1341                                     
0772 120402         1342     komul:  call    altof                   ;r2..r5->float
0775 900000   F     1343                     mov     dptr,#CHtho;100000
0778 120000   F     1344                     call    ldc_ltemp                       ;r8..r11=8
077B 1202B7         1345                     call    fldiv
                    1346     ;A0,..  call    move28
077E 120000   F     1347     temul:  call    move28
0781 785E           1348                     mov     r0,#rez_Ame
0783 120000   F     1349                     call    resar2
0786 120203         1350                     call    flmul     ;A1-=A-*KD  fl
0789 120343         1351                     call    ftol                    ;float->int
078C 7866           1352                     mov     r0,#rez_A1
078E 120000   F     1353                     call    saver2
0791 120402         1354                     call    altof                   ;r2..r5->float
0794 EA             1355                     mov     a,r2
0795 547F           1356                     anl     a,#7fh
0797 FA             1357                     mov     r2,a
0798 900000   F     1358                     mov     dptr,#ch_220;200;200000
079B 120000   F     1359                     call    ldc_ltemp                       ;r8..r11=8
079E 1201D6         1360                     call    flcmp
07A1 502D           1361                     jnc     rrmo220         ;A>200000
                    1362             ;       jnb             knizm,noavp;goA2;               bitizm,goA2     
                    1363             ;       jb              bitavp,yesavp
07A3 301808         1364                     jnb     knizm,goA2
07A6 300602         1365                     jnb     bitvi11,qu_avp
07A9 8003           1366                     jmp     goA2
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    22

07AB 20052F         1367     qu_avp:         jb      bitavp,yesavp
07AE                1368     noavp:  ;jb     bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИТЬ)
07AE                1369     goA2:           ;A2=A1-
07AE 7866           1370                     mov     r0,#rez_A1
07B0 120000   F     1371                     call    resar2
07B3 787B           1372                     mov     r0,#rez_A2
07B5 120000   F     1373                     call    saver2
07B8                1374     goA3A2: ;A3=A2-A0
07B8 786A           1375                     mov     r0,#rez_A0
07BA 120000   F     1376                     call    resar8
07BD 120000   F     1377                     call    lsub
07C0 789C           1378                     mov     r0,#rez_A3
07C2 120000   F     1379                     call    saver2
07C5 200666         1380                     jb      bitvi11,yesvich
                    1381     
07C8                1382     goonin: ;jmp    goonind;indA3;8.11.06
07C8 78AC           1383                     mov     r0,#chind
07CA B60006         1384                     cjne    @r0,#0,rnochi0
07CD 020000   F     1385                     jmp     goonind;indA3
                    1386     
07D0 020000   F     1387     rrmo220:        jmp     mo220
07D3 020000   F     1388     rnochi0:        jmp     nochi0
07D6 7866           1389     gokaA2: mov     r0,#rez_A1              ;(float)
07D8 120000   F     1390                     call    saver2          ;то необх для калибровки ,goA2 работает с тим знач
07DB 80D1           1391                     jmp     goA2
                    1392     
07DD EA             1393     yesavp: mov     a,r2
07DE 547F           1394                     anl     a,#7fh
07E0 FA             1395                     mov     r2,a
07E1 900000   F     1396                     mov     dptr,#ch_10th;10000
07E4 120000   F     1397                     call    ldc_ltemp                       ;r8..r11=8
07E7 1201D6         1398                     call    flcmp
07EA 50C2           1399                     jnc     noavp           ;A>10000        
07EC 78AE           1400                     mov     r0,#diap                ;10-11
07EE B60902         1401                     cjne    @r0,#9,avpgo
07F1 80BB           1402                     jmp     noavp
07F3                1403     avpgo:
07F3 06             1404                     inc     @r0             ;переключ диапазон на 1 позицию вниз
07F4 B60A01         1405                     cjne    @r0,#0ah,clmasv
07F7 16             1406                     dec     @r0
07F8                1407     clmasv: ;сбросить массив
07F8 120000   F     1408                     call    loadUS
                    1409                     ;call   louizm
07FB 120000   F     1410                     call    clmassix
07FE 78B3           1411                     mov     r0,#summa
0800 120000   F     1412                     call    clear4
0803 786A           1413                     mov     r0,#rez_A0
0805 120000   F     1414                     call    clear4
0808 C20F           1415                     clr     bitnul
080A D207           1416                     setb    bitzus  ;bitbuf
080C 80BA           1417                     jmp     goonin
                    1418     
080E D00B           1419     erra01: pop     r11
0810 D00A           1420                     pop     r10
0812 D009           1421                     pop     r9
0814 D008           1422                     pop     r8
0816 C214           1423                     clr     bitvich
0818 C206           1424                     clr     bitvi11
081A 753934         1425                     mov     nuerr,#34h;константа не должна быть равна0
081D 120000   F     1426                     call    error
0820 120000   F     1427                     call    ind
0823 120000   F     1428                     call    z_1s
0826 80A0           1429                     jmp     goonin
                    1430     
0828                1431     mo500R_:
0828 020000   F     1432                     jmp     mo500R
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    23

082B                1433     mo500I_:
082B 020000   F     1434                     jmp     mo500I          ;error
                    1435     
082E                1436     yesvich:
                    1437                     ;       mov             r0,#konstB
                    1438                     ;       call    resar2
                    1439                     ;       call    move28
082E 789C           1440                     mov     r0,#rez_A3;A1
0830 120000   F     1441                     call    resar2                          ;HEX
0833 120402         1442                     call    altof                   ;r2..r5->float
0836 EA             1443                     mov     a,r2                    ;модуль
0837 547F           1444                     anl     a,#7fh
0839 FA             1445                     mov     r2,a
                    1446     ;               call            fladd                           ;A1+B
                    1447                                     
083A 900000   F     1448                     mov     dptr,#CH_500;
083D 120000   F     1449                     call    ldc_ltemp                       ;r8..r11
0840 1201D6         1450                     call    flcmp
0843 40E3           1451                     jc      mo500R_ ;error <500 >22000
                    1452     ;!
0845 900000   F     1453                     mov     dptr,#CH_22T;
0848 120000   F     1454                     call    ldc_ltemp                       ;r8..r11
084B 1201D6         1455                     call    flcmp
084E 50DB           1456                     jnc     mo500I_
                    1457     ;!
0850 120000   F     1458                     call    move28
0853 C008           1459                     push    r8
0855 C009           1460                     push    r9
0857 C00A           1461                     push    r10
0859 C00B           1462                     push    r11
085B 78BC           1463                     mov     r0,#konstA
085D 120000   F     1464                     call    resar2
0860 900000   F     1465                     mov     dptr,#ch0
0863 120000   F     1466                     call    ldc_ltemp
0866 1201D6         1467                     call    flcmp
0869 60A3           1468                     jz      erra01
086B 900000   F     1469                     mov     dptr,#CH_B
086E 120000   F     1470                     CALL  ldc_ltemp          ; ltemp <-- 10-7
0871 120203         1471                     call    flmul                           ;A*10-7
0874 D00B           1472                     pop     r11
0876 D00A           1473                     pop     r10
0878 D009           1474                     pop     r9
087A D008           1475                     pop     r8
087C 1202B7         1476                     call    fldiv                   ;результат R
087F 78C9           1477                     mov     r0,#rez_R
0881 120000   F     1478                     call    saver2
0884 120343         1479                     call    ftol                    ;float->hex
                    1480     
0887 784F           1481                     mov     r0,#abin
0889 120000   F     1482                     call    saver2
                    1483     
                    1484     
088C 301E31         1485                             jnb     is_rs,mr_5              ;??
088F 30062E         1486                             jnb     bitvi11,mr_5    ;alternative
0892 78C9           1487                             mov     r0,#rez_R
0894 301702         1488                             jnb     bitoll,moveR3_
                    1489     ;                       mov     r0,#rez_R
0897 7681           1490                             mov     @R0,#81h
0899                1491     moveR3_:
0899 C2AF           1492                             clr     EA
                    1493     ;                       mov     A,#rez_R
                    1494     ;                       mov     p_out,A
                    1495     ;                       mov     cnt_out,#4
089B 75997F         1496                             mov     SBUF0,#7Fh      ;was cmd_rez
089E                1497     tx1:
089E 3099FD         1498                     jnb   TI,tx1
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    24

08A1 C299           1499                     clr   TI
08A3 8699           1500                     mov     SBUF0,@r0
08A5 08             1501                     inc     r0
08A6                1502     tx2:
08A6 3099FD         1503                     jnb   TI,tx2
08A9 C299           1504                     clr   TI
08AB 8699           1505                     mov     SBUF0,@r0
08AD 08             1506                     inc     r0
08AE                1507     tx3:
08AE 3099FD         1508                     jnb   TI,tx3
08B1 C299           1509                     clr   TI
08B3 8699           1510                     mov             SBUF0,@r0
08B5 08             1511                     inc             r0
08B6                1512     tx4:
08B6 3099FD         1513                     jnb   TI,tx4
08B9 C299           1514                     clr   TI
08BB 8699           1515                     mov             SBUF0,@r0
08BD 08             1516                     inc             r0
08BE D2AF           1517                     setb    EA
08C0                1518     mr_5:
                    1519     
08C0 7840           1520                     mov     r0,#bufind
08C2                1521     age9:
08C2 7620           1522                     mov     @r0,#" "          ;погасить индикатор
08C4 08             1523                     inc     r0
08C5 B84BFA         1524                     cjne    r0,#bufind+11,age9
08C8 78C9           1525                     mov     r0,#rez_R
08CA 120000   F     1526                     call    resar2
                    1527     
08CD 900000   F     1528                     mov     dptr,#CH_fl
08D0 120000   F     1529                     CALL  ldc_ltemp
08D3 1202B7         1530                     call    fldiv
08D6 78B8           1531                     mov     r0,#work                ;степень +
08D8 7600           1532                     mov     @r0,#0
08DA 78B9           1533                     mov     r0,#work+1;степень -
08DC 7600           1534                     mov     @r0,#0
08DE 900000   F     1535     compa1: mov     dptr,#ch_1;
08E1 120000   F     1536                     call    ldc_ltemp                       ;r8..r11
08E4 1201D6         1537                     call    flcmp
08E7 4026           1538                     jc      equ0            ;<1
08E9 78B8           1539                     mov     r0,#work                        ;степень +
08EB 06             1540                     inc     @r0
08EC 900000   F     1541                     mov     dptr,#ch_10;
08EF 120000   F     1542                     call    ldc_ltemp                       ;r8..r11
08F2 1202B7         1543                     call    fldiv
08F5 80E7           1544                     jmp     compa1                          ;work значение степени n(hex)  
                    1545     
08F7 900000   F     1546     mo500R: mov     dptr,#teOLR
08FA 120000   F     1547                     call    lotext           
08FD 120000   F     1548                     call    ind
0900 020000   F     1549                     jmp     nobavp;nobitizm
0903 900000   F     1550     mo500I: mov     dptr,#teOLI
0906 120000   F     1551                     call    lotext           
0909 120000   F     1552                     call    ind
090C 020000   F     1553                     jmp     nobavp;nobitizm
090F                1554     equ0:           ;       call            ftol                    ;float->int
090F 78B8           1555                     mov     r0,#work                ;степень +
0911 B60019         1556                     cjne    @r0,#0,equ00
                    1557                                     
0914 900000   F     1558     compa2: mov     dptr,#ch_1;
0917 120000   F     1559                     call    ldc_ltemp                       ;r8..r11
091A 1201D6         1560                     call    flcmp
091D 500E           1561                     jnc     equ00           ;>1
091F 78B9           1562                     mov     r0,#work+1                      ;степень -
0921 16             1563                     dec     @r0                                                     ;0,ff(-1),f
                             e(-2)...
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    25

0922 900000   F     1564                     mov     dptr,#ch_10;
0925 120000   F     1565                     call    ldc_ltemp                       ;r8..r11
0928 120203         1566                     call    flmul
092B 80E7           1567                     jmp     compa2                          ;work значение степени n(hex)  
                    1568     
092D                1569     equ00:          
092D 7853           1570                     mov     r0,#adec
092F 7952           1571                     mov     r1,#abin+3      ;hex->10
0931 120000   F     1572                     call    bindec
                    1573     
                    1574     ;если степень полож убирать младший байт
                    1575     ;чтобы уложиться в 5 разрядов, если отриц располагать
                    1576     ;число в bufind..bufind+5
0934 78B8           1577                     mov     r0,#work
0936 B60021         1578                     cjne    @r0,#0,outr
0939 08             1579                     inc     r0                      ;work+1
093A B6FF05         1580                     cjne    @r0,#0ffh,bufr3 ;6разрядов нужно вывести 5
093D 06             1581                     inc     @r0;!!!!!!!!!?
093E 785B           1582                     mov     r0,#adec+8              ;разместить в буфер индикации R
0940 8003           1583                     jmp     bufr30
                    1584     
0942 06             1585     bufr3:  inc     @r0                     ;?!!!!!!!!n+1
0943 785C           1586                     mov     r0,#adec+9
0945 7945           1587     bufr30: mov     r1,#bufind+5;6
0947 7F05           1588                     mov     r7,#5;7
0949 E6             1589     bufr2:  mov     a,@r0
094A 2430           1590                     add     a,#30h
094C F7             1591                     mov     @r1,a
094D 19             1592                     dec     r1
094E 18             1593                     dec     r0
094F DFF8           1594                     djnz    r7,bufr2
                    1595     
0951 784F           1596                     mov     r0,#abin
0953 120000   F     1597                     call    clear4
0956 78B9           1598                     mov     r0,#work+1
0958 801C           1599                     jmp     outr5
                    1600     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
095A 785C           1601     outr:           mov     r0,#adec+9;разместить в буфер индикации R
095C C3             1602                     clr     c
095D 79B8           1603                     mov     r1,#work
095F E8             1604                     mov     a,r0
0960 14             1605                     dec     a                                       ;n-1
0961 97             1606                     subb    a,@r1
0962 F8             1607                     mov     r0,a                    ;adec+9-n !!!!!!!!!!!!!!!
0963 7945           1608                     mov     r1,#bufind+5;т к число разрядов > чем знакомест
0965 7F05           1609                     mov     r7,#5;7
0967 E6             1610     bufr:           mov     a,@r0
0968 2430           1611                     add     a,#30h
096A F7             1612                     mov     @r1,a
096B 19             1613                     dec     r1
096C 18             1614                     dec     r0
096D DFF8           1615                     djnz    r7,bufr
                    1616     
096F 784F           1617                     mov     r0,#abin
0971 120000   F     1618                     call    clear4
0974 78B8           1619                     mov     r0,#work
0976 E6             1620     outr5:  mov     a,@r0
0977 F552           1621                     mov     abin+3,a
                    1622                             ;n(hex)->abin
0979 120000   F     1623                     call    findR                           ;a=2(10-2)...11(10-11)
097C 2552           1624                     add     a,abin+3
097E F552           1625                     mov     abin+3,a
0980 7853           1626                     mov     r0,#adec
0982 7952           1627                     mov     r1,#abin+3      ;hex->10
0984 120000   F     1628                     call    bindec
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    26

0987 855C48         1629                     mov     bufind+8,adec+9
098A 855B47         1630                     mov     bufind+7,adec+8
098D 754966         1631                     mov     bufind+9,#66h
0990 434B10         1632                     orl     bufind+11,#10h;запятая после 1го знакоместа
0993 020000   F     1633                     jmp     nobavp;nobitizm;        goonin;call     ind
                    1634                                             
0996 300508         1635     mo220:  jnb     bitavp,indoll
0999 301805         1636                     jnb     knizm,indoll    ;bitizm,indoll
099C 78AE           1637                     mov     r0,#diap
099E B6001A         1638                     cjne    @r0,#0,nodi2
                    1639                        ;10-2
09A1 300414         1640     indoll: jnb     bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,пам,вычR
09A4 900000   F     1641                     mov     dptr,#teOLL;OLL
09A7 120000   F     1642                     call    lotext
09AA 300609         1643                     jnb     bitvi11,goonin2
09AD 900000   F     1644                     mov     dptr,#teOLI
09B0 120000   F     1645                     call    lotext
09B3 120000   F     1646                     call    ind
09B6 D217           1647     goonin2:        setb    bitoll
09B8 020000   F     1648     goonin1:        jmp     goonin
                    1649     
09BB 16             1650     nodi2:  dec     @r0     ;переключить на 1 позицию вверх
09BC B6FF01         1651                     cjne    @r0,#0ffh,nodi9
09BF 06             1652                     inc     @r0
09C0 120000   F     1653     nodi9:  call    loadUS
                    1654                     ;call   louizm
                    1655                     ;сбросить массив
09C3 120000   F     1656                     call    clmassix
09C6 78B3           1657                     mov     r0,#summa
09C8 120000   F     1658                     call    clear4
09CB 786A           1659                     mov     r0,#rez_A0
09CD 120000   F     1660                     call    clear4
09D0 C20F           1661                     clr     bitnul  
09D2 D207           1662                     setb    bitzus  ;bitbuf флаг задержки   после установки us                 
                                                           
09D4 020000   F     1663                     jmp     goonin
                    1664     
09D7 16             1665     nochi0: dec     @r0                     ;СТИ-1
09D8 020000   F     1666                     jmp     labelB  
09DB                1667     nop3_0: ;;      ;rez_A-rez_A0
                    1668                     ;;                      mov             r0,#rez_A0
                    1669                     ;;                      call    resar8
                    1670                     ;;                      call    lsub
                    1671                     ;;                      mov             r0,#rez_A
                    1672                     ;;;                     call    saver2
                    1673     
09DB B70207         1674     no3parN:        cjne    @r1,#2,no2parN
                    1675                     ;в байт 0  записать пробел
09DE 7946           1676                     mov     r1,#bufind+6
09E0 7720           1677                     mov     @r1,#" ";0fdh;
09E2 020000   F     1678                     jmp     seeind          ;moveA3
                    1679     
09E5                1680     no2parN:                        ;в байты 0 и 1 записать пробел
09E5 7945           1681                     mov     r1,#bufind+5
09E7 7720           1682                     mov     @r1,#" ";0fdh;" "
09E9 09             1683                     inc     r1
09EA 7720           1684                     mov     @r1,#" ";0fdh;" "
09EC 8077           1685                     jmp     seeind          ;moveA3
09EE 8075           1686     rseeind:        jmp     seeind
                    1687     
09F0                1688     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1689     
                    1690     
09F0                1691     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1692                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1693                     ;до конца цикла измерения результат не размещать в буфере
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    27

                    1694                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1695                     ;и возврату в режим измерения
09F0 20145C         1696                     jb              bitvich,rnorvich
09F3 201059         1697                     jb              bitt2,rnorvich
09F6 2017F5         1698                     jb              bitoll,rseeind
09F9 2011F2         1699                     jb              bitmenu,rseeind
09FC 200BEF         1700                     jb              bitmem,rseeind
                    1701             ; mov           r0,#rez_A3
                    1702             ;call   resar2
                    1703             ;call   ftol                    ;float->int r2..r5
09FF 789C           1704                     mov     r0,#rez_A3;->r2..r5       передать A3 в индикатор
0A01 120000   F     1705                     call    resar2;????????????????17.01.07
                    1706                                     
0A04 120000   F     1707                     call    maform
0A07 784F           1708                     mov     r0,#abin
0A09 120000   F     1709                     call    saver2
0A0C 7853           1710                     mov     r0,#adec
0A0E 7952           1711                     mov     r1,#abin+3      ;hex->10
0A10 120000   F     1712                     call    bindec
                    1713                                     
0A13 785C           1714                     mov     r0,#adec+9;разместить в буфер индикации
0A15 7946           1715                     mov     r1,#bufind+6
0A17 7F07           1716                     mov     r7,#7
0A19 E6             1717     bufdec: mov     a,@r0
0A1A 2430           1718                     add     a,#30h
0A1C F7             1719                     mov     @r1,a
0A1D 19             1720                     dec     r1
0A1E 18             1721                     dec     r0
0A1F DFF8           1722                     djnz    r7,bufdec
0A21 7847           1723                     mov     r0,#bufind+7
0A23 762D           1724                     mov     @r0,#2dh          ;-2..-9
0A25 7840           1725                     mov     r0,#bufind
0A27 762B           1726                     mov     @r0,#2bh
0A29 300202         1727                     jnb     znmat,nozzmi;bitznak,nozzmi
0A2C 762D           1728                     mov     @r0,#2dh
0A2E 79AE           1729     nozzmi: mov     r1,#diap
0A30 7848           1730                     mov     r0,#bufind+8
0A32 E7             1731                     mov     a,@r1
0A33 B4080B         1732                     cjne    a,#8,nodi8
0A36 20151E         1733                     jb      biteizm,seegoon
0A39 7630           1734                     mov     @r0,#30h                 ;10-10
0A3B 18             1735                     dec     r0
0A3C 7663           1736                     mov     @r0,#63h;31h
0A3E 08             1737                     inc     r0
0A3F 8016           1738                     jmp     seegoon
0A41 B40910         1739     nodi8:  cjne    a,#9,nodis9
0A44 201510         1740                     jb      biteizm,seegoon
0A47 7631           1741                     mov     @r0,#31h           ;10-11
0A49 18             1742                     dec     r0
0A4A 7663           1743                     mov     @r0,#63h;31h
                    1744                             
0A4C 08             1745                     inc     r0
0A4D 8008           1746                     jmp     seegoon
                    1747     
0A4F 020000   F     1748     rnorvich:       jmp     norvich
0A52 8087           1749     rno3parN:       jmp     no3parN
                    1750     
0A54 2432           1751     nodis9: add     a,#32h
0A56 F6             1752                     mov     @r0,a;#37h;"T";
0A57 08             1753     seegoon:        inc     r0
0A58 7641           1754                     mov     @r0,#"A";"E";
0A5A 08             1755                     inc     r0
0A5B 7600           1756                     mov     @r0,#00h ;=feh в нач установе для поджига всех сегм
0A5D 08             1757                     inc     r0;             mov             bufind+11
0A5E 7610           1758                     mov     @r0,#010h               ;bufind+11.4 точка после первой цифры
                    1759                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    28

                    1760     ;;;;;;goonind:
0A60 79AF           1761                     mov     r1,#parN        ; ??????
0A62 B703ED         1762                     cjne    @r1,#3,rno3parN ;  8.11.06
                    1763             
0A65                1764     seeind:                         ;;;;;;;;;;;;;
0A65 784A           1765                     mov             r0,#bufind+10
0A67 E6             1766                     mov             a,@r0
0A68 300F03         1767                     jnb             bitnul,nnnul
0A6B 4408           1768                     orl             a,#08h
0A6D F6             1769                     mov             @r0,a
0A6E 799A           1770     nnnul:  mov             r1,#parT
0A70 B70205         1771                     cjne            @r1,#2,nsec1
0A73 4420           1772                     orl             a,#20h    ;1s
0A75 F6             1773                     mov             @r0,a
0A76 800B           1774                     jmp             nsec10
0A78 B70105         1775     nsec1:  cjne            @r1,#1,nsec11
0A7B 4440           1776                     orl             a,#40h                  ;10s
0A7D F6             1777                     mov             @r0,a
0A7E 8003           1778                     jmp             nsec10
                    1779                                     
0A80 4410           1780     nsec11: orl             a,#10h
0A82 F6             1781                     mov             @r0,a                    ;0,1s
                    1782     
0A83 784A           1783     nsec10: mov             r0,#bufind+10   
0A85 E6             1784                     mov             a,@r0;mov               @r0,a
0A86 300503         1785                     jnb             bitavp,nobavp
0A89 4404           1786                     orl             a,#04           ;bufind+10.2
0A8B F6             1787                     mov             @r0,a
                    1788             ;       mov             @r0,a   
0A8C 784A           1789     nobavp: mov             r0,#bufind+10   
0A8E E6             1790                     mov             a,@r0;mov               @r0,a   
0A8F 301803         1791                     jnb             knizm,nobitizm
0A92 4402           1792                     orl             a,#02
0A94 F6             1793                     mov             @r0,a
0A95                1794     nobitizm:                       
0A95 301A07         1795                     jnb             bitakt,notakt
0A98 C21A           1796                     clr             bitakt
0A9A 534AFE         1797                     anl             bufind+10,#0feh
0A9D 8005           1798                     jmp             taktind
0A9F D21A           1799     notakt: setb    bitakt
0AA1 434A01         1800                     orl             bufind+10,#01                                   
0AA4                1801     taktind:                
                    1802     ;;;;;;;;;
0AA4 301517         1803                     jnb             biteizm,yesind
0AA7 79B1           1804                     mov             r1,#vichR
0AA9 7848           1805                     mov             r0,#bufind+8
0AAB 7654           1806                     mov             @r0,#'T'
0AAD 08             1807                     inc             r0
0AAE B72104         1808                     cjne    @r1,#21h,test9i
0AB1 7631           1809                     mov             @r0,#31h;11A
                    1810                     ;       dec             r0
                    1811                     ;       mov             @r0,#63h
0AB3 8009           1812                     jmp             yesind
                    1813     
0AB5 B72204         1814     test9i: cjne            @r1,#22h,test7i
0AB8 7632           1815                     mov             @r0,#32h;39h;09A
0ABA 8002           1816                     jmp             yesind
0ABC 7633           1817     test7i: mov             @r0,#33h;37h;07A
                    1818     ;;;;;;;;;
0ABE                1819     yesind:         
0ABE 301203         1820                     jnb             bitklb,noklb
0AC1 434A80         1821                     orl             bufind+10,#80h; on kmp
0AC4 300A03         1822     noklb:  jnb             bitbon,nobuf
0AC7 434B02         1823                     orl             bufind+11,#02h; on pysk
0ACA                1824     nobuf:          ;;;;;
0ACA 301808         1825                     jnb             knizm,anlp1
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    29

0ACD 79AE           1826                     mov             r1,#diap
0ACF C3             1827                     clr             c
0AD0 7401           1828                     mov             a,#1
0AD2 97             1829                     subb            a,@r1
0AD3 4009           1830                     jc              nop1oll
0AD5 309106         1831     anlp1:  jnb             p1.1,nop1oll
0AD8 753935         1832                     mov             nuerr,#35h
0ADB 120000   F     1833                     call            error   ;ошибка 5 перегрузка на диап 10-2,10-3  
0ADE 120000   F     1834     nop1oll:        call            ind     ;пп выдачи на индикатор
                    1835     
                    1836     
                    1837     ;       jnb     is_cmd,norvich          ;??
                    1838     ;       call    cmd_tree
                    1839     
                    1840     
                    1841     
0AE1                1842     norvich: 
0AE1 789A           1843                     mov             r0,# parT
0AE3 79AC           1844                     mov             r1,#chind
0AE5 B60152         1845                     cjne            @r0,#1,rnot1in
0AE8                1846     labelB: ;;;;;;;;;;;
                    1847                     ;сдвиг по алгоритму чтобы посмотреть в цапе 
0AE8 789F           1848                     mov             r0,#rez_A3+3
                    1849                     ;;;;;;;;
0AEA 79BB           1850                     mov             r1,#work+3
0AEC E6             1851                     mov             a,@r0
0AED 7F07           1852                     mov             r7,#7;кол сдв вправо
0AEF C3             1853     dvig3:  clr             c
0AF0 13             1854                     rrc             a
0AF1 DFFC           1855                     djnz    r7,dvig3 ;d7,d6,d5        мл байт
0AF3 FA             1856                     mov             r2,a    ;сохр байт
0AF4 18             1857                     dec             r0              ;rez_A3+2
0AF5 E6             1858                     mov             a,@r0
0AF6 C0E0           1859                     push    acc
0AF8 C3             1860                     clr             c
0AF9 7F01           1861                     mov             r7,#1
0AFB C3             1862     dvig2:  clr             c
0AFC 33             1863                     rlc             a
0AFD DFFC           1864                     djnz    r7,dvig2 ;d12..d11       средний байт
0AFF 4A             1865                     orl             a,r2
0B00 F7             1866                     mov             @r1,a;сформ мл байт
0B01 19             1867                     dec             r1
0B02 D0E0           1868                     pop             acc
                    1869                             
0B04 7F07           1870                     mov             r7,#7
0B06 C3             1871     dvig1:  clr             c
0B07 13             1872                     rrc             a
0B08 DFFC           1873                     djnz    r7,dvig1 ;d18     ср байт
0B0A FA             1874                     mov             r2,a   ;сохр
0B0B 18             1875                     dec             r0
0B0C E6             1876                     mov             a,@r0 ;rez_A3+1
0B0D C0E0           1877                     push    acc
                    1878                     
0B0F 7F01           1879                     mov             r7,#1
0B11 C3             1880     dvig0:  clr             c
0B12 33             1881                     rlc             a
0B13 DFFC           1882                     djnz    r7,dvig0 ;        d21..d16
0B15 4A             1883                     orl             a,r2
0B16 F7             1884                     mov             @r1,a   ; сформ средний  байт
0B17 19             1885                     dec             r1
0B18 D0E0           1886                     pop             acc       ;rez_A3+1
                    1887                             ;;;;;;;;;;;;;;
                    1888     ;                       jb              acc.7,dvm
0B1A C3             1889                     clr             c
0B1B 7F07           1890                     mov             r7,#7
0B1D C3             1891     dvig4:  clr             c
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    30

0B1E 13             1892                     rrc             a
0B1F DFFC           1893                     djnz    r7,dvig4 ;        d22
0B21 FA             1894                     mov             r2,a    ;сохр
0B22 18             1895                     dec             r0              ;       rez_A3
0B23 E6             1896                     mov             a,@r0
                    1897                     ;;;;;
0B24 7F01           1898                     mov             r7,#1
0B26 C3             1899     vig0:           clr             c
0B27 33             1900                     rlc             a
0B28 DFFC           1901                     djnz    r7,vig0 ;         d24..d30
0B2A 4A             1902                     orl             a,r2
0B2B F7             1903                     mov             @r1,a   ; сформ   байт
0B2C 19             1904                     dec             r1
0B2D E6             1905                     mov             a,@r0
                    1906                     ;;;;;
0B2E 20E70C         1907                     jb              acc.7,dvm
0B31 C3             1908                     clr             c
0B32 7F07           1909                     mov             r7,#7
0B34 C3             1910     vig4:           clr             c
0B35 13             1911                     rrc             a
0B36 DFFC           1912                     djnz    r7,vig4 ;         d
0B38 8009           1913                     jmp             endsdv
                    1914     
0B3A 020000   F     1915     rnot1in:        jmp             not1in
                    1916     
                    1917     ;;;;;;;;;;;;                                    
0B3D 7F07           1918     dvm:            mov             r7,#7
0B3F D3             1919     dvig6:  setb            c
0B40 13             1920                     rrc             a
0B41 DFFC           1921                     djnz    r7,dvig6 ;        d31
0B43 F7             1922     endsdv: mov             @r1,a
                    1923                                                             
                    1924      ;->work   
                    1925     ;?              jnb                     is_mem,md_3             ???????????????????????
                    1926     ;               call            resa_hl
                    1927     ;               call            reA3_m          ;write A3 to Mem
                    1928     ;               call            save_hlm                ;bound of 200
                    1929     ;               setb            EA
                    1930     ;               sjmp            me_5
                    1931     
0B44                1932     md_3:
                    1933     
0B44                1934     md_5:
0B44 301E14         1935             jnb     is_rs,me_5
0B47 200611         1936             jb      bitvi11,me_5    ;rez_R is out
0B4A 301704         1937             jnb     bitoll,moveA3_
0B4D 789C           1938             mov     r0,#rez_A3
0B4F 7681           1939             mov     @R0,#81h
0B51                1940     moveA3_:
0B51 749C           1941             mov     A,#rez_A3       ;Ame,..; bufind - no use: for fastest isn't screen output
0B53 F526           1942             mov     p_out,A
0B55 752404         1943             mov     cnt_out,#4
0B58 75997F         1944             mov     SBUF0,#7Fh      ;was cmd_rez
0B5B                1945     me_5:                   ;??????????????????
0B5B 300C37         1946                     jnb     is_2,me_6
0B5E 120000   F     1947                     call    resa_hl ;enough:        jmp     yesbuf ;?
0B61 120000   F     1948                     call    loA3_X;адрес след ячейки внешн озу храним в ячейке saven_bl
0B64 120000   F     1949                     call            save_hl
0B67 78AE           1950                     mov                     r0,#diap
0B69 E6             1951                     mov                     a,@r0
0B6A 7938           1952                     mov                     r1,#nblok
0B6C B70104         1953                     cjne            @r1,#1,nosv1    ;?????
0B6F F534           1954                     mov                     sadiap,a
0B71 8010           1955                     jmp                     tostro
0B73 B70204         1956     nosv1:  cjne            @r1,#2,nosv2
0B76 F532           1957                     mov                     sadiap2,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    31

0B78 8009           1958                     jmp                     tostro
0B7A B70304         1959     nosv2:  cjne            @r1,#3,nosv3
0B7D F531           1960                     mov                     sadiap3,a
0B7F 8002           1961                     jmp                     tostro
0B81                1962     nosv3:          
0B81 F530           1963                     mov                     sadiap4,a
0B83                1964     tostro:
                    1965     
                    1966     ;               inc             cnt_out
                    1967     ;               mov             a,#200
                    1968     ;               subb    a,cnt_out
0B83 1524           1969                     dec             cnt_out
0B85 E524           1970                     mov             A,cnt_out
0B87 700C           1971                     jnz             me_6
0B89 C20C           1972                     clr             is_2
0B8B 789A           1973                     mov             R0,#parT
0B8D 7602           1974                     mov             @R0,#2  ;1 sec
0B8F 75A890         1975                     mov     IE,#90h ;Снятие блокировки всех прерываний+RS
                    1976     ;       setb    is_izm  ;???
0B92 020000   F     1977             jmp     after_2 ;keyb1
0B95                1978     me_6:
                    1979                             ;??????????????????
0B95 900000   F     1980                     mov             dptr,#chzap
0B98 120000   F     1981                     call    ldc_long
0B9B 78BB           1982                     mov             r0,#work+3
0B9D 120000   F     1983                     call    ladd
0BA0 ED             1984                     mov             a,r5
0BA1 F5D2           1985                     mov             DAC0L,a
                    1986                             
0BA3 EC             1987                     mov             a,r4
0BA4 F5D3           1988                     mov             DAC0H,a
                    1989     
                    1990                                             ;;;;;;;;;;
0BA6 78CF           1991                     mov                     r0,#chbuf               ;float
0BA8 120000   F     1992                     call            resar2
0BAB 900000   F     1993                     mov                     dptr,#ch_2;ch0;ch_1
0BAE 120000   F     1994                     call            ldc_ltemp
0BB1 1201D6         1995                     call            flcmp
0BB4 5020           1996                     jnc                     rnobuf0
                    1997                                             
0BB6 900000   F     1998                     mov                     dptr,#ch_1
0BB9 120000   F     1999                     call            ldc_ltemp
0BBC 1201D1         2000                     call            flsub
0BBF 900E00         2001                     mov                     dptr,#chbuf1                    ;СБ1 внешн озу
0BC2 EA             2002                     mov                     a,r2
0BC3 F0             2003                     movx            @dptr,a
0BC4 A3             2004                     inc                     dptr
0BC5 EB             2005                     mov                     a,r3
0BC6 F0             2006                     movx            @dptr,a
0BC7 A3             2007                     inc                     dptr
0BC8 EC             2008                     mov                     a,r4
0BC9 F0             2009                     movx            @dptr,a
0BCA A3             2010                     inc                     dptr
0BCB ED             2011                     mov                     a,r5
0BCC F0             2012                     movx            @dptr,a
                    2013                                             
                    2014                                             
                    2015                                             ;jnc                    rnobuf0
0BCD 200909         2016                     jb              bitprd,yesprd   ;передать   A3 в буфер
0BD0 200A08         2017                     jb              bitbon,yesbuf   ;записать   A3 в буфер
0BD3 020000   F     2018                     jmp             gocikle
0BD6 020000   F     2019     rnobuf0:        jmp             nobuf0
0BD9                2020     yesprd: ;передать   A3 в буфер
0BD9 8045           2021                     jmp             goonT
0BDB                2022     yesbuf:         ;записать   A3 в буфер
0BDB 120000   F     2023                     call            resa_hl;dptr-
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    32

0BDE 120000   F     2024                     call            loA3_X  ;адрес след ячейки внешн озу храним
                    2025                                                                             ;в ячейке saven_bl
0BE1 120000   F     2026                     call            save_hl
0BE4 78AE           2027                     mov                     r0,#diap
0BE6 E6             2028                     mov                     a,@r0
0BE7 7938           2029                     mov                     r1,#nblok
0BE9 B70104         2030                     cjne            @r1,#1,nosav1
0BEC F534           2031                     mov                     sadiap,a
0BEE 8012           2032                     jmp                     gotostrob
0BF0 B70204         2033     nosav1: cjne            @r1,#2,nosav2
0BF3 F532           2034                     mov                     sadiap2,a
0BF5 800B           2035                     jmp                     gotostrob
0BF7 B70304         2036     nosav2: cjne            @r1,#3,nosav3
0BFA F531           2037                     mov                     sadiap3,a
0BFC 8004           2038                     jmp                     gotostrob
0BFE                2039     nosav3:         
0BFE F530           2040                     mov                     sadiap4,a
0C00 8000           2041                     jmp                     gotostrob
                    2042     
                    2043                             ;строб
0C02                2044     gotostrob:
0C02 E586           2045                     mov             a,P6            ;p6.4=0
0C04 54EF           2046                     anl             a,#0efh
0C06 F586           2047                     mov             P6,a
0C08 00             2048                     nop
0C09 00             2049                     nop
0C0A E586           2050                     mov             a,P6                    ;p6.4=1 
0C0C 4410           2051                     orl             a,#10h
0C0E F586           2052                     mov             P6,a
                    2053                                     ;;;;;;;;;
0C10 E5DA           2054                     mov             a,PCA0CPM0;     
0C12 4446           2055                     orl             a,#46h;anl              a,#0fbh
0C14 F5DA           2056                     mov             PCA0CPM0,a
0C16 75CDD0         2057                     mov             TH2,#0d0h
0C19 75CC00         2058                     mov             TL2,#00
                    2059     
0C1C D2CA           2060                     setb            T2CON.2
0C1E D2AD           2061                     setb            ET2;IE.5                            
0C20 78CD           2062     goonT:  mov             r0,#interva;high  byte loadr2
0C22 E6             2063                     mov             a,@r0
0C23 FC             2064                     mov             r4,a
0C24 08             2065                     inc             r0
0C25 E6             2066                     mov             a,@r0
0C26 FD             2067                     mov             r5,a
0C27 E4             2068                     clr             a
0C28 FB             2069                     mov             r3,a
0C29 FA             2070                     mov             r2,a                            ;r2..r5-interval(hex)
0C2A 120402         2071                     call            altof                   ;r2..r5->interval (float)
                    2072     
0C2D 789A           2073                     mov             r0,#parT
0C2F B60108         2074                     cjne            @r0,#1,nott1
0C32 900000   F     2075                     mov             dptr,#ch_2       
0C35 120000   F     2076                     call            ldc_ltemp
0C38 8009           2077                     jmp             intmul
                    2078     
0C3A B60225         2079     nott1:  cjne    @r0,#2,nott2
0C3D 900000   F     2080                     mov             dptr,#ch_10      
0C40 120000   F     2081                     call            ldc_ltemp
                    2082                                                                             
0C43 120203         2083     intmul: call            flmul                                   ;*10
0C46 900E00         2084     intmul1:        mov             dptr,#chbuf1    ;СБ1
0C49 E0             2085                     movx    a,@dptr
0C4A F508           2086                     mov             r8,a
0C4C A3             2087                     inc             dptr
0C4D E0             2088                     movx    a,@dptr
0C4E F509           2089                     mov             r9,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    33

0C50 A3             2090                     inc             dptr
0C51 E0             2091                     movx    a,@dptr
0C52 F50A           2092                     mov             r10,a
0C54 A3             2093                     inc             dptr
0C55 E0             2094                     movx    a,@dptr
0C56 F50B           2095                     mov             r11,a
0C58 120166         2096                     call            fladd           ;СБ+СБ1
0C5B 78CF           2097     intmul2:        mov                     r0,#chbuf
0C5D 120000   F     2098                     call            saver2          ;*2
                    2099                                     
0C60 8035           2100                     jmp             gocikle
                    2101     
0C62 B6030B         2102     nott2:  cjne    @r0,#3,nott3
0C65 900000   F     2103                     mov                     dptr,#ch_2       
0C68 120000   F     2104                     call            ldc_ltemp
0C6B 120203         2105                     call            flmul
0C6E 80EB           2106                     jmp                     intmul2                                 ;*2
                    2107     
                    2108     
0C70 B60414         2109     nott3:  cjne    @r0,#4,nott4
0C73 900000   F     2110                     mov                     dptr,#ch_10      
0C76 120000   F     2111                     call            ldc_ltemp       ;/10*4
0C79 1202B7         2112                     call            fldiv
0C7C 900000   F     2113                     mov                     dptr,#ch_4       
0C7F 120000   F     2114                     call            ldc_ltemp
0C82 120203         2115                     call            flmul
0C85 80D4           2116                     jmp             intmul2
                    2117     
0C87 B6050B         2118     nott4:  cjne    @r0,#5,nott5
0C8A 900000   F     2119                     mov             dptr,#ch_2       
0C8D 120000   F     2120                     call            ldc_ltemp;*2
0C90 120203         2121                     call            flmul
0C93 80C6           2122                     jmp             intmul2;T=5
0C95                2123     nott5:  ;       mov             dptr,#ch_1       
                    2124                     ;       call            ldc_ltemp
                    2125                     ;       call            flmul
0C95 80C4           2126                     jmp     intmul2                                 ;*1
                    2127     
                    2128     
0C97 300708         2129     gocikle:        jnb     bitzus,nofz                     
0C9A 120000   F     2130                     call    z_05s    ;0,5c
0C9D 120000   F     2131                     call    z_05s    ;0,5c
0CA0 C207           2132                     clr     bitzus  ;bitbuf бит задержки засылки us
0CA2 020000   F     2133     nofz:           jmp     labelA;rebyte
                    2134     
                    2135     
0CA5 80F0           2136     yestt5: jmp             gocikle
                    2137     
0CA7 78CF           2138     nobuf0: mov             r0,#chbuf
0CA9 120000   F     2139                     call            resar2
0CAC 900000   F     2140                     mov                     dptr,#ch_1       
0CAF 120000   F     2141                     call            ldc_ltemp
0CB2 1201D1         2142                     call            flsub
0CB5 78CF           2143                     mov                     r0,#chbuf       
0CB7 120000   F     2144                     call            saver2  
0CBA 80DB           2145                     jmp             gocikle
                    2146     
                    2147     
0CBC B60205         2148     not1in: cjne    @r0,#2,not2in
0CBF 7701           2149                     mov             @r1,#1           ;T=2
0CC1 020000   F     2150                     jmp     labelB
                    2151     
0CC4 B60305         2152     not2in: cjne    @r0,#3,not3in
0CC7 7701           2153                     mov             @r1,#1;9                ;T=3
0CC9 020000   F     2154                     jmp     labelB
0CCC 7703           2155     not3in: mov             @r1,#3;19
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    34

0CCE 020000   F     2156                     jmp     labelB
                    2157     
                    2158     
                    2159     ;;;;;;;;;;;3.11.06
                    2160     
                    2161     ;;коррекция 0
0CD1 7883           2162     KORnul: mov             r0,#chdel
0CD3 B60010         2163                     cjne    @r0,#0,nonuldel
                    2164                                     
0CD6 E584           2165                     mov             a,p4                    ;сохр  us
0CD8 F536           2166                     mov             saus,a
0CDA E585           2167                     mov             a,p5
0CDC F537           2168                     mov             saus+1,a
                    2169     
0CDE 900000   F     2170                     mov             dptr,#kor0us
0CE1 120000   F     2171                     call    lospus          ;упр слово коррекции 0
0CE4 8018           2172                     jmp     chdelmo
                    2173     
0CE6                2174     nonuldel:       ;cjne   @r0,#7,no4del
0CE6 B6031B         2175                     cjne    @r0,#3,no4del
                    2176                             ;рез ->AN
0CE9 7862           2177                     mov     r0,#rez_A;->r2..r5
0CEB 120000   F     2178                     call    resar2
                    2179                                             ;;;;;;;;;;
0CEE 120402         2180                     call    altof           ;r2..r5->float
0CF1 7884           2181                     mov     r0,#kor0_AN;->kor0_AN
0CF3 120000   F     2182                     call    saver2
                    2183                                     
0CF6 E536           2184                     mov             a,saus                  ;восстан исходное упр слово
0CF8 F584           2185                     mov             p4,a
0CFA E537           2186                     mov             a,saus+1
0CFC F585           2187                     mov             p5,a            
0CFE 7883           2188     chdelmo:        mov             r0,#chdel
0D00 06             2189                     inc             @r0             ;chdel+1
0D01 020000   F     2190                     jmp              rebyte
                    2191     
0D04                2192     no4del:         ;cjne   @r0,#14,chdelmo
0D04 B606F7         2193                     cjne    @r0,#6,chdelmo
0D07 7600           2194                     mov             @r0,#0          ;chdel
0D09 7898           2195                     mov             r0,#chinkor
0D0B 7602           2196                     mov             @r0,#2;00;
0D0D 08             2197                     inc             r0
0D0E 7658           2198                     mov             @r0,#58h;0c8h
0D10 120000   F     2199                     call    clmassix;сбросить массив скольз среднего
0D13                2200     bonpart:
0D13 300A20         2201                     jnb             bitbon,rebyter
0D16 78CF           2202                     mov             r0,#chbuf
0D18 120000   F     2203                     call            resar2
0D1B 799A           2204                     mov             r1,#parT
0D1D B70211         2205                     cjne            @r1,#2,no6del
0D20 900000   F     2206                     mov             dptr,#ch_7;5
0D23                2207     no5del:
0D23 120000   F     2208                     call            ldc_ltemp
0D26 1201D1         2209                     call            flsub   
0D29 78CF           2210                     mov             r0,#chbuf
0D2B 120000   F     2211                     call            saver2
0D2E 020000   F     2212                     jmp             rebyte
0D31                2213     no6del:
0D31 900000   F     2214                     mov             dptr,#ch_1
0D34 80ED           2215                     jmp             no5del
                    2216     
0D36 020000   F     2217     rebyter:        jmp             rebyte
                    2218     
0D39 7981           2219     tekaout:        mov             r1,#chavt
0D3B 770C           2220                     mov             @r1,#0ch;6;1;
0D3D 09             2221                     inc             r1
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    35

0D3E 7780           2222                     mov             @r1,#80h;40h;
0D40 020000   F     2223                     jmp             noavk
                    2224     
                    2225     ;автокалибровка
0D43 200AF3         2226     autoka: jb              bitbon,tekaout;rebyter
0D46                2227     nulavt:  ;;;;;
0D46 7883           2228                     mov             r0,#chdel
0D48 B60016         2229                     cjne    @r0,#0,nndelch
0D4B E584           2230                     mov             a,p4                    ;сохр  us
0D4D F536           2231                     mov             saus,a
0D4F E585           2232                     mov             a,p5
0D51 F537           2233                     mov             saus+1,a
                    2234     
0D53 E585           2235                     mov   a,p5
0D55 4404           2236                     orl             a,#04              ;p5.2=1
0D57 00             2237                     nop
0D58 00             2238                     nop
0D59 543F           2239                     anl             a,#3fh          ;p5.6,p5.7=0
0D5B F585           2240                     mov   p5,a
0D5D 06             2241                     inc             @r0
0D5E 020000   F     2242                     jmp              rebyte
0D61 B6033D         2243     nndelch:        cjne    @r0,#3,n4delch
                    2244                             ;pez->A+
                    2245                             ;K+=000/(A+-AN)
                    2246                             ;mov            r0,#rez_A;->r2..r5
                    2247                             ;call   resar2
0D64 E577           2248                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0D66 FA             2249                     mov             r2,a
0D67 E578           2250                     mov             a,reacp+1
0D69 FB             2251                     mov             r3,a
0D6A E579           2252                     mov             a,reacp+2
0D6C FC             2253                     mov             r4,a
0D6D E57A           2254                     mov             a,reacp+3
0D6F FD             2255                     mov             r5,a
                    2256                             ;;;;;;;;;;;;;;;
0D70 120402         2257                     call    altof                   ;r2..r5->float
0D73 7888           2258                     mov     r0,#rezAp;->rezAp
0D75 120000   F     2259                     call    saver2                          
0D78 7884           2260                     mov     r0,#kor0_AN;kor0_AN->r8..r11
0D7A 120000   F     2261                     call    resar8                          
0D7D 1201D1         2262                     call    flsub           ; r2..r5(A+-AN)
0D80 120000   F     2263                     call    move28     ;r2..r5->r8..r11
0D83 900000   F     2264                     mov     dptr,#CH2tho;000->r2..r5 float
0D86 120000   F     2265                     call    ldc_long                
0D89 1202B7         2266                     call    fldiv
0D8C EA             2267                     mov     a,r2
0D8D 547F           2268                     anl     a,#7fh
0D8F FA             2269                     mov     r2,a
0D90 7890           2270                     mov     r0,#koefKp;->koefKp
0D92 120000   F     2271                     call    saver2
                    2272                      
                    2273                     ;anl            P5,#0feh                ;p5.0=0 
0D95 E585           2274                     mov     a,P5
0D97 543B           2275                     anl     a,#3bh;acp-
0D99 F585           2276                     mov     P5,a
0D9B 7883           2277                     mov     r0,#chdel
0D9D 06             2278                     inc     @r0                       ;ch+1
0D9E 020000   F     2279                     jmp     rebyte
                    2280     
0DA1 B6063F         2281     n4delch:        cjne    @r0,#6,n8delch
                    2282                     ; pez->A-
                    2283                     ;K-=000/(A--AN)
                    2284                     ;       mov     r0,#rez_A;->r2..r5
                    2285                     ;       call    resar2
0DA4 E577           2286                     mov     a,reacp         ;r2..r5 &&&&&&&&&&&
0DA6 FA             2287                     mov     r2,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    36

0DA7 E578           2288                     mov     a,reacp+1
0DA9 FB             2289                     mov     r3,a
0DAA E579           2290                     mov     a,reacp+2
0DAC FC             2291                     mov     r4,a
0DAD E57A           2292                     mov     a,reacp+3
0DAF FD             2293                     mov     r5,a
                    2294                                     ;;;;;;;;;;;;;;;
0DB0 120402         2295                     call    altof                   ;r2..r5->float
0DB3 788C           2296                     mov     r0,#rezAm;->rezAm
0DB5 120000   F     2297                     call    saver2                          
0DB8 7884           2298                     mov     r0,#kor0_AN;kor0_AN->r8..r11
0DBA 120000   F     2299                     call    resar8                          
0DBD 1201D1         2300                     call    flsub                   ; r2..r5(A--AN)
0DC0 120000   F     2301                     call    move28                  ;r2..r5->r8..r11
0DC3 900000   F     2302                     mov     dptr,#CH2tho    ;000->r2..r5 float
0DC6 120000   F     2303                     call    ldc_long                
0DC9 1202B7         2304                     call    fldiv
0DCC EA             2305                     mov     a,r2
0DCD 547F           2306                     anl     a,#7fh
0DCF FA             2307                     mov     r2,a
0DD0 7894           2308                     mov     r0,#koefKm;->koefKm
0DD2 120000   F     2309                     call    saver2
                    2310                      
0DD5 E536           2311                     mov     a,saus                  ;восстан исходное упр слово
0DD7 F584           2312                     mov     p4,a
0DD9 E537           2313                     mov     a,saus+1
0DDB F585           2314                     mov     p5,a            
0DDD 7883           2315                     mov     r0,#chdel
0DDF 06             2316                     inc     @r0                       ;ch+1
0DE0 020000   F     2317                     jmp     rebyte
                    2318     
0DE3 B6090F         2319     n8delch:        cjne            @r0,#9,n12delch
0DE6 7600           2320                     mov             @r0,#0
0DE8 7981           2321                     mov             r1,#chavt
0DEA 773E           2322                     mov             @r1,#3eh;0ch;
0DEC 09             2323                     inc             r1
0DED 7780           2324                     mov             @r1,#80h;
0DEF 120000   F     2325                     call            clmassix     ;сбросить массив среднего
0DF2 020000   F     2326                     jmp             rebyte; bonpart;
0DF5 06             2327     n12delch:       inc             @r0
0DF6 020000   F     2328                     jmp             rebyte
                    2329     
                    2330     
                    2331     
                    2332                                 
0DF9 020000   F     2333     rout6:  jmp             out6
0DFC 020000   F     2334     rlabelF:        jmp             labelF  
0DFF 020000   F     2335     rknrazr:        jmp             knrazr  
0E02 020000   F     2336     rknopt: jmp             knopt
0E05 020000   F     2337     rizman: jmp             izman
                    2338             
0E08 020000   F     2339     no0chkl:        jmp             kkout6
                    2340     ;?never here
0E0B 75AD00         2341                     mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
0E0E 75B0C0         2342                     mov             P3,#0c0h
0E11 32             2343                     reti
0E12                2344     keyb1:  ;IE6
                    2345     ;;;;;
                    2346                     ;       mov                     a,chkl+1                ;low
                    2347                     ;       jnz                     no0chkl
                    2348                     ;       mov                     a,chkl                          ;high
                    2349                     ;       jnz                     no0chkl
                    2350     ;;;;;
0E12 75E700         2351                     mov             EIE2,#00H
0E15 75AD00         2352                     mov             P3IF,#00
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    37

                    2353                                     
0E18 C0E0           2354                     push    acc
0E1A C0D0           2355                     push    psw
0E1C C000           2356                     push    rr0
0E1E C001           2357                     push    rr1
0E20 C002           2358                     push    rr2
0E22 C003           2359                     push    rr3
0E24 C004           2360                     push    rr4
0E26 C005           2361                     push    rr5
0E28 C006           2362                     push    rr6
0E2A C007           2363                     push    rr7
0E2C C082           2364                     push    dpl
0E2E C083           2365                     push    dph
                    2366                                     ;clr            bitmig
                    2367                       ;;;;;;;;;;;;;;
0E30 120000   F     2368                      call   z_01s;0,1s
                    2369                                     ;       call    z_01s
                    2370                                     ;восстан знакоместо при мигании
                    2371                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0E33 78B2           2372                     mov             r0,#marker
0E35 7440           2373                     mov             a,#bufind
0E37 26             2374                     add             a,@r0                   ;a=bufind+marker
0E38 F9             2375                     mov             r1,a
0E39 A73C           2376                     mov             @r1,savba
                    2377                                     ;;;;;;;;;;;
                    2378     ;???
                    2379                     
0E3B 301F05         2380                     jnb             is_izm,gout6__
0E3E C21F           2381                     clr             is_izm
0E40 020000   F     2382                             jmp     izman   ;button 'izm'?
                    2383     
                    2384     ;gout6_:
                    2385     ;               jnb             is_mem,gout6__
                    2386     ;               clr             is_mem
                    2387     ;                       jmp     findmem ;button 'mem'?
                    2388     
0E43                2389     gout6__:        ;usual
                    2390     
0E43 E5B0           2391                     mov             a,p3
0E45 20E644         2392                     jb              acc.6,outviR;выход из режима выч R
0E48 E5B0           2393     gout6:  mov             a,p3
0E4A 44FF           2394                     orl             a,#0ffh         ; p3.(5-0)<-3f
0E4C F5B0           2395                     mov             p3,a
0E4E E5B0           2396                     mov             a,p3
0E50 30E6A6         2397                     jnb             acc.6,rout6             ;error
0E53 3004A6         2398                     jnb             bitizm,rlabelF
0E56 75B0FE         2399                     mov             p3,#0feh                ;реж IZM
0E59 E5B0           2400                     mov             a,p3
0E5B 30E6A7         2401                     jnb             acc.6,rizman
                    2402                                     ;;;;;;
0E5E 201232         2403                     jb              bitklb,goklb
0E61 75B0FD         2404                     mov             p3,#0fdh
0E64 E5B0           2405                     mov             a,p3
0E66 30E696         2406                     jnb             acc.6,rknrazr             ;labelC
0E69 75B0FB         2407                     mov             p3,#0fbh
0E6C E5B0           2408                     mov             a,p3
0E6E 30E656         2409                     jnb             acc.6,knright           ;->
0E71 75B0F7         2410                     mov             p3,#0f7h
0E74 E5B0           2411                     mov             a,p3
0E76 30E689         2412                     jnb             acc.6,rknopt                    ;T
0E79 75B0EF         2413                     mov             p3,#0efh
0E7C E5B0           2414                     mov             a,p3
0E7E 30E615         2415                     jnb             acc.6,pyskst                    ;pysk/stop
0E81 75B0DF         2416                     mov             p3,#0dfh
0E84 E5B0           2417                     mov             a,p3
0E86 30E65F         2418                     jnb             acc.6,knvich
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    38

0E89 020000   F     2419                     jmp             izmpaT
                    2420     
0E8C 3006B9         2421     outviR: jnb             bitvi11,gout6   
0E8F C214           2422                     clr             bitvich                         ;выход из режима выч R  
0E91 C206           2423                     clr             bitvi11
                    2424                                     
0E93 020000   F     2425     goklb:  jmp             out6
                    2426     
0E96 200A12         2427     pyskst: jb      bitbon,bufon            ;pysk/stop
0E99 D20A           2428                     setb    bitbon  ;уст реж буфер вкл
0E9B 79D5           2429                     mov     r1,#volume      ;work   обьем блока
0E9D 7700           2430                     mov     @r1,#00
0E9F 09             2431                     inc     r1
0EA0 77C7           2432                     mov     @r1,#0c7h               ;320h/4
0EA2 434B02         2433                     orl     bufind+11,#02h  ; on pysk
0EA5 120000   F     2434                     call    ind
0EA8 020000   F     2435                     jmp     izmpaT
0EAB C20A           2436     bufon:  clr     bitbon  ;уст реж буфер выкл
0EAD 534BFD         2437                     anl     bufind+11,#0fdh; off pysk
0EB0 120000   F     2438                     call    ind
0EB3 020000   F     2439                     jmp     izmpaT
                    2440     
0EB6 79B0           2441     tizmri: mov     r1,#level
0EB8 B70102         2442                     cjne    @r1,#1,right2
                    2443                                     ;10s->HET
0EBB 8004           2444                     jmp             right3
                    2445     
0EBD 07             2446     right2: inc             @r1
0EBE 120000   F     2447                     call            lolevT
                    2448                     ;call   loadT   ;нажата кн-> в реж Tизм 
0EC1 120000   F     2449     right3: call            ind
0EC4 020000   F     2450                     jmp             izmfun
                    2451     
                    2452                             
                    2453                             
0EC7 79AE           2454     knright:        mov             r1,#diap
                    2455                     ;перекл диапазон 1 поз вверх сбр массив
0EC9 17             2456                     dec             @r1
0ECA B7FF04         2457                     cjne    @r1,#0ffh,diinc
0ECD 7700           2458                     mov             @r1,#0
0ECF 807A           2459                     jmp             izmfun
0ED1 120000   F     2460     diinc:  call            clmassix
0ED4 78B3           2461                     mov             r0,#summa
0ED6 120000   F     2462                     call            clear4
0ED9 786A           2463                     mov             r0,#rez_A0
0EDB 120000   F     2464                     call            clear4
0EDE C20F           2465                     clr             bitnul          ;гасить светодиод НУЛЬ  
0EE0 120000   F     2466                     call            loadUS
0EE3 8066           2467                     jmp             izmfun
                    2468     
0EE5 020000   F     2469     vit2_10:        jmp             out6
                    2470     
                    2471     
0EE8                2472     knvich: ;12.02.07
0EE8 789A           2473                     mov             r0,#parT
0EEA C3             2474                     clr             c
0EEB 7404           2475                     mov             a,#4 
0EED 96             2476                     subb            a,@r0
0EEE 40F5           2477                     jc              vit2_10;не нажимать кнопку ВЫЧ R T=10ms,2ms
0EF0 2015F2         2478                     jb              biteizm,vit2_10;не нажимать кнопку ВЫЧ во время теста
0EF3 200613         2479                     jb              bitvi11,onvich
0EF6 C204           2480                     clr             bitizm
0EF8 D214           2481                     setb            bitvich
                    2482                                     
0EFA 78B1           2483                     mov             r0,#vichR
0EFC 7611           2484                     mov             @r0,#11h;;????????or 0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    39

                    2485                             ;ВЫЧИСЛИТЬ
0EFE 900000   F     2486                     mov             dptr,#teVICH
0F01 120000   F     2487                     call            lotext
0F04 120000   F     2488                     call            z_1s;;;;;;;
0F07 8073           2489                     jmp             viout;izmpaT
                    2490     
0F09 C214           2491     onvich: clr             bitvich ;???
                    2492                                                     ;;;;;;;;28.02
0F0B C206           2493                     clr             bitvi11
0F0D D204           2494                     setb            bitizm
                    2495                                                     ;;;;;;;;;
0F0F 78B1           2496                     mov             r0,#vichR
0F11 7600           2497                     mov             @r0,#0
0F13 803A           2498                     jmp             izmpaT
                    2499     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0F15 301820         2500     louizm: jnb             knizm,lou
0F18 79AE           2501                     mov             r1,#diap
0F1A C3             2502                     clr             c
0F1B 7403           2503                     mov             a,#3
0F1D 97             2504                     subb            a,@r1
0F1E 5006           2505                     jnc             lldi23  ;10-2..10-5
                    2506                             ;10-6..10-11
0F20 E584           2507                     mov             a,p4
0F22 54F7           2508                     anl             a,#0f7h ;d3
0F24 F584           2509                     mov             p4,a
0F26 E7             2510     lldi23: mov             a,@r1
0F27 6403           2511                     xrl             a,#3
0F29 7002           2512                     jnz             lldi3
0F2B 8005           2513                     jmp             lldi2           ;10-5
0F2D E7             2514     lldi3:  mov             a,@r1
0F2E 6402           2515                     xrl             a,#2            ;
0F30 7006           2516                     jnz             lou             
0F32 E585           2517     lldi2:  mov             a,p5            ;10-4
0F34 4408           2518                     orl             a,#08
0F36 F585           2519                     mov             p5,a
0F38 22             2520     lou:            ret
                    2521                               ;;;;;;
0F39 201511         2522     izman:  jb              biteizm,ontest  
0F3C 201807         2523                     jb              knizm,knizmon
0F3F                2524     izman1:
0F3F D218           2525                     setb            knizm           ;уст реж ИЗМ ВКЛ
                    2526                     ;       d3(k5 p4),d3(u5 p5)заслать us
0F41 120000   F     2527                     call            louizm 
0F44 8005           2528                     jmp             izmfun
                    2529     
                    2530     
0F46 C218           2531     knizmon:        clr             knizm           ;уст реж ИЗМ ВЫКЛ
0F48 120000   F     2532                     call            loadUS;восстановить us
0F4B                2533     izmfun:                 
0F4B D207           2534                     setb            bitzus;bitbuf
0F4D 8000           2535     ontest: jmp             labelE;;;;;;;;;;;;
                    2536                                     ;;;;;;;;;;;;;;
0F4F                2537     izmpaT:
                    2538     ;;;;;;;;;;;;;;;;;
                    2539                     ;       clr             c 
                    2540                     ;       mov             r1,#parN
                    2541     
                    2542                     ;       mov             r0,#diap
                    2543                     ;       mov             a,#6            
                    2544                     ;       subb    a,@r0
                    2545                     ;       jnc             labelE          ;         ;10-2..10-8
                    2546                               
                    2547                     ;       mov             @r1,#2          ;10-9..10-11            
                    2548                     ;       jmp             labelE
                    2549     
                    2550     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    40

0F4F 789A           2551     labelE: mov             r0,#parT
0F51 793D           2552                     mov             r1,#chkl
0F53 B60108         2553                     cjne    @r0,#1,izmt2
0F56 7700           2554                     mov             @r1,#0
0F58 09             2555                     inc             r1
0F59 7701           2556                     mov             @r1,#1;2
0F5B 020000   F     2557                     jmp             out6
0F5E B60208         2558     izmt2:  cjne    @r0,#2,izmt3
0F61 7700           2559                     mov             @r1,#0
0F63 09             2560                     inc             r1
0F64 7702           2561                     mov             @r1,#2;10;20
0F66 020000   F     2562                     jmp             out6
                    2563     
0F69 7700           2564     izmt3:  mov             @r1,#0
0F6B 09             2565                     inc             r1
0F6C 770A           2566                     mov             @r1,#10;20;0
0F6E 020000   F     2567                     jmp             out6
                    2568     
                    2569     
                    2570     
                    2571     
0F71                2572     knopt: ;кнопка T                                ???
0F71 C204           2573                     clr             bitizm
0F73 D210           2574                     setb            bitt2
0F75 79B7           2575                     mov             r1,#load
0F77 7704           2576                     mov             @r1,#4;1s
0F79 120000   F     2577                     call            loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2578                     
0F7C 793D           2579     viout:  mov             r1,#chkl
0F7E 7703           2580                     mov             @r1,#03
0F80 09             2581                     inc             r1
0F81 77E8           2582                     mov             @r1,#0e8h               ;1000
0F83 020000   F     2583                     jmp             out6
                    2584     
0F86                2585     knrazr:          ;???
0F86 C3             2586     labelC: clr             c
0F87 78AF           2587                     mov             r0,#parN
0F89 799A           2588                     mov             r1,#parT
0F8B 7402           2589                     mov             a,#2
0F8D 97             2590                     subb            a,@r1
0F8E 40BF           2591                     jc              labelE          ;T>2
0F90 B60104         2592                     cjne            @r0,#1,noN1c
0F93 7602           2593                     mov             @r0,#2          ;N=2
0F95 80B8           2594                     jmp             labelE
                    2595     
0F97 B60204         2596     noN1c:  cjne            @r0,#2,not_1
0F9A 7603           2597                     mov             @r0,#3          ;N=3      ;10-2..10-8
0F9C 80B1           2598                     jmp             labelE
                    2599     
0F9E                2600     not_10: 
0F9E 7601           2601     not_1:  mov             @r0,#1                          ;N=1
0FA0 80AD           2602                     jmp             labelE
                    2603     
0FA2 020000   F     2604     rtizmri:        jmp             tizmri
                    2605     
0FA5 75B0F7         2606     ttout:  mov             p3,#0f7h
0FA8 20B6D1         2607                     jb              p3.6,viout
0FAB D204           2608                     setb            bitizm  ;отжатие кнопки t
0FAD C210           2609                     clr             bitt2
0FAF 809E           2610                     jmp             labelE
0FB1                2611     labelf:                 
0FB1 301035         2612                     jnb             bitt2,nofizm
0FB4 75B0FB         2613                     mov             p3,#0fbh
0FB7 E5B0           2614                     mov             a,p3
0FB9 20E6E9         2615                     jb              acc.6,ttout;outF
0FBC 79B7           2616                     mov             r1,#load;parT
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    41

0FBE B70502         2617                     cjne            @r1,#5,noft1
                    2618                        ;t=10s
0FC1 80B9           2619                     jmp             viout;out6;ft1izm
                    2620     
0FC3 07             2621     noft1:  inc             @r1;dec         @r1
0FC4 120000   F     2622     ft1izm: call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2623                             ;call   ind
0FC7 80B3           2624                     jmp             viout;out6;??????????????/
                    2625     
                    2626                     ;увеличить счетчик задержки клавиатуры
0FC9 783D           2627     outF:           mov             r0,#chkl
0FCB 7627           2628                     mov             @r0,#27h
0FCD 08             2629                     inc             r0
0FCE 7610           2630                     mov             @r0,#10h
0FD0 020000   F     2631                     jmp             out6;out7
                    2632     
0FD3 020000   F     2633     noviR1: jmp             noviR
0FD6 78B1           2634     outvich:        mov             r0,#vichR
0FD8 7600           2635                     mov             @r0,#0
0FDA C214           2636                     clr             bitvich
0FDC C206           2637                     clr             bitvi11
0FDE C211           2638                     clr             bitmenu
0FE0 D204           2639                     setb            bitizm
0FE2 78B2           2640                     mov             r0,#marker
0FE4 76FF           2641                     mov             @r0,#0ffh
0FE6 020000   F     2642                     jmp             labelE;out6     
                    2643     
0FE9 3014E7         2644     nofizm: jnb             bitvich,noviR1
0FEC 75B0DF         2645                     mov             p3,#0dfh
0FEF 30B6E4         2646                     jnb             p3.6,outvich;отжатие кнопки вычR
0FF2 78B1           2647                     mov             r0,#vichR
0FF4 B61111         2648                     cjne    @r0,#11h,no11v6
0FF7 75B0FB         2649                     mov             p3,#0fbh;->
0FFA 20B61C         2650                     jb              p3.6,rviout;outF
0FFD 7612           2651                     mov             @r0,#12h                ;11= вычислить
0FFF 900000   F     2652     vvrr6:  mov             dptr,#teIZMK    ;       изм конст;teVICH
1002 120000   F     2653                     call            lotext
1005 020000   F     2654                     jmp             viout   ;outF
                    2655             
1008 B61211         2656     no11v6: cjne    @r0,#12h,no12v6
100B 75B0FB         2657                     mov             p3,#0fbh;->
100E 20B608         2658                     jb              p3.6,rviout;outF
1011 7611           2659                     mov             @r0,#11h;13h
1013 900000   F     2660                     mov             dptr,#teVICH;teOUT
1016 120000   F     2661                     call            lotext
1019 020000   F     2662     rviout: jmp             viout;outF
                    2663                     
101C B61311         2664     no12v6: cjne    @r0,#13h,no13v6
101F 75B0FB         2665                     mov             p3,#0fbh;->
1022 20B6F4         2666                     jb              p3.6,rviout;outF
1025 7611           2667                     mov             @r0,#11h
1027 900000   F     2668                     mov             dptr,#teVICH
102A 120000   F     2669                     call            lotext
102D 020000   F     2670                     jmp             viout;outF
                    2671     
                    2672     ;кн -> A= 0000          ???
                    2673     ;кн -> B= +00000
1030 75B0FB         2674     no13v6: mov             p3,#0fbh
1033 E5B0           2675                     mov             a,p3
1035 20E635         2676                     jb              acc.6,chanZ
1038 E53B           2677                     mov             a,movrig
103A B40714         2678                     cjne    a,#7,kon_B      
103D 78B2           2679                     mov             r0,#marker      ;A= 0000
103F B60716         2680                     cjne    @r0,#7,mark0_8  ;курсор справа ?
1042 E53A           2681     rikn:           mov             a,movleft
1044 F6             2682                     mov             @r0,a           ; уст курсор в кр левую поз+1
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    42

                    2683     ;                       29.12.06
                    2684     ;необходимо не портить цифру в следуюем справа знакоместе
                    2685     ;т е сохранить ее в ячейке для мигания в противном случае
                    2686     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего знакоместа
1045 78B2           2687                     mov             r0,#marker
1047 7440           2688                     mov             a,#bufind
1049 26             2689                     add             a,@r0                   ;a=bufind+marker
104A F9             2690                     mov             r1,a
104B 09             2691                     inc             r1
104C 873C           2692                     mov             savba,@r1
104E 020000   F     2693                     jmp             viout;outF
                    2694     
1051 78B2           2695     kon_B:  mov             r0,#marker      ;B= +00000
1053 B60802         2696                     cjne    @r0,#8,mark0_8          ;курсор справа ?
1056 80EA           2697                     jmp             rikn
1058                2698     mark0_8:
                    2699     ;                               29.12.06
                    2700     ;;;;;;;;;;;;;;;;;;
                    2701     ;необходимо не портить цифру в следуюем справа знакоместе
                    2702     ;т е сохранить ее в ячейке для мигания в противном случае
                    2703     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2704     ;       знакоместа ->B=+00000
1058 78B2           2705                     mov             r0,#marker
105A 7440           2706                     mov             a,#bufind
105C 26             2707                     add             a,@r0                   ;a=bufind+marker
105D F9             2708                     mov             r1,a
105E 09             2709                     inc             r1
105F 873C           2710                     mov             savba,@r1
1061 78B2           2711                     mov             r0,#marker
1063 06             2712                     inc             @r0             ;       сдвинуть курсор вправо на 1
1064 C219           2713                     clr             bitmig
1066 B60901         2714                     cjne    @r0,#9,outma
1069 18             2715                     dec             r0;ppp
106A 020000   F     2716     outma:  jmp             viout;outF
                    2717     
106D 75B0FE         2718     chanZ:  mov             p3,#0feh
1070 E5B0           2719                     mov             a,p3
1072 20E611         2720                     jb              acc.6,chanma
                    2721                             ;изм знак в старшем разряде на противоположн
1075 E543           2722                     mov             a,bufind+3
1077 B42B06         2723                     cjne            a,#2bh,noplus
107A 75432D         2724                     mov             bufind+3,#2dh           ;+->-   
107D 020000   F     2725                     jmp             viout;outF
1080                2726     noplus:
1080 75432B         2727                     mov             bufind+3,#2bh           ;-/+-
1083 020000   F     2728                     jmp             viout;outF
1086 75B0FD         2729     chanma: mov             p3,#0fdh
1089 E5B0           2730                     mov             a,p3
108B 20E603         2731                     jb              acc.6,outFl;labelL1
                    2732                     ;clr            bitmig
108E 120000   F     2733     labelL1:        call            vvchibl;f       ;увеличить цифру 
                    2734     
1091 793D           2735     outFl:  mov             r1,#chkl
1093 7701           2736                     mov             @r1,#01
1095 09             2737                     inc             r1
1096 77F4           2738                     mov             @r1,#0f4h               ;1000
1098 020000   F     2739                     jmp             out6
                    2740                     
                    2741     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2742     
109B 020000   F     2743     rlabelL:        jmp             labelL
                    2744     
109E 020000   F     2745     rfindmem:       jmp             findmem
                    2746     
10A1 3011FA         2747     noviR:  jnb             bitmenu,rfindmem;17.01.07
                    2748     ;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    43

10A4 78B1           2749                     mov             r0,#vichR
10A6 7415           2750                     mov             a,#15h
10A8 C3             2751                     clr             c
10A9 96             2752                     subb            a,@r0
10AA 4016           2753                     jc              ri21_23
                    2754     
10AC 75B0FB         2755                     mov             p3,#0fbh; реж кн меню ->
10AF 20B60A         2756                     jb              p3.6,ri6
10B2 78B1           2757                     mov             r0,#vichR
10B4 B61508         2758                     cjne    @r0,#15h,norime
10B7 7611           2759                     mov             @r0,#11h
10B9 120000   F     2760     norime1:        call            lomenu
10BC 020000   F     2761     ri6:            jmp             viout;out6
10BF 06             2762     norime: inc             @r0
10C0 80F7           2763                     jmp             norime1
                    2764             
10C2 7423           2765     ri21_23:        mov             a,#23h          ;->
10C4 C3             2766                     clr             c
10C5 96             2767                     subb            a,@r0
10C6 4014           2768                     jc              ri_31
10C8 75B0FB         2769                     mov             p3,#0fbh
10CB 20B6EE         2770                     jb              p3.6,ri6
10CE B62308         2771                     cjne            @r0,#23h,no23ri
10D1 7621           2772                     mov             @r0,#21h
10D3 120000   F     2773                     call            lomenu
10D6 020000   F     2774                     jmp             viout;out6
10D9 06             2775     no23ri: inc             @r0
10DA 80DD           2776                     jmp             norime1
10DC B6312B         2777     ri_31:  cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2778     
                    2779     ;;
10DF 75B0FB         2780                     mov             p3,#0fbh
10E2 20B6D7         2781                     jb              p3.6,ri6
                    2782     ;;
10E5 301311         2783                     jnb             bitv19,gosk19
10E8 900000   F     2784                     mov             dptr,#teS57_6;57,6
10EB 120000   F     2785                     call            lotext
10EE 534B03         2786                     anl             bufind+11,#03h
10F1 434B80         2787                     orl             bufind+11,#80h
10F4 C213           2788                     clr             bitv19
10F6 020000   F     2789                     jmp             viout;out6
10F9 900000   F     2790     gosk19: mov             dptr,#teS19_2
10FC 120000   F     2791                     call            lotext
10FF 534B03         2792                     anl             bufind+11,#03h
1102 434B80         2793                     orl             bufind+11,#80h
1105 D213           2794                     setb            bitv19
1107 020000   F     2795                     jmp             viout;out6
                    2796     
                    2797     
                    2798     
                    2799     ;labelS2:       jmp             out6
                    2800     
110A 7452           2801     no31ri: mov             a,#52h;42h              ;->
110C C3             2802                     clr             c
110D 96             2803                     subb            a,@r0
110E 40AC           2804                     jc              ri6
1110 75B0FB         2805                     mov             p3,#0fbh                        ;41,42
1113 30B609         2806                     jnb             p3.6,rlabelN    ;кнопка ->(пароль 000)
1116 75B0FD         2807                     mov             p3,#0fdh
1119 20B6A0         2808                     jb              p3.6,ri6
111C 020000   F     2809                     jmp             labelL1                                 ;кнопка 0..9  (паро
                             ль 000)
111F 020000   F     2810     rlabelN:        jmp             labelN
1122 020000   F     2811     moutF:  jmp             viout;outF
                    2812     ;;;;;;;;;;;;;;;;;;;;;;;;;
1125 020000   F     2813     rnnmemb:        jmp             nnmemb
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    44

                    2814     
1128                2815     nbimenu:
1128 300BFA         2816     findmem:        jnb             bitmem,rnnmemb
112B 79B0           2817                     mov             r1,#level                                                  
                                  ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
112D B71113         2818                     cjne            @r1,#11h,nomem11
                    2819                                             
1130 75B0FB         2820                     mov             p3,#0fbh
1133 E5B0           2821                     mov             a,p3
1135 20E6EA         2822                     jb              acc.6,moutF
1138 7712           2823                     mov             @r1,#12h
113A 900000   F     2824                     mov             dptr,#teWR      ;                       ЗАПИСЬ
113D 120000   F     2825                     call            lotext
1140 020000   F     2826                     jmp             viout;outF
                    2827     
1143 B71213         2828     nomem11:   cjne         @r1,#12h,nomem12
1146 75B0FB         2829                     mov             p3,#0fbh
1149 E5B0           2830                     mov             a,p3
114B 20E6D4         2831                     jb              acc.6,moutF
114E 7713           2832                     mov             @r1,#13h
1150 900000   F     2833                     mov             dptr,#teLIST            ;ПРОСМОТР
1153 120000   F     2834                     call            lotext
1156 020000   F     2835                     jmp             viout;outF
1159 B71313         2836     nomem12:        cjne            @r1,#13h,nomem13
115C 75B0FB         2837                     mov             p3,#0fbh
115F E5B0           2838                     mov             a,p3
1161 20E6BE         2839                     jb              acc.6,moutF
1164 7714           2840                     mov             @r1,#14h
1166 900000   F     2841                     mov             dptr,#teSTAT                    ;СТАТИСТИКА
1169 120000   F     2842                     call            lotext
116C 020000   F     2843                     jmp             viout;outF
                    2844                             
116F B71413         2845     nomem13:        cjne            @r1,#14h,labelL
1172 75B0FB         2846                     mov             p3,#0fbh
1175 E5B0           2847                     mov             a,p3
1177 20E6A8         2848                     jb              acc.6,moutF
117A 7711           2849                     mov             @r1,#11h
117C 900000   F     2850                     mov             dptr,#teCLE                     ;ОЧИСТКА
117F 120000   F     2851                     call            lotext
1182 020000   F     2852                     jmp             viout;outF
1185                2853     labelL: 
                    2854                     ;;;;;
1185 75B0DF         2855                     mov                     p3,#0dfh
1188 30B697         2856                     jnb                     p3.6,moutF;в реж очистка полная не отрабатывать ВЫЧ
                              R
                    2857                     
                    2858                     ;ПОЛНАЯ->БЛОК 00(level 21->22)  ???
118B 78B0           2859                     mov             r0,#level
118D B6210E         2860                     cjne            @r0,#21h,nobl21
1190 7622           2861                     mov             @r0,#22h                ;->БЛОК 
1192 900000   F     2862                     mov             dptr,#teBL
1195 120000   F     2863     me21_22:        call            lotext
                    2864                             
1198 120000   F     2865                     call            z_05s;задержка чтобы не проскакивала пргр на следующий уров
                             ень
119B 020000   F     2866                     jmp             viout;outF
                    2867     
119E B62207         2868     nobl21: cjne            @r0,#22h,nobl22
11A1 900000   F     2869                     mov             dptr,#teFULL
11A4 7621           2870                     mov             @r0,#21h                ;->ПОЛНАЯ
                    2871     
11A6 80ED           2872                     jmp             me21_22
                    2873     
                    2874     ;labl21:           cjne @r0,#21h,nolev1
                    2875     ;                       mov             p3,#0fbh
                    2876     ;                       mov             a,p3
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    45

                    2877     ;                       jb              acc.6,loutF
                    2878     ;                       cjne    @r0,#21h,labl22
                    2879     ;                       mov             @r0,#22h
                    2880                             ;БЛОК
                    2881     ;                       call    lotext
                    2882     ;                       jmp             outF
                    2883     ;labl22:                mov             @r0,#21h
                    2884                             ;ПОЛНАЯ
                    2885     ;                       call    lotext
                    2886     ;                       jmp             outF
                    2887                      
11A8 B62325         2888     nobl22: cjne    @r0,#23h,go31l
11AB 75B0FB         2889     rigblo: mov             p3,#0fbh
11AE 20B629         2890                     jb              p3.6,llev2
                    2891     
11B1                2892     labL2:    ;  уст курсор в правую позицию 
                    2893                                     ;       кнопка                  ->
                    2894     ;;;;;;;;;;;;;;;;;;
                    2895     ;необходимо не портить цифру в следуюем справа знакоместе
                    2896     ;т е сохранить ее в ячейке для мигания в противном случае
                    2897     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2898     ;       знакоместа
11B1 78B2           2899                     mov             r0,#marker
11B3 7440           2900                     mov             a,#bufind
11B5 26             2901                     add             a,@r0                   ;a=bufind+marker
11B6 F9             2902                     mov             r1,a
11B7 09             2903                     inc             r1
11B8 873C           2904                     mov             savba,@r1
11BA C219           2905                     clr             bitmig
                    2906     ;;;;;;;;;;;;;;;;
11BC 78B2           2907                     mov             r0,#marker      ;курсор справа  ?
11BE E53B           2908                     mov             a,movrig
11C0 C3             2909                     clr             c
11C1 96             2910                     subb            a,@r0
11C2 6006           2911                     jz              equ1l
11C4 E53B           2912                     mov             a,movrig;уст в правую позицию
11C6 F6             2913                     mov             @r0,a
11C7 020000   F     2914                     jmp             viout;outF                                       
11CA E53A           2915     equ1l:  mov             a,movleft;уст в левую позицию
11CC F6             2916                     mov             @r0,a   
11CD 020000   F     2917     loutF:  jmp             viout;outF
                    2918                     
                    2919     
11D0 B63102         2920     go31l:  cjne    @r0,#31h,go41l
11D3 80D6           2921                     jmp             rigblo
11D5 B6410B         2922     go41l:  cjne    @r0,#41h,norig2
11D8 80D1           2923                     jmp             rigblo
                    2924     
11DA 75B0FD         2925     llev2:  mov             p3,#0fdh
11DD 20B6ED         2926                     jb              p3.6,loutF
11E0 020000   F     2927                     jmp             labelL1
                    2928     
                    2929     ;->
11E3 C3             2930     norig2: clr             c               ;32,33,34,42
11E4 7431           2931                     mov             a,#31h
11E6 96             2932                     subb            a,@r0
11E7 50E4           2933                     jnc             loutF
11E9 75B0FB         2934     rigblok:        mov             p3,#0fbh  ;32,33,34,42
11EC 20B630         2935                     jb              p3.6,lev2go
11EF B64302         2936     labelN: cjne            @r0,#43h,labN_2
11F2 80D9           2937                     jmp             loutF
11F4 B64402         2938     labN_2: cjne            @r0,#44h,labN_1 
11F7 80D4           2939                     jmp             loutF                           
                    2940                             ;                               29.12.06
                    2941     ;;;;;;;;;;;;;;;;;;
                    2942     ;необходимо не портить цифру в следуюем справа знакоместе
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    46

                    2943     ;т е сохранить ее в ячейке для мигания в противном случае
                    2944     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2945     ;       знакоместа
11F9 78B2           2946     labN_1: mov             r0,#marker
11FB 7440           2947                     mov             a,#bufind
11FD 26             2948                     add             a,@r0                   ;a=bufind+marker
11FE F9             2949                     mov             r1,a
11FF 09             2950                     inc             r1
1200 873C           2951                     mov             savba,@r1
                    2952     ;;;;;;;;;;;;;;;;;;;
1202 78B2           2953                     mov             r0,#marker      ;курсор справа  ?
1204 E53B           2954                     mov             a,movrig
1206 C3             2955                     clr             c
1207 96             2956                     subb            a,@r0
1208 7006           2957                     jnz             noequ1
120A E53A           2958                     mov             a,movleft;уст в крайнюю левую позицию
120C F6             2959                     mov             @r0,a
120D 020000   F     2960                     jmp             viout;outF
1210                2961     noequ1: ;29.12.06
                    2962     ;;;;;;;;;;;;;;;;;;
                    2963                             ;восстан знакоместо при мигании
                    2964                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1210 78B2           2965                     mov             r0,#marker
1212 7440           2966                     mov             a,#bufind
1214 26             2967                     add             a,@r0                   ;a=bufind+marker
1215 F9             2968                     mov             r1,a
                    2969                     ;mov            @r1,savba
1216 09             2970                     inc             r1
1217 873C           2971                     mov             savba,@r1
                    2972     ;;;;;;;;;;;;;;; 
1219 120000   F     2973                     call            marri;уст сдвиг в правую        позицию
121C 020000   F     2974                     jmp             viout;outF
121F 75B0FD         2975     lev2go: mov             p3,#0fdh
1222 30B603         2976                     jnb             p3.6,rlabelL1
1225 020000   F     2977                     jmp             viout;outF
                    2978     
1228 020000   F     2979     rlabelL1:       jmp             labelL1
                    2980     
122B                2981     nnmemb:
                    2982     
122B                2983     norim6:    ;kn menu
122B D083           2984     out6:           pop             dph
122D D082           2985                     pop             dpl
122F D007           2986                     pop             rr7     
1231 D006           2987                     pop             rr6
1233 D005           2988                     pop             rr5
1235 D004           2989                     pop             rr4
1237 D003           2990                     pop             rr3
1239 D002           2991                     pop             rr2
123B D001           2992                     pop             rr1                             
123D D000           2993                     pop             rr0
123F D0D0           2994                     pop             psw
1241 D0E0           2995                     pop             acc
                    2996             ;clr            bitmig
                    2997             ;mov            EIE2,#30H
                    2998             ;mov            a,P3IF
                    2999             ;anl            a,#0bfh
                    3000             ;mov            P3IF,a
                    3001             ;mov            P3,#0c0h
                    3002             ;;;;;;
1243                3003     kkout6:
1243 75AD00         3004                     mov             P3IF,#00 ;обязательно сбросить опять приходит на обработку 
                             прерывания
1246 75B0C0         3005                     mov             P3,#0c0h
1249 C219           3006                     clr             bitmig
124B E586           3007                     mov             a,P6            ;p6.4=0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    47

124D 54EF           3008                     anl             a,#0efh
124F F586           3009                     mov             P6,a
1251 00             3010                     nop
1252 00             3011                     nop
1253 E586           3012                     mov             a,P6                    ;p6.4=1 
1255 4410           3013                     orl             a,#10h
1257 F586           3014                     mov             P6,a    
                    3015                             ;;;;;;;;;
1259 E5DA           3016                     mov             a,PCA0CPM0;     
125B 4446           3017                     orl             a,#46h;anl              a,#0fbh
125D F5DA           3018                     mov             PCA0CPM0,a
                    3019     
125F 75CDD0         3020                     mov             TH2,#0d0h
1262 75CC00         3021                     mov             TL2,#00
                    3022     
1265 D2CA           3023                     setb            T2CON.2
1267 D2AD           3024                     setb            ET2;IE.5
                    3025                             ;;;;;;;;                    
1269 32             3026                     reti
                    3027     
                    3028     
126A 020000   F     3029     knKMP:  jmp             out7
126D 020000   F     3030     rout7:  jmp             out7    
1270 020000   F     3031     rlabelH:        jmp             labelH
1273 020000   F     3032     rknNUL: jmp             knNUL
1276 020000   F     3033     rknleft:        jmp             knleft
                    3034     
1279 75AD00         3035     no0chk: mov             P3IF,#00;               обязательно сбросить опять приходит на обра
                             ботку прерывания
127C 75B0C0         3036                     mov             P3,#0c0h
127F 32             3037                     reti
                    3038     
1280 020000   F     3039     rknMEM: jmp             knMEM
                    3040     
1283                3041     keyb2:  ;IE7
                    3042     ;;;;;
                    3043                     ;       mov                     a,chkl          ;low
                    3044                     ;       jb                      acc.7,no0chk;
                    3045                             ;jnz                    no0chk
                    3046                             ;mov                    a,chkl                          ;high
                    3047                             ;jnz                    no0chk
                    3048     ;;;;
1283 75E700         3049                     mov             EIE2,#00H
1286 75AD00         3050                     mov             P3IF,#00
                    3051     
1289 C0E0           3052                     push    acc
128B C0D0           3053                     push    psw
128D C000           3054                     push    rr0
128F C001           3055                     push    rr1
1291 C002           3056                     push    rr2
1293 C003           3057                     push    rr3
1295 C004           3058                     push    rr4
1297 C005           3059                     push    rr5
1299 C006           3060                     push    rr6
129B C007           3061                     push    rr7
129D C082           3062                     push    dpl
129F C083           3063                     push    dph
                    3064                             ;clr            bitmig
                    3065                       ;;;;;;;;;;;;;;
12A1 120000   F     3066                     call    z_01s   ;0,1s
                    3067                               ;восстан знакоместо при мигании
                    3068                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
12A4 78B2           3069                     mov             r0,#marker
12A6 7440           3070                     mov             a,#bufind
12A8 26             3071                     add             a,@r0                   ;a=bufind+marker
12A9 F9             3072                     mov             r1,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    48

12AA A73C           3073                     mov             @r1,savba
                    3074                                     ;;;;;;;;;;;
                    3075     
12AC E5B0           3076                     mov             a,p3
12AE 20E7BC         3077                     jb              acc.7,rout7
12B1 E5B0           3078                     mov             a,p3
12B3 74FF           3079                     mov             a,#0ffh         ; p3.(5-0)<-3f
12B5 F5B0           3080                     mov             p3,a
12B7 E5B0           3081                     mov             a,p3
12B9 30E7B1         3082                     jnb             acc.7,rout7             ;error
12BC 3004B1         3083                     jnb             bitizm,rlabelH
12BF 75B0FE         3084                     mov             p3,#0feh                ;реж IZM
12C2 E5B0           3085                     mov             a,p3
12C4 30E7AC         3086                     jnb             acc.7,rknNUL
12C7 75B0FD         3087                     mov             p3,#0fdh
12CA E5B0           3088                     mov             a,p3
12CC 30E79B         3089                     jnb             acc.7,knKMP
12CF 75B0FB         3090                     mov             p3,#0fbh
12D2 E5B0           3091                     mov             a,p3
12D4 30E79F         3092                     jnb             acc.7,rknleft
12D7 75B0F7         3093                     mov             p3,#0f7h
12DA 00             3094                     nop
12DB 00             3095                     nop
12DC 00             3096                     nop
12DD 00             3097                     nop
12DE E5B0           3098                     mov             a,p3
12E0 30E76F         3099                     jnb             acc.7,knAVP
12E3 75B0EF         3100                     mov             p3,#0efh
12E6 E5B0           3101                     mov             a,p3
12E8 30E795         3102                     jnb             acc.7,rknMEM
12EB 75B0DF         3103                     mov             p3,#0dfh
12EE E5B0           3104                     mov             a,p3    
12F0 30E722         3105                     jnb             acc.7,knmenu
12F3                3106     an_t7:             ;;;;;;;;;;;;
                    3107                     
                    3108     ;       clr             c
                    3109     ;       mov             r1,#parN
                    3110     ;
                    3111     ;                       mov             r0,#diap
                    3112     ;                       mov             a,#6            
                    3113     ;                       subb    a,@r0
                    3114     ;                       jnc             goto7           ;         ;10-2..10-8
                    3115                               
                    3116     ;                       mov             @r1,#2          ;10-9..10-11            
                    3117                             
                    3118                             ;;;;;;;;;;;;
12F3 799A           3119     goto7:  mov             r1,#parT
12F5 783D           3120                     mov             r0,#chkl
12F7 B70108         3121                     cjne            @r1,#1,not1_7
12FA 7600           3122                     mov             @r0,#00
12FC 08             3123                     inc             r0
12FD 7601           3124                     mov             @r0,#1;2
12FF 020000   F     3125                     jmp             out7
                    3126                             
                    3127     
1302 B70208         3128     not1_7: cjne            @r1,#2,not2_7
1305 7600           3129                     mov             @r0,#00
1307 08             3130                     inc             r0
1308 7602           3131                     mov             @r0,#2;10;20
130A 020000   F     3132                     jmp             out7
130D 7600           3133     not2_7: mov             @r0,#00
130F 08             3134                     inc             r0
1310 760A           3135                     mov             @r0,#10;20;0
1312 020000   F     3136     merr:           jmp             out7
                    3137     
                    3138     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    49

1315                3139     knmenu:
                    3140     
                    3141     ;               mov     cnt_out,#33             ;+
                    3142     ;               mov     p_out,#0DAh
                    3143     
                    3144     
1315 2006FA         3145                     jb              bitvi11,merr
1318 20151C         3146                     jb              biteizm,menuoff
                    3147                                     ;;;;;
131B 201225         3148                     jb              bitklb,klboff
131E C204           3149                     clr             bitizm          ;off IZM
1320 D211           3150                     setb            bitmenu
1322 C217           3151                     clr             bitoll
1324 900000   F     3152                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1327 120000   F     3153                     call            lotext
132A 534B03         3154                     anl             bufind+11,#03h  ;погасить запятые
132D 120000   F     3155                     call            ind
1330 78B1           3156                     mov             r0,#vichR
1332 7611           3157                     mov             @r0,#11h
1334 020000   F     3158                     jmp             onmem11
1337                3159     menuoff:
1337 78B1           3160                     mov             r0,#vichR
1339 7600           3161                     mov             @r0,#00
133B C215           3162                     clr             biteizm
133D 120000   F     3163                     call            loadus
1340 020000   F     3164                     jmp             out7
                    3165     
1343 C212           3166     klboff: clr             bitklb
1345 120000   F     3167                     call            loadUS
1348 78B1           3168                     mov             r0,#vichR
134A 7600           3169                     mov             @r0,#00
134C 020000   F     3170                     jmp             out7
                    3171     
134F 020000   F     3172     rendkalib:      jmp             endkalib
                    3173     
1352 2012FA         3174     knAVP:  jb              bitklb,rendkalib        
1355 200504         3175                     jb              bitavp,meavp
1358 D205           3176                     setb            bitavp
135A 8097           3177                     jmp             an_t7;onmem11
135C C205           3178     meavp:  clr             bitavp
135E 8093           3179                     jmp             an_t7;onmem11
                    3180     
1360 201207         3181     knleft: jb              bitklb,lefkl
                    3182                                     ;;;;;;;;
1363 79AE           3183                     mov             r1,#diap
1365 07             3184                     inc             @r1             ;перекл диапазон 1 поз в сбр массив
1366 B70A03         3185                     cjne    @r1,#0ah,nodi6
1369 17             3186                     dec             @r1
136A 8087           3187     lefkl:  jmp             an_t7
                    3188     
136C                3189     nodi6:             ;    cjne    @r1,#0,an_t7
136C 120000   F     3190                     call            clmassix
136F 78B3           3191                     mov             r0,#summa
1371 120000   F     3192                     call            clear4  
1374 786A           3193                     mov             r0,#rez_A0
1376 120000   F     3194                     call            clear4
1379 C20F           3195                     clr             bitnul          ;гасить светодиод НУЛЬ  
137B 120000   F     3196                     call            loadUS
137E 020000   F     3197                     jmp             an_t7
                    3198     
1381 200F0F         3199     knNUL:  jb              bitnul,ybnul
1384 D20F           3200                     setb            bitnul
1386 789C           3201                     mov             r0,#rez_A3      ;A3
1388 120000   F     3202                     call            resar2
138B 786A           3203                     mov             r0,#rez_A0      
138D 120000   F     3204                     call            saver2;A0<-A3
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    50

1390 020000   F     3205                     jmp             goto7;an_t7
                    3206     
1393 C20F           3207     ybnul:  clr             bitnul
1395 900000   F     3208                     mov             DPTR,#ch0 
1398 120000   F     3209                     CALL    ldc_long                 ; r2..r5 <-- 0
139B 786A           3210                     mov             r0,#rez_A0      ;A0=0
139D 120000   F     3211                     call            saver2
13A0 020000   F     3212                     jmp             goto7;an_t7
                    3213     
13A3 301021         3214     labelH: jnb             bitt2,nolah
13A6 75B0FB         3215                     mov             p3,#0fbh   ;вход в режим изм Т
13A9 534A8F         3216                     anl             bufind+10,#8fh
13AC 79B7           3217                     mov             r1,#load;parT
13AE 20B70D         3218                     jb              p3.7,rhnot1
13B1 B70003         3219                     cjne    @r1,#0,inct;
13B4 020000   F     3220                     jmp             out7;hyest6
13B7 17             3221     inct:           dec             @r1                     ;Tизм+1
                    3222                             
13B8 120000   F     3223                     call            loadT   ;в буфер2 записать текст  в соотв с     Tизм
13BB                3224     hnot2:          ;       call    ind
13BB 020000   F     3225                     jmp             onmem11;out7
13BE 020000   F     3226     rhnot1: jmp             hnot1
                    3227      ;rnoviR:               jmp             noviR
13C1 020000   F     3228     rlabelK:        jmp             labelK
13C4 020000   F     3229     rlabelI:        jmp             labelI          
                    3230      ;;;;;;;;;;;;;;;;;;;
                    3231     
13C7 3014F7         3232     nolah:  jnb             bitvich,rlabelK 
                    3233                     ;увеличить счетчик задержки клавиатуры
                    3234                     ;;              mov             r0,#chkl
                    3235                     ;;              mov             @r0,#27h
                    3236                     ;;              inc             r0
                    3237                     ;;              mov             @r0,#10h
                    3238     
13CA 78B1           3239                     mov             r0,#vichR
13CC B61128         3240                     cjne    @r0,#11h,rhnor11;rlabelI;;
13CF 75B0FB         3241                     mov             p3,#0fbh   ;<-
13D2 20B730         3242                     jb              p3.7,noh37;routF
13D5 B6110B         3243                     cjne    @r0,#11h,hr12
13D8 7612           3244                     mov             @r0,#12h;11h;= вычислить
13DA 900000   F     3245                     mov             dptr,#teIZMK    ;       изм конст;teVICH
13DD 120000   F     3246     hvi1113:        call            lotext  ;в буфер 2 записать текст в соотв с состоянием
13E0 020000   F     3247                     jmp             onmem11;goto7
                    3248     
13E3 B61207         3249     hr12:           cjne    @r0,#12h,hnor12                 ;???
13E6 7611           3250     lovich: mov             @r0,#11h
13E8 900000   F     3251                     mov             dptr,#teVICH
13EB 80F0           3252                     jmp             hvi1113         
13ED B61307         3253     hnor12: cjne    @r0,#13h,rhnor11
13F0 7612           3254     loizmk: mov             @r0,#12h
13F2 900000   F     3255                     mov             dptr,#teIZMK    ;       изм конст
                    3256                                        
13F5 80E6           3257                     jmp             hvi1113
                    3258     
13F7 804C           3259     rhnor11:        jmp             hnor11
                    3260     
13F9 8057           3261     rvvizko:        jmp             vvizko
13FB C214           3262     vioutF: clr             bitvich
13FD C206           3263                     clr             bitvi11
13FF 020000   F     3264                     jmp             viout;outF
1402 020000   F     3265     toutF:  jmp             viout;outF
                    3266     
1405 75B0F7         3267     noh37:  mov             p3,#0f7h
1408 20B7F7         3268                     jb              p3.7,toutF;vioutF
140B B611EB         3269                     cjne    @r0,#11h,rvvizko
140E D206           3270                     setb            bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    51

1410 D204           3271                     setb            bitizm
1412 534B07         3272                     anl             bufind+11,#07h
1415 434B10         3273                     orl             bufind+11,#10h;точка после 1 знакоместа
1418 020000   F     3274                     jmp             goto7;
                    3275     
                    3276     
141B 80E8           3277     rnoh37: jmp             noh37
141D B6120D         3278     norr11: cjne    @r0,#12h,norr12
1420 75B0FB         3279                     mov             p3,#0fbh   ;<-
1423 20B7F5         3280                     jb              p3.7,rnoh37;routF
1426 760B           3281                     mov             @r0,#11;12->11
1428 80BC           3282                     jmp             lovich
                    3283     
142A 020000   F     3284     labelI2:        jmp             labelI
142D B613FA         3285     norr12: cjne    @r0,#13h,labelI2
1430 75B0FB         3286                     mov             p3,#0fbh   ;<-
1433 20B7E5         3287                     jb              p3.7,rnoh37
1436 7612           3288                     mov             @r0,#12h
1438 80B6           3289                     jmp             loizmk
                    3290                             ;;;;
143A C214           3291     clrvich:        clr             bitvich
143C D204           3292                     setb            bitizm
143E A8B2           3293                     mov             r0,marker
1440 76FF           3294                     mov             @r0,#0ffh
1442 020000   F     3295                     jmp             goto7;  routF
                    3296     
                    3297     ;rnoh37:        jmp             noh37
                    3298      ;ввод изм конст
1445 B612E5         3299     hnor11: cjne    @r0,#12h,norr12;clrvich
1448 75B0FB         3300                     mov             p3,#0fbh   
144B 20B7CD         3301                     jb              p3.7,rnoh37;lovich;;изм конст <-  выч
144E 7611           3302                     mov             @r0,#11h
1450 8094           3303                     jmp             lovich
                    3304     
1452 78B1           3305     vvizko: mov             r0,#vichR
1454 E6             3306                     mov             a,@r0
                    3307                     ;       cjne    @r0,#12h,clrvich
1455 B412E2         3308                     cjne    a,#12h,clrvich
1458 7621           3309                     mov             @r0,#21h                ;изм конст->U=+0000     (vvod)
145A 78B2           3310                     mov             r0,#marker
145C 7604           3311                     mov             @r0,#4;9
145E 753A04         3312                     mov             movleft,#4
1461 753B07         3313                     mov             movrig,#7
1464 900000   F     3314                     mov             dptr,#teAequ0
1467 120000   F     3315                     call            lotext
146A 120000   F     3316                     call            outA
146D 534B0F         3317                     anl             bufind+11,#0fh
                    3318             ;       mov             a,bufind+11
                    3319             ;       anl             a,#0f0h
                    3320             ;       mov             bufind+11,a
1470 434B40         3321                     orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0 v)
1473 020000   F     3322                     jmp             goto7;routF
                    3323     ;hnor13:        jmp             hnor12          
1476 B6210C         3324     izchi:  cjne    @r0,#21h,tlabelI
                    3325     ;<- при вводе цифр А                            
                    3326                     ;mov            p3,#0fbh   
                    3327                     ;jnb            p3.7,li21
                    3328                     ;clr            bitmig
1479 78B2           3329                     mov             r0,#marker
147B 16             3330                     dec             @r0
147C B60201         3331                     cjne    @r0,#2,li21
147F 06             3332                     inc             @r0;marker=3 +/-
1480 C219           3333     li21:           clr             bitmig
1482 020000   F     3334                     jmp             goto7;outF
                    3335     
1485 020000   F     3336     tlabelI:        jmp             labelI
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    52

                    3337     
                    3338     ;                       load    0 1 2 3 4 5             
1488 06050403       3339     sootv:  db              6,5,4,3,2,1;parT
148C 0201                    
                    3340     ;
148E 020000   F     3341     nnnott: jmp             viout
                    3342     ;нажата кн ввод при наборе Т
1491 75B0F7         3343     hnot1:  mov             p3,#0f7h
1494 20B7F7         3344                     jb              p3.7,nnnott;routF;out7
1497 B70549         3345                     cjne    @r1,#5,nohnot1  ;r1=load
149A 794A           3346                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
149C E7             3347                     mov             a,@r1
149D 548F           3348                     anl             a,#8fh
149F 4440           3349                     orl             a,#40h;.6
14A1 F7             3350                     mov             @r1,a
14A2 8000           3351                     jmp             loadb
                    3352                             
                    3353                                     
14A4 789A           3354     loadB:  mov             r0,#parT
14A6 900000   F     3355                     mov             dptr,#sootv
14A9 79B7           3356                     mov             r1,#load                
14AB E7             3357                     mov             a,@r1;load
14AC 93             3358                     movc    a,@a+dptr
14AD F6             3359                     mov             @r0,a
14AE 120000   F     3360                     call            loab12  ;установить B1,B2 в соотв с Tизм
                    3361                              ;r4=b1 r5=b2
14B1 120000   F     3362                     call            iniacp;инициализация АЦП
14B4 120000   F     3363                     call            loadUS
14B7 120000   F     3364                     call            clmassix        
14BA D204           3365                     setb            bitizm
14BC C210           3366                     clr             bitt2
14BE 534A8F         3367                     anl             bufind+10,#8fh
14C1 C3             3368                     clr             c
14C2 789A           3369                     mov             r0,#parT
14C4 79AF           3370                     mov             r1,#parN
14C6 7402           3371                     mov             a,#2
14C8 96             3372                     subb            a,@r0
14C9 5005           3373                     jnc             loadB2
14CB 7701           3374                     mov             @r1,#1;N=1         ;T>=2
14CD 020000   F     3375     bout7:  jmp             goto7;out7
                    3376     
14D0 B702FA         3377     loadB2: cjne    @r1,#2,bout7
14D3 7702           3378                     mov             @r1,#2;N=2
14D5 020000   F     3379                     jmp             goto7;out7
14D8                3380     nohnot2:        ;в буфере 1 зажечь <=0,1s
14D8 794A           3381                     mov             r1,#bufind+10
14DA E7             3382                     mov             a,@r1
14DB 4410           3383                     orl             a,#10h;.4
14DD F7             3384                     mov             @r1,a
14DE 120000   F     3385                     call            ind
14E1 80C1           3386                     jmp             loadB
14E3 B704F2         3387     nohnot1:        cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
14E6 794A           3388                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
14E8 E7             3389                     mov             a,@r1
14E9 4420           3390                     orl             a,#20h;.5
14EB F7             3391                     mov             @r1,a
14EC 80B6           3392                     jmp             loadB
                    3393     
                    3394     ;кнопка ПАМЯТЬ                  ???
14EE 2012DC         3395     knMEM:  jb              bitklb,bout7    ;в реж калибровки не нажимать память
14F1 C204           3396                     clr             bitizm          ;off IZM
14F3 900000   F     3397                     mov             dptr,#teLIST    ;CLE
14F6 120000   F     3398                     call            lotext          ;в буф2 записать ОЧИСТКА
14F9 D20B           3399                     setb            bitmem          ;нажата кнопка ПАМЯТЬ
14FB 534BEF         3400                     anl             bufind+11,#0efh ;убрать точку с 1го знакоместа
14FE 434B01         3401                     orl             bufind+11,#01   ;зажечь светодиод память
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    53

1501 120000   F     3402                     call            ind
1504 78B0           3403                     mov             r0,#level
1506 7613           3404                     mov             @r0,#13h;11h
                    3405     
1508 783D           3406     onmem11:        mov             r0,#chkl
150A 7603           3407                     mov             @r0,#03
150C 08             3408                     inc             r0
150D 76E8           3409                     mov             @r0,#0e8h       ;1000
150F 020000   F     3410                     jmp             out7            ;goto7
                    3411     
1512 020000   F     3412     rnomemk:        jmp             nomemk          ;
1515 78B0           3413     outkmem:        mov             r0,#level
1517 7600           3414                     mov             @r0,#0
1519 78B1           3415                     mov             r0,#vichR
151B 7600           3416                     mov             @r0,#0
151D C20B           3417                     clr             bitmem
151F C214           3418                     clr             bitvich
1521 C206           3419                     clr             bitvi11
1523 C211           3420                     clr             bitmenu
1525 D204           3421                     setb            bitizm
1527 78B2           3422                     mov             r0,#marker
1529 76FF           3423                     mov             @r0,#0ffh
152B 020000   F     3424                     jmp             vvod2_10
                    3425                                     
152E 020000   F     3426     offmenum:       jmp     goto7   
                    3427     
1531                3428     labelK:
1531 300BDE         3429                     jnb     bitmem,rnomemk          ;кн память (ввод и <-)
                    3430                             ;;;;;;;
1534 75B0DF         3431                     mov     p3,#0dfh;(код кнопки меню)
1537 30B7F4         3432                     jnb     p3.7,offmenum
                    3433                             ;;;;;;;
153A 75B0EF         3434                     mov     p3,#0efh
153D 30B7D5         3435                     jnb     p3.7,outkmem            ;отжатие кн память на любом уровне обработк
                             и памяти
1540 78B0           3436                     mov     r0,#level
1542 B6114A         3437                     cjne    @r0,#11h,klev1;nome11
1545 75B0FB         3438     lefmem11:       mov     p3,#0fbh
1548 E5B0           3439                     mov     a,p3
154A 20E70D         3440                     jb      acc.7,rkvvod0
154D B6110D         3441                     cjne    @r0,#11h,locle          ;<-memory
1550 7614           3442                     mov     @r0,#14h
1552 900000   F     3443     lolist: mov     dptr,#teSTAT
1555 120000   F     3444                     call    lotext           ;СТАТИСТИКА
1558 80AE           3445                     jmp     onmem11;goto7;
155A 020000   F     3446     rkvvod0:        jmp     kvvod0
                    3447     
                    3448     
155D B6120A         3449     locle:  cjne            @r0,#12h,lowr           ;<-memory
1560 7611           3450                     mov             @r0,#11h                   ;ОЧИСТКА
1562 900000   F     3451     loadcle:        mov             dptr,#teCLE
1565 120000   F     3452                     call            lotext
1568 809E           3453                     jmp             onmem11;goto7
                    3454     
156A B6130A         3455     lowr:           cjne    @r0,#13h,lostat
156D 7612           3456                     mov             @r0,#12h
156F 900000   F     3457     lowr1:  mov             dptr,#teWR                ;ЗАПИСЬ
1572 120000   F     3458                     call            lotext
1575 8091           3459                     jmp             onmem11;goto7
                    3460     
1577 7613           3461     lostat: mov             @r0,#13h
1579 900000   F     3462                     mov             dptr,#teLIST              ;ПРОСМОТР
157C 120000   F     3463                     call            lotext
157F 8087           3464                     jmp             onmem11;goto7
1581 B6141A         3465     me_14:  cjne    @r0,#14h,klev22
1584 7613           3466                     mov             @r0,#13h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    54

1586 900000   F     3467                     mov             dptr,#teLIST              ;;ПРОСМОТР
1589 120000   F     3468                     call            lotext
158C 020000   F     3469                     jmp             goto7
158F B61202         3470      klev1: cjne    @r0,#12h,klev2
1592 80B1           3471                     jmp             lefmem11
1594 B61302         3472     klev2:  cjne    @r0,#13h,klev3;11-14   klev22     ;11-13 нет
1597 80AC           3473                     jmp             lefmem11
1599 B61402         3474     klev3:  cjne    @r0,#14h,klev22;
159C 80A7           3475                     jmp             lefmem11
                    3476     ;<- vvod на более низких уровнях
159E B62117         3477     klev22: cjne    @r0,#21h,klev21
15A1 75B0FB         3478     lev220: mov             p3,#0fbh
15A4 20B76F         3479                     jb              p3.7,kgo23
15A7 B6210B         3480                     cjne    @r0,#21h,kfullr
15AA 7622           3481                     mov             @r0,#22h
15AC 900000   F     3482                     mov             dptr,#teBL
15AF 120000   F     3483                     call            lotext
15B2 020000   F     3484                     jmp             goto7;outF
15B5 020000   F     3485     kfullr: jmp             kfull                           
15B8 B6220E         3486     klev21: cjne    @r0,#22h,klev23
15BB 80E4           3487                     jmp             lev220
                    3488     
15BD 020000   F     3489     rlabL2: jmp             labL2
15C0 020000   F     3490     rlabM:  jmp             labM
15C3 020000   F     3491     ques:           jmp             out7
15C6 020000   F     3492     ddoutfr:        jmp             ddoutf
                    3493     
15C9 B623F4         3494     klev23: cjne    @r0,#23h,rlabM
15CC 75B0FB         3495                     mov     p3,#0fbh
15CF 30B7F1         3496                     jnb             p3.7,ques;errr labL2
15D2 75B0F7         3497                     mov     p3,#0f7h
15D5 20B7EE         3498                     jb              p3.7,ddoutfr
                    3499                                     ;       считать с индикатора  
15D8 C3             3500                     clr                     c
15D9 E547           3501                     mov             a,bufind+7      
15DB 9430           3502                     subb            a,#30h
15DD B40002         3503                     cjne            a,#0,chaibl
15E0 7401           3504                     mov             a,#1                    ;номера блоков 1..4
15E2 F538           3505     chaibl: mov             nblok,a
                    3506                                      ;очистить блок памяти с набранным номером
                    3507                                     ;150h..1000h( 150h+nblok*320h)
15E4 120000   F     3508                     call            adrblok         ;dptr-
15E7 79B8           3509                     mov                     r1,#work                ;обьем блока
15E9 7703           3510                     mov                     @r1,#03
15EB 09             3511                     inc                     r1
15EC 7720           3512                     mov                     @r1,#20h                        ;320h
15EE                3513     goonoff:
15EE E4             3514                     clr                     a
15EF F0             3515                     movx            @dptr,a
15F0 A3             3516                     inc                     dptr
15F1 79B9           3517                     mov                     r1,#work+1
15F3 120000   F     3518                     call            chminus
15F6 78B8           3519                     mov             r0,#work
15F8 E6             3520                     mov             a,@r0
15F9 30E7F2         3521                     jnb             acc.7,goonoff
15FC C20B           3522                     clr     bitmem  ;сбр признак памяти 
15FE D204           3523                     setb    bitizm
                    3524                     ;после очистки блока сохраняем в saven_bl 
                    3525                     ;адрес второго с конца измерения потому добавляем 8
1600 120000   F     3526                     call            adrblok;dptr-начало блока
                    3527                     ;       mov                     a,dpl
                    3528                     ;       add                     a,#8
                    3529                     ;       mov                     dpl,a
                    3530                     ;       mov                     a,dph
                    3531                     ;       addc            a,#0
                    3532                     ;       mov                     dph,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    55

1603 120000   F     3533                     call            save_hl;подготовка записи в начало блока
1606 78B2           3534                     mov             r0,#marker
1608 76FF           3535                     mov             @r0,#0ffh
160A 020000   F     3536                     jmp                     vvod2_10
160D 020000   F     3537                     jmp     goto7
                    3538     
1610 020000   F     3539     rddoutf:        jmp             ddoutf
1613 020000   F     3540     rgo23no:        jmp             go23no
                    3541     
                    3542     ;vvod   БЛОК->БЛОК 00           
1616 75B0F7         3543     kgo23:  mov     p3,#0f7h
1619 20B7F4         3544                     jb              p3.7,rddoutf
161C B621F4         3545                     cjne    @r0,#21h,rgo23no
                    3546                     ;очистить память 150..dd0h
                    3547                             ;1й блок
161F 900150         3548                     mov                     dptr,#150h
1622 79B8           3549                     mov                     r1,#work                ;обьем блока
1624 7703           3550                     mov                     @r1,#03
1626 09             3551                     inc                     r1
1627 7720           3552                     mov                     @r1,#20h                        ;320h
1629                3553     gooff1:
1629 E4             3554                     clr                     a
162A F0             3555                     movx            @dptr,a
162B A3             3556                     inc                     dptr
162C 79B9           3557                     mov                     r1,#work+1
162E 120000   F     3558                     call            chminus
1631 78B8           3559                     mov             r0,#work
1633 E6             3560                     mov             a,@r0
1634 30E7F2         3561                     jnb             acc.7,gooff1
1637 900150         3562                     mov                     dptr,#150h;начало 1 го блока
                    3563                     ;после очистки блока сохраняем в saven_bl 
                    3564                     ;адрес второго с конца измерения потому добавляем 8
                    3565     ;                               call            save_hl;подготовка записи в начало блока
                    3566     ;2й блок
163A 900470         3567                     mov                     dptr,#470h
163D 79B8           3568                     mov                     r1,#work                ;обьем блока
163F 7703           3569                     mov                     @r1,#03
1641 09             3570                     inc                     r1
1642 7720           3571                     mov                     @r1,#20h                        ;320h
1644                3572     gooff2:
1644 E4             3573                     clr                     a
1645 F0             3574                     movx            @dptr,a
1646 A3             3575                     inc                     dptr
1647 79B9           3576                     mov                     r1,#work+1
1649 120000   F     3577                     call            chminus
164C 78B8           3578                     mov             r0,#work
164E E6             3579                     mov             a,@r0
164F 30E7F2         3580                     jnb             acc.7,gooff2
1652 900470         3581                     mov                     dptr,#470h;начало 2 го блока
                    3582     ;                       call            save_hl;подготовка записи в начало блока
                    3583     ;3й блок
1655 900790         3584                     mov                     dptr,#790h
1658 79B8           3585                     mov                     r1,#work                ;обьем блока
165A 7703           3586                     mov                     @r1,#03
165C 09             3587                     inc                     r1
165D 7720           3588                     mov                     @r1,#20h                        ;320h
                    3589     
165F                3590     gooff3:
165F E4             3591                     clr                     a
1660 F0             3592                     movx            @dptr,a
1661 A3             3593                     inc                     dptr    
1662 79B9           3594                     mov                     r1,#work+1
1664 120000   F     3595                     call            chminus
1667 78B8           3596                     mov             r0,#work
1669 E6             3597                     mov             a,@r0
166A 30E7F2         3598                     jnb             acc.7,gooff3
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    56

166D 900790         3599                     mov                     dptr,#790h;начало 3 го блока
                    3600                     ;после очистки блока сохраняем в saven_bl 
                    3601                     ;адрес второго с конца измерения потому добавляем 8
                    3602                     ;       call            save_hl;подготовка записи в начало блока
                    3603     ;4й блок
1670 900AB0         3604                     mov                     dptr,#0ab0h
1673 79B8           3605                     mov                     r1,#work                ;обьем блока
1675 7703           3606                     mov                     @r1,#03h
1677 09             3607                     inc                     r1
1678 7720           3608                     mov                     @r1,#20h                        ;320h
167A                3609     gooff4:
167A E4             3610                     clr                     a
167B F0             3611                     movx            @dptr,a
167C A3             3612                     inc                     dptr
167D 79B9           3613                     mov                     r1,#work+1
167F 120000   F     3614                     call            chminus
1682 78B8           3615                     mov             r0,#work
1684 E6             3616                     mov             a,@r0
1685 30E7F2         3617                     jnb             acc.7,gooff4
1688 900AB0         3618                     mov                     dptr,#0ab0h;начало 4 го блока
                    3619                     ;после очистки блока сохраняем в saven_bl 
                    3620                     ;адрес второго с конца измерения потому добавляем 8
                    3621     ;                       call            save_hl;подготовка записи в начало блока
                    3622                             ;;;;26.02.07
168B E538           3623                     mov             a,nblok
168D B40117         3624                     cjne    a,#1,cl_hl1
1690 900150         3625                     mov             dptr,#150h
1693 79D3           3626                     mov             r1,#saven_bl
1695 E583           3627     cl_hl:  mov             a,dph
1697 F7             3628                     mov             @r1,a
1698 09             3629                     inc             r1
1699 E582           3630                     mov             a,dpl
169B F7             3631                     mov             @r1,a
                    3632                     ;;;;;;;;
169C C20B           3633                     clr             bitmem
169E D204           3634                     setb    bitizm
16A0 78B2           3635                     mov             r0,#marker
16A2 76FF           3636                     mov             @r0,#0ffh
16A4 020000   F     3637                     jmp                     vvod2_10;jmp            goto7
16A7 B40207         3638     cl_hl1: cjne            a,#2,cl_hl2
16AA 900470         3639                     mov                     dptr,#470h
16AD 79C0           3640                     mov             r1,#saven_bl2
16AF 80E4           3641                     jmp                     cl_hl
                    3642     
16B1 B40307         3643     cl_hl2: cjne            a,#3,cl_hl3
16B4 900790         3644                     mov                     dptr,#790h
16B7 79C2           3645                     mov             r1,#saven_bl3
16B9 80DA           3646                     jmp                     cl_hl
                    3647     
16BB 900AB0         3648     cl_hl3: mov                     dptr,#0ab0h
16BE 79D9           3649                     mov             r1,#saven_bl4
16C0 80D3           3650                     jmp                     cl_hl
                    3651     
16C2 7623           3652     go23no: mov             @r0,#23h
16C4 753B08         3653                     mov                     movrig,#8
16C7 753A07         3654                     mov             movleft,#7
16CA 8056           3655                     jmp             loblok;БЛОК 00
16CC 7621           3656     kfull:  mov             @r0,#21h
16CE 8025           3657                     jmp             gofull
                    3658                             
                    3659                                             
16D0 020000   F     3660     nomemk: jmp             labelS                  ;нажат ввод меню
                    3661                             
16D3 75B0FB         3662     nome11: mov             p3,#0fbh
16D6 E5B0           3663                     mov             a,p3
16D8 20E70D         3664                     jb              acc.7,kvvod0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    57

16DB B61205         3665                     cjne            @r0,#12h,mem12no        
16DE 7611           3666                     mov             @r0,#11h                ;ОЧИСТКА
16E0 020000   F     3667                     jmp              loadcle
                    3668     
16E3                3669     mem12no:        ;cjne           @r0,#13h,lowr           
16E3 7612           3670                     mov             @r0,#12h                   ;
16E5 020000   F     3671                     jmp             lowr1                     ;ЗАПИСЬ
16E8 75B0F7         3672     kvvod0: mov             p3,#0f7h                        ;knopka vvod
16EB 20B710         3673                     jb              p3.7,ddoutf
16EE 78B0           3674                     mov             r0,#level
16F0 B6112A         3675                     cjne            @r0,#11h,mvv11
16F3 7621           3676                     mov             @r0,#21h                ;ПОЛНАЯ
16F5 900000   F     3677     gofull: mov             dptr,#teFULL
16F8 120000   F     3678                     call            lotext
16FB 020000   F     3679                     jmp             onmem11;mlabL2  ;<-????????/
                    3680     
16FE                3681     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3682     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3683     ;т е сохранить ее в ячейке для мигания в противном случае
                    3684     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3685     ;       знакоместа
16FE 78B2           3686                     mov             r0,#marker
1700 7440           3687                     mov             a,#bufind
1702 26             3688                     add             a,@r0                   ;a=bufind+marker
1703 F9             3689                     mov             r1,a
1704 19             3690                     dec             r1      ;       inc             r1
1705 873C           3691                     mov             savba,@r1
1707 C219           3692                     clr             bitmig
                    3693     ;;;;;;;;;;;;;;;;
1709 78B2           3694                     mov             r0,#marker      ;курсор слева   ?
170B E53A           3695                     mov             a,movleft
170D C3             3696                     clr             c
170E 96             3697                     subb            a,@r0
170F 7006           3698                     jnz             left21
1711 E53B           3699                     mov             a,movrig;уст в правую позицию
1713 F6             3700                     mov             @r0,a
                    3701     
1714 020000   F     3702                     jmp             goto7                                            
1717 E53A           3703     left21: mov             a,movleft;уст в левую позицию
1719 F6             3704                     mov             @r0,a   
171A 020000   F     3705                     jmp             goto7
                    3706     
                    3707     
171D B61215         3708     mvv11:  cjne            @r0,#12h,mvv12
1720 7631           3709                     mov             @r0,#31h
1722 900000   F     3710     loblok: mov             dptr,#teBL0;БЛОК 0
1725 120000   F     3711                     call            lotext
1728 E538           3712                     mov             a,nblok
172A 2430           3713                     add             a,#30h
172C F547           3714                     mov             bufind+7,a
172E 78B2           3715                     mov             r0,#marker
1730 7607           3716                     mov             @r0,#7
                    3717                                     ;mov            movrig,#9
                    3718                                     ;mov            movleft,#6
1732 020000   F     3719                     jmp             onmem11
1735 B61411         3720     mvv12:  cjne            @r0,#14h,bl_li
1738 7661           3721                     mov             @r0,#61h
173A 900000   F     3722                     mov             dptr,#teMIN;
173D 120000   F     3723                     call    lotext
1740 120000   F     3724                     call    vichmin
1743 120000   F     3725                     call    z_1s
1746 020000   F     3726                     jmp             onmem11
                    3727     
1749 7641           3728     bl_li:  mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
174B 80D5           3729                     jmp             loblok
                    3730     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    58

                    3731     
                    3732     
174D                3733     mlabL2:         ;jmp            labL2
                    3734                                             ;  уст курсор в правую позицию 
                    3735                                     ;                               29.12.06
                    3736     ;;;;;;;;;;;;;;;;;;
                    3737     ;необходимо не портить цифру в следуюем справа знакоместе
                    3738     ;т е сохранить ее в ячейке для мигания в противном случае
                    3739     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3740     ;       знакоместа
174D 78B2           3741                     mov             r0,#marker
174F 7440           3742                     mov             a,#bufind
1751 26             3743                     add             a,@r0                   ;a=bufind+marker
1752 F9             3744                     mov             r1,a
1753 09             3745                     inc             r1
1754 873C           3746                     mov             savba,@r1
                    3747     ;;;;;;;;;;;;;;;;
1756 78B2           3748                     mov             r0,#marker      ;курсор справа  ?
1758 E53B           3749                     mov             a,movrig
175A C3             3750                     clr             c
175B 96             3751                     subb    a,@r0
175C 6006           3752                     jz         equ2l
175E E53B           3753                     mov             a,movrig;уст в правую позицию
1760 F6             3754                     mov             @r0,a
                    3755     ;                       lool
1761 020000   F     3756                     jmp             goto7                                            
1764 E53A           3757     equ2l:  mov             a,movleft;уст в левую позицию
1766 F6             3758                     mov             @r0,a   
1767 020000   F     3759                     jmp             goto7
                    3760                     
176A 020000   F     3761     rnom31: jmp                     nom31
176D B631FA         3762     labM:           cjne    @r0,#31h,rnom31
1770 75B0FB         3763                     mov             p3,#0fbh
1773 30B7D7         3764                     jnb             p3.7,mlabL2
1776 75B0F7         3765                     mov             p3,#0f7h
1779 20B782         3766                     jb              p3.7,ddoutf
                    3767                                
177C 7632           3768                     mov             @r0,#32h                        ;ИНТ 0000
                    3769                                     ;       считать с индикатора  
177E C3             3770     blokvv: clr             c
177F E547           3771                     mov             a,bufind+7      
1781 9430           3772                     subb            a,#30h
1783 B40002         3773                     cjne            a,#0,blokvvc
1786 7401           3774                     mov             a,#1                    ;номера блоков 1..4
                    3775     
1788 F538           3776     blokvvc:        mov             nblok,a
178A 900000   F     3777                     mov             dptr,#teINT;ИНТ 0000c
178D 120000   F     3778                     call            lotext
1790 78CE           3779                     mov             r0,#interva+1
1792 7952           3780                     mov             r1,#abin+3
1794 E6             3781                     mov             a,@r0
1795 F7             3782                     mov             @r1,a
1796 18             3783                     dec                     r0
1797 19             3784                     dec                     r1
1798 E6             3785                     mov             a,@r0
1799 F7             3786                     mov             @r1,a
179A 19             3787                     dec             r1
179B E4             3788                     clr             a
179C F7             3789                     mov             @r1,a
179D 19             3790                     dec             r1
179E F7             3791                     mov             @r1,a
                    3792                                                                             
179F 7853           3793                     mov             r0,#adec
17A1 7952           3794                     mov             r1,#abin+3      ;hex->10
17A3 120000   F     3795                     call    bindec
                    3796                                     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    59

17A6 785C           3797                     mov             r0,#adec+9;разместить в буфер индикации
17A8 7948           3798                     mov             r1,#bufind+8
17AA 7F04           3799                     mov             r7,#4
17AC E6             3800     bloin:  mov             a,@r0
17AD 2430           3801                     add             a,#30h
17AF F7             3802                     mov             @r1,a
17B0 19             3803                     dec             r1
17B1 18             3804                     dec             r0
17B2 DFF8           3805                     djnz    r7,bloin
17B4 78B2           3806                     mov             r0,#marker
17B6 7605           3807                     mov             @r0,#5
17B8 753B08         3808                     mov             movrig,#8
17BB 753A05         3809                     mov             movleft,#5
17BE 789A           3810                     mov             r0,#parT
17C0 B60609         3811                     cjne            @r0,#6,innot6
17C3 534BF0         3812                     anl             bufind+11,#0f0h;after 5- 0.000c
17C6 434B04         3813                     orl             bufind+11,#04h
                    3814                             
17C9 020000   F     3815                     jmp             goto7
17CC B60309         3816     innot6: cjne            @r0,#3,innot3
17CF 534BF0         3817                     anl             bufind+11,#0f0h;after 7- 000.0c
17D2 434B20         3818                     orl             bufind+11,#20h
                    3819                                     ;call           ind
17D5 020000   F     3820                     jmp             out7;goto7
17D8 C3             3821     innot3: clr             c
17D9 7403           3822                     mov             a,#3
17DB 96             3823                     subb            a,@r0
17DC 5009           3824                     jnc             innot1_2
17DE 534BF0         3825                     anl             bufind+11,#0f0h;after 6- 00.00c
17E1 434B40         3826                     orl             bufind+11,#40h
17E4 020000   F     3827                     jmp             goto7
                    3828     
17E7                3829     innot1_2:
17E7 534B0F         3830                     anl             bufind+11,#0fh;0h;0000c
17EA C219           3831                     clr             bitmig
                    3832                                     ;call           ind             нет необходимости пришет пр
                             обел         
17EC 020000   F     3833     rgoto7: jmp        goto7;outF
                    3834     
17EF B63276         3835     nom31:  cjne            @r0,#32h,nom32
17F2 75B0FB         3836                     mov             p3,#0fbh
17F5 20B71F         3837                     jb              p3.7,vvinte             ;ввод интервал;no31n
                    3838                                     
17F8                3839     lefcur:         ;;кн <- 32 нач блок 000
                    3840     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3841     ;т е сохранить ее в ячейке для мигания в противном случае
                    3842     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3843     ;       знакоместа
17F8 C219           3844                     clr             bitmig
17FA 78B2           3845                     mov             r0,#marker;нажата кн <- при вводе цифр нач блок 000
17FC 7440           3846                     mov             a,#bufind
17FE 26             3847                     add             a,@r0                   ;a=bufind+marker
17FF F9             3848                     mov             r1,a
1800 19             3849                     dec             r1;;;;;;;;;;;
1801 873C           3850                     mov             savba,@r1
                    3851                                             
1803 78B2           3852                     mov             r0,#marker      ;курсор слева?
1805 E53A           3853                     mov             a,movleft
1807 C3             3854                     clr             c
1808 96             3855                     subb    a,@r0
1809 7006           3856                     jnz        noequ2
180B E53B           3857                     mov             a,movrig
180D F6             3858                     mov             @r0,a;уст в крайнюю правую позицию
180E 020000   F     3859                     jmp             goto7
1811 120000   F     3860     noequ2: call    marle;сдвинуть курсор в  лево на 1позицию       
1814 020000   F     3861                     jmp        goto7        
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    60

                    3862                                                                       
                    3863     
                    3864     ;;;;;;;;;;;;;;;;;;
1817                3865     vvinte:         ;ввод интервал                          
1817 75B0F7         3866     no31n:  mov             p3,#0f7h
181A 20B7CF         3867                     jb              p3.7,rgoto7
181D 7633           3868                     mov             @r0,#33h
                    3869                                     ;считать с индикатора введенный интервал
181F 7F0A           3870                     mov             r7,#10
1821 7853           3871                     mov             r0,#adec
1823 120000   F     3872                     call    clearN
1826 120000   F     3873                     call    upak4                   
1829 784F           3874                     mov             r0,#abin
182B 7953           3875                     mov             r1,#adec                        ;мл         ст
182D 120000   F     3876                     call    decbin                  ;abin..abin+3 (hex)
1830 794F           3877                     mov             r1,#abin
1832 78CE           3878                     mov             r0,#interva+1
1834 E7             3879                     mov             a,@r1
1835 F6             3880                     mov             @r0,a
1836 18             3881                     dec             r0
1837 09             3882                     inc             r1
1838 E7             3883                     mov             a,@r1
1839 F6             3884                     mov             @r0,a
                    3885                                     
183A 78D5           3886                     mov             r0,#volume                      ;объем блока
183C 7600           3887                     mov             @r0,#0
183E 08             3888                     inc             r0
183F 76C7           3889                     mov             @r0,#0c7h
1841 120000   F     3890                     call            adrblok;dptr
1844 120000   F     3891                     call            save_hl;1я ячейка блока
1847 78B2           3892                     mov             r0,#marker
1849 76FF           3893                     mov             @r0,#0ffh
184B D204           3894                     setb            bitizm
184D C20B           3895                     clr             bitmem
184F 789A           3896     vvod2_10:       mov             r0,#parT
1851 B6050C         3897                     cjne            @r0,#5,no10msv
1854 900000   F     3898                     mov                     dptr,#te10ms
1857 120000   F     3899     t2msme: call            lotext
                    3900                                             
185A 120000   F     3901                     call            ind
185D 020000   F     3902     no2msv:         jmp        goto7;
1860 B606FA         3903     no10msv:        cjne            @r0,#6,no2msv   
1863 900000   F     3904                     mov                     dptr,#te2ms
1866 80EF           3905                     jmp                     t2msme
                    3906     
                    3907     
                    3908     
1868 B6332B         3909     nom32:  cjne            @r0,#33h,nom33
186B 75B0FB         3910                     mov             p3,#0fbh
186E 30B787         3911                     jnb             p3.7,lefcur
1871 75B0F7         3912                     mov             p3,#0f7h
1874 20B7E6         3913                     jb              p3.7,no2msv;rgoto7
                    3914                     ;запомнить номер ячейки конца блока
1877 7634           3915                     mov     @r0,#34h
1879 7F0A           3916     INTn:           mov             r7,#10
187B 7853           3917                     mov             r0,#adec
187D 120000   F     3918                     call    clearN
1880 120000   F     3919                     call    upak3                   
1883 784F           3920                     mov             r0,#abin
1885 7953           3921                     mov             r1,#adec                        ;мл         ст
1887 120000   F     3922                     call    decbin                  ;abin..abin+3 (hex)
188A 120000   F     3923                     call    loadr2                  ;r2..r5
188D 120402         3924                     call    altof                   ;r2..r5->int
1890 020000   F     3925     dgoto7: jmp             goto7
                    3926     
1893 020000   F     3927     rlefcur:        jmp             lefcur
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    61

                    3928     
1896 B63464         3929     nom33:  cjne            @r0,#34h,labelP
1899 75B0FB         3930                     mov             p3,#0fbh
189C 30B7F4         3931                     jnb             p3.7,rlefcur
189F 75B0F7         3932                     mov             p3,#0f7h
18A2 20B7EB         3933                     jb              p3.7,dgoto7
18A5 7635           3934                     mov             @r0,#35h
18A7 78B2           3935                     mov             r0,#marker
18A9 76FF           3936                     mov             @r0,#0ffh
                    3937                     ;T1<-число на индикаторе
                    3938                     ;vvod КОН БЛ 000
18AB 78CF           3939                     mov             r0,#chbuf               ;счетчик периода загрузки в буфер и
                              интерфейс
18AD 7630           3940                     mov             @r0,#30h  
18AF C20B           3941                     clr             bitmem
18B1 D204           3942                     setb            bitizm;;;;      
18B3 020000   F     3943                     jmp        goto7
18B6 020000   F     3944     vodm11_15:      jmp             vvodm11_15
18B9 020000   F     3945     me11_15de:      jmp             me11_15dec
18BC 020000   F     3946     moutkmem:       jmp             outkmem
                    3947     
18BF 020000   F     3948     nmem_menu:      jmp             out7                    ;нажата память в режиме меню
                    3949     ;обработка кнопки меню ввод
18C2 301138         3950     labelS: jnb                     bitmenu,labelP
18C5 75B0EF         3951                     mov                     p3,#0efh
18C8 30B7F4         3952                     jnb                     p3.7,nmem_menu
18CB 75B0DF         3953                     mov                     p3,#0dfh
18CE 30B7EB         3954                     jnb                     p3.7,moutkmem
18D1 78B1           3955                     mov                     r0,#vichR
18D3 7415           3956                     mov                     a,#15h
18D5 C3             3957                     clr                     c
18D6 96             3958                     subb            a,@r0
18D7 4021           3959                     jc              rme21_23
                    3960                             
18D9 75B0FB         3961                     mov             p3,#0fbh
18DC 20B7D7         3962                     jb              p3.7,vodm11_15
18DF 78B1           3963                     mov             r0,#vichR
18E1 B611D5         3964                     cjne            @r0,#11h,me11_15de;<-
18E4 7615           3965                     mov             @r0,#15h
18E6 900000   F     3966                     mov             dptr,#teKALIB
18E9 120000   F     3967                     call            lotext
18EC 020000   F     3968                     jmp             onmem11
18EF C211           3969     menuon: clr             bitmenu                 ;off menu
18F1 D204           3970                     setb            bitizm
                    3971     
18F3 78B1           3972                     mov             r0,#vichR
18F5 7600           3973                     mov             @r0,#0
18F7 020000   F     3974                     jmp             onmem11
                    3975     
                    3976                                             ;;;;;
                    3977             
18FA 020000   F     3978     rme21_23:       jmp             me21_23 
                    3979                             
                    3980     ;режим просмотра
18FD B64130         3981     labelP:         cjne            @r0,#41h,govvlist
1900 7642           3982                     mov             @r0,#42h
                    3983                             ;       считать с индикатора  
1902 C3             3984                     clr             c
1903 E547           3985                     mov             a,bufind+7      
1905 9430           3986                     subb            a,#30h
1907 B40002         3987                     cjne            a,#0,chaipr
190A 7401           3988                     mov             a,#1
190C F538           3989     chaipr:         mov             nblok,a
190E 900000   F     3990                     mov             dptr,#teCH;ОТСЧЕТ 000
1911 120000   F     3991                     call            lotext
1914 534BEF         3992                     anl             bufind+11,#0efh;убрать точку с 1го знакоместа
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    62

1917 78B2           3993                     mov             r0,#marker
1919 7607           3994                     mov             @r0,#7
191B 753B09         3995                     mov             movrig,#9
191E 753A07         3996                     mov             movleft,#7
1921 120000   F     3997                     call            z_1s
1924 020000   F     3998                     jmp        goto7;outF
1927 020000   F     3999     label43:        jmp             label7
                    4000     
192A 020000   F     4001     rlist_43:       jmp                     list_43                                 
192D 020000   F     4002     mlabL2r:        jmp                     mlabL2
1930 B642F7         4003     govvlist:       cjne            @r0,#42h,rlist_43       ;?button
1933 75B0FB         4004                     mov                     p3,#0fbh
1936 30B7F4         4005                     jnb                     p3.7,mlabL2r;кн <- ОТСЧЕТ 000
1939 75B0F7         4006                     mov                     p3,#0f7h
193C 20B7E8         4007                     jb                      p3.7,label43
193F 7643           4008                     mov                     @r0,#43h;vvod 
1941 78B2           4009                     mov                     r0,#marker
1943 76FF           4010                     mov                     @r0,#0ffh
1945 7F0A           4011                     mov             r7,#10
1947 7853           4012                     mov             r0,#adec
1949 120000   F     4013                     call    clearN
194C 120000   F     4014                     call    upak3                   
194F 784F           4015                     mov             r0,#abin
1951 7953           4016                     mov             r1,#adec                        ;мл         ст
1953 120000   F     4017                     call    decbin                  ;abin..abin+3 (hex)
1956 120000   F     4018                     call    loadr2                  ;r2..r5
1959 ED             4019                     mov             a,r5                            ;сохр номер лемента
195A F537           4020                     mov             nelem,a
195C 120402         4021                     call    altof                   ;r2..r5->int
195F 900000   F     4022                     mov             dptr,#ch_1;
1962 120000   F     4023                     call    ldc_ltemp                       ;r8..r11
1965 1201D1         4024                     call    flsub
1968 900000   F     4025                     mov             dptr,#ch_4;
196B 120000   F     4026                     call    ldc_ltemp                       ;r8..r11
196E 120203         4027                     call    flmul                           ;(n(номер отсчета)-1)*4+адр нач бло
                             ка
1971 120343         4028                     call            ftol                    ;r2..r5->hex
1974 C002           4029                     push            rr2
1976 C003           4030                     push            rr3
1978 C004           4031                     push            rr4
197A C005           4032                     push            rr5
197C 120000   F     4033                     call            adrblok;dptr-
197F D005           4034                     pop                     rr5
1981 D004           4035                     pop                     rr4
1983 D003           4036                     pop                     rr3
1985 D002           4037                     pop                     rr2
1987 79D8           4038                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес внешн озу введе
                             нного лемента
1989 E582           4039                     mov                     a,dpl
198B 2D             4040                     add                     a,r5
198C F582           4041                     mov                     dpl,a
198E F7             4042                     mov                     @r1,a           ;low
198F E583           4043                     mov                     a,dph
1991 3C             4044                     addc            a,r4
1992 F583           4045                     mov                     dph,a
1994 19             4046                     dec                     r1
1995 F7             4047                     mov                     @r1,a                   ;high
1996                4048     li42_43:
1996 120000   F     4049                     call            reA3_X          ;r2..r5/выдать рез из внешн пам на индикато
                             р
1999 900000   F     4050                     mov             dptr,#ch10
199C 120000   F     4051                     call    ldc_ltemp
199F 120000   F     4052                     call    zdiv                    ;form4=invertif <0; divide
19A2 120000   F     4053                     call    maform          ;setb/clr       znmat
19A5 784F           4054                     mov             r0,#abin
19A7 120000   F     4055                     call    saver2          ;r2..r5-> @r0..@r0+3
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    63

19AA 7853           4056                     mov             r0,#adec
19AC 7952           4057                     mov             r1,#abin+3      ;hex->10
19AE 120000   F     4058                     call    bindec
                    4059                             
19B1 785C           4060                     mov             r0,#adec+9;разместить в буфер индикации
19B3 7945           4061                     mov             r1,#bufind+5
19B5 7F07           4062                     mov             r7,#7
19B7 E6             4063     ch43:           mov             a,@r0
19B8 2430           4064                     add             a,#30h
19BA F7             4065                     mov             @r1,a
19BB 19             4066                     dec             r1
19BC 18             4067                     dec             r0
19BD DFF8           4068                     djnz    r7,ch43
19BF 7847           4069                     mov             r0,#bufind+7
19C1 762D           4070                     mov             @r0,#2dh          ;-2..-9
19C3 7840           4071                     mov             r0,#bufind
19C5 762B           4072                     mov             @r0,#2bh
19C7 300202         4073                     jnb             znmat,nozzmi43;bitznak,nozzmi
19CA 762D           4074                     mov             @r0,#2dh        ;'-'
                    4075     
19CC E538           4076     nozzmi43:       mov             a,nblok
19CE B40104         4077                     cjne    a,#1,nozzmi1            
19D1 7934           4078                     mov             r1,#sadiap;diap
19D3 8010           4079                     jmp             nozzbl
19D5 B40204         4080     nozzmi1:        cjne    a,#2,nozzmi2            
19D8 7932           4081                     mov             r1,#sadiap2;diap
19DA 8009           4082                     jmp             nozzbl
19DC B40304         4083     nozzmi2:        cjne    a,#3,nozzmi3            
19DF 7931           4084                     mov             r1,#sadiap3;diap
19E1 8002           4085                     jmp             nozzbl
                    4086     
19E3 7930           4087     nozzmi3: mov            r1,#sadiap4;diap
19E5 7848           4088     nozzbl:  mov            r0,#bufind+8
19E7 E7             4089                                     mov             a,@r1
19E8 B40808         4090                     cjne    a,#8,nodi8_43
19EB 7630           4091                     mov             @r0,#30h                 ;10-10
19ED 18             4092                     dec             r0
19EE 7663           4093                     mov             @r0,#63h;31h
19F0 08             4094                     inc             r0
19F1 800E           4095                     jmp             see_l43
                    4096     
19F3 B40908         4097     nodi8_43:       cjne    a,#9,nodi9_43
19F6 7631           4098                     mov             @r0,#31h           ;10-11
19F8 18             4099                     dec             r0
19F9 7663           4100                     mov             @r0,#63h;31h
19FB 08             4101                     inc             r0
19FC 8003           4102                     jmp             see_l43
                    4103     
19FE 2432           4104     nodi9_43:       add             a,#32h
1A00 F6             4105                     mov             @r0,a;
1A01 08             4106     see_l43:        inc             r0
1A02 7641           4107                     mov             @r0,#"A";"E";
                    4108                     ;       inc             r0
                    4109                     ;       mov             @r0,#00h ;=feh в нач установе для поджига всех сегм
                    4110                     ;       inc             r0;             mov             bufind+11
                    4111                     ;       mov             @r0,#0d0h               ;bufind+11.4 точка после пе
                             рвой цифры
1A04 434B10         4112                     orl             bufind+11,#10h
1A07 120000   F     4113     out43:  call            ind
1A0A 120000   F     4114                     call            z_1s
1A0D 020000   F     4115                     jmp             out7                                    
                    4116     
                    4117                     ;;;;;;;;        
1A10 783D           4118     label7: mov             r0,#chkl
1A12 7603           4119                     mov             @r0,#3
1A14 08             4120                     inc             r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    64

1A15 76E8           4121                     mov             @r0,#0e8h               ;1000
1A17 020000   F     4122                     jmp             out7;
1A1A B64352         4123     list_43:        cjne    @r0,#43h,noli_43
1A1D 75B0FB         4124                     mov             p3,#0fbh                ;43h <-
1A20 20B70B         4125                     jb              p3.7,vvod43             ;vvod
1A23 C20B           4126                     clr             bitmem
1A25 D204           4127                     setb    bitizm
1A27 78B2           4128                     mov             r0,#marker
1A29 76FF           4129                     mov             @r0,#0ffh
1A2B 020000   F     4130                     jmp             goto7;6.03.07;label7;по кн <- выход из просмотра
                    4131     
1A2E 7644           4132     vvod43: mov             @r0,#44h
1A30 E537           4133                     mov             a,nelem;вывод порядкового номера в блоке 
1A32 04             4134                     inc             a
1A33 F552           4135                     mov             abin+3,a
                    4136                                                     
1A35 F537           4137                     mov             nelem,a
1A37 E4             4138                     clr             a
1A38 F551           4139                     mov             abin+2,a
1A3A F550           4140                     mov             abin+1,a
1A3C F54F           4141                     mov             abin,a
                    4142                                             
1A3E 7853           4143                     mov             r0,#adec
1A40 7952           4144                     mov             r1,#abin+3      ;hex->10
1A42 120000   F     4145                     call    bindec
1A45 7840           4146                     mov             r0,#bufind;почистить индикатор
1A47 7F0A           4147                     mov             r7,#10
1A49 7420           4148                     mov             a,#20h
1A4B F6             4149     cle20:  mov             @r0,a
1A4C 08             4150                     inc             r0
1A4D DFFC           4151                     djnz    r7,cle20
                    4152                             ;;;;;;
1A4F 900000   F     4153                     mov             dptr,#teCH;ОТСЧЕТ 000
1A52 120000   F     4154                     call            lotext
1A55 534BEF         4155                     anl             bufind+11,#0efh;убрать точку с 1го знакоместа
1A58 785C           4156                     mov             r0,#adec+9;разместить в буфер индикации
1A5A 7949           4157                     mov             r1,#bufind+9
1A5C 7F03           4158                     mov             r7,#3
1A5E E6             4159     ch43_42:        mov             a,@r0
1A5F 2430           4160                     add             a,#30h
1A61 F7             4161                     mov             @r1,a
1A62 19             4162                     dec             r1
1A63 18             4163                     dec             r0
1A64 DFF8           4164                     djnz    r7,ch43_42
1A66 120000   F     4165                     call            ind
1A69 120000   F     4166                     call            z_1s
1A6C 020000   F     4167                     jmp             out7
1A6F B64419         4168     noli_43:        cjne            @r0,#44h,vvosta
1A72 7643           4169                     mov                     @r0,#43h
1A74 79D8           4170                     mov                     r1,#copy_hl+1;saven_bl+1
1A76 E7             4171                     mov                     a,@r1
1A77 F582           4172                     mov                     dpl,a
1A79 19             4173                     dec                     r1
1A7A E7             4174                     mov                     a,@r1;high
1A7B F583           4175                     mov                     dph,a
1A7D A3             4176                     inc                     dptr
1A7E A3             4177                     inc                     dptr
1A7F A3             4178                     inc                     dptr
1A80 A3             4179                     inc                     dptr
1A81 E583           4180                     mov                     a,dph
1A83 F7             4181                     mov                     @r1,a
1A84 09             4182                     inc                     r1
1A85 E582           4183                     mov                     a,dpl
1A87 F7             4184                     mov                     @r1,a                           ;сохр адр внешн озу
1A88 020000   F     4185                     jmp                     li42_43;вывод значения следующего в блоке
                    4186     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    65

1A8B B66111         4187     vvosta: cjne            @r0,#61h,vvostad
1A8E 7662           4188                     mov                     @r0,#62h
1A90 900000   F     4189                     mov                     dptr,#teMAX;
1A93 120000   F     4190                     call            lotext
1A96 120000   F     4191                     call            vichmax
1A99 120000   F     4192                     call            z_05s;z_1s
1A9C 020000   F     4193                     jmp             goto7
                    4194     
1A9F B66211         4195     vvostad:        cjne            @r0,#62h,rousta
1AA2 7663           4196                     mov                     @r0,#63h
1AA4 900000   F     4197                     mov             dptr,#teMid;
1AA7 120000   F     4198                     call    lotext
1AAA 120000   F     4199                     call            vichmean
1AAD 120000   F     4200                     call            z_05s
1AB0 020000   F     4201                     jmp             goto7
                    4202     
1AB3 B6630E         4203     rousta: cjne            @r0,#63h,rousta1
1AB6 7661           4204                     mov                     @r0,#61h
1AB8 900000   F     4205                     mov             dptr,#teMin;
1ABB 120000   F     4206                     call    lotext
1ABE 120000   F     4207                     call            vichmin
1AC1 120000   F     4208                     call            z_05s
1AC4 020000   F     4209     rousta1:        jmp             goto7
                    4210     
1AC7 020000   F     4211     rLABELP:        jmp             LABELP
1ACA 78B1           4212     vvodm11_15:     mov             r0,#vichR;vvod
1ACC 75B0F7         4213                     mov             p3,#0f7h
1ACF 20B7F5         4214                     jb              p3.7,rLABELP;????
                    4215                                     
1AD2 B61115         4216                     cjne            @r0,#11h,tome21
1AD5 7621           4217                     mov             @r0,#21h;vvod
1AD7 900000   F     4218                     mov             dptr,#teTE11
1ADA 120000   F     4219                     call            lotext
1ADD 534B03         4220                     anl             bufind+11,#03h ;погасить запятые
1AE0 020000   F     4221                     jmp             onmem11
                    4222     
1AE3 16             4223     me11_15dec:     dec             @r0                             ;<-
1AE4 120000   F     4224     lokame1:        call            lomenu
1AE7 020000   F     4225                     jmp             onmem11
                    4226     
1AEA B61206         4227     tome21: cjne            @r0,#12h,tome13
                    4228                     ;вкл тест интерфейса
1AED 020000   F     4229                     jmp             testrs;??????????
1AF0 020000   F     4230                     jmp             onmem11
                    4231     
1AF3 B6132A         4232     tome13: cjne            @r0,#13h,tome14
1AF6 7631           4233                     mov             @r0,#31h
                    4234                                             
1AF8 7A50           4235                     mov             r2,#50h                         ;57.6->19.2
1AFA 7B2C           4236                     mov             r3,#2ch
1AFC 120454         4237                     call            re4byte                 ;28..2bh 3bait-parol,1 bait skor
1AFF E508           4238                     mov             a,r8
1B01 B4000E         4239                     cjne            a,#00,skor19
1B04 900000   F     4240                     mov             dptr,#teS57_6;57,6
1B07 120000   F     4241                     call            lotext
1B0A 434B80         4242                     orl             bufind+11,#80h
1B0D C213           4243                     clr             bitv19
1B0F 020000   F     4244                     jmp             onmem11
1B12 900000   F     4245     skor19: mov             dptr,#teS19_2
1B15 120000   F     4246                     call            lotext
1B18 D213           4247                     setb            bitv19
1B1A 434B80         4248                     orl             bufind+11,#80h
1B1D 020000   F     4249                     jmp             onmem11
                    4250                                             
                    4251     
1B20 B61415         4252     tome14: cjne            @r0,#14h,tome15
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    66

1B23 D204           4253                     setb            bitizm
1B25 7881           4254                     mov             r0,#chavt
1B27 7600           4255                     mov             @r0,#0
1B29 08             4256                     inc             r0
1B2A 7600           4257                     mov             @r0,#0
1B2C C211           4258     outmenu:        clr             bitmenu
1B2E 020000   F     4259                     jmp             out7
                    4260     
1B31 78B1           4261     goparom:        mov             r0,#vichR               ;режим меню 52
1B33 7652           4262                     mov             @r0,#52h                        ;пароль уже ввели
1B35 020000   F     4263                     jmp             goparol
1B38 3090F6         4264     tome15: jnb             p1.0,goparom
1B3B 753936         4265                     mov             nuerr,#36h
1B3E 120000   F     4266                     call            error
1B41 120000   F     4267                     call            ind
1B44 120000   F     4268                     call            z_01s
1B47 80EF           4269                     jmp             tome15; onmem11
                    4270     
1B49 80E6           4271                     jmp             goparom;jb              bitpar,goparom  
1B4B 7651           4272                     mov             @r0,#51h;ПАРОЛЬ 000
1B4D 120000   F     4273                     call            lomenu
1B50 78B2           4274                     mov             r0,#marker
1B52 7607           4275                     mov             @r0,#7
1B54 753B09         4276                     mov             movrig,#9
1B57 753A07         4277                     mov             movleft,#7
                    4278                     ;setb           bitizm
1B5A 020000   F     4279                     jmp             onmem11
                    4280     
                    4281     
1B5D 78B1           4282     me21_23:        mov             r0,#vichR               ;<-
1B5F 7423           4283                     mov             a,#23h
1B61 C3             4284                     clr             c
1B62 96             4285                     subb            a,@r0
1B63 403D           4286                     jc              labelS1
1B65 75B0FB         4287                     mov             p3,#0fbh
1B68 20B718         4288                     jb              p3.7,vv21_23
1B6B B6210B         4289                     cjne            @r0,#21h,me21_23dec;-<
1B6E 7623           4290                     mov             @r0,#23h
1B70 900000   F     4291                     mov             dptr,#teTE7
1B73 120000   F     4292                     call            lotext
1B76 020000   F     4293                     jmp             onmem11
1B79 16             4294     me21_23dec:     dec             @r0
1B7A 120000   F     4295                     call            lomenu
1B7D 020000   F     4296                     jmp             onmem11
1B80 020000   F     4297     onmem12:        jmp             viout;  outF    ;(ie7)                          
                    4298                                                     
1B83 75B0F7         4299     vv21_23:        mov             p3,#0f7h                ;vvod
1B86 20B7F7         4300                     jb              p3.7,onmem12
1B89 B6210C         4301                     cjne            @r0,#21h,test22
                    4302                     ;mov            dptr,#tabt11;заслать ус 11А
1B8C 120000   F     4303     tests:  call            lotpus
1B8F D215           4304                     setb            biteizm;запомнить режим ТИ
1B91 D204           4305                     setb            bitizm
1B93 C211           4306                     clr             bitmenu;обнулить т к не будет индикации измерения       
1B95 020000   F     4307                     jmp             goto7;onmem11
1B98 B62202         4308     test22: cjne            @r0,#22h,test23
                    4309                     ;       mov                     dptr,#tabt9;заслать ус 9А
1B9B 80EF           4310                     jmp             tests   
1B9D                4311     test23:
                    4312                     ;       mov                     dptr,#tabt7;заслать ус 7А
1B9D 80ED           4313                     jmp             tests   
1B9F 020000   F     4314     left_s: jmp             left_sk
1BA2 B63179         4315     labelS1:        cjne            @r0,#31h,me_41
1BA5 75B0FB         4316                     mov                     p3,#0fbh                        ;<-
1BA8 30B7F4         4317                     jnb                     p3.7,left_s
1BAB 75B0F7         4318                     mov                     p3,#0f7h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    67

1BAE 20B7CF         4319                     jb                      p3.7,onmem12
                    4320                     ;запомнить признак установленной скорости в рпзу
                    4321     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4322     ;и запись во внешнее озу(0000h)
1BB1 7900           4323                     mov             r1,#0                   ;
1BB3 7A50           4324                     mov             r2,#50h
1BB5 7B00           4325                     mov             r3,#00
1BB7 120499         4326                     call    copyPP
                    4327                     ;внести изменения во внешн озу
                    4328                     ;KD=00 01 86 A0 (KD=1)
                    4329                     ;кофф *100000 и переведенный в hex формат
                    4330                     ;согласно адресов диапазонов и адресов яч вн озу 
1BBA 792C           4331                     mov             r1,#2ch
1BBC 7400           4332                     mov             a,#0;57,6
1BBE 301302         4333                     jnb             bitv19,spwri
1BC1 7401           4334                     mov             a,#1;19.6
1BC3 F3             4335     spwri:  movx    @r1,a
                    4336     ;стереть страницу пап прогр 
1BC4 905000         4337                     mov             dptr,#5000h
1BC7 7FFF           4338                     mov             r7,#0ffh
1BC9 12043E         4339                     call    cle256
                    4340     ;и запись в ячейки кофф памяти прогр (3000h) 
1BCC 7FFF           4341                     mov             r7,#0ffh
1BCE 7900           4342                     mov             r1,#0                           ;external ram
1BD0 905000         4343                     mov             dptr,#5000h
1BD3 120480         4344                     call    wrpage
                    4345             
1BD6 C28E           4346                     clr     TR1     ;stop Timer1
1BD8 201305         4347                     jb              bitv19,outsko1  ;загр Т1 в соотв с установленной скоростью
1BDB 758DF4         4348                     mov                     TH1,#244                ;57.6
1BDE 8005           4349                     jmp                     outsko
1BE0 758DDC         4350     outsko1:        mov                     TH1,#220                ;19.6
1BE3 D28E           4351                     setb    TR1     ;start Timer1
                    4352     
1BE5 C211           4353     outsko: clr             bitmenu
1BE7 D204           4354                     setb            bitizm
1BE9 020000   F     4355                     jmp                     out7
                    4356     
1BEC 020000   F     4357     rlabels4:       jmp             labels4
1BEF 020000   F     4358     rlabelS13:      jmp             labelS13
                    4359     
1BF2 B652F7         4360     me_52:  cjne            @r0,#52h,rlabels4
1BF5 75B0FB         4361                     mov                     p3,#0fbh;<-
1BF8 20B717         4362                     jb                      p3.7,vv_52v     ;ввод в калибровке
1BFB 78B2           4363                     mov             r0,#marker              ;сдвиг маркера влево при калибр
1BFD 7440           4364                     mov             a,#bufind
1BFF 26             4365                     add             a,@r0                   ;a=bufind+marker
1C00 F9             4366                     mov             r1,a
1C01 19             4367                     dec             r1;inc          r1
1C02 873C           4368                     mov             savba,@r1
                    4369                                                     
1C04 78B2           4370                     mov             r0,#marker
1C06 16             4371                     dec             @r0                             
1C07 C219           4372                     clr             bitmig
1C09 E53A           4373                     mov             a,movleft
1C0B B60001         4374                     cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр калибровки
1C0E 06             4375                     inc                     @r0
1C0F 020000   F     4376     me_52v: jmp                     goto7
                    4377             
1C12 75B0F7         4378     vv_52v: mov             p3,#0f7h
1C15 30B703         4379                     jnb             p3.7,rvvkali52
1C18 020000   F     4380                     jmp                     goto7
1C1B 020000   F     4381     rvvkali52:      jmp             vvkali52
                    4382     
                    4383     
1C1E B651D1         4384     me_41:  cjne            @r0,#51h,me_52;rlabels4
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    68

1C21 75B0FB         4385                     mov             p3,#0fbh;<-
1C24 30B7C8         4386                     jnb             p3.7,rlabelS13
1C27 75B0F7         4387                     mov             p3,#0f7h
1C2A 20B773         4388                     jb              p3.7,vvmenu
                    4389                     ;ввод пароля
                    4390                             
                    4391     ;       считать с индикатора 
1C2D 7F0E           4392                     mov             r7,#14
1C2F 784F           4393                     mov             r0,#abin
1C31 120000   F     4394                     call    clearN                  
                    4395                             
                    4396     ;чтение номера байта с индикатора(3байта)
                    4397     ;bufind+3..bufind+9
                    4398     ;-  - - -
                    4399     ;- - - - - - - - - -
                    4400     ;adec..adec+9
                    4401     ;ст            мл
1C34 7849           4402                     mov             r0,#bufind+9;
1C36 795C           4403                     mov             r1,#adec+9
1C38 7F03           4404                     mov             r7,#3;3bait
1C3A C3             4405     upav1:          clr             c
1C3B E6             4406                     mov             a,@r0
1C3C 9430           4407                     subb    a,#30h
1C3E F7             4408                     mov             @r1,a
1C3F 18             4409                     dec             r0
1C40 19             4410                     dec             r1
1C41 DFF7           4411                     djnz    r7,upav1;adec+7..adec+9
1C43 7A50           4412                     mov             r2,#50h                         ;parol 000x    (5028h )
1C45 7B28           4413                     mov             r3,#28h
1C47 120454         4414                     call            re4byte                 ;r8..r11(3 bait parol)
1C4A 800F           4415                     jmp                     goparol
                    4416     
1C4C E508           4417                     mov                     a,r8                    ;сравнить пароль с индикато
                             ром
1C4E B55A52         4418                     cjne            a,adec+7,parerr
1C51 E509           4419                     mov                     a,r9    
1C53 B55B4D         4420                     cjne            a,adec+8,parerr
1C56 E50A           4421                     mov                     a,r10
1C58 B55C48         4422                     cjne            a,adec+9,parerr
                    4423                                     ;равны
1C5B 78B1           4424     goparol:        mov             r0,#vichR               ;режим меню 52
1C5D 7652           4425                     mov             @r0,#52h                ;0000-n
1C5F 900000   F     4426                     mov             dptr,#teKD;00000-nA
1C62 120000   F     4427                     call            lotext
                    4428                     ;;;;;;;;;
                    4429                     ;n(hex)->abin
1C65 120000   F     4430                     call    findR                           ;a=2(10-2)...11(10-11)
1C68 2552           4431                     add             a,abin+3
1C6A F552           4432                     mov             abin+3,a
1C6C 7853           4433                     mov             r0,#adec
1C6E 7952           4434                     mov             r1,#abin+3      ;hex->10
1C70 120000   F     4435                     call    bindec
1C73 855C48         4436                     mov             bufind+8,adec+9
1C76 75472D         4437                     mov             bufind+7,#2dh
1C79 434A80         4438                     orl                     bufind+10,#80h;зажечь KMП
1C7C 434B10         4439                     orl                     bufind+11,#10h;точка после 1 знакоместа
1C7F 79AE           4440                     mov             r1,#diap
1C81 7848           4441                     mov             r0,#bufind+8
1C83 E7             4442                     mov             a,@r1
1C84 B40807         4443                     cjne    a,#8,nodi8k
1C87 7630           4444                     mov             @r0,#30h                 ;10-10
1C89 18             4445                     dec             r0
1C8A 7663           4446                     mov             @r0,#63h;31h
1C8C 8008           4447                     jmp             nodisk9
1C8E B40905         4448     nodi8k: cjne    a,#9,nodisk9
                    4449                                     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    69

1C91 7631           4450                     mov             @r0,#31h           ;10-11
1C93 18             4451                     dec             r0
1C94 7663           4452                     mov             @r0,#63h;31h
                    4453                                     
                    4454     
1C96 78B2           4455     nodisk9:        mov             r0,#marker
1C98 7601           4456                     mov             @r0,#1
1C9A 753A01         4457                     mov             movleft,#1
1C9D 753B05         4458                     mov             movrig,#5
                    4459                                             
1CA0 020000   F     4460     vvmenu: jmp             goto7
                    4461     
1CA3 753932         4462     parerr: mov             nuerr,#32h
1CA6 120000   F     4463                     call            error
1CA9 120000   F     4464                     call            ind
1CAC 120000   F     4465                     call            z_1s
1CAF C211           4466                     clr             bitmenu
1CB1 D204           4467                     setb            bitizm
1CB3 78B2           4468                     mov             r0,#marker
1CB5 76FF           4469                     mov             @r0,#0ffh
1CB7 020000   F     4470                     jmp             goto7
                    4471     
1CBA 30130E         4472     left_sk:        jnb             bitv19,tosk19;<-
1CBD 900000   F     4473                     mov             dptr,#teS57_6;57,6
1CC0 120000   F     4474                     call            lotext
1CC3 434B80         4475                     orl             bufind+11,#80h
1CC6 C213           4476                     clr             bitv19
1CC8 020000   F     4477                     jmp             onmem11;goto7
1CCB 900000   F     4478     tosk19: mov             dptr,#teS19_2
1CCE 120000   F     4479                     call            lotext
1CD1 434B80         4480                     orl             bufind+11,#80h
1CD4 D213           4481                     setb            bitv19
1CD6 020000   F     4482                     jmp             onmem11;goto7
                    4483     
1CD9                4484     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4485             
                    4486     ;;;;;;;;;;;;;;;;;;
                    4487     ;необходимо не портить цифру в следуюем слева знакоместе
                    4488     ;т е сохранить ее в ячейке для мигания в противном случае
                    4489     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4490     ;       знакоместа
1CD9 78B2           4491                     mov             r0,#marker
1CDB 7440           4492                     mov             a,#bufind
1CDD 26             4493                     add             a,@r0                   ;a=bufind+marker
1CDE F9             4494                     mov             r1,a
1CDF 19             4495                     dec             r1;inc          r1
1CE0 873C           4496                     mov             savba,@r1
                    4497                                             
1CE2 78B2           4498                     mov             r0,#marker
1CE4 16             4499                     dec             @r0                             
1CE5 C219           4500                     clr             bitmig
1CE7 E53A           4501                     mov             a,movleft
1CE9 B60652         4502                     cjne            @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 000
1CEC 06             4503                     inc             @r0
1CED 020000   F     4504                     jmp             goto7
                    4505     ;;;;;;;
                    4506     
1CF0                4507     vvkali52:       ;введено значение для калибровки
                    4508                                             ;число на индикаторе ->Ak  (52h)
                    4509                                             ;       считать с индикатора 
1CF0 7F0E           4510                     mov             r7,#14
1CF2 784F           4511                     mov             r0,#abin
1CF4 120000   F     4512                     call    clearN                  
                    4513                                     
                    4514     ;чтение номера байта с индикатора(3байта)
                    4515     ;bufind+1..bufind+5
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    70

                    4516     ;-  - - -
                    4517     ;- - - - - - - - - -
                    4518     ;adec..adec+9
                    4519     ;ст            мл
1CF7 7845           4520                     mov             r0,#bufind+5;
1CF9 795C           4521                     mov             r1,#adec+9
1CFB 7F05           4522                     mov             r7,#5;5bait
1CFD C3             4523     upav2:  clr             c
1CFE E6             4524                     mov             a,@r0
1CFF 9430           4525                     subb    a,#30h
1D01 F7             4526                     mov             @r1,a
1D02 18             4527                     dec             r0
1D03 19             4528                     dec             r1
1D04 DFF7           4529                     djnz    r7,upav2;adec+7..adec+9
                    4530     
1D06 784F           4531                     mov             r0,#abin
1D08 7953           4532                     mov             r1,#adec                        ;мл         ст
1D0A 120000   F     4533                     call    decbin                  ;abin..abin+3 (hex)
1D0D 120000   F     4534                     call    loadr2                  ;r2..r5
1D10 120402         4535                     call    altof   ;r2..r5->float
1D13 900000   F     4536                     mov     dptr,#ch_10;10
1D16 120000   F     4537                     call    ldc_ltemp                       ;r8..r11=8
1D19 120203         4538                     call    flmul
1D1C 78A4           4539                     mov             r0,#rez_Ak
1D1E 120000   F     4540                     call    saver2
1D21 C211           4541                     clr                     bitmenu
1D23 D212           4542                     setb            bitklb
1D25 434A80         4543                     orl             bufind+10,#80h;зажечь KMП
1D28 D204           4544                     setb            bitizm;бит калибровки уже установлен
1D2A 78B2           4545                     mov             r0,#marker
1D2C 76FF           4546                     mov             @r0,#0ffh
1D2E 783D           4547                     mov             r0,#chkl
1D30 76FF           4548                     mov             @r0,#0ffh
1D32 08             4549                     inc             r0
1D33 76FF           4550                     mov             @r0,#0ffh;38h
1D35 120000   F     4551                     call            z_1s
1D38 020000   F     4552                     jmp             out7
                    4553     
                    4554     
1D3B 020000   F     4555                     jmp             goto7
                    4556                                              
1D3E 020000   F     4557     onmem13:        jmp             goto7   ;(ie7)
                    4558     
1D41 B642AC         4559     labels4:        cjne            @r0,#42h,vvkali52
1D44 75B0FB         4560                     mov                     p3,#0fbh;<-
1D47 30B7F4         4561                     jnb             p3.7,onmem13
1D4A 75B0F7         4562                     mov             p3,#0f7h;vvod
1D4D 20B7EE         4563                     jb              p3.7,onmem13
1D50 020000   F     4564                     jmp             out7                                                    
                    4565     ;;;;;;;
1D53                4566     labelI:
1D53 75B0FE         4567                     mov             p3,#0feh
1D56 E5B0           4568                     mov             a,p3
1D58 20E703         4569                     jb              acc.7,nopoint
                    4570                     ;
1D5B 020000   F     4571                     jmp             goto7;out7
                    4572     
1D5E 75B0FB         4573     nopoint:        mov             p3,#0fbh
1D61 E5B0           4574                     mov             a,p3
1D63 20E72C         4575                     jb              acc.7,nopoin7
1D66 78B2           4576     labelS3:        mov             r0,#marker
1D68 E53A           4577                     mov             a,movleft
1D6A B40309         4578                     cjne            a,#3,poina1
1D6D B6030B         4579                     cjne            @r0,#3,nomarl;26
                    4580                     ;mov            @r0,#9
1D70 E53B           4581     poina2: mov             a,movrig                ;кн <- B=+00000
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    71

1D72 F6             4582                     mov             @r0,a
1D73 020000   F     4583                     jmp             goto7;  out7
                    4584     
1D76 B60402         4585     poina1: cjne            @r0,#4,nomarl;кн <- A= 0000
1D79 80F5           4586                     jmp             poina2
                    4587     
                    4588     
1D7B                4589     nomarl:                 ;                               29.12.06
                    4590     ;;;;;;;;;;;;;;;;;;
                    4591     ;необходимо не портить цифру в следуюем справа знакоместе
                    4592     ;т е сохранить ее в ячейке для мигания в противном случае
                    4593     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4594     ;       знакоместа
1D7B 78B2           4595                     mov             r0,#marker
1D7D 7440           4596                     mov             a,#bufind
1D7F 26             4597                     add             a,@r0                   ;a=bufind+marker
1D80 F9             4598                     mov             r1,a
1D81 09             4599                     inc             r1
1D82 873C           4600                     mov             savba,@r1
                    4601                                                     
1D84 78B2           4602                     mov             r0,#marker
1D86 16             4603                     dec             @r0                             
1D87 C219           4604                     clr             bitmig
1D89 E53A           4605                     mov                     a,movleft
1D8B B4036B         4606                     cjne            a,#3,poinA
1D8E B60266         4607                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+00000
1D91 06             4608     poin3:  inc             @r0
                    4609     ;нажат ввод А =000000 запомнить константу А
1D92 75B0F7         4610     nopoin7:        mov             p3,#0f7h
1D95 E5B0           4611                     mov             a,p3
1D97 20E75D         4612                     jb              acc.7,gogo7;out7
1D9A 78B1           4613                     mov             r0,#vichR
1D9C E6             4614                     mov             a,@r0
1D9D B6215E         4615                     cjne    @r0,#21h,no21p7
1DA0 7611           4616                     mov             @r0,#11h
                    4617                             ;       считать с индикатора  упаковать в плавающий формат
                    4618                             ;   сохранить
1DA2 7F0E           4619                     mov             r7,#14
1DA4 784F           4620                     mov             r0,#abin
1DA6 120000   F     4621                     call    clearN                  
1DA9 120000   F     4622                     call    upakA
                    4623                                     
1DAC 784F           4624                     mov             r0,#abin
1DAE 7953           4625                     mov             r1,#adec                        ;мл         ст
1DB0 120000   F     4626                     call    decbin                  ;abin..abin+3 (hex)
1DB3 120000   F     4627                     call    loadr2                  ;r2..r5
1DB6 120402         4628                     call    altof                   ;r2..r5->float
1DB9 78BC           4629                     mov     r0,#konstA
1DBB 120000   F     4630                     call    saver2
1DBE 900000   F     4631                     mov     dptr,#ch0
1DC1 120000   F     4632                     call    ldc_ltemp
1DC4 1201D6         4633                     call            flcmp
1DC7 6010           4634                     jz              erra0
                    4635     ;26
1DC9 78B2           4636                     mov             r0,#marker
1DCB 76FF           4637                     mov             @r0,#0ffh
                    4638                                     
1DCD 900000   F     4639                     mov             dptr,#teVICH;teBequ0
1DD0 120000   F     4640                     call    lotext
                    4641                     ;       call            outB
1DD3 534BBF         4642                     anl             bufind+11,#0bfh         ;гашение точки bufind+7
                    4643                     ;       orl             bufind+11,#80h
1DD6 020000   F     4644                     jmp             goto7
                    4645     
1DD9 78B2           4646     erra0:  mov             r0,#marker
1DDB 76FF           4647                     mov             @r0,#0ffh
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    72

1DDD 753934         4648                     mov                     nuerr,#34h;константа не должна быть равна0
1DE0 120000   F     4649                     call            error
1DE3 120000   F     4650                     call            ind
1DE6 120000   F     4651                     call            z_1s
1DE9 78B1           4652                     mov                     r0,#vichR
1DEB 7600           4653                     mov                     @r0,#0
1DED C214           4654                     clr                     bitvich
1DEF C206           4655                     clr                     bitvi11
1DF1 D204           4656                     setb            bitizm
1DF3 78B2           4657                     mov                     r0,#marker
1DF5 76FF           4658                     mov                     @r0,#0ffh
1DF7 802E           4659     gogo7:  jmp                     out7;goto7
                    4660     
1DF9 B6032B         4661     poinA:  cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1DFC 8093           4662                     jmp             poin3
                    4663     
1DFE                4664     no21p7:         ;считать с индикатора  упаковать в плавающий формат
                    4665                             ;сохранить
1DFE 7F0E           4666                     mov             r7,#14
1E00 784F           4667                     mov             r0,#abin
1E02 120000   F     4668                     call    clearN                  
1E05 120000   F     4669                     call    upakB                   
1E08 784F           4670                     mov             r0,#abin
1E0A 7953           4671                     mov             r1,#adec                        ;мл         ст
1E0C 120000   F     4672                     call    decbin                  ;abin..abin+3 (hex)
1E0F 120000   F     4673                     call    loadr2                  ;r2..r5
1E12 120402         4674                     call    altof                   ;r2..r5->int
1E15 301B04         4675                     jnb             bitznB,pozB
1E18 EA             4676                     mov             a,r2
1E19 4480           4677                     orl             a,#80h
1E1B FA             4678                     mov             r2,a                    ;знак-
1E1C                4679     pozB:           ;mov            r0,#konstB
                    4680                     ;call   saver2
                    4681     
1E1C 79B2           4682                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1E1E 77FF           4683                     mov             @r1,#0ffh
1E20 78B1           4684                     mov             r0,#vichR
1E22 7611           4685                     mov             @r0,#11h
1E24 020000   F     4686                     jmp             lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4687                                     
                    4688     
1E27                4689     out7:            ;mov           IE,#80h
1E27 D083           4690                     pop             dph
1E29 D082           4691                     pop             dpl
1E2B D007           4692                     pop             rr7     
1E2D D006           4693                     pop             rr6
1E2F D005           4694                     pop             rr5
1E31 D004           4695                     pop             rr4
1E33 D003           4696                     pop             rr3
1E35 D002           4697                     pop             rr2
1E37 D001           4698                     pop             rr1                             
1E39 D000           4699                     pop             rr0
1E3B D0D0           4700                     pop             psw
1E3D D0E0           4701                     pop             acc
1E3F 75AD00         4702                     mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
1E42 75B0C0         4703                     mov             P3,#0c0h
                    4704                     ;       mov             EIE2,#30H
1E45 C219           4705                     clr             bitmig
1E47 E586           4706                     mov             a,P6            ;p6.4=0
1E49 54EF           4707                     anl             a,#0efh
1E4B F586           4708                     mov             P6,a
1E4D 00             4709                     nop
1E4E 00             4710                     nop
1E4F E586           4711                     mov             a,P6                    ;p6.4=1 
1E51 4410           4712                     orl             a,#10h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    73

1E53 F586           4713                     mov             P6,a
                    4714                     ;;;;;;;;;
1E55 E5DA           4715                     mov             a,PCA0CPM0;             TOG0
1E57 4446           4716                     orl             a,#46h  ;anl            a,#0fbh
1E59 F5DA           4717                     mov             PCA0CPM0,a
1E5B 75CDD0         4718                     mov             TH2,#0d0h
1E5E 75CC00         4719                     mov             TL2,#00
1E61 D2CA           4720                     setb            T2CON.2
1E63 D2AD           4721                     setb            ET2     ;IE.5
                    4722                                                 
1E65 32             4723                     reti
                    4724     
                    4725             ;;;;
1E66 78B1           4726     lomenu: mov             r0,#vichR
1E68 B61107         4727                     cjne    @r0,#11h,menu12
1E6B 900000   F     4728                     mov             dptr,#teTESI
1E6E 120000   F     4729     lome1:  call    lotexT
1E71 22             4730                     ret
1E72 B61205         4731     menu12: cjne    @r0,#12h,menu13
1E75 900000   F     4732                     mov             dptr,#teTESR
1E78 80F4           4733                     jmp             lome1
1E7A B61305         4734     menu13: cjne    @r0,#13h,menu14
1E7D 900000   F     4735                     mov             dptr,#teSKOR
1E80 80EC           4736                     jmp             lome1
1E82 B61405         4737     menu14: cjne    @r0,#14h,menu15
1E85 900000   F     4738                     mov             dptr,#teAVK
1E88 80E4           4739                     jmp             lome1
1E8A B61505         4740     menu15: cjne    @r0,#15h,menu21
1E8D 900000   F     4741                     mov             dptr,#teKALIB
1E90 80DC           4742                     jmp             lome1
                    4743     
1E92 B62105         4744     menu21: cjne    @r0,#21h,menu22
1E95 900000   F     4745                     mov             dptr,#teTE11
1E98 80D4           4746                     jmp             lome1
1E9A B62205         4747     menu22: cjne    @r0,#22h,menu23
1E9D 900000   F     4748                     mov             dptr,#teTE9
1EA0 80CC           4749                     jmp             lome1
1EA2 B62305         4750     menu23: cjne    @r0,#23h,menu31
1EA5 900000   F     4751                     mov             dptr,#teTE7
1EA8 80C4           4752                     jmp             lome1
1EAA B63105         4753     menu31: cjne    @r0,#31h,menu41
1EAD 900000   F     4754                     mov             dptr,#teS57_6
1EB0 80BC           4755                     jmp             lome1
                    4756     
1EB2                4757     menu41:         
1EB2 900000   F     4758                     mov             dptr,#tePAR
1EB5 80B7           4759                     jmp             lome1
1EB7 020000   F     4760     yesvi_kr:       jmp             yesvi_km
1EBA                4761     endkalib:;KD=Ak/A3
1EBA 200DFA         4762                     jb              bifl_kt,yesvi_kr;выч кофф Км
1EBD 789C           4763                     mov             r0,#rez_A3
1EBF 120000   F     4764                     call            resar2
                    4765                                     
1EC2 120402         4766                     call            altof                   ;->float
1EC5 EA             4767                     mov             a,r2
1EC6 547F           4768                     anl             a,#7fh
1EC8 FA             4769                     mov             r2,a
1EC9 120000   F     4770                     call            move28
1ECC 78A4           4771                     mov             r0,#rez_Ak
1ECE 120000   F     4772                     call            resar2
1ED1 1202B7         4773                     call            fldiv
                    4774                                                     
1ED4 900000   F     4775                     mov             dptr,#CHtho;100000
1ED7 120000   F     4776                     call            ldc_ltemp                       ;r8..r11=8
1EDA 120203         4777                     call            flmul
1EDD 120343         4778                     call            ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО 6разряд
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    74

                             ное)
                    4779     
1EE0 78A0           4780                     mov             r0,#koefKD
1EE2 120000   F     4781                     call            saver2
                    4782                     ;запись в рпзу в соотв ячейку
                    4783                             
1EE5 7900           4784                     mov             r1,#0                   ;счит рпзу во внешн озу
1EE7 7A50           4785                     mov             r2,#50h
1EE9 7B00           4786                     mov             r3,#00
1EEB 120499         4787                     call            copyPP
                    4788                     ;внести изменения во внешн озу
1EEE 120000   F     4789                     call            findext                 ;r1-внешн озу
1EF1 78A0           4790                     mov             r0,#koefKD
1EF3 120000   F     4791                     call            resar2
1EF6 EA             4792                     mov             a,r2
1EF7 F3             4793                     movx            @r1,a
1EF8 09             4794                     inc             r1
1EF9 EB             4795                     mov             a,r3
1EFA F3             4796                     movx            @r1,a
1EFB 09             4797                     inc             r1
1EFC EC             4798                     mov             a,r4
1EFD F3             4799                     movx            @r1,a
1EFE 09             4800                     inc             r1
1EFF ED             4801                     mov             a,r5
1F00 F3             4802                     movx            @r1,a
                    4803                     ;кофф *100000 и переведенный в hex формат
                    4804                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4805                     ;стереть страницу пап прогр 
1F01 905000         4806                     mov             dptr,#5000h
1F04 7FFF           4807                     mov             r7,#0ffh
1F06 12043E         4808                     call            cle256
                    4809     ;и запись в ячейки кофф памяти прогр (3000h) 
1F09 7FFF           4810                     mov             r7,#0ffh
1F0B 7900           4811                     mov             r1,#0                           ;external ram
1F0D 905000         4812                     mov             dptr,#5000h
1F10 120480         4813                     call            wrpage
                    4814     ;2.2.07
1F13 79AE           4815                     mov             r1,#diap
1F15 B70511         4816                     cjne            @r1,#5,fulkalib
                    4817                     ;jb             bifl_kt,yesvi_km;выч кофф Км
1F18 D20D           4818                     setb            bifl_kt
                    4819                     ;call           loadus
1F1A 900000   F     4820                     mov             dptr,#tabt7;заслать ус 7А       
1F1D E4             4821                     clr             a
1F1E 93             4822                     movc            a,@a+dptr                               ;high byte
1F1F F584           4823                     mov             p4,a
1F21 A3             4824                     inc             dptr
1F22 E4             4825                     clr             a
1F23 93             4826                     movc            a,@a+dptr                               ;low byte
1F24 F585           4827                     mov             p5,a
1F26 020000   F     4828                     jmp             goto7;  out_kali
                    4829     
                    4830     ;;;
1F29                4831     fulkalib:
1F29 C212           4832                     clr             bitklb
1F2B D216           4833                     setb            bitpar                  ;пароль провели 1 раз успешно
1F2D 900000   F     4834                     mov             dptr,#teEND
1F30 120000   F     4835                     call            lotext
1F33 120000   F     4836                     call            ind
1F36 120000   F     4837     out_kali:       call            z_1s
1F39 120000   F     4838                     call            z_1s
1F3C 020000   F     4839                     jmp             goto7
1F3F                4840     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1F3F 7A50           4841                     mov             r2,#50h                 ;-11a
1F41 7B14           4842                     mov             r3,#14h                 ;k7
1F43 12046C         4843                     call            rebyte2                         ;r2..r5- hex
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    75

1F46 120402         4844                     call            altof                   ;r2..r5->float
1F49 C002           4845                     push            rr2
1F4B C003           4846                     push            rr3
1F4D C004           4847                     push            rr4
1F4F C005           4848                     push            rr5
1F51 7A50           4849                     mov             r2,#50h                 ;k5
1F53 7B0C           4850                     mov             r3,#0ch
1F55 12046C         4851                     call            rebyte2                 ;r2..r5
1F58 120402         4852                     call            altof                   ;r2..r5->float
1F5B 120000   F     4853                     call            move28
1F5E D005           4854                     pop             rr5
1F60 D004           4855                     pop             rr4
1F62 D003           4856                     pop             rr3
1F64 D002           4857                     pop             rr2
1F66 1202B7         4858                     call            fldiv                   ;K7/K5
                    4859     
1F69 900000   F     4860                     mov     dptr,#CHtho;100000
1F6C 120000   F     4861                     call    ldc_ltemp                       ;r8..r11=8
1F6F 120203         4862                     call    flmul                           ;r2..r5 ;K7/K5*10**5
1F72 C002           4863                     push            rr2
1F74 C003           4864                     push            rr3
1F76 C004           4865                     push            rr4
1F78 C005           4866                     push            rr5
                    4867                                     
1F7A 789C           4868                     mov                     r0,#rez_A3
1F7C 120000   F     4869                     call            resar2
1F7F 120402         4870                     call            altof                           ;r2..r5->float
1F82 120000   F     4871                     call            move28
1F85 D005           4872                     pop                     rr5
1F87 D004           4873                     pop                     rr4
1F89 D003           4874                     pop                     rr3
1F8B D002           4875                     pop                     rr2
1F8D 1202B7         4876                     call            fldiv           ;Km     
                    4877     
1F90 900000   F     4878                     mov     dptr,#CHtho;100000
1F93 120000   F     4879                     call    ldc_ltemp                       ;r8..r11=8
1F96 120203         4880                     call    flmul                           ;r2..r5
1F99 120343         4881                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗМ ЧИСЛО 6разрядн
                             ое)
1F9C 78A0           4882                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1F9E 120000   F     4883                     call            saver2
                    4884                     ;запись в рпзу в соотв ячейку
1FA1 7900           4885                     mov             r1,#0                   ;счит рпзу во внешн озу
1FA3 7A50           4886                     mov             r2,#50h
1FA5 7B00           4887                     mov             r3,#00
1FA7 120499         4888                     call    copyPP
                    4889                     ;внести изменения во внешн озу
1FAA 78A0           4890                     mov                     r0,#koefKD
1FAC 120000   F     4891                     call            resar2
1FAF 792C           4892                     mov                     r1,#2ch                 ;r1-внешн озу кофф Km
                    4893                             
1FB1 EA             4894                     mov                     a,r2
1FB2 F3             4895                     movx            @r1,a
1FB3 09             4896                     inc                     r1
1FB4 EB             4897                     mov                     a,r3
1FB5 F3             4898                     movx            @r1,a
1FB6 09             4899                     inc                     r1
1FB7 EC             4900                     mov                     a,r4
1FB8 F3             4901                     movx            @r1,a
1FB9 09             4902                     inc                     r1
1FBA ED             4903                     mov                     a,r5
1FBB F3             4904                     movx            @r1,a
                    4905                     ;кофф *100000 и переведенный в hex формат
                    4906                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4907     ;стереть страницу пап прогр 
1FBC 905000         4908                     mov             dptr,#5000h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    76

1FBF 7FFF           4909                     mov             r7,#0ffh
1FC1 12043E         4910                     call    cle256
                    4911     ;и запись в ячейки кофф памяти прогр (3000h) 
1FC4 7FFF           4912                     mov             r7,#0ffh
1FC6 7900           4913                     mov             r1,#0                           ;external ram
1FC8 905000         4914                     mov             dptr,#5000h
1FCB 120480         4915                     call    wrpage
                    4916     
1FCE C20D           4917                     clr             bifl_kt
1FD0 120000   F     4918                     call    loadus
1FD3 020000   F     4919                     jmp             fulkalib
                    4920     
                    4921     ;выч среднего по блоку
                    4922     ;вых r2..r5
1FD6                4923     vichmean:       
                    4924                                             ;;;;;;;;;;
1FD6 120000   F     4925                     call            adrblok;dptr-адр ячейки 1й соотв блока 
1FD9 E582           4926                     mov                     a,dpl
1FDB FF             4927                     mov                     r7,a
1FDC E583           4928                     mov                     a,dph
1FDE FE             4929                     mov                     r6,a
1FDF 120000   F     4930                     call            resa_hl;save_bl->dptr
                    4931     
1FE2 C3             4932                     clr             c; в начало блока?
1FE3 E582           4933                     mov                     a,dpl
1FE5 9F             4934                     subb            a,r7
1FE6 FF             4935                     mov                     r7,a
1FE7 7006           4936                     jnz                     oldmean
1FE9 E583           4937                     mov                     a,dph
1FEB 9E             4938                     subb            a,r6
1FEC FE             4939                     mov                     r6,a
1FED 6065           4940                     jz                      outmea;
                    4941     ;;;;;;;;;;
1FEF                4942     oldmean:
1FEF 120000   F     4943                     call            resa_hl;save_bl->dptr
1FF2 78D7           4944                     mov                     r0,#copy_hl
1FF4 E583           4945                     mov                     a,dph
1FF6 F6             4946                     mov                     @r0,a
1FF7 08             4947                     inc                     r0
1FF8 E582           4948                     mov                     a,dpl
1FFA F6             4949                     mov                     @r0,a
1FFB 78B8           4950                     mov                     r0,#work
1FFD 120000   F     4951                     call            clear4
2000 78D6           4952                     mov                     r0,#chblok;volume
2002 7600           4953                     mov                     @r0,#0
2004 120000   F     4954     meng:           call            adrblok;dptr-адр ячейки 1й соотв блока 
2007 E582           4955                     mov                     a,dpl
2009 FF             4956                     mov                     r7,a
200A E583           4957                     mov                     a,dph
200C FE             4958                     mov                     r6,a
200D 78D7           4959                     mov                     r0,#copy_hl;call                resa_hl;save_bl->dp
                             tr
200F E6             4960                     mov                     a,@r0
2010 F583           4961                     mov                     dph,a
2012 08             4962                     inc                     r0
2013 E6             4963                     mov                     a,@r0
2014 F582           4964                     mov                     dpl,a
2016 C3             4965                     clr                     c;-4
2017 E582           4966                     mov                     a,dpl
2019 9404           4967                     subb            a,#4
201B F582           4968                     mov                     dpl,a
201D E583           4969                     mov                     a,dph
201F 9400           4970                     subb            a,#0
2021 F583           4971                     mov                     dph,a;dptr-4
                    4972                     ;;;;;;;;
2023 79D7           4973                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    77

2025 E583           4974                     mov             a,dph
2027 F7             4975                     mov             @r1,a
2028 09             4976                     inc             r1
2029 E582           4977                     mov             a,dpl
202B F7             4978                     mov             @r1,a
                    4979                     ;;;;;;;;;
202C C3             4980                     clr             c;пришли в начало блока?
202D E582           4981                     mov                     a,dpl
202F 9F             4982                     subb            a,r7
2030 FF             4983                     mov                     r7,a
2031 7006           4984                     jnz                     nextmea
2033 E583           4985                     mov                     a,dph
2035 9E             4986                     subb            a,r6
2036 FE             4987                     mov                     r6,a
2037 601B           4988                     jz                      outmea;
                    4989                                             
                    4990                     ;продолжаем сравнение
                    4991                     ;;;;;;;;;;;             
2039 120000   F     4992     nextmea:        call            loahl_r2        ;из яч внешн озу ->r2..r5
203C 120402         4993                     call            altof;->float
203F 120000   F     4994                     call            move28                  ;r8..r11
2042 78B8           4995                     mov                     r0,#work
2044 120000   F     4996                     call            resar2
2047 120166         4997                     call            fladd
204A 78B8           4998                     mov                     r0,#work
204C 120000   F     4999                     call            saver2
204F 78D6           5000                     mov                     r0,#chblok;volume;кол измерений блока
2051 06             5001                     inc                     @r0
2052 80B0           5002                     jmp                     meng
2054                5003     outmea:         
2054 120000   F     5004                     call            loahl_r2        ;из яч внешн озу ->r2..r5
2057 120402         5005                     call            altof;->float
205A 120000   F     5006                     call            move28                  ;r8..r11
205D 78B8           5007                     mov                     r0,#work
205F 120000   F     5008                     call            resar2
2062 120166         5009                     call            fladd
2065 78B8           5010                     mov                     r0,#work
2067 120000   F     5011                     call            saver2
206A E4             5012                     clr                     a
206B FA             5013                     mov                     r2,a
206C FB             5014                     mov                     r3,a
206D FC             5015                     mov                     r4,a
206E 78D6           5016                     mov                     r0,#chblok;volume;кол измерений блока...200d
2070 E6             5017                     mov                     a,@r0
2071 2401           5018                     add                     a,#1
2073 FD             5019                     mov                     r5,a
2074 120402         5020                     call            altof;r2..r5 float
2077 120000   F     5021                     call            move28
207A 78B8           5022                     mov                     r0,#work
207C 120000   F     5023                     call            resar2
207F 1202B7         5024                     call            fldiv
2082 900000   F     5025                     mov                     dptr,#ch_10      
2085 120000   F     5026                     call            ldc_ltemp
2088 1202B7         5027                     call            fldiv
208B 120343         5028                     call            ftol                            ;->hex
208E 120000   F     5029                     call    maform
2091 784F           5030                     mov             r0,#abin
2093 120000   F     5031                     call    saver2
                    5032     ;;;;;;;;
                    5033                                             
2096 7853           5034                     mov             r0,#adec
2098 7952           5035                     mov             r1,#abin+3      ;hex->10
209A 120000   F     5036                     call    bindec
                    5037                                     
209D 785C           5038                     mov             r0,#adec+9;разместить в буфер индикации
209F 7949           5039                     mov             r1,#bufind+9
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    78

20A1 7F05           5040                     mov             r7,#5
20A3 E6             5041     bufmea: mov             a,@r0
20A4 2430           5042                     add             a,#30h
20A6 F7             5043                     mov             @r1,a
20A7 19             5044                     dec             r1
20A8 18             5045                     dec             r0
20A9 DFF8           5046                     djnz    r7,bufmea
20AB 7844           5047                     mov             r0,#bufind+4
20AD 762B           5048                     mov             @r0,#2bh          
20AF 300202         5049                     jnb             znmat,nozmea
20B2 762D           5050                     mov             @r0,#2dh
20B4 434B05         5051     nozmea: orl             bufind+11,#05h
20B7 22             5052                     ret
                    5053     
                    5054     
20B8 E0             5055     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
20B9 FA             5056                     mov                     r2,a
20BA A3             5057                     inc                     dptr
20BB E0             5058                     movx            a,@dptr
20BC FB             5059                     mov                     r3,a
20BD A3             5060                     inc                     dptr
20BE E0             5061                     movx            a,@dptr
20BF FC             5062                     mov                     r4,a
20C0 A3             5063                     inc                     dptr
20C1 E0             5064                     movx            a,@dptr
20C2 FD             5065                     mov                     r5,a    
20C3 22             5066                     ret
                    5067     
20C4 C3             5068     min4_hl:        clr                     c;-4
20C5 E582           5069                     mov                     a,dpl
20C7 9404           5070                     subb            a,#4
20C9 F582           5071                     mov                     dpl,a
20CB E583           5072                     mov                     a,dph
20CD 9400           5073                     subb            a,#0
20CF F583           5074                     mov                     dph,a;dptr-4
20D1 22             5075                     ret
                    5076     
20D2 020000   F     5077     routmin:        jmp             outmin
                    5078     ;мин значение по по блоку
20D5                5079     vichmin:        ;;;;;;;;;;
20D5 120000   F     5080                     call            adrblok;dptr-адр ячейки 1й соотв блока 
20D8 E582           5081                     mov                     a,dpl
20DA FF             5082                     mov                     r7,a
20DB E583           5083                     mov                     a,dph
20DD FE             5084                     mov                     r6,a
20DE 120000   F     5085                     call            resa_hl;save_bl->dptr
                    5086     
20E1 C3             5087                     clr             c; в начало блока?
20E2 E582           5088                     mov                     a,dpl
20E4 9F             5089                     subb            a,r7
20E5 FF             5090                     mov                     r7,a
20E6 7006           5091                     jnz                     oldmin
20E8 E583           5092                     mov                     a,dph
20EA 9E             5093                     subb            a,r6
20EB FE             5094                     mov                     r6,a
20EC 60E4           5095                     jz                      routmin;
                    5096     ;;;;;;;;;;
20EE                5097     oldmin:
20EE 120000   F     5098                     call            resa_hl;save_bl->dptr
                    5099                                                                                     
                    5100     ;с конца блока адрес 2го измерение
20F1 120000   F     5101                     call            min4_hl
                    5102                                             
20F4 78B8           5103                     mov             r0,#work        ;блок анализируется с конца 1я измерение за
                             гружается в work
                    5104                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    79

20F6 E0             5105                     movx            a,@dptr
20F7 F6             5106                     mov             @r0,a
20F8 08             5107                     inc             r0
20F9 A3             5108                     inc             dptr
20FA E0             5109                     movx            a,@dptr
20FB F6             5110                     mov             @r0,a
20FC 08             5111                     inc             r0
20FD A3             5112                     inc             dptr
20FE E0             5113                     movx            a,@dptr
20FF F6             5114                     mov             @r0,a
2100 08             5115                     inc             r0
2101 A3             5116                     inc             dptr
2102 E0             5117                     movx            a,@dptr
2103 F6             5118                     mov             @r0,a
2104 A3             5119                     inc             dptr
                    5120                                             
2105 78B8           5121                     mov             r0,#work
2107 120000   F     5122                     call            resar2
210A 120402         5123                     call            altof;->float;r2..r5
210D 78B8           5124                     mov             r0,#work
210F 120000   F     5125                     call            saver2
                    5126     
2112 120000   F     5127                     call            min4_hl
                    5128                     ;call           min4_hl
2115 78D7           5129                     mov             r0,#copy_hl
2117 E583           5130                     mov             a,dph
2119 F6             5131                     mov             @r0,a
211A 08             5132                     inc             r0
211B E582           5133                     mov             a,dpl
211D F6             5134                     mov             @r0,a
                    5135                             
211E 78D6           5136                     mov             r0,#chblok;volume
2120 7600           5137                     mov             @r0,#0
2122 120000   F     5138     ming:           call            adrblok;dptr-адр ячейки 1й соотв блока 
2125 E582           5139                     mov             a,dpl
2127 FF             5140                     mov             r7,a
2128 E583           5141                     mov             a,dph
212A FE             5142                     mov             r6,a
                    5143     
212B 78D7           5144                     mov             r0,#copy_hl;call                resa_hl;save_bl->dptr
212D E6             5145                     mov             a,@r0
212E F583           5146                     mov             dph,a
2130 08             5147                     inc             r0
2131 E6             5148                     mov             a,@r0
2132 F582           5149                     mov             dpl,a
                    5150                                     
2134 C3             5151                     clr             c;-4
2135 E582           5152                     mov             a,dpl
2137 9404           5153                     subb            a,#4
2139 F582           5154                     mov             dpl,a
213B E583           5155                     mov             a,dph
213D 9400           5156                     subb            a,#0
213F F583           5157                     mov             dph,a;dptr-4
                    5158                     ;;;;;;;;
2141 79D7           5159                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
2143 E583           5160                     mov             a,dph
2145 F7             5161                     mov             @r1,a
2146 09             5162                     inc             r1
2147 E582           5163                     mov             a,dpl
2149 F7             5164                     mov             @r1,a
                    5165                                                     ;;;;;;;;;
214A C3             5166                     clr             c;пришли в начало блока?
214B E582           5167                     mov                     a,dpl
214D 9F             5168                     subb            a,r7
214E FF             5169                     mov                     r7,a
214F 7006           5170                     jnz                     nextmin
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    80

2151 E583           5171                     mov                     a,dph
2153 9E             5172                     subb            a,r6
2154 FE             5173                     mov                     r6,a
2155 601D           5174                     jz                      outmin;
                    5175                                                     
                    5176                     ;продолжаем сравнение
                    5177                                                     ;;;;;;;;;;;             
2157 78B8           5178     nextmin:        mov                     r0,#work
2159 120000   F     5179                     call            resar2
                    5180                     ;call           altof;->float;r2..r5
215C 120000   F     5181                     call            move28;->r8..r11
215F 120000   F     5182                     call            loahl_r2                ;из яч внешн озу ->r2..r5
                    5183     
2162 120402         5184                     call            altof;->float;r2..r5
                    5185                                             
2165 1201D6         5186                     call            flcmp
2168 5005           5187                     jnc                     nomini
216A 78B8           5188                     mov                     r0,#work;<
216C 120000   F     5189                     call            saver2;r2..r5
216F 78D6           5190     nomini: mov                     r0,#chblok;volume;кол измерений блока
2171 06             5191                     inc                     @r0
2172 80AE           5192                     jmp                     ming
                    5193     
2174 78B8           5194     outmin: mov                     r0,#work;1ое измерение блока
2176 120000   F     5195                     call            resar2
                    5196                     ;call           altof;->float;r2..r5
2179 120000   F     5197                     call            move28;->r8..r11
217C 120000   F     5198                     call            loahl_r2                ;из яч внешн озу ->r2..r5
                    5199     
217F 120402         5200                     call            altof;->float;r2..r5
                    5201                                             
2182 1201D6         5202                     call            flcmp
2185 5005           5203                     jnc                     minivix
2187 78B8           5204                     mov                     r0,#work;<
2189 120000   F     5205                     call            saver2;r2..r5
                    5206                                             ;;;;;;;;;
                    5207     
218C 78B8           5208     minivix:        mov             r0,#work
218E 120000   F     5209                     call            resar2
                    5210                     ;call           altof;->float
2191 900000   F     5211                     mov             dptr,#ch_10      
2194 120000   F     5212                     call            ldc_ltemp
2197 1202B7         5213                     call            fldiv
219A 120343         5214                     call            ftol                            ;->hex
                    5215                     ;;;
219D 120000   F     5216                     call            maform
21A0 784F           5217                     mov             r0,#abin
21A2 120000   F     5218                     call            saver2
                    5219     ;;;;;;;;
21A5 7853           5220                     mov             r0,#adec
21A7 7952           5221                     mov             r1,#abin+3      ;hex->10
21A9 120000   F     5222                     call            bindec
21AC 785C           5223                     mov             r0,#adec+9;разместить в буфер индикации
21AE 7949           5224                     mov             r1,#bufind+9
21B0 7F05           5225                     mov             r7,#5
21B2 E6             5226     bufmin: mov             a,@r0
21B3 2430           5227                     add             a,#30h
21B5 F7             5228                     mov             @r1,a
21B6 19             5229                     dec             r1
21B7 18             5230                     dec             r0
21B8 DFF8           5231                     djnz            r7,bufmin
21BA 7844           5232                     mov             r0,#bufind+4
21BC 762B           5233                     mov             @r0,#2bh          
21BE 300202         5234                     jnb             znmat,nozmin
21C1 762D           5235                     mov             @r0,#2dh
21C3 434B05         5236     nozmin: orl             bufind+11,#05h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    81

21C6 22             5237                     ret
                    5238     
                    5239     
21C7 020000   F     5240     routmax:        jmp             outmax
                    5241     ;мин значение по по блоку
21CA                5242     vichmax:        ;;;;;;;;;;
21CA 120000   F     5243                     call            adrblok;dptr-адр ячейки 1й соотв блока 
21CD E582           5244                     mov             a,dpl
21CF FF             5245                     mov             r7,a
21D0 E583           5246                     mov             a,dph
21D2 FE             5247                     mov             r6,a
21D3 120000   F     5248                     call            resa_hl;save_bl->dptr
21D6 C3             5249                     clr             c; в начало блока?
21D7 E582           5250                     mov             a,dpl
21D9 9F             5251                     subb            a,r7
21DA FF             5252                     mov             r7,a
21DB 7006           5253                     jnz             oldmax
21DD E583           5254                     mov             a,dph
21DF 9E             5255                     subb            a,r6
21E0 FE             5256                     mov             r6,a
21E1 60E4           5257                     jz              routmax;
                    5258     ;;;;;;;;;;
21E3                5259     oldmax:
21E3 120000   F     5260                     call            resa_hl;save_bl->dptr
                    5261     ;с конца блока адрес 2го измерение
21E6 120000   F     5262                     call            min4_hl
21E9 78B8           5263                     mov             r0,#work        ;блок анализируется с конца 1я измерение за
                             гружается в work
21EB E0             5264                     movx            a,@dptr
21EC F6             5265                     mov             @r0,a
21ED 08             5266                     inc             r0
21EE A3             5267                     inc             dptr
21EF E0             5268                     movx            a,@dptr
21F0 F6             5269                     mov             @r0,a
21F1 08             5270                     inc             r0
21F2 A3             5271                     inc             dptr
21F3 E0             5272                     movx            a,@dptr
21F4 F6             5273                     mov             @r0,a
21F5 08             5274                     inc             r0
21F6 A3             5275                     inc             dptr
21F7 E0             5276                     movx            a,@dptr
21F8 F6             5277                     mov             @r0,a
21F9 A3             5278                     inc             dptr
                    5279                                             
21FA 78B8           5280                     mov             r0,#work
21FC 120000   F     5281                     call            resar2
21FF 120402         5282                     call            altof;->float;r2..r5
2202 78B8           5283                     mov             r0,#work
2204 120000   F     5284                     call            saver2
2207 120000   F     5285                     call            min4_hl
                    5286                     ;       call            min4_hl
220A 78D7           5287                     mov             r0,#copy_hl
220C E583           5288                     mov             a,dph
220E F6             5289                     mov             @r0,a
220F 08             5290                     inc             r0
2210 E582           5291                     mov             a,dpl
2212 F6             5292                     mov             @r0,a
2213 78D6           5293                     mov             r0,#chblok;volume
2215 7600           5294                     mov             @r0,#0
2217 120000   F     5295     maxg:           call            adrblok;dptr-адр ячейки 1й соотв блока 
221A E582           5296                     mov             a,dpl
221C FF             5297                     mov             r7,a
221D E583           5298                     mov             a,dph
221F FE             5299                     mov             r6,a
2220 78D7           5300                     mov             r0,#copy_hl;call                resa_hl;save_bl->dptr
2222 E6             5301                     mov             a,@r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    82

2223 F583           5302                     mov             dph,a
2225 08             5303                     inc             r0
2226 E6             5304                     mov             a,@r0
2227 F582           5305                     mov             dpl,a
2229 C3             5306                     clr             c;-4
222A E582           5307                     mov             a,dpl
222C 9404           5308                     subb            a,#4
222E F582           5309                     mov             dpl,a
2230 E583           5310                     mov             a,dph
2232 9400           5311                     subb            a,#0
2234 F583           5312                     mov             dph,a;dptr-4
                    5313                             ;;;;;;;;
2236 79D7           5314                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
2238 E583           5315                     mov             a,dph
223A F7             5316                     mov             @r1,a
223B 09             5317                     inc             r1
223C E582           5318                     mov             a,dpl
223E F7             5319                     mov             @r1,a
                    5320             ;;;;;;;;;
223F C3             5321                     clr             c;пришли в начало блока?
2240 E582           5322                     mov             a,dpl
2242 9F             5323                     subb            a,r7
2243 FF             5324                     mov             r7,a
2244 7006           5325                     jnz             nextmax
2246 E583           5326                     mov             a,dph
2248 9E             5327                     subb            a,r6
2249 FE             5328                     mov             r6,a
224A 601D           5329                     jz              outmax;
                    5330                     ;продолжаем сравнение
                    5331                     ;;;;;;;;;;;             
224C 78B8           5332     nextmax:        mov             r0,#work
224E 120000   F     5333                     call            resar2
                    5334                     ;call           altof;->float;r2..r5
2251 120000   F     5335                     call            move28;->r8..r11
2254 120000   F     5336                     call            loahl_r2                ;из яч внешн озу ->r2..r5
2257 120402         5337                     call            altof;->float;r2..r5
225A 1201D6         5338                     call            flcmp
225D 4005           5339                     jc              nomaxi
225F 78B8           5340                     mov             r0,#work;>
2261 120000   F     5341                     call            saver2;r2..r5
2264 78D6           5342     nomaxi: mov             r0,#chblok;volume;кол измерений блока
2266 06             5343                     inc             @r0
2267 80AE           5344                     jmp             maxg
2269 78B8           5345     outmax: mov             r0,#work;1ое измерение блока
226B 120000   F     5346                     call            resar2
                    5347                     ;call           altof;->float;r2..r5
226E 120000   F     5348                     call            move28;->r8..r11
2271 120000   F     5349                     call            loahl_r2                ;из яч внешн озу ->r2..r5
2274 120402         5350                     call            altof;->float;r2..r5
2277 1201D6         5351                     call            flcmp
227A 4005           5352                     jc              maxvix
227C 78B8           5353                     mov             r0,#work;>
227E 120000   F     5354                     call            saver2;r2..r5
2281 020000   F     5355     maxvix: jmp             minivix
                    5356     
                    5357     
2284 78CF           5358     bufl_dec:       mov             r0,#chbuf       
2286 120000   F     5359                     call            resar2  
2289 900000   F     5360                     mov             dptr,#ch_1       
228C 120000   F     5361                     call            ldc_ltemp
228F 1201D1         5362                     call            flsub
2292 78CF           5363                     mov             r0,#chbuf       
2294 120000   F     5364                     call            saver2  
2297 22             5365                     ret
                    5366     
                    5367     ;прерывание таймера Т2
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    83

2298                5368     inter2:         
2298 E5DA           5369                     mov             a,PCA0CPM0
229A 54BF           5370                     anl             a,#0bfh                         
229C F5DA           5371                     mov             PCA0CPM0,a
                    5372                     ;mov            a,T2CON         ;T2CON.2=0
                    5373                     ;anl            a,#0fbh
229E 75C800         5374                     mov             T2CON,#00;a
22A1 C2AD           5375                     clr             IE.5
22A3 32             5376                     reti
                    5377     
                    5378     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
22A4                5379      ind:   ;;;
22A4 E5E7           5380                     mov             a,EIE2
22A6 FA             5381                     mov             r2,a;save
22A7 75E700         5382                     mov             EIE2,#00H
22AA 120000   F     5383                     call            mign
22AD 7840           5384                     mov             r0,#bufind;+11
22AF 7F0C           5385                     mov             r7,#12
22B1 C287           5386      nexin: clr             p0.7;6
22B3 E6             5387                     mov             a,@r0
22B4 F59B           5388                     mov             SPI0DAT,a
22B6 20FBFD         5389                     jb              TXBSY,$
22B9 D287           5390                     setb            p0.7;6
22BB 120000   F     5391                     call            z_9             ;25mks
22BE 08             5392                     inc             r0;dec          r0
22BF DFF0           5393                     djnz            r7,nexin
22C1 EA             5394                     mov             a,r2
22C2 F5E7           5395                     mov             EIE2,a;#30H
22C4 22             5396                     ret
                    5397     
22C5                5398     rs_byte:
                    5399     ;               jnb     RI,S_R2
                    5400     ;               clr     RI
                    5401     ;               clr     C
                    5402     ;               mov     A,SBUF
                    5403     
                    5404     ;S_R2:          ;transfer
                    5405     ;               jnb   TI,$
                    5406     ;               clr   TI
                    5407             ;       mov   SBUF0,r2
                    5408             ;       reti
                    5409     ;!!! real interrupt filling
                    5410                     ;jnb    is_2,S_R2       ;256 samples -> clr
                    5411                     ;reti   ;there direct out
22C5                5412     S_R2:
22C5 C0D0           5413                     push    PSW
22C7 C0E0           5414                     push    ACC
                    5415     
22C9 E524           5416                     mov     A,cnt_out
22CB 6017           5417                     jz      S_R4    ;after last
22CD C3             5418                     clr     C
22CE 9401           5419                     subb    A,#1
22D0 4014           5420                     jc      S_R5            ;empty buf
22D2 30990E         5421                     jnb   TI,S_R3
22D5 C299           5422                     clr   TI
22D7 F524           5423                     mov     cnt_out,A
                    5424     ;??             push    1
22D9 852601         5425                     mov     1,p_out
22DC E7             5426                     mov     A,@R1
                    5427     ;               pop     1
22DD 0526           5428                     inc     p_out
                    5429     ;S_R_:
                    5430     ;               jnb   TI,S_R_
                    5431     ;               clr   TI
22DF F599           5432                     mov   SBUF0,A
22E1 8003           5433                     jmp     S_R5
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    84

22E3                5434     S_R3:
22E3 00             5435                     nop
                    5436             
22E4                5437     S_R4:
22E4 C299           5438                     clr     TI
                    5439                     
22E6                5440     S_R5:
                    5441     ;?              jb      is_cmd,S_R9             deadloop RS?
22E6 E525           5442                     mov     A,cnt_in
22E8 C3             5443                     clr     C
22E9 9403           5444                     subb    A,#3
22EB 400A           5445                     jc      S_R7    ;cmd isn't received
22ED 752500         5446     S_R6:           mov     cnt_in,#0
22F0 7527DB         5447                     mov     p_in,#buf_in    ; for new
22F3 D21D           5448                     setb    is_cmd
22F5 8015           5449                     jmp     S_R9;reti
                    5450     
22F7                5451     S_R7:
22F7 309812         5452                     jnb     RI,S_R9
22FA C298           5453                     clr     RI
22FC E599           5454                     mov     A,SBUF0
                    5455     ;??             push    1
22FE A927           5456                     mov     R1,p_in
2300 F7             5457                     mov     @R1,A
2301 0527           5458                     inc     p_in
2303 0525           5459                     inc     cnt_in
2305 E525           5460                     mov     A,cnt_in
2307 B40302         5461                     cjne    A,#3,S_R9
                    5462     ;??             pop     1
230A 80E1           5463                     jmp     S_R6
230C                5464     S_R9:
230C D0E0           5465                     pop     ACC
230E D0D0           5466                     pop     PSW
2310 32             5467                     reti
2311                5468     cmd_tree:                                       ;??
2311 754E7F         5469                     mov     cmd_rez,#7Fh
2314 78DB           5470                     mov     r0,#buf_in
                    5471     ;               mov     A,#'B'
                    5472     ;               subb    A,@R0
                    5473     ;               jz      ta0
2316 B64202         5474                     cjne    @R0,#'B',tb_0
2319 8003           5475                     jmp             ta0
231B                5476     tb_0:
231B 020000   F     5477                             jmp             tb
231E                5478     ta0:
231E 08             5479                     inc     r0
231F B60005         5480                     cjne    @R0,#0,ta1
2322 C21E           5481                     clr     is_rs           ;B0
2324 020000   F     5482                     jmp     tr9
2327                5483     ta1:
2327 B60125         5484                     cjne    @R0,#1,ta2
232A D21E           5485                     setb    is_rs   ;?
232C 789A           5486                     mov             R0,#parT
232E E6             5487                     mov             A,@R0
232F B4060D         5488                     cjne    A,#6,ta2_
2332 D20C           5489                     setb    is_2
2334 75A880         5490             mov     IE,#80h ;Снятие enable RS
2337 7524C8         5491                     mov     cnt_out,#200
233A C21E           5492                     clr             is_rs
233C 020000   F     5493                     jmp     tr9
233F                5494     ta2_:
233F B4050A         5495                     cjne    A,#5,ta3_
2342 D20C           5496                     setb    is_2
2344 75A880         5497                     mov     IE,#80h
2347 7524C8         5498                     mov     cnt_out,#200
234A C21E           5499                     clr             is_rs
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    85

234C                5500     ta3_:
234C 020000   F     5501                     jmp     tr9
234F                5502     ta2:    ;?#2 real need
234F 78F4           5503                     mov     R0,#0F4h        ;?F8h   ;abin
2351 C2AF           5504                     clr     EA
2353 79AE           5505                     mov     R1,#diap
2355 E7             5506                     mov     A,@R1
2356 F6             5507                     mov     @R0,A
2357 08             5508                     inc     R0
2358 799A           5509                     mov     R1,#parT
235A E7             5510                     mov     A,@R1
235B F6             5511                     mov     @R0,A
235C 08             5512                     inc     R0
235D 7938           5513                     mov     R1,#nblok
235F E7             5514                     mov     A,@R1
2360 F6             5515                     mov     @R0,A
2361 08             5516                     inc     R0
2362 79AF           5517                     mov     R1,#parN
2364 E7             5518                     mov     A,@R1
2365 F6             5519                     mov     @R0,A
2366 08             5520                     inc     R0
2367 E520           5521                     mov     A,20h   ;bitizm,AVP,bitvi11 usefool
2369 300F04         5522             jnb             bitnul,ta3
236C 4480           5523                     orl     A,#80h
236E 8002           5524                     jmp     ta4
2370                5525     ta3:
2370 547F           5526                     anl     A,#7Fh
2372                5527     ta4:
2372 301804         5528             jnb             knizm,ta5
2375 4401           5529                     orl     A,#1h
2377 8002           5530                     jmp     ta6
2379                5531     ta5:
2379 54FE           5532                     anl     A,#0FEh
237B                5533     ta6:
237B F6             5534                     mov     @R0,A
237C 08             5535                     inc     R0
                    5536     
237D 79CD           5537                     mov     R1,#interva
237F E7             5538                     mov     A,@R1
2380 F6             5539                     mov     @R0,A
2381 08             5540                     inc     r0
2382 09             5541                     inc     r1
2383 E7             5542                     mov     A,@R1
2384 F6             5543                     mov     @R0,A           ;interva+1
2385 08             5544                     inc     r0
                    5545     
2386 79BC           5546                     mov     R1,#konstA      ;?B3 to make
2388 E7             5547                     mov     A,@R1
2389 FA             5548                     mov     R2,A
                    5549     ;               mov     R2,@R1
238A 09             5550                     inc     r1
238B E7             5551                     mov     A,@R1
238C FB             5552                     mov     R3,A
238D 09             5553                     inc     r1
238E E7             5554                     mov     A,@R1
238F FC             5555                     mov     R4,A
2390 09             5556                     inc     r1
2391 E7             5557                     mov     A,@R1
2392 FD             5558                     mov     R5,A
2393 120343         5559                     call    ftol
                    5560     ;               mov     A,R2            =0 always
                    5561     ;               mov     @R0,A
                    5562     ;               inc     r0
                    5563     ;               mov     A,R3
                    5564     ;               mov     @R0,A
                    5565     ;               inc     r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    86

2396 EC             5566                     mov     A,R4
2397 F6             5567                     mov     @R0,A
2398 08             5568                     inc     r0
2399 ED             5569                     mov     A,R5
239A F6             5570                     mov     @R0,A
                    5571     
                    5572     ;               mov     A,@R1                   old=float
                    5573     ;               mov     @R0,A
                    5574     ;               inc     r0
                    5575     ;               inc     r1
                    5576     ;               mov     A,@R1
                    5577     ;               mov     @R0,A
                    5578     ;               inc     r0
                    5579     ;               inc     r1
                    5580     ;               mov     A,@R1
                    5581     ;               mov     @R0,A
                    5582     ;               inc     r0
                    5583     ;               inc     r1
                    5584     ;               mov     A,@R1
                    5585     ;               mov     @R0,A
                    5586     
239B 7526F4         5587                     mov     p_out,#00F4h    ;abin
239E 75240B         5588                     mov     cnt_out,#11
                    5589     ;               mov     cmd_rez,#7Ah    ;B2 sign
23A1 020000   F     5590                     jmp     tr9
                    5591                     
23A4                5592     tb:
23A4 B64C17         5593                     cjne    @R0,#'L',tc
23A7 08             5594                     inc     r0
23A8 E6             5595                     mov     A,@R0
23A9 C3             5596                     clr     C
23AA 940A           5597                     subb    A,#10
23AC 500A           5598                     jnc     mtb2    ;
23AE E6             5599                     mov     A,@R0
23AF 78AE           5600                     mov     R0,#diap
23B1 F6             5601                     mov     @R0,A
23B2 120000   F     5602             call    loadUS
23B5 020000   F     5603                     jmp     tr9
                    5604     
23B8 754E7D         5605     mtb2:           mov     cmd_rez,#7Dh    ;Err par
23BB 020000   F     5606                     jmp     tr9
                    5607     
                    5608     
23BE                5609     tc:
23BE B65432         5610                     cjne    @R0,#'T',td
23C1 08             5611                     inc     r0
23C2 E6             5612                     mov     A,@R0
23C3 C3             5613                     clr     C
23C4 9407           5614                     subb    A,#7
23C6 4002           5615                     jc              tc1
23C8 8049           5616                     jmp             mtf2    ;
23CA                5617     tc1:
23CA E6             5618                     mov             A,@R0
23CB 789A           5619                     mov             R0,#parT
23CD F6             5620                     mov             @R0,A
23CE B4060D         5621                     cjne    A,#6,tc2
                    5622     ;               jnb             is_rs,tc2               yet=0
23D1 D20C           5623                     setb    is_2
23D3 75A880         5624                             mov     IE,#80h
23D6 7524C8         5625                     mov             cnt_out,#200
23D9 C21E           5626                     clr             is_rs
23DB 020000   F     5627                     jmp             tr9
23DE B4050D         5628     tc2:            cjne    A,#5,tc3
                    5629     ;               jnb             is_rs,tc3
23E1 D20C           5630                     setb    is_2
23E3 75A880         5631             mov     IE,#80h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    87

23E6 7524C8         5632                     mov             cnt_out,#200
23E9 C21E           5633                     clr             is_rs
23EB 020000   F     5634                     jmp             tr9
23EE C20C           5635     tc3: clr        is_2
23F0 020000   F     5636                     jmp             tr9
                    5637     
23F3                5638     td:
23F3 B65245         5639                     cjne    @R0,#'R',te
23F6 08             5640                     inc     r0
23F7 E6             5641                     mov     A,@R0                   ;AAAAAAnn, nn=cmd
23F8 5403           5642                     anl     A,#3
23FA B40005         5643                     cjne    A,#0,te1
23FD C206           5644                     clr     bitvi11
23FF 020000   F     5645                     jmp     tr9
2402                5646     te1:
2402 B40105         5647                     cjne    A,#1,te2
2405 D206           5648                     setb    bitvi11
2407 020000   F     5649                     jmp     tr9
240A                5650     te2:
240A B40306         5651                     cjne    A,#03h,mtf2
240D 754E7D         5652                     mov     cmd_rez,#7Dh    ;Err par
2410 020000   F     5653                     jmp     tr9
2413                5654     mtf2:           ;=2
2413 E6             5655             mov     A,@R0
2414 C3             5656                     clr     C
2415 13             5657                     rrc     A
2416 C3             5658                     clr     C
2417 13             5659                     rrc     A
2418 C002           5660             push    2               ;?
241A C003           5661             push    3               ;?
241C C004           5662             push    4               ;?
241E C005           5663             push    5               ;?
2420 FC             5664                     mov     r4,A
2421 08             5665                     inc     r0
2422 E6             5666                     mov     A,@R0
2423 FD             5667                     mov     r5,A
2424 7B00           5668                     mov     r3,#0
2426 7A00           5669                     mov     r2,#0
2428 120402         5670                     call    altof                   ;r2..r5->float
242B 78BC           5671                     mov     r0,#konstA
242D 120000   F     5672                     call    saver2
2430 D005           5673             pop     5
2432 D004           5674             pop     4
2434 D003           5675             pop     3
2436 D002           5676             pop     2
2438 020000   F     5677                     jmp     tr9
                    5678     
243B                5679     te:
243B B6480E         5680                     cjne    @R0,#'H',mtf
243E 08             5681                     inc     r0
243F E6             5682                     mov     A,@R0
2440 C3             5683                     clr     C
2441 9404           5684                     subb    A,#4
2443 50CE           5685                     jnc     mtf2    ;
2445 E6             5686                     mov     A,@R0
2446 78AF           5687                     mov     R0,#parN
                    5688     ;       inc     A
2448 F6             5689                     mov     @R0,A
                    5690     ;               inc     parN
2449 020000   F     5691                     jmp     tr9
                    5692     
                    5693     
244C B6410E         5694     mtf:            cjne    @R0,#'A',mtg
244F 08             5695                     inc     r0
2450 B60005         5696                     cjne    @R0,#0,mtf1
2453 C205           5697                     clr     bitavp
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    88

2455 020000   F     5698                     jmp     tr9
2458 D205           5699     mtf1:           setb    bitavp
245A 020000   F     5700                     jmp     tr9
                    5701     
245D B6512D         5702     mtg:            cjne    @R0,#'Q',mth
2460 08             5703                     inc     r0
2461 B60112         5704                     cjne    @R0,#1,mtf3
2464 D20F           5705                     setb    bitnul  ;?clr, as Izm?
2466 789C           5706                     mov             r0,#rez_A3      ;A3
2468 120000   F     5707                     call            resar2
246B 786A           5708                     mov             r0,#rez_A0      
246D 120000   F     5709                     call            saver2;A0<-A3
2470 120000   F     5710                     call            loadUS
2473 020000   F     5711                     jmp     tr9
2476 B6029A         5712     mtf3:           cjne    @R0,#02,mtf2
                    5713     ;               clr     bitnul  ;?clr, as Izm?
                    5714     ;               mov     r0,#rez_A0
                    5715     ;               call    clear4
                    5716     ;               call    loadUS
                    5717     ;               jmp     tr9
2479 D2AF           5718                     setb    EA
247B C21D           5719                     clr     is_cmd                          
                    5720     ;               pop     1
                    5721     ;               pop     1
                    5722     ;               jmp     ybnul
247D C20F           5723             clr             bitnul
247F 900000   F     5724                     mov             DPTR,#ch0 
2482 120000   F     5725                     CALL    ldc_long                 ; r2..r5 <-- 0
2485 786A           5726                     mov             r0,#rez_A0      ;A0=0
2487 120000   F     5727                     call            saver2
248A 020000   F     5728                     jmp             tr9     ;goto7
                    5729     
248D B64911         5730     mth:            cjne    @R0,#'I',mti0
2490 08             5731                     inc     r0
2491 B6000F         5732                     cjne    @R0,#0,mth1
2494 D218           5733                     setb    knizm   ;?bitizm
2496 E54E           5734                     mov     A,cmd_rez
2498 F599           5735                     mov     SBUF0,A
249A C21D           5736                     clr     is_cmd
249C D21F           5737             setb    is_izm
249E 020000   F     5738             jmp     keyb1           ;--
                    5739     
24A1 8013           5740     mti0:   jmp     mti
                    5741     
24A3                5742     mth1:
24A3 B6010D         5743                     cjne    @R0,#1,mth2
                    5744     ;               clr     bitizm                  ;begin reset
24A6 C218           5745                     clr     knizm   ;?bitizm
24A8 E54E           5746                     mov     A,cmd_rez
24AA F599           5747                     mov     SBUF0,A
24AC C21D           5748                     clr     is_cmd
24AE D21F           5749             setb    is_izm
24B0 020000   F     5750             jmp     keyb1           ;--
                    5751     
24B3                5752     mth2:   ;I2
                    5753     ;               clr     is_2    ;end 10&2 ms
                    5754     ;               clr     is_rs   ;end 10&2 ms
24B3 020000   F     5755                     jmp     tr9
                    5756     
24B6 B65300         5757     mti:            cjne    @R0,#'S',mtx            ;RS speed
                    5758     ;               inc     r0
                    5759     ;       clr     EA
                    5760     ;               cjne    @R0,#0,mti1
                    5761     ;               mov     TH1,#220        ;19600
                    5762     ;               setb    EA
                    5763     ;               jmp     tr9
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    89

24B9                5764     mti1:
                    5765     ;               mov     TH1,#244
                    5766     ;               setb    EA
                    5767     ;               jmp     tr9
                    5768     
24B9                5769     mtx:
24B9 B64D14         5770                     cjne    @R0,#'M',mty
24BC 08             5771                     inc     r0
24BD E6             5772                     mov     A,@R0                   ;AAAAAnnn, nnn=cmd
24BE 5407           5773                     anl     A,#7
24C0 B40510         5774                     cjne    A,#5,mtx5
24C3 E6             5775                     mov     A,@R0
24C4 C3             5776                     clr     C
24C5 13             5777                     rrc     A
24C6 C3             5778                     clr     C
24C7 13             5779                     rrc     A
24C8 C3             5780                     clr     C
24C9 13             5781                     rrc     A
24CA 7938           5782                     mov     R1,#nblok
24CC F7             5783                     mov     @R1,A
24CD 020000   F     5784                     jmp     tr9
                    5785     
24D0 020000   F     5786     mty: jmp        mty2
                    5787     
24D3 C3             5788     mtx5:           clr     C
24D4 9406           5789                     subb    A,#6
24D6 5007           5790                     jnc     mtf4
24D8 E6             5791                     mov     A,@R0
24D9 B60009         5792                     cjne    @R0,#0,mtx0
24DC 020000   F     5793                     jmp     chaibl9         ;clear??SP
24DF 754E7D         5794     mtf4:           mov     cmd_rez,#7Dh    ;Err par
24E2 020000   F     5795                     jmp     tr9
                    5796     
24E5                5797     mtx0:
24E5 B6030B         5798                     cjne    @R0,#3,mtx1     
24E8 C20A           5799                     clr             bitbon
24EA 534BFD         5800                     anl     bufind+11,#0fdh;??jmp bufon
24ED 120000   F     5801                     call    ind
24F0 020000   F     5802                     jmp     tr9
                    5803     ;mtx0_:
                    5804     ;               mov     A,cmd_rez
                    5805     ;               mov     SBUF0,A
                    5806     ;               clr     is_cmd
                    5807     ;       setb    is_mem  ;?
                    5808     ;               pop     0               ;?
                    5809     ;       jmp     labelB;keyb1    ;---
                    5810     
24F3                5811     mtx1:
24F3 B60211         5812                     cjne    @R0,#2,mtx2             ;start
24F6 D20A           5813                     setb    bitbon  ;bitmem
24F8 79D5           5814                     mov     r1,#volume      ;work   обьем блока
24FA 7700           5815                     mov     @r1,#00
24FC 09             5816                     inc     r1
24FD 77C7           5817                     mov     @r1,#0c7h               ;320h/4
24FF 434B02         5818                     orl     bufind+11,#02h  ; on pysk
2502 120000   F     5819                     call    ind
2505 8074           5820                     jmp             tr9
                    5821     
2507                5822     mtx2:
2507 B60454         5823                     cjne    @R0,#4,mtx3             ;to PC
250A 120000   F     5824                     call    adrblok         ;dptr-
                    5825     ;               setb    is_mem
                    5826     ;-              setb    bitbon  ;?Mem will to fill?
                    5827     
250D C2AF           5828                     clr     EA
250F 7524C8         5829                     mov     cnt_out,#200
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    90

2512 75997F         5830                     mov     SBUF0,#7Fh
2515                5831     mtxa:
2515 120000   F     5832             call    reA3_X          ;over r2..r5<-внешн пам
2518 79D8           5833             mov                     r1,#copy_hl+1;next?
251A E582           5834             mov                     a,dpl
251C F7             5835             mov                     @r1,a           ;low
251D E583           5836             mov                     a,dph
251F 19             5837             dec                     r1
2520 F7             5838             mov                     @r1,a                   ;high
2521 900000   F     5839             mov             dptr,#ch10
2524 120000   F     5840                     call    ldc_ltemp
2527 120000   F     5841                     call    zdiv                    ;form4=invertif <0; divide
252A 120000   F     5842                     call    maform          ;setb/clr       znmat
252D 789C           5843                     mov             r0,#rez_A3      ;?
252F                5844     mtxb:
252F 3099FD         5845                     jnb   TI,mtxb
2532 C299           5846                     clr   TI
2534 8699           5847                     mov     SBUF0,@r0
2536 08             5848                     inc     r0
2537                5849     mtxc:
2537 3099FD         5850                     jnb   TI,mtxc
253A C299           5851                     clr   TI
253C 8699           5852                     mov     SBUF0,@r0
253E 08             5853                     inc     r0
253F                5854     mtxd:
253F 3099FD         5855                     jnb   TI,mtxd
2542 C299           5856                     clr   TI
2544 8699           5857                     mov     SBUF0,@r0
2546 08             5858                     inc     r0
2547                5859     mtxe:
2547 3099FD         5860                     jnb   TI,mtxe
254A C299           5861                     clr   TI
254C 8699           5862                     mov             SBUF0,@r0
                    5863     
254E 79D8           5864                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес внешн озу введе
                             нного лемента
2550 E7             5865                     mov                     A,@r1           ;low
2551 F582           5866                     mov                     dpl,A
2553 19             5867                     dec                     r1
2554 E7             5868                     mov                     A,@r1                   ;high
2555 F583           5869                     mov                     dph,A
2557 D524BB         5870                     djnz    cnt_out,mtxa
                    5871     
255A D2AF           5872                     setb    EA
255C 801D           5873                     jmp     tr9
                    5874     
255E                5875     mtx3:           ;M1 only
255E C2AF           5876                     clr     EA
2560 E6             5877                     mov     A,@R0
2561 C3             5878                     clr     C
2562 13             5879                     rrc     A
2563 C3             5880                     clr     C
2564 13             5881                     rrc     A
2565 C3             5882                     clr     C
2566 13             5883                     rrc     A
2567 79CD           5884                     mov     R1,#interva
2569 F7             5885                     mov     @R1,A
256A 08             5886                     inc     r0
256B 09             5887                     inc     r1
256C E6             5888                     mov     A,@R0
256D F7             5889                     mov     @R1,A           ;interva+1
256E 800B           5890                     jmp     tr9
                    5891     
                    5892     
2570                5893     mty2:
2570 B67F05         5894                     cjne    @R0,#7Fh,tz
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    91

2573 75997F         5895                     mov     SBUF0,#7Fh
2576 8003           5896                     jmp     tr9
                    5897     
2578                5898     tz:
2578 754E7E         5899                     mov     cmd_rez,#7Eh    ;Err cmd
                    5900     
257B E54E           5901     tr9:            mov     A,cmd_rez
257D F599           5902                     mov     SBUF0,A
257F D2AF           5903                     setb    EA
2581 C21D           5904                     clr     is_cmd
2583 22             5905                     ret
                    5906     
2584                5907     chaibl9:        ;M0-Mem clear
2584 C2AF           5908                     clr             EA
2586 120000   F     5909                     call    adrblok
2589 79B8           5910                     mov             r1,#work
258B 7703           5911                     mov             @r1,#03
258D 09             5912                     inc             r1
258E 7720           5913                     mov             @r1,#20h                        ;320h
2590                5914     goonof9:
2590 E4             5915                     clr             a
2591 F0             5916                     movx    @dptr,a
2592 A3             5917                     inc             dptr
2593 79B9           5918                     mov             r1,#work+1
2595 120000   F     5919                     call    chminus
2598 78B8           5920                     mov             r0,#work
259A E6             5921                     mov             a,@r0
259B 30E7F2         5922                     jnb             acc.7,goonof9
259E 120000   F     5923             call    adrblok
25A1 120000   F     5924             call    save_hl
25A4 80D5           5925                     jmp     tr9
                    5926     
25A6 C2AF           5927     reA3_m: clr     EA              ;Mem to PC
                    5928     ;               mov             r0,#0F9h
                    5929     ;               movx    a,@dptr
                    5930     ;               mov             @r0,a
                    5931     ;               inc             r0
                    5932     ;               inc             dptr
                    5933     ;               movx    a,@dptr
                    5934     ;               mov             @r0,a
                    5935     ;               inc             r0
                    5936     ;               inc             dptr
                    5937     ;               movx    a,@dptr
                    5938     ;               mov             @r0,a
                    5939     ;               inc             r0
                    5940     ;               inc             dptr
                    5941     ;               movx    a,@dptr
                    5942     ;               mov             @r0,a
                    5943     ;               inc             dptr
                    5944     ;               mov             p_out,#0F9h
                    5945     ;               mov             cnt_out,#4
                    5946     ;               mov     SBUF0,#7Fh      ;was cmd_rez
                    5947     ;               ret
                    5948     
25A8 E538           5949     save_hlm:       mov             a,nblok
25AA B40117         5950                     cjne    a,#1,sm_hl1
25AD 79D3           5951                     mov             r1,#saven_bl
25AF E583           5952     sm_hl:  mov             a,dph
25B1 F7             5953                     mov             @r1,a
25B2 09             5954                     inc             r1
25B3 E582           5955                     mov             a,dpl
25B5 F7             5956                     mov             @r1,a
                    5957                     ;не конец ли блока
25B6 79D6           5958                     mov                     r1,#volume+1;work+1
25B8 120000   F     5959                     call            chminus
25BB 78D5           5960                     mov             r0,#volume
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    92

25BD E6             5961                     mov             a,@r0
25BE 30E702         5962                     jnb             acc.7,noend_m
25C1 C20E           5963                     clr             is_mem                  ;?breakpoint
                    5964     ;               anl                     bufind+11,#0fdh ;?
                    5965     ;               call            ind                                                     ;?
25C3 22             5966     noend_m: ret
25C4 B40204         5967     sm_hl1: cjne    a,#2,sm_hl2
25C7 79C0           5968                                     mov             r1,#saven_bl2
25C9 80E4           5969                                     jmp             sm_hl
25CB B40304         5970     sm_hl2: cjne    a,#3,sm_hl3
25CE 79C2           5971                                     mov             r1,#saven_bl3
25D0 80DD           5972                                     jmp             sm_hl
25D2 79D9           5973     sm_hl3: mov             r1,#saven_bl4
25D4 80D9           5974                                     jmp             sm_hl
                    5975     
                    5976     
                    5977     ;$include (subr7.asm) 
                +1  5978     ;тест интерфейса
25D6            +1  5979     testrs: ;jb     p0.3,goprogr
25D6 C2AC       +1  5980                     clr     IE.4
25D8 759955     +1  5981     test1:  mov     SBUF0,#55h
25DB 3099FD     +1  5982                     jnb     SCON0.1,$
25DE 78B8       +1  5983                     mov     r0,#work;chtest
25E0 76BE       +1  5984                     mov     @r0,#190d;60
                +1  5985     
25E2 309825     +1  5986     test01: jnb     SCON0.0,test2
25E5 E599       +1  5987                     mov     a,SBUF0
25E7 B45512     +1  5988                     cjne    a,#55h,test3
25EA C299       +1  5989     test4:  clr     SCON0.1
25EC C298       +1  5990                     clr     SCON0.0
25EE 7D0A       +1  5991                     mov     r5,#10
25F0 7840       +1  5992                     mov     r0,#bufind              ;- - - -
25F2 762D       +1  5993     test04: mov     @r0,#2dh
25F4 08         +1  5994                     inc     r0
25F5 DDFB       +1  5995                     djnz    r5,test04
25F7 120000   F +1  5996                     call    ind
25FA 80DC       +1  5997                     jmp     test1
25FC            +1  5998     test3:  
25FC 753933     +1  5999                     mov     nuerr,#33h
25FF 120000   F +1  6000                     call    error           ;на кран прибора ERR 3
2602 120000   F +1  6001                     call    ind;
2605 120000   F +1  6002                     call    z_01s           ;100ms
2608 80E0       +1  6003                     jmp     test4
260A 78B8       +1  6004     test2:  mov     r0,#work;chtest
260C B60002     +1  6005                     cjne    @r0,#0,test02
260F 8003       +1  6006                     jmp     test5
2611 16         +1  6007     test02: dec     @r0
2612 80CE       +1  6008                     jmp     test01
2614 120000   F +1  6009     test5:  call    z_1ms           ;1ms
2617 C299       +1  6010                     clr     SCON0.1
2619 753933     +1  6011                     mov     nuerr,#33h
261C 120000   F +1  6012                     call    error           ;на кран прибора ERR 3
261F 120000   F +1  6013                     call    ind
2622 120000   F +1  6014                     call    z_01s           ;100ms
2625 80B1       +1  6015                     jmp     test1   
                +1  6016     
                +1  6017     
2627 7A08       +1  6018     zapadc:     mov R2,#8
2629 D297       +1  6019     sdv:        setb P1.7
262B 33         +1  6020                 rlc A
262C 9296       +1  6021                     mov P1.6,C
262E 120000   F +1  6022                     call tim2
                +1  6023                                     
2631 C297       +1  6024                     clr P1.7
2633 120000   F +1  6025                     call tim2
2636 DAF1       +1  6026                     djnz R2,sdv
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    93

2638 D296       +1  6027                     setb P1.6
263A 22         +1  6028                     ret
                +1  6029     
263B 7A08       +1  6030     chtadc:     mov R2,#8
263D D297       +1  6031     sdv1:       setb P1.7
263F 120000   F +1  6032                 call tim2
2642 C297       +1  6033                     clr P1.7
2644 A296       +1  6034                     mov C,P1.6
2646 33         +1  6035                     rlc A
2647 120000   F +1  6036                     call tim2
264A DAF1       +1  6037                     djnz R2,sdv1
264C 22         +1  6038                     ret
                +1  6039     
264D 7E30       +1  6040     tim:      mov R6,#30h;38h
264F DEFE       +1  6041     tim1:     djnz R6,tim1
2651 22         +1  6042               ret
                +1  6043               
2652 7E10       +1  6044     tim2:     mov R6,#10h;14h
2654 DEFE       +1  6045     tim3:     djnz R6,tim3
2656 22         +1  6046               ret
                +1  6047     
                +1  6048     ;запись из acc
2657 C3         +1  6049     write_x1:       clr     c
2658            +1  6050     writeD_x1:
2658 92B1       +1  6051                     mov P3.1,c        ;запись
265A F5A0       +1  6052                 mov P2,A
265C D2B3       +1  6053                     setb P3.3
265E 120000   F +1  6054                     call z_5
2661 C2B3       +1  6055                     clr P3.3
2663 75A0FF     +1  6056                     mov P2,#0FFh
2666 22         +1  6057                     ret
                +1  6058     
                +1  6059     ;чтение в acc
2667 C3         +1  6060     read_x2:        clr     c  
2668 92B1       +1  6061                     mov P3.1,c        ;чтение
266A D2B2       +1  6062                     setb P3.2
266C D2B3       +1  6063                     setb P3.3
266E 120000   F +1  6064                     call z_5
2671 E5A0       +1  6065                     mov A,P2
2673 C2B3       +1  6066                     clr P3.3
2675 C2B2       +1  6067                     clr P3.2
2677 22         +1  6068                     ret
                +1  6069     
2678 120000   F +1  6070     loop:           call read_x2;x2    ;ожидание флага готовности
267B 20E7FA     +1  6071                     jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
267E 22         +1  6072                     ret           ;возврат, если бит А(7)<>1
                +1  6073     
                +1  6074     
                +1  6075     ;принимаемый байт в acc
                +1  6076     ;прием байта последовательным кодом старшими разрядами вперед
267F 7A08       +1  6077     read:      mov R2,#8
2681 C297       +1  6078     re1:       clr P1.7;P1.2
2683 120000   F +1  6079                call tim2      ;5mks
2686 A294       +1  6080                     mov C,P1.4;P1.0
2688 33         +1  6081                     rlc A           
2689 D297       +1  6082                     setb P1.7;P1.2
268B 120000   F +1  6083                     call tim2
268E DAF1       +1  6084                     djnz R2,re1
2690 22         +1  6085                     ret
                +1  6086     
                +1  6087      ;in r0-count   
                +1  6088     ;r10,r11-значение с котоым сравнивается счетчик
                +1  6089     ;r2..r5 -значение счетчика
2691            +1  6090     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
2691 E6         +1  6091                     mov             a,@r0
2692 FC         +1  6092                     mov             r4,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    94

2693 08         +1  6093                     inc             r0
2694 E6         +1  6094                     mov             a,@r0
2695 FD         +1  6095                     mov             r5,a
2696 7B00       +1  6096                     mov             r3,#0
2698 7A00       +1  6097                     mov             r2,#0
269A 750800     +1  6098                     mov             r8,#0;clr                       r8
269D 750900     +1  6099                     mov             r9,#0;clr                       r9
26A0 120000   F +1  6100                     call            lcmp
26A3 22         +1  6101                     ret
                +1  6102     
                +1  6103     
                +1  6104     ;in-r1-count
26A4            +1  6105     chdec:          ;mov            r1,#chavt               ;chavt-1
26A4 E7         +1  6106                             mov             a,@r1
26A5 FC         +1  6107                             mov             r4,a
26A6 09         +1  6108                             inc             r1
26A7 E7         +1  6109                             mov             a,@r1
26A8 FD         +1  6110                             mov             r5,a
26A9 C202       +1  6111                             clr             rr2
26AB C203       +1  6112                             clr             rr3
26AD 900000   F +1  6113                             mov             dptr,#ch1        
26B0 120000   F +1  6114                             call            ldc_ltemp
26B3 120000   F +1  6115                             call            lsub
26B6 ED         +1  6116                             mov             a,r5
26B7 F7         +1  6117                             mov             @r1,a
26B8 19         +1  6118                             dec             r1
26B9 EC         +1  6119                             mov             a,r4
26BA F7         +1  6120                             mov             @r1,a
26BB 22         +1  6121                             ret      
                +1  6122     
                +1  6123     
26BC            +1  6124     loadUS: ;если идет тест измерения ус восстановить для теста
26BC 201533     +1  6125                             jb              biteizm,yestest
26BF 79AE       +1  6126                             mov             r1,#diap
26C1 E7         +1  6127                             mov             a,@r1
26C2 23         +1  6128                             rl              a;*2
26C3 FC         +1  6129                             mov             r4,a                    ;save a
26C4 900000   F +1  6130                             mov             dptr,#tabus
26C7 93         +1  6131                             movc            a,@a+dptr
26C8 FA         +1  6132                             mov             r2,a                    ;high byte
26C9 E584       +1  6133                             mov             a,p4
26CB 5401       +1  6134                             anl             a,#01
26CD 4A         +1  6135                             orl             a,r2
26CE F584       +1  6136                             mov             p4,a
26D0 0C         +1  6137                             inc             r4
26D1 EC         +1  6138                             mov             a,r4
26D2 93         +1  6139                             movc            a,@a+dptr
26D3 FB         +1  6140                             mov             r3,a                    ;low byte
26D4 E585       +1  6141                             mov             a,p5
26D6 5401       +1  6142                             anl             a,#01
26D8 4B         +1  6143                             orl             a,r3
26D9 F585       +1  6144                             mov             p5,a
26DB 799A       +1  6145                             mov             r1,#parT
26DD B7010E     +1  6146                             cjne            @r1,#1,bret
26E0 79AE       +1  6147                             mov             r1,#diap                  ;10s (parT=1)
26E2 7405       +1  6148                             mov             a,#5                      ;10-8..10-11 p4.1=1
26E4 C3         +1  6149                             clr             c
26E5 97         +1  6150                             subb            a,@r1
26E6 5006       +1  6151                             jnc             bret
26E8 E584       +1  6152                             mov             a,p4
26EA 4402       +1  6153                             orl             a,#02
26EC F584       +1  6154                             mov             p4,a                     ;10-8..10-11 p4.1=1
26EE 120000   F +1  6155     bret:                   call            louizm          ;us если вкл кн ИЗМЕР
26F1 22         +1  6156                             ret
26F2            +1  6157     yestest:
26F2 120000   F +1  6158                             call            lotpus          ;ус теста измерения
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    95

26F5 22         +1  6159                             ret
                +1  6160                             
                +1  6161     ;загр ус для кор 0
                +1  6162     ;dptr-
26F6 E4         +1  6163     lospus:         clr             a
                +1  6164                             ;movc   a,@a+dptr
                +1  6165                             ;mov            r2,a                    ;high byte
                +1  6166                             ;mov            a,p4
                +1  6167                             ;anl            a,#01
                +1  6168                             ;orl            a,r2
                +1  6169                             ;mov            p4,a
                +1  6170                             ;inc            dptr
26F7 E4         +1  6171                             clr             a
26F8 93         +1  6172                             movc            a,@a+dptr
26F9 FB         +1  6173                             mov             r3,a                    ;low byte
26FA E585       +1  6174                             mov             a,p5
26FC 54BF       +1  6175                             anl             a,#0bfh;01
26FE 4B         +1  6176                             orl             a,r3
26FF F585       +1  6177                             mov             p5,a
2701 22         +1  6178                             ret
                +1  6179     
2702 80         +1  6180     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  6181     
                +1  6182     ;us кнопка измерения выкл
2703 88D6       +1  6183     tabus:          db              88h,0d6h         ;10-2
2705 88F6       +1  6184                             db              88h,0f6h         ;10-3
2707 88D6       +1  6185                             db              88h,0d6h         ;10-4
2709 88F6       +1  6186                             db              88h,0f6h         ;10-5
270B 9AD6       +1  6187                             db              9ah,0d6h         ;10-6
270D 9AF6       +1  6188                             db              9ah,0f6h         ;10-7
270F ACD6       +1  6189                             db              0ach,0d6h        ;10-8
2711 ACF6       +1  6190                             db              0ach,0f6h        ;10-9
2713 C8D6       +1  6191                             db              0c8h,0d6h        ;10-10
2715 C8F6       +1  6192                             db              0c8h,0f6h        ;10-11
                +1  6193     
2717 66E6       +1  6194     tabt11:         db              66h,0e6h;10-11
2719 32E6       +1  6195     tabt9:          db              32h,0e6h;10-9
271B 18EE       +1  6196     tabt7:          db              18h,0eeh;10-7
                +1  6197     
                +1  6198      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  6199     ;в зав от parT (Tизм)
271D 79B7       +1  6200     loadT:          mov             r1,#load;parT
271F 7840       +1  6201     lolevT:         mov             r0,#bufind+0
2721 7B0A       +1  6202                             mov             r3,#10
2723 75F00A     +1  6203                             mov             b,#10
2726 E7         +1  6204                             mov             a,@r1
2727 A4         +1  6205                             mul             ab
2728 FC         +1  6206                             mov             r4,a                    ;save a
2729 900000   F +1  6207                             mov             dptr,#textT
272C 93         +1  6208             lod1:   movc    a,@a+dptr
272D F6         +1  6209                             mov             @r0,a
272E 08         +1  6210                             inc             r0
272F 0C         +1  6211                             inc             r4
2730 EC         +1  6212                             mov             a,r4
2731 DBF9       +1  6213                             djnz    r3,lod1
2733 534B03     +1  6214                             anl                     bufind+11,#03h          ;гашение точек
2736 22         +1  6215                             ret     
                +1  6216     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  6217     ;dptr-адр строки текста         
2737            +1  6218     lotext:         
2737 7B0A       +1  6219                             mov             r3,#10
2739 7840       +1  6220                             mov             r0,#bufind+0
273B E4         +1  6221     lodt:                   clr             a
273C 93         +1  6222                             movc            a,@a+dptr
273D F6         +1  6223                             mov             @r0,a
273E 08         +1  6224                             inc             r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    96

273F A3         +1  6225                             inc             dptr
2740 DBF9       +1  6226                             djnz            r3,lodt
2742 534B03     +1  6227                             anl             bufind+11,#03h          ;гашение точек
2745 22         +1  6228                             ret                                     
                +1  6229     
                +1  6230     
                +1  6231     ;задержка 100 мкс
2746 7978       +1  6232     z_100:    mov R1,#78h     ;загрузка первого числа
2748 7A02       +1  6233     z100:     mov R2,#2h     ;загрузка второго числа
274A DAFE       +1  6234     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
274C D9FA       +1  6235               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
274E 22         +1  6236               ret           
                +1  6237     
                +1  6238     ;задержка 34 мкс
274F 7B8B       +1  6239     z_5:      mov R3,#8Bh      ;загрузка числа
2751 DBFE       +1  6240     ct:       djnz R3,ct
2753 22         +1  6241               ret
                +1  6242     
                +1  6243     ;задержка 15 мс
2754 79FA       +1  6244     z_15:     mov R1,#0FAh    ;загрузка первого числа
2756 7AED       +1  6245     z15:      mov R2,#0EDh   ;загрузка второго числа
2758 DAFE       +1  6246     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
275A D9FA       +1  6247               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
275C 22         +1  6248               ret   
                +1  6249                                               
                +1  6250     ;задержка 1 мс
275D 7910       +1  6251     z_1ms:     mov R1,#10h     
275F 7AED       +1  6252     ss1:       mov R2,#0EDh    
2761 DAFE       +1  6253                 djnz R2, $   
2763 D9FA       +1  6254                djnz R1, ss1   
2765 22         +1  6255                ret   
                +1  6256     
                +1  6257     ;задержка 1с
2766 7D1F       +1  6258     z_1s:           mov             r5,#01fh 
2768 7EFF       +1  6259     co2s:           mov     R6,#0ffh     
276A 7FFF       +1  6260     z1s:            mov     R7,#0ffh     
276C DFFE       +1  6261     co1s:           djnz    R7, co1s        
276E DEFA       +1  6262                     djnz    R6, z1s 
2770 DDF6       +1  6263                     djnz    r5,co2s
2772 22         +1  6264                 ret
                +1  6265     
                +1  6266     ;задержка 0,1с
2773 7D03       +1  6267     z_01s:          mov             r5,#03h 
2775 7EFF       +1  6268     co02s:  mov     R6,#0ffh     
2777 7FFF       +1  6269     z01s:           mov     R7,#0ffh     
2779 DFFE       +1  6270                     djnz    R7, $   
277B DEFA       +1  6271                     djnz    R6, z01s 
277D DDF6       +1  6272                     djnz    r5,co02s
277F 22         +1  6273                      ret
                +1  6274                                               
                +1  6275     ;задержка 0,5с
2780 7D0D       +1  6276     z_05s:          mov             r5,#0dh 
2782 7EFF       +1  6277     co05s:          mov     R6,#0ffh     
2784 7FFF       +1  6278     z05s:           mov     R7,#0ffh     
2786 DFFE       +1  6279                             djnz    R7, $   
2788 DEFA       +1  6280                     djnz    R6, z05s 
278A DDF6       +1  6281                             djnz    r5,co05s
278C 22         +1  6282                     ret                                                      
                +1  6283                                                               
278D 000007FF   +1  6284     chzap:          db      00,00,07h,0ffh             
2791 00000000   +1  6285     ch0:            db      00,00,00,00
2795 0000000A   +1  6286     ch10:           db      00,00,00,0ah                            ;10
2799 00000005   +1  6287     ch5:            db      00,00,00,05                                             ;5
279D 00000004   +1  6288     ch4:            db      00,00,00,04                                             ;4
27A1 000003B9   +1  6289     ch954:          db 00,00,03,0b9h                                                ;954
27A5 000003E8   +1  6290     ch10000:        db 00,00,03h,0e8h                                               ;10000
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    97

27A9 00000064   +1  6291     ch100:          db 00,00,00,64h ;100
27AD 00000002   +1  6292     ch2:            db      00,00,00,02                                             
                +1  6293     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  6294     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  6295     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
27B1 00000001   +1  6296     ch1:            db  00,00,00,01
27B5 49742400   +1  6297     ch_mln:         db      49h,74h,24h,00;10*6
27B9 3F800000   +1  6298     ch_1:           db      3fh,80h,00,00   
27BD 40000000   +1  6299     ch_2:           db      40h,00,00,00;2
27C1 40800000   +1  6300     ch_4:           db      40h,80h,00,00;4 
27C5 40A00000   +1  6301     ch_5:           db      40h,0a0h,00,00;5
27C9 40E00000   +1  6302     ch_7:           db      40h,0e0h,00,00;7
                +1  6303             
27CD 3F741EDF   +1  6304     CH_953:         db 3fh,74h,1eh,0dfh             ;0,953596
27D1 47C35000   +1  6305     CHtho:          db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
27D5 3F800347   +1  6306     KD:                     db      3fh,80h,03h,47h;1,0001
27D9 48435000   +1  6307     CH2tho:         db      48h,43h,50h,00;200000
27DD 4856D800   +1  6308     ch_220:         db  48h,56h,0d8h,00;220000 -035b60 h
27E1 4856D800   +1  6309     ch_200:         db  48h,56h,0d8h,00;200000 -030d40 h
27E5 461C4000   +1  6310     ch_10th:        db  46h,1ch,40h,00;10000-2710h
27E9 41200000   +1  6311     ch_10:          db      41h,20h,00,00;10d
27ED 48742400   +1  6312     ch_250:         db      48h,74h,24h,00;250000
27F1 000186A0   +1  6313     chk:            db      00,01,86h,0a0h;
27F5 00000320   +1  6314     ch320h:         db      00,00,03h,20h;320h=800d
27F9 00000150   +1  6315     ch150h:         db      00,00,01h,50h;150h
27FD C0400000   +1  6316     ch_m3:          db      0c0h,40h,00,00;-3
                +1  6317     
                +1  6318     
                +1  6319     ;r1- мл байт 2х байтного числа
2801            +1  6320     tenmin:         ;-10
2801 C3         +1  6321                     clr             c
2802 E7         +1  6322             mov             a,@r1
2803 9405       +1  6323                     subb    a,#5;10
2805 F7         +1  6324                     mov             @r1,a
2806 19         +1  6325                     dec             r1
2807 E7         +1  6326                     mov             a,@r1
2808 9400       +1  6327                     subb    a,#0
280A F7         +1  6328                     mov             @r1,a
280B 22         +1  6329                     ret
                +1  6330       ;r0-обнуление ячеек памяти  
280C 7F04       +1  6331     clear4: mov     r7,#4
280E E4         +1  6332                     clr             a
280F F6         +1  6333     cl4:    mov             @r0,a
2810 08         +1  6334                     inc             r0
2811 DFFC       +1  6335                     djnz    r7,cl4
2813 22         +1  6336                     ret     
                +1  6337     
                +1  6338      ;r0-обнуление ячеек памяти             ;R7- 
2814            +1  6339     clearN:  
2814 E4         +1  6340                     clr             a
2815 F6         +1  6341     cl4N:   mov             @r0,a
2816 08         +1  6342                     inc             r0
2817 DFFC       +1  6343                     djnz    r7,cl4N
2819 22         +1  6344                     ret     
                +1  6345     
                +1  6346       ;чтение номера байта с индикатора(2байта)
                +1  6347     ;bufind+8..bufind+9
                +1  6348     ;-  - - -
                +1  6349     ;- - - - - - - - - -
                +1  6350     ;adec..adec+9
                +1  6351     ;ст            мл
281A 7848       +1  6352     upak2:  mov             r0,#bufind+8;
281C 795C       +1  6353                     mov             r1,#adec+9
281E 7F02       +1  6354                     mov             r7,#2;2bait
2820 C3         +1  6355     upa2:   clr             c
2821 E6         +1  6356                     mov             a,@r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    98

2822 9430       +1  6357                     subb    a,#30h
2824 F7         +1  6358                     mov             @r1,a
2825 18         +1  6359                     dec             r0
2826 19         +1  6360                     dec             r1
2827 DFF7       +1  6361                     djnz    r7,upa2
2829 22         +1  6362                     ret  
                +1  6363     
                +1  6364     
                +1  6365         
                +1  6366      ;bufind+4..bufind+9
                +1  6367     ;-  - - -
                +1  6368     ;- - - - - - - - - -
                +1  6369     ;adec..adec+9
                +1  6370     ;ст            мл
282A 7849       +1  6371     upak:   mov             r0,#bufind+9;
282C 795C       +1  6372                     mov             r1,#adec+9
282E 7F06       +1  6373                     mov             r7,#6
2830 C3         +1  6374     upa:    clr             c
2831 E6         +1  6375                     mov             a,@r0
2832 9430       +1  6376                     subb    a,#30h
2834 F7         +1  6377                     mov             @r1,a
2835 18         +1  6378                     dec             r0
2836 19         +1  6379                     dec             r1
2837 DFF7       +1  6380                     djnz    r7,upa
2839 22         +1  6381                     ret
                +1  6382     
                +1  6383      ;чтение номера байта с индикатора(3байта)
                +1  6384     ;bufind+3..bufind+9
                +1  6385     ;-  - - -
                +1  6386     ;- - - - - - - - - -
                +1  6387     ;adec..adec+9
                +1  6388     ;ст            мл
283A 7849       +1  6389     upak3:  mov             r0,#bufind+9;
283C 795C       +1  6390                     mov             r1,#adec+9
283E 7F03       +1  6391                     mov             r7,#3;3bait
2840 C3         +1  6392     upa1:   clr             c
2841 E6         +1  6393                     mov             a,@r0
2842 9430       +1  6394                     subb    a,#30h
2844 F7         +1  6395                     mov             @r1,a
2845 18         +1  6396                     dec             r0
2846 19         +1  6397                     dec             r1
2847 DFF7       +1  6398                     djnz    r7,upa1
2849 22         +1  6399                     ret
                +1  6400     
                +1  6401     ;вых-r2,r3-адрес ячее памяти прогр
284A            +1  6402     findkoef:
284A 79AE       +1  6403                     mov             r1,#diap
284C E7         +1  6404                     mov             a,@r1
284D 23         +1  6405                     rl              a                       ;diap*2(2bait )
284E FC         +1  6406                     mov             r4,a                    ;save
284F 900000   F +1  6407                     mov             dptr,#diKDw             ;адрес таблицы поиска коффициентов
2852 93         +1  6408                     movc    a,@a+dptr                       ;ст байт
2853 FA         +1  6409                     mov             r2,a
2854 A3         +1  6410                     inc             dptr
2855 EC         +1  6411                     mov             a,r4
2856 93         +1  6412                     movc    a,@a+dptr
2857 FB         +1  6413                     mov             r3,a                    ;мл байт
2858 22         +1  6414                     ret
                +1  6415     ;r2..r5 в опр яч внешн озу
2859            +1  6416     findext:
2859 79AE       +1  6417                     mov             r1,#diap
285B E7         +1  6418                     mov             a,@r1
285C 23         +1  6419                     rl              a                       ;diap*2(2bait )
285D 23         +1  6420                     rl              a                       ;diap*2(2bait )
285E F9         +1  6421                     mov             r1,a                    ;r1-номер ячейки внешнего озу
285F 22         +1  6422                                     ret
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE    99

                +1  6423     
                +1  6424     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  6425     ;(5000h..5027h)
2860 5000       +1  6426     diKDw:  dw              5000h                   ;10-2
2862 5004       +1  6427                     dw              5004h                   ;10-3
2864 5008       +1  6428                     dw              5008h                   ;10-4
2866 500C       +1  6429                     dw              500ch                   ;10-5
2868 5010       +1  6430                     dw              5010h                   ;10-6
286A 5014       +1  6431                     dw              5014h                   ;10-7
286C 5018       +1  6432                     dw              5018h                   ;10-8
286E 501C       +1  6433                     dw              501ch                   ;10-9
2870 5020       +1  6434                     dw              5020h                   ;10-10
2872 5024       +1  6435                     dw              5024h                   ;10-11
2874 5028       +1  6436     dipar:  dw              5028h                   ;parol
2876 502C       +1  6437     diKm:   dw              502ch                   ;Km для теста измерения
2878 000186A0   +1  6438     chthou: db      00,01,86h,0a0h  ;100.000
                +1  6439     
287C AA08       +1  6440     move82: mov     r2,ltemp                        ;ltemp->r2..r5
287E AB09       +1  6441                     mov     r3,ltemp+1
2880 AC0A       +1  6442                     mov     r4,ltemp+2
2882 AD0B       +1  6443                     mov     r5,ltemp+3
2884 22         +1  6444                     ret
                +1  6445     ;bufind+4..bufind+9
                +1  6446     ;-  - - -
                +1  6447     ;- - - - - - - - - -
                +1  6448     ;adec..adec+9
                +1  6449     ;ст            мл
2885 7847       +1  6450     upakA:  mov             r0,#bufind+7;
2887 795C       +1  6451                     mov             r1,#adec+9
2889 7F04       +1  6452                     mov             r7,#4
288B C3         +1  6453     upaa4:  clr             c
288C E6         +1  6454                     mov             a,@r0
288D 9430       +1  6455                     subb            a,#30h
288F F7         +1  6456                     mov             @r1,a
2890 18         +1  6457                     dec             r0
2891 19         +1  6458                     dec             r1
2892 DFF7       +1  6459                     djnz            r7,upaa4
2894 22         +1  6460                     ret
                +1  6461     
                +1  6462     ;bufind+4..bufind+9
                +1  6463     ;-  - - -
                +1  6464     ;- - - - - - - - - -
                +1  6465     ;adec..adec+9
                +1  6466     ;ст            мл
2895 7848       +1  6467     upakB:  mov             r0,#bufind+8;
2897 795C       +1  6468                     mov             r1,#adec+9
2899 7F05       +1  6469                     mov             r7,#5
289B C3         +1  6470     upab:   clr             c
289C E6         +1  6471                     mov             a,@r0
289D 9430       +1  6472                     subb            a,#30h
289F F7         +1  6473                     mov             @r1,a
28A0 18         +1  6474                     dec             r0
28A1 19         +1  6475                     dec             r1
28A2 DFF7       +1  6476                     djnz            r7,upab
28A4 C21B       +1  6477                     clr             bitznB
28A6 E543       +1  6478                     mov             a,bufind+3
28A8 B42D02     +1  6479                     cjne            a,#2dh,abret
28AB D21B       +1  6480                     setb            bitznB
28AD            +1  6481     abret:
28AD 22         +1  6482                     ret
28AE            +1  6483     CH_B:   db      ;       4bh,18h,96h,80h;989680h=10 **7
28AE 4E6E6AA8   +1  6484                     db      4eh,6eh,6ah,0a8h;10**9
28B2 43FA0000   +1  6485     CH_500: db              43h,0fah,00,00;1fah=500
28B6 4856D800   +1  6486     CH_22T: db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
28BA 49742400   +1  6487     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  6488     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   100

                +1  6489     
                +1  6490     
                +1  6491     ;управление AD7731              r4=b1 r5=b2
28BE 7403       +1  6492     iniacp: mov             a,#03
28C0 120000   F +1  6493                     call    write
28C3 EC         +1  6494                     mov             a,r4;#80h
28C4 120000   F +1  6495                     call    write
28C7 ED         +1  6496                     mov             a,r5;#04
28C8 120000   F +1  6497                     call    write
28CB 7402       +1  6498                     mov             a,#02
28CD 120000   F +1  6499                     call    write
28D0 74A1       +1  6500                     mov             a,#0a1h
28D2 120000   F +1  6501                     call    write
28D5 7474       +1  6502                     mov             a,#74h
28D7 120000   F +1  6503                     call    write
28DA 2095FD     +1  6504                     jb              p1.5,$;p1.3,$
28DD 7402       +1  6505                     mov             a,#02
28DF 120000   F +1  6506                     call    write
28E2 7481       +1  6507                     mov             a,#81h
28E4 120000   F +1  6508                     call    write
28E7 7474       +1  6509                     mov             a,#74h
28E9 120000   F +1  6510                     call    write
28EC 2095FD     +1  6511                     jb              p1.5,$;p1.3,$
28EF 7402       +1  6512                     mov             a,#02
28F1 120000   F +1  6513                     call    write
28F4 7421       +1  6514                     mov             a,#21h
28F6 120000   F +1  6515                     call    write
28F9 7474       +1  6516                     mov             a,#74h
28FB 120000   F +1  6517                     call    write
28FE 22         +1  6518                     ret
                +1  6519     
                +1  6520     
28FF 0000       +1  6521     tabB1_2:        db              00,00            ;B1,B2 в соотв с Tизм  
2901 6000       +1  6522                             db              60h,00h;40h,04h         ;10s
2903 6000       +1  6523                             db              60h,00;40h,04h          ;1s
2905 6001       +1  6524                             db              60h,01h;40h,04h         ;0,1s
2907 6001       +1  6525                             db              60h,01;00h;20h,04h              ;50ms
2909 6001       +1  6526                             db              60h,01;00h;20h,04h               ;10ms
290B 1333       +1  6527                             db              13h,33h;32h             ;2ms
                +1  6528     
                +1  6529     ;загр В1,В2 в завис от Т                                
290D 799A       +1  6530     loab12:         mov             r1,#parT
290F 900000   F +1  6531                             mov             dptr,#tabB1_2
2912 E7         +1  6532                             mov             a,@r1
2913 23         +1  6533                             rl              a;*2
2914 FF         +1  6534                             mov             r7,a                    ;save a
2915 93         +1  6535                             movc    a,@a+dptr
2916 FC         +1  6536                             mov             r4,a   ;b1
2917 0F         +1  6537                             inc             r7
2918 EF         +1  6538                             mov             a,r7
2919 93         +1  6539                             movc    a,@a+dptr
291A FD         +1  6540                             mov             r5,a
                +1  6541                     ;после загр В1,2 загр упр слово для нового Т
291B 22         +1  6542                             ret
                +1  6543     
                +1  6544     
291C 7852       +1  6545     loadr2: mov             r0,#abin+3              ;r2..r5
291E E6         +1  6546                     mov             a,@r0                   ; ст мл   
291F FA         +1  6547                     mov             r2,a
2920 18         +1  6548                     dec             r0
2921 E6         +1  6549                     mov             a,@r0
2922 FB         +1  6550                     mov             r3,a
2923 18         +1  6551                     dec             r0
2924 E6         +1  6552                     mov             a,@r0
2925 FC         +1  6553                     mov             r4,a
2926 18         +1  6554                     dec             r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   101

2927 E6         +1  6555                     mov             a,@r0
2928 FD         +1  6556                     mov             r5,a
2929 22         +1  6557                     ret
                +1  6558                                             
                +1  6559     
                +1  6560      ;загрузка KD в зависимости от диап изм  
                +1  6561      ;koef->r8..r11
292A 78AE       +1  6562     loadKD: mov             r0,#diap
292C E6         +1  6563                     mov             a,@r0
292D 900000   F +1  6564                     mov             dptr,#diKDn
2930 75F004     +1  6565                     mov             b,#4
2933 A4         +1  6566                     mul             ab
2934 FF         +1  6567                     mov             r7,a;save
2935 93         +1  6568                     movc    a,@a+dptr
2936 F508       +1  6569                     mov             r8,a
2938 A3         +1  6570                     inc             dptr
2939 EF         +1  6571                     mov             a,r7
293A 93         +1  6572                     movc    a,@a+dptr
293B F509       +1  6573                     mov             r9,a
293D A3         +1  6574                     inc             dptr
293E EF         +1  6575                     mov             a,r7
293F 93         +1  6576                     movc    a,@a+dptr
2940 F50A       +1  6577                     mov             r10,a
2942 A3         +1  6578                     inc             dptr
2943 EF         +1  6579                     mov             a,r7
2944 93         +1  6580                     movc    a,@a+dptr
2945 F50B       +1  6581                     mov             r11,a
2947 22         +1  6582                     ret
                +1  6583     
2948 3F506B7B   +1  6584      diKDn: db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
294C 3F507FCC   +1  6585                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10-3
2950 3F4F9D0B   +1  6586                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10-4
2954 3F4FE869   +1  6587                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10-5
2958 3F50294A   +1  6588                     db              3fh,50h,29h,4ah;3fh,80h,00,00   ;4fh,0e9h,11h   ;0,81215   
                             10-6
295C 3F50639E   +1  6589                     db              3fh,50h,63h,9eh;3fh,80h,00,00           ;10-7
2960 3F4BC9F0   +1  6590                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10-8
2964 3F4C063B   +1  6591                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10-9
2968 3F50EFDD   +1  6592                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10-10
296C 3F512AD9   +1  6593                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10-11
                +1  6594     
2970 00000039   +1  6595     ch57:           db      00,00,00,39h;57
2974 00000014   +1  6596     ch20:           db      00,00,00,14h;20
                +1  6597     
                +1  6598     ;загр ус для тестов ацп         ;dptr-
2978 78B1       +1  6599     lotpus: mov             r0,#vichR
297A B6210D     +1  6600                     cjne    @r0,#21h,te22
297D 900000   F +1  6601                     mov                     dptr,#tabt11;заслать ус 11А
2980 E4         +1  6602     lotp:   clr             a
2981 93         +1  6603                     movc    a,@a+dptr                               ;high byte
2982 F584       +1  6604                     mov             p4,a
2984 A3         +1  6605                     inc             dptr
2985 E4         +1  6606                     clr             a
2986 93         +1  6607                     movc    a,@a+dptr                               ;low byte
2987 F585       +1  6608                     mov             p5,a
2989 22         +1  6609                     ret
298A B62205     +1  6610     te22:   cjne    @r0,#22h,te23
298D 900000   F +1  6611                     mov                     dptr,#tabt9;заслать ус 9А       
2990 80EE       +1  6612                     jmp                     lotp
2992 900000   F +1  6613     te23:   mov                     dptr,#tabt7;заслать ус 7А       
2995 80E9       +1  6614                     jmp                     lotp
                +1  6615     
                +1  6616     
                +1  6617     
                +1  6618     
                +1  6619     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   102

2997 02030405   +1  6620     Tabn:           db              2,3,4,5,6,7,8,9,10,11           ;порядок диапазонов степени
299B 06070809                
299F 0A0B                    
                +1  6621     
29A1 78AE       +1  6622     findR:  mov                     r0,#diap
29A3 E6         +1  6623                     mov                     a,@r0
29A4 900000   F +1  6624                     mov                     dptr,#Tabn
29A7 93         +1  6625                     movc            a,@a+dptr
29A8 22         +1  6626                     ret
                +1  6627     ;bufind=30h..39h                                                                           
                                           ;
29A9 C219       +1  6628     vvchif: clr             bitmig
29AB 79B2       +1  6629                     mov             r1,#marker
29AD E7         +1  6630                     mov             a,@r1                   ;изм цифры
29AE 7840       +1  6631                     mov             r0,#bufind                      ;0000
29B0 28         +1  6632                     add             a,r0
29B1 F8         +1  6633                     mov             r0,a
29B2 06         +1  6634                     inc             @r0
29B3 B63A03     +1  6635                     cjne    @r0,#3ah,chif
29B6 7630       +1  6636                     mov             @r0,#30h
29B8 22         +1  6637                     ret
29B9 C3         +1  6638     chif:   clr                     c
29BA 7430       +1  6639                     mov                     a,#30h
29BC 96         +1  6640                     subb            a,@r0
29BD 4002       +1  6641                     jc                      chif5
29BF 7630       +1  6642                     mov             @r0,#30h
29C1 22         +1  6643     chif5:  ret
                +1  6644     
29C2 80E5       +1  6645     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6646     
29C4 B641FB     +1  6647     vvnol31:        cjne            @r0,#41h,vvnol41
29C7 800A       +1  6648                             jmp                     chifour
29C9 B631F8     +1  6649     vvnol23:        cjne            @r0,#31h,vvnol31
29CC 8005       +1  6650                             jmp                     chifour 
                +1  6651     
29CE 78B0       +1  6652     vvchibl:        mov                     r0,#level
29D0 B623F6     +1  6653                             cjne            @r0,#23h,vvnol23;при наборе цифр в блоке
29D3 C219       +1  6654     chifour:        clr             bitmig
29D5 79B2       +1  6655                             mov             r1,#marker
29D7 E7         +1  6656                             mov             a,@r1                   ;изм цифры
29D8 7840       +1  6657                             mov             r0,#bufind                      ;1..4
29DA 28         +1  6658                             add             a,r0
29DB F8         +1  6659                             mov             r0,a
29DC 06         +1  6660                             inc             @r0
29DD B63504     +1  6661                             cjne    @r0,#35h,chifb
29E0 7631       +1  6662                             mov             @r0,#31h
29E2 8006       +1  6663                             jmp             chifb1
29E4 B63003     +1  6664     chifb:          cjne    @r0,#30h,chifb1
29E7 7631       +1  6665                             mov             @r0,#31h
29E9 22         +1  6666                             ret
                +1  6667     
29EA C3         +1  6668     chifb1: clr                     c
29EB 7430       +1  6669                     mov                     a,#30h
29ED 96         +1  6670                     subb            a,@r0
29EE 4002       +1  6671                     jc                      chifl5
29F0 7630       +1  6672                     mov             @r0,#30h
29F2 22         +1  6673     chifl5: ret
                +1  6674     
                +1  6675       ;перевод маркера влево
29F3            +1  6676     marle:  
29F3 C219       +1  6677                     clr             bitmig
                +1  6678                     ;mov            savba,#0   нельзя обнулять
29F5 78B2       +1  6679             mov             r0,#marker
29F7 16         +1  6680                     dec             @r0
29F8 E6         +1  6681                     mov             a,@r0
29F9 C3         +1  6682                     clr             c
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   103

29FA 953A       +1  6683                     subb    a,movleft         ;крайне левое положение
29FC 5001       +1  6684                     jnc             rler
29FE 06         +1  6685                     inc             @r0
29FF 22         +1  6686     rler:   ret
                +1  6687         
                +1  6688     ;перевод маркера вправо
2A00 C219       +1  6689     marri:  clr             bitmig
2A02 78B2       +1  6690                     mov             r0,#marker
2A04 06         +1  6691                     inc         @r0
2A05 E53B       +1  6692                     mov             a,movrig           ;крайне правое положение
2A07 C3         +1  6693                     clr             c
2A08 96         +1  6694                     subb            a,@r0
2A09 5001       +1  6695                     jnc             rrir
2A0B 16         +1  6696                     dec             @r0
2A0C 22         +1  6697     rrir:   ret
                +1  6698         
                +1  6699     ;konstA->bufind+4..bufind+7
2A0D 78BC       +1  6700     outA:   mov             r0,#konstA
2A0F 120000   F +1  6701                     call            resar2
2A12 120343     +1  6702                     call            ftol                    ;->hex
2A15 784F       +1  6703                     mov             r0,#abin
2A17 120000   F +1  6704                     call            saver2
2A1A 7853       +1  6705                     mov                     r0,#adec
2A1C 7952       +1  6706                     mov             r1,#abin+3
2A1E 120000   F +1  6707                     call            bindec
2A21 785C       +1  6708                     mov                     r0,#adec+9
2A23 7947       +1  6709                     mov                     r1,#bufind+7
2A25 7F04       +1  6710                     mov                     r7,#4
2A27 E6         +1  6711     outa2:  mov             a,@r0
2A28 2430       +1  6712                     add             a,#30h
2A2A F7         +1  6713                     mov             @r1,a
2A2B 19         +1  6714                     dec             r1
2A2C 18         +1  6715                     dec             r0
2A2D DFF8       +1  6716                     djnz    r7,outa2
2A2F 22         +1  6717                     ret
                +1  6718                                             
                +1  6719     ;konstB->bufind+4..bufind+8
                +1  6720     ;outB:  mov                     r0,#konstB
                +1  6721     ;               call            resar2
                +1  6722     ;               mov                     a,r2
                +1  6723     ;               anl                     a,#80h
                +1  6724     ;               jz                      outb3
                +1  6725     ;               mov             a,r2
                +1  6726     ;               anl                     a,#7fh
                +1  6727     ;               mov                     r2,a
                +1  6728     ;               mov                     bufind+3,#2dh
                +1  6729     ;outb3: call            ftol                    ;->hex
                +1  6730     ;               mov             r0,#abin
                +1  6731     ;               call            saver2
                +1  6732     ;               mov                     r0,#adec
                +1  6733     ;               mov             r1,#abin+3
                +1  6734     ;               call            bindec
                +1  6735     ;               mov                     r0,#adec+9
                +1  6736     ;               mov                     r1,#bufind+8
                +1  6737     ;               mov                     r7,#5
                +1  6738     ;outb2: mov             a,@r0
                +1  6739     ;               add             a,#30h
                +1  6740     ;               mov             @r1,a
                +1  6741     ;               dec             r1
                +1  6742     ;               dec             r0
                +1  6743     ;               djnz    r7,outb2
                +1  6744     ;               ret
                +1  6745     
                +1  6746     
                +1  6747     ;пп мигания индикации
2A30 78B2       +1  6748     mign:   mov             r0,#marker
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   104

2A32 B6FF03     +1  6749                     cjne    @r0,#0ffh,mignn
                +1  6750             ;реж изм мигает *
2A35 C219       +1  6751                     clr             bitmig
2A37 22         +1  6752                     ret
                +1  6753     
2A38            +1  6754     mignn:  ;clr            c
2A38 7440       +1  6755                     mov             a,#bufind
2A3A 26         +1  6756                     add             a,@r0                   ;a=bufind+marker
2A3B F9         +1  6757                     mov             r1,a
2A3C 201907     +1  6758                     jb              bitmig,onmig
2A3F 873C       +1  6759                     mov             savba,@r1
                +1  6760             ;       mov             a,@r1
                +1  6761             ;       mov             savba,a
2A41 7720       +1  6762                     mov             @r1,#" "
2A43 D219       +1  6763                     setb    bitmig
2A45 22         +1  6764                     ret
                +1  6765     
2A46 A73C       +1  6766     onmig:  mov             @r1,savba
                +1  6767                     ;mov            a,savba
                +1  6768                     ; mov           @r1,a
2A48 C219       +1  6769                     clr             bitmig
2A4A 120000   F +1  6770                     call    z_01s
2A4D 22         +1  6771                     ret
                +1  6772     ;номер ошибки bufind+6
2A4E 900000   F +1  6773     error:  mov             dptr,#teERR
2A51 120000   F +1  6774                     call    lotext
2A54 853946     +1  6775                     mov             bufind+6,nuerr
2A57 22         +1  6776                     ret
                +1  6777     
                +1  6778     
2A58            +1  6779     textT:          
2A58 FD543D32   +1  6780     te2ms:          db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=0..5
2A5C 6D67FDFD                
2A60 FDFD                    
2A62 FD543D31   +1  6781     te10ms:         db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
2A66 306D67FD                
2A6A FDFD                    
2A6C FD543D35   +1  6782                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
2A70 306D67FD                
2A74 FDFD                    
2A76 FD543D64   +1  6783                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2A7A 3167FDFD                
2A7E FDFD                    
2A80 20202054   +1  6784                             db              " "," "," ","T","=",31h,67h," "," "," "
2A84 3D316720                
2A88 2020                    
2A8A 2020543D   +1  6785                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2A8E 31306720                
2A92 2020                    
                +1  6786     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6787     
2A94 42753474   +1  6788     teVICH:         db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
2A98 79767454                
2A9C 7720                    
2A9E 20553D20   +1  6789     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
2AA2 20202020                
2AA6 2065                    
2AA8 20423D2B   +1  6790     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2AAC 20202020                
2AB0 2020                    
2AB2 20207145   +1  6791     teMENU:         db              " "," ",71h,"E","H",72h," "," "," "," "
2AB6 48722020                
2ABA 2020                    
                +1  6792     
2ABC 20544579   +1  6793     teTESI:         db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2AC0 542D7433                
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   105

2AC4 7120                    
2AC6 54457954   +1  6794     teTESR:         db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
2ACA 20523520                
2ACE 2020                    
2AD0 20794B30   +1  6795     teSKOR:         db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232     13
2AD4 50205235                
2AD8 2020                    
2ADA 20204142   +1  6796     teAVK:          db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK           14
2ADE 4B202020                
2AE2 2020                    
2AE4 204B4176   +1  6797     teKALIB:        db      " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР     15
2AE8 74735020                
2AEC 202020                  
2AEF 20544579   +1  6798     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;       21
2AF3 54202020                
2AF7 5431                    
2AF9 20544579   +1  6799     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                22
2AFD 54202020                
2B01 5432                    
2B03 20544579   +1  6800     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                23
2B07 54202020                
2B0B 5433                    
2B0D 20202035   +1  6801     teS57_6:        db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
2B11 37362020                
2B15 2020                    
2B17 20202031   +1  6802     teS19_2:        db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2B1B 39322020                
2B1F 2020                    
                +1  6803     
2B21 61415030   +1  6804     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
2B25 76772030                
2B29 3030                    
2B2B 20303030   +1  6805     teKD:           db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2B2F 30302020                
2B33 2041                    
2B35 74337120   +1  6806     teIZMK:         db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
2B39 4B304879                
2B3D 5420                    
2B3F 20204275   +1  6807     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2B43 58307820                
2B47 2020                    
2B49 2020304C   +1  6808     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2B4D 4C202020                
2B51 2020                    
2B53 20203034   +1  6809     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
2B57 7479544B                
2B5B 4120                    
2B5D 20203041   +1  6810     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
2B61 71795420                
2B65 20203341   +1  6811     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
2B69 61747977                
2B6D 2020                    
2B6F 20206150   +1  6812     teLIST:         db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
2B73 30797130                
2B77 545020                  
2B7A 20206130   +1  6813     teFULL:         db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2B7E 76484162                
2B82 2020                    
2B84 20744854   +1  6814     teINT:          db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
2B88 20303030                
2B8C 3067                    
2B8E 20207376   +1  6815     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2B92 304B2020                
2B96 2020                    
2B98 20207376   +1  6816     teBL0:          db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2B9C 304B2030                
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   106

2BA0 2020                    
2BA2 30547934   +1  6817     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
2BA6 45542030                
2BAA 3031                    
2BAC 79544154   +1  6818     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2BB0 74795474                
2BB4 4B41                    
2BB6 71744820   +1  6819     teMIN:          db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
2BBA 20202020                
2BBE 2020                    
2BC0 71414B79   +1  6820     teMAX:          db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2BC4 20202020                
2BC8 2020                    
2BCA 79504578   +1  6821     teMID:          db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2BCE 20202020                
2BD2 2020                    
                +1  6822     
2BD4 2020304C   +1  6823     teOLI:          db              " "," ",30h,"L","L"," ","I"," "," "," "
2BD8 4C204920                
2BDC 2020                    
2BDE 2020304C   +1  6824     teOLR:          db              " "," ",30h,"L","L"," ",66h," "," "," "
2BE2 4C206620                
2BE6 2020                    
2BE8 20204552   +1  6825     teERR:          db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2BEC 52202020                
2BF0 2020                    
2BF2 2020454E   +1  6826     teEND:          db              " "," ","E","N","D"," "," "," "," "," " ;END
2BF6 44202020                
2BFA 2020                    
                +1  6827     
                +1  6828     ;dptr+4-приемник
                +1  6829     ;dptr-источник
                +1  6830     ;r7-кол байт  
2BFC 7F04       +1  6831     xCIKLWR:        mov             r7,#4   
2BFE E0         +1  6832     lwrx:           movx            a,@dptr
2BFF C083       +1  6833                             push            dph
2C01 C082       +1  6834                             push            dpl
2C03 A3         +1  6835                             inc             dptr
2C04 A3         +1  6836                             inc             dptr
2C05 A3         +1  6837                             inc             dptr
2C06 A3         +1  6838                             inc             dptr
2C07 F0         +1  6839                             movx            @dptr,a
2C08 D082       +1  6840                             pop             dpl
2C0A D083       +1  6841                             pop             dph
2C0C A3         +1  6842                             inc             dptr
2C0D DFEF       +1  6843                             djnz            r7,lwrx
2C0F 22         +1  6844                             ret
                +1  6845     ;r2..r5->@dptr..@dptr+3                         
2C10 EA         +1  6846     saveIr2:        mov             a,r2
2C11 F0         +1  6847                             movx    @dptr,a
2C12 A3         +1  6848                             inc     dptr
2C13 EB         +1  6849                             mov     a,r3
2C14 F0         +1  6850                             movx    @dptr,a
2C15 A3         +1  6851                             inc             dptr
2C16 EC         +1  6852                             mov             a,r4
2C17 F0         +1  6853                             movx    @dptr,a
2C18 A3         +1  6854                             inc             dptr
2C19 ED         +1  6855                             mov             a,r5
2C1A F0         +1  6856                             movx    @dptr,a
2C1B 22         +1  6857                             ret
                +1  6858     ;r2..r5-> @r0..@r0+3
                +1  6859     
2C1C EA         +1  6860     saver2:         mov     a,r2
2C1D F6         +1  6861                             mov     @r0,a
2C1E 08         +1  6862                             inc     r0
2C1F EB         +1  6863                             mov     a,r3
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   107

2C20 F6         +1  6864                             mov     @r0,a
2C21 08         +1  6865                             inc     r0
2C22 EC         +1  6866                             mov     a,r4
2C23 F6         +1  6867                             mov     @r0,a
2C24 08         +1  6868                             inc     r0
2C25 ED         +1  6869                             mov     a,r5
2C26 F6         +1  6870                             mov     @r0,a
2C27 22         +1  6871                             ret 
                +1  6872     
2C28 7F50       +1  6873     clmassix:       mov                     r7,#50h;28h
2C2A 900100     +1  6874                             mov     dptr,#MASS0        ;забить массив A нулями
2C2D 7400       +1  6875     clmax:          mov          a,#00h
2C2F F0         +1  6876                 movx    @dptr,a
2C30 A3         +1  6877                 inc     dptr
2C31 DFFA       +1  6878                 djnz                r7,clmax                
2C33 F56E       +1  6879                 mov     chmas,a
2C35 C201       +1  6880                 clr     bitmas
2C37 22         +1  6881                 ret
                +1  6882     ;r1-яЁшхьшъ
                +1  6883     ;r0-шёЄюўшъ
                +1  6884     ;r7-ъюы срщЄ  
2C38            +1  6885     CIKLWR:
2C38 7F04       +1  6886                     mov             r7,#4   
2C3A E6         +1  6887     lwr:            mov     a,@r0
2C3B F7         +1  6888                     mov     @r1,a
2C3C 09         +1  6889                     inc             r1
2C3D 08         +1  6890                     inc             r0
2C3E DFFA       +1  6891                     djnz    r7,lwr
2C40 22         +1  6892                     ret     
                +1  6893     ;r2..r5-> @dptr..@dptr+3
                +1  6894     
2C41 120000   F +1  6895     zmul:   call    maform
2C44 120000   F +1  6896                     call    lmul
2C47 120000   F +1  6897                     call    bform
2C4A 22         +1  6898                     ret
                +1  6899     
2C4B 120000   F +1  6900     zdiv:   call    maform
2C4E 120000   F +1  6901                     call    divide
2C51 120000   F +1  6902                     call    bform
2C54 22         +1  6903                     ret
                +1  6904     
2C55 EA         +1  6905     maform: mov a,r2
2C56 33         +1  6906             rlc a
2C57 5006       +1  6907             jnc             fo1m
2C59 D202       +1  6908                     setb            znmat
2C5B 120000   F +1  6909                     call   form4
2C5E 22         +1  6910                     ret
2C5F C202       +1  6911     fo1m:   clr             znmat
2C61 22         +1  6912                     ret
                +1  6913     
2C62 300203     +1  6914     bform:  jnb             znmat,fo2m
2C65 120000   F +1  6915                     call    form4
2C68 22         +1  6916     fo2m:   ret
                +1  6917       
                +1  6918     ;r2..r5 яхЁхтхёЄш т фюя ъюф
2C69 ED         +1  6919     form4:  mov a,r5
2C6A F4         +1  6920                     cpl a
2C6B 2401       +1  6921             add a,#1
2C6D FD         +1  6922             mov r5,a
2C6E EC         +1  6923             mov a,r4
2C6F F4         +1  6924             cpl a
2C70 3400       +1  6925             addc    a,#0
2C72 FC         +1  6926             mov r4,a
2C73 EB         +1  6927             mov a,r3
2C74 F4         +1  6928                     cpl a
2C75 3400       +1  6929             addc    a,#0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   108

2C77 FB         +1  6930             mov r3,a
2C78 EA         +1  6931             mov a,r2
2C79 F4         +1  6932             cpl a
2C7A 3400       +1  6933             addc    a,#0
2C7C FA         +1  6934             mov r2,a
2C7D 22         +1  6935             ret
                +1  6936     
2C7E 120000   F +1  6937     zcmp:   call            maform
2C81 120000   F +1  6938                     call            lcmp
2C84 C0D0       +1  6939                     push            psw
2C86 120000   F +1  6940                     call    bform
2C89 D0D0       +1  6941                     pop             psw
2C8B 22         +1  6942                     ret
                +1  6943     
                +1  6944     
                +1  6945     ;@r0..@r0+3->r8..r11
                +1  6946     
2C8C E6         +1  6947     resar8: mov     a,@r0
2C8D F508       +1  6948                     mov     ltemp,a
2C8F 08         +1  6949                     inc     r0
2C90 E6         +1  6950                     mov     a,@r0
2C91 F509       +1  6951                     mov     ltemp+1,a
2C93 08         +1  6952                     inc     r0
2C94 E6         +1  6953                     mov     a,@r0
2C95 F50A       +1  6954                     mov     ltemp+2,a
2C97 08         +1  6955                     inc     r0
2C98 E6         +1  6956                     mov     a,@r0
2C99 F50B       +1  6957                     mov     ltemp+3,a
2C9B 22         +1  6958                     ret
                +1  6959     
                +1  6960     ;
                +1  6961     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6962     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6963     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6964     ;r2 a    ўшёыю 180
                +1  6965     ;00 b4
                +1  6966     ;т_ї- mabin..mabin+2
                +1  6967     ;     80 01 00
                +1  6968     
2C9C C8         +1  6969     cond:   xch     a,r0    
2C9D F9         +1  6970                     mov     r1,a
2C9E C8         +1  6971                     xch     a,r0
2C9F 7C03       +1  6972                     mov     r4,#03
2CA1 7700       +1  6973     dcoa:   mov     @r1,#00
2CA3 09         +1  6974                     inc     r1
2CA4 DCFB       +1  6975                     djnz    r4,dcoa
2CA6 7B10       +1  6976                     mov     r3,#10h
2CA8 C3         +1  6977     dcob:   clr     c
2CA9 33         +1  6978                     rlc     a
2CAA CA         +1  6979                     xch     a,r2
2CAB 33         +1  6980                     rlc     a
2CAC CA         +1  6981                     xch     a,r2
2CAD C8         +1  6982                     xch     a,r0
2CAE F9         +1  6983                     mov     r1,a
2CAF C8         +1  6984                     xch     a,r0
2CB0 7C03       +1  6985                     mov     r4,#03
2CB2 FD         +1  6986                     mov     r5,a
2CB3 E7         +1  6987     dcoc:   mov     a,@r1 
2CB4 37         +1  6988                     addc    a,@r1
2CB5 D4         +1  6989                     da      a
2CB6 F7         +1  6990                     mov     @r1,a
2CB7 09         +1  6991                     inc     r1
2CB8 DCF9       +1  6992                     djnz    r4,dcoc
2CBA ED         +1  6993                     mov     a,r5
2CBB 4003       +1  6994                     jc      dcod
2CBD DBE9       +1  6995                     djnz    r3,dcob
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   109

2CBF C3         +1  6996                     clr     c
2CC0 00         +1  6997     dcod:   nop
2CC1 22         +1  6998                     ret
                +1  6999     
2CC2 8A08       +1  7000     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2CC4 850309     +1  7001                     mov     ltemp+1,3
2CC7 85040A     +1  7002                     mov     ltemp+2,4
2CCA 85050B     +1  7003                     mov     ltemp+3,5
2CCD 22         +1  7004                     ret
                +1  7005     
                +1  7006     ;@r0..@r0+3->r2..r5
                +1  7007     
2CCE E6         +1  7008     resar2: mov     a,@r0
2CCF FA         +1  7009                     mov     r2,a
2CD0 08         +1  7010                     inc     r0
2CD1 E6         +1  7011                     mov     a,@r0
2CD2 FB         +1  7012                     mov     r3,a
2CD3 08         +1  7013                     inc     r0
2CD4 E6         +1  7014                     mov     a,@r0
2CD5 FC         +1  7015                     mov     r4,a
2CD6 08         +1  7016                     inc     r0
2CD7 E6         +1  7017                     mov     a,@r0
2CD8 FD         +1  7018                     mov     r5,a
2CD9 22         +1  7019                     ret
                +1  7020     
                +1  7021     ;25mkc !!!!!!!!!!!!!!!1
2CDA 7B4B       +1  7022     z_9:    mov R3,#4Bh      ;загрузка числа
2CDC DBFE       +1  7023                 djnz R3,$
2CDE 22         +1  7024             ret
                +1  7025     
                +1  7026     ;запись   передаваемый байт в acc
                +1  7027     ;передача байта послед кодом старшими разрядами  вперед
2CDF 7A08       +1  7028     write:  mov R2,#8
2CE1 C3         +1  7029                     clr  c  
2CE2 C297       +1  7030     wr1:    clr             p1.7;P1.2
2CE4 00         +1  7031                     nop 
2CE5 33         +1  7032                     rlc A
2CE6 9296       +1  7033                     mov P1.6,C;P1.1,C
2CE8 120000   F +1  7034                     call tim2
2CEB D297       +1  7035                     setb P1.7;P1.2
2CED 120000   F +1  7036             call tim2
2CF0 DAF0       +1  7037                     djnz R2,wr1
2CF2 C296       +1  7038                     clr P1.6;P1.1
2CF4 22         +1  7039                     ret
                +1  7040     
                +1  7041     ;чтение номера байта с индикатора(2байта)
                +1  7042     ;bufind+8..bufind+9
                +1  7043     ;adec..adec+9
                +1  7044     ;ст            мл
2CF5 7847       +1  7045     upak1:  mov             r0,#bufind+7;
2CF7 795C       +1  7046                     mov             r1,#adec+9
2CF9 C3         +1  7047                     clr             c
2CFA E6         +1  7048                     mov             a,@r0
2CFB 9430       +1  7049                     subb    a,#30h
2CFD FF         +1  7050                     mov             r7,a
2CFE C3         +1  7051                     clr             c
2CFF 9405       +1  7052                     subb    a,#5
2D01 4004       +1  7053                     jc              upk1
2D03 7404       +1  7054                     mov             a,#4
2D05 8001       +1  7055                     jmp             upk2
2D07 EF         +1  7056     upk1:   mov             a,r7
2D08 F7         +1  7057     upk2:   mov             @r1,a
2D09 22         +1  7058                     ret  
                +1  7059     ;r1-мл байт счетчика ячеек
2D0A C3         +1  7060     chminus: clr                    c
2D0B E7         +1  7061                     mov                     a,@r1
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   110

2D0C 9401       +1  7062                     subb            a,#01
2D0E F7         +1  7063                     mov                     @r1,a;low
2D0F 19         +1  7064                     dec                     r1
2D10 E7         +1  7065                     mov                     a,@r1
2D11 9400       +1  7066                     subb            a,#00
2D13 F7         +1  7067                     mov                     @r1,a
2D14 22         +1  7068                     ret
                +1  7069     
                +1  7070     
                +1  7071     ;чтение номера байта с индикатора(4байта)
                +1  7072     ;bufind+6..bufind+9
                +1  7073     ;adec..adec+9
                +1  7074     ;ст            мл
2D15 7848       +1  7075     upak4:  mov             r0,#bufind+8;
2D17 795C       +1  7076                     mov             r1,#adec+9
2D19 7F04       +1  7077                     mov             r7,#4
2D1B C3         +1  7078     upaa:   clr             c
2D1C E6         +1  7079                     mov             a,@r0
2D1D 9430       +1  7080                     subb    a,#30h
2D1F F7         +1  7081                     mov             @r1,a
2D20 18         +1  7082                     dec             r0
2D21 19         +1  7083                     dec             r1
2D22 DFF7       +1  7084                     djnz    r7,upaa
2D24 22         +1  7085                     ret
                +1  7086     
                +1  7087     ;dptr-адр ячейки 1й соотв блока 
2D25 E538       +1  7088     adrblok:        mov             a,nblok
2D27 C3         +1  7089                     clr             c
2D28 9401       +1  7090                     subb    a,#1
2D2A FD         +1  7091                     mov             r5,a
2D2B E4         +1  7092                     clr             a
2D2C FC         +1  7093                     mov             r4,a
2D2D FB         +1  7094                     mov             r3,a
2D2E FA         +1  7095                     mov             r2,a
2D2F 900000   F +1  7096                     mov             dptr,#ch320h
2D32 120000   F +1  7097                     CALL    ldc_ltemp                ; ltemp <-320
2D35 120000   F +1  7098                     call    lmul;r2..r5
2D38 ED         +1  7099                     mov             a,r5
2D39 2450       +1  7100                     add             a,#50h
2D3B F582       +1  7101                     mov             dpl,a
2D3D EC         +1  7102                     mov             a,r4
2D3E 3401       +1  7103                     addc    a,#01           
2D40 F583       +1  7104                     mov             dph,a                   ;dptr-
2D42 22         +1  7105                     ret
                +1  7106     
                +1  7107     ;
                +1  7108     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2D43 E538       +1  7109     save_hl:        mov             a,nblok
2D45 B4011D     +1  7110                     cjne    a,#1,sa_hl1
2D48 79D3       +1  7111                     mov             r1,#saven_bl
2D4A E583       +1  7112     sa_hl:  mov             a,dph
2D4C F7         +1  7113                     mov             @r1,a
2D4D 09         +1  7114                     inc             r1
2D4E E582       +1  7115                     mov             a,dpl
2D50 F7         +1  7116                     mov             @r1,a
                +1  7117             ;;;;;;;;;не конец ли блока
2D51 79D6       +1  7118                     mov                     r1,#volume+1;work+1
2D53 120000   F +1  7119                     call            chminus
2D56 78D5       +1  7120                     mov             r0,#volume
2D58 E6         +1  7121                     mov             a,@r0
2D59 30E708     +1  7122                     jnb             acc.7,noendli
2D5C C20A       +1  7123                     clr                     bitbon                  ;блок закончился
2D5E 534BFD     +1  7124                     anl                     bufind+11,#0fdh
2D61 120000   F +1  7125                     call            ind
2D64 22         +1  7126     noendli: ret
                +1  7127     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   111

2D65 B40204     +1  7128     sa_hl1: cjne    a,#2,sa_hl2
2D68 79C0       +1  7129                     mov             r1,#saven_bl2
2D6A 80DE       +1  7130                     jmp             sa_hl
                +1  7131     
2D6C B40304     +1  7132     sa_hl2: cjne    a,#3,sa_hl3
2D6F 79C2       +1  7133                     mov             r1,#saven_bl3
2D71 80D7       +1  7134                     jmp             sa_hl
2D73 79D9       +1  7135     sa_hl3: mov             r1,#saven_bl4
2D75 80D3       +1  7136                     jmp             sa_hl
                +1  7137     
                +1  7138     ;загрузка dptr сохр ранее значением адреса ячейки
2D77            +1  7139     resa_hl:
2D77 E538       +1  7140                     mov             a,nblok
2D79 B4010A     +1  7141                     cjne    a,#1,re_hl1
2D7C 79D3       +1  7142                     mov             r1,#saven_bl;блок1 150h..46fh
2D7E E7         +1  7143     re_hl:  mov             a,@r1   
2D7F F583       +1  7144                     mov             dph,a
2D81 09         +1  7145                     inc             r1
2D82 E7         +1  7146                     mov             a,@r1
2D83 F582       +1  7147                     mov             dpl,a
2D85 22         +1  7148                     ret
                +1  7149     
2D86 B40204     +1  7150     re_hl1: cjne    a,#2,re_hl2
2D89 79C0       +1  7151                     mov             r1,#saven_bl2   ;блок2 470h..78fh
2D8B 80F1       +1  7152                     jmp             re_hl
                +1  7153     
2D8D B40304     +1  7154     re_hl2: cjne    a,#3,re_hl3
2D90 79C2       +1  7155                     mov             r1,#saven_bl3   ;блок3 790h..aafh
2D92 80EA       +1  7156                     jmp             re_hl
                +1  7157     
2D94 79D9       +1  7158     re_hl3: mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
2D96 80E6       +1  7159                     jmp             re_hl
                +1  7160     ;загрузка rez_A3 в соотв яч внешн озу
2D98 789C       +1  7161     loA3_X: mov             r0,#rez_A3
2D9A 120000   F +1  7162                     call    resar2
2D9D EA         +1  7163                     mov             a,r2                    ;
2D9E F0         +1  7164                     movx    @dptr,a
2D9F A3         +1  7165                     inc             dptr
2DA0 EB         +1  7166                     mov             a,r3
2DA1 F0         +1  7167                     movx    @dptr,a
2DA2 A3         +1  7168                     inc             dptr
2DA3 EC         +1  7169                     mov             a,r4
2DA4 F0         +1  7170                     movx    @dptr,a
2DA5 A3         +1  7171                     inc             dptr
2DA6 ED         +1  7172                     mov             a,r5
2DA7 F0         +1  7173                     movx    @dptr,a
2DA8 A3         +1  7174                     inc             dptr;адрес след ячейки внешн озу храним
2DA9 22         +1  7175                     ret             ;в ячейке saven_bl
                +1  7176     ;чтение в rez_A3 из соотв яч внешн озу
                +1  7177     
2DAA E0         +1  7178     reA3_X: movx    a,@dptr
2DAB FA         +1  7179                     mov             r2,a
2DAC A3         +1  7180                     inc             dptr
2DAD E0         +1  7181                     movx    a,@dptr
2DAE FB         +1  7182                     mov             r3,a
2DAF A3         +1  7183                     inc             dptr
2DB0 E0         +1  7184                     movx    a,@dptr
2DB1 FC         +1  7185                     mov             r4,a
2DB2 A3         +1  7186                     inc             dptr
2DB3 E0         +1  7187                     movx    a,@dptr
2DB4 FD         +1  7188                     mov             r5,a
2DB5 A3         +1  7189                     inc             dptr
2DB6 789C       +1  7190                     mov             r0,#rez_A3
2DB8 120000   F +1  7191                     call    saver2
2DBB 22         +1  7192                     ret
                +1  7193     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   112

                +1  7194     ;разбивка внешнего озу
                +1  7195     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  7196     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  7197     ;150h..46fh 1й блок
                +1  7198     ;470h..78fh     2й блок
                +1  7199     ;790h..aaf      3й блок
                +1  7200     ;ab0h..dcfh 4й блок
                +1  7201     ;dd0..fffh свободная область
                +1  7202     ;
                +1  7203     ;светодиоды и точки для индикатора
                +1  7204     ;такт
                +1  7205     ;измер
                +1  7206     ;avp
                +1  7207     ;нуль
                +1  7208     ;0,1s
                +1  7209     ;1s
                +1  7210     ;10s
                +1  7211     ;кмп
                +1  7212     ;память
                +1  7213     ;пуск
                    7214     
                    7215     ;$include (sarifm3.asm) 
                +1  7216     ; ” ©« SARIFM.ASM 8.11.95               ;файл арифметики
                +1  7217     
  0008          +1  7218     ltemp   equ       8           ;long temporary
  000C          +1  7219     xtemp   equ       12          ;other temporaries
  000A          +1  7220     DECSIZE EQU       10
  0004          +1  7221     NUMSIZE EQU       4
  0004          +1  7222     RR4             EQU       4
  0005          +1  7223     RR5             EQU       5
                +1  7224     
                +1  7225     ; rseg     ARIF ; Switch to this code segment.
                +1  7226     ; using    0    ; Specify register bank for the following program code.                    
                                            ; Arithmetics:  CLEARING string
                +1  7227     ; Input:
                +1  7228     ; R0 - pointer to string,
                +1  7229     ; NUMSIZE - byte count if CLRNUM used,
                +1  7230     ; DECSIZE - byte count if CLRDEC used,
                +1  7231     ; R2 - byte count if CLEAR used;
                +1  7232     ; Output:  none.
                +1  7233     
2DBC            +1  7234     CLRDEC:
2DBC 7A0A       +1  7235                 MOV R2, #DECSIZE
2DBE 8002       +1  7236                 SJMP    CLEAR
2DC0            +1  7237     CLRNUM:
2DC0 7A04       +1  7238                 MOV R2, #NUMSIZE
                +1  7239                 ;JMP    CLEAR
2DC2            +1  7240     CLEAR:
2DC2 E4         +1  7241                 CLR A
2DC3 F6         +1  7242     CLR11:  MOV @R0, A
2DC4 08         +1  7243                 INC R0
2DC5 DAFC       +1  7244                 DJNZ    R2, CLR11
2DC7 22         +1  7245                 RET
                +1  7246     
                +1  7247     ;**********************************
                +1  7248     ;mov    r1,#abin+3
                +1  7249     ;mov    r0,#adec
                +1  7250     ; _ _ _ _
                +1  7251     ;     03ff
                +1  7252     ;ст     мл   - вход
                +1  7253     ; _ _ _ _ _ _ _ _ _ _
                +1  7254     ;             1 0 2 3
                +1  7255     ;ст                мл 
                +1  7256     ;**********************************
                +1  7257     
2DC8            +1  7258     BINDEC:
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   113

                +1  7259     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  7260     ; Input:
                +1  7261     ; R0 - pointer to destination (high digit is the first),
                +1  7262     ; R1 - pointer to source,
                +1  7263     ; NUMSIZE - byte count in binary number;
                +1  7264     ; DECSIZE - byte count in decimal number;
                +1  7265     ; Output:  none.
                +1  7266     ; Source saved
                +1  7267     
                +1  7268         ; 1. Clear result
2DC8 7A05       +1  7269         MOV R2, #DECSIZE/2
2DCA 120000   F +1  7270         CALL   CLEAR  ; incrementing R0
                +1  7271     
                +1  7272         ; 2. Prepare convertion
2DCD 18         +1  7273         DEC R0
2DCE 8804       +1  7274         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
2DD0 8905       +1  7275         MOV RR5, R1 ; R5 - pointer to low byte of binary number
2DD2 7B20       +1  7276         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  7277     
                +1  7278         ; 3. Convert cyrcle
2DD4            +1  7279     BIN30:
                +1  7280                 ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2DD4 A905       +1  7281                 MOV R1, RR5
2DD6 7A04       +1  7282                 MOV R2, #NUMSIZE
2DD8 E7         +1  7283     BIN31:  MOV A, @R1
2DD9 33         +1  7284                 RLC A
2DDA F7         +1  7285                 MOV @R1, A
2DDB 19         +1  7286                 DEC R1
2DDC DAFA       +1  7287                 DJNZ    R2, BIN31
2DDE A905       +1  7288                 MOV R1, RR5
2DE0 E7         +1  7289                 MOV A, @R1
2DE1 92E0       +1  7290                 MOV ACC.0, C
2DE3 F7         +1  7291                 MOV @R1, A
                +1  7292      ; 3.2. Doubling decimal result with <Carry>
2DE4 A804       +1  7293                 MOV R0, RR4
2DE6 7A05       +1  7294                 MOV R2, #DECSIZE/2
2DE8 E6         +1  7295     BIN32:  MOV A, @R0
2DE9 36         +1  7296                 ADDC    A, @R0
2DEA D4         +1  7297                 DA  A
2DEB F6         +1  7298                 MOV @R0, A
2DEC 18         +1  7299                 DEC R0
2DED DAF9       +1  7300                 DJNZ    R2, BIN32
                +1  7301     
                +1  7302       ; 3.3. End of convert cyrcle
2DEF DBE3       +1  7303               DJNZ    R3, BIN30
                +1  7304     
                +1  7305         ; 4. Make bytes from half-bytes
2DF1 E8         +1  7306                MOV A, R0
2DF2 240A       +1  7307                ADD A, #DECSIZE
2DF4 F8         +1  7308                MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2DF5 A904       +1  7309                MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2DF7 7A05       +1  7310                MOV R2, #DECSIZE/2
2DF9 E7         +1  7311     BIN41:  MOV A, @R1
2DFA 540F       +1  7312                 ANL A, #00FH
2DFC F6         +1  7313                 MOV @R0, A
2DFD 18         +1  7314                 DEC R0
2DFE E7         +1  7315                 MOV A, @R1
2DFF C4         +1  7316                 SWAP    A
2E00 540F       +1  7317                 ANL A, #00FH
2E02 F6         +1  7318                 MOV @R0, A
2E03 18         +1  7319                 DEC R0
2E04 19         +1  7320                 DEC R1
2E05 DAF2       +1  7321                 DJNZ    R2, BIN41
2E07 22         +1  7322                 RET
                +1  7323     
                +1  7324     
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   114

                +1  7325     ;*********************************
                +1  7326     ;mov    r0,#abin
                +1  7327     ;mov    r1,#adec
                +1  7328     ; _ _ _ _       -выход
                +1  7329     ; ff0000
                +1  7330     ;0004
                +1  7331     ;мл      ст
                +1  7332     
                +1  7333     ;ст                       мл
                +1  7334     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  7335     ;                       2 5 5
                +1  7336     ;                   1 0 2 4
                +1  7337     
2E08            +1  7338     DECBIN:
                +1  7339     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  7340     ; Input:
                +1  7341     ; R0 - pointer to destination,
                +1  7342     ; R1 - pointer to source (high digit is the first),
                +1  7343     ; NUMSIZE - byte count in binary number;
                +1  7344     ; DECSIZE - byte count in decimal number;
                +1  7345     ; Output:  none
                +1  7346     ; Source cleared
                +1  7347     
                +1  7348         ; 1. Clear result
2E08 120000   F +1  7349                 CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  7350     
                +1  7351         ; 2. Prepare convertion
2E0B 18         +1  7352                 DEC R0
2E0C 8804       +1  7353                 MOV RR4, R0 ; R4 - pointer to high byte of binary result
2E0E 8905       +1  7354                 MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
2E10 900000   F +1  7355                 MOV DPTR, #DECT2
2E13 7B20       +1  7356                 MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  7357     
                +1  7358         ; 3. Convert cyrcle
2E15            +1  7359     DEC30:
                +1  7360         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2E15 C3         +1  7361                 CLR C
2E16 A905       +1  7362                 MOV R1, RR5
2E18 7A0A       +1  7363                 MOV R2, #DECSIZE
2E1A E7         +1  7364     DEC31:  MOV A, @R1
2E1B 540F       +1  7365                 ANL A, #00FH
2E1D 92E4       +1  7366                 MOV ACC.4, C
2E1F 93         +1  7367                 MOVC    A,@A+DPTR
2E20 F7         +1  7368                 MOV @R1, A
2E21 A2E7       +1  7369                 MOV C, ACC.7
2E23 09         +1  7370                 INC R1
2E24 DAF4       +1  7371                 DJNZ    R2, DEC31
                +1  7372         ; 3.2. Rotate binary result one bit to right with <Carry>
2E26 A804       +1  7373                 MOV R0, RR4
2E28 7A04       +1  7374                 MOV R2, #NUMSIZE
2E2A E6         +1  7375     DEC32:  MOV A, @R0
2E2B 13         +1  7376                 RRC A
2E2C F6         +1  7377                 MOV @R0, A
2E2D 18         +1  7378                 DEC R0
2E2E DAFA       +1  7379                 DJNZ    R2, DEC32
                +1  7380     
                +1  7381         ; 3.3. End of convert cyrcle
2E30 DBE3       +1  7382                 DJNZ    R3, DEC30
2E32 22         +1  7383                 RET
                +1  7384     
2E33 00800181   +1  7385     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2E37 02820383                
2E3B 0484                    
2E3D 00000000   +1  7386                     DB  00,00,00,00,00,00
2E41 0000                    
2E43 05850686   +1  7387                     DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   115

2E47 07870888                
2E4B 0989                    
                +1  7388     
                +1  7389     ;   Long comparison
                +1  7390     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  7391     ;   flags and acc set as though a long subtraction was done.
                +1  7392     ;*******************************
                +1  7393     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  7394     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  7395     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  7396     ;*******************************
2E4D            +1  7397     lcmp:
2E4D C3         +1  7398         clr c
2E4E EA         +1  7399         mov a,r2
2E4F 9508       +1  7400         subb    a,8
2E51 700F       +1  7401         jnz done
2E53 EB         +1  7402         mov a,r3
2E54 9509       +1  7403         subb    a,9
2E56 7008       +1  7404         jnz done1
2E58 EC         +1  7405         mov a,r4
2E59 950A       +1  7406         subb    a,10
2E5B 7003       +1  7407         jnz done1
2E5D ED         +1  7408         mov a,r5
2E5E 950B       +1  7409         subb    a,11
2E60            +1  7410     done1:
2E60 C2D2       +1  7411         clr ov      ;overflow is significant only for top byte
2E62            +1  7412     done:
2E62 22         +1  7413         ret
                +1  7414     
                +1  7415     ;   Load long into r2-5 from [dptr]
                +1  7416     
2E63            +1  7417     ldc_long:
2E63 E583       +1  7418         mov a,dph       ;is it in on board memory
2E65 6010       +1  7419         jz  onboard     ;yes
2E67 E4         +1  7420         clr a
2E68 93         +1  7421         movc    a,@a+dptr
2E69 FA         +1  7422         mov r2,a
2E6A 7401       +1  7423         mov a,#1
2E6C 93         +1  7424         movc    a,@a+dptr
2E6D FB         +1  7425         mov r3,a
2E6E 7402       +1  7426         mov a,#2
2E70 93         +1  7427         movc    a,@a+dptr
2E71 FC         +1  7428         mov r4,a
2E72 7403       +1  7429         mov a,#3
2E74 93         +1  7430         movc    a,@a+dptr
2E75 FD         +1  7431         mov r5,a
2E76 22         +1  7432         ret
2E77            +1  7433     onboard:
2E77 A882       +1  7434         mov r0,dpl
2E79 E6         +1  7435         mov a,@r0
2E7A FA         +1  7436         mov r2,a
2E7B 08         +1  7437         inc r0
2E7C E6         +1  7438         mov a,@r0
2E7D FB         +1  7439         mov r3,a
2E7E 08         +1  7440         inc r0
2E7F E6         +1  7441         mov a,@r0
2E80 FC         +1  7442         mov r4,a
2E81 08         +1  7443         inc r0
2E82 E6         +1  7444         mov a,@r0
2E83 FD         +1  7445         mov r5,a
2E84 22         +1  7446         ret
                +1  7447     
                +1  7448     ;**************************************
                +1  7449     ;загрузить ltemp...+3 из памяти программ
                +1  7450     ;mov    dptr,#CH5
                +1  7451     ;call   ldc_ltemp        ltemp <--5
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   116

                +1  7452     ;**************************************
2E85            +1  7453     ldc_ltemp:
2E85 E583       +1  7454         mov a,dph       ;is it in on board memory
2E87 6014       +1  7455         jz  oboard      ;yes
2E89 E4         +1  7456         clr a
2E8A 93         +1  7457         movc    a,@a+dptr
2E8B F508       +1  7458         mov 8,a
2E8D 7401       +1  7459         mov a,#1
2E8F 93         +1  7460         movc    a,@a+dptr
2E90 F509       +1  7461         mov 9,a
2E92 7402       +1  7462         mov a,#2
2E94 93         +1  7463         movc    a,@a+dptr
2E95 F50A       +1  7464         mov 10,a
2E97 7403       +1  7465         mov a,#3
2E99 93         +1  7466         movc    a,@a+dptr
2E9A F50B       +1  7467         mov 11,a
2E9C 22         +1  7468         ret
2E9D            +1  7469     oboard:
2E9D A882       +1  7470         mov r0,dpl
2E9F 8608       +1  7471         mov 8,@r0
2EA1 08         +1  7472         inc r0
2EA2 8609       +1  7473         mov 9,@r0
2EA4 08         +1  7474         inc r0
2EA5 860A       +1  7475         mov 10,@r0
2EA7 08         +1  7476         inc r0
2EA8 860B       +1  7477         mov 11,@r0
2EAA 22         +1  7478         ret
                +1  7479     
                +1  7480     ;*****************************
                +1  7481     ;mov    dptr,#k1
                +1  7482     ;call   ldx_long
                +1  7483     ;k1->r2..r5
                +1  7484     ;*****************************
                +1  7485     ;   Load long into r2-5 from [dptr]
                +1  7486     ;
                +1  7487     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2EAB            +1  7488     ldx_long:
2EAB E583       +1  7489         mov a,dph       ;is it in on board memory
2EAD 6014       +1  7490         jz  onboar1        ;yes
2EAF C082       +1  7491         push    dpl
2EB1 C083       +1  7492         push    dph
2EB3 E0         +1  7493         movx    a,@dptr
2EB4 FA         +1  7494         mov r2,a
2EB5 A3         +1  7495         inc dptr
2EB6 E0         +1  7496         movx    a,@dptr
2EB7 FB         +1  7497         mov r3,a
2EB8 A3         +1  7498         inc dptr
2EB9 E0         +1  7499         movx    a,@dptr
2EBA FC         +1  7500         mov r4,a
2EBB A3         +1  7501         inc dptr
2EBC E0         +1  7502         movx    a,@dptr
2EBD FD         +1  7503         mov r5,a
2EBE D083       +1  7504         pop dph
2EC0 D082       +1  7505         pop dpl
2EC2 22         +1  7506         ret
2EC3            +1  7507     onboar1:
2EC3 A882       +1  7508         mov r0,dpl
2EC5 E6         +1  7509         mov a,@r0
2EC6 FA         +1  7510         mov r2,a
2EC7 08         +1  7511         inc r0
2EC8 E6         +1  7512         mov a,@r0
2EC9 FB         +1  7513         mov r3,a
2ECA 08         +1  7514         inc r0
2ECB E6         +1  7515         mov a,@r0
2ECC FC         +1  7516         mov r4,a
2ECD 08         +1  7517         inc r0
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   117

2ECE E6         +1  7518         mov a,@r0
2ECF FD         +1  7519         mov r5,a
2ED0 22         +1  7520         ret
                +1  7521     
                +1  7522     ;*********************************
                +1  7523     ;mov    dptr,#k2
                +1  7524     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  7525     ;**********************************
2ED1            +1  7526     ldx_ltemp:
2ED1 E583       +1  7527         mov a,dph       ;is it in on board memory
2ED3 6010       +1  7528         jz  oboard1     ;yes
2ED5 E0         +1  7529         movx    a,@dptr
2ED6 F508       +1  7530         mov 8,a
2ED8 A3         +1  7531         inc dptr
2ED9 E0         +1  7532         movx    a,@dptr
2EDA F509       +1  7533         mov 9,a
2EDC A3         +1  7534         inc dptr
2EDD E0         +1  7535         movx    a,@dptr
2EDE F50A       +1  7536         mov 10,a
2EE0 A3         +1  7537         inc dptr
2EE1 E0         +1  7538         movx    a,@dptr
2EE2 F50B       +1  7539         mov 11,a
2EE4 22         +1  7540         ret
2EE5            +1  7541     oboard1:
2EE5 A882       +1  7542         mov r0,dpl
2EE7 8608       +1  7543         mov 8,@r0
2EE9 08         +1  7544         inc r0
2EEA 8609       +1  7545         mov 9,@r0
2EEC 08         +1  7546         inc r0
2EED 860A       +1  7547         mov 10,@r0
2EEF 08         +1  7548         inc r0
2EF0 860B       +1  7549         mov 11,@r0
2EF2 22         +1  7550         ret
                +1  7551     ;   Long division routines for 8051
                +1  7552     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  7553     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  7554     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  7555     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  7556     ;   r1 must be saved by the caller.
                +1  7557     ;   This is long unsigned division.
                +1  7558     
                +1  7559     
                +1  7560     ;   Register usage:
                +1  7561     ;       r0 loop counter
                +1  7562     ;       xtemp (12-15) accumulates quotient
                +1  7563     ;       r5-r2 holds dividend
                +1  7564     ;       ltemp holds divisor
                +1  7565     
                +1  7566     ;************************************
                +1  7567     ;r2..r5-делимое
                +1  7568     ;ltemp..-делитель
                +1  7569     ;частное -r2..r5
                +1  7570     ;*************************************
2EF3            +1  7571     divide:
2EF3 E4         +1  7572         clr a
2EF4 F8         +1  7573         mov r0,a        ;initialize count
2EF5 F50C       +1  7574         mov xtemp,a     ;zero quotient
2EF7 F50D       +1  7575         mov xtemp+1,a
2EF9 F50E       +1  7576         mov xtemp+2,a
2EFB F50F       +1  7577         mov xtemp+3,a
2EFD ED         +1  7578         mov a,r5        ;check for zero dividend
2EFE 4C         +1  7579         orl a,r4
2EFF 4B         +1  7580         orl a,r3
2F00 4A         +1  7581         orl a,r2
2F01 600B       +1  7582         jz  jfinis
2F03 E508       +1  7583         mov a,ltemp     ;check for zero divisor
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   118

2F05 4509       +1  7584         orl a,ltemp+1
2F07 450A       +1  7585         orl a,ltemp+2
2F09 450B       +1  7586         orl a,ltemp+3
2F0B 7037       +1  7587         jnz midl
2F0D 22         +1  7588         ret
                +1  7589     
2F0E 020000   F +1  7590     jfinis: jmp finis
                +1  7591     
2F11            +1  7592     loops:
2F11 EA         +1  7593         mov a,r2
2F12 C3         +1  7594         clr c
2F13 9508       +1  7595         subb    a,ltemp+0   ;is divisor greater than dividend yet
2F15 4033       +1  7596         jc  yes     ;yes, go no further
2F17 7013       +1  7597         jnz no
2F19 EB         +1  7598         mov a,r3
2F1A 9509       +1  7599         subb    a,ltemp+1
2F1C 402C       +1  7600         jc  yes
2F1E 700C       +1  7601         jnz no
2F20 EC         +1  7602         mov a,r4
2F21 950A       +1  7603         subb    a,ltemp+2
2F23 4025       +1  7604         jc  yes
2F25 7005       +1  7605         jnz no
2F27 ED         +1  7606         mov a,r5
2F28 950B       +1  7607         subb    a,ltemp+3
2F2A 401E       +1  7608         jc  yes
2F2C            +1  7609     no:
2F2C E50B       +1  7610         mov a,ltemp+3   ;shift divisor up one bit
2F2E 250B       +1  7611         add a,ltemp+3
2F30 F50B       +1  7612         mov ltemp+3,a
2F32 E50A       +1  7613         mov a,ltemp+2
2F34 350A       +1  7614         addc    a,ltemp+2
2F36 F50A       +1  7615         mov ltemp+2,a
2F38 E509       +1  7616         mov a,ltemp+1
2F3A 3509       +1  7617         addc    a,ltemp+1
2F3C F509       +1  7618         mov ltemp+1,a
2F3E E508       +1  7619         mov a,ltemp+0
2F40 3508       +1  7620         addc    a,ltemp+0
2F42 F508       +1  7621         mov ltemp+0,a
2F44            +1  7622     midl:
2F44 08         +1  7623         inc r0      ;increment count
2F45 E508       +1  7624         mov a,ltemp+0   ;check for safe to shift some more
2F47 30E7C7     +1  7625         jnb acc.7,loops  ;loop if top bit clear
2F4A            +1  7626     yes:
2F4A E508       +1  7627         mov a,ltemp+0
2F4C C3         +1  7628         clr c
2F4D 9A         +1  7629         subb    a,r2        ;can we subtract now?
2F4E 401A       +1  7630         jc  dosub       ;yes, go and do it
2F50 7015       +1  7631         jnz nosub
2F52 E509       +1  7632         mov a,ltemp+1
2F54 9B         +1  7633         subb    a,r3
2F55 4013       +1  7634         jc  dosub
2F57 700E       +1  7635         jnz nosub
2F59 E50A       +1  7636         mov a,ltemp+2
2F5B 9C         +1  7637         subb    a,r4
2F5C 400C       +1  7638         jc  dosub
2F5E 7007       +1  7639         jnz nosub
2F60 E50B       +1  7640         mov a,ltemp+3
2F62 9D         +1  7641         subb    a,r5
2F63 4005       +1  7642         jc  dosub
2F65 6003       +1  7643         jz  dosub
2F67            +1  7644     nosub:
2F67 C3         +1  7645         clr c
2F68 8012       +1  7646         sjmp    dosh
2F6A            +1  7647     dosub:
2F6A C3         +1  7648         clr c       ;subtract divisor from dividend
2F6B ED         +1  7649         mov a,r5
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   119

2F6C 950B       +1  7650         subb    a,ltemp+3
2F6E FD         +1  7651         mov r5,a
2F6F EC         +1  7652         mov a,r4
2F70 950A       +1  7653         subb    a,ltemp+2
2F72 FC         +1  7654         mov r4,a
2F73 EB         +1  7655         mov a,r3
2F74 9509       +1  7656         subb    a,ltemp+1
2F76 FB         +1  7657         mov r3,a
2F77 EA         +1  7658         mov a,r2
2F78 9508       +1  7659         subb    a,ltemp+0
2F7A FA         +1  7660         mov r2,a
2F7B D3         +1  7661         setb    c       ;now set bit for quotient
2F7C            +1  7662     dosh:
2F7C E50F       +1  7663         mov a,xtemp+3
2F7E 33         +1  7664         rlc a
2F7F F50F       +1  7665         mov xtemp+3,a
2F81 E50E       +1  7666         mov a,xtemp+2
2F83 33         +1  7667         rlc a
2F84 F50E       +1  7668         mov xtemp+2,a
2F86 E50D       +1  7669         mov a,xtemp+1
2F88 33         +1  7670         rlc a
2F89 F50D       +1  7671         mov xtemp+1,a
2F8B E50C       +1  7672         mov a,xtemp+0
2F8D 33         +1  7673         rlc a
2F8E F50C       +1  7674         mov xtemp+0,a
2F90 E508       +1  7675         mov a,ltemp+0       ;shift divisor down
2F92 C3         +1  7676         clr c
2F93 13         +1  7677         rrc a
2F94 F508       +1  7678         mov ltemp+0,a
2F96 E509       +1  7679         mov a,ltemp+1
2F98 13         +1  7680         rrc a
2F99 F509       +1  7681         mov ltemp+1,a
2F9B E50A       +1  7682         mov a,ltemp+2
2F9D 13         +1  7683         rrc a
2F9E F50A       +1  7684         mov ltemp+2,a
2FA0 E50B       +1  7685         mov a,ltemp+3
2FA2 13         +1  7686         rrc a
2FA3 F50B       +1  7687         mov ltemp+3,a
                +1  7688     
2FA5 D8A3       +1  7689         djnz    r0,yes      ;and continue with the rest
                +1  7690     
2FA7            +1  7691     finis:
2FA7 8D0B       +1  7692         mov ltemp+3,r5
2FA9 8C0A       +1  7693         mov ltemp+2,r4
2FAB 8B09       +1  7694         mov ltemp+1,r3
2FAD 8A08       +1  7695         mov ltemp+0,r2
2FAF AD0F       +1  7696         mov r5,xtemp+3
2FB1 AC0E       +1  7697         mov r4,xtemp+2
2FB3 AB0D       +1  7698         mov r3,xtemp+1
2FB5 AA0C       +1  7699         mov r2,xtemp+0
2FB7 22         +1  7700         ret         ;and return with the satisfaction of a job well done
                +1  7701     
                +1  7702     
                +1  7703     ;   Long multiplication
                +1  7704     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7705     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7706     
                +1  7707     ;**********************************
                +1  7708     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7709     ;ст  мл
                +1  7710     ;**********************************
2FB8            +1  7711     llmul:
2FB8            +1  7712     almul:
2FB8            +1  7713     lmul:
2FB8 ED         +1  7714         mov a,r5        ;low order byte
2FB9 850BF0     +1  7715         mov b,ltemp+3       ;times low order byte
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   120

2FBC A4         +1  7716         mul ab
2FBD F50F       +1  7717         mov xtemp+3,a       ;store low
2FBF 85F00E     +1  7718         mov xtemp+2,b   ;and high
2FC2 ED         +1  7719         mov a,r5        ;low order
2FC3 850AF0     +1  7720         mov b,ltemp+2   ;times next
2FC6 A4         +1  7721         mul ab
2FC7 250E       +1  7722         add a,xtemp+2   ;add in
2FC9 F50E       +1  7723         mov xtemp+2,a
2FCB E5F0       +1  7724         mov a,b
2FCD 3400       +1  7725         addc    a,#0
2FCF F50D       +1  7726         mov xtemp+1,a
2FD1 ED         +1  7727         mov a,r5
2FD2 8509F0     +1  7728         mov b,ltemp+1
2FD5 A4         +1  7729         mul ab
2FD6 250D       +1  7730         add a,xtemp+1
2FD8 F50D       +1  7731         mov xtemp+1,a
2FDA E5F0       +1  7732         mov a,b
2FDC 3400       +1  7733         addc    a,#0
2FDE F50C       +1  7734         mov xtemp+0,a
2FE0 ED         +1  7735         mov a,r5
2FE1 8508F0     +1  7736         mov b,ltemp+0
2FE4 A4         +1  7737         mul ab
2FE5 250C       +1  7738         add a,xtemp+0
2FE7 F50C       +1  7739         mov xtemp+0,a
2FE9 EC         +1  7740         mov a,r4
2FEA 850BF0     +1  7741         mov b,ltemp+3
2FED A4         +1  7742         mul ab
2FEE 250E       +1  7743         add a,xtemp+2
2FF0 F50E       +1  7744         mov xtemp+2,a
2FF2 E5F0       +1  7745         mov a,b
2FF4 350D       +1  7746         addc    a,xtemp+1
2FF6 F50D       +1  7747         mov xtemp+1,a
2FF8 E50C       +1  7748         mov a,xtemp+0
2FFA 3400       +1  7749         addc    a,#0
2FFC F50C       +1  7750         mov xtemp+0,a
2FFE EC         +1  7751         mov a,r4
2FFF 850AF0     +1  7752         mov b,ltemp+2
3002 A4         +1  7753         mul ab
3003 250D       +1  7754         add a,xtemp+1
3005 F50D       +1  7755         mov xtemp+1,a
3007 E5F0       +1  7756         mov a,b
3009 350C       +1  7757         addc    a,xtemp+0
300B F50C       +1  7758         mov xtemp+0,a
300D EC         +1  7759         mov a,r4
300E 8509F0     +1  7760         mov b,ltemp+1
3011 A4         +1  7761         mul ab
3012 250C       +1  7762         add a,xtemp+0
3014 F50C       +1  7763         mov xtemp+0,a
                +1  7764     
3016 EB         +1  7765         mov a,r3
3017 850BF0     +1  7766         mov b,ltemp+3
301A A4         +1  7767         mul ab
301B 250D       +1  7768         add a,xtemp+1
301D F50D       +1  7769         mov xtemp+1,a
301F E5F0       +1  7770         mov a,b
3021 350C       +1  7771         addc    a,xtemp+0
3023 F50C       +1  7772         mov xtemp+0,a
3025 EB         +1  7773         mov a,r3
3026 850AF0     +1  7774         mov b,ltemp+2
3029 A4         +1  7775         mul ab
302A 250C       +1  7776         add a,xtemp+0
302C F50C       +1  7777         mov xtemp+0,a
                +1  7778     
302E EA         +1  7779         mov a,r2
302F 850BF0     +1  7780         mov b,ltemp+3
3032 A4         +1  7781         mul ab
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   121

3033 250C       +1  7782         add a,xtemp+0
3035 FA         +1  7783         mov r2,a
3036 AB0D       +1  7784         mov r3,xtemp+1
3038 AC0E       +1  7785         mov r4,xtemp+2
303A AD0F       +1  7786         mov r5,xtemp+3
                +1  7787     
303C 22         +1  7788         ret         ;all done
                +1  7789     ;******************************
                +1  7790     ;из содержимого  r2-r5  вычесть
                +1  7791     ;содержимое          ltemp..ltemp+3
                +1  7792     ;******************************
303D            +1  7793     llsub:
303D            +1  7794      lsub:
303D ED         +1  7795         mov a,r5
303E C3         +1  7796         clr c
303F 950B       +1  7797         subb    a,11
3041 FD         +1  7798         mov r5,a
3042 EC         +1  7799         mov a,r4
3043 950A       +1  7800         subb    a,10
3045 FC         +1  7801         mov r4,a
3046 EB         +1  7802         mov a,r3
3047 9509       +1  7803         subb    a,9
3049 FB         +1  7804         mov r3,a
304A EA         +1  7805         mov a,r2
304B 9508       +1  7806         subb    a,8
304D FA         +1  7807         mov r2,a
304E 22         +1  7808         ret
                +1  7809     
                +1  7810     ;***********************************************
                +1  7811     ;                                                      ст мл
                +1  7812     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7813     ;  r0- адрес младшего байта !!!
                +1  7814     ;результат- r2..r5
                +1  7815     ;***********************************************
                +1  7816     
304F C3         +1  7817     ladd:    clr       c
3050 ED         +1  7818          mov       a,r5
3051 26         +1  7819          add       a,@r0
3052 FD         +1  7820          mov       r5,a
3053 18         +1  7821          dec       r0
3054 EC         +1  7822          mov       a,r4
3055 36         +1  7823          addc      a,@r0
3056 FC         +1  7824          mov       r4,a
3057 18         +1  7825          dec       r0
3058 EB         +1  7826          mov       a,r3
3059 36         +1  7827          addc      a,@r0
305A FB         +1  7828          mov       r3,a
305B 18         +1  7829          dec       r0
305C EA         +1  7830          mov       a,r2
305D 36         +1  7831          addc      a,@r0
305E FA         +1  7832          mov       r2,a
305F 22         +1  7833          ret
                +1  7834     ;***********************************************
                +1  7835     ;                                                      ст мл
                +1  7836     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7837     ;  r0- адрес младшего байта !!!
                +1  7838     ;результат- r2..r5
                +1  7839     ;***********************************************
                +1  7840     
3060 C3         +1  7841     laddx:    clr       c
3061 E2         +1  7842                                             movx            a,@r0
3062 2D         +1  7843                                             add                     a,r5
3063 FD         +1  7844               mov     r5,a
3064 18         +1  7845                             dec     r0
3065 E2         +1  7846                             movx    a,@r0
3066 3C         +1  7847                             addc    a,r4
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   122

3067 FC         +1  7848                             mov     r4,a
3068 18         +1  7849                             dec     r0
3069 E2         +1  7850                             movx    a,@r0
306A 3B         +1  7851                             addc    a,r3
306B FB         +1  7852                             mov     r3,a
306C 18         +1  7853                             dec     r0
306D E2         +1  7854                             movx    a,@r0
306E 3A         +1  7855                             addc    a,r2
306F FA         +1  7856                             mov       r2,a
3070 22         +1  7857                             ret
                +1  7858     
                +1  7859     ;***********************************************
                +1  7860     ;                                                      ст мл
                +1  7861     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7862     ;  dptr- адрес младшего байта !!!
                +1  7863     ;результат- r2..r5
                +1  7864     ;***********************************************
                +1  7865     
3071 C3         +1  7866     addx:    clr       c
3072 E0         +1  7867                                             movx            a,@dptr
3073 2D         +1  7868                                             add                     a,r5
3074 FD         +1  7869               mov     r5,a
3075 120000   F +1  7870                             call            dedptr;dec     dptr
3078 E0         +1  7871                             movx    a,@dptr
3079 3C         +1  7872                             addc    a,r4
307A FC         +1  7873                             mov     r4,a
307B 120000   F +1  7874                             call            dedptr;dec     dptr
307E E0         +1  7875                             movx    a,@dptr
307F 3B         +1  7876                             addc    a,r3
3080 FB         +1  7877                             mov     r3,a
3081 120000   F +1  7878                             call            dedptr;dec     dptr
3084 E0         +1  7879                             movx    a,@dptr
3085 3A         +1  7880                             addc    a,r2
3086 FA         +1  7881                             mov       r2,a
3087 22         +1  7882                             ret
                +1  7883     
3088 C0D0       +1  7884     dedptr:         push    psw
308A C3         +1  7885                                             clr             c
308B E582       +1  7886                                             mov             a,dpl
308D 9401       +1  7887                                             subb    a,#1
308F F582       +1  7888                                             mov             dpl,a
3091 E583       +1  7889                                             mov             a,dph
3093 9400       +1  7890                                             subb    a,#0
3095 F583       +1  7891                                             mov             dph,a
3097 D0D0       +1  7892                                             pop             psw
3099 22         +1  7893                                             ret
                    7894     
                    7895     ;$include (floatm.asm)
                +1  7896     ;       Copyright (C) 1988 HI-TECH Software
                +1  7897     
                +1  7898     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7899     
                +1  7900     ;       The format of floating point numbers is as follows:
                +1  7901     
                +1  7902     ;       -----------------
                +1  7903     ;       *     sign      *  1 bit
                +1  7904     ;       -----------------
                +1  7905     ;       *   exponent    *  8 bits
                +1  7906     ;       -----------------
                +1  7907     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7908     ;       -----------------
                +1  7909     
                +1  7910     
                +1  7911     ;       As usual for the 8051 the memory layout has the most significant
                +1  7912     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7913     ;       lowest address.
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   123

                +1  7914     
                +1  7915     ;       Calling conventions:
                +1  7916     
                +1  7917     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7918     ;
                +1  7919     ;       Return value is in r2-r5
                +1  7920     
                +1  7921     ;       Naming conventions: A routine name is constructed by
                +1  7922     
                +1  7923     ;             ASOP
                +1  7924     
                +1  7925     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7926     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7927     ;       Conversion routines are named
                +1  7928     
                +1  7929     ;               AStof
                +1  7930     
                +1  7931     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7932     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7933     ;       Conversion from float to integer is ftol.
                +1  7934     
                +1  7935     ;               .ORG  5000h
                +1  7936     ;               .CODE
                +1  7937     ;       seg     c_text
                +1  7938     
                +1  7939     ;;      $MOD812
----            +1  7940             CSEG
                +1  7941     ;ORG 1000h
                +1  7942     
                +1  7943     ;PUBLIC flmul,fldiv,fladd,flsub,flcmp
                +1  7944     ;PUBLIC ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7945     
                +1  7946     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7947     ;       macros
                +1  7948     
                +1  7949     saveregs        macro
                +1  7950             push    7
                +1  7951             push    6
                +1  7952             push    1
                +1  7953             push    0
                +1  7954             endm
                +1  7955     
                +1  7956     restregs        macro
                +1  7957             pop     0
                +1  7958             pop     1
                +1  7959             pop     6
                +1  7960             pop     7
                +1  7961             endm
                +1  7962     
                +1  7963     ;addr   
                +1  7964     dan     macro   pad
                +1  7965             mov     a,r5
                +1  7966             add     a,pad+3
                +1  7967             mov     pad+3,a
                +1  7968             mov     a,pad+2
                +1  7969             addc    a,r4
                +1  7970             mov     pad+2,a
                +1  7971             mov     a,pad+1
                +1  7972             addc    a,r3
                +1  7973             mov     pad+1,a
                +1  7974             mov     a,pad+0
                +1  7975             addc    a,r2
                +1  7976             mov     pad,a
                +1  7977             endm
                +1  7978     
                +1  7979     addl    macro  addr
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   124

                +1  7980             mov     a,r5
                +1  7981             add     a,addr+3
                +1  7982             mov     r5,a
                +1  7983             mov     a,addr+2
                +1  7984             addc    a,r4
                +1  7985             mov     r4,a
                +1  7986             mov     a,addr+1
                +1  7987             addc    a,r3
                +1  7988             mov     r3,a
                +1  7989             mov     a,addr+0
                +1  7990             addc    a,r2
                +1  7991             mov     r2,a
                +1  7992             endm
                +1  7993     
                +1  7994     
                +1  7995     add1    macro
                +1  7996             mov     a,r5
                +1  7997             add     a,#1
                +1  7998             mov     r5,a
                +1  7999             clr     a
                +1  8000             addc    a,r4
                +1  8001             mov     r4,a
                +1  8002             clr     a
                +1  8003             addc    a,r3
                +1  8004             mov     r3,a
                +1  8005             clr     a
                +1  8006             addc    a,r2
                +1  8007             mov     r2,a
                +1  8008             endm
                +1  8009     
                +1  8010     shfdn   macro  addr
                +1  8011             clr     c
                +1  8012             mov     a,addr
                +1  8013             rrc     a
                +1  8014             mov     addr,a
                +1  8015             mov     a,addr+1
                +1  8016             rrc     a
                +1  8017             mov     addr+1,a
                +1  8018             mov     a,addr+2
                +1  8019             rrc     a
                +1  8020             mov     addr+2,a
                +1  8021             mov     a,addr+3
                +1  8022             rrc     a
                +1  8023             mov     addr+3,a
                +1  8024             endm
                +1  8025     
                +1  8026     shfup   macro  addr
                +1  8027             clr     c
                +1  8028             mov     a,addr+3
                +1  8029             rlc     a
                +1  8030             mov     addr+3,a
                +1  8031             mov     a,addr+2
                +1  8032             rlc     a
                +1  8033             mov     addr+2,a
                +1  8034             mov     a,addr+1
                +1  8035             rlc     a
                +1  8036             mov     addr+1,a
                +1  8037             mov     a,addr
                +1  8038             rlc     a
                +1  8039             mov     addr,a
                +1  8040             endm
                +1  8041     
                +1  8042     rshift  macro
                +1  8043             clr     c
                +1  8044             mov     a,r2
                +1  8045             rrc     a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   125

                +1  8046             mov     r2,a
                +1  8047             mov     a,r3
                +1  8048             rrc     a
                +1  8049             mov     r3,a
                +1  8050             mov     a,r4
                +1  8051             rrc     a
                +1  8052             mov     r4,a
                +1  8053             mov     a,r5
                +1  8054             rrc     a
                +1  8055             mov     r5,a
                +1  8056             endm
                +1  8057     rshift1 macro
                +1  8058             setb    c
                +1  8059             mov     a,r2
                +1  8060             rrc     a
                +1  8061             mov     r2,a
                +1  8062             mov     a,r3
                +1  8063             rrc     a
                +1  8064             mov     r3,a
                +1  8065             mov     a,r4
                +1  8066             rrc     a
                +1  8067             mov     r4,a
                +1  8068             mov     a,r5
                +1  8069             rrc     a
                +1  8070             mov     r5,a
                +1  8071             endm
                +1  8072     
                +1  8073     
                +1  8074     lshift  macro
                +1  8075             mov     a,r5
                +1  8076             rlc     a
                +1  8077             mov     r5,a
                +1  8078             mov     a,r4
                +1  8079             rlc     a
                +1  8080             mov     r4,a
                +1  8081             mov     a,r3
                +1  8082             rlc     a
                +1  8083             mov     r3,a
                +1  8084             mov     a,r2
                +1  8085             rlc     a
                +1  8086             mov     r2,a
                +1  8087             endm
                +1  8088     
                +1  8089     neg1    macro
                +1  8090             clr     c
                +1  8091             clr     a
                +1  8092             subb    a,r5
                +1  8093             mov     r5,a
                +1  8094             clr     a
                +1  8095             subb    a,r4
                +1  8096             mov     r4,a
                +1  8097             clr     a
                +1  8098             subb    a,r3
                +1  8099             mov     r3,a
                +1  8100             clr     a
                +1  8101             subb    a,r2
                +1  8102             mov     r2,a
                +1  8103             endm
                +1  8104     
                +1  8105     negm    macro  addr
                +1  8106             clr     c
                +1  8107             clr     a
                +1  8108             subb    a,addr+3
                +1  8109             mov     addr+3,a
                +1  8110             clr     a
                +1  8111             subb    a,addr+2
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   126

                +1  8112             mov     addr+2,a
                +1  8113             clr     a
                +1  8114             subb    a,addr+1
                +1  8115             mov     addr+1,a
                +1  8116             clr     a
                +1  8117             subb    a,addr
                +1  8118             mov     addr,a
                +1  8119             endm
                +1  8120     
                +1  8121     copytor macro  addr
                +1  8122             mov     r2,addr
                +1  8123             mov     r3,addr+1
                +1  8124             mov     r4,addr+2
                +1  8125             mov     r5,addr+3
                +1  8126             endm
                +1  8127     
                +1  8128     
                +1  8129     copyrto macro  addr
                +1  8130             mov     addr,r2
                +1  8131             mov     addr+1,r3
                +1  8132             mov     addr+2,r4
                +1  8133             mov     addr+3,r5
                +1  8134             endm
                +1  8135     
                +1  8136     
                +1  8137     ;       Internal representation: in this set of routines a floating number
                +1  8138     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  8139     
                +1  8140     ;       Stack offset values
                +1  8141     ;ltemp   equ     28h
                +1  8142     
  0006          +1  8143     cntr    equ     6               ;r6 is the counter
  0007          +1  8144     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  8145     exp1    equ     0               ;exponent 1 in r0
  0002          +1  8146     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  8147     exp2    equ     1               ;exponent 1 in r1
  0008          +1  8148     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  8149     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  8150     
                +1  8151     
                +1  8152     
                +1  8153     
                +1  8154     
                +1  8155     ;DECSIZE        EQU      10
                +1  8156     ;NUMSIZE        EQU      4
                +1  8157     ;RR4            EQU      4
                +1  8158     ;RR5            EQU      5
                +1  8159     
                +1  8160     ;       unpack1 - unpacks the left operand
                +1  8161     
009E            +1  8162     unpack1:
009E EA         +1  8163             mov     a,r2            ;get sign
009F 5480       +1  8164             anl     a,#80h
00A1 530740     +1  8165             anl     sign,#40h       ;clear other bits
00A4 4207       +1  8166             orl     sign,a          ;store sign
00A6 EB         +1  8167             mov     a,r3            ;get lsb of exponent
00A7 33         +1  8168             rlc     a               ;rotate into carry
00A8 EA         +1  8169             mov     a,r2            ;get rest of exponent
00A9 33         +1  8170             rlc     a               ;and make it 8 bits
00AA F8         +1  8171             mov     r0,a            ;store it
00AB 6006       +1  8172             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  8173             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  8174             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  8175             ret
00B3            +1  8176     zer1:
00B3 E4         +1  8177             clr     a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   127

00B4 FA         +1  8178             mov     r2,a
00B5 FB         +1  8179             mov     r3,a
00B6 FC         +1  8180             mov     r4,a
00B7 FD         +1  8181             mov     r5,a            ;zero mantissa
00B8 F8         +1  8182             mov     r0,a            ;zero exponent
00B9 22         +1  8183             ret
                +1  8184     
                +1  8185     ;       unpack2 - unpacks right operand
                +1  8186     
00BA            +1  8187     unpack2:
00BA E508       +1  8188             mov     a,ltemp         ;get sign
00BC 13         +1  8189             rrc     a               ;shift down
00BD 5440       +1  8190             anl     a,#40h          ;mask out sign
00BF 530780     +1  8191             anl     sign,#80h       ;clear old bit
00C2 4207       +1  8192             orl     sign,a
00C4 E509       +1  8193             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  8194             rlc     a               ;rotate into carry
00C7 E508       +1  8195             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  8196             rlc     a               ;and make it 8 bits
00CA F9         +1  8197             mov     r1,a            ;store it
00CB 6007       +1  8198             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  8199             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  8200             mov     mant2,#0        ;clear upper byte
00D3 22         +1  8201             ret
00D4            +1  8202     zer2:
00D4 E4         +1  8203             clr     a
00D5 F508       +1  8204             mov     ltemp,a
00D7 F509       +1  8205             mov     ltemp+1,a
00D9 F50A       +1  8206             mov     ltemp+2,a
00DB F50B       +1  8207             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  8208             ret
                +1  8209     
                +1  8210     ;       pack1 - put operand 1 back into float format
                +1  8211     
00DE            +1  8212     pack1:
00DE E8         +1  8213             mov     a,r0            ;get exponent
00DF C3         +1  8214             clr     c
00E0 13         +1  8215             rrc     a               ;shift down 1 bit
00E1 530780     +1  8216             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  8217             orl     a,r7            ;or in sign bit
00E5 FA         +1  8218             mov     r2,a            ;store
00E6 E8         +1  8219             mov     a,r0            ;get other bit
00E7 03         +1  8220             rr      a               ;rotate into hi bit
00E8 5480       +1  8221             anl     a,#80h          ;mask
00EA 53037F     +1  8222             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  8223             orl     mant1+1,a       ;put in
00EF 22         +1  8224             ret
                +1  8225     
                +1  8226     
                +1  8227     ;       norm1 - normalize the unpacked value in 1
                +1  8228     
00F0            +1  8229     norm1:
00F0 E8         +1  8230             mov     a,r0            ;get exponent
00F1 60C0       +1  8231             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  8232             mov     a,r2            ;get hi byte
00F4 6023       +1  8233             jz      norup           ;zero, so shift up if anything
00F6            +1  8234     nordn:
00F6 EA         +1  8235             mov     a,r2            ;get hi byte
00F7 B4010D     +1  8236             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  8237+3           add1                    ;add in a rounding bit
00FA ED         +1  8238+1           mov     a,r5
00FB 2401       +1  8239+1           add     a,#1
00FD FD         +1  8240+1           mov     r5,a
00FE E4         +1  8241+1           clr     a
00FF 3C         +1  8242+1           addc    a,r4
0100 FC         +1  8243+1           mov     r4,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   128

0101 E4         +1  8244+1           clr     a
0102 3B         +1  8245+1           addc    a,r3
0103 FB         +1  8246+1           mov     r3,a
0104 E4         +1  8247+1           clr     a
0105 3A         +1  8248+1           addc    a,r2
0106 FA         +1  8249+1           mov     r2,a
0107            +1  8250     nordn1:
                +1  8251+3           rshift                  ;shift down 1 bit
0107 C3         +1  8252+1           clr     c
0108 EA         +1  8253+1           mov     a,r2
0109 13         +1  8254+1           rrc     a
010A FA         +1  8255+1           mov     r2,a
010B EB         +1  8256+1           mov     a,r3
010C 13         +1  8257+1           rrc     a
010D FB         +1  8258+1           mov     r3,a
010E EC         +1  8259+1           mov     a,r4
010F 13         +1  8260+1           rrc     a
0110 FC         +1  8261+1           mov     r4,a
0111 ED         +1  8262+1           mov     a,r5
0112 13         +1  8263+1           rrc     a
0113 FD         +1  8264+1           mov     r5,a
0114 08         +1  8265             inc     r0              ;adjust exponent
0115 EA         +1  8266             mov     a,r2            ;test high byte
0116 70DE       +1  8267             jnz     nordn           ;loop
0118 22         +1  8268             ret                     ;done
                +1  8269     
0119            +1  8270     norup:
0119 4B         +1  8271             orl     a,r3
011A 4C         +1  8272             orl     a,r4
011B 4D         +1  8273             orl     a,r5            ;test for zero mantissa
011C 6095       +1  8274             jz      zer1            ;it is - make it true zero
011E            +1  8275     norup1:
011E EB         +1  8276             mov     a,r3            ;get mantissa byte
011F 20E710     +1  8277             jb      acc.7,norup2    ;jump if set
0122 C3         +1  8278             clr     c
                +1  8279+3           lshift                  ;shift mantissa up
0123 ED         +1  8280+1           mov     a,r5
0124 33         +1  8281+1           rlc     a
0125 FD         +1  8282+1           mov     r5,a
0126 EC         +1  8283+1           mov     a,r4
0127 33         +1  8284+1           rlc     a
0128 FC         +1  8285+1           mov     r4,a
0129 EB         +1  8286+1           mov     a,r3
012A 33         +1  8287+1           rlc     a
012B FB         +1  8288+1           mov     r3,a
012C EA         +1  8289+1           mov     a,r2
012D 33         +1  8290+1           rlc     a
012E FA         +1  8291+1           mov     r2,a
012F 18         +1  8292             dec     r0              ;adjust exponent
0130 80EC       +1  8293             jmp     norup1
0132            +1  8294     norup2:
0132 22         +1  8295             ret                     ;finito
                +1  8296     
                +1  8297     
                +1  8298     ;       fpdenorm - denormalize one of the two operands so that their
                +1  8299     ;       exponents are equal. This requires the smaller number to have
                +1  8300     ;       its exponent incremented and its mantissa shifted right.
                +1  8301     
0133            +1  8302     denorm:
0133 E8         +1  8303             mov     a,r0
0134 C3         +1  8304             clr     c
0135 99         +1  8305             subb    a,r1            ;compare exponents
0136 5029       +1  8306             jnc     up2a            ;shift operand 2
0138            +1  8307     up1:
0138 08         +1  8308             inc     r0              ;increment exponent
                +1  8309+3           rshift                  ;shift mantissa down
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   129

0139 C3         +1  8310+1           clr     c
013A EA         +1  8311+1           mov     a,r2
013B 13         +1  8312+1           rrc     a
013C FA         +1  8313+1           mov     r2,a
013D EB         +1  8314+1           mov     a,r3
013E 13         +1  8315+1           rrc     a
013F FB         +1  8316+1           mov     r3,a
0140 EC         +1  8317+1           mov     a,r4
0141 13         +1  8318+1           rrc     a
0142 FC         +1  8319+1           mov     r4,a
0143 ED         +1  8320+1           mov     a,r5
0144 13         +1  8321+1           rrc     a
0145 FD         +1  8322+1           mov     r5,a
0146 E8         +1  8323             mov     a,r0
0147 B501EE     +1  8324             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  8325             ret
                +1  8326     
014B            +1  8327     up2:
014B 09         +1  8328             inc     r1              ;increment exponent 2
                +1  8329+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  8330+1           clr     c
014D E508       +1  8331+1           mov     a,mant2
014F 13         +1  8332+1           rrc     a
0150 F508       +1  8333+1           mov     mant2,a
0152 E509       +1  8334+1           mov     a,mant2+1
0154 13         +1  8335+1           rrc     a
0155 F509       +1  8336+1           mov     mant2+1,a
0157 E50A       +1  8337+1           mov     a,mant2+2
0159 13         +1  8338+1           rrc     a
015A F50A       +1  8339+1           mov     mant2+2,a
015C E50B       +1  8340+1           mov     a,mant2+3
015E 13         +1  8341+1           rrc     a
015F F50B       +1  8342+1           mov     mant2+3,a
0161            +1  8343     up2a:
0161 E8         +1  8344             mov     a,r0            ;compare exponents
0162 B501E6     +1  8345             cjne    a,exp2,up2
0165 22         +1  8346             ret                     ;all done
                +1  8347     ;------------------------------------------------------------------
                +1  8348     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  8349     
0166            +1  8350     fladd:
                +1  8351+3           saveregs
0166 C007       +1  8352+1           push    7
0168 C006       +1  8353+1           push    6
016A C001       +1  8354+1           push    1
016C C000       +1  8355+1           push    0
016E 119E       +1  8356             call    unpack1
0170 11BA       +1  8357             call    unpack2
0172 3133       +1  8358             call    denorm
0174 E507       +1  8359             mov     a,sign
0176 30E70D     +1  8360             jnb     acc.7,ok1       ;test left sign
                +1  8361+3           neg1                    ;negate op1
0179 C3         +1  8362+1           clr     c
017A E4         +1  8363+1           clr     a
017B 9D         +1  8364+1           subb    a,r5
017C FD         +1  8365+1           mov     r5,a
017D E4         +1  8366+1           clr     a
017E 9C         +1  8367+1           subb    a,r4
017F FC         +1  8368+1           mov     r4,a
0180 E4         +1  8369+1           clr     a
0181 9B         +1  8370+1           subb    a,r3
0182 FB         +1  8371+1           mov     r3,a
0183 E4         +1  8372+1           clr     a
0184 9A         +1  8373+1           subb    a,r2
0185 FA         +1  8374+1           mov     r2,a
0186            +1  8375     ok1:
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   130

0186 E507       +1  8376             mov     a,sign
0188 30E615     +1  8377             jnb     acc.6,ok2       ;test right sign
                +1  8378+3           negm    mant2           ;negate op2
018B C3         +1  8379+1           clr     c
018C E4         +1  8380+1           clr     a
018D 950B       +1  8381+1           subb    a,mant2+3
018F F50B       +1  8382+1           mov     mant2+3,a
0191 E4         +1  8383+1           clr     a
0192 950A       +1  8384+1           subb    a,mant2+2
0194 F50A       +1  8385+1           mov     mant2+2,a
0196 E4         +1  8386+1           clr     a
0197 9509       +1  8387+1           subb    a,mant2+1
0199 F509       +1  8388+1           mov     mant2+1,a
019B E4         +1  8389+1           clr     a
019C 9508       +1  8390+1           subb    a,mant2
019E F508       +1  8391+1           mov     mant2,a
01A0            +1  8392     ok2:
                +1  8393+3           addl    mant2           ;add mantissas
01A0 ED         +1  8394+1           mov     a,r5
01A1 250B       +1  8395+1           add     a,mant2+3
01A3 FD         +1  8396+1           mov     r5,a
01A4 E50A       +1  8397+1           mov     a,mant2+2
01A6 3C         +1  8398+1           addc    a,r4
01A7 FC         +1  8399+1           mov     r4,a
01A8 E509       +1  8400+1           mov     a,mant2+1
01AA 3B         +1  8401+1           addc    a,r3
01AB FB         +1  8402+1           mov     r3,a
01AC E508       +1  8403+1           mov     a,mant2+0
01AE 3A         +1  8404+1           addc    a,r2
01AF FA         +1  8405+1           mov     r2,a
01B0 E4         +1  8406             clr     a
01B1 FF         +1  8407             mov     r7,a            ;clear sign
01B2 EA         +1  8408             mov     a,r2            ;get sign of result
01B3 30E70E     +1  8409             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  8410             mov     r7,a            ;store sign
                +1  8411+3           neg1                    ;negate mantissa
01B7 C3         +1  8412+1           clr     c
01B8 E4         +1  8413+1           clr     a
01B9 9D         +1  8414+1           subb    a,r5
01BA FD         +1  8415+1           mov     r5,a
01BB E4         +1  8416+1           clr     a
01BC 9C         +1  8417+1           subb    a,r4
01BD FC         +1  8418+1           mov     r4,a
01BE E4         +1  8419+1           clr     a
01BF 9B         +1  8420+1           subb    a,r3
01C0 FB         +1  8421+1           mov     r3,a
01C1 E4         +1  8422+1           clr     a
01C2 9A         +1  8423+1           subb    a,r2
01C3 FA         +1  8424+1           mov     r2,a
01C4            +1  8425     ok3:
01C4 11F0       +1  8426             call    norm1
01C6 11DE       +1  8427             call    pack1           ;pack normalized result
                +1  8428+3           restregs                ;and return
01C8 D000       +1  8429+1           pop     0
01CA D001       +1  8430+1           pop     1
01CC D006       +1  8431+1           pop     6
01CE D007       +1  8432+1           pop     7
01D0 22         +1  8433             ret
                +1  8434     ;-------------------------------------------------------------
                +1  8435     ;       Subtract the number ltemp from the number in r2-r5
                +1  8436     
01D1            +1  8437     flsub:
01D1 630880     +1  8438             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  8439             jmp     fladd           ;and add!
                +1  8440     
                +1  8441     ;================================================================
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   131

                +1  8442     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  8443     
01D6            +1  8444     flcmp:
01D6 EA         +1  8445            mov     a,r2            ;get sign of left
01D7 6508       +1  8446            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  8447            jnb     acc.7,cexp      ;same, go check exponent
                +1  8448     ;ifdef SMALL_MODEL
01DC EA         +1  8449             mov     a,r2            ;get sign of left again
01DD 33         +1  8450             rlc     a
01DE 5001       +1  8451             jnc     flout
                +1  8452     ;endif
01E0 D3         +1  8453             setb    c
01E1 22         +1  8454     flout:          ret                    ;return with acc < 0
                +1  8455     
01E2            +1  8456     cexp:
01E2 C3         +1  8457            clr     c
01E3 EA         +1  8458            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  8459            subb    a,ltemp
01E6 7010       +1  8460            jnz     fnd
01E8 EB         +1  8461            mov     a,r3
01E9 9509       +1  8462            subb    a,ltemp+1
01EB 700B       +1  8463            jnz     fnd
01ED EC         +1  8464            mov     a,r4
01EE 950A       +1  8465            subb    a,ltemp+2
01F0 7006       +1  8466            jnz     fnd
01F2 ED         +1  8467            mov     a,r5
01F3 950B       +1  8468            subb    a,ltemp+3
01F5 7001       +1  8469            jnz     fnd
01F7            +1  8470     cdone:
01F7 22         +1  8471            ret                     ;return with acc == 0
01F8            +1  8472     fnd:
01F8 8AF0       +1  8473           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  8474          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  8475            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  8476                         orl         a,#1                          ;make non-zero
0201 B3         +1  8477             cpl     c               ;c=0->1,c=1->0
0202 22         +1  8478             ret
                +1  8479     ;==============================================================
                +1  8480     
                +1  8481     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  8482     ;       the result in r2-r5
                +1  8483     
0203            +1  8484     flmul:
                +1  8485+3           saveregs
0203 C007       +1  8486+1           push    7
0205 C006       +1  8487+1           push    6
0207 C001       +1  8488+1           push    1
0209 C000       +1  8489+1           push    0
020B 119E       +1  8490             call    unpack1
020D 11BA       +1  8491             call    unpack2
020F E4         +1  8492             clr     a
0210 F50C       +1  8493             mov     prod,a
0212 F50D       +1  8494             mov     prod+1,a        ;clear product
0214 F50E       +1  8495             mov     prod+2,a
0216 F50F       +1  8496             mov     prod+3,a
0218 7E07       +1  8497             mov     r6,#7           ;initialize counter
021A            +1  8498     mup1:
                +1  8499+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  8500+1           clr     c
021B E508       +1  8501+1           mov     a,mant2
021D 13         +1  8502+1           rrc     a
021E F508       +1  8503+1           mov     mant2,a
0220 E509       +1  8504+1           mov     a,mant2+1
0222 13         +1  8505+1           rrc     a
0223 F509       +1  8506+1           mov     mant2+1,a
0225 E50A       +1  8507+1           mov     a,mant2+2
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   132

0227 13         +1  8508+1           rrc     a
0228 F50A       +1  8509+1           mov     mant2+2,a
022A E50B       +1  8510+1           mov     a,mant2+3
022C 13         +1  8511+1           rrc     a
022D F50B       +1  8512+1           mov     mant2+3,a
022F 5014       +1  8513             jnc     nobit           ;skip if lsb was zero
                +1  8514+3           dan     prod            ;add multiplicand to product
0231 ED         +1  8515+1           mov     a,r5
0232 250F       +1  8516+1           add     a,prod+3
0234 F50F       +1  8517+1           mov     prod+3,a
0236 E50E       +1  8518+1           mov     a,prod+2
0238 3C         +1  8519+1           addc    a,r4
0239 F50E       +1  8520+1           mov     prod+2,a
023B E50D       +1  8521+1           mov     a,prod+1
023D 3B         +1  8522+1           addc    a,r3
023E F50D       +1  8523+1           mov     prod+1,a
0240 E50C       +1  8524+1           mov     a,prod+0
0242 3A         +1  8525+1           addc    a,r2
0243 F50C       +1  8526+1           mov     prod,a
0245            +1  8527     nobit:
                +1  8528+3           lshift                  ;shift multiplicand up
0245 ED         +1  8529+1           mov     a,r5
0246 33         +1  8530+1           rlc     a
0247 FD         +1  8531+1           mov     r5,a
0248 EC         +1  8532+1           mov     a,r4
0249 33         +1  8533+1           rlc     a
024A FC         +1  8534+1           mov     r4,a
024B EB         +1  8535+1           mov     a,r3
024C 33         +1  8536+1           rlc     a
024D FB         +1  8537+1           mov     r3,a
024E EA         +1  8538+1           mov     a,r2
024F 33         +1  8539+1           rlc     a
0250 FA         +1  8540+1           mov     r2,a
0251 DEC7       +1  8541             djnz    r6,mup1         ;loop if more
                +1  8542     
0253 7E11       +1  8543             mov     r6,#17          ;re-initalize counter
0255 8015       +1  8544             sjmp    mup3
0257            +1  8545     mup11:
                +1  8546+3           shfdn   prod            ;shift product right
0257 C3         +1  8547+1           clr     c
0258 E50C       +1  8548+1           mov     a,prod
025A 13         +1  8549+1           rrc     a
025B F50C       +1  8550+1           mov     prod,a
025D E50D       +1  8551+1           mov     a,prod+1
025F 13         +1  8552+1           rrc     a
0260 F50D       +1  8553+1           mov     prod+1,a
0262 E50E       +1  8554+1           mov     a,prod+2
0264 13         +1  8555+1           rrc     a
0265 F50E       +1  8556+1           mov     prod+2,a
0267 E50F       +1  8557+1           mov     a,prod+3
0269 13         +1  8558+1           rrc     a
026A F50F       +1  8559+1           mov     prod+3,a
026C            +1  8560     mup3:
                +1  8561+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  8562+1           clr     c
026D E508       +1  8563+1           mov     a,mant2
026F 13         +1  8564+1           rrc     a
0270 F508       +1  8565+1           mov     mant2,a
0272 E509       +1  8566+1           mov     a,mant2+1
0274 13         +1  8567+1           rrc     a
0275 F509       +1  8568+1           mov     mant2+1,a
0277 E50A       +1  8569+1           mov     a,mant2+2
0279 13         +1  8570+1           rrc     a
027A F50A       +1  8571+1           mov     mant2+2,a
027C E50B       +1  8572+1           mov     a,mant2+3
027E 13         +1  8573+1           rrc     a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   133

027F F50B       +1  8574+1           mov     mant2+3,a
0281 5014       +1  8575             jnc     mup2            ;skip if bit not set
                +1  8576+3           dan     prod            ;add to prod
0283 ED         +1  8577+1           mov     a,r5
0284 250F       +1  8578+1           add     a,prod+3
0286 F50F       +1  8579+1           mov     prod+3,a
0288 E50E       +1  8580+1           mov     a,prod+2
028A 3C         +1  8581+1           addc    a,r4
028B F50E       +1  8582+1           mov     prod+2,a
028D E50D       +1  8583+1           mov     a,prod+1
028F 3B         +1  8584+1           addc    a,r3
0290 F50D       +1  8585+1           mov     prod+1,a
0292 E50C       +1  8586+1           mov     a,prod+0
0294 3A         +1  8587+1           addc    a,r2
0295 F50C       +1  8588+1           mov     prod,a
0297            +1  8589     mup2:
0297 DEBE       +1  8590             djnz    r6,mup11        ;loop if more
0299 E8         +1  8591             mov     a,r0            ;get exp1
029A 29         +1  8592             add     a,r1            ;add exp2
029B 247A       +1  8593             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8594             mov     r0,a            ;store
029E EF         +1  8595             mov     a,r7            ;get sign
029F 23         +1  8596             rl      a               ;rotate bit into msb
02A0 6207       +1  8597             xrl     sign,a          ;xor with other bit
                +1  8598+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8599+1           mov     r2,prod
02A4 AB0D       +1  8600+1           mov     r3,prod+1
02A6 AC0E       +1  8601+1           mov     r4,prod+2
02A8 AD0F       +1  8602+1           mov     r5,prod+3
02AA 11F0       +1  8603             call    norm1           ;normalize
02AC 11DE       +1  8604             call    pack1
                +1  8605+3           restregs
02AE D000       +1  8606+1           pop     0
02B0 D001       +1  8607+1           pop     1
02B2 D006       +1  8608+1           pop     6
02B4 D007       +1  8609+1           pop     7
02B6 22         +1  8610             ret
                +1  8611     ;-----------------------------------------------------------
                +1  8612     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8613     
02B7            +1  8614     fldiv:
                +1  8615+3           saveregs
02B7 C007       +1  8616+1           push    7
02B9 C006       +1  8617+1           push    6
02BB C001       +1  8618+1           push    1
02BD C000       +1  8619+1           push    0
02BF 119E       +1  8620             call    unpack1
02C1 11BA       +1  8621             call    unpack2
02C3 E4         +1  8622             clr     a
02C4 F50C       +1  8623             mov     prod,a
02C6 F50D       +1  8624             mov     prod+1,a
02C8 F50E       +1  8625             mov     prod+2,a
02CA F50F       +1  8626             mov     prod+3,a
02CC E9         +1  8627             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8628             jz      div9
02CF E8         +1  8629             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8630             jz      div9
02D2 C3         +1  8631             clr     c
02D3 99         +1  8632             subb    a,r1            ;compute new exponent
02D4 2478       +1  8633             add     a,#127-7        ;unbias
02D6 F8         +1  8634             mov     r0,a            ;store back
02D7 EF         +1  8635             mov     a,r7            ;get sign
02D8 23         +1  8636             rl      a
02D9 6207       +1  8637             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8638             mov     r6,#24+7        ;initialize counter
02DD            +1  8639     div1:
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   134

                +1  8640+3           shfup   prod            ;shift quotient up
02DD C3         +1  8641+1           clr     c
02DE E50F       +1  8642+1           mov     a,prod+3
02E0 33         +1  8643+1           rlc     a
02E1 F50F       +1  8644+1           mov     prod+3,a
02E3 E50E       +1  8645+1           mov     a,prod+2
02E5 33         +1  8646+1           rlc     a
02E6 F50E       +1  8647+1           mov     prod+2,a
02E8 E50D       +1  8648+1           mov     a,prod+1
02EA 33         +1  8649+1           rlc     a
02EB F50D       +1  8650+1           mov     prod+1,a
02ED E50C       +1  8651+1           mov     a,prod
02EF 33         +1  8652+1           rlc     a
02F0 F50C       +1  8653+1           mov     prod,a
02F2 C3         +1  8654             clr     c
02F3 EA         +1  8655             mov     a,r2            ;compare values
02F4 9508       +1  8656             subb    a,mant2
02F6 4028       +1  8657             jc      div2            ;skip if bigger
02F8 7013       +1  8658             jnz     div3
02FA EB         +1  8659             mov     a,r3            ;compare values
02FB 9509       +1  8660             subb    a,mant2+1
02FD 4021       +1  8661             jc      div2            ;skip if bigger
02FF 700C       +1  8662             jnz     div3
0301 EC         +1  8663             mov     a,r4            ;compare values
0302 950A       +1  8664             subb    a,mant2+2
0304 401A       +1  8665             jc      div2            ;skip if bigger
0306 7005       +1  8666             jnz     div3
0308 ED         +1  8667             mov     a,r5            ;compare values
0309 950B       +1  8668             subb    a,mant2+3
030B 4013       +1  8669             jc      div2            ;skip if bigger
030D            +1  8670     div3:
030D ED         +1  8671             mov     a,r5
030E 950B       +1  8672             subb    a,mant2+3
0310 FD         +1  8673             mov     r5,a
0311 EC         +1  8674             mov     a,r4
0312 950A       +1  8675             subb    a,mant2+2               ;do subtraction
0314 FC         +1  8676             mov     r4,a
0315 EB         +1  8677             mov     a,r3
0316 9509       +1  8678             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8679             mov     r3,a
0319 EA         +1  8680             mov     a,r2
031A 9508       +1  8681             subb    a,mant2         ;do subtraction
031C FA         +1  8682             mov     r2,a
031D 430F01     +1  8683             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8684     div2:
                +1  8685+3           lshift                  ;shift dividend up
0320 ED         +1  8686+1           mov     a,r5
0321 33         +1  8687+1           rlc     a
0322 FD         +1  8688+1           mov     r5,a
0323 EC         +1  8689+1           mov     a,r4
0324 33         +1  8690+1           rlc     a
0325 FC         +1  8691+1           mov     r4,a
0326 EB         +1  8692+1           mov     a,r3
0327 33         +1  8693+1           rlc     a
0328 FB         +1  8694+1           mov     r3,a
0329 EA         +1  8695+1           mov     a,r2
032A 33         +1  8696+1           rlc     a
032B FA         +1  8697+1           mov     r2,a
032C DEAF       +1  8698             djnz    r6,div1         ;loop if more
                +1  8699+3           copytor prod            ;copy quotient
032E AA0C       +1  8700+1           mov     r2,prod
0330 AB0D       +1  8701+1           mov     r3,prod+1
0332 AC0E       +1  8702+1           mov     r4,prod+2
0334 AD0F       +1  8703+1           mov     r5,prod+3
0336            +1  8704     div9:
0336 11F0       +1  8705             call    norm1           ;now normalize result
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   135

0338 11DE       +1  8706             call    pack1           ;pack it up
                +1  8707+3           restregs                ;restore registers
033A D000       +1  8708+1           pop     0
033C D001       +1  8709+1           pop     1
033E D006       +1  8710+1           pop     6
0340 D007       +1  8711+1           pop     7
0342 22         +1  8712             ret
                +1  8713     ;------------------------------------------------------------------
                +1  8714     
                +1  8715     ;       Float to long conversion: if the exponent is less than the
                +1  8716     ;       excess value, the result is zero. If the exponent is so large
                +1  8717     ;       that the value would be shifted out, the result is overflow.
                +1  8718     ;       Otherwise shift the mantissa up or down as required.
                +1  8719     
0343            +1  8720     ftol:
                +1  8721+3           saveregs
0343 C007       +1  8722+1           push    7
0345 C006       +1  8723+1           push    6
0347 C001       +1  8724+1           push    1
0349 C000       +1  8725+1           push    0
034B EA         +1  8726             mov     a,r2
034C B4BF09     +1  8727             cjne    a,#0bfh,ne05
034F EB         +1  8728             mov     a,r3
0350 7006       +1  8729             jnz     ne05
0352 EC         +1  8730             mov     a,r4
0353 7003       +1  8731             jnz     ne05
0355 ED         +1  8732             mov     a,r5
0356 6024       +1  8733             jz      ftol1
0358 119E       +1  8734     ne05:   call    unpack1
035A E8         +1  8735             mov     a,r0            ;get exponent
035B 2482       +1  8736             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8737             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8738             mov     a,r7            ;get sign
0361 30E70D     +1  8739             jnb     acc.7,ftol4     ;skip if +ve
                +1  8740+3           neg1                    ;negate it
0364 C3         +1  8741+1           clr     c
0365 E4         +1  8742+1           clr     a
0366 9D         +1  8743+1           subb    a,r5
0367 FD         +1  8744+1           mov     r5,a
0368 E4         +1  8745+1           clr     a
0369 9C         +1  8746+1           subb    a,r4
036A FC         +1  8747+1           mov     r4,a
036B E4         +1  8748+1           clr     a
036C 9B         +1  8749+1           subb    a,r3
036D FB         +1  8750+1           mov     r3,a
036E E4         +1  8751+1           clr     a
036F 9A         +1  8752+1           subb    a,r2
0370 FA         +1  8753+1           mov     r2,a
0371            +1  8754     ftol4:
0371 E8         +1  8755             mov     a,r0            ;get exponent
0372 246A       +1  8756             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8757             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8758             mov     r0,a            ;save it
0378 24F8       +1  8759             add     a,#-8           ;if > 8, too big
037A 500E       +1  8760             jnc     ftol3
037C            +1  8761     ftol1:
037C E4         +1  8762             clr     a
037D FA         +1  8763             mov     r2,a
037E FB         +1  8764             mov     r3,a
037F FC         +1  8765             mov     r4,a
0380 FD         +1  8766             mov     r5,a
0381            +1  8767     ftol9:
                +1  8768+3           restregs
0381 D000       +1  8769+1           pop     0
0383 D001       +1  8770+1           pop     1
0385 D006       +1  8771+1           pop     6
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   136

0387 D007       +1  8772+1           pop     7
0389 22         +1  8773             ret
038A            +1  8774     ftol3:
038A E8         +1  8775             mov     a,r0
038B FE         +1  8776             mov     r6,a            ;store in counter
038C 60F3       +1  8777             jz      ftol9           ;if zero, do nothing
038E            +1  8778     ftol33:
                +1  8779+3           lshift                  ;shift up
038E ED         +1  8780+1           mov     a,r5
038F 33         +1  8781+1           rlc     a
0390 FD         +1  8782+1           mov     r5,a
0391 EC         +1  8783+1           mov     a,r4
0392 33         +1  8784+1           rlc     a
0393 FC         +1  8785+1           mov     r4,a
0394 EB         +1  8786+1           mov     a,r3
0395 33         +1  8787+1           rlc     a
0396 FB         +1  8788+1           mov     r3,a
0397 EA         +1  8789+1           mov     a,r2
0398 33         +1  8790+1           rlc     a
0399 FA         +1  8791+1           mov     r2,a
039A DEF2       +1  8792             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8793             sjmp    ftol9
039E            +1  8794     ftol2:
039E F4         +1  8795             cpl     a               ;complement
039F FE         +1  8796             mov     r6,a
03A0 6022       +1  8797             jz      ftol22
03A2            +1  8798     ftol23:
03A2 EF         +1  8799             mov     a,r7
03A3 30E70F     +1  8800             jnb     acc.7,ftol24
                +1  8801+3           rshift1
03A6 D3         +1  8802+1           setb    c
03A7 EA         +1  8803+1           mov     a,r2
03A8 13         +1  8804+1           rrc     a
03A9 FA         +1  8805+1           mov     r2,a
03AA EB         +1  8806+1           mov     a,r3
03AB 13         +1  8807+1           rrc     a
03AC FB         +1  8808+1           mov     r3,a
03AD EC         +1  8809+1           mov     a,r4
03AE 13         +1  8810+1           rrc     a
03AF FC         +1  8811+1           mov     r4,a
03B0 ED         +1  8812+1           mov     a,r5
03B1 13         +1  8813+1           rrc     a
03B2 FD         +1  8814+1           mov     r5,a
03B3 800D       +1  8815             jmp     ftol25
03B5            +1  8816+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8817+1           clr     c
03B6 EA         +1  8818+1           mov     a,r2
03B7 13         +1  8819+1           rrc     a
03B8 FA         +1  8820+1           mov     r2,a
03B9 EB         +1  8821+1           mov     a,r3
03BA 13         +1  8822+1           rrc     a
03BB FB         +1  8823+1           mov     r3,a
03BC EC         +1  8824+1           mov     a,r4
03BD 13         +1  8825+1           rrc     a
03BE FC         +1  8826+1           mov     r4,a
03BF ED         +1  8827+1           mov     a,r5
03C0 13         +1  8828+1           rrc     a
03C1 FD         +1  8829+1           mov     r5,a
03C2 DEDE       +1  8830     ftol25: djnz    r6,ftol23
03C4            +1  8831     ftol22:
                +1  8832+3           add1                    ;round
03C4 ED         +1  8833+1           mov     a,r5
03C5 2401       +1  8834+1           add     a,#1
03C7 FD         +1  8835+1           mov     r5,a
03C8 E4         +1  8836+1           clr     a
03C9 3C         +1  8837+1           addc    a,r4
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   137

03CA FC         +1  8838+1           mov     r4,a
03CB E4         +1  8839+1           clr     a
03CC 3B         +1  8840+1           addc    a,r3
03CD FB         +1  8841+1           mov     r3,a
03CE E4         +1  8842+1           clr     a
03CF 3A         +1  8843+1           addc    a,r2
03D0 FA         +1  8844+1           mov     r2,a
03D1 EF         +1  8845             mov     a,r7
03D2 30E70F     +1  8846             jnb     acc.7,ftol26
                +1  8847+3           rshift1
03D5 D3         +1  8848+1           setb    c
03D6 EA         +1  8849+1           mov     a,r2
03D7 13         +1  8850+1           rrc     a
03D8 FA         +1  8851+1           mov     r2,a
03D9 EB         +1  8852+1           mov     a,r3
03DA 13         +1  8853+1           rrc     a
03DB FB         +1  8854+1           mov     r3,a
03DC EC         +1  8855+1           mov     a,r4
03DD 13         +1  8856+1           rrc     a
03DE FC         +1  8857+1           mov     r4,a
03DF ED         +1  8858+1           mov     a,r5
03E0 13         +1  8859+1           rrc     a
03E1 FD         +1  8860+1           mov     r5,a
03E2 809D       +1  8861             jmp     ftol9
03E4            +1  8862+3   ftol26: rshift
03E4 C3         +1  8863+1           clr     c
03E5 EA         +1  8864+1           mov     a,r2
03E6 13         +1  8865+1           rrc     a
03E7 FA         +1  8866+1           mov     r2,a
03E8 EB         +1  8867+1           mov     a,r3
03E9 13         +1  8868+1           rrc     a
03EA FB         +1  8869+1           mov     r3,a
03EB EC         +1  8870+1           mov     a,r4
03EC 13         +1  8871+1           rrc     a
03ED FC         +1  8872+1           mov     r4,a
03EE ED         +1  8873+1           mov     a,r5
03EF 13         +1  8874+1           rrc     a
03F0 FD         +1  8875+1           mov     r5,a
03F1 808E       +1  8876             jmp     ftol9
                +1  8877     
                +1  8878     ;       arithmetic integer to floating conversions
                +1  8879     
03F3            +1  8880     abtof:
03F3 ED         +1  8881             mov     a,r5
03F4 23         +1  8882             rl      a
03F5 FC         +1  8883             mov     r4,a
03F6 9C         +1  8884             subb    a,r4
03F7 FC         +1  8885             mov     r4,a
03F8 FB         +1  8886             mov     r3,a
03F9 FA         +1  8887             mov     r2,a
03FA 8006       +1  8888             jmp     altof
03FC            +1  8889     awtof:
03FC EC         +1  8890             mov     a,r4
03FD 23         +1  8891             rl      a
03FE FB         +1  8892             mov     r3,a
03FF 9B         +1  8893             subb    a,r3
0400 FB         +1  8894             mov     r3,a
0401 FA         +1  8895             mov     r2,a
0402            +1  8896     altof:
                +1  8897+3           saveregs
0402 C007       +1  8898+1           push    7
0404 C006       +1  8899+1           push    6
0406 C001       +1  8900+1           push    1
0408 C000       +1  8901+1           push    0
040A EA         +1  8902             mov     a,r2            ;get sign
040B 5480       +1  8903             anl     a,#80h
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   138

040D FF         +1  8904             mov     r7,a            ;store it
040E 30E70D     +1  8905             jnb     acc.7,altof1    ;skip if +ve
                +1  8906+3           neg1
0411 C3         +1  8907+1           clr     c
0412 E4         +1  8908+1           clr     a
0413 9D         +1  8909+1           subb    a,r5
0414 FD         +1  8910+1           mov     r5,a
0415 E4         +1  8911+1           clr     a
0416 9C         +1  8912+1           subb    a,r4
0417 FC         +1  8913+1           mov     r4,a
0418 E4         +1  8914+1           clr     a
0419 9B         +1  8915+1           subb    a,r3
041A FB         +1  8916+1           mov     r3,a
041B E4         +1  8917+1           clr     a
041C 9A         +1  8918+1           subb    a,r2
041D FA         +1  8919+1           mov     r2,a
041E            +1  8920     altof1:
041E 7896       +1  8921             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8922             call    norm1           ;normalize it
0422 11DE       +1  8923             call    pack1           ;and pack up
                +1  8924+3           restregs
0424 D000       +1  8925+1           pop     0
0426 D001       +1  8926+1           pop     1
0428 D006       +1  8927+1           pop     6
042A D007       +1  8928+1           pop     7
042C 22         +1  8929             ret
                +1  8930     
042D            +1  8931     lbtof:
042D 7C00       +1  8932             mov     r4,#0
042F            +1  8933     lwtof:
042F E4         +1  8934             clr     a
0430 FB         +1  8935             mov     r3,a
0431 FA         +1  8936             mov     r2,a
0432            +1  8937     lltof:
                +1  8938+3           saveregs
0432 C007       +1  8939+1           push    7
0434 C006       +1  8940+1           push    6
0436 C001       +1  8941+1           push    1
0438 C000       +1  8942+1           push    0
043A 7F00       +1  8943             mov     r7,#0           ;zero sign
043C 80E0       +1  8944             sjmp    altof1
                +1  8945     
                +1  8946     ;-------------------------------------------------------
                +1  8947     
                +1  8948     
                    8949     
                    8950     ;$include (wriread.asm)
                +1  8951     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8952     cle256:         mov             IE,#00H
0441 75B601     +1  8953                             mov             FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8954                             MOV             PSCTL,#03
                +1  8955                                             
0447 7400       +1  8956                             mov             a,#00h  ;запись любого значения стирает страницу
0449 F0         +1  8957                             movx    @dptr,a                         ;wr
044A 758F00     +1  8958                             mov             PSCTL,#00
044D 75B600     +1  8959                             mov             FLSCL,#00
0450 75A880     +1  8960                             mov             IE,#80H
0453 22         +1  8961                             ret
                +1  8962     
                +1  8963     ;чтение памяти программ в r8..r11
                +1  8964     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8965     re4byte: mov            dph,r2
0456 8B82       +1  8966                     mov                     dpl,r3
0458 E4         +1  8967                     clr                     a
0459 93         +1  8968                     movc            a,@a+dptr
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   139

045A F508       +1  8969                     mov                     r8,a
045C A3         +1  8970                     inc                     dptr
045D E4         +1  8971                     clr                     a
045E 93         +1  8972                     movc            a,@a+dptr
045F F509       +1  8973                     mov                     r9,a
0461 A3         +1  8974                     inc                     dptr
0462 E4         +1  8975                     clr                     a
0463 93         +1  8976                     movc            a,@a+dptr
0464 F50A       +1  8977                     mov                     r10,a
0466 A3         +1  8978                     inc                     dptr
0467 E4         +1  8979                     clr                     a
0468 93         +1  8980                     movc            a,@a+dptr
0469 F50B       +1  8981                     mov                     r11,a                                           ;r8
                             ..r11
046B 22         +1  8982                     ret
                +1  8983      ;чтение памяти программ в r2..r5
                +1  8984     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8985     rebyte2: mov            dph,r2
046E 8B82       +1  8986                     mov                     dpl,r3
0470 E4         +1  8987                     clr                     a
0471 93         +1  8988                     movc            a,@a+dptr
0472 FA         +1  8989                     mov                     r2,a
0473 A3         +1  8990                     inc                     dptr
0474 E4         +1  8991                     clr                     a
0475 93         +1  8992                     movc            a,@a+dptr
0476 FB         +1  8993                     mov                     r3,a
0477 A3         +1  8994                     inc                     dptr
0478 E4         +1  8995                     clr                     a
0479 93         +1  8996                     movc            a,@a+dptr
047A FC         +1  8997                     mov                     r4,a
047B A3         +1  8998                     inc                     dptr
047C E4         +1  8999                     clr                     a
047D 93         +1  9000                     movc            a,@a+dptr
047E FD         +1  9001                     mov                     r5,a                                            ;r8
                             ..r11
047F 22         +1  9002                     ret
                +1  9003      
                +1  9004     ;r7-количество байт
                +1  9005     ;dptr-адр ячейки для записи
                +1  9006     ;r1-адр ячейки  внешнего озу
                +1  9007     
0480 75A800     +1  9008     wrpage: mov             IE,#00H
0483 75B601     +1  9009     WW5:    mov             FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  9010                     mov             PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  9011                     movx            a,@r1
048A F0         +1  9012                     movx            @dptr,a                         ;wr
048B 758F00     +1  9013                     mov             PSCTL,#0
048E 75B600     +1  9014                     mov             FLSCL,#00
0491 A3         +1  9015                     inc                     dptr
0492 09         +1  9016                     inc                     r1
0493 DFEE       +1  9017                     djnz            r7,WW5
0495 75A880     +1  9018                     mov             IE,#80H
0498 22         +1  9019                     ret
                +1  9020                             
                +1  9021     
                +1  9022     
                +1  9023     ;чтение памяти программ во внешнее озу
                +1  9024     ;вх-r2,r3-адр яч памяти прогр
                +1  9025     ;r1- яч внешнее озу
0499 8A83       +1  9026     copyPP:         mov                     dph,r2
049B 8B82       +1  9027                             mov                     dpl,r3
049D 7FFF       +1  9028                             mov                     r7,#0ffh
049F E4         +1  9029     copy1:          clr                     a
04A0 93         +1  9030                             movc            a,@a+dptr
04A1 F3         +1  9031                             movx                    @r1,a
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   140

04A2 A3         +1  9032                             inc                     dptr
04A3 09         +1  9033                             inc                     r1
04A4 DFF9       +1  9034                             djnz            r7,copy1
04A6 22         +1  9035                             ret
                +1  9036     
                +1  9037     ;r8..r11->@r0..@r0+3
                +1  9038     ;r0-адр ячейки
                +1  9039     ;сохранить в ячейке озу
04A7 E508       +1  9040     savelte:        mov     a,ltemp
04A9 F6         +1  9041                     mov     @r0,a
04AA 08         +1  9042                     inc     r0
04AB E509       +1  9043                     mov     a,ltemp+1
04AD F6         +1  9044                     mov     @r0,a
04AE 08         +1  9045                     inc     r0
04AF E50A       +1  9046                     mov     a,ltemp+2
04B1 F6         +1  9047                     mov     @r0,a
04B2 08         +1  9048                     inc     r0
04B3 E50B       +1  9049                     mov     a,ltemp+3
04B5 F6         +1  9050                     mov     @r0,a
04B6 22         +1  9051                     ret
                +1  9052     
                +1  9053     
                +1  9054      
                    9055     
                    9056     
                    9057     ;$include (d:\amper\subr7.asm)  
                    9058     ;$include (d:\amper\sarifm3.asm)                                        
                    9059     ;$include (d:\amper\floatm.asm)
                    9060     ;$include (d:\amper\wriread.asm)
                    9061                                                   
                    9062     END
                                                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   141

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      185#
AAPAR. . . . . . .  C ADDR   03CBH   R   SEG=MAIN   907#
ABIN . . . . . . .  D ADDR   004FH   A      295# 1481 1571 1596 1617 1621 1624 1625 1627 1708 1711 3780 3794 3874
                                           3877 3920 4015 4054 4057 4135 4139 4140 4141 4144 4393 4431 4432 4434 4511
                                           4531 4620 4624 4667 4670 5030 5035 5217 5221 6545 6703 6706
ABRET. . . . . . .  C ADDR   28ADH   R   SEG=MAIN   6479 6481#
ABTOF. . . . . . .  C ADDR   03F3H   A      8880#
AC . . . . . . . .  B ADDR   00D0H.6 A      201#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 729 745 794 802 809 817 818 835 1156 1166 1174 1249 1859 1868 1877
                                           1886 1907 2354 2392 2397 2401 2406 2409 2412 2415 2418 2615 2676 2720 2731
                                           2822 2831 2839 2848 2995 3052 3077 3082 3086 3089 3092 3099 3102 3105 3440
                                           3521 3561 3580 3598 3617 3664 4569 4575 4612 4701 5414 5465 5922 5962 6071
                                           7122 7290 7366 7369 7625 8277 8360 8377 8409 8447 8475 8737 8739 8757 8800
                                           8846 8905
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0CM0 . . . . . .  B ADDR   00E8H.2 A      224#
AD0CM1 . . . . . .  B ADDR   00E8H.3 A      223#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      219#
AD0INT . . . . . .  B ADDR   00E8H.5 A      221#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      226#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      220#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      225#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 219 220 221 222 223 224 225 226
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   3071H   R   SEG=MAIN   941 972 974 976 978 980 982 984 986 988 1042 1044 1046 1048 1050
                                           1052 1054 1056 1058 1061 1063 1065 1067 1069 1071 1073 1075 1077 1079 1097
                                           1099 1101 7866#
ADEC . . . . . . .  D ADDR   0053H   A      296# 1570 1582 1586 1601 1626 1629 1630 1710 1714 3793 3797 3871 3875
                                           3917 3921 4012 4016 4056 4060 4143 4156 4403 4418 4420 4422 4433 4436 4521
                                           4532 4625 4671 5034 5038 5220 5223 6353 6372 6390 6451 6468 6705 6708 7046
                                           7076
ADRBLOK. . . . . .  C ADDR   2D25H   R   SEG=MAIN   3508 3526 3890 4033 4925 4954 5080 5138 5243 5295 5824 5909 5923
                                           7088#
AFTERK . . . . . .  C ADDR   06C2H   R   SEG=MAIN   1183 1258#
AFTER_2. . . . . .  C ADDR   0278H   R   SEG=MAIN   690# 1977
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   667# 670
AGE9 . . . . . . .  C ADDR   08C2H   R   SEG=MAIN   1521# 1524
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   676# 678
ALLSUM . . . . . .  C ADDR   0369H   R   SEG=MAIN   855# 889 904 920
ALMUL. . . . . . .  C ADDR   2FB8H   R   SEG=MAIN   7712#
ALTOF. . . . . . .  C ADDR   0402H   A      1150 1243 1272 1280 1298 1314 1325 1342 1354 1442 2071 2180 2257 2295
                                           3924 4021 4535 4628 4674 4766 4844 4852 4870 4993 5005 5020 5123 5184 5200
                                           5282 5337 5350 5670 8888 8896#
ALTOF1 . . . . . .  C ADDR   041EH   A      8905 8920# 8944
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0628H   R   SEG=MAIN   1148 1164#
ANLP1. . . . . . .  C ADDR   0AD5H   R   SEG=MAIN   1825 1831#
AN_T7. . . . . . .  C ADDR   12F3H   R   SEG=MAIN   3106# 3177 3179 3187 3197
AUTOKA . . . . . .  C ADDR   0D43H   R   SEG=MAIN   1181 2226#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   142

AVPGO. . . . . . .  C ADDR   07F3H   R   SEG=MAIN   1401 1403#
AVTDEC1. . . . . .  C ADDR   0684H   R   SEG=MAIN   1215 1224#
AWTOF. . . . . . .  C ADDR   03FCH   A      8889#
B. . . . . . . . .  D ADDR   00F0H   A      122# 6203 6565 7715 7718 7720 7724 7728 7732 7736 7741 7745 7752 7756
                                           7760 7766 7770 7774 7780 8473 8474
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   250 467#
BFORM. . . . . . .  C ADDR   2C62H   R   SEG=MAIN   6897 6902 6914# 6940
BIFL_KT. . . . . .  B ADDR   0021H.5 A      332# 4762 4818 4917
BIN30. . . . . . .  C ADDR   2DD4H   R   SEG=MAIN   7279# 7303
BIN31. . . . . . .  C ADDR   2DD8H   R   SEG=MAIN   7283# 7287
BIN32. . . . . . .  C ADDR   2DE8H   R   SEG=MAIN   7295# 7300
BIN41. . . . . . .  C ADDR   2DF9H   R   SEG=MAIN   7311# 7321
BINDEC . . . . . .  C ADDR   2DC8H   R   SEG=MAIN   1572 1628 1712 3795 4058 4145 4435 5036 5222 6707 7258#
BITAKT . . . . . .  B ADDR   0023H.2 A      351# 1795 1796 1799
BITAVP . . . . . .  B ADDR   0020H.5 A      322# 1367 1635 1785 3175 3176 3178 5697 5699
BITBON . . . . . .  B ADDR   0021H.2 A      329# 1822 2017 2201 2226 2427 2428 2436 5799 5813 7123
BITEIZM. . . . . .  B ADDR   0022H.5 A      342# 1266 1733 1740 1803 2478 2522 3146 3162 4304 6125
BITIZM . . . . . .  B ADDR   0020H.4 A      321# 616 692 763 1640 2398 2480 2494 2573 2608 2639 3083 3149 3271 3292
                                           3365 3396 3421 3523 3634 3894 3942 3970 4127 4253 4305 4354 4467 4544 4656
BITKLB . . . . . .  B ADDR   0022H.2 A      339# 1335 1820 2403 3148 3166 3174 3181 3395 4542 4832
BITMAS . . . . . .  B ADDR   0020H.1 A      318# 1107 1109 6880
BITMEM . . . . . .  B ADDR   0021H.3 A      330# 1700 2816 3399 3417 3429 3522 3633 3895 3941 4126
BITMENU. . . . . .  B ADDR   0022H.1 A      338# 1699 2638 2747 3150 3420 3950 3969 4258 4306 4353 4466 4541
BITMIG . . . . . .  B ADDR   0023H.1 A      350# 2713 2905 3006 3333 3692 3831 3844 4372 4500 4604 4705 6628 6654
                                           6677 6689 6751 6758 6763 6769
BITNUL . . . . . .  B ADDR   0021H.7 A      334# 1415 1661 1767 2465 3195 3199 3200 3207 5522 5705 5723
BITOLL . . . . . .  B ADDR   0022H.7 A      344# 705 1488 1647 1698 1937 3151
BITPAR . . . . . .  B ADDR   0022H.6 A      343# 4833
BITPRD . . . . . .  B ADDR   0021H.1 A      328# 2016
BITPRER. . . . . .  B ADDR   0023H.4 A      353#
BITRS. . . . . . .  B ADDR   0020H.3 A      320#
BITT2. . . . . . .  B ADDR   0022H.0 A      337# 1697 2574 2609 2612 3214 3366
BITV19 . . . . . .  B ADDR   0022H.3 A      340# 548 553 2783 2788 2794 4243 4247 4333 4347 4472 4476 4481
BITVI11. . . . . .  B ADDR   0020H.6 A      323# 1365 1380 1424 1486 1643 1936 2421 2423 2479 2493 2637 3145 3263
                                           3270 3419 4655 5644 5648
BITVICH. . . . . .  B ADDR   0022H.4 A      341# 1423 1696 2422 2481 2491 2636 2644 3232 3262 3291 3418 4654
BITZNAK. . . . . .  B ADDR   0020H.0 A      317# 730 778
BITZNB . . . . . .  B ADDR   0023H.3 A      352# 4675 6477 6480
BITZUS . . . . . .  B ADDR   0020H.7 A      324# 1416 1662 2129 2132 2534
BLOIN. . . . . . .  C ADDR   17ACH   R   SEG=MAIN   3800# 3805
BLOKVV . . . . . .  C ADDR   177EH   R   SEG=MAIN   3770#
BLOKVVC. . . . . .  C ADDR   1788H   R   SEG=MAIN   3773 3776#
BL_LI. . . . . . .  C ADDR   1749H   R   SEG=MAIN   3720 3728#
BONPART. . . . . .  C ADDR   0D13H   R   SEG=MAIN   2200#
BOUT7. . . . . . .  C ADDR   14CDH   R   SEG=MAIN   3375# 3377 3395
BRET . . . . . . .  C ADDR   26EEH   R   SEG=MAIN   6146 6151 6155#
BUFDEC . . . . . .  C ADDR   0A19H   R   SEG=MAIN   1717# 1722
BUFIND . . . . . .  D ADDR   0040H   A      294# 666 670 675 678 683 1520 1524 1587 1608 1629 1630 1631 1632 1676
                                           1681 1715 1723 1725 1730 1765 1783 1789 1797 1800 1805 1821 1823 2373 2433
                                           2437 2688 2706 2722 2724 2727 2786 2787 2792 2793 2900 2947 2966 3070 3154
                                           3216 3272 3273 3317 3321 3346 3367 3381 3388 3400 3401 3501 3687 3714 3742
                                           3771 3798 3812 3813 3817 3818 3825 3826 3830 3846 3985 3992 4061 4069 4071
                                           4088 4112 4146 4155 4157 4220 4242 4248 4364 4402 4436 4437 4438 4439 4441
                                           4475 4480 4492 4520 4543 4596 4642 5039 5047 5051 5224 5232 5236 5384 5800
                                           5818 5992 6201 6214 6220 6227 6352 6371 6389 6450 6467 6478 6631 6657 6709
                                           6755 6775 7045 7075 7124
BUFL_DEC . . . . .  C ADDR   2284H   R   SEG=MAIN   5358#
BUFMEA . . . . . .  C ADDR   20A3H   R   SEG=MAIN   5041# 5046
BUFMIN . . . . . .  C ADDR   21B2H   R   SEG=MAIN   5226# 5231
BUFON. . . . . . .  C ADDR   0EABH   R   SEG=MAIN   2427 2436#
BUFR . . . . . . .  C ADDR   0967H   R   SEG=MAIN   1610# 1615
BUFR2. . . . . . .  C ADDR   0949H   R   SEG=MAIN   1589# 1594
BUFR3. . . . . . .  C ADDR   0942H   R   SEG=MAIN   1580 1585#
BUFR30 . . . . . .  C ADDR   0945H   R   SEG=MAIN   1583 1587#
BUF_IN . . . . . .  D ADDR   00DBH   A      363# 693 5447 5470
BUSY . . . . . . .  B ADDR   00C0H.7 A      180#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   143

CCF0 . . . . . . .  B ADDR   00D8H.0 A      216#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      215#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      214#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      213#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      212#
CDONE. . . . . . .  C ADDR   01F7H   A      8470# 8474
CELLBIT. . . . . .  D ADDR   0020H   A      316# 317 318 319 320 321 322 323 324
CELLBIT1 . . . . .  D ADDR   0021H   A      326# 328 329 330 332 334 358 359
CELLBIT2 . . . . .  D ADDR   0022H   A      336# 337 338 339 340 341 342 343 344
CELLBIT3 . . . . .  D ADDR   0023H   A      348# 349 350 351 352 353 360 361 362
CEXP . . . . . . .  C ADDR   01E2H   A      8447 8456#
CF . . . . . . . .  B ADDR   00D8H.7 A      210#
CH0. . . . . . . .  C ADDR   2791H   R   SEG=MAIN   1465 3208 4631 5724 6285#
CH1. . . . . . . .  C ADDR   27B1H   R   SEG=MAIN   6113 6296#
CH10 . . . . . . .  C ADDR   2795H   R   SEG=MAIN   903 1120 4050 5839 6286#
CH100. . . . . . .  C ADDR   27A9H   R   SEG=MAIN   854 6291#
CH10000. . . . . .  C ADDR   27A5H   R   SEG=MAIN   6290#
CH150H . . . . . .  C ADDR   27F9H   R   SEG=MAIN   6315#
CH2. . . . . . . .  C ADDR   27ADH   R   SEG=MAIN   1115 6292#
CH20 . . . . . . .  C ADDR   2974H   R   SEG=MAIN   888 1125 6596#
CH2THO . . . . . .  C ADDR   27D9H   R   SEG=MAIN   2264 2302 6307#
CH320H . . . . . .  C ADDR   27F5H   R   SEG=MAIN   6314# 7096
CH4. . . . . . . .  C ADDR   279DH   R   SEG=MAIN   1129 6288#
CH43 . . . . . . .  C ADDR   19B7H   R   SEG=MAIN   4063# 4068
CH43_42. . . . . .  C ADDR   1A5EH   R   SEG=MAIN   4159# 4164
CH5. . . . . . . .  C ADDR   2799H   R   SEG=MAIN   919 6287#
CH57 . . . . . . .  C ADDR   2970H   R   SEG=MAIN   6595#
CH954. . . . . . .  C ADDR   27A1H   R   SEG=MAIN   6289#
CHAIBL . . . . . .  C ADDR   15E2H   R   SEG=MAIN   3503 3505#
CHAIBL9. . . . . .  C ADDR   2584H   R   SEG=MAIN   5793 5907#
CHAIPR . . . . . .  C ADDR   190CH   R   SEG=MAIN   3987 3989#
CHANMA . . . . . .  C ADDR   1086H   R   SEG=MAIN   2720 2729#
CHANZ. . . . . . .  C ADDR   106DH   R   SEG=MAIN   2676 2718#
CHAVT. . . . . . .  D ADDR   0081H   A      380# 595 1172 1216 1224 2219 2321 4254
CHBEFORE . . . . .  D ADDR   009BH   A      390# 618 851 865 883 898 914
CHBLOK . . . . . .  D ADDR   00D6H   A      417# 4952 5000 5016 5136 5190 5293 5342
CHBUF. . . . . . .  D ADDR   00CFH   A      414# 629 1991 2097 2138 2143 2202 2210 3939 5358 5363
CHBUF1 . . . . . .  X ADDR   0E00H   A      447# 2001 2084
CHCMP. . . . . . .  C ADDR   2691H   R   SEG=MAIN   1178 6090#
CHDEC. . . . . . .  C ADDR   26A4H   R   SEG=MAIN   1225 1238 6105#
CHDEL. . . . . . .  D ADDR   0083H   A      381# 2162 2188 2228 2277 2315
CHDELMO. . . . . .  C ADDR   0CFEH   R   SEG=MAIN   2172 2188# 2193
CHIF . . . . . . .  C ADDR   29B9H   R   SEG=MAIN   6635 6638#
CHIF5. . . . . . .  C ADDR   29C1H   R   SEG=MAIN   6641 6643#
CHIFB. . . . . . .  C ADDR   29E4H   R   SEG=MAIN   6661 6664#
CHIFB1 . . . . . .  C ADDR   29EAH   R   SEG=MAIN   6663 6664 6668#
CHIFL5 . . . . . .  C ADDR   29F2H   R   SEG=MAIN   6671 6673#
CHIFOUR. . . . . .  C ADDR   29D3H   R   SEG=MAIN   6648 6650 6654#
CHIND. . . . . . .  D ADDR   00ACH   A      396# 1383 1844
CHIND2 . . . . . .  D ADDR   0033H   A      310# 765 767 775
CHINKOR. . . . . .  D ADDR   0098H   A      379# 590 833 1164 1177 1218 1232 1237 2195
CHK. . . . . . . .  C ADDR   27F1H   R   SEG=MAIN   1336 6313#
CHKL . . . . . . .  D ADDR   003DH   A      300# 744 755 757 758 760 2552 2579 2627 2735 3120 3406 4118 4547
CHMAS. . . . . . .  D ADDR   006EH   A      297# 1104 1110 1133 6879
CHMASN . . . . . .  D ADDR   003FH   A      301# 840 849 884 899 915 930 1108 1110 1111
CHMINUS. . . . . .  C ADDR   2D0AH   R   SEG=MAIN   3518 3558 3577 3595 3614 5919 5959 7060# 7119
CHTADC . . . . . .  C ADDR   263BH   R   SEG=MAIN   6030#
CHTHO. . . . . . .  C ADDR   27D1H   R   SEG=MAIN   1305 1343 4775 4860 4878 6305#
CHTHOU . . . . . .  C ADDR   2878H   R   SEG=MAIN   6438#
CHZAP. . . . . . .  C ADDR   278DH   R   SEG=MAIN   1980 6284#
CH_1 . . . . . . .  C ADDR   27B9H   R   SEG=MAIN   621 1535 1558 1998 2140 2214 4022 5360 6298#
CH_10. . . . . . .  C ADDR   27E9H   R   SEG=MAIN   1541 1564 2080 2110 4536 5025 5211 6311#
CH_10TH. . . . . .  C ADDR   27E5H   R   SEG=MAIN   1396 6310#
CH_2 . . . . . . .  C ADDR   27BDH   R   SEG=MAIN   1993 2075 2103 2119 6299#
CH_200 . . . . . .  C ADDR   27E1H   R   SEG=MAIN   6309#
CH_220 . . . . . .  C ADDR   27DDH   R   SEG=MAIN   1358 6308#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   144

CH_22T . . . . . .  C ADDR   28B6H   R   SEG=MAIN   1453 6486#
CH_250 . . . . . .  C ADDR   27EDH   R   SEG=MAIN   1261 6312#
CH_4 . . . . . . .  C ADDR   27C1H   R   SEG=MAIN   2113 4025 6300#
CH_5 . . . . . . .  C ADDR   27C5H   R   SEG=MAIN   6301#
CH_500 . . . . . .  C ADDR   28B2H   R   SEG=MAIN   1448 6485#
CH_7 . . . . . . .  C ADDR   27C9H   R   SEG=MAIN   2206 6302#
CH_953 . . . . . .  C ADDR   27CDH   R   SEG=MAIN   6304#
CH_B . . . . . . .  C ADDR   28AEH   R   SEG=MAIN   1469 6483#
CH_FL. . . . . . .  C ADDR   28BAH   R   SEG=MAIN   1528 6487#
CH_M3. . . . . . .  C ADDR   27FDH   R   SEG=MAIN   6316#
CH_MLN . . . . . .  C ADDR   27B5H   R   SEG=MAIN   6297#
CIKLWR . . . . . .  C ADDR   2C38H   R   SEG=MAIN   6885#
CKCON. . . . . . .  D ADDR   008EH   A      30# 486 512
CL4. . . . . . . .  C ADDR   280FH   R   SEG=MAIN   6333# 6335
CL4N . . . . . . .  C ADDR   2815H   R   SEG=MAIN   6341# 6343
CLE20. . . . . . .  C ADDR   1A4BH   R   SEG=MAIN   4149# 4151
CLE256 . . . . . .  C ADDR   043EH   A      4339 4808 4910 8952#
CLEAR. . . . . . .  C ADDR   2DC2H   R   SEG=MAIN   7236 7240# 7270
CLEAR4 . . . . . .  C ADDR   280CH   R   SEG=MAIN   863 1412 1414 1597 1618 1658 1660 2462 2464 3192 3194 4951 6331#
CLEARN . . . . . .  C ADDR   2814H   R   SEG=MAIN   3872 3918 4013 4394 4512 4621 4668 6339#
CLMASSIX . . . . .  C ADDR   2C28H   R   SEG=MAIN   581 1410 1656 2199 2325 2460 3190 3364 6873#
CLMASV . . . . . .  C ADDR   07F8H   R   SEG=MAIN   1405 1407#
CLMAX. . . . . . .  C ADDR   2C2DH   R   SEG=MAIN   6875# 6878
CLR11. . . . . . .  C ADDR   2DC3H   R   SEG=MAIN   7242# 7244
CLRDEC . . . . . .  C ADDR   2DBCH   R   SEG=MAIN   7234#
CLRNUM . . . . . .  C ADDR   2DC0H   R   SEG=MAIN   7237# 7349
CLRVICH. . . . . .  C ADDR   143AH   R   SEG=MAIN   3291# 3308
CL_HL. . . . . . .  C ADDR   1695H   R   SEG=MAIN   3627# 3641 3646 3650
CL_HL1 . . . . . .  C ADDR   16A7H   R   SEG=MAIN   3624 3638#
CL_HL2 . . . . . .  C ADDR   16B1H   R   SEG=MAIN   3638 3643#
CL_HL3 . . . . . .  C ADDR   16BBH   R   SEG=MAIN   3643 3648#
CMD_REZ. . . . . .  D ADDR   004EH   A      368# 5469 5605 5652 5734 5746 5794 5899 5901
CMD_TREE . . . . .  C ADDR   2311H   R   SEG=MAIN   701 5468#
CNTR . . . . . . .  N NUMB   0006H   A      8143#
CNT_IN . . . . . .  D ADDR   0025H   A      365# 695 5442 5446 5459 5460
CNT_OUT. . . . . .  D ADDR   0024H   A      364# 694 1943 1969 1970 5416 5423 5491 5498 5588 5625 5632 5829 5870
CO02S. . . . . . .  C ADDR   2775H   R   SEG=MAIN   6268# 6272
CO05S. . . . . . .  C ADDR   2782H   R   SEG=MAIN   6277# 6281
CO1S . . . . . . .  C ADDR   276CH   R   SEG=MAIN   6261# 6261
CO2S . . . . . . .  C ADDR   2768H   R   SEG=MAIN   6259# 6263
COMPA1 . . . . . .  C ADDR   08DEH   R   SEG=MAIN   1535# 1544
COMPA2 . . . . . .  C ADDR   0914H   R   SEG=MAIN   1558# 1567
COND . . . . . . .  C ADDR   2C9CH   R   SEG=MAIN   6969#
COPY1. . . . . . .  C ADDR   049FH   A      9029# 9034
COPYPP . . . . . .  C ADDR   0499H   A      4326 4787 4888 9026#
COPY_HL. . . . . .  D ADDR   00D7H   A      418# 4038 4170 4944 4959 4973 5129 5144 5159 5287 5300 5314 5833 5864
COUNT. . . . . . .  C ADDR   274AH   R   SEG=MAIN   6234# 6234
CPRL2. . . . . . .  B ADDR   00C8H.0 A      197#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      211#
CT . . . . . . . .  C ADDR   2751H   R   SEG=MAIN   6240# 6240
CT2. . . . . . . .  B ADDR   00C8H.1 A      196#
CY . . . . . . . .  B ADDR   00D0H.7 A      200#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 491
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1988
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1985
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 492
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   2CA1H   R   SEG=MAIN   6973# 6975
DCOB . . . . . . .  C ADDR   2CA8H   R   SEG=MAIN   6977# 6995
DCOC . . . . . . .  C ADDR   2CB3H   R   SEG=MAIN   6987# 6992
DCOD . . . . . . .  C ADDR   2CC0H   R   SEG=MAIN   6994 6997#
DDOUTF . . . . . .  C ADDR   16FEH   R   SEG=MAIN   3492 3539 3673 3681# 3766
DDOUTFR. . . . . .  C ADDR   15C6H   R   SEG=MAIN   3492# 3498
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   145

DEC30. . . . . . .  C ADDR   2E15H   R   SEG=MAIN   7359# 7382
DEC31. . . . . . .  C ADDR   2E1AH   R   SEG=MAIN   7364# 7371
DEC32. . . . . . .  C ADDR   2E2AH   R   SEG=MAIN   7375# 7379
DECBIN . . . . . .  C ADDR   2E08H   R   SEG=MAIN   3876 3922 4017 4533 4626 4672 7338#
DECSIZE. . . . . .  N NUMB   000AH   A      7220# 7235 7269 7294 7307 7310 7363
DECT2. . . . . . .  C ADDR   2E33H   R   SEG=MAIN   7355 7385#
DEDPTR . . . . . .  C ADDR   3088H   R   SEG=MAIN   7870 7874 7878 7884#
DENORM . . . . . .  C ADDR   0133H   A      8302# 8358
DGOTO7 . . . . . .  C ADDR   1890H   R   SEG=MAIN   3925# 3933
DIAP . . . . . . .  D ADDR   00AEH   A      398# 609 1400 1637 1729 1826 1950 2027 2454 2501 3183 4440 4815 5505 5600
                                           6126 6147 6403 6417 6562 6622
DIINC. . . . . . .  C ADDR   0ED1H   R   SEG=MAIN   2457 2460#
DIKDN. . . . . . .  C ADDR   2948H   R   SEG=MAIN   6564 6584#
DIKDW. . . . . . .  C ADDR   2860H   R   SEG=MAIN   6407 6426#
DIKM . . . . . . .  C ADDR   2876H   R   SEG=MAIN   6437#
DIPAR. . . . . . .  C ADDR   2874H   R   SEG=MAIN   6436#
DIV1 . . . . . . .  C ADDR   02DDH   A      8639# 8698
DIV2 . . . . . . .  C ADDR   0320H   A      8657 8661 8665 8669 8684#
DIV3 . . . . . . .  C ADDR   030DH   A      8658 8662 8666 8670#
DIV9 . . . . . . .  C ADDR   0336H   A      8628 8630 8704#
DIVIDE . . . . . .  C ADDR   2EF3H   R   SEG=MAIN   6901 7571#
DONE . . . . . . .  C ADDR   2E62H   R   SEG=MAIN   7401 7412#
DONE1. . . . . . .  C ADDR   2E60H   R   SEG=MAIN   7404 7407 7410#
DOSH . . . . . . .  C ADDR   2F7CH   R   SEG=MAIN   7646 7662#
DOSUB. . . . . . .  C ADDR   2F6AH   R   SEG=MAIN   7630 7634 7638 7642 7643 7647#
DPH. . . . . . . .  D ADDR   0083H   A      19# 587 633 641 648 655 2365 2984 3063 3627 4043 4045 4175 4180 4690 4928
                                           4937 4945 4957 4961 4969 4971 4974 4985 5072 5074 5083 5092 5130 5141 5146
                                           5155 5157 5160 5171 5246 5254 5288 5298 5302 5310 5312 5315 5326 5836 5869
                                           5952 6833 6841 7104 7112 7144 7418 7454 7489 7492 7504 7527 7889 7891 8965
                                           8985 9026
DPL. . . . . . . .  D ADDR   0082H   A      18# 636 644 651 658 2364 2985 3062 3630 4039 4041 4172 4183 4691 4926
                                           4933 4948 4955 4964 4966 4968 4977 4981 5069 5071 5081 5088 5133 5139 5149
                                           5152 5154 5163 5167 5244 5250 5291 5296 5305 5307 5309 5318 5322 5834 5866
                                           5955 6834 6840 7101 7115 7147 7434 7470 7491 7505 7508 7542 7886 7888 8966
                                           8986 9027
DVIG0. . . . . . .  C ADDR   0B11H   R   SEG=MAIN   1880# 1882
DVIG1. . . . . . .  C ADDR   0B06H   R   SEG=MAIN   1871# 1873
DVIG2. . . . . . .  C ADDR   0AFBH   R   SEG=MAIN   1862# 1864
DVIG3. . . . . . .  C ADDR   0AEFH   R   SEG=MAIN   1853# 1855
DVIG4. . . . . . .  C ADDR   0B1DH   R   SEG=MAIN   1891# 1893
DVIG6. . . . . . .  C ADDR   0B3FH   R   SEG=MAIN   1919# 1921
DVM. . . . . . . .  C ADDR   0B3DH   R   SEG=MAIN   1907 1918#
EA . . . . . . . .  B ADDR   00A8H.7 A      163# 1492 1517 5504 5718 5828 5872 5876 5903 5908 5927
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 489
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 557 749 2351 3049 5380 5382 5395
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1EBAH   R   SEG=MAIN   3172 4761#
ENDSDV . . . . . .  C ADDR   0B43H   R   SEG=MAIN   1913 1922#
ENDSUM . . . . . .  C ADDR   05B6H   R   SEG=MAIN   942 989 1080 1103#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      181#
EQU0 . . . . . . .  C ADDR   090FH   R   SEG=MAIN   1538 1554#
EQU00. . . . . . .  C ADDR   092DH   R   SEG=MAIN   1556 1561 1569#
EQU1L. . . . . . .  C ADDR   11CAH   R   SEG=MAIN   2911 2915#
EQU2L. . . . . . .  C ADDR   1764H   R   SEG=MAIN   3752 3757#
ERRA0. . . . . . .  C ADDR   1DD9H   R   SEG=MAIN   4634 4646#
ERRA01 . . . . . .  C ADDR   080EH   R   SEG=MAIN   1419# 1468
ERROR. . . . . . .  C ADDR   2A4EH   R   SEG=MAIN   1426 1833 4266 4463 4649 6000 6012 6773#
ES0. . . . . . . .  B ADDR   00A8H.4 A      165#
ET0. . . . . . . .  B ADDR   00A8H.1 A      168#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      164# 2061 3024 4721
EX0. . . . . . . .  B ADDR   00A8H.0 A      169#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   146

EX1. . . . . . . .  B ADDR   00A8H.2 A      167#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      194#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      191#
EXP1 . . . . . . .  N NUMB   0000H   A      8145#
EXP2 . . . . . . .  N NUMB   0001H   A      8147# 8324 8345
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   584# 588
F0 . . . . . . . .  B ADDR   00D0H.5 A      202#
F1 . . . . . . . .  B ADDR   00D0H.1 A      206#
FINDEXT. . . . . .  C ADDR   2859H   R   SEG=MAIN   4789 6416#
FINDKOEF . . . . .  C ADDR   284AH   R   SEG=MAIN   1339 6402#
FINDMEM. . . . . .  C ADDR   1128H   R   SEG=MAIN   2745 2816#
FINDR. . . . . . .  C ADDR   29A1H   R   SEG=MAIN   1623 4430 6622#
FINIS. . . . . . .  C ADDR   2FA7H   R   SEG=MAIN   7590 7691#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      2096 4997 5009 8350# 8439
FLCMP. . . . . . .  C ADDR   01D6H   A      1263 1360 1398 1450 1455 1467 1537 1560 1995 4633 5186 5202 5338 5351
                                           8444#
FLDIV. . . . . . .  C ADDR   02B7H   A      1286 1307 1345 1476 1530 1543 2112 2266 2304 4773 4858 4876 5024 5027
                                           5213 8614#
FLMUL. . . . . . .  C ADDR   0203H   A      1159 1254 1304 1350 1471 1566 2083 2105 2115 2121 4027 4538 4777 4862
                                           4880 8484#
FLOUT. . . . . . .  C ADDR   01E1H   A      8451 8454#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8953 8959 9009 9014
FLSUB. . . . . . .  C ADDR   01D1H   A      1246 2000 2142 2209 2262 2300 4024 5362 8437#
FND. . . . . . . .  C ADDR   01F8H   A      8460 8463 8466 8469 8472#
FO1M . . . . . . .  C ADDR   2C5FH   R   SEG=MAIN   6907 6911#
FO2M . . . . . . .  C ADDR   2C68H   R   SEG=MAIN   6914 6916#
FORM4. . . . . . .  C ADDR   2C69H   R   SEG=MAIN   6909 6915 6919#
FT1IZM . . . . . .  C ADDR   0FC4H   R   SEG=MAIN   2622#
FTOL . . . . . . .  C ADDR   0343H   A      1201 1351 1479 4028 4778 4881 5028 5214 5559 6702 8720#
FTOL1. . . . . . .  C ADDR   037CH   A      8733 8737 8761#
FTOL2. . . . . . .  C ADDR   039EH   A      8757 8794#
FTOL22 . . . . . .  C ADDR   03C4H   A      8797 8831#
FTOL23 . . . . . .  C ADDR   03A2H   A      8798# 8830
FTOL24 . . . . . .  C ADDR   03B5H   A      8800 8816#
FTOL25 . . . . . .  C ADDR   03C2H   A      8815 8830#
FTOL26 . . . . . .  C ADDR   03E4H   A      8846 8862#
FTOL3. . . . . . .  C ADDR   038AH   A      8760 8774#
FTOL33 . . . . . .  C ADDR   038EH   A      8778# 8792
FTOL4. . . . . . .  C ADDR   0371H   A      8739 8754#
FTOL9. . . . . . .  C ADDR   0381H   A      8767# 8777 8793 8861 8876
FULKALIB . . . . .  C ADDR   1F29H   R   SEG=MAIN   4816 4831# 4919
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   496#
GO23NO . . . . . .  C ADDR   16C2H   R   SEG=MAIN   3540 3652#
GO31L. . . . . . .  C ADDR   11D0H   R   SEG=MAIN   2888 2920#
GO41L. . . . . . .  C ADDR   11D5H   R   SEG=MAIN   2920 2922#
GOA2 . . . . . . .  C ADDR   07AEH   R   SEG=MAIN   1364 1366 1369# 1391
GOA3A2 . . . . . .  C ADDR   07B8H   R   SEG=MAIN   1374#
GOCIKLE. . . . . .  C ADDR   0C97H   R   SEG=MAIN   2018 2100 2129# 2136 2145
GOFULL . . . . . .  C ADDR   16F5H   R   SEG=MAIN   3657 3677#
GOGO7. . . . . . .  C ADDR   1DF7H   R   SEG=MAIN   4607 4612 4659#
GOKAA2 . . . . . .  C ADDR   07D6H   R   SEG=MAIN   1389#
GOKLB. . . . . . .  C ADDR   0E93H   R   SEG=MAIN   2403 2425#
GOOFF1 . . . . . .  C ADDR   1629H   R   SEG=MAIN   3553# 3561
GOOFF2 . . . . . .  C ADDR   1644H   R   SEG=MAIN   3572# 3580
GOOFF3 . . . . . .  C ADDR   165FH   R   SEG=MAIN   3590# 3598
GOOFF4 . . . . . .  C ADDR   167AH   R   SEG=MAIN   3609# 3617
GOONIN . . . . . .  C ADDR   07C8H   R   SEG=MAIN   1382# 1417 1429 1648 1663
GOONIN1. . . . . .  C ADDR   09B8H   R   SEG=MAIN   1640 1648#
GOONIN2. . . . . .  C ADDR   09B6H   R   SEG=MAIN   1643 1647#
GOONIND. . . . . .  C ADDR   09F0H   R   SEG=MAIN   1385 1688#
GOONOF9. . . . . .  C ADDR   2590H   R   SEG=MAIN   5914# 5922
GOONOFF. . . . . .  C ADDR   15EEH   R   SEG=MAIN   3513# 3521
GOONT. . . . . . .  C ADDR   0C20H   R   SEG=MAIN   2021 2062#
GOPAROL. . . . . .  C ADDR   1C5BH   R   SEG=MAIN   4263 4415 4424#
GOPAROM. . . . . .  C ADDR   1B31H   R   SEG=MAIN   4261# 4264 4271
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   147

GOPART . . . . . .  C ADDR   0347H   R   SEG=MAIN   835 838#
GOSK19 . . . . . .  C ADDR   10F9H   R   SEG=MAIN   2783 2790#
GOTO7. . . . . . .  C ADDR   12F3H   R   SEG=MAIN   3119# 3205 3212 3274 3295 3322 3334 3375 3379 3426 3469 3484 3537
                                           3702 3705 3756 3759 3815 3827 3833 3859 3861 3902 3925 3943 3998 4130 4193
                                           4201 4209 4307 4376 4380 4460 4470 4504 4555 4557 4571 4583 4644 4828 4839
GOTOKD . . . . . .  C ADDR   0649H   R   SEG=MAIN   1162 1185#
GOTOSTROB. . . . .  C ADDR   0C02H   R   SEG=MAIN   2032 2035 2038 2041 2044#
GOUT6. . . . . . .  C ADDR   0E48H   R   SEG=MAIN   2393# 2421
GOUT6__. . . . . .  C ADDR   0E43H   R   SEG=MAIN   2380 2389#
GOVVLIST . . . . .  C ADDR   1930H   R   SEG=MAIN   3981 4003#
GOZNAK . . . . . .  C ADDR   02F9H   R   SEG=MAIN   736 784#
HNOR11 . . . . . .  C ADDR   1445H   R   SEG=MAIN   3259 3299#
HNOR12 . . . . . .  C ADDR   13EDH   R   SEG=MAIN   3249 3253#
HNOT1. . . . . . .  C ADDR   1491H   R   SEG=MAIN   3226 3343#
HNOT2. . . . . . .  C ADDR   13BBH   R   SEG=MAIN   3224#
HR12 . . . . . . .  C ADDR   13E3H   R   SEG=MAIN   3243 3249#
HVI1113. . . . . .  C ADDR   13DDH   R   SEG=MAIN   3246# 3252 3257
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 564 696 1975 5375 5490 5497 5624 5631
                                           5980 8952 8960 9008 9018
IE0. . . . . . . .  B ADDR   0088H.1 A      149#
IE1. . . . . . . .  B ADDR   0088H.3 A      147#
INCT . . . . . . .  C ADDR   13B7H   R   SEG=MAIN   3219 3221#
IND. . . . . . . .  C ADDR   22A4H   R   SEG=MAIN   671 679 738 768 1427 1548 1552 1646 1834 2434 2438 2449 3155 3385
                                           3402 3901 4113 4165 4267 4464 4650 4836 5379# 5801 5819 5996 6001 6013
                                           7125
INDOLL . . . . . .  C ADDR   09A1H   R   SEG=MAIN   1635 1636 1640#
INIACP . . . . . .  C ADDR   28BEH   R   SEG=MAIN   687 3362 6492#
INNOT1_2 . . . . .  C ADDR   17E7H   R   SEG=MAIN   3824 3829#
INNOT3 . . . . . .  C ADDR   17D8H   R   SEG=MAIN   3816 3821#
INNOT6 . . . . . .  C ADDR   17CCH   R   SEG=MAIN   3811 3816#
INTER2 . . . . . .  C ADDR   2298H   R   SEG=MAIN   263 5368#
INTERVA. . . . . .  D ADDR   00CDH   A      413# 662 2062 3779 3878 5537 5884
INTMUL . . . . . .  C ADDR   0C43H   R   SEG=MAIN   2077 2083#
INTMUL1. . . . . .  C ADDR   0C46H   R   SEG=MAIN   2084#
INTMUL2. . . . . .  C ADDR   0C5BH   R   SEG=MAIN   2097# 2106 2116 2122 2126
INTN . . . . . . .  C ADDR   1879H   R   SEG=MAIN   3916#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IS_2 . . . . . . .  B ADDR   0021H.4 A      358# 1946 1972 5489 5496 5623 5630 5635
IS_CMD . . . . . .  B ADDR   0023H.5 A      361# 700 5448 5719 5736 5748 5904
IS_IZM . . . . . .  B ADDR   0023H.7 A      360# 2380 2381 5737 5749
IS_MEM . . . . . .  B ADDR   0021H.6 A      359# 5963
IS_RS. . . . . . .  B ADDR   0023H.6 A      362# 1485 1935 5481 5485 5492 5499 5626 5633
IT0. . . . . . . .  B ADDR   0088H.0 A      150#
IT1. . . . . . . .  B ADDR   0088H.2 A      148#
IZCHI. . . . . . .  C ADDR   1476H   R   SEG=MAIN   3324#
IZMAN. . . . . . .  C ADDR   0F39H   R   SEG=MAIN   2337 2382 2522#
IZMAN1 . . . . . .  C ADDR   0F3FH   R   SEG=MAIN   2524#
IZMFUN . . . . . .  C ADDR   0F4BH   R   SEG=MAIN   2450 2459 2467 2528 2533#
IZMPAT . . . . . .  C ADDR   0F4FH   R   SEG=MAIN   2419 2435 2439 2498 2537#
IZMT2. . . . . . .  C ADDR   0F5EH   R   SEG=MAIN   2553 2558#
IZMT3. . . . . . .  C ADDR   0F69H   R   SEG=MAIN   2558 2564#
JFINIS . . . . . .  C ADDR   2F0EH   R   SEG=MAIN   7582 7590#
KD . . . . . . . .  C ADDR   27D5H   R   SEG=MAIN   6306#
KEYB1. . . . . . .  C ADDR   0E12H   R   SEG=MAIN   283 2344# 5738 5750
KEYB2. . . . . . .  C ADDR   1283H   R   SEG=MAIN   285 3041#
KFULL. . . . . . .  C ADDR   16CCH   R   SEG=MAIN   3485 3656#
KFULLR . . . . . .  C ADDR   15B5H   R   SEG=MAIN   3480 3485#
KGO23. . . . . . .  C ADDR   1616H   R   SEG=MAIN   3479 3543#
KKOUT6 . . . . . .  C ADDR   1243H   R   SEG=MAIN   2339 3003#
KLBOFF . . . . . .  C ADDR   1343H   R   SEG=MAIN   3148 3166#
KLEV1. . . . . . .  C ADDR   158FH   R   SEG=MAIN   3437 3470#
KLEV2. . . . . . .  C ADDR   1594H   R   SEG=MAIN   3470 3472#
KLEV21 . . . . . .  C ADDR   15B8H   R   SEG=MAIN   3477 3486#
KLEV22 . . . . . .  C ADDR   159EH   R   SEG=MAIN   3465 3474 3477#
KLEV23 . . . . . .  C ADDR   15C9H   R   SEG=MAIN   3486 3494#
KLEV3. . . . . . .  C ADDR   1599H   R   SEG=MAIN   3472 3474#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   148

KLMAS. . . . . . .  C ADDR   03F4H   R   SEG=MAIN   867 929#
KNAVP. . . . . . .  C ADDR   1352H   R   SEG=MAIN   3099 3174#
KNIZM. . . . . . .  B ADDR   0023H.0 A      349# 1364 1636 1791 1825 2500 2523 2525 2531 5528 5733 5745
KNIZMON. . . . . .  C ADDR   0F46H   R   SEG=MAIN   2523 2531#
KNKMP. . . . . . .  C ADDR   126AH   R   SEG=MAIN   3029# 3089
KNLEFT . . . . . .  C ADDR   1360H   R   SEG=MAIN   3033 3181#
KNMEM. . . . . . .  C ADDR   14EEH   R   SEG=MAIN   3039 3395#
KNMENU . . . . . .  C ADDR   1315H   R   SEG=MAIN   3105 3139#
KNNUL. . . . . . .  C ADDR   1381H   R   SEG=MAIN   3032 3199#
KNOPT. . . . . . .  C ADDR   0F71H   R   SEG=MAIN   2336 2572#
KNRAZR . . . . . .  C ADDR   0F86H   R   SEG=MAIN   2335 2585#
KNRIGHT. . . . . .  C ADDR   0EC7H   R   SEG=MAIN   2409 2454#
KNVICH . . . . . .  C ADDR   0EE8H   R   SEG=MAIN   2418 2472#
KOEFKD . . . . . .  D ADDR   00A0H   A      393# 627 4780 4790 4882 4890
KOEFKM . . . . . .  D ADDR   0094H   A      387# 625 1157 1252 2308
KOEFKP . . . . . .  D ADDR   0090H   A      386# 623 1154 1247 2270
KOMUL. . . . . . .  C ADDR   0772H   R   SEG=MAIN   1338 1342#
KOMULPZ. . . . . .  C ADDR   076CH   R   SEG=MAIN   1335 1339#
KONSTA . . . . . .  D ADDR   00BCH   A      406# 1463 4629 5546 5671 6700
KON_B. . . . . . .  C ADDR   1051H   R   SEG=MAIN   2678 2695#
KOR0US . . . . . .  C ADDR   2702H   R   SEG=MAIN   2170 6180#
KOR0_AN. . . . . .  D ADDR   0084H   A      383# 1244 2181 2260 2298
KORDEC1. . . . . .  C ADDR   069AH   R   SEG=MAIN   1230 1237#
KORDEC10 . . . . .  C ADDR   067AH   R   SEG=MAIN   1218#
KORNUL . . . . . .  C ADDR   0CD1H   R   SEG=MAIN   1168 2162#
KVVOD0 . . . . . .  C ADDR   16E8H   R   SEG=MAIN   3446 3664 3672#
LABEL43. . . . . .  C ADDR   1927H   R   SEG=MAIN   3999# 4007
LABEL7 . . . . . .  C ADDR   1A10H   R   SEG=MAIN   3999 4118#
LABELA . . . . . .  C ADDR   02BDH   R   SEG=MAIN   741# 772 2133
LABELB . . . . . .  C ADDR   0AE8H   R   SEG=MAIN   1210 1666 1846# 2150 2154 2156
LABELC . . . . . .  C ADDR   0F86H   R   SEG=MAIN   2586#
LABELE . . . . . .  C ADDR   0F4FH   R   SEG=MAIN   2535 2551# 2591 2594 2598 2602 2610 2642
LABELF . . . . . .  C ADDR   0FB1H   R   SEG=MAIN   2334 2611#
LABELH . . . . . .  C ADDR   13A3H   R   SEG=MAIN   3031 3214#
LABELI . . . . . .  C ADDR   1D53H   R   SEG=MAIN   3229 3284 3336 4566#
LABELI2. . . . . .  C ADDR   142AH   R   SEG=MAIN   3284# 3285
LABELK . . . . . .  C ADDR   1531H   R   SEG=MAIN   3228 3428#
LABELL . . . . . .  C ADDR   1185H   R   SEG=MAIN   2743 2845 2853#
LABELL1. . . . . .  C ADDR   108EH   R   SEG=MAIN   2733# 2809 2927 2979
LABELN . . . . . .  C ADDR   11EFH   R   SEG=MAIN   2810 2936#
LABELP . . . . . .  C ADDR   18FDH   R   SEG=MAIN   3929 3950 3981# 4211
LABELS . . . . . .  C ADDR   18C2H   R   SEG=MAIN   3660 3950#
LABELS1. . . . . .  C ADDR   1BA2H   R   SEG=MAIN   4286 4315#
LABELS13 . . . . .  C ADDR   1CD9H   R   SEG=MAIN   4358 4484#
LABELS3. . . . . .  C ADDR   1D66H   R   SEG=MAIN   4576#
LABELS4. . . . . .  C ADDR   1D41H   R   SEG=MAIN   4357 4559#
LABL2. . . . . . .  C ADDR   11B1H   R   SEG=MAIN   2892# 3489
LABM . . . . . . .  C ADDR   176DH   R   SEG=MAIN   3490 3762#
LABN_1 . . . . . .  C ADDR   11F9H   R   SEG=MAIN   2938 2946#
LABN_2 . . . . . .  C ADDR   11F4H   R   SEG=MAIN   2936 2938#
LADD . . . . . . .  C ADDR   304FH   R   SEG=MAIN   846 880 895 911 1983 7817#
LADDX. . . . . . .  C ADDR   3060H   R   SEG=MAIN   7841#
LBTOF. . . . . . .  C ADDR   042DH   A      8931#
LCMP . . . . . . .  C ADDR   2E4DH   R   SEG=MAIN   6100 6938 7397#
LDC_LONG . . . . .  C ADDR   2E63H   R   SEG=MAIN   622 1337 1981 2265 2303 3209 5725 7417#
LDC_LTEMP. . . . .  C ADDR   2E85H   R   SEG=MAIN   855 1116 1121 1126 1130 1262 1306 1344 1359 1397 1449 1454 1466
                                           1470 1529 1536 1542 1559 1565 1994 1999 2076 2081 2104 2111 2114 2120 2141
                                           2208 4023 4026 4051 4537 4632 4776 4861 4879 5026 5212 5361 5840 6114 7097
                                           7453#
LDX_LONG . . . . .  C ADDR   2EABH   R   SEG=MAIN   7488#
LDX_LTEMP. . . . .  C ADDR   2ED1H   R   SEG=MAIN   7526#
LEFCUR . . . . . .  C ADDR   17F8H   R   SEG=MAIN   3839# 3911 3927
LEFKL. . . . . . .  C ADDR   136AH   R   SEG=MAIN   3181 3187#
LEFMEM11 . . . . .  C ADDR   1545H   R   SEG=MAIN   3438# 3471 3473 3475
LEFT21 . . . . . .  C ADDR   1717H   R   SEG=MAIN   3698 3703#
LEFT_S . . . . . .  C ADDR   1B9FH   R   SEG=MAIN   4314# 4317
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   149

LEFT_SK. . . . . .  C ADDR   1CBAH   R   SEG=MAIN   4314 4472#
LEV220 . . . . . .  C ADDR   15A1H   R   SEG=MAIN   3478# 3487
LEV2GO . . . . . .  C ADDR   121FH   R   SEG=MAIN   2935 2975#
LEVEL. . . . . . .  D ADDR   00B0H   A      400# 2441 2817 2859 3403 3413 3436 3674 6652
LI21 . . . . . . .  C ADDR   1480H   R   SEG=MAIN   3331 3333#
LI42_43. . . . . .  C ADDR   1996H   R   SEG=MAIN   4048# 4185
LIST_43. . . . . .  C ADDR   1A1AH   R   SEG=MAIN   4001 4123#
LLDI2. . . . . . .  C ADDR   0F32H   R   SEG=MAIN   2513 2517#
LLDI23 . . . . . .  C ADDR   0F26H   R   SEG=MAIN   2505 2510#
LLDI3. . . . . . .  C ADDR   0F2DH   R   SEG=MAIN   2512 2514#
LLEV2. . . . . . .  C ADDR   11DAH   R   SEG=MAIN   2890 2925#
LLMUL. . . . . . .  C ADDR   2FB8H   R   SEG=MAIN   7711#
LLSUB. . . . . . .  C ADDR   303DH   R   SEG=MAIN   7793#
LLTOF. . . . . . .  C ADDR   0432H   A      8937#
LMUL . . . . . . .  C ADDR   2FB8H   R   SEG=MAIN   6896 7098 7713#
LOA3_X . . . . . .  C ADDR   2D98H   R   SEG=MAIN   1948 2024 7161#
LOAB12 . . . . . .  C ADDR   290DH   R   SEG=MAIN   3360 6530#
LOAD . . . . . . .  D ADDR   00B7H   A      404# 2575 2616 3217 3356 6200
LOADB. . . . . . .  C ADDR   14A4H   R   SEG=MAIN   3351 3354# 3386 3392
LOADB2 . . . . . .  C ADDR   14D0H   R   SEG=MAIN   3373 3377#
LOADCLE. . . . . .  C ADDR   1562H   R   SEG=MAIN   3451# 3667
LOADKD . . . . . .  C ADDR   292AH   R   SEG=MAIN   6562#
LOADR2 . . . . . .  C ADDR   291CH   R   SEG=MAIN   3923 4018 4534 4627 4673 6545#
LOADT. . . . . . .  C ADDR   271DH   R   SEG=MAIN   2577 2622 3223 6200#
LOADUS . . . . . .  C ADDR   26BCH   R   SEG=MAIN   688 1408 1653 2466 2532 3163 3167 3196 3363 4918 5602 5710 6124#
LOAHL_R2 . . . . .  C ADDR   20B8H   R   SEG=MAIN   4992 5004 5055# 5182 5198 5336 5349
LOBLOK . . . . . .  C ADDR   1722H   R   SEG=MAIN   3655 3710# 3729
LOCLE. . . . . . .  C ADDR   155DH   R   SEG=MAIN   3441 3449#
LOD1 . . . . . . .  C ADDR   272CH   R   SEG=MAIN   6208# 6213
LODT . . . . . . .  C ADDR   273BH   R   SEG=MAIN   6221# 6226
LOIZMK . . . . . .  C ADDR   13F0H   R   SEG=MAIN   3254# 3289
LOKAME1. . . . . .  C ADDR   1AE4H   R   SEG=MAIN   4224#
LOLEVT . . . . . .  C ADDR   271FH   R   SEG=MAIN   2447 6201#
LOLIST . . . . . .  C ADDR   1552H   R   SEG=MAIN   3443#
LOME1. . . . . . .  C ADDR   1E6EH   R   SEG=MAIN   4729# 4733 4736 4739 4742 4746 4749 4752 4755 4759
LOMENU . . . . . .  C ADDR   1E66H   R   SEG=MAIN   2760 2773 4224 4273 4295 4726#
LOOP . . . . . . .  C ADDR   2678H   R   SEG=MAIN   6070# 6071
LOOPS. . . . . . .  C ADDR   2F11H   R   SEG=MAIN   7592# 7625
LOSPUS . . . . . .  C ADDR   26F6H   R   SEG=MAIN   2171 6163#
LOSTAT . . . . . .  C ADDR   1577H   R   SEG=MAIN   3455 3461#
LOTEXT . . . . . .  C ADDR   2737H   R   SEG=MAIN   1547 1551 1642 1645 2487 2653 2661 2669 2785 2791 2825 2834 2842
                                           2851 2863 3153 3246 3315 3398 3444 3452 3458 3463 3468 3483 3678 3711 3723
                                           3778 3899 3967 3991 4154 4190 4198 4206 4219 4241 4246 4292 4427 4474 4479
                                           4640 4729 4835 6218# 6774
LOTP . . . . . . .  C ADDR   2980H   R   SEG=MAIN   6602# 6612 6614
LOTPUS . . . . . .  C ADDR   2978H   R   SEG=MAIN   4303 6158 6599#
LOU. . . . . . . .  C ADDR   0F38H   R   SEG=MAIN   2500 2516 2520#
LOUIZM . . . . . .  C ADDR   0F15H   R   SEG=MAIN   2500# 2527 6155
LOUTF. . . . . . .  C ADDR   11CDH   R   SEG=MAIN   2917# 2926 2933 2937 2939
LOVICH . . . . . .  C ADDR   13E6H   R   SEG=MAIN   3250# 3282 3303 4686
LOWR . . . . . . .  C ADDR   156AH   R   SEG=MAIN   3449 3455#
LOWR1. . . . . . .  C ADDR   156FH   R   SEG=MAIN   3457# 3671
LSUB . . . . . . .  C ADDR   303DH   R   SEG=MAIN   1206 1377 6115 7794#
LTEMP. . . . . . .  N NUMB   0008H   A      1133 1135 1136 1137 6440 6441 6442 6443 6948 6951 6954 6957 7000 7001
                                           7002 7003 7218# 7583 7584 7585 7586 7595 7599 7603 7607 7610 7611 7612
                                           7613 7614 7615 7616 7617 7618 7619 7620 7621 7624 7627 7632 7636 7640 7650
                                           7653 7656 7659 7675 7678 7679 7681 7682 7684 7685 7687 7692 7693 7694 7695
                                           7715 7720 7728 7736 7741 7752 7760 7766 7774 7780 8148 8149 8188 8193 8195
                                           8204 8205 8206 8207 8438 8446 8459 8462 8465 8468 9040 9043 9046 9049
LWR. . . . . . . .  C ADDR   2C3AH   R   SEG=MAIN   6887# 6891
LWRX . . . . . . .  C ADDR   2BFEH   R   SEG=MAIN   6832# 6843
LWTOF. . . . . . .  C ADDR   042FH   A      8933#
MABIN. . . . . . .  D ADDR   006FH   A      298#
MAFORM . . . . . .  C ADDR   2C55H   R   SEG=MAIN   1707 4053 5029 5216 5842 6895 6900 6905# 6937
MAIN . . . . . . .  C SEG    309AH       REL=UNIT   240 290# 460
MANT1. . . . . . .  N NUMB   0002H   A      8146# 8173 8222 8223
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   150

MANT2. . . . . . .  N NUMB   0008H   A      8148# 8199 8200 8331 8333 8334 8336 8337 8339 8340 8342 8381 8382 8384
                                           8385 8387 8388 8390 8391 8395 8397 8400 8403 8501 8503 8504 8506 8507 8509
                                           8510 8512 8563 8565 8566 8568 8569 8571 8572 8574 8656 8660 8664 8668 8672
                                           8675 8678 8681
MARK0_8. . . . . .  C ADDR   1058H   R   SEG=MAIN   2680 2696 2698#
MARKER . . . . . .  D ADDR   00B2H   A      402# 600 2372 2640 2679 2687 2695 2705 2711 2899 2907 2946 2953 2965 3069
                                           3293 3310 3329 3422 3534 3635 3686 3694 3715 3741 3748 3806 3845 3852 3892
                                           3935 3993 4009 4128 4274 4363 4370 4455 4468 4491 4498 4545 4576 4595 4602
                                           4636 4646 4657 4682 6629 6655 6679 6690 6748
MARLE. . . . . . .  C ADDR   29F3H   R   SEG=MAIN   3860 6676#
MARRI. . . . . . .  C ADDR   2A00H   R   SEG=MAIN   2973 6689#
MAS10. . . . . . .  C ADDR   0413H   R   SEG=MAIN   931 944#
MAS20. . . . . . .  C ADDR   0493H   R   SEG=MAIN   944 993#
MAS4 . . . . . . .  C ADDR   0587H   R   SEG=MAIN   991 1082#
MAS5DIV. . . . . .  C ADDR   05FBH   R   SEG=MAIN   1117 1122 1127 1131 1139#
MASFULL. . . . . .  C ADDR   05C2H   R   SEG=MAIN   1107 1110#
MASS0. . . . . . .  X ADDR   0100H   A      426 427# 932 937 962 968 1033 1039 1087 1093 6874
MASS1. . . . . . .  X ADDR   0104H   A      428# 940 960 971 1031 1041 1085 1096
MASS10 . . . . . .  X ADDR   0128H   A      437# 1012 1060
MASS11 . . . . . .  X ADDR   012CH   A      438# 1009 1062
MASS12 . . . . . .  X ADDR   0130H   A      439# 1007 1064
MASS13 . . . . . .  X ADDR   0134H   A      440# 1005 1066
MASS14 . . . . . .  X ADDR   0138H   A      441# 1003 1068
MASS15 . . . . . .  X ADDR   013CH   A      442# 1000 1070
MASS16 . . . . . .  X ADDR   0140H   A      443# 998 1072
MASS17 . . . . . .  X ADDR   0144H   A      444# 996 1074
MASS18 . . . . . .  X ADDR   0148H   A      445# 994 1076
MASS19 . . . . . .  X ADDR   014CH   A      446# 1078
MASS2. . . . . . .  X ADDR   0108H   A      429# 957 973 1029 1043 1083 1098
MASS3. . . . . . .  X ADDR   010CH   A      430# 955 975 1026 1045 1100
MASS4. . . . . . .  X ADDR   0110H   A      431# 953 977 1024 1047
MASS5. . . . . . .  X ADDR   0114H   A      432# 951 979 1022 1049
MASS6. . . . . . .  X ADDR   0118H   A      433# 949 981 1020 1051
MASS7. . . . . . .  X ADDR   011CH   A      434# 947 983 1018 1053
MASS8. . . . . . .  X ADDR   0120H   A      435# 945 985 1016 1055
MASS9. . . . . . .  X ADDR   0124H   A      436# 987 1014 1057
MASX5. . . . . . .  C ADDR   05F1H   R   SEG=MAIN   1108 1133#
MAXG . . . . . . .  C ADDR   2217H   R   SEG=MAIN   5295# 5344
MAXVIX . . . . . .  C ADDR   2281H   R   SEG=MAIN   5352 5355#
MD_3 . . . . . . .  C ADDR   0B44H   R   SEG=MAIN   1932#
MD_5 . . . . . . .  C ADDR   0B44H   R   SEG=MAIN   1934#
ME11_15DE. . . . .  C ADDR   18B9H   R   SEG=MAIN   3945# 3964
ME11_15DEC . . . .  C ADDR   1AE3H   R   SEG=MAIN   3945 4223#
ME21_22. . . . . .  C ADDR   1195H   R   SEG=MAIN   2863# 2872
ME21_23. . . . . .  C ADDR   1B5DH   R   SEG=MAIN   3978 4282#
ME21_23DEC . . . .  C ADDR   1B79H   R   SEG=MAIN   4289 4294#
ME3. . . . . . . .  C ADDR   028CH   R   SEG=MAIN   700 702#
MEAVP. . . . . . .  C ADDR   135CH   R   SEG=MAIN   3175 3178#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   568# 570
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   572# 575
MEM10MS. . . . . .  C ADDR   02B8H   R   SEG=MAIN   738#
MEM12NO. . . . . .  C ADDR   16E3H   R   SEG=MAIN   3665 3669#
MENG . . . . . . .  C ADDR   2004H   R   SEG=MAIN   4954# 5002
MENU12 . . . . . .  C ADDR   1E72H   R   SEG=MAIN   4727 4731#
MENU13 . . . . . .  C ADDR   1E7AH   R   SEG=MAIN   4731 4734#
MENU14 . . . . . .  C ADDR   1E82H   R   SEG=MAIN   4734 4737#
MENU15 . . . . . .  C ADDR   1E8AH   R   SEG=MAIN   4737 4740#
MENU21 . . . . . .  C ADDR   1E92H   R   SEG=MAIN   4740 4744#
MENU22 . . . . . .  C ADDR   1E9AH   R   SEG=MAIN   4744 4747#
MENU23 . . . . . .  C ADDR   1EA2H   R   SEG=MAIN   4747 4750#
MENU31 . . . . . .  C ADDR   1EAAH   R   SEG=MAIN   4750 4753#
MENU41 . . . . . .  C ADDR   1EB2H   R   SEG=MAIN   4753 4757#
MENUOFF. . . . . .  C ADDR   1337H   R   SEG=MAIN   3146 3159#
MENUON . . . . . .  C ADDR   18EFH   R   SEG=MAIN   3969#
MERR . . . . . . .  C ADDR   1312H   R   SEG=MAIN   3136# 3145
ME_14. . . . . . .  C ADDR   1581H   R   SEG=MAIN   3465#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   151

ME_41. . . . . . .  C ADDR   1C1EH   R   SEG=MAIN   4315 4384#
ME_5 . . . . . . .  C ADDR   0B5BH   R   SEG=MAIN   1935 1936 1945#
ME_52. . . . . . .  C ADDR   1BF2H   R   SEG=MAIN   4360# 4384
ME_52V . . . . . .  C ADDR   1C0FH   R   SEG=MAIN   4374 4376#
ME_6 . . . . . . .  C ADDR   0B95H   R   SEG=MAIN   1946 1971 1978#
MIDL . . . . . . .  C ADDR   2F44H   R   SEG=MAIN   7587 7622#
MIGN . . . . . . .  C ADDR   2A30H   R   SEG=MAIN   5383 6748#
MIGNN. . . . . . .  C ADDR   2A38H   R   SEG=MAIN   6749 6754#
MIN4_HL. . . . . .  C ADDR   20C4H   R   SEG=MAIN   5068# 5101 5127 5262 5285
MING . . . . . . .  C ADDR   2122H   R   SEG=MAIN   5138# 5192
MINIVIX. . . . . .  C ADDR   218CH   R   SEG=MAIN   5203 5208# 5355
MLABL2 . . . . . .  C ADDR   174DH   R   SEG=MAIN   3733# 3764 4002
MLABL2R. . . . . .  C ADDR   192DH   R   SEG=MAIN   4002# 4005
MMM. . . . . . . .  C ADDR   02B3H   R   SEG=MAIN   734#
MO220. . . . . . .  C ADDR   0996H   R   SEG=MAIN   1222 1387 1635#
MO500I . . . . . .  C ADDR   0903H   R   SEG=MAIN   1434 1550#
MO500I_. . . . . .  C ADDR   082BH   R   SEG=MAIN   1433# 1456
MO500R . . . . . .  C ADDR   08F7H   R   SEG=MAIN   1432 1546#
MO500R_. . . . . .  C ADDR   0828H   R   SEG=MAIN   1431# 1451
MODF . . . . . . .  B ADDR   00F8H.5 A      231#
MOUTF. . . . . . .  C ADDR   1122H   R   SEG=MAIN   2811# 2822 2831 2839 2848 2856
MOUTKMEM . . . . .  C ADDR   18BCH   R   SEG=MAIN   3946# 3954
MOVE28 . . . . . .  C ADDR   2CC2H   R   SEG=MAIN   1281 1299 1347 1458 2263 2301 4770 4853 4871 4994 5006 5021 5181
                                           5197 5335 5348 7000#
MOVE82 . . . . . .  C ADDR   287CH   R   SEG=MAIN   6440#
MOVEA3 . . . . . .  C ADDR   09F0H   R   SEG=MAIN   1691#
MOVEA3_. . . . . .  C ADDR   0B51H   R   SEG=MAIN   1937 1940#
MOVER3_. . . . . .  C ADDR   0899H   R   SEG=MAIN   1488 1491#
MOVLEFT. . . . . .  D ADDR   003AH   A      304# 2681 2915 2958 3312 3654 3695 3703 3757 3809 3853 3996 4277 4373
                                           4457 4501 4577 4605 6683
MOVRIG . . . . . .  D ADDR   003BH   A      303# 2677 2908 2912 2954 3313 3653 3699 3749 3753 3808 3857 3995 4276
                                           4458 4581 6692
MR_5 . . . . . . .  C ADDR   08C0H   R   SEG=MAIN   1485 1486 1518#
MSTEN. . . . . . .  B ADDR   00F8H.1 A      235#
MTB2 . . . . . . .  C ADDR   23B8H   R   SEG=MAIN   5598 5605#
MTF. . . . . . . .  C ADDR   244CH   R   SEG=MAIN   5680 5694#
MTF1 . . . . . . .  C ADDR   2458H   R   SEG=MAIN   5696 5699#
MTF2 . . . . . . .  C ADDR   2413H   R   SEG=MAIN   5616 5651 5654# 5685 5712
MTF3 . . . . . . .  C ADDR   2476H   R   SEG=MAIN   5704 5712#
MTF4 . . . . . . .  C ADDR   24DFH   R   SEG=MAIN   5790 5794#
MTG. . . . . . . .  C ADDR   245DH   R   SEG=MAIN   5694 5702#
MTH. . . . . . . .  C ADDR   248DH   R   SEG=MAIN   5702 5730#
MTH1 . . . . . . .  C ADDR   24A3H   R   SEG=MAIN   5732 5742#
MTH2 . . . . . . .  C ADDR   24B3H   R   SEG=MAIN   5743 5752#
MTI. . . . . . . .  C ADDR   24B6H   R   SEG=MAIN   5740 5757#
MTI0 . . . . . . .  C ADDR   24A1H   R   SEG=MAIN   5730 5740#
MTI1 . . . . . . .  C ADDR   24B9H   R   SEG=MAIN   5764#
MTX. . . . . . . .  C ADDR   24B9H   R   SEG=MAIN   5757 5769#
MTX0 . . . . . . .  C ADDR   24E5H   R   SEG=MAIN   5792 5797#
MTX1 . . . . . . .  C ADDR   24F3H   R   SEG=MAIN   5798 5811#
MTX2 . . . . . . .  C ADDR   2507H   R   SEG=MAIN   5812 5822#
MTX3 . . . . . . .  C ADDR   255EH   R   SEG=MAIN   5823 5875#
MTX5 . . . . . . .  C ADDR   24D3H   R   SEG=MAIN   5774 5788#
MTXA . . . . . . .  C ADDR   2515H   R   SEG=MAIN   5831# 5870
MTXB . . . . . . .  C ADDR   252FH   R   SEG=MAIN   5844# 5845
MTXC . . . . . . .  C ADDR   2537H   R   SEG=MAIN   5849# 5850
MTXD . . . . . . .  C ADDR   253FH   R   SEG=MAIN   5854# 5855
MTXE . . . . . . .  C ADDR   2547H   R   SEG=MAIN   5859# 5860
MTY. . . . . . . .  C ADDR   24D0H   R   SEG=MAIN   5770 5786#
MTY2 . . . . . . .  C ADDR   2570H   R   SEG=MAIN   5786 5893#
MUP1 . . . . . . .  C ADDR   021AH   A      8498# 8541
MUP11. . . . . . .  C ADDR   0257H   A      8545# 8590
MUP2 . . . . . . .  C ADDR   0297H   A      8575 8589#
MUP3 . . . . . . .  C ADDR   026CH   A      8544 8560#
MVV11. . . . . . .  C ADDR   171DH   R   SEG=MAIN   3675 3708#
MVV12. . . . . . .  C ADDR   1735H   R   SEG=MAIN   3708 3720#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   152

N12DELCH . . . . .  C ADDR   0DF5H   R   SEG=MAIN   2319 2327#
N4DELCH. . . . . .  C ADDR   0DA1H   R   SEG=MAIN   2243 2281#
N8DELCH. . . . . .  C ADDR   0DE3H   R   SEG=MAIN   2281 2319#
NBIMENU. . . . . .  C ADDR   1128H   R   SEG=MAIN   2815#
NBLOK. . . . . . .  D ADDR   0038H   A      306# 660 1952 2029 3505 3623 3712 3776 3989 4076 5513 5782 5949 7088 7109
                                           7140
NE05 . . . . . . .  C ADDR   0358H   A      8727 8729 8731 8734#
NELEM. . . . . . .  D ADDR   0037H   A      307# 661 4020 4133 4137
NEXIN. . . . . . .  C ADDR   22B1H   R   SEG=MAIN   5386# 5393
NEXTMAX. . . . . .  C ADDR   224CH   R   SEG=MAIN   5325 5332#
NEXTMEA. . . . . .  C ADDR   2039H   R   SEG=MAIN   4984 4992#
NEXTMIN. . . . . .  C ADDR   2157H   R   SEG=MAIN   5170 5178#
NMEM_MENU. . . . .  C ADDR   18BFH   R   SEG=MAIN   3948# 3952
NMINUS . . . . . .  C ADDR   06B7H   R   SEG=MAIN   1249 1253#
NMINUS3. . . . . .  C ADDR   061BH   R   SEG=MAIN   1156 1158#
NNDELCH. . . . . .  C ADDR   0D61H   R   SEG=MAIN   2229 2243#
NNMEMB . . . . . .  C ADDR   122BH   R   SEG=MAIN   2813 2981#
NNNOTT . . . . . .  C ADDR   148EH   R   SEG=MAIN   3341# 3344
NNNUL. . . . . . .  C ADDR   0A6EH   R   SEG=MAIN   1767 1770#
NO . . . . . . . .  C ADDR   2F2CH   R   SEG=MAIN   7597 7601 7605 7609#
NO0CHK . . . . . .  C ADDR   1279H   R   SEG=MAIN   3035#
NO0CHKL. . . . . .  C ADDR   0E08H   R   SEG=MAIN   2339#
NO0KEY . . . . . .  C ADDR   02CDH   R   SEG=MAIN   745 752#
NO10MSV. . . . . .  C ADDR   1860H   R   SEG=MAIN   3897 3903#
NO11V6 . . . . . .  C ADDR   1008H   R   SEG=MAIN   2648 2656#
NO12V6 . . . . . .  C ADDR   101CH   R   SEG=MAIN   2656 2664#
NO13V6 . . . . . .  C ADDR   1030H   R   SEG=MAIN   2664 2674#
NO21P7 . . . . . .  C ADDR   1DFEH   R   SEG=MAIN   4615 4664#
NO23RI . . . . . .  C ADDR   10D9H   R   SEG=MAIN   2771 2775#
NO2MSV . . . . . .  C ADDR   185DH   R   SEG=MAIN   3902# 3903 3913
NO2PARN. . . . . .  C ADDR   09E5H   R   SEG=MAIN   1674 1680#
NO31N. . . . . . .  C ADDR   1817H   R   SEG=MAIN   3866#
NO31RI . . . . . .  C ADDR   110AH   R   SEG=MAIN   2777 2801#
NO3PARN. . . . . .  C ADDR   09DBH   R   SEG=MAIN   1674# 1749
NO4DEL . . . . . .  C ADDR   0D04H   R   SEG=MAIN   2175 2192#
NO5DEL . . . . . .  C ADDR   0D23H   R   SEG=MAIN   2207# 2215
NO6DEL . . . . . .  C ADDR   0D31H   R   SEG=MAIN   2205 2213#
NOAVK. . . . . . .  C ADDR   0689H   R   SEG=MAIN   1179 1227# 2223
NOAVP. . . . . . .  C ADDR   07AEH   R   SEG=MAIN   1368# 1399 1402
NOBAVP . . . . . .  C ADDR   0A8CH   R   SEG=MAIN   1549 1553 1633 1785 1789#
NOBEF99. . . . . .  C ADDR   0384H   R   SEG=MAIN   852 868# 886 901 917
NOBIT. . . . . . .  C ADDR   0245H   A      8513 8527#
NOBITIZM . . . . .  C ADDR   0A95H   R   SEG=MAIN   1791 1794#
NOBL21 . . . . . .  C ADDR   119EH   R   SEG=MAIN   2860 2868#
NOBL22 . . . . . .  C ADDR   11A8H   R   SEG=MAIN   2868 2888#
NOBUF. . . . . . .  C ADDR   0ACAH   R   SEG=MAIN   1822 1824#
NOBUF0 . . . . . .  C ADDR   0CA7H   R   SEG=MAIN   2019 2138#
NOCHI0 . . . . . .  C ADDR   09D7H   R   SEG=MAIN   1388 1665#
NOCHIND. . . . . .  C ADDR   02ECH   R   SEG=MAIN   766 774#
NOCHN10. . . . . .  C ADDR   05DEH   R   SEG=MAIN   1119 1124#
NOCHN2 . . . . . .  C ADDR   05D3H   R   SEG=MAIN   1114 1119#
NOCHN20. . . . . .  C ADDR   05E9H   R   SEG=MAIN   1124 1129#
NODI2. . . . . . .  C ADDR   09BBH   R   SEG=MAIN   1638 1650#
NODI6. . . . . . .  C ADDR   136CH   R   SEG=MAIN   3185 3189#
NODI8. . . . . . .  C ADDR   0A41H   R   SEG=MAIN   1732 1739#
NODI8K . . . . . .  C ADDR   1C8EH   R   SEG=MAIN   4443 4448#
NODI8_43 . . . . .  C ADDR   19F3H   R   SEG=MAIN   4090 4097#
NODI9. . . . . . .  C ADDR   09C0H   R   SEG=MAIN   1651 1653#
NODI9_43 . . . . .  C ADDR   19FEH   R   SEG=MAIN   4097 4104#
NODIS9 . . . . . .  C ADDR   0A54H   R   SEG=MAIN   1739 1751#
NODISK9. . . . . .  C ADDR   1C96H   R   SEG=MAIN   4447 4448 4455#
NOENDLI. . . . . .  C ADDR   2D64H   R   SEG=MAIN   7122 7126#
NOEND_M. . . . . .  C ADDR   25C3H   R   SEG=MAIN   5962 5966#
NOEQU1 . . . . . .  C ADDR   1210H   R   SEG=MAIN   2957 2961#
NOEQU2 . . . . . .  C ADDR   1811H   R   SEG=MAIN   3856 3860#
NOFIZM . . . . . .  C ADDR   0FE9H   R   SEG=MAIN   2612 2644#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   153

NOFT1. . . . . . .  C ADDR   0FC3H   R   SEG=MAIN   2617 2621#
NOFZ . . . . . . .  C ADDR   0CA2H   R   SEG=MAIN   2129 2133#
NOH37. . . . . . .  C ADDR   1405H   R   SEG=MAIN   3242 3267# 3277
NOHNOT1. . . . . .  C ADDR   14E3H   R   SEG=MAIN   3345 3387#
NOHNOT2. . . . . .  C ADDR   14D8H   R   SEG=MAIN   3380# 3387
NOKLB. . . . . . .  C ADDR   0AC4H   R   SEG=MAIN   1820 1822#
NOKORR . . . . . .  C ADDR   0631H   R   SEG=MAIN   1166 1169#
NOLAH. . . . . . .  C ADDR   13C7H   R   SEG=MAIN   3214 3232#
NOLI_43. . . . . .  C ADDR   1A6FH   R   SEG=MAIN   4123 4168#
NOM31. . . . . . .  C ADDR   17EFH   R   SEG=MAIN   3761 3835#
NOM32. . . . . . .  C ADDR   1868H   R   SEG=MAIN   3835 3909#
NOM33. . . . . . .  C ADDR   1896H   R   SEG=MAIN   3909 3929#
NOMARL . . . . . .  C ADDR   1D7BH   R   SEG=MAIN   4579 4585 4589#
NOMAXI . . . . . .  C ADDR   2264H   R   SEG=MAIN   5339 5342#
NOME11 . . . . . .  C ADDR   16D3H   R   SEG=MAIN   3662#
NOMEM11. . . . . .  C ADDR   1143H   R   SEG=MAIN   2818 2828#
NOMEM12. . . . . .  C ADDR   1159H   R   SEG=MAIN   2828 2836#
NOMEM13. . . . . .  C ADDR   116FH   R   SEG=MAIN   2836 2845#
NOMEMK . . . . . .  C ADDR   16D0H   R   SEG=MAIN   3412 3660#
NOMINI . . . . . .  C ADDR   216FH   R   SEG=MAIN   5187 5190#
NON1C. . . . . . .  C ADDR   0F97H   R   SEG=MAIN   2592 2596#
NONULAVT . . . . .  C ADDR   066EH   R   SEG=MAIN   1174 1212#
NONULDEL . . . . .  C ADDR   0CE6H   R   SEG=MAIN   2163 2174#
NOP1OLL. . . . . .  C ADDR   0ADEH   R   SEG=MAIN   1830 1831 1834#
NOP3_0 . . . . . .  C ADDR   09DBH   R   SEG=MAIN   1667#
NOPART1. . . . . .  C ADDR   0388H   R   SEG=MAIN   841 874#
NOPART2. . . . . .  C ADDR   03A8H   R   SEG=MAIN   874 891#
NOPART3. . . . . .  C ADDR   03C8H   R   SEG=MAIN   891 906#
NOPART4. . . . . .  C ADDR   03E8H   R   SEG=MAIN   906 922#
NOPLUS . . . . . .  C ADDR   1080H   R   SEG=MAIN   2723 2726#
NOPOIN7. . . . . .  C ADDR   1D92H   R   SEG=MAIN   4575 4610#
NOPOINT. . . . . .  C ADDR   1D5EH   R   SEG=MAIN   4569 4573#
NORDN. . . . . . .  C ADDR   00F6H   A      8234# 8267
NORDN1 . . . . . .  C ADDR   0107H   A      8236 8250#
NORIG2 . . . . . .  C ADDR   11E3H   R   SEG=MAIN   2922 2930#
NORIM6 . . . . . .  C ADDR   122BH   R   SEG=MAIN   2983#
NORIME . . . . . .  C ADDR   10BFH   R   SEG=MAIN   2758 2762#
NORIME1. . . . . .  C ADDR   10B9H   R   SEG=MAIN   2760# 2763 2776
NORM1. . . . . . .  C ADDR   00F0H   A      8229# 8426 8603 8705 8922
NORR11 . . . . . .  C ADDR   141DH   R   SEG=MAIN   3278#
NORR12 . . . . . .  C ADDR   142DH   R   SEG=MAIN   3278 3285# 3299
NORUP. . . . . . .  C ADDR   0119H   A      8233 8270#
NORUP1 . . . . . .  C ADDR   011EH   A      8275# 8293
NORUP2 . . . . . .  C ADDR   0132H   A      8277 8294#
NORVICH. . . . . .  C ADDR   0AE1H   R   SEG=MAIN   1748 1842#
NOSAV1 . . . . . .  C ADDR   0BF0H   R   SEG=MAIN   2030 2033#
NOSAV2 . . . . . .  C ADDR   0BF7H   R   SEG=MAIN   2033 2036#
NOSAV3 . . . . . .  C ADDR   0BFEH   R   SEG=MAIN   2036 2039#
NOSUB. . . . . . .  C ADDR   2F67H   R   SEG=MAIN   7631 7635 7639 7644#
NOSV1. . . . . . .  C ADDR   0B73H   R   SEG=MAIN   1953 1956#
NOSV2. . . . . . .  C ADDR   0B7AH   R   SEG=MAIN   1956 1959#
NOSV3. . . . . . .  C ADDR   0B81H   R   SEG=MAIN   1959 1962#
NOT1IN . . . . . .  C ADDR   0CBCH   R   SEG=MAIN   1915 2148#
NOT1_7 . . . . . .  C ADDR   1302H   R   SEG=MAIN   3121 3128#
NOT2IN . . . . . .  C ADDR   0CC4H   R   SEG=MAIN   2148 2152#
NOT2_7 . . . . . .  C ADDR   130DH   R   SEG=MAIN   3128 3133#
NOT3IN . . . . . .  C ADDR   0CCCH   R   SEG=MAIN   2152 2155#
NOTAKT . . . . . .  C ADDR   0A9FH   R   SEG=MAIN   1795 1799#
NOTE21 . . . . . .  C ADDR   072EH   R   SEG=MAIN   1268 1310#
NOTE22 . . . . . .  C ADDR   0749H   R   SEG=MAIN   1310 1322#
NOTESTIZM. . . . .  C ADDR   0761H   R   SEG=MAIN   1236 1334#
NOTT1. . . . . . .  C ADDR   0C3AH   R   SEG=MAIN   2074 2079#
NOTT2. . . . . . .  C ADDR   0C62H   R   SEG=MAIN   2079 2102#
NOTT3. . . . . . .  C ADDR   0C70H   R   SEG=MAIN   2102 2109#
NOTT4. . . . . . .  C ADDR   0C87H   R   SEG=MAIN   2109 2118#
NOTT5. . . . . . .  C ADDR   0C95H   R   SEG=MAIN   2118 2123#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   154

NOT_1. . . . . . .  C ADDR   0F9EH   R   SEG=MAIN   2596 2601#
NOT_10 . . . . . .  C ADDR   0F9EH   R   SEG=MAIN   2600#
NOVIR. . . . . . .  C ADDR   10A1H   R   SEG=MAIN   2633 2747#
NOVIR1 . . . . . .  C ADDR   0FD3H   R   SEG=MAIN   2633# 2644
NOZMEA . . . . . .  C ADDR   20B4H   R   SEG=MAIN   5049 5051#
NOZMIN . . . . . .  C ADDR   21C3H   R   SEG=MAIN   5234 5236#
NOZZBL . . . . . .  C ADDR   19E5H   R   SEG=MAIN   4079 4082 4085 4088#
NOZZMI . . . . . .  C ADDR   0A2EH   R   SEG=MAIN   1727 1729#
NOZZMI1. . . . . .  C ADDR   19D5H   R   SEG=MAIN   4077 4080#
NOZZMI2. . . . . .  C ADDR   19DCH   R   SEG=MAIN   4080 4083#
NOZZMI3. . . . . .  C ADDR   19E3H   R   SEG=MAIN   4083 4087#
NOZZMI43 . . . . .  C ADDR   19CCH   R   SEG=MAIN   4073 4076#
NSEC1. . . . . . .  C ADDR   0A78H   R   SEG=MAIN   1771 1775#
NSEC10 . . . . . .  C ADDR   0A83H   R   SEG=MAIN   1774 1778 1783#
NSEC11 . . . . . .  C ADDR   0A80H   R   SEG=MAIN   1775 1780#
NUERR. . . . . . .  D ADDR   0039H   A      305# 1425 1832 4265 4462 4648 5999 6011 6775
NULAVT . . . . . .  C ADDR   0D46H   R   SEG=MAIN   2227#
NUMSIZE. . . . . .  N NUMB   0004H   A      7221# 7238 7276 7282 7356 7374
OBOARD . . . . . .  C ADDR   2E9DH   R   SEG=MAIN   7455 7469#
OBOARD1. . . . . .  C ADDR   2EE5H   R   SEG=MAIN   7528 7541#
OFFMENUM . . . . .  C ADDR   152EH   R   SEG=MAIN   3426# 3432
OK1. . . . . . . .  C ADDR   0186H   A      8360 8375#
OK2. . . . . . . .  C ADDR   01A0H   A      8377 8392#
OK3. . . . . . . .  C ADDR   01C4H   A      8409 8425#
OLDMAX . . . . . .  C ADDR   21E3H   R   SEG=MAIN   5253 5259#
OLDMEAN. . . . . .  C ADDR   1FEFH   R   SEG=MAIN   4936 4942#
OLDMIN . . . . . .  C ADDR   20EEH   R   SEG=MAIN   5091 5097#
ONBOAR1. . . . . .  C ADDR   2EC3H   R   SEG=MAIN   7490 7507#
ONBOARD. . . . . .  C ADDR   2E77H   R   SEG=MAIN   7419 7433#
ONMEM11. . . . . .  C ADDR   1508H   R   SEG=MAIN   3158 3225 3247 3406# 3445 3453 3459 3464 3679 3719 3726 3968 3974
                                           4221 4225 4230 4244 4249 4279 4293 4296 4477 4482
ONMEM12. . . . . .  C ADDR   1B80H   R   SEG=MAIN   4297# 4300 4319
ONMEM13. . . . . .  C ADDR   1D3EH   R   SEG=MAIN   4502 4557# 4561 4563
ONMIG. . . . . . .  C ADDR   2A46H   R   SEG=MAIN   6758 6766#
ONTEST . . . . . .  C ADDR   0F4DH   R   SEG=MAIN   2522 2535#
ONVICH . . . . . .  C ADDR   0F09H   R   SEG=MAIN   2479 2491#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 498
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 493
OUT43. . . . . . .  C ADDR   1A07H   R   SEG=MAIN   4113#
OUT6 . . . . . . .  C ADDR   122BH   R   SEG=MAIN   2333 2425 2469 2557 2562 2567 2583 2631 2739 2984#
OUT7 . . . . . . .  C ADDR   1E27H   R   SEG=MAIN   3029 3030 3125 3132 3136 3164 3170 3220 3410 3491 3820 3948 4115
                                           4122 4167 4259 4355 4552 4564 4659 4661 4689#
OUTA . . . . . . .  C ADDR   2A0DH   R   SEG=MAIN   3316 6700#
OUTA2. . . . . . .  C ADDR   2A27H   R   SEG=MAIN   6711# 6716
OUTF . . . . . . .  C ADDR   0FC9H   R   SEG=MAIN   2627#
OUTFL. . . . . . .  C ADDR   1091H   R   SEG=MAIN   2731 2735#
OUTKMEM. . . . . .  C ADDR   1515H   R   SEG=MAIN   3413# 3435 3946
OUTMA. . . . . . .  C ADDR   106AH   R   SEG=MAIN   2714 2716#
OUTMAX . . . . . .  C ADDR   2269H   R   SEG=MAIN   5240 5329 5345#
OUTMEA . . . . . .  C ADDR   2054H   R   SEG=MAIN   4940 4988 5003#
OUTMENU. . . . . .  C ADDR   1B2CH   R   SEG=MAIN   4258#
OUTMIN . . . . . .  C ADDR   2174H   R   SEG=MAIN   5077 5174 5194#
OUTR . . . . . . .  C ADDR   095AH   R   SEG=MAIN   1578 1601#
OUTR5. . . . . . .  C ADDR   0976H   R   SEG=MAIN   1599 1620#
OUTSKO . . . . . .  C ADDR   1BE5H   R   SEG=MAIN   4349 4353#
OUTSKO1. . . . . .  C ADDR   1BE0H   R   SEG=MAIN   4347 4350#
OUTVICH. . . . . .  C ADDR   0FD6H   R   SEG=MAIN   2634# 2646
OUTVIR . . . . . .  C ADDR   0E8CH   R   SEG=MAIN   2392 2421#
OUT_KALI . . . . .  C ADDR   1F36H   R   SEG=MAIN   4837#
OV . . . . . . . .  B ADDR   00D0H.2 A      205# 7411
P. . . . . . . . .  B ADDR   00D0H.0 A      207#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5386 5390
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 471
P1 . . . . . . . .  D ADDR   0090H   A      32# 706 707 1831 4264 6019 6021 6024 6027 6031 6033 6034 6078 6080 6082
                                           6504 6511 7030 7033 7035 7038
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   155

P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 472
P2 . . . . . . . .  D ADDR   00A0H   A      47# 6052 6056 6065
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 473
P3 . . . . . . . .  D ADDR   00B0H   A      62# 482 2342 2391 2393 2395 2396 2399 2400 2404 2405 2407 2408 2410 2411
                                           2413 2414 2416 2417 2606 2607 2613 2614 2645 2646 2649 2650 2657 2658 2665
                                           2666 2674 2675 2718 2719 2729 2730 2755 2756 2769 2770 2780 2781 2805 2806
                                           2807 2808 2820 2821 2829 2830 2837 2838 2846 2847 2855 2856 2889 2890 2925
                                           2926 2934 2935 2975 2976 3005 3036 3076 3078 3080 3081 3084 3085 3087 3088
                                           3090 3091 3093 3098 3100 3101 3103 3104 3215 3218 3241 3242 3267 3268 3279
                                           3280 3286 3287 3300 3301 3343 3344 3431 3432 3434 3435 3438 3439 3478 3479
                                           3495 3496 3497 3498 3543 3544 3662 3663 3672 3673 3763 3764 3765 3766 3836
                                           3837 3866 3867 3910 3911 3912 3913 3930 3931 3932 3933 3951 3952 3953 3954
                                           3961 3962 4004 4005 4006 4007 4124 4125 4213 4214 4287 4288 4299 4300 4316
                                           4317 4318 4319 4361 4362 4378 4379 4385 4386 4387 4388 4560 4561 4562 4563
                                           4567 4568 4573 4574 4610 4611 4703 6051 6053 6055 6061 6062 6063 6066 6067
P3IF . . . . . . .  D ADDR   00ADH   A      59# 746 748 2341 2352 3004 3035 3050 4702
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 475
P4 . . . . . . . .  D ADDR   0084H   A      20# 2165 2185 2230 2312 2507 2509 4823 6133 6136 6152 6154 6604
P5 . . . . . . . .  D ADDR   0085H   A      21# 606 615 2167 2187 2232 2235 2240 2274 2276 2314 2517 2519 4827 6141
                                           6144 6174 6177 6608
P6 . . . . . . . .  D ADDR   0086H   A      22# 2045 2047 2050 2052 3007 3009 3012 3014 4706 4708 4711 4713
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 476
PACK1. . . . . . .  C ADDR   00DEH   A      8212# 8427 8604 8706 8923
PARERR . . . . . .  C ADDR   1CA3H   R   SEG=MAIN   4418 4420 4422 4462#
PARN . . . . . . .  D ADDR   00AFH   A      399# 612 1761 2587 3370 5517 5687
PAROL. . . . . . .  D ADDR   00A8H   A      395#
PART . . . . . . .  D ADDR   009AH   A      389# 607 839 1145 1186 1212 1227 1770 1843 1973 2073 2204 2473 2551 2588
                                           3119 3354 3369 3810 3896 5486 5509 5619 6145 6530
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 210 211 212 213 214 215 216 519
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 518
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 517
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 516 2054 2056 3016 3018 4715 4717 5369 5371
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 469
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 470 515
PCON . . . . . . .  D ADDR   0087H   A      23# 511
POIN3. . . . . . .  C ADDR   1D91H   R   SEG=MAIN   4608# 4662
POINA. . . . . . .  C ADDR   1DF9H   R   SEG=MAIN   4606 4661#
POINA1 . . . . . .  C ADDR   1D76H   R   SEG=MAIN   4578 4585#
POINA2 . . . . . .  C ADDR   1D70H   R   SEG=MAIN   4581# 4586
POZB . . . . . . .  C ADDR   1E1CH   R   SEG=MAIN   4675 4679#
PROD . . . . . . .  N NUMB   000CH   A      8149# 8493 8494 8495 8496 8516 8517 8518 8520 8521 8523 8524 8526 8548
                                           8550 8551 8553 8554 8556 8557 8559 8578 8579 8580 8582 8583 8585 8586 8588
                                           8599 8600 8601 8602 8623 8624 8625 8626 8642 8644 8645 8647 8648 8650 8651
                                           8653 8683 8700 8701 8702 8703
PS . . . . . . . .  B ADDR   00B8H.4 A      173#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8954 8958 9010 9013
PSW. . . . . . . .  D ADDR   00D0H   A      91# 200 201 202 203 204 205 206 207 2355 2994 3053 4700 5413 5466 6939
                                           6941 7884 7892
PT0. . . . . . . .  B ADDR   00B8H.1 A      176#
PT1. . . . . . . .  B ADDR   00B8H.3 A      174#
PT2. . . . . . . .  B ADDR   00B8H.5 A      172#
PX0. . . . . . . .  B ADDR   00B8H.0 A      177#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   156

PX1. . . . . . . .  B ADDR   00B8H.2 A      175#
PYSKST . . . . . .  C ADDR   0E96H   R   SEG=MAIN   2415 2427#
P_IN . . . . . . .  D ADDR   0027H   A      367# 693 5447 5456 5458
P_OUT. . . . . . .  D ADDR   0026H   A      366# 1942 5425 5428 5587
QUES . . . . . . .  C ADDR   15C3H   R   SEG=MAIN   3491# 3496
QU_AVP . . . . . .  C ADDR   07ABH   R   SEG=MAIN   1365 1367#
R10. . . . . . . .  N NUMB   000AH   A      457# 1175 1420 1461 1473 2092 4421 6577 8977
R11. . . . . . . .  N NUMB   000BH   A      458# 1176 1419 1462 1472 2095 6581 8981
R8 . . . . . . . .  N NUMB   0008H   A      455# 546 1422 1459 1475 2086 4238 4417 6098 6569 8969
R9 . . . . . . . .  N NUMB   0009H   A      456# 1421 1460 1474 2089 4419 6099 6573 8973
RAFTERK. . . . . .  C ADDR   0647H   R   SEG=MAIN   1183# 1189
RB80 . . . . . . .  B ADDR   0098H.2 A      158#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK0. . . . . . .  B ADDR   00C8H.5 A      192#
RDDOUTF. . . . . .  C ADDR   1610H   R   SEG=MAIN   3539# 3544
RE1. . . . . . . .  C ADDR   2681H   R   SEG=MAIN   6078# 6084
RE11_7 . . . . . .  C ADDR   06EFH   R   SEG=MAIN   1279# 1321 1332
RE4BYTE. . . . . .  C ADDR   0454H   A      545 4237 4414 8965#
REA3_M . . . . . .  C ADDR   25A6H   R   SEG=MAIN   5927#
REA3_X . . . . . .  C ADDR   2DAAH   R   SEG=MAIN   4049 5832 7178#
REACP. . . . . . .  D ADDR   0077H   A      299# 721 723 725 727 785 801 808 816 824 831 843 877 892 908 923 2248
                                           2250 2252 2254 2286 2288 2290 2292
READ . . . . . . .  C ADDR   267FH   R   SEG=MAIN   720 722 724 6077#
READYACP . . . . .  C ADDR   033FH   R   SEG=MAIN   825 833#
READ_X2. . . . . .  C ADDR   2667H   R   SEG=MAIN   6060# 6070
REBYTE . . . . . .  C ADDR   0286H   R   SEG=MAIN   698# 739 763 869 2190 2212 2217 2242 2279 2317 2326 2328
REBYTE2. . . . . .  C ADDR   046CH   A      1271 1279 1297 1313 1324 1340 4843 4851 8985#
REBYTER. . . . . .  C ADDR   0D36H   R   SEG=MAIN   2201 2217#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 477
REN0 . . . . . . .  B ADDR   0098H.4 A      156#
RENDKALIB. . . . .  C ADDR   134FH   R   SEG=MAIN   3172# 3174
RESAR2 . . . . . .  C ADDR   2CCEH   R   SEG=MAIN   844 878 893 909 924 936 966 1037 1091 1199 1242 1349 1371 1441
                                           1464 1526 1705 1992 2139 2178 2203 3202 4764 4772 4791 4869 4891 4996 5008
                                           5023 5122 5179 5195 5209 5281 5333 5346 5359 5707 6701 7008# 7162
RESAR8 . . . . . .  C ADDR   2C8CH   R   SEG=MAIN   1158 1205 1245 1253 1376 2261 2299 6947#
RESA_HL. . . . . .  C ADDR   2D77H   R   SEG=MAIN   1947 2023 4930 4943 5085 5098 5248 5260 7139#
REZAM. . . . . . .  D ADDR   008CH   A      385# 2296
REZAP. . . . . . .  D ADDR   0088H   A      384# 2258
REZMUL . . . . . .  C ADDR   069FH   R   SEG=MAIN   1220 1234 1241#
REZ_A. . . . . . .  D ADDR   0062H   A      375# 857 925 935 965 1036 1090 2177
REZ_A0 . . . . . .  D ADDR   006AH   A      377# 1204 1375 1413 1659 2463 3193 3203 3210 5708 5726
REZ_A1 . . . . . .  D ADDR   0066H   A      376# 1141 1202 1241 1352 1370 1389
REZ_A2 . . . . . .  D ADDR   007BH   A      378# 1372
REZ_A3 . . . . . .  D ADDR   009CH   A      391# 1207 1378 1440 1704 1848 1938 1941 3201 4763 4868 5706 5843 7161
                                           7190
REZ_AK . . . . . .  D ADDR   00A4H   A      394# 4539 4771
REZ_AME. . . . . .  D ADDR   005EH   A      373# 1151 1160 1198 1255 1348
REZ_DEL. . . . . .  D ADDR   00C5H   A      411# 859
REZ_R. . . . . . .  D ADDR   00C9H   A      412# 1477 1487 1525
RE_HL. . . . . . .  C ADDR   2D7EH   R   SEG=MAIN   7143# 7152 7156 7159
RE_HL1 . . . . . .  C ADDR   2D86H   R   SEG=MAIN   7141 7150#
RE_HL2 . . . . . .  C ADDR   2D8DH   R   SEG=MAIN   7150 7154#
RE_HL3 . . . . . .  C ADDR   2D94H   R   SEG=MAIN   7154 7158#
RFINDMEM . . . . .  C ADDR   109EH   R   SEG=MAIN   2745# 2747
RGO23NO. . . . . .  C ADDR   1613H   R   SEG=MAIN   3540# 3545
RGOTO7 . . . . . .  C ADDR   17ECH   R   SEG=MAIN   3833# 3867
RHNOR11. . . . . .  C ADDR   13F7H   R   SEG=MAIN   3240 3253 3259#
RHNOT1 . . . . . .  C ADDR   13BEH   R   SEG=MAIN   3218 3226#
RI . . . . . . . .  B ADDR   0098H.0 A      369# 5452 5453
RI0. . . . . . . .  B ADDR   0098H.0 A      160#
RI21_23. . . . . .  C ADDR   10C2H   R   SEG=MAIN   2753 2765#
RI6. . . . . . . .  C ADDR   10BCH   R   SEG=MAIN   2756 2761# 2770 2781 2804 2808
RIGBLO . . . . . .  C ADDR   11ABH   R   SEG=MAIN   2889# 2921 2923
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   157

RIGBLOK. . . . . .  C ADDR   11E9H   R   SEG=MAIN   2934#
RIGHT2 . . . . . .  C ADDR   0EBDH   R   SEG=MAIN   2442 2446#
RIGHT3 . . . . . .  C ADDR   0EC1H   R   SEG=MAIN   2444 2449#
RIKN . . . . . . .  C ADDR   1042H   R   SEG=MAIN   2681# 2697
RIZMAN . . . . . .  C ADDR   0E05H   R   SEG=MAIN   2337# 2401
RI_31. . . . . . .  C ADDR   10DCH   R   SEG=MAIN   2768 2777#
RKNLEFT. . . . . .  C ADDR   1276H   R   SEG=MAIN   3033# 3092
RKNMEM . . . . . .  C ADDR   1280H   R   SEG=MAIN   3039# 3102
RKNNUL . . . . . .  C ADDR   1273H   R   SEG=MAIN   3032# 3086
RKNOPT . . . . . .  C ADDR   0E02H   R   SEG=MAIN   2336# 2412
RKNRAZR. . . . . .  C ADDR   0DFFH   R   SEG=MAIN   2335# 2406
RKVVOD0. . . . . .  C ADDR   155AH   R   SEG=MAIN   3440 3446#
RLABELF. . . . . .  C ADDR   0DFCH   R   SEG=MAIN   2334# 2398
RLABELH. . . . . .  C ADDR   1270H   R   SEG=MAIN   3031# 3083
RLABELI. . . . . .  C ADDR   13C4H   R   SEG=MAIN   3229#
RLABELK. . . . . .  C ADDR   13C1H   R   SEG=MAIN   3228# 3232
RLABELL. . . . . .  C ADDR   109BH   R   SEG=MAIN   2743#
RLABELL1 . . . . .  C ADDR   1228H   R   SEG=MAIN   2976 2979#
RLABELN. . . . . .  C ADDR   111FH   R   SEG=MAIN   2806 2810#
RLABELP. . . . . .  C ADDR   1AC7H   R   SEG=MAIN   4211# 4214
RLABELS13. . . . .  C ADDR   1BEFH   R   SEG=MAIN   4358# 4386
RLABELS4 . . . . .  C ADDR   1BECH   R   SEG=MAIN   4357# 4360
RLABL2 . . . . . .  C ADDR   15BDH   R   SEG=MAIN   3489#
RLABM. . . . . . .  C ADDR   15C0H   R   SEG=MAIN   3490# 3494
RLEFCUR. . . . . .  C ADDR   1893H   R   SEG=MAIN   3927# 3931
RLER . . . . . . .  C ADDR   29FFH   R   SEG=MAIN   6684 6686#
RLIST_43 . . . . .  C ADDR   192AH   R   SEG=MAIN   4001# 4003
RMAS4. . . . . . .  C ADDR   0490H   R   SEG=MAIN   991# 993
RME21_23 . . . . .  C ADDR   18FAH   R   SEG=MAIN   3959 3978#
RMO220 . . . . . .  C ADDR   0681H   R   SEG=MAIN   1222# 1264
RNNMEMB. . . . . .  C ADDR   1125H   R   SEG=MAIN   2813# 2816
RNO3PARN . . . . .  C ADDR   0A52H   R   SEG=MAIN   1749# 1762
RNOBUF0. . . . . .  C ADDR   0BD6H   R   SEG=MAIN   1996 2019#
RNOCHI0. . . . . .  C ADDR   07D3H   R   SEG=MAIN   1384 1388#
RNOH37 . . . . . .  C ADDR   141BH   R   SEG=MAIN   3277# 3280 3287 3301
RNOM31 . . . . . .  C ADDR   176AH   R   SEG=MAIN   3761# 3762
RNOMEMK. . . . . .  C ADDR   1512H   R   SEG=MAIN   3412# 3429
RNORVICH . . . . .  C ADDR   0A4FH   R   SEG=MAIN   1696 1697 1748#
RNOT1IN. . . . . .  C ADDR   0B3AH   R   SEG=MAIN   1845 1915#
RNOTESTIZM . . . .  C ADDR   0697H   R   SEG=MAIN   1236# 1266
ROUSTA . . . . . .  C ADDR   1AB3H   R   SEG=MAIN   4195 4203#
ROUSTA1. . . . . .  C ADDR   1AC4H   R   SEG=MAIN   4203 4209#
ROUT6. . . . . . .  C ADDR   0DF9H   R   SEG=MAIN   2333# 2397
ROUT7. . . . . . .  C ADDR   126DH   R   SEG=MAIN   3030# 3077 3082
ROUTMAX. . . . . .  C ADDR   21C7H   R   SEG=MAIN   5240# 5257
ROUTMIN. . . . . .  C ADDR   20D2H   R   SEG=MAIN   5077# 5095
RR0. . . . . . . .  N NUMB   0000H   A      449# 2356 2993 3054 4699
RR1. . . . . . . .  N NUMB   0001H   A      450# 2357 2992 3055 4698
RR2. . . . . . . .  N NUMB   0002H   A      452# 1273 1285 1291 1303 1315 1326 2358 2991 3056 4029 4037 4697 4845
                                           4857 4863 4875 6111
RR3. . . . . . . .  N NUMB   0003H   A      453# 1274 1284 1292 1302 1316 1327 2359 2990 3057 4030 4036 4696 4846
                                           4856 4864 4874 6112
RR4. . . . . . . .  N NUMB   0004H   A      1275 1283 1293 1301 1317 1328 2360 2989 3058 4031 4035 4695 4847 4855
                                           4865 4873 7222# 7274 7293 7309 7353 7373
RR5. . . . . . . .  N NUMB   0005H   A      1276 1282 1294 1300 1318 1329 2361 2988 3059 4032 4034 4694 4848 4854
                                           4866 4872 7223# 7275 7281 7288 7354 7362
RR6. . . . . . . .  N NUMB   0006H   A      451# 2362 2987 3060 4693
RR7. . . . . . . .  N NUMB   0007H   A      454# 2363 2986 3061 4692
RRIR . . . . . . .  C ADDR   2A0CH   R   SEG=MAIN   6695 6697#
RRMO220. . . . . .  C ADDR   07D0H   R   SEG=MAIN   1361 1387#
RS0. . . . . . . .  B ADDR   00D0H.3 A      204#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   09EEH   R   SEG=MAIN   1686# 1698 1699 1700
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 504
RS_BYTE. . . . . .  C ADDR   22C5H   R   SEG=MAIN   261 5398#
RTIZMRI. . . . . .  C ADDR   0FA2H   R   SEG=MAIN   2604#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   158

RVIOUT . . . . . .  C ADDR   1019H   R   SEG=MAIN   2650 2658 2662# 2666
RVVIZKO. . . . . .  C ADDR   13F9H   R   SEG=MAIN   3261# 3269
RVVKALI52. . . . .  C ADDR   1C1BH   R   SEG=MAIN   4379 4381#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      309# 611 1954 2031 4078
SADIAP2. . . . . .  D ADDR   0032H   A      311# 1957 2034 4081
SADIAP3. . . . . .  D ADDR   0031H   A      312# 1960 2037 4084
SADIAP4. . . . . .  D ADDR   0030H   A      313# 1963 2040 4087
SAUS . . . . . . .  D ADDR   0036H   A      308# 2166 2168 2184 2186 2231 2233 2311 2313
SAVBA. . . . . . .  D ADDR   003CH   A      302# 2376 2692 2710 2904 2951 2971 3073 3691 3746 3850 4368 4496 4600
                                           6759 6766
SAVEIR2. . . . . .  C ADDR   2C10H   R   SEG=MAIN   938 969 1040 1094 6846#
SAVELTE. . . . . .  C ADDR   04A7H   A      9040#
SAVEN_BL . . . . .  D ADDR   00D3H   A      415# 632 3626 5951 7111 7142
SAVEN_BL2. . . . .  D ADDR   00C0H   A      408# 640 3640 5968 7129 7151
SAVEN_BL3. . . . .  D ADDR   00C2H   A      409# 647 3645 5971 7133 7155
SAVEN_BL4. . . . .  D ADDR   00D9H   A      419# 654 3649 5973 7135 7158
SAVER2 . . . . . .  C ADDR   2C1CH   R   SEG=MAIN   624 626 628 630 848 858 860 882 897 913 926 1142 1152 1161 1203
                                           1208 1256 1353 1373 1379 1390 1478 1482 1709 2098 2144 2182 2211 2259 2271
                                           2297 2309 3204 3211 4055 4540 4630 4781 4883 4999 5011 5031 5125 5189 5205
                                           5218 5284 5341 5354 5364 5672 5709 5727 6704 6860# 7191
SAVE_HL. . . . . .  C ADDR   2D43H   R   SEG=MAIN   1949 2026 3533 3891 5924 7109#
SAVE_HLM . . . . .  C ADDR   25A8H   R   SEG=MAIN   5949#
SA_HL. . . . . . .  C ADDR   2D4AH   R   SEG=MAIN   7112# 7130 7134 7136
SA_HL1 . . . . . .  C ADDR   2D65H   R   SEG=MAIN   7110 7128#
SA_HL2 . . . . . .  C ADDR   2D6CH   R   SEG=MAIN   7128 7132#
SA_HL3 . . . . . .  C ADDR   2D73H   R   SEG=MAIN   7132 7135#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 1496 1500 1505 1510 1515 1944 5432 5454 5735 5747 5830 5847 5852 5857
                                           5862 5895 5902 5981 5987
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 369 370 510 5982 5986 5989 5990 6010
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   2629H   R   SEG=MAIN   6019# 6026
SDV1 . . . . . . .  C ADDR   263DH   R   SEG=MAIN   6031# 6037
SDVIG0 . . . . . .  C ADDR   0320H   R   SEG=MAIN   812# 814
SDVIG1 . . . . . .  C ADDR   0315H   R   SEG=MAIN   804# 806
SDVIG2 . . . . . .  C ADDR   030AH   R   SEG=MAIN   797# 799
SDVIG3 . . . . . .  C ADDR   02FEH   R   SEG=MAIN   788# 790
SDVIG4 . . . . . .  C ADDR   032FH   R   SEG=MAIN   821# 823
SDVIG6 . . . . . .  C ADDR   0339H   R   SEG=MAIN   828# 830
SDVM . . . . . . .  C ADDR   0337H   R   SEG=MAIN   818 827#
SEEGOON. . . . . .  C ADDR   0A57H   R   SEG=MAIN   1733 1738 1740 1746 1753#
SEEIND . . . . . .  C ADDR   0A65H   R   SEG=MAIN   1678 1685 1686 1764#
SEE_L43. . . . . .  C ADDR   1A01H   R   SEG=MAIN   4095 4102 4106#
SI . . . . . . . .  B ADDR   00C0H.3 A      184#
SIGN . . . . . . .  N NUMB   0007H   A      8144# 8165 8166 8191 8192 8216 8359 8376 8597 8637
SKOR19 . . . . . .  C ADDR   1B12H   R   SEG=MAIN   4239 4245#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      234#
SM00 . . . . . . .  B ADDR   0098H.7 A      153#
SM10 . . . . . . .  B ADDR   0098H.6 A      154#
SM20 . . . . . . .  B ADDR   0098H.5 A      155#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186 187
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      186#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      187#
SM_HL. . . . . . .  C ADDR   25AFH   R   SEG=MAIN   5952# 5969 5972 5974
SM_HL1 . . . . . .  C ADDR   25C4H   R   SEG=MAIN   5950 5967#
SM_HL2 . . . . . .  C ADDR   25CBH   R   SEG=MAIN   5967 5970#
SM_HL3 . . . . . .  C ADDR   25D2H   R   SEG=MAIN   5970 5973#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   159

SOOTV. . . . . . .  C ADDR   1488H   R   SEG=MAIN   3339# 3355
SP . . . . . . . .  D ADDR   0081H   A      17# 467
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 508
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 229 230 231 232 233 234 235 236 507
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5388
SPIEN. . . . . . .  B ADDR   00F8H.0 A      236#
SPIF . . . . . . .  B ADDR   00F8H.7 A      229#
SPWRI. . . . . . .  C ADDR   1BC3H   R   SEG=MAIN   4333 4335#
SS1. . . . . . . .  C ADDR   275FH   R   SEG=MAIN   6252# 6254
STA. . . . . . . .  B ADDR   00C0H.5 A      182#
STO. . . . . . . .  B ADDR   00C0H.4 A      183#
SUMMA. . . . . . .  D ADDR   00B3H   A      403# 845 847 862 879 881 894 896 910 912 1411 1657 2461 3191
SUMT2. . . . . . .  C ADDR   038BH   R   SEG=MAIN   836 876#
S_R2 . . . . . . .  C ADDR   22C5H   R   SEG=MAIN   5412#
S_R3 . . . . . . .  C ADDR   22E3H   R   SEG=MAIN   5421 5434#
S_R4 . . . . . . .  C ADDR   22E4H   R   SEG=MAIN   5417 5437#
S_R5 . . . . . . .  C ADDR   22E6H   R   SEG=MAIN   5420 5433 5440#
S_R6 . . . . . . .  C ADDR   22EDH   R   SEG=MAIN   5446# 5463
S_R7 . . . . . . .  C ADDR   22F7H   R   SEG=MAIN   5445 5451#
S_R9 . . . . . . .  C ADDR   230CH   R   SEG=MAIN   5449 5452 5461 5464#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 190 191 192 193 194 195 196 197 520 2060 3023 4720 5374
T2MSME . . . . . .  C ADDR   1857H   R   SEG=MAIN   3899# 3905
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TA0. . . . . . . .  C ADDR   231EH   R   SEG=MAIN   5475 5478#
TA1. . . . . . . .  C ADDR   2327H   R   SEG=MAIN   5480 5483#
TA2. . . . . . . .  C ADDR   234FH   R   SEG=MAIN   5484 5502#
TA2_ . . . . . . .  C ADDR   233FH   R   SEG=MAIN   5488 5494#
TA3. . . . . . . .  C ADDR   2370H   R   SEG=MAIN   5522 5525#
TA3_ . . . . . . .  C ADDR   234CH   R   SEG=MAIN   5495 5500#
TA4. . . . . . . .  C ADDR   2372H   R   SEG=MAIN   5524 5527#
TA5. . . . . . . .  C ADDR   2379H   R   SEG=MAIN   5528 5531#
TA6. . . . . . . .  C ADDR   237BH   R   SEG=MAIN   5530 5533#
TABB1_2. . . . . .  C ADDR   28FFH   R   SEG=MAIN   6521# 6531
TABN . . . . . . .  C ADDR   2997H   R   SEG=MAIN   6620# 6624
TABT11 . . . . . .  C ADDR   2717H   R   SEG=MAIN   6194# 6601
TABT7. . . . . . .  C ADDR   271BH   R   SEG=MAIN   4820 6196# 6613
TABT9. . . . . . .  C ADDR   2719H   R   SEG=MAIN   6195# 6611
TABUS. . . . . . .  C ADDR   2703H   R   SEG=MAIN   6130 6183#
TAKTIND. . . . . .  C ADDR   0AA4H   R   SEG=MAIN   1798 1801#
TB . . . . . . . .  C ADDR   23A4H   R   SEG=MAIN   5477 5592#
TB80 . . . . . . .  B ADDR   0098H.3 A      157#
TB_0 . . . . . . .  C ADDR   231BH   R   SEG=MAIN   5474 5476#
TC . . . . . . . .  C ADDR   23BEH   R   SEG=MAIN   5593 5609#
TC1. . . . . . . .  C ADDR   23CAH   R   SEG=MAIN   5615 5617#
TC2. . . . . . . .  C ADDR   23DEH   R   SEG=MAIN   5621 5628#
TC3. . . . . . . .  C ADDR   23EEH   R   SEG=MAIN   5628 5635#
TCLK0. . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 502 503 514
TD . . . . . . . .  C ADDR   23F3H   R   SEG=MAIN   5610 5638#
TE . . . . . . . .  C ADDR   243BH   R   SEG=MAIN   5639 5679#
TE1. . . . . . . .  C ADDR   2402H   R   SEG=MAIN   5643 5646#
TE10MS . . . . . .  C ADDR   2A62H   R   SEG=MAIN   3898 6781#
TE2. . . . . . . .  C ADDR   240AH   R   SEG=MAIN   5647 5650#
TE22 . . . . . . .  C ADDR   298AH   R   SEG=MAIN   6600 6610#
TE23 . . . . . . .  C ADDR   2992H   R   SEG=MAIN   6610 6613#
TE2MS. . . . . . .  C ADDR   2A58H   R   SEG=MAIN   3904 6780#
TEAEQU0. . . . . .  C ADDR   2A9EH   R   SEG=MAIN   3314 6789#
TEAVK. . . . . . .  C ADDR   2ADAH   R   SEG=MAIN   4738 6796#
TEBEQU0. . . . . .  C ADDR   2AA8H   R   SEG=MAIN   6790#
TEBL . . . . . . .  C ADDR   2B8EH   R   SEG=MAIN   2862 3482 6815#
TEBL0. . . . . . .  C ADDR   2B98H   R   SEG=MAIN   3710 6816#
TECH . . . . . . .  C ADDR   2BA2H   R   SEG=MAIN   3990 4153 6817#
TECLE. . . . . . .  C ADDR   2B53H   R   SEG=MAIN   2850 3451 6809#
TEEND. . . . . . .  C ADDR   2BF2H   R   SEG=MAIN   4834 6826#
TEERR. . . . . . .  C ADDR   2BE8H   R   SEG=MAIN   6773 6825#
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   160

TEFULL . . . . . .  C ADDR   2B7AH   R   SEG=MAIN   2869 3677 6813#
TEINT. . . . . . .  C ADDR   2B84H   R   SEG=MAIN   3777 6814#
TEIZMK . . . . . .  C ADDR   2B35H   R   SEG=MAIN   2652 3245 3255 6806#
TEKALIB. . . . . .  C ADDR   2AE4H   R   SEG=MAIN   3966 4741 6797#
TEKAOUT. . . . . .  C ADDR   0D39H   R   SEG=MAIN   2219# 2226
TEKD . . . . . . .  C ADDR   2B2BH   R   SEG=MAIN   4426 6805#
TELIST . . . . . .  C ADDR   2B6FH   R   SEG=MAIN   2833 3397 3462 3467 6812#
TEMAX. . . . . . .  C ADDR   2BC0H   R   SEG=MAIN   4189 6820#
TEMEM. . . . . . .  C ADDR   2B5DH   R   SEG=MAIN   6810#
TEMENU . . . . . .  C ADDR   2AB2H   R   SEG=MAIN   6791#
TEMID. . . . . . .  C ADDR   2BCAH   R   SEG=MAIN   4197 6821#
TEMIN. . . . . . .  C ADDR   2BB6H   R   SEG=MAIN   3722 4205 6819#
TEMUL. . . . . . .  C ADDR   077EH   R   SEG=MAIN   1309 1347#
TENMIN . . . . . .  C ADDR   2801H   R   SEG=MAIN   1217 1219 1233 6320#
TEOLI. . . . . . .  C ADDR   2BD4H   R   SEG=MAIN   1550 1644 6823#
TEOLL. . . . . . .  C ADDR   2B49H   R   SEG=MAIN   1641 6808#
TEOLR. . . . . . .  C ADDR   2BDEH   R   SEG=MAIN   1546 6824#
TEOUT. . . . . . .  C ADDR   2B3FH   R   SEG=MAIN   6807#
TEPAR. . . . . . .  C ADDR   2B21H   R   SEG=MAIN   4758 6804#
TES19_2. . . . . .  C ADDR   2B17H   R   SEG=MAIN   552 2790 4245 4478 6802#
TES57_6. . . . . .  C ADDR   2B0DH   R   SEG=MAIN   2784 4240 4473 4754 6801#
TESKOR . . . . . .  C ADDR   2AD0H   R   SEG=MAIN   4735 6795#
TEST01 . . . . . .  C ADDR   25E2H   R   SEG=MAIN   5986# 6008
TEST02 . . . . . .  C ADDR   2611H   R   SEG=MAIN   6005 6007#
TEST04 . . . . . .  C ADDR   25F2H   R   SEG=MAIN   5993# 5995
TEST1. . . . . . .  C ADDR   25D8H   R   SEG=MAIN   5981# 5997 6015
TEST2. . . . . . .  C ADDR   260AH   R   SEG=MAIN   5986 6004#
TEST22 . . . . . .  C ADDR   1B98H   R   SEG=MAIN   4301 4308#
TEST23 . . . . . .  C ADDR   1B9DH   R   SEG=MAIN   4308 4311#
TEST3. . . . . . .  C ADDR   25FCH   R   SEG=MAIN   5988 5998#
TEST4. . . . . . .  C ADDR   25EAH   R   SEG=MAIN   5989# 6003
TEST5. . . . . . .  C ADDR   2614H   R   SEG=MAIN   6006 6009#
TEST7I . . . . . .  C ADDR   0ABCH   R   SEG=MAIN   1814 1817#
TEST9I . . . . . .  C ADDR   0AB5H   R   SEG=MAIN   1808 1814#
TESTAT . . . . . .  C ADDR   2BACH   R   SEG=MAIN   2841 3443 6818#
TESTRS . . . . . .  C ADDR   25D6H   R   SEG=MAIN   4229 5979#
TESTS. . . . . . .  C ADDR   1B8CH   R   SEG=MAIN   4303# 4310 4313
TETE11 . . . . . .  C ADDR   2AEFH   R   SEG=MAIN   4218 4745 6798#
TETE7. . . . . . .  C ADDR   2B03H   R   SEG=MAIN   4291 4751 6800#
TETE9. . . . . . .  C ADDR   2AF9H   R   SEG=MAIN   4748 6799#
TETESI . . . . . .  C ADDR   2ABCH   R   SEG=MAIN   3152 4728 6793#
TETESR . . . . . .  C ADDR   2AC6H   R   SEG=MAIN   4732 6794#
TEVICH . . . . . .  C ADDR   2A94H   R   SEG=MAIN   2486 2660 2668 3251 4639 6788#
TEWR . . . . . . .  C ADDR   2B65H   R   SEG=MAIN   2824 3457 6811#
TEXTT. . . . . . .  C ADDR   2A58H   R   SEG=MAIN   6207 6779#
TF0. . . . . . . .  B ADDR   0088H.5 A      145#
TF1. . . . . . . .  B ADDR   0088H.7 A      143#
TF2. . . . . . . .  B ADDR   00C8H.7 A      190#
TH0. . . . . . . .  D ADDR   008CH   A      28# 487
TH1. . . . . . . .  D ADDR   008DH   A      29# 549 554 4348 4350
TH2. . . . . . . .  D ADDR   00CDH   A      89# 2057 3020 4718
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      370# 1498 1499 1503 1504 1508 1509 1513 1514 5421 5422 5438 5845 5846
                                           5850 5851 5855 5856 5860 5861
TI0. . . . . . . .  B ADDR   0098H.1 A      159#
TIM. . . . . . . .  C ADDR   264DH   R   SEG=MAIN   6040#
TIM1 . . . . . . .  C ADDR   264FH   R   SEG=MAIN   6041# 6041
TIM2 . . . . . . .  C ADDR   2652H   R   SEG=MAIN   6022 6025 6032 6036 6044# 6079 6083 7034 7036
TIM3 . . . . . . .  C ADDR   2654H   R   SEG=MAIN   6045# 6045
TIZMRI . . . . . .  C ADDR   0EB6H   R   SEG=MAIN   2441# 2604
TL0. . . . . . . .  D ADDR   008AH   A      26# 488
TL1. . . . . . . .  D ADDR   008BH   A      27# 550
TL2. . . . . . . .  D ADDR   00CCH   A      88# 2058 3021 4719
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1485H   R   SEG=MAIN   3324 3336#
TMOD . . . . . . .  D ADDR   0089H   A      25# 485 513
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   161

TMR2RLH. . . . . .  D ADDR   00CBH   A      288# 500
TMR2RLL. . . . . .  D ADDR   00CAH   A      287# 499
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1AF3H   R   SEG=MAIN   4227 4232#
TOME14 . . . . . .  C ADDR   1B20H   R   SEG=MAIN   4232 4252#
TOME15 . . . . . .  C ADDR   1B38H   R   SEG=MAIN   4252 4264# 4269
TOME21 . . . . . .  C ADDR   1AEAH   R   SEG=MAIN   4216 4227#
TOSK19 . . . . . .  C ADDR   1CCBH   R   SEG=MAIN   4472 4478#
TOSTRO . . . . . .  C ADDR   0B83H   R   SEG=MAIN   1955 1958 1961 1964#
TOUTF. . . . . . .  C ADDR   1402H   R   SEG=MAIN   3265# 3268
TR0. . . . . . . .  B ADDR   0088H.4 A      146#
TR1. . . . . . . .  B ADDR   0088H.6 A      144# 556 4346 4351
TR2. . . . . . . .  B ADDR   00C8H.2 A      195#
TR9. . . . . . . .  C ADDR   257BH   R   SEG=MAIN   5482 5493 5501 5590 5603 5606 5627 5634 5636 5645 5649 5653 5677
                                           5691 5698 5700 5711 5728 5755 5784 5795 5802 5820 5873 5890 5896 5901#
                                           5925
TTOUT. . . . . . .  C ADDR   0FA5H   R   SEG=MAIN   2606# 2615
TX1. . . . . . . .  C ADDR   089EH   R   SEG=MAIN   1497# 1498
TX2. . . . . . . .  C ADDR   08A6H   R   SEG=MAIN   1502# 1503
TX3. . . . . . . .  C ADDR   08AEH   R   SEG=MAIN   1507# 1508
TX4. . . . . . . .  C ADDR   08B6H   R   SEG=MAIN   1512# 1513
TXBSY. . . . . . .  B ADDR   00F8H.3 A      233# 5389
TZ . . . . . . . .  C ADDR   2578H   R   SEG=MAIN   5894 5898#
UNPACK1. . . . . .  C ADDR   009EH   A      8162# 8356 8490 8620 8734
UNPACK2. . . . . .  C ADDR   00BAH   A      8187# 8357 8491 8621
UP1. . . . . . . .  C ADDR   0138H   A      8307# 8324
UP2. . . . . . . .  C ADDR   014BH   A      8327# 8345
UP2A . . . . . . .  C ADDR   0161H   A      8306 8343#
UPA. . . . . . . .  C ADDR   2830H   R   SEG=MAIN   6374# 6380
UPA1 . . . . . . .  C ADDR   2840H   R   SEG=MAIN   6392# 6398
UPA2 . . . . . . .  C ADDR   2820H   R   SEG=MAIN   6355# 6361
UPAA . . . . . . .  C ADDR   2D1BH   R   SEG=MAIN   7078# 7084
UPAA4. . . . . . .  C ADDR   288BH   R   SEG=MAIN   6453# 6459
UPAB . . . . . . .  C ADDR   289BH   R   SEG=MAIN   6470# 6476
UPAK . . . . . . .  C ADDR   282AH   R   SEG=MAIN   6371#
UPAK1. . . . . . .  C ADDR   2CF5H   R   SEG=MAIN   7045#
UPAK2. . . . . . .  C ADDR   281AH   R   SEG=MAIN   6352#
UPAK3. . . . . . .  C ADDR   283AH   R   SEG=MAIN   3919 4014 6389#
UPAK4. . . . . . .  C ADDR   2D15H   R   SEG=MAIN   3873 7075#
UPAKA. . . . . . .  C ADDR   2885H   R   SEG=MAIN   4622 6450#
UPAKB. . . . . . .  C ADDR   2895H   R   SEG=MAIN   4669 6467#
UPAV1. . . . . . .  C ADDR   1C3AH   R   SEG=MAIN   4405# 4411
UPAV2. . . . . . .  C ADDR   1CFDH   R   SEG=MAIN   4523# 4529
UPK1 . . . . . . .  C ADDR   2D07H   R   SEG=MAIN   7053 7056#
UPK2 . . . . . . .  C ADDR   2D08H   R   SEG=MAIN   7055 7057#
VICHMAX. . . . . .  C ADDR   21CAH   R   SEG=MAIN   4191 5242#
VICHMEAN . . . . .  C ADDR   1FD6H   R   SEG=MAIN   4199 4923#
VICHMIN. . . . . .  C ADDR   20D5H   R   SEG=MAIN   3724 4207 5079#
VICHR. . . . . . .  D ADDR   00B1H   A      401# 1267 1804 2483 2496 2634 2647 2749 2757 3156 3160 3168 3239 3305
                                           3415 3955 3963 3972 4212 4261 4282 4424 4613 4652 4684 4726 6599
VIG0 . . . . . . .  C ADDR   0B26H   R   SEG=MAIN   1899# 1901
VIG4 . . . . . . .  C ADDR   0B34H   R   SEG=MAIN   1910# 1912
VIOUT. . . . . . .  C ADDR   0F7CH   R   SEG=MAIN   2489 2579# 2607 2619 2624 2654 2662 2670 2693 2716 2725 2728 2761
                                           2774 2789 2795 2811 2826 2835 2843 2852 2866 2914 2917 2960 2974 2977 3264
                                           3265 3341 4297
VIOUTF . . . . . .  C ADDR   13FBH   R   SEG=MAIN   3262#
VIT2_10. . . . . .  C ADDR   0EE5H   R   SEG=MAIN   2469# 2477 2478
VODM11_15. . . . .  C ADDR   18B6H   R   SEG=MAIN   3944# 3962
VOLUME . . . . . .  D ADDR   00D5H   A      416# 2429 3886 5814 5958 5960 7118 7120
VV21_23. . . . . .  C ADDR   1B83H   R   SEG=MAIN   4288 4299#
VVCHIBL. . . . . .  C ADDR   29CEH   R   SEG=MAIN   2733 6652#
VVCHIF . . . . . .  C ADDR   29A9H   R   SEG=MAIN   6628# 6645
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   162

VVINTE . . . . . .  C ADDR   1817H   R   SEG=MAIN   3837 3865#
VVIZKO . . . . . .  C ADDR   1452H   R   SEG=MAIN   3261 3305#
VVKALI52 . . . . .  C ADDR   1CF0H   R   SEG=MAIN   4381 4507# 4559
VVMENU . . . . . .  C ADDR   1CA0H   R   SEG=MAIN   4388 4460#
VVNOL23. . . . . .  C ADDR   29C9H   R   SEG=MAIN   6649# 6653
VVNOL31. . . . . .  C ADDR   29C4H   R   SEG=MAIN   6647# 6649
VVNOL41. . . . . .  C ADDR   29C2H   R   SEG=MAIN   6645# 6647
VVOD2_10 . . . . .  C ADDR   184FH   R   SEG=MAIN   3424 3536 3637 3896#
VVOD43 . . . . . .  C ADDR   1A2EH   R   SEG=MAIN   4125 4132#
VVODM11_15 . . . .  C ADDR   1ACAH   R   SEG=MAIN   3944 4212#
VVOSTA . . . . . .  C ADDR   1A8BH   R   SEG=MAIN   4168 4187#
VVOSTAD. . . . . .  C ADDR   1A9FH   R   SEG=MAIN   4187 4195#
VVRR6. . . . . . .  C ADDR   0FFFH   R   SEG=MAIN   2652#
VV_52V . . . . . .  C ADDR   1C12H   R   SEG=MAIN   4362 4378#
WCOL . . . . . . .  B ADDR   00F8H.6 A      230#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 483 484
WORK . . . . . . .  D ADDR   00B8H   A      405# 1531 1533 1539 1555 1562 1577 1598 1603 1619 1850 1982 3509 3517
                                           3519 3549 3557 3559 3568 3576 3578 3585 3594 3596 3605 3613 3615 4950 4995
                                           4998 5007 5010 5022 5103 5121 5124 5178 5188 5194 5204 5208 5263 5280 5283
                                           5332 5340 5345 5353 5910 5918 5920 5983 6004
WR1. . . . . . . .  C ADDR   2CE2H   R   SEG=MAIN   7030# 7037
WRITE. . . . . . .  C ADDR   2CDFH   R   SEG=MAIN   718 6493 6495 6497 6499 6501 6503 6506 6508 6510 6513 6515 6517
                                           7028#
WRITED_X1. . . . .  C ADDR   2658H   R   SEG=MAIN   6050#
WRITE_X1 . . . . .  C ADDR   2657H   R   SEG=MAIN   6049#
WRPAGE . . . . . .  C ADDR   0480H   A      4344 4813 4915 9008#
WW5. . . . . . . .  C ADDR   0483H   A      9009# 9017
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 479 506
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 480
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 481 505
XCIKLWR. . . . . .  C ADDR   2BFCH   R   SEG=MAIN   933 946 948 950 952 954 956 959 961 963 995 997 999 1002 1004
                                           1006 1008 1011 1013 1015 1017 1019 1021 1023 1025 1028 1030 1032 1034 1084
                                           1086 1088 6831#
XTEMP. . . . . . .  N NUMB   000CH   A      7219# 7574 7575 7576 7577 7663 7665 7666 7668 7669 7671 7672 7674 7696
                                           7697 7698 7699 7717 7718 7722 7723 7726 7730 7731 7734 7738 7739 7743 7744
                                           7746 7747 7748 7750 7754 7755 7757 7758 7762 7763 7768 7769 7771 7772 7776
                                           7777 7782 7784 7785 7786
YBNUL. . . . . . .  C ADDR   1393H   R   SEG=MAIN   3199 3207#
YES. . . . . . . .  C ADDR   2F4AH   R   SEG=MAIN   7596 7600 7604 7608 7626# 7689
YES0KEY. . . . . .  C ADDR   02DAH   R   SEG=MAIN   750 762#
YES0KEY1 . . . . .  C ADDR   02E7H   R   SEG=MAIN   769# 776
YESAVP . . . . . .  C ADDR   07DDH   R   SEG=MAIN   1367 1393#
YESBUF . . . . . .  C ADDR   0BDBH   R   SEG=MAIN   2017 2022#
YESIND . . . . . .  C ADDR   0ABEH   R   SEG=MAIN   1803 1812 1816 1819#
YESPRD . . . . . .  C ADDR   0BD9H   R   SEG=MAIN   2016 2020#
YESTEST. . . . . .  C ADDR   26F2H   R   SEG=MAIN   6125 6157#
YESTT5 . . . . . .  C ADDR   0CA5H   R   SEG=MAIN   2136#
YESVICH. . . . . .  C ADDR   082EH   R   SEG=MAIN   1380 1436#
YESVI_KM . . . . .  C ADDR   1F3FH   R   SEG=MAIN   4760 4840#
YESVI_KR . . . . .  C ADDR   1EB7H   R   SEG=MAIN   4760# 4762
YST1 . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   551 555#
YST19. . . . . . .  C ADDR   0198H   R   SEG=MAIN   547 552#
Z01S . . . . . . .  C ADDR   2777H   R   SEG=MAIN   6269# 6271
Z05S . . . . . . .  C ADDR   2784H   R   SEG=MAIN   6278# 6280
Z100 . . . . . . .  C ADDR   2748H   R   SEG=MAIN   6233# 6235
Z15. . . . . . . .  C ADDR   2756H   R   SEG=MAIN   6245# 6247
Z1S. . . . . . . .  C ADDR   276AH   R   SEG=MAIN   6260# 6262
ZAPADC . . . . . .  C ADDR   2627H   R   SEG=MAIN   6018#
ZCMP . . . . . . .  C ADDR   2C7EH   R   SEG=MAIN   6937#
ZDIV . . . . . . .  C ADDR   2C4BH   R   SEG=MAIN   856 1139 4052 5841 6900#
ZER1 . . . . . . .  C ADDR   00B3H   A      8172 8176# 8231 8274
ZER2 . . . . . . .  C ADDR   00D4H   A      8198 8202#
ZMUL . . . . . . .  C ADDR   2C41H   R   SEG=MAIN   6895#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      319# 1727 4073 5049 5234 6908 6911 6914
ZNPLUS . . . . . .  C ADDR   02F1H   R   SEG=MAIN   729 778#
ZZ . . . . . . . .  C ADDR   2758H   R   SEG=MAIN   6246# 6246
A51 MACRO ASSEMBLER  AMP36_2                                                              11/02/2007 14:39:10 PAGE   163

Z_01S. . . . . . .  C ADDR   2773H   R   SEG=MAIN   2368 3066 4268 6002 6014 6267# 6770
Z_05S. . . . . . .  C ADDR   2780H   R   SEG=MAIN   2130 2131 2865 4192 4200 4208 6276#
Z_100. . . . . . .  C ADDR   2746H   R   SEG=MAIN   6232#
Z_15 . . . . . . .  C ADDR   2754H   R   SEG=MAIN   682 6244#
Z_1MS. . . . . . .  C ADDR   275DH   R   SEG=MAIN   769 6009 6251#
Z_1S . . . . . . .  C ADDR   2766H   R   SEG=MAIN   672 680 1428 2488 3725 3997 4114 4166 4465 4551 4651 4837 4838
                                           6258#
Z_5. . . . . . . .  C ADDR   274FH   R   SEG=MAIN   6054 6064 6239#
Z_9. . . . . . . .  C ADDR   2CDAH   R   SEG=MAIN   5391 7022#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
