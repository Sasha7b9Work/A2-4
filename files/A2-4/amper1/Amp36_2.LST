A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp36_2.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp36_2.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1     ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     
                +1     3     
                +1     4     
                +1     5     
                +1     6     
                +1     7     
                +1     8     
                +1     9     
                +1    10     
                +1    11     
                +1    12     
                +1    13     
                +1    14     
                +1    15     
  0080          +1    16     sfr P0       =  0x80;   /* PORT 0                                                  */   
  0081          +1    17     sfr SP       =  0x81;   /* STACK POINTER                                           */
  0082          +1    18     sfr DPL      =  0x82;   /* DATA POINTER - LOW BYTE                                 */
  0083          +1    19     sfr DPH      =  0x83;   /* DATA POINTER - HIGH BYTE                                */
  0084          +1    20     sfr P4       =  0x84;   /* PORT 4                                                          
                                                                                                    */
  0085          +1    21     sfr P5       =  0x85;   /* PORT 5                                                  */
  0086          +1    22     sfr P6       =  0x86;   /* PORT 6                                                          
                                                                                                    */                  
                                                                                                               
  0087          +1    23     sfr PCON     =  0x87;   /* POWER CONTROL                                           */
  0088          +1    24     sfr TCON     =  0x88;   /* TIMER CONTROL                                           */
  0089          +1    25     sfr TMOD     =  0x89;   /* TIMER MODE                                              */
  008A          +1    26     sfr TL0      =  0x8A;   /* TIMER 0 - LOW BYTE                                      */
  008B          +1    27     sfr TL1      =  0x8B;   /* TIMER 1 - LOW BYTE                                      */
  008C          +1    28     sfr TH0      =  0x8C;   /* TIMER 0 - HIGH BYTE                                     */   
  008D          +1    29     sfr TH1      =  0x8D;   /* TIMER 1 - HIGH BYTE                                     */
  008E          +1    30     sfr CKCON    =  0x8E;   /* CLOCK CONTROL                                           */
  008F          +1    31     sfr PSCTL    =  0x8F;   /* PROGRAM STORE R/W CONTROL                               */
  0090          +1    32     sfr P1       =  0x90;   /* PORT 1                                                  */
  0091          +1    33     sfr TMR3CN   =  0x91;   /* TIMER 3 CONTROL                                         */
  0092          +1    34     sfr TMR3RLL  =  0x92;   /* TIMER 3 RELOAD REGISTER - LOW BYTE                      */
  0093          +1    35     sfr TMR3RLH  =  0x93;   /* TIMER 3 RELOAD REGISTER - HIGH BYTE                     */
  0094          +1    36     sfr TMR3L    =  0x94;   /* TIMER 3 - LOW BYTE                                      */
  0095          +1    37     sfr TMR3H    =  0x95;   /* TIMER 3 - HIGH BYTE                                     */
  0096          +1    38     sfr P7           =  0x96;   /* PORT 7                                                  */
  0098          +1    39     sfr SCON0    =  0x98;   /* SERIAL PORT 0 CONTROL                                   */
  0099          +1    40     sfr SBUF0    =  0x99;   /* SERIAL PORT 0 BUFFER                                    */
  009A          +1    41     sfr SPI0CFG  =  0x9A;   /* SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION             */
  009B          +1    42     sfr SPI0DAT  =  0x9B;   /* SERIAL PERIPHERAL INTERFACE 0 DATA                      */
  009C          +1    43     sfr ADC1     =  0x9C;   /* ADC 1 DATA                                              */
  009D          +1    44     sfr SPI0CKR  =  0x9D;   /* SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL        */
  009E          +1    45     sfr CPT0CN   =  0x9E;   /* COMPARATOR 0 CONTROL                                    */
  009F          +1    46     sfr CPT1CN   =  0x9F;   /* COMPARATOR 1 CONTROL                                    */
  00A0          +1    47     sfr P2       =  0xA0;   /* PORT 2                                                  */
  00A1          +1    48     sfr EMI0TC   =  0xA1;   /* EMIF TIMING CONTROL                                     */
  00A3          +1    49     sfr EMI0CF   =  0xA3;   /* EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION          */
  00A4          +1    50     sfr P0MDOUT  =  0xA4;   /* PORT 0 OUTPUT MODE CONFIGURATION                        */
  00A5          +1    51     sfr P1MDOUT  =  0xA5;   /* PORT 1 OUTPUT MODE CONFIGURATION                        */
  00A6          +1    52     sfr P2MDOUT  =  0xA6;   /* PORT 2 OUTPUT MODE CONFIGURATION                        */
  00A7          +1    53     sfr P3MDOUT  =  0xA7;   /* PORT 3 OUTPUT MODE CONFIGURATION                        */
  00A8          +1    54     sfr IE       =  0xA8;   /* INTERRUPT ENABLE                                        */
  00A9          +1    55     sfr SADDR0   =  0xA9;   /* SERIAL PORT 0 SLAVE ADDRESS                             */
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     2

  00AA          +1    56     sfr ADC1CN   =  0xAA;   /* ADC 1 CONTROL                                           */
  00AB          +1    57     sfr ADC1CF   =  0xAB;   /* ADC 1 ANALOG MUX CONFIGURATION                          */
  00AC          +1    58     sfr AMX1SL   =  0xAC;   /* ADC 1 ANALOG MUX CHANNEL SELECT                         */
  00AD          +1    59     sfr P3IF     =  0xAD;   /* PORT 3 EXTERNAL INTERRUPT FLAGS                         */
  00AE          +1    60     sfr SADEN1   =  0xAE;   /* SERIAL PORT 1 SLAVE ADDRESS MASK                        */
  00AF          +1    61     sfr EMI0CN   =  0xAF;   /* EXTERNAL MEMORY INTERFACE CONTROL                       */
  00B0          +1    62     sfr P3       =  0xB0;   /* PORT 3                                                  */
  00B1          +1    63     sfr OSCXCN   =  0xB1;   /* EXTERNAL OSCILLATOR CONTROL                             */
  00B2          +1    64     sfr OSCICN   =  0xB2;   /* INTERNAL OSCILLATOR CONTROL                             */
  00B5          +1    65     sfr P74OUT   =  0xB5;   /* PORTS 4 - 7 OUTPUT MODE                                 */
  00B6          +1    66     sfr FLSCL    =  0xB6;   /* FLASH MEMORY TIMING PRESCALER                           */
  00B7          +1    67     sfr FLACL    =  0xB7;   /* FLASH ACESS LIMIT                                       */
  00B8          +1    68     sfr IP       =  0xB8;   /* INTERRUPT PRIORITY                                      */
  00B9          +1    69     sfr SADEN0   =  0xB9;   /* SERIAL PORT 0 SLAVE ADDRESS MASK                        */
  00BA          +1    70     sfr AMX0CF   =  0xBA;   /* ADC 0 MUX CONFIGURATION                                 */
  00BB          +1    71     sfr AMX0SL   =  0xBB;   /* ADC 0 MUX CHANNEL SELECTION                             */
  00BC          +1    72     sfr ADC0CF   =  0xBC;   /* ADC 0 CONFIGURATION                                     */
  00BD          +1    73     sfr P1MDIN   =  0xBD;   /* PORT 1 INPUT MODE                                       */
  00BE          +1    74     sfr ADC0L    =  0xBE;   /* ADC 0 DATA - LOW BYTE                                   */
  00BF          +1    75     sfr ADC0H    =  0xBF;   /* ADC 0 DATA - HIGH BYTE                                  */
  00C0          +1    76     sfr SMB0CN   =  0xC0;   /* SMBUS 0 CONTROL                                         */
  00C1          +1    77     sfr SMB0STA  =  0xC1;   /* SMBUS 0 STATUS                                          */
  00C2          +1    78     sfr SMB0DAT  =  0xC2;   /* SMBUS 0 DATA                                            */
  00C3          +1    79     sfr SMB0ADR  =  0xC3;   /* SMBUS 0 SLAVE ADDRESS                                   */
  00C4          +1    80     sfr ADC0GTL  =  0xC4;   /* ADC 0 GREATER-THAN REGISTER - LOW BYTE                  */
  00C5          +1    81     sfr ADC0GTH  =  0xC5;   /* ADC 0 GREATER-THAN REGISTER - HIGH BYTE                 */
  00C6          +1    82     sfr ADC0LTL  =  0xC6;   /* ADC 0 LESS-THAN REGISTER - LOW BYTE                     */
  00C7          +1    83     sfr ADC0LTH  =  0xC7;   /* ADC 0 LESS-THAN REGISTER - HIGH BYTE                    */
  00C8          +1    84     sfr T2CON    =  0xC8;   /* TIMER 2 CONTROL                                         */
  00C9          +1    85     sfr T4CON    =  0xC9;   /* TIMER 4 CONTROL                                         */
  00CA          +1    86     sfr RCAP2L   =  0xCA;   /* TIMER 2 CAPTURE REGISTER - LOW BYTE                     */
  00CB          +1    87     sfr RCAP2H   =  0xCB;   /* TIMER 2 CAPTURE REGISTER - HIGH BYTE                    */
  00CC          +1    88     sfr TL2      =  0xCC;   /* TIMER 2 - LOW BYTE                                      */
  00CD          +1    89     sfr TH2      =  0xCD;   /* TIMER 2 - HIGH BYTE                                     */
  00CF          +1    90     sfr SMB0CR   =  0xCF;   /* SMBUS 0 CLOCK RATE                                      */
  00D0          +1    91     sfr PSW      =  0xD0;   /* PROGRAM STATUS WORD                                     */
  00D1          +1    92     sfr REF0CN   =  0xD1;   /* VOLTAGE REFERENCE 0 CONTROL                             */
  00D2          +1    93     sfr DAC0L    =  0xD2;   /* DAC 0 REGISTER - LOW BYTE                               */
  00D3          +1    94     sfr DAC0H    =  0xD3;   /* DAC 0 REGISTER - HIGH BYTE                              */
  00D4          +1    95     sfr DAC0CN   =  0xD4;   /* DAC 0 CONTROL                                           */
  00D5          +1    96     sfr DAC1L    =  0xD5;   /* DAC 1 REGISTER - LOW BYTE                               */
  00D6          +1    97     sfr DAC1H    =  0xD6;   /* DAC 1 REGISTER - HIGH BYTE                              */
  00D7          +1    98     sfr DAC1CN   =  0xD7;   /* DAC 1 CONTROL                                           */
  00D8          +1    99     sfr PCA0CN   =  0xD8;   /* PCA 0 COUNTER CONTROL                                   */
  00D9          +1   100     sfr PCA0MD   =  0xD9;   /* PCA 0 COUNTER MODE                                      */
  00DA          +1   101     sfr PCA0CPM0 =  0xDA;   /* CONTROL REGISTER FOR PCA 0 MODULE 0                     */
  00DB          +1   102     sfr PCA0CPM1 =  0xDB;   /* CONTROL REGISTER FOR PCA 0 MODULE 1                     */
  00DC          +1   103     sfr PCA0CPM2 =  0xDC;   /* CONTROL REGISTER FOR PCA 0 MODULE 2                     */
  00DD          +1   104     sfr PCA0CPM3 =  0xDD;   /* CONTROL REGISTER FOR PCA 0 MODULE 3                     */
  00DE          +1   105     sfr PCA0CPM4 =  0xDE;   /* CONTROL REGISTER FOR PCA 0 MODULE 4                     */
  00E0          +1   106     sfr ACC      =  0xE0;   /* ACCUMULATOR                                             */
  00E1          +1   107     sfr XBR0     =  0xE1;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 0               */
  00E2          +1   108     sfr XBR1     =  0xE2;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 1               */
  00E3          +1   109     sfr XBR2     =  0xE3;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 2               */
  00E4          +1   110     sfr RCAP4L   =  0xE4;   /* TIMER 4 CAPTURE REGISTER - LOW BYTE                     */
  00E5          +1   111     sfr RCAP4H   =  0xE5;   /* TIMER 4 CAPTURE REGISTER - HIGH BYTE                    */
  00E6          +1   112     sfr EIE1     =  0xE6;   /* EXTERNAL INTERRUPT ENABLE 1                             */
  00E7          +1   113     sfr EIE2     =  0xE7;   /* EXTERNAL INTERRUPT ENABLE 2                             */
  00E8          +1   114     sfr ADC0CN   =  0xE8;   /* ADC 0 CONTROL                                           */   
  00E9          +1   115     sfr PCA0L    =  0xE9;   /* PCA 0 TIMER - LOW BYTE                                  */   
  00EA          +1   116     sfr PCA0CPL0 =   0xEA;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE  */
  00EB          +1   117     sfr PCA0CPL1 =   0xEB;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE  */
  00EC          +1   118     sfr PCA0CPL2 =   0xEC;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE  */
  00ED          +1   119     sfr PCA0CPL3 =   0xED;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE  */
  00EE          +1   120     sfr PCA0CPL4 =   0xEE;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE  */
  00EF          +1   121     sfr RSTSRC   =   0xEF;   /* RESET SOURCE                                            */
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     3

  00F0          +1   122     sfr B        =   0xF0;   /* B REGISTER                                              */
  00F1          +1   123     sfr SCON1    =  0xF1;   /* SERIAL PORT 1 CONTROL                                   */
  00F2          +1   124     sfr SBUF1    =  0xF2;   /* SERAIL PORT 1 DATA                                      */
  00F3          +1   125     sfr SADDR1   =  0xF3;   /* SERAIL PORT 1                                           */ 
  00F4          +1   126     sfr TL4      =  0xF4;   /* TIMER 4 DATA - LOW BYTE                                 */
  00F5          +1   127     sfr TH4      =  0xF5;   /* TIMER 4 DATA - HIGH BYTE                                */
  00F6          +1   128     sfr EIP1     =   0xF6;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 1                  */
  00F7          +1   129     sfr EIP2     =   0xF7;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 2                  */
  00F8          +1   130     sfr SPI0CN   =   0xF8;   /* SERIAL PERIPHERAL INTERFACE 0 CONTROL                   */  
  00F9          +1   131     sfr PCA0H    =   0xF9;          /* PCA 0 TIMER - HIGH BYTE                                 
                             */
  00FA          +1   132     sfr PCA0CPH0 =   0xFA;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE 
                             */
  00FB          +1   133     sfr PCA0CPH1 =   0xFB;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE 
                             */
  00FC          +1   134     sfr PCA0CPH2 =   0xFC;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE 
                             */
  00FD          +1   135     sfr PCA0CPH3 =   0xFD;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE 
                             */
  00FE          +1   136     sfr PCA0CPH4 =   0xFE;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE 
                             */   
  00FF          +1   137     sfr WDTCN    =   0xFF;          /* WATCHDOG TIMER CONTROL                                  
                             */
                +1   138             
                +1   139     
                +1   140     
                +1   141     
                +1   142     
  008F          +1   143     sbit TF1   = TCON ^ 7;              /* TIMER 1 OVERFLOW FLAG      */
  008E          +1   144     sbit TR1   = TCON ^ 6;              /* TIMER 1 ON/OFF CONTROL     */
  008D          +1   145     sbit TF0   = TCON ^ 5;              /* TIMER 0 OVERFLOW FLAG      */
  008C          +1   146     sbit TR0   = TCON ^ 4;              /* TIMER 0 ON/OFF CONTROL     */
  008B          +1   147     sbit IE1   = TCON ^ 3;              /* EXT. INTERRUPT 1 EDGE FLAG */
  008A          +1   148     sbit IT1   = TCON ^ 2;              /* EXT. INTERRUPT 1 TYPE      */
  0089          +1   149     sbit IE0   = TCON ^ 1;              /* EXT. INTERRUPT 0 EDGE FLAG */
  0088          +1   150     sbit IT0   = TCON ^ 0;              /* EXT. INTERRUPT 0 TYPE      */
                +1   151     
                +1   152     
  009F          +1   153     sbit SM00  = SCON0 ^ 7;             /* SERIAL MODE CONTROL BIT 0           */   
  009E          +1   154     sbit SM10  = SCON0 ^ 6;             /* SERIAL MODE CONTROL BIT 1           */
  009D          +1   155     sbit SM20  = SCON0 ^ 5;             /* MULTIPROCESSOR COMMUNICATION ENABLE */
  009C          +1   156     sbit REN0  = SCON0 ^ 4;             /* RECEIVE ENABLE                      */
  009B          +1   157     sbit TB80  = SCON0 ^ 3;             /* TRANSMIT BIT 8                      */
  009A          +1   158     sbit RB80  = SCON0 ^ 2;             /* RECEIVE BIT 8                       */
  0099          +1   159     sbit TI0   = SCON0 ^ 1;             /* TRANSMIT INTERRUPT FLAG             */
  0098          +1   160     sbit RI0   = SCON0 ^ 0;             /* RECEIVE INTERRUPT FLAG              */
                +1   161     
                +1   162     
  00AF          +1   163     sbit EA    = IE ^ 7;                /* GLOBAL INTERRUPT ENABLE      */  
  00AD          +1   164     sbit ET2   = IE ^ 5;                /* TIMER 2 INTERRUPT ENABLE     */
  00AC          +1   165     sbit ES0   = IE ^ 4;                /* UART0 INTERRUPT ENABLE       */
  00AB          +1   166     sbit ET1   = IE ^ 3;                /* TIMER 1 INTERRUPT ENABLE     */
  00AA          +1   167     sbit EX1   = IE ^ 2;                /* EXTERNAL INTERRUPT 1 ENABLE  */
  00A9          +1   168     sbit ET0   = IE ^ 1;                /* TIMER 0 INTERRUPT ENABLE     */
  00A8          +1   169     sbit EX0   = IE ^ 0;                /* EXTERNAL INTERRUPT 0 ENABLE  */
                +1   170     
                +1   171     
  00BD          +1   172     sbit PT2   = IP ^ 5;                /* TIMER 2 PRIORITY                                 */ 
                                  
  00BC          +1   173     sbit PS    = IP ^ 4;                /* SERIAL PORT PRIORITY                             */
  00BB          +1   174     sbit PT1   = IP ^ 3;                /* TIMER 1 PRIORITY                                 */
  00BA          +1   175     sbit PX1   = IP ^ 2;                /* EXTERNAL INTERRUPT 1 PRIORITY    */
  00B9          +1   176     sbit PT0   = IP ^ 1;                /* TIMER 0 PRIORITY                                 */
  00B8          +1   177     sbit PX0   = IP ^ 0;                /* EXTERNAL INTERRUPT 0 PRIORITY    */              
                +1   178     
                +1   179     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     4

  00C7          +1   180     sbit BUSY     =   SMB0CN ^ 7;       /* SMBUS 0 BUSY                    */
  00C6          +1   181     sbit ENSMB    =   SMB0CN ^ 6;       /* SMBUS 0 ENABLE                  */
  00C5          +1   182     sbit STA      =   SMB0CN ^ 5;       /* SMBUS 0 START FLAG              */
  00C4          +1   183     sbit STO      =   SMB0CN ^ 4;       /* SMBUS 0 STOP FLAG               */
  00C3          +1   184     sbit SI       =   SMB0CN ^ 3;       /* SMBUS 0 INTERRUPT PENDING FLAG  */
  00C2          +1   185     sbit AA       =   SMB0CN ^ 2;       /* SMBUS 0 ASSERT/ACKNOWLEDGE FLAG */
  00C1          +1   186     sbit SMBFTE   =   SMB0CN ^ 1;       /* SMBUS 0 FREE TIMER ENABLE       */
  00C0          +1   187     sbit SMBTOE   =   SMB0CN ^ 0;       /* SMBUS 0 TIMEOUT ENABLE          */
                +1   188     
                +1   189     
  00CF          +1   190     sbit TF2   = T2CON ^ 7;             /* TIMER 2 OVERFLOW FLAG        */
  00CE          +1   191     sbit EXF2  = T2CON ^ 6;             /* EXTERNAL FLAG                */
  00CD          +1   192     sbit RCLK0 = T2CON ^ 5;             /* UART0 RX CLOCK SOURCE        */
  00CC          +1   193     sbit TCLK0 = T2CON ^ 4;             /* UART0 TX CLOCK SOURCE        */
  00CB          +1   194     sbit EXEN2 = T2CON ^ 3;             /* TIMER 2 EXTERNAL ENABLE FLAG */  
  00CA          +1   195     sbit TR2   = T2CON ^ 2;             /* TIMER 2 ON/OFF CONTROL       */
  00C9          +1   196     sbit CT2   = T2CON ^ 1;             /* TIMER OR COUNTER SELECT      */
  00C8          +1   197     sbit CPRL2 = T2CON ^ 0;             /* CAPTURE OR RELOAD SELECT     */
                +1   198     
                +1   199     
  00D7          +1   200     sbit CY    = PSW ^ 7;               /* CARRY FLAG              */       
  00D6          +1   201     sbit AC    = PSW ^ 6;               /* AUXILIARY CARRY FLAG    */
  00D5          +1   202     sbit F0    = PSW ^ 5;               /* USER FLAG 0             */
  00D4          +1   203     sbit RS1   = PSW ^ 4;               /* REGISTER BANK SELECT 1  */
  00D3          +1   204     sbit RS0   = PSW ^ 3;               /* REGISTER BANK SELECT 0  */
  00D2          +1   205     sbit OV    = PSW ^ 2;               /* OVERFLOW FLAG           */
  00D1          +1   206     sbit F1    = PSW ^ 1;               /* USER FLAG 1             */
  00D0          +1   207     sbit P     = PSW ^ 0;               /* ACCUMULATOR PARITY FLAG */
                +1   208     
                +1   209     
  00DF          +1   210     sbit CF    =   PCA0CN ^ 7;          /* PCA 0 COUNTER OVERFLOW FLAG   */
  00DE          +1   211     sbit CR    =   PCA0CN ^ 6;          /* PCA 0 COUNTER RUN CONTROL BIT */
  00DC          +1   212     sbit CCF4  =   PCA0CN ^ 4;          /* PCA 0 MODULE 4 INTERRUPT FLAG */
  00DB          +1   213     sbit CCF3  =   PCA0CN ^ 3;          /* PCA 0 MODULE 3 INTERRUPT FLAG */
  00DA          +1   214     sbit CCF2  =   PCA0CN ^ 2;          /* PCA 0 MODULE 2 INTERRUPT FLAG */
  00D9          +1   215     sbit CCF1  =   PCA0CN ^ 1;          /* PCA 0 MODULE 1 INTERRUPT FLAG */
  00D8          +1   216     sbit CCF0  =   PCA0CN ^ 0;          /* PCA 0 MODULE 0 INTERRUPT FLAG */
                +1   217     
                +1   218     
  00EF          +1   219     sbit AD0EN     =   ADC0CN ^ 7;      /* ADC 0 ENABLE                              */
  00EE          +1   220     sbit AD0TM     =   ADC0CN ^ 6;      /* ADC 0 TRACK MODE                          */
  00ED          +1   221     sbit AD0INT    =   ADC0CN ^ 5;      /* ADC 0 CONVERISION COMPLETE INTERRUPT FLAG */
  00EC          +1   222     sbit AD0BUSY   =   ADC0CN ^ 4;      /* ADC 0 BUSY FLAG                           */
  00EB          +1   223     sbit AD0CM1    =   ADC0CN ^ 3;      /* ADC 0 START OF CONVERSION MODE BIT 1      */
  00EA          +1   224     sbit AD0CM0    =   ADC0CN ^ 2;      /* ADC 0 START OF CONVERSION MODE BIT 0      */
  00E9          +1   225     sbit AD0WINT   =   ADC0CN ^ 1;      /* ADC 0 WINDOW COMPARE INTERRUPT FLAG       */
  00E8          +1   226     sbit AD0LJST   =   ADC0CN ^ 0;      /* ADC 0 RIGHT JUSTIFY DATA BIT              */
                +1   227     
                +1   228     
  00FF          +1   229     sbit SPIF     =   SPI0CN ^ 7;       /* SPI 0 INTERRUPT FLAG                     */
  00FE          +1   230     sbit WCOL     =   SPI0CN ^ 6;       /* SPI 0 WRITE COLLISION FLAG       */
  00FD          +1   231     sbit MODF     =   SPI0CN ^ 5;       /* SPI 0 MODE FAULT FLAG            */
  00FC          +1   232     sbit RXOVRN   =   SPI0CN ^ 4;       /* SPI 0 RX OVERRUN FLAG            */
  00FB          +1   233     sbit TXBSY    =   SPI0CN ^ 3;       /* SPI 0 TX BUSY FLAG                       */
  00FA          +1   234     sbit SLVSEL   =   SPI0CN ^ 2;       /* SPI 0 SLAVE SELECT                       */
  00F9          +1   235     sbit MSTEN    =   SPI0CN ^ 1;       /* SPI 0 MASTER ENABLE                      */
  00F8          +1   236     sbit SPIEN    =   SPI0CN ^ 0;       /* SPI 0 SPI ENABLE                         */         
                                          
                     237     
                     238     ;?from .work
                     239     
                     240     ;+        CSEG AT 0
                     241              
                     242     NAME    MAIN
                     243                       ; EXTRN CODE(end1)
                     244                       ; EXTRN CODE(numb)
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     5

                     245                       ; EXTRN CODE(SOROS)
                     246                       ; EXTRN CODE(Abegin)
                     247     
                     248                     ;PUBLIC gener,bitmas,bitrs,bitznak 
                     249                     ;PUBLIC meff
                     250                     ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 251             org 0h;    cseg AT 0
0000 020000   F      252                     jmp     begin   ;Main        ; Locate a jump to the start of code at 
0003                 253             org 3
0003 32              254                     reti   
000B                 255             org 0bh
000B 32              256                     reti
0013                 257             org 13h
0013 32              258                     reti
001B                 259             org 1bh
                     260     ;? timer1
001B 32              261                     reti
0023                 262             org 23h
0023 020000   F      263                     jmp     rs_byte ;!reti
002B                 264             org 2bh
002B 020000   F      265                     jmp     inter2  ;Timer2, IE.5,IP.5(ET2,PT2)
0033                 266             org 33h
0033 32              267                     reti
003B                 268             org 3bh
003B 32              269                     reti
0043                 270             org 43h
0043 32              271                     reti
004B                 272             org 4bh
004B 32              273                     reti
0053                 274             org 53h
0053 32              275                     reti
005B                 276             org 5bh
005B 32              277                     reti 
0063                 278             org 63h
0063 32              279                     reti
006B                 280             org 6bh
006B 32              281                     reti
0073                 282             org 73h
0073 32              283                     reti
0093                 284             org     93h
0093 020000   F      285                     jmp             keyb1           ;IE6
009B                 286             org     9bh
009B 020000   F      287                     jmp             keyb2      ;IE7
                     288     
  00CA               289     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               290     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     291      
                     292     Main         SEGMENT  CODE
                     293     
----                 294                     DSEG
                     295       
  0040               296     bufind  DATA    40h;буффер индикации 12byte
  004F               297     abin            DATA    4fh     ;4byte long~adec's digits
  0053               298     adec            DATA    53h     ;53h..5dh 10byte
  006E               299     chmas           DATA    6eh     ;счетчик л-тов незаполн массива
  006F               300     mabin           DATA    6fh
  0077               301     reacp           DATA    77h     ;результат чтения асп 4byte int (hex)
  003D               302     chkl            DATA    3dh     ;счетчик задержки клавиатуры 2bait                         
  003F               303     chmasN  DATA    3fh     ;n=2,n=10 суммирование n значений       =20(27.12.06)
  003C               304     savba           DATA    3ch     ;сохр байта индикации при миганиии      
  003B               305     movrig      DATA        3bh     ;крайне правое положение
  003A               306     movleft     DATA        3ah     ;крайне левое положение                  
  0039               307     nuerr           DATA    39h     ;номер ошибки (для интерфейса)  
  0038               308     nblok           DATA    38h     ;номер введенного блока
  0037               309     nelem           DATA    37h     ;номер лемента в блоке 0..200
  0036               310     saus            DATA    36h     ;сохр упр слово
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     6

  0034               311     sadiap  DATA    34H     ;сохр диапазон на кот проходила запись блока1
  0033               312     chind2  DATA    33h     ;счетчик индикации
  0032               313     sadiap2 DATA    32h     ;сохр диапазон на кот проходила запись блока2
  0031               314     sadiap3 DATA    31h     ;сохр диапазон на кот проходила запись блока3
  0030               315     sadiap4 DATA    30h     ;сохр диапазон на кот проходила запись блока4
                     316     ;DATA           2fh
                     317     ;;;;;
  0020               318     cellbit         DATA    20h
  0000               319     bitznak         BIT     cellbit.0       ;20.0           
  0001               320     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               321     znmat                   BIT     cellbit.2       ;20.2
  0003               322     bitrs                   BIT     cellbit.3       ;20.3
  0004               323     bitizm          BIT     cellbit.4       ;20.4 вкл реж измерения
  0005               324     bitavp          BIT     cellbit.5       ;20.5  бит режима avp
  0006               325     bitvi11         BIT     cellbit.6       ;20.6   бит нажатия ввод режима вычислить R!!!
  0007               326     bitzus          BIT     cellbit.7       ;20.7;флаг задержки     после установки us      
                     327     
  0021               328     cellbit1                DATA    21h
                     329     ;?bitbuf                BIT     cellbit1.0      ;21.0   
  0008               330     speed_rs                BIT     cellbit1.0      ;?21.0
                     331     
  0009               332     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               333     bitbon          BIT     cellbit1.2      ;21.2  буфер вкл
  000B               334     bitmem          BIT     cellbit1.3      ;21.3 нажата кн память
                     335     ;bmem11         BIT     cellbit1.4      ;21.4    бит ПАМ11
  000D               336     bifl_kt         BIT     cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     337     ;bmem13         BIT     cellbit1.6      ;21.6            
  000F               338     bitnul          BIT     cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     339     
  0022               340     cellbit2                DATA    22h
  0010               341     bitt2                   BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               342     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               343     bitklb          BIT     cellbit2.2      ;22.2  признак калибровки
  0013               344     bitv19          BIT     cellbit2.3      ;22.3   бит установки скор итерфейса 19.6
  0014               345     bitvich         BIT     cellbit2.4      ;22.4  1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               346     biteizm         BIT     cellbit2.5      ;22.5   признак теста измерения 
  0016               347     bitpar          BIT     cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               348     bitoll          BIT     cellbit2.7      ;22.7 бит перегрузки
                     349     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     350     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     351     ;и выдает т.н. буфер индикации  
  0023               352     cellbit3                DATA    23h
  0018               353     knizm                   BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               354     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               355     bitakt          BIT     cellbit3.2      ;22.2  бит такта
  001B               356     bitznB          BIT     cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               357     bitprer         BIT     cellbit3.4      ;22.4    
                     358     ;bit                    BIT             cellbit3.5      ;22.5    
                     359     ;bit                    BIT             cellbit3.6      ;22.6            
                     360     ;bit                    BIT             cellbit3.7      ;22.7
                     361     
  000C               362     is_2            BIT     cellbit1.4      ;бит 'to RS direct out'
  000E               363     is_mem  BIT     cellbit1.6      ;21.6            
  001F               364     is_izm  BIT     cellbit3.7
  001D               365     is_cmd  BIT     cellbit3.5
  001E               366     is_rs           BIT     cellbit3.6      ;out rez_A3
  00DB               367     buf_in  DATA    0DBh    ;4
  0024               368     cnt_out DATA    24h
  0025               369     cnt_in  DATA    25h
  0026               370     p_out           DATA    26h     ;??
  0027               371     p_in            DATA    27h
  004E               372     cmd_rez DATA    4Eh
  0098               373     RI              BIT     SCON0.0
  0099               374     TI              BIT     SCON0.1
                     375     
                     376     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     7

  005E               377     rez_Ame data 5eh;float   (РЕЗ1-AN)*K
                     378     ;hex
  0062               379     rez_A           data 62h        ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               380     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               381     rez_A0  data 6ah        ;рез изм по нажатию кн НУЛЬ
  007B               382     rez_A2  data 7bh        ; A2
  0098               383     chinkor data  98h       ;80h,счетчик интервала коррекции  2byte
  0081               384     chavt           data  81h       ;счетчик автокалибровки  2byte
  0083               385     chdel           data  83h       ; счетчик задержки
                     386     ;float
  0084               387     kor0_AN data  84h       ;4byte  AN      результат коррекции 0
  0088               388     rezAp           data  88h       ;4byte  A+
  008C               389     rezAm           data  8ch       ;4byte  A-
  0090               390     koefKp  data  90h       ;4byte  K+
  0094               391     koefKm  data  94h       ;4byte  K-
                     392     ;hex 
  009A               393     parT            data  9ah       ;параметр времени измерения
  009B               394     chbefore        data  9bh       ;счетчик предварительного суммирования
  009C               395     rez_A3          data  9ch       ;A3
                     396     ;FLOAT
  00A0               397     koefKD  data  0a0h      ;KD кофф диапазона
  00A4               398     rez_Ak  data  0a4h      ;Ak
  00A8               399     parol           data  0a8h      ;храним в памяти пароль
  00AC               400     chind           data  0ach      ;счетчик индикации
                     401     ;chbuf  data  0adh       ;счетчик периода загрузки в буфер и интерфейс
  00AE               402     diap            data  0aeh      ;номер диапазона
  00AF               403     parN            data  0afh      ;N  пар разрядности индикатора
  00B0               404     level           data  0b0h      ;уровень в меню, выч    ,Tизм
  00B1               405     vichR           data  0b1h      ;параметр =11,12,13,21          state of menu VychR
  00B2               406     marker  data  0b2h      ;номер мигающего знакоместа
  00B3               407     summa           data  0b3h      ;ячейка для суммирования        rez_A
  00B7               408     load            data  0b7h      ;яч для загрузки текстов на индикатор
  00B8               409     work            data  0b8h      ;рабочая ячейка
  00BC               410     konstA  data  0bch      ;введенная с крана константа A
                     411     ;konstB data  0c0h       ;введенная с крана константа B
  00C0               412     saven_bl2       data    0c0h    ;копия адреса последней записанной ячейки блока2
  00C2               413     saven_bl3       data  0c2h      ;копия адреса последней записанной ячейки блока3 
                     414                ;c4 1bait
  00C5               415     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               416     rez_R           data    0c9h    ;рез вычисления R 4baita
  00CD               417     interva data  0cdh      ;значение интервала (запись)2baita
  00CF               418     chbuf           data  0cfh      ;счетчик периода загрузки в буфер и интерфейс
  00D3               419     saven_bl        data  0d3h      ;номер ячейки в блоке 2 baita
  00D5               420     volume  data    0d5h    ;объем блока 2 baita
  00D6               421     chblok  data    0d6h    ;volume;кол измерений блока
  00D7               422     copy_hl data  0d7h      ;адрес ячейки блока для просмотра 
  00D9               423     saven_bl4       data  0d9h      ;копия адреса последней записанной ячейки блока4
                     424     ;data           0dbh e0h-граница стека
                     425     
                     426     ;внешнее ОЗУ 64K
                     427     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     428     ;ячейку  стирается целая страница 0..ffh рпзу
                     429     ;               XSEG AT 100h
                     430             PUBLIC    MASS0
  0100               431     MASS0  xdata 0100h;     скользящий массив измерения
  0104               432     MASS1  xdata 0104h;
  0108               433     MASS2  xdata 0108h;
  010C               434     MASS3  xdata 010ch;
  0110               435     MASS4  xdata 0110h;
  0114               436     MASS5  xdata 0114h;
  0118               437     MASS6  xdata 0118h;
  011C               438     MASS7  xdata 011ch;
  0120               439     MASS8  xdata 0120h;
  0124               440     MASS9  xdata 0124h;
  0128               441     MASS10  xdata 0128h;
  012C               442     MASS11  xdata 012ch;
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     8

  0130               443     MASS12  xdata 0130h;
  0134               444     MASS13  xdata 0134h;
  0138               445     MASS14  xdata 0138h;
  013C               446     MASS15  xdata 013ch;
  0140               447     MASS16  xdata 0140h;
  0144               448     MASS17  xdata 0144h;
  0148               449     MASS18  xdata 0148h;
  014C               450     MASS19  xdata 014ch;
  0E00               451     chbuf1  xdata 0e00h;счетчик буфера 1
                     452     ;xdata  0e04
  0000               453                     rr0     EQU     00
  0001               454                     rr1     equ     01
  0006               455                     rr6   equ       06
  0002               456                     rr2     equ     02
  0003               457                     rr3     equ     03
  0007               458                     rr7   equ       07
  0008               459                     r8      equ     08
  0009               460                     r9      equ     09
  000A               461                     r10     equ     10
  000B               462                     r11   equ       11
                     463     
----                 464                  rseg     Main         ; Switch to this code segment.
                     465     
                     466                  using    0            ; Specify register bank for the following
                     467     
0100                 468             org 100h
                     469     ;$EJECT
                     470     
0100 7581E0          471     begin:  mov             sp, #0e0h               ;?8
                     472     
0103 75E900          473                     mov             PCA0L,#00;=0x00;
0106 75D900          474                     mov             PCA0MD,#00;= 0x00;
0109 75A41F          475                     mov             P0MDOUT,#1fh;=0x1f;
010C 75A5CC          476                     mov             P1MDOUT,#0cch;86h;8fh;=0x8f;
010F 75A600          477                     mov             P2MDOUT,#00;=0x00;
                     478             
0112 75A73F          479                     mov             P3MDOUT,#3fh;
0115 75B5FF          480                     mov             P74OUT ,#0ffh;=0xff;
0118 75D103          481                     mov             REF0CN,#03h;=0x03;
                     482             
011B 75E114          483                     mov             XBR0,#14h;= 0x14;
011E 75E200          484                     mov             XBR1,#00; =0x00;
0121 75E300          485                     mov             XBR2,#00;=0x00
0124 75B0C0          486                     mov             P3,#0c0h
0127 75FFDE          487                     mov             WDTCN,#0deh;=0xde;запрет работы WDT
012A 75FFAD          488                     mov             WDTCN,#0adh;=0xad;                                   
012D 758922          489                     mov             TMOD,#22h;=0x22;        регистр режимов
0130 758E30          490                     mov             CKCON,#30h;=0x30; сист частота/12     
0133 758CF9          491                     mov             TH0,#0f9h;=0xf9;  Установка таймера
0136 758AF9          492                     mov             TL0,#0f9h;=0xf9; 
0139 75E680          493                     mov             EIE1,#80h;=0x80;
                     494     
013C 75D480          495                     mov             DAC0CN,#80h;=0x80;
013F 75D780          496                     mov             DAC1CN,#80h;=0x80;
0142 75B167          497                     mov             OSCXCN,#67h;=0x67;
                     498     
                     499     
0145                 500     gener:  ;+mov           a, oscxcn
                     501             ;+cjne  a,#11100111b,gener      ;?E7
0145 75B288          502                     mov             OSCICN,#88h;=0x84;
0148 75CA00          503                     mov             TMR2RLL,#0;=0;
014B 75CBD1          504                     mov             TMR2RLH,#0d1h;=0xd1;
                     505       
014E D28E            506                     setb    TCON.6                  ;регистр управления
0150 D28C            507                     setb            tcon.4
0152 75EF00          508                     mov             RSTSRC,#0;=00   ;//источники сброса 
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE     9

0155 75E340          509                     mov             XBR2,#40h
0158 75E10E          510                     mov             XBR0,#0eh;06h;16h
015B 75F803          511                     mov             SPI0CN,#03
015E 759D31          512                     mov             spi0ckr,#31H;;;;;;;;#04
                     513     ;установка скорости
0161 759850          514                     mov             SCON0,#50h;01010000;скорость обмена определяется таймером1
0164 758780          515                     mov             PCON,#10000000b;удвоенная скорость передачи SMOD0=1
0167 758E10          516                     mov             CKCON,#00010000b;TIM=1                  ? was 30h
016A 758920          517                     mov             TMOD,#00100000b;реж2 внутр ист синхр ? was 22h
016D 758840          518                     mov             TCON,#01000000b;счетчик запущен ?.4,.6 was set
0170 75D900          519                     mov             PCA0MD,#00              ;PCA 
0173 75DA00          520                     mov             PCA0CPM0,#00000000b;00000110b;01000010b;
0176 75EA00          521                     mov             PCA0CPL0,#00
0179 75FA9C          522                     mov             PCA0CPH0,#9ch;регулировка звука 088h;90h
017C 75D840          523                     mov             PCA0CN,#40h
017F 75C800          524                     mov             T2CON,#00
0182 758DF4          525                     mov     TH1,#244        ;220~19600
0185 D28E            526                     setb    TR1     ;start Timer1
                     527     
                     528     ;?      mov   SBUF0,#37h
                     529     
                     530     ;       mov     3,#33
                     531     ;       mov     r2,#30
                     532     ;       mov     r0,#0DAh
                     533     
                     534     ;debug: mov     A,r2
                     535     ;               mov     @r0,A
                     536     ;               inc     r2
                     537     ;               inc     r0
                     538     ;               djnz    3,debug ;jmp    debug   ;interrupt debug
                     539     
                     540     
                     541     ;       mov     SBUF,#7
                     542     ;       jnb     TI,$
                     543     ;       clr     TI
                     544     
                     545     ;               mov     IE,#90h ;RS, ?Tim1
                     546     
                     547     ;?              mov             r2,#50h                 ;57.6->19.2
                     548     ;               mov             r3,#2ch
                     549     ;               call    re4byte                 ;502ch 1 bait skor
                     550     ;               mov             a,r8
                     551     ;?              cjne            a,#00,yst19
0187 C213            552                     clr             bitv19                  ;57.6
0189 758DF4          553                     mov             TH1,#244
018C 758BFD          554                     mov             TL1,#0FDh
018F 8008            555                     jmp             yst1
0191 900000   F      556     yst19:  mov     dptr,#teS19_2
0194 D213            557                     setb    bitv19                  ;19,2
0196 758DDC          558                     mov     TH1,#220
0199                 559     yst1:
0199 D28E            560                     setb    TR1     ;?start Timer1
019B 75E730          561                     mov             EIE2,#30H;00110000
                     562             ;       mov             EIP2,#30H
                     563     
                     564     ;       mov     p_in,#buf_in    ; for receive
                     565     ;       mov     cnt_out,#0      ;??
                     566     ;       mov     cnt_in,#0
                     567     
019E 75A880          568                     mov     IE,#80h ;??80//Снятие блокировки всех прерываний+RS
                     569     ;ozu
01A1 E4              570                     clr     a
01A2 7800            571                     mov     r0,#00h 
01A4 F6              572     mecle:  mov     @r0,a                   ;обнулить озу 256 байт
01A5 08              573                     inc     r0
01A6 B87FFB          574                     cjne    r0,#7fh,mecle
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    10

01A9 7880            575                     mov     r0,#80h
01AB F6              576     meff:           mov     @r0,a 
01AC F2              577                     movx @r0,a
01AD 08              578                     inc     r0
01AE B8DFFA          579                     cjne    r0,#0dfh,meff
                     580     
                     581     
                     582     ;               mov     cnt_out,#33             ;+
                     583     ;               mov     p_out,#0DAh
                     584     
01B1 120000   F      585                     call    clmassix
                     586     ;обнулить внешнее озу 4кбайта
01B4 900000          587                     mov     dptr,#0
01B7 E4              588     extcle: clr     a
01B8 F0              589                     movx    @dptr,a
01B9 A3              590                     inc     dptr
01BA E583            591                     mov     a,dph
01BC B410F8          592                     cjne    a,#10h,extcle
                     593     
01BF 7898            594                     mov             r0,#chinkor
01C1 7600            595                     mov             @r0,#0;1;
01C3 08              596                     inc             r0
01C4 7619            597                     mov             @r0,#19h;64h;0c8h;90h;
                     598     
01C6 7881            599                     mov             r0,#chavt
01C8 7601            600                     mov             @r0,#1
01CA 08              601                     inc             r0
01CB 7690            602                     mov             @r0,#90h
                     603     
01CD 78B2            604                     mov             r0,#marker
01CF 76FF            605                     mov             @r0,#0ffh
                     606                     ;mov            r0,#chind
                     607                     ;mov            @r0,#1
01D1                 608     after_2:        ;?here 28.10.07
01D1 74FF            609                     mov             a,#0ffh
01D3 F585            610                     mov             p5,a
01D5 799A            611                     mov             r1,#parT
01D7 7702            612                     mov             @r1,#2                  ;Tizm=1s
01D9 79AE            613                     mov             r1,#diap
01DB 7705            614                     mov             @r1,#5                  ;10-7a
01DD 753405          615                     mov             sadiap,#5
01E0 79AF            616                     mov             r1,#parN
01E2 7702            617                     mov             @r1,#2
01E4 7400            618                     mov             a,#00h
01E6 F585            619                     mov             p5,a
01E8 D204            620                     setb            bitizm
                     621     
01EA 799B            622                     mov             r1,#chbefore
01EC 7700            623                     mov             @r1,#0
                     624     
01EE 900000   F      625                     mov             dptr,#ch_1              ;1->r2..r5 float
01F1 120000   F      626                     call    ldc_long
01F4 7890            627                     mov             r0,#koefKp         ;1(float)->koefKp
01F6 120000   F      628                     call    saver2
01F9 7894            629                     mov             r0,#koefKm              ;1(float)->koefKm
01FB 120000   F      630                     call    saver2
01FE 78A0            631                     mov             r0,#koefKD
0200 120000   F      632                     call    saver2
0203 78CF            633                     mov             r0,#chbuf
0205 120000   F      634                     call    saver2
0208 900158          635                     mov             dptr,#158h;1 блок(2е с конца измерение) 
020B 79D3            636                     mov             r1,#saven_bl
020D E583            637                     mov             a,dph
020F F7              638                     mov             @r1,a
0210 09              639                     inc             r1
0211 E582            640                     mov             a,dpl
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    11

0213 F7              641                     mov             @r1,a
                     642     
0214 900478          643                     mov                     dptr,#478h;2 блок(2е с конца измерение) 
0217 79C0            644                     mov             r1,#saven_bl2
0219 E583            645                     mov             a,dph
021B F7              646                     mov             @r1,a
021C 09              647                     inc             r1
021D E582            648                     mov             a,dpl
021F F7              649                     mov             @r1,a
0220 900798          650                     mov                     dptr,#798h;3 блок(2е с конца измерение) 
0223 79C2            651                     mov             r1,#saven_bl3
0225 E583            652                     mov             a,dph
0227 F7              653                     mov             @r1,a
0228 09              654                     inc             r1
0229 E582            655                     mov             a,dpl
022B F7              656                     mov             @r1,a
022C 900AB8          657                     mov             dptr,#0ab8h;4 блок(2е с конца измерение)        
022F 79D9            658                     mov             r1,#saven_bl4
0231 E583            659                     mov             a,dph
0233 F7              660                     mov             @r1,a
0234 09              661                     inc             r1
0235 E582            662                     mov             a,dpl
0237 F7              663                     mov             @r1,a
0238 753801          664                     mov             nblok,#1                        ;номер введенного блока
023B 753701          665                     mov             nelem,#1
023E 78CD            666                     mov             r0,#interva
0240 7600            667                     mov             @r0,#0
0242 08              668                     inc             r0
0243 7601            669                     mov             @r0,#1
0245 7840            670                     mov             r0,#bufind
0247                 671     age2:
0247 76FD            672                     mov             @r0,#0fdh         ;погасить индикатор
0249 08              673                     inc             r0
024A B84CFA          674                     cjne    r0,#bufind+12,age2              
024D 120000   F      675                     call    ind
0250 120000   F      676                     call    z_1s
                     677     
                     678                     ;зажечь все лементы индикации
0253 7840            679                     mov     r0,#bufind
0255 7669            680     ageon:  mov     @r0,#69h;0feh;?
0257 08              681                     inc     r0
0258 B84CFA          682                     cjne    r0,#bufind+12,ageon             
025B 120000   F      683                     call    ind
025E 120000   F      684                     call    z_1s            ;1sec
                     685     
0261 120000   F      686                     call    z_15;z_1ms
0264 434B10          687                     orl     bufind+11,#10h;бит точки после 1 знакоместа
                     688     
0267 7C60            689                     mov     r4,#60h
0269 7D00            690                     mov     r5,#00         
026B 120000   F      691                     call    iniacp;инициализация acp
026E 120000   F      692                     call    loadUS          ;us 10-7 A
                     693     ;?after_2:              
                     694     ;?              setb            bitizm
                     695                             
0271 7527DB          696             mov     p_in,#buf_in    ; for receive
0274 752400          697             mov     cnt_out,#0      ;??
0277 752500          698             mov     cnt_in,#0
027A 75A890          699             mov     IE,#90h ;Снятие блокировки всех прерываний+RS
                     700     
027D                 701     rebyte:
                     702     
027D 301D03          703             jnb     is_cmd,me3              ;??
0280 120000   F      704             call    cmd_tree
0283                 705     me3:
                     706     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    12

0283 C217            707                     clr             bitoll
0285 3095FD          708                     jnb             p1.5,$
0288 2095FD          709                     jb              p1.5,$
                     710                     ;mov            a,P6            ;p6.4=0
                     711                     ;anl            a,#0efh
                     712                     ;mov            P6,a
                     713                     ;nop
                     714                     ;nop
                     715                                     
                     716                     ;mov            a,P6                    ;p6.4=1 
                     717                     ;orl            a,#10h
                     718                     ;mov            P6,a                        
028B 7411            719                     mov             a,#11h
028D 120000   F      720                     call    write
                     721             ;чтение acp
0290 120000   F      722                     call    read    
0293 F578            723                     mov     reacp+1,A       ;старший байт 
0295 120000   F      724                     call    read    
0298 F579            725                     mov     reacp+2,A       ;средний байт 
029A 120000   F      726                     call    read
029D F57A            727                     mov     reacp+3,A               ;мл байт
                     728     
029F 7878            729                     mov             r0,#reacp+1
02A1 E6              730                     mov             a,@r0
02A2 20E743          731                     jb              acc.7,znplus;
02A5 D200            732                     setb    bitznak
02A7 4480            733                     orl             a,#80h  ;ост содерж яч 
02A9 F6              734                     mov             @r0,a
                     735                                     
02AA 18              736     mmm:            dec             r0;,#reacp
02AB 76FF            737                     mov             @r0,#0ffh
02AD 8041            738                     jmp             goznak
                     739     
02AF 120000   F      740     mem10ms:        call            ind
02B2 80C9            741                     jmp             rebyte  ;10ms
                     742     
02B4                 743     labelA: ;разрешить ie6,ie7
                     744     ;               mov             a,chkl+1                ;low
                     745     ;               jnz             no0key
02B4 E53D            746                     mov             a,chkl
02B6 30E70B          747                     jnb             acc.7,no0key;jnz                        no0key
02B9 E5AD            748                     mov             a,P3IF
02BB 543F            749                     anl             a,#3fh
02BD F5AD            750                     mov             P3IF,a
02BF 75E730          751                     mov             EIE2,#30h ;EIE2.5,EIE2.4
02C2 800D            752                     jmp             yes0key
                     753                        
02C4                 754     no0key: ;mov            r1,#chkl 
                     755                     ;call   chdec
02C4 C3              756                     clr             c
02C5 E53E            757                     mov             a,chkl+1;chkl-1
02C7 9401            758                     subb            a,#1
02C9 F53E            759                     mov             chkl+1,a
02CB E53D            760                     mov             a,chkl
02CD 9400            761                     subb            a,#0
02CF F53D            762                     mov             chkl,a
                     763     
02D1                 764     yes0key:
02D1 2004A9          765                     jb              bitizm,rebyte
                     766              ;буфер 2 выдать на индикацию
02D4 E533            767                     mov             a,chind2                        ;реже выдавать на индикацию
02D6 700B            768                     jnz             nochind
02D8 753364          769                     mov             chind2,#100
02DB 120000   F      770                     call            ind
02DE 120000   F      771     yes0key1:       call            z_1ms;z_01s
                     772                     ;call   z_01s
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    13

                     773                     ;call   z_01s
02E1 80D1            774                     jmp             labelA
                     775     
02E3 14              776     nochind:        dec             a
02E4 F533            777                     mov             chind2,a
02E6 80F6            778                     jmp             yes0key1;labelA
                     779             
02E8 C200            780     znplus: clr     bitznak
02EA 547F            781                     anl             a,#7fh;fdh                      ;+
02EC F6              782                     mov             @r0,a
02ED 18              783                     dec             r0      ;,#reacp
02EE 7600            784                     mov             @r0,#00h
                     785                             
02F0                 786     goznak:
02F0 787A            787                     mov             r0,#reacp+3
02F2 E6              788                     mov             a,@r0
02F3 7F05            789                     mov             r7,#5           ;6 сдвиг на 5 разрядов вправо
02F5 C3              790     sdvig3:         clr             c
02F6 13              791                     rrc             a
02F7 DFFC            792                     djnz            r7,sdvig3       ;d7,d6,d5         мл байт
02F9 FA              793                     mov             r2,a            ;сохр байт
02FA 18              794                     dec             r0              ;reacp+2
02FB E6              795                     mov             a,@r0
02FC C0E0            796                     push    acc
02FE C3              797                     clr             c
02FF 7F03            798                     mov             r7,#3;2
0301 C3              799     sdvig2:         clr             c
0302 33              800                     rlc             a
0303 DFFC            801                     djnz            r7,sdvig2       ;d12..d11        средний байт
0305 4A              802                     orl             a,r2
0306 F57A            803                     mov             reacp+3,a       ;сформ мл байт
0308 D0E0            804                     pop     acc
030A 7F05            805                     mov             r7,#5;6
030C C3              806     sdvig1:         clr             c
030D 13              807                     rrc             a
030E DFFC            808                     djnz    r7,sdvig1               ;d15,d14          ср байт
0310 FA              809                     mov             r2,a    ;сохр
0311 E578            810                     mov             a,reacp+1
0313 C0E0            811                     push    acc
                     812                     ;       push    acc
0315 7F03            813                     mov             r7,#3;2
0317 C3              814     sdvig0:         clr             c
0318 33              815                     rlc             a
0319 DFFC            816                     djnz    r7,sdvig0               ;d21..d16
031B 4A              817                     orl             a,r2
031C F579            818                     mov             reacp+2,a       ;сформ средний  байт
031E D0E0            819                     pop             acc             ;reacp+1
0320 20E70B          820                     jb              acc.7,sdvm
0323 C3              821                     clr             c
0324 7F05            822                     mov             r7,#5;6
0326 C3              823     sdvig4:         clr             c
0327 13              824                     rrc             a
0328 DFFC            825                     djnz            r7,sdvig4       ;d23,d22
032A F578            826                     mov             reacp+1,a
032C 8008            827                     jmp             readyacp        ;ankor;klmas
                     828     
032E 7F05            829     sdvm:           mov             r7,#5;6
0330 D3              830     sdvig6: setb            c
0331 13              831                     rrc             a
0332 DFFC            832                     djnz            r7,sdvig6 ;       d23,d22
0334 F578            833                     mov             reacp+1,a
                     834     ; reacp..reacp+3-результат чтения асп(hex) 
0336 7898            835     readyacp:       mov             r0,#chinkor
0338 E6              836                     mov             a,@r0
0339 30E702          837                     jnb             acc.7,gopart
033C 8044            838                     jmp             sumt2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    14

                     839                     
033E                 840     gopart:
033E 789A            841                     mov             r0,#parT        ;параметр времени
0340 793F            842                     mov             r1,#chmasN
0342 B6013A          843                     cjne            @r0,#1,noparT1
                     844             ;РЕЗ+РЕЗ
0345 7877            845                     mov             r0,#reacp
0347 120000   F      846                     call            resar2  ;reacp->r2..r5
034A 78B6            847                     mov             r0,#summa+3     ;rez_A+3
034C 120000   F      848                     call            ladd
034F 78B3            849                     mov             r0,#summa;rez_A
0351 120000   F      850                     call            saver2
0354 793F            851                     mov             r1,#chmasN
0356 7714            852                     mov             @r1,#20;10
0358 789B            853                     mov             r0,#chbefore
035A B6631E          854                     cjne            @r0,#99,nobef99
                     855             ;РЕЗ/100
035D 900000   F      856                     MOV     DPTR,#ch100 
0360 120000   F      857     allsum: CALL  ldc_ltemp          ; ltemp <-- 100
0363 120000   F      858                     call    zdiv;divide
0366 7862            859                     mov     r0,#rez_A
0368 120000   F      860                     call    saver2          ;сумма 100 отсчетов /100
036B 78C5            861                     mov     r0,#Rez_del
036D 120000   F      862                     call    saver2  
                     863     
0370 78B3            864                     mov             r0,#summa
0372 120000   F      865                     call            clear4
                     866     
0375 799B            867                     mov             r1,#chbefore
0377 7700            868                     mov             @r1,#0
0379 8070            869                     jmp             klmas           ;загр в массив скользящее ср
037B 06              870     nobef99:        inc             @r0                     ;chbefore
037C 020000   F      871                     jmp             rebyte;labelA;метка A
                     872     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     873     ;а потом уже располагаем  в скользящий массив  из n
                     874     
                     875     
037F B6021D          876     noparT1:        cjne    @r0,#2,noparT2
                     877             ;РЕЗ+РЕЗ
0382                 878     sumt2:
0382 7877            879                     mov     r0,#reacp
0384 120000   F      880                     call    resar2          ;reacp->r2..r5
0387 78B6            881                     mov     r0,#summa+3;rez_A+3
0389 120000   F      882                     call    ladd
038C 78B3            883                     mov     r0,#summa;rez_A
038E 120000   F      884                     call    saver2
0391 789B            885                     mov     r0,#chbefore
0393 793F            886                     mov     r1,#chmasN
0395 770A            887                     mov     @r1,#10
0397 B613E1          888                     cjne    @r0,#19,nobef99;9,nobef99
                     889             ;РЕЗ/20
039A 900000   F      890                     MOV     DPTR,#ch20;ch10 
039D 80C1            891                     jmp     allsum
                     892     
039F B6031D          893     noparT2:        cjne    @r0,#3,noparT3
03A2 7877            894                     mov     r0,#reacp
03A4 120000   F      895                     call    resar2          ;reacp->r2..r5
03A7 78B6            896                     mov     r0,#summa+3;rez_A+3
03A9 120000   F      897                     call    ladd
03AC 78B3            898                     mov     r0,#summa;rez_A
03AE 120000   F      899                     call    saver2
03B1 789B            900                     mov     r0,#chbefore
03B3 793F            901                     mov     r1,#chmasN
03B5 7702            902                     mov     @r1,#2;4                                        ;n=4
03B7 B609C1          903                     cjne    @r0,#9,nobef99;9,nobef99
                     904             ;РЕЗ/10
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    15

03BA 900000   F      905                     MOV             DPTR,#ch10 
03BD 80A1            906                     jmp             allsum
                     907                             
03BF B6041D          908     noparT3:        cjne    @r0,#4,noparT4
03C2                 909     aapar:          
03C2 7877            910                     mov             r0,#reacp
03C4 120000   F      911                     call            resar2          ;reacp->r2..r5
03C7 78B6            912                     mov             r0,#summa+3;rez_A+3
03C9 120000   F      913                     call            ladd
03CC 78B3            914                     mov             r0,#summa;rez_A
03CE 120000   F      915                     call            saver2
03D1 789B            916                     mov             r0,#chbefore
03D3 793F            917                     mov             r1,#chmasN
03D5 7702            918                     mov             @r1,#2;4
03D7 B604A1          919                     cjne    @r0,#4,nobef99;9,nobef99
                     920             ;РЕЗ/10
03DA 900000   F      921                     MOV             DPTR,#ch5
03DD 8081            922                     jmp             allsum
                     923     
03DF 7702            924     noparT4:        mov             @r1,#2          ;chmasN n=2
03E1 7877            925                     mov             r0,#reacp
03E3 120000   F      926                     call            resar2          ;reacp->r2..r5
03E6 7862            927                     mov             r0,#rez_A
03E8 120000   F      928                     call            saver2
                     929     ;загрузить А в массив из 2/10 значений
                     930     
03EB                 931     klmas:           
03EB 793F            932                     mov     r1,#chmasN
03ED B7021A          933                     cjne    @r1,#2,mas10
03F0 900100          934                     MOV     dptr,#MASS0
03F3 120000   F      935                     CALL    xCIKLWR           ; MASS0 --> MASS1
                     936     
03F6 7862            937                     mov     r0,#rez_A
03F8 120000   F      938                     call    resar2          ;->r2..r5
03FB 900100          939                     mov     dptr,#MASS0
03FE 120000   F      940                   call      saveIr2                 ; R2-R5 --> MAS0
                     941                     
0401 900107          942                   MOV       dptr,#MASS1+3
0404 120000   F      943                   CALL      addx
0407 020000   F      944                     jmp     endsum
                     945     ;массив из 10-ти измерений      ?
040A B70A7D          946     mas10:  cjne    @r1,#10,mas20
040D 900120          947                     mov     dptr,#MASS8
0410 120000   F      948                   CALL      xCIKLWR         ;MASS8->MASS9
0413 90011C          949                     mov     dptr,#MASS7
0416 120000   F      950                   CALL      xCIKLWR         ;MASS7->MASS8
0419 900118          951             MOV     dptr,#MASS6
041C 120000   F      952                   CALL      xCIKLWR            ; MASS6 --> MASS7
041F 900114          953                   MOV       dptr,#MASS5
0422 120000   F      954                     CALL    xCIKLWR           ; MASS5 --> MASS6
0425 900110          955                   MOV       dptr,#MASS4
0428 120000   F      956                     CALL    xCIKLWR           ; MASS4 --> MASS5
042B 90010C          957                     mov     dptr,#MASS3
042E 120000   F      958                     CALL    xCIKLWR         ;MASS3->MASS4
0431 900108          959             MOV     dptr,#MASS2
                     960     
0434 120000   F      961                   CALL      xCIKLWR            ; MASS2 --> MASS3
0437 900104          962                     MOV     dptr,#MASS1
043A 120000   F      963                   CALL      xCIKLWR           ; MASS1 --> MASS2
043D 900100          964                   MOV       dptr,#MASS0
0440 120000   F      965                     CALL    xCIKLWR           ; MASS0 --> MASS1
                     966     
0443 7862            967                     mov     r0,#rez_A
0445 120000   F      968                     call    resar2          ;->r2..r5
                     969             ;call   aform
0448 900100          970                     mov     dptr,#MASS0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    16

044B 120000   F      971                   call      saveIr2                 ; R2-R5 --> MAS0
                     972              
044E 900107          973                   MOV       dptr,#MASS1+3
0451 120000   F      974                   CALL      addx
0454 90010B          975                   MOV       dptr,#MASS2+3
0457 120000   F      976                   CALL      addx
045A 90010F          977                   MOV       dptr,#MASS3+3
045D 120000   F      978                  CALL       addx
0460 900113          979                   MOV       dptr,#MASS4+3
0463 120000   F      980                   call      addx
0466 900117          981                     MOV     dptr,#MASS5+3
0469 120000   F      982                  CALL       addx
046C 90011B          983                   MOV       dptr,#MASS6+3
046F 120000   F      984                   CALL      addx
0472 90011F          985                   MOV       dptr,#MASS7+3
0475 120000   F      986                  CALL       addx
0478 900123          987                  MOV        dptr,#MASS8+3
047B 120000   F      988                   call      addx
047E 900127          989                     MOV     dptr,#MASS9+3
0481 120000   F      990                  call       addx
0484 020000   F      991                     jmp             endsum
                     992     
0487 020000   F      993     rmas4:  jmp             mas4
                     994     ;массив из 20-ти измерений
048A B714FA          995     mas20:  cjne    @r1,#20,rmas4
048D 900148          996                     mov             dptr,#MASS18
0490 120000   F      997                   CALL              xCIKLWR         ;MASS18->MASS19 ?
0493 900144          998                     mov             dptr,#MASS17
0496 120000   F      999                   CALL              xCIKLWR         ;MASS17->MASS18
0499 900140         1000             MOV       dptr,#MASS16
049C 120000   F     1001                   CALL         xCIKLWR         ; MASS16 --> MASS17
049F 90013C         1002                   MOV          dptr,#MASS15
                    1003                    
04A2 120000   F     1004                   CALL         xCIKLWR        ; MASS15 --> MASS16
04A5 900138         1005                   MOV          dptr,#MASS14
04A8 120000   F     1006                   CALL         xCIKLWR        ; MASS14 --> MASS15
04AB 900134         1007                     mov             dptr,#MASS13
04AE 120000   F     1008                   CALL              xCIKLWR         ;MASS13->MASS14
04B1 900130         1009             MOV        dptr,#MASS12
04B4 120000   F     1010                   CALL         xCIKLWR         ; MASS12 --> MASS13
04B7 90012C         1011                   MOV          dptr,#MASS11
                    1012                     
04BA 120000   F     1013                   CALL         xCIKLWR        ; MASS11 --> MASS12
04BD 900128         1014                   MOV          dptr,#MASS10
04C0 120000   F     1015                   CALL         xCIKLWR        ; MASS10 --> MASS11
04C3 900124         1016                     MOV        dptr,#MASS9
04C6 120000   F     1017                   CALL         xCIKLWR        ; MASS9 --> MASS10
04C9 900120         1018                     mov             dptr,#MASS8
04CC 120000   F     1019                   CALL              xCIKLWR         ;MASS8->MASS9
04CF 90011C         1020                     mov             dptr,#MASS7
04D2 120000   F     1021                  CALL               xCIKLWR         ;MASS7->MASS8
04D5 900118         1022                     MOV       dptr,#MASS6
04D8 120000   F     1023                   CALL         xCIKLWR         ; MASS6 --> MASS7
04DB 900114         1024                   MOV          dptr,#MASS5
04DE 120000   F     1025                   CALL         xCIKLWR        ; MASS5 --> MASS6
04E1 900110         1026                   MOV          dptr,#MASS4
04E4 120000   F     1027                   CALL         xCIKLWR        ; MASS4 --> MASS5
04E7 90010C         1028                     mov             dptr,#MASS3
                    1029     
04EA 120000   F     1030                   CALL              xCIKLWR         ;MASS3->MASS4
04ED 900108         1031             MOV        dptr,#MASS2
04F0 120000   F     1032                   CALL         xCIKLWR         ; MASS2 --> MASS3
04F3 900104         1033                   MOV          dptr,#MASS1
04F6 120000   F     1034                   CALL         xCIKLWR        ; MASS1 --> MASS2
04F9 900100         1035                   MOV          dptr,#MASS0
04FC 120000   F     1036                   CALL         xCIKLWR        ; MASS0 --> MASS1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    17

                    1037                             
04FF 7862           1038                     mov             r0,#rez_A
0501 120000   F     1039                     call    resar2          ;->r2..r5
                    1040             ;call   aform
0504 900100         1041                     mov     dptr,#MASS0
0507 120000   F     1042                   call      saveIr2                 ; R2-R5 --> MAS0
050A 900107         1043                   MOV       dptr,#MASS1+3
050D 120000   F     1044                   CALL      addx
0510 90010B         1045                   MOV       dptr,#MASS2+3
0513 120000   F     1046                   CALL      addx
0516 90010F         1047                   MOV       dptr,#MASS3+3
0519 120000   F     1048                  CALL       addx
051C 900113         1049                   MOV       dptr,#MASS4+3
051F 120000   F     1050                   call      addx
0522 900117         1051                     MOV     dptr,#MASS5+3
0525 120000   F     1052                  CALL       addx
0528 90011B         1053                  MOV        dptr,#MASS6+3
052B 120000   F     1054                  CALL       addx
052E 90011F         1055                  MOV        dptr,#MASS7+3
0531 120000   F     1056                  CALL       addx
0534 900123         1057                  MOV        dptr,#MASS8+3
0537 120000   F     1058                  call       addx
053A 900127         1059                     MOV     dptr,#MASS9+3
053D 120000   F     1060                  call       addx
                    1061     ;27
0540 90012B         1062                     MOV        dptr,#MASS10+3
0543 120000   F     1063                   CALL       addx
0546 90012F         1064                     MOV     dptr,#MASS11+3
0549 120000   F     1065                   CALL       addx
054C 900133         1066                   MOV       dptr,#MASS12+3
054F 120000   F     1067                   CALL       addx
0552 900137         1068                   MOV       dptr,#MASS13+3
0555 120000   F     1069                  CALL        addx
0558 90013B         1070                   MOV       dptr,#MASS14+3
055B 120000   F     1071                   call       addx
055E 90013F         1072                     MOV   dptr,#MASS15+3
0561 120000   F     1073                     CALL     addx
0564 900143         1074                   MOV       dptr,#MASS16+3
0567 120000   F     1075                   CALL       addx
056A 900147         1076                   MOV       dptr,#MASS17+3
056D 120000   F     1077                  CALL        addx
0570 90014B         1078                  MOV        dptr,#MASS18+3
0573 120000   F     1079                   call       addx
0576 90014F         1080                     MOV     dptr,#MASS19+3
0579 120000   F     1081                  call        addx
057C 802F           1082                     jmp             endsum
                    1083     ;массив из 4х измерений
057E                1084     mas4:                   
057E 900108         1085                     MOV        dptr,#MASS2
0581 120000   F     1086                   CALL         xCIKLWR         ; MASS2 --> MASS3
0584 900104         1087                   MOV          dptr,#MASS1
0587 120000   F     1088                   CALL         xCIKLWR        ; MASS1 --> MASS2
058A 900100         1089                   MOV          dptr,#MASS0
058D 120000   F     1090                   CALL         xCIKLWR        ; MASS0 --> MASS1
                    1091                     
0590 7862           1092                     mov     r0,#rez_A
0592 120000   F     1093                     call    resar2          ;->r2..r5
                    1094             ;call   aform
0595 900100         1095                     mov     dptr,#MASS0
0598 120000   F     1096                   call      saveIr2                 ; R2-R5 --> MAS0
                    1097              
059B 900107         1098                   MOV       dptr,#MASS1+3
059E 120000   F     1099                   CALL      addx
05A1 90010B         1100                   MOV       dptr,#MASS2+3
05A4 120000   F     1101                   CALL      addx
05A7 90010F         1102                   MOV       dptr,#MASS3+3
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    18

05AA 120000   F     1103                  CALL       addx
                    1104                  
05AD                1105     endsum: ;23.03  
05AD 786E           1106                     mov     r0,#chmas;8.11.06               ;0..n(0..2,0..10)
05AF 06             1107                     inc     @r0
05B0 E6             1108                     mov     a,@r0   
05B1 200105         1109                     jb      bitmas,masfull          ;массив заполнен 2/10 значениями
05B4 B53F31         1110                     cjne    a,chmasN,masx5
05B7 D201           1111                     setb    bitmas                  ;массив заполнен
05B9 853F6E         1112     masfull:        mov     chmas,chmasN
05BC 783F           1113                     mov     r0,#chmasN
05BE E6             1114                     mov     a,@r0
                    1115     ;masfull:
05BF B40208         1116                     cjne    a,#2,nochn2
05C2 900000   F     1117                     MOV     DPTR,#ch2;10 
05C5 120000   F     1118                     CALL  ldc_ltemp          ; ltemp <-- 2
05C8 8028           1119                     jmp     mas5div
                    1120     
05CA B40A08         1121     nochn2: cjne    a,#10,nochn10
05CD 900000   F     1122                     MOV     DPTR,#ch10 
05D0 120000   F     1123                     CALL  ldc_ltemp          ; ltemp <-- 10
05D3 801D           1124                     jmp     mas5div
                    1125     
05D5 B41408         1126     nochn10:        cjne    a,#20,nochn20
05D8 900000   F     1127                     MOV     DPTR,#ch20 
05DB 120000   F     1128                     CALL  ldc_ltemp          ; ltemp <-- 20
05DE 8012           1129                     jmp     mas5div
                    1130     
05E0 900000   F     1131     nochn20:        MOV     DPTR,#ch4 
05E3 120000   F     1132                     CALL  ldc_ltemp          ; ltemp <-- 4
05E6 800A           1133                     jmp     mas5div
                    1134     
05E8 856E0B         1135     masx5:  mov     ltemp+3,chmas                   ;массив не заполнен
05EB E4             1136                     clr     a
05EC F50A           1137                     mov     ltemp+2,a
05EE F509           1138                     mov     ltemp+1,a
05F0 F508           1139                     mov     ltemp,a
                    1140     
05F2 120000   F     1141     mas5div:        CALL    zdiv;divide, R2-R5 =(MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1142     ;получен результат 3 байта и знак
05F5 7866           1143                     mov     r0,#rez_A1
05F7 120000   F     1144                     call    saver2           ;сохр среднее по массиву
                    1145     ;;8.11.06                       mov             chmasN,#0
05FA C3             1146                     clr     c
05FB 799A           1147                     mov     r1,#parT
05FD 7402           1148                     mov     a,#2
05FF 97             1149                     subb    a,@r1
0600 501D           1150                     jnc     ankor           ;T<3
                    1151                             ;A-=РЕЗ1                                ;T>3
0602 120402         1152                     call    altof                   ;r2..r5->float
0605 785E           1153                     mov     r0,#rez_Ame
0607 120000   F     1154                     call    saver2
                    1155     
060A 7890           1156                     mov     r0,#koefKp;->r8..r11
060C EA             1157                     mov     a,r2
060D 30E702         1158                     jnb     acc.7,nminus3
0610 7894           1159                     mov     r0,#koefKm;->r8..r11
0612 120000   F     1160     nminus3:        call    resar8
0615 120203         1161                     call    flmul  ;результат в плавающем формате м.б. его сохранить?
0618 785E           1162                     mov     r0,#rez_Ame
061A 120000   F     1163                     call    saver2
061D 8021           1164                     jmp     gotoKD
                    1165     
061F 7898           1166     ankor:  mov     r0,#chinkor
0621 E6             1167                     mov     a,@r0
0622 30E703         1168                     jnb     acc.7,nokorr
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    19

                    1169             ;коррекция 0
0625 020000   F     1170                     jmp     kornul
0628                1171     nokorr: 
                    1172                     ;mov    r10,#00         ;       chavt
                    1173                     ;mov    r11,#00h
0628 7881           1174                     mov     r0,#chavt       
062A E6             1175                     mov     a,@r0;call      chcmp           ;сравн счетчик авто калибровки с 0h
062B 30E737         1176                     jnb     acc.7,nonulavt;jnz              nonulavt        
062E 750A00         1177                     mov     r10,#0;1;00;02          
0631 750BC8         1178                     mov     r11,#0c8h;90h;0c8h;58h
0634 7898           1179                     mov     r0,#chinkor
0636 120000   F     1180                     call    chcmp
0639 7045           1181                     jnz     noavk
                    1182             ;автокалибровка
063B 020000   F     1183                     jmp             autoka;noavk;
                    1184     
063E 8079           1185     rafterK:        jmp             afterK
                    1186     
0640 C3             1187     gotoKD:         clr             c
0641 799A           1188                     mov             r1,#parT
0643 7404           1189                     mov             a,#4
0645 97             1190                     subb            a,@r1
0646 50F6           1191                     jnc             rafterK         ;T<5
                    1192             ;A1-=A- *KD                     ;T>5
                    1193             ;call           findkoef                                ;r2,r3-hex
                    1194             ;call           rebyte2                         ;r2..r5- hex
                    1195             ;       call    altof                   ;r2..r5->float
                    1196             ;       mov     dptr,#CHtho;100000
                    1197             ;       call    ldc_ltemp                       ;r8..r11
                    1198             ;       call    fldiv
                    1199             ;       call    move28
0648 785E           1200                     mov     r0,#rez_Ame;->r2..r5   ?/
064A 120000   F     1201                     call    resar2
                    1202             ;call   flmul
064D 120343         1203                     call    ftol                    ;float->int
0650 7866           1204                     mov     r0,#rez_A1
0652 120000   F     1205                     call    saver2
0655 786A           1206                     mov     r0,#rez_A0;->r8..r11 hex
0657 120000   F     1207                     call    resar8
065A 120000   F     1208                     call    lsub            ;A3=A-1-A0
065D 789C           1209                     mov     r0,#rez_A3
065F 120000   F     1210                     call    saver2
                    1211     
0662 020000   F     1212                     jmp     labelB  ;?upper
                    1213      ;;;;;;;;;;; 9.11.06
0665 789A           1214     nonulavt:       mov     r0,#parT
0667 E6             1215                     mov     a,@r0
0668 6401           1216                     xrl     a,#01
066A 700F           1217                     jnz     avtdec1
066C 7982           1218                     mov     r1,#chavt+1     ;T=1 chavt-10
066E 120000   F     1219                     call    tenmin
0671 7999           1220     kordec10:       mov     r1,#chinkor+1
0673 120000   F     1221                     call    tenmin
0676 801E           1222                     jmp     rezmul
                    1223     
0678 020000   F     1224     rmo220: jmp     mo220
                    1225     
067B 7981           1226     avtdec1:        mov     r1,#chavt       
067D 120000   F     1227                     call    chdec           ;chavt-1
                    1228     ;               jmp             kordec1;rezmul
0680 789A           1229     noavk:  mov     r0,#parT
0682 E6             1230                     mov     a,@r0
0683 6401           1231                     xrl     a,#01
0685 700A           1232                     jnz     kordec1
                    1233             ;T=1 chinkor-10
0687 7999           1234                     mov     r1,#chinkor+1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    20

0689 120000   F     1235                     call    tenmin
068C 8008           1236                     jmp     rezmul
                    1237     
068E 020000   F     1238     rnotestizm:     jmp     notestizm
0691 7998           1239     kordec1:        mov     r1,#chinkor
0693 120000   F     1240                     call    chdec           ; chinkor-1
                    1241                        ;9.11.06
                    1242     ;(РЕЗ1-АN)*K
0696 7866           1243     rezmul: mov     r0,#rez_A1;->r2..r5
0698 120000   F     1244                     call    resar2
069B 120402         1245                     call    altof   ;r2..r5->float  6.06    
069E 7884           1246                     mov     r0,#kor0_AN;->r8..r11
06A0 120000   F     1247                     call    resar8
06A3 1201D1         1248                     call    flsub
06A6 7890           1249                     mov     r0,#koefKp;->r8..r11
06A8 EA             1250                     mov     a,r2
06A9 30E702         1251                     jnb     acc.7,nminus
                    1252                     ;jnb            bitznak,nminus
                    1253                     
06AC 7894           1254                     mov     r0,#koefKm;->r8..r11
06AE 120000   F     1255     nminus: call    resar8
06B1 120203         1256                     call    flmul  ;результат в плавающем формате м.б. его сохранить?
06B4 785E           1257                     mov     r0,#rez_Ame
06B6 120000   F     1258                     call    saver2
                    1259      
06B9 EA             1260     afterK: mov     a,r2
06BA 547F           1261                     anl     a,#7fh
06BC FA             1262                     mov     r2,a
06BD 900000   F     1263                     mov     dptr,#ch_250;220;220000
06C0 120000   F     1264                     call    ldc_ltemp                       ;r8..r11=8
06C3 1201D6         1265                     call    flcmp
06C6 50B0           1266                     jnc     rmo220          ;A>220000
                    1267     
06C8 3015C3         1268                     jnb     biteizm,rnotestizm
06CB 78B1           1269                     mov     r0,#vichR
06CD B62155         1270                     cjne    @r0,#21h,note21
06D0 7A50           1271                     mov     r2,#50h         ;-11a
06D2 7B18           1272                     mov     r3,#18h         ;k8
06D4 12046C         1273                     call    rebyte2                         ;r2..r5- hex
06D7 120402         1274                     call    altof                   ;r2..r5->float
06DA C002           1275                     push    rr2
06DC C003           1276                     push    rr3
06DE C004           1277                     push    rr4
06E0 C005           1278                     push    rr5
06E2 7A50           1279                     mov     r2,#50h         ;k10
06E4 7B20           1280                     mov     r3,#20h
06E6 12046C         1281     re11_7: call    rebyte2                 ;r2..r5
06E9 120402         1282                     call    altof                   ;r2..r5->float
06EC 120000   F     1283                     call    move28
06EF D005           1284                     pop     rr5
06F1 D004           1285                     pop     rr4
06F3 D003           1286                     pop     rr3
06F5 D002           1287                     pop     rr2
06F7 1202B7         1288                     call    fldiv
                    1289             ;       mov                     dptr,#ch_10
                    1290             ;       call            ldc_ltemp                       ;r8..r11
                    1291             ;       call            flmul
                    1292             ;;;;;2.02.07
06FA C002           1293                     push    rr2
06FC C003           1294                     push    rr3
06FE C004           1295                     push    rr4
0700 C005           1296                     push    rr5
0702 7A50           1297                     mov     r2,#50h                 ;-11a
0704 7B2C           1298                     mov     r3,#2ch                 ;Km
0706 12046C         1299                     call    rebyte2                         ;r2..r5- hex
0709 120402         1300                     call    altof                   ;r2..r5->float
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    21

070C 120000   F     1301                     call    move28
070F D005           1302                     pop     rr5
0711 D004           1303                     pop     rr4
0713 D003           1304                     pop     rr3
0715 D002           1305                     pop     rr2
0717 120203         1306                     call    flmul                           ;*Km
071A 900000   F     1307                     mov     dptr,#CHtho;100000
071D 120000   F     1308                     call    ldc_ltemp                       ;r8..r11=8
0720 1202B7         1309                     call    fldiv
                    1310     
0723 8050           1311                     jmp     temul
0725 B62218         1312     note21: cjne    @r0,#22h,note22
0728 7A50           1313                     mov     r2,#50h                 ;-09a
072A 7B10           1314                     mov     r3,#10h                 ;k6
072C 12046C         1315                     call    rebyte2                 ;r2..r5- hex
072F 120402         1316                     call    altof                   ;r2..r5->float
0732 C002           1317                     push    rr2
0734 C003           1318                     push    rr3
0736 C004           1319                     push    rr4
0738 C005           1320                     push    rr5
073A 7A50           1321                     mov     r2,#50h                 ;k8
073C 7B18           1322                     mov     r3,#18h
073E 80A6           1323                     jmp     re11_7
0740 7A50           1324     note22: mov     r2,#50h                 ;-7a
0742 7B08           1325                     mov     r3,#08h                 ;k4
0744 12046C         1326                     call    rebyte2                         ;r2..r5- hex
0747 120402         1327                     call    altof                   ;r2..r5->float
074A C002           1328                     push    rr2
074C C003           1329                     push    rr3
074E C004           1330                     push    rr4
0750 C005           1331                     push    rr5
0752 7A50           1332                     mov     r2,#50h                 ;k6
0754 7B10           1333                     mov     r3,#10h
0756 808E           1334                     jmp     re11_7  
                    1335     
0758                1336     notestizm:
0758 301208         1337                     jnb     bitklb,komulpz
075B 900000   F     1338                     mov     dptr,#chk       ;100000
075E 120000   F     1339                     call    ldc_long        ;r2..r5
0761 8006           1340                     jmp     komul
0763 120000   F     1341     komulpz:        call    findkoef        ;r2,r3-hex
0766 12046C         1342                     call    rebyte2         ;r2..r5- hex
                    1343                                     
0769 120402         1344     komul:  call    altof                   ;r2..r5->float
076C 900000   F     1345                     mov     dptr,#CHtho;100000
076F 120000   F     1346                     call    ldc_ltemp                       ;r8..r11=8
0772 1202B7         1347                     call    fldiv
                    1348     ;A0,..  call    move28
0775 120000   F     1349     temul:  call    move28
0778 785E           1350                     mov     r0,#rez_Ame
077A 120000   F     1351                     call    resar2
077D 120203         1352                     call    flmul     ;A1-=A-*KD  fl
0780 120343         1353                     call    ftol                    ;float->int
0783 7866           1354                     mov     r0,#rez_A1
0785 120000   F     1355                     call    saver2
0788 120402         1356                     call    altof                   ;r2..r5->float
078B EA             1357                     mov     a,r2
078C 547F           1358                     anl     a,#7fh
078E FA             1359                     mov     r2,a
078F 900000   F     1360                     mov     dptr,#ch_220;200;200000
0792 120000   F     1361                     call    ldc_ltemp                       ;r8..r11=8
0795 1201D6         1362                     call    flcmp
0798 502D           1363                     jnc     rrmo220         ;A>200000
                    1364             ;       jnb             knizm,noavp;goA2;               bitizm,goA2     
                    1365             ;       jb              bitavp,yesavp
079A 301808         1366                     jnb     knizm,goA2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    22

079D 300602         1367                     jnb     bitvi11,qu_avp
07A0 8003           1368                     jmp     goA2
07A2 20052F         1369     qu_avp:         jb      bitavp,yesavp
07A5                1370     noavp:  ;jb     bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИТЬ)
07A5                1371     goA2:           ;A2=A1-
07A5 7866           1372                     mov     r0,#rez_A1
07A7 120000   F     1373                     call    resar2
07AA 787B           1374                     mov     r0,#rez_A2
07AC 120000   F     1375                     call    saver2
07AF                1376     goA3A2: ;A3=A2-A0
07AF 786A           1377                     mov     r0,#rez_A0
07B1 120000   F     1378                     call    resar8
07B4 120000   F     1379                     call    lsub
07B7 789C           1380                     mov     r0,#rez_A3
07B9 120000   F     1381                     call    saver2
07BC 200666         1382                     jb      bitvi11,yesvich
                    1383     
07BF                1384     goonin: ;jmp    goonind;indA3;8.11.06
07BF 78AC           1385                     mov     r0,#chind
07C1 B60006         1386                     cjne    @r0,#0,rnochi0
07C4 020000   F     1387                     jmp     goonind;indA3
                    1388     
07C7 020000   F     1389     rrmo220:        jmp     mo220
07CA 020000   F     1390     rnochi0:        jmp     nochi0
07CD 7866           1391     gokaA2: mov     r0,#rez_A1              ;(float)
07CF 120000   F     1392                     call    saver2          ;то необх для калибровки ,goA2 работает с тим знач
07D2 80D1           1393                     jmp     goA2
                    1394     
07D4 EA             1395     yesavp: mov     a,r2
07D5 547F           1396                     anl     a,#7fh
07D7 FA             1397                     mov     r2,a
07D8 900000   F     1398                     mov     dptr,#ch_10th;10000
07DB 120000   F     1399                     call    ldc_ltemp                       ;r8..r11=8
07DE 1201D6         1400                     call    flcmp
07E1 50C2           1401                     jnc     noavp           ;A>10000        
07E3 78AE           1402                     mov     r0,#diap                ;10-11
07E5 B60902         1403                     cjne    @r0,#9,avpgo
07E8 80BB           1404                     jmp     noavp
07EA                1405     avpgo:
07EA 06             1406                     inc     @r0             ;переключ диапазон на 1 позицию вниз
07EB B60A01         1407                     cjne    @r0,#0ah,clmasv
07EE 16             1408                     dec     @r0
07EF                1409     clmasv: ;сбросить массив
07EF 120000   F     1410                     call    loadUS
                    1411                     ;call   louizm
07F2 120000   F     1412                     call    clmassix
07F5 78B3           1413                     mov     r0,#summa
07F7 120000   F     1414                     call    clear4
07FA 786A           1415                     mov     r0,#rez_A0
07FC 120000   F     1416                     call    clear4
07FF C20F           1417                     clr     bitnul
0801 D207           1418                     setb    bitzus  ;bitbuf
0803 80BA           1419                     jmp     goonin
                    1420     
0805 D00B           1421     erra01: pop     r11
0807 D00A           1422                     pop     r10
0809 D009           1423                     pop     r9
080B D008           1424                     pop     r8
080D C214           1425                     clr     bitvich
080F C206           1426                     clr     bitvi11
0811 753934         1427                     mov     nuerr,#34h;константа не должна быть равна0
0814 120000   F     1428                     call    error
0817 120000   F     1429                     call    ind
081A 120000   F     1430                     call    z_1s
081D 80A0           1431                     jmp     goonin
                    1432     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    23

081F                1433     mo500R_:
081F 020000   F     1434                     jmp     mo500R
0822                1435     mo500I_:
0822 020000   F     1436                     jmp     mo500I          ;error
                    1437     
0825                1438     yesvich:
                    1439                     ;       mov             r0,#konstB
                    1440                     ;       call    resar2
                    1441                     ;       call    move28
0825 789C           1442                     mov     r0,#rez_A3;A1
0827 120000   F     1443                     call    resar2                          ;HEX
082A 120402         1444                     call    altof                   ;r2..r5->float
082D EA             1445                     mov     a,r2                    ;модуль
082E 547F           1446                     anl     a,#7fh
0830 FA             1447                     mov     r2,a
                    1448     ;               call            fladd                           ;A1+B
                    1449                                     
0831 900000   F     1450                     mov     dptr,#CH_500;
0834 120000   F     1451                     call    ldc_ltemp                       ;r8..r11
0837 1201D6         1452                     call    flcmp
083A 40E3           1453                     jc      mo500R_ ;error <500 >22000
                    1454     ;!
083C 900000   F     1455                     mov     dptr,#CH_22T;
083F 120000   F     1456                     call    ldc_ltemp                       ;r8..r11
0842 1201D6         1457                     call    flcmp
0845 50DB           1458                     jnc     mo500I_
                    1459     ;!
0847 120000   F     1460                     call    move28
084A C008           1461                     push    r8
084C C009           1462                     push    r9
084E C00A           1463                     push    r10
0850 C00B           1464                     push    r11
0852 78BC           1465                     mov     r0,#konstA
0854 120000   F     1466                     call    resar2
0857 900000   F     1467                     mov     dptr,#ch0
085A 120000   F     1468                     call    ldc_ltemp
085D 1201D6         1469                     call    flcmp
0860 60A3           1470                     jz      erra01
0862 900000   F     1471                     mov     dptr,#CH_B
0865 120000   F     1472                     CALL  ldc_ltemp          ; ltemp <-- 10-7
0868 120203         1473                     call    flmul                           ;A*10-7
086B D00B           1474                     pop     r11
086D D00A           1475                     pop     r10
086F D009           1476                     pop     r9
0871 D008           1477                     pop     r8
0873 1202B7         1478                     call    fldiv                   ;результат R
0876 78C9           1479                     mov     r0,#rez_R
0878 120000   F     1480                     call    saver2
087B 120343         1481                     call    ftol                    ;float->hex
                    1482     
087E 784F           1483                     mov     r0,#abin
0880 120000   F     1484                     call    saver2
                    1485     
                    1486     
0883 301E33         1487                             jnb     is_rs,mr_5              ;??
0886 300630         1488                             jnb     bitvi11,mr_5    ;alternative
0889 78C9           1489                     mov     r0,#rez_R       ;?
088B 301704         1490                             jnb     bitoll,moveR3_
088E 78C9           1491                             mov     r0,#rez_R
0890 7681           1492                             mov     @R0,#81h
0892                1493     moveR3_:
0892 C2AF           1494                             clr     EA      ;?
                    1495     ;                       mov     A,#rez_R        ;Ame,..; bufind - no use: for fastest isn't
                              screen output
                    1496     ;                       mov     p_out,A
                    1497     ;                       mov     cnt_out,#4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    24

0894 75997F         1498                             mov     SBUF0,#7Fh      ;was cmd_rez
                    1499     
0897                1500     tx1:    ;?fragment
0897 3099FD         1501                     jnb   TI,tx1
089A C299           1502                     clr   TI
089C 8699           1503                     mov     SBUF0,@r0
089E 08             1504                     inc     r0
089F                1505     tx2:
089F 3099FD         1506                     jnb   TI,tx2
08A2 C299           1507                     clr   TI
08A4 8699           1508                     mov     SBUF0,@r0
08A6 08             1509                     inc     r0
08A7                1510     tx3:
08A7 3099FD         1511                     jnb   TI,tx3
08AA C299           1512                     clr   TI
08AC 8699           1513                     mov             SBUF0,@r0
08AE 08             1514                     inc             r0
08AF                1515     tx4:
08AF 3099FD         1516                     jnb   TI,tx4
08B2 C299           1517                     clr   TI
08B4 8699           1518                     mov             SBUF0,@r0
08B6 08             1519                     inc             r0
08B7 D2AF           1520                     setb    EA
                    1521             ;?
08B9                1522     mr_5:
                    1523     
                    1524     
08B9 7840           1525                     mov     r0,#bufind
08BB                1526     age9:
08BB 7620           1527                     mov     @r0,#" "          ;погасить индикатор
08BD 08             1528                     inc     r0
08BE B84BFA         1529                     cjne    r0,#bufind+11,age9
08C1 78C9           1530                     mov     r0,#rez_R
08C3 120000   F     1531                     call    resar2
                    1532     
08C6 900000   F     1533                     mov     dptr,#CH_fl
08C9 120000   F     1534                     CALL  ldc_ltemp
08CC 1202B7         1535                     call    fldiv
08CF 78B8           1536                     mov     r0,#work                ;степень +
08D1 7600           1537                     mov     @r0,#0
08D3 78B9           1538                     mov     r0,#work+1;степень -
08D5 7600           1539                     mov     @r0,#0
08D7 900000   F     1540     compa1: mov     dptr,#ch_1;
08DA 120000   F     1541                     call    ldc_ltemp                       ;r8..r11
08DD 1201D6         1542                     call    flcmp
08E0 4026           1543                     jc      equ0            ;<1
08E2 78B8           1544                     mov     r0,#work                        ;степень +
08E4 06             1545                     inc     @r0
08E5 900000   F     1546                     mov     dptr,#ch_10;
08E8 120000   F     1547                     call    ldc_ltemp                       ;r8..r11
08EB 1202B7         1548                     call    fldiv
08EE 80E7           1549                     jmp     compa1                          ;work значение степени n(hex)  
                    1550     
08F0 900000   F     1551     mo500R: mov     dptr,#teOLR
08F3 120000   F     1552                     call    lotext           
08F6 120000   F     1553                     call    ind
08F9 020000   F     1554                     jmp     nobavp;nobitizm
08FC 900000   F     1555     mo500I: mov     dptr,#teOLI
08FF 120000   F     1556                     call    lotext           
0902 120000   F     1557                     call    ind
0905 020000   F     1558                     jmp     nobavp;nobitizm
0908                1559     equ0:           ;       call            ftol                    ;float->int
0908 78B8           1560                     mov     r0,#work                ;степень +
090A B60019         1561                     cjne    @r0,#0,equ00
                    1562                                     
090D 900000   F     1563     compa2: mov     dptr,#ch_1;
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    25

0910 120000   F     1564                     call    ldc_ltemp                       ;r8..r11
0913 1201D6         1565                     call    flcmp
0916 500E           1566                     jnc     equ00           ;>1
0918 78B9           1567                     mov     r0,#work+1                      ;степень -
091A 16             1568                     dec     @r0                                                     ;0,ff(-1),f
                             e(-2)...
091B 900000   F     1569                     mov     dptr,#ch_10;
091E 120000   F     1570                     call    ldc_ltemp                       ;r8..r11
0921 120203         1571                     call    flmul
0924 80E7           1572                     jmp     compa2                          ;work значение степени n(hex)  
                    1573     
0926                1574     equ00:          
0926 7853           1575                     mov     r0,#adec
0928 7952           1576                     mov     r1,#abin+3      ;hex->10
092A 120000   F     1577                     call    bindec
                    1578     
                    1579     ;если степень полож убирать младший байт
                    1580     ;чтобы уложиться в 5 разрядов, если отриц располагать
                    1581     ;число в bufind..bufind+5
092D 78B8           1582                     mov     r0,#work
092F B60021         1583                     cjne    @r0,#0,outr
0932 08             1584                     inc     r0                      ;work+1
0933 B6FF05         1585                     cjne    @r0,#0ffh,bufr3 ;6разрядов нужно вывести 5
0936 06             1586                     inc     @r0;!!!!!!!!!?
0937 785B           1587                     mov     r0,#adec+8              ;разместить в буфер индикации R
0939 8003           1588                     jmp     bufr30
                    1589     
093B 06             1590     bufr3:  inc     @r0                     ;?!!!!!!!!n+1
093C 785C           1591                     mov     r0,#adec+9
093E 7945           1592     bufr30: mov     r1,#bufind+5;6
0940 7F05           1593                     mov     r7,#5;7
0942 E6             1594     bufr2:  mov     a,@r0
0943 2430           1595                     add     a,#30h
0945 F7             1596                     mov     @r1,a
0946 19             1597                     dec     r1
0947 18             1598                     dec     r0
0948 DFF8           1599                     djnz    r7,bufr2
                    1600     
094A 784F           1601                     mov     r0,#abin
094C 120000   F     1602                     call    clear4
094F 78B9           1603                     mov     r0,#work+1
0951 801C           1604                     jmp     outr5
                    1605     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
0953 785C           1606     outr:           mov     r0,#adec+9;разместить в буфер индикации R
0955 C3             1607                     clr     c
0956 79B8           1608                     mov     r1,#work
0958 E8             1609                     mov     a,r0
0959 14             1610                     dec     a                                       ;n-1
095A 97             1611                     subb    a,@r1
095B F8             1612                     mov     r0,a                    ;adec+9-n !!!!!!!!!!!!!!!
095C 7945           1613                     mov     r1,#bufind+5;т к число разрядов > чем знакомест
095E 7F05           1614                     mov     r7,#5;7
0960 E6             1615     bufr:           mov     a,@r0
0961 2430           1616                     add     a,#30h
0963 F7             1617                     mov     @r1,a
0964 19             1618                     dec     r1
0965 18             1619                     dec     r0
0966 DFF8           1620                     djnz    r7,bufr
                    1621     
0968 784F           1622                     mov     r0,#abin
096A 120000   F     1623                     call    clear4
096D 78B8           1624                     mov     r0,#work
096F E6             1625     outr5:  mov     a,@r0
0970 F552           1626                     mov     abin+3,a
                    1627                             ;n(hex)->abin
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    26

0972 120000   F     1628                     call    findR                           ;a=2(10-2)...11(10-11)
0975 2552           1629                     add     a,abin+3
0977 F552           1630                     mov     abin+3,a
0979 7853           1631                     mov     r0,#adec
097B 7952           1632                     mov     r1,#abin+3      ;hex->10
097D 120000   F     1633                     call    bindec
0980 855C48         1634                     mov     bufind+8,adec+9
0983 855B47         1635                     mov     bufind+7,adec+8
0986 754966         1636                     mov     bufind+9,#66h
0989 434B10         1637                     orl     bufind+11,#10h;запятая после 1го знакоместа
098C 020000   F     1638                     jmp     nobavp;nobitizm;        goonin;call     ind
                    1639                                             
098F 300508         1640     mo220:  jnb     bitavp,indoll
0992 301805         1641                     jnb     knizm,indoll    ;bitizm,indoll
0995 78AE           1642                     mov     r0,#diap
0997 B6001A         1643                     cjne    @r0,#0,nodi2
                    1644                        ;10-2
099A 300414         1645     indoll: jnb     bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,пам,вычR
099D 900000   F     1646                     mov     dptr,#teOLL;OLL
09A0 120000   F     1647                     call    lotext
09A3 300609         1648                     jnb     bitvi11,goonin2
09A6 900000   F     1649                     mov     dptr,#teOLI
09A9 120000   F     1650                     call    lotext
09AC 120000   F     1651                     call    ind
09AF D217           1652     goonin2:        setb    bitoll
09B1 020000   F     1653     goonin1:        jmp     goonin
                    1654     
09B4 16             1655     nodi2:  dec     @r0     ;переключить на 1 позицию вверх
09B5 B6FF01         1656                     cjne    @r0,#0ffh,nodi9
09B8 06             1657                     inc     @r0
09B9 120000   F     1658     nodi9:  call    loadUS
                    1659                     ;call   louizm
                    1660                     ;сбросить массив
09BC 120000   F     1661                     call    clmassix
09BF 78B3           1662                     mov     r0,#summa
09C1 120000   F     1663                     call    clear4
09C4 786A           1664                     mov     r0,#rez_A0
09C6 120000   F     1665                     call    clear4
09C9 C20F           1666                     clr     bitnul  
09CB D207           1667                     setb    bitzus  ;bitbuf флаг задержки   после установки us                 
                                                           
09CD 020000   F     1668                     jmp     goonin
                    1669     
09D0 16             1670     nochi0: dec     @r0                     ;СТИ-1
09D1 020000   F     1671                     jmp     labelB  
09D4                1672     nop3_0: ;;      ;rez_A-rez_A0
                    1673                     ;;                      mov             r0,#rez_A0
                    1674                     ;;                      call    resar8
                    1675                     ;;                      call    lsub
                    1676                     ;;                      mov             r0,#rez_A
                    1677                     ;;;                     call    saver2
                    1678     
09D4 B70207         1679     no3parN:        cjne    @r1,#2,no2parN
                    1680                     ;в байт 0  записать пробел
09D7 7946           1681                     mov     r1,#bufind+6
09D9 7720           1682                     mov     @r1,#" ";0fdh;
09DB 020000   F     1683                     jmp     seeind          ;moveA3
                    1684     
09DE                1685     no2parN:                        ;в байты 0 и 1 записать пробел
09DE 7945           1686                     mov     r1,#bufind+5
09E0 7720           1687                     mov     @r1,#" ";0fdh;" "
09E2 09             1688                     inc     r1
09E3 7720           1689                     mov     @r1,#" ";0fdh;" "
09E5 8077           1690                     jmp     seeind          ;moveA3
09E7 8075           1691     rseeind:        jmp     seeind
                    1692     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    27

09E9                1693     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1694     
                    1695     
09E9                1696     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1697                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1698                     ;до конца цикла измерения результат не размещать в буфере
                    1699                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1700                     ;и возврату в режим измерения
09E9 20145C         1701                     jb              bitvich,rnorvich
09EC 201059         1702                     jb              bitt2,rnorvich
09EF 2017F5         1703                     jb              bitoll,rseeind
09F2 2011F2         1704                     jb              bitmenu,rseeind
09F5 200BEF         1705                     jb              bitmem,rseeind
                    1706             ; mov           r0,#rez_A3
                    1707             ;call   resar2
                    1708             ;call   ftol                    ;float->int r2..r5
09F8 789C           1709                     mov     r0,#rez_A3;->r2..r5       передать A3 в индикатор
09FA 120000   F     1710                     call    resar2;????????????????17.01.07
                    1711                                     
09FD 120000   F     1712                     call    maform
0A00 784F           1713                     mov     r0,#abin
0A02 120000   F     1714                     call    saver2
0A05 7853           1715                     mov     r0,#adec
0A07 7952           1716                     mov     r1,#abin+3      ;hex->10
0A09 120000   F     1717                     call    bindec
                    1718                                     
0A0C 785C           1719                     mov     r0,#adec+9;разместить в буфер индикации
0A0E 7946           1720                     mov     r1,#bufind+6
0A10 7F07           1721                     mov     r7,#7
0A12 E6             1722     bufdec: mov     a,@r0
0A13 2430           1723                     add     a,#30h
0A15 F7             1724                     mov     @r1,a
0A16 19             1725                     dec     r1
0A17 18             1726                     dec     r0
0A18 DFF8           1727                     djnz    r7,bufdec
0A1A 7847           1728                     mov     r0,#bufind+7
0A1C 762D           1729                     mov     @r0,#2dh          ;-2..-9
0A1E 7840           1730                     mov     r0,#bufind
0A20 762B           1731                     mov     @r0,#2bh
0A22 300202         1732                     jnb     znmat,nozzmi;bitznak,nozzmi
0A25 762D           1733                     mov     @r0,#2dh
0A27 79AE           1734     nozzmi: mov     r1,#diap
0A29 7848           1735                     mov     r0,#bufind+8
0A2B E7             1736                     mov     a,@r1
0A2C B4080B         1737                     cjne    a,#8,nodi8
0A2F 20151E         1738                     jb      biteizm,seegoon
0A32 7630           1739                     mov     @r0,#30h                 ;10-10
0A34 18             1740                     dec     r0
0A35 7663           1741                     mov     @r0,#63h;31h
0A37 08             1742                     inc     r0
0A38 8016           1743                     jmp     seegoon
0A3A B40910         1744     nodi8:  cjne    a,#9,nodis9
0A3D 201510         1745                     jb      biteizm,seegoon
0A40 7631           1746                     mov     @r0,#31h           ;10-11
0A42 18             1747                     dec     r0
0A43 7663           1748                     mov     @r0,#63h;31h
                    1749                             
0A45 08             1750                     inc     r0
0A46 8008           1751                     jmp     seegoon
                    1752     
0A48 020000   F     1753     rnorvich:       jmp     norvich
0A4B 8087           1754     rno3parN:       jmp     no3parN
                    1755     
0A4D 2432           1756     nodis9: add     a,#32h
0A4F F6             1757                     mov     @r0,a;#37h;"T";
0A50 08             1758     seegoon:        inc     r0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    28

0A51 7641           1759                     mov     @r0,#"A";"E";
0A53 08             1760                     inc     r0
0A54 7600           1761                     mov     @r0,#00h ;=feh в нач установе для поджига всех сегм
0A56 08             1762                     inc     r0;             mov             bufind+11
0A57 7610           1763                     mov     @r0,#010h               ;bufind+11.4 точка после первой цифры
                    1764                                             
                    1765     ;;;;;;goonind:
0A59 79AF           1766                     mov     r1,#parN        ; ??????
0A5B B703ED         1767                     cjne    @r1,#3,rno3parN ;  8.11.06
                    1768             
0A5E                1769     seeind:                         ;;;;;;;;;;;;;
0A5E 784A           1770                     mov             r0,#bufind+10
0A60 E6             1771                     mov             a,@r0
0A61 300F03         1772                     jnb             bitnul,nnnul
0A64 4408           1773                     orl             a,#08h
0A66 F6             1774                     mov             @r0,a
0A67 799A           1775     nnnul:  mov             r1,#parT
0A69 B70205         1776                     cjne            @r1,#2,nsec1
0A6C 4420           1777                     orl             a,#20h    ;1s
0A6E F6             1778                     mov             @r0,a
0A6F 800B           1779                     jmp             nsec10
0A71 B70105         1780     nsec1:  cjne            @r1,#1,nsec11
0A74 4440           1781                     orl             a,#40h                  ;10s
0A76 F6             1782                     mov             @r0,a
0A77 8003           1783                     jmp             nsec10
                    1784                                     
0A79 4410           1785     nsec11: orl             a,#10h
0A7B F6             1786                     mov             @r0,a                    ;0,1s
                    1787     
0A7C 784A           1788     nsec10: mov             r0,#bufind+10   
0A7E E6             1789                     mov             a,@r0;mov               @r0,a
0A7F 300503         1790                     jnb             bitavp,nobavp
0A82 4404           1791                     orl             a,#04           ;bufind+10.2
0A84 F6             1792                     mov             @r0,a
                    1793             ;       mov             @r0,a   
0A85 784A           1794     nobavp: mov             r0,#bufind+10   
0A87 E6             1795                     mov             a,@r0;mov               @r0,a   
0A88 301803         1796                     jnb             knizm,nobitizm
0A8B 4402           1797                     orl             a,#02
0A8D F6             1798                     mov             @r0,a
0A8E                1799     nobitizm:                       
0A8E 301A07         1800                     jnb             bitakt,notakt
0A91 C21A           1801                     clr             bitakt
0A93 534AFE         1802                     anl             bufind+10,#0feh
0A96 8005           1803                     jmp             taktind
0A98 D21A           1804     notakt: setb    bitakt
0A9A 434A01         1805                     orl             bufind+10,#01                                   
0A9D                1806     taktind:                
                    1807     ;;;;;;;;;
0A9D 301517         1808                     jnb             biteizm,yesind
0AA0 79B1           1809                     mov             r1,#vichR
0AA2 7848           1810                     mov             r0,#bufind+8
0AA4 7654           1811                     mov             @r0,#'T'
0AA6 08             1812                     inc             r0
0AA7 B72104         1813                     cjne    @r1,#21h,test9i
0AAA 7631           1814                     mov             @r0,#31h;11A
                    1815                     ;       dec             r0
                    1816                     ;       mov             @r0,#63h
0AAC 8009           1817                     jmp             yesind
                    1818     
0AAE B72204         1819     test9i: cjne            @r1,#22h,test7i
0AB1 7632           1820                     mov             @r0,#32h;39h;09A
0AB3 8002           1821                     jmp             yesind
0AB5 7633           1822     test7i: mov             @r0,#33h;37h;07A
                    1823     ;;;;;;;;;
0AB7                1824     yesind:         
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    29

0AB7 301203         1825                     jnb             bitklb,noklb
0ABA 434A80         1826                     orl             bufind+10,#80h; on kmp
0ABD 300A03         1827     noklb:  jnb             bitbon,nobuf
0AC0 434B02         1828                     orl             bufind+11,#02h; on pysk
0AC3                1829     nobuf:          ;;;;;
0AC3 301808         1830                     jnb             knizm,anlp1
0AC6 79AE           1831                     mov             r1,#diap
0AC8 C3             1832                     clr             c
0AC9 7401           1833                     mov             a,#1
0ACB 97             1834                     subb            a,@r1
0ACC 4009           1835                     jc              nop1oll
0ACE 309106         1836     anlp1:  jnb             p1.1,nop1oll
0AD1 753935         1837                     mov             nuerr,#35h
0AD4 120000   F     1838                     call            error   ;ошибка 5 перегрузка на диап 10-2,10-3  
0AD7 120000   F     1839     nop1oll:        call            ind     ;пп выдачи на индикатор
                    1840     
                    1841     
                    1842     ;       jnb     is_cmd,norvich          ;??
                    1843     ;       call    cmd_tree
                    1844     
                    1845     
                    1846     
0ADA                1847     norvich: 
0ADA 789A           1848                     mov             r0,# parT
0ADC 79AC           1849                     mov             r1,#chind
0ADE B60152         1850                     cjne            @r0,#1,rnot1in
0AE1                1851     labelB: ;;;;;;;;;;;
                    1852                     ;сдвиг по алгоритму чтобы посмотреть в цапе 
0AE1 789F           1853                     mov             r0,#rez_A3+3
                    1854                     ;;;;;;;;
0AE3 79BB           1855                     mov             r1,#work+3
0AE5 E6             1856                     mov             a,@r0
0AE6 7F07           1857                     mov             r7,#7;кол сдв вправо
0AE8 C3             1858     dvig3:  clr             c
0AE9 13             1859                     rrc             a
0AEA DFFC           1860                     djnz    r7,dvig3 ;d7,d6,d5        мл байт
0AEC FA             1861                     mov             r2,a    ;сохр байт
0AED 18             1862                     dec             r0              ;rez_A3+2
0AEE E6             1863                     mov             a,@r0
0AEF C0E0           1864                     push    acc
0AF1 C3             1865                     clr             c
0AF2 7F01           1866                     mov             r7,#1
0AF4 C3             1867     dvig2:  clr             c
0AF5 33             1868                     rlc             a
0AF6 DFFC           1869                     djnz    r7,dvig2 ;d12..d11       средний байт
0AF8 4A             1870                     orl             a,r2
0AF9 F7             1871                     mov             @r1,a;сформ мл байт
0AFA 19             1872                     dec             r1
0AFB D0E0           1873                     pop             acc
                    1874                             
0AFD 7F07           1875                     mov             r7,#7
0AFF C3             1876     dvig1:  clr             c
0B00 13             1877                     rrc             a
0B01 DFFC           1878                     djnz    r7,dvig1 ;d18     ср байт
0B03 FA             1879                     mov             r2,a   ;сохр
0B04 18             1880                     dec             r0
0B05 E6             1881                     mov             a,@r0 ;rez_A3+1
0B06 C0E0           1882                     push    acc
                    1883                     
0B08 7F01           1884                     mov             r7,#1
0B0A C3             1885     dvig0:  clr             c
0B0B 33             1886                     rlc             a
0B0C DFFC           1887                     djnz    r7,dvig0 ;        d21..d16
0B0E 4A             1888                     orl             a,r2
0B0F F7             1889                     mov             @r1,a   ; сформ средний  байт
0B10 19             1890                     dec             r1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    30

0B11 D0E0           1891                     pop             acc       ;rez_A3+1
                    1892                             ;;;;;;;;;;;;;;
                    1893     ;                       jb              acc.7,dvm
0B13 C3             1894                     clr             c
0B14 7F07           1895                     mov             r7,#7
0B16 C3             1896     dvig4:  clr             c
0B17 13             1897                     rrc             a
0B18 DFFC           1898                     djnz    r7,dvig4 ;        d22
0B1A FA             1899                     mov             r2,a    ;сохр
0B1B 18             1900                     dec             r0              ;       rez_A3
0B1C E6             1901                     mov             a,@r0
                    1902                     ;;;;;
0B1D 7F01           1903                     mov             r7,#1
0B1F C3             1904     vig0:           clr             c
0B20 33             1905                     rlc             a
0B21 DFFC           1906                     djnz    r7,vig0 ;         d24..d30
0B23 4A             1907                     orl             a,r2
0B24 F7             1908                     mov             @r1,a   ; сформ   байт
0B25 19             1909                     dec             r1
0B26 E6             1910                     mov             a,@r0
                    1911                     ;;;;;
0B27 20E70C         1912                     jb              acc.7,dvm
0B2A C3             1913                     clr             c
0B2B 7F07           1914                     mov             r7,#7
0B2D C3             1915     vig4:           clr             c
0B2E 13             1916                     rrc             a
0B2F DFFC           1917                     djnz    r7,vig4 ;         d
0B31 8009           1918                     jmp             endsdv
                    1919     
0B33 020000   F     1920     rnot1in:        jmp             not1in
                    1921     
                    1922     ;;;;;;;;;;;;                                    
0B36 7F07           1923     dvm:            mov             r7,#7
0B38 D3             1924     dvig6:  setb            c
0B39 13             1925                     rrc             a
0B3A DFFC           1926                     djnz    r7,dvig6 ;        d31
0B3C F7             1927     endsdv: mov             @r1,a
                    1928                                                             
                    1929      ;->work   
                    1930     ;?              jnb                     is_mem,md_3             ???????????????????????
                    1931     ;               call            resa_hl
                    1932     ;               call            reA3_m          ;write A3 to Mem
                    1933     ;               call            save_hlm                ;bound of 200
                    1934     ;               setb            EA
                    1935     ;               sjmp            me_5
                    1936     
0B3D                1937     md_3:
0B3D                1938     md_5:
0B3D 301E11         1939             jnb     is_rs,me_5
                    1940     ;       jb      bitvi11,me_5    ;rez_R is out
0B40 301704         1941             jnb     bitoll,moveA3_
0B43 789C           1942             mov     r0,#rez_A3
0B45 7681           1943             mov     @R0,#81h
0B47                1944     moveA3_:
0B47 749C           1945             mov     A,#rez_A3       ;Ame,..; bufind - no use: for fastest isn't screen output
0B49 F526           1946             mov     p_out,A
0B4B 752404         1947             mov     cnt_out,#4
0B4E 75997F         1948             mov     SBUF0,#7Fh      ;was cmd_rez
0B51                1949     me_5:                   ;??????????????????
0B51 300C37         1950                     jnb     is_2,me_6
0B54 120000   F     1951                     call    resa_hl ;dptr=(saven_bl)/2/3/4
0B57 120000   F     1952                     call    loA3_X;адрес след ячейки внешн озу храним в ячейке saven_bl
0B5A 120000   F     1953                     call            save_hl
0B5D 78AE           1954                     mov                     r0,#diap
0B5F E6             1955                     mov                     a,@r0
0B60 7938           1956                     mov                     r1,#nblok
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    31

0B62 B70104         1957                     cjne            @r1,#1,nosv1    ;?????
0B65 F534           1958                     mov                     sadiap,a
0B67 8010           1959                     jmp                     tostro
0B69 B70204         1960     nosv1:  cjne            @r1,#2,nosv2
0B6C F532           1961                     mov                     sadiap2,a
0B6E 8009           1962                     jmp                     tostro
0B70 B70304         1963     nosv2:  cjne            @r1,#3,nosv3
0B73 F531           1964                     mov                     sadiap3,a
0B75 8002           1965                     jmp                     tostro
0B77                1966     nosv3:          
0B77 F530           1967                     mov                     sadiap4,a
0B79                1968     tostro:
                    1969     
                    1970     ;               inc             cnt_out
                    1971     ;               mov             a,#200
                    1972     ;               subb    a,cnt_out
0B79 1524           1973                     dec             cnt_out
0B7B E524           1974                     mov             A,cnt_out
0B7D 700C           1975                     jnz             me_6
0B7F C20C           1976                     clr             is_2
0B81 789A           1977                     mov             R0,#parT
0B83 7602           1978                     mov             @R0,#2  ;1 sec
0B85 75A890         1979                     mov     IE,#90h ;Снятие блокировки всех прерываний+RS
                    1980     ;       setb    is_izm  ;???
0B88 020000   F     1981             jmp     after_2 ;keyb1
0B8B                1982     me_6:
                    1983                             ;??????????????????
0B8B 900000   F     1984                     mov             dptr,#chzap
0B8E 120000   F     1985                     call    ldc_long
0B91 78BB           1986                     mov             r0,#work+3
0B93 120000   F     1987                     call    ladd
0B96 ED             1988                     mov             a,r5
0B97 F5D2           1989                     mov             DAC0L,a
                    1990                             
0B99 EC             1991                     mov             a,r4
0B9A F5D3           1992                     mov             DAC0H,a
                    1993     
                    1994                                             ;;;;;;;;;;
0B9C 78CF           1995                     mov                     r0,#chbuf               ;float
0B9E 120000   F     1996                     call            resar2
0BA1 900000   F     1997                     mov                     dptr,#ch_2;ch0;ch_1
0BA4 120000   F     1998                     call            ldc_ltemp
0BA7 1201D6         1999                     call            flcmp
0BAA 5020           2000                     jnc                     rnobuf0
                    2001                                             
0BAC 900000   F     2002                     mov                     dptr,#ch_1
0BAF 120000   F     2003                     call            ldc_ltemp
0BB2 1201D1         2004                     call            flsub
0BB5 900E00         2005                     mov                     dptr,#chbuf1                    ;СБ1 внешн озу
0BB8 EA             2006                     mov                     a,r2
0BB9 F0             2007                     movx            @dptr,a
0BBA A3             2008                     inc                     dptr
0BBB EB             2009                     mov                     a,r3
0BBC F0             2010                     movx            @dptr,a
0BBD A3             2011                     inc                     dptr
0BBE EC             2012                     mov                     a,r4
0BBF F0             2013                     movx            @dptr,a
0BC0 A3             2014                     inc                     dptr
0BC1 ED             2015                     mov                     a,r5
0BC2 F0             2016                     movx            @dptr,a
                    2017                                             
                    2018                                             
                    2019                                             ;jnc                    rnobuf0
0BC3 200909         2020                     jb              bitprd,yesprd   ;передать   A3 в буфер
0BC6 200A08         2021                     jb              bitbon,yesbuf   ;записать   A3 в буфер
0BC9 020000   F     2022                     jmp             gocikle
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    32

0BCC 020000   F     2023     rnobuf0:        jmp             nobuf0
0BCF                2024     yesprd: ;передать   A3 в буфер
0BCF 8045           2025                     jmp             goonT
0BD1                2026     yesbuf:         ;записать   A3 в буфер
0BD1 120000   F     2027                     call            resa_hl;dptr-
0BD4 120000   F     2028                     call            loA3_X  ;адрес след ячейки внешн озу храним
                    2029                                                                             ;в ячейке saven_bl
0BD7 120000   F     2030                     call            save_hl
0BDA 78AE           2031                     mov                     r0,#diap
0BDC E6             2032                     mov                     a,@r0
0BDD 7938           2033                     mov                     r1,#nblok
0BDF B70104         2034                     cjne            @r1,#1,nosav1
0BE2 F534           2035                     mov                     sadiap,a
0BE4 8012           2036                     jmp                     gotostrob
0BE6 B70204         2037     nosav1: cjne            @r1,#2,nosav2
0BE9 F532           2038                     mov                     sadiap2,a
0BEB 800B           2039                     jmp                     gotostrob
0BED B70304         2040     nosav2: cjne            @r1,#3,nosav3
0BF0 F531           2041                     mov                     sadiap3,a
0BF2 8004           2042                     jmp                     gotostrob
0BF4                2043     nosav3:         
0BF4 F530           2044                     mov                     sadiap4,a
0BF6 8000           2045                     jmp                     gotostrob
                    2046     
                    2047                             ;строб
0BF8                2048     gotostrob:
0BF8 E586           2049                     mov             a,P6            ;p6.4=0
0BFA 54EF           2050                     anl             a,#0efh
0BFC F586           2051                     mov             P6,a
0BFE 00             2052                     nop
0BFF 00             2053                     nop
0C00 E586           2054                     mov             a,P6                    ;p6.4=1 
0C02 4410           2055                     orl             a,#10h
0C04 F586           2056                     mov             P6,a
                    2057                                     ;;;;;;;;;
0C06 E5DA           2058                     mov             a,PCA0CPM0;     
0C08 4446           2059                     orl             a,#46h;anl              a,#0fbh
0C0A F5DA           2060                     mov             PCA0CPM0,a
0C0C 75CDD0         2061                     mov             TH2,#0d0h
0C0F 75CC00         2062                     mov             TL2,#00
                    2063     
0C12 D2CA           2064                     setb            T2CON.2
0C14 D2AD           2065                     setb            ET2;IE.5                            
0C16 78CD           2066     goonT:  mov             r0,#interva;high  byte loadr2
0C18 E6             2067                     mov             a,@r0
0C19 FC             2068                     mov             r4,a
0C1A 08             2069                     inc             r0
0C1B E6             2070                     mov             a,@r0
0C1C FD             2071                     mov             r5,a
0C1D E4             2072                     clr             a
0C1E FB             2073                     mov             r3,a
0C1F FA             2074                     mov             r2,a                            ;r2..r5-interval(hex)
0C20 120402         2075                     call            altof                   ;r2..r5->interval (float)
                    2076     
0C23 789A           2077                     mov             r0,#parT
0C25 B60108         2078                     cjne            @r0,#1,nott1
0C28 900000   F     2079                     mov             dptr,#ch_2       
0C2B 120000   F     2080                     call            ldc_ltemp
0C2E 8009           2081                     jmp             intmul
                    2082     
0C30 B60225         2083     nott1:  cjne    @r0,#2,nott2
0C33 900000   F     2084                     mov             dptr,#ch_10      
0C36 120000   F     2085                     call            ldc_ltemp
                    2086                                                                             
0C39 120203         2087     intmul: call            flmul                                   ;*10
0C3C 900E00         2088     intmul1:        mov             dptr,#chbuf1    ;СБ1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    33

0C3F E0             2089                     movx    a,@dptr
0C40 F508           2090                     mov             r8,a
0C42 A3             2091                     inc             dptr
0C43 E0             2092                     movx    a,@dptr
0C44 F509           2093                     mov             r9,a
0C46 A3             2094                     inc             dptr
0C47 E0             2095                     movx    a,@dptr
0C48 F50A           2096                     mov             r10,a
0C4A A3             2097                     inc             dptr
0C4B E0             2098                     movx    a,@dptr
0C4C F50B           2099                     mov             r11,a
0C4E 120166         2100                     call            fladd           ;СБ+СБ1
0C51 78CF           2101     intmul2:        mov                     r0,#chbuf
0C53 120000   F     2102                     call            saver2          ;*2
                    2103                                     
0C56 8035           2104                     jmp             gocikle
                    2105     
0C58 B6030B         2106     nott2:  cjne    @r0,#3,nott3
0C5B 900000   F     2107                     mov                     dptr,#ch_2       
0C5E 120000   F     2108                     call            ldc_ltemp
0C61 120203         2109                     call            flmul
0C64 80EB           2110                     jmp                     intmul2                                 ;*2
                    2111     
                    2112     
0C66 B60414         2113     nott3:  cjne    @r0,#4,nott4
0C69 900000   F     2114                     mov                     dptr,#ch_10      
0C6C 120000   F     2115                     call            ldc_ltemp       ;/10*4
0C6F 1202B7         2116                     call            fldiv
0C72 900000   F     2117                     mov                     dptr,#ch_4       
0C75 120000   F     2118                     call            ldc_ltemp
0C78 120203         2119                     call            flmul
0C7B 80D4           2120                     jmp             intmul2
                    2121     
0C7D B6050B         2122     nott4:  cjne    @r0,#5,nott5
0C80 900000   F     2123                     mov             dptr,#ch_2       
0C83 120000   F     2124                     call            ldc_ltemp;*2
0C86 120203         2125                     call            flmul
0C89 80C6           2126                     jmp             intmul2;T=5
0C8B                2127     nott5:  ;       mov             dptr,#ch_1       
                    2128                     ;       call            ldc_ltemp
                    2129                     ;       call            flmul
0C8B 80C4           2130                     jmp     intmul2                                 ;*1
                    2131     
                    2132     
0C8D 300708         2133     gocikle:        jnb     bitzus,nofz                     
0C90 120000   F     2134                     call    z_05s    ;0,5c
0C93 120000   F     2135                     call    z_05s    ;0,5c
0C96 C207           2136                     clr     bitzus  ;bitbuf бит задержки засылки us
0C98 020000   F     2137     nofz:           jmp     labelA;rebyte
                    2138     
                    2139     
0C9B 80F0           2140     yestt5: jmp             gocikle
                    2141     
0C9D 78CF           2142     nobuf0: mov             r0,#chbuf
0C9F 120000   F     2143                     call            resar2
0CA2 900000   F     2144                     mov                     dptr,#ch_1       
0CA5 120000   F     2145                     call            ldc_ltemp
0CA8 1201D1         2146                     call            flsub
0CAB 78CF           2147                     mov                     r0,#chbuf       
0CAD 120000   F     2148                     call            saver2  
0CB0 80DB           2149                     jmp             gocikle
                    2150     
                    2151     
0CB2 B60205         2152     not1in: cjne    @r0,#2,not2in
0CB5 7701           2153                     mov             @r1,#1           ;T=2
0CB7 020000   F     2154                     jmp     labelB
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    34

                    2155     
0CBA B60305         2156     not2in: cjne    @r0,#3,not3in
0CBD 7701           2157                     mov             @r1,#1;9                ;T=3
0CBF 020000   F     2158                     jmp     labelB
0CC2 7703           2159     not3in: mov             @r1,#3;19
0CC4 020000   F     2160                     jmp     labelB
                    2161     
                    2162     
                    2163     ;;;;;;;;;;;3.11.06
                    2164     
                    2165     ;;коррекция 0
0CC7 7883           2166     KORnul: mov             r0,#chdel
0CC9 B60010         2167                     cjne    @r0,#0,nonuldel
                    2168                                     
0CCC E584           2169                     mov             a,p4                    ;сохр  us
0CCE F536           2170                     mov             saus,a
0CD0 E585           2171                     mov             a,p5
0CD2 F537           2172                     mov             saus+1,a
                    2173     
0CD4 900000   F     2174                     mov             dptr,#kor0us
0CD7 120000   F     2175                     call    lospus          ;упр слово коррекции 0
0CDA 8018           2176                     jmp     chdelmo
                    2177     
0CDC                2178     nonuldel:       ;cjne   @r0,#7,no4del
0CDC B6031B         2179                     cjne    @r0,#3,no4del
                    2180                             ;рез ->AN
0CDF 7862           2181                     mov     r0,#rez_A;->r2..r5
0CE1 120000   F     2182                     call    resar2
                    2183                                             ;;;;;;;;;;
0CE4 120402         2184                     call    altof           ;r2..r5->float
0CE7 7884           2185                     mov     r0,#kor0_AN;->kor0_AN
0CE9 120000   F     2186                     call    saver2
                    2187                                     
0CEC E536           2188                     mov             a,saus                  ;восстан исходное упр слово
0CEE F584           2189                     mov             p4,a
0CF0 E537           2190                     mov             a,saus+1
0CF2 F585           2191                     mov             p5,a            
0CF4 7883           2192     chdelmo:        mov             r0,#chdel
0CF6 06             2193                     inc             @r0             ;chdel+1
0CF7 020000   F     2194                     jmp              rebyte
                    2195     
0CFA                2196     no4del:         ;cjne   @r0,#14,chdelmo
0CFA B606F7         2197                     cjne    @r0,#6,chdelmo
0CFD 7600           2198                     mov             @r0,#0          ;chdel
0CFF 7898           2199                     mov             r0,#chinkor
0D01 7602           2200                     mov             @r0,#2;00;
0D03 08             2201                     inc             r0
0D04 7658           2202                     mov             @r0,#58h;0c8h
0D06 120000   F     2203                     call    clmassix;сбросить массив скольз среднего
0D09                2204     bonpart:
0D09 300A20         2205                     jnb             bitbon,rebyter
0D0C 78CF           2206                     mov             r0,#chbuf
0D0E 120000   F     2207                     call            resar2
0D11 799A           2208                     mov             r1,#parT
0D13 B70211         2209                     cjne            @r1,#2,no6del
0D16 900000   F     2210                     mov             dptr,#ch_7;5
0D19                2211     no5del:
0D19 120000   F     2212                     call            ldc_ltemp
0D1C 1201D1         2213                     call            flsub   
0D1F 78CF           2214                     mov             r0,#chbuf
0D21 120000   F     2215                     call            saver2
0D24 020000   F     2216                     jmp             rebyte
0D27                2217     no6del:
0D27 900000   F     2218                     mov             dptr,#ch_1
0D2A 80ED           2219                     jmp             no5del
                    2220     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    35

0D2C 020000   F     2221     rebyter:        jmp             rebyte
                    2222     
0D2F 7981           2223     tekaout:        mov             r1,#chavt
0D31 770C           2224                     mov             @r1,#0ch;6;1;
0D33 09             2225                     inc             r1
0D34 7780           2226                     mov             @r1,#80h;40h;
0D36 020000   F     2227                     jmp             noavk
                    2228     
                    2229     ;автокалибровка
0D39 200AF3         2230     autoka: jb              bitbon,tekaout;rebyter
0D3C                2231     nulavt:  ;;;;;
0D3C 7883           2232                     mov             r0,#chdel
0D3E B60016         2233                     cjne    @r0,#0,nndelch
0D41 E584           2234                     mov             a,p4                    ;сохр  us
0D43 F536           2235                     mov             saus,a
0D45 E585           2236                     mov             a,p5
0D47 F537           2237                     mov             saus+1,a
                    2238     
0D49 E585           2239                     mov   a,p5
0D4B 4404           2240                     orl             a,#04              ;p5.2=1
0D4D 00             2241                     nop
0D4E 00             2242                     nop
0D4F 543F           2243                     anl             a,#3fh          ;p5.6,p5.7=0
0D51 F585           2244                     mov   p5,a
0D53 06             2245                     inc             @r0
0D54 020000   F     2246                     jmp              rebyte
0D57 B6033D         2247     nndelch:        cjne    @r0,#3,n4delch
                    2248                             ;pez->A+
                    2249                             ;K+=000/(A+-AN)
                    2250                             ;mov            r0,#rez_A;->r2..r5
                    2251                             ;call   resar2
0D5A E577           2252                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0D5C FA             2253                     mov             r2,a
0D5D E578           2254                     mov             a,reacp+1
0D5F FB             2255                     mov             r3,a
0D60 E579           2256                     mov             a,reacp+2
0D62 FC             2257                     mov             r4,a
0D63 E57A           2258                     mov             a,reacp+3
0D65 FD             2259                     mov             r5,a
                    2260                             ;;;;;;;;;;;;;;;
0D66 120402         2261                     call    altof                   ;r2..r5->float
0D69 7888           2262                     mov     r0,#rezAp;->rezAp
0D6B 120000   F     2263                     call    saver2                          
0D6E 7884           2264                     mov     r0,#kor0_AN;kor0_AN->r8..r11
0D70 120000   F     2265                     call    resar8                          
0D73 1201D1         2266                     call    flsub           ; r2..r5(A+-AN)
0D76 120000   F     2267                     call    move28     ;r2..r5->r8..r11
0D79 900000   F     2268                     mov     dptr,#CH2tho;000->r2..r5 float
0D7C 120000   F     2269                     call    ldc_long                
0D7F 1202B7         2270                     call    fldiv
0D82 EA             2271                     mov     a,r2
0D83 547F           2272                     anl     a,#7fh
0D85 FA             2273                     mov     r2,a
0D86 7890           2274                     mov     r0,#koefKp;->koefKp
0D88 120000   F     2275                     call    saver2
                    2276                      
                    2277                     ;anl            P5,#0feh                ;p5.0=0 
0D8B E585           2278                     mov     a,P5
0D8D 543B           2279                     anl     a,#3bh;acp-
0D8F F585           2280                     mov     P5,a
0D91 7883           2281                     mov     r0,#chdel
0D93 06             2282                     inc     @r0                       ;ch+1
0D94 020000   F     2283                     jmp     rebyte
                    2284     
0D97 B6063F         2285     n4delch:        cjne    @r0,#6,n8delch
                    2286                     ; pez->A-
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    36

                    2287                     ;K-=000/(A--AN)
                    2288                     ;       mov     r0,#rez_A;->r2..r5
                    2289                     ;       call    resar2
0D9A E577           2290                     mov     a,reacp         ;r2..r5 &&&&&&&&&&&
0D9C FA             2291                     mov     r2,a
0D9D E578           2292                     mov     a,reacp+1
0D9F FB             2293                     mov     r3,a
0DA0 E579           2294                     mov     a,reacp+2
0DA2 FC             2295                     mov     r4,a
0DA3 E57A           2296                     mov     a,reacp+3
0DA5 FD             2297                     mov     r5,a
                    2298                                     ;;;;;;;;;;;;;;;
0DA6 120402         2299                     call    altof                   ;r2..r5->float
0DA9 788C           2300                     mov     r0,#rezAm;->rezAm
0DAB 120000   F     2301                     call    saver2                          
0DAE 7884           2302                     mov     r0,#kor0_AN;kor0_AN->r8..r11
0DB0 120000   F     2303                     call    resar8                          
0DB3 1201D1         2304                     call    flsub                   ; r2..r5(A--AN)
0DB6 120000   F     2305                     call    move28                  ;r2..r5->r8..r11
0DB9 900000   F     2306                     mov     dptr,#CH2tho    ;000->r2..r5 float
0DBC 120000   F     2307                     call    ldc_long                
0DBF 1202B7         2308                     call    fldiv
0DC2 EA             2309                     mov     a,r2
0DC3 547F           2310                     anl     a,#7fh
0DC5 FA             2311                     mov     r2,a
0DC6 7894           2312                     mov     r0,#koefKm;->koefKm
0DC8 120000   F     2313                     call    saver2
                    2314                      
0DCB E536           2315                     mov     a,saus                  ;восстан исходное упр слово
0DCD F584           2316                     mov     p4,a
0DCF E537           2317                     mov     a,saus+1
0DD1 F585           2318                     mov     p5,a            
0DD3 7883           2319                     mov     r0,#chdel
0DD5 06             2320                     inc     @r0                       ;ch+1
0DD6 020000   F     2321                     jmp     rebyte
                    2322     
0DD9 B6090F         2323     n8delch:        cjne            @r0,#9,n12delch
0DDC 7600           2324                     mov             @r0,#0
0DDE 7981           2325                     mov             r1,#chavt
0DE0 773E           2326                     mov             @r1,#3eh;0ch;
0DE2 09             2327                     inc             r1
0DE3 7780           2328                     mov             @r1,#80h;
0DE5 120000   F     2329                     call            clmassix     ;сбросить массив среднего
0DE8 020000   F     2330                     jmp             rebyte; bonpart;
0DEB 06             2331     n12delch:       inc             @r0
0DEC 020000   F     2332                     jmp             rebyte
                    2333     
                    2334     
                    2335     
                    2336                                 
0DEF 020000   F     2337     rout6:  jmp             out6
0DF2 020000   F     2338     rlabelF:        jmp             labelF  
0DF5 020000   F     2339     rknrazr:        jmp             knrazr  
0DF8 020000   F     2340     rknopt: jmp             knopt
0DFB 020000   F     2341     rizman: jmp             izman
                    2342             
0DFE 020000   F     2343     no0chkl:        jmp             kkout6
                    2344     ;?never here
0E01 75AD00         2345                     mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
0E04 75B0C0         2346                     mov             P3,#0c0h
0E07 32             2347                     reti
0E08                2348     keyb1:  ;IE6
                    2349     ;;;;;
                    2350                     ;       mov                     a,chkl+1                ;low
                    2351                     ;       jnz                     no0chkl
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    37

                    2352                     ;       mov                     a,chkl                          ;high
                    2353                     ;       jnz                     no0chkl
                    2354     ;;;;;
0E08 75E700         2355                     mov             EIE2,#00H
0E0B 75AD00         2356                     mov             P3IF,#00
                    2357                                     
0E0E C0E0           2358                     push    acc
0E10 C0D0           2359                     push    psw
0E12 C000           2360                     push    rr0
0E14 C001           2361                     push    rr1
0E16 C002           2362                     push    rr2
0E18 C003           2363                     push    rr3
0E1A C004           2364                     push    rr4
0E1C C005           2365                     push    rr5
0E1E C006           2366                     push    rr6
0E20 C007           2367                     push    rr7
0E22 C082           2368                     push    dpl
0E24 C083           2369                     push    dph
                    2370                                     ;clr            bitmig
                    2371                       ;;;;;;;;;;;;;;
0E26 120000   F     2372                      call   z_01s;0,1s
                    2373                                     ;       call    z_01s
                    2374                                     ;восстан знакоместо при мигании
                    2375                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0E29 78B2           2376                     mov             r0,#marker
0E2B 7440           2377                     mov             a,#bufind
0E2D 26             2378                     add             a,@r0                   ;a=bufind+marker
0E2E F9             2379                     mov             r1,a
0E2F A73C           2380                     mov             @r1,savba
                    2381                                     ;;;;;;;;;;;
                    2382     ;???
                    2383                     
0E31 301F05         2384                     jnb             is_izm,gout6__
0E34 C21F           2385                     clr             is_izm
0E36 020000   F     2386                             jmp     izman   ;button 'izm'?
                    2387     
                    2388     ;gout6_:
                    2389     ;               jnb             is_mem,gout6__
                    2390     ;               clr             is_mem
                    2391     ;                       jmp     findmem ;button 'mem'?
                    2392     
0E39                2393     gout6__:        ;usual
                    2394     
0E39 E5B0           2395                     mov             a,p3
0E3B 20E644         2396                     jb              acc.6,outviR;выход из режима выч R
0E3E E5B0           2397     gout6:  mov             a,p3
0E40 44FF           2398                     orl             a,#0ffh         ; p3.(5-0)<-3f
0E42 F5B0           2399                     mov             p3,a
0E44 E5B0           2400                     mov             a,p3
0E46 30E6A6         2401                     jnb             acc.6,rout6             ;error
0E49 3004A6         2402                     jnb             bitizm,rlabelF
0E4C 75B0FE         2403                     mov             p3,#0feh                ;реж IZM
0E4F E5B0           2404                     mov             a,p3
0E51 30E6A7         2405                     jnb             acc.6,rizman
                    2406                                     ;;;;;;
0E54 201232         2407                     jb              bitklb,goklb
0E57 75B0FD         2408                     mov             p3,#0fdh
0E5A E5B0           2409                     mov             a,p3
0E5C 30E696         2410                     jnb             acc.6,rknrazr             ;labelC
0E5F 75B0FB         2411                     mov             p3,#0fbh
0E62 E5B0           2412                     mov             a,p3
0E64 30E64F         2413                     jnb             acc.6,knright           ;->
0E67 75B0F7         2414                     mov             p3,#0f7h
0E6A E5B0           2415                     mov             a,p3
0E6C 30E689         2416                     jnb             acc.6,rknopt                    ;T
0E6F 75B0EF         2417                     mov             p3,#0efh
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    38

0E72 E5B0           2418                     mov             a,p3
0E74 30E615         2419                     jnb             acc.6,pyskst                    ;pysk/stop
0E77 75B0DF         2420                     mov             p3,#0dfh
0E7A E5B0           2421                     mov             a,p3
0E7C 30E658         2422                     jnb             acc.6,knvich
0E7F 020000   F     2423                     jmp             izmpaT
                    2424     
0E82 3006B9         2425     outviR: jnb             bitvi11,gout6   
0E85 C214           2426                     clr             bitvich                         ;выход из режима выч R  
0E87 C206           2427                     clr             bitvi11
                    2428                                     
0E89 020000   F     2429     goklb:  jmp             out6
                    2430     
0E8C 200A0B         2431     pyskst: jb      bitbon,bufon            ;pysk/stop
0E8F D20A           2432                     setb    bitbon  ;уст реж буфер вкл
                    2433     ;?              mov     r1,#volume      ;work   обьем блока
                    2434     ;               mov     @r1,#00
                    2435     ;               inc     r1
                    2436     ;?              mov     @r1,#0c7h               ;320h/4
0E91 434B02         2437                     orl     bufind+11,#02h  ; on pysk
0E94 120000   F     2438                     call    ind
0E97 020000   F     2439                     jmp     izmpaT
0E9A C20A           2440     bufon:  clr     bitbon  ;уст реж буфер выкл
0E9C 534BFD         2441                     anl     bufind+11,#0fdh; off pysk
0E9F 120000   F     2442                     call    ind
0EA2 020000   F     2443                     jmp     izmpaT
                    2444     
0EA5 79B0           2445     tizmri: mov     r1,#level
0EA7 B70102         2446                     cjne    @r1,#1,right2
                    2447                                     ;10s->HET
0EAA 8004           2448                     jmp             right3
                    2449     
0EAC 07             2450     right2: inc             @r1
0EAD 120000   F     2451                     call            lolevT
                    2452                     ;call   loadT   ;нажата кн-> в реж Tизм 
0EB0 120000   F     2453     right3: call            ind
0EB3 020000   F     2454                     jmp             izmfun
                    2455     
                    2456                             
                    2457                             
0EB6 79AE           2458     knright:        mov             r1,#diap
                    2459                     ;перекл диапазон 1 поз вверх сбр массив
0EB8 17             2460                     dec             @r1
0EB9 B7FF04         2461                     cjne    @r1,#0ffh,diinc
0EBC 7700           2462                     mov             @r1,#0
0EBE 807A           2463                     jmp             izmfun
0EC0 120000   F     2464     diinc:  call            clmassix
0EC3 78B3           2465                     mov             r0,#summa
0EC5 120000   F     2466                     call            clear4
0EC8 786A           2467                     mov             r0,#rez_A0
0ECA 120000   F     2468                     call            clear4
0ECD C20F           2469                     clr             bitnul          ;гасить светодиод НУЛЬ  
0ECF 120000   F     2470                     call            loadUS
0ED2 8066           2471                     jmp             izmfun
                    2472     
0ED4 020000   F     2473     vit2_10:        jmp             out6
                    2474     
                    2475     
0ED7                2476     knvich: ;12.02.07
0ED7 789A           2477                     mov             r0,#parT
0ED9 C3             2478                     clr             c
0EDA 7404           2479                     mov             a,#4 
0EDC 96             2480                     subb            a,@r0
0EDD 40F5           2481                     jc              vit2_10;не нажимать кнопку ВЫЧ R T=10ms,2ms
0EDF 2015F2         2482                     jb              biteizm,vit2_10;не нажимать кнопку ВЫЧ во время теста
0EE2 200613         2483                     jb              bitvi11,onvich
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    39

0EE5 C204           2484                     clr             bitizm
0EE7 D214           2485                     setb            bitvich
                    2486                                     
0EE9 78B1           2487                     mov             r0,#vichR
0EEB 7611           2488                     mov             @r0,#11h;;????????or 0
                    2489                             ;ВЫЧИСЛИТЬ
0EED 900000   F     2490                     mov             dptr,#teVICH
0EF0 120000   F     2491                     call            lotext
0EF3 120000   F     2492                     call            z_1s;;;;;;;
0EF6 8073           2493                     jmp             viout;izmpaT
                    2494     
0EF8 C214           2495     onvich: clr             bitvich ;???
                    2496                                                     ;;;;;;;;28.02
0EFA C206           2497                     clr             bitvi11
0EFC D204           2498                     setb            bitizm
                    2499                                                     ;;;;;;;;;
0EFE 78B1           2500                     mov             r0,#vichR
0F00 7600           2501                     mov             @r0,#0
0F02 803A           2502                     jmp             izmpaT
                    2503     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0F04 301820         2504     louizm: jnb             knizm,lou
0F07 79AE           2505                     mov             r1,#diap
0F09 C3             2506                     clr             c
0F0A 7403           2507                     mov             a,#3
0F0C 97             2508                     subb            a,@r1
0F0D 5006           2509                     jnc             lldi23  ;10-2..10-5
                    2510                             ;10-6..10-11
0F0F E584           2511                     mov             a,p4
0F11 54F7           2512                     anl             a,#0f7h ;d3
0F13 F584           2513                     mov             p4,a
0F15 E7             2514     lldi23: mov             a,@r1
0F16 6403           2515                     xrl             a,#3
0F18 7002           2516                     jnz             lldi3
0F1A 8005           2517                     jmp             lldi2           ;10-5
0F1C E7             2518     lldi3:  mov             a,@r1
0F1D 6402           2519                     xrl             a,#2            ;
0F1F 7006           2520                     jnz             lou             
0F21 E585           2521     lldi2:  mov             a,p5            ;10-4
0F23 4408           2522                     orl             a,#08
0F25 F585           2523                     mov             p5,a
0F27 22             2524     lou:            ret
                    2525                               ;;;;;;
0F28 201511         2526     izman:  jb              biteizm,ontest  
0F2B 201807         2527                     jb              knizm,knizmon
0F2E                2528     izman1:
0F2E D218           2529                     setb            knizm           ;уст реж ИЗМ ВКЛ
                    2530                     ;       d3(k5 p4),d3(u5 p5)заслать us
0F30 120000   F     2531                     call            louizm 
0F33 8005           2532                     jmp             izmfun
                    2533     
                    2534     
0F35 C218           2535     knizmon:        clr             knizm           ;уст реж ИЗМ ВЫКЛ
0F37 120000   F     2536                     call            loadUS;восстановить us
0F3A                2537     izmfun:                 
0F3A D207           2538                     setb            bitzus;bitbuf
0F3C 8000           2539     ontest: jmp             labelE;;;;;;;;;;;;
                    2540                                     ;;;;;;;;;;;;;;
0F3E                2541     izmpaT:
                    2542     ;;;;;;;;;;;;;;;;;
                    2543                     ;       clr             c 
                    2544                     ;       mov             r1,#parN
                    2545     
                    2546                     ;       mov             r0,#diap
                    2547                     ;       mov             a,#6            
                    2548                     ;       subb    a,@r0
                    2549                     ;       jnc             labelE          ;         ;10-2..10-8
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    40

                    2550                               
                    2551                     ;       mov             @r1,#2          ;10-9..10-11            
                    2552                     ;       jmp             labelE
                    2553     
                    2554     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0F3E 789A           2555     labelE: mov             r0,#parT
0F40 793D           2556                     mov             r1,#chkl
0F42 B60108         2557                     cjne    @r0,#1,izmt2
0F45 7700           2558                     mov             @r1,#0
0F47 09             2559                     inc             r1
0F48 7701           2560                     mov             @r1,#1;2
0F4A 020000   F     2561                     jmp             out6
0F4D B60208         2562     izmt2:  cjne    @r0,#2,izmt3
0F50 7700           2563                     mov             @r1,#0
0F52 09             2564                     inc             r1
0F53 7702           2565                     mov             @r1,#2;10;20
0F55 020000   F     2566                     jmp             out6
                    2567     
0F58 7700           2568     izmt3:  mov             @r1,#0
0F5A 09             2569                     inc             r1
0F5B 770A           2570                     mov             @r1,#10;20;0
0F5D 020000   F     2571                     jmp             out6
                    2572     
                    2573     
                    2574     
                    2575     
0F60                2576     knopt: ;кнопка T                                ???
0F60 C204           2577                     clr             bitizm
0F62 D210           2578                     setb            bitt2
0F64 79B7           2579                     mov             r1,#load
0F66 7704           2580                     mov             @r1,#4;1s
0F68 120000   F     2581                     call            loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2582                     
0F6B 793D           2583     viout:  mov             r1,#chkl
0F6D 7703           2584                     mov             @r1,#03
0F6F 09             2585                     inc             r1
0F70 77E8           2586                     mov             @r1,#0e8h               ;1000
0F72 020000   F     2587                     jmp             out6
                    2588     
0F75                2589     knrazr:          ;???
0F75 C3             2590     labelC: clr             c
0F76 78AF           2591                     mov             r0,#parN
0F78 799A           2592                     mov             r1,#parT
0F7A 7402           2593                     mov             a,#2
0F7C 97             2594                     subb            a,@r1
0F7D 40BF           2595                     jc              labelE          ;T>2
0F7F B60104         2596                     cjne            @r0,#1,noN1c
0F82 7602           2597                     mov             @r0,#2          ;N=2
0F84 80B8           2598                     jmp             labelE
                    2599     
0F86 B60204         2600     noN1c:  cjne            @r0,#2,not_1
0F89 7603           2601                     mov             @r0,#3          ;N=3      ;10-2..10-8
0F8B 80B1           2602                     jmp             labelE
                    2603     
0F8D                2604     not_10: 
0F8D 7601           2605     not_1:  mov             @r0,#1                          ;N=1
0F8F 80AD           2606                     jmp             labelE
                    2607     
0F91 020000   F     2608     rtizmri:        jmp             tizmri
                    2609     
0F94 75B0F7         2610     ttout:  mov             p3,#0f7h
0F97 20B6D1         2611                     jb              p3.6,viout
0F9A D204           2612                     setb            bitizm  ;отжатие кнопки t
0F9C C210           2613                     clr             bitt2
0F9E 809E           2614                     jmp             labelE
0FA0                2615     labelf:                 
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    41

0FA0 301035         2616                     jnb             bitt2,nofizm
0FA3 75B0FB         2617                     mov             p3,#0fbh
0FA6 E5B0           2618                     mov             a,p3
0FA8 20E6E9         2619                     jb              acc.6,ttout;outF
0FAB 79B7           2620                     mov             r1,#load;parT
0FAD B70502         2621                     cjne            @r1,#5,noft1
                    2622                        ;t=10s
0FB0 80B9           2623                     jmp             viout;out6;ft1izm
                    2624     
0FB2 07             2625     noft1:  inc             @r1;dec         @r1
0FB3 120000   F     2626     ft1izm: call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2627                             ;call   ind
0FB6 80B3           2628                     jmp             viout;out6;??????????????/
                    2629     
                    2630                     ;увеличить счетчик задержки клавиатуры
0FB8 783D           2631     outF:           mov             r0,#chkl
0FBA 7627           2632                     mov             @r0,#27h
0FBC 08             2633                     inc             r0
0FBD 7610           2634                     mov             @r0,#10h
0FBF 020000   F     2635                     jmp             out6;out7
                    2636     
0FC2 020000   F     2637     noviR1: jmp             noviR
0FC5 78B1           2638     outvich:        mov             r0,#vichR
0FC7 7600           2639                     mov             @r0,#0
0FC9 C214           2640                     clr             bitvich
0FCB C206           2641                     clr             bitvi11
0FCD C211           2642                     clr             bitmenu
0FCF D204           2643                     setb            bitizm
0FD1 78B2           2644                     mov             r0,#marker
0FD3 76FF           2645                     mov             @r0,#0ffh
0FD5 020000   F     2646                     jmp             labelE;out6     
                    2647     
0FD8 3014E7         2648     nofizm: jnb             bitvich,noviR1
0FDB 75B0DF         2649                     mov             p3,#0dfh
0FDE 30B6E4         2650                     jnb             p3.6,outvich;отжатие кнопки вычR
0FE1 78B1           2651                     mov             r0,#vichR
0FE3 B61111         2652                     cjne    @r0,#11h,no11v6
0FE6 75B0FB         2653                     mov             p3,#0fbh;->
0FE9 20B61C         2654                     jb              p3.6,rviout;outF
0FEC 7612           2655                     mov             @r0,#12h                ;11= вычислить
0FEE 900000   F     2656     vvrr6:  mov             dptr,#teIZMK    ;       изм конст;teVICH
0FF1 120000   F     2657                     call            lotext
0FF4 020000   F     2658                     jmp             viout   ;outF
                    2659             
0FF7 B61211         2660     no11v6: cjne    @r0,#12h,no12v6
0FFA 75B0FB         2661                     mov             p3,#0fbh;->
0FFD 20B608         2662                     jb              p3.6,rviout;outF
1000 7611           2663                     mov             @r0,#11h;13h
1002 900000   F     2664                     mov             dptr,#teVICH;teOUT
1005 120000   F     2665                     call            lotext
1008 020000   F     2666     rviout: jmp             viout;outF
                    2667                     
100B B61311         2668     no12v6: cjne    @r0,#13h,no13v6
100E 75B0FB         2669                     mov             p3,#0fbh;->
1011 20B6F4         2670                     jb              p3.6,rviout;outF
1014 7611           2671                     mov             @r0,#11h
1016 900000   F     2672                     mov             dptr,#teVICH
1019 120000   F     2673                     call            lotext
101C 020000   F     2674                     jmp             viout;outF
                    2675     
                    2676     ;кн -> A= 0000          ???
                    2677     ;кн -> B= +00000
101F 75B0FB         2678     no13v6: mov             p3,#0fbh
1022 E5B0           2679                     mov             a,p3
1024 20E635         2680                     jb              acc.6,chanZ
1027 E53B           2681                     mov             a,movrig
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    42

1029 B40714         2682                     cjne    a,#7,kon_B      
102C 78B2           2683                     mov             r0,#marker      ;A= 0000
102E B60716         2684                     cjne    @r0,#7,mark0_8  ;курсор справа ?
1031 E53A           2685     rikn:           mov             a,movleft
1033 F6             2686                     mov             @r0,a           ; уст курсор в кр левую поз+1
                    2687     ;                       29.12.06
                    2688     ;необходимо не портить цифру в следуюем справа знакоместе
                    2689     ;т е сохранить ее в ячейке для мигания в противном случае
                    2690     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего знакоместа
1034 78B2           2691                     mov             r0,#marker
1036 7440           2692                     mov             a,#bufind
1038 26             2693                     add             a,@r0                   ;a=bufind+marker
1039 F9             2694                     mov             r1,a
103A 09             2695                     inc             r1
103B 873C           2696                     mov             savba,@r1
103D 020000   F     2697                     jmp             viout;outF
                    2698     
1040 78B2           2699     kon_B:  mov             r0,#marker      ;B= +00000
1042 B60802         2700                     cjne    @r0,#8,mark0_8          ;курсор справа ?
1045 80EA           2701                     jmp             rikn
1047                2702     mark0_8:
                    2703     ;                               29.12.06
                    2704     ;;;;;;;;;;;;;;;;;;
                    2705     ;необходимо не портить цифру в следуюем справа знакоместе
                    2706     ;т е сохранить ее в ячейке для мигания в противном случае
                    2707     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2708     ;       знакоместа ->B=+00000
1047 78B2           2709                     mov             r0,#marker
1049 7440           2710                     mov             a,#bufind
104B 26             2711                     add             a,@r0                   ;a=bufind+marker
104C F9             2712                     mov             r1,a
104D 09             2713                     inc             r1
104E 873C           2714                     mov             savba,@r1
1050 78B2           2715                     mov             r0,#marker
1052 06             2716                     inc             @r0             ;       сдвинуть курсор вправо на 1
1053 C219           2717                     clr             bitmig
1055 B60901         2718                     cjne    @r0,#9,outma
1058 18             2719                     dec             r0;ppp
1059 020000   F     2720     outma:  jmp             viout;outF
                    2721     
105C 75B0FE         2722     chanZ:  mov             p3,#0feh
105F E5B0           2723                     mov             a,p3
1061 20E611         2724                     jb              acc.6,chanma
                    2725                             ;изм знак в старшем разряде на противоположн
1064 E543           2726                     mov             a,bufind+3
1066 B42B06         2727                     cjne            a,#2bh,noplus
1069 75432D         2728                     mov             bufind+3,#2dh           ;+->-   
106C 020000   F     2729                     jmp             viout;outF
106F                2730     noplus:
106F 75432B         2731                     mov             bufind+3,#2bh           ;-/+-
1072 020000   F     2732                     jmp             viout;outF
1075 75B0FD         2733     chanma: mov             p3,#0fdh
1078 E5B0           2734                     mov             a,p3
107A 20E603         2735                     jb              acc.6,outFl;labelL1
                    2736                     ;clr            bitmig
107D 120000   F     2737     labelL1:        call            vvchibl;f       ;увеличить цифру 
                    2738     
1080 793D           2739     outFl:  mov             r1,#chkl
1082 7701           2740                     mov             @r1,#01
1084 09             2741                     inc             r1
1085 77F4           2742                     mov             @r1,#0f4h               ;1000
1087 020000   F     2743                     jmp             out6
                    2744                     
                    2745     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2746     
108A 020000   F     2747     rlabelL:        jmp             labelL
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    43

                    2748     
108D 020000   F     2749     rfindmem:       jmp             findmem
                    2750     
1090 3011FA         2751     noviR:  jnb             bitmenu,rfindmem;17.01.07
                    2752     ;;;;;;;;;;;;;
1093 78B1           2753                     mov             r0,#vichR
1095 7415           2754                     mov             a,#15h
1097 C3             2755                     clr             c
1098 96             2756                     subb            a,@r0
1099 4016           2757                     jc              ri21_23
                    2758     
109B 75B0FB         2759                     mov             p3,#0fbh; реж кн меню ->
109E 20B60A         2760                     jb              p3.6,ri6
10A1 78B1           2761                     mov             r0,#vichR
10A3 B61508         2762                     cjne    @r0,#15h,norime
10A6 7611           2763                     mov             @r0,#11h
10A8 120000   F     2764     norime1:        call            lomenu
10AB 020000   F     2765     ri6:            jmp             viout;out6
10AE 06             2766     norime: inc             @r0
10AF 80F7           2767                     jmp             norime1
                    2768             
10B1 7423           2769     ri21_23:        mov             a,#23h          ;->
10B3 C3             2770                     clr             c
10B4 96             2771                     subb            a,@r0
10B5 4014           2772                     jc              ri_31
10B7 75B0FB         2773                     mov             p3,#0fbh
10BA 20B6EE         2774                     jb              p3.6,ri6
10BD B62308         2775                     cjne            @r0,#23h,no23ri
10C0 7621           2776                     mov             @r0,#21h
10C2 120000   F     2777                     call            lomenu
10C5 020000   F     2778                     jmp             viout;out6
10C8 06             2779     no23ri: inc             @r0
10C9 80DD           2780                     jmp             norime1
10CB B63130         2781     ri_31:  cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2782     
                    2783     ;;
10CE 75B0FB         2784                     mov             p3,#0fbh
10D1 20B6D7         2785                     jb              p3.6,ri6
                    2786     ;;
10D4 301312         2787                     jnb             bitv19,gosk19
10D7 900000   F     2788                     mov             dptr,#teS57_6;57,6
10DA 120000   F     2789                     call            lotext
10DD 534B03         2790                     anl             bufind+11,#03h
10E0 434B80         2791                     orl             bufind+11,#80h
10E3 C213           2792                     clr             bitv19
10E5 7800           2793             mov     R0,#0           ;?
10E7 8010           2794             sjmp    viout2  ;?
                    2795     
10E9 900000   F     2796     gosk19: mov             dptr,#teS19_2
10EC 120000   F     2797                     call            lotext
10EF 534B03         2798                     anl             bufind+11,#03h
10F2 434B80         2799                     orl             bufind+11,#80h
10F5 D213           2800                     setb            bitv19
10F7 7800           2801             mov     R0,#0   ;?
                    2802     
10F9                2803     viout2:
                    2804     ;               mov             r0,#chkl                        ;???
                    2805     ;               mov             @r0,#3
                    2806     ;               inc             r0
                    2807     ;               mov             @r0,#0e8h               ;1000
                    2808     ;               jmp             viout;out6
10F9 D208           2809             setb    speed_rs                ;?
10FB 020000   F     2810             jmp     viout   ;begin  ;?
                    2811     
                    2812     
                    2813     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    44

                    2814     ;labelS2:       jmp             out6
                    2815     
10FE 7452           2816     no31ri: mov             a,#52h;42h              ;->
1100 C3             2817                     clr             c
1101 96             2818                     subb            a,@r0
1102 40A7           2819                     jc              ri6
1104 75B0FB         2820                     mov             p3,#0fbh                        ;41,42
1107 30B609         2821                     jnb             p3.6,rlabelN    ;кнопка ->(пароль 000)
110A 75B0FD         2822                     mov             p3,#0fdh
110D 20B69B         2823                     jb              p3.6,ri6
1110 020000   F     2824                     jmp             labelL1                                 ;кнопка 0..9  (паро
                             ль 000)
1113 020000   F     2825     rlabelN:        jmp             labelN
1116 020000   F     2826     moutF:  jmp             viout;outF
                    2827     ;;;;;;;;;;;;;;;;;;;;;;;;;
1119 020000   F     2828     rnnmemb:        jmp             nnmemb
                    2829     
111C                2830     nbimenu:
111C 300BFA         2831     findmem:        jnb             bitmem,rnnmemb
111F 79B0           2832                     mov             r1,#level                                                  
                                  ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
1121 B71113         2833                     cjne            @r1,#11h,nomem11
                    2834                                             
1124 75B0FB         2835                     mov             p3,#0fbh
1127 E5B0           2836                     mov             a,p3
1129 20E6EA         2837                     jb              acc.6,moutF
112C 7712           2838                     mov             @r1,#12h
112E 900000   F     2839                     mov             dptr,#teWR      ;                       ЗАПИСЬ
1131 120000   F     2840                     call            lotext
1134 020000   F     2841                     jmp             viout;outF
                    2842     
1137 B71213         2843     nomem11:   cjne         @r1,#12h,nomem12
113A 75B0FB         2844                     mov             p3,#0fbh
113D E5B0           2845                     mov             a,p3
113F 20E6D4         2846                     jb              acc.6,moutF
1142 7713           2847                     mov             @r1,#13h
1144 900000   F     2848                     mov             dptr,#teLIST            ;ПРОСМОТР
1147 120000   F     2849                     call            lotext
114A 020000   F     2850                     jmp             viout;outF
114D B71313         2851     nomem12:        cjne            @r1,#13h,nomem13
1150 75B0FB         2852                     mov             p3,#0fbh
1153 E5B0           2853                     mov             a,p3
1155 20E6BE         2854                     jb              acc.6,moutF
1158 7714           2855                     mov             @r1,#14h
115A 900000   F     2856                     mov             dptr,#teSTAT                    ;СТАТИСТИКА
115D 120000   F     2857                     call            lotext
1160 020000   F     2858                     jmp             viout;outF
                    2859                             
1163 B71413         2860     nomem13:        cjne            @r1,#14h,labelL
1166 75B0FB         2861                     mov             p3,#0fbh
1169 E5B0           2862                     mov             a,p3
116B 20E6A8         2863                     jb              acc.6,moutF
116E 7711           2864                     mov             @r1,#11h
1170 900000   F     2865                     mov             dptr,#teCLE                     ;ОЧИСТКА
1173 120000   F     2866                     call            lotext
1176 020000   F     2867                     jmp             viout;outF
1179                2868     labelL: 
                    2869                     ;;;;;
1179 75B0DF         2870                     mov                     p3,#0dfh
117C 30B697         2871                     jnb                     p3.6,moutF;в реж очистка полная не отрабатывать ВЫЧ
                              R
                    2872                     
                    2873                     ;ПОЛНАЯ->БЛОК 00(level 21->22)  ???
117F 78B0           2874                     mov             r0,#level
1181 B6210E         2875                     cjne            @r0,#21h,nobl21
1184 7622           2876                     mov             @r0,#22h                ;->БЛОК 
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    45

1186 900000   F     2877                     mov             dptr,#teBL
1189 120000   F     2878     me21_22:        call            lotext
                    2879                             
118C 120000   F     2880                     call            z_05s;задержка чтобы не проскакивала пргр на следующий уров
                             ень
118F 020000   F     2881                     jmp             viout;outF
                    2882     
1192 B62207         2883     nobl21: cjne            @r0,#22h,nobl22
1195 900000   F     2884                     mov             dptr,#teFULL
1198 7621           2885                     mov             @r0,#21h                ;->ПОЛНАЯ
                    2886     
119A 80ED           2887                     jmp             me21_22
                    2888     
                    2889     ;labl21:           cjne @r0,#21h,nolev1
                    2890     ;                       mov             p3,#0fbh
                    2891     ;                       mov             a,p3
                    2892     ;                       jb              acc.6,loutF
                    2893     ;                       cjne    @r0,#21h,labl22
                    2894     ;                       mov             @r0,#22h
                    2895                             ;БЛОК
                    2896     ;                       call    lotext
                    2897     ;                       jmp             outF
                    2898     ;labl22:                mov             @r0,#21h
                    2899                             ;ПОЛНАЯ
                    2900     ;                       call    lotext
                    2901     ;                       jmp             outF
                    2902                      
119C B62325         2903     nobl22: cjne    @r0,#23h,go31l
119F 75B0FB         2904     rigblo: mov             p3,#0fbh
11A2 20B629         2905                     jb              p3.6,llev2
                    2906     
11A5                2907     labL2:    ;  уст курсор в правую позицию 
                    2908                                     ;       кнопка                  ->
                    2909     ;;;;;;;;;;;;;;;;;;
                    2910     ;необходимо не портить цифру в следуюем справа знакоместе
                    2911     ;т е сохранить ее в ячейке для мигания в противном случае
                    2912     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2913     ;       знакоместа
11A5 78B2           2914                     mov             r0,#marker
11A7 7440           2915                     mov             a,#bufind
11A9 26             2916                     add             a,@r0                   ;a=bufind+marker
11AA F9             2917                     mov             r1,a
11AB 09             2918                     inc             r1
11AC 873C           2919                     mov             savba,@r1
11AE C219           2920                     clr             bitmig
                    2921     ;;;;;;;;;;;;;;;;
11B0 78B2           2922                     mov             r0,#marker      ;курсор справа  ?
11B2 E53B           2923                     mov             a,movrig
11B4 C3             2924                     clr             c
11B5 96             2925                     subb            a,@r0
11B6 6006           2926                     jz              equ1l
11B8 E53B           2927                     mov             a,movrig;уст в правую позицию
11BA F6             2928                     mov             @r0,a
11BB 020000   F     2929                     jmp             viout;outF                                       
11BE E53A           2930     equ1l:  mov             a,movleft;уст в левую позицию
11C0 F6             2931                     mov             @r0,a   
11C1 020000   F     2932     loutF:  jmp             viout;outF
                    2933                     
                    2934     
11C4 B63102         2935     go31l:  cjne    @r0,#31h,go41l
11C7 80D6           2936                     jmp             rigblo
11C9 B6410B         2937     go41l:  cjne    @r0,#41h,norig2
11CC 80D1           2938                     jmp             rigblo
                    2939     
11CE 75B0FD         2940     llev2:  mov             p3,#0fdh
11D1 20B6ED         2941                     jb              p3.6,loutF
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    46

11D4 020000   F     2942                     jmp             labelL1
                    2943     
                    2944     ;->
11D7 C3             2945     norig2: clr             c               ;32,33,34,42
11D8 7431           2946                     mov             a,#31h
11DA 96             2947                     subb            a,@r0
11DB 50E4           2948                     jnc             loutF
11DD 75B0FB         2949     rigblok:        mov             p3,#0fbh  ;32,33,34,42
11E0 20B630         2950                     jb              p3.6,lev2go
11E3 B64302         2951     labelN: cjne            @r0,#43h,labN_2
11E6 80D9           2952                     jmp             loutF
11E8 B64402         2953     labN_2: cjne            @r0,#44h,labN_1 
11EB 80D4           2954                     jmp             loutF                           
                    2955                             ;                               29.12.06
                    2956     ;;;;;;;;;;;;;;;;;;
                    2957     ;необходимо не портить цифру в следуюем справа знакоместе
                    2958     ;т е сохранить ее в ячейке для мигания в противном случае
                    2959     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2960     ;       знакоместа
11ED 78B2           2961     labN_1: mov             r0,#marker
11EF 7440           2962                     mov             a,#bufind
11F1 26             2963                     add             a,@r0                   ;a=bufind+marker
11F2 F9             2964                     mov             r1,a
11F3 09             2965                     inc             r1
11F4 873C           2966                     mov             savba,@r1
                    2967     ;;;;;;;;;;;;;;;;;;;
11F6 78B2           2968                     mov             r0,#marker      ;курсор справа  ?
11F8 E53B           2969                     mov             a,movrig
11FA C3             2970                     clr             c
11FB 96             2971                     subb            a,@r0
11FC 7006           2972                     jnz             noequ1
11FE E53A           2973                     mov             a,movleft;уст в крайнюю левую позицию
1200 F6             2974                     mov             @r0,a
1201 020000   F     2975                     jmp             viout;outF
1204                2976     noequ1: ;29.12.06
                    2977     ;;;;;;;;;;;;;;;;;;
                    2978                             ;восстан знакоместо при мигании
                    2979                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1204 78B2           2980                     mov             r0,#marker
1206 7440           2981                     mov             a,#bufind
1208 26             2982                     add             a,@r0                   ;a=bufind+marker
1209 F9             2983                     mov             r1,a
                    2984                     ;mov            @r1,savba
120A 09             2985                     inc             r1
120B 873C           2986                     mov             savba,@r1
                    2987     ;;;;;;;;;;;;;;; 
120D 120000   F     2988                     call            marri;уст сдвиг в правую        позицию
1210 020000   F     2989                     jmp             viout;outF
1213 75B0FD         2990     lev2go: mov             p3,#0fdh
1216 30B603         2991                     jnb             p3.6,rlabelL1
1219 020000   F     2992                     jmp             viout;outF
                    2993     
121C 020000   F     2994     rlabelL1:       jmp             labelL1
                    2995     
121F                2996     nnmemb:
                    2997     
121F                2998     norim6:    ;kn menu
121F D083           2999     out6:           pop             dph
1221 D082           3000                     pop             dpl
1223 D007           3001                     pop             rr7     
1225 D006           3002                     pop             rr6
1227 D005           3003                     pop             rr5
1229 D004           3004                     pop             rr4
122B D003           3005                     pop             rr3
122D D002           3006                     pop             rr2
122F D001           3007                     pop             rr1                             
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    47

1231 D000           3008                     pop             rr0
1233 D0D0           3009                     pop             psw
1235 D0E0           3010                     pop             acc
                    3011             ;clr            bitmig
                    3012             ;mov            EIE2,#30H
                    3013             ;mov            a,P3IF
                    3014             ;anl            a,#0bfh
                    3015             ;mov            P3IF,a
                    3016             ;mov            P3,#0c0h
                    3017             ;;;;;;
1237                3018     kkout6:
1237 75AD00         3019                     mov             P3IF,#00 ;обязательно сбросить опять приходит на обработку 
                             прерывания
123A 75B0C0         3020                     mov             P3,#0c0h
123D C219           3021                     clr             bitmig
123F E586           3022                     mov             a,P6            ;p6.4=0
1241 54EF           3023                     anl             a,#0efh
1243 F586           3024                     mov             P6,a
1245 00             3025                     nop
1246 00             3026                     nop
1247 E586           3027                     mov             a,P6                    ;p6.4=1 
1249 4410           3028                     orl             a,#10h
124B F586           3029                     mov             P6,a    
                    3030                             ;;;;;;;;;
124D E5DA           3031                     mov             a,PCA0CPM0;     
124F 4446           3032                     orl             a,#46h;anl              a,#0fbh
1251 F5DA           3033                     mov             PCA0CPM0,a
                    3034     
1253 75CDD0         3035                     mov             TH2,#0d0h
1256 75CC00         3036                     mov             TL2,#00
                    3037     
1259 D2CA           3038                     setb            T2CON.2
125B D2AD           3039                     setb            ET2;IE.5
                    3040                             ;;;;;;;;                    
125D 32             3041                     reti
                    3042     
                    3043     
125E 020000   F     3044     knKMP:  jmp             out7
1261 020000   F     3045     rout7:  jmp             out7    
1264 020000   F     3046     rlabelH:        jmp             labelH
1267 020000   F     3047     rknNUL: jmp             knNUL
126A 020000   F     3048     rknleft:        jmp             knleft
                    3049     
126D 75AD00         3050     no0chk: mov             P3IF,#00;               обязательно сбросить опять приходит на обра
                             ботку прерывания
1270 75B0C0         3051                     mov             P3,#0c0h
1273 32             3052                     reti
                    3053     
1274 020000   F     3054     rknMEM: jmp             knMEM
                    3055     
1277                3056     keyb2:  ;IE7
                    3057     ;;;;;
                    3058                     ;       mov                     a,chkl          ;low
                    3059                     ;       jb                      acc.7,no0chk;
                    3060                             ;jnz                    no0chk
                    3061                             ;mov                    a,chkl                          ;high
                    3062                             ;jnz                    no0chk
                    3063     ;;;;
1277 75E700         3064                     mov             EIE2,#00H
127A 75AD00         3065                     mov             P3IF,#00
                    3066     
127D C0E0           3067                     push    acc
127F C0D0           3068                     push    psw
1281 C000           3069                     push    rr0
1283 C001           3070                     push    rr1
1285 C002           3071                     push    rr2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    48

1287 C003           3072                     push    rr3
1289 C004           3073                     push    rr4
128B C005           3074                     push    rr5
128D C006           3075                     push    rr6
128F C007           3076                     push    rr7
1291 C082           3077                     push    dpl
1293 C083           3078                     push    dph
                    3079                             ;clr            bitmig
                    3080                       ;;;;;;;;;;;;;;
1295 120000   F     3081                     call    z_01s   ;0,1s
                    3082                               ;восстан знакоместо при мигании
                    3083                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1298 78B2           3084                     mov             r0,#marker
129A 7440           3085                     mov             a,#bufind
129C 26             3086                     add             a,@r0                   ;a=bufind+marker
129D F9             3087                     mov             r1,a
129E A73C           3088                     mov             @r1,savba
                    3089                                     ;;;;;;;;;;;
                    3090     
12A0 E5B0           3091                     mov             a,p3
12A2 20E7BC         3092                     jb              acc.7,rout7
12A5 E5B0           3093                     mov             a,p3
12A7 74FF           3094                     mov             a,#0ffh         ; p3.(5-0)<-3f
12A9 F5B0           3095                     mov             p3,a
12AB E5B0           3096                     mov             a,p3
12AD 30E7B1         3097                     jnb             acc.7,rout7             ;error
12B0 3004B1         3098                     jnb             bitizm,rlabelH
12B3 75B0FE         3099                     mov             p3,#0feh                ;реж IZM
12B6 E5B0           3100                     mov             a,p3
12B8 30E7AC         3101                     jnb             acc.7,rknNUL
12BB 75B0FD         3102                     mov             p3,#0fdh
12BE E5B0           3103                     mov             a,p3
12C0 30E79B         3104                     jnb             acc.7,knKMP
12C3 75B0FB         3105                     mov             p3,#0fbh
12C6 E5B0           3106                     mov             a,p3
12C8 30E79F         3107                     jnb             acc.7,rknleft
12CB 75B0F7         3108                     mov             p3,#0f7h
12CE 00             3109                     nop
12CF 00             3110                     nop
12D0 00             3111                     nop
12D1 00             3112                     nop
12D2 E5B0           3113                     mov             a,p3
12D4 30E76F         3114                     jnb             acc.7,knAVP
12D7 75B0EF         3115                     mov             p3,#0efh
12DA E5B0           3116                     mov             a,p3
12DC 30E795         3117                     jnb             acc.7,rknMEM
12DF 75B0DF         3118                     mov             p3,#0dfh
12E2 E5B0           3119                     mov             a,p3    
12E4 30E722         3120                     jnb             acc.7,knmenu
12E7                3121     an_t7:             ;;;;;;;;;;;;
                    3122                     
                    3123     ;       clr             c
                    3124     ;       mov             r1,#parN
                    3125     ;
                    3126     ;                       mov             r0,#diap
                    3127     ;                       mov             a,#6            
                    3128     ;                       subb    a,@r0
                    3129     ;                       jnc             goto7           ;         ;10-2..10-8
                    3130                               
                    3131     ;                       mov             @r1,#2          ;10-9..10-11            
                    3132                             
                    3133                             ;;;;;;;;;;;;
12E7 799A           3134     goto7:  mov             r1,#parT
12E9 783D           3135                     mov             r0,#chkl
12EB B70108         3136                     cjne            @r1,#1,not1_7
12EE 7600           3137                     mov             @r0,#00
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    49

12F0 08             3138                     inc             r0
12F1 7601           3139                     mov             @r0,#1;2
12F3 020000   F     3140                     jmp             out7
                    3141                             
                    3142     
12F6 B70208         3143     not1_7: cjne            @r1,#2,not2_7
12F9 7600           3144                     mov             @r0,#00
12FB 08             3145                     inc             r0
12FC 7602           3146                     mov             @r0,#2;10;20
12FE 020000   F     3147                     jmp             out7
1301 7600           3148     not2_7: mov             @r0,#00
1303 08             3149                     inc             r0
1304 760A           3150                     mov             @r0,#10;20;0
1306 020000   F     3151     merr:           jmp             out7
                    3152     
                    3153     
1309                3154     knmenu:
                    3155     
                    3156     ;               mov     cnt_out,#33             ;+
                    3157     ;               mov     p_out,#0DAh
                    3158     
                    3159     
1309 2006FA         3160                     jb              bitvi11,merr
130C 20151C         3161                     jb              biteizm,menuoff
                    3162                                     ;;;;;
130F 201225         3163                     jb              bitklb,klboff
1312 C204           3164                     clr             bitizm          ;off IZM
1314 D211           3165                     setb            bitmenu
1316 C217           3166                     clr             bitoll
1318 900000   F     3167                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
131B 120000   F     3168                     call            lotext
131E 534B03         3169                     anl             bufind+11,#03h  ;погасить запятые
1321 120000   F     3170                     call            ind
1324 78B1           3171                     mov             r0,#vichR
1326 7611           3172                     mov             @r0,#11h
1328 020000   F     3173                     jmp             onmem11
132B                3174     menuoff:
132B 78B1           3175                     mov             r0,#vichR
132D 7600           3176                     mov             @r0,#00
132F C215           3177                     clr             biteizm
1331 120000   F     3178                     call            loadus
1334 020000   F     3179                     jmp             out7
                    3180     
1337 C212           3181     klboff: clr             bitklb
1339 120000   F     3182                     call            loadUS
133C 78B1           3183                     mov             r0,#vichR
133E 7600           3184                     mov             @r0,#00
1340 020000   F     3185                     jmp             out7
                    3186     
1343 020000   F     3187     rendkalib:      jmp             endkalib
                    3188     
1346 2012FA         3189     knAVP:  jb              bitklb,rendkalib        
1349 200504         3190                     jb              bitavp,meavp
134C D205           3191                     setb            bitavp
134E 8097           3192                     jmp             an_t7;onmem11
1350 C205           3193     meavp:  clr             bitavp
1352 8093           3194                     jmp             an_t7;onmem11
                    3195     
1354 201207         3196     knleft: jb              bitklb,lefkl
                    3197                                     ;;;;;;;;
1357 79AE           3198                     mov             r1,#diap
1359 07             3199                     inc             @r1             ;перекл диапазон 1 поз в сбр массив
135A B70A03         3200                     cjne    @r1,#0ah,nodi6
135D 17             3201                     dec             @r1
135E 8087           3202     lefkl:  jmp             an_t7
                    3203     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    50

1360                3204     nodi6:             ;    cjne    @r1,#0,an_t7
1360 120000   F     3205                     call            clmassix
1363 78B3           3206                     mov             r0,#summa
1365 120000   F     3207                     call            clear4  
1368 786A           3208                     mov             r0,#rez_A0
136A 120000   F     3209                     call            clear4
136D C20F           3210                     clr             bitnul          ;гасить светодиод НУЛЬ  
136F 120000   F     3211                     call            loadUS
1372 020000   F     3212                     jmp             an_t7
                    3213     
1375 200F0F         3214     knNUL:  jb              bitnul,ybnul
1378 D20F           3215                     setb            bitnul
137A 789C           3216                     mov             r0,#rez_A3      ;A3
137C 120000   F     3217                     call            resar2
137F 786A           3218                     mov             r0,#rez_A0      
1381 120000   F     3219                     call            saver2;A0<-A3
1384 020000   F     3220                     jmp             goto7;an_t7
                    3221     
1387 C20F           3222     ybnul:  clr             bitnul
1389 900000   F     3223                     mov             DPTR,#ch0 
138C 120000   F     3224                     CALL    ldc_long                 ; r2..r5 <-- 0
138F 786A           3225                     mov             r0,#rez_A0      ;A0=0
1391 120000   F     3226                     call            saver2
1394 020000   F     3227                     jmp             goto7;an_t7
                    3228     
1397 301021         3229     labelH: jnb             bitt2,nolah
139A 75B0FB         3230                     mov             p3,#0fbh   ;вход в режим изм Т
139D 534A8F         3231                     anl             bufind+10,#8fh
13A0 79B7           3232                     mov             r1,#load;parT
13A2 20B70D         3233                     jb              p3.7,rhnot1
13A5 B70003         3234                     cjne    @r1,#0,inct;
13A8 020000   F     3235                     jmp             out7;hyest6
13AB 17             3236     inct:           dec             @r1                     ;Tизм+1
                    3237                             
13AC 120000   F     3238                     call            loadT   ;в буфер2 записать текст  в соотв с     Tизм
13AF                3239     hnot2:          ;       call    ind
13AF 020000   F     3240                     jmp             onmem11;out7
13B2 020000   F     3241     rhnot1: jmp             hnot1
                    3242      ;rnoviR:               jmp             noviR
13B5 020000   F     3243     rlabelK:        jmp             labelK
13B8 020000   F     3244     rlabelI:        jmp             labelI          
                    3245      ;;;;;;;;;;;;;;;;;;;
                    3246     
13BB 3014F7         3247     nolah:  jnb             bitvich,rlabelK 
                    3248                     ;увеличить счетчик задержки клавиатуры
                    3249                     ;;              mov             r0,#chkl
                    3250                     ;;              mov             @r0,#27h
                    3251                     ;;              inc             r0
                    3252                     ;;              mov             @r0,#10h
                    3253     
13BE 78B1           3254                     mov             r0,#vichR
13C0 B61128         3255                     cjne    @r0,#11h,rhnor11;rlabelI;;
13C3 75B0FB         3256                     mov             p3,#0fbh   ;<-
13C6 20B730         3257                     jb              p3.7,noh37;routF
13C9 B6110B         3258                     cjne    @r0,#11h,hr12
13CC 7612           3259                     mov             @r0,#12h;11h;= вычислить
13CE 900000   F     3260                     mov             dptr,#teIZMK    ;       изм конст;teVICH
13D1 120000   F     3261     hvi1113:        call            lotext  ;в буфер 2 записать текст в соотв с состоянием
13D4 020000   F     3262                     jmp             onmem11;goto7
                    3263     
13D7 B61207         3264     hr12:           cjne    @r0,#12h,hnor12                 ;???
13DA 7611           3265     lovich: mov             @r0,#11h
13DC 900000   F     3266                     mov             dptr,#teVICH
13DF 80F0           3267                     jmp             hvi1113         
13E1 B61307         3268     hnor12: cjne    @r0,#13h,rhnor11
13E4 7612           3269     loizmk: mov             @r0,#12h
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    51

13E6 900000   F     3270                     mov             dptr,#teIZMK    ;       изм конст
                    3271                                        
13E9 80E6           3272                     jmp             hvi1113
                    3273     
13EB 804C           3274     rhnor11:        jmp             hnor11
                    3275     
13ED 8057           3276     rvvizko:        jmp             vvizko
13EF C214           3277     vioutF: clr             bitvich
13F1 C206           3278                     clr             bitvi11
13F3 020000   F     3279                     jmp             viout;outF
13F6 020000   F     3280     toutF:  jmp             viout;outF
                    3281     
13F9 75B0F7         3282     noh37:  mov             p3,#0f7h
13FC 20B7F7         3283                     jb              p3.7,toutF;vioutF
13FF B611EB         3284                     cjne    @r0,#11h,rvvizko
1402 D206           3285                     setb            bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1404 D204           3286                     setb            bitizm
1406 534B07         3287                     anl             bufind+11,#07h
1409 434B10         3288                     orl             bufind+11,#10h;точка после 1 знакоместа
140C 020000   F     3289                     jmp             goto7;
                    3290     
                    3291     
140F 80E8           3292     rnoh37: jmp             noh37
1411 B6120D         3293     norr11: cjne    @r0,#12h,norr12
1414 75B0FB         3294                     mov             p3,#0fbh   ;<-
1417 20B7F5         3295                     jb              p3.7,rnoh37;routF
141A 760B           3296                     mov             @r0,#11;12->11
141C 80BC           3297                     jmp             lovich
                    3298     
141E 020000   F     3299     labelI2:        jmp             labelI
1421 B613FA         3300     norr12: cjne    @r0,#13h,labelI2
1424 75B0FB         3301                     mov             p3,#0fbh   ;<-
1427 20B7E5         3302                     jb              p3.7,rnoh37
142A 7612           3303                     mov             @r0,#12h
142C 80B6           3304                     jmp             loizmk
                    3305                             ;;;;
142E C214           3306     clrvich:        clr             bitvich
1430 D204           3307                     setb            bitizm
1432 A8B2           3308                     mov             r0,marker
1434 76FF           3309                     mov             @r0,#0ffh
1436 020000   F     3310                     jmp             goto7;  routF
                    3311     
                    3312     ;rnoh37:        jmp             noh37
                    3313      ;ввод изм конст
1439 B612E5         3314     hnor11: cjne    @r0,#12h,norr12;clrvich
143C 75B0FB         3315                     mov             p3,#0fbh   
143F 20B7CD         3316                     jb              p3.7,rnoh37;lovich;;изм конст <-  выч
1442 7611           3317                     mov             @r0,#11h
1444 8094           3318                     jmp             lovich
                    3319     
1446 78B1           3320     vvizko: mov             r0,#vichR
1448 E6             3321                     mov             a,@r0
                    3322                     ;       cjne    @r0,#12h,clrvich
1449 B412E2         3323                     cjne    a,#12h,clrvich
144C 7621           3324                     mov             @r0,#21h                ;изм конст->U=+0000     (vvod)
144E 78B2           3325                     mov             r0,#marker
1450 7604           3326                     mov             @r0,#4;9
1452 753A04         3327                     mov             movleft,#4
1455 753B07         3328                     mov             movrig,#7
1458 900000   F     3329                     mov             dptr,#teAequ0
145B 120000   F     3330                     call            lotext
145E 120000   F     3331                     call            outA
1461 534B0F         3332                     anl             bufind+11,#0fh
                    3333             ;       mov             a,bufind+11
                    3334             ;       anl             a,#0f0h
                    3335             ;       mov             bufind+11,a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    52

1464 434B40         3336                     orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0 v)
1467 020000   F     3337                     jmp             goto7;routF
                    3338     ;hnor13:        jmp             hnor12          
146A B6210C         3339     izchi:  cjne    @r0,#21h,tlabelI
                    3340     ;<- при вводе цифр А                            
                    3341                     ;mov            p3,#0fbh   
                    3342                     ;jnb            p3.7,li21
                    3343                     ;clr            bitmig
146D 78B2           3344                     mov             r0,#marker
146F 16             3345                     dec             @r0
1470 B60201         3346                     cjne    @r0,#2,li21
1473 06             3347                     inc             @r0;marker=3 +/-
1474 C219           3348     li21:           clr             bitmig
1476 020000   F     3349                     jmp             goto7;outF
                    3350     
1479 020000   F     3351     tlabelI:        jmp             labelI
                    3352     
                    3353     ;                       load    0 1 2 3 4 5             
147C 06050403       3354     sootv:  db              6,5,4,3,2,1;parT
1480 0201                    
                    3355     ;
1482 020000   F     3356     nnnott: jmp             viout
                    3357     ;нажата кн ввод при наборе Т
1485 75B0F7         3358     hnot1:  mov             p3,#0f7h
1488 20B7F7         3359                     jb              p3.7,nnnott;routF;out7
148B B70549         3360                     cjne    @r1,#5,nohnot1  ;r1=load
148E 794A           3361                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
1490 E7             3362                     mov             a,@r1
1491 548F           3363                     anl             a,#8fh
1493 4440           3364                     orl             a,#40h;.6
1495 F7             3365                     mov             @r1,a
1496 8000           3366                     jmp             loadb
                    3367                             
                    3368                                     
1498 789A           3369     loadB:  mov             r0,#parT
149A 900000   F     3370                     mov             dptr,#sootv
149D 79B7           3371                     mov             r1,#load                
149F E7             3372                     mov             a,@r1;load
14A0 93             3373                     movc    a,@a+dptr
14A1 F6             3374                     mov             @r0,a
14A2 120000   F     3375                     call            loab12  ;установить B1,B2 в соотв с Tизм
                    3376                              ;r4=b1 r5=b2
14A5 120000   F     3377                     call            iniacp;инициализация АЦП
14A8 120000   F     3378                     call            loadUS
14AB 120000   F     3379                     call            clmassix        
14AE D204           3380                     setb            bitizm
14B0 C210           3381                     clr             bitt2
14B2 534A8F         3382                     anl             bufind+10,#8fh
14B5 C3             3383                     clr             c
14B6 789A           3384                     mov             r0,#parT
14B8 79AF           3385                     mov             r1,#parN
14BA 7402           3386                     mov             a,#2
14BC 96             3387                     subb            a,@r0
14BD 5005           3388                     jnc             loadB2
14BF 7701           3389                     mov             @r1,#1;N=1         ;T>=2
14C1 020000   F     3390     bout7:  jmp             goto7;out7
                    3391     
14C4 B702FA         3392     loadB2: cjne    @r1,#2,bout7
14C7 7702           3393                     mov             @r1,#2;N=2
14C9 020000   F     3394                     jmp             goto7;out7
14CC                3395     nohnot2:        ;в буфере 1 зажечь <=0,1s
14CC 794A           3396                     mov             r1,#bufind+10
14CE E7             3397                     mov             a,@r1
14CF 4410           3398                     orl             a,#10h;.4
14D1 F7             3399                     mov             @r1,a
14D2 120000   F     3400                     call            ind
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    53

14D5 80C1           3401                     jmp             loadB
14D7 B704F2         3402     nohnot1:        cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
14DA 794A           3403                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
14DC E7             3404                     mov             a,@r1
14DD 4420           3405                     orl             a,#20h;.5
14DF F7             3406                     mov             @r1,a
14E0 80B6           3407                     jmp             loadB
                    3408     
                    3409     ;кнопка ПАМЯТЬ                  ???
14E2 2012DC         3410     knMEM:  jb              bitklb,bout7    ;в реж калибровки не нажимать память
14E5 C204           3411                     clr             bitizm          ;off IZM
14E7 900000   F     3412                     mov             dptr,#teLIST    ;CLE
14EA 120000   F     3413                     call            lotext          ;в буф2 записать ОЧИСТКА
14ED D20B           3414                     setb            bitmem          ;нажата кнопка ПАМЯТЬ
14EF 534BEF         3415                     anl             bufind+11,#0efh ;убрать точку с 1го знакоместа
14F2 434B01         3416                     orl             bufind+11,#01   ;зажечь светодиод память
14F5 120000   F     3417                     call            ind
14F8 78B0           3418                     mov             r0,#level
14FA 7613           3419                     mov             @r0,#13h;11h
                    3420     
14FC 783D           3421     onmem11:        mov             r0,#chkl
14FE 7603           3422                     mov             @r0,#03
1500 08             3423                     inc             r0
1501 76E8           3424                     mov             @r0,#0e8h       ;1000
1503 020000   F     3425                     jmp             out7            ;goto7
                    3426     
1506 020000   F     3427     rnomemk:        jmp             nomemk          ;
1509 78B0           3428     outkmem:        mov             r0,#level
150B 7600           3429                     mov             @r0,#0
150D 78B1           3430                     mov             r0,#vichR
150F 7600           3431                     mov             @r0,#0
1511 C20B           3432                     clr             bitmem
1513 C214           3433                     clr             bitvich
1515 C206           3434                     clr             bitvi11
1517 C211           3435                     clr             bitmenu
1519 D204           3436                     setb            bitizm
151B 78B2           3437                     mov             r0,#marker
151D 76FF           3438                     mov             @r0,#0ffh
151F 020000   F     3439                     jmp             vvod2_10
                    3440                                     
1522 020000   F     3441     offmenum:       jmp     goto7   
                    3442     
1525                3443     labelK:
1525 300BDE         3444                     jnb     bitmem,rnomemk          ;кн память (ввод и <-)
                    3445                             ;;;;;;;
1528 75B0DF         3446                     mov     p3,#0dfh;(код кнопки меню)
152B 30B7F4         3447                     jnb     p3.7,offmenum
                    3448                             ;;;;;;;
152E 75B0EF         3449                     mov     p3,#0efh
1531 30B7D5         3450                     jnb     p3.7,outkmem            ;отжатие кн память на любом уровне обработк
                             и памяти
1534 78B0           3451                     mov     r0,#level
1536 B6114A         3452                     cjne    @r0,#11h,klev1;nome11
1539 75B0FB         3453     lefmem11:       mov     p3,#0fbh
153C E5B0           3454                     mov     a,p3
153E 20E70D         3455                     jb      acc.7,rkvvod0
1541 B6110D         3456                     cjne    @r0,#11h,locle          ;<-memory
1544 7614           3457                     mov     @r0,#14h
1546 900000   F     3458     lolist: mov     dptr,#teSTAT
1549 120000   F     3459                     call    lotext           ;СТАТИСТИКА
154C 80AE           3460                     jmp     onmem11;goto7;
154E 020000   F     3461     rkvvod0:        jmp     kvvod0
                    3462     
                    3463     
1551 B6120A         3464     locle:  cjne            @r0,#12h,lowr           ;<-memory
1554 7611           3465                     mov             @r0,#11h                   ;ОЧИСТКА
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    54

1556 900000   F     3466     loadcle:        mov             dptr,#teCLE
1559 120000   F     3467                     call            lotext
155C 809E           3468                     jmp             onmem11;goto7
                    3469     
155E B6130A         3470     lowr:           cjne    @r0,#13h,lostat
1561 7612           3471                     mov             @r0,#12h
1563 900000   F     3472     lowr1:  mov             dptr,#teWR                ;ЗАПИСЬ
1566 120000   F     3473                     call            lotext
1569 8091           3474                     jmp             onmem11;goto7
                    3475     
156B 7613           3476     lostat: mov             @r0,#13h
156D 900000   F     3477                     mov             dptr,#teLIST              ;ПРОСМОТР
1570 120000   F     3478                     call            lotext
1573 8087           3479                     jmp             onmem11;goto7
1575 B6141A         3480     me_14:  cjne    @r0,#14h,klev22
1578 7613           3481                     mov             @r0,#13h
157A 900000   F     3482                     mov             dptr,#teLIST              ;;ПРОСМОТР
157D 120000   F     3483                     call            lotext
1580 020000   F     3484                     jmp             goto7
1583 B61202         3485      klev1: cjne    @r0,#12h,klev2
1586 80B1           3486                     jmp             lefmem11
1588 B61302         3487     klev2:  cjne    @r0,#13h,klev3;11-14   klev22     ;11-13 нет
158B 80AC           3488                     jmp             lefmem11
158D B61402         3489     klev3:  cjne    @r0,#14h,klev22;
1590 80A7           3490                     jmp             lefmem11
                    3491     ;<- vvod на более низких уровнях
1592 B62117         3492     klev22: cjne    @r0,#21h,klev21
1595 75B0FB         3493     lev220: mov             p3,#0fbh
1598 20B776         3494                     jb              p3.7,kgo23
159B B6210B         3495                     cjne    @r0,#21h,kfullr
159E 7622           3496                     mov             @r0,#22h
15A0 900000   F     3497                     mov             dptr,#teBL
15A3 120000   F     3498                     call            lotext
15A6 020000   F     3499                     jmp             goto7;outF
15A9 020000   F     3500     kfullr: jmp             kfull                           
15AC B6220E         3501     klev21: cjne    @r0,#22h,klev23
15AF 80E4           3502                     jmp             lev220
                    3503     
15B1 020000   F     3504     rlabL2: jmp             labL2
15B4 020000   F     3505     rlabM:  jmp             labM
15B7 020000   F     3506     ques:           jmp             out7
15BA 020000   F     3507     ddoutfr:        jmp             ddoutf
                    3508     
15BD B623F4         3509     klev23: cjne    @r0,#23h,rlabM
15C0 75B0FB         3510                     mov     p3,#0fbh
15C3 30B7F1         3511                     jnb             p3.7,ques;errr labL2
15C6 75B0F7         3512                     mov     p3,#0f7h
15C9 20B7EE         3513                     jb              p3.7,ddoutfr
                    3514                                     ;       считать с индикатора  
15CC C3             3515                     clr                     c
15CD E547           3516                     mov             a,bufind+7      
15CF 9430           3517                     subb            a,#30h
15D1 B40002         3518                     cjne            a,#0,chaibl
15D4 7401           3519                     mov             a,#1                    ;номера блоков 1..4
15D6 F538           3520     chaibl: mov             nblok,a
                    3521                                      ;очистить блок памяти с набранным номером
                    3522                                     ;150h..1000h( 150h+nblok*320h)
15D8 120000   F     3523                     call            adrblok         ;dptr-
15DB 79B8           3524                     mov                     r1,#work                ;обьем блока
15DD 7703           3525                     mov                     @r1,#03
15DF 09             3526                     inc                     r1
15E0 7720           3527                     mov                     @r1,#20h                        ;320h
                    3528     
15E2 79D5           3529             mov     r1,#volume      ;?обьем блока for write
15E4 7700           3530             mov     @r1,#00
15E6 09             3531             inc     r1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    55

15E7 77C7           3532             mov     @r1,#0c7h       ;?320h/4
                    3533     
15E9                3534     goonoff:
15E9 E4             3535                     clr             a
15EA F0             3536                     movx            @dptr,a
15EB A3             3537                     inc             dptr
15EC 79B9           3538                     mov             r1,#work+1
15EE 120000   F     3539                     call            chminus
15F1 78B8           3540                     mov             r0,#work
15F3 E6             3541                     mov             a,@r0
15F4 30E7F2         3542                     jnb             acc.7,goonoff
15F7 C20B           3543                     clr     bitmem  ;сбр признак памяти 
15F9 D204           3544                     setb    bitizm
                    3545                     ;после очистки блока сохраняем в saven_bl 
                    3546                     ;адрес второго с конца измерения потому добавляем 8
15FB 120000   F     3547                     call            adrblok;dptr-начало блока
                    3548                     ;       mov                     a,dpl
                    3549                     ;       add                     a,#8
                    3550                     ;       mov                     dpl,a
                    3551                     ;       mov                     a,dph
                    3552                     ;       addc            a,#0
                    3553                     ;       mov                     dph,a
15FE 120000   F     3554                     call            save_hl;подготовка записи в начало блока
1601 78B2           3555                     mov             r0,#marker
1603 76FF           3556                     mov             @r0,#0ffh
1605 020000   F     3557                     jmp                     vvod2_10
1608 020000   F     3558                     jmp     goto7
                    3559     
160B 020000   F     3560     rddoutf:        jmp             ddoutf
160E 020000   F     3561     rgo23no:        jmp             go23no
                    3562     
                    3563     ;vvod   БЛОК->БЛОК 00           
1611 75B0F7         3564     kgo23:  mov     p3,#0f7h
1614 20B7F4         3565                     jb              p3.7,rddoutf
1617 B621F4         3566                     cjne    @r0,#21h,rgo23no
                    3567                     ;очистить память 150..dd0h
                    3568                             ;1й блок
161A 900150         3569                     mov                     dptr,#150h
161D 79B8           3570                     mov                     r1,#work                ;обьем блока
161F 7703           3571                     mov                     @r1,#03
1621 09             3572                     inc                     r1
1622 7720           3573                     mov                     @r1,#20h                        ;320h
1624                3574     gooff1:
1624 E4             3575                     clr                     a
1625 F0             3576                     movx            @dptr,a
1626 A3             3577                     inc                     dptr
1627 79B9           3578                     mov                     r1,#work+1
1629 120000   F     3579                     call            chminus
162C 78B8           3580                     mov             r0,#work
162E E6             3581                     mov             a,@r0
162F 30E7F2         3582                     jnb             acc.7,gooff1
1632 900150         3583                     mov                     dptr,#150h;начало 1 го блока
                    3584                     ;после очистки блока сохраняем в saven_bl 
                    3585                     ;адрес второго с конца измерения потому добавляем 8
                    3586     ;                               call            save_hl;подготовка записи в начало блока
                    3587     ;2й блок
1635 900470         3588                     mov                     dptr,#470h
1638 79B8           3589                     mov                     r1,#work                ;обьем блока
163A 7703           3590                     mov                     @r1,#03
163C 09             3591                     inc                     r1
163D 7720           3592                     mov                     @r1,#20h                        ;320h
163F                3593     gooff2:
163F E4             3594                     clr                     a
1640 F0             3595                     movx            @dptr,a
1641 A3             3596                     inc                     dptr
1642 79B9           3597                     mov                     r1,#work+1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    56

1644 120000   F     3598                     call            chminus
1647 78B8           3599                     mov             r0,#work
1649 E6             3600                     mov             a,@r0
164A 30E7F2         3601                     jnb             acc.7,gooff2
164D 900470         3602                     mov                     dptr,#470h;начало 2 го блока
                    3603     ;                       call            save_hl;подготовка записи в начало блока
                    3604     ;3й блок
1650 900790         3605                     mov                     dptr,#790h
1653 79B8           3606                     mov                     r1,#work                ;обьем блока
1655 7703           3607                     mov                     @r1,#03
1657 09             3608                     inc                     r1
1658 7720           3609                     mov                     @r1,#20h                        ;320h
                    3610     
165A                3611     gooff3:
165A E4             3612                     clr                     a
165B F0             3613                     movx            @dptr,a
165C A3             3614                     inc                     dptr    
165D 79B9           3615                     mov                     r1,#work+1
165F 120000   F     3616                     call            chminus
1662 78B8           3617                     mov             r0,#work
1664 E6             3618                     mov             a,@r0
1665 30E7F2         3619                     jnb             acc.7,gooff3
1668 900790         3620                     mov                     dptr,#790h;начало 3 го блока
                    3621                     ;после очистки блока сохраняем в saven_bl 
                    3622                     ;адрес второго с конца измерения потому добавляем 8
                    3623                     ;       call            save_hl;подготовка записи в начало блока
                    3624     ;4й блок
166B 900AB0         3625                     mov                     dptr,#0ab0h
166E 79B8           3626                     mov                     r1,#work                ;обьем блока
1670 7703           3627                     mov                     @r1,#03h
1672 09             3628                     inc                     r1
1673 7720           3629                     mov                     @r1,#20h                        ;320h
1675                3630     gooff4:
1675 E4             3631                     clr                     a
1676 F0             3632                     movx            @dptr,a
1677 A3             3633                     inc                     dptr
1678 79B9           3634                     mov                     r1,#work+1
167A 120000   F     3635                     call            chminus
167D 78B8           3636                     mov             r0,#work
167F E6             3637                     mov             a,@r0
1680 30E7F2         3638                     jnb             acc.7,gooff4
1683 900AB0         3639                     mov                     dptr,#0ab0h;начало 4 го блока
                    3640                     ;после очистки блока сохраняем в saven_bl 
                    3641                     ;адрес второго с конца измерения потому добавляем 8
                    3642     ;                       call            save_hl;подготовка записи в начало блока
                    3643                             ;;;;26.02.07
1686 E538           3644                     mov             a,nblok
1688 B40117         3645                     cjne    a,#1,cl_hl1
168B 900150         3646                     mov             dptr,#150h
168E 79D3           3647                     mov             r1,#saven_bl
1690 E583           3648     cl_hl:  mov             a,dph
1692 F7             3649                     mov             @r1,a
1693 09             3650                     inc             r1
1694 E582           3651                     mov             a,dpl
1696 F7             3652                     mov             @r1,a
                    3653                     ;;;;;;;;
1697 C20B           3654                     clr             bitmem
1699 D204           3655                     setb    bitizm
169B 78B2           3656                     mov             r0,#marker
169D 76FF           3657                     mov             @r0,#0ffh
169F 020000   F     3658                     jmp                     vvod2_10;jmp            goto7
16A2 B40207         3659     cl_hl1: cjne            a,#2,cl_hl2
16A5 900470         3660                     mov                     dptr,#470h
16A8 79C0           3661                     mov             r1,#saven_bl2
16AA 80E4           3662                     jmp                     cl_hl
                    3663     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    57

16AC B40307         3664     cl_hl2: cjne            a,#3,cl_hl3
16AF 900790         3665                     mov                     dptr,#790h
16B2 79C2           3666                     mov             r1,#saven_bl3
16B4 80DA           3667                     jmp                     cl_hl
                    3668     
16B6 900AB0         3669     cl_hl3: mov                     dptr,#0ab0h
16B9 79D9           3670                     mov             r1,#saven_bl4
16BB 80D3           3671                     jmp                     cl_hl
                    3672     
16BD 7623           3673     go23no: mov             @r0,#23h
16BF 753B08         3674                     mov                     movrig,#8
16C2 753A07         3675                     mov             movleft,#7
16C5 8056           3676                     jmp             loblok;БЛОК 00
16C7 7621           3677     kfull:  mov             @r0,#21h
16C9 8025           3678                     jmp             gofull
                    3679                             
                    3680                                             
16CB 020000   F     3681     nomemk: jmp             labelS                  ;нажат ввод меню
                    3682                             
16CE 75B0FB         3683     nome11: mov             p3,#0fbh
16D1 E5B0           3684                     mov             a,p3
16D3 20E70D         3685                     jb              acc.7,kvvod0
16D6 B61205         3686                     cjne            @r0,#12h,mem12no        
16D9 7611           3687                     mov             @r0,#11h                ;ОЧИСТКА
16DB 020000   F     3688                     jmp              loadcle
                    3689     
16DE                3690     mem12no:        ;cjne           @r0,#13h,lowr           
16DE 7612           3691                     mov             @r0,#12h                   ;
16E0 020000   F     3692                     jmp             lowr1                     ;ЗАПИСЬ
16E3 75B0F7         3693     kvvod0: mov             p3,#0f7h                        ;knopka vvod
16E6 20B710         3694                     jb              p3.7,ddoutf
16E9 78B0           3695                     mov             r0,#level
16EB B6112A         3696                     cjne            @r0,#11h,mvv11
16EE 7621           3697                     mov             @r0,#21h                ;ПОЛНАЯ
16F0 900000   F     3698     gofull: mov             dptr,#teFULL
16F3 120000   F     3699                     call            lotext
16F6 020000   F     3700                     jmp             onmem11;mlabL2  ;<-????????/
                    3701     
16F9                3702     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3703     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3704     ;т е сохранить ее в ячейке для мигания в противном случае
                    3705     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3706     ;       знакоместа
16F9 78B2           3707                     mov             r0,#marker
16FB 7440           3708                     mov             a,#bufind
16FD 26             3709                     add             a,@r0                   ;a=bufind+marker
16FE F9             3710                     mov             r1,a
16FF 19             3711                     dec             r1      ;       inc             r1
1700 873C           3712                     mov             savba,@r1
1702 C219           3713                     clr             bitmig
                    3714     ;;;;;;;;;;;;;;;;
1704 78B2           3715                     mov             r0,#marker      ;курсор слева   ?
1706 E53A           3716                     mov             a,movleft
1708 C3             3717                     clr             c
1709 96             3718                     subb            a,@r0
170A 7006           3719                     jnz             left21
170C E53B           3720                     mov             a,movrig;уст в правую позицию
170E F6             3721                     mov             @r0,a
                    3722     
170F 020000   F     3723                     jmp             goto7                                            
1712 E53A           3724     left21: mov             a,movleft;уст в левую позицию
1714 F6             3725                     mov             @r0,a   
1715 020000   F     3726                     jmp             goto7
                    3727     
                    3728     
1718 B61215         3729     mvv11:  cjne            @r0,#12h,mvv12
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    58

171B 7631           3730                     mov             @r0,#31h
171D 900000   F     3731     loblok: mov             dptr,#teBL0;БЛОК 0
1720 120000   F     3732                     call            lotext
1723 E538           3733                     mov             a,nblok
1725 2430           3734                     add             a,#30h
1727 F547           3735                     mov             bufind+7,a
1729 78B2           3736                     mov             r0,#marker
172B 7607           3737                     mov             @r0,#7
                    3738                                     ;mov            movrig,#9
                    3739                                     ;mov            movleft,#6
172D 020000   F     3740                     jmp             onmem11
1730 B61411         3741     mvv12:  cjne            @r0,#14h,bl_li
1733 7661           3742                     mov             @r0,#61h
1735 900000   F     3743                     mov             dptr,#teMIN;
1738 120000   F     3744                     call    lotext
173B 120000   F     3745                     call    vichmin
173E 120000   F     3746                     call    z_1s
1741 020000   F     3747                     jmp             onmem11
                    3748     
1744 7641           3749     bl_li:  mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1746 80D5           3750                     jmp             loblok
                    3751     
                    3752     
                    3753     
1748                3754     mlabL2:         ;jmp            labL2
                    3755                                             ;  уст курсор в правую позицию 
                    3756                                     ;                               29.12.06
                    3757     ;;;;;;;;;;;;;;;;;;
                    3758     ;необходимо не портить цифру в следуюем справа знакоместе
                    3759     ;т е сохранить ее в ячейке для мигания в противном случае
                    3760     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3761     ;       знакоместа
1748 78B2           3762                     mov             r0,#marker
174A 7440           3763                     mov             a,#bufind
174C 26             3764                     add             a,@r0                   ;a=bufind+marker
174D F9             3765                     mov             r1,a
174E 09             3766                     inc             r1
174F 873C           3767                     mov             savba,@r1
                    3768     ;;;;;;;;;;;;;;;;
1751 78B2           3769                     mov             r0,#marker      ;курсор справа  ?
1753 E53B           3770                     mov             a,movrig
1755 C3             3771                     clr             c
1756 96             3772                     subb    a,@r0
1757 6006           3773                     jz         equ2l
1759 E53B           3774                     mov             a,movrig;уст в правую позицию
175B F6             3775                     mov             @r0,a
                    3776     ;                       lool
175C 020000   F     3777                     jmp             goto7                                            
175F E53A           3778     equ2l:  mov             a,movleft;уст в левую позицию
1761 F6             3779                     mov             @r0,a   
1762 020000   F     3780                     jmp             goto7
                    3781                     
1765 020000   F     3782     rnom31: jmp                     nom31
1768 B631FA         3783     labM:           cjne    @r0,#31h,rnom31
176B 75B0FB         3784                     mov             p3,#0fbh
176E 30B7D7         3785                     jnb             p3.7,mlabL2
1771 75B0F7         3786                     mov             p3,#0f7h
1774 20B782         3787                     jb              p3.7,ddoutf
                    3788                                
1777 7632           3789                     mov             @r0,#32h                        ;ИНТ 0000
                    3790                                     ;       считать с индикатора  
1779 C3             3791     blokvv: clr             c
177A E547           3792                     mov             a,bufind+7      
177C 9430           3793                     subb            a,#30h
177E B40002         3794                     cjne            a,#0,blokvvc
1781 7401           3795                     mov             a,#1                    ;номера блоков 1..4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    59

                    3796     
1783 F538           3797     blokvvc:        mov             nblok,a
1785 900000   F     3798                     mov             dptr,#teINT;ИНТ 0000c
1788 120000   F     3799                     call            lotext
178B 78CE           3800                     mov             r0,#interva+1
178D 7952           3801                     mov             r1,#abin+3
178F E6             3802                     mov             a,@r0
1790 F7             3803                     mov             @r1,a
1791 18             3804                     dec                     r0
1792 19             3805                     dec                     r1
1793 E6             3806                     mov             a,@r0
1794 F7             3807                     mov             @r1,a
1795 19             3808                     dec             r1
1796 E4             3809                     clr             a
1797 F7             3810                     mov             @r1,a
1798 19             3811                     dec             r1
1799 F7             3812                     mov             @r1,a
                    3813                                                                             
179A 7853           3814                     mov             r0,#adec
179C 7952           3815                     mov             r1,#abin+3      ;hex->10
179E 120000   F     3816                     call    bindec
                    3817                                     
17A1 785C           3818                     mov             r0,#adec+9;разместить в буфер индикации
17A3 7948           3819                     mov             r1,#bufind+8
17A5 7F04           3820                     mov             r7,#4
17A7 E6             3821     bloin:  mov             a,@r0
17A8 2430           3822                     add             a,#30h
17AA F7             3823                     mov             @r1,a
17AB 19             3824                     dec             r1
17AC 18             3825                     dec             r0
17AD DFF8           3826                     djnz    r7,bloin
17AF 78B2           3827                     mov             r0,#marker
17B1 7605           3828                     mov             @r0,#5
17B3 753B08         3829                     mov             movrig,#8
17B6 753A05         3830                     mov             movleft,#5
17B9 789A           3831                     mov             r0,#parT
17BB B60609         3832                     cjne            @r0,#6,innot6
17BE 534BF0         3833                     anl             bufind+11,#0f0h;after 5- 0.000c
17C1 434B04         3834                     orl             bufind+11,#04h
                    3835                             
17C4 020000   F     3836                     jmp             goto7
17C7 B60309         3837     innot6: cjne            @r0,#3,innot3
17CA 534BF0         3838                     anl             bufind+11,#0f0h;after 7- 000.0c
17CD 434B20         3839                     orl             bufind+11,#20h
                    3840                                     ;call           ind
17D0 020000   F     3841                     jmp             out7;goto7
17D3 C3             3842     innot3: clr             c
17D4 7403           3843                     mov             a,#3
17D6 96             3844                     subb            a,@r0
17D7 5009           3845                     jnc             innot1_2
17D9 534BF0         3846                     anl             bufind+11,#0f0h;after 6- 00.00c
17DC 434B40         3847                     orl             bufind+11,#40h
17DF 020000   F     3848                     jmp             goto7
                    3849     
17E2                3850     innot1_2:
17E2 534B0F         3851                     anl             bufind+11,#0fh;0h;0000c
17E5 C219           3852                     clr             bitmig
                    3853                                     ;call           ind             нет необходимости пришет пр
                             обел         
17E7 020000   F     3854     rgoto7: jmp        goto7;outF
                    3855     
17EA B63276         3856     nom31:  cjne            @r0,#32h,nom32
17ED 75B0FB         3857                     mov             p3,#0fbh
17F0 20B71F         3858                     jb              p3.7,vvinte             ;ввод интервал;no31n
                    3859                                     
17F3                3860     lefcur:         ;;кн <- 32 нач блок 000
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    60

                    3861     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3862     ;т е сохранить ее в ячейке для мигания в противном случае
                    3863     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3864     ;       знакоместа
17F3 C219           3865                     clr             bitmig
17F5 78B2           3866                     mov             r0,#marker;нажата кн <- при вводе цифр нач блок 000
17F7 7440           3867                     mov             a,#bufind
17F9 26             3868                     add             a,@r0                   ;a=bufind+marker
17FA F9             3869                     mov             r1,a
17FB 19             3870                     dec             r1;;;;;;;;;;;
17FC 873C           3871                     mov             savba,@r1
                    3872                                             
17FE 78B2           3873                     mov             r0,#marker      ;курсор слева?
1800 E53A           3874                     mov             a,movleft
1802 C3             3875                     clr             c
1803 96             3876                     subb    a,@r0
1804 7006           3877                     jnz        noequ2
1806 E53B           3878                     mov             a,movrig
1808 F6             3879                     mov             @r0,a;уст в крайнюю правую позицию
1809 020000   F     3880                     jmp             goto7
180C 120000   F     3881     noequ2: call    marle;сдвинуть курсор в  лево на 1позицию       
180F 020000   F     3882                     jmp        goto7        
                    3883                                                                       
                    3884     
                    3885     ;;;;;;;;;;;;;;;;;;
1812                3886     vvinte:         ;ввод интервал                          
1812 75B0F7         3887     no31n:  mov             p3,#0f7h
1815 20B7CF         3888                     jb              p3.7,rgoto7
1818 7633           3889                     mov             @r0,#33h
                    3890                                     ;считать с индикатора введенный интервал
181A 7F0A           3891                     mov             r7,#10
181C 7853           3892                     mov             r0,#adec
181E 120000   F     3893                     call    clearN
1821 120000   F     3894                     call    upak4                   
1824 784F           3895                     mov             r0,#abin
1826 7953           3896                     mov             r1,#adec                        ;мл         ст
1828 120000   F     3897                     call    decbin                  ;abin..abin+3 (hex)
182B 794F           3898                     mov             r1,#abin
182D 78CE           3899                     mov             r0,#interva+1
182F E7             3900                     mov             a,@r1
1830 F6             3901                     mov             @r0,a
1831 18             3902                     dec             r0
1832 09             3903                     inc             r1
1833 E7             3904                     mov             a,@r1
1834 F6             3905                     mov             @r0,a
                    3906                                     
1835 78D5           3907                     mov             r0,#volume                      ;объем блока
1837 7600           3908                     mov             @r0,#0
1839 08             3909                     inc             r0
183A 76C7           3910                     mov             @r0,#0c7h
183C 120000   F     3911                     call            adrblok;dptr
183F 120000   F     3912                     call            save_hl;1я ячейка блока
1842 78B2           3913                     mov             r0,#marker
1844 76FF           3914                     mov             @r0,#0ffh
1846 D204           3915                     setb            bitizm
1848 C20B           3916                     clr             bitmem
184A 789A           3917     vvod2_10:       mov             r0,#parT
184C B6050C         3918                     cjne            @r0,#5,no10msv
184F 900000   F     3919                     mov                     dptr,#te10ms
1852 120000   F     3920     t2msme: call            lotext
                    3921                                             
1855 120000   F     3922                     call            ind
1858 020000   F     3923     no2msv:         jmp        goto7;
185B B606FA         3924     no10msv:        cjne            @r0,#6,no2msv   
185E 900000   F     3925                     mov                     dptr,#te2ms
1861 80EF           3926                     jmp                     t2msme
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    61

                    3927     
                    3928     
                    3929     
1863 B6332B         3930     nom32:  cjne            @r0,#33h,nom33
1866 75B0FB         3931                     mov             p3,#0fbh
1869 30B787         3932                     jnb             p3.7,lefcur
186C 75B0F7         3933                     mov             p3,#0f7h
186F 20B7E6         3934                     jb              p3.7,no2msv;rgoto7
                    3935                     ;запомнить номер ячейки конца блока
1872 7634           3936                     mov     @r0,#34h
1874 7F0A           3937     INTn:           mov             r7,#10
1876 7853           3938                     mov             r0,#adec
1878 120000   F     3939                     call    clearN
187B 120000   F     3940                     call    upak3                   
187E 784F           3941                     mov             r0,#abin
1880 7953           3942                     mov             r1,#adec                        ;мл         ст
1882 120000   F     3943                     call    decbin                  ;abin..abin+3 (hex)
1885 120000   F     3944                     call    loadr2                  ;r2..r5
1888 120402         3945                     call    altof                   ;r2..r5->int
188B 020000   F     3946     dgoto7: jmp             goto7
                    3947     
188E 020000   F     3948     rlefcur:        jmp             lefcur
                    3949     
1891 B63464         3950     nom33:  cjne            @r0,#34h,labelP
1894 75B0FB         3951                     mov             p3,#0fbh
1897 30B7F4         3952                     jnb             p3.7,rlefcur
189A 75B0F7         3953                     mov             p3,#0f7h
189D 20B7EB         3954                     jb              p3.7,dgoto7
18A0 7635           3955                     mov             @r0,#35h
18A2 78B2           3956                     mov             r0,#marker
18A4 76FF           3957                     mov             @r0,#0ffh
                    3958                     ;T1<-число на индикаторе
                    3959                     ;vvod КОН БЛ 000
18A6 78CF           3960                     mov             r0,#chbuf               ;счетчик периода загрузки в буфер и
                              интерфейс
18A8 7630           3961                     mov             @r0,#30h  
18AA C20B           3962                     clr             bitmem
18AC D204           3963                     setb            bitizm;;;;      
18AE 020000   F     3964                     jmp        goto7
18B1 020000   F     3965     vodm11_15:      jmp             vvodm11_15
18B4 020000   F     3966     me11_15de:      jmp             me11_15dec
18B7 020000   F     3967     moutkmem:       jmp             outkmem
                    3968     
18BA 020000   F     3969     nmem_menu:      jmp             out7                    ;нажата память в режиме меню
                    3970     ;обработка кнопки меню ввод
18BD 301138         3971     labelS: jnb                     bitmenu,labelP
18C0 75B0EF         3972                     mov                     p3,#0efh
18C3 30B7F4         3973                     jnb                     p3.7,nmem_menu
18C6 75B0DF         3974                     mov                     p3,#0dfh
18C9 30B7EB         3975                     jnb                     p3.7,moutkmem
18CC 78B1           3976                     mov                     r0,#vichR
18CE 7415           3977                     mov                     a,#15h
18D0 C3             3978                     clr                     c
18D1 96             3979                     subb            a,@r0
18D2 4021           3980                     jc              rme21_23
                    3981                             
18D4 75B0FB         3982                     mov             p3,#0fbh
18D7 20B7D7         3983                     jb              p3.7,vodm11_15
18DA 78B1           3984                     mov             r0,#vichR
18DC B611D5         3985                     cjne            @r0,#11h,me11_15de;<-
18DF 7615           3986                     mov             @r0,#15h
18E1 900000   F     3987                     mov             dptr,#teKALIB
18E4 120000   F     3988                     call            lotext
18E7 020000   F     3989                     jmp             onmem11
18EA C211           3990     menuon: clr             bitmenu                 ;off menu
18EC D204           3991                     setb            bitizm
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    62

                    3992     
18EE 78B1           3993                     mov             r0,#vichR
18F0 7600           3994                     mov             @r0,#0
18F2 020000   F     3995                     jmp             onmem11
                    3996     
                    3997                                             ;;;;;
                    3998             
18F5 020000   F     3999     rme21_23:       jmp             me21_23 
                    4000                             
                    4001     ;режим просмотра
18F8 B64130         4002     labelP:         cjne            @r0,#41h,govvlist
18FB 7642           4003                     mov             @r0,#42h
                    4004                             ;       считать с индикатора  
18FD C3             4005                     clr             c
18FE E547           4006                     mov             a,bufind+7      
1900 9430           4007                     subb            a,#30h
1902 B40002         4008                     cjne            a,#0,chaipr
1905 7401           4009                     mov             a,#1
1907 F538           4010     chaipr:         mov             nblok,a
1909 900000   F     4011                     mov             dptr,#teCH;ОТСЧЕТ 000
190C 120000   F     4012                     call            lotext
190F 534BEF         4013                     anl             bufind+11,#0efh;убрать точку с 1го знакоместа
1912 78B2           4014                     mov             r0,#marker
1914 7607           4015                     mov             @r0,#7
1916 753B09         4016                     mov             movrig,#9
1919 753A07         4017                     mov             movleft,#7
191C 120000   F     4018                     call            z_1s
191F 020000   F     4019                     jmp        goto7;outF
1922 020000   F     4020     label43:        jmp             label7
                    4021     
1925 020000   F     4022     rlist_43:       jmp                     list_43                                 
1928 020000   F     4023     mlabL2r:        jmp                     mlabL2
192B B642F7         4024     govvlist:       cjne            @r0,#42h,rlist_43       ;?button
192E 75B0FB         4025                     mov                     p3,#0fbh
1931 30B7F4         4026                     jnb                     p3.7,mlabL2r;кн <- ОТСЧЕТ 000
1934 75B0F7         4027                     mov                     p3,#0f7h
1937 20B7E8         4028                     jb                      p3.7,label43
193A 7643           4029                     mov                     @r0,#43h;vvod 
193C 78B2           4030                     mov                     r0,#marker
193E 76FF           4031                     mov                     @r0,#0ffh
1940 7F0A           4032                     mov             r7,#10
1942 7853           4033                     mov             r0,#adec
1944 120000   F     4034                     call    clearN
1947 120000   F     4035                     call    upak3                   
194A 784F           4036                     mov             r0,#abin
194C 7953           4037                     mov             r1,#adec                        ;мл         ст
194E 120000   F     4038                     call    decbin                  ;abin..abin+3 (hex)
1951 120000   F     4039                     call    loadr2                  ;r2..r5
1954 ED             4040                     mov             a,r5                            ;сохр номер лемента
1955 F537           4041                     mov             nelem,a
1957 120402         4042                     call    altof                   ;r2..r5->int
195A 900000   F     4043                     mov             dptr,#ch_1;
195D 120000   F     4044                     call    ldc_ltemp                       ;r8..r11
1960 1201D1         4045                     call    flsub
1963 900000   F     4046                     mov             dptr,#ch_4;
1966 120000   F     4047                     call    ldc_ltemp                       ;r8..r11
1969 120203         4048                     call    flmul                           ;(n(номер отсчета)-1)*4+адр нач бло
                             ка
196C 120343         4049                     call            ftol                    ;r2..r5->hex
196F C002           4050                     push            rr2
1971 C003           4051                     push            rr3
1973 C004           4052                     push            rr4
1975 C005           4053                     push            rr5
1977 120000   F     4054                     call            adrblok;dptr-
197A D005           4055                     pop                     rr5
197C D004           4056                     pop                     rr4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    63

197E D003           4057                     pop                     rr3
1980 D002           4058                     pop                     rr2
1982 79D8           4059                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес внешн озу введе
                             нного лемента
1984 E582           4060                     mov                     a,dpl
1986 2D             4061                     add                     a,r5
1987 F582           4062                     mov                     dpl,a
1989 F7             4063                     mov                     @r1,a           ;low
198A E583           4064                     mov                     a,dph
198C 3C             4065                     addc            a,r4
198D F583           4066                     mov                     dph,a
198F 19             4067                     dec                     r1
1990 F7             4068                     mov                     @r1,a                   ;high
1991                4069     li42_43:
1991 120000   F     4070                     call            reA3_X          ;r2..r5/выдать рез из внешн пам на индикато
                             р
1994 900000   F     4071                     mov             dptr,#ch10
1997 120000   F     4072                     call    ldc_ltemp
199A 120000   F     4073                     call    zdiv                    ;form4=invertif <0; divide
199D 120000   F     4074                     call    maform          ;setb/clr       znmat
19A0 784F           4075                     mov             r0,#abin
19A2 120000   F     4076                     call    saver2          ;r2..r5-> @r0..@r0+3
19A5 7853           4077                     mov             r0,#adec
19A7 7952           4078                     mov             r1,#abin+3      ;hex->10
19A9 120000   F     4079                     call    bindec
                    4080                             
19AC 785C           4081                     mov             r0,#adec+9;разместить в буфер индикации
19AE 7945           4082                     mov             r1,#bufind+5
19B0 7F07           4083                     mov             r7,#7
19B2 E6             4084     ch43:           mov             a,@r0
19B3 2430           4085                     add             a,#30h
19B5 F7             4086                     mov             @r1,a
19B6 19             4087                     dec             r1
19B7 18             4088                     dec             r0
19B8 DFF8           4089                     djnz    r7,ch43
19BA 7847           4090                     mov             r0,#bufind+7
19BC 762D           4091                     mov             @r0,#2dh          ;-2..-9
19BE 7840           4092                     mov             r0,#bufind
19C0 762B           4093                     mov             @r0,#2bh
19C2 300202         4094                     jnb             znmat,nozzmi43;bitznak,nozzmi
19C5 762D           4095                     mov             @r0,#2dh        ;'-'
                    4096     
19C7 E538           4097     nozzmi43:       mov             a,nblok
19C9 B40104         4098                     cjne    a,#1,nozzmi1            
19CC 7934           4099                     mov             r1,#sadiap;diap
19CE 8010           4100                     jmp             nozzbl
19D0 B40204         4101     nozzmi1:        cjne    a,#2,nozzmi2            
19D3 7932           4102                     mov             r1,#sadiap2;diap
19D5 8009           4103                     jmp             nozzbl
19D7 B40304         4104     nozzmi2:        cjne    a,#3,nozzmi3            
19DA 7931           4105                     mov             r1,#sadiap3;diap
19DC 8002           4106                     jmp             nozzbl
                    4107     
19DE 7930           4108     nozzmi3: mov            r1,#sadiap4;diap
19E0 7848           4109     nozzbl:  mov            r0,#bufind+8
19E2 E7             4110                                     mov             a,@r1
19E3 B40808         4111                     cjne    a,#8,nodi8_43
19E6 7630           4112                     mov             @r0,#30h                 ;10-10
19E8 18             4113                     dec             r0
19E9 7663           4114                     mov             @r0,#63h;31h
19EB 08             4115                     inc             r0
19EC 800E           4116                     jmp             see_l43
                    4117     
19EE B40908         4118     nodi8_43:       cjne    a,#9,nodi9_43
19F1 7631           4119                     mov             @r0,#31h           ;10-11
19F3 18             4120                     dec             r0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    64

19F4 7663           4121                     mov             @r0,#63h;31h
19F6 08             4122                     inc             r0
19F7 8003           4123                     jmp             see_l43
                    4124     
19F9 2432           4125     nodi9_43:       add             a,#32h
19FB F6             4126                     mov             @r0,a;
19FC 08             4127     see_l43:        inc             r0
19FD 7641           4128                     mov             @r0,#"A";"E";
                    4129                     ;       inc             r0
                    4130                     ;       mov             @r0,#00h ;=feh в нач установе для поджига всех сегм
                    4131                     ;       inc             r0;             mov             bufind+11
                    4132                     ;       mov             @r0,#0d0h               ;bufind+11.4 точка после пе
                             рвой цифры
19FF 434B10         4133                     orl             bufind+11,#10h
1A02 120000   F     4134     out43:  call            ind
1A05 120000   F     4135                     call            z_1s
1A08 020000   F     4136                     jmp             out7                                    
                    4137     
                    4138                     ;;;;;;;;        
1A0B 783D           4139     label7: mov             r0,#chkl
1A0D 7603           4140                     mov             @r0,#3
1A0F 08             4141                     inc             r0
1A10 76E8           4142                     mov             @r0,#0e8h               ;1000
1A12 020000   F     4143                     jmp             out7;
1A15 B64352         4144     list_43:        cjne    @r0,#43h,noli_43
1A18 75B0FB         4145                     mov             p3,#0fbh                ;43h <-
1A1B 20B70B         4146                     jb              p3.7,vvod43             ;vvod
1A1E C20B           4147                     clr             bitmem
1A20 D204           4148                     setb    bitizm
1A22 78B2           4149                     mov             r0,#marker
1A24 76FF           4150                     mov             @r0,#0ffh
1A26 020000   F     4151                     jmp             goto7;6.03.07;label7;по кн <- выход из просмотра
                    4152     
1A29 7644           4153     vvod43: mov             @r0,#44h
1A2B E537           4154                     mov             a,nelem;вывод порядкового номера в блоке 
1A2D 04             4155                     inc             a
1A2E F552           4156                     mov             abin+3,a
                    4157                                                     
1A30 F537           4158                     mov             nelem,a
1A32 E4             4159                     clr             a
1A33 F551           4160                     mov             abin+2,a
1A35 F550           4161                     mov             abin+1,a
1A37 F54F           4162                     mov             abin,a
                    4163                                             
1A39 7853           4164                     mov             r0,#adec
1A3B 7952           4165                     mov             r1,#abin+3      ;hex->10
1A3D 120000   F     4166                     call    bindec
1A40 7840           4167                     mov             r0,#bufind;почистить индикатор
1A42 7F0A           4168                     mov             r7,#10
1A44 7420           4169                     mov             a,#20h
1A46 F6             4170     cle20:  mov             @r0,a
1A47 08             4171                     inc             r0
1A48 DFFC           4172                     djnz    r7,cle20
                    4173                             ;;;;;;
1A4A 900000   F     4174                     mov             dptr,#teCH;ОТСЧЕТ 000
1A4D 120000   F     4175                     call            lotext
1A50 534BEF         4176                     anl             bufind+11,#0efh;убрать точку с 1го знакоместа
1A53 785C           4177                     mov             r0,#adec+9;разместить в буфер индикации
1A55 7949           4178                     mov             r1,#bufind+9
1A57 7F03           4179                     mov             r7,#3
1A59 E6             4180     ch43_42:        mov             a,@r0
1A5A 2430           4181                     add             a,#30h
1A5C F7             4182                     mov             @r1,a
1A5D 19             4183                     dec             r1
1A5E 18             4184                     dec             r0
1A5F DFF8           4185                     djnz    r7,ch43_42
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    65

1A61 120000   F     4186                     call            ind
1A64 120000   F     4187                     call            z_1s
1A67 020000   F     4188                     jmp             out7
1A6A B64419         4189     noli_43:        cjne            @r0,#44h,vvosta
1A6D 7643           4190                     mov                     @r0,#43h
1A6F 79D8           4191                     mov                     r1,#copy_hl+1;saven_bl+1
1A71 E7             4192                     mov                     a,@r1
1A72 F582           4193                     mov                     dpl,a
1A74 19             4194                     dec                     r1
1A75 E7             4195                     mov                     a,@r1;high
1A76 F583           4196                     mov                     dph,a
1A78 A3             4197                     inc                     dptr
1A79 A3             4198                     inc                     dptr
1A7A A3             4199                     inc                     dptr
1A7B A3             4200                     inc                     dptr
1A7C E583           4201                     mov                     a,dph
1A7E F7             4202                     mov                     @r1,a
1A7F 09             4203                     inc                     r1
1A80 E582           4204                     mov                     a,dpl
1A82 F7             4205                     mov                     @r1,a                           ;сохр адр внешн озу
1A83 020000   F     4206                     jmp                     li42_43;вывод значения следующего в блоке
                    4207     
1A86 B66111         4208     vvosta: cjne            @r0,#61h,vvostad
1A89 7662           4209                     mov                     @r0,#62h
1A8B 900000   F     4210                     mov                     dptr,#teMAX;
1A8E 120000   F     4211                     call            lotext
1A91 120000   F     4212                     call            vichmax
1A94 120000   F     4213                     call            z_05s;z_1s
1A97 020000   F     4214                     jmp             goto7
                    4215     
1A9A B66211         4216     vvostad:        cjne            @r0,#62h,rousta
1A9D 7663           4217                     mov                     @r0,#63h
1A9F 900000   F     4218                     mov             dptr,#teMid;
1AA2 120000   F     4219                     call    lotext
1AA5 120000   F     4220                     call            vichmean
1AA8 120000   F     4221                     call            z_05s
1AAB 020000   F     4222                     jmp             goto7
                    4223     
1AAE B6630E         4224     rousta: cjne            @r0,#63h,rousta1
1AB1 7661           4225                     mov                     @r0,#61h
1AB3 900000   F     4226                     mov             dptr,#teMin;
1AB6 120000   F     4227                     call    lotext
1AB9 120000   F     4228                     call            vichmin
1ABC 120000   F     4229                     call            z_05s
1ABF 020000   F     4230     rousta1:        jmp             goto7
                    4231     
1AC2 020000   F     4232     rLABELP:        jmp             LABELP
1AC5 78B1           4233     vvodm11_15:     mov             r0,#vichR;vvod
1AC7 75B0F7         4234                     mov             p3,#0f7h
1ACA 20B7F5         4235                     jb              p3.7,rLABELP;????
                    4236                                     
1ACD B61115         4237                     cjne            @r0,#11h,tome21
1AD0 7621           4238                     mov             @r0,#21h;vvod
1AD2 900000   F     4239                     mov             dptr,#teTE11
1AD5 120000   F     4240                     call            lotext
1AD8 534B03         4241                     anl             bufind+11,#03h ;погасить запятые
1ADB 020000   F     4242                     jmp             onmem11
                    4243     
1ADE 16             4244     me11_15dec:     dec             @r0                             ;<-
1ADF 120000   F     4245     lokame1:        call            lomenu
1AE2 020000   F     4246                     jmp             onmem11
                    4247     
1AE5 B61206         4248     tome21: cjne            @r0,#12h,tome13
                    4249                     ;вкл тест интерфейса
1AE8 020000   F     4250                     jmp             testrs;??????????
1AEB 020000   F     4251                     jmp             onmem11
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    66

                    4252     
1AEE B6132A         4253     tome13: cjne            @r0,#13h,tome14
1AF1 7631           4254                     mov             @r0,#31h
                    4255                                             
1AF3 7A50           4256                     mov             r2,#50h                         ;57.6->19.2
1AF5 7B2C           4257                     mov             r3,#2ch
1AF7 120454         4258                     call            re4byte                 ;28..2bh 3bait-parol,1 bait skor
1AFA E508           4259                     mov             a,r8
1AFC B4000E         4260                     cjne            a,#00,skor19
1AFF 900000   F     4261                     mov             dptr,#teS57_6;57,6
1B02 120000   F     4262                     call            lotext
1B05 434B80         4263                     orl             bufind+11,#80h
1B08 C213           4264                     clr             bitv19
1B0A 020000   F     4265                     jmp             onmem11
1B0D 900000   F     4266     skor19: mov             dptr,#teS19_2
1B10 120000   F     4267                     call            lotext
1B13 D213           4268                     setb            bitv19
1B15 434B80         4269                     orl             bufind+11,#80h
1B18 020000   F     4270                     jmp             onmem11
                    4271                                             
                    4272     
1B1B B61415         4273     tome14: cjne            @r0,#14h,tome15
1B1E D204           4274                     setb            bitizm
1B20 7881           4275                     mov             r0,#chavt
1B22 7600           4276                     mov             @r0,#0
1B24 08             4277                     inc             r0
1B25 7600           4278                     mov             @r0,#0
1B27 C211           4279     outmenu:        clr             bitmenu
1B29 020000   F     4280                     jmp             out7
                    4281     
1B2C 78B1           4282     goparom:        mov             r0,#vichR               ;режим меню 52
1B2E 7652           4283                     mov             @r0,#52h                        ;пароль уже ввели
1B30 020000   F     4284                     jmp             goparol
1B33 3090F6         4285     tome15: jnb             p1.0,goparom
1B36 753936         4286                     mov             nuerr,#36h
1B39 120000   F     4287                     call            error
1B3C 120000   F     4288                     call            ind
1B3F 120000   F     4289                     call            z_01s
1B42 80EF           4290                     jmp             tome15; onmem11
                    4291     
1B44 80E6           4292                     jmp             goparom;jb              bitpar,goparom  
1B46 7651           4293                     mov             @r0,#51h;ПАРОЛЬ 000
1B48 120000   F     4294                     call            lomenu
1B4B 78B2           4295                     mov             r0,#marker
1B4D 7607           4296                     mov             @r0,#7
1B4F 753B09         4297                     mov             movrig,#9
1B52 753A07         4298                     mov             movleft,#7
                    4299                     ;setb           bitizm
1B55 020000   F     4300                     jmp             onmem11
                    4301     
                    4302     
1B58 78B1           4303     me21_23:        mov             r0,#vichR               ;<-
1B5A 7423           4304                     mov             a,#23h
1B5C C3             4305                     clr             c
1B5D 96             4306                     subb            a,@r0
1B5E 403F           4307                     jc              labelS1
1B60 75B0FB         4308                     mov             p3,#0fbh
1B63 20B715         4309                     jb              p3.7,vv21_23
1B66 B6210B         4310                     cjne            @r0,#21h,me21_23dec;-<
1B69 7623           4311                     mov             @r0,#23h
1B6B 900000   F     4312                     mov             dptr,#teTE7
1B6E 120000   F     4313                     call            lotext
1B71 020000   F     4314                     jmp             onmem11
1B74 16             4315     me21_23dec:     dec             @r0
1B75 120000   F     4316                     call            lomenu
1B78 020000   F     4317                     jmp             onmem11
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    67

                    4318     ;onmem12:       jmp             viout;  outF    ;(ie7)
                    4319                                                     
1B7B 75B0F7         4320     vv21_23:        mov             p3,#0f7h                ;vvod
1B7E 20B719         4321                     jb              p3.7,onmem12
1B81 B6210C         4322                     cjne            @r0,#21h,test22
                    4323                     ;mov            dptr,#tabt11;заслать ус 11А
1B84 120000   F     4324     tests:  call            lotpus
1B87 D215           4325                     setb            biteizm;запомнить режим ТИ
1B89 D204           4326                     setb            bitizm
1B8B C211           4327                     clr             bitmenu;обнулить т к не будет индикации измерения       
1B8D 020000   F     4328                     jmp             goto7;onmem11
1B90 B62202         4329     test22: cjne            @r0,#22h,test23
                    4330                     ;       mov                     dptr,#tabt9;заслать ус 9А
1B93 80EF           4331                     jmp             tests   
1B95                4332     test23:
                    4333                     ;       mov                     dptr,#tabt7;заслать ус 7А
1B95 80ED           4334                     jmp             tests   
1B97 020000   F     4335     left_s: jmp             left_sk
                    4336     
1B9A                4337     onmem12:
1B9A 7FFF           4338                     mov             r7,#0ffh        ;?
1B9C 020000   F     4339                     jmp             viout           ;?
                    4340     
1B9F B6317C         4341     labelS1:        cjne            @r0,#31h,me_41
1BA2 75B0FB         4342                     mov                     p3,#0fbh                        ;<-
1BA5 30B7EF         4343                     jnb                     p3.7,left_s
1BA8 75B0F7         4344                     mov                     p3,#0f7h
1BAB 20B7EC         4345                     jb                      p3.7,onmem12
                    4346                     ;запомнить признак установленной скорости в рпзу
                    4347     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4348     ;и запись во внешнее озу(0000h)
1BAE 7900           4349                     mov             r1,#0                   ;
1BB0 7A50           4350                     mov             r2,#50h
1BB2 7B00           4351                     mov             r3,#00
1BB4 120499         4352                     call    copyPP
                    4353                     ;внести изменения во внешн озу
                    4354                     ;KD=00 01 86 A0 (KD=1)
                    4355                     ;кофф *100000 и переведенный в hex формат
                    4356                     ;согласно адресов диапазонов и адресов яч вн озу 
1BB7 792C           4357                     mov             r1,#2ch
1BB9 7400           4358                     mov             a,#0;57,6
1BBB 301302         4359                     jnb             bitv19,spwri
1BBE 7401           4360                     mov             a,#1;19.6
1BC0 F3             4361     spwri:  movx    @r1,a
                    4362     ;стереть страницу пап прогр 
1BC1 905000         4363                     mov             dptr,#5000h
1BC4 7FFF           4364                     mov             r7,#0ffh
1BC6 12043E         4365                     call    cle256
                    4366     ;и запись в ячейки кофф памяти прогр (3000h) 
1BC9 7FFF           4367                     mov             r7,#0ffh
1BCB 7900           4368                     mov             r1,#0                           ;external ram
1BCD 905000         4369                     mov             dptr,#5000h
1BD0 120480         4370                     call    wrpage
                    4371             
1BD3 75EF10         4372                     mov     RSTSRC,#10h             ;?reset
1BD6 C28E           4373                     clr     TR1                     ;?stop Timer1
1BD8 201305         4374                     jb      bitv19,outsko1  ;загр Т1 в соотв с установленной скоростью
1BDB 758DF4         4375                     mov     TH1,#244                ;57.6
1BDE 8005           4376                     jmp     outsko
1BE0 758DDC         4377     outsko1:        mov     TH1,#220                ;19.6
1BE3 D28E           4378                     setb    TR1     ;start Timer1
                    4379     
1BE5 C211           4380     outsko: clr     bitmenu
1BE7 D204           4381                     setb    bitizm
1BE9 020000   F     4382                     jmp     out7
                    4383     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    68

1BEC 020000   F     4384     rlabels4:       jmp             labels4
1BEF 020000   F     4385     rlabelS13:      jmp             labelS13
                    4386     
1BF2 B652F7         4387     me_52:  cjne            @r0,#52h,rlabels4
1BF5 75B0FB         4388                     mov                     p3,#0fbh;<-
1BF8 20B717         4389                     jb                      p3.7,vv_52v     ;ввод в калибровке
1BFB 78B2           4390                     mov             r0,#marker              ;сдвиг маркера влево при калибр
1BFD 7440           4391                     mov             a,#bufind
1BFF 26             4392                     add             a,@r0                   ;a=bufind+marker
1C00 F9             4393                     mov             r1,a
1C01 19             4394                     dec             r1;inc          r1
1C02 873C           4395                     mov             savba,@r1
                    4396                                                     
1C04 78B2           4397                     mov             r0,#marker
1C06 16             4398                     dec             @r0                             
1C07 C219           4399                     clr             bitmig
1C09 E53A           4400                     mov             a,movleft
1C0B B60001         4401                     cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр калибровки
1C0E 06             4402                     inc                     @r0
1C0F 020000   F     4403     me_52v: jmp                     goto7
                    4404             
1C12 75B0F7         4405     vv_52v: mov             p3,#0f7h
1C15 30B703         4406                     jnb             p3.7,rvvkali52
1C18 020000   F     4407                     jmp                     goto7
1C1B 020000   F     4408     rvvkali52:      jmp             vvkali52
                    4409     
                    4410     
1C1E B651D1         4411     me_41:  cjne            @r0,#51h,me_52;rlabels4
1C21 75B0FB         4412                     mov             p3,#0fbh;<-
1C24 30B7C8         4413                     jnb             p3.7,rlabelS13
1C27 75B0F7         4414                     mov             p3,#0f7h
1C2A 20B773         4415                     jb              p3.7,vvmenu
                    4416                     ;ввод пароля
                    4417                             
                    4418     ;       считать с индикатора 
1C2D 7F0E           4419                     mov             r7,#14
1C2F 784F           4420                     mov             r0,#abin
1C31 120000   F     4421                     call    clearN                  
                    4422                             
                    4423     ;чтение номера байта с индикатора(3байта)
                    4424     ;bufind+3..bufind+9
                    4425     ;-  - - -
                    4426     ;- - - - - - - - - -
                    4427     ;adec..adec+9
                    4428     ;ст            мл
1C34 7849           4429                     mov             r0,#bufind+9;
1C36 795C           4430                     mov             r1,#adec+9
1C38 7F03           4431                     mov             r7,#3;3bait
1C3A C3             4432     upav1:          clr             c
1C3B E6             4433                     mov             a,@r0
1C3C 9430           4434                     subb    a,#30h
1C3E F7             4435                     mov             @r1,a
1C3F 18             4436                     dec             r0
1C40 19             4437                     dec             r1
1C41 DFF7           4438                     djnz    r7,upav1;adec+7..adec+9
1C43 7A50           4439                     mov             r2,#50h                         ;parol 000x    (5028h )
1C45 7B28           4440                     mov             r3,#28h
1C47 120454         4441                     call            re4byte                 ;r8..r11(3 bait parol)
1C4A 800F           4442                     jmp                     goparol
                    4443     
1C4C E508           4444                     mov                     a,r8                    ;сравнить пароль с индикато
                             ром
1C4E B55A52         4445                     cjne            a,adec+7,parerr
1C51 E509           4446                     mov                     a,r9    
1C53 B55B4D         4447                     cjne            a,adec+8,parerr
1C56 E50A           4448                     mov                     a,r10
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    69

1C58 B55C48         4449                     cjne            a,adec+9,parerr
                    4450                                     ;равны
1C5B 78B1           4451     goparol:        mov             r0,#vichR               ;режим меню 52
1C5D 7652           4452                     mov             @r0,#52h                ;0000-n
1C5F 900000   F     4453                     mov             dptr,#teKD;00000-nA
1C62 120000   F     4454                     call            lotext
                    4455                     ;;;;;;;;;
                    4456                     ;n(hex)->abin
1C65 120000   F     4457                     call    findR                           ;a=2(10-2)...11(10-11)
1C68 2552           4458                     add             a,abin+3
1C6A F552           4459                     mov             abin+3,a
1C6C 7853           4460                     mov             r0,#adec
1C6E 7952           4461                     mov             r1,#abin+3      ;hex->10
1C70 120000   F     4462                     call    bindec
1C73 855C48         4463                     mov             bufind+8,adec+9
1C76 75472D         4464                     mov             bufind+7,#2dh
1C79 434A80         4465                     orl                     bufind+10,#80h;зажечь KMП
1C7C 434B10         4466                     orl                     bufind+11,#10h;точка после 1 знакоместа
1C7F 79AE           4467                     mov             r1,#diap
1C81 7848           4468                     mov             r0,#bufind+8
1C83 E7             4469                     mov             a,@r1
1C84 B40807         4470                     cjne    a,#8,nodi8k
1C87 7630           4471                     mov             @r0,#30h                 ;10-10
1C89 18             4472                     dec             r0
1C8A 7663           4473                     mov             @r0,#63h;31h
1C8C 8008           4474                     jmp             nodisk9
1C8E B40905         4475     nodi8k: cjne    a,#9,nodisk9
                    4476                                     
1C91 7631           4477                     mov             @r0,#31h           ;10-11
1C93 18             4478                     dec             r0
1C94 7663           4479                     mov             @r0,#63h;31h
                    4480                                     
                    4481     
1C96 78B2           4482     nodisk9:        mov             r0,#marker
1C98 7601           4483                     mov             @r0,#1
1C9A 753A01         4484                     mov             movleft,#1
1C9D 753B05         4485                     mov             movrig,#5
                    4486                                             
1CA0 020000   F     4487     vvmenu: jmp             goto7
                    4488     
1CA3 753932         4489     parerr: mov             nuerr,#32h
1CA6 120000   F     4490                     call            error
1CA9 120000   F     4491                     call            ind
1CAC 120000   F     4492                     call            z_1s
1CAF C211           4493                     clr             bitmenu
1CB1 D204           4494                     setb            bitizm
1CB3 78B2           4495                     mov             r0,#marker
1CB5 76FF           4496                     mov             @r0,#0ffh
1CB7 020000   F     4497                     jmp             goto7
                    4498     
1CBA 30130E         4499     left_sk:        jnb             bitv19,tosk19;<-
1CBD 900000   F     4500                     mov             dptr,#teS57_6;57,6
1CC0 120000   F     4501                     call            lotext
1CC3 434B80         4502                     orl             bufind+11,#80h
1CC6 C213           4503                     clr             bitv19
1CC8 020000   F     4504                     jmp             onmem11;goto7
1CCB 900000   F     4505     tosk19: mov             dptr,#teS19_2
1CCE 120000   F     4506                     call            lotext
1CD1 434B80         4507                     orl             bufind+11,#80h
1CD4 D213           4508                     setb            bitv19
1CD6 020000   F     4509                     jmp             onmem11;goto7
                    4510     
1CD9                4511     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4512             
                    4513     ;;;;;;;;;;;;;;;;;;
                    4514     ;необходимо не портить цифру в следуюем слева знакоместе
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    70

                    4515     ;т е сохранить ее в ячейке для мигания в противном случае
                    4516     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4517     ;       знакоместа
1CD9 78B2           4518                     mov             r0,#marker
1CDB 7440           4519                     mov             a,#bufind
1CDD 26             4520                     add             a,@r0                   ;a=bufind+marker
1CDE F9             4521                     mov             r1,a
1CDF 19             4522                     dec             r1;inc          r1
1CE0 873C           4523                     mov             savba,@r1
                    4524                                             
1CE2 78B2           4525                     mov             r0,#marker
1CE4 16             4526                     dec             @r0                             
1CE5 C219           4527                     clr             bitmig
1CE7 E53A           4528                     mov             a,movleft
1CE9 B60652         4529                     cjne            @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 000
1CEC 06             4530                     inc             @r0
1CED 020000   F     4531                     jmp             goto7
                    4532     ;;;;;;;
                    4533     
1CF0                4534     vvkali52:       ;введено значение для калибровки
                    4535                                             ;число на индикаторе ->Ak  (52h)
                    4536                                             ;       считать с индикатора 
1CF0 7F0E           4537                     mov             r7,#14
1CF2 784F           4538                     mov             r0,#abin
1CF4 120000   F     4539                     call    clearN                  
                    4540                                     
                    4541     ;чтение номера байта с индикатора(3байта)
                    4542     ;bufind+1..bufind+5
                    4543     ;-  - - -
                    4544     ;- - - - - - - - - -
                    4545     ;adec..adec+9
                    4546     ;ст            мл
1CF7 7845           4547                     mov             r0,#bufind+5;
1CF9 795C           4548                     mov             r1,#adec+9
1CFB 7F05           4549                     mov             r7,#5;5bait
1CFD C3             4550     upav2:  clr             c
1CFE E6             4551                     mov             a,@r0
1CFF 9430           4552                     subb    a,#30h
1D01 F7             4553                     mov             @r1,a
1D02 18             4554                     dec             r0
1D03 19             4555                     dec             r1
1D04 DFF7           4556                     djnz    r7,upav2;adec+7..adec+9
                    4557     
1D06 784F           4558                     mov             r0,#abin
1D08 7953           4559                     mov             r1,#adec                        ;мл         ст
1D0A 120000   F     4560                     call    decbin                  ;abin..abin+3 (hex)
1D0D 120000   F     4561                     call    loadr2                  ;r2..r5
1D10 120402         4562                     call    altof   ;r2..r5->float
1D13 900000   F     4563                     mov     dptr,#ch_10;10
1D16 120000   F     4564                     call    ldc_ltemp                       ;r8..r11=8
1D19 120203         4565                     call    flmul
1D1C 78A4           4566                     mov             r0,#rez_Ak
1D1E 120000   F     4567                     call    saver2
1D21 C211           4568                     clr                     bitmenu
1D23 D212           4569                     setb            bitklb
1D25 434A80         4570                     orl             bufind+10,#80h;зажечь KMП
1D28 D204           4571                     setb            bitizm;бит калибровки уже установлен
1D2A 78B2           4572                     mov             r0,#marker
1D2C 76FF           4573                     mov             @r0,#0ffh
1D2E 783D           4574                     mov             r0,#chkl
1D30 76FF           4575                     mov             @r0,#0ffh
1D32 08             4576                     inc             r0
1D33 76FF           4577                     mov             @r0,#0ffh;38h
1D35 120000   F     4578                     call            z_1s
1D38 020000   F     4579                     jmp             out7
                    4580     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    71

                    4581     
1D3B 020000   F     4582                     jmp             goto7
                    4583                                              
1D3E 020000   F     4584     onmem13:        jmp             goto7   ;(ie7)
                    4585     
1D41 B642AC         4586     labels4:        cjne            @r0,#42h,vvkali52
1D44 75B0FB         4587                     mov                     p3,#0fbh;<-
1D47 30B7F4         4588                     jnb             p3.7,onmem13
1D4A 75B0F7         4589                     mov             p3,#0f7h;vvod
1D4D 20B7EE         4590                     jb              p3.7,onmem13
1D50 020000   F     4591                     jmp             out7                                                    
                    4592     ;;;;;;;
1D53                4593     labelI:
1D53 75B0FE         4594                     mov             p3,#0feh
1D56 E5B0           4595                     mov             a,p3
1D58 20E703         4596                     jb              acc.7,nopoint
                    4597                     ;
1D5B 020000   F     4598                     jmp             goto7;out7
                    4599     
1D5E 75B0FB         4600     nopoint:        mov             p3,#0fbh
1D61 E5B0           4601                     mov             a,p3
1D63 20E72C         4602                     jb              acc.7,nopoin7
1D66 78B2           4603     labelS3:        mov             r0,#marker
1D68 E53A           4604                     mov             a,movleft
1D6A B40309         4605                     cjne            a,#3,poina1
1D6D B6030B         4606                     cjne            @r0,#3,nomarl;26
                    4607                     ;mov            @r0,#9
1D70 E53B           4608     poina2: mov             a,movrig                ;кн <- B=+00000
1D72 F6             4609                     mov             @r0,a
1D73 020000   F     4610                     jmp             goto7;  out7
                    4611     
1D76 B60402         4612     poina1: cjne            @r0,#4,nomarl;кн <- A= 0000
1D79 80F5           4613                     jmp             poina2
                    4614     
                    4615     
1D7B                4616     nomarl:                 ;                               29.12.06
                    4617     ;;;;;;;;;;;;;;;;;;
                    4618     ;необходимо не портить цифру в следуюем справа знакоместе
                    4619     ;т е сохранить ее в ячейке для мигания в противном случае
                    4620     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4621     ;       знакоместа
1D7B 78B2           4622                     mov             r0,#marker
1D7D 7440           4623                     mov             a,#bufind
1D7F 26             4624                     add             a,@r0                   ;a=bufind+marker
1D80 F9             4625                     mov             r1,a
1D81 09             4626                     inc             r1
1D82 873C           4627                     mov             savba,@r1
                    4628                                                     
1D84 78B2           4629                     mov             r0,#marker
1D86 16             4630                     dec             @r0                             
1D87 C219           4631                     clr             bitmig
1D89 E53A           4632                     mov                     a,movleft
1D8B B4036B         4633                     cjne            a,#3,poinA
1D8E B60266         4634                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+00000
1D91 06             4635     poin3:  inc             @r0
                    4636     ;нажат ввод А =000000 запомнить константу А
1D92 75B0F7         4637     nopoin7:        mov             p3,#0f7h
1D95 E5B0           4638                     mov             a,p3
1D97 20E75D         4639                     jb              acc.7,gogo7;out7
1D9A 78B1           4640                     mov             r0,#vichR
1D9C E6             4641                     mov             a,@r0
1D9D B6215E         4642                     cjne    @r0,#21h,no21p7
1DA0 7611           4643                     mov             @r0,#11h
                    4644                             ;       считать с индикатора  упаковать в плавающий формат
                    4645                             ;   сохранить
1DA2 7F0E           4646                     mov             r7,#14
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    72

1DA4 784F           4647                     mov             r0,#abin
1DA6 120000   F     4648                     call    clearN                  
1DA9 120000   F     4649                     call    upakA
                    4650                                     
1DAC 784F           4651                     mov             r0,#abin
1DAE 7953           4652                     mov             r1,#adec                        ;мл         ст
1DB0 120000   F     4653                     call    decbin                  ;abin..abin+3 (hex)
1DB3 120000   F     4654                     call    loadr2                  ;r2..r5
1DB6 120402         4655                     call    altof                   ;r2..r5->float
1DB9 78BC           4656                     mov     r0,#konstA
1DBB 120000   F     4657                     call    saver2
1DBE 900000   F     4658                     mov     dptr,#ch0
1DC1 120000   F     4659                     call    ldc_ltemp
1DC4 1201D6         4660                     call            flcmp
1DC7 6010           4661                     jz              erra0
                    4662     ;26
1DC9 78B2           4663                     mov             r0,#marker
1DCB 76FF           4664                     mov             @r0,#0ffh
                    4665                                     
1DCD 900000   F     4666                     mov             dptr,#teVICH;teBequ0
1DD0 120000   F     4667                     call    lotext
                    4668                     ;       call            outB
1DD3 534BBF         4669                     anl             bufind+11,#0bfh         ;гашение точки bufind+7
                    4670                     ;       orl             bufind+11,#80h
1DD6 020000   F     4671                     jmp             goto7
                    4672     
1DD9 78B2           4673     erra0:  mov             r0,#marker
1DDB 76FF           4674                     mov             @r0,#0ffh
1DDD 753934         4675                     mov                     nuerr,#34h;константа не должна быть равна0
1DE0 120000   F     4676                     call            error
1DE3 120000   F     4677                     call            ind
1DE6 120000   F     4678                     call            z_1s
1DE9 78B1           4679                     mov                     r0,#vichR
1DEB 7600           4680                     mov                     @r0,#0
1DED C214           4681                     clr                     bitvich
1DEF C206           4682                     clr                     bitvi11
1DF1 D204           4683                     setb            bitizm
1DF3 78B2           4684                     mov                     r0,#marker
1DF5 76FF           4685                     mov                     @r0,#0ffh
1DF7 802E           4686     gogo7:  jmp                     out7;goto7
                    4687     
1DF9 B6032B         4688     poinA:  cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1DFC 8093           4689                     jmp             poin3
                    4690     
1DFE                4691     no21p7:         ;считать с индикатора  упаковать в плавающий формат
                    4692                             ;сохранить
1DFE 7F0E           4693                     mov             r7,#14
1E00 784F           4694                     mov             r0,#abin
1E02 120000   F     4695                     call    clearN                  
1E05 120000   F     4696                     call    upakB                   
1E08 784F           4697                     mov             r0,#abin
1E0A 7953           4698                     mov             r1,#adec                        ;мл         ст
1E0C 120000   F     4699                     call    decbin                  ;abin..abin+3 (hex)
1E0F 120000   F     4700                     call    loadr2                  ;r2..r5
1E12 120402         4701                     call    altof                   ;r2..r5->int
1E15 301B04         4702                     jnb             bitznB,pozB
1E18 EA             4703                     mov             a,r2
1E19 4480           4704                     orl             a,#80h
1E1B FA             4705                     mov             r2,a                    ;знак-
1E1C                4706     pozB:           ;mov            r0,#konstB
                    4707                     ;call   saver2
                    4708     
1E1C 79B2           4709                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1E1E 77FF           4710                     mov             @r1,#0ffh
1E20 78B1           4711                     mov             r0,#vichR
1E22 7611           4712                     mov             @r0,#11h
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    73

1E24 020000   F     4713                     jmp             lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4714                                     
                    4715     
1E27                4716     out7:            ;mov           IE,#80h
1E27 D083           4717                     pop             dph
1E29 D082           4718                     pop             dpl
1E2B D007           4719                     pop             rr7     
1E2D D006           4720                     pop             rr6
1E2F D005           4721                     pop             rr5
1E31 D004           4722                     pop             rr4
1E33 D003           4723                     pop             rr3
1E35 D002           4724                     pop             rr2
1E37 D001           4725                     pop             rr1                             
1E39 D000           4726                     pop             rr0
1E3B D0D0           4727                     pop             psw
1E3D D0E0           4728                     pop             acc
1E3F 75AD00         4729                     mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
1E42 75B0C0         4730                     mov             P3,#0c0h
                    4731                     ;       mov             EIE2,#30H
1E45 C219           4732                     clr             bitmig
1E47 E586           4733                     mov             a,P6            ;p6.4=0
1E49 54EF           4734                     anl             a,#0efh
1E4B F586           4735                     mov             P6,a
1E4D 00             4736                     nop
1E4E 00             4737                     nop
1E4F E586           4738                     mov             a,P6                    ;p6.4=1 
1E51 4410           4739                     orl             a,#10h
1E53 F586           4740                     mov             P6,a
                    4741                     ;;;;;;;;;
1E55 E5DA           4742                     mov             a,PCA0CPM0;             TOG0
1E57 4446           4743                     orl             a,#46h  ;anl            a,#0fbh
1E59 F5DA           4744                     mov             PCA0CPM0,a
1E5B 75CDD0         4745                     mov             TH2,#0d0h
1E5E 75CC00         4746                     mov             TL2,#00
1E61 D2CA           4747                     setb            T2CON.2
1E63 D2AD           4748                     setb            ET2     ;IE.5
                    4749                                                 
1E65 32             4750                     reti
                    4751     
                    4752             ;;;;
1E66 78B1           4753     lomenu: mov             r0,#vichR
1E68 B61107         4754                     cjne    @r0,#11h,menu12
1E6B 900000   F     4755                     mov             dptr,#teTESI
1E6E 120000   F     4756     lome1:  call    lotexT
1E71 22             4757                     ret
1E72 B61205         4758     menu12: cjne    @r0,#12h,menu13
1E75 900000   F     4759                     mov             dptr,#teTESR
1E78 80F4           4760                     jmp             lome1
1E7A B61305         4761     menu13: cjne    @r0,#13h,menu14
1E7D 900000   F     4762                     mov             dptr,#teSKOR
1E80 80EC           4763                     jmp             lome1
1E82 B61405         4764     menu14: cjne    @r0,#14h,menu15
1E85 900000   F     4765                     mov             dptr,#teAVK
1E88 80E4           4766                     jmp             lome1
1E8A B61505         4767     menu15: cjne    @r0,#15h,menu21
1E8D 900000   F     4768                     mov             dptr,#teKALIB
1E90 80DC           4769                     jmp             lome1
                    4770     
1E92 B62105         4771     menu21: cjne    @r0,#21h,menu22
1E95 900000   F     4772                     mov             dptr,#teTE11
1E98 80D4           4773                     jmp             lome1
1E9A B62205         4774     menu22: cjne    @r0,#22h,menu23
1E9D 900000   F     4775                     mov             dptr,#teTE9
1EA0 80CC           4776                     jmp             lome1
1EA2 B62305         4777     menu23: cjne    @r0,#23h,menu31
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    74

1EA5 900000   F     4778                     mov             dptr,#teTE7
1EA8 80C4           4779                     jmp             lome1
1EAA B63105         4780     menu31: cjne    @r0,#31h,menu41
1EAD 900000   F     4781                     mov             dptr,#teS57_6
1EB0 80BC           4782                     jmp             lome1
                    4783     
1EB2                4784     menu41:         
1EB2 900000   F     4785                     mov             dptr,#tePAR
1EB5 80B7           4786                     jmp             lome1
1EB7 020000   F     4787     yesvi_kr:       jmp             yesvi_km
1EBA                4788     endkalib:;KD=Ak/A3
1EBA 200DFA         4789                     jb              bifl_kt,yesvi_kr;выч кофф Км
1EBD 789C           4790                     mov             r0,#rez_A3
1EBF 120000   F     4791                     call            resar2
                    4792                                     
1EC2 120402         4793                     call            altof                   ;->float
1EC5 EA             4794                     mov             a,r2
1EC6 547F           4795                     anl             a,#7fh
1EC8 FA             4796                     mov             r2,a
1EC9 120000   F     4797                     call            move28
1ECC 78A4           4798                     mov             r0,#rez_Ak
1ECE 120000   F     4799                     call            resar2
1ED1 1202B7         4800                     call            fldiv
                    4801                                                     
1ED4 900000   F     4802                     mov             dptr,#CHtho;100000
1ED7 120000   F     4803                     call            ldc_ltemp                       ;r8..r11=8
1EDA 120203         4804                     call            flmul
1EDD 120343         4805                     call            ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО 6разряд
                             ное)
                    4806     
1EE0 78A0           4807                     mov             r0,#koefKD
1EE2 120000   F     4808                     call            saver2
                    4809                     ;запись в рпзу в соотв ячейку
                    4810                             
1EE5 7900           4811                     mov             r1,#0                   ;счит рпзу во внешн озу
1EE7 7A50           4812                     mov             r2,#50h
1EE9 7B00           4813                     mov             r3,#00
1EEB 120499         4814                     call            copyPP
                    4815                     ;внести изменения во внешн озу
1EEE 120000   F     4816                     call            findext                 ;r1-внешн озу
1EF1 78A0           4817                     mov             r0,#koefKD
1EF3 120000   F     4818                     call            resar2
1EF6 EA             4819                     mov             a,r2
1EF7 F3             4820                     movx            @r1,a
1EF8 09             4821                     inc             r1
1EF9 EB             4822                     mov             a,r3
1EFA F3             4823                     movx            @r1,a
1EFB 09             4824                     inc             r1
1EFC EC             4825                     mov             a,r4
1EFD F3             4826                     movx            @r1,a
1EFE 09             4827                     inc             r1
1EFF ED             4828                     mov             a,r5
1F00 F3             4829                     movx            @r1,a
                    4830                     ;кофф *100000 и переведенный в hex формат
                    4831                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4832                     ;стереть страницу пап прогр 
1F01 905000         4833                     mov             dptr,#5000h
1F04 7FFF           4834                     mov             r7,#0ffh
1F06 12043E         4835                     call            cle256
                    4836     ;и запись в ячейки кофф памяти прогр (3000h) 
1F09 7FFF           4837                     mov             r7,#0ffh
1F0B 7900           4838                     mov             r1,#0                           ;external ram
1F0D 905000         4839                     mov             dptr,#5000h
1F10 120480         4840                     call            wrpage
                    4841     ;2.2.07
1F13 79AE           4842                     mov             r1,#diap
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    75

1F15 B70511         4843                     cjne            @r1,#5,fulkalib
                    4844                     ;jb             bifl_kt,yesvi_km;выч кофф Км
1F18 D20D           4845                     setb            bifl_kt
                    4846                     ;call           loadus
1F1A 900000   F     4847                     mov             dptr,#tabt7;заслать ус 7А       
1F1D E4             4848                     clr             a
1F1E 93             4849                     movc            a,@a+dptr                               ;high byte
1F1F F584           4850                     mov             p4,a
1F21 A3             4851                     inc             dptr
1F22 E4             4852                     clr             a
1F23 93             4853                     movc            a,@a+dptr                               ;low byte
1F24 F585           4854                     mov             p5,a
1F26 020000   F     4855                     jmp             goto7;  out_kali
                    4856     
                    4857     ;;;
1F29                4858     fulkalib:
1F29 C212           4859                     clr             bitklb
1F2B D216           4860                     setb            bitpar                  ;пароль провели 1 раз успешно
1F2D 900000   F     4861                     mov             dptr,#teEND
1F30 120000   F     4862                     call            lotext
1F33 120000   F     4863                     call            ind
1F36 120000   F     4864     out_kali:       call            z_1s
1F39 120000   F     4865                     call            z_1s
1F3C 020000   F     4866                     jmp             goto7
1F3F                4867     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1F3F 7A50           4868                     mov             r2,#50h                 ;-11a
1F41 7B14           4869                     mov             r3,#14h                 ;k7
1F43 12046C         4870                     call            rebyte2                         ;r2..r5- hex
1F46 120402         4871                     call            altof                   ;r2..r5->float
1F49 C002           4872                     push            rr2
1F4B C003           4873                     push            rr3
1F4D C004           4874                     push            rr4
1F4F C005           4875                     push            rr5
1F51 7A50           4876                     mov             r2,#50h                 ;k5
1F53 7B0C           4877                     mov             r3,#0ch
1F55 12046C         4878                     call            rebyte2                 ;r2..r5
1F58 120402         4879                     call            altof                   ;r2..r5->float
1F5B 120000   F     4880                     call            move28
1F5E D005           4881                     pop             rr5
1F60 D004           4882                     pop             rr4
1F62 D003           4883                     pop             rr3
1F64 D002           4884                     pop             rr2
1F66 1202B7         4885                     call            fldiv                   ;K7/K5
                    4886     
1F69 900000   F     4887                     mov     dptr,#CHtho;100000
1F6C 120000   F     4888                     call    ldc_ltemp                       ;r8..r11=8
1F6F 120203         4889                     call    flmul                           ;r2..r5 ;K7/K5*10**5
1F72 C002           4890                     push            rr2
1F74 C003           4891                     push            rr3
1F76 C004           4892                     push            rr4
1F78 C005           4893                     push            rr5
                    4894                                     
1F7A 789C           4895                     mov                     r0,#rez_A3
1F7C 120000   F     4896                     call            resar2
1F7F 120402         4897                     call            altof                           ;r2..r5->float
1F82 120000   F     4898                     call            move28
1F85 D005           4899                     pop                     rr5
1F87 D004           4900                     pop                     rr4
1F89 D003           4901                     pop                     rr3
1F8B D002           4902                     pop                     rr2
1F8D 1202B7         4903                     call            fldiv           ;Km     
                    4904     
1F90 900000   F     4905                     mov     dptr,#CHtho;100000
1F93 120000   F     4906                     call    ldc_ltemp                       ;r8..r11=8
1F96 120203         4907                     call    flmul                           ;r2..r5
1F99 120343         4908                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗМ ЧИСЛО 6разрядн
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    76

                             ое)
1F9C 78A0           4909                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1F9E 120000   F     4910                     call            saver2
                    4911                     ;запись в рпзу в соотв ячейку
1FA1 7900           4912                     mov             r1,#0                   ;счит рпзу во внешн озу
1FA3 7A50           4913                     mov             r2,#50h
1FA5 7B00           4914                     mov             r3,#00
1FA7 120499         4915                     call    copyPP
                    4916                     ;внести изменения во внешн озу
1FAA 78A0           4917                     mov                     r0,#koefKD
1FAC 120000   F     4918                     call            resar2
1FAF 792C           4919                     mov                     r1,#2ch                 ;r1-внешн озу кофф Km
                    4920                             
1FB1 EA             4921                     mov                     a,r2
1FB2 F3             4922                     movx            @r1,a
1FB3 09             4923                     inc                     r1
1FB4 EB             4924                     mov                     a,r3
1FB5 F3             4925                     movx            @r1,a
1FB6 09             4926                     inc                     r1
1FB7 EC             4927                     mov                     a,r4
1FB8 F3             4928                     movx            @r1,a
1FB9 09             4929                     inc                     r1
1FBA ED             4930                     mov                     a,r5
1FBB F3             4931                     movx            @r1,a
                    4932                     ;кофф *100000 и переведенный в hex формат
                    4933                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4934     ;стереть страницу пап прогр 
1FBC 905000         4935                     mov             dptr,#5000h
1FBF 7FFF           4936                     mov             r7,#0ffh
1FC1 12043E         4937                     call    cle256
                    4938     ;и запись в ячейки кофф памяти прогр (3000h) 
1FC4 7FFF           4939                     mov             r7,#0ffh
1FC6 7900           4940                     mov             r1,#0                           ;external ram
1FC8 905000         4941                     mov             dptr,#5000h
1FCB 120480         4942                     call    wrpage
                    4943     
1FCE C20D           4944                     clr             bifl_kt
1FD0 120000   F     4945                     call    loadus
1FD3 020000   F     4946                     jmp             fulkalib
                    4947     
                    4948     ;выч среднего по блоку
                    4949     ;вых r2..r5
1FD6                4950     vichmean:       
                    4951                                             ;;;;;;;;;;
1FD6 120000   F     4952                     call            adrblok;dptr-адр ячейки 1й соотв блока 
1FD9 E582           4953                     mov                     a,dpl
1FDB FF             4954                     mov                     r7,a
1FDC E583           4955                     mov                     a,dph
1FDE FE             4956                     mov                     r6,a
1FDF 120000   F     4957                     call            resa_hl;save_bl->dptr
                    4958     
1FE2 C3             4959                     clr             c; в начало блока?
1FE3 E582           4960                     mov                     a,dpl
1FE5 9F             4961                     subb            a,r7
1FE6 FF             4962                     mov                     r7,a
1FE7 7006           4963                     jnz                     oldmean
1FE9 E583           4964                     mov                     a,dph
1FEB 9E             4965                     subb            a,r6
1FEC FE             4966                     mov                     r6,a
1FED 6065           4967                     jz                      outmea;
                    4968     ;;;;;;;;;;
1FEF                4969     oldmean:
1FEF 120000   F     4970                     call            resa_hl;save_bl->dptr
1FF2 78D7           4971                     mov                     r0,#copy_hl
1FF4 E583           4972                     mov                     a,dph
1FF6 F6             4973                     mov                     @r0,a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    77

1FF7 08             4974                     inc                     r0
1FF8 E582           4975                     mov                     a,dpl
1FFA F6             4976                     mov                     @r0,a
1FFB 78B8           4977                     mov                     r0,#work
1FFD 120000   F     4978                     call            clear4
2000 78D6           4979                     mov                     r0,#chblok;volume
2002 7600           4980                     mov                     @r0,#0
2004 120000   F     4981     meng:           call            adrblok;dptr-адр ячейки 1й соотв блока 
2007 E582           4982                     mov                     a,dpl
2009 FF             4983                     mov                     r7,a
200A E583           4984                     mov                     a,dph
200C FE             4985                     mov                     r6,a
200D 78D7           4986                     mov                     r0,#copy_hl;call                resa_hl;save_bl->dp
                             tr
200F E6             4987                     mov                     a,@r0
2010 F583           4988                     mov                     dph,a
2012 08             4989                     inc                     r0
2013 E6             4990                     mov                     a,@r0
2014 F582           4991                     mov                     dpl,a
2016 C3             4992                     clr                     c;-4
2017 E582           4993                     mov                     a,dpl
2019 9404           4994                     subb            a,#4
201B F582           4995                     mov                     dpl,a
201D E583           4996                     mov                     a,dph
201F 9400           4997                     subb            a,#0
2021 F583           4998                     mov                     dph,a;dptr-4
                    4999                     ;;;;;;;;
2023 79D7           5000                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
2025 E583           5001                     mov             a,dph
2027 F7             5002                     mov             @r1,a
2028 09             5003                     inc             r1
2029 E582           5004                     mov             a,dpl
202B F7             5005                     mov             @r1,a
                    5006                     ;;;;;;;;;
202C C3             5007                     clr             c;пришли в начало блока?
202D E582           5008                     mov                     a,dpl
202F 9F             5009                     subb            a,r7
2030 FF             5010                     mov                     r7,a
2031 7006           5011                     jnz                     nextmea
2033 E583           5012                     mov                     a,dph
2035 9E             5013                     subb            a,r6
2036 FE             5014                     mov                     r6,a
2037 601B           5015                     jz                      outmea;
                    5016                                             
                    5017                     ;продолжаем сравнение
                    5018                     ;;;;;;;;;;;             
2039 120000   F     5019     nextmea:        call            loahl_r2        ;из яч внешн озу ->r2..r5
203C 120402         5020                     call            altof;->float
203F 120000   F     5021                     call            move28                  ;r8..r11
2042 78B8           5022                     mov                     r0,#work
2044 120000   F     5023                     call            resar2
2047 120166         5024                     call            fladd
204A 78B8           5025                     mov                     r0,#work
204C 120000   F     5026                     call            saver2
204F 78D6           5027                     mov                     r0,#chblok;volume;кол измерений блока
2051 06             5028                     inc                     @r0
2052 80B0           5029                     jmp                     meng
2054                5030     outmea:         
2054 120000   F     5031                     call            loahl_r2        ;из яч внешн озу ->r2..r5
2057 120402         5032                     call            altof;->float
205A 120000   F     5033                     call            move28                  ;r8..r11
205D 78B8           5034                     mov                     r0,#work
205F 120000   F     5035                     call            resar2
2062 120166         5036                     call            fladd
2065 78B8           5037                     mov                     r0,#work
2067 120000   F     5038                     call            saver2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    78

206A E4             5039                     clr                     a
206B FA             5040                     mov                     r2,a
206C FB             5041                     mov                     r3,a
206D FC             5042                     mov                     r4,a
206E 78D6           5043                     mov                     r0,#chblok;volume;кол измерений блока...200d
2070 E6             5044                     mov                     a,@r0
2071 2401           5045                     add                     a,#1
2073 FD             5046                     mov                     r5,a
2074 120402         5047                     call            altof;r2..r5 float
2077 120000   F     5048                     call            move28
207A 78B8           5049                     mov                     r0,#work
207C 120000   F     5050                     call            resar2
207F 1202B7         5051                     call            fldiv
2082 900000   F     5052                     mov                     dptr,#ch_10      
2085 120000   F     5053                     call            ldc_ltemp
2088 1202B7         5054                     call            fldiv
208B 120343         5055                     call            ftol                            ;->hex
208E 120000   F     5056                     call    maform
2091 784F           5057                     mov             r0,#abin
2093 120000   F     5058                     call    saver2
                    5059     ;;;;;;;;
                    5060                                             
2096 7853           5061                     mov             r0,#adec
2098 7952           5062                     mov             r1,#abin+3      ;hex->10
209A 120000   F     5063                     call    bindec
                    5064                                     
209D 785C           5065                     mov             r0,#adec+9;разместить в буфер индикации
209F 7949           5066                     mov             r1,#bufind+9
20A1 7F05           5067                     mov             r7,#5
20A3 E6             5068     bufmea: mov             a,@r0
20A4 2430           5069                     add             a,#30h
20A6 F7             5070                     mov             @r1,a
20A7 19             5071                     dec             r1
20A8 18             5072                     dec             r0
20A9 DFF8           5073                     djnz    r7,bufmea
20AB 7844           5074                     mov             r0,#bufind+4
20AD 762B           5075                     mov             @r0,#2bh          
20AF 300202         5076                     jnb             znmat,nozmea
20B2 762D           5077                     mov             @r0,#2dh
20B4 434B05         5078     nozmea: orl             bufind+11,#05h
20B7 22             5079                     ret
                    5080     
                    5081     
20B8 E0             5082     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
20B9 FA             5083                     mov                     r2,a
20BA A3             5084                     inc                     dptr
20BB E0             5085                     movx            a,@dptr
20BC FB             5086                     mov                     r3,a
20BD A3             5087                     inc                     dptr
20BE E0             5088                     movx            a,@dptr
20BF FC             5089                     mov                     r4,a
20C0 A3             5090                     inc                     dptr
20C1 E0             5091                     movx            a,@dptr
20C2 FD             5092                     mov                     r5,a    
20C3 22             5093                     ret
                    5094     
20C4 C3             5095     min4_hl:        clr                     c;-4
20C5 E582           5096                     mov                     a,dpl
20C7 9404           5097                     subb            a,#4
20C9 F582           5098                     mov                     dpl,a
20CB E583           5099                     mov                     a,dph
20CD 9400           5100                     subb            a,#0
20CF F583           5101                     mov                     dph,a;dptr-4
20D1 22             5102                     ret
                    5103     
20D2 020000   F     5104     routmin:        jmp             outmin
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    79

                    5105     ;мин значение по по блоку
20D5                5106     vichmin:        ;;;;;;;;;;
20D5 120000   F     5107                     call            adrblok;dptr-адр ячейки 1й соотв блока 
20D8 E582           5108                     mov                     a,dpl
20DA FF             5109                     mov                     r7,a
20DB E583           5110                     mov                     a,dph
20DD FE             5111                     mov                     r6,a
20DE 120000   F     5112                     call            resa_hl;save_bl->dptr
                    5113     
20E1 C3             5114                     clr             c; в начало блока?
20E2 E582           5115                     mov                     a,dpl
20E4 9F             5116                     subb            a,r7
20E5 FF             5117                     mov                     r7,a
20E6 7006           5118                     jnz                     oldmin
20E8 E583           5119                     mov                     a,dph
20EA 9E             5120                     subb            a,r6
20EB FE             5121                     mov                     r6,a
20EC 60E4           5122                     jz                      routmin;
                    5123     ;;;;;;;;;;
20EE                5124     oldmin:
20EE 120000   F     5125                     call            resa_hl;save_bl->dptr
                    5126                                                                                     
                    5127     ;с конца блока адрес 2го измерение
20F1 120000   F     5128                     call            min4_hl
                    5129                                             
20F4 78B8           5130                     mov             r0,#work        ;блок анализируется с конца 1я измерение за
                             гружается в work
                    5131                                             
20F6 E0             5132                     movx            a,@dptr
20F7 F6             5133                     mov             @r0,a
20F8 08             5134                     inc             r0
20F9 A3             5135                     inc             dptr
20FA E0             5136                     movx            a,@dptr
20FB F6             5137                     mov             @r0,a
20FC 08             5138                     inc             r0
20FD A3             5139                     inc             dptr
20FE E0             5140                     movx            a,@dptr
20FF F6             5141                     mov             @r0,a
2100 08             5142                     inc             r0
2101 A3             5143                     inc             dptr
2102 E0             5144                     movx            a,@dptr
2103 F6             5145                     mov             @r0,a
2104 A3             5146                     inc             dptr
                    5147                                             
2105 78B8           5148                     mov             r0,#work
2107 120000   F     5149                     call            resar2
210A 120402         5150                     call            altof;->float;r2..r5
210D 78B8           5151                     mov             r0,#work
210F 120000   F     5152                     call            saver2
                    5153     
2112 120000   F     5154                     call            min4_hl
                    5155                     ;call           min4_hl
2115 78D7           5156                     mov             r0,#copy_hl
2117 E583           5157                     mov             a,dph
2119 F6             5158                     mov             @r0,a
211A 08             5159                     inc             r0
211B E582           5160                     mov             a,dpl
211D F6             5161                     mov             @r0,a
                    5162                             
211E 78D6           5163                     mov             r0,#chblok;volume
2120 7600           5164                     mov             @r0,#0
2122 120000   F     5165     ming:           call            adrblok;dptr-адр ячейки 1й соотв блока 
2125 E582           5166                     mov             a,dpl
2127 FF             5167                     mov             r7,a
2128 E583           5168                     mov             a,dph
212A FE             5169                     mov             r6,a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    80

                    5170     
212B 78D7           5171                     mov             r0,#copy_hl;call                resa_hl;save_bl->dptr
212D E6             5172                     mov             a,@r0
212E F583           5173                     mov             dph,a
2130 08             5174                     inc             r0
2131 E6             5175                     mov             a,@r0
2132 F582           5176                     mov             dpl,a
                    5177                                     
2134 C3             5178                     clr             c;-4
2135 E582           5179                     mov             a,dpl
2137 9404           5180                     subb            a,#4
2139 F582           5181                     mov             dpl,a
213B E583           5182                     mov             a,dph
213D 9400           5183                     subb            a,#0
213F F583           5184                     mov             dph,a;dptr-4
                    5185                     ;;;;;;;;
2141 79D7           5186                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
2143 E583           5187                     mov             a,dph
2145 F7             5188                     mov             @r1,a
2146 09             5189                     inc             r1
2147 E582           5190                     mov             a,dpl
2149 F7             5191                     mov             @r1,a
                    5192                                                     ;;;;;;;;;
214A C3             5193                     clr             c;пришли в начало блока?
214B E582           5194                     mov                     a,dpl
214D 9F             5195                     subb            a,r7
214E FF             5196                     mov                     r7,a
214F 7006           5197                     jnz                     nextmin
2151 E583           5198                     mov                     a,dph
2153 9E             5199                     subb            a,r6
2154 FE             5200                     mov                     r6,a
2155 601D           5201                     jz                      outmin;
                    5202                                                     
                    5203                     ;продолжаем сравнение
                    5204                                                     ;;;;;;;;;;;             
2157 78B8           5205     nextmin:        mov                     r0,#work
2159 120000   F     5206                     call            resar2
                    5207                     ;call           altof;->float;r2..r5
215C 120000   F     5208                     call            move28;->r8..r11
215F 120000   F     5209                     call            loahl_r2                ;из яч внешн озу ->r2..r5
                    5210     
2162 120402         5211                     call            altof;->float;r2..r5
                    5212                                             
2165 1201D6         5213                     call            flcmp
2168 5005           5214                     jnc                     nomini
216A 78B8           5215                     mov                     r0,#work;<
216C 120000   F     5216                     call            saver2;r2..r5
216F 78D6           5217     nomini: mov                     r0,#chblok;volume;кол измерений блока
2171 06             5218                     inc                     @r0
2172 80AE           5219                     jmp                     ming
                    5220     
2174 78B8           5221     outmin: mov                     r0,#work;1ое измерение блока
2176 120000   F     5222                     call            resar2
                    5223                     ;call           altof;->float;r2..r5
2179 120000   F     5224                     call            move28;->r8..r11
217C 120000   F     5225                     call            loahl_r2                ;из яч внешн озу ->r2..r5
                    5226     
217F 120402         5227                     call            altof;->float;r2..r5
                    5228                                             
2182 1201D6         5229                     call            flcmp
2185 5005           5230                     jnc                     minivix
2187 78B8           5231                     mov                     r0,#work;<
2189 120000   F     5232                     call            saver2;r2..r5
                    5233                                             ;;;;;;;;;
                    5234     
218C 78B8           5235     minivix:        mov             r0,#work
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    81

218E 120000   F     5236                     call            resar2
                    5237                     ;call           altof;->float
2191 900000   F     5238                     mov             dptr,#ch_10      
2194 120000   F     5239                     call            ldc_ltemp
2197 1202B7         5240                     call            fldiv
219A 120343         5241                     call            ftol                            ;->hex
                    5242                     ;;;
219D 120000   F     5243                     call            maform
21A0 784F           5244                     mov             r0,#abin
21A2 120000   F     5245                     call            saver2
                    5246     ;;;;;;;;
21A5 7853           5247                     mov             r0,#adec
21A7 7952           5248                     mov             r1,#abin+3      ;hex->10
21A9 120000   F     5249                     call            bindec
21AC 785C           5250                     mov             r0,#adec+9;разместить в буфер индикации
21AE 7949           5251                     mov             r1,#bufind+9
21B0 7F05           5252                     mov             r7,#5
21B2 E6             5253     bufmin: mov             a,@r0
21B3 2430           5254                     add             a,#30h
21B5 F7             5255                     mov             @r1,a
21B6 19             5256                     dec             r1
21B7 18             5257                     dec             r0
21B8 DFF8           5258                     djnz            r7,bufmin
21BA 7844           5259                     mov             r0,#bufind+4
21BC 762B           5260                     mov             @r0,#2bh          
21BE 300202         5261                     jnb             znmat,nozmin
21C1 762D           5262                     mov             @r0,#2dh
21C3 434B05         5263     nozmin: orl             bufind+11,#05h
21C6 22             5264                     ret
                    5265     
                    5266     
21C7 020000   F     5267     routmax:        jmp             outmax
                    5268     ;мин значение по по блоку
21CA                5269     vichmax:        ;;;;;;;;;;
21CA 120000   F     5270                     call            adrblok;dptr-адр ячейки 1й соотв блока 
21CD E582           5271                     mov             a,dpl
21CF FF             5272                     mov             r7,a
21D0 E583           5273                     mov             a,dph
21D2 FE             5274                     mov             r6,a
21D3 120000   F     5275                     call            resa_hl;save_bl->dptr
21D6 C3             5276                     clr             c; в начало блока?
21D7 E582           5277                     mov             a,dpl
21D9 9F             5278                     subb            a,r7
21DA FF             5279                     mov             r7,a
21DB 7006           5280                     jnz             oldmax
21DD E583           5281                     mov             a,dph
21DF 9E             5282                     subb            a,r6
21E0 FE             5283                     mov             r6,a
21E1 60E4           5284                     jz              routmax;
                    5285     ;;;;;;;;;;
21E3                5286     oldmax:
21E3 120000   F     5287                     call            resa_hl;save_bl->dptr
                    5288     ;с конца блока адрес 2го измерение
21E6 120000   F     5289                     call            min4_hl
21E9 78B8           5290                     mov             r0,#work        ;блок анализируется с конца 1я измерение за
                             гружается в work
21EB E0             5291                     movx            a,@dptr
21EC F6             5292                     mov             @r0,a
21ED 08             5293                     inc             r0
21EE A3             5294                     inc             dptr
21EF E0             5295                     movx            a,@dptr
21F0 F6             5296                     mov             @r0,a
21F1 08             5297                     inc             r0
21F2 A3             5298                     inc             dptr
21F3 E0             5299                     movx            a,@dptr
21F4 F6             5300                     mov             @r0,a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    82

21F5 08             5301                     inc             r0
21F6 A3             5302                     inc             dptr
21F7 E0             5303                     movx            a,@dptr
21F8 F6             5304                     mov             @r0,a
21F9 A3             5305                     inc             dptr
                    5306                                             
21FA 78B8           5307                     mov             r0,#work
21FC 120000   F     5308                     call            resar2
21FF 120402         5309                     call            altof;->float;r2..r5
2202 78B8           5310                     mov             r0,#work
2204 120000   F     5311                     call            saver2
2207 120000   F     5312                     call            min4_hl
                    5313                     ;       call            min4_hl
220A 78D7           5314                     mov             r0,#copy_hl
220C E583           5315                     mov             a,dph
220E F6             5316                     mov             @r0,a
220F 08             5317                     inc             r0
2210 E582           5318                     mov             a,dpl
2212 F6             5319                     mov             @r0,a
2213 78D6           5320                     mov             r0,#chblok;volume
2215 7600           5321                     mov             @r0,#0
2217 120000   F     5322     maxg:           call            adrblok;dptr-адр ячейки 1й соотв блока 
221A E582           5323                     mov             a,dpl
221C FF             5324                     mov             r7,a
221D E583           5325                     mov             a,dph
221F FE             5326                     mov             r6,a
2220 78D7           5327                     mov             r0,#copy_hl;call                resa_hl;save_bl->dptr
2222 E6             5328                     mov             a,@r0
2223 F583           5329                     mov             dph,a
2225 08             5330                     inc             r0
2226 E6             5331                     mov             a,@r0
2227 F582           5332                     mov             dpl,a
2229 C3             5333                     clr             c;-4
222A E582           5334                     mov             a,dpl
222C 9404           5335                     subb            a,#4
222E F582           5336                     mov             dpl,a
2230 E583           5337                     mov             a,dph
2232 9400           5338                     subb            a,#0
2234 F583           5339                     mov             dph,a;dptr-4
                    5340                             ;;;;;;;;
2236 79D7           5341                     mov             r1,#copy_hl;saven_bl    ;сохранить dptr 
2238 E583           5342                     mov             a,dph
223A F7             5343                     mov             @r1,a
223B 09             5344                     inc             r1
223C E582           5345                     mov             a,dpl
223E F7             5346                     mov             @r1,a
                    5347             ;;;;;;;;;
223F C3             5348                     clr             c;пришли в начало блока?
2240 E582           5349                     mov             a,dpl
2242 9F             5350                     subb            a,r7
2243 FF             5351                     mov             r7,a
2244 7006           5352                     jnz             nextmax
2246 E583           5353                     mov             a,dph
2248 9E             5354                     subb            a,r6
2249 FE             5355                     mov             r6,a
224A 601D           5356                     jz              outmax;
                    5357                     ;продолжаем сравнение
                    5358                     ;;;;;;;;;;;             
224C 78B8           5359     nextmax:        mov             r0,#work
224E 120000   F     5360                     call            resar2
                    5361                     ;call           altof;->float;r2..r5
2251 120000   F     5362                     call            move28;->r8..r11
2254 120000   F     5363                     call            loahl_r2                ;из яч внешн озу ->r2..r5
2257 120402         5364                     call            altof;->float;r2..r5
225A 1201D6         5365                     call            flcmp
225D 4005           5366                     jc              nomaxi
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    83

225F 78B8           5367                     mov             r0,#work;>
2261 120000   F     5368                     call            saver2;r2..r5
2264 78D6           5369     nomaxi: mov             r0,#chblok;volume;кол измерений блока
2266 06             5370                     inc             @r0
2267 80AE           5371                     jmp             maxg
2269 78B8           5372     outmax: mov             r0,#work;1ое измерение блока
226B 120000   F     5373                     call            resar2
                    5374                     ;call           altof;->float;r2..r5
226E 120000   F     5375                     call            move28;->r8..r11
2271 120000   F     5376                     call            loahl_r2                ;из яч внешн озу ->r2..r5
2274 120402         5377                     call            altof;->float;r2..r5
2277 1201D6         5378                     call            flcmp
227A 4005           5379                     jc              maxvix
227C 78B8           5380                     mov             r0,#work;>
227E 120000   F     5381                     call            saver2;r2..r5
2281 020000   F     5382     maxvix: jmp             minivix
                    5383     
                    5384     
2284 78CF           5385     bufl_dec:       mov             r0,#chbuf       
2286 120000   F     5386                     call            resar2  
2289 900000   F     5387                     mov             dptr,#ch_1       
228C 120000   F     5388                     call            ldc_ltemp
228F 1201D1         5389                     call            flsub
2292 78CF           5390                     mov             r0,#chbuf       
2294 120000   F     5391                     call            saver2  
2297 22             5392                     ret
                    5393     
                    5394     ;прерывание таймера Т2
2298                5395     inter2:         
2298 E5DA           5396                     mov             a,PCA0CPM0
229A 54BF           5397                     anl             a,#0bfh                         
229C F5DA           5398                     mov             PCA0CPM0,a
                    5399                     ;mov            a,T2CON         ;T2CON.2=0
                    5400                     ;anl            a,#0fbh
229E 75C800         5401                     mov             T2CON,#00;a
22A1 C2AD           5402                     clr             IE.5
22A3 32             5403                     reti
                    5404     
                    5405     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
22A4                5406      ind:   ;;;
22A4 E5E7           5407                     mov             a,EIE2
22A6 FA             5408                     mov             r2,a;save
22A7 75E700         5409                     mov             EIE2,#00H
22AA 120000   F     5410                     call            mign
22AD 7840           5411                     mov             r0,#bufind;+11
22AF 7F0C           5412                     mov             r7,#12
22B1 C287           5413      nexin: clr             p0.7;6
22B3 E6             5414                     mov             a,@r0
22B4 F59B           5415                     mov             SPI0DAT,a
22B6 20FBFD         5416                     jb              TXBSY,$
22B9 D287           5417                     setb            p0.7;6
22BB 120000   F     5418                     call            z_9             ;25mks
22BE 08             5419                     inc             r0;dec          r0
22BF DFF0           5420                     djnz            r7,nexin
22C1 EA             5421                     mov             a,r2
22C2 F5E7           5422                     mov             EIE2,a;#30H
22C4 22             5423                     ret
                    5424     
22C5                5425     rs_byte:
                    5426     ;               jnb     RI,S_R2
                    5427     ;               clr     RI
                    5428     ;               clr     C
                    5429     ;               mov     A,SBUF
                    5430     
                    5431     ;S_R2:          ;transfer
                    5432     ;               jnb   TI,$
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    84

                    5433     ;               clr   TI
                    5434             ;       mov   SBUF0,r2
                    5435             ;       reti
                    5436     ;!!! real interrupt filling
                    5437                     ;jnb    is_2,S_R2       ;256 samples -> clr
                    5438                     ;reti   ;there direct out
22C5                5439     S_R2:
22C5 C0D0           5440                     push    PSW     ;?
22C7 C0E0           5441                     push    ACC     ;?
                    5442     
22C9 E524           5443                     mov     A,cnt_out
22CB 6017           5444                     jz      S_R4    ;after last
22CD C3             5445                     clr     C
22CE 9401           5446                     subb    A,#1
22D0 4014           5447                     jc      S_R5            ;empty buf
22D2 30990E         5448                     jnb   TI,S_R3
22D5 C299           5449                     clr   TI
22D7 F524           5450                     mov     cnt_out,A
                    5451     ;??             push    1
22D9 852601         5452                     mov     1,p_out
22DC E7             5453                     mov     A,@R1
                    5454     ;               pop     1
22DD 0526           5455                     inc     p_out
                    5456     ;S_R_:
                    5457     ;               jnb   TI,S_R_
                    5458     ;               clr   TI
22DF F599           5459                     mov   SBUF0,A
22E1 8003           5460                     jmp     S_R5
22E3                5461     S_R3:
22E3 00             5462                     nop
                    5463             
22E4                5464     S_R4:
22E4 C299           5465                     clr     TI
                    5466                     
22E6                5467     S_R5:
                    5468     ;?              jb      is_cmd,S_R9             deadloop RS?
22E6 E525           5469                     mov     A,cnt_in
22E8 C3             5470                     clr     C
22E9 9403           5471                     subb    A,#3
22EB 400A           5472                     jc      S_R7    ;cmd isn't received
22ED 752500         5473     S_R6:           mov     cnt_in,#0
22F0 7527DB         5474                     mov     p_in,#buf_in    ; for new
22F3 D21D           5475                     setb    is_cmd
22F5 8015           5476                     jmp     S_R9;?reti
                    5477     
22F7                5478     S_R7:
22F7 309812         5479                     jnb     RI,S_R9
22FA C298           5480                     clr     RI
22FC E599           5481                     mov     A,SBUF0
                    5482     ;??             push    1
22FE A927           5483                     mov     R1,p_in
2300 F7             5484                     mov     @R1,A
2301 0527           5485                     inc     p_in
2303 0525           5486                     inc     cnt_in
2305 E525           5487                     mov     A,cnt_in
2307 B40302         5488                     cjne    A,#3,S_R9
                    5489     ;??             pop     1
230A 80E1           5490                     jmp     S_R6
                    5491     
230C                5492     S_R9:
230C D0E0           5493                     pop     ACC     ;?
230E D0D0           5494                     pop     PSW     ;?
                    5495     
2310 32             5496                     reti
2311                5497     cmd_tree:                                       ;??
2311 754E7F         5498                     mov     cmd_rez,#7Fh
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    85

2314 78DB           5499                     mov     r0,#buf_in
                    5500     ;               mov     A,#'B'
                    5501     ;               subb    A,@R0
                    5502     ;               jz      ta0
2316 B64202         5503                     cjne    @R0,#'B',tb_0
2319 8003           5504                     jmp             ta0
231B                5505     tb_0:
231B 020000   F     5506                             jmp             tb
231E                5507     ta0:
231E 08             5508                     inc     r0
231F B60005         5509                     cjne    @R0,#0,ta1
2322 C21E           5510                     clr     is_rs           ;B0
2324 020000   F     5511                     jmp     tr9
2327                5512     ta1:
2327 B60125         5513                     cjne    @R0,#1,ta2
232A D21E           5514                     setb    is_rs   ;?
232C 789A           5515                     mov             R0,#parT
232E E6             5516                     mov             A,@R0
232F B4060D         5517                     cjne    A,#6,ta2_
2332 D20C           5518                     setb    is_2
2334 75A880         5519             mov     IE,#80h ;Снятие enable RS
2337 7524C8         5520                     mov     cnt_out,#200    ;??0
233A C21E           5521                     clr             is_rs
233C 020000   F     5522                     jmp     tr9
233F                5523     ta2_:
233F B4050A         5524                     cjne    A,#5,ta3_
2342 D20C           5525                     setb    is_2
2344 75A880         5526                     mov     IE,#80h
2347 7524C8         5527                     mov     cnt_out,#200    ;??0
234A C21E           5528                     clr             is_rs
234C                5529     ta3_:
234C 020000   F     5530                     jmp     tr9
234F                5531     ta2:    ;?#2 real need
234F 78F4           5532                     mov     R0,#0F4h        ;?F8h   ;abin
2351 C2AF           5533                     clr     EA
2353 79AE           5534                     mov     R1,#diap
2355 E7             5535                     mov     A,@R1
2356 F6             5536                     mov     @R0,A
2357 08             5537                     inc     R0
2358 799A           5538                     mov     R1,#parT
235A E7             5539                     mov     A,@R1
235B F6             5540                     mov     @R0,A
235C 08             5541                     inc     R0
235D 7938           5542                     mov     R1,#nblok
235F E7             5543                     mov     A,@R1
2360 F6             5544                     mov     @R0,A
2361 08             5545                     inc     R0
2362 79AF           5546                     mov     R1,#parN
2364 E7             5547                     mov     A,@R1
2365 F6             5548                     mov     @R0,A
2366 08             5549                     inc     R0
2367 E520           5550                     mov     A,20h   ;bitizm,AVP,bitvi11 usefool
2369 300F04         5551             jnb             bitnul,ta3
236C 4480           5552                     orl     A,#80h
236E 8002           5553                     jmp     ta4
2370                5554     ta3:
2370 547F           5555                     anl     A,#7Fh
2372                5556     ta4:
2372 301804         5557             jnb             knizm,ta5
2375 4401           5558                     orl     A,#1h
2377 8002           5559                     jmp     ta6
2379                5560     ta5:
2379 54FE           5561                     anl     A,#0FEh
237B                5562     ta6:
237B F6             5563                     mov     @R0,A
237C 08             5564                     inc     R0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    86

                    5565     
237D 79CD           5566                     mov     R1,#interva
237F E7             5567                     mov     A,@R1
2380 F6             5568                     mov     @R0,A
2381 08             5569                     inc     r0
2382 09             5570                     inc     r1
2383 E7             5571                     mov     A,@R1
2384 F6             5572                     mov     @R0,A           ;interva+1
2385 08             5573                     inc     r0
                    5574     
2386 79BC           5575                     mov     R1,#konstA      ;?B3 to make
2388 E7             5576                     mov     A,@R1
                    5577     ;               mov     @R0,A
                    5578     ;               inc     r0
                    5579     ;               inc     r1
                    5580     ;               mov     A,@R1
                    5581     ;               mov     @R0,A
                    5582     ;               inc     r0
                    5583     ;               inc     r1
                    5584     ;               mov     A,@R1
                    5585     ;               mov     @R0,A
                    5586     ;               inc     r0
                    5587     ;               inc     r1
                    5588     ;               mov     A,@R1
                    5589     ;               mov     @R0,A
                    5590     ;               mov     p_out,#00F4h    ;abin
                    5591     ;               mov     cnt_out,#11
                    5592     ;               mov     cmd_rez,#7Ah    ;B2 sign
2389 FA             5593                     mov     R2,A            ;?fragment
238A 09             5594                     inc     r1
238B E7             5595                     mov     A,@R1
238C FB             5596                     mov     R3,A
238D 09             5597                     inc     r1
238E E7             5598                     mov     A,@R1
238F FC             5599                     mov     R4,A
2390 09             5600                     inc     r1
2391 E7             5601                     mov     A,@R1
2392 FD             5602                     mov     R5,A
2393 120343         5603                     call    ftol
2396 EC             5604                     mov     A,R4
2397 F6             5605                     mov     @R0,A
2398 08             5606                     inc     r0
2399 ED             5607                     mov     A,R5
239A F6             5608                     mov     @R0,A
239B 7526F4         5609                     mov     p_out,#00F4h    ;abin
239E 752409         5610                     mov     cnt_out,#9              ;?was 11
                    5611     
23A1 020000   F     5612                     jmp     tr9
                    5613                     
23A4                5614     tb:
23A4 B64C17         5615                     cjne    @R0,#'L',tc
23A7 08             5616                     inc     r0
23A8 E6             5617                     mov     A,@R0
23A9 C3             5618                     clr     C
23AA 940A           5619                     subb    A,#10
23AC 500A           5620                     jnc     mtb2    ;
23AE E6             5621                     mov     A,@R0
23AF 78AE           5622                     mov     R0,#diap
23B1 F6             5623                     mov     @R0,A
23B2 120000   F     5624             call    loadUS
23B5 020000   F     5625                     jmp     tr9
                    5626     
23B8 754E7D         5627     mtb2:           mov     cmd_rez,#7Dh    ;Err par
23BB 020000   F     5628                     jmp     tr9
                    5629     
                    5630     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    87

23BE                5631     tc:
23BE B65432         5632                     cjne    @R0,#'T',td
23C1 08             5633                     inc     r0
23C2 E6             5634                     mov     A,@R0
23C3 C3             5635                     clr     C
23C4 9407           5636                     subb    A,#7
23C6 4002           5637                     jc              tc1
23C8 8049           5638                     jmp             mtf2    ;
23CA                5639     tc1:
23CA E6             5640                     mov             A,@R0
23CB 789A           5641                     mov             R0,#parT
23CD F6             5642                     mov             @R0,A
23CE B4060D         5643                     cjne    A,#6,tc2
                    5644     ;               jnb             is_rs,tc2               yet=0
23D1 D20C           5645                     setb    is_2
23D3 75A880         5646                             mov     IE,#80h
23D6 7524C8         5647                     mov             cnt_out,#200    ;??0
23D9 C21E           5648                     clr             is_rs
23DB 020000   F     5649                     jmp             tr9
23DE B4050D         5650     tc2:            cjne    A,#5,tc3
                    5651     ;               jnb             is_rs,tc3
23E1 D20C           5652                     setb    is_2
23E3 75A880         5653             mov     IE,#80h
23E6 7524C8         5654                     mov             cnt_out,#200    ;??0
23E9 C21E           5655                     clr             is_rs
23EB 020000   F     5656                     jmp             tr9
23EE C20C           5657     tc3: clr        is_2
23F0 020000   F     5658                     jmp             tr9
                    5659     
23F3                5660     td:
23F3 B65245         5661                     cjne    @R0,#'R',te
23F6 08             5662                     inc     r0
23F7 E6             5663                     mov     A,@R0                   ;AAAAAAnn, nn=cmd
23F8 5403           5664                     anl     A,#3
23FA B40005         5665                     cjne    A,#0,te1
23FD C206           5666                     clr     bitvi11
23FF 020000   F     5667                     jmp     tr9
2402                5668     te1:
2402 B40105         5669                     cjne    A,#1,te2
2405 D206           5670                     setb    bitvi11
2407 020000   F     5671                     jmp     tr9
240A                5672     te2:
240A B40306         5673                     cjne    A,#03h,mtf2
240D 754E7D         5674                     mov     cmd_rez,#7Dh    ;Err par
2410 020000   F     5675                     jmp     tr9
2413                5676     mtf2:           ;=2
2413 E6             5677             mov     A,@R0
2414 C3             5678                     clr     C
2415 13             5679                     rrc     A
2416 C3             5680                     clr     C
2417 13             5681                     rrc     A
2418 C002           5682             push    2               ;?
241A C003           5683             push    3               ;?
241C C004           5684             push    4               ;?
241E C005           5685             push    5               ;?
2420 FC             5686                     mov     r4,A
2421 08             5687                     inc     r0
2422 E6             5688                     mov     A,@R0
2423 FD             5689                     mov     r5,A
2424 7B00           5690                     mov     r3,#0
2426 7A00           5691                     mov     r2,#0
2428 120402         5692                     call    altof                   ;r2..r5->float
242B 78BC           5693                     mov     r0,#konstA
242D 120000   F     5694                     call    saver2
2430 D005           5695             pop     5
2432 D004           5696             pop     4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    88

2434 D003           5697             pop     3
2436 D002           5698             pop     2
2438 020000   F     5699                     jmp     tr9
                    5700     
243B                5701     te:
243B B6480E         5702                     cjne    @R0,#'H',mtf
243E 08             5703                     inc     r0
243F E6             5704                     mov     A,@R0
2440 C3             5705                     clr     C
2441 9404           5706                     subb    A,#4
2443 50CE           5707                     jnc     mtf2    ;
2445 E6             5708                     mov     A,@R0
2446 78AF           5709                     mov     R0,#parN
                    5710     ;       inc     A
2448 F6             5711                     mov     @R0,A
                    5712     ;               inc     parN
2449 020000   F     5713                     jmp     tr9
                    5714     
                    5715     
244C B6410E         5716     mtf:            cjne    @R0,#'A',mtg
244F 08             5717                     inc     r0
2450 B60005         5718                     cjne    @R0,#0,mtf1
2453 C205           5719                     clr     bitavp
2455 020000   F     5720                     jmp     tr9
2458 D205           5721     mtf1:           setb    bitavp
245A 020000   F     5722                     jmp     tr9
                    5723     
245D B6512D         5724     mtg:            cjne    @R0,#'Q',mth
2460 08             5725                     inc     r0
2461 B60112         5726                     cjne    @R0,#1,mtf3
2464 D20F           5727                     setb    bitnul  ;?clr, as Izm?
2466 789C           5728                     mov             r0,#rez_A3      ;A3
2468 120000   F     5729                     call            resar2
246B 786A           5730                     mov             r0,#rez_A0      
246D 120000   F     5731                     call            saver2;A0<-A3
2470 120000   F     5732                     call            loadUS
2473 020000   F     5733                     jmp     tr9
2476 B6029A         5734     mtf3:           cjne    @R0,#02,mtf2
                    5735     ;               clr     bitnul  ;?clr, as Izm?
                    5736     ;               mov     r0,#rez_A0
                    5737     ;               call    clear4
                    5738     ;               call    loadUS
                    5739     ;               jmp     tr9
2479 D2AF           5740                     setb    EA
247B C21D           5741                     clr     is_cmd
                    5742     ;               pop     1
                    5743     ;               jmp     ybnul
247D C20F           5744                     clr     bitnul  ;?
247F 900000   F     5745                     mov     DPTR,#ch0 
2482 120000   F     5746                     CALL    ldc_long        ;?r2..r5 <-- 0
2485 786A           5747                     mov     r0,#rez_A0      ;?A0=0
2487 120000   F     5748                     call    saver2
248A 020000   F     5749                     jmp     tr9             ;?
                    5750     
                    5751     
248D B64911         5752     mth:            cjne    @R0,#'I',mti0
2490 08             5753                     inc     r0
2491 B6000F         5754                     cjne    @R0,#0,mth1
2494 D218           5755                     setb    knizm   ;?bitizm
2496 E54E           5756                     mov     A,cmd_rez
2498 F599           5757                     mov     SBUF0,A
249A C21D           5758                     clr     is_cmd
249C D21F           5759             setb    is_izm
249E 020000   F     5760             jmp     keyb1           ;--
                    5761     
24A1 8013           5762     mti0:   jmp     mti
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    89

                    5763     
24A3                5764     mth1:
24A3 B6010D         5765                     cjne    @R0,#1,mth2
                    5766     ;               clr     bitizm                  ;begin reset
24A6 C218           5767                     clr     knizm   ;?bitizm
24A8 E54E           5768                     mov     A,cmd_rez
24AA F599           5769                     mov     SBUF0,A
24AC C21D           5770                     clr     is_cmd
24AE D21F           5771             setb    is_izm
24B0 020000   F     5772             jmp     keyb1           ;--
                    5773     
24B3                5774     mth2:   ;I2
                    5775     ;               clr     is_2    ;end 10&2 ms
                    5776     ;               clr     is_rs   ;end 10&2 ms
24B3 020000   F     5777                     jmp     tr9
                    5778     
24B6 B65300         5779     mti:            cjne    @R0,#'S',mtx            ;RS speed
                    5780     ;               inc     r0
                    5781     ;       clr     EA
                    5782     ;               cjne    @R0,#0,mti1
                    5783     ;               mov     TH1,#220        ;19600
                    5784     ;               setb    EA
                    5785     ;               jmp     tr9
24B9                5786     mti1:
                    5787     ;               mov     TH1,#244
                    5788     ;               setb    EA
                    5789     ;               jmp     tr9
                    5790     
24B9                5791     mtx:
24B9 B64D1A         5792                     cjne    @R0,#'M',mty
24BC 08             5793                     inc     r0
24BD E6             5794                     mov     A,@R0                   ;AAAAAnnn, nnn=cmd
24BE 5407           5795                     anl     A,#7
24C0 B40516         5796                     cjne    A,#5,mtx5
24C3 E6             5797                     mov     A,@R0
24C4 C3             5798                     clr     C
24C5 13             5799                     rrc     A
24C6 C3             5800                     clr     C
24C7 13             5801                     rrc     A
24C8 C3             5802                     clr     C
24C9 13             5803                     rrc     A
24CA 7938           5804                     mov     R1,#nblok
24CC F7             5805                     mov     @R1,A
                    5806     
24CD 120000   F     5807             call    adrblok ;?
24D0 120000   F     5808             call    save_hl ;?
                    5809     
24D3 020000   F     5810                     jmp     tr9
                    5811     
24D6 020000   F     5812     mty: jmp        mty2
                    5813     
24D9 C3             5814     mtx5:           clr     C
24DA 9406           5815                     subb    A,#6
24DC 5007           5816                     jnc     mtf4
24DE E6             5817                     mov     A,@R0
24DF B60009         5818                     cjne    @R0,#0,mtx0
24E2 020000   F     5819                     jmp     chaibl9         ;clear??SP
24E5 754E7D         5820     mtf4:           mov     cmd_rez,#7Dh    ;Err par
24E8 020000   F     5821                     jmp     tr9
                    5822     
24EB                5823     mtx0:
24EB B6030B         5824                     cjne    @R0,#3,mtx1     
24EE C20A           5825                     clr             bitbon
24F0 534BFD         5826                     anl     bufind+11,#0fdh;??jmp bufon
24F3 120000   F     5827                     call    ind
24F6 020000   F     5828                     jmp     tr9
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    90

                    5829     ;mtx0_:
                    5830     ;               mov     A,cmd_rez
                    5831     ;               mov     SBUF0,A
                    5832     ;               clr     is_cmd
                    5833     ;       setb    is_mem  ;?
                    5834     ;               pop     0               ;?
                    5835     ;       jmp     labelB;keyb1    ;---
                    5836     
24F9                5837     mtx1:
24F9 B60211         5838                     cjne    @R0,#2,mtx2             ;start
24FC D20A           5839                     setb    bitbon  ;bitmem
24FE 79D5           5840                     mov     r1,#volume      ;work   обьем блока
2500 7700           5841                     mov     @r1,#00
2502 09             5842                     inc     r1
2503 77C7           5843                     mov     @r1,#0c7h               ;320h/4
2505 434B02         5844                     orl     bufind+11,#02h  ; on pysk
2508 120000   F     5845                     call    ind
250B 8077           5846                     jmp             tr9
                    5847     
250D                5848     mtx2:
250D B60457         5849                     cjne    @R0,#4,mtx3             ;to PC
2510 120000   F     5850                     call    adrblok         ;dptr-
                    5851     
2513 120000   F     5852             call    save_hl ;?
                    5853     
                    5854     ;               setb    is_mem
                    5855     ;-              setb    bitbon  ;?Mem will to fill?
                    5856     
2516 C2AF           5857                     clr     EA
2518 7524C8         5858                     mov     cnt_out,#200
251B 75997F         5859                     mov     SBUF0,#7Fh
251E                5860     mtxa:
251E 120000   F     5861             call    reA3_X          ;over r2..r5<-внешн пам
2521 79D8           5862             mov                     r1,#copy_hl+1;next?
2523 E582           5863             mov                     a,dpl
2525 F7             5864             mov                     @r1,a           ;low
2526 E583           5865             mov                     a,dph
2528 19             5866             dec                     r1
2529 F7             5867             mov                     @r1,a                   ;high
252A 900000   F     5868             mov             dptr,#ch10
252D 120000   F     5869                     call    ldc_ltemp
2530 120000   F     5870                     call    zdiv                    ;form4=invertif <0; divide
2533 120000   F     5871                     call    maform          ;setb/clr       znmat
2536 789C           5872                     mov             r0,#rez_A3      ;?
2538                5873     mtxb:
2538 3099FD         5874                     jnb   TI,mtxb
253B C299           5875                     clr   TI
253D 8699           5876                     mov     SBUF0,@r0
253F 08             5877                     inc     r0
2540                5878     mtxc:
2540 3099FD         5879                     jnb   TI,mtxc
2543 C299           5880                     clr   TI
2545 8699           5881                     mov     SBUF0,@r0
2547 08             5882                     inc     r0
2548                5883     mtxd:
2548 3099FD         5884                     jnb   TI,mtxd
254B C299           5885                     clr   TI
254D 8699           5886                     mov     SBUF0,@r0
254F 08             5887                     inc     r0
2550                5888     mtxe:
2550 3099FD         5889                     jnb   TI,mtxe
2553 C299           5890                     clr   TI
2555 8699           5891                     mov             SBUF0,@r0
                    5892     
2557 79D8           5893                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес внешн озу введе
                             нного лемента
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    91

2559 E7             5894                     mov                     A,@r1           ;low
255A F582           5895                     mov                     dpl,A
255C 19             5896                     dec                     r1
255D E7             5897                     mov                     A,@r1                   ;high
255E F583           5898                     mov                     dph,A
2560 D524BB         5899                     djnz    cnt_out,mtxa
                    5900     
2563 D2AF           5901                     setb    EA
2565 801D           5902                     jmp     tr9
                    5903     
2567                5904     mtx3:           ;M1 only
2567 C2AF           5905                     clr     EA
2569 E6             5906                     mov     A,@R0
256A C3             5907                     clr     C
256B 13             5908                     rrc     A
256C C3             5909                     clr     C
256D 13             5910                     rrc     A
256E C3             5911                     clr     C
256F 13             5912                     rrc     A
2570 79CD           5913                     mov     R1,#interva
2572 F7             5914                     mov     @R1,A
2573 08             5915                     inc     r0
2574 09             5916                     inc     r1
2575 E6             5917                     mov     A,@R0
2576 F7             5918                     mov     @R1,A           ;interva+1
2577 800B           5919                     jmp     tr9
                    5920     
                    5921     
2579                5922     mty2:
2579 B67F05         5923                     cjne    @R0,#7Fh,tz
257C 75997F         5924                     mov     SBUF0,#7Fh
257F 8003           5925                     jmp     tr9
                    5926     
2581                5927     tz:
2581 754E7E         5928                     mov     cmd_rez,#7Eh    ;Err cmd
                    5929     
2584 E54E           5930     tr9:            mov     A,cmd_rez
2586 F599           5931                     mov     SBUF0,A
2588 D2AF           5932                     setb    EA
258A C21D           5933                     clr     is_cmd
258C 22             5934                     ret
                    5935     
258D                5936     chaibl9:        ;M0-Mem clear
258D C2AF           5937                     clr             EA
258F 120000   F     5938                     call    adrblok
2592 79B8           5939                     mov             r1,#work
2594 7703           5940                     mov             @r1,#03
2596 09             5941                     inc             r1
2597 7720           5942                     mov             @r1,#20h                        ;320h
2599                5943     goonof9:
2599 E4             5944                     clr             a
259A F0             5945                     movx    @dptr,a
259B A3             5946                     inc             dptr
259C 79B9           5947                     mov             r1,#work+1
259E 120000   F     5948                     call    chminus
25A1 78B8           5949                     mov             r0,#work
25A3 E6             5950                     mov             a,@r0
25A4 30E7F2         5951                     jnb             acc.7,goonof9
25A7 120000   F     5952             call    adrblok
25AA 120000   F     5953             call    save_hl
25AD 80D5           5954                     jmp     tr9
                    5955     
25AF C2AF           5956     reA3_m: clr     EA              ;Mem to PC
                    5957     ;               mov             r0,#0F9h
                    5958     ;               movx    a,@dptr
                    5959     ;               mov             @r0,a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    92

                    5960     ;               inc             r0
                    5961     ;               inc             dptr
                    5962     ;               movx    a,@dptr
                    5963     ;               mov             @r0,a
                    5964     ;               inc             r0
                    5965     ;               inc             dptr
                    5966     ;               movx    a,@dptr
                    5967     ;               mov             @r0,a
                    5968     ;               inc             r0
                    5969     ;               inc             dptr
                    5970     ;               movx    a,@dptr
                    5971     ;               mov             @r0,a
                    5972     ;               inc             dptr
                    5973     ;               mov             p_out,#0F9h
                    5974     ;               mov             cnt_out,#4
                    5975     ;               mov     SBUF0,#7Fh      ;was cmd_rez
                    5976     ;               ret
                    5977     
25B1 E538           5978     save_hlm:       mov             a,nblok
25B3 B40117         5979                     cjne    a,#1,sm_hl1
25B6 79D3           5980                     mov             r1,#saven_bl
25B8 E583           5981     sm_hl:  mov             a,dph
25BA F7             5982                     mov             @r1,a
25BB 09             5983                     inc             r1
25BC E582           5984                     mov             a,dpl
25BE F7             5985                     mov             @r1,a
                    5986                     ;не конец ли блока
25BF 79D6           5987                     mov                     r1,#volume+1;work+1
25C1 120000   F     5988                     call            chminus
25C4 78D5           5989                     mov             r0,#volume
25C6 E6             5990                     mov             a,@r0
25C7 30E702         5991                     jnb             acc.7,noend_m
25CA C20E           5992                     clr             is_mem                  ;?breakpoint
                    5993     ;               anl                     bufind+11,#0fdh ;?
                    5994     ;               call            ind                                                     ;?
25CC 22             5995     noend_m: ret
25CD B40204         5996     sm_hl1: cjne    a,#2,sm_hl2
25D0 79C0           5997                                     mov             r1,#saven_bl2
25D2 80E4           5998                                     jmp             sm_hl
25D4 B40304         5999     sm_hl2: cjne    a,#3,sm_hl3
25D7 79C2           6000                                     mov             r1,#saven_bl3
25D9 80DD           6001                                     jmp             sm_hl
25DB 79D9           6002     sm_hl3: mov             r1,#saven_bl4
25DD 80D9           6003                                     jmp             sm_hl
                    6004     
                    6005     
                    6006     ;$include (subr7.asm) 
                +1  6007     ;тест интерфейса
25DF            +1  6008     testrs: ;jb     p0.3,goprogr
25DF C2AC       +1  6009                     clr     IE.4
25E1 759955     +1  6010     test1:  mov     SBUF0,#55h
25E4 3099FD     +1  6011                     jnb     SCON0.1,$
25E7 78B8       +1  6012                     mov     r0,#work;chtest
25E9 76BE       +1  6013                     mov     @r0,#190d;60
                +1  6014     
25EB 309825     +1  6015     test01: jnb     SCON0.0,test2
25EE E599       +1  6016                     mov     a,SBUF0
25F0 B45512     +1  6017                     cjne    a,#55h,test3
25F3 C299       +1  6018     test4:  clr     SCON0.1
25F5 C298       +1  6019                     clr     SCON0.0
25F7 7D0A       +1  6020                     mov     r5,#10
25F9 7840       +1  6021                     mov     r0,#bufind              ;- - - -
25FB 762D       +1  6022     test04: mov     @r0,#2dh
25FD 08         +1  6023                     inc     r0
25FE DDFB       +1  6024                     djnz    r5,test04
2600 120000   F +1  6025                     call    ind
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    93

2603 80DC       +1  6026                     jmp     test1
2605            +1  6027     test3:  
2605 753933     +1  6028                     mov     nuerr,#33h
2608 120000   F +1  6029                     call    error           ;на кран прибора ERR 3
260B 120000   F +1  6030                     call    ind;
260E 120000   F +1  6031                     call    z_01s           ;100ms
2611 80E0       +1  6032                     jmp     test4
2613 78B8       +1  6033     test2:  mov     r0,#work;chtest
2615 B60002     +1  6034                     cjne    @r0,#0,test02
2618 8003       +1  6035                     jmp     test5
261A 16         +1  6036     test02: dec     @r0
261B 80CE       +1  6037                     jmp     test01
261D 120000   F +1  6038     test5:  call    z_1ms           ;1ms
2620 C299       +1  6039                     clr     SCON0.1
2622 753933     +1  6040                     mov     nuerr,#33h
2625 120000   F +1  6041                     call    error           ;на кран прибора ERR 3
2628 120000   F +1  6042                     call    ind
262B 120000   F +1  6043                     call    z_01s           ;100ms
262E 80B1       +1  6044                     jmp     test1   
                +1  6045     
                +1  6046     
2630 7A08       +1  6047     zapadc:     mov R2,#8
2632 D297       +1  6048     sdv:        setb P1.7
2634 33         +1  6049                 rlc A
2635 9296       +1  6050                     mov P1.6,C
2637 120000   F +1  6051                     call tim2
                +1  6052                                     
263A C297       +1  6053                     clr P1.7
263C 120000   F +1  6054                     call tim2
263F DAF1       +1  6055                     djnz R2,sdv
2641 D296       +1  6056                     setb P1.6
2643 22         +1  6057                     ret
                +1  6058     
2644 7A08       +1  6059     chtadc:     mov R2,#8
2646 D297       +1  6060     sdv1:       setb P1.7
2648 120000   F +1  6061                 call tim2
264B C297       +1  6062                     clr P1.7
264D A296       +1  6063                     mov C,P1.6
264F 33         +1  6064                     rlc A
2650 120000   F +1  6065                     call tim2
2653 DAF1       +1  6066                     djnz R2,sdv1
2655 22         +1  6067                     ret
                +1  6068     
2656 7E30       +1  6069     tim:      mov R6,#30h;38h
2658 DEFE       +1  6070     tim1:     djnz R6,tim1
265A 22         +1  6071               ret
                +1  6072               
265B 7E10       +1  6073     tim2:     mov R6,#10h;14h
265D DEFE       +1  6074     tim3:     djnz R6,tim3
265F 22         +1  6075               ret
                +1  6076     
                +1  6077     ;запись из acc
2660 C3         +1  6078     write_x1:       clr     c
2661            +1  6079     writeD_x1:
2661 92B1       +1  6080                     mov P3.1,c        ;запись
2663 F5A0       +1  6081                 mov P2,A
2665 D2B3       +1  6082                     setb P3.3
2667 120000   F +1  6083                     call z_5
266A C2B3       +1  6084                     clr P3.3
266C 75A0FF     +1  6085                     mov P2,#0FFh
266F 22         +1  6086                     ret
                +1  6087     
                +1  6088     ;чтение в acc
2670 C3         +1  6089     read_x2:        clr     c  
2671 92B1       +1  6090                     mov P3.1,c        ;чтение
2673 D2B2       +1  6091                     setb P3.2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    94

2675 D2B3       +1  6092                     setb P3.3
2677 120000   F +1  6093                     call z_5
267A E5A0       +1  6094                     mov A,P2
267C C2B3       +1  6095                     clr P3.3
267E C2B2       +1  6096                     clr P3.2
2680 22         +1  6097                     ret
                +1  6098     
2681 120000   F +1  6099     loop:           call read_x2;x2    ;ожидание флага готовности
2684 20E7FA     +1  6100                     jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
2687 22         +1  6101                     ret           ;возврат, если бит А(7)<>1
                +1  6102     
                +1  6103     
                +1  6104     ;принимаемый байт в acc
                +1  6105     ;прием байта последовательным кодом старшими разрядами вперед
2688 7A08       +1  6106     read:      mov R2,#8
268A C297       +1  6107     re1:       clr P1.7;P1.2
268C 120000   F +1  6108                call tim2      ;5mks
268F A294       +1  6109                     mov C,P1.4;P1.0
2691 33         +1  6110                     rlc A           
2692 D297       +1  6111                     setb P1.7;P1.2
2694 120000   F +1  6112                     call tim2
2697 DAF1       +1  6113                     djnz R2,re1
2699 22         +1  6114                     ret
                +1  6115     
                +1  6116      ;in r0-count   
                +1  6117     ;r10,r11-значение с котоым сравнивается счетчик
                +1  6118     ;r2..r5 -значение счетчика
269A            +1  6119     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
269A E6         +1  6120                     mov             a,@r0
269B FC         +1  6121                     mov             r4,a
269C 08         +1  6122                     inc             r0
269D E6         +1  6123                     mov             a,@r0
269E FD         +1  6124                     mov             r5,a
269F 7B00       +1  6125                     mov             r3,#0
26A1 7A00       +1  6126                     mov             r2,#0
26A3 750800     +1  6127                     mov             r8,#0;clr                       r8
26A6 750900     +1  6128                     mov             r9,#0;clr                       r9
26A9 120000   F +1  6129                     call            lcmp
26AC 22         +1  6130                     ret
                +1  6131     
                +1  6132     
                +1  6133     ;in-r1-count
26AD            +1  6134     chdec:          ;mov            r1,#chavt               ;chavt-1
26AD E7         +1  6135                             mov             a,@r1
26AE FC         +1  6136                             mov             r4,a
26AF 09         +1  6137                             inc             r1
26B0 E7         +1  6138                             mov             a,@r1
26B1 FD         +1  6139                             mov             r5,a
26B2 C202       +1  6140                             clr             rr2
26B4 C203       +1  6141                             clr             rr3
26B6 900000   F +1  6142                             mov             dptr,#ch1        
26B9 120000   F +1  6143                             call            ldc_ltemp
26BC 120000   F +1  6144                             call            lsub
26BF ED         +1  6145                             mov             a,r5
26C0 F7         +1  6146                             mov             @r1,a
26C1 19         +1  6147                             dec             r1
26C2 EC         +1  6148                             mov             a,r4
26C3 F7         +1  6149                             mov             @r1,a
26C4 22         +1  6150                             ret      
                +1  6151     
                +1  6152     
26C5            +1  6153     loadUS: ;если идет тест измерения ус восстановить для теста
26C5 201533     +1  6154                             jb              biteizm,yestest
26C8 79AE       +1  6155                             mov             r1,#diap
26CA E7         +1  6156                             mov             a,@r1
26CB 23         +1  6157                             rl              a;*2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    95

26CC FC         +1  6158                             mov             r4,a                    ;save a
26CD 900000   F +1  6159                             mov             dptr,#tabus
26D0 93         +1  6160                             movc            a,@a+dptr
26D1 FA         +1  6161                             mov             r2,a                    ;high byte
26D2 E584       +1  6162                             mov             a,p4
26D4 5401       +1  6163                             anl             a,#01
26D6 4A         +1  6164                             orl             a,r2
26D7 F584       +1  6165                             mov             p4,a
26D9 0C         +1  6166                             inc             r4
26DA EC         +1  6167                             mov             a,r4
26DB 93         +1  6168                             movc            a,@a+dptr
26DC FB         +1  6169                             mov             r3,a                    ;low byte
26DD E585       +1  6170                             mov             a,p5
26DF 5401       +1  6171                             anl             a,#01
26E1 4B         +1  6172                             orl             a,r3
26E2 F585       +1  6173                             mov             p5,a
26E4 799A       +1  6174                             mov             r1,#parT
26E6 B7010E     +1  6175                             cjne            @r1,#1,bret
26E9 79AE       +1  6176                             mov             r1,#diap                  ;10s (parT=1)
26EB 7405       +1  6177                             mov             a,#5                      ;10-8..10-11 p4.1=1
26ED C3         +1  6178                             clr             c
26EE 97         +1  6179                             subb            a,@r1
26EF 5006       +1  6180                             jnc             bret
26F1 E584       +1  6181                             mov             a,p4
26F3 4402       +1  6182                             orl             a,#02
26F5 F584       +1  6183                             mov             p4,a                     ;10-8..10-11 p4.1=1
26F7 120000   F +1  6184     bret:                   call            louizm          ;us если вкл кн ИЗМЕР
26FA 22         +1  6185                             ret
26FB            +1  6186     yestest:
26FB 120000   F +1  6187                             call            lotpus          ;ус теста измерения
26FE 22         +1  6188                             ret
                +1  6189                             
                +1  6190     ;загр ус для кор 0
                +1  6191     ;dptr-
26FF E4         +1  6192     lospus:         clr             a
                +1  6193                             ;movc   a,@a+dptr
                +1  6194                             ;mov            r2,a                    ;high byte
                +1  6195                             ;mov            a,p4
                +1  6196                             ;anl            a,#01
                +1  6197                             ;orl            a,r2
                +1  6198                             ;mov            p4,a
                +1  6199                             ;inc            dptr
2700 E4         +1  6200                             clr             a
2701 93         +1  6201                             movc            a,@a+dptr
2702 FB         +1  6202                             mov             r3,a                    ;low byte
2703 E585       +1  6203                             mov             a,p5
2705 54BF       +1  6204                             anl             a,#0bfh;01
2707 4B         +1  6205                             orl             a,r3
2708 F585       +1  6206                             mov             p5,a
270A 22         +1  6207                             ret
                +1  6208     
270B 80         +1  6209     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  6210     
                +1  6211     ;us кнопка измерения выкл
270C 88D6       +1  6212     tabus:          db              88h,0d6h         ;10-2
270E 88F6       +1  6213                             db              88h,0f6h         ;10-3
2710 88D6       +1  6214                             db              88h,0d6h         ;10-4
2712 88F6       +1  6215                             db              88h,0f6h         ;10-5
2714 9AD6       +1  6216                             db              9ah,0d6h         ;10-6
2716 9AF6       +1  6217                             db              9ah,0f6h         ;10-7
2718 ACD6       +1  6218                             db              0ach,0d6h        ;10-8
271A ACF6       +1  6219                             db              0ach,0f6h        ;10-9
271C C8D6       +1  6220                             db              0c8h,0d6h        ;10-10
271E C8F6       +1  6221                             db              0c8h,0f6h        ;10-11
                +1  6222     
2720 66E6       +1  6223     tabt11:         db              66h,0e6h;10-11
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    96

2722 32E6       +1  6224     tabt9:          db              32h,0e6h;10-9
2724 18EE       +1  6225     tabt7:          db              18h,0eeh;10-7
                +1  6226     
                +1  6227      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  6228     ;в зав от parT (Tизм)
2726 79B7       +1  6229     loadT:          mov             r1,#load;parT
2728 7840       +1  6230     lolevT:         mov             r0,#bufind+0
272A 7B0A       +1  6231                             mov             r3,#10
272C 75F00A     +1  6232                             mov             b,#10
272F E7         +1  6233                             mov             a,@r1
2730 A4         +1  6234                             mul             ab
2731 FC         +1  6235                             mov             r4,a                    ;save a
2732 900000   F +1  6236                             mov             dptr,#textT
2735 93         +1  6237             lod1:   movc    a,@a+dptr
2736 F6         +1  6238                             mov             @r0,a
2737 08         +1  6239                             inc             r0
2738 0C         +1  6240                             inc             r4
2739 EC         +1  6241                             mov             a,r4
273A DBF9       +1  6242                             djnz    r3,lod1
273C 534B03     +1  6243                             anl                     bufind+11,#03h          ;гашение точек
273F 22         +1  6244                             ret     
                +1  6245     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  6246     ;dptr-адр строки текста         
2740            +1  6247     lotext:         
2740 7B0A       +1  6248                             mov             r3,#10
2742 7840       +1  6249                             mov             r0,#bufind+0
2744 E4         +1  6250     lodt:                   clr             a
2745 93         +1  6251                             movc            a,@a+dptr
2746 F6         +1  6252                             mov             @r0,a
2747 08         +1  6253                             inc             r0
2748 A3         +1  6254                             inc             dptr
2749 DBF9       +1  6255                             djnz            r3,lodt
274B 534B03     +1  6256                             anl             bufind+11,#03h          ;гашение точек
274E 22         +1  6257                             ret                                     
                +1  6258     
                +1  6259     
                +1  6260     ;задержка 100 мкс
274F 7978       +1  6261     z_100:    mov R1,#78h     ;загрузка первого числа
2751 7A02       +1  6262     z100:     mov R2,#2h     ;загрузка второго числа
2753 DAFE       +1  6263     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2755 D9FA       +1  6264               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2757 22         +1  6265               ret           
                +1  6266     
                +1  6267     ;задержка 34 мкс
2758 7B8B       +1  6268     z_5:      mov R3,#8Bh      ;загрузка числа
275A DBFE       +1  6269     ct:       djnz R3,ct
275C 22         +1  6270               ret
                +1  6271     
                +1  6272     ;задержка 15 мс
275D 79FA       +1  6273     z_15:     mov R1,#0FAh    ;загрузка первого числа
275F 7AED       +1  6274     z15:      mov R2,#0EDh   ;загрузка второго числа
2761 DAFE       +1  6275     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
2763 D9FA       +1  6276               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
2765 22         +1  6277               ret   
                +1  6278                                               
                +1  6279     ;задержка 1 мс
2766 7910       +1  6280     z_1ms:     mov R1,#10h     
2768 7AED       +1  6281     ss1:       mov R2,#0EDh    
276A DAFE       +1  6282                 djnz R2, $   
276C D9FA       +1  6283                djnz R1, ss1   
276E 22         +1  6284                ret   
                +1  6285     
                +1  6286     ;задержка 1с
276F 7D1F       +1  6287     z_1s:           mov             r5,#01fh 
2771 7EFF       +1  6288     co2s:           mov     R6,#0ffh     
2773 7FFF       +1  6289     z1s:            mov     R7,#0ffh     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    97

2775 DFFE       +1  6290     co1s:           djnz    R7, co1s        
2777 DEFA       +1  6291                     djnz    R6, z1s 
2779 DDF6       +1  6292                     djnz    r5,co2s
277B 22         +1  6293                 ret
                +1  6294     
                +1  6295     ;задержка 0,1с
277C 7D03       +1  6296     z_01s:          mov             r5,#03h 
277E 7EFF       +1  6297     co02s:  mov     R6,#0ffh     
2780 7FFF       +1  6298     z01s:           mov     R7,#0ffh     
2782 DFFE       +1  6299                     djnz    R7, $   
2784 DEFA       +1  6300                     djnz    R6, z01s 
2786 DDF6       +1  6301                     djnz    r5,co02s
2788 22         +1  6302                      ret
                +1  6303                                               
                +1  6304     ;задержка 0,5с
2789 7D0D       +1  6305     z_05s:          mov             r5,#0dh 
278B 7EFF       +1  6306     co05s:          mov     R6,#0ffh     
278D 7FFF       +1  6307     z05s:           mov     R7,#0ffh     
278F DFFE       +1  6308                             djnz    R7, $   
2791 DEFA       +1  6309                     djnz    R6, z05s 
2793 DDF6       +1  6310                             djnz    r5,co05s
2795 22         +1  6311                     ret                                                      
                +1  6312                                                               
2796 000007FF   +1  6313     chzap:          db      00,00,07h,0ffh             
279A 00000000   +1  6314     ch0:            db      00,00,00,00
279E 0000000A   +1  6315     ch10:           db      00,00,00,0ah                            ;10
27A2 00000005   +1  6316     ch5:            db      00,00,00,05                                             ;5
27A6 00000004   +1  6317     ch4:            db      00,00,00,04                                             ;4
27AA 000003B9   +1  6318     ch954:          db 00,00,03,0b9h                                                ;954
27AE 000003E8   +1  6319     ch10000:        db 00,00,03h,0e8h                                               ;10000
27B2 00000064   +1  6320     ch100:          db 00,00,00,64h ;100
27B6 00000002   +1  6321     ch2:            db      00,00,00,02                                             
                +1  6322     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  6323     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  6324     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
27BA 00000001   +1  6325     ch1:            db  00,00,00,01
27BE 49742400   +1  6326     ch_mln:         db      49h,74h,24h,00;10*6
27C2 3F800000   +1  6327     ch_1:           db      3fh,80h,00,00   
27C6 40000000   +1  6328     ch_2:           db      40h,00,00,00;2
27CA 40800000   +1  6329     ch_4:           db      40h,80h,00,00;4 
27CE 40A00000   +1  6330     ch_5:           db      40h,0a0h,00,00;5
27D2 40E00000   +1  6331     ch_7:           db      40h,0e0h,00,00;7
                +1  6332             
27D6 3F741EDF   +1  6333     CH_953:         db 3fh,74h,1eh,0dfh             ;0,953596
27DA 47C35000   +1  6334     CHtho:          db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
27DE 3F800347   +1  6335     KD:                     db      3fh,80h,03h,47h;1,0001
27E2 48435000   +1  6336     CH2tho:         db      48h,43h,50h,00;200000
27E6 4856D800   +1  6337     ch_220:         db  48h,56h,0d8h,00;220000 -035b60 h
27EA 4856D800   +1  6338     ch_200:         db  48h,56h,0d8h,00;200000 -030d40 h
27EE 461C4000   +1  6339     ch_10th:        db  46h,1ch,40h,00;10000-2710h
27F2 41200000   +1  6340     ch_10:          db      41h,20h,00,00;10d
27F6 48742400   +1  6341     ch_250:         db      48h,74h,24h,00;250000
27FA 000186A0   +1  6342     chk:            db      00,01,86h,0a0h;
27FE 00000320   +1  6343     ch320h:         db      00,00,03h,20h;320h=800d
2802 00000150   +1  6344     ch150h:         db      00,00,01h,50h;150h
2806 C0400000   +1  6345     ch_m3:          db      0c0h,40h,00,00;-3
                +1  6346     
                +1  6347     
                +1  6348     ;r1- мл байт 2х байтного числа
280A            +1  6349     tenmin:         ;-10
280A C3         +1  6350                     clr             c
280B E7         +1  6351             mov             a,@r1
280C 9405       +1  6352                     subb    a,#5;10
280E F7         +1  6353                     mov             @r1,a
280F 19         +1  6354                     dec             r1
2810 E7         +1  6355                     mov             a,@r1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    98

2811 9400       +1  6356                     subb    a,#0
2813 F7         +1  6357                     mov             @r1,a
2814 22         +1  6358                     ret
                +1  6359       ;r0-обнуление ячеек памяти  
2815 7F04       +1  6360     clear4: mov     r7,#4
2817 E4         +1  6361                     clr             a
2818 F6         +1  6362     cl4:    mov             @r0,a
2819 08         +1  6363                     inc             r0
281A DFFC       +1  6364                     djnz    r7,cl4
281C 22         +1  6365                     ret     
                +1  6366     
                +1  6367      ;r0-обнуление ячеек памяти             ;R7- 
281D            +1  6368     clearN:  
281D E4         +1  6369                     clr             a
281E F6         +1  6370     cl4N:   mov             @r0,a
281F 08         +1  6371                     inc             r0
2820 DFFC       +1  6372                     djnz    r7,cl4N
2822 22         +1  6373                     ret     
                +1  6374     
                +1  6375       ;чтение номера байта с индикатора(2байта)
                +1  6376     ;bufind+8..bufind+9
                +1  6377     ;-  - - -
                +1  6378     ;- - - - - - - - - -
                +1  6379     ;adec..adec+9
                +1  6380     ;ст            мл
2823 7848       +1  6381     upak2:  mov             r0,#bufind+8;
2825 795C       +1  6382                     mov             r1,#adec+9
2827 7F02       +1  6383                     mov             r7,#2;2bait
2829 C3         +1  6384     upa2:   clr             c
282A E6         +1  6385                     mov             a,@r0
282B 9430       +1  6386                     subb    a,#30h
282D F7         +1  6387                     mov             @r1,a
282E 18         +1  6388                     dec             r0
282F 19         +1  6389                     dec             r1
2830 DFF7       +1  6390                     djnz    r7,upa2
2832 22         +1  6391                     ret  
                +1  6392     
                +1  6393     
                +1  6394         
                +1  6395      ;bufind+4..bufind+9
                +1  6396     ;-  - - -
                +1  6397     ;- - - - - - - - - -
                +1  6398     ;adec..adec+9
                +1  6399     ;ст            мл
2833 7849       +1  6400     upak:   mov             r0,#bufind+9;
2835 795C       +1  6401                     mov             r1,#adec+9
2837 7F06       +1  6402                     mov             r7,#6
2839 C3         +1  6403     upa:    clr             c
283A E6         +1  6404                     mov             a,@r0
283B 9430       +1  6405                     subb    a,#30h
283D F7         +1  6406                     mov             @r1,a
283E 18         +1  6407                     dec             r0
283F 19         +1  6408                     dec             r1
2840 DFF7       +1  6409                     djnz    r7,upa
2842 22         +1  6410                     ret
                +1  6411     
                +1  6412      ;чтение номера байта с индикатора(3байта)
                +1  6413     ;bufind+3..bufind+9
                +1  6414     ;-  - - -
                +1  6415     ;- - - - - - - - - -
                +1  6416     ;adec..adec+9
                +1  6417     ;ст            мл
2843 7849       +1  6418     upak3:  mov             r0,#bufind+9;
2845 795C       +1  6419                     mov             r1,#adec+9
2847 7F03       +1  6420                     mov             r7,#3;3bait
2849 C3         +1  6421     upa1:   clr             c
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE    99

284A E6         +1  6422                     mov             a,@r0
284B 9430       +1  6423                     subb    a,#30h
284D F7         +1  6424                     mov             @r1,a
284E 18         +1  6425                     dec             r0
284F 19         +1  6426                     dec             r1
2850 DFF7       +1  6427                     djnz    r7,upa1
2852 22         +1  6428                     ret
                +1  6429     
                +1  6430     ;вых-r2,r3-адрес ячее памяти прогр
2853            +1  6431     findkoef:
2853 79AE       +1  6432                     mov             r1,#diap
2855 E7         +1  6433                     mov             a,@r1
2856 23         +1  6434                     rl              a                       ;diap*2(2bait )
2857 FC         +1  6435                     mov             r4,a                    ;save
2858 900000   F +1  6436                     mov             dptr,#diKDw             ;адрес таблицы поиска коффициентов
285B 93         +1  6437                     movc    a,@a+dptr                       ;ст байт
285C FA         +1  6438                     mov             r2,a
285D A3         +1  6439                     inc             dptr
285E EC         +1  6440                     mov             a,r4
285F 93         +1  6441                     movc    a,@a+dptr
2860 FB         +1  6442                     mov             r3,a                    ;мл байт
2861 22         +1  6443                     ret
                +1  6444     ;r2..r5 в опр яч внешн озу
2862            +1  6445     findext:
2862 79AE       +1  6446                     mov             r1,#diap
2864 E7         +1  6447                     mov             a,@r1
2865 23         +1  6448                     rl              a                       ;diap*2(2bait )
2866 23         +1  6449                     rl              a                       ;diap*2(2bait )
2867 F9         +1  6450                     mov             r1,a                    ;r1-номер ячейки внешнего озу
2868 22         +1  6451                                     ret
                +1  6452     
                +1  6453     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  6454     ;(5000h..5027h)
2869 5000       +1  6455     diKDw:  dw              5000h                   ;10-2
286B 5004       +1  6456                     dw              5004h                   ;10-3
286D 5008       +1  6457                     dw              5008h                   ;10-4
286F 500C       +1  6458                     dw              500ch                   ;10-5
2871 5010       +1  6459                     dw              5010h                   ;10-6
2873 5014       +1  6460                     dw              5014h                   ;10-7
2875 5018       +1  6461                     dw              5018h                   ;10-8
2877 501C       +1  6462                     dw              501ch                   ;10-9
2879 5020       +1  6463                     dw              5020h                   ;10-10
287B 5024       +1  6464                     dw              5024h                   ;10-11
287D 5028       +1  6465     dipar:  dw              5028h                   ;parol
287F 502C       +1  6466     diKm:   dw              502ch                   ;Km для теста измерения
2881 000186A0   +1  6467     chthou: db      00,01,86h,0a0h  ;100.000
                +1  6468     
2885 AA08       +1  6469     move82: mov     r2,ltemp                        ;ltemp->r2..r5
2887 AB09       +1  6470                     mov     r3,ltemp+1
2889 AC0A       +1  6471                     mov     r4,ltemp+2
288B AD0B       +1  6472                     mov     r5,ltemp+3
288D 22         +1  6473                     ret
                +1  6474     ;bufind+4..bufind+9
                +1  6475     ;-  - - -
                +1  6476     ;- - - - - - - - - -
                +1  6477     ;adec..adec+9
                +1  6478     ;ст            мл
288E 7847       +1  6479     upakA:  mov             r0,#bufind+7;
2890 795C       +1  6480                     mov             r1,#adec+9
2892 7F04       +1  6481                     mov             r7,#4
2894 C3         +1  6482     upaa4:  clr             c
2895 E6         +1  6483                     mov             a,@r0
2896 9430       +1  6484                     subb            a,#30h
2898 F7         +1  6485                     mov             @r1,a
2899 18         +1  6486                     dec             r0
289A 19         +1  6487                     dec             r1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   100

289B DFF7       +1  6488                     djnz            r7,upaa4
289D 22         +1  6489                     ret
                +1  6490     
                +1  6491     ;bufind+4..bufind+9
                +1  6492     ;-  - - -
                +1  6493     ;- - - - - - - - - -
                +1  6494     ;adec..adec+9
                +1  6495     ;ст            мл
289E 7848       +1  6496     upakB:  mov             r0,#bufind+8;
28A0 795C       +1  6497                     mov             r1,#adec+9
28A2 7F05       +1  6498                     mov             r7,#5
28A4 C3         +1  6499     upab:   clr             c
28A5 E6         +1  6500                     mov             a,@r0
28A6 9430       +1  6501                     subb            a,#30h
28A8 F7         +1  6502                     mov             @r1,a
28A9 18         +1  6503                     dec             r0
28AA 19         +1  6504                     dec             r1
28AB DFF7       +1  6505                     djnz            r7,upab
28AD C21B       +1  6506                     clr             bitznB
28AF E543       +1  6507                     mov             a,bufind+3
28B1 B42D02     +1  6508                     cjne            a,#2dh,abret
28B4 D21B       +1  6509                     setb            bitznB
28B6            +1  6510     abret:
28B6 22         +1  6511                     ret
28B7            +1  6512     CH_B:   db      ;       4bh,18h,96h,80h;989680h=10 **7
28B7 4E6E6AA8   +1  6513                     db      4eh,6eh,6ah,0a8h;10**9
28BB 43FA0000   +1  6514     CH_500: db              43h,0fah,00,00;1fah=500
28BF 4856D800   +1  6515     CH_22T: db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
28C3 49742400   +1  6516     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  6517     
                +1  6518     
                +1  6519     
                +1  6520     ;управление AD7731              r4=b1 r5=b2
28C7 7403       +1  6521     iniacp: mov             a,#03
28C9 120000   F +1  6522                     call    write
28CC EC         +1  6523                     mov             a,r4;#80h
28CD 120000   F +1  6524                     call    write
28D0 ED         +1  6525                     mov             a,r5;#04
28D1 120000   F +1  6526                     call    write
28D4 7402       +1  6527                     mov             a,#02
28D6 120000   F +1  6528                     call    write
28D9 74A1       +1  6529                     mov             a,#0a1h
28DB 120000   F +1  6530                     call    write
28DE 7474       +1  6531                     mov             a,#74h
28E0 120000   F +1  6532                     call    write
28E3 2095FD     +1  6533                     jb              p1.5,$;p1.3,$
28E6 7402       +1  6534                     mov             a,#02
28E8 120000   F +1  6535                     call    write
28EB 7481       +1  6536                     mov             a,#81h
28ED 120000   F +1  6537                     call    write
28F0 7474       +1  6538                     mov             a,#74h
28F2 120000   F +1  6539                     call    write
28F5 2095FD     +1  6540                     jb              p1.5,$;p1.3,$
28F8 7402       +1  6541                     mov             a,#02
28FA 120000   F +1  6542                     call    write
28FD 7421       +1  6543                     mov             a,#21h
28FF 120000   F +1  6544                     call    write
2902 7474       +1  6545                     mov             a,#74h
2904 120000   F +1  6546                     call    write
2907 22         +1  6547                     ret
                +1  6548     
                +1  6549     
2908 0000       +1  6550     tabB1_2:        db              00,00            ;B1,B2 в соотв с Tизм  
290A 6000       +1  6551                             db              60h,00h;40h,04h         ;10s
290C 6000       +1  6552                             db              60h,00;40h,04h          ;1s
290E 6001       +1  6553                             db              60h,01h;40h,04h         ;0,1s
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   101

2910 6001       +1  6554                             db              60h,01;00h;20h,04h              ;50ms
2912 6001       +1  6555                             db              60h,01;00h;20h,04h               ;10ms
2914 1333       +1  6556                             db              13h,33h;32h             ;2ms
                +1  6557     
                +1  6558     ;загр В1,В2 в завис от Т                                
2916 799A       +1  6559     loab12:         mov             r1,#parT
2918 900000   F +1  6560                             mov             dptr,#tabB1_2
291B E7         +1  6561                             mov             a,@r1
291C 23         +1  6562                             rl              a;*2
291D FF         +1  6563                             mov             r7,a                    ;save a
291E 93         +1  6564                             movc    a,@a+dptr
291F FC         +1  6565                             mov             r4,a   ;b1
2920 0F         +1  6566                             inc             r7
2921 EF         +1  6567                             mov             a,r7
2922 93         +1  6568                             movc    a,@a+dptr
2923 FD         +1  6569                             mov             r5,a
                +1  6570                     ;после загр В1,2 загр упр слово для нового Т
2924 22         +1  6571                             ret
                +1  6572     
                +1  6573     
2925 7852       +1  6574     loadr2: mov             r0,#abin+3              ;r2..r5
2927 E6         +1  6575                     mov             a,@r0                   ; ст мл   
2928 FA         +1  6576                     mov             r2,a
2929 18         +1  6577                     dec             r0
292A E6         +1  6578                     mov             a,@r0
292B FB         +1  6579                     mov             r3,a
292C 18         +1  6580                     dec             r0
292D E6         +1  6581                     mov             a,@r0
292E FC         +1  6582                     mov             r4,a
292F 18         +1  6583                     dec             r0
2930 E6         +1  6584                     mov             a,@r0
2931 FD         +1  6585                     mov             r5,a
2932 22         +1  6586                     ret
                +1  6587                                             
                +1  6588     
                +1  6589      ;загрузка KD в зависимости от диап изм  
                +1  6590      ;koef->r8..r11
2933 78AE       +1  6591     loadKD: mov             r0,#diap
2935 E6         +1  6592                     mov             a,@r0
2936 900000   F +1  6593                     mov             dptr,#diKDn
2939 75F004     +1  6594                     mov             b,#4
293C A4         +1  6595                     mul             ab
293D FF         +1  6596                     mov             r7,a;save
293E 93         +1  6597                     movc    a,@a+dptr
293F F508       +1  6598                     mov             r8,a
2941 A3         +1  6599                     inc             dptr
2942 EF         +1  6600                     mov             a,r7
2943 93         +1  6601                     movc    a,@a+dptr
2944 F509       +1  6602                     mov             r9,a
2946 A3         +1  6603                     inc             dptr
2947 EF         +1  6604                     mov             a,r7
2948 93         +1  6605                     movc    a,@a+dptr
2949 F50A       +1  6606                     mov             r10,a
294B A3         +1  6607                     inc             dptr
294C EF         +1  6608                     mov             a,r7
294D 93         +1  6609                     movc    a,@a+dptr
294E F50B       +1  6610                     mov             r11,a
2950 22         +1  6611                     ret
                +1  6612     
2951 3F506B7B   +1  6613      diKDn: db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2955 3F507FCC   +1  6614                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10-3
2959 3F4F9D0B   +1  6615                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10-4
295D 3F4FE869   +1  6616                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10-5
2961 3F50294A   +1  6617                     db              3fh,50h,29h,4ah;3fh,80h,00,00   ;4fh,0e9h,11h   ;0,81215   
                             10-6
2965 3F50639E   +1  6618                     db              3fh,50h,63h,9eh;3fh,80h,00,00           ;10-7
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   102

2969 3F4BC9F0   +1  6619                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10-8
296D 3F4C063B   +1  6620                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10-9
2971 3F50EFDD   +1  6621                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10-10
2975 3F512AD9   +1  6622                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10-11
                +1  6623     
2979 00000039   +1  6624     ch57:           db      00,00,00,39h;57
297D 00000014   +1  6625     ch20:           db      00,00,00,14h;20
                +1  6626     
                +1  6627     ;загр ус для тестов ацп         ;dptr-
2981 78B1       +1  6628     lotpus: mov             r0,#vichR
2983 B6210D     +1  6629                     cjne    @r0,#21h,te22
2986 900000   F +1  6630                     mov                     dptr,#tabt11;заслать ус 11А
2989 E4         +1  6631     lotp:   clr             a
298A 93         +1  6632                     movc    a,@a+dptr                               ;high byte
298B F584       +1  6633                     mov             p4,a
298D A3         +1  6634                     inc             dptr
298E E4         +1  6635                     clr             a
298F 93         +1  6636                     movc    a,@a+dptr                               ;low byte
2990 F585       +1  6637                     mov             p5,a
2992 22         +1  6638                     ret
2993 B62205     +1  6639     te22:   cjne    @r0,#22h,te23
2996 900000   F +1  6640                     mov                     dptr,#tabt9;заслать ус 9А       
2999 80EE       +1  6641                     jmp                     lotp
299B 900000   F +1  6642     te23:   mov                     dptr,#tabt7;заслать ус 7А       
299E 80E9       +1  6643                     jmp                     lotp
                +1  6644     
                +1  6645     
                +1  6646     
                +1  6647     
                +1  6648     
29A0 02030405   +1  6649     Tabn:           db              2,3,4,5,6,7,8,9,10,11           ;порядок диапазонов степени
29A4 06070809                
29A8 0A0B                    
                +1  6650     
29AA 78AE       +1  6651     findR:  mov                     r0,#diap
29AC E6         +1  6652                     mov                     a,@r0
29AD 900000   F +1  6653                     mov                     dptr,#Tabn
29B0 93         +1  6654                     movc            a,@a+dptr
29B1 22         +1  6655                     ret
                +1  6656     ;bufind=30h..39h                                                                           
                                           ;
29B2 C219       +1  6657     vvchif: clr             bitmig
29B4 79B2       +1  6658                     mov             r1,#marker
29B6 E7         +1  6659                     mov             a,@r1                   ;изм цифры
29B7 7840       +1  6660                     mov             r0,#bufind                      ;0000
29B9 28         +1  6661                     add             a,r0
29BA F8         +1  6662                     mov             r0,a
29BB 06         +1  6663                     inc             @r0
29BC B63A03     +1  6664                     cjne    @r0,#3ah,chif
29BF 7630       +1  6665                     mov             @r0,#30h
29C1 22         +1  6666                     ret
29C2 C3         +1  6667     chif:   clr                     c
29C3 7430       +1  6668                     mov                     a,#30h
29C5 96         +1  6669                     subb            a,@r0
29C6 4002       +1  6670                     jc                      chif5
29C8 7630       +1  6671                     mov             @r0,#30h
29CA 22         +1  6672     chif5:  ret
                +1  6673     
29CB 80E5       +1  6674     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6675     
29CD B641FB     +1  6676     vvnol31:        cjne            @r0,#41h,vvnol41
29D0 800A       +1  6677                             jmp                     chifour
29D2 B631F8     +1  6678     vvnol23:        cjne            @r0,#31h,vvnol31
29D5 8005       +1  6679                             jmp                     chifour 
                +1  6680     
29D7 78B0       +1  6681     vvchibl:        mov                     r0,#level
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   103

29D9 B623F6     +1  6682                             cjne            @r0,#23h,vvnol23;при наборе цифр в блоке
29DC C219       +1  6683     chifour:        clr             bitmig
29DE 79B2       +1  6684                             mov             r1,#marker
29E0 E7         +1  6685                             mov             a,@r1                   ;изм цифры
29E1 7840       +1  6686                             mov             r0,#bufind                      ;1..4
29E3 28         +1  6687                             add             a,r0
29E4 F8         +1  6688                             mov             r0,a
29E5 06         +1  6689                             inc             @r0
29E6 B63504     +1  6690                             cjne    @r0,#35h,chifb
29E9 7631       +1  6691                             mov             @r0,#31h
29EB 8006       +1  6692                             jmp             chifb1
29ED B63003     +1  6693     chifb:          cjne    @r0,#30h,chifb1
29F0 7631       +1  6694                             mov             @r0,#31h
29F2 22         +1  6695                             ret
                +1  6696     
29F3 C3         +1  6697     chifb1: clr                     c
29F4 7430       +1  6698                     mov                     a,#30h
29F6 96         +1  6699                     subb            a,@r0
29F7 4002       +1  6700                     jc                      chifl5
29F9 7630       +1  6701                     mov             @r0,#30h
29FB 22         +1  6702     chifl5: ret
                +1  6703     
                +1  6704       ;перевод маркера влево
29FC            +1  6705     marle:  
29FC C219       +1  6706                     clr             bitmig
                +1  6707                     ;mov            savba,#0   нельзя обнулять
29FE 78B2       +1  6708             mov             r0,#marker
2A00 16         +1  6709                     dec             @r0
2A01 E6         +1  6710                     mov             a,@r0
2A02 C3         +1  6711                     clr             c
2A03 953A       +1  6712                     subb    a,movleft         ;крайне левое положение
2A05 5001       +1  6713                     jnc             rler
2A07 06         +1  6714                     inc             @r0
2A08 22         +1  6715     rler:   ret
                +1  6716         
                +1  6717     ;перевод маркера вправо
2A09 C219       +1  6718     marri:  clr             bitmig
2A0B 78B2       +1  6719                     mov             r0,#marker
2A0D 06         +1  6720                     inc         @r0
2A0E E53B       +1  6721                     mov             a,movrig           ;крайне правое положение
2A10 C3         +1  6722                     clr             c
2A11 96         +1  6723                     subb            a,@r0
2A12 5001       +1  6724                     jnc             rrir
2A14 16         +1  6725                     dec             @r0
2A15 22         +1  6726     rrir:   ret
                +1  6727         
                +1  6728     ;konstA->bufind+4..bufind+7
2A16 78BC       +1  6729     outA:   mov             r0,#konstA
2A18 120000   F +1  6730                     call            resar2
2A1B 120343     +1  6731                     call            ftol                    ;->hex
2A1E 784F       +1  6732                     mov             r0,#abin
2A20 120000   F +1  6733                     call            saver2
2A23 7853       +1  6734                     mov                     r0,#adec
2A25 7952       +1  6735                     mov             r1,#abin+3
2A27 120000   F +1  6736                     call            bindec
2A2A 785C       +1  6737                     mov                     r0,#adec+9
2A2C 7947       +1  6738                     mov                     r1,#bufind+7
2A2E 7F04       +1  6739                     mov                     r7,#4
2A30 E6         +1  6740     outa2:  mov             a,@r0
2A31 2430       +1  6741                     add             a,#30h
2A33 F7         +1  6742                     mov             @r1,a
2A34 19         +1  6743                     dec             r1
2A35 18         +1  6744                     dec             r0
2A36 DFF8       +1  6745                     djnz    r7,outa2
2A38 22         +1  6746                     ret
                +1  6747                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   104

                +1  6748     ;konstB->bufind+4..bufind+8
                +1  6749     ;outB:  mov                     r0,#konstB
                +1  6750     ;               call            resar2
                +1  6751     ;               mov                     a,r2
                +1  6752     ;               anl                     a,#80h
                +1  6753     ;               jz                      outb3
                +1  6754     ;               mov             a,r2
                +1  6755     ;               anl                     a,#7fh
                +1  6756     ;               mov                     r2,a
                +1  6757     ;               mov                     bufind+3,#2dh
                +1  6758     ;outb3: call            ftol                    ;->hex
                +1  6759     ;               mov             r0,#abin
                +1  6760     ;               call            saver2
                +1  6761     ;               mov                     r0,#adec
                +1  6762     ;               mov             r1,#abin+3
                +1  6763     ;               call            bindec
                +1  6764     ;               mov                     r0,#adec+9
                +1  6765     ;               mov                     r1,#bufind+8
                +1  6766     ;               mov                     r7,#5
                +1  6767     ;outb2: mov             a,@r0
                +1  6768     ;               add             a,#30h
                +1  6769     ;               mov             @r1,a
                +1  6770     ;               dec             r1
                +1  6771     ;               dec             r0
                +1  6772     ;               djnz    r7,outb2
                +1  6773     ;               ret
                +1  6774     
                +1  6775     
                +1  6776     ;пп мигания индикации
2A39 78B2       +1  6777     mign:   mov             r0,#marker
2A3B B6FF03     +1  6778                     cjne    @r0,#0ffh,mignn
                +1  6779             ;реж изм мигает *
2A3E C219       +1  6780                     clr             bitmig
2A40 22         +1  6781                     ret
                +1  6782     
2A41            +1  6783     mignn:  ;clr            c
2A41 7440       +1  6784                     mov             a,#bufind
2A43 26         +1  6785                     add             a,@r0                   ;a=bufind+marker
2A44 F9         +1  6786                     mov             r1,a
2A45 201907     +1  6787                     jb              bitmig,onmig
2A48 873C       +1  6788                     mov             savba,@r1
                +1  6789             ;       mov             a,@r1
                +1  6790             ;       mov             savba,a
2A4A 7720       +1  6791                     mov             @r1,#" "
2A4C D219       +1  6792                     setb    bitmig
2A4E 22         +1  6793                     ret
                +1  6794     
2A4F A73C       +1  6795     onmig:  mov             @r1,savba
                +1  6796                     ;mov            a,savba
                +1  6797                     ; mov           @r1,a
2A51 C219       +1  6798                     clr             bitmig
2A53 120000   F +1  6799                     call    z_01s
2A56 22         +1  6800                     ret
                +1  6801     ;номер ошибки bufind+6
2A57 900000   F +1  6802     error:  mov             dptr,#teERR
2A5A 120000   F +1  6803                     call    lotext
2A5D 853946     +1  6804                     mov             bufind+6,nuerr
2A60 22         +1  6805                     ret
                +1  6806     
                +1  6807     
2A61            +1  6808     textT:          
2A61 FD543D32   +1  6809     te2ms:          db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=0..5
2A65 6D67FDFD                
2A69 FDFD                    
2A6B FD543D31   +1  6810     te10ms:         db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
2A6F 306D67FD                
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   105

2A73 FDFD                    
2A75 FD543D35   +1  6811                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
2A79 306D67FD                
2A7D FDFD                    
2A7F FD543D64   +1  6812                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2A83 3167FDFD                
2A87 FDFD                    
2A89 20202054   +1  6813                             db              " "," "," ","T","=",31h,67h," "," "," "
2A8D 3D316720                
2A91 2020                    
2A93 2020543D   +1  6814                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2A97 31306720                
2A9B 2020                    
                +1  6815     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6816     
2A9D 42753474   +1  6817     teVICH:         db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
2AA1 79767454                
2AA5 7720                    
2AA7 20553D20   +1  6818     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
2AAB 20202020                
2AAF 2065                    
2AB1 20423D2B   +1  6819     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2AB5 20202020                
2AB9 2020                    
2ABB 20207145   +1  6820     teMENU:         db              " "," ",71h,"E","H",72h," "," "," "," "
2ABF 48722020                
2AC3 2020                    
                +1  6821     
2AC5 20544579   +1  6822     teTESI:         db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2AC9 542D7433                
2ACD 7120                    
2ACF 54457954   +1  6823     teTESR:         db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
2AD3 20523520                
2AD7 2020                    
2AD9 20794B30   +1  6824     teSKOR:         db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232     13
2ADD 50205235                
2AE1 2020                    
2AE3 20204142   +1  6825     teAVK:          db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK           14
2AE7 4B202020                
2AEB 2020                    
2AED 204B4176   +1  6826     teKALIB:        db      " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР     15
2AF1 74735020                
2AF5 202020                  
2AF8 20544579   +1  6827     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;       21
2AFC 54202020                
2B00 5431                    
2B02 20544579   +1  6828     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                22
2B06 54202020                
2B0A 5432                    
2B0C 20544579   +1  6829     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                23
2B10 54202020                
2B14 5433                    
2B16 20202035   +1  6830     teS57_6:        db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
2B1A 37362020                
2B1E 2020                    
2B20 20202031   +1  6831     teS19_2:        db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2B24 39322020                
2B28 2020                    
                +1  6832     
2B2A 61415030   +1  6833     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
2B2E 76772030                
2B32 3030                    
2B34 20303030   +1  6834     teKD:           db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2B38 30302020                
2B3C 2041                    
2B3E 74337120   +1  6835     teIZMK:         db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   106

2B42 4B304879                
2B46 5420                    
2B48 20204275   +1  6836     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2B4C 58307820                
2B50 2020                    
2B52 2020304C   +1  6837     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2B56 4C202020                
2B5A 2020                    
2B5C 20203034   +1  6838     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
2B60 7479544B                
2B64 4120                    
2B66 20203041   +1  6839     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
2B6A 71795420                
2B6E 20203341   +1  6840     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
2B72 61747977                
2B76 2020                    
2B78 20206150   +1  6841     teLIST:         db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
2B7C 30797130                
2B80 545020                  
2B83 20206130   +1  6842     teFULL:         db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2B87 76484162                
2B8B 2020                    
2B8D 20744854   +1  6843     teINT:          db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
2B91 20303030                
2B95 3067                    
2B97 20207376   +1  6844     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2B9B 304B2020                
2B9F 2020                    
2BA1 20207376   +1  6845     teBL0:          db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2BA5 304B2030                
2BA9 2020                    
2BAB 30547934   +1  6846     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
2BAF 45542030                
2BB3 3031                    
2BB5 79544154   +1  6847     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2BB9 74795474                
2BBD 4B41                    
2BBF 71744820   +1  6848     teMIN:          db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
2BC3 20202020                
2BC7 2020                    
2BC9 71414B79   +1  6849     teMAX:          db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2BCD 20202020                
2BD1 2020                    
2BD3 79504578   +1  6850     teMID:          db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2BD7 20202020                
2BDB 2020                    
                +1  6851     
2BDD 2020304C   +1  6852     teOLI:          db              " "," ",30h,"L","L"," ","I"," "," "," "
2BE1 4C204920                
2BE5 2020                    
2BE7 2020304C   +1  6853     teOLR:          db              " "," ",30h,"L","L"," ",66h," "," "," "
2BEB 4C206620                
2BEF 2020                    
2BF1 20204552   +1  6854     teERR:          db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2BF5 52202020                
2BF9 2020                    
2BFB 2020454E   +1  6855     teEND:          db              " "," ","E","N","D"," "," "," "," "," " ;END
2BFF 44202020                
2C03 2020                    
                +1  6856     
                +1  6857     ;dptr+4-приемник
                +1  6858     ;dptr-источник
                +1  6859     ;r7-кол байт  
2C05 7F04       +1  6860     xCIKLWR:        mov             r7,#4   
2C07 E0         +1  6861     lwrx:           movx            a,@dptr
2C08 C083       +1  6862                             push            dph
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   107

2C0A C082       +1  6863                             push            dpl
2C0C A3         +1  6864                             inc             dptr
2C0D A3         +1  6865                             inc             dptr
2C0E A3         +1  6866                             inc             dptr
2C0F A3         +1  6867                             inc             dptr
2C10 F0         +1  6868                             movx            @dptr,a
2C11 D082       +1  6869                             pop             dpl
2C13 D083       +1  6870                             pop             dph
2C15 A3         +1  6871                             inc             dptr
2C16 DFEF       +1  6872                             djnz            r7,lwrx
2C18 22         +1  6873                             ret
                +1  6874     ;r2..r5->@dptr..@dptr+3                         
2C19 EA         +1  6875     saveIr2:        mov             a,r2
2C1A F0         +1  6876                             movx    @dptr,a
2C1B A3         +1  6877                             inc     dptr
2C1C EB         +1  6878                             mov     a,r3
2C1D F0         +1  6879                             movx    @dptr,a
2C1E A3         +1  6880                             inc             dptr
2C1F EC         +1  6881                             mov             a,r4
2C20 F0         +1  6882                             movx    @dptr,a
2C21 A3         +1  6883                             inc             dptr
2C22 ED         +1  6884                             mov             a,r5
2C23 F0         +1  6885                             movx    @dptr,a
2C24 22         +1  6886                             ret
                +1  6887     ;r2..r5-> @r0..@r0+3
                +1  6888     
2C25 EA         +1  6889     saver2:         mov     a,r2
2C26 F6         +1  6890                             mov     @r0,a
2C27 08         +1  6891                             inc     r0
2C28 EB         +1  6892                             mov     a,r3
2C29 F6         +1  6893                             mov     @r0,a
2C2A 08         +1  6894                             inc     r0
2C2B EC         +1  6895                             mov     a,r4
2C2C F6         +1  6896                             mov     @r0,a
2C2D 08         +1  6897                             inc     r0
2C2E ED         +1  6898                             mov     a,r5
2C2F F6         +1  6899                             mov     @r0,a
2C30 22         +1  6900                             ret 
                +1  6901     
2C31 7F50       +1  6902     clmassix:       mov                     r7,#50h;28h
2C33 900100     +1  6903                             mov     dptr,#MASS0        ;забить массив A нулями
2C36 7400       +1  6904     clmax:          mov          a,#00h
2C38 F0         +1  6905                 movx    @dptr,a
2C39 A3         +1  6906                 inc     dptr
2C3A DFFA       +1  6907                 djnz                r7,clmax                
2C3C F56E       +1  6908                 mov     chmas,a
2C3E C201       +1  6909                 clr     bitmas
2C40 22         +1  6910                 ret
                +1  6911     ;r1-яЁшхьшъ
                +1  6912     ;r0-шёЄюўшъ
                +1  6913     ;r7-ъюы срщЄ  
2C41            +1  6914     CIKLWR:
2C41 7F04       +1  6915                     mov             r7,#4   
2C43 E6         +1  6916     lwr:            mov     a,@r0
2C44 F7         +1  6917                     mov     @r1,a
2C45 09         +1  6918                     inc             r1
2C46 08         +1  6919                     inc             r0
2C47 DFFA       +1  6920                     djnz    r7,lwr
2C49 22         +1  6921                     ret     
                +1  6922     ;r2..r5-> @dptr..@dptr+3
                +1  6923     
2C4A 120000   F +1  6924     zmul:   call    maform
2C4D 120000   F +1  6925                     call    lmul
2C50 120000   F +1  6926                     call    bform
2C53 22         +1  6927                     ret
                +1  6928     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   108

2C54 120000   F +1  6929     zdiv:   call    maform
2C57 120000   F +1  6930                     call    divide
2C5A 120000   F +1  6931                     call    bform
2C5D 22         +1  6932                     ret
                +1  6933     
2C5E EA         +1  6934     maform: mov a,r2
2C5F 33         +1  6935             rlc a
2C60 5006       +1  6936             jnc             fo1m
2C62 D202       +1  6937                     setb            znmat
2C64 120000   F +1  6938                     call   form4
2C67 22         +1  6939                     ret
2C68 C202       +1  6940     fo1m:   clr             znmat
2C6A 22         +1  6941                     ret
                +1  6942     
2C6B 300203     +1  6943     bform:  jnb             znmat,fo2m
2C6E 120000   F +1  6944                     call    form4
2C71 22         +1  6945     fo2m:   ret
                +1  6946       
                +1  6947     ;r2..r5 яхЁхтхёЄш т фюя ъюф
2C72 ED         +1  6948     form4:  mov a,r5
2C73 F4         +1  6949                     cpl a
2C74 2401       +1  6950             add a,#1
2C76 FD         +1  6951             mov r5,a
2C77 EC         +1  6952             mov a,r4
2C78 F4         +1  6953             cpl a
2C79 3400       +1  6954             addc    a,#0
2C7B FC         +1  6955             mov r4,a
2C7C EB         +1  6956             mov a,r3
2C7D F4         +1  6957                     cpl a
2C7E 3400       +1  6958             addc    a,#0
2C80 FB         +1  6959             mov r3,a
2C81 EA         +1  6960             mov a,r2
2C82 F4         +1  6961             cpl a
2C83 3400       +1  6962             addc    a,#0
2C85 FA         +1  6963             mov r2,a
2C86 22         +1  6964             ret
                +1  6965     
2C87 120000   F +1  6966     zcmp:   call            maform
2C8A 120000   F +1  6967                     call            lcmp
2C8D C0D0       +1  6968                     push            psw
2C8F 120000   F +1  6969                     call    bform
2C92 D0D0       +1  6970                     pop             psw
2C94 22         +1  6971                     ret
                +1  6972     
                +1  6973     
                +1  6974     ;@r0..@r0+3->r8..r11
                +1  6975     
2C95 E6         +1  6976     resar8: mov     a,@r0
2C96 F508       +1  6977                     mov     ltemp,a
2C98 08         +1  6978                     inc     r0
2C99 E6         +1  6979                     mov     a,@r0
2C9A F509       +1  6980                     mov     ltemp+1,a
2C9C 08         +1  6981                     inc     r0
2C9D E6         +1  6982                     mov     a,@r0
2C9E F50A       +1  6983                     mov     ltemp+2,a
2CA0 08         +1  6984                     inc     r0
2CA1 E6         +1  6985                     mov     a,@r0
2CA2 F50B       +1  6986                     mov     ltemp+3,a
2CA4 22         +1  6987                     ret
                +1  6988     
                +1  6989     ;
                +1  6990     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6991     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6992     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6993     ;r2 a    ўшёыю 180
                +1  6994     ;00 b4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   109

                +1  6995     ;т_ї- mabin..mabin+2
                +1  6996     ;     80 01 00
                +1  6997     
2CA5 C8         +1  6998     cond:   xch     a,r0    
2CA6 F9         +1  6999                     mov     r1,a
2CA7 C8         +1  7000                     xch     a,r0
2CA8 7C03       +1  7001                     mov     r4,#03
2CAA 7700       +1  7002     dcoa:   mov     @r1,#00
2CAC 09         +1  7003                     inc     r1
2CAD DCFB       +1  7004                     djnz    r4,dcoa
2CAF 7B10       +1  7005                     mov     r3,#10h
2CB1 C3         +1  7006     dcob:   clr     c
2CB2 33         +1  7007                     rlc     a
2CB3 CA         +1  7008                     xch     a,r2
2CB4 33         +1  7009                     rlc     a
2CB5 CA         +1  7010                     xch     a,r2
2CB6 C8         +1  7011                     xch     a,r0
2CB7 F9         +1  7012                     mov     r1,a
2CB8 C8         +1  7013                     xch     a,r0
2CB9 7C03       +1  7014                     mov     r4,#03
2CBB FD         +1  7015                     mov     r5,a
2CBC E7         +1  7016     dcoc:   mov     a,@r1 
2CBD 37         +1  7017                     addc    a,@r1
2CBE D4         +1  7018                     da      a
2CBF F7         +1  7019                     mov     @r1,a
2CC0 09         +1  7020                     inc     r1
2CC1 DCF9       +1  7021                     djnz    r4,dcoc
2CC3 ED         +1  7022                     mov     a,r5
2CC4 4003       +1  7023                     jc      dcod
2CC6 DBE9       +1  7024                     djnz    r3,dcob
2CC8 C3         +1  7025                     clr     c
2CC9 00         +1  7026     dcod:   nop
2CCA 22         +1  7027                     ret
                +1  7028     
2CCB 8A08       +1  7029     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2CCD 850309     +1  7030                     mov     ltemp+1,3
2CD0 85040A     +1  7031                     mov     ltemp+2,4
2CD3 85050B     +1  7032                     mov     ltemp+3,5
2CD6 22         +1  7033                     ret
                +1  7034     
                +1  7035     ;@r0..@r0+3->r2..r5
                +1  7036     
2CD7 E6         +1  7037     resar2: mov     a,@r0
2CD8 FA         +1  7038                     mov     r2,a
2CD9 08         +1  7039                     inc     r0
2CDA E6         +1  7040                     mov     a,@r0
2CDB FB         +1  7041                     mov     r3,a
2CDC 08         +1  7042                     inc     r0
2CDD E6         +1  7043                     mov     a,@r0
2CDE FC         +1  7044                     mov     r4,a
2CDF 08         +1  7045                     inc     r0
2CE0 E6         +1  7046                     mov     a,@r0
2CE1 FD         +1  7047                     mov     r5,a
2CE2 22         +1  7048                     ret
                +1  7049     
                +1  7050     ;25mkc !!!!!!!!!!!!!!!1
2CE3 7B4B       +1  7051     z_9:    mov R3,#4Bh      ;загрузка числа
2CE5 DBFE       +1  7052                 djnz R3,$
2CE7 22         +1  7053             ret
                +1  7054     
                +1  7055     ;запись   передаваемый байт в acc
                +1  7056     ;передача байта послед кодом старшими разрядами  вперед
2CE8 7A08       +1  7057     write:  mov R2,#8
2CEA C3         +1  7058                     clr  c  
2CEB C297       +1  7059     wr1:    clr             p1.7;P1.2
2CED 00         +1  7060                     nop 
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   110

2CEE 33         +1  7061                     rlc A
2CEF 9296       +1  7062                     mov P1.6,C;P1.1,C
2CF1 120000   F +1  7063                     call tim2
2CF4 D297       +1  7064                     setb P1.7;P1.2
2CF6 120000   F +1  7065             call tim2
2CF9 DAF0       +1  7066                     djnz R2,wr1
2CFB C296       +1  7067                     clr P1.6;P1.1
2CFD 22         +1  7068                     ret
                +1  7069     
                +1  7070     ;чтение номера байта с индикатора(2байта)
                +1  7071     ;bufind+8..bufind+9
                +1  7072     ;adec..adec+9
                +1  7073     ;ст            мл
2CFE 7847       +1  7074     upak1:  mov             r0,#bufind+7;
2D00 795C       +1  7075                     mov             r1,#adec+9
2D02 C3         +1  7076                     clr             c
2D03 E6         +1  7077                     mov             a,@r0
2D04 9430       +1  7078                     subb    a,#30h
2D06 FF         +1  7079                     mov             r7,a
2D07 C3         +1  7080                     clr             c
2D08 9405       +1  7081                     subb    a,#5
2D0A 4004       +1  7082                     jc              upk1
2D0C 7404       +1  7083                     mov             a,#4
2D0E 8001       +1  7084                     jmp             upk2
2D10 EF         +1  7085     upk1:   mov             a,r7
2D11 F7         +1  7086     upk2:   mov             @r1,a
2D12 22         +1  7087                     ret  
                +1  7088     ;r1-мл байт счетчика ячеек
2D13 C3         +1  7089     chminus: clr                    c
2D14 E7         +1  7090                     mov                     a,@r1
2D15 9401       +1  7091                     subb            a,#01
2D17 F7         +1  7092                     mov                     @r1,a;low
2D18 19         +1  7093                     dec                     r1
2D19 E7         +1  7094                     mov                     a,@r1
2D1A 9400       +1  7095                     subb            a,#00
2D1C F7         +1  7096                     mov                     @r1,a
2D1D 22         +1  7097                     ret
                +1  7098     
                +1  7099     
                +1  7100     ;чтение номера байта с индикатора(4байта)
                +1  7101     ;bufind+6..bufind+9
                +1  7102     ;adec..adec+9
                +1  7103     ;ст            мл
2D1E 7848       +1  7104     upak4:  mov             r0,#bufind+8;
2D20 795C       +1  7105                     mov             r1,#adec+9
2D22 7F04       +1  7106                     mov             r7,#4
2D24 C3         +1  7107     upaa:   clr             c
2D25 E6         +1  7108                     mov             a,@r0
2D26 9430       +1  7109                     subb    a,#30h
2D28 F7         +1  7110                     mov             @r1,a
2D29 18         +1  7111                     dec             r0
2D2A 19         +1  7112                     dec             r1
2D2B DFF7       +1  7113                     djnz    r7,upaa
2D2D 22         +1  7114                     ret
                +1  7115     
                +1  7116     ;dptr-адр ячейки 1й соотв блока 
2D2E E538       +1  7117     adrblok:        mov             a,nblok
2D30 C3         +1  7118                     clr             c
2D31 9401       +1  7119                     subb    a,#1
2D33 FD         +1  7120                     mov             r5,a
2D34 E4         +1  7121                     clr             a
2D35 FC         +1  7122                     mov             r4,a
2D36 FB         +1  7123                     mov             r3,a
2D37 FA         +1  7124                     mov             r2,a
2D38 900000   F +1  7125                     mov             dptr,#ch320h
2D3B 120000   F +1  7126                     CALL    ldc_ltemp                ; ltemp <-320
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   111

2D3E 120000   F +1  7127                     call    lmul;r2..r5
2D41 ED         +1  7128                     mov             a,r5
2D42 2450       +1  7129                     add             a,#50h
2D44 F582       +1  7130                     mov             dpl,a
2D46 EC         +1  7131                     mov             a,r4
2D47 3401       +1  7132                     addc    a,#01           
2D49 F583       +1  7133                     mov             dph,a                   ;dptr-
2D4B 22         +1  7134                     ret
                +1  7135     
                +1  7136     ;
                +1  7137     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2D4C E538       +1  7138     save_hl:        mov             a,nblok
2D4E B4011D     +1  7139                     cjne    a,#1,sa_hl1
2D51 79D3       +1  7140                     mov             r1,#saven_bl
2D53 E583       +1  7141     sa_hl:  mov             a,dph
2D55 F7         +1  7142                     mov             @r1,a
2D56 09         +1  7143                     inc             r1
2D57 E582       +1  7144                     mov             a,dpl
2D59 F7         +1  7145                     mov             @r1,a
                +1  7146             ;;;;;;;;;не конец ли блока
2D5A 79D6       +1  7147                     mov                     r1,#volume+1;work+1
2D5C 120000   F +1  7148                     call            chminus
2D5F 78D5       +1  7149                     mov             r0,#volume
2D61 E6         +1  7150                     mov             a,@r0
2D62 30E708     +1  7151                     jnb             acc.7,noendli
2D65 C20A       +1  7152                     clr                     bitbon                  ;блок закончился
2D67 534BFD     +1  7153                     anl                     bufind+11,#0fdh
2D6A 120000   F +1  7154                     call            ind
2D6D 22         +1  7155     noendli: ret
                +1  7156     
2D6E B40204     +1  7157     sa_hl1: cjne    a,#2,sa_hl2
2D71 79C0       +1  7158                     mov             r1,#saven_bl2
2D73 80DE       +1  7159                     jmp             sa_hl
                +1  7160     
2D75 B40304     +1  7161     sa_hl2: cjne    a,#3,sa_hl3
2D78 79C2       +1  7162                     mov             r1,#saven_bl3
2D7A 80D7       +1  7163                     jmp             sa_hl
2D7C 79D9       +1  7164     sa_hl3: mov             r1,#saven_bl4
2D7E 80D3       +1  7165                     jmp             sa_hl
                +1  7166     
                +1  7167     ;загрузка dptr сохр ранее значением адреса ячейки
2D80            +1  7168     resa_hl:
2D80 E538       +1  7169                     mov             a,nblok
2D82 B4010A     +1  7170                     cjne    a,#1,re_hl1
2D85 79D3       +1  7171                     mov             r1,#saven_bl;блок1 150h..46fh
2D87 E7         +1  7172     re_hl:  mov             a,@r1   
2D88 F583       +1  7173                     mov             dph,a
2D8A 09         +1  7174                     inc             r1
2D8B E7         +1  7175                     mov             a,@r1
2D8C F582       +1  7176                     mov             dpl,a
2D8E 22         +1  7177                     ret
                +1  7178     
2D8F B40204     +1  7179     re_hl1: cjne    a,#2,re_hl2
2D92 79C0       +1  7180                     mov             r1,#saven_bl2   ;блок2 470h..78fh
2D94 80F1       +1  7181                     jmp             re_hl
                +1  7182     
2D96 B40304     +1  7183     re_hl2: cjne    a,#3,re_hl3
2D99 79C2       +1  7184                     mov             r1,#saven_bl3   ;блок3 790h..aafh
2D9B 80EA       +1  7185                     jmp             re_hl
                +1  7186     
2D9D 79D9       +1  7187     re_hl3: mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
2D9F 80E6       +1  7188                     jmp             re_hl
                +1  7189     ;загрузка rez_A3 в соотв яч внешн озу
2DA1 789C       +1  7190     loA3_X: mov             r0,#rez_A3
2DA3 120000   F +1  7191                     call    resar2
2DA6 EA         +1  7192                     mov             a,r2                    ;
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   112

2DA7 F0         +1  7193                     movx    @dptr,a
2DA8 A3         +1  7194                     inc             dptr
2DA9 EB         +1  7195                     mov             a,r3
2DAA F0         +1  7196                     movx    @dptr,a
2DAB A3         +1  7197                     inc             dptr
2DAC EC         +1  7198                     mov             a,r4
2DAD F0         +1  7199                     movx    @dptr,a
2DAE A3         +1  7200                     inc             dptr
2DAF ED         +1  7201                     mov             a,r5
2DB0 F0         +1  7202                     movx    @dptr,a
2DB1 A3         +1  7203                     inc             dptr;адрес след ячейки внешн озу храним
2DB2 22         +1  7204                     ret             ;в ячейке saven_bl
                +1  7205     ;чтение в rez_A3 из соотв яч внешн озу
                +1  7206     
2DB3 E0         +1  7207     reA3_X: movx    a,@dptr
2DB4 FA         +1  7208                     mov             r2,a
2DB5 A3         +1  7209                     inc             dptr
2DB6 E0         +1  7210                     movx    a,@dptr
2DB7 FB         +1  7211                     mov             r3,a
2DB8 A3         +1  7212                     inc             dptr
2DB9 E0         +1  7213                     movx    a,@dptr
2DBA FC         +1  7214                     mov             r4,a
2DBB A3         +1  7215                     inc             dptr
2DBC E0         +1  7216                     movx    a,@dptr
2DBD FD         +1  7217                     mov             r5,a
2DBE A3         +1  7218                     inc             dptr
2DBF 789C       +1  7219                     mov             r0,#rez_A3
2DC1 120000   F +1  7220                     call    saver2
2DC4 22         +1  7221                     ret
                +1  7222     
                +1  7223     ;разбивка внешнего озу
                +1  7224     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  7225     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  7226     ;150h..46fh 1й блок
                +1  7227     ;470h..78fh     2й блок
                +1  7228     ;790h..aaf      3й блок
                +1  7229     ;ab0h..dcfh 4й блок
                +1  7230     ;dd0..fffh свободная область
                +1  7231     ;
                +1  7232     ;светодиоды и точки для индикатора
                +1  7233     ;такт
                +1  7234     ;измер
                +1  7235     ;avp
                +1  7236     ;нуль
                +1  7237     ;0,1s
                +1  7238     ;1s
                +1  7239     ;10s
                +1  7240     ;кмп
                +1  7241     ;память
                +1  7242     ;пуск
                    7243     
                    7244     ;$include (sarifm3.asm) 
                +1  7245     ; ” ©« SARIFM.ASM 8.11.95               ;файл арифметики
                +1  7246     
  0008          +1  7247     ltemp   equ       8           ;long temporary
  000C          +1  7248     xtemp   equ       12          ;other temporaries
  000A          +1  7249     DECSIZE EQU       10
  0004          +1  7250     NUMSIZE EQU       4
  0004          +1  7251     RR4             EQU       4
  0005          +1  7252     RR5             EQU       5
                +1  7253     
                +1  7254     ; rseg     ARIF ; Switch to this code segment.
                +1  7255     ; using    0    ; Specify register bank for the following program code.                    
                                            ; Arithmetics:  CLEARING string
                +1  7256     ; Input:
                +1  7257     ; R0 - pointer to string,
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   113

                +1  7258     ; NUMSIZE - byte count if CLRNUM used,
                +1  7259     ; DECSIZE - byte count if CLRDEC used,
                +1  7260     ; R2 - byte count if CLEAR used;
                +1  7261     ; Output:  none.
                +1  7262     
2DC5            +1  7263     CLRDEC:
2DC5 7A0A       +1  7264                 MOV R2, #DECSIZE
2DC7 8002       +1  7265                 SJMP    CLEAR
2DC9            +1  7266     CLRNUM:
2DC9 7A04       +1  7267                 MOV R2, #NUMSIZE
                +1  7268                 ;JMP    CLEAR
2DCB            +1  7269     CLEAR:
2DCB E4         +1  7270                 CLR A
2DCC F6         +1  7271     CLR11:  MOV @R0, A
2DCD 08         +1  7272                 INC R0
2DCE DAFC       +1  7273                 DJNZ    R2, CLR11
2DD0 22         +1  7274                 RET
                +1  7275     
                +1  7276     ;**********************************
                +1  7277     ;mov    r1,#abin+3
                +1  7278     ;mov    r0,#adec
                +1  7279     ; _ _ _ _
                +1  7280     ;     03ff
                +1  7281     ;ст     мл   - вход
                +1  7282     ; _ _ _ _ _ _ _ _ _ _
                +1  7283     ;             1 0 2 3
                +1  7284     ;ст                мл 
                +1  7285     ;**********************************
                +1  7286     
2DD1            +1  7287     BINDEC:
                +1  7288     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  7289     ; Input:
                +1  7290     ; R0 - pointer to destination (high digit is the first),
                +1  7291     ; R1 - pointer to source,
                +1  7292     ; NUMSIZE - byte count in binary number;
                +1  7293     ; DECSIZE - byte count in decimal number;
                +1  7294     ; Output:  none.
                +1  7295     ; Source saved
                +1  7296     
                +1  7297         ; 1. Clear result
2DD1 7A05       +1  7298         MOV R2, #DECSIZE/2
2DD3 120000   F +1  7299         CALL   CLEAR  ; incrementing R0
                +1  7300     
                +1  7301         ; 2. Prepare convertion
2DD6 18         +1  7302         DEC R0
2DD7 8804       +1  7303         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
2DD9 8905       +1  7304         MOV RR5, R1 ; R5 - pointer to low byte of binary number
2DDB 7B20       +1  7305         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  7306     
                +1  7307         ; 3. Convert cyrcle
2DDD            +1  7308     BIN30:
                +1  7309                 ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2DDD A905       +1  7310                 MOV R1, RR5
2DDF 7A04       +1  7311                 MOV R2, #NUMSIZE
2DE1 E7         +1  7312     BIN31:  MOV A, @R1
2DE2 33         +1  7313                 RLC A
2DE3 F7         +1  7314                 MOV @R1, A
2DE4 19         +1  7315                 DEC R1
2DE5 DAFA       +1  7316                 DJNZ    R2, BIN31
2DE7 A905       +1  7317                 MOV R1, RR5
2DE9 E7         +1  7318                 MOV A, @R1
2DEA 92E0       +1  7319                 MOV ACC.0, C
2DEC F7         +1  7320                 MOV @R1, A
                +1  7321      ; 3.2. Doubling decimal result with <Carry>
2DED A804       +1  7322                 MOV R0, RR4
2DEF 7A05       +1  7323                 MOV R2, #DECSIZE/2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   114

2DF1 E6         +1  7324     BIN32:  MOV A, @R0
2DF2 36         +1  7325                 ADDC    A, @R0
2DF3 D4         +1  7326                 DA  A
2DF4 F6         +1  7327                 MOV @R0, A
2DF5 18         +1  7328                 DEC R0
2DF6 DAF9       +1  7329                 DJNZ    R2, BIN32
                +1  7330     
                +1  7331       ; 3.3. End of convert cyrcle
2DF8 DBE3       +1  7332               DJNZ    R3, BIN30
                +1  7333     
                +1  7334         ; 4. Make bytes from half-bytes
2DFA E8         +1  7335                MOV A, R0
2DFB 240A       +1  7336                ADD A, #DECSIZE
2DFD F8         +1  7337                MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2DFE A904       +1  7338                MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2E00 7A05       +1  7339                MOV R2, #DECSIZE/2
2E02 E7         +1  7340     BIN41:  MOV A, @R1
2E03 540F       +1  7341                 ANL A, #00FH
2E05 F6         +1  7342                 MOV @R0, A
2E06 18         +1  7343                 DEC R0
2E07 E7         +1  7344                 MOV A, @R1
2E08 C4         +1  7345                 SWAP    A
2E09 540F       +1  7346                 ANL A, #00FH
2E0B F6         +1  7347                 MOV @R0, A
2E0C 18         +1  7348                 DEC R0
2E0D 19         +1  7349                 DEC R1
2E0E DAF2       +1  7350                 DJNZ    R2, BIN41
2E10 22         +1  7351                 RET
                +1  7352     
                +1  7353     
                +1  7354     ;*********************************
                +1  7355     ;mov    r0,#abin
                +1  7356     ;mov    r1,#adec
                +1  7357     ; _ _ _ _       -выход
                +1  7358     ; ff0000
                +1  7359     ;0004
                +1  7360     ;мл      ст
                +1  7361     
                +1  7362     ;ст                       мл
                +1  7363     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  7364     ;                       2 5 5
                +1  7365     ;                   1 0 2 4
                +1  7366     
2E11            +1  7367     DECBIN:
                +1  7368     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  7369     ; Input:
                +1  7370     ; R0 - pointer to destination,
                +1  7371     ; R1 - pointer to source (high digit is the first),
                +1  7372     ; NUMSIZE - byte count in binary number;
                +1  7373     ; DECSIZE - byte count in decimal number;
                +1  7374     ; Output:  none
                +1  7375     ; Source cleared
                +1  7376     
                +1  7377         ; 1. Clear result
2E11 120000   F +1  7378                 CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  7379     
                +1  7380         ; 2. Prepare convertion
2E14 18         +1  7381                 DEC R0
2E15 8804       +1  7382                 MOV RR4, R0 ; R4 - pointer to high byte of binary result
2E17 8905       +1  7383                 MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
2E19 900000   F +1  7384                 MOV DPTR, #DECT2
2E1C 7B20       +1  7385                 MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  7386     
                +1  7387         ; 3. Convert cyrcle
2E1E            +1  7388     DEC30:
                +1  7389         ; 3.1. Divide decimal number by 2 and prepare <Carry>
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   115

2E1E C3         +1  7390                 CLR C
2E1F A905       +1  7391                 MOV R1, RR5
2E21 7A0A       +1  7392                 MOV R2, #DECSIZE
2E23 E7         +1  7393     DEC31:  MOV A, @R1
2E24 540F       +1  7394                 ANL A, #00FH
2E26 92E4       +1  7395                 MOV ACC.4, C
2E28 93         +1  7396                 MOVC    A,@A+DPTR
2E29 F7         +1  7397                 MOV @R1, A
2E2A A2E7       +1  7398                 MOV C, ACC.7
2E2C 09         +1  7399                 INC R1
2E2D DAF4       +1  7400                 DJNZ    R2, DEC31
                +1  7401         ; 3.2. Rotate binary result one bit to right with <Carry>
2E2F A804       +1  7402                 MOV R0, RR4
2E31 7A04       +1  7403                 MOV R2, #NUMSIZE
2E33 E6         +1  7404     DEC32:  MOV A, @R0
2E34 13         +1  7405                 RRC A
2E35 F6         +1  7406                 MOV @R0, A
2E36 18         +1  7407                 DEC R0
2E37 DAFA       +1  7408                 DJNZ    R2, DEC32
                +1  7409     
                +1  7410         ; 3.3. End of convert cyrcle
2E39 DBE3       +1  7411                 DJNZ    R3, DEC30
2E3B 22         +1  7412                 RET
                +1  7413     
2E3C 00800181   +1  7414     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2E40 02820383                
2E44 0484                    
2E46 00000000   +1  7415                     DB  00,00,00,00,00,00
2E4A 0000                    
2E4C 05850686   +1  7416                     DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2E50 07870888                
2E54 0989                    
                +1  7417     
                +1  7418     ;   Long comparison
                +1  7419     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  7420     ;   flags and acc set as though a long subtraction was done.
                +1  7421     ;*******************************
                +1  7422     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  7423     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  7424     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  7425     ;*******************************
2E56            +1  7426     lcmp:
2E56 C3         +1  7427         clr c
2E57 EA         +1  7428         mov a,r2
2E58 9508       +1  7429         subb    a,8
2E5A 700F       +1  7430         jnz done
2E5C EB         +1  7431         mov a,r3
2E5D 9509       +1  7432         subb    a,9
2E5F 7008       +1  7433         jnz done1
2E61 EC         +1  7434         mov a,r4
2E62 950A       +1  7435         subb    a,10
2E64 7003       +1  7436         jnz done1
2E66 ED         +1  7437         mov a,r5
2E67 950B       +1  7438         subb    a,11
2E69            +1  7439     done1:
2E69 C2D2       +1  7440         clr ov      ;overflow is significant only for top byte
2E6B            +1  7441     done:
2E6B 22         +1  7442         ret
                +1  7443     
                +1  7444     ;   Load long into r2-5 from [dptr]
                +1  7445     
2E6C            +1  7446     ldc_long:
2E6C E583       +1  7447         mov a,dph       ;is it in on board memory
2E6E 6010       +1  7448         jz  onboard     ;yes
2E70 E4         +1  7449         clr a
2E71 93         +1  7450         movc    a,@a+dptr
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   116

2E72 FA         +1  7451         mov r2,a
2E73 7401       +1  7452         mov a,#1
2E75 93         +1  7453         movc    a,@a+dptr
2E76 FB         +1  7454         mov r3,a
2E77 7402       +1  7455         mov a,#2
2E79 93         +1  7456         movc    a,@a+dptr
2E7A FC         +1  7457         mov r4,a
2E7B 7403       +1  7458         mov a,#3
2E7D 93         +1  7459         movc    a,@a+dptr
2E7E FD         +1  7460         mov r5,a
2E7F 22         +1  7461         ret
2E80            +1  7462     onboard:
2E80 A882       +1  7463         mov r0,dpl
2E82 E6         +1  7464         mov a,@r0
2E83 FA         +1  7465         mov r2,a
2E84 08         +1  7466         inc r0
2E85 E6         +1  7467         mov a,@r0
2E86 FB         +1  7468         mov r3,a
2E87 08         +1  7469         inc r0
2E88 E6         +1  7470         mov a,@r0
2E89 FC         +1  7471         mov r4,a
2E8A 08         +1  7472         inc r0
2E8B E6         +1  7473         mov a,@r0
2E8C FD         +1  7474         mov r5,a
2E8D 22         +1  7475         ret
                +1  7476     
                +1  7477     ;**************************************
                +1  7478     ;загрузить ltemp...+3 из памяти программ
                +1  7479     ;mov    dptr,#CH5
                +1  7480     ;call   ldc_ltemp        ltemp <--5
                +1  7481     ;**************************************
2E8E            +1  7482     ldc_ltemp:
2E8E E583       +1  7483         mov a,dph       ;is it in on board memory
2E90 6014       +1  7484         jz  oboard      ;yes
2E92 E4         +1  7485         clr a
2E93 93         +1  7486         movc    a,@a+dptr
2E94 F508       +1  7487         mov 8,a
2E96 7401       +1  7488         mov a,#1
2E98 93         +1  7489         movc    a,@a+dptr
2E99 F509       +1  7490         mov 9,a
2E9B 7402       +1  7491         mov a,#2
2E9D 93         +1  7492         movc    a,@a+dptr
2E9E F50A       +1  7493         mov 10,a
2EA0 7403       +1  7494         mov a,#3
2EA2 93         +1  7495         movc    a,@a+dptr
2EA3 F50B       +1  7496         mov 11,a
2EA5 22         +1  7497         ret
2EA6            +1  7498     oboard:
2EA6 A882       +1  7499         mov r0,dpl
2EA8 8608       +1  7500         mov 8,@r0
2EAA 08         +1  7501         inc r0
2EAB 8609       +1  7502         mov 9,@r0
2EAD 08         +1  7503         inc r0
2EAE 860A       +1  7504         mov 10,@r0
2EB0 08         +1  7505         inc r0
2EB1 860B       +1  7506         mov 11,@r0
2EB3 22         +1  7507         ret
                +1  7508     
                +1  7509     ;*****************************
                +1  7510     ;mov    dptr,#k1
                +1  7511     ;call   ldx_long
                +1  7512     ;k1->r2..r5
                +1  7513     ;*****************************
                +1  7514     ;   Load long into r2-5 from [dptr]
                +1  7515     ;
                +1  7516     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   117

2EB4            +1  7517     ldx_long:
2EB4 E583       +1  7518         mov a,dph       ;is it in on board memory
2EB6 6014       +1  7519         jz  onboar1        ;yes
2EB8 C082       +1  7520         push    dpl
2EBA C083       +1  7521         push    dph
2EBC E0         +1  7522         movx    a,@dptr
2EBD FA         +1  7523         mov r2,a
2EBE A3         +1  7524         inc dptr
2EBF E0         +1  7525         movx    a,@dptr
2EC0 FB         +1  7526         mov r3,a
2EC1 A3         +1  7527         inc dptr
2EC2 E0         +1  7528         movx    a,@dptr
2EC3 FC         +1  7529         mov r4,a
2EC4 A3         +1  7530         inc dptr
2EC5 E0         +1  7531         movx    a,@dptr
2EC6 FD         +1  7532         mov r5,a
2EC7 D083       +1  7533         pop dph
2EC9 D082       +1  7534         pop dpl
2ECB 22         +1  7535         ret
2ECC            +1  7536     onboar1:
2ECC A882       +1  7537         mov r0,dpl
2ECE E6         +1  7538         mov a,@r0
2ECF FA         +1  7539         mov r2,a
2ED0 08         +1  7540         inc r0
2ED1 E6         +1  7541         mov a,@r0
2ED2 FB         +1  7542         mov r3,a
2ED3 08         +1  7543         inc r0
2ED4 E6         +1  7544         mov a,@r0
2ED5 FC         +1  7545         mov r4,a
2ED6 08         +1  7546         inc r0
2ED7 E6         +1  7547         mov a,@r0
2ED8 FD         +1  7548         mov r5,a
2ED9 22         +1  7549         ret
                +1  7550     
                +1  7551     ;*********************************
                +1  7552     ;mov    dptr,#k2
                +1  7553     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  7554     ;**********************************
2EDA            +1  7555     ldx_ltemp:
2EDA E583       +1  7556         mov a,dph       ;is it in on board memory
2EDC 6010       +1  7557         jz  oboard1     ;yes
2EDE E0         +1  7558         movx    a,@dptr
2EDF F508       +1  7559         mov 8,a
2EE1 A3         +1  7560         inc dptr
2EE2 E0         +1  7561         movx    a,@dptr
2EE3 F509       +1  7562         mov 9,a
2EE5 A3         +1  7563         inc dptr
2EE6 E0         +1  7564         movx    a,@dptr
2EE7 F50A       +1  7565         mov 10,a
2EE9 A3         +1  7566         inc dptr
2EEA E0         +1  7567         movx    a,@dptr
2EEB F50B       +1  7568         mov 11,a
2EED 22         +1  7569         ret
2EEE            +1  7570     oboard1:
2EEE A882       +1  7571         mov r0,dpl
2EF0 8608       +1  7572         mov 8,@r0
2EF2 08         +1  7573         inc r0
2EF3 8609       +1  7574         mov 9,@r0
2EF5 08         +1  7575         inc r0
2EF6 860A       +1  7576         mov 10,@r0
2EF8 08         +1  7577         inc r0
2EF9 860B       +1  7578         mov 11,@r0
2EFB 22         +1  7579         ret
                +1  7580     ;   Long division routines for 8051
                +1  7581     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  7582     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   118

                +1  7583     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  7584     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  7585     ;   r1 must be saved by the caller.
                +1  7586     ;   This is long unsigned division.
                +1  7587     
                +1  7588     
                +1  7589     ;   Register usage:
                +1  7590     ;       r0 loop counter
                +1  7591     ;       xtemp (12-15) accumulates quotient
                +1  7592     ;       r5-r2 holds dividend
                +1  7593     ;       ltemp holds divisor
                +1  7594     
                +1  7595     ;************************************
                +1  7596     ;r2..r5-делимое
                +1  7597     ;ltemp..-делитель
                +1  7598     ;частное -r2..r5
                +1  7599     ;*************************************
2EFC            +1  7600     divide:
2EFC E4         +1  7601         clr a
2EFD F8         +1  7602         mov r0,a        ;initialize count
2EFE F50C       +1  7603         mov xtemp,a     ;zero quotient
2F00 F50D       +1  7604         mov xtemp+1,a
2F02 F50E       +1  7605         mov xtemp+2,a
2F04 F50F       +1  7606         mov xtemp+3,a
2F06 ED         +1  7607         mov a,r5        ;check for zero dividend
2F07 4C         +1  7608         orl a,r4
2F08 4B         +1  7609         orl a,r3
2F09 4A         +1  7610         orl a,r2
2F0A 600B       +1  7611         jz  jfinis
2F0C E508       +1  7612         mov a,ltemp     ;check for zero divisor
2F0E 4509       +1  7613         orl a,ltemp+1
2F10 450A       +1  7614         orl a,ltemp+2
2F12 450B       +1  7615         orl a,ltemp+3
2F14 7037       +1  7616         jnz midl
2F16 22         +1  7617         ret
                +1  7618     
2F17 020000   F +1  7619     jfinis: jmp finis
                +1  7620     
2F1A            +1  7621     loops:
2F1A EA         +1  7622         mov a,r2
2F1B C3         +1  7623         clr c
2F1C 9508       +1  7624         subb    a,ltemp+0   ;is divisor greater than dividend yet
2F1E 4033       +1  7625         jc  yes     ;yes, go no further
2F20 7013       +1  7626         jnz no
2F22 EB         +1  7627         mov a,r3
2F23 9509       +1  7628         subb    a,ltemp+1
2F25 402C       +1  7629         jc  yes
2F27 700C       +1  7630         jnz no
2F29 EC         +1  7631         mov a,r4
2F2A 950A       +1  7632         subb    a,ltemp+2
2F2C 4025       +1  7633         jc  yes
2F2E 7005       +1  7634         jnz no
2F30 ED         +1  7635         mov a,r5
2F31 950B       +1  7636         subb    a,ltemp+3
2F33 401E       +1  7637         jc  yes
2F35            +1  7638     no:
2F35 E50B       +1  7639         mov a,ltemp+3   ;shift divisor up one bit
2F37 250B       +1  7640         add a,ltemp+3
2F39 F50B       +1  7641         mov ltemp+3,a
2F3B E50A       +1  7642         mov a,ltemp+2
2F3D 350A       +1  7643         addc    a,ltemp+2
2F3F F50A       +1  7644         mov ltemp+2,a
2F41 E509       +1  7645         mov a,ltemp+1
2F43 3509       +1  7646         addc    a,ltemp+1
2F45 F509       +1  7647         mov ltemp+1,a
2F47 E508       +1  7648         mov a,ltemp+0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   119

2F49 3508       +1  7649         addc    a,ltemp+0
2F4B F508       +1  7650         mov ltemp+0,a
2F4D            +1  7651     midl:
2F4D 08         +1  7652         inc r0      ;increment count
2F4E E508       +1  7653         mov a,ltemp+0   ;check for safe to shift some more
2F50 30E7C7     +1  7654         jnb acc.7,loops  ;loop if top bit clear
2F53            +1  7655     yes:
2F53 E508       +1  7656         mov a,ltemp+0
2F55 C3         +1  7657         clr c
2F56 9A         +1  7658         subb    a,r2        ;can we subtract now?
2F57 401A       +1  7659         jc  dosub       ;yes, go and do it
2F59 7015       +1  7660         jnz nosub
2F5B E509       +1  7661         mov a,ltemp+1
2F5D 9B         +1  7662         subb    a,r3
2F5E 4013       +1  7663         jc  dosub
2F60 700E       +1  7664         jnz nosub
2F62 E50A       +1  7665         mov a,ltemp+2
2F64 9C         +1  7666         subb    a,r4
2F65 400C       +1  7667         jc  dosub
2F67 7007       +1  7668         jnz nosub
2F69 E50B       +1  7669         mov a,ltemp+3
2F6B 9D         +1  7670         subb    a,r5
2F6C 4005       +1  7671         jc  dosub
2F6E 6003       +1  7672         jz  dosub
2F70            +1  7673     nosub:
2F70 C3         +1  7674         clr c
2F71 8012       +1  7675         sjmp    dosh
2F73            +1  7676     dosub:
2F73 C3         +1  7677         clr c       ;subtract divisor from dividend
2F74 ED         +1  7678         mov a,r5
2F75 950B       +1  7679         subb    a,ltemp+3
2F77 FD         +1  7680         mov r5,a
2F78 EC         +1  7681         mov a,r4
2F79 950A       +1  7682         subb    a,ltemp+2
2F7B FC         +1  7683         mov r4,a
2F7C EB         +1  7684         mov a,r3
2F7D 9509       +1  7685         subb    a,ltemp+1
2F7F FB         +1  7686         mov r3,a
2F80 EA         +1  7687         mov a,r2
2F81 9508       +1  7688         subb    a,ltemp+0
2F83 FA         +1  7689         mov r2,a
2F84 D3         +1  7690         setb    c       ;now set bit for quotient
2F85            +1  7691     dosh:
2F85 E50F       +1  7692         mov a,xtemp+3
2F87 33         +1  7693         rlc a
2F88 F50F       +1  7694         mov xtemp+3,a
2F8A E50E       +1  7695         mov a,xtemp+2
2F8C 33         +1  7696         rlc a
2F8D F50E       +1  7697         mov xtemp+2,a
2F8F E50D       +1  7698         mov a,xtemp+1
2F91 33         +1  7699         rlc a
2F92 F50D       +1  7700         mov xtemp+1,a
2F94 E50C       +1  7701         mov a,xtemp+0
2F96 33         +1  7702         rlc a
2F97 F50C       +1  7703         mov xtemp+0,a
2F99 E508       +1  7704         mov a,ltemp+0       ;shift divisor down
2F9B C3         +1  7705         clr c
2F9C 13         +1  7706         rrc a
2F9D F508       +1  7707         mov ltemp+0,a
2F9F E509       +1  7708         mov a,ltemp+1
2FA1 13         +1  7709         rrc a
2FA2 F509       +1  7710         mov ltemp+1,a
2FA4 E50A       +1  7711         mov a,ltemp+2
2FA6 13         +1  7712         rrc a
2FA7 F50A       +1  7713         mov ltemp+2,a
2FA9 E50B       +1  7714         mov a,ltemp+3
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   120

2FAB 13         +1  7715         rrc a
2FAC F50B       +1  7716         mov ltemp+3,a
                +1  7717     
2FAE D8A3       +1  7718         djnz    r0,yes      ;and continue with the rest
                +1  7719     
2FB0            +1  7720     finis:
2FB0 8D0B       +1  7721         mov ltemp+3,r5
2FB2 8C0A       +1  7722         mov ltemp+2,r4
2FB4 8B09       +1  7723         mov ltemp+1,r3
2FB6 8A08       +1  7724         mov ltemp+0,r2
2FB8 AD0F       +1  7725         mov r5,xtemp+3
2FBA AC0E       +1  7726         mov r4,xtemp+2
2FBC AB0D       +1  7727         mov r3,xtemp+1
2FBE AA0C       +1  7728         mov r2,xtemp+0
2FC0 22         +1  7729         ret         ;and return with the satisfaction of a job well done
                +1  7730     
                +1  7731     
                +1  7732     ;   Long multiplication
                +1  7733     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7734     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7735     
                +1  7736     ;**********************************
                +1  7737     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7738     ;ст  мл
                +1  7739     ;**********************************
2FC1            +1  7740     llmul:
2FC1            +1  7741     almul:
2FC1            +1  7742     lmul:
2FC1 ED         +1  7743         mov a,r5        ;low order byte
2FC2 850BF0     +1  7744         mov b,ltemp+3       ;times low order byte
2FC5 A4         +1  7745         mul ab
2FC6 F50F       +1  7746         mov xtemp+3,a       ;store low
2FC8 85F00E     +1  7747         mov xtemp+2,b   ;and high
2FCB ED         +1  7748         mov a,r5        ;low order
2FCC 850AF0     +1  7749         mov b,ltemp+2   ;times next
2FCF A4         +1  7750         mul ab
2FD0 250E       +1  7751         add a,xtemp+2   ;add in
2FD2 F50E       +1  7752         mov xtemp+2,a
2FD4 E5F0       +1  7753         mov a,b
2FD6 3400       +1  7754         addc    a,#0
2FD8 F50D       +1  7755         mov xtemp+1,a
2FDA ED         +1  7756         mov a,r5
2FDB 8509F0     +1  7757         mov b,ltemp+1
2FDE A4         +1  7758         mul ab
2FDF 250D       +1  7759         add a,xtemp+1
2FE1 F50D       +1  7760         mov xtemp+1,a
2FE3 E5F0       +1  7761         mov a,b
2FE5 3400       +1  7762         addc    a,#0
2FE7 F50C       +1  7763         mov xtemp+0,a
2FE9 ED         +1  7764         mov a,r5
2FEA 8508F0     +1  7765         mov b,ltemp+0
2FED A4         +1  7766         mul ab
2FEE 250C       +1  7767         add a,xtemp+0
2FF0 F50C       +1  7768         mov xtemp+0,a
2FF2 EC         +1  7769         mov a,r4
2FF3 850BF0     +1  7770         mov b,ltemp+3
2FF6 A4         +1  7771         mul ab
2FF7 250E       +1  7772         add a,xtemp+2
2FF9 F50E       +1  7773         mov xtemp+2,a
2FFB E5F0       +1  7774         mov a,b
2FFD 350D       +1  7775         addc    a,xtemp+1
2FFF F50D       +1  7776         mov xtemp+1,a
3001 E50C       +1  7777         mov a,xtemp+0
3003 3400       +1  7778         addc    a,#0
3005 F50C       +1  7779         mov xtemp+0,a
3007 EC         +1  7780         mov a,r4
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   121

3008 850AF0     +1  7781         mov b,ltemp+2
300B A4         +1  7782         mul ab
300C 250D       +1  7783         add a,xtemp+1
300E F50D       +1  7784         mov xtemp+1,a
3010 E5F0       +1  7785         mov a,b
3012 350C       +1  7786         addc    a,xtemp+0
3014 F50C       +1  7787         mov xtemp+0,a
3016 EC         +1  7788         mov a,r4
3017 8509F0     +1  7789         mov b,ltemp+1
301A A4         +1  7790         mul ab
301B 250C       +1  7791         add a,xtemp+0
301D F50C       +1  7792         mov xtemp+0,a
                +1  7793     
301F EB         +1  7794         mov a,r3
3020 850BF0     +1  7795         mov b,ltemp+3
3023 A4         +1  7796         mul ab
3024 250D       +1  7797         add a,xtemp+1
3026 F50D       +1  7798         mov xtemp+1,a
3028 E5F0       +1  7799         mov a,b
302A 350C       +1  7800         addc    a,xtemp+0
302C F50C       +1  7801         mov xtemp+0,a
302E EB         +1  7802         mov a,r3
302F 850AF0     +1  7803         mov b,ltemp+2
3032 A4         +1  7804         mul ab
3033 250C       +1  7805         add a,xtemp+0
3035 F50C       +1  7806         mov xtemp+0,a
                +1  7807     
3037 EA         +1  7808         mov a,r2
3038 850BF0     +1  7809         mov b,ltemp+3
303B A4         +1  7810         mul ab
303C 250C       +1  7811         add a,xtemp+0
303E FA         +1  7812         mov r2,a
303F AB0D       +1  7813         mov r3,xtemp+1
3041 AC0E       +1  7814         mov r4,xtemp+2
3043 AD0F       +1  7815         mov r5,xtemp+3
                +1  7816     
3045 22         +1  7817         ret         ;all done
                +1  7818     ;******************************
                +1  7819     ;из содержимого  r2-r5  вычесть
                +1  7820     ;содержимое          ltemp..ltemp+3
                +1  7821     ;******************************
3046            +1  7822     llsub:
3046            +1  7823      lsub:
3046 ED         +1  7824         mov a,r5
3047 C3         +1  7825         clr c
3048 950B       +1  7826         subb    a,11
304A FD         +1  7827         mov r5,a
304B EC         +1  7828         mov a,r4
304C 950A       +1  7829         subb    a,10
304E FC         +1  7830         mov r4,a
304F EB         +1  7831         mov a,r3
3050 9509       +1  7832         subb    a,9
3052 FB         +1  7833         mov r3,a
3053 EA         +1  7834         mov a,r2
3054 9508       +1  7835         subb    a,8
3056 FA         +1  7836         mov r2,a
3057 22         +1  7837         ret
                +1  7838     
                +1  7839     ;***********************************************
                +1  7840     ;                                                      ст мл
                +1  7841     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7842     ;  r0- адрес младшего байта !!!
                +1  7843     ;результат- r2..r5
                +1  7844     ;***********************************************
                +1  7845     
3058 C3         +1  7846     ladd:    clr       c
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   122

3059 ED         +1  7847          mov       a,r5
305A 26         +1  7848          add       a,@r0
305B FD         +1  7849          mov       r5,a
305C 18         +1  7850          dec       r0
305D EC         +1  7851          mov       a,r4
305E 36         +1  7852          addc      a,@r0
305F FC         +1  7853          mov       r4,a
3060 18         +1  7854          dec       r0
3061 EB         +1  7855          mov       a,r3
3062 36         +1  7856          addc      a,@r0
3063 FB         +1  7857          mov       r3,a
3064 18         +1  7858          dec       r0
3065 EA         +1  7859          mov       a,r2
3066 36         +1  7860          addc      a,@r0
3067 FA         +1  7861          mov       r2,a
3068 22         +1  7862          ret
                +1  7863     ;***********************************************
                +1  7864     ;                                                      ст мл
                +1  7865     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7866     ;  r0- адрес младшего байта !!!
                +1  7867     ;результат- r2..r5
                +1  7868     ;***********************************************
                +1  7869     
3069 C3         +1  7870     laddx:    clr       c
306A E2         +1  7871                                             movx            a,@r0
306B 2D         +1  7872                                             add                     a,r5
306C FD         +1  7873               mov     r5,a
306D 18         +1  7874                             dec     r0
306E E2         +1  7875                             movx    a,@r0
306F 3C         +1  7876                             addc    a,r4
3070 FC         +1  7877                             mov     r4,a
3071 18         +1  7878                             dec     r0
3072 E2         +1  7879                             movx    a,@r0
3073 3B         +1  7880                             addc    a,r3
3074 FB         +1  7881                             mov     r3,a
3075 18         +1  7882                             dec     r0
3076 E2         +1  7883                             movx    a,@r0
3077 3A         +1  7884                             addc    a,r2
3078 FA         +1  7885                             mov       r2,a
3079 22         +1  7886                             ret
                +1  7887     
                +1  7888     ;***********************************************
                +1  7889     ;                                                      ст мл
                +1  7890     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7891     ;  dptr- адрес младшего байта !!!
                +1  7892     ;результат- r2..r5
                +1  7893     ;***********************************************
                +1  7894     
307A C3         +1  7895     addx:    clr       c
307B E0         +1  7896                                             movx            a,@dptr
307C 2D         +1  7897                                             add                     a,r5
307D FD         +1  7898               mov     r5,a
307E 120000   F +1  7899                             call            dedptr;dec     dptr
3081 E0         +1  7900                             movx    a,@dptr
3082 3C         +1  7901                             addc    a,r4
3083 FC         +1  7902                             mov     r4,a
3084 120000   F +1  7903                             call            dedptr;dec     dptr
3087 E0         +1  7904                             movx    a,@dptr
3088 3B         +1  7905                             addc    a,r3
3089 FB         +1  7906                             mov     r3,a
308A 120000   F +1  7907                             call            dedptr;dec     dptr
308D E0         +1  7908                             movx    a,@dptr
308E 3A         +1  7909                             addc    a,r2
308F FA         +1  7910                             mov       r2,a
3090 22         +1  7911                             ret
                +1  7912     
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   123

3091 C0D0       +1  7913     dedptr:         push    psw
3093 C3         +1  7914                                             clr             c
3094 E582       +1  7915                                             mov             a,dpl
3096 9401       +1  7916                                             subb    a,#1
3098 F582       +1  7917                                             mov             dpl,a
309A E583       +1  7918                                             mov             a,dph
309C 9400       +1  7919                                             subb    a,#0
309E F583       +1  7920                                             mov             dph,a
30A0 D0D0       +1  7921                                             pop             psw
30A2 22         +1  7922                                             ret
                    7923     
                    7924     ;$include (floatm.asm)
                +1  7925     ;       Copyright (C) 1988 HI-TECH Software
                +1  7926     
                +1  7927     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7928     
                +1  7929     ;       The format of floating point numbers is as follows:
                +1  7930     
                +1  7931     ;       -----------------
                +1  7932     ;       *     sign      *  1 bit
                +1  7933     ;       -----------------
                +1  7934     ;       *   exponent    *  8 bits
                +1  7935     ;       -----------------
                +1  7936     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7937     ;       -----------------
                +1  7938     
                +1  7939     
                +1  7940     ;       As usual for the 8051 the memory layout has the most significant
                +1  7941     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7942     ;       lowest address.
                +1  7943     
                +1  7944     ;       Calling conventions:
                +1  7945     
                +1  7946     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7947     ;
                +1  7948     ;       Return value is in r2-r5
                +1  7949     
                +1  7950     ;       Naming conventions: A routine name is constructed by
                +1  7951     
                +1  7952     ;             ASOP
                +1  7953     
                +1  7954     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7955     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7956     ;       Conversion routines are named
                +1  7957     
                +1  7958     ;               AStof
                +1  7959     
                +1  7960     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7961     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7962     ;       Conversion from float to integer is ftol.
                +1  7963     
                +1  7964     ;               .ORG  5000h
                +1  7965     ;               .CODE
                +1  7966     ;       seg     c_text
                +1  7967     
                +1  7968     ;;      $MOD812
----            +1  7969             CSEG
                +1  7970     ;ORG 1000h
                +1  7971     
                +1  7972     ;PUBLIC flmul,fldiv,fladd,flsub,flcmp
                +1  7973     ;PUBLIC ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7974     
                +1  7975     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7976     ;       macros
                +1  7977     
                +1  7978     saveregs        macro
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   124

                +1  7979             push    7
                +1  7980             push    6
                +1  7981             push    1
                +1  7982             push    0
                +1  7983             endm
                +1  7984     
                +1  7985     restregs        macro
                +1  7986             pop     0
                +1  7987             pop     1
                +1  7988             pop     6
                +1  7989             pop     7
                +1  7990             endm
                +1  7991     
                +1  7992     ;addr   
                +1  7993     dan     macro   pad
                +1  7994             mov     a,r5
                +1  7995             add     a,pad+3
                +1  7996             mov     pad+3,a
                +1  7997             mov     a,pad+2
                +1  7998             addc    a,r4
                +1  7999             mov     pad+2,a
                +1  8000             mov     a,pad+1
                +1  8001             addc    a,r3
                +1  8002             mov     pad+1,a
                +1  8003             mov     a,pad+0
                +1  8004             addc    a,r2
                +1  8005             mov     pad,a
                +1  8006             endm
                +1  8007     
                +1  8008     addl    macro  addr
                +1  8009             mov     a,r5
                +1  8010             add     a,addr+3
                +1  8011             mov     r5,a
                +1  8012             mov     a,addr+2
                +1  8013             addc    a,r4
                +1  8014             mov     r4,a
                +1  8015             mov     a,addr+1
                +1  8016             addc    a,r3
                +1  8017             mov     r3,a
                +1  8018             mov     a,addr+0
                +1  8019             addc    a,r2
                +1  8020             mov     r2,a
                +1  8021             endm
                +1  8022     
                +1  8023     
                +1  8024     add1    macro
                +1  8025             mov     a,r5
                +1  8026             add     a,#1
                +1  8027             mov     r5,a
                +1  8028             clr     a
                +1  8029             addc    a,r4
                +1  8030             mov     r4,a
                +1  8031             clr     a
                +1  8032             addc    a,r3
                +1  8033             mov     r3,a
                +1  8034             clr     a
                +1  8035             addc    a,r2
                +1  8036             mov     r2,a
                +1  8037             endm
                +1  8038     
                +1  8039     shfdn   macro  addr
                +1  8040             clr     c
                +1  8041             mov     a,addr
                +1  8042             rrc     a
                +1  8043             mov     addr,a
                +1  8044             mov     a,addr+1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   125

                +1  8045             rrc     a
                +1  8046             mov     addr+1,a
                +1  8047             mov     a,addr+2
                +1  8048             rrc     a
                +1  8049             mov     addr+2,a
                +1  8050             mov     a,addr+3
                +1  8051             rrc     a
                +1  8052             mov     addr+3,a
                +1  8053             endm
                +1  8054     
                +1  8055     shfup   macro  addr
                +1  8056             clr     c
                +1  8057             mov     a,addr+3
                +1  8058             rlc     a
                +1  8059             mov     addr+3,a
                +1  8060             mov     a,addr+2
                +1  8061             rlc     a
                +1  8062             mov     addr+2,a
                +1  8063             mov     a,addr+1
                +1  8064             rlc     a
                +1  8065             mov     addr+1,a
                +1  8066             mov     a,addr
                +1  8067             rlc     a
                +1  8068             mov     addr,a
                +1  8069             endm
                +1  8070     
                +1  8071     rshift  macro
                +1  8072             clr     c
                +1  8073             mov     a,r2
                +1  8074             rrc     a
                +1  8075             mov     r2,a
                +1  8076             mov     a,r3
                +1  8077             rrc     a
                +1  8078             mov     r3,a
                +1  8079             mov     a,r4
                +1  8080             rrc     a
                +1  8081             mov     r4,a
                +1  8082             mov     a,r5
                +1  8083             rrc     a
                +1  8084             mov     r5,a
                +1  8085             endm
                +1  8086     rshift1 macro
                +1  8087             setb    c
                +1  8088             mov     a,r2
                +1  8089             rrc     a
                +1  8090             mov     r2,a
                +1  8091             mov     a,r3
                +1  8092             rrc     a
                +1  8093             mov     r3,a
                +1  8094             mov     a,r4
                +1  8095             rrc     a
                +1  8096             mov     r4,a
                +1  8097             mov     a,r5
                +1  8098             rrc     a
                +1  8099             mov     r5,a
                +1  8100             endm
                +1  8101     
                +1  8102     
                +1  8103     lshift  macro
                +1  8104             mov     a,r5
                +1  8105             rlc     a
                +1  8106             mov     r5,a
                +1  8107             mov     a,r4
                +1  8108             rlc     a
                +1  8109             mov     r4,a
                +1  8110             mov     a,r3
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   126

                +1  8111             rlc     a
                +1  8112             mov     r3,a
                +1  8113             mov     a,r2
                +1  8114             rlc     a
                +1  8115             mov     r2,a
                +1  8116             endm
                +1  8117     
                +1  8118     neg1    macro
                +1  8119             clr     c
                +1  8120             clr     a
                +1  8121             subb    a,r5
                +1  8122             mov     r5,a
                +1  8123             clr     a
                +1  8124             subb    a,r4
                +1  8125             mov     r4,a
                +1  8126             clr     a
                +1  8127             subb    a,r3
                +1  8128             mov     r3,a
                +1  8129             clr     a
                +1  8130             subb    a,r2
                +1  8131             mov     r2,a
                +1  8132             endm
                +1  8133     
                +1  8134     negm    macro  addr
                +1  8135             clr     c
                +1  8136             clr     a
                +1  8137             subb    a,addr+3
                +1  8138             mov     addr+3,a
                +1  8139             clr     a
                +1  8140             subb    a,addr+2
                +1  8141             mov     addr+2,a
                +1  8142             clr     a
                +1  8143             subb    a,addr+1
                +1  8144             mov     addr+1,a
                +1  8145             clr     a
                +1  8146             subb    a,addr
                +1  8147             mov     addr,a
                +1  8148             endm
                +1  8149     
                +1  8150     copytor macro  addr
                +1  8151             mov     r2,addr
                +1  8152             mov     r3,addr+1
                +1  8153             mov     r4,addr+2
                +1  8154             mov     r5,addr+3
                +1  8155             endm
                +1  8156     
                +1  8157     
                +1  8158     copyrto macro  addr
                +1  8159             mov     addr,r2
                +1  8160             mov     addr+1,r3
                +1  8161             mov     addr+2,r4
                +1  8162             mov     addr+3,r5
                +1  8163             endm
                +1  8164     
                +1  8165     
                +1  8166     ;       Internal representation: in this set of routines a floating number
                +1  8167     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  8168     
                +1  8169     ;       Stack offset values
                +1  8170     ;ltemp   equ     28h
                +1  8171     
  0006          +1  8172     cntr    equ     6               ;r6 is the counter
  0007          +1  8173     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  8174     exp1    equ     0               ;exponent 1 in r0
  0002          +1  8175     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  8176     exp2    equ     1               ;exponent 1 in r1
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   127

  0008          +1  8177     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  8178     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  8179     
                +1  8180     
                +1  8181     
                +1  8182     
                +1  8183     
                +1  8184     ;DECSIZE        EQU      10
                +1  8185     ;NUMSIZE        EQU      4
                +1  8186     ;RR4            EQU      4
                +1  8187     ;RR5            EQU      5
                +1  8188     
                +1  8189     ;       unpack1 - unpacks the left operand
                +1  8190     
009E            +1  8191     unpack1:
009E EA         +1  8192             mov     a,r2            ;get sign
009F 5480       +1  8193             anl     a,#80h
00A1 530740     +1  8194             anl     sign,#40h       ;clear other bits
00A4 4207       +1  8195             orl     sign,a          ;store sign
00A6 EB         +1  8196             mov     a,r3            ;get lsb of exponent
00A7 33         +1  8197             rlc     a               ;rotate into carry
00A8 EA         +1  8198             mov     a,r2            ;get rest of exponent
00A9 33         +1  8199             rlc     a               ;and make it 8 bits
00AA F8         +1  8200             mov     r0,a            ;store it
00AB 6006       +1  8201             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  8202             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  8203             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  8204             ret
00B3            +1  8205     zer1:
00B3 E4         +1  8206             clr     a
00B4 FA         +1  8207             mov     r2,a
00B5 FB         +1  8208             mov     r3,a
00B6 FC         +1  8209             mov     r4,a
00B7 FD         +1  8210             mov     r5,a            ;zero mantissa
00B8 F8         +1  8211             mov     r0,a            ;zero exponent
00B9 22         +1  8212             ret
                +1  8213     
                +1  8214     ;       unpack2 - unpacks right operand
                +1  8215     
00BA            +1  8216     unpack2:
00BA E508       +1  8217             mov     a,ltemp         ;get sign
00BC 13         +1  8218             rrc     a               ;shift down
00BD 5440       +1  8219             anl     a,#40h          ;mask out sign
00BF 530780     +1  8220             anl     sign,#80h       ;clear old bit
00C2 4207       +1  8221             orl     sign,a
00C4 E509       +1  8222             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  8223             rlc     a               ;rotate into carry
00C7 E508       +1  8224             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  8225             rlc     a               ;and make it 8 bits
00CA F9         +1  8226             mov     r1,a            ;store it
00CB 6007       +1  8227             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  8228             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  8229             mov     mant2,#0        ;clear upper byte
00D3 22         +1  8230             ret
00D4            +1  8231     zer2:
00D4 E4         +1  8232             clr     a
00D5 F508       +1  8233             mov     ltemp,a
00D7 F509       +1  8234             mov     ltemp+1,a
00D9 F50A       +1  8235             mov     ltemp+2,a
00DB F50B       +1  8236             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  8237             ret
                +1  8238     
                +1  8239     ;       pack1 - put operand 1 back into float format
                +1  8240     
00DE            +1  8241     pack1:
00DE E8         +1  8242             mov     a,r0            ;get exponent
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   128

00DF C3         +1  8243             clr     c
00E0 13         +1  8244             rrc     a               ;shift down 1 bit
00E1 530780     +1  8245             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  8246             orl     a,r7            ;or in sign bit
00E5 FA         +1  8247             mov     r2,a            ;store
00E6 E8         +1  8248             mov     a,r0            ;get other bit
00E7 03         +1  8249             rr      a               ;rotate into hi bit
00E8 5480       +1  8250             anl     a,#80h          ;mask
00EA 53037F     +1  8251             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  8252             orl     mant1+1,a       ;put in
00EF 22         +1  8253             ret
                +1  8254     
                +1  8255     
                +1  8256     ;       norm1 - normalize the unpacked value in 1
                +1  8257     
00F0            +1  8258     norm1:
00F0 E8         +1  8259             mov     a,r0            ;get exponent
00F1 60C0       +1  8260             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  8261             mov     a,r2            ;get hi byte
00F4 6023       +1  8262             jz      norup           ;zero, so shift up if anything
00F6            +1  8263     nordn:
00F6 EA         +1  8264             mov     a,r2            ;get hi byte
00F7 B4010D     +1  8265             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  8266+3           add1                    ;add in a rounding bit
00FA ED         +1  8267+1           mov     a,r5
00FB 2401       +1  8268+1           add     a,#1
00FD FD         +1  8269+1           mov     r5,a
00FE E4         +1  8270+1           clr     a
00FF 3C         +1  8271+1           addc    a,r4
0100 FC         +1  8272+1           mov     r4,a
0101 E4         +1  8273+1           clr     a
0102 3B         +1  8274+1           addc    a,r3
0103 FB         +1  8275+1           mov     r3,a
0104 E4         +1  8276+1           clr     a
0105 3A         +1  8277+1           addc    a,r2
0106 FA         +1  8278+1           mov     r2,a
0107            +1  8279     nordn1:
                +1  8280+3           rshift                  ;shift down 1 bit
0107 C3         +1  8281+1           clr     c
0108 EA         +1  8282+1           mov     a,r2
0109 13         +1  8283+1           rrc     a
010A FA         +1  8284+1           mov     r2,a
010B EB         +1  8285+1           mov     a,r3
010C 13         +1  8286+1           rrc     a
010D FB         +1  8287+1           mov     r3,a
010E EC         +1  8288+1           mov     a,r4
010F 13         +1  8289+1           rrc     a
0110 FC         +1  8290+1           mov     r4,a
0111 ED         +1  8291+1           mov     a,r5
0112 13         +1  8292+1           rrc     a
0113 FD         +1  8293+1           mov     r5,a
0114 08         +1  8294             inc     r0              ;adjust exponent
0115 EA         +1  8295             mov     a,r2            ;test high byte
0116 70DE       +1  8296             jnz     nordn           ;loop
0118 22         +1  8297             ret                     ;done
                +1  8298     
0119            +1  8299     norup:
0119 4B         +1  8300             orl     a,r3
011A 4C         +1  8301             orl     a,r4
011B 4D         +1  8302             orl     a,r5            ;test for zero mantissa
011C 6095       +1  8303             jz      zer1            ;it is - make it true zero
011E            +1  8304     norup1:
011E EB         +1  8305             mov     a,r3            ;get mantissa byte
011F 20E710     +1  8306             jb      acc.7,norup2    ;jump if set
0122 C3         +1  8307             clr     c
                +1  8308+3           lshift                  ;shift mantissa up
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   129

0123 ED         +1  8309+1           mov     a,r5
0124 33         +1  8310+1           rlc     a
0125 FD         +1  8311+1           mov     r5,a
0126 EC         +1  8312+1           mov     a,r4
0127 33         +1  8313+1           rlc     a
0128 FC         +1  8314+1           mov     r4,a
0129 EB         +1  8315+1           mov     a,r3
012A 33         +1  8316+1           rlc     a
012B FB         +1  8317+1           mov     r3,a
012C EA         +1  8318+1           mov     a,r2
012D 33         +1  8319+1           rlc     a
012E FA         +1  8320+1           mov     r2,a
012F 18         +1  8321             dec     r0              ;adjust exponent
0130 80EC       +1  8322             jmp     norup1
0132            +1  8323     norup2:
0132 22         +1  8324             ret                     ;finito
                +1  8325     
                +1  8326     
                +1  8327     ;       fpdenorm - denormalize one of the two operands so that their
                +1  8328     ;       exponents are equal. This requires the smaller number to have
                +1  8329     ;       its exponent incremented and its mantissa shifted right.
                +1  8330     
0133            +1  8331     denorm:
0133 E8         +1  8332             mov     a,r0
0134 C3         +1  8333             clr     c
0135 99         +1  8334             subb    a,r1            ;compare exponents
0136 5029       +1  8335             jnc     up2a            ;shift operand 2
0138            +1  8336     up1:
0138 08         +1  8337             inc     r0              ;increment exponent
                +1  8338+3           rshift                  ;shift mantissa down
0139 C3         +1  8339+1           clr     c
013A EA         +1  8340+1           mov     a,r2
013B 13         +1  8341+1           rrc     a
013C FA         +1  8342+1           mov     r2,a
013D EB         +1  8343+1           mov     a,r3
013E 13         +1  8344+1           rrc     a
013F FB         +1  8345+1           mov     r3,a
0140 EC         +1  8346+1           mov     a,r4
0141 13         +1  8347+1           rrc     a
0142 FC         +1  8348+1           mov     r4,a
0143 ED         +1  8349+1           mov     a,r5
0144 13         +1  8350+1           rrc     a
0145 FD         +1  8351+1           mov     r5,a
0146 E8         +1  8352             mov     a,r0
0147 B501EE     +1  8353             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  8354             ret
                +1  8355     
014B            +1  8356     up2:
014B 09         +1  8357             inc     r1              ;increment exponent 2
                +1  8358+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  8359+1           clr     c
014D E508       +1  8360+1           mov     a,mant2
014F 13         +1  8361+1           rrc     a
0150 F508       +1  8362+1           mov     mant2,a
0152 E509       +1  8363+1           mov     a,mant2+1
0154 13         +1  8364+1           rrc     a
0155 F509       +1  8365+1           mov     mant2+1,a
0157 E50A       +1  8366+1           mov     a,mant2+2
0159 13         +1  8367+1           rrc     a
015A F50A       +1  8368+1           mov     mant2+2,a
015C E50B       +1  8369+1           mov     a,mant2+3
015E 13         +1  8370+1           rrc     a
015F F50B       +1  8371+1           mov     mant2+3,a
0161            +1  8372     up2a:
0161 E8         +1  8373             mov     a,r0            ;compare exponents
0162 B501E6     +1  8374             cjne    a,exp2,up2
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   130

0165 22         +1  8375             ret                     ;all done
                +1  8376     ;------------------------------------------------------------------
                +1  8377     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  8378     
0166            +1  8379     fladd:
                +1  8380+3           saveregs
0166 C007       +1  8381+1           push    7
0168 C006       +1  8382+1           push    6
016A C001       +1  8383+1           push    1
016C C000       +1  8384+1           push    0
016E 119E       +1  8385             call    unpack1
0170 11BA       +1  8386             call    unpack2
0172 3133       +1  8387             call    denorm
0174 E507       +1  8388             mov     a,sign
0176 30E70D     +1  8389             jnb     acc.7,ok1       ;test left sign
                +1  8390+3           neg1                    ;negate op1
0179 C3         +1  8391+1           clr     c
017A E4         +1  8392+1           clr     a
017B 9D         +1  8393+1           subb    a,r5
017C FD         +1  8394+1           mov     r5,a
017D E4         +1  8395+1           clr     a
017E 9C         +1  8396+1           subb    a,r4
017F FC         +1  8397+1           mov     r4,a
0180 E4         +1  8398+1           clr     a
0181 9B         +1  8399+1           subb    a,r3
0182 FB         +1  8400+1           mov     r3,a
0183 E4         +1  8401+1           clr     a
0184 9A         +1  8402+1           subb    a,r2
0185 FA         +1  8403+1           mov     r2,a
0186            +1  8404     ok1:
0186 E507       +1  8405             mov     a,sign
0188 30E615     +1  8406             jnb     acc.6,ok2       ;test right sign
                +1  8407+3           negm    mant2           ;negate op2
018B C3         +1  8408+1           clr     c
018C E4         +1  8409+1           clr     a
018D 950B       +1  8410+1           subb    a,mant2+3
018F F50B       +1  8411+1           mov     mant2+3,a
0191 E4         +1  8412+1           clr     a
0192 950A       +1  8413+1           subb    a,mant2+2
0194 F50A       +1  8414+1           mov     mant2+2,a
0196 E4         +1  8415+1           clr     a
0197 9509       +1  8416+1           subb    a,mant2+1
0199 F509       +1  8417+1           mov     mant2+1,a
019B E4         +1  8418+1           clr     a
019C 9508       +1  8419+1           subb    a,mant2
019E F508       +1  8420+1           mov     mant2,a
01A0            +1  8421     ok2:
                +1  8422+3           addl    mant2           ;add mantissas
01A0 ED         +1  8423+1           mov     a,r5
01A1 250B       +1  8424+1           add     a,mant2+3
01A3 FD         +1  8425+1           mov     r5,a
01A4 E50A       +1  8426+1           mov     a,mant2+2
01A6 3C         +1  8427+1           addc    a,r4
01A7 FC         +1  8428+1           mov     r4,a
01A8 E509       +1  8429+1           mov     a,mant2+1
01AA 3B         +1  8430+1           addc    a,r3
01AB FB         +1  8431+1           mov     r3,a
01AC E508       +1  8432+1           mov     a,mant2+0
01AE 3A         +1  8433+1           addc    a,r2
01AF FA         +1  8434+1           mov     r2,a
01B0 E4         +1  8435             clr     a
01B1 FF         +1  8436             mov     r7,a            ;clear sign
01B2 EA         +1  8437             mov     a,r2            ;get sign of result
01B3 30E70E     +1  8438             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  8439             mov     r7,a            ;store sign
                +1  8440+3           neg1                    ;negate mantissa
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   131

01B7 C3         +1  8441+1           clr     c
01B8 E4         +1  8442+1           clr     a
01B9 9D         +1  8443+1           subb    a,r5
01BA FD         +1  8444+1           mov     r5,a
01BB E4         +1  8445+1           clr     a
01BC 9C         +1  8446+1           subb    a,r4
01BD FC         +1  8447+1           mov     r4,a
01BE E4         +1  8448+1           clr     a
01BF 9B         +1  8449+1           subb    a,r3
01C0 FB         +1  8450+1           mov     r3,a
01C1 E4         +1  8451+1           clr     a
01C2 9A         +1  8452+1           subb    a,r2
01C3 FA         +1  8453+1           mov     r2,a
01C4            +1  8454     ok3:
01C4 11F0       +1  8455             call    norm1
01C6 11DE       +1  8456             call    pack1           ;pack normalized result
                +1  8457+3           restregs                ;and return
01C8 D000       +1  8458+1           pop     0
01CA D001       +1  8459+1           pop     1
01CC D006       +1  8460+1           pop     6
01CE D007       +1  8461+1           pop     7
01D0 22         +1  8462             ret
                +1  8463     ;-------------------------------------------------------------
                +1  8464     ;       Subtract the number ltemp from the number in r2-r5
                +1  8465     
01D1            +1  8466     flsub:
01D1 630880     +1  8467             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  8468             jmp     fladd           ;and add!
                +1  8469     
                +1  8470     ;================================================================
                +1  8471     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  8472     
01D6            +1  8473     flcmp:
01D6 EA         +1  8474            mov     a,r2            ;get sign of left
01D7 6508       +1  8475            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  8476            jnb     acc.7,cexp      ;same, go check exponent
                +1  8477     ;ifdef SMALL_MODEL
01DC EA         +1  8478             mov     a,r2            ;get sign of left again
01DD 33         +1  8479             rlc     a
01DE 5001       +1  8480             jnc     flout
                +1  8481     ;endif
01E0 D3         +1  8482             setb    c
01E1 22         +1  8483     flout:          ret                    ;return with acc < 0
                +1  8484     
01E2            +1  8485     cexp:
01E2 C3         +1  8486            clr     c
01E3 EA         +1  8487            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  8488            subb    a,ltemp
01E6 7010       +1  8489            jnz     fnd
01E8 EB         +1  8490            mov     a,r3
01E9 9509       +1  8491            subb    a,ltemp+1
01EB 700B       +1  8492            jnz     fnd
01ED EC         +1  8493            mov     a,r4
01EE 950A       +1  8494            subb    a,ltemp+2
01F0 7006       +1  8495            jnz     fnd
01F2 ED         +1  8496            mov     a,r5
01F3 950B       +1  8497            subb    a,ltemp+3
01F5 7001       +1  8498            jnz     fnd
01F7            +1  8499     cdone:
01F7 22         +1  8500            ret                     ;return with acc == 0
01F8            +1  8501     fnd:
01F8 8AF0       +1  8502           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  8503          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  8504            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  8505                         orl         a,#1                          ;make non-zero
0201 B3         +1  8506             cpl     c               ;c=0->1,c=1->0
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   132

0202 22         +1  8507             ret
                +1  8508     ;==============================================================
                +1  8509     
                +1  8510     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  8511     ;       the result in r2-r5
                +1  8512     
0203            +1  8513     flmul:
                +1  8514+3           saveregs
0203 C007       +1  8515+1           push    7
0205 C006       +1  8516+1           push    6
0207 C001       +1  8517+1           push    1
0209 C000       +1  8518+1           push    0
020B 119E       +1  8519             call    unpack1
020D 11BA       +1  8520             call    unpack2
020F E4         +1  8521             clr     a
0210 F50C       +1  8522             mov     prod,a
0212 F50D       +1  8523             mov     prod+1,a        ;clear product
0214 F50E       +1  8524             mov     prod+2,a
0216 F50F       +1  8525             mov     prod+3,a
0218 7E07       +1  8526             mov     r6,#7           ;initialize counter
021A            +1  8527     mup1:
                +1  8528+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  8529+1           clr     c
021B E508       +1  8530+1           mov     a,mant2
021D 13         +1  8531+1           rrc     a
021E F508       +1  8532+1           mov     mant2,a
0220 E509       +1  8533+1           mov     a,mant2+1
0222 13         +1  8534+1           rrc     a
0223 F509       +1  8535+1           mov     mant2+1,a
0225 E50A       +1  8536+1           mov     a,mant2+2
0227 13         +1  8537+1           rrc     a
0228 F50A       +1  8538+1           mov     mant2+2,a
022A E50B       +1  8539+1           mov     a,mant2+3
022C 13         +1  8540+1           rrc     a
022D F50B       +1  8541+1           mov     mant2+3,a
022F 5014       +1  8542             jnc     nobit           ;skip if lsb was zero
                +1  8543+3           dan     prod            ;add multiplicand to product
0231 ED         +1  8544+1           mov     a,r5
0232 250F       +1  8545+1           add     a,prod+3
0234 F50F       +1  8546+1           mov     prod+3,a
0236 E50E       +1  8547+1           mov     a,prod+2
0238 3C         +1  8548+1           addc    a,r4
0239 F50E       +1  8549+1           mov     prod+2,a
023B E50D       +1  8550+1           mov     a,prod+1
023D 3B         +1  8551+1           addc    a,r3
023E F50D       +1  8552+1           mov     prod+1,a
0240 E50C       +1  8553+1           mov     a,prod+0
0242 3A         +1  8554+1           addc    a,r2
0243 F50C       +1  8555+1           mov     prod,a
0245            +1  8556     nobit:
                +1  8557+3           lshift                  ;shift multiplicand up
0245 ED         +1  8558+1           mov     a,r5
0246 33         +1  8559+1           rlc     a
0247 FD         +1  8560+1           mov     r5,a
0248 EC         +1  8561+1           mov     a,r4
0249 33         +1  8562+1           rlc     a
024A FC         +1  8563+1           mov     r4,a
024B EB         +1  8564+1           mov     a,r3
024C 33         +1  8565+1           rlc     a
024D FB         +1  8566+1           mov     r3,a
024E EA         +1  8567+1           mov     a,r2
024F 33         +1  8568+1           rlc     a
0250 FA         +1  8569+1           mov     r2,a
0251 DEC7       +1  8570             djnz    r6,mup1         ;loop if more
                +1  8571     
0253 7E11       +1  8572             mov     r6,#17          ;re-initalize counter
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   133

0255 8015       +1  8573             sjmp    mup3
0257            +1  8574     mup11:
                +1  8575+3           shfdn   prod            ;shift product right
0257 C3         +1  8576+1           clr     c
0258 E50C       +1  8577+1           mov     a,prod
025A 13         +1  8578+1           rrc     a
025B F50C       +1  8579+1           mov     prod,a
025D E50D       +1  8580+1           mov     a,prod+1
025F 13         +1  8581+1           rrc     a
0260 F50D       +1  8582+1           mov     prod+1,a
0262 E50E       +1  8583+1           mov     a,prod+2
0264 13         +1  8584+1           rrc     a
0265 F50E       +1  8585+1           mov     prod+2,a
0267 E50F       +1  8586+1           mov     a,prod+3
0269 13         +1  8587+1           rrc     a
026A F50F       +1  8588+1           mov     prod+3,a
026C            +1  8589     mup3:
                +1  8590+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  8591+1           clr     c
026D E508       +1  8592+1           mov     a,mant2
026F 13         +1  8593+1           rrc     a
0270 F508       +1  8594+1           mov     mant2,a
0272 E509       +1  8595+1           mov     a,mant2+1
0274 13         +1  8596+1           rrc     a
0275 F509       +1  8597+1           mov     mant2+1,a
0277 E50A       +1  8598+1           mov     a,mant2+2
0279 13         +1  8599+1           rrc     a
027A F50A       +1  8600+1           mov     mant2+2,a
027C E50B       +1  8601+1           mov     a,mant2+3
027E 13         +1  8602+1           rrc     a
027F F50B       +1  8603+1           mov     mant2+3,a
0281 5014       +1  8604             jnc     mup2            ;skip if bit not set
                +1  8605+3           dan     prod            ;add to prod
0283 ED         +1  8606+1           mov     a,r5
0284 250F       +1  8607+1           add     a,prod+3
0286 F50F       +1  8608+1           mov     prod+3,a
0288 E50E       +1  8609+1           mov     a,prod+2
028A 3C         +1  8610+1           addc    a,r4
028B F50E       +1  8611+1           mov     prod+2,a
028D E50D       +1  8612+1           mov     a,prod+1
028F 3B         +1  8613+1           addc    a,r3
0290 F50D       +1  8614+1           mov     prod+1,a
0292 E50C       +1  8615+1           mov     a,prod+0
0294 3A         +1  8616+1           addc    a,r2
0295 F50C       +1  8617+1           mov     prod,a
0297            +1  8618     mup2:
0297 DEBE       +1  8619             djnz    r6,mup11        ;loop if more
0299 E8         +1  8620             mov     a,r0            ;get exp1
029A 29         +1  8621             add     a,r1            ;add exp2
029B 247A       +1  8622             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8623             mov     r0,a            ;store
029E EF         +1  8624             mov     a,r7            ;get sign
029F 23         +1  8625             rl      a               ;rotate bit into msb
02A0 6207       +1  8626             xrl     sign,a          ;xor with other bit
                +1  8627+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8628+1           mov     r2,prod
02A4 AB0D       +1  8629+1           mov     r3,prod+1
02A6 AC0E       +1  8630+1           mov     r4,prod+2
02A8 AD0F       +1  8631+1           mov     r5,prod+3
02AA 11F0       +1  8632             call    norm1           ;normalize
02AC 11DE       +1  8633             call    pack1
                +1  8634+3           restregs
02AE D000       +1  8635+1           pop     0
02B0 D001       +1  8636+1           pop     1
02B2 D006       +1  8637+1           pop     6
02B4 D007       +1  8638+1           pop     7
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   134

02B6 22         +1  8639             ret
                +1  8640     ;-----------------------------------------------------------
                +1  8641     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8642     
02B7            +1  8643     fldiv:
                +1  8644+3           saveregs
02B7 C007       +1  8645+1           push    7
02B9 C006       +1  8646+1           push    6
02BB C001       +1  8647+1           push    1
02BD C000       +1  8648+1           push    0
02BF 119E       +1  8649             call    unpack1
02C1 11BA       +1  8650             call    unpack2
02C3 E4         +1  8651             clr     a
02C4 F50C       +1  8652             mov     prod,a
02C6 F50D       +1  8653             mov     prod+1,a
02C8 F50E       +1  8654             mov     prod+2,a
02CA F50F       +1  8655             mov     prod+3,a
02CC E9         +1  8656             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8657             jz      div9
02CF E8         +1  8658             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8659             jz      div9
02D2 C3         +1  8660             clr     c
02D3 99         +1  8661             subb    a,r1            ;compute new exponent
02D4 2478       +1  8662             add     a,#127-7        ;unbias
02D6 F8         +1  8663             mov     r0,a            ;store back
02D7 EF         +1  8664             mov     a,r7            ;get sign
02D8 23         +1  8665             rl      a
02D9 6207       +1  8666             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8667             mov     r6,#24+7        ;initialize counter
02DD            +1  8668     div1:
                +1  8669+3           shfup   prod            ;shift quotient up
02DD C3         +1  8670+1           clr     c
02DE E50F       +1  8671+1           mov     a,prod+3
02E0 33         +1  8672+1           rlc     a
02E1 F50F       +1  8673+1           mov     prod+3,a
02E3 E50E       +1  8674+1           mov     a,prod+2
02E5 33         +1  8675+1           rlc     a
02E6 F50E       +1  8676+1           mov     prod+2,a
02E8 E50D       +1  8677+1           mov     a,prod+1
02EA 33         +1  8678+1           rlc     a
02EB F50D       +1  8679+1           mov     prod+1,a
02ED E50C       +1  8680+1           mov     a,prod
02EF 33         +1  8681+1           rlc     a
02F0 F50C       +1  8682+1           mov     prod,a
02F2 C3         +1  8683             clr     c
02F3 EA         +1  8684             mov     a,r2            ;compare values
02F4 9508       +1  8685             subb    a,mant2
02F6 4028       +1  8686             jc      div2            ;skip if bigger
02F8 7013       +1  8687             jnz     div3
02FA EB         +1  8688             mov     a,r3            ;compare values
02FB 9509       +1  8689             subb    a,mant2+1
02FD 4021       +1  8690             jc      div2            ;skip if bigger
02FF 700C       +1  8691             jnz     div3
0301 EC         +1  8692             mov     a,r4            ;compare values
0302 950A       +1  8693             subb    a,mant2+2
0304 401A       +1  8694             jc      div2            ;skip if bigger
0306 7005       +1  8695             jnz     div3
0308 ED         +1  8696             mov     a,r5            ;compare values
0309 950B       +1  8697             subb    a,mant2+3
030B 4013       +1  8698             jc      div2            ;skip if bigger
030D            +1  8699     div3:
030D ED         +1  8700             mov     a,r5
030E 950B       +1  8701             subb    a,mant2+3
0310 FD         +1  8702             mov     r5,a
0311 EC         +1  8703             mov     a,r4
0312 950A       +1  8704             subb    a,mant2+2               ;do subtraction
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   135

0314 FC         +1  8705             mov     r4,a
0315 EB         +1  8706             mov     a,r3
0316 9509       +1  8707             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8708             mov     r3,a
0319 EA         +1  8709             mov     a,r2
031A 9508       +1  8710             subb    a,mant2         ;do subtraction
031C FA         +1  8711             mov     r2,a
031D 430F01     +1  8712             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8713     div2:
                +1  8714+3           lshift                  ;shift dividend up
0320 ED         +1  8715+1           mov     a,r5
0321 33         +1  8716+1           rlc     a
0322 FD         +1  8717+1           mov     r5,a
0323 EC         +1  8718+1           mov     a,r4
0324 33         +1  8719+1           rlc     a
0325 FC         +1  8720+1           mov     r4,a
0326 EB         +1  8721+1           mov     a,r3
0327 33         +1  8722+1           rlc     a
0328 FB         +1  8723+1           mov     r3,a
0329 EA         +1  8724+1           mov     a,r2
032A 33         +1  8725+1           rlc     a
032B FA         +1  8726+1           mov     r2,a
032C DEAF       +1  8727             djnz    r6,div1         ;loop if more
                +1  8728+3           copytor prod            ;copy quotient
032E AA0C       +1  8729+1           mov     r2,prod
0330 AB0D       +1  8730+1           mov     r3,prod+1
0332 AC0E       +1  8731+1           mov     r4,prod+2
0334 AD0F       +1  8732+1           mov     r5,prod+3
0336            +1  8733     div9:
0336 11F0       +1  8734             call    norm1           ;now normalize result
0338 11DE       +1  8735             call    pack1           ;pack it up
                +1  8736+3           restregs                ;restore registers
033A D000       +1  8737+1           pop     0
033C D001       +1  8738+1           pop     1
033E D006       +1  8739+1           pop     6
0340 D007       +1  8740+1           pop     7
0342 22         +1  8741             ret
                +1  8742     ;------------------------------------------------------------------
                +1  8743     
                +1  8744     ;       Float to long conversion: if the exponent is less than the
                +1  8745     ;       excess value, the result is zero. If the exponent is so large
                +1  8746     ;       that the value would be shifted out, the result is overflow.
                +1  8747     ;       Otherwise shift the mantissa up or down as required.
                +1  8748     
0343            +1  8749     ftol:
                +1  8750+3           saveregs
0343 C007       +1  8751+1           push    7
0345 C006       +1  8752+1           push    6
0347 C001       +1  8753+1           push    1
0349 C000       +1  8754+1           push    0
034B EA         +1  8755             mov     a,r2
034C B4BF09     +1  8756             cjne    a,#0bfh,ne05
034F EB         +1  8757             mov     a,r3
0350 7006       +1  8758             jnz     ne05
0352 EC         +1  8759             mov     a,r4
0353 7003       +1  8760             jnz     ne05
0355 ED         +1  8761             mov     a,r5
0356 6024       +1  8762             jz      ftol1
0358 119E       +1  8763     ne05:   call    unpack1
035A E8         +1  8764             mov     a,r0            ;get exponent
035B 2482       +1  8765             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8766             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8767             mov     a,r7            ;get sign
0361 30E70D     +1  8768             jnb     acc.7,ftol4     ;skip if +ve
                +1  8769+3           neg1                    ;negate it
0364 C3         +1  8770+1           clr     c
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   136

0365 E4         +1  8771+1           clr     a
0366 9D         +1  8772+1           subb    a,r5
0367 FD         +1  8773+1           mov     r5,a
0368 E4         +1  8774+1           clr     a
0369 9C         +1  8775+1           subb    a,r4
036A FC         +1  8776+1           mov     r4,a
036B E4         +1  8777+1           clr     a
036C 9B         +1  8778+1           subb    a,r3
036D FB         +1  8779+1           mov     r3,a
036E E4         +1  8780+1           clr     a
036F 9A         +1  8781+1           subb    a,r2
0370 FA         +1  8782+1           mov     r2,a
0371            +1  8783     ftol4:
0371 E8         +1  8784             mov     a,r0            ;get exponent
0372 246A       +1  8785             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8786             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8787             mov     r0,a            ;save it
0378 24F8       +1  8788             add     a,#-8           ;if > 8, too big
037A 500E       +1  8789             jnc     ftol3
037C            +1  8790     ftol1:
037C E4         +1  8791             clr     a
037D FA         +1  8792             mov     r2,a
037E FB         +1  8793             mov     r3,a
037F FC         +1  8794             mov     r4,a
0380 FD         +1  8795             mov     r5,a
0381            +1  8796     ftol9:
                +1  8797+3           restregs
0381 D000       +1  8798+1           pop     0
0383 D001       +1  8799+1           pop     1
0385 D006       +1  8800+1           pop     6
0387 D007       +1  8801+1           pop     7
0389 22         +1  8802             ret
038A            +1  8803     ftol3:
038A E8         +1  8804             mov     a,r0
038B FE         +1  8805             mov     r6,a            ;store in counter
038C 60F3       +1  8806             jz      ftol9           ;if zero, do nothing
038E            +1  8807     ftol33:
                +1  8808+3           lshift                  ;shift up
038E ED         +1  8809+1           mov     a,r5
038F 33         +1  8810+1           rlc     a
0390 FD         +1  8811+1           mov     r5,a
0391 EC         +1  8812+1           mov     a,r4
0392 33         +1  8813+1           rlc     a
0393 FC         +1  8814+1           mov     r4,a
0394 EB         +1  8815+1           mov     a,r3
0395 33         +1  8816+1           rlc     a
0396 FB         +1  8817+1           mov     r3,a
0397 EA         +1  8818+1           mov     a,r2
0398 33         +1  8819+1           rlc     a
0399 FA         +1  8820+1           mov     r2,a
039A DEF2       +1  8821             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8822             sjmp    ftol9
039E            +1  8823     ftol2:
039E F4         +1  8824             cpl     a               ;complement
039F FE         +1  8825             mov     r6,a
03A0 6022       +1  8826             jz      ftol22
03A2            +1  8827     ftol23:
03A2 EF         +1  8828             mov     a,r7
03A3 30E70F     +1  8829             jnb     acc.7,ftol24
                +1  8830+3           rshift1
03A6 D3         +1  8831+1           setb    c
03A7 EA         +1  8832+1           mov     a,r2
03A8 13         +1  8833+1           rrc     a
03A9 FA         +1  8834+1           mov     r2,a
03AA EB         +1  8835+1           mov     a,r3
03AB 13         +1  8836+1           rrc     a
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   137

03AC FB         +1  8837+1           mov     r3,a
03AD EC         +1  8838+1           mov     a,r4
03AE 13         +1  8839+1           rrc     a
03AF FC         +1  8840+1           mov     r4,a
03B0 ED         +1  8841+1           mov     a,r5
03B1 13         +1  8842+1           rrc     a
03B2 FD         +1  8843+1           mov     r5,a
03B3 800D       +1  8844             jmp     ftol25
03B5            +1  8845+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8846+1           clr     c
03B6 EA         +1  8847+1           mov     a,r2
03B7 13         +1  8848+1           rrc     a
03B8 FA         +1  8849+1           mov     r2,a
03B9 EB         +1  8850+1           mov     a,r3
03BA 13         +1  8851+1           rrc     a
03BB FB         +1  8852+1           mov     r3,a
03BC EC         +1  8853+1           mov     a,r4
03BD 13         +1  8854+1           rrc     a
03BE FC         +1  8855+1           mov     r4,a
03BF ED         +1  8856+1           mov     a,r5
03C0 13         +1  8857+1           rrc     a
03C1 FD         +1  8858+1           mov     r5,a
03C2 DEDE       +1  8859     ftol25: djnz    r6,ftol23
03C4            +1  8860     ftol22:
                +1  8861+3           add1                    ;round
03C4 ED         +1  8862+1           mov     a,r5
03C5 2401       +1  8863+1           add     a,#1
03C7 FD         +1  8864+1           mov     r5,a
03C8 E4         +1  8865+1           clr     a
03C9 3C         +1  8866+1           addc    a,r4
03CA FC         +1  8867+1           mov     r4,a
03CB E4         +1  8868+1           clr     a
03CC 3B         +1  8869+1           addc    a,r3
03CD FB         +1  8870+1           mov     r3,a
03CE E4         +1  8871+1           clr     a
03CF 3A         +1  8872+1           addc    a,r2
03D0 FA         +1  8873+1           mov     r2,a
03D1 EF         +1  8874             mov     a,r7
03D2 30E70F     +1  8875             jnb     acc.7,ftol26
                +1  8876+3           rshift1
03D5 D3         +1  8877+1           setb    c
03D6 EA         +1  8878+1           mov     a,r2
03D7 13         +1  8879+1           rrc     a
03D8 FA         +1  8880+1           mov     r2,a
03D9 EB         +1  8881+1           mov     a,r3
03DA 13         +1  8882+1           rrc     a
03DB FB         +1  8883+1           mov     r3,a
03DC EC         +1  8884+1           mov     a,r4
03DD 13         +1  8885+1           rrc     a
03DE FC         +1  8886+1           mov     r4,a
03DF ED         +1  8887+1           mov     a,r5
03E0 13         +1  8888+1           rrc     a
03E1 FD         +1  8889+1           mov     r5,a
03E2 809D       +1  8890             jmp     ftol9
03E4            +1  8891+3   ftol26: rshift
03E4 C3         +1  8892+1           clr     c
03E5 EA         +1  8893+1           mov     a,r2
03E6 13         +1  8894+1           rrc     a
03E7 FA         +1  8895+1           mov     r2,a
03E8 EB         +1  8896+1           mov     a,r3
03E9 13         +1  8897+1           rrc     a
03EA FB         +1  8898+1           mov     r3,a
03EB EC         +1  8899+1           mov     a,r4
03EC 13         +1  8900+1           rrc     a
03ED FC         +1  8901+1           mov     r4,a
03EE ED         +1  8902+1           mov     a,r5
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   138

03EF 13         +1  8903+1           rrc     a
03F0 FD         +1  8904+1           mov     r5,a
03F1 808E       +1  8905             jmp     ftol9
                +1  8906     
                +1  8907     ;       arithmetic integer to floating conversions
                +1  8908     
03F3            +1  8909     abtof:
03F3 ED         +1  8910             mov     a,r5
03F4 23         +1  8911             rl      a
03F5 FC         +1  8912             mov     r4,a
03F6 9C         +1  8913             subb    a,r4
03F7 FC         +1  8914             mov     r4,a
03F8 FB         +1  8915             mov     r3,a
03F9 FA         +1  8916             mov     r2,a
03FA 8006       +1  8917             jmp     altof
03FC            +1  8918     awtof:
03FC EC         +1  8919             mov     a,r4
03FD 23         +1  8920             rl      a
03FE FB         +1  8921             mov     r3,a
03FF 9B         +1  8922             subb    a,r3
0400 FB         +1  8923             mov     r3,a
0401 FA         +1  8924             mov     r2,a
0402            +1  8925     altof:
                +1  8926+3           saveregs
0402 C007       +1  8927+1           push    7
0404 C006       +1  8928+1           push    6
0406 C001       +1  8929+1           push    1
0408 C000       +1  8930+1           push    0
040A EA         +1  8931             mov     a,r2            ;get sign
040B 5480       +1  8932             anl     a,#80h
040D FF         +1  8933             mov     r7,a            ;store it
040E 30E70D     +1  8934             jnb     acc.7,altof1    ;skip if +ve
                +1  8935+3           neg1
0411 C3         +1  8936+1           clr     c
0412 E4         +1  8937+1           clr     a
0413 9D         +1  8938+1           subb    a,r5
0414 FD         +1  8939+1           mov     r5,a
0415 E4         +1  8940+1           clr     a
0416 9C         +1  8941+1           subb    a,r4
0417 FC         +1  8942+1           mov     r4,a
0418 E4         +1  8943+1           clr     a
0419 9B         +1  8944+1           subb    a,r3
041A FB         +1  8945+1           mov     r3,a
041B E4         +1  8946+1           clr     a
041C 9A         +1  8947+1           subb    a,r2
041D FA         +1  8948+1           mov     r2,a
041E            +1  8949     altof1:
041E 7896       +1  8950             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8951             call    norm1           ;normalize it
0422 11DE       +1  8952             call    pack1           ;and pack up
                +1  8953+3           restregs
0424 D000       +1  8954+1           pop     0
0426 D001       +1  8955+1           pop     1
0428 D006       +1  8956+1           pop     6
042A D007       +1  8957+1           pop     7
042C 22         +1  8958             ret
                +1  8959     
042D            +1  8960     lbtof:
042D 7C00       +1  8961             mov     r4,#0
042F            +1  8962     lwtof:
042F E4         +1  8963             clr     a
0430 FB         +1  8964             mov     r3,a
0431 FA         +1  8965             mov     r2,a
0432            +1  8966     lltof:
                +1  8967+3           saveregs
0432 C007       +1  8968+1           push    7
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   139

0434 C006       +1  8969+1           push    6
0436 C001       +1  8970+1           push    1
0438 C000       +1  8971+1           push    0
043A 7F00       +1  8972             mov     r7,#0           ;zero sign
043C 80E0       +1  8973             sjmp    altof1
                +1  8974     
                +1  8975     ;-------------------------------------------------------
                +1  8976     
                +1  8977     
                    8978     
                    8979     ;$include (wriread.asm)
                +1  8980     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8981     cle256:         mov             IE,#00H
0441 75B601     +1  8982                             mov             FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8983                             MOV             PSCTL,#03
                +1  8984                                             
0447 7400       +1  8985                             mov             a,#00h  ;запись любого значения стирает страницу
0449 F0         +1  8986                             movx    @dptr,a                         ;wr
044A 758F00     +1  8987                             mov             PSCTL,#00
044D 75B600     +1  8988                             mov             FLSCL,#00
0450 75A880     +1  8989                             mov             IE,#80H
0453 22         +1  8990                             ret
                +1  8991     
                +1  8992     ;чтение памяти программ в r8..r11
                +1  8993     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8994     re4byte: mov            dph,r2
0456 8B82       +1  8995                     mov                     dpl,r3
0458 E4         +1  8996                     clr                     a
0459 93         +1  8997                     movc            a,@a+dptr
045A F508       +1  8998                     mov                     r8,a
045C A3         +1  8999                     inc                     dptr
045D E4         +1  9000                     clr                     a
045E 93         +1  9001                     movc            a,@a+dptr
045F F509       +1  9002                     mov                     r9,a
0461 A3         +1  9003                     inc                     dptr
0462 E4         +1  9004                     clr                     a
0463 93         +1  9005                     movc            a,@a+dptr
0464 F50A       +1  9006                     mov                     r10,a
0466 A3         +1  9007                     inc                     dptr
0467 E4         +1  9008                     clr                     a
0468 93         +1  9009                     movc            a,@a+dptr
0469 F50B       +1  9010                     mov                     r11,a                                           ;r8
                             ..r11
046B 22         +1  9011                     ret
                +1  9012      ;чтение памяти программ в r2..r5
                +1  9013     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  9014     rebyte2: mov            dph,r2
046E 8B82       +1  9015                     mov                     dpl,r3
0470 E4         +1  9016                     clr                     a
0471 93         +1  9017                     movc            a,@a+dptr
0472 FA         +1  9018                     mov                     r2,a
0473 A3         +1  9019                     inc                     dptr
0474 E4         +1  9020                     clr                     a
0475 93         +1  9021                     movc            a,@a+dptr
0476 FB         +1  9022                     mov                     r3,a
0477 A3         +1  9023                     inc                     dptr
0478 E4         +1  9024                     clr                     a
0479 93         +1  9025                     movc            a,@a+dptr
047A FC         +1  9026                     mov                     r4,a
047B A3         +1  9027                     inc                     dptr
047C E4         +1  9028                     clr                     a
047D 93         +1  9029                     movc            a,@a+dptr
047E FD         +1  9030                     mov                     r5,a                                            ;r8
                             ..r11
047F 22         +1  9031                     ret
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   140

                +1  9032      
                +1  9033     ;r7-количество байт
                +1  9034     ;dptr-адр ячейки для записи
                +1  9035     ;r1-адр ячейки  внешнего озу
                +1  9036     
0480 75A800     +1  9037     wrpage: mov             IE,#00H
0483 75B601     +1  9038     WW5:    mov             FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  9039                     mov             PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  9040                     movx            a,@r1
048A F0         +1  9041                     movx            @dptr,a                         ;wr
048B 758F00     +1  9042                     mov             PSCTL,#0
048E 75B600     +1  9043                     mov             FLSCL,#00
0491 A3         +1  9044                     inc                     dptr
0492 09         +1  9045                     inc                     r1
0493 DFEE       +1  9046                     djnz            r7,WW5
0495 75A880     +1  9047                     mov             IE,#80H
0498 22         +1  9048                     ret
                +1  9049                             
                +1  9050     
                +1  9051     
                +1  9052     ;чтение памяти программ во внешнее озу
                +1  9053     ;вх-r2,r3-адр яч памяти прогр
                +1  9054     ;r1- яч внешнее озу
0499 8A83       +1  9055     copyPP:         mov                     dph,r2
049B 8B82       +1  9056                             mov                     dpl,r3
049D 7FFF       +1  9057                             mov                     r7,#0ffh
049F E4         +1  9058     copy1:          clr                     a
04A0 93         +1  9059                             movc            a,@a+dptr
04A1 F3         +1  9060                             movx                    @r1,a
04A2 A3         +1  9061                             inc                     dptr
04A3 09         +1  9062                             inc                     r1
04A4 DFF9       +1  9063                             djnz            r7,copy1
04A6 22         +1  9064                             ret
                +1  9065     
                +1  9066     ;r8..r11->@r0..@r0+3
                +1  9067     ;r0-адр ячейки
                +1  9068     ;сохранить в ячейке озу
04A7 E508       +1  9069     savelte:        mov     a,ltemp
04A9 F6         +1  9070                     mov     @r0,a
04AA 08         +1  9071                     inc     r0
04AB E509       +1  9072                     mov     a,ltemp+1
04AD F6         +1  9073                     mov     @r0,a
04AE 08         +1  9074                     inc     r0
04AF E50A       +1  9075                     mov     a,ltemp+2
04B1 F6         +1  9076                     mov     @r0,a
04B2 08         +1  9077                     inc     r0
04B3 E50B       +1  9078                     mov     a,ltemp+3
04B5 F6         +1  9079                     mov     @r0,a
04B6 22         +1  9080                     ret
                +1  9081     
                +1  9082     
                +1  9083      
                    9084     
                    9085     
                    9086     ;$include (d:\amper\subr7.asm)  
                    9087     ;$include (d:\amper\sarifm3.asm)                                        
                    9088     ;$include (d:\amper\floatm.asm)
                    9089     ;$include (d:\amper\wriread.asm)
                    9090                                                   
                    9091     END
                                                                             
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   141

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      185#
AAPAR. . . . . . .  C ADDR   03C2H   R   SEG=MAIN   909#
ABIN . . . . . . .  D ADDR   004FH   A      297# 1483 1576 1601 1622 1626 1629 1630 1632 1713 1716 3801 3815 3895
                                           3898 3941 4036 4075 4078 4156 4160 4161 4162 4165 4420 4458 4459 4461 4538
                                           4558 4647 4651 4694 4697 5057 5062 5244 5248 6574 6732 6735
ABRET. . . . . . .  C ADDR   28B6H   R   SEG=MAIN   6508 6510#
ABTOF. . . . . . .  C ADDR   03F3H   A      8909#
AC . . . . . . . .  B ADDR   00D0H.6 A      201#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 731 747 796 804 811 819 820 837 1158 1168 1176 1251 1864 1873 1882
                                           1891 1912 2358 2396 2401 2405 2410 2413 2416 2419 2422 2619 2680 2724 2735
                                           2837 2846 2854 2863 3010 3067 3092 3097 3101 3104 3107 3114 3117 3120 3455
                                           3542 3582 3601 3619 3638 3685 4596 4602 4639 4728 5441 5493 5951 5991 6100
                                           7151 7319 7395 7398 7654 8306 8389 8406 8438 8476 8504 8766 8768 8786 8829
                                           8875 8934
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0CM0 . . . . . .  B ADDR   00E8H.2 A      224#
AD0CM1 . . . . . .  B ADDR   00E8H.3 A      223#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      219#
AD0INT . . . . . .  B ADDR   00E8H.5 A      221#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      226#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      220#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      225#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 219 220 221 222 223 224 225 226
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   307AH   R   SEG=MAIN   943 974 976 978 980 982 984 986 988 990 1044 1046 1048 1050 1052
                                           1054 1056 1058 1060 1063 1065 1067 1069 1071 1073 1075 1077 1079 1081 1099
                                           1101 1103 7895#
ADEC . . . . . . .  D ADDR   0053H   A      298# 1575 1587 1591 1606 1631 1634 1635 1715 1719 3814 3818 3892 3896
                                           3938 3942 4033 4037 4077 4081 4164 4177 4430 4445 4447 4449 4460 4463 4548
                                           4559 4652 4698 5061 5065 5247 5250 6382 6401 6419 6480 6497 6734 6737 7075
                                           7105
ADRBLOK. . . . . .  C ADDR   2D2EH   R   SEG=MAIN   3523 3547 3911 4054 4952 4981 5107 5165 5270 5322 5807 5850 5938
                                           5952 7117#
AFTERK . . . . . .  C ADDR   06B9H   R   SEG=MAIN   1185 1260#
AFTER_2. . . . . .  C ADDR   01D1H   R   SEG=MAIN   608# 1981
AGE2 . . . . . . .  C ADDR   0247H   R   SEG=MAIN   671# 674
AGE9 . . . . . . .  C ADDR   08BBH   R   SEG=MAIN   1526# 1529
AGEON. . . . . . .  C ADDR   0255H   R   SEG=MAIN   680# 682
ALLSUM . . . . . .  C ADDR   0360H   R   SEG=MAIN   857# 891 906 922
ALMUL. . . . . . .  C ADDR   2FC1H   R   SEG=MAIN   7741#
ALTOF. . . . . . .  C ADDR   0402H   A      1152 1245 1274 1282 1300 1316 1327 1344 1356 1444 2075 2184 2261 2299
                                           3945 4042 4562 4655 4701 4793 4871 4879 4897 5020 5032 5047 5150 5211 5227
                                           5309 5364 5377 5692 8917 8925#
ALTOF1 . . . . . .  C ADDR   041EH   A      8934 8949# 8973
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   061FH   R   SEG=MAIN   1150 1166#
ANLP1. . . . . . .  C ADDR   0ACEH   R   SEG=MAIN   1830 1836#
AN_T7. . . . . . .  C ADDR   12E7H   R   SEG=MAIN   3121# 3192 3194 3202 3212
AUTOKA . . . . . .  C ADDR   0D39H   R   SEG=MAIN   1183 2230#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   142

AVPGO. . . . . . .  C ADDR   07EAH   R   SEG=MAIN   1403 1405#
AVTDEC1. . . . . .  C ADDR   067BH   R   SEG=MAIN   1217 1226#
AWTOF. . . . . . .  C ADDR   03FCH   A      8918#
B. . . . . . . . .  D ADDR   00F0H   A      122# 6232 6594 7744 7747 7749 7753 7757 7761 7765 7770 7774 7781 7785
                                           7789 7795 7799 7803 7809 8502 8503
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   252 471#
BFORM. . . . . . .  C ADDR   2C6BH   R   SEG=MAIN   6926 6931 6943# 6969
BIFL_KT. . . . . .  B ADDR   0021H.5 A      336# 4789 4845 4944
BIN30. . . . . . .  C ADDR   2DDDH   R   SEG=MAIN   7308# 7332
BIN31. . . . . . .  C ADDR   2DE1H   R   SEG=MAIN   7312# 7316
BIN32. . . . . . .  C ADDR   2DF1H   R   SEG=MAIN   7324# 7329
BIN41. . . . . . .  C ADDR   2E02H   R   SEG=MAIN   7340# 7350
BINDEC . . . . . .  C ADDR   2DD1H   R   SEG=MAIN   1577 1633 1717 3816 4079 4166 4462 5063 5249 6736 7287#
BITAKT . . . . . .  B ADDR   0023H.2 A      355# 1800 1801 1804
BITAVP . . . . . .  B ADDR   0020H.5 A      324# 1369 1640 1790 3190 3191 3193 5719 5721
BITBON . . . . . .  B ADDR   0021H.2 A      333# 1827 2021 2205 2230 2431 2432 2440 5825 5839 7152
BITEIZM. . . . . .  B ADDR   0022H.5 A      346# 1268 1738 1745 1808 2482 2526 3161 3177 4325 6154
BITIZM . . . . . .  B ADDR   0020H.4 A      323# 620 765 1645 2402 2484 2498 2577 2612 2643 3098 3164 3286 3307 3380
                                           3411 3436 3544 3655 3915 3963 3991 4148 4274 4326 4381 4494 4571 4683
BITKLB . . . . . .  B ADDR   0022H.2 A      343# 1337 1825 2407 3163 3181 3189 3196 3410 4569 4859
BITMAS . . . . . .  B ADDR   0020H.1 A      320# 1109 1111 6909
BITMEM . . . . . .  B ADDR   0021H.3 A      334# 1705 2831 3414 3432 3444 3543 3654 3916 3962 4147
BITMENU. . . . . .  B ADDR   0022H.1 A      342# 1704 2642 2751 3165 3435 3971 3990 4279 4327 4380 4493 4568
BITMIG . . . . . .  B ADDR   0023H.1 A      354# 2717 2920 3021 3348 3713 3852 3865 4399 4527 4631 4732 6657 6683
                                           6706 6718 6780 6787 6792 6798
BITNUL . . . . . .  B ADDR   0021H.7 A      338# 1417 1666 1772 2469 3210 3214 3215 3222 5551 5727 5744
BITOLL . . . . . .  B ADDR   0022H.7 A      348# 707 1490 1652 1703 1941 3166
BITPAR . . . . . .  B ADDR   0022H.6 A      347# 4860
BITPRD . . . . . .  B ADDR   0021H.1 A      332# 2020
BITPRER. . . . . .  B ADDR   0023H.4 A      357#
BITRS. . . . . . .  B ADDR   0020H.3 A      322#
BITT2. . . . . . .  B ADDR   0022H.0 A      341# 1702 2578 2613 2616 3229 3381
BITV19 . . . . . .  B ADDR   0022H.3 A      344# 552 557 2787 2792 2800 4264 4268 4359 4374 4499 4503 4508
BITVI11. . . . . .  B ADDR   0020H.6 A      325# 1367 1382 1426 1488 1648 2425 2427 2483 2497 2641 3160 3278 3285
                                           3434 4682 5666 5670
BITVICH. . . . . .  B ADDR   0022H.4 A      345# 1425 1701 2426 2485 2495 2640 2648 3247 3277 3306 3433 4681
BITZNAK. . . . . .  B ADDR   0020H.0 A      319# 732 780
BITZNB . . . . . .  B ADDR   0023H.3 A      356# 4702 6506 6509
BITZUS . . . . . .  B ADDR   0020H.7 A      326# 1418 1667 2133 2136 2538
BLOIN. . . . . . .  C ADDR   17A7H   R   SEG=MAIN   3821# 3826
BLOKVV . . . . . .  C ADDR   1779H   R   SEG=MAIN   3791#
BLOKVVC. . . . . .  C ADDR   1783H   R   SEG=MAIN   3794 3797#
BL_LI. . . . . . .  C ADDR   1744H   R   SEG=MAIN   3741 3749#
BONPART. . . . . .  C ADDR   0D09H   R   SEG=MAIN   2204#
BOUT7. . . . . . .  C ADDR   14C1H   R   SEG=MAIN   3390# 3392 3410
BRET . . . . . . .  C ADDR   26F7H   R   SEG=MAIN   6175 6180 6184#
BUFDEC . . . . . .  C ADDR   0A12H   R   SEG=MAIN   1722# 1727
BUFIND . . . . . .  D ADDR   0040H   A      296# 670 674 679 682 687 1525 1529 1592 1613 1634 1635 1636 1637 1681
                                           1686 1720 1728 1730 1735 1770 1788 1794 1802 1805 1810 1826 1828 2377 2437
                                           2441 2692 2710 2726 2728 2731 2790 2791 2798 2799 2915 2962 2981 3085 3169
                                           3231 3287 3288 3332 3336 3361 3382 3396 3403 3415 3416 3516 3708 3735 3763
                                           3792 3819 3833 3834 3838 3839 3846 3847 3851 3867 4006 4013 4082 4090 4092
                                           4109 4133 4167 4176 4178 4241 4263 4269 4391 4429 4463 4464 4465 4466 4468
                                           4502 4507 4519 4547 4570 4623 4669 5066 5074 5078 5251 5259 5263 5411 5826
                                           5844 6021 6230 6243 6249 6256 6381 6400 6418 6479 6496 6507 6660 6686 6738
                                           6784 6804 7074 7104 7153
BUFL_DEC . . . . .  C ADDR   2284H   R   SEG=MAIN   5385#
BUFMEA . . . . . .  C ADDR   20A3H   R   SEG=MAIN   5068# 5073
BUFMIN . . . . . .  C ADDR   21B2H   R   SEG=MAIN   5253# 5258
BUFON. . . . . . .  C ADDR   0E9AH   R   SEG=MAIN   2431 2440#
BUFR . . . . . . .  C ADDR   0960H   R   SEG=MAIN   1615# 1620
BUFR2. . . . . . .  C ADDR   0942H   R   SEG=MAIN   1594# 1599
BUFR3. . . . . . .  C ADDR   093BH   R   SEG=MAIN   1585 1590#
BUFR30 . . . . . .  C ADDR   093EH   R   SEG=MAIN   1588 1592#
BUF_IN . . . . . .  D ADDR   00DBH   A      367# 696 5474 5499
BUSY . . . . . . .  B ADDR   00C0H.7 A      180#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   143

CCF0 . . . . . . .  B ADDR   00D8H.0 A      216#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      215#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      214#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      213#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      212#
CDONE. . . . . . .  C ADDR   01F7H   A      8499# 8503
CELLBIT. . . . . .  D ADDR   0020H   A      318# 319 320 321 322 323 324 325 326
CELLBIT1 . . . . .  D ADDR   0021H   A      328# 330 332 333 334 336 338 362 363
CELLBIT2 . . . . .  D ADDR   0022H   A      340# 341 342 343 344 345 346 347 348
CELLBIT3 . . . . .  D ADDR   0023H   A      352# 353 354 355 356 357 364 365 366
CEXP . . . . . . .  C ADDR   01E2H   A      8476 8485#
CF . . . . . . . .  B ADDR   00D8H.7 A      210#
CH0. . . . . . . .  C ADDR   279AH   R   SEG=MAIN   1467 3223 4658 5745 6314#
CH1. . . . . . . .  C ADDR   27BAH   R   SEG=MAIN   6142 6325#
CH10 . . . . . . .  C ADDR   279EH   R   SEG=MAIN   905 1122 4071 5868 6315#
CH100. . . . . . .  C ADDR   27B2H   R   SEG=MAIN   856 6320#
CH10000. . . . . .  C ADDR   27AEH   R   SEG=MAIN   6319#
CH150H . . . . . .  C ADDR   2802H   R   SEG=MAIN   6344#
CH2. . . . . . . .  C ADDR   27B6H   R   SEG=MAIN   1117 6321#
CH20 . . . . . . .  C ADDR   297DH   R   SEG=MAIN   890 1127 6625#
CH2THO . . . . . .  C ADDR   27E2H   R   SEG=MAIN   2268 2306 6336#
CH320H . . . . . .  C ADDR   27FEH   R   SEG=MAIN   6343# 7125
CH4. . . . . . . .  C ADDR   27A6H   R   SEG=MAIN   1131 6317#
CH43 . . . . . . .  C ADDR   19B2H   R   SEG=MAIN   4084# 4089
CH43_42. . . . . .  C ADDR   1A59H   R   SEG=MAIN   4180# 4185
CH5. . . . . . . .  C ADDR   27A2H   R   SEG=MAIN   921 6316#
CH57 . . . . . . .  C ADDR   2979H   R   SEG=MAIN   6624#
CH954. . . . . . .  C ADDR   27AAH   R   SEG=MAIN   6318#
CHAIBL . . . . . .  C ADDR   15D6H   R   SEG=MAIN   3518 3520#
CHAIBL9. . . . . .  C ADDR   258DH   R   SEG=MAIN   5819 5936#
CHAIPR . . . . . .  C ADDR   1907H   R   SEG=MAIN   4008 4010#
CHANMA . . . . . .  C ADDR   1075H   R   SEG=MAIN   2724 2733#
CHANZ. . . . . . .  C ADDR   105CH   R   SEG=MAIN   2680 2722#
CHAVT. . . . . . .  D ADDR   0081H   A      384# 599 1174 1218 1226 2223 2325 4275
CHBEFORE . . . . .  D ADDR   009BH   A      394# 622 853 867 885 900 916
CHBLOK . . . . . .  D ADDR   00D6H   A      421# 4979 5027 5043 5163 5217 5320 5369
CHBUF. . . . . . .  D ADDR   00CFH   A      418# 633 1995 2101 2142 2147 2206 2214 3960 5385 5390
CHBUF1 . . . . . .  X ADDR   0E00H   A      451# 2005 2088
CHCMP. . . . . . .  C ADDR   269AH   R   SEG=MAIN   1180 6119#
CHDEC. . . . . . .  C ADDR   26ADH   R   SEG=MAIN   1227 1240 6134#
CHDEL. . . . . . .  D ADDR   0083H   A      385# 2166 2192 2232 2281 2319
CHDELMO. . . . . .  C ADDR   0CF4H   R   SEG=MAIN   2176 2192# 2197
CHIF . . . . . . .  C ADDR   29C2H   R   SEG=MAIN   6664 6667#
CHIF5. . . . . . .  C ADDR   29CAH   R   SEG=MAIN   6670 6672#
CHIFB. . . . . . .  C ADDR   29EDH   R   SEG=MAIN   6690 6693#
CHIFB1 . . . . . .  C ADDR   29F3H   R   SEG=MAIN   6692 6693 6697#
CHIFL5 . . . . . .  C ADDR   29FBH   R   SEG=MAIN   6700 6702#
CHIFOUR. . . . . .  C ADDR   29DCH   R   SEG=MAIN   6677 6679 6683#
CHIND. . . . . . .  D ADDR   00ACH   A      400# 1385 1849
CHIND2 . . . . . .  D ADDR   0033H   A      312# 767 769 777
CHINKOR. . . . . .  D ADDR   0098H   A      383# 594 835 1166 1179 1220 1234 1239 2199
CHK. . . . . . . .  C ADDR   27FAH   R   SEG=MAIN   1338 6342#
CHKL . . . . . . .  D ADDR   003DH   A      302# 746 757 759 760 762 2556 2583 2631 2739 3135 3421 4139 4574
CHMAS. . . . . . .  D ADDR   006EH   A      299# 1106 1112 1135 6908
CHMASN . . . . . .  D ADDR   003FH   A      303# 842 851 886 901 917 932 1110 1112 1113
CHMINUS. . . . . .  C ADDR   2D13H   R   SEG=MAIN   3539 3579 3598 3616 3635 5948 5988 7089# 7148
CHTADC . . . . . .  C ADDR   2644H   R   SEG=MAIN   6059#
CHTHO. . . . . . .  C ADDR   27DAH   R   SEG=MAIN   1307 1345 4802 4887 4905 6334#
CHTHOU . . . . . .  C ADDR   2881H   R   SEG=MAIN   6467#
CHZAP. . . . . . .  C ADDR   2796H   R   SEG=MAIN   1984 6313#
CH_1 . . . . . . .  C ADDR   27C2H   R   SEG=MAIN   625 1540 1563 2002 2144 2218 4043 5387 6327#
CH_10. . . . . . .  C ADDR   27F2H   R   SEG=MAIN   1546 1569 2084 2114 4563 5052 5238 6340#
CH_10TH. . . . . .  C ADDR   27EEH   R   SEG=MAIN   1398 6339#
CH_2 . . . . . . .  C ADDR   27C6H   R   SEG=MAIN   1997 2079 2107 2123 6328#
CH_200 . . . . . .  C ADDR   27EAH   R   SEG=MAIN   6338#
CH_220 . . . . . .  C ADDR   27E6H   R   SEG=MAIN   1360 6337#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   144

CH_22T . . . . . .  C ADDR   28BFH   R   SEG=MAIN   1455 6515#
CH_250 . . . . . .  C ADDR   27F6H   R   SEG=MAIN   1263 6341#
CH_4 . . . . . . .  C ADDR   27CAH   R   SEG=MAIN   2117 4046 6329#
CH_5 . . . . . . .  C ADDR   27CEH   R   SEG=MAIN   6330#
CH_500 . . . . . .  C ADDR   28BBH   R   SEG=MAIN   1450 6514#
CH_7 . . . . . . .  C ADDR   27D2H   R   SEG=MAIN   2210 6331#
CH_953 . . . . . .  C ADDR   27D6H   R   SEG=MAIN   6333#
CH_B . . . . . . .  C ADDR   28B7H   R   SEG=MAIN   1471 6512#
CH_FL. . . . . . .  C ADDR   28C3H   R   SEG=MAIN   1533 6516#
CH_M3. . . . . . .  C ADDR   2806H   R   SEG=MAIN   6345#
CH_MLN . . . . . .  C ADDR   27BEH   R   SEG=MAIN   6326#
CIKLWR . . . . . .  C ADDR   2C41H   R   SEG=MAIN   6914#
CKCON. . . . . . .  D ADDR   008EH   A      30# 490 516
CL4. . . . . . . .  C ADDR   2818H   R   SEG=MAIN   6362# 6364
CL4N . . . . . . .  C ADDR   281EH   R   SEG=MAIN   6370# 6372
CLE20. . . . . . .  C ADDR   1A46H   R   SEG=MAIN   4170# 4172
CLE256 . . . . . .  C ADDR   043EH   A      4365 4835 4937 8981#
CLEAR. . . . . . .  C ADDR   2DCBH   R   SEG=MAIN   7265 7269# 7299
CLEAR4 . . . . . .  C ADDR   2815H   R   SEG=MAIN   865 1414 1416 1602 1623 1663 1665 2466 2468 3207 3209 4978 6360#
CLEARN . . . . . .  C ADDR   281DH   R   SEG=MAIN   3893 3939 4034 4421 4539 4648 4695 6368#
CLMASSIX . . . . .  C ADDR   2C31H   R   SEG=MAIN   585 1412 1661 2203 2329 2464 3205 3379 6902#
CLMASV . . . . . .  C ADDR   07EFH   R   SEG=MAIN   1407 1409#
CLMAX. . . . . . .  C ADDR   2C36H   R   SEG=MAIN   6904# 6907
CLR11. . . . . . .  C ADDR   2DCCH   R   SEG=MAIN   7271# 7273
CLRDEC . . . . . .  C ADDR   2DC5H   R   SEG=MAIN   7263#
CLRNUM . . . . . .  C ADDR   2DC9H   R   SEG=MAIN   7266# 7378
CLRVICH. . . . . .  C ADDR   142EH   R   SEG=MAIN   3306# 3323
CL_HL. . . . . . .  C ADDR   1690H   R   SEG=MAIN   3648# 3662 3667 3671
CL_HL1 . . . . . .  C ADDR   16A2H   R   SEG=MAIN   3645 3659#
CL_HL2 . . . . . .  C ADDR   16ACH   R   SEG=MAIN   3659 3664#
CL_HL3 . . . . . .  C ADDR   16B6H   R   SEG=MAIN   3664 3669#
CMD_REZ. . . . . .  D ADDR   004EH   A      372# 5498 5627 5674 5756 5768 5820 5928 5930
CMD_TREE . . . . .  C ADDR   2311H   R   SEG=MAIN   704 5497#
CNTR . . . . . . .  N NUMB   0006H   A      8172#
CNT_IN . . . . . .  D ADDR   0025H   A      369# 698 5469 5473 5486 5487
CNT_OUT. . . . . .  D ADDR   0024H   A      368# 697 1947 1973 1974 5443 5450 5520 5527 5610 5647 5654 5858 5899
CO02S. . . . . . .  C ADDR   277EH   R   SEG=MAIN   6297# 6301
CO05S. . . . . . .  C ADDR   278BH   R   SEG=MAIN   6306# 6310
CO1S . . . . . . .  C ADDR   2775H   R   SEG=MAIN   6290# 6290
CO2S . . . . . . .  C ADDR   2771H   R   SEG=MAIN   6288# 6292
COMPA1 . . . . . .  C ADDR   08D7H   R   SEG=MAIN   1540# 1549
COMPA2 . . . . . .  C ADDR   090DH   R   SEG=MAIN   1563# 1572
COND . . . . . . .  C ADDR   2CA5H   R   SEG=MAIN   6998#
COPY1. . . . . . .  C ADDR   049FH   A      9058# 9063
COPYPP . . . . . .  C ADDR   0499H   A      4352 4814 4915 9055#
COPY_HL. . . . . .  D ADDR   00D7H   A      422# 4059 4191 4971 4986 5000 5156 5171 5186 5314 5327 5341 5862 5893
COUNT. . . . . . .  C ADDR   2753H   R   SEG=MAIN   6263# 6263
CPRL2. . . . . . .  B ADDR   00C8H.0 A      197#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      211#
CT . . . . . . . .  C ADDR   275AH   R   SEG=MAIN   6269# 6269
CT2. . . . . . . .  B ADDR   00C8H.1 A      196#
CY . . . . . . . .  B ADDR   00D0H.7 A      200#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 495
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1992
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1989
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 496
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   2CAAH   R   SEG=MAIN   7002# 7004
DCOB . . . . . . .  C ADDR   2CB1H   R   SEG=MAIN   7006# 7024
DCOC . . . . . . .  C ADDR   2CBCH   R   SEG=MAIN   7016# 7021
DCOD . . . . . . .  C ADDR   2CC9H   R   SEG=MAIN   7023 7026#
DDOUTF . . . . . .  C ADDR   16F9H   R   SEG=MAIN   3507 3560 3694 3702# 3787
DDOUTFR. . . . . .  C ADDR   15BAH   R   SEG=MAIN   3507# 3513
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   145

DEC30. . . . . . .  C ADDR   2E1EH   R   SEG=MAIN   7388# 7411
DEC31. . . . . . .  C ADDR   2E23H   R   SEG=MAIN   7393# 7400
DEC32. . . . . . .  C ADDR   2E33H   R   SEG=MAIN   7404# 7408
DECBIN . . . . . .  C ADDR   2E11H   R   SEG=MAIN   3897 3943 4038 4560 4653 4699 7367#
DECSIZE. . . . . .  N NUMB   000AH   A      7249# 7264 7298 7323 7336 7339 7392
DECT2. . . . . . .  C ADDR   2E3CH   R   SEG=MAIN   7384 7414#
DEDPTR . . . . . .  C ADDR   3091H   R   SEG=MAIN   7899 7903 7907 7913#
DENORM . . . . . .  C ADDR   0133H   A      8331# 8387
DGOTO7 . . . . . .  C ADDR   188BH   R   SEG=MAIN   3946# 3954
DIAP . . . . . . .  D ADDR   00AEH   A      402# 613 1402 1642 1734 1831 1954 2031 2458 2505 3198 4467 4842 5534 5622
                                           6155 6176 6432 6446 6591 6651
DIINC. . . . . . .  C ADDR   0EC0H   R   SEG=MAIN   2461 2464#
DIKDN. . . . . . .  C ADDR   2951H   R   SEG=MAIN   6593 6613#
DIKDW. . . . . . .  C ADDR   2869H   R   SEG=MAIN   6436 6455#
DIKM . . . . . . .  C ADDR   287FH   R   SEG=MAIN   6466#
DIPAR. . . . . . .  C ADDR   287DH   R   SEG=MAIN   6465#
DIV1 . . . . . . .  C ADDR   02DDH   A      8668# 8727
DIV2 . . . . . . .  C ADDR   0320H   A      8686 8690 8694 8698 8713#
DIV3 . . . . . . .  C ADDR   030DH   A      8687 8691 8695 8699#
DIV9 . . . . . . .  C ADDR   0336H   A      8657 8659 8733#
DIVIDE . . . . . .  C ADDR   2EFCH   R   SEG=MAIN   6930 7600#
DONE . . . . . . .  C ADDR   2E6BH   R   SEG=MAIN   7430 7441#
DONE1. . . . . . .  C ADDR   2E69H   R   SEG=MAIN   7433 7436 7439#
DOSH . . . . . . .  C ADDR   2F85H   R   SEG=MAIN   7675 7691#
DOSUB. . . . . . .  C ADDR   2F73H   R   SEG=MAIN   7659 7663 7667 7671 7672 7676#
DPH. . . . . . . .  D ADDR   0083H   A      19# 591 637 645 652 659 2369 2999 3078 3648 4064 4066 4196 4201 4717 4955
                                           4964 4972 4984 4988 4996 4998 5001 5012 5099 5101 5110 5119 5157 5168 5173
                                           5182 5184 5187 5198 5273 5281 5315 5325 5329 5337 5339 5342 5353 5865 5898
                                           5981 6862 6870 7133 7141 7173 7447 7483 7518 7521 7533 7556 7918 7920 8994
                                           9014 9055
DPL. . . . . . . .  D ADDR   0082H   A      18# 640 648 655 662 2368 3000 3077 3651 4060 4062 4193 4204 4718 4953
                                           4960 4975 4982 4991 4993 4995 5004 5008 5096 5098 5108 5115 5160 5166 5176
                                           5179 5181 5190 5194 5271 5277 5318 5323 5332 5334 5336 5345 5349 5863 5895
                                           5984 6863 6869 7130 7144 7176 7463 7499 7520 7534 7537 7571 7915 7917 8995
                                           9015 9056
DVIG0. . . . . . .  C ADDR   0B0AH   R   SEG=MAIN   1885# 1887
DVIG1. . . . . . .  C ADDR   0AFFH   R   SEG=MAIN   1876# 1878
DVIG2. . . . . . .  C ADDR   0AF4H   R   SEG=MAIN   1867# 1869
DVIG3. . . . . . .  C ADDR   0AE8H   R   SEG=MAIN   1858# 1860
DVIG4. . . . . . .  C ADDR   0B16H   R   SEG=MAIN   1896# 1898
DVIG6. . . . . . .  C ADDR   0B38H   R   SEG=MAIN   1924# 1926
DVM. . . . . . . .  C ADDR   0B36H   R   SEG=MAIN   1912 1923#
EA . . . . . . . .  B ADDR   00A8H.7 A      163# 1494 1520 5533 5740 5857 5901 5905 5932 5937 5956
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 493
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 561 751 2355 3064 5407 5409 5422
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1EBAH   R   SEG=MAIN   3187 4788#
ENDSDV . . . . . .  C ADDR   0B3CH   R   SEG=MAIN   1918 1927#
ENDSUM . . . . . .  C ADDR   05ADH   R   SEG=MAIN   944 991 1082 1105#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      181#
EQU0 . . . . . . .  C ADDR   0908H   R   SEG=MAIN   1543 1559#
EQU00. . . . . . .  C ADDR   0926H   R   SEG=MAIN   1561 1566 1574#
EQU1L. . . . . . .  C ADDR   11BEH   R   SEG=MAIN   2926 2930#
EQU2L. . . . . . .  C ADDR   175FH   R   SEG=MAIN   3773 3778#
ERRA0. . . . . . .  C ADDR   1DD9H   R   SEG=MAIN   4661 4673#
ERRA01 . . . . . .  C ADDR   0805H   R   SEG=MAIN   1421# 1470
ERROR. . . . . . .  C ADDR   2A57H   R   SEG=MAIN   1428 1838 4287 4490 4676 6029 6041 6802#
ES0. . . . . . . .  B ADDR   00A8H.4 A      165#
ET0. . . . . . . .  B ADDR   00A8H.1 A      168#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      164# 2065 3039 4748
EX0. . . . . . . .  B ADDR   00A8H.0 A      169#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   146

EX1. . . . . . . .  B ADDR   00A8H.2 A      167#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      194#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      191#
EXP1 . . . . . . .  N NUMB   0000H   A      8174#
EXP2 . . . . . . .  N NUMB   0001H   A      8176# 8353 8374
EXTCLE . . . . . .  C ADDR   01B7H   R   SEG=MAIN   588# 592
F0 . . . . . . . .  B ADDR   00D0H.5 A      202#
F1 . . . . . . . .  B ADDR   00D0H.1 A      206#
FINDEXT. . . . . .  C ADDR   2862H   R   SEG=MAIN   4816 6445#
FINDKOEF . . . . .  C ADDR   2853H   R   SEG=MAIN   1341 6431#
FINDMEM. . . . . .  C ADDR   111CH   R   SEG=MAIN   2749 2831#
FINDR. . . . . . .  C ADDR   29AAH   R   SEG=MAIN   1628 4457 6651#
FINIS. . . . . . .  C ADDR   2FB0H   R   SEG=MAIN   7619 7720#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      2100 5024 5036 8379# 8468
FLCMP. . . . . . .  C ADDR   01D6H   A      1265 1362 1400 1452 1457 1469 1542 1565 1999 4660 5213 5229 5365 5378
                                           8473#
FLDIV. . . . . . .  C ADDR   02B7H   A      1288 1309 1347 1478 1535 1548 2116 2270 2308 4800 4885 4903 5051 5054
                                           5240 8643#
FLMUL. . . . . . .  C ADDR   0203H   A      1161 1256 1306 1352 1473 1571 2087 2109 2119 2125 4048 4565 4804 4889
                                           4907 8513#
FLOUT. . . . . . .  C ADDR   01E1H   A      8480 8483#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8982 8988 9038 9043
FLSUB. . . . . . .  C ADDR   01D1H   A      1248 2004 2146 2213 2266 2304 4045 5389 8466#
FND. . . . . . . .  C ADDR   01F8H   A      8489 8492 8495 8498 8501#
FO1M . . . . . . .  C ADDR   2C68H   R   SEG=MAIN   6936 6940#
FO2M . . . . . . .  C ADDR   2C71H   R   SEG=MAIN   6943 6945#
FORM4. . . . . . .  C ADDR   2C72H   R   SEG=MAIN   6938 6944 6948#
FT1IZM . . . . . .  C ADDR   0FB3H   R   SEG=MAIN   2626#
FTOL . . . . . . .  C ADDR   0343H   A      1203 1353 1481 4049 4805 4908 5055 5241 5603 6731 8749#
FTOL1. . . . . . .  C ADDR   037CH   A      8762 8766 8790#
FTOL2. . . . . . .  C ADDR   039EH   A      8786 8823#
FTOL22 . . . . . .  C ADDR   03C4H   A      8826 8860#
FTOL23 . . . . . .  C ADDR   03A2H   A      8827# 8859
FTOL24 . . . . . .  C ADDR   03B5H   A      8829 8845#
FTOL25 . . . . . .  C ADDR   03C2H   A      8844 8859#
FTOL26 . . . . . .  C ADDR   03E4H   A      8875 8891#
FTOL3. . . . . . .  C ADDR   038AH   A      8789 8803#
FTOL33 . . . . . .  C ADDR   038EH   A      8807# 8821
FTOL4. . . . . . .  C ADDR   0371H   A      8768 8783#
FTOL9. . . . . . .  C ADDR   0381H   A      8796# 8806 8822 8890 8905
FULKALIB . . . . .  C ADDR   1F29H   R   SEG=MAIN   4843 4858# 4946
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   500#
GO23NO . . . . . .  C ADDR   16BDH   R   SEG=MAIN   3561 3673#
GO31L. . . . . . .  C ADDR   11C4H   R   SEG=MAIN   2903 2935#
GO41L. . . . . . .  C ADDR   11C9H   R   SEG=MAIN   2935 2937#
GOA2 . . . . . . .  C ADDR   07A5H   R   SEG=MAIN   1366 1368 1371# 1393
GOA3A2 . . . . . .  C ADDR   07AFH   R   SEG=MAIN   1376#
GOCIKLE. . . . . .  C ADDR   0C8DH   R   SEG=MAIN   2022 2104 2133# 2140 2149
GOFULL . . . . . .  C ADDR   16F0H   R   SEG=MAIN   3678 3698#
GOGO7. . . . . . .  C ADDR   1DF7H   R   SEG=MAIN   4634 4639 4686#
GOKAA2 . . . . . .  C ADDR   07CDH   R   SEG=MAIN   1391#
GOKLB. . . . . . .  C ADDR   0E89H   R   SEG=MAIN   2407 2429#
GOOFF1 . . . . . .  C ADDR   1624H   R   SEG=MAIN   3574# 3582
GOOFF2 . . . . . .  C ADDR   163FH   R   SEG=MAIN   3593# 3601
GOOFF3 . . . . . .  C ADDR   165AH   R   SEG=MAIN   3611# 3619
GOOFF4 . . . . . .  C ADDR   1675H   R   SEG=MAIN   3630# 3638
GOONIN . . . . . .  C ADDR   07BFH   R   SEG=MAIN   1384# 1419 1431 1653 1668
GOONIN1. . . . . .  C ADDR   09B1H   R   SEG=MAIN   1645 1653#
GOONIN2. . . . . .  C ADDR   09AFH   R   SEG=MAIN   1648 1652#
GOONIND. . . . . .  C ADDR   09E9H   R   SEG=MAIN   1387 1693#
GOONOF9. . . . . .  C ADDR   2599H   R   SEG=MAIN   5943# 5951
GOONOFF. . . . . .  C ADDR   15E9H   R   SEG=MAIN   3534# 3542
GOONT. . . . . . .  C ADDR   0C16H   R   SEG=MAIN   2025 2066#
GOPAROL. . . . . .  C ADDR   1C5BH   R   SEG=MAIN   4284 4442 4451#
GOPAROM. . . . . .  C ADDR   1B2CH   R   SEG=MAIN   4282# 4285 4292
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   147

GOPART . . . . . .  C ADDR   033EH   R   SEG=MAIN   837 840#
GOSK19 . . . . . .  C ADDR   10E9H   R   SEG=MAIN   2787 2796#
GOTO7. . . . . . .  C ADDR   12E7H   R   SEG=MAIN   3134# 3220 3227 3289 3310 3337 3349 3390 3394 3441 3484 3499 3558
                                           3723 3726 3777 3780 3836 3848 3854 3880 3882 3923 3946 3964 4019 4151 4214
                                           4222 4230 4328 4403 4407 4487 4497 4531 4582 4584 4598 4610 4671 4855 4866
GOTOKD . . . . . .  C ADDR   0640H   R   SEG=MAIN   1164 1187#
GOTOSTROB. . . . .  C ADDR   0BF8H   R   SEG=MAIN   2036 2039 2042 2045 2048#
GOUT6. . . . . . .  C ADDR   0E3EH   R   SEG=MAIN   2397# 2425
GOUT6__. . . . . .  C ADDR   0E39H   R   SEG=MAIN   2384 2393#
GOVVLIST . . . . .  C ADDR   192BH   R   SEG=MAIN   4002 4024#
GOZNAK . . . . . .  C ADDR   02F0H   R   SEG=MAIN   738 786#
HNOR11 . . . . . .  C ADDR   1439H   R   SEG=MAIN   3274 3314#
HNOR12 . . . . . .  C ADDR   13E1H   R   SEG=MAIN   3264 3268#
HNOT1. . . . . . .  C ADDR   1485H   R   SEG=MAIN   3241 3358#
HNOT2. . . . . . .  C ADDR   13AFH   R   SEG=MAIN   3239#
HR12 . . . . . . .  C ADDR   13D7H   R   SEG=MAIN   3258 3264#
HVI1113. . . . . .  C ADDR   13D1H   R   SEG=MAIN   3261# 3267 3272
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 568 699 1979 5402 5519 5526 5646 5653
                                           6009 8981 8989 9037 9047
IE0. . . . . . . .  B ADDR   0088H.1 A      149#
IE1. . . . . . . .  B ADDR   0088H.3 A      147#
INCT . . . . . . .  C ADDR   13ABH   R   SEG=MAIN   3234 3236#
IND. . . . . . . .  C ADDR   22A4H   R   SEG=MAIN   675 683 740 770 1429 1553 1557 1651 1839 2438 2442 2453 3170 3400
                                           3417 3922 4134 4186 4288 4491 4677 4863 5406# 5827 5845 6025 6030 6042
                                           7154
INDOLL . . . . . .  C ADDR   099AH   R   SEG=MAIN   1640 1641 1645#
INIACP . . . . . .  C ADDR   28C7H   R   SEG=MAIN   691 3377 6521#
INNOT1_2 . . . . .  C ADDR   17E2H   R   SEG=MAIN   3845 3850#
INNOT3 . . . . . .  C ADDR   17D3H   R   SEG=MAIN   3837 3842#
INNOT6 . . . . . .  C ADDR   17C7H   R   SEG=MAIN   3832 3837#
INTER2 . . . . . .  C ADDR   2298H   R   SEG=MAIN   265 5395#
INTERVA. . . . . .  D ADDR   00CDH   A      417# 666 2066 3800 3899 5566 5913
INTMUL . . . . . .  C ADDR   0C39H   R   SEG=MAIN   2081 2087#
INTMUL1. . . . . .  C ADDR   0C3CH   R   SEG=MAIN   2088#
INTMUL2. . . . . .  C ADDR   0C51H   R   SEG=MAIN   2101# 2110 2120 2126 2130
INTN . . . . . . .  C ADDR   1874H   R   SEG=MAIN   3937#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IS_2 . . . . . . .  B ADDR   0021H.4 A      362# 1950 1976 5518 5525 5645 5652 5657
IS_CMD . . . . . .  B ADDR   0023H.5 A      365# 703 5475 5741 5758 5770 5933
IS_IZM . . . . . .  B ADDR   0023H.7 A      364# 2384 2385 5759 5771
IS_MEM . . . . . .  B ADDR   0021H.6 A      363# 5992
IS_RS. . . . . . .  B ADDR   0023H.6 A      366# 1487 1939 5510 5514 5521 5528 5648 5655
IT0. . . . . . . .  B ADDR   0088H.0 A      150#
IT1. . . . . . . .  B ADDR   0088H.2 A      148#
IZCHI. . . . . . .  C ADDR   146AH   R   SEG=MAIN   3339#
IZMAN. . . . . . .  C ADDR   0F28H   R   SEG=MAIN   2341 2386 2526#
IZMAN1 . . . . . .  C ADDR   0F2EH   R   SEG=MAIN   2528#
IZMFUN . . . . . .  C ADDR   0F3AH   R   SEG=MAIN   2454 2463 2471 2532 2537#
IZMPAT . . . . . .  C ADDR   0F3EH   R   SEG=MAIN   2423 2439 2443 2502 2541#
IZMT2. . . . . . .  C ADDR   0F4DH   R   SEG=MAIN   2557 2562#
IZMT3. . . . . . .  C ADDR   0F58H   R   SEG=MAIN   2562 2568#
JFINIS . . . . . .  C ADDR   2F17H   R   SEG=MAIN   7611 7619#
KD . . . . . . . .  C ADDR   27DEH   R   SEG=MAIN   6335#
KEYB1. . . . . . .  C ADDR   0E08H   R   SEG=MAIN   285 2348# 5760 5772
KEYB2. . . . . . .  C ADDR   1277H   R   SEG=MAIN   287 3056#
KFULL. . . . . . .  C ADDR   16C7H   R   SEG=MAIN   3500 3677#
KFULLR . . . . . .  C ADDR   15A9H   R   SEG=MAIN   3495 3500#
KGO23. . . . . . .  C ADDR   1611H   R   SEG=MAIN   3494 3564#
KKOUT6 . . . . . .  C ADDR   1237H   R   SEG=MAIN   2343 3018#
KLBOFF . . . . . .  C ADDR   1337H   R   SEG=MAIN   3163 3181#
KLEV1. . . . . . .  C ADDR   1583H   R   SEG=MAIN   3452 3485#
KLEV2. . . . . . .  C ADDR   1588H   R   SEG=MAIN   3485 3487#
KLEV21 . . . . . .  C ADDR   15ACH   R   SEG=MAIN   3492 3501#
KLEV22 . . . . . .  C ADDR   1592H   R   SEG=MAIN   3480 3489 3492#
KLEV23 . . . . . .  C ADDR   15BDH   R   SEG=MAIN   3501 3509#
KLEV3. . . . . . .  C ADDR   158DH   R   SEG=MAIN   3487 3489#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   148

KLMAS. . . . . . .  C ADDR   03EBH   R   SEG=MAIN   869 931#
KNAVP. . . . . . .  C ADDR   1346H   R   SEG=MAIN   3114 3189#
KNIZM. . . . . . .  B ADDR   0023H.0 A      353# 1366 1641 1796 1830 2504 2527 2529 2535 5557 5755 5767
KNIZMON. . . . . .  C ADDR   0F35H   R   SEG=MAIN   2527 2535#
KNKMP. . . . . . .  C ADDR   125EH   R   SEG=MAIN   3044# 3104
KNLEFT . . . . . .  C ADDR   1354H   R   SEG=MAIN   3048 3196#
KNMEM. . . . . . .  C ADDR   14E2H   R   SEG=MAIN   3054 3410#
KNMENU . . . . . .  C ADDR   1309H   R   SEG=MAIN   3120 3154#
KNNUL. . . . . . .  C ADDR   1375H   R   SEG=MAIN   3047 3214#
KNOPT. . . . . . .  C ADDR   0F60H   R   SEG=MAIN   2340 2576#
KNRAZR . . . . . .  C ADDR   0F75H   R   SEG=MAIN   2339 2589#
KNRIGHT. . . . . .  C ADDR   0EB6H   R   SEG=MAIN   2413 2458#
KNVICH . . . . . .  C ADDR   0ED7H   R   SEG=MAIN   2422 2476#
KOEFKD . . . . . .  D ADDR   00A0H   A      397# 631 4807 4817 4909 4917
KOEFKM . . . . . .  D ADDR   0094H   A      391# 629 1159 1254 2312
KOEFKP . . . . . .  D ADDR   0090H   A      390# 627 1156 1249 2274
KOMUL. . . . . . .  C ADDR   0769H   R   SEG=MAIN   1340 1344#
KOMULPZ. . . . . .  C ADDR   0763H   R   SEG=MAIN   1337 1341#
KONSTA . . . . . .  D ADDR   00BCH   A      410# 1465 4656 5575 5693 6729
KON_B. . . . . . .  C ADDR   1040H   R   SEG=MAIN   2682 2699#
KOR0US . . . . . .  C ADDR   270BH   R   SEG=MAIN   2174 6209#
KOR0_AN. . . . . .  D ADDR   0084H   A      387# 1246 2185 2264 2302
KORDEC1. . . . . .  C ADDR   0691H   R   SEG=MAIN   1232 1239#
KORDEC10 . . . . .  C ADDR   0671H   R   SEG=MAIN   1220#
KORNUL . . . . . .  C ADDR   0CC7H   R   SEG=MAIN   1170 2166#
KVVOD0 . . . . . .  C ADDR   16E3H   R   SEG=MAIN   3461 3685 3693#
LABEL43. . . . . .  C ADDR   1922H   R   SEG=MAIN   4020# 4028
LABEL7 . . . . . .  C ADDR   1A0BH   R   SEG=MAIN   4020 4139#
LABELA . . . . . .  C ADDR   02B4H   R   SEG=MAIN   743# 774 2137
LABELB . . . . . .  C ADDR   0AE1H   R   SEG=MAIN   1212 1671 1851# 2154 2158 2160
LABELC . . . . . .  C ADDR   0F75H   R   SEG=MAIN   2590#
LABELE . . . . . .  C ADDR   0F3EH   R   SEG=MAIN   2539 2555# 2595 2598 2602 2606 2614 2646
LABELF . . . . . .  C ADDR   0FA0H   R   SEG=MAIN   2338 2615#
LABELH . . . . . .  C ADDR   1397H   R   SEG=MAIN   3046 3229#
LABELI . . . . . .  C ADDR   1D53H   R   SEG=MAIN   3244 3299 3351 4593#
LABELI2. . . . . .  C ADDR   141EH   R   SEG=MAIN   3299# 3300
LABELK . . . . . .  C ADDR   1525H   R   SEG=MAIN   3243 3443#
LABELL . . . . . .  C ADDR   1179H   R   SEG=MAIN   2747 2860 2868#
LABELL1. . . . . .  C ADDR   107DH   R   SEG=MAIN   2737# 2824 2942 2994
LABELN . . . . . .  C ADDR   11E3H   R   SEG=MAIN   2825 2951#
LABELP . . . . . .  C ADDR   18F8H   R   SEG=MAIN   3950 3971 4002# 4232
LABELS . . . . . .  C ADDR   18BDH   R   SEG=MAIN   3681 3971#
LABELS1. . . . . .  C ADDR   1B9FH   R   SEG=MAIN   4307 4341#
LABELS13 . . . . .  C ADDR   1CD9H   R   SEG=MAIN   4385 4511#
LABELS3. . . . . .  C ADDR   1D66H   R   SEG=MAIN   4603#
LABELS4. . . . . .  C ADDR   1D41H   R   SEG=MAIN   4384 4586#
LABL2. . . . . . .  C ADDR   11A5H   R   SEG=MAIN   2907# 3504
LABM . . . . . . .  C ADDR   1768H   R   SEG=MAIN   3505 3783#
LABN_1 . . . . . .  C ADDR   11EDH   R   SEG=MAIN   2953 2961#
LABN_2 . . . . . .  C ADDR   11E8H   R   SEG=MAIN   2951 2953#
LADD . . . . . . .  C ADDR   3058H   R   SEG=MAIN   848 882 897 913 1987 7846#
LADDX. . . . . . .  C ADDR   3069H   R   SEG=MAIN   7870#
LBTOF. . . . . . .  C ADDR   042DH   A      8960#
LCMP . . . . . . .  C ADDR   2E56H   R   SEG=MAIN   6129 6967 7426#
LDC_LONG . . . . .  C ADDR   2E6CH   R   SEG=MAIN   626 1339 1985 2269 2307 3224 5746 7446#
LDC_LTEMP. . . . .  C ADDR   2E8EH   R   SEG=MAIN   857 1118 1123 1128 1132 1264 1308 1346 1361 1399 1451 1456 1468
                                           1472 1534 1541 1547 1564 1570 1998 2003 2080 2085 2108 2115 2118 2124 2145
                                           2212 4044 4047 4072 4564 4659 4803 4888 4906 5053 5239 5388 5869 6143 7126
                                           7482#
LDX_LONG . . . . .  C ADDR   2EB4H   R   SEG=MAIN   7517#
LDX_LTEMP. . . . .  C ADDR   2EDAH   R   SEG=MAIN   7555#
LEFCUR . . . . . .  C ADDR   17F3H   R   SEG=MAIN   3860# 3932 3948
LEFKL. . . . . . .  C ADDR   135EH   R   SEG=MAIN   3196 3202#
LEFMEM11 . . . . .  C ADDR   1539H   R   SEG=MAIN   3453# 3486 3488 3490
LEFT21 . . . . . .  C ADDR   1712H   R   SEG=MAIN   3719 3724#
LEFT_S . . . . . .  C ADDR   1B97H   R   SEG=MAIN   4335# 4343
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   149

LEFT_SK. . . . . .  C ADDR   1CBAH   R   SEG=MAIN   4335 4499#
LEV220 . . . . . .  C ADDR   1595H   R   SEG=MAIN   3493# 3502
LEV2GO . . . . . .  C ADDR   1213H   R   SEG=MAIN   2950 2990#
LEVEL. . . . . . .  D ADDR   00B0H   A      404# 2445 2832 2874 3418 3428 3451 3695 6681
LI21 . . . . . . .  C ADDR   1474H   R   SEG=MAIN   3346 3348#
LI42_43. . . . . .  C ADDR   1991H   R   SEG=MAIN   4069# 4206
LIST_43. . . . . .  C ADDR   1A15H   R   SEG=MAIN   4022 4144#
LLDI2. . . . . . .  C ADDR   0F21H   R   SEG=MAIN   2517 2521#
LLDI23 . . . . . .  C ADDR   0F15H   R   SEG=MAIN   2509 2514#
LLDI3. . . . . . .  C ADDR   0F1CH   R   SEG=MAIN   2516 2518#
LLEV2. . . . . . .  C ADDR   11CEH   R   SEG=MAIN   2905 2940#
LLMUL. . . . . . .  C ADDR   2FC1H   R   SEG=MAIN   7740#
LLSUB. . . . . . .  C ADDR   3046H   R   SEG=MAIN   7822#
LLTOF. . . . . . .  C ADDR   0432H   A      8966#
LMUL . . . . . . .  C ADDR   2FC1H   R   SEG=MAIN   6925 7127 7742#
LOA3_X . . . . . .  C ADDR   2DA1H   R   SEG=MAIN   1952 2028 7190#
LOAB12 . . . . . .  C ADDR   2916H   R   SEG=MAIN   3375 6559#
LOAD . . . . . . .  D ADDR   00B7H   A      408# 2579 2620 3232 3371 6229
LOADB. . . . . . .  C ADDR   1498H   R   SEG=MAIN   3366 3369# 3401 3407
LOADB2 . . . . . .  C ADDR   14C4H   R   SEG=MAIN   3388 3392#
LOADCLE. . . . . .  C ADDR   1556H   R   SEG=MAIN   3466# 3688
LOADKD . . . . . .  C ADDR   2933H   R   SEG=MAIN   6591#
LOADR2 . . . . . .  C ADDR   2925H   R   SEG=MAIN   3944 4039 4561 4654 4700 6574#
LOADT. . . . . . .  C ADDR   2726H   R   SEG=MAIN   2581 2626 3238 6229#
LOADUS . . . . . .  C ADDR   26C5H   R   SEG=MAIN   692 1410 1658 2470 2536 3178 3182 3211 3378 4945 5624 5732 6153#
LOAHL_R2 . . . . .  C ADDR   20B8H   R   SEG=MAIN   5019 5031 5082# 5209 5225 5363 5376
LOBLOK . . . . . .  C ADDR   171DH   R   SEG=MAIN   3676 3731# 3750
LOCLE. . . . . . .  C ADDR   1551H   R   SEG=MAIN   3456 3464#
LOD1 . . . . . . .  C ADDR   2735H   R   SEG=MAIN   6237# 6242
LODT . . . . . . .  C ADDR   2744H   R   SEG=MAIN   6250# 6255
LOIZMK . . . . . .  C ADDR   13E4H   R   SEG=MAIN   3269# 3304
LOKAME1. . . . . .  C ADDR   1ADFH   R   SEG=MAIN   4245#
LOLEVT . . . . . .  C ADDR   2728H   R   SEG=MAIN   2451 6230#
LOLIST . . . . . .  C ADDR   1546H   R   SEG=MAIN   3458#
LOME1. . . . . . .  C ADDR   1E6EH   R   SEG=MAIN   4756# 4760 4763 4766 4769 4773 4776 4779 4782 4786
LOMENU . . . . . .  C ADDR   1E66H   R   SEG=MAIN   2764 2777 4245 4294 4316 4753#
LOOP . . . . . . .  C ADDR   2681H   R   SEG=MAIN   6099# 6100
LOOPS. . . . . . .  C ADDR   2F1AH   R   SEG=MAIN   7621# 7654
LOSPUS . . . . . .  C ADDR   26FFH   R   SEG=MAIN   2175 6192#
LOSTAT . . . . . .  C ADDR   156BH   R   SEG=MAIN   3470 3476#
LOTEXT . . . . . .  C ADDR   2740H   R   SEG=MAIN   1552 1556 1647 1650 2491 2657 2665 2673 2789 2797 2840 2849 2857
                                           2866 2878 3168 3261 3330 3413 3459 3467 3473 3478 3483 3498 3699 3732 3744
                                           3799 3920 3988 4012 4175 4211 4219 4227 4240 4262 4267 4313 4454 4501 4506
                                           4667 4756 4862 6247# 6803
LOTP . . . . . . .  C ADDR   2989H   R   SEG=MAIN   6631# 6641 6643
LOTPUS . . . . . .  C ADDR   2981H   R   SEG=MAIN   4324 6187 6628#
LOU. . . . . . . .  C ADDR   0F27H   R   SEG=MAIN   2504 2520 2524#
LOUIZM . . . . . .  C ADDR   0F04H   R   SEG=MAIN   2504# 2531 6184
LOUTF. . . . . . .  C ADDR   11C1H   R   SEG=MAIN   2932# 2941 2948 2952 2954
LOVICH . . . . . .  C ADDR   13DAH   R   SEG=MAIN   3265# 3297 3318 4713
LOWR . . . . . . .  C ADDR   155EH   R   SEG=MAIN   3464 3470#
LOWR1. . . . . . .  C ADDR   1563H   R   SEG=MAIN   3472# 3692
LSUB . . . . . . .  C ADDR   3046H   R   SEG=MAIN   1208 1379 6144 7823#
LTEMP. . . . . . .  N NUMB   0008H   A      1135 1137 1138 1139 6469 6470 6471 6472 6977 6980 6983 6986 7029 7030
                                           7031 7032 7247# 7612 7613 7614 7615 7624 7628 7632 7636 7639 7640 7641
                                           7642 7643 7644 7645 7646 7647 7648 7649 7650 7653 7656 7661 7665 7669 7679
                                           7682 7685 7688 7704 7707 7708 7710 7711 7713 7714 7716 7721 7722 7723 7724
                                           7744 7749 7757 7765 7770 7781 7789 7795 7803 7809 8177 8178 8217 8222 8224
                                           8233 8234 8235 8236 8467 8475 8488 8491 8494 8497 9069 9072 9075 9078
LWR. . . . . . . .  C ADDR   2C43H   R   SEG=MAIN   6916# 6920
LWRX . . . . . . .  C ADDR   2C07H   R   SEG=MAIN   6861# 6872
LWTOF. . . . . . .  C ADDR   042FH   A      8962#
MABIN. . . . . . .  D ADDR   006FH   A      300#
MAFORM . . . . . .  C ADDR   2C5EH   R   SEG=MAIN   1712 4074 5056 5243 5871 6924 6929 6934# 6966
MAIN . . . . . . .  C SEG    30A3H       REL=UNIT   242 292# 464
MANT1. . . . . . .  N NUMB   0002H   A      8175# 8202 8251 8252
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   150

MANT2. . . . . . .  N NUMB   0008H   A      8177# 8228 8229 8360 8362 8363 8365 8366 8368 8369 8371 8410 8411 8413
                                           8414 8416 8417 8419 8420 8424 8426 8429 8432 8530 8532 8533 8535 8536 8538
                                           8539 8541 8592 8594 8595 8597 8598 8600 8601 8603 8685 8689 8693 8697 8701
                                           8704 8707 8710
MARK0_8. . . . . .  C ADDR   1047H   R   SEG=MAIN   2684 2700 2702#
MARKER . . . . . .  D ADDR   00B2H   A      406# 604 2376 2644 2683 2691 2699 2709 2715 2914 2922 2961 2968 2980 3084
                                           3308 3325 3344 3437 3555 3656 3707 3715 3736 3762 3769 3827 3866 3873 3913
                                           3956 4014 4030 4149 4295 4390 4397 4482 4495 4518 4525 4572 4603 4622 4629
                                           4663 4673 4684 4709 6658 6684 6708 6719 6777
MARLE. . . . . . .  C ADDR   29FCH   R   SEG=MAIN   3881 6705#
MARRI. . . . . . .  C ADDR   2A09H   R   SEG=MAIN   2988 6718#
MAS10. . . . . . .  C ADDR   040AH   R   SEG=MAIN   933 946#
MAS20. . . . . . .  C ADDR   048AH   R   SEG=MAIN   946 995#
MAS4 . . . . . . .  C ADDR   057EH   R   SEG=MAIN   993 1084#
MAS5DIV. . . . . .  C ADDR   05F2H   R   SEG=MAIN   1119 1124 1129 1133 1141#
MASFULL. . . . . .  C ADDR   05B9H   R   SEG=MAIN   1109 1112#
MASS0. . . . . . .  X ADDR   0100H   A      430 431# 934 939 964 970 1035 1041 1089 1095 6903
MASS1. . . . . . .  X ADDR   0104H   A      432# 942 962 973 1033 1043 1087 1098
MASS10 . . . . . .  X ADDR   0128H   A      441# 1014 1062
MASS11 . . . . . .  X ADDR   012CH   A      442# 1011 1064
MASS12 . . . . . .  X ADDR   0130H   A      443# 1009 1066
MASS13 . . . . . .  X ADDR   0134H   A      444# 1007 1068
MASS14 . . . . . .  X ADDR   0138H   A      445# 1005 1070
MASS15 . . . . . .  X ADDR   013CH   A      446# 1002 1072
MASS16 . . . . . .  X ADDR   0140H   A      447# 1000 1074
MASS17 . . . . . .  X ADDR   0144H   A      448# 998 1076
MASS18 . . . . . .  X ADDR   0148H   A      449# 996 1078
MASS19 . . . . . .  X ADDR   014CH   A      450# 1080
MASS2. . . . . . .  X ADDR   0108H   A      433# 959 975 1031 1045 1085 1100
MASS3. . . . . . .  X ADDR   010CH   A      434# 957 977 1028 1047 1102
MASS4. . . . . . .  X ADDR   0110H   A      435# 955 979 1026 1049
MASS5. . . . . . .  X ADDR   0114H   A      436# 953 981 1024 1051
MASS6. . . . . . .  X ADDR   0118H   A      437# 951 983 1022 1053
MASS7. . . . . . .  X ADDR   011CH   A      438# 949 985 1020 1055
MASS8. . . . . . .  X ADDR   0120H   A      439# 947 987 1018 1057
MASS9. . . . . . .  X ADDR   0124H   A      440# 989 1016 1059
MASX5. . . . . . .  C ADDR   05E8H   R   SEG=MAIN   1110 1135#
MAXG . . . . . . .  C ADDR   2217H   R   SEG=MAIN   5322# 5371
MAXVIX . . . . . .  C ADDR   2281H   R   SEG=MAIN   5379 5382#
MD_3 . . . . . . .  C ADDR   0B3DH   R   SEG=MAIN   1937#
MD_5 . . . . . . .  C ADDR   0B3DH   R   SEG=MAIN   1938#
ME11_15DE. . . . .  C ADDR   18B4H   R   SEG=MAIN   3966# 3985
ME11_15DEC . . . .  C ADDR   1ADEH   R   SEG=MAIN   3966 4244#
ME21_22. . . . . .  C ADDR   1189H   R   SEG=MAIN   2878# 2887
ME21_23. . . . . .  C ADDR   1B58H   R   SEG=MAIN   3999 4303#
ME21_23DEC . . . .  C ADDR   1B74H   R   SEG=MAIN   4310 4315#
ME3. . . . . . . .  C ADDR   0283H   R   SEG=MAIN   703 705#
MEAVP. . . . . . .  C ADDR   1350H   R   SEG=MAIN   3190 3193#
MECLE. . . . . . .  C ADDR   01A4H   R   SEG=MAIN   572# 574
MEFF . . . . . . .  C ADDR   01ABH   R   SEG=MAIN   576# 579
MEM10MS. . . . . .  C ADDR   02AFH   R   SEG=MAIN   740#
MEM12NO. . . . . .  C ADDR   16DEH   R   SEG=MAIN   3686 3690#
MENG . . . . . . .  C ADDR   2004H   R   SEG=MAIN   4981# 5029
MENU12 . . . . . .  C ADDR   1E72H   R   SEG=MAIN   4754 4758#
MENU13 . . . . . .  C ADDR   1E7AH   R   SEG=MAIN   4758 4761#
MENU14 . . . . . .  C ADDR   1E82H   R   SEG=MAIN   4761 4764#
MENU15 . . . . . .  C ADDR   1E8AH   R   SEG=MAIN   4764 4767#
MENU21 . . . . . .  C ADDR   1E92H   R   SEG=MAIN   4767 4771#
MENU22 . . . . . .  C ADDR   1E9AH   R   SEG=MAIN   4771 4774#
MENU23 . . . . . .  C ADDR   1EA2H   R   SEG=MAIN   4774 4777#
MENU31 . . . . . .  C ADDR   1EAAH   R   SEG=MAIN   4777 4780#
MENU41 . . . . . .  C ADDR   1EB2H   R   SEG=MAIN   4780 4784#
MENUOFF. . . . . .  C ADDR   132BH   R   SEG=MAIN   3161 3174#
MENUON . . . . . .  C ADDR   18EAH   R   SEG=MAIN   3990#
MERR . . . . . . .  C ADDR   1306H   R   SEG=MAIN   3151# 3160
ME_14. . . . . . .  C ADDR   1575H   R   SEG=MAIN   3480#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   151

ME_41. . . . . . .  C ADDR   1C1EH   R   SEG=MAIN   4341 4411#
ME_5 . . . . . . .  C ADDR   0B51H   R   SEG=MAIN   1939 1949#
ME_52. . . . . . .  C ADDR   1BF2H   R   SEG=MAIN   4387# 4411
ME_52V . . . . . .  C ADDR   1C0FH   R   SEG=MAIN   4401 4403#
ME_6 . . . . . . .  C ADDR   0B8BH   R   SEG=MAIN   1950 1975 1982#
MIDL . . . . . . .  C ADDR   2F4DH   R   SEG=MAIN   7616 7651#
MIGN . . . . . . .  C ADDR   2A39H   R   SEG=MAIN   5410 6777#
MIGNN. . . . . . .  C ADDR   2A41H   R   SEG=MAIN   6778 6783#
MIN4_HL. . . . . .  C ADDR   20C4H   R   SEG=MAIN   5095# 5128 5154 5289 5312
MING . . . . . . .  C ADDR   2122H   R   SEG=MAIN   5165# 5219
MINIVIX. . . . . .  C ADDR   218CH   R   SEG=MAIN   5230 5235# 5382
MLABL2 . . . . . .  C ADDR   1748H   R   SEG=MAIN   3754# 3785 4023
MLABL2R. . . . . .  C ADDR   1928H   R   SEG=MAIN   4023# 4026
MMM. . . . . . . .  C ADDR   02AAH   R   SEG=MAIN   736#
MO220. . . . . . .  C ADDR   098FH   R   SEG=MAIN   1224 1389 1640#
MO500I . . . . . .  C ADDR   08FCH   R   SEG=MAIN   1436 1555#
MO500I_. . . . . .  C ADDR   0822H   R   SEG=MAIN   1435# 1458
MO500R . . . . . .  C ADDR   08F0H   R   SEG=MAIN   1434 1551#
MO500R_. . . . . .  C ADDR   081FH   R   SEG=MAIN   1433# 1453
MODF . . . . . . .  B ADDR   00F8H.5 A      231#
MOUTF. . . . . . .  C ADDR   1116H   R   SEG=MAIN   2826# 2837 2846 2854 2863 2871
MOUTKMEM . . . . .  C ADDR   18B7H   R   SEG=MAIN   3967# 3975
MOVE28 . . . . . .  C ADDR   2CCBH   R   SEG=MAIN   1283 1301 1349 1460 2267 2305 4797 4880 4898 5021 5033 5048 5208
                                           5224 5362 5375 7029#
MOVE82 . . . . . .  C ADDR   2885H   R   SEG=MAIN   6469#
MOVEA3 . . . . . .  C ADDR   09E9H   R   SEG=MAIN   1696#
MOVEA3_. . . . . .  C ADDR   0B47H   R   SEG=MAIN   1941 1944#
MOVER3_. . . . . .  C ADDR   0892H   R   SEG=MAIN   1490 1493#
MOVLEFT. . . . . .  D ADDR   003AH   A      306# 2685 2930 2973 3327 3675 3716 3724 3778 3830 3874 4017 4298 4400
                                           4484 4528 4604 4632 6712
MOVRIG . . . . . .  D ADDR   003BH   A      305# 2681 2923 2927 2969 3328 3674 3720 3770 3774 3829 3878 4016 4297
                                           4485 4608 6721
MR_5 . . . . . . .  C ADDR   08B9H   R   SEG=MAIN   1487 1488 1522#
MSTEN. . . . . . .  B ADDR   00F8H.1 A      235#
MTB2 . . . . . . .  C ADDR   23B8H   R   SEG=MAIN   5620 5627#
MTF. . . . . . . .  C ADDR   244CH   R   SEG=MAIN   5702 5716#
MTF1 . . . . . . .  C ADDR   2458H   R   SEG=MAIN   5718 5721#
MTF2 . . . . . . .  C ADDR   2413H   R   SEG=MAIN   5638 5673 5676# 5707 5734
MTF3 . . . . . . .  C ADDR   2476H   R   SEG=MAIN   5726 5734#
MTF4 . . . . . . .  C ADDR   24E5H   R   SEG=MAIN   5816 5820#
MTG. . . . . . . .  C ADDR   245DH   R   SEG=MAIN   5716 5724#
MTH. . . . . . . .  C ADDR   248DH   R   SEG=MAIN   5724 5752#
MTH1 . . . . . . .  C ADDR   24A3H   R   SEG=MAIN   5754 5764#
MTH2 . . . . . . .  C ADDR   24B3H   R   SEG=MAIN   5765 5774#
MTI. . . . . . . .  C ADDR   24B6H   R   SEG=MAIN   5762 5779#
MTI0 . . . . . . .  C ADDR   24A1H   R   SEG=MAIN   5752 5762#
MTI1 . . . . . . .  C ADDR   24B9H   R   SEG=MAIN   5786#
MTX. . . . . . . .  C ADDR   24B9H   R   SEG=MAIN   5779 5791#
MTX0 . . . . . . .  C ADDR   24EBH   R   SEG=MAIN   5818 5823#
MTX1 . . . . . . .  C ADDR   24F9H   R   SEG=MAIN   5824 5837#
MTX2 . . . . . . .  C ADDR   250DH   R   SEG=MAIN   5838 5848#
MTX3 . . . . . . .  C ADDR   2567H   R   SEG=MAIN   5849 5904#
MTX5 . . . . . . .  C ADDR   24D9H   R   SEG=MAIN   5796 5814#
MTXA . . . . . . .  C ADDR   251EH   R   SEG=MAIN   5860# 5899
MTXB . . . . . . .  C ADDR   2538H   R   SEG=MAIN   5873# 5874
MTXC . . . . . . .  C ADDR   2540H   R   SEG=MAIN   5878# 5879
MTXD . . . . . . .  C ADDR   2548H   R   SEG=MAIN   5883# 5884
MTXE . . . . . . .  C ADDR   2550H   R   SEG=MAIN   5888# 5889
MTY. . . . . . . .  C ADDR   24D6H   R   SEG=MAIN   5792 5812#
MTY2 . . . . . . .  C ADDR   2579H   R   SEG=MAIN   5812 5922#
MUP1 . . . . . . .  C ADDR   021AH   A      8527# 8570
MUP11. . . . . . .  C ADDR   0257H   A      8574# 8619
MUP2 . . . . . . .  C ADDR   0297H   A      8604 8618#
MUP3 . . . . . . .  C ADDR   026CH   A      8573 8589#
MVV11. . . . . . .  C ADDR   1718H   R   SEG=MAIN   3696 3729#
MVV12. . . . . . .  C ADDR   1730H   R   SEG=MAIN   3729 3741#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   152

N12DELCH . . . . .  C ADDR   0DEBH   R   SEG=MAIN   2323 2331#
N4DELCH. . . . . .  C ADDR   0D97H   R   SEG=MAIN   2247 2285#
N8DELCH. . . . . .  C ADDR   0DD9H   R   SEG=MAIN   2285 2323#
NBIMENU. . . . . .  C ADDR   111CH   R   SEG=MAIN   2830#
NBLOK. . . . . . .  D ADDR   0038H   A      308# 664 1956 2033 3520 3644 3733 3797 4010 4097 5542 5804 5978 7117 7138
                                           7169
NE05 . . . . . . .  C ADDR   0358H   A      8756 8758 8760 8763#
NELEM. . . . . . .  D ADDR   0037H   A      309# 665 4041 4154 4158
NEXIN. . . . . . .  C ADDR   22B1H   R   SEG=MAIN   5413# 5420
NEXTMAX. . . . . .  C ADDR   224CH   R   SEG=MAIN   5352 5359#
NEXTMEA. . . . . .  C ADDR   2039H   R   SEG=MAIN   5011 5019#
NEXTMIN. . . . . .  C ADDR   2157H   R   SEG=MAIN   5197 5205#
NMEM_MENU. . . . .  C ADDR   18BAH   R   SEG=MAIN   3969# 3973
NMINUS . . . . . .  C ADDR   06AEH   R   SEG=MAIN   1251 1255#
NMINUS3. . . . . .  C ADDR   0612H   R   SEG=MAIN   1158 1160#
NNDELCH. . . . . .  C ADDR   0D57H   R   SEG=MAIN   2233 2247#
NNMEMB . . . . . .  C ADDR   121FH   R   SEG=MAIN   2828 2996#
NNNOTT . . . . . .  C ADDR   1482H   R   SEG=MAIN   3356# 3359
NNNUL. . . . . . .  C ADDR   0A67H   R   SEG=MAIN   1772 1775#
NO . . . . . . . .  C ADDR   2F35H   R   SEG=MAIN   7626 7630 7634 7638#
NO0CHK . . . . . .  C ADDR   126DH   R   SEG=MAIN   3050#
NO0CHKL. . . . . .  C ADDR   0DFEH   R   SEG=MAIN   2343#
NO0KEY . . . . . .  C ADDR   02C4H   R   SEG=MAIN   747 754#
NO10MSV. . . . . .  C ADDR   185BH   R   SEG=MAIN   3918 3924#
NO11V6 . . . . . .  C ADDR   0FF7H   R   SEG=MAIN   2652 2660#
NO12V6 . . . . . .  C ADDR   100BH   R   SEG=MAIN   2660 2668#
NO13V6 . . . . . .  C ADDR   101FH   R   SEG=MAIN   2668 2678#
NO21P7 . . . . . .  C ADDR   1DFEH   R   SEG=MAIN   4642 4691#
NO23RI . . . . . .  C ADDR   10C8H   R   SEG=MAIN   2775 2779#
NO2MSV . . . . . .  C ADDR   1858H   R   SEG=MAIN   3923# 3924 3934
NO2PARN. . . . . .  C ADDR   09DEH   R   SEG=MAIN   1679 1685#
NO31N. . . . . . .  C ADDR   1812H   R   SEG=MAIN   3887#
NO31RI . . . . . .  C ADDR   10FEH   R   SEG=MAIN   2781 2816#
NO3PARN. . . . . .  C ADDR   09D4H   R   SEG=MAIN   1679# 1754
NO4DEL . . . . . .  C ADDR   0CFAH   R   SEG=MAIN   2179 2196#
NO5DEL . . . . . .  C ADDR   0D19H   R   SEG=MAIN   2211# 2219
NO6DEL . . . . . .  C ADDR   0D27H   R   SEG=MAIN   2209 2217#
NOAVK. . . . . . .  C ADDR   0680H   R   SEG=MAIN   1181 1229# 2227
NOAVP. . . . . . .  C ADDR   07A5H   R   SEG=MAIN   1370# 1401 1404
NOBAVP . . . . . .  C ADDR   0A85H   R   SEG=MAIN   1554 1558 1638 1790 1794#
NOBEF99. . . . . .  C ADDR   037BH   R   SEG=MAIN   854 870# 888 903 919
NOBIT. . . . . . .  C ADDR   0245H   A      8542 8556#
NOBITIZM . . . . .  C ADDR   0A8EH   R   SEG=MAIN   1796 1799#
NOBL21 . . . . . .  C ADDR   1192H   R   SEG=MAIN   2875 2883#
NOBL22 . . . . . .  C ADDR   119CH   R   SEG=MAIN   2883 2903#
NOBUF. . . . . . .  C ADDR   0AC3H   R   SEG=MAIN   1827 1829#
NOBUF0 . . . . . .  C ADDR   0C9DH   R   SEG=MAIN   2023 2142#
NOCHI0 . . . . . .  C ADDR   09D0H   R   SEG=MAIN   1390 1670#
NOCHIND. . . . . .  C ADDR   02E3H   R   SEG=MAIN   768 776#
NOCHN10. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1121 1126#
NOCHN2 . . . . . .  C ADDR   05CAH   R   SEG=MAIN   1116 1121#
NOCHN20. . . . . .  C ADDR   05E0H   R   SEG=MAIN   1126 1131#
NODI2. . . . . . .  C ADDR   09B4H   R   SEG=MAIN   1643 1655#
NODI6. . . . . . .  C ADDR   1360H   R   SEG=MAIN   3200 3204#
NODI8. . . . . . .  C ADDR   0A3AH   R   SEG=MAIN   1737 1744#
NODI8K . . . . . .  C ADDR   1C8EH   R   SEG=MAIN   4470 4475#
NODI8_43 . . . . .  C ADDR   19EEH   R   SEG=MAIN   4111 4118#
NODI9. . . . . . .  C ADDR   09B9H   R   SEG=MAIN   1656 1658#
NODI9_43 . . . . .  C ADDR   19F9H   R   SEG=MAIN   4118 4125#
NODIS9 . . . . . .  C ADDR   0A4DH   R   SEG=MAIN   1744 1756#
NODISK9. . . . . .  C ADDR   1C96H   R   SEG=MAIN   4474 4475 4482#
NOENDLI. . . . . .  C ADDR   2D6DH   R   SEG=MAIN   7151 7155#
NOEND_M. . . . . .  C ADDR   25CCH   R   SEG=MAIN   5991 5995#
NOEQU1 . . . . . .  C ADDR   1204H   R   SEG=MAIN   2972 2976#
NOEQU2 . . . . . .  C ADDR   180CH   R   SEG=MAIN   3877 3881#
NOFIZM . . . . . .  C ADDR   0FD8H   R   SEG=MAIN   2616 2648#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   153

NOFT1. . . . . . .  C ADDR   0FB2H   R   SEG=MAIN   2621 2625#
NOFZ . . . . . . .  C ADDR   0C98H   R   SEG=MAIN   2133 2137#
NOH37. . . . . . .  C ADDR   13F9H   R   SEG=MAIN   3257 3282# 3292
NOHNOT1. . . . . .  C ADDR   14D7H   R   SEG=MAIN   3360 3402#
NOHNOT2. . . . . .  C ADDR   14CCH   R   SEG=MAIN   3395# 3402
NOKLB. . . . . . .  C ADDR   0ABDH   R   SEG=MAIN   1825 1827#
NOKORR . . . . . .  C ADDR   0628H   R   SEG=MAIN   1168 1171#
NOLAH. . . . . . .  C ADDR   13BBH   R   SEG=MAIN   3229 3247#
NOLI_43. . . . . .  C ADDR   1A6AH   R   SEG=MAIN   4144 4189#
NOM31. . . . . . .  C ADDR   17EAH   R   SEG=MAIN   3782 3856#
NOM32. . . . . . .  C ADDR   1863H   R   SEG=MAIN   3856 3930#
NOM33. . . . . . .  C ADDR   1891H   R   SEG=MAIN   3930 3950#
NOMARL . . . . . .  C ADDR   1D7BH   R   SEG=MAIN   4606 4612 4616#
NOMAXI . . . . . .  C ADDR   2264H   R   SEG=MAIN   5366 5369#
NOME11 . . . . . .  C ADDR   16CEH   R   SEG=MAIN   3683#
NOMEM11. . . . . .  C ADDR   1137H   R   SEG=MAIN   2833 2843#
NOMEM12. . . . . .  C ADDR   114DH   R   SEG=MAIN   2843 2851#
NOMEM13. . . . . .  C ADDR   1163H   R   SEG=MAIN   2851 2860#
NOMEMK . . . . . .  C ADDR   16CBH   R   SEG=MAIN   3427 3681#
NOMINI . . . . . .  C ADDR   216FH   R   SEG=MAIN   5214 5217#
NON1C. . . . . . .  C ADDR   0F86H   R   SEG=MAIN   2596 2600#
NONULAVT . . . . .  C ADDR   0665H   R   SEG=MAIN   1176 1214#
NONULDEL . . . . .  C ADDR   0CDCH   R   SEG=MAIN   2167 2178#
NOP1OLL. . . . . .  C ADDR   0AD7H   R   SEG=MAIN   1835 1836 1839#
NOP3_0 . . . . . .  C ADDR   09D4H   R   SEG=MAIN   1672#
NOPART1. . . . . .  C ADDR   037FH   R   SEG=MAIN   843 876#
NOPART2. . . . . .  C ADDR   039FH   R   SEG=MAIN   876 893#
NOPART3. . . . . .  C ADDR   03BFH   R   SEG=MAIN   893 908#
NOPART4. . . . . .  C ADDR   03DFH   R   SEG=MAIN   908 924#
NOPLUS . . . . . .  C ADDR   106FH   R   SEG=MAIN   2727 2730#
NOPOIN7. . . . . .  C ADDR   1D92H   R   SEG=MAIN   4602 4637#
NOPOINT. . . . . .  C ADDR   1D5EH   R   SEG=MAIN   4596 4600#
NORDN. . . . . . .  C ADDR   00F6H   A      8263# 8296
NORDN1 . . . . . .  C ADDR   0107H   A      8265 8279#
NORIG2 . . . . . .  C ADDR   11D7H   R   SEG=MAIN   2937 2945#
NORIM6 . . . . . .  C ADDR   121FH   R   SEG=MAIN   2998#
NORIME . . . . . .  C ADDR   10AEH   R   SEG=MAIN   2762 2766#
NORIME1. . . . . .  C ADDR   10A8H   R   SEG=MAIN   2764# 2767 2780
NORM1. . . . . . .  C ADDR   00F0H   A      8258# 8455 8632 8734 8951
NORR11 . . . . . .  C ADDR   1411H   R   SEG=MAIN   3293#
NORR12 . . . . . .  C ADDR   1421H   R   SEG=MAIN   3293 3300# 3314
NORUP. . . . . . .  C ADDR   0119H   A      8262 8299#
NORUP1 . . . . . .  C ADDR   011EH   A      8304# 8322
NORUP2 . . . . . .  C ADDR   0132H   A      8306 8323#
NORVICH. . . . . .  C ADDR   0ADAH   R   SEG=MAIN   1753 1847#
NOSAV1 . . . . . .  C ADDR   0BE6H   R   SEG=MAIN   2034 2037#
NOSAV2 . . . . . .  C ADDR   0BEDH   R   SEG=MAIN   2037 2040#
NOSAV3 . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   2040 2043#
NOSUB. . . . . . .  C ADDR   2F70H   R   SEG=MAIN   7660 7664 7668 7673#
NOSV1. . . . . . .  C ADDR   0B69H   R   SEG=MAIN   1957 1960#
NOSV2. . . . . . .  C ADDR   0B70H   R   SEG=MAIN   1960 1963#
NOSV3. . . . . . .  C ADDR   0B77H   R   SEG=MAIN   1963 1966#
NOT1IN . . . . . .  C ADDR   0CB2H   R   SEG=MAIN   1920 2152#
NOT1_7 . . . . . .  C ADDR   12F6H   R   SEG=MAIN   3136 3143#
NOT2IN . . . . . .  C ADDR   0CBAH   R   SEG=MAIN   2152 2156#
NOT2_7 . . . . . .  C ADDR   1301H   R   SEG=MAIN   3143 3148#
NOT3IN . . . . . .  C ADDR   0CC2H   R   SEG=MAIN   2156 2159#
NOTAKT . . . . . .  C ADDR   0A98H   R   SEG=MAIN   1800 1804#
NOTE21 . . . . . .  C ADDR   0725H   R   SEG=MAIN   1270 1312#
NOTE22 . . . . . .  C ADDR   0740H   R   SEG=MAIN   1312 1324#
NOTESTIZM. . . . .  C ADDR   0758H   R   SEG=MAIN   1238 1336#
NOTT1. . . . . . .  C ADDR   0C30H   R   SEG=MAIN   2078 2083#
NOTT2. . . . . . .  C ADDR   0C58H   R   SEG=MAIN   2083 2106#
NOTT3. . . . . . .  C ADDR   0C66H   R   SEG=MAIN   2106 2113#
NOTT4. . . . . . .  C ADDR   0C7DH   R   SEG=MAIN   2113 2122#
NOTT5. . . . . . .  C ADDR   0C8BH   R   SEG=MAIN   2122 2127#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   154

NOT_1. . . . . . .  C ADDR   0F8DH   R   SEG=MAIN   2600 2605#
NOT_10 . . . . . .  C ADDR   0F8DH   R   SEG=MAIN   2604#
NOVIR. . . . . . .  C ADDR   1090H   R   SEG=MAIN   2637 2751#
NOVIR1 . . . . . .  C ADDR   0FC2H   R   SEG=MAIN   2637# 2648
NOZMEA . . . . . .  C ADDR   20B4H   R   SEG=MAIN   5076 5078#
NOZMIN . . . . . .  C ADDR   21C3H   R   SEG=MAIN   5261 5263#
NOZZBL . . . . . .  C ADDR   19E0H   R   SEG=MAIN   4100 4103 4106 4109#
NOZZMI . . . . . .  C ADDR   0A27H   R   SEG=MAIN   1732 1734#
NOZZMI1. . . . . .  C ADDR   19D0H   R   SEG=MAIN   4098 4101#
NOZZMI2. . . . . .  C ADDR   19D7H   R   SEG=MAIN   4101 4104#
NOZZMI3. . . . . .  C ADDR   19DEH   R   SEG=MAIN   4104 4108#
NOZZMI43 . . . . .  C ADDR   19C7H   R   SEG=MAIN   4094 4097#
NSEC1. . . . . . .  C ADDR   0A71H   R   SEG=MAIN   1776 1780#
NSEC10 . . . . . .  C ADDR   0A7CH   R   SEG=MAIN   1779 1783 1788#
NSEC11 . . . . . .  C ADDR   0A79H   R   SEG=MAIN   1780 1785#
NUERR. . . . . . .  D ADDR   0039H   A      307# 1427 1837 4286 4489 4675 6028 6040 6804
NULAVT . . . . . .  C ADDR   0D3CH   R   SEG=MAIN   2231#
NUMSIZE. . . . . .  N NUMB   0004H   A      7250# 7267 7305 7311 7385 7403
OBOARD . . . . . .  C ADDR   2EA6H   R   SEG=MAIN   7484 7498#
OBOARD1. . . . . .  C ADDR   2EEEH   R   SEG=MAIN   7557 7570#
OFFMENUM . . . . .  C ADDR   1522H   R   SEG=MAIN   3441# 3447
OK1. . . . . . . .  C ADDR   0186H   A      8389 8404#
OK2. . . . . . . .  C ADDR   01A0H   A      8406 8421#
OK3. . . . . . . .  C ADDR   01C4H   A      8438 8454#
OLDMAX . . . . . .  C ADDR   21E3H   R   SEG=MAIN   5280 5286#
OLDMEAN. . . . . .  C ADDR   1FEFH   R   SEG=MAIN   4963 4969#
OLDMIN . . . . . .  C ADDR   20EEH   R   SEG=MAIN   5118 5124#
ONBOAR1. . . . . .  C ADDR   2ECCH   R   SEG=MAIN   7519 7536#
ONBOARD. . . . . .  C ADDR   2E80H   R   SEG=MAIN   7448 7462#
ONMEM11. . . . . .  C ADDR   14FCH   R   SEG=MAIN   3173 3240 3262 3421# 3460 3468 3474 3479 3700 3740 3747 3989 3995
                                           4242 4246 4251 4265 4270 4300 4314 4317 4504 4509
ONMEM12. . . . . .  C ADDR   1B9AH   R   SEG=MAIN   4321 4337# 4345
ONMEM13. . . . . .  C ADDR   1D3EH   R   SEG=MAIN   4529 4584# 4588 4590
ONMIG. . . . . . .  C ADDR   2A4FH   R   SEG=MAIN   6787 6795#
ONTEST . . . . . .  C ADDR   0F3CH   R   SEG=MAIN   2526 2539#
ONVICH . . . . . .  C ADDR   0EF8H   R   SEG=MAIN   2483 2495#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 502
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 497
OUT43. . . . . . .  C ADDR   1A02H   R   SEG=MAIN   4134#
OUT6 . . . . . . .  C ADDR   121FH   R   SEG=MAIN   2337 2429 2473 2561 2566 2571 2587 2635 2743 2999#
OUT7 . . . . . . .  C ADDR   1E27H   R   SEG=MAIN   3044 3045 3140 3147 3151 3179 3185 3235 3425 3506 3841 3969 4136
                                           4143 4188 4280 4382 4579 4591 4686 4688 4716#
OUTA . . . . . . .  C ADDR   2A16H   R   SEG=MAIN   3331 6729#
OUTA2. . . . . . .  C ADDR   2A30H   R   SEG=MAIN   6740# 6745
OUTF . . . . . . .  C ADDR   0FB8H   R   SEG=MAIN   2631#
OUTFL. . . . . . .  C ADDR   1080H   R   SEG=MAIN   2735 2739#
OUTKMEM. . . . . .  C ADDR   1509H   R   SEG=MAIN   3428# 3450 3967
OUTMA. . . . . . .  C ADDR   1059H   R   SEG=MAIN   2718 2720#
OUTMAX . . . . . .  C ADDR   2269H   R   SEG=MAIN   5267 5356 5372#
OUTMEA . . . . . .  C ADDR   2054H   R   SEG=MAIN   4967 5015 5030#
OUTMENU. . . . . .  C ADDR   1B27H   R   SEG=MAIN   4279#
OUTMIN . . . . . .  C ADDR   2174H   R   SEG=MAIN   5104 5201 5221#
OUTR . . . . . . .  C ADDR   0953H   R   SEG=MAIN   1583 1606#
OUTR5. . . . . . .  C ADDR   096FH   R   SEG=MAIN   1604 1625#
OUTSKO . . . . . .  C ADDR   1BE5H   R   SEG=MAIN   4376 4380#
OUTSKO1. . . . . .  C ADDR   1BE0H   R   SEG=MAIN   4374 4377#
OUTVICH. . . . . .  C ADDR   0FC5H   R   SEG=MAIN   2638# 2650
OUTVIR . . . . . .  C ADDR   0E82H   R   SEG=MAIN   2396 2425#
OUT_KALI . . . . .  C ADDR   1F36H   R   SEG=MAIN   4864#
OV . . . . . . . .  B ADDR   00D0H.2 A      205# 7440
P. . . . . . . . .  B ADDR   00D0H.0 A      207#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5413 5417
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 475
P1 . . . . . . . .  D ADDR   0090H   A      32# 708 709 1836 4285 6048 6050 6053 6056 6060 6062 6063 6107 6109 6111
                                           6533 6540 7059 7062 7064 7067
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   155

P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 476
P2 . . . . . . . .  D ADDR   00A0H   A      47# 6081 6085 6094
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 477
P3 . . . . . . . .  D ADDR   00B0H   A      62# 486 2346 2395 2397 2399 2400 2403 2404 2408 2409 2411 2412 2414 2415
                                           2417 2418 2420 2421 2610 2611 2617 2618 2649 2650 2653 2654 2661 2662 2669
                                           2670 2678 2679 2722 2723 2733 2734 2759 2760 2773 2774 2784 2785 2820 2821
                                           2822 2823 2835 2836 2844 2845 2852 2853 2861 2862 2870 2871 2904 2905 2940
                                           2941 2949 2950 2990 2991 3020 3051 3091 3093 3095 3096 3099 3100 3102 3103
                                           3105 3106 3108 3113 3115 3116 3118 3119 3230 3233 3256 3257 3282 3283 3294
                                           3295 3301 3302 3315 3316 3358 3359 3446 3447 3449 3450 3453 3454 3493 3494
                                           3510 3511 3512 3513 3564 3565 3683 3684 3693 3694 3784 3785 3786 3787 3857
                                           3858 3887 3888 3931 3932 3933 3934 3951 3952 3953 3954 3972 3973 3974 3975
                                           3982 3983 4025 4026 4027 4028 4145 4146 4234 4235 4308 4309 4320 4321 4342
                                           4343 4344 4345 4388 4389 4405 4406 4412 4413 4414 4415 4587 4588 4589 4590
                                           4594 4595 4600 4601 4637 4638 4730 6080 6082 6084 6090 6091 6092 6095 6096
P3IF . . . . . . .  D ADDR   00ADH   A      59# 748 750 2345 2356 3019 3050 3065 4729
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 479
P4 . . . . . . . .  D ADDR   0084H   A      20# 2169 2189 2234 2316 2511 2513 4850 6162 6165 6181 6183 6633
P5 . . . . . . . .  D ADDR   0085H   A      21# 610 619 2171 2191 2236 2239 2244 2278 2280 2318 2521 2523 4854 6170
                                           6173 6203 6206 6637
P6 . . . . . . . .  D ADDR   0086H   A      22# 2049 2051 2054 2056 3022 3024 3027 3029 4733 4735 4738 4740
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 480
PACK1. . . . . . .  C ADDR   00DEH   A      8241# 8456 8633 8735 8952
PARERR . . . . . .  C ADDR   1CA3H   R   SEG=MAIN   4445 4447 4449 4489#
PARN . . . . . . .  D ADDR   00AFH   A      403# 616 1766 2591 3385 5546 5709
PAROL. . . . . . .  D ADDR   00A8H   A      399#
PART . . . . . . .  D ADDR   009AH   A      393# 611 841 1147 1188 1214 1229 1775 1848 1977 2077 2208 2477 2555 2592
                                           3134 3369 3384 3831 3917 5515 5538 5641 6174 6559
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 210 211 212 213 214 215 216 523
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 522
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 521
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 520 2058 2060 3031 3033 4742 4744 5396 5398
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 473
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 474 519
PCON . . . . . . .  D ADDR   0087H   A      23# 515
POIN3. . . . . . .  C ADDR   1D91H   R   SEG=MAIN   4635# 4689
POINA. . . . . . .  C ADDR   1DF9H   R   SEG=MAIN   4633 4688#
POINA1 . . . . . .  C ADDR   1D76H   R   SEG=MAIN   4605 4612#
POINA2 . . . . . .  C ADDR   1D70H   R   SEG=MAIN   4608# 4613
POZB . . . . . . .  C ADDR   1E1CH   R   SEG=MAIN   4702 4706#
PROD . . . . . . .  N NUMB   000CH   A      8178# 8522 8523 8524 8525 8545 8546 8547 8549 8550 8552 8553 8555 8577
                                           8579 8580 8582 8583 8585 8586 8588 8607 8608 8609 8611 8612 8614 8615 8617
                                           8628 8629 8630 8631 8652 8653 8654 8655 8671 8673 8674 8676 8677 8679 8680
                                           8682 8712 8729 8730 8731 8732
PS . . . . . . . .  B ADDR   00B8H.4 A      173#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8983 8987 9039 9042
PSW. . . . . . . .  D ADDR   00D0H   A      91# 200 201 202 203 204 205 206 207 2359 3009 3068 4727 5440 5494 6968
                                           6970 7913 7921
PT0. . . . . . . .  B ADDR   00B8H.1 A      176#
PT1. . . . . . . .  B ADDR   00B8H.3 A      174#
PT2. . . . . . . .  B ADDR   00B8H.5 A      172#
PX0. . . . . . . .  B ADDR   00B8H.0 A      177#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   156

PX1. . . . . . . .  B ADDR   00B8H.2 A      175#
PYSKST . . . . . .  C ADDR   0E8CH   R   SEG=MAIN   2419 2431#
P_IN . . . . . . .  D ADDR   0027H   A      371# 696 5474 5483 5485
P_OUT. . . . . . .  D ADDR   0026H   A      370# 1946 5452 5455 5609
QUES . . . . . . .  C ADDR   15B7H   R   SEG=MAIN   3506# 3511
QU_AVP . . . . . .  C ADDR   07A2H   R   SEG=MAIN   1367 1369#
R10. . . . . . . .  N NUMB   000AH   A      461# 1177 1422 1463 1475 2096 4448 6606 9006
R11. . . . . . . .  N NUMB   000BH   A      462# 1178 1421 1464 1474 2099 6610 9010
R8 . . . . . . . .  N NUMB   0008H   A      459# 1424 1461 1477 2090 4259 4444 6127 6598 8998
R9 . . . . . . . .  N NUMB   0009H   A      460# 1423 1462 1476 2093 4446 6128 6602 9002
RAFTERK. . . . . .  C ADDR   063EH   R   SEG=MAIN   1185# 1191
RB80 . . . . . . .  B ADDR   0098H.2 A      158#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK0. . . . . . .  B ADDR   00C8H.5 A      192#
RDDOUTF. . . . . .  C ADDR   160BH   R   SEG=MAIN   3560# 3565
RE1. . . . . . . .  C ADDR   268AH   R   SEG=MAIN   6107# 6113
RE11_7 . . . . . .  C ADDR   06E6H   R   SEG=MAIN   1281# 1323 1334
RE4BYTE. . . . . .  C ADDR   0454H   A      4258 4441 8994#
REA3_M . . . . . .  C ADDR   25AFH   R   SEG=MAIN   5956#
REA3_X . . . . . .  C ADDR   2DB3H   R   SEG=MAIN   4070 5861 7207#
REACP. . . . . . .  D ADDR   0077H   A      301# 723 725 727 729 787 803 810 818 826 833 845 879 894 910 925 2252
                                           2254 2256 2258 2290 2292 2294 2296
READ . . . . . . .  C ADDR   2688H   R   SEG=MAIN   722 724 726 6106#
READYACP . . . . .  C ADDR   0336H   R   SEG=MAIN   827 835#
READ_X2. . . . . .  C ADDR   2670H   R   SEG=MAIN   6089# 6099
REBYTE . . . . . .  C ADDR   027DH   R   SEG=MAIN   701# 741 765 871 2194 2216 2221 2246 2283 2321 2330 2332
REBYTE2. . . . . .  C ADDR   046CH   A      1273 1281 1299 1315 1326 1342 4870 4878 9014#
REBYTER. . . . . .  C ADDR   0D2CH   R   SEG=MAIN   2205 2221#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 481
REN0 . . . . . . .  B ADDR   0098H.4 A      156#
RENDKALIB. . . . .  C ADDR   1343H   R   SEG=MAIN   3187# 3189
RESAR2 . . . . . .  C ADDR   2CD7H   R   SEG=MAIN   846 880 895 911 926 938 968 1039 1093 1201 1244 1351 1373 1443
                                           1466 1531 1710 1996 2143 2182 2207 3217 4791 4799 4818 4896 4918 5023 5035
                                           5050 5149 5206 5222 5236 5308 5360 5373 5386 5729 6730 7037# 7191
RESAR8 . . . . . .  C ADDR   2C95H   R   SEG=MAIN   1160 1207 1247 1255 1378 2265 2303 6976#
RESA_HL. . . . . .  C ADDR   2D80H   R   SEG=MAIN   1951 2027 4957 4970 5112 5125 5275 5287 7168#
REZAM. . . . . . .  D ADDR   008CH   A      389# 2300
REZAP. . . . . . .  D ADDR   0088H   A      388# 2262
REZMUL . . . . . .  C ADDR   0696H   R   SEG=MAIN   1222 1236 1243#
REZ_A. . . . . . .  D ADDR   0062H   A      379# 859 927 937 967 1038 1092 2181
REZ_A0 . . . . . .  D ADDR   006AH   A      381# 1206 1377 1415 1664 2467 3208 3218 3225 5730 5747
REZ_A1 . . . . . .  D ADDR   0066H   A      380# 1143 1204 1243 1354 1372 1391
REZ_A2 . . . . . .  D ADDR   007BH   A      382# 1374
REZ_A3 . . . . . .  D ADDR   009CH   A      395# 1209 1380 1442 1709 1853 1942 1945 3216 4790 4895 5728 5872 7190
                                           7219
REZ_AK . . . . . .  D ADDR   00A4H   A      398# 4566 4798
REZ_AME. . . . . .  D ADDR   005EH   A      377# 1153 1162 1200 1257 1350
REZ_DEL. . . . . .  D ADDR   00C5H   A      415# 861
REZ_R. . . . . . .  D ADDR   00C9H   A      416# 1479 1489 1491 1530
RE_HL. . . . . . .  C ADDR   2D87H   R   SEG=MAIN   7172# 7181 7185 7188
RE_HL1 . . . . . .  C ADDR   2D8FH   R   SEG=MAIN   7170 7179#
RE_HL2 . . . . . .  C ADDR   2D96H   R   SEG=MAIN   7179 7183#
RE_HL3 . . . . . .  C ADDR   2D9DH   R   SEG=MAIN   7183 7187#
RFINDMEM . . . . .  C ADDR   108DH   R   SEG=MAIN   2749# 2751
RGO23NO. . . . . .  C ADDR   160EH   R   SEG=MAIN   3561# 3566
RGOTO7 . . . . . .  C ADDR   17E7H   R   SEG=MAIN   3854# 3888
RHNOR11. . . . . .  C ADDR   13EBH   R   SEG=MAIN   3255 3268 3274#
RHNOT1 . . . . . .  C ADDR   13B2H   R   SEG=MAIN   3233 3241#
RI . . . . . . . .  B ADDR   0098H.0 A      373# 5479 5480
RI0. . . . . . . .  B ADDR   0098H.0 A      160#
RI21_23. . . . . .  C ADDR   10B1H   R   SEG=MAIN   2757 2769#
RI6. . . . . . . .  C ADDR   10ABH   R   SEG=MAIN   2760 2765# 2774 2785 2819 2823
RIGBLO . . . . . .  C ADDR   119FH   R   SEG=MAIN   2904# 2936 2938
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   157

RIGBLOK. . . . . .  C ADDR   11DDH   R   SEG=MAIN   2949#
RIGHT2 . . . . . .  C ADDR   0EACH   R   SEG=MAIN   2446 2450#
RIGHT3 . . . . . .  C ADDR   0EB0H   R   SEG=MAIN   2448 2453#
RIKN . . . . . . .  C ADDR   1031H   R   SEG=MAIN   2685# 2701
RIZMAN . . . . . .  C ADDR   0DFBH   R   SEG=MAIN   2341# 2405
RI_31. . . . . . .  C ADDR   10CBH   R   SEG=MAIN   2772 2781#
RKNLEFT. . . . . .  C ADDR   126AH   R   SEG=MAIN   3048# 3107
RKNMEM . . . . . .  C ADDR   1274H   R   SEG=MAIN   3054# 3117
RKNNUL . . . . . .  C ADDR   1267H   R   SEG=MAIN   3047# 3101
RKNOPT . . . . . .  C ADDR   0DF8H   R   SEG=MAIN   2340# 2416
RKNRAZR. . . . . .  C ADDR   0DF5H   R   SEG=MAIN   2339# 2410
RKVVOD0. . . . . .  C ADDR   154EH   R   SEG=MAIN   3455 3461#
RLABELF. . . . . .  C ADDR   0DF2H   R   SEG=MAIN   2338# 2402
RLABELH. . . . . .  C ADDR   1264H   R   SEG=MAIN   3046# 3098
RLABELI. . . . . .  C ADDR   13B8H   R   SEG=MAIN   3244#
RLABELK. . . . . .  C ADDR   13B5H   R   SEG=MAIN   3243# 3247
RLABELL. . . . . .  C ADDR   108AH   R   SEG=MAIN   2747#
RLABELL1 . . . . .  C ADDR   121CH   R   SEG=MAIN   2991 2994#
RLABELN. . . . . .  C ADDR   1113H   R   SEG=MAIN   2821 2825#
RLABELP. . . . . .  C ADDR   1AC2H   R   SEG=MAIN   4232# 4235
RLABELS13. . . . .  C ADDR   1BEFH   R   SEG=MAIN   4385# 4413
RLABELS4 . . . . .  C ADDR   1BECH   R   SEG=MAIN   4384# 4387
RLABL2 . . . . . .  C ADDR   15B1H   R   SEG=MAIN   3504#
RLABM. . . . . . .  C ADDR   15B4H   R   SEG=MAIN   3505# 3509
RLEFCUR. . . . . .  C ADDR   188EH   R   SEG=MAIN   3948# 3952
RLER . . . . . . .  C ADDR   2A08H   R   SEG=MAIN   6713 6715#
RLIST_43 . . . . .  C ADDR   1925H   R   SEG=MAIN   4022# 4024
RMAS4. . . . . . .  C ADDR   0487H   R   SEG=MAIN   993# 995
RME21_23 . . . . .  C ADDR   18F5H   R   SEG=MAIN   3980 3999#
RMO220 . . . . . .  C ADDR   0678H   R   SEG=MAIN   1224# 1266
RNNMEMB. . . . . .  C ADDR   1119H   R   SEG=MAIN   2828# 2831
RNO3PARN . . . . .  C ADDR   0A4BH   R   SEG=MAIN   1754# 1767
RNOBUF0. . . . . .  C ADDR   0BCCH   R   SEG=MAIN   2000 2023#
RNOCHI0. . . . . .  C ADDR   07CAH   R   SEG=MAIN   1386 1390#
RNOH37 . . . . . .  C ADDR   140FH   R   SEG=MAIN   3292# 3295 3302 3316
RNOM31 . . . . . .  C ADDR   1765H   R   SEG=MAIN   3782# 3783
RNOMEMK. . . . . .  C ADDR   1506H   R   SEG=MAIN   3427# 3444
RNORVICH . . . . .  C ADDR   0A48H   R   SEG=MAIN   1701 1702 1753#
RNOT1IN. . . . . .  C ADDR   0B33H   R   SEG=MAIN   1850 1920#
RNOTESTIZM . . . .  C ADDR   068EH   R   SEG=MAIN   1238# 1268
ROUSTA . . . . . .  C ADDR   1AAEH   R   SEG=MAIN   4216 4224#
ROUSTA1. . . . . .  C ADDR   1ABFH   R   SEG=MAIN   4224 4230#
ROUT6. . . . . . .  C ADDR   0DEFH   R   SEG=MAIN   2337# 2401
ROUT7. . . . . . .  C ADDR   1261H   R   SEG=MAIN   3045# 3092 3097
ROUTMAX. . . . . .  C ADDR   21C7H   R   SEG=MAIN   5267# 5284
ROUTMIN. . . . . .  C ADDR   20D2H   R   SEG=MAIN   5104# 5122
RR0. . . . . . . .  N NUMB   0000H   A      453# 2360 3008 3069 4726
RR1. . . . . . . .  N NUMB   0001H   A      454# 2361 3007 3070 4725
RR2. . . . . . . .  N NUMB   0002H   A      456# 1275 1287 1293 1305 1317 1328 2362 3006 3071 4050 4058 4724 4872
                                           4884 4890 4902 6140
RR3. . . . . . . .  N NUMB   0003H   A      457# 1276 1286 1294 1304 1318 1329 2363 3005 3072 4051 4057 4723 4873
                                           4883 4891 4901 6141
RR4. . . . . . . .  N NUMB   0004H   A      1277 1285 1295 1303 1319 1330 2364 3004 3073 4052 4056 4722 4874 4882
                                           4892 4900 7251# 7303 7322 7338 7382 7402
RR5. . . . . . . .  N NUMB   0005H   A      1278 1284 1296 1302 1320 1331 2365 3003 3074 4053 4055 4721 4875 4881
                                           4893 4899 7252# 7304 7310 7317 7383 7391
RR6. . . . . . . .  N NUMB   0006H   A      455# 2366 3002 3075 4720
RR7. . . . . . . .  N NUMB   0007H   A      458# 2367 3001 3076 4719
RRIR . . . . . . .  C ADDR   2A15H   R   SEG=MAIN   6724 6726#
RRMO220. . . . . .  C ADDR   07C7H   R   SEG=MAIN   1363 1389#
RS0. . . . . . . .  B ADDR   00D0H.3 A      204#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   09E7H   R   SEG=MAIN   1691# 1703 1704 1705
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 508 4372
RS_BYTE. . . . . .  C ADDR   22C5H   R   SEG=MAIN   263 5425#
RTIZMRI. . . . . .  C ADDR   0F91H   R   SEG=MAIN   2608#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   158

RVIOUT . . . . . .  C ADDR   1008H   R   SEG=MAIN   2654 2662 2666# 2670
RVVIZKO. . . . . .  C ADDR   13EDH   R   SEG=MAIN   3276# 3284
RVVKALI52. . . . .  C ADDR   1C1BH   R   SEG=MAIN   4406 4408#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      311# 615 1958 2035 4099
SADIAP2. . . . . .  D ADDR   0032H   A      313# 1961 2038 4102
SADIAP3. . . . . .  D ADDR   0031H   A      314# 1964 2041 4105
SADIAP4. . . . . .  D ADDR   0030H   A      315# 1967 2044 4108
SAUS . . . . . . .  D ADDR   0036H   A      310# 2170 2172 2188 2190 2235 2237 2315 2317
SAVBA. . . . . . .  D ADDR   003CH   A      304# 2380 2696 2714 2919 2966 2986 3088 3712 3767 3871 4395 4523 4627
                                           6788 6795
SAVEIR2. . . . . .  C ADDR   2C19H   R   SEG=MAIN   940 971 1042 1096 6875#
SAVELTE. . . . . .  C ADDR   04A7H   A      9069#
SAVEN_BL . . . . .  D ADDR   00D3H   A      419# 636 3647 5980 7140 7171
SAVEN_BL2. . . . .  D ADDR   00C0H   A      412# 644 3661 5997 7158 7180
SAVEN_BL3. . . . .  D ADDR   00C2H   A      413# 651 3666 6000 7162 7184
SAVEN_BL4. . . . .  D ADDR   00D9H   A      423# 658 3670 6002 7164 7187
SAVER2 . . . . . .  C ADDR   2C25H   R   SEG=MAIN   628 630 632 634 850 860 862 884 899 915 928 1144 1154 1163 1205
                                           1210 1258 1355 1375 1381 1392 1480 1484 1714 2102 2148 2186 2215 2263 2275
                                           2301 2313 3219 3226 4076 4567 4657 4808 4910 5026 5038 5058 5152 5216 5232
                                           5245 5311 5368 5381 5391 5694 5731 5748 6733 6889# 7220
SAVE_HL. . . . . .  C ADDR   2D4CH   R   SEG=MAIN   1953 2030 3554 3912 5808 5852 5953 7138#
SAVE_HLM . . . . .  C ADDR   25B1H   R   SEG=MAIN   5978#
SA_HL. . . . . . .  C ADDR   2D53H   R   SEG=MAIN   7141# 7159 7163 7165
SA_HL1 . . . . . .  C ADDR   2D6EH   R   SEG=MAIN   7139 7157#
SA_HL2 . . . . . .  C ADDR   2D75H   R   SEG=MAIN   7157 7161#
SA_HL3 . . . . . .  C ADDR   2D7CH   R   SEG=MAIN   7161 7164#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 1498 1503 1508 1513 1518 1948 5459 5481 5757 5769 5859 5876 5881 5886
                                           5891 5924 5931 6010 6016
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 373 374 514 6011 6015 6018 6019 6039
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   2632H   R   SEG=MAIN   6048# 6055
SDV1 . . . . . . .  C ADDR   2646H   R   SEG=MAIN   6060# 6066
SDVIG0 . . . . . .  C ADDR   0317H   R   SEG=MAIN   814# 816
SDVIG1 . . . . . .  C ADDR   030CH   R   SEG=MAIN   806# 808
SDVIG2 . . . . . .  C ADDR   0301H   R   SEG=MAIN   799# 801
SDVIG3 . . . . . .  C ADDR   02F5H   R   SEG=MAIN   790# 792
SDVIG4 . . . . . .  C ADDR   0326H   R   SEG=MAIN   823# 825
SDVIG6 . . . . . .  C ADDR   0330H   R   SEG=MAIN   830# 832
SDVM . . . . . . .  C ADDR   032EH   R   SEG=MAIN   820 829#
SEEGOON. . . . . .  C ADDR   0A50H   R   SEG=MAIN   1738 1743 1745 1751 1758#
SEEIND . . . . . .  C ADDR   0A5EH   R   SEG=MAIN   1683 1690 1691 1769#
SEE_L43. . . . . .  C ADDR   19FCH   R   SEG=MAIN   4116 4123 4127#
SI . . . . . . . .  B ADDR   00C0H.3 A      184#
SIGN . . . . . . .  N NUMB   0007H   A      8173# 8194 8195 8220 8221 8245 8388 8405 8626 8666
SKOR19 . . . . . .  C ADDR   1B0DH   R   SEG=MAIN   4260 4266#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      234#
SM00 . . . . . . .  B ADDR   0098H.7 A      153#
SM10 . . . . . . .  B ADDR   0098H.6 A      154#
SM20 . . . . . . .  B ADDR   0098H.5 A      155#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186 187
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      186#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      187#
SM_HL. . . . . . .  C ADDR   25B8H   R   SEG=MAIN   5981# 5998 6001 6003
SM_HL1 . . . . . .  C ADDR   25CDH   R   SEG=MAIN   5979 5996#
SM_HL2 . . . . . .  C ADDR   25D4H   R   SEG=MAIN   5996 5999#
SM_HL3 . . . . . .  C ADDR   25DBH   R   SEG=MAIN   5999 6002#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   159

SOOTV. . . . . . .  C ADDR   147CH   R   SEG=MAIN   3354# 3370
SP . . . . . . . .  D ADDR   0081H   A      17# 471
SPEED_RS . . . . .  B ADDR   0021H.0 A      330# 2809
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 512
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 229 230 231 232 233 234 235 236 511
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5415
SPIEN. . . . . . .  B ADDR   00F8H.0 A      236#
SPIF . . . . . . .  B ADDR   00F8H.7 A      229#
SPWRI. . . . . . .  C ADDR   1BC0H   R   SEG=MAIN   4359 4361#
SS1. . . . . . . .  C ADDR   2768H   R   SEG=MAIN   6281# 6283
STA. . . . . . . .  B ADDR   00C0H.5 A      182#
STO. . . . . . . .  B ADDR   00C0H.4 A      183#
SUMMA. . . . . . .  D ADDR   00B3H   A      407# 847 849 864 881 883 896 898 912 914 1413 1662 2465 3206
SUMT2. . . . . . .  C ADDR   0382H   R   SEG=MAIN   838 878#
S_R2 . . . . . . .  C ADDR   22C5H   R   SEG=MAIN   5439#
S_R3 . . . . . . .  C ADDR   22E3H   R   SEG=MAIN   5448 5461#
S_R4 . . . . . . .  C ADDR   22E4H   R   SEG=MAIN   5444 5464#
S_R5 . . . . . . .  C ADDR   22E6H   R   SEG=MAIN   5447 5460 5467#
S_R6 . . . . . . .  C ADDR   22EDH   R   SEG=MAIN   5473# 5490
S_R7 . . . . . . .  C ADDR   22F7H   R   SEG=MAIN   5472 5478#
S_R9 . . . . . . .  C ADDR   230CH   R   SEG=MAIN   5476 5479 5488 5492#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 190 191 192 193 194 195 196 197 524 2064 3038 4747 5401
T2MSME . . . . . .  C ADDR   1852H   R   SEG=MAIN   3920# 3926
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TA0. . . . . . . .  C ADDR   231EH   R   SEG=MAIN   5504 5507#
TA1. . . . . . . .  C ADDR   2327H   R   SEG=MAIN   5509 5512#
TA2. . . . . . . .  C ADDR   234FH   R   SEG=MAIN   5513 5531#
TA2_ . . . . . . .  C ADDR   233FH   R   SEG=MAIN   5517 5523#
TA3. . . . . . . .  C ADDR   2370H   R   SEG=MAIN   5551 5554#
TA3_ . . . . . . .  C ADDR   234CH   R   SEG=MAIN   5524 5529#
TA4. . . . . . . .  C ADDR   2372H   R   SEG=MAIN   5553 5556#
TA5. . . . . . . .  C ADDR   2379H   R   SEG=MAIN   5557 5560#
TA6. . . . . . . .  C ADDR   237BH   R   SEG=MAIN   5559 5562#
TABB1_2. . . . . .  C ADDR   2908H   R   SEG=MAIN   6550# 6560
TABN . . . . . . .  C ADDR   29A0H   R   SEG=MAIN   6649# 6653
TABT11 . . . . . .  C ADDR   2720H   R   SEG=MAIN   6223# 6630
TABT7. . . . . . .  C ADDR   2724H   R   SEG=MAIN   4847 6225# 6642
TABT9. . . . . . .  C ADDR   2722H   R   SEG=MAIN   6224# 6640
TABUS. . . . . . .  C ADDR   270CH   R   SEG=MAIN   6159 6212#
TAKTIND. . . . . .  C ADDR   0A9DH   R   SEG=MAIN   1803 1806#
TB . . . . . . . .  C ADDR   23A4H   R   SEG=MAIN   5506 5614#
TB80 . . . . . . .  B ADDR   0098H.3 A      157#
TB_0 . . . . . . .  C ADDR   231BH   R   SEG=MAIN   5503 5505#
TC . . . . . . . .  C ADDR   23BEH   R   SEG=MAIN   5615 5631#
TC1. . . . . . . .  C ADDR   23CAH   R   SEG=MAIN   5637 5639#
TC2. . . . . . . .  C ADDR   23DEH   R   SEG=MAIN   5643 5650#
TC3. . . . . . . .  C ADDR   23EEH   R   SEG=MAIN   5650 5657#
TCLK0. . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 506 507 518
TD . . . . . . . .  C ADDR   23F3H   R   SEG=MAIN   5632 5660#
TE . . . . . . . .  C ADDR   243BH   R   SEG=MAIN   5661 5701#
TE1. . . . . . . .  C ADDR   2402H   R   SEG=MAIN   5665 5668#
TE10MS . . . . . .  C ADDR   2A6BH   R   SEG=MAIN   3919 6810#
TE2. . . . . . . .  C ADDR   240AH   R   SEG=MAIN   5669 5672#
TE22 . . . . . . .  C ADDR   2993H   R   SEG=MAIN   6629 6639#
TE23 . . . . . . .  C ADDR   299BH   R   SEG=MAIN   6639 6642#
TE2MS. . . . . . .  C ADDR   2A61H   R   SEG=MAIN   3925 6809#
TEAEQU0. . . . . .  C ADDR   2AA7H   R   SEG=MAIN   3329 6818#
TEAVK. . . . . . .  C ADDR   2AE3H   R   SEG=MAIN   4765 6825#
TEBEQU0. . . . . .  C ADDR   2AB1H   R   SEG=MAIN   6819#
TEBL . . . . . . .  C ADDR   2B97H   R   SEG=MAIN   2877 3497 6844#
TEBL0. . . . . . .  C ADDR   2BA1H   R   SEG=MAIN   3731 6845#
TECH . . . . . . .  C ADDR   2BABH   R   SEG=MAIN   4011 4174 6846#
TECLE. . . . . . .  C ADDR   2B5CH   R   SEG=MAIN   2865 3466 6838#
TEEND. . . . . . .  C ADDR   2BFBH   R   SEG=MAIN   4861 6855#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   160

TEERR. . . . . . .  C ADDR   2BF1H   R   SEG=MAIN   6802 6854#
TEFULL . . . . . .  C ADDR   2B83H   R   SEG=MAIN   2884 3698 6842#
TEINT. . . . . . .  C ADDR   2B8DH   R   SEG=MAIN   3798 6843#
TEIZMK . . . . . .  C ADDR   2B3EH   R   SEG=MAIN   2656 3260 3270 6835#
TEKALIB. . . . . .  C ADDR   2AEDH   R   SEG=MAIN   3987 4768 6826#
TEKAOUT. . . . . .  C ADDR   0D2FH   R   SEG=MAIN   2223# 2230
TEKD . . . . . . .  C ADDR   2B34H   R   SEG=MAIN   4453 6834#
TELIST . . . . . .  C ADDR   2B78H   R   SEG=MAIN   2848 3412 3477 3482 6841#
TEMAX. . . . . . .  C ADDR   2BC9H   R   SEG=MAIN   4210 6849#
TEMEM. . . . . . .  C ADDR   2B66H   R   SEG=MAIN   6839#
TEMENU . . . . . .  C ADDR   2ABBH   R   SEG=MAIN   6820#
TEMID. . . . . . .  C ADDR   2BD3H   R   SEG=MAIN   4218 6850#
TEMIN. . . . . . .  C ADDR   2BBFH   R   SEG=MAIN   3743 4226 6848#
TEMUL. . . . . . .  C ADDR   0775H   R   SEG=MAIN   1311 1349#
TENMIN . . . . . .  C ADDR   280AH   R   SEG=MAIN   1219 1221 1235 6349#
TEOLI. . . . . . .  C ADDR   2BDDH   R   SEG=MAIN   1555 1649 6852#
TEOLL. . . . . . .  C ADDR   2B52H   R   SEG=MAIN   1646 6837#
TEOLR. . . . . . .  C ADDR   2BE7H   R   SEG=MAIN   1551 6853#
TEOUT. . . . . . .  C ADDR   2B48H   R   SEG=MAIN   6836#
TEPAR. . . . . . .  C ADDR   2B2AH   R   SEG=MAIN   4785 6833#
TES19_2. . . . . .  C ADDR   2B20H   R   SEG=MAIN   556 2796 4266 4505 6831#
TES57_6. . . . . .  C ADDR   2B16H   R   SEG=MAIN   2788 4261 4500 4781 6830#
TESKOR . . . . . .  C ADDR   2AD9H   R   SEG=MAIN   4762 6824#
TEST01 . . . . . .  C ADDR   25EBH   R   SEG=MAIN   6015# 6037
TEST02 . . . . . .  C ADDR   261AH   R   SEG=MAIN   6034 6036#
TEST04 . . . . . .  C ADDR   25FBH   R   SEG=MAIN   6022# 6024
TEST1. . . . . . .  C ADDR   25E1H   R   SEG=MAIN   6010# 6026 6044
TEST2. . . . . . .  C ADDR   2613H   R   SEG=MAIN   6015 6033#
TEST22 . . . . . .  C ADDR   1B90H   R   SEG=MAIN   4322 4329#
TEST23 . . . . . .  C ADDR   1B95H   R   SEG=MAIN   4329 4332#
TEST3. . . . . . .  C ADDR   2605H   R   SEG=MAIN   6017 6027#
TEST4. . . . . . .  C ADDR   25F3H   R   SEG=MAIN   6018# 6032
TEST5. . . . . . .  C ADDR   261DH   R   SEG=MAIN   6035 6038#
TEST7I . . . . . .  C ADDR   0AB5H   R   SEG=MAIN   1819 1822#
TEST9I . . . . . .  C ADDR   0AAEH   R   SEG=MAIN   1813 1819#
TESTAT . . . . . .  C ADDR   2BB5H   R   SEG=MAIN   2856 3458 6847#
TESTRS . . . . . .  C ADDR   25DFH   R   SEG=MAIN   4250 6008#
TESTS. . . . . . .  C ADDR   1B84H   R   SEG=MAIN   4324# 4331 4334
TETE11 . . . . . .  C ADDR   2AF8H   R   SEG=MAIN   4239 4772 6827#
TETE7. . . . . . .  C ADDR   2B0CH   R   SEG=MAIN   4312 4778 6829#
TETE9. . . . . . .  C ADDR   2B02H   R   SEG=MAIN   4775 6828#
TETESI . . . . . .  C ADDR   2AC5H   R   SEG=MAIN   3167 4755 6822#
TETESR . . . . . .  C ADDR   2ACFH   R   SEG=MAIN   4759 6823#
TEVICH . . . . . .  C ADDR   2A9DH   R   SEG=MAIN   2490 2664 2672 3266 4666 6817#
TEWR . . . . . . .  C ADDR   2B6EH   R   SEG=MAIN   2839 3472 6840#
TEXTT. . . . . . .  C ADDR   2A61H   R   SEG=MAIN   6236 6808#
TF0. . . . . . . .  B ADDR   0088H.5 A      145#
TF1. . . . . . . .  B ADDR   0088H.7 A      143#
TF2. . . . . . . .  B ADDR   00C8H.7 A      190#
TH0. . . . . . . .  D ADDR   008CH   A      28# 491
TH1. . . . . . . .  D ADDR   008DH   A      29# 525 553 558 4375 4377
TH2. . . . . . . .  D ADDR   00CDH   A      89# 2061 3035 4745
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      374# 1501 1502 1506 1507 1511 1512 1516 1517 5448 5449 5465 5874 5875
                                           5879 5880 5884 5885 5889 5890
TI0. . . . . . . .  B ADDR   0098H.1 A      159#
TIM. . . . . . . .  C ADDR   2656H   R   SEG=MAIN   6069#
TIM1 . . . . . . .  C ADDR   2658H   R   SEG=MAIN   6070# 6070
TIM2 . . . . . . .  C ADDR   265BH   R   SEG=MAIN   6051 6054 6061 6065 6073# 6108 6112 7063 7065
TIM3 . . . . . . .  C ADDR   265DH   R   SEG=MAIN   6074# 6074
TIZMRI . . . . . .  C ADDR   0EA5H   R   SEG=MAIN   2445# 2608
TL0. . . . . . . .  D ADDR   008AH   A      26# 492
TL1. . . . . . . .  D ADDR   008BH   A      27# 554
TL2. . . . . . . .  D ADDR   00CCH   A      88# 2062 3036 4746
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1479H   R   SEG=MAIN   3339 3351#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   161

TMOD . . . . . . .  D ADDR   0089H   A      25# 489 517
TMR2RLH. . . . . .  D ADDR   00CBH   A      290# 504
TMR2RLL. . . . . .  D ADDR   00CAH   A      289# 503
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1AEEH   R   SEG=MAIN   4248 4253#
TOME14 . . . . . .  C ADDR   1B1BH   R   SEG=MAIN   4253 4273#
TOME15 . . . . . .  C ADDR   1B33H   R   SEG=MAIN   4273 4285# 4290
TOME21 . . . . . .  C ADDR   1AE5H   R   SEG=MAIN   4237 4248#
TOSK19 . . . . . .  C ADDR   1CCBH   R   SEG=MAIN   4499 4505#
TOSTRO . . . . . .  C ADDR   0B79H   R   SEG=MAIN   1959 1962 1965 1968#
TOUTF. . . . . . .  C ADDR   13F6H   R   SEG=MAIN   3280# 3283
TR0. . . . . . . .  B ADDR   0088H.4 A      146#
TR1. . . . . . . .  B ADDR   0088H.6 A      144# 526 560 4373 4378
TR2. . . . . . . .  B ADDR   00C8H.2 A      195#
TR9. . . . . . . .  C ADDR   2584H   R   SEG=MAIN   5511 5522 5530 5612 5625 5628 5649 5656 5658 5667 5671 5675 5699
                                           5713 5720 5722 5733 5749 5777 5810 5821 5828 5846 5902 5919 5925 5930#
                                           5954
TTOUT. . . . . . .  C ADDR   0F94H   R   SEG=MAIN   2610# 2619
TX1. . . . . . . .  C ADDR   0897H   R   SEG=MAIN   1500# 1501
TX2. . . . . . . .  C ADDR   089FH   R   SEG=MAIN   1505# 1506
TX3. . . . . . . .  C ADDR   08A7H   R   SEG=MAIN   1510# 1511
TX4. . . . . . . .  C ADDR   08AFH   R   SEG=MAIN   1515# 1516
TXBSY. . . . . . .  B ADDR   00F8H.3 A      233# 5416
TZ . . . . . . . .  C ADDR   2581H   R   SEG=MAIN   5923 5927#
UNPACK1. . . . . .  C ADDR   009EH   A      8191# 8385 8519 8649 8763
UNPACK2. . . . . .  C ADDR   00BAH   A      8216# 8386 8520 8650
UP1. . . . . . . .  C ADDR   0138H   A      8336# 8353
UP2. . . . . . . .  C ADDR   014BH   A      8356# 8374
UP2A . . . . . . .  C ADDR   0161H   A      8335 8372#
UPA. . . . . . . .  C ADDR   2839H   R   SEG=MAIN   6403# 6409
UPA1 . . . . . . .  C ADDR   2849H   R   SEG=MAIN   6421# 6427
UPA2 . . . . . . .  C ADDR   2829H   R   SEG=MAIN   6384# 6390
UPAA . . . . . . .  C ADDR   2D24H   R   SEG=MAIN   7107# 7113
UPAA4. . . . . . .  C ADDR   2894H   R   SEG=MAIN   6482# 6488
UPAB . . . . . . .  C ADDR   28A4H   R   SEG=MAIN   6499# 6505
UPAK . . . . . . .  C ADDR   2833H   R   SEG=MAIN   6400#
UPAK1. . . . . . .  C ADDR   2CFEH   R   SEG=MAIN   7074#
UPAK2. . . . . . .  C ADDR   2823H   R   SEG=MAIN   6381#
UPAK3. . . . . . .  C ADDR   2843H   R   SEG=MAIN   3940 4035 6418#
UPAK4. . . . . . .  C ADDR   2D1EH   R   SEG=MAIN   3894 7104#
UPAKA. . . . . . .  C ADDR   288EH   R   SEG=MAIN   4649 6479#
UPAKB. . . . . . .  C ADDR   289EH   R   SEG=MAIN   4696 6496#
UPAV1. . . . . . .  C ADDR   1C3AH   R   SEG=MAIN   4432# 4438
UPAV2. . . . . . .  C ADDR   1CFDH   R   SEG=MAIN   4550# 4556
UPK1 . . . . . . .  C ADDR   2D10H   R   SEG=MAIN   7082 7085#
UPK2 . . . . . . .  C ADDR   2D11H   R   SEG=MAIN   7084 7086#
VICHMAX. . . . . .  C ADDR   21CAH   R   SEG=MAIN   4212 5269#
VICHMEAN . . . . .  C ADDR   1FD6H   R   SEG=MAIN   4220 4950#
VICHMIN. . . . . .  C ADDR   20D5H   R   SEG=MAIN   3745 4228 5106#
VICHR. . . . . . .  D ADDR   00B1H   A      405# 1269 1809 2487 2500 2638 2651 2753 2761 3171 3175 3183 3254 3320
                                           3430 3976 3984 3993 4233 4282 4303 4451 4640 4679 4711 4753 6628
VIG0 . . . . . . .  C ADDR   0B1FH   R   SEG=MAIN   1904# 1906
VIG4 . . . . . . .  C ADDR   0B2DH   R   SEG=MAIN   1915# 1917
VIOUT. . . . . . .  C ADDR   0F6BH   R   SEG=MAIN   2493 2583# 2611 2623 2628 2658 2666 2674 2697 2720 2729 2732 2765
                                           2778 2810 2826 2841 2850 2858 2867 2881 2929 2932 2975 2989 2992 3279 3280
                                           3356 4339
VIOUT2 . . . . . .  C ADDR   10F9H   R   SEG=MAIN   2794 2803#
VIOUTF . . . . . .  C ADDR   13EFH   R   SEG=MAIN   3277#
VIT2_10. . . . . .  C ADDR   0ED4H   R   SEG=MAIN   2473# 2481 2482
VODM11_15. . . . .  C ADDR   18B1H   R   SEG=MAIN   3965# 3983
VOLUME . . . . . .  D ADDR   00D5H   A      420# 3529 3907 5840 5987 5989 7147 7149
VV21_23. . . . . .  C ADDR   1B7BH   R   SEG=MAIN   4309 4320#
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   162

VVCHIBL. . . . . .  C ADDR   29D7H   R   SEG=MAIN   2737 6681#
VVCHIF . . . . . .  C ADDR   29B2H   R   SEG=MAIN   6657# 6674
VVINTE . . . . . .  C ADDR   1812H   R   SEG=MAIN   3858 3886#
VVIZKO . . . . . .  C ADDR   1446H   R   SEG=MAIN   3276 3320#
VVKALI52 . . . . .  C ADDR   1CF0H   R   SEG=MAIN   4408 4534# 4586
VVMENU . . . . . .  C ADDR   1CA0H   R   SEG=MAIN   4415 4487#
VVNOL23. . . . . .  C ADDR   29D2H   R   SEG=MAIN   6678# 6682
VVNOL31. . . . . .  C ADDR   29CDH   R   SEG=MAIN   6676# 6678
VVNOL41. . . . . .  C ADDR   29CBH   R   SEG=MAIN   6674# 6676
VVOD2_10 . . . . .  C ADDR   184AH   R   SEG=MAIN   3439 3557 3658 3917#
VVOD43 . . . . . .  C ADDR   1A29H   R   SEG=MAIN   4146 4153#
VVODM11_15 . . . .  C ADDR   1AC5H   R   SEG=MAIN   3965 4233#
VVOSTA . . . . . .  C ADDR   1A86H   R   SEG=MAIN   4189 4208#
VVOSTAD. . . . . .  C ADDR   1A9AH   R   SEG=MAIN   4208 4216#
VVRR6. . . . . . .  C ADDR   0FEEH   R   SEG=MAIN   2656#
VV_52V . . . . . .  C ADDR   1C12H   R   SEG=MAIN   4389 4405#
WCOL . . . . . . .  B ADDR   00F8H.6 A      230#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 487 488
WORK . . . . . . .  D ADDR   00B8H   A      409# 1536 1538 1544 1560 1567 1582 1603 1608 1624 1855 1986 3524 3538
                                           3540 3570 3578 3580 3589 3597 3599 3606 3615 3617 3626 3634 3636 4977 5022
                                           5025 5034 5037 5049 5130 5148 5151 5205 5215 5221 5231 5235 5290 5307 5310
                                           5359 5367 5372 5380 5939 5947 5949 6012 6033
WR1. . . . . . . .  C ADDR   2CEBH   R   SEG=MAIN   7059# 7066
WRITE. . . . . . .  C ADDR   2CE8H   R   SEG=MAIN   720 6522 6524 6526 6528 6530 6532 6535 6537 6539 6542 6544 6546
                                           7057#
WRITED_X1. . . . .  C ADDR   2661H   R   SEG=MAIN   6079#
WRITE_X1 . . . . .  C ADDR   2660H   R   SEG=MAIN   6078#
WRPAGE . . . . . .  C ADDR   0480H   A      4370 4840 4942 9037#
WW5. . . . . . . .  C ADDR   0483H   A      9038# 9046
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 483 510
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 484
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 485 509
XCIKLWR. . . . . .  C ADDR   2C05H   R   SEG=MAIN   935 948 950 952 954 956 958 961 963 965 997 999 1001 1004 1006
                                           1008 1010 1013 1015 1017 1019 1021 1023 1025 1027 1030 1032 1034 1036 1086
                                           1088 1090 6860#
XTEMP. . . . . . .  N NUMB   000CH   A      7248# 7603 7604 7605 7606 7692 7694 7695 7697 7698 7700 7701 7703 7725
                                           7726 7727 7728 7746 7747 7751 7752 7755 7759 7760 7763 7767 7768 7772 7773
                                           7775 7776 7777 7779 7783 7784 7786 7787 7791 7792 7797 7798 7800 7801 7805
                                           7806 7811 7813 7814 7815
YBNUL. . . . . . .  C ADDR   1387H   R   SEG=MAIN   3214 3222#
YES. . . . . . . .  C ADDR   2F53H   R   SEG=MAIN   7625 7629 7633 7637 7655# 7718
YES0KEY. . . . . .  C ADDR   02D1H   R   SEG=MAIN   752 764#
YES0KEY1 . . . . .  C ADDR   02DEH   R   SEG=MAIN   771# 778
YESAVP . . . . . .  C ADDR   07D4H   R   SEG=MAIN   1369 1395#
YESBUF . . . . . .  C ADDR   0BD1H   R   SEG=MAIN   2021 2026#
YESIND . . . . . .  C ADDR   0AB7H   R   SEG=MAIN   1808 1817 1821 1824#
YESPRD . . . . . .  C ADDR   0BCFH   R   SEG=MAIN   2020 2024#
YESTEST. . . . . .  C ADDR   26FBH   R   SEG=MAIN   6154 6186#
YESTT5 . . . . . .  C ADDR   0C9BH   R   SEG=MAIN   2140#
YESVICH. . . . . .  C ADDR   0825H   R   SEG=MAIN   1382 1438#
YESVI_KM . . . . .  C ADDR   1F3FH   R   SEG=MAIN   4787 4867#
YESVI_KR . . . . .  C ADDR   1EB7H   R   SEG=MAIN   4787# 4789
YST1 . . . . . . .  C ADDR   0199H   R   SEG=MAIN   555 559#
YST19. . . . . . .  C ADDR   0191H   R   SEG=MAIN   556#
Z01S . . . . . . .  C ADDR   2780H   R   SEG=MAIN   6298# 6300
Z05S . . . . . . .  C ADDR   278DH   R   SEG=MAIN   6307# 6309
Z100 . . . . . . .  C ADDR   2751H   R   SEG=MAIN   6262# 6264
Z15. . . . . . . .  C ADDR   275FH   R   SEG=MAIN   6274# 6276
Z1S. . . . . . . .  C ADDR   2773H   R   SEG=MAIN   6289# 6291
ZAPADC . . . . . .  C ADDR   2630H   R   SEG=MAIN   6047#
ZCMP . . . . . . .  C ADDR   2C87H   R   SEG=MAIN   6966#
ZDIV . . . . . . .  C ADDR   2C54H   R   SEG=MAIN   858 1141 4073 5870 6929#
ZER1 . . . . . . .  C ADDR   00B3H   A      8201 8205# 8260 8303
ZER2 . . . . . . .  C ADDR   00D4H   A      8227 8231#
ZMUL . . . . . . .  C ADDR   2C4AH   R   SEG=MAIN   6924#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      321# 1732 4094 5076 5261 6937 6940 6943
A51 MACRO ASSEMBLER  AMP36_2                                                              10/26/2009 17:30:09 PAGE   163

ZNPLUS . . . . . .  C ADDR   02E8H   R   SEG=MAIN   731 780#
ZZ . . . . . . . .  C ADDR   2761H   R   SEG=MAIN   6275# 6275
Z_01S. . . . . . .  C ADDR   277CH   R   SEG=MAIN   2372 3081 4289 6031 6043 6296# 6799
Z_05S. . . . . . .  C ADDR   2789H   R   SEG=MAIN   2134 2135 2880 4213 4221 4229 6305#
Z_100. . . . . . .  C ADDR   274FH   R   SEG=MAIN   6261#
Z_15 . . . . . . .  C ADDR   275DH   R   SEG=MAIN   686 6273#
Z_1MS. . . . . . .  C ADDR   2766H   R   SEG=MAIN   771 6038 6280#
Z_1S . . . . . . .  C ADDR   276FH   R   SEG=MAIN   676 684 1430 2492 3746 4018 4135 4187 4492 4578 4678 4864 4865
                                           6287#
Z_5. . . . . . . .  C ADDR   2758H   R   SEG=MAIN   6083 6093 6268#
Z_9. . . . . . . .  C ADDR   2CE3H   R   SEG=MAIN   5418 7051#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
