A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp36_2ol.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp36_2ol.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     
                +1     3     
                +1     4     
                +1     5     
                +1     6     
                +1     7     
                +1     8     
                +1     9     
                +1    10     
                +1    11     
                +1    12     
                +1    13     
                +1    14     
                +1    15     
  0080          +1    16     sfr P0       =  0x80;   /* PORT 0                                                  */   
  0081          +1    17     sfr SP       =  0x81;   /* STACK POINTER                                           */
  0082          +1    18     sfr DPL      =  0x82;   /* DATA POINTER - LOW BYTE                                 */
  0083          +1    19     sfr DPH      =  0x83;   /* DATA POINTER - HIGH BYTE                                */
  0084          +1    20     sfr P4       =  0x84;   /* PORT 4                                                          
                                                                                                    */
  0085          +1    21     sfr P5       =  0x85;   /* PORT 5                                                  */
  0086          +1    22     sfr P6       =  0x86;   /* PORT 6                                                          
                                                                                                    */                  
                                                                                                               
  0087          +1    23     sfr PCON     =  0x87;   /* POWER CONTROL                                           */
  0088          +1    24     sfr TCON     =  0x88;   /* TIMER CONTROL                                           */
  0089          +1    25     sfr TMOD     =  0x89;   /* TIMER MODE                                              */
  008A          +1    26     sfr TL0      =  0x8A;   /* TIMER 0 - LOW BYTE                                      */
  008B          +1    27     sfr TL1      =  0x8B;   /* TIMER 1 - LOW BYTE                                      */
  008C          +1    28     sfr TH0      =  0x8C;   /* TIMER 0 - HIGH BYTE                                     */   
  008D          +1    29     sfr TH1      =  0x8D;   /* TIMER 1 - HIGH BYTE                                     */
  008E          +1    30     sfr CKCON    =  0x8E;   /* CLOCK CONTROL                                           */
  008F          +1    31     sfr PSCTL    =  0x8F;   /* PROGRAM STORE R/W CONTROL                               */
  0090          +1    32     sfr P1       =  0x90;   /* PORT 1                                                  */
  0091          +1    33     sfr TMR3CN   =  0x91;   /* TIMER 3 CONTROL                                         */
  0092          +1    34     sfr TMR3RLL  =  0x92;   /* TIMER 3 RELOAD REGISTER - LOW BYTE                      */
  0093          +1    35     sfr TMR3RLH  =  0x93;   /* TIMER 3 RELOAD REGISTER - HIGH BYTE                     */
  0094          +1    36     sfr TMR3L    =  0x94;   /* TIMER 3 - LOW BYTE                                      */
  0095          +1    37     sfr TMR3H    =  0x95;   /* TIMER 3 - HIGH BYTE                                     */
  0096          +1    38     sfr P7           =  0x96;   /* PORT 7                                                  */
  0098          +1    39     sfr SCON0    =  0x98;   /* SERIAL PORT 0 CONTROL                                   */
  0099          +1    40     sfr SBUF0    =  0x99;   /* SERIAL PORT 0 BUFFER                                    */
  009A          +1    41     sfr SPI0CFG  =  0x9A;   /* SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION             */
  009B          +1    42     sfr SPI0DAT  =  0x9B;   /* SERIAL PERIPHERAL INTERFACE 0 DATA                      */
  009C          +1    43     sfr ADC1     =  0x9C;   /* ADC 1 DATA                                              */
  009D          +1    44     sfr SPI0CKR  =  0x9D;   /* SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL        */
  009E          +1    45     sfr CPT0CN   =  0x9E;   /* COMPARATOR 0 CONTROL                                    */
  009F          +1    46     sfr CPT1CN   =  0x9F;   /* COMPARATOR 1 CONTROL                                    */
  00A0          +1    47     sfr P2       =  0xA0;   /* PORT 2                                                  */
  00A1          +1    48     sfr EMI0TC   =  0xA1;   /* EMIF TIMING CONTROL                                     */
  00A3          +1    49     sfr EMI0CF   =  0xA3;   /* EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION          */
  00A4          +1    50     sfr P0MDOUT  =  0xA4;   /* PORT 0 OUTPUT MODE CONFIGURATION                        */
  00A5          +1    51     sfr P1MDOUT  =  0xA5;   /* PORT 1 OUTPUT MODE CONFIGURATION                        */
  00A6          +1    52     sfr P2MDOUT  =  0xA6;   /* PORT 2 OUTPUT MODE CONFIGURATION                        */
  00A7          +1    53     sfr P3MDOUT  =  0xA7;   /* PORT 3 OUTPUT MODE CONFIGURATION                        */
  00A8          +1    54     sfr IE       =  0xA8;   /* INTERRUPT ENABLE                                        */
  00A9          +1    55     sfr SADDR0   =  0xA9;   /* SERIAL PORT 0 SLAVE ADDRESS                             */
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     2

  00AA          +1    56     sfr ADC1CN   =  0xAA;   /* ADC 1 CONTROL                                           */
  00AB          +1    57     sfr ADC1CF   =  0xAB;   /* ADC 1 ANALOG MUX CONFIGURATION                          */
  00AC          +1    58     sfr AMX1SL   =  0xAC;   /* ADC 1 ANALOG MUX CHANNEL SELECT                         */
  00AD          +1    59     sfr P3IF     =  0xAD;   /* PORT 3 EXTERNAL INTERRUPT FLAGS                         */
  00AE          +1    60     sfr SADEN1   =  0xAE;   /* SERIAL PORT 1 SLAVE ADDRESS MASK                        */
  00AF          +1    61     sfr EMI0CN   =  0xAF;   /* EXTERNAL MEMORY INTERFACE CONTROL                       */
  00B0          +1    62     sfr P3       =  0xB0;   /* PORT 3                                                  */
  00B1          +1    63     sfr OSCXCN   =  0xB1;   /* EXTERNAL OSCILLATOR CONTROL                             */
  00B2          +1    64     sfr OSCICN   =  0xB2;   /* INTERNAL OSCILLATOR CONTROL                             */
  00B5          +1    65     sfr P74OUT   =  0xB5;   /* PORTS 4 - 7 OUTPUT MODE                                 */
  00B6          +1    66     sfr FLSCL    =  0xB6;   /* FLASH MEMORY TIMING PRESCALER                           */
  00B7          +1    67     sfr FLACL    =  0xB7;   /* FLASH ACESS LIMIT                                       */
  00B8          +1    68     sfr IP       =  0xB8;   /* INTERRUPT PRIORITY                                      */
  00B9          +1    69     sfr SADEN0   =  0xB9;   /* SERIAL PORT 0 SLAVE ADDRESS MASK                        */
  00BA          +1    70     sfr AMX0CF   =  0xBA;   /* ADC 0 MUX CONFIGURATION                                 */
  00BB          +1    71     sfr AMX0SL   =  0xBB;   /* ADC 0 MUX CHANNEL SELECTION                             */
  00BC          +1    72     sfr ADC0CF   =  0xBC;   /* ADC 0 CONFIGURATION                                     */
  00BD          +1    73     sfr P1MDIN   =  0xBD;   /* PORT 1 INPUT MODE                                       */
  00BE          +1    74     sfr ADC0L    =  0xBE;   /* ADC 0 DATA - LOW BYTE                                   */
  00BF          +1    75     sfr ADC0H    =  0xBF;   /* ADC 0 DATA - HIGH BYTE                                  */
  00C0          +1    76     sfr SMB0CN   =  0xC0;   /* SMBUS 0 CONTROL                                         */
  00C1          +1    77     sfr SMB0STA  =  0xC1;   /* SMBUS 0 STATUS                                          */
  00C2          +1    78     sfr SMB0DAT  =  0xC2;   /* SMBUS 0 DATA                                            */
  00C3          +1    79     sfr SMB0ADR  =  0xC3;   /* SMBUS 0 SLAVE ADDRESS                                   */
  00C4          +1    80     sfr ADC0GTL  =  0xC4;   /* ADC 0 GREATER-THAN REGISTER - LOW BYTE                  */
  00C5          +1    81     sfr ADC0GTH  =  0xC5;   /* ADC 0 GREATER-THAN REGISTER - HIGH BYTE                 */
  00C6          +1    82     sfr ADC0LTL  =  0xC6;   /* ADC 0 LESS-THAN REGISTER - LOW BYTE                     */
  00C7          +1    83     sfr ADC0LTH  =  0xC7;   /* ADC 0 LESS-THAN REGISTER - HIGH BYTE                    */
  00C8          +1    84     sfr T2CON    =  0xC8;   /* TIMER 2 CONTROL                                         */
  00C9          +1    85     sfr T4CON    =  0xC9;   /* TIMER 4 CONTROL                                         */
  00CA          +1    86     sfr RCAP2L   =  0xCA;   /* TIMER 2 CAPTURE REGISTER - LOW BYTE                     */
  00CB          +1    87     sfr RCAP2H   =  0xCB;   /* TIMER 2 CAPTURE REGISTER - HIGH BYTE                    */
  00CC          +1    88     sfr TL2      =  0xCC;   /* TIMER 2 - LOW BYTE                                      */
  00CD          +1    89     sfr TH2      =  0xCD;   /* TIMER 2 - HIGH BYTE                                     */
  00CF          +1    90     sfr SMB0CR   =  0xCF;   /* SMBUS 0 CLOCK RATE                                      */
  00D0          +1    91     sfr PSW      =  0xD0;   /* PROGRAM STATUS WORD                                     */
  00D1          +1    92     sfr REF0CN   =  0xD1;   /* VOLTAGE REFERENCE 0 CONTROL                             */
  00D2          +1    93     sfr DAC0L    =  0xD2;   /* DAC 0 REGISTER - LOW BYTE                               */
  00D3          +1    94     sfr DAC0H    =  0xD3;   /* DAC 0 REGISTER - HIGH BYTE                              */
  00D4          +1    95     sfr DAC0CN   =  0xD4;   /* DAC 0 CONTROL                                           */
  00D5          +1    96     sfr DAC1L    =  0xD5;   /* DAC 1 REGISTER - LOW BYTE                               */
  00D6          +1    97     sfr DAC1H    =  0xD6;   /* DAC 1 REGISTER - HIGH BYTE                              */
  00D7          +1    98     sfr DAC1CN   =  0xD7;   /* DAC 1 CONTROL                                           */
  00D8          +1    99     sfr PCA0CN   =  0xD8;   /* PCA 0 COUNTER CONTROL                                   */
  00D9          +1   100     sfr PCA0MD   =  0xD9;   /* PCA 0 COUNTER MODE                                      */
  00DA          +1   101     sfr PCA0CPM0 =  0xDA;   /* CONTROL REGISTER FOR PCA 0 MODULE 0                     */
  00DB          +1   102     sfr PCA0CPM1 =  0xDB;   /* CONTROL REGISTER FOR PCA 0 MODULE 1                     */
  00DC          +1   103     sfr PCA0CPM2 =  0xDC;   /* CONTROL REGISTER FOR PCA 0 MODULE 2                     */
  00DD          +1   104     sfr PCA0CPM3 =  0xDD;   /* CONTROL REGISTER FOR PCA 0 MODULE 3                     */
  00DE          +1   105     sfr PCA0CPM4 =  0xDE;   /* CONTROL REGISTER FOR PCA 0 MODULE 4                     */
  00E0          +1   106     sfr ACC      =  0xE0;   /* ACCUMULATOR                                             */
  00E1          +1   107     sfr XBR0     =  0xE1;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 0               */
  00E2          +1   108     sfr XBR1     =  0xE2;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 1               */
  00E3          +1   109     sfr XBR2     =  0xE3;   /* DIGITAL CROSSBAR CONFIGURATION REGISTER 2               */
  00E4          +1   110     sfr RCAP4L   =  0xE4;   /* TIMER 4 CAPTURE REGISTER - LOW BYTE                     */
  00E5          +1   111     sfr RCAP4H   =  0xE5;   /* TIMER 4 CAPTURE REGISTER - HIGH BYTE                    */
  00E6          +1   112     sfr EIE1     =  0xE6;   /* EXTERNAL INTERRUPT ENABLE 1                             */
  00E7          +1   113     sfr EIE2     =  0xE7;   /* EXTERNAL INTERRUPT ENABLE 2                             */
  00E8          +1   114     sfr ADC0CN   =  0xE8;   /* ADC 0 CONTROL                                           */   
  00E9          +1   115     sfr PCA0L    =  0xE9;   /* PCA 0 TIMER - LOW BYTE                                  */   
  00EA          +1   116     sfr PCA0CPL0 =   0xEA;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE  */
  00EB          +1   117     sfr PCA0CPL1 =   0xEB;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE  */
  00EC          +1   118     sfr PCA0CPL2 =   0xEC;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE  */
  00ED          +1   119     sfr PCA0CPL3 =   0xED;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE  */
  00EE          +1   120     sfr PCA0CPL4 =   0xEE;   /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE  */
  00EF          +1   121     sfr RSTSRC   =   0xEF;   /* RESET SOURCE                                            */
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     3

  00F0          +1   122     sfr B        =   0xF0;   /* B REGISTER                                              */
  00F1          +1   123     sfr SCON1    =  0xF1;   /* SERIAL PORT 1 CONTROL                                   */
  00F2          +1   124     sfr SBUF1    =  0xF2;   /* SERAIL PORT 1 DATA                                      */
  00F3          +1   125     sfr SADDR1   =  0xF3;   /* SERAIL PORT 1                                           */ 
  00F4          +1   126     sfr TL4      =  0xF4;   /* TIMER 4 DATA - LOW BYTE                                 */
  00F5          +1   127     sfr TH4      =  0xF5;   /* TIMER 4 DATA - HIGH BYTE                                */
  00F6          +1   128     sfr EIP1     =   0xF6;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 1                  */
  00F7          +1   129     sfr EIP2     =   0xF7;   /* EXTERNAL INTERRUPT PRIORITY REGISTER 2                  */
  00F8          +1   130     sfr SPI0CN   =   0xF8;   /* SERIAL PERIPHERAL INTERFACE 0 CONTROL                   */  
  00F9          +1   131     sfr PCA0H    =   0xF9;          /* PCA 0 TIMER - HIGH BYTE                                 
                             */
  00FA          +1   132     sfr PCA0CPH0 =   0xFA;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE 
                             */
  00FB          +1   133     sfr PCA0CPH1 =   0xFB;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE 
                             */
  00FC          +1   134     sfr PCA0CPH2 =   0xFC;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE 
                             */
  00FD          +1   135     sfr PCA0CPH3 =   0xFD;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE 
                             */
  00FE          +1   136     sfr PCA0CPH4 =   0xFE;          /* CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE 
                             */   
  00FF          +1   137     sfr WDTCN    =   0xFF;          /* WATCHDOG TIMER CONTROL                                  
                             */
                +1   138             
                +1   139     
                +1   140     
                +1   141     
                +1   142     
  008F          +1   143     sbit TF1   = TCON ^ 7;              /* TIMER 1 OVERFLOW FLAG      */
  008E          +1   144     sbit TR1   = TCON ^ 6;              /* TIMER 1 ON/OFF CONTROL     */
  008D          +1   145     sbit TF0   = TCON ^ 5;              /* TIMER 0 OVERFLOW FLAG      */
  008C          +1   146     sbit TR0   = TCON ^ 4;              /* TIMER 0 ON/OFF CONTROL     */
  008B          +1   147     sbit IE1   = TCON ^ 3;              /* EXT. INTERRUPT 1 EDGE FLAG */
  008A          +1   148     sbit IT1   = TCON ^ 2;              /* EXT. INTERRUPT 1 TYPE      */
  0089          +1   149     sbit IE0   = TCON ^ 1;              /* EXT. INTERRUPT 0 EDGE FLAG */
  0088          +1   150     sbit IT0   = TCON ^ 0;              /* EXT. INTERRUPT 0 TYPE      */
                +1   151     
                +1   152     
  009F          +1   153     sbit SM00  = SCON0 ^ 7;             /* SERIAL MODE CONTROL BIT 0           */   
  009E          +1   154     sbit SM10  = SCON0 ^ 6;             /* SERIAL MODE CONTROL BIT 1           */
  009D          +1   155     sbit SM20  = SCON0 ^ 5;             /* MULTIPROCESSOR COMMUNICATION ENABLE */
  009C          +1   156     sbit REN0  = SCON0 ^ 4;             /* RECEIVE ENABLE                      */
  009B          +1   157     sbit TB80  = SCON0 ^ 3;             /* TRANSMIT BIT 8                      */
  009A          +1   158     sbit RB80  = SCON0 ^ 2;             /* RECEIVE BIT 8                       */
  0099          +1   159     sbit TI0   = SCON0 ^ 1;             /* TRANSMIT INTERRUPT FLAG             */
  0098          +1   160     sbit RI0   = SCON0 ^ 0;             /* RECEIVE INTERRUPT FLAG              */
                +1   161     
                +1   162     
  00AF          +1   163     sbit EA    = IE ^ 7;                /* GLOBAL INTERRUPT ENABLE      */  
  00AD          +1   164     sbit ET2   = IE ^ 5;                /* TIMER 2 INTERRUPT ENABLE     */
  00AC          +1   165     sbit ES0   = IE ^ 4;                /* UART0 INTERRUPT ENABLE       */
  00AB          +1   166     sbit ET1   = IE ^ 3;                /* TIMER 1 INTERRUPT ENABLE     */
  00AA          +1   167     sbit EX1   = IE ^ 2;                /* EXTERNAL INTERRUPT 1 ENABLE  */
  00A9          +1   168     sbit ET0   = IE ^ 1;                /* TIMER 0 INTERRUPT ENABLE     */
  00A8          +1   169     sbit EX0   = IE ^ 0;                /* EXTERNAL INTERRUPT 0 ENABLE  */
                +1   170     
                +1   171     
  00BD          +1   172     sbit PT2   = IP ^ 5;                /* TIMER 2 PRIORITY                                 */ 
                                  
  00BC          +1   173     sbit PS    = IP ^ 4;                /* SERIAL PORT PRIORITY                             */
  00BB          +1   174     sbit PT1   = IP ^ 3;                /* TIMER 1 PRIORITY                                 */
  00BA          +1   175     sbit PX1   = IP ^ 2;                /* EXTERNAL INTERRUPT 1 PRIORITY    */
  00B9          +1   176     sbit PT0   = IP ^ 1;                /* TIMER 0 PRIORITY                                 */
  00B8          +1   177     sbit PX0   = IP ^ 0;                /* EXTERNAL INTERRUPT 0 PRIORITY    */              
                +1   178     
                +1   179     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     4

  00C7          +1   180     sbit BUSY     =   SMB0CN ^ 7;       /* SMBUS 0 BUSY                    */
  00C6          +1   181     sbit ENSMB    =   SMB0CN ^ 6;       /* SMBUS 0 ENABLE                  */
  00C5          +1   182     sbit STA      =   SMB0CN ^ 5;       /* SMBUS 0 START FLAG              */
  00C4          +1   183     sbit STO      =   SMB0CN ^ 4;       /* SMBUS 0 STOP FLAG               */
  00C3          +1   184     sbit SI       =   SMB0CN ^ 3;       /* SMBUS 0 INTERRUPT PENDING FLAG  */
  00C2          +1   185     sbit AA       =   SMB0CN ^ 2;       /* SMBUS 0 ASSERT/ACKNOWLEDGE FLAG */
  00C1          +1   186     sbit SMBFTE   =   SMB0CN ^ 1;       /* SMBUS 0 FREE TIMER ENABLE       */
  00C0          +1   187     sbit SMBTOE   =   SMB0CN ^ 0;       /* SMBUS 0 TIMEOUT ENABLE          */
                +1   188     
                +1   189     
  00CF          +1   190     sbit TF2   = T2CON ^ 7;             /* TIMER 2 OVERFLOW FLAG        */
  00CE          +1   191     sbit EXF2  = T2CON ^ 6;             /* EXTERNAL FLAG                */
  00CD          +1   192     sbit RCLK0 = T2CON ^ 5;             /* UART0 RX CLOCK SOURCE        */
  00CC          +1   193     sbit TCLK0 = T2CON ^ 4;             /* UART0 TX CLOCK SOURCE        */
  00CB          +1   194     sbit EXEN2 = T2CON ^ 3;             /* TIMER 2 EXTERNAL ENABLE FLAG */  
  00CA          +1   195     sbit TR2   = T2CON ^ 2;             /* TIMER 2 ON/OFF CONTROL       */
  00C9          +1   196     sbit CT2   = T2CON ^ 1;             /* TIMER OR COUNTER SELECT      */
  00C8          +1   197     sbit CPRL2 = T2CON ^ 0;             /* CAPTURE OR RELOAD SELECT     */
                +1   198     
                +1   199     
  00D7          +1   200     sbit CY    = PSW ^ 7;               /* CARRY FLAG              */       
  00D6          +1   201     sbit AC    = PSW ^ 6;               /* AUXILIARY CARRY FLAG    */
  00D5          +1   202     sbit F0    = PSW ^ 5;               /* USER FLAG 0             */
  00D4          +1   203     sbit RS1   = PSW ^ 4;               /* REGISTER BANK SELECT 1  */
  00D3          +1   204     sbit RS0   = PSW ^ 3;               /* REGISTER BANK SELECT 0  */
  00D2          +1   205     sbit OV    = PSW ^ 2;               /* OVERFLOW FLAG           */
  00D1          +1   206     sbit F1    = PSW ^ 1;               /* USER FLAG 1             */
  00D0          +1   207     sbit P     = PSW ^ 0;               /* ACCUMULATOR PARITY FLAG */
                +1   208     
                +1   209     
  00DF          +1   210     sbit CF    =   PCA0CN ^ 7;          /* PCA 0 COUNTER OVERFLOW FLAG   */
  00DE          +1   211     sbit CR    =   PCA0CN ^ 6;          /* PCA 0 COUNTER RUN CONTROL BIT */
  00DC          +1   212     sbit CCF4  =   PCA0CN ^ 4;          /* PCA 0 MODULE 4 INTERRUPT FLAG */
  00DB          +1   213     sbit CCF3  =   PCA0CN ^ 3;          /* PCA 0 MODULE 3 INTERRUPT FLAG */
  00DA          +1   214     sbit CCF2  =   PCA0CN ^ 2;          /* PCA 0 MODULE 2 INTERRUPT FLAG */
  00D9          +1   215     sbit CCF1  =   PCA0CN ^ 1;          /* PCA 0 MODULE 1 INTERRUPT FLAG */
  00D8          +1   216     sbit CCF0  =   PCA0CN ^ 0;          /* PCA 0 MODULE 0 INTERRUPT FLAG */
                +1   217     
                +1   218     
  00EF          +1   219     sbit AD0EN     =   ADC0CN ^ 7;      /* ADC 0 ENABLE                              */
  00EE          +1   220     sbit AD0TM     =   ADC0CN ^ 6;      /* ADC 0 TRACK MODE                          */
  00ED          +1   221     sbit AD0INT    =   ADC0CN ^ 5;      /* ADC 0 CONVERISION COMPLETE INTERRUPT FLAG */
  00EC          +1   222     sbit AD0BUSY   =   ADC0CN ^ 4;      /* ADC 0 BUSY FLAG                           */
  00EB          +1   223     sbit AD0CM1    =   ADC0CN ^ 3;      /* ADC 0 START OF CONVERSION MODE BIT 1      */
  00EA          +1   224     sbit AD0CM0    =   ADC0CN ^ 2;      /* ADC 0 START OF CONVERSION MODE BIT 0      */
  00E9          +1   225     sbit AD0WINT   =   ADC0CN ^ 1;      /* ADC 0 WINDOW COMPARE INTERRUPT FLAG       */
  00E8          +1   226     sbit AD0LJST   =   ADC0CN ^ 0;      /* ADC 0 RIGHT JUSTIFY DATA BIT              */
                +1   227     
                +1   228     
  00FF          +1   229     sbit SPIF     =   SPI0CN ^ 7;       /* SPI 0 INTERRUPT FLAG                     */
  00FE          +1   230     sbit WCOL     =   SPI0CN ^ 6;       /* SPI 0 WRITE COLLISION FLAG       */
  00FD          +1   231     sbit MODF     =   SPI0CN ^ 5;       /* SPI 0 MODE FAULT FLAG            */
  00FC          +1   232     sbit RXOVRN   =   SPI0CN ^ 4;       /* SPI 0 RX OVERRUN FLAG            */
  00FB          +1   233     sbit TXBSY    =   SPI0CN ^ 3;       /* SPI 0 TX BUSY FLAG                       */
  00FA          +1   234     sbit SLVSEL   =   SPI0CN ^ 2;       /* SPI 0 SLAVE SELECT                       */
  00F9          +1   235     sbit MSTEN    =   SPI0CN ^ 1;       /* SPI 0 MASTER ENABLE                      */
  00F8          +1   236     sbit SPIEN    =   SPI0CN ^ 0;       /* SPI 0 SPI ENABLE                         */         
                                          
                     237              
                     238     NAME    MAIN
                     239                      ;      EXTRN  CODE(end1)
                     240                      ;      EXTRN CODE(numb)
                     241                       ; EXTRN CODE(SOROS)
                     242                        ;EXTRN  CODE(Abegin)
                     243     
                     244                             
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     5

                     245                             ;PUBLIC gener,bitmas,bitrs,bitznak 
                     246                             ;PUBLIC meff
                     247                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 248                             org 0h;    cseg AT 0
                     249     
0000 020000   F      250                            jmp begin;;Main               ; Locate a jump to the start of code a
                             t 
                     251                                             
0003                 252                                                     org 3
0003 32              253                                                     reti   
000B                 254                                                     org 0bh
000B 32              255                                                     reti
0013                 256                                                     org 13h
0013 32              257                                                     reti
001B                 258                                                     org 1bh
001B 32              259                                                     reti
0023                 260                                                     org 23h
0023 32              261                                                     reti
002B                 262                                                     org 2bh
002B 020000   F      263                                                     jmp             inter2  ;IE.5,IP.5(ET2,PT2)
0033                 264                                                     org 33h
0033 32              265                                                     reti
003B                 266                                                     org 3bh
003B 32              267                                                     reti
0043                 268                                                     org 43h
0043 32              269                                                     reti
004B                 270                                                     org 4bh
004B 32              271                                                     reti
0053                 272                                                     org 53h
0053 32              273                                                     reti
005B                 274                                                     org 5bh
                     275                                                     
005B 32              276                                                     reti 
0063                 277                                                     org 63h
0063 32              278                                                     reti
006B                 279                                                     org 6bh
006B 32              280                                                     reti
0073                 281                                                      org 73h
0073 32              282                                                     reti
0093                 283                                                     org     93h
0093 020000   F      284                                                     jmp             keyb1           ;IE6
                     285     
009B                 286                                                     org     9bh
009B 020000   F      287                                                     jmp             keyb2      ;IE7
                     288     
                     289     
                     290     
                     291     
  00CA               292     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               293     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     294      
                     295     Main         SEGMENT  CODE
                     296     
----                 297                                     DSEG
                     298       
  0040               299     bufind  DATA    40h;буффер индикации 12byte
                     300     ;DATA 4ch
  004F               301     abin            DATA    4fh;4byte
  0053               302     adec            DATA    53h;53h..5dh 10byte
  006E               303     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               304     mabin           DATA    6fh
  0077               305     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               306     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               307     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     6

  003C               308     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               309     movrig      DATA        3bh;крайне правое положение
  003A               310     movleft     DATA        3ah; крайне левое положение                  
  0039               311     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               312     nblok                           DATA    38h;номер введенного блока
  0037               313     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               314     saus                            DATA    36h;сохр упр слово
  0034               315     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               316     chind2                          DATA    33h;счетчик индикации
  0032               317     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               318     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               319     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     320     ;DATA           2fh
                     321     ;;;;;
  0020               322      cellbit                DATA    20h
  0000               323     bitznak         BIT     cellbit.0       ;20.0           
  0001               324     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               325     znmat           BIT             cellbit.2       ;20.2
  0003               326     bitrs           BIT             cellbit.3       ;20.3
  0004               327     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               328     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               329     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               330     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     331     
  0021               332     cellbit1                DATA    21h
  0008               333     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               334     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               335     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               336     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     337     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               338     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     339     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               340     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     341     
  0022               342     cellbit2                DATA    22h
  0010               343     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               344     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               345     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               346     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               347     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               348     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               349     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               350     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     351     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     352     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     353     ;и выдает т.н. буфер индикации  
  0023               354     cellbit3                DATA    23h
  0018               355     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               356     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               357     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               358     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               359     bitprer         BIT             cellbit3.4      ;22.4    
                     360     ;bit            BIT             cellbit3.5      ;22.5    
                     361     ;bit            BIT             cellbit3.6      ;22.6            
                     362     ;bit            BIT             cellbit3.7      ;22.7
                     363             
  005E               364     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     365     ;hex
  0062               366     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               367     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               368     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               369     rez_A2   data 7bh; A2
                     370     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     7

  0098               371     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               372     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               373     chdel    data  83h              ; счетчик задержки
                     374     ;float
  0084               375     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               376     rezAp    data  88h              ;4byte  A+
  008C               377     rezAm    data  8ch              ;4byte  A-
  0090               378     koefKp   data  90h              ;4byte  K+
  0094               379     koefKm   data  94h              ;4byte  K-
                     380     ;hex 
  009A               381     parT     data  9ah              ;параметр времени измерения
  009B               382     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               383     rez_A3   data  9ch              ;A3
                     384     ;FLOAT
  00A0               385     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               386     rez_Ak  data  0a4h         ;Ak
  00A8               387     parol           data  0a8h         ;храним в памяти пароль
  00AC               388     chind   data  0ach         ;счетчик индикации
                     389     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               390     diap    data  0aeh         ;номер диапазона
  00AF               391     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               392     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               393     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               394     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               395     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               396     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               397     work    data  0b8h        ;рабочая ячейка
  00BC               398     konstA  data  0bch        ;     введенная с крана константа A
                     399     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               400     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               401     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     402                ;c4 1bait
  00C5               403     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               404     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               405     interva data  0cdh;значение интервала (запись)2baita
  00CF               406     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               407     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               408     volume          data    0d5h;объем блока 2 baita
  00D6               409     chblok          data    0d6h;volume;кол измерений блока
  00D7               410     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               411     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     412     ;data           0dbh e0h-граница стека
                     413     
                     414     ;внешнее ОЗУ 64K 
                     415     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     416     ;ячейку  стирается целая страница 0..ffh рпзу
                     417     ;               XSEG AT 100h
                     418             PUBLIC    MASS0
  0100               419     MASS0  xdata 0100h;     скользящий массив измерения
  0104               420     MASS1  xdata 0104h;
  0108               421     MASS2  xdata 0108h;
  010C               422     MASS3  xdata 010ch;
  0110               423     MASS4  xdata 0110h;
  0114               424     MASS5  xdata 0114h;
  0118               425     MASS6  xdata 0118h;
  011C               426     MASS7  xdata 011ch;
  0120               427     MASS8  xdata 0120h;
  0124               428     MASS9  xdata 0124h;
  0128               429     MASS10  xdata 0128h;
  012C               430     MASS11  xdata 012ch;
  0130               431     MASS12  xdata 0130h;
  0134               432     MASS13  xdata 0134h;
  0138               433     MASS14  xdata 0138h;
  013C               434     MASS15  xdata 013ch;
  0140               435     MASS16  xdata 0140h;
  0144               436     MASS17  xdata 0144h;
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     8

  0148               437     MASS18  xdata 0148h;
  014C               438     MASS19  xdata 014ch;
  0E00               439     chbuf1  xdata 0e00h;счетчик буфера 1
                     440     ;xdata  0e04
                     441     
  0000               442                             rr0             EQU 00
  0001               443                     rr1       equ   01
  0006               444                     rr6   equ 06
  0002               445                     rr2       equ   02
  0003               446                     rr3       equ   03
  0007               447                     rr7   equ 07
                     448     
  0008               449                     r8   equ 08
  0009               450                     r9        equ   09
  000A               451                     r10       equ   10
  000B               452                     r11   equ 11
                     453     
                     454                     
                     455        
----                 456                  rseg     Main          ; Switch to this code segment.
                     457     
                     458                  using    0              ; Specify register bank for the following
                     459     
0100                 460     org 100h
                     461     ;$EJECT
                     462     
0100 7581E0          463     begin:     mov  sp, #0e0h
0103 75E900          464                                             mov             PCA0L,#00;=0x00;
0106 75D900          465                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          466                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CC          467                                             mov     P1MDOUT,#0cch;86h;8fh;=0x8f;
010F 75A600          468                                             mov     P2MDOUT,#00;=0x00;
                     469             
0112 75A73F          470             mov     P3MDOUT,#3fh;
0115 75B5FF          471             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          472             mov     REF0CN,#03h;=0x03;
                     473             
011B 75E114          474             mov     XBR0,#14h;= 0x14;
011E 75E200          475             mov     XBR1,#00; =0x00;
0121 75E300          476             mov XBR2,#00;=0x00;
0124 75B0C0          477             mov     P3,#0c0h
0127 75FFDE          478             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          479             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          480             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          481             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          482             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          483             mov     TL0,#0f9h;=0xf9; 
0139 75E680          484             mov     EIE1,#80h;=0x80;
                     485     
013C 75D480          486             mov     DAC0CN,#80h;=0x80;
013F 75D780          487             mov     DAC1CN,#80h;=0x80;
0142 75B167          488             mov     OSCXCN,#67h;=0x67;
                     489     
                     490      
                     491     
0145 E5B1            492     gener:     mov a, oscxcn
0147 B4E7FB          493                cjne a,#11100111b,gener
                     494                            
014A 75B288          495             mov     OSCICN,#88h;=0x84;
014D 75CA00          496         mov TMR2RLL,#0;=0;
0150 75CBD1          497         mov TMR2RLH,#0d1h;=0xd1;
                     498       
0153 D28E            499                     setb  TCON.6                    ;регистр управления
0155 D28C            500                      setb tcon.4
                     501     
0157 75EF00          502             mov     RSTSRC,#0;=00   ;//источники сброса 
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE     9

                     503     
                     504             
015A 75E340          505          mov        XBR2,#40h
015D 75E10E          506              mov    XBR0,#0eh;06h;16h
0160 75F803          507             mov             SPI0CN,#03
0163 759D31          508             mov             spi0ckr,#31H;;;;;;;;#04
                     509     ;установка скорости
0166 759850          510                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          511                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          512                                             mov             CKCON,#00010000b;TIM=1
016F 758920          513                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          514                                             mov             TCON,#01000000b;счетчик запущен
                     515     ;;;;;
0175 75D900          516                                             mov             PCA0MD,#00              ;PCA 
0178 75DA00          517                                             mov             PCA0CPM0,#00000000b;00000110b;01000
                             010b;
017B 75EA00          518                                             mov             PCA0CPL0,#00
017E 75FA9C          519                                             mov             PCA0CPH0,#9ch;регулировка звука 088
                             h;90h
0181 75D840          520                                             mov             PCA0CN,#40h
0184 75C800          521                                             mov             T2CON,#00
                     522     ;;;;;;
0187 7A50            523                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0189 7B2C            524                                             mov                     r3,#2ch
018B 120454          525                                             call            re4byte                 ;502ch 1 ba
                             it skor
018E E508            526                                             mov                     a,r8
0190 B40007          527                                             cjne            a,#00,yst19
0193 C213            528                                             clr                     bitv19                  ;57
                             .6
0195 758DF4          529                                             mov                     TH1,#244
0198 8008            530                                             jmp               yst1
019A 900000   F      531     yst19:          mov                     dptr,#teS19_2
019D D213            532                                             setb            bitv19                  ;19,2
019F 758DDC          533                                             mov                     TH1,#220
01A2                 534     yst1:
01A2 75E730          535                                             mov             EIE2,#30H;00110000
                     536                                     ;       mov             EIP2,#30H
01A5 75A880          537                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     538     ;ozu
01A8 E4              539                                             clr     a
01A9 7800            540                                             mov     r0,#00h 
01AB F6              541     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              542                                             inc     r0
01AD B87FFB          543                                             cjne    r0,#7fh,mecle
01B0 7880            544                                             mov     r0,#80h
01B2 F6              545     meff:                   mov     @r0,a 
01B3 F2              546                                             movx @r0,a
01B4 08              547                                             inc     r0
01B5 B8DFFA          548                             cjne    r0,#0dfh,meff
01B8 120000   F      549                             call    clmassix
                     550     ;обнулить внешнее озу 4кбайта
01BB 900000          551                                     mov                     dptr,#0
01BE E4              552     extcle: clr                     a
01BF F0              553                                     movx            @dptr,a
01C0 A3              554                                     inc                     dptr
01C1 E583            555                                     mov                     a,dph
01C3 B410F8          556                                     cjne            a,#10h,extcle
                     557     
01C6 7898            558                             mov             r0,#chinkor
01C8 7600            559                             mov             @r0,#0;1;
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    10

01CA 08              560                             inc             r0
01CB 7619            561                             mov             @r0,#19h;64h;0c8h;90h;
                     562                             ;;;;
01CD 7881            563                             mov             r0,#chavt
01CF 7601            564                             mov             @r0,#1
01D1 08              565                             inc             r0
01D2 7690            566                             mov             @r0,#90h
                     567     
01D4 78B2            568                                     mov             r0,#marker
01D6 76FF            569                                     mov             @r0,#0ffh
                     570                             ;mov            r0,#chind
                     571                             ;mov            @r0,#1
                     572                     
01D8 74FF            573                             mov             a,#0ffh
01DA F585            574                        mov          p5,a
01DC 799A            575                             mov             r1,#parT
01DE 7702            576                             mov             @r1,#2                  ;Tizm=1s
01E0 79AE            577                             mov             r1,#diap
01E2 7705            578                             mov             @r1,#5                  ;10-7a
01E4 753405          579                             mov             sadiap,#5
01E7 79AF            580                             mov             r1,#parN
01E9 7702            581                             mov             @r1,#2
01EB 7400            582                             mov             a,#00h
01ED F585            583                             mov             p5,a
01EF D204            584                             setb    bitizm
                     585     
01F1 799B            586                             mov             r1,#chbefore
01F3 7700            587                             mov             @r1,#0
                     588                             ;;;;;;
01F5 900000   F      589                             mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      590                             call    ldc_long
01FB 7890            591                             mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      592                             call    saver2
0200 7894            593                             mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      594                             call    saver2
0205 78A0            595                             mov             r0,#koefKD
0207 120000   F      596                             call    saver2
020A 78CF            597                             mov                     r0,#chbuf
020C 120000   F      598                             call    saver2
020F 900158          599                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            600                             mov             r1,#saven_bl
0214 E583            601                             mov             a,dph
0216 F7              602                                               mov           @r1,a
0217 09              603                                                     inc             r1
0218 E582            604                                                     mov             a,dpl
021A F7              605                                                     mov             @r1,a
                     606     
021B 900478          607                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            608                             mov             r1,#saven_bl2
0220 E583            609                             mov             a,dph
0222 F7              610                                               mov           @r1,a
0223 09              611                                                     inc             r1
0224 E582            612                                                     mov             a,dpl
0226 F7              613                                                     mov             @r1,a
0227 900798          614                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
022A 79C2            615                             mov             r1,#saven_bl3
022C E583            616                             mov             a,dph
022E F7              617                                               mov           @r1,a
022F 09              618                                                     inc             r1
0230 E582            619                                                     mov             a,dpl
0232 F7              620                                                     mov             @r1,a
0233 900AB8          621                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0236 79D9            622                             mov             r1,#saven_bl4
0238 E583            623                             mov             a,dph
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    11

023A F7              624                                               mov           @r1,a
023B 09              625                                                     inc             r1
023C E582            626                                                     mov             a,dpl
023E F7              627                                                     mov             @r1,a
023F 753801          628                             mov             nblok,#1                        ;номер введенного б
                             лока
0242 753701          629                             mov             nelem,#1
0245 78CD            630                             mov             r0,#interva
0247 7600            631                             mov             @r0,#0
0249 08              632                             inc             r0
024A 7601            633                             mov             @r0,#1
024C 7840            634                             mov             r0,#bufind
024E                 635     age2:
024E 76FD            636                             mov             @r0,#0fdh         ;погасить индикатор
0250 08              637                             inc             r0
0251 B84CFA          638                             cjne    r0,#bufind+12,age2              
0254 120000   F      639                             call    ind
0257 120000   F      640                             call    z_1s
                     641     
                     642                                     ;зажечь все лементы индикации
025A 7840            643                             mov             r0,#bufind
025C 7669            644     ageon:          mov             @r0,#69h;0feh;?
025E 08              645                             inc             r0
025F B84CFA          646                             cjne    r0,#bufind+12,ageon             
0262 120000   F      647                             call    ind
0265 120000   F      648                             call    z_1s            ;1sec
                     649     ;;;;;;;;;;;;;;;;
                     650                     
0268 120000   F      651                             call    z_15;z_1ms
026B 434B10          652                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     653     ;;;;;;;;;;;;;;;;;;;
026E 7C60            654                             mov             r4,#60h
0270 7D00            655                             mov             r5,#00         
0272 120000   F      656                             call    iniacp;инициализация acp
0275 120000   F      657                             call    loadUS          ;us 10-7 A
                     658                             
0278 C217            659     rebyte:         clr             bitoll
027A 3095FD          660                             jnb             p1.5,$
027D 2095FD          661                             jb              p1.5,$
                     662                             ;mov            a,P6            ;p6.4=0
                     663                             ;anl            a,#0efh
                     664                             ;mov            P6,a
                     665                             ;nop
                     666                             ;nop
                     667                                     
                     668                             ;mov            a,P6                    ;p6.4=1 
                     669                             ;orl            a,#10h
                     670                             ;mov            P6,a                        
0280 7411            671                             mov             a,#11h
0282 120000   F      672                             call    write
                     673                             ;чтение acp
0285 120000   F      674                             call    read    
0288 F578            675                             mov     reacp+1,A       ;старший байт 
028A 120000   F      676                             call    read    
028D F579            677                             mov     reacp+2,A       ;средний байт 
028F 120000   F      678                             call    read
0292 F57A            679                             mov     reacp+3,A               ;мл байт
                     680                        ;;;;;;;;;;;
0294 7878            681                        mov          r0,#reacp+1
0296 E6              682                        mov          a,@r0
0297 20E743          683                             jb              acc.7,znplus;
029A D200            684                             setb    bitznak
029C 4480            685                             orl             a,#80h  ;ост содерж яч 
029E F6              686                             mov             @r0,a
                     687                                     
029F 18              688     mmm:            dec             r0;,#reacp
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    12

02A0 76FF            689                             mov             @r0,#0ffh
02A2 8041            690                             jmp             goznak
                     691     
02A4 120000   F      692     mem10ms:        call            ind
02A7 80CF            693                                             jmp                     rebyte                     
                                  ;10ms
                     694     
02A9                 695     labelA: 
                     696                             ;разрешить ie6,ie7
                     697     ;                       mov                     a,chkl+1                ;low
                     698     ;                       jnz                     no0key
02A9 E53D            699                             mov                     a,chkl
02AB 30E70B          700                             jnb                     acc.7,no0key;jnz                        no0
                             key
02AE E5AD            701                             mov                     a,P3IF
02B0 543F            702                             anl                     a,#3fh
02B2 F5AD            703                             mov                     P3IF,a
02B4 75E730          704                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02B7 800D            705                             jmp                     yes0key
                     706                        
02B9                 707     no0key: ;       mov             r1,#chkl 
                     708                                     ;       call    chdec
02B9 C3              709                                     clr                     c
02BA E53E            710                                     mov                     a,chkl+1;chkl-1
02BC 9401            711                                     subb            a,#1
02BE F53E            712                                     mov                     chkl+1,a
02C0 E53D            713                                     mov                     a,chkl
02C2 9400            714                                     subb            a,#0
02C4 F53D            715                                     mov                     chkl,a
                     716                             ;;;;;;;;;;;;
02C6                 717     yes0key:
02C6 2004AF          718                                             jb              bitizm,rebyte
                     719                              ;буфер 2 выдать на индикацию
02C9 E533            720                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02CB 700B            721                             jnz             nochind
02CD 753364          722                             mov             chind2,#100
02D0 120000   F      723                             call    ind
02D3 120000   F      724     yes0key1:       call    z_1ms;z_01s
                     725                             ;call   z_01s
                     726                             ;call   z_01s
02D6 80D1            727                             jmp             labelA
                     728     
02D8 14              729     nochind:        dec             a
02D9 F533            730                                             mov             chind2,a
02DB 80F6            731                                     jmp             yes0key1;labelA
                     732             
02DD C200            733     znplus:         clr     bitznak
02DF 547F            734                             anl             a,#7fh;fdh                      ;+
02E1 F6              735                             mov             @r0,a
02E2 18              736                             dec             r0;,#reacp
02E3 7600            737                             mov             @r0,#00h
                     738                             
02E5                 739     goznak: 
                     740     ;;;;;;;;;;;;;
02E5 787A            741                             mov     r0,#reacp+3
02E7 E6              742                             mov             a,@r0
02E8 7F05            743                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02EA C3              744     sdvig3:         clr             c
02EB 13              745                             rrc             a
02EC DFFC            746                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02EE FA              747                             mov             r2,a    ;сохр байт
02EF 18              748                             dec             r0              ;       reacp+2
02F0 E6              749                             mov             a,@r0
02F1 C0E0            750                             push    acc
02F3 C3              751                             clr             c
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    13

02F4 7F03            752                             mov             r7,#3;2
02F6 C3              753     sdvig2:         clr             c
02F7 33              754                             rlc             a
02F8 DFFC            755                             djnz    r7,sdvig2 ;d12..d11      средний байт
02FA 4A              756                             orl             a,r2
02FB F57A            757                             mov             reacp+3,a;сформ мл байт
02FD D0E0            758                             pop             acc
                     759                             
02FF 7F05            760                             mov             r7,#5;6
0301 C3              761     sdvig1:         clr             c
0302 13              762                             rrc             a
0303 DFFC            763                             djnz    r7,sdvig1 ;d15,d14        ср байт
0305 FA              764                             mov             r2,a   ;сохр
0306 E578            765                             mov             a,reacp+1
0308 C0E0            766                             push    acc
                     767                     ;;      push    acc
030A 7F03            768                             mov             r7,#3;2
030C C3              769     sdvig0:         clr             c
030D 33              770                             rlc             a
030E DFFC            771                             djnz    r7,sdvig0 ;       d21..d16
0310 4A              772                             orl             a,r2
0311 F579            773                             mov             reacp+2,a       ; сформ средний  байт
0313 D0E0            774                             pop             acc       ;reacp+1
                     775                             ;;;;;;;;;;;;;;
0315 20E70B          776                             jb              acc.7,sdvm
0318 C3              777                             clr             c
0319 7F05            778                             mov             r7,#5;6
031B C3              779     sdvig4:         clr             c
031C 13              780                             rrc             a
031D DFFC            781                             djnz    r7,sdvig4 ;       d23,d22
031F F578            782                             mov             reacp+1,a
0321 8008            783                             jmp             readyacp;ankor;klmas
                     784     ;;;;;;;;;;;;                                    
0323 7F05            785     sdvm:           mov             r7,#5;6
0325 D3              786     sdvig6:         setb            c
0326 13              787                             rrc             a
0327 DFFC            788                             djnz    r7,sdvig6 ;       d23,d22
0329 F578            789                             mov             reacp+1,a
                     790                                                             
                     791     ; reacp..reacp+3-результат чтения асп(hex) 
                     792     ;;;;;;;;;
032B                 793     readyacp:
032B 7898            794                                             mov             r0,#chinkor
032D E6              795                             mov             a,@r0
032E 30E702          796                             jnb             acc.7,gopart
0331 8044            797                                     jmp             sumt2
                     798                     
0333                 799     gopart:
0333 789A            800                             mov             r0,#parT        ;параметр времени
0335 793F            801                             mov             r1,#chmasN
0337 B6013A          802                             cjne    @r0,#1,noparT1
                     803                             ;РЕЗ+РЕЗ
033A 7877            804                             mov             r0,#reacp
033C 120000   F      805                             call    resar2          ;reacp->r2..r5
033F 78B6            806                             mov             r0,#summa+3;rez_A+3
0341 120000   F      807                             call    ladd
0344 78B3            808                             mov             r0,#summa;rez_A
0346 120000   F      809                             call    saver2
0349 793F            810                              mov            r1,#chmasN
034B 7714            811                             mov             @r1,#20;10
034D 789B            812                             mov             r0,#chbefore
034F B6631E          813                             cjne    @r0,#99,nobef99
                     814                             ;РЕЗ/100
0352 900000   F      815                             MOV        DPTR,#ch100 
0355 120000   F      816     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0358 120000   F      817                             call    zdiv;divide
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    14

035B 7862            818                             mov             r0,#rez_A
035D 120000   F      819                             call    saver2          ;сумма 100 отсчетов /100
0360 78C5            820                             mov             r0,#Rez_del
0362 120000   F      821                             call    saver2  
                     822                        ;;;;;
0365 78B3            823                        mov          r0,#summa
0367 120000   F      824                        call         clear4
                     825     
036A 799B            826                             mov             r1,#chbefore
036C 7700            827                             mov             @r1,#0
036E 8070            828                             jmp             klmas           ;загр в массив скользящее ср
0370 06              829     nobef99:        inc             @r0                     ;chbefore
0371 020000   F      830                             jmp             rebyte;labelA;метка A
                     831     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     832     ;а потом уже располагаем  в скользящий массив  из n
                     833     
                     834     
                     835     
0374 B6021D          836     noparT1:        cjne    @r0,#2,noparT2
                     837                             ;РЕЗ+РЕЗ
0377                 838     sumt2:
0377 7877            839                              mov            r0,#reacp
0379 120000   F      840                             call    resar2          ;reacp->r2..r5
037C 78B6            841                             mov             r0,#summa+3;rez_A+3
037E 120000   F      842                             call    ladd
0381 78B3            843                             mov             r0,#summa;rez_A
0383 120000   F      844                             call    saver2
0386 789B            845                             mov             r0,#chbefore
0388 793F            846                             mov             r1,#chmasN
038A 770A            847                             mov             @r1,#10
038C B613E1          848                             cjne    @r0,#19,nobef99;9,nobef99
                     849                             ;РЕЗ/20
038F 900000   F      850                             MOV        DPTR,#ch20;ch10 
0392 80C1            851                             jmp             allsum
                     852                             ;;;;;;;
                     853                             
                     854     
0394 B6031D          855     noparT2:        cjne    @r0,#3,noparT3
                     856     
0397 7877            857                                                              mov            r0,#reacp
0399 120000   F      858                             call    resar2          ;reacp->r2..r5
039C 78B6            859                             mov             r0,#summa+3;rez_A+3
039E 120000   F      860                             call    ladd
03A1 78B3            861                             mov             r0,#summa;rez_A
03A3 120000   F      862                             call    saver2
03A6 789B            863                             mov             r0,#chbefore
03A8 793F            864                             mov             r1,#chmasN
03AA 7702            865                             mov             @r1,#2;4                                        ;n=
                             4
03AC B609C1          866                             cjne    @r0,#9,nobef99;9,nobef99
                     867                             ;РЕЗ/10
03AF 900000   F      868                             MOV        DPTR,#ch10 
03B2 80A1            869                             jmp             allsum
                     870                             
03B4 B6041D          871     noparT3:        cjne    @r0,#4,noparT4
03B7                 872     aapar:          
03B7 7877            873              mov            r0,#reacp
03B9 120000   F      874                             call    resar2          ;reacp->r2..r5
03BC 78B6            875                             mov             r0,#summa+3;rez_A+3
03BE 120000   F      876                             call    ladd
03C1 78B3            877                             mov             r0,#summa;rez_A
03C3 120000   F      878                             call    saver2
03C6 789B            879                             mov             r0,#chbefore
03C8 793F            880                             mov             r1,#chmasN
03CA 7702            881                             mov             @r1,#2;4
03CC B604A1          882                             cjne    @r0,#4,nobef99;9,nobef99
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    15

                     883                             ;РЕЗ/10
03CF 900000   F      884                             MOV        DPTR,#ch5
03D2 8081            885                             jmp             allsum
                     886     
                     887                     
03D4 7702            888     noparT4:   mov          @r1,#2          ;chmasN n=2
03D6 7877            889                             mov             r0,#reacp
03D8 120000   F      890                             call    resar2          ;reacp->r2..r5
03DB 7862            891                             mov             r0,#rez_A
03DD 120000   F      892                             call    saver2
                     893     ;загрузить А в массив из 2/10 значений
                     894     ;;;;;;;;;;;;;;;
03E0                 895     klmas:           
03E0 793F            896                             mov             r1,#chmasN
03E2 B7021A          897                             cjne    @r1,#2,mas10
03E5 900100          898                             MOV        dptr,#MASS0
03E8 120000   F      899                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     900     
03EB 7862            901                             mov             r0,#rez_A
03ED 120000   F      902                             call    resar2          ;->r2..r5
03F0 900100          903                             mov                     dptr,#MASS0
03F3 120000   F      904                   call              saveIr2                 ; R2-R5 --> MAS0
                     905                     
03F6 900107          906                   MOV          dptr,#MASS1+3
03F9 120000   F      907                   CALL       addx
03FC 020000   F      908                       jmp           endsum
                     909     ;массив из 10-ти измерений
03FF B70A7D          910     mas10:                  cjne    @r1,#10,mas20
0402 900120          911                                             mov                     dptr,#MASS8
0405 120000   F      912                     CALL            xCIKLWR         ;MASS8->MASS9
0408 90011C          913                                             mov                     dptr,#MASS7
040B 120000   F      914                     CALL            xCIKLWR         ;MASS7->MASS8
040E 900118          915                     MOV       dptr,#MASS6
0411 120000   F      916                     CALL       xCIKLWR         ; MASS6 --> MASS7
0414 900114          917                     MOV        dptr,#MASS5
                     918                    
0417 120000   F      919                    CALL        xCIKLWR        ; MASS5 --> MASS6
041A 900110          920                    MOV         dptr,#MASS4
                     921                    
041D 120000   F      922                    CALL        xCIKLWR        ; MASS4 --> MASS5
0420 90010C          923                             mov                     dptr,#MASS3
                     924     
0423 120000   F      925                    CALL             xCIKLWR         ;MASS3->MASS4
0426 900108          926                     MOV        dptr,#MASS2
                     927                    
0429 120000   F      928                    CALL        xCIKLWR         ; MASS2 --> MASS3
042C 900104          929                    MOV         dptr,#MASS1
                     930                     
042F 120000   F      931                   CALL         xCIKLWR        ; MASS1 --> MASS2
0432 900100          932                    MOV         dptr,#MASS0
                     933                   
0435 120000   F      934                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     935     
                     936                             
0438 7862            937                             mov             r0,#rez_A
043A 120000   F      938                             call    resar2          ;->r2..r5
                     939                                     ;call   aform
043D 900100          940                                     mov                     dptr,#MASS0
0440 120000   F      941                   call              saveIr2                 ; R2-R5 --> MAS0
                     942              
0443 900107          943                   MOV          dptr,#MASS1+3
0446 120000   F      944                   CALL       addx
0449 90010B          945                   MOV          dptr,#MASS2+3
044C 120000   F      946                   CALL       addx
044F 90010F          947                   MOV          dptr,#MASS3+3
0452 120000   F      948                  CALL        addx
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    16

0455 900113          949                   MOV       dptr,#MASS4+3
0458 120000   F      950                   call       addx
045B 900117          951                     MOV        dptr,#MASS5+3
045E 120000   F      952                  CALL        addx
0461 90011B          953                   MOV          dptr,#MASS6+3
0464 120000   F      954                   CALL       addx
0467 90011F          955                   MOV          dptr,#MASS7+3
046A 120000   F      956                  CALL        addx
046D 900123          957                  MOV        dptr,#MASS8+3
0470 120000   F      958                   call       addx
0473 900127          959                     MOV                     dptr,#MASS9+3
0476 120000   F      960                  call        addx
0479 020000   F      961                              jmp            endsum
                     962     
047C 020000   F      963     rmas4:          jmp                     mas4
                     964     ;массив из 20-ти измерений
047F B714FA          965     mas20:          cjne    @r1,#20,rmas4
0482 900148          966                                             mov                     dptr,#MASS18
0485 120000   F      967                     CALL            xCIKLWR         ;MASS18->MASS19
0488 900144          968                                             mov                     dptr,#MASS17
048B 120000   F      969                     CALL            xCIKLWR         ;MASS17->MASS18
048E 900140          970                     MOV       dptr,#MASS16
0491 120000   F      971                     CALL       xCIKLWR         ; MASS16 --> MASS17
0494 90013C          972                     MOV        dptr,#MASS15
                     973                    
0497 120000   F      974                    CALL        xCIKLWR        ; MASS15 --> MASS16
049A 900138          975                    MOV         dptr,#MASS14
                     976                    
049D 120000   F      977                    CALL        xCIKLWR        ; MASS14 --> MASS15
04A0 900134          978                             mov                     dptr,#MASS13
                     979     
04A3 120000   F      980                    CALL             xCIKLWR         ;MASS13->MASS14
04A6 900130          981                     MOV        dptr,#MASS12
                     982                    
04A9 120000   F      983                    CALL        xCIKLWR         ; MASS12 --> MASS13
04AC 90012C          984                    MOV         dptr,#MASS11
                     985                     
04AF 120000   F      986                   CALL         xCIKLWR        ; MASS11 --> MASS12
04B2 900128          987                    MOV         dptr,#MASS10
                     988                   
04B5 120000   F      989                    CALL        xCIKLWR        ; MASS10 --> MASS11
04B8 900124          990                                      MOV       dptr,#MASS9
04BB 120000   F      991                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     992     
04BE 900120          993                                             mov                     dptr,#MASS8
04C1 120000   F      994                     CALL            xCIKLWR         ;MASS8->MASS9
04C4 90011C          995                                             mov                     dptr,#MASS7
04C7 120000   F      996                     CALL            xCIKLWR         ;MASS7->MASS8
04CA 900118          997                     MOV       dptr,#MASS6
04CD 120000   F      998                     CALL       xCIKLWR         ; MASS6 --> MASS7
04D0 900114          999                     MOV        dptr,#MASS5
                    1000                    
04D3 120000   F     1001                    CALL        xCIKLWR        ; MASS5 --> MASS6
04D6 900110         1002                    MOV         dptr,#MASS4
                    1003                    
04D9 120000   F     1004                    CALL        xCIKLWR        ; MASS4 --> MASS5
04DC 90010C         1005                             mov                     dptr,#MASS3
                    1006     
04DF 120000   F     1007                    CALL             xCIKLWR         ;MASS3->MASS4
04E2 900108         1008                     MOV        dptr,#MASS2
                    1009                    
04E5 120000   F     1010                    CALL        xCIKLWR         ; MASS2 --> MASS3
04E8 900104         1011                    MOV         dptr,#MASS1
                    1012                     
04EB 120000   F     1013                   CALL         xCIKLWR        ; MASS1 --> MASS2
04EE 900100         1014                    MOV         dptr,#MASS0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    17

                    1015                   
04F1 120000   F     1016                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1017     
                    1018                             
04F4 7862           1019                             mov             r0,#rez_A
04F6 120000   F     1020                             call    resar2          ;->r2..r5
                    1021                                     ;call   aform
04F9 900100         1022                                     mov                     dptr,#MASS0
04FC 120000   F     1023                   call              saveIr2                 ; R2-R5 --> MAS0
                    1024              
04FF 900107         1025                   MOV          dptr,#MASS1+3
0502 120000   F     1026                   CALL       addx
0505 90010B         1027                   MOV          dptr,#MASS2+3
0508 120000   F     1028                   CALL       addx
050B 90010F         1029                   MOV          dptr,#MASS3+3
050E 120000   F     1030                  CALL        addx
0511 900113         1031                   MOV       dptr,#MASS4+3
0514 120000   F     1032                   call       addx
0517 900117         1033                     MOV        dptr,#MASS5+3
051A 120000   F     1034                  CALL        addx
051D 90011B         1035                   MOV          dptr,#MASS6+3
0520 120000   F     1036                   CALL       addx
0523 90011F         1037                   MOV          dptr,#MASS7+3
0526 120000   F     1038                  CALL        addx
0529 900123         1039                  MOV        dptr,#MASS8+3
052C 120000   F     1040                   call       addx
052F 900127         1041                     MOV                     dptr,#MASS9+3
0532 120000   F     1042                  call        addx
                    1043     ;27
0535 90012B         1044                                     MOV        dptr,#MASS10+3
0538 120000   F     1045                   CALL       addx
053B 90012F         1046                                     MOV        dptr,#MASS11+3
053E 120000   F     1047                   CALL       addx
0541 900133         1048                   MOV          dptr,#MASS12+3
0544 120000   F     1049                   CALL       addx
0547 900137         1050                   MOV          dptr,#MASS13+3
054A 120000   F     1051                  CALL        addx
054D 90013B         1052                   MOV       dptr,#MASS14+3
0550 120000   F     1053                   call       addx
0553 90013F         1054                                     MOV        dptr,#MASS15+3
0556 120000   F     1055                     CALL     addx
0559 900143         1056                   MOV          dptr,#MASS16+3
055C 120000   F     1057                   CALL       addx
055F 900147         1058                   MOV          dptr,#MASS17+3
0562 120000   F     1059                  CALL        addx
0565 90014B         1060                  MOV        dptr,#MASS18+3
0568 120000   F     1061                   call       addx
056B 90014F         1062                                     MOV                     dptr,#MASS19+3
056E 120000   F     1063                  call        addx
0571 802F           1064                                     jmp             endsum
                    1065     ;массив из 4х измерений
0573                1066     mas4:                   
0573 900108         1067                                             MOV        dptr,#MASS2
0576 120000   F     1068                    CALL        xCIKLWR         ; MASS2 --> MASS3
0579 900104         1069                    MOV         dptr,#MASS1
057C 120000   F     1070                    CALL        xCIKLWR        ; MASS1 --> MASS2
057F 900100         1071                    MOV         dptr,#MASS0
0582 120000   F     1072                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1073     
                    1074                             
0585 7862           1075                             mov             r0,#rez_A
0587 120000   F     1076                             call    resar2          ;->r2..r5
                    1077                                     ;call   aform
058A 900100         1078                                     mov                     dptr,#MASS0
058D 120000   F     1079                   call              saveIr2                 ; R2-R5 --> MAS0
                    1080              
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    18

0590 900107         1081                   MOV          dptr,#MASS1+3
0593 120000   F     1082                   CALL       addx
0596 90010B         1083                   MOV          dptr,#MASS2+3
0599 120000   F     1084                   CALL       addx
059C 90010F         1085                   MOV          dptr,#MASS3+3
059F 120000   F     1086                  CALL        addx
                    1087                  
                    1088             ;23.03          
05A2                1089     endsum:
05A2 786E           1090                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
05A4 06             1091                                     inc             @r0
05A5 E6             1092                                     mov             a,@r0   
05A6 200105         1093                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1094                                     
05A9 B53F31         1095                                     cjne    a,chmasN,masx5
05AC D201           1096                                     setb    bitmas                  ;массив заполнен
05AE 853F6E         1097     masfull:                mov             chmas,chmasN
05B1 783F           1098                                     mov             r0,#chmasN
05B3 E6             1099                                     mov             a,@r0
                    1100     ;masfull:
05B4 B40208         1101                                     cjne    a,#2,nochn2
05B7 900000   F     1102                                     MOV        DPTR,#ch2;10 
05BA 120000   F     1103                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05BD 8028           1104                                     jmp             mas5div
                    1105     
05BF B40A08         1106     nochn2:         cjne    a,#10,nochn10
05C2 900000   F     1107                                                     MOV        DPTR,#ch10 
05C5 120000   F     1108                                     CALL   ldc_ltemp                 ; ltemp <-- 10
05C8 801D           1109                                     jmp             mas5div
                    1110     
05CA B41408         1111     nochn10:        cjne    a,#20,nochn20
05CD 900000   F     1112                                                     MOV        DPTR,#ch20 
05D0 120000   F     1113                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05D3 8012           1114                                     jmp             mas5div
                    1115     
05D5 900000   F     1116     nochn20:        MOV        DPTR,#ch4 
05D8 120000   F     1117                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05DB 800A           1118                                     jmp             mas5div
                    1119     
05DD 856E0B         1120     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05E0 E4             1121                                     clr     a
05E1 F50A           1122                                     mov     ltemp+2,a
05E3 F509           1123                                     mov     ltemp+1,a
05E5 F508           1124                                     mov     ltemp,a
                    1125     
05E7                1126     mas5div:
05E7 120000   F     1127                                     CALL       zdiv;divide                           ; R2-R5 =
                    1128                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1129     
                    1130                             
                    1131      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1132     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1133     ;получен результат 3 байта и знак
05EA 7866           1134                             mov             r0,#rez_A1
05EC 120000   F     1135                             call    saver2           ;сохр среднее по массиву
                    1136     ;;8.11.06                       mov             chmasN,#0
                    1137      ;;;;;;;;;;;;
                    1138      ;;;;;;;;;;;;
05EF C3             1139                             clr             c
05F0 799A           1140                             mov             r1,#parT
05F2 7402           1141                             mov             a,#2
05F4 97             1142                             subb    a,@r1
05F5 501D           1143                             jnc             ankor           ;T<3
                    1144                             ;A-=РЕЗ1                                ;T>3
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    19

05F7 120402         1145                             call    altof                   ;r2..r5->float
05FA 785E           1146                             mov             r0,#rez_Ame
05FC 120000   F     1147                             call    saver2
                    1148                             ;;;;
05FF 7890           1149                             mov             r0,#koefKp;->r8..r11
0601 EA             1150                             mov             a,r2
0602 30E702         1151                             jnb             acc.7,nminus3
0605 7894           1152                             mov             r0,#koefKm;->r8..r11
0607 120000   F     1153     nminus3:                call    resar8
060A 120203         1154                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
060D 785E           1155                             mov             r0,#rez_Ame
060F 120000   F     1156                             call    saver2
0612 8021           1157                             jmp             gotoKD
                    1158     
0614                1159     ankor:  
0614 7898           1160                             mov             r0,#chinkor
0616 E6             1161                             mov             a,@r0
0617 30E703         1162                             jnb             acc.7,nokorr
                    1163                             ;коррекция 0
061A 020000   F     1164                             jmp             kornul
061D                1165     nokorr: 
                    1166                             ;mov            r10,#00         ;       chavt
                    1167                             ;mov            r11,#00h
061D 7881           1168                             mov              r0,#chavt      
061F E6             1169                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
0620 30E737         1170                             jnb             acc.7,nonulavt;jnz              nonulavt        
0623 750A00         1171                             mov             r10,#0;1;00;02          
0626 750BC8         1172                             mov             r11,#0c8h;90h;0c8h;58h
0629 7898           1173                             mov             r0,#chinkor
062B 120000   F     1174                             call    chcmp
062E 7045           1175                             jnz             noavk
                    1176                             ;автокалибровка
0630 020000   F     1177                             jmp             autoka;noavk;
                    1178     
0633 8079           1179     rafterK:                jmp             afterK
                    1180     ;;;;;;;;;;
0635 C3             1181      gotoKD:                clr             c
0636 799A           1182                             mov             r1,#parT
0638 7404           1183                             mov             a,#4
063A 97             1184                             subb    a,@r1
063B 50F6           1185                             jnc             rafterK         ;T<5
                    1186                             ;A1-=A- *KD                     ;T>5
                    1187                             ;call           findkoef                                ;r2,r3-hex
                    1188                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1189                                     
                    1190                             ;       call    altof                   ;r2..r5->float
                    1191                             ;       mov     dptr,#CHtho;100000
                    1192                             ;       call    ldc_ltemp                       ;r8..r11
                    1193                             ;       call    fldiv
                    1194                             ;       call    move28
                    1195                             
063D 785E           1196                             mov             r0,#rez_Ame;->r2..r5   ???????????/
063F 120000   F     1197                             call    resar2
                    1198                                     ;call   flmul
0642 120343         1199                             call    ftol                    ;float->int
0645 7866           1200                             mov             r0,#rez_A1
0647 120000   F     1201                             call    saver2
064A 786A           1202                             mov             r0,#rez_A0;->r8..r11 hex
064C 120000   F     1203                             call    resar8
064F 120000   F     1204                             call    lsub            ;A3=A-1-A0
0652 789C           1205                             mov             r0,#rez_A3
0654 120000   F     1206                             call    saver2
0657 020000   F     1207                             jmp             labelB  
                    1208      ;;;;;;;;;;; 9.11.06
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    20

065A 789A           1209     nonulavt:        mov            r0,#parT
065C E6             1210                             mov             a,@r0
065D 6401           1211                             xrl             a,#01
065F 700F           1212                             jnz             avtdec1
0661 7982           1213                             mov             r1,#chavt+1     ;T=1 chavt-10
0663 120000   F     1214                             call    tenmin
0666 7999           1215     kordec10:       mov             r1,#chinkor+1
0668 120000   F     1216                             call    tenmin
066B 801E           1217                             jmp             rezmul
                    1218     
066D 020000   F     1219     rmo220:         jmp             mo220
                    1220     
0670 7981           1221     avtdec1:        mov             r1,#chavt       
0672 120000   F     1222                             call    chdec           ;chavt-1
                    1223     ;                       jmp             kordec1;rezmul
0675 789A           1224     noavk:          mov             r0,#parT
0677 E6             1225                             mov             a,@r0
0678 6401           1226                             xrl             a,#01
067A 700A           1227                             jnz             kordec1
                    1228                             ;T=1 chinkor-10
067C 7999           1229                     mov             r1,#chinkor+1
067E 120000   F     1230                             call    tenmin
0681 8008           1231                             jmp             rezmul
                    1232     
0683 020000   F     1233     rnotestizm:             jmp                     notestizm
0686 7998           1234     kordec1:        mov             r1,#chinkor
0688 120000   F     1235                             call    chdec           ; chinkor-1
                    1236                        ;9.11.06
                    1237                             ;;;;;;;;;;;;;;
                    1238                             ;;;;;;;;;;;;;
                    1239     ;(РЕЗ1-АN)*K
068B                1240     rezmul:
068B 7866           1241                             mov             r0,#rez_A1;->r2..r5
068D 120000   F     1242                             call    resar2
0690 120402         1243                             call    altof   ;r2..r5->float  6.06    
0693 7884           1244                             mov             r0,#kor0_AN;->r8..r11
0695 120000   F     1245                             call    resar8
0698 1201D1         1246                             call    flsub
069B 7890           1247                             mov             r0,#koefKp;->r8..r11
069D EA             1248                             mov             a,r2
069E 30E702         1249                             jnb             acc.7,nminus
                    1250                             ;jnb            bitznak,nminus
                    1251                     
06A1 7894           1252                             mov             r0,#koefKm;->r8..r11
06A3 120000   F     1253     nminus:         call    resar8
06A6 120203         1254                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
06A9 785E           1255                             mov             r0,#rez_Ame
06AB 120000   F     1256                             call    saver2
                    1257      
06AE                1258     afterK:                 
                    1259     ;;;;;;;;;;;;;;
06AE EA             1260                                     mov             a,r2
06AF 547F           1261                                     anl             a,#7fh
06B1 FA             1262                                     mov             r2,a
06B2 900000   F     1263                                     mov     dptr,#ch_250;220;220000
06B5 120000   F     1264                                     call    ldc_ltemp                       ;r8..r11=8
06B8 1201D6         1265                                     call    flcmp
06BB 50B0           1266                                     jnc             rmo220          ;A>220000
                    1267                                     ;;;;;;;;;
06BD 3015C3         1268                                     jnb                     biteizm,rnotestizm
06C0 78B1           1269                                     mov                     r0,#vichR
06C2 B62155         1270                                     cjne            @r0,#21h,note21
06C5 7A50           1271                                     mov                     r2,#50h                 ;-11a
06C7 7B18           1272                                     mov                     r3,#18h                 ;k8
06C9 12046C         1273                                     call            rebyte2                         ;r2..r5- he
                             x
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    21

06CC 120402         1274                                     call            altof                   ;r2..r5->float
06CF C002           1275                                     push            rr2
06D1 C003           1276                                     push            rr3
06D3 C004           1277                                     push            rr4
06D5 C005           1278                                     push            rr5
06D7 7A50           1279                                     mov                     r2,#50h                 ;k10
06D9 7B20           1280                                     mov                     r3,#20h
06DB 12046C         1281     re11_7: call            rebyte2                 ;r2..r5
06DE 120402         1282                                     call            altof                   ;r2..r5->float
06E1 120000   F     1283                                     call            move28
06E4 D005           1284                                     pop                     rr5
06E6 D004           1285                                     pop                     rr4
06E8 D003           1286                                     pop                     rr3
06EA D002           1287                                     pop                     rr2
06EC 1202B7         1288                                     call            fldiv
                    1289                             ;       mov                     dptr,#ch_10
                    1290                             ;       call            ldc_ltemp                       ;r8..r11
                    1291                             ;       call            flmul
                    1292                                     ;;;;;2.02.07
06EF C002           1293                                     push            rr2
06F1 C003           1294                                     push            rr3
06F3 C004           1295                                     push            rr4
06F5 C005           1296                                     push            rr5
06F7 7A50           1297                                     mov                     r2,#50h                 ;-11a
06F9 7B2C           1298                                     mov                     r3,#2ch                 ;Km
06FB 12046C         1299                                     call            rebyte2                         ;r2..r5- he
                             x
06FE 120402         1300                                     call            altof                   ;r2..r5->float
0701 120000   F     1301                                     call            move28
0704 D005           1302                                     pop                     rr5
0706 D004           1303                                     pop                     rr4
0708 D003           1304                                     pop                     rr3
070A D002           1305                                     pop                     rr2
070C 120203         1306                                     call            flmul                           ;*Km
070F 900000   F     1307                                     mov     dptr,#CHtho;100000
0712 120000   F     1308                                     call    ldc_ltemp                       ;r8..r11=8
0715 1202B7         1309                                     call    fldiv
                    1310                                     ;;;;;
0718 8050           1311                                     jmp                     temul   
071A B62218         1312     note21: cjne            @r0,#22h,note22
071D 7A50           1313                                     mov                     r2,#50h                 ;-09a
071F 7B10           1314                                     mov                     r3,#10h                 ;k6
0721 12046C         1315                                     call            rebyte2                         ;r2..r5- he
                             x
0724 120402         1316                                     call            altof                   ;r2..r5->float
0727 C002           1317                                     push            rr2
0729 C003           1318                                     push            rr3
072B C004           1319                                     push            rr4
072D C005           1320                                     push            rr5
072F 7A50           1321                                     mov                     r2,#50h                 ;k8
0731 7B18           1322                                     mov                     r3,#18h
0733 80A6           1323                                     jmp                     re11_7
0735 7A50           1324     note22: mov                     r2,#50h                 ;-7a
0737 7B08           1325                                     mov                     r3,#08h                 ;k4
0739 12046C         1326                                     call            rebyte2                         ;r2..r5- he
                             x
073C 120402         1327                                     call            altof                   ;r2..r5->float
073F C002           1328                                     push            rr2
0741 C003           1329                                     push            rr3
0743 C004           1330                                     push            rr4
0745 C005           1331                                     push            rr5
0747 7A50           1332                                     mov                     r2,#50h                 ;k6
0749 7B10           1333                                     mov                     r3,#10h
074B 808E           1334                                     jmp                     re11_7  
                    1335                                     ;;;;;;;;;
074D                1336     notestizm:
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    22

074D 301208         1337                                     jnb             bitklb,komulpz
0750 900000   F     1338                                     mov     dptr,#chk;100000
0753 120000   F     1339                                     call    ldc_long                        ;r2..r5
0756 8006           1340                                     jmp             komul
0758 120000   F     1341     komulpz:call            findkoef                                ;r2,r3-hex
075B 12046C         1342                                     call            rebyte2                         ;r2..r5- he
                             x
                    1343                                     
075E 120402         1344     komul:  call    altof                   ;r2..r5->float
0761 900000   F     1345                                     mov     dptr,#CHtho;100000
0764 120000   F     1346                             call    ldc_ltemp                       ;r8..r11=8
0767 1202B7         1347                                     call    fldiv
076A 120000   F     1348     temul:                          call    move28
076D 785E           1349                                     mov             r0,#rez_Ame
076F 120000   F     1350                                     call    resar2
                    1351                     
0772 120203         1352                                     call    flmul     ;A1-=A-*KD  fl
                    1353                                     
0775 120343         1354                                     call    ftol                    ;float->int
0778 7866           1355                                     mov             r0,#rez_A1
077A 120000   F     1356                                     call    saver2
077D 120402         1357                                     call    altof                   ;r2..r5->float
0780 EA             1358                                     mov             a,r2
0781 547F           1359                                     anl             a,#7fh
0783 FA             1360                                     mov             r2,a
0784 900000   F     1361                                     mov     dptr,#ch_220;200;200000
0787 120000   F     1362                                     call    ldc_ltemp                       ;r8..r11=8
078A 1201D6         1363                                     call    flcmp
078D 502D           1364                                     jnc             rrmo220         ;A>200000
                    1365                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1366                             ;       jb              bitavp,yesavp
078F 301808         1367                                     jnb             knizm,goA2
0792 300602         1368                                     jnb             bitvi11,qu_avp
0795 8003           1369                                     jmp             goA2
0797 20052F         1370     qu_avp:                 jb              bitavp,yesavp
079A                1371     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
079A                1372     goA2:                    ;A2=A1-
079A 7866           1373                                      mov            r0,#rez_A1
079C 120000   F     1374                                     call    resar2
079F 787B           1375                                     mov             r0,#rez_A2
07A1 120000   F     1376                                     call    saver2
07A4                1377     goA3A2:                  ;A3=A2-A0
07A4 786A           1378                                       mov           r0,#rez_A0
07A6 120000   F     1379                                     call    resar8
07A9 120000   F     1380                                     call    lsub
07AC 789C           1381                                     mov             r0,#rez_A3
07AE 120000   F     1382                                     call    saver2
                    1383                                     ;;;;;;
07B1 200660         1384                                     jb              bitvi11,yesvich
07B4                1385     goonin:            ;jmp         goonind;indA3;8.11.06
07B4 78AC           1386                                     mov             r0,#chind
07B6 B60006         1387                                     cjne    @r0,#0,rnochi0
07B9 020000   F     1388                                     jmp             goonind;indA3
                    1389     
07BC 020000   F     1390     rrmo220:                jmp             mo220
07BF 020000   F     1391     rnochi0:                jmp             nochi0
07C2 7866           1392     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07C4 120000   F     1393                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07C7 80D1           1394                                             jmp             goA2
                    1395     ;;;;;;;;;;;;;;;;
07C9 EA             1396     yesavp:                 mov             a,r2
07CA 547F           1397                                     anl             a,#7fh
07CC FA             1398                                     mov             r2,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    23

07CD 900000   F     1399                                     mov     dptr,#ch_10th;10000
07D0 120000   F     1400                                     call    ldc_ltemp                       ;r8..r11=8
07D3 1201D6         1401                                     call    flcmp
07D6 50C2           1402                                     jnc             noavp           ;A>10000        
07D8 78AE           1403                                     mov             r0,#diap                ;10-11
07DA B60902         1404                                     cjne    @r0,#9,avpgo
07DD 80BB           1405                                     jmp             noavp
07DF                1406     avpgo:                  
07DF 06             1407                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07E0 B60A01         1408                                     cjne    @r0,#0ah,clmasv
07E3 16             1409                                     dec             @r0
07E4                1410     clmasv:         ;сбросить массив
07E4 120000   F     1411                             call    loadUS
                    1412                             ;call   louizm
07E7 120000   F     1413                             call     clmassix
07EA 78B3           1414                                     mov             r0,#summa
07EC 120000   F     1415                                     call    clear4
07EF 786A           1416                                     mov             r0,#rez_A0
07F1 120000   F     1417                                     call    clear4
07F4 C20F           1418                                     clr             bitnul
07F6 D207           1419                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07F8 80BA           1420                                jmp     goonin
                    1421     
07FA D00B           1422     erra01:         pop                     r11
07FC D00A           1423                                     pop                     r10
07FE D009           1424                                     pop                     r9
0800 D008           1425                                     pop                     r8
0802 C214           1426                                     clr             bitvich
0804 C206           1427                                     clr             bitvi11
0806 753934         1428                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
0809 120000   F     1429                                             call            error
080C 120000   F     1430                                             call            ind
080F 120000   F     1431                                             call            z_1s
0812 80A0           1432                                             jmp             goonin
                    1433     
                    1434     
0814                1435     yesvich:        
                    1436                     ;                       mov             r0,#konstB
                    1437                     ;               call    resar2
                    1438                     ;               call    move28
0814 789C           1439                                     mov             r0,#rez_A3;A1
0816 120000   F     1440                                     call    resar2                          ;HEX
                    1441                                     
0819 120402         1442                                     call            altof                   ;r2..r5->float
081C EA             1443                                     mov             a,r2                    ;модуль
081D 547F           1444                                     anl             a,#7fh
081F FA             1445                                     mov             r2,a
                    1446                     ;               call            fladd                           ;A1+B
                    1447                                     
0820 900000   F     1448                                     mov     dptr,#CH_500;
0823 120000   F     1449                                     call    ldc_ltemp                       ;r8..r11
0826 1201D6         1450                                     call    flcmp
0829 407E           1451                                     jc                      mo500R;error <500 >22000
082B 900000   F     1452                                     mov     dptr,#CH_22T;
082E 120000   F     1453                                     call    ldc_ltemp                       ;r8..r11
0831 1201D6         1454                                     call    flcmp
0834 507F           1455                                     jnc             mo500I          ;error
                    1456                                     ;;;;;;;;;;;;
0836 120000   F     1457                                     call            move28
0839 C008           1458                                     push            r8
083B C009           1459                                     push            r9
083D C00A           1460                                     push            r10
083F C00B           1461                                     push            r11
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    24

0841 78BC           1462                                     mov             r0,#konstA
0843 120000   F     1463                                     call    resar2
0846 900000   F     1464                                     mov                     dptr,#ch0
0849 120000   F     1465                                     call            ldc_ltemp
084C 1201D6         1466                                     call            flcmp
084F 60A9           1467                                     jz              erra01
0851 900000   F     1468                                     mov             dptr,#CH_B
0854 120000   F     1469                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0857 120203         1470                                     call            flmul                           ;A*10-7
085A D00B           1471                                     pop                     r11
085C D00A           1472                                     pop                     r10
085E D009           1473                                     pop                     r9
0860 D008           1474                                     pop                     r8
0862 1202B7         1475                                     call            fldiv                   ;результат R
0865 78C9           1476                                     mov                     r0,#rez_R
0867 120000   F     1477                                     call            saver2
086A 120343         1478                                     call            ftol                    ;float->hex
                    1479                                     ;;;;;;;;;;
086D 784F           1480                                             mov             r0,#abin
086F 120000   F     1481                                             call    saver2
                    1482     ;;;;;;;;
0872 7840           1483                                                     mov             r0,#bufind
0874                1484     age9:
0874 7620           1485                             mov             @r0,#" "          ;погасить индикатор
0876 08             1486                             inc             r0
0877 B84BFA         1487                             cjne    r0,#bufind+11,age9
                    1488                                             
087A 78C9           1489                                             mov             r0,#rez_R
087C 120000   F     1490                                             call            resar2
                    1491     ;;;;;;;;;;
087F 900000   F     1492                                     mov             dptr,#CH_fl
0882 120000   F     1493                                     CALL   ldc_ltemp
0885 1202B7         1494                                     call            fldiv
                    1495     
0888 78B8           1496                                     mov             r0,#work                ;степень +
088A 7600           1497                                     mov             @r0,#0
088C 78B9           1498                                     mov             r0,#work+1;степень -
088E 7600           1499                                     mov             @r0,#0
0890 900000   F     1500     compa1: mov     dptr,#ch_1;
0893 120000   F     1501                                     call    ldc_ltemp                       ;r8..r11
0896 1201D6         1502                                     call    flcmp
0899 4026           1503                                     jc              equ0            ;<1
089B 78B8           1504                                     mov             r0,#work                        ;степень +
089D 06             1505                                     inc             @r0
089E 900000   F     1506                                     mov             dptr,#ch_10;
08A1 120000   F     1507                                     call    ldc_ltemp                       ;r8..r11
08A4 1202B7         1508                                     call            fldiv
08A7 80E7           1509                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1510                                     ;;;;;;;;;;;;;;;;;;;
08A9 900000   F     1511     mo500R: mov             dptr,#teOLR
08AC 120000   F     1512                               call          lotext           
08AF 120000   F     1513                                     call            ind
08B2 020000   F     1514                                     jmp                     nobavp;nobitizm
08B5 900000   F     1515     mo500I: mov             dptr,#teOLI
08B8 120000   F     1516                               call          lotext           
08BB 120000   F     1517                                     call            ind
08BE 020000   F     1518                                     jmp                     nobavp;nobitizm
08C1                1519     equ0:           ;;;;;   call            ftol                    ;float->int
08C1 78B8           1520                                     mov             r0,#work                ;степень +
08C3 B60019         1521                                     cjne    @r0,#0,equ00
                    1522                                     
08C6 900000   F     1523     compa2: mov     dptr,#ch_1;
08C9 120000   F     1524                                     call    ldc_ltemp                       ;r8..r11
08CC 1201D6         1525                                     call    flcmp
08CF 500E           1526                                     jnc             equ00           ;>1
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    25

08D1 78B9           1527                                     mov             r0,#work+1                      ;степень -
08D3 16             1528                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08D4 900000   F     1529                                     mov             dptr,#ch_10;
08D7 120000   F     1530                                     call    ldc_ltemp                       ;r8..r11
08DA 120203         1531                                     call            flmul
08DD 80E7           1532                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1533     
                    1534     
08DF                1535     equ00:          
08DF 7853           1536                                                     mov             r0,#adec
08E1 7952           1537                                             mov             r1,#abin+3      ;hex->10
08E3 120000   F     1538                                             call    bindec
                    1539     
                    1540                                                     ;если степень полож убирать младший байт
                    1541                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1542                                                     ;число в bufind..bufind+5
08E6 78B8           1543                                             mov             r0,#work
08E8 B60021         1544                                             cjne    @r0,#0,outr
08EB 08             1545                                             inc             r0                      ;work+1
08EC B6FF05         1546                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08EF 06             1547                                             inc                     @r0;!!!!!!!!!?
08F0 785B           1548                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08F2 8003           1549                                             jmp                     bufr30
                    1550                                             ;;;;;;;;;;;;;;
08F4 06             1551     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08F5 785C           1552                                                     mov             r0,#adec+9
08F7 7945           1553     bufr30:         mov             r1,#bufind+5;6
08F9 7F05           1554                                             mov             r7,#5;7
08FB E6             1555     bufr2:                          mov             a,@r0
08FC 2430           1556                                             add             a,#30h
08FE F7             1557                                             mov             @r1,a
08FF 19             1558                                             dec             r1
0900 18             1559                                             dec             r0
0901 DFF8           1560                                             djnz    r7,bufr2
                    1561     
0903 784F           1562                                             mov             r0,#abin
0905 120000   F     1563                                             call            clear4
0908 78B9           1564                                             mov             r0,#work+1
090A 801C           1565                                     jmp             outr5
                    1566     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
090C 785C           1567     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
090E C3             1568                                             clr             c
090F 79B8           1569                                             mov             r1,#work
0911 E8             1570                                             mov             a,r0
0912 14             1571                                             dec             a                                  
                                  ;n-1
0913 97             1572                                             subb    a,@r1
0914 F8             1573                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0915 7945           1574                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0917 7F05           1575                                             mov             r7,#5;7
0919 E6             1576     bufr:                           mov             a,@r0
091A 2430           1577                                             add             a,#30h
091C F7             1578                                             mov             @r1,a
091D 19             1579                                             dec             r1
091E 18             1580                                             dec             r0
091F DFF8           1581                                             djnz    r7,bufr
                    1582     
0921 784F           1583                                             mov             r0,#abin
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    26

0923 120000   F     1584                                             call            clear4
0926 78B8           1585                                     mov             r0,#work
0928 E6             1586     outr5:                  mov             a,@r0
0929 F552           1587                                             mov             abin+3,a
                    1588                                                                     ;n(hex)->abin
092B 120000   F     1589                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
092E 2552           1590                                             add             a,abin+3
0930 F552           1591                                             mov             abin+3,a
0932 7853           1592                                             mov             r0,#adec
0934 7952           1593                                             mov             r1,#abin+3      ;hex->10
0936 120000   F     1594                                             call    bindec
0939 855C48         1595                                             mov             bufind+8,adec+9
093C 855B47         1596                                             mov             bufind+7,adec+8
093F 754966         1597                                             mov             bufind+9,#66h
0942 434B10         1598                                             orl             bufind+11,#10h;запятая после 1го зн
                             акоместа
0945 020000   F     1599                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1600                                             
                    1601                                     ;;;;;;;;;;;;;;;;;;;;;
                    1602     ;;;;;;;;;;;;;
                    1603     
0948 300508         1604     mo220:             jnb          bitavp,indoll
094B 301805         1605                                jnb          knizm,indoll;bitizm,indoll
094E 78AE           1606                                     mov             r0,#diap
0950 B6001A         1607                                     cjne    @r0,#0,nodi2
                    1608                                ;10-2
0953 300414         1609     indoll:         jnb             bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,па
                             м,вычR
0956 900000   F     1610                                             mov             dptr,#teOLL;OLL
0959 120000   F     1611                                             call    lotext
095C 300609         1612                                             jnb                     bitvi11,goonin2
095F 900000   F     1613                                             mov                     dptr,#teOLI
0962 120000   F     1614                                             call    lotext
0965 120000   F     1615                                             call            ind
0968 D217           1616     goonin2:                                        setb    bitoll
096A 020000   F     1617     goonin1:                jmp             goonin  
                    1618     
096D 16             1619     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1620     
096E B6FF01         1621                                     cjne    @r0,#0ffh,nodi9
0971 06             1622                                     inc             @r0
                    1623     
0972 120000   F     1624     nodi9:          call    loadUS
                    1625                                     ;call   louizm
                    1626                                     ;сбросить массив
0975 120000   F     1627                                     call     clmassix
0978 78B3           1628                                     mov             r0,#summa
097A 120000   F     1629                                     call    clear4
097D 786A           1630                                     mov             r0,#rez_A0
097F 120000   F     1631                                     call    clear4
0982 C20F           1632                                     clr             bitnul  
0984 D207           1633                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0986 020000   F     1634                                jmp     goonin
                    1635     
0989 16             1636     nochi0:                 dec             @r0                     ;СТИ-1
098A 020000   F     1637                                     jmp             labelB  
                    1638     
                    1639             
                    1640     ;;;;;;;;;;;;;;;
                    1641     
098D                1642     nop3_0: ;;      ;rez_A-rez_A0
                    1643                     ;;                      mov             r0,#rez_A0
                    1644                     ;;                      call    resar8
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    27

                    1645                     ;;                      call    lsub
                    1646                     ;;                      mov             r0,#rez_A
                    1647                     ;;;                     call    saver2
                    1648     
098D B70207         1649     no3parN:                        cjne    @r1,#2,no2parN
                    1650                                             ;в байт 0  записать пробел
0990 7946           1651                                             mov             r1,#bufind+6
0992 7720           1652                                             mov             @r1,#" ";0fdh;
0994 020000   F     1653                                             jmp             seeind;moveA3
                    1654     
0997                1655     no2parN:                        ;в байты 0 и 1 записать пробел
0997 7945           1656                                             mov             r1,#bufind+5
0999 7720           1657                                             mov             @r1,#" ";0fdh;" "
099B 09             1658                                             inc             r1
099C 7720           1659                                             mov             @r1,#" ";0fdh;" "
099E 8077           1660                                             jmp             seeind;moveA3
09A0 8075           1661      rseeind:               jmp             seeind
                    1662     
09A2                1663     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1664                                     
                    1665                                             
09A2                1666     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1667                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1668                     ;до конца цикла измерения результат не размещать в буфере
                    1669                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1670                     ;и возврату в режим измерения
09A2 20145C         1671                                             jb              bitvich,rnorvich
09A5 201059         1672                                             jb              bitt2,rnorvich
09A8 2017F5         1673                                             jb              bitoll,rseeind
                    1674                                             
09AB 2011F2         1675                                             jb              bitmenu,rseeind
09AE 200BEF         1676                                             jb              bitmem,rseeind
                    1677     ;;;;;;;;;;;;;;
                    1678                                             ; mov           r0,#rez_A3
                    1679                                             ;call   resar2
                    1680                                             ;call   ftol                    ;float->int r2..r5
                    1681     ;;;;;;;;
09B1 789C           1682                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
09B3 120000   F     1683                                             call    resar2;????????????????17.01.07
                    1684                                     
09B6 120000   F     1685                                             call    maform
09B9 784F           1686                                             mov             r0,#abin
09BB 120000   F     1687                                             call    saver2
                    1688     ;;;;;;;;
                    1689                                             
09BE 7853           1690                                             mov             r0,#adec
09C0 7952           1691                                             mov             r1,#abin+3      ;hex->10
09C2 120000   F     1692                                             call    bindec
                    1693                                     
09C5 785C           1694                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09C7 7946           1695                                             mov             r1,#bufind+6
09C9 7F07           1696                                             mov             r7,#7
09CB E6             1697     bufdec:                         mov             a,@r0
09CC 2430           1698                                             add             a,#30h
09CE F7             1699                                             mov             @r1,a
09CF 19             1700                                             dec             r1
09D0 18             1701                                             dec             r0
09D1 DFF8           1702                                             djnz    r7,bufdec
09D3 7847           1703                                             mov             r0,#bufind+7
09D5 762D           1704                                             mov             @r0,#2dh          ;-2..-9
09D7 7840           1705                                             mov             r0,#bufind
09D9 762B           1706                                             mov             @r0,#2bh
09DB 300202         1707                                             jnb             znmat,nozzmi;bitznak,nozzmi
09DE 762D           1708                                             mov             @r0,#2dh
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    28

09E0 79AE           1709     nozzmi:                         mov             r1,#diap
09E2 7848           1710                                             mov             r0,#bufind+8
09E4 E7             1711                                             mov             a,@r1
09E5 B4080B         1712                                             cjne    a,#8,nodi8
09E8 20151E         1713                                             jb              biteizm,seegoon
09EB 7630           1714                                             mov             @r0,#30h                 ;10-10
09ED 18             1715                                             dec             r0
09EE 7663           1716                                             mov             @r0,#63h;31h
09F0 08             1717                                             inc             r0
09F1 8016           1718                                             jmp             seegoon
09F3 B40910         1719     nodi8:                          cjne    a,#9,nodis9
09F6 201510         1720                                     jb              biteizm,seegoon
09F9 7631           1721                                             mov             @r0,#31h           ;10-11
09FB 18             1722                                             dec             r0
09FC 7663           1723                                             mov             @r0,#63h;31h
                    1724                                     
09FE 08             1725                                             inc             r0
09FF 8008           1726                                             jmp             seegoon
                    1727     
0A01 020000   F     1728     rnorvich:               jmp             norvich
0A04 8087           1729     rno3parN:               jmp             no3parN
                    1730     
0A06 2432           1731     nodis9:                         add             a,#32h
0A08 F6             1732                                             mov             @r0,a;#37h;"T";
0A09 08             1733     seegoon:                        inc             r0
0A0A 7641           1734                                             mov             @r0,#"A";"E";
0A0C 08             1735                                             inc             r0
0A0D 7600           1736                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
0A0F 08             1737                                             inc             r0;             mov             buf
                             ind+11
0A10 7610           1738                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1739                                             
                    1740     ;;;;;;;;;;;;;;;
                    1741     ;;;;;;goonind:
0A12 79AF           1742                                             mov             r1,#parN        ; ??????
0A14 B703ED         1743                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1744             
0A17                1745     seeind:                         ;;;;;;;;;;;;;
0A17 784A           1746                                             mov             r0,#bufind+10
0A19 E6             1747                                             mov             a,@r0
0A1A 300F03         1748                                             jnb             bitnul,nnnul
0A1D 4408           1749                                             orl             a,#08h
0A1F F6             1750                                             mov             @r0,a
0A20 799A           1751      nnnul:         mov             r1,#parT
0A22 B70205         1752                                             cjne    @r1,#2,nsec1
0A25 4420           1753                                             orl             a,#20h    ;1s
0A27 F6             1754                                             mov             @r0,a
0A28 800B           1755                                             jmp             nsec10
0A2A B70105         1756     nsec1:          cjne    @r1,#1,nsec11
0A2D 4440           1757                                             orl             a,#40h                  ;10s
0A2F F6             1758                                             mov             @r0,a
0A30 8003           1759                                             jmp             nsec10
                    1760                                     
0A32 4410           1761     nsec11:         orl             a,#10h
0A34 F6             1762                                             mov             @r0,a                    ;0,1s
                    1763     ;;;;;;;;;;;;;;;;
0A35                1764     nsec10:         
                    1765     
                    1766     
0A35 784A           1767                                             mov             r0,#bufind+10   
0A37 E6             1768                                             mov             a,@r0;mov               @r0,a
0A38 300503         1769                                             jnb             bitavp,nobavp
0A3B 4404           1770                                             orl             a,#04           ;bufind+10.2
0A3D F6             1771                                             mov             @r0,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    29

                    1772                                     ;       mov             @r0,a   
0A3E 784A           1773     nobavp:         mov             r0,#bufind+10   
0A40 E6             1774                                             mov             a,@r0;mov               @r0,a   
0A41 301803         1775                                        jnb          knizm,nobitizm
0A44 4402           1776                                             orl             a,#02
0A46 F6             1777                                              mov            @r0,a
0A47                1778     nobitizm:                       
0A47 301A07         1779                                             jnb             bitakt,notakt
0A4A C21A           1780                                             clr             bitakt
0A4C 534AFE         1781                                             anl             bufind+10,#0feh
0A4F 8005           1782                                             jmp             taktind
0A51 D21A           1783     notakt:                         setb    bitakt
0A53 434A01         1784                                             orl             bufind+10,#01                      
                                          
0A56                1785     taktind:                
                    1786     ;;;;;;;;;
0A56 301517         1787                                             jnb             biteizm,yesind
0A59 79B1           1788                                             mov             r1,#vichR
0A5B 7848           1789                                             mov             r0,#bufind+8
0A5D 7654           1790                                             mov             @r0,#'T'
0A5F 08             1791                                             inc             r0
0A60 B72104         1792                                             cjne    @r1,#21h,test9i
0A63 7631           1793                                             mov             @r0,#31h;11A
                    1794                                     ;       dec             r0
                    1795                                     ;       mov             @r0,#63h
0A65 8009           1796                                             jmp             yesind
0A67 B72204         1797     test9i:         cjne    @r1,#22h,test7i
0A6A 7632           1798                                             mov             @r0,#32h;39h;09A
0A6C 8002           1799                                             jmp             yesind
0A6E 7633           1800     test7i:         mov             @r0,#33h;37h;07A
                    1801     ;;;;;;;;;
0A70                1802     yesind:         
0A70 301203         1803                                             jnb             bitklb,noklb
0A73 434A80         1804                                             orl             bufind+10,#80h; on kmp
0A76 300A03         1805     noklb:          jnb             bitbon,nobuf
0A79 434B02         1806                                             orl             bufind+11,#02h; on pysk
0A7C                1807     nobuf:          ;;;;;
0A7C 301808         1808               jnb      knizm,anlp1
0A7F 79AE           1809                                             mov                     r1,#diap
0A81 C3             1810                                             clr                     c
0A82 7401           1811                                             mov                     a,#1
0A84 97             1812                                             subb            a,@r1
0A85 4009           1813                                             jc                      nop1oll
0A87 309106         1814     anlp1:          jnb                     p1.1,nop1oll
0A8A 753935         1815                                             mov                     nuerr,#35h
0A8D 120000   F     1816                                             call            error;ошибка 5 перегрузка на диап 1
                             0-2,10-3     
                    1817             
0A90 120000   F     1818     nop1oll:        call    ind        ;пп выдачи на индикатор
0A93                1819     norvich: 
0A93 789A           1820                                     mov             r0,# parT
0A95 79AC           1821                                             mov             r1,#chind
0A97 B60152         1822                                             cjne    @r0,#1,rnot1in
0A9A                1823     labelB:                    ;;;;;;;;;;;
                    1824                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A9A 789F           1825                                                     mov     r0,#rez_A3+3
                    1826                             ;;;;;;;;
0A9C 79BB           1827                             mov             r1,#work+3
0A9E E6             1828                             mov             a,@r0
0A9F 7F07           1829                             mov             r7,#7;кол сдв вправо
0AA1 C3             1830     dvig3:          clr             c
0AA2 13             1831                             rrc             a
0AA3 DFFC           1832                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0AA5 FA             1833                             mov             r2,a    ;сохр байт
0AA6 18             1834                             dec             r0              ;rez_A3+2
0AA7 E6             1835                             mov             a,@r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    30

0AA8 C0E0           1836                             push    acc
0AAA C3             1837                             clr             c
0AAB 7F01           1838                             mov             r7,#1
0AAD C3             1839     dvig2:          clr             c
0AAE 33             1840                             rlc             a
0AAF DFFC           1841                             djnz    r7,dvig2 ;d12..d11       средний байт
0AB1 4A             1842                             orl             a,r2
0AB2 F7             1843                             mov             @r1,a;сформ мл байт
0AB3 19             1844                             dec             r1
0AB4 D0E0           1845                             pop             acc
                    1846                             
0AB6 7F07           1847                             mov             r7,#7
0AB8 C3             1848     dvig1:          clr             c
0AB9 13             1849                             rrc             a
0ABA DFFC           1850                             djnz    r7,dvig1 ;d18     ср байт
0ABC FA             1851                             mov             r2,a   ;сохр
0ABD 18             1852                             dec             r0
0ABE E6             1853                             mov             a,@r0 ;rez_A3+1
0ABF C0E0           1854                             push    acc
                    1855                     
0AC1 7F01           1856                             mov             r7,#1
0AC3 C3             1857     dvig0:          clr             c
0AC4 33             1858                             rlc             a
0AC5 DFFC           1859                             djnz    r7,dvig0 ;        d21..d16
0AC7 4A             1860                             orl             a,r2
0AC8 F7             1861                             mov             @r1,a   ; сформ средний  байт
0AC9 19             1862                             dec             r1
0ACA D0E0           1863                             pop             acc       ;rez_A3+1
                    1864                             ;;;;;;;;;;;;;;
                    1865     ;                       jb              acc.7,dvm
0ACC C3             1866                             clr             c
0ACD 7F07           1867                             mov             r7,#7
0ACF C3             1868     dvig4:          clr             c
0AD0 13             1869                             rrc             a
0AD1 DFFC           1870                             djnz    r7,dvig4 ;        d22
0AD3 FA             1871                             mov             r2,a   ;сохр
0AD4 18             1872                             dec             r0;     rez_A3
0AD5 E6             1873                             mov             a,@r0
                    1874                             ;;;;;
0AD6 7F01           1875                             mov             r7,#1
0AD8 C3             1876     vig0:           clr             c
0AD9 33             1877                             rlc             a
0ADA DFFC           1878                             djnz    r7,vig0 ;         d24..d30
0ADC 4A             1879                             orl             a,r2
0ADD F7             1880                             mov             @r1,a   ; сформ   байт
0ADE 19             1881                             dec             r1
0ADF E6             1882                             mov             a,@r0
                    1883                             ;;;;;
0AE0 20E70C         1884                             jb              acc.7,dvm
0AE3 C3             1885                             clr             c
0AE4 7F07           1886                             mov             r7,#7
0AE6 C3             1887     vig4:           clr             c
0AE7 13             1888                             rrc             a
0AE8 DFFC           1889                             djnz    r7,vig4 ;         d
0AEA 8009           1890                             jmp             endsdv
                    1891     
0AEC 020000   F     1892     rnot1in:                jmp             not1in
                    1893     
                    1894     ;;;;;;;;;;;;                                    
0AEF 7F07           1895     dvm:            mov             r7,#7
0AF1 D3             1896     dvig6:          setb            c
0AF2 13             1897                             rrc             a
0AF3 DFFC           1898                             djnz    r7,dvig6 ;        d31
0AF5 F7             1899     endsdv:         mov             @r1,a
                    1900                                                             
                    1901      ;->work   
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    31

                    1902                             
0AF6 900000   F     1903                             mov             dptr,#chzap
0AF9 120000   F     1904                             call     ldc_long
0AFC 78BB           1905                              mov            r0,#work+3
0AFE 120000   F     1906                             call    ladd
0B01 ED             1907                             mov             a,r5
0B02 F5D2           1908                             mov             DAC0L,a
                    1909                             
0B04 EC             1910                             mov             a,r4
0B05 F5D3           1911                             mov             DAC0H,a
                    1912     
                    1913                                             ;;;;;;;;;;
0B07 78CF           1914                                             mov                     r0,#chbuf               ;fl
                             oat
0B09 120000   F     1915                                             call            resar2
0B0C 900000   F     1916                                             mov                     dptr,#ch_2;ch0;ch_1
0B0F 120000   F     1917                                             call            ldc_ltemp
0B12 1201D6         1918                                             call            flcmp
0B15 5020           1919                                             jnc                     rnobuf0
                    1920                                             
0B17 900000   F     1921                                             mov                     dptr,#ch_1
0B1A 120000   F     1922                                             call            ldc_ltemp
0B1D 1201D1         1923                                             call            flsub
0B20 900E00         1924                                             mov                     dptr,#chbuf1               
                                  ;СБ1 внешн озу
0B23 EA             1925                                             mov                     a,r2
0B24 F0             1926                                             movx            @dptr,a
0B25 A3             1927                                             inc                     dptr
0B26 EB             1928                                             mov                     a,r3
0B27 F0             1929                                             movx            @dptr,a
0B28 A3             1930                                             inc                     dptr
0B29 EC             1931                                             mov                     a,r4
0B2A F0             1932                                             movx            @dptr,a
0B2B A3             1933                                             inc                     dptr
0B2C ED             1934                                             mov                     a,r5
0B2D F0             1935                                             movx            @dptr,a
                    1936                                             
                    1937                                             
                    1938                                             ;jnc                    rnobuf0
0B2E 200909         1939                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0B31 200A08         1940                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B34 020000   F     1941                                             jmp             gocikle
0B37 020000   F     1942     rnobuf0:        jmp             nobuf0
0B3A                1943     yesprd: ;передать   A3 в буфер
0B3A 8045           1944                                             jmp             goonT
0B3C                1945     yesbuf:         ;записать   A3 в буфер
0B3C 120000   F     1946                                             call            resa_hl;dptr-
0B3F 120000   F     1947                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1948                                                                             ;в ячейке saven_bl
0B42 120000   F     1949                                             call            save_hl
0B45 78AE           1950                                             mov                     r0,#diap
0B47 E6             1951                                             mov                     a,@r0
0B48 7938           1952                                             mov                     r1,#nblok
0B4A B70104         1953                                             cjne            @r1,#1,nosav1
0B4D F534           1954                                             mov                     sadiap,a
0B4F 8012           1955                                             jmp                     gotostrob
0B51 B70204         1956     nosav1:         cjne            @r1,#2,nosav2
0B54 F532           1957                                             mov                     sadiap2,a
0B56 800B           1958                                     jmp                     gotostrob
0B58 B70304         1959     nosav2:         cjne            @r1,#3,nosav3
0B5B F531           1960                                             mov                     sadiap3,a
0B5D 8004           1961                                     jmp                     gotostrob
0B5F                1962     nosav3:         
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    32

0B5F F530           1963                                             mov                     sadiap4,a
0B61 8000           1964                                     jmp                     gotostrob
                    1965     
                    1966                                             ;строб
0B63                1967     gotostrob:
0B63 E586           1968                                     mov             a,P6            ;p6.4=0
0B65 54EF           1969                             anl             a,#0efh
0B67 F586           1970                             mov             P6,a
0B69 00             1971                             nop
0B6A 00             1972                             nop
                    1973                                     
0B6B E586           1974                             mov             a,P6                    ;p6.4=1 
0B6D 4410           1975                             orl             a,#10h
0B6F F586           1976                             mov             P6,a
                    1977                                     ;;;;;;;;;
0B71 E5DA           1978                             mov             a,PCA0CPM0;     
0B73 4446           1979                             orl             a,#46h;anl              a,#0fbh
0B75 F5DA           1980                             mov             PCA0CPM0,a
                    1981     
0B77 75CDD0         1982                             mov             TH2,#0d0h
0B7A 75CC00         1983                             mov             TL2,#00
                    1984     
0B7D D2CA           1985                             setb            T2CON.2
0B7F D2AD           1986                             setb            ET2;IE.5                            
0B81 78CD           1987     goonT:                          mov             r0,#interva;high  byte loadr2
0B83 E6             1988                                             mov             a,@r0
0B84 FC             1989                                             mov             r4,a
0B85 08             1990                                             inc             r0
0B86 E6             1991                                             mov             a,@r0
0B87 FD             1992                                             mov             r5,a
0B88 E4             1993                                             clr             a
0B89 FB             1994                                             mov             r3,a
0B8A FA             1995                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B8B 120402         1996                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1997     
0B8E 789A           1998                                             mov             r0,#parT
0B90 B60108         1999                                             cjne    @r0,#1,nott1
0B93 900000   F     2000                                             mov                     dptr,#ch_2       
0B96 120000   F     2001                                             call            ldc_ltemp
0B99 8009           2002                                             jmp                     intmul
                    2003     
0B9B B60225         2004     nott1:                  cjne    @r0,#2,nott2
0B9E 900000   F     2005                                                     mov                     dptr,#ch_10      
0BA1 120000   F     2006                                                     call            ldc_ltemp
                    2007                                                                             
0BA4 120203         2008     intmul: call            flmul                                   ;*10
0BA7 900E00         2009     intmul1:        mov             dptr,#chbuf1    ;СБ1
0BAA E0             2010                                             movx    a,@dptr
0BAB F508           2011                                             mov             r8,a
0BAD A3             2012                                             inc             dptr
0BAE E0             2013                                     movx    a,@dptr
0BAF F509           2014                                             mov             r9,a
0BB1 A3             2015                                             inc             dptr
0BB2 E0             2016                                     movx    a,@dptr
0BB3 F50A           2017                                             mov             r10,a
0BB5 A3             2018                                             inc             dptr
0BB6 E0             2019                                             movx    a,@dptr
0BB7 F50B           2020                                             mov             r11,a
0BB9 120166         2021                                             call            fladd           ;СБ+СБ1
0BBC 78CF           2022     intmul2:        mov                     r0,#chbuf
0BBE 120000   F     2023                                     call            saver2          ;*2
                    2024                                     
0BC1 8035           2025                                     jmp             gocikle
                    2026     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    33

0BC3 B6030B         2027     nott2:                  cjne    @r0,#3,nott3
0BC6 900000   F     2028                                                     mov                     dptr,#ch_2       
0BC9 120000   F     2029                                                     call            ldc_ltemp
0BCC 120203         2030                                                     call            flmul
0BCF 80EB           2031                                                     jmp                     intmul2            
                                                  ;*2
                    2032     
                    2033     
0BD1 B60414         2034     nott3:          cjne    @r0,#4,nott4
0BD4 900000   F     2035                                             mov                     dptr,#ch_10      
0BD7 120000   F     2036                                             call            ldc_ltemp       ;/10*4
0BDA 1202B7         2037                                             call            fldiv
0BDD 900000   F     2038                                             mov                     dptr,#ch_4       
0BE0 120000   F     2039                                             call            ldc_ltemp
0BE3 120203         2040                                             call            flmul
0BE6 80D4           2041                                             jmp             intmul2
                    2042     
0BE8 B6050B         2043     nott4:          cjne    @r0,#5,nott5
0BEB 900000   F     2044                                                     mov                     dptr,#ch_2       
0BEE 120000   F     2045                                             call            ldc_ltemp;*2
0BF1 120203         2046                                             call            flmul
0BF4 80C6           2047                                             jmp             intmul2;T=5
0BF6                2048     nott5:  ;               mov                     dptr,#ch_1       
                    2049                                     ;       call            ldc_ltemp
                    2050                                     ;       call            flmul
0BF6 80C4           2051                                     jmp                     intmul2                            
                                  ;*1
                    2052     
                    2053     
0BF8 300708         2054     gocikle:        jnb             bitzus,nofz                     
0BFB 120000   F     2055                             call    z_05s    ;0,5c
0BFE 120000   F     2056                             call    z_05s    ;0,5c
0C01 C207           2057                             clr     bitzus;bitbuf бит задержки засылки us
0C03 020000   F     2058     nofz:           jmp     labelA;rebyte
                    2059     
                    2060     
0C06 80F0           2061     yestt5:         jmp             gocikle
                    2062     
0C08 78CF           2063     nobuf0:                 mov             r0,#chbuf
0C0A 120000   F     2064                                                     call            resar2
0C0D 900000   F     2065                                                     mov                     dptr,#ch_1       
0C10 120000   F     2066                                             call            ldc_ltemp
0C13 1201D1         2067                                             call            flsub
0C16 78CF           2068                                             mov                     r0,#chbuf       
0C18 120000   F     2069                                             call            saver2  
0C1B 80DB           2070                                             jmp             gocikle
                    2071     
                    2072     
0C1D B60205         2073     not1in:                         cjne    @r0,#2,not2in
0C20 7701           2074                                             mov             @r1,#1           ;T=2
0C22 020000   F     2075                                             jmp     labelB
                    2076     
0C25 B60305         2077     not2in:                         cjne    @r0,#3,not3in
0C28 7701           2078                                             mov             @r1,#1;9                ;T=3
0C2A 020000   F     2079                                             jmp     labelB
0C2D 7703           2080     not3in:                         mov             @r1,#3;19
0C2F 020000   F     2081                                             jmp     labelB
                    2082     
                    2083     
                    2084     ;;;;;;;;;;;3.11.06
                    2085     
                    2086     ;;коррекция 0
0C32 7883           2087     KORnul:         mov             r0,#chdel
0C34 B60010         2088                             cjne    @r0,#0,nonuldel
                    2089                                     
0C37 E584           2090                             mov             a,p4                    ;сохр  us
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    34

0C39 F536           2091                             mov             saus,a
0C3B E585           2092                             mov             a,p5
0C3D F537           2093                             mov             saus+1,a
                    2094     
0C3F 900000   F     2095                             mov             dptr,#kor0us
0C42 120000   F     2096                             call    lospus          ;упр слово коррекции 0
0C45 8018           2097                             jmp             chdelmo
                    2098     
0C47                2099     nonuldel:       ;cjne   @r0,#7,no4del
0C47 B6031B         2100                                                     cjne    @r0,#3,no4del
                    2101                             ;рез ->AN
0C4A 7862           2102                             mov             r0,#rez_A;->r2..r5
0C4C 120000   F     2103                             call    resar2
                    2104             
                    2105                                     ;;;;;;;;;;
0C4F 120402         2106                             call    altof           ;r2..r5->float
0C52 7884           2107                             mov             r0,#kor0_AN;->kor0_AN
0C54 120000   F     2108                             call    saver2
                    2109                                     
0C57 E536           2110                             mov             a,saus                  ;восстан исходное упр слово
0C59 F584           2111                             mov             p4,a
0C5B E537           2112                             mov             a,saus+1
0C5D F585           2113                             mov             p5,a            
0C5F 7883           2114     chdelmo:        mov             r0,#chdel
0C61 06             2115                             inc             @r0             ;chdel+1
0C62 020000   F     2116                             jmp              rebyte
                    2117     
0C65                2118     no4del:         ;cjne   @r0,#14,chdelmo
0C65 B606F7         2119                                             cjne    @r0,#6,chdelmo
0C68 7600           2120                             mov             @r0,#0          ;chdel
0C6A 7898           2121                             mov             r0,#chinkor
0C6C 7602           2122                             mov             @r0,#2;00;
0C6E 08             2123                             inc             r0
0C6F 7658           2124                             mov             @r0,#58h;0c8h
0C71 120000   F     2125                             call    clmassix;сбросить массив скольз среднего
0C74                2126     bonpart:
0C74 300A20         2127                             jnb                     bitbon,rebyter
0C77 78CF           2128                             mov                     r0,#chbuf
0C79 120000   F     2129                             call            resar2
0C7C 799A           2130                             mov                     r1,#parT
0C7E B70211         2131                             cjne            @r1,#2,no6del
0C81 900000   F     2132                             mov                     dptr,#ch_7;5
0C84                2133     no5del:
0C84 120000   F     2134                             call            ldc_ltemp
0C87 1201D1         2135                             call            flsub   
0C8A 78CF           2136                             mov                     r0,#chbuf
0C8C 120000   F     2137                             call            saver2
0C8F 020000   F     2138                             jmp              rebyte
0C92                2139     no6del:
0C92 900000   F     2140                             mov                     dptr,#ch_1
0C95 80ED           2141                             jmp                     no5del
                    2142     
                    2143     
0C97 020000   F     2144     rebyter:        jmp              rebyte
                    2145     
0C9A 7981           2146     tekaout:        mov             r1,#chavt
0C9C 770C           2147                                             mov             @r1,#0ch;6;1;
0C9E 09             2148                                             inc             r1
0C9F 7780           2149                                             mov             @r1,#80h;40h;
0CA1 020000   F     2150                                             jmp             noavk
                    2151     
                    2152     
                    2153     ;автокалибровка
0CA4 200AF3         2154     autoka:  jb             bitbon,tekaout;rebyter
0CA7                2155     nulavt:  ;;;;;
0CA7 7883           2156                             mov             r0,#chdel
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    35

0CA9 B60016         2157                             cjne    @r0,#0,nndelch
0CAC E584           2158                             mov             a,p4                    ;сохр  us
0CAE F536           2159                             mov             saus,a
0CB0 E585           2160                             mov             a,p5
0CB2 F537           2161                             mov             saus+1,a
                    2162     
0CB4 E585           2163                             mov   a,p5
0CB6 4404           2164                             orl             a,#04              ;p5.2=1
0CB8 00             2165                             nop
0CB9 00             2166                             nop
0CBA 543F           2167                             anl             a,#3fh          ;p5.6,p5.7=0
0CBC F585           2168                             mov   p5,a
0CBE 06             2169                             inc             @r0
0CBF 020000   F     2170                             jmp              rebyte
                    2171     
0CC2 B6033D         2172     nndelch:        cjne    @r0,#3,n4delch
                    2173                             ;pez->A+
                    2174                             ;K+=000/(A+-AN)
                    2175                             ;mov            r0,#rez_A;->r2..r5
                    2176                             ;call   resar2
0CC5 E577           2177                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CC7 FA             2178                                     mov             r2,a
0CC8 E578           2179                                     mov             a,reacp+1
0CCA FB             2180                                     mov             r3,a
0CCB E579           2181                                     mov             a,reacp+2
0CCD FC             2182                                     mov             r4,a
0CCE E57A           2183                                     mov             a,reacp+3
0CD0 FD             2184                                     mov             r5,a
                    2185                                     ;;;;;;;;;;;;;;;
0CD1 120402         2186                             call    altof                   ;r2..r5->float
0CD4 7888           2187                             mov             r0,#rezAp;->rezAp
0CD6 120000   F     2188                             call    saver2                          
0CD9 7884           2189                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CDB 120000   F     2190                             call    resar8                          
0CDE 1201D1         2191                             call    flsub           ; r2..r5(A+-AN)
0CE1 120000   F     2192                             call    move28     ;r2..r5->r8..r11
0CE4 900000   F     2193                             mov             dptr,#CH2tho;000->r2..r5 float
0CE7 120000   F     2194                             call    ldc_long                
0CEA 1202B7         2195                             call    fldiv
0CED EA             2196                             mov             a,r2
0CEE 547F           2197                             anl             a,#7fh
0CF0 FA             2198                             mov             r2,a
0CF1 7890           2199                             mov             r0,#koefKp;->koefKp
0CF3 120000   F     2200                             call    saver2
                    2201                       
                    2202                     ;       anl             P5,#0feh                ;p5.0=0 
0CF6 E585           2203                     mov             a,P5
0CF8 543B           2204                             anl             a,#3bh;acp-
0CFA F585           2205                             mov             P5,a
0CFC 7883           2206                             mov             r0,#chdel
0CFE 06             2207                             inc             @r0                       ;ch+1
0CFF 020000   F     2208                             jmp             rebyte
                    2209     
0D02 B6063F         2210     n4delch:        cjne    @r0,#6,n8delch
                    2211                             ; pez->A-
                    2212                             ;K-=000/(A--AN)
                    2213                     ;       mov     r0,#rez_A;->r2..r5
                    2214                     ;       call    resar2
0D05 E577           2215                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0D07 FA             2216                                     mov             r2,a
0D08 E578           2217                                     mov             a,reacp+1
0D0A FB             2218                                     mov             r3,a
0D0B E579           2219                                     mov             a,reacp+2
0D0D FC             2220                                     mov             r4,a
0D0E E57A           2221                                     mov             a,reacp+3
0D10 FD             2222                                     mov             r5,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    36

                    2223                                     ;;;;;;;;;;;;;;;
0D11 120402         2224                             call    altof                   ;r2..r5->float
0D14 788C           2225                             mov             r0,#rezAm;->rezAm
0D16 120000   F     2226                             call    saver2                          
0D19 7884           2227                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0D1B 120000   F     2228                             call    resar8                          
0D1E 1201D1         2229                             call    flsub                   ; r2..r5(A--AN)
0D21 120000   F     2230                             call    move28                  ;r2..r5->r8..r11
0D24 900000   F     2231                             mov             dptr,#CH2tho    ;000->r2..r5 float
0D27 120000   F     2232                             call    ldc_long                
0D2A 1202B7         2233                             call    fldiv
0D2D EA             2234                             mov             a,r2
0D2E 547F           2235                             anl             a,#7fh
0D30 FA             2236                             mov             r2,a
0D31 7894           2237                             mov             r0,#koefKm;->koefKm
0D33 120000   F     2238                             call    saver2
                    2239                        
0D36 E536           2240                             mov             a,saus                  ;восстан исходное упр слово
0D38 F584           2241                             mov             p4,a
0D3A E537           2242                             mov             a,saus+1
0D3C F585           2243                             mov             p5,a            
0D3E 7883           2244                             mov             r0,#chdel
0D40 06             2245                             inc             @r0                       ;ch+1
0D41 020000   F     2246                        jmp    rebyte
                    2247     
0D44 B6090F         2248     n8delch:        cjne    @r0,#9,n12delch
0D47 7600           2249                             mov             @r0,#0
0D49 7981           2250                             mov             r1,#chavt
0D4B 773E           2251                             mov             @r1,#3eh;0ch;
0D4D 09             2252                             inc             r1
0D4E 7780           2253                             mov             @r1,#80h;
0D50 120000   F     2254                             call   clmassix     ;сбросить массив среднего
0D53 020000   F     2255                             jmp             rebyte; bonpart;
0D56 06             2256     n12delch:       inc             @r0
0D57 020000   F     2257                             jmp             rebyte
                    2258     
                    2259     
                    2260     
                    2261                                 
0D5A 020000   F     2262     rout6:          jmp             out6
0D5D 020000   F     2263     rlabelF:        jmp             labelF  
0D60 020000   F     2264     rknrazr:        jmp             knrazr  
0D63 020000   F     2265     rknopt:         jmp             knopt
0D66 020000   F     2266     rizman:         jmp             izman
                    2267             
0D69 020000   F     2268     no0chkl:        jmp             kkout6
0D6C 75AD00         2269                                                     mov             P3IF,#00;               обя
                             зательно сбросить опять приходит на обработку прерывания
0D6F 75B0C0         2270                                             mov             P3,#0c0h
0D72 32             2271                                             reti
0D73                2272     keyb1:  ;IE6
                    2273     ;;;;;
                    2274                     ;       mov                     a,chkl+1                ;low
                    2275                     ;       jnz                     no0chkl
                    2276                     ;       mov                     a,chkl                          ;high
                    2277                     ;       jnz                     no0chkl
                    2278     ;;;;;
0D73 75E700         2279                                     mov             EIE2,#00H
0D76 75AD00         2280                                     mov             P3IF,#00
                    2281                                     
0D79 C0E0           2282                                     push    acc
0D7B C0D0           2283                                     push    psw
0D7D C000           2284                                     push    rr0
0D7F C001           2285                                     push    rr1
0D81 C002           2286                                     push    rr2
0D83 C003           2287                                     push    rr3
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    37

0D85 C004           2288                                     push    rr4
0D87 C005           2289                                     push    rr5
0D89 C006           2290                                     push    rr6
0D8B C007           2291                                     push    rr7
0D8D C082           2292                                     push    dpl
0D8F C083           2293                                     push    dph
                    2294                                     ;clr            bitmig
                    2295                       ;;;;;;;;;;;;;;
0D91 120000   F     2296                                     call    z_01s;0,1s
                    2297                                     ;       call    z_01s
                    2298                                     ;восстан знакоместо при мигании
                    2299                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0D94 78B2           2300                                     mov             r0,#marker
0D96 7440           2301                                     mov             a,#bufind
0D98 26             2302                                     add             a,@r0                   ;a=bufind+marker
0D99 F9             2303                                     mov             r1,a
0D9A A73C           2304                                     mov             @r1,savba
                    2305                                     ;;;;;;;;;;;
0D9C E5B0           2306                             mov             a,p3
0D9E 20E644         2307                                     jb              acc.6,outviR;выход из режима выч R
0DA1 E5B0           2308     gout6:                          mov             a,p3
0DA3 44FF           2309                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0DA5 F5B0           2310                                     mov             p3,a
0DA7 E5B0           2311                                     mov             a,p3
0DA9 30E6AE         2312                                     jnb             acc.6,rout6             ;error
0DAC 3004AE         2313                                     jnb             bitizm,rlabelF
0DAF 75B0FE         2314                                     mov             p3,#0feh                ;реж IZM
0DB2 E5B0           2315                                     mov             a,p3
0DB4 30E6AF         2316                                     jnb             acc.6,rizman
                    2317                                     ;;;;;;
0DB7 201232         2318                                     jb              bitklb,goklb
0DBA 75B0FD         2319                                     mov             p3,#0fdh
0DBD E5B0           2320                                     mov             a,p3
0DBF 30E69E         2321                                     jnb             acc.6,rknrazr             ;labelC
0DC2 75B0FB         2322                                     mov             p3,#0fbh
0DC5 E5B0           2323                                     mov             a,p3
0DC7 30E656         2324                                     jnb             acc.6,knright           ;->
0DCA 75B0F7         2325                                     mov             p3,#0f7h
0DCD E5B0           2326                                     mov             a,p3
0DCF 30E691         2327                                     jnb             acc.6,rknopt                    ;T
0DD2 75B0EF         2328                                     mov             p3,#0efh
0DD5 E5B0           2329                                mov          a,p3
0DD7 30E615         2330                                     jnb             acc.6,pyskst                    ;pysk/stop
0DDA 75B0DF         2331                                     mov             p3,#0dfh
0DDD E5B0           2332                                     mov             a,p3
0DDF 30E65F         2333                                jnb          acc.6,knvich
0DE2 020000   F     2334                                     jmp             izmpaT
                    2335     
0DE5 3006B9         2336     outviR: jnb             bitvi11,gout6   
0DE8 C214           2337                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0DEA C206           2338                                     clr             bitvi11
                    2339                                     
0DEC 020000   F     2340     goklb:          jmp             out6
                    2341     
0DEF 200A12         2342     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0DF2 D20A           2343                                     setb    bitbon  ;уст реж буфер вкл
0DF4 79D5           2344                                     mov                     r1,#volume;work         ;обьем блок
                             а
0DF6 7700           2345                                     mov                     @r1,#00
0DF8 09             2346                                     inc                     r1
0DF9 77C7           2347                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0DFB 434B02         2348                                     orl             bufind+11,#02h; on pysk
0DFE 120000   F     2349                                     call            ind
0E01 020000   F     2350                                     jmp             izmpaT
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    38

0E04 C20A           2351     bufon:                  clr             bitbon  ;уст реж буфер выкл
0E06 534BFD         2352                                             anl             bufind+11,#0fdh; off pysk
0E09 120000   F     2353                                             call    ind
0E0C 020000   F     2354                                     jmp             izmpaT
                    2355     
0E0F 79B0           2356     tizmri:                 mov             r1,#level
0E11 B70102         2357                                     cjne    @r1,#1,right2
                    2358                                     ;10s->HET
0E14 8004           2359                                     jmp             right3
                    2360     
0E16 07             2361     right2:                 inc             @r1
0E17 120000   F     2362                                     call    lolevT
                    2363                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0E1A 120000   F     2364     right3:                 call    ind
0E1D 020000   F     2365                                     jmp             izmfun
                    2366     
                    2367                             
                    2368                             
0E20                2369     knright:        
                    2370     
0E20 79AE           2371                                     mov             r1,#diap
                    2372                             ;перекл диапазон 1 поз вверх сбр массив
0E22 17             2373                                     dec             @r1
0E23 B7FF04         2374                                     cjne    @r1,#0ffh,diinc
0E26 7700           2375                                     mov             @r1,#0
0E28 807A           2376                                     jmp  izmfun
0E2A 120000   F     2377     diinc:                  call     clmassix
0E2D 78B3           2378                                     mov             r0,#summa
0E2F 120000   F     2379                                     call    clear4
0E32 786A           2380                                     mov             r0,#rez_A0
0E34 120000   F     2381                                     call    clear4
0E37 C20F           2382                                     clr             bitnul          ;гасить светодиод НУЛЬ  
0E39 120000   F     2383                                     call    loadUS
0E3C 8066           2384                                      jmp  izmfun
                    2385     
0E3E 020000   F     2386     vit2_10:                jmp             out6
0E41                2387     knvich:                 ;12.02.07
0E41 789A           2388                                             mov                     r0,#parT
0E43 C3             2389                                             clr                     c
0E44 7404           2390                                             mov                     a,#4 
0E46 96             2391                                             subb            a,@r0
0E47 40F5           2392                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0E49 2015F2         2393                                             jb                      biteizm,vit2_10;не нажимать
                              кнопку ВЫЧ во время теста
0E4C 200613         2394                               jb            bitvi11,onvich
0E4F C204           2395                                     clr             bitizm
0E51 D214           2396                                     setb    bitvich
                    2397                                     
0E53 78B1           2398                                     mov             r0,#vichR
0E55 7611           2399                                     mov             @r0,#11h;;????????or 0
                    2400                                     ;ВЫЧИСЛИТЬ
0E57 900000   F     2401                                     mov     dptr,#teVICH
0E5A 120000   F     2402                                     call    lotext
0E5D 120000   F     2403                                call         z_1s;;;;;;;
0E60 8073           2404                                     jmp              viout;izmpaT
                    2405     
0E62 C214           2406     onvich:                 clr             bitvich
                    2407                                                     ;;;;;;;;28.02
0E64 C206           2408                                                     clr             bitvi11
0E66 D204           2409                                                     setb            bitizm
                    2410                                                     ;;;;;;;;;
0E68 78B1           2411                                     mov             r0,#vichR
0E6A 7600           2412                                     mov             @r0,#0
0E6C 803A           2413                                     jmp              izmpaT
                    2414     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    39

0E6E 301820         2415     louizm:            jnb          knizm,lou
0E71 79AE           2416                                     mov             r1,#diap
0E73 C3             2417                                     clr             c
0E74 7403           2418                                     mov             a,#3
0E76 97             2419                                     subb    a,@r1
0E77 5006           2420                                     jnc             lldi23    ;10-2..10-5
                    2421                                     ;10-6..10-11
0E79 E584           2422                                     mov             a,p4
0E7B 54F7           2423                                     anl             a,#0f7h   ;d3
0E7D F584           2424                                     mov             p4,a
0E7F E7             2425     lldi23:                 mov             a,@r1
0E80 6403           2426                                     xrl             a,#3
0E82 7002           2427                                     jnz             lldi3
0E84 8005           2428                                     jmp             lldi2   ;10-5
0E86 E7             2429     lldi3:                  mov             a,@r1
0E87 6402           2430                                     xrl             a,#2            ;
0E89 7006           2431                                     jnz             lou             
0E8B E585           2432     lldi2:                  mov             a,p5            ;10-4
0E8D 4408           2433                                     orl             a,#08
0E8F F585           2434                                     mov             p5,a
0E91 22             2435     lou:                    ret
                    2436                               ;;;;;;
0E92 201511         2437     izman:  jb              biteizm,ontest  
0E95 201807         2438                                     jb              knizm,knizmon
0E98 D218           2439                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2440                             ;       d3(k5 p4),d3(u5 p5)заслать us
0E9A 120000   F     2441                                     call    louizm 
0E9D 8005           2442                                     jmp             izmfun
0E9F C218           2443     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0EA1 120000   F     2444                                     call    loadUS;восстановить us
0EA4                2445     izmfun:                 
0EA4 D207           2446                                     setb    bitzus;bitbuf
0EA6 8000           2447     ontest: jmp             labelE;;;;;;;;;;;;
                    2448                                     ;;;;;;;;;;;;;;
0EA8                2449     izmpaT:
                    2450     ;;;;;;;;;;;;;;;;;
                    2451                     ;       clr             c 
                    2452                     ;       mov             r1,#parN
                    2453     
                    2454                     ;       mov             r0,#diap
                    2455                     ;       mov             a,#6            
                    2456                     ;       subb    a,@r0
                    2457                     ;       jnc             labelE          ;         ;10-2..10-8
                    2458                               
                    2459                     ;       mov             @r1,#2          ;10-9..10-11            
                    2460                     ;       jmp             labelE
                    2461     
                    2462     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0EA8 789A           2463     labelE:                 mov             r0,#parT
0EAA 793D           2464                                     mov             r1,#chkl
0EAC B60108         2465                                     cjne    @r0,#1,izmt2
0EAF 7700           2466                                     mov             @r1,#0
0EB1 09             2467                                     inc             r1
0EB2 7701           2468                                     mov             @r1,#1;2
0EB4 020000   F     2469                                     jmp             out6
0EB7 B60208         2470     izmt2:                  cjne    @r0,#2,izmt3
0EBA 7700           2471                                     mov             @r1,#0
0EBC 09             2472                                     inc             r1
0EBD 7702           2473                                     mov             @r1,#2;10;20
0EBF 020000   F     2474                                     jmp             out6
                    2475     
0EC2 7700           2476     izmt3:                  mov             @r1,#0
0EC4 09             2477                                     inc             r1
0EC5 770A           2478                                     mov             @r1,#10;20;0
0EC7 020000   F     2479                                     jmp             out6
                    2480     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    40

                    2481     
                    2482     
                    2483     
0ECA                2484     knopt: ;кнопка T
0ECA C204           2485                                clr          bitizm
0ECC D210           2486                                setb         bitt2
0ECE 79B7           2487                                mov          r1,#load
0ED0 7704           2488                                mov          @r1,#4;1s
0ED2 120000   F     2489                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2490                     
0ED5 793D           2491     viout:          mov             r1,#chkl
0ED7 7703           2492                             mov             @r1,#03
0ED9 09             2493                             inc             r1
0EDA 77E8           2494                             mov             @r1,#0e8h               ;1000
0EDC 020000   F     2495                             jmp             out6
                    2496     
0EDF                2497     knrazr:          
0EDF C3             2498     labelC:          clr            c
0EE0 78AF           2499                             mov             r0,#parN
0EE2 799A           2500                             mov             r1,#parT
0EE4 7402           2501                             mov             a,#2
0EE6 97             2502                             subb    a,@r1
0EE7 40BF           2503                             jc              labelE          ;T>2
0EE9 B60104         2504                             cjne    @r0,#1,noN1c
0EEC 7602           2505                             mov             @r0,#2          ;N=2
0EEE 80B8           2506                             jmp             labelE
                    2507     
0EF0 B60204         2508     noN1c:          cjne    @r0,#2,not_1
0EF3 7603           2509                             mov             @r0,#3          ;N=3      ;10-2..10-8
0EF5 80B1           2510                             jmp             labelE
                    2511     
0EF7                2512     not_10: 
0EF7 7601           2513     not_1:          mov             @r0,#1                          ;N=1
0EF9 80AD           2514                             jmp     labelE
                    2515     
0EFB 020000   F     2516     rtizmri:        jmp             tizmri
                    2517     
0EFE 75B0F7         2518     ttout:          mov             p3,#0f7h
0F01 20B6D1         2519                                             jb              p3.6,viout
0F04 D204           2520                                             setb    bitizm;отжатие кнопки t
0F06 C210           2521                                             clr             bitt2
0F08 809E           2522                                             jmp             labelE
0F0A                2523     labelf:                 
0F0A 301035         2524                             jnb             bitt2,nofizm
0F0D 75B0FB         2525                        mov          p3,#0fbh
0F10 E5B0           2526                        mov          a,p3
0F12 20E6E9         2527                        jb           acc.6,ttout;outF
0F15 79B7           2528                        mov          r1,#load;parT
0F17 B70502         2529                        cjne         @r1,#5,noft1
                    2530                        ;t=10s
0F1A 80B9           2531                        jmp          viout;out6;ft1izm
                    2532     
0F1C 07             2533     noft1:     inc          @r1;dec         @r1
0F1D 120000   F     2534     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2535                             ;call   ind
0F20 80B3           2536                     jmp             viout;out6;??????????????/
                    2537     
                    2538                             ;увеличить счетчик задержки клавиатуры
0F22 783D           2539     outF:           mov             r0,#chkl
0F24 7627           2540                             mov             @r0,#27h
0F26 08             2541                             inc             r0
0F27 7610           2542                             mov             @r0,#10h
0F29 020000   F     2543                             jmp             out6;out7
                    2544     
0F2C 020000   F     2545     noviR1:         jmp             noviR
0F2F 78B1           2546     outvich:        mov                     r0,#vichR
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    41

0F31 7600           2547                                             mov                     @r0,#0
0F33 C214           2548                                             clr                     bitvich
0F35 C206           2549                                             clr                     bitvi11
0F37 C211           2550                                             clr                     bitmenu
0F39 D204           2551                                             setb            bitizm
0F3B 78B2           2552                                             mov                     r0,#marker
0F3D 76FF           2553                                             mov                     @r0,#0ffh
0F3F 020000   F     2554                                             jmp                     labelE;out6     
                    2555     
0F42 3014E7         2556     nofizm:         jnb             bitvich,noviR1
0F45 75B0DF         2557                                                     mov             p3,#0dfh
0F48 30B6E4         2558                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0F4B 78B1           2559                             mov             r0,#vichR
0F4D B61111         2560                             cjne    @r0,#11h,no11v6
0F50 75B0FB         2561                             mov                     p3,#0fbh;->
0F53 20B61C         2562                             jb                      p3.6,rviout;outF
0F56 7612           2563                             mov             @r0,#12h                ;11= вычислить
0F58 900000   F     2564     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0F5B 120000   F     2565                             call    lotext
0F5E 020000   F     2566                             jmp             viout;outF
                    2567             
0F61 B61211         2568     no11v6:         cjne    @r0,#12h,no12v6
0F64 75B0FB         2569                             mov             p3,#0fbh;->
0F67 20B608         2570                             jb              p3.6,rviout;outF
0F6A 7611           2571                             mov             @r0,#11h;13h
0F6C 900000   F     2572                             mov             dptr,#teVICH;teOUT
0F6F 120000   F     2573                             call    lotext
0F72                2574     rviout:
0F72 020000   F     2575                             jmp             viout;outF
                    2576                     
0F75 B61311         2577     no12v6:         cjne    @r0,#13h,no13v6
0F78 75B0FB         2578                                                     mov             p3,#0fbh;->
0F7B 20B6F4         2579                             jb              p3.6,rviout;outF
0F7E 7611           2580                             mov             @r0,#11h
0F80 900000   F     2581                             mov             dptr,#teVICH
0F83 120000   F     2582                             call    lotext
0F86 020000   F     2583                             jmp             viout;outF
                    2584     
                    2585     ;кн -> A= 0000
                    2586     ;кн -> B= +00000
0F89 75B0FB         2587     no13v6:         mov             p3,#0fbh
0F8C E5B0           2588                             mov             a,p3
0F8E 20E635         2589                             jb              acc.6,chanZ
0F91 E53B           2590                             mov             a,movrig
0F93 B40714         2591                             cjne    a,#7,kon_B      
0F96 78B2           2592                             mov             r0,#marker      ;A= 0000
0F98 B60716         2593                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0F9B E53A           2594     rikn:           mov             a,movleft
0F9D F6             2595                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2596     ;                               29.12.06
                    2597     ;;;;;;;;;;;;;;;;;;
                    2598     ;необходимо не портить цифру в следуюем справа знакоместе
                    2599     ;т е сохранить ее в ячейке для мигания в противном случае
                    2600     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2601     ;       знакоместа
0F9E 78B2           2602                                     mov             r0,#marker
0FA0 7440           2603                                     mov             a,#bufind
0FA2 26             2604                                             add             a,@r0                   ;a=bufind+m
                             arker
0FA3 F9             2605                                             mov             r1,a
0FA4 09             2606                                             inc             r1
0FA5 873C           2607                                             mov             savba,@r1
0FA7 020000   F     2608                                             jmp             viout;outF
                    2609     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    42

0FAA 78B2           2610     kon_B:          mov             r0,#marker      ;B= +00000
0FAC B60802         2611                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0FAF 80EA           2612                                             jmp             rikn
0FB1                2613     mark0_8:
                    2614     ;                               29.12.06
                    2615     ;;;;;;;;;;;;;;;;;;
                    2616     ;необходимо не портить цифру в следуюем справа знакоместе
                    2617     ;т е сохранить ее в ячейке для мигания в противном случае
                    2618     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2619     ;       знакоместа ->B=+00000
0FB1 78B2           2620                                             mov             r0,#marker
0FB3 7440           2621                                     mov             a,#bufind
0FB5 26             2622                                             add             a,@r0                   ;a=bufind+m
                             arker
0FB6 F9             2623                                             mov             r1,a
0FB7 09             2624                                             inc             r1
0FB8 873C           2625                                             mov             savba,@r1
0FBA 78B2           2626                             mov             r0,#marker
0FBC 06             2627                             inc             @r0             ;       сдвинуть курсор вправо на 1
0FBD C219           2628                             clr             bitmig
0FBF B60901         2629                             cjne    @r0,#9,outma
0FC2 18             2630                             dec             r0;ppp
0FC3 020000   F     2631     outma:          jmp             viout;outF
                    2632     
0FC6 75B0FE         2633     chanZ:          mov             p3,#0feh
0FC9 E5B0           2634                             mov             a,p3
0FCB 20E611         2635                             jb              acc.6,chanma
                    2636                             ;изм знак в старшем разряде на противоположн
0FCE E543           2637                             mov             a,bufind+3
0FD0 B42B06         2638                             cjne            a,#2bh,noplus
0FD3 75432D         2639                             mov                     bufind+3,#2dh           ;+->-   
0FD6 020000   F     2640                             jmp                     viout;outF
0FD9                2641     noplus:
0FD9 75432B         2642                             mov                     bufind+3,#2bh           ;-/+-
0FDC 020000   F     2643                             jmp                     viout;outF
0FDF 75B0FD         2644     chanma:         mov             p3,#0fdh
0FE2 E5B0           2645                             mov             a,p3
0FE4 20E603         2646                             jb              acc.6,outFl;labelL1
                    2647                             ;clr            bitmig
0FE7 120000   F     2648     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2649     
0FEA 793D           2650     outFl:                          mov             r1,#chkl
0FEC 7701           2651                             mov             @r1,#01
0FEE 09             2652                             inc             r1
0FEF 77F4           2653                             mov             @r1,#0f4h               ;1000
0FF1 020000   F     2654                             jmp             out6
                    2655                     
                    2656     
                    2657     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2658     
                    2659     
                    2660     
0FF4 020000   F     2661     rlabelL:        jmp                     labelL
0FF7 020000   F     2662     rfindmem:               jmp             findmem
0FFA 3011FA         2663     noviR:          jnb                     bitmenu,rfindmem;17.01.07
                    2664     ;;;;;;;;;;;;;
0FFD 78B1           2665                                             mov                     r0,#vichR
0FFF 7415           2666                                             mov                     a,#15h
1001 C3             2667                                             clr                     c
1002 96             2668                                             subb            a,@r0
1003 4016           2669                                             jc                      ri21_23
                    2670     
1005 75B0FB         2671                                             mov             p3,#0fbh; реж кн меню ->
1008 20B60A         2672                                             jb              p3.6,ri6
100B 78B1           2673                                             mov             r0,#vichR
100D B61508         2674                                             cjne    @r0,#15h,norime
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    43

1010 7611           2675                                             mov             @r0,#11h
1012 120000   F     2676     norime1:        call            lomenu
1015 020000   F     2677     ri6:                    jmp                     viout;out6
1018 06             2678     norime:         inc             @r0
1019 80F7           2679                                             jmp             norime1
                    2680             
101B 7423           2681     ri21_23:        mov                     a,#23h          ;->
101D C3             2682                                             clr                     c
101E 96             2683                                             subb            a,@r0
101F 4014           2684                                             jc                      ri_31
1021 75B0FB         2685                                             mov                     p3,#0fbh
1024 20B6EE         2686                                             jb                      p3.6,ri6
1027 B62308         2687                                             cjne            @r0,#23h,no23ri
102A 7621           2688                                             mov                     @r0,#21h
102C 120000   F     2689                                             call            lomenu
102F 020000   F     2690                                             jmp                     viout;out6
1032 06             2691     no23ri:         inc                     @r0
1033 80DD           2692                                             jmp                     norime1
1035 B6312B         2693     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2694     
                    2695     ;;
1038 75B0FB         2696                                             mov                     p3,#0fbh
103B 20B6D7         2697                                             jb                      p3.6,ri6
                    2698     ;;
103E 301311         2699                                             jnb                     bitv19,gosk19
1041 900000   F     2700                                             mov                     dptr,#teS57_6;57,6
1044 120000   F     2701                                             call            lotext
1047 534B03         2702                                             anl                     bufind+11,#03h
104A 434B80         2703                                             orl                     bufind+11,#80h
104D C213           2704                                             clr                     bitv19
104F 020000   F     2705                                             jmp                     viout;out6
1052 900000   F     2706     gosk19:         mov                     dptr,#teS19_2
1055 120000   F     2707                                             call            lotext
1058 534B03         2708                                             anl                     bufind+11,#03h
105B 434B80         2709                                             orl                     bufind+11,#80h
105E D213           2710                                             setb            bitv19
1060 020000   F     2711                                             jmp                     viout;out6
                    2712     
                    2713     
                    2714     
                    2715     ;labelS2:       jmp                     out6
                    2716     
1063 7452           2717     no31ri:         mov                     a,#52h;42h              ;->
1065 C3             2718                                             clr                     c
1066 96             2719                                             subb            a,@r0
1067 40AC           2720                                             jc                      ri6
1069 75B0FB         2721                                             mov                     p3,#0fbh                   
                                  ;41,42
106C 30B609         2722                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
106F 75B0FD         2723                                             mov                     p3,#0fdh
1072 20B6A0         2724                                             jb                      p3.6,ri6
1075 020000   F     2725                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
1078 020000   F     2726     rlabelN:                jmp             labelN
107B 020000   F     2727     moutF:          jmp             viout;outF
                    2728     ;;;;;;;;;;;;;;;;;;;;;;;;;
107E 020000   F     2729     rnnmemb:        jmp             nnmemb
                    2730     
1081                2731     nbimenu:
1081 300BFA         2732     findmem:        jnb             bitmem,rnnmemb
1084 79B0           2733                                             mov             r1,#level                          
                                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
1086 B71113         2734                                     cjne            @r1,#11h,nomem11
                    2735                                             
1089 75B0FB         2736                        mov          p3,#0fbh
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    44

108C E5B0           2737                        mov          a,p3
108E 20E6EA         2738                        jb           acc.6,moutF
1091 7712           2739                        mov          @r1,#12h
1093 900000   F     2740                        mov          dptr,#teWR      ;                       ЗАПИСЬ
1096 120000   F     2741                        call         lotext
1099 020000   F     2742                        jmp          viout;outF
                    2743     
109C B71213         2744     nomem11:   cjne         @r1,#12h,nomem12
109F 75B0FB         2745                             mov             p3,#0fbh
10A2 E5B0           2746                        mov          a,p3
10A4 20E6D4         2747                        jb           acc.6,moutF
10A7 7713           2748                        mov          @r1,#13h
10A9 900000   F     2749                        mov          dptr,#teLIST            ;ПРОСМОТР
10AC 120000   F     2750                        call         lotext
10AF 020000   F     2751                        jmp          viout;outF
10B2 B71313         2752     nomem12:         cjne           @r1,#13h,nomem13
10B5 75B0FB         2753                                             mov             p3,#0fbh
10B8 E5B0           2754                        mov          a,p3
10BA 20E6BE         2755                        jb           acc.6,moutF
10BD 7714           2756                        mov          @r1,#14h
10BF 900000   F     2757                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
10C2 120000   F     2758                        call         lotext
10C5 020000   F     2759                          jmp                viout;outF
                    2760                             
10C8 B71413         2761     nomem13:cjne            @r1,#14h,labelL
10CB 75B0FB         2762                             mov             p3,#0fbh
10CE E5B0           2763                        mov          a,p3
10D0 20E6A8         2764                        jb           acc.6,moutF
10D3 7711           2765                        mov          @r1,#11h
10D5 900000   F     2766                        mov          dptr,#teCLE                     ;ОЧИСТКА
10D8 120000   F     2767                        call         lotext
10DB 020000   F     2768                          jmp                viout;outF
10DE                2769     labelL: 
                    2770                             ;;;;;
10DE 75B0DF         2771                                             mov                     p3,#0dfh
10E1 30B697         2772                                     jnb                     p3.6,moutF;в реж очистка полная не 
                             отрабатывать ВЫЧ R
                    2773                     
                    2774                             ;;;;;
                    2775                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
10E4 78B0           2776                                     mov                     r0,#level
10E6 B6210E         2777                                     cjne            @r0,#21h,nobl21
10E9 7622           2778                                     mov                     @r0,#22h                ;->БЛОК 
10EB 900000   F     2779                                     mov                     dptr,#teBL
10EE 120000   F     2780     me21_22:call            lotext
                    2781                             
10F1 120000   F     2782                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
10F4 020000   F     2783                                     jmp                     viout;outF
                    2784     
10F7 B62207         2785     nobl21: cjne            @r0,#22h,nobl22
10FA 900000   F     2786                                     mov                     dptr,#teFULL
10FD 7621           2787                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2788     
10FF 80ED           2789                                     jmp                     me21_22
                    2790     
                    2791     ;labl21:           cjne @r0,#21h,nolev1
                    2792     ;                       mov             p3,#0fbh
                    2793     ;                       mov             a,p3
                    2794     ;                       jb              acc.6,loutF
                    2795     ;                       cjne    @r0,#21h,labl22
                    2796     ;                       mov             @r0,#22h
                    2797                             ;БЛОК
                    2798     ;                       call    lotext
                    2799     ;                       jmp             outF
                    2800     ;labl22:                mov             @r0,#21h
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    45

                    2801                             ;ПОЛНАЯ
                    2802     ;                       call    lotext
                    2803     ;                       jmp             outF
                    2804                      
1101 B62325         2805     nobl22:         cjne    @r0,#23h,go31l
1104 75B0FB         2806     rigblo:         mov             p3,#0fbh
1107 20B629         2807                                             jb              p3.6,llev2
110A                2808     labL2:    ;  уст курсор в правую позицию 
                    2809                                     ;       кнопка                  ->
                    2810     ;;;;;;;;;;;;;;;;;;
                    2811     ;необходимо не портить цифру в следуюем справа знакоместе
                    2812     ;т е сохранить ее в ячейке для мигания в противном случае
                    2813     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2814     ;       знакоместа
110A 78B2           2815                                             mov             r0,#marker
110C 7440           2816                                     mov             a,#bufind
110E 26             2817                                             add             a,@r0                   ;a=bufind+m
                             arker
110F F9             2818                                             mov             r1,a
1110 09             2819                                             inc             r1
1111 873C           2820                                             mov             savba,@r1
1113 C219           2821                                             clr             bitmig
                    2822     ;;;;;;;;;;;;;;;;
1115 78B2           2823                       mov           r0,#marker      ;курсор справа  ?
1117 E53B           2824                             mov             a,movrig
1119 C3             2825                             clr             c
111A 96             2826                             subb    a,@r0
111B 6006           2827                             jz         equ1l
111D E53B           2828                             mov             a,movrig;уст в правую позицию
111F F6             2829                             mov             @r0,a
1120 020000   F     2830                             jmp             viout;outF                                       
1123 E53A           2831     equ1l:          mov             a,movleft;уст в левую позицию
1125 F6             2832                             mov             @r0,a   
1126 020000   F     2833     loutF:  jmp             viout;outF
                    2834                     
                    2835     
1129 B63102         2836     go31l:          cjne    @r0,#31h,go41l
112C 80D6           2837                             jmp             rigblo
112E B6410B         2838     go41l:          cjne    @r0,#41h,norig2
1131 80D1           2839                             jmp             rigblo
                    2840     
1133 75B0FD         2841     llev2:          mov             p3,#0fdh
1136 20B6ED         2842                             jb              p3.6,loutF
1139 020000   F     2843                             jmp             labelL1
                    2844     
                    2845     ;->
113C C3             2846     norig2:    clr          c               ;32,33,34,42
113D 7431           2847                             mov             a,#31h
113F 96             2848                             subb    a,@r0
1140 50E4           2849                             jnc             loutF
1142 75B0FB         2850     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1145 20B630         2851                             jb              p3.6,lev2go
1148 B64302         2852     labelN:         cjne            @r0,#43h,labN_2
114B 80D9           2853                                             jmp                     loutF
114D B64402         2854     labN_2:         cjne            @r0,#44h,labN_1 
1150 80D4           2855                                             jmp                     loutF                      
                                  
                    2856                             ;                               29.12.06
                    2857     ;;;;;;;;;;;;;;;;;;
                    2858     ;необходимо не портить цифру в следуюем справа знакоместе
                    2859     ;т е сохранить ее в ячейке для мигания в противном случае
                    2860     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2861     ;       знакоместа
1152 78B2           2862     labN_1:         mov             r0,#marker
1154 7440           2863                                     mov             a,#bufind
1156 26             2864                                             add             a,@r0                   ;a=bufind+m
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    46

                             arker
1157 F9             2865                                             mov             r1,a
1158 09             2866                                             inc             r1
1159 873C           2867                                             mov             savba,@r1
                    2868     ;;;;;;;;;;;;;;;;;;;
115B 78B2           2869                             mov             r0,#marker      ;курсор справа  ?
115D E53B           2870                             mov             a,movrig
115F C3             2871                             clr             c
1160 96             2872                             subb    a,@r0
1161 7006           2873                             jnz        noequ1
1163 E53A           2874                             mov             a,movleft;уст в крайнюю левую позицию
1165 F6             2875                             mov             @r0,a
1166 020000   F     2876                             jmp             viout;outF
1169                2877     noequ1: ;29.12.06
                    2878     ;;;;;;;;;;;;;;;;;;
                    2879                             ;восстан знакоместо при мигании
                    2880                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1169 78B2           2881                                     mov             r0,#marker
116B 7440           2882                                     mov             a,#bufind
116D 26             2883                                     add             a,@r0                   ;a=bufind+marker
116E F9             2884                                     mov             r1,a
                    2885                                     ;mov            @r1,savba
116F 09             2886                                     inc             r1
1170 873C           2887                                     mov             savba,@r1
                    2888     ;;;;;;;;;;;;;;;;        
1172 120000   F     2889                             call    marri;уст сдвиг в правую        позицию
1175 020000   F     2890                             jmp             viout;outF
1178 75B0FD         2891     lev2go:         mov             p3,#0fdh
117B 30B603         2892                             jnb             p3.6,rlabelL1
117E 020000   F     2893                             jmp             viout;outF
                    2894     
1181 020000   F     2895     rlabelL1:       jmp             labelL1
                    2896     
1184                2897     nnmemb:
                    2898                                     
                    2899     
                    2900     
1184                2901     norim6:    ;kn menu
1184 D083           2902     out6:           pop             dph
1186 D082           2903                                     pop             dpl
1188 D007           2904                                     pop             rr7     
118A D006           2905                                     pop             rr6
118C D005           2906                                     pop             rr5
118E D004           2907                                     pop             rr4
1190 D003           2908                                     pop             rr3
1192 D002           2909                                     pop             rr2
1194 D001           2910                                     pop             rr1                             
1196 D000           2911                                     pop             rr0
1198 D0D0           2912                                     pop             psw
119A D0E0           2913                                     pop             acc
                    2914     ;clr            bitmig
                    2915                               ; mov         EIE2,#30H
                    2916                              ;  mov         a,P3IF
                    2917                             ;       anl             a,#0bfh
                    2918                             ;       mov             P3IF,a
                    2919                             ;       mov             P3,#0c0h
                    2920                             ;;;;;;
119C                2921     kkout6:
119C 75AD00         2922                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
119F 75B0C0         2923                             mov             P3,#0c0h
11A2 C219           2924                             clr             bitmig
11A4 E586           2925                                             mov             a,P6            ;p6.4=0
11A6 54EF           2926                             anl             a,#0efh
11A8 F586           2927                             mov             P6,a
11AA 00             2928                             nop
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    47

11AB 00             2929                             nop
                    2930                                     
11AC E586           2931                             mov             a,P6                    ;p6.4=1 
11AE 4410           2932                             orl             a,#10h
11B0 F586           2933                             mov             P6,a    
                    2934                             ;;;;;;;;;
11B2 E5DA           2935                             mov             a,PCA0CPM0;     
11B4 4446           2936                             orl             a,#46h;anl              a,#0fbh
11B6 F5DA           2937                             mov             PCA0CPM0,a
                    2938     
11B8 75CDD0         2939                             mov             TH2,#0d0h
11BB 75CC00         2940                             mov             TL2,#00
                    2941     
11BE D2CA           2942                             setb            T2CON.2
11C0 D2AD           2943                             setb            ET2;IE.5
                    2944                             ;;;;;;;;                    
11C2 32             2945                             reti
                    2946     
                    2947     
11C3 020000   F     2948     knKMP:             jmp          out7
11C6 020000   F     2949     rout7:                  jmp             out7    
11C9 020000   F     2950     rlabelH:                jmp             labelH
11CC 020000   F     2951     rknNUL:         jmp             knNUL
11CF 020000   F     2952     rknleft:                jmp             knleft
                    2953     
11D2 75AD00         2954     no0chk:         mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
11D5 75B0C0         2955                                             mov             P3,#0c0h
11D8 32             2956                                             reti
                    2957     
11D9 020000   F     2958     rknMEM:                 jmp             knMEM
                    2959     
11DC                2960     keyb2:  ;IE7
                    2961     ;;;;;
                    2962                     ;       mov                     a,chkl          ;low
                    2963                     ;       jb                      acc.7,no0chk;
                    2964                             ;jnz                    no0chk
                    2965                             ;mov                    a,chkl                          ;high
                    2966                             ;jnz                    no0chk
                    2967     ;;;;
11DC 75E700         2968                                     mov             EIE2,#00H
11DF 75AD00         2969                                     mov             P3IF,#00
                    2970     
11E2 C0E0           2971                                     push    acc
11E4 C0D0           2972                                     push    psw
11E6 C000           2973                                     push    rr0
11E8 C001           2974                                     push    rr1
11EA C002           2975                                     push    rr2
11EC C003           2976                                     push    rr3
11EE C004           2977                                     push    rr4
11F0 C005           2978                                     push    rr5
11F2 C006           2979                                     push    rr6
11F4 C007           2980                                     push    rr7
11F6 C082           2981                                     push    dpl
11F8 C083           2982                                     push    dph
                    2983                                     ;clr            bitmig
                    2984                       ;;;;;;;;;;;;;;
11FA 120000   F     2985                               call  z_01s   ;0,1s
                    2986                               ;восстан знакоместо при мигании
                    2987                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
11FD 78B2           2988                                     mov             r0,#marker
11FF 7440           2989                                     mov             a,#bufind
1201 26             2990                                     add             a,@r0                   ;a=bufind+marker
1202 F9             2991                                     mov             r1,a
1203 A73C           2992                                     mov             @r1,savba
                    2993                                     ;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    48

                    2994     
1205 E5B0           2995                             mov             a,p3
1207 20E7BC         2996                                     jb              acc.7,rout7
120A E5B0           2997                                     mov             a,p3
120C 74FF           2998                                     mov             a,#0ffh         ; p3.(5-0)<-3f
120E F5B0           2999                                     mov             p3,a
1210 E5B0           3000                                     mov             a,p3
1212 30E7B1         3001                                     jnb             acc.7,rout7             ;error
1215 3004B1         3002                                     jnb             bitizm,rlabelH
1218 75B0FE         3003                                     mov             p3,#0feh                ;реж IZM
121B E5B0           3004                                     mov             a,p3
121D 30E7AC         3005                                     jnb             acc.7,rknNUL
1220 75B0FD         3006                                     mov             p3,#0fdh
1223 E5B0           3007                                     mov             a,p3
1225 30E79B         3008                                     jnb             acc.7,knKMP
1228 75B0FB         3009                                     mov             p3,#0fbh
122B E5B0           3010                                     mov             a,p3
122D 30E79F         3011                                     jnb             acc.7,rknleft
1230 75B0F7         3012                                     mov             p3,#0f7h
1233 00             3013                                     nop
1234 00             3014                                     nop
1235 00             3015                                     nop
1236 00             3016                                     nop
1237 E5B0           3017                                     mov             a,p3
1239 30E76F         3018                                     jnb             acc.7,knAVP
123C 75B0EF         3019                                 mov         p3,#0efh
123F E5B0           3020                                     mov             a,p3
1241 30E795         3021                                     jnb             acc.7,rknMEM
1244 75B0DF         3022                                     mov             p3,#0dfh
1247 E5B0           3023                                     mov             a,p3    
1249 30E722         3024                                     jnb             acc.7,knmenu
124C                3025     an_t7:             ;;;;;;;;;;;;
                    3026                     
                    3027     ;       clr             c
                    3028     ;       mov             r1,#parN
                    3029     ;
                    3030     ;                       mov             r0,#diap
                    3031     ;                       mov             a,#6            
                    3032     ;                       subb    a,@r0
                    3033     ;                       jnc             goto7           ;         ;10-2..10-8
                    3034                               
                    3035     ;                       mov             @r1,#2          ;10-9..10-11            
                    3036                             
                    3037                             ;;;;;;;;;;;;
124C 799A           3038     goto7:                  mov             r1,#parT
124E 783D           3039                                     mov             r0,#chkl
1250 B70108         3040                                     cjne    @r1,#1,not1_7
1253 7600           3041                                     mov             @r0,#00
1255 08             3042                                     inc             r0
1256 7601           3043                                     mov             @r0,#1;2
1258 020000   F     3044                                     jmp             out7
                    3045                             
                    3046     
125B B70208         3047     not1_7:                 cjne    @r1,#2,not2_7
125E 7600           3048                                             mov             @r0,#00
1260 08             3049                                     inc             r0
1261 7602           3050                                     mov             @r0,#2;10;20
1263 020000   F     3051                                     jmp             out7
1266 7600           3052     not2_7:                 mov             @r0,#00
1268 08             3053                                     inc             r0
1269 760A           3054                                     mov             @r0,#10;20;0
126B 020000   F     3055     merr:           jmp             out7
                    3056     
                    3057     
126E 2006FA         3058     knmenu: jb              bitvi11,merr
1271 20151C         3059                                     jb              biteizm,menuoff
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    49

                    3060                                     ;;;;;
1274 201225         3061                                     jb              bitklb,klboff
1277 C204           3062                              clr            bitizm          ;off IZM
1279 D211           3063                                     setb            bitmenu
127B C217           3064                                     clr             bitoll
127D 900000   F     3065                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1280 120000   F     3066                                     call    lotext
1283 534B03         3067                                     anl                     bufind+11,#03h ;погасить запятые
1286 120000   F     3068                                     call            ind
1289 78B1           3069                                     mov             r0,#vichR
128B 7611           3070                                     mov             @r0,#11h
128D 020000   F     3071                                     jmp             onmem11
1290                3072     menuoff:
1290 78B1           3073                                     mov             r0,#vichR
1292 7600           3074                                     mov             @r0,#00
1294 C215           3075                                     clr             biteizm
1296 120000   F     3076                                     call    loadus
1299 020000   F     3077                                     jmp             out7
                    3078     
129C C212           3079     klboff:                 clr             bitklb
129E 120000   F     3080                                                     call            loadUS
12A1 78B1           3081                                                     mov             r0,#vichR
12A3 7600           3082                                                     mov             @r0,#00
12A5 020000   F     3083                                                     jmp             out7
                    3084     
12A8 020000   F     3085     rendkalib:              jmp             endkalib
                    3086     
12AB 2012FA         3087     knAVP:  jb              bitklb,rendkalib        
12AE 200504         3088                                     jb              bitavp,meavp
12B1 D205           3089                                     setb    bitavp
12B3 8097           3090                                     jmp             an_t7;onmem11
12B5 C205           3091     meavp:                  clr             bitavp
12B7 8093           3092                                     jmp             an_t7;onmem11
                    3093     
12B9 201207         3094     knleft: jb              bitklb,lefkl
                    3095                                     ;;;;;;;;
12BC 79AE           3096                                mov          r1,#diap
12BE 07             3097                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
12BF B70A03         3098                                     cjne    @r1,#0ah,nodi6
12C2 17             3099                                     dec             @r1
12C3 8087           3100     lefkl:  jmp             an_t7
                    3101     
12C5                3102     nodi6:             ;    cjne    @r1,#0,an_t7
12C5 120000   F     3103                                      call    clmassix
12C8 78B3           3104                                     mov             r0,#summa
12CA 120000   F     3105                                     call    clear4  
12CD 786A           3106                                     mov             r0,#rez_A0
12CF 120000   F     3107                                     call    clear4
12D2 C20F           3108                                     clr             bitnul          ;гасить светодиод НУЛЬ  
12D4 120000   F     3109                                     call    loadUS
12D7 020000   F     3110                                jmp          an_t7
                    3111     
12DA 200F0F         3112     knNUL:                  jb              bitnul,ybnul
12DD D20F           3113                                     setb    bitnul
12DF 789C           3114                                     mov             r0,#rez_A3      ;A3
12E1 120000   F     3115                                     call    resar2
12E4 786A           3116                                     mov             r0,#rez_A0      
12E6 120000   F     3117                                     call    saver2;A0<-A3
12E9 020000   F     3118                                     jmp             goto7;an_t7
                    3119     
12EC C20F           3120     ybnul:                  clr             bitnul
12EE 900000   F     3121                                      mov    DPTR,#ch0 
12F1 120000   F     3122                                     CALL   ldc_long          ; r2..r5 <-- 0
12F4 786A           3123                                     mov             r0,#rez_A0      ;A0=0
12F6 120000   F     3124                                     call    saver2
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    50

12F9 020000   F     3125                                     jmp             goto7;an_t7
                    3126     
12FC 301021         3127     labelH:                 jnb             bitt2,nolah
12FF 75B0FB         3128                                     mov             p3,#0fbh   ;вход в режим изм Т
1302 534A8F         3129                                     anl             bufind+10,#8fh
1305 79B7           3130                                     mov             r1,#load;parT
1307 20B70D         3131                                     jb              p3.7,rhnot1
130A B70003         3132                                     cjne    @r1,#0,inct;
130D 020000   F     3133                                     jmp             out7;hyest6
1310 17             3134     inct:                   dec             @r1                     ;Tизм+1
                    3135                             
1311 120000   F     3136                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
1314                3137     hnot2:          ;       call    ind
1314 020000   F     3138                                     jmp             onmem11;out7
                    3139     
1317 020000   F     3140      rhnot1:                jmp             hnot1
                    3141      ;rnoviR:       jmp             noviR
131A 020000   F     3142      rlabelK:       jmp             labelK
131D 020000   F     3143      rlabelI:       jmp             labelI          
                    3144      ;;;;;;;;;;;;;;;;;;;
1320 3014F7         3145     nolah:          jnb             bitvich,rlabelK 
                    3146                                     
                    3147                             ;;;;;;
                    3148                             ;увеличить счетчик задержки клавиатуры
                    3149                     ;;              mov             r0,#chkl
                    3150                     ;;              mov             @r0,#27h
                    3151                     ;;              inc             r0
                    3152                     ;;              mov             @r0,#10h
                    3153                             ;;;;;;
                    3154     
1323 78B1           3155                             mov             r0,#vichR
1325 B61128         3156                             cjne    @r0,#11h,rhnor11;rlabelI;;
1328 75B0FB         3157                             mov             p3,#0fbh   ;<-
132B 20B730         3158                             jb              p3.7,noh37;routF
132E B6110B         3159                     cjne    @r0,#11h,hr12
1331 7612           3160                             mov             @r0,#12h;11h;= вычислить
1333 900000   F     3161                             mov             dptr,#teIZMK    ;       изм конст;teVICH
1336 120000   F     3162     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1339 020000   F     3163                             jmp             onmem11;goto7
133C B61207         3164     hr12:           cjne    @r0,#12h,hnor12
133F 7611           3165     lovich:         mov             @r0,#11h
1341 900000   F     3166                             mov             dptr,#teVICH
1344 80F0           3167                             jmp             hvi1113         
1346 B61307         3168     hnor12:         cjne    @r0,#13h,rhnor11
1349 7612           3169     loizmk:         mov             @r0,#12h
134B 900000   F     3170                             mov             dptr,#teIZMK    ;       изм конст
                    3171                                        
134E 80E6           3172                             jmp             hvi1113
                    3173     
1350 804C           3174     rhnor11:                jmp             hnor11
                    3175     
1352 8057           3176     rvvizko:                jmp             vvizko
1354 C214           3177     vioutF:                 clr             bitvich
1356 C206           3178                                                     clr             bitvi11
1358 020000   F     3179                                                     jmp             viout;outF
135B 020000   F     3180     toutF:                  jmp             viout;outF
                    3181     
135E 75B0F7         3182     noh37:          mov             p3,#0f7h
1361 20B7F7         3183                             jb              p3.7,toutF;vioutF
1364 B611EB         3184                             cjne    @r0,#11h,rvvizko
1367 D206           3185                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1369 D204           3186              setb   bitizm
136B 534B07         3187                              anl            bufind+11,#07h
136E 434B10         3188                              orl            bufind+11,#10h;точка после 1 знакоместа
1371 020000   F     3189                                     jmp             goto7;
                    3190     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    51

                    3191     
1374 80E8           3192     rnoh37:         jmp             noh37
                    3193     
1376 B6120D         3194     norr11:         cjne    @r0,#12h,norr12
1379 75B0FB         3195                             mov             p3,#0fbh   ;<-
137C 20B7F5         3196                             jb              p3.7,rnoh37;routF
137F 760B           3197                             mov             @r0,#11;12->11
1381 80BC           3198                             jmp             lovich
                    3199     
1383 020000   F     3200     labelI2:                jmp             labelI
1386 B613FA         3201     norr12:         cjne    @r0,#13h,labelI2
1389 75B0FB         3202                             mov             p3,#0fbh   ;<-
138C 20B7E5         3203                             jb              p3.7,rnoh37
138F 7612           3204                             mov             @r0,#12h
1391 80B6           3205                             jmp             loizmk
                    3206                             ;;;;
1393 C214           3207     clrvich:                clr             bitvich
1395 D204           3208                             setb    bitizm
1397 A8B2           3209                             mov             r0,marker
1399 76FF           3210                             mov             @r0,#0ffh
139B 020000   F     3211                              jmp    goto7;  routF
                    3212     
                    3213     ;rnoh37:                jmp             noh37
                    3214      ;ввод изм конст
139E B612E5         3215     hnor11:         cjne    @r0,#12h,norr12;clrvich
13A1 75B0FB         3216                              mov            p3,#0fbh   
13A4 20B7CD         3217                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
13A7 7611           3218                             mov             @r0,#11h
13A9 8094           3219                             jmp             lovich
                    3220     
13AB 78B1           3221     vvizko:         mov             r0,#vichR
13AD E6             3222                             mov             a,@r0
                    3223                     ;       cjne    @r0,#12h,clrvich
13AE B412E2         3224                             cjne    a,#12h,clrvich
13B1 7621           3225                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
13B3 78B2           3226                             mov             r0,#marker
13B5 7604           3227                             mov             @r0,#4;9
13B7 753A04         3228                             mov             movleft,#4
13BA 753B07         3229                             mov             movrig,#7
13BD 900000   F     3230                             mov             dptr,#teAequ0
13C0 120000   F     3231                             call    lotext
                    3232                             
13C3 120000   F     3233                             call    outA
13C6 534B0F         3234                             anl                     bufind+11,#0fh
                    3235             ;       mov             a,bufind+11
                    3236             ;       anl             a,#0f0h
                    3237             ;       mov             bufind+11,a
13C9 434B40         3238                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3239                             
13CC 020000   F     3240                             jmp             goto7;routF
                    3241     ;hnor13:                jmp             hnor12          
13CF B6210C         3242     izchi:          cjne    @r0,#21h,tlabelI
                    3243     ;<- при вводе цифр А                            
                    3244                     ;        mov            p3,#0fbh   
                    3245                     ;       jnb             p3.7,li21
                    3246             ;clr            bitmig
13D2 78B2           3247                             mov             r0,#marker
13D4 16             3248                             dec             @r0
13D5 B60201         3249                             cjne    @r0,#2,li21
13D8 06             3250                             inc             @r0;marker=3 +/-
13D9 C219           3251     li21:           clr             bitmig
13DB 020000   F     3252                             jmp             goto7;outF
                    3253     
13DE 020000   F     3254     tlabelI:        jmp             labelI
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    52

                    3255     
                    3256     ;                       load    0 1 2 3 4 5             
13E1 06050403       3257     sootv:          db              6,5,4,3,2,1;parT
13E5 0201                    
                    3258     ;
13E7 020000   F     3259     nnnott:                 jmp             viout
                    3260     ;нажата кн ввод при наборе Т
13EA 75B0F7         3261     hnot1:                  mov             p3,#0f7h
13ED 20B7F7         3262                                     jb              p3.7,nnnott;routF;out7
13F0 B70549         3263                                     cjne    @r1,#5,nohnot1  ;r1=load
13F3 794A           3264                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
13F5 E7             3265                                     mov             a,@r1
13F6 548F           3266                                     anl             a,#8fh
13F8 4440           3267                                     orl             a,#40h;.6
13FA F7             3268                                     mov             @r1,a
13FB 8000           3269                                     jmp             loadb
                    3270                                     
                    3271                                     
13FD 789A           3272     loadB:                  mov             r0,#parT
13FF 900000   F     3273                                     mov             dptr,#sootv
1402 79B7           3274                                     mov             r1,#load                
1404 E7             3275                                     mov             a,@r1;load
1405 93             3276                                     movc    a,@a+dptr
1406 F6             3277                                     mov             @r0,a
1407 120000   F     3278                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3279                                      ;r4=b1 r5=b2
140A 120000   F     3280                                     call    iniacp;инициализация АЦП
140D 120000   F     3281                                     call    loadUS
1410 120000   F     3282                                     call    clmassix        
1413 D204           3283                                     setb    bitizm
1415 C210           3284                                     clr             bitt2
                    3285     
1417 534A8F         3286                                     anl             bufind+10,#8fh
141A C3             3287                                      clr            c
141B 789A           3288                                  mov                r0,#parT
141D 79AF           3289                                      mov            r1,#parN
141F 7402           3290                                  mov                a,#2
1421 96             3291                                 subb                a,@r0
1422 5005           3292                                 jnc                 loadB2
1424 7701           3293                                     mov             @r1,#1;N=1         ;T>=2
1426 020000   F     3294     bout7:                  jmp             goto7;out7
                    3295     
1429 B702FA         3296     loadB2:                 cjne    @r1,#2,bout7
142C 7702           3297                                     mov             @r1,#2;N=2
142E 020000   F     3298                                     jmp             goto7;out7
1431                3299     nohnot2:                ;в буфере 1 зажечь <=0,1s
1431 794A           3300                                     mov             r1,#bufind+10
1433 E7             3301                                     mov             a,@r1
1434 4410           3302                                     orl             a,#10h;.4
1436 F7             3303                                     mov             @r1,a
1437 120000   F     3304                                     call            ind
143A 80C1           3305                                     jmp             loadB
143C B704F2         3306     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
143F 794A           3307                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1441 E7             3308                                     mov             a,@r1
1442 4420           3309                                     orl             a,#20h;.5
1444 F7             3310                                     mov             @r1,a
1445 80B6           3311                                     jmp             loadB
                    3312     
                    3313     ;кнопка ПАМЯТЬ
1447 2012DC         3314     knMEM:  jb              bitklb,bout7;в реж калибровки не нажимать память
144A C204           3315                                     clr             bitizm          ;off IZM
144C 900000   F     3316                                     mov             dptr,#teLIST;CLE
144F 120000   F     3317                                     call    lotext    ;в буф2 записать ОЧИСТКА
1452 D20B           3318                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    53

1454 534BEF         3319                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1457 434B01         3320                                     orl             bufind+11,#01;зажечь светодиод память
145A 120000   F     3321                                     call            ind
145D 78B0           3322                                     mov             r0,#level
145F 7613           3323                                     mov             @r0,#13h;11h
1461 783D           3324     onmem11:                mov             r0,#chkl
1463 7603           3325                                     mov             @r0,#03
1465 08             3326                                     inc             r0
1466 76E8           3327                                     mov             @r0,#0e8h               ;1000
1468 020000   F     3328                                     jmp             out7;goto7;out7
                    3329     
146B 020000   F     3330     rnomemk:                jmp             nomemk          ;
                    3331     
146E 78B0           3332     outkmem:        mov                     r0,#level
1470 7600           3333                                             mov                     @r0,#0
1472 78B1           3334                                             mov                     r0,#vichR
1474 7600           3335                                             mov                     @r0,#0
1476 C20B           3336                                             clr                     bitmem
1478 C214           3337                                             clr                     bitvich
147A C206           3338                                             clr                     bitvi11
147C C211           3339                                             clr                     bitmenu
147E D204           3340                                             setb            bitizm
1480 78B2           3341                                             mov                     r0,#marker
1482 76FF           3342                                             mov                     @r0,#0ffh
1484 020000   F     3343                                             jmp                     vvod2_10
                    3344                                             
                    3345     
1487                3346     offmenum:       
1487 020000   F     3347                                                     jmp                     goto7   
                    3348             
148A                3349     labelK:
                    3350     
                    3351     ;;;;;;;;;;;;
148A 300BDE         3352                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
                    3353                                     ;;;;;;;
148D 75B0DF         3354                                     mov             p3,#0dfh;(код кнопки меню)
1490 30B7F4         3355                                     jnb             p3.7,offmenum
                    3356                                     ;;;;;;;
1493 75B0EF         3357                                     mov                     p3,#0efh
1496 30B7D5         3358                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1499 78B0           3359                                      mov            r0,#level
149B B6114A         3360                               cjne          @r0,#11h,klev1;nome11
149E 75B0FB         3361     lefmem11:         mov           p3,#0fbh
14A1 E5B0           3362                               mov           a,p3
14A3 20E70D         3363                               jb            acc.7,rkvvod0
14A6 B6110D         3364                               cjne          @r0,#11h,locle          ;<-memory
14A9 7614           3365                               mov           @r0,#14h
14AB 900000   F     3366     lolist:           mov           dptr,#teSTAT
14AE 120000   F     3367                               call          lotext           ;СТАТИСТИКА
14B1 80AE           3368                               jmp                   onmem11;goto7;
                    3369     
14B3 020000   F     3370     rkvvod0:        jmp             kvvod0
                    3371     
                    3372     
14B6 B6120A         3373     locle:          cjne            @r0,#12h,lowr           ;<-memory
14B9 7611           3374                               mov           @r0,#11h                   ;ОЧИСТКА
14BB 900000   F     3375     loadcle:          mov           dptr,#teCLE
14BE 120000   F     3376                               call          lotext
14C1 809E           3377                               jmp           onmem11;goto7
                    3378     
14C3 B6130A         3379     lowr:                   cjne    @r0,#13h,lostat
14C6 7612           3380                                             mov             @r0,#12h
14C8 900000   F     3381      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
14CB 120000   F     3382                             call    lotext
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    54

14CE 8091           3383                             jmp             onmem11;goto7
                    3384     
14D0 7613           3385     lostat:         mov             @r0,#13h
14D2 900000   F     3386                                     mov             dptr,#teLIST              ;ПРОСМОТР
14D5 120000   F     3387                                             call    lotext
14D8 8087           3388                                     jmp             onmem11;goto7
                    3389     
14DA B6141A         3390     me_14:cjne              @r0,#14h,klev22
14DD 7613           3391                                             mov             @r0,#13h
14DF 900000   F     3392                             mov             dptr,#teLIST              ;;ПРОСМОТР
14E2 120000   F     3393                             call    lotext
14E5 020000   F     3394                             jmp             goto7
14E8 B61202         3395      klev1:          cjne   @r0,#12h,klev2
14EB 80B1           3396                             jmp             lefmem11
14ED B61302         3397     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
14F0 80AC           3398                             jmp             lefmem11
14F2 B61402         3399     klev3:           cjne   @r0,#14h,klev22;
14F5 80A7           3400                             jmp             lefmem11
                    3401     ;<- vvod на более низких уровнях
14F7 B62117         3402     klev22:         cjne    @r0,#21h,klev21
14FA 75B0FB         3403     lev220:         mov             p3,#0fbh
14FD 20B76F         3404                             jb              p3.7,kgo23
1500 B6210B         3405                             cjne    @r0,#21h,kfullr
1503 7622           3406                             mov             @r0,#22h
1505 900000   F     3407                             mov             dptr,#teBL
1508 120000   F     3408                             call    lotext
150B 020000   F     3409                             jmp             goto7;outF
150E 020000   F     3410     kfullr:         jmp             kfull                           
1511 B6220E         3411     klev21:         cjne    @r0,#22h,klev23
1514 80E4           3412                             jmp             lev220
                    3413     
1516 020000   F     3414     rlabL2:         jmp             labL2
1519 020000   F     3415     rlabM:          jmp             labM
151C 020000   F     3416     ques:                   jmp             out7
151F 020000   F     3417     ddoutfr:        jmp             ddoutf
                    3418     
1522 B623F4         3419     klev23:          cjne   @r0,#23h,rlabM
1525 75B0FB         3420                              mov    p3,#0fbh
1528 30B7F1         3421                              jnb            p3.7,ques;errr labL2
152B 75B0F7         3422                              mov    p3,#0f7h
152E 20B7EE         3423                              jb             p3.7,ddoutfr
                    3424                                             ;       считать с индикатора  
1531 C3             3425                                     clr                     c
1532 E547           3426                                mov          a,bufind+7      
1534 9430           3427                                      subb           a,#30h
1536 B40002         3428                                      cjne           a,#0,chaibl
1539 7401           3429                                      mov            a,#1                    ;номера блоков 1..4
153B                3430     chaibl:         
153B F538           3431                                             mov             nblok,a
                    3432                                
                    3433                              ;очистить блок памяти с набранным номером
                    3434                              ;150h..1000h( 150h+nblok*320h)
153D 120000   F     3435                                     call            adrblok         ;dptr-
                    3436     
1540 79B8           3437                                     mov                     r1,#work                ;обьем блок
                             а
1542 7703           3438                                     mov                     @r1,#03
1544 09             3439                                     inc                     r1
1545 7720           3440                                     mov                     @r1,#20h                        ;32
                             0h
                    3441     
1547                3442     goonoff:
1547 E4             3443                                     clr                     a
1548 F0             3444                                     movx            @dptr,a
1549 A3             3445                                     inc                     dptr
                    3446     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    55

154A 79B9           3447                                     mov                     r1,#work+1
154C 120000   F     3448                                     call            chminus
154F 78B8           3449                                     mov             r0,#work
1551 E6             3450                             mov             a,@r0
1552 30E7F2         3451                             jnb             acc.7,goonoff
                    3452     
1555 C20B           3453                              clr    bitmem  ;сбр признак памяти 
1557 D204           3454                              setb   bitizm
                    3455                             ;после очистки блока сохраняем в saven_bl 
                    3456                             ;адрес второго с конца измерения потому
                    3457                             ;добавляем 8;;
1559 120000   F     3458                             call            adrblok;dptr-начало блока
                    3459                     ;       mov                     a,dpl
                    3460                     ;       add                     a,#8
                    3461                     ;       mov                     dpl,a
                    3462                     ;       mov                     a,dph
                    3463                     ;       addc            a,#0
                    3464                     ;       mov                     dph,a
155C 120000   F     3465                             call            save_hl;подготовка записи в начало блока
                    3466                             ;;;;;
                    3467     
155F 78B2           3468                              mov            r0,#marker
1561 76FF           3469                              mov            @r0,#0ffh
1563 020000   F     3470                                     jmp                     vvod2_10
1566 020000   F     3471                              jmp    goto7
                    3472     
1569 020000   F     3473     rddoutf:        jmp             ddoutf
156C 020000   F     3474     rgo23no:        jmp             go23no
                    3475     
                    3476     ;vvod   БЛОК->БЛОК 00           
156F 75B0F7         3477     kgo23:           mov    p3,#0f7h
1572 20B7F4         3478                             jb              p3.7,rddoutf
1575 B621F4         3479                             cjne    @r0,#21h,rgo23no
                    3480                             ;очистить память 150..dd0h
                    3481                             ;1й блок
1578 900150         3482                              mov                    dptr,#150h
157B 79B8           3483                                     mov                     r1,#work                ;обьем блок
                             а
157D 7703           3484                                     mov                     @r1,#03
157F 09             3485                                     inc                     r1
1580 7720           3486                                     mov                     @r1,#20h                        ;32
                             0h
                    3487     
1582                3488     gooff1:
1582 E4             3489                                     clr                     a
1583 F0             3490                                     movx            @dptr,a
1584 A3             3491                                     inc                     dptr
                    3492     
1585 79B9           3493                                     mov                     r1,#work+1
1587 120000   F     3494                                     call            chminus
158A 78B8           3495                                     mov             r0,#work
158C E6             3496                             mov             a,@r0
158D 30E7F2         3497                             jnb             acc.7,gooff1
1590 900150         3498                             mov                     dptr,#150h;начало 1 го блока
                    3499                             ;после очистки блока сохраняем в saven_bl 
                    3500                             ;адрес второго с конца измерения потому
                    3501                             ;добавляем 8;;
                    3502     ;                               call            save_hl;подготовка записи в начало блока
                    3503     ;2й блок
1593 900470         3504                             mov                     dptr,#470h
1596 79B8           3505                                     mov                     r1,#work                ;обьем блок
                             а
1598 7703           3506                                     mov                     @r1,#03
159A 09             3507                                     inc                     r1
159B 7720           3508                                     mov                     @r1,#20h                        ;32
                             0h
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    56

                    3509     
159D                3510     gooff2:
159D E4             3511                                     clr                     a
159E F0             3512                                     movx            @dptr,a
159F A3             3513                                     inc                     dptr
                    3514     
15A0 79B9           3515                                     mov                     r1,#work+1
15A2 120000   F     3516                                     call            chminus
15A5 78B8           3517                                     mov             r0,#work
15A7 E6             3518                             mov             a,@r0
15A8 30E7F2         3519                             jnb             acc.7,gooff2
15AB 900470         3520                             mov                     dptr,#470h;начало 2 го блока
                    3521     ;                       call            save_hl;подготовка записи в начало блока
                    3522     ;3й блок
15AE 900790         3523                             mov                     dptr,#790h
15B1 79B8           3524                                     mov                     r1,#work                ;обьем блок
                             а
15B3 7703           3525                                     mov                     @r1,#03
15B5 09             3526                                     inc                     r1
15B6 7720           3527                                     mov                     @r1,#20h                        ;32
                             0h
                    3528     
15B8                3529     gooff3:
15B8 E4             3530                                     clr                     a
15B9 F0             3531                                     movx            @dptr,a
15BA A3             3532                                     inc                     dptr    
                    3533     
15BB 79B9           3534                                     mov                     r1,#work+1
15BD 120000   F     3535                                     call            chminus
15C0 78B8           3536                                     mov             r0,#work
15C2 E6             3537                             mov             a,@r0
15C3 30E7F2         3538                             jnb             acc.7,gooff3
15C6 900790         3539                             mov                     dptr,#790h;начало 3 го блока
                    3540                                     ;после очистки блока сохраняем в saven_bl 
                    3541                             ;адрес второго с конца измерения потому
                    3542                             ;добавляем 8;;
                    3543                     ;       call            save_hl;подготовка записи в начало блока
                    3544     ;4й блок
15C9 900AB0         3545     mov                     dptr,#0ab0h
15CC 79B8           3546                                     mov                     r1,#work                ;обьем блок
                             а
15CE 7703           3547                                     mov                     @r1,#03h
15D0 09             3548                                     inc                     r1
15D1 7720           3549                                     mov                     @r1,#20h                        ;32
                             0h
                    3550     
15D3                3551     gooff4:
15D3 E4             3552                                     clr                     a
15D4 F0             3553                                     movx            @dptr,a
15D5 A3             3554                                     inc                     dptr
                    3555     
15D6 79B9           3556                                     mov                     r1,#work+1
15D8 120000   F     3557                                     call            chminus
15DB 78B8           3558                                     mov             r0,#work
15DD E6             3559                             mov             a,@r0
15DE 30E7F2         3560                             jnb             acc.7,gooff4
15E1 900AB0         3561                             mov                     dptr,#0ab0h;начало 4 го блока
                    3562                             ;после очистки блока сохраняем в saven_bl 
                    3563                             ;адрес второго с конца измерения потому
                    3564                             ;добавляем 8;;
                    3565     ;                       call            save_hl;подготовка записи в начало блока
                    3566                             ;;;;26.02.07
15E4 E538           3567                                                     mov             a,nblok
15E6 B40117         3568                                                     cjne    a,#1,cl_hl1
15E9 900150         3569                                                     mov             dptr,#150h
15EC 79D3           3570                                                     mov             r1,#saven_bl
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    57

15EE E583           3571     cl_hl:                  mov             a,dph
15F0 F7             3572                                               mov           @r1,a
15F1 09             3573                                                     inc             r1
15F2 E582           3574                                                     mov             a,dpl
15F4 F7             3575                                                     mov             @r1,a
                    3576                             ;;;;;;;;
15F5 C20B           3577                                             clr             bitmem
15F7 D204           3578                                             setb    bitizm
15F9 78B2           3579                                             mov             r0,#marker
15FB 76FF           3580                                             mov             @r0,#0ffh
15FD 020000   F     3581                                             jmp                     vvod2_10;jmp            got
                             o7
                    3582     
1600 B40207         3583     cl_hl1:         cjne            a,#2,cl_hl2
1603 900470         3584                                             mov                     dptr,#470h
1606 79C0           3585                                             mov             r1,#saven_bl2
1608 80E4           3586                                             jmp                     cl_hl
                    3587     
160A B40307         3588     cl_hl2:         cjne            a,#3,cl_hl3
160D 900790         3589                                             mov                     dptr,#790h
1610 79C2           3590                                             mov             r1,#saven_bl3
1612 80DA           3591                                             jmp                     cl_hl
                    3592     
1614 900AB0         3593     cl_hl3:         mov                     dptr,#0ab0h
1617 79D9           3594                                             mov             r1,#saven_bl4
1619 80D3           3595                                             jmp                     cl_hl
                    3596     
161B 7623           3597     go23no:    mov          @r0,#23h
161D 753B08         3598                                             mov                     movrig,#8
1620 753A07         3599                                             mov             movleft,#7
1623 8056           3600                             jmp             loblok;БЛОК 00
                    3601     
1625 7621           3602     kfull:          mov             @r0,#21h
1627 8025           3603                             jmp             gofull
                    3604                             
                    3605                                             
1629                3606     nomemk:                         
1629 020000   F     3607                                     jmp             labelS                  ;нажат ввод меню
                    3608                             
162C 75B0FB         3609     nome11:           mov           p3,#0fbh
162F E5B0           3610                               mov           a,p3
1631 20E70D         3611                               jb            acc.7,kvvod0
1634 B61205         3612                               cjne          @r0,#12h,mem12no        
1637 7611           3613                               mov           @r0,#11h                ;ОЧИСТКА
1639 020000   F     3614                               jmp            loadcle
                    3615     
163C                3616     mem12no:        ;cjne           @r0,#13h,lowr           
163C 7612           3617                               mov           @r0,#12h                   ;
163E 020000   F     3618                               jmp           lowr1                     ;ЗАПИСЬ
                    3619     
1641 75B0F7         3620     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1644 20B710         3621                               jb            p3.7,ddoutf
1647 78B0           3622                               mov           r0,#level
1649 B6112A         3623                               cjne          @r0,#11h,mvv11
164C 7621           3624                               mov           @r0,#21h                ;ПОЛНАЯ
164E 900000   F     3625     gofull:           mov           dptr,#teFULL
1651 120000   F     3626                               call          lotext
1654 020000   F     3627                                     jmp             onmem11;mlabL2  ;<-????????/
                    3628     
1657                3629     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3630     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3631     ;т е сохранить ее в ячейке для мигания в противном случае
                    3632     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3633     ;       знакоместа
1657 78B2           3634                                                     mov             r0,#marker
1659 7440           3635                                     mov             a,#bufind
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    58

165B 26             3636                                             add             a,@r0                   ;a=bufind+m
                             arker
165C F9             3637                                             mov             r1,a
165D 19             3638                                             dec             r1      ;       inc             r1
165E 873C           3639                                             mov             savba,@r1
1660 C219           3640                                             clr             bitmig
                    3641     ;;;;;;;;;;;;;;;;
1662 78B2           3642                       mov           r0,#marker      ;курсор слева   ?
1664 E53A           3643                             mov             a,movleft
1666 C3             3644                             clr             c
1667 96             3645                             subb    a,@r0
1668 7006           3646                             jnz        left21
166A E53B           3647                             mov             a,movrig;уст в правую позицию
166C F6             3648                             mov             @r0,a
                    3649     
166D 020000   F     3650                             jmp             goto7                                            
1670 E53A           3651     left21:         mov             a,movleft;уст в левую позицию
1672 F6             3652                             mov             @r0,a   
1673 020000   F     3653                             jmp             goto7
                    3654     
                    3655     
1676 B61215         3656     mvv11:            cjne          @r0,#12h,mvv12
1679 7631           3657                                     mov             @r0,#31h
167B 900000   F     3658     loblok:                 mov             dptr,#teBL0;БЛОК 0
167E 120000   F     3659                                     call    lotext
1681 E538           3660                                     mov                     a,nblok
1683 2430           3661                                     add                     a,#30h
1685 F547           3662                                     mov                     bufind+7,a
1687 78B2           3663                                     mov             r0,#marker
1689 7607           3664                                     mov             @r0,#7
                    3665                                     ;mov            movrig,#9
                    3666                                     ;mov            movleft,#6
168B 020000   F     3667                                     jmp             onmem11
168E B61411         3668     mvv12:  cjne            @r0,#14h,bl_li
1691 7661           3669                                     mov                     @r0,#61h
1693 900000   F     3670                                     mov             dptr,#teMIN;
1696 120000   F     3671                                     call    lotext
1699 120000   F     3672                                     call    vichmin
169C 120000   F     3673                                     call    z_1s
169F 020000   F     3674                                     jmp             onmem11
                    3675     
16A2 7641           3676     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
16A4 80D5           3677                                     jmp             loblok
                    3678     
                    3679     
                    3680     
16A6                3681     mlabL2:         ;jmp            labL2
                    3682                                             ;  уст курсор в правую позицию 
                    3683                                     ;                               29.12.06
                    3684     ;;;;;;;;;;;;;;;;;;
                    3685     ;необходимо не портить цифру в следуюем справа знакоместе
                    3686     ;т е сохранить ее в ячейке для мигания в противном случае
                    3687     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3688     ;       знакоместа
16A6 78B2           3689                                             mov             r0,#marker
16A8 7440           3690                                     mov             a,#bufind
16AA 26             3691                                             add             a,@r0                   ;a=bufind+m
                             arker
16AB F9             3692                                             mov             r1,a
16AC 09             3693                                             inc             r1
16AD 873C           3694                                             mov             savba,@r1
                    3695     ;;;;;;;;;;;;;;;;
16AF 78B2           3696                       mov           r0,#marker      ;курсор справа  ?
16B1 E53B           3697                             mov             a,movrig
16B3 C3             3698                             clr             c
16B4 96             3699                             subb    a,@r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    59

16B5 6006           3700                             jz         equ2l
16B7 E53B           3701                             mov             a,movrig;уст в правую позицию
16B9 F6             3702                             mov             @r0,a
                    3703     ;                       lool
16BA 020000   F     3704                             jmp             goto7                                            
16BD E53A           3705     equ2l:          mov             a,movleft;уст в левую позицию
16BF F6             3706                             mov             @r0,a   
16C0 020000   F     3707                             jmp             goto7
                    3708                     
16C3 020000   F     3709     rnom31:         jmp                     nom31
16C6 B631FA         3710     labM:                   cjne    @r0,#31h,rnom31
16C9 75B0FB         3711                                     mov             p3,#0fbh
16CC 30B7D7         3712                                     jnb             p3.7,mlabL2
16CF 75B0F7         3713                                mov          p3,#0f7h
16D2 20B782         3714                                jb           p3.7,ddoutf
                    3715                                
16D5 7632           3716                                mov          @r0,#32h                        ;ИНТ 0000
                    3717                                     ;       считать с индикатора  
16D7 C3             3718     blokvv:         clr                     c
16D8 E547           3719                                mov          a,bufind+7      
16DA 9430           3720                                      subb           a,#30h
16DC B40002         3721                                      cjne           a,#0,blokvvc
16DF 7401           3722                                      mov            a,#1                    ;номера блоков 1..4
                    3723     
16E1 F538           3724     blokvvc: mov            nblok,a
16E3 900000   F     3725                                mov          dptr,#teINT;ИНТ 0000c
16E6 120000   F     3726                                call         lotext
16E9 78CE           3727                                      mov            r0,#interva+1
16EB 7952           3728                                      mov            r1,#abin+3
16ED E6             3729                                      mov            a,@r0
16EE F7             3730                                      mov            @r1,a
16EF 18             3731                                             dec                     r0
16F0 19             3732                                             dec                     r1
16F1 E6             3733                                             mov             a,@r0
16F2 F7             3734                                             mov             @r1,a
16F3 19             3735                                             dec             r1
16F4 E4             3736                                             clr             a
16F5 F7             3737                                             mov             @r1,a
16F6 19             3738                                             dec             r1
16F7 F7             3739                                             mov             @r1,a
                    3740                                                                             
16F8 7853           3741                                             mov             r0,#adec
16FA 7952           3742                                             mov             r1,#abin+3      ;hex->10
16FC 120000   F     3743                                             call    bindec
                    3744                                     
16FF 785C           3745                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1701 7948           3746                                             mov             r1,#bufind+8
1703 7F04           3747                                             mov             r7,#4
1705 E6             3748     bloin:                          mov             a,@r0
1706 2430           3749                                             add             a,#30h
1708 F7             3750                                             mov             @r1,a
1709 19             3751                                             dec             r1
170A 18             3752                                             dec             r0
170B DFF8           3753                                             djnz    r7,bloin
170D 78B2           3754                                mov          r0,#marker
170F 7605           3755                                mov          @r0,#5
1711 753B08         3756                                mov          movrig,#8
1714 753A05         3757                                mov          movleft,#5
1717 789A           3758                                      mov            r0,#parT
1719 B60609         3759                                     cjne            @r0,#6,innot6
171C 534BF0         3760                                     anl                     bufind+11,#0f0h;after 5- 0.000c
171F 434B04         3761                                     orl                     bufind+11,#04h
                    3762                             
1722 020000   F     3763                                     jmp                     goto7
1725 B60309         3764     innot6: cjne            @r0,#3,innot3
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    60

1728 534BF0         3765                                     anl                     bufind+11,#0f0h;after 7- 000.0c
172B 434B20         3766                                     orl                     bufind+11,#20h
                    3767                                     ;call           ind
172E 020000   F     3768                                     jmp                     out7;goto7
1731 C3             3769     innot3: clr                     c
1732 7403           3770                                     mov                     a,#3
1734 96             3771                                     subb            a,@r0
1735 5009           3772                                     jnc                     innot1_2
1737 534BF0         3773                                     anl                     bufind+11,#0f0h;after 6- 00.00c
173A 434B40         3774                                     orl                     bufind+11,#40h
                    3775                                     
173D 020000   F     3776                                     jmp                     goto7
                    3777     
1740                3778     innot1_2:
1740 534B0F         3779                                     anl                     bufind+11,#0fh;0h;0000c
1743 C219           3780                                     clr                     bitmig
                    3781                                     ;call           ind             нет необходимости пришет пр
                             обел         
1745 020000   F     3782     rgoto7: jmp        goto7;outF
                    3783     
1748 B63276         3784     nom31:             cjne         @r0,#32h,nom32
174B 75B0FB         3785                                     mov             p3,#0fbh
174E 20B71F         3786                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3787                                     
1751                3788     lefcur:         ;;кн <- 32 нач блок 000
                    3789     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3790     ;т е сохранить ее в ячейке для мигания в противном случае
                    3791     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3792     ;       знакоместа
1751 C219           3793                                                     clr             bitmig
1753 78B2           3794                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1755 7440           3795                                     mov             a,#bufind
1757 26             3796                                             add             a,@r0                   ;a=bufind+m
                             arker
1758 F9             3797                                             mov             r1,a
1759 19             3798                                             dec             r1;;;;;;;;;;;
175A 873C           3799                                             mov             savba,@r1
                    3800                                             
175C 78B2           3801                                                     mov             r0,#marker      ;курсор сле
                             ва?
175E E53A           3802                             mov             a,movleft
1760 C3             3803                             clr             c
1761 96             3804                             subb    a,@r0
1762 7006           3805                             jnz        noequ2
1764 E53B           3806                             mov             a,movrig
1766 F6             3807                             mov             @r0,a;уст в крайнюю правую позицию
1767 020000   F     3808                             jmp             goto7
176A 120000   F     3809     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
176D 020000   F     3810                             jmp        goto7        
                    3811                                                                       
                    3812     
                    3813     ;;;;;;;;;;;;;;;;;;
1770                3814     vvinte:         ;ввод интервал                          
1770 75B0F7         3815     no31n:             mov          p3,#0f7h
1773 20B7CF         3816                                     jb              p3.7,rgoto7
1776 7633           3817                                     mov             @r0,#33h
                    3818                                     ;считать с индикатора введенный интервал
1778 7F0A           3819                                             mov             r7,#10
177A 7853           3820                                     mov             r0,#adec
177C 120000   F     3821                                     call    clearN
177F 120000   F     3822                                     call    upak4                   
1782 784F           3823                                     mov             r0,#abin
1784 7953           3824                                     mov             r1,#adec                        ;мл        
                              ст
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    61

1786 120000   F     3825                                     call    decbin                  ;abin..abin+3 (hex)
1789 794F           3826                                     mov             r1,#abin
178B 78CE           3827                                     mov             r0,#interva+1
178D E7             3828                                     mov             a,@r1
178E F6             3829                                     mov             @r0,a
178F 18             3830                                     dec             r0
1790 09             3831                                     inc             r1
1791 E7             3832                                     mov             a,@r1
1792 F6             3833                                     mov             @r0,a
                    3834                                     
1793 78D5           3835                                     mov             r0,#volume                      ;объем блок
                             а
1795 7600           3836                                     mov             @r0,#0
1797 08             3837                                     inc             r0
1798 76C7           3838                                     mov             @r0,#0c7h
179A 120000   F     3839                                     call            adrblok;dptr
179D 120000   F     3840                                     call            save_hl;1я ячейка блока
17A0 78B2           3841                                mov          r0,#marker
17A2 76FF           3842                                mov          @r0,#0ffh
17A4 D204           3843                                      setb           bitizm
17A6 C20B           3844                                      clr            bitmem
17A8 789A           3845     vvod2_10: mov           r0,#parT
17AA B6050C         3846                                      cjne           @r0,#5,no10msv
17AD 900000   F     3847                                             mov                     dptr,#te10ms
17B0 120000   F     3848     t2msme:         call            lotext
                    3849                                             
17B3 120000   F     3850                                             call            ind
17B6 020000   F     3851     no2msv:   jmp      goto7;
17B9 B606FA         3852     no10msv:        cjne            @r0,#6,no2msv   
17BC 900000   F     3853                                             mov                     dptr,#te2ms
17BF 80EF           3854                                     jmp                     t2msme
                    3855     
                    3856     
                    3857     
17C1 B6332B         3858     nom32:           cjne           @r0,#33h,nom33
17C4 75B0FB         3859                              mov            p3,#0fbh
17C7 30B787         3860                              jnb            p3.7,lefcur
17CA 75B0F7         3861                              mov            p3,#0f7h
17CD 20B7E6         3862                              jb             p3.7,no2msv;rgoto7
                    3863                              ;запомнить номер ячейки конца блока
17D0 7634           3864                              mov    @r0,#34h
17D2 7F0A           3865     INTn:                   mov             r7,#10
17D4 7853           3866                                     mov             r0,#adec
17D6 120000   F     3867                                     call    clearN
17D9 120000   F     3868                                     call    upak3                   
17DC 784F           3869                                     mov             r0,#abin
17DE 7953           3870                                     mov             r1,#adec                        ;мл        
                              ст
17E0 120000   F     3871                                     call    decbin                  ;abin..abin+3 (hex)
17E3 120000   F     3872                                     call    loadr2                  ;r2..r5
17E6 120402         3873                                     call    altof                   ;r2..r5->int
17E9 020000   F     3874     dgoto7:                  jmp            goto7
                    3875     
17EC 020000   F     3876     rlefcur:                jmp             lefcur
                    3877     
17EF B63464         3878     nom33:          cjne            @r0,#34h,labelP
17F2 75B0FB         3879                               mov           p3,#0fbh
17F5 30B7F4         3880                              jnb            p3.7,rlefcur
17F8 75B0F7         3881                              mov            p3,#0f7h
17FB 20B7EB         3882                              jb             p3.7,dgoto7
17FE 7635           3883                              mov            @r0,#35h
1800 78B2           3884                              mov            r0,#marker
1802 76FF           3885                              mov            @r0,#0ffh
                    3886                              ;T1<-число на индикаторе
                    3887                                               ;vvod КОН БЛ 000
1804 78CF           3888                              mov            r0,#chbuf               ;счетчик периода загрузки в
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    62

                              буфер и интерфейс
1806 7630           3889                              mov            @r0,#30h  
1808 C20B           3890                              clr            bitmem
180A D204           3891                              setb           bitizm;;;;      
180C 020000   F     3892                             jmp        goto7
180F 020000   F     3893     vodm11_15:                      jmp             vvodm11_15
1812 020000   F     3894     me11_15de:                      jmp             me11_15dec
1815 020000   F     3895     moutkmem:                               jmp             outkmem
                    3896     
1818 020000   F     3897     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3898     ;обработка кнопки меню ввод
181B 301138         3899     labelS:         jnb                     bitmenu,labelP
181E 75B0EF         3900                                             mov                     p3,#0efh
1821 30B7F4         3901                                             jnb                     p3.7,nmem_menu
1824 75B0DF         3902                                             mov                     p3,#0dfh
1827 30B7EB         3903                                             jnb                     p3.7,moutkmem
182A 78B1           3904                                             mov                     r0,#vichR
182C 7415           3905                                             mov                     a,#15h
182E C3             3906                                             clr                     c
182F 96             3907                                             subb            a,@r0
1830 4021           3908                                             jc                      rme21_23
                    3909                             
1832 75B0FB         3910                                             mov                     p3,#0fbh
1835 20B7D7         3911                                             jb                      p3.7,vodm11_15
1838 78B1           3912                                             mov                     r0,#vichR
183A B611D5         3913                                             cjne                    @r0,#11h,me11_15de;<-
183D 7615           3914                                             mov                     @r0,#15h
183F 900000   F     3915                                             mov                     dptr,#teKALIB
1842 120000   F     3916                                             call            lotext
1845 020000   F     3917                                             jmp                     onmem11
1848 C211           3918     menuon:         clr             bitmenu                 ;off menu
184A D204           3919                                             setb    bitizm
                    3920     
184C 78B1           3921                                     mov             r0,#vichR
184E 7600           3922                                     mov             @r0,#0
1850 020000   F     3923                                     jmp             onmem11
                    3924     
                    3925                                             ;;;;;
                    3926             
1853 020000   F     3927     rme21_23:               jmp             me21_23 
                    3928                             
                    3929     ;режим просмотра
1856 B64130         3930     labelP:                 cjne            @r0,#41h,govvlist
1859 7642           3931                                                     mov                     @r0,#42h
                    3932                                                     ;       считать с индикатора  
185B C3             3933                                             clr                     c
185C E547           3934                                mov          a,bufind+7      
185E 9430           3935                                      subb           a,#30h
1860 B40002         3936                                      cjne           a,#0,chaipr
1863 7401           3937                                      mov            a,#1
1865 F538           3938     chaipr:                          mov            nblok,a
1867 900000   F     3939                                mov          dptr,#teCH;ОТСЧЕТ 000
186A 120000   F     3940                                call         lotext
186D 534BEF         3941                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1870 78B2           3942                                mov          r0,#marker
1872 7607           3943                                mov          @r0,#7
1874 753B09         3944                                mov          movrig,#9
1877 753A07         3945                                mov          movleft,#7
187A 120000   F     3946                                             call            z_1s
187D 020000   F     3947                        jmp     goto7;outF
1880 020000   F     3948     label43:                jmp             label7
                    3949     
1883 020000   F     3950     rlist_43:                       jmp                     list_43                            
                                  
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    63

1886 020000   F     3951     mlabL2r:                        jmp                     mlabL2
1889 B642F7         3952     govvlist:                       cjne            @r0,#42h,rlist_43
188C 75B0FB         3953                                                                     mov                     p3,
                             #0fbh
188F 30B7F4         3954                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1892 75B0F7         3955                                                             mov                     p3,#0f7h
1895 20B7E8         3956                                                             jb                      p3.7,label4
                             3
1898 7643           3957                                                             mov                     @r0,#43h;vv
                             od 
189A 78B2           3958                                                             mov                     r0,#marker
189C 76FF           3959                                                             mov                     @r0,#0ffh
189E 7F0A           3960                                                                     mov             r7,#10
18A0 7853           3961                                     mov             r0,#adec
18A2 120000   F     3962                                     call    clearN
18A5 120000   F     3963                                     call    upak3                   
18A8 784F           3964                                     mov             r0,#abin
18AA 7953           3965                                     mov             r1,#adec                        ;мл        
                              ст
18AC 120000   F     3966                                     call    decbin                  ;abin..abin+3 (hex)
18AF 120000   F     3967                                     call    loadr2                  ;r2..r5
18B2 ED             3968                                     mov             a,r5                            ;сохр номер
                              лемента
18B3 F537           3969                                     mov             nelem,a
18B5 120402         3970                                     call    altof                   ;r2..r5->int
18B8 900000   F     3971                                     mov             dptr,#ch_1;
18BB 120000   F     3972                                     call    ldc_ltemp                       ;r8..r11
18BE 1201D1         3973                                     call    flsub
18C1 900000   F     3974                                     mov             dptr,#ch_4;
18C4 120000   F     3975                                     call    ldc_ltemp                       ;r8..r11
18C7 120203         3976                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
18CA 120343         3977                                     call            ftol                    ;r2..r5->hex
18CD C002           3978                                     push            rr2
18CF C003           3979                                     push            rr3
18D1 C004           3980                                     push            rr4
18D3 C005           3981                                     push            rr5
18D5 120000   F     3982                                     call            adrblok;dptr-
18D8 D005           3983                                     pop                     rr5
18DA D004           3984                                     pop                     rr4
18DC D003           3985                                     pop                     rr3
18DE D002           3986                                     pop                     rr2
18E0 79D8           3987                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
18E2 E582           3988                                     mov                     a,dpl
18E4 2D             3989                                     add                     a,r5
18E5 F582           3990                                     mov                     dpl,a
18E7 F7             3991                                     mov                     @r1,a           ;low
18E8 E583           3992                                     mov                     a,dph
18EA 3C             3993                                     addc            a,r4
18EB F583           3994                                     mov                     dph,a
18ED 19             3995                                     dec                     r1
18EE F7             3996                                     mov                     @r1,a                   ;high
                    3997                             
18EF                3998     li42_43:
18EF 120000   F     3999                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
18F2 900000   F     4000                                     mov             dptr,#ch10;
18F5 120000   F     4001                                     call    ldc_ltemp
18F8 120000   F     4002                                     call    zdiv    
                    4003                                     ;;;;;;;;;;;
18FB 120000   F     4004                                     call    maform
                    4005                                     ;;;;
                    4006     
                    4007                                     ;;;;;;;
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    64

18FE 784F           4008                                             mov             r0,#abin
1900 120000   F     4009                                             call    saver2
1903 7853           4010                                             mov             r0,#adec
1905 7952           4011                                             mov             r1,#abin+3      ;hex->10
1907 120000   F     4012                                             call    bindec
                    4013                                     
190A 785C           4014                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
190C 7945           4015                                             mov             r1,#bufind+5
190E 7F07           4016                                             mov             r7,#7
1910 E6             4017     ch43:                           mov             a,@r0
1911 2430           4018                                             add             a,#30h
1913 F7             4019                                             mov             @r1,a
1914 19             4020                                             dec             r1
1915 18             4021                                             dec             r0
1916 DFF8           4022                                             djnz    r7,ch43
1918 7847           4023                                             mov             r0,#bufind+7
191A 762D           4024                                             mov             @r0,#2dh          ;-2..-9
191C 7840           4025                                             mov             r0,#bufind
191E 762B           4026                                             mov             @r0,#2bh
1920 300202         4027                                             jnb             znmat,nozzmi43;bitznak,nozzmi
1923 762D           4028                                             mov             @r0,#2dh
1925 E538           4029     nozzmi43:       mov             a,nblok
1927 B40104         4030                                             cjne    a,#1,nozzmi1            
192A 7934           4031                                             mov             r1,#sadiap;diap
192C 8010           4032                                             jmp             nozzbl
192E B40204         4033     nozzmi1:        cjne    a,#2,nozzmi2            
1931 7932           4034                                             mov             r1,#sadiap2;diap
1933 8009           4035                                             jmp             nozzbl
1935 B40304         4036     nozzmi2:        cjne    a,#3,nozzmi3            
1938 7931           4037                                             mov             r1,#sadiap3;diap
193A 8002           4038                                             jmp             nozzbl
193C 7930           4039     nozzmi3:        mov             r1,#sadiap4;diap
                    4040                                     
193E 7848           4041     nozzbl:         mov             r0,#bufind+8
1940 E7             4042                                             mov             a,@r1
1941 B40808         4043                                             cjne    a,#8,nodi8_43
1944 7630           4044                                             mov             @r0,#30h                 ;10-10
1946 18             4045                                             dec             r0
1947 7663           4046                                             mov             @r0,#63h;31h
1949 08             4047                                             inc             r0
194A 800E           4048                                             jmp             see_l43
194C B40908         4049     nodi8_43:       cjne    a,#9,nodi9_43
                    4050                                     
194F 7631           4051                                             mov             @r0,#31h           ;10-11
1951 18             4052                                             dec             r0
1952 7663           4053                                             mov             @r0,#63h;31h
                    4054                                     
1954 08             4055                                             inc             r0
1955 8003           4056                                             jmp             see_l43
1957 2432           4057     nodi9_43:               add             a,#32h
1959 F6             4058                                             mov             @r0,a;
195A 08             4059     see_l43:                        inc             r0
195B 7641           4060                                             mov             @r0,#"A";"E";
                    4061                             ;       inc             r0
                    4062                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    4063                             ;       inc             r0;             mov             bufind+11
                    4064                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
195D 434B10         4065                             orl                     bufind+11,#10h
1960 120000   F     4066     out43:          call            ind
1963 120000   F     4067                                             call            z_1s
1966 020000   F     4068                                             jmp             out7                               
                                  
                    4069     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    65

                    4070                                     ;;;;;;;;        
1969 783D           4071     label7: mov             r0,#chkl
196B 7603           4072                                     mov             @r0,#3
196D 08             4073                                     inc             r0
196E 76E8           4074                                     mov             @r0,#0e8h               ;1000
1970 020000   F     4075                                     jmp             out7;
1973 B64352         4076     list_43:                cjne    @r0,#43h,noli_43
1976 75B0FB         4077                                                     mov             p3,#0fbh                ;43
                             h <-
1979 20B70B         4078                                                     jb              p3.7,vvod43             ;vv
                             od
197C C20B           4079                                                     clr             bitmem
197E D204           4080                                                     setb    bitizm
1980 78B2           4081                                                     mov             r0,#marker
1982 76FF           4082                                                     mov             @r0,#0ffh
1984 020000   F     4083                                                     jmp             goto7;6.03.07;label7;по кн 
                             <- выход из просмотра
                    4084     
1987 7644           4085     vvod43:                 mov             @r0,#44h
1989 E537           4086                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
198B 04             4087                                                     inc             a
198C F552           4088                                                     mov             abin+3,a
                    4089                                                     
198E F537           4090                                                     mov             nelem,a
1990 E4             4091                                                     clr             a
1991 F551           4092                                                     mov             abin+2,a
1993 F550           4093                                                     mov             abin+1,a
1995 F54F           4094                                                     mov             abin,a
                    4095                                             
1997 7853           4096                                             mov             r0,#adec
1999 7952           4097                                             mov             r1,#abin+3      ;hex->10
199B 120000   F     4098                                             call    bindec
199E 7840           4099                                             mov             r0,#bufind;почистить индикатор
19A0 7F0A           4100                                             mov             r7,#10
19A2 7420           4101                                             mov             a,#20h
19A4 F6             4102     cle20:          mov             @r0,a
19A5 08             4103                                             inc             r0
19A6 DFFC           4104                                             djnz    r7,cle20
                    4105                                             ;;;;;;
19A8 900000   F     4106                                             mov             dptr,#teCH;ОТСЧЕТ 000
19AB 120000   F     4107                                call         lotext
19AE 534BEF         4108                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
19B1 785C           4109                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
19B3 7949           4110                                             mov             r1,#bufind+9
19B5 7F03           4111                                             mov             r7,#3
19B7 E6             4112     ch43_42:                                mov             a,@r0
19B8 2430           4113                                             add             a,#30h
19BA F7             4114                                             mov             @r1,a
19BB 19             4115                                             dec             r1
19BC 18             4116                                             dec             r0
19BD DFF8           4117                                             djnz    r7,ch43_42
19BF 120000   F     4118                                             call            ind
19C2 120000   F     4119                                             call            z_1s
19C5 020000   F     4120                                             jmp             out7
19C8 B64419         4121     noli_43:        cjne            @r0,#44h,vvosta
19CB 7643           4122                                             mov                     @r0,#43h
19CD 79D8           4123                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
19CF E7             4124                                                     mov                     a,@r1
19D0 F582           4125                                                     mov                     dpl,a
19D2 19             4126                                                     dec                     r1
19D3 E7             4127                                                     mov                     a,@r1;high
19D4 F583           4128                                                     mov                     dph,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    66

19D6 A3             4129                                                     inc                     dptr
19D7 A3             4130                                                     inc                     dptr
19D8 A3             4131                                                     inc                     dptr
19D9 A3             4132                                                     inc                     dptr
19DA E583           4133                                                     mov                     a,dph
19DC F7             4134                                                     mov                     @r1,a
19DD 09             4135                                                     inc                     r1
19DE E582           4136                                                     mov                     a,dpl
19E0 F7             4137                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
19E1 020000   F     4138                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    4139     
19E4 B66111         4140     vvosta:                 cjne            @r0,#61h,vvostad
19E7 7662           4141                                                     mov                     @r0,#62h
19E9 900000   F     4142                                                     mov                     dptr,#teMAX;
19EC 120000   F     4143                                                     call            lotext
19EF 120000   F     4144                                                     call            vichmax
19F2 120000   F     4145                                                     call            z_05s;z_1s
19F5 020000   F     4146                                                     jmp             goto7
                    4147     
19F8 B66211         4148     vvostad:                cjne            @r0,#62h,rousta
19FB 7663           4149                                                     mov                     @r0,#63h
19FD 900000   F     4150                                                     mov             dptr,#teMid;
1A00 120000   F     4151                                                     call    lotext
1A03 120000   F     4152                                                     call            vichmean
1A06 120000   F     4153                                                     call            z_05s
1A09 020000   F     4154                                                     jmp             goto7
                    4155     
1A0C B6630E         4156     rousta:                 cjne            @r0,#63h,rousta1
1A0F 7661           4157                                                     mov                     @r0,#61h
1A11 900000   F     4158                                                     mov             dptr,#teMin;
1A14 120000   F     4159                                                     call    lotext
1A17 120000   F     4160                                                     call            vichmin
1A1A 120000   F     4161                                                     call            z_05s
1A1D 020000   F     4162     rousta1:                jmp             goto7
                    4163     
1A20 020000   F     4164     rLABELP:                jmp                     LABELP
1A23 78B1           4165     vvodm11_15:     mov                     r0,#vichR;vvod
1A25 75B0F7         4166                                                     mov                     p3,#0f7h
1A28 20B7F5         4167                                             jb                      p3.7,rLABELP;????
                    4168                                     
                    4169     
1A2B B61115         4170                                             cjne                    @r0,#11h,tome21
1A2E 7621           4171                                             mov                     @r0,#21h;vvod
1A30 900000   F     4172                                             mov                     dptr,#teTE11
1A33 120000   F     4173                                             call            lotext
1A36 534B03         4174                                             anl                     bufind+11,#03h ;погасить за
                             пятые
1A39 020000   F     4175                                             jmp                     onmem11
                    4176     
1A3C 16             4177     me11_15dec:             dec             @r0                             ;<-
1A3D 120000   F     4178     lokame1:        call            lomenu
1A40 020000   F     4179                                             jmp                     onmem11
                    4180     
1A43 B61206         4181     tome21:         cjne                    @r0,#12h,tome13
                    4182                                             ;вкл тест интерфейса
1A46 020000   F     4183                                             jmp             testrs;??????????
1A49 020000   F     4184                                             jmp                     onmem11
                    4185     
1A4C B6132A         4186     tome13:         cjne                    @r0,#13h,tome14
1A4F 7631           4187                                             mov                     @r0,#31h
                    4188                                             
1A51 7A50           4189                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1A53 7B2C           4190                                             mov                     r3,#2ch
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    67

1A55 120454         4191                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1A58 E508           4192                                             mov                     a,r8
1A5A B4000E         4193                                             cjne            a,#00,skor19
1A5D 900000   F     4194                                             mov                     dptr,#teS57_6;57,6
1A60 120000   F     4195                                             call            lotext
1A63 434B80         4196                                     orl                     bufind+11,#80h
1A66 C213           4197                                             clr                     bitv19
                    4198     
1A68 020000   F     4199                                             jmp             onmem11
1A6B 900000   F     4200     skor19:         mov                     dptr,#teS19_2
1A6E 120000   F     4201                                             call            lotext
1A71 D213           4202                                             setb            bitv19
1A73 434B80         4203                                             orl                     bufind+11,#80h
1A76 020000   F     4204                                             jmp                     onmem11
                    4205                                             
                    4206     
1A79 B61415         4207     tome14:         cjne                    @r0,#14h,tome15
1A7C D204           4208                                             setb            bitizm
1A7E 7881           4209                                             mov                     r0,#chavt
1A80 7600           4210                                             mov                     @r0,#0
1A82 08             4211                                             inc                     r0
1A83 7600           4212                                             mov                     @r0,#0
1A85 C211           4213     outmenu:        clr                     bitmenu
1A87 020000   F     4214                                             jmp                     out7
                    4215     
1A8A 78B1           4216     goparom:        mov             r0,#vichR               ;режим меню 52
1A8C 7652           4217                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
1A8E 020000   F     4218                                             jmp                     goparol
1A91 3090F6         4219     tome15:         jnb                     p1.0,goparom
1A94 753936         4220                                             mov                     nuerr,#36h
1A97 120000   F     4221                                             call            error
1A9A 120000   F     4222                                             call            ind
1A9D 120000   F     4223                                             call            z_01s
1AA0 80EF           4224                                             jmp                     tome15; onmem11
                    4225     
1AA2 80E6           4226             jmp                     goparom;jb              bitpar,goparom  
1AA4 7651           4227                                             mov                     @r0,#51h;ПАРОЛЬ 000
1AA6 120000   F     4228                                             call            lomenu
1AA9 78B2           4229                                             mov                     r0,#marker
1AAB 7607           4230                                             mov                     @r0,#7
1AAD 753B09         4231                                             mov                     movrig,#9
1AB0 753A07         4232                                             mov                     movleft,#7
                    4233                                             ;setb           bitizm
1AB3 020000   F     4234                                             jmp                     onmem11
                    4235     
                    4236     
1AB6 78B1           4237     me21_23:        mov                     r0,#vichR               ;<-
1AB8 7423           4238                                             mov                     a,#23h
1ABA C3             4239                                             clr                     c
1ABB 96             4240                                             subb            a,@r0
1ABC 403D           4241                                             jc                      labelS1
1ABE 75B0FB         4242                                             mov                     p3,#0fbh
1AC1 20B718         4243                                             jb                      p3.7,vv21_23
1AC4 B6210B         4244                                             cjne            @r0,#21h,me21_23dec;-<
1AC7 7623           4245                                             mov                     @r0,#23h
1AC9 900000   F     4246                                             mov                     dptr,#teTE7
1ACC 120000   F     4247                                             call            lotext
1ACF 020000   F     4248                                             jmp                     onmem11
1AD2                4249     me21_23dec:     
1AD2 16             4250                                             dec                     @r0
1AD3 120000   F     4251                                             call            lomenu
1AD6 020000   F     4252                                             jmp                     onmem11
1AD9 020000   F     4253     onmem12:        jmp                     viout;  outF    ;(ie7)                          
                    4254                                                     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    68

1ADC 75B0F7         4255     vv21_23:        mov             p3,#0f7h                ;vvod
1ADF 20B7F7         4256                                             jb              p3.7,onmem12
1AE2 B6210C         4257                                             cjne            @r0,#21h,test22
                    4258                                             ;mov                    dptr,#tabt11;заслать ус 11А
1AE5 120000   F     4259     tests:          call            lotpus
1AE8 D215           4260                                             setb            biteizm;запомнить режим ТИ
1AEA D204           4261                                             setb            bitizm
1AEC C211           4262                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1AEE 020000   F     4263                                             jmp                     goto7;onmem11
1AF1 B62202         4264     test22:         cjne            @r0,#22h,test23
                    4265                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1AF4 80EF           4266                                             jmp             tests   
1AF6                4267     test23:
                    4268                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1AF6 80ED           4269                                             jmp             tests   
1AF8 020000   F     4270     left_s:         jmp                     left_sk
1AFB B63175         4271     labelS1:        cjne            @r0,#31h,me_41
1AFE 75B0FB         4272                                             mov                     p3,#0fbh                   
                                  ;<-
1B01 30B7F4         4273                                             jnb                     p3.7,left_s
1B04 75B0F7         4274                                             mov                     p3,#0f7h
1B07 20B7CF         4275                                             jb                      p3.7,onmem12
                    4276                                             ;запомнить признак установленной скорости в рпзу
                    4277     
                    4278     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4279     ;и запись во внешнее озу(0000h)
1B0A 7900           4280                                             mov             r1,#0                   ;
1B0C 7A50           4281                                     mov             r2,#50h
1B0E 7B00           4282                                     mov             r3,#00
1B10 120499         4283                                     call    copyPP
                    4284                                     ;внести изменения во внешн озу
                    4285                                     ;KD=00 01 86 A0 (KD=1)
                    4286                                     ;кофф *100000 и переведенный в hex формат
                    4287                                     ;согласно адресов диапазонов и адресов яч вн озу 
1B13 792C           4288                                     mov             r1,#2ch
1B15 7400           4289                                     mov             a,#0;57,6
1B17 301302         4290                                     jnb             bitv19,spwri
1B1A 7401           4291                                     mov             a,#1;19.6
1B1C F3             4292     spwri:  movx    @r1,a
                    4293     ;стереть страницу пап прогр 
1B1D 905000         4294                                     mov             dptr,#5000h
1B20 7FFF           4295                                     mov             r7,#0ffh
1B22 12043E         4296                                     call    cle256
                    4297     ;и запись в ячейки кофф памяти прогр (3000h) 
1B25 7FFF           4298                                     mov             r7,#0ffh
1B27 7900           4299                                     mov             r1,#0                           ;external r
                             am
1B29 905000         4300                                     mov             dptr,#5000h
1B2C 120480         4301                                     call    wrpage
                    4302             
1B2F 201305         4303                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1B32 758DF4         4304                                             mov                     TH1,#244                ;57
                             .6
1B35 8003           4305                                             jmp                     outsko
1B37 758DDC         4306     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1B3A C211           4307     outsko:         clr             bitmenu
1B3C D204           4308                                             setb            bitizm
1B3E 020000   F     4309                                             jmp                     out7
                    4310     
1B41 020000   F     4311     rlabels4:               jmp             labels4
1B44 020000   F     4312     rlabelS13:      jmp             labelS13
                    4313     
1B47 B652F7         4314     me_52:          cjne            @r0,#52h,rlabels4
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    69

1B4A 75B0FB         4315                                             mov                     p3,#0fbh;<-
1B4D 20B717         4316                                             jb                      p3.7,vv_52v     ;ввод в кал
                             ибровке
1B50 78B2           4317                                                     mov             r0,#marker              ;сд
                             виг маркера влево при калибр
1B52 7440           4318                                     mov             a,#bufind
1B54 26             4319                                             add             a,@r0                   ;a=bufind+m
                             arker
1B55 F9             4320                                             mov             r1,a
1B56 19             4321                                             dec             r1;inc          r1
1B57 873C           4322                                             mov             savba,@r1
                    4323                                                     
1B59 78B2           4324                                             mov             r0,#marker
1B5B 16             4325                                             dec             @r0                             
1B5C C219           4326                                             clr             bitmig
1B5E E53A           4327                                             mov                     a,movleft
1B60 B60001         4328                                             cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр ка
                             либровки
1B63 06             4329                                             inc                     @r0
1B64 020000   F     4330     me_52v:         jmp                     goto7
                    4331     
1B67 75B0F7         4332     vv_52v:         mov             p3,#0f7h
1B6A 30B703         4333                                             jnb             p3.7,rvvkali52
1B6D 020000   F     4334                                             jmp                     goto7
1B70 020000   F     4335     rvvkali52:      jmp             vvkali52
                    4336     
                    4337     
1B73 B651D1         4338     me_41:          cjne            @r0,#51h,me_52;rlabels4
1B76 75B0FB         4339                                             mov             p3,#0fbh;<-
1B79 30B7C8         4340                                             jnb             p3.7,rlabelS13
1B7C 75B0F7         4341                                             mov             p3,#0f7h
1B7F 20B773         4342                                             jb              p3.7,vvmenu
                    4343                                             ;ввод пароля
                    4344                                     
                    4345     ;       считать с индикатора 
1B82 7F0E           4346                                     mov             r7,#14
1B84 784F           4347                                     mov             r0,#abin
1B86 120000   F     4348                                     call    clearN                  
                    4349                                     
                    4350     ;чтение номера байта с индикатора(3байта)
                    4351     ;bufind+3..bufind+9
                    4352     ;-  - - -
                    4353     ;- - - - - - - - - -
                    4354     ;adec..adec+9
                    4355     ;ст            мл
1B89 7849           4356                                     mov             r0,#bufind+9;
1B8B 795C           4357                                     mov             r1,#adec+9
1B8D 7F03           4358                                     mov             r7,#3;3bait
1B8F C3             4359     upav1:          clr             c
1B90 E6             4360                                     mov             a,@r0
1B91 9430           4361                                     subb    a,#30h
1B93 F7             4362                                     mov             @r1,a
1B94 18             4363                                     dec             r0
1B95 19             4364                                     dec             r1
1B96 DFF7           4365                                     djnz    r7,upav1;adec+7..adec+9
1B98 7A50           4366                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1B9A 7B28           4367                                             mov                     r3,#28h
1B9C 120454         4368                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1B9F 800F           4369     jmp                     goparol
1BA1 E508           4370                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1BA3 B55A52         4371                                     cjne            a,adec+7,parerr
1BA6 E509           4372                                     mov                     a,r9    
1BA8 B55B4D         4373                                     cjne            a,adec+8,parerr
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    70

1BAB E50A           4374                                     mov                     a,r10
1BAD B55C48         4375                                     cjne            a,adec+9,parerr
                    4376                                     ;равны
1BB0 78B1           4377     goparol:        mov             r0,#vichR               ;режим меню 52
1BB2 7652           4378                                             mov             @r0,#52h                ;0000-n
1BB4 900000   F     4379                                             mov             dptr,#teKD;00000-nA
1BB7 120000   F     4380                                             call            lotext
                    4381                                             ;;;;;;;;;
                    4382                                                     ;n(hex)->abin
1BBA 120000   F     4383                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1BBD 2552           4384                                             add             a,abin+3
1BBF F552           4385                                             mov             abin+3,a
1BC1 7853           4386                                             mov             r0,#adec
1BC3 7952           4387                                             mov             r1,#abin+3      ;hex->10
1BC5 120000   F     4388                                             call    bindec
1BC8 855C48         4389                                             mov             bufind+8,adec+9
1BCB 75472D         4390                                             mov             bufind+7,#2dh
1BCE 434A80         4391                                             orl                     bufind+10,#80h;зажечь KMП
1BD1 434B10         4392                                             orl                     bufind+11,#10h;точка после 
                             1 знакоместа
1BD4 79AE           4393                                             mov             r1,#diap
1BD6 7848           4394                                             mov             r0,#bufind+8
1BD8 E7             4395                                             mov             a,@r1
1BD9 B40807         4396                                             cjne    a,#8,nodi8k
1BDC 7630           4397                                             mov             @r0,#30h                 ;10-10
1BDE 18             4398                                             dec             r0
1BDF 7663           4399                                             mov             @r0,#63h;31h
1BE1 8008           4400                                             jmp             nodisk9
1BE3 B40905         4401     nodi8k:                         cjne    a,#9,nodisk9
                    4402                                     
1BE6 7631           4403                                             mov             @r0,#31h           ;10-11
1BE8 18             4404                                             dec             r0
1BE9 7663           4405                                             mov             @r0,#63h;31h
                    4406                                     
                    4407     
1BEB 78B2           4408     nodisk9:        mov                     r0,#marker
1BED 7601           4409                                             mov                     @r0,#1
1BEF 753A01         4410                                             mov                     movleft,#1
1BF2 753B05         4411                                             mov                     movrig,#5
                    4412                                             
1BF5 020000   F     4413     vvmenu:         jmp             goto7
                    4414     
1BF8 753932         4415     parerr:         mov                     nuerr,#32h
1BFB 120000   F     4416                                             call            error
1BFE 120000   F     4417                                             call            ind
1C01 120000   F     4418                                             call            z_1s
1C04 C211           4419                                             clr                     bitmenu
1C06 D204           4420                                             setb            bitizm
1C08 78B2           4421                                             mov                     r0,#marker
1C0A 76FF           4422                                             mov                     @r0,#0ffh
1C0C 020000   F     4423                                             jmp             goto7
                    4424     
1C0F 30130E         4425     left_sk:                jnb                     bitv19,tosk19;<-
1C12 900000   F     4426                                             mov                     dptr,#teS57_6;57,6
1C15 120000   F     4427                                             call            lotext
1C18 434B80         4428                                             orl                     bufind+11,#80h
1C1B C213           4429                                             clr                     bitv19
1C1D 020000   F     4430                                             jmp                     onmem11;goto7
1C20 900000   F     4431     tosk19:         mov                     dptr,#teS19_2
1C23 120000   F     4432                                             call            lotext
1C26 434B80         4433                                             orl                     bufind+11,#80h
1C29 D213           4434                                             setb            bitv19
1C2B 020000   F     4435                                             jmp                     onmem11;goto7
                    4436     
1C2E                4437     labelS13:;<- MENU(ПАРОЛЬ 000)
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    71

                    4438             
                    4439     ;;;;;;;;;;;;;;;;;;
                    4440     ;необходимо не портить цифру в следуюем слева знакоместе
                    4441     ;т е сохранить ее в ячейке для мигания в противном случае
                    4442     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4443     ;       знакоместа
1C2E 78B2           4444                                     mov             r0,#marker
1C30 7440           4445                                     mov             a,#bufind
1C32 26             4446                                             add             a,@r0                   ;a=bufind+m
                             arker
1C33 F9             4447                                             mov             r1,a
1C34 19             4448                                             dec             r1;inc          r1
1C35 873C           4449                                             mov             savba,@r1
                    4450                                                     
1C37 78B2           4451                                                     mov             r0,#marker
1C39 16             4452                                                     dec             @r0                        
                                  
1C3A C219           4453                                     clr             bitmig
1C3C E53A           4454                                     mov                     a,movleft
1C3E B60652         4455                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1C41 06             4456                                     inc             @r0
1C42 020000   F     4457                                             jmp             goto7
                    4458     ;;;;;;;
                    4459     
1C45                4460     vvkali52:       ;введено значение для калибровки
                    4461                                             ;число на индикаторе ->Ak  (52h)
                    4462                                             ;       считать с индикатора 
1C45 7F0E           4463                                     mov             r7,#14
1C47 784F           4464                                     mov             r0,#abin
1C49 120000   F     4465                                     call    clearN                  
                    4466                                     
                    4467     ;чтение номера байта с индикатора(3байта)
                    4468     ;bufind+1..bufind+5
                    4469     ;-  - - -
                    4470     ;- - - - - - - - - -
                    4471     ;adec..adec+9
                    4472     ;ст            мл
1C4C 7845           4473                                     mov             r0,#bufind+5;
1C4E 795C           4474                                     mov             r1,#adec+9
1C50 7F05           4475                                     mov             r7,#5;5bait
1C52 C3             4476     upav2:          clr             c
1C53 E6             4477                                     mov             a,@r0
1C54 9430           4478                                     subb    a,#30h
1C56 F7             4479                                     mov             @r1,a
1C57 18             4480                                     dec             r0
1C58 19             4481                                     dec             r1
1C59 DFF7           4482                                     djnz    r7,upav2;adec+7..adec+9
                    4483     
1C5B 784F           4484                                     mov             r0,#abin
1C5D 7953           4485                                     mov             r1,#adec                        ;мл        
                              ст
1C5F 120000   F     4486                                     call    decbin                  ;abin..abin+3 (hex)
1C62 120000   F     4487                                     call    loadr2                  ;r2..r5
1C65 120402         4488                                     call    altof   ;r2..r5->float
1C68 900000   F     4489                                     mov     dptr,#ch_10;10
1C6B 120000   F     4490                                     call    ldc_ltemp                       ;r8..r11=8
1C6E 120203         4491                                     call    flmul
1C71 78A4           4492                                     mov             r0,#rez_Ak
1C73 120000   F     4493                                     call    saver2
1C76 C211           4494                                             clr                     bitmenu
1C78 D212           4495                                             setb            bitklb
1C7A 434A80         4496                                             orl                     bufind+10,#80h;зажечь KMП
1C7D D204           4497                                             setb            bitizm;бит калибровки уже установле
                             н
1C7F 78B2           4498                                             mov                     r0,#marker
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    72

1C81 76FF           4499                                             mov                     @r0,#0ffh
1C83 783D           4500                                     mov             r0,#chkl
1C85 76FF           4501                                     mov             @r0,#0ffh
1C87 08             4502                                     inc             r0
1C88 76FF           4503                                     mov             @r0,#0ffh;38h
1C8A 120000   F     4504                                     call            z_1s
1C8D 020000   F     4505                                     jmp             out7
                    4506     
                    4507     
1C90 020000   F     4508                                             jmp             goto7
                    4509                                              
1C93 020000   F     4510     onmem13:        jmp             goto7   ;(ie7)
                    4511     
1C96 B642AC         4512     labels4:        cjne            @r0,#42h,vvkali52
1C99 75B0FB         4513                                             mov                     p3,#0fbh;<-
1C9C 30B7F4         4514                                             jnb             p3.7,onmem13
1C9F 75B0F7         4515                                             mov             p3,#0f7h;vvod
1CA2 20B7EE         4516                                             jb              p3.7,onmem13
                    4517                                             
                    4518             
1CA5 020000   F     4519     jmp             out7                                                    
                    4520     ;;;;;;;
1CA8                4521     labelI:
1CA8 75B0FE         4522                                     mov             p3,#0feh
1CAB E5B0           4523                                     mov             a,p3
1CAD 20E703         4524                                     jb              acc.7,nopoint
                    4525                                     ;
1CB0 020000   F     4526                                     jmp             goto7;out7
                    4527     
1CB3 75B0FB         4528     nopoint:                mov             p3,#0fbh
1CB6 E5B0           4529                                     mov             a,p3
1CB8 20E72C         4530                                     jb              acc.7,nopoin7
1CBB 78B2           4531     labelS3:mov             r0,#marker
1CBD E53A           4532                                     mov             a,movleft
1CBF B40309         4533                                     cjne    a,#3,poina1
1CC2 B6030B         4534                                     cjne    @r0,#3,nomarl;26
                    4535                                     ;mov            @r0,#9
1CC5 E53B           4536     poina2: mov                     a,movrig                ;кн <- B=+00000
1CC7 F6             4537                                     mov                     @r0,a
1CC8 020000   F     4538                                     jmp             goto7;  out7
                    4539     
1CCB B60402         4540     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1CCE 80F5           4541                                             jmp             poina2
                    4542     
                    4543     
1CD0                4544     nomarl:                 ;                               29.12.06
                    4545     ;;;;;;;;;;;;;;;;;;
                    4546     ;необходимо не портить цифру в следуюем справа знакоместе
                    4547     ;т е сохранить ее в ячейке для мигания в противном случае
                    4548     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4549     ;       знакоместа
1CD0 78B2           4550                                     mov             r0,#marker
1CD2 7440           4551                                     mov             a,#bufind
1CD4 26             4552                                             add             a,@r0                   ;a=bufind+m
                             arker
1CD5 F9             4553                                             mov             r1,a
1CD6 09             4554                                             inc             r1
1CD7 873C           4555                                             mov             savba,@r1
                    4556                                                     
1CD9 78B2           4557                                                     mov             r0,#marker
1CDB 16             4558                                                     dec             @r0                        
                                  
1CDC C219           4559                                     clr             bitmig
1CDE E53A           4560                                     mov                     a,movleft
1CE0 B4036B         4561                                     cjne            a,#3,poinA
1CE3 B60266         4562                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    73

                             0000
1CE6 06             4563     poin3:  inc             @r0
                    4564     ;нажат ввод А =000000 запомнить константу А
1CE7 75B0F7         4565     nopoin7:           mov          p3,#0f7h
1CEA E5B0           4566                                     mov             a,p3
1CEC 20E75D         4567                                     jb              acc.7,gogo7;out7
1CEF 78B1           4568                                     mov             r0,#vichR
1CF1 E6             4569                                     mov             a,@r0
1CF2 B6215E         4570                                     cjne    @r0,#21h,no21p7
1CF5 7611           4571                                     mov             @r0,#11h
                    4572                             ;       считать с индикатора  упаковать в плавающий формат
                    4573                             ;   сохранить
1CF7 7F0E           4574                                     mov             r7,#14
1CF9 784F           4575                                     mov             r0,#abin
1CFB 120000   F     4576                                     call    clearN                  
1CFE 120000   F     4577                                     call    upakA
                    4578                                     
1D01 784F           4579                                     mov             r0,#abin
1D03 7953           4580                                     mov             r1,#adec                        ;мл        
                              ст
1D05 120000   F     4581                                     call    decbin                  ;abin..abin+3 (hex)
1D08 120000   F     4582                                     call    loadr2                  ;r2..r5
1D0B 120402         4583                                     call    altof                   ;r2..r5->float
1D0E 78BC           4584                                     mov                     r0,#konstA
1D10 120000   F     4585                                     call            saver2
1D13 900000   F     4586                                     mov                     dptr,#ch0
1D16 120000   F     4587                                     call            ldc_ltemp
1D19 1201D6         4588                                     call            flcmp
1D1C 6010           4589                                     jz              erra0
                    4590     ;26
1D1E 78B2           4591                                     mov             r0,#marker
1D20 76FF           4592                                     mov             @r0,#0ffh
                    4593                                     
1D22 900000   F     4594                                     mov             dptr,#teVICH;teBequ0
1D25 120000   F     4595                                     call    lotext
                    4596                             ;       call            outB
1D28 534BBF         4597                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4598                             ;       orl             bufind+11,#80h
1D2B 020000   F     4599                                     jmp             goto7
                    4600     
1D2E 78B2           4601     erra0:          mov             r0,#marker
1D30 76FF           4602                                             mov             @r0,#0ffh
1D32 753934         4603                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
1D35 120000   F     4604                                             call            error
1D38 120000   F     4605                                             call            ind
1D3B 120000   F     4606                                             call            z_1s
1D3E 78B1           4607                                             mov                     r0,#vichR
1D40 7600           4608                                             mov                     @r0,#0
1D42 C214           4609                                             clr                     bitvich
1D44 C206           4610                                             clr                     bitvi11
1D46 D204           4611                                             setb            bitizm
1D48 78B2           4612                                             mov                     r0,#marker
1D4A 76FF           4613                                             mov                     @r0,#0ffh
1D4C 802E           4614     gogo7:          jmp                     out7;goto7
                    4615     
1D4E B6032B         4616     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1D51 8093           4617                                             jmp             poin3
                    4618     
1D53                4619     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4620                             ;   сохранить
1D53 7F0E           4621                                     mov             r7,#14
1D55 784F           4622                                     mov             r0,#abin
1D57 120000   F     4623                                     call    clearN                  
1D5A 120000   F     4624                                     call    upakB                   
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    74

1D5D 784F           4625                                     mov             r0,#abin
1D5F 7953           4626                                     mov             r1,#adec                        ;мл        
                              ст
1D61 120000   F     4627                                     call    decbin                  ;abin..abin+3 (hex)
1D64 120000   F     4628                                     call    loadr2                  ;r2..r5
1D67 120402         4629                                     call    altof                   ;r2..r5->int
1D6A 301B04         4630                                     jnb             bitznB,pozB
1D6D EA             4631                                     mov             a,r2
1D6E 4480           4632                                     orl             a,#80h
1D70 FA             4633                                     mov             r2,a                    ;знак-
1D71                4634     pozB:           ;mov            r0,#konstB
                    4635                                     ;call   saver2
                    4636     
1D71 79B2           4637                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1D73 77FF           4638                                     mov             @r1,#0ffh
1D75 78B1           4639                                     mov             r0,#vichR
1D77 7611           4640                                     mov             @r0,#11h
1D79 020000   F     4641                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4642                                     
                    4643     
1D7C                4644     out7:                   ;mov            IE,#80h
1D7C D083           4645                                     pop             dph
1D7E D082           4646                                     pop             dpl
1D80 D007           4647                                     pop             rr7     
1D82 D006           4648                                     pop             rr6
1D84 D005           4649                                     pop             rr5
1D86 D004           4650                                     pop             rr4
1D88 D003           4651                                     pop             rr3
1D8A D002           4652                                     pop             rr2
1D8C D001           4653                                     pop             rr1                             
1D8E D000           4654                                     pop             rr0
1D90 D0D0           4655                                     pop             psw
1D92 D0E0           4656                                     pop             acc
1D94 75AD00         4657                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1D97 75B0C0         4658                             mov             P3,#0c0h
                    4659                             ;       mov             EIE2,#30H
1D9A C219           4660     clr             bitmig
1D9C E586           4661                                             mov             a,P6            ;p6.4=0
1D9E 54EF           4662                             anl             a,#0efh
1DA0 F586           4663                             mov             P6,a
1DA2 00             4664                             nop
1DA3 00             4665                             nop
                    4666                                     
1DA4 E586           4667                             mov             a,P6                    ;p6.4=1 
1DA6 4410           4668                             orl             a,#10h
1DA8 F586           4669                             mov             P6,a
                    4670                             ;;;;;;;;;
1DAA E5DA           4671                             mov             a,PCA0CPM0;             TOG0
1DAC 4446           4672                             orl             a,#46h;anl              a,#0fbh
1DAE F5DA           4673                             mov             PCA0CPM0,a
                    4674     
1DB0 75CDD0         4675                             mov             TH2,#0d0h
1DB3 75CC00         4676                             mov             TL2,#00
                    4677     
1DB6 D2CA           4678                             setb            T2CON.2
1DB8 D2AD           4679                             setb            ET2;IE.5
                    4680                                                         
1DBA 32             4681                                     reti
                    4682     
                    4683     
                    4684                                     
                    4685     
                    4686     
1DBB 78B1           4687     lomenu:         mov             r0,#vichR
1DBD B61107         4688                                             cjne    @r0,#11h,menu12
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    75

1DC0 900000   F     4689                                             mov             dptr,#teTESI
1DC3 120000   F     4690     lome1:                  call    lotexT
1DC6 22             4691                                             ret
1DC7 B61205         4692     menu12:         cjne    @r0,#12h,menu13
1DCA 900000   F     4693                                             mov             dptr,#teTESR
1DCD 80F4           4694                                             jmp             lome1
1DCF B61305         4695     menu13:         cjne    @r0,#13h,menu14
1DD2 900000   F     4696                                             mov             dptr,#teSKOR
1DD5 80EC           4697                                             jmp             lome1
1DD7 B61405         4698     menu14:         cjne    @r0,#14h,menu15
1DDA 900000   F     4699                                             mov             dptr,#teAVK
1DDD 80E4           4700                                             jmp             lome1
1DDF B61505         4701     menu15:                 cjne    @r0,#15h,menu21
1DE2 900000   F     4702                                             mov             dptr,#teKALIB
1DE5 80DC           4703                                             jmp             lome1
                    4704     
1DE7 B62105         4705     menu21: cjne    @r0,#21h,menu22
1DEA 900000   F     4706                                             mov             dptr,#teTE11
1DED 80D4           4707                                             jmp             lome1
1DEF B62205         4708     menu22:         cjne    @r0,#22h,menu23
1DF2 900000   F     4709                                             mov             dptr,#teTE9
1DF5 80CC           4710                                             jmp             lome1
1DF7 B62305         4711     menu23:         cjne    @r0,#23h,menu31
1DFA 900000   F     4712                                             mov             dptr,#teTE7
1DFD 80C4           4713                                             jmp             lome1
1DFF B63105         4714     menu31:         cjne    @r0,#31h,menu41
1E02 900000   F     4715                                             mov             dptr,#teS57_6
1E05 80BC           4716                                             jmp             lome1
                    4717     
1E07                4718     menu41:         
1E07 900000   F     4719                                             mov             dptr,#tePAR
1E0A 80B7           4720                                             jmp             lome1
                    4721     
1E0C 020000   F     4722     yesvi_kr:               jmp                     yesvi_km
1E0F                4723     endkalib:;KD=Ak/A3
1E0F 200DFA         4724                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1E12 789C           4725                                             mov                     r0,#rez_A3
1E14 120000   F     4726                                             call            resar2
                    4727                                     
1E17 120402         4728                                     call    altof                   ;->float
1E1A EA             4729                                             mov                     a,r2
1E1B 547F           4730                                             anl                     a,#7fh
1E1D FA             4731                                             mov                     r2,a
1E1E 120000   F     4732                                     call            move28
1E21 78A4           4733                                             mov                     r0,#rez_Ak
1E23 120000   F     4734                                             call            resar2
1E26 1202B7         4735                                             call            fldiv
                    4736                                                     
1E29 900000   F     4737                                     mov     dptr,#CHtho;100000
1E2C 120000   F     4738                                     call    ldc_ltemp                       ;r8..r11=8
1E2F 120203         4739                                     call    flmul
1E32 120343         4740                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4741     
1E35 78A0           4742                                             mov                     r0,#koefKD
1E37 120000   F     4743                                             call            saver2
                    4744                                             ;запись в рпзу в соотв ячейку
                    4745                             
1E3A 7900           4746                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1E3C 7A50           4747                                     mov             r2,#50h
1E3E 7B00           4748                                     mov             r3,#00
1E40 120499         4749                                     call    copyPP
                    4750                                     ;внести изменения во внешн озу
1E43 120000   F     4751                                     call            findext                 ;r1-внешн озу
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    76

1E46 78A0           4752                                     mov                     r0,#koefKD
1E48 120000   F     4753                                             call            resar2
1E4B EA             4754                                             mov                     a,r2
1E4C F3             4755                                             movx            @r1,a
1E4D 09             4756                                             inc                     r1
1E4E EB             4757                                             mov                     a,r3
1E4F F3             4758                                             movx            @r1,a
1E50 09             4759                                             inc                     r1
1E51 EC             4760                                             mov                     a,r4
1E52 F3             4761                                             movx            @r1,a
1E53 09             4762                                             inc                     r1
1E54 ED             4763                                             mov                     a,r5
1E55 F3             4764                                             movx            @r1,a
                    4765                                     ;кофф *100000 и переведенный в hex формат
                    4766                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4767     ;стереть страницу пап прогр 
1E56 905000         4768                                     mov             dptr,#5000h
1E59 7FFF           4769                                     mov             r7,#0ffh
1E5B 12043E         4770                                     call    cle256
                    4771     ;и запись в ячейки кофф памяти прогр (3000h) 
1E5E 7FFF           4772                                     mov             r7,#0ffh
1E60 7900           4773                                     mov             r1,#0                           ;external r
                             am
1E62 905000         4774                                     mov             dptr,#5000h
1E65 120480         4775                                     call    wrpage
                    4776     ;2.2.07
1E68 79AE           4777                                     mov                     r1,#diap
1E6A B70511         4778                                     cjne            @r1,#5,fulkalib
                    4779                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1E6D D20D           4780                                     setb            bifl_kt
                    4781                                     ;call           loadus
1E6F 900000   F     4782                                     mov                     dptr,#tabt7;заслать ус 7А       
1E72 E4             4783                             clr             a
1E73 93             4784                             movc    a,@a+dptr                               ;high byte
1E74 F584           4785                             mov             p4,a
1E76 A3             4786                             inc             dptr
1E77 E4             4787                             clr             a
1E78 93             4788                             movc    a,@a+dptr                               ;low byte
1E79 F585           4789                             mov             p5,a
1E7B 020000   F     4790                                     jmp             goto7;  out_kali
                    4791     
                    4792     ;;;
1E7E                4793     fulkalib:
1E7E C212           4794                                             clr             bitklb
1E80 D216           4795                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1E82 900000   F     4796                                             mov             dptr,#teEND
1E85 120000   F     4797                                             call    lotext
1E88 120000   F     4798                                             call    ind
1E8B 120000   F     4799     out_kali:       call    z_1s
1E8E 120000   F     4800                                             call    z_1s
1E91 020000   F     4801                                             jmp             goto7
1E94                4802     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1E94 7A50           4803                                     mov                     r2,#50h                 ;-11a
1E96 7B14           4804                                     mov                     r3,#14h                 ;k7
1E98 12046C         4805                                     call            rebyte2                         ;r2..r5- he
                             x
1E9B 120402         4806                                     call            altof                   ;r2..r5->float
1E9E C002           4807                                     push            rr2
1EA0 C003           4808                                     push            rr3
1EA2 C004           4809                                     push            rr4
1EA4 C005           4810                                     push            rr5
1EA6 7A50           4811                                     mov                     r2,#50h                 ;k5
1EA8 7B0C           4812                                     mov                     r3,#0ch
1EAA 12046C         4813                             call            rebyte2                 ;r2..r5
1EAD 120402         4814                                     call            altof                   ;r2..r5->float
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    77

1EB0 120000   F     4815                                     call            move28
1EB3 D005           4816                                     pop                     rr5
1EB5 D004           4817                                     pop                     rr4
1EB7 D003           4818                                     pop                     rr3
1EB9 D002           4819                                     pop                     rr2
1EBB 1202B7         4820                                     call            fldiv                   ;K7/K5
                    4821     
1EBE 900000   F     4822                                     mov     dptr,#CHtho;100000
1EC1 120000   F     4823                                     call    ldc_ltemp                       ;r8..r11=8
1EC4 120203         4824                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1EC7 C002           4825                                     push            rr2
1EC9 C003           4826                                     push            rr3
1ECB C004           4827                                     push            rr4
1ECD C005           4828                                     push            rr5
                    4829                                     
1ECF 789C           4830                                     mov                     r0,#rez_A3
1ED1 120000   F     4831                                     call            resar2
1ED4 120402         4832                                     call            altof                           ;r2..r5->fl
                             oat
1ED7 120000   F     4833                                     call            move28
1EDA D005           4834                                     pop                     rr5
1EDC D004           4835                                     pop                     rr4
1EDE D003           4836                                     pop                     rr3
1EE0 D002           4837                                     pop                     rr2
1EE2 1202B7         4838                               call          fldiv           ;Km     
                    4839     
1EE5 900000   F     4840                                     mov     dptr,#CHtho;100000
1EE8 120000   F     4841                                     call    ldc_ltemp                       ;r8..r11=8
1EEB 120203         4842                                     call    flmul                           ;r2..r5
1EEE 120343         4843                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1EF1 78A0           4844                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1EF3 120000   F     4845                                     call            saver2
                    4846                                     ;запись в рпзу в соотв ячейку
1EF6 7900           4847                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1EF8 7A50           4848                                     mov             r2,#50h
1EFA 7B00           4849                                     mov             r3,#00
1EFC 120499         4850                                     call    copyPP
                    4851                                     ;внести изменения во внешн озу
1EFF 78A0           4852                                     mov                     r0,#koefKD
1F01 120000   F     4853                                     call            resar2
1F04 792C           4854                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4855                             
1F06 EA             4856                                     mov                     a,r2
1F07 F3             4857                                             movx            @r1,a
1F08 09             4858                                             inc                     r1
1F09 EB             4859                                             mov                     a,r3
1F0A F3             4860                                             movx            @r1,a
1F0B 09             4861                                             inc                     r1
1F0C EC             4862                                             mov                     a,r4
1F0D F3             4863                                             movx            @r1,a
1F0E 09             4864                                             inc                     r1
1F0F ED             4865                                             mov                     a,r5
1F10 F3             4866                                             movx            @r1,a
                    4867                                     ;кофф *100000 и переведенный в hex формат
                    4868                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4869     ;стереть страницу пап прогр 
1F11 905000         4870                                     mov             dptr,#5000h
1F14 7FFF           4871                                     mov             r7,#0ffh
1F16 12043E         4872                                     call    cle256
                    4873     ;и запись в ячейки кофф памяти прогр (3000h) 
1F19 7FFF           4874                                     mov             r7,#0ffh
1F1B 7900           4875                                     mov             r1,#0                           ;external r
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    78

                             am
1F1D 905000         4876                                     mov             dptr,#5000h
1F20 120480         4877                                     call    wrpage
                    4878     
1F23 C20D           4879                                             clr             bifl_kt
1F25 120000   F     4880                                             call    loadus
1F28 020000   F     4881                                             jmp             fulkalib
                    4882     
                    4883     ;выч среднего по блоку
                    4884     ;вых r2..r5
1F2B                4885     vichmean:       
                    4886                                             ;;;;;;;;;;
1F2B 120000   F     4887                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1F2E E582           4888                                             mov                     a,dpl
1F30 FF             4889                                             mov                     r7,a
1F31 E583           4890                                             mov                     a,dph
1F33 FE             4891                                             mov                     r6,a
1F34 120000   F     4892                                             call            resa_hl;save_bl->dptr
                    4893     
1F37 C3             4894                                                     clr             c; в начало блока?
1F38 E582           4895                                                     mov                     a,dpl
1F3A 9F             4896                                                     subb            a,r7
1F3B FF             4897                                                     mov                     r7,a
1F3C 7006           4898                                                     jnz                     oldmean
1F3E E583           4899                                                     mov                     a,dph
1F40 9E             4900                                                     subb            a,r6
1F41 FE             4901                                                     mov                     r6,a
1F42 6065           4902                                                     jz                      outmea;
                    4903     ;;;;;;;;;;
1F44                4904     oldmean:
1F44 120000   F     4905                                             call            resa_hl;save_bl->dptr
1F47 78D7           4906                                             mov                     r0,#copy_hl
1F49 E583           4907                                             mov                     a,dph
1F4B F6             4908                                             mov                     @r0,a
1F4C 08             4909                                             inc                     r0
1F4D E582           4910                                             mov                     a,dpl
1F4F F6             4911                                             mov                     @r0,a
1F50 78B8           4912                                             mov                     r0,#work
1F52 120000   F     4913                                             call            clear4
1F55 78D6           4914                                             mov                     r0,#chblok;volume
1F57 7600           4915                                             mov                     @r0,#0
1F59 120000   F     4916     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1F5C E582           4917                                             mov                     a,dpl
1F5E FF             4918                                             mov                     r7,a
1F5F E583           4919                                             mov                     a,dph
1F61 FE             4920                                             mov                     r6,a
                    4921     
1F62 78D7           4922                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1F64 E6             4923                                             mov                     a,@r0
1F65 F583           4924                                             mov                     dph,a
1F67 08             4925                                             inc                     r0
1F68 E6             4926                                             mov                     a,@r0
1F69 F582           4927                                             mov                     dpl,a
                    4928                                             
1F6B C3             4929                                             clr                     c;-4
1F6C E582           4930                                             mov                     a,dpl
1F6E 9404           4931                                             subb            a,#4
1F70 F582           4932                                             mov                     dpl,a
1F72 E583           4933                                             mov                     a,dph
1F74 9400           4934                                             subb            a,#0
1F76 F583           4935                                             mov                     dph,a;dptr-4
                    4936                                             ;;;;;;;;
1F78 79D7           4937                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    79

1F7A E583           4938                                                     mov             a,dph
1F7C F7             4939                                               mov           @r1,a
1F7D 09             4940                                                     inc             r1
1F7E E582           4941                                                     mov             a,dpl
1F80 F7             4942                                                     mov             @r1,a
                    4943                                                     ;;;;;;;;;
1F81 C3             4944                                                     clr             c;пришли в начало блока?
1F82 E582           4945                                                     mov                     a,dpl
1F84 9F             4946                                                     subb            a,r7
1F85 FF             4947                                                     mov                     r7,a
1F86 7006           4948                                                     jnz                     nextmea
1F88 E583           4949                                                     mov                     a,dph
1F8A 9E             4950                                                     subb            a,r6
1F8B FE             4951                                                     mov                     r6,a
1F8C 601B           4952                                                     jz                      outmea;
                    4953                                                     
                    4954                                                     ;продолжаем сравнение
                    4955                                                     ;;;;;;;;;;;             
1F8E 120000   F     4956     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1F91 120402         4957                                             call            altof;->float
1F94 120000   F     4958                                             call            move28                  ;r8..r11
1F97 78B8           4959                                             mov                     r0,#work
1F99 120000   F     4960                                             call            resar2
1F9C 120166         4961                                             call            fladd
1F9F 78B8           4962                                             mov                     r0,#work
1FA1 120000   F     4963                                             call            saver2
1FA4 78D6           4964                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1FA6 06             4965                                             inc                     @r0
1FA7 80B0           4966                                             jmp                     meng
1FA9                4967     outmea:         
1FA9 120000   F     4968                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1FAC 120402         4969                                             call            altof;->float
1FAF 120000   F     4970                                             call            move28                  ;r8..r11
1FB2 78B8           4971                                             mov                     r0,#work
1FB4 120000   F     4972                                             call            resar2
1FB7 120166         4973                                             call            fladd
1FBA 78B8           4974                                             mov                     r0,#work
1FBC 120000   F     4975                                             call            saver2
1FBF E4             4976                                             clr                     a
1FC0 FA             4977                                             mov                     r2,a
1FC1 FB             4978                                             mov                     r3,a
1FC2 FC             4979                                             mov                     r4,a
1FC3 78D6           4980                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1FC5 E6             4981                                             mov                     a,@r0
1FC6 2401           4982                                             add                     a,#1
1FC8 FD             4983                                             mov                     r5,a
1FC9 120402         4984                                             call            altof;r2..r5 float
1FCC 120000   F     4985                                             call            move28
1FCF 78B8           4986                                             mov                     r0,#work
1FD1 120000   F     4987                                             call            resar2
1FD4 1202B7         4988                                             call            fldiv
1FD7 900000   F     4989                                             mov                     dptr,#ch_10      
1FDA 120000   F     4990                                     call            ldc_ltemp
1FDD 1202B7         4991                                     call            fldiv
1FE0 120343         4992                                             call            ftol                            ;->
                             hex
1FE3 120000   F     4993                                             call    maform
1FE6 784F           4994                                             mov             r0,#abin
1FE8 120000   F     4995                                             call    saver2
                    4996     ;;;;;;;;
                    4997                                             
1FEB 7853           4998                                             mov             r0,#adec
1FED 7952           4999                                             mov             r1,#abin+3      ;hex->10
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    80

1FEF 120000   F     5000                                             call    bindec
                    5001                                     
1FF2 785C           5002                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1FF4 7949           5003                                             mov             r1,#bufind+9
1FF6 7F05           5004                                             mov             r7,#5
1FF8 E6             5005     bufmea:                         mov             a,@r0
1FF9 2430           5006                                             add             a,#30h
1FFB F7             5007                                             mov             @r1,a
1FFC 19             5008                                             dec             r1
1FFD 18             5009                                             dec             r0
1FFE DFF8           5010                                             djnz    r7,bufmea
2000 7844           5011                                             mov             r0,#bufind+4
2002 762B           5012                                             mov             @r0,#2bh          
2004 300202         5013                                             jnb             znmat,nozmea
2007 762D           5014                                             mov             @r0,#2dh
2009 434B05         5015     nozmea:         orl             bufind+11,#05h
200C 22             5016                                             ret
                    5017     
                    5018     
200D E0             5019     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
200E FA             5020                                             mov                     r2,a
200F A3             5021                                             inc                     dptr
2010 E0             5022                                             movx            a,@dptr
2011 FB             5023                                             mov                     r3,a
2012 A3             5024                                             inc                     dptr
2013 E0             5025                                             movx            a,@dptr
2014 FC             5026                                             mov                     r4,a
2015 A3             5027                                             inc                     dptr
2016 E0             5028                                             movx            a,@dptr
2017 FD             5029                                             mov                     r5,a    
2018 22             5030                                             ret
                    5031     
2019 C3             5032     min4_hl:        clr                     c;-4
201A E582           5033                                             mov                     a,dpl
201C 9404           5034                                             subb            a,#4
201E F582           5035                                             mov                     dpl,a
2020 E583           5036                                             mov                     a,dph
2022 9400           5037                                             subb            a,#0
2024 F583           5038                                             mov                     dph,a;dptr-4
2026 22             5039                                             ret
                    5040     
2027 020000   F     5041     routmin:                jmp             outmin
                    5042     ;мин значение по по блоку
202A                5043     vichmin:        ;;;;;;;;;;
202A 120000   F     5044                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
202D E582           5045                                             mov                     a,dpl
202F FF             5046                                             mov                     r7,a
2030 E583           5047                                             mov                     a,dph
2032 FE             5048                                             mov                     r6,a
2033 120000   F     5049                                             call            resa_hl;save_bl->dptr
                    5050     
2036 C3             5051                                                     clr             c; в начало блока?
2037 E582           5052                                                     mov                     a,dpl
2039 9F             5053                                                     subb            a,r7
203A FF             5054                                                     mov                     r7,a
203B 7006           5055                                                     jnz                     oldmin
203D E583           5056                                                     mov                     a,dph
203F 9E             5057                                                     subb            a,r6
2040 FE             5058                                                     mov                     r6,a
2041 60E4           5059                                                     jz                      routmin;
                    5060     ;;;;;;;;;;
2043                5061     oldmin:
2043 120000   F     5062                                             call            resa_hl;save_bl->dptr
                    5063                                                                                     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    81

                    5064     ;с конца блока адрес 2го измерение
2046 120000   F     5065                                             call            min4_hl
                    5066                                             
2049 78B8           5067                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5068                                             
204B E0             5069                                             movx            a,@dptr
204C F6             5070                                             mov                     @r0,a
204D 08             5071                                             inc                     r0
204E A3             5072                                             inc                     dptr
204F E0             5073                                             movx            a,@dptr
2050 F6             5074                                             mov                     @r0,a
2051 08             5075                                             inc                     r0
2052 A3             5076                                             inc                     dptr
2053 E0             5077                                             movx            a,@dptr
2054 F6             5078                                             mov                     @r0,a
2055 08             5079                                             inc                     r0
2056 A3             5080                                             inc                     dptr
2057 E0             5081                                             movx            a,@dptr
2058 F6             5082                                             mov                     @r0,a
2059 A3             5083                                             inc                     dptr
                    5084                                             
205A 78B8           5085                                             mov                     r0,#work
205C 120000   F     5086                                             call            resar2
205F 120402         5087                                             call            altof;->float;r2..r5
2062 78B8           5088                                             mov                     r0,#work
2064 120000   F     5089                                             call            saver2
                    5090     
2067 120000   F     5091                                             call            min4_hl
                    5092                                             ;call           min4_hl
                    5093     
206A 78D7           5094                                             mov                     r0,#copy_hl
206C E583           5095                                             mov                     a,dph
206E F6             5096                                             mov                     @r0,a
206F 08             5097                                             inc                     r0
2070 E582           5098                                             mov                     a,dpl
2072 F6             5099                                             mov                     @r0,a
                    5100                                     
2073 78D6           5101                                             mov                     r0,#chblok;volume
2075 7600           5102                                             mov                     @r0,#0
2077 120000   F     5103     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
207A E582           5104                                             mov                     a,dpl
207C FF             5105                                             mov                     r7,a
207D E583           5106                                             mov                     a,dph
207F FE             5107                                             mov                     r6,a
                    5108     
2080 78D7           5109                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2082 E6             5110                                             mov                     a,@r0
2083 F583           5111                                             mov                     dph,a
2085 08             5112                                             inc                     r0
2086 E6             5113                                             mov                     a,@r0
2087 F582           5114                                             mov                     dpl,a
                    5115                                             
2089 C3             5116                                             clr                     c;-4
208A E582           5117                                             mov                     a,dpl
208C 9404           5118                                             subb            a,#4
208E F582           5119                                             mov                     dpl,a
2090 E583           5120                                             mov                     a,dph
2092 9400           5121                                             subb            a,#0
2094 F583           5122                                             mov                     dph,a;dptr-4
                    5123                                             ;;;;;;;;
2096 79D7           5124                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
2098 E583           5125                                                     mov             a,dph
209A F7             5126                                               mov           @r1,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    82

209B 09             5127                                                     inc             r1
209C E582           5128                                                     mov             a,dpl
209E F7             5129                                                     mov             @r1,a
                    5130                                                     ;;;;;;;;;
209F C3             5131                                                     clr             c;пришли в начало блока?
20A0 E582           5132                                                     mov                     a,dpl
20A2 9F             5133                                                     subb            a,r7
20A3 FF             5134                                                     mov                     r7,a
20A4 7006           5135                                                     jnz                     nextmin
20A6 E583           5136                                                     mov                     a,dph
20A8 9E             5137                                                     subb            a,r6
20A9 FE             5138                                                     mov                     r6,a
20AA 601D           5139                                                     jz                      outmin;
                    5140                                                     
                    5141                                                     ;продолжаем сравнение
                    5142                                                     ;;;;;;;;;;;             
20AC 78B8           5143     nextmin:        mov                     r0,#work
20AE 120000   F     5144                                             call            resar2
                    5145                                             ;call           altof;->float;r2..r5
20B1 120000   F     5146                                             call            move28;->r8..r11
20B4 120000   F     5147                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5148     
20B7 120402         5149                                             call            altof;->float;r2..r5
                    5150                                             
20BA 1201D6         5151                                             call            flcmp
20BD 5005           5152                                             jnc                     nomini
20BF 78B8           5153                                             mov                     r0,#work;<
20C1 120000   F     5154                                             call            saver2;r2..r5
20C4 78D6           5155     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
20C6 06             5156                                             inc                     @r0
20C7 80AE           5157                                             jmp                     ming
                    5158     
20C9 78B8           5159     outmin:         mov                     r0,#work;1ое измерение блока
20CB 120000   F     5160                                             call            resar2
                    5161                                     ;       call            altof;->float;r2..r5
20CE 120000   F     5162                                             call            move28;->r8..r11
20D1 120000   F     5163                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5164     
20D4 120402         5165                                             call            altof;->float;r2..r5
                    5166                                             
20D7 1201D6         5167                                             call            flcmp
20DA 5005           5168                                             jnc                     minivix
20DC 78B8           5169                                             mov                     r0,#work;<
20DE 120000   F     5170                                             call            saver2;r2..r5
                    5171                                             ;;;;;;;;;
                    5172     
20E1 78B8           5173     minivix:        mov                     r0,#work
20E3 120000   F     5174                                             call            resar2
                    5175     
                    5176                                             ;call           altof;->float
                    5177                                     
20E6 900000   F     5178                                             mov                     dptr,#ch_10      
20E9 120000   F     5179                                             call            ldc_ltemp
20EC 1202B7         5180                                             call            fldiv
20EF 120343         5181                                             call            ftol                            ;->
                             hex
                    5182                                             ;;;
20F2 120000   F     5183                                             call            maform
20F5 784F           5184                                             mov                     r0,#abin
20F7 120000   F     5185                                             call            saver2
                    5186     ;;;;;;;;
                    5187                                             
20FA 7853           5188                                             mov             r0,#adec
20FC 7952           5189                                             mov             r1,#abin+3      ;hex->10
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    83

20FE 120000   F     5190                                             call    bindec
                    5191                                     
2101 785C           5192                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
2103 7949           5193                                             mov             r1,#bufind+9
2105 7F05           5194                                             mov             r7,#5
2107 E6             5195     bufmin:                         mov             a,@r0
2108 2430           5196                                             add             a,#30h
210A F7             5197                                             mov             @r1,a
210B 19             5198                                             dec             r1
210C 18             5199                                             dec             r0
210D DFF8           5200                                             djnz    r7,bufmin
210F 7844           5201                                             mov             r0,#bufind+4
2111 762B           5202                                             mov             @r0,#2bh          
2113 300202         5203                                             jnb             znmat,nozmin
2116 762D           5204                                             mov             @r0,#2dh
2118 434B05         5205     nozmin:         orl             bufind+11,#05h
211B 22             5206                                             ret
                    5207     
                    5208     
                    5209     
211C 020000   F     5210     routmax:                jmp             outmax
                    5211     ;мин значение по по блоку
211F                5212     vichmax:        ;;;;;;;;;;
211F 120000   F     5213                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
2122 E582           5214                                             mov                     a,dpl
2124 FF             5215                                             mov                     r7,a
2125 E583           5216                                             mov                     a,dph
2127 FE             5217                                             mov                     r6,a
2128 120000   F     5218                                             call            resa_hl;save_bl->dptr
                    5219     
212B C3             5220                                                     clr             c; в начало блока?
212C E582           5221                                                     mov                     a,dpl
212E 9F             5222                                                     subb            a,r7
212F FF             5223                                                     mov                     r7,a
2130 7006           5224                                                     jnz                     oldmax
2132 E583           5225                                                     mov                     a,dph
2134 9E             5226                                                     subb            a,r6
2135 FE             5227                                                     mov                     r6,a
2136 60E4           5228                                                     jz                      routmax;
                    5229     ;;;;;;;;;;
2138                5230     oldmax:
2138 120000   F     5231                                             call            resa_hl;save_bl->dptr
                    5232                                             
                    5233                                             
                    5234     ;с конца блока адрес 2го измерение
213B 120000   F     5235                                             call            min4_hl
                    5236                                             
213E 78B8           5237                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5238                                             
2140 E0             5239                                             movx            a,@dptr
2141 F6             5240                                             mov                     @r0,a
2142 08             5241                                             inc                     r0
2143 A3             5242                                             inc                     dptr
2144 E0             5243                                             movx            a,@dptr
2145 F6             5244                                             mov                     @r0,a
2146 08             5245                                             inc                     r0
2147 A3             5246                                             inc                     dptr
2148 E0             5247                                             movx            a,@dptr
2149 F6             5248                                             mov                     @r0,a
214A 08             5249                                             inc                     r0
214B A3             5250                                             inc                     dptr
214C E0             5251                                             movx            a,@dptr
214D F6             5252                                             mov                     @r0,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    84

214E A3             5253                                             inc                     dptr
                    5254                                             
214F 78B8           5255                                             mov                     r0,#work
2151 120000   F     5256                                             call            resar2
2154 120402         5257                                             call            altof;->float;r2..r5
2157 78B8           5258                                             mov                     r0,#work
2159 120000   F     5259                                             call            saver2
                    5260     
215C 120000   F     5261                                             call            min4_hl
                    5262                                     ;       call            min4_hl
                    5263     
215F 78D7           5264                                             mov                     r0,#copy_hl
2161 E583           5265                                             mov                     a,dph
2163 F6             5266                                             mov                     @r0,a
2164 08             5267                                             inc                     r0
2165 E582           5268                                             mov                     a,dpl
2167 F6             5269                                             mov                     @r0,a
                    5270                                     
2168 78D6           5271                                             mov                     r0,#chblok;volume
216A 7600           5272                                             mov                     @r0,#0
216C 120000   F     5273     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
216F E582           5274                                             mov                     a,dpl
2171 FF             5275                                             mov                     r7,a
2172 E583           5276                                             mov                     a,dph
2174 FE             5277                                             mov                     r6,a
                    5278     
2175 78D7           5279                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2177 E6             5280                                             mov                     a,@r0
2178 F583           5281                                             mov                     dph,a
217A 08             5282                                             inc                     r0
217B E6             5283                                             mov                     a,@r0
217C F582           5284                                             mov                     dpl,a
                    5285                                             
217E C3             5286                                             clr                     c;-4
217F E582           5287                                             mov                     a,dpl
2181 9404           5288                                             subb            a,#4
2183 F582           5289                                             mov                     dpl,a
2185 E583           5290                                             mov                     a,dph
2187 9400           5291                                             subb            a,#0
2189 F583           5292                                             mov                     dph,a;dptr-4
                    5293                                             ;;;;;;;;
218B 79D7           5294                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
218D E583           5295                                                     mov             a,dph
218F F7             5296                                               mov           @r1,a
2190 09             5297                                                     inc             r1
2191 E582           5298                                                     mov             a,dpl
2193 F7             5299                                                     mov             @r1,a
                    5300                                                     ;;;;;;;;;
2194 C3             5301                                                     clr             c;пришли в начало блока?
2195 E582           5302                                                     mov                     a,dpl
2197 9F             5303                                                     subb            a,r7
2198 FF             5304                                                     mov                     r7,a
2199 7006           5305                                                     jnz                     nextmax
219B E583           5306                                                     mov                     a,dph
219D 9E             5307                                                     subb            a,r6
219E FE             5308                                                     mov                     r6,a
219F 601D           5309                                                     jz                      outmax;
                    5310                                                     
                    5311                                                     ;продолжаем сравнение
                    5312                                                     ;;;;;;;;;;;             
21A1 78B8           5313     nextmax:        mov                     r0,#work
21A3 120000   F     5314                                             call            resar2
                    5315                                             ;call           altof;->float;r2..r5
21A6 120000   F     5316                                             call            move28;->r8..r11
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    85

21A9 120000   F     5317                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5318     
21AC 120402         5319                                             call            altof;->float;r2..r5
                    5320                                             
21AF 1201D6         5321                                             call            flcmp
21B2 4005           5322                                             jc                      nomaxi
21B4 78B8           5323                                             mov                     r0,#work;>
21B6 120000   F     5324                                             call            saver2;r2..r5
21B9 78D6           5325     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
21BB 06             5326                                             inc                     @r0
21BC 80AE           5327                                             jmp                     maxg
21BE 78B8           5328     outmax:         mov                     r0,#work;1ое измерение блока
21C0 120000   F     5329                                             call            resar2
                    5330                                     ;       call            altof;->float;r2..r5
21C3 120000   F     5331                                             call            move28;->r8..r11
21C6 120000   F     5332                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5333     
21C9 120402         5334                                             call            altof;->float;r2..r5
                    5335                                             
21CC 1201D6         5336                                             call            flcmp
21CF 4005           5337                                             jc                      maxvix
21D1 78B8           5338                                             mov                     r0,#work;>
21D3 120000   F     5339                                             call            saver2;r2..r5
                    5340                                             ;;;;;;;;;
                    5341     
21D6 020000   F     5342     maxvix:         jmp             minivix
                    5343     
                    5344     
21D9 78CF           5345     bufl_dec:       mov                     r0,#chbuf       
21DB 120000   F     5346                                             call            resar2  
21DE 900000   F     5347                                             mov                     dptr,#ch_1       
21E1 120000   F     5348                                             call            ldc_ltemp
21E4 1201D1         5349                                             call            flsub
21E7 78CF           5350                                             mov                     r0,#chbuf       
21E9 120000   F     5351                                             call            saver2  
21EC 22             5352                                             ret
                    5353     ;прерывание таймера Т2
21ED                5354     inter2:         
21ED E5DA           5355                                             mov             a,PCA0CPM0
21EF 54BF           5356                                             anl             a,#0bfh                         
21F1 F5DA           5357                                             mov             PCA0CPM0,a
                    5358                                             ;mov            a,T2CON         ;T2CON.2=0
                    5359                                             ;anl            a,#0fbh
21F3 75C800         5360                                             mov             T2CON,#00;a
21F6 C2AD           5361                                             clr             IE.5
21F8 32             5362                                             reti
                    5363     
                    5364     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
21F9                5365      ind:   ;;;
21F9 E5E7           5366                             mov             a,EIE2
21FB FA             5367                             mov             r2,a;save
21FC 75E700         5368                             mov             EIE2,#00H
                    5369     
21FF 120000   F     5370                     call    mign
2202 7840           5371                      mov            r0,#bufind;+11
2204 7F0C           5372                      mov            r7,#12
2206 C287           5373      nexin: clr             p0.7;6
2208 E6             5374                     mov             a,@r0
2209 F59B           5375                     mov             SPI0DAT,a
220B 20FBFD         5376                     jb              TXBSY,$
220E D287           5377                     setb    p0.7;6
2210 120000   F     5378                     call    z_9             ;25mks
2213 08             5379                     inc             r0;dec          r0
2214 DFF0           5380                     djnz    r7,nexin
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    86

2216 EA             5381                     mov             a,r2
2217 F5E7           5382                     mov             EIE2,a;#30H
                    5383     
2219 22             5384                ret
                    5385     
                    5386     
                    5387     ;$include (d:\amp\subr7.asm) 
                +1  5388     
                +1  5389     ;тест интерфейса
221A            +1  5390     testrs: ;jb     p0.3,goprogr
221A C2AC       +1  5391                                     clr     IE.4
221C 759955     +1  5392     test1:  mov     SBUF0,#55h
221F 3099FD     +1  5393                                     jnb     SCON0.1,$
2222 78B8       +1  5394                                     mov     r0,#work;chtest
2224 76BE       +1  5395                                     mov     @r0,#190d;60
                +1  5396     
2226 309825     +1  5397     test01: jnb     SCON0.0,test2
2229 E599       +1  5398                                     mov     a,SBUF0
222B B45512     +1  5399                                     cjne    a,#55h,test3
222E C299       +1  5400     test4:  clr     SCON0.1
2230 C298       +1  5401                                     clr     SCON0.0
2232 7D0A       +1  5402                                     mov     r5,#10
2234 7840       +1  5403                                     mov     r0,#bufind              ;- - - -
2236 762D       +1  5404     test04: mov     @r0,#2dh
2238 08         +1  5405                                     inc     r0
2239 DDFB       +1  5406                                     djnz    r5,test04
223B 120000   F +1  5407                                     call    ind
223E 80DC       +1  5408                                     jmp     test1
2240            +1  5409     test3:  
2240 753933     +1  5410                                     mov     nuerr,#33h
2243 120000   F +1  5411                                     call    error           ;на кран прибора ERR 3
                +1  5412                             
2246 120000   F +1  5413                                     call    ind;
2249 120000   F +1  5414                                     call    z_01s           ;100ms
224C 80E0       +1  5415                                     jmp     test4
224E 78B8       +1  5416     test2:  mov     r0,#work;chtest
2250 B60002     +1  5417                                     cjne    @r0,#0,test02
2253 8003       +1  5418                                     jmp     test5
2255 16         +1  5419     test02: dec     @r0
2256 80CE       +1  5420                                     jmp     test01
2258 120000   F +1  5421     test5:  call    z_1ms           ;1ms
225B C299       +1  5422                                     clr     SCON0.1
                +1  5423             
225D 753933     +1  5424                                     mov     nuerr,#33h
2260 120000   F +1  5425                                     call    error           ;на кран прибора ERR 3
                +1  5426                                     
2263 120000   F +1  5427                                     call    ind
2266 120000   F +1  5428                                     call    z_01s           ;100ms
2269 80B1       +1  5429                                     jmp     test1   
                +1  5430     
                +1  5431     
                +1  5432     
                +1  5433     
                +1  5434     
226B 7A08       +1  5435     zapadc:   mov R2,#8
226D D297       +1  5436     sdv:      setb P1.7
226F 33         +1  5437               rlc A
2270 9296       +1  5438                     mov P1.6,C
2272 120000   F +1  5439                     call tim2
                +1  5440                                     
2275 C297       +1  5441                     clr P1.7
2277 120000   F +1  5442                     call tim2
227A DAF1       +1  5443                     djnz R2,sdv
227C D296       +1  5444                     setb P1.6
227E 22         +1  5445                     ret
                +1  5446     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    87

227F 7A08       +1  5447     chtadc:   mov R2,#8
2281 D297       +1  5448     sdv1:     setb P1.7
2283 120000   F +1  5449               call tim2
2286 C297       +1  5450                     clr P1.7
2288 A296       +1  5451                     mov C,P1.6
228A 33         +1  5452                     rlc A
228B 120000   F +1  5453                     call tim2
228E DAF1       +1  5454                     djnz R2,sdv1
2290 22         +1  5455                     ret
                +1  5456     
2291 7E30       +1  5457     tim:      mov R6,#30h;38h
2293 DEFE       +1  5458     tim1:     djnz R6,tim1
2295 22         +1  5459               ret
                +1  5460               
2296 7E10       +1  5461     tim2:     mov R6,#10h;14h
2298 DEFE       +1  5462     tim3:     djnz R6,tim3
229A 22         +1  5463               ret
                +1  5464     
                +1  5465     ;запись из acc
229B C3         +1  5466     write_x1: clr   c
229C            +1  5467     writeD_x1:
229C 92B1       +1  5468                       mov P3.1,c        ;запись
229E F5A0       +1  5469               mov P2,A
22A0 D2B3       +1  5470                       setb P3.3
22A2 120000   F +1  5471                       call z_5
22A5 C2B3       +1  5472                       clr P3.3
22A7 75A0FF     +1  5473                       mov P2,#0FFh
22AA 22         +1  5474                       ret
                +1  5475     
                +1  5476     ;чтение в acc
22AB C3         +1  5477     read_x2:  clr   c  
22AC 92B1       +1  5478               mov P3.1,c        ;чтение
22AE D2B2       +1  5479               setb P3.2
22B0 D2B3       +1  5480                       setb P3.3
22B2 120000   F +1  5481                     call z_5
22B5 E5A0       +1  5482                       mov A,P2
22B7 C2B3       +1  5483                       clr P3.3
22B9 C2B2       +1  5484                       clr P3.2
22BB 22         +1  5485                       ret
                +1  5486     
                +1  5487     
22BC 120000   F +1  5488     loop:     call read_x2;x2    ;ожидание флага готовности
22BF 20E7FA     +1  5489                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
22C2 22         +1  5490                        ret           ;возврат, если бит А(7)<>1
                +1  5491                                      
                +1  5492                                        
                +1  5493     
                +1  5494     
                +1  5495     
                +1  5496     
                +1  5497     
                +1  5498     
                +1  5499     
                +1  5500     ;принимаемый байт в acc
                +1  5501     ;прием байта последовательным кодом старшими разрядами вперед
22C3 7A08       +1  5502     read:    mov R2,#8
22C5 C297       +1  5503     re1:     clr P1.7;P1.2
22C7 120000   F +1  5504              call tim2        ;5mks
22CA A294       +1  5505                     mov C,P1.4;P1.0
22CC 33         +1  5506                     rlc A           
22CD D297       +1  5507                     setb P1.7;P1.2
22CF 120000   F +1  5508                     call tim2
22D2 DAF1       +1  5509                     djnz R2,re1
22D4 22         +1  5510                     ret
                +1  5511     
                +1  5512      ;in r0-count   
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    88

                +1  5513     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5514     ;r2..r5 -значение счетчика
22D5            +1  5515     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
22D5 E6         +1  5516                     mov                     a,@r0
22D6 FC         +1  5517                     mov                     r4,a
22D7 08         +1  5518                     inc                     r0
22D8 E6         +1  5519                     mov                     a,@r0
22D9 FD         +1  5520                     mov                     r5,a
22DA 7B00       +1  5521                     mov                     r3,#0
22DC 7A00       +1  5522                     mov                     r2,#0
22DE 750800     +1  5523                     mov                     r8,#0;clr                       r8
22E1 750900     +1  5524                     mov                     r9,#0;clr                       r9
22E4 120000   F +1  5525                     call            lcmp
22E7 22         +1  5526                     ret
                +1  5527     
                +1  5528     
                +1  5529     ;in-r1-count
22E8            +1  5530     chdec:          ;mov            r1,#chavt               ;chavt-1
22E8 E7         +1  5531                             mov             a,@r1
22E9 FC         +1  5532                             mov             r4,a
22EA 09         +1  5533                             inc             r1
22EB E7         +1  5534                             mov             a,@r1
22EC FD         +1  5535                             mov             r5,a
22ED C202       +1  5536                             clr             rr2
22EF C203       +1  5537                             clr             rr3
22F1 900000   F +1  5538                             mov             dptr,#ch1        
22F4 120000   F +1  5539                             call    ldc_ltemp
22F7 120000   F +1  5540                             call    lsub
22FA ED         +1  5541                             mov             a,r5
22FB F7         +1  5542                             mov             @r1,a
22FC 19         +1  5543                             dec             r1
22FD EC         +1  5544                             mov             a,r4
22FE F7         +1  5545                             mov             @r1,a
                +1  5546                             
22FF 22         +1  5547                             ret      
                +1  5548     
                +1  5549     
                +1  5550     
                +1  5551     
2300            +1  5552     loadUS: ;если идет тест измерения ус восстановить для теста
2300 201533     +1  5553                                     jb              biteizm,yestest
2303 79AE       +1  5554                                             mov             r1,#diap
2305 E7         +1  5555                             mov             a,@r1
2306 23         +1  5556                             rl              a;*2
2307 FC         +1  5557                             mov             r4,a                    ;save a
2308 900000   F +1  5558                             mov             dptr,#tabus
230B 93         +1  5559                             movc    a,@a+dptr
230C FA         +1  5560                             mov             r2,a                    ;high byte
230D E584       +1  5561                             mov             a,p4
230F 5401       +1  5562                             anl             a,#01
2311 4A         +1  5563                             orl             a,r2
2312 F584       +1  5564                             mov             p4,a
2314 0C         +1  5565                             inc             r4
2315 EC         +1  5566                             mov             a,r4
2316 93         +1  5567                             movc    a,@a+dptr
2317 FB         +1  5568                             mov             r3,a                    ;low byte
2318 E585       +1  5569                             mov             a,p5
231A 5401       +1  5570                             anl             a,#01
231C 4B         +1  5571                             orl             a,r3
231D F585       +1  5572                             mov             p5,a
231F 799A       +1  5573                             mov             r1,#parT
2321 B7010E     +1  5574                             cjne    @r1,#1,bret
2324 79AE       +1  5575                             mov             r1,#diap                  ;10s (parT=1)
2326 7405       +1  5576                             mov             a,#5                      ;10-8..10-11 p4.1=1
2328 C3         +1  5577                             clr             c
2329 97         +1  5578                             subb    a,@r1
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    89

232A 5006       +1  5579                             jnc             bret
232C E584       +1  5580                             mov             a,p4
232E 4402       +1  5581                             orl             a,#02
2330 F584       +1  5582                             mov             p4,a                     ;10-8..10-11 p4.1=1
2332 120000   F +1  5583     bret:      call          louizm         ;us если вкл кн ИЗМЕР
2335 22         +1  5584                             ret
2336            +1  5585     yestest:
2336 120000   F +1  5586                             call            lotpus          ;ус теста измерения
2339 22         +1  5587                             ret
                +1  5588                             
                +1  5589     ;загр ус для кор 0
                +1  5590     ;dptr-
233A E4         +1  5591     lospus:         clr             a
                +1  5592                             ;movc   a,@a+dptr
                +1  5593                             ;mov            r2,a                    ;high byte
                +1  5594                             ;mov            a,p4
                +1  5595                             ;anl            a,#01
                +1  5596                             ;orl            a,r2
                +1  5597                             ;mov            p4,a
                +1  5598                             ;inc            dptr
233B E4         +1  5599                             clr             a
233C 93         +1  5600                             movc    a,@a+dptr
233D FB         +1  5601                             mov             r3,a                    ;low byte
233E E585       +1  5602                             mov             a,p5
2340 54BF       +1  5603                             anl             a,#0bfh;01
2342 4B         +1  5604                             orl             a,r3
2343 F585       +1  5605                             mov             p5,a
2345 22         +1  5606                             ret
                +1  5607     
2346 80         +1  5608     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5609     
                +1  5610     ;us кнопка измерения выкл
2347 88D6       +1  5611     tabus:     db           88h,0d6h         ;10-2
2349 88F6       +1  5612                             db      88h,0f6h         ;10-3
234B 88D6       +1  5613                             db              88h,0d6h         ;10-4
234D 88F6       +1  5614                             db              88h,0f6h         ;10-5
234F 9AD6       +1  5615                             db      9ah,0d6h         ;10-6
2351 9AF6       +1  5616                             db              9ah,0f6h         ;10-7
2353 ACD6       +1  5617                             db              0ach,0d6h        ;10-8
2355 ACF6       +1  5618                             db      0ach,0f6h        ;10-9
2357 C8D6       +1  5619                             db              0c8h,0d6h        ;10-10
2359 C8F6       +1  5620                             db              0c8h,0f6h        ;10-11
                +1  5621     
235B            +1  5622     tabt11: 
235B 66E6       +1  5623                             db              66h,0e6h;10-11
235D            +1  5624     tabt9:  
235D 32E6       +1  5625                             db              32h,0e6h;10-9
235F            +1  5626     tabt7:  
235F 18EE       +1  5627                             db              18h,0eeh;10-7
                +1  5628     
                +1  5629      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5630     ;в зав от parT (Tизм)
2361 79B7       +1  5631     loadT:          mov             r1,#load;parT
2363 7840       +1  5632     lolevT:         mov             r0,#bufind+0
2365 7B0A       +1  5633                             mov             r3,#10
2367 75F00A     +1  5634                             mov             b,#10
236A E7         +1  5635                             mov             a,@r1
236B A4         +1  5636                             mul             ab
236C FC         +1  5637                             mov             r4,a                    ;save a
236D 900000   F +1  5638                             mov             dptr,#textT
2370 93         +1  5639             lod1:   movc    a,@a+dptr
2371 F6         +1  5640                             mov             @r0,a
2372 08         +1  5641                             inc             r0
2373 0C         +1  5642                             inc             r4
2374 EC         +1  5643                             mov             a,r4
2375 DBF9       +1  5644                             djnz    r3,lod1
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    90

2377 534B03     +1  5645                             anl                     bufind+11,#03h          ;гашение точек
237A 22         +1  5646                             ret     
                +1  5647     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5648     ;dptr-адр строки текста         
237B            +1  5649     lotext:         
237B 7B0A       +1  5650                             mov             r3,#10
237D 7840       +1  5651                             mov             r0,#bufind+0
237F E4         +1  5652     lodt:           clr             a
2380 93         +1  5653                             movc    a,@a+dptr
2381 F6         +1  5654                             mov             @r0,a
2382 08         +1  5655                             inc             r0
2383 A3         +1  5656                             inc             dptr
2384 DBF9       +1  5657                             djnz    r3,lodt
2386 534B03     +1  5658                             anl                     bufind+11,#03h          ;гашение точек
2389 22         +1  5659                             ret                                     
                +1  5660     
                +1  5661     
                +1  5662     
                +1  5663     
                +1  5664      ;задержка 100 мкс
238A 7978       +1  5665     z_100:    mov R1,#78h     ;загрузка первого числа
238C 7A02       +1  5666     z100:     mov R2,#2h     ;загрузка второго числа
238E DAFE       +1  5667     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2390 D9FA       +1  5668               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2392 22         +1  5669               ret           
                +1  5670     
                +1  5671     ;задержка 34 мкс
2393 7B8B       +1  5672     z_5:      mov R3,#8Bh      ;загрузка числа
2395 DBFE       +1  5673     ct:       djnz R3,ct
2397 22         +1  5674               ret
                +1  5675     
                +1  5676     ;задержка 15 мс
2398 79FA       +1  5677     z_15:     mov R1,#0FAh    ;загрузка первого числа
239A 7AED       +1  5678     z15:      mov R2,#0EDh   ;загрузка второго числа
239C DAFE       +1  5679     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
239E D9FA       +1  5680               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
23A0 22         +1  5681               ret   
                +1  5682                                               
                +1  5683      ;задержка 1 мс
23A1 7910       +1  5684     z_1ms:     mov R1,#10h     
23A3 7AED       +1  5685     ss1:       mov R2,#0EDh    
23A5 DAFE       +1  5686                djnz R2, $    
23A7 D9FA       +1  5687                djnz R1, ss1   
23A9 22         +1  5688                ret   
                +1  5689     
                +1  5690      ;????????
                +1  5691     ;задержка 1с
23AA 7D1F       +1  5692     z_1s:   mov             r5,#01fh 
23AC 7EFF       +1  5693     co2s:   mov     R6,#0ffh     
23AE 7FFF       +1  5694     z1s:     mov    R7,#0ffh     
23B0 DFFE       +1  5695     co1s:   djnz    R7, co1s        
23B2 DEFA       +1  5696             djnz    R6, z1s 
23B4 DDF6       +1  5697                     djnz    r5,co2s
23B6 22         +1  5698               ret
                +1  5699     ;задержка 0,1с
23B7 7D03       +1  5700     z_01s:           mov            r5,#03h 
23B9 7EFF       +1  5701     co02s:          mov     R6,#0ffh     
23BB 7FFF       +1  5702     z01s:           mov     R7,#0ffh     
23BD DFFE       +1  5703                             djnz    R7, $   
23BF DEFA       +1  5704                     djnz    R6, z01s 
23C1 DDF6       +1  5705                             djnz    r5,co02s
23C3 22         +1  5706                      ret
                +1  5707                                               
                +1  5708     ;задержка 0,5с
23C4 7D0D       +1  5709     z_05s:           mov            r5,#0dh 
23C6 7EFF       +1  5710     co05s:                  mov     R6,#0ffh     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    91

23C8 7FFF       +1  5711     z05s:           mov     R7,#0ffh     
23CA DFFE       +1  5712                                     djnz    R7, $   
23CC DEFA       +1  5713                     djnz    R6, z05s 
23CE DDF6       +1  5714                                             djnz    r5,co05s
23D0 22         +1  5715                      ret                                                     
                +1  5716                                                               
23D1 000007FF   +1  5717     chzap:  db      00,00,07h,0ffh             
23D5 00000000   +1  5718     ch0:    db      00,00,00,00
23D9 0000000A   +1  5719     ch10:   db      00,00,00,0ah                            ;10
23DD 00000005   +1  5720     ch5:    db      00,00,00,05                                             ;5
23E1 00000004   +1  5721     ch4:    db      00,00,00,04                                             ;4
23E5 000003B9   +1  5722     ch954:  db 00,00,03,0b9h                                                ;954
23E9 000003E8   +1  5723     ch10000:        db 00,00,03h,0e8h                                               ;10000
23ED 00000064   +1  5724     ch100:  db 00,00,00,64h ;100
23F1 00000002   +1  5725     ch2:    db      00,00,00,02                                             
                +1  5726     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5727     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5728     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
23F5 00000001   +1  5729     ch1:    db  00,00,00,01
23F9 49742400   +1  5730     ch_mln: db      49h,74h,24h,00;10*6
23FD 3F800000   +1  5731     ch_1:   db      3fh,80h,00,00   
2401 40000000   +1  5732     ch_2:   db      40h,00,00,00;2
2405 40800000   +1  5733     ch_4:   db      40h,80h,00,00;4 
2409 40A00000   +1  5734     ch_5:   db      40h,0a0h,00,00;5
240D 40E00000   +1  5735     ch_7:   db      40h,0e0h,00,00;7
                +1  5736             
2411 3F741EDF   +1  5737     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
2415 47C35000   +1  5738     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
2419 3F800347   +1  5739     KD:             db      3fh,80h,03h,47h;1,0001
241D 48435000   +1  5740     CH2tho: db      48h,43h,50h,00;200000
2421 4856D800   +1  5741     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
2425 4856D800   +1  5742     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
2429 461C4000   +1  5743     ch_10th:db  46h,1ch,40h,00;10000-2710h
242D 41200000   +1  5744     ch_10:  db      41h,20h,00,00;10d
2431 48742400   +1  5745     ch_250: db      48h,74h,24h,00;250000
2435 000186A0   +1  5746     chk:            db      00,01,86h,0a0h;
2439 00000320   +1  5747     ch320h: db      00,00,03h,20h;320h=800d
243D 00000150   +1  5748     ch150h: db      00,00,01h,50h;150h
2441 C0400000   +1  5749     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5750     
                +1  5751     
                +1  5752     ;r1- мл байт 2х байтного числа
2445            +1  5753     tenmin:         ;-10
2445 C3         +1  5754                             clr             c
2446 E7         +1  5755                     mov             a,@r1
2447 9405       +1  5756                             subb    a,#5;10
2449 F7         +1  5757                             mov             @r1,a
244A 19         +1  5758                             dec             r1
244B E7         +1  5759                             mov             a,@r1
244C 9400       +1  5760                             subb    a,#0
244E F7         +1  5761                             mov             @r1,a
244F 22         +1  5762                             ret
                +1  5763       ;r0-обнуление ячеек памяти  
2450 7F04       +1  5764       clear4:        mov    r7,#4
2452 E4         +1  5765                             clr             a
2453 F6         +1  5766       cl4:          mov             @r0,a
2454 08         +1  5767                             inc             r0
2455 DFFC       +1  5768                             djnz    r7,cl4
2457 22         +1  5769                             ret     
                +1  5770     
                +1  5771      ;r0-обнуление ячеек памяти 
                +1  5772      ;R7- 
2458            +1  5773       clearN:        
2458 E4         +1  5774                             clr             a
2459 F6         +1  5775       cl4N:         mov             @r0,a
245A 08         +1  5776                             inc             r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    92

245B DFFC       +1  5777                             djnz    r7,cl4N
245D 22         +1  5778                             ret     
                +1  5779     
                +1  5780       ;чтение номера байта с индикатора(2байта)
                +1  5781     ;bufind+8..bufind+9
                +1  5782     ;-  - - -
                +1  5783     ;- - - - - - - - - -
                +1  5784     ;adec..adec+9
                +1  5785     ;ст            мл
245E 7848       +1  5786     upak2:  mov             r0,#bufind+8;
2460 795C       +1  5787                     mov             r1,#adec+9
2462 7F02       +1  5788                     mov             r7,#2;2bait
2464 C3         +1  5789     upa2:   clr             c
2465 E6         +1  5790                     mov             a,@r0
2466 9430       +1  5791                     subb    a,#30h
2468 F7         +1  5792                     mov             @r1,a
2469 18         +1  5793                     dec             r0
246A 19         +1  5794                     dec             r1
246B DFF7       +1  5795                     djnz    r7,upa2
246D 22         +1  5796                     ret  
                +1  5797     
                +1  5798     
                +1  5799         
                +1  5800      ;bufind+4..bufind+9
                +1  5801     ;-  - - -
                +1  5802     ;- - - - - - - - - -
                +1  5803     ;adec..adec+9
                +1  5804     ;ст            мл
246E 7849       +1  5805     upak:   mov             r0,#bufind+9;
2470 795C       +1  5806                     mov             r1,#adec+9
2472 7F06       +1  5807                     mov             r7,#6
2474 C3         +1  5808     upa:    clr             c
2475 E6         +1  5809                     mov             a,@r0
2476 9430       +1  5810                     subb    a,#30h
2478 F7         +1  5811                     mov             @r1,a
2479 18         +1  5812                     dec             r0
247A 19         +1  5813                     dec             r1
247B DFF7       +1  5814                     djnz    r7,upa
247D 22         +1  5815                     ret
                +1  5816     
                +1  5817      ;чтение номера байта с индикатора(3байта)
                +1  5818     ;bufind+3..bufind+9
                +1  5819     ;-  - - -
                +1  5820     ;- - - - - - - - - -
                +1  5821     ;adec..adec+9
                +1  5822     ;ст            мл
247E 7849       +1  5823     upak3:  mov             r0,#bufind+9;
2480 795C       +1  5824                     mov             r1,#adec+9
2482 7F03       +1  5825                     mov             r7,#3;3bait
2484 C3         +1  5826     upa1:   clr             c
2485 E6         +1  5827                     mov             a,@r0
2486 9430       +1  5828                     subb    a,#30h
2488 F7         +1  5829                     mov             @r1,a
2489 18         +1  5830                     dec             r0
248A 19         +1  5831                     dec             r1
248B DFF7       +1  5832                     djnz    r7,upa1
248D 22         +1  5833                     ret
                +1  5834     
                +1  5835     ;вых-r2,r3-адрес ячее памяти прогр
248E            +1  5836     findkoef:
248E 79AE       +1  5837                                     mov             r1,#diap
2490 E7         +1  5838                                     mov             a,@r1
2491 23         +1  5839                                     rl              a                                          
                                          ;diap*2(2bait )
2492 FC         +1  5840                                     mov             r4,a                                    ;sa
                             ve
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    93

2493 900000   F +1  5841                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5842                                     
2496 93         +1  5843                                     movc    a,@a+dptr                       ;ст байт
2497 FA         +1  5844                                     mov             r2,a
2498 A3         +1  5845                                     inc             dptr
2499 EC         +1  5846                                     mov             a,r4
249A 93         +1  5847                                     movc    a,@a+dptr
249B FB         +1  5848                                     mov             r3,a                    ;мл байт
249C 22         +1  5849                                     ret
                +1  5850     ;r2..r5 в опр яч внешн озу
249D            +1  5851     findext:
249D 79AE       +1  5852                                     mov             r1,#diap
249F E7         +1  5853                                     mov             a,@r1
24A0 23         +1  5854                                     rl              a                                          
                                          ;diap*2(2bait )
24A1 23         +1  5855                                     rl              a                                          
                                          ;diap*2(2bait )
24A2 F9         +1  5856                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5857                                     
24A3 22         +1  5858                                     ret
                +1  5859     
                +1  5860     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5861     ;(5000h..5027h)
24A4 5000       +1  5862     diKDw:  dw              5000h                   ;10-2
24A6 5004       +1  5863                                     dw              5004h                   ;10-3
24A8 5008       +1  5864                                     dw              5008h                   ;10-4
24AA 500C       +1  5865                                     dw              500ch                   ;10-5
24AC 5010       +1  5866                                     dw              5010h                   ;10-6
24AE 5014       +1  5867                                     dw              5014h                   ;10-7
24B0 5018       +1  5868                                     dw              5018h                   ;10-8
24B2 501C       +1  5869                                     dw              501ch                   ;10-9
24B4 5020       +1  5870                                     dw              5020h                   ;10-10
24B6 5024       +1  5871                                     dw              5024h                   ;10-11
24B8 5028       +1  5872     dipar:  dw              5028h                   ;parol
24BA 502C       +1  5873     diKm:           dw              502ch                   ;Km для теста измерения
24BC 000186A0   +1  5874     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5875     
24C0 AA08       +1  5876     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
24C2 AB09       +1  5877                                             mov     r3,ltemp+1
24C4 AC0A       +1  5878                                             mov     r4,ltemp+2
24C6 AD0B       +1  5879                                             mov     r5,ltemp+3
24C8 22         +1  5880                                             ret
                +1  5881     ;bufind+4..bufind+9
                +1  5882     ;-  - - -
                +1  5883     ;- - - - - - - - - -
                +1  5884     ;adec..adec+9
                +1  5885     ;ст            мл
24C9 7847       +1  5886     upakA:  mov             r0,#bufind+7;
24CB 795C       +1  5887                     mov             r1,#adec+9
24CD 7F04       +1  5888                     mov             r7,#4
24CF C3         +1  5889     upaa4:  clr             c
24D0 E6         +1  5890                     mov             a,@r0
24D1 9430       +1  5891                     subb    a,#30h
24D3 F7         +1  5892                     mov             @r1,a
24D4 18         +1  5893                     dec             r0
24D5 19         +1  5894                     dec             r1
24D6 DFF7       +1  5895                     djnz    r7,upaa4
24D8 22         +1  5896                     ret
                +1  5897     
                +1  5898     ;bufind+4..bufind+9
                +1  5899     ;-  - - -
                +1  5900     ;- - - - - - - - - -
                +1  5901     ;adec..adec+9
                +1  5902     ;ст            мл
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    94

24D9 7848       +1  5903     upakB:  mov             r0,#bufind+8;
24DB 795C       +1  5904                     mov             r1,#adec+9
24DD 7F05       +1  5905                     mov             r7,#5
24DF C3         +1  5906     upab:   clr             c
24E0 E6         +1  5907                     mov             a,@r0
24E1 9430       +1  5908                     subb    a,#30h
24E3 F7         +1  5909                     mov             @r1,a
24E4 18         +1  5910                     dec             r0
24E5 19         +1  5911                     dec             r1
24E6 DFF7       +1  5912                     djnz    r7,upab
24E8 C21B       +1  5913                     clr                     bitznB
24EA E543       +1  5914                     mov             a,bufind+3
24EC B42D02     +1  5915                     cjne            a,#2dh,abret
24EF D21B       +1  5916                     setb            bitznB
24F1            +1  5917     abret:
24F1 22         +1  5918                     ret
24F2            +1  5919     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
24F2 4E6E6AA8   +1  5920                                             db      4eh,6eh,6ah,0a8h;10**9
24F6 43FA0000   +1  5921     CH_500:         db              43h,0fah,00,00;1fah=500
24FA 4856D800   +1  5922     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
24FE 49742400   +1  5923     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5924     
                +1  5925     
                +1  5926     
                +1  5927     ;управление AD7731
                +1  5928     ;r4=b1 r5=b2
2502            +1  5929     iniacp: ;управление AD7731
2502 7403       +1  5930                             mov             a,#03
                +1  5931     
2504 120000   F +1  5932                             call    write
2507 EC         +1  5933                             mov             a,r4;#80h
2508 120000   F +1  5934                             call    write
250B ED         +1  5935                             mov             a,r5;#04
250C 120000   F +1  5936                             call    write
250F 7402       +1  5937                             mov             a,#02
2511 120000   F +1  5938                             call    write
2514 74A1       +1  5939                             mov             a,#0a1h
2516 120000   F +1  5940                             call    write
2519 7474       +1  5941                             mov             a,#74h
251B 120000   F +1  5942                             call    write
251E 2095FD     +1  5943                             jb              p1.5,$;p1.3,$
2521 7402       +1  5944                             mov             a,#02
2523 120000   F +1  5945                             call    write
2526 7481       +1  5946                             mov             a,#81h
2528 120000   F +1  5947                             call    write
252B 7474       +1  5948                             mov             a,#74h
252D 120000   F +1  5949                             call    write
2530 2095FD     +1  5950                             jb              p1.5,$;p1.3,$
2533 7402       +1  5951                             mov             a,#02
2535 120000   F +1  5952                             call    write
2538 7421       +1  5953                             mov             a,#21h
253A 120000   F +1  5954                             call    write
253D 7474       +1  5955                             mov             a,#74h
253F 120000   F +1  5956                             call    write
2542 22         +1  5957                             ret
                +1  5958                             ;;;;;;;;;;;;;;;;
                +1  5959     ;;;;;;;;;;;;;;;;;
                +1  5960     ;;;;;;;;;;;;;;;;;
2543 0000       +1  5961     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
2545 6000       +1  5962                                     db              60h,00h;40h,04h         ;10s
2547 6000       +1  5963                                     db              60h,00;40h,04h          ;1s
2549 6001       +1  5964                                     db              60h,01h;40h,04h         ;0,1s
254B 6001       +1  5965                                     db              60h,01;00h;20h,04h              ;50ms
254D 6001       +1  5966                                     db              60h,01;00h;20h,04h               ;10ms
254F 1333       +1  5967                                     db              13h,33h;32h             ;2ms
                +1  5968     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    95

                +1  5969     ;загр В1,В2 в завис от Т                                
2551 799A       +1  5970     loab12:                 mov             r1,#parT
2553 900000   F +1  5971                                     mov             dptr,#tabB1_2
2556 E7         +1  5972                                     mov             a,@r1
2557 23         +1  5973                                     rl              a;*2
2558 FF         +1  5974                                     mov             r7,a                    ;save a
2559 93         +1  5975                                     movc    a,@a+dptr
255A FC         +1  5976                                     mov             r4,a   ;b1
255B 0F         +1  5977                                     inc             r7
255C EF         +1  5978                                     mov             a,r7
255D 93         +1  5979                                     movc    a,@a+dptr
255E FD         +1  5980                                     mov             r5,a
                +1  5981                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5982                             
255F 22         +1  5983                                     ret
                +1  5984     
                +1  5985     
2560 7852       +1  5986     loadr2: mov             r0,#abin+3              ;r2..r5
2562 E6         +1  5987                     mov             a,@r0                   ; ст мл   
2563 FA         +1  5988                     mov             r2,a
2564 18         +1  5989                     dec             r0
2565 E6         +1  5990                     mov             a,@r0
2566 FB         +1  5991                     mov             r3,a
2567 18         +1  5992                     dec             r0
2568 E6         +1  5993                     mov             a,@r0
2569 FC         +1  5994                     mov             r4,a
256A 18         +1  5995                     dec             r0
256B E6         +1  5996                     mov             a,@r0
256C FD         +1  5997                     mov             r5,a
256D 22         +1  5998                     ret
                +1  5999                                             
                +1  6000      ;;;;;;;;;;;;;;;;;;;      
                +1  6001      ;загрузка KD в зависимости от диап изм  
                +1  6002      ;koef->r8..r11
256E 78AE       +1  6003     loadKD:                 mov             r0,#diap
2570 E6         +1  6004                                     mov             a,@r0
2571 900000   F +1  6005                                     mov             dptr,#diKDn
2574 75F004     +1  6006                                     mov             b,#4
2577 A4         +1  6007                                     mul             ab
2578 FF         +1  6008                                     mov             r7,a;save
2579 93         +1  6009                                     movc    a,@a+dptr
257A F508       +1  6010                                     mov             r8,a
257C A3         +1  6011                                     inc             dptr
257D EF         +1  6012                                     mov             a,r7
257E 93         +1  6013                                     movc    a,@a+dptr
257F F509       +1  6014                                     mov             r9,a
2581 A3         +1  6015                                     inc             dptr
2582 EF         +1  6016                                     mov             a,r7
2583 93         +1  6017                                     movc    a,@a+dptr
2584 F50A       +1  6018                                     mov             r10,a
2586 A3         +1  6019                                     inc             dptr
2587 EF         +1  6020                                     mov             a,r7
2588 93         +1  6021                                     movc    a,@a+dptr
2589 F50B       +1  6022                                     mov             r11,a
258B 22         +1  6023                                     ret
                +1  6024     
258C 3F506B7B   +1  6025      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2590 3F507FCC   +1  6026                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2594 3F4F9D0B   +1  6027                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
2598 3F4FE869   +1  6028                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
259C 3F50294A   +1  6029                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
25A0 3F50639E   +1  6030                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    96

                             -7
25A4 3F4BC9F0   +1  6031                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
25A8 3F4C063B   +1  6032                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
25AC 3F50EFDD   +1  6033                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
25B0 3F512AD9   +1  6034                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  6035     
25B4 00000039   +1  6036     ch57:   db      00,00,00,39h;57
25B8 00000014   +1  6037     ch20:   db      00,00,00,14h;20
                +1  6038     
                +1  6039     ;загр ус для тестов ацп 
                +1  6040     ;dptr-
25BC 78B1       +1  6041     lotpus: mov             r0,#vichR
25BE B6210D     +1  6042                                     cjne    @r0,#21h,te22
25C1 900000   F +1  6043                                     mov                     dptr,#tabt11;заслать ус 11А
25C4 E4         +1  6044     lotp:           clr             a
25C5 93         +1  6045                             movc    a,@a+dptr                               ;high byte
25C6 F584       +1  6046                             mov             p4,a
25C8 A3         +1  6047                             inc             dptr
25C9 E4         +1  6048                             clr             a
25CA 93         +1  6049                             movc    a,@a+dptr                               ;low byte
25CB F585       +1  6050                             mov             p5,a
25CD 22         +1  6051                             ret
25CE B62205     +1  6052     te22:                   cjne    @r0,#22h,te23
25D1 900000   F +1  6053                             mov                     dptr,#tabt9;заслать ус 9А       
25D4 80EE       +1  6054                             jmp                     lotp
                +1  6055     
25D6 900000   F +1  6056     te23:   mov                     dptr,#tabt7;заслать ус 7А       
25D9 80E9       +1  6057                             jmp                     lotp
                +1  6058     
                +1  6059     
                +1  6060     
                +1  6061     
                +1  6062     
25DB 02030405   +1  6063     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
25DF 06070809                
25E3 0A0B                    
                +1  6064     
25E5 78AE       +1  6065     findR:                  mov                     r0,#diap
25E7 E6         +1  6066                                                     mov                     a,@r0
25E8 900000   F +1  6067                                                     mov                     dptr,#Tabn
25EB 93         +1  6068                                                     movc            a,@a+dptr
25EC 22         +1  6069                                                     ret
                +1  6070     ;bufind=30h..39h                                                                           
                                           ;
25ED C219       +1  6071     vvchif:                 clr             bitmig
25EF 79B2       +1  6072                                     mov             r1,#marker
25F1 E7         +1  6073                                     mov             a,@r1                   ;изм цифры
25F2 7840       +1  6074                                     mov             r0,#bufind                      ;0000
25F4 28         +1  6075                                     add             a,r0
25F5 F8         +1  6076                                     mov             r0,a
25F6 06         +1  6077                                     inc             @r0
25F7 B63A03     +1  6078                                     cjne    @r0,#3ah,chif
25FA 7630       +1  6079                                     mov             @r0,#30h
25FC 22         +1  6080                                     ret
25FD C3         +1  6081     chif:           clr                     c
25FE 7430       +1  6082                                     mov                     a,#30h
2600 96         +1  6083                                     subb            a,@r0
2601 4002       +1  6084                                     jc                      chif5
2603 7630       +1  6085                                     mov             @r0,#30h
2605 22         +1  6086     chif5:  ret
                +1  6087     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    97

2606 80E5       +1  6088     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6089     
2608 B641FB     +1  6090     vvnol31:        cjne            @r0,#41h,vvnol41
260B 800A       +1  6091                                             jmp                     chifour
260D B631F8     +1  6092     vvnol23:        cjne            @r0,#31h,vvnol31
2610 8005       +1  6093                                             jmp                     chifour 
                +1  6094     
2612 78B0       +1  6095     vvchibl:        mov                     r0,#level
2614 B623F6     +1  6096                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
2617 C219       +1  6097     chifour:                clr             bitmig
2619 79B2       +1  6098                                     mov             r1,#marker
261B E7         +1  6099                                     mov             a,@r1                   ;изм цифры
261C 7840       +1  6100                                     mov             r0,#bufind                      ;1..4
261E 28         +1  6101                                     add             a,r0
261F F8         +1  6102                                     mov             r0,a
2620 06         +1  6103                                     inc             @r0
2621 B63504     +1  6104                                     cjne    @r0,#35h,chifb
2624 7631       +1  6105                                     mov             @r0,#31h
2626 8006       +1  6106                                     jmp             chifb1
2628 B63003     +1  6107     chifb:  cjne    @r0,#30h,chifb1
262B 7631       +1  6108                                     mov             @r0,#31h
262D 22         +1  6109                                     ret
262E            +1  6110     chifb1:;;;;;;;;;;
262E C3         +1  6111                                     clr                     c
262F 7430       +1  6112                                     mov                     a,#30h
2631 96         +1  6113                                     subb            a,@r0
2632 4002       +1  6114                                     jc                      chifl5
2634 7630       +1  6115                                     mov             @r0,#30h
                +1  6116                                     
2636 22         +1  6117     chifl5: ret
                +1  6118     ;;;;;;;;;;;;;
2637 22         +1  6119             ret
                +1  6120       ;перевод маркера влево
2638            +1  6121     marle:  
2638 C219       +1  6122                     clr             bitmig
                +1  6123                     ;mov            savba,#0   нельзя обнулять
263A 78B2       +1  6124             mov             r0,#marker
263C 16         +1  6125                     dec             @r0
263D E6         +1  6126                     mov             a,@r0
263E C3         +1  6127                     clr             c
263F 953A       +1  6128                     subb    a,movleft         ;крайне левое положение
2641 5001       +1  6129                     jnc             rler
2643 06         +1  6130                     inc             @r0
2644 22         +1  6131     rler:   ret
                +1  6132         
                +1  6133     ;перевод маркера вправо
2645 C219       +1  6134     marri:  clr             bitmig
2647 78B2       +1  6135                     mov             r0,#marker
2649 06         +1  6136                     inc         @r0
264A E53B       +1  6137                     mov             a,movrig           ;крайне правое положение
264C C3         +1  6138                     clr             c
264D 96         +1  6139                     subb    a,@r0
264E 5001       +1  6140                     jnc             rrir
2650 16         +1  6141                     dec             @r0
2651 22         +1  6142     rrir:   ret
                +1  6143         
                +1  6144     ;konstA->bufind+4..bufind+7
2652 78BC       +1  6145     outA:           mov                     r0,#konstA
2654 120000   F +1  6146                                     call            resar2
2657 120343     +1  6147                                     call            ftol                    ;->hex
265A 784F       +1  6148                                     mov             r0,#abin
265C 120000   F +1  6149                                     call            saver2
265F 7853       +1  6150                                     mov                     r0,#adec
2661 7952       +1  6151                                     mov             r1,#abin+3
2663 120000   F +1  6152                                     call            bindec
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    98

2666 785C       +1  6153                                     mov                     r0,#adec+9
2668 7947       +1  6154                                     mov                     r1,#bufind+7
266A 7F04       +1  6155                                     mov                     r7,#4
266C E6         +1  6156     outa2:  mov             a,@r0
266D 2430       +1  6157                               add           a,#30h
266F F7         +1  6158                                     mov             @r1,a
2670 19         +1  6159                                     dec             r1
2671 18         +1  6160                                     dec             r0
2672 DFF8       +1  6161                                     djnz    r7,outa2
2674 22         +1  6162                                     ret
                +1  6163                                             
                +1  6164     ;konstB->bufind+4..bufind+8
                +1  6165     ;outB:          mov                     r0,#konstB
                +1  6166     ;                               call            resar2
                +1  6167     ;                               mov                     a,r2
                +1  6168     ;                               anl                     a,#80h
                +1  6169     ;                               jz                      outb3
                +1  6170     ;mov                    a,r2
                +1  6171     ;                               anl                     a,#7fh
                +1  6172     ;                               mov                     r2,a
                +1  6173     ;                               mov                     bufind+3,#2dh
                +1  6174     ;outb3: call            ftol                    ;->hex
                +1  6175     ;                               mov             r0,#abin
                +1  6176     ;                               call            saver2
                +1  6177     ;                               mov                     r0,#adec
                +1  6178     ;                               mov             r1,#abin+3
                +1  6179     ;                               call            bindec
                +1  6180     ;                               mov                     r0,#adec+9
                +1  6181     ;                               mov                     r1,#bufind+8
                +1  6182     ;                               mov                     r7,#5
                +1  6183     ;outb2: mov             a,@r0
                +1  6184     ;                         add           a,#30h
                +1  6185     ;                               mov             @r1,a
                +1  6186     ;                               dec             r1
                +1  6187     ;                               dec             r0
                +1  6188     ;                               djnz    r7,outb2
                +1  6189     ;                               ret
                +1  6190     
                +1  6191     
                +1  6192     ;пп мигания индикации
2675 78B2       +1  6193     mign:           mov             r0,#marker
                +1  6194                                     
2677 B6FF03     +1  6195                                     cjne    @r0,#0ffh,mignn
                +1  6196                                     ;реж изм мигает *
267A C219       +1  6197                                     clr             bitmig
267C 22         +1  6198                                     ret
                +1  6199     
267D            +1  6200     mignn:                  ;clr            c
267D 7440       +1  6201                                     mov             a,#bufind
267F 26         +1  6202                                     add             a,@r0                   ;a=bufind+marker
2680 F9         +1  6203                                     mov             r1,a
2681 201907     +1  6204                                     jb              bitmig,onmig
2684 873C       +1  6205                                     mov             savba,@r1
                +1  6206                             ;       mov             a,@r1
                +1  6207                             ;       mov             savba,a
2686 7720       +1  6208                                     mov             @r1,#" "
                +1  6209                                     
2688 D219       +1  6210                                     setb    bitmig
268A 22         +1  6211                                     ret
                +1  6212     
268B A73C       +1  6213     onmig:                  mov             @r1,savba
                +1  6214                                     ;mov            a,savba
                +1  6215                                     ; mov           @r1,a
268D C219       +1  6216                                     clr             bitmig
268F 120000   F +1  6217                                     call    z_01s
2692 22         +1  6218                                     ret
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE    99

                +1  6219     ;номер ошибки bufind+6
2693 900000   F +1  6220     error:          mov             dptr,#teERR
2696 120000   F +1  6221                                             call    lotext
2699 853946     +1  6222                                             mov             bufind+6,nuerr
269C 22         +1  6223                                     ret
                +1  6224     
                +1  6225     
269D            +1  6226     textT:          
269D FD543D32   +1  6227     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
26A1 6D67FDFD                
26A5 FDFD                    
26A7 FD543D31   +1  6228     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
26AB 306D67FD                
26AF FDFD                    
26B1 FD543D35   +1  6229                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
26B5 306D67FD                
26B9 FDFD                    
26BB FD543D64   +1  6230                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
26BF 3167FDFD                
26C3 FDFD                    
26C5 20202054   +1  6231                             db              " "," "," ","T","=",31h,67h," "," "," "
26C9 3D316720                
26CD 2020                    
26CF 2020543D   +1  6232                             db              " "," ","T","=",31h,30h,67h," "," "," "  
26D3 31306720                
26D7 2020                    
                +1  6233     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6234     
26D9 42753474   +1  6235     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
26DD 79767454                
26E1 7720                    
26E3 20553D20   +1  6236     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
26E7 20202020                
26EB 2065                    
26ED 20423D2B   +1  6237     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
26F1 20202020                
26F5 2020                    
26F7 20207145   +1  6238     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
26FB 48722020                
26FF 2020                    
                +1  6239     
2701 20544579   +1  6240     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2705 542D7433                
2709 7120                    
270B 54457954   +1  6241     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
270F 20523520                
2713 2020                    
2715 20794B30   +1  6242     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
2719 50205235                
271D 2020                    
271F 20204142   +1  6243     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
2723 4B202020                
2727 2020                    
2729 204B4176   +1  6244     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
272D 74735020                
2731 202020                  
                +1  6245     
2734 20544579   +1  6246     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
2738 54202020                
273C 5431                    
273E 20544579   +1  6247     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
2742 54202020                
2746 5432                    
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   100

2748 20544579   +1  6248     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
274C 54202020                
2750 5433                    
                +1  6249     
                +1  6250     
2752 20202035   +1  6251     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
2756 37362020                
275A 2020                    
275C 20202031   +1  6252     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2760 39322020                
2764 2020                    
                +1  6253     
2766 61415030   +1  6254     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
276A 76772030                
276E 3030                    
2770 20303030   +1  6255     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2774 30302020                
2778 2041                    
277A 74337120   +1  6256     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
277E 4B304879                
2782 5420                    
2784 20204275   +1  6257     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2788 58307820                
278C 2020                    
278E 2020304C   +1  6258     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2792 4C202020                
2796 2020                    
2798 20203034   +1  6259     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
279C 7479544B                
27A0 4120                    
27A2 20203041   +1  6260     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
27A6 71795420                
27AA 20203341   +1  6261     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
27AE 61747977                
27B2 2020                    
27B4 20206150   +1  6262     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
27B8 30797130                
27BC 545020                  
27BF 20206130   +1  6263     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
27C3 76484162                
27C7 2020                    
27C9 20744854   +1  6264     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
27CD 20303030                
27D1 3067                    
27D3 20207376   +1  6265     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
27D7 304B2020                
27DB 2020                    
27DD 20207376   +1  6266     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
27E1 304B2030                
27E5 2020                    
27E7 30547934   +1  6267     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
27EB 45542030                
27EF 3031                    
27F1 79544154   +1  6268     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
27F5 74795474                
27F9 4B41                    
27FB 71744820   +1  6269     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
27FF 20202020                
2803 2020                    
2805 71414B79   +1  6270     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2809 20202020                
280D 2020                    
280F 79504578   +1  6271     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2813 20202020                
2817 2020                    
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   101

                +1  6272      ;;;;;;;;;;;;;;;;;;;         
2819 2020304C   +1  6273     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
281D 4C204920                
2821 2020                    
2823 2020304C   +1  6274     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
2827 4C206620                
282B 2020                    
282D 20204552   +1  6275     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2831 52202020                
2835 2020                    
2837 2020454E   +1  6276     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
283B 44202020                
283F 2020                    
                +1  6277     
                +1  6278     ;dptr+4-приемник
                +1  6279     ;dptr-источник
                +1  6280     ;r7-кол байт  
2841            +1  6281     xCIKLWR:
2841 7F04       +1  6282                             mov             r7,#4   
2843 E0         +1  6283     lwrx:   movx    a,@dptr
2844 C083       +1  6284                             push    dph
2846 C082       +1  6285                             push    dpl
2848 A3         +1  6286                             inc             dptr
2849 A3         +1  6287                             inc             dptr
284A A3         +1  6288                             inc             dptr
284B A3         +1  6289                             inc             dptr
284C F0         +1  6290                             movx    @dptr,a
284D D082       +1  6291                             pop             dpl
284F D083       +1  6292                             pop             dph
                +1  6293                             
2851 A3         +1  6294                             inc             dptr
2852 DFEF       +1  6295                             djnz    r7,lwrx
2854 22         +1  6296                             ret
                +1  6297     ;r2..r5->@dptr..@dptr+3                         
2855 EA         +1  6298     saveIr2:                mov     a,r2
2856 F0         +1  6299                                             movx    @dptr,a
2857 A3         +1  6300                                             inc     dptr
2858 EB         +1  6301                                             mov     a,r3
2859 F0         +1  6302                                             movx    @dptr,a
285A A3         +1  6303                                             inc     dptr
285B EC         +1  6304                                             mov     a,r4
285C F0         +1  6305                                             movx    @dptr,a
285D A3         +1  6306                                             inc     dptr
285E ED         +1  6307                                             mov     a,r5
285F F0         +1  6308                                             movx    @dptr,a
2860 22         +1  6309                                             ret
                +1  6310     ;r2..r5-> @r0..@r0+3
                +1  6311     
2861 EA         +1  6312     saver2:         mov     a,r2
2862 F6         +1  6313                                             mov     @r0,a
2863 08         +1  6314                                             inc     r0
2864 EB         +1  6315                                             mov     a,r3
2865 F6         +1  6316                                             mov     @r0,a
2866 08         +1  6317                                             inc     r0
2867 EC         +1  6318                                             mov     a,r4
2868 F6         +1  6319                                             mov     @r0,a
2869 08         +1  6320                                             inc     r0
286A ED         +1  6321                                             mov     a,r5
286B F6         +1  6322                                             mov     @r0,a
286C 22         +1  6323                                             ret 
286D 7F50       +1  6324     clmassix:       mov                     r7,#50h;28h
286F 900100     +1  6325                             mov     dptr,#MASS0        ;забить массив A нулями
2872 7400       +1  6326     clmax:          mov          a,#00h
2874 F0         +1  6327                  movx    @dptr,a
2875 A3         +1  6328                  inc     dptr
2876 DFFA       +1  6329                 djnz                r7,clmax                
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   102

2878 F56E       +1  6330                  mov     chmas,a
287A C201       +1  6331                  clr     bitmas
287C 22         +1  6332                 ret
                +1  6333     ;r1-яЁшхьшъ
                +1  6334     ;r0-шёЄюўшъ
                +1  6335     ;r7-ъюы срщЄ  
287D            +1  6336     CIKLWR:
287D 7F04       +1  6337                             mov             r7,#4   
287F E6         +1  6338     lwr:    mov     a,@r0
2880 F7         +1  6339                             mov     @r1,a
2881 09         +1  6340                             inc             r1
2882 08         +1  6341                             inc             r0
2883 DFFA       +1  6342                             djnz    r7,lwr
2885 22         +1  6343                             ret     
                +1  6344     ;r2..r5-> @dptr..@dptr+3
                +1  6345     
2886 120000   F +1  6346     zmul:   call    maform
2889 120000   F +1  6347                     call    lmul
288C 120000   F +1  6348                     call    bform
288F 22         +1  6349                     ret
                +1  6350     
2890 120000   F +1  6351     zdiv:   call    maform
2893 120000   F +1  6352                     call    divide
2896 120000   F +1  6353                     call    bform
2899 22         +1  6354                     ret
                +1  6355     
289A EA         +1  6356     maform: mov a,r2
289B 33         +1  6357             rlc a
289C 5006       +1  6358             jnc             fo1m
289E D202       +1  6359                     setb            znmat
28A0 120000   F +1  6360                     call   form4
28A3 22         +1  6361                     ret
28A4 C202       +1  6362     fo1m:   clr             znmat
28A6 22         +1  6363                     ret
                +1  6364     
28A7 300203     +1  6365     bform:  jnb             znmat,fo2m
28AA 120000   F +1  6366                     call    form4
28AD 22         +1  6367     fo2m:   ret
                +1  6368       
                +1  6369     ;r2..r5 яхЁхтхёЄш т фюя ъюф
28AE ED         +1  6370     form4:          mov a,r5
28AF F4         +1  6371             cpl a
28B0 2401       +1  6372             add a,#1
28B2 FD         +1  6373             mov r5,a
28B3 EC         +1  6374             mov a,r4
28B4 F4         +1  6375             cpl a
28B5 3400       +1  6376             addc    a,#0
28B7 FC         +1  6377             mov r4,a
28B8 EB         +1  6378             mov a,r3
28B9 F4         +1  6379                 cpl a
28BA 3400       +1  6380             addc    a,#0
28BC FB         +1  6381             mov r3,a
28BD EA         +1  6382             mov a,r2
28BE F4         +1  6383             cpl a
28BF 3400       +1  6384             addc    a,#0
28C1 FA         +1  6385             mov r2,a
28C2 22         +1  6386             ret
                +1  6387     
28C3 120000   F +1  6388     zcmp:   call            maform
28C6 120000   F +1  6389                     call            lcmp
28C9 C0D0       +1  6390                     push            psw
28CB 120000   F +1  6391                     call    bform
28CE D0D0       +1  6392                     pop             psw
28D0 22         +1  6393                     ret
                +1  6394     
                +1  6395     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   103

                +1  6396     ;@r0..@r0+3->r8..r11
                +1  6397     
28D1 E6         +1  6398     resar8: mov     a,@r0
28D2 F508       +1  6399                     mov     ltemp,a
28D4 08         +1  6400                     inc     r0
28D5 E6         +1  6401                     mov     a,@r0
28D6 F509       +1  6402                     mov     ltemp+1,a
28D8 08         +1  6403                     inc     r0
28D9 E6         +1  6404                     mov     a,@r0
28DA F50A       +1  6405                     mov     ltemp+2,a
28DC 08         +1  6406                     inc     r0
28DD E6         +1  6407                     mov     a,@r0
28DE F50B       +1  6408                     mov     ltemp+3,a
28E0 22         +1  6409                     ret
                +1  6410     
                +1  6411     ;
                +1  6412     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6413     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6414     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6415     ;r2 a    ўшёыю 180
                +1  6416     ;00 b4
                +1  6417     ;т_ї- mabin..mabin+2
                +1  6418     ;     80 01 00
                +1  6419      
28E1 C8         +1  6420     cond:   xch     a,r0    
28E2 F9         +1  6421                     mov     r1,a
28E3 C8         +1  6422                     xch     a,r0
28E4 7C03       +1  6423                     mov     r4,#03
28E6 7700       +1  6424     dcoa:   mov     @r1,#00
28E8 09         +1  6425                     inc     r1
28E9 DCFB       +1  6426                     djnz    r4,dcoa
28EB 7B10       +1  6427                     mov     r3,#10h
28ED C3         +1  6428     dcob:   clr     c
28EE 33         +1  6429                     rlc     a
28EF CA         +1  6430                     xch     a,r2
28F0 33         +1  6431                     rlc     a
28F1 CA         +1  6432                     xch     a,r2
28F2 C8         +1  6433                     xch     a,r0
28F3 F9         +1  6434                     mov     r1,a
28F4 C8         +1  6435                     xch     a,r0
28F5 7C03       +1  6436                     mov     r4,#03
28F7 FD         +1  6437                     mov     r5,a
28F8 E7         +1  6438     dcoc:   mov     a,@r1 
28F9 37         +1  6439                     addc    a,@r1
28FA D4         +1  6440                     da      a
28FB F7         +1  6441                     mov     @r1,a
28FC 09         +1  6442                     inc     r1
28FD DCF9       +1  6443                     djnz    r4,dcoc
28FF ED         +1  6444                     mov     a,r5
2900 4003       +1  6445                     jc      dcod
2902 DBE9       +1  6446                     djnz    r3,dcob
2904 C3         +1  6447                     clr     c
2905 00         +1  6448     dcod:   nop
2906 22         +1  6449                     ret
                +1  6450     
2907 8A08       +1  6451     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2909 850309     +1  6452                     mov     ltemp+1,3
290C 85040A     +1  6453                     mov     ltemp+2,4
290F 85050B     +1  6454                     mov     ltemp+3,5
2912 22         +1  6455                     ret
                +1  6456     
                +1  6457     ;@r0..@r0+3->r2..r5
                +1  6458     
2913 E6         +1  6459     resar2: mov     a,@r0
2914 FA         +1  6460                     mov     r2,a
2915 08         +1  6461                     inc     r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   104

2916 E6         +1  6462                     mov     a,@r0
2917 FB         +1  6463                     mov     r3,a
2918 08         +1  6464                     inc     r0
2919 E6         +1  6465                     mov     a,@r0
291A FC         +1  6466                     mov     r4,a
291B 08         +1  6467                     inc     r0
291C E6         +1  6468                     mov     a,@r0
291D FD         +1  6469                     mov     r5,a
291E 22         +1  6470                     ret
                +1  6471     
                +1  6472     ;25mkc !!!!!!!!!!!!!!!1
291F 7B4B       +1  6473     z_9:      mov R3,#4Bh      ;загрузка числа
2921 DBFE       +1  6474                    djnz R3,$
2923 22         +1  6475               ret
                +1  6476     
                +1  6477     ;запись   передаваемый байт в acc
                +1  6478     ;передача байта послед кодом старшими разрядами  вперед
2924 7A08       +1  6479     write:     mov R2,#8
2926 C3         +1  6480                             clr  c  
2927 C297       +1  6481     wr1:            clr             p1.7;P1.2
2929 00         +1  6482                         nop 
292A 33         +1  6483                             rlc A
292B 9296       +1  6484                             mov P1.6,C;P1.1,C
292D 120000   F +1  6485                        call tim2
2930 D297       +1  6486                        setb P1.7;P1.2
2932 120000   F +1  6487                call tim2
2935 DAF0       +1  6488                       djnz R2,wr1
2937 C296       +1  6489                       clr P1.6;P1.1
2939 22         +1  6490                                              ret
                +1  6491     
                +1  6492     ;чтение номера байта с индикатора(2байта)
                +1  6493     ;bufind+8..bufind+9
                +1  6494     ;-  - - -
                +1  6495     ;- - - - - - - - - -
                +1  6496     ;adec..adec+9
                +1  6497     ;ст            мл
293A 7847       +1  6498     upak1:  mov             r0,#bufind+7;
293C 795C       +1  6499                                     mov             r1,#adec+9
293E C3         +1  6500                                     clr             c
293F E6         +1  6501                                     mov             a,@r0
2940 9430       +1  6502                                     subb    a,#30h
2942 FF         +1  6503                                     mov             r7,a
2943 C3         +1  6504                                     clr             c
2944 9405       +1  6505                                     subb    a,#5
2946 4004       +1  6506                                     jc              upk1
2948 7404       +1  6507                                     mov             a,#4
294A 8001       +1  6508                                     jmp             upk2
294C EF         +1  6509     upk1:           mov             a,r7
294D F7         +1  6510     upk2:           mov             @r1,a
294E 22         +1  6511                                     ret  
                +1  6512     ;r1-мл байт счетчика ячеек
294F C3         +1  6513     chminus:        clr                     c
2950 E7         +1  6514                                             mov                     a,@r1
2951 9401       +1  6515                                             subb            a,#01
2953 F7         +1  6516                                             mov                     @r1,a;low
2954 19         +1  6517                                             dec                     r1
2955 E7         +1  6518                                             mov                     a,@r1
2956 9400       +1  6519                                             subb            a,#00
2958 F7         +1  6520                                             mov                     @r1,a
2959 22         +1  6521                                             ret
                +1  6522     
                +1  6523     
                +1  6524     ;чтение номера байта с индикатора(4байта)
                +1  6525     ;bufind+6..bufind+9
                +1  6526     ;-  - - -
                +1  6527     ;- - - - - - - - - -
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   105

                +1  6528     ;adec..adec+9
                +1  6529     ;ст            мл
295A 7848       +1  6530     upak4:  mov             r0,#bufind+8;
295C 795C       +1  6531                     mov             r1,#adec+9
295E 7F04       +1  6532                     mov             r7,#4
2960 C3         +1  6533     upaa:   clr             c
2961 E6         +1  6534                     mov             a,@r0
2962 9430       +1  6535                     subb    a,#30h
2964 F7         +1  6536                     mov             @r1,a
2965 18         +1  6537                     dec             r0
2966 19         +1  6538                     dec             r1
2967 DFF7       +1  6539                     djnz    r7,upaa
2969 22         +1  6540                     ret
                +1  6541     
                +1  6542     ;dptr-адр ячейки 1й соотв блока 
296A E538       +1  6543     adrblok:         mov            a,nblok
296C C3         +1  6544                              clr            c
296D 9401       +1  6545                              subb           a,#1
296F FD         +1  6546                              mov            r5,a
2970 E4         +1  6547                              clr            a
2971 FC         +1  6548                              mov            r4,a
2972 FB         +1  6549                              mov            r3,a
2973 FA         +1  6550                              mov            r2,a
2974 900000   F +1  6551                                     mov                     dptr,#ch320h
2977 120000   F +1  6552                                     CALL   ldc_ltemp                 ; ltemp <-320
297A 120000   F +1  6553                                     call            lmul;r2..r5
297D ED         +1  6554                                     mov                     a,r5
297E 2450       +1  6555                                     add                     a,#50h
2980 F582       +1  6556                                     mov                     dpl,a
2982 EC         +1  6557                                     mov                     a,r4
2983 3401       +1  6558                                     addc            a,#01           
2985 F583       +1  6559                                     mov                     dph,a                   ;dptr-
2987 22         +1  6560                                     ret
                +1  6561     
                +1  6562     ;
                +1  6563     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2988 E538       +1  6564     save_hl:                mov             a,nblok
298A B4011D     +1  6565                                                     cjne    a,#1,sa_hl1
298D 79D3       +1  6566                                                     mov             r1,#saven_bl
298F E583       +1  6567     sa_hl:                  mov             a,dph
2991 F7         +1  6568                                               mov           @r1,a
2992 09         +1  6569                                                     inc             r1
2993 E582       +1  6570                                                     mov             a,dpl
2995 F7         +1  6571                                                     mov             @r1,a
                +1  6572                                                     ;;;;;;;;;не конец ли блока
                +1  6573                             
2996 79D6       +1  6574                                     mov                     r1,#volume+1;work+1
2998 120000   F +1  6575                                     call            chminus
299B 78D5       +1  6576                                     mov             r0,#volume
299D E6         +1  6577                                     mov             a,@r0
299E 30E708     +1  6578                                     jnb             acc.7,noendli
29A1 C20A       +1  6579                                     clr                     bitbon                  ;блок закон
                             чился
29A3 534BFD     +1  6580                                     anl                     bufind+11,#0fdh
29A6 120000   F +1  6581                                     call            ind
29A9 22         +1  6582     noendli:ret
                +1  6583     
29AA B40204     +1  6584     sa_hl1:         cjne    a,#2,sa_hl2
29AD 79C0       +1  6585                                                     mov             r1,#saven_bl2
29AF 80DE       +1  6586                                                     jmp             sa_hl
                +1  6587     
29B1 B40304     +1  6588     sa_hl2:         cjne    a,#3,sa_hl3
29B4 79C2       +1  6589                                                     mov             r1,#saven_bl3
29B6 80D7       +1  6590                                                     jmp             sa_hl
29B8 79D9       +1  6591     sa_hl3:                 mov             r1,#saven_bl4
29BA 80D3       +1  6592                                                     jmp             sa_hl
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   106

                +1  6593     
                +1  6594     ;загрузка dptr сохр ранее значением адреса ячейки
29BC E538       +1  6595     resa_hl:                mov             a,nblok
29BE B4010A     +1  6596                                                     cjne    a,#1,re_hl1
29C1 79D3       +1  6597                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
29C3 E7         +1  6598     re_hl:                  mov             a,@r1   
29C4 F583       +1  6599                                                     mov             dph,a
                +1  6600                                               
29C6 09         +1  6601                                                     inc             r1
29C7 E7         +1  6602                                                     mov             a,@r1
29C8 F582       +1  6603                                                     mov             dpl,a
29CA 22         +1  6604                                                     ret
                +1  6605     
29CB B40204     +1  6606     re_hl1:                 cjne    a,#2,re_hl2
29CE 79C0       +1  6607                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
29D0 80F1       +1  6608                                                     jmp             re_hl
                +1  6609     
29D2 B40304     +1  6610     re_hl2:                 cjne    a,#3,re_hl3
29D5 79C2       +1  6611                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
29D7 80EA       +1  6612                                                     jmp             re_hl
                +1  6613     
29D9 79D9       +1  6614     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
29DB 80E6       +1  6615                                                     jmp             re_hl
                +1  6616     ;загрузка rez_A3 в соотв яч внешн озу
29DD 789C       +1  6617     loA3_X:                 mov             r0,#rez_A3
29DF 120000   F +1  6618                                                     call    resar2
                +1  6619                                                     
29E2 EA         +1  6620                                                     mov             a,r2                    ;
29E3 F0         +1  6621                                                     movx    @dptr,a
29E4 A3         +1  6622                                                     inc             dptr
29E5 EB         +1  6623                                                     mov             a,r3
29E6 F0         +1  6624                                                     movx    @dptr,a
29E7 A3         +1  6625                                                     inc             dptr
29E8 EC         +1  6626                                                     mov             a,r4
29E9 F0         +1  6627                                                     movx    @dptr,a
29EA A3         +1  6628                                                     inc             dptr
29EB ED         +1  6629                                                     mov             a,r5
29EC F0         +1  6630                                                     movx    @dptr,a
29ED A3         +1  6631                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
29EE 22         +1  6632                                                     ret             ;в ячейке saven_bl
                +1  6633     ;чтение в rez_A3 из соотв яч внешн озу
29EF            +1  6634     reA3_X:         
                +1  6635                                                     
29EF E0         +1  6636                                                     movx    a,@dptr
29F0 FA         +1  6637                                                     mov             r2,a
29F1 A3         +1  6638                                                     inc             dptr
29F2 E0         +1  6639                                                     movx    a,@dptr
29F3 FB         +1  6640                                                     mov             r3,a
29F4 A3         +1  6641                                                     inc             dptr
29F5 E0         +1  6642                                                     movx    a,@dptr
29F6 FC         +1  6643                                                     mov             r4,a
29F7 A3         +1  6644                                                     inc             dptr
29F8 E0         +1  6645                                                     movx    a,@dptr
29F9 FD         +1  6646                                                     mov             r5,a
29FA A3         +1  6647                                                     inc             dptr
29FB 789C       +1  6648                                                     mov             r0,#rez_A3
29FD 120000   F +1  6649                                                     call    saver2
2A00 22         +1  6650                                                     ret
                +1  6651     ;;;;;;;;;;;;;;;;;
                +1  6652     ;разбивка внешнего озу
                +1  6653     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6654     ;100h..150h обл внеш озу для скользящего массива измерения
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   107

                +1  6655     ;150h..46fh 1й блок
                +1  6656     ;470h..78fh     2й блок
                +1  6657     ;790h..aaf      3й блок
                +1  6658     ;ab0h..dcfh 4й блок
                +1  6659     ;dd0..fffh свободная область
                +1  6660     ;
                +1  6661     ;светодиоды и точки для индикатора
                +1  6662     ;такт
                +1  6663     ;измер
                +1  6664     ;avp
                +1  6665     ;нуль
                +1  6666     ;0,1s
                +1  6667     ;1s
                +1  6668     ;10s
                +1  6669     ;кмп
                +1  6670     ;память
                +1  6671     ;пуск
                +1  6672     ;
                +1  6673     ;
                    6674     
                    6675     ;$include (d:\amp\sarifm3.asm) 
                +1  6676     ; ” ©« SARIFM.ASM 8.11.95
                +1  6677     ;файл арифметики
                +1  6678       
  0008          +1  6679     ltemp    equ       8           ;long temporary
  000C          +1  6680     xtemp    equ       12          ;other temporaries
  000A          +1  6681     DECSIZE  EQU       10
  0004          +1  6682     NUMSIZE  EQU       4
  0004          +1  6683     RR4  EQU       4
  0005          +1  6684     RR5  EQU       5
                +1  6685     
                +1  6686                                                     
                +1  6687     
                +1  6688                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6689     ;             using    0              ; Specify register bank for the following
                +1  6690                                            ; program code.
                +1  6691     ;                                               cseg AT 400h
                +1  6692     ; Arithmetics:  CLEARING string
                +1  6693     ; Input:
                +1  6694     ; R0 - pointer to string,
                +1  6695     ; NUMSIZE - byte count if CLRNUM used,
                +1  6696     ; DECSIZE - byte count if CLRDEC used,
                +1  6697     ; R2 - byte count if CLEAR used;
                +1  6698     ; Output:  none.
                +1  6699     
2A01            +1  6700     CLRDEC:
2A01 7A0A       +1  6701         MOV R2, #DECSIZE
2A03 8002       +1  6702         SJMP    CLEAR
2A05            +1  6703     CLRNUM:
2A05 7A04       +1  6704         MOV R2, #NUMSIZE
                +1  6705         ;JMP    CLEAR
2A07            +1  6706     CLEAR:
2A07 E4         +1  6707         CLR A
2A08 F6         +1  6708     CLR11:  MOV @R0, A
2A09 08         +1  6709         INC R0
2A0A DAFC       +1  6710         DJNZ    R2, CLR11
2A0C 22         +1  6711         RET
                +1  6712     
                +1  6713     ;**********************************
                +1  6714     ;mov    r1,#abin+3
                +1  6715     ;mov    r0,#adec
                +1  6716     ; _ _ _ _
                +1  6717     ;     03ff
                +1  6718     ;ст     мл   - вход
                +1  6719     ; _ _ _ _ _ _ _ _ _ _
                +1  6720     ;             1 0 2 3
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   108

                +1  6721     ;ст                мл 
                +1  6722     ;**********************************
                +1  6723     
2A0D            +1  6724     BINDEC:
                +1  6725     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6726     ; Input:
                +1  6727     ; R0 - pointer to destination (high digit is the first),
                +1  6728     ; R1 - pointer to source,
                +1  6729     ; NUMSIZE - byte count in binary number;
                +1  6730     ; DECSIZE - byte count in decimal number;
                +1  6731     ; Output:  none.
                +1  6732     ; Source saved
                +1  6733     
                +1  6734         ; 1. Clear result
2A0D 7A05       +1  6735         MOV R2, #DECSIZE/2
2A0F 120000   F +1  6736         CALL   CLEAR  ; incrementing R0
                +1  6737     
                +1  6738         ; 2. Prepare convertion
2A12 18         +1  6739         DEC R0
2A13 8804       +1  6740         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
2A15 8905       +1  6741         MOV RR5, R1 ; R5 - pointer to low byte of binary number
2A17 7B20       +1  6742         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6743     
                +1  6744         ; 3. Convert cyrcle
2A19            +1  6745     BIN30:
                +1  6746     
                +1  6747         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2A19 A905       +1  6748         MOV R1, RR5
2A1B 7A04       +1  6749         MOV R2, #NUMSIZE
2A1D E7         +1  6750     BIN31:  MOV A, @R1
2A1E 33         +1  6751         RLC A
2A1F F7         +1  6752         MOV @R1, A
2A20 19         +1  6753         DEC R1
2A21 DAFA       +1  6754         DJNZ    R2, BIN31
2A23 A905       +1  6755         MOV R1, RR5
2A25 E7         +1  6756         MOV A, @R1
2A26 92E0       +1  6757         MOV ACC.0, C
2A28 F7         +1  6758         MOV @R1, A
                +1  6759     
                +1  6760         ; 3.2. Doubling decimal result with <Carry>
2A29 A804       +1  6761         MOV R0, RR4
2A2B 7A05       +1  6762         MOV R2, #DECSIZE/2
2A2D E6         +1  6763     BIN32:  MOV A, @R0
2A2E 36         +1  6764         ADDC    A, @R0
2A2F D4         +1  6765         DA  A
2A30 F6         +1  6766         MOV @R0, A
2A31 18         +1  6767         DEC R0
2A32 DAF9       +1  6768         DJNZ    R2, BIN32
                +1  6769     
                +1  6770         ; 3.3. End of convert cyrcle
2A34 DBE3       +1  6771         DJNZ    R3, BIN30
                +1  6772     
                +1  6773         ; 4. Make bytes from half-bytes
2A36 E8         +1  6774         MOV A, R0
2A37 240A       +1  6775         ADD A, #DECSIZE
2A39 F8         +1  6776         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2A3A A904       +1  6777         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2A3C 7A05       +1  6778         MOV R2, #DECSIZE/2
2A3E E7         +1  6779     BIN41:  MOV A, @R1
2A3F 540F       +1  6780         ANL A, #00FH
2A41 F6         +1  6781         MOV @R0, A
2A42 18         +1  6782         DEC R0
2A43 E7         +1  6783         MOV A, @R1
2A44 C4         +1  6784         SWAP    A
2A45 540F       +1  6785         ANL A, #00FH
2A47 F6         +1  6786         MOV @R0, A
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   109

2A48 18         +1  6787         DEC R0
2A49 19         +1  6788         DEC R1
2A4A DAF2       +1  6789         DJNZ    R2, BIN41
2A4C 22         +1  6790         RET
                +1  6791     
                +1  6792     
                +1  6793     ;*********************************
                +1  6794     ;mov    r0,#abin
                +1  6795     ;mov    r1,#adec
                +1  6796     ; _ _ _ _       -выход
                +1  6797     ; ff0000
                +1  6798     ;0004
                +1  6799     ;мл      ст
                +1  6800     
                +1  6801     ;ст                       мл
                +1  6802     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6803     ;                       2 5 5
                +1  6804     ;                   1 0 2 4
                +1  6805     
2A4D            +1  6806     DECBIN:
                +1  6807     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6808     ; Input:
                +1  6809     ; R0 - pointer to destination,
                +1  6810     ; R1 - pointer to source (high digit is the first),
                +1  6811     ; NUMSIZE - byte count in binary number;
                +1  6812     ; DECSIZE - byte count in decimal number;
                +1  6813     ; Output:  none
                +1  6814     ; Source cleared
                +1  6815     
                +1  6816         ; 1. Clear result
2A4D 120000   F +1  6817         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6818     
                +1  6819         ; 2. Prepare convertion
2A50 18         +1  6820         DEC R0
2A51 8804       +1  6821         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2A53 8905       +1  6822         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
2A55 900000   F +1  6823         MOV DPTR, #DECT2
2A58 7B20       +1  6824         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6825     
                +1  6826         ; 3. Convert cyrcle
2A5A            +1  6827     DEC30:
                +1  6828     
                +1  6829         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2A5A C3         +1  6830         CLR C
2A5B A905       +1  6831         MOV R1, RR5
2A5D 7A0A       +1  6832         MOV R2, #DECSIZE
2A5F E7         +1  6833     DEC31:  MOV A, @R1
2A60 540F       +1  6834         ANL A, #00FH
2A62 92E4       +1  6835         MOV ACC.4, C
2A64 93         +1  6836         MOVC    A,@A+DPTR
2A65 F7         +1  6837         MOV @R1, A
2A66 A2E7       +1  6838         MOV C, ACC.7
2A68 09         +1  6839         INC R1
2A69 DAF4       +1  6840         DJNZ    R2, DEC31
                +1  6841     
                +1  6842         ; 3.2. Rotate binary result one bit to right with <Carry>
2A6B A804       +1  6843         MOV R0, RR4
2A6D 7A04       +1  6844         MOV R2, #NUMSIZE
2A6F E6         +1  6845     DEC32:  MOV A, @R0
2A70 13         +1  6846         RRC A
2A71 F6         +1  6847         MOV @R0, A
2A72 18         +1  6848         DEC R0
2A73 DAFA       +1  6849         DJNZ    R2, DEC32
                +1  6850     
                +1  6851         ; 3.3. End of convert cyrcle
2A75 DBE3       +1  6852         DJNZ    R3, DEC30
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   110

2A77 22         +1  6853         RET
                +1  6854     
2A78 00800181   +1  6855     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2A7C 02820383                
2A80 0484                    
2A82 00000000   +1  6856         DB  00,00,00,00,00,00
2A86 0000                    
2A88 05850686   +1  6857         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2A8C 07870888                
2A90 0989                    
                +1  6858     
                +1  6859     ;   Long comparison
                +1  6860     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6861     ;   flags and acc set as though a long subtraction was done.
                +1  6862     ;*******************************
                +1  6863     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6864     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6865     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6866     ;*******************************
2A92            +1  6867     lcmp:
2A92 C3         +1  6868         clr c
2A93 EA         +1  6869         mov a,r2
2A94 9508       +1  6870         subb    a,8
2A96 700F       +1  6871         jnz done
2A98 EB         +1  6872         mov a,r3
2A99 9509       +1  6873         subb    a,9
2A9B 7008       +1  6874         jnz done1
2A9D EC         +1  6875         mov a,r4
2A9E 950A       +1  6876         subb    a,10
2AA0 7003       +1  6877         jnz done1
2AA2 ED         +1  6878         mov a,r5
2AA3 950B       +1  6879         subb    a,11
2AA5            +1  6880     done1:
2AA5 C2D2       +1  6881         clr ov      ;overflow is significant only for top byte
2AA7            +1  6882     done:
2AA7 22         +1  6883         ret
                +1  6884     
                +1  6885     ;   Load long into r2-5 from [dptr]
                +1  6886     
2AA8            +1  6887     ldc_long:
2AA8 E583       +1  6888         mov a,dph       ;is it in on board memory
2AAA 6010       +1  6889         jz  onboard     ;yes
2AAC E4         +1  6890         clr a
2AAD 93         +1  6891         movc    a,@a+dptr
2AAE FA         +1  6892         mov r2,a
2AAF 7401       +1  6893         mov a,#1
2AB1 93         +1  6894         movc    a,@a+dptr
2AB2 FB         +1  6895         mov r3,a
2AB3 7402       +1  6896         mov a,#2
2AB5 93         +1  6897         movc    a,@a+dptr
2AB6 FC         +1  6898         mov r4,a
2AB7 7403       +1  6899         mov a,#3
2AB9 93         +1  6900         movc    a,@a+dptr
2ABA FD         +1  6901         mov r5,a
2ABB 22         +1  6902         ret
2ABC            +1  6903     onboard:
2ABC A882       +1  6904         mov r0,dpl
2ABE E6         +1  6905         mov a,@r0
2ABF FA         +1  6906         mov r2,a
2AC0 08         +1  6907         inc r0
2AC1 E6         +1  6908         mov a,@r0
2AC2 FB         +1  6909         mov r3,a
2AC3 08         +1  6910         inc r0
2AC4 E6         +1  6911         mov a,@r0
2AC5 FC         +1  6912         mov r4,a
2AC6 08         +1  6913         inc r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   111

2AC7 E6         +1  6914         mov a,@r0
2AC8 FD         +1  6915         mov r5,a
2AC9 22         +1  6916         ret
                +1  6917     
                +1  6918     ;**************************************
                +1  6919     ;загрузить ltemp...+3 из памяти программ
                +1  6920     ;mov    dptr,#CH5
                +1  6921     ;call   ldc_ltemp        ltemp <--5
                +1  6922     ;**************************************
2ACA            +1  6923     ldc_ltemp:
2ACA E583       +1  6924         mov a,dph       ;is it in on board memory
2ACC 6014       +1  6925         jz  oboard      ;yes
2ACE E4         +1  6926         clr a
2ACF 93         +1  6927         movc    a,@a+dptr
2AD0 F508       +1  6928         mov 8,a
2AD2 7401       +1  6929         mov a,#1
2AD4 93         +1  6930         movc    a,@a+dptr
2AD5 F509       +1  6931         mov 9,a
2AD7 7402       +1  6932         mov a,#2
2AD9 93         +1  6933         movc    a,@a+dptr
2ADA F50A       +1  6934         mov 10,a
2ADC 7403       +1  6935         mov a,#3
2ADE 93         +1  6936         movc    a,@a+dptr
2ADF F50B       +1  6937         mov 11,a
2AE1 22         +1  6938         ret
2AE2            +1  6939     oboard:
2AE2 A882       +1  6940         mov r0,dpl
2AE4 8608       +1  6941         mov 8,@r0
2AE6 08         +1  6942         inc r0
2AE7 8609       +1  6943         mov 9,@r0
2AE9 08         +1  6944         inc r0
2AEA 860A       +1  6945         mov 10,@r0
2AEC 08         +1  6946         inc r0
2AED 860B       +1  6947         mov 11,@r0
2AEF 22         +1  6948         ret
                +1  6949     
                +1  6950     ;*****************************
                +1  6951     ;mov    dptr,#k1
                +1  6952     ;call   ldx_long
                +1  6953     ;k1->r2..r5
                +1  6954     ;*****************************
                +1  6955     ;   Load long into r2-5 from [dptr]
                +1  6956     ;
                +1  6957     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2AF0            +1  6958     ldx_long:
2AF0 E583       +1  6959         mov a,dph       ;is it in on board memory
2AF2 6014       +1  6960         jz  onboar1        ;yes
2AF4 C082       +1  6961         push    dpl
2AF6 C083       +1  6962         push    dph
2AF8 E0         +1  6963         movx    a,@dptr
2AF9 FA         +1  6964         mov r2,a
2AFA A3         +1  6965         inc dptr
2AFB E0         +1  6966         movx    a,@dptr
2AFC FB         +1  6967         mov r3,a
2AFD A3         +1  6968         inc dptr
2AFE E0         +1  6969         movx    a,@dptr
2AFF FC         +1  6970         mov r4,a
2B00 A3         +1  6971         inc dptr
2B01 E0         +1  6972         movx    a,@dptr
2B02 FD         +1  6973         mov r5,a
2B03 D083       +1  6974         pop dph
2B05 D082       +1  6975         pop dpl
2B07 22         +1  6976         ret
2B08            +1  6977     onboar1:
2B08 A882       +1  6978         mov r0,dpl
2B0A E6         +1  6979         mov a,@r0
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   112

2B0B FA         +1  6980         mov r2,a
2B0C 08         +1  6981         inc r0
2B0D E6         +1  6982         mov a,@r0
2B0E FB         +1  6983         mov r3,a
2B0F 08         +1  6984         inc r0
2B10 E6         +1  6985         mov a,@r0
2B11 FC         +1  6986         mov r4,a
2B12 08         +1  6987         inc r0
2B13 E6         +1  6988         mov a,@r0
2B14 FD         +1  6989         mov r5,a
2B15 22         +1  6990         ret
                +1  6991     
                +1  6992     ;*********************************
                +1  6993     ;mov    dptr,#k2
                +1  6994     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6995     ;**********************************
2B16            +1  6996     ldx_ltemp:
2B16 E583       +1  6997         mov a,dph       ;is it in on board memory
2B18 6010       +1  6998         jz  oboard1     ;yes
2B1A E0         +1  6999         movx    a,@dptr
2B1B F508       +1  7000         mov 8,a
2B1D A3         +1  7001         inc dptr
2B1E E0         +1  7002         movx    a,@dptr
2B1F F509       +1  7003         mov 9,a
2B21 A3         +1  7004         inc dptr
2B22 E0         +1  7005         movx    a,@dptr
2B23 F50A       +1  7006         mov 10,a
2B25 A3         +1  7007         inc dptr
2B26 E0         +1  7008         movx    a,@dptr
2B27 F50B       +1  7009         mov 11,a
2B29 22         +1  7010         ret
2B2A            +1  7011     oboard1:
2B2A A882       +1  7012         mov r0,dpl
2B2C 8608       +1  7013         mov 8,@r0
2B2E 08         +1  7014         inc r0
2B2F 8609       +1  7015         mov 9,@r0
2B31 08         +1  7016         inc r0
2B32 860A       +1  7017         mov 10,@r0
2B34 08         +1  7018         inc r0
2B35 860B       +1  7019         mov 11,@r0
2B37 22         +1  7020         ret
                +1  7021     ;   Long division routines for 8051
                +1  7022     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  7023     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  7024     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  7025     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  7026     ;   r1 must be saved by the caller.
                +1  7027     ;   This is long unsigned division.
                +1  7028     
                +1  7029     
                +1  7030     ;   Register usage:
                +1  7031     ;       r0 loop counter
                +1  7032     ;       xtemp (12-15) accumulates quotient
                +1  7033     ;       r5-r2 holds dividend
                +1  7034     ;       ltemp holds divisor
                +1  7035     
                +1  7036     ;************************************
                +1  7037     ;r2..r5-делимое
                +1  7038     ;ltemp..-делитель
                +1  7039     ;частное -r2..r5
                +1  7040     ;*************************************
2B38            +1  7041     divide:
2B38 E4         +1  7042         clr a
2B39 F8         +1  7043         mov r0,a        ;initialize count
2B3A F50C       +1  7044         mov xtemp,a     ;zero quotient
2B3C F50D       +1  7045         mov xtemp+1,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   113

2B3E F50E       +1  7046         mov xtemp+2,a
2B40 F50F       +1  7047         mov xtemp+3,a
2B42 ED         +1  7048         mov a,r5        ;check for zero dividend
2B43 4C         +1  7049         orl a,r4
2B44 4B         +1  7050         orl a,r3
2B45 4A         +1  7051         orl a,r2
2B46 600B       +1  7052         jz  jfinis
2B48 E508       +1  7053         mov a,ltemp     ;check for zero divisor
2B4A 4509       +1  7054         orl a,ltemp+1
2B4C 450A       +1  7055         orl a,ltemp+2
2B4E 450B       +1  7056         orl a,ltemp+3
2B50 7037       +1  7057         jnz midl
2B52 22         +1  7058         ret
                +1  7059     
2B53 020000   F +1  7060     jfinis: jmp finis
                +1  7061     
2B56            +1  7062     loops:
2B56 EA         +1  7063         mov a,r2
2B57 C3         +1  7064         clr c
2B58 9508       +1  7065         subb    a,ltemp+0   ;is divisor greater than dividend yet
2B5A 4033       +1  7066         jc  yes     ;yes, go no further
2B5C 7013       +1  7067         jnz no
2B5E EB         +1  7068         mov a,r3
2B5F 9509       +1  7069         subb    a,ltemp+1
2B61 402C       +1  7070         jc  yes
2B63 700C       +1  7071         jnz no
2B65 EC         +1  7072         mov a,r4
2B66 950A       +1  7073         subb    a,ltemp+2
2B68 4025       +1  7074         jc  yes
2B6A 7005       +1  7075         jnz no
2B6C ED         +1  7076         mov a,r5
2B6D 950B       +1  7077         subb    a,ltemp+3
2B6F 401E       +1  7078         jc  yes
2B71            +1  7079     no:
2B71 E50B       +1  7080         mov a,ltemp+3   ;shift divisor up one bit
2B73 250B       +1  7081         add a,ltemp+3
2B75 F50B       +1  7082         mov ltemp+3,a
2B77 E50A       +1  7083         mov a,ltemp+2
2B79 350A       +1  7084         addc    a,ltemp+2
2B7B F50A       +1  7085         mov ltemp+2,a
2B7D E509       +1  7086         mov a,ltemp+1
2B7F 3509       +1  7087         addc    a,ltemp+1
2B81 F509       +1  7088         mov ltemp+1,a
2B83 E508       +1  7089         mov a,ltemp+0
2B85 3508       +1  7090         addc    a,ltemp+0
2B87 F508       +1  7091         mov ltemp+0,a
2B89            +1  7092     midl:
2B89 08         +1  7093         inc r0      ;increment count
2B8A E508       +1  7094         mov a,ltemp+0   ;check for safe to shift some more
2B8C 30E7C7     +1  7095         jnb acc.7,loops  ;loop if top bit clear
2B8F            +1  7096     yes:
2B8F E508       +1  7097         mov a,ltemp+0
2B91 C3         +1  7098         clr c
2B92 9A         +1  7099         subb    a,r2        ;can we subtract now?
2B93 401A       +1  7100         jc  dosub       ;yes, go and do it
2B95 7015       +1  7101         jnz nosub
2B97 E509       +1  7102         mov a,ltemp+1
2B99 9B         +1  7103         subb    a,r3
2B9A 4013       +1  7104         jc  dosub
2B9C 700E       +1  7105         jnz nosub
2B9E E50A       +1  7106         mov a,ltemp+2
2BA0 9C         +1  7107         subb    a,r4
2BA1 400C       +1  7108         jc  dosub
2BA3 7007       +1  7109         jnz nosub
2BA5 E50B       +1  7110         mov a,ltemp+3
2BA7 9D         +1  7111         subb    a,r5
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   114

2BA8 4005       +1  7112         jc  dosub
2BAA 6003       +1  7113         jz  dosub
2BAC            +1  7114     nosub:
2BAC C3         +1  7115         clr c
2BAD 8012       +1  7116         sjmp    dosh
2BAF            +1  7117     dosub:
2BAF C3         +1  7118         clr c       ;subtract divisor from dividend
2BB0 ED         +1  7119         mov a,r5
2BB1 950B       +1  7120         subb    a,ltemp+3
2BB3 FD         +1  7121         mov r5,a
2BB4 EC         +1  7122         mov a,r4
2BB5 950A       +1  7123         subb    a,ltemp+2
2BB7 FC         +1  7124         mov r4,a
2BB8 EB         +1  7125         mov a,r3
2BB9 9509       +1  7126         subb    a,ltemp+1
2BBB FB         +1  7127         mov r3,a
2BBC EA         +1  7128         mov a,r2
2BBD 9508       +1  7129         subb    a,ltemp+0
2BBF FA         +1  7130         mov r2,a
2BC0 D3         +1  7131         setb    c       ;now set bit for quotient
2BC1            +1  7132     dosh:
2BC1 E50F       +1  7133         mov a,xtemp+3
2BC3 33         +1  7134         rlc a
2BC4 F50F       +1  7135         mov xtemp+3,a
2BC6 E50E       +1  7136         mov a,xtemp+2
2BC8 33         +1  7137         rlc a
2BC9 F50E       +1  7138         mov xtemp+2,a
2BCB E50D       +1  7139         mov a,xtemp+1
2BCD 33         +1  7140         rlc a
2BCE F50D       +1  7141         mov xtemp+1,a
2BD0 E50C       +1  7142         mov a,xtemp+0
2BD2 33         +1  7143         rlc a
2BD3 F50C       +1  7144         mov xtemp+0,a
2BD5 E508       +1  7145         mov a,ltemp+0       ;shift divisor down
2BD7 C3         +1  7146         clr c
2BD8 13         +1  7147         rrc a
2BD9 F508       +1  7148         mov ltemp+0,a
2BDB E509       +1  7149         mov a,ltemp+1
2BDD 13         +1  7150         rrc a
2BDE F509       +1  7151         mov ltemp+1,a
2BE0 E50A       +1  7152         mov a,ltemp+2
2BE2 13         +1  7153         rrc a
2BE3 F50A       +1  7154         mov ltemp+2,a
2BE5 E50B       +1  7155         mov a,ltemp+3
2BE7 13         +1  7156         rrc a
2BE8 F50B       +1  7157         mov ltemp+3,a
                +1  7158     
2BEA D8A3       +1  7159         djnz    r0,yes      ;and continue with the rest
                +1  7160     
2BEC            +1  7161     finis:
2BEC 8D0B       +1  7162         mov ltemp+3,r5
2BEE 8C0A       +1  7163         mov ltemp+2,r4
2BF0 8B09       +1  7164         mov ltemp+1,r3
2BF2 8A08       +1  7165         mov ltemp+0,r2
2BF4 AD0F       +1  7166         mov r5,xtemp+3
2BF6 AC0E       +1  7167         mov r4,xtemp+2
2BF8 AB0D       +1  7168         mov r3,xtemp+1
2BFA AA0C       +1  7169         mov r2,xtemp+0
2BFC 22         +1  7170         ret         ;and return with the satisfaction of a job well done
                +1  7171     
                +1  7172     
                +1  7173     ;   Long multiplication
                +1  7174     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7175     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7176     
                +1  7177     ;**********************************
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   115

                +1  7178     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7179     ;ст  мл
                +1  7180     ;**********************************
2BFD            +1  7181     llmul:
2BFD            +1  7182     almul:
2BFD            +1  7183     lmul:
2BFD ED         +1  7184         mov a,r5        ;low order byte
2BFE 850BF0     +1  7185         mov b,ltemp+3       ;times low order byte
2C01 A4         +1  7186         mul ab
2C02 F50F       +1  7187         mov xtemp+3,a       ;store low
2C04 85F00E     +1  7188         mov xtemp+2,b   ;and high
2C07 ED         +1  7189         mov a,r5        ;low order
2C08 850AF0     +1  7190         mov b,ltemp+2   ;times next
2C0B A4         +1  7191         mul ab
2C0C 250E       +1  7192         add a,xtemp+2   ;add in
2C0E F50E       +1  7193         mov xtemp+2,a
2C10 E5F0       +1  7194         mov a,b
2C12 3400       +1  7195         addc    a,#0
2C14 F50D       +1  7196         mov xtemp+1,a
2C16 ED         +1  7197         mov a,r5
2C17 8509F0     +1  7198         mov b,ltemp+1
2C1A A4         +1  7199         mul ab
2C1B 250D       +1  7200         add a,xtemp+1
2C1D F50D       +1  7201         mov xtemp+1,a
2C1F E5F0       +1  7202         mov a,b
2C21 3400       +1  7203         addc    a,#0
2C23 F50C       +1  7204         mov xtemp+0,a
2C25 ED         +1  7205         mov a,r5
2C26 8508F0     +1  7206         mov b,ltemp+0
2C29 A4         +1  7207         mul ab
2C2A 250C       +1  7208         add a,xtemp+0
2C2C F50C       +1  7209         mov xtemp+0,a
2C2E EC         +1  7210         mov a,r4
2C2F 850BF0     +1  7211         mov b,ltemp+3
2C32 A4         +1  7212         mul ab
2C33 250E       +1  7213         add a,xtemp+2
2C35 F50E       +1  7214         mov xtemp+2,a
2C37 E5F0       +1  7215         mov a,b
2C39 350D       +1  7216         addc    a,xtemp+1
2C3B F50D       +1  7217         mov xtemp+1,a
2C3D E50C       +1  7218         mov a,xtemp+0
2C3F 3400       +1  7219         addc    a,#0
2C41 F50C       +1  7220         mov xtemp+0,a
2C43 EC         +1  7221         mov a,r4
2C44 850AF0     +1  7222         mov b,ltemp+2
2C47 A4         +1  7223         mul ab
2C48 250D       +1  7224         add a,xtemp+1
2C4A F50D       +1  7225         mov xtemp+1,a
2C4C E5F0       +1  7226         mov a,b
2C4E 350C       +1  7227         addc    a,xtemp+0
2C50 F50C       +1  7228         mov xtemp+0,a
2C52 EC         +1  7229         mov a,r4
2C53 8509F0     +1  7230         mov b,ltemp+1
2C56 A4         +1  7231         mul ab
2C57 250C       +1  7232         add a,xtemp+0
2C59 F50C       +1  7233         mov xtemp+0,a
                +1  7234     
2C5B EB         +1  7235         mov a,r3
2C5C 850BF0     +1  7236         mov b,ltemp+3
2C5F A4         +1  7237         mul ab
2C60 250D       +1  7238         add a,xtemp+1
2C62 F50D       +1  7239         mov xtemp+1,a
2C64 E5F0       +1  7240         mov a,b
2C66 350C       +1  7241         addc    a,xtemp+0
2C68 F50C       +1  7242         mov xtemp+0,a
2C6A EB         +1  7243         mov a,r3
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   116

2C6B 850AF0     +1  7244         mov b,ltemp+2
2C6E A4         +1  7245         mul ab
2C6F 250C       +1  7246         add a,xtemp+0
2C71 F50C       +1  7247         mov xtemp+0,a
                +1  7248     
2C73 EA         +1  7249         mov a,r2
2C74 850BF0     +1  7250         mov b,ltemp+3
2C77 A4         +1  7251         mul ab
2C78 250C       +1  7252         add a,xtemp+0
2C7A FA         +1  7253         mov r2,a
2C7B AB0D       +1  7254         mov r3,xtemp+1
2C7D AC0E       +1  7255         mov r4,xtemp+2
2C7F AD0F       +1  7256         mov r5,xtemp+3
                +1  7257     
2C81 22         +1  7258         ret         ;all done
                +1  7259     ;******************************
                +1  7260     ;из содержимого  r2-r5  вычесть
                +1  7261     ;содержимое          ltemp..ltemp+3
                +1  7262     ;******************************
2C82            +1  7263     llsub:
2C82            +1  7264      lsub:
2C82 ED         +1  7265         mov a,r5
2C83 C3         +1  7266         clr c
2C84 950B       +1  7267         subb    a,11
2C86 FD         +1  7268         mov r5,a
2C87 EC         +1  7269         mov a,r4
2C88 950A       +1  7270         subb    a,10
2C8A FC         +1  7271         mov r4,a
2C8B EB         +1  7272         mov a,r3
2C8C 9509       +1  7273         subb    a,9
2C8E FB         +1  7274         mov r3,a
2C8F EA         +1  7275         mov a,r2
2C90 9508       +1  7276         subb    a,8
2C92 FA         +1  7277         mov r2,a
2C93 22         +1  7278         ret
                +1  7279     
                +1  7280     ;***********************************************
                +1  7281     ;                                                      ст мл
                +1  7282     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7283     ;  r0- адрес младшего байта !!!
                +1  7284     ;результат- r2..r5
                +1  7285     ;***********************************************
                +1  7286     
2C94 C3         +1  7287     ladd:    clr       c
2C95 ED         +1  7288          mov       a,r5
2C96 26         +1  7289          add       a,@r0
2C97 FD         +1  7290          mov       r5,a
2C98 18         +1  7291          dec       r0
2C99 EC         +1  7292          mov       a,r4
2C9A 36         +1  7293          addc      a,@r0
2C9B FC         +1  7294          mov       r4,a
2C9C 18         +1  7295          dec       r0
2C9D EB         +1  7296          mov       a,r3
2C9E 36         +1  7297          addc      a,@r0
2C9F FB         +1  7298          mov       r3,a
2CA0 18         +1  7299          dec       r0
2CA1 EA         +1  7300          mov       a,r2
2CA2 36         +1  7301          addc      a,@r0
2CA3 FA         +1  7302          mov       r2,a
2CA4 22         +1  7303          ret
                +1  7304     ;***********************************************
                +1  7305     ;                                                      ст мл
                +1  7306     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7307     ;  r0- адрес младшего байта !!!
                +1  7308     ;результат- r2..r5
                +1  7309     ;***********************************************
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   117

                +1  7310     
2CA5 C3         +1  7311     laddx:    clr       c
2CA6 E2         +1  7312                                             movx            a,@r0
2CA7 2D         +1  7313                                             add                     a,r5
2CA8 FD         +1  7314               mov     r5,a
2CA9 18         +1  7315                             dec     r0
2CAA E2         +1  7316                             movx    a,@r0
2CAB 3C         +1  7317                             addc    a,r4
2CAC FC         +1  7318                             mov     r4,a
2CAD 18         +1  7319                             dec     r0
2CAE E2         +1  7320                             movx    a,@r0
2CAF 3B         +1  7321                             addc    a,r3
2CB0 FB         +1  7322                             mov     r3,a
2CB1 18         +1  7323                             dec     r0
2CB2 E2         +1  7324                             movx    a,@r0
2CB3 3A         +1  7325                             addc    a,r2
2CB4 FA         +1  7326                             mov       r2,a
2CB5 22         +1  7327                             ret
                +1  7328     
                +1  7329     ;***********************************************
                +1  7330     ;                                                      ст мл
                +1  7331     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7332     ;  dptr- адрес младшего байта !!!
                +1  7333     ;результат- r2..r5
                +1  7334     ;***********************************************
                +1  7335     
2CB6 C3         +1  7336     addx:    clr       c
2CB7 E0         +1  7337                                             movx            a,@dptr
2CB8 2D         +1  7338                                             add                     a,r5
2CB9 FD         +1  7339               mov     r5,a
2CBA 120000   F +1  7340                             call            dedptr;dec     dptr
2CBD E0         +1  7341                             movx    a,@dptr
2CBE 3C         +1  7342                             addc    a,r4
2CBF FC         +1  7343                             mov     r4,a
2CC0 120000   F +1  7344                             call            dedptr;dec     dptr
2CC3 E0         +1  7345                             movx    a,@dptr
2CC4 3B         +1  7346                             addc    a,r3
2CC5 FB         +1  7347                             mov     r3,a
2CC6 120000   F +1  7348                             call            dedptr;dec     dptr
2CC9 E0         +1  7349                             movx    a,@dptr
2CCA 3A         +1  7350                             addc    a,r2
2CCB FA         +1  7351                             mov       r2,a
2CCC 22         +1  7352                             ret
                +1  7353     
2CCD C0D0       +1  7354     dedptr:         push    psw
2CCF C3         +1  7355                                             clr             c
2CD0 E582       +1  7356                                             mov             a,dpl
2CD2 9401       +1  7357                                             subb    a,#1
2CD4 F582       +1  7358                                             mov             dpl,a
2CD6 E583       +1  7359                                             mov             a,dph
2CD8 9400       +1  7360                                             subb    a,#0
2CDA F583       +1  7361                                             mov             dph,a
2CDC D0D0       +1  7362                                             pop             psw
2CDE 22         +1  7363                                             ret
                    7364     
                    7365     ;$include (d:\amp\floatm.asm)
                +1  7366     ;       Copyright (C) 1988 HI-TECH Software
                +1  7367     
                +1  7368     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7369     
                +1  7370     ;       The format of floating point numbers is as follows:
                +1  7371     
                +1  7372     ;       -----------------
                +1  7373     ;       *     sign      *  1 bit
                +1  7374     ;       -----------------
                +1  7375     ;       *   exponent    *  8 bits
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   118

                +1  7376     ;       -----------------
                +1  7377     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7378     ;       -----------------
                +1  7379     
                +1  7380     
                +1  7381     ;       As usual for the 8051 the memory layout has the most significant
                +1  7382     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7383     ;       lowest address.
                +1  7384     
                +1  7385     ;       Calling conventions:
                +1  7386     
                +1  7387     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7388     ;
                +1  7389     ;       Return value is in r2-r5
                +1  7390     
                +1  7391     ;       Naming conventions: A routine name is constructed by
                +1  7392     
                +1  7393     ;             ASOP
                +1  7394     
                +1  7395     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7396     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7397     ;       Conversion routines are named
                +1  7398     
                +1  7399     ;               AStof
                +1  7400     
                +1  7401     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7402     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7403     ;       Conversion from float to integer is ftol.
                +1  7404     
                +1  7405     ;               .ORG  5000h
                +1  7406     ;               .CODE
                +1  7407     ;       seg     c_text
                +1  7408     
                +1  7409     ;;      $MOD812
----            +1  7410             CSEG
                +1  7411             ;ORG 1000h
                +1  7412     
                +1  7413                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7414             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7415     
                +1  7416     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7417     ;       macros
                +1  7418     
                +1  7419     saveregs        macro
                +1  7420             push    7
                +1  7421             push    6
                +1  7422             push    1
                +1  7423             push    0
                +1  7424             endm
                +1  7425     
                +1  7426     restregs        macro
                +1  7427             pop     0
                +1  7428             pop     1
                +1  7429             pop     6
                +1  7430             pop     7
                +1  7431             endm
                +1  7432     
                +1  7433     ;addr   
                +1  7434     dan     macro   pad
                +1  7435             mov     a,r5
                +1  7436             add     a,pad+3
                +1  7437             mov     pad+3,a
                +1  7438             mov     a,pad+2
                +1  7439             addc    a,r4
                +1  7440             mov     pad+2,a
                +1  7441             mov     a,pad+1
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   119

                +1  7442             addc    a,r3
                +1  7443             mov     pad+1,a
                +1  7444             mov     a,pad+0
                +1  7445             addc    a,r2
                +1  7446             mov     pad,a
                +1  7447             endm
                +1  7448     
                +1  7449     addl    macro  addr
                +1  7450             mov     a,r5
                +1  7451             add     a,addr+3
                +1  7452             mov     r5,a
                +1  7453             mov     a,addr+2
                +1  7454             addc    a,r4
                +1  7455             mov     r4,a
                +1  7456             mov     a,addr+1
                +1  7457             addc    a,r3
                +1  7458             mov     r3,a
                +1  7459             mov     a,addr+0
                +1  7460             addc    a,r2
                +1  7461             mov     r2,a
                +1  7462             endm
                +1  7463     
                +1  7464     
                +1  7465     add1    macro
                +1  7466             mov     a,r5
                +1  7467             add     a,#1
                +1  7468             mov     r5,a
                +1  7469             clr     a
                +1  7470             addc    a,r4
                +1  7471             mov     r4,a
                +1  7472             clr     a
                +1  7473             addc    a,r3
                +1  7474             mov     r3,a
                +1  7475             clr     a
                +1  7476             addc    a,r2
                +1  7477             mov     r2,a
                +1  7478             endm
                +1  7479     
                +1  7480     shfdn   macro  addr
                +1  7481             clr     c
                +1  7482             mov     a,addr
                +1  7483             rrc     a
                +1  7484             mov     addr,a
                +1  7485             mov     a,addr+1
                +1  7486             rrc     a
                +1  7487             mov     addr+1,a
                +1  7488             mov     a,addr+2
                +1  7489             rrc     a
                +1  7490             mov     addr+2,a
                +1  7491             mov     a,addr+3
                +1  7492             rrc     a
                +1  7493             mov     addr+3,a
                +1  7494             endm
                +1  7495     
                +1  7496     shfup   macro  addr
                +1  7497             clr     c
                +1  7498             mov     a,addr+3
                +1  7499             rlc     a
                +1  7500             mov     addr+3,a
                +1  7501             mov     a,addr+2
                +1  7502             rlc     a
                +1  7503             mov     addr+2,a
                +1  7504             mov     a,addr+1
                +1  7505             rlc     a
                +1  7506             mov     addr+1,a
                +1  7507             mov     a,addr
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   120

                +1  7508             rlc     a
                +1  7509             mov     addr,a
                +1  7510             endm
                +1  7511     
                +1  7512     rshift  macro
                +1  7513             clr     c
                +1  7514             mov     a,r2
                +1  7515             rrc     a
                +1  7516             mov     r2,a
                +1  7517             mov     a,r3
                +1  7518             rrc     a
                +1  7519             mov     r3,a
                +1  7520             mov     a,r4
                +1  7521             rrc     a
                +1  7522             mov     r4,a
                +1  7523             mov     a,r5
                +1  7524             rrc     a
                +1  7525             mov     r5,a
                +1  7526             endm
                +1  7527     rshift1 macro
                +1  7528             setb    c
                +1  7529             mov     a,r2
                +1  7530             rrc     a
                +1  7531             mov     r2,a
                +1  7532             mov     a,r3
                +1  7533             rrc     a
                +1  7534             mov     r3,a
                +1  7535             mov     a,r4
                +1  7536             rrc     a
                +1  7537             mov     r4,a
                +1  7538             mov     a,r5
                +1  7539             rrc     a
                +1  7540             mov     r5,a
                +1  7541             endm
                +1  7542     
                +1  7543     
                +1  7544     lshift  macro
                +1  7545             mov     a,r5
                +1  7546             rlc     a
                +1  7547             mov     r5,a
                +1  7548             mov     a,r4
                +1  7549             rlc     a
                +1  7550             mov     r4,a
                +1  7551             mov     a,r3
                +1  7552             rlc     a
                +1  7553             mov     r3,a
                +1  7554             mov     a,r2
                +1  7555             rlc     a
                +1  7556             mov     r2,a
                +1  7557             endm
                +1  7558     
                +1  7559     neg1    macro
                +1  7560             clr     c
                +1  7561             clr     a
                +1  7562             subb    a,r5
                +1  7563             mov     r5,a
                +1  7564             clr     a
                +1  7565             subb    a,r4
                +1  7566             mov     r4,a
                +1  7567             clr     a
                +1  7568             subb    a,r3
                +1  7569             mov     r3,a
                +1  7570             clr     a
                +1  7571             subb    a,r2
                +1  7572             mov     r2,a
                +1  7573             endm
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   121

                +1  7574     
                +1  7575     negm    macro  addr
                +1  7576             clr     c
                +1  7577             clr     a
                +1  7578             subb    a,addr+3
                +1  7579             mov     addr+3,a
                +1  7580             clr     a
                +1  7581             subb    a,addr+2
                +1  7582             mov     addr+2,a
                +1  7583             clr     a
                +1  7584             subb    a,addr+1
                +1  7585             mov     addr+1,a
                +1  7586             clr     a
                +1  7587             subb    a,addr
                +1  7588             mov     addr,a
                +1  7589             endm
                +1  7590     
                +1  7591     copytor macro  addr
                +1  7592             mov     r2,addr
                +1  7593             mov     r3,addr+1
                +1  7594             mov     r4,addr+2
                +1  7595             mov     r5,addr+3
                +1  7596             endm
                +1  7597     
                +1  7598     
                +1  7599     copyrto macro  addr
                +1  7600             mov     addr,r2
                +1  7601             mov     addr+1,r3
                +1  7602             mov     addr+2,r4
                +1  7603             mov     addr+3,r5
                +1  7604             endm
                +1  7605     
                +1  7606     
                +1  7607     ;       Internal representation: in this set of routines a floating number
                +1  7608     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7609     
                +1  7610     ;       Stack offset values
                +1  7611     ;ltemp   equ     28h
                +1  7612     
  0006          +1  7613     cntr    equ     6               ;r6 is the counter
  0007          +1  7614     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7615     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7616     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7617     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7618     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7619     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7620     
                +1  7621     
                +1  7622     
                +1  7623     
                +1  7624     
                +1  7625     ;DECSIZE EQU     10
                +1  7626     ;NUMSIZE EQU     4
                +1  7627     ;RR4     EQU     4
                +1  7628     ;RR5     EQU     5
                +1  7629     
                +1  7630     ;       unpack1 - unpacks the left operand
                +1  7631     
009E            +1  7632     unpack1:
009E EA         +1  7633             mov     a,r2            ;get sign
009F 5480       +1  7634             anl     a,#80h
00A1 530740     +1  7635             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7636             orl     sign,a          ;store sign
00A6 EB         +1  7637             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7638             rlc     a               ;rotate into carry
00A8 EA         +1  7639             mov     a,r2            ;get rest of exponent
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   122

00A9 33         +1  7640             rlc     a               ;and make it 8 bits
00AA F8         +1  7641             mov     r0,a            ;store it
00AB 6006       +1  7642             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7643             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7644             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7645             ret
00B3            +1  7646     zer1:
00B3 E4         +1  7647             clr     a
00B4 FA         +1  7648             mov     r2,a
00B5 FB         +1  7649             mov     r3,a
00B6 FC         +1  7650             mov     r4,a
00B7 FD         +1  7651             mov     r5,a            ;zero mantissa
00B8 F8         +1  7652             mov     r0,a            ;zero exponent
00B9 22         +1  7653             ret
                +1  7654     
                +1  7655     ;       unpack2 - unpacks right operand
                +1  7656     
00BA            +1  7657     unpack2:
00BA E508       +1  7658             mov     a,ltemp         ;get sign
00BC 13         +1  7659             rrc     a               ;shift down
00BD 5440       +1  7660             anl     a,#40h          ;mask out sign
00BF 530780     +1  7661             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7662             orl     sign,a
00C4 E509       +1  7663             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7664             rlc     a               ;rotate into carry
00C7 E508       +1  7665             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7666             rlc     a               ;and make it 8 bits
00CA F9         +1  7667             mov     r1,a            ;store it
00CB 6007       +1  7668             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7669             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7670             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7671             ret
00D4            +1  7672     zer2:
00D4 E4         +1  7673             clr     a
00D5 F508       +1  7674             mov     ltemp,a
00D7 F509       +1  7675             mov     ltemp+1,a
00D9 F50A       +1  7676             mov     ltemp+2,a
00DB F50B       +1  7677             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7678             ret
                +1  7679     
                +1  7680     ;       pack1 - put operand 1 back into float format
                +1  7681     
00DE            +1  7682     pack1:
00DE E8         +1  7683             mov     a,r0            ;get exponent
00DF C3         +1  7684             clr     c
00E0 13         +1  7685             rrc     a               ;shift down 1 bit
00E1 530780     +1  7686             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7687             orl     a,r7            ;or in sign bit
00E5 FA         +1  7688             mov     r2,a            ;store
00E6 E8         +1  7689             mov     a,r0            ;get other bit
00E7 03         +1  7690             rr      a               ;rotate into hi bit
00E8 5480       +1  7691             anl     a,#80h          ;mask
00EA 53037F     +1  7692             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7693             orl     mant1+1,a       ;put in
00EF 22         +1  7694             ret
                +1  7695     
                +1  7696     
                +1  7697     ;       norm1 - normalize the unpacked value in 1
                +1  7698     
00F0            +1  7699     norm1:
00F0 E8         +1  7700             mov     a,r0            ;get exponent
00F1 60C0       +1  7701             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7702             mov     a,r2            ;get hi byte
00F4 6023       +1  7703             jz      norup           ;zero, so shift up if anything
00F6            +1  7704     nordn:
00F6 EA         +1  7705             mov     a,r2            ;get hi byte
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   123

00F7 B4010D     +1  7706             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7707+3           add1                    ;add in a rounding bit
00FA ED         +1  7708+1           mov     a,r5
00FB 2401       +1  7709+1           add     a,#1
00FD FD         +1  7710+1           mov     r5,a
00FE E4         +1  7711+1           clr     a
00FF 3C         +1  7712+1           addc    a,r4
0100 FC         +1  7713+1           mov     r4,a
0101 E4         +1  7714+1           clr     a
0102 3B         +1  7715+1           addc    a,r3
0103 FB         +1  7716+1           mov     r3,a
0104 E4         +1  7717+1           clr     a
0105 3A         +1  7718+1           addc    a,r2
0106 FA         +1  7719+1           mov     r2,a
0107            +1  7720     nordn1:
                +1  7721+3           rshift                  ;shift down 1 bit
0107 C3         +1  7722+1           clr     c
0108 EA         +1  7723+1           mov     a,r2
0109 13         +1  7724+1           rrc     a
010A FA         +1  7725+1           mov     r2,a
010B EB         +1  7726+1           mov     a,r3
010C 13         +1  7727+1           rrc     a
010D FB         +1  7728+1           mov     r3,a
010E EC         +1  7729+1           mov     a,r4
010F 13         +1  7730+1           rrc     a
0110 FC         +1  7731+1           mov     r4,a
0111 ED         +1  7732+1           mov     a,r5
0112 13         +1  7733+1           rrc     a
0113 FD         +1  7734+1           mov     r5,a
0114 08         +1  7735             inc     r0              ;adjust exponent
0115 EA         +1  7736             mov     a,r2            ;test high byte
0116 70DE       +1  7737             jnz     nordn           ;loop
0118 22         +1  7738             ret                     ;done
                +1  7739     
0119            +1  7740     norup:
0119 4B         +1  7741             orl     a,r3
011A 4C         +1  7742             orl     a,r4
011B 4D         +1  7743             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7744             jz      zer1            ;it is - make it true zero
011E            +1  7745     norup1:
011E EB         +1  7746             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7747             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7748             clr     c
                +1  7749+3           lshift                  ;shift mantissa up
0123 ED         +1  7750+1           mov     a,r5
0124 33         +1  7751+1           rlc     a
0125 FD         +1  7752+1           mov     r5,a
0126 EC         +1  7753+1           mov     a,r4
0127 33         +1  7754+1           rlc     a
0128 FC         +1  7755+1           mov     r4,a
0129 EB         +1  7756+1           mov     a,r3
012A 33         +1  7757+1           rlc     a
012B FB         +1  7758+1           mov     r3,a
012C EA         +1  7759+1           mov     a,r2
012D 33         +1  7760+1           rlc     a
012E FA         +1  7761+1           mov     r2,a
012F 18         +1  7762             dec     r0              ;adjust exponent
0130 80EC       +1  7763             jmp     norup1
0132            +1  7764     norup2:
0132 22         +1  7765             ret                     ;finito
                +1  7766     
                +1  7767     
                +1  7768     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7769     ;       exponents are equal. This requires the smaller number to have
                +1  7770     ;       its exponent incremented and its mantissa shifted right.
                +1  7771     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   124

0133            +1  7772     denorm:
0133 E8         +1  7773             mov     a,r0
0134 C3         +1  7774             clr     c
0135 99         +1  7775             subb    a,r1            ;compare exponents
0136 5029       +1  7776             jnc     up2a            ;shift operand 2
0138            +1  7777     up1:
0138 08         +1  7778             inc     r0              ;increment exponent
                +1  7779+3           rshift                  ;shift mantissa down
0139 C3         +1  7780+1           clr     c
013A EA         +1  7781+1           mov     a,r2
013B 13         +1  7782+1           rrc     a
013C FA         +1  7783+1           mov     r2,a
013D EB         +1  7784+1           mov     a,r3
013E 13         +1  7785+1           rrc     a
013F FB         +1  7786+1           mov     r3,a
0140 EC         +1  7787+1           mov     a,r4
0141 13         +1  7788+1           rrc     a
0142 FC         +1  7789+1           mov     r4,a
0143 ED         +1  7790+1           mov     a,r5
0144 13         +1  7791+1           rrc     a
0145 FD         +1  7792+1           mov     r5,a
0146 E8         +1  7793             mov     a,r0
0147 B501EE     +1  7794             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7795             ret
                +1  7796     
014B            +1  7797     up2:
014B 09         +1  7798             inc     r1              ;increment exponent 2
                +1  7799+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7800+1           clr     c
014D E508       +1  7801+1           mov     a,mant2
014F 13         +1  7802+1           rrc     a
0150 F508       +1  7803+1           mov     mant2,a
0152 E509       +1  7804+1           mov     a,mant2+1
0154 13         +1  7805+1           rrc     a
0155 F509       +1  7806+1           mov     mant2+1,a
0157 E50A       +1  7807+1           mov     a,mant2+2
0159 13         +1  7808+1           rrc     a
015A F50A       +1  7809+1           mov     mant2+2,a
015C E50B       +1  7810+1           mov     a,mant2+3
015E 13         +1  7811+1           rrc     a
015F F50B       +1  7812+1           mov     mant2+3,a
0161            +1  7813     up2a:
0161 E8         +1  7814             mov     a,r0            ;compare exponents
0162 B501E6     +1  7815             cjne    a,exp2,up2
0165 22         +1  7816             ret                     ;all done
                +1  7817     ;------------------------------------------------------------------
                +1  7818     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7819     
0166            +1  7820     fladd:
                +1  7821+3           saveregs
0166 C007       +1  7822+1           push    7
0168 C006       +1  7823+1           push    6
016A C001       +1  7824+1           push    1
016C C000       +1  7825+1           push    0
016E 119E       +1  7826             call    unpack1
0170 11BA       +1  7827             call    unpack2
0172 3133       +1  7828             call    denorm
0174 E507       +1  7829             mov     a,sign
0176 30E70D     +1  7830             jnb     acc.7,ok1       ;test left sign
                +1  7831+3           neg1                    ;negate op1
0179 C3         +1  7832+1           clr     c
017A E4         +1  7833+1           clr     a
017B 9D         +1  7834+1           subb    a,r5
017C FD         +1  7835+1           mov     r5,a
017D E4         +1  7836+1           clr     a
017E 9C         +1  7837+1           subb    a,r4
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   125

017F FC         +1  7838+1           mov     r4,a
0180 E4         +1  7839+1           clr     a
0181 9B         +1  7840+1           subb    a,r3
0182 FB         +1  7841+1           mov     r3,a
0183 E4         +1  7842+1           clr     a
0184 9A         +1  7843+1           subb    a,r2
0185 FA         +1  7844+1           mov     r2,a
0186            +1  7845     ok1:
0186 E507       +1  7846             mov     a,sign
0188 30E615     +1  7847             jnb     acc.6,ok2       ;test right sign
                +1  7848+3           negm    mant2           ;negate op2
018B C3         +1  7849+1           clr     c
018C E4         +1  7850+1           clr     a
018D 950B       +1  7851+1           subb    a,mant2+3
018F F50B       +1  7852+1           mov     mant2+3,a
0191 E4         +1  7853+1           clr     a
0192 950A       +1  7854+1           subb    a,mant2+2
0194 F50A       +1  7855+1           mov     mant2+2,a
0196 E4         +1  7856+1           clr     a
0197 9509       +1  7857+1           subb    a,mant2+1
0199 F509       +1  7858+1           mov     mant2+1,a
019B E4         +1  7859+1           clr     a
019C 9508       +1  7860+1           subb    a,mant2
019E F508       +1  7861+1           mov     mant2,a
01A0            +1  7862     ok2:
                +1  7863+3           addl    mant2           ;add mantissas
01A0 ED         +1  7864+1           mov     a,r5
01A1 250B       +1  7865+1           add     a,mant2+3
01A3 FD         +1  7866+1           mov     r5,a
01A4 E50A       +1  7867+1           mov     a,mant2+2
01A6 3C         +1  7868+1           addc    a,r4
01A7 FC         +1  7869+1           mov     r4,a
01A8 E509       +1  7870+1           mov     a,mant2+1
01AA 3B         +1  7871+1           addc    a,r3
01AB FB         +1  7872+1           mov     r3,a
01AC E508       +1  7873+1           mov     a,mant2+0
01AE 3A         +1  7874+1           addc    a,r2
01AF FA         +1  7875+1           mov     r2,a
01B0 E4         +1  7876             clr     a
01B1 FF         +1  7877             mov     r7,a            ;clear sign
01B2 EA         +1  7878             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7879             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7880             mov     r7,a            ;store sign
                +1  7881+3           neg1                    ;negate mantissa
01B7 C3         +1  7882+1           clr     c
01B8 E4         +1  7883+1           clr     a
01B9 9D         +1  7884+1           subb    a,r5
01BA FD         +1  7885+1           mov     r5,a
01BB E4         +1  7886+1           clr     a
01BC 9C         +1  7887+1           subb    a,r4
01BD FC         +1  7888+1           mov     r4,a
01BE E4         +1  7889+1           clr     a
01BF 9B         +1  7890+1           subb    a,r3
01C0 FB         +1  7891+1           mov     r3,a
01C1 E4         +1  7892+1           clr     a
01C2 9A         +1  7893+1           subb    a,r2
01C3 FA         +1  7894+1           mov     r2,a
01C4            +1  7895     ok3:
01C4 11F0       +1  7896             call    norm1
01C6 11DE       +1  7897             call    pack1           ;pack normalized result
                +1  7898+3           restregs                ;and return
01C8 D000       +1  7899+1           pop     0
01CA D001       +1  7900+1           pop     1
01CC D006       +1  7901+1           pop     6
01CE D007       +1  7902+1           pop     7
01D0 22         +1  7903             ret
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   126

                +1  7904     ;-------------------------------------------------------------
                +1  7905     ;       Subtract the number ltemp from the number in r2-r5
                +1  7906     
01D1            +1  7907     flsub:
01D1 630880     +1  7908             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7909             jmp     fladd           ;and add!
                +1  7910     
                +1  7911     ;================================================================
                +1  7912     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7913     
01D6            +1  7914     flcmp:
01D6 EA         +1  7915            mov     a,r2            ;get sign of left
01D7 6508       +1  7916            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7917            jnb     acc.7,cexp      ;same, go check exponent
                +1  7918     ;ifdef SMALL_MODEL
01DC EA         +1  7919             mov     a,r2            ;get sign of left again
01DD 33         +1  7920             rlc     a
01DE 5001       +1  7921             jnc     flout
                +1  7922     ;endif
01E0 D3         +1  7923             setb    c
01E1 22         +1  7924     flout:          ret                    ;return with acc < 0
                +1  7925     
01E2            +1  7926     cexp:
01E2 C3         +1  7927            clr     c
01E3 EA         +1  7928            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7929            subb    a,ltemp
01E6 7010       +1  7930            jnz     fnd
01E8 EB         +1  7931            mov     a,r3
01E9 9509       +1  7932            subb    a,ltemp+1
01EB 700B       +1  7933            jnz     fnd
01ED EC         +1  7934            mov     a,r4
01EE 950A       +1  7935            subb    a,ltemp+2
01F0 7006       +1  7936            jnz     fnd
01F2 ED         +1  7937            mov     a,r5
01F3 950B       +1  7938            subb    a,ltemp+3
01F5 7001       +1  7939            jnz     fnd
01F7            +1  7940     cdone:
01F7 22         +1  7941            ret                     ;return with acc == 0
01F8            +1  7942     fnd:
01F8 8AF0       +1  7943           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7944          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7945            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7946                         orl         a,#1                          ;make non-zero
0201 B3         +1  7947             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7948             ret
                +1  7949     ;==============================================================
                +1  7950     
                +1  7951     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7952     ;       the result in r2-r5
                +1  7953     
0203            +1  7954     flmul:
                +1  7955+3           saveregs
0203 C007       +1  7956+1           push    7
0205 C006       +1  7957+1           push    6
0207 C001       +1  7958+1           push    1
0209 C000       +1  7959+1           push    0
020B 119E       +1  7960             call    unpack1
020D 11BA       +1  7961             call    unpack2
020F E4         +1  7962             clr     a
0210 F50C       +1  7963             mov     prod,a
0212 F50D       +1  7964             mov     prod+1,a        ;clear product
0214 F50E       +1  7965             mov     prod+2,a
0216 F50F       +1  7966             mov     prod+3,a
0218 7E07       +1  7967             mov     r6,#7           ;initialize counter
021A            +1  7968     mup1:
                +1  7969+3           shfdn   mant2           ;shift multiplier right
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   127

021A C3         +1  7970+1           clr     c
021B E508       +1  7971+1           mov     a,mant2
021D 13         +1  7972+1           rrc     a
021E F508       +1  7973+1           mov     mant2,a
0220 E509       +1  7974+1           mov     a,mant2+1
0222 13         +1  7975+1           rrc     a
0223 F509       +1  7976+1           mov     mant2+1,a
0225 E50A       +1  7977+1           mov     a,mant2+2
0227 13         +1  7978+1           rrc     a
0228 F50A       +1  7979+1           mov     mant2+2,a
022A E50B       +1  7980+1           mov     a,mant2+3
022C 13         +1  7981+1           rrc     a
022D F50B       +1  7982+1           mov     mant2+3,a
022F 5014       +1  7983             jnc     nobit           ;skip if lsb was zero
                +1  7984+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7985+1           mov     a,r5
0232 250F       +1  7986+1           add     a,prod+3
0234 F50F       +1  7987+1           mov     prod+3,a
0236 E50E       +1  7988+1           mov     a,prod+2
0238 3C         +1  7989+1           addc    a,r4
0239 F50E       +1  7990+1           mov     prod+2,a
023B E50D       +1  7991+1           mov     a,prod+1
023D 3B         +1  7992+1           addc    a,r3
023E F50D       +1  7993+1           mov     prod+1,a
0240 E50C       +1  7994+1           mov     a,prod+0
0242 3A         +1  7995+1           addc    a,r2
0243 F50C       +1  7996+1           mov     prod,a
0245            +1  7997     nobit:
                +1  7998+3           lshift                  ;shift multiplicand up
0245 ED         +1  7999+1           mov     a,r5
0246 33         +1  8000+1           rlc     a
0247 FD         +1  8001+1           mov     r5,a
0248 EC         +1  8002+1           mov     a,r4
0249 33         +1  8003+1           rlc     a
024A FC         +1  8004+1           mov     r4,a
024B EB         +1  8005+1           mov     a,r3
024C 33         +1  8006+1           rlc     a
024D FB         +1  8007+1           mov     r3,a
024E EA         +1  8008+1           mov     a,r2
024F 33         +1  8009+1           rlc     a
0250 FA         +1  8010+1           mov     r2,a
0251 DEC7       +1  8011             djnz    r6,mup1         ;loop if more
                +1  8012     
0253 7E11       +1  8013             mov     r6,#17          ;re-initalize counter
0255 8015       +1  8014             sjmp    mup3
0257            +1  8015     mup11:
                +1  8016+3           shfdn   prod            ;shift product right
0257 C3         +1  8017+1           clr     c
0258 E50C       +1  8018+1           mov     a,prod
025A 13         +1  8019+1           rrc     a
025B F50C       +1  8020+1           mov     prod,a
025D E50D       +1  8021+1           mov     a,prod+1
025F 13         +1  8022+1           rrc     a
0260 F50D       +1  8023+1           mov     prod+1,a
0262 E50E       +1  8024+1           mov     a,prod+2
0264 13         +1  8025+1           rrc     a
0265 F50E       +1  8026+1           mov     prod+2,a
0267 E50F       +1  8027+1           mov     a,prod+3
0269 13         +1  8028+1           rrc     a
026A F50F       +1  8029+1           mov     prod+3,a
026C            +1  8030     mup3:
                +1  8031+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  8032+1           clr     c
026D E508       +1  8033+1           mov     a,mant2
026F 13         +1  8034+1           rrc     a
0270 F508       +1  8035+1           mov     mant2,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   128

0272 E509       +1  8036+1           mov     a,mant2+1
0274 13         +1  8037+1           rrc     a
0275 F509       +1  8038+1           mov     mant2+1,a
0277 E50A       +1  8039+1           mov     a,mant2+2
0279 13         +1  8040+1           rrc     a
027A F50A       +1  8041+1           mov     mant2+2,a
027C E50B       +1  8042+1           mov     a,mant2+3
027E 13         +1  8043+1           rrc     a
027F F50B       +1  8044+1           mov     mant2+3,a
0281 5014       +1  8045             jnc     mup2            ;skip if bit not set
                +1  8046+3           dan     prod            ;add to prod
0283 ED         +1  8047+1           mov     a,r5
0284 250F       +1  8048+1           add     a,prod+3
0286 F50F       +1  8049+1           mov     prod+3,a
0288 E50E       +1  8050+1           mov     a,prod+2
028A 3C         +1  8051+1           addc    a,r4
028B F50E       +1  8052+1           mov     prod+2,a
028D E50D       +1  8053+1           mov     a,prod+1
028F 3B         +1  8054+1           addc    a,r3
0290 F50D       +1  8055+1           mov     prod+1,a
0292 E50C       +1  8056+1           mov     a,prod+0
0294 3A         +1  8057+1           addc    a,r2
0295 F50C       +1  8058+1           mov     prod,a
0297            +1  8059     mup2:
0297 DEBE       +1  8060             djnz    r6,mup11        ;loop if more
0299 E8         +1  8061             mov     a,r0            ;get exp1
029A 29         +1  8062             add     a,r1            ;add exp2
029B 247A       +1  8063             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8064             mov     r0,a            ;store
029E EF         +1  8065             mov     a,r7            ;get sign
029F 23         +1  8066             rl      a               ;rotate bit into msb
02A0 6207       +1  8067             xrl     sign,a          ;xor with other bit
                +1  8068+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8069+1           mov     r2,prod
02A4 AB0D       +1  8070+1           mov     r3,prod+1
02A6 AC0E       +1  8071+1           mov     r4,prod+2
02A8 AD0F       +1  8072+1           mov     r5,prod+3
02AA 11F0       +1  8073             call    norm1           ;normalize
02AC 11DE       +1  8074             call    pack1
                +1  8075+3           restregs
02AE D000       +1  8076+1           pop     0
02B0 D001       +1  8077+1           pop     1
02B2 D006       +1  8078+1           pop     6
02B4 D007       +1  8079+1           pop     7
02B6 22         +1  8080             ret
                +1  8081     ;-----------------------------------------------------------
                +1  8082     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8083     
02B7            +1  8084     fldiv:
                +1  8085+3           saveregs
02B7 C007       +1  8086+1           push    7
02B9 C006       +1  8087+1           push    6
02BB C001       +1  8088+1           push    1
02BD C000       +1  8089+1           push    0
02BF 119E       +1  8090             call    unpack1
02C1 11BA       +1  8091             call    unpack2
02C3 E4         +1  8092             clr     a
02C4 F50C       +1  8093             mov     prod,a
02C6 F50D       +1  8094             mov     prod+1,a
02C8 F50E       +1  8095             mov     prod+2,a
02CA F50F       +1  8096             mov     prod+3,a
02CC E9         +1  8097             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8098             jz      div9
02CF E8         +1  8099             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8100             jz      div9
02D2 C3         +1  8101             clr     c
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   129

02D3 99         +1  8102             subb    a,r1            ;compute new exponent
02D4 2478       +1  8103             add     a,#127-7        ;unbias
02D6 F8         +1  8104             mov     r0,a            ;store back
02D7 EF         +1  8105             mov     a,r7            ;get sign
02D8 23         +1  8106             rl      a
02D9 6207       +1  8107             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8108             mov     r6,#24+7        ;initialize counter
02DD            +1  8109     div1:
                +1  8110+3           shfup   prod            ;shift quotient up
02DD C3         +1  8111+1           clr     c
02DE E50F       +1  8112+1           mov     a,prod+3
02E0 33         +1  8113+1           rlc     a
02E1 F50F       +1  8114+1           mov     prod+3,a
02E3 E50E       +1  8115+1           mov     a,prod+2
02E5 33         +1  8116+1           rlc     a
02E6 F50E       +1  8117+1           mov     prod+2,a
02E8 E50D       +1  8118+1           mov     a,prod+1
02EA 33         +1  8119+1           rlc     a
02EB F50D       +1  8120+1           mov     prod+1,a
02ED E50C       +1  8121+1           mov     a,prod
02EF 33         +1  8122+1           rlc     a
02F0 F50C       +1  8123+1           mov     prod,a
02F2 C3         +1  8124             clr     c
02F3 EA         +1  8125             mov     a,r2            ;compare values
02F4 9508       +1  8126             subb    a,mant2
02F6 4028       +1  8127             jc      div2            ;skip if bigger
02F8 7013       +1  8128             jnz     div3
02FA EB         +1  8129             mov     a,r3            ;compare values
02FB 9509       +1  8130             subb    a,mant2+1
02FD 4021       +1  8131             jc      div2            ;skip if bigger
02FF 700C       +1  8132             jnz     div3
0301 EC         +1  8133             mov     a,r4            ;compare values
0302 950A       +1  8134             subb    a,mant2+2
0304 401A       +1  8135             jc      div2            ;skip if bigger
0306 7005       +1  8136             jnz     div3
0308 ED         +1  8137             mov     a,r5            ;compare values
0309 950B       +1  8138             subb    a,mant2+3
030B 4013       +1  8139             jc      div2            ;skip if bigger
030D            +1  8140     div3:
030D ED         +1  8141             mov     a,r5
030E 950B       +1  8142             subb    a,mant2+3
0310 FD         +1  8143             mov     r5,a
0311 EC         +1  8144             mov     a,r4
0312 950A       +1  8145             subb    a,mant2+2               ;do subtraction
0314 FC         +1  8146             mov     r4,a
0315 EB         +1  8147             mov     a,r3
0316 9509       +1  8148             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8149             mov     r3,a
0319 EA         +1  8150             mov     a,r2
031A 9508       +1  8151             subb    a,mant2         ;do subtraction
031C FA         +1  8152             mov     r2,a
031D 430F01     +1  8153             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8154     div2:
                +1  8155+3           lshift                  ;shift dividend up
0320 ED         +1  8156+1           mov     a,r5
0321 33         +1  8157+1           rlc     a
0322 FD         +1  8158+1           mov     r5,a
0323 EC         +1  8159+1           mov     a,r4
0324 33         +1  8160+1           rlc     a
0325 FC         +1  8161+1           mov     r4,a
0326 EB         +1  8162+1           mov     a,r3
0327 33         +1  8163+1           rlc     a
0328 FB         +1  8164+1           mov     r3,a
0329 EA         +1  8165+1           mov     a,r2
032A 33         +1  8166+1           rlc     a
032B FA         +1  8167+1           mov     r2,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   130

032C DEAF       +1  8168             djnz    r6,div1         ;loop if more
                +1  8169+3           copytor prod            ;copy quotient
032E AA0C       +1  8170+1           mov     r2,prod
0330 AB0D       +1  8171+1           mov     r3,prod+1
0332 AC0E       +1  8172+1           mov     r4,prod+2
0334 AD0F       +1  8173+1           mov     r5,prod+3
0336            +1  8174     div9:
0336 11F0       +1  8175             call    norm1           ;now normalize result
0338 11DE       +1  8176             call    pack1           ;pack it up
                +1  8177+3           restregs                ;restore registers
033A D000       +1  8178+1           pop     0
033C D001       +1  8179+1           pop     1
033E D006       +1  8180+1           pop     6
0340 D007       +1  8181+1           pop     7
0342 22         +1  8182             ret
                +1  8183     ;------------------------------------------------------------------
                +1  8184     
                +1  8185     ;       Float to long conversion: if the exponent is less than the
                +1  8186     ;       excess value, the result is zero. If the exponent is so large
                +1  8187     ;       that the value would be shifted out, the result is overflow.
                +1  8188     ;       Otherwise shift the mantissa up or down as required.
                +1  8189     
0343            +1  8190     ftol:
                +1  8191+3           saveregs
0343 C007       +1  8192+1           push    7
0345 C006       +1  8193+1           push    6
0347 C001       +1  8194+1           push    1
0349 C000       +1  8195+1           push    0
034B EA         +1  8196             mov     a,r2
034C B4BF09     +1  8197             cjne    a,#0bfh,ne05
034F EB         +1  8198             mov     a,r3
0350 7006       +1  8199             jnz     ne05
0352 EC         +1  8200             mov     a,r4
0353 7003       +1  8201             jnz     ne05
0355 ED         +1  8202             mov     a,r5
0356 6024       +1  8203             jz      ftol1
0358 119E       +1  8204     ne05:   call    unpack1
035A E8         +1  8205             mov     a,r0            ;get exponent
035B 2482       +1  8206             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8207             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8208             mov     a,r7            ;get sign
0361 30E70D     +1  8209             jnb     acc.7,ftol4     ;skip if +ve
                +1  8210+3           neg1                    ;negate it
0364 C3         +1  8211+1           clr     c
0365 E4         +1  8212+1           clr     a
0366 9D         +1  8213+1           subb    a,r5
0367 FD         +1  8214+1           mov     r5,a
0368 E4         +1  8215+1           clr     a
0369 9C         +1  8216+1           subb    a,r4
036A FC         +1  8217+1           mov     r4,a
036B E4         +1  8218+1           clr     a
036C 9B         +1  8219+1           subb    a,r3
036D FB         +1  8220+1           mov     r3,a
036E E4         +1  8221+1           clr     a
036F 9A         +1  8222+1           subb    a,r2
0370 FA         +1  8223+1           mov     r2,a
0371            +1  8224     ftol4:
0371 E8         +1  8225             mov     a,r0            ;get exponent
0372 246A       +1  8226             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8227             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8228             mov     r0,a            ;save it
0378 24F8       +1  8229             add     a,#-8           ;if > 8, too big
037A 500E       +1  8230             jnc     ftol3
037C            +1  8231     ftol1:
037C E4         +1  8232             clr     a
037D FA         +1  8233             mov     r2,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   131

037E FB         +1  8234             mov     r3,a
037F FC         +1  8235             mov     r4,a
0380 FD         +1  8236             mov     r5,a
0381            +1  8237     ftol9:
                +1  8238+3           restregs
0381 D000       +1  8239+1           pop     0
0383 D001       +1  8240+1           pop     1
0385 D006       +1  8241+1           pop     6
0387 D007       +1  8242+1           pop     7
0389 22         +1  8243             ret
038A            +1  8244     ftol3:
038A E8         +1  8245             mov     a,r0
038B FE         +1  8246             mov     r6,a            ;store in counter
038C 60F3       +1  8247             jz      ftol9           ;if zero, do nothing
038E            +1  8248     ftol33:
                +1  8249+3           lshift                  ;shift up
038E ED         +1  8250+1           mov     a,r5
038F 33         +1  8251+1           rlc     a
0390 FD         +1  8252+1           mov     r5,a
0391 EC         +1  8253+1           mov     a,r4
0392 33         +1  8254+1           rlc     a
0393 FC         +1  8255+1           mov     r4,a
0394 EB         +1  8256+1           mov     a,r3
0395 33         +1  8257+1           rlc     a
0396 FB         +1  8258+1           mov     r3,a
0397 EA         +1  8259+1           mov     a,r2
0398 33         +1  8260+1           rlc     a
0399 FA         +1  8261+1           mov     r2,a
039A DEF2       +1  8262             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8263             sjmp    ftol9
039E            +1  8264     ftol2:
039E F4         +1  8265             cpl     a               ;complement
039F FE         +1  8266             mov     r6,a
03A0 6022       +1  8267             jz      ftol22
03A2            +1  8268     ftol23:
03A2 EF         +1  8269             mov     a,r7
03A3 30E70F     +1  8270             jnb     acc.7,ftol24
                +1  8271+3           rshift1
03A6 D3         +1  8272+1           setb    c
03A7 EA         +1  8273+1           mov     a,r2
03A8 13         +1  8274+1           rrc     a
03A9 FA         +1  8275+1           mov     r2,a
03AA EB         +1  8276+1           mov     a,r3
03AB 13         +1  8277+1           rrc     a
03AC FB         +1  8278+1           mov     r3,a
03AD EC         +1  8279+1           mov     a,r4
03AE 13         +1  8280+1           rrc     a
03AF FC         +1  8281+1           mov     r4,a
03B0 ED         +1  8282+1           mov     a,r5
03B1 13         +1  8283+1           rrc     a
03B2 FD         +1  8284+1           mov     r5,a
03B3 800D       +1  8285             jmp     ftol25
03B5            +1  8286+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8287+1           clr     c
03B6 EA         +1  8288+1           mov     a,r2
03B7 13         +1  8289+1           rrc     a
03B8 FA         +1  8290+1           mov     r2,a
03B9 EB         +1  8291+1           mov     a,r3
03BA 13         +1  8292+1           rrc     a
03BB FB         +1  8293+1           mov     r3,a
03BC EC         +1  8294+1           mov     a,r4
03BD 13         +1  8295+1           rrc     a
03BE FC         +1  8296+1           mov     r4,a
03BF ED         +1  8297+1           mov     a,r5
03C0 13         +1  8298+1           rrc     a
03C1 FD         +1  8299+1           mov     r5,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   132

03C2 DEDE       +1  8300     ftol25: djnz    r6,ftol23
03C4            +1  8301     ftol22:
                +1  8302+3           add1                    ;round
03C4 ED         +1  8303+1           mov     a,r5
03C5 2401       +1  8304+1           add     a,#1
03C7 FD         +1  8305+1           mov     r5,a
03C8 E4         +1  8306+1           clr     a
03C9 3C         +1  8307+1           addc    a,r4
03CA FC         +1  8308+1           mov     r4,a
03CB E4         +1  8309+1           clr     a
03CC 3B         +1  8310+1           addc    a,r3
03CD FB         +1  8311+1           mov     r3,a
03CE E4         +1  8312+1           clr     a
03CF 3A         +1  8313+1           addc    a,r2
03D0 FA         +1  8314+1           mov     r2,a
03D1 EF         +1  8315             mov     a,r7
03D2 30E70F     +1  8316             jnb     acc.7,ftol26
                +1  8317+3           rshift1
03D5 D3         +1  8318+1           setb    c
03D6 EA         +1  8319+1           mov     a,r2
03D7 13         +1  8320+1           rrc     a
03D8 FA         +1  8321+1           mov     r2,a
03D9 EB         +1  8322+1           mov     a,r3
03DA 13         +1  8323+1           rrc     a
03DB FB         +1  8324+1           mov     r3,a
03DC EC         +1  8325+1           mov     a,r4
03DD 13         +1  8326+1           rrc     a
03DE FC         +1  8327+1           mov     r4,a
03DF ED         +1  8328+1           mov     a,r5
03E0 13         +1  8329+1           rrc     a
03E1 FD         +1  8330+1           mov     r5,a
03E2 809D       +1  8331             jmp     ftol9
03E4            +1  8332+3   ftol26: rshift
03E4 C3         +1  8333+1           clr     c
03E5 EA         +1  8334+1           mov     a,r2
03E6 13         +1  8335+1           rrc     a
03E7 FA         +1  8336+1           mov     r2,a
03E8 EB         +1  8337+1           mov     a,r3
03E9 13         +1  8338+1           rrc     a
03EA FB         +1  8339+1           mov     r3,a
03EB EC         +1  8340+1           mov     a,r4
03EC 13         +1  8341+1           rrc     a
03ED FC         +1  8342+1           mov     r4,a
03EE ED         +1  8343+1           mov     a,r5
03EF 13         +1  8344+1           rrc     a
03F0 FD         +1  8345+1           mov     r5,a
03F1 808E       +1  8346             jmp     ftol9
                +1  8347     
                +1  8348     ;       arithmetic integer to floating conversions
                +1  8349     
03F3            +1  8350     abtof:
03F3 ED         +1  8351             mov     a,r5
03F4 23         +1  8352             rl      a
03F5 FC         +1  8353             mov     r4,a
03F6 9C         +1  8354             subb    a,r4
03F7 FC         +1  8355             mov     r4,a
03F8 FB         +1  8356             mov     r3,a
03F9 FA         +1  8357             mov     r2,a
03FA 8006       +1  8358             jmp     altof
03FC            +1  8359     awtof:
03FC EC         +1  8360             mov     a,r4
03FD 23         +1  8361             rl      a
03FE FB         +1  8362             mov     r3,a
03FF 9B         +1  8363             subb    a,r3
0400 FB         +1  8364             mov     r3,a
0401 FA         +1  8365             mov     r2,a
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   133

0402            +1  8366     altof:
                +1  8367+3           saveregs
0402 C007       +1  8368+1           push    7
0404 C006       +1  8369+1           push    6
0406 C001       +1  8370+1           push    1
0408 C000       +1  8371+1           push    0
040A EA         +1  8372             mov     a,r2            ;get sign
040B 5480       +1  8373             anl     a,#80h
040D FF         +1  8374             mov     r7,a            ;store it
040E 30E70D     +1  8375             jnb     acc.7,altof1    ;skip if +ve
                +1  8376+3           neg1
0411 C3         +1  8377+1           clr     c
0412 E4         +1  8378+1           clr     a
0413 9D         +1  8379+1           subb    a,r5
0414 FD         +1  8380+1           mov     r5,a
0415 E4         +1  8381+1           clr     a
0416 9C         +1  8382+1           subb    a,r4
0417 FC         +1  8383+1           mov     r4,a
0418 E4         +1  8384+1           clr     a
0419 9B         +1  8385+1           subb    a,r3
041A FB         +1  8386+1           mov     r3,a
041B E4         +1  8387+1           clr     a
041C 9A         +1  8388+1           subb    a,r2
041D FA         +1  8389+1           mov     r2,a
041E            +1  8390     altof1:
041E 7896       +1  8391             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8392             call    norm1           ;normalize it
0422 11DE       +1  8393             call    pack1           ;and pack up
                +1  8394+3           restregs
0424 D000       +1  8395+1           pop     0
0426 D001       +1  8396+1           pop     1
0428 D006       +1  8397+1           pop     6
042A D007       +1  8398+1           pop     7
042C 22         +1  8399             ret
                +1  8400     
042D            +1  8401     lbtof:
042D 7C00       +1  8402             mov     r4,#0
042F            +1  8403     lwtof:
042F E4         +1  8404             clr     a
0430 FB         +1  8405             mov     r3,a
0431 FA         +1  8406             mov     r2,a
0432            +1  8407     lltof:
                +1  8408+3           saveregs
0432 C007       +1  8409+1           push    7
0434 C006       +1  8410+1           push    6
0436 C001       +1  8411+1           push    1
0438 C000       +1  8412+1           push    0
043A 7F00       +1  8413             mov     r7,#0           ;zero sign
043C 80E0       +1  8414             sjmp    altof1
                +1  8415     
                +1  8416     ;-------------------------------------------------------
                +1  8417     
                +1  8418     
                    8419     
                    8420     ;$include (d:\amp\wriread.asm)
                +1  8421     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8422     cle256:          mov            IE,#00H
0441 75B601     +1  8423                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8424                              MOV            PSCTL,#03
                +1  8425                                             
0447 7400       +1  8426                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8427                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8428                                     mov             PSCTL,#00
044D 75B600     +1  8429                                 mov         FLSCL,#00
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   134

0450 75A880     +1  8430                               mov           IE,#80H
0453 22         +1  8431                                     ret
                +1  8432     
                +1  8433     ;чтение памяти программ в r8..r11
                +1  8434     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8435     re4byte:        mov                     dph,r2
0456 8B82       +1  8436                                             mov                     dpl,r3
0458 E4         +1  8437                                             clr                     a
0459 93         +1  8438                                             movc            a,@a+dptr
045A F508       +1  8439                                             mov                     r8,a
045C A3         +1  8440                                             inc                     dptr
045D E4         +1  8441                                             clr                     a
045E 93         +1  8442                                             movc            a,@a+dptr
045F F509       +1  8443                                             mov                     r9,a
0461 A3         +1  8444                                             inc                     dptr
0462 E4         +1  8445                                             clr                     a
0463 93         +1  8446                                             movc            a,@a+dptr
0464 F50A       +1  8447                                             mov                     r10,a
0466 A3         +1  8448                                             inc                     dptr
0467 E4         +1  8449                                             clr                     a
0468 93         +1  8450                                             movc            a,@a+dptr
0469 F50B       +1  8451                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8452                                             ret
                +1  8453      ;чтение памяти программ в r2..r5
                +1  8454     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8455     rebyte2:        mov                     dph,r2
046E 8B82       +1  8456                                             mov                     dpl,r3
0470 E4         +1  8457                                             clr                     a
0471 93         +1  8458                                             movc            a,@a+dptr
0472 FA         +1  8459                                             mov                     r2,a
0473 A3         +1  8460                                             inc                     dptr
0474 E4         +1  8461                                             clr                     a
0475 93         +1  8462                                             movc            a,@a+dptr
0476 FB         +1  8463                                             mov                     r3,a
0477 A3         +1  8464                                             inc                     dptr
0478 E4         +1  8465                                             clr                     a
0479 93         +1  8466                                             movc            a,@a+dptr
047A FC         +1  8467                                             mov                     r4,a
047B A3         +1  8468                                             inc                     dptr
047C E4         +1  8469                                             clr                     a
047D 93         +1  8470                                             movc            a,@a+dptr
047E FD         +1  8471                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8472                                             ret
                +1  8473      
                +1  8474     
                +1  8475      ;r7-количество байт
                +1  8476     ;dptr-адр ячейки для записи
                +1  8477     ;r1-адр ячейки  внешнего озу
                +1  8478     
0480 75A800     +1  8479     wrpage:  mov            IE,#00H
0483 75B601     +1  8480     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8481                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8482                      movx           a,@r1
048A F0         +1  8483                      movx           @dptr,a                         ;wr
048B 758F00     +1  8484                      mov            PSCTL,#0
048E 75B600     +1  8485                      mov            FLSCL,#00
0491 A3         +1  8486                     inc                     dptr
0492 09         +1  8487                     inc                     r1
0493 DFEE       +1  8488                     djnz            r7,WW5
0495 75A880     +1  8489                     mov             IE,#80H
0498 22         +1  8490                     ret
                +1  8491                             
                +1  8492     
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   135

                +1  8493     
                +1  8494                                                             
                +1  8495     
                +1  8496     
                +1  8497     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8498     ;чтение памяти программ во внешнее озу
                +1  8499     ;вх-r2,r3-адр яч памяти прогр
                +1  8500     ;r1- яч внешнее озу
0499 8A83       +1  8501     copyPP:         mov                     dph,r2
049B 8B82       +1  8502                                             mov                     dpl,r3
049D 7FFF       +1  8503                                             mov                     r7,#0ffh
049F E4         +1  8504     copy1:          clr                     a
04A0 93         +1  8505                                             movc            a,@a+dptr
04A1 F3         +1  8506                                             movx                    @r1,a
04A2 A3         +1  8507                                             inc                     dptr
04A3 09         +1  8508                                             inc                     r1
04A4 DFF9       +1  8509                                             djnz            r7,copy1
04A6 22         +1  8510                                             ret
                +1  8511     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8512     
                +1  8513                                     
                +1  8514     
                +1  8515     ;r8..r11->@r0..@r0+3
                +1  8516     ;r0-адр ячейки
                +1  8517     ;сохранить в ячейке озу
04A7 E508       +1  8518     savelte:        mov     a,ltemp
04A9 F6         +1  8519                                             mov     @r0,a
04AA 08         +1  8520                                             inc     r0
04AB E509       +1  8521                                             mov     a,ltemp+1
04AD F6         +1  8522                                             mov     @r0,a
04AE 08         +1  8523                                             inc     r0
04AF E50A       +1  8524                                             mov     a,ltemp+2
04B1 F6         +1  8525                                             mov     @r0,a
04B2 08         +1  8526                                             inc     r0
04B3 E50B       +1  8527                                             mov     a,ltemp+3
04B5 F6         +1  8528                                             mov     @r0,a
04B6 22         +1  8529                                             ret
                +1  8530     
                +1  8531     ;
                +1  8532     
                +1  8533     
                +1  8534     
                +1  8535     
                +1  8536     
                +1  8537                     
                +1  8538     
                +1  8539     
                +1  8540     
                +1  8541     
                +1  8542      
                    8543     
                    8544                                                   
                    8545     END
                                                                             
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   136

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      185#
AAPAR. . . . . . .  C ADDR   03B7H   R   SEG=MAIN   872#
ABIN . . . . . . .  D ADDR   004FH   A      301# 1480 1537 1562 1583 1587 1590 1591 1593 1686 1691 3728 3742 3823
                                           3826 3869 3964 4008 4011 4088 4092 4093 4094 4097 4347 4384 4385 4387 4464
                                           4484 4575 4579 4622 4625 4994 4999 5184 5189 5986 6148 6151
ABRET. . . . . . .  C ADDR   24F1H   R   SEG=MAIN   5915 5917#
ABTOF. . . . . . .  C ADDR   03F3H   A      8350#
AC . . . . . . . .  B ADDR   00D0H.6 A      201#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 683 700 750 758 766 774 776 796 1151 1162 1170 1249 1836 1845 1854
                                           1863 1884 2282 2307 2312 2316 2321 2324 2327 2330 2333 2527 2589 2635 2646
                                           2738 2747 2755 2764 2913 2971 2996 3001 3005 3008 3011 3018 3021 3024 3363
                                           3451 3497 3519 3538 3560 3611 4524 4530 4567 4656 5489 6578 6757 6835 6838
                                           7095 7747 7830 7847 7879 7917 7945 8207 8209 8227 8270 8316 8375
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0CM0 . . . . . .  B ADDR   00E8H.2 A      224#
AD0CM1 . . . . . .  B ADDR   00E8H.3 A      223#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      219#
AD0INT . . . . . .  B ADDR   00E8H.5 A      221#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      226#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      220#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      225#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 219 220 221 222 223 224 225 226
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2CB6H   R   SEG=MAIN   907 944 946 948 950 952 954 956 958 960 1026 1028 1030 1032 1034
                                           1036 1038 1040 1042 1045 1047 1049 1051 1053 1055 1057 1059 1061 1063 1082
                                           1084 1086 7336#
ADEC . . . . . . .  D ADDR   0053H   A      302# 1536 1548 1552 1567 1592 1595 1596 1690 1694 3741 3745 3820 3824
                                           3866 3870 3961 3965 4010 4014 4096 4109 4357 4371 4373 4375 4386 4389 4474
                                           4485 4580 4626 4998 5002 5188 5192 5787 5806 5824 5887 5904 6150 6153 6499
                                           6531
ADRBLOK. . . . . .  C ADDR   296AH   R   SEG=MAIN   3435 3458 3839 3982 4887 4916 5044 5103 5213 5273 6543#
AFTERK . . . . . .  C ADDR   06AEH   R   SEG=MAIN   1179 1258#
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   635# 638
AGE9 . . . . . . .  C ADDR   0874H   R   SEG=MAIN   1484# 1487
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   644# 646
ALLSUM . . . . . .  C ADDR   0355H   R   SEG=MAIN   816# 851 869 885
ALMUL. . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   7182#
ALTOF. . . . . . .  C ADDR   0402H   A      1145 1243 1274 1282 1300 1316 1327 1344 1357 1442 1996 2106 2186 2224
                                           3873 3970 4488 4583 4629 4728 4806 4814 4832 4957 4969 4984 5087 5149 5165
                                           5257 5319 5334 8358 8366#
ALTOF1 . . . . . .  C ADDR   041EH   A      8375 8390# 8414
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0614H   R   SEG=MAIN   1143 1159#
ANLP1. . . . . . .  C ADDR   0A87H   R   SEG=MAIN   1808 1814#
AN_T7. . . . . . .  C ADDR   124CH   R   SEG=MAIN   3025# 3090 3092 3100 3110
AUTOKA . . . . . .  C ADDR   0CA4H   R   SEG=MAIN   1177 2154#
AVPGO. . . . . . .  C ADDR   07DFH   R   SEG=MAIN   1404 1406#
AVTDEC1. . . . . .  C ADDR   0670H   R   SEG=MAIN   1212 1221#
AWTOF. . . . . . .  C ADDR   03FCH   A      8359#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   137

B. . . . . . . . .  D ADDR   00F0H   A      122# 5634 6006 7185 7188 7190 7194 7198 7202 7206 7211 7215 7222 7226
                                           7230 7236 7240 7244 7250 7943 7944
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   250 463#
BFORM. . . . . . .  C ADDR   28A7H   R   SEG=MAIN   6348 6353 6365# 6391
BIFL_KT. . . . . .  B ADDR   0021H.5 A      338# 4724 4780 4879
BIN30. . . . . . .  C ADDR   2A19H   R   SEG=MAIN   6745# 6771
BIN31. . . . . . .  C ADDR   2A1DH   R   SEG=MAIN   6750# 6754
BIN32. . . . . . .  C ADDR   2A2DH   R   SEG=MAIN   6763# 6768
BIN41. . . . . . .  C ADDR   2A3EH   R   SEG=MAIN   6779# 6789
BINDEC . . . . . .  C ADDR   2A0DH   R   SEG=MAIN   1538 1594 1692 3743 4012 4098 4388 5000 5190 6152 6724#
BITAKT . . . . . .  B ADDR   0023H.2 A      357# 1779 1780 1783
BITAVP . . . . . .  B ADDR   0020H.5 A      328# 1370 1604 1769 3088 3089 3091
BITBON . . . . . .  B ADDR   0021H.2 A      335# 1805 1940 2127 2154 2342 2343 2351 6579
BITBUF . . . . . .  B ADDR   0021H.0 A      333#
BITEIZM. . . . . .  B ADDR   0022H.5 A      348# 1268 1713 1720 1787 2393 2437 3059 3075 4260 5553
BITIZM . . . . . .  B ADDR   0020H.4 A      327# 584 718 1609 2313 2395 2409 2485 2520 2551 3002 3062 3186 3208 3283
                                           3315 3340 3454 3578 3843 3891 3919 4080 4208 4261 4308 4420 4497 4611
BITKLB . . . . . .  B ADDR   0022H.2 A      345# 1337 1803 2318 3061 3079 3087 3094 3314 4495 4794
BITMAS . . . . . .  B ADDR   0020H.1 A      324# 1093 1096 6331
BITMEM . . . . . .  B ADDR   0021H.3 A      336# 1676 2732 3318 3336 3352 3453 3577 3844 3890 4079
BITMENU. . . . . .  B ADDR   0022H.1 A      344# 1675 2550 2663 3063 3339 3899 3918 4213 4262 4307 4419 4494
BITMIG . . . . . .  B ADDR   0023H.1 A      356# 2628 2821 2924 3251 3640 3780 3793 4326 4453 4559 4660 6071 6097
                                           6122 6134 6197 6204 6210 6216
BITNUL . . . . . .  B ADDR   0021H.7 A      340# 1418 1632 1748 2382 3108 3112 3113 3120
BITOLL . . . . . .  B ADDR   0022H.7 A      350# 659 1616 1673 3064
BITPAR . . . . . .  B ADDR   0022H.6 A      349# 4795
BITPRD . . . . . .  B ADDR   0021H.1 A      334# 1939
BITPRER. . . . . .  B ADDR   0023H.4 A      359#
BITRS. . . . . . .  B ADDR   0020H.3 A      326#
BITT2. . . . . . .  B ADDR   0022H.0 A      343# 1672 2486 2521 2524 3127 3284
BITV19 . . . . . .  B ADDR   0022H.3 A      346# 528 532 2699 2704 2710 4197 4202 4290 4303 4425 4429 4434
BITVI11. . . . . .  B ADDR   0020H.6 A      329# 1368 1384 1427 1612 2336 2338 2394 2408 2549 3058 3178 3185 3338
                                           4610
BITVICH. . . . . .  B ADDR   0022H.4 A      347# 1426 1671 2337 2396 2406 2548 2556 3145 3177 3207 3337 4609
BITZNAK. . . . . .  B ADDR   0020H.0 A      323# 684 733
BITZNB . . . . . .  B ADDR   0023H.3 A      358# 4630 5913 5916
BITZUS . . . . . .  B ADDR   0020H.7 A      330# 1419 1633 2054 2057 2446
BLOIN. . . . . . .  C ADDR   1705H   R   SEG=MAIN   3748# 3753
BLOKVV . . . . . .  C ADDR   16D7H   R   SEG=MAIN   3718#
BLOKVVC. . . . . .  C ADDR   16E1H   R   SEG=MAIN   3721 3724#
BL_LI. . . . . . .  C ADDR   16A2H   R   SEG=MAIN   3668 3676#
BONPART. . . . . .  C ADDR   0C74H   R   SEG=MAIN   2126#
BOUT7. . . . . . .  C ADDR   1426H   R   SEG=MAIN   3294# 3296 3314
BRET . . . . . . .  C ADDR   2332H   R   SEG=MAIN   5574 5579 5583#
BUFDEC . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1697# 1702
BUFIND . . . . . .  D ADDR   0040H   A      299# 634 638 643 646 652 1483 1487 1553 1574 1595 1596 1597 1598 1651
                                           1656 1695 1703 1705 1710 1746 1767 1773 1781 1784 1789 1804 1806 2301 2348
                                           2352 2603 2621 2637 2639 2642 2702 2703 2708 2709 2816 2863 2882 2989 3067
                                           3129 3187 3188 3234 3238 3264 3286 3300 3307 3319 3320 3426 3635 3662 3690
                                           3719 3746 3760 3761 3765 3766 3773 3774 3779 3795 3934 3941 4015 4023 4025
                                           4041 4065 4099 4108 4110 4174 4196 4203 4318 4356 4389 4390 4391 4392 4394
                                           4428 4433 4445 4473 4496 4551 4597 5003 5011 5015 5193 5201 5205 5371 5403
                                           5632 5645 5651 5658 5786 5805 5823 5886 5903 5914 6074 6100 6154 6201 6222
                                           6498 6530 6580
BUFL_DEC . . . . .  C ADDR   21D9H   R   SEG=MAIN   5345#
BUFMEA . . . . . .  C ADDR   1FF8H   R   SEG=MAIN   5005# 5010
BUFMIN . . . . . .  C ADDR   2107H   R   SEG=MAIN   5195# 5200
BUFON. . . . . . .  C ADDR   0E04H   R   SEG=MAIN   2342 2351#
BUFR . . . . . . .  C ADDR   0919H   R   SEG=MAIN   1576# 1581
BUFR2. . . . . . .  C ADDR   08FBH   R   SEG=MAIN   1555# 1560
BUFR3. . . . . . .  C ADDR   08F4H   R   SEG=MAIN   1546 1551#
BUFR30 . . . . . .  C ADDR   08F7H   R   SEG=MAIN   1549 1553#
BUSY . . . . . . .  B ADDR   00C0H.7 A      180#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      216#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      215#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      214#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   138

CCF3 . . . . . . .  B ADDR   00D8H.3 A      213#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      212#
CDONE. . . . . . .  C ADDR   01F7H   A      7940# 7944
CELLBIT. . . . . .  D ADDR   0020H   A      322# 323 324 325 326 327 328 329 330
CELLBIT1 . . . . .  D ADDR   0021H   A      332# 333 334 335 336 338 340
CELLBIT2 . . . . .  D ADDR   0022H   A      342# 343 344 345 346 347 348 349 350
CELLBIT3 . . . . .  D ADDR   0023H   A      354# 355 356 357 358 359
CEXP . . . . . . .  C ADDR   01E2H   A      7917 7926#
CF . . . . . . . .  B ADDR   00D8H.7 A      210#
CH0. . . . . . . .  C ADDR   23D5H   R   SEG=MAIN   1464 3121 4586 5718#
CH1. . . . . . . .  C ADDR   23F5H   R   SEG=MAIN   5538 5729#
CH10 . . . . . . .  C ADDR   23D9H   R   SEG=MAIN   868 1107 4000 5719#
CH100. . . . . . .  C ADDR   23EDH   R   SEG=MAIN   815 5724#
CH10000. . . . . .  C ADDR   23E9H   R   SEG=MAIN   5723#
CH150H . . . . . .  C ADDR   243DH   R   SEG=MAIN   5748#
CH2. . . . . . . .  C ADDR   23F1H   R   SEG=MAIN   1102 5725#
CH20 . . . . . . .  C ADDR   25B8H   R   SEG=MAIN   850 1112 6037#
CH2THO . . . . . .  C ADDR   241DH   R   SEG=MAIN   2193 2231 5740#
CH320H . . . . . .  C ADDR   2439H   R   SEG=MAIN   5747# 6551
CH4. . . . . . . .  C ADDR   23E1H   R   SEG=MAIN   1116 5721#
CH43 . . . . . . .  C ADDR   1910H   R   SEG=MAIN   4017# 4022
CH43_42. . . . . .  C ADDR   19B7H   R   SEG=MAIN   4112# 4117
CH5. . . . . . . .  C ADDR   23DDH   R   SEG=MAIN   884 5720#
CH57 . . . . . . .  C ADDR   25B4H   R   SEG=MAIN   6036#
CH954. . . . . . .  C ADDR   23E5H   R   SEG=MAIN   5722#
CHAIBL . . . . . .  C ADDR   153BH   R   SEG=MAIN   3428 3430#
CHAIPR . . . . . .  C ADDR   1865H   R   SEG=MAIN   3936 3938#
CHANMA . . . . . .  C ADDR   0FDFH   R   SEG=MAIN   2635 2644#
CHANZ. . . . . . .  C ADDR   0FC6H   R   SEG=MAIN   2589 2633#
CHAVT. . . . . . .  D ADDR   0081H   A      372# 563 1168 1213 1221 2146 2250 4209
CHBEFORE . . . . .  D ADDR   009BH   A      382# 586 812 826 845 863 879
CHBLOK . . . . . .  D ADDR   00D6H   A      409# 4914 4964 4980 5101 5155 5271 5325
CHBUF. . . . . . .  D ADDR   00CFH   A      406# 597 1914 2022 2063 2068 2128 2136 3888 5345 5350
CHBUF1 . . . . . .  X ADDR   0E00H   A      439# 1924 2009
CHCMP. . . . . . .  C ADDR   22D5H   R   SEG=MAIN   1174 5515#
CHDEC. . . . . . .  C ADDR   22E8H   R   SEG=MAIN   1222 1235 5530#
CHDEL. . . . . . .  D ADDR   0083H   A      373# 2087 2114 2156 2206 2244
CHDELMO. . . . . .  C ADDR   0C5FH   R   SEG=MAIN   2097 2114# 2119
CHIF . . . . . . .  C ADDR   25FDH   R   SEG=MAIN   6078 6081#
CHIF5. . . . . . .  C ADDR   2605H   R   SEG=MAIN   6084 6086#
CHIFB. . . . . . .  C ADDR   2628H   R   SEG=MAIN   6104 6107#
CHIFB1 . . . . . .  C ADDR   262EH   R   SEG=MAIN   6106 6107 6110#
CHIFL5 . . . . . .  C ADDR   2636H   R   SEG=MAIN   6114 6117#
CHIFOUR. . . . . .  C ADDR   2617H   R   SEG=MAIN   6091 6093 6097#
CHIND. . . . . . .  D ADDR   00ACH   A      388# 1386 1821
CHIND2 . . . . . .  D ADDR   0033H   A      316# 720 722 730
CHINKOR. . . . . .  D ADDR   0098H   A      371# 558 794 1160 1173 1215 1229 1234 2121
CHK. . . . . . . .  C ADDR   2435H   R   SEG=MAIN   1338 5746#
CHKL . . . . . . .  D ADDR   003DH   A      306# 699 710 712 713 715 2464 2491 2539 2650 3039 3324 4071 4500
CHMAS. . . . . . .  D ADDR   006EH   A      303# 1090 1097 1120 6330
CHMASN . . . . . .  D ADDR   003FH   A      307# 801 810 846 864 880 896 1095 1097 1098
CHMINUS. . . . . .  C ADDR   294FH   R   SEG=MAIN   3448 3494 3516 3535 3557 6513# 6575
CHTADC . . . . . .  C ADDR   227FH   R   SEG=MAIN   5447#
CHTHO. . . . . . .  C ADDR   2415H   R   SEG=MAIN   1307 1345 4737 4822 4840 5738#
CHTHOU . . . . . .  C ADDR   24BCH   R   SEG=MAIN   5874#
CHZAP. . . . . . .  C ADDR   23D1H   R   SEG=MAIN   1903 5717#
CH_1 . . . . . . .  C ADDR   23FDH   R   SEG=MAIN   589 1500 1523 1921 2065 2140 3971 5347 5731#
CH_10. . . . . . .  C ADDR   242DH   R   SEG=MAIN   1506 1529 2005 2035 4489 4989 5178 5744#
CH_10TH. . . . . .  C ADDR   2429H   R   SEG=MAIN   1399 5743#
CH_2 . . . . . . .  C ADDR   2401H   R   SEG=MAIN   1916 2000 2028 2044 5732#
CH_200 . . . . . .  C ADDR   2425H   R   SEG=MAIN   5742#
CH_220 . . . . . .  C ADDR   2421H   R   SEG=MAIN   1361 5741#
CH_22T . . . . . .  C ADDR   24FAH   R   SEG=MAIN   1452 5922#
CH_250 . . . . . .  C ADDR   2431H   R   SEG=MAIN   1263 5745#
CH_4 . . . . . . .  C ADDR   2405H   R   SEG=MAIN   2038 3974 5733#
CH_5 . . . . . . .  C ADDR   2409H   R   SEG=MAIN   5734#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   139

CH_500 . . . . . .  C ADDR   24F6H   R   SEG=MAIN   1448 5921#
CH_7 . . . . . . .  C ADDR   240DH   R   SEG=MAIN   2132 5735#
CH_953 . . . . . .  C ADDR   2411H   R   SEG=MAIN   5737#
CH_B . . . . . . .  C ADDR   24F2H   R   SEG=MAIN   1468 5919#
CH_FL. . . . . . .  C ADDR   24FEH   R   SEG=MAIN   1492 5923#
CH_M3. . . . . . .  C ADDR   2441H   R   SEG=MAIN   5749#
CH_MLN . . . . . .  C ADDR   23F9H   R   SEG=MAIN   5730#
CIKLWR . . . . . .  C ADDR   287DH   R   SEG=MAIN   6336#
CKCON. . . . . . .  D ADDR   008EH   A      30# 481 512
CL4. . . . . . . .  C ADDR   2453H   R   SEG=MAIN   5766# 5768
CL4N . . . . . . .  C ADDR   2459H   R   SEG=MAIN   5775# 5777
CLE20. . . . . . .  C ADDR   19A4H   R   SEG=MAIN   4102# 4104
CLE256 . . . . . .  C ADDR   043EH   A      4296 4770 4872 8422#
CLEAR. . . . . . .  C ADDR   2A07H   R   SEG=MAIN   6702 6706# 6736
CLEAR4 . . . . . .  C ADDR   2450H   R   SEG=MAIN   824 1415 1417 1563 1584 1629 1631 2379 2381 3105 3107 4913 5764#
CLEARN . . . . . .  C ADDR   2458H   R   SEG=MAIN   3821 3867 3962 4348 4465 4576 4623 5773#
CLMASSIX . . . . .  C ADDR   286DH   R   SEG=MAIN   549 1413 1627 2125 2254 2377 3103 3282 6324#
CLMASV . . . . . .  C ADDR   07E4H   R   SEG=MAIN   1408 1410#
CLMAX. . . . . . .  C ADDR   2872H   R   SEG=MAIN   6326# 6329
CLR11. . . . . . .  C ADDR   2A08H   R   SEG=MAIN   6708# 6710
CLRDEC . . . . . .  C ADDR   2A01H   R   SEG=MAIN   6700#
CLRNUM . . . . . .  C ADDR   2A05H   R   SEG=MAIN   6703# 6817
CLRVICH. . . . . .  C ADDR   1393H   R   SEG=MAIN   3207# 3224
CL_HL. . . . . . .  C ADDR   15EEH   R   SEG=MAIN   3571# 3586 3591 3595
CL_HL1 . . . . . .  C ADDR   1600H   R   SEG=MAIN   3568 3583#
CL_HL2 . . . . . .  C ADDR   160AH   R   SEG=MAIN   3583 3588#
CL_HL3 . . . . . .  C ADDR   1614H   R   SEG=MAIN   3588 3593#
CNTR . . . . . . .  N NUMB   0006H   A      7613#
CO02S. . . . . . .  C ADDR   23B9H   R   SEG=MAIN   5701# 5705
CO05S. . . . . . .  C ADDR   23C6H   R   SEG=MAIN   5710# 5714
CO1S . . . . . . .  C ADDR   23B0H   R   SEG=MAIN   5695# 5695
CO2S . . . . . . .  C ADDR   23ACH   R   SEG=MAIN   5693# 5697
COMPA1 . . . . . .  C ADDR   0890H   R   SEG=MAIN   1500# 1509
COMPA2 . . . . . .  C ADDR   08C6H   R   SEG=MAIN   1523# 1532
COND . . . . . . .  C ADDR   28E1H   R   SEG=MAIN   6420#
COPY1. . . . . . .  C ADDR   049FH   A      8504# 8509
COPYPP . . . . . .  C ADDR   0499H   A      4283 4749 4850 8501#
COPY_HL. . . . . .  D ADDR   00D7H   A      410# 3987 4123 4906 4922 4937 5094 5109 5124 5264 5279 5294
COUNT. . . . . . .  C ADDR   238EH   R   SEG=MAIN   5667# 5667
CPRL2. . . . . . .  B ADDR   00C8H.0 A      197#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      211#
CT . . . . . . . .  C ADDR   2395H   R   SEG=MAIN   5673# 5673
CT2. . . . . . . .  B ADDR   00C8H.1 A      196#
CY . . . . . . . .  B ADDR   00D0H.7 A      200#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 486
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1911
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1908
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 487
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   28E6H   R   SEG=MAIN   6424# 6426
DCOB . . . . . . .  C ADDR   28EDH   R   SEG=MAIN   6428# 6446
DCOC . . . . . . .  C ADDR   28F8H   R   SEG=MAIN   6438# 6443
DCOD . . . . . . .  C ADDR   2905H   R   SEG=MAIN   6445 6448#
DDOUTF . . . . . .  C ADDR   1657H   R   SEG=MAIN   3417 3473 3621 3629# 3714
DDOUTFR. . . . . .  C ADDR   151FH   R   SEG=MAIN   3417# 3423
DEC30. . . . . . .  C ADDR   2A5AH   R   SEG=MAIN   6827# 6852
DEC31. . . . . . .  C ADDR   2A5FH   R   SEG=MAIN   6833# 6840
DEC32. . . . . . .  C ADDR   2A6FH   R   SEG=MAIN   6845# 6849
DECBIN . . . . . .  C ADDR   2A4DH   R   SEG=MAIN   3825 3871 3966 4486 4581 4627 6806#
DECSIZE. . . . . .  N NUMB   000AH   A      6681# 6701 6735 6762 6775 6778 6832
DECT2. . . . . . .  C ADDR   2A78H   R   SEG=MAIN   6823 6855#
DEDPTR . . . . . .  C ADDR   2CCDH   R   SEG=MAIN   7340 7344 7348 7354#
DENORM . . . . . .  C ADDR   0133H   A      7772# 7828
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   140

DGOTO7 . . . . . .  C ADDR   17E9H   R   SEG=MAIN   3874# 3882
DIAP . . . . . . .  D ADDR   00AEH   A      390# 577 1403 1606 1709 1809 1950 2371 2416 3096 4393 4777 5554 5575 5837
                                           5852 6003 6065
DIINC. . . . . . .  C ADDR   0E2AH   R   SEG=MAIN   2374 2377#
DIKDN. . . . . . .  C ADDR   258CH   R   SEG=MAIN   6005 6025#
DIKDW. . . . . . .  C ADDR   24A4H   R   SEG=MAIN   5841 5862#
DIKM . . . . . . .  C ADDR   24BAH   R   SEG=MAIN   5873#
DIPAR. . . . . . .  C ADDR   24B8H   R   SEG=MAIN   5872#
DIV1 . . . . . . .  C ADDR   02DDH   A      8109# 8168
DIV2 . . . . . . .  C ADDR   0320H   A      8127 8131 8135 8139 8154#
DIV3 . . . . . . .  C ADDR   030DH   A      8128 8132 8136 8140#
DIV9 . . . . . . .  C ADDR   0336H   A      8098 8100 8174#
DIVIDE . . . . . .  C ADDR   2B38H   R   SEG=MAIN   6352 7041#
DONE . . . . . . .  C ADDR   2AA7H   R   SEG=MAIN   6871 6882#
DONE1. . . . . . .  C ADDR   2AA5H   R   SEG=MAIN   6874 6877 6880#
DOSH . . . . . . .  C ADDR   2BC1H   R   SEG=MAIN   7116 7132#
DOSUB. . . . . . .  C ADDR   2BAFH   R   SEG=MAIN   7100 7104 7108 7112 7113 7117#
DPH. . . . . . . .  D ADDR   0083H   A      19# 555 601 609 616 623 2293 2902 2982 3571 3992 3994 4128 4133 4645 4890
                                           4899 4907 4919 4924 4933 4935 4938 4949 5036 5038 5047 5056 5095 5106 5111
                                           5120 5122 5125 5136 5216 5225 5265 5276 5281 5290 5292 5295 5306 6284 6292
                                           6559 6567 6599 6888 6924 6959 6962 6974 6997 7359 7361 8435 8455 8501
DPL. . . . . . . .  D ADDR   0082H   A      18# 604 612 619 626 2292 2903 2981 3574 3988 3990 4125 4136 4646 4888
                                           4895 4910 4917 4927 4930 4932 4941 4945 5033 5035 5045 5052 5098 5104 5114
                                           5117 5119 5128 5132 5214 5221 5268 5274 5284 5287 5289 5298 5302 6285 6291
                                           6556 6570 6603 6904 6940 6961 6975 6978 7012 7356 7358 8436 8456 8502
DVIG0. . . . . . .  C ADDR   0AC3H   R   SEG=MAIN   1857# 1859
DVIG1. . . . . . .  C ADDR   0AB8H   R   SEG=MAIN   1848# 1850
DVIG2. . . . . . .  C ADDR   0AADH   R   SEG=MAIN   1839# 1841
DVIG3. . . . . . .  C ADDR   0AA1H   R   SEG=MAIN   1830# 1832
DVIG4. . . . . . .  C ADDR   0ACFH   R   SEG=MAIN   1868# 1870
DVIG6. . . . . . .  C ADDR   0AF1H   R   SEG=MAIN   1896# 1898
DVM. . . . . . . .  C ADDR   0AEFH   R   SEG=MAIN   1884 1895#
EA . . . . . . . .  B ADDR   00A8H.7 A      163#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 484
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 535 704 2279 2968 5366 5368 5382
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1E0FH   R   SEG=MAIN   3085 4723#
ENDSDV . . . . . .  C ADDR   0AF5H   R   SEG=MAIN   1890 1899#
ENDSUM . . . . . .  C ADDR   05A2H   R   SEG=MAIN   908 961 1064 1089#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      181#
EQU0 . . . . . . .  C ADDR   08C1H   R   SEG=MAIN   1503 1519#
EQU00. . . . . . .  C ADDR   08DFH   R   SEG=MAIN   1521 1526 1535#
EQU1L. . . . . . .  C ADDR   1123H   R   SEG=MAIN   2827 2831#
EQU2L. . . . . . .  C ADDR   16BDH   R   SEG=MAIN   3700 3705#
ERRA0. . . . . . .  C ADDR   1D2EH   R   SEG=MAIN   4589 4601#
ERRA01 . . . . . .  C ADDR   07FAH   R   SEG=MAIN   1422# 1467
ERROR. . . . . . .  C ADDR   2693H   R   SEG=MAIN   1429 1816 4221 4416 4604 5411 5425 6220#
ES0. . . . . . . .  B ADDR   00A8H.4 A      165#
ET0. . . . . . . .  B ADDR   00A8H.1 A      168#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      164# 1986 2943 4679
EX0. . . . . . . .  B ADDR   00A8H.0 A      169#
EX1. . . . . . . .  B ADDR   00A8H.2 A      167#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      194#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      191#
EXP1 . . . . . . .  N NUMB   0000H   A      7615#
EXP2 . . . . . . .  N NUMB   0001H   A      7617# 7794 7815
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   552# 556
F0 . . . . . . . .  B ADDR   00D0H.5 A      202#
F1 . . . . . . . .  B ADDR   00D0H.1 A      206#
FINDEXT. . . . . .  C ADDR   249DH   R   SEG=MAIN   4751 5851#
FINDKOEF . . . . .  C ADDR   248EH   R   SEG=MAIN   1341 5836#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   141

FINDMEM. . . . . .  C ADDR   1081H   R   SEG=MAIN   2662 2732#
FINDR. . . . . . .  C ADDR   25E5H   R   SEG=MAIN   1589 4383 6065#
FINIS. . . . . . .  C ADDR   2BECH   R   SEG=MAIN   7060 7161#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      2021 4961 4973 7820# 7909
FLCMP. . . . . . .  C ADDR   01D6H   A      1265 1363 1401 1450 1454 1466 1502 1525 1918 4588 5151 5167 5321 5336
                                           7914#
FLDIV. . . . . . .  C ADDR   02B7H   A      1288 1309 1347 1475 1494 1508 2037 2195 2233 4735 4820 4838 4988 4991
                                           5180 8084#
FLMUL. . . . . . .  C ADDR   0203H   A      1154 1254 1306 1352 1470 1531 2008 2030 2040 2046 3976 4491 4739 4824
                                           4842 7954#
FLOUT. . . . . . .  C ADDR   01E1H   A      7921 7924#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8423 8429 8480 8485
FLSUB. . . . . . .  C ADDR   01D1H   A      1246 1923 2067 2135 2191 2229 3973 5349 7907#
FND. . . . . . . .  C ADDR   01F8H   A      7930 7933 7936 7939 7942#
FO1M . . . . . . .  C ADDR   28A4H   R   SEG=MAIN   6358 6362#
FO2M . . . . . . .  C ADDR   28ADH   R   SEG=MAIN   6365 6367#
FORM4. . . . . . .  C ADDR   28AEH   R   SEG=MAIN   6360 6366 6370#
FT1IZM . . . . . .  C ADDR   0F1DH   R   SEG=MAIN   2534#
FTOL . . . . . . .  C ADDR   0343H   A      1199 1354 1478 3977 4740 4843 4992 5181 6147 8190#
FTOL1. . . . . . .  C ADDR   037CH   A      8203 8207 8231#
FTOL2. . . . . . .  C ADDR   039EH   A      8227 8264#
FTOL22 . . . . . .  C ADDR   03C4H   A      8267 8301#
FTOL23 . . . . . .  C ADDR   03A2H   A      8268# 8300
FTOL24 . . . . . .  C ADDR   03B5H   A      8270 8286#
FTOL25 . . . . . .  C ADDR   03C2H   A      8285 8300#
FTOL26 . . . . . .  C ADDR   03E4H   A      8316 8332#
FTOL3. . . . . . .  C ADDR   038AH   A      8230 8244#
FTOL33 . . . . . .  C ADDR   038EH   A      8248# 8262
FTOL4. . . . . . .  C ADDR   0371H   A      8209 8224#
FTOL9. . . . . . .  C ADDR   0381H   A      8237# 8247 8263 8331 8346
FULKALIB . . . . .  C ADDR   1E7EH   R   SEG=MAIN   4778 4793# 4881
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   492# 493
GO23NO . . . . . .  C ADDR   161BH   R   SEG=MAIN   3474 3597#
GO31L. . . . . . .  C ADDR   1129H   R   SEG=MAIN   2805 2836#
GO41L. . . . . . .  C ADDR   112EH   R   SEG=MAIN   2836 2838#
GOA2 . . . . . . .  C ADDR   079AH   R   SEG=MAIN   1367 1369 1372# 1394
GOA3A2 . . . . . .  C ADDR   07A4H   R   SEG=MAIN   1377#
GOCIKLE. . . . . .  C ADDR   0BF8H   R   SEG=MAIN   1941 2025 2054# 2061 2070
GOFULL . . . . . .  C ADDR   164EH   R   SEG=MAIN   3603 3625#
GOGO7. . . . . . .  C ADDR   1D4CH   R   SEG=MAIN   4562 4567 4614#
GOKAA2 . . . . . .  C ADDR   07C2H   R   SEG=MAIN   1392#
GOKLB. . . . . . .  C ADDR   0DECH   R   SEG=MAIN   2318 2340#
GOOFF1 . . . . . .  C ADDR   1582H   R   SEG=MAIN   3488# 3497
GOOFF2 . . . . . .  C ADDR   159DH   R   SEG=MAIN   3510# 3519
GOOFF3 . . . . . .  C ADDR   15B8H   R   SEG=MAIN   3529# 3538
GOOFF4 . . . . . .  C ADDR   15D3H   R   SEG=MAIN   3551# 3560
GOONIN . . . . . .  C ADDR   07B4H   R   SEG=MAIN   1385# 1420 1432 1617 1634
GOONIN1. . . . . .  C ADDR   096AH   R   SEG=MAIN   1609 1617#
GOONIN2. . . . . .  C ADDR   0968H   R   SEG=MAIN   1612 1616#
GOONIND. . . . . .  C ADDR   09A2H   R   SEG=MAIN   1388 1663#
GOONOFF. . . . . .  C ADDR   1547H   R   SEG=MAIN   3442# 3451
GOONT. . . . . . .  C ADDR   0B81H   R   SEG=MAIN   1944 1987#
GOPAROL. . . . . .  C ADDR   1BB0H   R   SEG=MAIN   4218 4369 4377#
GOPAROM. . . . . .  C ADDR   1A8AH   R   SEG=MAIN   4216# 4219 4226
GOPART . . . . . .  C ADDR   0333H   R   SEG=MAIN   796 799#
GOSK19 . . . . . .  C ADDR   1052H   R   SEG=MAIN   2699 2706#
GOTO7. . . . . . .  C ADDR   124CH   R   SEG=MAIN   3038# 3118 3125 3189 3211 3240 3252 3294 3298 3347 3394 3409 3471
                                           3650 3653 3704 3707 3763 3776 3782 3808 3810 3851 3874 3892 3947 4083 4146
                                           4154 4162 4263 4330 4334 4413 4423 4457 4508 4510 4526 4538 4599 4790 4801
GOTOKD . . . . . .  C ADDR   0635H   R   SEG=MAIN   1157 1181#
GOTOSTROB. . . . .  C ADDR   0B63H   R   SEG=MAIN   1955 1958 1961 1964 1967#
GOUT6. . . . . . .  C ADDR   0DA1H   R   SEG=MAIN   2308# 2336
GOVVLIST . . . . .  C ADDR   1889H   R   SEG=MAIN   3930 3952#
GOZNAK . . . . . .  C ADDR   02E5H   R   SEG=MAIN   690 739#
HNOR11 . . . . . .  C ADDR   139EH   R   SEG=MAIN   3174 3215#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   142

HNOR12 . . . . . .  C ADDR   1346H   R   SEG=MAIN   3164 3168#
HNOT1. . . . . . .  C ADDR   13EAH   R   SEG=MAIN   3140 3261#
HNOT2. . . . . . .  C ADDR   1314H   R   SEG=MAIN   3137#
HR12 . . . . . . .  C ADDR   133CH   R   SEG=MAIN   3159 3164#
HVI1113. . . . . .  C ADDR   1336H   R   SEG=MAIN   3162# 3167 3172
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 537 5361 5391 8422 8430 8479 8489
IE0. . . . . . . .  B ADDR   0088H.1 A      149#
IE1. . . . . . . .  B ADDR   0088H.3 A      147#
INCT . . . . . . .  C ADDR   1310H   R   SEG=MAIN   3132 3134#
IND. . . . . . . .  C ADDR   21F9H   R   SEG=MAIN   639 647 692 723 1430 1513 1517 1615 1818 2349 2353 2364 3068 3304
                                           3321 3850 4066 4118 4222 4417 4605 4798 5365# 5407 5413 5427 6581
INDOLL . . . . . .  C ADDR   0953H   R   SEG=MAIN   1604 1605 1609#
INIACP . . . . . .  C ADDR   2502H   R   SEG=MAIN   656 3280 5929#
INNOT1_2 . . . . .  C ADDR   1740H   R   SEG=MAIN   3772 3778#
INNOT3 . . . . . .  C ADDR   1731H   R   SEG=MAIN   3764 3769#
INNOT6 . . . . . .  C ADDR   1725H   R   SEG=MAIN   3759 3764#
INTER2 . . . . . .  C ADDR   21EDH   R   SEG=MAIN   263 5354#
INTERVA. . . . . .  D ADDR   00CDH   A      405# 630 1987 3727 3827
INTMUL . . . . . .  C ADDR   0BA4H   R   SEG=MAIN   2002 2008#
INTMUL1. . . . . .  C ADDR   0BA7H   R   SEG=MAIN   2009#
INTMUL2. . . . . .  C ADDR   0BBCH   R   SEG=MAIN   2022# 2031 2041 2047 2051
INTN . . . . . . .  C ADDR   17D2H   R   SEG=MAIN   3865#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      150#
IT1. . . . . . . .  B ADDR   0088H.2 A      148#
IZCHI. . . . . . .  C ADDR   13CFH   R   SEG=MAIN   3242#
IZMAN. . . . . . .  C ADDR   0E92H   R   SEG=MAIN   2266 2437#
IZMFUN . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2365 2376 2384 2442 2445#
IZMPAT . . . . . .  C ADDR   0EA8H   R   SEG=MAIN   2334 2350 2354 2413 2449#
IZMT2. . . . . . .  C ADDR   0EB7H   R   SEG=MAIN   2465 2470#
IZMT3. . . . . . .  C ADDR   0EC2H   R   SEG=MAIN   2470 2476#
JFINIS . . . . . .  C ADDR   2B53H   R   SEG=MAIN   7052 7060#
KD . . . . . . . .  C ADDR   2419H   R   SEG=MAIN   5739#
KEYB1. . . . . . .  C ADDR   0D73H   R   SEG=MAIN   284 2272#
KEYB2. . . . . . .  C ADDR   11DCH   R   SEG=MAIN   287 2960#
KFULL. . . . . . .  C ADDR   1625H   R   SEG=MAIN   3410 3602#
KFULLR . . . . . .  C ADDR   150EH   R   SEG=MAIN   3405 3410#
KGO23. . . . . . .  C ADDR   156FH   R   SEG=MAIN   3404 3477#
KKOUT6 . . . . . .  C ADDR   119CH   R   SEG=MAIN   2268 2921#
KLBOFF . . . . . .  C ADDR   129CH   R   SEG=MAIN   3061 3079#
KLEV1. . . . . . .  C ADDR   14E8H   R   SEG=MAIN   3360 3395#
KLEV2. . . . . . .  C ADDR   14EDH   R   SEG=MAIN   3395 3397#
KLEV21 . . . . . .  C ADDR   1511H   R   SEG=MAIN   3402 3411#
KLEV22 . . . . . .  C ADDR   14F7H   R   SEG=MAIN   3390 3399 3402#
KLEV23 . . . . . .  C ADDR   1522H   R   SEG=MAIN   3411 3419#
KLEV3. . . . . . .  C ADDR   14F2H   R   SEG=MAIN   3397 3399#
KLMAS. . . . . . .  C ADDR   03E0H   R   SEG=MAIN   828 895#
KNAVP. . . . . . .  C ADDR   12ABH   R   SEG=MAIN   3018 3087#
KNIZM. . . . . . .  B ADDR   0023H.0 A      355# 1367 1605 1775 1808 2415 2438 2439 2443
KNIZMON. . . . . .  C ADDR   0E9FH   R   SEG=MAIN   2438 2443#
KNKMP. . . . . . .  C ADDR   11C3H   R   SEG=MAIN   2948# 3008
KNLEFT . . . . . .  C ADDR   12B9H   R   SEG=MAIN   2952 3094#
KNMEM. . . . . . .  C ADDR   1447H   R   SEG=MAIN   2958 3314#
KNMENU . . . . . .  C ADDR   126EH   R   SEG=MAIN   3024 3058#
KNNUL. . . . . . .  C ADDR   12DAH   R   SEG=MAIN   2951 3112#
KNOPT. . . . . . .  C ADDR   0ECAH   R   SEG=MAIN   2265 2484#
KNRAZR . . . . . .  C ADDR   0EDFH   R   SEG=MAIN   2264 2497#
KNRIGHT. . . . . .  C ADDR   0E20H   R   SEG=MAIN   2324 2369#
KNVICH . . . . . .  C ADDR   0E41H   R   SEG=MAIN   2333 2387#
KOEFKD . . . . . .  D ADDR   00A0H   A      385# 595 4742 4752 4844 4852
KOEFKM . . . . . .  D ADDR   0094H   A      379# 593 1152 1252 2237
KOEFKP . . . . . .  D ADDR   0090H   A      378# 591 1149 1247 2199
KOMUL. . . . . . .  C ADDR   075EH   R   SEG=MAIN   1340 1344#
KOMULPZ. . . . . .  C ADDR   0758H   R   SEG=MAIN   1337 1341#
KONSTA . . . . . .  D ADDR   00BCH   A      398# 1462 4584 6145
KON_B. . . . . . .  C ADDR   0FAAH   R   SEG=MAIN   2591 2610#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   143

KOR0US . . . . . .  C ADDR   2346H   R   SEG=MAIN   2095 5608#
KOR0_AN. . . . . .  D ADDR   0084H   A      375# 1244 2107 2189 2227
KORDEC1. . . . . .  C ADDR   0686H   R   SEG=MAIN   1227 1234#
KORDEC10 . . . . .  C ADDR   0666H   R   SEG=MAIN   1215#
KORNUL . . . . . .  C ADDR   0C32H   R   SEG=MAIN   1164 2087#
KVVOD0 . . . . . .  C ADDR   1641H   R   SEG=MAIN   3370 3611 3620#
LABEL43. . . . . .  C ADDR   1880H   R   SEG=MAIN   3948# 3956
LABEL7 . . . . . .  C ADDR   1969H   R   SEG=MAIN   3948 4071#
LABELA . . . . . .  C ADDR   02A9H   R   SEG=MAIN   695# 727 2058
LABELB . . . . . .  C ADDR   0A9AH   R   SEG=MAIN   1207 1637 1823# 2075 2079 2081
LABELC . . . . . .  C ADDR   0EDFH   R   SEG=MAIN   2498#
LABELE . . . . . .  C ADDR   0EA8H   R   SEG=MAIN   2447 2463# 2503 2506 2510 2514 2522 2554
LABELF . . . . . .  C ADDR   0F0AH   R   SEG=MAIN   2263 2523#
LABELH . . . . . .  C ADDR   12FCH   R   SEG=MAIN   2950 3127#
LABELI . . . . . .  C ADDR   1CA8H   R   SEG=MAIN   3143 3200 3254 4521#
LABELI2. . . . . .  C ADDR   1383H   R   SEG=MAIN   3200# 3201
LABELK . . . . . .  C ADDR   148AH   R   SEG=MAIN   3142 3349#
LABELL . . . . . .  C ADDR   10DEH   R   SEG=MAIN   2661 2761 2769#
LABELL1. . . . . .  C ADDR   0FE7H   R   SEG=MAIN   2648# 2725 2843 2895
LABELN . . . . . .  C ADDR   1148H   R   SEG=MAIN   2726 2852#
LABELP . . . . . .  C ADDR   1856H   R   SEG=MAIN   3878 3899 3930# 4164
LABELS . . . . . .  C ADDR   181BH   R   SEG=MAIN   3607 3899#
LABELS1. . . . . .  C ADDR   1AFBH   R   SEG=MAIN   4241 4271#
LABELS13 . . . . .  C ADDR   1C2EH   R   SEG=MAIN   4312 4437#
LABELS3. . . . . .  C ADDR   1CBBH   R   SEG=MAIN   4531#
LABELS4. . . . . .  C ADDR   1C96H   R   SEG=MAIN   4311 4512#
LABL2. . . . . . .  C ADDR   110AH   R   SEG=MAIN   2808# 3414
LABM . . . . . . .  C ADDR   16C6H   R   SEG=MAIN   3415 3710#
LABN_1 . . . . . .  C ADDR   1152H   R   SEG=MAIN   2854 2862#
LABN_2 . . . . . .  C ADDR   114DH   R   SEG=MAIN   2852 2854#
LADD . . . . . . .  C ADDR   2C94H   R   SEG=MAIN   807 842 860 876 1906 7287#
LADDX. . . . . . .  C ADDR   2CA5H   R   SEG=MAIN   7311#
LBTOF. . . . . . .  C ADDR   042DH   A      8401#
LCMP . . . . . . .  C ADDR   2A92H   R   SEG=MAIN   5525 6389 6867#
LDC_LONG . . . . .  C ADDR   2AA8H   R   SEG=MAIN   590 1339 1904 2194 2232 3122 6887#
LDC_LTEMP. . . . .  C ADDR   2ACAH   R   SEG=MAIN   816 1103 1108 1113 1117 1264 1308 1346 1362 1400 1449 1453 1465
                                           1469 1493 1501 1507 1524 1530 1917 1922 2001 2006 2029 2036 2039 2045 2066
                                           2134 3972 3975 4001 4490 4587 4738 4823 4841 4990 5179 5348 5539 6552
                                           6923#
LDX_LONG . . . . .  C ADDR   2AF0H   R   SEG=MAIN   6958#
LDX_LTEMP. . . . .  C ADDR   2B16H   R   SEG=MAIN   6996#
LEFCUR . . . . . .  C ADDR   1751H   R   SEG=MAIN   3788# 3860 3876
LEFKL. . . . . . .  C ADDR   12C3H   R   SEG=MAIN   3094 3100#
LEFMEM11 . . . . .  C ADDR   149EH   R   SEG=MAIN   3361# 3396 3398 3400
LEFT21 . . . . . .  C ADDR   1670H   R   SEG=MAIN   3646 3651#
LEFT_S . . . . . .  C ADDR   1AF8H   R   SEG=MAIN   4270# 4273
LEFT_SK. . . . . .  C ADDR   1C0FH   R   SEG=MAIN   4270 4425#
LEV220 . . . . . .  C ADDR   14FAH   R   SEG=MAIN   3403# 3412
LEV2GO . . . . . .  C ADDR   1178H   R   SEG=MAIN   2851 2891#
LEVEL. . . . . . .  D ADDR   00B0H   A      392# 2356 2733 2776 3322 3332 3359 3622 6095
LI21 . . . . . . .  C ADDR   13D9H   R   SEG=MAIN   3249 3251#
LI42_43. . . . . .  C ADDR   18EFH   R   SEG=MAIN   3998# 4138
LIST_43. . . . . .  C ADDR   1973H   R   SEG=MAIN   3950 4076#
LLDI2. . . . . . .  C ADDR   0E8BH   R   SEG=MAIN   2428 2432#
LLDI23 . . . . . .  C ADDR   0E7FH   R   SEG=MAIN   2420 2425#
LLDI3. . . . . . .  C ADDR   0E86H   R   SEG=MAIN   2427 2429#
LLEV2. . . . . . .  C ADDR   1133H   R   SEG=MAIN   2807 2841#
LLMUL. . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   7181#
LLSUB. . . . . . .  C ADDR   2C82H   R   SEG=MAIN   7263#
LLTOF. . . . . . .  C ADDR   0432H   A      8407#
LMUL . . . . . . .  C ADDR   2BFDH   R   SEG=MAIN   6347 6553 7183#
LOA3_X . . . . . .  C ADDR   29DDH   R   SEG=MAIN   1947 6617#
LOAB12 . . . . . .  C ADDR   2551H   R   SEG=MAIN   3278 5970#
LOAD . . . . . . .  D ADDR   00B7H   A      396# 2487 2528 3130 3274 5631
LOADB. . . . . . .  C ADDR   13FDH   R   SEG=MAIN   3269 3272# 3305 3311
LOADB2 . . . . . .  C ADDR   1429H   R   SEG=MAIN   3292 3296#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   144

LOADCLE. . . . . .  C ADDR   14BBH   R   SEG=MAIN   3375# 3614
LOADKD . . . . . .  C ADDR   256EH   R   SEG=MAIN   6003#
LOADR2 . . . . . .  C ADDR   2560H   R   SEG=MAIN   3872 3967 4487 4582 4628 5986#
LOADT. . . . . . .  C ADDR   2361H   R   SEG=MAIN   2489 2534 3136 5631#
LOADUS . . . . . .  C ADDR   2300H   R   SEG=MAIN   657 1411 1624 2383 2444 3076 3080 3109 3281 4880 5552#
LOAHL_R2 . . . . .  C ADDR   200DH   R   SEG=MAIN   4956 4968 5019# 5147 5163 5317 5332
LOBLOK . . . . . .  C ADDR   167BH   R   SEG=MAIN   3600 3658# 3677
LOCLE. . . . . . .  C ADDR   14B6H   R   SEG=MAIN   3364 3373#
LOD1 . . . . . . .  C ADDR   2370H   R   SEG=MAIN   5639# 5644
LODT . . . . . . .  C ADDR   237FH   R   SEG=MAIN   5652# 5657
LOIZMK . . . . . .  C ADDR   1349H   R   SEG=MAIN   3169# 3205
LOKAME1. . . . . .  C ADDR   1A3DH   R   SEG=MAIN   4178#
LOLEVT . . . . . .  C ADDR   2363H   R   SEG=MAIN   2362 5632#
LOLIST . . . . . .  C ADDR   14ABH   R   SEG=MAIN   3366#
LOME1. . . . . . .  C ADDR   1DC3H   R   SEG=MAIN   4690# 4694 4697 4700 4703 4707 4710 4713 4716 4720
LOMENU . . . . . .  C ADDR   1DBBH   R   SEG=MAIN   2676 2689 4178 4228 4251 4687#
LOOP . . . . . . .  C ADDR   22BCH   R   SEG=MAIN   5488# 5489
LOOPS. . . . . . .  C ADDR   2B56H   R   SEG=MAIN   7062# 7095
LOSPUS . . . . . .  C ADDR   233AH   R   SEG=MAIN   2096 5591#
LOSTAT . . . . . .  C ADDR   14D0H   R   SEG=MAIN   3379 3385#
LOTEXT . . . . . .  C ADDR   237BH   R   SEG=MAIN   1512 1516 1611 1614 2402 2565 2573 2582 2701 2707 2741 2750 2758
                                           2767 2780 3066 3162 3231 3317 3367 3376 3382 3387 3393 3408 3626 3659 3671
                                           3726 3848 3916 3940 4107 4143 4151 4159 4173 4195 4201 4247 4380 4427 4432
                                           4595 4690 4797 5649# 6221
LOTP . . . . . . .  C ADDR   25C4H   R   SEG=MAIN   6044# 6054 6057
LOTPUS . . . . . .  C ADDR   25BCH   R   SEG=MAIN   4259 5586 6041#
LOU. . . . . . . .  C ADDR   0E91H   R   SEG=MAIN   2415 2431 2435#
LOUIZM . . . . . .  C ADDR   0E6EH   R   SEG=MAIN   2415# 2441 5583
LOUTF. . . . . . .  C ADDR   1126H   R   SEG=MAIN   2833# 2842 2849 2853 2855
LOVICH . . . . . .  C ADDR   133FH   R   SEG=MAIN   3165# 3198 3219 4641
LOWR . . . . . . .  C ADDR   14C3H   R   SEG=MAIN   3373 3379#
LOWR1. . . . . . .  C ADDR   14C8H   R   SEG=MAIN   3381# 3618
LSUB . . . . . . .  C ADDR   2C82H   R   SEG=MAIN   1204 1380 5540 7264#
LTEMP. . . . . . .  N NUMB   0008H   A      1120 1122 1123 1124 5876 5877 5878 5879 6399 6402 6405 6408 6451 6452
                                           6453 6454 6679# 7053 7054 7055 7056 7065 7069 7073 7077 7080 7081 7082
                                           7083 7084 7085 7086 7087 7088 7089 7090 7091 7094 7097 7102 7106 7110 7120
                                           7123 7126 7129 7145 7148 7149 7151 7152 7154 7155 7157 7162 7163 7164 7165
                                           7185 7190 7198 7206 7211 7222 7230 7236 7244 7250 7618 7619 7658 7663 7665
                                           7674 7675 7676 7677 7908 7916 7929 7932 7935 7938 8518 8521 8524 8527
LWR. . . . . . . .  C ADDR   287FH   R   SEG=MAIN   6338# 6342
LWRX . . . . . . .  C ADDR   2843H   R   SEG=MAIN   6283# 6295
LWTOF. . . . . . .  C ADDR   042FH   A      8403#
MABIN. . . . . . .  D ADDR   006FH   A      304#
MAFORM . . . . . .  C ADDR   289AH   R   SEG=MAIN   1685 4004 4993 5183 6346 6351 6356# 6388
MAIN . . . . . . .  C SEG    2CDFH       REL=UNIT   238 295# 456
MANT1. . . . . . .  N NUMB   0002H   A      7616# 7643 7692 7693
MANT2. . . . . . .  N NUMB   0008H   A      7618# 7669 7670 7801 7803 7804 7806 7807 7809 7810 7812 7851 7852 7854
                                           7855 7857 7858 7860 7861 7865 7867 7870 7873 7971 7973 7974 7976 7977 7979
                                           7980 7982 8033 8035 8036 8038 8039 8041 8042 8044 8126 8130 8134 8138 8142
                                           8145 8148 8151
MARK0_8. . . . . .  C ADDR   0FB1H   R   SEG=MAIN   2593 2611 2613#
MARKER . . . . . .  D ADDR   00B2H   A      394# 568 2300 2552 2592 2602 2610 2620 2626 2815 2823 2862 2869 2881 2988
                                           3209 3226 3247 3341 3468 3579 3634 3642 3663 3689 3696 3754 3794 3801 3841
                                           3884 3942 3958 4081 4229 4317 4324 4408 4421 4444 4451 4498 4531 4550 4557
                                           4591 4601 4612 4637 6072 6098 6124 6135 6193
MARLE. . . . . . .  C ADDR   2638H   R   SEG=MAIN   3809 6121#
MARRI. . . . . . .  C ADDR   2645H   R   SEG=MAIN   2889 6134#
MAS10. . . . . . .  C ADDR   03FFH   R   SEG=MAIN   897 910#
MAS20. . . . . . .  C ADDR   047FH   R   SEG=MAIN   910 965#
MAS4 . . . . . . .  C ADDR   0573H   R   SEG=MAIN   963 1066#
MAS5DIV. . . . . .  C ADDR   05E7H   R   SEG=MAIN   1104 1109 1114 1118 1126#
MASFULL. . . . . .  C ADDR   05AEH   R   SEG=MAIN   1093 1097#
MASS0. . . . . . .  X ADDR   0100H   A      418 419# 898 903 932 940 1014 1022 1071 1078 6325
MASS1. . . . . . .  X ADDR   0104H   A      420# 906 929 943 1011 1025 1069 1081
MASS10 . . . . . .  X ADDR   0128H   A      429# 987 1044
MASS11 . . . . . .  X ADDR   012CH   A      430# 984 1046
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   145

MASS12 . . . . . .  X ADDR   0130H   A      431# 981 1048
MASS13 . . . . . .  X ADDR   0134H   A      432# 978 1050
MASS14 . . . . . .  X ADDR   0138H   A      433# 975 1052
MASS15 . . . . . .  X ADDR   013CH   A      434# 972 1054
MASS16 . . . . . .  X ADDR   0140H   A      435# 970 1056
MASS17 . . . . . .  X ADDR   0144H   A      436# 968 1058
MASS18 . . . . . .  X ADDR   0148H   A      437# 966 1060
MASS19 . . . . . .  X ADDR   014CH   A      438# 1062
MASS2. . . . . . .  X ADDR   0108H   A      421# 926 945 1008 1027 1067 1083
MASS3. . . . . . .  X ADDR   010CH   A      422# 923 947 1005 1029 1085
MASS4. . . . . . .  X ADDR   0110H   A      423# 920 949 1002 1031
MASS5. . . . . . .  X ADDR   0114H   A      424# 917 951 999 1033
MASS6. . . . . . .  X ADDR   0118H   A      425# 915 953 997 1035
MASS7. . . . . . .  X ADDR   011CH   A      426# 913 955 995 1037
MASS8. . . . . . .  X ADDR   0120H   A      427# 911 957 993 1039
MASS9. . . . . . .  X ADDR   0124H   A      428# 959 990 1041
MASX5. . . . . . .  C ADDR   05DDH   R   SEG=MAIN   1095 1120#
MAXG . . . . . . .  C ADDR   216CH   R   SEG=MAIN   5273# 5327
MAXVIX . . . . . .  C ADDR   21D6H   R   SEG=MAIN   5337 5342#
ME11_15DE. . . . .  C ADDR   1812H   R   SEG=MAIN   3894# 3913
ME11_15DEC . . . .  C ADDR   1A3CH   R   SEG=MAIN   3894 4177#
ME21_22. . . . . .  C ADDR   10EEH   R   SEG=MAIN   2780# 2789
ME21_23. . . . . .  C ADDR   1AB6H   R   SEG=MAIN   3927 4237#
ME21_23DEC . . . .  C ADDR   1AD2H   R   SEG=MAIN   4244 4249#
MEAVP. . . . . . .  C ADDR   12B5H   R   SEG=MAIN   3088 3091#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   541# 543
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   545# 548
MEM10MS. . . . . .  C ADDR   02A4H   R   SEG=MAIN   692#
MEM12NO. . . . . .  C ADDR   163CH   R   SEG=MAIN   3612 3616#
MENG . . . . . . .  C ADDR   1F59H   R   SEG=MAIN   4916# 4966
MENU12 . . . . . .  C ADDR   1DC7H   R   SEG=MAIN   4688 4692#
MENU13 . . . . . .  C ADDR   1DCFH   R   SEG=MAIN   4692 4695#
MENU14 . . . . . .  C ADDR   1DD7H   R   SEG=MAIN   4695 4698#
MENU15 . . . . . .  C ADDR   1DDFH   R   SEG=MAIN   4698 4701#
MENU21 . . . . . .  C ADDR   1DE7H   R   SEG=MAIN   4701 4705#
MENU22 . . . . . .  C ADDR   1DEFH   R   SEG=MAIN   4705 4708#
MENU23 . . . . . .  C ADDR   1DF7H   R   SEG=MAIN   4708 4711#
MENU31 . . . . . .  C ADDR   1DFFH   R   SEG=MAIN   4711 4714#
MENU41 . . . . . .  C ADDR   1E07H   R   SEG=MAIN   4714 4718#
MENUOFF. . . . . .  C ADDR   1290H   R   SEG=MAIN   3059 3072#
MENUON . . . . . .  C ADDR   1848H   R   SEG=MAIN   3918#
MERR . . . . . . .  C ADDR   126BH   R   SEG=MAIN   3055# 3058
ME_14. . . . . . .  C ADDR   14DAH   R   SEG=MAIN   3390#
ME_41. . . . . . .  C ADDR   1B73H   R   SEG=MAIN   4271 4338#
ME_52. . . . . . .  C ADDR   1B47H   R   SEG=MAIN   4314# 4338
ME_52V . . . . . .  C ADDR   1B64H   R   SEG=MAIN   4328 4330#
MIDL . . . . . . .  C ADDR   2B89H   R   SEG=MAIN   7057 7092#
MIGN . . . . . . .  C ADDR   2675H   R   SEG=MAIN   5370 6193#
MIGNN. . . . . . .  C ADDR   267DH   R   SEG=MAIN   6195 6200#
MIN4_HL. . . . . .  C ADDR   2019H   R   SEG=MAIN   5032# 5065 5091 5235 5261
MING . . . . . . .  C ADDR   2077H   R   SEG=MAIN   5103# 5157
MINIVIX. . . . . .  C ADDR   20E1H   R   SEG=MAIN   5168 5173# 5342
MLABL2 . . . . . .  C ADDR   16A6H   R   SEG=MAIN   3681# 3712 3951
MLABL2R. . . . . .  C ADDR   1886H   R   SEG=MAIN   3951# 3954
MMM. . . . . . . .  C ADDR   029FH   R   SEG=MAIN   688#
MO220. . . . . . .  C ADDR   0948H   R   SEG=MAIN   1219 1390 1604#
MO500I . . . . . .  C ADDR   08B5H   R   SEG=MAIN   1455 1515#
MO500R . . . . . .  C ADDR   08A9H   R   SEG=MAIN   1451 1511#
MODF . . . . . . .  B ADDR   00F8H.5 A      231#
MOUTF. . . . . . .  C ADDR   107BH   R   SEG=MAIN   2727# 2738 2747 2755 2764 2772
MOUTKMEM . . . . .  C ADDR   1815H   R   SEG=MAIN   3895# 3903
MOVE28 . . . . . .  C ADDR   2907H   R   SEG=MAIN   1283 1301 1348 1457 2192 2230 4732 4815 4833 4958 4970 4985 5146
                                           5162 5316 5331 6451#
MOVE82 . . . . . .  C ADDR   24C0H   R   SEG=MAIN   5876#
MOVEA3 . . . . . .  C ADDR   09A2H   R   SEG=MAIN   1666#
MOVLEFT. . . . . .  D ADDR   003AH   A      310# 2594 2831 2874 3228 3599 3643 3651 3705 3757 3802 3945 4232 4327
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   146

                                           4410 4454 4532 4560 6128
MOVRIG . . . . . .  D ADDR   003BH   A      309# 2590 2824 2828 2870 3229 3598 3647 3697 3701 3756 3806 3944 4231
                                           4411 4536 6137
MSTEN. . . . . . .  B ADDR   00F8H.1 A      235#
MUP1 . . . . . . .  C ADDR   021AH   A      7968# 8011
MUP11. . . . . . .  C ADDR   0257H   A      8015# 8060
MUP2 . . . . . . .  C ADDR   0297H   A      8045 8059#
MUP3 . . . . . . .  C ADDR   026CH   A      8014 8030#
MVV11. . . . . . .  C ADDR   1676H   R   SEG=MAIN   3623 3656#
MVV12. . . . . . .  C ADDR   168EH   R   SEG=MAIN   3656 3668#
N12DELCH . . . . .  C ADDR   0D56H   R   SEG=MAIN   2248 2256#
N4DELCH. . . . . .  C ADDR   0D02H   R   SEG=MAIN   2172 2210#
N8DELCH. . . . . .  C ADDR   0D44H   R   SEG=MAIN   2210 2248#
NBIMENU. . . . . .  C ADDR   1081H   R   SEG=MAIN   2731#
NBLOK. . . . . . .  D ADDR   0038H   A      312# 628 1952 3431 3567 3660 3724 3938 4029 6543 6564 6595
NE05 . . . . . . .  C ADDR   0358H   A      8197 8199 8201 8204#
NELEM. . . . . . .  D ADDR   0037H   A      313# 629 3969 4086 4090
NEXIN. . . . . . .  C ADDR   2206H   R   SEG=MAIN   5373# 5380
NEXTMAX. . . . . .  C ADDR   21A1H   R   SEG=MAIN   5305 5313#
NEXTMEA. . . . . .  C ADDR   1F8EH   R   SEG=MAIN   4948 4956#
NEXTMIN. . . . . .  C ADDR   20ACH   R   SEG=MAIN   5135 5143#
NMEM_MENU. . . . .  C ADDR   1818H   R   SEG=MAIN   3897# 3901
NMINUS . . . . . .  C ADDR   06A3H   R   SEG=MAIN   1249 1253#
NMINUS3. . . . . .  C ADDR   0607H   R   SEG=MAIN   1151 1153#
NNDELCH. . . . . .  C ADDR   0CC2H   R   SEG=MAIN   2157 2172#
NNMEMB . . . . . .  C ADDR   1184H   R   SEG=MAIN   2729 2897#
NNNOTT . . . . . .  C ADDR   13E7H   R   SEG=MAIN   3259# 3262
NNNUL. . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1748 1751#
NO . . . . . . . .  C ADDR   2B71H   R   SEG=MAIN   7067 7071 7075 7079#
NO0CHK . . . . . .  C ADDR   11D2H   R   SEG=MAIN   2954#
NO0CHKL. . . . . .  C ADDR   0D69H   R   SEG=MAIN   2268#
NO0KEY . . . . . .  C ADDR   02B9H   R   SEG=MAIN   700 707#
NO10MSV. . . . . .  C ADDR   17B9H   R   SEG=MAIN   3846 3852#
NO11V6 . . . . . .  C ADDR   0F61H   R   SEG=MAIN   2560 2568#
NO12V6 . . . . . .  C ADDR   0F75H   R   SEG=MAIN   2568 2577#
NO13V6 . . . . . .  C ADDR   0F89H   R   SEG=MAIN   2577 2587#
NO21P7 . . . . . .  C ADDR   1D53H   R   SEG=MAIN   4570 4619#
NO23RI . . . . . .  C ADDR   1032H   R   SEG=MAIN   2687 2691#
NO2MSV . . . . . .  C ADDR   17B6H   R   SEG=MAIN   3851# 3852 3862
NO2PARN. . . . . .  C ADDR   0997H   R   SEG=MAIN   1649 1655#
NO31N. . . . . . .  C ADDR   1770H   R   SEG=MAIN   3815#
NO31RI . . . . . .  C ADDR   1063H   R   SEG=MAIN   2693 2717#
NO3PARN. . . . . .  C ADDR   098DH   R   SEG=MAIN   1649# 1729
NO4DEL . . . . . .  C ADDR   0C65H   R   SEG=MAIN   2100 2118#
NO5DEL . . . . . .  C ADDR   0C84H   R   SEG=MAIN   2133# 2141
NO6DEL . . . . . .  C ADDR   0C92H   R   SEG=MAIN   2131 2139#
NOAVK. . . . . . .  C ADDR   0675H   R   SEG=MAIN   1175 1224# 2150
NOAVP. . . . . . .  C ADDR   079AH   R   SEG=MAIN   1371# 1402 1405
NOBAVP . . . . . .  C ADDR   0A3EH   R   SEG=MAIN   1514 1518 1599 1769 1773#
NOBEF99. . . . . .  C ADDR   0370H   R   SEG=MAIN   813 829# 848 866 882
NOBIT. . . . . . .  C ADDR   0245H   A      7983 7997#
NOBITIZM . . . . .  C ADDR   0A47H   R   SEG=MAIN   1775 1778#
NOBL21 . . . . . .  C ADDR   10F7H   R   SEG=MAIN   2777 2785#
NOBL22 . . . . . .  C ADDR   1101H   R   SEG=MAIN   2785 2805#
NOBUF. . . . . . .  C ADDR   0A7CH   R   SEG=MAIN   1805 1807#
NOBUF0 . . . . . .  C ADDR   0C08H   R   SEG=MAIN   1942 2063#
NOCHI0 . . . . . .  C ADDR   0989H   R   SEG=MAIN   1391 1636#
NOCHIND. . . . . .  C ADDR   02D8H   R   SEG=MAIN   721 729#
NOCHN10. . . . . .  C ADDR   05CAH   R   SEG=MAIN   1106 1111#
NOCHN2 . . . . . .  C ADDR   05BFH   R   SEG=MAIN   1101 1106#
NOCHN20. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1111 1116#
NODI2. . . . . . .  C ADDR   096DH   R   SEG=MAIN   1607 1619#
NODI6. . . . . . .  C ADDR   12C5H   R   SEG=MAIN   3098 3102#
NODI8. . . . . . .  C ADDR   09F3H   R   SEG=MAIN   1712 1719#
NODI8K . . . . . .  C ADDR   1BE3H   R   SEG=MAIN   4396 4401#
NODI8_43 . . . . .  C ADDR   194CH   R   SEG=MAIN   4043 4049#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   147

NODI9. . . . . . .  C ADDR   0972H   R   SEG=MAIN   1621 1624#
NODI9_43 . . . . .  C ADDR   1957H   R   SEG=MAIN   4049 4057#
NODIS9 . . . . . .  C ADDR   0A06H   R   SEG=MAIN   1719 1731#
NODISK9. . . . . .  C ADDR   1BEBH   R   SEG=MAIN   4400 4401 4408#
NOENDLI. . . . . .  C ADDR   29A9H   R   SEG=MAIN   6578 6582#
NOEQU1 . . . . . .  C ADDR   1169H   R   SEG=MAIN   2873 2877#
NOEQU2 . . . . . .  C ADDR   176AH   R   SEG=MAIN   3805 3809#
NOFIZM . . . . . .  C ADDR   0F42H   R   SEG=MAIN   2524 2556#
NOFT1. . . . . . .  C ADDR   0F1CH   R   SEG=MAIN   2529 2533#
NOFZ . . . . . . .  C ADDR   0C03H   R   SEG=MAIN   2054 2058#
NOH37. . . . . . .  C ADDR   135EH   R   SEG=MAIN   3158 3182# 3192
NOHNOT1. . . . . .  C ADDR   143CH   R   SEG=MAIN   3263 3306#
NOHNOT2. . . . . .  C ADDR   1431H   R   SEG=MAIN   3299# 3306
NOKLB. . . . . . .  C ADDR   0A76H   R   SEG=MAIN   1803 1805#
NOKORR . . . . . .  C ADDR   061DH   R   SEG=MAIN   1162 1165#
NOLAH. . . . . . .  C ADDR   1320H   R   SEG=MAIN   3127 3145#
NOLI_43. . . . . .  C ADDR   19C8H   R   SEG=MAIN   4076 4121#
NOM31. . . . . . .  C ADDR   1748H   R   SEG=MAIN   3709 3784#
NOM32. . . . . . .  C ADDR   17C1H   R   SEG=MAIN   3784 3858#
NOM33. . . . . . .  C ADDR   17EFH   R   SEG=MAIN   3858 3878#
NOMARL . . . . . .  C ADDR   1CD0H   R   SEG=MAIN   4534 4540 4544#
NOMAXI . . . . . .  C ADDR   21B9H   R   SEG=MAIN   5322 5325#
NOME11 . . . . . .  C ADDR   162CH   R   SEG=MAIN   3609#
NOMEM11. . . . . .  C ADDR   109CH   R   SEG=MAIN   2734 2744#
NOMEM12. . . . . .  C ADDR   10B2H   R   SEG=MAIN   2744 2752#
NOMEM13. . . . . .  C ADDR   10C8H   R   SEG=MAIN   2752 2761#
NOMEMK . . . . . .  C ADDR   1629H   R   SEG=MAIN   3330 3606#
NOMINI . . . . . .  C ADDR   20C4H   R   SEG=MAIN   5152 5155#
NON1C. . . . . . .  C ADDR   0EF0H   R   SEG=MAIN   2504 2508#
NONULAVT . . . . .  C ADDR   065AH   R   SEG=MAIN   1170 1209#
NONULDEL . . . . .  C ADDR   0C47H   R   SEG=MAIN   2088 2099#
NOP1OLL. . . . . .  C ADDR   0A90H   R   SEG=MAIN   1813 1814 1818#
NOP3_0 . . . . . .  C ADDR   098DH   R   SEG=MAIN   1642#
NOPART1. . . . . .  C ADDR   0374H   R   SEG=MAIN   802 836#
NOPART2. . . . . .  C ADDR   0394H   R   SEG=MAIN   836 855#
NOPART3. . . . . .  C ADDR   03B4H   R   SEG=MAIN   855 871#
NOPART4. . . . . .  C ADDR   03D4H   R   SEG=MAIN   871 888#
NOPLUS . . . . . .  C ADDR   0FD9H   R   SEG=MAIN   2638 2641#
NOPOIN7. . . . . .  C ADDR   1CE7H   R   SEG=MAIN   4530 4565#
NOPOINT. . . . . .  C ADDR   1CB3H   R   SEG=MAIN   4524 4528#
NORDN. . . . . . .  C ADDR   00F6H   A      7704# 7737
NORDN1 . . . . . .  C ADDR   0107H   A      7706 7720#
NORIG2 . . . . . .  C ADDR   113CH   R   SEG=MAIN   2838 2846#
NORIM6 . . . . . .  C ADDR   1184H   R   SEG=MAIN   2901#
NORIME . . . . . .  C ADDR   1018H   R   SEG=MAIN   2674 2678#
NORIME1. . . . . .  C ADDR   1012H   R   SEG=MAIN   2676# 2679 2692
NORM1. . . . . . .  C ADDR   00F0H   A      7699# 7896 8073 8175 8392
NORR11 . . . . . .  C ADDR   1376H   R   SEG=MAIN   3194#
NORR12 . . . . . .  C ADDR   1386H   R   SEG=MAIN   3194 3201# 3215
NORUP. . . . . . .  C ADDR   0119H   A      7703 7740#
NORUP1 . . . . . .  C ADDR   011EH   A      7745# 7763
NORUP2 . . . . . .  C ADDR   0132H   A      7747 7764#
NORVICH. . . . . .  C ADDR   0A93H   R   SEG=MAIN   1728 1819#
NOSAV1 . . . . . .  C ADDR   0B51H   R   SEG=MAIN   1953 1956#
NOSAV2 . . . . . .  C ADDR   0B58H   R   SEG=MAIN   1956 1959#
NOSAV3 . . . . . .  C ADDR   0B5FH   R   SEG=MAIN   1959 1962#
NOSUB. . . . . . .  C ADDR   2BACH   R   SEG=MAIN   7101 7105 7109 7114#
NOT1IN . . . . . .  C ADDR   0C1DH   R   SEG=MAIN   1892 2073#
NOT1_7 . . . . . .  C ADDR   125BH   R   SEG=MAIN   3040 3047#
NOT2IN . . . . . .  C ADDR   0C25H   R   SEG=MAIN   2073 2077#
NOT2_7 . . . . . .  C ADDR   1266H   R   SEG=MAIN   3047 3052#
NOT3IN . . . . . .  C ADDR   0C2DH   R   SEG=MAIN   2077 2080#
NOTAKT . . . . . .  C ADDR   0A51H   R   SEG=MAIN   1779 1783#
NOTE21 . . . . . .  C ADDR   071AH   R   SEG=MAIN   1270 1312#
NOTE22 . . . . . .  C ADDR   0735H   R   SEG=MAIN   1312 1324#
NOTESTIZM. . . . .  C ADDR   074DH   R   SEG=MAIN   1233 1336#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   148

NOTT1. . . . . . .  C ADDR   0B9BH   R   SEG=MAIN   1999 2004#
NOTT2. . . . . . .  C ADDR   0BC3H   R   SEG=MAIN   2004 2027#
NOTT3. . . . . . .  C ADDR   0BD1H   R   SEG=MAIN   2027 2034#
NOTT4. . . . . . .  C ADDR   0BE8H   R   SEG=MAIN   2034 2043#
NOTT5. . . . . . .  C ADDR   0BF6H   R   SEG=MAIN   2043 2048#
NOT_1. . . . . . .  C ADDR   0EF7H   R   SEG=MAIN   2508 2513#
NOT_10 . . . . . .  C ADDR   0EF7H   R   SEG=MAIN   2512#
NOVIR. . . . . . .  C ADDR   0FFAH   R   SEG=MAIN   2545 2663#
NOVIR1 . . . . . .  C ADDR   0F2CH   R   SEG=MAIN   2545# 2556
NOZMEA . . . . . .  C ADDR   2009H   R   SEG=MAIN   5013 5015#
NOZMIN . . . . . .  C ADDR   2118H   R   SEG=MAIN   5203 5205#
NOZZBL . . . . . .  C ADDR   193EH   R   SEG=MAIN   4032 4035 4038 4041#
NOZZMI . . . . . .  C ADDR   09E0H   R   SEG=MAIN   1707 1709#
NOZZMI1. . . . . .  C ADDR   192EH   R   SEG=MAIN   4030 4033#
NOZZMI2. . . . . .  C ADDR   1935H   R   SEG=MAIN   4033 4036#
NOZZMI3. . . . . .  C ADDR   193CH   R   SEG=MAIN   4036 4039#
NOZZMI43 . . . . .  C ADDR   1925H   R   SEG=MAIN   4027 4029#
NSEC1. . . . . . .  C ADDR   0A2AH   R   SEG=MAIN   1752 1756#
NSEC10 . . . . . .  C ADDR   0A35H   R   SEG=MAIN   1755 1759 1764#
NSEC11 . . . . . .  C ADDR   0A32H   R   SEG=MAIN   1756 1761#
NUERR. . . . . . .  D ADDR   0039H   A      311# 1428 1815 4220 4415 4603 5410 5424 6222
NULAVT . . . . . .  C ADDR   0CA7H   R   SEG=MAIN   2155#
NUMSIZE. . . . . .  N NUMB   0004H   A      6682# 6704 6742 6749 6824 6844
OBOARD . . . . . .  C ADDR   2AE2H   R   SEG=MAIN   6925 6939#
OBOARD1. . . . . .  C ADDR   2B2AH   R   SEG=MAIN   6998 7011#
OFFMENUM . . . . .  C ADDR   1487H   R   SEG=MAIN   3346# 3355
OK1. . . . . . . .  C ADDR   0186H   A      7830 7845#
OK2. . . . . . . .  C ADDR   01A0H   A      7847 7862#
OK3. . . . . . . .  C ADDR   01C4H   A      7879 7895#
OLDMAX . . . . . .  C ADDR   2138H   R   SEG=MAIN   5224 5230#
OLDMEAN. . . . . .  C ADDR   1F44H   R   SEG=MAIN   4898 4904#
OLDMIN . . . . . .  C ADDR   2043H   R   SEG=MAIN   5055 5061#
ONBOAR1. . . . . .  C ADDR   2B08H   R   SEG=MAIN   6960 6977#
ONBOARD. . . . . .  C ADDR   2ABCH   R   SEG=MAIN   6889 6903#
ONMEM11. . . . . .  C ADDR   1461H   R   SEG=MAIN   3071 3138 3163 3324# 3368 3377 3383 3388 3627 3667 3674 3917 3923
                                           4175 4179 4184 4199 4204 4234 4248 4252 4430 4435
ONMEM12. . . . . .  C ADDR   1AD9H   R   SEG=MAIN   4253# 4256 4275
ONMEM13. . . . . .  C ADDR   1C93H   R   SEG=MAIN   4455 4510# 4514 4516
ONMIG. . . . . . .  C ADDR   268BH   R   SEG=MAIN   6204 6213#
ONTEST . . . . . .  C ADDR   0EA6H   R   SEG=MAIN   2437 2447#
ONVICH . . . . . .  C ADDR   0E62H   R   SEG=MAIN   2394 2406#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 495
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 488 492
OUT43. . . . . . .  C ADDR   1960H   R   SEG=MAIN   4066#
OUT6 . . . . . . .  C ADDR   1184H   R   SEG=MAIN   2262 2340 2386 2469 2474 2479 2495 2543 2654 2902#
OUT7 . . . . . . .  C ADDR   1D7CH   R   SEG=MAIN   2948 2949 3044 3051 3055 3077 3083 3133 3328 3416 3768 3897 4068
                                           4075 4120 4214 4309 4505 4519 4614 4616 4644#
OUTA . . . . . . .  C ADDR   2652H   R   SEG=MAIN   3233 6145#
OUTA2. . . . . . .  C ADDR   266CH   R   SEG=MAIN   6156# 6161
OUTF . . . . . . .  C ADDR   0F22H   R   SEG=MAIN   2539#
OUTFL. . . . . . .  C ADDR   0FEAH   R   SEG=MAIN   2646 2650#
OUTKMEM. . . . . .  C ADDR   146EH   R   SEG=MAIN   3332# 3358 3895
OUTMA. . . . . . .  C ADDR   0FC3H   R   SEG=MAIN   2629 2631#
OUTMAX . . . . . .  C ADDR   21BEH   R   SEG=MAIN   5210 5309 5328#
OUTMEA . . . . . .  C ADDR   1FA9H   R   SEG=MAIN   4902 4952 4967#
OUTMENU. . . . . .  C ADDR   1A85H   R   SEG=MAIN   4213#
OUTMIN . . . . . .  C ADDR   20C9H   R   SEG=MAIN   5041 5139 5159#
OUTR . . . . . . .  C ADDR   090CH   R   SEG=MAIN   1544 1567#
OUTR5. . . . . . .  C ADDR   0928H   R   SEG=MAIN   1565 1586#
OUTSKO . . . . . .  C ADDR   1B3AH   R   SEG=MAIN   4305 4307#
OUTSKO1. . . . . .  C ADDR   1B37H   R   SEG=MAIN   4303 4306#
OUTVICH. . . . . .  C ADDR   0F2FH   R   SEG=MAIN   2546# 2558
OUTVIR . . . . . .  C ADDR   0DE5H   R   SEG=MAIN   2307 2336#
OUT_KALI . . . . .  C ADDR   1E8BH   R   SEG=MAIN   4799#
OV . . . . . . . .  B ADDR   00D0H.2 A      205# 6881
P. . . . . . . . .  B ADDR   00D0H.0 A      207#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   149

P0 . . . . . . . .  D ADDR   0080H   A      16# 5373 5377
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 466
P1 . . . . . . . .  D ADDR   0090H   A      32# 660 661 1814 4219 5436 5438 5441 5444 5448 5450 5451 5503 5505 5507
                                           5943 5950 6481 6484 6486 6489
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 467
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5469 5473 5482
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 468
P3 . . . . . . . .  D ADDR   00B0H   A      62# 477 2270 2306 2308 2310 2311 2314 2315 2319 2320 2322 2323 2325 2326
                                           2328 2329 2331 2332 2518 2519 2525 2526 2557 2558 2561 2562 2569 2570 2578
                                           2579 2587 2588 2633 2634 2644 2645 2671 2672 2685 2686 2696 2697 2721 2722
                                           2723 2724 2736 2737 2745 2746 2753 2754 2762 2763 2771 2772 2806 2807 2841
                                           2842 2850 2851 2891 2892 2923 2955 2995 2997 2999 3000 3003 3004 3006 3007
                                           3009 3010 3012 3017 3019 3020 3022 3023 3128 3131 3157 3158 3182 3183 3195
                                           3196 3202 3203 3216 3217 3261 3262 3354 3355 3357 3358 3361 3362 3403 3404
                                           3420 3421 3422 3423 3477 3478 3609 3610 3620 3621 3711 3712 3713 3714 3785
                                           3786 3815 3816 3859 3860 3861 3862 3879 3880 3881 3882 3900 3901 3902 3903
                                           3910 3911 3953 3954 3955 3956 4077 4078 4166 4167 4242 4243 4255 4256 4272
                                           4273 4274 4275 4315 4316 4332 4333 4339 4340 4341 4342 4513 4514 4515 4516
                                           4522 4523 4528 4529 4565 4566 4658 5468 5470 5472 5478 5479 5480 5483 5484
P3IF . . . . . . .  D ADDR   00ADH   A      59# 701 703 2269 2280 2922 2954 2969 4657
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 470
P4 . . . . . . . .  D ADDR   0084H   A      20# 2090 2111 2158 2241 2422 2424 4785 5561 5564 5580 5582 6046
P5 . . . . . . . .  D ADDR   0085H   A      21# 574 583 2092 2113 2160 2163 2168 2203 2205 2243 2432 2434 4789 5569
                                           5572 5602 5605 6050
P6 . . . . . . . .  D ADDR   0086H   A      22# 1968 1970 1974 1976 2925 2927 2931 2933 4661 4663 4667 4669
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 471
PACK1. . . . . . .  C ADDR   00DEH   A      7682# 7897 8074 8176 8393
PARERR . . . . . .  C ADDR   1BF8H   R   SEG=MAIN   4371 4373 4375 4415#
PARN . . . . . . .  D ADDR   00AFH   A      391# 580 1742 2499 3289
PAROL. . . . . . .  D ADDR   00A8H   A      387#
PART . . . . . . .  D ADDR   009AH   A      381# 575 800 1140 1182 1209 1224 1751 1820 1998 2130 2388 2463 2500 3038
                                           3272 3288 3758 3845 5573 5970
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 210 211 212 213 214 215 216 520
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 519
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 518
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 517 1978 1980 2935 2937 4671 4673 5355 5357
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 464
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 465 516
PCON . . . . . . .  D ADDR   0087H   A      23# 511
POIN3. . . . . . .  C ADDR   1CE6H   R   SEG=MAIN   4563# 4617
POINA. . . . . . .  C ADDR   1D4EH   R   SEG=MAIN   4561 4616#
POINA1 . . . . . .  C ADDR   1CCBH   R   SEG=MAIN   4533 4540#
POINA2 . . . . . .  C ADDR   1CC5H   R   SEG=MAIN   4536# 4541
POZB . . . . . . .  C ADDR   1D71H   R   SEG=MAIN   4630 4634#
PROD . . . . . . .  N NUMB   000CH   A      7619# 7963 7964 7965 7966 7986 7987 7988 7990 7991 7993 7994 7996 8018
                                           8020 8021 8023 8024 8026 8027 8029 8048 8049 8050 8052 8053 8055 8056 8058
                                           8069 8070 8071 8072 8093 8094 8095 8096 8112 8114 8115 8117 8118 8120 8121
                                           8123 8153 8170 8171 8172 8173
PS . . . . . . . .  B ADDR   00B8H.4 A      173#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8424 8428 8481 8484
PSW. . . . . . . .  D ADDR   00D0H   A      91# 200 201 202 203 204 205 206 207 2283 2912 2972 4655 6390 6392 7354
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   150

                                           7362
PT0. . . . . . . .  B ADDR   00B8H.1 A      176#
PT1. . . . . . . .  B ADDR   00B8H.3 A      174#
PT2. . . . . . . .  B ADDR   00B8H.5 A      172#
PX0. . . . . . . .  B ADDR   00B8H.0 A      177#
PX1. . . . . . . .  B ADDR   00B8H.2 A      175#
PYSKST . . . . . .  C ADDR   0DEFH   R   SEG=MAIN   2330 2342#
QUES . . . . . . .  C ADDR   151CH   R   SEG=MAIN   3416# 3421
QU_AVP . . . . . .  C ADDR   0797H   R   SEG=MAIN   1368 1370#
R10. . . . . . . .  N NUMB   000AH   A      451# 1171 1423 1460 1472 2017 4374 6018 8447
R11. . . . . . . .  N NUMB   000BH   A      452# 1172 1422 1461 1471 2020 6022 8451
R8 . . . . . . . .  N NUMB   0008H   A      449# 526 1425 1458 1474 2011 4192 4370 5523 6010 8439
R9 . . . . . . . .  N NUMB   0009H   A      450# 1424 1459 1473 2014 4372 5524 6014 8443
RAFTERK. . . . . .  C ADDR   0633H   R   SEG=MAIN   1179# 1185
RB80 . . . . . . .  B ADDR   0098H.2 A      158#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK0. . . . . . .  B ADDR   00C8H.5 A      192#
RDDOUTF. . . . . .  C ADDR   1569H   R   SEG=MAIN   3473# 3478
RE1. . . . . . . .  C ADDR   22C5H   R   SEG=MAIN   5503# 5509
RE11_7 . . . . . .  C ADDR   06DBH   R   SEG=MAIN   1281# 1323 1334
RE4BYTE. . . . . .  C ADDR   0454H   A      525 4191 4368 8435#
REA3_X . . . . . .  C ADDR   29EFH   R   SEG=MAIN   3999 6634#
REACP. . . . . . .  D ADDR   0077H   A      305# 675 677 679 681 741 757 765 773 782 789 804 839 857 873 889 2177
                                           2179 2181 2183 2215 2217 2219 2221
READ . . . . . . .  C ADDR   22C3H   R   SEG=MAIN   674 676 678 5502#
READYACP . . . . .  C ADDR   032BH   R   SEG=MAIN   783 793#
READ_X2. . . . . .  C ADDR   22ABH   R   SEG=MAIN   5477# 5488
REBYTE . . . . . .  C ADDR   0278H   R   SEG=MAIN   659# 693 718 830 2116 2138 2144 2170 2208 2246 2255 2257
REBYTE2. . . . . .  C ADDR   046CH   A      1273 1281 1299 1315 1326 1342 4805 4813 8455#
REBYTER. . . . . .  C ADDR   0C97H   R   SEG=MAIN   2127 2144#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 472
REN0 . . . . . . .  B ADDR   0098H.4 A      156#
RENDKALIB. . . . .  C ADDR   12A8H   R   SEG=MAIN   3085# 3087
RESAR2 . . . . . .  C ADDR   2913H   R   SEG=MAIN   805 840 858 874 890 902 938 1020 1076 1197 1242 1350 1374 1440
                                           1463 1490 1683 1915 2064 2103 2129 3115 4726 4734 4753 4831 4853 4960 4972
                                           4987 5086 5144 5160 5174 5256 5314 5329 5346 6146 6459# 6618
RESAR8 . . . . . .  C ADDR   28D1H   R   SEG=MAIN   1153 1203 1245 1253 1379 2190 2228 6398#
RESA_HL. . . . . .  C ADDR   29BCH   R   SEG=MAIN   1946 4892 4905 5049 5062 5218 5231 6595#
REZAM. . . . . . .  D ADDR   008CH   A      377# 2225
REZAP. . . . . . .  D ADDR   0088H   A      376# 2187
REZMUL . . . . . .  C ADDR   068BH   R   SEG=MAIN   1217 1231 1240#
REZ_A. . . . . . .  D ADDR   0062H   A      366# 818 891 901 937 1019 1075 2102
REZ_A0 . . . . . .  D ADDR   006AH   A      368# 1202 1378 1416 1630 2380 3106 3116 3123
REZ_A1 . . . . . .  D ADDR   0066H   A      367# 1134 1200 1241 1355 1373 1392
REZ_A2 . . . . . .  D ADDR   007BH   A      369# 1375
REZ_A3 . . . . . .  D ADDR   009CH   A      383# 1205 1381 1439 1682 1825 3114 4725 4830 6617 6648
REZ_AK . . . . . .  D ADDR   00A4H   A      386# 4492 4733
REZ_AME. . . . . .  D ADDR   005EH   A      364# 1146 1155 1196 1255 1349
REZ_DEL. . . . . .  D ADDR   00C5H   A      403# 820
REZ_R. . . . . . .  D ADDR   00C9H   A      404# 1476 1489
RE_HL. . . . . . .  C ADDR   29C3H   R   SEG=MAIN   6598# 6608 6612 6615
RE_HL1 . . . . . .  C ADDR   29CBH   R   SEG=MAIN   6596 6606#
RE_HL2 . . . . . .  C ADDR   29D2H   R   SEG=MAIN   6606 6610#
RE_HL3 . . . . . .  C ADDR   29D9H   R   SEG=MAIN   6610 6614#
RFINDMEM . . . . .  C ADDR   0FF7H   R   SEG=MAIN   2662# 2663
RGO23NO. . . . . .  C ADDR   156CH   R   SEG=MAIN   3474# 3479
RGOTO7 . . . . . .  C ADDR   1745H   R   SEG=MAIN   3782# 3816
RHNOR11. . . . . .  C ADDR   1350H   R   SEG=MAIN   3156 3168 3174#
RHNOT1 . . . . . .  C ADDR   1317H   R   SEG=MAIN   3131 3140#
RI0. . . . . . . .  B ADDR   0098H.0 A      160#
RI21_23. . . . . .  C ADDR   101BH   R   SEG=MAIN   2669 2681#
RI6. . . . . . . .  C ADDR   1015H   R   SEG=MAIN   2672 2677# 2686 2697 2720 2724
RIGBLO . . . . . .  C ADDR   1104H   R   SEG=MAIN   2806# 2837 2839
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   151

RIGBLOK. . . . . .  C ADDR   1142H   R   SEG=MAIN   2850#
RIGHT2 . . . . . .  C ADDR   0E16H   R   SEG=MAIN   2357 2361#
RIGHT3 . . . . . .  C ADDR   0E1AH   R   SEG=MAIN   2359 2364#
RIKN . . . . . . .  C ADDR   0F9BH   R   SEG=MAIN   2594# 2612
RIZMAN . . . . . .  C ADDR   0D66H   R   SEG=MAIN   2266# 2316
RI_31. . . . . . .  C ADDR   1035H   R   SEG=MAIN   2684 2693#
RKNLEFT. . . . . .  C ADDR   11CFH   R   SEG=MAIN   2952# 3011
RKNMEM . . . . . .  C ADDR   11D9H   R   SEG=MAIN   2958# 3021
RKNNUL . . . . . .  C ADDR   11CCH   R   SEG=MAIN   2951# 3005
RKNOPT . . . . . .  C ADDR   0D63H   R   SEG=MAIN   2265# 2327
RKNRAZR. . . . . .  C ADDR   0D60H   R   SEG=MAIN   2264# 2321
RKVVOD0. . . . . .  C ADDR   14B3H   R   SEG=MAIN   3363 3370#
RLABELF. . . . . .  C ADDR   0D5DH   R   SEG=MAIN   2263# 2313
RLABELH. . . . . .  C ADDR   11C9H   R   SEG=MAIN   2950# 3002
RLABELI. . . . . .  C ADDR   131DH   R   SEG=MAIN   3143#
RLABELK. . . . . .  C ADDR   131AH   R   SEG=MAIN   3142# 3145
RLABELL. . . . . .  C ADDR   0FF4H   R   SEG=MAIN   2661#
RLABELL1 . . . . .  C ADDR   1181H   R   SEG=MAIN   2892 2895#
RLABELN. . . . . .  C ADDR   1078H   R   SEG=MAIN   2722 2726#
RLABELP. . . . . .  C ADDR   1A20H   R   SEG=MAIN   4164# 4167
RLABELS13. . . . .  C ADDR   1B44H   R   SEG=MAIN   4312# 4340
RLABELS4 . . . . .  C ADDR   1B41H   R   SEG=MAIN   4311# 4314
RLABL2 . . . . . .  C ADDR   1516H   R   SEG=MAIN   3414#
RLABM. . . . . . .  C ADDR   1519H   R   SEG=MAIN   3415# 3419
RLEFCUR. . . . . .  C ADDR   17ECH   R   SEG=MAIN   3876# 3880
RLER . . . . . . .  C ADDR   2644H   R   SEG=MAIN   6129 6131#
RLIST_43 . . . . .  C ADDR   1883H   R   SEG=MAIN   3950# 3952
RMAS4. . . . . . .  C ADDR   047CH   R   SEG=MAIN   963# 965
RME21_23 . . . . .  C ADDR   1853H   R   SEG=MAIN   3908 3927#
RMO220 . . . . . .  C ADDR   066DH   R   SEG=MAIN   1219# 1266
RNNMEMB. . . . . .  C ADDR   107EH   R   SEG=MAIN   2729# 2732
RNO3PARN . . . . .  C ADDR   0A04H   R   SEG=MAIN   1729# 1743
RNOBUF0. . . . . .  C ADDR   0B37H   R   SEG=MAIN   1919 1942#
RNOCHI0. . . . . .  C ADDR   07BFH   R   SEG=MAIN   1387 1391#
RNOH37 . . . . . .  C ADDR   1374H   R   SEG=MAIN   3192# 3196 3203 3217
RNOM31 . . . . . .  C ADDR   16C3H   R   SEG=MAIN   3709# 3710
RNOMEMK. . . . . .  C ADDR   146BH   R   SEG=MAIN   3330# 3352
RNORVICH . . . . .  C ADDR   0A01H   R   SEG=MAIN   1671 1672 1728#
RNOT1IN. . . . . .  C ADDR   0AECH   R   SEG=MAIN   1822 1892#
RNOTESTIZM . . . .  C ADDR   0683H   R   SEG=MAIN   1233# 1268
ROUSTA . . . . . .  C ADDR   1A0CH   R   SEG=MAIN   4148 4156#
ROUSTA1. . . . . .  C ADDR   1A1DH   R   SEG=MAIN   4156 4162#
ROUT6. . . . . . .  C ADDR   0D5AH   R   SEG=MAIN   2262# 2312
ROUT7. . . . . . .  C ADDR   11C6H   R   SEG=MAIN   2949# 2996 3001
ROUTMAX. . . . . .  C ADDR   211CH   R   SEG=MAIN   5210# 5228
ROUTMIN. . . . . .  C ADDR   2027H   R   SEG=MAIN   5041# 5059
RR0. . . . . . . .  N NUMB   0000H   A      442# 2284 2911 2973 4654
RR1. . . . . . . .  N NUMB   0001H   A      443# 2285 2910 2974 4653
RR2. . . . . . . .  N NUMB   0002H   A      445# 1275 1287 1293 1305 1317 1328 2286 2909 2975 3978 3986 4652 4807
                                           4819 4825 4837 5536
RR3. . . . . . . .  N NUMB   0003H   A      446# 1276 1286 1294 1304 1318 1329 2287 2908 2976 3979 3985 4651 4808
                                           4818 4826 4836 5537
RR4. . . . . . . .  N NUMB   0004H   A      1277 1285 1295 1303 1319 1330 2288 2907 2977 3980 3984 4650 4809 4817
                                           4827 4835 6683# 6740 6761 6777 6821 6843
RR5. . . . . . . .  N NUMB   0005H   A      1278 1284 1296 1302 1320 1331 2289 2906 2978 3981 3983 4649 4810 4816
                                           4828 4834 6684# 6741 6748 6755 6822 6831
RR6. . . . . . . .  N NUMB   0006H   A      444# 2290 2905 2979 4648
RR7. . . . . . . .  N NUMB   0007H   A      447# 2291 2904 2980 4647
RRIR . . . . . . .  C ADDR   2651H   R   SEG=MAIN   6140 6142#
RRMO220. . . . . .  C ADDR   07BCH   R   SEG=MAIN   1364 1390#
RS0. . . . . . . .  B ADDR   00D0H.3 A      204#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   09A0H   R   SEG=MAIN   1661# 1673 1675 1676
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 502
RTIZMRI. . . . . .  C ADDR   0EFBH   R   SEG=MAIN   2516#
RVIOUT . . . . . .  C ADDR   0F72H   R   SEG=MAIN   2562 2570 2574# 2579
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   152

RVVIZKO. . . . . .  C ADDR   1352H   R   SEG=MAIN   3176# 3184
RVVKALI52. . . . .  C ADDR   1B70H   R   SEG=MAIN   4333 4335#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      315# 579 1954 4031
SADIAP2. . . . . .  D ADDR   0032H   A      317# 1957 4034
SADIAP3. . . . . .  D ADDR   0031H   A      318# 1960 4037
SADIAP4. . . . . .  D ADDR   0030H   A      319# 1963 4039
SAUS . . . . . . .  D ADDR   0036H   A      314# 2091 2093 2110 2112 2159 2161 2240 2242
SAVBA. . . . . . .  D ADDR   003CH   A      308# 2304 2607 2625 2820 2867 2887 2992 3639 3694 3799 4322 4449 4555
                                           6205 6213
SAVEIR2. . . . . .  C ADDR   2855H   R   SEG=MAIN   904 941 1023 1079 6298#
SAVELTE. . . . . .  C ADDR   04A7H   A      8518#
SAVEN_BL . . . . .  D ADDR   00D3H   A      407# 600 3570 6566 6597
SAVEN_BL2. . . . .  D ADDR   00C0H   A      400# 608 3585 6585 6607
SAVEN_BL3. . . . .  D ADDR   00C2H   A      401# 615 3590 6589 6611
SAVEN_BL4. . . . .  D ADDR   00D9H   A      411# 622 3594 6591 6614
SAVER2 . . . . . .  C ADDR   2861H   R   SEG=MAIN   592 594 596 598 809 819 821 844 862 878 892 1135 1147 1156 1201
                                           1206 1256 1356 1376 1382 1393 1477 1481 1687 2023 2069 2108 2137 2188 2200
                                           2226 2238 3117 3124 4009 4493 4585 4743 4845 4963 4975 4995 5089 5154 5170
                                           5185 5259 5324 5339 5351 6149 6312# 6649
SAVE_HL. . . . . .  C ADDR   2988H   R   SEG=MAIN   1949 3465 3840 6564#
SA_HL. . . . . . .  C ADDR   298FH   R   SEG=MAIN   6567# 6586 6590 6592
SA_HL1 . . . . . .  C ADDR   29AAH   R   SEG=MAIN   6565 6584#
SA_HL2 . . . . . .  C ADDR   29B1H   R   SEG=MAIN   6584 6588#
SA_HL3 . . . . . .  C ADDR   29B8H   R   SEG=MAIN   6588 6591#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5392 5398
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 510 5393 5397 5400 5401 5422
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   226DH   R   SEG=MAIN   5436# 5443
SDV1 . . . . . . .  C ADDR   2281H   R   SEG=MAIN   5448# 5454
SDVIG0 . . . . . .  C ADDR   030CH   R   SEG=MAIN   769# 771
SDVIG1 . . . . . .  C ADDR   0301H   R   SEG=MAIN   761# 763
SDVIG2 . . . . . .  C ADDR   02F6H   R   SEG=MAIN   753# 755
SDVIG3 . . . . . .  C ADDR   02EAH   R   SEG=MAIN   744# 746
SDVIG4 . . . . . .  C ADDR   031BH   R   SEG=MAIN   779# 781
SDVIG6 . . . . . .  C ADDR   0325H   R   SEG=MAIN   786# 788
SDVM . . . . . . .  C ADDR   0323H   R   SEG=MAIN   776 785#
SEEGOON. . . . . .  C ADDR   0A09H   R   SEG=MAIN   1713 1718 1720 1726 1733#
SEEIND . . . . . .  C ADDR   0A17H   R   SEG=MAIN   1653 1660 1661 1745#
SEE_L43. . . . . .  C ADDR   195AH   R   SEG=MAIN   4048 4056 4059#
SI . . . . . . . .  B ADDR   00C0H.3 A      184#
SIGN . . . . . . .  N NUMB   0007H   A      7614# 7635 7636 7661 7662 7686 7829 7846 8067 8107
SKOR19 . . . . . .  C ADDR   1A6BH   R   SEG=MAIN   4193 4200#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      234#
SM00 . . . . . . .  B ADDR   0098H.7 A      153#
SM10 . . . . . . .  B ADDR   0098H.6 A      154#
SM20 . . . . . . .  B ADDR   0098H.5 A      155#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186 187
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      186#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      187#
SOOTV. . . . . . .  C ADDR   13E1H   R   SEG=MAIN   3257# 3273
SP . . . . . . . .  D ADDR   0081H   A      17# 463
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 508
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 229 230 231 232 233 234 235 236 507
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5375
SPIEN. . . . . . .  B ADDR   00F8H.0 A      236#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   153

SPIF . . . . . . .  B ADDR   00F8H.7 A      229#
SPWRI. . . . . . .  C ADDR   1B1CH   R   SEG=MAIN   4290 4292#
SS1. . . . . . . .  C ADDR   23A3H   R   SEG=MAIN   5685# 5687
STA. . . . . . . .  B ADDR   00C0H.5 A      182#
STO. . . . . . . .  B ADDR   00C0H.4 A      183#
SUMMA. . . . . . .  D ADDR   00B3H   A      395# 806 808 823 841 843 859 861 875 877 1414 1628 2378 3104
SUMT2. . . . . . .  C ADDR   0377H   R   SEG=MAIN   797 838#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 190 191 192 193 194 195 196 197 521 1985 2942 4678 5360
T2MSME . . . . . .  C ADDR   17B0H   R   SEG=MAIN   3848# 3854
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   2543H   R   SEG=MAIN   5961# 5971
TABN . . . . . . .  C ADDR   25DBH   R   SEG=MAIN   6063# 6067
TABT11 . . . . . .  C ADDR   235BH   R   SEG=MAIN   5622# 6043
TABT7. . . . . . .  C ADDR   235FH   R   SEG=MAIN   4782 5626# 6056
TABT9. . . . . . .  C ADDR   235DH   R   SEG=MAIN   5624# 6053
TABUS. . . . . . .  C ADDR   2347H   R   SEG=MAIN   5558 5611#
TAKTIND. . . . . .  C ADDR   0A56H   R   SEG=MAIN   1782 1785#
TB80 . . . . . . .  B ADDR   0098H.3 A      157#
TCLK0. . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 499 500 514
TE10MS . . . . . .  C ADDR   26A7H   R   SEG=MAIN   3847 6228#
TE22 . . . . . . .  C ADDR   25CEH   R   SEG=MAIN   6042 6052#
TE23 . . . . . . .  C ADDR   25D6H   R   SEG=MAIN   6052 6056#
TE2MS. . . . . . .  C ADDR   269DH   R   SEG=MAIN   3853 6227#
TEAEQU0. . . . . .  C ADDR   26E3H   R   SEG=MAIN   3230 6236#
TEAVK. . . . . . .  C ADDR   271FH   R   SEG=MAIN   4699 6243#
TEBEQU0. . . . . .  C ADDR   26EDH   R   SEG=MAIN   6237#
TEBL . . . . . . .  C ADDR   27D3H   R   SEG=MAIN   2779 3407 6265#
TEBL0. . . . . . .  C ADDR   27DDH   R   SEG=MAIN   3658 6266#
TECH . . . . . . .  C ADDR   27E7H   R   SEG=MAIN   3939 4106 6267#
TECLE. . . . . . .  C ADDR   2798H   R   SEG=MAIN   2766 3375 6259#
TEEND. . . . . . .  C ADDR   2837H   R   SEG=MAIN   4796 6276#
TEERR. . . . . . .  C ADDR   282DH   R   SEG=MAIN   6220 6275#
TEFULL . . . . . .  C ADDR   27BFH   R   SEG=MAIN   2786 3625 6263#
TEINT. . . . . . .  C ADDR   27C9H   R   SEG=MAIN   3725 6264#
TEIZMK . . . . . .  C ADDR   277AH   R   SEG=MAIN   2564 3161 3170 6256#
TEKALIB. . . . . .  C ADDR   2729H   R   SEG=MAIN   3915 4702 6244#
TEKAOUT. . . . . .  C ADDR   0C9AH   R   SEG=MAIN   2146# 2154
TEKD . . . . . . .  C ADDR   2770H   R   SEG=MAIN   4379 6255#
TELIST . . . . . .  C ADDR   27B4H   R   SEG=MAIN   2749 3316 3386 3392 6262#
TEMAX. . . . . . .  C ADDR   2805H   R   SEG=MAIN   4142 6270#
TEMEM. . . . . . .  C ADDR   27A2H   R   SEG=MAIN   6260#
TEMENU . . . . . .  C ADDR   26F7H   R   SEG=MAIN   6238#
TEMID. . . . . . .  C ADDR   280FH   R   SEG=MAIN   4150 6271#
TEMIN. . . . . . .  C ADDR   27FBH   R   SEG=MAIN   3670 4158 6269#
TEMUL. . . . . . .  C ADDR   076AH   R   SEG=MAIN   1311 1348#
TENMIN . . . . . .  C ADDR   2445H   R   SEG=MAIN   1214 1216 1230 5753#
TEOLI. . . . . . .  C ADDR   2819H   R   SEG=MAIN   1515 1613 6273#
TEOLL. . . . . . .  C ADDR   278EH   R   SEG=MAIN   1610 6258#
TEOLR. . . . . . .  C ADDR   2823H   R   SEG=MAIN   1511 6274#
TEOUT. . . . . . .  C ADDR   2784H   R   SEG=MAIN   6257#
TEPAR. . . . . . .  C ADDR   2766H   R   SEG=MAIN   4719 6254#
TES19_2. . . . . .  C ADDR   275CH   R   SEG=MAIN   531 2706 4200 4431 6252#
TES57_6. . . . . .  C ADDR   2752H   R   SEG=MAIN   2700 4194 4426 4715 6251#
TESKOR . . . . . .  C ADDR   2715H   R   SEG=MAIN   4696 6242#
TEST01 . . . . . .  C ADDR   2226H   R   SEG=MAIN   5397# 5420
TEST02 . . . . . .  C ADDR   2255H   R   SEG=MAIN   5417 5419#
TEST04 . . . . . .  C ADDR   2236H   R   SEG=MAIN   5404# 5406
TEST1. . . . . . .  C ADDR   221CH   R   SEG=MAIN   5392# 5408 5429
TEST2. . . . . . .  C ADDR   224EH   R   SEG=MAIN   5397 5416#
TEST22 . . . . . .  C ADDR   1AF1H   R   SEG=MAIN   4257 4264#
TEST23 . . . . . .  C ADDR   1AF6H   R   SEG=MAIN   4264 4267#
TEST3. . . . . . .  C ADDR   2240H   R   SEG=MAIN   5399 5409#
TEST4. . . . . . .  C ADDR   222EH   R   SEG=MAIN   5400# 5415
TEST5. . . . . . .  C ADDR   2258H   R   SEG=MAIN   5418 5421#
TEST7I . . . . . .  C ADDR   0A6EH   R   SEG=MAIN   1797 1800#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   154

TEST9I . . . . . .  C ADDR   0A67H   R   SEG=MAIN   1792 1797#
TESTAT . . . . . .  C ADDR   27F1H   R   SEG=MAIN   2757 3366 6268#
TESTRS . . . . . .  C ADDR   221AH   R   SEG=MAIN   4183 5390#
TESTS. . . . . . .  C ADDR   1AE5H   R   SEG=MAIN   4259# 4266 4269
TETE11 . . . . . .  C ADDR   2734H   R   SEG=MAIN   4172 4706 6246#
TETE7. . . . . . .  C ADDR   2748H   R   SEG=MAIN   4246 4712 6248#
TETE9. . . . . . .  C ADDR   273EH   R   SEG=MAIN   4709 6247#
TETESI . . . . . .  C ADDR   2701H   R   SEG=MAIN   3065 4689 6240#
TETESR . . . . . .  C ADDR   270BH   R   SEG=MAIN   4693 6241#
TEVICH . . . . . .  C ADDR   26D9H   R   SEG=MAIN   2401 2572 2581 3166 4594 6235#
TEWR . . . . . . .  C ADDR   27AAH   R   SEG=MAIN   2740 3381 6261#
TEXTT. . . . . . .  C ADDR   269DH   R   SEG=MAIN   5638 6226#
TF0. . . . . . . .  B ADDR   0088H.5 A      145#
TF1. . . . . . . .  B ADDR   0088H.7 A      143#
TF2. . . . . . . .  B ADDR   00C8H.7 A      190#
TH0. . . . . . . .  D ADDR   008CH   A      28# 482
TH1. . . . . . . .  D ADDR   008DH   A      29# 529 533 4304 4306
TH2. . . . . . . .  D ADDR   00CDH   A      89# 1982 2939 4675
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI0. . . . . . . .  B ADDR   0098H.1 A      159#
TIM. . . . . . . .  C ADDR   2291H   R   SEG=MAIN   5457#
TIM1 . . . . . . .  C ADDR   2293H   R   SEG=MAIN   5458# 5458
TIM2 . . . . . . .  C ADDR   2296H   R   SEG=MAIN   5439 5442 5449 5453 5461# 5504 5508 6485 6487
TIM3 . . . . . . .  C ADDR   2298H   R   SEG=MAIN   5462# 5462
TIZMRI . . . . . .  C ADDR   0E0FH   R   SEG=MAIN   2356# 2516
TL0. . . . . . . .  D ADDR   008AH   A      26# 483
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88# 1983 2940 4676
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   13DEH   R   SEG=MAIN   3242 3254#
TMOD . . . . . . .  D ADDR   0089H   A      25# 480 513
TMR2RLH. . . . . .  D ADDR   00CBH   A      293# 497
TMR2RLL. . . . . .  D ADDR   00CAH   A      292# 496
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1A4CH   R   SEG=MAIN   4181 4186#
TOME14 . . . . . .  C ADDR   1A79H   R   SEG=MAIN   4186 4207#
TOME15 . . . . . .  C ADDR   1A91H   R   SEG=MAIN   4207 4219# 4224
TOME21 . . . . . .  C ADDR   1A43H   R   SEG=MAIN   4170 4181#
TOSK19 . . . . . .  C ADDR   1C20H   R   SEG=MAIN   4425 4431#
TOUTF. . . . . . .  C ADDR   135BH   R   SEG=MAIN   3180# 3183
TR0. . . . . . . .  B ADDR   0088H.4 A      146#
TR1. . . . . . . .  B ADDR   0088H.6 A      144#
TR2. . . . . . . .  B ADDR   00C8H.2 A      195#
TTOUT. . . . . . .  C ADDR   0EFEH   R   SEG=MAIN   2518# 2527
TXBSY. . . . . . .  B ADDR   00F8H.3 A      233# 5376
UNPACK1. . . . . .  C ADDR   009EH   A      7632# 7826 7960 8090 8204
UNPACK2. . . . . .  C ADDR   00BAH   A      7657# 7827 7961 8091
UP1. . . . . . . .  C ADDR   0138H   A      7777# 7794
UP2. . . . . . . .  C ADDR   014BH   A      7797# 7815
UP2A . . . . . . .  C ADDR   0161H   A      7776 7813#
UPA. . . . . . . .  C ADDR   2474H   R   SEG=MAIN   5808# 5814
UPA1 . . . . . . .  C ADDR   2484H   R   SEG=MAIN   5826# 5832
UPA2 . . . . . . .  C ADDR   2464H   R   SEG=MAIN   5789# 5795
UPAA . . . . . . .  C ADDR   2960H   R   SEG=MAIN   6533# 6539
UPAA4. . . . . . .  C ADDR   24CFH   R   SEG=MAIN   5889# 5895
UPAB . . . . . . .  C ADDR   24DFH   R   SEG=MAIN   5906# 5912
UPAK . . . . . . .  C ADDR   246EH   R   SEG=MAIN   5805#
UPAK1. . . . . . .  C ADDR   293AH   R   SEG=MAIN   6498#
UPAK2. . . . . . .  C ADDR   245EH   R   SEG=MAIN   5786#
UPAK3. . . . . . .  C ADDR   247EH   R   SEG=MAIN   3868 3963 5823#
UPAK4. . . . . . .  C ADDR   295AH   R   SEG=MAIN   3822 6530#
UPAKA. . . . . . .  C ADDR   24C9H   R   SEG=MAIN   4577 5886#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   155

UPAKB. . . . . . .  C ADDR   24D9H   R   SEG=MAIN   4624 5903#
UPAV1. . . . . . .  C ADDR   1B8FH   R   SEG=MAIN   4359# 4365
UPAV2. . . . . . .  C ADDR   1C52H   R   SEG=MAIN   4476# 4482
UPK1 . . . . . . .  C ADDR   294CH   R   SEG=MAIN   6506 6509#
UPK2 . . . . . . .  C ADDR   294DH   R   SEG=MAIN   6508 6510#
VICHMAX. . . . . .  C ADDR   211FH   R   SEG=MAIN   4144 5212#
VICHMEAN . . . . .  C ADDR   1F2BH   R   SEG=MAIN   4152 4885#
VICHMIN. . . . . .  C ADDR   202AH   R   SEG=MAIN   3672 4160 5043#
VICHR. . . . . . .  D ADDR   00B1H   A      393# 1269 1788 2398 2411 2546 2559 2665 2673 3069 3073 3081 3155 3221
                                           3334 3904 3912 3921 4165 4216 4237 4377 4568 4607 4639 4687 6041
VIG0 . . . . . . .  C ADDR   0AD8H   R   SEG=MAIN   1876# 1878
VIG4 . . . . . . .  C ADDR   0AE6H   R   SEG=MAIN   1887# 1889
VIOUT. . . . . . .  C ADDR   0ED5H   R   SEG=MAIN   2404 2491# 2519 2531 2536 2566 2575 2583 2608 2631 2640 2643 2677
                                           2690 2705 2711 2727 2742 2751 2759 2768 2783 2830 2833 2876 2890 2893 3179
                                           3180 3259 4253
VIOUTF . . . . . .  C ADDR   1354H   R   SEG=MAIN   3177#
VIT2_10. . . . . .  C ADDR   0E3EH   R   SEG=MAIN   2386# 2392 2393
VODM11_15. . . . .  C ADDR   180FH   R   SEG=MAIN   3893# 3911
VOLUME . . . . . .  D ADDR   00D5H   A      408# 2344 3835 6574 6576
VV21_23. . . . . .  C ADDR   1ADCH   R   SEG=MAIN   4243 4255#
VVCHIBL. . . . . .  C ADDR   2612H   R   SEG=MAIN   2648 6095#
VVCHIF . . . . . .  C ADDR   25EDH   R   SEG=MAIN   6071# 6088
VVINTE . . . . . .  C ADDR   1770H   R   SEG=MAIN   3786 3814#
VVIZKO . . . . . .  C ADDR   13ABH   R   SEG=MAIN   3176 3221#
VVKALI52 . . . . .  C ADDR   1C45H   R   SEG=MAIN   4335 4460# 4512
VVMENU . . . . . .  C ADDR   1BF5H   R   SEG=MAIN   4342 4413#
VVNOL23. . . . . .  C ADDR   260DH   R   SEG=MAIN   6092# 6096
VVNOL31. . . . . .  C ADDR   2608H   R   SEG=MAIN   6090# 6092
VVNOL41. . . . . .  C ADDR   2606H   R   SEG=MAIN   6088# 6090
VVOD2_10 . . . . .  C ADDR   17A8H   R   SEG=MAIN   3343 3470 3581 3845#
VVOD43 . . . . . .  C ADDR   1987H   R   SEG=MAIN   4078 4085#
VVODM11_15 . . . .  C ADDR   1A23H   R   SEG=MAIN   3893 4165#
VVOSTA . . . . . .  C ADDR   19E4H   R   SEG=MAIN   4121 4140#
VVOSTAD. . . . . .  C ADDR   19F8H   R   SEG=MAIN   4140 4148#
VVRR6. . . . . . .  C ADDR   0F58H   R   SEG=MAIN   2564#
VV_52V . . . . . .  C ADDR   1B67H   R   SEG=MAIN   4316 4332#
WCOL . . . . . . .  B ADDR   00F8H.6 A      230#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 478 479
WORK . . . . . . .  D ADDR   00B8H   A      397# 1496 1498 1504 1520 1527 1543 1564 1569 1585 1827 1905 3437 3447
                                           3449 3483 3493 3495 3505 3515 3517 3524 3534 3536 3546 3556 3558 4912 4959
                                           4962 4971 4974 4986 5067 5085 5088 5143 5153 5159 5169 5173 5237 5255 5258
                                           5313 5323 5328 5338 5394 5416
WR1. . . . . . . .  C ADDR   2927H   R   SEG=MAIN   6481# 6488
WRITE. . . . . . .  C ADDR   2924H   R   SEG=MAIN   672 5932 5934 5936 5938 5940 5942 5945 5947 5949 5952 5954 5956
                                           6479#
WRITED_X1. . . . .  C ADDR   229CH   R   SEG=MAIN   5467#
WRITE_X1 . . . . .  C ADDR   229BH   R   SEG=MAIN   5466#
WRPAGE . . . . . .  C ADDR   0480H   A      4301 4775 4877 8479#
WW5. . . . . . . .  C ADDR   0483H   A      8480# 8488
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 474 506
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 475
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 476 505
XCIKLWR. . . . . .  C ADDR   2841H   R   SEG=MAIN   899 912 914 916 919 922 925 928 931 934 967 969 971 974 977 980
                                           983 986 989 991 994 996 998 1001 1004 1007 1010 1013 1016 1068 1070 1072
                                           6281#
XTEMP. . . . . . .  N NUMB   000CH   A      6680# 7044 7045 7046 7047 7133 7135 7136 7138 7139 7141 7142 7144 7166
                                           7167 7168 7169 7187 7188 7192 7193 7196 7200 7201 7204 7208 7209 7213 7214
                                           7216 7217 7218 7220 7224 7225 7227 7228 7232 7233 7238 7239 7241 7242 7246
                                           7247 7252 7254 7255 7256
YBNUL. . . . . . .  C ADDR   12ECH   R   SEG=MAIN   3112 3120#
YES. . . . . . . .  C ADDR   2B8FH   R   SEG=MAIN   7066 7070 7074 7078 7096# 7159
YES0KEY. . . . . .  C ADDR   02C6H   R   SEG=MAIN   705 717#
YES0KEY1 . . . . .  C ADDR   02D3H   R   SEG=MAIN   724# 731
YESAVP . . . . . .  C ADDR   07C9H   R   SEG=MAIN   1370 1396#
YESBUF . . . . . .  C ADDR   0B3CH   R   SEG=MAIN   1940 1945#
YESIND . . . . . .  C ADDR   0A70H   R   SEG=MAIN   1787 1796 1799 1802#
A51 MACRO ASSEMBLER  AMP36_2OL                                                            12/26/2007 17:54:05 PAGE   156

YESPRD . . . . . .  C ADDR   0B3AH   R   SEG=MAIN   1939 1943#
YESTEST. . . . . .  C ADDR   2336H   R   SEG=MAIN   5553 5585#
YESTT5 . . . . . .  C ADDR   0C06H   R   SEG=MAIN   2061#
YESVICH. . . . . .  C ADDR   0814H   R   SEG=MAIN   1384 1435#
YESVI_KM . . . . .  C ADDR   1E94H   R   SEG=MAIN   4722 4802#
YESVI_KR . . . . .  C ADDR   1E0CH   R   SEG=MAIN   4722# 4724
YST1 . . . . . . .  C ADDR   01A2H   R   SEG=MAIN   530 534#
YST19. . . . . . .  C ADDR   019AH   R   SEG=MAIN   527 531#
Z01S . . . . . . .  C ADDR   23BBH   R   SEG=MAIN   5702# 5704
Z05S . . . . . . .  C ADDR   23C8H   R   SEG=MAIN   5711# 5713
Z100 . . . . . . .  C ADDR   238CH   R   SEG=MAIN   5666# 5668
Z15. . . . . . . .  C ADDR   239AH   R   SEG=MAIN   5678# 5680
Z1S. . . . . . . .  C ADDR   23AEH   R   SEG=MAIN   5694# 5696
ZAPADC . . . . . .  C ADDR   226BH   R   SEG=MAIN   5435#
ZCMP . . . . . . .  C ADDR   28C3H   R   SEG=MAIN   6388#
ZDIV . . . . . . .  C ADDR   2890H   R   SEG=MAIN   817 1127 4002 6351#
ZER1 . . . . . . .  C ADDR   00B3H   A      7642 7646# 7701 7744
ZER2 . . . . . . .  C ADDR   00D4H   A      7668 7672#
ZMUL . . . . . . .  C ADDR   2886H   R   SEG=MAIN   6346#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      325# 1707 4027 5013 5203 6359 6362 6365
ZNPLUS . . . . . .  C ADDR   02DDH   R   SEG=MAIN   683 733#
ZZ . . . . . . . .  C ADDR   239CH   R   SEG=MAIN   5679# 5679
Z_01S. . . . . . .  C ADDR   23B7H   R   SEG=MAIN   2296 2985 4223 5414 5428 5700# 6217
Z_05S. . . . . . .  C ADDR   23C4H   R   SEG=MAIN   2055 2056 2782 4145 4153 4161 5709#
Z_100. . . . . . .  C ADDR   238AH   R   SEG=MAIN   5665#
Z_15 . . . . . . .  C ADDR   2398H   R   SEG=MAIN   651 5677#
Z_1MS. . . . . . .  C ADDR   23A1H   R   SEG=MAIN   724 5421 5684#
Z_1S . . . . . . .  C ADDR   23AAH   R   SEG=MAIN   640 648 1431 2403 3673 3946 4067 4119 4418 4504 4606 4799 4800
                                           5692#
Z_5. . . . . . . .  C ADDR   2393H   R   SEG=MAIN   5471 5481 5672#
Z_9. . . . . . . .  C ADDR   291FH   R   SEG=MAIN   5378 6473#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
