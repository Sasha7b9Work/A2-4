A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp31.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp31.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
                     320     ;;;;;
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     6

  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     358     ;bit            BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
                     383     ;FLOAT
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     7

  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
                     438     ;xdata 
                     439     
  0000               440                             rr0             EQU 00
  0001               441                     rr1       equ   01
  0006               442                     rr6   equ 06
  0002               443                     rr2       equ   02
  0003               444                     rr3       equ   03
  0007               445                     rr7   equ 07
                     446     
  0008               447                     r8   equ 08
  0009               448                     r9        equ   09
  000A               449                     r10       equ   10
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     8

  000B               450                     r11   equ 11
                     451     
                     452                     
                     453        
----                 454                  rseg     Main          ; Switch to this code segment.
                     455     
                     456                  using    0              ; Specify register bank for the following
                     457     
0100                 458     org 100h
                     459     ;$EJECT
                     460     
0100 7581E0          461     begin:     mov  sp, #0e0h
0103 75E900          462                                             mov             PCA0L,#00;=0x00;
0106 75D900          463                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          464                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          465                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          466                                             mov     P2MDOUT,#00;=0x00;
                     467             
0112 75A73F          468             mov     P3MDOUT,#3fh;
0115 75B5FF          469             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          470             mov     REF0CN,#03h;=0x03;
                     471             
011B 75E114          472             mov     XBR0,#14h;= 0x14;
011E 75E200          473             mov     XBR1,#00; =0x00;
0121 75E300          474             mov XBR2,#00;=0x00;
0124 75B0C0          475             mov     P3,#0c0h
0127 75FFDE          476             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          477             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          478             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          479             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          480             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          481             mov     TL0,#0f9h;=0xf9; 
0139 75E680          482             mov     EIE1,#80h;=0x80;
                     483     
013C 75D480          484             mov     DAC0CN,#80h;=0x80;
013F 75D780          485             mov     DAC1CN,#80h;=0x80;
0142 75B167          486             mov     OSCXCN,#67h;=0x67;
                     487     
                     488      
                     489     
0145 E5B1            490     gener:     mov a, oscxcn
0147 B4E7FB          491                cjne a,#11100111b,gener
                     492                            
014A 75B288          493             mov     OSCICN,#88h;=0x84;
014D 75CA00          494         mov TMR2RLL,#0;=0;
0150 75CBD1          495         mov TMR2RLH,#0d1h;=0xd1;
                     496       
0153 D28E            497                     setb  TCON.6                    ;регистр управления
0155 D28C            498                      setb tcon.4
                     499     
0157 75EF00          500             mov     RSTSRC,#0;=00   ;//источники сброса 
                     501     
                     502             
015A 75E340          503          mov        XBR2,#40h
015D 75E106          504              mov    XBR0,#06h;16h
0160 75F803          505             mov             SPI0CN,#03
0163 759D31          506             mov             spi0ckr,#31H;;;;;;;;#04
                     507     ;установка скорости
0166 759850          508                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          509                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          510                                             mov             CKCON,#00010000b;TIM=1
016F 758920          511                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          512                                             mov             TCON,#01000000b;счетчик запущен
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE     9

0175 7A50            513                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            514                                             mov                     r3,#2ch
0179 120454          515                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            516                                             mov                     a,r8
017E B40007          517                                             cjne            a,#00,yst19
0181 C213            518                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          519                                             mov                     TH1,#244
0186 8008            520                                             jmp               yst1
0188 900000   F      521     yst19:          mov                     dptr,#teS19_2
018B D213            522                                             setb            bitv19                  ;19,2
018D 758DDC          523                                             mov                     TH1,#220
0190                 524     yst1:
0190 75E730          525                                             mov             EIE2,#30H;00110000
                     526                                     ;       mov             EIP2,#30H
0193 75A880          527                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     528     ;ozu
0196 E4              529                                             clr     a
0197 7800            530                                             mov     r0,#00h 
0199 F6              531     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              532                                             inc     r0
019B B87FFB          533                                             cjne    r0,#7fh,mecle
019E 7880            534                                             mov     r0,#80h
01A0 F6              535     meff:                   mov     @r0,a 
01A1 F2              536                                             movx @r0,a
01A2 08              537                                             inc     r0
01A3 B8DFFA          538                             cjne    r0,#0dfh,meff
01A6 120000   F      539                             call    clmassix
                     540     ;обнулить внешнее озу 4кбайта
01A9 900000          541                                     mov                     dptr,#0
01AC E4              542     extcle: clr                     a
01AD F0              543                                     movx            @dptr,a
01AE A3              544                                     inc                     dptr
01AF E583            545                                     mov                     a,dph
01B1 B410F8          546                                     cjne            a,#10h,extcle
                     547     
01B4 7898            548                             mov             r0,#chinkor
01B6 7600            549                             mov             @r0,#0;1;
01B8 08              550                             inc             r0
01B9 7619            551                             mov             @r0,#19h;64h;0c8h;90h;
                     552                             ;;;;
01BB 7881            553                             mov             r0,#chavt
01BD 7601            554                             mov             @r0,#1
01BF 08              555                             inc             r0
01C0 7690            556                             mov             @r0,#90h
                     557     
01C2 78B2            558                                     mov             r0,#marker
01C4 76FF            559                                     mov             @r0,#0ffh
                     560                             ;mov            r0,#chind
                     561                             ;mov            @r0,#1
                     562                     
01C6 74FF            563                             mov             a,#0ffh
01C8 F585            564                        mov          p5,a
01CA 799A            565                             mov             r1,#parT
01CC 7702            566                             mov             @r1,#2                  ;Tizm=1s
01CE 79AE            567                             mov             r1,#diap
01D0 7705            568                             mov             @r1,#5                  ;10-7a
01D2 753405          569                             mov             sadiap,#5
01D5 79AF            570                             mov             r1,#parN
01D7 7702            571                             mov             @r1,#2
01D9 7400            572                             mov             a,#00h
01DB F585            573                             mov             p5,a
01DD D204            574                             setb    bitizm
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    10

                     575     
01DF 799B            576                             mov             r1,#chbefore
01E1 7700            577                             mov             @r1,#0
                     578                             ;;;;;;
01E3 900000   F      579                             mov             dptr,#ch_1              ;1->r2..r5 float
01E6 120000   F      580                             call    ldc_long
01E9 7890            581                             mov             r0,#koefKp         ;1(float)->koefKp
01EB 120000   F      582                             call    saver2
01EE 7894            583                             mov             r0,#koefKm              ;1(float)->koefKm
01F0 120000   F      584                             call    saver2
01F3 78A0            585                             mov             r0,#koefKD
01F5 120000   F      586                             call    saver2
01F8 78CF            587                             mov                     r0,#chbuf
01FA 120000   F      588                             call    saver2
01FD 900158          589                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0200 79D3            590                             mov             r1,#saven_bl
0202 E583            591                             mov             a,dph
0204 F7              592                                               mov           @r1,a
0205 09              593                                                     inc             r1
0206 E582            594                                                     mov             a,dpl
0208 F7              595                                                     mov             @r1,a
                     596     
0209 900478          597                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
020C 79C0            598                             mov             r1,#saven_bl2
020E E583            599                             mov             a,dph
0210 F7              600                                               mov           @r1,a
0211 09              601                                                     inc             r1
0212 E582            602                                                     mov             a,dpl
0214 F7              603                                                     mov             @r1,a
0215 900798          604                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
0218 79C2            605                             mov             r1,#saven_bl3
021A E583            606                             mov             a,dph
021C F7              607                                               mov           @r1,a
021D 09              608                                                     inc             r1
021E E582            609                                                     mov             a,dpl
0220 F7              610                                                     mov             @r1,a
0221 900AB8          611                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0224 79D9            612                             mov             r1,#saven_bl4
0226 E583            613                             mov             a,dph
0228 F7              614                                               mov           @r1,a
0229 09              615                                                     inc             r1
022A E582            616                                                     mov             a,dpl
022C F7              617                                                     mov             @r1,a
022D 753801          618                             mov             nblok,#1                        ;номер введенного б
                             лока
0230 753701          619                             mov             nelem,#1
0233 78CD            620                             mov             r0,#interva
0235 7600            621                             mov             @r0,#0
0237 08              622                             inc             r0
0238 7601            623                             mov             @r0,#1
023A 7840            624                             mov             r0,#bufind
023C                 625     age2:
023C 76FD            626                             mov             @r0,#0fdh         ;погасить индикатор
023E 08              627                             inc             r0
023F B84CFA          628                             cjne    r0,#bufind+12,age2              
0242 120000   F      629                             call    ind
0245 120000   F      630                             call    z_1s
                     631     
                     632                                     ;зажечь все лементы индикации
0248 7840            633                             mov             r0,#bufind
024A 7669            634     ageon:          mov             @r0,#69h;0feh;?
024C 08              635                             inc             r0
024D B84CFA          636                             cjne    r0,#bufind+12,ageon             
0250 120000   F      637                             call    ind
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    11

0253 120000   F      638                             call    z_1s            ;1sec
                     639     ;;;;;;;;;;;;;;;;
                     640                     
0256 120000   F      641                             call    z_15;z_1ms
0259 434B10          642                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     643     ;;;;;;;;;;;;;;;;;;;
025C 7C60            644                             mov             r4,#60h
025E 7D00            645                             mov             r5,#00         
0260 120000   F      646                             call    iniacp;инициализация acp
0263 120000   F      647                             call    loadUS          ;us 10-7 A
                     648                             
0266 C217            649     rebyte:         clr             bitoll
0268 3095FD          650                             jnb             p1.5,$
026B 2095FD          651                             jb              p1.5,$
                     652                             ;mov            a,P6            ;p6.4=0
                     653                             ;anl            a,#0efh
                     654                             ;mov            P6,a
                     655                             ;nop
                     656                             ;nop
                     657                                     
                     658                             ;mov            a,P6                    ;p6.4=1 
                     659                             ;orl            a,#10h
                     660                             ;mov            P6,a                        
026E 7411            661                             mov             a,#11h
0270 120000   F      662                             call    write
                     663                             ;чтение acp
0273 120000   F      664                             call    read    
0276 F578            665                             mov     reacp+1,A       ;старший байт 
0278 120000   F      666                             call    read    
027B F579            667                             mov     reacp+2,A       ;средний байт 
027D 120000   F      668                             call    read
0280 F57A            669                             mov     reacp+3,A               ;мл байт
                     670                        ;;;;;;;;;;;
0282 7878            671                        mov          r0,#reacp+1
0284 E6              672                        mov          a,@r0
0285 20E740          673                             jb              acc.7,znplus;
0288 D200            674                             setb    bitznak
028A 4480            675                             orl             a,#80h  ;ост содерж яч 
028C F6              676                             mov             @r0,a
                     677                                     
028D 18              678     mmm:            dec             r0;,#reacp
028E 76FF            679                             mov             @r0,#0ffh
0290 803E            680                             jmp             goznak
                     681     
0292 120000   F      682     mem10ms:        call            ind
0295 80CF            683                                             jmp                     rebyte                     
                                  ;10ms
                     684     
0297                 685     labelA: 
                     686                             ;разрешить ie6,ie7
0297 E53E            687                             mov                     a,chkl+1                ;low
0299 7009            688                             jnz                     no0key
029B E53D            689                             mov                     a,chkl
029D 7005            690                             jnz                     no0key
029F 75E730          691                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02A2 800D            692                             jmp                     yes0key
                     693                        
02A4                 694     no0key: ;       mov             r1,#chkl 
                     695                                     ;       call    chdec
02A4 C3              696                                     clr                     c
02A5 E53E            697                                     mov                     a,chkl+1;chkl-1
02A7 9401            698                                     subb            a,#1
02A9 F53E            699                                     mov                     chkl+1,a
02AB E53D            700                                     mov                     a,chkl
02AD 9400            701                                     subb            a,#0
02AF F53D            702                                     mov                     chkl,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    12

                     703                             ;;;;;;;;;;;;
02B1                 704     yes0key:
02B1 2004B2          705                                             jb              bitizm,rebyte
                     706                              ;буфер 2 выдать на индикацию
02B4 E533            707                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02B6 700B            708                             jnz             nochind
02B8 753364          709                             mov             chind2,#100
02BB 120000   F      710                             call    ind
02BE 120000   F      711     yes0key1:       call    z_1ms;z_01s
                     712                             ;call   z_01s
                     713                             ;call   z_01s
02C1 80D4            714                             jmp             labelA
                     715     
02C3 14              716     nochind:        dec             a
02C4 F533            717                                             mov             chind2,a
02C6 80F6            718                                     jmp             yes0key1;labelA
                     719             
02C8 C200            720     znplus:         clr     bitznak
02CA 547F            721                             anl             a,#7fh;fdh                      ;+
02CC F6              722                             mov             @r0,a
02CD 18              723                             dec             r0;,#reacp
02CE 7600            724                             mov             @r0,#00h
                     725                             
02D0                 726     goznak: 
                     727     ;;;;;;;;;;;;;
02D0 787A            728                             mov     r0,#reacp+3
02D2 E6              729                             mov             a,@r0
02D3 7F05            730                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02D5 C3              731     sdvig3:         clr             c
02D6 13              732                             rrc             a
02D7 DFFC            733                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02D9 FA              734                             mov             r2,a    ;сохр байт
02DA 18              735                             dec             r0              ;       reacp+2
02DB E6              736                             mov             a,@r0
02DC C0E0            737                             push    acc
02DE C3              738                             clr             c
02DF 7F03            739                             mov             r7,#3;2
02E1 C3              740     sdvig2:         clr             c
02E2 33              741                             rlc             a
02E3 DFFC            742                             djnz    r7,sdvig2 ;d12..d11      средний байт
02E5 4A              743                             orl             a,r2
02E6 F57A            744                             mov             reacp+3,a;сформ мл байт
02E8 D0E0            745                             pop             acc
                     746                             
02EA 7F05            747                             mov             r7,#5;6
02EC C3              748     sdvig1:         clr             c
02ED 13              749                             rrc             a
02EE DFFC            750                             djnz    r7,sdvig1 ;d15,d14        ср байт
02F0 FA              751                             mov             r2,a   ;сохр
02F1 E578            752                             mov             a,reacp+1
02F3 C0E0            753                             push    acc
                     754                     ;;      push    acc
02F5 7F03            755                             mov             r7,#3;2
02F7 C3              756     sdvig0:         clr             c
02F8 33              757                             rlc             a
02F9 DFFC            758                             djnz    r7,sdvig0 ;       d21..d16
02FB 4A              759                             orl             a,r2
02FC F579            760                             mov             reacp+2,a       ; сформ средний  байт
02FE D0E0            761                             pop             acc       ;reacp+1
                     762                             ;;;;;;;;;;;;;;
0300 20E70B          763                             jb              acc.7,sdvm
0303 C3              764                             clr             c
0304 7F05            765                             mov             r7,#5;6
0306 C3              766     sdvig4:         clr             c
0307 13              767                             rrc             a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    13

0308 DFFC            768                             djnz    r7,sdvig4 ;       d23,d22
030A F578            769                             mov             reacp+1,a
030C 8008            770                             jmp             readyacp;ankor;klmas
                     771     ;;;;;;;;;;;;                                    
030E 7F05            772     sdvm:           mov             r7,#5;6
0310 D3              773     sdvig6:         setb            c
0311 13              774                             rrc             a
0312 DFFC            775                             djnz    r7,sdvig6 ;       d23,d22
0314 F578            776                             mov             reacp+1,a
                     777                                                             
                     778     ; reacp..reacp+3-результат чтения асп(hex) 
                     779     ;;;;;;;;;
0316                 780     readyacp:
0316 7898            781                                             mov             r0,#chinkor
0318 E6              782                             mov             a,@r0
0319 30E702          783                             jnb             acc.7,gopart
031C 8044            784                                     jmp             sumt2
                     785                     
031E                 786     gopart:
031E 789A            787                             mov             r0,#parT        ;параметр времени
0320 793F            788                             mov             r1,#chmasN
0322 B6013A          789                             cjne    @r0,#1,noparT1
                     790                             ;РЕЗ+РЕЗ
0325 7877            791                             mov             r0,#reacp
0327 120000   F      792                             call    resar2          ;reacp->r2..r5
032A 78B6            793                             mov             r0,#summa+3;rez_A+3
032C 120000   F      794                             call    ladd
032F 78B3            795                             mov             r0,#summa;rez_A
0331 120000   F      796                             call    saver2
0334 793F            797                              mov            r1,#chmasN
0336 7714            798                             mov             @r1,#20;10
0338 789B            799                             mov             r0,#chbefore
033A B6631E          800                             cjne    @r0,#99,nobef99
                     801                             ;РЕЗ/100
033D 900000   F      802                             MOV        DPTR,#ch100 
0340 120000   F      803     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0343 120000   F      804                             call    zdiv;divide
0346 7862            805                             mov             r0,#rez_A
0348 120000   F      806                             call    saver2          ;сумма 100 отсчетов /100
034B 78C5            807                             mov             r0,#Rez_del
034D 120000   F      808                             call    saver2  
                     809                        ;;;;;
0350 78B3            810                        mov          r0,#summa
0352 120000   F      811                        call         clear4
                     812     
0355 799B            813                             mov             r1,#chbefore
0357 7700            814                             mov             @r1,#0
0359 8070            815                             jmp             klmas           ;загр в массив скользящее ср
035B 06              816     nobef99:        inc             @r0                     ;chbefore
035C 020000   F      817                             jmp             rebyte;labelA;метка A
                     818     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     819     ;а потом уже располагаем  в скользящий массив  из n
                     820     
                     821     
                     822     
035F B6021D          823     noparT1:        cjne    @r0,#2,noparT2
                     824                             ;РЕЗ+РЕЗ
0362                 825     sumt2:
0362 7877            826                              mov            r0,#reacp
0364 120000   F      827                             call    resar2          ;reacp->r2..r5
0367 78B6            828                             mov             r0,#summa+3;rez_A+3
0369 120000   F      829                             call    ladd
036C 78B3            830                             mov             r0,#summa;rez_A
036E 120000   F      831                             call    saver2
0371 789B            832                             mov             r0,#chbefore
0373 793F            833                             mov             r1,#chmasN
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    14

0375 770A            834                             mov             @r1,#10
0377 B613E1          835                             cjne    @r0,#19,nobef99;9,nobef99
                     836                             ;РЕЗ/20
037A 900000   F      837                             MOV        DPTR,#ch20;ch10 
037D 80C1            838                             jmp             allsum
                     839                             ;;;;;;;
                     840                             
                     841     
037F B6031D          842     noparT2:        cjne    @r0,#3,noparT3
                     843     
0382 7877            844                                                              mov            r0,#reacp
0384 120000   F      845                             call    resar2          ;reacp->r2..r5
0387 78B6            846                             mov             r0,#summa+3;rez_A+3
0389 120000   F      847                             call    ladd
038C 78B3            848                             mov             r0,#summa;rez_A
038E 120000   F      849                             call    saver2
0391 789B            850                             mov             r0,#chbefore
0393 793F            851                             mov             r1,#chmasN
0395 7704            852                             mov             @r1,#4                                  ;n=4
0397 B609C1          853                             cjne    @r0,#9,nobef99;9,nobef99
                     854                             ;РЕЗ/10
039A 900000   F      855                             MOV        DPTR,#ch10 
039D 80A1            856                             jmp             allsum
                     857                             
039F B6041D          858     noparT3:        cjne    @r0,#4,noparT4
03A2                 859     aapar:          
03A2 7877            860              mov            r0,#reacp
03A4 120000   F      861                             call    resar2          ;reacp->r2..r5
03A7 78B6            862                             mov             r0,#summa+3;rez_A+3
03A9 120000   F      863                             call    ladd
03AC 78B3            864                             mov             r0,#summa;rez_A
03AE 120000   F      865                             call    saver2
03B1 789B            866                             mov             r0,#chbefore
03B3 793F            867                             mov             r1,#chmasN
03B5 7704            868                             mov             @r1,#4
03B7 B604A1          869                             cjne    @r0,#4,nobef99;9,nobef99
                     870                             ;РЕЗ/10
03BA 900000   F      871                             MOV        DPTR,#ch5
03BD 8081            872                             jmp             allsum
                     873     
                     874                     
03BF 7702            875     noparT4:   mov          @r1,#2          ;chmasN n=2
03C1 7877            876                             mov             r0,#reacp
03C3 120000   F      877                             call    resar2          ;reacp->r2..r5
03C6 7862            878                             mov             r0,#rez_A
03C8 120000   F      879                             call    saver2
                     880     ;загрузить А в массив из 2/10 значений
                     881     ;;;;;;;;;;;;;;;
03CB                 882     klmas:           
03CB 793F            883                             mov             r1,#chmasN
03CD B7021A          884                             cjne    @r1,#2,mas10
03D0 900100          885                             MOV        dptr,#MASS0
03D3 120000   F      886                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     887     
03D6 7862            888                             mov             r0,#rez_A
03D8 120000   F      889                             call    resar2          ;->r2..r5
03DB 900100          890                             mov                     dptr,#MASS0
03DE 120000   F      891                   call              saveIr2                 ; R2-R5 --> MAS0
                     892                     
03E1 900107          893                   MOV          dptr,#MASS1+3
03E4 120000   F      894                   CALL       addx
03E7 020000   F      895                       jmp           endsum
                     896     ;массив из 10-ти измерений
03EA B70A7D          897     mas10:                  cjne    @r1,#10,mas20
03ED 900120          898                                             mov                     dptr,#MASS8
03F0 120000   F      899                     CALL            xCIKLWR         ;MASS8->MASS9
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    15

03F3 90011C          900                                             mov                     dptr,#MASS7
03F6 120000   F      901                     CALL            xCIKLWR         ;MASS7->MASS8
03F9 900118          902                     MOV       dptr,#MASS6
03FC 120000   F      903                     CALL       xCIKLWR         ; MASS6 --> MASS7
03FF 900114          904                     MOV        dptr,#MASS5
                     905                    
0402 120000   F      906                    CALL        xCIKLWR        ; MASS5 --> MASS6
0405 900110          907                    MOV         dptr,#MASS4
                     908                    
0408 120000   F      909                    CALL        xCIKLWR        ; MASS4 --> MASS5
040B 90010C          910                             mov                     dptr,#MASS3
                     911     
040E 120000   F      912                    CALL             xCIKLWR         ;MASS3->MASS4
0411 900108          913                     MOV        dptr,#MASS2
                     914                    
0414 120000   F      915                    CALL        xCIKLWR         ; MASS2 --> MASS3
0417 900104          916                    MOV         dptr,#MASS1
                     917                     
041A 120000   F      918                   CALL         xCIKLWR        ; MASS1 --> MASS2
041D 900100          919                    MOV         dptr,#MASS0
                     920                   
0420 120000   F      921                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     922     
                     923                             
0423 7862            924                             mov             r0,#rez_A
0425 120000   F      925                             call    resar2          ;->r2..r5
                     926                                     ;call   aform
0428 900100          927                                     mov                     dptr,#MASS0
042B 120000   F      928                   call              saveIr2                 ; R2-R5 --> MAS0
                     929              
042E 900107          930                   MOV          dptr,#MASS1+3
0431 120000   F      931                   CALL       addx
0434 90010B          932                   MOV          dptr,#MASS2+3
0437 120000   F      933                   CALL       addx
043A 90010F          934                   MOV          dptr,#MASS3+3
043D 120000   F      935                  CALL        addx
0440 900113          936                   MOV       dptr,#MASS4+3
0443 120000   F      937                   call       addx
0446 900117          938                     MOV        dptr,#MASS5+3
0449 120000   F      939                  CALL        addx
044C 90011B          940                   MOV          dptr,#MASS6+3
044F 120000   F      941                   CALL       addx
0452 90011F          942                   MOV          dptr,#MASS7+3
0455 120000   F      943                  CALL        addx
0458 900123          944                  MOV        dptr,#MASS8+3
045B 120000   F      945                   call       addx
045E 900127          946                     MOV                     dptr,#MASS9+3
0461 120000   F      947                  call        addx
0464 020000   F      948                              jmp            endsum
                     949     
0467 020000   F      950     rmas4:          jmp                     mas4
                     951     ;массив из 20-ти измерений
046A B714FA          952     mas20:          cjne    @r1,#20,rmas4
046D 900148          953                                             mov                     dptr,#MASS18
0470 120000   F      954                     CALL            xCIKLWR         ;MASS18->MASS19
0473 900144          955                                             mov                     dptr,#MASS17
0476 120000   F      956                     CALL            xCIKLWR         ;MASS17->MASS18
0479 900140          957                     MOV       dptr,#MASS16
047C 120000   F      958                     CALL       xCIKLWR         ; MASS16 --> MASS17
047F 90013C          959                     MOV        dptr,#MASS15
                     960                    
0482 120000   F      961                    CALL        xCIKLWR        ; MASS15 --> MASS16
0485 900138          962                    MOV         dptr,#MASS14
                     963                    
0488 120000   F      964                    CALL        xCIKLWR        ; MASS14 --> MASS15
048B 900134          965                             mov                     dptr,#MASS13
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    16

                     966     
048E 120000   F      967                    CALL             xCIKLWR         ;MASS13->MASS14
0491 900130          968                     MOV        dptr,#MASS12
                     969                    
0494 120000   F      970                    CALL        xCIKLWR         ; MASS12 --> MASS13
0497 90012C          971                    MOV         dptr,#MASS11
                     972                     
049A 120000   F      973                   CALL         xCIKLWR        ; MASS11 --> MASS12
049D 900128          974                    MOV         dptr,#MASS10
                     975                   
04A0 120000   F      976                    CALL        xCIKLWR        ; MASS10 --> MASS11
04A3 900124          977                                      MOV       dptr,#MASS9
04A6 120000   F      978                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     979     
04A9 900120          980                                             mov                     dptr,#MASS8
04AC 120000   F      981                     CALL            xCIKLWR         ;MASS8->MASS9
04AF 90011C          982                                             mov                     dptr,#MASS7
04B2 120000   F      983                     CALL            xCIKLWR         ;MASS7->MASS8
04B5 900118          984                     MOV       dptr,#MASS6
04B8 120000   F      985                     CALL       xCIKLWR         ; MASS6 --> MASS7
04BB 900114          986                     MOV        dptr,#MASS5
                     987                    
04BE 120000   F      988                    CALL        xCIKLWR        ; MASS5 --> MASS6
04C1 900110          989                    MOV         dptr,#MASS4
                     990                    
04C4 120000   F      991                    CALL        xCIKLWR        ; MASS4 --> MASS5
04C7 90010C          992                             mov                     dptr,#MASS3
                     993     
04CA 120000   F      994                    CALL             xCIKLWR         ;MASS3->MASS4
04CD 900108          995                     MOV        dptr,#MASS2
                     996                    
04D0 120000   F      997                    CALL        xCIKLWR         ; MASS2 --> MASS3
04D3 900104          998                    MOV         dptr,#MASS1
                     999                     
04D6 120000   F     1000                   CALL         xCIKLWR        ; MASS1 --> MASS2
04D9 900100         1001                    MOV         dptr,#MASS0
                    1002                   
04DC 120000   F     1003                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1004     
                    1005                             
04DF 7862           1006                             mov             r0,#rez_A
04E1 120000   F     1007                             call    resar2          ;->r2..r5
                    1008                                     ;call   aform
04E4 900100         1009                                     mov                     dptr,#MASS0
04E7 120000   F     1010                   call              saveIr2                 ; R2-R5 --> MAS0
                    1011              
04EA 900107         1012                   MOV          dptr,#MASS1+3
04ED 120000   F     1013                   CALL       addx
04F0 90010B         1014                   MOV          dptr,#MASS2+3
04F3 120000   F     1015                   CALL       addx
04F6 90010F         1016                   MOV          dptr,#MASS3+3
04F9 120000   F     1017                  CALL        addx
04FC 900113         1018                   MOV       dptr,#MASS4+3
04FF 120000   F     1019                   call       addx
0502 900117         1020                     MOV        dptr,#MASS5+3
0505 120000   F     1021                  CALL        addx
0508 90011B         1022                   MOV          dptr,#MASS6+3
050B 120000   F     1023                   CALL       addx
050E 90011F         1024                   MOV          dptr,#MASS7+3
0511 120000   F     1025                  CALL        addx
0514 900123         1026                  MOV        dptr,#MASS8+3
0517 120000   F     1027                   call       addx
051A 900127         1028                     MOV                     dptr,#MASS9+3
051D 120000   F     1029                  call        addx
                    1030     ;27
0520 90012B         1031                                     MOV        dptr,#MASS10+3
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    17

0523 120000   F     1032                   CALL       addx
0526 90012F         1033                                     MOV        dptr,#MASS11+3
0529 120000   F     1034                   CALL       addx
052C 900133         1035                   MOV          dptr,#MASS12+3
052F 120000   F     1036                   CALL       addx
0532 900137         1037                   MOV          dptr,#MASS13+3
0535 120000   F     1038                  CALL        addx
0538 90013B         1039                   MOV       dptr,#MASS14+3
053B 120000   F     1040                   call       addx
053E 90013F         1041                                     MOV        dptr,#MASS15+3
0541 120000   F     1042                     CALL     addx
0544 900143         1043                   MOV          dptr,#MASS16+3
0547 120000   F     1044                   CALL       addx
054A 900147         1045                   MOV          dptr,#MASS17+3
054D 120000   F     1046                  CALL        addx
0550 90014B         1047                  MOV        dptr,#MASS18+3
0553 120000   F     1048                   call       addx
0556 90014F         1049                                     MOV                     dptr,#MASS19+3
0559 120000   F     1050                  call        addx
055C 802F           1051                                     jmp             endsum
                    1052     ;массив из 4х измерений
055E                1053     mas4:                   
055E 900108         1054                                             MOV        dptr,#MASS2
0561 120000   F     1055                    CALL        xCIKLWR         ; MASS2 --> MASS3
0564 900104         1056                    MOV         dptr,#MASS1
0567 120000   F     1057                    CALL        xCIKLWR        ; MASS1 --> MASS2
056A 900100         1058                    MOV         dptr,#MASS0
056D 120000   F     1059                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1060     
                    1061                             
0570 7862           1062                             mov             r0,#rez_A
0572 120000   F     1063                             call    resar2          ;->r2..r5
                    1064                                     ;call   aform
0575 900100         1065                                     mov                     dptr,#MASS0
0578 120000   F     1066                   call              saveIr2                 ; R2-R5 --> MAS0
                    1067              
057B 900107         1068                   MOV          dptr,#MASS1+3
057E 120000   F     1069                   CALL       addx
0581 90010B         1070                   MOV          dptr,#MASS2+3
0584 120000   F     1071                   CALL       addx
0587 90010F         1072                   MOV          dptr,#MASS3+3
058A 120000   F     1073                  CALL        addx
                    1074                  
                    1075             ;23.03          
058D                1076     endsum:
058D 786E           1077                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
058F 06             1078                                     inc             @r0
0590 E6             1079                                     mov             a,@r0   
0591 200105         1080                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1081                                     
0594 B53F31         1082                                     cjne    a,chmasN,masx5
0597 D201           1083                                     setb    bitmas                  ;массив заполнен
0599 853F6E         1084     masfull:                mov             chmas,chmasN
059C 783F           1085                                     mov             r0,#chmasN
059E E6             1086                                     mov             a,@r0
                    1087     ;masfull:
059F B40208         1088                                     cjne    a,#2,nochn2
05A2 900000   F     1089                                     MOV        DPTR,#ch2;10 
05A5 120000   F     1090                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05A8 8028           1091                                     jmp             mas5div
                    1092     
05AA B40A08         1093     nochn2:         cjne    a,#10,nochn10
05AD 900000   F     1094                                                     MOV        DPTR,#ch10 
05B0 120000   F     1095                                     CALL   ldc_ltemp                 ; ltemp <-- 10
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    18

05B3 801D           1096                                     jmp             mas5div
                    1097     
05B5 B41408         1098     nochn10:        cjne    a,#20,nochn20
05B8 900000   F     1099                                                     MOV        DPTR,#ch20 
05BB 120000   F     1100                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05BE 8012           1101                                     jmp             mas5div
                    1102     
05C0 900000   F     1103     nochn20:        MOV        DPTR,#ch4 
05C3 120000   F     1104                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05C6 800A           1105                                     jmp             mas5div
                    1106     
05C8 856E0B         1107     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05CB E4             1108                                     clr     a
05CC F50A           1109                                     mov     ltemp+2,a
05CE F509           1110                                     mov     ltemp+1,a
05D0 F508           1111                                     mov     ltemp,a
                    1112     
05D2                1113     mas5div:
05D2 120000   F     1114                                     CALL       zdiv;divide                           ; R2-R5 =
                    1115                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1116     
                    1117                             
                    1118      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1119     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1120     ;получен результат 3 байта и знак
05D5 7866           1121                             mov             r0,#rez_A1
05D7 120000   F     1122                             call    saver2           ;сохр среднее по массиву
                    1123     ;;8.11.06                       mov             chmasN,#0
                    1124      ;;;;;;;;;;;;
                    1125      ;;;;;;;;;;;;
05DA C3             1126                             clr             c
05DB 799A           1127                             mov             r1,#parT
05DD 7402           1128                             mov             a,#2
05DF 97             1129                             subb    a,@r1
05E0 501D           1130                             jnc             ankor           ;T<3
                    1131                             ;A-=РЕЗ1                                ;T>3
05E2 120402         1132                             call    altof                   ;r2..r5->float
05E5 785E           1133                             mov             r0,#rez_Ame
05E7 120000   F     1134                             call    saver2
                    1135                             ;;;;
05EA 7890           1136                             mov             r0,#koefKp;->r8..r11
05EC EA             1137                             mov             a,r2
05ED 30E702         1138                             jnb             acc.7,nminus3
05F0 7894           1139                             mov             r0,#koefKm;->r8..r11
05F2 120000   F     1140     nminus3:                call    resar8
05F5 120203         1141                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05F8 785E           1142                             mov             r0,#rez_Ame
05FA 120000   F     1143                             call    saver2
05FD 8021           1144                             jmp             gotoKD
                    1145     
05FF                1146     ankor:  
05FF 7898           1147                             mov             r0,#chinkor
0601 E6             1148                             mov             a,@r0
0602 30E703         1149                             jnb             acc.7,nokorr
                    1150                             ;коррекция 0
0605 020000   F     1151                             jmp             kornul
0608                1152     nokorr: 
                    1153                             ;mov            r10,#00         ;       chavt
                    1154                             ;mov            r11,#00h
0608 7881           1155                             mov              r0,#chavt      
060A E6             1156                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
060B 30E737         1157                             jnb             acc.7,nonulavt;jnz              nonulavt        
060E 750A00         1158                             mov             r10,#0;1;00;02          
0611 750BC8         1159                             mov             r11,#0c8h;90h;0c8h;58h
0614 7898           1160                             mov             r0,#chinkor
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    19

0616 120000   F     1161                             call    chcmp
0619 7045           1162                             jnz             noavk
                    1163                             ;автокалибровка
061B 020000   F     1164                             jmp             autoka;noavk;
                    1165     
061E 8079           1166     rafterK:                jmp             afterK
                    1167     ;;;;;;;;;;
0620 C3             1168      gotoKD:                clr             c
0621 799A           1169                             mov             r1,#parT
0623 7404           1170                             mov             a,#4
0625 97             1171                             subb    a,@r1
0626 50F6           1172                             jnc             rafterK         ;T<5
                    1173                             ;A1-=A- *KD                     ;T>5
                    1174                             ;call           findkoef                                ;r2,r3-hex
                    1175                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1176                                     
                    1177                             ;       call    altof                   ;r2..r5->float
                    1178                             ;       mov     dptr,#CHtho;100000
                    1179                             ;       call    ldc_ltemp                       ;r8..r11
                    1180                             ;       call    fldiv
                    1181                             ;       call    move28
                    1182                             
0628 785E           1183                             mov             r0,#rez_Ame;->r2..r5   ???????????/
062A 120000   F     1184                             call    resar2
                    1185                                     ;call   flmul
062D 120343         1186                             call    ftol                    ;float->int
0630 7866           1187                             mov             r0,#rez_A1
0632 120000   F     1188                             call    saver2
0635 786A           1189                             mov             r0,#rez_A0;->r8..r11 hex
0637 120000   F     1190                             call    resar8
063A 120000   F     1191                             call    lsub            ;A3=A-1-A0
063D 789C           1192                             mov             r0,#rez_A3
063F 120000   F     1193                             call    saver2
0642 020000   F     1194                             jmp             labelB  
                    1195      ;;;;;;;;;;; 9.11.06
0645 789A           1196     nonulavt:        mov            r0,#parT
0647 E6             1197                             mov             a,@r0
0648 6401           1198                             xrl             a,#01
064A 700F           1199                             jnz             avtdec1
064C 7982           1200                             mov             r1,#chavt+1     ;T=1 chavt-10
064E 120000   F     1201                             call    tenmin
0651 7999           1202     kordec10:       mov             r1,#chinkor+1
0653 120000   F     1203                             call    tenmin
0656 801E           1204                             jmp             rezmul
                    1205     
0658 020000   F     1206     rmo220:         jmp             mo220
                    1207     
065B 7981           1208     avtdec1:        mov             r1,#chavt       
065D 120000   F     1209                             call    chdec           ;chavt-1
                    1210     ;                       jmp             kordec1;rezmul
0660 789A           1211     noavk:          mov             r0,#parT
0662 E6             1212                             mov             a,@r0
0663 6401           1213                             xrl             a,#01
0665 700A           1214                             jnz             kordec1
                    1215                             ;T=1 chinkor-10
0667 7999           1216                     mov             r1,#chinkor+1
0669 120000   F     1217                             call    tenmin
066C 8008           1218                             jmp             rezmul
                    1219     
066E 020000   F     1220     rnotestizm:             jmp                     notestizm
0671 7998           1221     kordec1:        mov             r1,#chinkor
0673 120000   F     1222                             call    chdec           ; chinkor-1
                    1223                        ;9.11.06
                    1224                             ;;;;;;;;;;;;;;
                    1225                             ;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    20

                    1226     ;(РЕЗ1-АN)*K
0676                1227     rezmul:
0676 7866           1228                             mov             r0,#rez_A1;->r2..r5
0678 120000   F     1229                             call    resar2
067B 120402         1230                             call    altof   ;r2..r5->float  6.06    
067E 7884           1231                             mov             r0,#kor0_AN;->r8..r11
0680 120000   F     1232                             call    resar8
0683 1201D1         1233                             call    flsub
0686 7890           1234                             mov             r0,#koefKp;->r8..r11
0688 EA             1235                             mov             a,r2
0689 30E702         1236                             jnb             acc.7,nminus
                    1237                             ;jnb            bitznak,nminus
                    1238                     
068C 7894           1239                             mov             r0,#koefKm;->r8..r11
068E 120000   F     1240     nminus:         call    resar8
0691 120203         1241                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0694 785E           1242                             mov             r0,#rez_Ame
0696 120000   F     1243                             call    saver2
                    1244      
0699                1245     afterK:                 
                    1246     ;;;;;;;;;;;;;;
0699 EA             1247                                     mov             a,r2
069A 547F           1248                                     anl             a,#7fh
069C FA             1249                                     mov             r2,a
069D 900000   F     1250                                     mov     dptr,#ch_250;220;220000
06A0 120000   F     1251                                     call    ldc_ltemp                       ;r8..r11=8
06A3 1201D6         1252                                     call    flcmp
06A6 50B0           1253                                     jnc             rmo220          ;A>220000
                    1254                                     ;;;;;;;;;
06A8 3015C3         1255                                     jnb                     biteizm,rnotestizm
06AB 78B1           1256                                     mov                     r0,#vichR
06AD B62155         1257                                     cjne            @r0,#21h,note21
06B0 7A50           1258                                     mov                     r2,#50h                 ;-11a
06B2 7B18           1259                                     mov                     r3,#18h                 ;k8
06B4 12046C         1260                                     call            rebyte2                         ;r2..r5- he
                             x
06B7 120402         1261                                     call            altof                   ;r2..r5->float
06BA C002           1262                                     push            rr2
06BC C003           1263                                     push            rr3
06BE C004           1264                                     push            rr4
06C0 C005           1265                                     push            rr5
06C2 7A50           1266                                     mov                     r2,#50h                 ;k10
06C4 7B20           1267                                     mov                     r3,#20h
06C6 12046C         1268     re11_7: call            rebyte2                 ;r2..r5
06C9 120402         1269                                     call            altof                   ;r2..r5->float
06CC 120000   F     1270                                     call            move28
06CF D005           1271                                     pop                     rr5
06D1 D004           1272                                     pop                     rr4
06D3 D003           1273                                     pop                     rr3
06D5 D002           1274                                     pop                     rr2
06D7 1202B7         1275                                     call            fldiv
                    1276                             ;       mov                     dptr,#ch_10
                    1277                             ;       call            ldc_ltemp                       ;r8..r11
                    1278                             ;       call            flmul
                    1279                                     ;;;;;2.02.07
06DA C002           1280                                     push            rr2
06DC C003           1281                                     push            rr3
06DE C004           1282                                     push            rr4
06E0 C005           1283                                     push            rr5
06E2 7A50           1284                                     mov                     r2,#50h                 ;-11a
06E4 7B2C           1285                                     mov                     r3,#2ch                 ;Km
06E6 12046C         1286                                     call            rebyte2                         ;r2..r5- he
                             x
06E9 120402         1287                                     call            altof                   ;r2..r5->float
06EC 120000   F     1288                                     call            move28
06EF D005           1289                                     pop                     rr5
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    21

06F1 D004           1290                                     pop                     rr4
06F3 D003           1291                                     pop                     rr3
06F5 D002           1292                                     pop                     rr2
06F7 120203         1293                                     call            flmul                           ;*Km
06FA 900000   F     1294                                     mov     dptr,#CHtho;100000
06FD 120000   F     1295                                     call    ldc_ltemp                       ;r8..r11=8
0700 1202B7         1296                                     call    fldiv
                    1297                                     ;;;;;
0703 8050           1298                                     jmp                     temul   
0705 B62218         1299     note21: cjne            @r0,#22h,note22
0708 7A50           1300                                     mov                     r2,#50h                 ;-09a
070A 7B10           1301                                     mov                     r3,#10h                 ;k6
070C 12046C         1302                                     call            rebyte2                         ;r2..r5- he
                             x
070F 120402         1303                                     call            altof                   ;r2..r5->float
0712 C002           1304                                     push            rr2
0714 C003           1305                                     push            rr3
0716 C004           1306                                     push            rr4
0718 C005           1307                                     push            rr5
071A 7A50           1308                                     mov                     r2,#50h                 ;k8
071C 7B18           1309                                     mov                     r3,#18h
071E 80A6           1310                                     jmp                     re11_7
0720 7A50           1311     note22: mov                     r2,#50h                 ;-7a
0722 7B08           1312                                     mov                     r3,#08h                 ;k4
0724 12046C         1313                                     call            rebyte2                         ;r2..r5- he
                             x
0727 120402         1314                                     call            altof                   ;r2..r5->float
072A C002           1315                                     push            rr2
072C C003           1316                                     push            rr3
072E C004           1317                                     push            rr4
0730 C005           1318                                     push            rr5
0732 7A50           1319                                     mov                     r2,#50h                 ;k6
0734 7B10           1320                                     mov                     r3,#10h
0736 808E           1321                                     jmp                     re11_7  
                    1322                                     ;;;;;;;;;
0738                1323     notestizm:
0738 301208         1324                                     jnb             bitklb,komulpz
073B 900000   F     1325                                     mov     dptr,#chk;100000
073E 120000   F     1326                                     call    ldc_long                        ;r2..r5
0741 8006           1327                                     jmp             komul
0743 120000   F     1328     komulpz:call            findkoef                                ;r2,r3-hex
0746 12046C         1329                                     call            rebyte2                         ;r2..r5- he
                             x
                    1330                                     
0749 120402         1331     komul:  call    altof                   ;r2..r5->float
074C 900000   F     1332                                     mov     dptr,#CHtho;100000
074F 120000   F     1333                             call    ldc_ltemp                       ;r8..r11=8
0752 1202B7         1334                                     call    fldiv
0755 120000   F     1335     temul:                          call    move28
0758 785E           1336                                     mov             r0,#rez_Ame
075A 120000   F     1337                                     call    resar2
                    1338                     
075D 120203         1339                                     call    flmul     ;A1-=A-*KD  fl
                    1340                                     
0760 120343         1341                                     call    ftol                    ;float->int
0763 7866           1342                                     mov             r0,#rez_A1
0765 120000   F     1343                                     call    saver2
0768 120402         1344                                     call    altof                   ;r2..r5->float
076B 900000   F     1345                                     mov     dptr,#ch_220;200;200000
076E 120000   F     1346                                     call    ldc_ltemp                       ;r8..r11=8
0771 1201D6         1347                                     call    flcmp
0774 502D           1348                                     jnc             rrmo220         ;A>200000
                    1349                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1350                             ;       jb              bitavp,yesavp
0776 301808         1351                                     jnb             knizm,goA2
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    22

0779 300602         1352                                     jnb             bitvi11,qu_avp
077C 8003           1353                                     jmp             goA2
077E 20052F         1354     qu_avp:                 jb              bitavp,yesavp
0781                1355     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0781                1356     goA2:                    ;A2=A1-
0781 7866           1357                                      mov            r0,#rez_A1
0783 120000   F     1358                                     call    resar2
0786 787B           1359                                     mov             r0,#rez_A2
0788 120000   F     1360                                     call    saver2
078B                1361     goA3A2:                  ;A3=A2-A0
078B 786A           1362                                       mov           r0,#rez_A0
078D 120000   F     1363                                     call    resar8
0790 120000   F     1364                                     call    lsub
0793 789C           1365                                     mov             r0,#rez_A3
0795 120000   F     1366                                     call    saver2
                    1367                                     ;;;;;;
0798 20065E         1368                                     jb              bitvi11,yesvich
079B                1369     goonin:            ;jmp         goonind;indA3;8.11.06
079B 78AC           1370                                     mov             r0,#chind
079D B60006         1371                                     cjne    @r0,#0,rnochi0
07A0 020000   F     1372                                     jmp             goonind;indA3
                    1373     
07A3 020000   F     1374     rrmo220:                jmp             mo220
07A6 020000   F     1375     rnochi0:                jmp             nochi0
07A9 7866           1376     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07AB 120000   F     1377                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07AE 80D1           1378                                             jmp             goA2
                    1379     ;;;;;;;;;;;;;;;;
07B0 EA             1380     yesavp:                 mov             a,r2
07B1 547F           1381                                     anl             a,#7fh
07B3 FA             1382                                     mov             r2,a
07B4 900000   F     1383                                     mov     dptr,#ch_10th;10000
07B7 120000   F     1384                                     call    ldc_ltemp                       ;r8..r11=8
07BA 1201D6         1385                                     call    flcmp
07BD 50C2           1386                                     jnc             noavp           ;A>10000        
07BF 78AE           1387                                     mov             r0,#diap                ;10-11
07C1 B60902         1388                                     cjne    @r0,#9,avpgo
07C4 80BB           1389                                     jmp             noavp
07C6                1390     avpgo:                  
07C6 06             1391                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07C7 B60A01         1392                                     cjne    @r0,#0ah,clmasv
07CA 16             1393                                     dec             @r0
07CB                1394     clmasv:         ;сбросить массив
07CB 120000   F     1395                             call    loadUS
                    1396                             ;call   louizm
07CE 120000   F     1397                             call     clmassix
07D1 78B3           1398                                     mov             r0,#summa
07D3 120000   F     1399                                     call    clear4
07D6 786A           1400                                     mov             r0,#rez_A0
07D8 120000   F     1401                                     call    clear4
07DB D207           1402                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07DD 80BC           1403                                jmp     goonin
                    1404     
07DF D00B           1405     erra01:         pop                     r11
07E1 D00A           1406                                     pop                     r10
07E3 D009           1407                                     pop                     r9
07E5 D008           1408                                     pop                     r8
07E7 C214           1409                                     clr             bitvich
07E9 C206           1410                                     clr             bitvi11
07EB 753934         1411                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
07EE 120000   F     1412                                             call            error
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    23

07F1 120000   F     1413                                             call            ind
07F4 120000   F     1414                                             call            z_1s
07F7 80A2           1415                                             jmp             goonin
                    1416     
                    1417     
07F9                1418     yesvich:        
                    1419                     ;                       mov             r0,#konstB
                    1420                     ;               call    resar2
                    1421                     ;               call    move28
07F9 789C           1422                                     mov             r0,#rez_A3;A1
07FB 120000   F     1423                                     call    resar2                          ;HEX
                    1424                                     
07FE 120402         1425                                     call            altof                   ;r2..r5->float
0801 EA             1426                                     mov             a,r2                    ;модуль
0802 547F           1427                                     anl             a,#7fh
0804 FA             1428                                     mov             r2,a
                    1429                     ;               call            fladd                           ;A1+B
                    1430                                     
0805 900000   F     1431                                     mov     dptr,#CH_500;
0808 120000   F     1432                                     call    ldc_ltemp                       ;r8..r11
080B 1201D6         1433                                     call    flcmp
080E 407E           1434                                     jc                      mo500R;error <500 >22000
0810 900000   F     1435                                     mov     dptr,#CH_22T;
0813 120000   F     1436                                     call    ldc_ltemp                       ;r8..r11
0816 1201D6         1437                                     call    flcmp
0819 507F           1438                                     jnc             mo500I          ;error
                    1439                                     ;;;;;;;;;;;;
081B 120000   F     1440                                     call            move28
081E C008           1441                                     push            r8
0820 C009           1442                                     push            r9
0822 C00A           1443                                     push            r10
0824 C00B           1444                                     push            r11
0826 78BC           1445                                     mov             r0,#konstA
0828 120000   F     1446                                     call    resar2
082B 900000   F     1447                                     mov                     dptr,#ch0
082E 120000   F     1448                                     call            ldc_ltemp
0831 1201D6         1449                                     call            flcmp
0834 60A9           1450                                     jz              erra01
0836 900000   F     1451                                     mov             dptr,#CH_B
0839 120000   F     1452                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
083C 120203         1453                                     call            flmul                           ;A*10-7
083F D00B           1454                                     pop                     r11
0841 D00A           1455                                     pop                     r10
0843 D009           1456                                     pop                     r9
0845 D008           1457                                     pop                     r8
0847 1202B7         1458                                     call            fldiv                   ;результат R
084A 78C9           1459                                     mov                     r0,#rez_R
084C 120000   F     1460                                     call            saver2
084F 120343         1461                                     call            ftol                    ;float->hex
                    1462                                     ;;;;;;;;;;
0852 784F           1463                                             mov             r0,#abin
0854 120000   F     1464                                             call    saver2
                    1465     ;;;;;;;;
0857 7840           1466                                                     mov             r0,#bufind
0859                1467     age9:
0859 7620           1468                             mov             @r0,#" "          ;погасить индикатор
085B 08             1469                             inc             r0
085C B84BFA         1470                             cjne    r0,#bufind+11,age9
                    1471                                             
085F 78C9           1472                                             mov             r0,#rez_R
0861 120000   F     1473                                             call            resar2
                    1474     ;;;;;;;;;;
0864 900000   F     1475                                     mov             dptr,#CH_fl
0867 120000   F     1476                                     CALL   ldc_ltemp
086A 1202B7         1477                                     call            fldiv
                    1478     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    24

086D 78B8           1479                                     mov             r0,#work                ;степень +
086F 7600           1480                                     mov             @r0,#0
0871 78B9           1481                                     mov             r0,#work+1;степень -
0873 7600           1482                                     mov             @r0,#0
0875 900000   F     1483     compa1: mov     dptr,#ch_1;
0878 120000   F     1484                                     call    ldc_ltemp                       ;r8..r11
087B 1201D6         1485                                     call    flcmp
087E 4026           1486                                     jc              equ0            ;<1
0880 78B8           1487                                     mov             r0,#work                        ;степень +
0882 06             1488                                     inc             @r0
0883 900000   F     1489                                     mov             dptr,#ch_10;
0886 120000   F     1490                                     call    ldc_ltemp                       ;r8..r11
0889 1202B7         1491                                     call            fldiv
088C 80E7           1492                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1493                                     ;;;;;;;;;;;;;;;;;;;
088E 900000   F     1494     mo500R: mov             dptr,#teOLR
0891 120000   F     1495                               call          lotext           
0894 120000   F     1496                                     call            ind
0897 020000   F     1497                                     jmp                     nobavp;nobitizm
089A 900000   F     1498     mo500I: mov             dptr,#teOLI
089D 120000   F     1499                               call          lotext           
08A0 120000   F     1500                                     call            ind
08A3 020000   F     1501                                     jmp                     nobavp;nobitizm
08A6                1502     equ0:           ;;;;;   call            ftol                    ;float->int
08A6 78B8           1503                                     mov             r0,#work                ;степень +
08A8 B60019         1504                                     cjne    @r0,#0,equ00
                    1505                                     
08AB 900000   F     1506     compa2: mov     dptr,#ch_1;
08AE 120000   F     1507                                     call    ldc_ltemp                       ;r8..r11
08B1 1201D6         1508                                     call    flcmp
08B4 500E           1509                                     jnc             equ00           ;>1
08B6 78B9           1510                                     mov             r0,#work+1                      ;степень -
08B8 16             1511                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08B9 900000   F     1512                                     mov             dptr,#ch_10;
08BC 120000   F     1513                                     call    ldc_ltemp                       ;r8..r11
08BF 120203         1514                                     call            flmul
08C2 80E7           1515                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1516     
                    1517     
08C4                1518     equ00:          
08C4 7853           1519                                                     mov             r0,#adec
08C6 7952           1520                                             mov             r1,#abin+3      ;hex->10
08C8 120000   F     1521                                             call    bindec
                    1522     
                    1523                                                     ;если степень полож убирать младший байт
                    1524                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1525                                                     ;число в bufind..bufind+5
08CB 78B8           1526                                             mov             r0,#work
08CD B60021         1527                                             cjne    @r0,#0,outr
08D0 08             1528                                             inc             r0                      ;work+1
08D1 B6FF05         1529                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08D4 06             1530                                             inc                     @r0;!!!!!!!!!?
08D5 785B           1531                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08D7 8003           1532                                             jmp                     bufr30
                    1533                                             ;;;;;;;;;;;;;;
08D9 06             1534     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08DA 785C           1535                                                     mov             r0,#adec+9
08DC 7945           1536     bufr30:         mov             r1,#bufind+5;6
08DE 7F05           1537                                             mov             r7,#5;7
08E0 E6             1538     bufr2:                          mov             a,@r0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    25

08E1 2430           1539                                             add             a,#30h
08E3 F7             1540                                             mov             @r1,a
08E4 19             1541                                             dec             r1
08E5 18             1542                                             dec             r0
08E6 DFF8           1543                                             djnz    r7,bufr2
                    1544     
08E8 784F           1545                                             mov             r0,#abin
08EA 120000   F     1546                                             call            clear4
08ED 78B9           1547                                             mov             r0,#work+1
08EF 801C           1548                                     jmp             outr5
                    1549     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
08F1 785C           1550     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
08F3 C3             1551                                             clr             c
08F4 79B8           1552                                             mov             r1,#work
08F6 E8             1553                                             mov             a,r0
08F7 14             1554                                             dec             a                                  
                                  ;n-1
08F8 97             1555                                             subb    a,@r1
08F9 F8             1556                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
08FA 7945           1557                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
08FC 7F05           1558                                             mov             r7,#5;7
08FE E6             1559     bufr:                           mov             a,@r0
08FF 2430           1560                                             add             a,#30h
0901 F7             1561                                             mov             @r1,a
0902 19             1562                                             dec             r1
0903 18             1563                                             dec             r0
0904 DFF8           1564                                             djnz    r7,bufr
                    1565     
0906 784F           1566                                             mov             r0,#abin
0908 120000   F     1567                                             call            clear4
090B 78B8           1568                                     mov             r0,#work
090D E6             1569     outr5:                  mov             a,@r0
090E F552           1570                                             mov             abin+3,a
                    1571                                                                     ;n(hex)->abin
0910 120000   F     1572                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
0913 2552           1573                                             add             a,abin+3
0915 F552           1574                                             mov             abin+3,a
0917 7853           1575                                             mov             r0,#adec
0919 7952           1576                                             mov             r1,#abin+3      ;hex->10
091B 120000   F     1577                                             call    bindec
091E 855C48         1578                                             mov             bufind+8,adec+9
0921 855B47         1579                                             mov             bufind+7,adec+8
0924 754966         1580                                             mov             bufind+9,#66h
0927 020000   F     1581                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1582                                             
                    1583                                     ;;;;;;;;;;;;;;;;;;;;;
                    1584     ;;;;;;;;;;;;;
                    1585     
092A 300508         1586     mo220:             jnb          bitavp,indoll
092D 301805         1587                                jnb          knizm,indoll;bitizm,indoll
0930 78AE           1588                                     mov             r0,#diap
0932 B6000B         1589                                     cjne    @r0,#0,nodi2
                    1590                                ;10-2
0935 900000   F     1591     indoll:                 mov             dptr,#teOLL;OLL
0938 120000   F     1592                                     call    lotext
093B D217           1593                                     setb    bitoll
093D 020000   F     1594                                     jmp             goonin  
                    1595     
0940 16             1596     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1597     
0941 B6FF01         1598                                     cjne    @r0,#0ffh,nodi9
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    26

0944 06             1599                                     inc             @r0
                    1600     
0945 120000   F     1601     nodi9:          call    loadUS
                    1602                                     ;call   louizm
                    1603                                     ;сбросить массив
0948 120000   F     1604                                     call     clmassix
094B 78B3           1605                                     mov             r0,#summa
094D 120000   F     1606                                     call    clear4
0950 786A           1607                                     mov             r0,#rez_A0
0952 120000   F     1608                                     call    clear4  
0955 D207           1609                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0957 020000   F     1610                                jmp     goonin
                    1611     
095A 16             1612     nochi0:                 dec             @r0                     ;СТИ-1
095B 020000   F     1613                                     jmp             labelB  
                    1614     
                    1615             
                    1616     ;;;;;;;;;;;;;;;
                    1617     
095E                1618     nop3_0: ;;      ;rez_A-rez_A0
                    1619                     ;;                      mov             r0,#rez_A0
                    1620                     ;;                      call    resar8
                    1621                     ;;                      call    lsub
                    1622                     ;;                      mov             r0,#rez_A
                    1623                     ;;;                     call    saver2
                    1624      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
095E 789C           1625      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
0960 120000   F     1626                                             call    resar2
0963 900000   F     1627                                             mov             dptr,#ch100              
0966 120000   F     1628                                             call    ldc_ltemp        
0969 120000   F     1629                                             call    zdiv            ;rez_A3/100=r2..r5
                    1630                                     
096C EC             1631                                             mov             a,r4
096D 20E71E         1632                                             jb              acc.7,aless0
0970 4408           1633                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
0972 F5D3           1634                                             mov             DAC0H,a
                    1635                                                                             ;мл байт
0974 ED             1636                                             mov             a,r5
0975 F5D2           1637                                             mov             DAC0L,a
0977 801E           1638                                             jmp             moveA3;
                    1639     
0979 B70207         1640     no3parN:                        cjne    @r1,#2,no2parN
                    1641                                             ;в байт 0  записать пробел
097C 7946           1642                                             mov             r1,#bufind+6
097E 7720           1643                                             mov             @r1,#" ";0fdh;
0980 020000   F     1644                                             jmp             seeind;moveA3
                    1645     
0983                1646     no2parN:                        ;в байты 0 и 1 записать пробел
0983 7945           1647                                             mov             r1,#bufind+5
0985 7720           1648                                             mov             @r1,#" ";0fdh;" "
0987 09             1649                                             inc             r1
0988 7720           1650                                             mov             @r1,#" ";0fdh;" "
098A 8079           1651                                             jmp             seeind;moveA3
098C 8077           1652      rseeind:               jmp             seeind
098E F4             1653     aless0:                         cpl             a
098F 54F7           1654                                             anl             a,#0f7h         ;d11=0
0991 F5D3           1655                                             mov             DAC0H,a
                    1656                                                                             ;мл байт
0993 ED             1657                                             mov             a,r5
0994 F4             1658                                             cpl             a
0995 F5D2           1659                                             mov             DAC0L,a
0997                1660     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1661                                     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    27

                    1662                                             
0997                1663     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1664                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1665                     ;до конца цикла измерения результат не размещать в буфере
                    1666                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1667                     ;и возврату в режим измерения
0997 201456         1668                                             jb              bitvich,rnorvich
099A 201053         1669                                             jb              bitt2,rnorvich
099D 2017EC         1670                                             jb              bitoll,rseeind
                    1671                                             
09A0 2011E9         1672                                             jb              bitmenu,rseeind
09A3 200BE6         1673                                             jb              bitmem,rseeind
                    1674     ;;;;;;;;;;;;;;
                    1675                                             ; mov           r0,#rez_A3
                    1676                                             ;call   resar2
                    1677                                             ;call   ftol                    ;float->int r2..r5
                    1678     ;;;;;;;;
09A6 789C           1679                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
09A8 120000   F     1680                                             call    resar2;????????????????17.01.07
                    1681                                     
09AB 120000   F     1682                                             call    maform
09AE 784F           1683                                             mov             r0,#abin
09B0 120000   F     1684                                             call    saver2
                    1685     ;;;;;;;;
                    1686                                             
09B3 7853           1687                                             mov             r0,#adec
09B5 7952           1688                                             mov             r1,#abin+3      ;hex->10
09B7 120000   F     1689                                             call    bindec
                    1690                                     
09BA 785C           1691                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09BC 7946           1692                                             mov             r1,#bufind+6
09BE 7F07           1693                                             mov             r7,#7
09C0 E6             1694     bufdec:                         mov             a,@r0
09C1 2430           1695                                             add             a,#30h
09C3 F7             1696                                             mov             @r1,a
09C4 19             1697                                             dec             r1
09C5 18             1698                                             dec             r0
09C6 DFF8           1699                                             djnz    r7,bufdec
09C8 7847           1700                                             mov             r0,#bufind+7
09CA 762D           1701                                             mov             @r0,#2dh          ;-2..-9
09CC 7840           1702                                             mov             r0,#bufind
09CE 762B           1703                                             mov             @r0,#2bh
09D0 300202         1704                                             jnb             znmat,nozzmi;bitznak,nozzmi
09D3 762D           1705                                             mov             @r0,#2dh
09D5 79AE           1706     nozzmi:                         mov             r1,#diap
09D7 7848           1707                                             mov             r0,#bufind+8
09D9 E7             1708                                             mov             a,@r1
09DA B40808         1709                                             cjne    a,#8,nodi8
09DD 7630           1710                                             mov             @r0,#30h                 ;10-10
09DF 18             1711                                             dec             r0
09E0 7663           1712                                             mov             @r0,#63h;31h
09E2 08             1713                                             inc             r0
09E3 8012           1714                                             jmp             seegoon
09E5 B4090C         1715     nodi8:                          cjne    a,#9,nodis9
                    1716                                     
09E8 7631           1717                                             mov             @r0,#31h           ;10-11
09EA 18             1718                                             dec             r0
09EB 7663           1719                                             mov             @r0,#63h;31h
                    1720                                     
09ED 08             1721                                             inc             r0
09EE 8007           1722                                             jmp             seegoon
                    1723     
09F0 8079           1724     rnorvich:               jmp             norvich
09F2 8085           1725     rno3parN:               jmp             no3parN
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    28

                    1726     
09F4 2432           1727     nodis9:                         add             a,#32h
09F6 F6             1728                                             mov             @r0,a;#37h;"T";
09F7 08             1729     seegoon:                        inc             r0
09F8 7641           1730                                             mov             @r0,#"A";"E";
09FA 08             1731                                             inc             r0
09FB 7600           1732                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09FD 08             1733                                             inc             r0;             mov             buf
                             ind+11
09FE 7610           1734                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1735                                             
                    1736     ;;;;;;;;;;;;;;;
                    1737     ;;;;;;goonind:
0A00 79AF           1738                                             mov             r1,#parN        ; ??????
0A02 B703ED         1739                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1740             
0A05                1741     seeind:                         ;;;;;;;;;;;;;
0A05 784A           1742                                             mov             r0,#bufind+10
0A07 E6             1743                                             mov             a,@r0
0A08 300F03         1744                                             jnb             bitnul,nnnul
0A0B 4408           1745                                             orl             a,#08h
0A0D F6             1746                                             mov             @r0,a
0A0E 799A           1747      nnnul:         mov             r1,#parT
0A10 B70204         1748                                             cjne    @r1,#2,nsec1
0A13 4420           1749                                             orl             a,#20h    ;1s
0A15 8009           1750                                             jmp             nsec10
0A17 B70104         1751     nsec1:          cjne    @r1,#1,nsec11
0A1A 4440           1752                                             orl             a,#40h                  ;10s
0A1C 8002           1753                                             jmp             nsec10
                    1754                                     
0A1E 4410           1755     nsec11:         orl             a,#10h
                    1756                                                      ;0,1s
                    1757     ;;;;;;;;;;;;;;;;
0A20                1758     nsec10:         
                    1759     
                    1760     
0A20 784A           1761                                             mov             r0,#bufind+10   
0A22 F6             1762                                             mov             @r0,a
0A23 300504         1763                                             jnb             bitavp,nobavp
0A26 4404           1764                                             orl             a,#04           ;bufind+10.2
0A28 F6             1765                                             mov             @r0,a
0A29 F6             1766                                             mov             @r0,a   
0A2A 784A           1767     nobavp:         mov             r0,#bufind+10   
0A2C F6             1768                                             mov             @r0,a   
0A2D 301803         1769                                        jnb          knizm,nobitizm
0A30 4402           1770                                             orl             a,#02
0A32 F6             1771                                              mov            @r0,a
0A33                1772     nobitizm:                       
0A33 301A07         1773                                             jnb             bitakt,notakt
0A36 C21A           1774                                             clr             bitakt
0A38 534AFE         1775                                             anl             bufind+10,#0feh
0A3B 8005           1776                                             jmp             taktind
0A3D D21A           1777     notakt:                         setb    bitakt
0A3F 434A01         1778                                             orl             bufind+10,#01                      
                                          
0A42                1779     taktind:                
                    1780     ;;;;;;;;;
0A42 301517         1781                                             jnb             biteizm,yesind
0A45 79B1           1782                                             mov             r1,#vichR
0A47 7848           1783                                             mov             r0,#bufind+8
0A49 7654           1784                                             mov             @r0,#'T'
0A4B 08             1785                                             inc             r0
0A4C B72104         1786                                             cjne    @r1,#21h,test9i
0A4F 7631           1787                                             mov             @r0,#31h;11A
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    29

                    1788                                     ;       dec             r0
                    1789                                     ;       mov             @r0,#63h
0A51 8009           1790                                             jmp             yesind
0A53 B72204         1791     test9i:         cjne    @r1,#22h,test7i
0A56 7632           1792                                             mov             @r0,#32h;39h;09A
0A58 8002           1793                                             jmp             yesind
0A5A 7633           1794     test7i:         mov             @r0,#33h;37h;07A
                    1795     ;;;;;;;;;
0A5C                1796     yesind:         
0A5C 301203         1797                                             jnb             bitklb,noklb
0A5F 434A80         1798                                             orl             bufind+10,#80h; on kmp
0A62 300A03         1799     noklb:          jnb             bitbon,nobuf
0A65 434B02         1800                                             orl             bufind+11,#02h; on pysk
0A68 120000   F     1801     nobuf:          call    ind        ;пп выдачи на индикатор
0A6B                1802     norvich: 
0A6B 789A           1803                                     mov             r0,# parT
0A6D 79AC           1804                                             mov             r1,#chind
0A6F B60152         1805                                             cjne    @r0,#1,rnot1in
0A72                1806     labelB:                    ;;;;;;;;;;;
                    1807                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A72 789F           1808                                                     mov     r0,#rez_A3+3
                    1809                             ;;;;;;;;
0A74 79BB           1810                             mov             r1,#work+3
0A76 E6             1811                             mov             a,@r0
0A77 7F07           1812                             mov             r7,#7;кол сдв вправо
0A79 C3             1813     dvig3:          clr             c
0A7A 13             1814                             rrc             a
0A7B DFFC           1815                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A7D FA             1816                             mov             r2,a    ;сохр байт
0A7E 18             1817                             dec             r0              ;rez_A3+2
0A7F E6             1818                             mov             a,@r0
0A80 C0E0           1819                             push    acc
0A82 C3             1820                             clr             c
0A83 7F01           1821                             mov             r7,#1
0A85 C3             1822     dvig2:          clr             c
0A86 33             1823                             rlc             a
0A87 DFFC           1824                             djnz    r7,dvig2 ;d12..d11       средний байт
0A89 4A             1825                             orl             a,r2
0A8A F7             1826                             mov             @r1,a;сформ мл байт
0A8B 19             1827                             dec             r1
0A8C D0E0           1828                             pop             acc
                    1829                             
0A8E 7F07           1830                             mov             r7,#7
0A90 C3             1831     dvig1:          clr             c
0A91 13             1832                             rrc             a
0A92 DFFC           1833                             djnz    r7,dvig1 ;d18     ср байт
0A94 FA             1834                             mov             r2,a   ;сохр
0A95 18             1835                             dec             r0
0A96 E6             1836                             mov             a,@r0 ;rez_A3+1
0A97 C0E0           1837                             push    acc
                    1838                     
0A99 7F01           1839                             mov             r7,#1
0A9B C3             1840     dvig0:          clr             c
0A9C 33             1841                             rlc             a
0A9D DFFC           1842                             djnz    r7,dvig0 ;        d21..d16
0A9F 4A             1843                             orl             a,r2
0AA0 F7             1844                             mov             @r1,a   ; сформ средний  байт
0AA1 19             1845                             dec             r1
0AA2 D0E0           1846                             pop             acc       ;rez_A3+1
                    1847                             ;;;;;;;;;;;;;;
                    1848     ;                       jb              acc.7,dvm
0AA4 C3             1849                             clr             c
0AA5 7F07           1850                             mov             r7,#7
0AA7 C3             1851     dvig4:          clr             c
0AA8 13             1852                             rrc             a
0AA9 DFFC           1853                             djnz    r7,dvig4 ;        d22
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    30

0AAB FA             1854                             mov             r2,a   ;сохр
0AAC 18             1855                             dec             r0;     rez_A3
0AAD E6             1856                             mov             a,@r0
                    1857                             ;;;;;
0AAE 7F01           1858                             mov             r7,#1
0AB0 C3             1859     vig0:           clr             c
0AB1 33             1860                             rlc             a
0AB2 DFFC           1861                             djnz    r7,vig0 ;         d24..d30
0AB4 4A             1862                             orl             a,r2
0AB5 F7             1863                             mov             @r1,a   ; сформ   байт
0AB6 19             1864                             dec             r1
0AB7 E6             1865                             mov             a,@r0
                    1866                             ;;;;;
0AB8 20E70C         1867                             jb              acc.7,dvm
0ABB C3             1868                             clr             c
0ABC 7F07           1869                             mov             r7,#7
0ABE C3             1870     vig4:           clr             c
0ABF 13             1871                             rrc             a
0AC0 DFFC           1872                             djnz    r7,vig4 ;         d
0AC2 8009           1873                             jmp             endsdv
                    1874     
0AC4 020000   F     1875     rnot1in:                jmp             not1in
                    1876     
                    1877     ;;;;;;;;;;;;                                    
0AC7 7F07           1878     dvm:            mov             r7,#7
0AC9 D3             1879     dvig6:          setb            c
0ACA 13             1880                             rrc             a
0ACB DFFC           1881                             djnz    r7,dvig6 ;        d31
0ACD F7             1882     endsdv:         mov             @r1,a
                    1883                                                             
                    1884      ;->work   
                    1885                             
0ACE 900000   F     1886                             mov             dptr,#chzap
0AD1 120000   F     1887                             call     ldc_long
0AD4 78BB           1888                              mov            r0,#work+3
0AD6 120000   F     1889                             call    ladd
0AD9 ED             1890                             mov             a,r5
0ADA F5D5           1891                             mov             DAC1L,a
                    1892                             
0ADC EC             1893                             mov             a,r4
0ADD F5D6           1894                             mov             DAC1H,a
                    1895     
                    1896                                             ;;;;;;;;;;
0ADF 78CF           1897                                             mov                     r0,#chbuf       
0AE1 120000   F     1898                                             call            resar2  
0AE4 900000   F     1899                                             mov                     dptr,#ch_1       
0AE7 120000   F     1900                                             call            ldc_ltemp
0AEA 1201D1         1901                                             call            flsub
0AED 78CF           1902                                             mov                     r0,#chbuf       
0AEF 120000   F     1903                                             call            saver2  
0AF2 900000   F     1904                                             mov                     dptr,#ch_1
0AF5 120000   F     1905                                             call            ldc_ltemp
0AF8 1201D6         1906                                             call            flcmp
                    1907                                             
                    1908                                             
                    1909                                             
0AFB 5009           1910                                             jnc                     rnobuf0
0AFD 200909         1911                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0B00 200A08         1912                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B03 020000   F     1913                                             jmp             gocikle
0B06 020000   F     1914     rnobuf0:        jmp             nobuf0
0B09                1915     yesprd: ;передать   A3 в буфер
0B09 8035           1916                                             jmp             goonT
0B0B                1917     yesbuf:         ;записать   A3 в буфер
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    31

0B0B 120000   F     1918                                             call            resa_hl;dptr-
0B0E 120000   F     1919                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1920                                                                             ;в ячейке saven_bl
0B11 120000   F     1921                                             call            save_hl
0B14 78AE           1922                                             mov                     r0,#diap
0B16 E6             1923                                             mov                     a,@r0
0B17 7938           1924                                             mov                     r1,#nblok
0B19 B70104         1925                                             cjne            @r1,#1,nosav1
0B1C F534           1926                                             mov                     sadiap,a
0B1E 8012           1927                                             jmp                     gotostrob
0B20 B70204         1928     nosav1:         cjne            @r1,#2,nosav2
0B23 F532           1929                                             mov                     sadiap2,a
0B25 800B           1930                                     jmp                     gotostrob
0B27 B70304         1931     nosav2:         cjne            @r1,#3,nosav3
0B2A F531           1932                                             mov                     sadiap3,a
0B2C 8004           1933                                     jmp                     gotostrob
0B2E                1934     nosav3:         
0B2E F530           1935                                             mov                     sadiap4,a
0B30 8000           1936                                     jmp                     gotostrob
                    1937     
                    1938                                             ;строб
0B32                1939     gotostrob:
0B32 E586           1940                                     mov             a,P6            ;p6.4=0
0B34 54EF           1941                             anl             a,#0efh
0B36 F586           1942                             mov             P6,a
0B38 00             1943                             nop
0B39 00             1944                             nop
                    1945                                     
0B3A E586           1946                             mov             a,P6                    ;p6.4=1 
0B3C 4410           1947                             orl             a,#10h
0B3E F586           1948                             mov             P6,a                        
0B40 78CD           1949     goonT:                          mov             r0,#interva;high  byte loadr2
0B42 E6             1950                                             mov             a,@r0
0B43 FC             1951                                             mov             r4,a
0B44 08             1952                                             inc             r0
0B45 E6             1953                                             mov             a,@r0
0B46 FD             1954                                             mov             r5,a
0B47 E4             1955                                             clr             a
0B48 FB             1956                                             mov             r3,a
0B49 FA             1957                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B4A 120402         1958                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1959     
0B4D 789A           1960                                                                             mov             r0,
                             #parT
0B4F B60110         1961                                                                     cjne    @r0,#1,nott1
                    1962                                     
0B52 900000   F     1963                                     mov                     dptr,#ch_2       
0B55 120000   F     1964                                     call            ldc_ltemp
0B58 120203         1965     intmul: call            flmul
0B5B 78CF           1966     intmul1:mov                     r0,#chbuf
0B5D 120000   F     1967                                     call            saver2          ;*2
0B60 803D           1968                                     jmp             gocikle
                    1969     
0B62 B60208         1970     nott1:                  cjne    @r0,#2,nott2
0B65 900000   F     1971                                                     mov                     dptr,#ch_10      
0B68 120000   F     1972                                     call            ldc_ltemp
0B6B 80EB           1973                                     jmp                     intmul                             
                                  ;*10
                    1974     
0B6D B60308         1975     nott2:                  cjne    @r0,#3,nott3
0B70 900000   F     1976                                                     mov                     dptr,#ch_2       
0B73 120000   F     1977                                     call            ldc_ltemp
0B76 80E0           1978                                     jmp                     intmul                             
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    32

                                  ;*2
                    1979     
                    1980     
0B78 B60411         1981     nott3:          cjne    @r0,#4,nott4
0B7B 900000   F     1982                                             mov                     dptr,#ch_10      
0B7E 120000   F     1983                                             call            ldc_ltemp       ;/10*4
0B81 1202B7         1984                                             call            fldiv
0B84 900000   F     1985                                             mov                     dptr,#ch_4       
0B87 120000   F     1986                                             call            ldc_ltemp
0B8A 80CC           1987                                             jmp             intmul
                    1988     
0B8C B60508         1989     nott4:          cjne    @r0,#5,nott5
0B8F 900000   F     1990                                                     mov                     dptr,#ch_2       
0B92 120000   F     1991                                             call            ldc_ltemp;*2
0B95 80C1           1992                                             jmp             intmul;T=5
0B97 900000   F     1993     nott5:                  mov                     dptr,#ch_1       
0B9A 120000   F     1994                                     call            ldc_ltemp
0B9D 80B9           1995                                     jmp                     intmul                             
                                  ;*1
                    1996     
                    1997     
0B9F 300708         1998     gocikle:        jnb             bitzus,nofz                     
0BA2 120000   F     1999                             call    z_05s    ;0,5c
0BA5 120000   F     2000                             call    z_05s    ;0,5c
0BA8 C207           2001                             clr     bitzus;bitbuf бит задержки засылки us
0BAA 020000   F     2002     nofz:           jmp     labelA;rebyte
                    2003     
                    2004     
0BAD 80F0           2005     yestt5:         jmp             gocikle
                    2006     
0BAF 78CF           2007     nobuf0:                         mov             r0,#chbuf
0BB1 120000   F     2008                                                             call            resar2
0BB4 900000   F     2009                                                                     mov                     dpt
                             r,#ch_1       
0BB7 120000   F     2010                                     call            ldc_ltemp
0BBA 1201D1         2011                                     call            flsub
0BBD 80E0           2012                                             jmp             gocikle
                    2013     
                    2014     
0BBF B60205         2015     not1in:                         cjne    @r0,#2,not2in
0BC2 7701           2016                                             mov             @r1,#1           ;T=2
0BC4 020000   F     2017                                             jmp     labelB
                    2018     
0BC7 B60305         2019     not2in:                         cjne    @r0,#3,not3in
0BCA 7701           2020                                             mov             @r1,#1;9                ;T=3
0BCC 020000   F     2021                                             jmp     labelB
0BCF 7703           2022     not3in:                         mov             @r1,#3;19
0BD1 020000   F     2023                                             jmp     labelB
                    2024     
                    2025     
                    2026     ;;;;;;;;;;;3.11.06
                    2027     
                    2028     ;;коррекция 0
0BD4 7883           2029     KORnul:         mov             r0,#chdel
0BD6 B60010         2030                             cjne    @r0,#0,nonuldel
                    2031                                     
0BD9 E584           2032                             mov             a,p4                    ;сохр  us
0BDB F536           2033                             mov             saus,a
0BDD E585           2034                             mov             a,p5
0BDF F537           2035                             mov             saus+1,a
                    2036     
0BE1 900000   F     2037                             mov             dptr,#kor0us
0BE4 120000   F     2038                             call    lospus          ;упр слово коррекции 0
0BE7 8018           2039                             jmp             chdelmo
                    2040     
0BE9                2041     nonuldel:       ;cjne   @r0,#7,no4del
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    33

0BE9 B6031B         2042                                                     cjne    @r0,#3,no4del
                    2043                             ;рез ->AN
0BEC 7862           2044                             mov             r0,#rez_A;->r2..r5
0BEE 120000   F     2045                             call    resar2
                    2046             
                    2047                                     ;;;;;;;;;;
0BF1 120402         2048                             call    altof           ;r2..r5->float
0BF4 7884           2049                             mov             r0,#kor0_AN;->kor0_AN
0BF6 120000   F     2050                             call    saver2
                    2051                                     
0BF9 E536           2052                             mov             a,saus                  ;восстан исходное упр слово
0BFB F584           2053                             mov             p4,a
0BFD E537           2054                             mov             a,saus+1
0BFF F585           2055                             mov             p5,a            
0C01 7883           2056     chdelmo:        mov             r0,#chdel
0C03 06             2057                             inc             @r0             ;chdel+1
0C04 020000   F     2058                             jmp              rebyte
                    2059     
0C07                2060     no4del:         ;cjne   @r0,#14,chdelmo
0C07 B606F7         2061                                             cjne    @r0,#6,chdelmo
0C0A 7600           2062                             mov             @r0,#0          ;chdel
0C0C 7898           2063                             mov             r0,#chinkor
0C0E 7600           2064                             mov             @r0,#00;1;00;02;600;
0C10 08             2065                             inc             r0
0C11 76C8           2066                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0C13 120000   F     2067                             call    clmassix;сбросить массив скольз среднего
0C16 020000   F     2068                             jmp              rebyte
                    2069     
                    2070     ;автокалибровка
0C19                2071     autoka:  ;;  mov                r0,#chavt
                    2072                      ;;  call               chcmp
                    2073                      ;;  jz         nulavt
                    2074                     ;;   mov                r1,#chavt
                    2075                     ;;   call               chdec;chavt-1
                    2076                      ;; jmp         rebyte
0C19                2077     nulavt:  ;;;;;
0C19 7883           2078                             mov             r0,#chdel
0C1B B60016         2079                             cjne    @r0,#0,nndelch
0C1E E584           2080                             mov             a,p4                    ;сохр  us
0C20 F536           2081                             mov             saus,a
0C22 E585           2082                             mov             a,p5
0C24 F537           2083                             mov             saus+1,a
                    2084     
0C26 E585           2085                             mov   a,p5
0C28 4404           2086                             orl             a,#04              ;p5.2=1
0C2A 00             2087                             nop
0C2B 00             2088                             nop
0C2C 543F           2089                             anl             a,#3fh          ;p5.6,p5.7=0
0C2E F585           2090                             mov   p5,a
0C30 06             2091                             inc             @r0
0C31 020000   F     2092                             jmp              rebyte
                    2093     
0C34 B6033D         2094     nndelch:        cjne    @r0,#3,n4delch
                    2095                             ;pez->A+
                    2096                             ;K+=000/(A+-AN)
                    2097                             ;mov            r0,#rez_A;->r2..r5
                    2098                             ;call   resar2
0C37 E577           2099                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C39 FA             2100                                     mov             r2,a
0C3A E578           2101                                     mov             a,reacp+1
0C3C FB             2102                                     mov             r3,a
0C3D E579           2103                                     mov             a,reacp+2
0C3F FC             2104                                     mov             r4,a
0C40 E57A           2105                                     mov             a,reacp+3
0C42 FD             2106                                     mov             r5,a
                    2107                                     ;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    34

0C43 120402         2108                             call    altof                   ;r2..r5->float
0C46 7888           2109                             mov             r0,#rezAp;->rezAp
0C48 120000   F     2110                             call    saver2                          
0C4B 7884           2111                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0C4D 120000   F     2112                             call    resar8                          
0C50 1201D1         2113                             call    flsub           ; r2..r5(A+-AN)
0C53 120000   F     2114                             call    move28     ;r2..r5->r8..r11
0C56 900000   F     2115                             mov             dptr,#CH2tho;000->r2..r5 float
0C59 120000   F     2116                             call    ldc_long                
0C5C 1202B7         2117                             call    fldiv
0C5F EA             2118                             mov             a,r2
0C60 547F           2119                             anl             a,#7fh
0C62 FA             2120                             mov             r2,a
0C63 7890           2121                             mov             r0,#koefKp;->koefKp
0C65 120000   F     2122                             call    saver2
                    2123                       
                    2124                     ;       anl             P5,#0feh                ;p5.0=0 
0C68 E585           2125                     mov             a,P5
0C6A 543B           2126                             anl             a,#3bh;acp-
0C6C F585           2127                             mov             P5,a
0C6E 7883           2128                             mov             r0,#chdel
0C70 06             2129                             inc             @r0                       ;ch+1
0C71 020000   F     2130                             jmp             rebyte
                    2131     
0C74 B6063F         2132     n4delch:        cjne    @r0,#6,n8delch
                    2133                             ; pez->A-
                    2134                             ;K-=000/(A--AN)
                    2135                     ;       mov     r0,#rez_A;->r2..r5
                    2136                     ;       call    resar2
0C77 E577           2137                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C79 FA             2138                                     mov             r2,a
0C7A E578           2139                                     mov             a,reacp+1
0C7C FB             2140                                     mov             r3,a
0C7D E579           2141                                     mov             a,reacp+2
0C7F FC             2142                                     mov             r4,a
0C80 E57A           2143                                     mov             a,reacp+3
0C82 FD             2144                                     mov             r5,a
                    2145                                     ;;;;;;;;;;;;;;;
0C83 120402         2146                             call    altof                   ;r2..r5->float
0C86 788C           2147                             mov             r0,#rezAm;->rezAm
0C88 120000   F     2148                             call    saver2                          
0C8B 7884           2149                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0C8D 120000   F     2150                             call    resar8                          
0C90 1201D1         2151                             call    flsub                   ; r2..r5(A--AN)
0C93 120000   F     2152                             call    move28                  ;r2..r5->r8..r11
0C96 900000   F     2153                             mov             dptr,#CH2tho    ;000->r2..r5 float
0C99 120000   F     2154                             call    ldc_long                
0C9C 1202B7         2155                             call    fldiv
0C9F EA             2156                             mov             a,r2
0CA0 547F           2157                             anl             a,#7fh
0CA2 FA             2158                             mov             r2,a
0CA3 7894           2159                             mov             r0,#koefKm;->koefKm
0CA5 120000   F     2160                             call    saver2
                    2161                        
0CA8 E536           2162                             mov             a,saus                  ;восстан исходное упр слово
0CAA F584           2163                             mov             p4,a
0CAC E537           2164                             mov             a,saus+1
0CAE F585           2165                             mov             p5,a            
0CB0 7883           2166                             mov             r0,#chdel
0CB2 06             2167                             inc             @r0                       ;ch+1
0CB3 020000   F     2168                        jmp    rebyte
                    2169     
0CB6 B6090F         2170     n8delch:        cjne    @r0,#9,n12delch
0CB9 7600           2171                             mov             @r0,#0
0CBB 7981           2172                             mov             r1,#chavt
0CBD 770C           2173                             mov             @r1,#0ch;6;1;
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    35

0CBF 09             2174                             inc             r1
0CC0 7780           2175                             mov             @r1,#80h;40h;
0CC2 120000   F     2176                             call   clmassix     ;сбросить массив среднего
0CC5 020000   F     2177                             jmp             rebyte
0CC8 06             2178     n12delch:       inc             @r0
0CC9 020000   F     2179                             jmp             rebyte
                    2180     
                    2181     
                    2182     
                    2183                                 
0CCC 020000   F     2184     rout6:          jmp             out6
0CCF 020000   F     2185     rlabelF:        jmp             labelF  
0CD2 020000   F     2186     rknrazr:        jmp             knrazr  
0CD5 020000   F     2187     rknopt:         jmp             knopt
0CD8 020000   F     2188     rizman:         jmp             izman   
0CDB                2189     keyb1:  ;IE6 
0CDB 75E700         2190                                     mov             EIE2,#00H
0CDE 75AD00         2191                                     mov             P3IF,#00
                    2192                                     
0CE1 C0E0           2193                                     push    acc
0CE3 C0D0           2194                                     push    psw
0CE5 C000           2195                                     push    rr0
0CE7 C001           2196                                     push    rr1
0CE9 C002           2197                                     push    rr2
0CEB C003           2198                                     push    rr3
0CED C004           2199                                     push    rr4
0CEF C005           2200                                     push    rr5
0CF1 C006           2201                                     push    rr6
0CF3 C007           2202                                     push    rr7
                    2203                                     ;clr            bitmig
                    2204                       ;;;;;;;;;;;;;;
0CF5 120000   F     2205                                     call    z_01s;0,1s
0CF8 120000   F     2206                                             call    z_01s
                    2207                                     ;восстан знакоместо при мигании
                    2208                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0CFB 78B2           2209                                     mov             r0,#marker
0CFD 7440           2210                                     mov             a,#bufind
0CFF 26             2211                                     add             a,@r0                   ;a=bufind+marker
0D00 F9             2212                                     mov             r1,a
0D01 A73C           2213                                     mov             @r1,savba
                    2214                                     ;;;;;;;;;;;
0D03 E5B0           2215                             mov             a,p3
0D05 20E644         2216                                     jb              acc.6,outviR;выход из режима выч R
0D08 E5B0           2217     gout6:                          mov             a,p3
0D0A 44FF           2218                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0D0C F5B0           2219                                     mov             p3,a
0D0E E5B0           2220                                     mov             a,p3
0D10 30E6B9         2221                                     jnb             acc.6,rout6             ;error
0D13 3004B9         2222                                     jnb             bitizm,rlabelF
0D16 75B0FE         2223                                     mov             p3,#0feh                ;реж IZM
0D19 E5B0           2224                                     mov             a,p3
0D1B 30E6BA         2225                                     jnb             acc.6,rizman
                    2226                                     ;;;;;;
0D1E 201232         2227                                     jb              bitklb,goklb
0D21 75B0FD         2228                                     mov             p3,#0fdh
0D24 E5B0           2229                                     mov             a,p3
0D26 30E6A9         2230                                     jnb             acc.6,rknrazr             ;labelC
0D29 75B0FB         2231                                     mov             p3,#0fbh
0D2C E5B0           2232                                     mov             a,p3
0D2E 30E655         2233                                     jnb             acc.6,knright           ;->
0D31 75B0F7         2234                                     mov             p3,#0f7h
0D34 E5B0           2235                                     mov             a,p3
0D36 30E69C         2236                                     jnb             acc.6,rknopt                    ;T
0D39 75B0EF         2237                                     mov             p3,#0efh
0D3C E5B0           2238                                mov          a,p3
0D3E 30E615         2239                                     jnb             acc.6,pyskst                    ;pysk/stop
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    36

0D41 75B0DF         2240                                     mov             p3,#0dfh
0D44 E5B0           2241                                     mov             a,p3
0D46 30E65C         2242                                jnb          acc.6,knvich
0D49 020000   F     2243                                     jmp             izmpaT
                    2244     
0D4C 3006B9         2245     outviR: jnb             bitvi11,gout6   
0D4F C214           2246                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0D51 C206           2247                                     clr             bitvi11
                    2248                                     
0D53 020000   F     2249     goklb:          jmp             out6
                    2250     
0D56 200A12         2251     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0D59 D20A           2252                                     setb    bitbon  ;уст реж буфер вкл
0D5B 79D5           2253                                     mov                     r1,#volume;work         ;обьем блок
                             а
0D5D 7700           2254                                     mov                     @r1,#00
0D5F 09             2255                                     inc                     r1
0D60 77C7           2256                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0D62 434B02         2257                                     orl             bufind+11,#02h; on pysk
0D65 120000   F     2258                                     call            ind
0D68 020000   F     2259                                     jmp             izmpaT
0D6B C20A           2260     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D6D 534BFD         2261                                             anl             bufind+11,#0fdh; off pysk
0D70 120000   F     2262                                             call    ind
0D73 020000   F     2263                                     jmp             izmpaT
                    2264     
0D76 79B0           2265     tizmri:                 mov             r1,#level
0D78 B70102         2266                                     cjne    @r1,#1,right2
                    2267                                     ;10s->HET
0D7B 8004           2268                                     jmp             right3
                    2269     
0D7D 07             2270     right2:                 inc             @r1
0D7E 120000   F     2271                                     call    lolevT
                    2272                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D81 120000   F     2273     right3:                 call    ind
0D84 8078           2274                                     jmp             izmfun
                    2275     
                    2276                             
                    2277                             
0D86                2278     knright:        
                    2279     
0D86 79AE           2280                                     mov             r1,#diap
                    2281                             ;перекл диапазон 1 поз вверх сбр массив
0D88 17             2282                                     dec             @r1
0D89 B7FF04         2283                                     cjne    @r1,#0ffh,diinc
0D8C 7700           2284                                     mov             @r1,#0
0D8E 806E           2285                                     jmp  izmfun
0D90 120000   F     2286     diinc:                  call     clmassix
0D93 78B3           2287                                     mov             r0,#summa
0D95 120000   F     2288                                     call    clear4
0D98 786A           2289                                     mov             r0,#rez_A0
0D9A 120000   F     2290                                     call    clear4  
0D9D 120000   F     2291                                     call    loadUS
0DA0 805C           2292                                      jmp  izmfun
                    2293     
0DA2 020000   F     2294     vit2_10:                jmp             out6
0DA5                2295     knvich:                 ;12.02.07
0DA5 789A           2296                                             mov                     r0,#parT
0DA7 C3             2297                                             clr                     c
0DA8 7404           2298                                             mov                     a,#4 
0DAA 96             2299                                             subb            a,@r0
0DAB 40F5           2300                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0DAD 200613         2301                               jb            bitvi11,onvich
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    37

0DB0 C204           2302                                     clr             bitizm
0DB2 D214           2303                                     setb    bitvich
                    2304                                     
0DB4 78B1           2305                                     mov             r0,#vichR
0DB6 7611           2306                                     mov             @r0,#11h;;????????or 0
                    2307                                     ;ВЫЧИСЛИТЬ
0DB8 900000   F     2308                                     mov     dptr,#teVICH
0DBB 120000   F     2309                                     call    lotext
0DBE 120000   F     2310                                call         z_1s;;;;;;;
0DC1 806C           2311                                     jmp              viout;izmpaT
                    2312     
0DC3 C214           2313     onvich:                 clr             bitvich
0DC5 78B1           2314                                     mov             r0,#vichR
0DC7 7600           2315                                     mov             @r0,#0
0DC9 8037           2316                                     jmp              izmpaT
                    2317     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0DCB 301820         2318     louizm:            jnb          knizm,lou
0DCE 79AE           2319                                     mov             r1,#diap
0DD0 C3             2320                                     clr             c
0DD1 7403           2321                                     mov             a,#3
0DD3 97             2322                                     subb    a,@r1
0DD4 5006           2323                                     jnc             lldi23    ;10-2..10-5
                    2324                                     ;10-6..10-11
0DD6 E584           2325                                     mov             a,p4
0DD8 54F7           2326                                     anl             a,#0f7h   ;d3
0DDA F584           2327                                     mov             p4,a
0DDC E7             2328     lldi23:                 mov             a,@r1
0DDD 6403           2329                                     xrl             a,#3
0DDF 7002           2330                                     jnz             lldi3
0DE1 8005           2331                                     jmp             lldi2   ;10-5
0DE3 E7             2332     lldi3:                  mov             a,@r1
0DE4 6402           2333                                     xrl             a,#2            ;
0DE6 7006           2334                                     jnz             lou             
0DE8 E585           2335     lldi2:                  mov             a,p5            ;10-4
0DEA 4408           2336                                     orl             a,#08
0DEC F585           2337                                     mov             p5,a
0DEE 22             2338     lou:                    ret
                    2339                               ;;;;;;
0DEF 201807         2340     izman:                  jb              knizm,knizmon
0DF2 D218           2341                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2342                             ;       d3(k5 p4),d3(u5 p5)заслать us
0DF4 120000   F     2343                                     call    louizm 
0DF7 8005           2344                                     jmp             izmfun
0DF9 C218           2345     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0DFB 120000   F     2346                                     call    loadUS;восстановить us
0DFE                2347     izmfun:                 
0DFE D207           2348                                     setb    bitzus;bitbuf
0E00 8000           2349                                     jmp             labelE;;;;;;;;;;;;
                    2350                                     ;;;;;;;;;;;;;;
0E02                2351     izmpaT:
                    2352     ;;;;;;;;;;;;;;;;;
                    2353                     ;       clr             c 
                    2354                     ;       mov             r1,#parN
                    2355     
                    2356                     ;       mov             r0,#diap
                    2357                     ;       mov             a,#6            
                    2358                     ;       subb    a,@r0
                    2359                     ;       jnc             labelE          ;         ;10-2..10-8
                    2360                               
                    2361                     ;       mov             @r1,#2          ;10-9..10-11            
                    2362                     ;       jmp             labelE
                    2363     
                    2364     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0E02 789A           2365     labelE:                 mov             r0,#parT
0E04 793D           2366                                     mov             r1,#chkl
0E06 B60108         2367                                     cjne    @r0,#1,izmt2
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    38

0E09 7700           2368                                     mov             @r1,#0
0E0B 09             2369                                     inc             r1
0E0C 7702           2370                                     mov             @r1,#2
0E0E 020000   F     2371                                     jmp             out6
0E11 B60208         2372     izmt2:                  cjne    @r0,#2,izmt3
0E14 7700           2373                                     mov             @r1,#0
0E16 09             2374                                     inc             r1
0E17 7714           2375                                     mov             @r1,#20
0E19 020000   F     2376                                     jmp             out6
                    2377     
0E1C 7700           2378     izmt3:                  mov             @r1,#0
0E1E 09             2379                                     inc             r1
0E1F 77C8           2380                                     mov             @r1,#200
0E21 020000   F     2381                                     jmp             out6
                    2382     
                    2383     
                    2384     
                    2385     
0E24                2386     knopt: ;кнопка T
0E24 C204           2387                                clr          bitizm
0E26 D210           2388                                setb         bitt2
0E28 79B7           2389                                mov          r1,#load
0E2A 7704           2390                                mov          @r1,#4;1s
0E2C 120000   F     2391                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2392                     
0E2F 793D           2393     viout:          mov             r1,#chkl
0E31 7703           2394                             mov             @r1,#03
0E33 09             2395                             inc             r1
0E34 77E8           2396                             mov             @r1,#0e8h               ;1000
0E36 020000   F     2397                             jmp             out6
                    2398     
0E39                2399     knrazr:          
0E39 C3             2400     labelC:          clr            c
0E3A 78AF           2401                             mov             r0,#parN
0E3C 799A           2402                             mov             r1,#parT
0E3E 7402           2403                             mov             a,#2
0E40 97             2404                             subb    a,@r1
0E41 40BF           2405                             jc              labelE          ;T>2
0E43 B60104         2406                             cjne    @r0,#1,noN1c
0E46 7602           2407                             mov             @r0,#2          ;N=2
0E48 80B8           2408                             jmp             labelE
                    2409     
0E4A B60204         2410     noN1c:          cjne    @r0,#2,not_1
0E4D 7603           2411                             mov             @r0,#3          ;N=3      ;10-2..10-8
0E4F 80B1           2412                             jmp             labelE
                    2413     
0E51                2414     not_10: 
0E51 7601           2415     not_1:          mov             @r0,#1                          ;N=1
0E53 80AD           2416                             jmp     labelE
                    2417     
0E55 020000   F     2418     rtizmri:        jmp             tizmri
                    2419     
0E58 75B0F7         2420     ttout:          mov             p3,#0f7h
0E5B 20B6D1         2421                                             jb              p3.6,viout
0E5E D204           2422                                             setb    bitizm;отжатие кнопки t
0E60 C210           2423                                             clr             bitt2
0E62 809E           2424                                             jmp             labelE
0E64                2425     labelf:                 
0E64 301037         2426                             jnb             bitt2,nofizm
0E67 75B0FB         2427                        mov          p3,#0fbh
0E6A E5B0           2428                        mov          a,p3
0E6C 20E6E9         2429                        jb           acc.6,ttout;outF
0E6F 79B7           2430                        mov          r1,#load;parT
0E71 B70503         2431                        cjne         @r1,#5,noft1
                    2432                        ;t=10s
0E74 020000   F     2433                        jmp          out6;ft1izm
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    39

                    2434     
0E77 07             2435     noft1:     inc          @r1;dec         @r1
0E78 120000   F     2436     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2437                             ;call   ind
0E7B 020000   F     2438                     jmp             out6;??????????????/
                    2439     
                    2440                             ;увеличить счетчик задержки клавиатуры
0E7E 783D           2441     outF:           mov             r0,#chkl
0E80 7627           2442                             mov             @r0,#27h
0E82 08             2443                             inc             r0
0E83 7610           2444                             mov             @r0,#10h
0E85 020000   F     2445                             jmp             out6;out7
                    2446     
0E88 020000   F     2447     noviR1:         jmp             noviR
0E8B 78B1           2448     outvich:        mov                     r0,#vichR
0E8D 7600           2449                                             mov                     @r0,#0
0E8F C214           2450                                             clr                     bitvich
0E91 C206           2451                                             clr                     bitvi11
0E93 C211           2452                                             clr                     bitmenu
0E95 D204           2453                                             setb            bitizm
0E97 78B2           2454                                             mov                     r0,#marker
0E99 76FF           2455                                             mov                     @r0,#0ffh
0E9B 020000   F     2456                                             jmp                     out6    
                    2457     
0E9E 3014E7         2458     nofizm:         jnb             bitvich,noviR1
0EA1 75B0DF         2459                                                     mov             p3,#0dfh
0EA4 30B6E4         2460                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0EA7 78B1           2461                             mov             r0,#vichR
0EA9 B61110         2462                             cjne    @r0,#11h,no11v6
0EAC 75B0FB         2463                             mov                     p3,#0fbh;->
0EAF 20B6CC         2464                             jb                      p3.6,outF
0EB2 7612           2465                             mov             @r0,#12h                ;11= вычислить
0EB4 900000   F     2466     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0EB7 120000   F     2467                             call    lotext
0EBA 80C2           2468                             jmp             outF
                    2469             
0EBC B61210         2470     no11v6:         cjne    @r0,#12h,no12v6
0EBF 75B0FB         2471                             mov             p3,#0fbh;->
0EC2 20B6B9         2472                             jb              p3.6,outF
0EC5 7613           2473                             mov             @r0,#13h
0EC7 900000   F     2474                             mov             dptr,#teOUT
0ECA 120000   F     2475                             call    lotext
0ECD 80AF           2476                             jmp             outF
                    2477                     
0ECF B61310         2478     no12v6:         cjne    @r0,#13h,no13v6
0ED2 75B0FB         2479                                                     mov             p3,#0fbh;->
0ED5 20B6A6         2480                             jb              p3.6,outF
0ED8 7611           2481                             mov             @r0,#11h
0EDA 900000   F     2482                             mov             dptr,#teVICH
0EDD 120000   F     2483                             call    lotext
0EE0 809C           2484                             jmp             outF
                    2485     
                    2486     ;кн -> A= 0000
                    2487     ;кн -> B= +00000
0EE2 75B0FB         2488     no13v6:         mov             p3,#0fbh
0EE5 E5B0           2489                             mov             a,p3
0EE7 20E635         2490                             jb              acc.6,chanZ
0EEA E53B           2491                             mov             a,movrig
0EEC B40714         2492                             cjne    a,#7,kon_B      
0EEF 78B2           2493                             mov             r0,#marker      ;A= 0000
0EF1 B60716         2494                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0EF4 E53A           2495     rikn:           mov             a,movleft
0EF6 F6             2496                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2497     ;                               29.12.06
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    40

                    2498     ;;;;;;;;;;;;;;;;;;
                    2499     ;необходимо не портить цифру в следуюем справа знакоместе
                    2500     ;т е сохранить ее в ячейке для мигания в противном случае
                    2501     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2502     ;       знакоместа
0EF7 78B2           2503                                     mov             r0,#marker
0EF9 7440           2504                                     mov             a,#bufind
0EFB 26             2505                                             add             a,@r0                   ;a=bufind+m
                             arker
0EFC F9             2506                                             mov             r1,a
0EFD 09             2507                                             inc             r1
0EFE 873C           2508                                             mov             savba,@r1
0F00 020000   F     2509                                     jmp             outF
                    2510     
0F03 78B2           2511     kon_B:          mov             r0,#marker      ;B= +00000
0F05 B60802         2512                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0F08 80EA           2513                                             jmp             rikn
0F0A                2514     mark0_8:
                    2515     ;                               29.12.06
                    2516     ;;;;;;;;;;;;;;;;;;
                    2517     ;необходимо не портить цифру в следуюем справа знакоместе
                    2518     ;т е сохранить ее в ячейке для мигания в противном случае
                    2519     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2520     ;       знакоместа ->B=+00000
0F0A 78B2           2521                                             mov             r0,#marker
0F0C 7440           2522                                     mov             a,#bufind
0F0E 26             2523                                             add             a,@r0                   ;a=bufind+m
                             arker
0F0F F9             2524                                             mov             r1,a
0F10 09             2525                                             inc             r1
0F11 873C           2526                                             mov             savba,@r1
0F13 78B2           2527                             mov             r0,#marker
0F15 06             2528                             inc             @r0             ;       сдвинуть курсор вправо на 1
0F16 C219           2529                             clr             bitmig
0F18 B60901         2530                             cjne    @r0,#9,outma
0F1B 18             2531                             dec             r0;ppp
0F1C 020000   F     2532     outma:          jmp             outF
                    2533     
0F1F 75B0FE         2534     chanZ:          mov             p3,#0feh
0F22 E5B0           2535                             mov             a,p3
0F24 20E611         2536                             jb              acc.6,chanma
                    2537                             ;изм знак в старшем разряде на противоположн
0F27 E543           2538                             mov             a,bufind+3
0F29 B42B06         2539                             cjne            a,#2bh,noplus
0F2C 75432D         2540                             mov                     bufind+3,#2dh           ;+->-   
0F2F 020000   F     2541                             jmp             outF
0F32                2542     noplus:
0F32 75432B         2543                             mov                     bufind+3,#2bh           ;-/+-
0F35 020000   F     2544                             jmp             outF
0F38 75B0FD         2545     chanma:         mov             p3,#0fdh
0F3B E5B0           2546                             mov             a,p3
0F3D 20E603         2547                             jb              acc.6,outFl;labelL1
                    2548                             ;clr            bitmig
0F40 120000   F     2549     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2550     
0F43 020000   F     2551     outFl:                  jmp             outF
                    2552                     
0F46                2553     nor11:          ;       выход
0F46 7613           2554                     mov             @r0,#13h  ;12->13
0F48 900000   F     2555                     mov             dptr,#teOUT
                    2556     ;               jmp             vi1113
                    2557     
                    2558     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2559     
                    2560     
                    2561     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    41

0F4B 020000   F     2562     rlabelL:        jmp                     labelL
                    2563     ;findmem:               jmp             out6
0F4E 30117E         2564     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2565     ;;;;;;;;;;;;;
0F51 78B1           2566                                             mov                     r0,#vichR
0F53 7415           2567                                             mov                     a,#15h
0F55 C3             2568                                             clr                     c
0F56 96             2569                                             subb            a,@r0
0F57 4016           2570                                             jc                      ri21_23
                    2571     
0F59 75B0FB         2572                                             mov             p3,#0fbh; реж кн меню ->
0F5C 20B60A         2573                                             jb              p3.6,ri6
0F5F 78B1           2574                                             mov             r0,#vichR
0F61 B61508         2575                                             cjne    @r0,#15h,norime
0F64 7611           2576                                             mov             @r0,#11h
0F66 120000   F     2577     norime1:        call            lomenu
0F69 020000   F     2578     ri6:                    jmp             out6
0F6C 06             2579     norime:         inc             @r0
0F6D 80F7           2580                                             jmp             norime1
                    2581             
0F6F 7423           2582     ri21_23:        mov                     a,#23h          ;->
0F71 C3             2583                                             clr                     c
0F72 96             2584                                             subb            a,@r0
0F73 4014           2585                                             jc                      ri_31
0F75 75B0FB         2586                                             mov                     p3,#0fbh
0F78 20B6EE         2587                                             jb                      p3.6,ri6
0F7B B62308         2588                                             cjne            @r0,#23h,no23ri
0F7E 7621           2589                                             mov                     @r0,#21h
0F80 120000   F     2590                                             call            lomenu
0F83 020000   F     2591                                             jmp                     out6
0F86 06             2592     no23ri:         inc                     @r0
0F87 80DD           2593                                             jmp                     norime1
0F89 B63125         2594     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0F8C 301311         2595                                             jnb                     bitv19,gosk19
0F8F 900000   F     2596                                             mov                     dptr,#teS57_6;57,6
0F92 120000   F     2597                                             call            lotext
0F95 534B03         2598                                             anl                     bufind+11,#03h
0F98 434B80         2599                                             orl                     bufind+11,#80h
0F9B C213           2600                                             clr                     bitv19
0F9D 020000   F     2601                                             jmp             out6
0FA0 900000   F     2602     gosk19:         mov                     dptr,#teS19_2
0FA3 120000   F     2603                                             call            lotext
0FA6 534B03         2604                                             anl                     bufind+11,#03h
0FA9 434B80         2605                                             orl                     bufind+11,#80h
0FAC D213           2606                                             setb            bitv19
0FAE 020000   F     2607                                             jmp                     out6
                    2608     
                    2609     
                    2610     
                    2611     ;labelS2:       jmp                     out6
                    2612     
0FB1 7452           2613     no31ri:         mov                     a,#52h;42h              ;->
0FB3 C3             2614                                             clr                     c
0FB4 96             2615                                             subb            a,@r0
0FB5 40B2           2616                                             jc                      ri6
0FB7 75B0FB         2617                                             mov                     p3,#0fbh                   
                                  ;41,42
0FBA 30B609         2618                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0FBD 75B0FD         2619                                             mov                     p3,#0fdh
0FC0 20B6A6         2620                                             jb                      p3.6,ri6
0FC3 020000   F     2621                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0FC6 020000   F     2622     rlabelN:                jmp             labelN
0FC9 020000   F     2623     moutF:          jmp             outF
                    2624     ;;;;;;;;;;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    42

0FCC 020000   F     2625     rnnmemb:        jmp             nnmemb
                    2626     
0FCF                2627     nbimenu:
0FCF 300BFA         2628     findmem:        jnb             bitmem,rnnmemb
0FD2 79B0           2629                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0FD4 B71113         2630                        cjne         @r1,#11h,nomem11
                    2631                        
0FD7 75B0FB         2632                        mov          p3,#0fbh
0FDA E5B0           2633                        mov          a,p3
0FDC 20E6EA         2634                        jb           acc.6,moutF
0FDF 7712           2635                        mov          @r1,#12h
0FE1 900000   F     2636                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0FE4 120000   F     2637                        call         lotext
0FE7 020000   F     2638                        jmp          outF
                    2639     
0FEA B71213         2640     nomem11:   cjne         @r1,#12h,nomem12
0FED 75B0FB         2641                             mov             p3,#0fbh
0FF0 E5B0           2642                        mov          a,p3
0FF2 20E6D4         2643                        jb           acc.6,moutF
0FF5 7713           2644                        mov          @r1,#13h
0FF7 900000   F     2645                        mov          dptr,#teLIST            ;ПРОСМОТР
0FFA 120000   F     2646                        call         lotext
0FFD 020000   F     2647                        jmp          outF
1000 B71313         2648     nomem12:         cjne           @r1,#13h,nomem13
1003 75B0FB         2649                                             mov             p3,#0fbh
1006 E5B0           2650                        mov          a,p3
1008 20E6BE         2651                        jb           acc.6,moutF
100B 7714           2652                        mov          @r1,#14h
100D 900000   F     2653                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
1010 120000   F     2654                        call         lotext
1013 020000   F     2655                          jmp                outF
                    2656                             
1016 B71413         2657     nomem13:cjne            @r1,#14h,labelL
1019 75B0FB         2658                             mov             p3,#0fbh
101C E5B0           2659                        mov          a,p3
101E 20E6A8         2660                        jb           acc.6,moutF
1021 7711           2661                        mov          @r1,#11h
1023 900000   F     2662                        mov          dptr,#teCLE                     ;ОЧИСТКА
1026 120000   F     2663                        call         lotext
1029 020000   F     2664                          jmp                outF
102C                2665     labelL: 
                    2666                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
102C 78B0           2667                                     mov                     r0,#level
102E B6210E         2668                                     cjne            @r0,#21h,nobl21
1031 7622           2669                                     mov                     @r0,#22h                ;->БЛОК 
1033 900000   F     2670                                     mov                     dptr,#teBL
1036 120000   F     2671     me21_22:call            lotext
                    2672                             
1039 120000   F     2673                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
103C 020000   F     2674                                     jmp                     outF
                    2675     
103F B62207         2676     nobl21: cjne            @r0,#22h,nobl22
1042 900000   F     2677                                     mov                     dptr,#teFULL
1045 7621           2678                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2679     
1047 80ED           2680                                     jmp                     me21_22
                    2681     
                    2682     ;labl21:           cjne @r0,#21h,nolev1
                    2683     ;                       mov             p3,#0fbh
                    2684     ;                       mov             a,p3
                    2685     ;                       jb              acc.6,loutF
                    2686     ;                       cjne    @r0,#21h,labl22
                    2687     ;                       mov             @r0,#22h
                    2688                             ;БЛОК
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    43

                    2689     ;                       call    lotext
                    2690     ;                       jmp             outF
                    2691     ;labl22:                mov             @r0,#21h
                    2692                             ;ПОЛНАЯ
                    2693     ;                       call    lotext
                    2694     ;                       jmp             outF
                    2695                      
1049 B62325         2696     nobl22:         cjne    @r0,#23h,go31l
104C 75B0FB         2697     rigblo:         mov             p3,#0fbh
104F 20B629         2698                                             jb              p3.6,llev2
1052                2699     labL2:    ;  уст курсор в правую позицию 
                    2700                                     ;       кнопка                  ->
                    2701     ;;;;;;;;;;;;;;;;;;
                    2702     ;необходимо не портить цифру в следуюем справа знакоместе
                    2703     ;т е сохранить ее в ячейке для мигания в противном случае
                    2704     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2705     ;       знакоместа
1052 78B2           2706                                             mov             r0,#marker
1054 7440           2707                                     mov             a,#bufind
1056 26             2708                                             add             a,@r0                   ;a=bufind+m
                             arker
1057 F9             2709                                             mov             r1,a
1058 09             2710                                             inc             r1
1059 873C           2711                                             mov             savba,@r1
105B C219           2712                                             clr             bitmig
                    2713     ;;;;;;;;;;;;;;;;
105D 78B2           2714                       mov           r0,#marker      ;курсор справа  ?
105F E53B           2715                             mov             a,movrig
1061 C3             2716                             clr             c
1062 96             2717                             subb    a,@r0
1063 6006           2718                             jz         equ1l
1065 E53B           2719                             mov             a,movrig;уст в правую позицию
1067 F6             2720                             mov             @r0,a
1068 020000   F     2721                             jmp             outF                                     
106B E53A           2722     equ1l:          mov             a,movleft;уст в левую позицию
106D F6             2723                             mov             @r0,a   
106E 020000   F     2724     loutF:  jmp             outF
                    2725                     
                    2726     
1071 B63102         2727     go31l:          cjne    @r0,#31h,go41l
1074 80D6           2728                             jmp             rigblo
1076 B6410B         2729     go41l:          cjne    @r0,#41h,norig2
1079 80D1           2730                             jmp             rigblo
                    2731     
107B 75B0FD         2732     llev2:          mov             p3,#0fdh
107E 20B6ED         2733                             jb              p3.6,loutF
1081 020000   F     2734                             jmp             labelL1
                    2735     
                    2736     ;->
1084 C3             2737     norig2:    clr          c               ;32,33,34,42
1085 7431           2738                             mov             a,#31h
1087 96             2739                             subb    a,@r0
1088 50E4           2740                             jnc             loutF
108A 75B0FB         2741     rigblok:        mov             p3,#0fbh  ;32,33,34,42
108D 20B626         2742                             jb              p3.6,lev2go
1090                2743     labelN: 
                    2744                             ;                               29.12.06
                    2745     ;;;;;;;;;;;;;;;;;;
                    2746     ;необходимо не портить цифру в следуюем справа знакоместе
                    2747     ;т е сохранить ее в ячейке для мигания в противном случае
                    2748     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2749     ;       знакоместа
1090 78B2           2750                                             mov             r0,#marker
1092 7440           2751                                     mov             a,#bufind
1094 26             2752                                             add             a,@r0                   ;a=bufind+m
                             arker
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    44

1095 F9             2753                                             mov             r1,a
1096 09             2754                                             inc             r1
1097 873C           2755                                             mov             savba,@r1
                    2756     ;;;;;;;;;;;;;;;;;;;
1099 78B2           2757                             mov             r0,#marker      ;курсор справа  ?
109B E53B           2758                             mov             a,movrig
109D C3             2759                             clr             c
109E 96             2760                             subb    a,@r0
109F 7006           2761                             jnz        noequ1
10A1 E53A           2762                             mov             a,movleft;уст в крайнюю левую позицию
10A3 F6             2763                             mov             @r0,a
10A4 020000   F     2764                             jmp             outF
10A7                2765     noequ1: ;29.12.06
                    2766     ;;;;;;;;;;;;;;;;;;
                    2767                             ;восстан знакоместо при мигании
                    2768                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
10A7 78B2           2769                                     mov             r0,#marker
10A9 7440           2770                                     mov             a,#bufind
10AB 26             2771                                     add             a,@r0                   ;a=bufind+marker
10AC F9             2772                                     mov             r1,a
                    2773                                     ;mov            @r1,savba
10AD 09             2774                                     inc             r1
10AE 873C           2775                                     mov             savba,@r1
                    2776     ;;;;;;;;;;;;;;;;        
10B0 120000   F     2777                             call    marri;уст сдвиг в правую        позицию
10B3 020000   F     2778                             jmp             outF
10B6 75B0FD         2779     lev2go:         mov             p3,#0fdh
10B9 30B603         2780                             jnb             p3.6,rlabelL1
10BC 020000   F     2781                             jmp             outF
                    2782     
10BF 020000   F     2783     rlabelL1:       jmp             labelL1
                    2784     
10C2                2785     nnmemb:
                    2786                                     
                    2787     
                    2788     
10C2                2789     norim6:    ;kn menu
10C2                2790     out6:           
10C2 D007           2791                                     pop             rr7     
10C4 D006           2792                                     pop             rr6
10C6 D005           2793                                     pop             rr5
10C8 D004           2794                                     pop             rr4
10CA D003           2795                                     pop             rr3
10CC D002           2796                                     pop             rr2
10CE D001           2797                                     pop             rr1                             
10D0 D000           2798                                     pop             rr0
10D2 D0D0           2799                                     pop             psw
10D4 D0E0           2800                                     pop             acc
                    2801     ;clr            bitmig
                    2802                               ; mov         EIE2,#30H
                    2803                              ;  mov         a,P3IF
                    2804                             ;       anl             a,#0bfh
                    2805                             ;       mov             P3IF,a
                    2806                             ;       mov             P3,#0c0h
                    2807                             ;;;;;;
10D6 75AD00         2808                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
10D9 75B0C0         2809                             mov             P3,#0c0h
10DC C219           2810                             clr             bitmig
10DE E586           2811                                             mov             a,P6            ;p6.4=0
10E0 54EF           2812                             anl             a,#0efh
10E2 F586           2813                             mov             P6,a
10E4 00             2814                             nop
10E5 00             2815                             nop
                    2816                                     
10E6 E586           2817                             mov             a,P6                    ;p6.4=1 
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    45

10E8 4410           2818                             orl             a,#10h
10EA F586           2819                             mov             P6,a                        
10EC 32             2820                             reti
                    2821     
10ED 020000   F     2822     rknMEM:                 jmp             knMEM
10F0 020000   F     2823     knKMP:             jmp          out7
10F3 020000   F     2824     rout7:                  jmp             out7    
10F6 020000   F     2825     rlabelH:                jmp             labelH
10F9 020000   F     2826     rknNUL:         jmp             knNUL
10FC 020000   F     2827     rknleft:                jmp             knleft
10FF                2828     keyb2:  ;IE7
10FF 75E700         2829                                     mov             EIE2,#00H
1102 75AD00         2830                                     mov             P3IF,#00
                    2831     
1105 C0E0           2832                                     push    acc
1107 C0D0           2833                                     push    psw
1109 C000           2834                                     push    rr0
110B C001           2835                                     push    rr1
110D C002           2836                                     push    rr2
110F C003           2837                                     push    rr3
1111 C004           2838                                     push    rr4
1113 C005           2839                                     push    rr5
1115 C006           2840                                     push    rr6
1117 C007           2841                                     push    rr7
1119 C082           2842                                     push    dpl
111B C083           2843                                     push    dph
                    2844                                     ;clr            bitmig
                    2845                       ;;;;;;;;;;;;;;
111D 120000   F     2846                               call  z_01s   ;0,1s
                    2847                               ;восстан знакоместо при мигании
                    2848                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1120 78B2           2849                                     mov             r0,#marker
1122 7440           2850                                     mov             a,#bufind
1124 26             2851                                     add             a,@r0                   ;a=bufind+marker
1125 F9             2852                                     mov             r1,a
1126 A73C           2853                                     mov             @r1,savba
                    2854                                     ;;;;;;;;;;;
                    2855     
1128 E5B0           2856                             mov             a,p3
112A 20E7C6         2857                                     jb              acc.7,rout7
112D E5B0           2858                                     mov             a,p3
112F 74FF           2859                                     mov             a,#0ffh         ; p3.(5-0)<-3f
1131 F5B0           2860                                     mov             p3,a
1133 E5B0           2861                                     mov             a,p3
1135 30E7BB         2862                                     jnb             acc.7,rout7             ;error
1138 3004BB         2863                                     jnb             bitizm,rlabelH
113B 75B0FE         2864                                     mov             p3,#0feh                ;реж IZM
113E E5B0           2865                                     mov             a,p3
1140 30E7B6         2866                                     jnb             acc.7,rknNUL
1143 75B0FD         2867                                     mov             p3,#0fdh
1146 E5B0           2868                                     mov             a,p3
1148 30E7A5         2869                                     jnb             acc.7,knKMP
114B 75B0FB         2870                                     mov             p3,#0fbh
114E E5B0           2871                                     mov             a,p3
1150 30E7A9         2872                                     jnb             acc.7,rknleft
1153 75B0F7         2873                                     mov             p3,#0f7h
1156 E5B0           2874                                     mov             a,p3
1158 30E75E         2875                                     jnb             acc.7,knAVP
115B 75B0EF         2876                                 mov         p3,#0efh
115E E5B0           2877                                     mov             a,p3
1160 30E78A         2878                                     jnb             acc.7,rknMEM
1163 75B0DF         2879                                     mov             p3,#0dfh
1166 E5B0           2880                                     mov             a,p3    
1168 30E722         2881                                     jnb             acc.7,knmenu
116B                2882     an_t7:             ;;;;;;;;;;;;
                    2883                     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    46

                    2884     ;       clr             c
                    2885     ;       mov             r1,#parN
                    2886     ;
                    2887     ;                       mov             r0,#diap
                    2888     ;                       mov             a,#6            
                    2889     ;                       subb    a,@r0
                    2890     ;                       jnc             goto7           ;         ;10-2..10-8
                    2891                               
                    2892     ;                       mov             @r1,#2          ;10-9..10-11            
                    2893                             
                    2894                             ;;;;;;;;;;;;
116B 799A           2895     goto7:                  mov             r1,#parT
116D 783D           2896                                     mov             r0,#chkl
116F B70108         2897                                     cjne    @r1,#1,not1_7
1172 7600           2898                                     mov             @r0,#00
1174 08             2899                                     inc             r0
1175 7602           2900                                     mov             @r0,#2
1177 020000   F     2901                                     jmp             out7
                    2902                             
                    2903     
117A B70208         2904     not1_7:                 cjne    @r1,#2,not2_7
117D 760E           2905                                             mov             @r0,#0eh;00
117F 08             2906                                     inc             r0
1180 7638           2907                                     mov             @r0,#38h;20
1182 020000   F     2908                                     jmp             out7
1185 7600           2909     not2_7:                 mov             @r0,#00
1187 08             2910                                     inc             r0
1188 76C8           2911                                     mov             @r0,#200
118A 020000   F     2912     merr:           jmp             out7
                    2913     
                    2914     
118D 2006FA         2915     knmenu: jb              bitvi11,merr
1190 201514         2916                                     jb              biteizm,menuoff
1193 C204           2917                              clr            bitizm          ;off IZM
1195 D211           2918                                     setb            bitmenu
1197 900000   F     2919                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
119A 120000   F     2920                                     call    lotext
119D 534B03         2921                                     anl                     bufind+11,#03h ;погасить запятые
11A0 78B1           2922                                     mov             r0,#vichR
11A2 7611           2923                                     mov             @r0,#11h
11A4 020000   F     2924                                     jmp             onmem11
11A7                2925     menuoff:
11A7 78B1           2926                                     mov             r0,#vichR
11A9 7600           2927                                     mov             @r0,#00
11AB C215           2928                                     clr             biteizm
11AD 120000   F     2929                                     call    loadus
11B0 020000   F     2930                                     jmp             out7
11B3 75EF10         2931                                     mov             RSTSRC,#10h
                    2932                                     ;jmp            begin;onmem11
                    2933     
11B6 020000   F     2934     rendkalib:              jmp             endkalib
                    2935     
11B9 2012FA         2936     knAVP:  jb              bitklb,rendkalib        
11BC 200505         2937                                     jb              bitavp,meavp
11BF D205           2938                                     setb    bitavp
11C1 020000   F     2939                                     jmp             onmem11
11C4 C205           2940     meavp:                  clr             bitavp
11C6 020000   F     2941                                     jmp             onmem11
                    2942     
11C9 201207         2943     knleft: jb              bitklb,lefkl
                    2944                                     ;;;;;;;;
11CC 79AE           2945                                mov          r1,#diap
11CE 07             2946                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
11CF B70A03         2947                                     cjne    @r1,#0ah,nodi6
11D2 17             2948                                     dec             @r1
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    47

11D3 8096           2949     lefkl:  jmp             an_t7
                    2950     
11D5                2951     nodi6:             ;    cjne    @r1,#0,an_t7
11D5 120000   F     2952                                      call    clmassix
11D8 78B3           2953                                     mov             r0,#summa
11DA 120000   F     2954                                     call    clear4  
11DD 786A           2955                                     mov             r0,#rez_A0
11DF 120000   F     2956                                     call    clear4  
11E2 120000   F     2957                                     call    loadUS
11E5 8084           2958                                jmp          an_t7
                    2959     
11E7 200F0F         2960     knNUL:                  jb              bitnul,ybnul
11EA D20F           2961                                     setb    bitnul
11EC 789C           2962                                     mov             r0,#rez_A3      ;A3
11EE 120000   F     2963                                     call    resar2
11F1 786A           2964                                     mov             r0,#rez_A0      
11F3 120000   F     2965                                     call    saver2;A0<-A3
11F6 020000   F     2966                                     jmp             goto7;an_t7
                    2967     
11F9 C20F           2968     ybnul:                  clr             bitnul
11FB 900000   F     2969                                      mov    DPTR,#ch0 
11FE 120000   F     2970                                     CALL   ldc_long          ; r2..r5 <-- 0
1201 786A           2971                                     mov             r0,#rez_A0      ;A0=0
1203 120000   F     2972                                     call    saver2
1206 020000   F     2973                                     jmp             goto7;an_t7
                    2974     
1209 301021         2975     labelH:                 jnb             bitt2,nolah
120C 75B0FB         2976                                     mov             p3,#0fbh   ;вход в режим изм Т
120F 534A8F         2977                                     anl             bufind+10,#8fh
1212 79B7           2978                                     mov             r1,#load;parT
1214 20B70D         2979                                     jb              p3.7,rhnot1
1217 B70003         2980                                     cjne    @r1,#0,inct;
121A 020000   F     2981                                     jmp             out7;hyest6
121D 17             2982     inct:                   dec             @r1                     ;Tизм+1
                    2983                             
121E 120000   F     2984                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
1221                2985     hnot2:          ;       call    ind
1221 020000   F     2986                                     jmp             out7
                    2987     
1224 020000   F     2988      rhnot1:                jmp             hnot1
                    2989      ;rnoviR:       jmp             noviR
1227 020000   F     2990      rlabelK:       jmp             labelK
122A 020000   F     2991      rlabelI:       jmp             labelI          
                    2992      ;;;;;;;;;;;;;;;;;;;
122D 3014F7         2993     nolah:          jnb             bitvich,rlabelK 
                    2994                                     
                    2995                             ;;;;;;
                    2996                             ;увеличить счетчик задержки клавиатуры
                    2997                     ;;              mov             r0,#chkl
                    2998                     ;;              mov             @r0,#27h
                    2999                     ;;              inc             r0
                    3000                     ;;              mov             @r0,#10h
                    3001                             ;;;;;;
                    3002     
1230 78B1           3003                             mov             r0,#vichR
1232 B61128         3004                             cjne    @r0,#11h,rhnor11;rlabelI;;
1235 75B0FB         3005                             mov             p3,#0fbh   ;<-
1238 20B730         3006                             jb              p3.7,noh37;routF
123B B6110B         3007                     cjne    @r0,#11h,hr12
123E 7613           3008                             mov             @r0,#13h        ;11= вычислить
1240 900000   F     3009                             mov             dptr,#teOUT;teVICH
1243 120000   F     3010     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1246 020000   F     3011                             jmp             goto7;outF
1249 B61207         3012     hr12:           cjne    @r0,#12h,hnor12
124C 7611           3013     lovich:         mov             @r0,#11h
124E 900000   F     3014                             mov             dptr,#teVICH
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    48

1251 80F0           3015                             jmp             hvi1113         
1253 B61307         3016     hnor12:         cjne    @r0,#13h,rhnor11
1256 7612           3017     loizmk:         mov             @r0,#12h
1258 900000   F     3018                             mov             dptr,#teIZMK    ;       изм конст
                    3019                                        
125B 80E6           3020                             jmp             hvi1113
                    3021     
125D 804C           3022     rhnor11:                jmp             hnor11
                    3023     
125F 8057           3024     rvvizko:                jmp             vvizko
1261 C214           3025     vioutF:                 clr             bitvich
1263 C206           3026                                                     clr             bitvi11
1265 020000   F     3027                                                     jmp             outF
1268 020000   F     3028     toutF:                  jmp     outF
                    3029     
126B 75B0F7         3030     noh37:          mov             p3,#0f7h
126E 20B7F7         3031                             jb              p3.7,toutF;vioutF
1271 B611EB         3032                             cjne    @r0,#11h,rvvizko
1274 D206           3033                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1276 D204           3034              setb   bitizm
1278 534B07         3035                              anl            bufind+11,#07h
127B 434B10         3036                              orl            bufind+11,#10h;точка после 1 знакоместа
127E 020000   F     3037     routF:          jmp             out7;goto7;outF
                    3038     
                    3039     
                    3040     
1281 80E8           3041     rnoh37:         jmp             noh37
                    3042     
1283 B6120D         3043     norr11:         cjne    @r0,#12h,norr12
1286 75B0FB         3044                             mov             p3,#0fbh   ;<-
1289 20B7F5         3045                             jb              p3.7,rnoh37;routF
128C 760B           3046                             mov             @r0,#11;12->11
128E 80BC           3047                             jmp             lovich
                    3048     
1290 020000   F     3049     labelI2:                jmp             labelI
1293 B613FA         3050     norr12:         cjne    @r0,#13h,labelI2
1296 75B0FB         3051                             mov             p3,#0fbh   ;<-
1299 20B7E5         3052                             jb              p3.7,rnoh37
129C 7612           3053                             mov             @r0,#12h
129E 80B6           3054                             jmp             loizmk
                    3055                             ;;;;
12A0 C214           3056     clrvich:                clr             bitvich
12A2 D204           3057                             setb    bitizm
12A4 A8B2           3058                             mov             r0,marker
12A6 76FF           3059                             mov             @r0,#0ffh
12A8 020000   F     3060                              jmp    goto7;  routF
                    3061     
                    3062     ;rnoh37:                jmp             noh37
                    3063      ;ввод изм конст
12AB B612E5         3064     hnor11:         cjne    @r0,#12h,norr12;clrvich
12AE 75B0FB         3065                              mov            p3,#0fbh   
12B1 20B7CD         3066                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
12B4 7611           3067                             mov             @r0,#11h
12B6 8094           3068                             jmp             lovich
                    3069     
12B8 78B1           3070     vvizko:         mov             r0,#vichR
12BA E6             3071                             mov             a,@r0
                    3072                     ;       cjne    @r0,#12h,clrvich
12BB B412E2         3073                             cjne    a,#12h,clrvich
12BE 7621           3074                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
12C0 78B2           3075                             mov             r0,#marker
12C2 7604           3076                             mov             @r0,#4;9
12C4 753A04         3077                             mov             movleft,#4
12C7 753B07         3078                             mov             movrig,#7
12CA 900000   F     3079                             mov             dptr,#teAequ0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    49

12CD 120000   F     3080                             call    lotext
                    3081                             
12D0 120000   F     3082                             call    outA
12D3 534B0F         3083                             anl                     bufind+11,#0fh
                    3084             ;       mov             a,bufind+11
                    3085             ;       anl             a,#0f0h
                    3086             ;       mov             bufind+11,a
12D6 434B40         3087                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3088                             
12D9 020000   F     3089                             jmp             goto7;routF
                    3090     ;hnor13:                jmp             hnor12          
12DC B6210C         3091     izchi:          cjne    @r0,#21h,tlabelI
                    3092     ;<- при вводе цифр А                            
                    3093                     ;        mov            p3,#0fbh   
                    3094                     ;       jnb             p3.7,li21
                    3095             ;clr            bitmig
12DF 78B2           3096                             mov             r0,#marker
12E1 16             3097                             dec             @r0
12E2 B60201         3098                             cjne    @r0,#2,li21
12E5 06             3099                             inc             @r0;marker=3 +/-
12E6 C219           3100     li21:           clr             bitmig
12E8 020000   F     3101                             jmp             goto7;outF
                    3102     
12EB 020000   F     3103     tlabelI:        jmp             labelI
                    3104     
                    3105     ;                       load    0 1 2 3 4 5             
12EE 06050403       3106     sootv:          db              6,5,4,3,2,1;parT
12F2 0201                    
                    3107     ;
                    3108     
                    3109     ;нажата кн ввод при наборе Т
12F4 75B0F7         3110     hnot1:                  mov             p3,#0f7h
12F7 20B784         3111                                     jb              p3.7,routF;out7
12FA B70549         3112                                     cjne    @r1,#5,nohnot1  ;r1=load
12FD 794A           3113                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
12FF E7             3114                                     mov             a,@r1
1300 548F           3115                                     anl             a,#8fh
1302 4440           3116                                     orl             a,#40h;.6
1304 F7             3117                                     mov             @r1,a
1305 8000           3118                                     jmp             loadb
                    3119                                     
                    3120                                     
1307 789A           3121     loadB:                  mov             r0,#parT
1309 900000   F     3122                                     mov             dptr,#sootv
130C 79B7           3123                                     mov             r1,#load                
130E E7             3124                                     mov             a,@r1;load
130F 93             3125                                     movc    a,@a+dptr
1310 F6             3126                                     mov             @r0,a
1311 120000   F     3127                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3128                                      ;r4=b1 r5=b2
1314 120000   F     3129                                     call    iniacp;инициализация АЦП
1317 120000   F     3130                                     call    loadUS
131A 120000   F     3131                                     call    clmassix        
131D D204           3132                                     setb    bitizm
131F C210           3133                                     clr             bitt2
                    3134     
1321 534A8F         3135                                     anl             bufind+10,#8fh
1324 C3             3136                                      clr            c
1325 789A           3137                                  mov                r0,#parT
1327 79AF           3138                                      mov            r1,#parN
1329 7402           3139                                  mov                a,#2
132B 96             3140                                 subb                a,@r0
132C 5005           3141                                 jnc                 loadB2
132E 7701           3142                                     mov             @r1,#1;N=1         ;T>=2
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    50

1330 020000   F     3143     bout7:                  jmp             goto7;out7
                    3144     
1333 B702FA         3145     loadB2:                 cjne    @r1,#2,bout7
1336 7702           3146                                     mov             @r1,#2;N=2
1338 020000   F     3147                                     jmp             goto7;out7
133B                3148     nohnot2:                ;в буфере 1 зажечь <=0,1s
133B 794A           3149                                     mov             r1,#bufind+10
133D E7             3150                                     mov             a,@r1
133E 4410           3151                                     orl             a,#10h;.4
1340 F7             3152                                     mov             @r1,a
1341 120000   F     3153                                     call            ind
1344 80C1           3154                                     jmp             loadB
1346 B704F2         3155     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
1349 794A           3156                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
134B E7             3157                                     mov             a,@r1
134C 4420           3158                                     orl             a,#20h;.5
134E F7             3159                                     mov             @r1,a
134F 80B6           3160                                     jmp             loadB
                    3161     
                    3162     ;кнопка ПАМЯТЬ
1351 C204           3163     knMEM:                  clr             bitizm          ;off IZM
1353 900000   F     3164                                     mov             dptr,#teLIST;CLE
1356 120000   F     3165                                     call    lotext    ;в буф2 записать ОЧИСТКА
1359 D20B           3166                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
135B 534BEF         3167                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
135E 434B01         3168                                     orl             bufind+11,#01;зажечь светодиод память
1361 120000   F     3169                                     call            ind
1364 78B0           3170                                     mov             r0,#level
1366 7613           3171                                     mov             @r0,#13h;11h
1368 783D           3172     onmem11:                mov             r0,#chkl
136A 7603           3173                                     mov             @r0,#03
136C 08             3174                                     inc             r0
136D 76E8           3175                                     mov             @r0,#0e8h               ;1000
136F 020000   F     3176                                     jmp             out7;goto7;out7
                    3177     
1372 020000   F     3178     rnomemk:                jmp             nomemk          ;
                    3179     
1375 78B0           3180     outkmem:        mov                     r0,#level
1377 7600           3181                                             mov                     @r0,#0
1379 78B1           3182                                             mov                     r0,#vichR
137B 7600           3183                                             mov                     @r0,#0
137D C20B           3184                                             clr                     bitmem
137F C214           3185                                             clr                     bitvich
1381 C206           3186                                             clr                     bitvi11
1383 C211           3187                                             clr                     bitmenu
1385 D204           3188                                             setb            bitizm
1387 78B2           3189                                             mov                     r0,#marker
1389 76FF           3190                                             mov                     @r0,#0ffh
138B 020000   F     3191                                             jmp                     vvod2_10
138E 020000   F     3192                                             jmp                     goto7   
1391                3193     labelK:
                    3194     
                    3195     ;;;;;;;;;;;;
1391 300BDE         3196                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
1394 75B0EF         3197                                     mov                     p3,#0efh
1397 30B7DB         3198                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
139A 78B0           3199                                      mov            r0,#level
139C B6114E         3200                               cjne          @r0,#11h,klev1;nome11
139F 75B0FB         3201     lefmem11:         mov           p3,#0fbh
13A2 E5B0           3202                               mov           a,p3
13A4 20E70E         3203                               jb            acc.7,rkvvod0
13A7 B6110E         3204                               cjne          @r0,#11h,locle          ;<-memory
13AA 7614           3205                               mov           @r0,#14h
13AC 900000   F     3206     lolist:           mov           dptr,#teSTAT
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    51

13AF 120000   F     3207                               call          lotext           ;СТАТИСТИКА
13B2 020000   F     3208                               jmp   goto7;  outF
                    3209     
13B5 020000   F     3210     rkvvod0:        jmp             kvvod0
                    3211     
                    3212     
13B8 B6120B         3213     locle:          cjne            @r0,#12h,lowr           ;<-memory
13BB 7611           3214                               mov           @r0,#11h                   ;ОЧИСТКА
13BD 900000   F     3215     loadcle:          mov           dptr,#teCLE
13C0 120000   F     3216                               call          lotext
13C3 020000   F     3217                               jmp           goto7;outF
                    3218     
13C6 B6130B         3219     lowr:                   cjne    @r0,#13h,lostat
13C9 7612           3220                                             mov             @r0,#12h
13CB 900000   F     3221      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
13CE 120000   F     3222                             call    lotext
13D1 020000   F     3223                             jmp             goto7;outF
                    3224     
13D4 7613           3225     lostat:         mov             @r0,#13h
13D6 900000   F     3226                                     mov             dptr,#teLIST              ;ПРОСМОТР
13D9 120000   F     3227                             call    lotext
13DC 020000   F     3228                             jmp             goto7;outF
                    3229     
13DF B6141A         3230     me_14:cjne              @r0,#14h,klev22
13E2 7613           3231                                             mov             @r0,#13h
13E4 900000   F     3232                             mov             dptr,#teLIST              ;;ПРОСМОТР
13E7 120000   F     3233                             call    lotext
13EA 020000   F     3234                             jmp             goto7
13ED B61202         3235      klev1:          cjne   @r0,#12h,klev2
13F0 80AD           3236                             jmp             lefmem11
13F2 B61302         3237     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
13F5 80A8           3238                             jmp             lefmem11
13F7 B61402         3239     klev3:           cjne   @r0,#14h,klev22;
13FA 80A3           3240                             jmp             lefmem11
                    3241     ;<- vvod на более низких уровнях
13FC B62117         3242     klev22:         cjne    @r0,#21h,klev21
13FF 75B0FB         3243     lev220:         mov             p3,#0fbh
1402 20B77B         3244                             jb              p3.7,kgo23
1405 B6210B         3245                             cjne    @r0,#21h,kfullr
1408 7622           3246                             mov             @r0,#22h
140A 900000   F     3247                             mov             dptr,#teBL
140D 120000   F     3248                             call    lotext
1410 020000   F     3249                             jmp             goto7;outF
1413 020000   F     3250     kfullr:         jmp             kfull                           
1416 B6220E         3251     klev21:         cjne    @r0,#22h,klev23
1419 80E4           3252                             jmp             lev220
                    3253     
141B 020000   F     3254     rlabL2:         jmp             labL2
141E 020000   F     3255     rlabM:          jmp             labM
1421 020000   F     3256     ques:                   jmp             out7
1424 020000   F     3257     ddoutfr:        jmp             ddoutf
                    3258     
1427 B623F4         3259     klev23:          cjne   @r0,#23h,rlabM
142A 75B0FB         3260                              mov    p3,#0fbh
142D 30B7F1         3261                              jnb            p3.7,ques;errr labL2
1430 75B0F7         3262                              mov    p3,#0f7h
1433 20B7EE         3263                              jb             p3.7,ddoutfr
                    3264                                             ;       считать с индикатора  
1436 C3             3265                                     clr                     c
1437 E547           3266                                mov          a,bufind+7      
1439 9430           3267                                      subb           a,#30h
143B B40002         3268                                      cjne           a,#0,chaibl
143E 7401           3269                                      mov            a,#1                    ;номера блоков 1..4
1440                3270     chaibl:         
1440 F538           3271                                             mov             nblok,a
                    3272                                
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    52

                    3273                              ;очистить блок памяти с набранным номером
                    3274                              ;150h..1000h( 150h+nblok*320h)
1442 120000   F     3275                                     call            adrblok         ;dptr-
                    3276     
1445 79B8           3277                                     mov                     r1,#work                ;обьем блок
                             а
1447 7703           3278                                     mov                     @r1,#03
1449 09             3279                                     inc                     r1
144A 7720           3280                                     mov                     @r1,#20h                        ;32
                             0h
                    3281     
144C                3282     goonoff:
144C E4             3283                                     clr                     a
144D F0             3284                                     movx            @dptr,a
144E A3             3285                                     inc                     dptr
                    3286     
144F 79B9           3287                                     mov                     r1,#work+1
1451 120000   F     3288                                     call            chminus
1454 78B8           3289                                     mov             r0,#work
1456 E6             3290                             mov             a,@r0
1457 30E7F2         3291                             jnb             acc.7,goonoff
                    3292     
145A C20B           3293                              clr    bitmem  ;сбр признак памяти 
145C D204           3294                              setb   bitizm
                    3295                             ;после очистки блока сохраняем в saven_bl 
                    3296                             ;адрес второго с конца измерения потому
                    3297                             ;добавляем 8;;
145E 120000   F     3298                             call            adrblok;dptr-начало блока
1461 E582           3299                             mov                     a,dpl
1463 2408           3300                             add                     a,#8
1465 F582           3301                             mov                     dpl,a
1467 E583           3302                             mov                     a,dph
1469 3400           3303                             addc            a,#0
146B F583           3304                             mov                     dph,a
146D 120000   F     3305                             call            save_hl;подготовка записи в начало блока
                    3306                             ;;;;;
                    3307     
1470 78B2           3308                              mov            r0,#marker
1472 76FF           3309                              mov            @r0,#0ffh
1474 020000   F     3310                                     jmp                     vvod2_10
1477 020000   F     3311                              jmp    goto7
                    3312     
147A 020000   F     3313     rddoutf:        jmp             ddoutf
147D 020000   F     3314     rgo23no:        jmp             go23no
                    3315     
                    3316     ;vvod   БЛОК->БЛОК 00           
1480 75B0F7         3317     kgo23:           mov    p3,#0f7h
1483 20B7F4         3318                             jb              p3.7,rddoutf
1486 B621F4         3319                             cjne    @r0,#21h,rgo23no
                    3320                             ;очистить память 150..dd0h
                    3321                             ;1й блок
1489 900150         3322                              mov                    dptr,#150h
148C 79B8           3323                                     mov                     r1,#work                ;обьем блок
                             а
148E 7703           3324                                     mov                     @r1,#03
1490 09             3325                                     inc                     r1
1491 7720           3326                                     mov                     @r1,#20h                        ;32
                             0h
                    3327     
1493                3328     gooff1:
1493 E4             3329                                     clr                     a
1494 F0             3330                                     movx            @dptr,a
1495 A3             3331                                     inc                     dptr
                    3332     
1496 79B9           3333                                     mov                     r1,#work+1
1498 120000   F     3334                                     call            chminus
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    53

149B 78B8           3335                                     mov             r0,#work
149D E6             3336                             mov             a,@r0
149E 30E7F2         3337                             jnb             acc.7,gooff1
14A1 900158         3338                             mov                     dptr,#158h;начало 1 го блока
                    3339                             ;после очистки блока сохраняем в saven_bl 
                    3340                             ;адрес второго с конца измерения потому
                    3341                             ;добавляем 8;;
14A4 120000   F     3342                             call            save_hl;подготовка записи в начало блока
                    3343     ;2й блок
14A7 900470         3344                             mov                     dptr,#470h
14AA 79B8           3345                                     mov                     r1,#work                ;обьем блок
                             а
14AC 7703           3346                                     mov                     @r1,#03
14AE 09             3347                                     inc                     r1
14AF 7720           3348                                     mov                     @r1,#20h                        ;32
                             0h
                    3349     
14B1                3350     gooff2:
14B1 E4             3351                                     clr                     a
14B2 F0             3352                                     movx            @dptr,a
14B3 A3             3353                                     inc                     dptr
                    3354     
14B4 79B9           3355                                     mov                     r1,#work+1
14B6 120000   F     3356                                     call            chminus
14B9 78B8           3357                                     mov             r0,#work
14BB E6             3358                             mov             a,@r0
14BC 30E7F2         3359                             jnb             acc.7,gooff2
14BF 900478         3360                             mov                     dptr,#478h;начало 2 го блока
14C2 120000   F     3361                             call            save_hl;подготовка записи в начало блока
                    3362     ;3й блок
14C5 900790         3363                             mov                     dptr,#790h
14C8 79B8           3364                                     mov                     r1,#work                ;обьем блок
                             а
14CA 7703           3365                                     mov                     @r1,#03
14CC 09             3366                                     inc                     r1
14CD 7720           3367                                     mov                     @r1,#20h                        ;32
                             0h
                    3368     
14CF                3369     gooff3:
14CF E4             3370                                     clr                     a
14D0 F0             3371                                     movx            @dptr,a
14D1 A3             3372                                     inc                     dptr
                    3373     
14D2 79B9           3374                                     mov                     r1,#work+1
14D4 120000   F     3375                                     call            chminus
14D7 78B8           3376                                     mov             r0,#work
14D9 E6             3377                             mov             a,@r0
14DA 30E7F2         3378                             jnb             acc.7,gooff3
14DD 900798         3379                             mov                     dptr,#798h;начало 3 го блока
                    3380                                     ;после очистки блока сохраняем в saven_bl 
                    3381                             ;адрес второго с конца измерения потому
                    3382                             ;добавляем 8;;
14E0 120000   F     3383                             call            save_hl;подготовка записи в начало блока
                    3384     ;4й блок
14E3 900AB0         3385     mov                     dptr,#0ab0h
14E6 79B8           3386                                     mov                     r1,#work                ;обьем блок
                             а
14E8 7703           3387                                     mov                     @r1,#03h
14EA 09             3388                                     inc                     r1
14EB 7720           3389                                     mov                     @r1,#20h                        ;32
                             0h
                    3390     
14ED                3391     gooff4:
14ED E4             3392                                     clr                     a
14EE F0             3393                                     movx            @dptr,a
14EF A3             3394                                     inc                     dptr
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    54

                    3395     
14F0 79B9           3396                                     mov                     r1,#work+1
14F2 120000   F     3397                                     call            chminus
14F5 78B8           3398                                     mov             r0,#work
14F7 E6             3399                             mov             a,@r0
14F8 30E7F2         3400                             jnb             acc.7,gooff4
14FB 900AB8         3401                             mov                     dptr,#0ab8h;начало 4 го блока
                    3402                             ;после очистки блока сохраняем в saven_bl 
                    3403                             ;адрес второго с конца измерения потому
                    3404                             ;добавляем 8;;
14FE 120000   F     3405                             call            save_hl;подготовка записи в начало блока
1501 C20B           3406                             clr             bitmem
1503 D204           3407                             setb    bitizm
1505 78B2           3408                                     mov             r0,#marker
1507 76FF           3409                              mov            @r0,#0ffh
1509 020000   F     3410                             jmp                     vvod2_10;jmp            goto7
                    3411     
150C 7623           3412     go23no:    mov          @r0,#23h
150E 753B08         3413                                             mov                     movrig,#8
1511 753A07         3414                                             mov             movleft,#7
1514 8055           3415                             jmp             loblok;БЛОК 00
                    3416     
1516 7621           3417     kfull:          mov             @r0,#21h
1518 8025           3418                             jmp             gofull
                    3419                             
                    3420                                             
151A                3421     nomemk:                         
151A 020000   F     3422                                     jmp             labelS                  ;нажат ввод меню
                    3423                             
151D 75B0FB         3424     nome11:           mov           p3,#0fbh
1520 E5B0           3425                               mov           a,p3
1522 20E70D         3426                               jb            acc.7,kvvod0
1525 B61205         3427                               cjne          @r0,#12h,mem12no        
1528 7611           3428                               mov           @r0,#11h                ;ОЧИСТКА
152A 020000   F     3429                               jmp            loadcle
                    3430     
152D                3431     mem12no:        ;cjne           @r0,#13h,lowr           
152D 7612           3432                               mov           @r0,#12h                   ;
152F 020000   F     3433                               jmp           lowr1                     ;ЗАПИСЬ
                    3434     
1532 75B0F7         3435     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1535 20B70F         3436                               jb            p3.7,ddoutf
1538 78B0           3437                               mov           r0,#level
153A B61129         3438                               cjne          @r0,#11h,mvv11
153D 7621           3439                               mov           @r0,#21h                ;ПОЛНАЯ
153F 900000   F     3440     gofull:           mov           dptr,#teFULL
1542 120000   F     3441                               call          lotext
1545 804F           3442                                     jmp             mlabL2  ;<-????????/
                    3443     
1547                3444     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3445     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3446     ;т е сохранить ее в ячейке для мигания в противном случае
                    3447     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3448     ;       знакоместа
1547 78B2           3449                                                     mov             r0,#marker
1549 7440           3450                                     mov             a,#bufind
154B 26             3451                                             add             a,@r0                   ;a=bufind+m
                             arker
154C F9             3452                                             mov             r1,a
154D 19             3453                                             dec             r1      ;       inc             r1
154E 873C           3454                                             mov             savba,@r1
1550 C219           3455                                             clr             bitmig
                    3456     ;;;;;;;;;;;;;;;;
1552 78B2           3457                       mov           r0,#marker      ;курсор слева   ?
1554 E53A           3458                             mov             a,movleft
1556 C3             3459                             clr             c
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    55

1557 96             3460                             subb    a,@r0
1558 7006           3461                             jnz        left21
155A E53B           3462                             mov             a,movrig;уст в правую позицию
155C F6             3463                             mov             @r0,a
                    3464     
155D 020000   F     3465                             jmp             goto7                                            
1560 E53A           3466     left21:         mov             a,movleft;уст в левую позицию
1562 F6             3467                             mov             @r0,a   
1563 020000   F     3468                             jmp             goto7
                    3469     
                    3470     
1566 B61215         3471     mvv11:            cjne          @r0,#12h,mvv12
1569 7631           3472                                     mov             @r0,#31h
156B 900000   F     3473     loblok:                 mov             dptr,#teBL0;БЛОК 0
156E 120000   F     3474                                     call    lotext
1571 E538           3475                                     mov                     a,nblok
1573 2430           3476                                     add                     a,#30h
1575 F547           3477                                     mov                     bufind+7,a
1577 78B2           3478                                     mov             r0,#marker
1579 7607           3479                                     mov             @r0,#7
                    3480                                     ;mov            movrig,#9
                    3481                                     ;mov            movleft,#6
157B 020000   F     3482                                     jmp             goto7;outF
157E B61411         3483     mvv12:  cjne            @r0,#14h,bl_li
1581 7661           3484                                     mov                     @r0,#61h
1583 900000   F     3485                                     mov             dptr,#teMIN;
1586 120000   F     3486                                     call    lotext
1589 120000   F     3487                                     call    vichmin
158C 120000   F     3488                                     call    z_1s
158F 020000   F     3489                                     jmp             out7;goto7;outF
                    3490     
1592 7641           3491     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1594 80D5           3492                                     jmp             loblok
                    3493     
                    3494     
                    3495     
1596                3496     mlabL2:         ;jmp            labL2
                    3497                                             ;  уст курсор в правую позицию 
                    3498                                     ;                               29.12.06
                    3499     ;;;;;;;;;;;;;;;;;;
                    3500     ;необходимо не портить цифру в следуюем справа знакоместе
                    3501     ;т е сохранить ее в ячейке для мигания в противном случае
                    3502     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3503     ;       знакоместа
1596 78B2           3504                                             mov             r0,#marker
1598 7440           3505                                     mov             a,#bufind
159A 26             3506                                             add             a,@r0                   ;a=bufind+m
                             arker
159B F9             3507                                             mov             r1,a
159C 09             3508                                             inc             r1
159D 873C           3509                                             mov             savba,@r1
                    3510     ;;;;;;;;;;;;;;;;
159F 78B2           3511                       mov           r0,#marker      ;курсор справа  ?
15A1 E53B           3512                             mov             a,movrig
15A3 C3             3513                             clr             c
15A4 96             3514                             subb    a,@r0
15A5 6006           3515                             jz         equ2l
15A7 E53B           3516                             mov             a,movrig;уст в правую позицию
15A9 F6             3517                             mov             @r0,a
                    3518     ;                       lool
15AA 020000   F     3519                             jmp             goto7                                            
15AD E53A           3520     equ2l:          mov             a,movleft;уст в левую позицию
15AF F6             3521                             mov             @r0,a   
15B0 020000   F     3522                             jmp             goto7
                    3523                     
15B3 020000   F     3524     rnom31:         jmp                     nom31
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    56

15B6 B631FA         3525     labM:                   cjne    @r0,#31h,rnom31
15B9 75B0FB         3526                                     mov             p3,#0fbh
15BC 30B7D7         3527                                     jnb             p3.7,mlabL2
15BF 75B0F7         3528                                mov          p3,#0f7h
15C2 20B782         3529                                jb           p3.7,ddoutf
                    3530                                
15C5 7632           3531                                mov          @r0,#32h                        ;ИНТ 0000
                    3532                                     ;       считать с индикатора  
15C7 C3             3533     blokvv:         clr                     c
15C8 E547           3534                                mov          a,bufind+7      
15CA 9430           3535                                      subb           a,#30h
15CC B40002         3536                                      cjne           a,#0,blokvvc
15CF 7401           3537                                      mov            a,#1                    ;номера блоков 1..4
                    3538     
15D1 F538           3539     blokvvc: mov            nblok,a
15D3 900000   F     3540                                mov          dptr,#teINT;ИНТ 0000c
15D6 120000   F     3541                                call         lotext
15D9 78CE           3542                                      mov            r0,#interva+1
15DB 7952           3543                                      mov            r1,#abin+3
15DD E6             3544                                      mov            a,@r0
15DE F7             3545                                      mov            @r1,a
15DF 18             3546                                             dec                     r0
15E0 19             3547                                             dec                     r1
15E1 E6             3548                                             mov             a,@r0
15E2 F7             3549                                             mov             @r1,a
15E3 19             3550                                             dec             r1
15E4 E4             3551                                             clr             a
15E5 F7             3552                                             mov             @r1,a
15E6 19             3553                                             dec             r1
15E7 F7             3554                                             mov             @r1,a
                    3555                                                                             
15E8 7853           3556                                             mov             r0,#adec
15EA 7952           3557                                             mov             r1,#abin+3      ;hex->10
15EC 120000   F     3558                                             call    bindec
                    3559                                     
15EF 785C           3560                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
15F1 7948           3561                                             mov             r1,#bufind+8
15F3 7F04           3562                                             mov             r7,#4
15F5 E6             3563     bloin:                          mov             a,@r0
15F6 2430           3564                                             add             a,#30h
15F8 F7             3565                                             mov             @r1,a
15F9 19             3566                                             dec             r1
15FA 18             3567                                             dec             r0
15FB DFF8           3568                                             djnz    r7,bloin
15FD 78B2           3569                                mov          r0,#marker
15FF 7605           3570                                mov          @r0,#5
1601 753B08         3571                                mov          movrig,#8
1604 753A05         3572                                mov          movleft,#5
1607 789A           3573                                      mov            r0,#parT
1609 B60609         3574                                     cjne            @r0,#6,innot6
160C 534BF0         3575                                     anl                     bufind+11,#0f0h;after 5- 0.000c
160F 434B04         3576                                     orl                     bufind+11,#04h
                    3577                             
1612 020000   F     3578                                     jmp                     goto7
1615 B60309         3579     innot6: cjne            @r0,#3,innot3
1618 534BF0         3580                                     anl                     bufind+11,#0f0h;after 7- 000.0c
161B 434B20         3581                                     orl                     bufind+11,#20h
                    3582                                     ;call           ind
161E 020000   F     3583                                     jmp                     out7;goto7
1621 C3             3584     innot3: clr                     c
1622 7403           3585                                     mov                     a,#3
1624 96             3586                                     subb            a,@r0
1625 5009           3587                                     jnc                     innot1_2
1627 534BF0         3588                                     anl                     bufind+11,#0f0h;after 6- 00.00c
162A 434B40         3589                                     orl                     bufind+11,#40h
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    57

                    3590                                     
162D 020000   F     3591                                     jmp                     goto7
                    3592     
1630                3593     innot1_2:
1630 534B0F         3594                                     anl                     bufind+11,#0fh;0h;0000c
1633 C219           3595                                     clr                     bitmig
                    3596                                     ;call           ind             нет необходимости пришет пр
                             обел         
1635 020000   F     3597     rgoto7: jmp        goto7;outF
                    3598     
1638 B63276         3599     nom31:             cjne         @r0,#32h,nom32
163B 75B0FB         3600                                     mov             p3,#0fbh
163E 20B71F         3601                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3602                                     
1641                3603     lefcur:         ;;кн <- 32 нач блок 000
                    3604     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3605     ;т е сохранить ее в ячейке для мигания в противном случае
                    3606     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3607     ;       знакоместа
1641 C219           3608                                                     clr             bitmig
1643 78B2           3609                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1645 7440           3610                                     mov             a,#bufind
1647 26             3611                                             add             a,@r0                   ;a=bufind+m
                             arker
1648 F9             3612                                             mov             r1,a
1649 19             3613                                             dec             r1;;;;;;;;;;;
164A 873C           3614                                             mov             savba,@r1
                    3615                                             
164C 78B2           3616                                                     mov             r0,#marker      ;курсор сле
                             ва?
164E E53A           3617                             mov             a,movleft
1650 C3             3618                             clr             c
1651 96             3619                             subb    a,@r0
1652 7006           3620                             jnz        noequ2
1654 E53B           3621                             mov             a,movrig
1656 F6             3622                             mov             @r0,a;уст в крайнюю правую позицию
1657 020000   F     3623                             jmp             goto7
165A 120000   F     3624     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
165D 020000   F     3625                             jmp        goto7        
                    3626                                                                       
                    3627     
                    3628     ;;;;;;;;;;;;;;;;;;
1660                3629     vvinte:         ;ввод интервал                          
1660 75B0F7         3630     no31n:             mov          p3,#0f7h
1663 20B7CF         3631                                     jb              p3.7,rgoto7
1666 7633           3632                                     mov             @r0,#33h
                    3633                                     ;считать с индикатора введенный интервал
1668 7F0A           3634                                             mov             r7,#10
166A 7853           3635                                     mov             r0,#adec
166C 120000   F     3636                                     call    clearN
166F 120000   F     3637                                     call    upak4                   
1672 784F           3638                                     mov             r0,#abin
1674 7953           3639                                     mov             r1,#adec                        ;мл        
                              ст
1676 120000   F     3640                                     call    decbin                  ;abin..abin+3 (hex)
1679 794F           3641                                     mov             r1,#abin
167B 78CE           3642                                     mov             r0,#interva+1
167D E7             3643                                     mov             a,@r1
167E F6             3644                                     mov             @r0,a
167F 18             3645                                     dec             r0
1680 09             3646                                     inc             r1
1681 E7             3647                                     mov             a,@r1
1682 F6             3648                                     mov             @r0,a
                    3649                                     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    58

1683 78D5           3650                                     mov             r0,#volume                      ;объем блок
                             а
1685 7600           3651                                     mov             @r0,#0
1687 08             3652                                     inc             r0
1688 76C7           3653                                     mov             @r0,#0c7h
168A 120000   F     3654                                     call            adrblok;dptr
168D 120000   F     3655                                     call            save_hl;1я ячейка блока
1690 78B2           3656                                mov          r0,#marker
1692 76FF           3657                                mov          @r0,#0ffh
1694 D204           3658                                      setb           bitizm
1696 C20B           3659                                      clr            bitmem
1698 789A           3660     vvod2_10: mov           r0,#parT
169A B6050C         3661                                      cjne           @r0,#5,no10msv
169D 900000   F     3662                                             mov                     dptr,#te10ms
16A0 120000   F     3663     t2msme:         call            lotext
                    3664                                             
16A3 120000   F     3665                                             call            ind
16A6 020000   F     3666     no2msv:   jmp      goto7;
16A9 B606FA         3667     no10msv:        cjne            @r0,#6,no2msv   
16AC 900000   F     3668                                             mov                     dptr,#te2ms
16AF 80EF           3669                                     jmp                     t2msme
                    3670     
                    3671     
                    3672     
16B1 B6332B         3673     nom32:           cjne           @r0,#33h,nom33
16B4 75B0FB         3674                              mov            p3,#0fbh
16B7 30B787         3675                              jnb            p3.7,lefcur
16BA 75B0F7         3676                              mov            p3,#0f7h
16BD 20B7E6         3677                              jb             p3.7,no2msv;rgoto7
                    3678                              ;запомнить номер ячейки конца блока
16C0 7634           3679                              mov    @r0,#34h
16C2 7F0A           3680     INTn:                   mov             r7,#10
16C4 7853           3681                                     mov             r0,#adec
16C6 120000   F     3682                                     call    clearN
16C9 120000   F     3683                                     call    upak3                   
16CC 784F           3684                                     mov             r0,#abin
16CE 7953           3685                                     mov             r1,#adec                        ;мл        
                              ст
16D0 120000   F     3686                                     call    decbin                  ;abin..abin+3 (hex)
16D3 120000   F     3687                                     call    loadr2                  ;r2..r5
16D6 120402         3688                                     call    altof                   ;r2..r5->int
16D9 020000   F     3689     dgoto7:                  jmp            goto7
                    3690     
16DC 020000   F     3691     rlefcur:                jmp             lefcur
                    3692     
16DF B63464         3693     nom33:          cjne            @r0,#34h,labelP
16E2 75B0FB         3694                               mov           p3,#0fbh
16E5 30B7F4         3695                              jnb            p3.7,rlefcur
16E8 75B0F7         3696                              mov            p3,#0f7h
16EB 20B7EB         3697                              jb             p3.7,dgoto7
16EE 7635           3698                              mov            @r0,#35h
16F0 78B2           3699                              mov            r0,#marker
16F2 76FF           3700                              mov            @r0,#0ffh
                    3701                              ;T1<-число на индикаторе
                    3702                                               ;vvod КОН БЛ 000
16F4 78CF           3703                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
16F6 7630           3704                              mov            @r0,#30h  
16F8 C20B           3705                              clr            bitmem
16FA D204           3706                              setb           bitizm;;;;      
16FC 020000   F     3707                             jmp        goto7
16FF 020000   F     3708     vodm11_15:                      jmp             vvodm11_15
1702 020000   F     3709     me11_15de:                      jmp             me11_15dec
1705 020000   F     3710     moutkmem:                               jmp             outkmem
                    3711     
1708 020000   F     3712     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    59

                             ю
                    3713     ;обработка кнопки меню ввод
170B 301138         3714     labelS:         jnb                     bitmenu,labelP
170E 75B0EF         3715                                             mov                     p3,#0efh
1711 30B7F4         3716                                             jnb                     p3.7,nmem_menu
1714 75B0DF         3717                                             mov                     p3,#0dfh
1717 30B7EB         3718                                             jnb                     p3.7,moutkmem
171A 78B1           3719                                             mov                     r0,#vichR
171C 7415           3720                                             mov                     a,#15h
171E C3             3721                                             clr                     c
171F 96             3722                                             subb            a,@r0
1720 4021           3723                                             jc                      rme21_23
                    3724                             
1722 75B0FB         3725                                             mov                     p3,#0fbh
1725 20B7D7         3726                                             jb                      p3.7,vodm11_15
1728 78B1           3727                                             mov                     r0,#vichR
172A B611D5         3728                                             cjne                    @r0,#11h,me11_15de;<-
172D 7615           3729                                             mov                     @r0,#15h
172F 900000   F     3730                                             mov                     dptr,#teKALIB
1732 120000   F     3731                                             call            lotext
1735 020000   F     3732                                             jmp                     onmem11
1738 C211           3733     menuon:         clr             bitmenu                 ;off menu
173A D204           3734                                             setb    bitizm
                    3735     
173C 78B1           3736                                     mov             r0,#vichR
173E 7600           3737                                     mov             @r0,#0
1740 020000   F     3738                                     jmp             onmem11
                    3739     
                    3740                                             ;;;;;
                    3741             
1743 020000   F     3742     rme21_23:               jmp             me21_23 
                    3743                             
                    3744     ;режим просмотра
1746 B64130         3745     labelP:                 cjne            @r0,#41h,govvlist
1749 7642           3746                                                     mov                     @r0,#42h
                    3747                                                     ;       считать с индикатора  
174B C3             3748                                             clr                     c
174C E547           3749                                mov          a,bufind+7      
174E 9430           3750                                      subb           a,#30h
1750 B40002         3751                                      cjne           a,#0,chaipr
1753 7401           3752                                      mov            a,#1
1755 F538           3753     chaipr:                          mov            nblok,a
1757 900000   F     3754                                mov          dptr,#teCH;ОТСЧЕТ 000
175A 120000   F     3755                                call         lotext
175D 534BEF         3756                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1760 78B2           3757                                mov          r0,#marker
1762 7607           3758                                mov          @r0,#7
1764 753B09         3759                                mov          movrig,#9
1767 753A07         3760                                mov          movleft,#7
176A 120000   F     3761                                             call            z_1s
176D 020000   F     3762                        jmp     goto7;outF
1770 020000   F     3763     label43:                jmp             label7
                    3764     
1773 020000   F     3765     rlist_43:                       jmp                     list_43                            
                                  
1776 020000   F     3766     mlabL2r:                        jmp                     mlabL2
1779 B642F7         3767     govvlist:                       cjne            @r0,#42h,rlist_43
177C 75B0FB         3768                                                                     mov                     p3,
                             #0fbh
177F 30B7F4         3769                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1782 75B0F7         3770                                                             mov                     p3,#0f7h
1785 20B7E8         3771                                                             jb                      p3.7,label4
                             3
1788 7643           3772                                                             mov                     @r0,#43h;vv
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    60

                             od 
178A 78B2           3773                                                             mov                     r0,#marker
178C 76FF           3774                                                             mov                     @r0,#0ffh
178E 7F0A           3775                                                                     mov             r7,#10
1790 7853           3776                                     mov             r0,#adec
1792 120000   F     3777                                     call    clearN
1795 120000   F     3778                                     call    upak3                   
1798 784F           3779                                     mov             r0,#abin
179A 7953           3780                                     mov             r1,#adec                        ;мл        
                              ст
179C 120000   F     3781                                     call    decbin                  ;abin..abin+3 (hex)
179F 120000   F     3782                                     call    loadr2                  ;r2..r5
17A2 ED             3783                                     mov             a,r5                            ;сохр номер
                              лемента
17A3 F537           3784                                     mov             nelem,a
17A5 120402         3785                                     call    altof                   ;r2..r5->int
17A8 900000   F     3786                                     mov             dptr,#ch_1;
17AB 120000   F     3787                                     call    ldc_ltemp                       ;r8..r11
17AE 1201D1         3788                                     call    flsub
17B1 900000   F     3789                                     mov             dptr,#ch_4;
17B4 120000   F     3790                                     call    ldc_ltemp                       ;r8..r11
17B7 120203         3791                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
17BA 120343         3792                                     call            ftol                    ;r2..r5->hex
17BD C002           3793                                     push            rr2
17BF C003           3794                                     push            rr3
17C1 C004           3795                                     push            rr4
17C3 C005           3796                                     push            rr5
17C5 120000   F     3797                                     call            adrblok;dptr-
17C8 D005           3798                                     pop                     rr5
17CA D004           3799                                     pop                     rr4
17CC D003           3800                                     pop                     rr3
17CE D002           3801                                     pop                     rr2
17D0 79D8           3802                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
17D2 E582           3803                                     mov                     a,dpl
17D4 2D             3804                                     add                     a,r5
17D5 F582           3805                                     mov                     dpl,a
17D7 F7             3806                                     mov                     @r1,a           ;low
17D8 E583           3807                                     mov                     a,dph
17DA 3C             3808                                     addc            a,r4
17DB F583           3809                                     mov                     dph,a
17DD 19             3810                                     dec                     r1
17DE F7             3811                                     mov                     @r1,a                   ;high
                    3812                             
17DF                3813     li42_43:
17DF 120000   F     3814                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
17E2 900000   F     3815                                     mov             dptr,#ch10;
17E5 120000   F     3816                                     call    ldc_ltemp
17E8 120000   F     3817                                     call    zdiv    
                    3818                                     ;;;;;;;;;;;
17EB 120000   F     3819                                     call    maform
                    3820                                     ;;;;
                    3821     
                    3822                                     ;;;;;;;
17EE 784F           3823                                             mov             r0,#abin
17F0 120000   F     3824                                             call    saver2
17F3 7853           3825                                             mov             r0,#adec
17F5 7952           3826                                             mov             r1,#abin+3      ;hex->10
17F7 120000   F     3827                                             call    bindec
                    3828                                     
17FA 785C           3829                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
17FC 7945           3830                                             mov             r1,#bufind+5
17FE 7F07           3831                                             mov             r7,#7
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    61

1800 E6             3832     ch43:                           mov             a,@r0
1801 2430           3833                                             add             a,#30h
1803 F7             3834                                             mov             @r1,a
1804 19             3835                                             dec             r1
1805 18             3836                                             dec             r0
1806 DFF8           3837                                             djnz    r7,ch43
1808 7847           3838                                             mov             r0,#bufind+7
180A 762D           3839                                             mov             @r0,#2dh          ;-2..-9
180C 7840           3840                                             mov             r0,#bufind
180E 762B           3841                                             mov             @r0,#2bh
1810 300202         3842                                             jnb             znmat,nozzmi43;bitznak,nozzmi
1813 762D           3843                                             mov             @r0,#2dh
1815 E538           3844     nozzmi43:       mov             a,nblok
1817 B40104         3845                                             cjne    a,#1,nozzmi1            
181A 7934           3846                                             mov             r1,#sadiap;diap
181C 8010           3847                                             jmp             nozzbl
181E B40204         3848     nozzmi1:        cjne    a,#2,nozzmi2            
1821 7932           3849                                             mov             r1,#sadiap2;diap
1823 8009           3850                                             jmp             nozzbl
1825 B40304         3851     nozzmi2:        cjne    a,#3,nozzmi3            
1828 7931           3852                                             mov             r1,#sadiap3;diap
182A 8002           3853                                             jmp             nozzbl
182C 7930           3854     nozzmi3:        mov             r1,#sadiap4;diap
                    3855                                     
182E 7848           3856     nozzbl:         mov             r0,#bufind+8
1830 E7             3857                                             mov             a,@r1
1831 B40808         3858                                             cjne    a,#8,nodi8_43
1834 7630           3859                                             mov             @r0,#30h                 ;10-10
1836 18             3860                                             dec             r0
1837 7663           3861                                             mov             @r0,#63h;31h
1839 08             3862                                             inc             r0
183A 800E           3863                                             jmp             see_l43
183C B40908         3864     nodi8_43:       cjne    a,#9,nodi9_43
                    3865                                     
183F 7631           3866                                             mov             @r0,#31h           ;10-11
1841 18             3867                                             dec             r0
1842 7663           3868                                             mov             @r0,#63h;31h
                    3869                                     
1844 08             3870                                             inc             r0
1845 8003           3871                                             jmp             see_l43
1847 2432           3872     nodi9_43:               add             a,#32h
1849 F6             3873                                             mov             @r0,a;
184A 08             3874     see_l43:                        inc             r0
184B 7641           3875                                             mov             @r0,#"A";"E";
                    3876                             ;       inc             r0
                    3877                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    3878                             ;       inc             r0;             mov             bufind+11
                    3879                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
184D 434B10         3880                             orl                     bufind+11,#10h
1850 120000   F     3881     out43:          call            ind
1853 120000   F     3882                                             call            z_1s
1856 020000   F     3883                                             jmp             out7                               
                                  
                    3884     
                    3885                                     ;;;;;;;;        
1859 783D           3886     label7: mov             r0,#chkl
185B 7604           3887                                     mov             @r0,#04;3
185D 08             3888                                     inc             r0
185E 76E8           3889                                     mov             @r0,#0e8h               ;1000
1860 020000   F     3890                                     jmp             out7;
1863 B64351         3891     list_43:                cjne    @r0,#43h,noli_43
1866 75B0FB         3892                                                     mov             p3,#0fbh                ;43
                             h <-
1869 20B70A         3893                                                     jb              p3.7,vvod43             ;vv
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    62

                             od
186C C20B           3894                                                     clr             bitmem
186E D204           3895                                                     setb    bitizm
1870 78B2           3896                                                     mov             r0,#marker
1872 76FF           3897                                                     mov             @r0,#0ffh
1874 80E3           3898                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3899     
1876 7644           3900     vvod43:                 mov             @r0,#44h
1878 E537           3901                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
187A 04             3902                                                     inc             a
187B F552           3903                                                     mov             abin+3,a
                    3904                                                     
187D F537           3905                                                     mov             nelem,a
187F E4             3906                                                     clr             a
1880 F551           3907                                                     mov             abin+2,a
1882 F550           3908                                                     mov             abin+1,a
1884 F54F           3909                                                     mov             abin,a
                    3910                                             
1886 7853           3911                                             mov             r0,#adec
1888 7952           3912                                             mov             r1,#abin+3      ;hex->10
188A 120000   F     3913                                             call    bindec
188D 7840           3914                                             mov             r0,#bufind;почистить индикатор
188F 7F0A           3915                                             mov             r7,#10
1891 7420           3916                                             mov             a,#20h
1893 F6             3917     cle20:          mov             @r0,a
1894 08             3918                                             inc             r0
1895 DFFC           3919                                             djnz    r7,cle20
                    3920                                             ;;;;;;
1897 900000   F     3921                                             mov             dptr,#teCH;ОТСЧЕТ 000
189A 120000   F     3922                                call         lotext
189D 534BEF         3923                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
18A0 785C           3924                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
18A2 7949           3925                                             mov             r1,#bufind+9
18A4 7F03           3926                                             mov             r7,#3
18A6 E6             3927     ch43_42:                                mov             a,@r0
18A7 2430           3928                                             add             a,#30h
18A9 F7             3929                                             mov             @r1,a
18AA 19             3930                                             dec             r1
18AB 18             3931                                             dec             r0
18AC DFF8           3932                                             djnz    r7,ch43_42
18AE 120000   F     3933                                             call            ind
18B1 120000   F     3934                                             call            z_1s
18B4 020000   F     3935                                             jmp             out7
18B7 B64419         3936     noli_43:        cjne            @r0,#44h,vvosta
18BA 7643           3937                                             mov                     @r0,#43h
18BC 79D8           3938                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
18BE E7             3939                                                     mov                     a,@r1
18BF F582           3940                                                     mov                     dpl,a
18C1 19             3941                                                     dec                     r1
18C2 E7             3942                                                     mov                     a,@r1;high
18C3 F583           3943                                                     mov                     dph,a
18C5 A3             3944                                                     inc                     dptr
18C6 A3             3945                                                     inc                     dptr
18C7 A3             3946                                                     inc                     dptr
18C8 A3             3947                                                     inc                     dptr
18C9 E583           3948                                                     mov                     a,dph
18CB F7             3949                                                     mov                     @r1,a
18CC 09             3950                                                     inc                     r1
18CD E582           3951                                                     mov                     a,dpl
18CF F7             3952                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    63

18D0 020000   F     3953                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3954     
18D3 B66111         3955     vvosta:                 cjne            @r0,#61h,vvostad
18D6 7662           3956                                                     mov                     @r0,#62h
18D8 900000   F     3957                                                     mov                     dptr,#teMAX;
18DB 120000   F     3958                                                     call            lotext
18DE 120000   F     3959                                                     call            vichmax
18E1 120000   F     3960                                                     call            z_05s;z_1s
18E4 020000   F     3961                                                     jmp             goto7
                    3962     
18E7 B66211         3963     vvostad:                cjne            @r0,#62h,rousta
18EA 7663           3964                                                     mov                     @r0,#63h
18EC 900000   F     3965                                                     mov             dptr,#teMid;
18EF 120000   F     3966                                                     call    lotext
18F2 120000   F     3967                                                     call            vichmean
18F5 120000   F     3968                                                     call            z_05s
18F8 020000   F     3969                                                     jmp             goto7
                    3970     
18FB B6630E         3971     rousta:                 cjne            @r0,#63h,rousta1
18FE 7661           3972                                                     mov                     @r0,#61h
1900 900000   F     3973                                                     mov             dptr,#teMin;
1903 120000   F     3974                                                     call    lotext
1906 120000   F     3975                                                     call            vichmin
1909 120000   F     3976                                                     call            z_05s
190C 020000   F     3977     rousta1:                jmp             goto7
                    3978     
190F 020000   F     3979     rLABELP:                jmp                     LABELP
1912 78B1           3980     vvodm11_15:     mov                     r0,#vichR;vvod
1914 75B0F7         3981                                                     mov                     p3,#0f7h
1917 20B7F5         3982                                             jb                      p3.7,rLABELP;????
                    3983                                     
                    3984     
191A B61115         3985                                             cjne                    @r0,#11h,tome21
191D 7621           3986                                             mov                     @r0,#21h;vvod
191F 900000   F     3987                                             mov                     dptr,#teTE11
1922 120000   F     3988                                             call            lotext
1925 534B03         3989                                             anl                     bufind+11,#03h ;погасить за
                             пятые
1928 020000   F     3990                                             jmp                     onmem11
                    3991     
192B 16             3992     me11_15dec:             dec             @r0                             ;<-
192C 120000   F     3993     lokame1:        call            lomenu
192F 020000   F     3994                                             jmp                     onmem11
                    3995     
1932 B61206         3996     tome21:         cjne                    @r0,#12h,tome13
                    3997                                             ;вкл тест интерфейса
1935 020000   F     3998                                             jmp             testrs;??????????
1938 020000   F     3999                                             jmp                     onmem11
                    4000     
193B B6132A         4001     tome13:         cjne                    @r0,#13h,tome14
193E 7631           4002                                             mov                     @r0,#31h
                    4003                                             
1940 7A50           4004                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1942 7B2C           4005                                             mov                     r3,#2ch
1944 120454         4006                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1947 E508           4007                                             mov                     a,r8
1949 B4000E         4008                                             cjne            a,#00,skor19
194C 900000   F     4009                                             mov                     dptr,#teS57_6;57,6
194F 120000   F     4010                                             call            lotext
1952 434B80         4011                                     orl                     bufind+11,#80h
1955 C213           4012                                             clr                     bitv19
                    4013     
1957 020000   F     4014                                             jmp             onmem11
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    64

195A 900000   F     4015     skor19:         mov                     dptr,#teS19_2
195D 120000   F     4016                                             call            lotext
1960 D213           4017                                             setb            bitv19
1962 434B80         4018                                             orl                     bufind+11,#80h
1965 020000   F     4019                                             jmp                     onmem11
                    4020                                             
                    4021     
1968 B61415         4022     tome14:         cjne                    @r0,#14h,tome15
196B D204           4023                                             setb            bitizm
196D 7881           4024                                             mov                     r0,#chavt
196F 7600           4025                                             mov                     @r0,#0
1971 08             4026                                             inc                     r0
1972 7600           4027                                             mov                     @r0,#0
1974 C211           4028     outmenu:        clr                     bitmenu
1976 020000   F     4029                                             jmp                     out7
                    4030     
1979 78B1           4031     goparom:        mov             r0,#vichR               ;режим меню 52
197B 7652           4032                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
197D 020000   F     4033                                             jmp                     goparol
1980 2016F6         4034     tome15:         jb              bitpar,goparom  
1983 7651           4035                                             mov                     @r0,#51h;ПАРОЛЬ 000
1985 120000   F     4036                                             call            lomenu
1988 78B2           4037                                             mov                     r0,#marker
198A 7607           4038                                             mov                     @r0,#7
198C 753B09         4039                                             mov                     movrig,#9
198F 753A07         4040                                             mov                     movleft,#7
                    4041                                             ;setb           bitizm
1992 020000   F     4042                                             jmp                     onmem11
                    4043     
                    4044     
1995 78B1           4045     me21_23:        mov                     r0,#vichR               ;<-
1997 7423           4046                                             mov                     a,#23h
1999 C3             4047                                             clr                     c
199A 96             4048                                             subb            a,@r0
199B 403D           4049                                             jc                      labelS1
199D 75B0FB         4050                                             mov                     p3,#0fbh
19A0 20B718         4051                                             jb                      p3.7,vv21_23
19A3 B6210B         4052                                             cjne            @r0,#21h,me21_23dec;-<
19A6 7623           4053                                             mov                     @r0,#23h
19A8 900000   F     4054                                             mov                     dptr,#teTE7
19AB 120000   F     4055                                             call            lotext
19AE 020000   F     4056                                             jmp                     onmem11
19B1                4057     me21_23dec:     
19B1 16             4058                                             dec                     @r0
19B2 120000   F     4059                                             call            lomenu
19B5 020000   F     4060                                             jmp                     onmem11
19B8 020000   F     4061     onmem12:        jmp             outF    ;(ie7)                          
                    4062                                                     
19BB 75B0F7         4063     vv21_23:        mov             p3,#0f7h                ;vvod
19BE 20B7F7         4064                                             jb              p3.7,onmem12
19C1 B6210C         4065                                             cjne            @r0,#21h,test22
                    4066                                             ;mov                    dptr,#tabt11;заслать ус 11А
19C4 120000   F     4067     tests:          call            lotpus
19C7 D215           4068                                             setb            biteizm;запомнить режим ТИ
19C9 D204           4069                                             setb            bitizm
19CB C211           4070                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
19CD 020000   F     4071                                             jmp                     onmem11
19D0 B62202         4072     test22:         cjne            @r0,#22h,test23
                    4073                                     ;       mov                     dptr,#tabt9;заслать ус 9А
19D3 80EF           4074                                             jmp             tests   
19D5                4075     test23:
                    4076                                     ;       mov                     dptr,#tabt7;заслать ус 7А
19D5 80ED           4077                                             jmp             tests   
19D7 020000   F     4078     left_s:         jmp                     left_sk
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    65

19DA B63149         4079     labelS1:        cjne            @r0,#31h,me_41
19DD 75B0FB         4080                                             mov                     p3,#0fbh                   
                                  ;<-
19E0 30B7F4         4081                                             jnb                     p3.7,left_s
19E3 75B0F7         4082                                             mov                     p3,#0f7h
19E6 20B7CF         4083                                             jb                      p3.7,onmem12
                    4084                                             ;запомнить признак установленной скорости в рпзу
                    4085     
                    4086     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4087     ;и запись во внешнее озу(0000h)
19E9 7900           4088                                             mov             r1,#0                   ;
19EB 7A50           4089                                     mov             r2,#50h
19ED 7B00           4090                                     mov             r3,#00
19EF 120499         4091                                     call    copyPP
                    4092                                     ;внести изменения во внешн озу
                    4093                                     ;KD=00 01 86 A0 (KD=1)
                    4094                                     ;кофф *100000 и переведенный в hex формат
                    4095                                     ;согласно адресов диапазонов и адресов яч вн озу 
19F2 792C           4096                                     mov             r1,#2ch
19F4 7400           4097                                     mov             a,#0;57,6
19F6 301302         4098                                     jnb             bitv19,spwri
19F9 7401           4099                                     mov             a,#1;19.6
19FB F3             4100     spwri:  movx    @r1,a
                    4101     ;стереть страницу пап прогр 
19FC 905000         4102                                     mov             dptr,#5000h
19FF 7FFF           4103                                     mov             r7,#0ffh
1A01 12043E         4104                                     call    cle256
                    4105     ;и запись в ячейки кофф памяти прогр (3000h) 
1A04 7FFF           4106                                     mov             r7,#0ffh
1A06 7900           4107                                     mov             r1,#0                           ;external r
                             am
1A08 905000         4108                                     mov             dptr,#5000h
1A0B 120480         4109                                     call    wrpage
                    4110             
1A0E 201305         4111                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1A11 758DF4         4112                                             mov                     TH1,#244                ;57
                             .6
1A14 8003           4113                                             jmp                     outsko
1A16 758DDC         4114     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1A19 C211           4115     outsko:         clr             bitmenu
1A1B D204           4116                                             setb            bitizm
1A1D 020000   F     4117                                             jmp                     out7
                    4118     
1A20 020000   F     4119     rlabels4:               jmp             labels4
1A23 020000   F     4120     rlabelS13:      jmp             labelS13
                    4121     
1A26 B651F7         4122     me_41:          cjne            @r0,#51h,rlabels4
1A29 75B0FB         4123                                             mov             p3,#0fbh;<-
1A2C 30B7F4         4124                                             jnb             p3.7,rlabelS13
1A2F 75B0F7         4125                                             mov             p3,#0f7h
1A32 20B76D         4126                                             jb              p3.7,vvmenu
                    4127                                             ;ввод пароля
                    4128                                     
                    4129     ;       считать с индикатора 
1A35 7F0E           4130                                     mov             r7,#14
1A37 784F           4131                                     mov             r0,#abin
1A39 120000   F     4132                                     call    clearN                  
                    4133                                     
                    4134     ;чтение номера байта с индикатора(3байта)
                    4135     ;bufind+3..bufind+9
                    4136     ;-  - - -
                    4137     ;- - - - - - - - - -
                    4138     ;adec..adec+9
                    4139     ;ст            мл
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    66

1A3C 7849           4140                                     mov             r0,#bufind+9;
1A3E 795C           4141                                     mov             r1,#adec+9
1A40 7F03           4142                                     mov             r7,#3;3bait
1A42 C3             4143     upav1:          clr             c
1A43 E6             4144                                     mov             a,@r0
1A44 9430           4145                                     subb    a,#30h
1A46 F7             4146                                     mov             @r1,a
1A47 18             4147                                     dec             r0
1A48 19             4148                                     dec             r1
1A49 DFF7           4149                                     djnz    r7,upav1;adec+7..adec+9
1A4B 7A50           4150                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1A4D 7B28           4151                                             mov                     r3,#28h
1A4F 120454         4152                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1A52 800F           4153     jmp                     goparol
1A54 E508           4154                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1A56 B55A4C         4155                                     cjne            a,adec+7,parerr
1A59 E509           4156                                     mov                     a,r9    
1A5B B55B47         4157                                     cjne            a,adec+8,parerr
1A5E E50A           4158                                     mov                     a,r10
1A60 B55C42         4159                                     cjne            a,adec+9,parerr
                    4160                                     ;равны
1A63 78B1           4161     goparol:        mov             r0,#vichR               ;режим меню 52
1A65 7652           4162                                             mov             @r0,#52h                ;0000-n
1A67 900000   F     4163                                             mov             dptr,#teKD;00000-nA
1A6A 120000   F     4164                                             call            lotext
                    4165                                             ;;;;;;;;;
                    4166                                                     ;n(hex)->abin
1A6D 120000   F     4167                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1A70 2552           4168                                             add             a,abin+3
1A72 F552           4169                                             mov             abin+3,a
1A74 7853           4170                                             mov             r0,#adec
1A76 7952           4171                                             mov             r1,#abin+3      ;hex->10
1A78 120000   F     4172                                             call    bindec
1A7B 855C48         4173                                             mov             bufind+8,adec+9
1A7E 75472D         4174                                             mov             bufind+7,#2dh
                    4175     
1A81 79AE           4176                                             mov             r1,#diap
1A83 7848           4177                                             mov             r0,#bufind+8
1A85 E7             4178                                             mov             a,@r1
1A86 B40807         4179                                             cjne    a,#8,nodi8k
1A89 7630           4180                                             mov             @r0,#30h                 ;10-10
1A8B 18             4181                                             dec             r0
1A8C 7663           4182                                             mov             @r0,#63h;31h
1A8E 8008           4183                                             jmp             nodisk9
1A90 B40905         4184     nodi8k:                         cjne    a,#9,nodisk9
                    4185                                     
1A93 7631           4186                                             mov             @r0,#31h           ;10-11
1A95 18             4187                                             dec             r0
1A96 7663           4188                                             mov             @r0,#63h;31h
                    4189                                     
                    4190     
1A98 78B2           4191     nodisk9:        mov                     r0,#marker
1A9A 7601           4192                                             mov                     @r0,#1
1A9C 753A01         4193                                             mov                     movleft,#1
1A9F 753B05         4194                                             mov                     movrig,#5
                    4195                                             
1AA2 020000   F     4196     vvmenu:         jmp             goto7
                    4197     
1AA5 753932         4198     parerr:         mov                     nuerr,#32h
1AA8 120000   F     4199                                             call            error
1AAB 120000   F     4200                                             call            ind
1AAE 120000   F     4201                                             call            z_1s
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    67

1AB1 C211           4202                                             clr                     bitmenu
1AB3 D204           4203                                             setb            bitizm
1AB5 78B2           4204                                             mov                     r0,#marker
1AB7 76FF           4205                                             mov                     @r0,#0ffh
1AB9 020000   F     4206                                             jmp             goto7
                    4207     
1ABC 30130B         4208     left_sk:                jnb                     bitv19,tosk19;<-
1ABF 900000   F     4209                                             mov                     dptr,#teS57_6;57,6
1AC2 120000   F     4210                                             call            lotext
1AC5 C213           4211                                             clr                     bitv19
1AC7 020000   F     4212                                             jmp             out7
1ACA 900000   F     4213     tosk19:         mov                     dptr,#teS19_2
1ACD 120000   F     4214                                             call            lotext
1AD0 D213           4215                                             setb            bitv19
1AD2 020000   F     4216                                             jmp             out7
                    4217     
1AD5                4218     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4219             
                    4220     ;;;;;;;;;;;;;;;;;;
                    4221     ;необходимо не портить цифру в следуюем справа знакоместе
                    4222     ;т е сохранить ее в ячейке для мигания в противном случае
                    4223     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4224     ;       знакоместа
1AD5 78B2           4225                                     mov             r0,#marker
1AD7 7440           4226                                     mov             a,#bufind
1AD9 26             4227                                             add             a,@r0                   ;a=bufind+m
                             arker
1ADA F9             4228                                             mov             r1,a
1ADB 19             4229                                             dec             r1;inc          r1
1ADC 873C           4230                                             mov             savba,@r1
                    4231                                                     
1ADE 78B2           4232                                                     mov             r0,#marker
1AE0 16             4233                                                     dec             @r0                        
                                  
1AE1 C219           4234                                     clr             bitmig
1AE3 E53A           4235                                     mov                     a,movleft
1AE5 B6064F         4236                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1AE8 06             4237                                     inc             @r0
1AE9 020000   F     4238                                             jmp             goto7
                    4239     ;;;;;;;
                    4240     
1AEC                4241     vvkali52:       ;введено значение для калибровки
                    4242                                             ;число на индикаторе ->Ak  (52h)
                    4243                                             ;       считать с индикатора 
1AEC 7F0E           4244                                     mov             r7,#14
1AEE 784F           4245                                     mov             r0,#abin
1AF0 120000   F     4246                                     call    clearN                  
                    4247                                     
                    4248     ;чтение номера байта с индикатора(3байта)
                    4249     ;bufind+1..bufind+5
                    4250     ;-  - - -
                    4251     ;- - - - - - - - - -
                    4252     ;adec..adec+9
                    4253     ;ст            мл
1AF3 7845           4254                                     mov             r0,#bufind+5;
1AF5 795C           4255                                     mov             r1,#adec+9
1AF7 7F05           4256                                     mov             r7,#5;5bait
1AF9 C3             4257     upav2:          clr             c
1AFA E6             4258                                     mov             a,@r0
1AFB 9430           4259                                     subb    a,#30h
1AFD F7             4260                                     mov             @r1,a
1AFE 18             4261                                     dec             r0
1AFF 19             4262                                     dec             r1
1B00 DFF7           4263                                     djnz    r7,upav2;adec+7..adec+9
                    4264     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    68

1B02 784F           4265                                     mov             r0,#abin
1B04 7953           4266                                     mov             r1,#adec                        ;мл        
                              ст
1B06 120000   F     4267                                     call    decbin                  ;abin..abin+3 (hex)
1B09 120000   F     4268                                     call    loadr2                  ;r2..r5
1B0C 120402         4269                                     call    altof   ;r2..r5->float
1B0F 900000   F     4270                                     mov     dptr,#ch_10;10
1B12 120000   F     4271                                     call    ldc_ltemp                       ;r8..r11=8
1B15 120203         4272                                     call    flmul
1B18 78A4           4273                                     mov             r0,#rez_Ak
1B1A 120000   F     4274                                     call    saver2
1B1D C211           4275                                             clr                     bitmenu
1B1F D212           4276                                             setb            bitklb
                    4277                                             ;зажечь KMП
1B21 D204           4278                                             setb            bitizm;бит калибровки уже установле
                             н
1B23 78B2           4279                                             mov                     r0,#marker
1B25 76FF           4280                                             mov                     @r0,#0ffh
1B27 783D           4281                                     mov             r0,#chkl
1B29 76FF           4282                                     mov             @r0,#0ffh
1B2B 08             4283                                     inc             r0
1B2C 76FF           4284                                     mov             @r0,#0ffh;38h
1B2E 120000   F     4285                                     call            z_1s
1B31 020000   F     4286                                     jmp             out7
                    4287     
                    4288     
1B34 020000   F     4289                                             jmp             goto7
                    4290                                              
1B37 020000   F     4291     onmem13:        jmp             goto7   ;(ie7)
                    4292     
1B3A B642AF         4293     labels4:        cjne            @r0,#42h,vvkali52
1B3D 75B0FB         4294                                             mov                     p3,#0fbh;<-
1B40 30B7F4         4295                                             jnb             p3.7,onmem13
1B43 75B0F7         4296                                             mov             p3,#0f7h;vvod
1B46 20B7EE         4297                                             jb              p3.7,onmem13
                    4298                                             
                    4299             
1B49 020000   F     4300     jmp             out7                                                    
                    4301     ;;;;;;;
1B4C                4302     labelI:
1B4C 75B0FE         4303                                     mov             p3,#0feh
1B4F E5B0           4304                                     mov             a,p3
1B51 20E703         4305                                     jb              acc.7,nopoint
                    4306                                     ;
1B54 020000   F     4307                                     jmp             goto7;out7
                    4308     
1B57 75B0FB         4309     nopoint:                mov             p3,#0fbh
1B5A E5B0           4310                                     mov             a,p3
1B5C 20E72C         4311                                     jb              acc.7,nopoin7
1B5F 78B2           4312     labelS3:mov             r0,#marker
1B61 E53A           4313                                     mov             a,movleft
1B63 B40309         4314                                     cjne    a,#3,poina1
1B66 B6030B         4315                                     cjne    @r0,#3,nomarl;26
                    4316                                     ;mov            @r0,#9
1B69 E53B           4317     poina2: mov                     a,movrig                ;кн <- B=+00000
1B6B F6             4318                                     mov                     @r0,a
1B6C 020000   F     4319                                     jmp             goto7;  out7
                    4320     
1B6F B60402         4321     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1B72 80F5           4322                                             jmp             poina2
                    4323     
                    4324     
1B74                4325     nomarl:                 ;                               29.12.06
                    4326     ;;;;;;;;;;;;;;;;;;
                    4327     ;необходимо не портить цифру в следуюем справа знакоместе
                    4328     ;т е сохранить ее в ячейке для мигания в противном случае
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    69

                    4329     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4330     ;       знакоместа
1B74 78B2           4331                                     mov             r0,#marker
1B76 7440           4332                                     mov             a,#bufind
1B78 26             4333                                             add             a,@r0                   ;a=bufind+m
                             arker
1B79 F9             4334                                             mov             r1,a
1B7A 09             4335                                             inc             r1
1B7B 873C           4336                                             mov             savba,@r1
                    4337                                                     
1B7D 78B2           4338                                                     mov             r0,#marker
1B7F 16             4339                                                     dec             @r0                        
                                  
1B80 C219           4340                                     clr             bitmig
1B82 E53A           4341                                     mov                     a,movleft
1B84 B4036B         4342                                     cjne            a,#3,poinA
1B87 B60266         4343                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
                             0000
1B8A 06             4344     poin3:  inc             @r0
                    4345     ;нажат ввод А =000000 запомнить константу А
1B8B 75B0F7         4346     nopoin7:           mov          p3,#0f7h
1B8E E5B0           4347                                     mov             a,p3
1B90 20E75D         4348                                     jb              acc.7,gogo7;out7
1B93 78B1           4349                                     mov             r0,#vichR
1B95 E6             4350                                     mov             a,@r0
1B96 B6215E         4351                                     cjne    @r0,#21h,no21p7
1B99 7611           4352                                     mov             @r0,#11h
                    4353                             ;       считать с индикатора  упаковать в плавающий формат
                    4354                             ;   сохранить
1B9B 7F0E           4355                                     mov             r7,#14
1B9D 784F           4356                                     mov             r0,#abin
1B9F 120000   F     4357                                     call    clearN                  
1BA2 120000   F     4358                                     call    upakA
                    4359                                     
1BA5 784F           4360                                     mov             r0,#abin
1BA7 7953           4361                                     mov             r1,#adec                        ;мл        
                              ст
1BA9 120000   F     4362                                     call    decbin                  ;abin..abin+3 (hex)
1BAC 120000   F     4363                                     call    loadr2                  ;r2..r5
1BAF 120402         4364                                     call    altof                   ;r2..r5->float
1BB2 78BC           4365                                     mov                     r0,#konstA
1BB4 120000   F     4366                                     call            saver2
1BB7 900000   F     4367                                     mov                     dptr,#ch0
1BBA 120000   F     4368                                     call            ldc_ltemp
1BBD 1201D6         4369                                     call            flcmp
1BC0 6010           4370                                     jz              erra0
                    4371     ;26
1BC2 78B2           4372                                     mov             r0,#marker
1BC4 76FF           4373                                     mov             @r0,#0ffh
                    4374                                     
1BC6 900000   F     4375                                     mov             dptr,#teVICH;teBequ0
1BC9 120000   F     4376                                     call    lotext
                    4377                             ;       call            outB
1BCC 534BBF         4378                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4379                             ;       orl             bufind+11,#80h
1BCF 020000   F     4380                                     jmp             goto7
                    4381     
1BD2 78B2           4382     erra0:          mov             r0,#marker
1BD4 76FF           4383                                             mov             @r0,#0ffh
1BD6 753934         4384                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
1BD9 120000   F     4385                                             call            error
1BDC 120000   F     4386                                             call            ind
1BDF 120000   F     4387                                             call            z_1s
1BE2 78B1           4388                                             mov                     r0,#vichR
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    70

1BE4 7600           4389                                             mov                     @r0,#0
1BE6 C214           4390                                             clr                     bitvich
1BE8 C206           4391                                             clr                     bitvi11
1BEA D204           4392                                             setb            bitizm
1BEC 78B2           4393                                             mov                     r0,#marker
1BEE 76FF           4394                                             mov                     @r0,#0ffh
1BF0 802E           4395     gogo7:          jmp                     out7;goto7
                    4396     
1BF2 B6032B         4397     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1BF5 8093           4398                                             jmp             poin3
                    4399     
1BF7                4400     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4401                             ;   сохранить
1BF7 7F0E           4402                                     mov             r7,#14
1BF9 784F           4403                                     mov             r0,#abin
1BFB 120000   F     4404                                     call    clearN                  
1BFE 120000   F     4405                                     call    upakB                   
1C01 784F           4406                                     mov             r0,#abin
1C03 7953           4407                                     mov             r1,#adec                        ;мл        
                              ст
1C05 120000   F     4408                                     call    decbin                  ;abin..abin+3 (hex)
1C08 120000   F     4409                                     call    loadr2                  ;r2..r5
1C0B 120402         4410                                     call    altof                   ;r2..r5->int
1C0E 301B04         4411                                     jnb             bitznB,pozB
1C11 EA             4412                                     mov             a,r2
1C12 4480           4413                                     orl             a,#80h
1C14 FA             4414                                     mov             r2,a                    ;знак-
1C15                4415     pozB:           ;mov            r0,#konstB
                    4416                                     ;call   saver2
                    4417     
1C15 79B2           4418                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1C17 77FF           4419                                     mov             @r1,#0ffh
1C19 78B1           4420                                     mov             r0,#vichR
1C1B 7611           4421                                     mov             @r0,#11h
1C1D 020000   F     4422                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4423                                     
                    4424     
1C20                4425     out7:                   ;mov            IE,#80h
1C20 D083           4426                                     pop             dph
1C22 D082           4427                                     pop             dpl
1C24 D007           4428                                     pop             rr7     
1C26 D006           4429                                     pop             rr6
1C28 D005           4430                                     pop             rr5
1C2A D004           4431                                     pop             rr4
1C2C D003           4432                                     pop             rr3
1C2E D002           4433                                     pop             rr2
1C30 D001           4434                                     pop             rr1                             
1C32 D000           4435                                     pop             rr0
1C34 D0D0           4436                                     pop             psw
1C36 D0E0           4437                                     pop             acc
1C38 75AD00         4438                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1C3B 75B0C0         4439                             mov             P3,#0c0h
                    4440                             ;       mov             EIE2,#30H
1C3E C219           4441     clr             bitmig
1C40 E586           4442                                             mov             a,P6            ;p6.4=0
1C42 54EF           4443                             anl             a,#0efh
1C44 F586           4444                             mov             P6,a
1C46 00             4445                             nop
1C47 00             4446                             nop
                    4447                                     
1C48 E586           4448                             mov             a,P6                    ;p6.4=1 
1C4A 4410           4449                             orl             a,#10h
1C4C F586           4450                             mov             P6,a                        
1C4E 32             4451                                     reti
                    4452     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    71

                    4453     
                    4454                                     
                    4455     
                    4456     
1C4F 78B1           4457     lomenu:         mov             r0,#vichR
1C51 B61107         4458                                             cjne    @r0,#11h,menu12
1C54 900000   F     4459                                             mov             dptr,#teTESI
1C57 120000   F     4460     lome1:                  call    lotexT
1C5A 22             4461                                             ret
1C5B B61205         4462     menu12:         cjne    @r0,#12h,menu13
1C5E 900000   F     4463                                             mov             dptr,#teTESR
1C61 80F4           4464                                             jmp             lome1
1C63 B61305         4465     menu13:         cjne    @r0,#13h,menu14
1C66 900000   F     4466                                             mov             dptr,#teSKOR
1C69 80EC           4467                                             jmp             lome1
1C6B B61405         4468     menu14:         cjne    @r0,#14h,menu15
1C6E 900000   F     4469                                             mov             dptr,#teAVK
1C71 80E4           4470                                             jmp             lome1
1C73 B61505         4471     menu15:                 cjne    @r0,#15h,menu21
1C76 900000   F     4472                                             mov             dptr,#teKALIB
1C79 80DC           4473                                             jmp             lome1
                    4474     
1C7B B62105         4475     menu21: cjne    @r0,#21h,menu22
1C7E 900000   F     4476                                             mov             dptr,#teTE11
1C81 80D4           4477                                             jmp             lome1
1C83 B62205         4478     menu22:         cjne    @r0,#22h,menu23
1C86 900000   F     4479                                             mov             dptr,#teTE9
1C89 80CC           4480                                             jmp             lome1
1C8B B62305         4481     menu23:         cjne    @r0,#23h,menu31
1C8E 900000   F     4482                                             mov             dptr,#teTE7
1C91 80C4           4483                                             jmp             lome1
1C93 B63105         4484     menu31:         cjne    @r0,#31h,menu41
1C96 900000   F     4485                                             mov             dptr,#teS57_6
1C99 80BC           4486                                             jmp             lome1
                    4487     
1C9B                4488     menu41:         
1C9B 900000   F     4489                                             mov             dptr,#tePAR
1C9E 80B7           4490                                             jmp             lome1
                    4491     
1CA0 020000   F     4492     yesvi_kr:               jmp                     yesvi_km
1CA3                4493     endkalib:;KD=Ak/A3
1CA3 200DFA         4494                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1CA6 789C           4495                                             mov                     r0,#rez_A3
1CA8 120000   F     4496                                             call            resar2
                    4497                                     
1CAB 120402         4498                                     call    altof                   ;->float
1CAE EA             4499                                             mov                     a,r2
1CAF 547F           4500                                             anl                     a,#7fh
1CB1 FA             4501                                             mov                     r2,a
1CB2 120000   F     4502                                     call            move28
1CB5 78A4           4503                                             mov                     r0,#rez_Ak
1CB7 120000   F     4504                                             call            resar2
1CBA 1202B7         4505                                             call            fldiv
                    4506                                                     
1CBD 900000   F     4507                                     mov     dptr,#CHtho;100000
1CC0 120000   F     4508                                     call    ldc_ltemp                       ;r8..r11=8
1CC3 120203         4509                                     call    flmul
1CC6 120343         4510                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4511     
1CC9 78A0           4512                                             mov                     r0,#koefKD
1CCB 120000   F     4513                                             call            saver2
                    4514                                             ;запись в рпзу в соотв ячейку
                    4515                             
1CCE 7900           4516                                             mov             r1,#0                   ;счит рпзу 
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    72

                             во внешн озу
1CD0 7A50           4517                                     mov             r2,#50h
1CD2 7B00           4518                                     mov             r3,#00
1CD4 120499         4519                                     call    copyPP
                    4520                                     ;внести изменения во внешн озу
1CD7 120000   F     4521                                     call            findext                 ;r1-внешн озу
1CDA 78A0           4522                                     mov                     r0,#koefKD
1CDC 120000   F     4523                                             call            resar2
1CDF EA             4524                                             mov                     a,r2
1CE0 F3             4525                                             movx            @r1,a
1CE1 09             4526                                             inc                     r1
1CE2 EB             4527                                             mov                     a,r3
1CE3 F3             4528                                             movx            @r1,a
1CE4 09             4529                                             inc                     r1
1CE5 EC             4530                                             mov                     a,r4
1CE6 F3             4531                                             movx            @r1,a
1CE7 09             4532                                             inc                     r1
1CE8 ED             4533                                             mov                     a,r5
1CE9 F3             4534                                             movx            @r1,a
                    4535                                     ;кофф *100000 и переведенный в hex формат
                    4536                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4537     ;стереть страницу пап прогр 
1CEA 905000         4538                                     mov             dptr,#5000h
1CED 7FFF           4539                                     mov             r7,#0ffh
1CEF 12043E         4540                                     call    cle256
                    4541     ;и запись в ячейки кофф памяти прогр (3000h) 
1CF2 7FFF           4542                                     mov             r7,#0ffh
1CF4 7900           4543                                     mov             r1,#0                           ;external r
                             am
1CF6 905000         4544                                     mov             dptr,#5000h
1CF9 120480         4545                                     call    wrpage
                    4546     ;2.2.07
1CFC 79AE           4547                                     mov                     r1,#diap
1CFE B70511         4548                                     cjne            @r1,#5,fulkalib
                    4549                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1D01 D20D           4550                                     setb            bifl_kt
                    4551                                     ;call           loadus
1D03 900000   F     4552                                     mov                     dptr,#tabt7;заслать ус 7А       
1D06 E4             4553                             clr             a
1D07 93             4554                             movc    a,@a+dptr                               ;high byte
1D08 F584           4555                             mov             p4,a
1D0A A3             4556                             inc             dptr
1D0B E4             4557                             clr             a
1D0C 93             4558                             movc    a,@a+dptr                               ;low byte
1D0D F585           4559                             mov             p5,a
1D0F 020000   F     4560                                     jmp             goto7;  out_kali
                    4561     
                    4562     ;;;
1D12                4563     fulkalib:
1D12 C212           4564                                             clr             bitklb
1D14 D216           4565                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1D16 900000   F     4566                                             mov             dptr,#teEND
1D19 120000   F     4567                                             call    lotext
1D1C 120000   F     4568                                             call    ind
1D1F 120000   F     4569     out_kali:       call    z_1s
1D22 120000   F     4570                                             call    z_1s
1D25 020000   F     4571                                             jmp             goto7
1D28                4572     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1D28 7A50           4573                                     mov                     r2,#50h                 ;-11a
1D2A 7B14           4574                                     mov                     r3,#14h                 ;k7
1D2C 12046C         4575                                     call            rebyte2                         ;r2..r5- he
                             x
1D2F 120402         4576                                     call            altof                   ;r2..r5->float
1D32 C002           4577                                     push            rr2
1D34 C003           4578                                     push            rr3
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    73

1D36 C004           4579                                     push            rr4
1D38 C005           4580                                     push            rr5
1D3A 7A50           4581                                     mov                     r2,#50h                 ;k5
1D3C 7B0C           4582                                     mov                     r3,#0ch
1D3E 12046C         4583                             call            rebyte2                 ;r2..r5
1D41 120402         4584                                     call            altof                   ;r2..r5->float
1D44 120000   F     4585                                     call            move28
1D47 D005           4586                                     pop                     rr5
1D49 D004           4587                                     pop                     rr4
1D4B D003           4588                                     pop                     rr3
1D4D D002           4589                                     pop                     rr2
1D4F 1202B7         4590                                     call            fldiv                   ;K7/K5
                    4591     
1D52 900000   F     4592                                     mov     dptr,#CHtho;100000
1D55 120000   F     4593                                     call    ldc_ltemp                       ;r8..r11=8
1D58 120203         4594                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1D5B C002           4595                                     push            rr2
1D5D C003           4596                                     push            rr3
1D5F C004           4597                                     push            rr4
1D61 C005           4598                                     push            rr5
                    4599                                     
1D63 789C           4600                                     mov                     r0,#rez_A3
1D65 120000   F     4601                                     call            resar2
1D68 120402         4602                                     call            altof                           ;r2..r5->fl
                             oat
1D6B 120000   F     4603                                     call            move28
1D6E D005           4604                                     pop                     rr5
1D70 D004           4605                                     pop                     rr4
1D72 D003           4606                                     pop                     rr3
1D74 D002           4607                                     pop                     rr2
1D76 1202B7         4608                               call          fldiv           ;Km     
                    4609     
1D79 900000   F     4610                                     mov     dptr,#CHtho;100000
1D7C 120000   F     4611                                     call    ldc_ltemp                       ;r8..r11=8
1D7F 120203         4612                                     call    flmul                           ;r2..r5
1D82 120343         4613                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1D85 78A0           4614                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1D87 120000   F     4615                                     call            saver2
                    4616                                     ;запись в рпзу в соотв ячейку
1D8A 7900           4617                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1D8C 7A50           4618                                     mov             r2,#50h
1D8E 7B00           4619                                     mov             r3,#00
1D90 120499         4620                                     call    copyPP
                    4621                                     ;внести изменения во внешн озу
1D93 78A0           4622                                     mov                     r0,#koefKD
1D95 120000   F     4623                                     call            resar2
1D98 792C           4624                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4625                             
1D9A EA             4626                                     mov                     a,r2
1D9B F3             4627                                             movx            @r1,a
1D9C 09             4628                                             inc                     r1
1D9D EB             4629                                             mov                     a,r3
1D9E F3             4630                                             movx            @r1,a
1D9F 09             4631                                             inc                     r1
1DA0 EC             4632                                             mov                     a,r4
1DA1 F3             4633                                             movx            @r1,a
1DA2 09             4634                                             inc                     r1
1DA3 ED             4635                                             mov                     a,r5
1DA4 F3             4636                                             movx            @r1,a
                    4637                                     ;кофф *100000 и переведенный в hex формат
                    4638                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4639     ;стереть страницу пап прогр 
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    74

1DA5 905000         4640                                     mov             dptr,#5000h
1DA8 7FFF           4641                                     mov             r7,#0ffh
1DAA 12043E         4642                                     call    cle256
                    4643     ;и запись в ячейки кофф памяти прогр (3000h) 
1DAD 7FFF           4644                                     mov             r7,#0ffh
1DAF 7900           4645                                     mov             r1,#0                           ;external r
                             am
1DB1 905000         4646                                     mov             dptr,#5000h
1DB4 120480         4647                                     call    wrpage
                    4648     
1DB7 C20D           4649                                             clr             bifl_kt
1DB9 120000   F     4650                                             call    loadus
1DBC 020000   F     4651                                             jmp             fulkalib
                    4652     
                    4653     ;выч среднего по блоку
                    4654     ;вых r2..r5
1DBF                4655     vichmean:       
1DBF 120000   F     4656                                             call            resa_hl;save_bl->dptr
1DC2 78D7           4657                                             mov                     r0,#copy_hl
1DC4 E583           4658                                             mov                     a,dph
1DC6 F6             4659                                             mov                     @r0,a
1DC7 08             4660                                             inc                     r0
1DC8 E582           4661                                             mov                     a,dpl
1DCA F6             4662                                             mov                     @r0,a
1DCB 78B8           4663                                             mov                     r0,#work
1DCD 120000   F     4664                                             call            clear4
1DD0 78D6           4665                                             mov                     r0,#chblok;volume
1DD2 7600           4666                                             mov                     @r0,#0
1DD4 120000   F     4667     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1DD7 E582           4668                                             mov                     a,dpl
1DD9 FF             4669                                             mov                     r7,a
1DDA E583           4670                                             mov                     a,dph
1DDC FE             4671                                             mov                     r6,a
                    4672     
1DDD 78D7           4673                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1DDF E6             4674                                             mov                     a,@r0
1DE0 F583           4675                                             mov                     dph,a
1DE2 08             4676                                             inc                     r0
1DE3 E6             4677                                             mov                     a,@r0
1DE4 F582           4678                                             mov                     dpl,a
                    4679                                             
1DE6 C3             4680                                             clr                     c;-4
1DE7 E582           4681                                             mov                     a,dpl
1DE9 9404           4682                                             subb            a,#4
1DEB F582           4683                                             mov                     dpl,a
1DED E583           4684                                             mov                     a,dph
1DEF 9400           4685                                             subb            a,#0
1DF1 F583           4686                                             mov                     dph,a;dptr-4
                    4687                                             ;;;;;;;;
1DF3 79D7           4688                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1DF5 E583           4689                                                     mov             a,dph
1DF7 F7             4690                                               mov           @r1,a
1DF8 09             4691                                                     inc             r1
1DF9 E582           4692                                                     mov             a,dpl
1DFB F7             4693                                                     mov             @r1,a
                    4694                                                     ;;;;;;;;;
1DFC C3             4695                                                     clr             c;пришли в начало блока?
1DFD E582           4696                                                     mov                     a,dpl
1DFF 9F             4697                                                     subb            a,r7
1E00 FF             4698                                                     mov                     r7,a
1E01 7006           4699                                                     jnz                     nextmea
1E03 E583           4700                                                     mov                     a,dph
1E05 9E             4701                                                     subb            a,r6
1E06 FE             4702                                                     mov                     r6,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    75

1E07 601B           4703                                                     jz                      outmea;
                    4704                                                     
                    4705                                                     ;продолжаем сравнение
                    4706                                                     ;;;;;;;;;;;             
1E09 120000   F     4707     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1E0C 120402         4708                                             call            altof;->float
1E0F 120000   F     4709                                             call            move28                  ;r8..r11
1E12 78B8           4710                                             mov                     r0,#work
1E14 120000   F     4711                                             call            resar2
1E17 120166         4712                                             call            fladd
1E1A 78B8           4713                                             mov                     r0,#work
1E1C 120000   F     4714                                             call            saver2
1E1F 78D6           4715                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1E21 06             4716                                             inc                     @r0
1E22 80B0           4717                                             jmp                     meng
1E24                4718     outmea:         
1E24 120000   F     4719                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1E27 120402         4720                                             call            altof;->float
1E2A 120000   F     4721                                             call            move28                  ;r8..r11
1E2D 78B8           4722                                             mov                     r0,#work
1E2F 120000   F     4723                                             call            resar2
1E32 120166         4724                                             call            fladd
1E35 78B8           4725                                             mov                     r0,#work
1E37 120000   F     4726                                             call            saver2
1E3A E4             4727                                             clr                     a
1E3B FA             4728                                             mov                     r2,a
1E3C FB             4729                                             mov                     r3,a
1E3D FC             4730                                             mov                     r4,a
1E3E 78D6           4731                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1E40 E6             4732                                             mov                     a,@r0
1E41 2401           4733                                             add                     a,#1
1E43 FD             4734                                             mov                     r5,a
1E44 120402         4735                                             call            altof;r2..r5 float
1E47 120000   F     4736                                             call            move28
1E4A 78B8           4737                                             mov                     r0,#work
1E4C 120000   F     4738                                             call            resar2
1E4F 1202B7         4739                                             call            fldiv
1E52 900000   F     4740                                             mov                     dptr,#ch_10      
1E55 120000   F     4741                                     call            ldc_ltemp
1E58 1202B7         4742                                     call            fldiv
1E5B 120343         4743                                             call            ftol                            ;->
                             hex
1E5E 120000   F     4744                                             call    maform
1E61 784F           4745                                             mov             r0,#abin
1E63 120000   F     4746                                             call    saver2
                    4747     ;;;;;;;;
                    4748                                             
1E66 7853           4749                                             mov             r0,#adec
1E68 7952           4750                                             mov             r1,#abin+3      ;hex->10
1E6A 120000   F     4751                                             call    bindec
                    4752                                     
1E6D 785C           4753                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1E6F 7949           4754                                             mov             r1,#bufind+9
1E71 7F05           4755                                             mov             r7,#5
1E73 E6             4756     bufmea:                         mov             a,@r0
1E74 2430           4757                                             add             a,#30h
1E76 F7             4758                                             mov             @r1,a
1E77 19             4759                                             dec             r1
1E78 18             4760                                             dec             r0
1E79 DFF8           4761                                             djnz    r7,bufmea
1E7B 7844           4762                                             mov             r0,#bufind+4
1E7D 762B           4763                                             mov             @r0,#2bh          
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    76

1E7F 300202         4764                                             jnb             znmat,nozmea
1E82 762D           4765                                             mov             @r0,#2dh
1E84 434B05         4766     nozmea:         orl             bufind+11,#05h
1E87 22             4767                                             ret
                    4768     
                    4769     
1E88 E0             4770     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1E89 FA             4771                                             mov                     r2,a
1E8A A3             4772                                             inc                     dptr
1E8B E0             4773                                             movx            a,@dptr
1E8C FB             4774                                             mov                     r3,a
1E8D A3             4775                                             inc                     dptr
1E8E E0             4776                                             movx            a,@dptr
1E8F FC             4777                                             mov                     r4,a
1E90 A3             4778                                             inc                     dptr
1E91 E0             4779                                             movx            a,@dptr
1E92 FD             4780                                             mov                     r5,a    
1E93 22             4781                                             ret
                    4782     
1E94 C3             4783     min4_hl:        clr                     c;-4
1E95 E582           4784                                             mov                     a,dpl
1E97 9404           4785                                             subb            a,#4
1E99 F582           4786                                             mov                     dpl,a
1E9B E583           4787                                             mov                     a,dph
1E9D 9400           4788                                             subb            a,#0
1E9F F583           4789                                             mov                     dph,a;dptr-4
1EA1 22             4790                                             ret
                    4791     
                    4792     ;мин значение по по блоку
1EA2                4793     vichmin:        
1EA2 120000   F     4794                                             call            resa_hl;save_bl->dptr
                    4795                                                                                     
                    4796     ;с конца блока адрес 2го измерение
1EA5 120000   F     4797                                             call            min4_hl
                    4798                                             
1EA8 78B8           4799                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4800                                             
1EAA E0             4801                                             movx            a,@dptr
1EAB F6             4802                                             mov                     @r0,a
1EAC 08             4803                                             inc                     r0
1EAD A3             4804                                             inc                     dptr
1EAE E0             4805                                             movx            a,@dptr
1EAF F6             4806                                             mov                     @r0,a
1EB0 08             4807                                             inc                     r0
1EB1 A3             4808                                             inc                     dptr
1EB2 E0             4809                                             movx            a,@dptr
1EB3 F6             4810                                             mov                     @r0,a
1EB4 08             4811                                             inc                     r0
1EB5 A3             4812                                             inc                     dptr
1EB6 E0             4813                                             movx            a,@dptr
1EB7 F6             4814                                             mov                     @r0,a
1EB8 A3             4815                                             inc                     dptr
                    4816                                             
1EB9 78B8           4817                                             mov                     r0,#work
1EBB 120000   F     4818                                             call            resar2
1EBE 120402         4819                                             call            altof;->float;r2..r5
1EC1 78B8           4820                                             mov                     r0,#work
1EC3 120000   F     4821                                             call            saver2
                    4822     
1EC6 120000   F     4823                                             call            min4_hl
                    4824                                             ;call           min4_hl
                    4825     
1EC9 78D7           4826                                             mov                     r0,#copy_hl
1ECB E583           4827                                             mov                     a,dph
1ECD F6             4828                                             mov                     @r0,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    77

1ECE 08             4829                                             inc                     r0
1ECF E582           4830                                             mov                     a,dpl
1ED1 F6             4831                                             mov                     @r0,a
                    4832                                     
1ED2 78D6           4833                                             mov                     r0,#chblok;volume
1ED4 7600           4834                                             mov                     @r0,#0
1ED6 120000   F     4835     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1ED9 E582           4836                                             mov                     a,dpl
1EDB FF             4837                                             mov                     r7,a
1EDC E583           4838                                             mov                     a,dph
1EDE FE             4839                                             mov                     r6,a
                    4840     
1EDF 78D7           4841                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1EE1 E6             4842                                             mov                     a,@r0
1EE2 F583           4843                                             mov                     dph,a
1EE4 08             4844                                             inc                     r0
1EE5 E6             4845                                             mov                     a,@r0
1EE6 F582           4846                                             mov                     dpl,a
                    4847                                             
1EE8 C3             4848                                             clr                     c;-4
1EE9 E582           4849                                             mov                     a,dpl
1EEB 9404           4850                                             subb            a,#4
1EED F582           4851                                             mov                     dpl,a
1EEF E583           4852                                             mov                     a,dph
1EF1 9400           4853                                             subb            a,#0
1EF3 F583           4854                                             mov                     dph,a;dptr-4
                    4855                                             ;;;;;;;;
1EF5 79D7           4856                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1EF7 E583           4857                                                     mov             a,dph
1EF9 F7             4858                                               mov           @r1,a
1EFA 09             4859                                                     inc             r1
1EFB E582           4860                                                     mov             a,dpl
1EFD F7             4861                                                     mov             @r1,a
                    4862                                                     ;;;;;;;;;
1EFE C3             4863                                                     clr             c;пришли в начало блока?
1EFF E582           4864                                                     mov                     a,dpl
1F01 9F             4865                                                     subb            a,r7
1F02 FF             4866                                                     mov                     r7,a
1F03 7006           4867                                                     jnz                     nextmin
1F05 E583           4868                                                     mov                     a,dph
1F07 9E             4869                                                     subb            a,r6
1F08 FE             4870                                                     mov                     r6,a
1F09 601D           4871                                                     jz                      outmin;
                    4872                                                     
                    4873                                                     ;продолжаем сравнение
                    4874                                                     ;;;;;;;;;;;             
1F0B 78B8           4875     nextmin:        mov                     r0,#work
1F0D 120000   F     4876                                             call            resar2
                    4877                                             ;call           altof;->float;r2..r5
1F10 120000   F     4878                                             call            move28;->r8..r11
1F13 120000   F     4879                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4880     
1F16 120402         4881                                             call            altof;->float;r2..r5
                    4882                                             
1F19 1201D6         4883                                             call            flcmp
1F1C 5005           4884                                             jnc                     nomini
1F1E 78B8           4885                                             mov                     r0,#work;<
1F20 120000   F     4886                                             call            saver2;r2..r5
1F23 78D6           4887     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
1F25 06             4888                                             inc                     @r0
1F26 80AE           4889                                             jmp                     ming
                    4890     
1F28 78B8           4891     outmin:         mov                     r0,#work;1ое измерение блока
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    78

1F2A 120000   F     4892                                             call            resar2
                    4893                                     ;       call            altof;->float;r2..r5
1F2D 120000   F     4894                                             call            move28;->r8..r11
1F30 120000   F     4895                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4896     
1F33 120402         4897                                             call            altof;->float;r2..r5
                    4898                                             
1F36 1201D6         4899                                             call            flcmp
1F39 5005           4900                                             jnc                     minivix
1F3B 78B8           4901                                             mov                     r0,#work;<
1F3D 120000   F     4902                                             call            saver2;r2..r5
                    4903                                             ;;;;;;;;;
                    4904     
1F40 78B8           4905     minivix:        mov                     r0,#work
1F42 120000   F     4906                                             call            resar2
                    4907     
                    4908                                             ;call           altof;->float
                    4909                                     
1F45 900000   F     4910                                             mov                     dptr,#ch_10      
1F48 120000   F     4911                                             call            ldc_ltemp
1F4B 1202B7         4912                                             call            fldiv
1F4E 120343         4913                                             call            ftol                            ;->
                             hex
                    4914                                             ;;;
1F51 120000   F     4915                                             call            maform
1F54 784F           4916                                             mov                     r0,#abin
1F56 120000   F     4917                                             call            saver2
                    4918     ;;;;;;;;
                    4919                                             
1F59 7853           4920                                             mov             r0,#adec
1F5B 7952           4921                                             mov             r1,#abin+3      ;hex->10
1F5D 120000   F     4922                                             call    bindec
                    4923                                     
1F60 785C           4924                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1F62 7949           4925                                             mov             r1,#bufind+9
1F64 7F05           4926                                             mov             r7,#5
1F66 E6             4927     bufmin:                         mov             a,@r0
1F67 2430           4928                                             add             a,#30h
1F69 F7             4929                                             mov             @r1,a
1F6A 19             4930                                             dec             r1
1F6B 18             4931                                             dec             r0
1F6C DFF8           4932                                             djnz    r7,bufmin
1F6E 7844           4933                                             mov             r0,#bufind+4
1F70 762B           4934                                             mov             @r0,#2bh          
1F72 300202         4935                                             jnb             znmat,nozmin
1F75 762D           4936                                             mov             @r0,#2dh
1F77 434B05         4937     nozmin:         orl             bufind+11,#05h
1F7A 22             4938                                             ret
                    4939     
                    4940     
                    4941     
                    4942     ;мин значение по по блоку
1F7B                4943     vichmax:        
1F7B 120000   F     4944                                             call            resa_hl;save_bl->dptr
                    4945                                             
                    4946                                             
                    4947     ;с конца блока адрес 2го измерение
1F7E 120000   F     4948                                             call            min4_hl
                    4949                                             
1F81 78B8           4950                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4951                                             
1F83 E0             4952                                             movx            a,@dptr
1F84 F6             4953                                             mov                     @r0,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    79

1F85 08             4954                                             inc                     r0
1F86 A3             4955                                             inc                     dptr
1F87 E0             4956                                             movx            a,@dptr
1F88 F6             4957                                             mov                     @r0,a
1F89 08             4958                                             inc                     r0
1F8A A3             4959                                             inc                     dptr
1F8B E0             4960                                             movx            a,@dptr
1F8C F6             4961                                             mov                     @r0,a
1F8D 08             4962                                             inc                     r0
1F8E A3             4963                                             inc                     dptr
1F8F E0             4964                                             movx            a,@dptr
1F90 F6             4965                                             mov                     @r0,a
1F91 A3             4966                                             inc                     dptr
                    4967                                             
1F92 78B8           4968                                             mov                     r0,#work
1F94 120000   F     4969                                             call            resar2
1F97 120402         4970                                             call            altof;->float;r2..r5
1F9A 78B8           4971                                             mov                     r0,#work
1F9C 120000   F     4972                                             call            saver2
                    4973     
1F9F 120000   F     4974                                             call            min4_hl
                    4975                                     ;       call            min4_hl
                    4976     
1FA2 78D7           4977                                             mov                     r0,#copy_hl
1FA4 E583           4978                                             mov                     a,dph
1FA6 F6             4979                                             mov                     @r0,a
1FA7 08             4980                                             inc                     r0
1FA8 E582           4981                                             mov                     a,dpl
1FAA F6             4982                                             mov                     @r0,a
                    4983                                     
1FAB 78D6           4984                                             mov                     r0,#chblok;volume
1FAD 7600           4985                                             mov                     @r0,#0
1FAF 120000   F     4986     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1FB2 E582           4987                                             mov                     a,dpl
1FB4 FF             4988                                             mov                     r7,a
1FB5 E583           4989                                             mov                     a,dph
1FB7 FE             4990                                             mov                     r6,a
                    4991     
1FB8 78D7           4992                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1FBA E6             4993                                             mov                     a,@r0
1FBB F583           4994                                             mov                     dph,a
1FBD 08             4995                                             inc                     r0
1FBE E6             4996                                             mov                     a,@r0
1FBF F582           4997                                             mov                     dpl,a
                    4998                                             
1FC1 C3             4999                                             clr                     c;-4
1FC2 E582           5000                                             mov                     a,dpl
1FC4 9404           5001                                             subb            a,#4
1FC6 F582           5002                                             mov                     dpl,a
1FC8 E583           5003                                             mov                     a,dph
1FCA 9400           5004                                             subb            a,#0
1FCC F583           5005                                             mov                     dph,a;dptr-4
                    5006                                             ;;;;;;;;
1FCE 79D7           5007                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1FD0 E583           5008                                                     mov             a,dph
1FD2 F7             5009                                               mov           @r1,a
1FD3 09             5010                                                     inc             r1
1FD4 E582           5011                                                     mov             a,dpl
1FD6 F7             5012                                                     mov             @r1,a
                    5013                                                     ;;;;;;;;;
1FD7 C3             5014                                                     clr             c;пришли в начало блока?
1FD8 E582           5015                                                     mov                     a,dpl
1FDA 9F             5016                                                     subb            a,r7
1FDB FF             5017                                                     mov                     r7,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    80

1FDC 7006           5018                                                     jnz                     nextmax
1FDE E583           5019                                                     mov                     a,dph
1FE0 9E             5020                                                     subb            a,r6
1FE1 FE             5021                                                     mov                     r6,a
1FE2 601D           5022                                                     jz                      outmax;
                    5023                                                     
                    5024                                                     ;продолжаем сравнение
                    5025                                                     ;;;;;;;;;;;             
1FE4 78B8           5026     nextmax:        mov                     r0,#work
1FE6 120000   F     5027                                             call            resar2
                    5028                                             ;call           altof;->float;r2..r5
1FE9 120000   F     5029                                             call            move28;->r8..r11
1FEC 120000   F     5030                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5031     
1FEF 120402         5032                                             call            altof;->float;r2..r5
                    5033                                             
1FF2 1201D6         5034                                             call            flcmp
1FF5 4005           5035                                             jc                      nomaxi
1FF7 78B8           5036                                             mov                     r0,#work;>
1FF9 120000   F     5037                                             call            saver2;r2..r5
1FFC 78D6           5038     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
1FFE 06             5039                                             inc                     @r0
1FFF 80AE           5040                                             jmp                     maxg
2001 78B8           5041     outmax:         mov                     r0,#work;1ое измерение блока
2003 120000   F     5042                                             call            resar2
                    5043                                     ;       call            altof;->float;r2..r5
2006 120000   F     5044                                             call            move28;->r8..r11
2009 120000   F     5045                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5046     
200C 120402         5047                                             call            altof;->float;r2..r5
                    5048                                             
200F 1201D6         5049                                             call            flcmp
2012 4005           5050                                             jc                      maxvix
2014 78B8           5051                                             mov                     r0,#work;>
2016 120000   F     5052                                             call            saver2;r2..r5
                    5053                                             ;;;;;;;;;
                    5054     
2019 020000   F     5055     maxvix:         jmp             minivix
                    5056     
                    5057     
                    5058     
                    5059     ;$include (d:\amp\subr6.asm) 
                +1  5060     
                +1  5061     ;тест интерфейса
201C            +1  5062     testrs: ;jb     p0.3,goprogr
201C C2AC       +1  5063                                     clr     IE.4
201E 759955     +1  5064     test1:  mov     SBUF0,#55h
2021 3099FD     +1  5065                                     jnb     SCON0.1,$
2024 78B8       +1  5066                                     mov     r0,#work;chtest
2026 76BE       +1  5067                                     mov     @r0,#190d;60
                +1  5068     
2028 309825     +1  5069     test01: jnb     SCON0.0,test2
202B E599       +1  5070                                     mov     a,SBUF0
202D B45512     +1  5071                                     cjne    a,#55h,test3
2030 C299       +1  5072     test4:  clr     SCON0.1
2032 C298       +1  5073                                     clr     SCON0.0
2034 7D0A       +1  5074                                     mov     r5,#10
2036 7840       +1  5075                                     mov     r0,#bufind              ;- - - -
2038 762D       +1  5076     test04: mov     @r0,#2dh
203A 08         +1  5077                                     inc     r0
203B DDFB       +1  5078                                     djnz    r5,test04
203D 120000   F +1  5079                                     call    ind
2040 80DC       +1  5080                                     jmp     test1
2042            +1  5081     test3:  
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    81

2042 753933     +1  5082                                     mov     nuerr,#33h
2045 120000   F +1  5083                                     call    error           ;на кран прибора ERR 3
                +1  5084                             
2048 120000   F +1  5085                                     call    ind;
204B 120000   F +1  5086                                     call    z_01s           ;100ms
204E 80E0       +1  5087                                     jmp     test4
2050 78B8       +1  5088     test2:  mov     r0,#work;chtest
2052 B60002     +1  5089                                     cjne    @r0,#0,test02
2055 8003       +1  5090                                     jmp     test5
2057 16         +1  5091     test02: dec     @r0
2058 80CE       +1  5092                                     jmp     test01
205A 120000   F +1  5093     test5:  call    z_1ms           ;1ms
205D C299       +1  5094                                     clr     SCON0.1
                +1  5095             
205F 753933     +1  5096                                     mov     nuerr,#33h
2062 120000   F +1  5097                                     call    error           ;на кран прибора ERR 3
                +1  5098                                     
2065 120000   F +1  5099                                     call    ind
2068 120000   F +1  5100                                     call    z_01s           ;100ms
206B 80B1       +1  5101                                     jmp     test1   
                +1  5102     
                +1  5103     
                +1  5104     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
206D 75E700     +1  5105      ind:   mov             EIE2,#00H;mov   IE,#00h
2070 120000   F +1  5106                     call    mign
2073 7840       +1  5107                      mov            r0,#bufind;+11
2075 7F0C       +1  5108                      mov            r7,#12
2077 C286       +1  5109      nexin: clr             p0.6
2079 E6         +1  5110                     mov             a,@r0
207A F59B       +1  5111                     mov             SPI0DAT,a
207C 20FBFD     +1  5112                     jb              TXBSY,$
207F D286       +1  5113                     setb    p0.6
2081 120000   F +1  5114                     call    z_9             ;25mks
2084 08         +1  5115                     inc             r0;dec          r0
2085 DFF0       +1  5116                     djnz    r7,nexin
2087 75E730     +1  5117                     mov             EIE2,#30H;mov   IE,#80h
208A 22         +1  5118                ret
                +1  5119     
                +1  5120     
208B 7A08       +1  5121     zapadc:   mov R2,#8
208D D297       +1  5122     sdv:      setb P1.7
208F 33         +1  5123               rlc A
2090 9296       +1  5124                     mov P1.6,C
2092 120000   F +1  5125                     call tim2
                +1  5126                                     
2095 C297       +1  5127                     clr P1.7
2097 120000   F +1  5128                     call tim2
209A DAF1       +1  5129                     djnz R2,sdv
209C D296       +1  5130                     setb P1.6
209E 22         +1  5131                     ret
                +1  5132     
209F 7A08       +1  5133     chtadc:   mov R2,#8
20A1 D297       +1  5134     sdv1:     setb P1.7
20A3 120000   F +1  5135               call tim2
20A6 C297       +1  5136                     clr P1.7
20A8 A296       +1  5137                     mov C,P1.6
20AA 33         +1  5138                     rlc A
20AB 120000   F +1  5139                     call tim2
20AE DAF1       +1  5140                     djnz R2,sdv1
20B0 22         +1  5141                     ret
                +1  5142     
20B1 7E30       +1  5143     tim:      mov R6,#30h;38h
20B3 DEFE       +1  5144     tim1:     djnz R6,tim1
20B5 22         +1  5145               ret
                +1  5146               
20B6 7E10       +1  5147     tim2:     mov R6,#10h;14h
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    82

20B8 DEFE       +1  5148     tim3:     djnz R6,tim3
20BA 22         +1  5149               ret
                +1  5150     
                +1  5151     ;запись из acc
20BB C3         +1  5152     write_x1: clr   c
20BC            +1  5153     writeD_x1:
20BC 92B1       +1  5154                       mov P3.1,c        ;запись
20BE F5A0       +1  5155               mov P2,A
20C0 D2B3       +1  5156                       setb P3.3
20C2 120000   F +1  5157                       call z_5
20C5 C2B3       +1  5158                       clr P3.3
20C7 75A0FF     +1  5159                       mov P2,#0FFh
20CA 22         +1  5160                       ret
                +1  5161     
                +1  5162     ;чтение в acc
20CB C3         +1  5163     read_x2:  clr   c  
20CC 92B1       +1  5164               mov P3.1,c        ;чтение
20CE D2B2       +1  5165               setb P3.2
20D0 D2B3       +1  5166                       setb P3.3
20D2 120000   F +1  5167                     call z_5
20D5 E5A0       +1  5168                       mov A,P2
20D7 C2B3       +1  5169                       clr P3.3
20D9 C2B2       +1  5170                       clr P3.2
20DB 22         +1  5171                       ret
                +1  5172     
                +1  5173     
20DC 120000   F +1  5174     loop:     call read_x2;x2    ;ожидание флага готовности
20DF 20E7FA     +1  5175                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
20E2 22         +1  5176                        ret           ;возврат, если бит А(7)<>1
                +1  5177                                      
                +1  5178                                        
                +1  5179     
                +1  5180     
                +1  5181     
                +1  5182     
                +1  5183     
                +1  5184     
                +1  5185     
                +1  5186     ;принимаемый байт в acc
                +1  5187     ;прием байта последовательным кодом старшими разрядами вперед
20E3 7A08       +1  5188     read:    mov R2,#8
20E5 C297       +1  5189     re1:     clr P1.7;P1.2
20E7 120000   F +1  5190              call tim2        ;5mks
20EA A294       +1  5191                     mov C,P1.4;P1.0
20EC 33         +1  5192                     rlc A           
20ED D297       +1  5193                     setb P1.7;P1.2
20EF 120000   F +1  5194                     call tim2
20F2 DAF1       +1  5195                     djnz R2,re1
20F4 22         +1  5196                     ret
                +1  5197     
                +1  5198      ;in r0-count   
                +1  5199     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5200     ;r2..r5 -значение счетчика
20F5            +1  5201     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
20F5 E6         +1  5202                     mov                     a,@r0
20F6 FC         +1  5203                     mov                     r4,a
20F7 08         +1  5204                     inc                     r0
20F8 E6         +1  5205                     mov                     a,@r0
20F9 FD         +1  5206                     mov                     r5,a
20FA 7B00       +1  5207                     mov                     r3,#0
20FC 7A00       +1  5208                     mov                     r2,#0
20FE 750800     +1  5209                     mov                     r8,#0;clr                       r8
2101 750900     +1  5210                     mov                     r9,#0;clr                       r9
2104 120000   F +1  5211                     call            lcmp
2107 22         +1  5212                     ret
                +1  5213     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    83

                +1  5214     
                +1  5215     ;in-r1-count
2108            +1  5216     chdec:          ;mov            r1,#chavt               ;chavt-1
2108 E7         +1  5217                             mov             a,@r1
2109 FC         +1  5218                             mov             r4,a
210A 09         +1  5219                             inc             r1
210B E7         +1  5220                             mov             a,@r1
210C FD         +1  5221                             mov             r5,a
210D C202       +1  5222                             clr             rr2
210F C203       +1  5223                             clr             rr3
2111 900000   F +1  5224                             mov             dptr,#ch1        
2114 120000   F +1  5225                             call    ldc_ltemp
2117 120000   F +1  5226                             call    lsub
211A ED         +1  5227                             mov             a,r5
211B F7         +1  5228                             mov             @r1,a
211C 19         +1  5229                             dec             r1
211D EC         +1  5230                             mov             a,r4
211E F7         +1  5231                             mov             @r1,a
                +1  5232                             
211F 22         +1  5233                             ret      
                +1  5234     
                +1  5235     
                +1  5236     
                +1  5237     
2120            +1  5238     loadUS: ;если идет тест измерения ус восстановить для теста
2120 201533     +1  5239                                     jb              biteizm,yestest
2123 79AE       +1  5240                                             mov             r1,#diap
2125 E7         +1  5241                             mov             a,@r1
2126 23         +1  5242                             rl              a;*2
2127 FC         +1  5243                             mov             r4,a                    ;save a
2128 900000   F +1  5244                             mov             dptr,#tabus
212B 93         +1  5245                             movc    a,@a+dptr
212C FA         +1  5246                             mov             r2,a                    ;high byte
212D E584       +1  5247                             mov             a,p4
212F 5401       +1  5248                             anl             a,#01
2131 4A         +1  5249                             orl             a,r2
2132 F584       +1  5250                             mov             p4,a
2134 0C         +1  5251                             inc             r4
2135 EC         +1  5252                             mov             a,r4
2136 93         +1  5253                             movc    a,@a+dptr
2137 FB         +1  5254                             mov             r3,a                    ;low byte
2138 E585       +1  5255                             mov             a,p5
213A 5401       +1  5256                             anl             a,#01
213C 4B         +1  5257                             orl             a,r3
213D F585       +1  5258                             mov             p5,a
213F 799A       +1  5259                             mov             r1,#parT
2141 B7010E     +1  5260                             cjne    @r1,#1,bret
2144 79AE       +1  5261                             mov             r1,#diap                  ;10s (parT=1)
2146 7405       +1  5262                             mov             a,#5                      ;10-8..10-11 p4.1=1
2148 C3         +1  5263                             clr             c
2149 97         +1  5264                             subb    a,@r1
214A 5006       +1  5265                             jnc             bret
214C E584       +1  5266                             mov             a,p4
214E 4402       +1  5267                             orl             a,#02
2150 F584       +1  5268                             mov             p4,a                     ;10-8..10-11 p4.1=1
2152 120000   F +1  5269     bret:      call          louizm         ;us если вкл кн ИЗМЕР
2155 22         +1  5270                             ret
2156            +1  5271     yestest:
2156 120000   F +1  5272                             call            lotpus          ;ус теста измерения
2159 22         +1  5273                             ret
                +1  5274                             
                +1  5275     ;загр ус для кор 0
                +1  5276     ;dptr-
215A E4         +1  5277     lospus:         clr             a
                +1  5278                             ;movc   a,@a+dptr
                +1  5279                             ;mov            r2,a                    ;high byte
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    84

                +1  5280                             ;mov            a,p4
                +1  5281                             ;anl            a,#01
                +1  5282                             ;orl            a,r2
                +1  5283                             ;mov            p4,a
                +1  5284                             ;inc            dptr
215B E4         +1  5285                             clr             a
215C 93         +1  5286                             movc    a,@a+dptr
215D FB         +1  5287                             mov             r3,a                    ;low byte
215E E585       +1  5288                             mov             a,p5
2160 54BF       +1  5289                             anl             a,#0bfh;01
2162 4B         +1  5290                             orl             a,r3
2163 F585       +1  5291                             mov             p5,a
2165 22         +1  5292                             ret
                +1  5293     
2166 80         +1  5294     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5295     
                +1  5296     ;us кнопка измерения выкл
2167 88D6       +1  5297     tabus:     db           88h,0d6h         ;10-2
2169 88F6       +1  5298                             db      88h,0f6h         ;10-3
216B 88D6       +1  5299                             db              88h,0d6h         ;10-4
216D 88F6       +1  5300                             db              88h,0f6h         ;10-5
216F 9AD6       +1  5301                             db      9ah,0d6h         ;10-6
2171 9AF6       +1  5302                             db              9ah,0f6h         ;10-7
2173 ACD6       +1  5303                             db              0ach,0d6h        ;10-8
2175 ACF6       +1  5304                             db      0ach,0f6h        ;10-9
2177 C8D6       +1  5305                             db              0c8h,0d6h        ;10-10
2179 C8F6       +1  5306                             db              0c8h,0f6h        ;10-11
                +1  5307     
217B            +1  5308     tabt11: 
217B 66E6       +1  5309                             db              66h,0e6h;10-11
217D            +1  5310     tabt9:  
217D 32E6       +1  5311                             db              32h,0e6h;10-9
217F            +1  5312     tabt7:  
217F 18EE       +1  5313                             db              18h,0eeh;10-7
                +1  5314     
                +1  5315      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5316     ;в зав от parT (Tизм)
2181 79B7       +1  5317     loadT:          mov             r1,#load;parT
2183 7840       +1  5318     lolevT:         mov             r0,#bufind+0
2185 7B0A       +1  5319                             mov             r3,#10
2187 75F00A     +1  5320                             mov             b,#10
218A E7         +1  5321                             mov             a,@r1
218B A4         +1  5322                             mul             ab
218C FC         +1  5323                             mov             r4,a                    ;save a
218D 900000   F +1  5324                             mov             dptr,#textT
2190 93         +1  5325             lod1:   movc    a,@a+dptr
2191 F6         +1  5326                             mov             @r0,a
2192 08         +1  5327                             inc             r0
2193 0C         +1  5328                             inc             r4
2194 EC         +1  5329                             mov             a,r4
2195 DBF9       +1  5330                             djnz    r3,lod1
2197 534B03     +1  5331                             anl                     bufind+11,#03h          ;гашение точек
219A 22         +1  5332                             ret     
                +1  5333     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5334     ;dptr-адр строки текста         
219B            +1  5335     lotext:         
219B 7B0A       +1  5336                             mov             r3,#10
219D 7840       +1  5337                             mov             r0,#bufind+0
219F E4         +1  5338     lodt:           clr             a
21A0 93         +1  5339                             movc    a,@a+dptr
21A1 F6         +1  5340                             mov             @r0,a
21A2 08         +1  5341                             inc             r0
21A3 A3         +1  5342                             inc             dptr
21A4 DBF9       +1  5343                             djnz    r3,lodt
21A6 534B03     +1  5344                             anl                     bufind+11,#03h          ;гашение точек
21A9 22         +1  5345                             ret                                     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    85

                +1  5346     
                +1  5347     
                +1  5348     
                +1  5349     
                +1  5350      ;задержка 100 мкс
21AA 7978       +1  5351     z_100:    mov R1,#78h     ;загрузка первого числа
21AC 7A02       +1  5352     z100:     mov R2,#2h     ;загрузка второго числа
21AE DAFE       +1  5353     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
21B0 D9FA       +1  5354               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
21B2 22         +1  5355               ret           
                +1  5356     
                +1  5357     ;задержка 34 мкс
21B3 7B8B       +1  5358     z_5:      mov R3,#8Bh      ;загрузка числа
21B5 DBFE       +1  5359     ct:       djnz R3,ct
21B7 22         +1  5360               ret
                +1  5361     
                +1  5362     ;задержка 15 мс
21B8 79FA       +1  5363     z_15:     mov R1,#0FAh    ;загрузка первого числа
21BA 7AED       +1  5364     z15:      mov R2,#0EDh   ;загрузка второго числа
21BC DAFE       +1  5365     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
21BE D9FA       +1  5366               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
21C0 22         +1  5367               ret   
                +1  5368                                               
                +1  5369      ;задержка 1 мс
21C1 7910       +1  5370     z_1ms:     mov R1,#10h     
21C3 7AED       +1  5371     ss1:       mov R2,#0EDh    
21C5 DAFE       +1  5372                djnz R2, $    
21C7 D9FA       +1  5373                djnz R1, ss1   
21C9 22         +1  5374                ret   
                +1  5375     
                +1  5376      ;????????
                +1  5377     ;задержка 1с
21CA 7D1F       +1  5378     z_1s:   mov             r5,#01fh 
21CC 7EFF       +1  5379     co2s:   mov     R6,#0ffh     
21CE 7FFF       +1  5380     z1s:     mov    R7,#0ffh     
21D0 DFFE       +1  5381     co1s:   djnz    R7, co1s        
21D2 DEFA       +1  5382             djnz    R6, z1s 
21D4 DDF6       +1  5383                     djnz    r5,co2s
21D6 22         +1  5384               ret
                +1  5385     ;задержка 0,1с
21D7 7D03       +1  5386     z_01s:           mov            r5,#03h 
21D9 7EFF       +1  5387     co02s:          mov     R6,#0ffh     
21DB 7FFF       +1  5388     z01s:           mov     R7,#0ffh     
21DD DFFE       +1  5389                             djnz    R7, $   
21DF DEFA       +1  5390                     djnz    R6, z01s 
21E1 DDF6       +1  5391                             djnz    r5,co02s
21E3 22         +1  5392                      ret
                +1  5393                                               
                +1  5394     ;задержка 0,5с
21E4 7D0D       +1  5395     z_05s:           mov            r5,#0dh 
21E6 7EFF       +1  5396     co05s:                  mov     R6,#0ffh     
21E8 7FFF       +1  5397     z05s:           mov     R7,#0ffh     
21EA DFFE       +1  5398                                     djnz    R7, $   
21EC DEFA       +1  5399                     djnz    R6, z05s 
21EE DDF6       +1  5400                                             djnz    r5,co05s
21F0 22         +1  5401                      ret                                                     
                +1  5402                                                               
21F1 000007FF   +1  5403     chzap:  db      00,00,07h,0ffh             
21F5 00000000   +1  5404     ch0:    db      00,00,00,00
21F9 0000000A   +1  5405     ch10:   db      00,00,00,0ah                            ;10
21FD 00000005   +1  5406     ch5:    db      00,00,00,05                                             ;5
2201 00000004   +1  5407     ch4:    db      00,00,00,04                                             ;4
2205 000003B9   +1  5408     ch954:  db 00,00,03,0b9h                                                ;954
2209 000003E8   +1  5409     ch10000:        db 00,00,03h,0e8h                                               ;10000
220D 00000064   +1  5410     ch100:  db 00,00,00,64h ;100
2211 00000002   +1  5411     ch2:    db      00,00,00,02                                             
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    86

                +1  5412     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5413     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5414     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
2215 00000001   +1  5415     ch1:    db  00,00,00,01
2219 49742400   +1  5416     ch_mln: db      49h,74h,24h,00;10*6
221D 3F800000   +1  5417     ch_1:   db      3fh,80h,00,00   
2221 40000000   +1  5418     ch_2:   db      40h,00,00,00;2
2225 40800000   +1  5419     ch_4:   db      40h,80h,00,00;4 
2229 40A00000   +1  5420     ch_5:   db      40h,0a0h,00,00;5
                +1  5421     
                +1  5422             
222D 3F741EDF   +1  5423     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
2231 47C35000   +1  5424     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
2235 3F800347   +1  5425     KD:             db      3fh,80h,03h,47h;1,0001
2239 48435000   +1  5426     CH2tho: db      48h,43h,50h,00;200000
223D 4856D800   +1  5427     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
2241 4856D800   +1  5428     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
2245 461C4000   +1  5429     ch_10th:db  46h,1ch,40h,00;10000-2710h
2249 41200000   +1  5430     ch_10:  db      41h,20h,00,00;10d
224D 48742400   +1  5431     ch_250: db      48h,74h,24h,00;250000
2251 000186A0   +1  5432     chk:            db      00,01,86h,0a0h;
2255 00000320   +1  5433     ch320h: db      00,00,03h,20h;320h=800d
2259 00000150   +1  5434     ch150h: db      00,00,01h,50h;150h
                +1  5435     ;r1- мл байт 2х байтного числа
225D            +1  5436     tenmin:         ;-10
225D C3         +1  5437                             clr             c
225E E7         +1  5438                     mov             a,@r1
225F 9405       +1  5439                             subb    a,#5;10
2261 F7         +1  5440                             mov             @r1,a
2262 19         +1  5441                             dec             r1
2263 E7         +1  5442                             mov             a,@r1
2264 9400       +1  5443                             subb    a,#0
2266 F7         +1  5444                             mov             @r1,a
2267 22         +1  5445                             ret
                +1  5446       ;r0-обнуление ячеек памяти  
2268 7F04       +1  5447       clear4:        mov    r7,#4
226A E4         +1  5448                             clr             a
226B F6         +1  5449       cl4:          mov             @r0,a
226C 08         +1  5450                             inc             r0
226D DFFC       +1  5451                             djnz    r7,cl4
226F 22         +1  5452                             ret     
                +1  5453     
                +1  5454      ;r0-обнуление ячеек памяти 
                +1  5455      ;R7- 
2270            +1  5456       clearN:        
2270 E4         +1  5457                             clr             a
2271 F6         +1  5458       cl4N:         mov             @r0,a
2272 08         +1  5459                             inc             r0
2273 DFFC       +1  5460                             djnz    r7,cl4N
2275 22         +1  5461                             ret     
                +1  5462     
                +1  5463       ;чтение номера байта с индикатора(2байта)
                +1  5464     ;bufind+8..bufind+9
                +1  5465     ;-  - - -
                +1  5466     ;- - - - - - - - - -
                +1  5467     ;adec..adec+9
                +1  5468     ;ст            мл
2276 7848       +1  5469     upak2:  mov             r0,#bufind+8;
2278 795C       +1  5470                     mov             r1,#adec+9
227A 7F02       +1  5471                     mov             r7,#2;2bait
227C C3         +1  5472     upa2:   clr             c
227D E6         +1  5473                     mov             a,@r0
227E 9430       +1  5474                     subb    a,#30h
2280 F7         +1  5475                     mov             @r1,a
2281 18         +1  5476                     dec             r0
2282 19         +1  5477                     dec             r1
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    87

2283 DFF7       +1  5478                     djnz    r7,upa2
2285 22         +1  5479                     ret  
                +1  5480     
                +1  5481     
                +1  5482         
                +1  5483      ;bufind+4..bufind+9
                +1  5484     ;-  - - -
                +1  5485     ;- - - - - - - - - -
                +1  5486     ;adec..adec+9
                +1  5487     ;ст            мл
2286 7849       +1  5488     upak:   mov             r0,#bufind+9;
2288 795C       +1  5489                     mov             r1,#adec+9
228A 7F06       +1  5490                     mov             r7,#6
228C C3         +1  5491     upa:    clr             c
228D E6         +1  5492                     mov             a,@r0
228E 9430       +1  5493                     subb    a,#30h
2290 F7         +1  5494                     mov             @r1,a
2291 18         +1  5495                     dec             r0
2292 19         +1  5496                     dec             r1
2293 DFF7       +1  5497                     djnz    r7,upa
2295 22         +1  5498                     ret
                +1  5499     
                +1  5500      ;чтение номера байта с индикатора(3байта)
                +1  5501     ;bufind+3..bufind+9
                +1  5502     ;-  - - -
                +1  5503     ;- - - - - - - - - -
                +1  5504     ;adec..adec+9
                +1  5505     ;ст            мл
2296 7849       +1  5506     upak3:  mov             r0,#bufind+9;
2298 795C       +1  5507                     mov             r1,#adec+9
229A 7F03       +1  5508                     mov             r7,#3;3bait
229C C3         +1  5509     upa1:   clr             c
229D E6         +1  5510                     mov             a,@r0
229E 9430       +1  5511                     subb    a,#30h
22A0 F7         +1  5512                     mov             @r1,a
22A1 18         +1  5513                     dec             r0
22A2 19         +1  5514                     dec             r1
22A3 DFF7       +1  5515                     djnz    r7,upa1
22A5 22         +1  5516                     ret
                +1  5517     
                +1  5518     ;вых-r2,r3-адрес ячее памяти прогр
22A6            +1  5519     findkoef:
22A6 79AE       +1  5520                                     mov             r1,#diap
22A8 E7         +1  5521                                     mov             a,@r1
22A9 23         +1  5522                                     rl              a                                          
                                          ;diap*2(2bait )
22AA FC         +1  5523                                     mov             r4,a                                    ;sa
                             ve
22AB 900000   F +1  5524                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5525                                     
22AE 93         +1  5526                                     movc    a,@a+dptr                       ;ст байт
22AF FA         +1  5527                                     mov             r2,a
22B0 A3         +1  5528                                     inc             dptr
22B1 EC         +1  5529                                     mov             a,r4
22B2 93         +1  5530                                     movc    a,@a+dptr
22B3 FB         +1  5531                                     mov             r3,a                    ;мл байт
22B4 22         +1  5532                                     ret
                +1  5533     ;r2..r5 в опр яч внешн озу
22B5            +1  5534     findext:
22B5 79AE       +1  5535                                     mov             r1,#diap
22B7 E7         +1  5536                                     mov             a,@r1
22B8 23         +1  5537                                     rl              a                                          
                                          ;diap*2(2bait )
22B9 23         +1  5538                                     rl              a                                          
                                          ;diap*2(2bait )
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    88

22BA F9         +1  5539                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5540                                     
22BB 22         +1  5541                                     ret
                +1  5542     
                +1  5543     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5544     ;(5000h..5027h)
22BC 5000       +1  5545     diKDw:  dw              5000h                   ;10-2
22BE 5004       +1  5546                                     dw              5004h                   ;10-3
22C0 5008       +1  5547                                     dw              5008h                   ;10-4
22C2 500C       +1  5548                                     dw              500ch                   ;10-5
22C4 5010       +1  5549                                     dw              5010h                   ;10-6
22C6 5014       +1  5550                                     dw              5014h                   ;10-7
22C8 5018       +1  5551                                     dw              5018h                   ;10-8
22CA 501C       +1  5552                                     dw              501ch                   ;10-9
22CC 5020       +1  5553                                     dw              5020h                   ;10-10
22CE 5024       +1  5554                                     dw              5024h                   ;10-11
22D0 5028       +1  5555     dipar:  dw              5028h                   ;parol
22D2 502C       +1  5556     diKm:           dw              502ch                   ;Km для теста измерения
22D4 000186A0   +1  5557     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5558     
22D8 AA08       +1  5559     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
22DA AB09       +1  5560                                             mov     r3,ltemp+1
22DC AC0A       +1  5561                                             mov     r4,ltemp+2
22DE AD0B       +1  5562                                             mov     r5,ltemp+3
22E0 22         +1  5563                                             ret
                +1  5564     ;bufind+4..bufind+9
                +1  5565     ;-  - - -
                +1  5566     ;- - - - - - - - - -
                +1  5567     ;adec..adec+9
                +1  5568     ;ст            мл
22E1 7847       +1  5569     upakA:  mov             r0,#bufind+7;
22E3 795C       +1  5570                     mov             r1,#adec+9
22E5 7F04       +1  5571                     mov             r7,#4
22E7 C3         +1  5572     upaa4:  clr             c
22E8 E6         +1  5573                     mov             a,@r0
22E9 9430       +1  5574                     subb    a,#30h
22EB F7         +1  5575                     mov             @r1,a
22EC 18         +1  5576                     dec             r0
22ED 19         +1  5577                     dec             r1
22EE DFF7       +1  5578                     djnz    r7,upaa4
22F0 22         +1  5579                     ret
                +1  5580     
                +1  5581     ;bufind+4..bufind+9
                +1  5582     ;-  - - -
                +1  5583     ;- - - - - - - - - -
                +1  5584     ;adec..adec+9
                +1  5585     ;ст            мл
22F1 7848       +1  5586     upakB:  mov             r0,#bufind+8;
22F3 795C       +1  5587                     mov             r1,#adec+9
22F5 7F05       +1  5588                     mov             r7,#5
22F7 C3         +1  5589     upab:   clr             c
22F8 E6         +1  5590                     mov             a,@r0
22F9 9430       +1  5591                     subb    a,#30h
22FB F7         +1  5592                     mov             @r1,a
22FC 18         +1  5593                     dec             r0
22FD 19         +1  5594                     dec             r1
22FE DFF7       +1  5595                     djnz    r7,upab
2300 C21B       +1  5596                     clr                     bitznB
2302 E543       +1  5597                     mov             a,bufind+3
2304 B42D02     +1  5598                     cjne            a,#2dh,abret
2307 D21B       +1  5599                     setb            bitznB
2309            +1  5600     abret:
2309 22         +1  5601                     ret
230A            +1  5602     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
230A 4E6E6AA8   +1  5603                                             db      4eh,6eh,6ah,0a8h;10**9
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    89

230E 43FA0000   +1  5604     CH_500:         db              43h,0fah,00,00;1fah=500
2312 4856D800   +1  5605     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
2316 49742400   +1  5606     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5607     
                +1  5608     
                +1  5609     
                +1  5610     ;управление AD7731
                +1  5611     ;r4=b1 r5=b2
231A            +1  5612     iniacp: ;управление AD7731
231A 7403       +1  5613                             mov             a,#03
                +1  5614     
231C 120000   F +1  5615                             call    write
231F EC         +1  5616                             mov             a,r4;#80h
2320 120000   F +1  5617                             call    write
2323 ED         +1  5618                             mov             a,r5;#04
2324 120000   F +1  5619                             call    write
2327 7402       +1  5620                             mov             a,#02
2329 120000   F +1  5621                             call    write
232C 74A1       +1  5622                             mov             a,#0a1h
232E 120000   F +1  5623                             call    write
2331 7474       +1  5624                             mov             a,#74h
2333 120000   F +1  5625                             call    write
2336 2095FD     +1  5626                             jb              p1.5,$;p1.3,$
2339 7402       +1  5627                             mov             a,#02
233B 120000   F +1  5628                             call    write
233E 7481       +1  5629                             mov             a,#81h
2340 120000   F +1  5630                             call    write
2343 7474       +1  5631                             mov             a,#74h
2345 120000   F +1  5632                             call    write
2348 2095FD     +1  5633                             jb              p1.5,$;p1.3,$
234B 7402       +1  5634                             mov             a,#02
234D 120000   F +1  5635                             call    write
2350 7421       +1  5636                             mov             a,#21h
2352 120000   F +1  5637                             call    write
2355 7474       +1  5638                             mov             a,#74h
2357 120000   F +1  5639                             call    write
235A 22         +1  5640                             ret
                +1  5641                             ;;;;;;;;;;;;;;;;
                +1  5642     ;;;;;;;;;;;;;;;;;
                +1  5643     ;;;;;;;;;;;;;;;;;
235B 0000       +1  5644     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
235D 6000       +1  5645                                     db              60h,00h;40h,04h         ;10s
235F 6000       +1  5646                                     db              60h,00;40h,04h          ;1s
2361 6000       +1  5647                                     db              60h,00h;40h,04h         ;0,1s
2363 6000       +1  5648                                     db              60h,00h;20h,04h         ;50ms
2365 6000       +1  5649                                     db              60h,00h;20h,04h          ;10ms
2367 1332       +1  5650                                     db              13h,32h         ;2ms
                +1  5651     
                +1  5652     ;загр В1,В2 в завис от Т                                
2369 799A       +1  5653     loab12:                 mov             r1,#parT
236B 900000   F +1  5654                                     mov             dptr,#tabB1_2
236E E7         +1  5655                                     mov             a,@r1
236F 23         +1  5656                                     rl              a;*2
2370 FF         +1  5657                                     mov             r7,a                    ;save a
2371 93         +1  5658                                     movc    a,@a+dptr
2372 FC         +1  5659                                     mov             r4,a   ;b1
2373 0F         +1  5660                                     inc             r7
2374 EF         +1  5661                                     mov             a,r7
2375 93         +1  5662                                     movc    a,@a+dptr
2376 FD         +1  5663                                     mov             r5,a
                +1  5664                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5665                             
2377 22         +1  5666                                     ret
                +1  5667     
                +1  5668     
2378 7852       +1  5669     loadr2: mov             r0,#abin+3              ;r2..r5
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    90

237A E6         +1  5670                     mov             a,@r0                   ; ст мл   
237B FA         +1  5671                     mov             r2,a
237C 18         +1  5672                     dec             r0
237D E6         +1  5673                     mov             a,@r0
237E FB         +1  5674                     mov             r3,a
237F 18         +1  5675                     dec             r0
2380 E6         +1  5676                     mov             a,@r0
2381 FC         +1  5677                     mov             r4,a
2382 18         +1  5678                     dec             r0
2383 E6         +1  5679                     mov             a,@r0
2384 FD         +1  5680                     mov             r5,a
2385 22         +1  5681                     ret
                +1  5682                                             
                +1  5683      ;;;;;;;;;;;;;;;;;;;      
                +1  5684      ;загрузка KD в зависимости от диап изм  
                +1  5685      ;koef->r8..r11
2386 78AE       +1  5686     loadKD:                 mov             r0,#diap
2388 E6         +1  5687                                     mov             a,@r0
2389 900000   F +1  5688                                     mov             dptr,#diKDn
238C 75F004     +1  5689                                     mov             b,#4
238F A4         +1  5690                                     mul             ab
2390 FF         +1  5691                                     mov             r7,a;save
2391 93         +1  5692                                     movc    a,@a+dptr
2392 F508       +1  5693                                     mov             r8,a
2394 A3         +1  5694                                     inc             dptr
2395 EF         +1  5695                                     mov             a,r7
2396 93         +1  5696                                     movc    a,@a+dptr
2397 F509       +1  5697                                     mov             r9,a
2399 A3         +1  5698                                     inc             dptr
239A EF         +1  5699                                     mov             a,r7
239B 93         +1  5700                                     movc    a,@a+dptr
239C F50A       +1  5701                                     mov             r10,a
239E A3         +1  5702                                     inc             dptr
239F EF         +1  5703                                     mov             a,r7
23A0 93         +1  5704                                     movc    a,@a+dptr
23A1 F50B       +1  5705                                     mov             r11,a
23A3 22         +1  5706                                     ret
                +1  5707     
23A4 3F506B7B   +1  5708      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
23A8 3F507FCC   +1  5709                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
23AC 3F4F9D0B   +1  5710                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
23B0 3F4FE869   +1  5711                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
23B4 3F50294A   +1  5712                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
23B8 3F50639E   +1  5713                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
23BC 3F4BC9F0   +1  5714                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
23C0 3F4C063B   +1  5715                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
23C4 3F50EFDD   +1  5716                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
23C8 3F512AD9   +1  5717                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5718     
23CC 00000039   +1  5719     ch57:   db      00,00,00,39h;57
23D0 00000014   +1  5720     ch20:   db      00,00,00,14h;20
                +1  5721     
                +1  5722     ;загр ус для тестов ацп 
                +1  5723     ;dptr-
23D4 78B1       +1  5724     lotpus: mov             r0,#vichR
23D6 B6210D     +1  5725                                     cjne    @r0,#21h,te22
23D9 900000   F +1  5726                                     mov                     dptr,#tabt11;заслать ус 11А
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    91

23DC E4         +1  5727     lotp:           clr             a
23DD 93         +1  5728                             movc    a,@a+dptr                               ;high byte
23DE F584       +1  5729                             mov             p4,a
23E0 A3         +1  5730                             inc             dptr
23E1 E4         +1  5731                             clr             a
23E2 93         +1  5732                             movc    a,@a+dptr                               ;low byte
23E3 F585       +1  5733                             mov             p5,a
23E5 22         +1  5734                             ret
23E6 B62205     +1  5735     te22:                   cjne    @r0,#22h,te23
23E9 900000   F +1  5736                             mov                     dptr,#tabt9;заслать ус 9А       
23EC 80EE       +1  5737                             jmp                     lotp
                +1  5738     
23EE 900000   F +1  5739     te23:   mov                     dptr,#tabt7;заслать ус 7А       
23F1 80E9       +1  5740                             jmp                     lotp
                +1  5741     
                +1  5742     
                +1  5743     
                +1  5744     
                +1  5745     
23F3 02030405   +1  5746     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
23F7 06070809                
23FB 0A0B                    
                +1  5747     
23FD 78AE       +1  5748     findR:                  mov                     r0,#diap
23FF E6         +1  5749                                                     mov                     a,@r0
2400 900000   F +1  5750                                                     mov                     dptr,#Tabn
2403 93         +1  5751                                                     movc            a,@a+dptr
2404 22         +1  5752                                                     ret
                +1  5753     ;bufind=30h..39h                                                                           
                                           ;
2405 C219       +1  5754     vvchif:                 clr             bitmig
2407 79B2       +1  5755                                     mov             r1,#marker
2409 E7         +1  5756                                     mov             a,@r1                   ;изм цифры
240A 7840       +1  5757                                     mov             r0,#bufind                      ;0000
240C 28         +1  5758                                     add             a,r0
240D F8         +1  5759                                     mov             r0,a
240E 06         +1  5760                                     inc             @r0
240F B63A03     +1  5761                                     cjne    @r0,#3ah,chif
2412 7630       +1  5762                                     mov             @r0,#30h
2414 22         +1  5763                                     ret
2415 C3         +1  5764     chif:           clr                     c
2416 7430       +1  5765                                     mov                     a,#30h
2418 96         +1  5766                                     subb            a,@r0
2419 4002       +1  5767                                     jc                      chif5
241B 7630       +1  5768                                     mov             @r0,#30h
241D 22         +1  5769     chif5:  ret
                +1  5770     
241E 80E5       +1  5771     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  5772     
2420 B641FB     +1  5773     vvnol31:        cjne            @r0,#41h,vvnol41
2423 800A       +1  5774                                             jmp                     chifour
2425 B631F8     +1  5775     vvnol23:        cjne            @r0,#31h,vvnol31
2428 8005       +1  5776                                             jmp                     chifour 
                +1  5777     
242A 78B0       +1  5778     vvchibl:        mov                     r0,#level
242C B623F6     +1  5779                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
242F C219       +1  5780     chifour:                clr             bitmig
2431 79B2       +1  5781                                     mov             r1,#marker
2433 E7         +1  5782                                     mov             a,@r1                   ;изм цифры
2434 7840       +1  5783                                     mov             r0,#bufind                      ;1..4
2436 28         +1  5784                                     add             a,r0
2437 F8         +1  5785                                     mov             r0,a
2438 06         +1  5786                                     inc             @r0
2439 B63504     +1  5787                                     cjne    @r0,#35h,chifb
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    92

243C 7631       +1  5788                                     mov             @r0,#31h
243E 8006       +1  5789                                     jmp             chifb1
2440 B63003     +1  5790     chifb:  cjne    @r0,#30h,chifb1
2443 7631       +1  5791                                     mov             @r0,#31h
2445 22         +1  5792                                     ret
2446            +1  5793     chifb1:;;;;;;;;;;
2446 C3         +1  5794                                     clr                     c
2447 7430       +1  5795                                     mov                     a,#30h
2449 96         +1  5796                                     subb            a,@r0
244A 4002       +1  5797                                     jc                      chifl5
244C 7630       +1  5798                                     mov             @r0,#30h
                +1  5799                                     
244E 22         +1  5800     chifl5: ret
                +1  5801     ;;;;;;;;;;;;;
244F 22         +1  5802             ret
                +1  5803       ;перевод маркера влево
2450            +1  5804     marle:  
2450 C219       +1  5805                     clr             bitmig
                +1  5806                     ;mov            savba,#0   нельзя обнулять
2452 78B2       +1  5807             mov             r0,#marker
2454 16         +1  5808                     dec             @r0
2455 E6         +1  5809                     mov             a,@r0
2456 C3         +1  5810                     clr             c
2457 953A       +1  5811                     subb    a,movleft         ;крайне левое положение
2459 5001       +1  5812                     jnc             rler
245B 06         +1  5813                     inc             @r0
245C 22         +1  5814     rler:   ret
                +1  5815         
                +1  5816     ;перевод маркера вправо
245D C219       +1  5817     marri:  clr             bitmig
245F 78B2       +1  5818                     mov             r0,#marker
2461 06         +1  5819                     inc         @r0
2462 E53B       +1  5820                     mov             a,movrig           ;крайне правое положение
2464 C3         +1  5821                     clr             c
2465 96         +1  5822                     subb    a,@r0
2466 5001       +1  5823                     jnc             rrir
2468 16         +1  5824                     dec             @r0
2469 22         +1  5825     rrir:   ret
                +1  5826         
                +1  5827     ;konstA->bufind+4..bufind+7
246A 78BC       +1  5828     outA:           mov                     r0,#konstA
246C 120000   F +1  5829                                     call            resar2
246F 120343     +1  5830                                     call            ftol                    ;->hex
2472 784F       +1  5831                                     mov             r0,#abin
2474 120000   F +1  5832                                     call            saver2
2477 7853       +1  5833                                     mov                     r0,#adec
2479 7952       +1  5834                                     mov             r1,#abin+3
247B 120000   F +1  5835                                     call            bindec
247E 785C       +1  5836                                     mov                     r0,#adec+9
2480 7947       +1  5837                                     mov                     r1,#bufind+7
2482 7F04       +1  5838                                     mov                     r7,#4
2484 E6         +1  5839     outa2:  mov             a,@r0
2485 2430       +1  5840                               add           a,#30h
2487 F7         +1  5841                                     mov             @r1,a
2488 19         +1  5842                                     dec             r1
2489 18         +1  5843                                     dec             r0
248A DFF8       +1  5844                                     djnz    r7,outa2
248C 22         +1  5845                                     ret
                +1  5846                                             
                +1  5847     ;konstB->bufind+4..bufind+8
                +1  5848     ;outB:          mov                     r0,#konstB
                +1  5849     ;                               call            resar2
                +1  5850     ;                               mov                     a,r2
                +1  5851     ;                               anl                     a,#80h
                +1  5852     ;                               jz                      outb3
                +1  5853     ;mov                    a,r2
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    93

                +1  5854     ;                               anl                     a,#7fh
                +1  5855     ;                               mov                     r2,a
                +1  5856     ;                               mov                     bufind+3,#2dh
                +1  5857     ;outb3: call            ftol                    ;->hex
                +1  5858     ;                               mov             r0,#abin
                +1  5859     ;                               call            saver2
                +1  5860     ;                               mov                     r0,#adec
                +1  5861     ;                               mov             r1,#abin+3
                +1  5862     ;                               call            bindec
                +1  5863     ;                               mov                     r0,#adec+9
                +1  5864     ;                               mov                     r1,#bufind+8
                +1  5865     ;                               mov                     r7,#5
                +1  5866     ;outb2: mov             a,@r0
                +1  5867     ;                         add           a,#30h
                +1  5868     ;                               mov             @r1,a
                +1  5869     ;                               dec             r1
                +1  5870     ;                               dec             r0
                +1  5871     ;                               djnz    r7,outb2
                +1  5872     ;                               ret
                +1  5873     
                +1  5874     
                +1  5875     ;пп мигания индикации
248D 78B2       +1  5876     mign:           mov             r0,#marker
                +1  5877                                     
248F B6FF03     +1  5878                                     cjne    @r0,#0ffh,mignn
                +1  5879                                     ;реж изм мигает *
2492 C219       +1  5880                                     clr             bitmig
2494 22         +1  5881                                     ret
                +1  5882     
2495            +1  5883     mignn:                  ;clr            c
2495 7440       +1  5884                                     mov             a,#bufind
2497 26         +1  5885                                     add             a,@r0                   ;a=bufind+marker
2498 F9         +1  5886                                     mov             r1,a
2499 201907     +1  5887                                     jb              bitmig,onmig
249C 873C       +1  5888                                     mov             savba,@r1
                +1  5889                             ;       mov             a,@r1
                +1  5890                             ;       mov             savba,a
249E 7720       +1  5891                                     mov             @r1,#" "
                +1  5892                                     
24A0 D219       +1  5893                                     setb    bitmig
24A2 22         +1  5894                                     ret
                +1  5895     
24A3 A73C       +1  5896     onmig:                  mov             @r1,savba
                +1  5897                                     ;mov            a,savba
                +1  5898                                     ; mov           @r1,a
24A5 C219       +1  5899                                     clr             bitmig
24A7 120000   F +1  5900                                     call    z_01s
24AA 22         +1  5901                                     ret
                +1  5902     ;номер ошибки bufind+6
24AB 900000   F +1  5903     error:          mov             dptr,#teERR
24AE 120000   F +1  5904                                             call    lotext
24B1 853946     +1  5905                                             mov             bufind+6,nuerr
24B4 22         +1  5906                                     ret
                +1  5907     
                +1  5908     
24B5            +1  5909     textT:          
24B5 FD543D32   +1  5910     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
24B9 6D67FDFD                
24BD FDFD                    
24BF FD543D31   +1  5911     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
24C3 306D67FD                
24C7 FDFD                    
24C9 FD543D35   +1  5912                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
24CD 306D67FD                
24D1 FDFD                    
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    94

24D3 FD543D64   +1  5913                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
24D7 3167FDFD                
24DB FDFD                    
24DD 20202054   +1  5914                             db              " "," "," ","T","=",31h,67h," "," "," "
24E1 3D316720                
24E5 2020                    
24E7 2020543D   +1  5915                             db              " "," ","T","=",31h,30h,67h," "," "," "  
24EB 31306720                
24EF 2020                    
                +1  5916     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5917     
24F1 42753474   +1  5918     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
24F5 79767454                
24F9 7720                    
24FB 20553D20   +1  5919     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
24FF 20202020                
2503 2065                    
2505 20423D2B   +1  5920     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2509 20202020                
250D 2020                    
250F 20207145   +1  5921     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
2513 48722020                
2517 2020                    
                +1  5922     
2519 20544579   +1  5923     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
251D 542D7433                
2521 7120                    
2523 54457954   +1  5924     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
2527 20523520                
252B 2020                    
252D 20794B30   +1  5925     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
2531 50205235                
2535 2020                    
2537 20204142   +1  5926     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
253B 4B202020                
253F 2020                    
2541 204B4176   +1  5927     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
2545 74735020                
2549 202020                  
                +1  5928     
254C 20544579   +1  5929     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
2550 54202020                
2554 5431                    
2556 20544579   +1  5930     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
255A 54202020                
255E 5432                    
2560 20544579   +1  5931     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
2564 54202020                
2568 5433                    
                +1  5932     
                +1  5933     
256A 20202035   +1  5934     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
256E 37362020                
2572 2020                    
2574 20202031   +1  5935     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2578 39322020                
257C 2020                    
                +1  5936     
257E 61415030   +1  5937     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
2582 76772030                
2586 3030                    
2588 20303030   +1  5938     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
258C 30302020                
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    95

2590 2041                    
2592 74337120   +1  5939     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
2596 4B304879                
259A 5420                    
259C 20204275   +1  5940     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
25A0 58307820                
25A4 2020                    
25A6 2020304C   +1  5941     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
25AA 4C202020                
25AE 2020                    
25B0 20203034   +1  5942     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
25B4 7479544B                
25B8 4120                    
25BA 20203041   +1  5943     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
25BE 71795420                
25C2 20203341   +1  5944     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
25C6 61747977                
25CA 2020                    
25CC 20206150   +1  5945     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
25D0 30797130                
25D4 545020                  
25D7 20206130   +1  5946     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
25DB 76484162                
25DF 2020                    
25E1 20744854   +1  5947     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
25E5 20303030                
25E9 3067                    
25EB 20207376   +1  5948     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
25EF 304B2020                
25F3 2020                    
25F5 20207376   +1  5949     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
25F9 304B2030                
25FD 2020                    
25FF 30547934   +1  5950     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
2603 45542030                
2607 3031                    
2609 79544154   +1  5951     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
260D 74795474                
2611 4B41                    
2613 71744820   +1  5952     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
2617 20202020                
261B 2020                    
261D 71414B79   +1  5953     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2621 20202020                
2625 2020                    
2627 79504578   +1  5954     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
262B 20202020                
262F 2020                    
                +1  5955      ;;;;;;;;;;;;;;;;;;;         
2631 2020304C   +1  5956     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
2635 4C204920                
2639 2020                    
263B 2020304C   +1  5957     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
263F 4C206620                
2643 2020                    
2645 20204552   +1  5958     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2649 52202020                
264D 2020                    
264F 2020454E   +1  5959     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
2653 44202020                
2657 2020                    
                +1  5960     
                +1  5961     ;dptr+4-приемник
                +1  5962     ;dptr-источник
                +1  5963     ;r7-кол байт  
2659            +1  5964     xCIKLWR:
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    96

2659 7F04       +1  5965                             mov             r7,#4   
265B E0         +1  5966     lwrx:   movx    a,@dptr
265C C083       +1  5967                             push    dph
265E C082       +1  5968                             push    dpl
2660 A3         +1  5969                             inc             dptr
2661 A3         +1  5970                             inc             dptr
2662 A3         +1  5971                             inc             dptr
2663 A3         +1  5972                             inc             dptr
2664 F0         +1  5973                             movx    @dptr,a
2665 D082       +1  5974                             pop             dpl
2667 D083       +1  5975                             pop             dph
                +1  5976                             
2669 A3         +1  5977                             inc             dptr
266A DFEF       +1  5978                             djnz    r7,lwrx
266C 22         +1  5979                             ret
                +1  5980     ;r2..r5->@dptr..@dptr+3                         
266D EA         +1  5981     saveIr2:                mov     a,r2
266E F0         +1  5982                                             movx    @dptr,a
266F A3         +1  5983                                             inc     dptr
2670 EB         +1  5984                                             mov     a,r3
2671 F0         +1  5985                                             movx    @dptr,a
2672 A3         +1  5986                                             inc     dptr
2673 EC         +1  5987                                             mov     a,r4
2674 F0         +1  5988                                             movx    @dptr,a
2675 A3         +1  5989                                             inc     dptr
2676 ED         +1  5990                                             mov     a,r5
2677 F0         +1  5991                                             movx    @dptr,a
2678 22         +1  5992                                             ret
                +1  5993     ;r2..r5-> @r0..@r0+3
                +1  5994     
2679 EA         +1  5995     saver2:         mov     a,r2
267A F6         +1  5996                                             mov     @r0,a
267B 08         +1  5997                                             inc     r0
267C EB         +1  5998                                             mov     a,r3
267D F6         +1  5999                                             mov     @r0,a
267E 08         +1  6000                                             inc     r0
267F EC         +1  6001                                             mov     a,r4
2680 F6         +1  6002                                             mov     @r0,a
2681 08         +1  6003                                             inc     r0
2682 ED         +1  6004                                             mov     a,r5
2683 F6         +1  6005                                             mov     @r0,a
2684 22         +1  6006                                             ret 
2685 7F50       +1  6007     clmassix:       mov                     r7,#50h;28h
2687 900100     +1  6008                             mov     dptr,#MASS0        ;забить массив A нулями
268A 7400       +1  6009     clmax:          mov          a,#00h
268C F0         +1  6010                  movx    @dptr,a
268D A3         +1  6011                  inc     dptr
268E DFFA       +1  6012                 djnz                r7,clmax                
2690 F56E       +1  6013                  mov     chmas,a
2692 C201       +1  6014                  clr     bitmas
2694 22         +1  6015                 ret
                +1  6016     ;r1-яЁшхьшъ
                +1  6017     ;r0-шёЄюўшъ
                +1  6018     ;r7-ъюы срщЄ  
2695            +1  6019     CIKLWR:
2695 7F04       +1  6020                             mov             r7,#4   
2697 E6         +1  6021     lwr:    mov     a,@r0
2698 F7         +1  6022                             mov     @r1,a
2699 09         +1  6023                             inc             r1
269A 08         +1  6024                             inc             r0
269B DFFA       +1  6025                             djnz    r7,lwr
269D 22         +1  6026                             ret     
                +1  6027     ;r2..r5-> @dptr..@dptr+3
                +1  6028     
269E 120000   F +1  6029     zmul:   call    maform
26A1 120000   F +1  6030                     call    lmul
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    97

26A4 120000   F +1  6031                     call    bform
26A7 22         +1  6032                     ret
                +1  6033     
26A8 120000   F +1  6034     zdiv:   call    maform
26AB 120000   F +1  6035                     call    divide
26AE 120000   F +1  6036                     call    bform
26B1 22         +1  6037                     ret
                +1  6038     
26B2 EA         +1  6039     maform: mov a,r2
26B3 33         +1  6040             rlc a
26B4 5006       +1  6041             jnc             fo1m
26B6 D202       +1  6042                     setb            znmat
26B8 120000   F +1  6043                     call   form4
26BB 22         +1  6044                     ret
26BC C202       +1  6045     fo1m:   clr             znmat
26BE 22         +1  6046                     ret
                +1  6047     
26BF 300203     +1  6048     bform:  jnb             znmat,fo2m
26C2 120000   F +1  6049                     call    form4
26C5 22         +1  6050     fo2m:   ret
                +1  6051       
                +1  6052     ;r2..r5 яхЁхтхёЄш т фюя ъюф
26C6 ED         +1  6053     form4:          mov a,r5
26C7 F4         +1  6054             cpl a
26C8 2401       +1  6055             add a,#1
26CA FD         +1  6056             mov r5,a
26CB EC         +1  6057             mov a,r4
26CC F4         +1  6058             cpl a
26CD 3400       +1  6059             addc    a,#0
26CF FC         +1  6060             mov r4,a
26D0 EB         +1  6061             mov a,r3
26D1 F4         +1  6062                 cpl a
26D2 3400       +1  6063             addc    a,#0
26D4 FB         +1  6064             mov r3,a
26D5 EA         +1  6065             mov a,r2
26D6 F4         +1  6066             cpl a
26D7 3400       +1  6067             addc    a,#0
26D9 FA         +1  6068             mov r2,a
26DA 22         +1  6069             ret
                +1  6070     
26DB 120000   F +1  6071     zcmp:   call            maform
26DE 120000   F +1  6072                     call            lcmp
26E1 C0D0       +1  6073                     push            psw
26E3 120000   F +1  6074                     call    bform
26E6 D0D0       +1  6075                     pop             psw
26E8 22         +1  6076                     ret
                +1  6077     
                +1  6078     
                +1  6079     ;@r0..@r0+3->r8..r11
                +1  6080     
26E9 E6         +1  6081     resar8: mov     a,@r0
26EA F508       +1  6082                     mov     ltemp,a
26EC 08         +1  6083                     inc     r0
26ED E6         +1  6084                     mov     a,@r0
26EE F509       +1  6085                     mov     ltemp+1,a
26F0 08         +1  6086                     inc     r0
26F1 E6         +1  6087                     mov     a,@r0
26F2 F50A       +1  6088                     mov     ltemp+2,a
26F4 08         +1  6089                     inc     r0
26F5 E6         +1  6090                     mov     a,@r0
26F6 F50B       +1  6091                     mov     ltemp+3,a
26F8 22         +1  6092                     ret
                +1  6093     
                +1  6094     ;
                +1  6095     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6096     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    98

                +1  6097     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6098     ;r2 a    ўшёыю 180
                +1  6099     ;00 b4
                +1  6100     ;т_ї- mabin..mabin+2
                +1  6101     ;     80 01 00
                +1  6102      
26F9 C8         +1  6103     cond:   xch     a,r0    
26FA F9         +1  6104                     mov     r1,a
26FB C8         +1  6105                     xch     a,r0
26FC 7C03       +1  6106                     mov     r4,#03
26FE 7700       +1  6107     dcoa:   mov     @r1,#00
2700 09         +1  6108                     inc     r1
2701 DCFB       +1  6109                     djnz    r4,dcoa
2703 7B10       +1  6110                     mov     r3,#10h
2705 C3         +1  6111     dcob:   clr     c
2706 33         +1  6112                     rlc     a
2707 CA         +1  6113                     xch     a,r2
2708 33         +1  6114                     rlc     a
2709 CA         +1  6115                     xch     a,r2
270A C8         +1  6116                     xch     a,r0
270B F9         +1  6117                     mov     r1,a
270C C8         +1  6118                     xch     a,r0
270D 7C03       +1  6119                     mov     r4,#03
270F FD         +1  6120                     mov     r5,a
2710 E7         +1  6121     dcoc:   mov     a,@r1 
2711 37         +1  6122                     addc    a,@r1
2712 D4         +1  6123                     da      a
2713 F7         +1  6124                     mov     @r1,a
2714 09         +1  6125                     inc     r1
2715 DCF9       +1  6126                     djnz    r4,dcoc
2717 ED         +1  6127                     mov     a,r5
2718 4003       +1  6128                     jc      dcod
271A DBE9       +1  6129                     djnz    r3,dcob
271C C3         +1  6130                     clr     c
271D 00         +1  6131     dcod:   nop
271E 22         +1  6132                     ret
                +1  6133     
271F 8A08       +1  6134     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2721 850309     +1  6135                     mov     ltemp+1,3
2724 85040A     +1  6136                     mov     ltemp+2,4
2727 85050B     +1  6137                     mov     ltemp+3,5
272A 22         +1  6138                     ret
                +1  6139     
                +1  6140     ;@r0..@r0+3->r2..r5
                +1  6141     
272B E6         +1  6142     resar2: mov     a,@r0
272C FA         +1  6143                     mov     r2,a
272D 08         +1  6144                     inc     r0
272E E6         +1  6145                     mov     a,@r0
272F FB         +1  6146                     mov     r3,a
2730 08         +1  6147                     inc     r0
2731 E6         +1  6148                     mov     a,@r0
2732 FC         +1  6149                     mov     r4,a
2733 08         +1  6150                     inc     r0
2734 E6         +1  6151                     mov     a,@r0
2735 FD         +1  6152                     mov     r5,a
2736 22         +1  6153                     ret
                +1  6154     
                +1  6155     ;25mkc !!!!!!!!!!!!!!!1
2737 7B4B       +1  6156     z_9:      mov R3,#4Bh      ;загрузка числа
2739 DBFE       +1  6157                    djnz R3,$
273B 22         +1  6158               ret
                +1  6159     
                +1  6160     ;запись   передаваемый байт в acc
                +1  6161     ;передача байта послед кодом старшими разрядами  вперед
273C 7A08       +1  6162     write:     mov R2,#8
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE    99

273E C3         +1  6163                             clr  c  
273F C297       +1  6164     wr1:            clr             p1.7;P1.2
2741 00         +1  6165                         nop 
2742 33         +1  6166                             rlc A
2743 9296       +1  6167                             mov P1.6,C;P1.1,C
2745 120000   F +1  6168                        call tim2
2748 D297       +1  6169                        setb P1.7;P1.2
274A 120000   F +1  6170                call tim2
274D DAF0       +1  6171                       djnz R2,wr1
274F C296       +1  6172                       clr P1.6;P1.1
2751 22         +1  6173                                              ret
                +1  6174     
                +1  6175     ;чтение номера байта с индикатора(2байта)
                +1  6176     ;bufind+8..bufind+9
                +1  6177     ;-  - - -
                +1  6178     ;- - - - - - - - - -
                +1  6179     ;adec..adec+9
                +1  6180     ;ст            мл
2752 7847       +1  6181     upak1:  mov             r0,#bufind+7;
2754 795C       +1  6182                                     mov             r1,#adec+9
2756 C3         +1  6183                                     clr             c
2757 E6         +1  6184                                     mov             a,@r0
2758 9430       +1  6185                                     subb    a,#30h
275A FF         +1  6186                                     mov             r7,a
275B C3         +1  6187                                     clr             c
275C 9405       +1  6188                                     subb    a,#5
275E 4004       +1  6189                                     jc              upk1
2760 7404       +1  6190                                     mov             a,#4
2762 8001       +1  6191                                     jmp             upk2
2764 EF         +1  6192     upk1:           mov             a,r7
2765 F7         +1  6193     upk2:           mov             @r1,a
2766 22         +1  6194                                     ret  
                +1  6195     ;r1-мл байт счетчика ячеек
2767 C3         +1  6196     chminus:        clr                     c
2768 E7         +1  6197                                             mov                     a,@r1
2769 9401       +1  6198                                             subb            a,#01
276B F7         +1  6199                                             mov                     @r1,a;low
276C 19         +1  6200                                             dec                     r1
276D E7         +1  6201                                             mov                     a,@r1
276E 9400       +1  6202                                             subb            a,#00
2770 F7         +1  6203                                             mov                     @r1,a
2771 22         +1  6204                                             ret
                +1  6205     
                +1  6206     
                +1  6207     ;чтение номера байта с индикатора(4байта)
                +1  6208     ;bufind+6..bufind+9
                +1  6209     ;-  - - -
                +1  6210     ;- - - - - - - - - -
                +1  6211     ;adec..adec+9
                +1  6212     ;ст            мл
2772 7848       +1  6213     upak4:  mov             r0,#bufind+8;
2774 795C       +1  6214                     mov             r1,#adec+9
2776 7F04       +1  6215                     mov             r7,#4
2778 C3         +1  6216     upaa:   clr             c
2779 E6         +1  6217                     mov             a,@r0
277A 9430       +1  6218                     subb    a,#30h
277C F7         +1  6219                     mov             @r1,a
277D 18         +1  6220                     dec             r0
277E 19         +1  6221                     dec             r1
277F DFF7       +1  6222                     djnz    r7,upaa
2781 22         +1  6223                     ret
                +1  6224     
                +1  6225     ;dptr-адр ячейки 1й соотв блока 
2782 E538       +1  6226     adrblok:         mov            a,nblok
2784 C3         +1  6227                              clr            c
2785 9401       +1  6228                              subb           a,#1
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   100

2787 FD         +1  6229                              mov            r5,a
2788 E4         +1  6230                              clr            a
2789 FC         +1  6231                              mov            r4,a
278A FB         +1  6232                              mov            r3,a
278B FA         +1  6233                              mov            r2,a
278C 900000   F +1  6234                                     mov                     dptr,#ch320h
278F 120000   F +1  6235                                     CALL   ldc_ltemp                 ; ltemp <-320
2792 120000   F +1  6236                                     call            lmul;r2..r5
2795 ED         +1  6237                                     mov                     a,r5
2796 2450       +1  6238                                     add                     a,#50h
2798 F582       +1  6239                                     mov                     dpl,a
279A EC         +1  6240                                     mov                     a,r4
279B 3401       +1  6241                                     addc            a,#01           
279D F583       +1  6242                                     mov                     dph,a                   ;dptr-
279F 22         +1  6243                                     ret
                +1  6244     
                +1  6245     ;
                +1  6246     ;saven_bl<-dptr  адрес след ячейки внешн озу 
27A0 E538       +1  6247     save_hl:                mov             a,nblok
27A2 B4011D     +1  6248                                                     cjne    a,#1,sa_hl1
27A5 79D3       +1  6249                                                     mov             r1,#saven_bl
27A7 E583       +1  6250     sa_hl:                  mov             a,dph
27A9 F7         +1  6251                                               mov           @r1,a
27AA 09         +1  6252                                                     inc             r1
27AB E582       +1  6253                                                     mov             a,dpl
27AD F7         +1  6254                                                     mov             @r1,a
                +1  6255                                                     ;;;;;;;;;не конец ли блока
                +1  6256                             
27AE 79D6       +1  6257                                     mov                     r1,#volume+1;work+1
27B0 120000   F +1  6258                                     call            chminus
27B3 78D5       +1  6259                                     mov             r0,#volume
27B5 E6         +1  6260                                     mov             a,@r0
27B6 30E708     +1  6261                                     jnb             acc.7,noendli
27B9 C20A       +1  6262                                     clr                     bitbon                  ;блок закон
                             чился
27BB 534BFD     +1  6263                                     anl                     bufind+11,#0fdh
27BE 120000   F +1  6264                                     call            ind
27C1 22         +1  6265     noendli:ret
                +1  6266     
27C2 B40204     +1  6267     sa_hl1:         cjne    a,#2,sa_hl2
27C5 79C0       +1  6268                                                     mov             r1,#saven_bl2
27C7 80DE       +1  6269                                                     jmp             sa_hl
                +1  6270     
27C9 B40304     +1  6271     sa_hl2:         cjne    a,#3,sa_hl3
27CC 79C2       +1  6272                                                     mov             r1,#saven_bl3
27CE 80D7       +1  6273                                                     jmp             sa_hl
27D0 79D9       +1  6274     sa_hl3:                 mov             r1,#saven_bl4
27D2 80D3       +1  6275                                                     jmp             sa_hl
                +1  6276     
                +1  6277     ;загрузка dptr сохр ранее значением адреса ячейки
27D4 E538       +1  6278     resa_hl:                mov             a,nblok
27D6 B4010A     +1  6279                                                     cjne    a,#1,re_hl1
27D9 79D3       +1  6280                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
27DB E7         +1  6281     re_hl:                  mov             a,@r1   
27DC F583       +1  6282                                                     mov             dph,a
                +1  6283                                               
27DE 09         +1  6284                                                     inc             r1
27DF E7         +1  6285                                                     mov             a,@r1
27E0 F582       +1  6286                                                     mov             dpl,a
27E2 22         +1  6287                                                     ret
                +1  6288     
27E3 B40204     +1  6289     re_hl1:                 cjne    a,#2,re_hl2
27E6 79C0       +1  6290                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
27E8 80F1       +1  6291                                                     jmp             re_hl
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   101

                +1  6292     
27EA B40304     +1  6293     re_hl2:                 cjne    a,#3,re_hl3
27ED 79C2       +1  6294                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
27EF 80EA       +1  6295                                                     jmp             re_hl
                +1  6296     
27F1 79D9       +1  6297     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
27F3 80E6       +1  6298                                                     jmp             re_hl
                +1  6299     ;загрузка rez_A3 в соотв яч внешн озу
27F5 789C       +1  6300     loA3_X:                 mov             r0,#rez_A3
27F7 120000   F +1  6301                                                     call    resar2
                +1  6302                                                     
27FA EA         +1  6303                                                     mov             a,r2                    ;
27FB F0         +1  6304                                                     movx    @dptr,a
27FC A3         +1  6305                                                     inc             dptr
27FD EB         +1  6306                                                     mov             a,r3
27FE F0         +1  6307                                                     movx    @dptr,a
27FF A3         +1  6308                                                     inc             dptr
2800 EC         +1  6309                                                     mov             a,r4
2801 F0         +1  6310                                                     movx    @dptr,a
2802 A3         +1  6311                                                     inc             dptr
2803 ED         +1  6312                                                     mov             a,r5
2804 F0         +1  6313                                                     movx    @dptr,a
2805 A3         +1  6314                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
2806 22         +1  6315                                                     ret             ;в ячейке saven_bl
                +1  6316     ;чтение в rez_A3 из соотв яч внешн озу
2807            +1  6317     reA3_X:         
                +1  6318                                                     
2807 E0         +1  6319                                                     movx    a,@dptr
2808 FA         +1  6320                                                     mov             r2,a
2809 A3         +1  6321                                                     inc             dptr
280A E0         +1  6322                                                     movx    a,@dptr
280B FB         +1  6323                                                     mov             r3,a
280C A3         +1  6324                                                     inc             dptr
280D E0         +1  6325                                                     movx    a,@dptr
280E FC         +1  6326                                                     mov             r4,a
280F A3         +1  6327                                                     inc             dptr
2810 E0         +1  6328                                                     movx    a,@dptr
2811 FD         +1  6329                                                     mov             r5,a
2812 A3         +1  6330                                                     inc             dptr
2813 789C       +1  6331                                                     mov             r0,#rez_A3
2815 120000   F +1  6332                                                     call    saver2
2818 22         +1  6333                                                     ret
                +1  6334     ;;;;;;;;;;;;;;;;;
                +1  6335     ;разбивка внешнего озу
                +1  6336     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6337     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6338     ;150h..46fh 1й блок
                +1  6339     ;470h..78fh     2й блок
                +1  6340     ;790h..aaf      3й блок
                +1  6341     ;ab0h..dcfh 4й блок
                +1  6342     ;dd0..fffh свободная область
                +1  6343     ;
                    6344     
                    6345     ;$include (d:\amp\sarifm3.asm) 
                +1  6346     ; ” ©« SARIFM.ASM 8.11.95
                +1  6347     ;файл арифметики
                +1  6348       
  0008          +1  6349     ltemp    equ       8           ;long temporary
  000C          +1  6350     xtemp    equ       12          ;other temporaries
  000A          +1  6351     DECSIZE  EQU       10
  0004          +1  6352     NUMSIZE  EQU       4
  0004          +1  6353     RR4  EQU       4
  0005          +1  6354     RR5  EQU       5
                +1  6355     
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   102

                +1  6356                                                     
                +1  6357     
                +1  6358                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6359     ;             using    0              ; Specify register bank for the following
                +1  6360                                            ; program code.
                +1  6361     ;                                               cseg AT 400h
                +1  6362     ; Arithmetics:  CLEARING string
                +1  6363     ; Input:
                +1  6364     ; R0 - pointer to string,
                +1  6365     ; NUMSIZE - byte count if CLRNUM used,
                +1  6366     ; DECSIZE - byte count if CLRDEC used,
                +1  6367     ; R2 - byte count if CLEAR used;
                +1  6368     ; Output:  none.
                +1  6369     
2819            +1  6370     CLRDEC:
2819 7A0A       +1  6371         MOV R2, #DECSIZE
281B 8002       +1  6372         SJMP    CLEAR
281D            +1  6373     CLRNUM:
281D 7A04       +1  6374         MOV R2, #NUMSIZE
                +1  6375         ;JMP    CLEAR
281F            +1  6376     CLEAR:
281F E4         +1  6377         CLR A
2820 F6         +1  6378     CLR11:  MOV @R0, A
2821 08         +1  6379         INC R0
2822 DAFC       +1  6380         DJNZ    R2, CLR11
2824 22         +1  6381         RET
                +1  6382     
                +1  6383     ;**********************************
                +1  6384     ;mov    r1,#abin+3
                +1  6385     ;mov    r0,#adec
                +1  6386     ; _ _ _ _
                +1  6387     ;     03ff
                +1  6388     ;ст     мл   - вход
                +1  6389     ; _ _ _ _ _ _ _ _ _ _
                +1  6390     ;             1 0 2 3
                +1  6391     ;ст                мл 
                +1  6392     ;**********************************
                +1  6393     
2825            +1  6394     BINDEC:
                +1  6395     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6396     ; Input:
                +1  6397     ; R0 - pointer to destination (high digit is the first),
                +1  6398     ; R1 - pointer to source,
                +1  6399     ; NUMSIZE - byte count in binary number;
                +1  6400     ; DECSIZE - byte count in decimal number;
                +1  6401     ; Output:  none.
                +1  6402     ; Source saved
                +1  6403     
                +1  6404         ; 1. Clear result
2825 7A05       +1  6405         MOV R2, #DECSIZE/2
2827 120000   F +1  6406         CALL   CLEAR  ; incrementing R0
                +1  6407     
                +1  6408         ; 2. Prepare convertion
282A 18         +1  6409         DEC R0
282B 8804       +1  6410         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
282D 8905       +1  6411         MOV RR5, R1 ; R5 - pointer to low byte of binary number
282F 7B20       +1  6412         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6413     
                +1  6414         ; 3. Convert cyrcle
2831            +1  6415     BIN30:
                +1  6416     
                +1  6417         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2831 A905       +1  6418         MOV R1, RR5
2833 7A04       +1  6419         MOV R2, #NUMSIZE
2835 E7         +1  6420     BIN31:  MOV A, @R1
2836 33         +1  6421         RLC A
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   103

2837 F7         +1  6422         MOV @R1, A
2838 19         +1  6423         DEC R1
2839 DAFA       +1  6424         DJNZ    R2, BIN31
283B A905       +1  6425         MOV R1, RR5
283D E7         +1  6426         MOV A, @R1
283E 92E0       +1  6427         MOV ACC.0, C
2840 F7         +1  6428         MOV @R1, A
                +1  6429     
                +1  6430         ; 3.2. Doubling decimal result with <Carry>
2841 A804       +1  6431         MOV R0, RR4
2843 7A05       +1  6432         MOV R2, #DECSIZE/2
2845 E6         +1  6433     BIN32:  MOV A, @R0
2846 36         +1  6434         ADDC    A, @R0
2847 D4         +1  6435         DA  A
2848 F6         +1  6436         MOV @R0, A
2849 18         +1  6437         DEC R0
284A DAF9       +1  6438         DJNZ    R2, BIN32
                +1  6439     
                +1  6440         ; 3.3. End of convert cyrcle
284C DBE3       +1  6441         DJNZ    R3, BIN30
                +1  6442     
                +1  6443         ; 4. Make bytes from half-bytes
284E E8         +1  6444         MOV A, R0
284F 240A       +1  6445         ADD A, #DECSIZE
2851 F8         +1  6446         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2852 A904       +1  6447         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2854 7A05       +1  6448         MOV R2, #DECSIZE/2
2856 E7         +1  6449     BIN41:  MOV A, @R1
2857 540F       +1  6450         ANL A, #00FH
2859 F6         +1  6451         MOV @R0, A
285A 18         +1  6452         DEC R0
285B E7         +1  6453         MOV A, @R1
285C C4         +1  6454         SWAP    A
285D 540F       +1  6455         ANL A, #00FH
285F F6         +1  6456         MOV @R0, A
2860 18         +1  6457         DEC R0
2861 19         +1  6458         DEC R1
2862 DAF2       +1  6459         DJNZ    R2, BIN41
2864 22         +1  6460         RET
                +1  6461     
                +1  6462     
                +1  6463     ;*********************************
                +1  6464     ;mov    r0,#abin
                +1  6465     ;mov    r1,#adec
                +1  6466     ; _ _ _ _       -выход
                +1  6467     ; ff0000
                +1  6468     ;0004
                +1  6469     ;мл      ст
                +1  6470     
                +1  6471     ;ст                       мл
                +1  6472     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6473     ;                       2 5 5
                +1  6474     ;                   1 0 2 4
                +1  6475     
2865            +1  6476     DECBIN:
                +1  6477     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6478     ; Input:
                +1  6479     ; R0 - pointer to destination,
                +1  6480     ; R1 - pointer to source (high digit is the first),
                +1  6481     ; NUMSIZE - byte count in binary number;
                +1  6482     ; DECSIZE - byte count in decimal number;
                +1  6483     ; Output:  none
                +1  6484     ; Source cleared
                +1  6485     
                +1  6486         ; 1. Clear result
2865 120000   F +1  6487         CALL    CLRNUM    ; + increment R0 by NUMSIZE
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   104

                +1  6488     
                +1  6489         ; 2. Prepare convertion
2868 18         +1  6490         DEC R0
2869 8804       +1  6491         MOV RR4, R0 ; R4 - pointer to high byte of binary result
286B 8905       +1  6492         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
286D 900000   F +1  6493         MOV DPTR, #DECT2
2870 7B20       +1  6494         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6495     
                +1  6496         ; 3. Convert cyrcle
2872            +1  6497     DEC30:
                +1  6498     
                +1  6499         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2872 C3         +1  6500         CLR C
2873 A905       +1  6501         MOV R1, RR5
2875 7A0A       +1  6502         MOV R2, #DECSIZE
2877 E7         +1  6503     DEC31:  MOV A, @R1
2878 540F       +1  6504         ANL A, #00FH
287A 92E4       +1  6505         MOV ACC.4, C
287C 93         +1  6506         MOVC    A,@A+DPTR
287D F7         +1  6507         MOV @R1, A
287E A2E7       +1  6508         MOV C, ACC.7
2880 09         +1  6509         INC R1
2881 DAF4       +1  6510         DJNZ    R2, DEC31
                +1  6511     
                +1  6512         ; 3.2. Rotate binary result one bit to right with <Carry>
2883 A804       +1  6513         MOV R0, RR4
2885 7A04       +1  6514         MOV R2, #NUMSIZE
2887 E6         +1  6515     DEC32:  MOV A, @R0
2888 13         +1  6516         RRC A
2889 F6         +1  6517         MOV @R0, A
288A 18         +1  6518         DEC R0
288B DAFA       +1  6519         DJNZ    R2, DEC32
                +1  6520     
                +1  6521         ; 3.3. End of convert cyrcle
288D DBE3       +1  6522         DJNZ    R3, DEC30
288F 22         +1  6523         RET
                +1  6524     
2890 00800181   +1  6525     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2894 02820383                
2898 0484                    
289A 00000000   +1  6526         DB  00,00,00,00,00,00
289E 0000                    
28A0 05850686   +1  6527         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
28A4 07870888                
28A8 0989                    
                +1  6528     
                +1  6529     ;   Long comparison
                +1  6530     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6531     ;   flags and acc set as though a long subtraction was done.
                +1  6532     ;*******************************
                +1  6533     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6534     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6535     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6536     ;*******************************
28AA            +1  6537     lcmp:
28AA C3         +1  6538         clr c
28AB EA         +1  6539         mov a,r2
28AC 9508       +1  6540         subb    a,8
28AE 700F       +1  6541         jnz done
28B0 EB         +1  6542         mov a,r3
28B1 9509       +1  6543         subb    a,9
28B3 7008       +1  6544         jnz done1
28B5 EC         +1  6545         mov a,r4
28B6 950A       +1  6546         subb    a,10
28B8 7003       +1  6547         jnz done1
28BA ED         +1  6548         mov a,r5
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   105

28BB 950B       +1  6549         subb    a,11
28BD            +1  6550     done1:
28BD C2D2       +1  6551         clr ov      ;overflow is significant only for top byte
28BF            +1  6552     done:
28BF 22         +1  6553         ret
                +1  6554     
                +1  6555     ;   Load long into r2-5 from [dptr]
                +1  6556     
28C0            +1  6557     ldc_long:
28C0 E583       +1  6558         mov a,dph       ;is it in on board memory
28C2 6010       +1  6559         jz  onboard     ;yes
28C4 E4         +1  6560         clr a
28C5 93         +1  6561         movc    a,@a+dptr
28C6 FA         +1  6562         mov r2,a
28C7 7401       +1  6563         mov a,#1
28C9 93         +1  6564         movc    a,@a+dptr
28CA FB         +1  6565         mov r3,a
28CB 7402       +1  6566         mov a,#2
28CD 93         +1  6567         movc    a,@a+dptr
28CE FC         +1  6568         mov r4,a
28CF 7403       +1  6569         mov a,#3
28D1 93         +1  6570         movc    a,@a+dptr
28D2 FD         +1  6571         mov r5,a
28D3 22         +1  6572         ret
28D4            +1  6573     onboard:
28D4 A882       +1  6574         mov r0,dpl
28D6 E6         +1  6575         mov a,@r0
28D7 FA         +1  6576         mov r2,a
28D8 08         +1  6577         inc r0
28D9 E6         +1  6578         mov a,@r0
28DA FB         +1  6579         mov r3,a
28DB 08         +1  6580         inc r0
28DC E6         +1  6581         mov a,@r0
28DD FC         +1  6582         mov r4,a
28DE 08         +1  6583         inc r0
28DF E6         +1  6584         mov a,@r0
28E0 FD         +1  6585         mov r5,a
28E1 22         +1  6586         ret
                +1  6587     
                +1  6588     ;**************************************
                +1  6589     ;загрузить ltemp...+3 из памяти программ
                +1  6590     ;mov    dptr,#CH5
                +1  6591     ;call   ldc_ltemp        ltemp <--5
                +1  6592     ;**************************************
28E2            +1  6593     ldc_ltemp:
28E2 E583       +1  6594         mov a,dph       ;is it in on board memory
28E4 6014       +1  6595         jz  oboard      ;yes
28E6 E4         +1  6596         clr a
28E7 93         +1  6597         movc    a,@a+dptr
28E8 F508       +1  6598         mov 8,a
28EA 7401       +1  6599         mov a,#1
28EC 93         +1  6600         movc    a,@a+dptr
28ED F509       +1  6601         mov 9,a
28EF 7402       +1  6602         mov a,#2
28F1 93         +1  6603         movc    a,@a+dptr
28F2 F50A       +1  6604         mov 10,a
28F4 7403       +1  6605         mov a,#3
28F6 93         +1  6606         movc    a,@a+dptr
28F7 F50B       +1  6607         mov 11,a
28F9 22         +1  6608         ret
28FA            +1  6609     oboard:
28FA A882       +1  6610         mov r0,dpl
28FC 8608       +1  6611         mov 8,@r0
28FE 08         +1  6612         inc r0
28FF 8609       +1  6613         mov 9,@r0
2901 08         +1  6614         inc r0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   106

2902 860A       +1  6615         mov 10,@r0
2904 08         +1  6616         inc r0
2905 860B       +1  6617         mov 11,@r0
2907 22         +1  6618         ret
                +1  6619     
                +1  6620     ;*****************************
                +1  6621     ;mov    dptr,#k1
                +1  6622     ;call   ldx_long
                +1  6623     ;k1->r2..r5
                +1  6624     ;*****************************
                +1  6625     ;   Load long into r2-5 from [dptr]
                +1  6626     ;
                +1  6627     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2908            +1  6628     ldx_long:
2908 E583       +1  6629         mov a,dph       ;is it in on board memory
290A 6014       +1  6630         jz  onboar1        ;yes
290C C082       +1  6631         push    dpl
290E C083       +1  6632         push    dph
2910 E0         +1  6633         movx    a,@dptr
2911 FA         +1  6634         mov r2,a
2912 A3         +1  6635         inc dptr
2913 E0         +1  6636         movx    a,@dptr
2914 FB         +1  6637         mov r3,a
2915 A3         +1  6638         inc dptr
2916 E0         +1  6639         movx    a,@dptr
2917 FC         +1  6640         mov r4,a
2918 A3         +1  6641         inc dptr
2919 E0         +1  6642         movx    a,@dptr
291A FD         +1  6643         mov r5,a
291B D083       +1  6644         pop dph
291D D082       +1  6645         pop dpl
291F 22         +1  6646         ret
2920            +1  6647     onboar1:
2920 A882       +1  6648         mov r0,dpl
2922 E6         +1  6649         mov a,@r0
2923 FA         +1  6650         mov r2,a
2924 08         +1  6651         inc r0
2925 E6         +1  6652         mov a,@r0
2926 FB         +1  6653         mov r3,a
2927 08         +1  6654         inc r0
2928 E6         +1  6655         mov a,@r0
2929 FC         +1  6656         mov r4,a
292A 08         +1  6657         inc r0
292B E6         +1  6658         mov a,@r0
292C FD         +1  6659         mov r5,a
292D 22         +1  6660         ret
                +1  6661     
                +1  6662     ;*********************************
                +1  6663     ;mov    dptr,#k2
                +1  6664     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6665     ;**********************************
292E            +1  6666     ldx_ltemp:
292E E583       +1  6667         mov a,dph       ;is it in on board memory
2930 6010       +1  6668         jz  oboard1     ;yes
2932 E0         +1  6669         movx    a,@dptr
2933 F508       +1  6670         mov 8,a
2935 A3         +1  6671         inc dptr
2936 E0         +1  6672         movx    a,@dptr
2937 F509       +1  6673         mov 9,a
2939 A3         +1  6674         inc dptr
293A E0         +1  6675         movx    a,@dptr
293B F50A       +1  6676         mov 10,a
293D A3         +1  6677         inc dptr
293E E0         +1  6678         movx    a,@dptr
293F F50B       +1  6679         mov 11,a
2941 22         +1  6680         ret
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   107

2942            +1  6681     oboard1:
2942 A882       +1  6682         mov r0,dpl
2944 8608       +1  6683         mov 8,@r0
2946 08         +1  6684         inc r0
2947 8609       +1  6685         mov 9,@r0
2949 08         +1  6686         inc r0
294A 860A       +1  6687         mov 10,@r0
294C 08         +1  6688         inc r0
294D 860B       +1  6689         mov 11,@r0
294F 22         +1  6690         ret
                +1  6691     ;   Long division routines for 8051
                +1  6692     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6693     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6694     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6695     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6696     ;   r1 must be saved by the caller.
                +1  6697     ;   This is long unsigned division.
                +1  6698     
                +1  6699     
                +1  6700     ;   Register usage:
                +1  6701     ;       r0 loop counter
                +1  6702     ;       xtemp (12-15) accumulates quotient
                +1  6703     ;       r5-r2 holds dividend
                +1  6704     ;       ltemp holds divisor
                +1  6705     
                +1  6706     ;************************************
                +1  6707     ;r2..r5-делимое
                +1  6708     ;ltemp..-делитель
                +1  6709     ;частное -r2..r5
                +1  6710     ;*************************************
2950            +1  6711     divide:
2950 E4         +1  6712         clr a
2951 F8         +1  6713         mov r0,a        ;initialize count
2952 F50C       +1  6714         mov xtemp,a     ;zero quotient
2954 F50D       +1  6715         mov xtemp+1,a
2956 F50E       +1  6716         mov xtemp+2,a
2958 F50F       +1  6717         mov xtemp+3,a
295A ED         +1  6718         mov a,r5        ;check for zero dividend
295B 4C         +1  6719         orl a,r4
295C 4B         +1  6720         orl a,r3
295D 4A         +1  6721         orl a,r2
295E 600B       +1  6722         jz  jfinis
2960 E508       +1  6723         mov a,ltemp     ;check for zero divisor
2962 4509       +1  6724         orl a,ltemp+1
2964 450A       +1  6725         orl a,ltemp+2
2966 450B       +1  6726         orl a,ltemp+3
2968 7037       +1  6727         jnz midl
296A 22         +1  6728         ret
                +1  6729     
296B 020000   F +1  6730     jfinis: jmp finis
                +1  6731     
296E            +1  6732     loops:
296E EA         +1  6733         mov a,r2
296F C3         +1  6734         clr c
2970 9508       +1  6735         subb    a,ltemp+0   ;is divisor greater than dividend yet
2972 4033       +1  6736         jc  yes     ;yes, go no further
2974 7013       +1  6737         jnz no
2976 EB         +1  6738         mov a,r3
2977 9509       +1  6739         subb    a,ltemp+1
2979 402C       +1  6740         jc  yes
297B 700C       +1  6741         jnz no
297D EC         +1  6742         mov a,r4
297E 950A       +1  6743         subb    a,ltemp+2
2980 4025       +1  6744         jc  yes
2982 7005       +1  6745         jnz no
2984 ED         +1  6746         mov a,r5
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   108

2985 950B       +1  6747         subb    a,ltemp+3
2987 401E       +1  6748         jc  yes
2989            +1  6749     no:
2989 E50B       +1  6750         mov a,ltemp+3   ;shift divisor up one bit
298B 250B       +1  6751         add a,ltemp+3
298D F50B       +1  6752         mov ltemp+3,a
298F E50A       +1  6753         mov a,ltemp+2
2991 350A       +1  6754         addc    a,ltemp+2
2993 F50A       +1  6755         mov ltemp+2,a
2995 E509       +1  6756         mov a,ltemp+1
2997 3509       +1  6757         addc    a,ltemp+1
2999 F509       +1  6758         mov ltemp+1,a
299B E508       +1  6759         mov a,ltemp+0
299D 3508       +1  6760         addc    a,ltemp+0
299F F508       +1  6761         mov ltemp+0,a
29A1            +1  6762     midl:
29A1 08         +1  6763         inc r0      ;increment count
29A2 E508       +1  6764         mov a,ltemp+0   ;check for safe to shift some more
29A4 30E7C7     +1  6765         jnb acc.7,loops  ;loop if top bit clear
29A7            +1  6766     yes:
29A7 E508       +1  6767         mov a,ltemp+0
29A9 C3         +1  6768         clr c
29AA 9A         +1  6769         subb    a,r2        ;can we subtract now?
29AB 401A       +1  6770         jc  dosub       ;yes, go and do it
29AD 7015       +1  6771         jnz nosub
29AF E509       +1  6772         mov a,ltemp+1
29B1 9B         +1  6773         subb    a,r3
29B2 4013       +1  6774         jc  dosub
29B4 700E       +1  6775         jnz nosub
29B6 E50A       +1  6776         mov a,ltemp+2
29B8 9C         +1  6777         subb    a,r4
29B9 400C       +1  6778         jc  dosub
29BB 7007       +1  6779         jnz nosub
29BD E50B       +1  6780         mov a,ltemp+3
29BF 9D         +1  6781         subb    a,r5
29C0 4005       +1  6782         jc  dosub
29C2 6003       +1  6783         jz  dosub
29C4            +1  6784     nosub:
29C4 C3         +1  6785         clr c
29C5 8012       +1  6786         sjmp    dosh
29C7            +1  6787     dosub:
29C7 C3         +1  6788         clr c       ;subtract divisor from dividend
29C8 ED         +1  6789         mov a,r5
29C9 950B       +1  6790         subb    a,ltemp+3
29CB FD         +1  6791         mov r5,a
29CC EC         +1  6792         mov a,r4
29CD 950A       +1  6793         subb    a,ltemp+2
29CF FC         +1  6794         mov r4,a
29D0 EB         +1  6795         mov a,r3
29D1 9509       +1  6796         subb    a,ltemp+1
29D3 FB         +1  6797         mov r3,a
29D4 EA         +1  6798         mov a,r2
29D5 9508       +1  6799         subb    a,ltemp+0
29D7 FA         +1  6800         mov r2,a
29D8 D3         +1  6801         setb    c       ;now set bit for quotient
29D9            +1  6802     dosh:
29D9 E50F       +1  6803         mov a,xtemp+3
29DB 33         +1  6804         rlc a
29DC F50F       +1  6805         mov xtemp+3,a
29DE E50E       +1  6806         mov a,xtemp+2
29E0 33         +1  6807         rlc a
29E1 F50E       +1  6808         mov xtemp+2,a
29E3 E50D       +1  6809         mov a,xtemp+1
29E5 33         +1  6810         rlc a
29E6 F50D       +1  6811         mov xtemp+1,a
29E8 E50C       +1  6812         mov a,xtemp+0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   109

29EA 33         +1  6813         rlc a
29EB F50C       +1  6814         mov xtemp+0,a
29ED E508       +1  6815         mov a,ltemp+0       ;shift divisor down
29EF C3         +1  6816         clr c
29F0 13         +1  6817         rrc a
29F1 F508       +1  6818         mov ltemp+0,a
29F3 E509       +1  6819         mov a,ltemp+1
29F5 13         +1  6820         rrc a
29F6 F509       +1  6821         mov ltemp+1,a
29F8 E50A       +1  6822         mov a,ltemp+2
29FA 13         +1  6823         rrc a
29FB F50A       +1  6824         mov ltemp+2,a
29FD E50B       +1  6825         mov a,ltemp+3
29FF 13         +1  6826         rrc a
2A00 F50B       +1  6827         mov ltemp+3,a
                +1  6828     
2A02 D8A3       +1  6829         djnz    r0,yes      ;and continue with the rest
                +1  6830     
2A04            +1  6831     finis:
2A04 8D0B       +1  6832         mov ltemp+3,r5
2A06 8C0A       +1  6833         mov ltemp+2,r4
2A08 8B09       +1  6834         mov ltemp+1,r3
2A0A 8A08       +1  6835         mov ltemp+0,r2
2A0C AD0F       +1  6836         mov r5,xtemp+3
2A0E AC0E       +1  6837         mov r4,xtemp+2
2A10 AB0D       +1  6838         mov r3,xtemp+1
2A12 AA0C       +1  6839         mov r2,xtemp+0
2A14 22         +1  6840         ret         ;and return with the satisfaction of a job well done
                +1  6841     
                +1  6842     
                +1  6843     ;   Long multiplication
                +1  6844     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  6845     ;   other in ltemp. It really doesn't matter which one is where.
                +1  6846     
                +1  6847     ;**********************************
                +1  6848     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  6849     ;ст  мл
                +1  6850     ;**********************************
2A15            +1  6851     llmul:
2A15            +1  6852     almul:
2A15            +1  6853     lmul:
2A15 ED         +1  6854         mov a,r5        ;low order byte
2A16 850BF0     +1  6855         mov b,ltemp+3       ;times low order byte
2A19 A4         +1  6856         mul ab
2A1A F50F       +1  6857         mov xtemp+3,a       ;store low
2A1C 85F00E     +1  6858         mov xtemp+2,b   ;and high
2A1F ED         +1  6859         mov a,r5        ;low order
2A20 850AF0     +1  6860         mov b,ltemp+2   ;times next
2A23 A4         +1  6861         mul ab
2A24 250E       +1  6862         add a,xtemp+2   ;add in
2A26 F50E       +1  6863         mov xtemp+2,a
2A28 E5F0       +1  6864         mov a,b
2A2A 3400       +1  6865         addc    a,#0
2A2C F50D       +1  6866         mov xtemp+1,a
2A2E ED         +1  6867         mov a,r5
2A2F 8509F0     +1  6868         mov b,ltemp+1
2A32 A4         +1  6869         mul ab
2A33 250D       +1  6870         add a,xtemp+1
2A35 F50D       +1  6871         mov xtemp+1,a
2A37 E5F0       +1  6872         mov a,b
2A39 3400       +1  6873         addc    a,#0
2A3B F50C       +1  6874         mov xtemp+0,a
2A3D ED         +1  6875         mov a,r5
2A3E 8508F0     +1  6876         mov b,ltemp+0
2A41 A4         +1  6877         mul ab
2A42 250C       +1  6878         add a,xtemp+0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   110

2A44 F50C       +1  6879         mov xtemp+0,a
2A46 EC         +1  6880         mov a,r4
2A47 850BF0     +1  6881         mov b,ltemp+3
2A4A A4         +1  6882         mul ab
2A4B 250E       +1  6883         add a,xtemp+2
2A4D F50E       +1  6884         mov xtemp+2,a
2A4F E5F0       +1  6885         mov a,b
2A51 350D       +1  6886         addc    a,xtemp+1
2A53 F50D       +1  6887         mov xtemp+1,a
2A55 E50C       +1  6888         mov a,xtemp+0
2A57 3400       +1  6889         addc    a,#0
2A59 F50C       +1  6890         mov xtemp+0,a
2A5B EC         +1  6891         mov a,r4
2A5C 850AF0     +1  6892         mov b,ltemp+2
2A5F A4         +1  6893         mul ab
2A60 250D       +1  6894         add a,xtemp+1
2A62 F50D       +1  6895         mov xtemp+1,a
2A64 E5F0       +1  6896         mov a,b
2A66 350C       +1  6897         addc    a,xtemp+0
2A68 F50C       +1  6898         mov xtemp+0,a
2A6A EC         +1  6899         mov a,r4
2A6B 8509F0     +1  6900         mov b,ltemp+1
2A6E A4         +1  6901         mul ab
2A6F 250C       +1  6902         add a,xtemp+0
2A71 F50C       +1  6903         mov xtemp+0,a
                +1  6904     
2A73 EB         +1  6905         mov a,r3
2A74 850BF0     +1  6906         mov b,ltemp+3
2A77 A4         +1  6907         mul ab
2A78 250D       +1  6908         add a,xtemp+1
2A7A F50D       +1  6909         mov xtemp+1,a
2A7C E5F0       +1  6910         mov a,b
2A7E 350C       +1  6911         addc    a,xtemp+0
2A80 F50C       +1  6912         mov xtemp+0,a
2A82 EB         +1  6913         mov a,r3
2A83 850AF0     +1  6914         mov b,ltemp+2
2A86 A4         +1  6915         mul ab
2A87 250C       +1  6916         add a,xtemp+0
2A89 F50C       +1  6917         mov xtemp+0,a
                +1  6918     
2A8B EA         +1  6919         mov a,r2
2A8C 850BF0     +1  6920         mov b,ltemp+3
2A8F A4         +1  6921         mul ab
2A90 250C       +1  6922         add a,xtemp+0
2A92 FA         +1  6923         mov r2,a
2A93 AB0D       +1  6924         mov r3,xtemp+1
2A95 AC0E       +1  6925         mov r4,xtemp+2
2A97 AD0F       +1  6926         mov r5,xtemp+3
                +1  6927     
2A99 22         +1  6928         ret         ;all done
                +1  6929     ;******************************
                +1  6930     ;из содержимого  r2-r5  вычесть
                +1  6931     ;содержимое          ltemp..ltemp+3
                +1  6932     ;******************************
2A9A            +1  6933     llsub:
2A9A            +1  6934      lsub:
2A9A ED         +1  6935         mov a,r5
2A9B C3         +1  6936         clr c
2A9C 950B       +1  6937         subb    a,11
2A9E FD         +1  6938         mov r5,a
2A9F EC         +1  6939         mov a,r4
2AA0 950A       +1  6940         subb    a,10
2AA2 FC         +1  6941         mov r4,a
2AA3 EB         +1  6942         mov a,r3
2AA4 9509       +1  6943         subb    a,9
2AA6 FB         +1  6944         mov r3,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   111

2AA7 EA         +1  6945         mov a,r2
2AA8 9508       +1  6946         subb    a,8
2AAA FA         +1  6947         mov r2,a
2AAB 22         +1  6948         ret
                +1  6949     
                +1  6950     ;***********************************************
                +1  6951     ;                                                      ст мл
                +1  6952     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6953     ;  r0- адрес младшего байта !!!
                +1  6954     ;результат- r2..r5
                +1  6955     ;***********************************************
                +1  6956     
2AAC C3         +1  6957     ladd:    clr       c
2AAD ED         +1  6958          mov       a,r5
2AAE 26         +1  6959          add       a,@r0
2AAF FD         +1  6960          mov       r5,a
2AB0 18         +1  6961          dec       r0
2AB1 EC         +1  6962          mov       a,r4
2AB2 36         +1  6963          addc      a,@r0
2AB3 FC         +1  6964          mov       r4,a
2AB4 18         +1  6965          dec       r0
2AB5 EB         +1  6966          mov       a,r3
2AB6 36         +1  6967          addc      a,@r0
2AB7 FB         +1  6968          mov       r3,a
2AB8 18         +1  6969          dec       r0
2AB9 EA         +1  6970          mov       a,r2
2ABA 36         +1  6971          addc      a,@r0
2ABB FA         +1  6972          mov       r2,a
2ABC 22         +1  6973          ret
                +1  6974     ;***********************************************
                +1  6975     ;                                                      ст мл
                +1  6976     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6977     ;  r0- адрес младшего байта !!!
                +1  6978     ;результат- r2..r5
                +1  6979     ;***********************************************
                +1  6980     
2ABD C3         +1  6981     laddx:    clr       c
2ABE E2         +1  6982                                             movx            a,@r0
2ABF 2D         +1  6983                                             add                     a,r5
2AC0 FD         +1  6984               mov     r5,a
2AC1 18         +1  6985                             dec     r0
2AC2 E2         +1  6986                             movx    a,@r0
2AC3 3C         +1  6987                             addc    a,r4
2AC4 FC         +1  6988                             mov     r4,a
2AC5 18         +1  6989                             dec     r0
2AC6 E2         +1  6990                             movx    a,@r0
2AC7 3B         +1  6991                             addc    a,r3
2AC8 FB         +1  6992                             mov     r3,a
2AC9 18         +1  6993                             dec     r0
2ACA E2         +1  6994                             movx    a,@r0
2ACB 3A         +1  6995                             addc    a,r2
2ACC FA         +1  6996                             mov       r2,a
2ACD 22         +1  6997                             ret
                +1  6998     
                +1  6999     ;***********************************************
                +1  7000     ;                                                      ст мл
                +1  7001     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7002     ;  dptr- адрес младшего байта !!!
                +1  7003     ;результат- r2..r5
                +1  7004     ;***********************************************
                +1  7005     
2ACE C3         +1  7006     addx:    clr       c
2ACF E0         +1  7007                                             movx            a,@dptr
2AD0 2D         +1  7008                                             add                     a,r5
2AD1 FD         +1  7009               mov     r5,a
2AD2 120000   F +1  7010                             call            dedptr;dec     dptr
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   112

2AD5 E0         +1  7011                             movx    a,@dptr
2AD6 3C         +1  7012                             addc    a,r4
2AD7 FC         +1  7013                             mov     r4,a
2AD8 120000   F +1  7014                             call            dedptr;dec     dptr
2ADB E0         +1  7015                             movx    a,@dptr
2ADC 3B         +1  7016                             addc    a,r3
2ADD FB         +1  7017                             mov     r3,a
2ADE 120000   F +1  7018                             call            dedptr;dec     dptr
2AE1 E0         +1  7019                             movx    a,@dptr
2AE2 3A         +1  7020                             addc    a,r2
2AE3 FA         +1  7021                             mov       r2,a
2AE4 22         +1  7022                             ret
                +1  7023     
2AE5 C0D0       +1  7024     dedptr:         push    psw
2AE7 C3         +1  7025                                             clr             c
2AE8 E582       +1  7026                                             mov             a,dpl
2AEA 9401       +1  7027                                             subb    a,#1
2AEC F582       +1  7028                                             mov             dpl,a
2AEE E583       +1  7029                                             mov             a,dph
2AF0 9400       +1  7030                                             subb    a,#0
2AF2 F583       +1  7031                                             mov             dph,a
2AF4 D0D0       +1  7032                                             pop             psw
2AF6 22         +1  7033                                             ret
                    7034     
                    7035     ;$include (d:\amp\floatm.asm)
                +1  7036     ;       Copyright (C) 1988 HI-TECH Software
                +1  7037     
                +1  7038     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7039     
                +1  7040     ;       The format of floating point numbers is as follows:
                +1  7041     
                +1  7042     ;       -----------------
                +1  7043     ;       *     sign      *  1 bit
                +1  7044     ;       -----------------
                +1  7045     ;       *   exponent    *  8 bits
                +1  7046     ;       -----------------
                +1  7047     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7048     ;       -----------------
                +1  7049     
                +1  7050     
                +1  7051     ;       As usual for the 8051 the memory layout has the most significant
                +1  7052     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7053     ;       lowest address.
                +1  7054     
                +1  7055     ;       Calling conventions:
                +1  7056     
                +1  7057     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7058     ;
                +1  7059     ;       Return value is in r2-r5
                +1  7060     
                +1  7061     ;       Naming conventions: A routine name is constructed by
                +1  7062     
                +1  7063     ;             ASOP
                +1  7064     
                +1  7065     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7066     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7067     ;       Conversion routines are named
                +1  7068     
                +1  7069     ;               AStof
                +1  7070     
                +1  7071     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7072     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7073     ;       Conversion from float to integer is ftol.
                +1  7074     
                +1  7075     ;               .ORG  5000h
                +1  7076     ;               .CODE
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   113

                +1  7077     ;       seg     c_text
                +1  7078     
                +1  7079     ;;      $MOD812
----            +1  7080             CSEG
                +1  7081             ;ORG 1000h
                +1  7082     
                +1  7083                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7084             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7085     
                +1  7086     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7087     ;       macros
                +1  7088     
                +1  7089     saveregs        macro
                +1  7090             push    7
                +1  7091             push    6
                +1  7092             push    1
                +1  7093             push    0
                +1  7094             endm
                +1  7095     
                +1  7096     restregs        macro
                +1  7097             pop     0
                +1  7098             pop     1
                +1  7099             pop     6
                +1  7100             pop     7
                +1  7101             endm
                +1  7102     
                +1  7103     ;addr   
                +1  7104     dan     macro   pad
                +1  7105             mov     a,r5
                +1  7106             add     a,pad+3
                +1  7107             mov     pad+3,a
                +1  7108             mov     a,pad+2
                +1  7109             addc    a,r4
                +1  7110             mov     pad+2,a
                +1  7111             mov     a,pad+1
                +1  7112             addc    a,r3
                +1  7113             mov     pad+1,a
                +1  7114             mov     a,pad+0
                +1  7115             addc    a,r2
                +1  7116             mov     pad,a
                +1  7117             endm
                +1  7118     
                +1  7119     addl    macro  addr
                +1  7120             mov     a,r5
                +1  7121             add     a,addr+3
                +1  7122             mov     r5,a
                +1  7123             mov     a,addr+2
                +1  7124             addc    a,r4
                +1  7125             mov     r4,a
                +1  7126             mov     a,addr+1
                +1  7127             addc    a,r3
                +1  7128             mov     r3,a
                +1  7129             mov     a,addr+0
                +1  7130             addc    a,r2
                +1  7131             mov     r2,a
                +1  7132             endm
                +1  7133     
                +1  7134     
                +1  7135     add1    macro
                +1  7136             mov     a,r5
                +1  7137             add     a,#1
                +1  7138             mov     r5,a
                +1  7139             clr     a
                +1  7140             addc    a,r4
                +1  7141             mov     r4,a
                +1  7142             clr     a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   114

                +1  7143             addc    a,r3
                +1  7144             mov     r3,a
                +1  7145             clr     a
                +1  7146             addc    a,r2
                +1  7147             mov     r2,a
                +1  7148             endm
                +1  7149     
                +1  7150     shfdn   macro  addr
                +1  7151             clr     c
                +1  7152             mov     a,addr
                +1  7153             rrc     a
                +1  7154             mov     addr,a
                +1  7155             mov     a,addr+1
                +1  7156             rrc     a
                +1  7157             mov     addr+1,a
                +1  7158             mov     a,addr+2
                +1  7159             rrc     a
                +1  7160             mov     addr+2,a
                +1  7161             mov     a,addr+3
                +1  7162             rrc     a
                +1  7163             mov     addr+3,a
                +1  7164             endm
                +1  7165     
                +1  7166     shfup   macro  addr
                +1  7167             clr     c
                +1  7168             mov     a,addr+3
                +1  7169             rlc     a
                +1  7170             mov     addr+3,a
                +1  7171             mov     a,addr+2
                +1  7172             rlc     a
                +1  7173             mov     addr+2,a
                +1  7174             mov     a,addr+1
                +1  7175             rlc     a
                +1  7176             mov     addr+1,a
                +1  7177             mov     a,addr
                +1  7178             rlc     a
                +1  7179             mov     addr,a
                +1  7180             endm
                +1  7181     
                +1  7182     rshift  macro
                +1  7183             clr     c
                +1  7184             mov     a,r2
                +1  7185             rrc     a
                +1  7186             mov     r2,a
                +1  7187             mov     a,r3
                +1  7188             rrc     a
                +1  7189             mov     r3,a
                +1  7190             mov     a,r4
                +1  7191             rrc     a
                +1  7192             mov     r4,a
                +1  7193             mov     a,r5
                +1  7194             rrc     a
                +1  7195             mov     r5,a
                +1  7196             endm
                +1  7197     rshift1 macro
                +1  7198             setb    c
                +1  7199             mov     a,r2
                +1  7200             rrc     a
                +1  7201             mov     r2,a
                +1  7202             mov     a,r3
                +1  7203             rrc     a
                +1  7204             mov     r3,a
                +1  7205             mov     a,r4
                +1  7206             rrc     a
                +1  7207             mov     r4,a
                +1  7208             mov     a,r5
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   115

                +1  7209             rrc     a
                +1  7210             mov     r5,a
                +1  7211             endm
                +1  7212     
                +1  7213     
                +1  7214     lshift  macro
                +1  7215             mov     a,r5
                +1  7216             rlc     a
                +1  7217             mov     r5,a
                +1  7218             mov     a,r4
                +1  7219             rlc     a
                +1  7220             mov     r4,a
                +1  7221             mov     a,r3
                +1  7222             rlc     a
                +1  7223             mov     r3,a
                +1  7224             mov     a,r2
                +1  7225             rlc     a
                +1  7226             mov     r2,a
                +1  7227             endm
                +1  7228     
                +1  7229     neg1    macro
                +1  7230             clr     c
                +1  7231             clr     a
                +1  7232             subb    a,r5
                +1  7233             mov     r5,a
                +1  7234             clr     a
                +1  7235             subb    a,r4
                +1  7236             mov     r4,a
                +1  7237             clr     a
                +1  7238             subb    a,r3
                +1  7239             mov     r3,a
                +1  7240             clr     a
                +1  7241             subb    a,r2
                +1  7242             mov     r2,a
                +1  7243             endm
                +1  7244     
                +1  7245     negm    macro  addr
                +1  7246             clr     c
                +1  7247             clr     a
                +1  7248             subb    a,addr+3
                +1  7249             mov     addr+3,a
                +1  7250             clr     a
                +1  7251             subb    a,addr+2
                +1  7252             mov     addr+2,a
                +1  7253             clr     a
                +1  7254             subb    a,addr+1
                +1  7255             mov     addr+1,a
                +1  7256             clr     a
                +1  7257             subb    a,addr
                +1  7258             mov     addr,a
                +1  7259             endm
                +1  7260     
                +1  7261     copytor macro  addr
                +1  7262             mov     r2,addr
                +1  7263             mov     r3,addr+1
                +1  7264             mov     r4,addr+2
                +1  7265             mov     r5,addr+3
                +1  7266             endm
                +1  7267     
                +1  7268     
                +1  7269     copyrto macro  addr
                +1  7270             mov     addr,r2
                +1  7271             mov     addr+1,r3
                +1  7272             mov     addr+2,r4
                +1  7273             mov     addr+3,r5
                +1  7274             endm
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   116

                +1  7275     
                +1  7276     
                +1  7277     ;       Internal representation: in this set of routines a floating number
                +1  7278     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7279     
                +1  7280     ;       Stack offset values
                +1  7281     ;ltemp   equ     28h
                +1  7282     
  0006          +1  7283     cntr    equ     6               ;r6 is the counter
  0007          +1  7284     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7285     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7286     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7287     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7288     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7289     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7290     
                +1  7291     
                +1  7292     
                +1  7293     
                +1  7294     
                +1  7295     ;DECSIZE EQU     10
                +1  7296     ;NUMSIZE EQU     4
                +1  7297     ;RR4     EQU     4
                +1  7298     ;RR5     EQU     5
                +1  7299     
                +1  7300     ;       unpack1 - unpacks the left operand
                +1  7301     
009E            +1  7302     unpack1:
009E EA         +1  7303             mov     a,r2            ;get sign
009F 5480       +1  7304             anl     a,#80h
00A1 530740     +1  7305             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7306             orl     sign,a          ;store sign
00A6 EB         +1  7307             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7308             rlc     a               ;rotate into carry
00A8 EA         +1  7309             mov     a,r2            ;get rest of exponent
00A9 33         +1  7310             rlc     a               ;and make it 8 bits
00AA F8         +1  7311             mov     r0,a            ;store it
00AB 6006       +1  7312             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7313             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7314             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7315             ret
00B3            +1  7316     zer1:
00B3 E4         +1  7317             clr     a
00B4 FA         +1  7318             mov     r2,a
00B5 FB         +1  7319             mov     r3,a
00B6 FC         +1  7320             mov     r4,a
00B7 FD         +1  7321             mov     r5,a            ;zero mantissa
00B8 F8         +1  7322             mov     r0,a            ;zero exponent
00B9 22         +1  7323             ret
                +1  7324     
                +1  7325     ;       unpack2 - unpacks right operand
                +1  7326     
00BA            +1  7327     unpack2:
00BA E508       +1  7328             mov     a,ltemp         ;get sign
00BC 13         +1  7329             rrc     a               ;shift down
00BD 5440       +1  7330             anl     a,#40h          ;mask out sign
00BF 530780     +1  7331             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7332             orl     sign,a
00C4 E509       +1  7333             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7334             rlc     a               ;rotate into carry
00C7 E508       +1  7335             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7336             rlc     a               ;and make it 8 bits
00CA F9         +1  7337             mov     r1,a            ;store it
00CB 6007       +1  7338             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7339             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7340             mov     mant2,#0        ;clear upper byte
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   117

00D3 22         +1  7341             ret
00D4            +1  7342     zer2:
00D4 E4         +1  7343             clr     a
00D5 F508       +1  7344             mov     ltemp,a
00D7 F509       +1  7345             mov     ltemp+1,a
00D9 F50A       +1  7346             mov     ltemp+2,a
00DB F50B       +1  7347             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7348             ret
                +1  7349     
                +1  7350     ;       pack1 - put operand 1 back into float format
                +1  7351     
00DE            +1  7352     pack1:
00DE E8         +1  7353             mov     a,r0            ;get exponent
00DF C3         +1  7354             clr     c
00E0 13         +1  7355             rrc     a               ;shift down 1 bit
00E1 530780     +1  7356             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7357             orl     a,r7            ;or in sign bit
00E5 FA         +1  7358             mov     r2,a            ;store
00E6 E8         +1  7359             mov     a,r0            ;get other bit
00E7 03         +1  7360             rr      a               ;rotate into hi bit
00E8 5480       +1  7361             anl     a,#80h          ;mask
00EA 53037F     +1  7362             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7363             orl     mant1+1,a       ;put in
00EF 22         +1  7364             ret
                +1  7365     
                +1  7366     
                +1  7367     ;       norm1 - normalize the unpacked value in 1
                +1  7368     
00F0            +1  7369     norm1:
00F0 E8         +1  7370             mov     a,r0            ;get exponent
00F1 60C0       +1  7371             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7372             mov     a,r2            ;get hi byte
00F4 6023       +1  7373             jz      norup           ;zero, so shift up if anything
00F6            +1  7374     nordn:
00F6 EA         +1  7375             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7376             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7377+3           add1                    ;add in a rounding bit
00FA ED         +1  7378+1           mov     a,r5
00FB 2401       +1  7379+1           add     a,#1
00FD FD         +1  7380+1           mov     r5,a
00FE E4         +1  7381+1           clr     a
00FF 3C         +1  7382+1           addc    a,r4
0100 FC         +1  7383+1           mov     r4,a
0101 E4         +1  7384+1           clr     a
0102 3B         +1  7385+1           addc    a,r3
0103 FB         +1  7386+1           mov     r3,a
0104 E4         +1  7387+1           clr     a
0105 3A         +1  7388+1           addc    a,r2
0106 FA         +1  7389+1           mov     r2,a
0107            +1  7390     nordn1:
                +1  7391+3           rshift                  ;shift down 1 bit
0107 C3         +1  7392+1           clr     c
0108 EA         +1  7393+1           mov     a,r2
0109 13         +1  7394+1           rrc     a
010A FA         +1  7395+1           mov     r2,a
010B EB         +1  7396+1           mov     a,r3
010C 13         +1  7397+1           rrc     a
010D FB         +1  7398+1           mov     r3,a
010E EC         +1  7399+1           mov     a,r4
010F 13         +1  7400+1           rrc     a
0110 FC         +1  7401+1           mov     r4,a
0111 ED         +1  7402+1           mov     a,r5
0112 13         +1  7403+1           rrc     a
0113 FD         +1  7404+1           mov     r5,a
0114 08         +1  7405             inc     r0              ;adjust exponent
0115 EA         +1  7406             mov     a,r2            ;test high byte
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   118

0116 70DE       +1  7407             jnz     nordn           ;loop
0118 22         +1  7408             ret                     ;done
                +1  7409     
0119            +1  7410     norup:
0119 4B         +1  7411             orl     a,r3
011A 4C         +1  7412             orl     a,r4
011B 4D         +1  7413             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7414             jz      zer1            ;it is - make it true zero
011E            +1  7415     norup1:
011E EB         +1  7416             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7417             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7418             clr     c
                +1  7419+3           lshift                  ;shift mantissa up
0123 ED         +1  7420+1           mov     a,r5
0124 33         +1  7421+1           rlc     a
0125 FD         +1  7422+1           mov     r5,a
0126 EC         +1  7423+1           mov     a,r4
0127 33         +1  7424+1           rlc     a
0128 FC         +1  7425+1           mov     r4,a
0129 EB         +1  7426+1           mov     a,r3
012A 33         +1  7427+1           rlc     a
012B FB         +1  7428+1           mov     r3,a
012C EA         +1  7429+1           mov     a,r2
012D 33         +1  7430+1           rlc     a
012E FA         +1  7431+1           mov     r2,a
012F 18         +1  7432             dec     r0              ;adjust exponent
0130 80EC       +1  7433             jmp     norup1
0132            +1  7434     norup2:
0132 22         +1  7435             ret                     ;finito
                +1  7436     
                +1  7437     
                +1  7438     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7439     ;       exponents are equal. This requires the smaller number to have
                +1  7440     ;       its exponent incremented and its mantissa shifted right.
                +1  7441     
0133            +1  7442     denorm:
0133 E8         +1  7443             mov     a,r0
0134 C3         +1  7444             clr     c
0135 99         +1  7445             subb    a,r1            ;compare exponents
0136 5029       +1  7446             jnc     up2a            ;shift operand 2
0138            +1  7447     up1:
0138 08         +1  7448             inc     r0              ;increment exponent
                +1  7449+3           rshift                  ;shift mantissa down
0139 C3         +1  7450+1           clr     c
013A EA         +1  7451+1           mov     a,r2
013B 13         +1  7452+1           rrc     a
013C FA         +1  7453+1           mov     r2,a
013D EB         +1  7454+1           mov     a,r3
013E 13         +1  7455+1           rrc     a
013F FB         +1  7456+1           mov     r3,a
0140 EC         +1  7457+1           mov     a,r4
0141 13         +1  7458+1           rrc     a
0142 FC         +1  7459+1           mov     r4,a
0143 ED         +1  7460+1           mov     a,r5
0144 13         +1  7461+1           rrc     a
0145 FD         +1  7462+1           mov     r5,a
0146 E8         +1  7463             mov     a,r0
0147 B501EE     +1  7464             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7465             ret
                +1  7466     
014B            +1  7467     up2:
014B 09         +1  7468             inc     r1              ;increment exponent 2
                +1  7469+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7470+1           clr     c
014D E508       +1  7471+1           mov     a,mant2
014F 13         +1  7472+1           rrc     a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   119

0150 F508       +1  7473+1           mov     mant2,a
0152 E509       +1  7474+1           mov     a,mant2+1
0154 13         +1  7475+1           rrc     a
0155 F509       +1  7476+1           mov     mant2+1,a
0157 E50A       +1  7477+1           mov     a,mant2+2
0159 13         +1  7478+1           rrc     a
015A F50A       +1  7479+1           mov     mant2+2,a
015C E50B       +1  7480+1           mov     a,mant2+3
015E 13         +1  7481+1           rrc     a
015F F50B       +1  7482+1           mov     mant2+3,a
0161            +1  7483     up2a:
0161 E8         +1  7484             mov     a,r0            ;compare exponents
0162 B501E6     +1  7485             cjne    a,exp2,up2
0165 22         +1  7486             ret                     ;all done
                +1  7487     ;------------------------------------------------------------------
                +1  7488     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7489     
0166            +1  7490     fladd:
                +1  7491+3           saveregs
0166 C007       +1  7492+1           push    7
0168 C006       +1  7493+1           push    6
016A C001       +1  7494+1           push    1
016C C000       +1  7495+1           push    0
016E 119E       +1  7496             call    unpack1
0170 11BA       +1  7497             call    unpack2
0172 3133       +1  7498             call    denorm
0174 E507       +1  7499             mov     a,sign
0176 30E70D     +1  7500             jnb     acc.7,ok1       ;test left sign
                +1  7501+3           neg1                    ;negate op1
0179 C3         +1  7502+1           clr     c
017A E4         +1  7503+1           clr     a
017B 9D         +1  7504+1           subb    a,r5
017C FD         +1  7505+1           mov     r5,a
017D E4         +1  7506+1           clr     a
017E 9C         +1  7507+1           subb    a,r4
017F FC         +1  7508+1           mov     r4,a
0180 E4         +1  7509+1           clr     a
0181 9B         +1  7510+1           subb    a,r3
0182 FB         +1  7511+1           mov     r3,a
0183 E4         +1  7512+1           clr     a
0184 9A         +1  7513+1           subb    a,r2
0185 FA         +1  7514+1           mov     r2,a
0186            +1  7515     ok1:
0186 E507       +1  7516             mov     a,sign
0188 30E615     +1  7517             jnb     acc.6,ok2       ;test right sign
                +1  7518+3           negm    mant2           ;negate op2
018B C3         +1  7519+1           clr     c
018C E4         +1  7520+1           clr     a
018D 950B       +1  7521+1           subb    a,mant2+3
018F F50B       +1  7522+1           mov     mant2+3,a
0191 E4         +1  7523+1           clr     a
0192 950A       +1  7524+1           subb    a,mant2+2
0194 F50A       +1  7525+1           mov     mant2+2,a
0196 E4         +1  7526+1           clr     a
0197 9509       +1  7527+1           subb    a,mant2+1
0199 F509       +1  7528+1           mov     mant2+1,a
019B E4         +1  7529+1           clr     a
019C 9508       +1  7530+1           subb    a,mant2
019E F508       +1  7531+1           mov     mant2,a
01A0            +1  7532     ok2:
                +1  7533+3           addl    mant2           ;add mantissas
01A0 ED         +1  7534+1           mov     a,r5
01A1 250B       +1  7535+1           add     a,mant2+3
01A3 FD         +1  7536+1           mov     r5,a
01A4 E50A       +1  7537+1           mov     a,mant2+2
01A6 3C         +1  7538+1           addc    a,r4
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   120

01A7 FC         +1  7539+1           mov     r4,a
01A8 E509       +1  7540+1           mov     a,mant2+1
01AA 3B         +1  7541+1           addc    a,r3
01AB FB         +1  7542+1           mov     r3,a
01AC E508       +1  7543+1           mov     a,mant2+0
01AE 3A         +1  7544+1           addc    a,r2
01AF FA         +1  7545+1           mov     r2,a
01B0 E4         +1  7546             clr     a
01B1 FF         +1  7547             mov     r7,a            ;clear sign
01B2 EA         +1  7548             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7549             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7550             mov     r7,a            ;store sign
                +1  7551+3           neg1                    ;negate mantissa
01B7 C3         +1  7552+1           clr     c
01B8 E4         +1  7553+1           clr     a
01B9 9D         +1  7554+1           subb    a,r5
01BA FD         +1  7555+1           mov     r5,a
01BB E4         +1  7556+1           clr     a
01BC 9C         +1  7557+1           subb    a,r4
01BD FC         +1  7558+1           mov     r4,a
01BE E4         +1  7559+1           clr     a
01BF 9B         +1  7560+1           subb    a,r3
01C0 FB         +1  7561+1           mov     r3,a
01C1 E4         +1  7562+1           clr     a
01C2 9A         +1  7563+1           subb    a,r2
01C3 FA         +1  7564+1           mov     r2,a
01C4            +1  7565     ok3:
01C4 11F0       +1  7566             call    norm1
01C6 11DE       +1  7567             call    pack1           ;pack normalized result
                +1  7568+3           restregs                ;and return
01C8 D000       +1  7569+1           pop     0
01CA D001       +1  7570+1           pop     1
01CC D006       +1  7571+1           pop     6
01CE D007       +1  7572+1           pop     7
01D0 22         +1  7573             ret
                +1  7574     ;-------------------------------------------------------------
                +1  7575     ;       Subtract the number ltemp from the number in r2-r5
                +1  7576     
01D1            +1  7577     flsub:
01D1 630880     +1  7578             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7579             jmp     fladd           ;and add!
                +1  7580     
                +1  7581     ;================================================================
                +1  7582     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7583     
01D6            +1  7584     flcmp:
01D6 EA         +1  7585            mov     a,r2            ;get sign of left
01D7 6508       +1  7586            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7587            jnb     acc.7,cexp      ;same, go check exponent
                +1  7588     ;ifdef SMALL_MODEL
01DC EA         +1  7589             mov     a,r2            ;get sign of left again
01DD 33         +1  7590             rlc     a
01DE 5001       +1  7591             jnc     flout
                +1  7592     ;endif
01E0 D3         +1  7593             setb    c
01E1 22         +1  7594     flout:          ret                    ;return with acc < 0
                +1  7595     
01E2            +1  7596     cexp:
01E2 C3         +1  7597            clr     c
01E3 EA         +1  7598            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7599            subb    a,ltemp
01E6 7010       +1  7600            jnz     fnd
01E8 EB         +1  7601            mov     a,r3
01E9 9509       +1  7602            subb    a,ltemp+1
01EB 700B       +1  7603            jnz     fnd
01ED EC         +1  7604            mov     a,r4
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   121

01EE 950A       +1  7605            subb    a,ltemp+2
01F0 7006       +1  7606            jnz     fnd
01F2 ED         +1  7607            mov     a,r5
01F3 950B       +1  7608            subb    a,ltemp+3
01F5 7001       +1  7609            jnz     fnd
01F7            +1  7610     cdone:
01F7 22         +1  7611            ret                     ;return with acc == 0
01F8            +1  7612     fnd:
01F8 8AF0       +1  7613           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7614          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7615            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7616                         orl         a,#1                          ;make non-zero
0201 B3         +1  7617             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7618             ret
                +1  7619     ;==============================================================
                +1  7620     
                +1  7621     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7622     ;       the result in r2-r5
                +1  7623     
0203            +1  7624     flmul:
                +1  7625+3           saveregs
0203 C007       +1  7626+1           push    7
0205 C006       +1  7627+1           push    6
0207 C001       +1  7628+1           push    1
0209 C000       +1  7629+1           push    0
020B 119E       +1  7630             call    unpack1
020D 11BA       +1  7631             call    unpack2
020F E4         +1  7632             clr     a
0210 F50C       +1  7633             mov     prod,a
0212 F50D       +1  7634             mov     prod+1,a        ;clear product
0214 F50E       +1  7635             mov     prod+2,a
0216 F50F       +1  7636             mov     prod+3,a
0218 7E07       +1  7637             mov     r6,#7           ;initialize counter
021A            +1  7638     mup1:
                +1  7639+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7640+1           clr     c
021B E508       +1  7641+1           mov     a,mant2
021D 13         +1  7642+1           rrc     a
021E F508       +1  7643+1           mov     mant2,a
0220 E509       +1  7644+1           mov     a,mant2+1
0222 13         +1  7645+1           rrc     a
0223 F509       +1  7646+1           mov     mant2+1,a
0225 E50A       +1  7647+1           mov     a,mant2+2
0227 13         +1  7648+1           rrc     a
0228 F50A       +1  7649+1           mov     mant2+2,a
022A E50B       +1  7650+1           mov     a,mant2+3
022C 13         +1  7651+1           rrc     a
022D F50B       +1  7652+1           mov     mant2+3,a
022F 5014       +1  7653             jnc     nobit           ;skip if lsb was zero
                +1  7654+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7655+1           mov     a,r5
0232 250F       +1  7656+1           add     a,prod+3
0234 F50F       +1  7657+1           mov     prod+3,a
0236 E50E       +1  7658+1           mov     a,prod+2
0238 3C         +1  7659+1           addc    a,r4
0239 F50E       +1  7660+1           mov     prod+2,a
023B E50D       +1  7661+1           mov     a,prod+1
023D 3B         +1  7662+1           addc    a,r3
023E F50D       +1  7663+1           mov     prod+1,a
0240 E50C       +1  7664+1           mov     a,prod+0
0242 3A         +1  7665+1           addc    a,r2
0243 F50C       +1  7666+1           mov     prod,a
0245            +1  7667     nobit:
                +1  7668+3           lshift                  ;shift multiplicand up
0245 ED         +1  7669+1           mov     a,r5
0246 33         +1  7670+1           rlc     a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   122

0247 FD         +1  7671+1           mov     r5,a
0248 EC         +1  7672+1           mov     a,r4
0249 33         +1  7673+1           rlc     a
024A FC         +1  7674+1           mov     r4,a
024B EB         +1  7675+1           mov     a,r3
024C 33         +1  7676+1           rlc     a
024D FB         +1  7677+1           mov     r3,a
024E EA         +1  7678+1           mov     a,r2
024F 33         +1  7679+1           rlc     a
0250 FA         +1  7680+1           mov     r2,a
0251 DEC7       +1  7681             djnz    r6,mup1         ;loop if more
                +1  7682     
0253 7E11       +1  7683             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7684             sjmp    mup3
0257            +1  7685     mup11:
                +1  7686+3           shfdn   prod            ;shift product right
0257 C3         +1  7687+1           clr     c
0258 E50C       +1  7688+1           mov     a,prod
025A 13         +1  7689+1           rrc     a
025B F50C       +1  7690+1           mov     prod,a
025D E50D       +1  7691+1           mov     a,prod+1
025F 13         +1  7692+1           rrc     a
0260 F50D       +1  7693+1           mov     prod+1,a
0262 E50E       +1  7694+1           mov     a,prod+2
0264 13         +1  7695+1           rrc     a
0265 F50E       +1  7696+1           mov     prod+2,a
0267 E50F       +1  7697+1           mov     a,prod+3
0269 13         +1  7698+1           rrc     a
026A F50F       +1  7699+1           mov     prod+3,a
026C            +1  7700     mup3:
                +1  7701+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7702+1           clr     c
026D E508       +1  7703+1           mov     a,mant2
026F 13         +1  7704+1           rrc     a
0270 F508       +1  7705+1           mov     mant2,a
0272 E509       +1  7706+1           mov     a,mant2+1
0274 13         +1  7707+1           rrc     a
0275 F509       +1  7708+1           mov     mant2+1,a
0277 E50A       +1  7709+1           mov     a,mant2+2
0279 13         +1  7710+1           rrc     a
027A F50A       +1  7711+1           mov     mant2+2,a
027C E50B       +1  7712+1           mov     a,mant2+3
027E 13         +1  7713+1           rrc     a
027F F50B       +1  7714+1           mov     mant2+3,a
0281 5014       +1  7715             jnc     mup2            ;skip if bit not set
                +1  7716+3           dan     prod            ;add to prod
0283 ED         +1  7717+1           mov     a,r5
0284 250F       +1  7718+1           add     a,prod+3
0286 F50F       +1  7719+1           mov     prod+3,a
0288 E50E       +1  7720+1           mov     a,prod+2
028A 3C         +1  7721+1           addc    a,r4
028B F50E       +1  7722+1           mov     prod+2,a
028D E50D       +1  7723+1           mov     a,prod+1
028F 3B         +1  7724+1           addc    a,r3
0290 F50D       +1  7725+1           mov     prod+1,a
0292 E50C       +1  7726+1           mov     a,prod+0
0294 3A         +1  7727+1           addc    a,r2
0295 F50C       +1  7728+1           mov     prod,a
0297            +1  7729     mup2:
0297 DEBE       +1  7730             djnz    r6,mup11        ;loop if more
0299 E8         +1  7731             mov     a,r0            ;get exp1
029A 29         +1  7732             add     a,r1            ;add exp2
029B 247A       +1  7733             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7734             mov     r0,a            ;store
029E EF         +1  7735             mov     a,r7            ;get sign
029F 23         +1  7736             rl      a               ;rotate bit into msb
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   123

02A0 6207       +1  7737             xrl     sign,a          ;xor with other bit
                +1  7738+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7739+1           mov     r2,prod
02A4 AB0D       +1  7740+1           mov     r3,prod+1
02A6 AC0E       +1  7741+1           mov     r4,prod+2
02A8 AD0F       +1  7742+1           mov     r5,prod+3
02AA 11F0       +1  7743             call    norm1           ;normalize
02AC 11DE       +1  7744             call    pack1
                +1  7745+3           restregs
02AE D000       +1  7746+1           pop     0
02B0 D001       +1  7747+1           pop     1
02B2 D006       +1  7748+1           pop     6
02B4 D007       +1  7749+1           pop     7
02B6 22         +1  7750             ret
                +1  7751     ;-----------------------------------------------------------
                +1  7752     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  7753     
02B7            +1  7754     fldiv:
                +1  7755+3           saveregs
02B7 C007       +1  7756+1           push    7
02B9 C006       +1  7757+1           push    6
02BB C001       +1  7758+1           push    1
02BD C000       +1  7759+1           push    0
02BF 119E       +1  7760             call    unpack1
02C1 11BA       +1  7761             call    unpack2
02C3 E4         +1  7762             clr     a
02C4 F50C       +1  7763             mov     prod,a
02C6 F50D       +1  7764             mov     prod+1,a
02C8 F50E       +1  7765             mov     prod+2,a
02CA F50F       +1  7766             mov     prod+3,a
02CC E9         +1  7767             mov     a,r1            ;check for zero divisor
02CD 6067       +1  7768             jz      div9
02CF E8         +1  7769             mov     a,r0            ;check for zero dividend
02D0 6064       +1  7770             jz      div9
02D2 C3         +1  7771             clr     c
02D3 99         +1  7772             subb    a,r1            ;compute new exponent
02D4 2478       +1  7773             add     a,#127-7        ;unbias
02D6 F8         +1  7774             mov     r0,a            ;store back
02D7 EF         +1  7775             mov     a,r7            ;get sign
02D8 23         +1  7776             rl      a
02D9 6207       +1  7777             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  7778             mov     r6,#24+7        ;initialize counter
02DD            +1  7779     div1:
                +1  7780+3           shfup   prod            ;shift quotient up
02DD C3         +1  7781+1           clr     c
02DE E50F       +1  7782+1           mov     a,prod+3
02E0 33         +1  7783+1           rlc     a
02E1 F50F       +1  7784+1           mov     prod+3,a
02E3 E50E       +1  7785+1           mov     a,prod+2
02E5 33         +1  7786+1           rlc     a
02E6 F50E       +1  7787+1           mov     prod+2,a
02E8 E50D       +1  7788+1           mov     a,prod+1
02EA 33         +1  7789+1           rlc     a
02EB F50D       +1  7790+1           mov     prod+1,a
02ED E50C       +1  7791+1           mov     a,prod
02EF 33         +1  7792+1           rlc     a
02F0 F50C       +1  7793+1           mov     prod,a
02F2 C3         +1  7794             clr     c
02F3 EA         +1  7795             mov     a,r2            ;compare values
02F4 9508       +1  7796             subb    a,mant2
02F6 4028       +1  7797             jc      div2            ;skip if bigger
02F8 7013       +1  7798             jnz     div3
02FA EB         +1  7799             mov     a,r3            ;compare values
02FB 9509       +1  7800             subb    a,mant2+1
02FD 4021       +1  7801             jc      div2            ;skip if bigger
02FF 700C       +1  7802             jnz     div3
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   124

0301 EC         +1  7803             mov     a,r4            ;compare values
0302 950A       +1  7804             subb    a,mant2+2
0304 401A       +1  7805             jc      div2            ;skip if bigger
0306 7005       +1  7806             jnz     div3
0308 ED         +1  7807             mov     a,r5            ;compare values
0309 950B       +1  7808             subb    a,mant2+3
030B 4013       +1  7809             jc      div2            ;skip if bigger
030D            +1  7810     div3:
030D ED         +1  7811             mov     a,r5
030E 950B       +1  7812             subb    a,mant2+3
0310 FD         +1  7813             mov     r5,a
0311 EC         +1  7814             mov     a,r4
0312 950A       +1  7815             subb    a,mant2+2               ;do subtraction
0314 FC         +1  7816             mov     r4,a
0315 EB         +1  7817             mov     a,r3
0316 9509       +1  7818             subb    a,mant2+1               ;do subtraction
0318 FB         +1  7819             mov     r3,a
0319 EA         +1  7820             mov     a,r2
031A 9508       +1  7821             subb    a,mant2         ;do subtraction
031C FA         +1  7822             mov     r2,a
031D 430F01     +1  7823             orl     prod+3,#1       ;set lsb in quotient
0320            +1  7824     div2:
                +1  7825+3           lshift                  ;shift dividend up
0320 ED         +1  7826+1           mov     a,r5
0321 33         +1  7827+1           rlc     a
0322 FD         +1  7828+1           mov     r5,a
0323 EC         +1  7829+1           mov     a,r4
0324 33         +1  7830+1           rlc     a
0325 FC         +1  7831+1           mov     r4,a
0326 EB         +1  7832+1           mov     a,r3
0327 33         +1  7833+1           rlc     a
0328 FB         +1  7834+1           mov     r3,a
0329 EA         +1  7835+1           mov     a,r2
032A 33         +1  7836+1           rlc     a
032B FA         +1  7837+1           mov     r2,a
032C DEAF       +1  7838             djnz    r6,div1         ;loop if more
                +1  7839+3           copytor prod            ;copy quotient
032E AA0C       +1  7840+1           mov     r2,prod
0330 AB0D       +1  7841+1           mov     r3,prod+1
0332 AC0E       +1  7842+1           mov     r4,prod+2
0334 AD0F       +1  7843+1           mov     r5,prod+3
0336            +1  7844     div9:
0336 11F0       +1  7845             call    norm1           ;now normalize result
0338 11DE       +1  7846             call    pack1           ;pack it up
                +1  7847+3           restregs                ;restore registers
033A D000       +1  7848+1           pop     0
033C D001       +1  7849+1           pop     1
033E D006       +1  7850+1           pop     6
0340 D007       +1  7851+1           pop     7
0342 22         +1  7852             ret
                +1  7853     ;------------------------------------------------------------------
                +1  7854     
                +1  7855     ;       Float to long conversion: if the exponent is less than the
                +1  7856     ;       excess value, the result is zero. If the exponent is so large
                +1  7857     ;       that the value would be shifted out, the result is overflow.
                +1  7858     ;       Otherwise shift the mantissa up or down as required.
                +1  7859     
0343            +1  7860     ftol:
                +1  7861+3           saveregs
0343 C007       +1  7862+1           push    7
0345 C006       +1  7863+1           push    6
0347 C001       +1  7864+1           push    1
0349 C000       +1  7865+1           push    0
034B EA         +1  7866             mov     a,r2
034C B4BF09     +1  7867             cjne    a,#0bfh,ne05
034F EB         +1  7868             mov     a,r3
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   125

0350 7006       +1  7869             jnz     ne05
0352 EC         +1  7870             mov     a,r4
0353 7003       +1  7871             jnz     ne05
0355 ED         +1  7872             mov     a,r5
0356 6024       +1  7873             jz      ftol1
0358 119E       +1  7874     ne05:   call    unpack1
035A E8         +1  7875             mov     a,r0            ;get exponent
035B 2482       +1  7876             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  7877             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  7878             mov     a,r7            ;get sign
0361 30E70D     +1  7879             jnb     acc.7,ftol4     ;skip if +ve
                +1  7880+3           neg1                    ;negate it
0364 C3         +1  7881+1           clr     c
0365 E4         +1  7882+1           clr     a
0366 9D         +1  7883+1           subb    a,r5
0367 FD         +1  7884+1           mov     r5,a
0368 E4         +1  7885+1           clr     a
0369 9C         +1  7886+1           subb    a,r4
036A FC         +1  7887+1           mov     r4,a
036B E4         +1  7888+1           clr     a
036C 9B         +1  7889+1           subb    a,r3
036D FB         +1  7890+1           mov     r3,a
036E E4         +1  7891+1           clr     a
036F 9A         +1  7892+1           subb    a,r2
0370 FA         +1  7893+1           mov     r2,a
0371            +1  7894     ftol4:
0371 E8         +1  7895             mov     a,r0            ;get exponent
0372 246A       +1  7896             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  7897             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  7898             mov     r0,a            ;save it
0378 24F8       +1  7899             add     a,#-8           ;if > 8, too big
037A 500E       +1  7900             jnc     ftol3
037C            +1  7901     ftol1:
037C E4         +1  7902             clr     a
037D FA         +1  7903             mov     r2,a
037E FB         +1  7904             mov     r3,a
037F FC         +1  7905             mov     r4,a
0380 FD         +1  7906             mov     r5,a
0381            +1  7907     ftol9:
                +1  7908+3           restregs
0381 D000       +1  7909+1           pop     0
0383 D001       +1  7910+1           pop     1
0385 D006       +1  7911+1           pop     6
0387 D007       +1  7912+1           pop     7
0389 22         +1  7913             ret
038A            +1  7914     ftol3:
038A E8         +1  7915             mov     a,r0
038B FE         +1  7916             mov     r6,a            ;store in counter
038C 60F3       +1  7917             jz      ftol9           ;if zero, do nothing
038E            +1  7918     ftol33:
                +1  7919+3           lshift                  ;shift up
038E ED         +1  7920+1           mov     a,r5
038F 33         +1  7921+1           rlc     a
0390 FD         +1  7922+1           mov     r5,a
0391 EC         +1  7923+1           mov     a,r4
0392 33         +1  7924+1           rlc     a
0393 FC         +1  7925+1           mov     r4,a
0394 EB         +1  7926+1           mov     a,r3
0395 33         +1  7927+1           rlc     a
0396 FB         +1  7928+1           mov     r3,a
0397 EA         +1  7929+1           mov     a,r2
0398 33         +1  7930+1           rlc     a
0399 FA         +1  7931+1           mov     r2,a
039A DEF2       +1  7932             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7933             sjmp    ftol9
039E            +1  7934     ftol2:
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   126

039E F4         +1  7935             cpl     a               ;complement
039F FE         +1  7936             mov     r6,a
03A0 6022       +1  7937             jz      ftol22
03A2            +1  7938     ftol23:
03A2 EF         +1  7939             mov     a,r7
03A3 30E70F     +1  7940             jnb     acc.7,ftol24
                +1  7941+3           rshift1
03A6 D3         +1  7942+1           setb    c
03A7 EA         +1  7943+1           mov     a,r2
03A8 13         +1  7944+1           rrc     a
03A9 FA         +1  7945+1           mov     r2,a
03AA EB         +1  7946+1           mov     a,r3
03AB 13         +1  7947+1           rrc     a
03AC FB         +1  7948+1           mov     r3,a
03AD EC         +1  7949+1           mov     a,r4
03AE 13         +1  7950+1           rrc     a
03AF FC         +1  7951+1           mov     r4,a
03B0 ED         +1  7952+1           mov     a,r5
03B1 13         +1  7953+1           rrc     a
03B2 FD         +1  7954+1           mov     r5,a
03B3 800D       +1  7955             jmp     ftol25
03B5            +1  7956+3   ftol24: rshift                  ;shift down
03B5 C3         +1  7957+1           clr     c
03B6 EA         +1  7958+1           mov     a,r2
03B7 13         +1  7959+1           rrc     a
03B8 FA         +1  7960+1           mov     r2,a
03B9 EB         +1  7961+1           mov     a,r3
03BA 13         +1  7962+1           rrc     a
03BB FB         +1  7963+1           mov     r3,a
03BC EC         +1  7964+1           mov     a,r4
03BD 13         +1  7965+1           rrc     a
03BE FC         +1  7966+1           mov     r4,a
03BF ED         +1  7967+1           mov     a,r5
03C0 13         +1  7968+1           rrc     a
03C1 FD         +1  7969+1           mov     r5,a
03C2 DEDE       +1  7970     ftol25: djnz    r6,ftol23
03C4            +1  7971     ftol22:
                +1  7972+3           add1                    ;round
03C4 ED         +1  7973+1           mov     a,r5
03C5 2401       +1  7974+1           add     a,#1
03C7 FD         +1  7975+1           mov     r5,a
03C8 E4         +1  7976+1           clr     a
03C9 3C         +1  7977+1           addc    a,r4
03CA FC         +1  7978+1           mov     r4,a
03CB E4         +1  7979+1           clr     a
03CC 3B         +1  7980+1           addc    a,r3
03CD FB         +1  7981+1           mov     r3,a
03CE E4         +1  7982+1           clr     a
03CF 3A         +1  7983+1           addc    a,r2
03D0 FA         +1  7984+1           mov     r2,a
03D1 EF         +1  7985             mov     a,r7
03D2 30E70F     +1  7986             jnb     acc.7,ftol26
                +1  7987+3           rshift1
03D5 D3         +1  7988+1           setb    c
03D6 EA         +1  7989+1           mov     a,r2
03D7 13         +1  7990+1           rrc     a
03D8 FA         +1  7991+1           mov     r2,a
03D9 EB         +1  7992+1           mov     a,r3
03DA 13         +1  7993+1           rrc     a
03DB FB         +1  7994+1           mov     r3,a
03DC EC         +1  7995+1           mov     a,r4
03DD 13         +1  7996+1           rrc     a
03DE FC         +1  7997+1           mov     r4,a
03DF ED         +1  7998+1           mov     a,r5
03E0 13         +1  7999+1           rrc     a
03E1 FD         +1  8000+1           mov     r5,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   127

03E2 809D       +1  8001             jmp     ftol9
03E4            +1  8002+3   ftol26: rshift
03E4 C3         +1  8003+1           clr     c
03E5 EA         +1  8004+1           mov     a,r2
03E6 13         +1  8005+1           rrc     a
03E7 FA         +1  8006+1           mov     r2,a
03E8 EB         +1  8007+1           mov     a,r3
03E9 13         +1  8008+1           rrc     a
03EA FB         +1  8009+1           mov     r3,a
03EB EC         +1  8010+1           mov     a,r4
03EC 13         +1  8011+1           rrc     a
03ED FC         +1  8012+1           mov     r4,a
03EE ED         +1  8013+1           mov     a,r5
03EF 13         +1  8014+1           rrc     a
03F0 FD         +1  8015+1           mov     r5,a
03F1 808E       +1  8016             jmp     ftol9
                +1  8017     
                +1  8018     ;       arithmetic integer to floating conversions
                +1  8019     
03F3            +1  8020     abtof:
03F3 ED         +1  8021             mov     a,r5
03F4 23         +1  8022             rl      a
03F5 FC         +1  8023             mov     r4,a
03F6 9C         +1  8024             subb    a,r4
03F7 FC         +1  8025             mov     r4,a
03F8 FB         +1  8026             mov     r3,a
03F9 FA         +1  8027             mov     r2,a
03FA 8006       +1  8028             jmp     altof
03FC            +1  8029     awtof:
03FC EC         +1  8030             mov     a,r4
03FD 23         +1  8031             rl      a
03FE FB         +1  8032             mov     r3,a
03FF 9B         +1  8033             subb    a,r3
0400 FB         +1  8034             mov     r3,a
0401 FA         +1  8035             mov     r2,a
0402            +1  8036     altof:
                +1  8037+3           saveregs
0402 C007       +1  8038+1           push    7
0404 C006       +1  8039+1           push    6
0406 C001       +1  8040+1           push    1
0408 C000       +1  8041+1           push    0
040A EA         +1  8042             mov     a,r2            ;get sign
040B 5480       +1  8043             anl     a,#80h
040D FF         +1  8044             mov     r7,a            ;store it
040E 30E70D     +1  8045             jnb     acc.7,altof1    ;skip if +ve
                +1  8046+3           neg1
0411 C3         +1  8047+1           clr     c
0412 E4         +1  8048+1           clr     a
0413 9D         +1  8049+1           subb    a,r5
0414 FD         +1  8050+1           mov     r5,a
0415 E4         +1  8051+1           clr     a
0416 9C         +1  8052+1           subb    a,r4
0417 FC         +1  8053+1           mov     r4,a
0418 E4         +1  8054+1           clr     a
0419 9B         +1  8055+1           subb    a,r3
041A FB         +1  8056+1           mov     r3,a
041B E4         +1  8057+1           clr     a
041C 9A         +1  8058+1           subb    a,r2
041D FA         +1  8059+1           mov     r2,a
041E            +1  8060     altof1:
041E 7896       +1  8061             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8062             call    norm1           ;normalize it
0422 11DE       +1  8063             call    pack1           ;and pack up
                +1  8064+3           restregs
0424 D000       +1  8065+1           pop     0
0426 D001       +1  8066+1           pop     1
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   128

0428 D006       +1  8067+1           pop     6
042A D007       +1  8068+1           pop     7
042C 22         +1  8069             ret
                +1  8070     
042D            +1  8071     lbtof:
042D 7C00       +1  8072             mov     r4,#0
042F            +1  8073     lwtof:
042F E4         +1  8074             clr     a
0430 FB         +1  8075             mov     r3,a
0431 FA         +1  8076             mov     r2,a
0432            +1  8077     lltof:
                +1  8078+3           saveregs
0432 C007       +1  8079+1           push    7
0434 C006       +1  8080+1           push    6
0436 C001       +1  8081+1           push    1
0438 C000       +1  8082+1           push    0
043A 7F00       +1  8083             mov     r7,#0           ;zero sign
043C 80E0       +1  8084             sjmp    altof1
                +1  8085     
                +1  8086     ;-------------------------------------------------------
                +1  8087     
                +1  8088     
                    8089     
                    8090     ;$include (d:\amp\wriread.asm)
                +1  8091     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8092     cle256:          mov            IE,#00H
0441 75B601     +1  8093                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8094                              MOV            PSCTL,#03
                +1  8095                                             
0447 7400       +1  8096                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8097                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8098                                     mov             PSCTL,#00
044D 75B600     +1  8099                                 mov         FLSCL,#00
0450 75A880     +1  8100                               mov           IE,#80H
0453 22         +1  8101                                     ret
                +1  8102     
                +1  8103     ;чтение памяти программ в r8..r11
                +1  8104     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8105     re4byte:        mov                     dph,r2
0456 8B82       +1  8106                                             mov                     dpl,r3
0458 E4         +1  8107                                             clr                     a
0459 93         +1  8108                                             movc            a,@a+dptr
045A F508       +1  8109                                             mov                     r8,a
045C A3         +1  8110                                             inc                     dptr
045D E4         +1  8111                                             clr                     a
045E 93         +1  8112                                             movc            a,@a+dptr
045F F509       +1  8113                                             mov                     r9,a
0461 A3         +1  8114                                             inc                     dptr
0462 E4         +1  8115                                             clr                     a
0463 93         +1  8116                                             movc            a,@a+dptr
0464 F50A       +1  8117                                             mov                     r10,a
0466 A3         +1  8118                                             inc                     dptr
0467 E4         +1  8119                                             clr                     a
0468 93         +1  8120                                             movc            a,@a+dptr
0469 F50B       +1  8121                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8122                                             ret
                +1  8123      ;чтение памяти программ в r2..r5
                +1  8124     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8125     rebyte2:        mov                     dph,r2
046E 8B82       +1  8126                                             mov                     dpl,r3
0470 E4         +1  8127                                             clr                     a
0471 93         +1  8128                                             movc            a,@a+dptr
0472 FA         +1  8129                                             mov                     r2,a
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   129

0473 A3         +1  8130                                             inc                     dptr
0474 E4         +1  8131                                             clr                     a
0475 93         +1  8132                                             movc            a,@a+dptr
0476 FB         +1  8133                                             mov                     r3,a
0477 A3         +1  8134                                             inc                     dptr
0478 E4         +1  8135                                             clr                     a
0479 93         +1  8136                                             movc            a,@a+dptr
047A FC         +1  8137                                             mov                     r4,a
047B A3         +1  8138                                             inc                     dptr
047C E4         +1  8139                                             clr                     a
047D 93         +1  8140                                             movc            a,@a+dptr
047E FD         +1  8141                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8142                                             ret
                +1  8143      
                +1  8144     
                +1  8145      ;r7-количество байт
                +1  8146     ;dptr-адр ячейки для записи
                +1  8147     ;r1-адр ячейки  внешнего озу
                +1  8148     
0480 75A800     +1  8149     wrpage:  mov            IE,#00H
0483 75B601     +1  8150     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8151                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8152                      movx           a,@r1
048A F0         +1  8153                      movx           @dptr,a                         ;wr
048B 758F00     +1  8154                      mov            PSCTL,#0
048E 75B600     +1  8155                      mov            FLSCL,#00
0491 A3         +1  8156                     inc                     dptr
0492 09         +1  8157                     inc                     r1
0493 DFEE       +1  8158                     djnz            r7,WW5
0495 75A880     +1  8159                     mov             IE,#80H
0498 22         +1  8160                     ret
                +1  8161                             
                +1  8162     
                +1  8163     
                +1  8164                                                             
                +1  8165     
                +1  8166     
                +1  8167     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8168     ;чтение памяти программ во внешнее озу
                +1  8169     ;вх-r2,r3-адр яч памяти прогр
                +1  8170     ;r1- яч внешнее озу
0499 8A83       +1  8171     copyPP:         mov                     dph,r2
049B 8B82       +1  8172                                             mov                     dpl,r3
049D 7FFF       +1  8173                                             mov                     r7,#0ffh
049F E4         +1  8174     copy1:          clr                     a
04A0 93         +1  8175                                             movc            a,@a+dptr
04A1 F3         +1  8176                                             movx                    @r1,a
04A2 A3         +1  8177                                             inc                     dptr
04A3 09         +1  8178                                             inc                     r1
04A4 DFF9       +1  8179                                             djnz            r7,copy1
04A6 22         +1  8180                                             ret
                +1  8181     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8182     
                +1  8183                                     
                +1  8184     
                +1  8185     ;r8..r11->@r0..@r0+3
                +1  8186     ;r0-адр ячейки
                +1  8187     ;сохранить в ячейке озу
04A7 E508       +1  8188     savelte:        mov     a,ltemp
04A9 F6         +1  8189                                             mov     @r0,a
04AA 08         +1  8190                                             inc     r0
04AB E509       +1  8191                                             mov     a,ltemp+1
04AD F6         +1  8192                                             mov     @r0,a
04AE 08         +1  8193                                             inc     r0
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   130

04AF E50A       +1  8194                                             mov     a,ltemp+2
04B1 F6         +1  8195                                             mov     @r0,a
04B2 08         +1  8196                                             inc     r0
04B3 E50B       +1  8197                                             mov     a,ltemp+3
04B5 F6         +1  8198                                             mov     @r0,a
04B6 22         +1  8199                                             ret
                +1  8200     
                +1  8201     ;
                +1  8202     
                +1  8203     
                +1  8204     
                +1  8205     
                +1  8206     
                +1  8207                     
                +1  8208     
                +1  8209     
                +1  8210     
                +1  8211     
                +1  8212      
                    8213     
                    8214                                                   
                    8215     END
                                                                             
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   131

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03A2H   R   SEG=MAIN   859#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1463 1520 1545 1566 1570 1573 1574 1576 1683 1688 3543 3557 3638
                                           3641 3684 3779 3823 3826 3903 3907 3908 3909 3912 4131 4168 4169 4171 4245
                                           4265 4356 4360 4403 4406 4745 4750 4916 4921 5669 5831 5834
ABRET. . . . . . .  C ADDR   2309H   R   SEG=MAIN   5598 5600#
ABTOF. . . . . . .  C ADDR   03F3H   A      8020#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 673 737 745 753 761 763 783 1138 1149 1157 1236 1632 1819 1828 1837
                                           1846 1867 2193 2216 2221 2225 2230 2233 2236 2239 2242 2429 2490 2536 2547
                                           2634 2643 2651 2660 2800 2832 2857 2862 2866 2869 2872 2875 2878 2881 3203
                                           3291 3337 3359 3378 3400 3426 4305 4311 4348 4437 5175 6261 6427 6505 6508
                                           6765 7417 7500 7517 7549 7587 7615 7877 7879 7897 7940 7986 8045
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2ACEH   R   SEG=MAIN   894 931 933 935 937 939 941 943 945 947 1013 1015 1017 1019 1021
                                           1023 1025 1027 1029 1032 1034 1036 1038 1040 1042 1044 1046 1048 1050 1069
                                           1071 1073 7006#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1519 1531 1535 1550 1575 1578 1579 1687 1691 3556 3560 3635 3639
                                           3681 3685 3776 3780 3825 3829 3911 3924 4141 4155 4157 4159 4170 4173 4255
                                           4266 4361 4407 4749 4753 4920 4924 5470 5489 5507 5570 5587 5833 5836 6182
                                           6214
ADRBLOK. . . . . .  C ADDR   2782H   R   SEG=MAIN   3275 3298 3654 3797 4667 4835 4986 6226#
AFTERK . . . . . .  C ADDR   0699H   R   SEG=MAIN   1166 1245#
AGE2 . . . . . . .  C ADDR   023CH   R   SEG=MAIN   625# 628
AGE9 . . . . . . .  C ADDR   0859H   R   SEG=MAIN   1467# 1470
AGEON. . . . . . .  C ADDR   024AH   R   SEG=MAIN   634# 636
ALESS0 . . . . . .  C ADDR   098EH   R   SEG=MAIN   1632 1653#
ALLSUM . . . . . .  C ADDR   0340H   R   SEG=MAIN   803# 838 856 872
ALMUL. . . . . . .  C ADDR   2A15H   R   SEG=MAIN   6852#
ALTOF. . . . . . .  C ADDR   0402H   A      1132 1230 1261 1269 1287 1303 1314 1331 1344 1425 1958 2048 2108 2146
                                           3688 3785 4269 4364 4410 4498 4576 4584 4602 4708 4720 4735 4819 4881 4897
                                           4970 5032 5047 8028 8036#
ALTOF1 . . . . . .  C ADDR   041EH   A      8045 8060# 8084
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05FFH   R   SEG=MAIN   1130 1146#
AN_T7. . . . . . .  C ADDR   116BH   R   SEG=MAIN   2882# 2949 2958
AUTOKA . . . . . .  C ADDR   0C19H   R   SEG=MAIN   1164 2071#
AVPGO. . . . . . .  C ADDR   07C6H   R   SEG=MAIN   1388 1390#
AVTDEC1. . . . . .  C ADDR   065BH   R   SEG=MAIN   1199 1208#
AWTOF. . . . . . .  C ADDR   03FCH   A      8029#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   132

B. . . . . . . . .  D ADDR   00F0H   A      122# 5320 5689 6855 6858 6860 6864 6868 6872 6876 6881 6885 6892 6896
                                           6900 6906 6910 6914 6920 7613 7614
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 461#
BFORM. . . . . . .  C ADDR   26BFH   R   SEG=MAIN   6031 6036 6048# 6074
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4494 4550 4649
BIN30. . . . . . .  C ADDR   2831H   R   SEG=MAIN   6415# 6441
BIN31. . . . . . .  C ADDR   2835H   R   SEG=MAIN   6420# 6424
BIN32. . . . . . .  C ADDR   2845H   R   SEG=MAIN   6433# 6438
BIN41. . . . . . .  C ADDR   2856H   R   SEG=MAIN   6449# 6459
BINDEC . . . . . .  C ADDR   2825H   R   SEG=MAIN   1521 1577 1689 3558 3827 3913 4172 4751 4922 5835 6394#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1773 1774 1777
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1354 1586 1763 2937 2938 2940
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1799 1912 2251 2252 2260 6262
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1255 1781 2916 2928 4068 5239
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 574 705 2222 2302 2387 2422 2453 2863 2917 3034 3057 3132 3163 3188
                                           3294 3407 3658 3706 3734 3895 4023 4069 4116 4203 4278 4392
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1324 1797 2227 2936 2943 4276 4564
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1080 1083 6014
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1673 2628 3166 3184 3196 3293 3406 3659 3705 3894
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1672 2452 2564 2918 3187 3714 3733 4028 4070 4115 4202 4275
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2529 2712 2810 3100 3455 3595 3608 4234 4340 4441 5754 5780 5805
                                           5817 5880 5887 5893 5899
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1744 2960 2961 2968
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 649 1593 1670
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4034 4565
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1911
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1669 2388 2423 2426 2975 3133
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 518 522 2595 2600 2606 4012 4017 4098 4111 4208 4211 4215
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1352 1368 1410 2245 2247 2301 2451 2915 3026 3033 3186 4391
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1409 1668 2246 2303 2313 2450 2458 2993 3025 3056 3185 4390
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 674 720
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4411 5596 5599
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1402 1609 1998 2001 2348
BLOIN. . . . . . .  C ADDR   15F5H   R   SEG=MAIN   3563# 3568
BLOKVV . . . . . .  C ADDR   15C7H   R   SEG=MAIN   3533#
BLOKVVC. . . . . .  C ADDR   15D1H   R   SEG=MAIN   3536 3539#
BL_LI. . . . . . .  C ADDR   1592H   R   SEG=MAIN   3483 3491#
BOUT7. . . . . . .  C ADDR   1330H   R   SEG=MAIN   3143# 3145
BRET . . . . . . .  C ADDR   2152H   R   SEG=MAIN   5260 5265 5269#
BUFDEC . . . . . .  C ADDR   09C0H   R   SEG=MAIN   1694# 1699
BUFIND . . . . . .  D ADDR   0040H   A      298# 624 628 633 636 642 1466 1470 1536 1557 1578 1579 1580 1642 1647
                                           1692 1700 1702 1707 1742 1761 1767 1775 1778 1783 1798 1800 2210 2257 2261
                                           2504 2522 2538 2540 2543 2598 2599 2604 2605 2707 2751 2770 2850 2921 2977
                                           3035 3036 3083 3087 3113 3135 3149 3156 3167 3168 3266 3450 3477 3505 3534
                                           3561 3575 3576 3580 3581 3588 3589 3594 3610 3749 3756 3830 3838 3840 3856
                                           3880 3914 3923 3925 3989 4011 4018 4140 4173 4174 4177 4226 4254 4332 4378
                                           4754 4762 4766 4925 4933 4937 5075 5107 5318 5331 5337 5344 5469 5488 5506
                                           5569 5586 5597 5757 5783 5837 5884 5905 6181 6213 6263
BUFMEA . . . . . .  C ADDR   1E73H   R   SEG=MAIN   4756# 4761
BUFMIN . . . . . .  C ADDR   1F66H   R   SEG=MAIN   4927# 4932
BUFON. . . . . . .  C ADDR   0D6BH   R   SEG=MAIN   2251 2260#
BUFR . . . . . . .  C ADDR   08FEH   R   SEG=MAIN   1559# 1564
BUFR2. . . . . . .  C ADDR   08E0H   R   SEG=MAIN   1538# 1543
BUFR3. . . . . . .  C ADDR   08D9H   R   SEG=MAIN   1529 1534#
BUFR30 . . . . . .  C ADDR   08DCH   R   SEG=MAIN   1532 1536#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7610# 7614
CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   133

CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357
CEXP . . . . . . .  C ADDR   01E2H   A      7587 7596#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   21F5H   R   SEG=MAIN   1447 2969 4367 5404#
CH1. . . . . . . .  C ADDR   2215H   R   SEG=MAIN   5224 5415#
CH10 . . . . . . .  C ADDR   21F9H   R   SEG=MAIN   855 1094 3815 5405#
CH100. . . . . . .  C ADDR   220DH   R   SEG=MAIN   802 1627 5410#
CH10000. . . . . .  C ADDR   2209H   R   SEG=MAIN   5409#
CH150H . . . . . .  C ADDR   2259H   R   SEG=MAIN   5434#
CH2. . . . . . . .  C ADDR   2211H   R   SEG=MAIN   1089 5411#
CH20 . . . . . . .  C ADDR   23D0H   R   SEG=MAIN   837 1099 5720#
CH2THO . . . . . .  C ADDR   2239H   R   SEG=MAIN   2115 2153 5426#
CH320H . . . . . .  C ADDR   2255H   R   SEG=MAIN   5433# 6234
CH4. . . . . . . .  C ADDR   2201H   R   SEG=MAIN   1103 5407#
CH43 . . . . . . .  C ADDR   1800H   R   SEG=MAIN   3832# 3837
CH43_42. . . . . .  C ADDR   18A6H   R   SEG=MAIN   3927# 3932
CH5. . . . . . . .  C ADDR   21FDH   R   SEG=MAIN   871 5406#
CH57 . . . . . . .  C ADDR   23CCH   R   SEG=MAIN   5719#
CH954. . . . . . .  C ADDR   2205H   R   SEG=MAIN   5408#
CHAIBL . . . . . .  C ADDR   1440H   R   SEG=MAIN   3268 3270#
CHAIPR . . . . . .  C ADDR   1755H   R   SEG=MAIN   3751 3753#
CHANMA . . . . . .  C ADDR   0F38H   R   SEG=MAIN   2536 2545#
CHANZ. . . . . . .  C ADDR   0F1FH   R   SEG=MAIN   2490 2534#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 553 1155 1200 1208 2172 4024
CHBEFORE . . . . .  D ADDR   009BH   A      381# 576 799 813 832 850 866
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4665 4715 4731 4833 4887 4984 5038
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 587 1897 1902 1966 2007 3703
CHCMP. . . . . . .  C ADDR   20F5H   R   SEG=MAIN   1161 5201#
CHDEC. . . . . . .  C ADDR   2108H   R   SEG=MAIN   1209 1222 5216#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2029 2056 2078 2128 2166
CHDELMO. . . . . .  C ADDR   0C01H   R   SEG=MAIN   2039 2056# 2061
CHIF . . . . . . .  C ADDR   2415H   R   SEG=MAIN   5761 5764#
CHIF5. . . . . . .  C ADDR   241DH   R   SEG=MAIN   5767 5769#
CHIFB. . . . . . .  C ADDR   2440H   R   SEG=MAIN   5787 5790#
CHIFB1 . . . . . .  C ADDR   2446H   R   SEG=MAIN   5789 5790 5793#
CHIFL5 . . . . . .  C ADDR   244EH   R   SEG=MAIN   5797 5800#
CHIFOUR. . . . . .  C ADDR   242FH   R   SEG=MAIN   5774 5776 5780#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1370 1804
CHIND2 . . . . . .  D ADDR   0033H   A      315# 707 709 717
CHINKOR. . . . . .  D ADDR   0098H   A      370# 548 781 1147 1160 1202 1216 1221 2063
CHK. . . . . . . .  C ADDR   2251H   R   SEG=MAIN   1325 5432#
CHKL . . . . . . .  D ADDR   003DH   A      305# 687 689 697 699 700 702 2366 2393 2441 2896 3172 3886 4281
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1077 1084 1107 6013
CHMASN . . . . . .  D ADDR   003FH   A      306# 788 797 833 851 867 883 1082 1084 1085
CHMINUS. . . . . .  C ADDR   2767H   R   SEG=MAIN   3288 3334 3356 3375 3397 6196# 6258
CHTADC . . . . . .  C ADDR   209FH   R   SEG=MAIN   5133#
CHTHO. . . . . . .  C ADDR   2231H   R   SEG=MAIN   1294 1332 4507 4592 4610 5424#
CHTHOU . . . . . .  C ADDR   22D4H   R   SEG=MAIN   5557#
CHZAP. . . . . . .  C ADDR   21F1H   R   SEG=MAIN   1886 5403#
CH_1 . . . . . . .  C ADDR   221DH   R   SEG=MAIN   579 1483 1506 1899 1904 1993 2009 3786 5417#
CH_10. . . . . . .  C ADDR   2249H   R   SEG=MAIN   1489 1512 1971 1982 4270 4740 4910 5430#
CH_10TH. . . . . .  C ADDR   2245H   R   SEG=MAIN   1383 5429#
CH_2 . . . . . . .  C ADDR   2221H   R   SEG=MAIN   1963 1976 1990 5418#
CH_200 . . . . . .  C ADDR   2241H   R   SEG=MAIN   5428#
CH_220 . . . . . .  C ADDR   223DH   R   SEG=MAIN   1345 5427#
CH_22T . . . . . .  C ADDR   2312H   R   SEG=MAIN   1435 5605#
CH_250 . . . . . .  C ADDR   224DH   R   SEG=MAIN   1250 5431#
CH_4 . . . . . . .  C ADDR   2225H   R   SEG=MAIN   1985 3789 5419#
CH_5 . . . . . . .  C ADDR   2229H   R   SEG=MAIN   5420#
CH_500 . . . . . .  C ADDR   230EH   R   SEG=MAIN   1431 5604#
CH_953 . . . . . .  C ADDR   222DH   R   SEG=MAIN   5423#
CH_B . . . . . . .  C ADDR   230AH   R   SEG=MAIN   1451 5602#
CH_FL. . . . . . .  C ADDR   2316H   R   SEG=MAIN   1475 5606#
CH_MLN . . . . . .  C ADDR   2219H   R   SEG=MAIN   5416#
CIKLWR . . . . . .  C ADDR   2695H   R   SEG=MAIN   6019#
CKCON. . . . . . .  D ADDR   008EH   A      30# 479 510
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   134

CL4. . . . . . . .  C ADDR   226BH   R   SEG=MAIN   5449# 5451
CL4N . . . . . . .  C ADDR   2271H   R   SEG=MAIN   5458# 5460
CLE20. . . . . . .  C ADDR   1893H   R   SEG=MAIN   3917# 3919
CLE256 . . . . . .  C ADDR   043EH   A      4104 4540 4642 8092#
CLEAR. . . . . . .  C ADDR   281FH   R   SEG=MAIN   6372 6376# 6406
CLEAR4 . . . . . .  C ADDR   2268H   R   SEG=MAIN   811 1399 1401 1546 1567 1606 1608 2288 2290 2954 2956 4664 5447#
CLEARN . . . . . .  C ADDR   2270H   R   SEG=MAIN   3636 3682 3777 4132 4246 4357 4404 5456#
CLMASSIX . . . . .  C ADDR   2685H   R   SEG=MAIN   539 1397 1604 2067 2176 2286 2952 3131 6007#
CLMASV . . . . . .  C ADDR   07CBH   R   SEG=MAIN   1392 1394#
CLMAX. . . . . . .  C ADDR   268AH   R   SEG=MAIN   6009# 6012
CLR11. . . . . . .  C ADDR   2820H   R   SEG=MAIN   6378# 6380
CLRDEC . . . . . .  C ADDR   2819H   R   SEG=MAIN   6370#
CLRNUM . . . . . .  C ADDR   281DH   R   SEG=MAIN   6373# 6487
CLRVICH. . . . . .  C ADDR   12A0H   R   SEG=MAIN   3056# 3073
CNTR . . . . . . .  N NUMB   0006H   A      7283#
CO02S. . . . . . .  C ADDR   21D9H   R   SEG=MAIN   5387# 5391
CO05S. . . . . . .  C ADDR   21E6H   R   SEG=MAIN   5396# 5400
CO1S . . . . . . .  C ADDR   21D0H   R   SEG=MAIN   5381# 5381
CO2S . . . . . . .  C ADDR   21CCH   R   SEG=MAIN   5379# 5383
COMPA1 . . . . . .  C ADDR   0875H   R   SEG=MAIN   1483# 1492
COMPA2 . . . . . .  C ADDR   08ABH   R   SEG=MAIN   1506# 1515
COND . . . . . . .  C ADDR   26F9H   R   SEG=MAIN   6103#
COPY1. . . . . . .  C ADDR   049FH   A      8174# 8179
COPYPP . . . . . .  C ADDR   0499H   A      4091 4519 4620 8171#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3802 3938 4657 4673 4688 4826 4841 4856 4977 4992 5007
COUNT. . . . . . .  C ADDR   21AEH   R   SEG=MAIN   5353# 5353
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   21B5H   R   SEG=MAIN   5359# 5359
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 484
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1634 1655
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1637 1659
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 485
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1894
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1891
DCOA . . . . . . .  C ADDR   26FEH   R   SEG=MAIN   6107# 6109
DCOB . . . . . . .  C ADDR   2705H   R   SEG=MAIN   6111# 6129
DCOC . . . . . . .  C ADDR   2710H   R   SEG=MAIN   6121# 6126
DCOD . . . . . . .  C ADDR   271DH   R   SEG=MAIN   6128 6131#
DDOUTF . . . . . .  C ADDR   1547H   R   SEG=MAIN   3257 3313 3436 3444# 3529
DDOUTFR. . . . . .  C ADDR   1424H   R   SEG=MAIN   3257# 3263
DEC30. . . . . . .  C ADDR   2872H   R   SEG=MAIN   6497# 6522
DEC31. . . . . . .  C ADDR   2877H   R   SEG=MAIN   6503# 6510
DEC32. . . . . . .  C ADDR   2887H   R   SEG=MAIN   6515# 6519
DECBIN . . . . . .  C ADDR   2865H   R   SEG=MAIN   3640 3686 3781 4267 4362 4408 6476#
DECSIZE. . . . . .  N NUMB   000AH   A      6351# 6371 6405 6432 6445 6448 6502
DECT2. . . . . . .  C ADDR   2890H   R   SEG=MAIN   6493 6525#
DEDPTR . . . . . .  C ADDR   2AE5H   R   SEG=MAIN   7010 7014 7018 7024#
DENORM . . . . . .  C ADDR   0133H   A      7442# 7498
DGOTO7 . . . . . .  C ADDR   16D9H   R   SEG=MAIN   3689# 3697
DIAP . . . . . . .  D ADDR   00AEH   A      389# 567 1387 1588 1706 1922 2280 2319 2945 4176 4547 5240 5261 5520 5535
                                           5686 5748
DIINC. . . . . . .  C ADDR   0D90H   R   SEG=MAIN   2283 2286#
DIKDN. . . . . . .  C ADDR   23A4H   R   SEG=MAIN   5688 5708#
DIKDW. . . . . . .  C ADDR   22BCH   R   SEG=MAIN   5524 5545#
DIKM . . . . . . .  C ADDR   22D2H   R   SEG=MAIN   5556#
DIPAR. . . . . . .  C ADDR   22D0H   R   SEG=MAIN   5555#
DIV1 . . . . . . .  C ADDR   02DDH   A      7779# 7838
DIV2 . . . . . . .  C ADDR   0320H   A      7797 7801 7805 7809 7824#
DIV3 . . . . . . .  C ADDR   030DH   A      7798 7802 7806 7810#
DIV9 . . . . . . .  C ADDR   0336H   A      7768 7770 7844#
DIVIDE . . . . . .  C ADDR   2950H   R   SEG=MAIN   6035 6711#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   135

DONE . . . . . . .  C ADDR   28BFH   R   SEG=MAIN   6541 6552#
DONE1. . . . . . .  C ADDR   28BDH   R   SEG=MAIN   6544 6547 6550#
DOSH . . . . . . .  C ADDR   29D9H   R   SEG=MAIN   6786 6802#
DOSUB. . . . . . .  C ADDR   29C7H   R   SEG=MAIN   6770 6774 6778 6782 6783 6787#
DPH. . . . . . . .  D ADDR   0083H   A      19# 545 591 599 606 613 2843 3302 3304 3807 3809 3943 3948 4426 4658 4670
                                           4675 4684 4686 4689 4700 4787 4789 4827 4838 4843 4852 4854 4857 4868 4978
                                           4989 4994 5003 5005 5008 5019 5967 5975 6242 6250 6282 6558 6594 6629 6632
                                           6644 6667 7029 7031 8105 8125 8171
DPL. . . . . . . .  D ADDR   0082H   A      18# 594 602 609 616 2842 3299 3301 3803 3805 3940 3951 4427 4661 4668
                                           4678 4681 4683 4692 4696 4784 4786 4830 4836 4846 4849 4851 4860 4864 4981
                                           4987 4997 5000 5002 5011 5015 5968 5974 6239 6253 6286 6574 6610 6631 6645
                                           6648 6682 7026 7028 8106 8126 8172
DVIG0. . . . . . .  C ADDR   0A9BH   R   SEG=MAIN   1840# 1842
DVIG1. . . . . . .  C ADDR   0A90H   R   SEG=MAIN   1831# 1833
DVIG2. . . . . . .  C ADDR   0A85H   R   SEG=MAIN   1822# 1824
DVIG3. . . . . . .  C ADDR   0A79H   R   SEG=MAIN   1813# 1815
DVIG4. . . . . . .  C ADDR   0AA7H   R   SEG=MAIN   1851# 1853
DVIG6. . . . . . .  C ADDR   0AC9H   R   SEG=MAIN   1879# 1881
DVM. . . . . . . .  C ADDR   0AC7H   R   SEG=MAIN   1867 1878#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 482
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 525 691 2190 2829 5105 5117
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1CA3H   R   SEG=MAIN   2934 4493#
ENDSDV . . . . . .  C ADDR   0ACDH   R   SEG=MAIN   1873 1882#
ENDSUM . . . . . .  C ADDR   058DH   R   SEG=MAIN   895 948 1051 1076#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   08A6H   R   SEG=MAIN   1486 1502#
EQU00. . . . . . .  C ADDR   08C4H   R   SEG=MAIN   1504 1509 1518#
EQU1L. . . . . . .  C ADDR   106BH   R   SEG=MAIN   2718 2722#
EQU2L. . . . . . .  C ADDR   15ADH   R   SEG=MAIN   3515 3520#
ERRA0. . . . . . .  C ADDR   1BD2H   R   SEG=MAIN   4370 4382#
ERRA01 . . . . . .  C ADDR   07DFH   R   SEG=MAIN   1405# 1450
ERROR. . . . . . .  C ADDR   24ABH   R   SEG=MAIN   1412 4199 4385 5083 5097 5903#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7285#
EXP2 . . . . . . .  N NUMB   0001H   A      7287# 7464 7485
EXTCLE . . . . . .  C ADDR   01ACH   R   SEG=MAIN   542# 546
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   22B5H   R   SEG=MAIN   4521 5534#
FINDKOEF . . . . .  C ADDR   22A6H   R   SEG=MAIN   1328 5519#
FINDMEM. . . . . .  C ADDR   0FCFH   R   SEG=MAIN   2564 2628#
FINDR. . . . . . .  C ADDR   23FDH   R   SEG=MAIN   1572 4167 5748#
FINIS. . . . . . .  C ADDR   2A04H   R   SEG=MAIN   6730 6831#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      4712 4724 7490# 7579
FLCMP. . . . . . .  C ADDR   01D6H   A      1252 1347 1385 1433 1437 1449 1485 1508 1906 4369 4883 4899 5034 5049
                                           7584#
FLDIV. . . . . . .  C ADDR   02B7H   A      1275 1296 1334 1458 1477 1491 1984 2117 2155 4505 4590 4608 4739 4742
                                           4912 7754#
FLMUL. . . . . . .  C ADDR   0203H   A      1141 1241 1293 1339 1453 1514 1965 3791 4272 4509 4594 4612 7624#
FLOUT. . . . . . .  C ADDR   01E1H   A      7591 7594#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8093 8099 8150 8155
FLSUB. . . . . . .  C ADDR   01D1H   A      1233 1901 2011 2113 2151 3788 7577#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   136

FND. . . . . . . .  C ADDR   01F8H   A      7600 7603 7606 7609 7612#
FO1M . . . . . . .  C ADDR   26BCH   R   SEG=MAIN   6041 6045#
FO2M . . . . . . .  C ADDR   26C5H   R   SEG=MAIN   6048 6050#
FORM4. . . . . . .  C ADDR   26C6H   R   SEG=MAIN   6043 6049 6053#
FT1IZM . . . . . .  C ADDR   0E78H   R   SEG=MAIN   2436#
FTOL . . . . . . .  C ADDR   0343H   A      1186 1341 1461 3792 4510 4613 4743 4913 5830 7860#
FTOL1. . . . . . .  C ADDR   037CH   A      7873 7877 7901#
FTOL2. . . . . . .  C ADDR   039EH   A      7897 7934#
FTOL22 . . . . . .  C ADDR   03C4H   A      7937 7971#
FTOL23 . . . . . .  C ADDR   03A2H   A      7938# 7970
FTOL24 . . . . . .  C ADDR   03B5H   A      7940 7956#
FTOL25 . . . . . .  C ADDR   03C2H   A      7955 7970#
FTOL26 . . . . . .  C ADDR   03E4H   A      7986 8002#
FTOL3. . . . . . .  C ADDR   038AH   A      7900 7914#
FTOL33 . . . . . .  C ADDR   038EH   A      7918# 7932
FTOL4. . . . . . .  C ADDR   0371H   A      7879 7894#
FTOL9. . . . . . .  C ADDR   0381H   A      7907# 7917 7933 8001 8016
FULKALIB . . . . .  C ADDR   1D12H   R   SEG=MAIN   4548 4563# 4651
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   490# 491
GO23NO . . . . . .  C ADDR   150CH   R   SEG=MAIN   3314 3412#
GO31L. . . . . . .  C ADDR   1071H   R   SEG=MAIN   2696 2727#
GO41L. . . . . . .  C ADDR   1076H   R   SEG=MAIN   2727 2729#
GOA2 . . . . . . .  C ADDR   0781H   R   SEG=MAIN   1351 1353 1356# 1378
GOA3A2 . . . . . .  C ADDR   078BH   R   SEG=MAIN   1361#
GOCIKLE. . . . . .  C ADDR   0B9FH   R   SEG=MAIN   1913 1968 1998# 2005 2012
GOFULL . . . . . .  C ADDR   153FH   R   SEG=MAIN   3418 3440#
GOGO7. . . . . . .  C ADDR   1BF0H   R   SEG=MAIN   4343 4348 4395#
GOKAA2 . . . . . .  C ADDR   07A9H   R   SEG=MAIN   1376#
GOKLB. . . . . . .  C ADDR   0D53H   R   SEG=MAIN   2227 2249#
GOOFF1 . . . . . .  C ADDR   1493H   R   SEG=MAIN   3328# 3337
GOOFF2 . . . . . .  C ADDR   14B1H   R   SEG=MAIN   3350# 3359
GOOFF3 . . . . . .  C ADDR   14CFH   R   SEG=MAIN   3369# 3378
GOOFF4 . . . . . .  C ADDR   14EDH   R   SEG=MAIN   3391# 3400
GOONIN . . . . . .  C ADDR   079BH   R   SEG=MAIN   1369# 1403 1415 1594 1610
GOONIND. . . . . .  C ADDR   0997H   R   SEG=MAIN   1372 1660#
GOONOFF. . . . . .  C ADDR   144CH   R   SEG=MAIN   3282# 3291
GOONT. . . . . . .  C ADDR   0B40H   R   SEG=MAIN   1916 1949#
GOPAROL. . . . . .  C ADDR   1A63H   R   SEG=MAIN   4033 4153 4161#
GOPAROM. . . . . .  C ADDR   1979H   R   SEG=MAIN   4031# 4034
GOPART . . . . . .  C ADDR   031EH   R   SEG=MAIN   783 786#
GOSK19 . . . . . .  C ADDR   0FA0H   R   SEG=MAIN   2595 2602#
GOTO7. . . . . . .  C ADDR   116BH   R   SEG=MAIN   2895# 2966 2973 3011 3060 3089 3101 3143 3147 3192 3208 3217 3223
                                           3228 3234 3249 3311 3465 3468 3482 3519 3522 3578 3591 3597 3623 3625 3666
                                           3689 3707 3762 3961 3969 3977 4196 4206 4238 4289 4291 4307 4319 4380 4560
                                           4571
GOTOKD . . . . . .  C ADDR   0620H   R   SEG=MAIN   1144 1168#
GOTOSTROB. . . . .  C ADDR   0B32H   R   SEG=MAIN   1927 1930 1933 1936 1939#
GOUT6. . . . . . .  C ADDR   0D08H   R   SEG=MAIN   2217# 2245
GOVVLIST . . . . .  C ADDR   1779H   R   SEG=MAIN   3745 3767#
GOZNAK . . . . . .  C ADDR   02D0H   R   SEG=MAIN   680 726#
HNOR11 . . . . . .  C ADDR   12ABH   R   SEG=MAIN   3022 3064#
HNOR12 . . . . . .  C ADDR   1253H   R   SEG=MAIN   3012 3016#
HNOT1. . . . . . .  C ADDR   12F4H   R   SEG=MAIN   2988 3110#
HNOT2. . . . . . .  C ADDR   1221H   R   SEG=MAIN   2985#
HR12 . . . . . . .  C ADDR   1249H   R   SEG=MAIN   3007 3012#
HVI1113. . . . . .  C ADDR   1243H   R   SEG=MAIN   3010# 3015 3020
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 527 5063 8092 8100 8149 8159
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   121DH   R   SEG=MAIN   2980 2982#
IND. . . . . . . .  C ADDR   206DH   R   SEG=MAIN   629 637 682 710 1413 1496 1500 1801 2258 2262 2273 3153 3169 3665
                                           3881 3933 4200 4386 4568 5079 5085 5099 5105# 6264
INDA3. . . . . . .  C ADDR   095EH   R   SEG=MAIN   1625#
INDOLL . . . . . .  C ADDR   0935H   R   SEG=MAIN   1586 1587 1591#
INIACP . . . . . .  C ADDR   231AH   R   SEG=MAIN   646 3129 5612#
INNOT1_2 . . . . .  C ADDR   1630H   R   SEG=MAIN   3587 3593#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   137

INNOT3 . . . . . .  C ADDR   1621H   R   SEG=MAIN   3579 3584#
INNOT6 . . . . . .  C ADDR   1615H   R   SEG=MAIN   3574 3579#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 620 1949 3542 3642
INTMUL . . . . . .  C ADDR   0B58H   R   SEG=MAIN   1965# 1973 1978 1987 1992 1995
INTMUL1. . . . . .  C ADDR   0B5BH   R   SEG=MAIN   1966#
INTN . . . . . . .  C ADDR   16C2H   R   SEG=MAIN   3680#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   12DCH   R   SEG=MAIN   3091#
IZMAN. . . . . . .  C ADDR   0DEFH   R   SEG=MAIN   2188 2340#
IZMFUN . . . . . .  C ADDR   0DFEH   R   SEG=MAIN   2274 2285 2292 2344 2347#
IZMPAT . . . . . .  C ADDR   0E02H   R   SEG=MAIN   2243 2259 2263 2316 2351#
IZMT2. . . . . . .  C ADDR   0E11H   R   SEG=MAIN   2367 2372#
IZMT3. . . . . . .  C ADDR   0E1CH   R   SEG=MAIN   2372 2378#
JFINIS . . . . . .  C ADDR   296BH   R   SEG=MAIN   6722 6730#
KD . . . . . . . .  C ADDR   2235H   R   SEG=MAIN   5425#
KEYB1. . . . . . .  C ADDR   0CDBH   R   SEG=MAIN   283 2189#
KEYB2. . . . . . .  C ADDR   10FFH   R   SEG=MAIN   286 2828#
KFULL. . . . . . .  C ADDR   1516H   R   SEG=MAIN   3250 3417#
KFULLR . . . . . .  C ADDR   1413H   R   SEG=MAIN   3245 3250#
KGO23. . . . . . .  C ADDR   1480H   R   SEG=MAIN   3244 3317#
KLEV1. . . . . . .  C ADDR   13EDH   R   SEG=MAIN   3200 3235#
KLEV2. . . . . . .  C ADDR   13F2H   R   SEG=MAIN   3235 3237#
KLEV21 . . . . . .  C ADDR   1416H   R   SEG=MAIN   3242 3251#
KLEV22 . . . . . .  C ADDR   13FCH   R   SEG=MAIN   3230 3239 3242#
KLEV23 . . . . . .  C ADDR   1427H   R   SEG=MAIN   3251 3259#
KLEV3. . . . . . .  C ADDR   13F7H   R   SEG=MAIN   3237 3239#
KLMAS. . . . . . .  C ADDR   03CBH   R   SEG=MAIN   815 882#
KNAVP. . . . . . .  C ADDR   11B9H   R   SEG=MAIN   2875 2936#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1351 1587 1769 2318 2340 2341 2345
KNIZMON. . . . . .  C ADDR   0DF9H   R   SEG=MAIN   2340 2345#
KNKMP. . . . . . .  C ADDR   10F0H   R   SEG=MAIN   2823# 2869
KNLEFT . . . . . .  C ADDR   11C9H   R   SEG=MAIN   2827 2943#
KNMEM. . . . . . .  C ADDR   1351H   R   SEG=MAIN   2822 3163#
KNMENU . . . . . .  C ADDR   118DH   R   SEG=MAIN   2881 2915#
KNNUL. . . . . . .  C ADDR   11E7H   R   SEG=MAIN   2826 2960#
KNOPT. . . . . . .  C ADDR   0E24H   R   SEG=MAIN   2187 2386#
KNRAZR . . . . . .  C ADDR   0E39H   R   SEG=MAIN   2186 2399#
KNRIGHT. . . . . .  C ADDR   0D86H   R   SEG=MAIN   2233 2278#
KNVICH . . . . . .  C ADDR   0DA5H   R   SEG=MAIN   2242 2295#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 585 4512 4522 4614 4622
KOEFKM . . . . . .  D ADDR   0094H   A      378# 583 1139 1239 2159
KOEFKP . . . . . .  D ADDR   0090H   A      377# 581 1136 1234 2121
KOMUL. . . . . . .  C ADDR   0749H   R   SEG=MAIN   1327 1331#
KOMULPZ. . . . . .  C ADDR   0743H   R   SEG=MAIN   1324 1328#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1445 4365 5828
KON_B. . . . . . .  C ADDR   0F03H   R   SEG=MAIN   2492 2511#
KOR0US . . . . . .  C ADDR   2166H   R   SEG=MAIN   2037 5294#
KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1231 2049 2111 2149
KORDEC1. . . . . .  C ADDR   0671H   R   SEG=MAIN   1214 1221#
KORDEC10 . . . . .  C ADDR   0651H   R   SEG=MAIN   1202#
KORNUL . . . . . .  C ADDR   0BD4H   R   SEG=MAIN   1151 2029#
KVVOD0 . . . . . .  C ADDR   1532H   R   SEG=MAIN   3210 3426 3435#
LABEL43. . . . . .  C ADDR   1770H   R   SEG=MAIN   3763# 3771
LABEL7 . . . . . .  C ADDR   1859H   R   SEG=MAIN   3763 3886# 3898
LABELA . . . . . .  C ADDR   0297H   R   SEG=MAIN   685# 714 2002
LABELB . . . . . .  C ADDR   0A72H   R   SEG=MAIN   1194 1613 1806# 2017 2021 2023
LABELC . . . . . .  C ADDR   0E39H   R   SEG=MAIN   2400#
LABELE . . . . . .  C ADDR   0E02H   R   SEG=MAIN   2349 2365# 2405 2408 2412 2416 2424
LABELF . . . . . .  C ADDR   0E64H   R   SEG=MAIN   2185 2425#
LABELH . . . . . .  C ADDR   1209H   R   SEG=MAIN   2825 2975#
LABELI . . . . . .  C ADDR   1B4CH   R   SEG=MAIN   2991 3049 3103 4302#
LABELI2. . . . . .  C ADDR   1290H   R   SEG=MAIN   3049# 3050
LABELK . . . . . .  C ADDR   1391H   R   SEG=MAIN   2990 3193#
LABELL . . . . . .  C ADDR   102CH   R   SEG=MAIN   2562 2657 2665#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   138

LABELL1. . . . . .  C ADDR   0F40H   R   SEG=MAIN   2549# 2621 2734 2783
LABELN . . . . . .  C ADDR   1090H   R   SEG=MAIN   2622 2743#
LABELP . . . . . .  C ADDR   1746H   R   SEG=MAIN   3693 3714 3745# 3979
LABELS . . . . . .  C ADDR   170BH   R   SEG=MAIN   3422 3714#
LABELS1. . . . . .  C ADDR   19DAH   R   SEG=MAIN   4049 4079#
LABELS13 . . . . .  C ADDR   1AD5H   R   SEG=MAIN   4120 4218#
LABELS3. . . . . .  C ADDR   1B5FH   R   SEG=MAIN   4312#
LABELS4. . . . . .  C ADDR   1B3AH   R   SEG=MAIN   4119 4293#
LABL2. . . . . . .  C ADDR   1052H   R   SEG=MAIN   2699# 3254
LABM . . . . . . .  C ADDR   15B6H   R   SEG=MAIN   3255 3525#
LADD . . . . . . .  C ADDR   2AACH   R   SEG=MAIN   794 829 847 863 1889 6957#
LADDX. . . . . . .  C ADDR   2ABDH   R   SEG=MAIN   6981#
LBTOF. . . . . . .  C ADDR   042DH   A      8071#
LCMP . . . . . . .  C ADDR   28AAH   R   SEG=MAIN   5211 6072 6537#
LDC_LONG . . . . .  C ADDR   28C0H   R   SEG=MAIN   580 1326 1887 2116 2154 2970 6557#
LDC_LTEMP. . . . .  C ADDR   28E2H   R   SEG=MAIN   803 1090 1095 1100 1104 1251 1295 1333 1346 1384 1432 1436 1448
                                           1452 1476 1484 1490 1507 1513 1628 1900 1905 1964 1972 1977 1983 1986 1991
                                           1994 2010 3787 3790 3816 4271 4368 4508 4593 4611 4741 4911 5225 6235
                                           6593#
LDX_LONG . . . . .  C ADDR   2908H   R   SEG=MAIN   6628#
LDX_LTEMP. . . . .  C ADDR   292EH   R   SEG=MAIN   6666#
LEFCUR . . . . . .  C ADDR   1641H   R   SEG=MAIN   3603# 3675 3691
LEFKL. . . . . . .  C ADDR   11D3H   R   SEG=MAIN   2943 2949#
LEFMEM11 . . . . .  C ADDR   139FH   R   SEG=MAIN   3201# 3236 3238 3240
LEFT21 . . . . . .  C ADDR   1560H   R   SEG=MAIN   3461 3466#
LEFT_S . . . . . .  C ADDR   19D7H   R   SEG=MAIN   4078# 4081
LEFT_SK. . . . . .  C ADDR   1ABCH   R   SEG=MAIN   4078 4208#
LEV220 . . . . . .  C ADDR   13FFH   R   SEG=MAIN   3243# 3252
LEV2GO . . . . . .  C ADDR   10B6H   R   SEG=MAIN   2742 2779#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2265 2629 2667 3170 3180 3199 3437 5778
LI21 . . . . . . .  C ADDR   12E6H   R   SEG=MAIN   3098 3100#
LI42_43. . . . . .  C ADDR   17DFH   R   SEG=MAIN   3813# 3953
LIST_43. . . . . .  C ADDR   1863H   R   SEG=MAIN   3765 3891#
LLDI2. . . . . . .  C ADDR   0DE8H   R   SEG=MAIN   2331 2335#
LLDI23 . . . . . .  C ADDR   0DDCH   R   SEG=MAIN   2323 2328#
LLDI3. . . . . . .  C ADDR   0DE3H   R   SEG=MAIN   2330 2332#
LLEV2. . . . . . .  C ADDR   107BH   R   SEG=MAIN   2698 2732#
LLMUL. . . . . . .  C ADDR   2A15H   R   SEG=MAIN   6851#
LLSUB. . . . . . .  C ADDR   2A9AH   R   SEG=MAIN   6933#
LLTOF. . . . . . .  C ADDR   0432H   A      8077#
LMUL . . . . . . .  C ADDR   2A15H   R   SEG=MAIN   6030 6236 6853#
LOA3_X . . . . . .  C ADDR   27F5H   R   SEG=MAIN   1919 6300#
LOAB12 . . . . . .  C ADDR   2369H   R   SEG=MAIN   3127 5653#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2389 2430 2978 3123 5317
LOADB. . . . . . .  C ADDR   1307H   R   SEG=MAIN   3118 3121# 3154 3160
LOADB2 . . . . . .  C ADDR   1333H   R   SEG=MAIN   3141 3145#
LOADCLE. . . . . .  C ADDR   13BDH   R   SEG=MAIN   3215# 3429
LOADKD . . . . . .  C ADDR   2386H   R   SEG=MAIN   5686#
LOADR2 . . . . . .  C ADDR   2378H   R   SEG=MAIN   3687 3782 4268 4363 4409 5669#
LOADT. . . . . . .  C ADDR   2181H   R   SEG=MAIN   2391 2436 2984 5317#
LOADUS . . . . . .  C ADDR   2120H   R   SEG=MAIN   647 1395 1601 2291 2346 2929 2957 3130 4650 5238#
LOAHL_R2 . . . . .  C ADDR   1E88H   R   SEG=MAIN   4707 4719 4770# 4879 4895 5030 5045
LOBLOK . . . . . .  C ADDR   156BH   R   SEG=MAIN   3415 3473# 3492
LOCLE. . . . . . .  C ADDR   13B8H   R   SEG=MAIN   3204 3213#
LOD1 . . . . . . .  C ADDR   2190H   R   SEG=MAIN   5325# 5330
LODT . . . . . . .  C ADDR   219FH   R   SEG=MAIN   5338# 5343
LOIZMK . . . . . .  C ADDR   1256H   R   SEG=MAIN   3017# 3054
LOKAME1. . . . . .  C ADDR   192CH   R   SEG=MAIN   3993#
LOLEVT . . . . . .  C ADDR   2183H   R   SEG=MAIN   2271 5318#
LOLIST . . . . . .  C ADDR   13ACH   R   SEG=MAIN   3206#
LOME1. . . . . . .  C ADDR   1C57H   R   SEG=MAIN   4460# 4464 4467 4470 4473 4477 4480 4483 4486 4490
LOMENU . . . . . .  C ADDR   1C4FH   R   SEG=MAIN   2577 2590 3993 4036 4059 4457#
LOOP . . . . . . .  C ADDR   20DCH   R   SEG=MAIN   5174# 5175
LOOPS. . . . . . .  C ADDR   296EH   R   SEG=MAIN   6732# 6765
LOSPUS . . . . . .  C ADDR   215AH   R   SEG=MAIN   2038 5277#
LOSTAT . . . . . .  C ADDR   13D4H   R   SEG=MAIN   3219 3225#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   139

LOTEXT . . . . . .  C ADDR   219BH   R   SEG=MAIN   1495 1499 1592 2309 2467 2475 2483 2597 2603 2637 2646 2654 2663
                                           2671 2920 3010 3080 3165 3207 3216 3222 3227 3233 3248 3441 3474 3486 3541
                                           3663 3731 3755 3922 3958 3966 3974 3988 4010 4016 4055 4164 4210 4214 4376
                                           4460 4567 5335# 5904
LOTP . . . . . . .  C ADDR   23DCH   R   SEG=MAIN   5727# 5737 5740
LOTPUS . . . . . .  C ADDR   23D4H   R   SEG=MAIN   4067 5272 5724#
LOU. . . . . . . .  C ADDR   0DEEH   R   SEG=MAIN   2318 2334 2338#
LOUIZM . . . . . .  C ADDR   0DCBH   R   SEG=MAIN   2318# 2343 5269
LOUTF. . . . . . .  C ADDR   106EH   R   SEG=MAIN   2724# 2733 2740
LOVICH . . . . . .  C ADDR   124CH   R   SEG=MAIN   3013# 3047 3068 4422
LOWR . . . . . . .  C ADDR   13C6H   R   SEG=MAIN   3213 3219#
LOWR1. . . . . . .  C ADDR   13CBH   R   SEG=MAIN   3221# 3433
LSUB . . . . . . .  C ADDR   2A9AH   R   SEG=MAIN   1191 1364 5226 6934#
LTEMP. . . . . . .  N NUMB   0008H   A      1107 1109 1110 1111 5559 5560 5561 5562 6082 6085 6088 6091 6134 6135
                                           6136 6137 6349# 6723 6724 6725 6726 6735 6739 6743 6747 6750 6751 6752
                                           6753 6754 6755 6756 6757 6758 6759 6760 6761 6764 6767 6772 6776 6780 6790
                                           6793 6796 6799 6815 6818 6819 6821 6822 6824 6825 6827 6832 6833 6834 6835
                                           6855 6860 6868 6876 6881 6892 6900 6906 6914 6920 7288 7289 7328 7333 7335
                                           7344 7345 7346 7347 7578 7586 7599 7602 7605 7608 8188 8191 8194 8197
LWR. . . . . . . .  C ADDR   2697H   R   SEG=MAIN   6021# 6025
LWRX . . . . . . .  C ADDR   265BH   R   SEG=MAIN   5966# 5978
LWTOF. . . . . . .  C ADDR   042FH   A      8073#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   26B2H   R   SEG=MAIN   1682 3819 4744 4915 6029 6034 6039# 6071
MAIN . . . . . . .  C SEG    2AF7H       REL=UNIT   237 294# 454
MANT1. . . . . . .  N NUMB   0002H   A      7286# 7313 7362 7363
MANT2. . . . . . .  N NUMB   0008H   A      7288# 7339 7340 7471 7473 7474 7476 7477 7479 7480 7482 7521 7522 7524
                                           7525 7527 7528 7530 7531 7535 7537 7540 7543 7641 7643 7644 7646 7647 7649
                                           7650 7652 7703 7705 7706 7708 7709 7711 7712 7714 7796 7800 7804 7808 7812
                                           7815 7818 7821
MARK0_8. . . . . .  C ADDR   0F0AH   R   SEG=MAIN   2494 2512 2514#
MARKER . . . . . .  D ADDR   00B2H   A      393# 558 2209 2454 2493 2503 2511 2521 2527 2706 2714 2750 2757 2769 2849
                                           3058 3075 3096 3189 3308 3408 3449 3457 3478 3504 3511 3569 3609 3616 3656
                                           3699 3757 3773 3896 4037 4191 4204 4225 4232 4279 4312 4331 4338 4372 4382
                                           4393 4418 5755 5781 5807 5818 5876
MARLE. . . . . . .  C ADDR   2450H   R   SEG=MAIN   3624 5804#
MARRI. . . . . . .  C ADDR   245DH   R   SEG=MAIN   2777 5817#
MAS10. . . . . . .  C ADDR   03EAH   R   SEG=MAIN   884 897#
MAS20. . . . . . .  C ADDR   046AH   R   SEG=MAIN   897 952#
MAS4 . . . . . . .  C ADDR   055EH   R   SEG=MAIN   950 1053#
MAS5DIV. . . . . .  C ADDR   05D2H   R   SEG=MAIN   1091 1096 1101 1105 1113#
MASFULL. . . . . .  C ADDR   0599H   R   SEG=MAIN   1080 1084#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 885 890 919 927 1001 1009 1058 1065 6008
MASS1. . . . . . .  X ADDR   0104H   A      419# 893 916 930 998 1012 1056 1068
MASS10 . . . . . .  X ADDR   0128H   A      428# 974 1031
MASS11 . . . . . .  X ADDR   012CH   A      429# 971 1033
MASS12 . . . . . .  X ADDR   0130H   A      430# 968 1035
MASS13 . . . . . .  X ADDR   0134H   A      431# 965 1037
MASS14 . . . . . .  X ADDR   0138H   A      432# 962 1039
MASS15 . . . . . .  X ADDR   013CH   A      433# 959 1041
MASS16 . . . . . .  X ADDR   0140H   A      434# 957 1043
MASS17 . . . . . .  X ADDR   0144H   A      435# 955 1045
MASS18 . . . . . .  X ADDR   0148H   A      436# 953 1047
MASS19 . . . . . .  X ADDR   014CH   A      437# 1049
MASS2. . . . . . .  X ADDR   0108H   A      420# 913 932 995 1014 1054 1070
MASS3. . . . . . .  X ADDR   010CH   A      421# 910 934 992 1016 1072
MASS4. . . . . . .  X ADDR   0110H   A      422# 907 936 989 1018
MASS5. . . . . . .  X ADDR   0114H   A      423# 904 938 986 1020
MASS6. . . . . . .  X ADDR   0118H   A      424# 902 940 984 1022
MASS7. . . . . . .  X ADDR   011CH   A      425# 900 942 982 1024
MASS8. . . . . . .  X ADDR   0120H   A      426# 898 944 980 1026
MASS9. . . . . . .  X ADDR   0124H   A      427# 946 977 1028
MASX5. . . . . . .  C ADDR   05C8H   R   SEG=MAIN   1082 1107#
MAXG . . . . . . .  C ADDR   1FAFH   R   SEG=MAIN   4986# 5040
MAXVIX . . . . . .  C ADDR   2019H   R   SEG=MAIN   5050 5055#
ME11_15DE. . . . .  C ADDR   1702H   R   SEG=MAIN   3709# 3728
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   140

ME11_15DEC . . . .  C ADDR   192BH   R   SEG=MAIN   3709 3992#
ME21_22. . . . . .  C ADDR   1036H   R   SEG=MAIN   2671# 2680
ME21_23. . . . . .  C ADDR   1995H   R   SEG=MAIN   3742 4045#
ME21_23DEC . . . .  C ADDR   19B1H   R   SEG=MAIN   4052 4057#
MEAVP. . . . . . .  C ADDR   11C4H   R   SEG=MAIN   2937 2940#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   531# 533
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   535# 538
MEM10MS. . . . . .  C ADDR   0292H   R   SEG=MAIN   682#
MEM12NO. . . . . .  C ADDR   152DH   R   SEG=MAIN   3427 3431#
MENG . . . . . . .  C ADDR   1DD4H   R   SEG=MAIN   4667# 4717
MENU12 . . . . . .  C ADDR   1C5BH   R   SEG=MAIN   4458 4462#
MENU13 . . . . . .  C ADDR   1C63H   R   SEG=MAIN   4462 4465#
MENU14 . . . . . .  C ADDR   1C6BH   R   SEG=MAIN   4465 4468#
MENU15 . . . . . .  C ADDR   1C73H   R   SEG=MAIN   4468 4471#
MENU21 . . . . . .  C ADDR   1C7BH   R   SEG=MAIN   4471 4475#
MENU22 . . . . . .  C ADDR   1C83H   R   SEG=MAIN   4475 4478#
MENU23 . . . . . .  C ADDR   1C8BH   R   SEG=MAIN   4478 4481#
MENU31 . . . . . .  C ADDR   1C93H   R   SEG=MAIN   4481 4484#
MENU41 . . . . . .  C ADDR   1C9BH   R   SEG=MAIN   4484 4488#
MENUOFF. . . . . .  C ADDR   11A7H   R   SEG=MAIN   2916 2925#
MENUON . . . . . .  C ADDR   1738H   R   SEG=MAIN   3733#
MERR . . . . . . .  C ADDR   118AH   R   SEG=MAIN   2912# 2915
ME_14. . . . . . .  C ADDR   13DFH   R   SEG=MAIN   3230#
ME_41. . . . . . .  C ADDR   1A26H   R   SEG=MAIN   4079 4122#
MIDL . . . . . . .  C ADDR   29A1H   R   SEG=MAIN   6727 6762#
MIGN . . . . . . .  C ADDR   248DH   R   SEG=MAIN   5106 5876#
MIGNN. . . . . . .  C ADDR   2495H   R   SEG=MAIN   5878 5883#
MIN4_HL. . . . . .  C ADDR   1E94H   R   SEG=MAIN   4783# 4797 4823 4948 4974
MING . . . . . . .  C ADDR   1ED6H   R   SEG=MAIN   4835# 4889
MINIVIX. . . . . .  C ADDR   1F40H   R   SEG=MAIN   4900 4905# 5055
MLABL2 . . . . . .  C ADDR   1596H   R   SEG=MAIN   3442 3496# 3527 3766
MLABL2R. . . . . .  C ADDR   1776H   R   SEG=MAIN   3766# 3769
MMM. . . . . . . .  C ADDR   028DH   R   SEG=MAIN   678#
MO220. . . . . . .  C ADDR   092AH   R   SEG=MAIN   1206 1374 1586#
MO500I . . . . . .  C ADDR   089AH   R   SEG=MAIN   1438 1498#
MO500R . . . . . .  C ADDR   088EH   R   SEG=MAIN   1434 1494#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0FC9H   R   SEG=MAIN   2623# 2634 2643 2651 2660
MOUTKMEM . . . . .  C ADDR   1705H   R   SEG=MAIN   3710# 3718
MOVE28 . . . . . .  C ADDR   271FH   R   SEG=MAIN   1270 1288 1335 1440 2114 2152 4502 4585 4603 4709 4721 4736 4878
                                           4894 5029 5044 6134#
MOVE82 . . . . . .  C ADDR   22D8H   R   SEG=MAIN   5559#
MOVEA3 . . . . . .  C ADDR   0997H   R   SEG=MAIN   1638 1663#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2495 2722 2762 3077 3414 3458 3466 3520 3572 3617 3760 4040 4193
                                           4235 4313 4341 5811
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2491 2715 2719 2758 3078 3413 3462 3512 3516 3571 3621 3759 4039
                                           4194 4317 5820
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7638# 7681
MUP11. . . . . . .  C ADDR   0257H   A      7685# 7730
MUP2 . . . . . . .  C ADDR   0297H   A      7715 7729#
MUP3 . . . . . . .  C ADDR   026CH   A      7684 7700#
MVV11. . . . . . .  C ADDR   1566H   R   SEG=MAIN   3438 3471#
MVV12. . . . . . .  C ADDR   157EH   R   SEG=MAIN   3471 3483#
N12DELCH . . . . .  C ADDR   0CC8H   R   SEG=MAIN   2170 2178#
N4DELCH. . . . . .  C ADDR   0C74H   R   SEG=MAIN   2094 2132#
N8DELCH. . . . . .  C ADDR   0CB6H   R   SEG=MAIN   2132 2170#
NBIMENU. . . . . .  C ADDR   0FCFH   R   SEG=MAIN   2627#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 618 1924 3271 3475 3539 3753 3844 6226 6247 6278
NE05 . . . . . . .  C ADDR   0358H   A      7867 7869 7871 7874#
NELEM. . . . . . .  D ADDR   0037H   A      312# 619 3784 3901 3905
NEXIN. . . . . . .  C ADDR   2077H   R   SEG=MAIN   5109# 5116
NEXTMAX. . . . . .  C ADDR   1FE4H   R   SEG=MAIN   5018 5026#
NEXTMEA. . . . . .  C ADDR   1E09H   R   SEG=MAIN   4699 4707#
NEXTMIN. . . . . .  C ADDR   1F0BH   R   SEG=MAIN   4867 4875#
NMEM_MENU. . . . .  C ADDR   1708H   R   SEG=MAIN   3712# 3716
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   141

NMINUS . . . . . .  C ADDR   068EH   R   SEG=MAIN   1236 1240#
NMINUS3. . . . . .  C ADDR   05F2H   R   SEG=MAIN   1138 1140#
NNDELCH. . . . . .  C ADDR   0C34H   R   SEG=MAIN   2079 2094#
NNMEMB . . . . . .  C ADDR   10C2H   R   SEG=MAIN   2625 2785#
NNNUL. . . . . . .  C ADDR   0A0EH   R   SEG=MAIN   1744 1747#
NO . . . . . . . .  C ADDR   2989H   R   SEG=MAIN   6737 6741 6745 6749#
NO0KEY . . . . . .  C ADDR   02A4H   R   SEG=MAIN   688 690 694#
NO10MSV. . . . . .  C ADDR   16A9H   R   SEG=MAIN   3661 3667#
NO11V6 . . . . . .  C ADDR   0EBCH   R   SEG=MAIN   2462 2470#
NO12V6 . . . . . .  C ADDR   0ECFH   R   SEG=MAIN   2470 2478#
NO13V6 . . . . . .  C ADDR   0EE2H   R   SEG=MAIN   2478 2488#
NO21P7 . . . . . .  C ADDR   1BF7H   R   SEG=MAIN   4351 4400#
NO23RI . . . . . .  C ADDR   0F86H   R   SEG=MAIN   2588 2592#
NO2MSV . . . . . .  C ADDR   16A6H   R   SEG=MAIN   3666# 3667 3677
NO2PARN. . . . . .  C ADDR   0983H   R   SEG=MAIN   1640 1646#
NO31N. . . . . . .  C ADDR   1660H   R   SEG=MAIN   3630#
NO31RI . . . . . .  C ADDR   0FB1H   R   SEG=MAIN   2594 2613#
NO3PARN. . . . . .  C ADDR   0979H   R   SEG=MAIN   1640# 1725
NO4DEL . . . . . .  C ADDR   0C07H   R   SEG=MAIN   2042 2060#
NOAVK. . . . . . .  C ADDR   0660H   R   SEG=MAIN   1162 1211#
NOAVP. . . . . . .  C ADDR   0781H   R   SEG=MAIN   1355# 1386 1389
NOBAVP . . . . . .  C ADDR   0A2AH   R   SEG=MAIN   1497 1501 1581 1763 1767#
NOBEF99. . . . . .  C ADDR   035BH   R   SEG=MAIN   800 816# 835 853 869
NOBIT. . . . . . .  C ADDR   0245H   A      7653 7667#
NOBITIZM . . . . .  C ADDR   0A33H   R   SEG=MAIN   1769 1772#
NOBL21 . . . . . .  C ADDR   103FH   R   SEG=MAIN   2668 2676#
NOBL22 . . . . . .  C ADDR   1049H   R   SEG=MAIN   2676 2696#
NOBUF. . . . . . .  C ADDR   0A68H   R   SEG=MAIN   1799 1801#
NOBUF0 . . . . . .  C ADDR   0BAFH   R   SEG=MAIN   1914 2007#
NOCHI0 . . . . . .  C ADDR   095AH   R   SEG=MAIN   1375 1612#
NOCHIND. . . . . .  C ADDR   02C3H   R   SEG=MAIN   708 716#
NOCHN10. . . . . .  C ADDR   05B5H   R   SEG=MAIN   1093 1098#
NOCHN2 . . . . . .  C ADDR   05AAH   R   SEG=MAIN   1088 1093#
NOCHN20. . . . . .  C ADDR   05C0H   R   SEG=MAIN   1098 1103#
NODI2. . . . . . .  C ADDR   0940H   R   SEG=MAIN   1589 1596#
NODI6. . . . . . .  C ADDR   11D5H   R   SEG=MAIN   2947 2951#
NODI8. . . . . . .  C ADDR   09E5H   R   SEG=MAIN   1709 1715#
NODI8K . . . . . .  C ADDR   1A90H   R   SEG=MAIN   4179 4184#
NODI8_43 . . . . .  C ADDR   183CH   R   SEG=MAIN   3858 3864#
NODI9. . . . . . .  C ADDR   0945H   R   SEG=MAIN   1598 1601#
NODI9_43 . . . . .  C ADDR   1847H   R   SEG=MAIN   3864 3872#
NODIS9 . . . . . .  C ADDR   09F4H   R   SEG=MAIN   1715 1727#
NODISK9. . . . . .  C ADDR   1A98H   R   SEG=MAIN   4183 4184 4191#
NOENDLI. . . . . .  C ADDR   27C1H   R   SEG=MAIN   6261 6265#
NOEQU1 . . . . . .  C ADDR   10A7H   R   SEG=MAIN   2761 2765#
NOEQU2 . . . . . .  C ADDR   165AH   R   SEG=MAIN   3620 3624#
NOFIZM . . . . . .  C ADDR   0E9EH   R   SEG=MAIN   2426 2458#
NOFT1. . . . . . .  C ADDR   0E77H   R   SEG=MAIN   2431 2435#
NOFZ . . . . . . .  C ADDR   0BAAH   R   SEG=MAIN   1998 2002#
NOH37. . . . . . .  C ADDR   126BH   R   SEG=MAIN   3006 3030# 3041
NOHNOT1. . . . . .  C ADDR   1346H   R   SEG=MAIN   3112 3155#
NOHNOT2. . . . . .  C ADDR   133BH   R   SEG=MAIN   3148# 3155
NOKLB. . . . . . .  C ADDR   0A62H   R   SEG=MAIN   1797 1799#
NOKORR . . . . . .  C ADDR   0608H   R   SEG=MAIN   1149 1152#
NOLAH. . . . . . .  C ADDR   122DH   R   SEG=MAIN   2975 2993#
NOLI_43. . . . . .  C ADDR   18B7H   R   SEG=MAIN   3891 3936#
NOM31. . . . . . .  C ADDR   1638H   R   SEG=MAIN   3524 3599#
NOM32. . . . . . .  C ADDR   16B1H   R   SEG=MAIN   3599 3673#
NOM33. . . . . . .  C ADDR   16DFH   R   SEG=MAIN   3673 3693#
NOMARL . . . . . .  C ADDR   1B74H   R   SEG=MAIN   4315 4321 4325#
NOMAXI . . . . . .  C ADDR   1FFCH   R   SEG=MAIN   5035 5038#
NOME11 . . . . . .  C ADDR   151DH   R   SEG=MAIN   3424#
NOMEM11. . . . . .  C ADDR   0FEAH   R   SEG=MAIN   2630 2640#
NOMEM12. . . . . .  C ADDR   1000H   R   SEG=MAIN   2640 2648#
NOMEM13. . . . . .  C ADDR   1016H   R   SEG=MAIN   2648 2657#
NOMEMK . . . . . .  C ADDR   151AH   R   SEG=MAIN   3178 3421#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   142

NOMINI . . . . . .  C ADDR   1F23H   R   SEG=MAIN   4884 4887#
NON1C. . . . . . .  C ADDR   0E4AH   R   SEG=MAIN   2406 2410#
NONULAVT . . . . .  C ADDR   0645H   R   SEG=MAIN   1157 1196#
NONULDEL . . . . .  C ADDR   0BE9H   R   SEG=MAIN   2030 2041#
NOP3_0 . . . . . .  C ADDR   095EH   R   SEG=MAIN   1618#
NOPART1. . . . . .  C ADDR   035FH   R   SEG=MAIN   789 823#
NOPART2. . . . . .  C ADDR   037FH   R   SEG=MAIN   823 842#
NOPART3. . . . . .  C ADDR   039FH   R   SEG=MAIN   842 858#
NOPART4. . . . . .  C ADDR   03BFH   R   SEG=MAIN   858 875#
NOPLUS . . . . . .  C ADDR   0F32H   R   SEG=MAIN   2539 2542#
NOPOIN7. . . . . .  C ADDR   1B8BH   R   SEG=MAIN   4311 4346#
NOPOINT. . . . . .  C ADDR   1B57H   R   SEG=MAIN   4305 4309#
NOR11. . . . . . .  C ADDR   0F46H   R   SEG=MAIN   2553#
NORDN. . . . . . .  C ADDR   00F6H   A      7374# 7407
NORDN1 . . . . . .  C ADDR   0107H   A      7376 7390#
NORIG2 . . . . . .  C ADDR   1084H   R   SEG=MAIN   2729 2737#
NORIM6 . . . . . .  C ADDR   10C2H   R   SEG=MAIN   2789#
NORIME . . . . . .  C ADDR   0F6CH   R   SEG=MAIN   2575 2579#
NORIME1. . . . . .  C ADDR   0F66H   R   SEG=MAIN   2577# 2580 2593
NORM1. . . . . . .  C ADDR   00F0H   A      7369# 7566 7743 7845 8062
NORR11 . . . . . .  C ADDR   1283H   R   SEG=MAIN   3043#
NORR12 . . . . . .  C ADDR   1293H   R   SEG=MAIN   3043 3050# 3064
NORUP. . . . . . .  C ADDR   0119H   A      7373 7410#
NORUP1 . . . . . .  C ADDR   011EH   A      7415# 7433
NORUP2 . . . . . .  C ADDR   0132H   A      7417 7434#
NORVICH. . . . . .  C ADDR   0A6BH   R   SEG=MAIN   1724 1802#
NOSAV1 . . . . . .  C ADDR   0B20H   R   SEG=MAIN   1925 1928#
NOSAV2 . . . . . .  C ADDR   0B27H   R   SEG=MAIN   1928 1931#
NOSAV3 . . . . . .  C ADDR   0B2EH   R   SEG=MAIN   1931 1934#
NOSUB. . . . . . .  C ADDR   29C4H   R   SEG=MAIN   6771 6775 6779 6784#
NOT1IN . . . . . .  C ADDR   0BBFH   R   SEG=MAIN   1875 2015#
NOT1_7 . . . . . .  C ADDR   117AH   R   SEG=MAIN   2897 2904#
NOT2IN . . . . . .  C ADDR   0BC7H   R   SEG=MAIN   2015 2019#
NOT2_7 . . . . . .  C ADDR   1185H   R   SEG=MAIN   2904 2909#
NOT3IN . . . . . .  C ADDR   0BCFH   R   SEG=MAIN   2019 2022#
NOTAKT . . . . . .  C ADDR   0A3DH   R   SEG=MAIN   1773 1777#
NOTE21 . . . . . .  C ADDR   0705H   R   SEG=MAIN   1257 1299#
NOTE22 . . . . . .  C ADDR   0720H   R   SEG=MAIN   1299 1311#
NOTESTIZM. . . . .  C ADDR   0738H   R   SEG=MAIN   1220 1323#
NOTT1. . . . . . .  C ADDR   0B62H   R   SEG=MAIN   1961 1970#
NOTT2. . . . . . .  C ADDR   0B6DH   R   SEG=MAIN   1970 1975#
NOTT3. . . . . . .  C ADDR   0B78H   R   SEG=MAIN   1975 1981#
NOTT4. . . . . . .  C ADDR   0B8CH   R   SEG=MAIN   1981 1989#
NOTT5. . . . . . .  C ADDR   0B97H   R   SEG=MAIN   1989 1993#
NOT_1. . . . . . .  C ADDR   0E51H   R   SEG=MAIN   2410 2415#
NOT_10 . . . . . .  C ADDR   0E51H   R   SEG=MAIN   2414#
NOVIR. . . . . . .  C ADDR   0F4EH   R   SEG=MAIN   2447 2564#
NOVIR1 . . . . . .  C ADDR   0E88H   R   SEG=MAIN   2447# 2458
NOZMEA . . . . . .  C ADDR   1E84H   R   SEG=MAIN   4764 4766#
NOZMIN . . . . . .  C ADDR   1F77H   R   SEG=MAIN   4935 4937#
NOZZBL . . . . . .  C ADDR   182EH   R   SEG=MAIN   3847 3850 3853 3856#
NOZZMI . . . . . .  C ADDR   09D5H   R   SEG=MAIN   1704 1706#
NOZZMI1. . . . . .  C ADDR   181EH   R   SEG=MAIN   3845 3848#
NOZZMI2. . . . . .  C ADDR   1825H   R   SEG=MAIN   3848 3851#
NOZZMI3. . . . . .  C ADDR   182CH   R   SEG=MAIN   3851 3854#
NOZZMI43 . . . . .  C ADDR   1815H   R   SEG=MAIN   3842 3844#
NSEC1. . . . . . .  C ADDR   0A17H   R   SEG=MAIN   1748 1751#
NSEC10 . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1750 1753 1758#
NSEC11 . . . . . .  C ADDR   0A1EH   R   SEG=MAIN   1751 1755#
NUERR. . . . . . .  D ADDR   0039H   A      310# 1411 4198 4384 5082 5096 5905
NULAVT . . . . . .  C ADDR   0C19H   R   SEG=MAIN   2077#
NUMSIZE. . . . . .  N NUMB   0004H   A      6352# 6374 6412 6419 6494 6514
OBOARD . . . . . .  C ADDR   28FAH   R   SEG=MAIN   6595 6609#
OBOARD1. . . . . .  C ADDR   2942H   R   SEG=MAIN   6668 6681#
OK1. . . . . . . .  C ADDR   0186H   A      7500 7515#
OK2. . . . . . . .  C ADDR   01A0H   A      7517 7532#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   143

OK3. . . . . . . .  C ADDR   01C4H   A      7549 7565#
ONBOAR1. . . . . .  C ADDR   2920H   R   SEG=MAIN   6630 6647#
ONBOARD. . . . . .  C ADDR   28D4H   R   SEG=MAIN   6559 6573#
ONMEM11. . . . . .  C ADDR   1368H   R   SEG=MAIN   2924 2939 2941 3172# 3732 3738 3990 3994 3999 4014 4019 4042 4056
                                           4060 4071
ONMEM12. . . . . .  C ADDR   19B8H   R   SEG=MAIN   4061# 4064 4083
ONMEM13. . . . . .  C ADDR   1B37H   R   SEG=MAIN   4236 4291# 4295 4297
ONMIG. . . . . . .  C ADDR   24A3H   R   SEG=MAIN   5887 5896#
ONVICH . . . . . .  C ADDR   0DC3H   R   SEG=MAIN   2301 2313#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 493
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 486 490
OUT43. . . . . . .  C ADDR   1850H   R   SEG=MAIN   3881#
OUT6 . . . . . . .  C ADDR   10C2H   R   SEG=MAIN   2184 2249 2294 2371 2376 2381 2397 2433 2438 2445 2456 2578 2591
                                           2601 2607 2790#
OUT7 . . . . . . .  C ADDR   1C20H   R   SEG=MAIN   2823 2824 2901 2908 2912 2930 2981 2986 3037 3176 3256 3489 3583
                                           3712 3883 3890 3935 4029 4117 4212 4216 4286 4300 4395 4397 4425#
OUTA . . . . . . .  C ADDR   246AH   R   SEG=MAIN   3082 5828#
OUTA2. . . . . . .  C ADDR   2484H   R   SEG=MAIN   5839# 5844
OUTF . . . . . . .  C ADDR   0E7EH   R   SEG=MAIN   2441# 2464 2468 2472 2476 2480 2484 2509 2532 2541 2544 2551 2623
                                           2638 2647 2655 2664 2674 2721 2724 2764 2778 2781 3027 3028 4061
OUTFL. . . . . . .  C ADDR   0F43H   R   SEG=MAIN   2547 2551#
OUTKMEM. . . . . .  C ADDR   1375H   R   SEG=MAIN   3180# 3198 3710
OUTMA. . . . . . .  C ADDR   0F1CH   R   SEG=MAIN   2530 2532#
OUTMAX . . . . . .  C ADDR   2001H   R   SEG=MAIN   5022 5041#
OUTMEA . . . . . .  C ADDR   1E24H   R   SEG=MAIN   4703 4718#
OUTMENU. . . . . .  C ADDR   1974H   R   SEG=MAIN   4028#
OUTMIN . . . . . .  C ADDR   1F28H   R   SEG=MAIN   4871 4891#
OUTR . . . . . . .  C ADDR   08F1H   R   SEG=MAIN   1527 1550#
OUTR5. . . . . . .  C ADDR   090DH   R   SEG=MAIN   1548 1569#
OUTSKO . . . . . .  C ADDR   1A19H   R   SEG=MAIN   4113 4115#
OUTSKO1. . . . . .  C ADDR   1A16H   R   SEG=MAIN   4111 4114#
OUTVICH. . . . . .  C ADDR   0E8BH   R   SEG=MAIN   2448# 2460
OUTVIR . . . . . .  C ADDR   0D4CH   R   SEG=MAIN   2216 2245#
OUT_KALI . . . . .  C ADDR   1D1FH   R   SEG=MAIN   4569#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6551
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5109 5113
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 464
P1 . . . . . . . .  D ADDR   0090H   A      32# 650 651 5122 5124 5127 5130 5134 5136 5137 5189 5191 5193 5626 5633
                                           6164 6167 6169 6172
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 465
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5155 5159 5168
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 466
P3 . . . . . . . .  D ADDR   00B0H   A      62# 475 2215 2217 2219 2220 2223 2224 2228 2229 2231 2232 2234 2235 2237
                                           2238 2240 2241 2420 2421 2427 2428 2459 2460 2463 2464 2471 2472 2479 2480
                                           2488 2489 2534 2535 2545 2546 2572 2573 2586 2587 2617 2618 2619 2620 2632
                                           2633 2641 2642 2649 2650 2658 2659 2697 2698 2732 2733 2741 2742 2779 2780
                                           2809 2856 2858 2860 2861 2864 2865 2867 2868 2870 2871 2873 2874 2876 2877
                                           2879 2880 2976 2979 3005 3006 3030 3031 3044 3045 3051 3052 3065 3066 3110
                                           3111 3197 3198 3201 3202 3243 3244 3260 3261 3262 3263 3317 3318 3424 3425
                                           3435 3436 3526 3527 3528 3529 3600 3601 3630 3631 3674 3675 3676 3677 3694
                                           3695 3696 3697 3715 3716 3717 3718 3725 3726 3768 3769 3770 3771 3892 3893
                                           3981 3982 4050 4051 4063 4064 4080 4081 4082 4083 4123 4124 4125 4126 4294
                                           4295 4296 4297 4303 4304 4309 4310 4346 4347 4439 5154 5156 5158 5164 5165
                                           5166 5169 5170
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2191 2808 2830 4438
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 468
P4 . . . . . . . .  D ADDR   0084H   A      20# 2032 2053 2080 2163 2325 2327 4555 5247 5250 5266 5268 5729
P5 . . . . . . . .  D ADDR   0085H   A      21# 564 573 2034 2055 2082 2085 2090 2125 2127 2165 2335 2337 4559 5255
                                           5258 5288 5291 5733
P6 . . . . . . . .  D ADDR   0086H   A      22# 1940 1942 1946 1948 2811 2813 2817 2819 4442 4444 4448 4450
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 469
PACK1. . . . . . .  C ADDR   00DEH   A      7352# 7567 7744 7846 8063
PARERR . . . . . .  C ADDR   1AA5H   R   SEG=MAIN   4155 4157 4159 4198#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   144

PARN . . . . . . .  D ADDR   00AFH   A      390# 570 1738 2401 3138
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 565 787 1127 1169 1196 1211 1747 1803 1960 2296 2365 2402 2895 3121
                                           3137 3573 3660 5259 5653
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 462
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 463
PCON . . . . . . .  D ADDR   0087H   A      23# 509
POIN3. . . . . . .  C ADDR   1B8AH   R   SEG=MAIN   4344# 4398
POINA. . . . . . .  C ADDR   1BF2H   R   SEG=MAIN   4342 4397#
POINA1 . . . . . .  C ADDR   1B6FH   R   SEG=MAIN   4314 4321#
POINA2 . . . . . .  C ADDR   1B69H   R   SEG=MAIN   4317# 4322
POZB . . . . . . .  C ADDR   1C15H   R   SEG=MAIN   4411 4415#
PROD . . . . . . .  N NUMB   000CH   A      7289# 7633 7634 7635 7636 7656 7657 7658 7660 7661 7663 7664 7666 7688
                                           7690 7691 7693 7694 7696 7697 7699 7718 7719 7720 7722 7723 7725 7726 7728
                                           7739 7740 7741 7742 7763 7764 7765 7766 7782 7784 7785 7787 7788 7790 7791
                                           7793 7823 7840 7841 7842 7843
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8094 8098 8151 8154
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2194 2799 2833 4436 6073 6075 7024
                                           7032
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0D56H   R   SEG=MAIN   2239 2251#
QUES . . . . . . .  C ADDR   1421H   R   SEG=MAIN   3256# 3261
QU_AVP . . . . . .  C ADDR   077EH   R   SEG=MAIN   1352 1354#
R10. . . . . . . .  N NUMB   000AH   A      449# 1158 1406 1443 1455 4158 5701 8117
R11. . . . . . . .  N NUMB   000BH   A      450# 1159 1405 1444 1454 5705 8121
R8 . . . . . . . .  N NUMB   0008H   A      447# 516 1408 1441 1457 4007 4154 5209 5693 8109
R9 . . . . . . . .  N NUMB   0009H   A      448# 1407 1442 1456 4156 5210 5697 8113
RAFTERK. . . . . .  C ADDR   061EH   R   SEG=MAIN   1166# 1172
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   147AH   R   SEG=MAIN   3313# 3318
RE1. . . . . . . .  C ADDR   20E5H   R   SEG=MAIN   5189# 5195
RE11_7 . . . . . .  C ADDR   06C6H   R   SEG=MAIN   1268# 1310 1321
RE4BYTE. . . . . .  C ADDR   0454H   A      515 4006 4152 8105#
REA3_X . . . . . .  C ADDR   2807H   R   SEG=MAIN   3814 6317#
REACP. . . . . . .  D ADDR   0077H   A      304# 665 667 669 671 728 744 752 760 769 776 791 826 844 860 876 2099
                                           2101 2103 2105 2137 2139 2141 2143
READ . . . . . . .  C ADDR   20E3H   R   SEG=MAIN   664 666 668 5188#
READYACP . . . . .  C ADDR   0316H   R   SEG=MAIN   770 780#
READ_X2. . . . . .  C ADDR   20CBH   R   SEG=MAIN   5163# 5174
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   145

REBYTE . . . . . .  C ADDR   0266H   R   SEG=MAIN   649# 683 705 817 2058 2068 2092 2130 2168 2177 2179
REBYTE2. . . . . .  C ADDR   046CH   A      1260 1268 1286 1302 1313 1329 4575 4583 8125#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 470
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   11B6H   R   SEG=MAIN   2934# 2936
RESAR2 . . . . . .  C ADDR   272BH   R   SEG=MAIN   792 827 845 861 877 889 925 1007 1063 1184 1229 1337 1358 1423
                                           1446 1473 1626 1680 1898 2008 2045 2963 4496 4504 4523 4601 4623 4711 4723
                                           4738 4818 4876 4892 4906 4969 5027 5042 5829 6142# 6301
RESAR8 . . . . . .  C ADDR   26E9H   R   SEG=MAIN   1140 1190 1232 1240 1363 2112 2150 6081#
RESA_HL. . . . . .  C ADDR   27D4H   R   SEG=MAIN   1918 4656 4794 4944 6278#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2147
REZAP. . . . . . .  D ADDR   0088H   A      375# 2109
REZMUL . . . . . .  C ADDR   0676H   R   SEG=MAIN   1204 1218 1227#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 805 878 888 924 1006 1062 2044
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1189 1362 1400 1607 2289 2955 2964 2971
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1121 1187 1228 1342 1357 1376
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1359
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1192 1365 1422 1625 1679 1808 2962 4495 4600 6300 6331
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4273 4503
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1133 1142 1183 1242 1336
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 807
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1459 1472
RE_HL. . . . . . .  C ADDR   27DBH   R   SEG=MAIN   6281# 6291 6295 6298
RE_HL1 . . . . . .  C ADDR   27E3H   R   SEG=MAIN   6279 6289#
RE_HL2 . . . . . .  C ADDR   27EAH   R   SEG=MAIN   6289 6293#
RE_HL3 . . . . . .  C ADDR   27F1H   R   SEG=MAIN   6293 6297#
RGO23NO. . . . . .  C ADDR   147DH   R   SEG=MAIN   3314# 3319
RGOTO7 . . . . . .  C ADDR   1635H   R   SEG=MAIN   3597# 3631
RHNOR11. . . . . .  C ADDR   125DH   R   SEG=MAIN   3004 3016 3022#
RHNOT1 . . . . . .  C ADDR   1224H   R   SEG=MAIN   2979 2988#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0F6FH   R   SEG=MAIN   2570 2582#
RI6. . . . . . . .  C ADDR   0F69H   R   SEG=MAIN   2573 2578# 2587 2616 2620
RIGBLO . . . . . .  C ADDR   104CH   R   SEG=MAIN   2697# 2728 2730
RIGBLOK. . . . . .  C ADDR   108AH   R   SEG=MAIN   2741#
RIGHT2 . . . . . .  C ADDR   0D7DH   R   SEG=MAIN   2266 2270#
RIGHT3 . . . . . .  C ADDR   0D81H   R   SEG=MAIN   2268 2273#
RIKN . . . . . . .  C ADDR   0EF4H   R   SEG=MAIN   2495# 2513
RIZMAN . . . . . .  C ADDR   0CD8H   R   SEG=MAIN   2188# 2225
RI_31. . . . . . .  C ADDR   0F89H   R   SEG=MAIN   2585 2594#
RKNLEFT. . . . . .  C ADDR   10FCH   R   SEG=MAIN   2827# 2872
RKNMEM . . . . . .  C ADDR   10EDH   R   SEG=MAIN   2822# 2878
RKNNUL . . . . . .  C ADDR   10F9H   R   SEG=MAIN   2826# 2866
RKNOPT . . . . . .  C ADDR   0CD5H   R   SEG=MAIN   2187# 2236
RKNRAZR. . . . . .  C ADDR   0CD2H   R   SEG=MAIN   2186# 2230
RKVVOD0. . . . . .  C ADDR   13B5H   R   SEG=MAIN   3203 3210#
RLABELF. . . . . .  C ADDR   0CCFH   R   SEG=MAIN   2185# 2222
RLABELH. . . . . .  C ADDR   10F6H   R   SEG=MAIN   2825# 2863
RLABELI. . . . . .  C ADDR   122AH   R   SEG=MAIN   2991#
RLABELK. . . . . .  C ADDR   1227H   R   SEG=MAIN   2990# 2993
RLABELL. . . . . .  C ADDR   0F4BH   R   SEG=MAIN   2562#
RLABELL1 . . . . .  C ADDR   10BFH   R   SEG=MAIN   2780 2783#
RLABELN. . . . . .  C ADDR   0FC6H   R   SEG=MAIN   2618 2622#
RLABELP. . . . . .  C ADDR   190FH   R   SEG=MAIN   3979# 3982
RLABELS13. . . . .  C ADDR   1A23H   R   SEG=MAIN   4120# 4124
RLABELS4 . . . . .  C ADDR   1A20H   R   SEG=MAIN   4119# 4122
RLABL2 . . . . . .  C ADDR   141BH   R   SEG=MAIN   3254#
RLABM. . . . . . .  C ADDR   141EH   R   SEG=MAIN   3255# 3259
RLEFCUR. . . . . .  C ADDR   16DCH   R   SEG=MAIN   3691# 3695
RLER . . . . . . .  C ADDR   245CH   R   SEG=MAIN   5812 5814#
RLIST_43 . . . . .  C ADDR   1773H   R   SEG=MAIN   3765# 3767
RMAS4. . . . . . .  C ADDR   0467H   R   SEG=MAIN   950# 952
RME21_23 . . . . .  C ADDR   1743H   R   SEG=MAIN   3723 3742#
RMO220 . . . . . .  C ADDR   0658H   R   SEG=MAIN   1206# 1253
RNNMEMB. . . . . .  C ADDR   0FCCH   R   SEG=MAIN   2625# 2628
RNO3PARN . . . . .  C ADDR   09F2H   R   SEG=MAIN   1725# 1739
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   146

RNOBUF0. . . . . .  C ADDR   0B06H   R   SEG=MAIN   1910 1914#
RNOCHI0. . . . . .  C ADDR   07A6H   R   SEG=MAIN   1371 1375#
RNOH37 . . . . . .  C ADDR   1281H   R   SEG=MAIN   3041# 3045 3052 3066
RNOM31 . . . . . .  C ADDR   15B3H   R   SEG=MAIN   3524# 3525
RNOMEMK. . . . . .  C ADDR   1372H   R   SEG=MAIN   3178# 3196
RNORVICH . . . . .  C ADDR   09F0H   R   SEG=MAIN   1668 1669 1724#
RNOT1IN. . . . . .  C ADDR   0AC4H   R   SEG=MAIN   1805 1875#
RNOTESTIZM . . . .  C ADDR   066EH   R   SEG=MAIN   1220# 1255
ROUSTA . . . . . .  C ADDR   18FBH   R   SEG=MAIN   3963 3971#
ROUSTA1. . . . . .  C ADDR   190CH   R   SEG=MAIN   3971 3977#
ROUT6. . . . . . .  C ADDR   0CCCH   R   SEG=MAIN   2184# 2221
ROUT7. . . . . . .  C ADDR   10F3H   R   SEG=MAIN   2824# 2857 2862
ROUTF. . . . . . .  C ADDR   127EH   R   SEG=MAIN   3037# 3111
RR0. . . . . . . .  N NUMB   0000H   A      440# 2195 2798 2834 4435
RR1. . . . . . . .  N NUMB   0001H   A      441# 2196 2797 2835 4434
RR2. . . . . . . .  N NUMB   0002H   A      443# 1262 1274 1280 1292 1304 1315 2197 2796 2836 3793 3801 4433 4577
                                           4589 4595 4607 5222
RR3. . . . . . . .  N NUMB   0003H   A      444# 1263 1273 1281 1291 1305 1316 2198 2795 2837 3794 3800 4432 4578
                                           4588 4596 4606 5223
RR4. . . . . . . .  N NUMB   0004H   A      1264 1272 1282 1290 1306 1317 2199 2794 2838 3795 3799 4431 4579 4587
                                           4597 4605 6353# 6410 6431 6447 6491 6513
RR5. . . . . . . .  N NUMB   0005H   A      1265 1271 1283 1289 1307 1318 2200 2793 2839 3796 3798 4430 4580 4586
                                           4598 4604 6354# 6411 6418 6425 6492 6501
RR6. . . . . . . .  N NUMB   0006H   A      442# 2201 2792 2840 4429
RR7. . . . . . . .  N NUMB   0007H   A      445# 2202 2791 2841 4428
RRIR . . . . . . .  C ADDR   2469H   R   SEG=MAIN   5823 5825#
RRMO220. . . . . .  C ADDR   07A3H   R   SEG=MAIN   1348 1374#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   098CH   R   SEG=MAIN   1652# 1670 1672 1673
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 500 2931
RTIZMRI. . . . . .  C ADDR   0E55H   R   SEG=MAIN   2418#
RVVIZKO. . . . . .  C ADDR   125FH   R   SEG=MAIN   3024# 3032
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 569 1926 3846
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1929 3849
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1932 3852
SADIAP4. . . . . .  D ADDR   0030H   A      318# 1935 3854
SAUS . . . . . . .  D ADDR   0036H   A      313# 2033 2035 2052 2054 2081 2083 2162 2164
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2213 2508 2526 2711 2755 2775 2853 3454 3509 3614 4230 4336 5888
                                           5896
SAVEIR2. . . . . .  C ADDR   266DH   R   SEG=MAIN   891 928 1010 1066 5981#
SAVELTE. . . . . .  C ADDR   04A7H   A      8188#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 590 6249 6280
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 598 6268 6290
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 605 6272 6294
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 612 6274 6297
SAVER2 . . . . . .  C ADDR   2679H   R   SEG=MAIN   582 584 586 588 796 806 808 831 849 865 879 1122 1134 1143 1188
                                           1193 1243 1343 1360 1366 1377 1460 1464 1684 1903 1967 2050 2110 2122 2148
                                           2160 2965 2972 3824 4274 4366 4513 4615 4714 4726 4746 4821 4886 4902 4917
                                           4972 5037 5052 5832 5995# 6332
SAVE_HL. . . . . .  C ADDR   27A0H   R   SEG=MAIN   1921 3305 3342 3361 3383 3405 3655 6247#
SA_HL. . . . . . .  C ADDR   27A7H   R   SEG=MAIN   6250# 6269 6273 6275
SA_HL1 . . . . . .  C ADDR   27C2H   R   SEG=MAIN   6248 6267#
SA_HL2 . . . . . .  C ADDR   27C9H   R   SEG=MAIN   6267 6271#
SA_HL3 . . . . . .  C ADDR   27D0H   R   SEG=MAIN   6271 6274#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5064 5070
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 508 5065 5069 5072 5073 5094
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   208DH   R   SEG=MAIN   5122# 5129
SDV1 . . . . . . .  C ADDR   20A1H   R   SEG=MAIN   5134# 5140
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   147

SDVIG0 . . . . . .  C ADDR   02F7H   R   SEG=MAIN   756# 758
SDVIG1 . . . . . .  C ADDR   02ECH   R   SEG=MAIN   748# 750
SDVIG2 . . . . . .  C ADDR   02E1H   R   SEG=MAIN   740# 742
SDVIG3 . . . . . .  C ADDR   02D5H   R   SEG=MAIN   731# 733
SDVIG4 . . . . . .  C ADDR   0306H   R   SEG=MAIN   766# 768
SDVIG6 . . . . . .  C ADDR   0310H   R   SEG=MAIN   773# 775
SDVM . . . . . . .  C ADDR   030EH   R   SEG=MAIN   763 772#
SEEGOON. . . . . .  C ADDR   09F7H   R   SEG=MAIN   1714 1722 1729#
SEEIND . . . . . .  C ADDR   0A05H   R   SEG=MAIN   1644 1651 1652 1741#
SEE_L43. . . . . .  C ADDR   184AH   R   SEG=MAIN   3863 3871 3874#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7284# 7305 7306 7331 7332 7356 7499 7516 7737 7777
SKOR19 . . . . . .  C ADDR   195AH   R   SEG=MAIN   4008 4015#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   12EEH   R   SEG=MAIN   3106# 3122
SP . . . . . . . .  D ADDR   0081H   A      17# 461
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 506
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 505
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5111
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   19FBH   R   SEG=MAIN   4098 4100#
SS1. . . . . . . .  C ADDR   21C3H   R   SEG=MAIN   5371# 5373
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 793 795 810 828 830 846 848 862 864 1398 1605 2287 2953
SUMT2. . . . . . .  C ADDR   0362H   R   SEG=MAIN   784 825#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T2MSME . . . . . .  C ADDR   16A0H   R   SEG=MAIN   3663# 3669
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   235BH   R   SEG=MAIN   5644# 5654
TABN . . . . . . .  C ADDR   23F3H   R   SEG=MAIN   5746# 5750
TABT11 . . . . . .  C ADDR   217BH   R   SEG=MAIN   5308# 5726
TABT7. . . . . . .  C ADDR   217FH   R   SEG=MAIN   4552 5312# 5739
TABT9. . . . . . .  C ADDR   217DH   R   SEG=MAIN   5310# 5736
TABUS. . . . . . .  C ADDR   2167H   R   SEG=MAIN   5244 5297#
TAKTIND. . . . . .  C ADDR   0A42H   R   SEG=MAIN   1776 1779#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 497 498 512
TE10MS . . . . . .  C ADDR   24BFH   R   SEG=MAIN   3662 5911#
TE22 . . . . . . .  C ADDR   23E6H   R   SEG=MAIN   5725 5735#
TE23 . . . . . . .  C ADDR   23EEH   R   SEG=MAIN   5735 5739#
TE2MS. . . . . . .  C ADDR   24B5H   R   SEG=MAIN   3668 5910#
TEAEQU0. . . . . .  C ADDR   24FBH   R   SEG=MAIN   3079 5919#
TEAVK. . . . . . .  C ADDR   2537H   R   SEG=MAIN   4469 5926#
TEBEQU0. . . . . .  C ADDR   2505H   R   SEG=MAIN   5920#
TEBL . . . . . . .  C ADDR   25EBH   R   SEG=MAIN   2670 3247 5948#
TEBL0. . . . . . .  C ADDR   25F5H   R   SEG=MAIN   3473 5949#
TECH . . . . . . .  C ADDR   25FFH   R   SEG=MAIN   3754 3921 5950#
TECLE. . . . . . .  C ADDR   25B0H   R   SEG=MAIN   2662 3215 5942#
TEEND. . . . . . .  C ADDR   264FH   R   SEG=MAIN   4566 5959#
TEERR. . . . . . .  C ADDR   2645H   R   SEG=MAIN   5903 5958#
TEFULL . . . . . .  C ADDR   25D7H   R   SEG=MAIN   2677 3440 5946#
TEINT. . . . . . .  C ADDR   25E1H   R   SEG=MAIN   3540 5947#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   148

TEIZMK . . . . . .  C ADDR   2592H   R   SEG=MAIN   2466 3018 5939#
TEKALIB. . . . . .  C ADDR   2541H   R   SEG=MAIN   3730 4472 5927#
TEKD . . . . . . .  C ADDR   2588H   R   SEG=MAIN   4163 5938#
TELIST . . . . . .  C ADDR   25CCH   R   SEG=MAIN   2645 3164 3226 3232 5945#
TEMAX. . . . . . .  C ADDR   261DH   R   SEG=MAIN   3957 5953#
TEMEM. . . . . . .  C ADDR   25BAH   R   SEG=MAIN   5943#
TEMENU . . . . . .  C ADDR   250FH   R   SEG=MAIN   5921#
TEMID. . . . . . .  C ADDR   2627H   R   SEG=MAIN   3965 5954#
TEMIN. . . . . . .  C ADDR   2613H   R   SEG=MAIN   3485 3973 5952#
TEMUL. . . . . . .  C ADDR   0755H   R   SEG=MAIN   1298 1335#
TENMIN . . . . . .  C ADDR   225DH   R   SEG=MAIN   1201 1203 1217 5436#
TEOLI. . . . . . .  C ADDR   2631H   R   SEG=MAIN   1498 5956#
TEOLL. . . . . . .  C ADDR   25A6H   R   SEG=MAIN   1591 5941#
TEOLR. . . . . . .  C ADDR   263BH   R   SEG=MAIN   1494 5957#
TEOUT. . . . . . .  C ADDR   259CH   R   SEG=MAIN   2474 2555 3009 5940#
TEPAR. . . . . . .  C ADDR   257EH   R   SEG=MAIN   4489 5937#
TES19_2. . . . . .  C ADDR   2574H   R   SEG=MAIN   521 2602 4015 4213 5935#
TES57_6. . . . . .  C ADDR   256AH   R   SEG=MAIN   2596 4009 4209 4485 5934#
TESKOR . . . . . .  C ADDR   252DH   R   SEG=MAIN   4466 5925#
TEST01 . . . . . .  C ADDR   2028H   R   SEG=MAIN   5069# 5092
TEST02 . . . . . .  C ADDR   2057H   R   SEG=MAIN   5089 5091#
TEST04 . . . . . .  C ADDR   2038H   R   SEG=MAIN   5076# 5078
TEST1. . . . . . .  C ADDR   201EH   R   SEG=MAIN   5064# 5080 5101
TEST2. . . . . . .  C ADDR   2050H   R   SEG=MAIN   5069 5088#
TEST22 . . . . . .  C ADDR   19D0H   R   SEG=MAIN   4065 4072#
TEST23 . . . . . .  C ADDR   19D5H   R   SEG=MAIN   4072 4075#
TEST3. . . . . . .  C ADDR   2042H   R   SEG=MAIN   5071 5081#
TEST4. . . . . . .  C ADDR   2030H   R   SEG=MAIN   5072# 5087
TEST5. . . . . . .  C ADDR   205AH   R   SEG=MAIN   5090 5093#
TEST7I . . . . . .  C ADDR   0A5AH   R   SEG=MAIN   1791 1794#
TEST9I . . . . . .  C ADDR   0A53H   R   SEG=MAIN   1786 1791#
TESTAT . . . . . .  C ADDR   2609H   R   SEG=MAIN   2653 3206 5951#
TESTRS . . . . . .  C ADDR   201CH   R   SEG=MAIN   3998 5062#
TESTS. . . . . . .  C ADDR   19C4H   R   SEG=MAIN   4067# 4074 4077
TETE11 . . . . . .  C ADDR   254CH   R   SEG=MAIN   3987 4476 5929#
TETE7. . . . . . .  C ADDR   2560H   R   SEG=MAIN   4054 4482 5931#
TETE9. . . . . . .  C ADDR   2556H   R   SEG=MAIN   4479 5930#
TETESI . . . . . .  C ADDR   2519H   R   SEG=MAIN   2919 4459 5923#
TETESR . . . . . .  C ADDR   2523H   R   SEG=MAIN   4463 5924#
TEVICH . . . . . .  C ADDR   24F1H   R   SEG=MAIN   2308 2482 3014 4375 5918#
TEWR . . . . . . .  C ADDR   25C2H   R   SEG=MAIN   2636 3221 5944#
TEXTT. . . . . . .  C ADDR   24B5H   R   SEG=MAIN   5324 5909#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 480
TH1. . . . . . . .  D ADDR   008DH   A      29# 519 523 4112 4114
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   20B1H   R   SEG=MAIN   5143#
TIM1 . . . . . . .  C ADDR   20B3H   R   SEG=MAIN   5144# 5144
TIM2 . . . . . . .  C ADDR   20B6H   R   SEG=MAIN   5125 5128 5135 5139 5147# 5190 5194 6168 6170
TIM3 . . . . . . .  C ADDR   20B8H   R   SEG=MAIN   5148# 5148
TIZMRI . . . . . .  C ADDR   0D76H   R   SEG=MAIN   2265# 2418
TL0. . . . . . . .  D ADDR   008AH   A      26# 481
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   12EBH   R   SEG=MAIN   3091 3103#
TMOD . . . . . . .  D ADDR   0089H   A      25# 478 511
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 495
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 494
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   149

TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   193BH   R   SEG=MAIN   3996 4001#
TOME14 . . . . . .  C ADDR   1968H   R   SEG=MAIN   4001 4022#
TOME15 . . . . . .  C ADDR   1980H   R   SEG=MAIN   4022 4034#
TOME21 . . . . . .  C ADDR   1932H   R   SEG=MAIN   3985 3996#
TOSK19 . . . . . .  C ADDR   1ACAH   R   SEG=MAIN   4208 4213#
TOUTF. . . . . . .  C ADDR   1268H   R   SEG=MAIN   3028# 3031
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0E58H   R   SEG=MAIN   2420# 2429
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5112
UNPACK1. . . . . .  C ADDR   009EH   A      7302# 7496 7630 7760 7874
UNPACK2. . . . . .  C ADDR   00BAH   A      7327# 7497 7631 7761
UP1. . . . . . . .  C ADDR   0138H   A      7447# 7464
UP2. . . . . . . .  C ADDR   014BH   A      7467# 7485
UP2A . . . . . . .  C ADDR   0161H   A      7446 7483#
UPA. . . . . . . .  C ADDR   228CH   R   SEG=MAIN   5491# 5497
UPA1 . . . . . . .  C ADDR   229CH   R   SEG=MAIN   5509# 5515
UPA2 . . . . . . .  C ADDR   227CH   R   SEG=MAIN   5472# 5478
UPAA . . . . . . .  C ADDR   2778H   R   SEG=MAIN   6216# 6222
UPAA4. . . . . . .  C ADDR   22E7H   R   SEG=MAIN   5572# 5578
UPAB . . . . . . .  C ADDR   22F7H   R   SEG=MAIN   5589# 5595
UPAK . . . . . . .  C ADDR   2286H   R   SEG=MAIN   5488#
UPAK1. . . . . . .  C ADDR   2752H   R   SEG=MAIN   6181#
UPAK2. . . . . . .  C ADDR   2276H   R   SEG=MAIN   5469#
UPAK3. . . . . . .  C ADDR   2296H   R   SEG=MAIN   3683 3778 5506#
UPAK4. . . . . . .  C ADDR   2772H   R   SEG=MAIN   3637 6213#
UPAKA. . . . . . .  C ADDR   22E1H   R   SEG=MAIN   4358 5569#
UPAKB. . . . . . .  C ADDR   22F1H   R   SEG=MAIN   4405 5586#
UPAV1. . . . . . .  C ADDR   1A42H   R   SEG=MAIN   4143# 4149
UPAV2. . . . . . .  C ADDR   1AF9H   R   SEG=MAIN   4257# 4263
UPK1 . . . . . . .  C ADDR   2764H   R   SEG=MAIN   6189 6192#
UPK2 . . . . . . .  C ADDR   2765H   R   SEG=MAIN   6191 6193#
VICHMAX. . . . . .  C ADDR   1F7BH   R   SEG=MAIN   3959 4943#
VICHMEAN . . . . .  C ADDR   1DBFH   R   SEG=MAIN   3967 4655#
VICHMIN. . . . . .  C ADDR   1EA2H   R   SEG=MAIN   3487 3975 4793#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1256 1782 2305 2314 2448 2461 2566 2574 2922 2926 3003 3070 3182
                                           3719 3727 3736 3980 4031 4045 4161 4349 4388 4420 4457 5724
VIG0 . . . . . . .  C ADDR   0AB0H   R   SEG=MAIN   1859# 1861
VIG4 . . . . . . .  C ADDR   0ABEH   R   SEG=MAIN   1870# 1872
VIOUT. . . . . . .  C ADDR   0E2FH   R   SEG=MAIN   2311 2393# 2421
VIOUTF . . . . . .  C ADDR   1261H   R   SEG=MAIN   3025#
VIT2_10. . . . . .  C ADDR   0DA2H   R   SEG=MAIN   2294# 2300
VODM11_15. . . . .  C ADDR   16FFH   R   SEG=MAIN   3708# 3726
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2253 3650 6257 6259
VV21_23. . . . . .  C ADDR   19BBH   R   SEG=MAIN   4051 4063#
VVCHIBL. . . . . .  C ADDR   242AH   R   SEG=MAIN   2549 5778#
VVCHIF . . . . . .  C ADDR   2405H   R   SEG=MAIN   5754# 5771
VVINTE . . . . . .  C ADDR   1660H   R   SEG=MAIN   3601 3629#
VVIZKO . . . . . .  C ADDR   12B8H   R   SEG=MAIN   3024 3070#
VVKALI52 . . . . .  C ADDR   1AECH   R   SEG=MAIN   4241# 4293
VVMENU . . . . . .  C ADDR   1AA2H   R   SEG=MAIN   4126 4196#
VVNOL23. . . . . .  C ADDR   2425H   R   SEG=MAIN   5775# 5779
VVNOL31. . . . . .  C ADDR   2420H   R   SEG=MAIN   5773# 5775
VVNOL41. . . . . .  C ADDR   241EH   R   SEG=MAIN   5771# 5773
VVOD2_10 . . . . .  C ADDR   1698H   R   SEG=MAIN   3191 3310 3410 3660#
VVOD43 . . . . . .  C ADDR   1876H   R   SEG=MAIN   3893 3900#
VVODM11_15 . . . .  C ADDR   1912H   R   SEG=MAIN   3708 3980#
VVOSTA . . . . . .  C ADDR   18D3H   R   SEG=MAIN   3936 3955#
VVOSTAD. . . . . .  C ADDR   18E7H   R   SEG=MAIN   3955 3963#
VVRR6. . . . . . .  C ADDR   0EB4H   R   SEG=MAIN   2466#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 476 477
WORK . . . . . . .  D ADDR   00B8H   A      396# 1479 1481 1487 1503 1510 1526 1547 1552 1568 1810 1888 3277 3287
A51 MACRO ASSEMBLER  AMP31                                                                02/14/2007 11:03:22 PAGE   150

                                           3289 3323 3333 3335 3345 3355 3357 3364 3374 3376 3386 3396 3398 4663 4710
                                           4713 4722 4725 4737 4799 4817 4820 4875 4885 4891 4901 4905 4950 4968 4971
                                           5026 5036 5041 5051 5066 5088
WR1. . . . . . . .  C ADDR   273FH   R   SEG=MAIN   6164# 6171
WRITE. . . . . . .  C ADDR   273CH   R   SEG=MAIN   662 5615 5617 5619 5621 5623 5625 5628 5630 5632 5635 5637 5639
                                           6162#
WRITED_X1. . . . .  C ADDR   20BCH   R   SEG=MAIN   5153#
WRITE_X1 . . . . .  C ADDR   20BBH   R   SEG=MAIN   5152#
WRPAGE . . . . . .  C ADDR   0480H   A      4109 4545 4647 8149#
WW5. . . . . . . .  C ADDR   0483H   A      8150# 8158
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 472 504
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 473
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 474 503
XCIKLWR. . . . . .  C ADDR   2659H   R   SEG=MAIN   886 899 901 903 906 909 912 915 918 921 954 956 958 961 964 967
                                           970 973 976 978 981 983 985 988 991 994 997 1000 1003 1055 1057 1059 5964#
XTEMP. . . . . . .  N NUMB   000CH   A      6350# 6714 6715 6716 6717 6803 6805 6806 6808 6809 6811 6812 6814 6836
                                           6837 6838 6839 6857 6858 6862 6863 6866 6870 6871 6874 6878 6879 6883 6884
                                           6886 6887 6888 6890 6894 6895 6897 6898 6902 6903 6908 6909 6911 6912 6916
                                           6917 6922 6924 6925 6926
YBNUL. . . . . . .  C ADDR   11F9H   R   SEG=MAIN   2960 2968#
YES. . . . . . . .  C ADDR   29A7H   R   SEG=MAIN   6736 6740 6744 6748 6766# 6829
YES0KEY. . . . . .  C ADDR   02B1H   R   SEG=MAIN   692 704#
YES0KEY1 . . . . .  C ADDR   02BEH   R   SEG=MAIN   711# 718
YESAVP . . . . . .  C ADDR   07B0H   R   SEG=MAIN   1354 1380#
YESBUF . . . . . .  C ADDR   0B0BH   R   SEG=MAIN   1912 1917#
YESIND . . . . . .  C ADDR   0A5CH   R   SEG=MAIN   1781 1790 1793 1796#
YESPRD . . . . . .  C ADDR   0B09H   R   SEG=MAIN   1911 1915#
YESTEST. . . . . .  C ADDR   2156H   R   SEG=MAIN   5239 5271#
YESTT5 . . . . . .  C ADDR   0BADH   R   SEG=MAIN   2005#
YESVICH. . . . . .  C ADDR   07F9H   R   SEG=MAIN   1368 1418#
YESVI_KM . . . . .  C ADDR   1D28H   R   SEG=MAIN   4492 4572#
YESVI_KR . . . . .  C ADDR   1CA0H   R   SEG=MAIN   4492# 4494
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   520 524#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   517 521#
Z01S . . . . . . .  C ADDR   21DBH   R   SEG=MAIN   5388# 5390
Z05S . . . . . . .  C ADDR   21E8H   R   SEG=MAIN   5397# 5399
Z100 . . . . . . .  C ADDR   21ACH   R   SEG=MAIN   5352# 5354
Z15. . . . . . . .  C ADDR   21BAH   R   SEG=MAIN   5364# 5366
Z1S. . . . . . . .  C ADDR   21CEH   R   SEG=MAIN   5380# 5382
ZAPADC . . . . . .  C ADDR   208BH   R   SEG=MAIN   5121#
ZCMP . . . . . . .  C ADDR   26DBH   R   SEG=MAIN   6071#
ZDIV . . . . . . .  C ADDR   26A8H   R   SEG=MAIN   804 1114 1629 3817 6034#
ZER1 . . . . . . .  C ADDR   00B3H   A      7312 7316# 7371 7414
ZER2 . . . . . . .  C ADDR   00D4H   A      7338 7342#
ZMUL . . . . . . .  C ADDR   269EH   R   SEG=MAIN   6029#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1704 3842 4764 4935 6042 6045 6048
ZNPLUS . . . . . .  C ADDR   02C8H   R   SEG=MAIN   673 720#
ZZ . . . . . . . .  C ADDR   21BCH   R   SEG=MAIN   5365# 5365
Z_01S. . . . . . .  C ADDR   21D7H   R   SEG=MAIN   2205 2206 2846 5086 5100 5386# 5900
Z_05S. . . . . . .  C ADDR   21E4H   R   SEG=MAIN   1999 2000 2673 3960 3968 3976 5395#
Z_100. . . . . . .  C ADDR   21AAH   R   SEG=MAIN   5351#
Z_15 . . . . . . .  C ADDR   21B8H   R   SEG=MAIN   641 5363#
Z_1MS. . . . . . .  C ADDR   21C1H   R   SEG=MAIN   711 5093 5370#
Z_1S . . . . . . .  C ADDR   21CAH   R   SEG=MAIN   630 638 1414 2310 3488 3761 3882 3934 4201 4285 4387 4569 4570
                                           5378#
Z_5. . . . . . . .  C ADDR   21B3H   R   SEG=MAIN   5157 5167 5358#
Z_9. . . . . . . .  C ADDR   2737H   R   SEG=MAIN   5114 6156#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
