A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp34.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp34.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                          jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 020000   F      262                                                     jmp             inter2  ;IE.5,IP.5(ET2,PT2)
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
                     320     ;;;;;
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     6

  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     358     ;bit            BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
                     383     ;FLOAT
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     7

  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
  0E00               438     chbuf1  xdata 0e00h;счетчик буфера 1
                     439     ;xdata  0e04
                     440     
  0000               441                             rr0             EQU 00
  0001               442                     rr1       equ   01
  0006               443                     rr6   equ 06
  0002               444                     rr2       equ   02
  0003               445                     rr3       equ   03
  0007               446                     rr7   equ 07
                     447     
  0008               448                     r8   equ 08
  0009               449                     r9        equ   09
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     8

  000A               450                     r10       equ   10
  000B               451                     r11   equ 11
                     452     
                     453                     
                     454        
----                 455                  rseg     Main          ; Switch to this code segment.
                     456     
                     457                  using    0              ; Specify register bank for the following
                     458     
0100                 459     org 100h
                     460     ;$EJECT
                     461     
0100 7581E0          462     begin:     mov  sp, #0e0h
0103 75E900          463                                             mov             PCA0L,#00;=0x00;
0106 75D900          464                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          465                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          466                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          467                                             mov     P2MDOUT,#00;=0x00;
                     468             
0112 75A73F          469             mov     P3MDOUT,#3fh;
0115 75B5FF          470             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          471             mov     REF0CN,#03h;=0x03;
                     472             
011B 75E114          473             mov     XBR0,#14h;= 0x14;
011E 75E200          474             mov     XBR1,#00; =0x00;
0121 75E300          475             mov XBR2,#00;=0x00;
0124 75B0C0          476             mov     P3,#0c0h
0127 75FFDE          477             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          478             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          479             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          480             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          481             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          482             mov     TL0,#0f9h;=0xf9; 
0139 75E680          483             mov     EIE1,#80h;=0x80;
                     484     
013C 75D480          485             mov     DAC0CN,#80h;=0x80;
013F 75D780          486             mov     DAC1CN,#80h;=0x80;
0142 75B167          487             mov     OSCXCN,#67h;=0x67;
                     488     
                     489      
                     490     
0145 E5B1            491     gener:     mov a, oscxcn
0147 B4E7FB          492                cjne a,#11100111b,gener
                     493                            
014A 75B288          494             mov     OSCICN,#88h;=0x84;
014D 75CA00          495         mov TMR2RLL,#0;=0;
0150 75CBD1          496         mov TMR2RLH,#0d1h;=0xd1;
                     497       
0153 D28E            498                     setb  TCON.6                    ;регистр управления
0155 D28C            499                      setb tcon.4
                     500     
0157 75EF00          501             mov     RSTSRC,#0;=00   ;//источники сброса 
                     502     
                     503             
015A 75E340          504          mov        XBR2,#40h
015D 75E10E          505              mov    XBR0,#0eh;06h;16h
0160 75F803          506             mov             SPI0CN,#03
0163 759D31          507             mov             spi0ckr,#31H;;;;;;;;#04
                     508     ;установка скорости
0166 759850          509                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          510                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          511                                             mov             CKCON,#00010000b;TIM=1
016F 758920          512                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE     9

0172 758840          513                                             mov             TCON,#01000000b;счетчик запущен
                     514     ;;;;;
0175 75D900          515                                             mov             PCA0MD,#00              ;PCA 
0178 75DA00          516                                             mov             PCA0CPM0,#00000000b;00000110b;01000
                             010b;
017B 75EA00          517                                             mov             PCA0CPL0,#00
017E 75FA80          518                                             mov             PCA0CPH0,#80h
0181 75D840          519                                             mov             PCA0CN,#40h
0184 75C800          520                                             mov             T2CON,#00
                     521     ;;;;;;
0187 7A50            522                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0189 7B2C            523                                             mov                     r3,#2ch
018B 120454          524                                             call            re4byte                 ;502ch 1 ba
                             it skor
018E E508            525                                             mov                     a,r8
0190 B40007          526                                             cjne            a,#00,yst19
0193 C213            527                                             clr                     bitv19                  ;57
                             .6
0195 758DF4          528                                             mov                     TH1,#244
0198 8008            529                                             jmp               yst1
019A 900000   F      530     yst19:          mov                     dptr,#teS19_2
019D D213            531                                             setb            bitv19                  ;19,2
019F 758DDC          532                                             mov                     TH1,#220
01A2                 533     yst1:
01A2 75E730          534                                             mov             EIE2,#30H;00110000
                     535                                     ;       mov             EIP2,#30H
01A5 75A880          536                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     537     ;ozu
01A8 E4              538                                             clr     a
01A9 7800            539                                             mov     r0,#00h 
01AB F6              540     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              541                                             inc     r0
01AD B87FFB          542                                             cjne    r0,#7fh,mecle
01B0 7880            543                                             mov     r0,#80h
01B2 F6              544     meff:                   mov     @r0,a 
01B3 F2              545                                             movx @r0,a
01B4 08              546                                             inc     r0
01B5 B8DFFA          547                             cjne    r0,#0dfh,meff
01B8 120000   F      548                             call    clmassix
                     549     ;обнулить внешнее озу 4кбайта
01BB 900000          550                                     mov                     dptr,#0
01BE E4              551     extcle: clr                     a
01BF F0              552                                     movx            @dptr,a
01C0 A3              553                                     inc                     dptr
01C1 E583            554                                     mov                     a,dph
01C3 B410F8          555                                     cjne            a,#10h,extcle
                     556     
01C6 7898            557                             mov             r0,#chinkor
01C8 7600            558                             mov             @r0,#0;1;
01CA 08              559                             inc             r0
01CB 7619            560                             mov             @r0,#19h;64h;0c8h;90h;
                     561                             ;;;;
01CD 7881            562                             mov             r0,#chavt
01CF 7601            563                             mov             @r0,#1
01D1 08              564                             inc             r0
01D2 7690            565                             mov             @r0,#90h
                     566     
01D4 78B2            567                                     mov             r0,#marker
01D6 76FF            568                                     mov             @r0,#0ffh
                     569                             ;mov            r0,#chind
                     570                             ;mov            @r0,#1
                     571                     
01D8 74FF            572                             mov             a,#0ffh
01DA F585            573                        mov          p5,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    10

01DC 799A            574                             mov             r1,#parT
01DE 7702            575                             mov             @r1,#2                  ;Tizm=1s
01E0 79AE            576                             mov             r1,#diap
01E2 7705            577                             mov             @r1,#5                  ;10-7a
01E4 753405          578                             mov             sadiap,#5
01E7 79AF            579                             mov             r1,#parN
01E9 7702            580                             mov             @r1,#2
01EB 7400            581                             mov             a,#00h
01ED F585            582                             mov             p5,a
01EF D204            583                             setb    bitizm
                     584     
01F1 799B            585                             mov             r1,#chbefore
01F3 7700            586                             mov             @r1,#0
                     587                             ;;;;;;
01F5 900000   F      588                             mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      589                             call    ldc_long
01FB 7890            590                             mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      591                             call    saver2
0200 7894            592                             mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      593                             call    saver2
0205 78A0            594                             mov             r0,#koefKD
0207 120000   F      595                             call    saver2
020A 78CF            596                             mov                     r0,#chbuf
020C 120000   F      597                             call    saver2
020F 900158          598                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            599                             mov             r1,#saven_bl
0214 E583            600                             mov             a,dph
0216 F7              601                                               mov           @r1,a
0217 09              602                                                     inc             r1
0218 E582            603                                                     mov             a,dpl
021A F7              604                                                     mov             @r1,a
                     605     
021B 900478          606                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            607                             mov             r1,#saven_bl2
0220 E583            608                             mov             a,dph
0222 F7              609                                               mov           @r1,a
0223 09              610                                                     inc             r1
0224 E582            611                                                     mov             a,dpl
0226 F7              612                                                     mov             @r1,a
0227 900798          613                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
022A 79C2            614                             mov             r1,#saven_bl3
022C E583            615                             mov             a,dph
022E F7              616                                               mov           @r1,a
022F 09              617                                                     inc             r1
0230 E582            618                                                     mov             a,dpl
0232 F7              619                                                     mov             @r1,a
0233 900AB8          620                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0236 79D9            621                             mov             r1,#saven_bl4
0238 E583            622                             mov             a,dph
023A F7              623                                               mov           @r1,a
023B 09              624                                                     inc             r1
023C E582            625                                                     mov             a,dpl
023E F7              626                                                     mov             @r1,a
023F 753801          627                             mov             nblok,#1                        ;номер введенного б
                             лока
0242 753701          628                             mov             nelem,#1
0245 78CD            629                             mov             r0,#interva
0247 7600            630                             mov             @r0,#0
0249 08              631                             inc             r0
024A 7601            632                             mov             @r0,#1
024C 7840            633                             mov             r0,#bufind
024E                 634     age2:
024E 76FD            635                             mov             @r0,#0fdh         ;погасить индикатор
0250 08              636                             inc             r0
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    11

0251 B84CFA          637                             cjne    r0,#bufind+12,age2              
0254 120000   F      638                             call    ind
0257 120000   F      639                             call    z_1s
                     640     
                     641                                     ;зажечь все лементы индикации
025A 7840            642                             mov             r0,#bufind
025C 7669            643     ageon:          mov             @r0,#69h;0feh;?
025E 08              644                             inc             r0
025F B84CFA          645                             cjne    r0,#bufind+12,ageon             
0262 120000   F      646                             call    ind
0265 120000   F      647                             call    z_1s            ;1sec
                     648     ;;;;;;;;;;;;;;;;
                     649                     
0268 120000   F      650                             call    z_15;z_1ms
026B 434B10          651                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     652     ;;;;;;;;;;;;;;;;;;;
026E 7C60            653                             mov             r4,#60h
0270 7D00            654                             mov             r5,#00         
0272 120000   F      655                             call    iniacp;инициализация acp
0275 120000   F      656                             call    loadUS          ;us 10-7 A
                     657                             
0278 C217            658     rebyte:         clr             bitoll
027A 3095FD          659                             jnb             p1.5,$
027D 2095FD          660                             jb              p1.5,$
                     661                             ;mov            a,P6            ;p6.4=0
                     662                             ;anl            a,#0efh
                     663                             ;mov            P6,a
                     664                             ;nop
                     665                             ;nop
                     666                                     
                     667                             ;mov            a,P6                    ;p6.4=1 
                     668                             ;orl            a,#10h
                     669                             ;mov            P6,a                        
0280 7411            670                             mov             a,#11h
0282 120000   F      671                             call    write
                     672                             ;чтение acp
0285 120000   F      673                             call    read    
0288 F578            674                             mov     reacp+1,A       ;старший байт 
028A 120000   F      675                             call    read    
028D F579            676                             mov     reacp+2,A       ;средний байт 
028F 120000   F      677                             call    read
0292 F57A            678                             mov     reacp+3,A               ;мл байт
                     679                        ;;;;;;;;;;;
0294 7878            680                        mov          r0,#reacp+1
0296 E6              681                        mov          a,@r0
0297 20E740          682                             jb              acc.7,znplus;
029A D200            683                             setb    bitznak
029C 4480            684                             orl             a,#80h  ;ост содерж яч 
029E F6              685                             mov             @r0,a
                     686                                     
029F 18              687     mmm:            dec             r0;,#reacp
02A0 76FF            688                             mov             @r0,#0ffh
02A2 803E            689                             jmp             goznak
                     690     
02A4 120000   F      691     mem10ms:        call            ind
02A7 80CF            692                                             jmp                     rebyte                     
                                  ;10ms
                     693     
02A9                 694     labelA: 
                     695                             ;разрешить ie6,ie7
02A9 E53E            696                             mov                     a,chkl+1                ;low
02AB 7009            697                             jnz                     no0key
02AD E53D            698                             mov                     a,chkl
02AF 7005            699                             jnz                     no0key
02B1 75E730          700                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02B4 800D            701                             jmp                     yes0key
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    12

                     702                        
02B6                 703     no0key: ;       mov             r1,#chkl 
                     704                                     ;       call    chdec
02B6 C3              705                                     clr                     c
02B7 E53E            706                                     mov                     a,chkl+1;chkl-1
02B9 9401            707                                     subb            a,#1
02BB F53E            708                                     mov                     chkl+1,a
02BD E53D            709                                     mov                     a,chkl
02BF 9400            710                                     subb            a,#0
02C1 F53D            711                                     mov                     chkl,a
                     712                             ;;;;;;;;;;;;
02C3                 713     yes0key:
02C3 2004B2          714                                             jb              bitizm,rebyte
                     715                              ;буфер 2 выдать на индикацию
02C6 E533            716                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02C8 700B            717                             jnz             nochind
02CA 753364          718                             mov             chind2,#100
02CD 120000   F      719                             call    ind
02D0 120000   F      720     yes0key1:       call    z_1ms;z_01s
                     721                             ;call   z_01s
                     722                             ;call   z_01s
02D3 80D4            723                             jmp             labelA
                     724     
02D5 14              725     nochind:        dec             a
02D6 F533            726                                             mov             chind2,a
02D8 80F6            727                                     jmp             yes0key1;labelA
                     728             
02DA C200            729     znplus:         clr     bitznak
02DC 547F            730                             anl             a,#7fh;fdh                      ;+
02DE F6              731                             mov             @r0,a
02DF 18              732                             dec             r0;,#reacp
02E0 7600            733                             mov             @r0,#00h
                     734                             
02E2                 735     goznak: 
                     736     ;;;;;;;;;;;;;
02E2 787A            737                             mov     r0,#reacp+3
02E4 E6              738                             mov             a,@r0
02E5 7F05            739                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02E7 C3              740     sdvig3:         clr             c
02E8 13              741                             rrc             a
02E9 DFFC            742                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02EB FA              743                             mov             r2,a    ;сохр байт
02EC 18              744                             dec             r0              ;       reacp+2
02ED E6              745                             mov             a,@r0
02EE C0E0            746                             push    acc
02F0 C3              747                             clr             c
02F1 7F03            748                             mov             r7,#3;2
02F3 C3              749     sdvig2:         clr             c
02F4 33              750                             rlc             a
02F5 DFFC            751                             djnz    r7,sdvig2 ;d12..d11      средний байт
02F7 4A              752                             orl             a,r2
02F8 F57A            753                             mov             reacp+3,a;сформ мл байт
02FA D0E0            754                             pop             acc
                     755                             
02FC 7F05            756                             mov             r7,#5;6
02FE C3              757     sdvig1:         clr             c
02FF 13              758                             rrc             a
0300 DFFC            759                             djnz    r7,sdvig1 ;d15,d14        ср байт
0302 FA              760                             mov             r2,a   ;сохр
0303 E578            761                             mov             a,reacp+1
0305 C0E0            762                             push    acc
                     763                     ;;      push    acc
0307 7F03            764                             mov             r7,#3;2
0309 C3              765     sdvig0:         clr             c
030A 33              766                             rlc             a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    13

030B DFFC            767                             djnz    r7,sdvig0 ;       d21..d16
030D 4A              768                             orl             a,r2
030E F579            769                             mov             reacp+2,a       ; сформ средний  байт
0310 D0E0            770                             pop             acc       ;reacp+1
                     771                             ;;;;;;;;;;;;;;
0312 20E70B          772                             jb              acc.7,sdvm
0315 C3              773                             clr             c
0316 7F05            774                             mov             r7,#5;6
0318 C3              775     sdvig4:         clr             c
0319 13              776                             rrc             a
031A DFFC            777                             djnz    r7,sdvig4 ;       d23,d22
031C F578            778                             mov             reacp+1,a
031E 8008            779                             jmp             readyacp;ankor;klmas
                     780     ;;;;;;;;;;;;                                    
0320 7F05            781     sdvm:           mov             r7,#5;6
0322 D3              782     sdvig6:         setb            c
0323 13              783                             rrc             a
0324 DFFC            784                             djnz    r7,sdvig6 ;       d23,d22
0326 F578            785                             mov             reacp+1,a
                     786                                                             
                     787     ; reacp..reacp+3-результат чтения асп(hex) 
                     788     ;;;;;;;;;
0328                 789     readyacp:
0328 7898            790                                             mov             r0,#chinkor
032A E6              791                             mov             a,@r0
032B 30E702          792                             jnb             acc.7,gopart
032E 8044            793                                     jmp             sumt2
                     794                     
0330                 795     gopart:
0330 789A            796                             mov             r0,#parT        ;параметр времени
0332 793F            797                             mov             r1,#chmasN
0334 B6013A          798                             cjne    @r0,#1,noparT1
                     799                             ;РЕЗ+РЕЗ
0337 7877            800                             mov             r0,#reacp
0339 120000   F      801                             call    resar2          ;reacp->r2..r5
033C 78B6            802                             mov             r0,#summa+3;rez_A+3
033E 120000   F      803                             call    ladd
0341 78B3            804                             mov             r0,#summa;rez_A
0343 120000   F      805                             call    saver2
0346 793F            806                              mov            r1,#chmasN
0348 7714            807                             mov             @r1,#20;10
034A 789B            808                             mov             r0,#chbefore
034C B6631E          809                             cjne    @r0,#99,nobef99
                     810                             ;РЕЗ/100
034F 900000   F      811                             MOV        DPTR,#ch100 
0352 120000   F      812     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0355 120000   F      813                             call    zdiv;divide
0358 7862            814                             mov             r0,#rez_A
035A 120000   F      815                             call    saver2          ;сумма 100 отсчетов /100
035D 78C5            816                             mov             r0,#Rez_del
035F 120000   F      817                             call    saver2  
                     818                        ;;;;;
0362 78B3            819                        mov          r0,#summa
0364 120000   F      820                        call         clear4
                     821     
0367 799B            822                             mov             r1,#chbefore
0369 7700            823                             mov             @r1,#0
036B 8070            824                             jmp             klmas           ;загр в массив скользящее ср
036D 06              825     nobef99:        inc             @r0                     ;chbefore
036E 020000   F      826                             jmp             rebyte;labelA;метка A
                     827     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     828     ;а потом уже располагаем  в скользящий массив  из n
                     829     
                     830     
                     831     
0371 B6021D          832     noparT1:        cjne    @r0,#2,noparT2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    14

                     833                             ;РЕЗ+РЕЗ
0374                 834     sumt2:
0374 7877            835                              mov            r0,#reacp
0376 120000   F      836                             call    resar2          ;reacp->r2..r5
0379 78B6            837                             mov             r0,#summa+3;rez_A+3
037B 120000   F      838                             call    ladd
037E 78B3            839                             mov             r0,#summa;rez_A
0380 120000   F      840                             call    saver2
0383 789B            841                             mov             r0,#chbefore
0385 793F            842                             mov             r1,#chmasN
0387 770A            843                             mov             @r1,#10
0389 B613E1          844                             cjne    @r0,#19,nobef99;9,nobef99
                     845                             ;РЕЗ/20
038C 900000   F      846                             MOV        DPTR,#ch20;ch10 
038F 80C1            847                             jmp             allsum
                     848                             ;;;;;;;
                     849                             
                     850     
0391 B6031D          851     noparT2:        cjne    @r0,#3,noparT3
                     852     
0394 7877            853                                                              mov            r0,#reacp
0396 120000   F      854                             call    resar2          ;reacp->r2..r5
0399 78B6            855                             mov             r0,#summa+3;rez_A+3
039B 120000   F      856                             call    ladd
039E 78B3            857                             mov             r0,#summa;rez_A
03A0 120000   F      858                             call    saver2
03A3 789B            859                             mov             r0,#chbefore
03A5 793F            860                             mov             r1,#chmasN
03A7 7704            861                             mov             @r1,#4                                  ;n=4
03A9 B609C1          862                             cjne    @r0,#9,nobef99;9,nobef99
                     863                             ;РЕЗ/10
03AC 900000   F      864                             MOV        DPTR,#ch10 
03AF 80A1            865                             jmp             allsum
                     866                             
03B1 B6041D          867     noparT3:        cjne    @r0,#4,noparT4
03B4                 868     aapar:          
03B4 7877            869              mov            r0,#reacp
03B6 120000   F      870                             call    resar2          ;reacp->r2..r5
03B9 78B6            871                             mov             r0,#summa+3;rez_A+3
03BB 120000   F      872                             call    ladd
03BE 78B3            873                             mov             r0,#summa;rez_A
03C0 120000   F      874                             call    saver2
03C3 789B            875                             mov             r0,#chbefore
03C5 793F            876                             mov             r1,#chmasN
03C7 7704            877                             mov             @r1,#4
03C9 B604A1          878                             cjne    @r0,#4,nobef99;9,nobef99
                     879                             ;РЕЗ/10
03CC 900000   F      880                             MOV        DPTR,#ch5
03CF 8081            881                             jmp             allsum
                     882     
                     883                     
03D1 7702            884     noparT4:   mov          @r1,#2          ;chmasN n=2
03D3 7877            885                             mov             r0,#reacp
03D5 120000   F      886                             call    resar2          ;reacp->r2..r5
03D8 7862            887                             mov             r0,#rez_A
03DA 120000   F      888                             call    saver2
                     889     ;загрузить А в массив из 2/10 значений
                     890     ;;;;;;;;;;;;;;;
03DD                 891     klmas:           
03DD 793F            892                             mov             r1,#chmasN
03DF B7021A          893                             cjne    @r1,#2,mas10
03E2 900100          894                             MOV        dptr,#MASS0
03E5 120000   F      895                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     896     
03E8 7862            897                             mov             r0,#rez_A
03EA 120000   F      898                             call    resar2          ;->r2..r5
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    15

03ED 900100          899                             mov                     dptr,#MASS0
03F0 120000   F      900                   call              saveIr2                 ; R2-R5 --> MAS0
                     901                     
03F3 900107          902                   MOV          dptr,#MASS1+3
03F6 120000   F      903                   CALL       addx
03F9 020000   F      904                       jmp           endsum
                     905     ;массив из 10-ти измерений
03FC B70A7D          906     mas10:                  cjne    @r1,#10,mas20
03FF 900120          907                                             mov                     dptr,#MASS8
0402 120000   F      908                     CALL            xCIKLWR         ;MASS8->MASS9
0405 90011C          909                                             mov                     dptr,#MASS7
0408 120000   F      910                     CALL            xCIKLWR         ;MASS7->MASS8
040B 900118          911                     MOV       dptr,#MASS6
040E 120000   F      912                     CALL       xCIKLWR         ; MASS6 --> MASS7
0411 900114          913                     MOV        dptr,#MASS5
                     914                    
0414 120000   F      915                    CALL        xCIKLWR        ; MASS5 --> MASS6
0417 900110          916                    MOV         dptr,#MASS4
                     917                    
041A 120000   F      918                    CALL        xCIKLWR        ; MASS4 --> MASS5
041D 90010C          919                             mov                     dptr,#MASS3
                     920     
0420 120000   F      921                    CALL             xCIKLWR         ;MASS3->MASS4
0423 900108          922                     MOV        dptr,#MASS2
                     923                    
0426 120000   F      924                    CALL        xCIKLWR         ; MASS2 --> MASS3
0429 900104          925                    MOV         dptr,#MASS1
                     926                     
042C 120000   F      927                   CALL         xCIKLWR        ; MASS1 --> MASS2
042F 900100          928                    MOV         dptr,#MASS0
                     929                   
0432 120000   F      930                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     931     
                     932                             
0435 7862            933                             mov             r0,#rez_A
0437 120000   F      934                             call    resar2          ;->r2..r5
                     935                                     ;call   aform
043A 900100          936                                     mov                     dptr,#MASS0
043D 120000   F      937                   call              saveIr2                 ; R2-R5 --> MAS0
                     938              
0440 900107          939                   MOV          dptr,#MASS1+3
0443 120000   F      940                   CALL       addx
0446 90010B          941                   MOV          dptr,#MASS2+3
0449 120000   F      942                   CALL       addx
044C 90010F          943                   MOV          dptr,#MASS3+3
044F 120000   F      944                  CALL        addx
0452 900113          945                   MOV       dptr,#MASS4+3
0455 120000   F      946                   call       addx
0458 900117          947                     MOV        dptr,#MASS5+3
045B 120000   F      948                  CALL        addx
045E 90011B          949                   MOV          dptr,#MASS6+3
0461 120000   F      950                   CALL       addx
0464 90011F          951                   MOV          dptr,#MASS7+3
0467 120000   F      952                  CALL        addx
046A 900123          953                  MOV        dptr,#MASS8+3
046D 120000   F      954                   call       addx
0470 900127          955                     MOV                     dptr,#MASS9+3
0473 120000   F      956                  call        addx
0476 020000   F      957                              jmp            endsum
                     958     
0479 020000   F      959     rmas4:          jmp                     mas4
                     960     ;массив из 20-ти измерений
047C B714FA          961     mas20:          cjne    @r1,#20,rmas4
047F 900148          962                                             mov                     dptr,#MASS18
0482 120000   F      963                     CALL            xCIKLWR         ;MASS18->MASS19
0485 900144          964                                             mov                     dptr,#MASS17
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    16

0488 120000   F      965                     CALL            xCIKLWR         ;MASS17->MASS18
048B 900140          966                     MOV       dptr,#MASS16
048E 120000   F      967                     CALL       xCIKLWR         ; MASS16 --> MASS17
0491 90013C          968                     MOV        dptr,#MASS15
                     969                    
0494 120000   F      970                    CALL        xCIKLWR        ; MASS15 --> MASS16
0497 900138          971                    MOV         dptr,#MASS14
                     972                    
049A 120000   F      973                    CALL        xCIKLWR        ; MASS14 --> MASS15
049D 900134          974                             mov                     dptr,#MASS13
                     975     
04A0 120000   F      976                    CALL             xCIKLWR         ;MASS13->MASS14
04A3 900130          977                     MOV        dptr,#MASS12
                     978                    
04A6 120000   F      979                    CALL        xCIKLWR         ; MASS12 --> MASS13
04A9 90012C          980                    MOV         dptr,#MASS11
                     981                     
04AC 120000   F      982                   CALL         xCIKLWR        ; MASS11 --> MASS12
04AF 900128          983                    MOV         dptr,#MASS10
                     984                   
04B2 120000   F      985                    CALL        xCIKLWR        ; MASS10 --> MASS11
04B5 900124          986                                      MOV       dptr,#MASS9
04B8 120000   F      987                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     988     
04BB 900120          989                                             mov                     dptr,#MASS8
04BE 120000   F      990                     CALL            xCIKLWR         ;MASS8->MASS9
04C1 90011C          991                                             mov                     dptr,#MASS7
04C4 120000   F      992                     CALL            xCIKLWR         ;MASS7->MASS8
04C7 900118          993                     MOV       dptr,#MASS6
04CA 120000   F      994                     CALL       xCIKLWR         ; MASS6 --> MASS7
04CD 900114          995                     MOV        dptr,#MASS5
                     996                    
04D0 120000   F      997                    CALL        xCIKLWR        ; MASS5 --> MASS6
04D3 900110          998                    MOV         dptr,#MASS4
                     999                    
04D6 120000   F     1000                    CALL        xCIKLWR        ; MASS4 --> MASS5
04D9 90010C         1001                             mov                     dptr,#MASS3
                    1002     
04DC 120000   F     1003                    CALL             xCIKLWR         ;MASS3->MASS4
04DF 900108         1004                     MOV        dptr,#MASS2
                    1005                    
04E2 120000   F     1006                    CALL        xCIKLWR         ; MASS2 --> MASS3
04E5 900104         1007                    MOV         dptr,#MASS1
                    1008                     
04E8 120000   F     1009                   CALL         xCIKLWR        ; MASS1 --> MASS2
04EB 900100         1010                    MOV         dptr,#MASS0
                    1011                   
04EE 120000   F     1012                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1013     
                    1014                             
04F1 7862           1015                             mov             r0,#rez_A
04F3 120000   F     1016                             call    resar2          ;->r2..r5
                    1017                                     ;call   aform
04F6 900100         1018                                     mov                     dptr,#MASS0
04F9 120000   F     1019                   call              saveIr2                 ; R2-R5 --> MAS0
                    1020              
04FC 900107         1021                   MOV          dptr,#MASS1+3
04FF 120000   F     1022                   CALL       addx
0502 90010B         1023                   MOV          dptr,#MASS2+3
0505 120000   F     1024                   CALL       addx
0508 90010F         1025                   MOV          dptr,#MASS3+3
050B 120000   F     1026                  CALL        addx
050E 900113         1027                   MOV       dptr,#MASS4+3
0511 120000   F     1028                   call       addx
0514 900117         1029                     MOV        dptr,#MASS5+3
0517 120000   F     1030                  CALL        addx
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    17

051A 90011B         1031                   MOV          dptr,#MASS6+3
051D 120000   F     1032                   CALL       addx
0520 90011F         1033                   MOV          dptr,#MASS7+3
0523 120000   F     1034                  CALL        addx
0526 900123         1035                  MOV        dptr,#MASS8+3
0529 120000   F     1036                   call       addx
052C 900127         1037                     MOV                     dptr,#MASS9+3
052F 120000   F     1038                  call        addx
                    1039     ;27
0532 90012B         1040                                     MOV        dptr,#MASS10+3
0535 120000   F     1041                   CALL       addx
0538 90012F         1042                                     MOV        dptr,#MASS11+3
053B 120000   F     1043                   CALL       addx
053E 900133         1044                   MOV          dptr,#MASS12+3
0541 120000   F     1045                   CALL       addx
0544 900137         1046                   MOV          dptr,#MASS13+3
0547 120000   F     1047                  CALL        addx
054A 90013B         1048                   MOV       dptr,#MASS14+3
054D 120000   F     1049                   call       addx
0550 90013F         1050                                     MOV        dptr,#MASS15+3
0553 120000   F     1051                     CALL     addx
0556 900143         1052                   MOV          dptr,#MASS16+3
0559 120000   F     1053                   CALL       addx
055C 900147         1054                   MOV          dptr,#MASS17+3
055F 120000   F     1055                  CALL        addx
0562 90014B         1056                  MOV        dptr,#MASS18+3
0565 120000   F     1057                   call       addx
0568 90014F         1058                                     MOV                     dptr,#MASS19+3
056B 120000   F     1059                  call        addx
056E 802F           1060                                     jmp             endsum
                    1061     ;массив из 4х измерений
0570                1062     mas4:                   
0570 900108         1063                                             MOV        dptr,#MASS2
0573 120000   F     1064                    CALL        xCIKLWR         ; MASS2 --> MASS3
0576 900104         1065                    MOV         dptr,#MASS1
0579 120000   F     1066                    CALL        xCIKLWR        ; MASS1 --> MASS2
057C 900100         1067                    MOV         dptr,#MASS0
057F 120000   F     1068                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1069     
                    1070                             
0582 7862           1071                             mov             r0,#rez_A
0584 120000   F     1072                             call    resar2          ;->r2..r5
                    1073                                     ;call   aform
0587 900100         1074                                     mov                     dptr,#MASS0
058A 120000   F     1075                   call              saveIr2                 ; R2-R5 --> MAS0
                    1076              
058D 900107         1077                   MOV          dptr,#MASS1+3
0590 120000   F     1078                   CALL       addx
0593 90010B         1079                   MOV          dptr,#MASS2+3
0596 120000   F     1080                   CALL       addx
0599 90010F         1081                   MOV          dptr,#MASS3+3
059C 120000   F     1082                  CALL        addx
                    1083                  
                    1084             ;23.03          
059F                1085     endsum:
059F 786E           1086                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
05A1 06             1087                                     inc             @r0
05A2 E6             1088                                     mov             a,@r0   
05A3 200105         1089                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1090                                     
05A6 B53F31         1091                                     cjne    a,chmasN,masx5
05A9 D201           1092                                     setb    bitmas                  ;массив заполнен
05AB 853F6E         1093     masfull:                mov             chmas,chmasN
05AE 783F           1094                                     mov             r0,#chmasN
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    18

05B0 E6             1095                                     mov             a,@r0
                    1096     ;masfull:
05B1 B40208         1097                                     cjne    a,#2,nochn2
05B4 900000   F     1098                                     MOV        DPTR,#ch2;10 
05B7 120000   F     1099                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05BA 8028           1100                                     jmp             mas5div
                    1101     
05BC B40A08         1102     nochn2:         cjne    a,#10,nochn10
05BF 900000   F     1103                                                     MOV        DPTR,#ch10 
05C2 120000   F     1104                                     CALL   ldc_ltemp                 ; ltemp <-- 10
05C5 801D           1105                                     jmp             mas5div
                    1106     
05C7 B41408         1107     nochn10:        cjne    a,#20,nochn20
05CA 900000   F     1108                                                     MOV        DPTR,#ch20 
05CD 120000   F     1109                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05D0 8012           1110                                     jmp             mas5div
                    1111     
05D2 900000   F     1112     nochn20:        MOV        DPTR,#ch4 
05D5 120000   F     1113                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05D8 800A           1114                                     jmp             mas5div
                    1115     
05DA 856E0B         1116     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05DD E4             1117                                     clr     a
05DE F50A           1118                                     mov     ltemp+2,a
05E0 F509           1119                                     mov     ltemp+1,a
05E2 F508           1120                                     mov     ltemp,a
                    1121     
05E4                1122     mas5div:
05E4 120000   F     1123                                     CALL       zdiv;divide                           ; R2-R5 =
                    1124                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1125     
                    1126                             
                    1127      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1128     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1129     ;получен результат 3 байта и знак
05E7 7866           1130                             mov             r0,#rez_A1
05E9 120000   F     1131                             call    saver2           ;сохр среднее по массиву
                    1132     ;;8.11.06                       mov             chmasN,#0
                    1133      ;;;;;;;;;;;;
                    1134      ;;;;;;;;;;;;
05EC C3             1135                             clr             c
05ED 799A           1136                             mov             r1,#parT
05EF 7402           1137                             mov             a,#2
05F1 97             1138                             subb    a,@r1
05F2 501D           1139                             jnc             ankor           ;T<3
                    1140                             ;A-=РЕЗ1                                ;T>3
05F4 120402         1141                             call    altof                   ;r2..r5->float
05F7 785E           1142                             mov             r0,#rez_Ame
05F9 120000   F     1143                             call    saver2
                    1144                             ;;;;
05FC 7890           1145                             mov             r0,#koefKp;->r8..r11
05FE EA             1146                             mov             a,r2
05FF 30E702         1147                             jnb             acc.7,nminus3
0602 7894           1148                             mov             r0,#koefKm;->r8..r11
0604 120000   F     1149     nminus3:                call    resar8
0607 120203         1150                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
060A 785E           1151                             mov             r0,#rez_Ame
060C 120000   F     1152                             call    saver2
060F 8021           1153                             jmp             gotoKD
                    1154     
0611                1155     ankor:  
0611 7898           1156                             mov             r0,#chinkor
0613 E6             1157                             mov             a,@r0
0614 30E703         1158                             jnb             acc.7,nokorr
                    1159                             ;коррекция 0
0617 020000   F     1160                             jmp             kornul
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    19

061A                1161     nokorr: 
                    1162                             ;mov            r10,#00         ;       chavt
                    1163                             ;mov            r11,#00h
061A 7881           1164                             mov              r0,#chavt      
061C E6             1165                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
061D 30E737         1166                             jnb             acc.7,nonulavt;jnz              nonulavt        
0620 750A00         1167                             mov             r10,#0;1;00;02          
0623 750BC8         1168                             mov             r11,#0c8h;90h;0c8h;58h
0626 7898           1169                             mov             r0,#chinkor
0628 120000   F     1170                             call    chcmp
062B 7045           1171                             jnz             noavk
                    1172                             ;автокалибровка
062D 020000   F     1173                             jmp             autoka;noavk;
                    1174     
0630 8079           1175     rafterK:                jmp             afterK
                    1176     ;;;;;;;;;;
0632 C3             1177      gotoKD:                clr             c
0633 799A           1178                             mov             r1,#parT
0635 7404           1179                             mov             a,#4
0637 97             1180                             subb    a,@r1
0638 50F6           1181                             jnc             rafterK         ;T<5
                    1182                             ;A1-=A- *KD                     ;T>5
                    1183                             ;call           findkoef                                ;r2,r3-hex
                    1184                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1185                                     
                    1186                             ;       call    altof                   ;r2..r5->float
                    1187                             ;       mov     dptr,#CHtho;100000
                    1188                             ;       call    ldc_ltemp                       ;r8..r11
                    1189                             ;       call    fldiv
                    1190                             ;       call    move28
                    1191                             
063A 785E           1192                             mov             r0,#rez_Ame;->r2..r5   ???????????/
063C 120000   F     1193                             call    resar2
                    1194                                     ;call   flmul
063F 120343         1195                             call    ftol                    ;float->int
0642 7866           1196                             mov             r0,#rez_A1
0644 120000   F     1197                             call    saver2
0647 786A           1198                             mov             r0,#rez_A0;->r8..r11 hex
0649 120000   F     1199                             call    resar8
064C 120000   F     1200                             call    lsub            ;A3=A-1-A0
064F 789C           1201                             mov             r0,#rez_A3
0651 120000   F     1202                             call    saver2
0654 020000   F     1203                             jmp             labelB  
                    1204      ;;;;;;;;;;; 9.11.06
0657 789A           1205     nonulavt:        mov            r0,#parT
0659 E6             1206                             mov             a,@r0
065A 6401           1207                             xrl             a,#01
065C 700F           1208                             jnz             avtdec1
065E 7982           1209                             mov             r1,#chavt+1     ;T=1 chavt-10
0660 120000   F     1210                             call    tenmin
0663 7999           1211     kordec10:       mov             r1,#chinkor+1
0665 120000   F     1212                             call    tenmin
0668 801E           1213                             jmp             rezmul
                    1214     
066A 020000   F     1215     rmo220:         jmp             mo220
                    1216     
066D 7981           1217     avtdec1:        mov             r1,#chavt       
066F 120000   F     1218                             call    chdec           ;chavt-1
                    1219     ;                       jmp             kordec1;rezmul
0672 789A           1220     noavk:          mov             r0,#parT
0674 E6             1221                             mov             a,@r0
0675 6401           1222                             xrl             a,#01
0677 700A           1223                             jnz             kordec1
                    1224                             ;T=1 chinkor-10
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    20

0679 7999           1225                     mov             r1,#chinkor+1
067B 120000   F     1226                             call    tenmin
067E 8008           1227                             jmp             rezmul
                    1228     
0680 020000   F     1229     rnotestizm:             jmp                     notestizm
0683 7998           1230     kordec1:        mov             r1,#chinkor
0685 120000   F     1231                             call    chdec           ; chinkor-1
                    1232                        ;9.11.06
                    1233                             ;;;;;;;;;;;;;;
                    1234                             ;;;;;;;;;;;;;
                    1235     ;(РЕЗ1-АN)*K
0688                1236     rezmul:
0688 7866           1237                             mov             r0,#rez_A1;->r2..r5
068A 120000   F     1238                             call    resar2
068D 120402         1239                             call    altof   ;r2..r5->float  6.06    
0690 7884           1240                             mov             r0,#kor0_AN;->r8..r11
0692 120000   F     1241                             call    resar8
0695 1201D1         1242                             call    flsub
0698 7890           1243                             mov             r0,#koefKp;->r8..r11
069A EA             1244                             mov             a,r2
069B 30E702         1245                             jnb             acc.7,nminus
                    1246                             ;jnb            bitznak,nminus
                    1247                     
069E 7894           1248                             mov             r0,#koefKm;->r8..r11
06A0 120000   F     1249     nminus:         call    resar8
06A3 120203         1250                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
06A6 785E           1251                             mov             r0,#rez_Ame
06A8 120000   F     1252                             call    saver2
                    1253      
06AB                1254     afterK:                 
                    1255     ;;;;;;;;;;;;;;
06AB EA             1256                                     mov             a,r2
06AC 547F           1257                                     anl             a,#7fh
06AE FA             1258                                     mov             r2,a
06AF 900000   F     1259                                     mov     dptr,#ch_250;220;220000
06B2 120000   F     1260                                     call    ldc_ltemp                       ;r8..r11=8
06B5 1201D6         1261                                     call    flcmp
06B8 50B0           1262                                     jnc             rmo220          ;A>220000
                    1263                                     ;;;;;;;;;
06BA 3015C3         1264                                     jnb                     biteizm,rnotestizm
06BD 78B1           1265                                     mov                     r0,#vichR
06BF B62155         1266                                     cjne            @r0,#21h,note21
06C2 7A50           1267                                     mov                     r2,#50h                 ;-11a
06C4 7B18           1268                                     mov                     r3,#18h                 ;k8
06C6 12046C         1269                                     call            rebyte2                         ;r2..r5- he
                             x
06C9 120402         1270                                     call            altof                   ;r2..r5->float
06CC C002           1271                                     push            rr2
06CE C003           1272                                     push            rr3
06D0 C004           1273                                     push            rr4
06D2 C005           1274                                     push            rr5
06D4 7A50           1275                                     mov                     r2,#50h                 ;k10
06D6 7B20           1276                                     mov                     r3,#20h
06D8 12046C         1277     re11_7: call            rebyte2                 ;r2..r5
06DB 120402         1278                                     call            altof                   ;r2..r5->float
06DE 120000   F     1279                                     call            move28
06E1 D005           1280                                     pop                     rr5
06E3 D004           1281                                     pop                     rr4
06E5 D003           1282                                     pop                     rr3
06E7 D002           1283                                     pop                     rr2
06E9 1202B7         1284                                     call            fldiv
                    1285                             ;       mov                     dptr,#ch_10
                    1286                             ;       call            ldc_ltemp                       ;r8..r11
                    1287                             ;       call            flmul
                    1288                                     ;;;;;2.02.07
06EC C002           1289                                     push            rr2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    21

06EE C003           1290                                     push            rr3
06F0 C004           1291                                     push            rr4
06F2 C005           1292                                     push            rr5
06F4 7A50           1293                                     mov                     r2,#50h                 ;-11a
06F6 7B2C           1294                                     mov                     r3,#2ch                 ;Km
06F8 12046C         1295                                     call            rebyte2                         ;r2..r5- he
                             x
06FB 120402         1296                                     call            altof                   ;r2..r5->float
06FE 120000   F     1297                                     call            move28
0701 D005           1298                                     pop                     rr5
0703 D004           1299                                     pop                     rr4
0705 D003           1300                                     pop                     rr3
0707 D002           1301                                     pop                     rr2
0709 120203         1302                                     call            flmul                           ;*Km
070C 900000   F     1303                                     mov     dptr,#CHtho;100000
070F 120000   F     1304                                     call    ldc_ltemp                       ;r8..r11=8
0712 1202B7         1305                                     call    fldiv
                    1306                                     ;;;;;
0715 8050           1307                                     jmp                     temul   
0717 B62218         1308     note21: cjne            @r0,#22h,note22
071A 7A50           1309                                     mov                     r2,#50h                 ;-09a
071C 7B10           1310                                     mov                     r3,#10h                 ;k6
071E 12046C         1311                                     call            rebyte2                         ;r2..r5- he
                             x
0721 120402         1312                                     call            altof                   ;r2..r5->float
0724 C002           1313                                     push            rr2
0726 C003           1314                                     push            rr3
0728 C004           1315                                     push            rr4
072A C005           1316                                     push            rr5
072C 7A50           1317                                     mov                     r2,#50h                 ;k8
072E 7B18           1318                                     mov                     r3,#18h
0730 80A6           1319                                     jmp                     re11_7
0732 7A50           1320     note22: mov                     r2,#50h                 ;-7a
0734 7B08           1321                                     mov                     r3,#08h                 ;k4
0736 12046C         1322                                     call            rebyte2                         ;r2..r5- he
                             x
0739 120402         1323                                     call            altof                   ;r2..r5->float
073C C002           1324                                     push            rr2
073E C003           1325                                     push            rr3
0740 C004           1326                                     push            rr4
0742 C005           1327                                     push            rr5
0744 7A50           1328                                     mov                     r2,#50h                 ;k6
0746 7B10           1329                                     mov                     r3,#10h
0748 808E           1330                                     jmp                     re11_7  
                    1331                                     ;;;;;;;;;
074A                1332     notestizm:
074A 301208         1333                                     jnb             bitklb,komulpz
074D 900000   F     1334                                     mov     dptr,#chk;100000
0750 120000   F     1335                                     call    ldc_long                        ;r2..r5
0753 8006           1336                                     jmp             komul
0755 120000   F     1337     komulpz:call            findkoef                                ;r2,r3-hex
0758 12046C         1338                                     call            rebyte2                         ;r2..r5- he
                             x
                    1339                                     
075B 120402         1340     komul:  call    altof                   ;r2..r5->float
075E 900000   F     1341                                     mov     dptr,#CHtho;100000
0761 120000   F     1342                             call    ldc_ltemp                       ;r8..r11=8
0764 1202B7         1343                                     call    fldiv
0767 120000   F     1344     temul:                          call    move28
076A 785E           1345                                     mov             r0,#rez_Ame
076C 120000   F     1346                                     call    resar2
                    1347                     
076F 120203         1348                                     call    flmul     ;A1-=A-*KD  fl
                    1349                                     
0772 120343         1350                                     call    ftol                    ;float->int
0775 7866           1351                                     mov             r0,#rez_A1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    22

0777 120000   F     1352                                     call    saver2
077A 120402         1353                                     call    altof                   ;r2..r5->float
077D EA             1354                                     mov             a,r2
077E 547F           1355                                     anl             a,#7fh
0780 FA             1356                                     mov             r2,a
0781 900000   F     1357                                     mov     dptr,#ch_220;200;200000
0784 120000   F     1358                                     call    ldc_ltemp                       ;r8..r11=8
0787 1201D6         1359                                     call    flcmp
078A 502D           1360                                     jnc             rrmo220         ;A>200000
                    1361                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1362                             ;       jb              bitavp,yesavp
078C 301808         1363                                     jnb             knizm,goA2
078F 300602         1364                                     jnb             bitvi11,qu_avp
0792 8003           1365                                     jmp             goA2
0794 20052F         1366     qu_avp:                 jb              bitavp,yesavp
0797                1367     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0797                1368     goA2:                    ;A2=A1-
0797 7866           1369                                      mov            r0,#rez_A1
0799 120000   F     1370                                     call    resar2
079C 787B           1371                                     mov             r0,#rez_A2
079E 120000   F     1372                                     call    saver2
07A1                1373     goA3A2:                  ;A3=A2-A0
07A1 786A           1374                                       mov           r0,#rez_A0
07A3 120000   F     1375                                     call    resar8
07A6 120000   F     1376                                     call    lsub
07A9 789C           1377                                     mov             r0,#rez_A3
07AB 120000   F     1378                                     call    saver2
                    1379                                     ;;;;;;
07AE 200660         1380                                     jb              bitvi11,yesvich
07B1                1381     goonin:            ;jmp         goonind;indA3;8.11.06
07B1 78AC           1382                                     mov             r0,#chind
07B3 B60006         1383                                     cjne    @r0,#0,rnochi0
07B6 020000   F     1384                                     jmp             goonind;indA3
                    1385     
07B9 020000   F     1386     rrmo220:                jmp             mo220
07BC 020000   F     1387     rnochi0:                jmp             nochi0
07BF 7866           1388     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07C1 120000   F     1389                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07C4 80D1           1390                                             jmp             goA2
                    1391     ;;;;;;;;;;;;;;;;
07C6 EA             1392     yesavp:                 mov             a,r2
07C7 547F           1393                                     anl             a,#7fh
07C9 FA             1394                                     mov             r2,a
07CA 900000   F     1395                                     mov     dptr,#ch_10th;10000
07CD 120000   F     1396                                     call    ldc_ltemp                       ;r8..r11=8
07D0 1201D6         1397                                     call    flcmp
07D3 50C2           1398                                     jnc             noavp           ;A>10000        
07D5 78AE           1399                                     mov             r0,#diap                ;10-11
07D7 B60902         1400                                     cjne    @r0,#9,avpgo
07DA 80BB           1401                                     jmp             noavp
07DC                1402     avpgo:                  
07DC 06             1403                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07DD B60A01         1404                                     cjne    @r0,#0ah,clmasv
07E0 16             1405                                     dec             @r0
07E1                1406     clmasv:         ;сбросить массив
07E1 120000   F     1407                             call    loadUS
                    1408                             ;call   louizm
07E4 120000   F     1409                             call     clmassix
07E7 78B3           1410                                     mov             r0,#summa
07E9 120000   F     1411                                     call    clear4
07EC 786A           1412                                     mov             r0,#rez_A0
07EE 120000   F     1413                                     call    clear4
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    23

07F1 C20F           1414                                     clr             bitnul
07F3 D207           1415                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07F5 80BA           1416                                jmp     goonin
                    1417     
07F7 D00B           1418     erra01:         pop                     r11
07F9 D00A           1419                                     pop                     r10
07FB D009           1420                                     pop                     r9
07FD D008           1421                                     pop                     r8
07FF C214           1422                                     clr             bitvich
0801 C206           1423                                     clr             bitvi11
0803 753934         1424                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
0806 120000   F     1425                                             call            error
0809 120000   F     1426                                             call            ind
080C 120000   F     1427                                             call            z_1s
080F 80A0           1428                                             jmp             goonin
                    1429     
                    1430     
0811                1431     yesvich:        
                    1432                     ;                       mov             r0,#konstB
                    1433                     ;               call    resar2
                    1434                     ;               call    move28
0811 789C           1435                                     mov             r0,#rez_A3;A1
0813 120000   F     1436                                     call    resar2                          ;HEX
                    1437                                     
0816 120402         1438                                     call            altof                   ;r2..r5->float
0819 EA             1439                                     mov             a,r2                    ;модуль
081A 547F           1440                                     anl             a,#7fh
081C FA             1441                                     mov             r2,a
                    1442                     ;               call            fladd                           ;A1+B
                    1443                                     
081D 900000   F     1444                                     mov     dptr,#CH_500;
0820 120000   F     1445                                     call    ldc_ltemp                       ;r8..r11
0823 1201D6         1446                                     call    flcmp
0826 407E           1447                                     jc                      mo500R;error <500 >22000
0828 900000   F     1448                                     mov     dptr,#CH_22T;
082B 120000   F     1449                                     call    ldc_ltemp                       ;r8..r11
082E 1201D6         1450                                     call    flcmp
0831 507F           1451                                     jnc             mo500I          ;error
                    1452                                     ;;;;;;;;;;;;
0833 120000   F     1453                                     call            move28
0836 C008           1454                                     push            r8
0838 C009           1455                                     push            r9
083A C00A           1456                                     push            r10
083C C00B           1457                                     push            r11
083E 78BC           1458                                     mov             r0,#konstA
0840 120000   F     1459                                     call    resar2
0843 900000   F     1460                                     mov                     dptr,#ch0
0846 120000   F     1461                                     call            ldc_ltemp
0849 1201D6         1462                                     call            flcmp
084C 60A9           1463                                     jz              erra01
084E 900000   F     1464                                     mov             dptr,#CH_B
0851 120000   F     1465                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0854 120203         1466                                     call            flmul                           ;A*10-7
0857 D00B           1467                                     pop                     r11
0859 D00A           1468                                     pop                     r10
085B D009           1469                                     pop                     r9
085D D008           1470                                     pop                     r8
085F 1202B7         1471                                     call            fldiv                   ;результат R
0862 78C9           1472                                     mov                     r0,#rez_R
0864 120000   F     1473                                     call            saver2
0867 120343         1474                                     call            ftol                    ;float->hex
                    1475                                     ;;;;;;;;;;
086A 784F           1476                                             mov             r0,#abin
086C 120000   F     1477                                             call    saver2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    24

                    1478     ;;;;;;;;
086F 7840           1479                                                     mov             r0,#bufind
0871                1480     age9:
0871 7620           1481                             mov             @r0,#" "          ;погасить индикатор
0873 08             1482                             inc             r0
0874 B84BFA         1483                             cjne    r0,#bufind+11,age9
                    1484                                             
0877 78C9           1485                                             mov             r0,#rez_R
0879 120000   F     1486                                             call            resar2
                    1487     ;;;;;;;;;;
087C 900000   F     1488                                     mov             dptr,#CH_fl
087F 120000   F     1489                                     CALL   ldc_ltemp
0882 1202B7         1490                                     call            fldiv
                    1491     
0885 78B8           1492                                     mov             r0,#work                ;степень +
0887 7600           1493                                     mov             @r0,#0
0889 78B9           1494                                     mov             r0,#work+1;степень -
088B 7600           1495                                     mov             @r0,#0
088D 900000   F     1496     compa1: mov     dptr,#ch_1;
0890 120000   F     1497                                     call    ldc_ltemp                       ;r8..r11
0893 1201D6         1498                                     call    flcmp
0896 4026           1499                                     jc              equ0            ;<1
0898 78B8           1500                                     mov             r0,#work                        ;степень +
089A 06             1501                                     inc             @r0
089B 900000   F     1502                                     mov             dptr,#ch_10;
089E 120000   F     1503                                     call    ldc_ltemp                       ;r8..r11
08A1 1202B7         1504                                     call            fldiv
08A4 80E7           1505                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1506                                     ;;;;;;;;;;;;;;;;;;;
08A6 900000   F     1507     mo500R: mov             dptr,#teOLR
08A9 120000   F     1508                               call          lotext           
08AC 120000   F     1509                                     call            ind
08AF 020000   F     1510                                     jmp                     nobavp;nobitizm
08B2 900000   F     1511     mo500I: mov             dptr,#teOLI
08B5 120000   F     1512                               call          lotext           
08B8 120000   F     1513                                     call            ind
08BB 020000   F     1514                                     jmp                     nobavp;nobitizm
08BE                1515     equ0:           ;;;;;   call            ftol                    ;float->int
08BE 78B8           1516                                     mov             r0,#work                ;степень +
08C0 B60019         1517                                     cjne    @r0,#0,equ00
                    1518                                     
08C3 900000   F     1519     compa2: mov     dptr,#ch_1;
08C6 120000   F     1520                                     call    ldc_ltemp                       ;r8..r11
08C9 1201D6         1521                                     call    flcmp
08CC 500E           1522                                     jnc             equ00           ;>1
08CE 78B9           1523                                     mov             r0,#work+1                      ;степень -
08D0 16             1524                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08D1 900000   F     1525                                     mov             dptr,#ch_10;
08D4 120000   F     1526                                     call    ldc_ltemp                       ;r8..r11
08D7 120203         1527                                     call            flmul
08DA 80E7           1528                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1529     
                    1530     
08DC                1531     equ00:          
08DC 7853           1532                                                     mov             r0,#adec
08DE 7952           1533                                             mov             r1,#abin+3      ;hex->10
08E0 120000   F     1534                                             call    bindec
                    1535     
                    1536                                                     ;если степень полож убирать младший байт
                    1537                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1538                                                     ;число в bufind..bufind+5
08E3 78B8           1539                                             mov             r0,#work
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    25

08E5 B60021         1540                                             cjne    @r0,#0,outr
08E8 08             1541                                             inc             r0                      ;work+1
08E9 B6FF05         1542                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08EC 06             1543                                             inc                     @r0;!!!!!!!!!?
08ED 785B           1544                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08EF 8003           1545                                             jmp                     bufr30
                    1546                                             ;;;;;;;;;;;;;;
08F1 06             1547     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08F2 785C           1548                                                     mov             r0,#adec+9
08F4 7945           1549     bufr30:         mov             r1,#bufind+5;6
08F6 7F05           1550                                             mov             r7,#5;7
08F8 E6             1551     bufr2:                          mov             a,@r0
08F9 2430           1552                                             add             a,#30h
08FB F7             1553                                             mov             @r1,a
08FC 19             1554                                             dec             r1
08FD 18             1555                                             dec             r0
08FE DFF8           1556                                             djnz    r7,bufr2
                    1557     
0900 784F           1558                                             mov             r0,#abin
0902 120000   F     1559                                             call            clear4
0905 78B9           1560                                             mov             r0,#work+1
0907 801C           1561                                     jmp             outr5
                    1562     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
0909 785C           1563     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
090B C3             1564                                             clr             c
090C 79B8           1565                                             mov             r1,#work
090E E8             1566                                             mov             a,r0
090F 14             1567                                             dec             a                                  
                                  ;n-1
0910 97             1568                                             subb    a,@r1
0911 F8             1569                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0912 7945           1570                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0914 7F05           1571                                             mov             r7,#5;7
0916 E6             1572     bufr:                           mov             a,@r0
0917 2430           1573                                             add             a,#30h
0919 F7             1574                                             mov             @r1,a
091A 19             1575                                             dec             r1
091B 18             1576                                             dec             r0
091C DFF8           1577                                             djnz    r7,bufr
                    1578     
091E 784F           1579                                             mov             r0,#abin
0920 120000   F     1580                                             call            clear4
0923 78B8           1581                                     mov             r0,#work
0925 E6             1582     outr5:                  mov             a,@r0
0926 F552           1583                                             mov             abin+3,a
                    1584                                                                     ;n(hex)->abin
0928 120000   F     1585                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
092B 2552           1586                                             add             a,abin+3
092D F552           1587                                             mov             abin+3,a
092F 7853           1588                                             mov             r0,#adec
0931 7952           1589                                             mov             r1,#abin+3      ;hex->10
0933 120000   F     1590                                             call    bindec
0936 855C48         1591                                             mov             bufind+8,adec+9
0939 855B47         1592                                             mov             bufind+7,adec+8
093C 754966         1593                                             mov             bufind+9,#66h
093F 020000   F     1594                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1595                                             
                    1596                                     ;;;;;;;;;;;;;;;;;;;;;
                    1597     ;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    26

                    1598     
0942 300508         1599     mo220:             jnb          bitavp,indoll
0945 301805         1600                                jnb          knizm,indoll;bitizm,indoll
0948 78AE           1601                                     mov             r0,#diap
094A B6000E         1602                                     cjne    @r0,#0,nodi2
                    1603                                ;10-2
094D 300408         1604     indoll:         jnb             bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,па
                             м,вычR
0950 900000   F     1605                                             mov             dptr,#teOLL;OLL
0953 120000   F     1606                                             call    lotext
0956 D217           1607                                             setb    bitoll
0958 020000   F     1608     goonin1:                jmp             goonin  
                    1609     
095B 16             1610     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1611     
095C B6FF01         1612                                     cjne    @r0,#0ffh,nodi9
095F 06             1613                                     inc             @r0
                    1614     
0960 120000   F     1615     nodi9:          call    loadUS
                    1616                                     ;call   louizm
                    1617                                     ;сбросить массив
0963 120000   F     1618                                     call     clmassix
0966 78B3           1619                                     mov             r0,#summa
0968 120000   F     1620                                     call    clear4
096B 786A           1621                                     mov             r0,#rez_A0
096D 120000   F     1622                                     call    clear4
0970 C20F           1623                                     clr             bitnul  
0972 D207           1624                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0974 020000   F     1625                                jmp     goonin
                    1626     
0977 16             1627     nochi0:                 dec             @r0                     ;СТИ-1
0978 020000   F     1628                                     jmp             labelB  
                    1629     
                    1630             
                    1631     ;;;;;;;;;;;;;;;
                    1632     
097B                1633     nop3_0: ;;      ;rez_A-rez_A0
                    1634                     ;;                      mov             r0,#rez_A0
                    1635                     ;;                      call    resar8
                    1636                     ;;                      call    lsub
                    1637                     ;;                      mov             r0,#rez_A
                    1638                     ;;;                     call    saver2
                    1639     
097B B70207         1640     no3parN:                        cjne    @r1,#2,no2parN
                    1641                                             ;в байт 0  записать пробел
097E 7946           1642                                             mov             r1,#bufind+6
0980 7720           1643                                             mov             @r1,#" ";0fdh;
0982 020000   F     1644                                             jmp             seeind;moveA3
                    1645     
0985                1646     no2parN:                        ;в байты 0 и 1 записать пробел
0985 7945           1647                                             mov             r1,#bufind+5
0987 7720           1648                                             mov             @r1,#" ";0fdh;" "
0989 09             1649                                             inc             r1
098A 7720           1650                                             mov             @r1,#" ";0fdh;" "
098C 8076           1651                                             jmp             seeind;moveA3
098E 8074           1652      rseeind:               jmp             seeind
                    1653     
0990                1654     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1655                                     
                    1656                                             
0990                1657     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1658                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1659                     ;до конца цикла измерения результат не размещать в буфере
                    1660                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1661                     ;и возврату в режим измерения
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    27

0990 20145C         1662                                             jb              bitvich,rnorvich
0993 201059         1663                                             jb              bitt2,rnorvich
0996 2017F5         1664                                             jb              bitoll,rseeind
                    1665                                             
0999 2011F2         1666                                             jb              bitmenu,rseeind
099C 200BEF         1667                                             jb              bitmem,rseeind
                    1668     ;;;;;;;;;;;;;;
                    1669                                             ; mov           r0,#rez_A3
                    1670                                             ;call   resar2
                    1671                                             ;call   ftol                    ;float->int r2..r5
                    1672     ;;;;;;;;
099F 789C           1673                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
09A1 120000   F     1674                                             call    resar2;????????????????17.01.07
                    1675                                     
09A4 120000   F     1676                                             call    maform
09A7 784F           1677                                             mov             r0,#abin
09A9 120000   F     1678                                             call    saver2
                    1679     ;;;;;;;;
                    1680                                             
09AC 7853           1681                                             mov             r0,#adec
09AE 7952           1682                                             mov             r1,#abin+3      ;hex->10
09B0 120000   F     1683                                             call    bindec
                    1684                                     
09B3 785C           1685                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09B5 7946           1686                                             mov             r1,#bufind+6
09B7 7F07           1687                                             mov             r7,#7
09B9 E6             1688     bufdec:                         mov             a,@r0
09BA 2430           1689                                             add             a,#30h
09BC F7             1690                                             mov             @r1,a
09BD 19             1691                                             dec             r1
09BE 18             1692                                             dec             r0
09BF DFF8           1693                                             djnz    r7,bufdec
09C1 7847           1694                                             mov             r0,#bufind+7
09C3 762D           1695                                             mov             @r0,#2dh          ;-2..-9
09C5 7840           1696                                             mov             r0,#bufind
09C7 762B           1697                                             mov             @r0,#2bh
09C9 300202         1698                                             jnb             znmat,nozzmi;bitznak,nozzmi
09CC 762D           1699                                             mov             @r0,#2dh
09CE 79AE           1700     nozzmi:                         mov             r1,#diap
09D0 7848           1701                                             mov             r0,#bufind+8
09D2 E7             1702                                             mov             a,@r1
09D3 B4080B         1703                                             cjne    a,#8,nodi8
09D6 20151D         1704                                             jb              biteizm,seegoon
09D9 7630           1705                                             mov             @r0,#30h                 ;10-10
09DB 18             1706                                             dec             r0
09DC 7663           1707                                             mov             @r0,#63h;31h
09DE 08             1708                                             inc             r0
09DF 8015           1709                                             jmp             seegoon
09E1 B4090F         1710     nodi8:                          cjne    a,#9,nodis9
09E4 20150F         1711                                     jb              biteizm,seegoon
09E7 7631           1712                                             mov             @r0,#31h           ;10-11
09E9 18             1713                                             dec             r0
09EA 7663           1714                                             mov             @r0,#63h;31h
                    1715                                     
09EC 08             1716                                             inc             r0
09ED 8007           1717                                             jmp             seegoon
                    1718     
09EF 8079           1719     rnorvich:               jmp             norvich
09F1 8088           1720     rno3parN:               jmp             no3parN
                    1721     
09F3 2432           1722     nodis9:                         add             a,#32h
09F5 F6             1723                                             mov             @r0,a;#37h;"T";
09F6 08             1724     seegoon:                        inc             r0
09F7 7641           1725                                             mov             @r0,#"A";"E";
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    28

09F9 08             1726                                             inc             r0
09FA 7600           1727                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09FC 08             1728                                             inc             r0;             mov             buf
                             ind+11
09FD 7610           1729                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1730                                             
                    1731     ;;;;;;;;;;;;;;;
                    1732     ;;;;;;goonind:
09FF 79AF           1733                                             mov             r1,#parN        ; ??????
0A01 B703ED         1734                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1735             
0A04                1736     seeind:                         ;;;;;;;;;;;;;
0A04 784A           1737                                             mov             r0,#bufind+10
0A06 E6             1738                                             mov             a,@r0
0A07 300F03         1739                                             jnb             bitnul,nnnul
0A0A 4408           1740                                             orl             a,#08h
0A0C F6             1741                                             mov             @r0,a
0A0D 799A           1742      nnnul:         mov             r1,#parT
0A0F B70204         1743                                             cjne    @r1,#2,nsec1
0A12 4420           1744                                             orl             a,#20h    ;1s
0A14 8009           1745                                             jmp             nsec10
0A16 B70104         1746     nsec1:          cjne    @r1,#1,nsec11
0A19 4440           1747                                             orl             a,#40h                  ;10s
0A1B 8002           1748                                             jmp             nsec10
                    1749                                     
0A1D 4410           1750     nsec11:         orl             a,#10h
                    1751                                                      ;0,1s
                    1752     ;;;;;;;;;;;;;;;;
0A1F                1753     nsec10:         
                    1754     
                    1755     
0A1F 784A           1756                                             mov             r0,#bufind+10   
0A21 F6             1757                                             mov             @r0,a
0A22 300504         1758                                             jnb             bitavp,nobavp
0A25 4404           1759                                             orl             a,#04           ;bufind+10.2
0A27 F6             1760                                             mov             @r0,a
0A28 F6             1761                                             mov             @r0,a   
0A29 784A           1762     nobavp:         mov             r0,#bufind+10   
0A2B F6             1763                                             mov             @r0,a   
0A2C 301803         1764                                        jnb          knizm,nobitizm
0A2F 4402           1765                                             orl             a,#02
0A31 F6             1766                                              mov            @r0,a
0A32                1767     nobitizm:                       
0A32 301A07         1768                                             jnb             bitakt,notakt
0A35 C21A           1769                                             clr             bitakt
0A37 534AFE         1770                                             anl             bufind+10,#0feh
0A3A 8005           1771                                             jmp             taktind
0A3C D21A           1772     notakt:                         setb    bitakt
0A3E 434A01         1773                                             orl             bufind+10,#01                      
                                          
0A41                1774     taktind:                
                    1775     ;;;;;;;;;
0A41 301517         1776                                             jnb             biteizm,yesind
0A44 79B1           1777                                             mov             r1,#vichR
0A46 7848           1778                                             mov             r0,#bufind+8
0A48 7654           1779                                             mov             @r0,#'T'
0A4A 08             1780                                             inc             r0
0A4B B72104         1781                                             cjne    @r1,#21h,test9i
0A4E 7631           1782                                             mov             @r0,#31h;11A
                    1783                                     ;       dec             r0
                    1784                                     ;       mov             @r0,#63h
0A50 8009           1785                                             jmp             yesind
0A52 B72204         1786     test9i:         cjne    @r1,#22h,test7i
0A55 7632           1787                                             mov             @r0,#32h;39h;09A
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    29

0A57 8002           1788                                             jmp             yesind
0A59 7633           1789     test7i:         mov             @r0,#33h;37h;07A
                    1790     ;;;;;;;;;
0A5B                1791     yesind:         
0A5B 301203         1792                                             jnb             bitklb,noklb
0A5E 434A80         1793                                             orl             bufind+10,#80h; on kmp
0A61 300A03         1794     noklb:          jnb             bitbon,nobuf
0A64 434B02         1795                                             orl             bufind+11,#02h; on pysk
0A67 120000   F     1796     nobuf:          call    ind        ;пп выдачи на индикатор
0A6A                1797     norvich: 
0A6A 789A           1798                                     mov             r0,# parT
0A6C 79AC           1799                                             mov             r1,#chind
0A6E B60152         1800                                             cjne    @r0,#1,rnot1in
0A71                1801     labelB:                    ;;;;;;;;;;;
                    1802                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A71 789F           1803                                                     mov     r0,#rez_A3+3
                    1804                             ;;;;;;;;
0A73 79BB           1805                             mov             r1,#work+3
0A75 E6             1806                             mov             a,@r0
0A76 7F07           1807                             mov             r7,#7;кол сдв вправо
0A78 C3             1808     dvig3:          clr             c
0A79 13             1809                             rrc             a
0A7A DFFC           1810                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A7C FA             1811                             mov             r2,a    ;сохр байт
0A7D 18             1812                             dec             r0              ;rez_A3+2
0A7E E6             1813                             mov             a,@r0
0A7F C0E0           1814                             push    acc
0A81 C3             1815                             clr             c
0A82 7F01           1816                             mov             r7,#1
0A84 C3             1817     dvig2:          clr             c
0A85 33             1818                             rlc             a
0A86 DFFC           1819                             djnz    r7,dvig2 ;d12..d11       средний байт
0A88 4A             1820                             orl             a,r2
0A89 F7             1821                             mov             @r1,a;сформ мл байт
0A8A 19             1822                             dec             r1
0A8B D0E0           1823                             pop             acc
                    1824                             
0A8D 7F07           1825                             mov             r7,#7
0A8F C3             1826     dvig1:          clr             c
0A90 13             1827                             rrc             a
0A91 DFFC           1828                             djnz    r7,dvig1 ;d18     ср байт
0A93 FA             1829                             mov             r2,a   ;сохр
0A94 18             1830                             dec             r0
0A95 E6             1831                             mov             a,@r0 ;rez_A3+1
0A96 C0E0           1832                             push    acc
                    1833                     
0A98 7F01           1834                             mov             r7,#1
0A9A C3             1835     dvig0:          clr             c
0A9B 33             1836                             rlc             a
0A9C DFFC           1837                             djnz    r7,dvig0 ;        d21..d16
0A9E 4A             1838                             orl             a,r2
0A9F F7             1839                             mov             @r1,a   ; сформ средний  байт
0AA0 19             1840                             dec             r1
0AA1 D0E0           1841                             pop             acc       ;rez_A3+1
                    1842                             ;;;;;;;;;;;;;;
                    1843     ;                       jb              acc.7,dvm
0AA3 C3             1844                             clr             c
0AA4 7F07           1845                             mov             r7,#7
0AA6 C3             1846     dvig4:          clr             c
0AA7 13             1847                             rrc             a
0AA8 DFFC           1848                             djnz    r7,dvig4 ;        d22
0AAA FA             1849                             mov             r2,a   ;сохр
0AAB 18             1850                             dec             r0;     rez_A3
0AAC E6             1851                             mov             a,@r0
                    1852                             ;;;;;
0AAD 7F01           1853                             mov             r7,#1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    30

0AAF C3             1854     vig0:           clr             c
0AB0 33             1855                             rlc             a
0AB1 DFFC           1856                             djnz    r7,vig0 ;         d24..d30
0AB3 4A             1857                             orl             a,r2
0AB4 F7             1858                             mov             @r1,a   ; сформ   байт
0AB5 19             1859                             dec             r1
0AB6 E6             1860                             mov             a,@r0
                    1861                             ;;;;;
0AB7 20E70C         1862                             jb              acc.7,dvm
0ABA C3             1863                             clr             c
0ABB 7F07           1864                             mov             r7,#7
0ABD C3             1865     vig4:           clr             c
0ABE 13             1866                             rrc             a
0ABF DFFC           1867                             djnz    r7,vig4 ;         d
0AC1 8009           1868                             jmp             endsdv
                    1869     
0AC3 020000   F     1870     rnot1in:                jmp             not1in
                    1871     
                    1872     ;;;;;;;;;;;;                                    
0AC6 7F07           1873     dvm:            mov             r7,#7
0AC8 D3             1874     dvig6:          setb            c
0AC9 13             1875                             rrc             a
0ACA DFFC           1876                             djnz    r7,dvig6 ;        d31
0ACC F7             1877     endsdv:         mov             @r1,a
                    1878                                                             
                    1879      ;->work   
                    1880                             
0ACD 900000   F     1881                             mov             dptr,#chzap
0AD0 120000   F     1882                             call     ldc_long
0AD3 78BB           1883                              mov            r0,#work+3
0AD5 120000   F     1884                             call    ladd
0AD8 ED             1885                             mov             a,r5
0AD9 F5D2           1886                             mov             DAC0L,a
                    1887                             
0ADB EC             1888                             mov             a,r4
0ADC F5D3           1889                             mov             DAC0H,a
                    1890     
                    1891                                             ;;;;;;;;;;
0ADE 78CF           1892                                             mov                     r0,#chbuf               ;fl
                             oat
0AE0 120000   F     1893                                             call            resar2
0AE3 900000   F     1894                                             mov                     dptr,#ch_2;ch0;ch_1
0AE6 120000   F     1895                                             call            ldc_ltemp
0AE9 1201D6         1896                                             call            flcmp
0AEC 5020           1897                                             jnc                     rnobuf0
                    1898                                             
0AEE 900000   F     1899                                             mov                     dptr,#ch_1
0AF1 120000   F     1900                                             call            ldc_ltemp
0AF4 1201D1         1901                                             call            flsub
0AF7 900E00         1902                                             mov                     dptr,#chbuf1               
                                  ;СБ1 внешн озу
0AFA EA             1903                                             mov                     a,r2
0AFB F0             1904                                             movx            @dptr,a
0AFC A3             1905                                             inc                     dptr
0AFD EB             1906                                             mov                     a,r3
0AFE F0             1907                                             movx            @dptr,a
0AFF A3             1908                                             inc                     dptr
0B00 EC             1909                                             mov                     a,r4
0B01 F0             1910                                             movx            @dptr,a
0B02 A3             1911                                             inc                     dptr
0B03 ED             1912                                             mov                     a,r5
0B04 F0             1913                                             movx            @dptr,a
                    1914                                             
                    1915                                             
                    1916                                             ;jnc                    rnobuf0
0B05 200909         1917                                             jb              bitprd,yesprd   ;передать   A3 в бу
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    31

                             фер
0B08 200A08         1918                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B0B 020000   F     1919                                             jmp             gocikle
0B0E 020000   F     1920     rnobuf0:        jmp             nobuf0
0B11                1921     yesprd: ;передать   A3 в буфер
0B11 8045           1922                                             jmp             goonT
0B13                1923     yesbuf:         ;записать   A3 в буфер
0B13 120000   F     1924                                             call            resa_hl;dptr-
0B16 120000   F     1925                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1926                                                                             ;в ячейке saven_bl
0B19 120000   F     1927                                             call            save_hl
0B1C 78AE           1928                                             mov                     r0,#diap
0B1E E6             1929                                             mov                     a,@r0
0B1F 7938           1930                                             mov                     r1,#nblok
0B21 B70104         1931                                             cjne            @r1,#1,nosav1
0B24 F534           1932                                             mov                     sadiap,a
0B26 8012           1933                                             jmp                     gotostrob
0B28 B70204         1934     nosav1:         cjne            @r1,#2,nosav2
0B2B F532           1935                                             mov                     sadiap2,a
0B2D 800B           1936                                     jmp                     gotostrob
0B2F B70304         1937     nosav2:         cjne            @r1,#3,nosav3
0B32 F531           1938                                             mov                     sadiap3,a
0B34 8004           1939                                     jmp                     gotostrob
0B36                1940     nosav3:         
0B36 F530           1941                                             mov                     sadiap4,a
0B38 8000           1942                                     jmp                     gotostrob
                    1943     
                    1944                                             ;строб
0B3A                1945     gotostrob:
0B3A E586           1946                                     mov             a,P6            ;p6.4=0
0B3C 54EF           1947                             anl             a,#0efh
0B3E F586           1948                             mov             P6,a
0B40 00             1949                             nop
0B41 00             1950                             nop
                    1951                                     
0B42 E586           1952                             mov             a,P6                    ;p6.4=1 
0B44 4410           1953                             orl             a,#10h
0B46 F586           1954                             mov             P6,a
                    1955                                     ;;;;;;;;;
0B48 E5DA           1956                             mov             a,PCA0CPM0;     
0B4A 4446           1957                             orl             a,#46h;anl              a,#0fbh
0B4C F5DA           1958                             mov             PCA0CPM0,a
                    1959     
0B4E 75CDD0         1960                             mov             TH2,#0d0h
0B51 75CC00         1961                             mov             TL2,#00
                    1962     
0B54 D2CA           1963                             setb            T2CON.2
0B56 D2AD           1964                             setb            ET2;IE.5                            
0B58 78CD           1965     goonT:                          mov             r0,#interva;high  byte loadr2
0B5A E6             1966                                             mov             a,@r0
0B5B FC             1967                                             mov             r4,a
0B5C 08             1968                                             inc             r0
0B5D E6             1969                                             mov             a,@r0
0B5E FD             1970                                             mov             r5,a
0B5F E4             1971                                             clr             a
0B60 FB             1972                                             mov             r3,a
0B61 FA             1973                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B62 120402         1974                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1975     
0B65 789A           1976                                             mov             r0,#parT
0B67 B60108         1977                                             cjne    @r0,#1,nott1
0B6A 900000   F     1978                                             mov                     dptr,#ch_2       
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    32

0B6D 120000   F     1979                                             call            ldc_ltemp
0B70 8009           1980                                             jmp                     intmul
                    1981     
0B72 B60225         1982     nott1:                  cjne    @r0,#2,nott2
0B75 900000   F     1983                                                     mov                     dptr,#ch_10      
0B78 120000   F     1984                                                     call            ldc_ltemp
                    1985                                                                             
0B7B 120203         1986     intmul: call            flmul                                   ;*10
0B7E 900E00         1987     intmul1:        mov             dptr,#chbuf1    ;СБ1
0B81 E0             1988                                             movx    a,@dptr
0B82 F508           1989                                             mov             r8,a
0B84 A3             1990                                             inc             dptr
0B85 E0             1991                                     movx    a,@dptr
0B86 F509           1992                                             mov             r9,a
0B88 A3             1993                                             inc             dptr
0B89 E0             1994                                     movx    a,@dptr
0B8A F50A           1995                                             mov             r10,a
0B8C A3             1996                                             inc             dptr
0B8D E0             1997                                             movx    a,@dptr
0B8E F50B           1998                                             mov             r11,a
0B90 120166         1999                                             call            fladd           ;СБ+СБ1
0B93 78CF           2000     intmul2:        mov                     r0,#chbuf
0B95 120000   F     2001                                     call            saver2          ;*2
                    2002                                     
0B98 8035           2003                                     jmp             gocikle
                    2004     
0B9A B6030B         2005     nott2:                  cjne    @r0,#3,nott3
0B9D 900000   F     2006                                                     mov                     dptr,#ch_2       
0BA0 120000   F     2007                                                     call            ldc_ltemp
0BA3 120203         2008                                                     call            flmul
0BA6 80EB           2009                                                     jmp                     intmul2            
                                                  ;*2
                    2010     
                    2011     
0BA8 B60414         2012     nott3:          cjne    @r0,#4,nott4
0BAB 900000   F     2013                                             mov                     dptr,#ch_10      
0BAE 120000   F     2014                                             call            ldc_ltemp       ;/10*4
0BB1 1202B7         2015                                             call            fldiv
0BB4 900000   F     2016                                             mov                     dptr,#ch_4       
0BB7 120000   F     2017                                             call            ldc_ltemp
0BBA 120203         2018                                             call            flmul
0BBD 80D4           2019                                             jmp             intmul2
                    2020     
0BBF B6050B         2021     nott4:          cjne    @r0,#5,nott5
0BC2 900000   F     2022                                                     mov                     dptr,#ch_2       
0BC5 120000   F     2023                                             call            ldc_ltemp;*2
0BC8 120203         2024                                             call            flmul
0BCB 80C6           2025                                             jmp             intmul2;T=5
0BCD                2026     nott5:          ;       mov                     dptr,#ch_1       
                    2027                                             ;call           ldc_ltemp
                    2028                                             ;call           flmul
0BCD 80C4           2029                                     jmp                     intmul2                            
                                  ;*1
                    2030     
                    2031     
0BCF 300708         2032     gocikle:        jnb             bitzus,nofz                     
0BD2 120000   F     2033                             call    z_05s    ;0,5c
0BD5 120000   F     2034                             call    z_05s    ;0,5c
0BD8 C207           2035                             clr     bitzus;bitbuf бит задержки засылки us
0BDA 020000   F     2036     nofz:           jmp     labelA;rebyte
                    2037     
                    2038     
0BDD 80F0           2039     yestt5:         jmp             gocikle
                    2040     
0BDF 78CF           2041     nobuf0:                 mov             r0,#chbuf
0BE1 120000   F     2042                                                     call            resar2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    33

0BE4 900000   F     2043                                                     mov                     dptr,#ch_1       
0BE7 120000   F     2044                                             call            ldc_ltemp
0BEA 1201D1         2045                                             call            flsub
0BED 78CF           2046                                             mov                     r0,#chbuf       
0BEF 120000   F     2047                                             call            saver2  
0BF2 80DB           2048                                             jmp             gocikle
                    2049     
                    2050     
0BF4 B60205         2051     not1in:                         cjne    @r0,#2,not2in
0BF7 7701           2052                                             mov             @r1,#1           ;T=2
0BF9 020000   F     2053                                             jmp     labelB
                    2054     
0BFC B60305         2055     not2in:                         cjne    @r0,#3,not3in
0BFF 7701           2056                                             mov             @r1,#1;9                ;T=3
0C01 020000   F     2057                                             jmp     labelB
0C04 7703           2058     not3in:                         mov             @r1,#3;19
0C06 020000   F     2059                                             jmp     labelB
                    2060     
                    2061     
                    2062     ;;;;;;;;;;;3.11.06
                    2063     
                    2064     ;;коррекция 0
0C09 7883           2065     KORnul:         mov             r0,#chdel
0C0B B60010         2066                             cjne    @r0,#0,nonuldel
                    2067                                     
0C0E E584           2068                             mov             a,p4                    ;сохр  us
0C10 F536           2069                             mov             saus,a
0C12 E585           2070                             mov             a,p5
0C14 F537           2071                             mov             saus+1,a
                    2072     
0C16 900000   F     2073                             mov             dptr,#kor0us
0C19 120000   F     2074                             call    lospus          ;упр слово коррекции 0
0C1C 8018           2075                             jmp             chdelmo
                    2076     
0C1E                2077     nonuldel:       ;cjne   @r0,#7,no4del
0C1E B6031B         2078                                                     cjne    @r0,#3,no4del
                    2079                             ;рез ->AN
0C21 7862           2080                             mov             r0,#rez_A;->r2..r5
0C23 120000   F     2081                             call    resar2
                    2082             
                    2083                                     ;;;;;;;;;;
0C26 120402         2084                             call    altof           ;r2..r5->float
0C29 7884           2085                             mov             r0,#kor0_AN;->kor0_AN
0C2B 120000   F     2086                             call    saver2
                    2087                                     
0C2E E536           2088                             mov             a,saus                  ;восстан исходное упр слово
0C30 F584           2089                             mov             p4,a
0C32 E537           2090                             mov             a,saus+1
0C34 F585           2091                             mov             p5,a            
0C36 7883           2092     chdelmo:        mov             r0,#chdel
0C38 06             2093                             inc             @r0             ;chdel+1
0C39 020000   F     2094                             jmp              rebyte
                    2095     
0C3C                2096     no4del:         ;cjne   @r0,#14,chdelmo
0C3C B606F7         2097                                             cjne    @r0,#6,chdelmo
0C3F 7600           2098                             mov             @r0,#0          ;chdel
0C41 7898           2099                             mov             r0,#chinkor
0C43 7600           2100                             mov             @r0,#00;1;00;02;600;
0C45 08             2101                             inc             r0
0C46 76C8           2102                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0C48 120000   F     2103                             call    clmassix;сбросить массив скольз среднего
0C4B                2104     bonpart:
0C4B 300A20         2105                             jnb                     bitbon,rebyter
0C4E 78CF           2106                             mov                     r0,#chbuf
0C50 120000   F     2107                             call            resar2
0C53 799A           2108                             mov                     r1,#parT
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    34

0C55 B70211         2109                             cjne            @r1,#2,no6del
0C58 900000   F     2110                             mov                     dptr,#ch_7;5
0C5B                2111     no5del:
0C5B 120000   F     2112                             call            ldc_ltemp
0C5E 1201D1         2113                             call            flsub   
0C61 78CF           2114                             mov                     r0,#chbuf
0C63 120000   F     2115                             call            saver2
0C66 020000   F     2116                             jmp              rebyte
0C69                2117     no6del:
0C69 900000   F     2118                             mov                     dptr,#ch_1
0C6C 80ED           2119                             jmp                     no5del
                    2120     
                    2121     
0C6E 7981           2122     rebyter:        mov             r1,#chavt
0C70 770C           2123                                             mov             @r1,#0ch;6;1;
0C72 09             2124                                             inc             r1
0C73 7780           2125                                             mov             @r1,#80h;40h;
0C75 020000   F     2126                                             jmp             noavk
                    2127     
                    2128     
                    2129     ;автокалибровка
0C78 200AF3         2130     autoka:  jb             bitbon,rebyter
0C7B                2131     nulavt:  ;;;;;
0C7B 7883           2132                             mov             r0,#chdel
0C7D B60016         2133                             cjne    @r0,#0,nndelch
0C80 E584           2134                             mov             a,p4                    ;сохр  us
0C82 F536           2135                             mov             saus,a
0C84 E585           2136                             mov             a,p5
0C86 F537           2137                             mov             saus+1,a
                    2138     
0C88 E585           2139                             mov   a,p5
0C8A 4404           2140                             orl             a,#04              ;p5.2=1
0C8C 00             2141                             nop
0C8D 00             2142                             nop
0C8E 543F           2143                             anl             a,#3fh          ;p5.6,p5.7=0
0C90 F585           2144                             mov   p5,a
0C92 06             2145                             inc             @r0
0C93 020000   F     2146                             jmp              rebyte
                    2147     
0C96 B6033D         2148     nndelch:        cjne    @r0,#3,n4delch
                    2149                             ;pez->A+
                    2150                             ;K+=000/(A+-AN)
                    2151                             ;mov            r0,#rez_A;->r2..r5
                    2152                             ;call   resar2
0C99 E577           2153                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C9B FA             2154                                     mov             r2,a
0C9C E578           2155                                     mov             a,reacp+1
0C9E FB             2156                                     mov             r3,a
0C9F E579           2157                                     mov             a,reacp+2
0CA1 FC             2158                                     mov             r4,a
0CA2 E57A           2159                                     mov             a,reacp+3
0CA4 FD             2160                                     mov             r5,a
                    2161                                     ;;;;;;;;;;;;;;;
0CA5 120402         2162                             call    altof                   ;r2..r5->float
0CA8 7888           2163                             mov             r0,#rezAp;->rezAp
0CAA 120000   F     2164                             call    saver2                          
0CAD 7884           2165                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CAF 120000   F     2166                             call    resar8                          
0CB2 1201D1         2167                             call    flsub           ; r2..r5(A+-AN)
0CB5 120000   F     2168                             call    move28     ;r2..r5->r8..r11
0CB8 900000   F     2169                             mov             dptr,#CH2tho;000->r2..r5 float
0CBB 120000   F     2170                             call    ldc_long                
0CBE 1202B7         2171                             call    fldiv
0CC1 EA             2172                             mov             a,r2
0CC2 547F           2173                             anl             a,#7fh
0CC4 FA             2174                             mov             r2,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    35

0CC5 7890           2175                             mov             r0,#koefKp;->koefKp
0CC7 120000   F     2176                             call    saver2
                    2177                       
                    2178                     ;       anl             P5,#0feh                ;p5.0=0 
0CCA E585           2179                     mov             a,P5
0CCC 543B           2180                             anl             a,#3bh;acp-
0CCE F585           2181                             mov             P5,a
0CD0 7883           2182                             mov             r0,#chdel
0CD2 06             2183                             inc             @r0                       ;ch+1
0CD3 020000   F     2184                             jmp             rebyte
                    2185     
0CD6 B6063F         2186     n4delch:        cjne    @r0,#6,n8delch
                    2187                             ; pez->A-
                    2188                             ;K-=000/(A--AN)
                    2189                     ;       mov     r0,#rez_A;->r2..r5
                    2190                     ;       call    resar2
0CD9 E577           2191                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CDB FA             2192                                     mov             r2,a
0CDC E578           2193                                     mov             a,reacp+1
0CDE FB             2194                                     mov             r3,a
0CDF E579           2195                                     mov             a,reacp+2
0CE1 FC             2196                                     mov             r4,a
0CE2 E57A           2197                                     mov             a,reacp+3
0CE4 FD             2198                                     mov             r5,a
                    2199                                     ;;;;;;;;;;;;;;;
0CE5 120402         2200                             call    altof                   ;r2..r5->float
0CE8 788C           2201                             mov             r0,#rezAm;->rezAm
0CEA 120000   F     2202                             call    saver2                          
0CED 7884           2203                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CEF 120000   F     2204                             call    resar8                          
0CF2 1201D1         2205                             call    flsub                   ; r2..r5(A--AN)
0CF5 120000   F     2206                             call    move28                  ;r2..r5->r8..r11
0CF8 900000   F     2207                             mov             dptr,#CH2tho    ;000->r2..r5 float
0CFB 120000   F     2208                             call    ldc_long                
0CFE 1202B7         2209                             call    fldiv
0D01 EA             2210                             mov             a,r2
0D02 547F           2211                             anl             a,#7fh
0D04 FA             2212                             mov             r2,a
0D05 7894           2213                             mov             r0,#koefKm;->koefKm
0D07 120000   F     2214                             call    saver2
                    2215                        
0D0A E536           2216                             mov             a,saus                  ;восстан исходное упр слово
0D0C F584           2217                             mov             p4,a
0D0E E537           2218                             mov             a,saus+1
0D10 F585           2219                             mov             p5,a            
0D12 7883           2220                             mov             r0,#chdel
0D14 06             2221                             inc             @r0                       ;ch+1
0D15 020000   F     2222                        jmp    rebyte
                    2223     
0D18 B6090F         2224     n8delch:        cjne    @r0,#9,n12delch
0D1B 7600           2225                             mov             @r0,#0
0D1D 7981           2226                             mov             r1,#chavt
0D1F 770C           2227                             mov             @r1,#0ch;6;1;
0D21 09             2228                             inc             r1
0D22 7780           2229                             mov             @r1,#80h;40h;
0D24 120000   F     2230                             call   clmassix     ;сбросить массив среднего
0D27 020000   F     2231                             jmp             rebyte; bonpart;
0D2A 06             2232     n12delch:       inc             @r0
0D2B 020000   F     2233                             jmp             rebyte
                    2234     
                    2235     
                    2236     
                    2237                                 
0D2E 020000   F     2238     rout6:          jmp             out6
0D31 020000   F     2239     rlabelF:        jmp             labelF  
0D34 020000   F     2240     rknrazr:        jmp             knrazr  
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    36

0D37 020000   F     2241     rknopt:         jmp             knopt
0D3A 020000   F     2242     rizman:         jmp             izman   
0D3D                2243     keyb1:  ;IE6 
0D3D 75E700         2244                                     mov             EIE2,#00H
0D40 75AD00         2245                                     mov             P3IF,#00
                    2246                                     
0D43 C0E0           2247                                     push    acc
0D45 C0D0           2248                                     push    psw
0D47 C000           2249                                     push    rr0
0D49 C001           2250                                     push    rr1
0D4B C002           2251                                     push    rr2
0D4D C003           2252                                     push    rr3
0D4F C004           2253                                     push    rr4
0D51 C005           2254                                     push    rr5
0D53 C006           2255                                     push    rr6
0D55 C007           2256                                     push    rr7
0D57 C082           2257                                     push    dpl
0D59 C083           2258                                     push    dph
                    2259                                     ;clr            bitmig
                    2260                       ;;;;;;;;;;;;;;
0D5B 120000   F     2261                                     call    z_01s;0,1s
0D5E 120000   F     2262                                             call    z_01s
                    2263                                     ;восстан знакоместо при мигании
                    2264                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0D61 78B2           2265                                     mov             r0,#marker
0D63 7440           2266                                     mov             a,#bufind
0D65 26             2267                                     add             a,@r0                   ;a=bufind+marker
0D66 F9             2268                                     mov             r1,a
0D67 A73C           2269                                     mov             @r1,savba
                    2270                                     ;;;;;;;;;;;
0D69 E5B0           2271                             mov             a,p3
0D6B 20E644         2272                                     jb              acc.6,outviR;выход из режима выч R
0D6E E5B0           2273     gout6:                          mov             a,p3
0D70 44FF           2274                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0D72 F5B0           2275                                     mov             p3,a
0D74 E5B0           2276                                     mov             a,p3
0D76 30E6B5         2277                                     jnb             acc.6,rout6             ;error
0D79 3004B5         2278                                     jnb             bitizm,rlabelF
0D7C 75B0FE         2279                                     mov             p3,#0feh                ;реж IZM
0D7F E5B0           2280                                     mov             a,p3
0D81 30E6B6         2281                                     jnb             acc.6,rizman
                    2282                                     ;;;;;;
0D84 201232         2283                                     jb              bitklb,goklb
0D87 75B0FD         2284                                     mov             p3,#0fdh
0D8A E5B0           2285                                     mov             a,p3
0D8C 30E6A5         2286                                     jnb             acc.6,rknrazr             ;labelC
0D8F 75B0FB         2287                                     mov             p3,#0fbh
0D92 E5B0           2288                                     mov             a,p3
0D94 30E655         2289                                     jnb             acc.6,knright           ;->
0D97 75B0F7         2290                                     mov             p3,#0f7h
0D9A E5B0           2291                                     mov             a,p3
0D9C 30E698         2292                                     jnb             acc.6,rknopt                    ;T
0D9F 75B0EF         2293                                     mov             p3,#0efh
0DA2 E5B0           2294                                mov          a,p3
0DA4 30E615         2295                                     jnb             acc.6,pyskst                    ;pysk/stop
0DA7 75B0DF         2296                                     mov             p3,#0dfh
0DAA E5B0           2297                                     mov             a,p3
0DAC 30E65E         2298                                jnb          acc.6,knvich
0DAF 020000   F     2299                                     jmp             izmpaT
                    2300     
0DB2 3006B9         2301     outviR: jnb             bitvi11,gout6   
0DB5 C214           2302                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0DB7 C206           2303                                     clr             bitvi11
                    2304                                     
0DB9 020000   F     2305     goklb:          jmp             out6
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    37

                    2306     
0DBC 200A12         2307     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0DBF D20A           2308                                     setb    bitbon  ;уст реж буфер вкл
0DC1 79D5           2309                                     mov                     r1,#volume;work         ;обьем блок
                             а
0DC3 7700           2310                                     mov                     @r1,#00
0DC5 09             2311                                     inc                     r1
0DC6 77C7           2312                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0DC8 434B02         2313                                     orl             bufind+11,#02h; on pysk
0DCB 120000   F     2314                                     call            ind
0DCE 020000   F     2315                                     jmp             izmpaT
0DD1 C20A           2316     bufon:                  clr             bitbon  ;уст реж буфер выкл
0DD3 534BFD         2317                                             anl             bufind+11,#0fdh; off pysk
0DD6 120000   F     2318                                             call    ind
0DD9 020000   F     2319                                     jmp             izmpaT
                    2320     
0DDC 79B0           2321     tizmri:                 mov             r1,#level
0DDE B70102         2322                                     cjne    @r1,#1,right2
                    2323                                     ;10s->HET
0DE1 8004           2324                                     jmp             right3
                    2325     
0DE3 07             2326     right2:                 inc             @r1
0DE4 120000   F     2327                                     call    lolevT
                    2328                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0DE7 120000   F     2329     right3:                 call    ind
0DEA 807D           2330                                     jmp             izmfun
                    2331     
                    2332                             
                    2333                             
0DEC                2334     knright:        
                    2335     
0DEC 79AE           2336                                     mov             r1,#diap
                    2337                             ;перекл диапазон 1 поз вверх сбр массив
0DEE 17             2338                                     dec             @r1
0DEF B7FF04         2339                                     cjne    @r1,#0ffh,diinc
0DF2 7700           2340                                     mov             @r1,#0
0DF4 8073           2341                                     jmp  izmfun
0DF6 120000   F     2342     diinc:                  call     clmassix
0DF9 78B3           2343                                     mov             r0,#summa
0DFB 120000   F     2344                                     call    clear4
0DFE 786A           2345                                     mov             r0,#rez_A0
0E00 120000   F     2346                                     call    clear4
0E03 C20F           2347                                     clr             bitnul          ;гасить светодиод НУЛЬ  
0E05 120000   F     2348                                     call    loadUS
0E08 805F           2349                                      jmp  izmfun
                    2350     
0E0A 020000   F     2351     vit2_10:                jmp             out6
0E0D                2352     knvich:                 ;12.02.07
0E0D 789A           2353                                             mov                     r0,#parT
0E0F C3             2354                                             clr                     c
0E10 7404           2355                                             mov                     a,#4 
0E12 96             2356                                             subb            a,@r0
0E13 40F5           2357                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0E15 2015F2         2358                                             jb                      biteizm,vit2_10;не нажимать
                              кнопку ВЫЧ во время теста
0E18 200613         2359                               jb            bitvi11,onvich
0E1B C204           2360                                     clr             bitizm
0E1D D214           2361                                     setb    bitvich
                    2362                                     
0E1F 78B1           2363                                     mov             r0,#vichR
0E21 7611           2364                                     mov             @r0,#11h;;????????or 0
                    2365                                     ;ВЫЧИСЛИТЬ
0E23 900000   F     2366                                     mov     dptr,#teVICH
0E26 120000   F     2367                                     call    lotext
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    38

0E29 120000   F     2368                                call         z_1s;;;;;;;
0E2C 806C           2369                                     jmp              viout;izmpaT
                    2370     
0E2E C214           2371     onvich:                 clr             bitvich
0E30 78B1           2372                                     mov             r0,#vichR
0E32 7600           2373                                     mov             @r0,#0
0E34 8037           2374                                     jmp              izmpaT
                    2375     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0E36 301820         2376     louizm:            jnb          knizm,lou
0E39 79AE           2377                                     mov             r1,#diap
0E3B C3             2378                                     clr             c
0E3C 7403           2379                                     mov             a,#3
0E3E 97             2380                                     subb    a,@r1
0E3F 5006           2381                                     jnc             lldi23    ;10-2..10-5
                    2382                                     ;10-6..10-11
0E41 E584           2383                                     mov             a,p4
0E43 54F7           2384                                     anl             a,#0f7h   ;d3
0E45 F584           2385                                     mov             p4,a
0E47 E7             2386     lldi23:                 mov             a,@r1
0E48 6403           2387                                     xrl             a,#3
0E4A 7002           2388                                     jnz             lldi3
0E4C 8005           2389                                     jmp             lldi2   ;10-5
0E4E E7             2390     lldi3:                  mov             a,@r1
0E4F 6402           2391                                     xrl             a,#2            ;
0E51 7006           2392                                     jnz             lou             
0E53 E585           2393     lldi2:                  mov             a,p5            ;10-4
0E55 4408           2394                                     orl             a,#08
0E57 F585           2395                                     mov             p5,a
0E59 22             2396     lou:                    ret
                    2397                               ;;;;;;
0E5A 201807         2398     izman:                  jb              knizm,knizmon
0E5D D218           2399                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2400                             ;       d3(k5 p4),d3(u5 p5)заслать us
0E5F 120000   F     2401                                     call    louizm 
0E62 8005           2402                                     jmp             izmfun
0E64 C218           2403     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0E66 120000   F     2404                                     call    loadUS;восстановить us
0E69                2405     izmfun:                 
0E69 D207           2406                                     setb    bitzus;bitbuf
0E6B 8000           2407                                     jmp             labelE;;;;;;;;;;;;
                    2408                                     ;;;;;;;;;;;;;;
0E6D                2409     izmpaT:
                    2410     ;;;;;;;;;;;;;;;;;
                    2411                     ;       clr             c 
                    2412                     ;       mov             r1,#parN
                    2413     
                    2414                     ;       mov             r0,#diap
                    2415                     ;       mov             a,#6            
                    2416                     ;       subb    a,@r0
                    2417                     ;       jnc             labelE          ;         ;10-2..10-8
                    2418                               
                    2419                     ;       mov             @r1,#2          ;10-9..10-11            
                    2420                     ;       jmp             labelE
                    2421     
                    2422     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0E6D 789A           2423     labelE:                 mov             r0,#parT
0E6F 793D           2424                                     mov             r1,#chkl
0E71 B60108         2425                                     cjne    @r0,#1,izmt2
0E74 7700           2426                                     mov             @r1,#0
0E76 09             2427                                     inc             r1
0E77 7702           2428                                     mov             @r1,#2
0E79 020000   F     2429                                     jmp             out6
0E7C B60208         2430     izmt2:                  cjne    @r0,#2,izmt3
0E7F 7700           2431                                     mov             @r1,#0
0E81 09             2432                                     inc             r1
0E82 7714           2433                                     mov             @r1,#20
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    39

0E84 020000   F     2434                                     jmp             out6
                    2435     
0E87 7700           2436     izmt3:                  mov             @r1,#0
0E89 09             2437                                     inc             r1
0E8A 77C8           2438                                     mov             @r1,#200
0E8C 020000   F     2439                                     jmp             out6
                    2440     
                    2441     
                    2442     
                    2443     
0E8F                2444     knopt: ;кнопка T
0E8F C204           2445                                clr          bitizm
0E91 D210           2446                                setb         bitt2
0E93 79B7           2447                                mov          r1,#load
0E95 7704           2448                                mov          @r1,#4;1s
0E97 120000   F     2449                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2450                     
0E9A 793D           2451     viout:          mov             r1,#chkl
0E9C 7703           2452                             mov             @r1,#03
0E9E 09             2453                             inc             r1
0E9F 77E8           2454                             mov             @r1,#0e8h               ;1000
0EA1 020000   F     2455                             jmp             out6
                    2456     
0EA4                2457     knrazr:          
0EA4 C3             2458     labelC:          clr            c
0EA5 78AF           2459                             mov             r0,#parN
0EA7 799A           2460                             mov             r1,#parT
0EA9 7402           2461                             mov             a,#2
0EAB 97             2462                             subb    a,@r1
0EAC 40BF           2463                             jc              labelE          ;T>2
0EAE B60104         2464                             cjne    @r0,#1,noN1c
0EB1 7602           2465                             mov             @r0,#2          ;N=2
0EB3 80B8           2466                             jmp             labelE
                    2467     
0EB5 B60204         2468     noN1c:          cjne    @r0,#2,not_1
0EB8 7603           2469                             mov             @r0,#3          ;N=3      ;10-2..10-8
0EBA 80B1           2470                             jmp             labelE
                    2471     
0EBC                2472     not_10: 
0EBC 7601           2473     not_1:          mov             @r0,#1                          ;N=1
0EBE 80AD           2474                             jmp     labelE
                    2475     
0EC0 020000   F     2476     rtizmri:        jmp             tizmri
                    2477     
0EC3 75B0F7         2478     ttout:          mov             p3,#0f7h
0EC6 20B6D1         2479                                             jb              p3.6,viout
0EC9 D204           2480                                             setb    bitizm;отжатие кнопки t
0ECB C210           2481                                             clr             bitt2
0ECD 809E           2482                                             jmp             labelE
0ECF                2483     labelf:                 
0ECF 301037         2484                             jnb             bitt2,nofizm
0ED2 75B0FB         2485                        mov          p3,#0fbh
0ED5 E5B0           2486                        mov          a,p3
0ED7 20E6E9         2487                        jb           acc.6,ttout;outF
0EDA 79B7           2488                        mov          r1,#load;parT
0EDC B70503         2489                        cjne         @r1,#5,noft1
                    2490                        ;t=10s
0EDF 020000   F     2491                        jmp          out6;ft1izm
                    2492     
0EE2 07             2493     noft1:     inc          @r1;dec         @r1
0EE3 120000   F     2494     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2495                             ;call   ind
0EE6 020000   F     2496                     jmp             out6;??????????????/
                    2497     
                    2498                             ;увеличить счетчик задержки клавиатуры
0EE9 783D           2499     outF:           mov             r0,#chkl
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    40

0EEB 7627           2500                             mov             @r0,#27h
0EED 08             2501                             inc             r0
0EEE 7610           2502                             mov             @r0,#10h
0EF0 020000   F     2503                             jmp             out6;out7
                    2504     
0EF3 020000   F     2505     noviR1:         jmp             noviR
0EF6 78B1           2506     outvich:        mov                     r0,#vichR
0EF8 7600           2507                                             mov                     @r0,#0
0EFA C214           2508                                             clr                     bitvich
0EFC C206           2509                                             clr                     bitvi11
0EFE C211           2510                                             clr                     bitmenu
0F00 D204           2511                                             setb            bitizm
0F02 78B2           2512                                             mov                     r0,#marker
0F04 76FF           2513                                             mov                     @r0,#0ffh
0F06 020000   F     2514                                             jmp                     out6    
                    2515     
0F09 3014E7         2516     nofizm:         jnb             bitvich,noviR1
0F0C 75B0DF         2517                                                     mov             p3,#0dfh
0F0F 30B6E4         2518                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0F12 78B1           2519                             mov             r0,#vichR
0F14 B61110         2520                             cjne    @r0,#11h,no11v6
0F17 75B0FB         2521                             mov                     p3,#0fbh;->
0F1A 20B6CC         2522                             jb                      p3.6,outF
0F1D 7612           2523                             mov             @r0,#12h                ;11= вычислить
0F1F 900000   F     2524     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0F22 120000   F     2525                             call    lotext
0F25 80C2           2526                             jmp             outF
                    2527             
0F27 B61210         2528     no11v6:         cjne    @r0,#12h,no12v6
0F2A 75B0FB         2529                             mov             p3,#0fbh;->
0F2D 20B6B9         2530                             jb              p3.6,outF
0F30 7611           2531                             mov             @r0,#11h;13h
0F32 900000   F     2532                             mov             dptr,#teVICH;teOUT
0F35 120000   F     2533                             call    lotext
0F38 80AF           2534                             jmp             outF
                    2535                     
0F3A B61310         2536     no12v6:         cjne    @r0,#13h,no13v6
0F3D 75B0FB         2537                                                     mov             p3,#0fbh;->
0F40 20B6A6         2538                             jb              p3.6,outF
0F43 7611           2539                             mov             @r0,#11h
0F45 900000   F     2540                             mov             dptr,#teVICH
0F48 120000   F     2541                             call    lotext
0F4B 809C           2542                             jmp             outF
                    2543     
                    2544     ;кн -> A= 0000
                    2545     ;кн -> B= +00000
0F4D 75B0FB         2546     no13v6:         mov             p3,#0fbh
0F50 E5B0           2547                             mov             a,p3
0F52 20E635         2548                             jb              acc.6,chanZ
0F55 E53B           2549                             mov             a,movrig
0F57 B40714         2550                             cjne    a,#7,kon_B      
0F5A 78B2           2551                             mov             r0,#marker      ;A= 0000
0F5C B60716         2552                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0F5F E53A           2553     rikn:           mov             a,movleft
0F61 F6             2554                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2555     ;                               29.12.06
                    2556     ;;;;;;;;;;;;;;;;;;
                    2557     ;необходимо не портить цифру в следуюем справа знакоместе
                    2558     ;т е сохранить ее в ячейке для мигания в противном случае
                    2559     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2560     ;       знакоместа
0F62 78B2           2561                                     mov             r0,#marker
0F64 7440           2562                                     mov             a,#bufind
0F66 26             2563                                             add             a,@r0                   ;a=bufind+m
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    41

                             arker
0F67 F9             2564                                             mov             r1,a
0F68 09             2565                                             inc             r1
0F69 873C           2566                                             mov             savba,@r1
0F6B 020000   F     2567                                     jmp             outF
                    2568     
0F6E 78B2           2569     kon_B:          mov             r0,#marker      ;B= +00000
0F70 B60802         2570                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0F73 80EA           2571                                             jmp             rikn
0F75                2572     mark0_8:
                    2573     ;                               29.12.06
                    2574     ;;;;;;;;;;;;;;;;;;
                    2575     ;необходимо не портить цифру в следуюем справа знакоместе
                    2576     ;т е сохранить ее в ячейке для мигания в противном случае
                    2577     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2578     ;       знакоместа ->B=+00000
0F75 78B2           2579                                             mov             r0,#marker
0F77 7440           2580                                     mov             a,#bufind
0F79 26             2581                                             add             a,@r0                   ;a=bufind+m
                             arker
0F7A F9             2582                                             mov             r1,a
0F7B 09             2583                                             inc             r1
0F7C 873C           2584                                             mov             savba,@r1
0F7E 78B2           2585                             mov             r0,#marker
0F80 06             2586                             inc             @r0             ;       сдвинуть курсор вправо на 1
0F81 C219           2587                             clr             bitmig
0F83 B60901         2588                             cjne    @r0,#9,outma
0F86 18             2589                             dec             r0;ppp
0F87 020000   F     2590     outma:          jmp             outF
                    2591     
0F8A 75B0FE         2592     chanZ:          mov             p3,#0feh
0F8D E5B0           2593                             mov             a,p3
0F8F 20E611         2594                             jb              acc.6,chanma
                    2595                             ;изм знак в старшем разряде на противоположн
0F92 E543           2596                             mov             a,bufind+3
0F94 B42B06         2597                             cjne            a,#2bh,noplus
0F97 75432D         2598                             mov                     bufind+3,#2dh           ;+->-   
0F9A 020000   F     2599                             jmp             outF
0F9D                2600     noplus:
0F9D 75432B         2601                             mov                     bufind+3,#2bh           ;-/+-
0FA0 020000   F     2602                             jmp             outF
0FA3 75B0FD         2603     chanma:         mov             p3,#0fdh
0FA6 E5B0           2604                             mov             a,p3
0FA8 20E603         2605                             jb              acc.6,outFl;labelL1
                    2606                             ;clr            bitmig
0FAB 120000   F     2607     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2608     
0FAE 020000   F     2609     outFl:                  jmp             outF
                    2610                     
                    2611     
                    2612     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2613     
                    2614     
                    2615     
0FB1 020000   F     2616     rlabelL:        jmp                     labelL
0FB4 020000   F     2617     rfindmem:               jmp             findmem
0FB7 3011FA         2618     noviR:          jnb                     bitmenu,rfindmem;17.01.07
                    2619     ;;;;;;;;;;;;;
0FBA 78B1           2620                                             mov                     r0,#vichR
0FBC 7415           2621                                             mov                     a,#15h
0FBE C3             2622                                             clr                     c
0FBF 96             2623                                             subb            a,@r0
0FC0 4016           2624                                             jc                      ri21_23
                    2625     
0FC2 75B0FB         2626                                             mov             p3,#0fbh; реж кн меню ->
0FC5 20B60A         2627                                             jb              p3.6,ri6
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    42

0FC8 78B1           2628                                             mov             r0,#vichR
0FCA B61508         2629                                             cjne    @r0,#15h,norime
0FCD 7611           2630                                             mov             @r0,#11h
0FCF 120000   F     2631     norime1:        call            lomenu
0FD2 020000   F     2632     ri6:                    jmp             out6
0FD5 06             2633     norime:         inc             @r0
0FD6 80F7           2634                                             jmp             norime1
                    2635             
0FD8 7423           2636     ri21_23:        mov                     a,#23h          ;->
0FDA C3             2637                                             clr                     c
0FDB 96             2638                                             subb            a,@r0
0FDC 4014           2639                                             jc                      ri_31
0FDE 75B0FB         2640                                             mov                     p3,#0fbh
0FE1 20B6EE         2641                                             jb                      p3.6,ri6
0FE4 B62308         2642                                             cjne            @r0,#23h,no23ri
0FE7 7621           2643                                             mov                     @r0,#21h
0FE9 120000   F     2644                                             call            lomenu
0FEC 020000   F     2645                                             jmp                     out6
0FEF 06             2646     no23ri:         inc                     @r0
0FF0 80DD           2647                                             jmp                     norime1
0FF2 B6312B         2648     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2649     
                    2650     ;;
0FF5 75B0FB         2651                                             mov                     p3,#0fbh
0FF8 20B6D7         2652                                             jb                      p3.6,ri6
                    2653     ;;
0FFB 301311         2654                                             jnb                     bitv19,gosk19
0FFE 900000   F     2655                                             mov                     dptr,#teS57_6;57,6
1001 120000   F     2656                                             call            lotext
1004 534B03         2657                                             anl                     bufind+11,#03h
1007 434B80         2658                                             orl                     bufind+11,#80h
100A C213           2659                                             clr                     bitv19
100C 020000   F     2660                                             jmp                     out6
100F 900000   F     2661     gosk19:         mov                     dptr,#teS19_2
1012 120000   F     2662                                             call            lotext
1015 534B03         2663                                             anl                     bufind+11,#03h
1018 434B80         2664                                             orl                     bufind+11,#80h
101B D213           2665                                             setb            bitv19
101D 020000   F     2666                                             jmp                     out6
                    2667     
                    2668     
                    2669     
                    2670     ;labelS2:       jmp                     out6
                    2671     
1020 7452           2672     no31ri:         mov                     a,#52h;42h              ;->
1022 C3             2673                                             clr                     c
1023 96             2674                                             subb            a,@r0
1024 40AC           2675                                             jc                      ri6
1026 75B0FB         2676                                             mov                     p3,#0fbh                   
                                  ;41,42
1029 30B609         2677                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
102C 75B0FD         2678                                             mov                     p3,#0fdh
102F 20B6A0         2679                                             jb                      p3.6,ri6
1032 020000   F     2680                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
1035 020000   F     2681     rlabelN:                jmp             labelN
1038 020000   F     2682     moutF:          jmp             outF
                    2683     ;;;;;;;;;;;;;;;;;;;;;;;;;
103B 020000   F     2684     rnnmemb:        jmp             nnmemb
                    2685     
103E                2686     nbimenu:
103E 300BFA         2687     findmem:        jnb             bitmem,rnnmemb
1041 79B0           2688                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
1043 B71113         2689                        cjne         @r1,#11h,nomem11
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    43

                    2690                        
1046 75B0FB         2691                        mov          p3,#0fbh
1049 E5B0           2692                        mov          a,p3
104B 20E6EA         2693                        jb           acc.6,moutF
104E 7712           2694                        mov          @r1,#12h
1050 900000   F     2695                        mov          dptr,#teWR      ;                       ЗАПИСЬ
1053 120000   F     2696                        call         lotext
1056 020000   F     2697                        jmp          outF
                    2698     
1059 B71213         2699     nomem11:   cjne         @r1,#12h,nomem12
105C 75B0FB         2700                             mov             p3,#0fbh
105F E5B0           2701                        mov          a,p3
1061 20E6D4         2702                        jb           acc.6,moutF
1064 7713           2703                        mov          @r1,#13h
1066 900000   F     2704                        mov          dptr,#teLIST            ;ПРОСМОТР
1069 120000   F     2705                        call         lotext
106C 020000   F     2706                        jmp          outF
106F B71313         2707     nomem12:         cjne           @r1,#13h,nomem13
1072 75B0FB         2708                                             mov             p3,#0fbh
1075 E5B0           2709                        mov          a,p3
1077 20E6BE         2710                        jb           acc.6,moutF
107A 7714           2711                        mov          @r1,#14h
107C 900000   F     2712                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
107F 120000   F     2713                        call         lotext
1082 020000   F     2714                          jmp                outF
                    2715                             
1085 B71413         2716     nomem13:cjne            @r1,#14h,labelL
1088 75B0FB         2717                             mov             p3,#0fbh
108B E5B0           2718                        mov          a,p3
108D 20E6A8         2719                        jb           acc.6,moutF
1090 7711           2720                        mov          @r1,#11h
1092 900000   F     2721                        mov          dptr,#teCLE                     ;ОЧИСТКА
1095 120000   F     2722                        call         lotext
1098 020000   F     2723                          jmp                outF
109B                2724     labelL: 
                    2725                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
109B 78B0           2726                                     mov                     r0,#level
109D B6210E         2727                                     cjne            @r0,#21h,nobl21
10A0 7622           2728                                     mov                     @r0,#22h                ;->БЛОК 
10A2 900000   F     2729                                     mov                     dptr,#teBL
10A5 120000   F     2730     me21_22:call            lotext
                    2731                             
10A8 120000   F     2732                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
10AB 020000   F     2733                                     jmp                     outF
                    2734     
10AE B62207         2735     nobl21: cjne            @r0,#22h,nobl22
10B1 900000   F     2736                                     mov                     dptr,#teFULL
10B4 7621           2737                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2738     
10B6 80ED           2739                                     jmp                     me21_22
                    2740     
                    2741     ;labl21:           cjne @r0,#21h,nolev1
                    2742     ;                       mov             p3,#0fbh
                    2743     ;                       mov             a,p3
                    2744     ;                       jb              acc.6,loutF
                    2745     ;                       cjne    @r0,#21h,labl22
                    2746     ;                       mov             @r0,#22h
                    2747                             ;БЛОК
                    2748     ;                       call    lotext
                    2749     ;                       jmp             outF
                    2750     ;labl22:                mov             @r0,#21h
                    2751                             ;ПОЛНАЯ
                    2752     ;                       call    lotext
                    2753     ;                       jmp             outF
                    2754                      
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    44

10B8 B62325         2755     nobl22:         cjne    @r0,#23h,go31l
10BB 75B0FB         2756     rigblo:         mov             p3,#0fbh
10BE 20B629         2757                                             jb              p3.6,llev2
10C1                2758     labL2:    ;  уст курсор в правую позицию 
                    2759                                     ;       кнопка                  ->
                    2760     ;;;;;;;;;;;;;;;;;;
                    2761     ;необходимо не портить цифру в следуюем справа знакоместе
                    2762     ;т е сохранить ее в ячейке для мигания в противном случае
                    2763     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2764     ;       знакоместа
10C1 78B2           2765                                             mov             r0,#marker
10C3 7440           2766                                     mov             a,#bufind
10C5 26             2767                                             add             a,@r0                   ;a=bufind+m
                             arker
10C6 F9             2768                                             mov             r1,a
10C7 09             2769                                             inc             r1
10C8 873C           2770                                             mov             savba,@r1
10CA C219           2771                                             clr             bitmig
                    2772     ;;;;;;;;;;;;;;;;
10CC 78B2           2773                       mov           r0,#marker      ;курсор справа  ?
10CE E53B           2774                             mov             a,movrig
10D0 C3             2775                             clr             c
10D1 96             2776                             subb    a,@r0
10D2 6006           2777                             jz         equ1l
10D4 E53B           2778                             mov             a,movrig;уст в правую позицию
10D6 F6             2779                             mov             @r0,a
10D7 020000   F     2780                             jmp             outF                                     
10DA E53A           2781     equ1l:          mov             a,movleft;уст в левую позицию
10DC F6             2782                             mov             @r0,a   
10DD 020000   F     2783     loutF:  jmp             outF
                    2784                     
                    2785     
10E0 B63102         2786     go31l:          cjne    @r0,#31h,go41l
10E3 80D6           2787                             jmp             rigblo
10E5 B6410B         2788     go41l:          cjne    @r0,#41h,norig2
10E8 80D1           2789                             jmp             rigblo
                    2790     
10EA 75B0FD         2791     llev2:          mov             p3,#0fdh
10ED 20B6ED         2792                             jb              p3.6,loutF
10F0 020000   F     2793                             jmp             labelL1
                    2794     
                    2795     ;->
10F3 C3             2796     norig2:    clr          c               ;32,33,34,42
10F4 7431           2797                             mov             a,#31h
10F6 96             2798                             subb    a,@r0
10F7 50E4           2799                             jnc             loutF
10F9 75B0FB         2800     rigblok:        mov             p3,#0fbh  ;32,33,34,42
10FC 20B626         2801                             jb              p3.6,lev2go
10FF                2802     labelN: 
                    2803                             ;                               29.12.06
                    2804     ;;;;;;;;;;;;;;;;;;
                    2805     ;необходимо не портить цифру в следуюем справа знакоместе
                    2806     ;т е сохранить ее в ячейке для мигания в противном случае
                    2807     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2808     ;       знакоместа
10FF 78B2           2809                                             mov             r0,#marker
1101 7440           2810                                     mov             a,#bufind
1103 26             2811                                             add             a,@r0                   ;a=bufind+m
                             arker
1104 F9             2812                                             mov             r1,a
1105 09             2813                                             inc             r1
1106 873C           2814                                             mov             savba,@r1
                    2815     ;;;;;;;;;;;;;;;;;;;
1108 78B2           2816                             mov             r0,#marker      ;курсор справа  ?
110A E53B           2817                             mov             a,movrig
110C C3             2818                             clr             c
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    45

110D 96             2819                             subb    a,@r0
110E 7006           2820                             jnz        noequ1
1110 E53A           2821                             mov             a,movleft;уст в крайнюю левую позицию
1112 F6             2822                             mov             @r0,a
1113 020000   F     2823                             jmp             outF
1116                2824     noequ1: ;29.12.06
                    2825     ;;;;;;;;;;;;;;;;;;
                    2826                             ;восстан знакоместо при мигании
                    2827                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1116 78B2           2828                                     mov             r0,#marker
1118 7440           2829                                     mov             a,#bufind
111A 26             2830                                     add             a,@r0                   ;a=bufind+marker
111B F9             2831                                     mov             r1,a
                    2832                                     ;mov            @r1,savba
111C 09             2833                                     inc             r1
111D 873C           2834                                     mov             savba,@r1
                    2835     ;;;;;;;;;;;;;;;;        
111F 120000   F     2836                             call    marri;уст сдвиг в правую        позицию
1122 020000   F     2837                             jmp             outF
1125 75B0FD         2838     lev2go:         mov             p3,#0fdh
1128 30B603         2839                             jnb             p3.6,rlabelL1
112B 020000   F     2840                             jmp             outF
                    2841     
112E 020000   F     2842     rlabelL1:       jmp             labelL1
                    2843     
1131                2844     nnmemb:
                    2845                                     
                    2846     
                    2847     
1131                2848     norim6:    ;kn menu
1131 D083           2849     out6:           pop             dph
1133 D082           2850                                     pop             dpl
1135 D007           2851                                     pop             rr7     
1137 D006           2852                                     pop             rr6
1139 D005           2853                                     pop             rr5
113B D004           2854                                     pop             rr4
113D D003           2855                                     pop             rr3
113F D002           2856                                     pop             rr2
1141 D001           2857                                     pop             rr1                             
1143 D000           2858                                     pop             rr0
1145 D0D0           2859                                     pop             psw
1147 D0E0           2860                                     pop             acc
                    2861     ;clr            bitmig
                    2862                               ; mov         EIE2,#30H
                    2863                              ;  mov         a,P3IF
                    2864                             ;       anl             a,#0bfh
                    2865                             ;       mov             P3IF,a
                    2866                             ;       mov             P3,#0c0h
                    2867                             ;;;;;;
1149 75AD00         2868                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
114C 75B0C0         2869                             mov             P3,#0c0h
114F C219           2870                             clr             bitmig
1151 E586           2871                                             mov             a,P6            ;p6.4=0
1153 54EF           2872                             anl             a,#0efh
1155 F586           2873                             mov             P6,a
1157 00             2874                             nop
1158 00             2875                             nop
                    2876                                     
1159 E586           2877                             mov             a,P6                    ;p6.4=1 
115B 4410           2878                             orl             a,#10h
115D F586           2879                             mov             P6,a    
                    2880                             ;;;;;;;;;
115F E5DA           2881                             mov             a,PCA0CPM0;     
1161 4446           2882                             orl             a,#46h;anl              a,#0fbh
1163 F5DA           2883                             mov             PCA0CPM0,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    46

                    2884     
1165 75CDD0         2885                             mov             TH2,#0d0h
1168 75CC00         2886                             mov             TL2,#00
                    2887     
116B D2CA           2888                             setb            T2CON.2
116D D2AD           2889                             setb            ET2;IE.5
                    2890                             ;;;;;;;;                    
116F 32             2891                             reti
                    2892     
1170 020000   F     2893     rknMEM:                 jmp             knMEM
1173 020000   F     2894     knKMP:             jmp          out7
1176 020000   F     2895     rout7:                  jmp             out7    
1179 020000   F     2896     rlabelH:                jmp             labelH
117C 020000   F     2897     rknNUL:         jmp             knNUL
117F 020000   F     2898     rknleft:                jmp             knleft
1182                2899     keyb2:  ;IE7
1182 75E700         2900                                     mov             EIE2,#00H
1185 75AD00         2901                                     mov             P3IF,#00
                    2902     
1188 C0E0           2903                                     push    acc
118A C0D0           2904                                     push    psw
118C C000           2905                                     push    rr0
118E C001           2906                                     push    rr1
1190 C002           2907                                     push    rr2
1192 C003           2908                                     push    rr3
1194 C004           2909                                     push    rr4
1196 C005           2910                                     push    rr5
1198 C006           2911                                     push    rr6
119A C007           2912                                     push    rr7
119C C082           2913                                     push    dpl
119E C083           2914                                     push    dph
                    2915                                     ;clr            bitmig
                    2916                       ;;;;;;;;;;;;;;
11A0 120000   F     2917                               call  z_01s   ;0,1s
                    2918                               ;восстан знакоместо при мигании
                    2919                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
11A3 78B2           2920                                     mov             r0,#marker
11A5 7440           2921                                     mov             a,#bufind
11A7 26             2922                                     add             a,@r0                   ;a=bufind+marker
11A8 F9             2923                                     mov             r1,a
11A9 A73C           2924                                     mov             @r1,savba
                    2925                                     ;;;;;;;;;;;
                    2926     
11AB E5B0           2927                             mov             a,p3
11AD 20E7C6         2928                                     jb              acc.7,rout7
11B0 E5B0           2929                                     mov             a,p3
11B2 74FF           2930                                     mov             a,#0ffh         ; p3.(5-0)<-3f
11B4 F5B0           2931                                     mov             p3,a
11B6 E5B0           2932                                     mov             a,p3
11B8 30E7BB         2933                                     jnb             acc.7,rout7             ;error
11BB 3004BB         2934                                     jnb             bitizm,rlabelH
11BE 75B0FE         2935                                     mov             p3,#0feh                ;реж IZM
11C1 E5B0           2936                                     mov             a,p3
11C3 30E7B6         2937                                     jnb             acc.7,rknNUL
11C6 75B0FD         2938                                     mov             p3,#0fdh
11C9 E5B0           2939                                     mov             a,p3
11CB 30E7A5         2940                                     jnb             acc.7,knKMP
11CE 75B0FB         2941                                     mov             p3,#0fbh
11D1 E5B0           2942                                     mov             a,p3
11D3 30E7A9         2943                                     jnb             acc.7,rknleft
11D6 75B0F7         2944                                     mov             p3,#0f7h
11D9 E5B0           2945                                     mov             a,p3
11DB 30E76F         2946                                     jnb             acc.7,knAVP
11DE 75B0EF         2947                                 mov         p3,#0efh
11E1 E5B0           2948                                     mov             a,p3
11E3 30E78A         2949                                     jnb             acc.7,rknMEM
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    47

11E6 75B0DF         2950                                     mov             p3,#0dfh
11E9 E5B0           2951                                     mov             a,p3    
11EB 30E722         2952                                     jnb             acc.7,knmenu
11EE                2953     an_t7:             ;;;;;;;;;;;;
                    2954                     
                    2955     ;       clr             c
                    2956     ;       mov             r1,#parN
                    2957     ;
                    2958     ;                       mov             r0,#diap
                    2959     ;                       mov             a,#6            
                    2960     ;                       subb    a,@r0
                    2961     ;                       jnc             goto7           ;         ;10-2..10-8
                    2962                               
                    2963     ;                       mov             @r1,#2          ;10-9..10-11            
                    2964                             
                    2965                             ;;;;;;;;;;;;
11EE 799A           2966     goto7:                  mov             r1,#parT
11F0 783D           2967                                     mov             r0,#chkl
11F2 B70108         2968                                     cjne    @r1,#1,not1_7
11F5 7600           2969                                     mov             @r0,#00
11F7 08             2970                                     inc             r0
11F8 7602           2971                                     mov             @r0,#2
11FA 020000   F     2972                                     jmp             out7
                    2973                             
                    2974     
11FD B70208         2975     not1_7:                 cjne    @r1,#2,not2_7
1200 760E           2976                                             mov             @r0,#0eh;00
1202 08             2977                                     inc             r0
1203 7638           2978                                     mov             @r0,#38h;20
1205 020000   F     2979                                     jmp             out7
1208 7600           2980     not2_7:                 mov             @r0,#00
120A 08             2981                                     inc             r0
120B 76C8           2982                                     mov             @r0,#200
120D 020000   F     2983     merr:           jmp             out7
                    2984     
                    2985     
1210 2006FA         2986     knmenu: jb              bitvi11,merr
1213 20151C         2987                                     jb              biteizm,menuoff
                    2988                                     ;;;;;
1216 201225         2989                                     jb              bitklb,klboff
1219 C204           2990                              clr            bitizm          ;off IZM
121B D211           2991                                     setb            bitmenu
121D C217           2992                                     clr             bitoll
121F 900000   F     2993                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1222 120000   F     2994                                     call    lotext
1225 534B03         2995                                     anl                     bufind+11,#03h ;погасить запятые
1228 120000   F     2996                                     call            ind
122B 78B1           2997                                     mov             r0,#vichR
122D 7611           2998                                     mov             @r0,#11h
122F 020000   F     2999                                     jmp             onmem11
1232                3000     menuoff:
1232 78B1           3001                                     mov             r0,#vichR
1234 7600           3002                                     mov             @r0,#00
1236 C215           3003                                     clr             biteizm
1238 120000   F     3004                                     call    loadus
123B 020000   F     3005                                     jmp             out7
                    3006     
123E C212           3007     klboff:                 clr             bitklb
1240 120000   F     3008                                                     call            loadUS
1243 78B1           3009                                                     mov             r0,#vichR
1245 7600           3010                                                     mov             @r0,#00
1247 020000   F     3011                                                     jmp             out7
                    3012     
124A 020000   F     3013     rendkalib:              jmp             endkalib
                    3014     
124D 2012FA         3015     knAVP:  jb              bitklb,rendkalib        
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    48

1250 200505         3016                                     jb              bitavp,meavp
1253 D205           3017                                     setb    bitavp
1255 020000   F     3018                                     jmp             onmem11
1258 C205           3019     meavp:                  clr             bitavp
125A 020000   F     3020                                     jmp             onmem11
                    3021     
125D 201207         3022     knleft: jb              bitklb,lefkl
                    3023                                     ;;;;;;;;
1260 79AE           3024                                mov          r1,#diap
1262 07             3025                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1263 B70A03         3026                                     cjne    @r1,#0ah,nodi6
1266 17             3027                                     dec             @r1
1267 8085           3028     lefkl:  jmp             an_t7
                    3029     
1269                3030     nodi6:             ;    cjne    @r1,#0,an_t7
1269 120000   F     3031                                      call    clmassix
126C 78B3           3032                                     mov             r0,#summa
126E 120000   F     3033                                     call    clear4  
1271 786A           3034                                     mov             r0,#rez_A0
1273 120000   F     3035                                     call    clear4
1276 C20F           3036                                     clr             bitnul          ;гасить светодиод НУЛЬ  
1278 120000   F     3037                                     call    loadUS
127B 020000   F     3038                                jmp          an_t7
                    3039     
127E 200F0F         3040     knNUL:                  jb              bitnul,ybnul
1281 D20F           3041                                     setb    bitnul
1283 789C           3042                                     mov             r0,#rez_A3      ;A3
1285 120000   F     3043                                     call    resar2
1288 786A           3044                                     mov             r0,#rez_A0      
128A 120000   F     3045                                     call    saver2;A0<-A3
128D 020000   F     3046                                     jmp             goto7;an_t7
                    3047     
1290 C20F           3048     ybnul:                  clr             bitnul
1292 900000   F     3049                                      mov    DPTR,#ch0 
1295 120000   F     3050                                     CALL   ldc_long          ; r2..r5 <-- 0
1298 786A           3051                                     mov             r0,#rez_A0      ;A0=0
129A 120000   F     3052                                     call    saver2
129D 020000   F     3053                                     jmp             goto7;an_t7
                    3054     
12A0 301021         3055     labelH:                 jnb             bitt2,nolah
12A3 75B0FB         3056                                     mov             p3,#0fbh   ;вход в режим изм Т
12A6 534A8F         3057                                     anl             bufind+10,#8fh
12A9 79B7           3058                                     mov             r1,#load;parT
12AB 20B70D         3059                                     jb              p3.7,rhnot1
12AE B70003         3060                                     cjne    @r1,#0,inct;
12B1 020000   F     3061                                     jmp             out7;hyest6
12B4 17             3062     inct:                   dec             @r1                     ;Tизм+1
                    3063                             
12B5 120000   F     3064                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
12B8                3065     hnot2:          ;       call    ind
12B8 020000   F     3066                                     jmp             out7
                    3067     
12BB 020000   F     3068      rhnot1:                jmp             hnot1
                    3069      ;rnoviR:       jmp             noviR
12BE 020000   F     3070      rlabelK:       jmp             labelK
12C1 020000   F     3071      rlabelI:       jmp             labelI          
                    3072      ;;;;;;;;;;;;;;;;;;;
12C4 3014F7         3073     nolah:          jnb             bitvich,rlabelK 
                    3074                                     
                    3075                             ;;;;;;
                    3076                             ;увеличить счетчик задержки клавиатуры
                    3077                     ;;              mov             r0,#chkl
                    3078                     ;;              mov             @r0,#27h
                    3079                     ;;              inc             r0
                    3080                     ;;              mov             @r0,#10h
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    49

                    3081                             ;;;;;;
                    3082     
12C7 78B1           3083                             mov             r0,#vichR
12C9 B61128         3084                             cjne    @r0,#11h,rhnor11;rlabelI;;
12CC 75B0FB         3085                             mov             p3,#0fbh   ;<-
12CF 20B730         3086                             jb              p3.7,noh37;routF
12D2 B6110B         3087                     cjne    @r0,#11h,hr12
12D5 7612           3088                             mov             @r0,#12h;11h;= вычислить
12D7 900000   F     3089                             mov             dptr,#teIZMK    ;       изм конст;teVICH
12DA 120000   F     3090     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
12DD 020000   F     3091                             jmp             goto7;outF
12E0 B61207         3092     hr12:           cjne    @r0,#12h,hnor12
12E3 7611           3093     lovich:         mov             @r0,#11h
12E5 900000   F     3094                             mov             dptr,#teVICH
12E8 80F0           3095                             jmp             hvi1113         
12EA B61307         3096     hnor12:         cjne    @r0,#13h,rhnor11
12ED 7612           3097     loizmk:         mov             @r0,#12h
12EF 900000   F     3098                             mov             dptr,#teIZMK    ;       изм конст
                    3099                                        
12F2 80E6           3100                             jmp             hvi1113
                    3101     
12F4 804C           3102     rhnor11:                jmp             hnor11
                    3103     
12F6 8057           3104     rvvizko:                jmp             vvizko
12F8 C214           3105     vioutF:                 clr             bitvich
12FA C206           3106                                                     clr             bitvi11
12FC 020000   F     3107                                                     jmp             outF
12FF 020000   F     3108     toutF:                  jmp     outF
                    3109     
1302 75B0F7         3110     noh37:          mov             p3,#0f7h
1305 20B7F7         3111                             jb              p3.7,toutF;vioutF
1308 B611EB         3112                             cjne    @r0,#11h,rvvizko
130B D206           3113                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
130D D204           3114              setb   bitizm
130F 534B07         3115                              anl            bufind+11,#07h
1312 434B10         3116                              orl            bufind+11,#10h;точка после 1 знакоместа
1315 020000   F     3117     routF:          jmp             out7;goto7;outF
                    3118     
                    3119     
                    3120     
1318 80E8           3121     rnoh37:         jmp             noh37
                    3122     
131A B6120D         3123     norr11:         cjne    @r0,#12h,norr12
131D 75B0FB         3124                             mov             p3,#0fbh   ;<-
1320 20B7F5         3125                             jb              p3.7,rnoh37;routF
1323 760B           3126                             mov             @r0,#11;12->11
1325 80BC           3127                             jmp             lovich
                    3128     
1327 020000   F     3129     labelI2:                jmp             labelI
132A B613FA         3130     norr12:         cjne    @r0,#13h,labelI2
132D 75B0FB         3131                             mov             p3,#0fbh   ;<-
1330 20B7E5         3132                             jb              p3.7,rnoh37
1333 7612           3133                             mov             @r0,#12h
1335 80B6           3134                             jmp             loizmk
                    3135                             ;;;;
1337 C214           3136     clrvich:                clr             bitvich
1339 D204           3137                             setb    bitizm
133B A8B2           3138                             mov             r0,marker
133D 76FF           3139                             mov             @r0,#0ffh
133F 020000   F     3140                              jmp    goto7;  routF
                    3141     
                    3142     ;rnoh37:                jmp             noh37
                    3143      ;ввод изм конст
1342 B612E5         3144     hnor11:         cjne    @r0,#12h,norr12;clrvich
1345 75B0FB         3145                              mov            p3,#0fbh   
1348 20B7CD         3146                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    50

134B 7611           3147                             mov             @r0,#11h
134D 8094           3148                             jmp             lovich
                    3149     
134F 78B1           3150     vvizko:         mov             r0,#vichR
1351 E6             3151                             mov             a,@r0
                    3152                     ;       cjne    @r0,#12h,clrvich
1352 B412E2         3153                             cjne    a,#12h,clrvich
1355 7621           3154                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
1357 78B2           3155                             mov             r0,#marker
1359 7604           3156                             mov             @r0,#4;9
135B 753A04         3157                             mov             movleft,#4
135E 753B07         3158                             mov             movrig,#7
1361 900000   F     3159                             mov             dptr,#teAequ0
1364 120000   F     3160                             call    lotext
                    3161                             
1367 120000   F     3162                             call    outA
136A 534B0F         3163                             anl                     bufind+11,#0fh
                    3164             ;       mov             a,bufind+11
                    3165             ;       anl             a,#0f0h
                    3166             ;       mov             bufind+11,a
136D 434B40         3167                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3168                             
1370 020000   F     3169                             jmp             goto7;routF
                    3170     ;hnor13:                jmp             hnor12          
1373 B6210C         3171     izchi:          cjne    @r0,#21h,tlabelI
                    3172     ;<- при вводе цифр А                            
                    3173                     ;        mov            p3,#0fbh   
                    3174                     ;       jnb             p3.7,li21
                    3175             ;clr            bitmig
1376 78B2           3176                             mov             r0,#marker
1378 16             3177                             dec             @r0
1379 B60201         3178                             cjne    @r0,#2,li21
137C 06             3179                             inc             @r0;marker=3 +/-
137D C219           3180     li21:           clr             bitmig
137F 020000   F     3181                             jmp             goto7;outF
                    3182     
1382 020000   F     3183     tlabelI:        jmp             labelI
                    3184     
                    3185     ;                       load    0 1 2 3 4 5             
1385 06050403       3186     sootv:          db              6,5,4,3,2,1;parT
1389 0201                    
                    3187     ;
                    3188     
                    3189     ;нажата кн ввод при наборе Т
138B 75B0F7         3190     hnot1:                  mov             p3,#0f7h
138E 20B784         3191                                     jb              p3.7,routF;out7
1391 B70549         3192                                     cjne    @r1,#5,nohnot1  ;r1=load
1394 794A           3193                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
1396 E7             3194                                     mov             a,@r1
1397 548F           3195                                     anl             a,#8fh
1399 4440           3196                                     orl             a,#40h;.6
139B F7             3197                                     mov             @r1,a
139C 8000           3198                                     jmp             loadb
                    3199                                     
                    3200                                     
139E 789A           3201     loadB:                  mov             r0,#parT
13A0 900000   F     3202                                     mov             dptr,#sootv
13A3 79B7           3203                                     mov             r1,#load                
13A5 E7             3204                                     mov             a,@r1;load
13A6 93             3205                                     movc    a,@a+dptr
13A7 F6             3206                                     mov             @r0,a
13A8 120000   F     3207                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3208                                      ;r4=b1 r5=b2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    51

13AB 120000   F     3209                                     call    iniacp;инициализация АЦП
13AE 120000   F     3210                                     call    loadUS
13B1 120000   F     3211                                     call    clmassix        
13B4 D204           3212                                     setb    bitizm
13B6 C210           3213                                     clr             bitt2
                    3214     
13B8 534A8F         3215                                     anl             bufind+10,#8fh
13BB C3             3216                                      clr            c
13BC 789A           3217                                  mov                r0,#parT
13BE 79AF           3218                                      mov            r1,#parN
13C0 7402           3219                                  mov                a,#2
13C2 96             3220                                 subb                a,@r0
13C3 5005           3221                                 jnc                 loadB2
13C5 7701           3222                                     mov             @r1,#1;N=1         ;T>=2
13C7 020000   F     3223     bout7:                  jmp             goto7;out7
                    3224     
13CA B702FA         3225     loadB2:                 cjne    @r1,#2,bout7
13CD 7702           3226                                     mov             @r1,#2;N=2
13CF 020000   F     3227                                     jmp             goto7;out7
13D2                3228     nohnot2:                ;в буфере 1 зажечь <=0,1s
13D2 794A           3229                                     mov             r1,#bufind+10
13D4 E7             3230                                     mov             a,@r1
13D5 4410           3231                                     orl             a,#10h;.4
13D7 F7             3232                                     mov             @r1,a
13D8 120000   F     3233                                     call            ind
13DB 80C1           3234                                     jmp             loadB
13DD B704F2         3235     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
13E0 794A           3236                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
13E2 E7             3237                                     mov             a,@r1
13E3 4420           3238                                     orl             a,#20h;.5
13E5 F7             3239                                     mov             @r1,a
13E6 80B6           3240                                     jmp             loadB
                    3241     
                    3242     ;кнопка ПАМЯТЬ
13E8 C204           3243     knMEM:                  clr             bitizm          ;off IZM
13EA 900000   F     3244                                     mov             dptr,#teLIST;CLE
13ED 120000   F     3245                                     call    lotext    ;в буф2 записать ОЧИСТКА
13F0 D20B           3246                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
13F2 534BEF         3247                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
13F5 434B01         3248                                     orl             bufind+11,#01;зажечь светодиод память
13F8 120000   F     3249                                     call            ind
13FB 78B0           3250                                     mov             r0,#level
13FD 7613           3251                                     mov             @r0,#13h;11h
13FF 783D           3252     onmem11:                mov             r0,#chkl
1401 7603           3253                                     mov             @r0,#03
1403 08             3254                                     inc             r0
1404 76E8           3255                                     mov             @r0,#0e8h               ;1000
1406 020000   F     3256                                     jmp             out7;goto7;out7
                    3257     
1409 020000   F     3258     rnomemk:                jmp             nomemk          ;
                    3259     
140C 78B0           3260     outkmem:        mov                     r0,#level
140E 7600           3261                                             mov                     @r0,#0
1410 78B1           3262                                             mov                     r0,#vichR
1412 7600           3263                                             mov                     @r0,#0
1414 C20B           3264                                             clr                     bitmem
1416 C214           3265                                             clr                     bitvich
1418 C206           3266                                             clr                     bitvi11
141A C211           3267                                             clr                     bitmenu
141C D204           3268                                             setb            bitizm
141E 78B2           3269                                             mov                     r0,#marker
1420 76FF           3270                                             mov                     @r0,#0ffh
1422 020000   F     3271                                             jmp                     vvod2_10
                    3272                                             
                    3273     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    52

1425                3274     offmenum:       
1425 020000   F     3275                                                     jmp                     goto7   
                    3276             
1428                3277     labelK:
                    3278     
                    3279     ;;;;;;;;;;;;
1428 300BDE         3280                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
                    3281                                     ;;;;;;;
142B 75B0DF         3282                                     mov             p3,#0dfh;(код кнопки меню)
142E 30B7F4         3283                                     jnb             p3.7,offmenum
                    3284                                     ;;;;;;;
1431 75B0EF         3285                                     mov                     p3,#0efh
1434 30B7D5         3286                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1437 78B0           3287                                      mov            r0,#level
1439 B6114E         3288                               cjne          @r0,#11h,klev1;nome11
143C 75B0FB         3289     lefmem11:         mov           p3,#0fbh
143F E5B0           3290                               mov           a,p3
1441 20E70E         3291                               jb            acc.7,rkvvod0
1444 B6110E         3292                               cjne          @r0,#11h,locle          ;<-memory
1447 7614           3293                               mov           @r0,#14h
1449 900000   F     3294     lolist:           mov           dptr,#teSTAT
144C 120000   F     3295                               call          lotext           ;СТАТИСТИКА
144F 020000   F     3296                               jmp   goto7;  outF
                    3297     
1452 020000   F     3298     rkvvod0:        jmp             kvvod0
                    3299     
                    3300     
1455 B6120B         3301     locle:          cjne            @r0,#12h,lowr           ;<-memory
1458 7611           3302                               mov           @r0,#11h                   ;ОЧИСТКА
145A 900000   F     3303     loadcle:          mov           dptr,#teCLE
145D 120000   F     3304                               call          lotext
1460 020000   F     3305                               jmp           goto7;outF
                    3306     
1463 B6130B         3307     lowr:                   cjne    @r0,#13h,lostat
1466 7612           3308                                             mov             @r0,#12h
1468 900000   F     3309      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
146B 120000   F     3310                             call    lotext
146E 020000   F     3311                             jmp             goto7;outF
                    3312     
1471 7613           3313     lostat:         mov             @r0,#13h
1473 900000   F     3314                                     mov             dptr,#teLIST              ;ПРОСМОТР
1476 120000   F     3315                             call    lotext
1479 020000   F     3316                             jmp             goto7;outF
                    3317     
147C B6141A         3318     me_14:cjne              @r0,#14h,klev22
147F 7613           3319                                             mov             @r0,#13h
1481 900000   F     3320                             mov             dptr,#teLIST              ;;ПРОСМОТР
1484 120000   F     3321                             call    lotext
1487 020000   F     3322                             jmp             goto7
148A B61202         3323      klev1:          cjne   @r0,#12h,klev2
148D 80AD           3324                             jmp             lefmem11
148F B61302         3325     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
1492 80A8           3326                             jmp             lefmem11
1494 B61402         3327     klev3:           cjne   @r0,#14h,klev22;
1497 80A3           3328                             jmp             lefmem11
                    3329     ;<- vvod на более низких уровнях
1499 B62117         3330     klev22:         cjne    @r0,#21h,klev21
149C 75B0FB         3331     lev220:         mov             p3,#0fbh
149F 20B76F         3332                             jb              p3.7,kgo23
14A2 B6210B         3333                             cjne    @r0,#21h,kfullr
14A5 7622           3334                             mov             @r0,#22h
14A7 900000   F     3335                             mov             dptr,#teBL
14AA 120000   F     3336                             call    lotext
14AD 020000   F     3337                             jmp             goto7;outF
14B0 020000   F     3338     kfullr:         jmp             kfull                           
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    53

14B3 B6220E         3339     klev21:         cjne    @r0,#22h,klev23
14B6 80E4           3340                             jmp             lev220
                    3341     
14B8 020000   F     3342     rlabL2:         jmp             labL2
14BB 020000   F     3343     rlabM:          jmp             labM
14BE 020000   F     3344     ques:                   jmp             out7
14C1 020000   F     3345     ddoutfr:        jmp             ddoutf
                    3346     
14C4 B623F4         3347     klev23:          cjne   @r0,#23h,rlabM
14C7 75B0FB         3348                              mov    p3,#0fbh
14CA 30B7F1         3349                              jnb            p3.7,ques;errr labL2
14CD 75B0F7         3350                              mov    p3,#0f7h
14D0 20B7EE         3351                              jb             p3.7,ddoutfr
                    3352                                             ;       считать с индикатора  
14D3 C3             3353                                     clr                     c
14D4 E547           3354                                mov          a,bufind+7      
14D6 9430           3355                                      subb           a,#30h
14D8 B40002         3356                                      cjne           a,#0,chaibl
14DB 7401           3357                                      mov            a,#1                    ;номера блоков 1..4
14DD                3358     chaibl:         
14DD F538           3359                                             mov             nblok,a
                    3360                                
                    3361                              ;очистить блок памяти с набранным номером
                    3362                              ;150h..1000h( 150h+nblok*320h)
14DF 120000   F     3363                                     call            adrblok         ;dptr-
                    3364     
14E2 79B8           3365                                     mov                     r1,#work                ;обьем блок
                             а
14E4 7703           3366                                     mov                     @r1,#03
14E6 09             3367                                     inc                     r1
14E7 7720           3368                                     mov                     @r1,#20h                        ;32
                             0h
                    3369     
14E9                3370     goonoff:
14E9 E4             3371                                     clr                     a
14EA F0             3372                                     movx            @dptr,a
14EB A3             3373                                     inc                     dptr
                    3374     
14EC 79B9           3375                                     mov                     r1,#work+1
14EE 120000   F     3376                                     call            chminus
14F1 78B8           3377                                     mov             r0,#work
14F3 E6             3378                             mov             a,@r0
14F4 30E7F2         3379                             jnb             acc.7,goonoff
                    3380     
14F7 C20B           3381                              clr    bitmem  ;сбр признак памяти 
14F9 D204           3382                              setb   bitizm
                    3383                             ;после очистки блока сохраняем в saven_bl 
                    3384                             ;адрес второго с конца измерения потому
                    3385                             ;добавляем 8;;
14FB 120000   F     3386                             call            adrblok;dptr-начало блока
                    3387                     ;       mov                     a,dpl
                    3388                     ;       add                     a,#8
                    3389                     ;       mov                     dpl,a
                    3390                     ;       mov                     a,dph
                    3391                     ;       addc            a,#0
                    3392                     ;       mov                     dph,a
14FE 120000   F     3393                             call            save_hl;подготовка записи в начало блока
                    3394                             ;;;;;
                    3395     
1501 78B2           3396                              mov            r0,#marker
1503 76FF           3397                              mov            @r0,#0ffh
1505 020000   F     3398                                     jmp                     vvod2_10
1508 020000   F     3399                              jmp    goto7
                    3400     
150B 020000   F     3401     rddoutf:        jmp             ddoutf
150E 020000   F     3402     rgo23no:        jmp             go23no
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    54

                    3403     
                    3404     ;vvod   БЛОК->БЛОК 00           
1511 75B0F7         3405     kgo23:           mov    p3,#0f7h
1514 20B7F4         3406                             jb              p3.7,rddoutf
1517 B621F4         3407                             cjne    @r0,#21h,rgo23no
                    3408                             ;очистить память 150..dd0h
                    3409                             ;1й блок
151A 900150         3410                              mov                    dptr,#150h
151D 79B8           3411                                     mov                     r1,#work                ;обьем блок
                             а
151F 7703           3412                                     mov                     @r1,#03
1521 09             3413                                     inc                     r1
1522 7720           3414                                     mov                     @r1,#20h                        ;32
                             0h
                    3415     
1524                3416     gooff1:
1524 E4             3417                                     clr                     a
1525 F0             3418                                     movx            @dptr,a
1526 A3             3419                                     inc                     dptr
                    3420     
1527 79B9           3421                                     mov                     r1,#work+1
1529 120000   F     3422                                     call            chminus
152C 78B8           3423                                     mov             r0,#work
152E E6             3424                             mov             a,@r0
152F 30E7F2         3425                             jnb             acc.7,gooff1
1532 900150         3426                             mov                     dptr,#150h;начало 1 го блока
                    3427                             ;после очистки блока сохраняем в saven_bl 
                    3428                             ;адрес второго с конца измерения потому
                    3429                             ;добавляем 8;;
                    3430     ;                               call            save_hl;подготовка записи в начало блока
                    3431     ;2й блок
1535 900470         3432                             mov                     dptr,#470h
1538 79B8           3433                                     mov                     r1,#work                ;обьем блок
                             а
153A 7703           3434                                     mov                     @r1,#03
153C 09             3435                                     inc                     r1
153D 7720           3436                                     mov                     @r1,#20h                        ;32
                             0h
                    3437     
153F                3438     gooff2:
153F E4             3439                                     clr                     a
1540 F0             3440                                     movx            @dptr,a
1541 A3             3441                                     inc                     dptr
                    3442     
1542 79B9           3443                                     mov                     r1,#work+1
1544 120000   F     3444                                     call            chminus
1547 78B8           3445                                     mov             r0,#work
1549 E6             3446                             mov             a,@r0
154A 30E7F2         3447                             jnb             acc.7,gooff2
154D 900470         3448                             mov                     dptr,#470h;начало 2 го блока
                    3449     ;                       call            save_hl;подготовка записи в начало блока
                    3450     ;3й блок
1550 900790         3451                             mov                     dptr,#790h
1553 79B8           3452                                     mov                     r1,#work                ;обьем блок
                             а
1555 7703           3453                                     mov                     @r1,#03
1557 09             3454                                     inc                     r1
1558 7720           3455                                     mov                     @r1,#20h                        ;32
                             0h
                    3456     
155A                3457     gooff3:
155A E4             3458                                     clr                     a
155B F0             3459                                     movx            @dptr,a
155C A3             3460                                     inc                     dptr    
                    3461     
155D 79B9           3462                                     mov                     r1,#work+1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    55

155F 120000   F     3463                                     call            chminus
1562 78B8           3464                                     mov             r0,#work
1564 E6             3465                             mov             a,@r0
1565 30E7F2         3466                             jnb             acc.7,gooff3
1568 900790         3467                             mov                     dptr,#790h;начало 3 го блока
                    3468                                     ;после очистки блока сохраняем в saven_bl 
                    3469                             ;адрес второго с конца измерения потому
                    3470                             ;добавляем 8;;
                    3471                     ;       call            save_hl;подготовка записи в начало блока
                    3472     ;4й блок
156B 900AB0         3473     mov                     dptr,#0ab0h
156E 79B8           3474                                     mov                     r1,#work                ;обьем блок
                             а
1570 7703           3475                                     mov                     @r1,#03h
1572 09             3476                                     inc                     r1
1573 7720           3477                                     mov                     @r1,#20h                        ;32
                             0h
                    3478     
1575                3479     gooff4:
1575 E4             3480                                     clr                     a
1576 F0             3481                                     movx            @dptr,a
1577 A3             3482                                     inc                     dptr
                    3483     
1578 79B9           3484                                     mov                     r1,#work+1
157A 120000   F     3485                                     call            chminus
157D 78B8           3486                                     mov             r0,#work
157F E6             3487                             mov             a,@r0
1580 30E7F2         3488                             jnb             acc.7,gooff4
1583 900AB0         3489                             mov                     dptr,#0ab0h;начало 4 го блока
                    3490                             ;после очистки блока сохраняем в saven_bl 
                    3491                             ;адрес второго с конца измерения потому
                    3492                             ;добавляем 8;;
                    3493     ;                       call            save_hl;подготовка записи в начало блока
                    3494                             ;;;;26.02.07
1586 E538           3495                                                     mov             a,nblok
1588 B40117         3496                                                     cjne    a,#1,cl_hl1
158B 900150         3497                                                     mov             dptr,#150h
158E 79D3           3498                                                     mov             r1,#saven_bl
1590 E583           3499     cl_hl:                  mov             a,dph
1592 F7             3500                                               mov           @r1,a
1593 09             3501                                                     inc             r1
1594 E582           3502                                                     mov             a,dpl
1596 F7             3503                                                     mov             @r1,a
                    3504                             ;;;;;;;;
1597 C20B           3505                                             clr             bitmem
1599 D204           3506                                             setb    bitizm
159B 78B2           3507                                             mov             r0,#marker
159D 76FF           3508                                             mov             @r0,#0ffh
159F 020000   F     3509                                             jmp                     vvod2_10;jmp            got
                             o7
                    3510     
15A2 B40207         3511     cl_hl1:         cjne            a,#2,cl_hl2
15A5 900470         3512                                             mov                     dptr,#470h
15A8 79C0           3513                                             mov             r1,#saven_bl2
15AA 80E4           3514                                             jmp                     cl_hl
                    3515     
15AC B40307         3516     cl_hl2:         cjne            a,#3,cl_hl3
15AF 900790         3517                                             mov                     dptr,#790h
15B2 79C2           3518                                             mov             r1,#saven_bl3
15B4 80DA           3519                                             jmp                     cl_hl
                    3520     
15B6 900AB0         3521     cl_hl3:         mov                     dptr,#0ab0h
15B9 79D9           3522                                             mov             r1,#saven_bl4
15BB 80D3           3523                                             jmp                     cl_hl
                    3524     
15BD 7623           3525     go23no:    mov          @r0,#23h
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    56

15BF 753B08         3526                                             mov                     movrig,#8
15C2 753A07         3527                                             mov             movleft,#7
15C5 8055           3528                             jmp             loblok;БЛОК 00
                    3529     
15C7 7621           3530     kfull:          mov             @r0,#21h
15C9 8025           3531                             jmp             gofull
                    3532                             
                    3533                                             
15CB                3534     nomemk:                         
15CB 020000   F     3535                                     jmp             labelS                  ;нажат ввод меню
                    3536                             
15CE 75B0FB         3537     nome11:           mov           p3,#0fbh
15D1 E5B0           3538                               mov           a,p3
15D3 20E70D         3539                               jb            acc.7,kvvod0
15D6 B61205         3540                               cjne          @r0,#12h,mem12no        
15D9 7611           3541                               mov           @r0,#11h                ;ОЧИСТКА
15DB 020000   F     3542                               jmp            loadcle
                    3543     
15DE                3544     mem12no:        ;cjne           @r0,#13h,lowr           
15DE 7612           3545                               mov           @r0,#12h                   ;
15E0 020000   F     3546                               jmp           lowr1                     ;ЗАПИСЬ
                    3547     
15E3 75B0F7         3548     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
15E6 20B70F         3549                               jb            p3.7,ddoutf
15E9 78B0           3550                               mov           r0,#level
15EB B61129         3551                               cjne          @r0,#11h,mvv11
15EE 7621           3552                               mov           @r0,#21h                ;ПОЛНАЯ
15F0 900000   F     3553     gofull:           mov           dptr,#teFULL
15F3 120000   F     3554                               call          lotext
15F6 804F           3555                                     jmp             mlabL2  ;<-????????/
                    3556     
15F8                3557     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3558     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3559     ;т е сохранить ее в ячейке для мигания в противном случае
                    3560     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3561     ;       знакоместа
15F8 78B2           3562                                                     mov             r0,#marker
15FA 7440           3563                                     mov             a,#bufind
15FC 26             3564                                             add             a,@r0                   ;a=bufind+m
                             arker
15FD F9             3565                                             mov             r1,a
15FE 19             3566                                             dec             r1      ;       inc             r1
15FF 873C           3567                                             mov             savba,@r1
1601 C219           3568                                             clr             bitmig
                    3569     ;;;;;;;;;;;;;;;;
1603 78B2           3570                       mov           r0,#marker      ;курсор слева   ?
1605 E53A           3571                             mov             a,movleft
1607 C3             3572                             clr             c
1608 96             3573                             subb    a,@r0
1609 7006           3574                             jnz        left21
160B E53B           3575                             mov             a,movrig;уст в правую позицию
160D F6             3576                             mov             @r0,a
                    3577     
160E 020000   F     3578                             jmp             goto7                                            
1611 E53A           3579     left21:         mov             a,movleft;уст в левую позицию
1613 F6             3580                             mov             @r0,a   
1614 020000   F     3581                             jmp             goto7
                    3582     
                    3583     
1617 B61215         3584     mvv11:            cjne          @r0,#12h,mvv12
161A 7631           3585                                     mov             @r0,#31h
161C 900000   F     3586     loblok:                 mov             dptr,#teBL0;БЛОК 0
161F 120000   F     3587                                     call    lotext
1622 E538           3588                                     mov                     a,nblok
1624 2430           3589                                     add                     a,#30h
1626 F547           3590                                     mov                     bufind+7,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    57

1628 78B2           3591                                     mov             r0,#marker
162A 7607           3592                                     mov             @r0,#7
                    3593                                     ;mov            movrig,#9
                    3594                                     ;mov            movleft,#6
162C 020000   F     3595                                     jmp             goto7;outF
162F B61411         3596     mvv12:  cjne            @r0,#14h,bl_li
1632 7661           3597                                     mov                     @r0,#61h
1634 900000   F     3598                                     mov             dptr,#teMIN;
1637 120000   F     3599                                     call    lotext
163A 120000   F     3600                                     call    vichmin
163D 120000   F     3601                                     call    z_1s
1640 020000   F     3602                                     jmp             out7;goto7;outF
                    3603     
1643 7641           3604     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1645 80D5           3605                                     jmp             loblok
                    3606     
                    3607     
                    3608     
1647                3609     mlabL2:         ;jmp            labL2
                    3610                                             ;  уст курсор в правую позицию 
                    3611                                     ;                               29.12.06
                    3612     ;;;;;;;;;;;;;;;;;;
                    3613     ;необходимо не портить цифру в следуюем справа знакоместе
                    3614     ;т е сохранить ее в ячейке для мигания в противном случае
                    3615     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3616     ;       знакоместа
1647 78B2           3617                                             mov             r0,#marker
1649 7440           3618                                     mov             a,#bufind
164B 26             3619                                             add             a,@r0                   ;a=bufind+m
                             arker
164C F9             3620                                             mov             r1,a
164D 09             3621                                             inc             r1
164E 873C           3622                                             mov             savba,@r1
                    3623     ;;;;;;;;;;;;;;;;
1650 78B2           3624                       mov           r0,#marker      ;курсор справа  ?
1652 E53B           3625                             mov             a,movrig
1654 C3             3626                             clr             c
1655 96             3627                             subb    a,@r0
1656 6006           3628                             jz         equ2l
1658 E53B           3629                             mov             a,movrig;уст в правую позицию
165A F6             3630                             mov             @r0,a
                    3631     ;                       lool
165B 020000   F     3632                             jmp             goto7                                            
165E E53A           3633     equ2l:          mov             a,movleft;уст в левую позицию
1660 F6             3634                             mov             @r0,a   
1661 020000   F     3635                             jmp             goto7
                    3636                     
1664 020000   F     3637     rnom31:         jmp                     nom31
1667 B631FA         3638     labM:                   cjne    @r0,#31h,rnom31
166A 75B0FB         3639                                     mov             p3,#0fbh
166D 30B7D7         3640                                     jnb             p3.7,mlabL2
1670 75B0F7         3641                                mov          p3,#0f7h
1673 20B782         3642                                jb           p3.7,ddoutf
                    3643                                
1676 7632           3644                                mov          @r0,#32h                        ;ИНТ 0000
                    3645                                     ;       считать с индикатора  
1678 C3             3646     blokvv:         clr                     c
1679 E547           3647                                mov          a,bufind+7      
167B 9430           3648                                      subb           a,#30h
167D B40002         3649                                      cjne           a,#0,blokvvc
1680 7401           3650                                      mov            a,#1                    ;номера блоков 1..4
                    3651     
1682 F538           3652     blokvvc: mov            nblok,a
1684 900000   F     3653                                mov          dptr,#teINT;ИНТ 0000c
1687 120000   F     3654                                call         lotext
168A 78CE           3655                                      mov            r0,#interva+1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    58

168C 7952           3656                                      mov            r1,#abin+3
168E E6             3657                                      mov            a,@r0
168F F7             3658                                      mov            @r1,a
1690 18             3659                                             dec                     r0
1691 19             3660                                             dec                     r1
1692 E6             3661                                             mov             a,@r0
1693 F7             3662                                             mov             @r1,a
1694 19             3663                                             dec             r1
1695 E4             3664                                             clr             a
1696 F7             3665                                             mov             @r1,a
1697 19             3666                                             dec             r1
1698 F7             3667                                             mov             @r1,a
                    3668                                                                             
1699 7853           3669                                             mov             r0,#adec
169B 7952           3670                                             mov             r1,#abin+3      ;hex->10
169D 120000   F     3671                                             call    bindec
                    3672                                     
16A0 785C           3673                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
16A2 7948           3674                                             mov             r1,#bufind+8
16A4 7F04           3675                                             mov             r7,#4
16A6 E6             3676     bloin:                          mov             a,@r0
16A7 2430           3677                                             add             a,#30h
16A9 F7             3678                                             mov             @r1,a
16AA 19             3679                                             dec             r1
16AB 18             3680                                             dec             r0
16AC DFF8           3681                                             djnz    r7,bloin
16AE 78B2           3682                                mov          r0,#marker
16B0 7605           3683                                mov          @r0,#5
16B2 753B08         3684                                mov          movrig,#8
16B5 753A05         3685                                mov          movleft,#5
16B8 789A           3686                                      mov            r0,#parT
16BA B60609         3687                                     cjne            @r0,#6,innot6
16BD 534BF0         3688                                     anl                     bufind+11,#0f0h;after 5- 0.000c
16C0 434B04         3689                                     orl                     bufind+11,#04h
                    3690                             
16C3 020000   F     3691                                     jmp                     goto7
16C6 B60309         3692     innot6: cjne            @r0,#3,innot3
16C9 534BF0         3693                                     anl                     bufind+11,#0f0h;after 7- 000.0c
16CC 434B20         3694                                     orl                     bufind+11,#20h
                    3695                                     ;call           ind
16CF 020000   F     3696                                     jmp                     out7;goto7
16D2 C3             3697     innot3: clr                     c
16D3 7403           3698                                     mov                     a,#3
16D5 96             3699                                     subb            a,@r0
16D6 5009           3700                                     jnc                     innot1_2
16D8 534BF0         3701                                     anl                     bufind+11,#0f0h;after 6- 00.00c
16DB 434B40         3702                                     orl                     bufind+11,#40h
                    3703                                     
16DE 020000   F     3704                                     jmp                     goto7
                    3705     
16E1                3706     innot1_2:
16E1 534B0F         3707                                     anl                     bufind+11,#0fh;0h;0000c
16E4 C219           3708                                     clr                     bitmig
                    3709                                     ;call           ind             нет необходимости пришет пр
                             обел         
16E6 020000   F     3710     rgoto7: jmp        goto7;outF
                    3711     
16E9 B63276         3712     nom31:             cjne         @r0,#32h,nom32
16EC 75B0FB         3713                                     mov             p3,#0fbh
16EF 20B71F         3714                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3715                                     
16F2                3716     lefcur:         ;;кн <- 32 нач блок 000
                    3717     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3718     ;т е сохранить ее в ячейке для мигания в противном случае
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    59

                    3719     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3720     ;       знакоместа
16F2 C219           3721                                                     clr             bitmig
16F4 78B2           3722                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
16F6 7440           3723                                     mov             a,#bufind
16F8 26             3724                                             add             a,@r0                   ;a=bufind+m
                             arker
16F9 F9             3725                                             mov             r1,a
16FA 19             3726                                             dec             r1;;;;;;;;;;;
16FB 873C           3727                                             mov             savba,@r1
                    3728                                             
16FD 78B2           3729                                                     mov             r0,#marker      ;курсор сле
                             ва?
16FF E53A           3730                             mov             a,movleft
1701 C3             3731                             clr             c
1702 96             3732                             subb    a,@r0
1703 7006           3733                             jnz        noequ2
1705 E53B           3734                             mov             a,movrig
1707 F6             3735                             mov             @r0,a;уст в крайнюю правую позицию
1708 020000   F     3736                             jmp             goto7
170B 120000   F     3737     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
170E 020000   F     3738                             jmp        goto7        
                    3739                                                                       
                    3740     
                    3741     ;;;;;;;;;;;;;;;;;;
1711                3742     vvinte:         ;ввод интервал                          
1711 75B0F7         3743     no31n:             mov          p3,#0f7h
1714 20B7CF         3744                                     jb              p3.7,rgoto7
1717 7633           3745                                     mov             @r0,#33h
                    3746                                     ;считать с индикатора введенный интервал
1719 7F0A           3747                                             mov             r7,#10
171B 7853           3748                                     mov             r0,#adec
171D 120000   F     3749                                     call    clearN
1720 120000   F     3750                                     call    upak4                   
1723 784F           3751                                     mov             r0,#abin
1725 7953           3752                                     mov             r1,#adec                        ;мл        
                              ст
1727 120000   F     3753                                     call    decbin                  ;abin..abin+3 (hex)
172A 794F           3754                                     mov             r1,#abin
172C 78CE           3755                                     mov             r0,#interva+1
172E E7             3756                                     mov             a,@r1
172F F6             3757                                     mov             @r0,a
1730 18             3758                                     dec             r0
1731 09             3759                                     inc             r1
1732 E7             3760                                     mov             a,@r1
1733 F6             3761                                     mov             @r0,a
                    3762                                     
1734 78D5           3763                                     mov             r0,#volume                      ;объем блок
                             а
1736 7600           3764                                     mov             @r0,#0
1738 08             3765                                     inc             r0
1739 76C7           3766                                     mov             @r0,#0c7h
173B 120000   F     3767                                     call            adrblok;dptr
173E 120000   F     3768                                     call            save_hl;1я ячейка блока
1741 78B2           3769                                mov          r0,#marker
1743 76FF           3770                                mov          @r0,#0ffh
1745 D204           3771                                      setb           bitizm
1747 C20B           3772                                      clr            bitmem
1749 789A           3773     vvod2_10: mov           r0,#parT
174B B6050C         3774                                      cjne           @r0,#5,no10msv
174E 900000   F     3775                                             mov                     dptr,#te10ms
1751 120000   F     3776     t2msme:         call            lotext
                    3777                                             
1754 120000   F     3778                                             call            ind
1757 020000   F     3779     no2msv:   jmp      goto7;
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    60

175A B606FA         3780     no10msv:        cjne            @r0,#6,no2msv   
175D 900000   F     3781                                             mov                     dptr,#te2ms
1760 80EF           3782                                     jmp                     t2msme
                    3783     
                    3784     
                    3785     
1762 B6332B         3786     nom32:           cjne           @r0,#33h,nom33
1765 75B0FB         3787                              mov            p3,#0fbh
1768 30B787         3788                              jnb            p3.7,lefcur
176B 75B0F7         3789                              mov            p3,#0f7h
176E 20B7E6         3790                              jb             p3.7,no2msv;rgoto7
                    3791                              ;запомнить номер ячейки конца блока
1771 7634           3792                              mov    @r0,#34h
1773 7F0A           3793     INTn:                   mov             r7,#10
1775 7853           3794                                     mov             r0,#adec
1777 120000   F     3795                                     call    clearN
177A 120000   F     3796                                     call    upak3                   
177D 784F           3797                                     mov             r0,#abin
177F 7953           3798                                     mov             r1,#adec                        ;мл        
                              ст
1781 120000   F     3799                                     call    decbin                  ;abin..abin+3 (hex)
1784 120000   F     3800                                     call    loadr2                  ;r2..r5
1787 120402         3801                                     call    altof                   ;r2..r5->int
178A 020000   F     3802     dgoto7:                  jmp            goto7
                    3803     
178D 020000   F     3804     rlefcur:                jmp             lefcur
                    3805     
1790 B63464         3806     nom33:          cjne            @r0,#34h,labelP
1793 75B0FB         3807                               mov           p3,#0fbh
1796 30B7F4         3808                              jnb            p3.7,rlefcur
1799 75B0F7         3809                              mov            p3,#0f7h
179C 20B7EB         3810                              jb             p3.7,dgoto7
179F 7635           3811                              mov            @r0,#35h
17A1 78B2           3812                              mov            r0,#marker
17A3 76FF           3813                              mov            @r0,#0ffh
                    3814                              ;T1<-число на индикаторе
                    3815                                               ;vvod КОН БЛ 000
17A5 78CF           3816                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
17A7 7630           3817                              mov            @r0,#30h  
17A9 C20B           3818                              clr            bitmem
17AB D204           3819                              setb           bitizm;;;;      
17AD 020000   F     3820                             jmp        goto7
17B0 020000   F     3821     vodm11_15:                      jmp             vvodm11_15
17B3 020000   F     3822     me11_15de:                      jmp             me11_15dec
17B6 020000   F     3823     moutkmem:                               jmp             outkmem
                    3824     
17B9 020000   F     3825     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3826     ;обработка кнопки меню ввод
17BC 301138         3827     labelS:         jnb                     bitmenu,labelP
17BF 75B0EF         3828                                             mov                     p3,#0efh
17C2 30B7F4         3829                                             jnb                     p3.7,nmem_menu
17C5 75B0DF         3830                                             mov                     p3,#0dfh
17C8 30B7EB         3831                                             jnb                     p3.7,moutkmem
17CB 78B1           3832                                             mov                     r0,#vichR
17CD 7415           3833                                             mov                     a,#15h
17CF C3             3834                                             clr                     c
17D0 96             3835                                             subb            a,@r0
17D1 4021           3836                                             jc                      rme21_23
                    3837                             
17D3 75B0FB         3838                                             mov                     p3,#0fbh
17D6 20B7D7         3839                                             jb                      p3.7,vodm11_15
17D9 78B1           3840                                             mov                     r0,#vichR
17DB B611D5         3841                                             cjne                    @r0,#11h,me11_15de;<-
17DE 7615           3842                                             mov                     @r0,#15h
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    61

17E0 900000   F     3843                                             mov                     dptr,#teKALIB
17E3 120000   F     3844                                             call            lotext
17E6 020000   F     3845                                             jmp                     onmem11
17E9 C211           3846     menuon:         clr             bitmenu                 ;off menu
17EB D204           3847                                             setb    bitizm
                    3848     
17ED 78B1           3849                                     mov             r0,#vichR
17EF 7600           3850                                     mov             @r0,#0
17F1 020000   F     3851                                     jmp             onmem11
                    3852     
                    3853                                             ;;;;;
                    3854             
17F4 020000   F     3855     rme21_23:               jmp             me21_23 
                    3856                             
                    3857     ;режим просмотра
17F7 B64130         3858     labelP:                 cjne            @r0,#41h,govvlist
17FA 7642           3859                                                     mov                     @r0,#42h
                    3860                                                     ;       считать с индикатора  
17FC C3             3861                                             clr                     c
17FD E547           3862                                mov          a,bufind+7      
17FF 9430           3863                                      subb           a,#30h
1801 B40002         3864                                      cjne           a,#0,chaipr
1804 7401           3865                                      mov            a,#1
1806 F538           3866     chaipr:                          mov            nblok,a
1808 900000   F     3867                                mov          dptr,#teCH;ОТСЧЕТ 000
180B 120000   F     3868                                call         lotext
180E 534BEF         3869                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1811 78B2           3870                                mov          r0,#marker
1813 7607           3871                                mov          @r0,#7
1815 753B09         3872                                mov          movrig,#9
1818 753A07         3873                                mov          movleft,#7
181B 120000   F     3874                                             call            z_1s
181E 020000   F     3875                        jmp     goto7;outF
1821 020000   F     3876     label43:                jmp             label7
                    3877     
1824 020000   F     3878     rlist_43:                       jmp                     list_43                            
                                  
1827 020000   F     3879     mlabL2r:                        jmp                     mlabL2
182A B642F7         3880     govvlist:                       cjne            @r0,#42h,rlist_43
182D 75B0FB         3881                                                                     mov                     p3,
                             #0fbh
1830 30B7F4         3882                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1833 75B0F7         3883                                                             mov                     p3,#0f7h
1836 20B7E8         3884                                                             jb                      p3.7,label4
                             3
1839 7643           3885                                                             mov                     @r0,#43h;vv
                             od 
183B 78B2           3886                                                             mov                     r0,#marker
183D 76FF           3887                                                             mov                     @r0,#0ffh
183F 7F0A           3888                                                                     mov             r7,#10
1841 7853           3889                                     mov             r0,#adec
1843 120000   F     3890                                     call    clearN
1846 120000   F     3891                                     call    upak3                   
1849 784F           3892                                     mov             r0,#abin
184B 7953           3893                                     mov             r1,#adec                        ;мл        
                              ст
184D 120000   F     3894                                     call    decbin                  ;abin..abin+3 (hex)
1850 120000   F     3895                                     call    loadr2                  ;r2..r5
1853 ED             3896                                     mov             a,r5                            ;сохр номер
                              лемента
1854 F537           3897                                     mov             nelem,a
1856 120402         3898                                     call    altof                   ;r2..r5->int
1859 900000   F     3899                                     mov             dptr,#ch_1;
185C 120000   F     3900                                     call    ldc_ltemp                       ;r8..r11
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    62

185F 1201D1         3901                                     call    flsub
1862 900000   F     3902                                     mov             dptr,#ch_4;
1865 120000   F     3903                                     call    ldc_ltemp                       ;r8..r11
1868 120203         3904                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
186B 120343         3905                                     call            ftol                    ;r2..r5->hex
186E C002           3906                                     push            rr2
1870 C003           3907                                     push            rr3
1872 C004           3908                                     push            rr4
1874 C005           3909                                     push            rr5
1876 120000   F     3910                                     call            adrblok;dptr-
1879 D005           3911                                     pop                     rr5
187B D004           3912                                     pop                     rr4
187D D003           3913                                     pop                     rr3
187F D002           3914                                     pop                     rr2
1881 79D8           3915                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
1883 E582           3916                                     mov                     a,dpl
1885 2D             3917                                     add                     a,r5
1886 F582           3918                                     mov                     dpl,a
1888 F7             3919                                     mov                     @r1,a           ;low
1889 E583           3920                                     mov                     a,dph
188B 3C             3921                                     addc            a,r4
188C F583           3922                                     mov                     dph,a
188E 19             3923                                     dec                     r1
188F F7             3924                                     mov                     @r1,a                   ;high
                    3925                             
1890                3926     li42_43:
1890 120000   F     3927                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
1893 900000   F     3928                                     mov             dptr,#ch10;
1896 120000   F     3929                                     call    ldc_ltemp
1899 120000   F     3930                                     call    zdiv    
                    3931                                     ;;;;;;;;;;;
189C 120000   F     3932                                     call    maform
                    3933                                     ;;;;
                    3934     
                    3935                                     ;;;;;;;
189F 784F           3936                                             mov             r0,#abin
18A1 120000   F     3937                                             call    saver2
18A4 7853           3938                                             mov             r0,#adec
18A6 7952           3939                                             mov             r1,#abin+3      ;hex->10
18A8 120000   F     3940                                             call    bindec
                    3941                                     
18AB 785C           3942                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
18AD 7945           3943                                             mov             r1,#bufind+5
18AF 7F07           3944                                             mov             r7,#7
18B1 E6             3945     ch43:                           mov             a,@r0
18B2 2430           3946                                             add             a,#30h
18B4 F7             3947                                             mov             @r1,a
18B5 19             3948                                             dec             r1
18B6 18             3949                                             dec             r0
18B7 DFF8           3950                                             djnz    r7,ch43
18B9 7847           3951                                             mov             r0,#bufind+7
18BB 762D           3952                                             mov             @r0,#2dh          ;-2..-9
18BD 7840           3953                                             mov             r0,#bufind
18BF 762B           3954                                             mov             @r0,#2bh
18C1 300202         3955                                             jnb             znmat,nozzmi43;bitznak,nozzmi
18C4 762D           3956                                             mov             @r0,#2dh
18C6 E538           3957     nozzmi43:       mov             a,nblok
18C8 B40104         3958                                             cjne    a,#1,nozzmi1            
18CB 7934           3959                                             mov             r1,#sadiap;diap
18CD 8010           3960                                             jmp             nozzbl
18CF B40204         3961     nozzmi1:        cjne    a,#2,nozzmi2            
18D2 7932           3962                                             mov             r1,#sadiap2;diap
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    63

18D4 8009           3963                                             jmp             nozzbl
18D6 B40304         3964     nozzmi2:        cjne    a,#3,nozzmi3            
18D9 7931           3965                                             mov             r1,#sadiap3;diap
18DB 8002           3966                                             jmp             nozzbl
18DD 7930           3967     nozzmi3:        mov             r1,#sadiap4;diap
                    3968                                     
18DF 7848           3969     nozzbl:         mov             r0,#bufind+8
18E1 E7             3970                                             mov             a,@r1
18E2 B40808         3971                                             cjne    a,#8,nodi8_43
18E5 7630           3972                                             mov             @r0,#30h                 ;10-10
18E7 18             3973                                             dec             r0
18E8 7663           3974                                             mov             @r0,#63h;31h
18EA 08             3975                                             inc             r0
18EB 800E           3976                                             jmp             see_l43
18ED B40908         3977     nodi8_43:       cjne    a,#9,nodi9_43
                    3978                                     
18F0 7631           3979                                             mov             @r0,#31h           ;10-11
18F2 18             3980                                             dec             r0
18F3 7663           3981                                             mov             @r0,#63h;31h
                    3982                                     
18F5 08             3983                                             inc             r0
18F6 8003           3984                                             jmp             see_l43
18F8 2432           3985     nodi9_43:               add             a,#32h
18FA F6             3986                                             mov             @r0,a;
18FB 08             3987     see_l43:                        inc             r0
18FC 7641           3988                                             mov             @r0,#"A";"E";
                    3989                             ;       inc             r0
                    3990                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    3991                             ;       inc             r0;             mov             bufind+11
                    3992                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
18FE 434B10         3993                             orl                     bufind+11,#10h
1901 120000   F     3994     out43:          call            ind
1904 120000   F     3995                                             call            z_1s
1907 020000   F     3996                                             jmp             out7                               
                                  
                    3997     
                    3998                                     ;;;;;;;;        
190A 783D           3999     label7: mov             r0,#chkl
190C 7604           4000                                     mov             @r0,#04;3
190E 08             4001                                     inc             r0
190F 76E8           4002                                     mov             @r0,#0e8h               ;1000
1911 020000   F     4003                                     jmp             out7;
1914 B64351         4004     list_43:                cjne    @r0,#43h,noli_43
1917 75B0FB         4005                                                     mov             p3,#0fbh                ;43
                             h <-
191A 20B70A         4006                                                     jb              p3.7,vvod43             ;vv
                             od
191D C20B           4007                                                     clr             bitmem
191F D204           4008                                                     setb    bitizm
1921 78B2           4009                                                     mov             r0,#marker
1923 76FF           4010                                                     mov             @r0,#0ffh
1925 80E3           4011                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    4012     
1927 7644           4013     vvod43:                 mov             @r0,#44h
1929 E537           4014                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
192B 04             4015                                                     inc             a
192C F552           4016                                                     mov             abin+3,a
                    4017                                                     
192E F537           4018                                                     mov             nelem,a
1930 E4             4019                                                     clr             a
1931 F551           4020                                                     mov             abin+2,a
1933 F550           4021                                                     mov             abin+1,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    64

1935 F54F           4022                                                     mov             abin,a
                    4023                                             
1937 7853           4024                                             mov             r0,#adec
1939 7952           4025                                             mov             r1,#abin+3      ;hex->10
193B 120000   F     4026                                             call    bindec
193E 7840           4027                                             mov             r0,#bufind;почистить индикатор
1940 7F0A           4028                                             mov             r7,#10
1942 7420           4029                                             mov             a,#20h
1944 F6             4030     cle20:          mov             @r0,a
1945 08             4031                                             inc             r0
1946 DFFC           4032                                             djnz    r7,cle20
                    4033                                             ;;;;;;
1948 900000   F     4034                                             mov             dptr,#teCH;ОТСЧЕТ 000
194B 120000   F     4035                                call         lotext
194E 534BEF         4036                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1951 785C           4037                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1953 7949           4038                                             mov             r1,#bufind+9
1955 7F03           4039                                             mov             r7,#3
1957 E6             4040     ch43_42:                                mov             a,@r0
1958 2430           4041                                             add             a,#30h
195A F7             4042                                             mov             @r1,a
195B 19             4043                                             dec             r1
195C 18             4044                                             dec             r0
195D DFF8           4045                                             djnz    r7,ch43_42
195F 120000   F     4046                                             call            ind
1962 120000   F     4047                                             call            z_1s
1965 020000   F     4048                                             jmp             out7
1968 B64419         4049     noli_43:        cjne            @r0,#44h,vvosta
196B 7643           4050                                             mov                     @r0,#43h
196D 79D8           4051                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
196F E7             4052                                                     mov                     a,@r1
1970 F582           4053                                                     mov                     dpl,a
1972 19             4054                                                     dec                     r1
1973 E7             4055                                                     mov                     a,@r1;high
1974 F583           4056                                                     mov                     dph,a
1976 A3             4057                                                     inc                     dptr
1977 A3             4058                                                     inc                     dptr
1978 A3             4059                                                     inc                     dptr
1979 A3             4060                                                     inc                     dptr
197A E583           4061                                                     mov                     a,dph
197C F7             4062                                                     mov                     @r1,a
197D 09             4063                                                     inc                     r1
197E E582           4064                                                     mov                     a,dpl
1980 F7             4065                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
1981 020000   F     4066                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    4067     
1984 B66111         4068     vvosta:                 cjne            @r0,#61h,vvostad
1987 7662           4069                                                     mov                     @r0,#62h
1989 900000   F     4070                                                     mov                     dptr,#teMAX;
198C 120000   F     4071                                                     call            lotext
198F 120000   F     4072                                                     call            vichmax
1992 120000   F     4073                                                     call            z_05s;z_1s
1995 020000   F     4074                                                     jmp             goto7
                    4075     
1998 B66211         4076     vvostad:                cjne            @r0,#62h,rousta
199B 7663           4077                                                     mov                     @r0,#63h
199D 900000   F     4078                                                     mov             dptr,#teMid;
19A0 120000   F     4079                                                     call    lotext
19A3 120000   F     4080                                                     call            vichmean
19A6 120000   F     4081                                                     call            z_05s
19A9 020000   F     4082                                                     jmp             goto7
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    65

                    4083     
19AC B6630E         4084     rousta:                 cjne            @r0,#63h,rousta1
19AF 7661           4085                                                     mov                     @r0,#61h
19B1 900000   F     4086                                                     mov             dptr,#teMin;
19B4 120000   F     4087                                                     call    lotext
19B7 120000   F     4088                                                     call            vichmin
19BA 120000   F     4089                                                     call            z_05s
19BD 020000   F     4090     rousta1:                jmp             goto7
                    4091     
19C0 020000   F     4092     rLABELP:                jmp                     LABELP
19C3 78B1           4093     vvodm11_15:     mov                     r0,#vichR;vvod
19C5 75B0F7         4094                                                     mov                     p3,#0f7h
19C8 20B7F5         4095                                             jb                      p3.7,rLABELP;????
                    4096                                     
                    4097     
19CB B61115         4098                                             cjne                    @r0,#11h,tome21
19CE 7621           4099                                             mov                     @r0,#21h;vvod
19D0 900000   F     4100                                             mov                     dptr,#teTE11
19D3 120000   F     4101                                             call            lotext
19D6 534B03         4102                                             anl                     bufind+11,#03h ;погасить за
                             пятые
19D9 020000   F     4103                                             jmp                     onmem11
                    4104     
19DC 16             4105     me11_15dec:             dec             @r0                             ;<-
19DD 120000   F     4106     lokame1:        call            lomenu
19E0 020000   F     4107                                             jmp                     onmem11
                    4108     
19E3 B61206         4109     tome21:         cjne                    @r0,#12h,tome13
                    4110                                             ;вкл тест интерфейса
19E6 020000   F     4111                                             jmp             testrs;??????????
19E9 020000   F     4112                                             jmp                     onmem11
                    4113     
19EC B6132A         4114     tome13:         cjne                    @r0,#13h,tome14
19EF 7631           4115                                             mov                     @r0,#31h
                    4116                                             
19F1 7A50           4117                                             mov                     r2,#50h                    
                                  ;57.6->19.2
19F3 7B2C           4118                                             mov                     r3,#2ch
19F5 120454         4119                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
19F8 E508           4120                                             mov                     a,r8
19FA B4000E         4121                                             cjne            a,#00,skor19
19FD 900000   F     4122                                             mov                     dptr,#teS57_6;57,6
1A00 120000   F     4123                                             call            lotext
1A03 434B80         4124                                     orl                     bufind+11,#80h
1A06 C213           4125                                             clr                     bitv19
                    4126     
1A08 020000   F     4127                                             jmp             onmem11
1A0B 900000   F     4128     skor19:         mov                     dptr,#teS19_2
1A0E 120000   F     4129                                             call            lotext
1A11 D213           4130                                             setb            bitv19
1A13 434B80         4131                                             orl                     bufind+11,#80h
1A16 020000   F     4132                                             jmp                     onmem11
                    4133                                             
                    4134     
1A19 B61415         4135     tome14:         cjne                    @r0,#14h,tome15
1A1C D204           4136                                             setb            bitizm
1A1E 7881           4137                                             mov                     r0,#chavt
1A20 7600           4138                                             mov                     @r0,#0
1A22 08             4139                                             inc                     r0
1A23 7600           4140                                             mov                     @r0,#0
1A25 C211           4141     outmenu:        clr                     bitmenu
1A27 020000   F     4142                                             jmp                     out7
                    4143     
1A2A 78B1           4144     goparom:        mov             r0,#vichR               ;режим меню 52
1A2C 7652           4145                                             mov                     @r0,#52h                   
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    66

                                  ;пароль уже ввели
1A2E 020000   F     4146                                             jmp                     goparol
1A31 2016F6         4147     tome15:         jb              bitpar,goparom  
1A34 7651           4148                                             mov                     @r0,#51h;ПАРОЛЬ 000
1A36 120000   F     4149                                             call            lomenu
1A39 78B2           4150                                             mov                     r0,#marker
1A3B 7607           4151                                             mov                     @r0,#7
1A3D 753B09         4152                                             mov                     movrig,#9
1A40 753A07         4153                                             mov                     movleft,#7
                    4154                                             ;setb           bitizm
1A43 020000   F     4155                                             jmp                     onmem11
                    4156     
                    4157     
1A46 78B1           4158     me21_23:        mov                     r0,#vichR               ;<-
1A48 7423           4159                                             mov                     a,#23h
1A4A C3             4160                                             clr                     c
1A4B 96             4161                                             subb            a,@r0
1A4C 403D           4162                                             jc                      labelS1
1A4E 75B0FB         4163                                             mov                     p3,#0fbh
1A51 20B718         4164                                             jb                      p3.7,vv21_23
1A54 B6210B         4165                                             cjne            @r0,#21h,me21_23dec;-<
1A57 7623           4166                                             mov                     @r0,#23h
1A59 900000   F     4167                                             mov                     dptr,#teTE7
1A5C 120000   F     4168                                             call            lotext
1A5F 020000   F     4169                                             jmp                     onmem11
1A62                4170     me21_23dec:     
1A62 16             4171                                             dec                     @r0
1A63 120000   F     4172                                             call            lomenu
1A66 020000   F     4173                                             jmp                     onmem11
1A69 020000   F     4174     onmem12:        jmp             outF    ;(ie7)                          
                    4175                                                     
1A6C 75B0F7         4176     vv21_23:        mov             p3,#0f7h                ;vvod
1A6F 20B7F7         4177                                             jb              p3.7,onmem12
1A72 B6210C         4178                                             cjne            @r0,#21h,test22
                    4179                                             ;mov                    dptr,#tabt11;заслать ус 11А
1A75 120000   F     4180     tests:          call            lotpus
1A78 D215           4181                                             setb            biteizm;запомнить режим ТИ
1A7A D204           4182                                             setb            bitizm
1A7C C211           4183                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1A7E 020000   F     4184                                             jmp                     onmem11
1A81 B62202         4185     test22:         cjne            @r0,#22h,test23
                    4186                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1A84 80EF           4187                                             jmp             tests   
1A86                4188     test23:
                    4189                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1A86 80ED           4190                                             jmp             tests   
1A88 020000   F     4191     left_s:         jmp                     left_sk
1A8B B63175         4192     labelS1:        cjne            @r0,#31h,me_41
1A8E 75B0FB         4193                                             mov                     p3,#0fbh                   
                                  ;<-
1A91 30B7F4         4194                                             jnb                     p3.7,left_s
1A94 75B0F7         4195                                             mov                     p3,#0f7h
1A97 20B7CF         4196                                             jb                      p3.7,onmem12
                    4197                                             ;запомнить признак установленной скорости в рпзу
                    4198     
                    4199     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4200     ;и запись во внешнее озу(0000h)
1A9A 7900           4201                                             mov             r1,#0                   ;
1A9C 7A50           4202                                     mov             r2,#50h
1A9E 7B00           4203                                     mov             r3,#00
1AA0 120499         4204                                     call    copyPP
                    4205                                     ;внести изменения во внешн озу
                    4206                                     ;KD=00 01 86 A0 (KD=1)
                    4207                                     ;кофф *100000 и переведенный в hex формат
                    4208                                     ;согласно адресов диапазонов и адресов яч вн озу 
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    67

1AA3 792C           4209                                     mov             r1,#2ch
1AA5 7400           4210                                     mov             a,#0;57,6
1AA7 301302         4211                                     jnb             bitv19,spwri
1AAA 7401           4212                                     mov             a,#1;19.6
1AAC F3             4213     spwri:  movx    @r1,a
                    4214     ;стереть страницу пап прогр 
1AAD 905000         4215                                     mov             dptr,#5000h
1AB0 7FFF           4216                                     mov             r7,#0ffh
1AB2 12043E         4217                                     call    cle256
                    4218     ;и запись в ячейки кофф памяти прогр (3000h) 
1AB5 7FFF           4219                                     mov             r7,#0ffh
1AB7 7900           4220                                     mov             r1,#0                           ;external r
                             am
1AB9 905000         4221                                     mov             dptr,#5000h
1ABC 120480         4222                                     call    wrpage
                    4223             
1ABF 201305         4224                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1AC2 758DF4         4225                                             mov                     TH1,#244                ;57
                             .6
1AC5 8003           4226                                             jmp                     outsko
1AC7 758DDC         4227     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1ACA C211           4228     outsko:         clr             bitmenu
1ACC D204           4229                                             setb            bitizm
1ACE 020000   F     4230                                             jmp                     out7
                    4231     
1AD1 020000   F     4232     rlabels4:               jmp             labels4
1AD4 020000   F     4233     rlabelS13:      jmp             labelS13
                    4234     
1AD7 B652F7         4235     me_52:          cjne            @r0,#52h,rlabels4
1ADA 75B0FB         4236                                             mov                     p3,#0fbh;<-
1ADD 20B717         4237                                             jb                      p3.7,vv_52v     ;ввод в кал
                             ибровке
1AE0 78B2           4238                                                     mov             r0,#marker              ;сд
                             виг маркера влево при калибр
1AE2 7440           4239                                     mov             a,#bufind
1AE4 26             4240                                             add             a,@r0                   ;a=bufind+m
                             arker
1AE5 F9             4241                                             mov             r1,a
1AE6 19             4242                                             dec             r1;inc          r1
1AE7 873C           4243                                             mov             savba,@r1
                    4244                                                     
1AE9 78B2           4245                                             mov             r0,#marker
1AEB 16             4246                                             dec             @r0                             
1AEC C219           4247                                             clr             bitmig
1AEE E53A           4248                                             mov                     a,movleft
1AF0 B60001         4249                                             cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр ка
                             либровки
1AF3 06             4250                                             inc                     @r0
1AF4 020000   F     4251     me_52v:         jmp                     goto7
                    4252     
1AF7 75B0F7         4253     vv_52v:         mov             p3,#0f7h
1AFA 30B703         4254                                             jnb             p3.7,rvvkali52
1AFD 020000   F     4255                                             jmp                     goto7
1B00 020000   F     4256     rvvkali52:      jmp             vvkali52
                    4257     
                    4258     
1B03 B651D1         4259     me_41:          cjne            @r0,#51h,me_52;rlabels4
1B06 75B0FB         4260                                             mov             p3,#0fbh;<-
1B09 30B7C8         4261                                             jnb             p3.7,rlabelS13
1B0C 75B0F7         4262                                             mov             p3,#0f7h
1B0F 20B773         4263                                             jb              p3.7,vvmenu
                    4264                                             ;ввод пароля
                    4265                                     
                    4266     ;       считать с индикатора 
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    68

1B12 7F0E           4267                                     mov             r7,#14
1B14 784F           4268                                     mov             r0,#abin
1B16 120000   F     4269                                     call    clearN                  
                    4270                                     
                    4271     ;чтение номера байта с индикатора(3байта)
                    4272     ;bufind+3..bufind+9
                    4273     ;-  - - -
                    4274     ;- - - - - - - - - -
                    4275     ;adec..adec+9
                    4276     ;ст            мл
1B19 7849           4277                                     mov             r0,#bufind+9;
1B1B 795C           4278                                     mov             r1,#adec+9
1B1D 7F03           4279                                     mov             r7,#3;3bait
1B1F C3             4280     upav1:          clr             c
1B20 E6             4281                                     mov             a,@r0
1B21 9430           4282                                     subb    a,#30h
1B23 F7             4283                                     mov             @r1,a
1B24 18             4284                                     dec             r0
1B25 19             4285                                     dec             r1
1B26 DFF7           4286                                     djnz    r7,upav1;adec+7..adec+9
1B28 7A50           4287                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1B2A 7B28           4288                                             mov                     r3,#28h
1B2C 120454         4289                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1B2F 800F           4290     jmp                     goparol
1B31 E508           4291                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1B33 B55A52         4292                                     cjne            a,adec+7,parerr
1B36 E509           4293                                     mov                     a,r9    
1B38 B55B4D         4294                                     cjne            a,adec+8,parerr
1B3B E50A           4295                                     mov                     a,r10
1B3D B55C48         4296                                     cjne            a,adec+9,parerr
                    4297                                     ;равны
1B40 78B1           4298     goparol:        mov             r0,#vichR               ;режим меню 52
1B42 7652           4299                                             mov             @r0,#52h                ;0000-n
1B44 900000   F     4300                                             mov             dptr,#teKD;00000-nA
1B47 120000   F     4301                                             call            lotext
                    4302                                             ;;;;;;;;;
                    4303                                                     ;n(hex)->abin
1B4A 120000   F     4304                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1B4D 2552           4305                                             add             a,abin+3
1B4F F552           4306                                             mov             abin+3,a
1B51 7853           4307                                             mov             r0,#adec
1B53 7952           4308                                             mov             r1,#abin+3      ;hex->10
1B55 120000   F     4309                                             call    bindec
1B58 855C48         4310                                             mov             bufind+8,adec+9
1B5B 75472D         4311                                             mov             bufind+7,#2dh
1B5E 434A80         4312                                             orl                     bufind+10,#80h;зажечь KMП
1B61 434B10         4313                                             orl                     bufind+11,#10h;точка после 
                             1 знакоместа
1B64 79AE           4314                                             mov             r1,#diap
1B66 7848           4315                                             mov             r0,#bufind+8
1B68 E7             4316                                             mov             a,@r1
1B69 B40807         4317                                             cjne    a,#8,nodi8k
1B6C 7630           4318                                             mov             @r0,#30h                 ;10-10
1B6E 18             4319                                             dec             r0
1B6F 7663           4320                                             mov             @r0,#63h;31h
1B71 8008           4321                                             jmp             nodisk9
1B73 B40905         4322     nodi8k:                         cjne    a,#9,nodisk9
                    4323                                     
1B76 7631           4324                                             mov             @r0,#31h           ;10-11
1B78 18             4325                                             dec             r0
1B79 7663           4326                                             mov             @r0,#63h;31h
                    4327                                     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    69

                    4328     
1B7B 78B2           4329     nodisk9:        mov                     r0,#marker
1B7D 7601           4330                                             mov                     @r0,#1
1B7F 753A01         4331                                             mov                     movleft,#1
1B82 753B05         4332                                             mov                     movrig,#5
                    4333                                             
1B85 020000   F     4334     vvmenu:         jmp             goto7
                    4335     
1B88 753932         4336     parerr:         mov                     nuerr,#32h
1B8B 120000   F     4337                                             call            error
1B8E 120000   F     4338                                             call            ind
1B91 120000   F     4339                                             call            z_1s
1B94 C211           4340                                             clr                     bitmenu
1B96 D204           4341                                             setb            bitizm
1B98 78B2           4342                                             mov                     r0,#marker
1B9A 76FF           4343                                             mov                     @r0,#0ffh
1B9C 020000   F     4344                                             jmp             goto7
                    4345     
1B9F 30130E         4346     left_sk:                jnb                     bitv19,tosk19;<-
1BA2 900000   F     4347                                             mov                     dptr,#teS57_6;57,6
1BA5 120000   F     4348                                             call            lotext
1BA8 434B80         4349                                             orl                     bufind+11,#80h
1BAB C213           4350                                             clr                     bitv19
1BAD 020000   F     4351                                             jmp             out7
1BB0 900000   F     4352     tosk19:         mov                     dptr,#teS19_2
1BB3 120000   F     4353                                             call            lotext
1BB6 434B80         4354                                             orl                     bufind+11,#80h
1BB9 D213           4355                                             setb            bitv19
1BBB 020000   F     4356                                             jmp             out7
                    4357     
1BBE                4358     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4359             
                    4360     ;;;;;;;;;;;;;;;;;;
                    4361     ;необходимо не портить цифру в следуюем слева знакоместе
                    4362     ;т е сохранить ее в ячейке для мигания в противном случае
                    4363     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4364     ;       знакоместа
1BBE 78B2           4365                                     mov             r0,#marker
1BC0 7440           4366                                     mov             a,#bufind
1BC2 26             4367                                             add             a,@r0                   ;a=bufind+m
                             arker
1BC3 F9             4368                                             mov             r1,a
1BC4 19             4369                                             dec             r1;inc          r1
1BC5 873C           4370                                             mov             savba,@r1
                    4371                                                     
1BC7 78B2           4372                                                     mov             r0,#marker
1BC9 16             4373                                                     dec             @r0                        
                                  
1BCA C219           4374                                     clr             bitmig
1BCC E53A           4375                                     mov                     a,movleft
1BCE B60652         4376                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1BD1 06             4377                                     inc             @r0
1BD2 020000   F     4378                                             jmp             goto7
                    4379     ;;;;;;;
                    4380     
1BD5                4381     vvkali52:       ;введено значение для калибровки
                    4382                                             ;число на индикаторе ->Ak  (52h)
                    4383                                             ;       считать с индикатора 
1BD5 7F0E           4384                                     mov             r7,#14
1BD7 784F           4385                                     mov             r0,#abin
1BD9 120000   F     4386                                     call    clearN                  
                    4387                                     
                    4388     ;чтение номера байта с индикатора(3байта)
                    4389     ;bufind+1..bufind+5
                    4390     ;-  - - -
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    70

                    4391     ;- - - - - - - - - -
                    4392     ;adec..adec+9
                    4393     ;ст            мл
1BDC 7845           4394                                     mov             r0,#bufind+5;
1BDE 795C           4395                                     mov             r1,#adec+9
1BE0 7F05           4396                                     mov             r7,#5;5bait
1BE2 C3             4397     upav2:          clr             c
1BE3 E6             4398                                     mov             a,@r0
1BE4 9430           4399                                     subb    a,#30h
1BE6 F7             4400                                     mov             @r1,a
1BE7 18             4401                                     dec             r0
1BE8 19             4402                                     dec             r1
1BE9 DFF7           4403                                     djnz    r7,upav2;adec+7..adec+9
                    4404     
1BEB 784F           4405                                     mov             r0,#abin
1BED 7953           4406                                     mov             r1,#adec                        ;мл        
                              ст
1BEF 120000   F     4407                                     call    decbin                  ;abin..abin+3 (hex)
1BF2 120000   F     4408                                     call    loadr2                  ;r2..r5
1BF5 120402         4409                                     call    altof   ;r2..r5->float
1BF8 900000   F     4410                                     mov     dptr,#ch_10;10
1BFB 120000   F     4411                                     call    ldc_ltemp                       ;r8..r11=8
1BFE 120203         4412                                     call    flmul
1C01 78A4           4413                                     mov             r0,#rez_Ak
1C03 120000   F     4414                                     call    saver2
1C06 C211           4415                                             clr                     bitmenu
1C08 D212           4416                                             setb            bitklb
1C0A 434A80         4417                                             orl                     bufind+10,#80h;зажечь KMП
1C0D D204           4418                                             setb            bitizm;бит калибровки уже установле
                             н
1C0F 78B2           4419                                             mov                     r0,#marker
1C11 76FF           4420                                             mov                     @r0,#0ffh
1C13 783D           4421                                     mov             r0,#chkl
1C15 76FF           4422                                     mov             @r0,#0ffh
1C17 08             4423                                     inc             r0
1C18 76FF           4424                                     mov             @r0,#0ffh;38h
1C1A 120000   F     4425                                     call            z_1s
1C1D 020000   F     4426                                     jmp             out7
                    4427     
                    4428     
1C20 020000   F     4429                                             jmp             goto7
                    4430                                              
1C23 020000   F     4431     onmem13:        jmp             goto7   ;(ie7)
                    4432     
1C26 B642AC         4433     labels4:        cjne            @r0,#42h,vvkali52
1C29 75B0FB         4434                                             mov                     p3,#0fbh;<-
1C2C 30B7F4         4435                                             jnb             p3.7,onmem13
1C2F 75B0F7         4436                                             mov             p3,#0f7h;vvod
1C32 20B7EE         4437                                             jb              p3.7,onmem13
                    4438                                             
                    4439             
1C35 020000   F     4440     jmp             out7                                                    
                    4441     ;;;;;;;
1C38                4442     labelI:
1C38 75B0FE         4443                                     mov             p3,#0feh
1C3B E5B0           4444                                     mov             a,p3
1C3D 20E703         4445                                     jb              acc.7,nopoint
                    4446                                     ;
1C40 020000   F     4447                                     jmp             goto7;out7
                    4448     
1C43 75B0FB         4449     nopoint:                mov             p3,#0fbh
1C46 E5B0           4450                                     mov             a,p3
1C48 20E72C         4451                                     jb              acc.7,nopoin7
1C4B 78B2           4452     labelS3:mov             r0,#marker
1C4D E53A           4453                                     mov             a,movleft
1C4F B40309         4454                                     cjne    a,#3,poina1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    71

1C52 B6030B         4455                                     cjne    @r0,#3,nomarl;26
                    4456                                     ;mov            @r0,#9
1C55 E53B           4457     poina2: mov                     a,movrig                ;кн <- B=+00000
1C57 F6             4458                                     mov                     @r0,a
1C58 020000   F     4459                                     jmp             goto7;  out7
                    4460     
1C5B B60402         4461     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1C5E 80F5           4462                                             jmp             poina2
                    4463     
                    4464     
1C60                4465     nomarl:                 ;                               29.12.06
                    4466     ;;;;;;;;;;;;;;;;;;
                    4467     ;необходимо не портить цифру в следуюем справа знакоместе
                    4468     ;т е сохранить ее в ячейке для мигания в противном случае
                    4469     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4470     ;       знакоместа
1C60 78B2           4471                                     mov             r0,#marker
1C62 7440           4472                                     mov             a,#bufind
1C64 26             4473                                             add             a,@r0                   ;a=bufind+m
                             arker
1C65 F9             4474                                             mov             r1,a
1C66 09             4475                                             inc             r1
1C67 873C           4476                                             mov             savba,@r1
                    4477                                                     
1C69 78B2           4478                                                     mov             r0,#marker
1C6B 16             4479                                                     dec             @r0                        
                                  
1C6C C219           4480                                     clr             bitmig
1C6E E53A           4481                                     mov                     a,movleft
1C70 B4036B         4482                                     cjne            a,#3,poinA
1C73 B60266         4483                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
                             0000
1C76 06             4484     poin3:  inc             @r0
                    4485     ;нажат ввод А =000000 запомнить константу А
1C77 75B0F7         4486     nopoin7:           mov          p3,#0f7h
1C7A E5B0           4487                                     mov             a,p3
1C7C 20E75D         4488                                     jb              acc.7,gogo7;out7
1C7F 78B1           4489                                     mov             r0,#vichR
1C81 E6             4490                                     mov             a,@r0
1C82 B6215E         4491                                     cjne    @r0,#21h,no21p7
1C85 7611           4492                                     mov             @r0,#11h
                    4493                             ;       считать с индикатора  упаковать в плавающий формат
                    4494                             ;   сохранить
1C87 7F0E           4495                                     mov             r7,#14
1C89 784F           4496                                     mov             r0,#abin
1C8B 120000   F     4497                                     call    clearN                  
1C8E 120000   F     4498                                     call    upakA
                    4499                                     
1C91 784F           4500                                     mov             r0,#abin
1C93 7953           4501                                     mov             r1,#adec                        ;мл        
                              ст
1C95 120000   F     4502                                     call    decbin                  ;abin..abin+3 (hex)
1C98 120000   F     4503                                     call    loadr2                  ;r2..r5
1C9B 120402         4504                                     call    altof                   ;r2..r5->float
1C9E 78BC           4505                                     mov                     r0,#konstA
1CA0 120000   F     4506                                     call            saver2
1CA3 900000   F     4507                                     mov                     dptr,#ch0
1CA6 120000   F     4508                                     call            ldc_ltemp
1CA9 1201D6         4509                                     call            flcmp
1CAC 6010           4510                                     jz              erra0
                    4511     ;26
1CAE 78B2           4512                                     mov             r0,#marker
1CB0 76FF           4513                                     mov             @r0,#0ffh
                    4514                                     
1CB2 900000   F     4515                                     mov             dptr,#teVICH;teBequ0
1CB5 120000   F     4516                                     call    lotext
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    72

                    4517                             ;       call            outB
1CB8 534BBF         4518                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4519                             ;       orl             bufind+11,#80h
1CBB 020000   F     4520                                     jmp             goto7
                    4521     
1CBE 78B2           4522     erra0:          mov             r0,#marker
1CC0 76FF           4523                                             mov             @r0,#0ffh
1CC2 753934         4524                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
1CC5 120000   F     4525                                             call            error
1CC8 120000   F     4526                                             call            ind
1CCB 120000   F     4527                                             call            z_1s
1CCE 78B1           4528                                             mov                     r0,#vichR
1CD0 7600           4529                                             mov                     @r0,#0
1CD2 C214           4530                                             clr                     bitvich
1CD4 C206           4531                                             clr                     bitvi11
1CD6 D204           4532                                             setb            bitizm
1CD8 78B2           4533                                             mov                     r0,#marker
1CDA 76FF           4534                                             mov                     @r0,#0ffh
1CDC 802E           4535     gogo7:          jmp                     out7;goto7
                    4536     
1CDE B6032B         4537     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1CE1 8093           4538                                             jmp             poin3
                    4539     
1CE3                4540     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4541                             ;   сохранить
1CE3 7F0E           4542                                     mov             r7,#14
1CE5 784F           4543                                     mov             r0,#abin
1CE7 120000   F     4544                                     call    clearN                  
1CEA 120000   F     4545                                     call    upakB                   
1CED 784F           4546                                     mov             r0,#abin
1CEF 7953           4547                                     mov             r1,#adec                        ;мл        
                              ст
1CF1 120000   F     4548                                     call    decbin                  ;abin..abin+3 (hex)
1CF4 120000   F     4549                                     call    loadr2                  ;r2..r5
1CF7 120402         4550                                     call    altof                   ;r2..r5->int
1CFA 301B04         4551                                     jnb             bitznB,pozB
1CFD EA             4552                                     mov             a,r2
1CFE 4480           4553                                     orl             a,#80h
1D00 FA             4554                                     mov             r2,a                    ;знак-
1D01                4555     pozB:           ;mov            r0,#konstB
                    4556                                     ;call   saver2
                    4557     
1D01 79B2           4558                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1D03 77FF           4559                                     mov             @r1,#0ffh
1D05 78B1           4560                                     mov             r0,#vichR
1D07 7611           4561                                     mov             @r0,#11h
1D09 020000   F     4562                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4563                                     
                    4564     
1D0C                4565     out7:                   ;mov            IE,#80h
1D0C D083           4566                                     pop             dph
1D0E D082           4567                                     pop             dpl
1D10 D007           4568                                     pop             rr7     
1D12 D006           4569                                     pop             rr6
1D14 D005           4570                                     pop             rr5
1D16 D004           4571                                     pop             rr4
1D18 D003           4572                                     pop             rr3
1D1A D002           4573                                     pop             rr2
1D1C D001           4574                                     pop             rr1                             
1D1E D000           4575                                     pop             rr0
1D20 D0D0           4576                                     pop             psw
1D22 D0E0           4577                                     pop             acc
1D24 75AD00         4578                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    73

1D27 75B0C0         4579                             mov             P3,#0c0h
                    4580                             ;       mov             EIE2,#30H
1D2A C219           4581     clr             bitmig
1D2C E586           4582                                             mov             a,P6            ;p6.4=0
1D2E 54EF           4583                             anl             a,#0efh
1D30 F586           4584                             mov             P6,a
1D32 00             4585                             nop
1D33 00             4586                             nop
                    4587                                     
1D34 E586           4588                             mov             a,P6                    ;p6.4=1 
1D36 4410           4589                             orl             a,#10h
1D38 F586           4590                             mov             P6,a
                    4591                             ;;;;;;;;;
1D3A E5DA           4592                             mov             a,PCA0CPM0;             TOG0
1D3C 4446           4593                             orl             a,#46h;anl              a,#0fbh
1D3E F5DA           4594                             mov             PCA0CPM0,a
                    4595     
1D40 75CDD0         4596                             mov             TH2,#0d0h
1D43 75CC00         4597                             mov             TL2,#00
                    4598     
1D46 D2CA           4599                             setb            T2CON.2
1D48 D2AD           4600                             setb            ET2;IE.5
                    4601                                                         
1D4A 32             4602                                     reti
                    4603     
                    4604     
                    4605                                     
                    4606     
                    4607     
1D4B 78B1           4608     lomenu:         mov             r0,#vichR
1D4D B61107         4609                                             cjne    @r0,#11h,menu12
1D50 900000   F     4610                                             mov             dptr,#teTESI
1D53 120000   F     4611     lome1:                  call    lotexT
1D56 22             4612                                             ret
1D57 B61205         4613     menu12:         cjne    @r0,#12h,menu13
1D5A 900000   F     4614                                             mov             dptr,#teTESR
1D5D 80F4           4615                                             jmp             lome1
1D5F B61305         4616     menu13:         cjne    @r0,#13h,menu14
1D62 900000   F     4617                                             mov             dptr,#teSKOR
1D65 80EC           4618                                             jmp             lome1
1D67 B61405         4619     menu14:         cjne    @r0,#14h,menu15
1D6A 900000   F     4620                                             mov             dptr,#teAVK
1D6D 80E4           4621                                             jmp             lome1
1D6F B61505         4622     menu15:                 cjne    @r0,#15h,menu21
1D72 900000   F     4623                                             mov             dptr,#teKALIB
1D75 80DC           4624                                             jmp             lome1
                    4625     
1D77 B62105         4626     menu21: cjne    @r0,#21h,menu22
1D7A 900000   F     4627                                             mov             dptr,#teTE11
1D7D 80D4           4628                                             jmp             lome1
1D7F B62205         4629     menu22:         cjne    @r0,#22h,menu23
1D82 900000   F     4630                                             mov             dptr,#teTE9
1D85 80CC           4631                                             jmp             lome1
1D87 B62305         4632     menu23:         cjne    @r0,#23h,menu31
1D8A 900000   F     4633                                             mov             dptr,#teTE7
1D8D 80C4           4634                                             jmp             lome1
1D8F B63105         4635     menu31:         cjne    @r0,#31h,menu41
1D92 900000   F     4636                                             mov             dptr,#teS57_6
1D95 80BC           4637                                             jmp             lome1
                    4638     
1D97                4639     menu41:         
1D97 900000   F     4640                                             mov             dptr,#tePAR
1D9A 80B7           4641                                             jmp             lome1
                    4642     
1D9C 020000   F     4643     yesvi_kr:               jmp                     yesvi_km
1D9F                4644     endkalib:;KD=Ak/A3
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    74

1D9F 200DFA         4645                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1DA2 789C           4646                                             mov                     r0,#rez_A3
1DA4 120000   F     4647                                             call            resar2
                    4648                                     
1DA7 120402         4649                                     call    altof                   ;->float
1DAA EA             4650                                             mov                     a,r2
1DAB 547F           4651                                             anl                     a,#7fh
1DAD FA             4652                                             mov                     r2,a
1DAE 120000   F     4653                                     call            move28
1DB1 78A4           4654                                             mov                     r0,#rez_Ak
1DB3 120000   F     4655                                             call            resar2
1DB6 1202B7         4656                                             call            fldiv
                    4657                                                     
1DB9 900000   F     4658                                     mov     dptr,#CHtho;100000
1DBC 120000   F     4659                                     call    ldc_ltemp                       ;r8..r11=8
1DBF 120203         4660                                     call    flmul
1DC2 120343         4661                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4662     
1DC5 78A0           4663                                             mov                     r0,#koefKD
1DC7 120000   F     4664                                             call            saver2
                    4665                                             ;запись в рпзу в соотв ячейку
                    4666                             
1DCA 7900           4667                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1DCC 7A50           4668                                     mov             r2,#50h
1DCE 7B00           4669                                     mov             r3,#00
1DD0 120499         4670                                     call    copyPP
                    4671                                     ;внести изменения во внешн озу
1DD3 120000   F     4672                                     call            findext                 ;r1-внешн озу
1DD6 78A0           4673                                     mov                     r0,#koefKD
1DD8 120000   F     4674                                             call            resar2
1DDB EA             4675                                             mov                     a,r2
1DDC F3             4676                                             movx            @r1,a
1DDD 09             4677                                             inc                     r1
1DDE EB             4678                                             mov                     a,r3
1DDF F3             4679                                             movx            @r1,a
1DE0 09             4680                                             inc                     r1
1DE1 EC             4681                                             mov                     a,r4
1DE2 F3             4682                                             movx            @r1,a
1DE3 09             4683                                             inc                     r1
1DE4 ED             4684                                             mov                     a,r5
1DE5 F3             4685                                             movx            @r1,a
                    4686                                     ;кофф *100000 и переведенный в hex формат
                    4687                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4688     ;стереть страницу пап прогр 
1DE6 905000         4689                                     mov             dptr,#5000h
1DE9 7FFF           4690                                     mov             r7,#0ffh
1DEB 12043E         4691                                     call    cle256
                    4692     ;и запись в ячейки кофф памяти прогр (3000h) 
1DEE 7FFF           4693                                     mov             r7,#0ffh
1DF0 7900           4694                                     mov             r1,#0                           ;external r
                             am
1DF2 905000         4695                                     mov             dptr,#5000h
1DF5 120480         4696                                     call    wrpage
                    4697     ;2.2.07
1DF8 79AE           4698                                     mov                     r1,#diap
1DFA B70511         4699                                     cjne            @r1,#5,fulkalib
                    4700                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1DFD D20D           4701                                     setb            bifl_kt
                    4702                                     ;call           loadus
1DFF 900000   F     4703                                     mov                     dptr,#tabt7;заслать ус 7А       
1E02 E4             4704                             clr             a
1E03 93             4705                             movc    a,@a+dptr                               ;high byte
1E04 F584           4706                             mov             p4,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    75

1E06 A3             4707                             inc             dptr
1E07 E4             4708                             clr             a
1E08 93             4709                             movc    a,@a+dptr                               ;low byte
1E09 F585           4710                             mov             p5,a
1E0B 020000   F     4711                                     jmp             goto7;  out_kali
                    4712     
                    4713     ;;;
1E0E                4714     fulkalib:
1E0E C212           4715                                             clr             bitklb
1E10 D216           4716                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1E12 900000   F     4717                                             mov             dptr,#teEND
1E15 120000   F     4718                                             call    lotext
1E18 120000   F     4719                                             call    ind
1E1B 120000   F     4720     out_kali:       call    z_1s
1E1E 120000   F     4721                                             call    z_1s
1E21 020000   F     4722                                             jmp             goto7
1E24                4723     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1E24 7A50           4724                                     mov                     r2,#50h                 ;-11a
1E26 7B14           4725                                     mov                     r3,#14h                 ;k7
1E28 12046C         4726                                     call            rebyte2                         ;r2..r5- he
                             x
1E2B 120402         4727                                     call            altof                   ;r2..r5->float
1E2E C002           4728                                     push            rr2
1E30 C003           4729                                     push            rr3
1E32 C004           4730                                     push            rr4
1E34 C005           4731                                     push            rr5
1E36 7A50           4732                                     mov                     r2,#50h                 ;k5
1E38 7B0C           4733                                     mov                     r3,#0ch
1E3A 12046C         4734                             call            rebyte2                 ;r2..r5
1E3D 120402         4735                                     call            altof                   ;r2..r5->float
1E40 120000   F     4736                                     call            move28
1E43 D005           4737                                     pop                     rr5
1E45 D004           4738                                     pop                     rr4
1E47 D003           4739                                     pop                     rr3
1E49 D002           4740                                     pop                     rr2
1E4B 1202B7         4741                                     call            fldiv                   ;K7/K5
                    4742     
1E4E 900000   F     4743                                     mov     dptr,#CHtho;100000
1E51 120000   F     4744                                     call    ldc_ltemp                       ;r8..r11=8
1E54 120203         4745                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1E57 C002           4746                                     push            rr2
1E59 C003           4747                                     push            rr3
1E5B C004           4748                                     push            rr4
1E5D C005           4749                                     push            rr5
                    4750                                     
1E5F 789C           4751                                     mov                     r0,#rez_A3
1E61 120000   F     4752                                     call            resar2
1E64 120402         4753                                     call            altof                           ;r2..r5->fl
                             oat
1E67 120000   F     4754                                     call            move28
1E6A D005           4755                                     pop                     rr5
1E6C D004           4756                                     pop                     rr4
1E6E D003           4757                                     pop                     rr3
1E70 D002           4758                                     pop                     rr2
1E72 1202B7         4759                               call          fldiv           ;Km     
                    4760     
1E75 900000   F     4761                                     mov     dptr,#CHtho;100000
1E78 120000   F     4762                                     call    ldc_ltemp                       ;r8..r11=8
1E7B 120203         4763                                     call    flmul                           ;r2..r5
1E7E 120343         4764                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1E81 78A0           4765                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1E83 120000   F     4766                                     call            saver2
                    4767                                     ;запись в рпзу в соотв ячейку
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    76

1E86 7900           4768                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1E88 7A50           4769                                     mov             r2,#50h
1E8A 7B00           4770                                     mov             r3,#00
1E8C 120499         4771                                     call    copyPP
                    4772                                     ;внести изменения во внешн озу
1E8F 78A0           4773                                     mov                     r0,#koefKD
1E91 120000   F     4774                                     call            resar2
1E94 792C           4775                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4776                             
1E96 EA             4777                                     mov                     a,r2
1E97 F3             4778                                             movx            @r1,a
1E98 09             4779                                             inc                     r1
1E99 EB             4780                                             mov                     a,r3
1E9A F3             4781                                             movx            @r1,a
1E9B 09             4782                                             inc                     r1
1E9C EC             4783                                             mov                     a,r4
1E9D F3             4784                                             movx            @r1,a
1E9E 09             4785                                             inc                     r1
1E9F ED             4786                                             mov                     a,r5
1EA0 F3             4787                                             movx            @r1,a
                    4788                                     ;кофф *100000 и переведенный в hex формат
                    4789                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4790     ;стереть страницу пап прогр 
1EA1 905000         4791                                     mov             dptr,#5000h
1EA4 7FFF           4792                                     mov             r7,#0ffh
1EA6 12043E         4793                                     call    cle256
                    4794     ;и запись в ячейки кофф памяти прогр (3000h) 
1EA9 7FFF           4795                                     mov             r7,#0ffh
1EAB 7900           4796                                     mov             r1,#0                           ;external r
                             am
1EAD 905000         4797                                     mov             dptr,#5000h
1EB0 120480         4798                                     call    wrpage
                    4799     
1EB3 C20D           4800                                             clr             bifl_kt
1EB5 120000   F     4801                                             call    loadus
1EB8 020000   F     4802                                             jmp             fulkalib
                    4803     
                    4804     ;выч среднего по блоку
                    4805     ;вых r2..r5
1EBB                4806     vichmean:       
                    4807     ;;;;;;;;;;
1EBB 120000   F     4808                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1EBE E582           4809                                             mov                     a,dpl
1EC0 FF             4810                                             mov                     r7,a
1EC1 E583           4811                                             mov                     a,dph
1EC3 FE             4812                                             mov                     r6,a
1EC4 120000   F     4813                                             call            resa_hl;save_bl->dptr
                    4814     
1EC7 C3             4815                                                     clr             c; в начало блока?
1EC8 E582           4816                                                     mov                     a,dpl
1ECA 9F             4817                                                     subb            a,r7
1ECB FF             4818                                                     mov                     r7,a
1ECC 7006           4819                                                     jnz                     oldmean
1ECE E583           4820                                                     mov                     a,dph
1ED0 9E             4821                                                     subb            a,r6
1ED1 FE             4822                                                     mov                     r6,a
1ED2 6065           4823                                                     jz                      outmea;
                    4824     ;;;;;;;;;;
1ED4 120000   F     4825     oldmean:        call            resa_hl;save_bl->dptr
1ED7 78D7           4826                                             mov                     r0,#copy_hl
1ED9 E583           4827                                             mov                     a,dph
1EDB F6             4828                                             mov                     @r0,a
1EDC 08             4829                                             inc                     r0
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    77

1EDD E582           4830                                             mov                     a,dpl
1EDF F6             4831                                             mov                     @r0,a
1EE0 78B8           4832                                             mov                     r0,#work
1EE2 120000   F     4833                                             call            clear4
1EE5 78D6           4834                                             mov                     r0,#chblok;volume
1EE7 7600           4835                                             mov                     @r0,#0
1EE9 120000   F     4836     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1EEC E582           4837                                             mov                     a,dpl
1EEE FF             4838                                             mov                     r7,a
1EEF E583           4839                                             mov                     a,dph
1EF1 FE             4840                                             mov                     r6,a
                    4841     
1EF2 78D7           4842                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1EF4 E6             4843                                             mov                     a,@r0
1EF5 F583           4844                                             mov                     dph,a
1EF7 08             4845                                             inc                     r0
1EF8 E6             4846                                             mov                     a,@r0
1EF9 F582           4847                                             mov                     dpl,a
                    4848                                             
1EFB C3             4849                                             clr                     c;-4
1EFC E582           4850                                             mov                     a,dpl
1EFE 9404           4851                                             subb            a,#4
1F00 F582           4852                                             mov                     dpl,a
1F02 E583           4853                                             mov                     a,dph
1F04 9400           4854                                             subb            a,#0
1F06 F583           4855                                             mov                     dph,a;dptr-4
                    4856                                             ;;;;;;;;
1F08 79D7           4857                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1F0A E583           4858                                                     mov             a,dph
1F0C F7             4859                                               mov           @r1,a
1F0D 09             4860                                                     inc             r1
1F0E E582           4861                                                     mov             a,dpl
1F10 F7             4862                                                     mov             @r1,a
                    4863                                                     ;;;;;;;;;
1F11 C3             4864                                                     clr             c;пришли в начало блока?
1F12 E582           4865                                                     mov                     a,dpl
1F14 9F             4866                                                     subb            a,r7
1F15 FF             4867                                                     mov                     r7,a
1F16 7006           4868                                                     jnz                     nextmea
1F18 E583           4869                                                     mov                     a,dph
1F1A 9E             4870                                                     subb            a,r6
1F1B FE             4871                                                     mov                     r6,a
1F1C 601B           4872                                                     jz                      outmea;
                    4873                                                     
                    4874                                                     ;продолжаем сравнение
                    4875                                                     ;;;;;;;;;;;             
1F1E 120000   F     4876     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1F21 120402         4877                                             call            altof;->float
1F24 120000   F     4878                                             call            move28                  ;r8..r11
1F27 78B8           4879                                             mov                     r0,#work
1F29 120000   F     4880                                             call            resar2
1F2C 120166         4881                                             call            fladd
1F2F 78B8           4882                                             mov                     r0,#work
1F31 120000   F     4883                                             call            saver2
1F34 78D6           4884                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1F36 06             4885                                             inc                     @r0
1F37 80B0           4886                                             jmp                     meng
1F39                4887     outmea:         
1F39 120000   F     4888                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1F3C 120402         4889                                             call            altof;->float
1F3F 120000   F     4890                                             call            move28                  ;r8..r11
1F42 78B8           4891                                             mov                     r0,#work
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    78

1F44 120000   F     4892                                             call            resar2
1F47 120166         4893                                             call            fladd
1F4A 78B8           4894                                             mov                     r0,#work
1F4C 120000   F     4895                                             call            saver2
1F4F E4             4896                                             clr                     a
1F50 FA             4897                                             mov                     r2,a
1F51 FB             4898                                             mov                     r3,a
1F52 FC             4899                                             mov                     r4,a
1F53 78D6           4900                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1F55 E6             4901                                             mov                     a,@r0
1F56 2401           4902                                             add                     a,#1
1F58 FD             4903                                             mov                     r5,a
1F59 120402         4904                                             call            altof;r2..r5 float
1F5C 120000   F     4905                                             call            move28
1F5F 78B8           4906                                             mov                     r0,#work
1F61 120000   F     4907                                             call            resar2
1F64 1202B7         4908                                             call            fldiv
1F67 900000   F     4909                                             mov                     dptr,#ch_10      
1F6A 120000   F     4910                                     call            ldc_ltemp
1F6D 1202B7         4911                                     call            fldiv
1F70 120343         4912                                             call            ftol                            ;->
                             hex
1F73 120000   F     4913                                             call    maform
1F76 784F           4914                                             mov             r0,#abin
1F78 120000   F     4915                                             call    saver2
                    4916     ;;;;;;;;
                    4917                                             
1F7B 7853           4918                                             mov             r0,#adec
1F7D 7952           4919                                             mov             r1,#abin+3      ;hex->10
1F7F 120000   F     4920                                             call    bindec
                    4921                                     
1F82 785C           4922                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1F84 7949           4923                                             mov             r1,#bufind+9
1F86 7F05           4924                                             mov             r7,#5
1F88 E6             4925     bufmea:                         mov             a,@r0
1F89 2430           4926                                             add             a,#30h
1F8B F7             4927                                             mov             @r1,a
1F8C 19             4928                                             dec             r1
1F8D 18             4929                                             dec             r0
1F8E DFF8           4930                                             djnz    r7,bufmea
1F90 7844           4931                                             mov             r0,#bufind+4
1F92 762B           4932                                             mov             @r0,#2bh          
1F94 300202         4933                                             jnb             znmat,nozmea
1F97 762D           4934                                             mov             @r0,#2dh
1F99 434B05         4935     nozmea:         orl             bufind+11,#05h
1F9C 22             4936                                             ret
                    4937     
                    4938     
1F9D E0             4939     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1F9E FA             4940                                             mov                     r2,a
1F9F A3             4941                                             inc                     dptr
1FA0 E0             4942                                             movx            a,@dptr
1FA1 FB             4943                                             mov                     r3,a
1FA2 A3             4944                                             inc                     dptr
1FA3 E0             4945                                             movx            a,@dptr
1FA4 FC             4946                                             mov                     r4,a
1FA5 A3             4947                                             inc                     dptr
1FA6 E0             4948                                             movx            a,@dptr
1FA7 FD             4949                                             mov                     r5,a    
1FA8 22             4950                                             ret
                    4951     
1FA9 C3             4952     min4_hl:        clr                     c;-4
1FAA E582           4953                                             mov                     a,dpl
1FAC 9404           4954                                             subb            a,#4
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    79

1FAE F582           4955                                             mov                     dpl,a
1FB0 E583           4956                                             mov                     a,dph
1FB2 9400           4957                                             subb            a,#0
1FB4 F583           4958                                             mov                     dph,a;dptr-4
1FB6 22             4959                                             ret
                    4960     
1FB7 020000   F     4961     routmin:                jmp             outmin
                    4962     ;мин значение по по блоку
1FBA                4963     vichmin:        ;;;;;;;;;;
1FBA 120000   F     4964                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1FBD E582           4965                                             mov                     a,dpl
1FBF FF             4966                                             mov                     r7,a
1FC0 E583           4967                                             mov                     a,dph
1FC2 FE             4968                                             mov                     r6,a
1FC3 120000   F     4969                                             call            resa_hl;save_bl->dptr
                    4970     
1FC6 C3             4971                                                     clr             c; в начало блока?
1FC7 E582           4972                                                     mov                     a,dpl
1FC9 9F             4973                                                     subb            a,r7
1FCA FF             4974                                                     mov                     r7,a
1FCB 7006           4975                                                     jnz                     oldmin
1FCD E583           4976                                                     mov                     a,dph
1FCF 9E             4977                                                     subb            a,r6
1FD0 FE             4978                                                     mov                     r6,a
1FD1 60E4           4979                                                     jz                      routmin;
                    4980     ;;;;;;;;;;
1FD3                4981     oldmin:
1FD3 120000   F     4982                                             call            resa_hl;save_bl->dptr
                    4983                                                                                     
                    4984     ;с конца блока адрес 2го измерение
1FD6 120000   F     4985                                             call            min4_hl
                    4986                                             
1FD9 78B8           4987                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4988                                             
1FDB E0             4989                                             movx            a,@dptr
1FDC F6             4990                                             mov                     @r0,a
1FDD 08             4991                                             inc                     r0
1FDE A3             4992                                             inc                     dptr
1FDF E0             4993                                             movx            a,@dptr
1FE0 F6             4994                                             mov                     @r0,a
1FE1 08             4995                                             inc                     r0
1FE2 A3             4996                                             inc                     dptr
1FE3 E0             4997                                             movx            a,@dptr
1FE4 F6             4998                                             mov                     @r0,a
1FE5 08             4999                                             inc                     r0
1FE6 A3             5000                                             inc                     dptr
1FE7 E0             5001                                             movx            a,@dptr
1FE8 F6             5002                                             mov                     @r0,a
1FE9 A3             5003                                             inc                     dptr
                    5004                                             
1FEA 78B8           5005                                             mov                     r0,#work
1FEC 120000   F     5006                                             call            resar2
1FEF 120402         5007                                             call            altof;->float;r2..r5
1FF2 78B8           5008                                             mov                     r0,#work
1FF4 120000   F     5009                                             call            saver2
                    5010     
1FF7 120000   F     5011                                             call            min4_hl
                    5012                                             ;call           min4_hl
                    5013     
1FFA 78D7           5014                                             mov                     r0,#copy_hl
1FFC E583           5015                                             mov                     a,dph
1FFE F6             5016                                             mov                     @r0,a
1FFF 08             5017                                             inc                     r0
2000 E582           5018                                             mov                     a,dpl
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    80

2002 F6             5019                                             mov                     @r0,a
                    5020                                     
2003 78D6           5021                                             mov                     r0,#chblok;volume
2005 7600           5022                                             mov                     @r0,#0
2007 120000   F     5023     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
200A E582           5024                                             mov                     a,dpl
200C FF             5025                                             mov                     r7,a
200D E583           5026                                             mov                     a,dph
200F FE             5027                                             mov                     r6,a
                    5028     
2010 78D7           5029                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2012 E6             5030                                             mov                     a,@r0
2013 F583           5031                                             mov                     dph,a
2015 08             5032                                             inc                     r0
2016 E6             5033                                             mov                     a,@r0
2017 F582           5034                                             mov                     dpl,a
                    5035                                             
2019 C3             5036                                             clr                     c;-4
201A E582           5037                                             mov                     a,dpl
201C 9404           5038                                             subb            a,#4
201E F582           5039                                             mov                     dpl,a
2020 E583           5040                                             mov                     a,dph
2022 9400           5041                                             subb            a,#0
2024 F583           5042                                             mov                     dph,a;dptr-4
                    5043                                             ;;;;;;;;
2026 79D7           5044                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
2028 E583           5045                                                     mov             a,dph
202A F7             5046                                               mov           @r1,a
202B 09             5047                                                     inc             r1
202C E582           5048                                                     mov             a,dpl
202E F7             5049                                                     mov             @r1,a
                    5050                                                     ;;;;;;;;;
202F C3             5051                                                     clr             c;пришли в начало блока?
2030 E582           5052                                                     mov                     a,dpl
2032 9F             5053                                                     subb            a,r7
2033 FF             5054                                                     mov                     r7,a
2034 7006           5055                                                     jnz                     nextmin
2036 E583           5056                                                     mov                     a,dph
2038 9E             5057                                                     subb            a,r6
2039 FE             5058                                                     mov                     r6,a
203A 601D           5059                                                     jz                      outmin;
                    5060                                                     
                    5061                                                     ;продолжаем сравнение
                    5062                                                     ;;;;;;;;;;;             
203C 78B8           5063     nextmin:        mov                     r0,#work
203E 120000   F     5064                                             call            resar2
                    5065                                             ;call           altof;->float;r2..r5
2041 120000   F     5066                                             call            move28;->r8..r11
2044 120000   F     5067                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5068     
2047 120402         5069                                             call            altof;->float;r2..r5
                    5070                                             
204A 1201D6         5071                                             call            flcmp
204D 5005           5072                                             jnc                     nomini
204F 78B8           5073                                             mov                     r0,#work;<
2051 120000   F     5074                                             call            saver2;r2..r5
2054 78D6           5075     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
2056 06             5076                                             inc                     @r0
2057 80AE           5077                                             jmp                     ming
                    5078     
2059 78B8           5079     outmin:         mov                     r0,#work;1ое измерение блока
205B 120000   F     5080                                             call            resar2
                    5081                                     ;       call            altof;->float;r2..r5
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    81

205E 120000   F     5082                                             call            move28;->r8..r11
2061 120000   F     5083                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5084     
2064 120402         5085                                             call            altof;->float;r2..r5
                    5086                                             
2067 1201D6         5087                                             call            flcmp
206A 5005           5088                                             jnc                     minivix
206C 78B8           5089                                             mov                     r0,#work;<
206E 120000   F     5090                                             call            saver2;r2..r5
                    5091                                             ;;;;;;;;;
                    5092     
2071 78B8           5093     minivix:        mov                     r0,#work
2073 120000   F     5094                                             call            resar2
                    5095     
                    5096                                             ;call           altof;->float
                    5097                                     
2076 900000   F     5098                                             mov                     dptr,#ch_10      
2079 120000   F     5099                                             call            ldc_ltemp
207C 1202B7         5100                                             call            fldiv
207F 120343         5101                                             call            ftol                            ;->
                             hex
                    5102                                             ;;;
2082 120000   F     5103                                             call            maform
2085 784F           5104                                             mov                     r0,#abin
2087 120000   F     5105                                             call            saver2
                    5106     ;;;;;;;;
                    5107                                             
208A 7853           5108                                             mov             r0,#adec
208C 7952           5109                                             mov             r1,#abin+3      ;hex->10
208E 120000   F     5110                                             call    bindec
                    5111                                     
2091 785C           5112                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
2093 7949           5113                                             mov             r1,#bufind+9
2095 7F05           5114                                             mov             r7,#5
2097 E6             5115     bufmin:                         mov             a,@r0
2098 2430           5116                                             add             a,#30h
209A F7             5117                                             mov             @r1,a
209B 19             5118                                             dec             r1
209C 18             5119                                             dec             r0
209D DFF8           5120                                             djnz    r7,bufmin
209F 7844           5121                                             mov             r0,#bufind+4
20A1 762B           5122                                             mov             @r0,#2bh          
20A3 300202         5123                                             jnb             znmat,nozmin
20A6 762D           5124                                             mov             @r0,#2dh
20A8 434B05         5125     nozmin:         orl             bufind+11,#05h
20AB 22             5126                                             ret
                    5127     
                    5128     
20AC 020000   F     5129     routmax:                jmp             outmax
                    5130     ;мин значение по по блоку
20AF                5131     vichmax:        ;;;;;;;;;;
20AF 120000   F     5132                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
20B2 E582           5133                                             mov                     a,dpl
20B4 FF             5134                                             mov                     r7,a
20B5 E583           5135                                             mov                     a,dph
20B7 FE             5136                                             mov                     r6,a
20B8 120000   F     5137                                             call            resa_hl;save_bl->dptr
                    5138     
20BB C3             5139                                                     clr             c; в начало блока?
20BC E582           5140                                                     mov                     a,dpl
20BE 9F             5141                                                     subb            a,r7
20BF FF             5142                                                     mov                     r7,a
20C0 7006           5143                                                     jnz                     oldmax
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    82

20C2 E583           5144                                                     mov                     a,dph
20C4 9E             5145                                                     subb            a,r6
20C5 FE             5146                                                     mov                     r6,a
20C6 60E4           5147                                                     jz                      routmax;
                    5148     ;;;;;;;;;;
20C8                5149     oldmax:
20C8 120000   F     5150                                             call            resa_hl;save_bl->dptr
                    5151                                             
                    5152                                             
                    5153     ;с конца блока адрес 2го измерение
20CB 120000   F     5154                                             call            min4_hl
                    5155                                             
20CE 78B8           5156                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5157                                             
20D0 E0             5158                                             movx            a,@dptr
20D1 F6             5159                                             mov                     @r0,a
20D2 08             5160                                             inc                     r0
20D3 A3             5161                                             inc                     dptr
20D4 E0             5162                                             movx            a,@dptr
20D5 F6             5163                                             mov                     @r0,a
20D6 08             5164                                             inc                     r0
20D7 A3             5165                                             inc                     dptr
20D8 E0             5166                                             movx            a,@dptr
20D9 F6             5167                                             mov                     @r0,a
20DA 08             5168                                             inc                     r0
20DB A3             5169                                             inc                     dptr
20DC E0             5170                                             movx            a,@dptr
20DD F6             5171                                             mov                     @r0,a
20DE A3             5172                                             inc                     dptr
                    5173                                             
20DF 78B8           5174                                             mov                     r0,#work
20E1 120000   F     5175                                             call            resar2
20E4 120402         5176                                             call            altof;->float;r2..r5
20E7 78B8           5177                                             mov                     r0,#work
20E9 120000   F     5178                                             call            saver2
                    5179     
20EC 120000   F     5180                                             call            min4_hl
                    5181                                     ;       call            min4_hl
                    5182     
20EF 78D7           5183                                             mov                     r0,#copy_hl
20F1 E583           5184                                             mov                     a,dph
20F3 F6             5185                                             mov                     @r0,a
20F4 08             5186                                             inc                     r0
20F5 E582           5187                                             mov                     a,dpl
20F7 F6             5188                                             mov                     @r0,a
                    5189                                     
20F8 78D6           5190                                             mov                     r0,#chblok;volume
20FA 7600           5191                                             mov                     @r0,#0
20FC 120000   F     5192     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
20FF E582           5193                                             mov                     a,dpl
2101 FF             5194                                             mov                     r7,a
2102 E583           5195                                             mov                     a,dph
2104 FE             5196                                             mov                     r6,a
                    5197     
2105 78D7           5198                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2107 E6             5199                                             mov                     a,@r0
2108 F583           5200                                             mov                     dph,a
210A 08             5201                                             inc                     r0
210B E6             5202                                             mov                     a,@r0
210C F582           5203                                             mov                     dpl,a
                    5204                                             
210E C3             5205                                             clr                     c;-4
210F E582           5206                                             mov                     a,dpl
2111 9404           5207                                             subb            a,#4
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    83

2113 F582           5208                                             mov                     dpl,a
2115 E583           5209                                             mov                     a,dph
2117 9400           5210                                             subb            a,#0
2119 F583           5211                                             mov                     dph,a;dptr-4
                    5212                                             ;;;;;;;;
211B 79D7           5213                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
211D E583           5214                                                     mov             a,dph
211F F7             5215                                               mov           @r1,a
2120 09             5216                                                     inc             r1
2121 E582           5217                                                     mov             a,dpl
2123 F7             5218                                                     mov             @r1,a
                    5219                                                     ;;;;;;;;;
2124 C3             5220                                                     clr             c;пришли в начало блока?
2125 E582           5221                                                     mov                     a,dpl
2127 9F             5222                                                     subb            a,r7
2128 FF             5223                                                     mov                     r7,a
2129 7006           5224                                                     jnz                     nextmax
212B E583           5225                                                     mov                     a,dph
212D 9E             5226                                                     subb            a,r6
212E FE             5227                                                     mov                     r6,a
212F 601D           5228                                                     jz                      outmax;
                    5229                                                     
                    5230                                                     ;продолжаем сравнение
                    5231                                                     ;;;;;;;;;;;             
2131 78B8           5232     nextmax:        mov                     r0,#work
2133 120000   F     5233                                             call            resar2
                    5234                                             ;call           altof;->float;r2..r5
2136 120000   F     5235                                             call            move28;->r8..r11
2139 120000   F     5236                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5237     
213C 120402         5238                                             call            altof;->float;r2..r5
                    5239                                             
213F 1201D6         5240                                             call            flcmp
2142 4005           5241                                             jc                      nomaxi
2144 78B8           5242                                             mov                     r0,#work;>
2146 120000   F     5243                                             call            saver2;r2..r5
2149 78D6           5244     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
214B 06             5245                                             inc                     @r0
214C 80AE           5246                                             jmp                     maxg
214E 78B8           5247     outmax:         mov                     r0,#work;1ое измерение блока
2150 120000   F     5248                                             call            resar2
                    5249                                     ;       call            altof;->float;r2..r5
2153 120000   F     5250                                             call            move28;->r8..r11
2156 120000   F     5251                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5252     
2159 120402         5253                                             call            altof;->float;r2..r5
                    5254                                             
215C 1201D6         5255                                             call            flcmp
215F 4005           5256                                             jc                      maxvix
2161 78B8           5257                                             mov                     r0,#work;>
2163 120000   F     5258                                             call            saver2;r2..r5
                    5259                                             ;;;;;;;;;
                    5260     
2166 020000   F     5261     maxvix:         jmp             minivix
                    5262     
                    5263     
2169 78CF           5264     bufl_dec:       mov                     r0,#chbuf       
216B 120000   F     5265                                             call            resar2  
216E 900000   F     5266                                             mov                     dptr,#ch_1       
2171 120000   F     5267                                             call            ldc_ltemp
2174 1201D1         5268                                             call            flsub
2177 78CF           5269                                             mov                     r0,#chbuf       
2179 120000   F     5270                                             call            saver2  
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    84

217C 22             5271                                             ret
                    5272     ;прерывание таймера Т2
217D                5273     inter2:         
217D E5DA           5274                                             mov             a,PCA0CPM0
217F 54BF           5275                                             anl             a,#0bfh                         
2181 F5DA           5276                                             mov             PCA0CPM0,a
                    5277                                             ;mov            a,T2CON         ;T2CON.2=0
                    5278                                             ;anl            a,#0fbh
2183 75C800         5279                                             mov             T2CON,#00;a
2186 C2AD           5280                                             clr             IE.5
2188 32             5281                                             reti
                    5282     ;$include (d:\amp\subr6.asm) 
                +1  5283     
                +1  5284     ;тест интерфейса
2189            +1  5285     testrs: ;jb     p0.3,goprogr
2189 C2AC       +1  5286                                     clr     IE.4
218B 759955     +1  5287     test1:  mov     SBUF0,#55h
218E 3099FD     +1  5288                                     jnb     SCON0.1,$
2191 78B8       +1  5289                                     mov     r0,#work;chtest
2193 76BE       +1  5290                                     mov     @r0,#190d;60
                +1  5291     
2195 309825     +1  5292     test01: jnb     SCON0.0,test2
2198 E599       +1  5293                                     mov     a,SBUF0
219A B45512     +1  5294                                     cjne    a,#55h,test3
219D C299       +1  5295     test4:  clr     SCON0.1
219F C298       +1  5296                                     clr     SCON0.0
21A1 7D0A       +1  5297                                     mov     r5,#10
21A3 7840       +1  5298                                     mov     r0,#bufind              ;- - - -
21A5 762D       +1  5299     test04: mov     @r0,#2dh
21A7 08         +1  5300                                     inc     r0
21A8 DDFB       +1  5301                                     djnz    r5,test04
21AA 120000   F +1  5302                                     call    ind
21AD 80DC       +1  5303                                     jmp     test1
21AF            +1  5304     test3:  
21AF 753933     +1  5305                                     mov     nuerr,#33h
21B2 120000   F +1  5306                                     call    error           ;на кран прибора ERR 3
                +1  5307                             
21B5 120000   F +1  5308                                     call    ind;
21B8 120000   F +1  5309                                     call    z_01s           ;100ms
21BB 80E0       +1  5310                                     jmp     test4
21BD 78B8       +1  5311     test2:  mov     r0,#work;chtest
21BF B60002     +1  5312                                     cjne    @r0,#0,test02
21C2 8003       +1  5313                                     jmp     test5
21C4 16         +1  5314     test02: dec     @r0
21C5 80CE       +1  5315                                     jmp     test01
21C7 120000   F +1  5316     test5:  call    z_1ms           ;1ms
21CA C299       +1  5317                                     clr     SCON0.1
                +1  5318             
21CC 753933     +1  5319                                     mov     nuerr,#33h
21CF 120000   F +1  5320                                     call    error           ;на кран прибора ERR 3
                +1  5321                                     
21D2 120000   F +1  5322                                     call    ind
21D5 120000   F +1  5323                                     call    z_01s           ;100ms
21D8 80B1       +1  5324                                     jmp     test1   
                +1  5325     
                +1  5326     
                +1  5327     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
21DA 75E700     +1  5328      ind:   mov             EIE2,#00H;mov   IE,#00h
21DD 120000   F +1  5329                     call    mign
21E0 7840       +1  5330                      mov            r0,#bufind;+11
21E2 7F0C       +1  5331                      mov            r7,#12
21E4 C287       +1  5332      nexin: clr             p0.7;6
21E6 E6         +1  5333                     mov             a,@r0
21E7 F59B       +1  5334                     mov             SPI0DAT,a
21E9 20FBFD     +1  5335                     jb              TXBSY,$
21EC D287       +1  5336                     setb    p0.7;6
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    85

21EE 120000   F +1  5337                     call    z_9             ;25mks
21F1 08         +1  5338                     inc             r0;dec          r0
21F2 DFF0       +1  5339                     djnz    r7,nexin
21F4 75E730     +1  5340                     mov             EIE2,#30H;mov   IE,#80h
21F7 22         +1  5341                ret
                +1  5342     
                +1  5343     
21F8 7A08       +1  5344     zapadc:   mov R2,#8
21FA D297       +1  5345     sdv:      setb P1.7
21FC 33         +1  5346               rlc A
21FD 9296       +1  5347                     mov P1.6,C
21FF 120000   F +1  5348                     call tim2
                +1  5349                                     
2202 C297       +1  5350                     clr P1.7
2204 120000   F +1  5351                     call tim2
2207 DAF1       +1  5352                     djnz R2,sdv
2209 D296       +1  5353                     setb P1.6
220B 22         +1  5354                     ret
                +1  5355     
220C 7A08       +1  5356     chtadc:   mov R2,#8
220E D297       +1  5357     sdv1:     setb P1.7
2210 120000   F +1  5358               call tim2
2213 C297       +1  5359                     clr P1.7
2215 A296       +1  5360                     mov C,P1.6
2217 33         +1  5361                     rlc A
2218 120000   F +1  5362                     call tim2
221B DAF1       +1  5363                     djnz R2,sdv1
221D 22         +1  5364                     ret
                +1  5365     
221E 7E30       +1  5366     tim:      mov R6,#30h;38h
2220 DEFE       +1  5367     tim1:     djnz R6,tim1
2222 22         +1  5368               ret
                +1  5369               
2223 7E10       +1  5370     tim2:     mov R6,#10h;14h
2225 DEFE       +1  5371     tim3:     djnz R6,tim3
2227 22         +1  5372               ret
                +1  5373     
                +1  5374     ;запись из acc
2228 C3         +1  5375     write_x1: clr   c
2229            +1  5376     writeD_x1:
2229 92B1       +1  5377                       mov P3.1,c        ;запись
222B F5A0       +1  5378               mov P2,A
222D D2B3       +1  5379                       setb P3.3
222F 120000   F +1  5380                       call z_5
2232 C2B3       +1  5381                       clr P3.3
2234 75A0FF     +1  5382                       mov P2,#0FFh
2237 22         +1  5383                       ret
                +1  5384     
                +1  5385     ;чтение в acc
2238 C3         +1  5386     read_x2:  clr   c  
2239 92B1       +1  5387               mov P3.1,c        ;чтение
223B D2B2       +1  5388               setb P3.2
223D D2B3       +1  5389                       setb P3.3
223F 120000   F +1  5390                     call z_5
2242 E5A0       +1  5391                       mov A,P2
2244 C2B3       +1  5392                       clr P3.3
2246 C2B2       +1  5393                       clr P3.2
2248 22         +1  5394                       ret
                +1  5395     
                +1  5396     
2249 120000   F +1  5397     loop:     call read_x2;x2    ;ожидание флага готовности
224C 20E7FA     +1  5398                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
224F 22         +1  5399                        ret           ;возврат, если бит А(7)<>1
                +1  5400                                      
                +1  5401                                        
                +1  5402     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    86

                +1  5403     
                +1  5404     
                +1  5405     
                +1  5406     
                +1  5407     
                +1  5408     
                +1  5409     ;принимаемый байт в acc
                +1  5410     ;прием байта последовательным кодом старшими разрядами вперед
2250 7A08       +1  5411     read:    mov R2,#8
2252 C297       +1  5412     re1:     clr P1.7;P1.2
2254 120000   F +1  5413              call tim2        ;5mks
2257 A294       +1  5414                     mov C,P1.4;P1.0
2259 33         +1  5415                     rlc A           
225A D297       +1  5416                     setb P1.7;P1.2
225C 120000   F +1  5417                     call tim2
225F DAF1       +1  5418                     djnz R2,re1
2261 22         +1  5419                     ret
                +1  5420     
                +1  5421      ;in r0-count   
                +1  5422     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5423     ;r2..r5 -значение счетчика
2262            +1  5424     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
2262 E6         +1  5425                     mov                     a,@r0
2263 FC         +1  5426                     mov                     r4,a
2264 08         +1  5427                     inc                     r0
2265 E6         +1  5428                     mov                     a,@r0
2266 FD         +1  5429                     mov                     r5,a
2267 7B00       +1  5430                     mov                     r3,#0
2269 7A00       +1  5431                     mov                     r2,#0
226B 750800     +1  5432                     mov                     r8,#0;clr                       r8
226E 750900     +1  5433                     mov                     r9,#0;clr                       r9
2271 120000   F +1  5434                     call            lcmp
2274 22         +1  5435                     ret
                +1  5436     
                +1  5437     
                +1  5438     ;in-r1-count
2275            +1  5439     chdec:          ;mov            r1,#chavt               ;chavt-1
2275 E7         +1  5440                             mov             a,@r1
2276 FC         +1  5441                             mov             r4,a
2277 09         +1  5442                             inc             r1
2278 E7         +1  5443                             mov             a,@r1
2279 FD         +1  5444                             mov             r5,a
227A C202       +1  5445                             clr             rr2
227C C203       +1  5446                             clr             rr3
227E 900000   F +1  5447                             mov             dptr,#ch1        
2281 120000   F +1  5448                             call    ldc_ltemp
2284 120000   F +1  5449                             call    lsub
2287 ED         +1  5450                             mov             a,r5
2288 F7         +1  5451                             mov             @r1,a
2289 19         +1  5452                             dec             r1
228A EC         +1  5453                             mov             a,r4
228B F7         +1  5454                             mov             @r1,a
                +1  5455                             
228C 22         +1  5456                             ret      
                +1  5457     
                +1  5458     
                +1  5459     
                +1  5460     
228D            +1  5461     loadUS: ;если идет тест измерения ус восстановить для теста
228D 201533     +1  5462                                     jb              biteizm,yestest
2290 79AE       +1  5463                                             mov             r1,#diap
2292 E7         +1  5464                             mov             a,@r1
2293 23         +1  5465                             rl              a;*2
2294 FC         +1  5466                             mov             r4,a                    ;save a
2295 900000   F +1  5467                             mov             dptr,#tabus
2298 93         +1  5468                             movc    a,@a+dptr
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    87

2299 FA         +1  5469                             mov             r2,a                    ;high byte
229A E584       +1  5470                             mov             a,p4
229C 5401       +1  5471                             anl             a,#01
229E 4A         +1  5472                             orl             a,r2
229F F584       +1  5473                             mov             p4,a
22A1 0C         +1  5474                             inc             r4
22A2 EC         +1  5475                             mov             a,r4
22A3 93         +1  5476                             movc    a,@a+dptr
22A4 FB         +1  5477                             mov             r3,a                    ;low byte
22A5 E585       +1  5478                             mov             a,p5
22A7 5401       +1  5479                             anl             a,#01
22A9 4B         +1  5480                             orl             a,r3
22AA F585       +1  5481                             mov             p5,a
22AC 799A       +1  5482                             mov             r1,#parT
22AE B7010E     +1  5483                             cjne    @r1,#1,bret
22B1 79AE       +1  5484                             mov             r1,#diap                  ;10s (parT=1)
22B3 7405       +1  5485                             mov             a,#5                      ;10-8..10-11 p4.1=1
22B5 C3         +1  5486                             clr             c
22B6 97         +1  5487                             subb    a,@r1
22B7 5006       +1  5488                             jnc             bret
22B9 E584       +1  5489                             mov             a,p4
22BB 4402       +1  5490                             orl             a,#02
22BD F584       +1  5491                             mov             p4,a                     ;10-8..10-11 p4.1=1
22BF 120000   F +1  5492     bret:      call          louizm         ;us если вкл кн ИЗМЕР
22C2 22         +1  5493                             ret
22C3            +1  5494     yestest:
22C3 120000   F +1  5495                             call            lotpus          ;ус теста измерения
22C6 22         +1  5496                             ret
                +1  5497                             
                +1  5498     ;загр ус для кор 0
                +1  5499     ;dptr-
22C7 E4         +1  5500     lospus:         clr             a
                +1  5501                             ;movc   a,@a+dptr
                +1  5502                             ;mov            r2,a                    ;high byte
                +1  5503                             ;mov            a,p4
                +1  5504                             ;anl            a,#01
                +1  5505                             ;orl            a,r2
                +1  5506                             ;mov            p4,a
                +1  5507                             ;inc            dptr
22C8 E4         +1  5508                             clr             a
22C9 93         +1  5509                             movc    a,@a+dptr
22CA FB         +1  5510                             mov             r3,a                    ;low byte
22CB E585       +1  5511                             mov             a,p5
22CD 54BF       +1  5512                             anl             a,#0bfh;01
22CF 4B         +1  5513                             orl             a,r3
22D0 F585       +1  5514                             mov             p5,a
22D2 22         +1  5515                             ret
                +1  5516     
22D3 80         +1  5517     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5518     
                +1  5519     ;us кнопка измерения выкл
22D4 88D6       +1  5520     tabus:     db           88h,0d6h         ;10-2
22D6 88F6       +1  5521                             db      88h,0f6h         ;10-3
22D8 88D6       +1  5522                             db              88h,0d6h         ;10-4
22DA 88F6       +1  5523                             db              88h,0f6h         ;10-5
22DC 9AD6       +1  5524                             db      9ah,0d6h         ;10-6
22DE 9AF6       +1  5525                             db              9ah,0f6h         ;10-7
22E0 ACD6       +1  5526                             db              0ach,0d6h        ;10-8
22E2 ACF6       +1  5527                             db      0ach,0f6h        ;10-9
22E4 C8D6       +1  5528                             db              0c8h,0d6h        ;10-10
22E6 C8F6       +1  5529                             db              0c8h,0f6h        ;10-11
                +1  5530     
22E8            +1  5531     tabt11: 
22E8 66E6       +1  5532                             db              66h,0e6h;10-11
22EA            +1  5533     tabt9:  
22EA 32E6       +1  5534                             db              32h,0e6h;10-9
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    88

22EC            +1  5535     tabt7:  
22EC 18EE       +1  5536                             db              18h,0eeh;10-7
                +1  5537     
                +1  5538      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5539     ;в зав от parT (Tизм)
22EE 79B7       +1  5540     loadT:          mov             r1,#load;parT
22F0 7840       +1  5541     lolevT:         mov             r0,#bufind+0
22F2 7B0A       +1  5542                             mov             r3,#10
22F4 75F00A     +1  5543                             mov             b,#10
22F7 E7         +1  5544                             mov             a,@r1
22F8 A4         +1  5545                             mul             ab
22F9 FC         +1  5546                             mov             r4,a                    ;save a
22FA 900000   F +1  5547                             mov             dptr,#textT
22FD 93         +1  5548             lod1:   movc    a,@a+dptr
22FE F6         +1  5549                             mov             @r0,a
22FF 08         +1  5550                             inc             r0
2300 0C         +1  5551                             inc             r4
2301 EC         +1  5552                             mov             a,r4
2302 DBF9       +1  5553                             djnz    r3,lod1
2304 534B03     +1  5554                             anl                     bufind+11,#03h          ;гашение точек
2307 22         +1  5555                             ret     
                +1  5556     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5557     ;dptr-адр строки текста         
2308            +1  5558     lotext:         
2308 7B0A       +1  5559                             mov             r3,#10
230A 7840       +1  5560                             mov             r0,#bufind+0
230C E4         +1  5561     lodt:           clr             a
230D 93         +1  5562                             movc    a,@a+dptr
230E F6         +1  5563                             mov             @r0,a
230F 08         +1  5564                             inc             r0
2310 A3         +1  5565                             inc             dptr
2311 DBF9       +1  5566                             djnz    r3,lodt
2313 534B03     +1  5567                             anl                     bufind+11,#03h          ;гашение точек
2316 22         +1  5568                             ret                                     
                +1  5569     
                +1  5570     
                +1  5571     
                +1  5572     
                +1  5573      ;задержка 100 мкс
2317 7978       +1  5574     z_100:    mov R1,#78h     ;загрузка первого числа
2319 7A02       +1  5575     z100:     mov R2,#2h     ;загрузка второго числа
231B DAFE       +1  5576     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
231D D9FA       +1  5577               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
231F 22         +1  5578               ret           
                +1  5579     
                +1  5580     ;задержка 34 мкс
2320 7B8B       +1  5581     z_5:      mov R3,#8Bh      ;загрузка числа
2322 DBFE       +1  5582     ct:       djnz R3,ct
2324 22         +1  5583               ret
                +1  5584     
                +1  5585     ;задержка 15 мс
2325 79FA       +1  5586     z_15:     mov R1,#0FAh    ;загрузка первого числа
2327 7AED       +1  5587     z15:      mov R2,#0EDh   ;загрузка второго числа
2329 DAFE       +1  5588     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
232B D9FA       +1  5589               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
232D 22         +1  5590               ret   
                +1  5591                                               
                +1  5592      ;задержка 1 мс
232E 7910       +1  5593     z_1ms:     mov R1,#10h     
2330 7AED       +1  5594     ss1:       mov R2,#0EDh    
2332 DAFE       +1  5595                djnz R2, $    
2334 D9FA       +1  5596                djnz R1, ss1   
2336 22         +1  5597                ret   
                +1  5598     
                +1  5599      ;????????
                +1  5600     ;задержка 1с
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    89

2337 7D1F       +1  5601     z_1s:   mov             r5,#01fh 
2339 7EFF       +1  5602     co2s:   mov     R6,#0ffh     
233B 7FFF       +1  5603     z1s:     mov    R7,#0ffh     
233D DFFE       +1  5604     co1s:   djnz    R7, co1s        
233F DEFA       +1  5605             djnz    R6, z1s 
2341 DDF6       +1  5606                     djnz    r5,co2s
2343 22         +1  5607               ret
                +1  5608     ;задержка 0,1с
2344 7D03       +1  5609     z_01s:           mov            r5,#03h 
2346 7EFF       +1  5610     co02s:          mov     R6,#0ffh     
2348 7FFF       +1  5611     z01s:           mov     R7,#0ffh     
234A DFFE       +1  5612                             djnz    R7, $   
234C DEFA       +1  5613                     djnz    R6, z01s 
234E DDF6       +1  5614                             djnz    r5,co02s
2350 22         +1  5615                      ret
                +1  5616                                               
                +1  5617     ;задержка 0,5с
2351 7D0D       +1  5618     z_05s:           mov            r5,#0dh 
2353 7EFF       +1  5619     co05s:                  mov     R6,#0ffh     
2355 7FFF       +1  5620     z05s:           mov     R7,#0ffh     
2357 DFFE       +1  5621                                     djnz    R7, $   
2359 DEFA       +1  5622                     djnz    R6, z05s 
235B DDF6       +1  5623                                             djnz    r5,co05s
235D 22         +1  5624                      ret                                                     
                +1  5625                                                               
235E 000007FF   +1  5626     chzap:  db      00,00,07h,0ffh             
2362 00000000   +1  5627     ch0:    db      00,00,00,00
2366 0000000A   +1  5628     ch10:   db      00,00,00,0ah                            ;10
236A 00000005   +1  5629     ch5:    db      00,00,00,05                                             ;5
236E 00000004   +1  5630     ch4:    db      00,00,00,04                                             ;4
2372 000003B9   +1  5631     ch954:  db 00,00,03,0b9h                                                ;954
2376 000003E8   +1  5632     ch10000:        db 00,00,03h,0e8h                                               ;10000
237A 00000064   +1  5633     ch100:  db 00,00,00,64h ;100
237E 00000002   +1  5634     ch2:    db      00,00,00,02                                             
                +1  5635     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5636     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5637     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
2382 00000001   +1  5638     ch1:    db  00,00,00,01
2386 49742400   +1  5639     ch_mln: db      49h,74h,24h,00;10*6
238A 3F800000   +1  5640     ch_1:   db      3fh,80h,00,00   
238E 40000000   +1  5641     ch_2:   db      40h,00,00,00;2
2392 40800000   +1  5642     ch_4:   db      40h,80h,00,00;4 
2396 40A00000   +1  5643     ch_5:   db      40h,0a0h,00,00;5
239A 40E00000   +1  5644     ch_7:   db      40h,0e0h,00,00;7
                +1  5645             
239E 3F741EDF   +1  5646     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
23A2 47C35000   +1  5647     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
23A6 3F800347   +1  5648     KD:             db      3fh,80h,03h,47h;1,0001
23AA 48435000   +1  5649     CH2tho: db      48h,43h,50h,00;200000
23AE 4856D800   +1  5650     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
23B2 4856D800   +1  5651     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
23B6 461C4000   +1  5652     ch_10th:db  46h,1ch,40h,00;10000-2710h
23BA 41200000   +1  5653     ch_10:  db      41h,20h,00,00;10d
23BE 48742400   +1  5654     ch_250: db      48h,74h,24h,00;250000
23C2 000186A0   +1  5655     chk:            db      00,01,86h,0a0h;
23C6 00000320   +1  5656     ch320h: db      00,00,03h,20h;320h=800d
23CA 00000150   +1  5657     ch150h: db      00,00,01h,50h;150h
23CE C0400000   +1  5658     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5659     
                +1  5660     
                +1  5661     ;r1- мл байт 2х байтного числа
23D2            +1  5662     tenmin:         ;-10
23D2 C3         +1  5663                             clr             c
23D3 E7         +1  5664                     mov             a,@r1
23D4 9405       +1  5665                             subb    a,#5;10
23D6 F7         +1  5666                             mov             @r1,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    90

23D7 19         +1  5667                             dec             r1
23D8 E7         +1  5668                             mov             a,@r1
23D9 9400       +1  5669                             subb    a,#0
23DB F7         +1  5670                             mov             @r1,a
23DC 22         +1  5671                             ret
                +1  5672       ;r0-обнуление ячеек памяти  
23DD 7F04       +1  5673       clear4:        mov    r7,#4
23DF E4         +1  5674                             clr             a
23E0 F6         +1  5675       cl4:          mov             @r0,a
23E1 08         +1  5676                             inc             r0
23E2 DFFC       +1  5677                             djnz    r7,cl4
23E4 22         +1  5678                             ret     
                +1  5679     
                +1  5680      ;r0-обнуление ячеек памяти 
                +1  5681      ;R7- 
23E5            +1  5682       clearN:        
23E5 E4         +1  5683                             clr             a
23E6 F6         +1  5684       cl4N:         mov             @r0,a
23E7 08         +1  5685                             inc             r0
23E8 DFFC       +1  5686                             djnz    r7,cl4N
23EA 22         +1  5687                             ret     
                +1  5688     
                +1  5689       ;чтение номера байта с индикатора(2байта)
                +1  5690     ;bufind+8..bufind+9
                +1  5691     ;-  - - -
                +1  5692     ;- - - - - - - - - -
                +1  5693     ;adec..adec+9
                +1  5694     ;ст            мл
23EB 7848       +1  5695     upak2:  mov             r0,#bufind+8;
23ED 795C       +1  5696                     mov             r1,#adec+9
23EF 7F02       +1  5697                     mov             r7,#2;2bait
23F1 C3         +1  5698     upa2:   clr             c
23F2 E6         +1  5699                     mov             a,@r0
23F3 9430       +1  5700                     subb    a,#30h
23F5 F7         +1  5701                     mov             @r1,a
23F6 18         +1  5702                     dec             r0
23F7 19         +1  5703                     dec             r1
23F8 DFF7       +1  5704                     djnz    r7,upa2
23FA 22         +1  5705                     ret  
                +1  5706     
                +1  5707     
                +1  5708         
                +1  5709      ;bufind+4..bufind+9
                +1  5710     ;-  - - -
                +1  5711     ;- - - - - - - - - -
                +1  5712     ;adec..adec+9
                +1  5713     ;ст            мл
23FB 7849       +1  5714     upak:   mov             r0,#bufind+9;
23FD 795C       +1  5715                     mov             r1,#adec+9
23FF 7F06       +1  5716                     mov             r7,#6
2401 C3         +1  5717     upa:    clr             c
2402 E6         +1  5718                     mov             a,@r0
2403 9430       +1  5719                     subb    a,#30h
2405 F7         +1  5720                     mov             @r1,a
2406 18         +1  5721                     dec             r0
2407 19         +1  5722                     dec             r1
2408 DFF7       +1  5723                     djnz    r7,upa
240A 22         +1  5724                     ret
                +1  5725     
                +1  5726      ;чтение номера байта с индикатора(3байта)
                +1  5727     ;bufind+3..bufind+9
                +1  5728     ;-  - - -
                +1  5729     ;- - - - - - - - - -
                +1  5730     ;adec..adec+9
                +1  5731     ;ст            мл
240B 7849       +1  5732     upak3:  mov             r0,#bufind+9;
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    91

240D 795C       +1  5733                     mov             r1,#adec+9
240F 7F03       +1  5734                     mov             r7,#3;3bait
2411 C3         +1  5735     upa1:   clr             c
2412 E6         +1  5736                     mov             a,@r0
2413 9430       +1  5737                     subb    a,#30h
2415 F7         +1  5738                     mov             @r1,a
2416 18         +1  5739                     dec             r0
2417 19         +1  5740                     dec             r1
2418 DFF7       +1  5741                     djnz    r7,upa1
241A 22         +1  5742                     ret
                +1  5743     
                +1  5744     ;вых-r2,r3-адрес ячее памяти прогр
241B            +1  5745     findkoef:
241B 79AE       +1  5746                                     mov             r1,#diap
241D E7         +1  5747                                     mov             a,@r1
241E 23         +1  5748                                     rl              a                                          
                                          ;diap*2(2bait )
241F FC         +1  5749                                     mov             r4,a                                    ;sa
                             ve
2420 900000   F +1  5750                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5751                                     
2423 93         +1  5752                                     movc    a,@a+dptr                       ;ст байт
2424 FA         +1  5753                                     mov             r2,a
2425 A3         +1  5754                                     inc             dptr
2426 EC         +1  5755                                     mov             a,r4
2427 93         +1  5756                                     movc    a,@a+dptr
2428 FB         +1  5757                                     mov             r3,a                    ;мл байт
2429 22         +1  5758                                     ret
                +1  5759     ;r2..r5 в опр яч внешн озу
242A            +1  5760     findext:
242A 79AE       +1  5761                                     mov             r1,#diap
242C E7         +1  5762                                     mov             a,@r1
242D 23         +1  5763                                     rl              a                                          
                                          ;diap*2(2bait )
242E 23         +1  5764                                     rl              a                                          
                                          ;diap*2(2bait )
242F F9         +1  5765                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5766                                     
2430 22         +1  5767                                     ret
                +1  5768     
                +1  5769     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5770     ;(5000h..5027h)
2431 5000       +1  5771     diKDw:  dw              5000h                   ;10-2
2433 5004       +1  5772                                     dw              5004h                   ;10-3
2435 5008       +1  5773                                     dw              5008h                   ;10-4
2437 500C       +1  5774                                     dw              500ch                   ;10-5
2439 5010       +1  5775                                     dw              5010h                   ;10-6
243B 5014       +1  5776                                     dw              5014h                   ;10-7
243D 5018       +1  5777                                     dw              5018h                   ;10-8
243F 501C       +1  5778                                     dw              501ch                   ;10-9
2441 5020       +1  5779                                     dw              5020h                   ;10-10
2443 5024       +1  5780                                     dw              5024h                   ;10-11
2445 5028       +1  5781     dipar:  dw              5028h                   ;parol
2447 502C       +1  5782     diKm:           dw              502ch                   ;Km для теста измерения
2449 000186A0   +1  5783     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5784     
244D AA08       +1  5785     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
244F AB09       +1  5786                                             mov     r3,ltemp+1
2451 AC0A       +1  5787                                             mov     r4,ltemp+2
2453 AD0B       +1  5788                                             mov     r5,ltemp+3
2455 22         +1  5789                                             ret
                +1  5790     ;bufind+4..bufind+9
                +1  5791     ;-  - - -
                +1  5792     ;- - - - - - - - - -
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    92

                +1  5793     ;adec..adec+9
                +1  5794     ;ст            мл
2456 7847       +1  5795     upakA:  mov             r0,#bufind+7;
2458 795C       +1  5796                     mov             r1,#adec+9
245A 7F04       +1  5797                     mov             r7,#4
245C C3         +1  5798     upaa4:  clr             c
245D E6         +1  5799                     mov             a,@r0
245E 9430       +1  5800                     subb    a,#30h
2460 F7         +1  5801                     mov             @r1,a
2461 18         +1  5802                     dec             r0
2462 19         +1  5803                     dec             r1
2463 DFF7       +1  5804                     djnz    r7,upaa4
2465 22         +1  5805                     ret
                +1  5806     
                +1  5807     ;bufind+4..bufind+9
                +1  5808     ;-  - - -
                +1  5809     ;- - - - - - - - - -
                +1  5810     ;adec..adec+9
                +1  5811     ;ст            мл
2466 7848       +1  5812     upakB:  mov             r0,#bufind+8;
2468 795C       +1  5813                     mov             r1,#adec+9
246A 7F05       +1  5814                     mov             r7,#5
246C C3         +1  5815     upab:   clr             c
246D E6         +1  5816                     mov             a,@r0
246E 9430       +1  5817                     subb    a,#30h
2470 F7         +1  5818                     mov             @r1,a
2471 18         +1  5819                     dec             r0
2472 19         +1  5820                     dec             r1
2473 DFF7       +1  5821                     djnz    r7,upab
2475 C21B       +1  5822                     clr                     bitznB
2477 E543       +1  5823                     mov             a,bufind+3
2479 B42D02     +1  5824                     cjne            a,#2dh,abret
247C D21B       +1  5825                     setb            bitznB
247E            +1  5826     abret:
247E 22         +1  5827                     ret
247F            +1  5828     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
247F 4E6E6AA8   +1  5829                                             db      4eh,6eh,6ah,0a8h;10**9
2483 43FA0000   +1  5830     CH_500:         db              43h,0fah,00,00;1fah=500
2487 4856D800   +1  5831     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
248B 49742400   +1  5832     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5833     
                +1  5834     
                +1  5835     
                +1  5836     ;управление AD7731
                +1  5837     ;r4=b1 r5=b2
248F            +1  5838     iniacp: ;управление AD7731
248F 7403       +1  5839                             mov             a,#03
                +1  5840     
2491 120000   F +1  5841                             call    write
2494 EC         +1  5842                             mov             a,r4;#80h
2495 120000   F +1  5843                             call    write
2498 ED         +1  5844                             mov             a,r5;#04
2499 120000   F +1  5845                             call    write
249C 7402       +1  5846                             mov             a,#02
249E 120000   F +1  5847                             call    write
24A1 74A1       +1  5848                             mov             a,#0a1h
24A3 120000   F +1  5849                             call    write
24A6 7474       +1  5850                             mov             a,#74h
24A8 120000   F +1  5851                             call    write
24AB 2095FD     +1  5852                             jb              p1.5,$;p1.3,$
24AE 7402       +1  5853                             mov             a,#02
24B0 120000   F +1  5854                             call    write
24B3 7481       +1  5855                             mov             a,#81h
24B5 120000   F +1  5856                             call    write
24B8 7474       +1  5857                             mov             a,#74h
24BA 120000   F +1  5858                             call    write
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    93

24BD 2095FD     +1  5859                             jb              p1.5,$;p1.3,$
24C0 7402       +1  5860                             mov             a,#02
24C2 120000   F +1  5861                             call    write
24C5 7421       +1  5862                             mov             a,#21h
24C7 120000   F +1  5863                             call    write
24CA 7474       +1  5864                             mov             a,#74h
24CC 120000   F +1  5865                             call    write
24CF 22         +1  5866                             ret
                +1  5867                             ;;;;;;;;;;;;;;;;
                +1  5868     ;;;;;;;;;;;;;;;;;
                +1  5869     ;;;;;;;;;;;;;;;;;
24D0 0000       +1  5870     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
24D2 6000       +1  5871                                     db              60h,00h;40h,04h         ;10s
24D4 6000       +1  5872                                     db              60h,00;40h,04h          ;1s
24D6 6000       +1  5873                                     db              60h,00h;40h,04h         ;0,1s
24D8 6000       +1  5874                                     db              60h,00h;20h,04h         ;50ms
24DA 6000       +1  5875                                     db              60h,00h;20h,04h          ;10ms
24DC 1332       +1  5876                                     db              13h,32h         ;2ms
                +1  5877     
                +1  5878     ;загр В1,В2 в завис от Т                                
24DE 799A       +1  5879     loab12:                 mov             r1,#parT
24E0 900000   F +1  5880                                     mov             dptr,#tabB1_2
24E3 E7         +1  5881                                     mov             a,@r1
24E4 23         +1  5882                                     rl              a;*2
24E5 FF         +1  5883                                     mov             r7,a                    ;save a
24E6 93         +1  5884                                     movc    a,@a+dptr
24E7 FC         +1  5885                                     mov             r4,a   ;b1
24E8 0F         +1  5886                                     inc             r7
24E9 EF         +1  5887                                     mov             a,r7
24EA 93         +1  5888                                     movc    a,@a+dptr
24EB FD         +1  5889                                     mov             r5,a
                +1  5890                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5891                             
24EC 22         +1  5892                                     ret
                +1  5893     
                +1  5894     
24ED 7852       +1  5895     loadr2: mov             r0,#abin+3              ;r2..r5
24EF E6         +1  5896                     mov             a,@r0                   ; ст мл   
24F0 FA         +1  5897                     mov             r2,a
24F1 18         +1  5898                     dec             r0
24F2 E6         +1  5899                     mov             a,@r0
24F3 FB         +1  5900                     mov             r3,a
24F4 18         +1  5901                     dec             r0
24F5 E6         +1  5902                     mov             a,@r0
24F6 FC         +1  5903                     mov             r4,a
24F7 18         +1  5904                     dec             r0
24F8 E6         +1  5905                     mov             a,@r0
24F9 FD         +1  5906                     mov             r5,a
24FA 22         +1  5907                     ret
                +1  5908                                             
                +1  5909      ;;;;;;;;;;;;;;;;;;;      
                +1  5910      ;загрузка KD в зависимости от диап изм  
                +1  5911      ;koef->r8..r11
24FB 78AE       +1  5912     loadKD:                 mov             r0,#diap
24FD E6         +1  5913                                     mov             a,@r0
24FE 900000   F +1  5914                                     mov             dptr,#diKDn
2501 75F004     +1  5915                                     mov             b,#4
2504 A4         +1  5916                                     mul             ab
2505 FF         +1  5917                                     mov             r7,a;save
2506 93         +1  5918                                     movc    a,@a+dptr
2507 F508       +1  5919                                     mov             r8,a
2509 A3         +1  5920                                     inc             dptr
250A EF         +1  5921                                     mov             a,r7
250B 93         +1  5922                                     movc    a,@a+dptr
250C F509       +1  5923                                     mov             r9,a
250E A3         +1  5924                                     inc             dptr
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    94

250F EF         +1  5925                                     mov             a,r7
2510 93         +1  5926                                     movc    a,@a+dptr
2511 F50A       +1  5927                                     mov             r10,a
2513 A3         +1  5928                                     inc             dptr
2514 EF         +1  5929                                     mov             a,r7
2515 93         +1  5930                                     movc    a,@a+dptr
2516 F50B       +1  5931                                     mov             r11,a
2518 22         +1  5932                                     ret
                +1  5933     
2519 3F506B7B   +1  5934      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
251D 3F507FCC   +1  5935                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2521 3F4F9D0B   +1  5936                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
2525 3F4FE869   +1  5937                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
2529 3F50294A   +1  5938                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
252D 3F50639E   +1  5939                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
2531 3F4BC9F0   +1  5940                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
2535 3F4C063B   +1  5941                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
2539 3F50EFDD   +1  5942                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
253D 3F512AD9   +1  5943                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5944     
2541 00000039   +1  5945     ch57:   db      00,00,00,39h;57
2545 00000014   +1  5946     ch20:   db      00,00,00,14h;20
                +1  5947     
                +1  5948     ;загр ус для тестов ацп 
                +1  5949     ;dptr-
2549 78B1       +1  5950     lotpus: mov             r0,#vichR
254B B6210D     +1  5951                                     cjne    @r0,#21h,te22
254E 900000   F +1  5952                                     mov                     dptr,#tabt11;заслать ус 11А
2551 E4         +1  5953     lotp:           clr             a
2552 93         +1  5954                             movc    a,@a+dptr                               ;high byte
2553 F584       +1  5955                             mov             p4,a
2555 A3         +1  5956                             inc             dptr
2556 E4         +1  5957                             clr             a
2557 93         +1  5958                             movc    a,@a+dptr                               ;low byte
2558 F585       +1  5959                             mov             p5,a
255A 22         +1  5960                             ret
255B B62205     +1  5961     te22:                   cjne    @r0,#22h,te23
255E 900000   F +1  5962                             mov                     dptr,#tabt9;заслать ус 9А       
2561 80EE       +1  5963                             jmp                     lotp
                +1  5964     
2563 900000   F +1  5965     te23:   mov                     dptr,#tabt7;заслать ус 7А       
2566 80E9       +1  5966                             jmp                     lotp
                +1  5967     
                +1  5968     
                +1  5969     
                +1  5970     
                +1  5971     
2568 02030405   +1  5972     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
256C 06070809                
2570 0A0B                    
                +1  5973     
2572 78AE       +1  5974     findR:                  mov                     r0,#diap
2574 E6         +1  5975                                                     mov                     a,@r0
2575 900000   F +1  5976                                                     mov                     dptr,#Tabn
2578 93         +1  5977                                                     movc            a,@a+dptr
2579 22         +1  5978                                                     ret
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    95

                +1  5979     ;bufind=30h..39h                                                                           
                                           ;
257A C219       +1  5980     vvchif:                 clr             bitmig
257C 79B2       +1  5981                                     mov             r1,#marker
257E E7         +1  5982                                     mov             a,@r1                   ;изм цифры
257F 7840       +1  5983                                     mov             r0,#bufind                      ;0000
2581 28         +1  5984                                     add             a,r0
2582 F8         +1  5985                                     mov             r0,a
2583 06         +1  5986                                     inc             @r0
2584 B63A03     +1  5987                                     cjne    @r0,#3ah,chif
2587 7630       +1  5988                                     mov             @r0,#30h
2589 22         +1  5989                                     ret
258A C3         +1  5990     chif:           clr                     c
258B 7430       +1  5991                                     mov                     a,#30h
258D 96         +1  5992                                     subb            a,@r0
258E 4002       +1  5993                                     jc                      chif5
2590 7630       +1  5994                                     mov             @r0,#30h
2592 22         +1  5995     chif5:  ret
                +1  5996     
2593 80E5       +1  5997     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  5998     
2595 B641FB     +1  5999     vvnol31:        cjne            @r0,#41h,vvnol41
2598 800A       +1  6000                                             jmp                     chifour
259A B631F8     +1  6001     vvnol23:        cjne            @r0,#31h,vvnol31
259D 8005       +1  6002                                             jmp                     chifour 
                +1  6003     
259F 78B0       +1  6004     vvchibl:        mov                     r0,#level
25A1 B623F6     +1  6005                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
25A4 C219       +1  6006     chifour:                clr             bitmig
25A6 79B2       +1  6007                                     mov             r1,#marker
25A8 E7         +1  6008                                     mov             a,@r1                   ;изм цифры
25A9 7840       +1  6009                                     mov             r0,#bufind                      ;1..4
25AB 28         +1  6010                                     add             a,r0
25AC F8         +1  6011                                     mov             r0,a
25AD 06         +1  6012                                     inc             @r0
25AE B63504     +1  6013                                     cjne    @r0,#35h,chifb
25B1 7631       +1  6014                                     mov             @r0,#31h
25B3 8006       +1  6015                                     jmp             chifb1
25B5 B63003     +1  6016     chifb:  cjne    @r0,#30h,chifb1
25B8 7631       +1  6017                                     mov             @r0,#31h
25BA 22         +1  6018                                     ret
25BB            +1  6019     chifb1:;;;;;;;;;;
25BB C3         +1  6020                                     clr                     c
25BC 7430       +1  6021                                     mov                     a,#30h
25BE 96         +1  6022                                     subb            a,@r0
25BF 4002       +1  6023                                     jc                      chifl5
25C1 7630       +1  6024                                     mov             @r0,#30h
                +1  6025                                     
25C3 22         +1  6026     chifl5: ret
                +1  6027     ;;;;;;;;;;;;;
25C4 22         +1  6028             ret
                +1  6029       ;перевод маркера влево
25C5            +1  6030     marle:  
25C5 C219       +1  6031                     clr             bitmig
                +1  6032                     ;mov            savba,#0   нельзя обнулять
25C7 78B2       +1  6033             mov             r0,#marker
25C9 16         +1  6034                     dec             @r0
25CA E6         +1  6035                     mov             a,@r0
25CB C3         +1  6036                     clr             c
25CC 953A       +1  6037                     subb    a,movleft         ;крайне левое положение
25CE 5001       +1  6038                     jnc             rler
25D0 06         +1  6039                     inc             @r0
25D1 22         +1  6040     rler:   ret
                +1  6041         
                +1  6042     ;перевод маркера вправо
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    96

25D2 C219       +1  6043     marri:  clr             bitmig
25D4 78B2       +1  6044                     mov             r0,#marker
25D6 06         +1  6045                     inc         @r0
25D7 E53B       +1  6046                     mov             a,movrig           ;крайне правое положение
25D9 C3         +1  6047                     clr             c
25DA 96         +1  6048                     subb    a,@r0
25DB 5001       +1  6049                     jnc             rrir
25DD 16         +1  6050                     dec             @r0
25DE 22         +1  6051     rrir:   ret
                +1  6052         
                +1  6053     ;konstA->bufind+4..bufind+7
25DF 78BC       +1  6054     outA:           mov                     r0,#konstA
25E1 120000   F +1  6055                                     call            resar2
25E4 120343     +1  6056                                     call            ftol                    ;->hex
25E7 784F       +1  6057                                     mov             r0,#abin
25E9 120000   F +1  6058                                     call            saver2
25EC 7853       +1  6059                                     mov                     r0,#adec
25EE 7952       +1  6060                                     mov             r1,#abin+3
25F0 120000   F +1  6061                                     call            bindec
25F3 785C       +1  6062                                     mov                     r0,#adec+9
25F5 7947       +1  6063                                     mov                     r1,#bufind+7
25F7 7F04       +1  6064                                     mov                     r7,#4
25F9 E6         +1  6065     outa2:  mov             a,@r0
25FA 2430       +1  6066                               add           a,#30h
25FC F7         +1  6067                                     mov             @r1,a
25FD 19         +1  6068                                     dec             r1
25FE 18         +1  6069                                     dec             r0
25FF DFF8       +1  6070                                     djnz    r7,outa2
2601 22         +1  6071                                     ret
                +1  6072                                             
                +1  6073     ;konstB->bufind+4..bufind+8
                +1  6074     ;outB:          mov                     r0,#konstB
                +1  6075     ;                               call            resar2
                +1  6076     ;                               mov                     a,r2
                +1  6077     ;                               anl                     a,#80h
                +1  6078     ;                               jz                      outb3
                +1  6079     ;mov                    a,r2
                +1  6080     ;                               anl                     a,#7fh
                +1  6081     ;                               mov                     r2,a
                +1  6082     ;                               mov                     bufind+3,#2dh
                +1  6083     ;outb3: call            ftol                    ;->hex
                +1  6084     ;                               mov             r0,#abin
                +1  6085     ;                               call            saver2
                +1  6086     ;                               mov                     r0,#adec
                +1  6087     ;                               mov             r1,#abin+3
                +1  6088     ;                               call            bindec
                +1  6089     ;                               mov                     r0,#adec+9
                +1  6090     ;                               mov                     r1,#bufind+8
                +1  6091     ;                               mov                     r7,#5
                +1  6092     ;outb2: mov             a,@r0
                +1  6093     ;                         add           a,#30h
                +1  6094     ;                               mov             @r1,a
                +1  6095     ;                               dec             r1
                +1  6096     ;                               dec             r0
                +1  6097     ;                               djnz    r7,outb2
                +1  6098     ;                               ret
                +1  6099     
                +1  6100     
                +1  6101     ;пп мигания индикации
2602 78B2       +1  6102     mign:           mov             r0,#marker
                +1  6103                                     
2604 B6FF03     +1  6104                                     cjne    @r0,#0ffh,mignn
                +1  6105                                     ;реж изм мигает *
2607 C219       +1  6106                                     clr             bitmig
2609 22         +1  6107                                     ret
                +1  6108     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    97

260A            +1  6109     mignn:                  ;clr            c
260A 7440       +1  6110                                     mov             a,#bufind
260C 26         +1  6111                                     add             a,@r0                   ;a=bufind+marker
260D F9         +1  6112                                     mov             r1,a
260E 201907     +1  6113                                     jb              bitmig,onmig
2611 873C       +1  6114                                     mov             savba,@r1
                +1  6115                             ;       mov             a,@r1
                +1  6116                             ;       mov             savba,a
2613 7720       +1  6117                                     mov             @r1,#" "
                +1  6118                                     
2615 D219       +1  6119                                     setb    bitmig
2617 22         +1  6120                                     ret
                +1  6121     
2618 A73C       +1  6122     onmig:                  mov             @r1,savba
                +1  6123                                     ;mov            a,savba
                +1  6124                                     ; mov           @r1,a
261A C219       +1  6125                                     clr             bitmig
261C 120000   F +1  6126                                     call    z_01s
261F 22         +1  6127                                     ret
                +1  6128     ;номер ошибки bufind+6
2620 900000   F +1  6129     error:          mov             dptr,#teERR
2623 120000   F +1  6130                                             call    lotext
2626 853946     +1  6131                                             mov             bufind+6,nuerr
2629 22         +1  6132                                     ret
                +1  6133     
                +1  6134     
262A            +1  6135     textT:          
262A FD543D32   +1  6136     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
262E 6D67FDFD                
2632 FDFD                    
2634 FD543D31   +1  6137     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
2638 306D67FD                
263C FDFD                    
263E FD543D35   +1  6138                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
2642 306D67FD                
2646 FDFD                    
2648 FD543D64   +1  6139                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
264C 3167FDFD                
2650 FDFD                    
2652 20202054   +1  6140                             db              " "," "," ","T","=",31h,67h," "," "," "
2656 3D316720                
265A 2020                    
265C 2020543D   +1  6141                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2660 31306720                
2664 2020                    
                +1  6142     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6143     
2666 42753474   +1  6144     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
266A 79767454                
266E 7720                    
2670 20553D20   +1  6145     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
2674 20202020                
2678 2065                    
267A 20423D2B   +1  6146     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
267E 20202020                
2682 2020                    
2684 20207145   +1  6147     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
2688 48722020                
268C 2020                    
                +1  6148     
268E 20544579   +1  6149     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2692 542D7433                
2696 7120                    
2698 54457954   +1  6150     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
269C 20523520                
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    98

26A0 2020                    
26A2 20794B30   +1  6151     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
26A6 50205235                
26AA 2020                    
26AC 20204142   +1  6152     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
26B0 4B202020                
26B4 2020                    
26B6 204B4176   +1  6153     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
26BA 74735020                
26BE 202020                  
                +1  6154     
26C1 20544579   +1  6155     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
26C5 54202020                
26C9 5431                    
26CB 20544579   +1  6156     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
26CF 54202020                
26D3 5432                    
26D5 20544579   +1  6157     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
26D9 54202020                
26DD 5433                    
                +1  6158     
                +1  6159     
26DF 20202035   +1  6160     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
26E3 37362020                
26E7 2020                    
26E9 20202031   +1  6161     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
26ED 39322020                
26F1 2020                    
                +1  6162     
26F3 61415030   +1  6163     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
26F7 76772030                
26FB 3030                    
26FD 20303030   +1  6164     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2701 30302020                
2705 2041                    
2707 74337120   +1  6165     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
270B 4B304879                
270F 5420                    
2711 20204275   +1  6166     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2715 58307820                
2719 2020                    
271B 2020304C   +1  6167     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
271F 4C202020                
2723 2020                    
2725 20203034   +1  6168     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
2729 7479544B                
272D 4120                    
272F 20203041   +1  6169     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
2733 71795420                
2737 20203341   +1  6170     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
273B 61747977                
273F 2020                    
2741 20206150   +1  6171     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
2745 30797130                
2749 545020                  
274C 20206130   +1  6172     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2750 76484162                
2754 2020                    
2756 20744854   +1  6173     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
275A 20303030                
275E 3067                    
2760 20207376   +1  6174     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2764 304B2020                
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE    99

2768 2020                    
276A 20207376   +1  6175     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
276E 304B2030                
2772 2020                    
2774 30547934   +1  6176     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
2778 45542030                
277C 3031                    
277E 79544154   +1  6177     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2782 74795474                
2786 4B41                    
2788 71744820   +1  6178     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
278C 20202020                
2790 2020                    
2792 71414B79   +1  6179     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2796 20202020                
279A 2020                    
279C 79504578   +1  6180     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
27A0 20202020                
27A4 2020                    
                +1  6181      ;;;;;;;;;;;;;;;;;;;         
27A6 2020304C   +1  6182     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
27AA 4C204920                
27AE 2020                    
27B0 2020304C   +1  6183     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
27B4 4C206620                
27B8 2020                    
27BA 20204552   +1  6184     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
27BE 52202020                
27C2 2020                    
27C4 2020454E   +1  6185     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
27C8 44202020                
27CC 2020                    
                +1  6186     
                +1  6187     ;dptr+4-приемник
                +1  6188     ;dptr-источник
                +1  6189     ;r7-кол байт  
27CE            +1  6190     xCIKLWR:
27CE 7F04       +1  6191                             mov             r7,#4   
27D0 E0         +1  6192     lwrx:   movx    a,@dptr
27D1 C083       +1  6193                             push    dph
27D3 C082       +1  6194                             push    dpl
27D5 A3         +1  6195                             inc             dptr
27D6 A3         +1  6196                             inc             dptr
27D7 A3         +1  6197                             inc             dptr
27D8 A3         +1  6198                             inc             dptr
27D9 F0         +1  6199                             movx    @dptr,a
27DA D082       +1  6200                             pop             dpl
27DC D083       +1  6201                             pop             dph
                +1  6202                             
27DE A3         +1  6203                             inc             dptr
27DF DFEF       +1  6204                             djnz    r7,lwrx
27E1 22         +1  6205                             ret
                +1  6206     ;r2..r5->@dptr..@dptr+3                         
27E2 EA         +1  6207     saveIr2:                mov     a,r2
27E3 F0         +1  6208                                             movx    @dptr,a
27E4 A3         +1  6209                                             inc     dptr
27E5 EB         +1  6210                                             mov     a,r3
27E6 F0         +1  6211                                             movx    @dptr,a
27E7 A3         +1  6212                                             inc     dptr
27E8 EC         +1  6213                                             mov     a,r4
27E9 F0         +1  6214                                             movx    @dptr,a
27EA A3         +1  6215                                             inc     dptr
27EB ED         +1  6216                                             mov     a,r5
27EC F0         +1  6217                                             movx    @dptr,a
27ED 22         +1  6218                                             ret
                +1  6219     ;r2..r5-> @r0..@r0+3
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   100

                +1  6220     
27EE EA         +1  6221     saver2:         mov     a,r2
27EF F6         +1  6222                                             mov     @r0,a
27F0 08         +1  6223                                             inc     r0
27F1 EB         +1  6224                                             mov     a,r3
27F2 F6         +1  6225                                             mov     @r0,a
27F3 08         +1  6226                                             inc     r0
27F4 EC         +1  6227                                             mov     a,r4
27F5 F6         +1  6228                                             mov     @r0,a
27F6 08         +1  6229                                             inc     r0
27F7 ED         +1  6230                                             mov     a,r5
27F8 F6         +1  6231                                             mov     @r0,a
27F9 22         +1  6232                                             ret 
27FA 7F50       +1  6233     clmassix:       mov                     r7,#50h;28h
27FC 900100     +1  6234                             mov     dptr,#MASS0        ;забить массив A нулями
27FF 7400       +1  6235     clmax:          mov          a,#00h
2801 F0         +1  6236                  movx    @dptr,a
2802 A3         +1  6237                  inc     dptr
2803 DFFA       +1  6238                 djnz                r7,clmax                
2805 F56E       +1  6239                  mov     chmas,a
2807 C201       +1  6240                  clr     bitmas
2809 22         +1  6241                 ret
                +1  6242     ;r1-яЁшхьшъ
                +1  6243     ;r0-шёЄюўшъ
                +1  6244     ;r7-ъюы срщЄ  
280A            +1  6245     CIKLWR:
280A 7F04       +1  6246                             mov             r7,#4   
280C E6         +1  6247     lwr:    mov     a,@r0
280D F7         +1  6248                             mov     @r1,a
280E 09         +1  6249                             inc             r1
280F 08         +1  6250                             inc             r0
2810 DFFA       +1  6251                             djnz    r7,lwr
2812 22         +1  6252                             ret     
                +1  6253     ;r2..r5-> @dptr..@dptr+3
                +1  6254     
2813 120000   F +1  6255     zmul:   call    maform
2816 120000   F +1  6256                     call    lmul
2819 120000   F +1  6257                     call    bform
281C 22         +1  6258                     ret
                +1  6259     
281D 120000   F +1  6260     zdiv:   call    maform
2820 120000   F +1  6261                     call    divide
2823 120000   F +1  6262                     call    bform
2826 22         +1  6263                     ret
                +1  6264     
2827 EA         +1  6265     maform: mov a,r2
2828 33         +1  6266             rlc a
2829 5006       +1  6267             jnc             fo1m
282B D202       +1  6268                     setb            znmat
282D 120000   F +1  6269                     call   form4
2830 22         +1  6270                     ret
2831 C202       +1  6271     fo1m:   clr             znmat
2833 22         +1  6272                     ret
                +1  6273     
2834 300203     +1  6274     bform:  jnb             znmat,fo2m
2837 120000   F +1  6275                     call    form4
283A 22         +1  6276     fo2m:   ret
                +1  6277       
                +1  6278     ;r2..r5 яхЁхтхёЄш т фюя ъюф
283B ED         +1  6279     form4:          mov a,r5
283C F4         +1  6280             cpl a
283D 2401       +1  6281             add a,#1
283F FD         +1  6282             mov r5,a
2840 EC         +1  6283             mov a,r4
2841 F4         +1  6284             cpl a
2842 3400       +1  6285             addc    a,#0
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   101

2844 FC         +1  6286             mov r4,a
2845 EB         +1  6287             mov a,r3
2846 F4         +1  6288                 cpl a
2847 3400       +1  6289             addc    a,#0
2849 FB         +1  6290             mov r3,a
284A EA         +1  6291             mov a,r2
284B F4         +1  6292             cpl a
284C 3400       +1  6293             addc    a,#0
284E FA         +1  6294             mov r2,a
284F 22         +1  6295             ret
                +1  6296     
2850 120000   F +1  6297     zcmp:   call            maform
2853 120000   F +1  6298                     call            lcmp
2856 C0D0       +1  6299                     push            psw
2858 120000   F +1  6300                     call    bform
285B D0D0       +1  6301                     pop             psw
285D 22         +1  6302                     ret
                +1  6303     
                +1  6304     
                +1  6305     ;@r0..@r0+3->r8..r11
                +1  6306     
285E E6         +1  6307     resar8: mov     a,@r0
285F F508       +1  6308                     mov     ltemp,a
2861 08         +1  6309                     inc     r0
2862 E6         +1  6310                     mov     a,@r0
2863 F509       +1  6311                     mov     ltemp+1,a
2865 08         +1  6312                     inc     r0
2866 E6         +1  6313                     mov     a,@r0
2867 F50A       +1  6314                     mov     ltemp+2,a
2869 08         +1  6315                     inc     r0
286A E6         +1  6316                     mov     a,@r0
286B F50B       +1  6317                     mov     ltemp+3,a
286D 22         +1  6318                     ret
                +1  6319     
                +1  6320     ;
                +1  6321     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6322     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6323     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6324     ;r2 a    ўшёыю 180
                +1  6325     ;00 b4
                +1  6326     ;т_ї- mabin..mabin+2
                +1  6327     ;     80 01 00
                +1  6328      
286E C8         +1  6329     cond:   xch     a,r0    
286F F9         +1  6330                     mov     r1,a
2870 C8         +1  6331                     xch     a,r0
2871 7C03       +1  6332                     mov     r4,#03
2873 7700       +1  6333     dcoa:   mov     @r1,#00
2875 09         +1  6334                     inc     r1
2876 DCFB       +1  6335                     djnz    r4,dcoa
2878 7B10       +1  6336                     mov     r3,#10h
287A C3         +1  6337     dcob:   clr     c
287B 33         +1  6338                     rlc     a
287C CA         +1  6339                     xch     a,r2
287D 33         +1  6340                     rlc     a
287E CA         +1  6341                     xch     a,r2
287F C8         +1  6342                     xch     a,r0
2880 F9         +1  6343                     mov     r1,a
2881 C8         +1  6344                     xch     a,r0
2882 7C03       +1  6345                     mov     r4,#03
2884 FD         +1  6346                     mov     r5,a
2885 E7         +1  6347     dcoc:   mov     a,@r1 
2886 37         +1  6348                     addc    a,@r1
2887 D4         +1  6349                     da      a
2888 F7         +1  6350                     mov     @r1,a
2889 09         +1  6351                     inc     r1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   102

288A DCF9       +1  6352                     djnz    r4,dcoc
288C ED         +1  6353                     mov     a,r5
288D 4003       +1  6354                     jc      dcod
288F DBE9       +1  6355                     djnz    r3,dcob
2891 C3         +1  6356                     clr     c
2892 00         +1  6357     dcod:   nop
2893 22         +1  6358                     ret
                +1  6359     
2894 8A08       +1  6360     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2896 850309     +1  6361                     mov     ltemp+1,3
2899 85040A     +1  6362                     mov     ltemp+2,4
289C 85050B     +1  6363                     mov     ltemp+3,5
289F 22         +1  6364                     ret
                +1  6365     
                +1  6366     ;@r0..@r0+3->r2..r5
                +1  6367     
28A0 E6         +1  6368     resar2: mov     a,@r0
28A1 FA         +1  6369                     mov     r2,a
28A2 08         +1  6370                     inc     r0
28A3 E6         +1  6371                     mov     a,@r0
28A4 FB         +1  6372                     mov     r3,a
28A5 08         +1  6373                     inc     r0
28A6 E6         +1  6374                     mov     a,@r0
28A7 FC         +1  6375                     mov     r4,a
28A8 08         +1  6376                     inc     r0
28A9 E6         +1  6377                     mov     a,@r0
28AA FD         +1  6378                     mov     r5,a
28AB 22         +1  6379                     ret
                +1  6380     
                +1  6381     ;25mkc !!!!!!!!!!!!!!!1
28AC 7B4B       +1  6382     z_9:      mov R3,#4Bh      ;загрузка числа
28AE DBFE       +1  6383                    djnz R3,$
28B0 22         +1  6384               ret
                +1  6385     
                +1  6386     ;запись   передаваемый байт в acc
                +1  6387     ;передача байта послед кодом старшими разрядами  вперед
28B1 7A08       +1  6388     write:     mov R2,#8
28B3 C3         +1  6389                             clr  c  
28B4 C297       +1  6390     wr1:            clr             p1.7;P1.2
28B6 00         +1  6391                         nop 
28B7 33         +1  6392                             rlc A
28B8 9296       +1  6393                             mov P1.6,C;P1.1,C
28BA 120000   F +1  6394                        call tim2
28BD D297       +1  6395                        setb P1.7;P1.2
28BF 120000   F +1  6396                call tim2
28C2 DAF0       +1  6397                       djnz R2,wr1
28C4 C296       +1  6398                       clr P1.6;P1.1
28C6 22         +1  6399                                              ret
                +1  6400     
                +1  6401     ;чтение номера байта с индикатора(2байта)
                +1  6402     ;bufind+8..bufind+9
                +1  6403     ;-  - - -
                +1  6404     ;- - - - - - - - - -
                +1  6405     ;adec..adec+9
                +1  6406     ;ст            мл
28C7 7847       +1  6407     upak1:  mov             r0,#bufind+7;
28C9 795C       +1  6408                                     mov             r1,#adec+9
28CB C3         +1  6409                                     clr             c
28CC E6         +1  6410                                     mov             a,@r0
28CD 9430       +1  6411                                     subb    a,#30h
28CF FF         +1  6412                                     mov             r7,a
28D0 C3         +1  6413                                     clr             c
28D1 9405       +1  6414                                     subb    a,#5
28D3 4004       +1  6415                                     jc              upk1
28D5 7404       +1  6416                                     mov             a,#4
28D7 8001       +1  6417                                     jmp             upk2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   103

28D9 EF         +1  6418     upk1:           mov             a,r7
28DA F7         +1  6419     upk2:           mov             @r1,a
28DB 22         +1  6420                                     ret  
                +1  6421     ;r1-мл байт счетчика ячеек
28DC C3         +1  6422     chminus:        clr                     c
28DD E7         +1  6423                                             mov                     a,@r1
28DE 9401       +1  6424                                             subb            a,#01
28E0 F7         +1  6425                                             mov                     @r1,a;low
28E1 19         +1  6426                                             dec                     r1
28E2 E7         +1  6427                                             mov                     a,@r1
28E3 9400       +1  6428                                             subb            a,#00
28E5 F7         +1  6429                                             mov                     @r1,a
28E6 22         +1  6430                                             ret
                +1  6431     
                +1  6432     
                +1  6433     ;чтение номера байта с индикатора(4байта)
                +1  6434     ;bufind+6..bufind+9
                +1  6435     ;-  - - -
                +1  6436     ;- - - - - - - - - -
                +1  6437     ;adec..adec+9
                +1  6438     ;ст            мл
28E7 7848       +1  6439     upak4:  mov             r0,#bufind+8;
28E9 795C       +1  6440                     mov             r1,#adec+9
28EB 7F04       +1  6441                     mov             r7,#4
28ED C3         +1  6442     upaa:   clr             c
28EE E6         +1  6443                     mov             a,@r0
28EF 9430       +1  6444                     subb    a,#30h
28F1 F7         +1  6445                     mov             @r1,a
28F2 18         +1  6446                     dec             r0
28F3 19         +1  6447                     dec             r1
28F4 DFF7       +1  6448                     djnz    r7,upaa
28F6 22         +1  6449                     ret
                +1  6450     
                +1  6451     ;dptr-адр ячейки 1й соотв блока 
28F7 E538       +1  6452     adrblok:         mov            a,nblok
28F9 C3         +1  6453                              clr            c
28FA 9401       +1  6454                              subb           a,#1
28FC FD         +1  6455                              mov            r5,a
28FD E4         +1  6456                              clr            a
28FE FC         +1  6457                              mov            r4,a
28FF FB         +1  6458                              mov            r3,a
2900 FA         +1  6459                              mov            r2,a
2901 900000   F +1  6460                                     mov                     dptr,#ch320h
2904 120000   F +1  6461                                     CALL   ldc_ltemp                 ; ltemp <-320
2907 120000   F +1  6462                                     call            lmul;r2..r5
290A ED         +1  6463                                     mov                     a,r5
290B 2450       +1  6464                                     add                     a,#50h
290D F582       +1  6465                                     mov                     dpl,a
290F EC         +1  6466                                     mov                     a,r4
2910 3401       +1  6467                                     addc            a,#01           
2912 F583       +1  6468                                     mov                     dph,a                   ;dptr-
2914 22         +1  6469                                     ret
                +1  6470     
                +1  6471     ;
                +1  6472     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2915 E538       +1  6473     save_hl:                mov             a,nblok
2917 B4011D     +1  6474                                                     cjne    a,#1,sa_hl1
291A 79D3       +1  6475                                                     mov             r1,#saven_bl
291C E583       +1  6476     sa_hl:                  mov             a,dph
291E F7         +1  6477                                               mov           @r1,a
291F 09         +1  6478                                                     inc             r1
2920 E582       +1  6479                                                     mov             a,dpl
2922 F7         +1  6480                                                     mov             @r1,a
                +1  6481                                                     ;;;;;;;;;не конец ли блока
                +1  6482                             
2923 79D6       +1  6483                                     mov                     r1,#volume+1;work+1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   104

2925 120000   F +1  6484                                     call            chminus
2928 78D5       +1  6485                                     mov             r0,#volume
292A E6         +1  6486                                     mov             a,@r0
292B 30E708     +1  6487                                     jnb             acc.7,noendli
292E C20A       +1  6488                                     clr                     bitbon                  ;блок закон
                             чился
2930 534BFD     +1  6489                                     anl                     bufind+11,#0fdh
2933 120000   F +1  6490                                     call            ind
2936 22         +1  6491     noendli:ret
                +1  6492     
2937 B40204     +1  6493     sa_hl1:         cjne    a,#2,sa_hl2
293A 79C0       +1  6494                                                     mov             r1,#saven_bl2
293C 80DE       +1  6495                                                     jmp             sa_hl
                +1  6496     
293E B40304     +1  6497     sa_hl2:         cjne    a,#3,sa_hl3
2941 79C2       +1  6498                                                     mov             r1,#saven_bl3
2943 80D7       +1  6499                                                     jmp             sa_hl
2945 79D9       +1  6500     sa_hl3:                 mov             r1,#saven_bl4
2947 80D3       +1  6501                                                     jmp             sa_hl
                +1  6502     
                +1  6503     ;загрузка dptr сохр ранее значением адреса ячейки
2949 E538       +1  6504     resa_hl:                mov             a,nblok
294B B4010A     +1  6505                                                     cjne    a,#1,re_hl1
294E 79D3       +1  6506                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
2950 E7         +1  6507     re_hl:                  mov             a,@r1   
2951 F583       +1  6508                                                     mov             dph,a
                +1  6509                                               
2953 09         +1  6510                                                     inc             r1
2954 E7         +1  6511                                                     mov             a,@r1
2955 F582       +1  6512                                                     mov             dpl,a
2957 22         +1  6513                                                     ret
                +1  6514     
2958 B40204     +1  6515     re_hl1:                 cjne    a,#2,re_hl2
295B 79C0       +1  6516                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
295D 80F1       +1  6517                                                     jmp             re_hl
                +1  6518     
295F B40304     +1  6519     re_hl2:                 cjne    a,#3,re_hl3
2962 79C2       +1  6520                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
2964 80EA       +1  6521                                                     jmp             re_hl
                +1  6522     
2966 79D9       +1  6523     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
2968 80E6       +1  6524                                                     jmp             re_hl
                +1  6525     ;загрузка rez_A3 в соотв яч внешн озу
296A 789C       +1  6526     loA3_X:                 mov             r0,#rez_A3
296C 120000   F +1  6527                                                     call    resar2
                +1  6528                                                     
296F EA         +1  6529                                                     mov             a,r2                    ;
2970 F0         +1  6530                                                     movx    @dptr,a
2971 A3         +1  6531                                                     inc             dptr
2972 EB         +1  6532                                                     mov             a,r3
2973 F0         +1  6533                                                     movx    @dptr,a
2974 A3         +1  6534                                                     inc             dptr
2975 EC         +1  6535                                                     mov             a,r4
2976 F0         +1  6536                                                     movx    @dptr,a
2977 A3         +1  6537                                                     inc             dptr
2978 ED         +1  6538                                                     mov             a,r5
2979 F0         +1  6539                                                     movx    @dptr,a
297A A3         +1  6540                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
297B 22         +1  6541                                                     ret             ;в ячейке saven_bl
                +1  6542     ;чтение в rez_A3 из соотв яч внешн озу
297C            +1  6543     reA3_X:         
                +1  6544                                                     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   105

297C E0         +1  6545                                                     movx    a,@dptr
297D FA         +1  6546                                                     mov             r2,a
297E A3         +1  6547                                                     inc             dptr
297F E0         +1  6548                                                     movx    a,@dptr
2980 FB         +1  6549                                                     mov             r3,a
2981 A3         +1  6550                                                     inc             dptr
2982 E0         +1  6551                                                     movx    a,@dptr
2983 FC         +1  6552                                                     mov             r4,a
2984 A3         +1  6553                                                     inc             dptr
2985 E0         +1  6554                                                     movx    a,@dptr
2986 FD         +1  6555                                                     mov             r5,a
2987 A3         +1  6556                                                     inc             dptr
2988 789C       +1  6557                                                     mov             r0,#rez_A3
298A 120000   F +1  6558                                                     call    saver2
298D 22         +1  6559                                                     ret
                +1  6560     ;;;;;;;;;;;;;;;;;
                +1  6561     ;разбивка внешнего озу
                +1  6562     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6563     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6564     ;150h..46fh 1й блок
                +1  6565     ;470h..78fh     2й блок
                +1  6566     ;790h..aaf      3й блок
                +1  6567     ;ab0h..dcfh 4й блок
                +1  6568     ;dd0..fffh свободная область
                +1  6569     ;
                +1  6570     ;светодиоды и точки для индикатора
                +1  6571     ;bufind+10.0->makoi.7 такт
                +1  6572     ;bufind+10.1->makoi+1.7 измер
                +1  6573     ;bufind+10.2->makoi+2.7 avp
                +1  6574     ;bufind+10.3->makoi+3.7 нуль
                +1  6575     ;bufind+10.4->makoi+4.7 0,1s
                +1  6576     ;bufind+10.5->makoi+5.7 1s
                +1  6577     ;bufind+10.6->makoi+6.7 10s
                +1  6578     ;bufind+10.7->makoi+7.7 кмп
                +1  6579     ;bufind+11.0->makoi+8.7 память
                +1  6580     ;bufind+11.1->makoi+9.7 пуск
                +1  6581     ;знакоместа 0..9(10 знакомест)
                +1  6582     ;bufind+11.2->точка после 5 знакоместа
                +1  6583     ;bufind+11.3->точка после 8 знакоместа
                +1  6584     ;bufind+11.4->точка после 1 знакоместа(+0,0000  -7a)
                +1  6585     ;bufind+11.5->точка после 7 знакоместа
                +1  6586     ;bufind+11.6->точка после 6 знакоместа
                +1  6587     ;bufind+11.7->точка после 4 знакоместа
                +1  6588     
                +1  6589     ;ERR ошибки
                +1  6590     ;ERR 2-пароль в калибровке не соответствует
                +1  6591     ;ERR 3-не проходит тест RS
                +1  6592     ;ERR 4-в режиме R не введена константа U=0000(=0)
                    6593     
                    6594     ;$include (d:\amp\sarifm3.asm) 
                +1  6595     ; ” ©« SARIFM.ASM 8.11.95
                +1  6596     ;файл арифметики
                +1  6597       
  0008          +1  6598     ltemp    equ       8           ;long temporary
  000C          +1  6599     xtemp    equ       12          ;other temporaries
  000A          +1  6600     DECSIZE  EQU       10
  0004          +1  6601     NUMSIZE  EQU       4
  0004          +1  6602     RR4  EQU       4
  0005          +1  6603     RR5  EQU       5
                +1  6604     
                +1  6605                                                     
                +1  6606     
                +1  6607                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6608     ;             using    0              ; Specify register bank for the following
                +1  6609                                            ; program code.
                +1  6610     ;                                               cseg AT 400h
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   106

                +1  6611     ; Arithmetics:  CLEARING string
                +1  6612     ; Input:
                +1  6613     ; R0 - pointer to string,
                +1  6614     ; NUMSIZE - byte count if CLRNUM used,
                +1  6615     ; DECSIZE - byte count if CLRDEC used,
                +1  6616     ; R2 - byte count if CLEAR used;
                +1  6617     ; Output:  none.
                +1  6618     
298E            +1  6619     CLRDEC:
298E 7A0A       +1  6620         MOV R2, #DECSIZE
2990 8002       +1  6621         SJMP    CLEAR
2992            +1  6622     CLRNUM:
2992 7A04       +1  6623         MOV R2, #NUMSIZE
                +1  6624         ;JMP    CLEAR
2994            +1  6625     CLEAR:
2994 E4         +1  6626         CLR A
2995 F6         +1  6627     CLR11:  MOV @R0, A
2996 08         +1  6628         INC R0
2997 DAFC       +1  6629         DJNZ    R2, CLR11
2999 22         +1  6630         RET
                +1  6631     
                +1  6632     ;**********************************
                +1  6633     ;mov    r1,#abin+3
                +1  6634     ;mov    r0,#adec
                +1  6635     ; _ _ _ _
                +1  6636     ;     03ff
                +1  6637     ;ст     мл   - вход
                +1  6638     ; _ _ _ _ _ _ _ _ _ _
                +1  6639     ;             1 0 2 3
                +1  6640     ;ст                мл 
                +1  6641     ;**********************************
                +1  6642     
299A            +1  6643     BINDEC:
                +1  6644     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6645     ; Input:
                +1  6646     ; R0 - pointer to destination (high digit is the first),
                +1  6647     ; R1 - pointer to source,
                +1  6648     ; NUMSIZE - byte count in binary number;
                +1  6649     ; DECSIZE - byte count in decimal number;
                +1  6650     ; Output:  none.
                +1  6651     ; Source saved
                +1  6652     
                +1  6653         ; 1. Clear result
299A 7A05       +1  6654         MOV R2, #DECSIZE/2
299C 120000   F +1  6655         CALL   CLEAR  ; incrementing R0
                +1  6656     
                +1  6657         ; 2. Prepare convertion
299F 18         +1  6658         DEC R0
29A0 8804       +1  6659         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
29A2 8905       +1  6660         MOV RR5, R1 ; R5 - pointer to low byte of binary number
29A4 7B20       +1  6661         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6662     
                +1  6663         ; 3. Convert cyrcle
29A6            +1  6664     BIN30:
                +1  6665     
                +1  6666         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
29A6 A905       +1  6667         MOV R1, RR5
29A8 7A04       +1  6668         MOV R2, #NUMSIZE
29AA E7         +1  6669     BIN31:  MOV A, @R1
29AB 33         +1  6670         RLC A
29AC F7         +1  6671         MOV @R1, A
29AD 19         +1  6672         DEC R1
29AE DAFA       +1  6673         DJNZ    R2, BIN31
29B0 A905       +1  6674         MOV R1, RR5
29B2 E7         +1  6675         MOV A, @R1
29B3 92E0       +1  6676         MOV ACC.0, C
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   107

29B5 F7         +1  6677         MOV @R1, A
                +1  6678     
                +1  6679         ; 3.2. Doubling decimal result with <Carry>
29B6 A804       +1  6680         MOV R0, RR4
29B8 7A05       +1  6681         MOV R2, #DECSIZE/2
29BA E6         +1  6682     BIN32:  MOV A, @R0
29BB 36         +1  6683         ADDC    A, @R0
29BC D4         +1  6684         DA  A
29BD F6         +1  6685         MOV @R0, A
29BE 18         +1  6686         DEC R0
29BF DAF9       +1  6687         DJNZ    R2, BIN32
                +1  6688     
                +1  6689         ; 3.3. End of convert cyrcle
29C1 DBE3       +1  6690         DJNZ    R3, BIN30
                +1  6691     
                +1  6692         ; 4. Make bytes from half-bytes
29C3 E8         +1  6693         MOV A, R0
29C4 240A       +1  6694         ADD A, #DECSIZE
29C6 F8         +1  6695         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
29C7 A904       +1  6696         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
29C9 7A05       +1  6697         MOV R2, #DECSIZE/2
29CB E7         +1  6698     BIN41:  MOV A, @R1
29CC 540F       +1  6699         ANL A, #00FH
29CE F6         +1  6700         MOV @R0, A
29CF 18         +1  6701         DEC R0
29D0 E7         +1  6702         MOV A, @R1
29D1 C4         +1  6703         SWAP    A
29D2 540F       +1  6704         ANL A, #00FH
29D4 F6         +1  6705         MOV @R0, A
29D5 18         +1  6706         DEC R0
29D6 19         +1  6707         DEC R1
29D7 DAF2       +1  6708         DJNZ    R2, BIN41
29D9 22         +1  6709         RET
                +1  6710     
                +1  6711     
                +1  6712     ;*********************************
                +1  6713     ;mov    r0,#abin
                +1  6714     ;mov    r1,#adec
                +1  6715     ; _ _ _ _       -выход
                +1  6716     ; ff0000
                +1  6717     ;0004
                +1  6718     ;мл      ст
                +1  6719     
                +1  6720     ;ст                       мл
                +1  6721     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6722     ;                       2 5 5
                +1  6723     ;                   1 0 2 4
                +1  6724     
29DA            +1  6725     DECBIN:
                +1  6726     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6727     ; Input:
                +1  6728     ; R0 - pointer to destination,
                +1  6729     ; R1 - pointer to source (high digit is the first),
                +1  6730     ; NUMSIZE - byte count in binary number;
                +1  6731     ; DECSIZE - byte count in decimal number;
                +1  6732     ; Output:  none
                +1  6733     ; Source cleared
                +1  6734     
                +1  6735         ; 1. Clear result
29DA 120000   F +1  6736         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6737     
                +1  6738         ; 2. Prepare convertion
29DD 18         +1  6739         DEC R0
29DE 8804       +1  6740         MOV RR4, R0 ; R4 - pointer to high byte of binary result
29E0 8905       +1  6741         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
29E2 900000   F +1  6742         MOV DPTR, #DECT2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   108

29E5 7B20       +1  6743         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6744     
                +1  6745         ; 3. Convert cyrcle
29E7            +1  6746     DEC30:
                +1  6747     
                +1  6748         ; 3.1. Divide decimal number by 2 and prepare <Carry>
29E7 C3         +1  6749         CLR C
29E8 A905       +1  6750         MOV R1, RR5
29EA 7A0A       +1  6751         MOV R2, #DECSIZE
29EC E7         +1  6752     DEC31:  MOV A, @R1
29ED 540F       +1  6753         ANL A, #00FH
29EF 92E4       +1  6754         MOV ACC.4, C
29F1 93         +1  6755         MOVC    A,@A+DPTR
29F2 F7         +1  6756         MOV @R1, A
29F3 A2E7       +1  6757         MOV C, ACC.7
29F5 09         +1  6758         INC R1
29F6 DAF4       +1  6759         DJNZ    R2, DEC31
                +1  6760     
                +1  6761         ; 3.2. Rotate binary result one bit to right with <Carry>
29F8 A804       +1  6762         MOV R0, RR4
29FA 7A04       +1  6763         MOV R2, #NUMSIZE
29FC E6         +1  6764     DEC32:  MOV A, @R0
29FD 13         +1  6765         RRC A
29FE F6         +1  6766         MOV @R0, A
29FF 18         +1  6767         DEC R0
2A00 DAFA       +1  6768         DJNZ    R2, DEC32
                +1  6769     
                +1  6770         ; 3.3. End of convert cyrcle
2A02 DBE3       +1  6771         DJNZ    R3, DEC30
2A04 22         +1  6772         RET
                +1  6773     
2A05 00800181   +1  6774     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2A09 02820383                
2A0D 0484                    
2A0F 00000000   +1  6775         DB  00,00,00,00,00,00
2A13 0000                    
2A15 05850686   +1  6776         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2A19 07870888                
2A1D 0989                    
                +1  6777     
                +1  6778     ;   Long comparison
                +1  6779     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6780     ;   flags and acc set as though a long subtraction was done.
                +1  6781     ;*******************************
                +1  6782     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6783     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6784     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6785     ;*******************************
2A1F            +1  6786     lcmp:
2A1F C3         +1  6787         clr c
2A20 EA         +1  6788         mov a,r2
2A21 9508       +1  6789         subb    a,8
2A23 700F       +1  6790         jnz done
2A25 EB         +1  6791         mov a,r3
2A26 9509       +1  6792         subb    a,9
2A28 7008       +1  6793         jnz done1
2A2A EC         +1  6794         mov a,r4
2A2B 950A       +1  6795         subb    a,10
2A2D 7003       +1  6796         jnz done1
2A2F ED         +1  6797         mov a,r5
2A30 950B       +1  6798         subb    a,11
2A32            +1  6799     done1:
2A32 C2D2       +1  6800         clr ov      ;overflow is significant only for top byte
2A34            +1  6801     done:
2A34 22         +1  6802         ret
                +1  6803     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   109

                +1  6804     ;   Load long into r2-5 from [dptr]
                +1  6805     
2A35            +1  6806     ldc_long:
2A35 E583       +1  6807         mov a,dph       ;is it in on board memory
2A37 6010       +1  6808         jz  onboard     ;yes
2A39 E4         +1  6809         clr a
2A3A 93         +1  6810         movc    a,@a+dptr
2A3B FA         +1  6811         mov r2,a
2A3C 7401       +1  6812         mov a,#1
2A3E 93         +1  6813         movc    a,@a+dptr
2A3F FB         +1  6814         mov r3,a
2A40 7402       +1  6815         mov a,#2
2A42 93         +1  6816         movc    a,@a+dptr
2A43 FC         +1  6817         mov r4,a
2A44 7403       +1  6818         mov a,#3
2A46 93         +1  6819         movc    a,@a+dptr
2A47 FD         +1  6820         mov r5,a
2A48 22         +1  6821         ret
2A49            +1  6822     onboard:
2A49 A882       +1  6823         mov r0,dpl
2A4B E6         +1  6824         mov a,@r0
2A4C FA         +1  6825         mov r2,a
2A4D 08         +1  6826         inc r0
2A4E E6         +1  6827         mov a,@r0
2A4F FB         +1  6828         mov r3,a
2A50 08         +1  6829         inc r0
2A51 E6         +1  6830         mov a,@r0
2A52 FC         +1  6831         mov r4,a
2A53 08         +1  6832         inc r0
2A54 E6         +1  6833         mov a,@r0
2A55 FD         +1  6834         mov r5,a
2A56 22         +1  6835         ret
                +1  6836     
                +1  6837     ;**************************************
                +1  6838     ;загрузить ltemp...+3 из памяти программ
                +1  6839     ;mov    dptr,#CH5
                +1  6840     ;call   ldc_ltemp        ltemp <--5
                +1  6841     ;**************************************
2A57            +1  6842     ldc_ltemp:
2A57 E583       +1  6843         mov a,dph       ;is it in on board memory
2A59 6014       +1  6844         jz  oboard      ;yes
2A5B E4         +1  6845         clr a
2A5C 93         +1  6846         movc    a,@a+dptr
2A5D F508       +1  6847         mov 8,a
2A5F 7401       +1  6848         mov a,#1
2A61 93         +1  6849         movc    a,@a+dptr
2A62 F509       +1  6850         mov 9,a
2A64 7402       +1  6851         mov a,#2
2A66 93         +1  6852         movc    a,@a+dptr
2A67 F50A       +1  6853         mov 10,a
2A69 7403       +1  6854         mov a,#3
2A6B 93         +1  6855         movc    a,@a+dptr
2A6C F50B       +1  6856         mov 11,a
2A6E 22         +1  6857         ret
2A6F            +1  6858     oboard:
2A6F A882       +1  6859         mov r0,dpl
2A71 8608       +1  6860         mov 8,@r0
2A73 08         +1  6861         inc r0
2A74 8609       +1  6862         mov 9,@r0
2A76 08         +1  6863         inc r0
2A77 860A       +1  6864         mov 10,@r0
2A79 08         +1  6865         inc r0
2A7A 860B       +1  6866         mov 11,@r0
2A7C 22         +1  6867         ret
                +1  6868     
                +1  6869     ;*****************************
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   110

                +1  6870     ;mov    dptr,#k1
                +1  6871     ;call   ldx_long
                +1  6872     ;k1->r2..r5
                +1  6873     ;*****************************
                +1  6874     ;   Load long into r2-5 from [dptr]
                +1  6875     ;
                +1  6876     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2A7D            +1  6877     ldx_long:
2A7D E583       +1  6878         mov a,dph       ;is it in on board memory
2A7F 6014       +1  6879         jz  onboar1        ;yes
2A81 C082       +1  6880         push    dpl
2A83 C083       +1  6881         push    dph
2A85 E0         +1  6882         movx    a,@dptr
2A86 FA         +1  6883         mov r2,a
2A87 A3         +1  6884         inc dptr
2A88 E0         +1  6885         movx    a,@dptr
2A89 FB         +1  6886         mov r3,a
2A8A A3         +1  6887         inc dptr
2A8B E0         +1  6888         movx    a,@dptr
2A8C FC         +1  6889         mov r4,a
2A8D A3         +1  6890         inc dptr
2A8E E0         +1  6891         movx    a,@dptr
2A8F FD         +1  6892         mov r5,a
2A90 D083       +1  6893         pop dph
2A92 D082       +1  6894         pop dpl
2A94 22         +1  6895         ret
2A95            +1  6896     onboar1:
2A95 A882       +1  6897         mov r0,dpl
2A97 E6         +1  6898         mov a,@r0
2A98 FA         +1  6899         mov r2,a
2A99 08         +1  6900         inc r0
2A9A E6         +1  6901         mov a,@r0
2A9B FB         +1  6902         mov r3,a
2A9C 08         +1  6903         inc r0
2A9D E6         +1  6904         mov a,@r0
2A9E FC         +1  6905         mov r4,a
2A9F 08         +1  6906         inc r0
2AA0 E6         +1  6907         mov a,@r0
2AA1 FD         +1  6908         mov r5,a
2AA2 22         +1  6909         ret
                +1  6910     
                +1  6911     ;*********************************
                +1  6912     ;mov    dptr,#k2
                +1  6913     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6914     ;**********************************
2AA3            +1  6915     ldx_ltemp:
2AA3 E583       +1  6916         mov a,dph       ;is it in on board memory
2AA5 6010       +1  6917         jz  oboard1     ;yes
2AA7 E0         +1  6918         movx    a,@dptr
2AA8 F508       +1  6919         mov 8,a
2AAA A3         +1  6920         inc dptr
2AAB E0         +1  6921         movx    a,@dptr
2AAC F509       +1  6922         mov 9,a
2AAE A3         +1  6923         inc dptr
2AAF E0         +1  6924         movx    a,@dptr
2AB0 F50A       +1  6925         mov 10,a
2AB2 A3         +1  6926         inc dptr
2AB3 E0         +1  6927         movx    a,@dptr
2AB4 F50B       +1  6928         mov 11,a
2AB6 22         +1  6929         ret
2AB7            +1  6930     oboard1:
2AB7 A882       +1  6931         mov r0,dpl
2AB9 8608       +1  6932         mov 8,@r0
2ABB 08         +1  6933         inc r0
2ABC 8609       +1  6934         mov 9,@r0
2ABE 08         +1  6935         inc r0
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   111

2ABF 860A       +1  6936         mov 10,@r0
2AC1 08         +1  6937         inc r0
2AC2 860B       +1  6938         mov 11,@r0
2AC4 22         +1  6939         ret
                +1  6940     ;   Long division routines for 8051
                +1  6941     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6942     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6943     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6944     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6945     ;   r1 must be saved by the caller.
                +1  6946     ;   This is long unsigned division.
                +1  6947     
                +1  6948     
                +1  6949     ;   Register usage:
                +1  6950     ;       r0 loop counter
                +1  6951     ;       xtemp (12-15) accumulates quotient
                +1  6952     ;       r5-r2 holds dividend
                +1  6953     ;       ltemp holds divisor
                +1  6954     
                +1  6955     ;************************************
                +1  6956     ;r2..r5-делимое
                +1  6957     ;ltemp..-делитель
                +1  6958     ;частное -r2..r5
                +1  6959     ;*************************************
2AC5            +1  6960     divide:
2AC5 E4         +1  6961         clr a
2AC6 F8         +1  6962         mov r0,a        ;initialize count
2AC7 F50C       +1  6963         mov xtemp,a     ;zero quotient
2AC9 F50D       +1  6964         mov xtemp+1,a
2ACB F50E       +1  6965         mov xtemp+2,a
2ACD F50F       +1  6966         mov xtemp+3,a
2ACF ED         +1  6967         mov a,r5        ;check for zero dividend
2AD0 4C         +1  6968         orl a,r4
2AD1 4B         +1  6969         orl a,r3
2AD2 4A         +1  6970         orl a,r2
2AD3 600B       +1  6971         jz  jfinis
2AD5 E508       +1  6972         mov a,ltemp     ;check for zero divisor
2AD7 4509       +1  6973         orl a,ltemp+1
2AD9 450A       +1  6974         orl a,ltemp+2
2ADB 450B       +1  6975         orl a,ltemp+3
2ADD 7037       +1  6976         jnz midl
2ADF 22         +1  6977         ret
                +1  6978     
2AE0 020000   F +1  6979     jfinis: jmp finis
                +1  6980     
2AE3            +1  6981     loops:
2AE3 EA         +1  6982         mov a,r2
2AE4 C3         +1  6983         clr c
2AE5 9508       +1  6984         subb    a,ltemp+0   ;is divisor greater than dividend yet
2AE7 4033       +1  6985         jc  yes     ;yes, go no further
2AE9 7013       +1  6986         jnz no
2AEB EB         +1  6987         mov a,r3
2AEC 9509       +1  6988         subb    a,ltemp+1
2AEE 402C       +1  6989         jc  yes
2AF0 700C       +1  6990         jnz no
2AF2 EC         +1  6991         mov a,r4
2AF3 950A       +1  6992         subb    a,ltemp+2
2AF5 4025       +1  6993         jc  yes
2AF7 7005       +1  6994         jnz no
2AF9 ED         +1  6995         mov a,r5
2AFA 950B       +1  6996         subb    a,ltemp+3
2AFC 401E       +1  6997         jc  yes
2AFE            +1  6998     no:
2AFE E50B       +1  6999         mov a,ltemp+3   ;shift divisor up one bit
2B00 250B       +1  7000         add a,ltemp+3
2B02 F50B       +1  7001         mov ltemp+3,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   112

2B04 E50A       +1  7002         mov a,ltemp+2
2B06 350A       +1  7003         addc    a,ltemp+2
2B08 F50A       +1  7004         mov ltemp+2,a
2B0A E509       +1  7005         mov a,ltemp+1
2B0C 3509       +1  7006         addc    a,ltemp+1
2B0E F509       +1  7007         mov ltemp+1,a
2B10 E508       +1  7008         mov a,ltemp+0
2B12 3508       +1  7009         addc    a,ltemp+0
2B14 F508       +1  7010         mov ltemp+0,a
2B16            +1  7011     midl:
2B16 08         +1  7012         inc r0      ;increment count
2B17 E508       +1  7013         mov a,ltemp+0   ;check for safe to shift some more
2B19 30E7C7     +1  7014         jnb acc.7,loops  ;loop if top bit clear
2B1C            +1  7015     yes:
2B1C E508       +1  7016         mov a,ltemp+0
2B1E C3         +1  7017         clr c
2B1F 9A         +1  7018         subb    a,r2        ;can we subtract now?
2B20 401A       +1  7019         jc  dosub       ;yes, go and do it
2B22 7015       +1  7020         jnz nosub
2B24 E509       +1  7021         mov a,ltemp+1
2B26 9B         +1  7022         subb    a,r3
2B27 4013       +1  7023         jc  dosub
2B29 700E       +1  7024         jnz nosub
2B2B E50A       +1  7025         mov a,ltemp+2
2B2D 9C         +1  7026         subb    a,r4
2B2E 400C       +1  7027         jc  dosub
2B30 7007       +1  7028         jnz nosub
2B32 E50B       +1  7029         mov a,ltemp+3
2B34 9D         +1  7030         subb    a,r5
2B35 4005       +1  7031         jc  dosub
2B37 6003       +1  7032         jz  dosub
2B39            +1  7033     nosub:
2B39 C3         +1  7034         clr c
2B3A 8012       +1  7035         sjmp    dosh
2B3C            +1  7036     dosub:
2B3C C3         +1  7037         clr c       ;subtract divisor from dividend
2B3D ED         +1  7038         mov a,r5
2B3E 950B       +1  7039         subb    a,ltemp+3
2B40 FD         +1  7040         mov r5,a
2B41 EC         +1  7041         mov a,r4
2B42 950A       +1  7042         subb    a,ltemp+2
2B44 FC         +1  7043         mov r4,a
2B45 EB         +1  7044         mov a,r3
2B46 9509       +1  7045         subb    a,ltemp+1
2B48 FB         +1  7046         mov r3,a
2B49 EA         +1  7047         mov a,r2
2B4A 9508       +1  7048         subb    a,ltemp+0
2B4C FA         +1  7049         mov r2,a
2B4D D3         +1  7050         setb    c       ;now set bit for quotient
2B4E            +1  7051     dosh:
2B4E E50F       +1  7052         mov a,xtemp+3
2B50 33         +1  7053         rlc a
2B51 F50F       +1  7054         mov xtemp+3,a
2B53 E50E       +1  7055         mov a,xtemp+2
2B55 33         +1  7056         rlc a
2B56 F50E       +1  7057         mov xtemp+2,a
2B58 E50D       +1  7058         mov a,xtemp+1
2B5A 33         +1  7059         rlc a
2B5B F50D       +1  7060         mov xtemp+1,a
2B5D E50C       +1  7061         mov a,xtemp+0
2B5F 33         +1  7062         rlc a
2B60 F50C       +1  7063         mov xtemp+0,a
2B62 E508       +1  7064         mov a,ltemp+0       ;shift divisor down
2B64 C3         +1  7065         clr c
2B65 13         +1  7066         rrc a
2B66 F508       +1  7067         mov ltemp+0,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   113

2B68 E509       +1  7068         mov a,ltemp+1
2B6A 13         +1  7069         rrc a
2B6B F509       +1  7070         mov ltemp+1,a
2B6D E50A       +1  7071         mov a,ltemp+2
2B6F 13         +1  7072         rrc a
2B70 F50A       +1  7073         mov ltemp+2,a
2B72 E50B       +1  7074         mov a,ltemp+3
2B74 13         +1  7075         rrc a
2B75 F50B       +1  7076         mov ltemp+3,a
                +1  7077     
2B77 D8A3       +1  7078         djnz    r0,yes      ;and continue with the rest
                +1  7079     
2B79            +1  7080     finis:
2B79 8D0B       +1  7081         mov ltemp+3,r5
2B7B 8C0A       +1  7082         mov ltemp+2,r4
2B7D 8B09       +1  7083         mov ltemp+1,r3
2B7F 8A08       +1  7084         mov ltemp+0,r2
2B81 AD0F       +1  7085         mov r5,xtemp+3
2B83 AC0E       +1  7086         mov r4,xtemp+2
2B85 AB0D       +1  7087         mov r3,xtemp+1
2B87 AA0C       +1  7088         mov r2,xtemp+0
2B89 22         +1  7089         ret         ;and return with the satisfaction of a job well done
                +1  7090     
                +1  7091     
                +1  7092     ;   Long multiplication
                +1  7093     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7094     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7095     
                +1  7096     ;**********************************
                +1  7097     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7098     ;ст  мл
                +1  7099     ;**********************************
2B8A            +1  7100     llmul:
2B8A            +1  7101     almul:
2B8A            +1  7102     lmul:
2B8A ED         +1  7103         mov a,r5        ;low order byte
2B8B 850BF0     +1  7104         mov b,ltemp+3       ;times low order byte
2B8E A4         +1  7105         mul ab
2B8F F50F       +1  7106         mov xtemp+3,a       ;store low
2B91 85F00E     +1  7107         mov xtemp+2,b   ;and high
2B94 ED         +1  7108         mov a,r5        ;low order
2B95 850AF0     +1  7109         mov b,ltemp+2   ;times next
2B98 A4         +1  7110         mul ab
2B99 250E       +1  7111         add a,xtemp+2   ;add in
2B9B F50E       +1  7112         mov xtemp+2,a
2B9D E5F0       +1  7113         mov a,b
2B9F 3400       +1  7114         addc    a,#0
2BA1 F50D       +1  7115         mov xtemp+1,a
2BA3 ED         +1  7116         mov a,r5
2BA4 8509F0     +1  7117         mov b,ltemp+1
2BA7 A4         +1  7118         mul ab
2BA8 250D       +1  7119         add a,xtemp+1
2BAA F50D       +1  7120         mov xtemp+1,a
2BAC E5F0       +1  7121         mov a,b
2BAE 3400       +1  7122         addc    a,#0
2BB0 F50C       +1  7123         mov xtemp+0,a
2BB2 ED         +1  7124         mov a,r5
2BB3 8508F0     +1  7125         mov b,ltemp+0
2BB6 A4         +1  7126         mul ab
2BB7 250C       +1  7127         add a,xtemp+0
2BB9 F50C       +1  7128         mov xtemp+0,a
2BBB EC         +1  7129         mov a,r4
2BBC 850BF0     +1  7130         mov b,ltemp+3
2BBF A4         +1  7131         mul ab
2BC0 250E       +1  7132         add a,xtemp+2
2BC2 F50E       +1  7133         mov xtemp+2,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   114

2BC4 E5F0       +1  7134         mov a,b
2BC6 350D       +1  7135         addc    a,xtemp+1
2BC8 F50D       +1  7136         mov xtemp+1,a
2BCA E50C       +1  7137         mov a,xtemp+0
2BCC 3400       +1  7138         addc    a,#0
2BCE F50C       +1  7139         mov xtemp+0,a
2BD0 EC         +1  7140         mov a,r4
2BD1 850AF0     +1  7141         mov b,ltemp+2
2BD4 A4         +1  7142         mul ab
2BD5 250D       +1  7143         add a,xtemp+1
2BD7 F50D       +1  7144         mov xtemp+1,a
2BD9 E5F0       +1  7145         mov a,b
2BDB 350C       +1  7146         addc    a,xtemp+0
2BDD F50C       +1  7147         mov xtemp+0,a
2BDF EC         +1  7148         mov a,r4
2BE0 8509F0     +1  7149         mov b,ltemp+1
2BE3 A4         +1  7150         mul ab
2BE4 250C       +1  7151         add a,xtemp+0
2BE6 F50C       +1  7152         mov xtemp+0,a
                +1  7153     
2BE8 EB         +1  7154         mov a,r3
2BE9 850BF0     +1  7155         mov b,ltemp+3
2BEC A4         +1  7156         mul ab
2BED 250D       +1  7157         add a,xtemp+1
2BEF F50D       +1  7158         mov xtemp+1,a
2BF1 E5F0       +1  7159         mov a,b
2BF3 350C       +1  7160         addc    a,xtemp+0
2BF5 F50C       +1  7161         mov xtemp+0,a
2BF7 EB         +1  7162         mov a,r3
2BF8 850AF0     +1  7163         mov b,ltemp+2
2BFB A4         +1  7164         mul ab
2BFC 250C       +1  7165         add a,xtemp+0
2BFE F50C       +1  7166         mov xtemp+0,a
                +1  7167     
2C00 EA         +1  7168         mov a,r2
2C01 850BF0     +1  7169         mov b,ltemp+3
2C04 A4         +1  7170         mul ab
2C05 250C       +1  7171         add a,xtemp+0
2C07 FA         +1  7172         mov r2,a
2C08 AB0D       +1  7173         mov r3,xtemp+1
2C0A AC0E       +1  7174         mov r4,xtemp+2
2C0C AD0F       +1  7175         mov r5,xtemp+3
                +1  7176     
2C0E 22         +1  7177         ret         ;all done
                +1  7178     ;******************************
                +1  7179     ;из содержимого  r2-r5  вычесть
                +1  7180     ;содержимое          ltemp..ltemp+3
                +1  7181     ;******************************
2C0F            +1  7182     llsub:
2C0F            +1  7183      lsub:
2C0F ED         +1  7184         mov a,r5
2C10 C3         +1  7185         clr c
2C11 950B       +1  7186         subb    a,11
2C13 FD         +1  7187         mov r5,a
2C14 EC         +1  7188         mov a,r4
2C15 950A       +1  7189         subb    a,10
2C17 FC         +1  7190         mov r4,a
2C18 EB         +1  7191         mov a,r3
2C19 9509       +1  7192         subb    a,9
2C1B FB         +1  7193         mov r3,a
2C1C EA         +1  7194         mov a,r2
2C1D 9508       +1  7195         subb    a,8
2C1F FA         +1  7196         mov r2,a
2C20 22         +1  7197         ret
                +1  7198     
                +1  7199     ;***********************************************
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   115

                +1  7200     ;                                                      ст мл
                +1  7201     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7202     ;  r0- адрес младшего байта !!!
                +1  7203     ;результат- r2..r5
                +1  7204     ;***********************************************
                +1  7205     
2C21 C3         +1  7206     ladd:    clr       c
2C22 ED         +1  7207          mov       a,r5
2C23 26         +1  7208          add       a,@r0
2C24 FD         +1  7209          mov       r5,a
2C25 18         +1  7210          dec       r0
2C26 EC         +1  7211          mov       a,r4
2C27 36         +1  7212          addc      a,@r0
2C28 FC         +1  7213          mov       r4,a
2C29 18         +1  7214          dec       r0
2C2A EB         +1  7215          mov       a,r3
2C2B 36         +1  7216          addc      a,@r0
2C2C FB         +1  7217          mov       r3,a
2C2D 18         +1  7218          dec       r0
2C2E EA         +1  7219          mov       a,r2
2C2F 36         +1  7220          addc      a,@r0
2C30 FA         +1  7221          mov       r2,a
2C31 22         +1  7222          ret
                +1  7223     ;***********************************************
                +1  7224     ;                                                      ст мл
                +1  7225     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7226     ;  r0- адрес младшего байта !!!
                +1  7227     ;результат- r2..r5
                +1  7228     ;***********************************************
                +1  7229     
2C32 C3         +1  7230     laddx:    clr       c
2C33 E2         +1  7231                                             movx            a,@r0
2C34 2D         +1  7232                                             add                     a,r5
2C35 FD         +1  7233               mov     r5,a
2C36 18         +1  7234                             dec     r0
2C37 E2         +1  7235                             movx    a,@r0
2C38 3C         +1  7236                             addc    a,r4
2C39 FC         +1  7237                             mov     r4,a
2C3A 18         +1  7238                             dec     r0
2C3B E2         +1  7239                             movx    a,@r0
2C3C 3B         +1  7240                             addc    a,r3
2C3D FB         +1  7241                             mov     r3,a
2C3E 18         +1  7242                             dec     r0
2C3F E2         +1  7243                             movx    a,@r0
2C40 3A         +1  7244                             addc    a,r2
2C41 FA         +1  7245                             mov       r2,a
2C42 22         +1  7246                             ret
                +1  7247     
                +1  7248     ;***********************************************
                +1  7249     ;                                                      ст мл
                +1  7250     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7251     ;  dptr- адрес младшего байта !!!
                +1  7252     ;результат- r2..r5
                +1  7253     ;***********************************************
                +1  7254     
2C43 C3         +1  7255     addx:    clr       c
2C44 E0         +1  7256                                             movx            a,@dptr
2C45 2D         +1  7257                                             add                     a,r5
2C46 FD         +1  7258               mov     r5,a
2C47 120000   F +1  7259                             call            dedptr;dec     dptr
2C4A E0         +1  7260                             movx    a,@dptr
2C4B 3C         +1  7261                             addc    a,r4
2C4C FC         +1  7262                             mov     r4,a
2C4D 120000   F +1  7263                             call            dedptr;dec     dptr
2C50 E0         +1  7264                             movx    a,@dptr
2C51 3B         +1  7265                             addc    a,r3
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   116

2C52 FB         +1  7266                             mov     r3,a
2C53 120000   F +1  7267                             call            dedptr;dec     dptr
2C56 E0         +1  7268                             movx    a,@dptr
2C57 3A         +1  7269                             addc    a,r2
2C58 FA         +1  7270                             mov       r2,a
2C59 22         +1  7271                             ret
                +1  7272     
2C5A C0D0       +1  7273     dedptr:         push    psw
2C5C C3         +1  7274                                             clr             c
2C5D E582       +1  7275                                             mov             a,dpl
2C5F 9401       +1  7276                                             subb    a,#1
2C61 F582       +1  7277                                             mov             dpl,a
2C63 E583       +1  7278                                             mov             a,dph
2C65 9400       +1  7279                                             subb    a,#0
2C67 F583       +1  7280                                             mov             dph,a
2C69 D0D0       +1  7281                                             pop             psw
2C6B 22         +1  7282                                             ret
                    7283     
                    7284     ;$include (d:\amp\floatm.asm)
                +1  7285     ;       Copyright (C) 1988 HI-TECH Software
                +1  7286     
                +1  7287     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7288     
                +1  7289     ;       The format of floating point numbers is as follows:
                +1  7290     
                +1  7291     ;       -----------------
                +1  7292     ;       *     sign      *  1 bit
                +1  7293     ;       -----------------
                +1  7294     ;       *   exponent    *  8 bits
                +1  7295     ;       -----------------
                +1  7296     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7297     ;       -----------------
                +1  7298     
                +1  7299     
                +1  7300     ;       As usual for the 8051 the memory layout has the most significant
                +1  7301     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7302     ;       lowest address.
                +1  7303     
                +1  7304     ;       Calling conventions:
                +1  7305     
                +1  7306     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7307     ;
                +1  7308     ;       Return value is in r2-r5
                +1  7309     
                +1  7310     ;       Naming conventions: A routine name is constructed by
                +1  7311     
                +1  7312     ;             ASOP
                +1  7313     
                +1  7314     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7315     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7316     ;       Conversion routines are named
                +1  7317     
                +1  7318     ;               AStof
                +1  7319     
                +1  7320     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7321     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7322     ;       Conversion from float to integer is ftol.
                +1  7323     
                +1  7324     ;               .ORG  5000h
                +1  7325     ;               .CODE
                +1  7326     ;       seg     c_text
                +1  7327     
                +1  7328     ;;      $MOD812
----            +1  7329             CSEG
                +1  7330             ;ORG 1000h
                +1  7331     
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   117

                +1  7332                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7333             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7334     
                +1  7335     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7336     ;       macros
                +1  7337     
                +1  7338     saveregs        macro
                +1  7339             push    7
                +1  7340             push    6
                +1  7341             push    1
                +1  7342             push    0
                +1  7343             endm
                +1  7344     
                +1  7345     restregs        macro
                +1  7346             pop     0
                +1  7347             pop     1
                +1  7348             pop     6
                +1  7349             pop     7
                +1  7350             endm
                +1  7351     
                +1  7352     ;addr   
                +1  7353     dan     macro   pad
                +1  7354             mov     a,r5
                +1  7355             add     a,pad+3
                +1  7356             mov     pad+3,a
                +1  7357             mov     a,pad+2
                +1  7358             addc    a,r4
                +1  7359             mov     pad+2,a
                +1  7360             mov     a,pad+1
                +1  7361             addc    a,r3
                +1  7362             mov     pad+1,a
                +1  7363             mov     a,pad+0
                +1  7364             addc    a,r2
                +1  7365             mov     pad,a
                +1  7366             endm
                +1  7367     
                +1  7368     addl    macro  addr
                +1  7369             mov     a,r5
                +1  7370             add     a,addr+3
                +1  7371             mov     r5,a
                +1  7372             mov     a,addr+2
                +1  7373             addc    a,r4
                +1  7374             mov     r4,a
                +1  7375             mov     a,addr+1
                +1  7376             addc    a,r3
                +1  7377             mov     r3,a
                +1  7378             mov     a,addr+0
                +1  7379             addc    a,r2
                +1  7380             mov     r2,a
                +1  7381             endm
                +1  7382     
                +1  7383     
                +1  7384     add1    macro
                +1  7385             mov     a,r5
                +1  7386             add     a,#1
                +1  7387             mov     r5,a
                +1  7388             clr     a
                +1  7389             addc    a,r4
                +1  7390             mov     r4,a
                +1  7391             clr     a
                +1  7392             addc    a,r3
                +1  7393             mov     r3,a
                +1  7394             clr     a
                +1  7395             addc    a,r2
                +1  7396             mov     r2,a
                +1  7397             endm
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   118

                +1  7398     
                +1  7399     shfdn   macro  addr
                +1  7400             clr     c
                +1  7401             mov     a,addr
                +1  7402             rrc     a
                +1  7403             mov     addr,a
                +1  7404             mov     a,addr+1
                +1  7405             rrc     a
                +1  7406             mov     addr+1,a
                +1  7407             mov     a,addr+2
                +1  7408             rrc     a
                +1  7409             mov     addr+2,a
                +1  7410             mov     a,addr+3
                +1  7411             rrc     a
                +1  7412             mov     addr+3,a
                +1  7413             endm
                +1  7414     
                +1  7415     shfup   macro  addr
                +1  7416             clr     c
                +1  7417             mov     a,addr+3
                +1  7418             rlc     a
                +1  7419             mov     addr+3,a
                +1  7420             mov     a,addr+2
                +1  7421             rlc     a
                +1  7422             mov     addr+2,a
                +1  7423             mov     a,addr+1
                +1  7424             rlc     a
                +1  7425             mov     addr+1,a
                +1  7426             mov     a,addr
                +1  7427             rlc     a
                +1  7428             mov     addr,a
                +1  7429             endm
                +1  7430     
                +1  7431     rshift  macro
                +1  7432             clr     c
                +1  7433             mov     a,r2
                +1  7434             rrc     a
                +1  7435             mov     r2,a
                +1  7436             mov     a,r3
                +1  7437             rrc     a
                +1  7438             mov     r3,a
                +1  7439             mov     a,r4
                +1  7440             rrc     a
                +1  7441             mov     r4,a
                +1  7442             mov     a,r5
                +1  7443             rrc     a
                +1  7444             mov     r5,a
                +1  7445             endm
                +1  7446     rshift1 macro
                +1  7447             setb    c
                +1  7448             mov     a,r2
                +1  7449             rrc     a
                +1  7450             mov     r2,a
                +1  7451             mov     a,r3
                +1  7452             rrc     a
                +1  7453             mov     r3,a
                +1  7454             mov     a,r4
                +1  7455             rrc     a
                +1  7456             mov     r4,a
                +1  7457             mov     a,r5
                +1  7458             rrc     a
                +1  7459             mov     r5,a
                +1  7460             endm
                +1  7461     
                +1  7462     
                +1  7463     lshift  macro
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   119

                +1  7464             mov     a,r5
                +1  7465             rlc     a
                +1  7466             mov     r5,a
                +1  7467             mov     a,r4
                +1  7468             rlc     a
                +1  7469             mov     r4,a
                +1  7470             mov     a,r3
                +1  7471             rlc     a
                +1  7472             mov     r3,a
                +1  7473             mov     a,r2
                +1  7474             rlc     a
                +1  7475             mov     r2,a
                +1  7476             endm
                +1  7477     
                +1  7478     neg1    macro
                +1  7479             clr     c
                +1  7480             clr     a
                +1  7481             subb    a,r5
                +1  7482             mov     r5,a
                +1  7483             clr     a
                +1  7484             subb    a,r4
                +1  7485             mov     r4,a
                +1  7486             clr     a
                +1  7487             subb    a,r3
                +1  7488             mov     r3,a
                +1  7489             clr     a
                +1  7490             subb    a,r2
                +1  7491             mov     r2,a
                +1  7492             endm
                +1  7493     
                +1  7494     negm    macro  addr
                +1  7495             clr     c
                +1  7496             clr     a
                +1  7497             subb    a,addr+3
                +1  7498             mov     addr+3,a
                +1  7499             clr     a
                +1  7500             subb    a,addr+2
                +1  7501             mov     addr+2,a
                +1  7502             clr     a
                +1  7503             subb    a,addr+1
                +1  7504             mov     addr+1,a
                +1  7505             clr     a
                +1  7506             subb    a,addr
                +1  7507             mov     addr,a
                +1  7508             endm
                +1  7509     
                +1  7510     copytor macro  addr
                +1  7511             mov     r2,addr
                +1  7512             mov     r3,addr+1
                +1  7513             mov     r4,addr+2
                +1  7514             mov     r5,addr+3
                +1  7515             endm
                +1  7516     
                +1  7517     
                +1  7518     copyrto macro  addr
                +1  7519             mov     addr,r2
                +1  7520             mov     addr+1,r3
                +1  7521             mov     addr+2,r4
                +1  7522             mov     addr+3,r5
                +1  7523             endm
                +1  7524     
                +1  7525     
                +1  7526     ;       Internal representation: in this set of routines a floating number
                +1  7527     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7528     
                +1  7529     ;       Stack offset values
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   120

                +1  7530     ;ltemp   equ     28h
                +1  7531     
  0006          +1  7532     cntr    equ     6               ;r6 is the counter
  0007          +1  7533     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7534     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7535     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7536     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7537     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7538     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7539     
                +1  7540     
                +1  7541     
                +1  7542     
                +1  7543     
                +1  7544     ;DECSIZE EQU     10
                +1  7545     ;NUMSIZE EQU     4
                +1  7546     ;RR4     EQU     4
                +1  7547     ;RR5     EQU     5
                +1  7548     
                +1  7549     ;       unpack1 - unpacks the left operand
                +1  7550     
009E            +1  7551     unpack1:
009E EA         +1  7552             mov     a,r2            ;get sign
009F 5480       +1  7553             anl     a,#80h
00A1 530740     +1  7554             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7555             orl     sign,a          ;store sign
00A6 EB         +1  7556             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7557             rlc     a               ;rotate into carry
00A8 EA         +1  7558             mov     a,r2            ;get rest of exponent
00A9 33         +1  7559             rlc     a               ;and make it 8 bits
00AA F8         +1  7560             mov     r0,a            ;store it
00AB 6006       +1  7561             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7562             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7563             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7564             ret
00B3            +1  7565     zer1:
00B3 E4         +1  7566             clr     a
00B4 FA         +1  7567             mov     r2,a
00B5 FB         +1  7568             mov     r3,a
00B6 FC         +1  7569             mov     r4,a
00B7 FD         +1  7570             mov     r5,a            ;zero mantissa
00B8 F8         +1  7571             mov     r0,a            ;zero exponent
00B9 22         +1  7572             ret
                +1  7573     
                +1  7574     ;       unpack2 - unpacks right operand
                +1  7575     
00BA            +1  7576     unpack2:
00BA E508       +1  7577             mov     a,ltemp         ;get sign
00BC 13         +1  7578             rrc     a               ;shift down
00BD 5440       +1  7579             anl     a,#40h          ;mask out sign
00BF 530780     +1  7580             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7581             orl     sign,a
00C4 E509       +1  7582             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7583             rlc     a               ;rotate into carry
00C7 E508       +1  7584             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7585             rlc     a               ;and make it 8 bits
00CA F9         +1  7586             mov     r1,a            ;store it
00CB 6007       +1  7587             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7588             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7589             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7590             ret
00D4            +1  7591     zer2:
00D4 E4         +1  7592             clr     a
00D5 F508       +1  7593             mov     ltemp,a
00D7 F509       +1  7594             mov     ltemp+1,a
00D9 F50A       +1  7595             mov     ltemp+2,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   121

00DB F50B       +1  7596             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7597             ret
                +1  7598     
                +1  7599     ;       pack1 - put operand 1 back into float format
                +1  7600     
00DE            +1  7601     pack1:
00DE E8         +1  7602             mov     a,r0            ;get exponent
00DF C3         +1  7603             clr     c
00E0 13         +1  7604             rrc     a               ;shift down 1 bit
00E1 530780     +1  7605             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7606             orl     a,r7            ;or in sign bit
00E5 FA         +1  7607             mov     r2,a            ;store
00E6 E8         +1  7608             mov     a,r0            ;get other bit
00E7 03         +1  7609             rr      a               ;rotate into hi bit
00E8 5480       +1  7610             anl     a,#80h          ;mask
00EA 53037F     +1  7611             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7612             orl     mant1+1,a       ;put in
00EF 22         +1  7613             ret
                +1  7614     
                +1  7615     
                +1  7616     ;       norm1 - normalize the unpacked value in 1
                +1  7617     
00F0            +1  7618     norm1:
00F0 E8         +1  7619             mov     a,r0            ;get exponent
00F1 60C0       +1  7620             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7621             mov     a,r2            ;get hi byte
00F4 6023       +1  7622             jz      norup           ;zero, so shift up if anything
00F6            +1  7623     nordn:
00F6 EA         +1  7624             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7625             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7626+3           add1                    ;add in a rounding bit
00FA ED         +1  7627+1           mov     a,r5
00FB 2401       +1  7628+1           add     a,#1
00FD FD         +1  7629+1           mov     r5,a
00FE E4         +1  7630+1           clr     a
00FF 3C         +1  7631+1           addc    a,r4
0100 FC         +1  7632+1           mov     r4,a
0101 E4         +1  7633+1           clr     a
0102 3B         +1  7634+1           addc    a,r3
0103 FB         +1  7635+1           mov     r3,a
0104 E4         +1  7636+1           clr     a
0105 3A         +1  7637+1           addc    a,r2
0106 FA         +1  7638+1           mov     r2,a
0107            +1  7639     nordn1:
                +1  7640+3           rshift                  ;shift down 1 bit
0107 C3         +1  7641+1           clr     c
0108 EA         +1  7642+1           mov     a,r2
0109 13         +1  7643+1           rrc     a
010A FA         +1  7644+1           mov     r2,a
010B EB         +1  7645+1           mov     a,r3
010C 13         +1  7646+1           rrc     a
010D FB         +1  7647+1           mov     r3,a
010E EC         +1  7648+1           mov     a,r4
010F 13         +1  7649+1           rrc     a
0110 FC         +1  7650+1           mov     r4,a
0111 ED         +1  7651+1           mov     a,r5
0112 13         +1  7652+1           rrc     a
0113 FD         +1  7653+1           mov     r5,a
0114 08         +1  7654             inc     r0              ;adjust exponent
0115 EA         +1  7655             mov     a,r2            ;test high byte
0116 70DE       +1  7656             jnz     nordn           ;loop
0118 22         +1  7657             ret                     ;done
                +1  7658     
0119            +1  7659     norup:
0119 4B         +1  7660             orl     a,r3
011A 4C         +1  7661             orl     a,r4
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   122

011B 4D         +1  7662             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7663             jz      zer1            ;it is - make it true zero
011E            +1  7664     norup1:
011E EB         +1  7665             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7666             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7667             clr     c
                +1  7668+3           lshift                  ;shift mantissa up
0123 ED         +1  7669+1           mov     a,r5
0124 33         +1  7670+1           rlc     a
0125 FD         +1  7671+1           mov     r5,a
0126 EC         +1  7672+1           mov     a,r4
0127 33         +1  7673+1           rlc     a
0128 FC         +1  7674+1           mov     r4,a
0129 EB         +1  7675+1           mov     a,r3
012A 33         +1  7676+1           rlc     a
012B FB         +1  7677+1           mov     r3,a
012C EA         +1  7678+1           mov     a,r2
012D 33         +1  7679+1           rlc     a
012E FA         +1  7680+1           mov     r2,a
012F 18         +1  7681             dec     r0              ;adjust exponent
0130 80EC       +1  7682             jmp     norup1
0132            +1  7683     norup2:
0132 22         +1  7684             ret                     ;finito
                +1  7685     
                +1  7686     
                +1  7687     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7688     ;       exponents are equal. This requires the smaller number to have
                +1  7689     ;       its exponent incremented and its mantissa shifted right.
                +1  7690     
0133            +1  7691     denorm:
0133 E8         +1  7692             mov     a,r0
0134 C3         +1  7693             clr     c
0135 99         +1  7694             subb    a,r1            ;compare exponents
0136 5029       +1  7695             jnc     up2a            ;shift operand 2
0138            +1  7696     up1:
0138 08         +1  7697             inc     r0              ;increment exponent
                +1  7698+3           rshift                  ;shift mantissa down
0139 C3         +1  7699+1           clr     c
013A EA         +1  7700+1           mov     a,r2
013B 13         +1  7701+1           rrc     a
013C FA         +1  7702+1           mov     r2,a
013D EB         +1  7703+1           mov     a,r3
013E 13         +1  7704+1           rrc     a
013F FB         +1  7705+1           mov     r3,a
0140 EC         +1  7706+1           mov     a,r4
0141 13         +1  7707+1           rrc     a
0142 FC         +1  7708+1           mov     r4,a
0143 ED         +1  7709+1           mov     a,r5
0144 13         +1  7710+1           rrc     a
0145 FD         +1  7711+1           mov     r5,a
0146 E8         +1  7712             mov     a,r0
0147 B501EE     +1  7713             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7714             ret
                +1  7715     
014B            +1  7716     up2:
014B 09         +1  7717             inc     r1              ;increment exponent 2
                +1  7718+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7719+1           clr     c
014D E508       +1  7720+1           mov     a,mant2
014F 13         +1  7721+1           rrc     a
0150 F508       +1  7722+1           mov     mant2,a
0152 E509       +1  7723+1           mov     a,mant2+1
0154 13         +1  7724+1           rrc     a
0155 F509       +1  7725+1           mov     mant2+1,a
0157 E50A       +1  7726+1           mov     a,mant2+2
0159 13         +1  7727+1           rrc     a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   123

015A F50A       +1  7728+1           mov     mant2+2,a
015C E50B       +1  7729+1           mov     a,mant2+3
015E 13         +1  7730+1           rrc     a
015F F50B       +1  7731+1           mov     mant2+3,a
0161            +1  7732     up2a:
0161 E8         +1  7733             mov     a,r0            ;compare exponents
0162 B501E6     +1  7734             cjne    a,exp2,up2
0165 22         +1  7735             ret                     ;all done
                +1  7736     ;------------------------------------------------------------------
                +1  7737     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7738     
0166            +1  7739     fladd:
                +1  7740+3           saveregs
0166 C007       +1  7741+1           push    7
0168 C006       +1  7742+1           push    6
016A C001       +1  7743+1           push    1
016C C000       +1  7744+1           push    0
016E 119E       +1  7745             call    unpack1
0170 11BA       +1  7746             call    unpack2
0172 3133       +1  7747             call    denorm
0174 E507       +1  7748             mov     a,sign
0176 30E70D     +1  7749             jnb     acc.7,ok1       ;test left sign
                +1  7750+3           neg1                    ;negate op1
0179 C3         +1  7751+1           clr     c
017A E4         +1  7752+1           clr     a
017B 9D         +1  7753+1           subb    a,r5
017C FD         +1  7754+1           mov     r5,a
017D E4         +1  7755+1           clr     a
017E 9C         +1  7756+1           subb    a,r4
017F FC         +1  7757+1           mov     r4,a
0180 E4         +1  7758+1           clr     a
0181 9B         +1  7759+1           subb    a,r3
0182 FB         +1  7760+1           mov     r3,a
0183 E4         +1  7761+1           clr     a
0184 9A         +1  7762+1           subb    a,r2
0185 FA         +1  7763+1           mov     r2,a
0186            +1  7764     ok1:
0186 E507       +1  7765             mov     a,sign
0188 30E615     +1  7766             jnb     acc.6,ok2       ;test right sign
                +1  7767+3           negm    mant2           ;negate op2
018B C3         +1  7768+1           clr     c
018C E4         +1  7769+1           clr     a
018D 950B       +1  7770+1           subb    a,mant2+3
018F F50B       +1  7771+1           mov     mant2+3,a
0191 E4         +1  7772+1           clr     a
0192 950A       +1  7773+1           subb    a,mant2+2
0194 F50A       +1  7774+1           mov     mant2+2,a
0196 E4         +1  7775+1           clr     a
0197 9509       +1  7776+1           subb    a,mant2+1
0199 F509       +1  7777+1           mov     mant2+1,a
019B E4         +1  7778+1           clr     a
019C 9508       +1  7779+1           subb    a,mant2
019E F508       +1  7780+1           mov     mant2,a
01A0            +1  7781     ok2:
                +1  7782+3           addl    mant2           ;add mantissas
01A0 ED         +1  7783+1           mov     a,r5
01A1 250B       +1  7784+1           add     a,mant2+3
01A3 FD         +1  7785+1           mov     r5,a
01A4 E50A       +1  7786+1           mov     a,mant2+2
01A6 3C         +1  7787+1           addc    a,r4
01A7 FC         +1  7788+1           mov     r4,a
01A8 E509       +1  7789+1           mov     a,mant2+1
01AA 3B         +1  7790+1           addc    a,r3
01AB FB         +1  7791+1           mov     r3,a
01AC E508       +1  7792+1           mov     a,mant2+0
01AE 3A         +1  7793+1           addc    a,r2
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   124

01AF FA         +1  7794+1           mov     r2,a
01B0 E4         +1  7795             clr     a
01B1 FF         +1  7796             mov     r7,a            ;clear sign
01B2 EA         +1  7797             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7798             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7799             mov     r7,a            ;store sign
                +1  7800+3           neg1                    ;negate mantissa
01B7 C3         +1  7801+1           clr     c
01B8 E4         +1  7802+1           clr     a
01B9 9D         +1  7803+1           subb    a,r5
01BA FD         +1  7804+1           mov     r5,a
01BB E4         +1  7805+1           clr     a
01BC 9C         +1  7806+1           subb    a,r4
01BD FC         +1  7807+1           mov     r4,a
01BE E4         +1  7808+1           clr     a
01BF 9B         +1  7809+1           subb    a,r3
01C0 FB         +1  7810+1           mov     r3,a
01C1 E4         +1  7811+1           clr     a
01C2 9A         +1  7812+1           subb    a,r2
01C3 FA         +1  7813+1           mov     r2,a
01C4            +1  7814     ok3:
01C4 11F0       +1  7815             call    norm1
01C6 11DE       +1  7816             call    pack1           ;pack normalized result
                +1  7817+3           restregs                ;and return
01C8 D000       +1  7818+1           pop     0
01CA D001       +1  7819+1           pop     1
01CC D006       +1  7820+1           pop     6
01CE D007       +1  7821+1           pop     7
01D0 22         +1  7822             ret
                +1  7823     ;-------------------------------------------------------------
                +1  7824     ;       Subtract the number ltemp from the number in r2-r5
                +1  7825     
01D1            +1  7826     flsub:
01D1 630880     +1  7827             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7828             jmp     fladd           ;and add!
                +1  7829     
                +1  7830     ;================================================================
                +1  7831     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7832     
01D6            +1  7833     flcmp:
01D6 EA         +1  7834            mov     a,r2            ;get sign of left
01D7 6508       +1  7835            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7836            jnb     acc.7,cexp      ;same, go check exponent
                +1  7837     ;ifdef SMALL_MODEL
01DC EA         +1  7838             mov     a,r2            ;get sign of left again
01DD 33         +1  7839             rlc     a
01DE 5001       +1  7840             jnc     flout
                +1  7841     ;endif
01E0 D3         +1  7842             setb    c
01E1 22         +1  7843     flout:          ret                    ;return with acc < 0
                +1  7844     
01E2            +1  7845     cexp:
01E2 C3         +1  7846            clr     c
01E3 EA         +1  7847            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7848            subb    a,ltemp
01E6 7010       +1  7849            jnz     fnd
01E8 EB         +1  7850            mov     a,r3
01E9 9509       +1  7851            subb    a,ltemp+1
01EB 700B       +1  7852            jnz     fnd
01ED EC         +1  7853            mov     a,r4
01EE 950A       +1  7854            subb    a,ltemp+2
01F0 7006       +1  7855            jnz     fnd
01F2 ED         +1  7856            mov     a,r5
01F3 950B       +1  7857            subb    a,ltemp+3
01F5 7001       +1  7858            jnz     fnd
01F7            +1  7859     cdone:
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   125

01F7 22         +1  7860            ret                     ;return with acc == 0
01F8            +1  7861     fnd:
01F8 8AF0       +1  7862           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7863          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7864            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7865                         orl         a,#1                          ;make non-zero
0201 B3         +1  7866             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7867             ret
                +1  7868     ;==============================================================
                +1  7869     
                +1  7870     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7871     ;       the result in r2-r5
                +1  7872     
0203            +1  7873     flmul:
                +1  7874+3           saveregs
0203 C007       +1  7875+1           push    7
0205 C006       +1  7876+1           push    6
0207 C001       +1  7877+1           push    1
0209 C000       +1  7878+1           push    0
020B 119E       +1  7879             call    unpack1
020D 11BA       +1  7880             call    unpack2
020F E4         +1  7881             clr     a
0210 F50C       +1  7882             mov     prod,a
0212 F50D       +1  7883             mov     prod+1,a        ;clear product
0214 F50E       +1  7884             mov     prod+2,a
0216 F50F       +1  7885             mov     prod+3,a
0218 7E07       +1  7886             mov     r6,#7           ;initialize counter
021A            +1  7887     mup1:
                +1  7888+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7889+1           clr     c
021B E508       +1  7890+1           mov     a,mant2
021D 13         +1  7891+1           rrc     a
021E F508       +1  7892+1           mov     mant2,a
0220 E509       +1  7893+1           mov     a,mant2+1
0222 13         +1  7894+1           rrc     a
0223 F509       +1  7895+1           mov     mant2+1,a
0225 E50A       +1  7896+1           mov     a,mant2+2
0227 13         +1  7897+1           rrc     a
0228 F50A       +1  7898+1           mov     mant2+2,a
022A E50B       +1  7899+1           mov     a,mant2+3
022C 13         +1  7900+1           rrc     a
022D F50B       +1  7901+1           mov     mant2+3,a
022F 5014       +1  7902             jnc     nobit           ;skip if lsb was zero
                +1  7903+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7904+1           mov     a,r5
0232 250F       +1  7905+1           add     a,prod+3
0234 F50F       +1  7906+1           mov     prod+3,a
0236 E50E       +1  7907+1           mov     a,prod+2
0238 3C         +1  7908+1           addc    a,r4
0239 F50E       +1  7909+1           mov     prod+2,a
023B E50D       +1  7910+1           mov     a,prod+1
023D 3B         +1  7911+1           addc    a,r3
023E F50D       +1  7912+1           mov     prod+1,a
0240 E50C       +1  7913+1           mov     a,prod+0
0242 3A         +1  7914+1           addc    a,r2
0243 F50C       +1  7915+1           mov     prod,a
0245            +1  7916     nobit:
                +1  7917+3           lshift                  ;shift multiplicand up
0245 ED         +1  7918+1           mov     a,r5
0246 33         +1  7919+1           rlc     a
0247 FD         +1  7920+1           mov     r5,a
0248 EC         +1  7921+1           mov     a,r4
0249 33         +1  7922+1           rlc     a
024A FC         +1  7923+1           mov     r4,a
024B EB         +1  7924+1           mov     a,r3
024C 33         +1  7925+1           rlc     a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   126

024D FB         +1  7926+1           mov     r3,a
024E EA         +1  7927+1           mov     a,r2
024F 33         +1  7928+1           rlc     a
0250 FA         +1  7929+1           mov     r2,a
0251 DEC7       +1  7930             djnz    r6,mup1         ;loop if more
                +1  7931     
0253 7E11       +1  7932             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7933             sjmp    mup3
0257            +1  7934     mup11:
                +1  7935+3           shfdn   prod            ;shift product right
0257 C3         +1  7936+1           clr     c
0258 E50C       +1  7937+1           mov     a,prod
025A 13         +1  7938+1           rrc     a
025B F50C       +1  7939+1           mov     prod,a
025D E50D       +1  7940+1           mov     a,prod+1
025F 13         +1  7941+1           rrc     a
0260 F50D       +1  7942+1           mov     prod+1,a
0262 E50E       +1  7943+1           mov     a,prod+2
0264 13         +1  7944+1           rrc     a
0265 F50E       +1  7945+1           mov     prod+2,a
0267 E50F       +1  7946+1           mov     a,prod+3
0269 13         +1  7947+1           rrc     a
026A F50F       +1  7948+1           mov     prod+3,a
026C            +1  7949     mup3:
                +1  7950+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7951+1           clr     c
026D E508       +1  7952+1           mov     a,mant2
026F 13         +1  7953+1           rrc     a
0270 F508       +1  7954+1           mov     mant2,a
0272 E509       +1  7955+1           mov     a,mant2+1
0274 13         +1  7956+1           rrc     a
0275 F509       +1  7957+1           mov     mant2+1,a
0277 E50A       +1  7958+1           mov     a,mant2+2
0279 13         +1  7959+1           rrc     a
027A F50A       +1  7960+1           mov     mant2+2,a
027C E50B       +1  7961+1           mov     a,mant2+3
027E 13         +1  7962+1           rrc     a
027F F50B       +1  7963+1           mov     mant2+3,a
0281 5014       +1  7964             jnc     mup2            ;skip if bit not set
                +1  7965+3           dan     prod            ;add to prod
0283 ED         +1  7966+1           mov     a,r5
0284 250F       +1  7967+1           add     a,prod+3
0286 F50F       +1  7968+1           mov     prod+3,a
0288 E50E       +1  7969+1           mov     a,prod+2
028A 3C         +1  7970+1           addc    a,r4
028B F50E       +1  7971+1           mov     prod+2,a
028D E50D       +1  7972+1           mov     a,prod+1
028F 3B         +1  7973+1           addc    a,r3
0290 F50D       +1  7974+1           mov     prod+1,a
0292 E50C       +1  7975+1           mov     a,prod+0
0294 3A         +1  7976+1           addc    a,r2
0295 F50C       +1  7977+1           mov     prod,a
0297            +1  7978     mup2:
0297 DEBE       +1  7979             djnz    r6,mup11        ;loop if more
0299 E8         +1  7980             mov     a,r0            ;get exp1
029A 29         +1  7981             add     a,r1            ;add exp2
029B 247A       +1  7982             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7983             mov     r0,a            ;store
029E EF         +1  7984             mov     a,r7            ;get sign
029F 23         +1  7985             rl      a               ;rotate bit into msb
02A0 6207       +1  7986             xrl     sign,a          ;xor with other bit
                +1  7987+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7988+1           mov     r2,prod
02A4 AB0D       +1  7989+1           mov     r3,prod+1
02A6 AC0E       +1  7990+1           mov     r4,prod+2
02A8 AD0F       +1  7991+1           mov     r5,prod+3
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   127

02AA 11F0       +1  7992             call    norm1           ;normalize
02AC 11DE       +1  7993             call    pack1
                +1  7994+3           restregs
02AE D000       +1  7995+1           pop     0
02B0 D001       +1  7996+1           pop     1
02B2 D006       +1  7997+1           pop     6
02B4 D007       +1  7998+1           pop     7
02B6 22         +1  7999             ret
                +1  8000     ;-----------------------------------------------------------
                +1  8001     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8002     
02B7            +1  8003     fldiv:
                +1  8004+3           saveregs
02B7 C007       +1  8005+1           push    7
02B9 C006       +1  8006+1           push    6
02BB C001       +1  8007+1           push    1
02BD C000       +1  8008+1           push    0
02BF 119E       +1  8009             call    unpack1
02C1 11BA       +1  8010             call    unpack2
02C3 E4         +1  8011             clr     a
02C4 F50C       +1  8012             mov     prod,a
02C6 F50D       +1  8013             mov     prod+1,a
02C8 F50E       +1  8014             mov     prod+2,a
02CA F50F       +1  8015             mov     prod+3,a
02CC E9         +1  8016             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8017             jz      div9
02CF E8         +1  8018             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8019             jz      div9
02D2 C3         +1  8020             clr     c
02D3 99         +1  8021             subb    a,r1            ;compute new exponent
02D4 2478       +1  8022             add     a,#127-7        ;unbias
02D6 F8         +1  8023             mov     r0,a            ;store back
02D7 EF         +1  8024             mov     a,r7            ;get sign
02D8 23         +1  8025             rl      a
02D9 6207       +1  8026             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8027             mov     r6,#24+7        ;initialize counter
02DD            +1  8028     div1:
                +1  8029+3           shfup   prod            ;shift quotient up
02DD C3         +1  8030+1           clr     c
02DE E50F       +1  8031+1           mov     a,prod+3
02E0 33         +1  8032+1           rlc     a
02E1 F50F       +1  8033+1           mov     prod+3,a
02E3 E50E       +1  8034+1           mov     a,prod+2
02E5 33         +1  8035+1           rlc     a
02E6 F50E       +1  8036+1           mov     prod+2,a
02E8 E50D       +1  8037+1           mov     a,prod+1
02EA 33         +1  8038+1           rlc     a
02EB F50D       +1  8039+1           mov     prod+1,a
02ED E50C       +1  8040+1           mov     a,prod
02EF 33         +1  8041+1           rlc     a
02F0 F50C       +1  8042+1           mov     prod,a
02F2 C3         +1  8043             clr     c
02F3 EA         +1  8044             mov     a,r2            ;compare values
02F4 9508       +1  8045             subb    a,mant2
02F6 4028       +1  8046             jc      div2            ;skip if bigger
02F8 7013       +1  8047             jnz     div3
02FA EB         +1  8048             mov     a,r3            ;compare values
02FB 9509       +1  8049             subb    a,mant2+1
02FD 4021       +1  8050             jc      div2            ;skip if bigger
02FF 700C       +1  8051             jnz     div3
0301 EC         +1  8052             mov     a,r4            ;compare values
0302 950A       +1  8053             subb    a,mant2+2
0304 401A       +1  8054             jc      div2            ;skip if bigger
0306 7005       +1  8055             jnz     div3
0308 ED         +1  8056             mov     a,r5            ;compare values
0309 950B       +1  8057             subb    a,mant2+3
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   128

030B 4013       +1  8058             jc      div2            ;skip if bigger
030D            +1  8059     div3:
030D ED         +1  8060             mov     a,r5
030E 950B       +1  8061             subb    a,mant2+3
0310 FD         +1  8062             mov     r5,a
0311 EC         +1  8063             mov     a,r4
0312 950A       +1  8064             subb    a,mant2+2               ;do subtraction
0314 FC         +1  8065             mov     r4,a
0315 EB         +1  8066             mov     a,r3
0316 9509       +1  8067             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8068             mov     r3,a
0319 EA         +1  8069             mov     a,r2
031A 9508       +1  8070             subb    a,mant2         ;do subtraction
031C FA         +1  8071             mov     r2,a
031D 430F01     +1  8072             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8073     div2:
                +1  8074+3           lshift                  ;shift dividend up
0320 ED         +1  8075+1           mov     a,r5
0321 33         +1  8076+1           rlc     a
0322 FD         +1  8077+1           mov     r5,a
0323 EC         +1  8078+1           mov     a,r4
0324 33         +1  8079+1           rlc     a
0325 FC         +1  8080+1           mov     r4,a
0326 EB         +1  8081+1           mov     a,r3
0327 33         +1  8082+1           rlc     a
0328 FB         +1  8083+1           mov     r3,a
0329 EA         +1  8084+1           mov     a,r2
032A 33         +1  8085+1           rlc     a
032B FA         +1  8086+1           mov     r2,a
032C DEAF       +1  8087             djnz    r6,div1         ;loop if more
                +1  8088+3           copytor prod            ;copy quotient
032E AA0C       +1  8089+1           mov     r2,prod
0330 AB0D       +1  8090+1           mov     r3,prod+1
0332 AC0E       +1  8091+1           mov     r4,prod+2
0334 AD0F       +1  8092+1           mov     r5,prod+3
0336            +1  8093     div9:
0336 11F0       +1  8094             call    norm1           ;now normalize result
0338 11DE       +1  8095             call    pack1           ;pack it up
                +1  8096+3           restregs                ;restore registers
033A D000       +1  8097+1           pop     0
033C D001       +1  8098+1           pop     1
033E D006       +1  8099+1           pop     6
0340 D007       +1  8100+1           pop     7
0342 22         +1  8101             ret
                +1  8102     ;------------------------------------------------------------------
                +1  8103     
                +1  8104     ;       Float to long conversion: if the exponent is less than the
                +1  8105     ;       excess value, the result is zero. If the exponent is so large
                +1  8106     ;       that the value would be shifted out, the result is overflow.
                +1  8107     ;       Otherwise shift the mantissa up or down as required.
                +1  8108     
0343            +1  8109     ftol:
                +1  8110+3           saveregs
0343 C007       +1  8111+1           push    7
0345 C006       +1  8112+1           push    6
0347 C001       +1  8113+1           push    1
0349 C000       +1  8114+1           push    0
034B EA         +1  8115             mov     a,r2
034C B4BF09     +1  8116             cjne    a,#0bfh,ne05
034F EB         +1  8117             mov     a,r3
0350 7006       +1  8118             jnz     ne05
0352 EC         +1  8119             mov     a,r4
0353 7003       +1  8120             jnz     ne05
0355 ED         +1  8121             mov     a,r5
0356 6024       +1  8122             jz      ftol1
0358 119E       +1  8123     ne05:   call    unpack1
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   129

035A E8         +1  8124             mov     a,r0            ;get exponent
035B 2482       +1  8125             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8126             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8127             mov     a,r7            ;get sign
0361 30E70D     +1  8128             jnb     acc.7,ftol4     ;skip if +ve
                +1  8129+3           neg1                    ;negate it
0364 C3         +1  8130+1           clr     c
0365 E4         +1  8131+1           clr     a
0366 9D         +1  8132+1           subb    a,r5
0367 FD         +1  8133+1           mov     r5,a
0368 E4         +1  8134+1           clr     a
0369 9C         +1  8135+1           subb    a,r4
036A FC         +1  8136+1           mov     r4,a
036B E4         +1  8137+1           clr     a
036C 9B         +1  8138+1           subb    a,r3
036D FB         +1  8139+1           mov     r3,a
036E E4         +1  8140+1           clr     a
036F 9A         +1  8141+1           subb    a,r2
0370 FA         +1  8142+1           mov     r2,a
0371            +1  8143     ftol4:
0371 E8         +1  8144             mov     a,r0            ;get exponent
0372 246A       +1  8145             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8146             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8147             mov     r0,a            ;save it
0378 24F8       +1  8148             add     a,#-8           ;if > 8, too big
037A 500E       +1  8149             jnc     ftol3
037C            +1  8150     ftol1:
037C E4         +1  8151             clr     a
037D FA         +1  8152             mov     r2,a
037E FB         +1  8153             mov     r3,a
037F FC         +1  8154             mov     r4,a
0380 FD         +1  8155             mov     r5,a
0381            +1  8156     ftol9:
                +1  8157+3           restregs
0381 D000       +1  8158+1           pop     0
0383 D001       +1  8159+1           pop     1
0385 D006       +1  8160+1           pop     6
0387 D007       +1  8161+1           pop     7
0389 22         +1  8162             ret
038A            +1  8163     ftol3:
038A E8         +1  8164             mov     a,r0
038B FE         +1  8165             mov     r6,a            ;store in counter
038C 60F3       +1  8166             jz      ftol9           ;if zero, do nothing
038E            +1  8167     ftol33:
                +1  8168+3           lshift                  ;shift up
038E ED         +1  8169+1           mov     a,r5
038F 33         +1  8170+1           rlc     a
0390 FD         +1  8171+1           mov     r5,a
0391 EC         +1  8172+1           mov     a,r4
0392 33         +1  8173+1           rlc     a
0393 FC         +1  8174+1           mov     r4,a
0394 EB         +1  8175+1           mov     a,r3
0395 33         +1  8176+1           rlc     a
0396 FB         +1  8177+1           mov     r3,a
0397 EA         +1  8178+1           mov     a,r2
0398 33         +1  8179+1           rlc     a
0399 FA         +1  8180+1           mov     r2,a
039A DEF2       +1  8181             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8182             sjmp    ftol9
039E            +1  8183     ftol2:
039E F4         +1  8184             cpl     a               ;complement
039F FE         +1  8185             mov     r6,a
03A0 6022       +1  8186             jz      ftol22
03A2            +1  8187     ftol23:
03A2 EF         +1  8188             mov     a,r7
03A3 30E70F     +1  8189             jnb     acc.7,ftol24
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   130

                +1  8190+3           rshift1
03A6 D3         +1  8191+1           setb    c
03A7 EA         +1  8192+1           mov     a,r2
03A8 13         +1  8193+1           rrc     a
03A9 FA         +1  8194+1           mov     r2,a
03AA EB         +1  8195+1           mov     a,r3
03AB 13         +1  8196+1           rrc     a
03AC FB         +1  8197+1           mov     r3,a
03AD EC         +1  8198+1           mov     a,r4
03AE 13         +1  8199+1           rrc     a
03AF FC         +1  8200+1           mov     r4,a
03B0 ED         +1  8201+1           mov     a,r5
03B1 13         +1  8202+1           rrc     a
03B2 FD         +1  8203+1           mov     r5,a
03B3 800D       +1  8204             jmp     ftol25
03B5            +1  8205+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8206+1           clr     c
03B6 EA         +1  8207+1           mov     a,r2
03B7 13         +1  8208+1           rrc     a
03B8 FA         +1  8209+1           mov     r2,a
03B9 EB         +1  8210+1           mov     a,r3
03BA 13         +1  8211+1           rrc     a
03BB FB         +1  8212+1           mov     r3,a
03BC EC         +1  8213+1           mov     a,r4
03BD 13         +1  8214+1           rrc     a
03BE FC         +1  8215+1           mov     r4,a
03BF ED         +1  8216+1           mov     a,r5
03C0 13         +1  8217+1           rrc     a
03C1 FD         +1  8218+1           mov     r5,a
03C2 DEDE       +1  8219     ftol25: djnz    r6,ftol23
03C4            +1  8220     ftol22:
                +1  8221+3           add1                    ;round
03C4 ED         +1  8222+1           mov     a,r5
03C5 2401       +1  8223+1           add     a,#1
03C7 FD         +1  8224+1           mov     r5,a
03C8 E4         +1  8225+1           clr     a
03C9 3C         +1  8226+1           addc    a,r4
03CA FC         +1  8227+1           mov     r4,a
03CB E4         +1  8228+1           clr     a
03CC 3B         +1  8229+1           addc    a,r3
03CD FB         +1  8230+1           mov     r3,a
03CE E4         +1  8231+1           clr     a
03CF 3A         +1  8232+1           addc    a,r2
03D0 FA         +1  8233+1           mov     r2,a
03D1 EF         +1  8234             mov     a,r7
03D2 30E70F     +1  8235             jnb     acc.7,ftol26
                +1  8236+3           rshift1
03D5 D3         +1  8237+1           setb    c
03D6 EA         +1  8238+1           mov     a,r2
03D7 13         +1  8239+1           rrc     a
03D8 FA         +1  8240+1           mov     r2,a
03D9 EB         +1  8241+1           mov     a,r3
03DA 13         +1  8242+1           rrc     a
03DB FB         +1  8243+1           mov     r3,a
03DC EC         +1  8244+1           mov     a,r4
03DD 13         +1  8245+1           rrc     a
03DE FC         +1  8246+1           mov     r4,a
03DF ED         +1  8247+1           mov     a,r5
03E0 13         +1  8248+1           rrc     a
03E1 FD         +1  8249+1           mov     r5,a
03E2 809D       +1  8250             jmp     ftol9
03E4            +1  8251+3   ftol26: rshift
03E4 C3         +1  8252+1           clr     c
03E5 EA         +1  8253+1           mov     a,r2
03E6 13         +1  8254+1           rrc     a
03E7 FA         +1  8255+1           mov     r2,a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   131

03E8 EB         +1  8256+1           mov     a,r3
03E9 13         +1  8257+1           rrc     a
03EA FB         +1  8258+1           mov     r3,a
03EB EC         +1  8259+1           mov     a,r4
03EC 13         +1  8260+1           rrc     a
03ED FC         +1  8261+1           mov     r4,a
03EE ED         +1  8262+1           mov     a,r5
03EF 13         +1  8263+1           rrc     a
03F0 FD         +1  8264+1           mov     r5,a
03F1 808E       +1  8265             jmp     ftol9
                +1  8266     
                +1  8267     ;       arithmetic integer to floating conversions
                +1  8268     
03F3            +1  8269     abtof:
03F3 ED         +1  8270             mov     a,r5
03F4 23         +1  8271             rl      a
03F5 FC         +1  8272             mov     r4,a
03F6 9C         +1  8273             subb    a,r4
03F7 FC         +1  8274             mov     r4,a
03F8 FB         +1  8275             mov     r3,a
03F9 FA         +1  8276             mov     r2,a
03FA 8006       +1  8277             jmp     altof
03FC            +1  8278     awtof:
03FC EC         +1  8279             mov     a,r4
03FD 23         +1  8280             rl      a
03FE FB         +1  8281             mov     r3,a
03FF 9B         +1  8282             subb    a,r3
0400 FB         +1  8283             mov     r3,a
0401 FA         +1  8284             mov     r2,a
0402            +1  8285     altof:
                +1  8286+3           saveregs
0402 C007       +1  8287+1           push    7
0404 C006       +1  8288+1           push    6
0406 C001       +1  8289+1           push    1
0408 C000       +1  8290+1           push    0
040A EA         +1  8291             mov     a,r2            ;get sign
040B 5480       +1  8292             anl     a,#80h
040D FF         +1  8293             mov     r7,a            ;store it
040E 30E70D     +1  8294             jnb     acc.7,altof1    ;skip if +ve
                +1  8295+3           neg1
0411 C3         +1  8296+1           clr     c
0412 E4         +1  8297+1           clr     a
0413 9D         +1  8298+1           subb    a,r5
0414 FD         +1  8299+1           mov     r5,a
0415 E4         +1  8300+1           clr     a
0416 9C         +1  8301+1           subb    a,r4
0417 FC         +1  8302+1           mov     r4,a
0418 E4         +1  8303+1           clr     a
0419 9B         +1  8304+1           subb    a,r3
041A FB         +1  8305+1           mov     r3,a
041B E4         +1  8306+1           clr     a
041C 9A         +1  8307+1           subb    a,r2
041D FA         +1  8308+1           mov     r2,a
041E            +1  8309     altof1:
041E 7896       +1  8310             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8311             call    norm1           ;normalize it
0422 11DE       +1  8312             call    pack1           ;and pack up
                +1  8313+3           restregs
0424 D000       +1  8314+1           pop     0
0426 D001       +1  8315+1           pop     1
0428 D006       +1  8316+1           pop     6
042A D007       +1  8317+1           pop     7
042C 22         +1  8318             ret
                +1  8319     
042D            +1  8320     lbtof:
042D 7C00       +1  8321             mov     r4,#0
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   132

042F            +1  8322     lwtof:
042F E4         +1  8323             clr     a
0430 FB         +1  8324             mov     r3,a
0431 FA         +1  8325             mov     r2,a
0432            +1  8326     lltof:
                +1  8327+3           saveregs
0432 C007       +1  8328+1           push    7
0434 C006       +1  8329+1           push    6
0436 C001       +1  8330+1           push    1
0438 C000       +1  8331+1           push    0
043A 7F00       +1  8332             mov     r7,#0           ;zero sign
043C 80E0       +1  8333             sjmp    altof1
                +1  8334     
                +1  8335     ;-------------------------------------------------------
                +1  8336     
                +1  8337     
                    8338     
                    8339     ;$include (d:\amp\wriread.asm)
                +1  8340     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8341     cle256:          mov            IE,#00H
0441 75B601     +1  8342                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8343                              MOV            PSCTL,#03
                +1  8344                                             
0447 7400       +1  8345                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8346                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8347                                     mov             PSCTL,#00
044D 75B600     +1  8348                                 mov         FLSCL,#00
0450 75A880     +1  8349                               mov           IE,#80H
0453 22         +1  8350                                     ret
                +1  8351     
                +1  8352     ;чтение памяти программ в r8..r11
                +1  8353     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8354     re4byte:        mov                     dph,r2
0456 8B82       +1  8355                                             mov                     dpl,r3
0458 E4         +1  8356                                             clr                     a
0459 93         +1  8357                                             movc            a,@a+dptr
045A F508       +1  8358                                             mov                     r8,a
045C A3         +1  8359                                             inc                     dptr
045D E4         +1  8360                                             clr                     a
045E 93         +1  8361                                             movc            a,@a+dptr
045F F509       +1  8362                                             mov                     r9,a
0461 A3         +1  8363                                             inc                     dptr
0462 E4         +1  8364                                             clr                     a
0463 93         +1  8365                                             movc            a,@a+dptr
0464 F50A       +1  8366                                             mov                     r10,a
0466 A3         +1  8367                                             inc                     dptr
0467 E4         +1  8368                                             clr                     a
0468 93         +1  8369                                             movc            a,@a+dptr
0469 F50B       +1  8370                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8371                                             ret
                +1  8372      ;чтение памяти программ в r2..r5
                +1  8373     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8374     rebyte2:        mov                     dph,r2
046E 8B82       +1  8375                                             mov                     dpl,r3
0470 E4         +1  8376                                             clr                     a
0471 93         +1  8377                                             movc            a,@a+dptr
0472 FA         +1  8378                                             mov                     r2,a
0473 A3         +1  8379                                             inc                     dptr
0474 E4         +1  8380                                             clr                     a
0475 93         +1  8381                                             movc            a,@a+dptr
0476 FB         +1  8382                                             mov                     r3,a
0477 A3         +1  8383                                             inc                     dptr
0478 E4         +1  8384                                             clr                     a
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   133

0479 93         +1  8385                                             movc            a,@a+dptr
047A FC         +1  8386                                             mov                     r4,a
047B A3         +1  8387                                             inc                     dptr
047C E4         +1  8388                                             clr                     a
047D 93         +1  8389                                             movc            a,@a+dptr
047E FD         +1  8390                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8391                                             ret
                +1  8392      
                +1  8393     
                +1  8394      ;r7-количество байт
                +1  8395     ;dptr-адр ячейки для записи
                +1  8396     ;r1-адр ячейки  внешнего озу
                +1  8397     
0480 75A800     +1  8398     wrpage:  mov            IE,#00H
0483 75B601     +1  8399     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8400                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8401                      movx           a,@r1
048A F0         +1  8402                      movx           @dptr,a                         ;wr
048B 758F00     +1  8403                      mov            PSCTL,#0
048E 75B600     +1  8404                      mov            FLSCL,#00
0491 A3         +1  8405                     inc                     dptr
0492 09         +1  8406                     inc                     r1
0493 DFEE       +1  8407                     djnz            r7,WW5
0495 75A880     +1  8408                     mov             IE,#80H
0498 22         +1  8409                     ret
                +1  8410                             
                +1  8411     
                +1  8412     
                +1  8413                                                             
                +1  8414     
                +1  8415     
                +1  8416     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8417     ;чтение памяти программ во внешнее озу
                +1  8418     ;вх-r2,r3-адр яч памяти прогр
                +1  8419     ;r1- яч внешнее озу
0499 8A83       +1  8420     copyPP:         mov                     dph,r2
049B 8B82       +1  8421                                             mov                     dpl,r3
049D 7FFF       +1  8422                                             mov                     r7,#0ffh
049F E4         +1  8423     copy1:          clr                     a
04A0 93         +1  8424                                             movc            a,@a+dptr
04A1 F3         +1  8425                                             movx                    @r1,a
04A2 A3         +1  8426                                             inc                     dptr
04A3 09         +1  8427                                             inc                     r1
04A4 DFF9       +1  8428                                             djnz            r7,copy1
04A6 22         +1  8429                                             ret
                +1  8430     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8431     
                +1  8432                                     
                +1  8433     
                +1  8434     ;r8..r11->@r0..@r0+3
                +1  8435     ;r0-адр ячейки
                +1  8436     ;сохранить в ячейке озу
04A7 E508       +1  8437     savelte:        mov     a,ltemp
04A9 F6         +1  8438                                             mov     @r0,a
04AA 08         +1  8439                                             inc     r0
04AB E509       +1  8440                                             mov     a,ltemp+1
04AD F6         +1  8441                                             mov     @r0,a
04AE 08         +1  8442                                             inc     r0
04AF E50A       +1  8443                                             mov     a,ltemp+2
04B1 F6         +1  8444                                             mov     @r0,a
04B2 08         +1  8445                                             inc     r0
04B3 E50B       +1  8446                                             mov     a,ltemp+3
04B5 F6         +1  8447                                             mov     @r0,a
04B6 22         +1  8448                                             ret
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   134

                +1  8449     
                +1  8450     ;
                +1  8451     
                +1  8452     
                +1  8453     
                +1  8454     
                +1  8455     
                +1  8456                     
                +1  8457     
                +1  8458     
                +1  8459     
                +1  8460     
                +1  8461      
                    8462     
                    8463                                                   
                    8464     END
                                                                             
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   135

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03B4H   R   SEG=MAIN   868#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1476 1533 1558 1579 1583 1586 1587 1589 1677 1682 3656 3670 3751
                                           3754 3797 3892 3936 3939 4016 4020 4021 4022 4025 4268 4305 4306 4308 4385
                                           4405 4496 4500 4543 4546 4914 4919 5104 5109 5895 6057 6060
ABRET. . . . . . .  C ADDR   247EH   R   SEG=MAIN   5824 5826#
ABTOF. . . . . . .  C ADDR   03F3H   A      8269#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 682 746 754 762 770 772 792 1147 1158 1166 1245 1814 1823 1832 1841
                                           1862 2247 2272 2277 2281 2286 2289 2292 2295 2298 2487 2548 2594 2605 2693
                                           2702 2710 2719 2860 2903 2928 2933 2937 2940 2943 2946 2949 2952 3291 3379
                                           3425 3447 3466 3488 3539 4445 4451 4488 4577 5398 6487 6676 6754 6757 7014
                                           7666 7749 7766 7798 7836 7864 8126 8128 8146 8189 8235 8294
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2C43H   R   SEG=MAIN   903 940 942 944 946 948 950 952 954 956 1022 1024 1026 1028 1030
                                           1032 1034 1036 1038 1041 1043 1045 1047 1049 1051 1053 1055 1057 1059 1078
                                           1080 1082 7255#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1532 1544 1548 1563 1588 1591 1592 1681 1685 3669 3673 3748 3752
                                           3794 3798 3889 3893 3938 3942 4024 4037 4278 4292 4294 4296 4307 4310 4395
                                           4406 4501 4547 4918 4922 5108 5112 5696 5715 5733 5796 5813 6059 6062 6408
                                           6440
ADRBLOK. . . . . .  C ADDR   28F7H   R   SEG=MAIN   3363 3386 3767 3910 4808 4836 4964 5023 5132 5192 6452#
AFTERK . . . . . .  C ADDR   06ABH   R   SEG=MAIN   1175 1254#
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   634# 637
AGE9 . . . . . . .  C ADDR   0871H   R   SEG=MAIN   1480# 1483
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   643# 645
ALLSUM . . . . . .  C ADDR   0352H   R   SEG=MAIN   812# 847 865 881
ALMUL. . . . . . .  C ADDR   2B8AH   R   SEG=MAIN   7101#
ALTOF. . . . . . .  C ADDR   0402H   A      1141 1239 1270 1278 1296 1312 1323 1340 1353 1438 1974 2084 2162 2200
                                           3801 3898 4409 4504 4550 4649 4727 4735 4753 4877 4889 4904 5007 5069 5085
                                           5176 5238 5253 8277 8285#
ALTOF1 . . . . . .  C ADDR   041EH   A      8294 8309# 8333
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0611H   R   SEG=MAIN   1139 1155#
AN_T7. . . . . . .  C ADDR   11EEH   R   SEG=MAIN   2953# 3028 3038
AUTOKA . . . . . .  C ADDR   0C78H   R   SEG=MAIN   1173 2130#
AVPGO. . . . . . .  C ADDR   07DCH   R   SEG=MAIN   1400 1402#
AVTDEC1. . . . . .  C ADDR   066DH   R   SEG=MAIN   1208 1217#
AWTOF. . . . . . .  C ADDR   03FCH   A      8278#
B. . . . . . . . .  D ADDR   00F0H   A      122# 5543 5915 7104 7107 7109 7113 7117 7121 7125 7130 7134 7141 7145
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   136

                                           7149 7155 7159 7163 7169 7862 7863
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 462#
BFORM. . . . . . .  C ADDR   2834H   R   SEG=MAIN   6257 6262 6274# 6300
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4645 4701 4800
BIN30. . . . . . .  C ADDR   29A6H   R   SEG=MAIN   6664# 6690
BIN31. . . . . . .  C ADDR   29AAH   R   SEG=MAIN   6669# 6673
BIN32. . . . . . .  C ADDR   29BAH   R   SEG=MAIN   6682# 6687
BIN41. . . . . . .  C ADDR   29CBH   R   SEG=MAIN   6698# 6708
BINDEC . . . . . .  C ADDR   299AH   R   SEG=MAIN   1534 1590 1683 3671 3940 4026 4309 4920 5110 6061 6643#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1768 1769 1772
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1366 1599 1758 3016 3017 3019
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1794 1918 2105 2130 2307 2308 2316 6488
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1264 1704 1711 1776 2358 2987 3003 4181 5462
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 583 714 1604 2278 2360 2445 2480 2511 2934 2990 3114 3137 3212 3243
                                           3268 3382 3506 3771 3819 3847 4008 4136 4182 4229 4341 4418 4532
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1333 1792 2283 2989 3007 3015 3022 4416 4715
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1089 1092 6240
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1667 2687 3246 3264 3280 3381 3505 3772 3818 4007
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1666 2510 2618 2991 3267 3827 3846 4141 4183 4228 4340 4415
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2587 2771 2870 3180 3568 3708 3721 4247 4374 4480 4581 5980 6006
                                           6031 6043 6106 6113 6119 6125
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1414 1623 1739 2347 3036 3040 3041 3048
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 658 1607 1664 2992
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4147 4716
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1917
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1663 2446 2481 2484 3055 3213
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 527 531 2654 2659 2665 4125 4130 4211 4224 4346 4350 4355
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1364 1380 1423 2301 2303 2359 2509 2986 3106 3113 3266 4531
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1422 1662 2302 2361 2371 2508 2516 3073 3105 3136 3265 4530
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 683 729
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4551 5822 5825
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1415 1624 2032 2035 2406
BLOIN. . . . . . .  C ADDR   16A6H   R   SEG=MAIN   3676# 3681
BLOKVV . . . . . .  C ADDR   1678H   R   SEG=MAIN   3646#
BLOKVVC. . . . . .  C ADDR   1682H   R   SEG=MAIN   3649 3652#
BL_LI. . . . . . .  C ADDR   1643H   R   SEG=MAIN   3596 3604#
BONPART. . . . . .  C ADDR   0C4BH   R   SEG=MAIN   2104#
BOUT7. . . . . . .  C ADDR   13C7H   R   SEG=MAIN   3223# 3225
BRET . . . . . . .  C ADDR   22BFH   R   SEG=MAIN   5483 5488 5492#
BUFDEC . . . . . .  C ADDR   09B9H   R   SEG=MAIN   1688# 1693
BUFIND . . . . . .  D ADDR   0040H   A      298# 633 637 642 645 651 1479 1483 1549 1570 1591 1592 1593 1642 1647
                                           1686 1694 1696 1701 1737 1756 1762 1770 1773 1778 1793 1795 2266 2313 2317
                                           2562 2580 2596 2598 2601 2657 2658 2663 2664 2766 2810 2829 2921 2995 3057
                                           3115 3116 3163 3167 3193 3215 3229 3236 3247 3248 3354 3563 3590 3618 3647
                                           3674 3688 3689 3693 3694 3701 3702 3707 3723 3862 3869 3943 3951 3953 3969
                                           3993 4027 4036 4038 4102 4124 4131 4239 4277 4310 4311 4312 4313 4315 4349
                                           4354 4366 4394 4417 4472 4518 4923 4931 4935 5113 5121 5125 5298 5330 5541
                                           5554 5560 5567 5695 5714 5732 5795 5812 5823 5983 6009 6063 6110 6131 6407
                                           6439 6489
BUFL_DEC . . . . .  C ADDR   2169H   R   SEG=MAIN   5264#
BUFMEA . . . . . .  C ADDR   1F88H   R   SEG=MAIN   4925# 4930
BUFMIN . . . . . .  C ADDR   2097H   R   SEG=MAIN   5115# 5120
BUFON. . . . . . .  C ADDR   0DD1H   R   SEG=MAIN   2307 2316#
BUFR . . . . . . .  C ADDR   0916H   R   SEG=MAIN   1572# 1577
BUFR2. . . . . . .  C ADDR   08F8H   R   SEG=MAIN   1551# 1556
BUFR3. . . . . . .  C ADDR   08F1H   R   SEG=MAIN   1542 1547#
BUFR30 . . . . . .  C ADDR   08F4H   R   SEG=MAIN   1545 1549#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7859# 7863
CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   137

CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357
CEXP . . . . . . .  C ADDR   01E2H   A      7836 7845#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   2362H   R   SEG=MAIN   1460 3049 4507 5627#
CH1. . . . . . . .  C ADDR   2382H   R   SEG=MAIN   5447 5638#
CH10 . . . . . . .  C ADDR   2366H   R   SEG=MAIN   864 1103 3928 5628#
CH100. . . . . . .  C ADDR   237AH   R   SEG=MAIN   811 5633#
CH10000. . . . . .  C ADDR   2376H   R   SEG=MAIN   5632#
CH150H . . . . . .  C ADDR   23CAH   R   SEG=MAIN   5657#
CH2. . . . . . . .  C ADDR   237EH   R   SEG=MAIN   1098 5634#
CH20 . . . . . . .  C ADDR   2545H   R   SEG=MAIN   846 1108 5946#
CH2THO . . . . . .  C ADDR   23AAH   R   SEG=MAIN   2169 2207 5649#
CH320H . . . . . .  C ADDR   23C6H   R   SEG=MAIN   5656# 6460
CH4. . . . . . . .  C ADDR   236EH   R   SEG=MAIN   1112 5630#
CH43 . . . . . . .  C ADDR   18B1H   R   SEG=MAIN   3945# 3950
CH43_42. . . . . .  C ADDR   1957H   R   SEG=MAIN   4040# 4045
CH5. . . . . . . .  C ADDR   236AH   R   SEG=MAIN   880 5629#
CH57 . . . . . . .  C ADDR   2541H   R   SEG=MAIN   5945#
CH954. . . . . . .  C ADDR   2372H   R   SEG=MAIN   5631#
CHAIBL . . . . . .  C ADDR   14DDH   R   SEG=MAIN   3356 3358#
CHAIPR . . . . . .  C ADDR   1806H   R   SEG=MAIN   3864 3866#
CHANMA . . . . . .  C ADDR   0FA3H   R   SEG=MAIN   2594 2603#
CHANZ. . . . . . .  C ADDR   0F8AH   R   SEG=MAIN   2548 2592#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 562 1164 1209 1217 2122 2226 4137
CHBEFORE . . . . .  D ADDR   009BH   A      381# 585 808 822 841 859 875
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4834 4884 4900 5021 5075 5190 5244
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 596 1892 2000 2041 2046 2106 2114 3816 5264 5269
CHBUF1 . . . . . .  X ADDR   0E00H   A      438# 1902 1987
CHCMP. . . . . . .  C ADDR   2262H   R   SEG=MAIN   1170 5424#
CHDEC. . . . . . .  C ADDR   2275H   R   SEG=MAIN   1218 1231 5439#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2065 2092 2132 2182 2220
CHDELMO. . . . . .  C ADDR   0C36H   R   SEG=MAIN   2075 2092# 2097
CHIF . . . . . . .  C ADDR   258AH   R   SEG=MAIN   5987 5990#
CHIF5. . . . . . .  C ADDR   2592H   R   SEG=MAIN   5993 5995#
CHIFB. . . . . . .  C ADDR   25B5H   R   SEG=MAIN   6013 6016#
CHIFB1 . . . . . .  C ADDR   25BBH   R   SEG=MAIN   6015 6016 6019#
CHIFL5 . . . . . .  C ADDR   25C3H   R   SEG=MAIN   6023 6026#
CHIFOUR. . . . . .  C ADDR   25A4H   R   SEG=MAIN   6000 6002 6006#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1382 1799
CHIND2 . . . . . .  D ADDR   0033H   A      315# 716 718 726
CHINKOR. . . . . .  D ADDR   0098H   A      370# 557 790 1156 1169 1211 1225 1230 2099
CHK. . . . . . . .  C ADDR   23C2H   R   SEG=MAIN   1334 5655#
CHKL . . . . . . .  D ADDR   003DH   A      305# 696 698 706 708 709 711 2424 2451 2499 2967 3252 3999 4421
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1086 1093 1116 6239
CHMASN . . . . . .  D ADDR   003FH   A      306# 797 806 842 860 876 892 1091 1093 1094
CHMINUS. . . . . .  C ADDR   28DCH   R   SEG=MAIN   3376 3422 3444 3463 3485 6422# 6484
CHTADC . . . . . .  C ADDR   220CH   R   SEG=MAIN   5356#
CHTHO. . . . . . .  C ADDR   23A2H   R   SEG=MAIN   1303 1341 4658 4743 4761 5647#
CHTHOU . . . . . .  C ADDR   2449H   R   SEG=MAIN   5783#
CHZAP. . . . . . .  C ADDR   235EH   R   SEG=MAIN   1881 5626#
CH_1 . . . . . . .  C ADDR   238AH   R   SEG=MAIN   588 1496 1519 1899 2043 2118 3899 5266 5640#
CH_10. . . . . . .  C ADDR   23BAH   R   SEG=MAIN   1502 1525 1983 2013 4410 4909 5098 5653#
CH_10TH. . . . . .  C ADDR   23B6H   R   SEG=MAIN   1395 5652#
CH_2 . . . . . . .  C ADDR   238EH   R   SEG=MAIN   1894 1978 2006 2022 5641#
CH_200 . . . . . .  C ADDR   23B2H   R   SEG=MAIN   5651#
CH_220 . . . . . .  C ADDR   23AEH   R   SEG=MAIN   1357 5650#
CH_22T . . . . . .  C ADDR   2487H   R   SEG=MAIN   1448 5831#
CH_250 . . . . . .  C ADDR   23BEH   R   SEG=MAIN   1259 5654#
CH_4 . . . . . . .  C ADDR   2392H   R   SEG=MAIN   2016 3902 5642#
CH_5 . . . . . . .  C ADDR   2396H   R   SEG=MAIN   5643#
CH_500 . . . . . .  C ADDR   2483H   R   SEG=MAIN   1444 5830#
CH_7 . . . . . . .  C ADDR   239AH   R   SEG=MAIN   2110 5644#
CH_953 . . . . . .  C ADDR   239EH   R   SEG=MAIN   5646#
CH_B . . . . . . .  C ADDR   247FH   R   SEG=MAIN   1464 5828#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   138

CH_FL. . . . . . .  C ADDR   248BH   R   SEG=MAIN   1488 5832#
CH_M3. . . . . . .  C ADDR   23CEH   R   SEG=MAIN   5658#
CH_MLN . . . . . .  C ADDR   2386H   R   SEG=MAIN   5639#
CIKLWR . . . . . .  C ADDR   280AH   R   SEG=MAIN   6245#
CKCON. . . . . . .  D ADDR   008EH   A      30# 480 511
CL4. . . . . . . .  C ADDR   23E0H   R   SEG=MAIN   5675# 5677
CL4N . . . . . . .  C ADDR   23E6H   R   SEG=MAIN   5684# 5686
CLE20. . . . . . .  C ADDR   1944H   R   SEG=MAIN   4030# 4032
CLE256 . . . . . .  C ADDR   043EH   A      4217 4691 4793 8341#
CLEAR. . . . . . .  C ADDR   2994H   R   SEG=MAIN   6621 6625# 6655
CLEAR4 . . . . . .  C ADDR   23DDH   R   SEG=MAIN   820 1411 1413 1559 1580 1620 1622 2344 2346 3033 3035 4833 5673#
CLEARN . . . . . .  C ADDR   23E5H   R   SEG=MAIN   3749 3795 3890 4269 4386 4497 4544 5682#
CLMASSIX . . . . .  C ADDR   27FAH   R   SEG=MAIN   548 1409 1618 2103 2230 2342 3031 3211 6233#
CLMASV . . . . . .  C ADDR   07E1H   R   SEG=MAIN   1404 1406#
CLMAX. . . . . . .  C ADDR   27FFH   R   SEG=MAIN   6235# 6238
CLR11. . . . . . .  C ADDR   2995H   R   SEG=MAIN   6627# 6629
CLRDEC . . . . . .  C ADDR   298EH   R   SEG=MAIN   6619#
CLRNUM . . . . . .  C ADDR   2992H   R   SEG=MAIN   6622# 6736
CLRVICH. . . . . .  C ADDR   1337H   R   SEG=MAIN   3136# 3153
CL_HL. . . . . . .  C ADDR   1590H   R   SEG=MAIN   3499# 3514 3519 3523
CL_HL1 . . . . . .  C ADDR   15A2H   R   SEG=MAIN   3496 3511#
CL_HL2 . . . . . .  C ADDR   15ACH   R   SEG=MAIN   3511 3516#
CL_HL3 . . . . . .  C ADDR   15B6H   R   SEG=MAIN   3516 3521#
CNTR . . . . . . .  N NUMB   0006H   A      7532#
CO02S. . . . . . .  C ADDR   2346H   R   SEG=MAIN   5610# 5614
CO05S. . . . . . .  C ADDR   2353H   R   SEG=MAIN   5619# 5623
CO1S . . . . . . .  C ADDR   233DH   R   SEG=MAIN   5604# 5604
CO2S . . . . . . .  C ADDR   2339H   R   SEG=MAIN   5602# 5606
COMPA1 . . . . . .  C ADDR   088DH   R   SEG=MAIN   1496# 1505
COMPA2 . . . . . .  C ADDR   08C3H   R   SEG=MAIN   1519# 1528
COND . . . . . . .  C ADDR   286EH   R   SEG=MAIN   6329#
COPY1. . . . . . .  C ADDR   049FH   A      8423# 8428
COPYPP . . . . . .  C ADDR   0499H   A      4204 4670 4771 8420#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3915 4051 4826 4842 4857 5014 5029 5044 5183 5198 5213
COUNT. . . . . . .  C ADDR   231BH   R   SEG=MAIN   5576# 5576
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   2322H   R   SEG=MAIN   5582# 5582
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 485
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1889
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1886
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 486
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   2873H   R   SEG=MAIN   6333# 6335
DCOB . . . . . . .  C ADDR   287AH   R   SEG=MAIN   6337# 6355
DCOC . . . . . . .  C ADDR   2885H   R   SEG=MAIN   6347# 6352
DCOD . . . . . . .  C ADDR   2892H   R   SEG=MAIN   6354 6357#
DDOUTF . . . . . .  C ADDR   15F8H   R   SEG=MAIN   3345 3401 3549 3557# 3642
DDOUTFR. . . . . .  C ADDR   14C1H   R   SEG=MAIN   3345# 3351
DEC30. . . . . . .  C ADDR   29E7H   R   SEG=MAIN   6746# 6771
DEC31. . . . . . .  C ADDR   29ECH   R   SEG=MAIN   6752# 6759
DEC32. . . . . . .  C ADDR   29FCH   R   SEG=MAIN   6764# 6768
DECBIN . . . . . .  C ADDR   29DAH   R   SEG=MAIN   3753 3799 3894 4407 4502 4548 6725#
DECSIZE. . . . . .  N NUMB   000AH   A      6600# 6620 6654 6681 6694 6697 6751
DECT2. . . . . . .  C ADDR   2A05H   R   SEG=MAIN   6742 6774#
DEDPTR . . . . . .  C ADDR   2C5AH   R   SEG=MAIN   7259 7263 7267 7273#
DENORM . . . . . .  C ADDR   0133H   A      7691# 7747
DGOTO7 . . . . . .  C ADDR   178AH   R   SEG=MAIN   3802# 3810
DIAP . . . . . . .  D ADDR   00AEH   A      389# 576 1399 1601 1700 1928 2336 2377 3024 4314 4698 5463 5484 5746 5761
                                           5912 5974
DIINC. . . . . . .  C ADDR   0DF6H   R   SEG=MAIN   2339 2342#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   139

DIKDN. . . . . . .  C ADDR   2519H   R   SEG=MAIN   5914 5934#
DIKDW. . . . . . .  C ADDR   2431H   R   SEG=MAIN   5750 5771#
DIKM . . . . . . .  C ADDR   2447H   R   SEG=MAIN   5782#
DIPAR. . . . . . .  C ADDR   2445H   R   SEG=MAIN   5781#
DIV1 . . . . . . .  C ADDR   02DDH   A      8028# 8087
DIV2 . . . . . . .  C ADDR   0320H   A      8046 8050 8054 8058 8073#
DIV3 . . . . . . .  C ADDR   030DH   A      8047 8051 8055 8059#
DIV9 . . . . . . .  C ADDR   0336H   A      8017 8019 8093#
DIVIDE . . . . . .  C ADDR   2AC5H   R   SEG=MAIN   6261 6960#
DONE . . . . . . .  C ADDR   2A34H   R   SEG=MAIN   6790 6801#
DONE1. . . . . . .  C ADDR   2A32H   R   SEG=MAIN   6793 6796 6799#
DOSH . . . . . . .  C ADDR   2B4EH   R   SEG=MAIN   7035 7051#
DOSUB. . . . . . .  C ADDR   2B3CH   R   SEG=MAIN   7019 7023 7027 7031 7032 7036#
DPH. . . . . . . .  D ADDR   0083H   A      19# 554 600 608 615 622 2258 2849 2914 3499 3920 3922 4056 4061 4566 4811
                                           4820 4827 4839 4844 4853 4855 4858 4869 4956 4958 4967 4976 5015 5026 5031
                                           5040 5042 5045 5056 5135 5144 5184 5195 5200 5209 5211 5214 5225 6193 6201
                                           6468 6476 6508 6807 6843 6878 6881 6893 6916 7278 7280 8354 8374 8420
DPL. . . . . . . .  D ADDR   0082H   A      18# 603 611 618 625 2257 2850 2913 3502 3916 3918 4053 4064 4567 4809
                                           4816 4830 4837 4847 4850 4852 4861 4865 4953 4955 4965 4972 5018 5024 5034
                                           5037 5039 5048 5052 5133 5140 5187 5193 5203 5206 5208 5217 5221 6194 6200
                                           6465 6479 6512 6823 6859 6880 6894 6897 6931 7275 7277 8355 8375 8421
DVIG0. . . . . . .  C ADDR   0A9AH   R   SEG=MAIN   1835# 1837
DVIG1. . . . . . .  C ADDR   0A8FH   R   SEG=MAIN   1826# 1828
DVIG2. . . . . . .  C ADDR   0A84H   R   SEG=MAIN   1817# 1819
DVIG3. . . . . . .  C ADDR   0A78H   R   SEG=MAIN   1808# 1810
DVIG4. . . . . . .  C ADDR   0AA6H   R   SEG=MAIN   1846# 1848
DVIG6. . . . . . .  C ADDR   0AC8H   R   SEG=MAIN   1874# 1876
DVM. . . . . . . .  C ADDR   0AC6H   R   SEG=MAIN   1862 1873#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 483
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 534 700 2244 2900 5328 5340
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1D9FH   R   SEG=MAIN   3013 4644#
ENDSDV . . . . . .  C ADDR   0ACCH   R   SEG=MAIN   1868 1877#
ENDSUM . . . . . .  C ADDR   059FH   R   SEG=MAIN   904 957 1060 1085#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   08BEH   R   SEG=MAIN   1499 1515#
EQU00. . . . . . .  C ADDR   08DCH   R   SEG=MAIN   1517 1522 1531#
EQU1L. . . . . . .  C ADDR   10DAH   R   SEG=MAIN   2777 2781#
EQU2L. . . . . . .  C ADDR   165EH   R   SEG=MAIN   3628 3633#
ERRA0. . . . . . .  C ADDR   1CBEH   R   SEG=MAIN   4510 4522#
ERRA01 . . . . . .  C ADDR   07F7H   R   SEG=MAIN   1418# 1463
ERROR. . . . . . .  C ADDR   2620H   R   SEG=MAIN   1425 4337 4525 5306 5320 6129#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168# 1964 2889 4600
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7534#
EXP2 . . . . . . .  N NUMB   0001H   A      7536# 7713 7734
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   551# 555
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   242AH   R   SEG=MAIN   4672 5760#
FINDKOEF . . . . .  C ADDR   241BH   R   SEG=MAIN   1337 5745#
FINDMEM. . . . . .  C ADDR   103EH   R   SEG=MAIN   2617 2687#
FINDR. . . . . . .  C ADDR   2572H   R   SEG=MAIN   1585 4304 5974#
FINIS. . . . . . .  C ADDR   2B79H   R   SEG=MAIN   6979 7080#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   140

FLADD. . . . . . .  C ADDR   0166H   A      1999 4881 4893 7739# 7828
FLCMP. . . . . . .  C ADDR   01D6H   A      1261 1359 1397 1446 1450 1462 1498 1521 1896 4509 5071 5087 5240 5255
                                           7833#
FLDIV. . . . . . .  C ADDR   02B7H   A      1284 1305 1343 1471 1490 1504 2015 2171 2209 4656 4741 4759 4908 4911
                                           5100 8003#
FLMUL. . . . . . .  C ADDR   0203H   A      1150 1250 1302 1348 1466 1527 1986 2008 2018 2024 3904 4412 4660 4745
                                           4763 7873#
FLOUT. . . . . . .  C ADDR   01E1H   A      7840 7843#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8342 8348 8399 8404
FLSUB. . . . . . .  C ADDR   01D1H   A      1242 1901 2045 2113 2167 2205 3901 5268 7826#
FND. . . . . . . .  C ADDR   01F8H   A      7849 7852 7855 7858 7861#
FO1M . . . . . . .  C ADDR   2831H   R   SEG=MAIN   6267 6271#
FO2M . . . . . . .  C ADDR   283AH   R   SEG=MAIN   6274 6276#
FORM4. . . . . . .  C ADDR   283BH   R   SEG=MAIN   6269 6275 6279#
FT1IZM . . . . . .  C ADDR   0EE3H   R   SEG=MAIN   2494#
FTOL . . . . . . .  C ADDR   0343H   A      1195 1350 1474 3905 4661 4764 4912 5101 6056 8109#
FTOL1. . . . . . .  C ADDR   037CH   A      8122 8126 8150#
FTOL2. . . . . . .  C ADDR   039EH   A      8146 8183#
FTOL22 . . . . . .  C ADDR   03C4H   A      8186 8220#
FTOL23 . . . . . .  C ADDR   03A2H   A      8187# 8219
FTOL24 . . . . . .  C ADDR   03B5H   A      8189 8205#
FTOL25 . . . . . .  C ADDR   03C2H   A      8204 8219#
FTOL26 . . . . . .  C ADDR   03E4H   A      8235 8251#
FTOL3. . . . . . .  C ADDR   038AH   A      8149 8163#
FTOL33 . . . . . .  C ADDR   038EH   A      8167# 8181
FTOL4. . . . . . .  C ADDR   0371H   A      8128 8143#
FTOL9. . . . . . .  C ADDR   0381H   A      8156# 8166 8182 8250 8265
FULKALIB . . . . .  C ADDR   1E0EH   R   SEG=MAIN   4699 4714# 4802
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   491# 492
GO23NO . . . . . .  C ADDR   15BDH   R   SEG=MAIN   3402 3525#
GO31L. . . . . . .  C ADDR   10E0H   R   SEG=MAIN   2755 2786#
GO41L. . . . . . .  C ADDR   10E5H   R   SEG=MAIN   2786 2788#
GOA2 . . . . . . .  C ADDR   0797H   R   SEG=MAIN   1363 1365 1368# 1390
GOA3A2 . . . . . .  C ADDR   07A1H   R   SEG=MAIN   1373#
GOCIKLE. . . . . .  C ADDR   0BCFH   R   SEG=MAIN   1919 2003 2032# 2039 2048
GOFULL . . . . . .  C ADDR   15F0H   R   SEG=MAIN   3531 3553#
GOGO7. . . . . . .  C ADDR   1CDCH   R   SEG=MAIN   4483 4488 4535#
GOKAA2 . . . . . .  C ADDR   07BFH   R   SEG=MAIN   1388#
GOKLB. . . . . . .  C ADDR   0DB9H   R   SEG=MAIN   2283 2305#
GOOFF1 . . . . . .  C ADDR   1524H   R   SEG=MAIN   3416# 3425
GOOFF2 . . . . . .  C ADDR   153FH   R   SEG=MAIN   3438# 3447
GOOFF3 . . . . . .  C ADDR   155AH   R   SEG=MAIN   3457# 3466
GOOFF4 . . . . . .  C ADDR   1575H   R   SEG=MAIN   3479# 3488
GOONIN . . . . . .  C ADDR   07B1H   R   SEG=MAIN   1381# 1416 1428 1608 1625
GOONIN1. . . . . .  C ADDR   0958H   R   SEG=MAIN   1604 1608#
GOONIND. . . . . .  C ADDR   0990H   R   SEG=MAIN   1384 1654#
GOONOFF. . . . . .  C ADDR   14E9H   R   SEG=MAIN   3370# 3379
GOONT. . . . . . .  C ADDR   0B58H   R   SEG=MAIN   1922 1965#
GOPAROL. . . . . .  C ADDR   1B40H   R   SEG=MAIN   4146 4290 4298#
GOPAROM. . . . . .  C ADDR   1A2AH   R   SEG=MAIN   4144# 4147
GOPART . . . . . .  C ADDR   0330H   R   SEG=MAIN   792 795#
GOSK19 . . . . . .  C ADDR   100FH   R   SEG=MAIN   2654 2661#
GOTO7. . . . . . .  C ADDR   11EEH   R   SEG=MAIN   2966# 3046 3053 3091 3140 3169 3181 3223 3227 3275 3296 3305 3311
                                           3316 3322 3337 3399 3578 3581 3595 3632 3635 3691 3704 3710 3736 3738 3779
                                           3802 3820 3875 4074 4082 4090 4251 4255 4334 4344 4378 4429 4431 4447 4459
                                           4520 4711 4722
GOTOKD . . . . . .  C ADDR   0632H   R   SEG=MAIN   1153 1177#
GOTOSTROB. . . . .  C ADDR   0B3AH   R   SEG=MAIN   1933 1936 1939 1942 1945#
GOUT6. . . . . . .  C ADDR   0D6EH   R   SEG=MAIN   2273# 2301
GOVVLIST . . . . .  C ADDR   182AH   R   SEG=MAIN   3858 3880#
GOZNAK . . . . . .  C ADDR   02E2H   R   SEG=MAIN   689 735#
HNOR11 . . . . . .  C ADDR   1342H   R   SEG=MAIN   3102 3144#
HNOR12 . . . . . .  C ADDR   12EAH   R   SEG=MAIN   3092 3096#
HNOT1. . . . . . .  C ADDR   138BH   R   SEG=MAIN   3068 3190#
HNOT2. . . . . . .  C ADDR   12B8H   R   SEG=MAIN   3065#
HR12 . . . . . . .  C ADDR   12E0H   R   SEG=MAIN   3087 3092#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   141

HVI1113. . . . . .  C ADDR   12DAH   R   SEG=MAIN   3090# 3095 3100
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 536 5280 5286 8341 8349 8398 8408
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   12B4H   R   SEG=MAIN   3060 3062#
IND. . . . . . . .  C ADDR   21DAH   R   SEG=MAIN   638 646 691 719 1426 1509 1513 1796 2314 2318 2329 2996 3233 3249
                                           3778 3994 4046 4338 4526 4719 5302 5308 5322 5328# 6490
INDOLL . . . . . .  C ADDR   094DH   R   SEG=MAIN   1599 1600 1604#
INIACP . . . . . .  C ADDR   248FH   R   SEG=MAIN   655 3209 5838#
INNOT1_2 . . . . .  C ADDR   16E1H   R   SEG=MAIN   3700 3706#
INNOT3 . . . . . .  C ADDR   16D2H   R   SEG=MAIN   3692 3697#
INNOT6 . . . . . .  C ADDR   16C6H   R   SEG=MAIN   3687 3692#
INTER2 . . . . . .  C ADDR   217DH   R   SEG=MAIN   262 5273#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 629 1965 3655 3755
INTMUL . . . . . .  C ADDR   0B7BH   R   SEG=MAIN   1980 1986#
INTMUL1. . . . . .  C ADDR   0B7EH   R   SEG=MAIN   1987#
INTMUL2. . . . . .  C ADDR   0B93H   R   SEG=MAIN   2000# 2009 2019 2025 2029
INTN . . . . . . .  C ADDR   1773H   R   SEG=MAIN   3793#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   1373H   R   SEG=MAIN   3171#
IZMAN. . . . . . .  C ADDR   0E5AH   R   SEG=MAIN   2242 2398#
IZMFUN . . . . . .  C ADDR   0E69H   R   SEG=MAIN   2330 2341 2349 2402 2405#
IZMPAT . . . . . .  C ADDR   0E6DH   R   SEG=MAIN   2299 2315 2319 2374 2409#
IZMT2. . . . . . .  C ADDR   0E7CH   R   SEG=MAIN   2425 2430#
IZMT3. . . . . . .  C ADDR   0E87H   R   SEG=MAIN   2430 2436#
JFINIS . . . . . .  C ADDR   2AE0H   R   SEG=MAIN   6971 6979#
KD . . . . . . . .  C ADDR   23A6H   R   SEG=MAIN   5648#
KEYB1. . . . . . .  C ADDR   0D3DH   R   SEG=MAIN   283 2243#
KEYB2. . . . . . .  C ADDR   1182H   R   SEG=MAIN   286 2899#
KFULL. . . . . . .  C ADDR   15C7H   R   SEG=MAIN   3338 3530#
KFULLR . . . . . .  C ADDR   14B0H   R   SEG=MAIN   3333 3338#
KGO23. . . . . . .  C ADDR   1511H   R   SEG=MAIN   3332 3405#
KLBOFF . . . . . .  C ADDR   123EH   R   SEG=MAIN   2989 3007#
KLEV1. . . . . . .  C ADDR   148AH   R   SEG=MAIN   3288 3323#
KLEV2. . . . . . .  C ADDR   148FH   R   SEG=MAIN   3323 3325#
KLEV21 . . . . . .  C ADDR   14B3H   R   SEG=MAIN   3330 3339#
KLEV22 . . . . . .  C ADDR   1499H   R   SEG=MAIN   3318 3327 3330#
KLEV23 . . . . . .  C ADDR   14C4H   R   SEG=MAIN   3339 3347#
KLEV3. . . . . . .  C ADDR   1494H   R   SEG=MAIN   3325 3327#
KLMAS. . . . . . .  C ADDR   03DDH   R   SEG=MAIN   824 891#
KNAVP. . . . . . .  C ADDR   124DH   R   SEG=MAIN   2946 3015#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1363 1600 1764 2376 2398 2399 2403
KNIZMON. . . . . .  C ADDR   0E64H   R   SEG=MAIN   2398 2403#
KNKMP. . . . . . .  C ADDR   1173H   R   SEG=MAIN   2894# 2940
KNLEFT . . . . . .  C ADDR   125DH   R   SEG=MAIN   2898 3022#
KNMEM. . . . . . .  C ADDR   13E8H   R   SEG=MAIN   2893 3243#
KNMENU . . . . . .  C ADDR   1210H   R   SEG=MAIN   2952 2986#
KNNUL. . . . . . .  C ADDR   127EH   R   SEG=MAIN   2897 3040#
KNOPT. . . . . . .  C ADDR   0E8FH   R   SEG=MAIN   2241 2444#
KNRAZR . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2240 2457#
KNRIGHT. . . . . .  C ADDR   0DECH   R   SEG=MAIN   2289 2334#
KNVICH . . . . . .  C ADDR   0E0DH   R   SEG=MAIN   2298 2352#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 594 4663 4673 4765 4773
KOEFKM . . . . . .  D ADDR   0094H   A      378# 592 1148 1248 2213
KOEFKP . . . . . .  D ADDR   0090H   A      377# 590 1145 1243 2175
KOMUL. . . . . . .  C ADDR   075BH   R   SEG=MAIN   1336 1340#
KOMULPZ. . . . . .  C ADDR   0755H   R   SEG=MAIN   1333 1337#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1458 4505 6054
KON_B. . . . . . .  C ADDR   0F6EH   R   SEG=MAIN   2550 2569#
KOR0US . . . . . .  C ADDR   22D3H   R   SEG=MAIN   2073 5517#
KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1240 2085 2165 2203
KORDEC1. . . . . .  C ADDR   0683H   R   SEG=MAIN   1223 1230#
KORDEC10 . . . . .  C ADDR   0663H   R   SEG=MAIN   1211#
KORNUL . . . . . .  C ADDR   0C09H   R   SEG=MAIN   1160 2065#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   142

KVVOD0 . . . . . .  C ADDR   15E3H   R   SEG=MAIN   3298 3539 3548#
LABEL43. . . . . .  C ADDR   1821H   R   SEG=MAIN   3876# 3884
LABEL7 . . . . . .  C ADDR   190AH   R   SEG=MAIN   3876 3999# 4011
LABELA . . . . . .  C ADDR   02A9H   R   SEG=MAIN   694# 723 2036
LABELB . . . . . .  C ADDR   0A71H   R   SEG=MAIN   1203 1628 1801# 2053 2057 2059
LABELC . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2458#
LABELE . . . . . .  C ADDR   0E6DH   R   SEG=MAIN   2407 2423# 2463 2466 2470 2474 2482
LABELF . . . . . .  C ADDR   0ECFH   R   SEG=MAIN   2239 2483#
LABELH . . . . . .  C ADDR   12A0H   R   SEG=MAIN   2896 3055#
LABELI . . . . . .  C ADDR   1C38H   R   SEG=MAIN   3071 3129 3183 4442#
LABELI2. . . . . .  C ADDR   1327H   R   SEG=MAIN   3129# 3130
LABELK . . . . . .  C ADDR   1428H   R   SEG=MAIN   3070 3277#
LABELL . . . . . .  C ADDR   109BH   R   SEG=MAIN   2616 2716 2724#
LABELL1. . . . . .  C ADDR   0FABH   R   SEG=MAIN   2607# 2680 2793 2842
LABELN . . . . . .  C ADDR   10FFH   R   SEG=MAIN   2681 2802#
LABELP . . . . . .  C ADDR   17F7H   R   SEG=MAIN   3806 3827 3858# 4092
LABELS . . . . . .  C ADDR   17BCH   R   SEG=MAIN   3535 3827#
LABELS1. . . . . .  C ADDR   1A8BH   R   SEG=MAIN   4162 4192#
LABELS13 . . . . .  C ADDR   1BBEH   R   SEG=MAIN   4233 4358#
LABELS3. . . . . .  C ADDR   1C4BH   R   SEG=MAIN   4452#
LABELS4. . . . . .  C ADDR   1C26H   R   SEG=MAIN   4232 4433#
LABL2. . . . . . .  C ADDR   10C1H   R   SEG=MAIN   2758# 3342
LABM . . . . . . .  C ADDR   1667H   R   SEG=MAIN   3343 3638#
LADD . . . . . . .  C ADDR   2C21H   R   SEG=MAIN   803 838 856 872 1884 7206#
LADDX. . . . . . .  C ADDR   2C32H   R   SEG=MAIN   7230#
LBTOF. . . . . . .  C ADDR   042DH   A      8320#
LCMP . . . . . . .  C ADDR   2A1FH   R   SEG=MAIN   5434 6298 6786#
LDC_LONG . . . . .  C ADDR   2A35H   R   SEG=MAIN   589 1335 1882 2170 2208 3050 6806#
LDC_LTEMP. . . . .  C ADDR   2A57H   R   SEG=MAIN   812 1099 1104 1109 1113 1260 1304 1342 1358 1396 1445 1449 1461
                                           1465 1489 1497 1503 1520 1526 1895 1900 1979 1984 2007 2014 2017 2023 2044
                                           2112 3900 3903 3929 4411 4508 4659 4744 4762 4910 5099 5267 5448 6461
                                           6842#
LDX_LONG . . . . .  C ADDR   2A7DH   R   SEG=MAIN   6877#
LDX_LTEMP. . . . .  C ADDR   2AA3H   R   SEG=MAIN   6915#
LEFCUR . . . . . .  C ADDR   16F2H   R   SEG=MAIN   3716# 3788 3804
LEFKL. . . . . . .  C ADDR   1267H   R   SEG=MAIN   3022 3028#
LEFMEM11 . . . . .  C ADDR   143CH   R   SEG=MAIN   3289# 3324 3326 3328
LEFT21 . . . . . .  C ADDR   1611H   R   SEG=MAIN   3574 3579#
LEFT_S . . . . . .  C ADDR   1A88H   R   SEG=MAIN   4191# 4194
LEFT_SK. . . . . .  C ADDR   1B9FH   R   SEG=MAIN   4191 4346#
LEV220 . . . . . .  C ADDR   149CH   R   SEG=MAIN   3331# 3340
LEV2GO . . . . . .  C ADDR   1125H   R   SEG=MAIN   2801 2838#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2321 2688 2726 3250 3260 3287 3550 6004
LI21 . . . . . . .  C ADDR   137DH   R   SEG=MAIN   3178 3180#
LI42_43. . . . . .  C ADDR   1890H   R   SEG=MAIN   3926# 4066
LIST_43. . . . . .  C ADDR   1914H   R   SEG=MAIN   3878 4004#
LLDI2. . . . . . .  C ADDR   0E53H   R   SEG=MAIN   2389 2393#
LLDI23 . . . . . .  C ADDR   0E47H   R   SEG=MAIN   2381 2386#
LLDI3. . . . . . .  C ADDR   0E4EH   R   SEG=MAIN   2388 2390#
LLEV2. . . . . . .  C ADDR   10EAH   R   SEG=MAIN   2757 2791#
LLMUL. . . . . . .  C ADDR   2B8AH   R   SEG=MAIN   7100#
LLSUB. . . . . . .  C ADDR   2C0FH   R   SEG=MAIN   7182#
LLTOF. . . . . . .  C ADDR   0432H   A      8326#
LMUL . . . . . . .  C ADDR   2B8AH   R   SEG=MAIN   6256 6462 7102#
LOA3_X . . . . . .  C ADDR   296AH   R   SEG=MAIN   1925 6526#
LOAB12 . . . . . .  C ADDR   24DEH   R   SEG=MAIN   3207 5879#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2447 2488 3058 3203 5540
LOADB. . . . . . .  C ADDR   139EH   R   SEG=MAIN   3198 3201# 3234 3240
LOADB2 . . . . . .  C ADDR   13CAH   R   SEG=MAIN   3221 3225#
LOADCLE. . . . . .  C ADDR   145AH   R   SEG=MAIN   3303# 3542
LOADKD . . . . . .  C ADDR   24FBH   R   SEG=MAIN   5912#
LOADR2 . . . . . .  C ADDR   24EDH   R   SEG=MAIN   3800 3895 4408 4503 4549 5895#
LOADT. . . . . . .  C ADDR   22EEH   R   SEG=MAIN   2449 2494 3064 5540#
LOADUS . . . . . .  C ADDR   228DH   R   SEG=MAIN   656 1407 1615 2348 2404 3004 3008 3037 3210 4801 5461#
LOAHL_R2 . . . . .  C ADDR   1F9DH   R   SEG=MAIN   4876 4888 4939# 5067 5083 5236 5251
LOBLOK . . . . . .  C ADDR   161CH   R   SEG=MAIN   3528 3586# 3605
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   143

LOCLE. . . . . . .  C ADDR   1455H   R   SEG=MAIN   3292 3301#
LOD1 . . . . . . .  C ADDR   22FDH   R   SEG=MAIN   5548# 5553
LODT . . . . . . .  C ADDR   230CH   R   SEG=MAIN   5561# 5566
LOIZMK . . . . . .  C ADDR   12EDH   R   SEG=MAIN   3097# 3134
LOKAME1. . . . . .  C ADDR   19DDH   R   SEG=MAIN   4106#
LOLEVT . . . . . .  C ADDR   22F0H   R   SEG=MAIN   2327 5541#
LOLIST . . . . . .  C ADDR   1449H   R   SEG=MAIN   3294#
LOME1. . . . . . .  C ADDR   1D53H   R   SEG=MAIN   4611# 4615 4618 4621 4624 4628 4631 4634 4637 4641
LOMENU . . . . . .  C ADDR   1D4BH   R   SEG=MAIN   2631 2644 4106 4149 4172 4608#
LOOP . . . . . . .  C ADDR   2249H   R   SEG=MAIN   5397# 5398
LOOPS. . . . . . .  C ADDR   2AE3H   R   SEG=MAIN   6981# 7014
LOSPUS . . . . . .  C ADDR   22C7H   R   SEG=MAIN   2074 5500#
LOSTAT . . . . . .  C ADDR   1471H   R   SEG=MAIN   3307 3313#
LOTEXT . . . . . .  C ADDR   2308H   R   SEG=MAIN   1508 1512 1606 2367 2525 2533 2541 2656 2662 2696 2705 2713 2722
                                           2730 2994 3090 3160 3245 3295 3304 3310 3315 3321 3336 3554 3587 3599 3654
                                           3776 3844 3868 4035 4071 4079 4087 4101 4123 4129 4168 4301 4348 4353 4516
                                           4611 4718 5558# 6130
LOTP . . . . . . .  C ADDR   2551H   R   SEG=MAIN   5953# 5963 5966
LOTPUS . . . . . .  C ADDR   2549H   R   SEG=MAIN   4180 5495 5950#
LOU. . . . . . . .  C ADDR   0E59H   R   SEG=MAIN   2376 2392 2396#
LOUIZM . . . . . .  C ADDR   0E36H   R   SEG=MAIN   2376# 2401 5492
LOUTF. . . . . . .  C ADDR   10DDH   R   SEG=MAIN   2783# 2792 2799
LOVICH . . . . . .  C ADDR   12E3H   R   SEG=MAIN   3093# 3127 3148 4562
LOWR . . . . . . .  C ADDR   1463H   R   SEG=MAIN   3301 3307#
LOWR1. . . . . . .  C ADDR   1468H   R   SEG=MAIN   3309# 3546
LSUB . . . . . . .  C ADDR   2C0FH   R   SEG=MAIN   1200 1376 5449 7183#
LTEMP. . . . . . .  N NUMB   0008H   A      1116 1118 1119 1120 5785 5786 5787 5788 6308 6311 6314 6317 6360 6361
                                           6362 6363 6598# 6972 6973 6974 6975 6984 6988 6992 6996 6999 7000 7001
                                           7002 7003 7004 7005 7006 7007 7008 7009 7010 7013 7016 7021 7025 7029 7039
                                           7042 7045 7048 7064 7067 7068 7070 7071 7073 7074 7076 7081 7082 7083 7084
                                           7104 7109 7117 7125 7130 7141 7149 7155 7163 7169 7537 7538 7577 7582 7584
                                           7593 7594 7595 7596 7827 7835 7848 7851 7854 7857 8437 8440 8443 8446
LWR. . . . . . . .  C ADDR   280CH   R   SEG=MAIN   6247# 6251
LWRX . . . . . . .  C ADDR   27D0H   R   SEG=MAIN   6192# 6204
LWTOF. . . . . . .  C ADDR   042FH   A      8322#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   2827H   R   SEG=MAIN   1676 3932 4913 5103 6255 6260 6265# 6297
MAIN . . . . . . .  C SEG    2C6CH       REL=UNIT   237 294# 455
MANT1. . . . . . .  N NUMB   0002H   A      7535# 7562 7611 7612
MANT2. . . . . . .  N NUMB   0008H   A      7537# 7588 7589 7720 7722 7723 7725 7726 7728 7729 7731 7770 7771 7773
                                           7774 7776 7777 7779 7780 7784 7786 7789 7792 7890 7892 7893 7895 7896 7898
                                           7899 7901 7952 7954 7955 7957 7958 7960 7961 7963 8045 8049 8053 8057 8061
                                           8064 8067 8070
MARK0_8. . . . . .  C ADDR   0F75H   R   SEG=MAIN   2552 2570 2572#
MARKER . . . . . .  D ADDR   00B2H   A      393# 567 2265 2512 2551 2561 2569 2579 2585 2765 2773 2809 2816 2828 2920
                                           3138 3155 3176 3269 3396 3507 3562 3570 3591 3617 3624 3682 3722 3729 3769
                                           3812 3870 3886 4009 4150 4238 4245 4329 4342 4365 4372 4419 4452 4471 4478
                                           4512 4522 4533 4558 5981 6007 6033 6044 6102
MARLE. . . . . . .  C ADDR   25C5H   R   SEG=MAIN   3737 6030#
MARRI. . . . . . .  C ADDR   25D2H   R   SEG=MAIN   2836 6043#
MAS10. . . . . . .  C ADDR   03FCH   R   SEG=MAIN   893 906#
MAS20. . . . . . .  C ADDR   047CH   R   SEG=MAIN   906 961#
MAS4 . . . . . . .  C ADDR   0570H   R   SEG=MAIN   959 1062#
MAS5DIV. . . . . .  C ADDR   05E4H   R   SEG=MAIN   1100 1105 1110 1114 1122#
MASFULL. . . . . .  C ADDR   05ABH   R   SEG=MAIN   1089 1093#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 894 899 928 936 1010 1018 1067 1074 6234
MASS1. . . . . . .  X ADDR   0104H   A      419# 902 925 939 1007 1021 1065 1077
MASS10 . . . . . .  X ADDR   0128H   A      428# 983 1040
MASS11 . . . . . .  X ADDR   012CH   A      429# 980 1042
MASS12 . . . . . .  X ADDR   0130H   A      430# 977 1044
MASS13 . . . . . .  X ADDR   0134H   A      431# 974 1046
MASS14 . . . . . .  X ADDR   0138H   A      432# 971 1048
MASS15 . . . . . .  X ADDR   013CH   A      433# 968 1050
MASS16 . . . . . .  X ADDR   0140H   A      434# 966 1052
MASS17 . . . . . .  X ADDR   0144H   A      435# 964 1054
MASS18 . . . . . .  X ADDR   0148H   A      436# 962 1056
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   144

MASS19 . . . . . .  X ADDR   014CH   A      437# 1058
MASS2. . . . . . .  X ADDR   0108H   A      420# 922 941 1004 1023 1063 1079
MASS3. . . . . . .  X ADDR   010CH   A      421# 919 943 1001 1025 1081
MASS4. . . . . . .  X ADDR   0110H   A      422# 916 945 998 1027
MASS5. . . . . . .  X ADDR   0114H   A      423# 913 947 995 1029
MASS6. . . . . . .  X ADDR   0118H   A      424# 911 949 993 1031
MASS7. . . . . . .  X ADDR   011CH   A      425# 909 951 991 1033
MASS8. . . . . . .  X ADDR   0120H   A      426# 907 953 989 1035
MASS9. . . . . . .  X ADDR   0124H   A      427# 955 986 1037
MASX5. . . . . . .  C ADDR   05DAH   R   SEG=MAIN   1091 1116#
MAXG . . . . . . .  C ADDR   20FCH   R   SEG=MAIN   5192# 5246
MAXVIX . . . . . .  C ADDR   2166H   R   SEG=MAIN   5256 5261#
ME11_15DE. . . . .  C ADDR   17B3H   R   SEG=MAIN   3822# 3841
ME11_15DEC . . . .  C ADDR   19DCH   R   SEG=MAIN   3822 4105#
ME21_22. . . . . .  C ADDR   10A5H   R   SEG=MAIN   2730# 2739
ME21_23. . . . . .  C ADDR   1A46H   R   SEG=MAIN   3855 4158#
ME21_23DEC . . . .  C ADDR   1A62H   R   SEG=MAIN   4165 4170#
MEAVP. . . . . . .  C ADDR   1258H   R   SEG=MAIN   3016 3019#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   540# 542
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   544# 547
MEM10MS. . . . . .  C ADDR   02A4H   R   SEG=MAIN   691#
MEM12NO. . . . . .  C ADDR   15DEH   R   SEG=MAIN   3540 3544#
MENG . . . . . . .  C ADDR   1EE9H   R   SEG=MAIN   4836# 4886
MENU12 . . . . . .  C ADDR   1D57H   R   SEG=MAIN   4609 4613#
MENU13 . . . . . .  C ADDR   1D5FH   R   SEG=MAIN   4613 4616#
MENU14 . . . . . .  C ADDR   1D67H   R   SEG=MAIN   4616 4619#
MENU15 . . . . . .  C ADDR   1D6FH   R   SEG=MAIN   4619 4622#
MENU21 . . . . . .  C ADDR   1D77H   R   SEG=MAIN   4622 4626#
MENU22 . . . . . .  C ADDR   1D7FH   R   SEG=MAIN   4626 4629#
MENU23 . . . . . .  C ADDR   1D87H   R   SEG=MAIN   4629 4632#
MENU31 . . . . . .  C ADDR   1D8FH   R   SEG=MAIN   4632 4635#
MENU41 . . . . . .  C ADDR   1D97H   R   SEG=MAIN   4635 4639#
MENUOFF. . . . . .  C ADDR   1232H   R   SEG=MAIN   2987 3000#
MENUON . . . . . .  C ADDR   17E9H   R   SEG=MAIN   3846#
MERR . . . . . . .  C ADDR   120DH   R   SEG=MAIN   2983# 2986
ME_14. . . . . . .  C ADDR   147CH   R   SEG=MAIN   3318#
ME_41. . . . . . .  C ADDR   1B03H   R   SEG=MAIN   4192 4259#
ME_52. . . . . . .  C ADDR   1AD7H   R   SEG=MAIN   4235# 4259
ME_52V . . . . . .  C ADDR   1AF4H   R   SEG=MAIN   4249 4251#
MIDL . . . . . . .  C ADDR   2B16H   R   SEG=MAIN   6976 7011#
MIGN . . . . . . .  C ADDR   2602H   R   SEG=MAIN   5329 6102#
MIGNN. . . . . . .  C ADDR   260AH   R   SEG=MAIN   6104 6109#
MIN4_HL. . . . . .  C ADDR   1FA9H   R   SEG=MAIN   4952# 4985 5011 5154 5180
MING . . . . . . .  C ADDR   2007H   R   SEG=MAIN   5023# 5077
MINIVIX. . . . . .  C ADDR   2071H   R   SEG=MAIN   5088 5093# 5261
MLABL2 . . . . . .  C ADDR   1647H   R   SEG=MAIN   3555 3609# 3640 3879
MLABL2R. . . . . .  C ADDR   1827H   R   SEG=MAIN   3879# 3882
MMM. . . . . . . .  C ADDR   029FH   R   SEG=MAIN   687#
MO220. . . . . . .  C ADDR   0942H   R   SEG=MAIN   1215 1386 1599#
MO500I . . . . . .  C ADDR   08B2H   R   SEG=MAIN   1451 1511#
MO500R . . . . . .  C ADDR   08A6H   R   SEG=MAIN   1447 1507#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   1038H   R   SEG=MAIN   2682# 2693 2702 2710 2719
MOUTKMEM . . . . .  C ADDR   17B6H   R   SEG=MAIN   3823# 3831
MOVE28 . . . . . .  C ADDR   2894H   R   SEG=MAIN   1279 1297 1344 1453 2168 2206 4653 4736 4754 4878 4890 4905 5066
                                           5082 5235 5250 6360#
MOVE82 . . . . . .  C ADDR   244DH   R   SEG=MAIN   5785#
MOVEA3 . . . . . .  C ADDR   0990H   R   SEG=MAIN   1657#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2553 2781 2821 3157 3527 3571 3579 3633 3685 3730 3873 4153 4248
                                           4331 4375 4453 4481 6037
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2549 2774 2778 2817 3158 3526 3575 3625 3629 3684 3734 3872 4152
                                           4332 4457 6046
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7887# 7930
MUP11. . . . . . .  C ADDR   0257H   A      7934# 7979
MUP2 . . . . . . .  C ADDR   0297H   A      7964 7978#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   145

MUP3 . . . . . . .  C ADDR   026CH   A      7933 7949#
MVV11. . . . . . .  C ADDR   1617H   R   SEG=MAIN   3551 3584#
MVV12. . . . . . .  C ADDR   162FH   R   SEG=MAIN   3584 3596#
N12DELCH . . . . .  C ADDR   0D2AH   R   SEG=MAIN   2224 2232#
N4DELCH. . . . . .  C ADDR   0CD6H   R   SEG=MAIN   2148 2186#
N8DELCH. . . . . .  C ADDR   0D18H   R   SEG=MAIN   2186 2224#
NBIMENU. . . . . .  C ADDR   103EH   R   SEG=MAIN   2686#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 627 1930 3359 3495 3588 3652 3866 3957 6452 6473 6504
NE05 . . . . . . .  C ADDR   0358H   A      8116 8118 8120 8123#
NELEM. . . . . . .  D ADDR   0037H   A      312# 628 3897 4014 4018
NEXIN. . . . . . .  C ADDR   21E4H   R   SEG=MAIN   5332# 5339
NEXTMAX. . . . . .  C ADDR   2131H   R   SEG=MAIN   5224 5232#
NEXTMEA. . . . . .  C ADDR   1F1EH   R   SEG=MAIN   4868 4876#
NEXTMIN. . . . . .  C ADDR   203CH   R   SEG=MAIN   5055 5063#
NMEM_MENU. . . . .  C ADDR   17B9H   R   SEG=MAIN   3825# 3829
NMINUS . . . . . .  C ADDR   06A0H   R   SEG=MAIN   1245 1249#
NMINUS3. . . . . .  C ADDR   0604H   R   SEG=MAIN   1147 1149#
NNDELCH. . . . . .  C ADDR   0C96H   R   SEG=MAIN   2133 2148#
NNMEMB . . . . . .  C ADDR   1131H   R   SEG=MAIN   2684 2844#
NNNUL. . . . . . .  C ADDR   0A0DH   R   SEG=MAIN   1739 1742#
NO . . . . . . . .  C ADDR   2AFEH   R   SEG=MAIN   6986 6990 6994 6998#
NO0KEY . . . . . .  C ADDR   02B6H   R   SEG=MAIN   697 699 703#
NO10MSV. . . . . .  C ADDR   175AH   R   SEG=MAIN   3774 3780#
NO11V6 . . . . . .  C ADDR   0F27H   R   SEG=MAIN   2520 2528#
NO12V6 . . . . . .  C ADDR   0F3AH   R   SEG=MAIN   2528 2536#
NO13V6 . . . . . .  C ADDR   0F4DH   R   SEG=MAIN   2536 2546#
NO21P7 . . . . . .  C ADDR   1CE3H   R   SEG=MAIN   4491 4540#
NO23RI . . . . . .  C ADDR   0FEFH   R   SEG=MAIN   2642 2646#
NO2MSV . . . . . .  C ADDR   1757H   R   SEG=MAIN   3779# 3780 3790
NO2PARN. . . . . .  C ADDR   0985H   R   SEG=MAIN   1640 1646#
NO31N. . . . . . .  C ADDR   1711H   R   SEG=MAIN   3743#
NO31RI . . . . . .  C ADDR   1020H   R   SEG=MAIN   2648 2672#
NO3PARN. . . . . .  C ADDR   097BH   R   SEG=MAIN   1640# 1720
NO4DEL . . . . . .  C ADDR   0C3CH   R   SEG=MAIN   2078 2096#
NO5DEL . . . . . .  C ADDR   0C5BH   R   SEG=MAIN   2111# 2119
NO6DEL . . . . . .  C ADDR   0C69H   R   SEG=MAIN   2109 2117#
NOAVK. . . . . . .  C ADDR   0672H   R   SEG=MAIN   1171 1220# 2126
NOAVP. . . . . . .  C ADDR   0797H   R   SEG=MAIN   1367# 1398 1401
NOBAVP . . . . . .  C ADDR   0A29H   R   SEG=MAIN   1510 1514 1594 1758 1762#
NOBEF99. . . . . .  C ADDR   036DH   R   SEG=MAIN   809 825# 844 862 878
NOBIT. . . . . . .  C ADDR   0245H   A      7902 7916#
NOBITIZM . . . . .  C ADDR   0A32H   R   SEG=MAIN   1764 1767#
NOBL21 . . . . . .  C ADDR   10AEH   R   SEG=MAIN   2727 2735#
NOBL22 . . . . . .  C ADDR   10B8H   R   SEG=MAIN   2735 2755#
NOBUF. . . . . . .  C ADDR   0A67H   R   SEG=MAIN   1794 1796#
NOBUF0 . . . . . .  C ADDR   0BDFH   R   SEG=MAIN   1920 2041#
NOCHI0 . . . . . .  C ADDR   0977H   R   SEG=MAIN   1387 1627#
NOCHIND. . . . . .  C ADDR   02D5H   R   SEG=MAIN   717 725#
NOCHN10. . . . . .  C ADDR   05C7H   R   SEG=MAIN   1102 1107#
NOCHN2 . . . . . .  C ADDR   05BCH   R   SEG=MAIN   1097 1102#
NOCHN20. . . . . .  C ADDR   05D2H   R   SEG=MAIN   1107 1112#
NODI2. . . . . . .  C ADDR   095BH   R   SEG=MAIN   1602 1610#
NODI6. . . . . . .  C ADDR   1269H   R   SEG=MAIN   3026 3030#
NODI8. . . . . . .  C ADDR   09E1H   R   SEG=MAIN   1703 1710#
NODI8K . . . . . .  C ADDR   1B73H   R   SEG=MAIN   4317 4322#
NODI8_43 . . . . .  C ADDR   18EDH   R   SEG=MAIN   3971 3977#
NODI9. . . . . . .  C ADDR   0960H   R   SEG=MAIN   1612 1615#
NODI9_43 . . . . .  C ADDR   18F8H   R   SEG=MAIN   3977 3985#
NODIS9 . . . . . .  C ADDR   09F3H   R   SEG=MAIN   1710 1722#
NODISK9. . . . . .  C ADDR   1B7BH   R   SEG=MAIN   4321 4322 4329#
NOENDLI. . . . . .  C ADDR   2936H   R   SEG=MAIN   6487 6491#
NOEQU1 . . . . . .  C ADDR   1116H   R   SEG=MAIN   2820 2824#
NOEQU2 . . . . . .  C ADDR   170BH   R   SEG=MAIN   3733 3737#
NOFIZM . . . . . .  C ADDR   0F09H   R   SEG=MAIN   2484 2516#
NOFT1. . . . . . .  C ADDR   0EE2H   R   SEG=MAIN   2489 2493#
NOFZ . . . . . . .  C ADDR   0BDAH   R   SEG=MAIN   2032 2036#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   146

NOH37. . . . . . .  C ADDR   1302H   R   SEG=MAIN   3086 3110# 3121
NOHNOT1. . . . . .  C ADDR   13DDH   R   SEG=MAIN   3192 3235#
NOHNOT2. . . . . .  C ADDR   13D2H   R   SEG=MAIN   3228# 3235
NOKLB. . . . . . .  C ADDR   0A61H   R   SEG=MAIN   1792 1794#
NOKORR . . . . . .  C ADDR   061AH   R   SEG=MAIN   1158 1161#
NOLAH. . . . . . .  C ADDR   12C4H   R   SEG=MAIN   3055 3073#
NOLI_43. . . . . .  C ADDR   1968H   R   SEG=MAIN   4004 4049#
NOM31. . . . . . .  C ADDR   16E9H   R   SEG=MAIN   3637 3712#
NOM32. . . . . . .  C ADDR   1762H   R   SEG=MAIN   3712 3786#
NOM33. . . . . . .  C ADDR   1790H   R   SEG=MAIN   3786 3806#
NOMARL . . . . . .  C ADDR   1C60H   R   SEG=MAIN   4455 4461 4465#
NOMAXI . . . . . .  C ADDR   2149H   R   SEG=MAIN   5241 5244#
NOME11 . . . . . .  C ADDR   15CEH   R   SEG=MAIN   3537#
NOMEM11. . . . . .  C ADDR   1059H   R   SEG=MAIN   2689 2699#
NOMEM12. . . . . .  C ADDR   106FH   R   SEG=MAIN   2699 2707#
NOMEM13. . . . . .  C ADDR   1085H   R   SEG=MAIN   2707 2716#
NOMEMK . . . . . .  C ADDR   15CBH   R   SEG=MAIN   3258 3534#
NOMINI . . . . . .  C ADDR   2054H   R   SEG=MAIN   5072 5075#
NON1C. . . . . . .  C ADDR   0EB5H   R   SEG=MAIN   2464 2468#
NONULAVT . . . . .  C ADDR   0657H   R   SEG=MAIN   1166 1205#
NONULDEL . . . . .  C ADDR   0C1EH   R   SEG=MAIN   2066 2077#
NOP3_0 . . . . . .  C ADDR   097BH   R   SEG=MAIN   1633#
NOPART1. . . . . .  C ADDR   0371H   R   SEG=MAIN   798 832#
NOPART2. . . . . .  C ADDR   0391H   R   SEG=MAIN   832 851#
NOPART3. . . . . .  C ADDR   03B1H   R   SEG=MAIN   851 867#
NOPART4. . . . . .  C ADDR   03D1H   R   SEG=MAIN   867 884#
NOPLUS . . . . . .  C ADDR   0F9DH   R   SEG=MAIN   2597 2600#
NOPOIN7. . . . . .  C ADDR   1C77H   R   SEG=MAIN   4451 4486#
NOPOINT. . . . . .  C ADDR   1C43H   R   SEG=MAIN   4445 4449#
NORDN. . . . . . .  C ADDR   00F6H   A      7623# 7656
NORDN1 . . . . . .  C ADDR   0107H   A      7625 7639#
NORIG2 . . . . . .  C ADDR   10F3H   R   SEG=MAIN   2788 2796#
NORIM6 . . . . . .  C ADDR   1131H   R   SEG=MAIN   2848#
NORIME . . . . . .  C ADDR   0FD5H   R   SEG=MAIN   2629 2633#
NORIME1. . . . . .  C ADDR   0FCFH   R   SEG=MAIN   2631# 2634 2647
NORM1. . . . . . .  C ADDR   00F0H   A      7618# 7815 7992 8094 8311
NORR11 . . . . . .  C ADDR   131AH   R   SEG=MAIN   3123#
NORR12 . . . . . .  C ADDR   132AH   R   SEG=MAIN   3123 3130# 3144
NORUP. . . . . . .  C ADDR   0119H   A      7622 7659#
NORUP1 . . . . . .  C ADDR   011EH   A      7664# 7682
NORUP2 . . . . . .  C ADDR   0132H   A      7666 7683#
NORVICH. . . . . .  C ADDR   0A6AH   R   SEG=MAIN   1719 1797#
NOSAV1 . . . . . .  C ADDR   0B28H   R   SEG=MAIN   1931 1934#
NOSAV2 . . . . . .  C ADDR   0B2FH   R   SEG=MAIN   1934 1937#
NOSAV3 . . . . . .  C ADDR   0B36H   R   SEG=MAIN   1937 1940#
NOSUB. . . . . . .  C ADDR   2B39H   R   SEG=MAIN   7020 7024 7028 7033#
NOT1IN . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   1870 2051#
NOT1_7 . . . . . .  C ADDR   11FDH   R   SEG=MAIN   2968 2975#
NOT2IN . . . . . .  C ADDR   0BFCH   R   SEG=MAIN   2051 2055#
NOT2_7 . . . . . .  C ADDR   1208H   R   SEG=MAIN   2975 2980#
NOT3IN . . . . . .  C ADDR   0C04H   R   SEG=MAIN   2055 2058#
NOTAKT . . . . . .  C ADDR   0A3CH   R   SEG=MAIN   1768 1772#
NOTE21 . . . . . .  C ADDR   0717H   R   SEG=MAIN   1266 1308#
NOTE22 . . . . . .  C ADDR   0732H   R   SEG=MAIN   1308 1320#
NOTESTIZM. . . . .  C ADDR   074AH   R   SEG=MAIN   1229 1332#
NOTT1. . . . . . .  C ADDR   0B72H   R   SEG=MAIN   1977 1982#
NOTT2. . . . . . .  C ADDR   0B9AH   R   SEG=MAIN   1982 2005#
NOTT3. . . . . . .  C ADDR   0BA8H   R   SEG=MAIN   2005 2012#
NOTT4. . . . . . .  C ADDR   0BBFH   R   SEG=MAIN   2012 2021#
NOTT5. . . . . . .  C ADDR   0BCDH   R   SEG=MAIN   2021 2026#
NOT_1. . . . . . .  C ADDR   0EBCH   R   SEG=MAIN   2468 2473#
NOT_10 . . . . . .  C ADDR   0EBCH   R   SEG=MAIN   2472#
NOVIR. . . . . . .  C ADDR   0FB7H   R   SEG=MAIN   2505 2618#
NOVIR1 . . . . . .  C ADDR   0EF3H   R   SEG=MAIN   2505# 2516
NOZMEA . . . . . .  C ADDR   1F99H   R   SEG=MAIN   4933 4935#
NOZMIN . . . . . .  C ADDR   20A8H   R   SEG=MAIN   5123 5125#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   147

NOZZBL . . . . . .  C ADDR   18DFH   R   SEG=MAIN   3960 3963 3966 3969#
NOZZMI . . . . . .  C ADDR   09CEH   R   SEG=MAIN   1698 1700#
NOZZMI1. . . . . .  C ADDR   18CFH   R   SEG=MAIN   3958 3961#
NOZZMI2. . . . . .  C ADDR   18D6H   R   SEG=MAIN   3961 3964#
NOZZMI3. . . . . .  C ADDR   18DDH   R   SEG=MAIN   3964 3967#
NOZZMI43 . . . . .  C ADDR   18C6H   R   SEG=MAIN   3955 3957#
NSEC1. . . . . . .  C ADDR   0A16H   R   SEG=MAIN   1743 1746#
NSEC10 . . . . . .  C ADDR   0A1FH   R   SEG=MAIN   1745 1748 1753#
NSEC11 . . . . . .  C ADDR   0A1DH   R   SEG=MAIN   1746 1750#
NUERR. . . . . . .  D ADDR   0039H   A      310# 1424 4336 4524 5305 5319 6131
NULAVT . . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2131#
NUMSIZE. . . . . .  N NUMB   0004H   A      6601# 6623 6661 6668 6743 6763
OBOARD . . . . . .  C ADDR   2A6FH   R   SEG=MAIN   6844 6858#
OBOARD1. . . . . .  C ADDR   2AB7H   R   SEG=MAIN   6917 6930#
OFFMENUM . . . . .  C ADDR   1425H   R   SEG=MAIN   3274# 3283
OK1. . . . . . . .  C ADDR   0186H   A      7749 7764#
OK2. . . . . . . .  C ADDR   01A0H   A      7766 7781#
OK3. . . . . . . .  C ADDR   01C4H   A      7798 7814#
OLDMAX . . . . . .  C ADDR   20C8H   R   SEG=MAIN   5143 5149#
OLDMEAN. . . . . .  C ADDR   1ED4H   R   SEG=MAIN   4819 4825#
OLDMIN . . . . . .  C ADDR   1FD3H   R   SEG=MAIN   4975 4981#
ONBOAR1. . . . . .  C ADDR   2A95H   R   SEG=MAIN   6879 6896#
ONBOARD. . . . . .  C ADDR   2A49H   R   SEG=MAIN   6808 6822#
ONMEM11. . . . . .  C ADDR   13FFH   R   SEG=MAIN   2999 3018 3020 3252# 3845 3851 4103 4107 4112 4127 4132 4155 4169
                                           4173 4184
ONMEM12. . . . . .  C ADDR   1A69H   R   SEG=MAIN   4174# 4177 4196
ONMEM13. . . . . .  C ADDR   1C23H   R   SEG=MAIN   4376 4431# 4435 4437
ONMIG. . . . . . .  C ADDR   2618H   R   SEG=MAIN   6113 6122#
ONVICH . . . . . .  C ADDR   0E2EH   R   SEG=MAIN   2359 2371#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 494
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 487 491
OUT43. . . . . . .  C ADDR   1901H   R   SEG=MAIN   3994#
OUT6 . . . . . . .  C ADDR   1131H   R   SEG=MAIN   2238 2305 2351 2429 2434 2439 2455 2491 2496 2503 2514 2632 2645
                                           2660 2666 2849#
OUT7 . . . . . . .  C ADDR   1D0CH   R   SEG=MAIN   2894 2895 2972 2979 2983 3005 3011 3061 3066 3117 3256 3344 3602
                                           3696 3825 3996 4003 4048 4142 4230 4351 4356 4426 4440 4535 4537 4565#
OUTA . . . . . . .  C ADDR   25DFH   R   SEG=MAIN   3162 6054#
OUTA2. . . . . . .  C ADDR   25F9H   R   SEG=MAIN   6065# 6070
OUTF . . . . . . .  C ADDR   0EE9H   R   SEG=MAIN   2499# 2522 2526 2530 2534 2538 2542 2567 2590 2599 2602 2609 2682
                                           2697 2706 2714 2723 2733 2780 2783 2823 2837 2840 3107 3108 4174
OUTFL. . . . . . .  C ADDR   0FAEH   R   SEG=MAIN   2605 2609#
OUTKMEM. . . . . .  C ADDR   140CH   R   SEG=MAIN   3260# 3286 3823
OUTMA. . . . . . .  C ADDR   0F87H   R   SEG=MAIN   2588 2590#
OUTMAX . . . . . .  C ADDR   214EH   R   SEG=MAIN   5129 5228 5247#
OUTMEA . . . . . .  C ADDR   1F39H   R   SEG=MAIN   4823 4872 4887#
OUTMENU. . . . . .  C ADDR   1A25H   R   SEG=MAIN   4141#
OUTMIN . . . . . .  C ADDR   2059H   R   SEG=MAIN   4961 5059 5079#
OUTR . . . . . . .  C ADDR   0909H   R   SEG=MAIN   1540 1563#
OUTR5. . . . . . .  C ADDR   0925H   R   SEG=MAIN   1561 1582#
OUTSKO . . . . . .  C ADDR   1ACAH   R   SEG=MAIN   4226 4228#
OUTSKO1. . . . . .  C ADDR   1AC7H   R   SEG=MAIN   4224 4227#
OUTVICH. . . . . .  C ADDR   0EF6H   R   SEG=MAIN   2506# 2518
OUTVIR . . . . . .  C ADDR   0DB2H   R   SEG=MAIN   2272 2301#
OUT_KALI . . . . .  C ADDR   1E1BH   R   SEG=MAIN   4720#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6800
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5332 5336
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 465
P1 . . . . . . . .  D ADDR   0090H   A      32# 659 660 5345 5347 5350 5353 5357 5359 5360 5412 5414 5416 5852 5859
                                           6390 6393 6395 6398
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 466
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5378 5382 5391
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 467
P3 . . . . . . . .  D ADDR   00B0H   A      62# 476 2271 2273 2275 2276 2279 2280 2284 2285 2287 2288 2290 2291 2293
                                           2294 2296 2297 2478 2479 2485 2486 2517 2518 2521 2522 2529 2530 2537 2538
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   148

                                           2546 2547 2592 2593 2603 2604 2626 2627 2640 2641 2651 2652 2676 2677 2678
                                           2679 2691 2692 2700 2701 2708 2709 2717 2718 2756 2757 2791 2792 2800 2801
                                           2838 2839 2869 2927 2929 2931 2932 2935 2936 2938 2939 2941 2942 2944 2945
                                           2947 2948 2950 2951 3056 3059 3085 3086 3110 3111 3124 3125 3131 3132 3145
                                           3146 3190 3191 3282 3283 3285 3286 3289 3290 3331 3332 3348 3349 3350 3351
                                           3405 3406 3537 3538 3548 3549 3639 3640 3641 3642 3713 3714 3743 3744 3787
                                           3788 3789 3790 3807 3808 3809 3810 3828 3829 3830 3831 3838 3839 3881 3882
                                           3883 3884 4005 4006 4094 4095 4163 4164 4176 4177 4193 4194 4195 4196 4236
                                           4237 4253 4254 4260 4261 4262 4263 4434 4435 4436 4437 4443 4444 4449 4450
                                           4486 4487 4579 5377 5379 5381 5387 5388 5389 5392 5393
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2245 2868 2901 4578
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 469
P4 . . . . . . . .  D ADDR   0084H   A      20# 2068 2089 2134 2217 2383 2385 4706 5470 5473 5489 5491 5955
P5 . . . . . . . .  D ADDR   0085H   A      21# 573 582 2070 2091 2136 2139 2144 2179 2181 2219 2393 2395 4710 5478
                                           5481 5511 5514 5959
P6 . . . . . . . .  D ADDR   0086H   A      22# 1946 1948 1952 1954 2871 2873 2877 2879 4582 4584 4588 4590
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 470
PACK1. . . . . . .  C ADDR   00DEH   A      7601# 7816 7993 8095 8312
PARERR . . . . . .  C ADDR   1B88H   R   SEG=MAIN   4292 4294 4296 4336#
PARN . . . . . . .  D ADDR   00AFH   A      390# 579 1733 2459 3218
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 574 796 1136 1178 1205 1220 1742 1798 1976 2108 2353 2423 2460 2966
                                           3201 3217 3686 3773 5482 5879
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215 519
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 518
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 517
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 516 1956 1958 2881 2883 4592 4594 5274 5276
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 463
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 464 515
PCON . . . . . . .  D ADDR   0087H   A      23# 510
POIN3. . . . . . .  C ADDR   1C76H   R   SEG=MAIN   4484# 4538
POINA. . . . . . .  C ADDR   1CDEH   R   SEG=MAIN   4482 4537#
POINA1 . . . . . .  C ADDR   1C5BH   R   SEG=MAIN   4454 4461#
POINA2 . . . . . .  C ADDR   1C55H   R   SEG=MAIN   4457# 4462
POZB . . . . . . .  C ADDR   1D01H   R   SEG=MAIN   4551 4555#
PROD . . . . . . .  N NUMB   000CH   A      7538# 7882 7883 7884 7885 7905 7906 7907 7909 7910 7912 7913 7915 7937
                                           7939 7940 7942 7943 7945 7946 7948 7967 7968 7969 7971 7972 7974 7975 7977
                                           7988 7989 7990 7991 8012 8013 8014 8015 8031 8033 8034 8036 8037 8039 8040
                                           8042 8072 8089 8090 8091 8092
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8343 8347 8400 8403
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2248 2859 2904 4576 6299 6301 7273
                                           7281
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0DBCH   R   SEG=MAIN   2295 2307#
QUES . . . . . . .  C ADDR   14BEH   R   SEG=MAIN   3344# 3349
QU_AVP . . . . . .  C ADDR   0794H   R   SEG=MAIN   1364 1366#
R10. . . . . . . .  N NUMB   000AH   A      450# 1167 1419 1456 1468 1995 4295 5927 8366
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   149

R11. . . . . . . .  N NUMB   000BH   A      451# 1168 1418 1457 1467 1998 5931 8370
R8 . . . . . . . .  N NUMB   0008H   A      448# 525 1421 1454 1470 1989 4120 4291 5432 5919 8358
R9 . . . . . . . .  N NUMB   0009H   A      449# 1420 1455 1469 1992 4293 5433 5923 8362
RAFTERK. . . . . .  C ADDR   0630H   R   SEG=MAIN   1175# 1181
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   150BH   R   SEG=MAIN   3401# 3406
RE1. . . . . . . .  C ADDR   2252H   R   SEG=MAIN   5412# 5418
RE11_7 . . . . . .  C ADDR   06D8H   R   SEG=MAIN   1277# 1319 1330
RE4BYTE. . . . . .  C ADDR   0454H   A      524 4119 4289 8354#
REA3_X . . . . . .  C ADDR   297CH   R   SEG=MAIN   3927 6543#
REACP. . . . . . .  D ADDR   0077H   A      304# 674 676 678 680 737 753 761 769 778 785 800 835 853 869 885 2153
                                           2155 2157 2159 2191 2193 2195 2197
READ . . . . . . .  C ADDR   2250H   R   SEG=MAIN   673 675 677 5411#
READYACP . . . . .  C ADDR   0328H   R   SEG=MAIN   779 789#
READ_X2. . . . . .  C ADDR   2238H   R   SEG=MAIN   5386# 5397
REBYTE . . . . . .  C ADDR   0278H   R   SEG=MAIN   658# 692 714 826 2094 2116 2146 2184 2222 2231 2233
REBYTE2. . . . . .  C ADDR   046CH   A      1269 1277 1295 1311 1322 1338 4726 4734 8374#
REBYTER. . . . . .  C ADDR   0C6EH   R   SEG=MAIN   2105 2122# 2130
REF0CN . . . . . .  D ADDR   00D1H   A      92# 471
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   124AH   R   SEG=MAIN   3013# 3015
RESAR2 . . . . . .  C ADDR   28A0H   R   SEG=MAIN   801 836 854 870 886 898 934 1016 1072 1193 1238 1346 1370 1436
                                           1459 1486 1674 1893 2042 2081 2107 3043 4647 4655 4674 4752 4774 4880 4892
                                           4907 5006 5064 5080 5094 5175 5233 5248 5265 6055 6368# 6527
RESAR8 . . . . . .  C ADDR   285EH   R   SEG=MAIN   1149 1199 1241 1249 1375 2166 2204 6307#
RESA_HL. . . . . .  C ADDR   2949H   R   SEG=MAIN   1924 4813 4825 4969 4982 5137 5150 6504#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2201
REZAP. . . . . . .  D ADDR   0088H   A      375# 2163
REZMUL . . . . . .  C ADDR   0688H   R   SEG=MAIN   1213 1227 1236#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 814 887 897 933 1015 1071 2080
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1198 1374 1412 1621 2345 3034 3044 3051
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1130 1196 1237 1351 1369 1388
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1371
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1201 1377 1435 1673 1803 3042 4646 4751 6526 6557
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4413 4654
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1142 1151 1192 1251 1345
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 816
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1472 1485
RE_HL. . . . . . .  C ADDR   2950H   R   SEG=MAIN   6507# 6517 6521 6524
RE_HL1 . . . . . .  C ADDR   2958H   R   SEG=MAIN   6505 6515#
RE_HL2 . . . . . .  C ADDR   295FH   R   SEG=MAIN   6515 6519#
RE_HL3 . . . . . .  C ADDR   2966H   R   SEG=MAIN   6519 6523#
RFINDMEM . . . . .  C ADDR   0FB4H   R   SEG=MAIN   2617# 2618
RGO23NO. . . . . .  C ADDR   150EH   R   SEG=MAIN   3402# 3407
RGOTO7 . . . . . .  C ADDR   16E6H   R   SEG=MAIN   3710# 3744
RHNOR11. . . . . .  C ADDR   12F4H   R   SEG=MAIN   3084 3096 3102#
RHNOT1 . . . . . .  C ADDR   12BBH   R   SEG=MAIN   3059 3068#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0FD8H   R   SEG=MAIN   2624 2636#
RI6. . . . . . . .  C ADDR   0FD2H   R   SEG=MAIN   2627 2632# 2641 2652 2675 2679
RIGBLO . . . . . .  C ADDR   10BBH   R   SEG=MAIN   2756# 2787 2789
RIGBLOK. . . . . .  C ADDR   10F9H   R   SEG=MAIN   2800#
RIGHT2 . . . . . .  C ADDR   0DE3H   R   SEG=MAIN   2322 2326#
RIGHT3 . . . . . .  C ADDR   0DE7H   R   SEG=MAIN   2324 2329#
RIKN . . . . . . .  C ADDR   0F5FH   R   SEG=MAIN   2553# 2571
RIZMAN . . . . . .  C ADDR   0D3AH   R   SEG=MAIN   2242# 2281
RI_31. . . . . . .  C ADDR   0FF2H   R   SEG=MAIN   2639 2648#
RKNLEFT. . . . . .  C ADDR   117FH   R   SEG=MAIN   2898# 2943
RKNMEM . . . . . .  C ADDR   1170H   R   SEG=MAIN   2893# 2949
RKNNUL . . . . . .  C ADDR   117CH   R   SEG=MAIN   2897# 2937
RKNOPT . . . . . .  C ADDR   0D37H   R   SEG=MAIN   2241# 2292
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   150

RKNRAZR. . . . . .  C ADDR   0D34H   R   SEG=MAIN   2240# 2286
RKVVOD0. . . . . .  C ADDR   1452H   R   SEG=MAIN   3291 3298#
RLABELF. . . . . .  C ADDR   0D31H   R   SEG=MAIN   2239# 2278
RLABELH. . . . . .  C ADDR   1179H   R   SEG=MAIN   2896# 2934
RLABELI. . . . . .  C ADDR   12C1H   R   SEG=MAIN   3071#
RLABELK. . . . . .  C ADDR   12BEH   R   SEG=MAIN   3070# 3073
RLABELL. . . . . .  C ADDR   0FB1H   R   SEG=MAIN   2616#
RLABELL1 . . . . .  C ADDR   112EH   R   SEG=MAIN   2839 2842#
RLABELN. . . . . .  C ADDR   1035H   R   SEG=MAIN   2677 2681#
RLABELP. . . . . .  C ADDR   19C0H   R   SEG=MAIN   4092# 4095
RLABELS13. . . . .  C ADDR   1AD4H   R   SEG=MAIN   4233# 4261
RLABELS4 . . . . .  C ADDR   1AD1H   R   SEG=MAIN   4232# 4235
RLABL2 . . . . . .  C ADDR   14B8H   R   SEG=MAIN   3342#
RLABM. . . . . . .  C ADDR   14BBH   R   SEG=MAIN   3343# 3347
RLEFCUR. . . . . .  C ADDR   178DH   R   SEG=MAIN   3804# 3808
RLER . . . . . . .  C ADDR   25D1H   R   SEG=MAIN   6038 6040#
RLIST_43 . . . . .  C ADDR   1824H   R   SEG=MAIN   3878# 3880
RMAS4. . . . . . .  C ADDR   0479H   R   SEG=MAIN   959# 961
RME21_23 . . . . .  C ADDR   17F4H   R   SEG=MAIN   3836 3855#
RMO220 . . . . . .  C ADDR   066AH   R   SEG=MAIN   1215# 1262
RNNMEMB. . . . . .  C ADDR   103BH   R   SEG=MAIN   2684# 2687
RNO3PARN . . . . .  C ADDR   09F1H   R   SEG=MAIN   1720# 1734
RNOBUF0. . . . . .  C ADDR   0B0EH   R   SEG=MAIN   1897 1920#
RNOCHI0. . . . . .  C ADDR   07BCH   R   SEG=MAIN   1383 1387#
RNOH37 . . . . . .  C ADDR   1318H   R   SEG=MAIN   3121# 3125 3132 3146
RNOM31 . . . . . .  C ADDR   1664H   R   SEG=MAIN   3637# 3638
RNOMEMK. . . . . .  C ADDR   1409H   R   SEG=MAIN   3258# 3280
RNORVICH . . . . .  C ADDR   09EFH   R   SEG=MAIN   1662 1663 1719#
RNOT1IN. . . . . .  C ADDR   0AC3H   R   SEG=MAIN   1800 1870#
RNOTESTIZM . . . .  C ADDR   0680H   R   SEG=MAIN   1229# 1264
ROUSTA . . . . . .  C ADDR   19ACH   R   SEG=MAIN   4076 4084#
ROUSTA1. . . . . .  C ADDR   19BDH   R   SEG=MAIN   4084 4090#
ROUT6. . . . . . .  C ADDR   0D2EH   R   SEG=MAIN   2238# 2277
ROUT7. . . . . . .  C ADDR   1176H   R   SEG=MAIN   2895# 2928 2933
ROUTF. . . . . . .  C ADDR   1315H   R   SEG=MAIN   3117# 3191
ROUTMAX. . . . . .  C ADDR   20ACH   R   SEG=MAIN   5129# 5147
ROUTMIN. . . . . .  C ADDR   1FB7H   R   SEG=MAIN   4961# 4979
RR0. . . . . . . .  N NUMB   0000H   A      441# 2249 2858 2905 4575
RR1. . . . . . . .  N NUMB   0001H   A      442# 2250 2857 2906 4574
RR2. . . . . . . .  N NUMB   0002H   A      444# 1271 1283 1289 1301 1313 1324 2251 2856 2907 3906 3914 4573 4728
                                           4740 4746 4758 5445
RR3. . . . . . . .  N NUMB   0003H   A      445# 1272 1282 1290 1300 1314 1325 2252 2855 2908 3907 3913 4572 4729
                                           4739 4747 4757 5446
RR4. . . . . . . .  N NUMB   0004H   A      1273 1281 1291 1299 1315 1326 2253 2854 2909 3908 3912 4571 4730 4738
                                           4748 4756 6602# 6659 6680 6696 6740 6762
RR5. . . . . . . .  N NUMB   0005H   A      1274 1280 1292 1298 1316 1327 2254 2853 2910 3909 3911 4570 4731 4737
                                           4749 4755 6603# 6660 6667 6674 6741 6750
RR6. . . . . . . .  N NUMB   0006H   A      443# 2255 2852 2911 4569
RR7. . . . . . . .  N NUMB   0007H   A      446# 2256 2851 2912 4568
RRIR . . . . . . .  C ADDR   25DEH   R   SEG=MAIN   6049 6051#
RRMO220. . . . . .  C ADDR   07B9H   R   SEG=MAIN   1360 1386#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   098EH   R   SEG=MAIN   1652# 1664 1666 1667
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 501
RTIZMRI. . . . . .  C ADDR   0EC0H   R   SEG=MAIN   2476#
RVVIZKO. . . . . .  C ADDR   12F6H   R   SEG=MAIN   3104# 3112
RVVKALI52. . . . .  C ADDR   1B00H   R   SEG=MAIN   4254 4256#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 578 1932 3959
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1935 3962
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1938 3965
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   151

SADIAP4. . . . . .  D ADDR   0030H   A      318# 1941 3967
SAUS . . . . . . .  D ADDR   0036H   A      313# 2069 2071 2088 2090 2135 2137 2216 2218
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2269 2566 2584 2770 2814 2834 2924 3567 3622 3727 4243 4370 4476
                                           6114 6122
SAVEIR2. . . . . .  C ADDR   27E2H   R   SEG=MAIN   900 937 1019 1075 6207#
SAVELTE. . . . . .  C ADDR   04A7H   A      8437#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 599 3498 6475 6506
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 607 3513 6494 6516
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 614 3518 6498 6520
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 621 3522 6500 6523
SAVER2 . . . . . .  C ADDR   27EEH   R   SEG=MAIN   591 593 595 597 805 815 817 840 858 874 888 1131 1143 1152 1197
                                           1202 1252 1352 1372 1378 1389 1473 1477 1678 2001 2047 2086 2115 2164 2176
                                           2202 2214 3045 3052 3937 4414 4506 4664 4766 4883 4895 4915 5009 5074 5090
                                           5105 5178 5243 5258 5270 6058 6221# 6558
SAVE_HL. . . . . .  C ADDR   2915H   R   SEG=MAIN   1927 3393 3768 6473#
SA_HL. . . . . . .  C ADDR   291CH   R   SEG=MAIN   6476# 6495 6499 6501
SA_HL1 . . . . . .  C ADDR   2937H   R   SEG=MAIN   6474 6493#
SA_HL2 . . . . . .  C ADDR   293EH   R   SEG=MAIN   6493 6497#
SA_HL3 . . . . . .  C ADDR   2945H   R   SEG=MAIN   6497 6500#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5287 5293
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 509 5288 5292 5295 5296 5317
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   21FAH   R   SEG=MAIN   5345# 5352
SDV1 . . . . . . .  C ADDR   220EH   R   SEG=MAIN   5357# 5363
SDVIG0 . . . . . .  C ADDR   0309H   R   SEG=MAIN   765# 767
SDVIG1 . . . . . .  C ADDR   02FEH   R   SEG=MAIN   757# 759
SDVIG2 . . . . . .  C ADDR   02F3H   R   SEG=MAIN   749# 751
SDVIG3 . . . . . .  C ADDR   02E7H   R   SEG=MAIN   740# 742
SDVIG4 . . . . . .  C ADDR   0318H   R   SEG=MAIN   775# 777
SDVIG6 . . . . . .  C ADDR   0322H   R   SEG=MAIN   782# 784
SDVM . . . . . . .  C ADDR   0320H   R   SEG=MAIN   772 781#
SEEGOON. . . . . .  C ADDR   09F6H   R   SEG=MAIN   1704 1709 1711 1717 1724#
SEEIND . . . . . .  C ADDR   0A04H   R   SEG=MAIN   1644 1651 1652 1736#
SEE_L43. . . . . .  C ADDR   18FBH   R   SEG=MAIN   3976 3984 3987#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7533# 7554 7555 7580 7581 7605 7748 7765 7986 8026
SKOR19 . . . . . .  C ADDR   1A0BH   R   SEG=MAIN   4121 4128#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   1385H   R   SEG=MAIN   3186# 3202
SP . . . . . . . .  D ADDR   0081H   A      17# 462
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 507
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 506
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5334
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   1AACH   R   SEG=MAIN   4211 4213#
SS1. . . . . . . .  C ADDR   2330H   R   SEG=MAIN   5594# 5596
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 802 804 819 837 839 855 857 871 873 1410 1619 2343 3032
SUMT2. . . . . . .  C ADDR   0374H   R   SEG=MAIN   793 834#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196 520 1963 2888 4599 5279
T2MSME . . . . . .  C ADDR   1751H   R   SEG=MAIN   3776# 3782
T4CON. . . . . . .  D ADDR   00C9H   A      85#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   152

TABB1_2. . . . . .  C ADDR   24D0H   R   SEG=MAIN   5870# 5880
TABN . . . . . . .  C ADDR   2568H   R   SEG=MAIN   5972# 5976
TABT11 . . . . . .  C ADDR   22E8H   R   SEG=MAIN   5531# 5952
TABT7. . . . . . .  C ADDR   22ECH   R   SEG=MAIN   4703 5535# 5965
TABT9. . . . . . .  C ADDR   22EAH   R   SEG=MAIN   5533# 5962
TABUS. . . . . . .  C ADDR   22D4H   R   SEG=MAIN   5467 5520#
TAKTIND. . . . . .  C ADDR   0A41H   R   SEG=MAIN   1771 1774#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 498 499 513
TE10MS . . . . . .  C ADDR   2634H   R   SEG=MAIN   3775 6137#
TE22 . . . . . . .  C ADDR   255BH   R   SEG=MAIN   5951 5961#
TE23 . . . . . . .  C ADDR   2563H   R   SEG=MAIN   5961 5965#
TE2MS. . . . . . .  C ADDR   262AH   R   SEG=MAIN   3781 6136#
TEAEQU0. . . . . .  C ADDR   2670H   R   SEG=MAIN   3159 6145#
TEAVK. . . . . . .  C ADDR   26ACH   R   SEG=MAIN   4620 6152#
TEBEQU0. . . . . .  C ADDR   267AH   R   SEG=MAIN   6146#
TEBL . . . . . . .  C ADDR   2760H   R   SEG=MAIN   2729 3335 6174#
TEBL0. . . . . . .  C ADDR   276AH   R   SEG=MAIN   3586 6175#
TECH . . . . . . .  C ADDR   2774H   R   SEG=MAIN   3867 4034 6176#
TECLE. . . . . . .  C ADDR   2725H   R   SEG=MAIN   2721 3303 6168#
TEEND. . . . . . .  C ADDR   27C4H   R   SEG=MAIN   4717 6185#
TEERR. . . . . . .  C ADDR   27BAH   R   SEG=MAIN   6129 6184#
TEFULL . . . . . .  C ADDR   274CH   R   SEG=MAIN   2736 3553 6172#
TEINT. . . . . . .  C ADDR   2756H   R   SEG=MAIN   3653 6173#
TEIZMK . . . . . .  C ADDR   2707H   R   SEG=MAIN   2524 3089 3098 6165#
TEKALIB. . . . . .  C ADDR   26B6H   R   SEG=MAIN   3843 4623 6153#
TEKD . . . . . . .  C ADDR   26FDH   R   SEG=MAIN   4300 6164#
TELIST . . . . . .  C ADDR   2741H   R   SEG=MAIN   2704 3244 3314 3320 6171#
TEMAX. . . . . . .  C ADDR   2792H   R   SEG=MAIN   4070 6179#
TEMEM. . . . . . .  C ADDR   272FH   R   SEG=MAIN   6169#
TEMENU . . . . . .  C ADDR   2684H   R   SEG=MAIN   6147#
TEMID. . . . . . .  C ADDR   279CH   R   SEG=MAIN   4078 6180#
TEMIN. . . . . . .  C ADDR   2788H   R   SEG=MAIN   3598 4086 6178#
TEMUL. . . . . . .  C ADDR   0767H   R   SEG=MAIN   1307 1344#
TENMIN . . . . . .  C ADDR   23D2H   R   SEG=MAIN   1210 1212 1226 5662#
TEOLI. . . . . . .  C ADDR   27A6H   R   SEG=MAIN   1511 6182#
TEOLL. . . . . . .  C ADDR   271BH   R   SEG=MAIN   1605 6167#
TEOLR. . . . . . .  C ADDR   27B0H   R   SEG=MAIN   1507 6183#
TEOUT. . . . . . .  C ADDR   2711H   R   SEG=MAIN   6166#
TEPAR. . . . . . .  C ADDR   26F3H   R   SEG=MAIN   4640 6163#
TES19_2. . . . . .  C ADDR   26E9H   R   SEG=MAIN   530 2661 4128 4352 6161#
TES57_6. . . . . .  C ADDR   26DFH   R   SEG=MAIN   2655 4122 4347 4636 6160#
TESKOR . . . . . .  C ADDR   26A2H   R   SEG=MAIN   4617 6151#
TEST01 . . . . . .  C ADDR   2195H   R   SEG=MAIN   5292# 5315
TEST02 . . . . . .  C ADDR   21C4H   R   SEG=MAIN   5312 5314#
TEST04 . . . . . .  C ADDR   21A5H   R   SEG=MAIN   5299# 5301
TEST1. . . . . . .  C ADDR   218BH   R   SEG=MAIN   5287# 5303 5324
TEST2. . . . . . .  C ADDR   21BDH   R   SEG=MAIN   5292 5311#
TEST22 . . . . . .  C ADDR   1A81H   R   SEG=MAIN   4178 4185#
TEST23 . . . . . .  C ADDR   1A86H   R   SEG=MAIN   4185 4188#
TEST3. . . . . . .  C ADDR   21AFH   R   SEG=MAIN   5294 5304#
TEST4. . . . . . .  C ADDR   219DH   R   SEG=MAIN   5295# 5310
TEST5. . . . . . .  C ADDR   21C7H   R   SEG=MAIN   5313 5316#
TEST7I . . . . . .  C ADDR   0A59H   R   SEG=MAIN   1786 1789#
TEST9I . . . . . .  C ADDR   0A52H   R   SEG=MAIN   1781 1786#
TESTAT . . . . . .  C ADDR   277EH   R   SEG=MAIN   2712 3294 6177#
TESTRS . . . . . .  C ADDR   2189H   R   SEG=MAIN   4111 5285#
TESTS. . . . . . .  C ADDR   1A75H   R   SEG=MAIN   4180# 4187 4190
TETE11 . . . . . .  C ADDR   26C1H   R   SEG=MAIN   4100 4627 6155#
TETE7. . . . . . .  C ADDR   26D5H   R   SEG=MAIN   4167 4633 6157#
TETE9. . . . . . .  C ADDR   26CBH   R   SEG=MAIN   4630 6156#
TETESI . . . . . .  C ADDR   268EH   R   SEG=MAIN   2993 4610 6149#
TETESR . . . . . .  C ADDR   2698H   R   SEG=MAIN   4614 6150#
TEVICH . . . . . .  C ADDR   2666H   R   SEG=MAIN   2366 2532 2540 3094 4515 6144#
TEWR . . . . . . .  C ADDR   2737H   R   SEG=MAIN   2695 3309 6170#
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   153

TEXTT. . . . . . .  C ADDR   262AH   R   SEG=MAIN   5547 6135#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 481
TH1. . . . . . . .  D ADDR   008DH   A      29# 528 532 4225 4227
TH2. . . . . . . .  D ADDR   00CDH   A      89# 1960 2885 4596
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   221EH   R   SEG=MAIN   5366#
TIM1 . . . . . . .  C ADDR   2220H   R   SEG=MAIN   5367# 5367
TIM2 . . . . . . .  C ADDR   2223H   R   SEG=MAIN   5348 5351 5358 5362 5370# 5413 5417 6394 6396
TIM3 . . . . . . .  C ADDR   2225H   R   SEG=MAIN   5371# 5371
TIZMRI . . . . . .  C ADDR   0DDCH   R   SEG=MAIN   2321# 2476
TL0. . . . . . . .  D ADDR   008AH   A      26# 482
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88# 1961 2886 4597
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1382H   R   SEG=MAIN   3171 3183#
TMOD . . . . . . .  D ADDR   0089H   A      25# 479 512
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 496
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 495
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   19ECH   R   SEG=MAIN   4109 4114#
TOME14 . . . . . .  C ADDR   1A19H   R   SEG=MAIN   4114 4135#
TOME15 . . . . . .  C ADDR   1A31H   R   SEG=MAIN   4135 4147#
TOME21 . . . . . .  C ADDR   19E3H   R   SEG=MAIN   4098 4109#
TOSK19 . . . . . .  C ADDR   1BB0H   R   SEG=MAIN   4346 4352#
TOUTF. . . . . . .  C ADDR   12FFH   R   SEG=MAIN   3108# 3111
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0EC3H   R   SEG=MAIN   2478# 2487
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5335
UNPACK1. . . . . .  C ADDR   009EH   A      7551# 7745 7879 8009 8123
UNPACK2. . . . . .  C ADDR   00BAH   A      7576# 7746 7880 8010
UP1. . . . . . . .  C ADDR   0138H   A      7696# 7713
UP2. . . . . . . .  C ADDR   014BH   A      7716# 7734
UP2A . . . . . . .  C ADDR   0161H   A      7695 7732#
UPA. . . . . . . .  C ADDR   2401H   R   SEG=MAIN   5717# 5723
UPA1 . . . . . . .  C ADDR   2411H   R   SEG=MAIN   5735# 5741
UPA2 . . . . . . .  C ADDR   23F1H   R   SEG=MAIN   5698# 5704
UPAA . . . . . . .  C ADDR   28EDH   R   SEG=MAIN   6442# 6448
UPAA4. . . . . . .  C ADDR   245CH   R   SEG=MAIN   5798# 5804
UPAB . . . . . . .  C ADDR   246CH   R   SEG=MAIN   5815# 5821
UPAK . . . . . . .  C ADDR   23FBH   R   SEG=MAIN   5714#
UPAK1. . . . . . .  C ADDR   28C7H   R   SEG=MAIN   6407#
UPAK2. . . . . . .  C ADDR   23EBH   R   SEG=MAIN   5695#
UPAK3. . . . . . .  C ADDR   240BH   R   SEG=MAIN   3796 3891 5732#
UPAK4. . . . . . .  C ADDR   28E7H   R   SEG=MAIN   3750 6439#
UPAKA. . . . . . .  C ADDR   2456H   R   SEG=MAIN   4498 5795#
UPAKB. . . . . . .  C ADDR   2466H   R   SEG=MAIN   4545 5812#
UPAV1. . . . . . .  C ADDR   1B1FH   R   SEG=MAIN   4280# 4286
UPAV2. . . . . . .  C ADDR   1BE2H   R   SEG=MAIN   4397# 4403
UPK1 . . . . . . .  C ADDR   28D9H   R   SEG=MAIN   6415 6418#
UPK2 . . . . . . .  C ADDR   28DAH   R   SEG=MAIN   6417 6419#
VICHMAX. . . . . .  C ADDR   20AFH   R   SEG=MAIN   4072 5131#
VICHMEAN . . . . .  C ADDR   1EBBH   R   SEG=MAIN   4080 4806#
VICHMIN. . . . . .  C ADDR   1FBAH   R   SEG=MAIN   3600 4088 4963#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1265 1777 2363 2372 2506 2519 2620 2628 2997 3001 3009 3083 3150
                                           3262 3832 3840 3849 4093 4144 4158 4298 4489 4528 4560 4608 5950
VIG0 . . . . . . .  C ADDR   0AAFH   R   SEG=MAIN   1854# 1856
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   154

VIG4 . . . . . . .  C ADDR   0ABDH   R   SEG=MAIN   1865# 1867
VIOUT. . . . . . .  C ADDR   0E9AH   R   SEG=MAIN   2369 2451# 2479
VIOUTF . . . . . .  C ADDR   12F8H   R   SEG=MAIN   3105#
VIT2_10. . . . . .  C ADDR   0E0AH   R   SEG=MAIN   2351# 2357 2358
VODM11_15. . . . .  C ADDR   17B0H   R   SEG=MAIN   3821# 3839
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2309 3763 6483 6485
VV21_23. . . . . .  C ADDR   1A6CH   R   SEG=MAIN   4164 4176#
VVCHIBL. . . . . .  C ADDR   259FH   R   SEG=MAIN   2607 6004#
VVCHIF . . . . . .  C ADDR   257AH   R   SEG=MAIN   5980# 5997
VVINTE . . . . . .  C ADDR   1711H   R   SEG=MAIN   3714 3742#
VVIZKO . . . . . .  C ADDR   134FH   R   SEG=MAIN   3104 3150#
VVKALI52 . . . . .  C ADDR   1BD5H   R   SEG=MAIN   4256 4381# 4433
VVMENU . . . . . .  C ADDR   1B85H   R   SEG=MAIN   4263 4334#
VVNOL23. . . . . .  C ADDR   259AH   R   SEG=MAIN   6001# 6005
VVNOL31. . . . . .  C ADDR   2595H   R   SEG=MAIN   5999# 6001
VVNOL41. . . . . .  C ADDR   2593H   R   SEG=MAIN   5997# 5999
VVOD2_10 . . . . .  C ADDR   1749H   R   SEG=MAIN   3271 3398 3509 3773#
VVOD43 . . . . . .  C ADDR   1927H   R   SEG=MAIN   4006 4013#
VVODM11_15 . . . .  C ADDR   19C3H   R   SEG=MAIN   3821 4093#
VVOSTA . . . . . .  C ADDR   1984H   R   SEG=MAIN   4049 4068#
VVOSTAD. . . . . .  C ADDR   1998H   R   SEG=MAIN   4068 4076#
VVRR6. . . . . . .  C ADDR   0F1FH   R   SEG=MAIN   2524#
VV_52V . . . . . .  C ADDR   1AF7H   R   SEG=MAIN   4237 4253#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 477 478
WORK . . . . . . .  D ADDR   00B8H   A      396# 1492 1494 1500 1516 1523 1539 1560 1565 1581 1805 1883 3365 3375
                                           3377 3411 3421 3423 3433 3443 3445 3452 3462 3464 3474 3484 3486 4832 4879
                                           4882 4891 4894 4906 4987 5005 5008 5063 5073 5079 5089 5093 5156 5174 5177
                                           5232 5242 5247 5257 5289 5311
WR1. . . . . . . .  C ADDR   28B4H   R   SEG=MAIN   6390# 6397
WRITE. . . . . . .  C ADDR   28B1H   R   SEG=MAIN   671 5841 5843 5845 5847 5849 5851 5854 5856 5858 5861 5863 5865
                                           6388#
WRITED_X1. . . . .  C ADDR   2229H   R   SEG=MAIN   5376#
WRITE_X1 . . . . .  C ADDR   2228H   R   SEG=MAIN   5375#
WRPAGE . . . . . .  C ADDR   0480H   A      4222 4696 4798 8398#
WW5. . . . . . . .  C ADDR   0483H   A      8399# 8407
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 473 505
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 474
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 475 504
XCIKLWR. . . . . .  C ADDR   27CEH   R   SEG=MAIN   895 908 910 912 915 918 921 924 927 930 963 965 967 970 973 976
                                           979 982 985 987 990 992 994 997 1000 1003 1006 1009 1012 1064 1066 1068
                                           6190#
XTEMP. . . . . . .  N NUMB   000CH   A      6599# 6963 6964 6965 6966 7052 7054 7055 7057 7058 7060 7061 7063 7085
                                           7086 7087 7088 7106 7107 7111 7112 7115 7119 7120 7123 7127 7128 7132 7133
                                           7135 7136 7137 7139 7143 7144 7146 7147 7151 7152 7157 7158 7160 7161 7165
                                           7166 7171 7173 7174 7175
YBNUL. . . . . . .  C ADDR   1290H   R   SEG=MAIN   3040 3048#
YES. . . . . . . .  C ADDR   2B1CH   R   SEG=MAIN   6985 6989 6993 6997 7015# 7078
YES0KEY. . . . . .  C ADDR   02C3H   R   SEG=MAIN   701 713#
YES0KEY1 . . . . .  C ADDR   02D0H   R   SEG=MAIN   720# 727
YESAVP . . . . . .  C ADDR   07C6H   R   SEG=MAIN   1366 1392#
YESBUF . . . . . .  C ADDR   0B13H   R   SEG=MAIN   1918 1923#
YESIND . . . . . .  C ADDR   0A5BH   R   SEG=MAIN   1776 1785 1788 1791#
YESPRD . . . . . .  C ADDR   0B11H   R   SEG=MAIN   1917 1921#
YESTEST. . . . . .  C ADDR   22C3H   R   SEG=MAIN   5462 5494#
YESTT5 . . . . . .  C ADDR   0BDDH   R   SEG=MAIN   2039#
YESVICH. . . . . .  C ADDR   0811H   R   SEG=MAIN   1380 1431#
YESVI_KM . . . . .  C ADDR   1E24H   R   SEG=MAIN   4643 4723#
YESVI_KR . . . . .  C ADDR   1D9CH   R   SEG=MAIN   4643# 4645
YST1 . . . . . . .  C ADDR   01A2H   R   SEG=MAIN   529 533#
YST19. . . . . . .  C ADDR   019AH   R   SEG=MAIN   526 530#
Z01S . . . . . . .  C ADDR   2348H   R   SEG=MAIN   5611# 5613
Z05S . . . . . . .  C ADDR   2355H   R   SEG=MAIN   5620# 5622
Z100 . . . . . . .  C ADDR   2319H   R   SEG=MAIN   5575# 5577
Z15. . . . . . . .  C ADDR   2327H   R   SEG=MAIN   5587# 5589
Z1S. . . . . . . .  C ADDR   233BH   R   SEG=MAIN   5603# 5605
A51 MACRO ASSEMBLER  AMP34                                                                06/07/2007 14:10:09 PAGE   155

ZAPADC . . . . . .  C ADDR   21F8H   R   SEG=MAIN   5344#
ZCMP . . . . . . .  C ADDR   2850H   R   SEG=MAIN   6297#
ZDIV . . . . . . .  C ADDR   281DH   R   SEG=MAIN   813 1123 3930 6260#
ZER1 . . . . . . .  C ADDR   00B3H   A      7561 7565# 7620 7663
ZER2 . . . . . . .  C ADDR   00D4H   A      7587 7591#
ZMUL . . . . . . .  C ADDR   2813H   R   SEG=MAIN   6255#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1698 3955 4933 5123 6268 6271 6274
ZNPLUS . . . . . .  C ADDR   02DAH   R   SEG=MAIN   682 729#
ZZ . . . . . . . .  C ADDR   2329H   R   SEG=MAIN   5588# 5588
Z_01S. . . . . . .  C ADDR   2344H   R   SEG=MAIN   2261 2262 2917 5309 5323 5609# 6126
Z_05S. . . . . . .  C ADDR   2351H   R   SEG=MAIN   2033 2034 2732 4073 4081 4089 5618#
Z_100. . . . . . .  C ADDR   2317H   R   SEG=MAIN   5574#
Z_15 . . . . . . .  C ADDR   2325H   R   SEG=MAIN   650 5586#
Z_1MS. . . . . . .  C ADDR   232EH   R   SEG=MAIN   720 5316 5593#
Z_1S . . . . . . .  C ADDR   2337H   R   SEG=MAIN   639 647 1427 2368 3601 3874 3995 4047 4339 4425 4527 4720 4721
                                           5601#
Z_5. . . . . . . .  C ADDR   2320H   R   SEG=MAIN   5380 5390 5581#
Z_9. . . . . . . .  C ADDR   28ACH   R   SEG=MAIN   5337 6382#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
