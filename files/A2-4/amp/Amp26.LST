A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp26.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp26.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236             
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
                     313     ;;;;;
  0020               314      cellbit                DATA    20h
  0000               315     bitznak         BIT     cellbit.0       ;20.0           
  0001               316     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               317     znmat           BIT             cellbit.2       ;20.2
  0003               318     bitrs           BIT             cellbit.3       ;20.3
  0004               319     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               320     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     6

  0006               321     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               322     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     323     
  0021               324     cellbit1                DATA    21h
  0008               325     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               326     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               327     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               328     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
  000C               329     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
                     330     ;bmem12         BIT             cellbit1.5      ;21.5    
                     331     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               332     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     333     
  0022               334     cellbit2                DATA    22h
  0010               335     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               336     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               337     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               338     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               339     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               340     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               341     bitvi31         BIT             cellbit2.6      ;22.6   бит ПАМ13        
  0017               342     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     343     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     344     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     345     ;и выдает т.н. буфер индикации  
  0023               346     cellbit3                DATA    23h
  0018               347     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               348     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               349     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               350     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     351     ;bit            BIT             cellbit3.4      ;22.4    
                     352     ;bit            BIT             cellbit3.5      ;22.5    
                     353     ;bit            BIT             cellbit3.6      ;22.6            
                     354     ;bit            BIT             cellbit3.7      ;22.7
                     355             
  005E               356     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     357     ;hex
  0062               358     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               359     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               360     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               361     rez_A2   data 7bh; A2
                     362     
  0098               363     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               364     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               365     chdel    data  83h              ; счетчик задержки
                     366     ;float
  0084               367     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               368     rezAp    data  88h              ;4byte  A+
  008C               369     rezAm    data  8ch              ;4byte  A-
  0090               370     koefKp   data  90h              ;4byte  K+
  0094               371     koefKm   data  94h              ;4byte  K-
                     372     ;hex 
  009A               373     parT     data  9ah              ;параметр времени измерения
  009B               374     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               375     rez_A3   data  9ch              ;A3
                     376     ;FLOAT
  00A0               377     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               378     rez_Ak  data  0a4h         ;Ak
  00A8               379     parol           data  0a8h         ;храним в памяти пароль
  00AC               380     chind   data  0ach         ;счетчик индикации
                     381     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               382     diap    data  0aeh         ;номер диапазона
  00AF               383     parN    data  0afh         ;N  пар разрядности индикатора
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     7

  00B0               384     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               385     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               386     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               387     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               388     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               389     work    data  0b8h        ;рабочая ячейка
  00BC               390     konstA  data  0bch        ;     введенная с крана константа A
  00C0               391     konstB  data  0c0h         ;    введенная с крана константа B
                     392     ;       data  0c4h         ;
  00C5               393     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               394     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               395     interva data  0cdh;значение интервала (запись)2baita
  00CF               396     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               397     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               398     volume          data    0d5h;объем блока
                     399     ;data  0d6h
                     400     
                     401     ;внешнее ОЗУ 64K 
                     402     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     403     ;ячейку  стирается целая страница 0..ffh рпзу
                     404     ;               XSEG AT 100h
                     405             PUBLIC    MASS0
  0100               406     MASS0  xdata 0100h;     скользящий массив измерения
  0104               407     MASS1  xdata 0104h;
  0108               408     MASS2  xdata 0108h;
  010C               409     MASS3  xdata 010ch;
  0110               410     MASS4  xdata 0110h;
  0114               411     MASS5  xdata 0114h;
  0118               412     MASS6  xdata 0118h;
  011C               413     MASS7  xdata 011ch;
  0120               414     MASS8  xdata 0120h;
  0124               415     MASS9  xdata 0124h;
  0128               416     MASS10  xdata 0128h;
  012C               417     MASS11  xdata 012ch;
  0130               418     MASS12  xdata 0130h;
  0134               419     MASS13  xdata 0134h;
  0138               420     MASS14  xdata 0138h;
  013C               421     MASS15  xdata 013ch;
  0140               422     MASS16  xdata 0140h;
  0144               423     MASS17  xdata 0144h;
  0148               424     MASS18  xdata 0148h;
  014C               425     MASS19  xdata 014ch;
                     426     ;xdata 
                     427     
  0000               428                             rr0             EQU 00
  0001               429                     rr1       equ   01
  0006               430                     rr6   equ 06
  0002               431                     rr2       equ   02
  0003               432                     rr3       equ   03
  0007               433                     rr7   equ 07
                     434     
  0008               435                     r8   equ 08
  0009               436                     r9        equ   09
  000A               437                     r10       equ   10
  000B               438                     r11   equ 11
                     439     
                     440                     
                     441        
----                 442                  rseg     Main          ; Switch to this code segment.
                     443     
                     444                  using    0              ; Specify register bank for the following
                     445     
0100                 446     org 100h
                     447     ;$EJECT
                     448     
0100 7581E0          449     begin:     mov  sp, #0e0h
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     8

0103 75E900          450                                             mov             PCA0L,#00;=0x00;
0106 75D900          451                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          452                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          453                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          454                                             mov     P2MDOUT,#00;=0x00;
                     455             
0112 75A73F          456             mov     P3MDOUT,#3fh;
0115 75B5FF          457             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          458             mov     REF0CN,#03h;=0x03;
                     459             
011B 75E114          460             mov     XBR0,#14h;= 0x14;
011E 75E200          461             mov     XBR1,#00; =0x00;
0121 75E300          462             mov XBR2,#00;=0x00;
0124 75B0C0          463             mov     P3,#0c0h
0127 75FFDE          464             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          465             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          466             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          467             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          468             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          469             mov     TL0,#0f9h;=0xf9; 
0139 75E680          470             mov     EIE1,#80h;=0x80;
                     471     
013C 75D480          472             mov     DAC0CN,#80h;=0x80;
013F 75D780          473             mov     DAC1CN,#80h;=0x80;
0142 75B167          474             mov     OSCXCN,#67h;=0x67;
                     475     
                     476      
                     477     
0145 E5B1            478     gener:     mov a, oscxcn
0147 B4E7FB          479                cjne a,#11100111b,gener
                     480                            
014A 75B288          481             mov     OSCICN,#88h;=0x84;
014D 75CA00          482         mov TMR2RLL,#0;=0;
0150 75CBD1          483         mov TMR2RLH,#0d1h;=0xd1;
                     484       
0153 D28E            485                     setb  TCON.6                    ;регистр управления
0155 D28C            486                      setb tcon.4
                     487     
0157 75EF00          488             mov     RSTSRC,#0;=00   ;//источники сброса 
                     489     
                     490             
015A 75E340          491          mov        XBR2,#40h
015D 75E106          492              mov    XBR0,#06h;16h
0160 75F803          493             mov             SPI0CN,#03
0163 759D31          494             mov             spi0ckr,#31H;;;;;;;;#04
                     495     ;установка скорости
0166 759850          496                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          497                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          498                                             mov             CKCON,#00010000b;TIM=1
016F 758920          499                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          500                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            501                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            502                                             mov                     r3,#2ch
0179 120454          503                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            504                                             mov                     a,r8
017E B40007          505                                             cjne            a,#00,yst19
0181 C213            506                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          507                                             mov                     TH1,#244
0186 8008            508                                             jmp               yst1
0188 900000   F      509     yst19:          mov                     dptr,#teS19_2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE     9

018B D213            510                                             setb            bitv19                  ;19,2
018D 758DDC          511                                             mov                     TH1,#220
0190                 512     yst1:
0190 75E730          513                                             mov             EIE2,#30H;00110000
0193 75A880          514                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     515     ;ozu
0196 E4              516                                             clr     a
0197 7800            517                                             mov     r0,#00h 
0199 F6              518     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              519                                             inc     r0
019B B87FFB          520                                             cjne    r0,#7fh,mecle
019E 7880            521                                             mov     r0,#80h
01A0 F6              522     meff:                   mov     @r0,a 
01A1 F2              523                                             movx @r0,a
01A2 08              524                                             inc     r0
01A3 B8DFFA          525                             cjne    r0,#0dfh,meff
01A6 120000   F      526                             call    clmassix
01A9 7898            527                             mov             r0,#chinkor
01AB 7600            528                             mov             @r0,#0;1;
01AD 08              529                             inc             r0
01AE 76C8            530                             mov             @r0,#0c8h;90h;
                     531                             ;;;;
01B0 7881            532                             mov             r0,#chavt
01B2 7603            533                             mov             @r0,#3;1
01B4 08              534                             inc             r0
01B5 7620            535                             mov             @r0,#20h;90h
                     536     
01B7 78B2            537                                     mov             r0,#marker
01B9 76FF            538                                     mov             @r0,#0ffh
                     539                             ;mov            r0,#chind
                     540                             ;mov            @r0,#1
                     541                     
01BB 74FF            542                             mov             a,#0ffh
01BD F585            543                        mov          p5,a
01BF 799A            544                             mov             r1,#parT
01C1 7702            545                             mov             @r1,#2                  ;Tizm=1s
01C3 79AE            546                             mov             r1,#diap
01C5 7705            547                             mov             @r1,#5                  ;10-7a
01C7 79AF            548                             mov             r1,#parN
01C9 7702            549                             mov             @r1,#2
01CB 7400            550                             mov             a,#00h
01CD F585            551                             mov             p5,a
01CF D204            552                             setb    bitizm
                     553     
01D1 799B            554                             mov             r1,#chbefore
01D3 7700            555                             mov             @r1,#0
                     556                             ;;;;;;
01D5 900000   F      557                             mov             dptr,#ch_1              ;1->r2..r5 float
01D8 120000   F      558                             call    ldc_long
01DB 7890            559                             mov             r0,#koefKp         ;1(float)->koefKp
01DD 120000   F      560                             call    saver2
01E0 7894            561                             mov             r0,#koefKm              ;1(float)->koefKm
01E2 120000   F      562                             call    saver2
01E5 78A0            563                             mov             r0,#koefKD
01E7 120000   F      564                             call    saver2
01EA 78CF            565                             mov                     r0,#chbuf
01EC 120000   F      566                             call    saver2  
                     567     ;START
                     568     ;                                       rez_A0=0;
                     569     ;        SUMM=0; //обнуление скользящего массива
                     570     ;        over_mas=0;
                     571     ;        count_mas=0;
                     572     
01EF 7840            573                             mov             r0,#bufind
01F1                 574     age2:
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    10

01F1 76FD            575                             mov             @r0,#0fdh         ;погасить индикатор
01F3 08              576                             inc             r0
01F4 B84CFA          577                             cjne    r0,#bufind+12,age2              
01F7 120000   F      578                             call    ind
01FA 120000   F      579                             call    z_1s
                     580     
                     581                                     ;зажечь все лементы индикации
01FD 7840            582                             mov             r0,#bufind
01FF 76FE            583     ageon:          mov             @r0,#0feh;?
0201 08              584                             inc             r0
0202 B84CFA          585                             cjne    r0,#bufind+12,ageon             
0205 120000   F      586                             call    ind
0208 120000   F      587                             call    z_1s            ;1sec
                     588     ;;;;;;;;;;;;;;;;
020B 7840            589                             mov             r0,#bufind
020D 7630            590                             mov             @r0,#30H;"A"
020F 08              591                             inc             r0
0210 7630            592                             mov             @r0,#30H;"В"
0212 08              593                             inc             r0
0213 7630            594                             mov             @r0,#30H;"Т"
0215 08              595                             inc             r0
0216 7634            596                             mov             @r0,#34H;2dh
0218 08              597                             inc             r0
0219 7635            598                             mov             @r0,#35H;"H"
021B 08              599                             inc             r0
021C 7636            600                             mov             @r0,#36h
021E 08              601                             inc             r0
021F 7637            602                             mov             @r0,#37h
0221 08              603                             inc             r0
0222 762D            604                             mov             @r0,#2dh
0224 08              605                             inc             r0
0225 7637            606                             mov             @r0,#37h
0227 08              607                             inc             r0
0228 7641            608                             mov             @r0,#"A";31h
022A 08              609                             inc             r0
                     610                     
022B 120000   F      611     dd:                     call    ind
022E 120000   F      612                             call    z_15;z_1ms
0231 434B10          613                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     614     ;;;;;;;;;;;;;;;;;;;
0234 7C60            615                             mov             r4,#60h
0236 7D00            616                             mov             r5,#00         
0238 120000   F      617                             call    iniacp;инициализация acp
023B 120000   F      618                             call    loadUS          ;us 10-7 A
                     619                             
023E C217            620     rebyte:         clr             bitoll
0240 3095FD          621                             jnb             p1.5,$
0243 2095FD          622                             jb              p1.5,$
0246 E586            623                             mov             a,P6            ;p6.4=0
0248 54EF            624                             anl             a,#0efh
024A F586            625                             mov             P6,a
024C 00              626                             nop
024D 00              627                             nop
                     628                                     
024E E586            629                             mov             a,P6                    ;p6.4=1 
0250 4410            630                             orl             a,#10h
0252 F586            631                             mov             P6,a                        
0254 7411            632                             mov             a,#11h
0256 120000   F      633                             call    write
                     634                             ;чтение acp
0259 120000   F      635                             call    read    
025C F578            636                             mov     reacp+1,A       ;старший байт 
025E 120000   F      637                             call    read    
0261 F579            638                             mov     reacp+2,A       ;средний байт 
0263 120000   F      639                             call    read
0266 F57A            640                             mov     reacp+3,A               ;мл байт
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    11

                     641                        ;;;;;;;;;;;
0268 7878            642                        mov          r0,#reacp+1
026A E6              643                        mov          a,@r0
026B 20E72D          644                             jb              acc.7,znplus;
026E D200            645                             setb    bitznak
0270 4480            646                             orl             a,#80h  ;ост содерж яч 
0272 F6              647                             mov             @r0,a
                     648                                     
0273 18              649     mmm:            dec             r0;,#reacp
0274 76FF            650                             mov             @r0,#0ffh
0276 802B            651                             jmp             goznak
                     652     
                     653     
0278 750A00          654     labelA:         mov             r10,#0          
027B 750B00          655                             mov             r11,#0
027E 783D            656                             mov             r0,#chkl
0280 120000   F      657                             call    chcmp
0283 7000            658                             jnz             no0key
                     659                             ;разрешить ie6,ie7       
                     660                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     661                     ;       mov             EIP2,#30h
                     662                        
0285 793D            663     no0key:         mov             r1,#chkl 
0287 120000   F      664                             call    chdec
028A 2004B1          665                             jb              bitizm,rebyte
                     666                              ;буфер 2 выдать на индикацию
                     667     
028D 120000   F      668                             call    ind
0290 120000   F      669                             call    z_01s
0293 120000   F      670                             call    z_01s
0296 120000   F      671                             call    z_01s
0299 80DD            672                             jmp             labelA
                     673     
029B C200            674     znplus:         clr     bitznak
029D 547F            675                             anl             a,#7fh;fdh                      ;+
029F F6              676                             mov             @r0,a
02A0 18              677                             dec             r0;,#reacp
02A1 7600            678                             mov             @r0,#00h
                     679                             
02A3                 680     goznak: 
                     681     ;;;;;;;;;;;;;
02A3 787A            682                             mov     r0,#reacp+3
02A5 E6              683                             mov             a,@r0
02A6 7F05            684                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02A8 C3              685     sdvig3:         clr             c
02A9 13              686                             rrc             a
02AA DFFC            687                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02AC FA              688                             mov             r2,a    ;сохр байт
02AD 18              689                             dec             r0              ;       reacp+2
02AE E6              690                             mov             a,@r0
02AF C0E0            691                             push    acc
02B1 C3              692                             clr             c
02B2 7F03            693                             mov             r7,#3;2
02B4 C3              694     sdvig2:         clr             c
02B5 33              695                             rlc             a
02B6 DFFC            696                             djnz    r7,sdvig2 ;d12..d11      средний байт
02B8 4A              697                             orl             a,r2
02B9 F57A            698                             mov             reacp+3,a;сформ мл байт
02BB D0E0            699                             pop             acc
                     700                             
02BD 7F05            701                             mov             r7,#5;6
02BF C3              702     sdvig1:         clr             c
02C0 13              703                             rrc             a
02C1 DFFC            704                             djnz    r7,sdvig1 ;d15,d14        ср байт
02C3 FA              705                             mov             r2,a   ;сохр
02C4 E578            706                             mov             a,reacp+1
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    12

02C6 C0E0            707                             push    acc
                     708                     ;;      push    acc
02C8 7F03            709                             mov             r7,#3;2
02CA C3              710     sdvig0:         clr             c
02CB 33              711                             rlc             a
02CC DFFC            712                             djnz    r7,sdvig0 ;       d21..d16
02CE 4A              713                             orl             a,r2
02CF F579            714                             mov             reacp+2,a       ; сформ средний  байт
02D1 D0E0            715                             pop             acc       ;reacp+1
                     716                             ;;;;;;;;;;;;;;
02D3 20E70B          717                             jb              acc.7,sdvm
02D6 C3              718                             clr             c
02D7 7F05            719                             mov             r7,#5;6
02D9 C3              720     sdvig4:         clr             c
02DA 13              721                             rrc             a
02DB DFFC            722                             djnz    r7,sdvig4 ;       d23,d22
02DD F578            723                             mov             reacp+1,a
02DF 8008            724                             jmp             readyacp;ankor;klmas
                     725     ;;;;;;;;;;;;                                    
02E1 7F05            726     sdvm:           mov             r7,#5;6
02E3 D3              727     sdvig6:         setb            c
02E4 13              728                             rrc             a
02E5 DFFC            729                             djnz    r7,sdvig6 ;       d23,d22
02E7 F578            730                             mov             reacp+1,a
                     731                                                             
                     732     ; reacp..reacp+3-результат чтения асп(hex) 
                     733     ;;;;;;;;;
02E9                 734     readyacp:
02E9 7898            735                                             mov             r0,#chinkor
02EB E6              736                             mov             a,@r0
02EC 30E702          737                             jnb             acc.7,gopart
02EF 8044            738                                     jmp             sumt2
                     739                     
02F1                 740     gopart:
02F1 789A            741                             mov             r0,#parT        ;параметр времени
02F3 793F            742                             mov             r1,#chmasN
02F5 B6013A          743                             cjne    @r0,#1,noparT1
                     744                             ;РЕЗ+РЕЗ
02F8 7877            745                             mov             r0,#reacp
02FA 120000   F      746                             call    resar2          ;reacp->r2..r5
02FD 78B6            747                             mov             r0,#summa+3;rez_A+3
02FF 120000   F      748                             call    ladd
0302 78B3            749                             mov             r0,#summa;rez_A
0304 120000   F      750                             call    saver2
0307 793F            751                              mov            r1,#chmasN
0309 7714            752                             mov             @r1,#20;10
030B 789B            753                             mov             r0,#chbefore
030D B6631E          754                             cjne    @r0,#99,nobef99
                     755                             ;РЕЗ/100
0310 900000   F      756                             MOV        DPTR,#ch100 
0313 120000   F      757     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0316 120000   F      758                             call    zdiv;divide
0319 7862            759                             mov             r0,#rez_A
031B 120000   F      760                             call    saver2          ;сумма 100 отсчетов /100
031E 78C5            761                             mov             r0,#Rez_del
0320 120000   F      762                             call    saver2  
                     763                        ;;;;;
0323 78B3            764                        mov          r0,#summa
0325 120000   F      765                        call         clear4
                     766     
0328 799B            767                             mov             r1,#chbefore
032A 7700            768                             mov             @r1,#0
032C 8070            769                             jmp             klmas           ;загр в массив скользящее ср
032E 06              770     nobef99:        inc             @r0                     ;chbefore
032F 020000   F      771                             jmp             rebyte;labelA;метка A
                     772     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    13

                     773     ;а потом уже располагаем  в скользящий массив  из n
                     774     
                     775     
                     776     
0332 B6021D          777     noparT1:        cjne    @r0,#2,noparT2
                     778                             ;РЕЗ+РЕЗ
0335                 779     sumt2:
0335 7877            780                              mov            r0,#reacp
0337 120000   F      781                             call    resar2          ;reacp->r2..r5
033A 78B6            782                             mov             r0,#summa+3;rez_A+3
033C 120000   F      783                             call    ladd
033F 78B3            784                             mov             r0,#summa;rez_A
0341 120000   F      785                             call    saver2
0344 789B            786                             mov             r0,#chbefore
0346 793F            787                             mov             r1,#chmasN
0348 770A            788                             mov             @r1,#10
034A B613E1          789                             cjne    @r0,#19,nobef99;9,nobef99
                     790                             ;РЕЗ/20
034D 900000   F      791                             MOV        DPTR,#ch20;ch10 
0350 80C1            792                             jmp             allsum
                     793                             ;;;;;;;
                     794                             
                     795     
0352 B6031D          796     noparT2:        cjne    @r0,#3,noparT3
0355 7877            797                                                              mov            r0,#reacp
0357 120000   F      798                             call    resar2          ;reacp->r2..r5
035A 78B6            799                             mov             r0,#summa+3;rez_A+3
035C 120000   F      800                             call    ladd
035F 78B3            801                             mov             r0,#summa;rez_A
0361 120000   F      802                             call    saver2
0364 789B            803                             mov             r0,#chbefore
0366 793F            804                             mov             r1,#chmasN
0368 7704            805                             mov             @r1,#4                                  ;n=4
036A B60AC1          806                             cjne    @r0,#10,nobef99;9,nobef99
                     807                             ;РЕЗ/10
036D 900000   F      808                             MOV        DPTR,#ch10 
0370 80A1            809                             jmp             allsum
                     810                             
0372 B6041D          811     noparT3:        cjne    @r0,#4,noparT4
0375                 812     aapar:          
0375 7877            813              mov            r0,#reacp
0377 120000   F      814                             call    resar2          ;reacp->r2..r5
037A 78B6            815                             mov             r0,#summa+3;rez_A+3
037C 120000   F      816                             call    ladd
037F 78B3            817                             mov             r0,#summa;rez_A
0381 120000   F      818                             call    saver2
0384 789B            819                             mov             r0,#chbefore
0386 793F            820                             mov             r1,#chmasN
0388 7704            821                             mov             @r1,#4
038A B605A1          822                             cjne    @r0,#5,nobef99;9,nobef99
                     823                             ;РЕЗ/10
038D 900000   F      824                             MOV        DPTR,#ch5
0390 8081            825                             jmp             allsum
                     826     
                     827                     
0392 7702            828     noparT4:   mov          @r1,#2          ;chmasN n=2
0394 7877            829                             mov             r0,#reacp
0396 120000   F      830                             call    resar2          ;reacp->r2..r5
0399 7862            831                             mov             r0,#rez_A
039B 120000   F      832                             call    saver2
                     833     ;загрузить А в массив из 2/10 значений
                     834     ;;;;;;;;;;;;;;;
039E                 835     klmas:           
039E 793F            836                             mov             r1,#chmasN
03A0 B7021A          837                             cjne    @r1,#2,mas10
03A3 900100          838                             MOV        dptr,#MASS0
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    14

03A6 120000   F      839                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     840     
03A9 7862            841                             mov             r0,#rez_A
03AB 120000   F      842                             call    resar2          ;->r2..r5
03AE 900100          843                             mov                     dptr,#MASS0
03B1 120000   F      844                   call              saveIr2                 ; R2-R5 --> MAS0
                     845                     
03B4 900107          846                   MOV          dptr,#MASS1+3
03B7 120000   F      847                   CALL       addx
03BA 020000   F      848                       jmp           endsum
                     849     ;массив из 10-ти измерений
03BD B70A7D          850     mas10:                  cjne    @r1,#10,mas20
03C0 900120          851                                             mov                     dptr,#MASS8
03C3 120000   F      852                     CALL            xCIKLWR         ;MASS8->MASS9
03C6 90011C          853                                             mov                     dptr,#MASS7
03C9 120000   F      854                     CALL            xCIKLWR         ;MASS7->MASS8
03CC 900118          855                     MOV       dptr,#MASS6
03CF 120000   F      856                     CALL       xCIKLWR         ; MASS6 --> MASS7
03D2 900114          857                     MOV        dptr,#MASS5
                     858                    
03D5 120000   F      859                    CALL        xCIKLWR        ; MASS5 --> MASS6
03D8 900110          860                    MOV         dptr,#MASS4
                     861                    
03DB 120000   F      862                    CALL        xCIKLWR        ; MASS4 --> MASS5
03DE 90010C          863                             mov                     dptr,#MASS3
                     864     
03E1 120000   F      865                    CALL             xCIKLWR         ;MASS3->MASS4
03E4 900108          866                     MOV        dptr,#MASS2
                     867                    
03E7 120000   F      868                    CALL        xCIKLWR         ; MASS2 --> MASS3
03EA 900104          869                    MOV         dptr,#MASS1
                     870                     
03ED 120000   F      871                   CALL         xCIKLWR        ; MASS1 --> MASS2
03F0 900100          872                    MOV         dptr,#MASS0
                     873                   
03F3 120000   F      874                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     875     
                     876                             
03F6 7862            877                             mov             r0,#rez_A
03F8 120000   F      878                             call    resar2          ;->r2..r5
                     879                                     ;call   aform
03FB 900100          880                                     mov                     dptr,#MASS0
03FE 120000   F      881                   call              saveIr2                 ; R2-R5 --> MAS0
                     882              
0401 900107          883                   MOV          dptr,#MASS1+3
0404 120000   F      884                   CALL       addx
0407 90010B          885                   MOV          dptr,#MASS2+3
040A 120000   F      886                   CALL       addx
040D 90010F          887                   MOV          dptr,#MASS3+3
0410 120000   F      888                  CALL        addx
0413 900113          889                   MOV       dptr,#MASS4+3
0416 120000   F      890                   call       addx
0419 900117          891                     MOV        dptr,#MASS5+3
041C 120000   F      892                  CALL        addx
041F 90011B          893                   MOV          dptr,#MASS6+3
0422 120000   F      894                   CALL       addx
0425 90011F          895                   MOV          dptr,#MASS7+3
0428 120000   F      896                  CALL        addx
042B 900123          897                  MOV        dptr,#MASS8+3
042E 120000   F      898                   call       addx
0431 900127          899                     MOV                     dptr,#MASS9+3
0434 120000   F      900                  call        addx
0437 020000   F      901                              jmp            endsum
                     902     
043A 020000   F      903     rmas4:          jmp                     mas4
                     904     ;массив из 20-ти измерений
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    15

043D B714FA          905     mas20:          cjne    @r1,#20,rmas4
0440 900148          906                                             mov                     dptr,#MASS18
0443 120000   F      907                     CALL            xCIKLWR         ;MASS18->MASS19
0446 900144          908                                             mov                     dptr,#MASS17
0449 120000   F      909                     CALL            xCIKLWR         ;MASS17->MASS18
044C 900140          910                     MOV       dptr,#MASS16
044F 120000   F      911                     CALL       xCIKLWR         ; MASS16 --> MASS17
0452 90013C          912                     MOV        dptr,#MASS15
                     913                    
0455 120000   F      914                    CALL        xCIKLWR        ; MASS15 --> MASS16
0458 900138          915                    MOV         dptr,#MASS14
                     916                    
045B 120000   F      917                    CALL        xCIKLWR        ; MASS14 --> MASS15
045E 900134          918                             mov                     dptr,#MASS13
                     919     
0461 120000   F      920                    CALL             xCIKLWR         ;MASS13->MASS14
0464 900130          921                     MOV        dptr,#MASS12
                     922                    
0467 120000   F      923                    CALL        xCIKLWR         ; MASS12 --> MASS13
046A 90012C          924                    MOV         dptr,#MASS11
                     925                     
046D 120000   F      926                   CALL         xCIKLWR        ; MASS11 --> MASS12
0470 900128          927                    MOV         dptr,#MASS10
                     928                   
0473 120000   F      929                    CALL        xCIKLWR        ; MASS10 --> MASS11
0476 900124          930                                      MOV       dptr,#MASS9
0479 120000   F      931                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     932     
047C 900120          933                                             mov                     dptr,#MASS8
047F 120000   F      934                     CALL            xCIKLWR         ;MASS8->MASS9
0482 90011C          935                                             mov                     dptr,#MASS7
0485 120000   F      936                     CALL            xCIKLWR         ;MASS7->MASS8
0488 900118          937                     MOV       dptr,#MASS6
048B 120000   F      938                     CALL       xCIKLWR         ; MASS6 --> MASS7
048E 900114          939                     MOV        dptr,#MASS5
                     940                    
0491 120000   F      941                    CALL        xCIKLWR        ; MASS5 --> MASS6
0494 900110          942                    MOV         dptr,#MASS4
                     943                    
0497 120000   F      944                    CALL        xCIKLWR        ; MASS4 --> MASS5
049A 90010C          945                             mov                     dptr,#MASS3
                     946     
049D 120000   F      947                    CALL             xCIKLWR         ;MASS3->MASS4
04A0 900108          948                     MOV        dptr,#MASS2
                     949                    
04A3 120000   F      950                    CALL        xCIKLWR         ; MASS2 --> MASS3
04A6 900104          951                    MOV         dptr,#MASS1
                     952                     
04A9 120000   F      953                   CALL         xCIKLWR        ; MASS1 --> MASS2
04AC 900100          954                    MOV         dptr,#MASS0
                     955                   
04AF 120000   F      956                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     957     
                     958                             
04B2 7862            959                             mov             r0,#rez_A
04B4 120000   F      960                             call    resar2          ;->r2..r5
                     961                                     ;call   aform
04B7 900100          962                                     mov                     dptr,#MASS0
04BA 120000   F      963                   call              saveIr2                 ; R2-R5 --> MAS0
                     964              
04BD 900107          965                   MOV          dptr,#MASS1+3
04C0 120000   F      966                   CALL       addx
04C3 90010B          967                   MOV          dptr,#MASS2+3
04C6 120000   F      968                   CALL       addx
04C9 90010F          969                   MOV          dptr,#MASS3+3
04CC 120000   F      970                  CALL        addx
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    16

04CF 900113          971                   MOV       dptr,#MASS4+3
04D2 120000   F      972                   call       addx
04D5 900117          973                     MOV        dptr,#MASS5+3
04D8 120000   F      974                  CALL        addx
04DB 90011B          975                   MOV          dptr,#MASS6+3
04DE 120000   F      976                   CALL       addx
04E1 90011F          977                   MOV          dptr,#MASS7+3
04E4 120000   F      978                  CALL        addx
04E7 900123          979                  MOV        dptr,#MASS8+3
04EA 120000   F      980                   call       addx
04ED 900127          981                     MOV                     dptr,#MASS9+3
04F0 120000   F      982                  call        addx
                     983     ;27
04F3 90012B          984                                     MOV        dptr,#MASS10+3
04F6 120000   F      985                   CALL       addx
04F9 90012F          986                                     MOV        dptr,#MASS11+3
04FC 120000   F      987                   CALL       addx
04FF 900133          988                   MOV          dptr,#MASS12+3
0502 120000   F      989                   CALL       addx
0505 900137          990                   MOV          dptr,#MASS13+3
0508 120000   F      991                  CALL        addx
050B 90013B          992                   MOV       dptr,#MASS14+3
050E 120000   F      993                   call       addx
0511 90013F          994                                     MOV        dptr,#MASS15+3
0514 120000   F      995                     CALL     addx
0517 900143          996                   MOV          dptr,#MASS16+3
051A 120000   F      997                   CALL       addx
051D 900147          998                   MOV          dptr,#MASS17+3
0520 120000   F      999                  CALL        addx
0523 90014B         1000                  MOV        dptr,#MASS18+3
0526 120000   F     1001                   call       addx
0529 90014F         1002                                     MOV                     dptr,#MASS19+3
052C 120000   F     1003                  call        addx
052F 802F           1004                                     jmp             endsum
                    1005     ;массив из 4х измерений
0531                1006     mas4:                   
0531 900108         1007                                             MOV        dptr,#MASS2
0534 120000   F     1008                    CALL        xCIKLWR         ; MASS2 --> MASS3
0537 900104         1009                    MOV         dptr,#MASS1
053A 120000   F     1010                    CALL        xCIKLWR        ; MASS1 --> MASS2
053D 900100         1011                    MOV         dptr,#MASS0
0540 120000   F     1012                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1013     
                    1014                             
0543 7862           1015                             mov             r0,#rez_A
0545 120000   F     1016                             call    resar2          ;->r2..r5
                    1017                                     ;call   aform
0548 900100         1018                                     mov                     dptr,#MASS0
054B 120000   F     1019                   call              saveIr2                 ; R2-R5 --> MAS0
                    1020              
054E 900107         1021                   MOV          dptr,#MASS1+3
0551 120000   F     1022                   CALL       addx
0554 90010B         1023                   MOV          dptr,#MASS2+3
0557 120000   F     1024                   CALL       addx
055A 90010F         1025                   MOV          dptr,#MASS3+3
055D 120000   F     1026                  CALL        addx
                    1027                  
                    1028             ;23.03          
0560                1029     endsum:
0560 786E           1030                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
0562 06             1031                                     inc             @r0
0563 E6             1032                                     mov             a,@r0   
0564 200105         1033                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1034                                     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    17

0567 B53F31         1035                                     cjne    a,chmasN,masx5
056A D201           1036                                     setb    bitmas                  ;массив заполнен
056C 853F6E         1037     masfull:                mov             chmas,chmasN
056F 783F           1038                                     mov             r0,#chmasN
0571 E6             1039                                     mov             a,@r0
                    1040     ;masfull:
0572 B40208         1041                                     cjne    a,#2,nochn2
0575 900000   F     1042                                     MOV        DPTR,#ch2;10 
0578 120000   F     1043                                     CALL   ldc_ltemp                 ; ltemp <-- 2
057B 8028           1044                                     jmp             mas5div
                    1045     
057D B40A08         1046     nochn2:         cjne    a,#10,nochn10
0580 900000   F     1047                                                     MOV        DPTR,#ch10 
0583 120000   F     1048                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0586 801D           1049                                     jmp             mas5div
                    1050     
0588 B41408         1051     nochn10:        cjne    a,#20,nochn20
058B 900000   F     1052                                                     MOV        DPTR,#ch20 
058E 120000   F     1053                                     CALL   ldc_ltemp                 ; ltemp <-- 20
0591 8012           1054                                     jmp             mas5div
                    1055     
0593 900000   F     1056     nochn20:        MOV        DPTR,#ch4 
0596 120000   F     1057                                     CALL   ldc_ltemp                 ; ltemp <-- 4
0599 800A           1058                                     jmp             mas5div
                    1059     
059B 856E0B         1060     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
059E E4             1061                                     clr     a
059F F50A           1062                                     mov     ltemp+2,a
05A1 F509           1063                                     mov     ltemp+1,a
05A3 F508           1064                                     mov     ltemp,a
                    1065     
05A5                1066     mas5div:
05A5 120000   F     1067                                     CALL       zdiv;divide                           ; R2-R5 =
                    1068                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1069     
                    1070                             
                    1071      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1072     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1073     ;получен результат 3 байта и знак
05A8 7866           1074                             mov             r0,#rez_A1
05AA 120000   F     1075                             call    saver2           ;сохр среднее по массиву
                    1076     ;;8.11.06                       mov             chmasN,#0
                    1077      ;;;;;;;;;;;;
                    1078      ;;;;;;;;;;;;
05AD C3             1079                             clr             c
05AE 799A           1080                             mov             r1,#parT
05B0 7402           1081                             mov             a,#2
05B2 97             1082                             subb    a,@r1
05B3 501D           1083                             jnc             ankor           ;T<3
                    1084                             ;A-=РЕЗ1                                ;T>3
05B5 120402         1085                             call    altof                   ;r2..r5->float
05B8 785E           1086                             mov             r0,#rez_Ame
05BA 120000   F     1087                             call    saver2
                    1088                             ;;;;
05BD 7890           1089                             mov             r0,#koefKp;->r8..r11
05BF EA             1090                             mov             a,r2
05C0 30E702         1091                             jnb             acc.7,nminus3
05C3 7894           1092                             mov             r0,#koefKm;->r8..r11
05C5 120000   F     1093     nminus3:                call    resar8
05C8 120203         1094                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05CB 785E           1095                             mov             r0,#rez_Ame
05CD 120000   F     1096                             call    saver2
05D0 8022           1097                             jmp             gotoKD
                    1098     
05D2                1099     ankor:  
05D2 7898           1100                             mov             r0,#chinkor
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    18

05D4 E6             1101                             mov             a,@r0
05D5 30E703         1102                             jnb             acc.7,nokorr
                    1103                             ;коррекция 0
05D8 020000   F     1104                             jmp             kornul
05DB                1105     nokorr: 
                    1106                             ;mov            r10,#00         ;       chavt
                    1107                             ;mov            r11,#00h
05DB 7881           1108                             mov              r0,#chavt      
05DD E6             1109                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
05DE 30E750         1110                             jnb             acc.7,nonulavt;jnz              nonulavt        
05E1 750A00         1111                             mov             r10,#0;1;00;02          
05E4 750BC8         1112                             mov             r11,#0c8h;90h;0c8h;58h
05E7 7898           1113                             mov             r0,#chinkor
05E9 120000   F     1114                             call    chcmp
05EC 705E           1115                             jnz             noavk
                    1116                             ;автокалибровка
05EE 020000   F     1117                             jmp             autoka;noavk;
                    1118     
05F1 020000   F     1119     rafterK:                jmp             afterK
                    1120     ;;;;;;;;;;
05F4 C3             1121      gotoKD:                clr             c
05F5 799A           1122                             mov             r1,#parT
05F7 7404           1123                             mov             a,#4
05F9 97             1124                             subb    a,@r1
05FA 50F5           1125                             jnc             rafterK         ;T<5
                    1126                             ;A1-=A- *KD                     ;T>5
05FC 120000   F     1127                             call            findkoef                                ;r2,r3-hex
05FF 12046C         1128                                     call            rebyte2                         ;r2..r5- he
                             x
                    1129                                     
0602 120402         1130                                     call    altof                   ;r2..r5->float
0605 900000   F     1131                                     mov     dptr,#CHtho;100000
0608 120000   F     1132                                     call    ldc_ltemp                       ;r8..r11
060B 1202B7         1133                                     call    fldiv
060E 120000   F     1134                                     call    move28
                    1135                             
0611 785E           1136                             mov             r0,#rez_Ame;->r2..r5   ???????????/
0613 120000   F     1137                             call    resar2
0616 120203         1138                                     call    flmul
0619 120343         1139                             call    ftol                    ;float->int
061C 7866           1140                             mov             r0,#rez_A1
061E 120000   F     1141                             call    saver2
0621 786A           1142                             mov             r0,#rez_A0;->r8..r11 hex
0623 120000   F     1143                             call    resar8
0626 120000   F     1144                             call    lsub            ;A3=A-1-A0
0629 789C           1145                             mov             r0,#rez_A3
062B 120000   F     1146                             call    saver2
062E 020000   F     1147                             jmp             labelB  
                    1148      ;;;;;;;;;;; 9.11.06
0631 789A           1149     nonulavt:        mov            r0,#parT
0633 E6             1150                             mov             a,@r0
0634 6401           1151                             xrl             a,#01
0636 700F           1152                             jnz             avtdec1
0638 7982           1153                             mov             r1,#chavt+1     ;T=1 chavt-10
063A 120000   F     1154                             call    tenmin
063D 7999           1155     kordec10:       mov             r1,#chinkor+1
063F 120000   F     1156                             call    tenmin
0642 801B           1157                             jmp             rezmul
                    1158     
0644 020000   F     1159     rmo220:         jmp             mo220
                    1160     
0647 7981           1161     avtdec1:        mov             r1,#chavt       
0649 120000   F     1162                             call    chdec           ;chavt-1
                    1163     ;                       jmp             kordec1;rezmul
064C 789A           1164     noavk:          mov             r0,#parT
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    19

064E E6             1165                             mov             a,@r0
064F 6401           1166                             xrl             a,#01
0651 7007           1167                             jnz             kordec1
                    1168                             ;T=1 chinkor-10
0653 7999           1169                     mov             r1,#chinkor+1
0655 120000   F     1170                             call    tenmin
0658 8005           1171                             jmp             rezmul
065A 7998           1172     kordec1:        mov             r1,#chinkor
065C 120000   F     1173                             call    chdec           ; chinkor-1
                    1174                        ;9.11.06
                    1175                             ;;;;;;;;;;;;;;
                    1176                             ;;;;;;;;;;;;;
                    1177     ;(РЕЗ1-АN)*K
065F                1178     rezmul:
065F 7866           1179                             mov             r0,#rez_A1;->r2..r5
0661 120000   F     1180                             call    resar2
0664 120402         1181                             call    altof   ;r2..r5->float  6.06    
0667 7884           1182                             mov             r0,#kor0_AN;->r8..r11
0669 120000   F     1183                             call    resar8
066C 1201D1         1184                             call    flsub
066F 7890           1185                             mov             r0,#koefKp;->r8..r11
0671 EA             1186                             mov             a,r2
0672 30E702         1187                             jnb             acc.7,nminus
                    1188                             ;jnb            bitznak,nminus
                    1189                     
0675 7894           1190                             mov             r0,#koefKm;->r8..r11
0677 120000   F     1191     nminus:         call    resar8
067A 120203         1192                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
067D 785E           1193                             mov             r0,#rez_Ame
067F 120000   F     1194                             call    saver2
                    1195      
0682                1196     afterK:                 
                    1197     ;;;;;;;;;;;;;;
0682 EA             1198                                     mov             a,r2
0683 547F           1199                                     anl             a,#7fh
0685 FA             1200                                     mov             r2,a
0686 900000   F     1201                                     mov     dptr,#ch_250;220;220000
0689 120000   F     1202                                     call    ldc_ltemp                       ;r8..r11=8
068C 1201D6         1203                                     call    flcmp
068F 50B3           1204                                     jnc             rmo220          ;A>220000
                    1205                                     ;;;;;;;;;
0691 30156D         1206                                     jnb                     biteizm,notestizm
0694 78B1           1207                                     mov                     r0,#vichR
0696 B62135         1208                                     cjne            @r0,#21h,note21
0699 7A50           1209                                     mov                     r2,#50h                 ;-11a
069B 7B18           1210                                     mov                     r3,#18h                 ;k8
069D 12046C         1211                                     call            rebyte2                         ;r2..r5- he
                             x
06A0 120402         1212                                     call            altof                   ;r2..r5->float
06A3 C002           1213                                     push            rr2
06A5 C003           1214                                     push            rr3
06A7 C004           1215                                     push            rr4
06A9 C005           1216                                     push            rr5
06AB 7A50           1217                                     mov                     r2,#50h                 ;k10
06AD 7B20           1218                                     mov                     r3,#20h
06AF 12046C         1219     re11_7: call            rebyte2                 ;r2..r5
06B2 120402         1220                                     call            altof                   ;r2..r5->float
06B5 120000   F     1221                                     call            move28
06B8 D005           1222                                     pop                     rr5
06BA D004           1223                                     pop                     rr4
06BC D003           1224                                     pop                     rr3
06BE D002           1225                                     pop                     rr2
06C0 1202B7         1226                                     call            fldiv
06C3 900000   F     1227                                     mov                     dptr,#ch_10
06C6 120000   F     1228                                     call            ldc_ltemp                       ;r8..r11
06C9 120203         1229                                     call            flmul
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    20

06CC 8050           1230                                     jmp                     temul   
06CE B62218         1231     note21: cjne            @r0,#22h,note22
06D1 7A50           1232                                     mov                     r2,#50h                 ;-09a
06D3 7B10           1233                                     mov                     r3,#10h                 ;k6
06D5 12046C         1234                                     call            rebyte2                         ;r2..r5- he
                             x
06D8 120402         1235                                     call            altof                   ;r2..r5->float
06DB C002           1236                                     push            rr2
06DD C003           1237                                     push            rr3
06DF C004           1238                                     push            rr4
06E1 C005           1239                                     push            rr5
06E3 7A50           1240                                     mov                     r2,#50h                 ;k8
06E5 7B18           1241                                     mov                     r3,#18h
06E7 80C6           1242                                     jmp                     re11_7
06E9 7A50           1243     note22: mov                     r2,#50h                 ;-7a
06EB 7B08           1244                                     mov                     r3,#08h                 ;k4
06ED 12046C         1245                                     call            rebyte2                         ;r2..r5- he
                             x
06F0 120402         1246                                     call            altof                   ;r2..r5->float
06F3 C002           1247                                     push            rr2
06F5 C003           1248                                     push            rr3
06F7 C004           1249                                     push            rr4
06F9 C005           1250                                     push            rr5
06FB 7A50           1251                                     mov                     r2,#50h                 ;k6
06FD 7B10           1252                                     mov                     r3,#10h
06FF 80AE           1253                                     jmp                     re11_7  
                    1254                                     ;;;;;;;;;
0701                1255     notestizm:
0701 301208         1256                                     jnb             bitklb,komulpz
0704 900000   F     1257                                     mov     dptr,#chk;100000
0707 120000   F     1258                                     call    ldc_long                        ;r2..r5
070A 8006           1259                                     jmp             komul
070C 120000   F     1260     komulpz:call            findkoef                                ;r2,r3-hex
070F 12046C         1261                                     call            rebyte2                         ;r2..r5- he
                             x
                    1262                                     
0712 120402         1263     komul:  call    altof                   ;r2..r5->float
0715 900000   F     1264                                     mov     dptr,#CHtho;100000
0718 120000   F     1265                             call    ldc_ltemp                       ;r8..r11=8
071B 1202B7         1266                                     call    fldiv
071E 120000   F     1267     temul:                          call    move28
0721 785E           1268                                     mov             r0,#rez_Ame
0723 120000   F     1269                                     call    resar2
                    1270                     
0726 120203         1271                                     call    flmul     ;A1-=A-*KD  fl
                    1272                                     
0729 120343         1273                                     call    ftol                    ;float->int
072C 7866           1274                                     mov             r0,#rez_A1
072E 120000   F     1275                                     call    saver2
0731 120402         1276                                     call    altof                   ;r2..r5->float
0734 900000   F     1277                                     mov     dptr,#ch_220;200;200000
0737 120000   F     1278                                     call    ldc_ltemp                       ;r8..r11=8
073A 1201D6         1279                                     call    flcmp
073D 5028           1280                                     jnc             rrmo220         ;A>200000
073F 301806         1281                                     jnb             knizm,goA2;             bitizm,goA2     
0742 20052F         1282                                     jb              bitavp,yesavp   
0745 20065B         1283     noavp:                  jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0748                1284     goA2:                    ;A2=A1-
0748 7866           1285                                      mov            r0,#rez_A1
074A 120000   F     1286                                     call    resar2
074D 787B           1287                                     mov             r0,#rez_A2
074F 120000   F     1288                                     call    saver2
0752                1289     goA3A2:                  ;A3=A2-A0
0752 786A           1290                                       mov           r0,#rez_A0
0754 120000   F     1291                                     call    resar8
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    21

0757 120000   F     1292                                     call    lsub
075A 789C           1293                                     mov             r0,#rez_A3
075C 120000   F     1294                                     call    saver2
                    1295                                     ;;;;;;
075F                1296     goonin:            ;jmp         goonind;indA3;8.11.06
075F 78AC           1297                                     mov             r0,#chind
0761 B60006         1298                                     cjne    @r0,#0,rnochi0
0764 020000   F     1299                                     jmp             goonind;indA3
                    1300     ;                               clr             P3.4
                    1301     ;                               nop
                    1302     ;                               nop
                    1303     ;                               setb    P3.4      ;??????????????????????/
                    1304     ;                               jmp             nop3_0
                    1305     
                    1306     ;                               jb              P3.0,nop3_0     ;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1307     ;                               mov             r0,#rez_A0              ;r2..r5->rez_A0
                    1308     ;                               call    saver2                  ;ЗАПОМНИТЬ СМЕЩЕНИЕ НУЛЯ
                    1309     ;                               jmp             rebyte          ;age2
0767 020000   F     1310     rrmo220:                jmp             mo220
076A 020000   F     1311     rnochi0:                jmp             nochi0
076D 7866           1312     gokaA2:                 mov             r0,#rez_A1                      ;(float)
076F 120000   F     1313                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
0772 80D4           1314                                             jmp             goA2
                    1315     ;;;;;;;;;;;;;;;;
0774 EA             1316     yesavp:                 mov             a,r2
0775 547F           1317                                     anl             a,#7fh
0777 FA             1318                                     mov             r2,a
0778 900000   F     1319                                     mov     dptr,#ch_10th;10000
077B 120000   F     1320                                     call    ldc_ltemp                       ;r8..r11=8
077E 1201D6         1321                                     call    flcmp
0781 50C2           1322                                     jnc             noavp           ;A>10000        
0783 78AE           1323                                     mov             r0,#diap                ;10-11
0785 B60902         1324                                     cjne    @r0,#9,avpgo
0788 80BB           1325                                     jmp             noavp
078A                1326     avpgo:                  
078A 06             1327                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
078B B60A01         1328                                     cjne    @r0,#0ah,clmasv
078E 16             1329                                     dec             @r0
078F                1330     clmasv:         ;сбросить массив
078F 120000   F     1331                             call    loadUS
                    1332                             ;call   louizm
0792 120000   F     1333                             call     clmassix
0795 78B3           1334                                     mov             r0,#summa
0797 120000   F     1335                                     call    clear4
079A 786A           1336                                     mov             r0,#rez_A0
079C 120000   F     1337                                     call    clear4
079F D207           1338                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07A1 80BC           1339                                jmp     goonin
                    1340     
07A3                1341     yesvich:        ;A2=E/A1-+F
07A3 78C0           1342                                             mov             r0,#konstB
07A5 120000   F     1343                                     call    resar2
07A8 120000   F     1344                                     call    move28
07AB 7866           1345                                     mov             r0,#rez_A1
07AD 120000   F     1346                                     call    resar2                          ;HEX
                    1347                                     
07B0 120402         1348                                     call            altof                   ;r2..r5->float
07B3 EA             1349                                     mov             a,r2                    ;модуль
07B4 547F           1350                                     anl             a,#7fh
07B6 FA             1351                                     mov             r2,a
07B7 120166         1352                                     call            fladd                           ;A1+B
                    1353                                     
07BA 900000   F     1354                                     mov     dptr,#CH_500;
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    22

07BD 120000   F     1355                                     call    ldc_ltemp                       ;r8..r11
07C0 1201D6         1356                                     call    flcmp
07C3 4073           1357                                     jc                      mo500R;error <500 >22000
07C5 900000   F     1358                                     mov     dptr,#CH_22T;
07C8 120000   F     1359                                     call    ldc_ltemp                       ;r8..r11
07CB 1201D6         1360                                     call    flcmp
07CE 5074           1361                                     jnc             mo500I          ;error
                    1362                                     ;;;;;;;;;;;;
07D0 120000   F     1363                                     call            move28
07D3 C008           1364                                     push            r8
07D5 C009           1365                                     push            r9
07D7 C00A           1366                                     push            r10
07D9 C00B           1367                                     push            r11
07DB 78BC           1368                                     mov             r0,#konstA
07DD 120000   F     1369                                     call    resar2
07E0 900000   F     1370                                     mov             dptr,#CH_B
07E3 120000   F     1371                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
07E6 120203         1372                                     call            flmul                           ;A*10-7
07E9 D00B           1373                                     pop                     r11
07EB D00A           1374                                     pop                     r10
07ED D009           1375                                     pop                     r9
07EF D008           1376                                     pop                     r8
07F1 1202B7         1377                                     call            fldiv                   ;результат R
07F4 78C9           1378                                     mov                     r0,#rez_R
07F6 120000   F     1379                                     call            saver2
07F9 120343         1380                                     call            ftol                    ;float->hex
                    1381                                     ;;;;;;;;;;
07FC 784F           1382                                             mov             r0,#abin
07FE 120000   F     1383                                             call    saver2
                    1384     ;;;;;;;;
0801 7840           1385                                                     mov             r0,#bufind
0803                1386     age9:
0803 7620           1387                             mov             @r0,#" "          ;погасить индикатор
0805 08             1388                             inc             r0
0806 B84BFA         1389                             cjne    r0,#bufind+11,age9
                    1390                                             
0809 78C9           1391                                             mov             r0,#rez_R
080B 120000   F     1392                                             call            resar2
                    1393     ;;;;;;;;;;
080E 900000   F     1394                                     mov             dptr,#CH_fl
0811 120000   F     1395                                     CALL   ldc_ltemp
0814 1202B7         1396                                     call            fldiv
                    1397     
0817 78B8           1398                                     mov             r0,#work                ;степень +
0819 7600           1399                                     mov             @r0,#0
081B 78B9           1400                                     mov             r0,#work+1;степень -
081D 7600           1401                                     mov             @r0,#0
081F 900000   F     1402     compa1: mov     dptr,#ch_1;
0822 120000   F     1403                                     call    ldc_ltemp                       ;r8..r11
0825 1201D6         1404                                     call    flcmp
0828 4026           1405                                     jc              equ0            ;<1
082A 78B8           1406                                     mov             r0,#work                        ;степень +
082C 06             1407                                     inc             @r0
082D 900000   F     1408                                     mov             dptr,#ch_10;
0830 120000   F     1409                                     call    ldc_ltemp                       ;r8..r11
0833 1202B7         1410                                     call            fldiv
0836 80E7           1411                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1412                                     ;;;;;;;;;;;;;;;;;;;
0838 900000   F     1413     mo500R: mov             dptr,#teOLR
083B 120000   F     1414                               call          lotext           ;ПРОСМОТР
083E 120000   F     1415                                     call            ind
0841 020000   F     1416                                     jmp                     nobitizm
0844 900000   F     1417     mo500I: mov             dptr,#teOLI
0847 120000   F     1418                               call          lotext           ;ПРОСМОТР
084A 120000   F     1419                                     call            ind
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    23

084D 020000   F     1420                                     jmp                     nobitizm
0850                1421     equ0:           ;;;;;   call            ftol                    ;float->int
0850 78B8           1422                                     mov             r0,#work                ;степень +
0852 B60019         1423                                     cjne    @r0,#0,equ00
                    1424                                     
0855 900000   F     1425     compa2: mov     dptr,#ch_1;
0858 120000   F     1426                                     call    ldc_ltemp                       ;r8..r11
085B 1201D6         1427                                     call    flcmp
085E 500E           1428                                     jnc             equ00           ;>1
0860 78B9           1429                                     mov             r0,#work+1                      ;степень -
0862 16             1430                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0863 900000   F     1431                                     mov             dptr,#ch_10;
0866 120000   F     1432                                     call    ldc_ltemp                       ;r8..r11
0869 120203         1433                                     call            flmul
086C 80E7           1434                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1435     
                    1436     
086E                1437     equ00:          
086E 7853           1438                                                     mov             r0,#adec
0870 7952           1439                                             mov             r1,#abin+3      ;hex->10
0872 120000   F     1440                                             call    bindec
                    1441     
                    1442                                                     ;если степень полож убирать младший байт
                    1443                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1444                                                     ;число в bufind..bufind+5
0875 78B8           1445                                             mov             r0,#work
0877 B60021         1446                                             cjne    @r0,#0,outr
087A 08             1447                                             inc             r0                      ;work+1
087B B6FF05         1448                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
087E 06             1449                                             inc                     @r0;!!!!!!!!!?
087F 785B           1450                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
0881 8003           1451                                             jmp                     bufr30
                    1452                                             ;;;;;;;;;;;;;;
0883 06             1453     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
0884 785C           1454                                                     mov             r0,#adec+9
0886 7945           1455     bufr30:         mov             r1,#bufind+5;6
0888 7F05           1456                                             mov             r7,#5;7
088A E6             1457     bufr2:                          mov             a,@r0
088B 2430           1458                                             add             a,#30h
088D F7             1459                                             mov             @r1,a
088E 19             1460                                             dec             r1
088F 18             1461                                             dec             r0
0890 DFF8           1462                                             djnz    r7,bufr2
                    1463     
0892 784F           1464                                             mov             r0,#abin
0894 120000   F     1465                                             call            clear4
0897 78B9           1466                                             mov             r0,#work+1
0899 801C           1467                                     jmp             outr5
                    1468     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
089B 785C           1469     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
089D C3             1470                                             clr             c
089E 79B8           1471                                             mov             r1,#work
08A0 E8             1472                                             mov             a,r0
08A1 14             1473                                             dec             a                                  
                                  ;n-1
08A2 97             1474                                             subb    a,@r1
08A3 F8             1475                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
08A4 7945           1476                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    24

08A6 7F05           1477                                             mov             r7,#5;7
08A8 E6             1478     bufr:                           mov             a,@r0
08A9 2430           1479                                             add             a,#30h
08AB F7             1480                                             mov             @r1,a
08AC 19             1481                                             dec             r1
08AD 18             1482                                             dec             r0
08AE DFF8           1483                                             djnz    r7,bufr
                    1484     
08B0 784F           1485                                             mov             r0,#abin
08B2 120000   F     1486                                             call            clear4
08B5 78B8           1487                                     mov             r0,#work
08B7 E6             1488     outr5:                  mov             a,@r0
08B8 F552           1489                                             mov             abin+3,a
                    1490                                                                     ;n(hex)->abin
08BA 120000   F     1491                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
08BD 2552           1492                                             add             a,abin+3
08BF F552           1493                                             mov             abin+3,a
08C1 7853           1494                                             mov             r0,#adec
08C3 7952           1495                                             mov             r1,#abin+3      ;hex->10
08C5 120000   F     1496                                             call    bindec
08C8 855C48         1497                                             mov             bufind+8,adec+9
08CB 855B47         1498                                             mov             bufind+7,adec+8
08CE 754966         1499                                             mov             bufind+9,#66h
08D1 020000   F     1500                                             jmp             nobitizm;       goonin;call     ind
                    1501                                             
                    1502                                     ;;;;;;;;;;;;;;;;;;;;;
                    1503     ;;;;;;;;;;;;;
                    1504     
08D4 300508         1505     mo220:             jnb          bitavp,indoll
08D7 301805         1506                                jnb          knizm,indoll;bitizm,indoll
08DA 78AE           1507                                     mov             r0,#diap
08DC B6000B         1508                                     cjne    @r0,#0,nodi2
                    1509                                ;10-2
08DF 900000   F     1510     indoll:                 mov             dptr,#teOLL;OLL
08E2 120000   F     1511                                     call    lotext
08E5 D217           1512                                     setb    bitoll
08E7 020000   F     1513                                     jmp             goonin  
                    1514     
08EA 16             1515     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1516     
08EB B6FF01         1517                                     cjne    @r0,#0ffh,nodi9
08EE 06             1518                                     inc             @r0
                    1519     
08EF 120000   F     1520     nodi9:          call    loadUS
                    1521                                     ;call   louizm
                    1522                                     ;сбросить массив
08F2 120000   F     1523                                     call     clmassix
08F5 78B3           1524                                     mov             r0,#summa
08F7 120000   F     1525                                     call    clear4
08FA 786A           1526                                     mov             r0,#rez_A0
08FC 120000   F     1527                                     call    clear4  
08FF D207           1528                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0901 020000   F     1529                                jmp     goonin
                    1530     
0904 16             1531     nochi0:                 dec             @r0                     ;СТИ-1
0905 020000   F     1532                                     jmp             labelB  
                    1533     
                    1534             
                    1535     ;;;;;;;;;;;;;;;
                    1536     
0908                1537     nop3_0: ;;      ;rez_A-rez_A0
                    1538                     ;;                      mov             r0,#rez_A0
                    1539                     ;;                      call    resar8
                    1540                     ;;                      call    lsub
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    25

                    1541                     ;;                      mov             r0,#rez_A
                    1542                     ;;;                     call    saver2
                    1543      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0908 789C           1544      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
090A 120000   F     1545                                             call    resar2
090D 900000   F     1546                                             mov             dptr,#ch100              
0910 120000   F     1547                                             call    ldc_ltemp        
0913 120000   F     1548                                             call    zdiv            ;rez_A3/100=r2..r5
                    1549                                     
0916 EC             1550                                             mov             a,r4
0917 20E71E         1551                                             jb              acc.7,aless0
091A 4408           1552                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
091C F5D3           1553                                             mov             DAC0H,a
                    1554                                                                             ;мл байт
091E ED             1555                                             mov             a,r5
091F F5D2           1556                                             mov             DAC0L,a
0921 801E           1557                                             jmp             moveA3;
                    1558     
0923 B70207         1559     no3parN:                        cjne    @r1,#2,no2parN
                    1560                                             ;в байт 0  записать пробел
0926 7946           1561                                             mov             r1,#bufind+6
0928 7720           1562                                             mov             @r1,#" ";0fdh;
092A 020000   F     1563                                             jmp             seeind;moveA3
                    1564     
092D                1565     no2parN:                        ;в байты 0 и 1 записать пробел
092D 7945           1566                                             mov             r1,#bufind+5
092F 7720           1567                                             mov             @r1,#" ";0fdh;" "
0931 09             1568                                             inc             r1
0932 7720           1569                                             mov             @r1,#" ";0fdh;" "
0934 807C           1570                                             jmp             seeind;moveA3
0936 807A           1571      rseeind:               jmp             seeind
0938 F4             1572     aless0:                         cpl             a
0939 54F7           1573                                             anl             a,#0f7h         ;d11=0
093B F5D3           1574                                             mov             DAC0H,a
                    1575                                                                             ;мл байт
093D ED             1576                                             mov             a,r5
093E F4             1577                                             cpl             a
093F F5D2           1578                                             mov             DAC0L,a
0941                1579     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1580                                     
                    1581                                             
0941                1582     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1583                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1584                     ;до конца цикла измерения результат не размещать в буфере
                    1585                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1586                     ;и возврату в режим измерения
0941 201456         1587                                             jb              bitvich,rnorvich
0944 201053         1588                                             jb              bitt2,rnorvich
0947 2017EC         1589                                             jb              bitoll,rseeind
                    1590                                             
094A 2011E9         1591                                             jb              bitmenu,rseeind
094D 200BE6         1592                                             jb              bitmem,rseeind
                    1593     ;;;;;;;;;;;;;;
                    1594                                             ; mov           r0,#rez_A3
                    1595                                             ;call   resar2
                    1596                                             ;call   ftol                    ;float->int r2..r5
                    1597     ;;;;;;;;
0950 789C           1598                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
0952 120000   F     1599                                             call    resar2;????????????????17.01.07
                    1600                                     
0955 120000   F     1601                                             call    maform
0958 784F           1602                                             mov             r0,#abin
095A 120000   F     1603                                             call    saver2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    26

                    1604     ;;;;;;;;
                    1605                                             
095D 7853           1606                                             mov             r0,#adec
095F 7952           1607                                             mov             r1,#abin+3      ;hex->10
0961 120000   F     1608                                             call    bindec
                    1609                                     
0964 785C           1610                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0966 7946           1611                                             mov             r1,#bufind+6
0968 7F07           1612                                             mov             r7,#7
096A E6             1613     bufdec:                         mov             a,@r0
096B 2430           1614                                             add             a,#30h
096D F7             1615                                             mov             @r1,a
096E 19             1616                                             dec             r1
096F 18             1617                                             dec             r0
0970 DFF8           1618                                             djnz    r7,bufdec
0972 7847           1619                                             mov             r0,#bufind+7
0974 762D           1620                                             mov             @r0,#2dh          ;-2..-9
0976 7840           1621                                             mov             r0,#bufind
0978 762B           1622                                             mov             @r0,#2bh
097A 300202         1623                                             jnb             znmat,nozzmi;bitznak,nozzmi
097D 762D           1624                                             mov             @r0,#2dh
097F 79AE           1625     nozzmi:                         mov             r1,#diap
0981 7848           1626                                             mov             r0,#bufind+8
0983 E7             1627                                             mov             a,@r1
0984 B40808         1628                                             cjne    a,#8,nodi8
0987 7630           1629                                             mov             @r0,#30h                 ;10-10
0989 18             1630                                             dec             r0
098A 7663           1631                                             mov             @r0,#63h;31h
098C 08             1632                                             inc             r0
098D 8015           1633                                             jmp             seegoon
098F B4090F         1634     nodi8:                          cjne    a,#9,nodis9
                    1635                                     
0992 7631           1636                                             mov             @r0,#31h           ;10-11
0994 18             1637                                             dec             r0
0995 7663           1638                                             mov             @r0,#63h;31h
                    1639                                     
0997 08             1640                                             inc             r0
0998 800A           1641                                             jmp             seegoon
                    1642     
099A 807A           1643     rnorvich:               jmp             norvich
099C 8085           1644     rno3parN:               jmp             no3parN
099E 020000   F     1645     rnot1in:                jmp             not1in
                    1646     
09A1 2432           1647     nodis9:                         add             a,#32h
09A3 F6             1648                                             mov             @r0,a;#37h;"T";
09A4 08             1649     seegoon:                        inc             r0
09A5 7641           1650                                             mov             @r0,#"A";"E";
09A7 08             1651                                             inc             r0
09A8 7600           1652                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09AA 08             1653                                             inc             r0;             mov             buf
                             ind+11
09AB 7610           1654                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1655                                             
                    1656     ;;;;;;;;;;;;;;;
                    1657     ;;;;;;goonind:
09AD 79AF           1658                                             mov             r1,#parN        ; ??????
09AF B703EA         1659                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1660                                     
                    1661             
09B2                1662     seeind:                         ;;;;;;;;;;;;;
09B2 784A           1663                                             mov             r0,#bufind+10
09B4 E6             1664                                             mov             a,@r0
09B5 300F03         1665                                             jnb             bitnul,nnnul
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    27

09B8 4408           1666                                             orl             a,#08h
09BA F6             1667                                             mov             @r0,a
09BB 799A           1668      nnnul:                         mov             r1,#parT
09BD B70304         1669                                             cjne    @r1,#3,nsec01
09C0 4410           1670                                             orl             a,#10h
09C2 800C           1671                                             jmp             nsec10   ;0,1s
09C4 B70204         1672      nsec01:                        cjne    @r1,#2,nsec1
09C7 4420           1673                                             orl             a,#20h    ;1s
09C9 8005           1674                                             jmp             nsec10
09CB B70102         1675     nsec1:                          cjne    @r1,#1,nsec10
09CE 4440           1676                                             orl             a,#40h
                    1677     
                    1678     ;;;;;;;;;;;;;;;;
09D0 F6             1679     nsec10:                         mov             @r0,a
09D1 300504         1680                                             jnb             bitavp,nobavp
09D4 4404           1681                                             orl             a,#04           ;bufind+10.2
09D6 F6             1682                                             mov             @r0,a
09D7 F6             1683                                             mov             @r0,a   
09D8 301803         1684     nobavp:                    jnb          knizm,nobitizm
09DB 4402           1685                                             orl             a,#02
09DD F6             1686                                              mov            @r0,a
09DE                1687     nobitizm:                       
09DE 301A07         1688                                             jnb             bitakt,notakt
09E1 C21A           1689                                             clr             bitakt
09E3 534AFE         1690                                             anl             bufind+10,#0feh
09E6 8005           1691                                             jmp             taktind
09E8 D21A           1692     notakt:                         setb    bitakt
09EA 434A01         1693                                             orl             bufind+10,#01                      
                                          
09ED                1694     taktind:                
                    1695     ;;;;;;;;;
09ED 301517         1696                                             jnb             biteizm,yesind
09F0 79B1           1697                                             mov             r1,#vichR
09F2 7848           1698                                             mov             r0,#bufind+8
09F4 B72107         1699                                             cjne    @r1,#21h,test9i
09F7 7631           1700                                             mov             @r0,#31h;11A
09F9 18             1701                                             dec             r0
09FA 7663           1702                                             mov             @r0,#63h
09FC 8009           1703                                             jmp             yesind
09FE B72204         1704     test9i:         cjne    @r1,#22h,test7i
0A01 7639           1705                                             mov             @r0,#39h;09A
0A03 8002           1706                                             jmp             yesind
0A05 7637           1707     test7i:         mov             @r0,#37h;07A
                    1708                                     
                    1709     ;;;;;;;;;
0A07                1710     yesind:         
0A07 301203         1711                                             jnb             bitklb,noklb
0A0A 434A80         1712                                             orl             bufind+10,#80h; on kmp
0A0D 300A03         1713     noklb:          jnb             bitbon,nobuf
0A10 434B02         1714                                             orl             bufind+11,#02h; on pysk
0A13 120000   F     1715     nobuf:          call    ind        ;пп выдачи на индикатор
0A16                1716     norvich: 
0A16 789A           1717                                     mov             r0,# parT
0A18 79AC           1718                                             mov             r1,#chind
0A1A B60181         1719                                             cjne    @r0,#1,rnot1in
0A1D                1720     labelB:                    ;;;;;;;;;;;
                    1721                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A1D 789F           1722                                                     mov     r0,#rez_A3+3
                    1723                             ;;;;;;;;
0A1F 79BB           1724                             mov             r1,#work+3
0A21 E6             1725                             mov             a,@r0
0A22 7F07           1726                             mov             r7,#7;кол сдв вправо
0A24 C3             1727     dvig3:          clr             c
0A25 13             1728                             rrc             a
0A26 DFFC           1729                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A28 FA             1730                             mov             r2,a    ;сохр байт
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    28

0A29 18             1731                             dec             r0              ;rez_A3+2
0A2A E6             1732                             mov             a,@r0
0A2B C0E0           1733                             push    acc
0A2D C3             1734                             clr             c
0A2E 7F01           1735                             mov             r7,#1
0A30 C3             1736     dvig2:          clr             c
0A31 33             1737                             rlc             a
0A32 DFFC           1738                             djnz    r7,dvig2 ;d12..d11       средний байт
0A34 4A             1739                             orl             a,r2
0A35 F7             1740                             mov             @r1,a;сформ мл байт
0A36 19             1741                             dec             r1
0A37 D0E0           1742                             pop             acc
                    1743                             
0A39 7F07           1744                             mov             r7,#7
0A3B C3             1745     dvig1:          clr             c
0A3C 13             1746                             rrc             a
0A3D DFFC           1747                             djnz    r7,dvig1 ;d18     ср байт
0A3F FA             1748                             mov             r2,a   ;сохр
0A40 18             1749                             dec             r0
0A41 E6             1750                             mov             a,@r0 ;rez_A3+1
0A42 C0E0           1751                             push    acc
                    1752                     
0A44 7F01           1753                             mov             r7,#1
0A46 C3             1754     dvig0:          clr             c
0A47 33             1755                             rlc             a
0A48 DFFC           1756                             djnz    r7,dvig0 ;        d21..d16
0A4A 4A             1757                             orl             a,r2
0A4B F7             1758                             mov             @r1,a   ; сформ средний  байт
0A4C 19             1759                             dec             r1
0A4D D0E0           1760                             pop             acc       ;rez_A3+1
                    1761                             ;;;;;;;;;;;;;;
                    1762     ;                       jb              acc.7,dvm
0A4F C3             1763                             clr             c
0A50 7F07           1764                             mov             r7,#7
0A52 C3             1765     dvig4:          clr             c
0A53 13             1766                             rrc             a
0A54 DFFC           1767                             djnz    r7,dvig4 ;        d22
0A56 FA             1768                             mov             r2,a   ;сохр
0A57 18             1769                             dec             r0;     rez_A3
0A58 E6             1770                             mov             a,@r0
                    1771                             ;;;;;
0A59 7F01           1772                             mov             r7,#1
0A5B C3             1773     vig0:           clr             c
0A5C 33             1774                             rlc             a
0A5D DFFC           1775                             djnz    r7,vig0 ;         d24..d30
0A5F 4A             1776                             orl             a,r2
0A60 F7             1777                             mov             @r1,a   ; сформ   байт
0A61 19             1778                             dec             r1
0A62 E6             1779                             mov             a,@r0
                    1780                             ;;;;;
0A63 20E709         1781                             jb              acc.7,dvm
0A66 C3             1782                             clr             c
0A67 7F07           1783                             mov             r7,#7
0A69 C3             1784     vig4:           clr             c
0A6A 13             1785                             rrc             a
0A6B DFFC           1786                             djnz    r7,vig4 ;         d
0A6D 8006           1787                             jmp             endsdv
                    1788     ;;;;;;;;;;;;                                    
0A6F 7F07           1789     dvm:            mov             r7,#7
0A71 D3             1790     dvig6:          setb            c
0A72 13             1791                             rrc             a
0A73 DFFC           1792                             djnz    r7,dvig6 ;        d31
0A75 F7             1793     endsdv:         mov             @r1,a
                    1794                                                             
                    1795      ;->work   
                    1796                             
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    29

0A76 900000   F     1797                             mov             dptr,#chzap
0A79 120000   F     1798                             call     ldc_long
0A7C 78BB           1799                              mov            r0,#work+3
0A7E 120000   F     1800                             call    ladd
0A81 ED             1801                             mov             a,r5
0A82 F5D5           1802                             mov             DAC1L,a
                    1803                             
0A84 EC             1804                             mov             a,r4
0A85 F5D6           1805                             mov             DAC1H,a
                    1806     
                    1807                                             ;;;;;;;;;;
0A87 78CF           1808                                             mov                     r0,#chbuf       
0A89 120000   F     1809                                             call            resar2  
0A8C 900000   F     1810                                             mov                     dptr,#ch_1       
0A8F 120000   F     1811                                             call            ldc_ltemp
0A92 1201D1         1812                                             call            flsub
0A95 78CF           1813                                             mov                     r0,#chbuf       
0A97 120000   F     1814                                             call            saver2  
0A9A 900000   F     1815                                             mov                     dptr,#ch_1
0A9D 120000   F     1816                                             call            ldc_ltemp
0AA0 1201D6         1817                                             call            flcmp
                    1818                                             
                    1819                                             
                    1820                                             
0AA3 505D           1821                                             jnc                     nobuf0
0AA5 200905         1822                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0AA8 200A04         1823                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0AAB 8045           1824                                             jmp             gocikle
                    1825     
0AAD                1826     yesprd: ;передать   A3 в буфер
0AAD 8009           1827                                             jmp             goonT
0AAF                1828     yesbuf:         ;записать   A3 в буфер
0AAF 120000   F     1829                                             call            resa_hl;dptr-
0AB2 120000   F     1830                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1831                                                                             ;в ячейке saven_bl
0AB5 120000   F     1832                                             call            save_hl
                    1833                                             
0AB8 78CD           1834     goonT:                          mov             r0,#interva;high  byte loadr2
0ABA E6             1835                                             mov             a,@r0
0ABB FC             1836                                             mov             r4,a
0ABC 08             1837                                             inc             r0
0ABD E6             1838                                             mov             a,@r0
0ABE FD             1839                                             mov             r5,a
0ABF E4             1840                                             clr             a
0AC0 FB             1841                                             mov             r3,a
0AC1 FA             1842                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0AC2 120402         1843                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1844     
0AC5 789A           1845                                                                             mov             r0,
                             #parT
0AC7 B60110         1846                                                                     cjne    @r0,#1,nott1
                    1847                                     
0ACA 900000   F     1848                                     mov                     dptr,#ch_2       
0ACD 120000   F     1849                                     call            ldc_ltemp
0AD0 120203         1850     intmul: call            flmul
0AD3 78CF           1851                                     mov                     r0,#chbuf
0AD5 120000   F     1852                                     call            saver2          ;*2
0AD8 8018           1853                                     jmp             gocikle
                    1854     
0ADA B60208         1855     nott1:                  cjne    @r0,#2,nott2
0ADD 900000   F     1856                                                     mov                     dptr,#ch_10      
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    30

0AE0 120000   F     1857                                     call            ldc_ltemp
0AE3 80EB           1858                                     jmp                     intmul                             
                                  ;*10
                    1859     
0AE5 B60502         1860     nott2:                  cjne    @r0,#5,nott5
                    1861     
0AE8 8008           1862                                             jmp             gocikle
                    1863     
0AEA C3             1864     nott5:           clr            c
0AEB 799A           1865                             mov             r1,#parT
0AED 7404           1866                             mov             a,#4
0AEF 97             1867                             subb    a,@r1
0AF0 500E           1868                             jnc             yestt5          ;T<5
0AF2 300708         1869     gocikle:        jnb             bitzus,nofz;bitbuf,nofz                                 
0AF5 120000   F     1870                             call    z_05s    ;0,5c
0AF8 120000   F     1871                             call    z_05s    ;0,5c
0AFB C207           1872                             clr     bitzus;bitbuf бит задержки засылки us
0AFD 020000   F     1873     nofz:           jmp     labelA;rebyte
                    1874     
                    1875     
0B00 80F0           1876     yestt5:         jmp             gocikle
                    1877     
0B02 78CF           1878     nobuf0:                         mov             r0,#chbuf
0B04 120000   F     1879                                                             call            resar2
0B07 900000   F     1880                                                                     mov                     dpt
                             r,#ch_1       
0B0A 120000   F     1881                                     call            ldc_ltemp
0B0D 1201D1         1882                                     call            flsub
0B10 80E0           1883                                             jmp             gocikle
                    1884     
                    1885     
0B12 B60205         1886     not1in:                         cjne    @r0,#2,not2in
0B15 7701           1887                                             mov             @r1,#1           ;T=2
0B17 020000   F     1888                                             jmp     labelB
                    1889     
0B1A B60305         1890     not2in:                         cjne    @r0,#3,not3in
0B1D 7709           1891                                             mov             @r1,#9          ;T=3
0B1F 020000   F     1892                                             jmp     labelB
0B22 7713           1893     not3in:                         mov             @r1,#19
0B24 020000   F     1894                                             jmp     labelB
                    1895     
                    1896     
                    1897     ;;;;;;;;;;;3.11.06
                    1898     
                    1899     ;;коррекция 0
0B27 7883           1900     KORnul:         mov             r0,#chdel
0B29 B60008         1901                             cjne    @r0,#0,nonuldel
                    1902                                     
                    1903                     ;       mov             a,P5       ;p5.3=1
                    1904                     ;       orl             a,#08
                    1905                     ;       mov             P5,a
                    1906                     ;       nop
                    1907                     ;       nop
                    1908                                     
                    1909                     ;       mov             a,P5              ;p5.0=0
                    1910                     ;       anl             a,#0feh
                    1911                     ;       mov             P5,a
                    1912             
0B2C 900000   F     1913                             mov             dptr,#kor0us
0B2F 120000   F     1914                             call    lospus          ;упр слово коррекции 0
0B32 8013           1915                             jmp             chdelmo
                    1916     
0B34                1917     nonuldel:       ;cjne   @r0,#7,no4del
0B34 B60316         1918                                                     cjne    @r0,#3,no4del
                    1919                             ;рез ->AN
0B37 7862           1920                             mov             r0,#rez_A;->r2..r5
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    31

0B39 120000   F     1921                             call    resar2
                    1922                     ;       mov             a,reacp         ;r2..r5 &&&&&&&&&&&
                    1923                     ;               mov             r2,a
                    1924                     ;               mov             a,reacp+1
                    1925                     ;               mov             r3,a
                    1926                     ;               mov             a,reacp+2
                    1927                     ;               mov             r4,a
                    1928                     ;               mov             a,reacp+3
                    1929                     ;               mov             r5,a
                    1930                                     ;;;;;;;;;;
0B3C 120402         1931                             call    altof           ;r2..r5->float
0B3F 7884           1932                             mov             r0,#kor0_AN;->kor0_AN
0B41 120000   F     1933                             call    saver2
                    1934                                     
                    1935                     ;       mov             a,P5            ;p5.0=1
                    1936                     ;       orl             a,#01
                    1937                     ;       mov             P5,a
                    1938                     ;       nop
                    1939                     ;       nop
                    1940                                     
                    1941                     ;       mov             a,P5                    ;p5.3=0 
                    1942                     ;       anl             a,#0f7h
                    1943                     ;       mov             P5,a                    
0B44 120000   F     1944                             call    loadUS          ;восстан исходное упр слово
0B47 7883           1945     chdelmo:        mov             r0,#chdel
0B49 06             1946                             inc             @r0             ;chdel+1
0B4A 020000   F     1947                             jmp              rebyte
                    1948     
0B4D                1949     no4del:         ;cjne   @r0,#14,chdelmo
0B4D B606F7         1950                                             cjne    @r0,#6,chdelmo
0B50 7600           1951                             mov             @r0,#0          ;chdel
0B52 7898           1952                             mov             r0,#chinkor
0B54 7600           1953                             mov             @r0,#00;1;00;02;600;
0B56 08             1954                             inc             r0
0B57 76C8           1955                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0B59 120000   F     1956                             call    clmassix;сбросить массив скольз среднего
0B5C 020000   F     1957                             jmp              rebyte
                    1958     
                    1959     ;автокалибровка
0B5F                1960     autoka:  ;;  mov                r0,#chavt
                    1961                      ;;  call               chcmp
                    1962                      ;;  jz         nulavt
                    1963                     ;;   mov                r1,#chavt
                    1964                     ;;   call               chdec;chavt-1
                    1965                      ;; jmp         rebyte
0B5F                1966     nulavt:  ;;;;;
0B5F 7883           1967                             mov             r0,#chdel
0B61 B6000E         1968                             cjne    @r0,#0,nndelch
0B64 E585           1969                             mov   a,p5
0B66 4404           1970                             orl             a,#04              ;p5.2=1
0B68 00             1971                             nop
0B69 00             1972                             nop
0B6A 543F           1973                             anl             a,#3fh          ;p5.6,p5.7=0
0B6C F585           1974                             mov   p5,a
0B6E 06             1975                             inc             @r0
0B6F 020000   F     1976                             jmp              rebyte
                    1977     
0B72 B6033D         1978     nndelch:        cjne    @r0,#3,n4delch
                    1979                             ;pez->A+
                    1980                             ;K+=000/(A+-AN)
                    1981                             ;mov            r0,#rez_A;->r2..r5
                    1982                             ;call   resar2
0B75 E577           1983                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0B77 FA             1984                                     mov             r2,a
0B78 E578           1985                                     mov             a,reacp+1
0B7A FB             1986                                     mov             r3,a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    32

0B7B E579           1987                                     mov             a,reacp+2
0B7D FC             1988                                     mov             r4,a
0B7E E57A           1989                                     mov             a,reacp+3
0B80 FD             1990                                     mov             r5,a
                    1991                                     ;;;;;;;;;;;;;;;
0B81 120402         1992                             call    altof                   ;r2..r5->float
0B84 7888           1993                             mov             r0,#rezAp;->rezAp
0B86 120000   F     1994                             call    saver2                          
0B89 7884           1995                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0B8B 120000   F     1996                             call    resar8                          
0B8E 1201D1         1997                             call    flsub           ; r2..r5(A+-AN)
0B91 120000   F     1998                             call    move28     ;r2..r5->r8..r11
0B94 900000   F     1999                             mov             dptr,#CH2tho;000->r2..r5 float
0B97 120000   F     2000                             call    ldc_long                
0B9A 1202B7         2001                             call    fldiv
0B9D EA             2002                             mov             a,r2
0B9E 547F           2003                             anl             a,#7fh
0BA0 FA             2004                             mov             r2,a
0BA1 7890           2005                             mov             r0,#koefKp;->koefKp
0BA3 120000   F     2006                             call    saver2
                    2007                       
                    2008                     ;       anl             P5,#0feh                ;p5.0=0 
0BA6 E585           2009                     mov             a,P5
0BA8 543B           2010                             anl             a,#3bh;acp-
0BAA F585           2011                             mov             P5,a
0BAC 7883           2012                             mov             r0,#chdel
0BAE 06             2013                             inc             @r0                       ;ch+1
0BAF 020000   F     2014                             jmp             rebyte
                    2015     
0BB2 B6063A         2016     n4delch:        cjne    @r0,#6,n8delch
                    2017                             ; pez->A-
                    2018                             ;K-=000/(A--AN)
                    2019                     ;       mov     r0,#rez_A;->r2..r5
                    2020                     ;       call    resar2
0BB5 E577           2021                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0BB7 FA             2022                                     mov             r2,a
0BB8 E578           2023                                     mov             a,reacp+1
0BBA FB             2024                                     mov             r3,a
0BBB E579           2025                                     mov             a,reacp+2
0BBD FC             2026                                     mov             r4,a
0BBE E57A           2027                                     mov             a,reacp+3
0BC0 FD             2028                                     mov             r5,a
                    2029                                     ;;;;;;;;;;;;;;;
0BC1 120402         2030                             call    altof                   ;r2..r5->float
0BC4 788C           2031                             mov             r0,#rezAm;->rezAm
0BC6 120000   F     2032                             call    saver2                          
0BC9 7884           2033                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0BCB 120000   F     2034                             call    resar8                          
0BCE 1201D1         2035                             call    flsub                   ; r2..r5(A--AN)
0BD1 120000   F     2036                             call    move28                  ;r2..r5->r8..r11
0BD4 900000   F     2037                             mov             dptr,#CH2tho    ;000->r2..r5 float
0BD7 120000   F     2038                             call    ldc_long                
0BDA 1202B7         2039                             call    fldiv
0BDD EA             2040                             mov             a,r2
0BDE 547F           2041                             anl             a,#7fh
0BE0 FA             2042                             mov             r2,a
0BE1 7894           2043                             mov             r0,#koefKm;->koefKm
0BE3 120000   F     2044                             call    saver2
                    2045                        
0BE6 120000   F     2046                             call    loadus
0BE9 7883           2047                             mov             r0,#chdel
0BEB 06             2048                             inc             @r0                       ;ch+1
0BEC 020000   F     2049                        jmp    rebyte
                    2050     
0BEF B6090F         2051     n8delch:        cjne    @r0,#9,n12delch
0BF2 7600           2052                             mov             @r0,#0
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    33

0BF4 7981           2053                             mov             r1,#chavt
0BF6 770C           2054                             mov             @r1,#0ch;6;1;
0BF8 09             2055                             inc             r1
0BF9 7780           2056                             mov             @r1,#80h;40h;
0BFB 120000   F     2057                             call   clmassix     ;сбросить массив среднего
0BFE 020000   F     2058                             jmp             rebyte
0C01 06             2059     n12delch:       inc             @r0
0C02 020000   F     2060                             jmp             rebyte
                    2061     
                    2062     ;in-r1-count
0C05                2063     chdec:          ;mov            r1,#chavt               ;chavt-1
0C05 E7             2064                             mov             a,@r1
0C06 FC             2065                             mov             r4,a
0C07 09             2066                             inc             r1
0C08 E7             2067                             mov             a,@r1
0C09 FD             2068                             mov             r5,a
0C0A C202           2069                             clr             rr2
0C0C C203           2070                             clr             rr3
0C0E 900000   F     2071                             mov             dptr,#ch1        
0C11 120000   F     2072                             call    ldc_ltemp
0C14 120000   F     2073                             call    lsub
0C17 ED             2074                             mov             a,r5
0C18 F7             2075                             mov             @r1,a
0C19 19             2076                             dec             r1
0C1A EC             2077                             mov             a,r4
0C1B F7             2078                             mov             @r1,a
0C1C 22             2079                             ret      
                    2080     
                    2081     
                    2082     
                    2083     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
0C1D 75E700         2084      ind:   mov             EIE2,#00H;mov   IE,#00h
0C20 120000   F     2085                     call    mign
0C23 7840           2086                      mov            r0,#bufind;+11
0C25 7F0C           2087                      mov            r7,#12
0C27 C286           2088      nexin: clr             p0.6
0C29 E6             2089                     mov             a,@r0
0C2A F59B           2090                     mov             SPI0DAT,a
0C2C 20FBFD         2091                     jb              TXBSY,$
0C2F D286           2092                     setb    p0.6
0C31 120000   F     2093                     call    z_9             ;25mks
0C34 08             2094                     inc             r0;dec          r0
0C35 DFF0           2095                     djnz    r7,nexin
0C37 75E730         2096                     mov             EIE2,#30H;mov   IE,#80h
0C3A 22             2097                ret
                    2098     
                    2099     
0C3B 7A08           2100     zapadc:   mov R2,#8
0C3D D297           2101     sdv:      setb P1.7
0C3F 33             2102               rlc A
0C40 9296           2103                     mov P1.6,C
0C42 120000   F     2104                     call tim2
                    2105                                     
0C45 C297           2106                     clr P1.7
0C47 120000   F     2107                     call tim2
0C4A DAF1           2108                     djnz R2,sdv
0C4C D296           2109                     setb P1.6
0C4E 22             2110                     ret
                    2111     
0C4F 7A08           2112     chtadc:   mov R2,#8
0C51 D297           2113     sdv1:     setb P1.7
0C53 120000   F     2114               call tim2
0C56 C297           2115                     clr P1.7
0C58 A296           2116                     mov C,P1.6
0C5A 33             2117                     rlc A
0C5B 120000   F     2118                     call tim2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    34

0C5E DAF1           2119                     djnz R2,sdv1
0C60 22             2120                     ret
                    2121     
0C61 7E30           2122     tim:      mov R6,#30h;38h
0C63 DEFE           2123     tim1:     djnz R6,tim1
0C65 22             2124               ret
                    2125               
0C66 7E10           2126     tim2:     mov R6,#10h;14h
0C68 DEFE           2127     tim3:     djnz R6,tim3
0C6A 22             2128               ret
                    2129     
                    2130     ;запись из acc
0C6B C3             2131     write_x1: clr   c
0C6C                2132     writeD_x1:
0C6C 92B1           2133                       mov P3.1,c        ;запись
0C6E F5A0           2134               mov P2,A
0C70 D2B3           2135                       setb P3.3
0C72 120000   F     2136                       call z_5
0C75 C2B3           2137                       clr P3.3
0C77 75A0FF         2138                       mov P2,#0FFh
0C7A 22             2139                       ret
                    2140     
                    2141     ;чтение в acc
0C7B C3             2142     read_x2:  clr   c  
0C7C 92B1           2143               mov P3.1,c        ;чтение
0C7E D2B2           2144               setb P3.2
0C80 D2B3           2145                       setb P3.3
0C82 120000   F     2146                     call z_5
0C85 E5A0           2147                       mov A,P2
0C87 C2B3           2148                       clr P3.3
0C89 C2B2           2149                       clr P3.2
0C8B 22             2150                       ret
                    2151     
                    2152     
0C8C 120000   F     2153     loop:     call read_x2;x2    ;ожидание флага готовности
0C8F 20E7FA         2154                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
0C92 22             2155                        ret           ;возврат, если бит А(7)<>1
                    2156                                      
                    2157                                        
                    2158     
                    2159     
                    2160     
                    2161     
                    2162     
                    2163     
                    2164     
                    2165     ;принимаемый байт в acc
                    2166     ;прием байта последовательным кодом старшими разрядами вперед
0C93 7A08           2167     read:    mov R2,#8
0C95 C297           2168     re1:     clr P1.7;P1.2
0C97 120000   F     2169              call tim2        ;5mks
0C9A A294           2170                     mov C,P1.4;P1.0
0C9C 33             2171                     rlc A           
0C9D D297           2172                     setb P1.7;P1.2
0C9F 120000   F     2173                     call tim2
0CA2 DAF1           2174                     djnz R2,re1
0CA4 22             2175                     ret
                    2176     
                    2177      ;in r0-count   
                    2178     ;r10,r11-значение с котоым сравнивается счетчик
                    2179     ;r2..r5 -значение счетчика
0CA5                2180     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
0CA5 E6             2181                     mov                     a,@r0
0CA6 FC             2182                     mov                     r4,a
0CA7 08             2183                     inc                     r0
0CA8 E6             2184                     mov                     a,@r0
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    35

0CA9 FD             2185                     mov                     r5,a
0CAA 7B00           2186                     mov                     r3,#0
0CAC 7A00           2187                     mov                     r2,#0
0CAE 750800         2188                     mov                     r8,#0;clr                       r8
0CB1 750900         2189                     mov                     r9,#0;clr                       r9
0CB4 120000   F     2190                     call            lcmp
0CB7 22             2191                     ret
                    2192     
                    2193     
                    2194     
                    2195     
                    2196     
                    2197     
                    2198                                 
0CB8 020000   F     2199     rout6:          jmp             out6
0CBB 020000   F     2200     rlabelF:        jmp             labelF  
0CBE 020000   F     2201     rknrazr:        jmp             knrazr  
0CC1 020000   F     2202     rknopt:         jmp             knopt
0CC4 020000   F     2203     rizman:         jmp             izman   
0CC7                2204     keyb1:  ;IE6 
0CC7 75E700         2205                                     mov             EIE2,#00H
                    2206                                     
0CCA C0E0           2207                                     push    acc
0CCC C0D0           2208                                     push    psw
0CCE C000           2209                                     push    rr0
0CD0 C001           2210                                     push    rr1
0CD2 C002           2211                                     push    rr2
0CD4 C003           2212                                     push    rr3
0CD6 C004           2213                                     push    rr4
0CD8 C005           2214                                     push    rr5
0CDA C006           2215                                     push    rr6
0CDC C007           2216                                     push    rr7
                    2217                                     ;clr            bitmig
                    2218                       ;;;;;;;;;;;;;;
0CDE 120000   F     2219                                     call    z_01s;0,1s
                    2220                                     ;восстан знакоместо при мигании
                    2221                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0CE1 78B2           2222                                     mov             r0,#marker
0CE3 7440           2223                                     mov             a,#bufind
0CE5 26             2224                                     add             a,@r0                   ;a=bufind+marker
0CE6 F9             2225                                     mov             r1,a
0CE7 A73C           2226                                     mov             @r1,savba
                    2227                                     ;;;;;;;;;;;
0CE9 E5B0           2228                             mov             a,p3
0CEB 20E644         2229                                     jb              acc.6,outviR;выход из режима выч R
0CEE E5B0           2230     gout6:                          mov             a,p3
0CF0 44FF           2231                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0CF2 F5B0           2232                                     mov             p3,a
0CF4 E5B0           2233                                     mov             a,p3
0CF6 30E6BF         2234                                     jnb             acc.6,rout6             ;error
0CF9 3004BF         2235                                     jnb             bitizm,rlabelF
0CFC 75B0FE         2236                                     mov             p3,#0feh                ;реж IZM
0CFF E5B0           2237                                     mov             a,p3
0D01 30E6C0         2238                                     jnb             acc.6,rizman
                    2239                                     ;;;;;;
0D04 201232         2240                                     jb              bitklb,goklb
0D07 75B0FD         2241                                     mov             p3,#0fdh
0D0A E5B0           2242                                     mov             a,p3
0D0C 30E6AF         2243                                     jnb             acc.6,rknrazr             ;labelC
0D0F 75B0FB         2244                                     mov             p3,#0fbh
0D12 E5B0           2245                                     mov             a,p3
0D14 30E648         2246                                     jnb             acc.6,knright           ;->
0D17 75B0F7         2247                                     mov             p3,#0f7h
0D1A E5B0           2248                                     mov             a,p3
0D1C 30E6A2         2249                                     jnb             acc.6,rknopt                    ;T
0D1F 75B0EF         2250                                     mov             p3,#0efh
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    36

0D22 E5B0           2251                                mov          a,p3
0D24 30E615         2252                                     jnb             acc.6,pyskst                    ;pysk/stop
0D27 75B0DF         2253                                     mov             p3,#0dfh
0D2A E5B0           2254                                     mov             a,p3
0D2C 30E64C         2255                                jnb          acc.6,knvich
0D2F 020000   F     2256                                     jmp             izmpaT
                    2257     
0D32 3006B9         2258     outviR: jnb             bitvi11,gout6   
0D35 C214           2259                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0D37 C206           2260                                     clr             bitvi11
                    2261                                     
0D39 020000   F     2262     goklb:          jmp             out6
                    2263     
0D3C 200A0C         2264     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0D3F D20A           2265                                     setb    bitbon  ;уст реж буфер вкл
0D41 79D5           2266                                     mov                     r1,#volume;work         ;обьем блок
                             а
0D43 7700           2267                                     mov                     @r1,#00
0D45 09             2268                                     inc                     r1
0D46 77C7           2269                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0D48 020000   F     2270                                     jmp             izmpaT
0D4B C20A           2271     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D4D 807E           2272                                     jmp             izmpaT
                    2273     
0D4F 79B0           2274     tizmri:                 mov             r1,#level
0D51 B70102         2275                                     cjne    @r1,#1,right2
                    2276                                     ;10s->HET
0D54 8004           2277                                     jmp             right3
                    2278     
0D56 07             2279     right2:                 inc             @r1
0D57 120000   F     2280                                     call    lolevT
                    2281                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D5A 120000   F     2282     right3:                 call    ind
0D5D 806A           2283                                     jmp             izmfun
                    2284     
                    2285                             
                    2286                             
0D5F                2287     knright:        
                    2288     
0D5F 79AE           2289                                     mov             r1,#diap
                    2290                             ;перекл диапазон 1 поз вверх сбр массив
0D61 17             2291                                     dec             @r1
0D62 B7FF04         2292                                     cjne    @r1,#0ffh,diinc
0D65 7700           2293                                     mov             @r1,#0
0D67 8060           2294                                     jmp  izmfun
0D69 120000   F     2295     diinc:                  call     clmassix
0D6C 78B3           2296                                     mov             r0,#summa
0D6E 120000   F     2297                                     call    clear4
0D71 786A           2298                                     mov             r0,#rez_A0
0D73 120000   F     2299                                     call    clear4  
0D76 120000   F     2300                                     call    loadUS
0D79 804E           2301                                      jmp  izmfun
                    2302     
0D7B 200610         2303     knvich:            jb           bitvi11,onvich
0D7E C204           2304                                     clr             bitizm
0D80 D214           2305                                     setb    bitvich
                    2306                                     
0D82 78B1           2307                                     mov             r0,#vichR
0D84 7611           2308                                     mov             @r0,#11h;;????????or 0
                    2309                                     ;ВЫЧИСЛИТЬ
0D86 900000   F     2310                                     mov     dptr,#teVICH
0D89 120000   F     2311                                     call    lotext
                    2312                               ; call                ind
0D8C 806C           2313                                     jmp              viout;izmpaT
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    37

                    2314     
0D8E C214           2315     onvich:                 clr             bitvich
0D90 78B1           2316                                     mov             r0,#vichR
0D92 7600           2317                                     mov             @r0,#0
0D94 8037           2318                                     jmp              izmpaT
                    2319     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0D96 301820         2320     louizm:            jnb          knizm,lou
0D99 79AE           2321                                     mov             r1,#diap
0D9B C3             2322                                     clr             c
0D9C 7403           2323                                     mov             a,#3
0D9E 97             2324                                     subb    a,@r1
0D9F 5006           2325                                     jnc             lldi23    ;10-2..10-5
                    2326                                     ;10-6..10-11
0DA1 E584           2327                                     mov             a,p4
0DA3 54F7           2328                                     anl             a,#0f7h   ;d3
0DA5 F584           2329                                     mov             p4,a
0DA7 E7             2330     lldi23:                 mov             a,@r1
0DA8 6403           2331                                     xrl             a,#3
0DAA 7002           2332                                     jnz             lldi3
0DAC 8005           2333                                     jmp             lldi2   ;10-5
0DAE E7             2334     lldi3:                  mov             a,@r1
0DAF 6402           2335                                     xrl             a,#2            ;
0DB1 7006           2336                                     jnz             lou             
0DB3 E585           2337     lldi2:                  mov             a,p5            ;10-4
0DB5 4408           2338                                     orl             a,#08
0DB7 F585           2339                                     mov             p5,a
0DB9 22             2340     lou:                    ret
                    2341                               ;;;;;;
0DBA 201807         2342     izman:                  jb              knizm,knizmon
0DBD D218           2343                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2344                             ;       d3(k5 p4),d3(u5 p5)заслать us
0DBF 120000   F     2345                                     call    louizm 
0DC2 8005           2346                                     jmp             izmfun
0DC4 C218           2347     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0DC6 120000   F     2348                                     call    loadUS;восстановить us
0DC9                2349     izmfun:                 
0DC9 D207           2350                                     setb    bitzus;bitbuf
0DCB 8000           2351                                     jmp             labelE;;;;;;;;;;;;
                    2352                                     ;;;;;;;;;;;;;;
0DCD                2353     izmpaT:
                    2354     ;;;;;;;;;;;;;;;;;
                    2355                     ;       clr             c 
                    2356                     ;       mov             r1,#parN
                    2357     
                    2358                     ;       mov             r0,#diap
                    2359                     ;       mov             a,#6            
                    2360                     ;       subb    a,@r0
                    2361                     ;       jnc             labelE          ;         ;10-2..10-8
                    2362                               
                    2363                     ;       mov             @r1,#2          ;10-9..10-11            
                    2364                     ;       jmp             labelE
                    2365     
                    2366     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0DCD 789A           2367     labelE:                 mov             r0,#parT
0DCF 793D           2368                                     mov             r1,#chkl
0DD1 B60108         2369                                     cjne    @r0,#1,izmt2
0DD4 7700           2370                                     mov             @r1,#0
0DD6 09             2371                                     inc             r1
0DD7 7702           2372                                     mov             @r1,#2
0DD9 020000   F     2373                                     jmp             out6
0DDC B60208         2374     izmt2:                  cjne    @r0,#2,izmt3
0DDF 7700           2375                                     mov             @r1,#0
0DE1 09             2376                                     inc             r1
0DE2 7714           2377                                     mov             @r1,#20
0DE4 020000   F     2378                                     jmp             out6
                    2379     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    38

0DE7 7700           2380     izmt3:                  mov             @r1,#0
0DE9 09             2381                                     inc             r1
0DEA 77C8           2382                                     mov             @r1,#200
0DEC 020000   F     2383                                     jmp             out6
                    2384     
                    2385     
                    2386     
                    2387     
0DEF                2388     knopt: ;кнопка T
0DEF C204           2389                                clr          bitizm
0DF1 D210           2390                                setb         bitt2
0DF3 79B7           2391                                mov          r1,#load
0DF5 7704           2392                                mov          @r1,#4;1s
0DF7 120000   F     2393                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2394                                
                    2395     
0DFA 793D           2396     viout:          mov             r1,#chkl
0DFC 7703           2397                             mov             @r1,#03
0DFE 09             2398                             inc             r1
0DFF 77E8           2399                             mov             @r1,#0e8h               ;1000
0E01 020000   F     2400                             jmp             out6
                    2401     
0E04                2402     knrazr:          
0E04 C3             2403     labelC:          clr            c
0E05 78AF           2404                             mov             r0,#parN
0E07 799A           2405                             mov             r1,#parT
0E09 7402           2406                             mov             a,#2
0E0B 97             2407                             subb    a,@r1
0E0C 40BF           2408                             jc              labelE          ;T>2
0E0E B60104         2409                             cjne    @r0,#1,noN1c
0E11 7602           2410                             mov             @r0,#2          ;N=2
0E13 80B8           2411                             jmp             labelE
                    2412     
0E15 B60204         2413     noN1c:          cjne    @r0,#2,not_1
0E18 7603           2414                             mov             @r0,#3          ;N=3      ;10-2..10-8
0E1A 80B1           2415                             jmp             labelE
                    2416     
0E1C                2417     not_10: 
0E1C 7601           2418     not_1:          mov             @r0,#1                          ;N=1
0E1E 80AD           2419                             jmp     labelE
                    2420     
0E20 020000   F     2421     rtizmri:        jmp             tizmri
0E23                2422     labelf:                 
0E23 301024         2423                             jnb             bitt2,nofizm
0E26 75B0FB         2424                        mov          p3,#0fbh
0E29 E5B0           2425                        mov          a,p3
0E2B 20E60F         2426                        jb           acc.6,outF
0E2E 79B7           2427                        mov          r1,#load;parT
0E30 B70503         2428                        cjne         @r1,#5,noft1
                    2429                        ;t=10s
0E33 020000   F     2430                        jmp          out6;ft1izm
                    2431     
0E36 07             2432     noft1:     inc          @r1;dec         @r1
0E37 120000   F     2433     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2434                             ;call   ind
0E3A 020000   F     2435                     jmp             out6;??????????????/
                    2436     
                    2437                             ;увеличить счетчик задержки клавиатуры
0E3D 783D           2438     outF:           mov             r0,#chkl
0E3F 7627           2439                             mov             @r0,#27h
0E41 08             2440                             inc             r0
0E42 7610           2441                             mov             @r0,#10h
0E44 020000   F     2442                             jmp             out6;out7
                    2443     
0E47 020000   F     2444     noviR1:         jmp             noviR
0E4A 3014FA         2445     nofizm:         jnb             bitvich,noviR1
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    39

0E4D 78B1           2446                             mov             r0,#vichR
0E4F B6111A         2447                             cjne    @r0,#11h,no11v6
0E52 7612           2448                             mov             @r0,#12h                ;11= вычислить
0E54 900000   F     2449     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E57 120000   F     2450                             call    lotext
0E5A 80E1           2451                             jmp             outF
                    2452             
0E5C 020000   F     2453     rnor11:         jmp             nor11   
                    2454             
0E5F B611FA         2455     nor13:          cjne    @r0,#11h,rnor11
0E62 7612           2456                             mov             @r0,#12h
0E64 900000   F     2457                             mov             dptr,#teIZMK    ;       изм конст
0E67 120000   F     2458                         call        lotext             
0E6A 80D1           2459                             jmp             outF
                    2460     
0E6C B6120A         2461     no11v6:         cjne    @r0,#12h,no12v6
0E6F 7613           2462                             mov             @r0,#13h
0E71 900000   F     2463                             mov             dptr,#teOUT
0E74 120000   F     2464                             call    lotext
0E77 80C4           2465                             jmp             outF
                    2466                     
0E79 B6130A         2467     no12v6:         cjne    @r0,#13h,no13v6
0E7C 7611           2468                             mov             @r0,#11h
0E7E 900000   F     2469                             mov             dptr,#teVICH
0E81 120000   F     2470                             call    lotext
0E84 80B7           2471                             jmp             outF
                    2472     
                    2473     ;кн -> A= 0000
                    2474     ;кн -> B= +00000
0E86 75B0FB         2475     no13v6:         mov             p3,#0fbh
0E89 E5B0           2476                             mov             a,p3
0E8B 20E634         2477                             jb              acc.6,chanZ
0E8E E53B           2478                             mov             a,movrig
0E90 B40713         2479                             cjne    a,#7,kon_B      
0E93 78B2           2480                             mov             r0,#marker      ;A= 0000
0E95 B60715         2481                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0E98 E53A           2482     rikn:           mov             a,movleft
0E9A F6             2483                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2484     ;                               29.12.06
                    2485     ;;;;;;;;;;;;;;;;;;
                    2486     ;необходимо не портить цифру в следуюем справа знакоместе
                    2487     ;т е сохранить ее в ячейке для мигания в противном случае
                    2488     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2489     ;       знакоместа
0E9B 78B2           2490                                     mov             r0,#marker
0E9D 7440           2491                                     mov             a,#bufind
0E9F 26             2492                                             add             a,@r0                   ;a=bufind+m
                             arker
0EA0 F9             2493                                             mov             r1,a
0EA1 09             2494                                             inc             r1
0EA2 873C           2495                                             mov             savba,@r1
0EA4 8097           2496                                     jmp             outF
                    2497     
0EA6 78B2           2498     kon_B:          mov             r0,#marker      ;B= +00000
0EA8 B60802         2499                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0EAB 80EB           2500                                             jmp             rikn
0EAD                2501     mark0_8:
                    2502     ;                               29.12.06
                    2503     ;;;;;;;;;;;;;;;;;;
                    2504     ;необходимо не портить цифру в следуюем справа знакоместе
                    2505     ;т е сохранить ее в ячейке для мигания в противном случае
                    2506     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2507     ;       знакоместа ->B=+00000
0EAD 78B2           2508                                             mov             r0,#marker
0EAF 7440           2509                                     mov             a,#bufind
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    40

0EB1 26             2510                                             add             a,@r0                   ;a=bufind+m
                             arker
0EB2 F9             2511                                             mov             r1,a
0EB3 09             2512                                             inc             r1
0EB4 873C           2513                                             mov             savba,@r1
0EB6 78B2           2514                             mov             r0,#marker
0EB8 06             2515                             inc             @r0             ;       сдвинуть курсор вправо на 1
0EB9 C219           2516                             clr             bitmig
0EBB B60901         2517                             cjne    @r0,#9,outma
0EBE 18             2518                             dec             r0;ppp
0EBF 020000   F     2519     outma:          jmp             outF
                    2520     
0EC2 75B0FE         2521     chanZ:          mov             p3,#0feh
0EC5 E5B0           2522                             mov             a,p3
0EC7 20E611         2523                             jb              acc.6,chanma
                    2524                             ;изм знак в старшем разряде на противоположн
0ECA E543           2525                             mov             a,bufind+3
0ECC B42B06         2526                             cjne            a,#2bh,noplus
0ECF 75432D         2527                             mov                     bufind+3,#2dh           ;+->-   
0ED2 020000   F     2528                             jmp             outF
0ED5                2529     noplus:
0ED5 75432B         2530                             mov                     bufind+3,#2bh           ;-/+-
0ED8 020000   F     2531                             jmp             outF
0EDB 75B0FD         2532     chanma:         mov             p3,#0fdh
0EDE E5B0           2533                             mov             a,p3
0EE0 20E603         2534                             jb              acc.6,outFl;labelL1
                    2535                             ;clr            bitmig
0EE3 120000   F     2536     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2537     
0EE6 020000   F     2538     outFl:                  jmp             outF
                    2539                     
0EE9                2540     nor11:          ;       выход
0EE9 7613           2541                     mov             @r0,#13h  ;12->13
0EEB 900000   F     2542                     mov             dptr,#teOUT
                    2543     ;               jmp             vi1113
                    2544     
                    2545     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2546     
                    2547     ;yesviR:                clr             bitvi11;????????/
                    2548     ;                       jb              bmem11,rlabelL
                    2549     ;                       jmp             out6;???????//
                    2550     
0EEE 020000   F     2551     rlabelL:        jmp                     labelL
                    2552     ;findmem:               jmp             out6
0EF1 301171         2553     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2554     ;;;;;;;;;;;;;
0EF4 78B1           2555                                             mov                     r0,#vichR
0EF6 7415           2556                                             mov                     a,#15h
0EF8 C3             2557                                             clr                     c
0EF9 96             2558                                             subb            a,@r0
0EFA 4016           2559                                             jc                      ri21_23
                    2560     
0EFC 75B0FB         2561                                             mov             p3,#0fbh; реж кн меню ->
0EFF 20B60A         2562                                             jb              p3.6,ri6
0F02 78B1           2563                                             mov             r0,#vichR
0F04 B61508         2564                                             cjne    @r0,#15h,norime
0F07 7611           2565                                             mov             @r0,#11h
0F09 120000   F     2566     norime1:        call            lomenu
0F0C 020000   F     2567     ri6:                    jmp             out6
0F0F 06             2568     norime:         inc             @r0
0F10 80F7           2569                                             jmp             norime1
                    2570             
0F12 7423           2571     ri21_23:        mov                     a,#23h          ;->
0F14 C3             2572                                             clr                     c
0F15 96             2573                                             subb            a,@r0
0F16 4014           2574                                             jc                      ri_31
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    41

0F18 75B0FB         2575                                             mov                     p3,#0fbh
0F1B 20B6EE         2576                                             jb                      p3.6,ri6
0F1E B62308         2577                                             cjne            @r0,#23h,no23ri
0F21 7621           2578                                             mov                     @r0,#21h
0F23 120000   F     2579                                             call            lomenu
0F26 020000   F     2580                                             jmp                     out6
0F29 06             2581     no23ri:         inc                     @r0
0F2A 80DD           2582                                             jmp                     norime1
0F2C B63119         2583     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0F2F 30130B         2584                                             jnb                     bitv19,gosk19
0F32 900000   F     2585                                             mov                     dptr,#teS57_6;57,6
0F35 120000   F     2586                                             call            lotext
0F38 C213           2587                                             clr                     bitv19
0F3A 020000   F     2588                                             jmp             out6
0F3D 900000   F     2589     gosk19:         mov                     dptr,#teS19_2
0F40 120000   F     2590                                             call            lotext
0F43 D213           2591                                             setb            bitv19
0F45 020000   F     2592                                             jmp                     out6
                    2593     
                    2594     
                    2595     
                    2596     ;labelS2:       jmp                     out6
                    2597     
0F48 7452           2598     no31ri:         mov                     a,#52h;42h              ;->
0F4A C3             2599                                             clr                     c
0F4B 96             2600                                             subb            a,@r0
0F4C 40BE           2601                                             jc                      ri6
0F4E 75B0FB         2602                                             mov                     p3,#0fbh                   
                                  ;41,42
0F51 30B608         2603                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F54 75B0FD         2604                                             mov                     p3,#0fdh
0F57 20B6B2         2605                                             jb                      p3.6,ri6
0F5A 8087           2606                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0F5C 020000   F     2607     rlabelN:                jmp             labelN
0F5F 020000   F     2608     moutF:          jmp             outF
                    2609     ;;;;;;;;;;;;;;;;;;;;;;;;;
0F62 020000   F     2610     rnnmemb:        jmp             nnmemb
                    2611     
0F65                2612     nbimenu:
0F65 300BFA         2613     findmem:        jnb             bitmem,rnnmemb
0F68 79B0           2614                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0F6A B71113         2615                        cjne         @r1,#11h,nomem11
                    2616                        
0F6D 75B0FB         2617                        mov          p3,#0fbh
0F70 E5B0           2618                        mov          a,p3
0F72 20E6EA         2619                        jb           acc.6,moutF
0F75 7712           2620                        mov          @r1,#12h
0F77 900000   F     2621                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0F7A 120000   F     2622                        call         lotext
0F7D 020000   F     2623                        jmp          outF
                    2624     
0F80 B71213         2625     nomem11:   cjne         @r1,#12h,nomem12
0F83 75B0FB         2626                             mov             p3,#0fbh
0F86 E5B0           2627                        mov          a,p3
0F88 20E6D4         2628                        jb           acc.6,moutF
0F8B 7713           2629                        mov          @r1,#13h
0F8D 900000   F     2630                        mov          dptr,#teLIST            ;ПРОСМОТР
0F90 120000   F     2631                        call         lotext
0F93 020000   F     2632                        jmp          outF
0F96 B71313         2633     nomem12:         cjne           @r1,#13h,labelL
0F99 75B0FB         2634                             mov             p3,#0fbh
0F9C E5B0           2635                        mov          a,p3
0F9E 20E6BE         2636                        jb           acc.6,moutF
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    42

0FA1 7711           2637                        mov          @r1,#11h
0FA3 900000   F     2638                        mov          dptr,#teCLE                     ;ОЧИСТКА
0FA6 120000   F     2639                        call         lotext
0FA9 020000   F     2640                          jmp                outF
                    2641     
0FAC                2642     labelL: 
                    2643                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
0FAC 78B0           2644                                     mov                     r0,#level
0FAE B6210E         2645                                     cjne            @r0,#21h,nobl21
0FB1 7622           2646                                     mov                     @r0,#22h                ;->БЛОК 
0FB3 900000   F     2647                                     mov                     dptr,#teBL
0FB6 120000   F     2648     me21_22:call            lotext
0FB9 120000   F     2649                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
0FBC 020000   F     2650                                     jmp                     outF
                    2651     
0FBF B62207         2652     nobl21: cjne            @r0,#22h,nobl22
0FC2 900000   F     2653                                     mov                     dptr,#teFULL
0FC5 7621           2654                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2655     
0FC7 80ED           2656                                     jmp                     me21_22
                    2657     
                    2658     ;labl21:           cjne @r0,#21h,nolev1
                    2659     ;                       mov             p3,#0fbh
                    2660     ;                       mov             a,p3
                    2661     ;                       jb              acc.6,loutF
                    2662     ;                       cjne    @r0,#21h,labl22
                    2663     ;                       mov             @r0,#22h
                    2664                             ;БЛОК
                    2665     ;                       call    lotext
                    2666     ;                       jmp             outF
                    2667     ;labl22:                mov             @r0,#21h
                    2668                             ;ПОЛНАЯ
                    2669     ;                       call    lotext
                    2670     ;                       jmp             outF
                    2671                      
0FC9 B62325         2672     nobl22:         cjne    @r0,#23h,go31l
0FCC 75B0FB         2673     rigblo:         mov             p3,#0fbh
0FCF 20B629         2674                                             jb              p3.6,llev2
0FD2                2675     labL2:    ;  уст курсор в правую позицию 
                    2676                                     ;       кнопка                  ->
                    2677     ;;;;;;;;;;;;;;;;;;
                    2678     ;необходимо не портить цифру в следуюем справа знакоместе
                    2679     ;т е сохранить ее в ячейке для мигания в противном случае
                    2680     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2681     ;       знакоместа
0FD2 78B2           2682                                             mov             r0,#marker
0FD4 7440           2683                                     mov             a,#bufind
0FD6 26             2684                                             add             a,@r0                   ;a=bufind+m
                             arker
0FD7 F9             2685                                             mov             r1,a
0FD8 09             2686                                             inc             r1
0FD9 873C           2687                                             mov             savba,@r1
0FDB C219           2688                                             clr             bitmig
                    2689     ;;;;;;;;;;;;;;;;
0FDD 78B2           2690                       mov           r0,#marker      ;курсор справа  ?
0FDF E53B           2691                             mov             a,movrig
0FE1 C3             2692                             clr             c
0FE2 96             2693                             subb    a,@r0
0FE3 6006           2694                             jz         equ1l
0FE5 E53B           2695                             mov             a,movrig;уст в правую позицию
0FE7 F6             2696                             mov             @r0,a
0FE8 020000   F     2697                             jmp             outF                                     
0FEB E53A           2698     equ1l:          mov             a,movleft;уст в левую позицию
0FED F6             2699                             mov             @r0,a   
0FEE 020000   F     2700     loutF:  jmp             outF
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    43

                    2701                     
                    2702     
0FF1 B63102         2703     go31l:          cjne    @r0,#31h,go41l
0FF4 80D6           2704                             jmp             rigblo
0FF6 B6410B         2705     go41l:          cjne    @r0,#41h,norig2
0FF9 80D1           2706                             jmp             rigblo
                    2707     
0FFB 75B0FD         2708     llev2:          mov             p3,#0fdh
0FFE 20B6ED         2709                             jb              p3.6,loutF
1001 020000   F     2710                             jmp             labelL1
                    2711     
                    2712     ;->
1004 C3             2713     norig2:    clr          c               ;32,33,34,42
1005 7431           2714                             mov             a,#31h
1007 96             2715                             subb    a,@r0
1008 50E4           2716                             jnc             loutF
100A 75B0FB         2717     rigblok:        mov             p3,#0fbh  ;32,33,34,42
100D 20B626         2718                             jb              p3.6,lev2go
1010                2719     labelN: 
                    2720                             ;                               29.12.06
                    2721     ;;;;;;;;;;;;;;;;;;
                    2722     ;необходимо не портить цифру в следуюем справа знакоместе
                    2723     ;т е сохранить ее в ячейке для мигания в противном случае
                    2724     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2725     ;       знакоместа
1010 78B2           2726                                             mov             r0,#marker
1012 7440           2727                                     mov             a,#bufind
1014 26             2728                                             add             a,@r0                   ;a=bufind+m
                             arker
1015 F9             2729                                             mov             r1,a
1016 09             2730                                             inc             r1
1017 873C           2731                                             mov             savba,@r1
                    2732     ;;;;;;;;;;;;;;;;;;;
1019 78B2           2733                             mov             r0,#marker      ;курсор справа  ?
101B E53B           2734                             mov             a,movrig
101D C3             2735                             clr             c
101E 96             2736                             subb    a,@r0
101F 7006           2737                             jnz        noequ1
1021 E53A           2738                             mov             a,movleft;уст в крайнюю левую позицию
1023 F6             2739                             mov             @r0,a
1024 020000   F     2740                             jmp             outF
1027                2741     noequ1: ;29.12.06
                    2742     ;;;;;;;;;;;;;;;;;;
                    2743                             ;восстан знакоместо при мигании
                    2744                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1027 78B2           2745                                     mov             r0,#marker
1029 7440           2746                                     mov             a,#bufind
102B 26             2747                                     add             a,@r0                   ;a=bufind+marker
102C F9             2748                                     mov             r1,a
                    2749                                     ;mov            @r1,savba
102D 09             2750                                     inc             r1
102E 873C           2751                                     mov             savba,@r1
                    2752     ;;;;;;;;;;;;;;;;        
1030 120000   F     2753                             call    marri;уст сдвиг в правую        позицию
1033 020000   F     2754                             jmp             outF
1036 75B0FD         2755     lev2go:         mov             p3,#0fdh
1039 30B603         2756                             jnb             p3.6,rlabelL1
103C 020000   F     2757                             jmp             outF
                    2758     
103F 020000   F     2759     rlabelL1:       jmp             labelL1
                    2760     
1042                2761     nnmemb:
                    2762                                     
                    2763     
                    2764     
1042                2765     norim6:    ;kn menu
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    44

1042                2766     out6:           
1042 D007           2767                                     pop             rr7     
1044 D006           2768                                     pop             rr6
1046 D005           2769                                     pop             rr5
1048 D004           2770                                     pop             rr4
104A D003           2771                                     pop             rr3
104C D002           2772                                     pop             rr2
104E D001           2773                                     pop             rr1                             
1050 D000           2774                                     pop             rr0
1052 D0D0           2775                                     pop             psw
1054 D0E0           2776                                     pop             acc
                    2777     ;clr            bitmig
1056 75E730         2778                                mov          EIE2,#30H
1059 E5AD           2779                                mov          a,P3IF
105B 54BF           2780                                     anl             a,#0bfh
105D F5AD           2781                                     mov             P3IF,a
105F 75B0C0         2782                                     mov             P3,#0c0h
1062 C219           2783     clr             bitmig
1064 32             2784                             reti
                    2785     
1065 020000   F     2786     rknMEM:                 jmp             knMEM
1068 020000   F     2787     knKMP:             jmp          out7
106B 020000   F     2788     rout7:                  jmp             out7    
106E 020000   F     2789     rlabelH:                jmp             labelH
1071 020000   F     2790     rknNUL:         jmp             knNUL
1074 020000   F     2791     rknleft:                jmp             knleft
1077                2792     keyb2:  ;IE7
1077 75E700         2793                                     mov             EIE2,#00H
107A C0E0           2794                                     push    acc
107C C0D0           2795                                     push    psw
107E C000           2796                                     push    rr0
1080 C001           2797                                     push    rr1
1082 C002           2798                                     push    rr2
1084 C003           2799                                     push    rr3
1086 C004           2800                                     push    rr4
1088 C005           2801                                     push    rr5
108A C006           2802                                     push    rr6
108C C007           2803                                     push    rr7
108E C082           2804                                     push    dpl
1090 C083           2805                                     push    dph
                    2806                                     ;clr            bitmig
                    2807                       ;;;;;;;;;;;;;;
1092 120000   F     2808                               call  z_01s   ;0,1s
                    2809                               ;восстан знакоместо при мигании
                    2810                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1095 78B2           2811                                     mov             r0,#marker
1097 7440           2812                                     mov             a,#bufind
1099 26             2813                                     add             a,@r0                   ;a=bufind+marker
109A F9             2814                                     mov             r1,a
109B A73C           2815                                     mov             @r1,savba
                    2816                                     ;;;;;;;;;;;
                    2817     
109D E5B0           2818                             mov             a,p3
109F 20E7C9         2819                                     jb              acc.7,rout7
10A2 E5B0           2820                                     mov             a,p3
10A4 74FF           2821                                     mov             a,#0ffh         ; p3.(5-0)<-3f
10A6 F5B0           2822                                     mov             p3,a
10A8 E5B0           2823                                     mov             a,p3
10AA 30E7BE         2824                                     jnb             acc.7,rout7             ;error
10AD 3004BE         2825                                     jnb             bitizm,rlabelH
10B0 75B0FE         2826                                     mov             p3,#0feh                ;реж IZM
10B3 E5B0           2827                                     mov             a,p3
10B5 30E7B9         2828                                     jnb             acc.7,rknNUL
10B8 75B0FD         2829                                     mov             p3,#0fdh
10BB E5B0           2830                                     mov             a,p3
10BD 30E7A8         2831                                     jnb             acc.7,knKMP
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    45

10C0 75B0FB         2832                                     mov             p3,#0fbh
10C3 E5B0           2833                                     mov             a,p3
10C5 30E7AC         2834                                     jnb             acc.7,rknleft
10C8 75B0F7         2835                                     mov             p3,#0f7h
10CB E5B0           2836                                     mov             a,p3
10CD 30E758         2837                                     jnb             acc.7,knAVP
10D0 75B0EF         2838                                 mov         p3,#0efh
10D3 E5B0           2839                                     mov             a,p3
10D5 30E78D         2840                                     jnb             acc.7,rknMEM
10D8 75B0DF         2841                                     mov             p3,#0dfh
10DB E5B0           2842                                     mov             a,p3    
10DD 30E722         2843                                     jnb             acc.7,knmenu
10E0                2844     an_t7:             ;;;;;;;;;;;;
                    2845                     
                    2846     ;       clr             c
                    2847     ;       mov             r1,#parN
                    2848     ;
                    2849     ;                       mov             r0,#diap
                    2850     ;                       mov             a,#6            
                    2851     ;                       subb    a,@r0
                    2852     ;                       jnc             goto7           ;         ;10-2..10-8
                    2853                               
                    2854     ;                       mov             @r1,#2          ;10-9..10-11            
                    2855                             
                    2856                             ;;;;;;;;;;;;
10E0 799A           2857     goto7:                  mov             r1,#parT
10E2 783D           2858                                     mov             r0,#chkl
10E4 B70108         2859                                     cjne    @r1,#1,not1_7
10E7 7600           2860                                     mov             @r0,#00
10E9 08             2861                                     inc             r0
10EA 7602           2862                                     mov             @r0,#2
10EC 020000   F     2863                                     jmp             out7
                    2864                             
                    2865     
10EF B70208         2866     not1_7:                 cjne    @r1,#2,not2_7
10F2 760E           2867                                             mov             @r0,#0eh;00
10F4 08             2868                                     inc             r0
10F5 7638           2869                                     mov             @r0,#38h;20
10F7 020000   F     2870                                     jmp             out7
10FA 7600           2871     not2_7:                 mov             @r0,#00
10FC 08             2872                                     inc             r0
10FD 76C8           2873                                     mov             @r0,#200
10FF 020000   F     2874                                     jmp             out7
                    2875     
                    2876     
1102 201511         2877     knmenu: jb              biteizm,menuoff
1105 C204           2878                              clr            bitizm          ;off IZM
1107 D211           2879                                     setb            bitmenu
1109 900000   F     2880                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
110C 120000   F     2881                                     call    lotext
                    2882                                     
110F 78B1           2883                                     mov             r0,#vichR
1111 7611           2884                                     mov             @r0,#11h
1113 020000   F     2885                                     jmp             onmem11
1116                2886     menuoff:
1116 78B1           2887                                     mov             r0,#vichR
1118 7600           2888                                     mov             @r0,#00
111A C215           2889                                     clr             biteizm
111C 120000   F     2890                                     call    loadus
111F 020000   F     2891                                     jmp             out7
1122 75EF10         2892                                     mov             RSTSRC,#10h
                    2893                                     ;jmp            begin;onmem11
                    2894     
1125 020000   F     2895     rendkalib:              jmp             endkalib
                    2896     
1128 2012FA         2897     knAVP:  jb              bitklb,rendkalib        
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    46

112B 200505         2898                                     jb              bitavp,meavp
112E D205           2899                                     setb    bitavp
1130 020000   F     2900                                     jmp             onmem11
1133 C205           2901     meavp:                  clr             bitavp
1135 020000   F     2902                                     jmp             onmem11
                    2903     
1138 201207         2904     knleft: jb              bitklb,lefkl
                    2905                                     ;;;;;;;;
113B 79AE           2906                                mov          r1,#diap
113D 07             2907                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
113E B70A03         2908                                     cjne    @r1,#0ah,nodi6
1141 17             2909                                     dec             @r1
1142 809C           2910     lefkl:  jmp             an_t7
                    2911     
1144                2912     nodi6:             ;    cjne    @r1,#0,an_t7
1144 120000   F     2913                                      call    clmassix
1147 78B3           2914                                     mov             r0,#summa
1149 120000   F     2915                                     call    clear4  
114C 786A           2916                                     mov             r0,#rez_A0
114E 120000   F     2917                                     call    clear4  
1151 120000   F     2918                                     call    loadUS
1154 808A           2919                                jmp          an_t7
                    2920     
1156 200F0F         2921     knNUL:                  jb              bitnul,ybnul
1159 D20F           2922                                     setb    bitnul
115B 789C           2923                                     mov             r0,#rez_A3      ;A3
115D 120000   F     2924                                     call    resar2
1160 786A           2925                                     mov             r0,#rez_A0      
1162 120000   F     2926                                     call    saver2;A0<-A3
1165 020000   F     2927                                     jmp             goto7;an_t7
                    2928     
1168 C20F           2929     ybnul:                  clr             bitnul
116A 900000   F     2930                                      mov    DPTR,#ch0 
116D 120000   F     2931                                     CALL   ldc_long          ; r2..r5 <-- 0
1170 786A           2932                                     mov             r0,#rez_A0      ;A0=0
1172 120000   F     2933                                     call    saver2
1175 020000   F     2934                                     jmp             goto7;an_t7
                    2935     
1178 30101E         2936     labelH:                 jnb             bitt2,nolah
117B 75B0FB         2937                                     mov             p3,#0fbh   ;вход в режим изм Т
117E 79B7           2938                                     mov             r1,#load;parT
1180 20B70D         2939                                     jb              p3.7,rhnot1
1183 B70003         2940                                     cjne    @r1,#0,inct;
1186 020000   F     2941                                     jmp             out7;hyest6
1189 17             2942     inct:                   dec             @r1                     ;Tизм+1
                    2943                             
118A 120000   F     2944                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
118D                2945     hnot2:          ;       call    ind
118D 020000   F     2946                                     jmp             out7
                    2947     
1190 020000   F     2948      rhnot1:                jmp             hnot1
                    2949      ;rnoviR:       jmp             noviR
1193 020000   F     2950      rlabelK:       jmp             labelK
1196 020000   F     2951      rlabelI:       jmp             labelI          
                    2952      ;;;;;;;;;;;;;;;;;;;
1199 3014F7         2953     nolah:          jnb             bitvich,rlabelK 
                    2954                             ;;;;;;
                    2955                             ;увеличить счетчик задержки клавиатуры
                    2956                     ;;              mov             r0,#chkl
                    2957                     ;;              mov             @r0,#27h
                    2958                     ;;              inc             r0
                    2959                     ;;              mov             @r0,#10h
                    2960                             ;;;;;;
                    2961     
119C 78B1           2962                             mov             r0,#vichR
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    47

119E B61128         2963                             cjne    @r0,#11h,rhnor11;rlabelI;;
11A1 75B0FB         2964                             mov             p3,#0fbh   ;<-
11A4 20B728         2965                             jb              p3.7,noh37;routF
11A7 B6110B         2966                     cjne    @r0,#11h,hr12
11AA 7613           2967                             mov             @r0,#13h        ;11= вычислить
11AC 900000   F     2968                             mov             dptr,#teOUT;teVICH
11AF 120000   F     2969     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
11B2 020000   F     2970                             jmp             goto7;outF
11B5 B61207         2971     hr12:           cjne    @r0,#12h,hnor12
11B8 7611           2972     lovich:         mov             @r0,#11h
11BA 900000   F     2973                             mov             dptr,#teVICH
11BD 80F0           2974                             jmp             hvi1113         
11BF B61307         2975     hnor12:         cjne    @r0,#13h,rhnor11
11C2 7612           2976     loizmk:         mov             @r0,#12h
11C4 900000   F     2977                             mov             dptr,#teIZMK    ;       изм конст
                    2978                                        
11C7 80E6           2979                             jmp             hvi1113
                    2980     
11C9 803E           2981     rhnor11:                jmp             hnor11
                    2982     
11CB 8049           2983     rvvizko:                jmp             vvizko
11CD 80FE           2984     toutF:                  jmp     toutF
                    2985     
11CF 75B0F7         2986     noh37:          mov             p3,#0f7h
11D2 20B7F8         2987                             jb              p3.7,toutF
11D5 B611F3         2988                             cjne    @r0,#11h,rvvizko
11D8 D206           2989                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
11DA D204           2990              setb   bitizm
11DC 020000   F     2991     routF:          jmp             goto7;outF
                    2992     
                    2993     
                    2994     
11DF 80EE           2995     rnoh37:         jmp             noh37
                    2996     
11E1 B6120D         2997     norr11:         cjne    @r0,#12h,norr12
11E4 75B0FB         2998                             mov             p3,#0fbh   ;<-
11E7 20B7F5         2999                             jb              p3.7,rnoh37;routF
11EA 760B           3000                             mov             @r0,#11;12->11
11EC 80CA           3001                             jmp             lovich
                    3002     
11EE 020000   F     3003     labelI2:                jmp             labelI
11F1 B613FA         3004     norr12:         cjne    @r0,#13h,labelI2
11F4 75B0FB         3005                             mov             p3,#0fbh   ;<-
11F7 20B7E5         3006                             jb              p3.7,rnoh37
11FA 7612           3007                             mov             @r0,#12h
11FC 80C4           3008                             jmp             loizmk
                    3009                             ;;;;
11FE C214           3010     clrvich:                clr             bitvich
1200 D204           3011                             setb    bitizm
1202 A8B2           3012                             mov             r0,marker
1204 76FF           3013                             mov             @r0,#0ffh
1206 020000   F     3014                              jmp    goto7;  routF
                    3015     
                    3016     ;rnoh37:                jmp             noh37
                    3017      ;ввод изм конст
1209 B612E5         3018     hnor11:         cjne    @r0,#12h,norr12;clrvich
120C 75B0FB         3019                              mov            p3,#0fbh   
120F 20B7CD         3020                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
1212 7611           3021                             mov             @r0,#11h
1214 80A2           3022                             jmp             lovich
                    3023     
1216 78B1           3024     vvizko:         mov             r0,#vichR
1218 E6             3025                             mov             a,@r0
                    3026                     ;       cjne    @r0,#12h,clrvich
1219 B412E2         3027                             cjne    a,#12h,clrvich
121C 7621           3028                             mov             @r0,#21h                ;изм конст->a=+0000     (vv
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    48

                             od)
121E 78B2           3029                             mov             r0,#marker
1220 7604           3030                             mov             @r0,#4;9
1222 753A04         3031                             mov             movleft,#4
1225 753B07         3032                             mov             movrig,#7
1228 900000   F     3033                             mov             dptr,#teAequ0
122B 120000   F     3034                             call    lotext
                    3035                             
122E 120000   F     3036                             call    outA
1231 534B0F         3037                             anl                     bufind+11,#0fh
                    3038             ;       mov             a,bufind+11
                    3039             ;       anl             a,#0f0h
                    3040             ;       mov             bufind+11,a
1234 434B40         3041                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3042                             
1237 020000   F     3043                             jmp             goto7;routF
                    3044     ;hnor13:                jmp             hnor12          
123A B6210C         3045     izchi:          cjne    @r0,#21h,tlabelI
                    3046     ;<- при вводе цифр А                            
                    3047                     ;        mov            p3,#0fbh   
                    3048                     ;       jnb             p3.7,li21
                    3049             ;clr            bitmig
123D 78B2           3050                             mov             r0,#marker
123F 16             3051                             dec             @r0
1240 B60201         3052                             cjne    @r0,#2,li21
1243 06             3053                             inc             @r0;marker=3 +/-
1244 C219           3054     li21:           clr             bitmig
1246 020000   F     3055                             jmp             goto7;outF
                    3056     
1249 020000   F     3057     tlabelI:        jmp             labelI
                    3058     
                    3059     ;                       load    0 1 2 3 4 5             
124C 06050403       3060     sootv:          db              6,5,4,3,2,1;parT
1250 0201                    
                    3061     ;
                    3062     
                    3063     ;нажата кн ввод при наборе Т
1252 75B0F7         3064     hnot1:                  mov             p3,#0f7h
1255 20B784         3065                                     jb              p3.7,routF;out7
1258 B70541         3066                                     cjne    @r1,#5,nohnot1  ;r1=load
125B 794A           3067                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
125D E7             3068                                     mov             a,@r1
125E 4440           3069                                     orl             a,#40h;.6
1260 F7             3070                                     mov             @r1,a
1261 8000           3071                                     jmp             loadb
                    3072                                     
                    3073                                     
1263 789A           3074     loadB:                  mov             r0,#parT
1265 900000   F     3075                                     mov             dptr,#sootv
1268 79B7           3076                                     mov             r1,#load                
126A E7             3077                                     mov             a,@r1;load
126B 93             3078                                     movc    a,@a+dptr
126C F6             3079                                     mov             @r0,a
126D 120000   F     3080                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3081                                      ;r4=b1 r5=b2
1270 120000   F     3082                                     call    iniacp;инициализация АЦП
1273 120000   F     3083                                     call    loadUS
1276 120000   F     3084                                     call    clmassix        
1279 D204           3085                                     setb    bitizm
127B C210           3086                                     clr             bitt2
127D C3             3087                                      clr            c
127E 789A           3088                                  mov                r0,#parT
1280 79AF           3089                                      mov            r1,#parN
1282 7402           3090                                  mov                a,#2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    49

1284 96             3091                                 subb                a,@r0
1285 5005           3092                                 jnc                 loadB2
1287 7701           3093                                     mov             @r1,#1;N=1         ;T>=2
1289 020000   F     3094     bout7:                  jmp             goto7;out7
                    3095     
128C B702FA         3096     loadB2:                 cjne    @r1,#2,bout7
128F 7702           3097                                     mov             @r1,#2;N=2
1291 020000   F     3098                                     jmp             goto7;out7
1294                3099     nohnot2:                ;в буфере 1 зажечь <=0,1s
1294 794A           3100                                     mov             r1,#bufind+10
1296 E7             3101                                     mov             a,@r1
1297 4410           3102                                     orl             a,#10h;.4
1299 F7             3103                                     mov             @r1,a
129A 80C7           3104                                     jmp             loadB
129C B704F5         3105     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
129F 794A           3106                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
12A1 E7             3107                                     mov             a,@r1
12A2 4420           3108                                     orl             a,#20h;.5
12A4 F7             3109                                     mov             @r1,a
12A5 80BC           3110                                     jmp             loadB
                    3111     
                    3112     ;кнопка ПАМЯТЬ
12A7 C204           3113     knMEM:                  clr             bitizm          ;off IZM
12A9 900000   F     3114                                     mov             dptr,#teCLE
12AC 120000   F     3115                                     call    lotext    ;в буф2 записать ОЧИСТКА
12AF D20B           3116                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
12B1 534BEF         3117                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
12B4 78B0           3118                                     mov             r0,#level
12B6 7611           3119                                     mov             @r0,#11h
12B8 783D           3120     onmem11:                mov             r0,#chkl
12BA 7603           3121                                     mov             @r0,#03
12BC 08             3122                                     inc             r0
12BD 76E8           3123                                     mov             @r0,#0e8h               ;1000
12BF 020000   F     3124                                     jmp             out7;goto7;out7
                    3125     
12C2 020000   F     3126     rnomemk:                jmp             nomemk          ;
                    3127     
12C5                3128     labelK:
                    3129     
                    3130     ;;;;;;;;;;;;
12C5 300BFA         3131                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
12C8 78B0           3132                                      mov            r0,#level
12CA B61132         3133                               cjne          @r0,#11h,klev1;nome11
12CD 75B0FB         3134     lefmem11:         mov           p3,#0fbh
12D0 E5B0           3135                               mov           a,p3
12D2 20E70E         3136                               jb            acc.7,rkvvod0
12D5 B6110E         3137                               cjne          @r0,#11h,locle          ;<-memory
12D8 7613           3138                               mov           @r0,#13h
12DA 900000   F     3139     lolist:           mov           dptr,#teLIST
12DD 120000   F     3140                               call          lotext           ;ПРОСМОТР
12E0 020000   F     3141                               jmp   goto7;  outF
                    3142     
12E3 020000   F     3143     rkvvod0:        jmp             kvvod0
                    3144     
                    3145     
12E6 B6120B         3146     locle:          cjne            @r0,#12h,lowr           ;<-memory
12E9 7611           3147                               mov           @r0,#11h                   ;ОЧИСТКА
12EB 900000   F     3148     loadcle:          mov           dptr,#teCLE
12EE 120000   F     3149                               call          lotext
12F1 020000   F     3150                               jmp           goto7;outF
12F4 7612           3151      lowr:          mov             @r0,#12h
12F6 900000   F     3152      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
12F9 120000   F     3153                             call    lotext
12FC 020000   F     3154                             jmp             goto7;outF
12FF B61202         3155      klev1:          cjne   @r0,#12h,klev2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    50

1302 80C9           3156                             jmp             lefmem11
1304 B61302         3157     klev2:           cjne   @r0,#13h,klev22   ;11-13 нет
1307 80C4           3158                             jmp             lefmem11
                    3159     
                    3160     ;<- vvod на более низких уровнях
1309 B62117         3161     klev22:         cjne    @r0,#21h,klev21
130C 75B0FB         3162     lev220:         mov             p3,#0fbh
130F 20B763         3163                             jb              p3.7,kgo23
1312 B6210B         3164                             cjne    @r0,#21h,kfullr
1315 7622           3165                             mov             @r0,#22h
1317 900000   F     3166                             mov             dptr,#teBL
131A 120000   F     3167                             call    lotext
131D 020000   F     3168                             jmp             goto7;outF
1320 020000   F     3169     kfullr:         jmp             kfull                           
1323 B6220E         3170     klev21:         cjne    @r0,#22h,klev23
1326 80E4           3171                             jmp             lev220
                    3172     
1328 020000   F     3173     rlabL2:         jmp             labL2
132B 020000   F     3174     rlabM:          jmp             labM
132E 020000   F     3175     ques:                   jmp             out7
1331 020000   F     3176     ddoutfr:        jmp             ddoutf
                    3177     
1334 B623F4         3178     klev23:          cjne   @r0,#23h,rlabM
1337 75B0FB         3179                              mov    p3,#0fbh
133A 30B7F1         3180                              jnb            p3.7,ques;errr labL2
133D 75B0F7         3181                              mov    p3,#0f7h
1340 20B7EE         3182                              jb             p3.7,ddoutfr
                    3183                                             ;       считать с индикатора  
1343 C3             3184                                     clr                     c
1344 E547           3185                                mov          a,bufind+7      
1346 9430           3186                                      subb           a,#30h
1348 B40002         3187                                      cjne           a,#0,chaibl
134B 7401           3188                                      mov            a,#1                    ;номера блоков 1..4
134D F538           3189     chaibl:  mov            nblok,a
                    3190                                
                    3191                              ;очистить блок памяти с набранным номером
                    3192                              ;150h..1000h( 150h+nblok*320h)
134F 120000   F     3193                                     call            adrblok         ;dptr-
                    3194     
1352 79B8           3195                                     mov                     r1,#work                ;обьем блок
                             а
1354 7703           3196                                     mov                     @r1,#03
1356 09             3197                                     inc                     r1
1357 7720           3198                                     mov                     @r1,#20h                        ;32
                             0h
                    3199     
1359                3200     goonoff:
1359 E4             3201                                     clr                     a
135A F0             3202                                     movx            @dptr,a
135B A3             3203                                     inc                     dptr
                    3204     
135C 79B9           3205                                     mov                     r1,#work+1
135E 120000   F     3206                                     call            chminus
1361 78B8           3207                                     mov             r0,#work
1363 E6             3208                             mov             a,@r0
1364 30E7F2         3209                             jnb             acc.7,goonoff
                    3210     
1367 C20B           3211                              clr    bitmem  ;сбр признак памяти 
1369 D204           3212                              setb   bitizm
136B 78B2           3213                              mov            r0,#marker
136D 76FF           3214                              mov            @r0,#0ffh
136F 020000   F     3215                              jmp    goto7
                    3216     
1372 020000   F     3217     rddoutf:        jmp             ddoutf
                    3218     
                    3219     ;vvod   БЛОК->БЛОК 00           
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    51

1375 75B0F7         3220     kgo23:           mov    p3,#0f7h
1378 20B7F7         3221                             jb              p3.7,rddoutf
137B B6216B         3222                             cjne    @r0,#21h,go23no
                    3223                             ;очистить память 150..dd0h
                    3224                             ;1й блок
137E 900150         3225                              mov                    dptr,#150h
1381 79B8           3226                                     mov                     r1,#work                ;обьем блок
                             а
1383 7703           3227                                     mov                     @r1,#03
1385 09             3228                                     inc                     r1
1386 7720           3229                                     mov                     @r1,#20h                        ;32
                             0h
                    3230     
1388                3231     gooff1:
1388 E4             3232                                     clr                     a
1389 F0             3233                                     movx            @dptr,a
138A A3             3234                                     inc                     dptr
                    3235     
138B 79B9           3236                                     mov                     r1,#work+1
138D 120000   F     3237                                     call            chminus
1390 78B8           3238                                     mov             r0,#work
1392 E6             3239                             mov             a,@r0
1393 30E7F2         3240                             jnb             acc.7,gooff1
                    3241     ;2й блок
1396 900470         3242     mov                     dptr,#470h
1399 79B8           3243                                     mov                     r1,#work                ;обьем блок
                             а
139B 7703           3244                                     mov                     @r1,#03
139D 09             3245                                     inc                     r1
139E 7720           3246                                     mov                     @r1,#20h                        ;32
                             0h
                    3247     
13A0                3248     gooff2:
13A0 E4             3249                                     clr                     a
13A1 F0             3250                                     movx            @dptr,a
13A2 A3             3251                                     inc                     dptr
                    3252     
13A3 79B9           3253                                     mov                     r1,#work+1
13A5 120000   F     3254                                     call            chminus
13A8 78B8           3255                                     mov             r0,#work
13AA E6             3256                             mov             a,@r0
13AB 30E7F2         3257                             jnb             acc.7,gooff2
                    3258     
                    3259     ;3й блок
13AE 900490         3260                             mov                     dptr,#490h
13B1 79B8           3261                                     mov                     r1,#work                ;обьем блок
                             а
13B3 7703           3262                                     mov                     @r1,#03
13B5 09             3263                                     inc                     r1
13B6 7720           3264                                     mov                     @r1,#20h                        ;32
                             0h
                    3265     
13B8                3266     gooff3:
13B8 E4             3267                                     clr                     a
13B9 F0             3268                                     movx            @dptr,a
13BA A3             3269                                     inc                     dptr
                    3270     
13BB 79B9           3271                                     mov                     r1,#work+1
13BD 120000   F     3272                                     call            chminus
13C0 78B8           3273                                     mov             r0,#work
13C2 E6             3274                             mov             a,@r0
13C3 30E7F2         3275                             jnb             acc.7,gooff3
                    3276     ;4й блок
13C6 900AB0         3277     mov                     dptr,#0ab0h
13C9 79B8           3278                                     mov                     r1,#work                ;обьем блок
                             а
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    52

13CB 7703           3279                                     mov                     @r1,#03h
13CD 09             3280                                     inc                     r1
13CE 7720           3281                                     mov                     @r1,#20h                        ;32
                             0h
                    3282     
13D0                3283     gooff4:
13D0 E4             3284                                     clr                     a
13D1 F0             3285                                     movx            @dptr,a
13D2 A3             3286                                     inc                     dptr
                    3287     
13D3 79B9           3288                                     mov                     r1,#work+1
13D5 120000   F     3289                                     call            chminus
13D8 78B8           3290                                     mov             r0,#work
13DA E6             3291                             mov             a,@r0
13DB 30E7F2         3292                             jnb             acc.7,gooff4
13DE C20B           3293                             clr             bitmem
13E0 D204           3294                             setb    bitizm
13E2 78B2           3295                                     mov             r0,#marker
13E4 76FF           3296                              mov            @r0,#0ffh
13E6 020000   F     3297                             jmp             goto7
                    3298     
13E9 7623           3299     go23no:    mov          @r0,#23h
13EB 753B08         3300                                             mov                     movrig,#8
13EE 753A07         3301                                             mov             movleft,#7
13F1 8055           3302                             jmp             loblok;БЛОК 00
                    3303     
13F3 7621           3304     kfull:          mov             @r0,#21h
13F5 8025           3305                             jmp             gofull
                    3306                             
                    3307                                             
13F7 020000   F     3308     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3309                             
13FA 75B0FB         3310     nome11:           mov           p3,#0fbh
13FD E5B0           3311                               mov           a,p3
13FF 20E70D         3312                               jb            acc.7,kvvod0
1402 B61205         3313                               cjne          @r0,#12h,mem12no        
1405 7611           3314                               mov           @r0,#11h                ;ОЧИСТКА
1407 020000   F     3315                               jmp            loadcle
                    3316     
140A                3317     mem12no:        ;cjne           @r0,#13h,lowr           
140A 7612           3318                               mov           @r0,#12h                   ;
140C 020000   F     3319                               jmp           lowr1                     ;ЗАПИСЬ
                    3320     
140F 75B0F7         3321     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1412 20B70F         3322                               jb            p3.7,ddoutf
1415 78B0           3323                               mov           r0,#level
1417 B61129         3324                               cjne          @r0,#11h,mvv11
141A 7621           3325                               mov           @r0,#21h                ;ПОЛНАЯ
141C 900000   F     3326     gofull:           mov           dptr,#teFULL
141F 120000   F     3327                               call          lotext
1422 8035           3328                                     jmp             mlabL2  ;<-????????/
                    3329     
1424                3330     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3331     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3332     ;т е сохранить ее в ячейке для мигания в противном случае
                    3333     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3334     ;       знакоместа
1424 78B2           3335                                                     mov             r0,#marker
1426 7440           3336                                     mov             a,#bufind
1428 26             3337                                             add             a,@r0                   ;a=bufind+m
                             arker
1429 F9             3338                                             mov             r1,a
142A 19             3339                                             dec             r1      ;       inc             r1
142B 873C           3340                                             mov             savba,@r1
142D C219           3341                                             clr             bitmig
                    3342     ;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    53

142F 78B2           3343                       mov           r0,#marker      ;курсор слева   ?
1431 E53A           3344                             mov             a,movleft
1433 C3             3345                             clr             c
1434 96             3346                             subb    a,@r0
1435 7006           3347                             jnz        left21
1437 E53B           3348                             mov             a,movrig;уст в правую позицию
1439 F6             3349                             mov             @r0,a
                    3350     
143A 020000   F     3351                             jmp             goto7                                            
143D E53A           3352     left21:         mov             a,movleft;уст в левую позицию
143F F6             3353                             mov             @r0,a   
1440 020000   F     3354                             jmp             goto7
                    3355     
                    3356     
1443 B6120F         3357     mvv11:            cjne          @r0,#12h,mvv12
1446 7631           3358                                     mov             @r0,#31h
1448 900000   F     3359     loblok:                 mov             dptr,#teBL0;БЛОК 0
144B 120000   F     3360                                     call    lotext
144E 78B2           3361                                     mov             r0,#marker
1450 7607           3362                                     mov             @r0,#7
                    3363                                     ;mov            movrig,#9
                    3364                                     ;mov            movleft,#6
1452 020000   F     3365                                     jmp             goto7;outF
1455 7641           3366     mvv12:                  mov             @r0,#41h                ; БЛОК 00
1457 80EF           3367                                     jmp             loblok
                    3368     
                    3369     
                    3370     
1459                3371     mlabL2:         ;jmp            labL2
                    3372                                             ;  уст курсор в правую позицию 
                    3373                                     ;                               29.12.06
                    3374     ;;;;;;;;;;;;;;;;;;
                    3375     ;необходимо не портить цифру в следуюем справа знакоместе
                    3376     ;т е сохранить ее в ячейке для мигания в противном случае
                    3377     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3378     ;       знакоместа
1459 78B2           3379                                             mov             r0,#marker
145B 7440           3380                                     mov             a,#bufind
145D 26             3381                                             add             a,@r0                   ;a=bufind+m
                             arker
145E F9             3382                                             mov             r1,a
145F 09             3383                                             inc             r1
1460 873C           3384                                             mov             savba,@r1
                    3385     ;;;;;;;;;;;;;;;;
1462 78B2           3386                       mov           r0,#marker      ;курсор справа  ?
1464 E53B           3387                             mov             a,movrig
1466 C3             3388                             clr             c
1467 96             3389                             subb    a,@r0
1468 6006           3390                             jz         equ2l
146A E53B           3391                             mov             a,movrig;уст в правую позицию
146C F6             3392                             mov             @r0,a
                    3393     ;                       lool
146D 020000   F     3394                             jmp             goto7                                            
1470 E53A           3395     equ2l:          mov             a,movleft;уст в левую позицию
1472 F6             3396                             mov             @r0,a   
1473 020000   F     3397                             jmp             goto7
                    3398                     
                    3399     
1476 B63159         3400     labM:                   cjne    @r0,#31h,nom31
1479 75B0FB         3401                                     mov             p3,#0fbh
147C 30B7DA         3402                                     jnb             p3.7,mlabL2
147F 75B0F7         3403                                mov          p3,#0f7h
1482 20B79F         3404                                jb           p3.7,ddoutf
                    3405                                
1485 7632           3406                                mov          @r0,#32h                        ;ИНТ 0000
                    3407                                     ;       считать с индикатора  
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    54

1487 C3             3408     blokvv:         clr                     c
1488 E547           3409                                mov          a,bufind+7      
148A 9430           3410                                      subb           a,#30h
148C B40002         3411                                      cjne           a,#0,blokvvc
148F 7401           3412                                      mov            a,#1                    ;номера блоков 1..4
                    3413     
1491 F538           3414     blokvvc: mov            nblok,a
1493 900000   F     3415                                mov          dptr,#teINT;ИНТ 0000c
1496 120000   F     3416                                call         lotext
                    3417                                      ;anl           bufind+11,#0efh
1499 78B2           3418                                mov          r0,#marker
149B 7605           3419                                mov          @r0,#5
149D 753B08         3420                                mov          movrig,#8
14A0 753A05         3421                                mov          movleft,#5
14A3 789A           3422                                      mov            r0,#parT
14A5 B60609         3423                                     cjne            @r0,#6,innot6
14A8 534BF0         3424                                     anl                     bufind+11,#0f0h;after 5- 0.000c
14AB 434B80         3425                                     orl                     bufind+11,#80h
14AE 020000   F     3426                                     jmp                     goto7
14B1 B60309         3427     innot6: cjne            @r0,#3,innot3
14B4 534BF0         3428                                     anl                     bufind+11,#0f0h;after 7- 000.0c
14B7 434B20         3429                                     orl                     bufind+11,#20h
                    3430                                     ;call           ind
14BA 020000   F     3431                                     jmp                     out7;goto7
14BD C3             3432     innot3: clr                     c
14BE 7403           3433                                     mov                     a,#3
14C0 96             3434                                     subb            a,@r0
14C1 5009           3435                                     jnc                     innot1_2
14C3 534BF0         3436                                     anl                     bufind+11,#0f0h;after 6- 00.00c
14C6 434B40         3437                                     orl                     bufind+11,#40h
14C9 020000   F     3438                                     jmp                     goto7
                    3439     
14CC                3440     innot1_2:
14CC 534BF0         3441                                     anl                     bufind+11,#0f0h;0000c
                    3442                                                                     
14CF 020000   F     3443     rgoto7: jmp        goto7;outF
                    3444     
14D2 B63260         3445     nom31:             cjne         @r0,#32h,nom32
14D5 75B0FB         3446                                     mov             p3,#0fbh
14D8 20B71F         3447                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3448                                     
14DB                3449     lefcur:         ;;кн <- 32 нач блок 000
                    3450     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3451     ;т е сохранить ее в ячейке для мигания в противном случае
                    3452     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3453     ;       знакоместа
14DB C219           3454                                                     clr             bitmig
14DD 78B2           3455                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
14DF 7440           3456                                     mov             a,#bufind
14E1 26             3457                                             add             a,@r0                   ;a=bufind+m
                             arker
14E2 F9             3458                                             mov             r1,a
14E3 19             3459                                             dec             r1;;;;;;;;;;;
14E4 873C           3460                                             mov             savba,@r1
                    3461                                             
14E6 78B2           3462                                                     mov             r0,#marker      ;курсор сле
                             ва?
14E8 E53A           3463                             mov             a,movleft
14EA C3             3464                             clr             c
14EB 96             3465                             subb    a,@r0
14EC 7006           3466                             jnz        noequ2
14EE E53B           3467                             mov             a,movrig
14F0 F6             3468                             mov             @r0,a;уст в крайнюю правую позицию
14F1 020000   F     3469                             jmp             goto7
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    55

14F4 120000   F     3470     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
14F7 020000   F     3471                             jmp        goto7        
                    3472                                                                       
                    3473     
                    3474     ;;;;;;;;;;;;;;;;;;
14FA                3475     vvinte:         ;ввод интервал                          
14FA 75B0F7         3476     no31n:             mov          p3,#0f7h
14FD 20B7CF         3477                                     jb              p3.7,rgoto7
1500 7633           3478                                     mov             @r0,#33h
                    3479                                     ;считать с индикатора введенный интервал
1502 7F0A           3480                                             mov             r7,#10
1504 7853           3481                                     mov             r0,#adec
1506 120000   F     3482                                     call    clearN
1509 120000   F     3483                                     call    upak4                   
150C 784F           3484                                     mov             r0,#abin
150E 7953           3485                                     mov             r1,#adec                        ;мл        
                              ст
1510 120000   F     3486                                     call    decbin                  ;abin..abin+3 (hex)
1513 794F           3487                                     mov             r1,#abin
1515 78CE           3488                                     mov             r0,#interva+1
1517 E7             3489                                     mov             a,@r1
1518 F6             3490                                     mov             @r0,a
1519 18             3491                                     dec             r0
151A 09             3492                                     inc             r1
151B E7             3493                                     mov             a,@r1
151C F6             3494                                     mov             @r0,a
                    3495                                     
151D 78D5           3496                                     mov             r0,#volume                      ;объем блок
                             а
151F 7600           3497                                     mov             @r0,#0
1521 08             3498                                     inc             r0
1522 76C7           3499                                     mov             @r0,#0c7h
1524 120000   F     3500                                     call            adrblok;dptr
1527 120000   F     3501                                     call            save_hl;1я ячейка блока
152A 78B2           3502                                mov          r0,#marker
152C 76FF           3503                                mov          @r0,#0ffh
152E D204           3504                                      setb           bitizm
1530 C20B           3505                                      clr            bitmem
1532 020000   F     3506                                jmp     goto7;
                    3507     
                    3508     
1535 B6332B         3509     nom32:           cjne           @r0,#33h,nom33
1538 75B0FB         3510                              mov            p3,#0fbh
153B 30B79D         3511                              jnb            p3.7,lefcur
153E 75B0F7         3512                              mov            p3,#0f7h
1541 20B78B         3513                              jb             p3.7,rgoto7
                    3514                              ;запомнить номер ячейки конца блока
1544 7634           3515                              mov    @r0,#34h
1546 7F0A           3516     INTn:                   mov             r7,#10
1548 7853           3517                                     mov             r0,#adec
154A 120000   F     3518                                     call    clearN
154D 120000   F     3519                                     call    upak3                   
1550 784F           3520                                     mov             r0,#abin
1552 7953           3521                                     mov             r1,#adec                        ;мл        
                              ст
1554 120000   F     3522                                     call    decbin                  ;abin..abin+3 (hex)
1557 120000   F     3523                                     call    loadr2                  ;r2..r5
155A 120402         3524                                     call    altof                   ;r2..r5->int
155D 020000   F     3525     dgoto7:                  jmp            goto7
                    3526     
1560 020000   F     3527     rlefcur:                jmp             lefcur
                    3528     
1563 B63452         3529     nom33:          cjne            @r0,#34h,labelP
1566 75B0FB         3530                               mov           p3,#0fbh
1569 30B7F4         3531                              jnb            p3.7,rlefcur
156C 75B0F7         3532                              mov            p3,#0f7h
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    56

156F 20B7EB         3533                              jb             p3.7,dgoto7
1572 7635           3534                              mov            @r0,#35h
1574 78B2           3535                              mov            r0,#marker
1576 76FF           3536                              mov            @r0,#0ffh
                    3537                              ;T1<-число на индикаторе
                    3538                                               ;vvod КОН БЛ 000
1578 78CF           3539                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
157A 7630           3540                              mov            @r0,#30h  
157C C20B           3541                              clr            bitmem
157E D204           3542                              setb           bitizm;;;;      
1580 020000   F     3543                             jmp        goto7
1583 020000   F     3544     vodm11_15:                      jmp             vvodm11_15
1586 020000   F     3545     me11_15de:                      jmp             me11_15dec
                    3546     ;обработка кнопки меню ввод
1589 30112C         3547     labelS:         jnb                     bitmenu,labelP
158C 78B1           3548                                             mov                     r0,#vichR
158E 7415           3549                                             mov                     a,#15h
1590 C3             3550                                             clr                     c
1591 96             3551                                             subb            a,@r0
1592 4021           3552                                             jc                      rme21_23
                    3553                             
1594 75B0FB         3554                                             mov                     p3,#0fbh
1597 20B7E9         3555                                             jb                      p3.7,vodm11_15
159A 78B1           3556                                             mov                     r0,#vichR
159C B611E7         3557                                             cjne                    @r0,#11h,me11_15de;<-
159F 7615           3558                                             mov                     @r0,#15h
15A1 900000   F     3559                                             mov                     dptr,#teKALIB
15A4 120000   F     3560                                             call            lotext
15A7 020000   F     3561                                             jmp                     onmem11
15AA C211           3562     menuon:         clr             bitmenu                 ;off menu
15AC D204           3563                                             setb    bitizm
                    3564     
15AE 78B1           3565                                     mov             r0,#vichR
15B0 7600           3566                                     mov             @r0,#0
15B2 020000   F     3567                                     jmp             onmem11
                    3568     
                    3569                                             ;;;;;
                    3570             
15B5 020000   F     3571     rme21_23:               jmp             me21_23 
                    3572                             
                    3573     ;режим просмотра
15B8 B64130         3574     labelP:                 cjne            @r0,#41h,govvlist
15BB 7642           3575                                                     mov                     @r0,#42h
                    3576                                                     ;       считать с индикатора  
15BD C3             3577                                             clr                     c
15BE E547           3578                                mov          a,bufind+7      
15C0 9430           3579                                      subb           a,#30h
15C2 B40002         3580                                      cjne           a,#0,chaipr
15C5 7401           3581                                      mov            a,#1
15C7 F538           3582     chaipr:                          mov            nblok,a
15C9 900000   F     3583                                mov          dptr,#teCH;ОТСЧЕТ 000
15CC 120000   F     3584                                call         lotext
15CF 534BEF         3585                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
15D2 78B2           3586                                mov          r0,#marker
15D4 7607           3587                                mov          @r0,#7
15D6 753B09         3588                                mov          movrig,#9
15D9 753A07         3589                                mov          movleft,#7
15DC 120000   F     3590                                             call            z_1s
15DF 020000   F     3591                        jmp     goto7;outF
15E2 020000   F     3592     label43:                jmp             label7
                    3593     
15E5 020000   F     3594     rlist_43:                       jmp                     list_43                            
                                  
15E8 020000   F     3595     mlabL2r:                        jmp                     mlabL2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    57

15EB B642F7         3596     govvlist:                       cjne            @r0,#42h,rlist_43
15EE 75B0FB         3597                                                                     mov                     p3,
                             #0fbh
15F1 30B7F4         3598                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
15F4 75B0F7         3599                                                             mov                     p3,#0f7h
15F7 20B7E8         3600                                                             jb                      p3.7,label4
                             3
15FA 7643           3601                                                             mov                     @r0,#43h;vv
                             od 
15FC 78B2           3602                                                             mov                     r0,#marker
15FE 76FF           3603                                                             mov                     @r0,#0ffh
1600 7F0A           3604                                                                     mov             r7,#10
1602 7853           3605                                     mov             r0,#adec
1604 120000   F     3606                                     call    clearN
1607 120000   F     3607                                     call    upak3                   
160A 784F           3608                                     mov             r0,#abin
160C 7953           3609                                     mov             r1,#adec                        ;мл        
                              ст
160E 120000   F     3610                                     call    decbin                  ;abin..abin+3 (hex)
1611 120000   F     3611                                     call    loadr2                  ;r2..r5
1614 ED             3612                                     mov             a,r5                            ;сохр номер
                              лемента
1615 F537           3613                                     mov             nelem,a
1617 120402         3614                                     call    altof                   ;r2..r5->int
161A 900000   F     3615                                     mov             dptr,#ch_1;
161D 120000   F     3616                                     call    ldc_ltemp                       ;r8..r11
1620 1201D1         3617                                     call    flsub
1623 900000   F     3618                                     mov             dptr,#ch_4;
1626 120000   F     3619                                     call    ldc_ltemp                       ;r8..r11
1629 120203         3620                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
162C 120343         3621                                     call            ftol                    ;r2..r5->hex
162F C002           3622                                     push            rr2
1631 C003           3623                                     push            rr3
1633 C004           3624                                     push            rr4
1635 C005           3625                                     push            rr5
1637 120000   F     3626                                     call            adrblok;dptr-
163A D005           3627                                     pop                     rr5
163C D004           3628                                     pop                     rr4
163E D003           3629                                     pop                     rr3
1640 D002           3630                                     pop                     rr2
1642 79D4           3631                                     mov                     r1,#saven_bl+1;сохр адрес внешн озу
                              введенного лемента
1644 E582           3632                                     mov                     a,dpl
1646 2D             3633                                     add                     a,r5
1647 F582           3634                                     mov                     dpl,a
1649 F7             3635                                     mov                     @r1,a           ;low
164A E583           3636                                     mov                     a,dph
164C 3C             3637                                     addc            a,r4
164D F583           3638                                     mov                     dph,a
164F 19             3639                                     dec                     r1
1650 F7             3640                                     mov                     @r1,a                   ;high
                    3641                             
1651                3642     li42_43:
1651 120000   F     3643                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
1654 900000   F     3644                                     mov             dptr,#ch10;
1657 120000   F     3645                                     call    ldc_ltemp
165A 120000   F     3646                                     call    zdiv    
                    3647                                     ;;;;;;;;;;;
165D 120000   F     3648                                     call    maform
                    3649                                     ;;;;
                    3650     
                    3651                                     ;;;;;;;
1660 784F           3652                                             mov             r0,#abin
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    58

1662 120000   F     3653                                             call    saver2
1665 7853           3654                                             mov             r0,#adec
1667 7952           3655                                             mov             r1,#abin+3      ;hex->10
1669 120000   F     3656                                             call    bindec
                    3657                                     
166C 785C           3658                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
166E 7945           3659                                             mov             r1,#bufind+5
1670 7F07           3660                                             mov             r7,#7
1672 E6             3661     ch43:                           mov             a,@r0
1673 2430           3662                                             add             a,#30h
1675 F7             3663                                             mov             @r1,a
1676 19             3664                                             dec             r1
1677 18             3665                                             dec             r0
1678 DFF8           3666                                             djnz    r7,ch43
167A 7847           3667                                             mov             r0,#bufind+7
167C 762D           3668                                             mov             @r0,#2dh          ;-2..-9
167E 7840           3669                                             mov             r0,#bufind
1680 762B           3670                                             mov             @r0,#2bh
1682 300202         3671                                             jnb             znmat,nozzmi43;bitznak,nozzmi
1685 762D           3672                                             mov             @r0,#2dh
1687 79AE           3673     nozzmi43:                               mov             r1,#diap
1689 7848           3674                                             mov             r0,#bufind+8
168B E7             3675                                             mov             a,@r1
168C B40808         3676                                             cjne    a,#8,nodi8_43
168F 7630           3677                                             mov             @r0,#30h                 ;10-10
1691 18             3678                                             dec             r0
1692 7663           3679                                             mov             @r0,#63h;31h
1694 08             3680                                             inc             r0
1695 800E           3681                                             jmp             see_l43
1697 B40908         3682     nodi8_43:       cjne    a,#9,nodi9_43
                    3683                                     
169A 7631           3684                                             mov             @r0,#31h           ;10-11
169C 18             3685                                             dec             r0
169D 7663           3686                                             mov             @r0,#63h;31h
                    3687                                     
169F 08             3688                                             inc             r0
16A0 8003           3689                                             jmp             see_l43
16A2 2432           3690     nodi9_43:               add             a,#32h
16A4 F6             3691                                             mov             @r0,a;
16A5 08             3692     see_l43:                        inc             r0
16A6 7641           3693                                             mov             @r0,#"A";"E";
16A8 08             3694                                             inc             r0
16A9 7600           3695                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
16AB 08             3696                                             inc             r0;             mov             buf
                             ind+11
16AC 76D0           3697                                             mov             @r0,#0d0h               ;bufind+11.
                             4 точка после первой цифры
16AE 120000   F     3698     out43:          call            ind
16B1 120000   F     3699                                             call            z_1s
16B4 020000   F     3700                                             jmp             out7                               
                                  
                    3701     
                    3702                                     ;;;;;;;;        
16B7 783D           3703     label7: mov             r0,#chkl
16B9 7604           3704                                     mov             @r0,#04;3
16BB 08             3705                                     inc             r0
16BC 76E8           3706                                     mov             @r0,#0e8h               ;1000
16BE 020000   F     3707                                     jmp             out7;
16C1 B64351         3708     list_43:                cjne    @r0,#43h,noli_43
16C4 75B0FB         3709                                                     mov             p3,#0fbh                ;43
                             h <-
16C7 20B70A         3710                                                     jb              p3.7,vvod43             ;vv
                             od
16CA C20B           3711                                                     clr             bitmem
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    59

16CC D204           3712                                                     setb    bitizm
16CE 78B2           3713                                                     mov             r0,#marker
16D0 76FF           3714                                                     mov             @r0,#0ffh
16D2 80E3           3715                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3716     
16D4 7644           3717     vvod43:                 mov             @r0,#44h
16D6 E537           3718                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
16D8 F552           3719                                                     mov             abin+3,a
16DA 04             3720                                                     inc             a
16DB F537           3721                                                     mov             nelem,a
16DD E4             3722                                                     clr             a
16DE F551           3723                                                     mov             abin+2,a
16E0 F550           3724                                                     mov             abin+1,a
16E2 F54F           3725                                                     mov             abin,a
                    3726                                             
16E4 7853           3727                                             mov             r0,#adec
16E6 7952           3728                                             mov             r1,#abin+3      ;hex->10
16E8 120000   F     3729                                             call    bindec
16EB 7840           3730                                             mov             r0,#bufind;почистить индикатор
16ED 7F0A           3731                                             mov             r7,#10
16EF 7420           3732                                             mov             a,#20h
16F1 F6             3733     cle20:          mov             @r0,a
16F2 08             3734                                             inc             r0
16F3 DFFC           3735                                             djnz    r7,cle20
                    3736                                             ;;;;;;
16F5 900000   F     3737                                             mov             dptr,#teCH;ОТСЧЕТ 000
16F8 120000   F     3738                                call         lotext
16FB 534BEF         3739                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
16FE 785C           3740                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1700 7949           3741                                             mov             r1,#bufind+9
1702 7F03           3742                                             mov             r7,#3
1704 E6             3743     ch43_42:                                mov             a,@r0
1705 2430           3744                                             add             a,#30h
1707 F7             3745                                             mov             @r1,a
1708 19             3746                                             dec             r1
1709 18             3747                                             dec             r0
170A DFF8           3748                                             djnz    r7,ch43_42
170C 120000   F     3749                                             call            ind
170F 120000   F     3750                                             call            z_1s
1712 020000   F     3751                                             jmp             out7
1715 7643           3752     noli_43:                mov                     @r0,#43h
1717 79D4           3753                                                     mov                     r1,#saven_bl+1
1719 E7             3754                                                     mov                     a,@r1
171A F582           3755                                                     mov                     dpl,a
171C 19             3756                                                     dec                     r1
171D E7             3757                                                     mov                     a,@r1;high
171E F583           3758                                                     mov                     dph,a
1720 A3             3759                                                     inc                     dptr
1721 A3             3760                                                     inc                     dptr
1722 A3             3761                                                     inc                     dptr
1723 A3             3762                                                     inc                     dptr
1724 E583           3763                                                     mov                     a,dph
1726 F7             3764                                                     mov                     @r1,a
1727 09             3765                                                     inc                     r1
1728 E582           3766                                                     mov                     a,dpl
172A F7             3767                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
172B 020000   F     3768                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3769     
                    3770     
                    3771     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    60

172E 020000   F     3772     rLABELP:                jmp                     LABELP
1731 78B1           3773     vvodm11_15:     mov                     r0,#vichR;vvod
1733 75B0F7         3774                                                     mov                     p3,#0f7h
1736 20B7F5         3775                                             jb                      p3.7,rLABELP;????
                    3776                                     
                    3777     
1739 B61112         3778                                             cjne                    @r0,#11h,tome21
173C 7621           3779                                             mov                     @r0,#21h;vvod
173E 900000   F     3780                                             mov                     dptr,#teTE11
1741 120000   F     3781                                             call            lotext
1744 020000   F     3782                                             jmp                     onmem11
                    3783     
1747 16             3784     me11_15dec:             dec             @r0                             ;<-
1748 120000   F     3785     lokame1:        call            lomenu
174B 020000   F     3786                                             jmp                     onmem11
                    3787     
174E B61206         3788     tome21:         cjne                    @r0,#12h,tome13
                    3789                                             ;вкл тест интерфейса
1751 020000   F     3790                                             jmp             testrs;??????????
1754 020000   F     3791                                             jmp                     onmem11
                    3792     
1757 B61324         3793     tome13:         cjne                    @r0,#13h,tome14
175A 7631           3794                                             mov                     @r0,#31h
                    3795                                             
175C 7A50           3796                                             mov                     r2,#50h                    
                                  ;57.6->19.2
175E 7B2C           3797                                             mov                     r3,#2ch
1760 120454         3798                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1763 E508           3799                                             mov                     a,r8
1765 B4000B         3800                                             cjne            a,#00,skor19
1768 900000   F     3801                                             mov                     dptr,#teS57_6;57,6
176B 120000   F     3802                                             call            lotext
176E C213           3803                                             clr                     bitv19
                    3804     
1770 020000   F     3805                                             jmp             onmem11
1773 900000   F     3806     skor19:         mov                     dptr,#teS19_2
1776 120000   F     3807                                             call            lotext
1779 D213           3808                                             setb            bitv19
                    3809             
177B 020000   F     3810                                             jmp                     onmem11
                    3811                                             
                    3812     
177E B6140E         3813     tome14:         cjne                    @r0,#14h,tome15
1781 D204           3814                                             setb            bitizm
1783 7881           3815                                             mov                     r0,#chavt
1785 7600           3816                                             mov                     @r0,#0
1787 08             3817                                             inc                     r0
1788 7600           3818                                             mov                     @r0,#0
178A C211           3819     outmenu:        clr                     bitmenu
178C 020000   F     3820                                             jmp                     out7
                    3821     
178F 7651           3822     tome15:         mov                     @r0,#51h;ПАРОЛЬ 000
1791 120000   F     3823                                             call            lomenu
1794 78B2           3824                                             mov                     r0,#marker
1796 7607           3825                                             mov                     @r0,#7
1798 753B09         3826                                             mov                     movrig,#9
179B 753A07         3827                                             mov                     movleft,#7
                    3828                                             ;setb           bitizm
179E 020000   F     3829                                             jmp                     onmem11
                    3830     
                    3831     
17A1 78B1           3832     me21_23:        mov                     r0,#vichR               ;<-
17A3 7423           3833                                             mov                     a,#23h
17A5 C3             3834                                             clr                     c
17A6 96             3835                                             subb            a,@r0
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    61

17A7 403D           3836                                             jc                      labelS1
17A9 75B0FB         3837                                             mov                     p3,#0fbh
17AC 20B718         3838                                             jb                      p3.7,vv21_23
17AF B6210B         3839                                             cjne            @r0,#21h,me21_23dec;-<
17B2 7623           3840                                             mov                     @r0,#23h
17B4 900000   F     3841                                             mov                     dptr,#teTE7
17B7 120000   F     3842                                             call            lotext
17BA 020000   F     3843                                             jmp                     onmem11
17BD                3844     me21_23dec:     
17BD 16             3845                                             dec                     @r0
17BE 120000   F     3846                                             call            lomenu
17C1 020000   F     3847                                             jmp                     onmem11
17C4 020000   F     3848     onmem12:        jmp             outF    ;(ie7)                          
                    3849                                                     
17C7 75B0F7         3850     vv21_23:        mov             p3,#0f7h                ;vvod
17CA 20B7F7         3851                                             jb              p3.7,onmem12
17CD B6210C         3852                                             cjne            @r0,#21h,test22
                    3853                                             ;mov                    dptr,#tabt11;заслать ус 11А
17D0 120000   F     3854     tests:          call            lotpus
17D3 D215           3855                                             setb            biteizm;запомнить режим ТИ
17D5 D204           3856                                             setb            bitizm
17D7 C211           3857                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
17D9 020000   F     3858                                             jmp                     onmem11
17DC B62202         3859     test22:         cjne            @r0,#22h,test23
                    3860                                     ;       mov                     dptr,#tabt9;заслать ус 9А
17DF 80EF           3861                                             jmp             tests   
17E1                3862     test23:
                    3863                                     ;       mov                     dptr,#tabt7;заслать ус 7А
17E1 80ED           3864                                             jmp             tests   
17E3 020000   F     3865     left_s:         jmp                     left_sk
17E6 B63149         3866     labelS1:        cjne            @r0,#31h,me_41
17E9 75B0FB         3867                                             mov                     p3,#0fbh                   
                                  ;<-
17EC 30B7F4         3868                                             jnb                     p3.7,left_s
17EF 75B0F7         3869                                             mov                     p3,#0f7h
17F2 20B7CF         3870                                             jb                      p3.7,onmem12
                    3871                                             ;запомнить признак установленной скорости в рпзу
                    3872     
                    3873     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3874     ;и запись во внешнее озу(0000h)
17F5 7900           3875                                             mov             r1,#0                   ;
17F7 7A50           3876                                     mov             r2,#50h
17F9 7B00           3877                                     mov             r3,#00
17FB 120499         3878                                     call    copyPP
                    3879                                     ;внести изменения во внешн озу
                    3880                                     ;KD=00 01 86 A0 (KD=1)
                    3881                                     ;кофф *100000 и переведенный в hex формат
                    3882                                     ;согласно адресов диапазонов и адресов яч вн озу 
17FE 792C           3883                                     mov             r1,#2ch
1800 7400           3884                                     mov             a,#0;57,6
1802 301302         3885                                     jnb             bitv19,spwri
1805 7401           3886                                     mov             a,#1;19.6
1807 F3             3887     spwri:  movx    @r1,a
                    3888     ;стереть страницу пап прогр 
1808 905000         3889                                     mov             dptr,#5000h
180B 7FFF           3890                                     mov             r7,#0ffh
180D 12043E         3891                                     call    cle256
                    3892     ;и запись в ячейки кофф памяти прогр (3000h) 
1810 7FFF           3893                                     mov             r7,#0ffh
1812 7900           3894                                     mov             r1,#0                           ;external r
                             am
1814 905000         3895                                     mov             dptr,#5000h
1817 120480         3896                                     call    wrpage
                    3897             
181A 201305         3898                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    62

                             енной скоростью
181D 758DF4         3899                                             mov                     TH1,#244                ;57
                             .6
1820 8003           3900                                             jmp                     outsko
1822 758DDC         3901     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1825 C211           3902     outsko:         clr             bitmenu
1827 D204           3903                                             setb            bitizm
1829 020000   F     3904                                             jmp                     out7
                    3905     
182C 020000   F     3906     rlabels4:               jmp             labels4
182F 020000   F     3907     rlabelS13:      jmp             labelS13
                    3908     
1832 B651F7         3909     me_41:          cjne            @r0,#51h,rlabels4
1835 75B0FB         3910                                             mov             p3,#0fbh;<-
1838 30B7F4         3911                                             jnb             p3.7,rlabelS13
183B 75B0F7         3912                                             mov             p3,#0f7h
183E 20B76D         3913                                             jb              p3.7,vvmenu
                    3914                                             ;ввод пароля
                    3915                                             
                    3916     ;       считать с индикатора 
1841 7F0E           3917                                     mov             r7,#14
1843 784F           3918                                     mov             r0,#abin
1845 120000   F     3919                                     call    clearN                  
                    3920                                     
                    3921     ;чтение номера байта с индикатора(3байта)
                    3922     ;bufind+3..bufind+9
                    3923     ;-  - - -
                    3924     ;- - - - - - - - - -
                    3925     ;adec..adec+9
                    3926     ;ст            мл
1848 7849           3927                                     mov             r0,#bufind+9;
184A 795C           3928                                     mov             r1,#adec+9
184C 7F03           3929                                     mov             r7,#3;3bait
184E C3             3930     upav1:          clr             c
184F E6             3931                                     mov             a,@r0
1850 9430           3932                                     subb    a,#30h
1852 F7             3933                                     mov             @r1,a
1853 18             3934                                     dec             r0
1854 19             3935                                     dec             r1
1855 DFF7           3936                                     djnz    r7,upav1;adec+7..adec+9
1857 7A50           3937                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1859 7B28           3938                                             mov                     r3,#28h
185B 120454         3939                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
185E 800F           3940     jmp                     goparol
1860 E508           3941                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1862 B55A4C         3942                                     cjne            a,adec+7,parerr
1865 E509           3943                                     mov                     a,r9    
1867 B55B47         3944                                     cjne            a,adec+8,parerr
186A E50A           3945                                     mov                     a,r10
186C B55C42         3946                                     cjne            a,adec+9,parerr
                    3947                                     ;равны
186F 78B1           3948     goparol:        mov             r0,#vichR               ;режим меню 52
1871 7652           3949                                             mov             @r0,#52h                ;0000-n
1873 900000   F     3950                                             mov             dptr,#teKD;00000-nA
1876 120000   F     3951                                             call            lotext
                    3952                                             ;;;;;;;;;
                    3953                                                     ;n(hex)->abin
1879 120000   F     3954                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
187C 2552           3955                                             add             a,abin+3
187E F552           3956                                             mov             abin+3,a
1880 7853           3957                                             mov             r0,#adec
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    63

1882 7952           3958                                             mov             r1,#abin+3      ;hex->10
1884 120000   F     3959                                             call    bindec
1887 855C48         3960                                             mov             bufind+8,adec+9
188A 75472D         3961                                             mov             bufind+7,#2dh
                    3962     
188D 79AE           3963                                             mov             r1,#diap
188F 7848           3964                                             mov             r0,#bufind+8
1891 E7             3965                                             mov             a,@r1
1892 B40807         3966                                             cjne    a,#8,nodi8k
1895 7630           3967                                             mov             @r0,#30h                 ;10-10
1897 18             3968                                             dec             r0
1898 7663           3969                                             mov             @r0,#63h;31h
189A 8008           3970                                             jmp             nodisk9
189C B40905         3971     nodi8k:                         cjne    a,#9,nodisk9
                    3972                                     
189F 7631           3973                                             mov             @r0,#31h           ;10-11
18A1 18             3974                                             dec             r0
18A2 7663           3975                                             mov             @r0,#63h;31h
                    3976                                     
                    3977     
18A4 78B2           3978     nodisk9:        mov                     r0,#marker
18A6 7601           3979                                             mov                     @r0,#1
18A8 753A01         3980                                             mov                     movleft,#1
18AB 753B05         3981                                             mov                     movrig,#5
                    3982                                             
18AE 020000   F     3983     vvmenu:         jmp             goto7
                    3984     
18B1 753932         3985     parerr:         mov                     nuerr,#32h
18B4 120000   F     3986                                             call            error
18B7 120000   F     3987                                             call            ind
18BA 120000   F     3988                                             call            z_1s
18BD C211           3989                                             clr                     bitmenu
18BF D204           3990                                             setb            bitizm
18C1 78B2           3991                                             mov                     r0,#marker
18C3 76FF           3992                                             mov                     @r0,#0ffh
18C5 020000   F     3993                                             jmp             goto7
                    3994     
18C8 30130B         3995     left_sk:                jnb                     bitv19,tosk19;<-
18CB 900000   F     3996                                             mov                     dptr,#teS57_6;57,6
18CE 120000   F     3997                                             call            lotext
18D1 C213           3998                                             clr                     bitv19
18D3 020000   F     3999                                             jmp             out7
18D6 900000   F     4000     tosk19:         mov                     dptr,#teS19_2
18D9 120000   F     4001                                             call            lotext
18DC D213           4002                                             setb            bitv19
18DE 020000   F     4003                                             jmp             out7
                    4004     
18E1                4005     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4006             
                    4007     ;;;;;;;;;;;;;;;;;;
                    4008     ;необходимо не портить цифру в следуюем справа знакоместе
                    4009     ;т е сохранить ее в ячейке для мигания в противном случае
                    4010     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4011     ;       знакоместа
18E1 78B2           4012                                     mov             r0,#marker
18E3 7440           4013                                     mov             a,#bufind
18E5 26             4014                                             add             a,@r0                   ;a=bufind+m
                             arker
18E6 F9             4015                                             mov             r1,a
18E7 19             4016                                             dec             r1;inc          r1
18E8 873C           4017                                             mov             savba,@r1
                    4018                                                     
18EA 78B2           4019                                                     mov             r0,#marker
18EC 16             4020                                                     dec             @r0                        
                                  
18ED C219           4021                                     clr             bitmig
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    64

18EF E53A           4022                                     mov                     a,movleft
18F1 B6064F         4023                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
18F4 06             4024                                     inc             @r0
18F5 020000   F     4025                                             jmp             goto7
                    4026     ;;;;;;;
                    4027     
18F8                4028     vvkali52:       ;введено значение для калибровки
                    4029                                             ;число на индикаторе ->Ak  (52h)
                    4030                                             ;       считать с индикатора 
18F8 7F0E           4031                                     mov             r7,#14
18FA 784F           4032                                     mov             r0,#abin
18FC 120000   F     4033                                     call    clearN                  
                    4034                                     
                    4035     ;чтение номера байта с индикатора(3байта)
                    4036     ;bufind+1..bufind+5
                    4037     ;-  - - -
                    4038     ;- - - - - - - - - -
                    4039     ;adec..adec+9
                    4040     ;ст            мл
18FF 7845           4041                                     mov             r0,#bufind+5;
1901 795C           4042                                     mov             r1,#adec+9
1903 7F05           4043                                     mov             r7,#5;5bait
1905 C3             4044     upav2:          clr             c
1906 E6             4045                                     mov             a,@r0
1907 9430           4046                                     subb    a,#30h
1909 F7             4047                                     mov             @r1,a
190A 18             4048                                     dec             r0
190B 19             4049                                     dec             r1
190C DFF7           4050                                     djnz    r7,upav2;adec+7..adec+9
                    4051     
190E 784F           4052                                     mov             r0,#abin
1910 7953           4053                                     mov             r1,#adec                        ;мл        
                              ст
1912 120000   F     4054                                     call    decbin                  ;abin..abin+3 (hex)
1915 120000   F     4055                                     call    loadr2                  ;r2..r5
1918 120402         4056                                     call    altof   ;r2..r5->float
191B 900000   F     4057                                     mov     dptr,#ch_10;10
191E 120000   F     4058                                     call    ldc_ltemp                       ;r8..r11=8
1921 120203         4059                                     call    flmul
1924 78A4           4060                                     mov             r0,#rez_Ak
1926 120000   F     4061                                     call    saver2
1929 C211           4062                                             clr                     bitmenu
192B D212           4063                                             setb            bitklb
                    4064                                             ;зажечь KMП
192D D204           4065                                             setb            bitizm;бит калибровки уже установле
                             н
192F 78B2           4066                                             mov                     r0,#marker
1931 76FF           4067                                             mov                     @r0,#0ffh
1933 783D           4068                                     mov             r0,#chkl
1935 76FF           4069                                     mov             @r0,#0ffh
1937 08             4070                                     inc             r0
1938 76FF           4071                                     mov             @r0,#0ffh;38h
193A 120000   F     4072                                     call            z_1s
193D 020000   F     4073                                     jmp             out7
                    4074     
                    4075     
1940 020000   F     4076                                             jmp             goto7
                    4077                                              
1943 020000   F     4078     onmem13:        jmp             goto7   ;(ie7)
                    4079     
1946 B642AF         4080     labels4:        cjne            @r0,#42h,vvkali52
1949 75B0FB         4081                                             mov                     p3,#0fbh;<-
194C 30B7F4         4082                                             jnb             p3.7,onmem13
194F 75B0F7         4083                                             mov             p3,#0f7h;vvod
1952 20B7EE         4084                                             jb              p3.7,onmem13
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    65

                    4085                                             
                    4086             
1955 020000   F     4087     jmp             out7                                                    
                    4088     ;;;;;;;
1958                4089     labelI:
1958 75B0FE         4090                                     mov             p3,#0feh
195B E5B0           4091                                     mov             a,p3
195D 20E703         4092                                     jb              acc.7,nopoint
                    4093                                     ;
1960 020000   F     4094                                     jmp             goto7;out7
                    4095     
1963 75B0FB         4096     nopoint:                mov             p3,#0fbh
1966 E5B0           4097                                     mov             a,p3
1968 20E72C         4098                                     jb              acc.7,nopoin7
196B 78B2           4099     labelS3:mov             r0,#marker
196D E53A           4100                                     mov             a,movleft
196F B40309         4101                                     cjne    a,#3,poina1
1972 B6030B         4102                                     cjne    @r0,#3,nomarl;26
                    4103                                     ;mov            @r0,#9
1975 E53B           4104     poina2: mov                     a,movrig                ;кн <- B=+00000
1977 F6             4105                                     mov                     @r0,a
1978 020000   F     4106                                     jmp             goto7;  out7
                    4107     
197B B60402         4108     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
197E 80F5           4109                                             jmp             poina2
                    4110     
                    4111     
1980                4112     nomarl:                 ;                               29.12.06
                    4113     ;;;;;;;;;;;;;;;;;;
                    4114     ;необходимо не портить цифру в следуюем справа знакоместе
                    4115     ;т е сохранить ее в ячейке для мигания в противном случае
                    4116     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4117     ;       знакоместа
1980 78B2           4118                                     mov             r0,#marker
1982 7440           4119                                     mov             a,#bufind
1984 26             4120                                             add             a,@r0                   ;a=bufind+m
                             arker
1985 F9             4121                                             mov             r1,a
1986 09             4122                                             inc             r1
1987 873C           4123                                             mov             savba,@r1
                    4124                                                     
1989 78B2           4125                                                     mov             r0,#marker
198B 16             4126                                                     dec             @r0                        
                                  
198C C219           4127                                     clr             bitmig
198E E53A           4128                                     mov                     a,movleft
1990 B40349         4129                                     cjne            a,#3,poinA
1993 B60279         4130                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
1996 06             4131     poin3:  inc             @r0
                    4132     ;нажат ввод А =000000 запомнить константу А
1997 75B0F7         4133     nopoin7:           mov          p3,#0f7h
199A E5B0           4134                                     mov             a,p3
199C 20E770         4135                                     jb              acc.7,out7
199F 78B1           4136                                     mov             r0,#vichR
19A1 E6             4137                                     mov             a,@r0
19A2 B6213C         4138                                     cjne    @r0,#21h,no21p7
19A5 7631           4139                                     mov             @r0,#31h
                    4140                             ;       считать с индикатора  упаковать в плавающий формат
                    4141                             ;   сохранить
19A7 7F0E           4142                                     mov             r7,#14
19A9 784F           4143                                     mov             r0,#abin
19AB 120000   F     4144                                     call    clearN                  
19AE 120000   F     4145                                     call    upakA
                    4146                                     
19B1 784F           4147                                     mov             r0,#abin
19B3 7953           4148                                     mov             r1,#adec                        ;мл        
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    66

                              ст
19B5 120000   F     4149                                     call    decbin                  ;abin..abin+3 (hex)
19B8 120000   F     4150                                     call    loadr2                  ;r2..r5
19BB 120402         4151                                     call    altof                   ;r2..r5->int
19BE 78BC           4152                                     mov             r0,#konstA
19C0 120000   F     4153                                     call    saver2
                    4154     ;26
19C3 78B2           4155                                     mov             r0,#marker
19C5 7603           4156                                     mov             @r0,#3
19C7 753B08         4157                                     mov             movrig,#8
19CA 753A03         4158                                     mov             movleft,#3
19CD 900000   F     4159                                     mov             dptr,#teBequ0
19D0 120000   F     4160                                     call    lotext
19D3 120000   F     4161                                     call            outB
19D6 534BF7         4162                                     anl             bufind+11,#0f7h         ;гашение точки bufi
                             nd+7
19D9 020000   F     4163                                     jmp             goto7;out7
                    4164     
19DC B60330         4165     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
19DF 80B5           4166                                             jmp             poin3
                    4167     
19E1                4168     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4169                             ;   сохранить
19E1 7F0E           4170                                     mov             r7,#14
19E3 784F           4171                                     mov             r0,#abin
19E5 120000   F     4172                                     call    clearN                  
19E8 120000   F     4173                                     call    upakB                   
19EB 784F           4174                                     mov             r0,#abin
19ED 7953           4175                                     mov             r1,#adec                        ;мл        
                              ст
19EF 120000   F     4176                                     call    decbin                  ;abin..abin+3 (hex)
19F2 120000   F     4177                                     call    loadr2                  ;r2..r5
19F5 120402         4178                                     call    altof                   ;r2..r5->int
19F8 301B04         4179                                     jnb             bitznB,pozB
19FB EA             4180                                     mov             a,r2
19FC 4480           4181                                     orl             a,#80h
19FE FA             4182                                     mov             r2,a                    ;знак-
19FF 78C0           4183     pozB:           mov             r0,#konstB
1A01 120000   F     4184                                     call    saver2
                    4185     
1A04 79B2           4186                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1A06 77FF           4187                                     mov             @r1,#0ffh
1A08 78B1           4188                                     mov             r0,#vichR
1A0A 7611           4189                                     mov             @r0,#11h
1A0C 020000   F     4190                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4191                                     
                    4192     
1A0F                4193     out7:                   ;mov            IE,#80h
1A0F D083           4194                                     pop             dph
1A11 D082           4195                                     pop             dpl
1A13 D007           4196                                     pop             rr7     
1A15 D006           4197                                     pop             rr6
1A17 D005           4198                                     pop             rr5
1A19 D004           4199                                     pop             rr4
1A1B D003           4200                                     pop             rr3
1A1D D002           4201                                     pop             rr2
1A1F D001           4202                                     pop             rr1                             
1A21 D000           4203                                     pop             rr0
1A23 D0D0           4204                                     pop             psw
1A25 D0E0           4205                                     pop             acc
1A27 E5AD           4206                                     mov             a,P3IF
1A29 547F           4207                                     anl             a,#7fh
1A2B F5AD           4208                                     mov             P3IF,a
1A2D 75B0C0         4209                                     mov             P3,#0c0h
                    4210     ;clr            bitmig
1A30 75E730         4211                                     mov             EIE2,#30H
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    67

1A33 C219           4212     clr             bitmig
1A35 32             4213                                     reti
                    4214     
                    4215     
                    4216                                     
                    4217     
                    4218     
1A36 78B1           4219     lomenu:         mov             r0,#vichR
1A38 B61107         4220                                             cjne    @r0,#11h,menu12
1A3B 900000   F     4221                                             mov             dptr,#teTESI
1A3E 120000   F     4222     lome1:                  call    lotexT
1A41 22             4223                                             ret
1A42 B61205         4224     menu12:         cjne    @r0,#12h,menu13
1A45 900000   F     4225                                             mov             dptr,#teTESR
1A48 80F4           4226                                             jmp             lome1
1A4A B61305         4227     menu13:         cjne    @r0,#13h,menu14
1A4D 900000   F     4228                                             mov             dptr,#teSKOR
1A50 80EC           4229                                             jmp             lome1
1A52 B61405         4230     menu14:         cjne    @r0,#14h,menu15
1A55 900000   F     4231                                             mov             dptr,#teAVK
1A58 80E4           4232                                             jmp             lome1
1A5A B61505         4233     menu15:                 cjne    @r0,#15h,menu21
1A5D 900000   F     4234                                             mov             dptr,#teKALIB
1A60 80DC           4235                                             jmp             lome1
                    4236     
1A62 B62105         4237     menu21: cjne    @r0,#21h,menu22
1A65 900000   F     4238                                             mov             dptr,#teTE11
1A68 80D4           4239                                             jmp             lome1
1A6A B62205         4240     menu22:         cjne    @r0,#22h,menu23
1A6D 900000   F     4241                                             mov             dptr,#teTE9
1A70 80CC           4242                                             jmp             lome1
1A72 B62305         4243     menu23:         cjne    @r0,#23h,menu31
1A75 900000   F     4244                                             mov             dptr,#teTE7
1A78 80C4           4245                                             jmp             lome1
1A7A B63105         4246     menu31:         cjne    @r0,#31h,menu41
1A7D 900000   F     4247                                             mov             dptr,#teS57_6
1A80 80BC           4248                                             jmp             lome1
                    4249     
1A82                4250     menu41:         
1A82 900000   F     4251                                             mov             dptr,#tePAR
1A85 80B7           4252                                             jmp             lome1
                    4253     
                    4254     ;
                    4255     ;goprogr:       jmp     izm
                    4256     ;тест интерфейса
1A87                4257     testrs: ;jb     p0.3,goprogr
1A87 C2AC           4258                                     clr     IE.4
1A89 759955         4259     test1:  mov     SBUF0,#55h
1A8C 3099FD         4260                                     jnb     SCON0.1,$
1A8F 78B8           4261                                     mov     r0,#work;chtest
1A91 76BE           4262                                     mov     @r0,#190d;60
                    4263     
1A93 309825         4264     test01: jnb     SCON0.0,test2
1A96 E599           4265                                     mov     a,SBUF0
1A98 B45512         4266                                     cjne    a,#55h,test3
1A9B C299           4267     test4:  clr     SCON0.1
1A9D C298           4268                                     clr     SCON0.0
1A9F 7D0A           4269                                     mov     r5,#10
1AA1 7840           4270                                     mov     r0,#bufind              ;- - - -
1AA3 762D           4271     test04: mov     @r0,#2dh
1AA5 08             4272                                     inc     r0
1AA6 DDFB           4273                                     djnz    r5,test04
1AA8 120000   F     4274                                     call    ind
1AAB 80DC           4275                                     jmp     test1
1AAD                4276     test3:  
1AAD 753933         4277                                     mov     nuerr,#33h
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    68

1AB0 120000   F     4278                                     call    error           ;на кран прибора ERR 3
                    4279                             
1AB3 120000   F     4280                                     call    ind;
1AB6 120000   F     4281                                     call    z_01s           ;100ms
1AB9 80E0           4282                                     jmp     test4
1ABB 78B8           4283     test2:  mov     r0,#work;chtest
1ABD B60002         4284                                     cjne    @r0,#0,test02
1AC0 8003           4285                                     jmp     test5
1AC2 16             4286     test02: dec     @r0
1AC3 80CE           4287                                     jmp     test01
1AC5 120000   F     4288     test5:  call    z_1ms           ;1ms
1AC8 C299           4289                                     clr     SCON0.1
                    4290             
1ACA 753933         4291                                     mov     nuerr,#33h
1ACD 120000   F     4292                                     call    error           ;на кран прибора ERR 3
                    4293                                     
1AD0 120000   F     4294                                     call    ind
1AD3 120000   F     4295                                     call    z_01s           ;100ms
1AD6 80B1           4296                                     jmp     test1   
                    4297     
                    4298     
                    4299     
1AD8                4300     endkalib:;KD=Ak/A3
1AD8 789C           4301                                             mov                     r0,#rez_A3
1ADA 120000   F     4302                                             call            resar2
                    4303                                     
1ADD 120402         4304                                     call    altof                   ;->float
1AE0 EA             4305                                             mov                     a,r2
1AE1 547F           4306                                             anl                     a,#7fh
1AE3 FA             4307                                             mov                     r2,a
1AE4 120000   F     4308                                     call            move28
1AE7 78A4           4309                                             mov                     r0,#rez_Ak
1AE9 120000   F     4310                                             call            resar2
1AEC 1202B7         4311                                             call            fldiv
                    4312                                                     
1AEF 900000   F     4313                                     mov     dptr,#CHtho;100000
1AF2 120000   F     4314                                     call    ldc_ltemp                       ;r8..r11=8
1AF5 120203         4315                                     call    flmul
1AF8 120343         4316                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4317     
1AFB 78A0           4318                                             mov                     r0,#koefKD
1AFD 120000   F     4319                                             call            saver2
                    4320                                             ;запись в рпзу в соотв ячейку
                    4321                             
1B00 7900           4322                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1B02 7A50           4323                                     mov             r2,#50h
1B04 7B00           4324                                     mov             r3,#00
1B06 120499         4325                                     call    copyPP
                    4326                                     ;внести изменения во внешн озу
1B09 120000   F     4327                                     call            findext                 ;r1-внешн озу
1B0C 78A0           4328                                     mov                     r0,#koefKD
1B0E 120000   F     4329                                             call            resar2
1B11 EA             4330                                             mov                     a,r2
1B12 F3             4331                                             movx            @r1,a
1B13 09             4332                                             inc                     r1
1B14 EB             4333                                             mov                     a,r3
1B15 F3             4334                                             movx            @r1,a
1B16 09             4335                                             inc                     r1
1B17 EC             4336                                             mov                     a,r4
1B18 F3             4337                                             movx            @r1,a
1B19 09             4338                                             inc                     r1
1B1A ED             4339                                             mov                     a,r5
1B1B F3             4340                                             movx            @r1,a
                    4341                                     ;кофф *100000 и переведенный в hex формат
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    69

                    4342                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4343     ;стереть страницу пап прогр 
1B1C 905000         4344                                     mov             dptr,#5000h
1B1F 7FFF           4345                                     mov             r7,#0ffh
1B21 12043E         4346                                     call    cle256
                    4347     ;и запись в ячейки кофф памяти прогр (3000h) 
1B24 7FFF           4348                                     mov             r7,#0ffh
1B26 7900           4349                                     mov             r1,#0                           ;external r
                             am
1B28 905000         4350                                     mov             dptr,#5000h
1B2B 120480         4351                                     call    wrpage
                    4352     
                    4353     
1B2E C212           4354                                             clr             bitklb
1B30 900000   F     4355                                             mov             dptr,#teEND
1B33 120000   F     4356                                             call    lotext
1B36 120000   F     4357                                             call    ind
1B39 120000   F     4358                                             call    z_1s
1B3C 120000   F     4359                                             call    z_1s
1B3F 020000   F     4360                                             jmp             goto7
                    4361     
                    4362     
                    4363     
                    4364     ;$include (d:\amp\subr4.asm) 
1B42            +1  4365     loadUS: ;если идет тест измерения ус восстановить для теста
1B42 201533     +1  4366                                     jb              biteizm,yestest
1B45 79AE       +1  4367                                             mov             r1,#diap
1B47 E7         +1  4368                             mov             a,@r1
1B48 23         +1  4369                             rl              a;*2
1B49 FC         +1  4370                             mov             r4,a                    ;save a
1B4A 900000   F +1  4371                             mov             dptr,#tabus
1B4D 93         +1  4372                             movc    a,@a+dptr
1B4E FA         +1  4373                             mov             r2,a                    ;high byte
1B4F E584       +1  4374                             mov             a,p4
1B51 5401       +1  4375                             anl             a,#01
1B53 4A         +1  4376                             orl             a,r2
1B54 F584       +1  4377                             mov             p4,a
1B56 0C         +1  4378                             inc             r4
1B57 EC         +1  4379                             mov             a,r4
1B58 93         +1  4380                             movc    a,@a+dptr
1B59 FB         +1  4381                             mov             r3,a                    ;low byte
1B5A E585       +1  4382                             mov             a,p5
1B5C 5401       +1  4383                             anl             a,#01
1B5E 4B         +1  4384                             orl             a,r3
1B5F F585       +1  4385                             mov             p5,a
1B61 799A       +1  4386                             mov             r1,#parT
1B63 B7010E     +1  4387                             cjne    @r1,#1,bret
1B66 79AE       +1  4388                             mov             r1,#diap                  ;10s (parT=1)
1B68 7405       +1  4389                             mov             a,#5                      ;10-8..10-11 p4.1=1
1B6A C3         +1  4390                             clr             c
1B6B 97         +1  4391                             subb    a,@r1
1B6C 5006       +1  4392                             jnc             bret
1B6E E584       +1  4393                             mov             a,p4
1B70 4402       +1  4394                             orl             a,#02
1B72 F584       +1  4395                             mov             p4,a                     ;10-8..10-11 p4.1=1
1B74 120000   F +1  4396     bret:      call          louizm         ;us если вкл кн ИЗМЕР
1B77 22         +1  4397                             ret
1B78            +1  4398     yestest:
1B78 120000   F +1  4399                             call            lotpus          ;ус теста измерения
1B7B 22         +1  4400                             ret
                +1  4401                             
                +1  4402     ;загр ус для кор 0
                +1  4403     ;dptr-
1B7C E4         +1  4404     lospus:         clr             a
                +1  4405                             ;movc   a,@a+dptr
                +1  4406                             ;mov            r2,a                    ;high byte
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    70

                +1  4407                             ;mov            a,p4
                +1  4408                             ;anl            a,#01
                +1  4409                             ;orl            a,r2
                +1  4410                             ;mov            p4,a
                +1  4411                             ;inc            dptr
1B7D E4         +1  4412                             clr             a
1B7E 93         +1  4413                             movc    a,@a+dptr
1B7F FB         +1  4414                             mov             r3,a                    ;low byte
1B80 E585       +1  4415                             mov             a,p5
1B82 54BF       +1  4416                             anl             a,#0bfh;01
1B84 4B         +1  4417                             orl             a,r3
1B85 F585       +1  4418                             mov             p5,a
1B87 22         +1  4419                             ret
                +1  4420     
1B88 80         +1  4421     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  4422     
                +1  4423     ;us кнопка измерения выкл
1B89 88D6       +1  4424     tabus:     db           88h,0d6h         ;10-2
1B8B 88F6       +1  4425                             db      88h,0f6h         ;10-3
1B8D 88D6       +1  4426                             db              88h,0d6h         ;10-4
1B8F 88F6       +1  4427                             db              88h,0f6h         ;10-5
1B91 9AD6       +1  4428                             db      9ah,0d6h         ;10-6
1B93 9AF6       +1  4429                             db              9ah,0f6h         ;10-7
1B95 ACD6       +1  4430                             db              0ach,0d6h        ;10-8
1B97 ACF6       +1  4431                             db      0ach,0f6h        ;10-9
1B99 C8D6       +1  4432                             db              0c8h,0d6h        ;10-10
1B9B C8F6       +1  4433                             db              0c8h,0f6h        ;10-11
                +1  4434     
1B9D            +1  4435     tabt11: 
1B9D 66E6       +1  4436                             db              66h,0e6h;10-11
1B9F            +1  4437     tabt9:  
1B9F 32E6       +1  4438                             db              32h,0e6h;10-9
1BA1            +1  4439     tabt7:  
1BA1 18EE       +1  4440                             db              18h,0eeh;10-7
                +1  4441     
                +1  4442      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  4443     ;в зав от parT (Tизм)
1BA3 79B7       +1  4444     loadT:          mov             r1,#load;parT
1BA5 7840       +1  4445     lolevT:         mov             r0,#bufind+0
1BA7 7B0A       +1  4446                             mov             r3,#10
1BA9 75F00A     +1  4447                             mov             b,#10
1BAC E7         +1  4448                             mov             a,@r1
1BAD A4         +1  4449                             mul             ab
1BAE FC         +1  4450                             mov             r4,a                    ;save a
1BAF 900000   F +1  4451                             mov             dptr,#textT
1BB2 93         +1  4452             lod1:   movc    a,@a+dptr
1BB3 F6         +1  4453                             mov             @r0,a
1BB4 08         +1  4454                             inc             r0
1BB5 0C         +1  4455                             inc             r4
1BB6 EC         +1  4456                             mov             a,r4
1BB7 DBF9       +1  4457                             djnz    r3,lod1
1BB9 22         +1  4458                             ret     
                +1  4459     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  4460     ;dptr-адр строки текста         
1BBA            +1  4461     lotext:         
1BBA 7B0A       +1  4462                             mov             r3,#10
1BBC 7840       +1  4463                             mov             r0,#bufind+0
1BBE E4         +1  4464     lodt:           clr             a
1BBF 93         +1  4465                             movc    a,@a+dptr
1BC0 F6         +1  4466                             mov             @r0,a
1BC1 08         +1  4467                             inc             r0
1BC2 A3         +1  4468                             inc             dptr
1BC3 DBF9       +1  4469                             djnz    r3,lodt
1BC5 22         +1  4470                             ret                                     
                +1  4471     
                +1  4472     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    71

                +1  4473     
                +1  4474     
                +1  4475      ;задержка 100 мкс
1BC6 7978       +1  4476     z_100:    mov R1,#78h     ;загрузка первого числа
1BC8 7A02       +1  4477     z100:     mov R2,#2h     ;загрузка второго числа
1BCA DAFE       +1  4478     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
1BCC D9FA       +1  4479               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
1BCE 22         +1  4480               ret           
                +1  4481     
                +1  4482     ;задержка 34 мкс
1BCF 7B8B       +1  4483     z_5:      mov R3,#8Bh      ;загрузка числа
1BD1 DBFE       +1  4484     ct:       djnz R3,ct
1BD3 22         +1  4485               ret
                +1  4486     
                +1  4487     ;задержка 15 мс
1BD4 79FA       +1  4488     z_15:     mov R1,#0FAh    ;загрузка первого числа
1BD6 7AED       +1  4489     z15:      mov R2,#0EDh   ;загрузка второго числа
1BD8 DAFE       +1  4490     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
1BDA D9FA       +1  4491               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
1BDC 22         +1  4492               ret   
                +1  4493                                               
                +1  4494      ;задержка 1 мс
1BDD 7910       +1  4495     z_1ms:     mov R1,#10h     
1BDF 7AED       +1  4496     ss1:       mov R2,#0EDh    
1BE1 DAFE       +1  4497                djnz R2, $    
1BE3 D9FA       +1  4498                djnz R1, ss1   
1BE5 22         +1  4499                ret   
                +1  4500     
                +1  4501      ;????????
                +1  4502     ;задержка 1с
1BE6 7D1F       +1  4503     z_1s:   mov             r5,#01fh 
1BE8 7EFF       +1  4504     co2s:   mov     R6,#0ffh     
1BEA 7FFF       +1  4505     z1s:     mov    R7,#0ffh     
1BEC DFFE       +1  4506     co1s:   djnz    R7, co1s        
1BEE DEFA       +1  4507             djnz    R6, z1s 
1BF0 DDF6       +1  4508                     djnz    r5,co2s
1BF2 22         +1  4509               ret
                +1  4510     ;задержка 0,1с
1BF3 7D03       +1  4511     z_01s:           mov            r5,#03h 
1BF5 7EFF       +1  4512     co02s:          mov     R6,#0ffh     
1BF7 7FFF       +1  4513     z01s:           mov     R7,#0ffh     
1BF9 DFFE       +1  4514                             djnz    R7, $   
1BFB DEFA       +1  4515                     djnz    R6, z01s 
1BFD DDF6       +1  4516                             djnz    r5,co02s
1BFF 22         +1  4517                      ret
                +1  4518                                               
                +1  4519     ;задержка 0,5с
1C00 7D0D       +1  4520     z_05s:           mov            r5,#0dh 
1C02 7EFF       +1  4521     co05s:                  mov     R6,#0ffh     
1C04 7FFF       +1  4522     z05s:           mov     R7,#0ffh     
1C06 DFFE       +1  4523                                     djnz    R7, $   
1C08 DEFA       +1  4524                     djnz    R6, z05s 
1C0A DDF6       +1  4525                                             djnz    r5,co05s
1C0C 22         +1  4526                      ret                                                     
                +1  4527                                                               
1C0D 000007FF   +1  4528     chzap:  db      00,00,07h,0ffh             
1C11 00000000   +1  4529     ch0:    db      00,00,00,00
1C15 0000000A   +1  4530     ch10:   db      00,00,00,0ah                            ;10
1C19 00000005   +1  4531     ch5:    db      00,00,00,05                                             ;5
1C1D 00000004   +1  4532     ch4:    db      00,00,00,04                                             ;4
1C21 000003B9   +1  4533     ch954:  db 00,00,03,0b9h                                                ;954
1C25 000003E8   +1  4534     ch10000:        db 00,00,03h,0e8h                                               ;10000
1C29 00000064   +1  4535     ch100:  db 00,00,00,64h ;100
1C2D 00000002   +1  4536     ch2:    db      00,00,00,02                                             
                +1  4537     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  4538     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    72

                +1  4539     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
1C31 00000001   +1  4540     ch1:    db  00,00,00,01
1C35 49742400   +1  4541     ch_mln: db      49h,74h,24h,00;10*6
1C39 3F800000   +1  4542     ch_1:   db      3fh,80h,00,00   
1C3D 40000000   +1  4543     ch_2:   db      40h,00,00,00;2
1C41 40800000   +1  4544     ch_4:   db      40h,80h,00,00;4         
1C45 3F741EDF   +1  4545     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
1C49 47C35000   +1  4546     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
1C4D 3F800347   +1  4547     KD:             db      3fh,80h,03h,47h;1,0001
1C51 48435000   +1  4548     CH2tho: db      48h,43h,50h,00;200000
1C55 4856D800   +1  4549     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
1C59 4856D800   +1  4550     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
1C5D 461C4000   +1  4551     ch_10th:db  46h,1ch,40h,00;10000-2710h
1C61 41200000   +1  4552     ch_10:  db      41h,20h,00,00;10d
1C65 48742400   +1  4553     ch_250: db      48h,74h,24h,00;250000
1C69 000186A0   +1  4554     chk:            db      00,01,86h,0a0h;
1C6D 00000320   +1  4555     ch320h: db      00,00,03h,20h;320h=800d
1C71 00000150   +1  4556     ch150h: db      00,00,01h,50h;150h
                +1  4557     ;r1- мл байт 2х байтного числа
1C75            +1  4558     tenmin:         ;-10
1C75 C3         +1  4559                             clr             c
1C76 E7         +1  4560                     mov             a,@r1
1C77 9405       +1  4561                             subb    a,#5;10
1C79 F7         +1  4562                             mov             @r1,a
1C7A 19         +1  4563                             dec             r1
1C7B E7         +1  4564                             mov             a,@r1
1C7C 9400       +1  4565                             subb    a,#0
1C7E F7         +1  4566                             mov             @r1,a
1C7F 22         +1  4567                             ret
                +1  4568       ;r0-обнуление ячеек памяти  
1C80 7F04       +1  4569       clear4:        mov    r7,#4
1C82 E4         +1  4570                             clr             a
1C83 F6         +1  4571       cl4:          mov             @r0,a
1C84 08         +1  4572                             inc             r0
1C85 DFFC       +1  4573                             djnz    r7,cl4
1C87 22         +1  4574                             ret     
                +1  4575     
                +1  4576      ;r0-обнуление ячеек памяти 
                +1  4577      ;R7- 
1C88            +1  4578       clearN:        
1C88 E4         +1  4579                             clr             a
1C89 F6         +1  4580       cl4N:         mov             @r0,a
1C8A 08         +1  4581                             inc             r0
1C8B DFFC       +1  4582                             djnz    r7,cl4N
1C8D 22         +1  4583                             ret     
                +1  4584     
                +1  4585       ;чтение номера байта с индикатора(2байта)
                +1  4586     ;bufind+8..bufind+9
                +1  4587     ;-  - - -
                +1  4588     ;- - - - - - - - - -
                +1  4589     ;adec..adec+9
                +1  4590     ;ст            мл
1C8E 7848       +1  4591     upak2:  mov             r0,#bufind+8;
1C90 795C       +1  4592                     mov             r1,#adec+9
1C92 7F02       +1  4593                     mov             r7,#2;2bait
1C94 C3         +1  4594     upa2:   clr             c
1C95 E6         +1  4595                     mov             a,@r0
1C96 9430       +1  4596                     subb    a,#30h
1C98 F7         +1  4597                     mov             @r1,a
1C99 18         +1  4598                     dec             r0
1C9A 19         +1  4599                     dec             r1
1C9B DFF7       +1  4600                     djnz    r7,upa2
1C9D 22         +1  4601                     ret  
                +1  4602     
                +1  4603     
                +1  4604         
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    73

                +1  4605      ;bufind+4..bufind+9
                +1  4606     ;-  - - -
                +1  4607     ;- - - - - - - - - -
                +1  4608     ;adec..adec+9
                +1  4609     ;ст            мл
1C9E 7849       +1  4610     upak:   mov             r0,#bufind+9;
1CA0 795C       +1  4611                     mov             r1,#adec+9
1CA2 7F06       +1  4612                     mov             r7,#6
1CA4 C3         +1  4613     upa:    clr             c
1CA5 E6         +1  4614                     mov             a,@r0
1CA6 9430       +1  4615                     subb    a,#30h
1CA8 F7         +1  4616                     mov             @r1,a
1CA9 18         +1  4617                     dec             r0
1CAA 19         +1  4618                     dec             r1
1CAB DFF7       +1  4619                     djnz    r7,upa
1CAD 22         +1  4620                     ret
                +1  4621     
                +1  4622      ;чтение номера байта с индикатора(3байта)
                +1  4623     ;bufind+3..bufind+9
                +1  4624     ;-  - - -
                +1  4625     ;- - - - - - - - - -
                +1  4626     ;adec..adec+9
                +1  4627     ;ст            мл
1CAE 7849       +1  4628     upak3:  mov             r0,#bufind+9;
1CB0 795C       +1  4629                     mov             r1,#adec+9
1CB2 7F03       +1  4630                     mov             r7,#3;3bait
1CB4 C3         +1  4631     upa1:   clr             c
1CB5 E6         +1  4632                     mov             a,@r0
1CB6 9430       +1  4633                     subb    a,#30h
1CB8 F7         +1  4634                     mov             @r1,a
1CB9 18         +1  4635                     dec             r0
1CBA 19         +1  4636                     dec             r1
1CBB DFF7       +1  4637                     djnz    r7,upa1
1CBD 22         +1  4638                     ret
                +1  4639     
                +1  4640     ;вых-r2,r3-адрес ячее памяти прогр
1CBE            +1  4641     findkoef:
1CBE 79AE       +1  4642                                     mov             r1,#diap
1CC0 E7         +1  4643                                     mov             a,@r1
1CC1 23         +1  4644                                     rl              a                                          
                                          ;diap*2(2bait )
1CC2 FC         +1  4645                                     mov             r4,a                                    ;sa
                             ve
1CC3 900000   F +1  4646                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  4647                                     
1CC6 93         +1  4648                                     movc    a,@a+dptr                       ;ст байт
1CC7 FA         +1  4649                                     mov             r2,a
1CC8 A3         +1  4650                                     inc             dptr
1CC9 EC         +1  4651                                     mov             a,r4
1CCA 93         +1  4652                                     movc    a,@a+dptr
1CCB FB         +1  4653                                     mov             r3,a                    ;мл байт
1CCC 22         +1  4654                                     ret
                +1  4655     ;r2..r5 в опр яч внешн озу
1CCD            +1  4656     findext:
1CCD 79AE       +1  4657                                     mov             r1,#diap
1CCF E7         +1  4658                                     mov             a,@r1
1CD0 23         +1  4659                                     rl              a                                          
                                          ;diap*2(2bait )
1CD1 23         +1  4660                                     rl              a                                          
                                          ;diap*2(2bait )
1CD2 F9         +1  4661                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  4662                                     
1CD3 22         +1  4663                                     ret
                +1  4664     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    74

                +1  4665     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  4666     ;(5000h..5027h)
1CD4 5000       +1  4667     diKDw:  dw              5000h                   ;10-2
1CD6 5004       +1  4668                                     dw              5004h                   ;10-3
1CD8 5008       +1  4669                                     dw              5008h                   ;10-4
1CDA 500C       +1  4670                                     dw              500ch                   ;10-5
1CDC 5010       +1  4671                                     dw              5010h                   ;10-6
1CDE 5014       +1  4672                                     dw              5014h                   ;10-7
1CE0 5018       +1  4673                                     dw              5018h                   ;10-8
1CE2 501C       +1  4674                                     dw              501ch                   ;10-9
1CE4 5020       +1  4675                                     dw              5020h                   ;10-10
1CE6 5024       +1  4676                                     dw              5024h                   ;10-11
1CE8 5028       +1  4677     dipar:  dw              5028h                   ;parol
                +1  4678     
1CEA 000186A0   +1  4679     chthou: db      00,01,86h,0a0h  ;100.000
                +1  4680     
1CEE AA08       +1  4681     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
1CF0 AB09       +1  4682                                             mov     r3,ltemp+1
1CF2 AC0A       +1  4683                                             mov     r4,ltemp+2
1CF4 AD0B       +1  4684                                             mov     r5,ltemp+3
1CF6 22         +1  4685                                             ret
                +1  4686     ;bufind+4..bufind+9
                +1  4687     ;-  - - -
                +1  4688     ;- - - - - - - - - -
                +1  4689     ;adec..adec+9
                +1  4690     ;ст            мл
1CF7 7847       +1  4691     upakA:  mov             r0,#bufind+7;
1CF9 795C       +1  4692                     mov             r1,#adec+9
1CFB 7F04       +1  4693                     mov             r7,#4
1CFD C3         +1  4694     upaa4:  clr             c
1CFE E6         +1  4695                     mov             a,@r0
1CFF 9430       +1  4696                     subb    a,#30h
1D01 F7         +1  4697                     mov             @r1,a
1D02 18         +1  4698                     dec             r0
1D03 19         +1  4699                     dec             r1
1D04 DFF7       +1  4700                     djnz    r7,upaa4
1D06 22         +1  4701                     ret
                +1  4702     
                +1  4703     ;bufind+4..bufind+9
                +1  4704     ;-  - - -
                +1  4705     ;- - - - - - - - - -
                +1  4706     ;adec..adec+9
                +1  4707     ;ст            мл
1D07 7848       +1  4708     upakB:  mov             r0,#bufind+8;
1D09 795C       +1  4709                     mov             r1,#adec+9
1D0B 7F05       +1  4710                     mov             r7,#5
1D0D C3         +1  4711     upab:   clr             c
1D0E E6         +1  4712                     mov             a,@r0
1D0F 9430       +1  4713                     subb    a,#30h
1D11 F7         +1  4714                     mov             @r1,a
1D12 18         +1  4715                     dec             r0
1D13 19         +1  4716                     dec             r1
1D14 DFF7       +1  4717                     djnz    r7,upab
1D16 C21B       +1  4718                     clr                     bitznB
1D18 E543       +1  4719                     mov             a,bufind+3
1D1A B42D02     +1  4720                     cjne            a,#2dh,abret
1D1D D21B       +1  4721                     setb            bitznB
1D1F            +1  4722     abret:
1D1F 22         +1  4723                     ret
1D20            +1  4724     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
1D20 4E6E6AA8   +1  4725                                             db      4eh,6eh,6ah,0a8h;10**9
1D24 43FA0000   +1  4726     CH_500:         db              43h,0fah,00,00;1fah=500
1D28 4856D800   +1  4727     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
1D2C 49742400   +1  4728     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  4729     
                +1  4730     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    75

                +1  4731     
                +1  4732     ;управление AD7731
                +1  4733     ;r4=b1 r5=b2
1D30            +1  4734     iniacp: ;управление AD7731
1D30 7403       +1  4735                             mov             a,#03
                +1  4736     
1D32 120000   F +1  4737                             call    write
1D35 EC         +1  4738                             mov             a,r4;#80h
1D36 120000   F +1  4739                             call    write
1D39 ED         +1  4740                             mov             a,r5;#04
1D3A 120000   F +1  4741                             call    write
1D3D 7402       +1  4742                             mov             a,#02
1D3F 120000   F +1  4743                             call    write
1D42 74A1       +1  4744                             mov             a,#0a1h
1D44 120000   F +1  4745                             call    write
1D47 7474       +1  4746                             mov             a,#74h
1D49 120000   F +1  4747                             call    write
1D4C 2095FD     +1  4748                             jb              p1.5,$;p1.3,$
1D4F 7402       +1  4749                             mov             a,#02
1D51 120000   F +1  4750                             call    write
1D54 7481       +1  4751                             mov             a,#81h
1D56 120000   F +1  4752                             call    write
1D59 7474       +1  4753                             mov             a,#74h
1D5B 120000   F +1  4754                             call    write
1D5E 2095FD     +1  4755                             jb              p1.5,$;p1.3,$
1D61 7402       +1  4756                             mov             a,#02
1D63 120000   F +1  4757                             call    write
1D66 7421       +1  4758                             mov             a,#21h
1D68 120000   F +1  4759                             call    write
1D6B 7474       +1  4760                             mov             a,#74h
1D6D 120000   F +1  4761                             call    write
1D70 22         +1  4762                             ret
                +1  4763                             ;;;;;;;;;;;;;;;;
                +1  4764     ;;;;;;;;;;;;;;;;;
                +1  4765     ;;;;;;;;;;;;;;;;;
1D71 0000       +1  4766     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
1D73 6000       +1  4767                                     db              60h,00h;40h,04h         ;10s
1D75 6000       +1  4768                                     db              60h,00;40h,04h          ;1s
1D77 6000       +1  4769                                     db              60h,00h;40h,04h         ;0,1s
1D79 6000       +1  4770                                     db              60h,00h;20h,04h         ;50ms
1D7B 6000       +1  4771                                     db              60h,00h;20h,04h          ;10ms
1D7D 1332       +1  4772                                     db              13h,32h         ;2ms
                +1  4773     
                +1  4774     ;загр В1,В2 в завис от Т                                
1D7F 799A       +1  4775     loab12:                 mov             r1,#parT
1D81 900000   F +1  4776                                     mov             dptr,#tabB1_2
1D84 E7         +1  4777                                     mov             a,@r1
1D85 23         +1  4778                                     rl              a;*2
1D86 FF         +1  4779                                     mov             r7,a                    ;save a
1D87 93         +1  4780                                     movc    a,@a+dptr
1D88 FC         +1  4781                                     mov             r4,a   ;b1
1D89 0F         +1  4782                                     inc             r7
1D8A EF         +1  4783                                     mov             a,r7
1D8B 93         +1  4784                                     movc    a,@a+dptr
1D8C FD         +1  4785                                     mov             r5,a
                +1  4786                                     ;после загр В1,2 загр упр слово для нового Т
                +1  4787                             
1D8D 22         +1  4788                                     ret
                +1  4789     
                +1  4790     
1D8E 7852       +1  4791     loadr2: mov             r0,#abin+3              ;r2..r5
1D90 E6         +1  4792                     mov             a,@r0                   ; ст мл   
1D91 FA         +1  4793                     mov             r2,a
1D92 18         +1  4794                     dec             r0
1D93 E6         +1  4795                     mov             a,@r0
1D94 FB         +1  4796                     mov             r3,a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    76

1D95 18         +1  4797                     dec             r0
1D96 E6         +1  4798                     mov             a,@r0
1D97 FC         +1  4799                     mov             r4,a
1D98 18         +1  4800                     dec             r0
1D99 E6         +1  4801                     mov             a,@r0
1D9A FD         +1  4802                     mov             r5,a
1D9B 22         +1  4803                     ret
                +1  4804                                             
                +1  4805      ;;;;;;;;;;;;;;;;;;;      
                +1  4806      ;загрузка KD в зависимости от диап изм  
                +1  4807      ;koef->r8..r11
1D9C 78AE       +1  4808     loadKD:                 mov             r0,#diap
1D9E E6         +1  4809                                     mov             a,@r0
1D9F 900000   F +1  4810                                     mov             dptr,#diKDn
1DA2 75F004     +1  4811                                     mov             b,#4
1DA5 A4         +1  4812                                     mul             ab
1DA6 FF         +1  4813                                     mov             r7,a;save
1DA7 93         +1  4814                                     movc    a,@a+dptr
1DA8 F508       +1  4815                                     mov             r8,a
1DAA A3         +1  4816                                     inc             dptr
1DAB EF         +1  4817                                     mov             a,r7
1DAC 93         +1  4818                                     movc    a,@a+dptr
1DAD F509       +1  4819                                     mov             r9,a
1DAF A3         +1  4820                                     inc             dptr
1DB0 EF         +1  4821                                     mov             a,r7
1DB1 93         +1  4822                                     movc    a,@a+dptr
1DB2 F50A       +1  4823                                     mov             r10,a
1DB4 A3         +1  4824                                     inc             dptr
1DB5 EF         +1  4825                                     mov             a,r7
1DB6 93         +1  4826                                     movc    a,@a+dptr
1DB7 F50B       +1  4827                                     mov             r11,a
1DB9 22         +1  4828                                     ret
                +1  4829     
1DBA 3F506B7B   +1  4830      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
1DBE 3F507FCC   +1  4831                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
1DC2 3F4F9D0B   +1  4832                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
1DC6 3F4FE869   +1  4833                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
1DCA 3F50294A   +1  4834                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
1DCE 3F50639E   +1  4835                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
1DD2 3F4BC9F0   +1  4836                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
1DD6 3F4C063B   +1  4837                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
1DDA 3F50EFDD   +1  4838                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
1DDE 3F512AD9   +1  4839                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  4840     
1DE2 00000039   +1  4841     ch57:   db      00,00,00,39h;57
1DE6 00000014   +1  4842     ch20:   db      00,00,00,14h;20
                +1  4843     
                +1  4844     ;загр ус для тестов ацп 
                +1  4845     ;dptr-
1DEA 78B1       +1  4846     lotpus: mov             r0,#vichR
1DEC B6210D     +1  4847                                     cjne    @r0,#21h,te22
1DEF 900000   F +1  4848                                     mov                     dptr,#tabt11;заслать ус 11А
1DF2 E4         +1  4849     lotp:           clr             a
1DF3 93         +1  4850                             movc    a,@a+dptr                               ;high byte
1DF4 F584       +1  4851                             mov             p4,a
1DF6 A3         +1  4852                             inc             dptr
1DF7 E4         +1  4853                             clr             a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    77

1DF8 93         +1  4854                             movc    a,@a+dptr                               ;low byte
1DF9 F585       +1  4855                             mov             p5,a
1DFB 22         +1  4856                             ret
1DFC B62205     +1  4857     te22:                   cjne    @r0,#22h,te23
1DFF 900000   F +1  4858                             mov                     dptr,#tabt9;заслать ус 9А       
1E02 80EE       +1  4859                             jmp                     lotp
                +1  4860     
1E04 900000   F +1  4861     te23:   mov                     dptr,#tabt7;заслать ус 7А       
1E07 80E9       +1  4862                             jmp                     lotp
                +1  4863     
                +1  4864     
                +1  4865     
                +1  4866     
                +1  4867     
1E09 02030405   +1  4868     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
1E0D 06070809                
1E11 0A0B                    
                +1  4869     
1E13 78AE       +1  4870     findR:                  mov                     r0,#diap
1E15 E6         +1  4871                                                     mov                     a,@r0
1E16 900000   F +1  4872                                                     mov                     dptr,#Tabn
1E19 93         +1  4873                                                     movc            a,@a+dptr
1E1A 22         +1  4874                                                     ret
                +1  4875     
                +1  4876     ;bufind=30h..39h                                                                           
                                           ;
1E1B C219       +1  4877     vvchif:                 clr             bitmig
1E1D 79B2       +1  4878                                     mov             r1,#marker
1E1F E7         +1  4879                                     mov             a,@r1                   ;изм цифры
1E20 7840       +1  4880                                     mov             r0,#bufind                      ;0000
1E22 28         +1  4881                                     add             a,r0
1E23 F8         +1  4882                                     mov             r0,a
1E24 06         +1  4883                                     inc             @r0
1E25 B63A02     +1  4884                                     cjne    @r0,#3ah,chif
1E28 7630       +1  4885                                     mov             @r0,#30h
1E2A            +1  4886     chif:   
1E2A 22         +1  4887                             ret
1E2B            +1  4888     vvchibl:        ;mov                    r0,#level
                +1  4889                                             ;cjne           @r0,#32h,vvchibl4;при наборе цифр в
                              блоке
1E2B 80EE       +1  4890                                             jmp                     vvchif  ;при наборе цифр в 
                             интервале                                    
1E2D            +1  4891     vvchibl4:
1E2D C219       +1  4892                             clr             bitmig
1E2F 79B2       +1  4893                                     mov             r1,#marker
1E31 E7         +1  4894                                     mov             a,@r1                   ;изм цифры
1E32 7840       +1  4895                                     mov             r0,#bufind                      ;1..4
1E34 28         +1  4896                                     add             a,r0
1E35 F8         +1  4897                                     mov             r0,a
1E36 06         +1  4898                                     inc             @r0
1E37 B63504     +1  4899                                     cjne    @r0,#35h,chifb
1E3A 7631       +1  4900                                     mov             @r0,#31h
1E3C 8005       +1  4901                                     jmp             chifb1
1E3E B63002     +1  4902     chifb:  cjne    @r0,#30h,chifb1
1E41 7631       +1  4903                                     mov             @r0,#31h
1E43            +1  4904     chifb1:
1E43 22         +1  4905             ret
                +1  4906       ;перевод маркера влево
1E44            +1  4907     marle:  
1E44 C219       +1  4908                     clr             bitmig
                +1  4909                     ;mov            savba,#0   нельзя обнулять
1E46 78B2       +1  4910             mov             r0,#marker
1E48 16         +1  4911                     dec             @r0
1E49 E6         +1  4912                     mov             a,@r0
1E4A C3         +1  4913                     clr             c
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    78

1E4B 953A       +1  4914                     subb    a,movleft         ;крайне левое положение
1E4D 5001       +1  4915                     jnc             rler
1E4F 06         +1  4916                     inc             @r0
1E50 22         +1  4917     rler:   ret
                +1  4918         
                +1  4919     ;перевод маркера вправо
1E51 C219       +1  4920     marri:  clr             bitmig
1E53 78B2       +1  4921                     mov             r0,#marker
1E55 06         +1  4922                     inc         @r0
1E56 E53B       +1  4923                     mov             a,movrig           ;крайне правое положение
1E58 C3         +1  4924                     clr             c
1E59 96         +1  4925                     subb    a,@r0
1E5A 5001       +1  4926                     jnc             rrir
1E5C 16         +1  4927                     dec             @r0
1E5D 22         +1  4928     rrir:   ret
                +1  4929         
                +1  4930     ;konstA->bufind+4..bufind+7
1E5E 78BC       +1  4931     outA:           mov                     r0,#konstA
1E60 120000   F +1  4932                                     call            resar2
1E63 120343     +1  4933                                     call            ftol                    ;->hex
1E66 784F       +1  4934                                     mov             r0,#abin
1E68 120000   F +1  4935                                     call            saver2
1E6B 7853       +1  4936                                     mov                     r0,#adec
1E6D 7952       +1  4937                                     mov             r1,#abin+3
1E6F 120000   F +1  4938                                     call            bindec
1E72 785C       +1  4939                                     mov                     r0,#adec+9
1E74 7947       +1  4940                                     mov                     r1,#bufind+7
1E76 7F04       +1  4941                                     mov                     r7,#4
1E78 E6         +1  4942     outa2:  mov             a,@r0
1E79 2430       +1  4943                               add           a,#30h
1E7B F7         +1  4944                                     mov             @r1,a
1E7C 19         +1  4945                                     dec             r1
1E7D 18         +1  4946                                     dec             r0
1E7E DFF8       +1  4947                                     djnz    r7,outa2
1E80 22         +1  4948                                     ret
                +1  4949                                             
                +1  4950     ;konstB->bufind+4..bufind+8
1E81 78C0       +1  4951     outB:           mov                     r0,#konstB
1E83 120000   F +1  4952                                     call            resar2
1E86 EA         +1  4953                                     mov                     a,r2
1E87 5480       +1  4954                                     anl                     a,#80h
1E89 6007       +1  4955                                     jz                      outb3
1E8B EA         +1  4956     mov                     a,r2
1E8C 547F       +1  4957                                     anl                     a,#7fh
1E8E FA         +1  4958                                     mov                     r2,a
1E8F 75432D     +1  4959                                     mov                     bufind+3,#2dh
1E92 120343     +1  4960     outb3:  call            ftol                    ;->hex
1E95 784F       +1  4961                                     mov             r0,#abin
1E97 120000   F +1  4962                                     call            saver2
1E9A 7853       +1  4963                                     mov                     r0,#adec
1E9C 7952       +1  4964                                     mov             r1,#abin+3
1E9E 120000   F +1  4965                                     call            bindec
1EA1 785C       +1  4966                                     mov                     r0,#adec+9
1EA3 7948       +1  4967                                     mov                     r1,#bufind+8
1EA5 7F05       +1  4968                                     mov                     r7,#5
1EA7 E6         +1  4969     outb2:  mov             a,@r0
1EA8 2430       +1  4970                               add           a,#30h
1EAA F7         +1  4971                                     mov             @r1,a
1EAB 19         +1  4972                                     dec             r1
1EAC 18         +1  4973                                     dec             r0
1EAD DFF8       +1  4974                                     djnz    r7,outb2
1EAF 22         +1  4975                                     ret
                +1  4976     
                +1  4977     
                +1  4978     ;пп мигания индикации
1EB0 78B2       +1  4979     mign:           mov             r0,#marker
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    79

                +1  4980                                     
1EB2 B6FF03     +1  4981                                     cjne    @r0,#0ffh,mignn
                +1  4982                                     ;реж изм мигает *
1EB5 C219       +1  4983                                     clr             bitmig
1EB7 22         +1  4984                                     ret
                +1  4985     
1EB8            +1  4986     mignn:                  ;clr            c
1EB8 7440       +1  4987                                     mov             a,#bufind
1EBA 26         +1  4988                                     add             a,@r0                   ;a=bufind+marker
1EBB F9         +1  4989                                     mov             r1,a
1EBC 201907     +1  4990                                     jb              bitmig,onmig
1EBF 873C       +1  4991                                     mov             savba,@r1
                +1  4992                             ;       mov             a,@r1
                +1  4993                             ;       mov             savba,a
1EC1 7720       +1  4994                                     mov             @r1,#" "
                +1  4995                                     
1EC3 D219       +1  4996                                     setb    bitmig
1EC5 22         +1  4997                                     ret
                +1  4998     
1EC6 A73C       +1  4999     onmig:                  mov             @r1,savba
                +1  5000                                     ;mov            a,savba
                +1  5001                                     ; mov           @r1,a
1EC8 C219       +1  5002                                     clr             bitmig
1ECA 120000   F +1  5003                                     call    z_01s
1ECD 22         +1  5004                                     ret
                +1  5005     ;номер ошибки bufind+6
1ECE 900000   F +1  5006     error:          mov             dptr,#teERR
1ED1 120000   F +1  5007                                             call    lotext
1ED4 853946     +1  5008                                             mov             bufind+6,nuerr
1ED7 22         +1  5009                                     ret
                +1  5010     
                +1  5011     
1ED8            +1  5012     textT:          
1ED8 FD543D32   +1  5013                             db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
1EDC 6D67FDFD                
1EE0 FDFD                    
1EE2 FD543D31   +1  5014                             db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
1EE6 306D67FD                
1EEA FDFD                    
1EEC FD543D35   +1  5015                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
1EF0 306D67FD                
1EF4 FDFD                    
1EF6 FD543D64   +1  5016                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
1EFA 3167FDFD                
1EFE FDFD                    
1F00 20202054   +1  5017                             db              " "," "," ","T","=",31h,67h," "," "," "
1F04 3D316720                
1F08 2020                    
1F0A 2020543D   +1  5018                             db              " "," ","T","=",31h,30h,67h," "," "," "  
1F0E 31306720                
1F12 2020                    
                +1  5019     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5020     
1F14 42753474   +1  5021     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
1F18 79767454                
1F1C 7720                    
1F1E 20413D20   +1  5022     teAequ0:        db              " ",'A','='," "," "," "," "," "," ",65h
1F22 20202020                
1F26 2065                    
1F28 20423D2B   +1  5023     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
1F2C 20202020                
1F30 2020                    
1F32 20207145   +1  5024     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
1F36 48722020                
1F3A 2020                    
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    80

                +1  5025     
1F3C 20544579   +1  5026     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
1F40 542D7433                
1F44 7120                    
1F46 54457954   +1  5027     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
1F4A 20523520                
1F4E 2020                    
1F50 20794B30   +1  5028     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
1F54 50205235                
1F58 2020                    
1F5A 20204142   +1  5029     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
1F5E 4B202020                
1F62 2020                    
1F64 204B4176   +1  5030     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
1F68 74735020                
1F6C 202020                  
                +1  5031     
1F6F 20544579   +1  5032     teTE11:         db              " ",'T',"E",79h,'T'," ",2dh,31h,31h,'A';          21
1F73 54202D31                
1F77 3141                    
1F79 20544579   +1  5033     teTE9:          db              " ",'T',"E",79h,'T'," ",2dh,30h,39h,'A';                   
                                                  22
1F7D 54202D30                
1F81 3941                    
1F83 20544579   +1  5034     teTE7:          db              " ",'T',"E",79h,'T'," ",2dh,30h,37h,'A';                   
                                                  23
1F87 54202D30                
1F8B 3741                    
                +1  5035     
                +1  5036     
1F8D 20203537   +1  5037     teS57_6:                db              " "," ",35h,37h,36h," "," "," "," "," ";57.6
1F91 36202020                
1F95 2020                    
1F97 20203139   +1  5038     teS19_2:                db              " "," ",31h,39h,32h," "," "," "," "," ";19,2
1F9B 32202020                
1F9F 2020                    
                +1  5039     
1FA1 61415030   +1  5040     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
1FA5 76772030                
1FA9 3030                    
1FAB 20303030   +1  5041     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
1FAF 30302020                
1FB3 2041                    
1FB5 74337120   +1  5042     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
1FB9 4B304879                
1FBD 5420                    
1FBF 20204275   +1  5043     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
1FC3 58307820                
1FC7 2020                    
1FC9 2020304C   +1  5044     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
1FCD 4C202020                
1FD1 2020                    
1FD3 20203034   +1  5045     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
1FD7 7479544B                
1FDB 4120                    
1FDD 20203041   +1  5046     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
1FE1 71795420                
1FE5 20203341   +1  5047     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
1FE9 61747977                
1FED 2020                    
1FEF 20206150   +1  5048     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
1FF3 30797130                
1FF7 545020                  
1FFA 20206130   +1  5049     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
1FFE 76484162                
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    81

2002 2020                    
2004 20744854   +1  5050     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
2008 20303030                
200C 3067                    
200E 20207376   +1  5051     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2012 304B2020                
2016 2020                    
2018 20207376   +1  5052     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
201C 304B2030                
2020 2020                    
2022 30547934   +1  5053     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,30h;ОТСЧЕТ 000
2026 45542030                
202A 3030                    
202C 79544154   +1  5054     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2030 74795474                
2034 4B41                    
2036 71744820   +1  5055     teMIN:  db      71h,74h,"H"," "," ",30h,30h,30h,30h,30h;МИН  00000
203A 20303030                
203E 3030                    
2040 71414B79   +1  5056     teMAX:  db      71h,'A','K',79h," ",30h,30h,30h,30h,30h;МАКС 00000
2044 20303030                
2048 3030                    
204A 79504578   +1  5057     teMID:  db      79h,"P","E",78h," ",30h,30h,30h,30h,30h;СРЕД 00000
204E 20303030                
2052 3030                    
                +1  5058      ;;;;;;;;;;;;;;;;;;;         
2054 2020304C   +1  5059     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
2058 4C204920                
205C 2020                    
205E 2020304C   +1  5060     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
2062 4C206620                
2066 2020                    
2068 20204552   +1  5061     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
206C 52202020                
2070 2020                    
2072 2020454E   +1  5062     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
2076 44202020                
207A 2020                    
                +1  5063     
                +1  5064     ;dptr+4-приемник
                +1  5065     ;dptr-источник
                +1  5066     ;r7-кол байт  
207C            +1  5067     xCIKLWR:
207C 7F04       +1  5068                             mov             r7,#4   
207E E0         +1  5069     lwrx:   movx    a,@dptr
207F C083       +1  5070                             push    dph
2081 C082       +1  5071                             push    dpl
2083 A3         +1  5072                             inc             dptr
2084 A3         +1  5073                             inc             dptr
2085 A3         +1  5074                             inc             dptr
2086 A3         +1  5075                             inc             dptr
2087 F0         +1  5076                             movx    @dptr,a
2088 D082       +1  5077                             pop             dpl
208A D083       +1  5078                             pop             dph
                +1  5079                             
208C A3         +1  5080                             inc             dptr
208D DFEF       +1  5081                             djnz    r7,lwrx
208F 22         +1  5082                             ret
                +1  5083     ;r2..r5->@dptr..@dptr+3                         
2090 EA         +1  5084     saveIr2:                mov     a,r2
2091 F0         +1  5085                                             movx    @dptr,a
2092 A3         +1  5086                                             inc     dptr
2093 EB         +1  5087                                             mov     a,r3
2094 F0         +1  5088                                             movx    @dptr,a
2095 A3         +1  5089                                             inc     dptr
2096 EC         +1  5090                                             mov     a,r4
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    82

2097 F0         +1  5091                                             movx    @dptr,a
2098 A3         +1  5092                                             inc     dptr
2099 ED         +1  5093                                             mov     a,r5
209A F0         +1  5094                                             movx    @dptr,a
209B 22         +1  5095                                             ret
                +1  5096     ;r2..r5-> @r0..@r0+3
                +1  5097     
209C EA         +1  5098     saver2:         mov     a,r2
209D F6         +1  5099                                             mov     @r0,a
209E 08         +1  5100                                             inc     r0
209F EB         +1  5101                                             mov     a,r3
20A0 F6         +1  5102                                             mov     @r0,a
20A1 08         +1  5103                                             inc     r0
20A2 EC         +1  5104                                             mov     a,r4
20A3 F6         +1  5105                                             mov     @r0,a
20A4 08         +1  5106                                             inc     r0
20A5 ED         +1  5107                                             mov     a,r5
20A6 F6         +1  5108                                             mov     @r0,a
20A7 22         +1  5109                                             ret 
20A8 7F50       +1  5110     clmassix:       mov                     r7,#50h;28h
20AA 900100     +1  5111                             mov     dptr,#MASS0        ;забить массив A нулями
20AD 7400       +1  5112     clmax:          mov          a,#00h
20AF F0         +1  5113                  movx    @dptr,a
20B0 A3         +1  5114                  inc     dptr
20B1 DFFA       +1  5115                 djnz                r7,clmax                
20B3 F56E       +1  5116                  mov     chmas,a
20B5 C201       +1  5117                  clr     bitmas
20B7 22         +1  5118                 ret
                +1  5119     ;r1-яЁшхьшъ
                +1  5120     ;r0-шёЄюўшъ
                +1  5121     ;r7-ъюы срщЄ  
20B8            +1  5122     CIKLWR:
20B8 7F04       +1  5123                             mov             r7,#4   
20BA E6         +1  5124     lwr:    mov     a,@r0
20BB F7         +1  5125                             mov     @r1,a
20BC 09         +1  5126                             inc             r1
20BD 08         +1  5127                             inc             r0
20BE DFFA       +1  5128                             djnz    r7,lwr
20C0 22         +1  5129                             ret     
                +1  5130     ;r2..r5-> @dptr..@dptr+3
                +1  5131     
20C1 120000   F +1  5132     zmul:   call    maform
20C4 120000   F +1  5133                     call    lmul
20C7 120000   F +1  5134                     call    bform
20CA 22         +1  5135                     ret
                +1  5136     
20CB 120000   F +1  5137     zdiv:   call    maform
20CE 120000   F +1  5138                     call    divide
20D1 120000   F +1  5139                     call    bform
20D4 22         +1  5140                     ret
                +1  5141     
20D5 EA         +1  5142     maform: mov a,r2
20D6 33         +1  5143             rlc a
20D7 5006       +1  5144             jnc             fo1m
20D9 D202       +1  5145                     setb            znmat
20DB 120000   F +1  5146                     call   form4
20DE 22         +1  5147                     ret
20DF C202       +1  5148     fo1m:   clr             znmat
20E1 22         +1  5149                     ret
                +1  5150     
20E2 300203     +1  5151     bform:  jnb             znmat,fo2m
20E5 120000   F +1  5152                     call    form4
20E8 22         +1  5153     fo2m:   ret
                +1  5154       
                +1  5155     ;r2..r5 яхЁхтхёЄш т фюя ъюф
20E9 ED         +1  5156     form4:          mov a,r5
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    83

20EA F4         +1  5157             cpl a
20EB 2401       +1  5158             add a,#1
20ED FD         +1  5159             mov r5,a
20EE EC         +1  5160             mov a,r4
20EF F4         +1  5161             cpl a
20F0 3400       +1  5162             addc    a,#0
20F2 FC         +1  5163             mov r4,a
20F3 EB         +1  5164             mov a,r3
20F4 F4         +1  5165                 cpl a
20F5 3400       +1  5166             addc    a,#0
20F7 FB         +1  5167             mov r3,a
20F8 EA         +1  5168             mov a,r2
20F9 F4         +1  5169             cpl a
20FA 3400       +1  5170             addc    a,#0
20FC FA         +1  5171             mov r2,a
20FD 22         +1  5172             ret
                +1  5173     
20FE 120000   F +1  5174     zcmp:   call            maform
2101 120000   F +1  5175                     call            lcmp
2104 C0D0       +1  5176                     push            psw
2106 120000   F +1  5177                     call    bform
2109 D0D0       +1  5178                     pop             psw
210B 22         +1  5179                     ret
                +1  5180     
                +1  5181     
                +1  5182     ;@r0..@r0+3->r8..r11
                +1  5183     
210C E6         +1  5184     resar8: mov     a,@r0
210D F508       +1  5185                     mov     ltemp,a
210F 08         +1  5186                     inc     r0
2110 E6         +1  5187                     mov     a,@r0
2111 F509       +1  5188                     mov     ltemp+1,a
2113 08         +1  5189                     inc     r0
2114 E6         +1  5190                     mov     a,@r0
2115 F50A       +1  5191                     mov     ltemp+2,a
2117 08         +1  5192                     inc     r0
2118 E6         +1  5193                     mov     a,@r0
2119 F50B       +1  5194                     mov     ltemp+3,a
211B 22         +1  5195                     ret
                +1  5196     
                +1  5197     ;
                +1  5198     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  5199     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  5200     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  5201     ;r2 a    ўшёыю 180
                +1  5202     ;00 b4
                +1  5203     ;т_ї- mabin..mabin+2
                +1  5204     ;     80 01 00
                +1  5205      
211C C8         +1  5206     cond:   xch     a,r0    
211D F9         +1  5207                     mov     r1,a
211E C8         +1  5208                     xch     a,r0
211F 7C03       +1  5209                     mov     r4,#03
2121 7700       +1  5210     dcoa:   mov     @r1,#00
2123 09         +1  5211                     inc     r1
2124 DCFB       +1  5212                     djnz    r4,dcoa
2126 7B10       +1  5213                     mov     r3,#10h
2128 C3         +1  5214     dcob:   clr     c
2129 33         +1  5215                     rlc     a
212A CA         +1  5216                     xch     a,r2
212B 33         +1  5217                     rlc     a
212C CA         +1  5218                     xch     a,r2
212D C8         +1  5219                     xch     a,r0
212E F9         +1  5220                     mov     r1,a
212F C8         +1  5221                     xch     a,r0
2130 7C03       +1  5222                     mov     r4,#03
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    84

2132 FD         +1  5223                     mov     r5,a
2133 E7         +1  5224     dcoc:   mov     a,@r1 
2134 37         +1  5225                     addc    a,@r1
2135 D4         +1  5226                     da      a
2136 F7         +1  5227                     mov     @r1,a
2137 09         +1  5228                     inc     r1
2138 DCF9       +1  5229                     djnz    r4,dcoc
213A ED         +1  5230                     mov     a,r5
213B 4003       +1  5231                     jc      dcod
213D DBE9       +1  5232                     djnz    r3,dcob
213F C3         +1  5233                     clr     c
2140 00         +1  5234     dcod:   nop
2141 22         +1  5235                     ret
                +1  5236     
2142 8A08       +1  5237     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2144 850309     +1  5238                     mov     ltemp+1,3
2147 85040A     +1  5239                     mov     ltemp+2,4
214A 85050B     +1  5240                     mov     ltemp+3,5
214D 22         +1  5241                     ret
                +1  5242     
                +1  5243     ;@r0..@r0+3->r2..r5
                +1  5244     
214E E6         +1  5245     resar2: mov     a,@r0
214F FA         +1  5246                     mov     r2,a
2150 08         +1  5247                     inc     r0
2151 E6         +1  5248                     mov     a,@r0
2152 FB         +1  5249                     mov     r3,a
2153 08         +1  5250                     inc     r0
2154 E6         +1  5251                     mov     a,@r0
2155 FC         +1  5252                     mov     r4,a
2156 08         +1  5253                     inc     r0
2157 E6         +1  5254                     mov     a,@r0
2158 FD         +1  5255                     mov     r5,a
2159 22         +1  5256                     ret
                +1  5257     
                +1  5258     ;25mkc !!!!!!!!!!!!!!!1
215A 7B4B       +1  5259     z_9:      mov R3,#4Bh      ;загрузка числа
215C DBFE       +1  5260                    djnz R3,$
215E 22         +1  5261               ret
                +1  5262     
                +1  5263     ;запись   передаваемый байт в acc
                +1  5264     ;передача байта послед кодом старшими разрядами  вперед
215F 7A08       +1  5265     write:     mov R2,#8
2161 C3         +1  5266                             clr  c  
2162 C297       +1  5267     wr1:            clr             p1.7;P1.2
2164 00         +1  5268                         nop 
2165 33         +1  5269                             rlc A
2166 9296       +1  5270                             mov P1.6,C;P1.1,C
2168 120000   F +1  5271                        call tim2
216B D297       +1  5272                        setb P1.7;P1.2
216D 120000   F +1  5273                call tim2
2170 DAF0       +1  5274                       djnz R2,wr1
2172 C296       +1  5275                       clr P1.6;P1.1
2174 22         +1  5276                                              ret
                +1  5277     
                +1  5278     ;чтение номера байта с индикатора(2байта)
                +1  5279     ;bufind+8..bufind+9
                +1  5280     ;-  - - -
                +1  5281     ;- - - - - - - - - -
                +1  5282     ;adec..adec+9
                +1  5283     ;ст            мл
2175 7847       +1  5284     upak1:  mov             r0,#bufind+7;
2177 795C       +1  5285                                     mov             r1,#adec+9
2179 C3         +1  5286                                     clr             c
217A E6         +1  5287                                     mov             a,@r0
217B 9430       +1  5288                                     subb    a,#30h
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    85

217D FF         +1  5289                                     mov             r7,a
217E C3         +1  5290                                     clr             c
217F 9405       +1  5291                                     subb    a,#5
2181 4004       +1  5292                                     jc              upk1
2183 7404       +1  5293                                     mov             a,#4
2185 8001       +1  5294                                     jmp             upk2
2187 EF         +1  5295     upk1:           mov             a,r7
2188 F7         +1  5296     upk2:           mov             @r1,a
2189 22         +1  5297                                     ret  
                +1  5298     ;r1-мл байт счетчика ячеек
218A C3         +1  5299     chminus:        clr                     c
218B E7         +1  5300                                             mov                     a,@r1
218C 9401       +1  5301                                             subb            a,#01
218E F7         +1  5302                                             mov                     @r1,a;low
218F 19         +1  5303                                             dec                     r1
2190 E7         +1  5304                                             mov                     a,@r1
2191 9400       +1  5305                                             subb            a,#00
2193 F7         +1  5306                                             mov                     @r1,a
2194 22         +1  5307                                             ret
                +1  5308     
                +1  5309     
                +1  5310     ;чтение номера байта с индикатора(4байта)
                +1  5311     ;bufind+6..bufind+9
                +1  5312     ;-  - - -
                +1  5313     ;- - - - - - - - - -
                +1  5314     ;adec..adec+9
                +1  5315     ;ст            мл
2195 7848       +1  5316     upak4:  mov             r0,#bufind+8;
2197 795C       +1  5317                     mov             r1,#adec+9
2199 7F04       +1  5318                     mov             r7,#4
219B C3         +1  5319     upaa:   clr             c
219C E6         +1  5320                     mov             a,@r0
219D 9430       +1  5321                     subb    a,#30h
219F F7         +1  5322                     mov             @r1,a
21A0 18         +1  5323                     dec             r0
21A1 19         +1  5324                     dec             r1
21A2 DFF7       +1  5325                     djnz    r7,upaa
21A4 22         +1  5326                     ret
                +1  5327     
                +1  5328     ;dptr-адр ячейки 1й соотв блока 
21A5 E538       +1  5329     adrblok:         mov            a,nblok
21A7 C3         +1  5330                              clr            c
21A8 9401       +1  5331                              subb           a,#1
21AA FD         +1  5332                              mov            r5,a
21AB E4         +1  5333                              clr            a
21AC FC         +1  5334                              mov            r4,a
21AD FB         +1  5335                              mov            r3,a
21AE FA         +1  5336                              mov            r2,a
21AF 900000   F +1  5337                                     mov                     dptr,#ch320h
21B2 120000   F +1  5338                                     CALL   ldc_ltemp                 ; ltemp <-320
21B5 120000   F +1  5339                                     call            lmul;r2..r5
21B8 ED         +1  5340                                     mov                     a,r5
21B9 2450       +1  5341                                     add                     a,#50h
21BB F582       +1  5342                                     mov                     dpl,a
21BD EC         +1  5343                                     mov                     a,r4
21BE 3401       +1  5344                                     addc            a,#01           
21C0 F583       +1  5345                                     mov                     dph,a                   ;dptr-
21C2 22         +1  5346                                     ret
                +1  5347     
                +1  5348     ;
                +1  5349     ;saven_bl<-dptr  адрес след ячейки внешн озу 
21C3 79D3       +1  5350     save_hl:                mov             r1,#saven_bl
21C5 E583       +1  5351                                                     mov             a,dph
21C7 F7         +1  5352                                               mov           @r1,a
21C8 09         +1  5353                                                     inc             r1
21C9 E582       +1  5354                                                     mov             a,dpl
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    86

21CB F7         +1  5355                                                     mov             @r1,a
                +1  5356                                                     ;;;;;;;;;не конец ли блока
                +1  5357                             
                +1  5358     
21CC 79D6       +1  5359                                     mov                     r1,#volume+1;work+1
21CE 120000   F +1  5360                                     call            chminus
21D1 78D5       +1  5361                                     mov             r0,#volume
21D3 E6         +1  5362                                     mov             a,@r0
21D4 30E702     +1  5363                                     jnb             acc.7,noendbl
21D7 C20A       +1  5364                                     clr                     bitbon                  ;блок закон
                             чился
                +1  5365                             
21D9            +1  5366     noendbl:        
21D9 22         +1  5367                                             ret
                +1  5368     ;загрузка dptr сохр ранее значением адреса ячейки
21DA 79D3       +1  5369     resa_hl:                mov             r1,#saven_bl
21DC E7         +1  5370                                                     mov             a,@r1
21DD F583       +1  5371                                                     mov             dph,a
                +1  5372                                               
21DF 09         +1  5373                                                     inc             r1
21E0 E7         +1  5374                                                     mov             a,@r1
21E1 F582       +1  5375                                                     mov             dpl,a
21E3 22         +1  5376                                                     ret
                +1  5377     ;загрузка rez_A3 в соотв яч внешн озу
21E4 789C       +1  5378     loA3_X:                 mov             r0,#rez_A3
21E6 120000   F +1  5379                                                     call    resar2
                +1  5380                                                     
21E9 EA         +1  5381                                                     mov             a,r2                    ;
21EA F0         +1  5382                                                     movx    @dptr,a
21EB A3         +1  5383                                                     inc             dptr
21EC EB         +1  5384                                                     mov             a,r3
21ED F0         +1  5385                                                     movx    @dptr,a
21EE A3         +1  5386                                                     inc             dptr
21EF EC         +1  5387                                                     mov             a,r4
21F0 F0         +1  5388                                                     movx    @dptr,a
21F1 A3         +1  5389                                                     inc             dptr
21F2 ED         +1  5390                                                     mov             a,r5
21F3 F0         +1  5391                                                     movx    @dptr,a
21F4 A3         +1  5392                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
21F5 22         +1  5393                                                     ret             ;в ячейке saven_bl
                +1  5394     ;чтение в rez_A3 из соотв яч внешн озу
21F6            +1  5395     reA3_X:         
                +1  5396                                                     
21F6 E0         +1  5397                                                     movx    a,@dptr
21F7 FA         +1  5398                                                     mov             r2,a
21F8 A3         +1  5399                                                     inc             dptr
21F9 E0         +1  5400                                                     movx    a,@dptr
21FA FB         +1  5401                                                     mov             r3,a
21FB A3         +1  5402                                                     inc             dptr
21FC E0         +1  5403                                                     movx    a,@dptr
21FD FC         +1  5404                                                     mov             r4,a
21FE A3         +1  5405                                                     inc             dptr
21FF E0         +1  5406                                                     movx    a,@dptr
2200 FD         +1  5407                                                     mov             r5,a
2201 A3         +1  5408                                                     inc             dptr
2202 789C       +1  5409                                                     mov             r0,#rez_A3
2204 120000   F +1  5410                                                     call    saver2
2207 22         +1  5411                                                     ret
                    5412     
                    5413     ;$include (d:\amp\sarifm3.asm) 
                +1  5414     ; ” ©« SARIFM.ASM 8.11.95
                +1  5415     ;файл арифметики
                +1  5416       
  0008          +1  5417     ltemp    equ       8           ;long temporary
  000C          +1  5418     xtemp    equ       12          ;other temporaries
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    87

  000A          +1  5419     DECSIZE  EQU       10
  0004          +1  5420     NUMSIZE  EQU       4
  0004          +1  5421     RR4  EQU       4
  0005          +1  5422     RR5  EQU       5
                +1  5423     
                +1  5424                                                     
                +1  5425     
                +1  5426                 ; rseg     ARIF          ; Switch to this code segment.
                +1  5427     ;             using    0              ; Specify register bank for the following
                +1  5428                                            ; program code.
                +1  5429     ;                                               cseg AT 400h
                +1  5430     ; Arithmetics:  CLEARING string
                +1  5431     ; Input:
                +1  5432     ; R0 - pointer to string,
                +1  5433     ; NUMSIZE - byte count if CLRNUM used,
                +1  5434     ; DECSIZE - byte count if CLRDEC used,
                +1  5435     ; R2 - byte count if CLEAR used;
                +1  5436     ; Output:  none.
                +1  5437     
2208            +1  5438     CLRDEC:
2208 7A0A       +1  5439         MOV R2, #DECSIZE
220A 8002       +1  5440         SJMP    CLEAR
220C            +1  5441     CLRNUM:
220C 7A04       +1  5442         MOV R2, #NUMSIZE
                +1  5443         ;JMP    CLEAR
220E            +1  5444     CLEAR:
220E E4         +1  5445         CLR A
220F F6         +1  5446     CLR11:  MOV @R0, A
2210 08         +1  5447         INC R0
2211 DAFC       +1  5448         DJNZ    R2, CLR11
2213 22         +1  5449         RET
                +1  5450     
                +1  5451     ;**********************************
                +1  5452     ;mov    r1,#abin+3
                +1  5453     ;mov    r0,#adec
                +1  5454     ; _ _ _ _
                +1  5455     ;     03ff
                +1  5456     ;ст     мл   - вход
                +1  5457     ; _ _ _ _ _ _ _ _ _ _
                +1  5458     ;             1 0 2 3
                +1  5459     ;ст                мл 
                +1  5460     ;**********************************
                +1  5461     
2214            +1  5462     BINDEC:
                +1  5463     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  5464     ; Input:
                +1  5465     ; R0 - pointer to destination (high digit is the first),
                +1  5466     ; R1 - pointer to source,
                +1  5467     ; NUMSIZE - byte count in binary number;
                +1  5468     ; DECSIZE - byte count in decimal number;
                +1  5469     ; Output:  none.
                +1  5470     ; Source saved
                +1  5471     
                +1  5472         ; 1. Clear result
2214 7A05       +1  5473         MOV R2, #DECSIZE/2
2216 120000   F +1  5474         CALL   CLEAR  ; incrementing R0
                +1  5475     
                +1  5476         ; 2. Prepare convertion
2219 18         +1  5477         DEC R0
221A 8804       +1  5478         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
221C 8905       +1  5479         MOV RR5, R1 ; R5 - pointer to low byte of binary number
221E 7B20       +1  5480         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  5481     
                +1  5482         ; 3. Convert cyrcle
2220            +1  5483     BIN30:
                +1  5484     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    88

                +1  5485         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2220 A905       +1  5486         MOV R1, RR5
2222 7A04       +1  5487         MOV R2, #NUMSIZE
2224 E7         +1  5488     BIN31:  MOV A, @R1
2225 33         +1  5489         RLC A
2226 F7         +1  5490         MOV @R1, A
2227 19         +1  5491         DEC R1
2228 DAFA       +1  5492         DJNZ    R2, BIN31
222A A905       +1  5493         MOV R1, RR5
222C E7         +1  5494         MOV A, @R1
222D 92E0       +1  5495         MOV ACC.0, C
222F F7         +1  5496         MOV @R1, A
                +1  5497     
                +1  5498         ; 3.2. Doubling decimal result with <Carry>
2230 A804       +1  5499         MOV R0, RR4
2232 7A05       +1  5500         MOV R2, #DECSIZE/2
2234 E6         +1  5501     BIN32:  MOV A, @R0
2235 36         +1  5502         ADDC    A, @R0
2236 D4         +1  5503         DA  A
2237 F6         +1  5504         MOV @R0, A
2238 18         +1  5505         DEC R0
2239 DAF9       +1  5506         DJNZ    R2, BIN32
                +1  5507     
                +1  5508         ; 3.3. End of convert cyrcle
223B DBE3       +1  5509         DJNZ    R3, BIN30
                +1  5510     
                +1  5511         ; 4. Make bytes from half-bytes
223D E8         +1  5512         MOV A, R0
223E 240A       +1  5513         ADD A, #DECSIZE
2240 F8         +1  5514         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2241 A904       +1  5515         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2243 7A05       +1  5516         MOV R2, #DECSIZE/2
2245 E7         +1  5517     BIN41:  MOV A, @R1
2246 540F       +1  5518         ANL A, #00FH
2248 F6         +1  5519         MOV @R0, A
2249 18         +1  5520         DEC R0
224A E7         +1  5521         MOV A, @R1
224B C4         +1  5522         SWAP    A
224C 540F       +1  5523         ANL A, #00FH
224E F6         +1  5524         MOV @R0, A
224F 18         +1  5525         DEC R0
2250 19         +1  5526         DEC R1
2251 DAF2       +1  5527         DJNZ    R2, BIN41
2253 22         +1  5528         RET
                +1  5529     
                +1  5530     
                +1  5531     ;*********************************
                +1  5532     ;mov    r0,#abin
                +1  5533     ;mov    r1,#adec
                +1  5534     ; _ _ _ _       -выход
                +1  5535     ; ff0000
                +1  5536     ;0004
                +1  5537     ;мл      ст
                +1  5538     
                +1  5539     ;ст                       мл
                +1  5540     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  5541     ;                       2 5 5
                +1  5542     ;                   1 0 2 4
                +1  5543     
2254            +1  5544     DECBIN:
                +1  5545     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  5546     ; Input:
                +1  5547     ; R0 - pointer to destination,
                +1  5548     ; R1 - pointer to source (high digit is the first),
                +1  5549     ; NUMSIZE - byte count in binary number;
                +1  5550     ; DECSIZE - byte count in decimal number;
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    89

                +1  5551     ; Output:  none
                +1  5552     ; Source cleared
                +1  5553     
                +1  5554         ; 1. Clear result
2254 120000   F +1  5555         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  5556     
                +1  5557         ; 2. Prepare convertion
2257 18         +1  5558         DEC R0
2258 8804       +1  5559         MOV RR4, R0 ; R4 - pointer to high byte of binary result
225A 8905       +1  5560         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
225C 900000   F +1  5561         MOV DPTR, #DECT2
225F 7B20       +1  5562         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  5563     
                +1  5564         ; 3. Convert cyrcle
2261            +1  5565     DEC30:
                +1  5566     
                +1  5567         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2261 C3         +1  5568         CLR C
2262 A905       +1  5569         MOV R1, RR5
2264 7A0A       +1  5570         MOV R2, #DECSIZE
2266 E7         +1  5571     DEC31:  MOV A, @R1
2267 540F       +1  5572         ANL A, #00FH
2269 92E4       +1  5573         MOV ACC.4, C
226B 93         +1  5574         MOVC    A,@A+DPTR
226C F7         +1  5575         MOV @R1, A
226D A2E7       +1  5576         MOV C, ACC.7
226F 09         +1  5577         INC R1
2270 DAF4       +1  5578         DJNZ    R2, DEC31
                +1  5579     
                +1  5580         ; 3.2. Rotate binary result one bit to right with <Carry>
2272 A804       +1  5581         MOV R0, RR4
2274 7A04       +1  5582         MOV R2, #NUMSIZE
2276 E6         +1  5583     DEC32:  MOV A, @R0
2277 13         +1  5584         RRC A
2278 F6         +1  5585         MOV @R0, A
2279 18         +1  5586         DEC R0
227A DAFA       +1  5587         DJNZ    R2, DEC32
                +1  5588     
                +1  5589         ; 3.3. End of convert cyrcle
227C DBE3       +1  5590         DJNZ    R3, DEC30
227E 22         +1  5591         RET
                +1  5592     
227F 00800181   +1  5593     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2283 02820383                
2287 0484                    
2289 00000000   +1  5594         DB  00,00,00,00,00,00
228D 0000                    
228F 05850686   +1  5595         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2293 07870888                
2297 0989                    
                +1  5596     
                +1  5597     ;   Long comparison
                +1  5598     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  5599     ;   flags and acc set as though a long subtraction was done.
                +1  5600     ;*******************************
                +1  5601     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  5602     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  5603     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  5604     ;*******************************
2299            +1  5605     lcmp:
2299 C3         +1  5606         clr c
229A EA         +1  5607         mov a,r2
229B 9508       +1  5608         subb    a,8
229D 700F       +1  5609         jnz done
229F EB         +1  5610         mov a,r3
22A0 9509       +1  5611         subb    a,9
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    90

22A2 7008       +1  5612         jnz done1
22A4 EC         +1  5613         mov a,r4
22A5 950A       +1  5614         subb    a,10
22A7 7003       +1  5615         jnz done1
22A9 ED         +1  5616         mov a,r5
22AA 950B       +1  5617         subb    a,11
22AC            +1  5618     done1:
22AC C2D2       +1  5619         clr ov      ;overflow is significant only for top byte
22AE            +1  5620     done:
22AE 22         +1  5621         ret
                +1  5622     
                +1  5623     ;   Load long into r2-5 from [dptr]
                +1  5624     
22AF            +1  5625     ldc_long:
22AF E583       +1  5626         mov a,dph       ;is it in on board memory
22B1 6010       +1  5627         jz  onboard     ;yes
22B3 E4         +1  5628         clr a
22B4 93         +1  5629         movc    a,@a+dptr
22B5 FA         +1  5630         mov r2,a
22B6 7401       +1  5631         mov a,#1
22B8 93         +1  5632         movc    a,@a+dptr
22B9 FB         +1  5633         mov r3,a
22BA 7402       +1  5634         mov a,#2
22BC 93         +1  5635         movc    a,@a+dptr
22BD FC         +1  5636         mov r4,a
22BE 7403       +1  5637         mov a,#3
22C0 93         +1  5638         movc    a,@a+dptr
22C1 FD         +1  5639         mov r5,a
22C2 22         +1  5640         ret
22C3            +1  5641     onboard:
22C3 A882       +1  5642         mov r0,dpl
22C5 E6         +1  5643         mov a,@r0
22C6 FA         +1  5644         mov r2,a
22C7 08         +1  5645         inc r0
22C8 E6         +1  5646         mov a,@r0
22C9 FB         +1  5647         mov r3,a
22CA 08         +1  5648         inc r0
22CB E6         +1  5649         mov a,@r0
22CC FC         +1  5650         mov r4,a
22CD 08         +1  5651         inc r0
22CE E6         +1  5652         mov a,@r0
22CF FD         +1  5653         mov r5,a
22D0 22         +1  5654         ret
                +1  5655     
                +1  5656     ;**************************************
                +1  5657     ;загрузить ltemp...+3 из памяти программ
                +1  5658     ;mov    dptr,#CH5
                +1  5659     ;call   ldc_ltemp        ltemp <--5
                +1  5660     ;**************************************
22D1            +1  5661     ldc_ltemp:
22D1 E583       +1  5662         mov a,dph       ;is it in on board memory
22D3 6014       +1  5663         jz  oboard      ;yes
22D5 E4         +1  5664         clr a
22D6 93         +1  5665         movc    a,@a+dptr
22D7 F508       +1  5666         mov 8,a
22D9 7401       +1  5667         mov a,#1
22DB 93         +1  5668         movc    a,@a+dptr
22DC F509       +1  5669         mov 9,a
22DE 7402       +1  5670         mov a,#2
22E0 93         +1  5671         movc    a,@a+dptr
22E1 F50A       +1  5672         mov 10,a
22E3 7403       +1  5673         mov a,#3
22E5 93         +1  5674         movc    a,@a+dptr
22E6 F50B       +1  5675         mov 11,a
22E8 22         +1  5676         ret
22E9            +1  5677     oboard:
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    91

22E9 A882       +1  5678         mov r0,dpl
22EB 8608       +1  5679         mov 8,@r0
22ED 08         +1  5680         inc r0
22EE 8609       +1  5681         mov 9,@r0
22F0 08         +1  5682         inc r0
22F1 860A       +1  5683         mov 10,@r0
22F3 08         +1  5684         inc r0
22F4 860B       +1  5685         mov 11,@r0
22F6 22         +1  5686         ret
                +1  5687     
                +1  5688     ;*****************************
                +1  5689     ;mov    dptr,#k1
                +1  5690     ;call   ldx_long
                +1  5691     ;k1->r2..r5
                +1  5692     ;*****************************
                +1  5693     ;   Load long into r2-5 from [dptr]
                +1  5694     ;
                +1  5695     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
22F7            +1  5696     ldx_long:
22F7 E583       +1  5697         mov a,dph       ;is it in on board memory
22F9 6014       +1  5698         jz  onboar1        ;yes
22FB C082       +1  5699         push    dpl
22FD C083       +1  5700         push    dph
22FF E0         +1  5701         movx    a,@dptr
2300 FA         +1  5702         mov r2,a
2301 A3         +1  5703         inc dptr
2302 E0         +1  5704         movx    a,@dptr
2303 FB         +1  5705         mov r3,a
2304 A3         +1  5706         inc dptr
2305 E0         +1  5707         movx    a,@dptr
2306 FC         +1  5708         mov r4,a
2307 A3         +1  5709         inc dptr
2308 E0         +1  5710         movx    a,@dptr
2309 FD         +1  5711         mov r5,a
230A D083       +1  5712         pop dph
230C D082       +1  5713         pop dpl
230E 22         +1  5714         ret
230F            +1  5715     onboar1:
230F A882       +1  5716         mov r0,dpl
2311 E6         +1  5717         mov a,@r0
2312 FA         +1  5718         mov r2,a
2313 08         +1  5719         inc r0
2314 E6         +1  5720         mov a,@r0
2315 FB         +1  5721         mov r3,a
2316 08         +1  5722         inc r0
2317 E6         +1  5723         mov a,@r0
2318 FC         +1  5724         mov r4,a
2319 08         +1  5725         inc r0
231A E6         +1  5726         mov a,@r0
231B FD         +1  5727         mov r5,a
231C 22         +1  5728         ret
                +1  5729     
                +1  5730     ;*********************************
                +1  5731     ;mov    dptr,#k2
                +1  5732     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  5733     ;**********************************
231D            +1  5734     ldx_ltemp:
231D E583       +1  5735         mov a,dph       ;is it in on board memory
231F 6010       +1  5736         jz  oboard1     ;yes
2321 E0         +1  5737         movx    a,@dptr
2322 F508       +1  5738         mov 8,a
2324 A3         +1  5739         inc dptr
2325 E0         +1  5740         movx    a,@dptr
2326 F509       +1  5741         mov 9,a
2328 A3         +1  5742         inc dptr
2329 E0         +1  5743         movx    a,@dptr
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    92

232A F50A       +1  5744         mov 10,a
232C A3         +1  5745         inc dptr
232D E0         +1  5746         movx    a,@dptr
232E F50B       +1  5747         mov 11,a
2330 22         +1  5748         ret
2331            +1  5749     oboard1:
2331 A882       +1  5750         mov r0,dpl
2333 8608       +1  5751         mov 8,@r0
2335 08         +1  5752         inc r0
2336 8609       +1  5753         mov 9,@r0
2338 08         +1  5754         inc r0
2339 860A       +1  5755         mov 10,@r0
233B 08         +1  5756         inc r0
233C 860B       +1  5757         mov 11,@r0
233E 22         +1  5758         ret
                +1  5759     ;   Long division routines for 8051
                +1  5760     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  5761     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  5762     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  5763     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  5764     ;   r1 must be saved by the caller.
                +1  5765     ;   This is long unsigned division.
                +1  5766     
                +1  5767     
                +1  5768     ;   Register usage:
                +1  5769     ;       r0 loop counter
                +1  5770     ;       xtemp (12-15) accumulates quotient
                +1  5771     ;       r5-r2 holds dividend
                +1  5772     ;       ltemp holds divisor
                +1  5773     
                +1  5774     ;************************************
                +1  5775     ;r2..r5-делимое
                +1  5776     ;ltemp..-делитель
                +1  5777     ;частное -r2..r5
                +1  5778     ;*************************************
233F            +1  5779     divide:
233F E4         +1  5780         clr a
2340 F8         +1  5781         mov r0,a        ;initialize count
2341 F50C       +1  5782         mov xtemp,a     ;zero quotient
2343 F50D       +1  5783         mov xtemp+1,a
2345 F50E       +1  5784         mov xtemp+2,a
2347 F50F       +1  5785         mov xtemp+3,a
2349 ED         +1  5786         mov a,r5        ;check for zero dividend
234A 4C         +1  5787         orl a,r4
234B 4B         +1  5788         orl a,r3
234C 4A         +1  5789         orl a,r2
234D 600B       +1  5790         jz  jfinis
234F E508       +1  5791         mov a,ltemp     ;check for zero divisor
2351 4509       +1  5792         orl a,ltemp+1
2353 450A       +1  5793         orl a,ltemp+2
2355 450B       +1  5794         orl a,ltemp+3
2357 7037       +1  5795         jnz midl
2359 22         +1  5796         ret
                +1  5797     
235A 020000   F +1  5798     jfinis: jmp finis
                +1  5799     
235D            +1  5800     loops:
235D EA         +1  5801         mov a,r2
235E C3         +1  5802         clr c
235F 9508       +1  5803         subb    a,ltemp+0   ;is divisor greater than dividend yet
2361 4033       +1  5804         jc  yes     ;yes, go no further
2363 7013       +1  5805         jnz no
2365 EB         +1  5806         mov a,r3
2366 9509       +1  5807         subb    a,ltemp+1
2368 402C       +1  5808         jc  yes
236A 700C       +1  5809         jnz no
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    93

236C EC         +1  5810         mov a,r4
236D 950A       +1  5811         subb    a,ltemp+2
236F 4025       +1  5812         jc  yes
2371 7005       +1  5813         jnz no
2373 ED         +1  5814         mov a,r5
2374 950B       +1  5815         subb    a,ltemp+3
2376 401E       +1  5816         jc  yes
2378            +1  5817     no:
2378 E50B       +1  5818         mov a,ltemp+3   ;shift divisor up one bit
237A 250B       +1  5819         add a,ltemp+3
237C F50B       +1  5820         mov ltemp+3,a
237E E50A       +1  5821         mov a,ltemp+2
2380 350A       +1  5822         addc    a,ltemp+2
2382 F50A       +1  5823         mov ltemp+2,a
2384 E509       +1  5824         mov a,ltemp+1
2386 3509       +1  5825         addc    a,ltemp+1
2388 F509       +1  5826         mov ltemp+1,a
238A E508       +1  5827         mov a,ltemp+0
238C 3508       +1  5828         addc    a,ltemp+0
238E F508       +1  5829         mov ltemp+0,a
2390            +1  5830     midl:
2390 08         +1  5831         inc r0      ;increment count
2391 E508       +1  5832         mov a,ltemp+0   ;check for safe to shift some more
2393 30E7C7     +1  5833         jnb acc.7,loops  ;loop if top bit clear
2396            +1  5834     yes:
2396 E508       +1  5835         mov a,ltemp+0
2398 C3         +1  5836         clr c
2399 9A         +1  5837         subb    a,r2        ;can we subtract now?
239A 401A       +1  5838         jc  dosub       ;yes, go and do it
239C 7015       +1  5839         jnz nosub
239E E509       +1  5840         mov a,ltemp+1
23A0 9B         +1  5841         subb    a,r3
23A1 4013       +1  5842         jc  dosub
23A3 700E       +1  5843         jnz nosub
23A5 E50A       +1  5844         mov a,ltemp+2
23A7 9C         +1  5845         subb    a,r4
23A8 400C       +1  5846         jc  dosub
23AA 7007       +1  5847         jnz nosub
23AC E50B       +1  5848         mov a,ltemp+3
23AE 9D         +1  5849         subb    a,r5
23AF 4005       +1  5850         jc  dosub
23B1 6003       +1  5851         jz  dosub
23B3            +1  5852     nosub:
23B3 C3         +1  5853         clr c
23B4 8012       +1  5854         sjmp    dosh
23B6            +1  5855     dosub:
23B6 C3         +1  5856         clr c       ;subtract divisor from dividend
23B7 ED         +1  5857         mov a,r5
23B8 950B       +1  5858         subb    a,ltemp+3
23BA FD         +1  5859         mov r5,a
23BB EC         +1  5860         mov a,r4
23BC 950A       +1  5861         subb    a,ltemp+2
23BE FC         +1  5862         mov r4,a
23BF EB         +1  5863         mov a,r3
23C0 9509       +1  5864         subb    a,ltemp+1
23C2 FB         +1  5865         mov r3,a
23C3 EA         +1  5866         mov a,r2
23C4 9508       +1  5867         subb    a,ltemp+0
23C6 FA         +1  5868         mov r2,a
23C7 D3         +1  5869         setb    c       ;now set bit for quotient
23C8            +1  5870     dosh:
23C8 E50F       +1  5871         mov a,xtemp+3
23CA 33         +1  5872         rlc a
23CB F50F       +1  5873         mov xtemp+3,a
23CD E50E       +1  5874         mov a,xtemp+2
23CF 33         +1  5875         rlc a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    94

23D0 F50E       +1  5876         mov xtemp+2,a
23D2 E50D       +1  5877         mov a,xtemp+1
23D4 33         +1  5878         rlc a
23D5 F50D       +1  5879         mov xtemp+1,a
23D7 E50C       +1  5880         mov a,xtemp+0
23D9 33         +1  5881         rlc a
23DA F50C       +1  5882         mov xtemp+0,a
23DC E508       +1  5883         mov a,ltemp+0       ;shift divisor down
23DE C3         +1  5884         clr c
23DF 13         +1  5885         rrc a
23E0 F508       +1  5886         mov ltemp+0,a
23E2 E509       +1  5887         mov a,ltemp+1
23E4 13         +1  5888         rrc a
23E5 F509       +1  5889         mov ltemp+1,a
23E7 E50A       +1  5890         mov a,ltemp+2
23E9 13         +1  5891         rrc a
23EA F50A       +1  5892         mov ltemp+2,a
23EC E50B       +1  5893         mov a,ltemp+3
23EE 13         +1  5894         rrc a
23EF F50B       +1  5895         mov ltemp+3,a
                +1  5896     
23F1 D8A3       +1  5897         djnz    r0,yes      ;and continue with the rest
                +1  5898     
23F3            +1  5899     finis:
23F3 8D0B       +1  5900         mov ltemp+3,r5
23F5 8C0A       +1  5901         mov ltemp+2,r4
23F7 8B09       +1  5902         mov ltemp+1,r3
23F9 8A08       +1  5903         mov ltemp+0,r2
23FB AD0F       +1  5904         mov r5,xtemp+3
23FD AC0E       +1  5905         mov r4,xtemp+2
23FF AB0D       +1  5906         mov r3,xtemp+1
2401 AA0C       +1  5907         mov r2,xtemp+0
2403 22         +1  5908         ret         ;and return with the satisfaction of a job well done
                +1  5909     
                +1  5910     
                +1  5911     ;   Long multiplication
                +1  5912     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  5913     ;   other in ltemp. It really doesn't matter which one is where.
                +1  5914     
                +1  5915     ;**********************************
                +1  5916     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  5917     ;ст  мл
                +1  5918     ;**********************************
2404            +1  5919     llmul:
2404            +1  5920     almul:
2404            +1  5921     lmul:
2404 ED         +1  5922         mov a,r5        ;low order byte
2405 850BF0     +1  5923         mov b,ltemp+3       ;times low order byte
2408 A4         +1  5924         mul ab
2409 F50F       +1  5925         mov xtemp+3,a       ;store low
240B 85F00E     +1  5926         mov xtemp+2,b   ;and high
240E ED         +1  5927         mov a,r5        ;low order
240F 850AF0     +1  5928         mov b,ltemp+2   ;times next
2412 A4         +1  5929         mul ab
2413 250E       +1  5930         add a,xtemp+2   ;add in
2415 F50E       +1  5931         mov xtemp+2,a
2417 E5F0       +1  5932         mov a,b
2419 3400       +1  5933         addc    a,#0
241B F50D       +1  5934         mov xtemp+1,a
241D ED         +1  5935         mov a,r5
241E 8509F0     +1  5936         mov b,ltemp+1
2421 A4         +1  5937         mul ab
2422 250D       +1  5938         add a,xtemp+1
2424 F50D       +1  5939         mov xtemp+1,a
2426 E5F0       +1  5940         mov a,b
2428 3400       +1  5941         addc    a,#0
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    95

242A F50C       +1  5942         mov xtemp+0,a
242C ED         +1  5943         mov a,r5
242D 8508F0     +1  5944         mov b,ltemp+0
2430 A4         +1  5945         mul ab
2431 250C       +1  5946         add a,xtemp+0
2433 F50C       +1  5947         mov xtemp+0,a
2435 EC         +1  5948         mov a,r4
2436 850BF0     +1  5949         mov b,ltemp+3
2439 A4         +1  5950         mul ab
243A 250E       +1  5951         add a,xtemp+2
243C F50E       +1  5952         mov xtemp+2,a
243E E5F0       +1  5953         mov a,b
2440 350D       +1  5954         addc    a,xtemp+1
2442 F50D       +1  5955         mov xtemp+1,a
2444 E50C       +1  5956         mov a,xtemp+0
2446 3400       +1  5957         addc    a,#0
2448 F50C       +1  5958         mov xtemp+0,a
244A EC         +1  5959         mov a,r4
244B 850AF0     +1  5960         mov b,ltemp+2
244E A4         +1  5961         mul ab
244F 250D       +1  5962         add a,xtemp+1
2451 F50D       +1  5963         mov xtemp+1,a
2453 E5F0       +1  5964         mov a,b
2455 350C       +1  5965         addc    a,xtemp+0
2457 F50C       +1  5966         mov xtemp+0,a
2459 EC         +1  5967         mov a,r4
245A 8509F0     +1  5968         mov b,ltemp+1
245D A4         +1  5969         mul ab
245E 250C       +1  5970         add a,xtemp+0
2460 F50C       +1  5971         mov xtemp+0,a
                +1  5972     
2462 EB         +1  5973         mov a,r3
2463 850BF0     +1  5974         mov b,ltemp+3
2466 A4         +1  5975         mul ab
2467 250D       +1  5976         add a,xtemp+1
2469 F50D       +1  5977         mov xtemp+1,a
246B E5F0       +1  5978         mov a,b
246D 350C       +1  5979         addc    a,xtemp+0
246F F50C       +1  5980         mov xtemp+0,a
2471 EB         +1  5981         mov a,r3
2472 850AF0     +1  5982         mov b,ltemp+2
2475 A4         +1  5983         mul ab
2476 250C       +1  5984         add a,xtemp+0
2478 F50C       +1  5985         mov xtemp+0,a
                +1  5986     
247A EA         +1  5987         mov a,r2
247B 850BF0     +1  5988         mov b,ltemp+3
247E A4         +1  5989         mul ab
247F 250C       +1  5990         add a,xtemp+0
2481 FA         +1  5991         mov r2,a
2482 AB0D       +1  5992         mov r3,xtemp+1
2484 AC0E       +1  5993         mov r4,xtemp+2
2486 AD0F       +1  5994         mov r5,xtemp+3
                +1  5995     
2488 22         +1  5996         ret         ;all done
                +1  5997     ;******************************
                +1  5998     ;из содержимого  r2-r5  вычесть
                +1  5999     ;содержимое          ltemp..ltemp+3
                +1  6000     ;******************************
2489            +1  6001     llsub:
2489            +1  6002      lsub:
2489 ED         +1  6003         mov a,r5
248A C3         +1  6004         clr c
248B 950B       +1  6005         subb    a,11
248D FD         +1  6006         mov r5,a
248E EC         +1  6007         mov a,r4
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    96

248F 950A       +1  6008         subb    a,10
2491 FC         +1  6009         mov r4,a
2492 EB         +1  6010         mov a,r3
2493 9509       +1  6011         subb    a,9
2495 FB         +1  6012         mov r3,a
2496 EA         +1  6013         mov a,r2
2497 9508       +1  6014         subb    a,8
2499 FA         +1  6015         mov r2,a
249A 22         +1  6016         ret
                +1  6017     
                +1  6018     ;***********************************************
                +1  6019     ;                                                      ст мл
                +1  6020     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6021     ;  r0- адрес младшего байта !!!
                +1  6022     ;результат- r2..r5
                +1  6023     ;***********************************************
                +1  6024     
249B C3         +1  6025     ladd:    clr       c
249C ED         +1  6026          mov       a,r5
249D 26         +1  6027          add       a,@r0
249E FD         +1  6028          mov       r5,a
249F 18         +1  6029          dec       r0
24A0 EC         +1  6030          mov       a,r4
24A1 36         +1  6031          addc      a,@r0
24A2 FC         +1  6032          mov       r4,a
24A3 18         +1  6033          dec       r0
24A4 EB         +1  6034          mov       a,r3
24A5 36         +1  6035          addc      a,@r0
24A6 FB         +1  6036          mov       r3,a
24A7 18         +1  6037          dec       r0
24A8 EA         +1  6038          mov       a,r2
24A9 36         +1  6039          addc      a,@r0
24AA FA         +1  6040          mov       r2,a
24AB 22         +1  6041          ret
                +1  6042     ;***********************************************
                +1  6043     ;                                                      ст мл
                +1  6044     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6045     ;  r0- адрес младшего байта !!!
                +1  6046     ;результат- r2..r5
                +1  6047     ;***********************************************
                +1  6048     
24AC C3         +1  6049     laddx:    clr       c
24AD E2         +1  6050                                             movx            a,@r0
24AE 2D         +1  6051                                             add                     a,r5
24AF FD         +1  6052               mov     r5,a
24B0 18         +1  6053                             dec     r0
24B1 E2         +1  6054                             movx    a,@r0
24B2 3C         +1  6055                             addc    a,r4
24B3 FC         +1  6056                             mov     r4,a
24B4 18         +1  6057                             dec     r0
24B5 E2         +1  6058                             movx    a,@r0
24B6 3B         +1  6059                             addc    a,r3
24B7 FB         +1  6060                             mov     r3,a
24B8 18         +1  6061                             dec     r0
24B9 E2         +1  6062                             movx    a,@r0
24BA 3A         +1  6063                             addc    a,r2
24BB FA         +1  6064                             mov       r2,a
24BC 22         +1  6065                             ret
                +1  6066     
                +1  6067     ;***********************************************
                +1  6068     ;                                                      ст мл
                +1  6069     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6070     ;  dptr- адрес младшего байта !!!
                +1  6071     ;результат- r2..r5
                +1  6072     ;***********************************************
                +1  6073     
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    97

24BD C3         +1  6074     addx:    clr       c
24BE E0         +1  6075                                             movx            a,@dptr
24BF 2D         +1  6076                                             add                     a,r5
24C0 FD         +1  6077               mov     r5,a
24C1 120000   F +1  6078                             call            dedptr;dec     dptr
24C4 E0         +1  6079                             movx    a,@dptr
24C5 3C         +1  6080                             addc    a,r4
24C6 FC         +1  6081                             mov     r4,a
24C7 120000   F +1  6082                             call            dedptr;dec     dptr
24CA E0         +1  6083                             movx    a,@dptr
24CB 3B         +1  6084                             addc    a,r3
24CC FB         +1  6085                             mov     r3,a
24CD 120000   F +1  6086                             call            dedptr;dec     dptr
24D0 E0         +1  6087                             movx    a,@dptr
24D1 3A         +1  6088                             addc    a,r2
24D2 FA         +1  6089                             mov       r2,a
24D3 22         +1  6090                             ret
                +1  6091     
24D4 C0D0       +1  6092     dedptr:         push    psw
24D6 C3         +1  6093                                             clr             c
24D7 E582       +1  6094                                             mov             a,dpl
24D9 9401       +1  6095                                             subb    a,#1
24DB F582       +1  6096                                             mov             dpl,a
24DD E583       +1  6097                                             mov             a,dph
24DF 9400       +1  6098                                             subb    a,#0
24E1 F583       +1  6099                                             mov             dph,a
24E3 D0D0       +1  6100                                             pop             psw
24E5 22         +1  6101                                             ret
                    6102     
                    6103     ;$include (d:\amp\floatm.asm)
                +1  6104     ;       Copyright (C) 1988 HI-TECH Software
                +1  6105     
                +1  6106     ;       Single Precision Floating point arithmetic routines for 8051
                +1  6107     
                +1  6108     ;       The format of floating point numbers is as follows:
                +1  6109     
                +1  6110     ;       -----------------
                +1  6111     ;       *     sign      *  1 bit
                +1  6112     ;       -----------------
                +1  6113     ;       *   exponent    *  8 bits
                +1  6114     ;       -----------------
                +1  6115     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  6116     ;       -----------------
                +1  6117     
                +1  6118     
                +1  6119     ;       As usual for the 8051 the memory layout has the most significant
                +1  6120     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  6121     ;       lowest address.
                +1  6122     
                +1  6123     ;       Calling conventions:
                +1  6124     
                +1  6125     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  6126     ;
                +1  6127     ;       Return value is in r2-r5
                +1  6128     
                +1  6129     ;       Naming conventions: A routine name is constructed by
                +1  6130     
                +1  6131     ;             ASOP
                +1  6132     
                +1  6133     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  6134     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  6135     ;       Conversion routines are named
                +1  6136     
                +1  6137     ;               AStof
                +1  6138     
                +1  6139     ;       where A is the arithmetic type (a for integer, l for unsigned)
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    98

                +1  6140     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  6141     ;       Conversion from float to integer is ftol.
                +1  6142     
                +1  6143     ;               .ORG  5000h
                +1  6144     ;               .CODE
                +1  6145     ;       seg     c_text
                +1  6146     
                +1  6147     ;;      $MOD812
----            +1  6148             CSEG
                +1  6149             ;ORG 1000h
                +1  6150     
                +1  6151                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  6152             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  6153     
                +1  6154     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  6155     ;       macros
                +1  6156     
                +1  6157     saveregs        macro
                +1  6158             push    7
                +1  6159             push    6
                +1  6160             push    1
                +1  6161             push    0
                +1  6162             endm
                +1  6163     
                +1  6164     restregs        macro
                +1  6165             pop     0
                +1  6166             pop     1
                +1  6167             pop     6
                +1  6168             pop     7
                +1  6169             endm
                +1  6170     
                +1  6171     ;addr   
                +1  6172     dan     macro   pad
                +1  6173             mov     a,r5
                +1  6174             add     a,pad+3
                +1  6175             mov     pad+3,a
                +1  6176             mov     a,pad+2
                +1  6177             addc    a,r4
                +1  6178             mov     pad+2,a
                +1  6179             mov     a,pad+1
                +1  6180             addc    a,r3
                +1  6181             mov     pad+1,a
                +1  6182             mov     a,pad+0
                +1  6183             addc    a,r2
                +1  6184             mov     pad,a
                +1  6185             endm
                +1  6186     
                +1  6187     addl    macro  addr
                +1  6188             mov     a,r5
                +1  6189             add     a,addr+3
                +1  6190             mov     r5,a
                +1  6191             mov     a,addr+2
                +1  6192             addc    a,r4
                +1  6193             mov     r4,a
                +1  6194             mov     a,addr+1
                +1  6195             addc    a,r3
                +1  6196             mov     r3,a
                +1  6197             mov     a,addr+0
                +1  6198             addc    a,r2
                +1  6199             mov     r2,a
                +1  6200             endm
                +1  6201     
                +1  6202     
                +1  6203     add1    macro
                +1  6204             mov     a,r5
                +1  6205             add     a,#1
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE    99

                +1  6206             mov     r5,a
                +1  6207             clr     a
                +1  6208             addc    a,r4
                +1  6209             mov     r4,a
                +1  6210             clr     a
                +1  6211             addc    a,r3
                +1  6212             mov     r3,a
                +1  6213             clr     a
                +1  6214             addc    a,r2
                +1  6215             mov     r2,a
                +1  6216             endm
                +1  6217     
                +1  6218     shfdn   macro  addr
                +1  6219             clr     c
                +1  6220             mov     a,addr
                +1  6221             rrc     a
                +1  6222             mov     addr,a
                +1  6223             mov     a,addr+1
                +1  6224             rrc     a
                +1  6225             mov     addr+1,a
                +1  6226             mov     a,addr+2
                +1  6227             rrc     a
                +1  6228             mov     addr+2,a
                +1  6229             mov     a,addr+3
                +1  6230             rrc     a
                +1  6231             mov     addr+3,a
                +1  6232             endm
                +1  6233     
                +1  6234     shfup   macro  addr
                +1  6235             clr     c
                +1  6236             mov     a,addr+3
                +1  6237             rlc     a
                +1  6238             mov     addr+3,a
                +1  6239             mov     a,addr+2
                +1  6240             rlc     a
                +1  6241             mov     addr+2,a
                +1  6242             mov     a,addr+1
                +1  6243             rlc     a
                +1  6244             mov     addr+1,a
                +1  6245             mov     a,addr
                +1  6246             rlc     a
                +1  6247             mov     addr,a
                +1  6248             endm
                +1  6249     
                +1  6250     rshift  macro
                +1  6251             clr     c
                +1  6252             mov     a,r2
                +1  6253             rrc     a
                +1  6254             mov     r2,a
                +1  6255             mov     a,r3
                +1  6256             rrc     a
                +1  6257             mov     r3,a
                +1  6258             mov     a,r4
                +1  6259             rrc     a
                +1  6260             mov     r4,a
                +1  6261             mov     a,r5
                +1  6262             rrc     a
                +1  6263             mov     r5,a
                +1  6264             endm
                +1  6265     rshift1 macro
                +1  6266             setb    c
                +1  6267             mov     a,r2
                +1  6268             rrc     a
                +1  6269             mov     r2,a
                +1  6270             mov     a,r3
                +1  6271             rrc     a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   100

                +1  6272             mov     r3,a
                +1  6273             mov     a,r4
                +1  6274             rrc     a
                +1  6275             mov     r4,a
                +1  6276             mov     a,r5
                +1  6277             rrc     a
                +1  6278             mov     r5,a
                +1  6279             endm
                +1  6280     
                +1  6281     
                +1  6282     lshift  macro
                +1  6283             mov     a,r5
                +1  6284             rlc     a
                +1  6285             mov     r5,a
                +1  6286             mov     a,r4
                +1  6287             rlc     a
                +1  6288             mov     r4,a
                +1  6289             mov     a,r3
                +1  6290             rlc     a
                +1  6291             mov     r3,a
                +1  6292             mov     a,r2
                +1  6293             rlc     a
                +1  6294             mov     r2,a
                +1  6295             endm
                +1  6296     
                +1  6297     neg1    macro
                +1  6298             clr     c
                +1  6299             clr     a
                +1  6300             subb    a,r5
                +1  6301             mov     r5,a
                +1  6302             clr     a
                +1  6303             subb    a,r4
                +1  6304             mov     r4,a
                +1  6305             clr     a
                +1  6306             subb    a,r3
                +1  6307             mov     r3,a
                +1  6308             clr     a
                +1  6309             subb    a,r2
                +1  6310             mov     r2,a
                +1  6311             endm
                +1  6312     
                +1  6313     negm    macro  addr
                +1  6314             clr     c
                +1  6315             clr     a
                +1  6316             subb    a,addr+3
                +1  6317             mov     addr+3,a
                +1  6318             clr     a
                +1  6319             subb    a,addr+2
                +1  6320             mov     addr+2,a
                +1  6321             clr     a
                +1  6322             subb    a,addr+1
                +1  6323             mov     addr+1,a
                +1  6324             clr     a
                +1  6325             subb    a,addr
                +1  6326             mov     addr,a
                +1  6327             endm
                +1  6328     
                +1  6329     copytor macro  addr
                +1  6330             mov     r2,addr
                +1  6331             mov     r3,addr+1
                +1  6332             mov     r4,addr+2
                +1  6333             mov     r5,addr+3
                +1  6334             endm
                +1  6335     
                +1  6336     
                +1  6337     copyrto macro  addr
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   101

                +1  6338             mov     addr,r2
                +1  6339             mov     addr+1,r3
                +1  6340             mov     addr+2,r4
                +1  6341             mov     addr+3,r5
                +1  6342             endm
                +1  6343     
                +1  6344     
                +1  6345     ;       Internal representation: in this set of routines a floating number
                +1  6346     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  6347     
                +1  6348     ;       Stack offset values
                +1  6349     ;ltemp   equ     28h
                +1  6350     
  0006          +1  6351     cntr    equ     6               ;r6 is the counter
  0007          +1  6352     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  6353     exp1    equ     0               ;exponent 1 in r0
  0002          +1  6354     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  6355     exp2    equ     1               ;exponent 1 in r1
  0008          +1  6356     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  6357     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  6358     
                +1  6359     
                +1  6360     
                +1  6361     
                +1  6362     
                +1  6363     ;DECSIZE EQU     10
                +1  6364     ;NUMSIZE EQU     4
                +1  6365     ;RR4     EQU     4
                +1  6366     ;RR5     EQU     5
                +1  6367     
                +1  6368     ;       unpack1 - unpacks the left operand
                +1  6369     
009E            +1  6370     unpack1:
009E EA         +1  6371             mov     a,r2            ;get sign
009F 5480       +1  6372             anl     a,#80h
00A1 530740     +1  6373             anl     sign,#40h       ;clear other bits
00A4 4207       +1  6374             orl     sign,a          ;store sign
00A6 EB         +1  6375             mov     a,r3            ;get lsb of exponent
00A7 33         +1  6376             rlc     a               ;rotate into carry
00A8 EA         +1  6377             mov     a,r2            ;get rest of exponent
00A9 33         +1  6378             rlc     a               ;and make it 8 bits
00AA F8         +1  6379             mov     r0,a            ;store it
00AB 6006       +1  6380             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  6381             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  6382             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  6383             ret
00B3            +1  6384     zer1:
00B3 E4         +1  6385             clr     a
00B4 FA         +1  6386             mov     r2,a
00B5 FB         +1  6387             mov     r3,a
00B6 FC         +1  6388             mov     r4,a
00B7 FD         +1  6389             mov     r5,a            ;zero mantissa
00B8 F8         +1  6390             mov     r0,a            ;zero exponent
00B9 22         +1  6391             ret
                +1  6392     
                +1  6393     ;       unpack2 - unpacks right operand
                +1  6394     
00BA            +1  6395     unpack2:
00BA E508       +1  6396             mov     a,ltemp         ;get sign
00BC 13         +1  6397             rrc     a               ;shift down
00BD 5440       +1  6398             anl     a,#40h          ;mask out sign
00BF 530780     +1  6399             anl     sign,#80h       ;clear old bit
00C2 4207       +1  6400             orl     sign,a
00C4 E509       +1  6401             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  6402             rlc     a               ;rotate into carry
00C7 E508       +1  6403             mov     a,ltemp         ;get rest of exponent
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   102

00C9 33         +1  6404             rlc     a               ;and make it 8 bits
00CA F9         +1  6405             mov     r1,a            ;store it
00CB 6007       +1  6406             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  6407             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  6408             mov     mant2,#0        ;clear upper byte
00D3 22         +1  6409             ret
00D4            +1  6410     zer2:
00D4 E4         +1  6411             clr     a
00D5 F508       +1  6412             mov     ltemp,a
00D7 F509       +1  6413             mov     ltemp+1,a
00D9 F50A       +1  6414             mov     ltemp+2,a
00DB F50B       +1  6415             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  6416             ret
                +1  6417     
                +1  6418     ;       pack1 - put operand 1 back into float format
                +1  6419     
00DE            +1  6420     pack1:
00DE E8         +1  6421             mov     a,r0            ;get exponent
00DF C3         +1  6422             clr     c
00E0 13         +1  6423             rrc     a               ;shift down 1 bit
00E1 530780     +1  6424             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  6425             orl     a,r7            ;or in sign bit
00E5 FA         +1  6426             mov     r2,a            ;store
00E6 E8         +1  6427             mov     a,r0            ;get other bit
00E7 03         +1  6428             rr      a               ;rotate into hi bit
00E8 5480       +1  6429             anl     a,#80h          ;mask
00EA 53037F     +1  6430             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  6431             orl     mant1+1,a       ;put in
00EF 22         +1  6432             ret
                +1  6433     
                +1  6434     
                +1  6435     ;       norm1 - normalize the unpacked value in 1
                +1  6436     
00F0            +1  6437     norm1:
00F0 E8         +1  6438             mov     a,r0            ;get exponent
00F1 60C0       +1  6439             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  6440             mov     a,r2            ;get hi byte
00F4 6023       +1  6441             jz      norup           ;zero, so shift up if anything
00F6            +1  6442     nordn:
00F6 EA         +1  6443             mov     a,r2            ;get hi byte
00F7 B4010D     +1  6444             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  6445+3           add1                    ;add in a rounding bit
00FA ED         +1  6446+1           mov     a,r5
00FB 2401       +1  6447+1           add     a,#1
00FD FD         +1  6448+1           mov     r5,a
00FE E4         +1  6449+1           clr     a
00FF 3C         +1  6450+1           addc    a,r4
0100 FC         +1  6451+1           mov     r4,a
0101 E4         +1  6452+1           clr     a
0102 3B         +1  6453+1           addc    a,r3
0103 FB         +1  6454+1           mov     r3,a
0104 E4         +1  6455+1           clr     a
0105 3A         +1  6456+1           addc    a,r2
0106 FA         +1  6457+1           mov     r2,a
0107            +1  6458     nordn1:
                +1  6459+3           rshift                  ;shift down 1 bit
0107 C3         +1  6460+1           clr     c
0108 EA         +1  6461+1           mov     a,r2
0109 13         +1  6462+1           rrc     a
010A FA         +1  6463+1           mov     r2,a
010B EB         +1  6464+1           mov     a,r3
010C 13         +1  6465+1           rrc     a
010D FB         +1  6466+1           mov     r3,a
010E EC         +1  6467+1           mov     a,r4
010F 13         +1  6468+1           rrc     a
0110 FC         +1  6469+1           mov     r4,a
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   103

0111 ED         +1  6470+1           mov     a,r5
0112 13         +1  6471+1           rrc     a
0113 FD         +1  6472+1           mov     r5,a
0114 08         +1  6473             inc     r0              ;adjust exponent
0115 EA         +1  6474             mov     a,r2            ;test high byte
0116 70DE       +1  6475             jnz     nordn           ;loop
0118 22         +1  6476             ret                     ;done
                +1  6477     
0119            +1  6478     norup:
0119 4B         +1  6479             orl     a,r3
011A 4C         +1  6480             orl     a,r4
011B 4D         +1  6481             orl     a,r5            ;test for zero mantissa
011C 6095       +1  6482             jz      zer1            ;it is - make it true zero
011E            +1  6483     norup1:
011E EB         +1  6484             mov     a,r3            ;get mantissa byte
011F 20E710     +1  6485             jb      acc.7,norup2    ;jump if set
0122 C3         +1  6486             clr     c
                +1  6487+3           lshift                  ;shift mantissa up
0123 ED         +1  6488+1           mov     a,r5
0124 33         +1  6489+1           rlc     a
0125 FD         +1  6490+1           mov     r5,a
0126 EC         +1  6491+1           mov     a,r4
0127 33         +1  6492+1           rlc     a
0128 FC         +1  6493+1           mov     r4,a
0129 EB         +1  6494+1           mov     a,r3
012A 33         +1  6495+1           rlc     a
012B FB         +1  6496+1           mov     r3,a
012C EA         +1  6497+1           mov     a,r2
012D 33         +1  6498+1           rlc     a
012E FA         +1  6499+1           mov     r2,a
012F 18         +1  6500             dec     r0              ;adjust exponent
0130 80EC       +1  6501             jmp     norup1
0132            +1  6502     norup2:
0132 22         +1  6503             ret                     ;finito
                +1  6504     
                +1  6505     
                +1  6506     ;       fpdenorm - denormalize one of the two operands so that their
                +1  6507     ;       exponents are equal. This requires the smaller number to have
                +1  6508     ;       its exponent incremented and its mantissa shifted right.
                +1  6509     
0133            +1  6510     denorm:
0133 E8         +1  6511             mov     a,r0
0134 C3         +1  6512             clr     c
0135 99         +1  6513             subb    a,r1            ;compare exponents
0136 5029       +1  6514             jnc     up2a            ;shift operand 2
0138            +1  6515     up1:
0138 08         +1  6516             inc     r0              ;increment exponent
                +1  6517+3           rshift                  ;shift mantissa down
0139 C3         +1  6518+1           clr     c
013A EA         +1  6519+1           mov     a,r2
013B 13         +1  6520+1           rrc     a
013C FA         +1  6521+1           mov     r2,a
013D EB         +1  6522+1           mov     a,r3
013E 13         +1  6523+1           rrc     a
013F FB         +1  6524+1           mov     r3,a
0140 EC         +1  6525+1           mov     a,r4
0141 13         +1  6526+1           rrc     a
0142 FC         +1  6527+1           mov     r4,a
0143 ED         +1  6528+1           mov     a,r5
0144 13         +1  6529+1           rrc     a
0145 FD         +1  6530+1           mov     r5,a
0146 E8         +1  6531             mov     a,r0
0147 B501EE     +1  6532             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  6533             ret
                +1  6534     
014B            +1  6535     up2:
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   104

014B 09         +1  6536             inc     r1              ;increment exponent 2
                +1  6537+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  6538+1           clr     c
014D E508       +1  6539+1           mov     a,mant2
014F 13         +1  6540+1           rrc     a
0150 F508       +1  6541+1           mov     mant2,a
0152 E509       +1  6542+1           mov     a,mant2+1
0154 13         +1  6543+1           rrc     a
0155 F509       +1  6544+1           mov     mant2+1,a
0157 E50A       +1  6545+1           mov     a,mant2+2
0159 13         +1  6546+1           rrc     a
015A F50A       +1  6547+1           mov     mant2+2,a
015C E50B       +1  6548+1           mov     a,mant2+3
015E 13         +1  6549+1           rrc     a
015F F50B       +1  6550+1           mov     mant2+3,a
0161            +1  6551     up2a:
0161 E8         +1  6552             mov     a,r0            ;compare exponents
0162 B501E6     +1  6553             cjne    a,exp2,up2
0165 22         +1  6554             ret                     ;all done
                +1  6555     ;------------------------------------------------------------------
                +1  6556     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  6557     
0166            +1  6558     fladd:
                +1  6559+3           saveregs
0166 C007       +1  6560+1           push    7
0168 C006       +1  6561+1           push    6
016A C001       +1  6562+1           push    1
016C C000       +1  6563+1           push    0
016E 119E       +1  6564             call    unpack1
0170 11BA       +1  6565             call    unpack2
0172 3133       +1  6566             call    denorm
0174 E507       +1  6567             mov     a,sign
0176 30E70D     +1  6568             jnb     acc.7,ok1       ;test left sign
                +1  6569+3           neg1                    ;negate op1
0179 C3         +1  6570+1           clr     c
017A E4         +1  6571+1           clr     a
017B 9D         +1  6572+1           subb    a,r5
017C FD         +1  6573+1           mov     r5,a
017D E4         +1  6574+1           clr     a
017E 9C         +1  6575+1           subb    a,r4
017F FC         +1  6576+1           mov     r4,a
0180 E4         +1  6577+1           clr     a
0181 9B         +1  6578+1           subb    a,r3
0182 FB         +1  6579+1           mov     r3,a
0183 E4         +1  6580+1           clr     a
0184 9A         +1  6581+1           subb    a,r2
0185 FA         +1  6582+1           mov     r2,a
0186            +1  6583     ok1:
0186 E507       +1  6584             mov     a,sign
0188 30E615     +1  6585             jnb     acc.6,ok2       ;test right sign
                +1  6586+3           negm    mant2           ;negate op2
018B C3         +1  6587+1           clr     c
018C E4         +1  6588+1           clr     a
018D 950B       +1  6589+1           subb    a,mant2+3
018F F50B       +1  6590+1           mov     mant2+3,a
0191 E4         +1  6591+1           clr     a
0192 950A       +1  6592+1           subb    a,mant2+2
0194 F50A       +1  6593+1           mov     mant2+2,a
0196 E4         +1  6594+1           clr     a
0197 9509       +1  6595+1           subb    a,mant2+1
0199 F509       +1  6596+1           mov     mant2+1,a
019B E4         +1  6597+1           clr     a
019C 9508       +1  6598+1           subb    a,mant2
019E F508       +1  6599+1           mov     mant2,a
01A0            +1  6600     ok2:
                +1  6601+3           addl    mant2           ;add mantissas
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   105

01A0 ED         +1  6602+1           mov     a,r5
01A1 250B       +1  6603+1           add     a,mant2+3
01A3 FD         +1  6604+1           mov     r5,a
01A4 E50A       +1  6605+1           mov     a,mant2+2
01A6 3C         +1  6606+1           addc    a,r4
01A7 FC         +1  6607+1           mov     r4,a
01A8 E509       +1  6608+1           mov     a,mant2+1
01AA 3B         +1  6609+1           addc    a,r3
01AB FB         +1  6610+1           mov     r3,a
01AC E508       +1  6611+1           mov     a,mant2+0
01AE 3A         +1  6612+1           addc    a,r2
01AF FA         +1  6613+1           mov     r2,a
01B0 E4         +1  6614             clr     a
01B1 FF         +1  6615             mov     r7,a            ;clear sign
01B2 EA         +1  6616             mov     a,r2            ;get sign of result
01B3 30E70E     +1  6617             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  6618             mov     r7,a            ;store sign
                +1  6619+3           neg1                    ;negate mantissa
01B7 C3         +1  6620+1           clr     c
01B8 E4         +1  6621+1           clr     a
01B9 9D         +1  6622+1           subb    a,r5
01BA FD         +1  6623+1           mov     r5,a
01BB E4         +1  6624+1           clr     a
01BC 9C         +1  6625+1           subb    a,r4
01BD FC         +1  6626+1           mov     r4,a
01BE E4         +1  6627+1           clr     a
01BF 9B         +1  6628+1           subb    a,r3
01C0 FB         +1  6629+1           mov     r3,a
01C1 E4         +1  6630+1           clr     a
01C2 9A         +1  6631+1           subb    a,r2
01C3 FA         +1  6632+1           mov     r2,a
01C4            +1  6633     ok3:
01C4 11F0       +1  6634             call    norm1
01C6 11DE       +1  6635             call    pack1           ;pack normalized result
                +1  6636+3           restregs                ;and return
01C8 D000       +1  6637+1           pop     0
01CA D001       +1  6638+1           pop     1
01CC D006       +1  6639+1           pop     6
01CE D007       +1  6640+1           pop     7
01D0 22         +1  6641             ret
                +1  6642     ;-------------------------------------------------------------
                +1  6643     ;       Subtract the number ltemp from the number in r2-r5
                +1  6644     
01D1            +1  6645     flsub:
01D1 630880     +1  6646             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  6647             jmp     fladd           ;and add!
                +1  6648     
                +1  6649     ;================================================================
                +1  6650     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  6651     
01D6            +1  6652     flcmp:
01D6 EA         +1  6653            mov     a,r2            ;get sign of left
01D7 6508       +1  6654            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  6655            jnb     acc.7,cexp      ;same, go check exponent
                +1  6656     ;ifdef SMALL_MODEL
01DC EA         +1  6657             mov     a,r2            ;get sign of left again
01DD 33         +1  6658             rlc     a
01DE 5001       +1  6659             jnc     flout
                +1  6660     ;endif
01E0 D3         +1  6661             setb    c
01E1 22         +1  6662     flout:          ret                    ;return with acc < 0
                +1  6663     
01E2            +1  6664     cexp:
01E2 C3         +1  6665            clr     c
01E3 EA         +1  6666            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  6667            subb    a,ltemp
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   106

01E6 7010       +1  6668            jnz     fnd
01E8 EB         +1  6669            mov     a,r3
01E9 9509       +1  6670            subb    a,ltemp+1
01EB 700B       +1  6671            jnz     fnd
01ED EC         +1  6672            mov     a,r4
01EE 950A       +1  6673            subb    a,ltemp+2
01F0 7006       +1  6674            jnz     fnd
01F2 ED         +1  6675            mov     a,r5
01F3 950B       +1  6676            subb    a,ltemp+3
01F5 7001       +1  6677            jnz     fnd
01F7            +1  6678     cdone:
01F7 22         +1  6679            ret                     ;return with acc == 0
01F8            +1  6680     fnd:
01F8 8AF0       +1  6681           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  6682          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  6683            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  6684                         orl         a,#1                          ;make non-zero
0201 B3         +1  6685             cpl     c               ;c=0->1,c=1->0
0202 22         +1  6686             ret
                +1  6687     ;==============================================================
                +1  6688     
                +1  6689     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  6690     ;       the result in r2-r5
                +1  6691     
0203            +1  6692     flmul:
                +1  6693+3           saveregs
0203 C007       +1  6694+1           push    7
0205 C006       +1  6695+1           push    6
0207 C001       +1  6696+1           push    1
0209 C000       +1  6697+1           push    0
020B 119E       +1  6698             call    unpack1
020D 11BA       +1  6699             call    unpack2
020F E4         +1  6700             clr     a
0210 F50C       +1  6701             mov     prod,a
0212 F50D       +1  6702             mov     prod+1,a        ;clear product
0214 F50E       +1  6703             mov     prod+2,a
0216 F50F       +1  6704             mov     prod+3,a
0218 7E07       +1  6705             mov     r6,#7           ;initialize counter
021A            +1  6706     mup1:
                +1  6707+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  6708+1           clr     c
021B E508       +1  6709+1           mov     a,mant2
021D 13         +1  6710+1           rrc     a
021E F508       +1  6711+1           mov     mant2,a
0220 E509       +1  6712+1           mov     a,mant2+1
0222 13         +1  6713+1           rrc     a
0223 F509       +1  6714+1           mov     mant2+1,a
0225 E50A       +1  6715+1           mov     a,mant2+2
0227 13         +1  6716+1           rrc     a
0228 F50A       +1  6717+1           mov     mant2+2,a
022A E50B       +1  6718+1           mov     a,mant2+3
022C 13         +1  6719+1           rrc     a
022D F50B       +1  6720+1           mov     mant2+3,a
022F 5014       +1  6721             jnc     nobit           ;skip if lsb was zero
                +1  6722+3           dan     prod            ;add multiplicand to product
0231 ED         +1  6723+1           mov     a,r5
0232 250F       +1  6724+1           add     a,prod+3
0234 F50F       +1  6725+1           mov     prod+3,a
0236 E50E       +1  6726+1           mov     a,prod+2
0238 3C         +1  6727+1           addc    a,r4
0239 F50E       +1  6728+1           mov     prod+2,a
023B E50D       +1  6729+1           mov     a,prod+1
023D 3B         +1  6730+1           addc    a,r3
023E F50D       +1  6731+1           mov     prod+1,a
0240 E50C       +1  6732+1           mov     a,prod+0
0242 3A         +1  6733+1           addc    a,r2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   107

0243 F50C       +1  6734+1           mov     prod,a
0245            +1  6735     nobit:
                +1  6736+3           lshift                  ;shift multiplicand up
0245 ED         +1  6737+1           mov     a,r5
0246 33         +1  6738+1           rlc     a
0247 FD         +1  6739+1           mov     r5,a
0248 EC         +1  6740+1           mov     a,r4
0249 33         +1  6741+1           rlc     a
024A FC         +1  6742+1           mov     r4,a
024B EB         +1  6743+1           mov     a,r3
024C 33         +1  6744+1           rlc     a
024D FB         +1  6745+1           mov     r3,a
024E EA         +1  6746+1           mov     a,r2
024F 33         +1  6747+1           rlc     a
0250 FA         +1  6748+1           mov     r2,a
0251 DEC7       +1  6749             djnz    r6,mup1         ;loop if more
                +1  6750     
0253 7E11       +1  6751             mov     r6,#17          ;re-initalize counter
0255 8015       +1  6752             sjmp    mup3
0257            +1  6753     mup11:
                +1  6754+3           shfdn   prod            ;shift product right
0257 C3         +1  6755+1           clr     c
0258 E50C       +1  6756+1           mov     a,prod
025A 13         +1  6757+1           rrc     a
025B F50C       +1  6758+1           mov     prod,a
025D E50D       +1  6759+1           mov     a,prod+1
025F 13         +1  6760+1           rrc     a
0260 F50D       +1  6761+1           mov     prod+1,a
0262 E50E       +1  6762+1           mov     a,prod+2
0264 13         +1  6763+1           rrc     a
0265 F50E       +1  6764+1           mov     prod+2,a
0267 E50F       +1  6765+1           mov     a,prod+3
0269 13         +1  6766+1           rrc     a
026A F50F       +1  6767+1           mov     prod+3,a
026C            +1  6768     mup3:
                +1  6769+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  6770+1           clr     c
026D E508       +1  6771+1           mov     a,mant2
026F 13         +1  6772+1           rrc     a
0270 F508       +1  6773+1           mov     mant2,a
0272 E509       +1  6774+1           mov     a,mant2+1
0274 13         +1  6775+1           rrc     a
0275 F509       +1  6776+1           mov     mant2+1,a
0277 E50A       +1  6777+1           mov     a,mant2+2
0279 13         +1  6778+1           rrc     a
027A F50A       +1  6779+1           mov     mant2+2,a
027C E50B       +1  6780+1           mov     a,mant2+3
027E 13         +1  6781+1           rrc     a
027F F50B       +1  6782+1           mov     mant2+3,a
0281 5014       +1  6783             jnc     mup2            ;skip if bit not set
                +1  6784+3           dan     prod            ;add to prod
0283 ED         +1  6785+1           mov     a,r5
0284 250F       +1  6786+1           add     a,prod+3
0286 F50F       +1  6787+1           mov     prod+3,a
0288 E50E       +1  6788+1           mov     a,prod+2
028A 3C         +1  6789+1           addc    a,r4
028B F50E       +1  6790+1           mov     prod+2,a
028D E50D       +1  6791+1           mov     a,prod+1
028F 3B         +1  6792+1           addc    a,r3
0290 F50D       +1  6793+1           mov     prod+1,a
0292 E50C       +1  6794+1           mov     a,prod+0
0294 3A         +1  6795+1           addc    a,r2
0295 F50C       +1  6796+1           mov     prod,a
0297            +1  6797     mup2:
0297 DEBE       +1  6798             djnz    r6,mup11        ;loop if more
0299 E8         +1  6799             mov     a,r0            ;get exp1
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   108

029A 29         +1  6800             add     a,r1            ;add exp2
029B 247A       +1  6801             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  6802             mov     r0,a            ;store
029E EF         +1  6803             mov     a,r7            ;get sign
029F 23         +1  6804             rl      a               ;rotate bit into msb
02A0 6207       +1  6805             xrl     sign,a          ;xor with other bit
                +1  6806+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  6807+1           mov     r2,prod
02A4 AB0D       +1  6808+1           mov     r3,prod+1
02A6 AC0E       +1  6809+1           mov     r4,prod+2
02A8 AD0F       +1  6810+1           mov     r5,prod+3
02AA 11F0       +1  6811             call    norm1           ;normalize
02AC 11DE       +1  6812             call    pack1
                +1  6813+3           restregs
02AE D000       +1  6814+1           pop     0
02B0 D001       +1  6815+1           pop     1
02B2 D006       +1  6816+1           pop     6
02B4 D007       +1  6817+1           pop     7
02B6 22         +1  6818             ret
                +1  6819     ;-----------------------------------------------------------
                +1  6820     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  6821     
02B7            +1  6822     fldiv:
                +1  6823+3           saveregs
02B7 C007       +1  6824+1           push    7
02B9 C006       +1  6825+1           push    6
02BB C001       +1  6826+1           push    1
02BD C000       +1  6827+1           push    0
02BF 119E       +1  6828             call    unpack1
02C1 11BA       +1  6829             call    unpack2
02C3 E4         +1  6830             clr     a
02C4 F50C       +1  6831             mov     prod,a
02C6 F50D       +1  6832             mov     prod+1,a
02C8 F50E       +1  6833             mov     prod+2,a
02CA F50F       +1  6834             mov     prod+3,a
02CC E9         +1  6835             mov     a,r1            ;check for zero divisor
02CD 6067       +1  6836             jz      div9
02CF E8         +1  6837             mov     a,r0            ;check for zero dividend
02D0 6064       +1  6838             jz      div9
02D2 C3         +1  6839             clr     c
02D3 99         +1  6840             subb    a,r1            ;compute new exponent
02D4 2478       +1  6841             add     a,#127-7        ;unbias
02D6 F8         +1  6842             mov     r0,a            ;store back
02D7 EF         +1  6843             mov     a,r7            ;get sign
02D8 23         +1  6844             rl      a
02D9 6207       +1  6845             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  6846             mov     r6,#24+7        ;initialize counter
02DD            +1  6847     div1:
                +1  6848+3           shfup   prod            ;shift quotient up
02DD C3         +1  6849+1           clr     c
02DE E50F       +1  6850+1           mov     a,prod+3
02E0 33         +1  6851+1           rlc     a
02E1 F50F       +1  6852+1           mov     prod+3,a
02E3 E50E       +1  6853+1           mov     a,prod+2
02E5 33         +1  6854+1           rlc     a
02E6 F50E       +1  6855+1           mov     prod+2,a
02E8 E50D       +1  6856+1           mov     a,prod+1
02EA 33         +1  6857+1           rlc     a
02EB F50D       +1  6858+1           mov     prod+1,a
02ED E50C       +1  6859+1           mov     a,prod
02EF 33         +1  6860+1           rlc     a
02F0 F50C       +1  6861+1           mov     prod,a
02F2 C3         +1  6862             clr     c
02F3 EA         +1  6863             mov     a,r2            ;compare values
02F4 9508       +1  6864             subb    a,mant2
02F6 4028       +1  6865             jc      div2            ;skip if bigger
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   109

02F8 7013       +1  6866             jnz     div3
02FA EB         +1  6867             mov     a,r3            ;compare values
02FB 9509       +1  6868             subb    a,mant2+1
02FD 4021       +1  6869             jc      div2            ;skip if bigger
02FF 700C       +1  6870             jnz     div3
0301 EC         +1  6871             mov     a,r4            ;compare values
0302 950A       +1  6872             subb    a,mant2+2
0304 401A       +1  6873             jc      div2            ;skip if bigger
0306 7005       +1  6874             jnz     div3
0308 ED         +1  6875             mov     a,r5            ;compare values
0309 950B       +1  6876             subb    a,mant2+3
030B 4013       +1  6877             jc      div2            ;skip if bigger
030D            +1  6878     div3:
030D ED         +1  6879             mov     a,r5
030E 950B       +1  6880             subb    a,mant2+3
0310 FD         +1  6881             mov     r5,a
0311 EC         +1  6882             mov     a,r4
0312 950A       +1  6883             subb    a,mant2+2               ;do subtraction
0314 FC         +1  6884             mov     r4,a
0315 EB         +1  6885             mov     a,r3
0316 9509       +1  6886             subb    a,mant2+1               ;do subtraction
0318 FB         +1  6887             mov     r3,a
0319 EA         +1  6888             mov     a,r2
031A 9508       +1  6889             subb    a,mant2         ;do subtraction
031C FA         +1  6890             mov     r2,a
031D 430F01     +1  6891             orl     prod+3,#1       ;set lsb in quotient
0320            +1  6892     div2:
                +1  6893+3           lshift                  ;shift dividend up
0320 ED         +1  6894+1           mov     a,r5
0321 33         +1  6895+1           rlc     a
0322 FD         +1  6896+1           mov     r5,a
0323 EC         +1  6897+1           mov     a,r4
0324 33         +1  6898+1           rlc     a
0325 FC         +1  6899+1           mov     r4,a
0326 EB         +1  6900+1           mov     a,r3
0327 33         +1  6901+1           rlc     a
0328 FB         +1  6902+1           mov     r3,a
0329 EA         +1  6903+1           mov     a,r2
032A 33         +1  6904+1           rlc     a
032B FA         +1  6905+1           mov     r2,a
032C DEAF       +1  6906             djnz    r6,div1         ;loop if more
                +1  6907+3           copytor prod            ;copy quotient
032E AA0C       +1  6908+1           mov     r2,prod
0330 AB0D       +1  6909+1           mov     r3,prod+1
0332 AC0E       +1  6910+1           mov     r4,prod+2
0334 AD0F       +1  6911+1           mov     r5,prod+3
0336            +1  6912     div9:
0336 11F0       +1  6913             call    norm1           ;now normalize result
0338 11DE       +1  6914             call    pack1           ;pack it up
                +1  6915+3           restregs                ;restore registers
033A D000       +1  6916+1           pop     0
033C D001       +1  6917+1           pop     1
033E D006       +1  6918+1           pop     6
0340 D007       +1  6919+1           pop     7
0342 22         +1  6920             ret
                +1  6921     ;------------------------------------------------------------------
                +1  6922     
                +1  6923     ;       Float to long conversion: if the exponent is less than the
                +1  6924     ;       excess value, the result is zero. If the exponent is so large
                +1  6925     ;       that the value would be shifted out, the result is overflow.
                +1  6926     ;       Otherwise shift the mantissa up or down as required.
                +1  6927     
0343            +1  6928     ftol:
                +1  6929+3           saveregs
0343 C007       +1  6930+1           push    7
0345 C006       +1  6931+1           push    6
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   110

0347 C001       +1  6932+1           push    1
0349 C000       +1  6933+1           push    0
034B EA         +1  6934             mov     a,r2
034C B4BF09     +1  6935             cjne    a,#0bfh,ne05
034F EB         +1  6936             mov     a,r3
0350 7006       +1  6937             jnz     ne05
0352 EC         +1  6938             mov     a,r4
0353 7003       +1  6939             jnz     ne05
0355 ED         +1  6940             mov     a,r5
0356 6024       +1  6941             jz      ftol1
0358 119E       +1  6942     ne05:   call    unpack1
035A E8         +1  6943             mov     a,r0            ;get exponent
035B 2482       +1  6944             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  6945             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  6946             mov     a,r7            ;get sign
0361 30E70D     +1  6947             jnb     acc.7,ftol4     ;skip if +ve
                +1  6948+3           neg1                    ;negate it
0364 C3         +1  6949+1           clr     c
0365 E4         +1  6950+1           clr     a
0366 9D         +1  6951+1           subb    a,r5
0367 FD         +1  6952+1           mov     r5,a
0368 E4         +1  6953+1           clr     a
0369 9C         +1  6954+1           subb    a,r4
036A FC         +1  6955+1           mov     r4,a
036B E4         +1  6956+1           clr     a
036C 9B         +1  6957+1           subb    a,r3
036D FB         +1  6958+1           mov     r3,a
036E E4         +1  6959+1           clr     a
036F 9A         +1  6960+1           subb    a,r2
0370 FA         +1  6961+1           mov     r2,a
0371            +1  6962     ftol4:
0371 E8         +1  6963             mov     a,r0            ;get exponent
0372 246A       +1  6964             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  6965             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  6966             mov     r0,a            ;save it
0378 24F8       +1  6967             add     a,#-8           ;if > 8, too big
037A 500E       +1  6968             jnc     ftol3
037C            +1  6969     ftol1:
037C E4         +1  6970             clr     a
037D FA         +1  6971             mov     r2,a
037E FB         +1  6972             mov     r3,a
037F FC         +1  6973             mov     r4,a
0380 FD         +1  6974             mov     r5,a
0381            +1  6975     ftol9:
                +1  6976+3           restregs
0381 D000       +1  6977+1           pop     0
0383 D001       +1  6978+1           pop     1
0385 D006       +1  6979+1           pop     6
0387 D007       +1  6980+1           pop     7
0389 22         +1  6981             ret
038A            +1  6982     ftol3:
038A E8         +1  6983             mov     a,r0
038B FE         +1  6984             mov     r6,a            ;store in counter
038C 60F3       +1  6985             jz      ftol9           ;if zero, do nothing
038E            +1  6986     ftol33:
                +1  6987+3           lshift                  ;shift up
038E ED         +1  6988+1           mov     a,r5
038F 33         +1  6989+1           rlc     a
0390 FD         +1  6990+1           mov     r5,a
0391 EC         +1  6991+1           mov     a,r4
0392 33         +1  6992+1           rlc     a
0393 FC         +1  6993+1           mov     r4,a
0394 EB         +1  6994+1           mov     a,r3
0395 33         +1  6995+1           rlc     a
0396 FB         +1  6996+1           mov     r3,a
0397 EA         +1  6997+1           mov     a,r2
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   111

0398 33         +1  6998+1           rlc     a
0399 FA         +1  6999+1           mov     r2,a
039A DEF2       +1  7000             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7001             sjmp    ftol9
039E            +1  7002     ftol2:
039E F4         +1  7003             cpl     a               ;complement
039F FE         +1  7004             mov     r6,a
03A0 6022       +1  7005             jz      ftol22
03A2            +1  7006     ftol23:
03A2 EF         +1  7007             mov     a,r7
03A3 30E70F     +1  7008             jnb     acc.7,ftol24
                +1  7009+3           rshift1
03A6 D3         +1  7010+1           setb    c
03A7 EA         +1  7011+1           mov     a,r2
03A8 13         +1  7012+1           rrc     a
03A9 FA         +1  7013+1           mov     r2,a
03AA EB         +1  7014+1           mov     a,r3
03AB 13         +1  7015+1           rrc     a
03AC FB         +1  7016+1           mov     r3,a
03AD EC         +1  7017+1           mov     a,r4
03AE 13         +1  7018+1           rrc     a
03AF FC         +1  7019+1           mov     r4,a
03B0 ED         +1  7020+1           mov     a,r5
03B1 13         +1  7021+1           rrc     a
03B2 FD         +1  7022+1           mov     r5,a
03B3 800D       +1  7023             jmp     ftol25
03B5            +1  7024+3   ftol24: rshift                  ;shift down
03B5 C3         +1  7025+1           clr     c
03B6 EA         +1  7026+1           mov     a,r2
03B7 13         +1  7027+1           rrc     a
03B8 FA         +1  7028+1           mov     r2,a
03B9 EB         +1  7029+1           mov     a,r3
03BA 13         +1  7030+1           rrc     a
03BB FB         +1  7031+1           mov     r3,a
03BC EC         +1  7032+1           mov     a,r4
03BD 13         +1  7033+1           rrc     a
03BE FC         +1  7034+1           mov     r4,a
03BF ED         +1  7035+1           mov     a,r5
03C0 13         +1  7036+1           rrc     a
03C1 FD         +1  7037+1           mov     r5,a
03C2 DEDE       +1  7038     ftol25: djnz    r6,ftol23
03C4            +1  7039     ftol22:
                +1  7040+3           add1                    ;round
03C4 ED         +1  7041+1           mov     a,r5
03C5 2401       +1  7042+1           add     a,#1
03C7 FD         +1  7043+1           mov     r5,a
03C8 E4         +1  7044+1           clr     a
03C9 3C         +1  7045+1           addc    a,r4
03CA FC         +1  7046+1           mov     r4,a
03CB E4         +1  7047+1           clr     a
03CC 3B         +1  7048+1           addc    a,r3
03CD FB         +1  7049+1           mov     r3,a
03CE E4         +1  7050+1           clr     a
03CF 3A         +1  7051+1           addc    a,r2
03D0 FA         +1  7052+1           mov     r2,a
03D1 EF         +1  7053             mov     a,r7
03D2 30E70F     +1  7054             jnb     acc.7,ftol26
                +1  7055+3           rshift1
03D5 D3         +1  7056+1           setb    c
03D6 EA         +1  7057+1           mov     a,r2
03D7 13         +1  7058+1           rrc     a
03D8 FA         +1  7059+1           mov     r2,a
03D9 EB         +1  7060+1           mov     a,r3
03DA 13         +1  7061+1           rrc     a
03DB FB         +1  7062+1           mov     r3,a
03DC EC         +1  7063+1           mov     a,r4
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   112

03DD 13         +1  7064+1           rrc     a
03DE FC         +1  7065+1           mov     r4,a
03DF ED         +1  7066+1           mov     a,r5
03E0 13         +1  7067+1           rrc     a
03E1 FD         +1  7068+1           mov     r5,a
03E2 809D       +1  7069             jmp     ftol9
03E4            +1  7070+3   ftol26: rshift
03E4 C3         +1  7071+1           clr     c
03E5 EA         +1  7072+1           mov     a,r2
03E6 13         +1  7073+1           rrc     a
03E7 FA         +1  7074+1           mov     r2,a
03E8 EB         +1  7075+1           mov     a,r3
03E9 13         +1  7076+1           rrc     a
03EA FB         +1  7077+1           mov     r3,a
03EB EC         +1  7078+1           mov     a,r4
03EC 13         +1  7079+1           rrc     a
03ED FC         +1  7080+1           mov     r4,a
03EE ED         +1  7081+1           mov     a,r5
03EF 13         +1  7082+1           rrc     a
03F0 FD         +1  7083+1           mov     r5,a
03F1 808E       +1  7084             jmp     ftol9
                +1  7085     
                +1  7086     ;       arithmetic integer to floating conversions
                +1  7087     
03F3            +1  7088     abtof:
03F3 ED         +1  7089             mov     a,r5
03F4 23         +1  7090             rl      a
03F5 FC         +1  7091             mov     r4,a
03F6 9C         +1  7092             subb    a,r4
03F7 FC         +1  7093             mov     r4,a
03F8 FB         +1  7094             mov     r3,a
03F9 FA         +1  7095             mov     r2,a
03FA 8006       +1  7096             jmp     altof
03FC            +1  7097     awtof:
03FC EC         +1  7098             mov     a,r4
03FD 23         +1  7099             rl      a
03FE FB         +1  7100             mov     r3,a
03FF 9B         +1  7101             subb    a,r3
0400 FB         +1  7102             mov     r3,a
0401 FA         +1  7103             mov     r2,a
0402            +1  7104     altof:
                +1  7105+3           saveregs
0402 C007       +1  7106+1           push    7
0404 C006       +1  7107+1           push    6
0406 C001       +1  7108+1           push    1
0408 C000       +1  7109+1           push    0
040A EA         +1  7110             mov     a,r2            ;get sign
040B 5480       +1  7111             anl     a,#80h
040D FF         +1  7112             mov     r7,a            ;store it
040E 30E70D     +1  7113             jnb     acc.7,altof1    ;skip if +ve
                +1  7114+3           neg1
0411 C3         +1  7115+1           clr     c
0412 E4         +1  7116+1           clr     a
0413 9D         +1  7117+1           subb    a,r5
0414 FD         +1  7118+1           mov     r5,a
0415 E4         +1  7119+1           clr     a
0416 9C         +1  7120+1           subb    a,r4
0417 FC         +1  7121+1           mov     r4,a
0418 E4         +1  7122+1           clr     a
0419 9B         +1  7123+1           subb    a,r3
041A FB         +1  7124+1           mov     r3,a
041B E4         +1  7125+1           clr     a
041C 9A         +1  7126+1           subb    a,r2
041D FA         +1  7127+1           mov     r2,a
041E            +1  7128     altof1:
041E 7896       +1  7129             mov     r0,#127+23      ;initialize exponent
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   113

0420 11F0       +1  7130             call    norm1           ;normalize it
0422 11DE       +1  7131             call    pack1           ;and pack up
                +1  7132+3           restregs
0424 D000       +1  7133+1           pop     0
0426 D001       +1  7134+1           pop     1
0428 D006       +1  7135+1           pop     6
042A D007       +1  7136+1           pop     7
042C 22         +1  7137             ret
                +1  7138     
042D            +1  7139     lbtof:
042D 7C00       +1  7140             mov     r4,#0
042F            +1  7141     lwtof:
042F E4         +1  7142             clr     a
0430 FB         +1  7143             mov     r3,a
0431 FA         +1  7144             mov     r2,a
0432            +1  7145     lltof:
                +1  7146+3           saveregs
0432 C007       +1  7147+1           push    7
0434 C006       +1  7148+1           push    6
0436 C001       +1  7149+1           push    1
0438 C000       +1  7150+1           push    0
043A 7F00       +1  7151             mov     r7,#0           ;zero sign
043C 80E0       +1  7152             sjmp    altof1
                +1  7153     
                +1  7154     ;-------------------------------------------------------
                +1  7155     
                +1  7156     
                    7157     
                    7158     ;$include (d:\amp\wriread.asm)
                +1  7159     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  7160     cle256:          mov            IE,#00H
0441 75B601     +1  7161                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  7162                              MOV            PSCTL,#03
                +1  7163                                             
0447 7400       +1  7164                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  7165                                     movx    @dptr,a                         ;wr
044A 758F00     +1  7166                                     mov             PSCTL,#00
044D 75B600     +1  7167                                 mov         FLSCL,#00
0450 75A880     +1  7168                               mov           IE,#80H
0453 22         +1  7169                                     ret
                +1  7170     
                +1  7171     ;чтение памяти программ в r8..r11
                +1  7172     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  7173     re4byte:        mov                     dph,r2
0456 8B82       +1  7174                                             mov                     dpl,r3
0458 E4         +1  7175                                             clr                     a
0459 93         +1  7176                                             movc            a,@a+dptr
045A F508       +1  7177                                             mov                     r8,a
045C A3         +1  7178                                             inc                     dptr
045D E4         +1  7179                                             clr                     a
045E 93         +1  7180                                             movc            a,@a+dptr
045F F509       +1  7181                                             mov                     r9,a
0461 A3         +1  7182                                             inc                     dptr
0462 E4         +1  7183                                             clr                     a
0463 93         +1  7184                                             movc            a,@a+dptr
0464 F50A       +1  7185                                             mov                     r10,a
0466 A3         +1  7186                                             inc                     dptr
0467 E4         +1  7187                                             clr                     a
0468 93         +1  7188                                             movc            a,@a+dptr
0469 F50B       +1  7189                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  7190                                             ret
                +1  7191      ;чтение памяти программ в r2..r5
                +1  7192     ;вх-r2,r3-адр яч памяти прогр
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   114

046C 8A83       +1  7193     rebyte2:        mov                     dph,r2
046E 8B82       +1  7194                                             mov                     dpl,r3
0470 E4         +1  7195                                             clr                     a
0471 93         +1  7196                                             movc            a,@a+dptr
0472 FA         +1  7197                                             mov                     r2,a
0473 A3         +1  7198                                             inc                     dptr
0474 E4         +1  7199                                             clr                     a
0475 93         +1  7200                                             movc            a,@a+dptr
0476 FB         +1  7201                                             mov                     r3,a
0477 A3         +1  7202                                             inc                     dptr
0478 E4         +1  7203                                             clr                     a
0479 93         +1  7204                                             movc            a,@a+dptr
047A FC         +1  7205                                             mov                     r4,a
047B A3         +1  7206                                             inc                     dptr
047C E4         +1  7207                                             clr                     a
047D 93         +1  7208                                             movc            a,@a+dptr
047E FD         +1  7209                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  7210                                             ret
                +1  7211      
                +1  7212     
                +1  7213      ;r7-количество байт
                +1  7214     ;dptr-адр ячейки для записи
                +1  7215     ;r1-адр ячейки  внешнего озу
                +1  7216     
0480 75A800     +1  7217     wrpage:  mov            IE,#00H
0483 75B601     +1  7218     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  7219                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  7220                      movx           a,@r1
048A F0         +1  7221                      movx           @dptr,a                         ;wr
048B 758F00     +1  7222                      mov            PSCTL,#0
048E 75B600     +1  7223                      mov            FLSCL,#00
0491 A3         +1  7224                     inc                     dptr
0492 09         +1  7225                     inc                     r1
0493 DFEE       +1  7226                     djnz            r7,WW5
0495 75A880     +1  7227                     mov             IE,#80H
0498 22         +1  7228                     ret
                +1  7229                             
                +1  7230     
                +1  7231     
                +1  7232                                                             
                +1  7233     
                +1  7234     
                +1  7235     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7236     ;чтение памяти программ во внешнее озу
                +1  7237     ;вх-r2,r3-адр яч памяти прогр
                +1  7238     ;r1- яч внешнее озу
0499 8A83       +1  7239     copyPP:         mov                     dph,r2
049B 8B82       +1  7240                                             mov                     dpl,r3
049D 7FFF       +1  7241                                             mov                     r7,#0ffh
049F E4         +1  7242     copy1:          clr                     a
04A0 93         +1  7243                                             movc            a,@a+dptr
04A1 F3         +1  7244                                             movx                    @r1,a
04A2 A3         +1  7245                                             inc                     dptr
04A3 09         +1  7246                                             inc                     r1
04A4 DFF9       +1  7247                                             djnz            r7,copy1
04A6 22         +1  7248                                             ret
                +1  7249     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7250     
                +1  7251                                     
                +1  7252     
                +1  7253     ;r8..r11->@r0..@r0+3
                +1  7254     ;r0-адр ячейки
                +1  7255     ;сохранить в ячейке озу
04A7 E508       +1  7256     savelte:        mov     a,ltemp
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   115

04A9 F6         +1  7257                                             mov     @r0,a
04AA 08         +1  7258                                             inc     r0
04AB E509       +1  7259                                             mov     a,ltemp+1
04AD F6         +1  7260                                             mov     @r0,a
04AE 08         +1  7261                                             inc     r0
04AF E50A       +1  7262                                             mov     a,ltemp+2
04B1 F6         +1  7263                                             mov     @r0,a
04B2 08         +1  7264                                             inc     r0
04B3 E50B       +1  7265                                             mov     a,ltemp+3
04B5 F6         +1  7266                                             mov     @r0,a
04B6 22         +1  7267                                             ret
                +1  7268     
                +1  7269     ;
                +1  7270     
                +1  7271     
                +1  7272     
                +1  7273     
                +1  7274     
                +1  7275                     
                +1  7276     
                +1  7277     
                +1  7278     
                +1  7279     
                +1  7280      
                    7281     
                    7282                                                   
                    7283     END
                                                                             
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   116

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   0375H   R   SEG=MAIN   812#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1382 1439 1464 1485 1489 1492 1493 1495 1602 1607 3484 3487 3520
                                           3608 3652 3655 3719 3723 3724 3725 3728 3918 3955 3956 3958 4032 4052 4143
                                           4147 4171 4174 4791 4934 4937 4961 4964
ABRET. . . . . . .  C ADDR   1D1FH   R   SEG=MAIN   4720 4722#
ABTOF. . . . . . .  C ADDR   03F3H   A      7088#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 644 691 699 707 715 717 737 1091 1102 1110 1187 1551 1733 1742 1751
                                           1760 1781 2154 2207 2229 2234 2238 2243 2246 2249 2252 2255 2426 2477 2523
                                           2534 2619 2628 2636 2776 2794 2819 2824 2828 2831 2834 2837 2840 2843 3136
                                           3209 3240 3257 3275 3292 3312 4092 4098 4135 4205 5363 5495 5573 5576 5833
                                           6485 6568 6585 6617 6655 6683 6945 6947 6965 7008 7054 7113
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   24BDH   R   SEG=MAIN   847 884 886 888 890 892 894 896 898 900 966 968 970 972 974 976
                                           978 980 982 985 987 989 991 993 995 997 999 1001 1003 1022 1024 1026 6074#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1438 1450 1454 1469 1494 1497 1498 1606 1610 3481 3485 3517 3521
                                           3605 3609 3654 3658 3727 3740 3928 3942 3944 3946 3957 3960 4042 4053 4148
                                           4175 4592 4611 4629 4692 4709 4936 4939 4963 4966 5285 5317
ADRBLOK. . . . . .  C ADDR   21A5H   R   SEG=MAIN   3193 3500 3626 5329#
AFTERK . . . . . .  C ADDR   0682H   R   SEG=MAIN   1119 1196#
AGE2 . . . . . . .  C ADDR   01F1H   R   SEG=MAIN   574# 577
AGE9 . . . . . . .  C ADDR   0803H   R   SEG=MAIN   1386# 1389
AGEON. . . . . . .  C ADDR   01FFH   R   SEG=MAIN   583# 585
ALESS0 . . . . . .  C ADDR   0938H   R   SEG=MAIN   1551 1572#
ALLSUM . . . . . .  C ADDR   0313H   R   SEG=MAIN   757# 792 809 825
ALMUL. . . . . . .  C ADDR   2404H   R   SEG=MAIN   5920#
ALTOF. . . . . . .  C ADDR   0402H   A      1085 1130 1181 1212 1220 1235 1246 1263 1276 1348 1843 1931 1992 2030
                                           3524 3614 4056 4151 4178 4304 7096 7104#
ALTOF1 . . . . . .  C ADDR   041EH   A      7113 7128# 7152
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05D2H   R   SEG=MAIN   1083 1099#
AN_T7. . . . . . .  C ADDR   10E0H   R   SEG=MAIN   2844# 2910 2919
AUTOKA . . . . . .  C ADDR   0B5FH   R   SEG=MAIN   1117 1960#
AVPGO. . . . . . .  C ADDR   078AH   R   SEG=MAIN   1324 1326#
AVTDEC1. . . . . .  C ADDR   0647H   R   SEG=MAIN   1152 1161#
AWTOF. . . . . . .  C ADDR   03FCH   A      7097#
B. . . . . . . . .  D ADDR   00F0H   A      122# 4447 4811 5923 5926 5928 5932 5936 5940 5944 5949 5953 5960 5964
                                           5968 5974 5978 5982 5988 6681 6682
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 449#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   117

BFORM. . . . . . .  C ADDR   20E2H   R   SEG=MAIN   5134 5139 5151# 5177
BIN30. . . . . . .  C ADDR   2220H   R   SEG=MAIN   5483# 5509
BIN31. . . . . . .  C ADDR   2224H   R   SEG=MAIN   5488# 5492
BIN32. . . . . . .  C ADDR   2234H   R   SEG=MAIN   5501# 5506
BIN41. . . . . . .  C ADDR   2245H   R   SEG=MAIN   5517# 5527
BINDEC . . . . . .  C ADDR   2214H   R   SEG=MAIN   1440 1496 1608 3656 3729 3959 4938 4965 5462#
BITAKT . . . . . .  B ADDR   0023H.2 A      349# 1688 1689 1692
BITAVP . . . . . .  B ADDR   0020H.5 A      320# 1282 1505 1680 2898 2899 2901
BITBON . . . . . .  B ADDR   0021H.2 A      327# 1713 1823 2264 2265 2271 5364
BITBUF . . . . . .  B ADDR   0021H.0 A      325#
BITEIZM. . . . . .  B ADDR   0022H.5 A      340# 1206 1696 2877 2889 3855 4366
BITIZM . . . . . .  B ADDR   0020H.4 A      319# 552 665 2235 2304 2389 2825 2878 2990 3011 3085 3113 3212 3294 3504
                                           3542 3563 3712 3814 3856 3903 3990 4065
BITKLB . . . . . .  B ADDR   0022H.2 A      337# 1256 1711 2240 2897 2904 4063 4354
BITMAS . . . . . .  B ADDR   0020H.1 A      316# 1033 1036 5117
BITMEM . . . . . .  B ADDR   0021H.3 A      328# 1592 2613 3116 3131 3211 3293 3505 3541 3711
BITMENU. . . . . .  B ADDR   0022H.1 A      336# 1591 2553 2879 3547 3562 3819 3857 3902 3989 4062
BITMIG . . . . . .  B ADDR   0023H.1 A      348# 2516 2688 2783 3054 3341 3454 4021 4127 4212 4877 4892 4908 4920
                                           4983 4990 4996 5002
BITNUL . . . . . .  B ADDR   0021H.7 A      332# 1665 2921 2922 2929
BITOLL . . . . . .  B ADDR   0022H.7 A      342# 620 1512 1589
BITPRD . . . . . .  B ADDR   0021H.1 A      326# 1822
BITRS. . . . . . .  B ADDR   0020H.3 A      318#
BITT2. . . . . . .  B ADDR   0022H.0 A      335# 1588 2390 2423 2936 3086
BITV19 . . . . . .  B ADDR   0022H.3 A      338# 506 510 2584 2587 2591 3803 3808 3885 3898 3995 3998 4002
BITVI11. . . . . .  B ADDR   0020H.6 A      321# 1283 2258 2260 2303 2989
BITVI31. . . . . .  B ADDR   0022H.6 A      341#
BITVICH. . . . . .  B ADDR   0022H.4 A      339# 1587 2259 2305 2315 2445 2953 3010
BITZNAK. . . . . .  B ADDR   0020H.0 A      315# 645 674
BITZNB . . . . . .  B ADDR   0023H.3 A      350# 4179 4718 4721
BITZUS . . . . . .  B ADDR   0020H.7 A      322# 1338 1528 1869 1872 2350
BLOKVV . . . . . .  C ADDR   1487H   R   SEG=MAIN   3408#
BLOKVVC. . . . . .  C ADDR   1491H   R   SEG=MAIN   3411 3414#
BMEM11 . . . . . .  B ADDR   0021H.4 A      329#
BOUT7. . . . . . .  C ADDR   1289H   R   SEG=MAIN   3094# 3096
BRET . . . . . . .  C ADDR   1B74H   R   SEG=MAIN   4387 4392 4396#
BUFDEC . . . . . .  C ADDR   096AH   R   SEG=MAIN   1613# 1618
BUFIND . . . . . .  D ADDR   0040H   A      298# 573 577 582 585 589 613 1385 1389 1455 1476 1497 1498 1499 1561 1566
                                           1611 1619 1621 1626 1663 1690 1693 1698 1712 1714 2086 2223 2491 2509 2525
                                           2527 2530 2683 2727 2746 2812 3037 3041 3067 3100 3106 3117 3185 3336 3380
                                           3409 3424 3425 3428 3429 3436 3437 3441 3456 3578 3585 3659 3667 3669 3674
                                           3730 3739 3741 3927 3960 3961 3964 4013 4041 4119 4162 4270 4445 4463 4591
                                           4610 4628 4691 4708 4719 4880 4895 4940 4959 4967 4987 5008 5284 5316
BUFON. . . . . . .  C ADDR   0D4BH   R   SEG=MAIN   2264 2271#
BUFR . . . . . . .  C ADDR   08A8H   R   SEG=MAIN   1478# 1483
BUFR2. . . . . . .  C ADDR   088AH   R   SEG=MAIN   1457# 1462
BUFR3. . . . . . .  C ADDR   0883H   R   SEG=MAIN   1448 1453#
BUFR30 . . . . . .  C ADDR   0886H   R   SEG=MAIN   1451 1455#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      6678# 6682
CELLBIT. . . . . .  D ADDR   0020H   A      314# 315 316 317 318 319 320 321 322
CELLBIT1 . . . . .  D ADDR   0021H   A      324# 325 326 327 328 329 332
CELLBIT2 . . . . .  D ADDR   0022H   A      334# 335 336 337 338 339 340 341 342
CELLBIT3 . . . . .  D ADDR   0023H   A      346# 347 348 349 350
CEXP . . . . . . .  C ADDR   01E2H   A      6655 6664#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   1C11H   R   SEG=MAIN   2930 4529#
CH1. . . . . . . .  C ADDR   1C31H   R   SEG=MAIN   2071 4540#
CH10 . . . . . . .  C ADDR   1C15H   R   SEG=MAIN   808 1047 3644 4530#
CH100. . . . . . .  C ADDR   1C29H   R   SEG=MAIN   756 1546 4535#
CH10000. . . . . .  C ADDR   1C25H   R   SEG=MAIN   4534#
CH150H . . . . . .  C ADDR   1C71H   R   SEG=MAIN   4556#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   118

CH2. . . . . . . .  C ADDR   1C2DH   R   SEG=MAIN   1042 4536#
CH20 . . . . . . .  C ADDR   1DE6H   R   SEG=MAIN   791 1052 4842#
CH2THO . . . . . .  C ADDR   1C51H   R   SEG=MAIN   1999 2037 4548#
CH320H . . . . . .  C ADDR   1C6DH   R   SEG=MAIN   4555# 5337
CH4. . . . . . . .  C ADDR   1C1DH   R   SEG=MAIN   1056 4532#
CH43 . . . . . . .  C ADDR   1672H   R   SEG=MAIN   3661# 3666
CH43_42. . . . . .  C ADDR   1704H   R   SEG=MAIN   3743# 3748
CH5. . . . . . . .  C ADDR   1C19H   R   SEG=MAIN   824 4531#
CH57 . . . . . . .  C ADDR   1DE2H   R   SEG=MAIN   4841#
CH954. . . . . . .  C ADDR   1C21H   R   SEG=MAIN   4533#
CHAIBL . . . . . .  C ADDR   134DH   R   SEG=MAIN   3187 3189#
CHAIPR . . . . . .  C ADDR   15C7H   R   SEG=MAIN   3580 3582#
CHANMA . . . . . .  C ADDR   0EDBH   R   SEG=MAIN   2523 2532#
CHANZ. . . . . . .  C ADDR   0EC2H   R   SEG=MAIN   2477 2521#
CHAVT. . . . . . .  D ADDR   0081H   A      364# 532 1108 1153 1161 2053 3815
CHBEFORE . . . . .  D ADDR   009BH   A      374# 554 753 767 786 803 819
CHBUF. . . . . . .  D ADDR   00CFH   A      396# 565 1808 1813 1851 1878 3539
CHCMP. . . . . . .  C ADDR   0CA5H   R   SEG=MAIN   657 1114 2180#
CHDEC. . . . . . .  C ADDR   0C05H   R   SEG=MAIN   664 1162 1173 2063#
CHDEL. . . . . . .  D ADDR   0083H   A      365# 1900 1945 1967 2012 2047
CHDELMO. . . . . .  C ADDR   0B47H   R   SEG=MAIN   1915 1945# 1950
CHIF . . . . . . .  C ADDR   1E2AH   R   SEG=MAIN   4884 4886#
CHIFB. . . . . . .  C ADDR   1E3EH   R   SEG=MAIN   4899 4902#
CHIFB1 . . . . . .  C ADDR   1E43H   R   SEG=MAIN   4901 4902 4904#
CHIND. . . . . . .  D ADDR   00ACH   A      380# 1297 1718
CHINKOR. . . . . .  D ADDR   0098H   A      363# 527 735 1100 1113 1155 1169 1172 1952
CHK. . . . . . . .  C ADDR   1C69H   R   SEG=MAIN   1257 4554#
CHKL . . . . . . .  D ADDR   003DH   A      305# 656 663 2368 2396 2438 2858 3120 3703 4068
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1030 1037 1060 5116
CHMASN . . . . . .  D ADDR   003FH   A      306# 742 751 787 804 820 836 1035 1037 1038
CHMINUS. . . . . .  C ADDR   218AH   R   SEG=MAIN   3206 3237 3254 3272 3289 5299# 5360
CHTADC . . . . . .  C ADDR   0C4FH   R   SEG=MAIN   2112#
CHTHO. . . . . . .  C ADDR   1C49H   R   SEG=MAIN   1131 1264 4313 4546#
CHTHOU . . . . . .  C ADDR   1CEAH   R   SEG=MAIN   4679#
CHZAP. . . . . . .  C ADDR   1C0DH   R   SEG=MAIN   1797 4528#
CH_1 . . . . . . .  C ADDR   1C39H   R   SEG=MAIN   557 1402 1425 1810 1815 1880 3615 4542#
CH_10. . . . . . .  C ADDR   1C61H   R   SEG=MAIN   1227 1408 1431 1856 4057 4552#
CH_10TH. . . . . .  C ADDR   1C5DH   R   SEG=MAIN   1319 4551#
CH_2 . . . . . . .  C ADDR   1C3DH   R   SEG=MAIN   1848 4543#
CH_200 . . . . . .  C ADDR   1C59H   R   SEG=MAIN   4550#
CH_220 . . . . . .  C ADDR   1C55H   R   SEG=MAIN   1277 4549#
CH_22T . . . . . .  C ADDR   1D28H   R   SEG=MAIN   1358 4727#
CH_250 . . . . . .  C ADDR   1C65H   R   SEG=MAIN   1201 4553#
CH_4 . . . . . . .  C ADDR   1C41H   R   SEG=MAIN   3618 4544#
CH_500 . . . . . .  C ADDR   1D24H   R   SEG=MAIN   1354 4726#
CH_953 . . . . . .  C ADDR   1C45H   R   SEG=MAIN   4545#
CH_B . . . . . . .  C ADDR   1D20H   R   SEG=MAIN   1370 4724#
CH_FL. . . . . . .  C ADDR   1D2CH   R   SEG=MAIN   1394 4728#
CH_MLN . . . . . .  C ADDR   1C35H   R   SEG=MAIN   4541#
CIKLWR . . . . . .  C ADDR   20B8H   R   SEG=MAIN   5122#
CKCON. . . . . . .  D ADDR   008EH   A      30# 467 498
CL4. . . . . . . .  C ADDR   1C83H   R   SEG=MAIN   4571# 4573
CL4N . . . . . . .  C ADDR   1C89H   R   SEG=MAIN   4580# 4582
CLE20. . . . . . .  C ADDR   16F1H   R   SEG=MAIN   3733# 3735
CLE256 . . . . . .  C ADDR   043EH   A      3891 4346 7160#
CLEAR. . . . . . .  C ADDR   220EH   R   SEG=MAIN   5440 5444# 5474
CLEAR4 . . . . . .  C ADDR   1C80H   R   SEG=MAIN   765 1335 1337 1465 1486 1525 1527 2297 2299 2915 2917 4569#
CLEARN . . . . . .  C ADDR   1C88H   R   SEG=MAIN   3482 3518 3606 3919 4033 4144 4172 4578#
CLMASSIX . . . . .  C ADDR   20A8H   R   SEG=MAIN   526 1333 1523 1956 2057 2295 2913 3084 5110#
CLMASV . . . . . .  C ADDR   078FH   R   SEG=MAIN   1328 1330#
CLMAX. . . . . . .  C ADDR   20ADH   R   SEG=MAIN   5112# 5115
CLR11. . . . . . .  C ADDR   220FH   R   SEG=MAIN   5446# 5448
CLRDEC . . . . . .  C ADDR   2208H   R   SEG=MAIN   5438#
CLRNUM . . . . . .  C ADDR   220CH   R   SEG=MAIN   5441# 5555
CLRVICH. . . . . .  C ADDR   11FEH   R   SEG=MAIN   3010# 3027
CNTR . . . . . . .  N NUMB   0006H   A      6351#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   119

CO02S. . . . . . .  C ADDR   1BF5H   R   SEG=MAIN   4512# 4516
CO05S. . . . . . .  C ADDR   1C02H   R   SEG=MAIN   4521# 4525
CO1S . . . . . . .  C ADDR   1BECH   R   SEG=MAIN   4506# 4506
CO2S . . . . . . .  C ADDR   1BE8H   R   SEG=MAIN   4504# 4508
COMPA1 . . . . . .  C ADDR   081FH   R   SEG=MAIN   1402# 1411
COMPA2 . . . . . .  C ADDR   0855H   R   SEG=MAIN   1425# 1434
COND . . . . . . .  C ADDR   211CH   R   SEG=MAIN   5206#
COPY1. . . . . . .  C ADDR   049FH   A      7242# 7247
COPYPP . . . . . .  C ADDR   0499H   A      3878 4325 7239#
COUNT. . . . . . .  C ADDR   1BCAH   R   SEG=MAIN   4478# 4478
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   1BD1H   R   SEG=MAIN   4484# 4484
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 472
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1553 1574
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1556 1578
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 473
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1805
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1802
DCOA . . . . . . .  C ADDR   2121H   R   SEG=MAIN   5210# 5212
DCOB . . . . . . .  C ADDR   2128H   R   SEG=MAIN   5214# 5232
DCOC . . . . . . .  C ADDR   2133H   R   SEG=MAIN   5224# 5229
DCOD . . . . . . .  C ADDR   2140H   R   SEG=MAIN   5231 5234#
DD . . . . . . . .  C ADDR   022BH   R   SEG=MAIN   611#
DDOUTF . . . . . .  C ADDR   1424H   R   SEG=MAIN   3176 3217 3322 3330# 3404
DDOUTFR. . . . . .  C ADDR   1331H   R   SEG=MAIN   3176# 3182
DEC30. . . . . . .  C ADDR   2261H   R   SEG=MAIN   5565# 5590
DEC31. . . . . . .  C ADDR   2266H   R   SEG=MAIN   5571# 5578
DEC32. . . . . . .  C ADDR   2276H   R   SEG=MAIN   5583# 5587
DECBIN . . . . . .  C ADDR   2254H   R   SEG=MAIN   3486 3522 3610 4054 4149 4176 5544#
DECSIZE. . . . . .  N NUMB   000AH   A      5419# 5439 5473 5500 5513 5516 5570
DECT2. . . . . . .  C ADDR   227FH   R   SEG=MAIN   5561 5593#
DEDPTR . . . . . .  C ADDR   24D4H   R   SEG=MAIN   6078 6082 6086 6092#
DENORM . . . . . .  C ADDR   0133H   A      6510# 6566
DGOTO7 . . . . . .  C ADDR   155DH   R   SEG=MAIN   3525# 3533
DIAP . . . . . . .  D ADDR   00AEH   A      382# 546 1323 1507 1625 2289 2321 2906 3673 3963 4367 4388 4642 4657 4808
                                           4870
DIINC. . . . . . .  C ADDR   0D69H   R   SEG=MAIN   2292 2295#
DIKDN. . . . . . .  C ADDR   1DBAH   R   SEG=MAIN   4810 4830#
DIKDW. . . . . . .  C ADDR   1CD4H   R   SEG=MAIN   4646 4667#
DIPAR. . . . . . .  C ADDR   1CE8H   R   SEG=MAIN   4677#
DIV1 . . . . . . .  C ADDR   02DDH   A      6847# 6906
DIV2 . . . . . . .  C ADDR   0320H   A      6865 6869 6873 6877 6892#
DIV3 . . . . . . .  C ADDR   030DH   A      6866 6870 6874 6878#
DIV9 . . . . . . .  C ADDR   0336H   A      6836 6838 6912#
DIVIDE . . . . . .  C ADDR   233FH   R   SEG=MAIN   5138 5779#
DONE . . . . . . .  C ADDR   22AEH   R   SEG=MAIN   5609 5620#
DONE1. . . . . . .  C ADDR   22ACH   R   SEG=MAIN   5612 5615 5618#
DOSH . . . . . . .  C ADDR   23C8H   R   SEG=MAIN   5854 5870#
DOSUB. . . . . . .  C ADDR   23B6H   R   SEG=MAIN   5838 5842 5846 5850 5851 5855#
DPH. . . . . . . .  D ADDR   0083H   A      19# 2805 3636 3638 3758 3763 4194 5070 5078 5345 5351 5371 5626 5662 5697
                                           5700 5712 5735 6097 6099 7173 7193 7239
DPL. . . . . . . .  D ADDR   0082H   A      18# 2804 3632 3634 3755 3766 4195 5071 5077 5342 5354 5375 5642 5678 5699
                                           5713 5716 5750 6094 6096 7174 7194 7240
DVIG0. . . . . . .  C ADDR   0A46H   R   SEG=MAIN   1754# 1756
DVIG1. . . . . . .  C ADDR   0A3BH   R   SEG=MAIN   1745# 1747
DVIG2. . . . . . .  C ADDR   0A30H   R   SEG=MAIN   1736# 1738
DVIG3. . . . . . .  C ADDR   0A24H   R   SEG=MAIN   1727# 1729
DVIG4. . . . . . .  C ADDR   0A52H   R   SEG=MAIN   1765# 1767
DVIG6. . . . . . .  C ADDR   0A71H   R   SEG=MAIN   1790# 1792
DVM. . . . . . . .  C ADDR   0A6FH   R   SEG=MAIN   1781 1789#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   120

EIE1 . . . . . . .  D ADDR   00E6H   A      112# 470
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 513 2084 2096 2205 2778 2793 4211
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1AD8H   R   SEG=MAIN   2895 4300#
ENDSDV . . . . . .  C ADDR   0A75H   R   SEG=MAIN   1787 1793#
ENDSUM . . . . . .  C ADDR   0560H   R   SEG=MAIN   848 901 1004 1029#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   0850H   R   SEG=MAIN   1405 1421#
EQU00. . . . . . .  C ADDR   086EH   R   SEG=MAIN   1423 1428 1437#
EQU1L. . . . . . .  C ADDR   0FEBH   R   SEG=MAIN   2694 2698#
EQU2L. . . . . . .  C ADDR   1470H   R   SEG=MAIN   3390 3395#
ERROR. . . . . . .  C ADDR   1ECEH   R   SEG=MAIN   3986 4278 4292 5006#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      6353#
EXP2 . . . . . . .  N NUMB   0001H   A      6355# 6532 6553
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   1CCDH   R   SEG=MAIN   4327 4656#
FINDKOEF . . . . .  C ADDR   1CBEH   R   SEG=MAIN   1127 1260 4641#
FINDMEM. . . . . .  C ADDR   0F65H   R   SEG=MAIN   2553 2613#
FINDR. . . . . . .  C ADDR   1E13H   R   SEG=MAIN   1491 3954 4870#
FINIS. . . . . . .  C ADDR   23F3H   R   SEG=MAIN   5798 5899#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      1352 6558# 6647
FLCMP. . . . . . .  C ADDR   01D6H   A      1203 1279 1321 1356 1360 1404 1427 1817 6652#
FLDIV. . . . . . .  C ADDR   02B7H   A      1133 1226 1266 1377 1396 1410 2001 2039 4311 6822#
FLMUL. . . . . . .  C ADDR   0203H   A      1094 1138 1192 1229 1271 1372 1433 1850 3620 4059 4315 6692#
FLOUT. . . . . . .  C ADDR   01E1H   A      6659 6662#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 7161 7167 7218 7223
FLSUB. . . . . . .  C ADDR   01D1H   A      1184 1812 1882 1997 2035 3617 6645#
FND. . . . . . . .  C ADDR   01F8H   A      6668 6671 6674 6677 6680#
FO1M . . . . . . .  C ADDR   20DFH   R   SEG=MAIN   5144 5148#
FO2M . . . . . . .  C ADDR   20E8H   R   SEG=MAIN   5151 5153#
FORM4. . . . . . .  C ADDR   20E9H   R   SEG=MAIN   5146 5152 5156#
FT1IZM . . . . . .  C ADDR   0E37H   R   SEG=MAIN   2433#
FTOL . . . . . . .  C ADDR   0343H   A      1139 1273 1380 3621 4316 4933 4960 6928#
FTOL1. . . . . . .  C ADDR   037CH   A      6941 6945 6969#
FTOL2. . . . . . .  C ADDR   039EH   A      6965 7002#
FTOL22 . . . . . .  C ADDR   03C4H   A      7005 7039#
FTOL23 . . . . . .  C ADDR   03A2H   A      7006# 7038
FTOL24 . . . . . .  C ADDR   03B5H   A      7008 7024#
FTOL25 . . . . . .  C ADDR   03C2H   A      7023 7038#
FTOL26 . . . . . .  C ADDR   03E4H   A      7054 7070#
FTOL3. . . . . . .  C ADDR   038AH   A      6968 6982#
FTOL33 . . . . . .  C ADDR   038EH   A      6986# 7000
FTOL4. . . . . . .  C ADDR   0371H   A      6947 6962#
FTOL9. . . . . . .  C ADDR   0381H   A      6975# 6985 7001 7069 7084
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   478# 479
GO23NO . . . . . .  C ADDR   13E9H   R   SEG=MAIN   3222 3299#
GO31L. . . . . . .  C ADDR   0FF1H   R   SEG=MAIN   2672 2703#
GO41L. . . . . . .  C ADDR   0FF6H   R   SEG=MAIN   2703 2705#
GOA2 . . . . . . .  C ADDR   0748H   R   SEG=MAIN   1281 1284# 1314
GOA3A2 . . . . . .  C ADDR   0752H   R   SEG=MAIN   1289#
GOCIKLE. . . . . .  C ADDR   0AF2H   R   SEG=MAIN   1824 1853 1862 1869# 1876 1883
GOFULL . . . . . .  C ADDR   141CH   R   SEG=MAIN   3305 3326#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   121

GOKAA2 . . . . . .  C ADDR   076DH   R   SEG=MAIN   1312#
GOKLB. . . . . . .  C ADDR   0D39H   R   SEG=MAIN   2240 2262#
GOOFF1 . . . . . .  C ADDR   1388H   R   SEG=MAIN   3231# 3240
GOOFF2 . . . . . .  C ADDR   13A0H   R   SEG=MAIN   3248# 3257
GOOFF3 . . . . . .  C ADDR   13B8H   R   SEG=MAIN   3266# 3275
GOOFF4 . . . . . .  C ADDR   13D0H   R   SEG=MAIN   3283# 3292
GOONIN . . . . . .  C ADDR   075FH   R   SEG=MAIN   1296# 1339 1513 1529
GOONIND. . . . . .  C ADDR   0941H   R   SEG=MAIN   1299 1579#
GOONOFF. . . . . .  C ADDR   1359H   R   SEG=MAIN   3200# 3209
GOONT. . . . . . .  C ADDR   0AB8H   R   SEG=MAIN   1827 1834#
GOPAROL. . . . . .  C ADDR   186FH   R   SEG=MAIN   3940 3948#
GOPART . . . . . .  C ADDR   02F1H   R   SEG=MAIN   737 740#
GOSK19 . . . . . .  C ADDR   0F3DH   R   SEG=MAIN   2584 2589#
GOTO7. . . . . . .  C ADDR   10E0H   R   SEG=MAIN   2857# 2927 2934 2970 2991 3014 3043 3055 3094 3098 3141 3150 3154
                                           3168 3215 3297 3351 3354 3365 3394 3397 3426 3438 3443 3469 3471 3506 3525
                                           3543 3591 3983 3993 4025 4076 4078 4094 4106 4163 4360
GOTOKD . . . . . .  C ADDR   05F4H   R   SEG=MAIN   1097 1121#
GOUT6. . . . . . .  C ADDR   0CEEH   R   SEG=MAIN   2230# 2258
GOVVLIST . . . . .  C ADDR   15EBH   R   SEG=MAIN   3574 3596#
GOZNAK . . . . . .  C ADDR   02A3H   R   SEG=MAIN   651 680#
HNOR11 . . . . . .  C ADDR   1209H   R   SEG=MAIN   2981 3018#
HNOR12 . . . . . .  C ADDR   11BFH   R   SEG=MAIN   2971 2975#
HNOT1. . . . . . .  C ADDR   1252H   R   SEG=MAIN   2948 3064#
HNOT2. . . . . . .  C ADDR   118DH   R   SEG=MAIN   2945#
HR12 . . . . . . .  C ADDR   11B5H   R   SEG=MAIN   2966 2971#
HVI1113. . . . . .  C ADDR   11AFH   R   SEG=MAIN   2969# 2974 2979
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 514 4258 7160 7168 7217 7227
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   1189H   R   SEG=MAIN   2940 2942#
IND. . . . . . . .  C ADDR   0C1DH   R   SEG=MAIN   578 586 611 668 1415 1419 1715 2084# 2282 3698 3749 3987 4274
                                           4280 4294 4357
INDA3. . . . . . .  C ADDR   0908H   R   SEG=MAIN   1544#
INDOLL . . . . . .  C ADDR   08DFH   R   SEG=MAIN   1505 1506 1510#
INIACP . . . . . .  C ADDR   1D30H   R   SEG=MAIN   617 3082 4734#
INNOT1_2 . . . . .  C ADDR   14CCH   R   SEG=MAIN   3435 3440#
INNOT3 . . . . . .  C ADDR   14BDH   R   SEG=MAIN   3427 3432#
INNOT6 . . . . . .  C ADDR   14B1H   R   SEG=MAIN   3423 3427#
INTERVA. . . . . .  D ADDR   00CDH   A      395# 1834 3488
INTMUL . . . . . .  C ADDR   0AD0H   R   SEG=MAIN   1850# 1858
INTN . . . . . . .  C ADDR   1546H   R   SEG=MAIN   3516#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   123AH   R   SEG=MAIN   3045#
IZMAN. . . . . . .  C ADDR   0DBAH   R   SEG=MAIN   2203 2342#
IZMFUN . . . . . .  C ADDR   0DC9H   R   SEG=MAIN   2283 2294 2301 2346 2349#
IZMPAT . . . . . .  C ADDR   0DCDH   R   SEG=MAIN   2256 2270 2272 2318 2353#
IZMT2. . . . . . .  C ADDR   0DDCH   R   SEG=MAIN   2369 2374#
IZMT3. . . . . . .  C ADDR   0DE7H   R   SEG=MAIN   2374 2380#
JFINIS . . . . . .  C ADDR   235AH   R   SEG=MAIN   5790 5798#
KD . . . . . . . .  C ADDR   1C4DH   R   SEG=MAIN   4547#
KEYB1. . . . . . .  C ADDR   0CC7H   R   SEG=MAIN   283 2204#
KEYB2. . . . . . .  C ADDR   1077H   R   SEG=MAIN   286 2792#
KFULL. . . . . . .  C ADDR   13F3H   R   SEG=MAIN   3169 3304#
KFULLR . . . . . .  C ADDR   1320H   R   SEG=MAIN   3164 3169#
KGO23. . . . . . .  C ADDR   1375H   R   SEG=MAIN   3163 3220#
KLEV1. . . . . . .  C ADDR   12FFH   R   SEG=MAIN   3133 3155#
KLEV2. . . . . . .  C ADDR   1304H   R   SEG=MAIN   3155 3157#
KLEV21 . . . . . .  C ADDR   1323H   R   SEG=MAIN   3161 3170#
KLEV22 . . . . . .  C ADDR   1309H   R   SEG=MAIN   3157 3161#
KLEV23 . . . . . .  C ADDR   1334H   R   SEG=MAIN   3170 3178#
KLMAS. . . . . . .  C ADDR   039EH   R   SEG=MAIN   769 835#
KNAVP. . . . . . .  C ADDR   1128H   R   SEG=MAIN   2837 2897#
KNIZM. . . . . . .  B ADDR   0023H.0 A      347# 1281 1506 1684 2320 2342 2343 2347
KNIZMON. . . . . .  C ADDR   0DC4H   R   SEG=MAIN   2342 2347#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   122

KNKMP. . . . . . .  C ADDR   1068H   R   SEG=MAIN   2787# 2831
KNLEFT . . . . . .  C ADDR   1138H   R   SEG=MAIN   2791 2904#
KNMEM. . . . . . .  C ADDR   12A7H   R   SEG=MAIN   2786 3113#
KNMENU . . . . . .  C ADDR   1102H   R   SEG=MAIN   2843 2877#
KNNUL. . . . . . .  C ADDR   1156H   R   SEG=MAIN   2790 2921#
KNOPT. . . . . . .  C ADDR   0DEFH   R   SEG=MAIN   2202 2388#
KNRAZR . . . . . .  C ADDR   0E04H   R   SEG=MAIN   2201 2402#
KNRIGHT. . . . . .  C ADDR   0D5FH   R   SEG=MAIN   2246 2287#
KNVICH . . . . . .  C ADDR   0D7BH   R   SEG=MAIN   2255 2303#
KOEFKD . . . . . .  D ADDR   00A0H   A      377# 563 4318 4328
KOEFKM . . . . . .  D ADDR   0094H   A      371# 561 1092 1190 2043
KOEFKP . . . . . .  D ADDR   0090H   A      370# 559 1089 1185 2005
KOMUL. . . . . . .  C ADDR   0712H   R   SEG=MAIN   1259 1263#
KOMULPZ. . . . . .  C ADDR   070CH   R   SEG=MAIN   1256 1260#
KONSTA . . . . . .  D ADDR   00BCH   A      390# 1368 4152 4931
KONSTB . . . . . .  D ADDR   00C0H   A      391# 1342 4183 4951
KON_B. . . . . . .  C ADDR   0EA6H   R   SEG=MAIN   2479 2498#
KOR0US . . . . . .  C ADDR   1B88H   R   SEG=MAIN   1913 4421#
KOR0_AN. . . . . .  D ADDR   0084H   A      367# 1182 1932 1995 2033
KORDEC1. . . . . .  C ADDR   065AH   R   SEG=MAIN   1167 1172#
KORDEC10 . . . . .  C ADDR   063DH   R   SEG=MAIN   1155#
KORNUL . . . . . .  C ADDR   0B27H   R   SEG=MAIN   1104 1900#
KVVOD0 . . . . . .  C ADDR   140FH   R   SEG=MAIN   3143 3312 3321#
LABEL43. . . . . .  C ADDR   15E2H   R   SEG=MAIN   3592# 3600
LABEL7 . . . . . .  C ADDR   16B7H   R   SEG=MAIN   3592 3703# 3715
LABELA . . . . . .  C ADDR   0278H   R   SEG=MAIN   654# 672 1873
LABELB . . . . . .  C ADDR   0A1DH   R   SEG=MAIN   1147 1532 1720# 1888 1892 1894
LABELC . . . . . .  C ADDR   0E04H   R   SEG=MAIN   2403#
LABELE . . . . . .  C ADDR   0DCDH   R   SEG=MAIN   2351 2367# 2408 2411 2415 2419
LABELF . . . . . .  C ADDR   0E23H   R   SEG=MAIN   2200 2422#
LABELH . . . . . .  C ADDR   1178H   R   SEG=MAIN   2789 2936#
LABELI . . . . . .  C ADDR   1958H   R   SEG=MAIN   2951 3003 3057 4089#
LABELI2. . . . . .  C ADDR   11EEH   R   SEG=MAIN   3003# 3004
LABELK . . . . . .  C ADDR   12C5H   R   SEG=MAIN   2950 3128#
LABELL . . . . . .  C ADDR   0FACH   R   SEG=MAIN   2551 2633 2642#
LABELL1. . . . . .  C ADDR   0EE3H   R   SEG=MAIN   2536# 2606 2710 2759
LABELN . . . . . .  C ADDR   1010H   R   SEG=MAIN   2607 2719#
LABELP . . . . . .  C ADDR   15B8H   R   SEG=MAIN   3529 3547 3574# 3772
LABELS . . . . . .  C ADDR   1589H   R   SEG=MAIN   3308 3547#
LABELS1. . . . . .  C ADDR   17E6H   R   SEG=MAIN   3836 3866#
LABELS13 . . . . .  C ADDR   18E1H   R   SEG=MAIN   3907 4005#
LABELS3. . . . . .  C ADDR   196BH   R   SEG=MAIN   4099#
LABELS4. . . . . .  C ADDR   1946H   R   SEG=MAIN   3906 4080#
LABL2. . . . . . .  C ADDR   0FD2H   R   SEG=MAIN   2675# 3173
LABM . . . . . . .  C ADDR   1476H   R   SEG=MAIN   3174 3400#
LADD . . . . . . .  C ADDR   249BH   R   SEG=MAIN   748 783 800 816 1800 6025#
LADDX. . . . . . .  C ADDR   24ACH   R   SEG=MAIN   6049#
LBTOF. . . . . . .  C ADDR   042DH   A      7139#
LCMP . . . . . . .  C ADDR   2299H   R   SEG=MAIN   2190 5175 5605#
LDC_LONG . . . . .  C ADDR   22AFH   R   SEG=MAIN   558 1258 1798 2000 2038 2931 5625#
LDC_LTEMP. . . . .  C ADDR   22D1H   R   SEG=MAIN   757 1043 1048 1053 1057 1132 1202 1228 1265 1278 1320 1355 1359
                                           1371 1395 1403 1409 1426 1432 1547 1811 1816 1849 1857 1881 2072 3616 3619
                                           3645 4058 4314 5338 5661#
LDX_LONG . . . . .  C ADDR   22F7H   R   SEG=MAIN   5696#
LDX_LTEMP. . . . .  C ADDR   231DH   R   SEG=MAIN   5734#
LEFCUR . . . . . .  C ADDR   14DBH   R   SEG=MAIN   3449# 3511 3527
LEFKL. . . . . . .  C ADDR   1142H   R   SEG=MAIN   2904 2910#
LEFMEM11 . . . . .  C ADDR   12CDH   R   SEG=MAIN   3134# 3156 3158
LEFT21 . . . . . .  C ADDR   143DH   R   SEG=MAIN   3347 3352#
LEFT_S . . . . . .  C ADDR   17E3H   R   SEG=MAIN   3865# 3868
LEFT_SK. . . . . .  C ADDR   18C8H   R   SEG=MAIN   3865 3995#
LEV220 . . . . . .  C ADDR   130CH   R   SEG=MAIN   3162# 3171
LEV2GO . . . . . .  C ADDR   1036H   R   SEG=MAIN   2718 2755#
LEVEL. . . . . . .  D ADDR   00B0H   A      384# 2274 2614 2644 3118 3132 3323
LI21 . . . . . . .  C ADDR   1244H   R   SEG=MAIN   3052 3054#
LI42_43. . . . . .  C ADDR   1651H   R   SEG=MAIN   3642# 3768
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   123

LIST_43. . . . . .  C ADDR   16C1H   R   SEG=MAIN   3594 3708#
LLDI2. . . . . . .  C ADDR   0DB3H   R   SEG=MAIN   2333 2337#
LLDI23 . . . . . .  C ADDR   0DA7H   R   SEG=MAIN   2325 2330#
LLDI3. . . . . . .  C ADDR   0DAEH   R   SEG=MAIN   2332 2334#
LLEV2. . . . . . .  C ADDR   0FFBH   R   SEG=MAIN   2674 2708#
LLMUL. . . . . . .  C ADDR   2404H   R   SEG=MAIN   5919#
LLSUB. . . . . . .  C ADDR   2489H   R   SEG=MAIN   6001#
LLTOF. . . . . . .  C ADDR   0432H   A      7145#
LMUL . . . . . . .  C ADDR   2404H   R   SEG=MAIN   5133 5339 5921#
LOA3_X . . . . . .  C ADDR   21E4H   R   SEG=MAIN   1830 5378#
LOAB12 . . . . . .  C ADDR   1D7FH   R   SEG=MAIN   3080 4775#
LOAD . . . . . . .  D ADDR   00B7H   A      388# 2391 2427 2938 3076 4444
LOADB. . . . . . .  C ADDR   1263H   R   SEG=MAIN   3071 3074# 3104 3110
LOADB2 . . . . . .  C ADDR   128CH   R   SEG=MAIN   3092 3096#
LOADCLE. . . . . .  C ADDR   12EBH   R   SEG=MAIN   3148# 3315
LOADKD . . . . . .  C ADDR   1D9CH   R   SEG=MAIN   4808#
LOADR2 . . . . . .  C ADDR   1D8EH   R   SEG=MAIN   3523 3611 4055 4150 4177 4791#
LOADT. . . . . . .  C ADDR   1BA3H   R   SEG=MAIN   2393 2433 2944 4444#
LOADUS . . . . . .  C ADDR   1B42H   R   SEG=MAIN   618 1331 1520 1944 2046 2300 2348 2890 2918 3083 4365#
LOBLOK . . . . . .  C ADDR   1448H   R   SEG=MAIN   3302 3359# 3367
LOCLE. . . . . . .  C ADDR   12E6H   R   SEG=MAIN   3137 3146#
LOD1 . . . . . . .  C ADDR   1BB2H   R   SEG=MAIN   4452# 4457
LODT . . . . . . .  C ADDR   1BBEH   R   SEG=MAIN   4464# 4469
LOIZMK . . . . . .  C ADDR   11C2H   R   SEG=MAIN   2976# 3008
LOKAME1. . . . . .  C ADDR   1748H   R   SEG=MAIN   3785#
LOLEVT . . . . . .  C ADDR   1BA5H   R   SEG=MAIN   2280 4445#
LOLIST . . . . . .  C ADDR   12DAH   R   SEG=MAIN   3139#
LOME1. . . . . . .  C ADDR   1A3EH   R   SEG=MAIN   4222# 4226 4229 4232 4235 4239 4242 4245 4248 4252
LOMENU . . . . . .  C ADDR   1A36H   R   SEG=MAIN   2566 2579 3785 3823 3846 4219#
LOOP . . . . . . .  C ADDR   0C8CH   R   SEG=MAIN   2153# 2154
LOOPS. . . . . . .  C ADDR   235DH   R   SEG=MAIN   5800# 5833
LOSPUS . . . . . .  C ADDR   1B7CH   R   SEG=MAIN   1914 4404#
LOTEXT . . . . . .  C ADDR   1BBAH   R   SEG=MAIN   1414 1418 1511 2311 2450 2458 2464 2470 2586 2590 2622 2631 2639
                                           2648 2881 2969 3034 3115 3140 3149 3153 3167 3327 3360 3416 3560 3584 3738
                                           3781 3802 3807 3842 3951 3997 4001 4160 4222 4356 4461# 5007
LOTP . . . . . . .  C ADDR   1DF2H   R   SEG=MAIN   4849# 4859 4862
LOTPUS . . . . . .  C ADDR   1DEAH   R   SEG=MAIN   3854 4399 4846#
LOU. . . . . . . .  C ADDR   0DB9H   R   SEG=MAIN   2320 2336 2340#
LOUIZM . . . . . .  C ADDR   0D96H   R   SEG=MAIN   2320# 2345 4396
LOUTF. . . . . . .  C ADDR   0FEEH   R   SEG=MAIN   2700# 2709 2716
LOVICH . . . . . .  C ADDR   11B8H   R   SEG=MAIN   2972# 3001 3022 4190
LOWR . . . . . . .  C ADDR   12F4H   R   SEG=MAIN   3146 3151#
LOWR1. . . . . . .  C ADDR   12F6H   R   SEG=MAIN   3152# 3319
LSUB . . . . . . .  C ADDR   2489H   R   SEG=MAIN   1144 1292 2073 6002#
LTEMP. . . . . . .  N NUMB   0008H   A      1060 1062 1063 1064 4681 4682 4683 4684 5185 5188 5191 5194 5237 5238
                                           5239 5240 5417# 5791 5792 5793 5794 5803 5807 5811 5815 5818 5819 5820
                                           5821 5822 5823 5824 5825 5826 5827 5828 5829 5832 5835 5840 5844 5848 5858
                                           5861 5864 5867 5883 5886 5887 5889 5890 5892 5893 5895 5900 5901 5902 5903
                                           5923 5928 5936 5944 5949 5960 5968 5974 5982 5988 6356 6357 6396 6401 6403
                                           6412 6413 6414 6415 6646 6654 6667 6670 6673 6676 7256 7259 7262 7265
LWR. . . . . . . .  C ADDR   20BAH   R   SEG=MAIN   5124# 5128
LWRX . . . . . . .  C ADDR   207EH   R   SEG=MAIN   5069# 5081
LWTOF. . . . . . .  C ADDR   042FH   A      7141#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   20D5H   R   SEG=MAIN   1601 3648 5132 5137 5142# 5174
MAIN . . . . . . .  C SEG    24E6H       REL=UNIT   237 294# 442
MANT1. . . . . . .  N NUMB   0002H   A      6354# 6381 6430 6431
MANT2. . . . . . .  N NUMB   0008H   A      6356# 6407 6408 6539 6541 6542 6544 6545 6547 6548 6550 6589 6590 6592
                                           6593 6595 6596 6598 6599 6603 6605 6608 6611 6709 6711 6712 6714 6715 6717
                                           6718 6720 6771 6773 6774 6776 6777 6779 6780 6782 6864 6868 6872 6876 6880
                                           6883 6886 6889
MARK0_8. . . . . .  C ADDR   0EADH   R   SEG=MAIN   2481 2499 2501#
MARKER . . . . . .  D ADDR   00B2H   A      386# 537 2222 2480 2490 2498 2508 2514 2682 2690 2726 2733 2745 2811 3012
                                           3029 3050 3213 3295 3335 3343 3361 3379 3386 3418 3455 3462 3502 3535 3586
                                           3602 3713 3824 3978 3991 4012 4019 4066 4099 4118 4125 4155 4186 4878 4893
                                           4910 4921 4979
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   124

MARLE. . . . . . .  C ADDR   1E44H   R   SEG=MAIN   3470 4907#
MARRI. . . . . . .  C ADDR   1E51H   R   SEG=MAIN   2753 4920#
MAS10. . . . . . .  C ADDR   03BDH   R   SEG=MAIN   837 850#
MAS20. . . . . . .  C ADDR   043DH   R   SEG=MAIN   850 905#
MAS4 . . . . . . .  C ADDR   0531H   R   SEG=MAIN   903 1006#
MAS5DIV. . . . . .  C ADDR   05A5H   R   SEG=MAIN   1044 1049 1054 1058 1066#
MASFULL. . . . . .  C ADDR   056CH   R   SEG=MAIN   1033 1037#
MASS0. . . . . . .  X ADDR   0100H   A      405 406# 838 843 872 880 954 962 1011 1018 5111
MASS1. . . . . . .  X ADDR   0104H   A      407# 846 869 883 951 965 1009 1021
MASS10 . . . . . .  X ADDR   0128H   A      416# 927 984
MASS11 . . . . . .  X ADDR   012CH   A      417# 924 986
MASS12 . . . . . .  X ADDR   0130H   A      418# 921 988
MASS13 . . . . . .  X ADDR   0134H   A      419# 918 990
MASS14 . . . . . .  X ADDR   0138H   A      420# 915 992
MASS15 . . . . . .  X ADDR   013CH   A      421# 912 994
MASS16 . . . . . .  X ADDR   0140H   A      422# 910 996
MASS17 . . . . . .  X ADDR   0144H   A      423# 908 998
MASS18 . . . . . .  X ADDR   0148H   A      424# 906 1000
MASS19 . . . . . .  X ADDR   014CH   A      425# 1002
MASS2. . . . . . .  X ADDR   0108H   A      408# 866 885 948 967 1007 1023
MASS3. . . . . . .  X ADDR   010CH   A      409# 863 887 945 969 1025
MASS4. . . . . . .  X ADDR   0110H   A      410# 860 889 942 971
MASS5. . . . . . .  X ADDR   0114H   A      411# 857 891 939 973
MASS6. . . . . . .  X ADDR   0118H   A      412# 855 893 937 975
MASS7. . . . . . .  X ADDR   011CH   A      413# 853 895 935 977
MASS8. . . . . . .  X ADDR   0120H   A      414# 851 897 933 979
MASS9. . . . . . .  X ADDR   0124H   A      415# 899 930 981
MASX5. . . . . . .  C ADDR   059BH   R   SEG=MAIN   1035 1060#
ME11_15DE. . . . .  C ADDR   1586H   R   SEG=MAIN   3545# 3557
ME11_15DEC . . . .  C ADDR   1747H   R   SEG=MAIN   3545 3784#
ME21_22. . . . . .  C ADDR   0FB6H   R   SEG=MAIN   2648# 2656
ME21_23. . . . . .  C ADDR   17A1H   R   SEG=MAIN   3571 3832#
ME21_23DEC . . . .  C ADDR   17BDH   R   SEG=MAIN   3839 3844#
MEAVP. . . . . . .  C ADDR   1133H   R   SEG=MAIN   2898 2901#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   518# 520
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   522# 525
MEM12NO. . . . . .  C ADDR   140AH   R   SEG=MAIN   3313 3317#
MENU12 . . . . . .  C ADDR   1A42H   R   SEG=MAIN   4220 4224#
MENU13 . . . . . .  C ADDR   1A4AH   R   SEG=MAIN   4224 4227#
MENU14 . . . . . .  C ADDR   1A52H   R   SEG=MAIN   4227 4230#
MENU15 . . . . . .  C ADDR   1A5AH   R   SEG=MAIN   4230 4233#
MENU21 . . . . . .  C ADDR   1A62H   R   SEG=MAIN   4233 4237#
MENU22 . . . . . .  C ADDR   1A6AH   R   SEG=MAIN   4237 4240#
MENU23 . . . . . .  C ADDR   1A72H   R   SEG=MAIN   4240 4243#
MENU31 . . . . . .  C ADDR   1A7AH   R   SEG=MAIN   4243 4246#
MENU41 . . . . . .  C ADDR   1A82H   R   SEG=MAIN   4246 4250#
MENUOFF. . . . . .  C ADDR   1116H   R   SEG=MAIN   2877 2886#
MENUON . . . . . .  C ADDR   15AAH   R   SEG=MAIN   3562#
ME_41. . . . . . .  C ADDR   1832H   R   SEG=MAIN   3866 3909#
MIDL . . . . . . .  C ADDR   2390H   R   SEG=MAIN   5795 5830#
MIGN . . . . . . .  C ADDR   1EB0H   R   SEG=MAIN   2085 4979#
MIGNN. . . . . . .  C ADDR   1EB8H   R   SEG=MAIN   4981 4986#
MLABL2 . . . . . .  C ADDR   1459H   R   SEG=MAIN   3328 3371# 3402 3595
MLABL2R. . . . . .  C ADDR   15E8H   R   SEG=MAIN   3595# 3598
MMM. . . . . . . .  C ADDR   0273H   R   SEG=MAIN   649#
MO220. . . . . . .  C ADDR   08D4H   R   SEG=MAIN   1159 1310 1505#
MO500I . . . . . .  C ADDR   0844H   R   SEG=MAIN   1361 1417#
MO500R . . . . . .  C ADDR   0838H   R   SEG=MAIN   1357 1413#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0F5FH   R   SEG=MAIN   2608# 2619 2628 2636
MOVE28 . . . . . .  C ADDR   2142H   R   SEG=MAIN   1134 1221 1267 1344 1363 1998 2036 4308 5237#
MOVE82 . . . . . .  C ADDR   1CEEH   R   SEG=MAIN   4681#
MOVEA3 . . . . . .  C ADDR   0941H   R   SEG=MAIN   1557 1582#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2482 2698 2738 3031 3301 3344 3352 3395 3421 3463 3589 3827 3980
                                           4022 4100 4128 4158 4914
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2478 2691 2695 2734 3032 3300 3348 3387 3391 3420 3467 3588 3826
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   125

                                           3981 4104 4157 4923
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      6706# 6749
MUP11. . . . . . .  C ADDR   0257H   A      6753# 6798
MUP2 . . . . . . .  C ADDR   0297H   A      6783 6797#
MUP3 . . . . . . .  C ADDR   026CH   A      6752 6768#
MVV11. . . . . . .  C ADDR   1443H   R   SEG=MAIN   3324 3357#
MVV12. . . . . . .  C ADDR   1455H   R   SEG=MAIN   3357 3366#
N12DELCH . . . . .  C ADDR   0C01H   R   SEG=MAIN   2051 2059#
N4DELCH. . . . . .  C ADDR   0BB2H   R   SEG=MAIN   1978 2016#
N8DELCH. . . . . .  C ADDR   0BEFH   R   SEG=MAIN   2016 2051#
NBIMENU. . . . . .  C ADDR   0F65H   R   SEG=MAIN   2612#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 3189 3414 3582 5329
NE05 . . . . . . .  C ADDR   0358H   A      6935 6937 6939 6942#
NELEM. . . . . . .  D ADDR   0037H   A      312# 3613 3718 3721
NEXIN. . . . . . .  C ADDR   0C27H   R   SEG=MAIN   2088# 2095
NMINUS . . . . . .  C ADDR   0677H   R   SEG=MAIN   1187 1191#
NMINUS3. . . . . .  C ADDR   05C5H   R   SEG=MAIN   1091 1093#
NNDELCH. . . . . .  C ADDR   0B72H   R   SEG=MAIN   1968 1978#
NNMEMB . . . . . .  C ADDR   1042H   R   SEG=MAIN   2610 2761#
NNNUL. . . . . . .  C ADDR   09BBH   R   SEG=MAIN   1665 1668#
NO . . . . . . . .  C ADDR   2378H   R   SEG=MAIN   5805 5809 5813 5817#
NO0KEY . . . . . .  C ADDR   0285H   R   SEG=MAIN   658 663#
NO11V6 . . . . . .  C ADDR   0E6CH   R   SEG=MAIN   2447 2461#
NO12V6 . . . . . .  C ADDR   0E79H   R   SEG=MAIN   2461 2467#
NO13V6 . . . . . .  C ADDR   0E86H   R   SEG=MAIN   2467 2475#
NO21P7 . . . . . .  C ADDR   19E1H   R   SEG=MAIN   4138 4168#
NO23RI . . . . . .  C ADDR   0F29H   R   SEG=MAIN   2577 2581#
NO2PARN. . . . . .  C ADDR   092DH   R   SEG=MAIN   1559 1565#
NO31N. . . . . . .  C ADDR   14FAH   R   SEG=MAIN   3476#
NO31RI . . . . . .  C ADDR   0F48H   R   SEG=MAIN   2583 2598#
NO3PARN. . . . . .  C ADDR   0923H   R   SEG=MAIN   1559# 1644
NO4DEL . . . . . .  C ADDR   0B4DH   R   SEG=MAIN   1918 1949#
NOAVK. . . . . . .  C ADDR   064CH   R   SEG=MAIN   1115 1164#
NOAVP. . . . . . .  C ADDR   0745H   R   SEG=MAIN   1283# 1322 1325
NOBAVP . . . . . .  C ADDR   09D8H   R   SEG=MAIN   1680 1684#
NOBEF99. . . . . .  C ADDR   032EH   R   SEG=MAIN   754 770# 789 806 822
NOBIT. . . . . . .  C ADDR   0245H   A      6721 6735#
NOBITIZM . . . . .  C ADDR   09DEH   R   SEG=MAIN   1416 1420 1500 1684 1687#
NOBL21 . . . . . .  C ADDR   0FBFH   R   SEG=MAIN   2645 2652#
NOBL22 . . . . . .  C ADDR   0FC9H   R   SEG=MAIN   2652 2672#
NOBUF. . . . . . .  C ADDR   0A13H   R   SEG=MAIN   1713 1715#
NOBUF0 . . . . . .  C ADDR   0B02H   R   SEG=MAIN   1821 1878#
NOCHI0 . . . . . .  C ADDR   0904H   R   SEG=MAIN   1311 1531#
NOCHN10. . . . . .  C ADDR   0588H   R   SEG=MAIN   1046 1051#
NOCHN2 . . . . . .  C ADDR   057DH   R   SEG=MAIN   1041 1046#
NOCHN20. . . . . .  C ADDR   0593H   R   SEG=MAIN   1051 1056#
NODI2. . . . . . .  C ADDR   08EAH   R   SEG=MAIN   1508 1515#
NODI6. . . . . . .  C ADDR   1144H   R   SEG=MAIN   2908 2912#
NODI8. . . . . . .  C ADDR   098FH   R   SEG=MAIN   1628 1634#
NODI8K . . . . . .  C ADDR   189CH   R   SEG=MAIN   3966 3971#
NODI8_43 . . . . .  C ADDR   1697H   R   SEG=MAIN   3676 3682#
NODI9. . . . . . .  C ADDR   08EFH   R   SEG=MAIN   1517 1520#
NODI9_43 . . . . .  C ADDR   16A2H   R   SEG=MAIN   3682 3690#
NODIS9 . . . . . .  C ADDR   09A1H   R   SEG=MAIN   1634 1647#
NODISK9. . . . . .  C ADDR   18A4H   R   SEG=MAIN   3970 3971 3978#
NOENDBL. . . . . .  C ADDR   21D9H   R   SEG=MAIN   5363 5366#
NOEQU1 . . . . . .  C ADDR   1027H   R   SEG=MAIN   2737 2741#
NOEQU2 . . . . . .  C ADDR   14F4H   R   SEG=MAIN   3466 3470#
NOFIZM . . . . . .  C ADDR   0E4AH   R   SEG=MAIN   2423 2445#
NOFT1. . . . . . .  C ADDR   0E36H   R   SEG=MAIN   2428 2432#
NOFZ . . . . . . .  C ADDR   0AFDH   R   SEG=MAIN   1869 1873#
NOH37. . . . . . .  C ADDR   11CFH   R   SEG=MAIN   2965 2986# 2995
NOHNOT1. . . . . .  C ADDR   129CH   R   SEG=MAIN   3066 3105#
NOHNOT2. . . . . .  C ADDR   1294H   R   SEG=MAIN   3099# 3105
NOKLB. . . . . . .  C ADDR   0A0DH   R   SEG=MAIN   1711 1713#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   126

NOKORR . . . . . .  C ADDR   05DBH   R   SEG=MAIN   1102 1105#
NOLAH. . . . . . .  C ADDR   1199H   R   SEG=MAIN   2936 2953#
NOLI_43. . . . . .  C ADDR   1715H   R   SEG=MAIN   3708 3752#
NOM31. . . . . . .  C ADDR   14D2H   R   SEG=MAIN   3400 3445#
NOM32. . . . . . .  C ADDR   1535H   R   SEG=MAIN   3445 3509#
NOM33. . . . . . .  C ADDR   1563H   R   SEG=MAIN   3509 3529#
NOMARL . . . . . .  C ADDR   1980H   R   SEG=MAIN   4102 4108 4112#
NOME11 . . . . . .  C ADDR   13FAH   R   SEG=MAIN   3310#
NOMEM11. . . . . .  C ADDR   0F80H   R   SEG=MAIN   2615 2625#
NOMEM12. . . . . .  C ADDR   0F96H   R   SEG=MAIN   2625 2633#
NOMEMK . . . . . .  C ADDR   13F7H   R   SEG=MAIN   3126 3308#
NON1C. . . . . . .  C ADDR   0E15H   R   SEG=MAIN   2409 2413#
NONULAVT . . . . .  C ADDR   0631H   R   SEG=MAIN   1110 1149#
NONULDEL . . . . .  C ADDR   0B34H   R   SEG=MAIN   1901 1917#
NOP3_0 . . . . . .  C ADDR   0908H   R   SEG=MAIN   1537#
NOPART1. . . . . .  C ADDR   0332H   R   SEG=MAIN   743 777#
NOPART2. . . . . .  C ADDR   0352H   R   SEG=MAIN   777 796#
NOPART3. . . . . .  C ADDR   0372H   R   SEG=MAIN   796 811#
NOPART4. . . . . .  C ADDR   0392H   R   SEG=MAIN   811 828#
NOPLUS . . . . . .  C ADDR   0ED5H   R   SEG=MAIN   2526 2529#
NOPOIN7. . . . . .  C ADDR   1997H   R   SEG=MAIN   4098 4133#
NOPOINT. . . . . .  C ADDR   1963H   R   SEG=MAIN   4092 4096#
NOR11. . . . . . .  C ADDR   0EE9H   R   SEG=MAIN   2453 2540#
NOR13. . . . . . .  C ADDR   0E5FH   R   SEG=MAIN   2455#
NORDN. . . . . . .  C ADDR   00F6H   A      6442# 6475
NORDN1 . . . . . .  C ADDR   0107H   A      6444 6458#
NORIG2 . . . . . .  C ADDR   1004H   R   SEG=MAIN   2705 2713#
NORIM6 . . . . . .  C ADDR   1042H   R   SEG=MAIN   2765#
NORIME . . . . . .  C ADDR   0F0FH   R   SEG=MAIN   2564 2568#
NORIME1. . . . . .  C ADDR   0F09H   R   SEG=MAIN   2566# 2569 2582
NORM1. . . . . . .  C ADDR   00F0H   A      6437# 6634 6811 6913 7130
NORR11 . . . . . .  C ADDR   11E1H   R   SEG=MAIN   2997#
NORR12 . . . . . .  C ADDR   11F1H   R   SEG=MAIN   2997 3004# 3018
NORUP. . . . . . .  C ADDR   0119H   A      6441 6478#
NORUP1 . . . . . .  C ADDR   011EH   A      6483# 6501
NORUP2 . . . . . .  C ADDR   0132H   A      6485 6502#
NORVICH. . . . . .  C ADDR   0A16H   R   SEG=MAIN   1643 1716#
NOSUB. . . . . . .  C ADDR   23B3H   R   SEG=MAIN   5839 5843 5847 5852#
NOT1IN . . . . . .  C ADDR   0B12H   R   SEG=MAIN   1645 1886#
NOT1_7 . . . . . .  C ADDR   10EFH   R   SEG=MAIN   2859 2866#
NOT2IN . . . . . .  C ADDR   0B1AH   R   SEG=MAIN   1886 1890#
NOT2_7 . . . . . .  C ADDR   10FAH   R   SEG=MAIN   2866 2871#
NOT3IN . . . . . .  C ADDR   0B22H   R   SEG=MAIN   1890 1893#
NOTAKT . . . . . .  C ADDR   09E8H   R   SEG=MAIN   1688 1692#
NOTE21 . . . . . .  C ADDR   06CEH   R   SEG=MAIN   1208 1231#
NOTE22 . . . . . .  C ADDR   06E9H   R   SEG=MAIN   1231 1243#
NOTESTIZM. . . . .  C ADDR   0701H   R   SEG=MAIN   1206 1255#
NOTT1. . . . . . .  C ADDR   0ADAH   R   SEG=MAIN   1846 1855#
NOTT2. . . . . . .  C ADDR   0AE5H   R   SEG=MAIN   1855 1860#
NOTT5. . . . . . .  C ADDR   0AEAH   R   SEG=MAIN   1860 1864#
NOT_1. . . . . . .  C ADDR   0E1CH   R   SEG=MAIN   2413 2418#
NOT_10 . . . . . .  C ADDR   0E1CH   R   SEG=MAIN   2417#
NOVIR. . . . . . .  C ADDR   0EF1H   R   SEG=MAIN   2444 2553#
NOVIR1 . . . . . .  C ADDR   0E47H   R   SEG=MAIN   2444# 2445
NOZZMI . . . . . .  C ADDR   097FH   R   SEG=MAIN   1623 1625#
NOZZMI43 . . . . .  C ADDR   1687H   R   SEG=MAIN   3671 3673#
NSEC01 . . . . . .  C ADDR   09C4H   R   SEG=MAIN   1669 1672#
NSEC1. . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1672 1675#
NSEC10 . . . . . .  C ADDR   09D0H   R   SEG=MAIN   1671 1674 1675 1679#
NUERR. . . . . . .  D ADDR   0039H   A      310# 3985 4277 4291 5008
NULAVT . . . . . .  C ADDR   0B5FH   R   SEG=MAIN   1966#
NUMSIZE. . . . . .  N NUMB   0004H   A      5420# 5442 5480 5487 5562 5582
OBOARD . . . . . .  C ADDR   22E9H   R   SEG=MAIN   5663 5677#
OBOARD1. . . . . .  C ADDR   2331H   R   SEG=MAIN   5736 5749#
OK1. . . . . . . .  C ADDR   0186H   A      6568 6583#
OK2. . . . . . . .  C ADDR   01A0H   A      6585 6600#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   127

OK3. . . . . . . .  C ADDR   01C4H   A      6617 6633#
ONBOAR1. . . . . .  C ADDR   230FH   R   SEG=MAIN   5698 5715#
ONBOARD. . . . . .  C ADDR   22C3H   R   SEG=MAIN   5627 5641#
ONMEM11. . . . . .  C ADDR   12B8H   R   SEG=MAIN   2885 2900 2902 3120# 3561 3567 3782 3786 3791 3805 3810 3829 3843
                                           3847 3858
ONMEM12. . . . . .  C ADDR   17C4H   R   SEG=MAIN   3848# 3851 3870
ONMEM13. . . . . .  C ADDR   1943H   R   SEG=MAIN   4023 4078# 4082 4084
ONMIG. . . . . . .  C ADDR   1EC6H   R   SEG=MAIN   4990 4999#
ONVICH . . . . . .  C ADDR   0D8EH   R   SEG=MAIN   2303 2315#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 481
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 474 478
OUT43. . . . . . .  C ADDR   16AEH   R   SEG=MAIN   3698#
OUT6 . . . . . . .  C ADDR   1042H   R   SEG=MAIN   2199 2262 2373 2378 2383 2400 2430 2435 2442 2567 2580 2588 2592
                                           2766#
OUT7 . . . . . . .  C ADDR   1A0FH   R   SEG=MAIN   2787 2788 2863 2870 2874 2891 2941 2946 3124 3175 3431 3700 3707
                                           3751 3820 3904 3999 4003 4073 4087 4130 4135 4165 4193#
OUTA . . . . . . .  C ADDR   1E5EH   R   SEG=MAIN   3036 4931#
OUTA2. . . . . . .  C ADDR   1E78H   R   SEG=MAIN   4942# 4947
OUTB . . . . . . .  C ADDR   1E81H   R   SEG=MAIN   4161 4951#
OUTB2. . . . . . .  C ADDR   1EA7H   R   SEG=MAIN   4969# 4974
OUTB3. . . . . . .  C ADDR   1E92H   R   SEG=MAIN   4955 4960#
OUTF . . . . . . .  C ADDR   0E3DH   R   SEG=MAIN   2426 2438# 2451 2459 2465 2471 2496 2519 2528 2531 2538 2608 2623
                                           2632 2640 2650 2697 2700 2740 2754 2757 3848
OUTFL. . . . . . .  C ADDR   0EE6H   R   SEG=MAIN   2534 2538#
OUTMA. . . . . . .  C ADDR   0EBFH   R   SEG=MAIN   2517 2519#
OUTMENU. . . . . .  C ADDR   178AH   R   SEG=MAIN   3819#
OUTR . . . . . . .  C ADDR   089BH   R   SEG=MAIN   1446 1469#
OUTR5. . . . . . .  C ADDR   08B7H   R   SEG=MAIN   1467 1488#
OUTSKO . . . . . .  C ADDR   1825H   R   SEG=MAIN   3900 3902#
OUTSKO1. . . . . .  C ADDR   1822H   R   SEG=MAIN   3898 3901#
OUTVIR . . . . . .  C ADDR   0D32H   R   SEG=MAIN   2229 2258#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 5619
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 2088 2092
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 452
P1 . . . . . . . .  D ADDR   0090H   A      32# 621 622 2101 2103 2106 2109 2113 2115 2116 2168 2170 2172 4748 4755
                                           5267 5270 5272 5275
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 453
P2 . . . . . . . .  D ADDR   00A0H   A      47# 2134 2138 2147
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 454
P3 . . . . . . . .  D ADDR   00B0H   A      62# 463 2133 2135 2137 2143 2144 2145 2148 2149 2228 2230 2232 2233 2236
                                           2237 2241 2242 2244 2245 2247 2248 2250 2251 2253 2254 2424 2425 2475 2476
                                           2521 2522 2532 2533 2561 2562 2575 2576 2602 2603 2604 2605 2617 2618 2626
                                           2627 2634 2635 2673 2674 2708 2709 2717 2718 2755 2756 2782 2818 2820 2822
                                           2823 2826 2827 2829 2830 2832 2833 2835 2836 2838 2839 2841 2842 2937 2939
                                           2964 2965 2986 2987 2998 2999 3005 3006 3019 3020 3064 3065 3134 3135 3162
                                           3163 3179 3180 3181 3182 3220 3221 3310 3311 3321 3322 3401 3402 3403 3404
                                           3446 3447 3476 3477 3510 3511 3512 3513 3530 3531 3532 3533 3554 3555 3597
                                           3598 3599 3600 3709 3710 3774 3775 3837 3838 3850 3851 3867 3868 3869 3870
                                           3910 3911 3912 3913 4081 4082 4083 4084 4090 4091 4096 4097 4133 4134 4209
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2779 2781 4206 4208
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 456
P4 . . . . . . . .  D ADDR   0084H   A      20# 2327 2329 4374 4377 4393 4395 4851
P5 . . . . . . . .  D ADDR   0085H   A      21# 543 551 1969 1974 2009 2011 2337 2339 4382 4385 4415 4418 4855
P6 . . . . . . . .  D ADDR   0086H   A      22# 623 625 629 631
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 457
PACK1. . . . . . .  C ADDR   00DEH   A      6420# 6635 6812 6914 7131
PARERR . . . . . .  C ADDR   18B1H   R   SEG=MAIN   3942 3944 3946 3985#
PARN . . . . . . .  D ADDR   00AFH   A      383# 548 1658 2404 3089
PAROL. . . . . . .  D ADDR   00A8H   A      379#
PART . . . . . . .  D ADDR   009AH   A      373# 544 741 1080 1122 1149 1164 1668 1717 1845 1865 2367 2405 2857 3074
                                           3088 3422 4386 4775
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   128

PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 450
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 451
PCON . . . . . . .  D ADDR   0087H   A      23# 497
POIN3. . . . . . .  C ADDR   1996H   R   SEG=MAIN   4131# 4166
POINA. . . . . . .  C ADDR   19DCH   R   SEG=MAIN   4129 4165#
POINA1 . . . . . .  C ADDR   197BH   R   SEG=MAIN   4101 4108#
POINA2 . . . . . .  C ADDR   1975H   R   SEG=MAIN   4104# 4109
POZB . . . . . . .  C ADDR   19FFH   R   SEG=MAIN   4179 4183#
PROD . . . . . . .  N NUMB   000CH   A      6357# 6701 6702 6703 6704 6724 6725 6726 6728 6729 6731 6732 6734 6756
                                           6758 6759 6761 6762 6764 6765 6767 6786 6787 6788 6790 6791 6793 6794 6796
                                           6807 6808 6809 6810 6831 6832 6833 6834 6850 6852 6853 6855 6856 6858 6859
                                           6861 6891 6908 6909 6910 6911
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 7162 7166 7219 7222
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2208 2775 2795 4204 5176 5178 6092
                                           6100
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0D3CH   R   SEG=MAIN   2252 2264#
QUES . . . . . . .  C ADDR   132EH   R   SEG=MAIN   3175# 3180
R10. . . . . . . .  N NUMB   000AH   A      437# 654 1111 1366 1374 3945 4823 7185
R11. . . . . . . .  N NUMB   000BH   A      438# 655 1112 1367 1373 4827 7189
R8 . . . . . . . .  N NUMB   0008H   A      435# 504 1364 1376 2188 3799 3941 4815 7177
R9 . . . . . . . .  N NUMB   0009H   A      436# 1365 1375 2189 3943 4819 7181
RAFTERK. . . . . .  C ADDR   05F1H   R   SEG=MAIN   1119# 1125
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   1372H   R   SEG=MAIN   3217# 3221
RE1. . . . . . . .  C ADDR   0C95H   R   SEG=MAIN   2168# 2174
RE11_7 . . . . . .  C ADDR   06AFH   R   SEG=MAIN   1219# 1242 1253
RE4BYTE. . . . . .  C ADDR   0454H   A      503 3798 3939 7173#
REA3_X . . . . . .  C ADDR   21F6H   R   SEG=MAIN   3643 5395#
REACP. . . . . . .  D ADDR   0077H   A      304# 636 638 640 642 682 698 706 714 723 730 745 780 797 813 829 1983
                                           1985 1987 1989 2021 2023 2025 2027
READ . . . . . . .  C ADDR   0C93H   R   SEG=MAIN   635 637 639 2167#
READYACP . . . . .  C ADDR   02E9H   R   SEG=MAIN   724 734#
READ_X2. . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2142# 2153
REBYTE . . . . . .  C ADDR   023EH   R   SEG=MAIN   620# 665 771 1947 1957 1976 2014 2049 2058 2060
REBYTE2. . . . . .  C ADDR   046CH   A      1128 1211 1219 1234 1245 1261 7193#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 458
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   1125H   R   SEG=MAIN   2895# 2897
RESAR2 . . . . . .  C ADDR   214EH   R   SEG=MAIN   746 781 798 814 830 842 878 960 1016 1137 1180 1269 1286 1343
                                           1346 1369 1392 1545 1599 1809 1879 1921 2924 4302 4310 4329 4932 4952
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   129

                                           5245# 5379
RESAR8 . . . . . .  C ADDR   210CH   R   SEG=MAIN   1093 1143 1183 1191 1291 1996 2034 5184#
RESA_HL. . . . . .  C ADDR   21DAH   R   SEG=MAIN   1829 5369#
REZAM. . . . . . .  D ADDR   008CH   A      369# 2031
REZAP. . . . . . .  D ADDR   0088H   A      368# 1993
REZMUL . . . . . .  C ADDR   065FH   R   SEG=MAIN   1157 1171 1178#
REZ_A. . . . . . .  D ADDR   0062H   A      358# 759 831 841 877 959 1015 1920
REZ_A0 . . . . . .  D ADDR   006AH   A      360# 1142 1290 1336 1526 2298 2916 2925 2932
REZ_A1 . . . . . .  D ADDR   0066H   A      359# 1074 1140 1179 1274 1285 1312 1345
REZ_A2 . . . . . .  D ADDR   007BH   A      361# 1287
REZ_A3 . . . . . .  D ADDR   009CH   A      375# 1145 1293 1544 1598 1722 2923 4301 5378 5409
REZ_AK . . . . . .  D ADDR   00A4H   A      378# 4060 4309
REZ_AME. . . . . .  D ADDR   005EH   A      356# 1086 1095 1136 1193 1268
REZ_DEL. . . . . .  D ADDR   00C5H   A      393# 761
REZ_R. . . . . . .  D ADDR   00C9H   A      394# 1378 1391
RGOTO7 . . . . . .  C ADDR   14CFH   R   SEG=MAIN   3443# 3477 3513
RHNOR11. . . . . .  C ADDR   11C9H   R   SEG=MAIN   2963 2975 2981#
RHNOT1 . . . . . .  C ADDR   1190H   R   SEG=MAIN   2939 2948#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0F12H   R   SEG=MAIN   2559 2571#
RI6. . . . . . . .  C ADDR   0F0CH   R   SEG=MAIN   2562 2567# 2576 2601 2605
RIGBLO . . . . . .  C ADDR   0FCCH   R   SEG=MAIN   2673# 2704 2706
RIGBLOK. . . . . .  C ADDR   100AH   R   SEG=MAIN   2717#
RIGHT2 . . . . . .  C ADDR   0D56H   R   SEG=MAIN   2275 2279#
RIGHT3 . . . . . .  C ADDR   0D5AH   R   SEG=MAIN   2277 2282#
RIKN . . . . . . .  C ADDR   0E98H   R   SEG=MAIN   2482# 2500
RIZMAN . . . . . .  C ADDR   0CC4H   R   SEG=MAIN   2203# 2238
RI_31. . . . . . .  C ADDR   0F2CH   R   SEG=MAIN   2574 2583#
RKNLEFT. . . . . .  C ADDR   1074H   R   SEG=MAIN   2791# 2834
RKNMEM . . . . . .  C ADDR   1065H   R   SEG=MAIN   2786# 2840
RKNNUL . . . . . .  C ADDR   1071H   R   SEG=MAIN   2790# 2828
RKNOPT . . . . . .  C ADDR   0CC1H   R   SEG=MAIN   2202# 2249
RKNRAZR. . . . . .  C ADDR   0CBEH   R   SEG=MAIN   2201# 2243
RKVVOD0. . . . . .  C ADDR   12E3H   R   SEG=MAIN   3136 3143#
RLABELF. . . . . .  C ADDR   0CBBH   R   SEG=MAIN   2200# 2235
RLABELH. . . . . .  C ADDR   106EH   R   SEG=MAIN   2789# 2825
RLABELI. . . . . .  C ADDR   1196H   R   SEG=MAIN   2951#
RLABELK. . . . . .  C ADDR   1193H   R   SEG=MAIN   2950# 2953
RLABELL. . . . . .  C ADDR   0EEEH   R   SEG=MAIN   2551#
RLABELL1 . . . . .  C ADDR   103FH   R   SEG=MAIN   2756 2759#
RLABELN. . . . . .  C ADDR   0F5CH   R   SEG=MAIN   2603 2607#
RLABELP. . . . . .  C ADDR   172EH   R   SEG=MAIN   3772# 3775
RLABELS13. . . . .  C ADDR   182FH   R   SEG=MAIN   3907# 3911
RLABELS4 . . . . .  C ADDR   182CH   R   SEG=MAIN   3906# 3909
RLABL2 . . . . . .  C ADDR   1328H   R   SEG=MAIN   3173#
RLABM. . . . . . .  C ADDR   132BH   R   SEG=MAIN   3174# 3178
RLEFCUR. . . . . .  C ADDR   1560H   R   SEG=MAIN   3527# 3531
RLER . . . . . . .  C ADDR   1E50H   R   SEG=MAIN   4915 4917#
RLIST_43 . . . . .  C ADDR   15E5H   R   SEG=MAIN   3594# 3596
RMAS4. . . . . . .  C ADDR   043AH   R   SEG=MAIN   903# 905
RME21_23 . . . . .  C ADDR   15B5H   R   SEG=MAIN   3552 3571#
RMO220 . . . . . .  C ADDR   0644H   R   SEG=MAIN   1159# 1204
RNNMEMB. . . . . .  C ADDR   0F62H   R   SEG=MAIN   2610# 2613
RNO3PARN . . . . .  C ADDR   099CH   R   SEG=MAIN   1644# 1659
RNOCHI0. . . . . .  C ADDR   076AH   R   SEG=MAIN   1298 1311#
RNOH37 . . . . . .  C ADDR   11DFH   R   SEG=MAIN   2995# 2999 3006 3020
RNOMEMK. . . . . .  C ADDR   12C2H   R   SEG=MAIN   3126# 3131
RNOR11 . . . . . .  C ADDR   0E5CH   R   SEG=MAIN   2453# 2455
RNORVICH . . . . .  C ADDR   099AH   R   SEG=MAIN   1587 1588 1643#
RNOT1IN. . . . . .  C ADDR   099EH   R   SEG=MAIN   1645# 1719
ROUT6. . . . . . .  C ADDR   0CB8H   R   SEG=MAIN   2199# 2234
ROUT7. . . . . . .  C ADDR   106BH   R   SEG=MAIN   2788# 2819 2824
ROUTF. . . . . . .  C ADDR   11DCH   R   SEG=MAIN   2991# 3065
RR0. . . . . . . .  N NUMB   0000H   A      428# 2209 2774 2796 4203
RR1. . . . . . . .  N NUMB   0001H   A      429# 2210 2773 2797 4202
RR2. . . . . . . .  N NUMB   0002H   A      431# 1213 1225 1236 1247 2069 2211 2772 2798 3622 3630 4201
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   130

RR3. . . . . . . .  N NUMB   0003H   A      432# 1214 1224 1237 1248 2070 2212 2771 2799 3623 3629 4200
RR4. . . . . . . .  N NUMB   0004H   A      1215 1223 1238 1249 2213 2770 2800 3624 3628 4199 5421# 5478 5499 5515
                                           5559 5581
RR5. . . . . . . .  N NUMB   0005H   A      1216 1222 1239 1250 2214 2769 2801 3625 3627 4198 5422# 5479 5486 5493
                                           5560 5569
RR6. . . . . . . .  N NUMB   0006H   A      430# 2215 2768 2802 4197
RR7. . . . . . . .  N NUMB   0007H   A      433# 2216 2767 2803 4196
RRIR . . . . . . .  C ADDR   1E5DH   R   SEG=MAIN   4926 4928#
RRMO220. . . . . .  C ADDR   0767H   R   SEG=MAIN   1280 1310#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0936H   R   SEG=MAIN   1571# 1589 1591 1592
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 488 2892
RTIZMRI. . . . . .  C ADDR   0E20H   R   SEG=MAIN   2421#
RVVIZKO. . . . . .  C ADDR   11CBH   R   SEG=MAIN   2983# 2988
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2226 2495 2513 2687 2731 2751 2815 3340 3384 3460 4017 4123 4991
                                           4999
SAVEIR2. . . . . .  C ADDR   2090H   R   SEG=MAIN   844 881 963 1019 5084#
SAVELTE. . . . . .  C ADDR   04A7H   A      7256#
SAVEN_BL . . . . .  D ADDR   00D3H   A      397# 3631 3753 5350 5369
SAVER2 . . . . . .  C ADDR   209CH   R   SEG=MAIN   560 562 564 566 750 760 762 785 802 818 832 1075 1087 1096 1141
                                           1146 1194 1275 1288 1294 1313 1379 1383 1603 1814 1852 1933 1994 2006 2032
                                           2044 2926 2933 3653 4061 4153 4184 4319 4935 4962 5098# 5410
SAVE_HL. . . . . .  C ADDR   21C3H   R   SEG=MAIN   1832 3501 5350#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 4259 4265
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 496 4260 4264 4267 4268 4289
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   0C3DH   R   SEG=MAIN   2101# 2108
SDV1 . . . . . . .  C ADDR   0C51H   R   SEG=MAIN   2113# 2119
SDVIG0 . . . . . .  C ADDR   02CAH   R   SEG=MAIN   710# 712
SDVIG1 . . . . . .  C ADDR   02BFH   R   SEG=MAIN   702# 704
SDVIG2 . . . . . .  C ADDR   02B4H   R   SEG=MAIN   694# 696
SDVIG3 . . . . . .  C ADDR   02A8H   R   SEG=MAIN   685# 687
SDVIG4 . . . . . .  C ADDR   02D9H   R   SEG=MAIN   720# 722
SDVIG6 . . . . . .  C ADDR   02E3H   R   SEG=MAIN   727# 729
SDVM . . . . . . .  C ADDR   02E1H   R   SEG=MAIN   717 726#
SEEGOON. . . . . .  C ADDR   09A4H   R   SEG=MAIN   1633 1641 1649#
SEEIND . . . . . .  C ADDR   09B2H   R   SEG=MAIN   1563 1570 1571 1662#
SEE_L43. . . . . .  C ADDR   16A5H   R   SEG=MAIN   3681 3689 3692#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      6352# 6373 6374 6399 6400 6424 6567 6584 6805 6845
SKOR19 . . . . . .  C ADDR   1773H   R   SEG=MAIN   3800 3806#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   124CH   R   SEG=MAIN   3060# 3075
SP . . . . . . . .  D ADDR   0081H   A      17# 449
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 494
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 493
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 2090
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   131

SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   1807H   R   SEG=MAIN   3885 3887#
SS1. . . . . . . .  C ADDR   1BDFH   R   SEG=MAIN   4496# 4498
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      387# 747 749 764 782 784 799 801 815 817 1334 1524 2296 2914
SUMT2. . . . . . .  C ADDR   0335H   R   SEG=MAIN   738 779#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   1D71H   R   SEG=MAIN   4766# 4776
TABN . . . . . . .  C ADDR   1E09H   R   SEG=MAIN   4868# 4872
TABT11 . . . . . .  C ADDR   1B9DH   R   SEG=MAIN   4435# 4848
TABT7. . . . . . .  C ADDR   1BA1H   R   SEG=MAIN   4439# 4861
TABT9. . . . . . .  C ADDR   1B9FH   R   SEG=MAIN   4437# 4858
TABUS. . . . . . .  C ADDR   1B89H   R   SEG=MAIN   4371 4424#
TAKTIND. . . . . .  C ADDR   09EDH   R   SEG=MAIN   1691 1694#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 485 486 500
TE22 . . . . . . .  C ADDR   1DFCH   R   SEG=MAIN   4847 4857#
TE23 . . . . . . .  C ADDR   1E04H   R   SEG=MAIN   4857 4861#
TEAEQU0. . . . . .  C ADDR   1F1EH   R   SEG=MAIN   3033 5022#
TEAVK. . . . . . .  C ADDR   1F5AH   R   SEG=MAIN   4231 5029#
TEBEQU0. . . . . .  C ADDR   1F28H   R   SEG=MAIN   4159 5023#
TEBL . . . . . . .  C ADDR   200EH   R   SEG=MAIN   2647 3166 5051#
TEBL0. . . . . . .  C ADDR   2018H   R   SEG=MAIN   3359 5052#
TECH . . . . . . .  C ADDR   2022H   R   SEG=MAIN   3583 3737 5053#
TECLE. . . . . . .  C ADDR   1FD3H   R   SEG=MAIN   2638 3114 3148 5045#
TEEND. . . . . . .  C ADDR   2072H   R   SEG=MAIN   4355 5062#
TEERR. . . . . . .  C ADDR   2068H   R   SEG=MAIN   5006 5061#
TEFULL . . . . . .  C ADDR   1FFAH   R   SEG=MAIN   2653 3326 5049#
TEINT. . . . . . .  C ADDR   2004H   R   SEG=MAIN   3415 5050#
TEIZMK . . . . . .  C ADDR   1FB5H   R   SEG=MAIN   2449 2457 2977 5042#
TEKALIB. . . . . .  C ADDR   1F64H   R   SEG=MAIN   3559 4234 5030#
TEKD . . . . . . .  C ADDR   1FABH   R   SEG=MAIN   3950 5041#
TELIST . . . . . .  C ADDR   1FEFH   R   SEG=MAIN   2630 3139 5048#
TEMAX. . . . . . .  C ADDR   2040H   R   SEG=MAIN   5056#
TEMEM. . . . . . .  C ADDR   1FDDH   R   SEG=MAIN   5046#
TEMENU . . . . . .  C ADDR   1F32H   R   SEG=MAIN   5024#
TEMID. . . . . . .  C ADDR   204AH   R   SEG=MAIN   5057#
TEMIN. . . . . . .  C ADDR   2036H   R   SEG=MAIN   5055#
TEMUL. . . . . . .  C ADDR   071EH   R   SEG=MAIN   1230 1267#
TENMIN . . . . . .  C ADDR   1C75H   R   SEG=MAIN   1154 1156 1170 4558#
TEOLI. . . . . . .  C ADDR   2054H   R   SEG=MAIN   1417 5059#
TEOLL. . . . . . .  C ADDR   1FC9H   R   SEG=MAIN   1510 5044#
TEOLR. . . . . . .  C ADDR   205EH   R   SEG=MAIN   1413 5060#
TEOUT. . . . . . .  C ADDR   1FBFH   R   SEG=MAIN   2463 2542 2968 5043#
TEPAR. . . . . . .  C ADDR   1FA1H   R   SEG=MAIN   4251 5040#
TES19_2. . . . . .  C ADDR   1F97H   R   SEG=MAIN   509 2589 3806 4000 5038#
TES57_6. . . . . .  C ADDR   1F8DH   R   SEG=MAIN   2585 3801 3996 4247 5037#
TESKOR . . . . . .  C ADDR   1F50H   R   SEG=MAIN   4228 5028#
TEST01 . . . . . .  C ADDR   1A93H   R   SEG=MAIN   4264# 4287
TEST02 . . . . . .  C ADDR   1AC2H   R   SEG=MAIN   4284 4286#
TEST04 . . . . . .  C ADDR   1AA3H   R   SEG=MAIN   4271# 4273
TEST1. . . . . . .  C ADDR   1A89H   R   SEG=MAIN   4259# 4275 4296
TEST2. . . . . . .  C ADDR   1ABBH   R   SEG=MAIN   4264 4283#
TEST22 . . . . . .  C ADDR   17DCH   R   SEG=MAIN   3852 3859#
TEST23 . . . . . .  C ADDR   17E1H   R   SEG=MAIN   3859 3862#
TEST3. . . . . . .  C ADDR   1AADH   R   SEG=MAIN   4266 4276#
TEST4. . . . . . .  C ADDR   1A9BH   R   SEG=MAIN   4267# 4282
TEST5. . . . . . .  C ADDR   1AC5H   R   SEG=MAIN   4285 4288#
TEST7I . . . . . .  C ADDR   0A05H   R   SEG=MAIN   1704 1707#
TEST9I . . . . . .  C ADDR   09FEH   R   SEG=MAIN   1699 1704#
TESTAT . . . . . .  C ADDR   202CH   R   SEG=MAIN   5054#
TESTRS . . . . . .  C ADDR   1A87H   R   SEG=MAIN   3790 4257#
TESTS. . . . . . .  C ADDR   17D0H   R   SEG=MAIN   3854# 3861 3864
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   132

TETE11 . . . . . .  C ADDR   1F6FH   R   SEG=MAIN   3780 4238 5032#
TETE7. . . . . . .  C ADDR   1F83H   R   SEG=MAIN   3841 4244 5034#
TETE9. . . . . . .  C ADDR   1F79H   R   SEG=MAIN   4241 5033#
TETESI . . . . . .  C ADDR   1F3CH   R   SEG=MAIN   2880 4221 5026#
TETESR . . . . . .  C ADDR   1F46H   R   SEG=MAIN   4225 5027#
TEVICH . . . . . .  C ADDR   1F14H   R   SEG=MAIN   2310 2469 2973 5021#
TEWR . . . . . . .  C ADDR   1FE5H   R   SEG=MAIN   2621 3152 5047#
TEXTT. . . . . . .  C ADDR   1ED8H   R   SEG=MAIN   4451 5012#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 468
TH1. . . . . . . .  D ADDR   008DH   A      29# 507 511 3899 3901
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   0C61H   R   SEG=MAIN   2122#
TIM1 . . . . . . .  C ADDR   0C63H   R   SEG=MAIN   2123# 2123
TIM2 . . . . . . .  C ADDR   0C66H   R   SEG=MAIN   2104 2107 2114 2118 2126# 2169 2173 5271 5273
TIM3 . . . . . . .  C ADDR   0C68H   R   SEG=MAIN   2127# 2127
TIZMRI . . . . . .  C ADDR   0D4FH   R   SEG=MAIN   2274# 2421
TL0. . . . . . . .  D ADDR   008AH   A      26# 469
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1249H   R   SEG=MAIN   3045 3057#
TMOD . . . . . . .  D ADDR   0089H   A      25# 466 499
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 483
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 482
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1757H   R   SEG=MAIN   3788 3793#
TOME14 . . . . . .  C ADDR   177EH   R   SEG=MAIN   3793 3813#
TOME15 . . . . . .  C ADDR   178FH   R   SEG=MAIN   3813 3822#
TOME21 . . . . . .  C ADDR   174EH   R   SEG=MAIN   3778 3788#
TOSK19 . . . . . .  C ADDR   18D6H   R   SEG=MAIN   3995 4000#
TOUTF. . . . . . .  C ADDR   11CDH   R   SEG=MAIN   2984# 2984 2987
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 2091
UNPACK1. . . . . .  C ADDR   009EH   A      6370# 6564 6698 6828 6942
UNPACK2. . . . . .  C ADDR   00BAH   A      6395# 6565 6699 6829
UP1. . . . . . . .  C ADDR   0138H   A      6515# 6532
UP2. . . . . . . .  C ADDR   014BH   A      6535# 6553
UP2A . . . . . . .  C ADDR   0161H   A      6514 6551#
UPA. . . . . . . .  C ADDR   1CA4H   R   SEG=MAIN   4613# 4619
UPA1 . . . . . . .  C ADDR   1CB4H   R   SEG=MAIN   4631# 4637
UPA2 . . . . . . .  C ADDR   1C94H   R   SEG=MAIN   4594# 4600
UPAA . . . . . . .  C ADDR   219BH   R   SEG=MAIN   5319# 5325
UPAA4. . . . . . .  C ADDR   1CFDH   R   SEG=MAIN   4694# 4700
UPAB . . . . . . .  C ADDR   1D0DH   R   SEG=MAIN   4711# 4717
UPAK . . . . . . .  C ADDR   1C9EH   R   SEG=MAIN   4610#
UPAK1. . . . . . .  C ADDR   2175H   R   SEG=MAIN   5284#
UPAK2. . . . . . .  C ADDR   1C8EH   R   SEG=MAIN   4591#
UPAK3. . . . . . .  C ADDR   1CAEH   R   SEG=MAIN   3519 3607 4628#
UPAK4. . . . . . .  C ADDR   2195H   R   SEG=MAIN   3483 5316#
UPAKA. . . . . . .  C ADDR   1CF7H   R   SEG=MAIN   4145 4691#
UPAKB. . . . . . .  C ADDR   1D07H   R   SEG=MAIN   4173 4708#
UPAV1. . . . . . .  C ADDR   184EH   R   SEG=MAIN   3930# 3936
UPAV2. . . . . . .  C ADDR   1905H   R   SEG=MAIN   4044# 4050
UPK1 . . . . . . .  C ADDR   2187H   R   SEG=MAIN   5292 5295#
UPK2 . . . . . . .  C ADDR   2188H   R   SEG=MAIN   5294 5296#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   133

VICHR. . . . . . .  D ADDR   00B1H   A      385# 1207 1697 2307 2316 2446 2555 2563 2883 2887 2962 3024 3548 3556
                                           3565 3773 3832 3948 4136 4188 4219 4846
VIG0 . . . . . . .  C ADDR   0A5BH   R   SEG=MAIN   1773# 1775
VIG4 . . . . . . .  C ADDR   0A69H   R   SEG=MAIN   1784# 1786
VIOUT. . . . . . .  C ADDR   0DFAH   R   SEG=MAIN   2313 2396#
VODM11_15. . . . .  C ADDR   1583H   R   SEG=MAIN   3544# 3555
VOLUME . . . . . .  D ADDR   00D5H   A      398# 2266 3496 5359 5361
VV21_23. . . . . .  C ADDR   17C7H   R   SEG=MAIN   3838 3850#
VVCHIBL. . . . . .  C ADDR   1E2BH   R   SEG=MAIN   2536 4888#
VVCHIBL4 . . . . .  C ADDR   1E2DH   R   SEG=MAIN   4891#
VVCHIF . . . . . .  C ADDR   1E1BH   R   SEG=MAIN   4877# 4890
VVINTE . . . . . .  C ADDR   14FAH   R   SEG=MAIN   3447 3475#
VVIZKO . . . . . .  C ADDR   1216H   R   SEG=MAIN   2983 3024#
VVKALI52 . . . . .  C ADDR   18F8H   R   SEG=MAIN   4028# 4080
VVMENU . . . . . .  C ADDR   18AEH   R   SEG=MAIN   3913 3983#
VVOD43 . . . . . .  C ADDR   16D4H   R   SEG=MAIN   3710 3717#
VVODM11_15 . . . .  C ADDR   1731H   R   SEG=MAIN   3544 3773#
VVRR6. . . . . . .  C ADDR   0E54H   R   SEG=MAIN   2449#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 464 465
WORK . . . . . . .  D ADDR   00B8H   A      389# 1398 1400 1406 1422 1429 1445 1466 1471 1487 1724 1799 3195 3205
                                           3207 3226 3236 3238 3243 3253 3255 3261 3271 3273 3278 3288 3290 4261 4283
WR1. . . . . . . .  C ADDR   2162H   R   SEG=MAIN   5267# 5274
WRITE. . . . . . .  C ADDR   215FH   R   SEG=MAIN   633 4737 4739 4741 4743 4745 4747 4750 4752 4754 4757 4759 4761
                                           5265#
WRITED_X1. . . . .  C ADDR   0C6CH   R   SEG=MAIN   2132#
WRITE_X1 . . . . .  C ADDR   0C6BH   R   SEG=MAIN   2131#
WRPAGE . . . . . .  C ADDR   0480H   A      3896 4351 7217#
WW5. . . . . . . .  C ADDR   0483H   A      7218# 7226
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 460 492
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 461
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 462 491
XCIKLWR. . . . . .  C ADDR   207CH   R   SEG=MAIN   839 852 854 856 859 862 865 868 871 874 907 909 911 914 917 920
                                           923 926 929 931 934 936 938 941 944 947 950 953 956 1008 1010 1012 5067#
XTEMP. . . . . . .  N NUMB   000CH   A      5418# 5782 5783 5784 5785 5871 5873 5874 5876 5877 5879 5880 5882 5904
                                           5905 5906 5907 5925 5926 5930 5931 5934 5938 5939 5942 5946 5947 5951 5952
                                           5954 5955 5956 5958 5962 5963 5965 5966 5970 5971 5976 5977 5979 5980 5984
                                           5985 5990 5992 5993 5994
YBNUL. . . . . . .  C ADDR   1168H   R   SEG=MAIN   2921 2929#
YES. . . . . . . .  C ADDR   2396H   R   SEG=MAIN   5804 5808 5812 5816 5834# 5897
YESAVP . . . . . .  C ADDR   0774H   R   SEG=MAIN   1282 1316#
YESBUF . . . . . .  C ADDR   0AAFH   R   SEG=MAIN   1823 1828#
YESIND . . . . . .  C ADDR   0A07H   R   SEG=MAIN   1696 1703 1706 1710#
YESPRD . . . . . .  C ADDR   0AADH   R   SEG=MAIN   1822 1826#
YESTEST. . . . . .  C ADDR   1B78H   R   SEG=MAIN   4366 4398#
YESTT5 . . . . . .  C ADDR   0B00H   R   SEG=MAIN   1868 1876#
YESVICH. . . . . .  C ADDR   07A3H   R   SEG=MAIN   1283 1341#
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   508 512#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   505 509#
Z01S . . . . . . .  C ADDR   1BF7H   R   SEG=MAIN   4513# 4515
Z05S . . . . . . .  C ADDR   1C04H   R   SEG=MAIN   4522# 4524
Z100 . . . . . . .  C ADDR   1BC8H   R   SEG=MAIN   4477# 4479
Z15. . . . . . . .  C ADDR   1BD6H   R   SEG=MAIN   4489# 4491
Z1S. . . . . . . .  C ADDR   1BEAH   R   SEG=MAIN   4505# 4507
ZAPADC . . . . . .  C ADDR   0C3BH   R   SEG=MAIN   2100#
ZCMP . . . . . . .  C ADDR   20FEH   R   SEG=MAIN   5174#
ZDIV . . . . . . .  C ADDR   20CBH   R   SEG=MAIN   758 1067 1548 3646 5137#
ZER1 . . . . . . .  C ADDR   00B3H   A      6380 6384# 6439 6482
ZER2 . . . . . . .  C ADDR   00D4H   A      6406 6410#
ZMUL . . . . . . .  C ADDR   20C1H   R   SEG=MAIN   5132#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      317# 1623 3671 5145 5148 5151
ZNPLUS . . . . . .  C ADDR   029BH   R   SEG=MAIN   644 674#
ZZ . . . . . . . .  C ADDR   1BD8H   R   SEG=MAIN   4490# 4490
Z_01S. . . . . . .  C ADDR   1BF3H   R   SEG=MAIN   669 670 671 2219 2808 4281 4295 4511# 5003
Z_05S. . . . . . .  C ADDR   1C00H   R   SEG=MAIN   1870 1871 2649 4520#
Z_100. . . . . . .  C ADDR   1BC6H   R   SEG=MAIN   4476#
A51 MACRO ASSEMBLER  AMP26                                                                01/30/2007 16:55:51 PAGE   134

Z_15 . . . . . . .  C ADDR   1BD4H   R   SEG=MAIN   612 4488#
Z_1MS. . . . . . .  C ADDR   1BDDH   R   SEG=MAIN   4288 4495#
Z_1S . . . . . . .  C ADDR   1BE6H   R   SEG=MAIN   579 587 3590 3699 3750 3988 4072 4358 4359 4503#
Z_5. . . . . . . .  C ADDR   1BCFH   R   SEG=MAIN   2136 2146 4483#
Z_9. . . . . . . .  C ADDR   215AH   R   SEG=MAIN   2093 5259#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
