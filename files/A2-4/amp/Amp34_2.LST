A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp34_2.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp34_2.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                          jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 020000   F      262                                                     jmp             inter2  ;IE.5,IP.5(ET2,PT2)
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
                     320     ;;;;;
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     6

  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               358     bitprer         BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
                     383     ;FLOAT
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     7

  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
  0E00               438     chbuf1  xdata 0e00h;счетчик буфера 1
                     439     ;xdata  0e04
                     440     
  0000               441                             rr0             EQU 00
  0001               442                     rr1       equ   01
  0006               443                     rr6   equ 06
  0002               444                     rr2       equ   02
  0003               445                     rr3       equ   03
  0007               446                     rr7   equ 07
                     447     
  0008               448                     r8   equ 08
  0009               449                     r9        equ   09
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     8

  000A               450                     r10       equ   10
  000B               451                     r11   equ 11
                     452     
                     453                     
                     454        
----                 455                  rseg     Main          ; Switch to this code segment.
                     456     
                     457                  using    0              ; Specify register bank for the following
                     458     
0100                 459     org 100h
                     460     ;$EJECT
                     461     
0100 7581E0          462     begin:     mov  sp, #0e0h
0103 75E900          463                                             mov             PCA0L,#00;=0x00;
0106 75D900          464                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          465                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          466                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          467                                             mov     P2MDOUT,#00;=0x00;
                     468             
0112 75A73F          469             mov     P3MDOUT,#3fh;
0115 75B5FF          470             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          471             mov     REF0CN,#03h;=0x03;
                     472             
011B 75E114          473             mov     XBR0,#14h;= 0x14;
011E 75E200          474             mov     XBR1,#00; =0x00;
0121 75E300          475             mov XBR2,#00;=0x00;
0124 75B0C0          476             mov     P3,#0c0h
0127 75FFDE          477             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          478             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          479             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          480             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          481             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          482             mov     TL0,#0f9h;=0xf9; 
0139 75E680          483             mov     EIE1,#80h;=0x80;
                     484     
013C 75D480          485             mov     DAC0CN,#80h;=0x80;
013F 75D780          486             mov     DAC1CN,#80h;=0x80;
0142 75B167          487             mov     OSCXCN,#67h;=0x67;
                     488     
                     489      
                     490     
0145 E5B1            491     gener:     mov a, oscxcn
0147 B4E7FB          492                cjne a,#11100111b,gener
                     493                            
014A 75B288          494             mov     OSCICN,#88h;=0x84;
014D 75CA00          495         mov TMR2RLL,#0;=0;
0150 75CBD1          496         mov TMR2RLH,#0d1h;=0xd1;
                     497       
0153 D28E            498                     setb  TCON.6                    ;регистр управления
0155 D28C            499                      setb tcon.4
                     500     
0157 75EF00          501             mov     RSTSRC,#0;=00   ;//источники сброса 
                     502     
                     503             
015A 75E340          504          mov        XBR2,#40h
015D 75E10E          505              mov    XBR0,#0eh;06h;16h
0160 75F803          506             mov             SPI0CN,#03
0163 759D31          507             mov             spi0ckr,#31H;;;;;;;;#04
                     508     ;установка скорости
0166 759850          509                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          510                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          511                                             mov             CKCON,#00010000b;TIM=1
016F 758920          512                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE     9

0172 758840          513                                             mov             TCON,#01000000b;счетчик запущен
                     514     ;;;;;
0175 75D900          515                                             mov             PCA0MD,#00              ;PCA 
0178 75DA00          516                                             mov             PCA0CPM0,#00000000b;00000110b;01000
                             010b;
017B 75EA00          517                                             mov             PCA0CPL0,#00
017E 75FA80          518                                             mov             PCA0CPH0,#80h
0181 75D840          519                                             mov             PCA0CN,#40h
0184 75C800          520                                             mov             T2CON,#00
                     521     ;;;;;;
0187 7A50            522                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0189 7B2C            523                                             mov                     r3,#2ch
018B 120454          524                                             call            re4byte                 ;502ch 1 ba
                             it skor
018E E508            525                                             mov                     a,r8
0190 B40007          526                                             cjne            a,#00,yst19
0193 C213            527                                             clr                     bitv19                  ;57
                             .6
0195 758DF4          528                                             mov                     TH1,#244
0198 8008            529                                             jmp               yst1
019A 900000   F      530     yst19:          mov                     dptr,#teS19_2
019D D213            531                                             setb            bitv19                  ;19,2
019F 758DDC          532                                             mov                     TH1,#220
01A2                 533     yst1:
01A2 75E730          534                                             mov             EIE2,#30H;00110000
                     535                                     ;       mov             EIP2,#30H
01A5 75A880          536                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     537     ;ozu
01A8 E4              538                                             clr     a
01A9 7800            539                                             mov     r0,#00h 
01AB F6              540     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              541                                             inc     r0
01AD B87FFB          542                                             cjne    r0,#7fh,mecle
01B0 7880            543                                             mov     r0,#80h
01B2 F6              544     meff:                   mov     @r0,a 
01B3 F2              545                                             movx @r0,a
01B4 08              546                                             inc     r0
01B5 B8DFFA          547                             cjne    r0,#0dfh,meff
01B8 120000   F      548                             call    clmassix
                     549     ;обнулить внешнее озу 4кбайта
01BB 900000          550                                     mov                     dptr,#0
01BE E4              551     extcle: clr                     a
01BF F0              552                                     movx            @dptr,a
01C0 A3              553                                     inc                     dptr
01C1 E583            554                                     mov                     a,dph
01C3 B410F8          555                                     cjne            a,#10h,extcle
                     556     
01C6 7898            557                             mov             r0,#chinkor
01C8 7600            558                             mov             @r0,#0;1;
01CA 08              559                             inc             r0
01CB 7619            560                             mov             @r0,#19h;64h;0c8h;90h;
                     561                             ;;;;
01CD 7881            562                             mov             r0,#chavt
01CF 7601            563                             mov             @r0,#1
01D1 08              564                             inc             r0
01D2 7690            565                             mov             @r0,#90h
                     566     
01D4 78B2            567                                     mov             r0,#marker
01D6 76FF            568                                     mov             @r0,#0ffh
                     569                             ;mov            r0,#chind
                     570                             ;mov            @r0,#1
                     571                     
01D8 74FF            572                             mov             a,#0ffh
01DA F585            573                        mov          p5,a
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    10

01DC 799A            574                             mov             r1,#parT
01DE 7702            575                             mov             @r1,#2                  ;Tizm=1s
01E0 79AE            576                             mov             r1,#diap
01E2 7705            577                             mov             @r1,#5                  ;10-7a
01E4 753405          578                             mov             sadiap,#5
01E7 79AF            579                             mov             r1,#parN
01E9 7702            580                             mov             @r1,#2
01EB 7400            581                             mov             a,#00h
01ED F585            582                             mov             p5,a
01EF D204            583                             setb    bitizm
                     584     
01F1 799B            585                             mov             r1,#chbefore
01F3 7700            586                             mov             @r1,#0
                     587                             ;;;;;;
01F5 900000   F      588                             mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      589                             call    ldc_long
01FB 7890            590                             mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      591                             call    saver2
0200 7894            592                             mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      593                             call    saver2
0205 78A0            594                             mov             r0,#koefKD
0207 120000   F      595                             call    saver2
020A 78CF            596                             mov                     r0,#chbuf
020C 120000   F      597                             call    saver2
020F 900158          598                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            599                             mov             r1,#saven_bl
0214 E583            600                             mov             a,dph
0216 F7              601                                               mov           @r1,a
0217 09              602                                                     inc             r1
0218 E582            603                                                     mov             a,dpl
021A F7              604                                                     mov             @r1,a
                     605     
021B 900478          606                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            607                             mov             r1,#saven_bl2
0220 E583            608                             mov             a,dph
0222 F7              609                                               mov           @r1,a
0223 09              610                                                     inc             r1
0224 E582            611                                                     mov             a,dpl
0226 F7              612                                                     mov             @r1,a
0227 900798          613                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
022A 79C2            614                             mov             r1,#saven_bl3
022C E583            615                             mov             a,dph
022E F7              616                                               mov           @r1,a
022F 09              617                                                     inc             r1
0230 E582            618                                                     mov             a,dpl
0232 F7              619                                                     mov             @r1,a
0233 900AB8          620                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0236 79D9            621                             mov             r1,#saven_bl4
0238 E583            622                             mov             a,dph
023A F7              623                                               mov           @r1,a
023B 09              624                                                     inc             r1
023C E582            625                                                     mov             a,dpl
023E F7              626                                                     mov             @r1,a
023F 753801          627                             mov             nblok,#1                        ;номер введенного б
                             лока
0242 753701          628                             mov             nelem,#1
0245 78CD            629                             mov             r0,#interva
0247 7600            630                             mov             @r0,#0
0249 08              631                             inc             r0
024A 7601            632                             mov             @r0,#1
024C 7840            633                             mov             r0,#bufind
024E                 634     age2:
024E 76FD            635                             mov             @r0,#0fdh         ;погасить индикатор
0250 08              636                             inc             r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    11

0251 B84CFA          637                             cjne    r0,#bufind+12,age2              
0254 120000   F      638                             call    ind
0257 120000   F      639                             call    z_1s
                     640     
                     641                                     ;зажечь все лементы индикации
025A 7840            642                             mov             r0,#bufind
025C 7669            643     ageon:          mov             @r0,#69h;0feh;?
025E 08              644                             inc             r0
025F B84CFA          645                             cjne    r0,#bufind+12,ageon             
0262 120000   F      646                             call    ind
0265 120000   F      647                             call    z_1s            ;1sec
                     648     ;;;;;;;;;;;;;;;;
                     649                     
0268 120000   F      650                             call    z_15;z_1ms
026B 434B10          651                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     652     ;;;;;;;;;;;;;;;;;;;
026E 7C60            653                             mov             r4,#60h
0270 7D00            654                             mov             r5,#00         
0272 120000   F      655                             call    iniacp;инициализация acp
0275 120000   F      656                             call    loadUS          ;us 10-7 A
                     657                             
0278 C217            658     rebyte:         clr             bitoll
027A 3095FD          659                             jnb             p1.5,$
027D 2095FD          660                             jb              p1.5,$
                     661                             ;mov            a,P6            ;p6.4=0
                     662                             ;anl            a,#0efh
                     663                             ;mov            P6,a
                     664                             ;nop
                     665                             ;nop
                     666                                     
                     667                             ;mov            a,P6                    ;p6.4=1 
                     668                             ;orl            a,#10h
                     669                             ;mov            P6,a                        
0280 7411            670                             mov             a,#11h
0282 120000   F      671                             call    write
                     672                             ;чтение acp
0285 120000   F      673                             call    read    
0288 F578            674                             mov     reacp+1,A       ;старший байт 
028A 120000   F      675                             call    read    
028D F579            676                             mov     reacp+2,A       ;средний байт 
028F 120000   F      677                             call    read
0292 F57A            678                             mov     reacp+3,A               ;мл байт
                     679                        ;;;;;;;;;;;
0294 7878            680                        mov          r0,#reacp+1
0296 E6              681                        mov          a,@r0
0297 20E73D          682                             jb              acc.7,znplus;
029A D200            683                             setb    bitznak
029C 4480            684                             orl             a,#80h  ;ост содерж яч 
029E F6              685                             mov             @r0,a
                     686                                     
029F 18              687     mmm:            dec             r0;,#reacp
02A0 76FF            688                             mov             @r0,#0ffh
02A2 803B            689                             jmp             goznak
                     690     
02A4 120000   F      691     mem10ms:        call            ind
02A7 80CF            692                                             jmp                     rebyte                     
                                  ;10ms
                     693     
02A9                 694     labelA: 
                     695                             ;разрешить ie6,ie7
                     696     ;                       mov                     a,chkl+1                ;low
                     697     ;                       jnz                     no0key
02A9 E53D            698                             mov                     a,chkl
02AB 30E705          699                             jnb                     acc.7,no0key;jnz                        no0
                             key
02AE 75E730          700                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    12

02B1 800D            701                             jmp                     yes0key
                     702                        
02B3                 703     no0key: ;       mov             r1,#chkl 
                     704                                     ;       call    chdec
02B3 C3              705                                     clr                     c
02B4 E53E            706                                     mov                     a,chkl+1;chkl-1
02B6 9401            707                                     subb            a,#1
02B8 F53E            708                                     mov                     chkl+1,a
02BA E53D            709                                     mov                     a,chkl
02BC 9400            710                                     subb            a,#0
02BE F53D            711                                     mov                     chkl,a
                     712                             ;;;;;;;;;;;;
02C0                 713     yes0key:
02C0 2004B5          714                                             jb              bitizm,rebyte
                     715                              ;буфер 2 выдать на индикацию
02C3 E533            716                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02C5 700B            717                             jnz             nochind
02C7 753364          718                             mov             chind2,#100
02CA 120000   F      719                             call    ind
02CD 120000   F      720     yes0key1:       call    z_1ms;z_01s
                     721                             ;call   z_01s
                     722                             ;call   z_01s
02D0 80D7            723                             jmp             labelA
                     724     
02D2 14              725     nochind:        dec             a
02D3 F533            726                                             mov             chind2,a
02D5 80F6            727                                     jmp             yes0key1;labelA
                     728             
02D7 C200            729     znplus:         clr     bitznak
02D9 547F            730                             anl             a,#7fh;fdh                      ;+
02DB F6              731                             mov             @r0,a
02DC 18              732                             dec             r0;,#reacp
02DD 7600            733                             mov             @r0,#00h
                     734                             
02DF                 735     goznak: 
                     736     ;;;;;;;;;;;;;
02DF 787A            737                             mov     r0,#reacp+3
02E1 E6              738                             mov             a,@r0
02E2 7F05            739                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02E4 C3              740     sdvig3:         clr             c
02E5 13              741                             rrc             a
02E6 DFFC            742                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02E8 FA              743                             mov             r2,a    ;сохр байт
02E9 18              744                             dec             r0              ;       reacp+2
02EA E6              745                             mov             a,@r0
02EB C0E0            746                             push    acc
02ED C3              747                             clr             c
02EE 7F03            748                             mov             r7,#3;2
02F0 C3              749     sdvig2:         clr             c
02F1 33              750                             rlc             a
02F2 DFFC            751                             djnz    r7,sdvig2 ;d12..d11      средний байт
02F4 4A              752                             orl             a,r2
02F5 F57A            753                             mov             reacp+3,a;сформ мл байт
02F7 D0E0            754                             pop             acc
                     755                             
02F9 7F05            756                             mov             r7,#5;6
02FB C3              757     sdvig1:         clr             c
02FC 13              758                             rrc             a
02FD DFFC            759                             djnz    r7,sdvig1 ;d15,d14        ср байт
02FF FA              760                             mov             r2,a   ;сохр
0300 E578            761                             mov             a,reacp+1
0302 C0E0            762                             push    acc
                     763                     ;;      push    acc
0304 7F03            764                             mov             r7,#3;2
0306 C3              765     sdvig0:         clr             c
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    13

0307 33              766                             rlc             a
0308 DFFC            767                             djnz    r7,sdvig0 ;       d21..d16
030A 4A              768                             orl             a,r2
030B F579            769                             mov             reacp+2,a       ; сформ средний  байт
030D D0E0            770                             pop             acc       ;reacp+1
                     771                             ;;;;;;;;;;;;;;
030F 20E70B          772                             jb              acc.7,sdvm
0312 C3              773                             clr             c
0313 7F05            774                             mov             r7,#5;6
0315 C3              775     sdvig4:         clr             c
0316 13              776                             rrc             a
0317 DFFC            777                             djnz    r7,sdvig4 ;       d23,d22
0319 F578            778                             mov             reacp+1,a
031B 8008            779                             jmp             readyacp;ankor;klmas
                     780     ;;;;;;;;;;;;                                    
031D 7F05            781     sdvm:           mov             r7,#5;6
031F D3              782     sdvig6:         setb            c
0320 13              783                             rrc             a
0321 DFFC            784                             djnz    r7,sdvig6 ;       d23,d22
0323 F578            785                             mov             reacp+1,a
                     786                                                             
                     787     ; reacp..reacp+3-результат чтения асп(hex) 
                     788     ;;;;;;;;;
0325                 789     readyacp:
0325 7898            790                                             mov             r0,#chinkor
0327 E6              791                             mov             a,@r0
0328 30E702          792                             jnb             acc.7,gopart
032B 8044            793                                     jmp             sumt2
                     794                     
032D                 795     gopart:
032D 789A            796                             mov             r0,#parT        ;параметр времени
032F 793F            797                             mov             r1,#chmasN
0331 B6013A          798                             cjne    @r0,#1,noparT1
                     799                             ;РЕЗ+РЕЗ
0334 7877            800                             mov             r0,#reacp
0336 120000   F      801                             call    resar2          ;reacp->r2..r5
0339 78B6            802                             mov             r0,#summa+3;rez_A+3
033B 120000   F      803                             call    ladd
033E 78B3            804                             mov             r0,#summa;rez_A
0340 120000   F      805                             call    saver2
0343 793F            806                              mov            r1,#chmasN
0345 7714            807                             mov             @r1,#20;10
0347 789B            808                             mov             r0,#chbefore
0349 B6631E          809                             cjne    @r0,#99,nobef99
                     810                             ;РЕЗ/100
034C 900000   F      811                             MOV        DPTR,#ch100 
034F 120000   F      812     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0352 120000   F      813                             call    zdiv;divide
0355 7862            814                             mov             r0,#rez_A
0357 120000   F      815                             call    saver2          ;сумма 100 отсчетов /100
035A 78C5            816                             mov             r0,#Rez_del
035C 120000   F      817                             call    saver2  
                     818                        ;;;;;
035F 78B3            819                        mov          r0,#summa
0361 120000   F      820                        call         clear4
                     821     
0364 799B            822                             mov             r1,#chbefore
0366 7700            823                             mov             @r1,#0
0368 8070            824                             jmp             klmas           ;загр в массив скользящее ср
036A 06              825     nobef99:        inc             @r0                     ;chbefore
036B 020000   F      826                             jmp             rebyte;labelA;метка A
                     827     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     828     ;а потом уже располагаем  в скользящий массив  из n
                     829     
                     830     
                     831     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    14

036E B6021D          832     noparT1:        cjne    @r0,#2,noparT2
                     833                             ;РЕЗ+РЕЗ
0371                 834     sumt2:
0371 7877            835                              mov            r0,#reacp
0373 120000   F      836                             call    resar2          ;reacp->r2..r5
0376 78B6            837                             mov             r0,#summa+3;rez_A+3
0378 120000   F      838                             call    ladd
037B 78B3            839                             mov             r0,#summa;rez_A
037D 120000   F      840                             call    saver2
0380 789B            841                             mov             r0,#chbefore
0382 793F            842                             mov             r1,#chmasN
0384 770A            843                             mov             @r1,#10
0386 B613E1          844                             cjne    @r0,#19,nobef99;9,nobef99
                     845                             ;РЕЗ/20
0389 900000   F      846                             MOV        DPTR,#ch20;ch10 
038C 80C1            847                             jmp             allsum
                     848                             ;;;;;;;
                     849                             
                     850     
038E B6031D          851     noparT2:        cjne    @r0,#3,noparT3
                     852     
0391 7877            853                                                              mov            r0,#reacp
0393 120000   F      854                             call    resar2          ;reacp->r2..r5
0396 78B6            855                             mov             r0,#summa+3;rez_A+3
0398 120000   F      856                             call    ladd
039B 78B3            857                             mov             r0,#summa;rez_A
039D 120000   F      858                             call    saver2
03A0 789B            859                             mov             r0,#chbefore
03A2 793F            860                             mov             r1,#chmasN
03A4 7702            861                             mov             @r1,#2;4                                        ;n=
                             4
03A6 B609C1          862                             cjne    @r0,#9,nobef99;9,nobef99
                     863                             ;РЕЗ/10
03A9 900000   F      864                             MOV        DPTR,#ch10 
03AC 80A1            865                             jmp             allsum
                     866                             
03AE B6041D          867     noparT3:        cjne    @r0,#4,noparT4
03B1                 868     aapar:          
03B1 7877            869              mov            r0,#reacp
03B3 120000   F      870                             call    resar2          ;reacp->r2..r5
03B6 78B6            871                             mov             r0,#summa+3;rez_A+3
03B8 120000   F      872                             call    ladd
03BB 78B3            873                             mov             r0,#summa;rez_A
03BD 120000   F      874                             call    saver2
03C0 789B            875                             mov             r0,#chbefore
03C2 793F            876                             mov             r1,#chmasN
03C4 7702            877                             mov             @r1,#2;4
03C6 B604A1          878                             cjne    @r0,#4,nobef99;9,nobef99
                     879                             ;РЕЗ/10
03C9 900000   F      880                             MOV        DPTR,#ch5
03CC 8081            881                             jmp             allsum
                     882     
                     883                     
03CE 7702            884     noparT4:   mov          @r1,#2          ;chmasN n=2
03D0 7877            885                             mov             r0,#reacp
03D2 120000   F      886                             call    resar2          ;reacp->r2..r5
03D5 7862            887                             mov             r0,#rez_A
03D7 120000   F      888                             call    saver2
                     889     ;загрузить А в массив из 2/10 значений
                     890     ;;;;;;;;;;;;;;;
03DA                 891     klmas:           
03DA 793F            892                             mov             r1,#chmasN
03DC B7021A          893                             cjne    @r1,#2,mas10
03DF 900100          894                             MOV        dptr,#MASS0
03E2 120000   F      895                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     896     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    15

03E5 7862            897                             mov             r0,#rez_A
03E7 120000   F      898                             call    resar2          ;->r2..r5
03EA 900100          899                             mov                     dptr,#MASS0
03ED 120000   F      900                   call              saveIr2                 ; R2-R5 --> MAS0
                     901                     
03F0 900107          902                   MOV          dptr,#MASS1+3
03F3 120000   F      903                   CALL       addx
03F6 020000   F      904                       jmp           endsum
                     905     ;массив из 10-ти измерений
03F9 B70A7D          906     mas10:                  cjne    @r1,#10,mas20
03FC 900120          907                                             mov                     dptr,#MASS8
03FF 120000   F      908                     CALL            xCIKLWR         ;MASS8->MASS9
0402 90011C          909                                             mov                     dptr,#MASS7
0405 120000   F      910                     CALL            xCIKLWR         ;MASS7->MASS8
0408 900118          911                     MOV       dptr,#MASS6
040B 120000   F      912                     CALL       xCIKLWR         ; MASS6 --> MASS7
040E 900114          913                     MOV        dptr,#MASS5
                     914                    
0411 120000   F      915                    CALL        xCIKLWR        ; MASS5 --> MASS6
0414 900110          916                    MOV         dptr,#MASS4
                     917                    
0417 120000   F      918                    CALL        xCIKLWR        ; MASS4 --> MASS5
041A 90010C          919                             mov                     dptr,#MASS3
                     920     
041D 120000   F      921                    CALL             xCIKLWR         ;MASS3->MASS4
0420 900108          922                     MOV        dptr,#MASS2
                     923                    
0423 120000   F      924                    CALL        xCIKLWR         ; MASS2 --> MASS3
0426 900104          925                    MOV         dptr,#MASS1
                     926                     
0429 120000   F      927                   CALL         xCIKLWR        ; MASS1 --> MASS2
042C 900100          928                    MOV         dptr,#MASS0
                     929                   
042F 120000   F      930                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     931     
                     932                             
0432 7862            933                             mov             r0,#rez_A
0434 120000   F      934                             call    resar2          ;->r2..r5
                     935                                     ;call   aform
0437 900100          936                                     mov                     dptr,#MASS0
043A 120000   F      937                   call              saveIr2                 ; R2-R5 --> MAS0
                     938              
043D 900107          939                   MOV          dptr,#MASS1+3
0440 120000   F      940                   CALL       addx
0443 90010B          941                   MOV          dptr,#MASS2+3
0446 120000   F      942                   CALL       addx
0449 90010F          943                   MOV          dptr,#MASS3+3
044C 120000   F      944                  CALL        addx
044F 900113          945                   MOV       dptr,#MASS4+3
0452 120000   F      946                   call       addx
0455 900117          947                     MOV        dptr,#MASS5+3
0458 120000   F      948                  CALL        addx
045B 90011B          949                   MOV          dptr,#MASS6+3
045E 120000   F      950                   CALL       addx
0461 90011F          951                   MOV          dptr,#MASS7+3
0464 120000   F      952                  CALL        addx
0467 900123          953                  MOV        dptr,#MASS8+3
046A 120000   F      954                   call       addx
046D 900127          955                     MOV                     dptr,#MASS9+3
0470 120000   F      956                  call        addx
0473 020000   F      957                              jmp            endsum
                     958     
0476 020000   F      959     rmas4:          jmp                     mas4
                     960     ;массив из 20-ти измерений
0479 B714FA          961     mas20:          cjne    @r1,#20,rmas4
047C 900148          962                                             mov                     dptr,#MASS18
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    16

047F 120000   F      963                     CALL            xCIKLWR         ;MASS18->MASS19
0482 900144          964                                             mov                     dptr,#MASS17
0485 120000   F      965                     CALL            xCIKLWR         ;MASS17->MASS18
0488 900140          966                     MOV       dptr,#MASS16
048B 120000   F      967                     CALL       xCIKLWR         ; MASS16 --> MASS17
048E 90013C          968                     MOV        dptr,#MASS15
                     969                    
0491 120000   F      970                    CALL        xCIKLWR        ; MASS15 --> MASS16
0494 900138          971                    MOV         dptr,#MASS14
                     972                    
0497 120000   F      973                    CALL        xCIKLWR        ; MASS14 --> MASS15
049A 900134          974                             mov                     dptr,#MASS13
                     975     
049D 120000   F      976                    CALL             xCIKLWR         ;MASS13->MASS14
04A0 900130          977                     MOV        dptr,#MASS12
                     978                    
04A3 120000   F      979                    CALL        xCIKLWR         ; MASS12 --> MASS13
04A6 90012C          980                    MOV         dptr,#MASS11
                     981                     
04A9 120000   F      982                   CALL         xCIKLWR        ; MASS11 --> MASS12
04AC 900128          983                    MOV         dptr,#MASS10
                     984                   
04AF 120000   F      985                    CALL        xCIKLWR        ; MASS10 --> MASS11
04B2 900124          986                                      MOV       dptr,#MASS9
04B5 120000   F      987                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     988     
04B8 900120          989                                             mov                     dptr,#MASS8
04BB 120000   F      990                     CALL            xCIKLWR         ;MASS8->MASS9
04BE 90011C          991                                             mov                     dptr,#MASS7
04C1 120000   F      992                     CALL            xCIKLWR         ;MASS7->MASS8
04C4 900118          993                     MOV       dptr,#MASS6
04C7 120000   F      994                     CALL       xCIKLWR         ; MASS6 --> MASS7
04CA 900114          995                     MOV        dptr,#MASS5
                     996                    
04CD 120000   F      997                    CALL        xCIKLWR        ; MASS5 --> MASS6
04D0 900110          998                    MOV         dptr,#MASS4
                     999                    
04D3 120000   F     1000                    CALL        xCIKLWR        ; MASS4 --> MASS5
04D6 90010C         1001                             mov                     dptr,#MASS3
                    1002     
04D9 120000   F     1003                    CALL             xCIKLWR         ;MASS3->MASS4
04DC 900108         1004                     MOV        dptr,#MASS2
                    1005                    
04DF 120000   F     1006                    CALL        xCIKLWR         ; MASS2 --> MASS3
04E2 900104         1007                    MOV         dptr,#MASS1
                    1008                     
04E5 120000   F     1009                   CALL         xCIKLWR        ; MASS1 --> MASS2
04E8 900100         1010                    MOV         dptr,#MASS0
                    1011                   
04EB 120000   F     1012                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1013     
                    1014                             
04EE 7862           1015                             mov             r0,#rez_A
04F0 120000   F     1016                             call    resar2          ;->r2..r5
                    1017                                     ;call   aform
04F3 900100         1018                                     mov                     dptr,#MASS0
04F6 120000   F     1019                   call              saveIr2                 ; R2-R5 --> MAS0
                    1020              
04F9 900107         1021                   MOV          dptr,#MASS1+3
04FC 120000   F     1022                   CALL       addx
04FF 90010B         1023                   MOV          dptr,#MASS2+3
0502 120000   F     1024                   CALL       addx
0505 90010F         1025                   MOV          dptr,#MASS3+3
0508 120000   F     1026                  CALL        addx
050B 900113         1027                   MOV       dptr,#MASS4+3
050E 120000   F     1028                   call       addx
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    17

0511 900117         1029                     MOV        dptr,#MASS5+3
0514 120000   F     1030                  CALL        addx
0517 90011B         1031                   MOV          dptr,#MASS6+3
051A 120000   F     1032                   CALL       addx
051D 90011F         1033                   MOV          dptr,#MASS7+3
0520 120000   F     1034                  CALL        addx
0523 900123         1035                  MOV        dptr,#MASS8+3
0526 120000   F     1036                   call       addx
0529 900127         1037                     MOV                     dptr,#MASS9+3
052C 120000   F     1038                  call        addx
                    1039     ;27
052F 90012B         1040                                     MOV        dptr,#MASS10+3
0532 120000   F     1041                   CALL       addx
0535 90012F         1042                                     MOV        dptr,#MASS11+3
0538 120000   F     1043                   CALL       addx
053B 900133         1044                   MOV          dptr,#MASS12+3
053E 120000   F     1045                   CALL       addx
0541 900137         1046                   MOV          dptr,#MASS13+3
0544 120000   F     1047                  CALL        addx
0547 90013B         1048                   MOV       dptr,#MASS14+3
054A 120000   F     1049                   call       addx
054D 90013F         1050                                     MOV        dptr,#MASS15+3
0550 120000   F     1051                     CALL     addx
0553 900143         1052                   MOV          dptr,#MASS16+3
0556 120000   F     1053                   CALL       addx
0559 900147         1054                   MOV          dptr,#MASS17+3
055C 120000   F     1055                  CALL        addx
055F 90014B         1056                  MOV        dptr,#MASS18+3
0562 120000   F     1057                   call       addx
0565 90014F         1058                                     MOV                     dptr,#MASS19+3
0568 120000   F     1059                  call        addx
056B 802F           1060                                     jmp             endsum
                    1061     ;массив из 4х измерений
056D                1062     mas4:                   
056D 900108         1063                                             MOV        dptr,#MASS2
0570 120000   F     1064                    CALL        xCIKLWR         ; MASS2 --> MASS3
0573 900104         1065                    MOV         dptr,#MASS1
0576 120000   F     1066                    CALL        xCIKLWR        ; MASS1 --> MASS2
0579 900100         1067                    MOV         dptr,#MASS0
057C 120000   F     1068                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1069     
                    1070                             
057F 7862           1071                             mov             r0,#rez_A
0581 120000   F     1072                             call    resar2          ;->r2..r5
                    1073                                     ;call   aform
0584 900100         1074                                     mov                     dptr,#MASS0
0587 120000   F     1075                   call              saveIr2                 ; R2-R5 --> MAS0
                    1076              
058A 900107         1077                   MOV          dptr,#MASS1+3
058D 120000   F     1078                   CALL       addx
0590 90010B         1079                   MOV          dptr,#MASS2+3
0593 120000   F     1080                   CALL       addx
0596 90010F         1081                   MOV          dptr,#MASS3+3
0599 120000   F     1082                  CALL        addx
                    1083                  
                    1084             ;23.03          
059C                1085     endsum:
059C 786E           1086                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
059E 06             1087                                     inc             @r0
059F E6             1088                                     mov             a,@r0   
05A0 200105         1089                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1090                                     
05A3 B53F31         1091                                     cjne    a,chmasN,masx5
05A6 D201           1092                                     setb    bitmas                  ;массив заполнен
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    18

05A8 853F6E         1093     masfull:                mov             chmas,chmasN
05AB 783F           1094                                     mov             r0,#chmasN
05AD E6             1095                                     mov             a,@r0
                    1096     ;masfull:
05AE B40208         1097                                     cjne    a,#2,nochn2
05B1 900000   F     1098                                     MOV        DPTR,#ch2;10 
05B4 120000   F     1099                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05B7 8028           1100                                     jmp             mas5div
                    1101     
05B9 B40A08         1102     nochn2:         cjne    a,#10,nochn10
05BC 900000   F     1103                                                     MOV        DPTR,#ch10 
05BF 120000   F     1104                                     CALL   ldc_ltemp                 ; ltemp <-- 10
05C2 801D           1105                                     jmp             mas5div
                    1106     
05C4 B41408         1107     nochn10:        cjne    a,#20,nochn20
05C7 900000   F     1108                                                     MOV        DPTR,#ch20 
05CA 120000   F     1109                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05CD 8012           1110                                     jmp             mas5div
                    1111     
05CF 900000   F     1112     nochn20:        MOV        DPTR,#ch4 
05D2 120000   F     1113                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05D5 800A           1114                                     jmp             mas5div
                    1115     
05D7 856E0B         1116     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05DA E4             1117                                     clr     a
05DB F50A           1118                                     mov     ltemp+2,a
05DD F509           1119                                     mov     ltemp+1,a
05DF F508           1120                                     mov     ltemp,a
                    1121     
05E1                1122     mas5div:
05E1 120000   F     1123                                     CALL       zdiv;divide                           ; R2-R5 =
                    1124                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1125     
                    1126                             
                    1127      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1128     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1129     ;получен результат 3 байта и знак
05E4 7866           1130                             mov             r0,#rez_A1
05E6 120000   F     1131                             call    saver2           ;сохр среднее по массиву
                    1132     ;;8.11.06                       mov             chmasN,#0
                    1133      ;;;;;;;;;;;;
                    1134      ;;;;;;;;;;;;
05E9 C3             1135                             clr             c
05EA 799A           1136                             mov             r1,#parT
05EC 7402           1137                             mov             a,#2
05EE 97             1138                             subb    a,@r1
05EF 501D           1139                             jnc             ankor           ;T<3
                    1140                             ;A-=РЕЗ1                                ;T>3
05F1 120402         1141                             call    altof                   ;r2..r5->float
05F4 785E           1142                             mov             r0,#rez_Ame
05F6 120000   F     1143                             call    saver2
                    1144                             ;;;;
05F9 7890           1145                             mov             r0,#koefKp;->r8..r11
05FB EA             1146                             mov             a,r2
05FC 30E702         1147                             jnb             acc.7,nminus3
05FF 7894           1148                             mov             r0,#koefKm;->r8..r11
0601 120000   F     1149     nminus3:                call    resar8
0604 120203         1150                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0607 785E           1151                             mov             r0,#rez_Ame
0609 120000   F     1152                             call    saver2
060C 8021           1153                             jmp             gotoKD
                    1154     
060E                1155     ankor:  
060E 7898           1156                             mov             r0,#chinkor
0610 E6             1157                             mov             a,@r0
0611 30E703         1158                             jnb             acc.7,nokorr
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    19

                    1159                             ;коррекция 0
0614 020000   F     1160                             jmp             kornul
0617                1161     nokorr: 
                    1162                             ;mov            r10,#00         ;       chavt
                    1163                             ;mov            r11,#00h
0617 7881           1164                             mov              r0,#chavt      
0619 E6             1165                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
061A 30E737         1166                             jnb             acc.7,nonulavt;jnz              nonulavt        
061D 750A00         1167                             mov             r10,#0;1;00;02          
0620 750BC8         1168                             mov             r11,#0c8h;90h;0c8h;58h
0623 7898           1169                             mov             r0,#chinkor
0625 120000   F     1170                             call    chcmp
0628 7045           1171                             jnz             noavk
                    1172                             ;автокалибровка
062A 020000   F     1173                             jmp             autoka;noavk;
                    1174     
062D 8079           1175     rafterK:                jmp             afterK
                    1176     ;;;;;;;;;;
062F C3             1177      gotoKD:                clr             c
0630 799A           1178                             mov             r1,#parT
0632 7404           1179                             mov             a,#4
0634 97             1180                             subb    a,@r1
0635 50F6           1181                             jnc             rafterK         ;T<5
                    1182                             ;A1-=A- *KD                     ;T>5
                    1183                             ;call           findkoef                                ;r2,r3-hex
                    1184                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1185                                     
                    1186                             ;       call    altof                   ;r2..r5->float
                    1187                             ;       mov     dptr,#CHtho;100000
                    1188                             ;       call    ldc_ltemp                       ;r8..r11
                    1189                             ;       call    fldiv
                    1190                             ;       call    move28
                    1191                             
0637 785E           1192                             mov             r0,#rez_Ame;->r2..r5   ???????????/
0639 120000   F     1193                             call    resar2
                    1194                                     ;call   flmul
063C 120343         1195                             call    ftol                    ;float->int
063F 7866           1196                             mov             r0,#rez_A1
0641 120000   F     1197                             call    saver2
0644 786A           1198                             mov             r0,#rez_A0;->r8..r11 hex
0646 120000   F     1199                             call    resar8
0649 120000   F     1200                             call    lsub            ;A3=A-1-A0
064C 789C           1201                             mov             r0,#rez_A3
064E 120000   F     1202                             call    saver2
0651 020000   F     1203                             jmp             labelB  
                    1204      ;;;;;;;;;;; 9.11.06
0654 789A           1205     nonulavt:        mov            r0,#parT
0656 E6             1206                             mov             a,@r0
0657 6401           1207                             xrl             a,#01
0659 700F           1208                             jnz             avtdec1
065B 7982           1209                             mov             r1,#chavt+1     ;T=1 chavt-10
065D 120000   F     1210                             call    tenmin
0660 7999           1211     kordec10:       mov             r1,#chinkor+1
0662 120000   F     1212                             call    tenmin
0665 801E           1213                             jmp             rezmul
                    1214     
0667 020000   F     1215     rmo220:         jmp             mo220
                    1216     
066A 7981           1217     avtdec1:        mov             r1,#chavt       
066C 120000   F     1218                             call    chdec           ;chavt-1
                    1219     ;                       jmp             kordec1;rezmul
066F 789A           1220     noavk:          mov             r0,#parT
0671 E6             1221                             mov             a,@r0
0672 6401           1222                             xrl             a,#01
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    20

0674 700A           1223                             jnz             kordec1
                    1224                             ;T=1 chinkor-10
0676 7999           1225                     mov             r1,#chinkor+1
0678 120000   F     1226                             call    tenmin
067B 8008           1227                             jmp             rezmul
                    1228     
067D 020000   F     1229     rnotestizm:             jmp                     notestizm
0680 7998           1230     kordec1:        mov             r1,#chinkor
0682 120000   F     1231                             call    chdec           ; chinkor-1
                    1232                        ;9.11.06
                    1233                             ;;;;;;;;;;;;;;
                    1234                             ;;;;;;;;;;;;;
                    1235     ;(РЕЗ1-АN)*K
0685                1236     rezmul:
0685 7866           1237                             mov             r0,#rez_A1;->r2..r5
0687 120000   F     1238                             call    resar2
068A 120402         1239                             call    altof   ;r2..r5->float  6.06    
068D 7884           1240                             mov             r0,#kor0_AN;->r8..r11
068F 120000   F     1241                             call    resar8
0692 1201D1         1242                             call    flsub
0695 7890           1243                             mov             r0,#koefKp;->r8..r11
0697 EA             1244                             mov             a,r2
0698 30E702         1245                             jnb             acc.7,nminus
                    1246                             ;jnb            bitznak,nminus
                    1247                     
069B 7894           1248                             mov             r0,#koefKm;->r8..r11
069D 120000   F     1249     nminus:         call    resar8
06A0 120203         1250                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
06A3 785E           1251                             mov             r0,#rez_Ame
06A5 120000   F     1252                             call    saver2
                    1253      
06A8                1254     afterK:                 
                    1255     ;;;;;;;;;;;;;;
06A8 EA             1256                                     mov             a,r2
06A9 547F           1257                                     anl             a,#7fh
06AB FA             1258                                     mov             r2,a
06AC 900000   F     1259                                     mov     dptr,#ch_250;220;220000
06AF 120000   F     1260                                     call    ldc_ltemp                       ;r8..r11=8
06B2 1201D6         1261                                     call    flcmp
06B5 50B0           1262                                     jnc             rmo220          ;A>220000
                    1263                                     ;;;;;;;;;
06B7 3015C3         1264                                     jnb                     biteizm,rnotestizm
06BA 78B1           1265                                     mov                     r0,#vichR
06BC B62155         1266                                     cjne            @r0,#21h,note21
06BF 7A50           1267                                     mov                     r2,#50h                 ;-11a
06C1 7B18           1268                                     mov                     r3,#18h                 ;k8
06C3 12046C         1269                                     call            rebyte2                         ;r2..r5- he
                             x
06C6 120402         1270                                     call            altof                   ;r2..r5->float
06C9 C002           1271                                     push            rr2
06CB C003           1272                                     push            rr3
06CD C004           1273                                     push            rr4
06CF C005           1274                                     push            rr5
06D1 7A50           1275                                     mov                     r2,#50h                 ;k10
06D3 7B20           1276                                     mov                     r3,#20h
06D5 12046C         1277     re11_7: call            rebyte2                 ;r2..r5
06D8 120402         1278                                     call            altof                   ;r2..r5->float
06DB 120000   F     1279                                     call            move28
06DE D005           1280                                     pop                     rr5
06E0 D004           1281                                     pop                     rr4
06E2 D003           1282                                     pop                     rr3
06E4 D002           1283                                     pop                     rr2
06E6 1202B7         1284                                     call            fldiv
                    1285                             ;       mov                     dptr,#ch_10
                    1286                             ;       call            ldc_ltemp                       ;r8..r11
                    1287                             ;       call            flmul
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    21

                    1288                                     ;;;;;2.02.07
06E9 C002           1289                                     push            rr2
06EB C003           1290                                     push            rr3
06ED C004           1291                                     push            rr4
06EF C005           1292                                     push            rr5
06F1 7A50           1293                                     mov                     r2,#50h                 ;-11a
06F3 7B2C           1294                                     mov                     r3,#2ch                 ;Km
06F5 12046C         1295                                     call            rebyte2                         ;r2..r5- he
                             x
06F8 120402         1296                                     call            altof                   ;r2..r5->float
06FB 120000   F     1297                                     call            move28
06FE D005           1298                                     pop                     rr5
0700 D004           1299                                     pop                     rr4
0702 D003           1300                                     pop                     rr3
0704 D002           1301                                     pop                     rr2
0706 120203         1302                                     call            flmul                           ;*Km
0709 900000   F     1303                                     mov     dptr,#CHtho;100000
070C 120000   F     1304                                     call    ldc_ltemp                       ;r8..r11=8
070F 1202B7         1305                                     call    fldiv
                    1306                                     ;;;;;
0712 8050           1307                                     jmp                     temul   
0714 B62218         1308     note21: cjne            @r0,#22h,note22
0717 7A50           1309                                     mov                     r2,#50h                 ;-09a
0719 7B10           1310                                     mov                     r3,#10h                 ;k6
071B 12046C         1311                                     call            rebyte2                         ;r2..r5- he
                             x
071E 120402         1312                                     call            altof                   ;r2..r5->float
0721 C002           1313                                     push            rr2
0723 C003           1314                                     push            rr3
0725 C004           1315                                     push            rr4
0727 C005           1316                                     push            rr5
0729 7A50           1317                                     mov                     r2,#50h                 ;k8
072B 7B18           1318                                     mov                     r3,#18h
072D 80A6           1319                                     jmp                     re11_7
072F 7A50           1320     note22: mov                     r2,#50h                 ;-7a
0731 7B08           1321                                     mov                     r3,#08h                 ;k4
0733 12046C         1322                                     call            rebyte2                         ;r2..r5- he
                             x
0736 120402         1323                                     call            altof                   ;r2..r5->float
0739 C002           1324                                     push            rr2
073B C003           1325                                     push            rr3
073D C004           1326                                     push            rr4
073F C005           1327                                     push            rr5
0741 7A50           1328                                     mov                     r2,#50h                 ;k6
0743 7B10           1329                                     mov                     r3,#10h
0745 808E           1330                                     jmp                     re11_7  
                    1331                                     ;;;;;;;;;
0747                1332     notestizm:
0747 301208         1333                                     jnb             bitklb,komulpz
074A 900000   F     1334                                     mov     dptr,#chk;100000
074D 120000   F     1335                                     call    ldc_long                        ;r2..r5
0750 8006           1336                                     jmp             komul
0752 120000   F     1337     komulpz:call            findkoef                                ;r2,r3-hex
0755 12046C         1338                                     call            rebyte2                         ;r2..r5- he
                             x
                    1339                                     
0758 120402         1340     komul:  call    altof                   ;r2..r5->float
075B 900000   F     1341                                     mov     dptr,#CHtho;100000
075E 120000   F     1342                             call    ldc_ltemp                       ;r8..r11=8
0761 1202B7         1343                                     call    fldiv
0764 120000   F     1344     temul:                          call    move28
0767 785E           1345                                     mov             r0,#rez_Ame
0769 120000   F     1346                                     call    resar2
                    1347                     
076C 120203         1348                                     call    flmul     ;A1-=A-*KD  fl
                    1349                                     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    22

076F 120343         1350                                     call    ftol                    ;float->int
0772 7866           1351                                     mov             r0,#rez_A1
0774 120000   F     1352                                     call    saver2
0777 120402         1353                                     call    altof                   ;r2..r5->float
077A EA             1354                                     mov             a,r2
077B 547F           1355                                     anl             a,#7fh
077D FA             1356                                     mov             r2,a
077E 900000   F     1357                                     mov     dptr,#ch_220;200;200000
0781 120000   F     1358                                     call    ldc_ltemp                       ;r8..r11=8
0784 1201D6         1359                                     call    flcmp
0787 502D           1360                                     jnc             rrmo220         ;A>200000
                    1361                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1362                             ;       jb              bitavp,yesavp
0789 301808         1363                                     jnb             knizm,goA2
078C 300602         1364                                     jnb             bitvi11,qu_avp
078F 8003           1365                                     jmp             goA2
0791 20052F         1366     qu_avp:                 jb              bitavp,yesavp
0794                1367     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0794                1368     goA2:                    ;A2=A1-
0794 7866           1369                                      mov            r0,#rez_A1
0796 120000   F     1370                                     call    resar2
0799 787B           1371                                     mov             r0,#rez_A2
079B 120000   F     1372                                     call    saver2
079E                1373     goA3A2:                  ;A3=A2-A0
079E 786A           1374                                       mov           r0,#rez_A0
07A0 120000   F     1375                                     call    resar8
07A3 120000   F     1376                                     call    lsub
07A6 789C           1377                                     mov             r0,#rez_A3
07A8 120000   F     1378                                     call    saver2
                    1379                                     ;;;;;;
07AB 200660         1380                                     jb              bitvi11,yesvich
07AE                1381     goonin:            ;jmp         goonind;indA3;8.11.06
07AE 78AC           1382                                     mov             r0,#chind
07B0 B60006         1383                                     cjne    @r0,#0,rnochi0
07B3 020000   F     1384                                     jmp             goonind;indA3
                    1385     
07B6 020000   F     1386     rrmo220:                jmp             mo220
07B9 020000   F     1387     rnochi0:                jmp             nochi0
07BC 7866           1388     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07BE 120000   F     1389                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07C1 80D1           1390                                             jmp             goA2
                    1391     ;;;;;;;;;;;;;;;;
07C3 EA             1392     yesavp:                 mov             a,r2
07C4 547F           1393                                     anl             a,#7fh
07C6 FA             1394                                     mov             r2,a
07C7 900000   F     1395                                     mov     dptr,#ch_10th;10000
07CA 120000   F     1396                                     call    ldc_ltemp                       ;r8..r11=8
07CD 1201D6         1397                                     call    flcmp
07D0 50C2           1398                                     jnc             noavp           ;A>10000        
07D2 78AE           1399                                     mov             r0,#diap                ;10-11
07D4 B60902         1400                                     cjne    @r0,#9,avpgo
07D7 80BB           1401                                     jmp             noavp
07D9                1402     avpgo:                  
07D9 06             1403                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07DA B60A01         1404                                     cjne    @r0,#0ah,clmasv
07DD 16             1405                                     dec             @r0
07DE                1406     clmasv:         ;сбросить массив
07DE 120000   F     1407                             call    loadUS
                    1408                             ;call   louizm
07E1 120000   F     1409                             call     clmassix
07E4 78B3           1410                                     mov             r0,#summa
07E6 120000   F     1411                                     call    clear4
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    23

07E9 786A           1412                                     mov             r0,#rez_A0
07EB 120000   F     1413                                     call    clear4
07EE C20F           1414                                     clr             bitnul
07F0 D207           1415                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07F2 80BA           1416                                jmp     goonin
                    1417     
07F4 D00B           1418     erra01:         pop                     r11
07F6 D00A           1419                                     pop                     r10
07F8 D009           1420                                     pop                     r9
07FA D008           1421                                     pop                     r8
07FC C214           1422                                     clr             bitvich
07FE C206           1423                                     clr             bitvi11
0800 753934         1424                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
0803 120000   F     1425                                             call            error
0806 120000   F     1426                                             call            ind
0809 120000   F     1427                                             call            z_1s
080C 80A0           1428                                             jmp             goonin
                    1429     
                    1430     
080E                1431     yesvich:        
                    1432                     ;                       mov             r0,#konstB
                    1433                     ;               call    resar2
                    1434                     ;               call    move28
080E 789C           1435                                     mov             r0,#rez_A3;A1
0810 120000   F     1436                                     call    resar2                          ;HEX
                    1437                                     
0813 120402         1438                                     call            altof                   ;r2..r5->float
0816 EA             1439                                     mov             a,r2                    ;модуль
0817 547F           1440                                     anl             a,#7fh
0819 FA             1441                                     mov             r2,a
                    1442                     ;               call            fladd                           ;A1+B
                    1443                                     
081A 900000   F     1444                                     mov     dptr,#CH_500;
081D 120000   F     1445                                     call    ldc_ltemp                       ;r8..r11
0820 1201D6         1446                                     call    flcmp
0823 407E           1447                                     jc                      mo500R;error <500 >22000
0825 900000   F     1448                                     mov     dptr,#CH_22T;
0828 120000   F     1449                                     call    ldc_ltemp                       ;r8..r11
082B 1201D6         1450                                     call    flcmp
082E 507F           1451                                     jnc             mo500I          ;error
                    1452                                     ;;;;;;;;;;;;
0830 120000   F     1453                                     call            move28
0833 C008           1454                                     push            r8
0835 C009           1455                                     push            r9
0837 C00A           1456                                     push            r10
0839 C00B           1457                                     push            r11
083B 78BC           1458                                     mov             r0,#konstA
083D 120000   F     1459                                     call    resar2
0840 900000   F     1460                                     mov                     dptr,#ch0
0843 120000   F     1461                                     call            ldc_ltemp
0846 1201D6         1462                                     call            flcmp
0849 60A9           1463                                     jz              erra01
084B 900000   F     1464                                     mov             dptr,#CH_B
084E 120000   F     1465                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0851 120203         1466                                     call            flmul                           ;A*10-7
0854 D00B           1467                                     pop                     r11
0856 D00A           1468                                     pop                     r10
0858 D009           1469                                     pop                     r9
085A D008           1470                                     pop                     r8
085C 1202B7         1471                                     call            fldiv                   ;результат R
085F 78C9           1472                                     mov                     r0,#rez_R
0861 120000   F     1473                                     call            saver2
0864 120343         1474                                     call            ftol                    ;float->hex
                    1475                                     ;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    24

0867 784F           1476                                             mov             r0,#abin
0869 120000   F     1477                                             call    saver2
                    1478     ;;;;;;;;
086C 7840           1479                                                     mov             r0,#bufind
086E                1480     age9:
086E 7620           1481                             mov             @r0,#" "          ;погасить индикатор
0870 08             1482                             inc             r0
0871 B84BFA         1483                             cjne    r0,#bufind+11,age9
                    1484                                             
0874 78C9           1485                                             mov             r0,#rez_R
0876 120000   F     1486                                             call            resar2
                    1487     ;;;;;;;;;;
0879 900000   F     1488                                     mov             dptr,#CH_fl
087C 120000   F     1489                                     CALL   ldc_ltemp
087F 1202B7         1490                                     call            fldiv
                    1491     
0882 78B8           1492                                     mov             r0,#work                ;степень +
0884 7600           1493                                     mov             @r0,#0
0886 78B9           1494                                     mov             r0,#work+1;степень -
0888 7600           1495                                     mov             @r0,#0
088A 900000   F     1496     compa1: mov     dptr,#ch_1;
088D 120000   F     1497                                     call    ldc_ltemp                       ;r8..r11
0890 1201D6         1498                                     call    flcmp
0893 4026           1499                                     jc              equ0            ;<1
0895 78B8           1500                                     mov             r0,#work                        ;степень +
0897 06             1501                                     inc             @r0
0898 900000   F     1502                                     mov             dptr,#ch_10;
089B 120000   F     1503                                     call    ldc_ltemp                       ;r8..r11
089E 1202B7         1504                                     call            fldiv
08A1 80E7           1505                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1506                                     ;;;;;;;;;;;;;;;;;;;
08A3 900000   F     1507     mo500R: mov             dptr,#teOLR
08A6 120000   F     1508                               call          lotext           
08A9 120000   F     1509                                     call            ind
08AC 020000   F     1510                                     jmp                     nobavp;nobitizm
08AF 900000   F     1511     mo500I: mov             dptr,#teOLI
08B2 120000   F     1512                               call          lotext           
08B5 120000   F     1513                                     call            ind
08B8 020000   F     1514                                     jmp                     nobavp;nobitizm
08BB                1515     equ0:           ;;;;;   call            ftol                    ;float->int
08BB 78B8           1516                                     mov             r0,#work                ;степень +
08BD B60019         1517                                     cjne    @r0,#0,equ00
                    1518                                     
08C0 900000   F     1519     compa2: mov     dptr,#ch_1;
08C3 120000   F     1520                                     call    ldc_ltemp                       ;r8..r11
08C6 1201D6         1521                                     call    flcmp
08C9 500E           1522                                     jnc             equ00           ;>1
08CB 78B9           1523                                     mov             r0,#work+1                      ;степень -
08CD 16             1524                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08CE 900000   F     1525                                     mov             dptr,#ch_10;
08D1 120000   F     1526                                     call    ldc_ltemp                       ;r8..r11
08D4 120203         1527                                     call            flmul
08D7 80E7           1528                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1529     
                    1530     
08D9                1531     equ00:          
08D9 7853           1532                                                     mov             r0,#adec
08DB 7952           1533                                             mov             r1,#abin+3      ;hex->10
08DD 120000   F     1534                                             call    bindec
                    1535     
                    1536                                                     ;если степень полож убирать младший байт
                    1537                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    25

                    1538                                                     ;число в bufind..bufind+5
08E0 78B8           1539                                             mov             r0,#work
08E2 B60021         1540                                             cjne    @r0,#0,outr
08E5 08             1541                                             inc             r0                      ;work+1
08E6 B6FF05         1542                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08E9 06             1543                                             inc                     @r0;!!!!!!!!!?
08EA 785B           1544                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08EC 8003           1545                                             jmp                     bufr30
                    1546                                             ;;;;;;;;;;;;;;
08EE 06             1547     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08EF 785C           1548                                                     mov             r0,#adec+9
08F1 7945           1549     bufr30:         mov             r1,#bufind+5;6
08F3 7F05           1550                                             mov             r7,#5;7
08F5 E6             1551     bufr2:                          mov             a,@r0
08F6 2430           1552                                             add             a,#30h
08F8 F7             1553                                             mov             @r1,a
08F9 19             1554                                             dec             r1
08FA 18             1555                                             dec             r0
08FB DFF8           1556                                             djnz    r7,bufr2
                    1557     
08FD 784F           1558                                             mov             r0,#abin
08FF 120000   F     1559                                             call            clear4
0902 78B9           1560                                             mov             r0,#work+1
0904 801C           1561                                     jmp             outr5
                    1562     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
0906 785C           1563     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
0908 C3             1564                                             clr             c
0909 79B8           1565                                             mov             r1,#work
090B E8             1566                                             mov             a,r0
090C 14             1567                                             dec             a                                  
                                  ;n-1
090D 97             1568                                             subb    a,@r1
090E F8             1569                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
090F 7945           1570                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0911 7F05           1571                                             mov             r7,#5;7
0913 E6             1572     bufr:                           mov             a,@r0
0914 2430           1573                                             add             a,#30h
0916 F7             1574                                             mov             @r1,a
0917 19             1575                                             dec             r1
0918 18             1576                                             dec             r0
0919 DFF8           1577                                             djnz    r7,bufr
                    1578     
091B 784F           1579                                             mov             r0,#abin
091D 120000   F     1580                                             call            clear4
0920 78B8           1581                                     mov             r0,#work
0922 E6             1582     outr5:                  mov             a,@r0
0923 F552           1583                                             mov             abin+3,a
                    1584                                                                     ;n(hex)->abin
0925 120000   F     1585                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
0928 2552           1586                                             add             a,abin+3
092A F552           1587                                             mov             abin+3,a
092C 7853           1588                                             mov             r0,#adec
092E 7952           1589                                             mov             r1,#abin+3      ;hex->10
0930 120000   F     1590                                             call    bindec
0933 855C48         1591                                             mov             bufind+8,adec+9
0936 855B47         1592                                             mov             bufind+7,adec+8
0939 754966         1593                                             mov             bufind+9,#66h
093C 020000   F     1594                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1595                                             
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    26

                    1596                                     ;;;;;;;;;;;;;;;;;;;;;
                    1597     ;;;;;;;;;;;;;
                    1598     
093F 300508         1599     mo220:             jnb          bitavp,indoll
0942 301805         1600                                jnb          knizm,indoll;bitizm,indoll
0945 78AE           1601                                     mov             r0,#diap
0947 B6000E         1602                                     cjne    @r0,#0,nodi2
                    1603                                ;10-2
094A 300408         1604     indoll:         jnb             bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,па
                             м,вычR
094D 900000   F     1605                                             mov             dptr,#teOLL;OLL
0950 120000   F     1606                                             call    lotext
0953 D217           1607                                             setb    bitoll
0955 020000   F     1608     goonin1:                jmp             goonin  
                    1609     
0958 16             1610     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1611     
0959 B6FF01         1612                                     cjne    @r0,#0ffh,nodi9
095C 06             1613                                     inc             @r0
                    1614     
095D 120000   F     1615     nodi9:          call    loadUS
                    1616                                     ;call   louizm
                    1617                                     ;сбросить массив
0960 120000   F     1618                                     call     clmassix
0963 78B3           1619                                     mov             r0,#summa
0965 120000   F     1620                                     call    clear4
0968 786A           1621                                     mov             r0,#rez_A0
096A 120000   F     1622                                     call    clear4
096D C20F           1623                                     clr             bitnul  
096F D207           1624                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0971 020000   F     1625                                jmp     goonin
                    1626     
0974 16             1627     nochi0:                 dec             @r0                     ;СТИ-1
0975 020000   F     1628                                     jmp             labelB  
                    1629     
                    1630             
                    1631     ;;;;;;;;;;;;;;;
                    1632     
0978                1633     nop3_0: ;;      ;rez_A-rez_A0
                    1634                     ;;                      mov             r0,#rez_A0
                    1635                     ;;                      call    resar8
                    1636                     ;;                      call    lsub
                    1637                     ;;                      mov             r0,#rez_A
                    1638                     ;;;                     call    saver2
                    1639     
0978 B70207         1640     no3parN:                        cjne    @r1,#2,no2parN
                    1641                                             ;в байт 0  записать пробел
097B 7946           1642                                             mov             r1,#bufind+6
097D 7720           1643                                             mov             @r1,#" ";0fdh;
097F 020000   F     1644                                             jmp             seeind;moveA3
                    1645     
0982                1646     no2parN:                        ;в байты 0 и 1 записать пробел
0982 7945           1647                                             mov             r1,#bufind+5
0984 7720           1648                                             mov             @r1,#" ";0fdh;" "
0986 09             1649                                             inc             r1
0987 7720           1650                                             mov             @r1,#" ";0fdh;" "
0989 8076           1651                                             jmp             seeind;moveA3
098B 8074           1652      rseeind:               jmp             seeind
                    1653     
098D                1654     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1655                                     
                    1656                                             
098D                1657     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1658                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1659                     ;до конца цикла измерения результат не размещать в буфере
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    27

                    1660                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1661                     ;и возврату в режим измерения
098D 20145C         1662                                             jb              bitvich,rnorvich
0990 201059         1663                                             jb              bitt2,rnorvich
0993 2017F5         1664                                             jb              bitoll,rseeind
                    1665                                             
0996 2011F2         1666                                             jb              bitmenu,rseeind
0999 200BEF         1667                                             jb              bitmem,rseeind
                    1668     ;;;;;;;;;;;;;;
                    1669                                             ; mov           r0,#rez_A3
                    1670                                             ;call   resar2
                    1671                                             ;call   ftol                    ;float->int r2..r5
                    1672     ;;;;;;;;
099C 789C           1673                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
099E 120000   F     1674                                             call    resar2;????????????????17.01.07
                    1675                                     
09A1 120000   F     1676                                             call    maform
09A4 784F           1677                                             mov             r0,#abin
09A6 120000   F     1678                                             call    saver2
                    1679     ;;;;;;;;
                    1680                                             
09A9 7853           1681                                             mov             r0,#adec
09AB 7952           1682                                             mov             r1,#abin+3      ;hex->10
09AD 120000   F     1683                                             call    bindec
                    1684                                     
09B0 785C           1685                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09B2 7946           1686                                             mov             r1,#bufind+6
09B4 7F07           1687                                             mov             r7,#7
09B6 E6             1688     bufdec:                         mov             a,@r0
09B7 2430           1689                                             add             a,#30h
09B9 F7             1690                                             mov             @r1,a
09BA 19             1691                                             dec             r1
09BB 18             1692                                             dec             r0
09BC DFF8           1693                                             djnz    r7,bufdec
09BE 7847           1694                                             mov             r0,#bufind+7
09C0 762D           1695                                             mov             @r0,#2dh          ;-2..-9
09C2 7840           1696                                             mov             r0,#bufind
09C4 762B           1697                                             mov             @r0,#2bh
09C6 300202         1698                                             jnb             znmat,nozzmi;bitznak,nozzmi
09C9 762D           1699                                             mov             @r0,#2dh
09CB 79AE           1700     nozzmi:                         mov             r1,#diap
09CD 7848           1701                                             mov             r0,#bufind+8
09CF E7             1702                                             mov             a,@r1
09D0 B4080B         1703                                             cjne    a,#8,nodi8
09D3 20151D         1704                                             jb              biteizm,seegoon
09D6 7630           1705                                             mov             @r0,#30h                 ;10-10
09D8 18             1706                                             dec             r0
09D9 7663           1707                                             mov             @r0,#63h;31h
09DB 08             1708                                             inc             r0
09DC 8015           1709                                             jmp             seegoon
09DE B4090F         1710     nodi8:                          cjne    a,#9,nodis9
09E1 20150F         1711                                     jb              biteizm,seegoon
09E4 7631           1712                                             mov             @r0,#31h           ;10-11
09E6 18             1713                                             dec             r0
09E7 7663           1714                                             mov             @r0,#63h;31h
                    1715                                     
09E9 08             1716                                             inc             r0
09EA 8007           1717                                             jmp             seegoon
                    1718     
09EC 8079           1719     rnorvich:               jmp             norvich
09EE 8088           1720     rno3parN:               jmp             no3parN
                    1721     
09F0 2432           1722     nodis9:                         add             a,#32h
09F2 F6             1723                                             mov             @r0,a;#37h;"T";
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    28

09F3 08             1724     seegoon:                        inc             r0
09F4 7641           1725                                             mov             @r0,#"A";"E";
09F6 08             1726                                             inc             r0
09F7 7600           1727                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09F9 08             1728                                             inc             r0;             mov             buf
                             ind+11
09FA 7610           1729                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1730                                             
                    1731     ;;;;;;;;;;;;;;;
                    1732     ;;;;;;goonind:
09FC 79AF           1733                                             mov             r1,#parN        ; ??????
09FE B703ED         1734                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1735             
0A01                1736     seeind:                         ;;;;;;;;;;;;;
0A01 784A           1737                                             mov             r0,#bufind+10
0A03 E6             1738                                             mov             a,@r0
0A04 300F03         1739                                             jnb             bitnul,nnnul
0A07 4408           1740                                             orl             a,#08h
0A09 F6             1741                                             mov             @r0,a
0A0A 799A           1742      nnnul:         mov             r1,#parT
0A0C B70204         1743                                             cjne    @r1,#2,nsec1
0A0F 4420           1744                                             orl             a,#20h    ;1s
0A11 8009           1745                                             jmp             nsec10
0A13 B70104         1746     nsec1:          cjne    @r1,#1,nsec11
0A16 4440           1747                                             orl             a,#40h                  ;10s
0A18 8002           1748                                             jmp             nsec10
                    1749                                     
0A1A 4410           1750     nsec11:         orl             a,#10h
                    1751                                                      ;0,1s
                    1752     ;;;;;;;;;;;;;;;;
0A1C                1753     nsec10:         
                    1754     
                    1755     
0A1C 784A           1756                                             mov             r0,#bufind+10   
0A1E F6             1757                                             mov             @r0,a
0A1F 300504         1758                                             jnb             bitavp,nobavp
0A22 4404           1759                                             orl             a,#04           ;bufind+10.2
0A24 F6             1760                                             mov             @r0,a
0A25 F6             1761                                             mov             @r0,a   
0A26 784A           1762     nobavp:         mov             r0,#bufind+10   
0A28 F6             1763                                             mov             @r0,a   
0A29 301803         1764                                        jnb          knizm,nobitizm
0A2C 4402           1765                                             orl             a,#02
0A2E F6             1766                                              mov            @r0,a
0A2F                1767     nobitizm:                       
0A2F 301A07         1768                                             jnb             bitakt,notakt
0A32 C21A           1769                                             clr             bitakt
0A34 534AFE         1770                                             anl             bufind+10,#0feh
0A37 8005           1771                                             jmp             taktind
0A39 D21A           1772     notakt:                         setb    bitakt
0A3B 434A01         1773                                             orl             bufind+10,#01                      
                                          
0A3E                1774     taktind:                
                    1775     ;;;;;;;;;
0A3E 301517         1776                                             jnb             biteizm,yesind
0A41 79B1           1777                                             mov             r1,#vichR
0A43 7848           1778                                             mov             r0,#bufind+8
0A45 7654           1779                                             mov             @r0,#'T'
0A47 08             1780                                             inc             r0
0A48 B72104         1781                                             cjne    @r1,#21h,test9i
0A4B 7631           1782                                             mov             @r0,#31h;11A
                    1783                                     ;       dec             r0
                    1784                                     ;       mov             @r0,#63h
0A4D 8009           1785                                             jmp             yesind
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    29

0A4F B72204         1786     test9i:         cjne    @r1,#22h,test7i
0A52 7632           1787                                             mov             @r0,#32h;39h;09A
0A54 8002           1788                                             jmp             yesind
0A56 7633           1789     test7i:         mov             @r0,#33h;37h;07A
                    1790     ;;;;;;;;;
0A58                1791     yesind:         
0A58 301203         1792                                             jnb             bitklb,noklb
0A5B 434A80         1793                                             orl             bufind+10,#80h; on kmp
0A5E 300A03         1794     noklb:          jnb             bitbon,nobuf
0A61 434B02         1795                                             orl             bufind+11,#02h; on pysk
0A64 120000   F     1796     nobuf:          call    ind        ;пп выдачи на индикатор
0A67                1797     norvich: 
0A67 789A           1798                                     mov             r0,# parT
0A69 79AC           1799                                             mov             r1,#chind
0A6B B60152         1800                                             cjne    @r0,#1,rnot1in
0A6E                1801     labelB:                    ;;;;;;;;;;;
                    1802                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A6E 789F           1803                                                     mov     r0,#rez_A3+3
                    1804                             ;;;;;;;;
0A70 79BB           1805                             mov             r1,#work+3
0A72 E6             1806                             mov             a,@r0
0A73 7F07           1807                             mov             r7,#7;кол сдв вправо
0A75 C3             1808     dvig3:          clr             c
0A76 13             1809                             rrc             a
0A77 DFFC           1810                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A79 FA             1811                             mov             r2,a    ;сохр байт
0A7A 18             1812                             dec             r0              ;rez_A3+2
0A7B E6             1813                             mov             a,@r0
0A7C C0E0           1814                             push    acc
0A7E C3             1815                             clr             c
0A7F 7F01           1816                             mov             r7,#1
0A81 C3             1817     dvig2:          clr             c
0A82 33             1818                             rlc             a
0A83 DFFC           1819                             djnz    r7,dvig2 ;d12..d11       средний байт
0A85 4A             1820                             orl             a,r2
0A86 F7             1821                             mov             @r1,a;сформ мл байт
0A87 19             1822                             dec             r1
0A88 D0E0           1823                             pop             acc
                    1824                             
0A8A 7F07           1825                             mov             r7,#7
0A8C C3             1826     dvig1:          clr             c
0A8D 13             1827                             rrc             a
0A8E DFFC           1828                             djnz    r7,dvig1 ;d18     ср байт
0A90 FA             1829                             mov             r2,a   ;сохр
0A91 18             1830                             dec             r0
0A92 E6             1831                             mov             a,@r0 ;rez_A3+1
0A93 C0E0           1832                             push    acc
                    1833                     
0A95 7F01           1834                             mov             r7,#1
0A97 C3             1835     dvig0:          clr             c
0A98 33             1836                             rlc             a
0A99 DFFC           1837                             djnz    r7,dvig0 ;        d21..d16
0A9B 4A             1838                             orl             a,r2
0A9C F7             1839                             mov             @r1,a   ; сформ средний  байт
0A9D 19             1840                             dec             r1
0A9E D0E0           1841                             pop             acc       ;rez_A3+1
                    1842                             ;;;;;;;;;;;;;;
                    1843     ;                       jb              acc.7,dvm
0AA0 C3             1844                             clr             c
0AA1 7F07           1845                             mov             r7,#7
0AA3 C3             1846     dvig4:          clr             c
0AA4 13             1847                             rrc             a
0AA5 DFFC           1848                             djnz    r7,dvig4 ;        d22
0AA7 FA             1849                             mov             r2,a   ;сохр
0AA8 18             1850                             dec             r0;     rez_A3
0AA9 E6             1851                             mov             a,@r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    30

                    1852                             ;;;;;
0AAA 7F01           1853                             mov             r7,#1
0AAC C3             1854     vig0:           clr             c
0AAD 33             1855                             rlc             a
0AAE DFFC           1856                             djnz    r7,vig0 ;         d24..d30
0AB0 4A             1857                             orl             a,r2
0AB1 F7             1858                             mov             @r1,a   ; сформ   байт
0AB2 19             1859                             dec             r1
0AB3 E6             1860                             mov             a,@r0
                    1861                             ;;;;;
0AB4 20E70C         1862                             jb              acc.7,dvm
0AB7 C3             1863                             clr             c
0AB8 7F07           1864                             mov             r7,#7
0ABA C3             1865     vig4:           clr             c
0ABB 13             1866                             rrc             a
0ABC DFFC           1867                             djnz    r7,vig4 ;         d
0ABE 8009           1868                             jmp             endsdv
                    1869     
0AC0 020000   F     1870     rnot1in:                jmp             not1in
                    1871     
                    1872     ;;;;;;;;;;;;                                    
0AC3 7F07           1873     dvm:            mov             r7,#7
0AC5 D3             1874     dvig6:          setb            c
0AC6 13             1875                             rrc             a
0AC7 DFFC           1876                             djnz    r7,dvig6 ;        d31
0AC9 F7             1877     endsdv:         mov             @r1,a
                    1878                                                             
                    1879      ;->work   
                    1880                             
0ACA 900000   F     1881                             mov             dptr,#chzap
0ACD 120000   F     1882                             call     ldc_long
0AD0 78BB           1883                              mov            r0,#work+3
0AD2 120000   F     1884                             call    ladd
0AD5 ED             1885                             mov             a,r5
0AD6 F5D2           1886                             mov             DAC0L,a
                    1887                             
0AD8 EC             1888                             mov             a,r4
0AD9 F5D3           1889                             mov             DAC0H,a
                    1890     
                    1891                                             ;;;;;;;;;;
0ADB 78CF           1892                                             mov                     r0,#chbuf               ;fl
                             oat
0ADD 120000   F     1893                                             call            resar2
0AE0 900000   F     1894                                             mov                     dptr,#ch_2;ch0;ch_1
0AE3 120000   F     1895                                             call            ldc_ltemp
0AE6 1201D6         1896                                             call            flcmp
0AE9 5020           1897                                             jnc                     rnobuf0
                    1898                                             
0AEB 900000   F     1899                                             mov                     dptr,#ch_1
0AEE 120000   F     1900                                             call            ldc_ltemp
0AF1 1201D1         1901                                             call            flsub
0AF4 900E00         1902                                             mov                     dptr,#chbuf1               
                                  ;СБ1 внешн озу
0AF7 EA             1903                                             mov                     a,r2
0AF8 F0             1904                                             movx            @dptr,a
0AF9 A3             1905                                             inc                     dptr
0AFA EB             1906                                             mov                     a,r3
0AFB F0             1907                                             movx            @dptr,a
0AFC A3             1908                                             inc                     dptr
0AFD EC             1909                                             mov                     a,r4
0AFE F0             1910                                             movx            @dptr,a
0AFF A3             1911                                             inc                     dptr
0B00 ED             1912                                             mov                     a,r5
0B01 F0             1913                                             movx            @dptr,a
                    1914                                             
                    1915                                             
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    31

                    1916                                             ;jnc                    rnobuf0
0B02 200909         1917                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0B05 200A08         1918                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B08 020000   F     1919                                             jmp             gocikle
0B0B 020000   F     1920     rnobuf0:        jmp             nobuf0
0B0E                1921     yesprd: ;передать   A3 в буфер
0B0E 8045           1922                                             jmp             goonT
0B10                1923     yesbuf:         ;записать   A3 в буфер
0B10 120000   F     1924                                             call            resa_hl;dptr-
0B13 120000   F     1925                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1926                                                                             ;в ячейке saven_bl
0B16 120000   F     1927                                             call            save_hl
0B19 78AE           1928                                             mov                     r0,#diap
0B1B E6             1929                                             mov                     a,@r0
0B1C 7938           1930                                             mov                     r1,#nblok
0B1E B70104         1931                                             cjne            @r1,#1,nosav1
0B21 F534           1932                                             mov                     sadiap,a
0B23 8012           1933                                             jmp                     gotostrob
0B25 B70204         1934     nosav1:         cjne            @r1,#2,nosav2
0B28 F532           1935                                             mov                     sadiap2,a
0B2A 800B           1936                                     jmp                     gotostrob
0B2C B70304         1937     nosav2:         cjne            @r1,#3,nosav3
0B2F F531           1938                                             mov                     sadiap3,a
0B31 8004           1939                                     jmp                     gotostrob
0B33                1940     nosav3:         
0B33 F530           1941                                             mov                     sadiap4,a
0B35 8000           1942                                     jmp                     gotostrob
                    1943     
                    1944                                             ;строб
0B37                1945     gotostrob:
0B37 E586           1946                                     mov             a,P6            ;p6.4=0
0B39 54EF           1947                             anl             a,#0efh
0B3B F586           1948                             mov             P6,a
0B3D 00             1949                             nop
0B3E 00             1950                             nop
                    1951                                     
0B3F E586           1952                             mov             a,P6                    ;p6.4=1 
0B41 4410           1953                             orl             a,#10h
0B43 F586           1954                             mov             P6,a
                    1955                                     ;;;;;;;;;
0B45 E5DA           1956                             mov             a,PCA0CPM0;     
0B47 4446           1957                             orl             a,#46h;anl              a,#0fbh
0B49 F5DA           1958                             mov             PCA0CPM0,a
                    1959     
0B4B 75CDD0         1960                             mov             TH2,#0d0h
0B4E 75CC00         1961                             mov             TL2,#00
                    1962     
0B51 D2CA           1963                             setb            T2CON.2
0B53 D2AD           1964                             setb            ET2;IE.5                            
0B55 78CD           1965     goonT:                          mov             r0,#interva;high  byte loadr2
0B57 E6             1966                                             mov             a,@r0
0B58 FC             1967                                             mov             r4,a
0B59 08             1968                                             inc             r0
0B5A E6             1969                                             mov             a,@r0
0B5B FD             1970                                             mov             r5,a
0B5C E4             1971                                             clr             a
0B5D FB             1972                                             mov             r3,a
0B5E FA             1973                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B5F 120402         1974                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1975     
0B62 789A           1976                                             mov             r0,#parT
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    32

0B64 B60108         1977                                             cjne    @r0,#1,nott1
0B67 900000   F     1978                                             mov                     dptr,#ch_2       
0B6A 120000   F     1979                                             call            ldc_ltemp
0B6D 8009           1980                                             jmp                     intmul
                    1981     
0B6F B60225         1982     nott1:                  cjne    @r0,#2,nott2
0B72 900000   F     1983                                                     mov                     dptr,#ch_10      
0B75 120000   F     1984                                                     call            ldc_ltemp
                    1985                                                                             
0B78 120203         1986     intmul: call            flmul                                   ;*10
0B7B 900E00         1987     intmul1:        mov             dptr,#chbuf1    ;СБ1
0B7E E0             1988                                             movx    a,@dptr
0B7F F508           1989                                             mov             r8,a
0B81 A3             1990                                             inc             dptr
0B82 E0             1991                                     movx    a,@dptr
0B83 F509           1992                                             mov             r9,a
0B85 A3             1993                                             inc             dptr
0B86 E0             1994                                     movx    a,@dptr
0B87 F50A           1995                                             mov             r10,a
0B89 A3             1996                                             inc             dptr
0B8A E0             1997                                             movx    a,@dptr
0B8B F50B           1998                                             mov             r11,a
0B8D 120166         1999                                             call            fladd           ;СБ+СБ1
0B90 78CF           2000     intmul2:        mov                     r0,#chbuf
0B92 120000   F     2001                                     call            saver2          ;*2
                    2002                                     
0B95 8035           2003                                     jmp             gocikle
                    2004     
0B97 B6030B         2005     nott2:                  cjne    @r0,#3,nott3
0B9A 900000   F     2006                                                     mov                     dptr,#ch_2       
0B9D 120000   F     2007                                                     call            ldc_ltemp
0BA0 120203         2008                                                     call            flmul
0BA3 80EB           2009                                                     jmp                     intmul2            
                                                  ;*2
                    2010     
                    2011     
0BA5 B60414         2012     nott3:          cjne    @r0,#4,nott4
0BA8 900000   F     2013                                             mov                     dptr,#ch_10      
0BAB 120000   F     2014                                             call            ldc_ltemp       ;/10*4
0BAE 1202B7         2015                                             call            fldiv
0BB1 900000   F     2016                                             mov                     dptr,#ch_4       
0BB4 120000   F     2017                                             call            ldc_ltemp
0BB7 120203         2018                                             call            flmul
0BBA 80D4           2019                                             jmp             intmul2
                    2020     
0BBC B6050B         2021     nott4:          cjne    @r0,#5,nott5
0BBF 900000   F     2022                                                     mov                     dptr,#ch_2       
0BC2 120000   F     2023                                             call            ldc_ltemp;*2
0BC5 120203         2024                                             call            flmul
0BC8 80C6           2025                                             jmp             intmul2;T=5
0BCA                2026     nott5:  ;               mov                     dptr,#ch_1       
                    2027                                     ;       call            ldc_ltemp
                    2028                                     ;       call            flmul
0BCA 80C4           2029                                     jmp                     intmul2                            
                                  ;*1
                    2030     
                    2031     
0BCC 300708         2032     gocikle:        jnb             bitzus,nofz                     
0BCF 120000   F     2033                             call    z_05s    ;0,5c
0BD2 120000   F     2034                             call    z_05s    ;0,5c
0BD5 C207           2035                             clr     bitzus;bitbuf бит задержки засылки us
0BD7 020000   F     2036     nofz:           jmp     labelA;rebyte
                    2037     
                    2038     
0BDA 80F0           2039     yestt5:         jmp             gocikle
                    2040     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    33

0BDC 78CF           2041     nobuf0:                 mov             r0,#chbuf
0BDE 120000   F     2042                                                     call            resar2
0BE1 900000   F     2043                                                     mov                     dptr,#ch_1       
0BE4 120000   F     2044                                             call            ldc_ltemp
0BE7 1201D1         2045                                             call            flsub
0BEA 78CF           2046                                             mov                     r0,#chbuf       
0BEC 120000   F     2047                                             call            saver2  
0BEF 80DB           2048                                             jmp             gocikle
                    2049     
                    2050     
0BF1 B60205         2051     not1in:                         cjne    @r0,#2,not2in
0BF4 7701           2052                                             mov             @r1,#1           ;T=2
0BF6 020000   F     2053                                             jmp     labelB
                    2054     
0BF9 B60305         2055     not2in:                         cjne    @r0,#3,not3in
0BFC 7701           2056                                             mov             @r1,#1;9                ;T=3
0BFE 020000   F     2057                                             jmp     labelB
0C01 7703           2058     not3in:                         mov             @r1,#3;19
0C03 020000   F     2059                                             jmp     labelB
                    2060     
                    2061     
                    2062     ;;;;;;;;;;;3.11.06
                    2063     
                    2064     ;;коррекция 0
0C06 7883           2065     KORnul:         mov             r0,#chdel
0C08 B60010         2066                             cjne    @r0,#0,nonuldel
                    2067                                     
0C0B E584           2068                             mov             a,p4                    ;сохр  us
0C0D F536           2069                             mov             saus,a
0C0F E585           2070                             mov             a,p5
0C11 F537           2071                             mov             saus+1,a
                    2072     
0C13 900000   F     2073                             mov             dptr,#kor0us
0C16 120000   F     2074                             call    lospus          ;упр слово коррекции 0
0C19 8018           2075                             jmp             chdelmo
                    2076     
0C1B                2077     nonuldel:       ;cjne   @r0,#7,no4del
0C1B B6031B         2078                                                     cjne    @r0,#3,no4del
                    2079                             ;рез ->AN
0C1E 7862           2080                             mov             r0,#rez_A;->r2..r5
0C20 120000   F     2081                             call    resar2
                    2082             
                    2083                                     ;;;;;;;;;;
0C23 120402         2084                             call    altof           ;r2..r5->float
0C26 7884           2085                             mov             r0,#kor0_AN;->kor0_AN
0C28 120000   F     2086                             call    saver2
                    2087                                     
0C2B E536           2088                             mov             a,saus                  ;восстан исходное упр слово
0C2D F584           2089                             mov             p4,a
0C2F E537           2090                             mov             a,saus+1
0C31 F585           2091                             mov             p5,a            
0C33 7883           2092     chdelmo:        mov             r0,#chdel
0C35 06             2093                             inc             @r0             ;chdel+1
0C36 020000   F     2094                             jmp              rebyte
                    2095     
0C39                2096     no4del:         ;cjne   @r0,#14,chdelmo
0C39 B606F7         2097                                             cjne    @r0,#6,chdelmo
0C3C 7600           2098                             mov             @r0,#0          ;chdel
0C3E 7898           2099                             mov             r0,#chinkor
0C40 7600           2100                             mov             @r0,#00;1;00;02;600;
0C42 08             2101                             inc             r0
0C43 76C8           2102                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0C45 120000   F     2103                             call    clmassix;сбросить массив скольз среднего
0C48                2104     bonpart:
0C48 300A20         2105                             jnb                     bitbon,rebyter
0C4B 78CF           2106                             mov                     r0,#chbuf
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    34

0C4D 120000   F     2107                             call            resar2
0C50 799A           2108                             mov                     r1,#parT
0C52 B70211         2109                             cjne            @r1,#2,no6del
0C55 900000   F     2110                             mov                     dptr,#ch_7;5
0C58                2111     no5del:
0C58 120000   F     2112                             call            ldc_ltemp
0C5B 1201D1         2113                             call            flsub   
0C5E 78CF           2114                             mov                     r0,#chbuf
0C60 120000   F     2115                             call            saver2
0C63 020000   F     2116                             jmp              rebyte
0C66                2117     no6del:
0C66 900000   F     2118                             mov                     dptr,#ch_1
0C69 80ED           2119                             jmp                     no5del
                    2120     
                    2121     
0C6B 020000   F     2122     rebyter:        jmp              rebyte
                    2123     
0C6E 7981           2124     tekaout:        mov             r1,#chavt
0C70 770C           2125                                             mov             @r1,#0ch;6;1;
0C72 09             2126                                             inc             r1
0C73 7780           2127                                             mov             @r1,#80h;40h;
0C75 020000   F     2128                                             jmp             noavk
                    2129     
                    2130     
                    2131     ;автокалибровка
0C78 200AF3         2132     autoka:  jb             bitbon,tekaout;rebyter
0C7B                2133     nulavt:  ;;;;;
0C7B 7883           2134                             mov             r0,#chdel
0C7D B60016         2135                             cjne    @r0,#0,nndelch
0C80 E584           2136                             mov             a,p4                    ;сохр  us
0C82 F536           2137                             mov             saus,a
0C84 E585           2138                             mov             a,p5
0C86 F537           2139                             mov             saus+1,a
                    2140     
0C88 E585           2141                             mov   a,p5
0C8A 4404           2142                             orl             a,#04              ;p5.2=1
0C8C 00             2143                             nop
0C8D 00             2144                             nop
0C8E 543F           2145                             anl             a,#3fh          ;p5.6,p5.7=0
0C90 F585           2146                             mov   p5,a
0C92 06             2147                             inc             @r0
0C93 020000   F     2148                             jmp              rebyte
                    2149     
0C96 B6033D         2150     nndelch:        cjne    @r0,#3,n4delch
                    2151                             ;pez->A+
                    2152                             ;K+=000/(A+-AN)
                    2153                             ;mov            r0,#rez_A;->r2..r5
                    2154                             ;call   resar2
0C99 E577           2155                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C9B FA             2156                                     mov             r2,a
0C9C E578           2157                                     mov             a,reacp+1
0C9E FB             2158                                     mov             r3,a
0C9F E579           2159                                     mov             a,reacp+2
0CA1 FC             2160                                     mov             r4,a
0CA2 E57A           2161                                     mov             a,reacp+3
0CA4 FD             2162                                     mov             r5,a
                    2163                                     ;;;;;;;;;;;;;;;
0CA5 120402         2164                             call    altof                   ;r2..r5->float
0CA8 7888           2165                             mov             r0,#rezAp;->rezAp
0CAA 120000   F     2166                             call    saver2                          
0CAD 7884           2167                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CAF 120000   F     2168                             call    resar8                          
0CB2 1201D1         2169                             call    flsub           ; r2..r5(A+-AN)
0CB5 120000   F     2170                             call    move28     ;r2..r5->r8..r11
0CB8 900000   F     2171                             mov             dptr,#CH2tho;000->r2..r5 float
0CBB 120000   F     2172                             call    ldc_long                
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    35

0CBE 1202B7         2173                             call    fldiv
0CC1 EA             2174                             mov             a,r2
0CC2 547F           2175                             anl             a,#7fh
0CC4 FA             2176                             mov             r2,a
0CC5 7890           2177                             mov             r0,#koefKp;->koefKp
0CC7 120000   F     2178                             call    saver2
                    2179                       
                    2180                     ;       anl             P5,#0feh                ;p5.0=0 
0CCA E585           2181                     mov             a,P5
0CCC 543B           2182                             anl             a,#3bh;acp-
0CCE F585           2183                             mov             P5,a
0CD0 7883           2184                             mov             r0,#chdel
0CD2 06             2185                             inc             @r0                       ;ch+1
0CD3 020000   F     2186                             jmp             rebyte
                    2187     
0CD6 B6063F         2188     n4delch:        cjne    @r0,#6,n8delch
                    2189                             ; pez->A-
                    2190                             ;K-=000/(A--AN)
                    2191                     ;       mov     r0,#rez_A;->r2..r5
                    2192                     ;       call    resar2
0CD9 E577           2193                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CDB FA             2194                                     mov             r2,a
0CDC E578           2195                                     mov             a,reacp+1
0CDE FB             2196                                     mov             r3,a
0CDF E579           2197                                     mov             a,reacp+2
0CE1 FC             2198                                     mov             r4,a
0CE2 E57A           2199                                     mov             a,reacp+3
0CE4 FD             2200                                     mov             r5,a
                    2201                                     ;;;;;;;;;;;;;;;
0CE5 120402         2202                             call    altof                   ;r2..r5->float
0CE8 788C           2203                             mov             r0,#rezAm;->rezAm
0CEA 120000   F     2204                             call    saver2                          
0CED 7884           2205                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CEF 120000   F     2206                             call    resar8                          
0CF2 1201D1         2207                             call    flsub                   ; r2..r5(A--AN)
0CF5 120000   F     2208                             call    move28                  ;r2..r5->r8..r11
0CF8 900000   F     2209                             mov             dptr,#CH2tho    ;000->r2..r5 float
0CFB 120000   F     2210                             call    ldc_long                
0CFE 1202B7         2211                             call    fldiv
0D01 EA             2212                             mov             a,r2
0D02 547F           2213                             anl             a,#7fh
0D04 FA             2214                             mov             r2,a
0D05 7894           2215                             mov             r0,#koefKm;->koefKm
0D07 120000   F     2216                             call    saver2
                    2217                        
0D0A E536           2218                             mov             a,saus                  ;восстан исходное упр слово
0D0C F584           2219                             mov             p4,a
0D0E E537           2220                             mov             a,saus+1
0D10 F585           2221                             mov             p5,a            
0D12 7883           2222                             mov             r0,#chdel
0D14 06             2223                             inc             @r0                       ;ch+1
0D15 020000   F     2224                        jmp    rebyte
                    2225     
0D18 B6090F         2226     n8delch:        cjne    @r0,#9,n12delch
0D1B 7600           2227                             mov             @r0,#0
0D1D 7981           2228                             mov             r1,#chavt
0D1F 770C           2229                             mov             @r1,#0ch;6;1;
0D21 09             2230                             inc             r1
0D22 7780           2231                             mov             @r1,#80h;40h;
0D24 120000   F     2232                             call   clmassix     ;сбросить массив среднего
0D27 020000   F     2233                             jmp             rebyte; bonpart;
0D2A 06             2234     n12delch:       inc             @r0
0D2B 020000   F     2235                             jmp             rebyte
                    2236     
                    2237     
                    2238     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    36

                    2239                                 
0D2E 020000   F     2240     rout6:          jmp             out6
0D31 020000   F     2241     rlabelF:        jmp             labelF  
0D34 020000   F     2242     rknrazr:        jmp             knrazr  
0D37 020000   F     2243     rknopt:         jmp             knopt
0D3A 020000   F     2244     rizman:         jmp             izman
                    2245             
0D3D 020000   F     2246     no0chkl:        jmp             kkout6
0D40 75AD00         2247                                                     mov             P3IF,#00;               обя
                             зательно сбросить опять приходит на обработку прерывания
0D43 75B0C0         2248                                             mov             P3,#0c0h
0D46 32             2249                                             reti
0D47                2250     keyb1:  ;IE6
                    2251     ;;;;;
                    2252                     ;       mov                     a,chkl+1                ;low
                    2253                     ;       jnz                     no0chkl
                    2254                     ;       mov                     a,chkl                          ;high
                    2255                     ;       jnz                     no0chkl
                    2256     ;;;;;
0D47 75E700         2257                                     mov             EIE2,#00H
0D4A 75AD00         2258                                     mov             P3IF,#00
                    2259                                     
0D4D C0E0           2260                                     push    acc
0D4F C0D0           2261                                     push    psw
0D51 C000           2262                                     push    rr0
0D53 C001           2263                                     push    rr1
0D55 C002           2264                                     push    rr2
0D57 C003           2265                                     push    rr3
0D59 C004           2266                                     push    rr4
0D5B C005           2267                                     push    rr5
0D5D C006           2268                                     push    rr6
0D5F C007           2269                                     push    rr7
0D61 C082           2270                                     push    dpl
0D63 C083           2271                                     push    dph
                    2272                                     ;clr            bitmig
                    2273                       ;;;;;;;;;;;;;;
0D65 120000   F     2274                                     call    z_01s;0,1s
0D68 120000   F     2275                                             call    z_01s
                    2276                                     ;восстан знакоместо при мигании
                    2277                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0D6B 78B2           2278                                     mov             r0,#marker
0D6D 7440           2279                                     mov             a,#bufind
0D6F 26             2280                                     add             a,@r0                   ;a=bufind+marker
0D70 F9             2281                                     mov             r1,a
0D71 A73C           2282                                     mov             @r1,savba
                    2283                                     ;;;;;;;;;;;
0D73 E5B0           2284                             mov             a,p3
0D75 20E644         2285                                     jb              acc.6,outviR;выход из режима выч R
0D78 E5B0           2286     gout6:                          mov             a,p3
0D7A 44FF           2287                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0D7C F5B0           2288                                     mov             p3,a
0D7E E5B0           2289                                     mov             a,p3
0D80 30E6AB         2290                                     jnb             acc.6,rout6             ;error
0D83 3004AB         2291                                     jnb             bitizm,rlabelF
0D86 75B0FE         2292                                     mov             p3,#0feh                ;реж IZM
0D89 E5B0           2293                                     mov             a,p3
0D8B 30E6AC         2294                                     jnb             acc.6,rizman
                    2295                                     ;;;;;;
0D8E 201232         2296                                     jb              bitklb,goklb
0D91 75B0FD         2297                                     mov             p3,#0fdh
0D94 E5B0           2298                                     mov             a,p3
0D96 30E69B         2299                                     jnb             acc.6,rknrazr             ;labelC
0D99 75B0FB         2300                                     mov             p3,#0fbh
0D9C E5B0           2301                                     mov             a,p3
0D9E 30E655         2302                                     jnb             acc.6,knright           ;->
0DA1 75B0F7         2303                                     mov             p3,#0f7h
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    37

0DA4 E5B0           2304                                     mov             a,p3
0DA6 30E68E         2305                                     jnb             acc.6,rknopt                    ;T
0DA9 75B0EF         2306                                     mov             p3,#0efh
0DAC E5B0           2307                                mov          a,p3
0DAE 30E615         2308                                     jnb             acc.6,pyskst                    ;pysk/stop
0DB1 75B0DF         2309                                     mov             p3,#0dfh
0DB4 E5B0           2310                                     mov             a,p3
0DB6 30E65E         2311                                jnb          acc.6,knvich
0DB9 020000   F     2312                                     jmp             izmpaT
                    2313     
0DBC 3006B9         2314     outviR: jnb             bitvi11,gout6   
0DBF C214           2315                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0DC1 C206           2316                                     clr             bitvi11
                    2317                                     
0DC3 020000   F     2318     goklb:          jmp             out6
                    2319     
0DC6 200A12         2320     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0DC9 D20A           2321                                     setb    bitbon  ;уст реж буфер вкл
0DCB 79D5           2322                                     mov                     r1,#volume;work         ;обьем блок
                             а
0DCD 7700           2323                                     mov                     @r1,#00
0DCF 09             2324                                     inc                     r1
0DD0 77C7           2325                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0DD2 434B02         2326                                     orl             bufind+11,#02h; on pysk
0DD5 120000   F     2327                                     call            ind
0DD8 020000   F     2328                                     jmp             izmpaT
0DDB C20A           2329     bufon:                  clr             bitbon  ;уст реж буфер выкл
0DDD 534BFD         2330                                             anl             bufind+11,#0fdh; off pysk
0DE0 120000   F     2331                                             call    ind
0DE3 020000   F     2332                                     jmp             izmpaT
                    2333     
0DE6 79B0           2334     tizmri:                 mov             r1,#level
0DE8 B70102         2335                                     cjne    @r1,#1,right2
                    2336                                     ;10s->HET
0DEB 8004           2337                                     jmp             right3
                    2338     
0DED 07             2339     right2:                 inc             @r1
0DEE 120000   F     2340                                     call    lolevT
                    2341                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0DF1 120000   F     2342     right3:                 call    ind
0DF4 807D           2343                                     jmp             izmfun
                    2344     
                    2345                             
                    2346                             
0DF6                2347     knright:        
                    2348     
0DF6 79AE           2349                                     mov             r1,#diap
                    2350                             ;перекл диапазон 1 поз вверх сбр массив
0DF8 17             2351                                     dec             @r1
0DF9 B7FF04         2352                                     cjne    @r1,#0ffh,diinc
0DFC 7700           2353                                     mov             @r1,#0
0DFE 8073           2354                                     jmp  izmfun
0E00 120000   F     2355     diinc:                  call     clmassix
0E03 78B3           2356                                     mov             r0,#summa
0E05 120000   F     2357                                     call    clear4
0E08 786A           2358                                     mov             r0,#rez_A0
0E0A 120000   F     2359                                     call    clear4
0E0D C20F           2360                                     clr             bitnul          ;гасить светодиод НУЛЬ  
0E0F 120000   F     2361                                     call    loadUS
0E12 805F           2362                                      jmp  izmfun
                    2363     
0E14 020000   F     2364     vit2_10:                jmp             out6
0E17                2365     knvich:                 ;12.02.07
0E17 789A           2366                                             mov                     r0,#parT
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    38

0E19 C3             2367                                             clr                     c
0E1A 7404           2368                                             mov                     a,#4 
0E1C 96             2369                                             subb            a,@r0
0E1D 40F5           2370                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0E1F 2015F2         2371                                             jb                      biteizm,vit2_10;не нажимать
                              кнопку ВЫЧ во время теста
0E22 200613         2372                               jb            bitvi11,onvich
0E25 C204           2373                                     clr             bitizm
0E27 D214           2374                                     setb    bitvich
                    2375                                     
0E29 78B1           2376                                     mov             r0,#vichR
0E2B 7611           2377                                     mov             @r0,#11h;;????????or 0
                    2378                                     ;ВЫЧИСЛИТЬ
0E2D 900000   F     2379                                     mov     dptr,#teVICH
0E30 120000   F     2380                                     call    lotext
0E33 120000   F     2381                                call         z_1s;;;;;;;
0E36 806C           2382                                     jmp              viout;izmpaT
                    2383     
0E38 C214           2384     onvich:                 clr             bitvich
0E3A 78B1           2385                                     mov             r0,#vichR
0E3C 7600           2386                                     mov             @r0,#0
0E3E 8037           2387                                     jmp              izmpaT
                    2388     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0E40 301820         2389     louizm:            jnb          knizm,lou
0E43 79AE           2390                                     mov             r1,#diap
0E45 C3             2391                                     clr             c
0E46 7403           2392                                     mov             a,#3
0E48 97             2393                                     subb    a,@r1
0E49 5006           2394                                     jnc             lldi23    ;10-2..10-5
                    2395                                     ;10-6..10-11
0E4B E584           2396                                     mov             a,p4
0E4D 54F7           2397                                     anl             a,#0f7h   ;d3
0E4F F584           2398                                     mov             p4,a
0E51 E7             2399     lldi23:                 mov             a,@r1
0E52 6403           2400                                     xrl             a,#3
0E54 7002           2401                                     jnz             lldi3
0E56 8005           2402                                     jmp             lldi2   ;10-5
0E58 E7             2403     lldi3:                  mov             a,@r1
0E59 6402           2404                                     xrl             a,#2            ;
0E5B 7006           2405                                     jnz             lou             
0E5D E585           2406     lldi2:                  mov             a,p5            ;10-4
0E5F 4408           2407                                     orl             a,#08
0E61 F585           2408                                     mov             p5,a
0E63 22             2409     lou:                    ret
                    2410                               ;;;;;;
0E64 201807         2411     izman:                  jb              knizm,knizmon
0E67 D218           2412                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2413                             ;       d3(k5 p4),d3(u5 p5)заслать us
0E69 120000   F     2414                                     call    louizm 
0E6C 8005           2415                                     jmp             izmfun
0E6E C218           2416     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0E70 120000   F     2417                                     call    loadUS;восстановить us
0E73                2418     izmfun:                 
0E73 D207           2419                                     setb    bitzus;bitbuf
0E75 8000           2420                                     jmp             labelE;;;;;;;;;;;;
                    2421                                     ;;;;;;;;;;;;;;
0E77                2422     izmpaT:
                    2423     ;;;;;;;;;;;;;;;;;
                    2424                     ;       clr             c 
                    2425                     ;       mov             r1,#parN
                    2426     
                    2427                     ;       mov             r0,#diap
                    2428                     ;       mov             a,#6            
                    2429                     ;       subb    a,@r0
                    2430                     ;       jnc             labelE          ;         ;10-2..10-8
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    39

                    2431                               
                    2432                     ;       mov             @r1,#2          ;10-9..10-11            
                    2433                     ;       jmp             labelE
                    2434     
                    2435     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0E77 789A           2436     labelE:                 mov             r0,#parT
0E79 793D           2437                                     mov             r1,#chkl
0E7B B60108         2438                                     cjne    @r0,#1,izmt2
0E7E 7700           2439                                     mov             @r1,#0
0E80 09             2440                                     inc             r1
0E81 7702           2441                                     mov             @r1,#2
0E83 020000   F     2442                                     jmp             out6
0E86 B60208         2443     izmt2:                  cjne    @r0,#2,izmt3
0E89 7700           2444                                     mov             @r1,#0
0E8B 09             2445                                     inc             r1
0E8C 7714           2446                                     mov             @r1,#20
0E8E 020000   F     2447                                     jmp             out6
                    2448     
0E91 7700           2449     izmt3:                  mov             @r1,#0
0E93 09             2450                                     inc             r1
0E94 77C8           2451                                     mov             @r1,#200
0E96 020000   F     2452                                     jmp             out6
                    2453     
                    2454     
                    2455     
                    2456     
0E99                2457     knopt: ;кнопка T
0E99 C204           2458                                clr          bitizm
0E9B D210           2459                                setb         bitt2
0E9D 79B7           2460                                mov          r1,#load
0E9F 7704           2461                                mov          @r1,#4;1s
0EA1 120000   F     2462                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2463                     
0EA4 793D           2464     viout:          mov             r1,#chkl
0EA6 7703           2465                             mov             @r1,#03
0EA8 09             2466                             inc             r1
0EA9 77E8           2467                             mov             @r1,#0e8h               ;1000
0EAB 020000   F     2468                             jmp             out6
                    2469     
0EAE                2470     knrazr:          
0EAE C3             2471     labelC:          clr            c
0EAF 78AF           2472                             mov             r0,#parN
0EB1 799A           2473                             mov             r1,#parT
0EB3 7402           2474                             mov             a,#2
0EB5 97             2475                             subb    a,@r1
0EB6 40BF           2476                             jc              labelE          ;T>2
0EB8 B60104         2477                             cjne    @r0,#1,noN1c
0EBB 7602           2478                             mov             @r0,#2          ;N=2
0EBD 80B8           2479                             jmp             labelE
                    2480     
0EBF B60204         2481     noN1c:          cjne    @r0,#2,not_1
0EC2 7603           2482                             mov             @r0,#3          ;N=3      ;10-2..10-8
0EC4 80B1           2483                             jmp             labelE
                    2484     
0EC6                2485     not_10: 
0EC6 7601           2486     not_1:          mov             @r0,#1                          ;N=1
0EC8 80AD           2487                             jmp     labelE
                    2488     
0ECA 020000   F     2489     rtizmri:        jmp             tizmri
                    2490     
0ECD 75B0F7         2491     ttout:          mov             p3,#0f7h
0ED0 20B6D1         2492                                             jb              p3.6,viout
0ED3 D204           2493                                             setb    bitizm;отжатие кнопки t
0ED5 C210           2494                                             clr             bitt2
0ED7 809E           2495                                             jmp             labelE
0ED9                2496     labelf:                 
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    40

0ED9 301037         2497                             jnb             bitt2,nofizm
0EDC 75B0FB         2498                        mov          p3,#0fbh
0EDF E5B0           2499                        mov          a,p3
0EE1 20E6E9         2500                        jb           acc.6,ttout;outF
0EE4 79B7           2501                        mov          r1,#load;parT
0EE6 B70503         2502                        cjne         @r1,#5,noft1
                    2503                        ;t=10s
0EE9 020000   F     2504                        jmp          out6;ft1izm
                    2505     
0EEC 07             2506     noft1:     inc          @r1;dec         @r1
0EED 120000   F     2507     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2508                             ;call   ind
0EF0 020000   F     2509                     jmp             out6;??????????????/
                    2510     
                    2511                             ;увеличить счетчик задержки клавиатуры
0EF3 783D           2512     outF:           mov             r0,#chkl
0EF5 7627           2513                             mov             @r0,#27h
0EF7 08             2514                             inc             r0
0EF8 7610           2515                             mov             @r0,#10h
0EFA 020000   F     2516                             jmp             out6;out7
                    2517     
0EFD 020000   F     2518     noviR1:         jmp             noviR
0F00 78B1           2519     outvich:        mov                     r0,#vichR
0F02 7600           2520                                             mov                     @r0,#0
0F04 C214           2521                                             clr                     bitvich
0F06 C206           2522                                             clr                     bitvi11
0F08 C211           2523                                             clr                     bitmenu
0F0A D204           2524                                             setb            bitizm
0F0C 78B2           2525                                             mov                     r0,#marker
0F0E 76FF           2526                                             mov                     @r0,#0ffh
0F10 020000   F     2527                                             jmp                     out6    
                    2528     
0F13 3014E7         2529     nofizm:         jnb             bitvich,noviR1
0F16 75B0DF         2530                                                     mov             p3,#0dfh
0F19 30B6E4         2531                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0F1C 78B1           2532                             mov             r0,#vichR
0F1E B61110         2533                             cjne    @r0,#11h,no11v6
0F21 75B0FB         2534                             mov                     p3,#0fbh;->
0F24 20B6CC         2535                             jb                      p3.6,outF
0F27 7612           2536                             mov             @r0,#12h                ;11= вычислить
0F29 900000   F     2537     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0F2C 120000   F     2538                             call    lotext
0F2F 80C2           2539                             jmp             outF
                    2540             
0F31 B61210         2541     no11v6:         cjne    @r0,#12h,no12v6
0F34 75B0FB         2542                             mov             p3,#0fbh;->
0F37 20B6B9         2543                             jb              p3.6,outF
0F3A 7611           2544                             mov             @r0,#11h;13h
0F3C 900000   F     2545                             mov             dptr,#teVICH;teOUT
0F3F 120000   F     2546                             call    lotext
0F42 80AF           2547                             jmp             outF
                    2548                     
0F44 B61310         2549     no12v6:         cjne    @r0,#13h,no13v6
0F47 75B0FB         2550                                                     mov             p3,#0fbh;->
0F4A 20B6A6         2551                             jb              p3.6,outF
0F4D 7611           2552                             mov             @r0,#11h
0F4F 900000   F     2553                             mov             dptr,#teVICH
0F52 120000   F     2554                             call    lotext
0F55 809C           2555                             jmp             outF
                    2556     
                    2557     ;кн -> A= 0000
                    2558     ;кн -> B= +00000
0F57 75B0FB         2559     no13v6:         mov             p3,#0fbh
0F5A E5B0           2560                             mov             a,p3
0F5C 20E635         2561                             jb              acc.6,chanZ
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    41

0F5F E53B           2562                             mov             a,movrig
0F61 B40714         2563                             cjne    a,#7,kon_B      
0F64 78B2           2564                             mov             r0,#marker      ;A= 0000
0F66 B60716         2565                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0F69 E53A           2566     rikn:           mov             a,movleft
0F6B F6             2567                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2568     ;                               29.12.06
                    2569     ;;;;;;;;;;;;;;;;;;
                    2570     ;необходимо не портить цифру в следуюем справа знакоместе
                    2571     ;т е сохранить ее в ячейке для мигания в противном случае
                    2572     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2573     ;       знакоместа
0F6C 78B2           2574                                     mov             r0,#marker
0F6E 7440           2575                                     mov             a,#bufind
0F70 26             2576                                             add             a,@r0                   ;a=bufind+m
                             arker
0F71 F9             2577                                             mov             r1,a
0F72 09             2578                                             inc             r1
0F73 873C           2579                                             mov             savba,@r1
0F75 020000   F     2580                                     jmp             outF
                    2581     
0F78 78B2           2582     kon_B:          mov             r0,#marker      ;B= +00000
0F7A B60802         2583                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0F7D 80EA           2584                                             jmp             rikn
0F7F                2585     mark0_8:
                    2586     ;                               29.12.06
                    2587     ;;;;;;;;;;;;;;;;;;
                    2588     ;необходимо не портить цифру в следуюем справа знакоместе
                    2589     ;т е сохранить ее в ячейке для мигания в противном случае
                    2590     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2591     ;       знакоместа ->B=+00000
0F7F 78B2           2592                                             mov             r0,#marker
0F81 7440           2593                                     mov             a,#bufind
0F83 26             2594                                             add             a,@r0                   ;a=bufind+m
                             arker
0F84 F9             2595                                             mov             r1,a
0F85 09             2596                                             inc             r1
0F86 873C           2597                                             mov             savba,@r1
0F88 78B2           2598                             mov             r0,#marker
0F8A 06             2599                             inc             @r0             ;       сдвинуть курсор вправо на 1
0F8B C219           2600                             clr             bitmig
0F8D B60901         2601                             cjne    @r0,#9,outma
0F90 18             2602                             dec             r0;ppp
0F91 020000   F     2603     outma:          jmp             outF
                    2604     
0F94 75B0FE         2605     chanZ:          mov             p3,#0feh
0F97 E5B0           2606                             mov             a,p3
0F99 20E611         2607                             jb              acc.6,chanma
                    2608                             ;изм знак в старшем разряде на противоположн
0F9C E543           2609                             mov             a,bufind+3
0F9E B42B06         2610                             cjne            a,#2bh,noplus
0FA1 75432D         2611                             mov                     bufind+3,#2dh           ;+->-   
0FA4 020000   F     2612                             jmp             outF
0FA7                2613     noplus:
0FA7 75432B         2614                             mov                     bufind+3,#2bh           ;-/+-
0FAA 020000   F     2615                             jmp             outF
0FAD 75B0FD         2616     chanma:         mov             p3,#0fdh
0FB0 E5B0           2617                             mov             a,p3
0FB2 20E603         2618                             jb              acc.6,outFl;labelL1
                    2619                             ;clr            bitmig
0FB5 120000   F     2620     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2621     
0FB8 020000   F     2622     outFl:                  jmp             outF
                    2623                     
                    2624     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    42

                    2625     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2626     
                    2627     
                    2628     
0FBB 020000   F     2629     rlabelL:        jmp                     labelL
0FBE 020000   F     2630     rfindmem:               jmp             findmem
0FC1 3011FA         2631     noviR:          jnb                     bitmenu,rfindmem;17.01.07
                    2632     ;;;;;;;;;;;;;
0FC4 78B1           2633                                             mov                     r0,#vichR
0FC6 7415           2634                                             mov                     a,#15h
0FC8 C3             2635                                             clr                     c
0FC9 96             2636                                             subb            a,@r0
0FCA 4016           2637                                             jc                      ri21_23
                    2638     
0FCC 75B0FB         2639                                             mov             p3,#0fbh; реж кн меню ->
0FCF 20B60A         2640                                             jb              p3.6,ri6
0FD2 78B1           2641                                             mov             r0,#vichR
0FD4 B61508         2642                                             cjne    @r0,#15h,norime
0FD7 7611           2643                                             mov             @r0,#11h
0FD9 120000   F     2644     norime1:        call            lomenu
0FDC 020000   F     2645     ri6:                    jmp             out6
0FDF 06             2646     norime:         inc             @r0
0FE0 80F7           2647                                             jmp             norime1
                    2648             
0FE2 7423           2649     ri21_23:        mov                     a,#23h          ;->
0FE4 C3             2650                                             clr                     c
0FE5 96             2651                                             subb            a,@r0
0FE6 4014           2652                                             jc                      ri_31
0FE8 75B0FB         2653                                             mov                     p3,#0fbh
0FEB 20B6EE         2654                                             jb                      p3.6,ri6
0FEE B62308         2655                                             cjne            @r0,#23h,no23ri
0FF1 7621           2656                                             mov                     @r0,#21h
0FF3 120000   F     2657                                             call            lomenu
0FF6 020000   F     2658                                             jmp                     out6
0FF9 06             2659     no23ri:         inc                     @r0
0FFA 80DD           2660                                             jmp                     norime1
0FFC B6312B         2661     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2662     
                    2663     ;;
0FFF 75B0FB         2664                                             mov                     p3,#0fbh
1002 20B6D7         2665                                             jb                      p3.6,ri6
                    2666     ;;
1005 301311         2667                                             jnb                     bitv19,gosk19
1008 900000   F     2668                                             mov                     dptr,#teS57_6;57,6
100B 120000   F     2669                                             call            lotext
100E 534B03         2670                                             anl                     bufind+11,#03h
1011 434B80         2671                                             orl                     bufind+11,#80h
1014 C213           2672                                             clr                     bitv19
1016 020000   F     2673                                             jmp                     out6
1019 900000   F     2674     gosk19:         mov                     dptr,#teS19_2
101C 120000   F     2675                                             call            lotext
101F 534B03         2676                                             anl                     bufind+11,#03h
1022 434B80         2677                                             orl                     bufind+11,#80h
1025 D213           2678                                             setb            bitv19
1027 020000   F     2679                                             jmp                     out6
                    2680     
                    2681     
                    2682     
                    2683     ;labelS2:       jmp                     out6
                    2684     
102A 7452           2685     no31ri:         mov                     a,#52h;42h              ;->
102C C3             2686                                             clr                     c
102D 96             2687                                             subb            a,@r0
102E 40AC           2688                                             jc                      ri6
1030 75B0FB         2689                                             mov                     p3,#0fbh                   
                                  ;41,42
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    43

1033 30B609         2690                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
1036 75B0FD         2691                                             mov                     p3,#0fdh
1039 20B6A0         2692                                             jb                      p3.6,ri6
103C 020000   F     2693                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
103F 020000   F     2694     rlabelN:                jmp             labelN
1042 020000   F     2695     moutF:          jmp             outF
                    2696     ;;;;;;;;;;;;;;;;;;;;;;;;;
1045 020000   F     2697     rnnmemb:        jmp             nnmemb
                    2698     
1048                2699     nbimenu:
1048 300BFA         2700     findmem:        jnb             bitmem,rnnmemb
104B 79B0           2701                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
104D B71113         2702                        cjne         @r1,#11h,nomem11
                    2703                        
1050 75B0FB         2704                        mov          p3,#0fbh
1053 E5B0           2705                        mov          a,p3
1055 20E6EA         2706                        jb           acc.6,moutF
1058 7712           2707                        mov          @r1,#12h
105A 900000   F     2708                        mov          dptr,#teWR      ;                       ЗАПИСЬ
105D 120000   F     2709                        call         lotext
1060 020000   F     2710                        jmp          outF
                    2711     
1063 B71213         2712     nomem11:   cjne         @r1,#12h,nomem12
1066 75B0FB         2713                             mov             p3,#0fbh
1069 E5B0           2714                        mov          a,p3
106B 20E6D4         2715                        jb           acc.6,moutF
106E 7713           2716                        mov          @r1,#13h
1070 900000   F     2717                        mov          dptr,#teLIST            ;ПРОСМОТР
1073 120000   F     2718                        call         lotext
1076 020000   F     2719                        jmp          outF
1079 B71313         2720     nomem12:         cjne           @r1,#13h,nomem13
107C 75B0FB         2721                                             mov             p3,#0fbh
107F E5B0           2722                        mov          a,p3
1081 20E6BE         2723                        jb           acc.6,moutF
1084 7714           2724                        mov          @r1,#14h
1086 900000   F     2725                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
1089 120000   F     2726                        call         lotext
108C 020000   F     2727                          jmp                outF
                    2728                             
108F B71413         2729     nomem13:cjne            @r1,#14h,labelL
1092 75B0FB         2730                             mov             p3,#0fbh
1095 E5B0           2731                        mov          a,p3
1097 20E6A8         2732                        jb           acc.6,moutF
109A 7711           2733                        mov          @r1,#11h
109C 900000   F     2734                        mov          dptr,#teCLE                     ;ОЧИСТКА
109F 120000   F     2735                        call         lotext
10A2 020000   F     2736                          jmp                outF
10A5                2737     labelL: 
                    2738                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
10A5 78B0           2739                                     mov                     r0,#level
10A7 B6210E         2740                                     cjne            @r0,#21h,nobl21
10AA 7622           2741                                     mov                     @r0,#22h                ;->БЛОК 
10AC 900000   F     2742                                     mov                     dptr,#teBL
10AF 120000   F     2743     me21_22:call            lotext
                    2744                             
10B2 120000   F     2745                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
10B5 020000   F     2746                                     jmp                     outF
                    2747     
10B8 B62207         2748     nobl21: cjne            @r0,#22h,nobl22
10BB 900000   F     2749                                     mov                     dptr,#teFULL
10BE 7621           2750                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2751     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    44

10C0 80ED           2752                                     jmp                     me21_22
                    2753     
                    2754     ;labl21:           cjne @r0,#21h,nolev1
                    2755     ;                       mov             p3,#0fbh
                    2756     ;                       mov             a,p3
                    2757     ;                       jb              acc.6,loutF
                    2758     ;                       cjne    @r0,#21h,labl22
                    2759     ;                       mov             @r0,#22h
                    2760                             ;БЛОК
                    2761     ;                       call    lotext
                    2762     ;                       jmp             outF
                    2763     ;labl22:                mov             @r0,#21h
                    2764                             ;ПОЛНАЯ
                    2765     ;                       call    lotext
                    2766     ;                       jmp             outF
                    2767                      
10C2 B62325         2768     nobl22:         cjne    @r0,#23h,go31l
10C5 75B0FB         2769     rigblo:         mov             p3,#0fbh
10C8 20B629         2770                                             jb              p3.6,llev2
10CB                2771     labL2:    ;  уст курсор в правую позицию 
                    2772                                     ;       кнопка                  ->
                    2773     ;;;;;;;;;;;;;;;;;;
                    2774     ;необходимо не портить цифру в следуюем справа знакоместе
                    2775     ;т е сохранить ее в ячейке для мигания в противном случае
                    2776     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2777     ;       знакоместа
10CB 78B2           2778                                             mov             r0,#marker
10CD 7440           2779                                     mov             a,#bufind
10CF 26             2780                                             add             a,@r0                   ;a=bufind+m
                             arker
10D0 F9             2781                                             mov             r1,a
10D1 09             2782                                             inc             r1
10D2 873C           2783                                             mov             savba,@r1
10D4 C219           2784                                             clr             bitmig
                    2785     ;;;;;;;;;;;;;;;;
10D6 78B2           2786                       mov           r0,#marker      ;курсор справа  ?
10D8 E53B           2787                             mov             a,movrig
10DA C3             2788                             clr             c
10DB 96             2789                             subb    a,@r0
10DC 6006           2790                             jz         equ1l
10DE E53B           2791                             mov             a,movrig;уст в правую позицию
10E0 F6             2792                             mov             @r0,a
10E1 020000   F     2793                             jmp             outF                                     
10E4 E53A           2794     equ1l:          mov             a,movleft;уст в левую позицию
10E6 F6             2795                             mov             @r0,a   
10E7 020000   F     2796     loutF:  jmp             outF
                    2797                     
                    2798     
10EA B63102         2799     go31l:          cjne    @r0,#31h,go41l
10ED 80D6           2800                             jmp             rigblo
10EF B6410B         2801     go41l:          cjne    @r0,#41h,norig2
10F2 80D1           2802                             jmp             rigblo
                    2803     
10F4 75B0FD         2804     llev2:          mov             p3,#0fdh
10F7 20B6ED         2805                             jb              p3.6,loutF
10FA 020000   F     2806                             jmp             labelL1
                    2807     
                    2808     ;->
10FD C3             2809     norig2:    clr          c               ;32,33,34,42
10FE 7431           2810                             mov             a,#31h
1100 96             2811                             subb    a,@r0
1101 50E4           2812                             jnc             loutF
1103 75B0FB         2813     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1106 20B626         2814                             jb              p3.6,lev2go
1109                2815     labelN: 
                    2816                             ;                               29.12.06
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    45

                    2817     ;;;;;;;;;;;;;;;;;;
                    2818     ;необходимо не портить цифру в следуюем справа знакоместе
                    2819     ;т е сохранить ее в ячейке для мигания в противном случае
                    2820     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2821     ;       знакоместа
1109 78B2           2822                                             mov             r0,#marker
110B 7440           2823                                     mov             a,#bufind
110D 26             2824                                             add             a,@r0                   ;a=bufind+m
                             arker
110E F9             2825                                             mov             r1,a
110F 09             2826                                             inc             r1
1110 873C           2827                                             mov             savba,@r1
                    2828     ;;;;;;;;;;;;;;;;;;;
1112 78B2           2829                             mov             r0,#marker      ;курсор справа  ?
1114 E53B           2830                             mov             a,movrig
1116 C3             2831                             clr             c
1117 96             2832                             subb    a,@r0
1118 7006           2833                             jnz        noequ1
111A E53A           2834                             mov             a,movleft;уст в крайнюю левую позицию
111C F6             2835                             mov             @r0,a
111D 020000   F     2836                             jmp             outF
1120                2837     noequ1: ;29.12.06
                    2838     ;;;;;;;;;;;;;;;;;;
                    2839                             ;восстан знакоместо при мигании
                    2840                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1120 78B2           2841                                     mov             r0,#marker
1122 7440           2842                                     mov             a,#bufind
1124 26             2843                                     add             a,@r0                   ;a=bufind+marker
1125 F9             2844                                     mov             r1,a
                    2845                                     ;mov            @r1,savba
1126 09             2846                                     inc             r1
1127 873C           2847                                     mov             savba,@r1
                    2848     ;;;;;;;;;;;;;;;;        
1129 120000   F     2849                             call    marri;уст сдвиг в правую        позицию
112C 020000   F     2850                             jmp             outF
112F 75B0FD         2851     lev2go:         mov             p3,#0fdh
1132 30B603         2852                             jnb             p3.6,rlabelL1
1135 020000   F     2853                             jmp             outF
                    2854     
1138 020000   F     2855     rlabelL1:       jmp             labelL1
                    2856     
113B                2857     nnmemb:
                    2858                                     
                    2859     
                    2860     
113B                2861     norim6:    ;kn menu
113B D083           2862     out6:           pop             dph
113D D082           2863                                     pop             dpl
113F D007           2864                                     pop             rr7     
1141 D006           2865                                     pop             rr6
1143 D005           2866                                     pop             rr5
1145 D004           2867                                     pop             rr4
1147 D003           2868                                     pop             rr3
1149 D002           2869                                     pop             rr2
114B D001           2870                                     pop             rr1                             
114D D000           2871                                     pop             rr0
114F D0D0           2872                                     pop             psw
1151 D0E0           2873                                     pop             acc
                    2874     ;clr            bitmig
                    2875                               ; mov         EIE2,#30H
                    2876                              ;  mov         a,P3IF
                    2877                             ;       anl             a,#0bfh
                    2878                             ;       mov             P3IF,a
                    2879                             ;       mov             P3,#0c0h
                    2880                             ;;;;;;
1153                2881     kkout6:
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    46

1153 75AD00         2882                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1156 75B0C0         2883                             mov             P3,#0c0h
1159 C219           2884                             clr             bitmig
115B E586           2885                                             mov             a,P6            ;p6.4=0
115D 54EF           2886                             anl             a,#0efh
115F F586           2887                             mov             P6,a
1161 00             2888                             nop
1162 00             2889                             nop
                    2890                                     
1163 E586           2891                             mov             a,P6                    ;p6.4=1 
1165 4410           2892                             orl             a,#10h
1167 F586           2893                             mov             P6,a    
                    2894                             ;;;;;;;;;
1169 E5DA           2895                             mov             a,PCA0CPM0;     
116B 4446           2896                             orl             a,#46h;anl              a,#0fbh
116D F5DA           2897                             mov             PCA0CPM0,a
                    2898     
116F 75CDD0         2899                             mov             TH2,#0d0h
1172 75CC00         2900                             mov             TL2,#00
                    2901     
1175 D2CA           2902                             setb            T2CON.2
1177 D2AD           2903                             setb            ET2;IE.5
                    2904                             ;;;;;;;;                    
1179 32             2905                             reti
                    2906     
                    2907     
117A 020000   F     2908     knKMP:             jmp          out7
117D 020000   F     2909     rout7:                  jmp             out7    
1180 020000   F     2910     rlabelH:                jmp             labelH
1183 020000   F     2911     rknNUL:         jmp             knNUL
1186 020000   F     2912     rknleft:                jmp             knleft
                    2913     
1189 75AD00         2914     no0chk:         mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
118C 75B0C0         2915                                             mov             P3,#0c0h
118F 32             2916                                             reti
                    2917     
1190 020000   F     2918     rknMEM:                 jmp             knMEM
                    2919     
1193                2920     keyb2:  ;IE7
                    2921     ;;;;;
                    2922                     ;       mov                     a,chkl          ;low
                    2923                     ;       jb                      acc.7,no0chk;
                    2924                             ;jnz                    no0chk
                    2925                             ;mov                    a,chkl                          ;high
                    2926                             ;jnz                    no0chk
                    2927     ;;;;
1193 75E700         2928                                     mov             EIE2,#00H
1196 75AD00         2929                                     mov             P3IF,#00
                    2930     
1199 C0E0           2931                                     push    acc
119B C0D0           2932                                     push    psw
119D C000           2933                                     push    rr0
119F C001           2934                                     push    rr1
11A1 C002           2935                                     push    rr2
11A3 C003           2936                                     push    rr3
11A5 C004           2937                                     push    rr4
11A7 C005           2938                                     push    rr5
11A9 C006           2939                                     push    rr6
11AB C007           2940                                     push    rr7
11AD C082           2941                                     push    dpl
11AF C083           2942                                     push    dph
                    2943                                     ;clr            bitmig
                    2944                       ;;;;;;;;;;;;;;
11B1 120000   F     2945                               call  z_01s   ;0,1s
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    47

                    2946                               ;восстан знакоместо при мигании
                    2947                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
11B4 78B2           2948                                     mov             r0,#marker
11B6 7440           2949                                     mov             a,#bufind
11B8 26             2950                                     add             a,@r0                   ;a=bufind+marker
11B9 F9             2951                                     mov             r1,a
11BA A73C           2952                                     mov             @r1,savba
                    2953                                     ;;;;;;;;;;;
                    2954     
11BC E5B0           2955                             mov             a,p3
11BE 20E7BC         2956                                     jb              acc.7,rout7
11C1 E5B0           2957                                     mov             a,p3
11C3 74FF           2958                                     mov             a,#0ffh         ; p3.(5-0)<-3f
11C5 F5B0           2959                                     mov             p3,a
11C7 E5B0           2960                                     mov             a,p3
11C9 30E7B1         2961                                     jnb             acc.7,rout7             ;error
11CC 3004B1         2962                                     jnb             bitizm,rlabelH
11CF 75B0FE         2963                                     mov             p3,#0feh                ;реж IZM
11D2 E5B0           2964                                     mov             a,p3
11D4 30E7AC         2965                                     jnb             acc.7,rknNUL
11D7 75B0FD         2966                                     mov             p3,#0fdh
11DA E5B0           2967                                     mov             a,p3
11DC 30E79B         2968                                     jnb             acc.7,knKMP
11DF 75B0FB         2969                                     mov             p3,#0fbh
11E2 E5B0           2970                                     mov             a,p3
11E4 30E79F         2971                                     jnb             acc.7,rknleft
11E7 75B0F7         2972                                     mov             p3,#0f7h
11EA E5B0           2973                                     mov             a,p3
11EC 30E76F         2974                                     jnb             acc.7,knAVP
11EF 75B0EF         2975                                 mov         p3,#0efh
11F2 E5B0           2976                                     mov             a,p3
11F4 30E799         2977                                     jnb             acc.7,rknMEM
11F7 75B0DF         2978                                     mov             p3,#0dfh
11FA E5B0           2979                                     mov             a,p3    
11FC 30E722         2980                                     jnb             acc.7,knmenu
11FF                2981     an_t7:             ;;;;;;;;;;;;
                    2982                     
                    2983     ;       clr             c
                    2984     ;       mov             r1,#parN
                    2985     ;
                    2986     ;                       mov             r0,#diap
                    2987     ;                       mov             a,#6            
                    2988     ;                       subb    a,@r0
                    2989     ;                       jnc             goto7           ;         ;10-2..10-8
                    2990                               
                    2991     ;                       mov             @r1,#2          ;10-9..10-11            
                    2992                             
                    2993                             ;;;;;;;;;;;;
11FF 799A           2994     goto7:                  mov             r1,#parT
1201 783D           2995                                     mov             r0,#chkl
1203 B70108         2996                                     cjne    @r1,#1,not1_7
1206 7600           2997                                     mov             @r0,#00
1208 08             2998                                     inc             r0
1209 7602           2999                                     mov             @r0,#2
120B 020000   F     3000                                     jmp             out7
                    3001                             
                    3002     
120E B70208         3003     not1_7:                 cjne    @r1,#2,not2_7
1211 7600           3004                                             mov             @r0,#00
1213 08             3005                                     inc             r0
1214 7614           3006                                     mov             @r0,#20
1216 020000   F     3007                                     jmp             out7
1219 7600           3008     not2_7:                 mov             @r0,#00
121B 08             3009                                     inc             r0
121C 76C8           3010                                     mov             @r0,#200
121E 020000   F     3011     merr:           jmp             out7
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    48

                    3012     
                    3013     
1221 2006FA         3014     knmenu: jb              bitvi11,merr
1224 20151C         3015                                     jb              biteizm,menuoff
                    3016                                     ;;;;;
1227 201225         3017                                     jb              bitklb,klboff
122A C204           3018                              clr            bitizm          ;off IZM
122C D211           3019                                     setb            bitmenu
122E C217           3020                                     clr             bitoll
1230 900000   F     3021                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1233 120000   F     3022                                     call    lotext
1236 534B03         3023                                     anl                     bufind+11,#03h ;погасить запятые
1239 120000   F     3024                                     call            ind
123C 78B1           3025                                     mov             r0,#vichR
123E 7611           3026                                     mov             @r0,#11h
1240 020000   F     3027                                     jmp             onmem11
1243                3028     menuoff:
1243 78B1           3029                                     mov             r0,#vichR
1245 7600           3030                                     mov             @r0,#00
1247 C215           3031                                     clr             biteizm
1249 120000   F     3032                                     call    loadus
124C 020000   F     3033                                     jmp             out7
                    3034     
124F C212           3035     klboff:                 clr             bitklb
1251 120000   F     3036                                                     call            loadUS
1254 78B1           3037                                                     mov             r0,#vichR
1256 7600           3038                                                     mov             @r0,#00
1258 020000   F     3039                                                     jmp             out7
                    3040     
125B 020000   F     3041     rendkalib:              jmp             endkalib
                    3042     
125E 2012FA         3043     knAVP:  jb              bitklb,rendkalib        
1261 200505         3044                                     jb              bitavp,meavp
1264 D205           3045                                     setb    bitavp
1266 020000   F     3046                                     jmp             onmem11
1269 C205           3047     meavp:                  clr             bitavp
126B 020000   F     3048                                     jmp             onmem11
                    3049     
126E 201207         3050     knleft: jb              bitklb,lefkl
                    3051                                     ;;;;;;;;
1271 79AE           3052                                mov          r1,#diap
1273 07             3053                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1274 B70A03         3054                                     cjne    @r1,#0ah,nodi6
1277 17             3055                                     dec             @r1
1278 8085           3056     lefkl:  jmp             an_t7
                    3057     
127A                3058     nodi6:             ;    cjne    @r1,#0,an_t7
127A 120000   F     3059                                      call    clmassix
127D 78B3           3060                                     mov             r0,#summa
127F 120000   F     3061                                     call    clear4  
1282 786A           3062                                     mov             r0,#rez_A0
1284 120000   F     3063                                     call    clear4
1287 C20F           3064                                     clr             bitnul          ;гасить светодиод НУЛЬ  
1289 120000   F     3065                                     call    loadUS
128C 020000   F     3066                                jmp          an_t7
                    3067     
128F 200F0F         3068     knNUL:                  jb              bitnul,ybnul
1292 D20F           3069                                     setb    bitnul
1294 789C           3070                                     mov             r0,#rez_A3      ;A3
1296 120000   F     3071                                     call    resar2
1299 786A           3072                                     mov             r0,#rez_A0      
129B 120000   F     3073                                     call    saver2;A0<-A3
129E 020000   F     3074                                     jmp             goto7;an_t7
                    3075     
12A1 C20F           3076     ybnul:                  clr             bitnul
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    49

12A3 900000   F     3077                                      mov    DPTR,#ch0 
12A6 120000   F     3078                                     CALL   ldc_long          ; r2..r5 <-- 0
12A9 786A           3079                                     mov             r0,#rez_A0      ;A0=0
12AB 120000   F     3080                                     call    saver2
12AE 020000   F     3081                                     jmp             goto7;an_t7
                    3082     
12B1 301021         3083     labelH:                 jnb             bitt2,nolah
12B4 75B0FB         3084                                     mov             p3,#0fbh   ;вход в режим изм Т
12B7 534A8F         3085                                     anl             bufind+10,#8fh
12BA 79B7           3086                                     mov             r1,#load;parT
12BC 20B70D         3087                                     jb              p3.7,rhnot1
12BF B70003         3088                                     cjne    @r1,#0,inct;
12C2 020000   F     3089                                     jmp             out7;hyest6
12C5 17             3090     inct:                   dec             @r1                     ;Tизм+1
                    3091                             
12C6 120000   F     3092                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
12C9                3093     hnot2:          ;       call    ind
12C9 020000   F     3094                                     jmp             out7
                    3095     
12CC 020000   F     3096      rhnot1:                jmp             hnot1
                    3097      ;rnoviR:       jmp             noviR
12CF 020000   F     3098      rlabelK:       jmp             labelK
12D2 020000   F     3099      rlabelI:       jmp             labelI          
                    3100      ;;;;;;;;;;;;;;;;;;;
12D5 3014F7         3101     nolah:          jnb             bitvich,rlabelK 
                    3102                                     
                    3103                             ;;;;;;
                    3104                             ;увеличить счетчик задержки клавиатуры
                    3105                     ;;              mov             r0,#chkl
                    3106                     ;;              mov             @r0,#27h
                    3107                     ;;              inc             r0
                    3108                     ;;              mov             @r0,#10h
                    3109                             ;;;;;;
                    3110     
12D8 78B1           3111                             mov             r0,#vichR
12DA B61128         3112                             cjne    @r0,#11h,rhnor11;rlabelI;;
12DD 75B0FB         3113                             mov             p3,#0fbh   ;<-
12E0 20B730         3114                             jb              p3.7,noh37;routF
12E3 B6110B         3115                     cjne    @r0,#11h,hr12
12E6 7612           3116                             mov             @r0,#12h;11h;= вычислить
12E8 900000   F     3117                             mov             dptr,#teIZMK    ;       изм конст;teVICH
12EB 120000   F     3118     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
12EE 020000   F     3119                             jmp             goto7;outF
12F1 B61207         3120     hr12:           cjne    @r0,#12h,hnor12
12F4 7611           3121     lovich:         mov             @r0,#11h
12F6 900000   F     3122                             mov             dptr,#teVICH
12F9 80F0           3123                             jmp             hvi1113         
12FB B61307         3124     hnor12:         cjne    @r0,#13h,rhnor11
12FE 7612           3125     loizmk:         mov             @r0,#12h
1300 900000   F     3126                             mov             dptr,#teIZMK    ;       изм конст
                    3127                                        
1303 80E6           3128                             jmp             hvi1113
                    3129     
1305 804C           3130     rhnor11:                jmp             hnor11
                    3131     
1307 8057           3132     rvvizko:                jmp             vvizko
1309 C214           3133     vioutF:                 clr             bitvich
130B C206           3134                                                     clr             bitvi11
130D 020000   F     3135                                                     jmp             outF
1310 020000   F     3136     toutF:                  jmp     outF
                    3137     
1313 75B0F7         3138     noh37:          mov             p3,#0f7h
1316 20B7F7         3139                             jb              p3.7,toutF;vioutF
1319 B611EB         3140                             cjne    @r0,#11h,rvvizko
131C D206           3141                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
131E D204           3142              setb   bitizm
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    50

1320 534B07         3143                              anl            bufind+11,#07h
1323 434B10         3144                              orl            bufind+11,#10h;точка после 1 знакоместа
1326 020000   F     3145     routF:          jmp             out7;goto7;outF
                    3146     
                    3147     
                    3148     
1329 80E8           3149     rnoh37:         jmp             noh37
                    3150     
132B B6120D         3151     norr11:         cjne    @r0,#12h,norr12
132E 75B0FB         3152                             mov             p3,#0fbh   ;<-
1331 20B7F5         3153                             jb              p3.7,rnoh37;routF
1334 760B           3154                             mov             @r0,#11;12->11
1336 80BC           3155                             jmp             lovich
                    3156     
1338 020000   F     3157     labelI2:                jmp             labelI
133B B613FA         3158     norr12:         cjne    @r0,#13h,labelI2
133E 75B0FB         3159                             mov             p3,#0fbh   ;<-
1341 20B7E5         3160                             jb              p3.7,rnoh37
1344 7612           3161                             mov             @r0,#12h
1346 80B6           3162                             jmp             loizmk
                    3163                             ;;;;
1348 C214           3164     clrvich:                clr             bitvich
134A D204           3165                             setb    bitizm
134C A8B2           3166                             mov             r0,marker
134E 76FF           3167                             mov             @r0,#0ffh
1350 020000   F     3168                              jmp    goto7;  routF
                    3169     
                    3170     ;rnoh37:                jmp             noh37
                    3171      ;ввод изм конст
1353 B612E5         3172     hnor11:         cjne    @r0,#12h,norr12;clrvich
1356 75B0FB         3173                              mov            p3,#0fbh   
1359 20B7CD         3174                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
135C 7611           3175                             mov             @r0,#11h
135E 8094           3176                             jmp             lovich
                    3177     
1360 78B1           3178     vvizko:         mov             r0,#vichR
1362 E6             3179                             mov             a,@r0
                    3180                     ;       cjne    @r0,#12h,clrvich
1363 B412E2         3181                             cjne    a,#12h,clrvich
1366 7621           3182                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
1368 78B2           3183                             mov             r0,#marker
136A 7604           3184                             mov             @r0,#4;9
136C 753A04         3185                             mov             movleft,#4
136F 753B07         3186                             mov             movrig,#7
1372 900000   F     3187                             mov             dptr,#teAequ0
1375 120000   F     3188                             call    lotext
                    3189                             
1378 120000   F     3190                             call    outA
137B 534B0F         3191                             anl                     bufind+11,#0fh
                    3192             ;       mov             a,bufind+11
                    3193             ;       anl             a,#0f0h
                    3194             ;       mov             bufind+11,a
137E 434B40         3195                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3196                             
1381 020000   F     3197                             jmp             goto7;routF
                    3198     ;hnor13:                jmp             hnor12          
1384 B6210C         3199     izchi:          cjne    @r0,#21h,tlabelI
                    3200     ;<- при вводе цифр А                            
                    3201                     ;        mov            p3,#0fbh   
                    3202                     ;       jnb             p3.7,li21
                    3203             ;clr            bitmig
1387 78B2           3204                             mov             r0,#marker
1389 16             3205                             dec             @r0
138A B60201         3206                             cjne    @r0,#2,li21
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    51

138D 06             3207                             inc             @r0;marker=3 +/-
138E C219           3208     li21:           clr             bitmig
1390 020000   F     3209                             jmp             goto7;outF
                    3210     
1393 020000   F     3211     tlabelI:        jmp             labelI
                    3212     
                    3213     ;                       load    0 1 2 3 4 5             
1396 06050403       3214     sootv:          db              6,5,4,3,2,1;parT
139A 0201                    
                    3215     ;
                    3216     
                    3217     ;нажата кн ввод при наборе Т
139C 75B0F7         3218     hnot1:                  mov             p3,#0f7h
139F 20B784         3219                                     jb              p3.7,routF;out7
13A2 B70549         3220                                     cjne    @r1,#5,nohnot1  ;r1=load
13A5 794A           3221                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
13A7 E7             3222                                     mov             a,@r1
13A8 548F           3223                                     anl             a,#8fh
13AA 4440           3224                                     orl             a,#40h;.6
13AC F7             3225                                     mov             @r1,a
13AD 8000           3226                                     jmp             loadb
                    3227                                     
                    3228                                     
13AF 789A           3229     loadB:                  mov             r0,#parT
13B1 900000   F     3230                                     mov             dptr,#sootv
13B4 79B7           3231                                     mov             r1,#load                
13B6 E7             3232                                     mov             a,@r1;load
13B7 93             3233                                     movc    a,@a+dptr
13B8 F6             3234                                     mov             @r0,a
13B9 120000   F     3235                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3236                                      ;r4=b1 r5=b2
13BC 120000   F     3237                                     call    iniacp;инициализация АЦП
13BF 120000   F     3238                                     call    loadUS
13C2 120000   F     3239                                     call    clmassix        
13C5 D204           3240                                     setb    bitizm
13C7 C210           3241                                     clr             bitt2
                    3242     
13C9 534A8F         3243                                     anl             bufind+10,#8fh
13CC C3             3244                                      clr            c
13CD 789A           3245                                  mov                r0,#parT
13CF 79AF           3246                                      mov            r1,#parN
13D1 7402           3247                                  mov                a,#2
13D3 96             3248                                 subb                a,@r0
13D4 5005           3249                                 jnc                 loadB2
13D6 7701           3250                                     mov             @r1,#1;N=1         ;T>=2
13D8 020000   F     3251     bout7:                  jmp             goto7;out7
                    3252     
13DB B702FA         3253     loadB2:                 cjne    @r1,#2,bout7
13DE 7702           3254                                     mov             @r1,#2;N=2
13E0 020000   F     3255                                     jmp             goto7;out7
13E3                3256     nohnot2:                ;в буфере 1 зажечь <=0,1s
13E3 794A           3257                                     mov             r1,#bufind+10
13E5 E7             3258                                     mov             a,@r1
13E6 4410           3259                                     orl             a,#10h;.4
13E8 F7             3260                                     mov             @r1,a
13E9 120000   F     3261                                     call            ind
13EC 80C1           3262                                     jmp             loadB
13EE B704F2         3263     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
13F1 794A           3264                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
13F3 E7             3265                                     mov             a,@r1
13F4 4420           3266                                     orl             a,#20h;.5
13F6 F7             3267                                     mov             @r1,a
13F7 80B6           3268                                     jmp             loadB
                    3269     
                    3270     ;кнопка ПАМЯТЬ
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    52

13F9 C204           3271     knMEM:                  clr             bitizm          ;off IZM
13FB 900000   F     3272                                     mov             dptr,#teLIST;CLE
13FE 120000   F     3273                                     call    lotext    ;в буф2 записать ОЧИСТКА
1401 D20B           3274                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1403 534BEF         3275                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1406 434B01         3276                                     orl             bufind+11,#01;зажечь светодиод память
1409 120000   F     3277                                     call            ind
140C 78B0           3278                                     mov             r0,#level
140E 7613           3279                                     mov             @r0,#13h;11h
1410 783D           3280     onmem11:                mov             r0,#chkl
1412 7603           3281                                     mov             @r0,#03
1414 08             3282                                     inc             r0
1415 76E8           3283                                     mov             @r0,#0e8h               ;1000
1417 020000   F     3284                                     jmp             out7;goto7;out7
                    3285     
141A 020000   F     3286     rnomemk:                jmp             nomemk          ;
                    3287     
141D 78B0           3288     outkmem:        mov                     r0,#level
141F 7600           3289                                             mov                     @r0,#0
1421 78B1           3290                                             mov                     r0,#vichR
1423 7600           3291                                             mov                     @r0,#0
1425 C20B           3292                                             clr                     bitmem
1427 C214           3293                                             clr                     bitvich
1429 C206           3294                                             clr                     bitvi11
142B C211           3295                                             clr                     bitmenu
142D D204           3296                                             setb            bitizm
142F 78B2           3297                                             mov                     r0,#marker
1431 76FF           3298                                             mov                     @r0,#0ffh
1433 020000   F     3299                                             jmp                     vvod2_10
                    3300                                             
                    3301     
1436                3302     offmenum:       
1436 020000   F     3303                                                     jmp                     goto7   
                    3304             
1439                3305     labelK:
                    3306     
                    3307     ;;;;;;;;;;;;
1439 300BDE         3308                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
                    3309                                     ;;;;;;;
143C 75B0DF         3310                                     mov             p3,#0dfh;(код кнопки меню)
143F 30B7F4         3311                                     jnb             p3.7,offmenum
                    3312                                     ;;;;;;;
1442 75B0EF         3313                                     mov                     p3,#0efh
1445 30B7D5         3314                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1448 78B0           3315                                      mov            r0,#level
144A B6114E         3316                               cjne          @r0,#11h,klev1;nome11
144D 75B0FB         3317     lefmem11:         mov           p3,#0fbh
1450 E5B0           3318                               mov           a,p3
1452 20E70E         3319                               jb            acc.7,rkvvod0
1455 B6110E         3320                               cjne          @r0,#11h,locle          ;<-memory
1458 7614           3321                               mov           @r0,#14h
145A 900000   F     3322     lolist:           mov           dptr,#teSTAT
145D 120000   F     3323                               call          lotext           ;СТАТИСТИКА
1460 020000   F     3324                               jmp   goto7;  outF
                    3325     
1463 020000   F     3326     rkvvod0:        jmp             kvvod0
                    3327     
                    3328     
1466 B6120B         3329     locle:          cjne            @r0,#12h,lowr           ;<-memory
1469 7611           3330                               mov           @r0,#11h                   ;ОЧИСТКА
146B 900000   F     3331     loadcle:          mov           dptr,#teCLE
146E 120000   F     3332                               call          lotext
1471 020000   F     3333                               jmp           goto7;outF
                    3334     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    53

1474 B6130B         3335     lowr:                   cjne    @r0,#13h,lostat
1477 7612           3336                                             mov             @r0,#12h
1479 900000   F     3337      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
147C 120000   F     3338                             call    lotext
147F 020000   F     3339                             jmp             goto7;outF
                    3340     
1482 7613           3341     lostat:         mov             @r0,#13h
1484 900000   F     3342                                     mov             dptr,#teLIST              ;ПРОСМОТР
1487 120000   F     3343                             call    lotext
148A 020000   F     3344                             jmp             goto7;outF
                    3345     
148D B6141A         3346     me_14:cjne              @r0,#14h,klev22
1490 7613           3347                                             mov             @r0,#13h
1492 900000   F     3348                             mov             dptr,#teLIST              ;;ПРОСМОТР
1495 120000   F     3349                             call    lotext
1498 020000   F     3350                             jmp             goto7
149B B61202         3351      klev1:          cjne   @r0,#12h,klev2
149E 80AD           3352                             jmp             lefmem11
14A0 B61302         3353     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
14A3 80A8           3354                             jmp             lefmem11
14A5 B61402         3355     klev3:           cjne   @r0,#14h,klev22;
14A8 80A3           3356                             jmp             lefmem11
                    3357     ;<- vvod на более низких уровнях
14AA B62117         3358     klev22:         cjne    @r0,#21h,klev21
14AD 75B0FB         3359     lev220:         mov             p3,#0fbh
14B0 20B76F         3360                             jb              p3.7,kgo23
14B3 B6210B         3361                             cjne    @r0,#21h,kfullr
14B6 7622           3362                             mov             @r0,#22h
14B8 900000   F     3363                             mov             dptr,#teBL
14BB 120000   F     3364                             call    lotext
14BE 020000   F     3365                             jmp             goto7;outF
14C1 020000   F     3366     kfullr:         jmp             kfull                           
14C4 B6220E         3367     klev21:         cjne    @r0,#22h,klev23
14C7 80E4           3368                             jmp             lev220
                    3369     
14C9 020000   F     3370     rlabL2:         jmp             labL2
14CC 020000   F     3371     rlabM:          jmp             labM
14CF 020000   F     3372     ques:                   jmp             out7
14D2 020000   F     3373     ddoutfr:        jmp             ddoutf
                    3374     
14D5 B623F4         3375     klev23:          cjne   @r0,#23h,rlabM
14D8 75B0FB         3376                              mov    p3,#0fbh
14DB 30B7F1         3377                              jnb            p3.7,ques;errr labL2
14DE 75B0F7         3378                              mov    p3,#0f7h
14E1 20B7EE         3379                              jb             p3.7,ddoutfr
                    3380                                             ;       считать с индикатора  
14E4 C3             3381                                     clr                     c
14E5 E547           3382                                mov          a,bufind+7      
14E7 9430           3383                                      subb           a,#30h
14E9 B40002         3384                                      cjne           a,#0,chaibl
14EC 7401           3385                                      mov            a,#1                    ;номера блоков 1..4
14EE                3386     chaibl:         
14EE F538           3387                                             mov             nblok,a
                    3388                                
                    3389                              ;очистить блок памяти с набранным номером
                    3390                              ;150h..1000h( 150h+nblok*320h)
14F0 120000   F     3391                                     call            adrblok         ;dptr-
                    3392     
14F3 79B8           3393                                     mov                     r1,#work                ;обьем блок
                             а
14F5 7703           3394                                     mov                     @r1,#03
14F7 09             3395                                     inc                     r1
14F8 7720           3396                                     mov                     @r1,#20h                        ;32
                             0h
                    3397     
14FA                3398     goonoff:
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    54

14FA E4             3399                                     clr                     a
14FB F0             3400                                     movx            @dptr,a
14FC A3             3401                                     inc                     dptr
                    3402     
14FD 79B9           3403                                     mov                     r1,#work+1
14FF 120000   F     3404                                     call            chminus
1502 78B8           3405                                     mov             r0,#work
1504 E6             3406                             mov             a,@r0
1505 30E7F2         3407                             jnb             acc.7,goonoff
                    3408     
1508 C20B           3409                              clr    bitmem  ;сбр признак памяти 
150A D204           3410                              setb   bitizm
                    3411                             ;после очистки блока сохраняем в saven_bl 
                    3412                             ;адрес второго с конца измерения потому
                    3413                             ;добавляем 8;;
150C 120000   F     3414                             call            adrblok;dptr-начало блока
                    3415                     ;       mov                     a,dpl
                    3416                     ;       add                     a,#8
                    3417                     ;       mov                     dpl,a
                    3418                     ;       mov                     a,dph
                    3419                     ;       addc            a,#0
                    3420                     ;       mov                     dph,a
150F 120000   F     3421                             call            save_hl;подготовка записи в начало блока
                    3422                             ;;;;;
                    3423     
1512 78B2           3424                              mov            r0,#marker
1514 76FF           3425                              mov            @r0,#0ffh
1516 020000   F     3426                                     jmp                     vvod2_10
1519 020000   F     3427                              jmp    goto7
                    3428     
151C 020000   F     3429     rddoutf:        jmp             ddoutf
151F 020000   F     3430     rgo23no:        jmp             go23no
                    3431     
                    3432     ;vvod   БЛОК->БЛОК 00           
1522 75B0F7         3433     kgo23:           mov    p3,#0f7h
1525 20B7F4         3434                             jb              p3.7,rddoutf
1528 B621F4         3435                             cjne    @r0,#21h,rgo23no
                    3436                             ;очистить память 150..dd0h
                    3437                             ;1й блок
152B 900150         3438                              mov                    dptr,#150h
152E 79B8           3439                                     mov                     r1,#work                ;обьем блок
                             а
1530 7703           3440                                     mov                     @r1,#03
1532 09             3441                                     inc                     r1
1533 7720           3442                                     mov                     @r1,#20h                        ;32
                             0h
                    3443     
1535                3444     gooff1:
1535 E4             3445                                     clr                     a
1536 F0             3446                                     movx            @dptr,a
1537 A3             3447                                     inc                     dptr
                    3448     
1538 79B9           3449                                     mov                     r1,#work+1
153A 120000   F     3450                                     call            chminus
153D 78B8           3451                                     mov             r0,#work
153F E6             3452                             mov             a,@r0
1540 30E7F2         3453                             jnb             acc.7,gooff1
1543 900150         3454                             mov                     dptr,#150h;начало 1 го блока
                    3455                             ;после очистки блока сохраняем в saven_bl 
                    3456                             ;адрес второго с конца измерения потому
                    3457                             ;добавляем 8;;
                    3458     ;                               call            save_hl;подготовка записи в начало блока
                    3459     ;2й блок
1546 900470         3460                             mov                     dptr,#470h
1549 79B8           3461                                     mov                     r1,#work                ;обьем блок
                             а
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    55

154B 7703           3462                                     mov                     @r1,#03
154D 09             3463                                     inc                     r1
154E 7720           3464                                     mov                     @r1,#20h                        ;32
                             0h
                    3465     
1550                3466     gooff2:
1550 E4             3467                                     clr                     a
1551 F0             3468                                     movx            @dptr,a
1552 A3             3469                                     inc                     dptr
                    3470     
1553 79B9           3471                                     mov                     r1,#work+1
1555 120000   F     3472                                     call            chminus
1558 78B8           3473                                     mov             r0,#work
155A E6             3474                             mov             a,@r0
155B 30E7F2         3475                             jnb             acc.7,gooff2
155E 900470         3476                             mov                     dptr,#470h;начало 2 го блока
                    3477     ;                       call            save_hl;подготовка записи в начало блока
                    3478     ;3й блок
1561 900790         3479                             mov                     dptr,#790h
1564 79B8           3480                                     mov                     r1,#work                ;обьем блок
                             а
1566 7703           3481                                     mov                     @r1,#03
1568 09             3482                                     inc                     r1
1569 7720           3483                                     mov                     @r1,#20h                        ;32
                             0h
                    3484     
156B                3485     gooff3:
156B E4             3486                                     clr                     a
156C F0             3487                                     movx            @dptr,a
156D A3             3488                                     inc                     dptr    
                    3489     
156E 79B9           3490                                     mov                     r1,#work+1
1570 120000   F     3491                                     call            chminus
1573 78B8           3492                                     mov             r0,#work
1575 E6             3493                             mov             a,@r0
1576 30E7F2         3494                             jnb             acc.7,gooff3
1579 900790         3495                             mov                     dptr,#790h;начало 3 го блока
                    3496                                     ;после очистки блока сохраняем в saven_bl 
                    3497                             ;адрес второго с конца измерения потому
                    3498                             ;добавляем 8;;
                    3499                     ;       call            save_hl;подготовка записи в начало блока
                    3500     ;4й блок
157C 900AB0         3501     mov                     dptr,#0ab0h
157F 79B8           3502                                     mov                     r1,#work                ;обьем блок
                             а
1581 7703           3503                                     mov                     @r1,#03h
1583 09             3504                                     inc                     r1
1584 7720           3505                                     mov                     @r1,#20h                        ;32
                             0h
                    3506     
1586                3507     gooff4:
1586 E4             3508                                     clr                     a
1587 F0             3509                                     movx            @dptr,a
1588 A3             3510                                     inc                     dptr
                    3511     
1589 79B9           3512                                     mov                     r1,#work+1
158B 120000   F     3513                                     call            chminus
158E 78B8           3514                                     mov             r0,#work
1590 E6             3515                             mov             a,@r0
1591 30E7F2         3516                             jnb             acc.7,gooff4
1594 900AB0         3517                             mov                     dptr,#0ab0h;начало 4 го блока
                    3518                             ;после очистки блока сохраняем в saven_bl 
                    3519                             ;адрес второго с конца измерения потому
                    3520                             ;добавляем 8;;
                    3521     ;                       call            save_hl;подготовка записи в начало блока
                    3522                             ;;;;26.02.07
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    56

1597 E538           3523                                                     mov             a,nblok
1599 B40117         3524                                                     cjne    a,#1,cl_hl1
159C 900150         3525                                                     mov             dptr,#150h
159F 79D3           3526                                                     mov             r1,#saven_bl
15A1 E583           3527     cl_hl:                  mov             a,dph
15A3 F7             3528                                               mov           @r1,a
15A4 09             3529                                                     inc             r1
15A5 E582           3530                                                     mov             a,dpl
15A7 F7             3531                                                     mov             @r1,a
                    3532                             ;;;;;;;;
15A8 C20B           3533                                             clr             bitmem
15AA D204           3534                                             setb    bitizm
15AC 78B2           3535                                             mov             r0,#marker
15AE 76FF           3536                                             mov             @r0,#0ffh
15B0 020000   F     3537                                             jmp                     vvod2_10;jmp            got
                             o7
                    3538     
15B3 B40207         3539     cl_hl1:         cjne            a,#2,cl_hl2
15B6 900470         3540                                             mov                     dptr,#470h
15B9 79C0           3541                                             mov             r1,#saven_bl2
15BB 80E4           3542                                             jmp                     cl_hl
                    3543     
15BD B40307         3544     cl_hl2:         cjne            a,#3,cl_hl3
15C0 900790         3545                                             mov                     dptr,#790h
15C3 79C2           3546                                             mov             r1,#saven_bl3
15C5 80DA           3547                                             jmp                     cl_hl
                    3548     
15C7 900AB0         3549     cl_hl3:         mov                     dptr,#0ab0h
15CA 79D9           3550                                             mov             r1,#saven_bl4
15CC 80D3           3551                                             jmp                     cl_hl
                    3552     
15CE 7623           3553     go23no:    mov          @r0,#23h
15D0 753B08         3554                                             mov                     movrig,#8
15D3 753A07         3555                                             mov             movleft,#7
15D6 8055           3556                             jmp             loblok;БЛОК 00
                    3557     
15D8 7621           3558     kfull:          mov             @r0,#21h
15DA 8025           3559                             jmp             gofull
                    3560                             
                    3561                                             
15DC                3562     nomemk:                         
15DC 020000   F     3563                                     jmp             labelS                  ;нажат ввод меню
                    3564                             
15DF 75B0FB         3565     nome11:           mov           p3,#0fbh
15E2 E5B0           3566                               mov           a,p3
15E4 20E70D         3567                               jb            acc.7,kvvod0
15E7 B61205         3568                               cjne          @r0,#12h,mem12no        
15EA 7611           3569                               mov           @r0,#11h                ;ОЧИСТКА
15EC 020000   F     3570                               jmp            loadcle
                    3571     
15EF                3572     mem12no:        ;cjne           @r0,#13h,lowr           
15EF 7612           3573                               mov           @r0,#12h                   ;
15F1 020000   F     3574                               jmp           lowr1                     ;ЗАПИСЬ
                    3575     
15F4 75B0F7         3576     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
15F7 20B70F         3577                               jb            p3.7,ddoutf
15FA 78B0           3578                               mov           r0,#level
15FC B61129         3579                               cjne          @r0,#11h,mvv11
15FF 7621           3580                               mov           @r0,#21h                ;ПОЛНАЯ
1601 900000   F     3581     gofull:           mov           dptr,#teFULL
1604 120000   F     3582                               call          lotext
1607 804F           3583                                     jmp             mlabL2  ;<-????????/
                    3584     
1609                3585     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3586     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3587     ;т е сохранить ее в ячейке для мигания в противном случае
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    57

                    3588     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3589     ;       знакоместа
1609 78B2           3590                                                     mov             r0,#marker
160B 7440           3591                                     mov             a,#bufind
160D 26             3592                                             add             a,@r0                   ;a=bufind+m
                             arker
160E F9             3593                                             mov             r1,a
160F 19             3594                                             dec             r1      ;       inc             r1
1610 873C           3595                                             mov             savba,@r1
1612 C219           3596                                             clr             bitmig
                    3597     ;;;;;;;;;;;;;;;;
1614 78B2           3598                       mov           r0,#marker      ;курсор слева   ?
1616 E53A           3599                             mov             a,movleft
1618 C3             3600                             clr             c
1619 96             3601                             subb    a,@r0
161A 7006           3602                             jnz        left21
161C E53B           3603                             mov             a,movrig;уст в правую позицию
161E F6             3604                             mov             @r0,a
                    3605     
161F 020000   F     3606                             jmp             goto7                                            
1622 E53A           3607     left21:         mov             a,movleft;уст в левую позицию
1624 F6             3608                             mov             @r0,a   
1625 020000   F     3609                             jmp             goto7
                    3610     
                    3611     
1628 B61215         3612     mvv11:            cjne          @r0,#12h,mvv12
162B 7631           3613                                     mov             @r0,#31h
162D 900000   F     3614     loblok:                 mov             dptr,#teBL0;БЛОК 0
1630 120000   F     3615                                     call    lotext
1633 E538           3616                                     mov                     a,nblok
1635 2430           3617                                     add                     a,#30h
1637 F547           3618                                     mov                     bufind+7,a
1639 78B2           3619                                     mov             r0,#marker
163B 7607           3620                                     mov             @r0,#7
                    3621                                     ;mov            movrig,#9
                    3622                                     ;mov            movleft,#6
163D 020000   F     3623                                     jmp             goto7;outF
1640 B61411         3624     mvv12:  cjne            @r0,#14h,bl_li
1643 7661           3625                                     mov                     @r0,#61h
1645 900000   F     3626                                     mov             dptr,#teMIN;
1648 120000   F     3627                                     call    lotext
164B 120000   F     3628                                     call    vichmin
164E 120000   F     3629                                     call    z_1s
1651 020000   F     3630                                     jmp             out7;goto7;outF
                    3631     
1654 7641           3632     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1656 80D5           3633                                     jmp             loblok
                    3634     
                    3635     
                    3636     
1658                3637     mlabL2:         ;jmp            labL2
                    3638                                             ;  уст курсор в правую позицию 
                    3639                                     ;                               29.12.06
                    3640     ;;;;;;;;;;;;;;;;;;
                    3641     ;необходимо не портить цифру в следуюем справа знакоместе
                    3642     ;т е сохранить ее в ячейке для мигания в противном случае
                    3643     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3644     ;       знакоместа
1658 78B2           3645                                             mov             r0,#marker
165A 7440           3646                                     mov             a,#bufind
165C 26             3647                                             add             a,@r0                   ;a=bufind+m
                             arker
165D F9             3648                                             mov             r1,a
165E 09             3649                                             inc             r1
165F 873C           3650                                             mov             savba,@r1
                    3651     ;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    58

1661 78B2           3652                       mov           r0,#marker      ;курсор справа  ?
1663 E53B           3653                             mov             a,movrig
1665 C3             3654                             clr             c
1666 96             3655                             subb    a,@r0
1667 6006           3656                             jz         equ2l
1669 E53B           3657                             mov             a,movrig;уст в правую позицию
166B F6             3658                             mov             @r0,a
                    3659     ;                       lool
166C 020000   F     3660                             jmp             goto7                                            
166F E53A           3661     equ2l:          mov             a,movleft;уст в левую позицию
1671 F6             3662                             mov             @r0,a   
1672 020000   F     3663                             jmp             goto7
                    3664                     
1675 020000   F     3665     rnom31:         jmp                     nom31
1678 B631FA         3666     labM:                   cjne    @r0,#31h,rnom31
167B 75B0FB         3667                                     mov             p3,#0fbh
167E 30B7D7         3668                                     jnb             p3.7,mlabL2
1681 75B0F7         3669                                mov          p3,#0f7h
1684 20B782         3670                                jb           p3.7,ddoutf
                    3671                                
1687 7632           3672                                mov          @r0,#32h                        ;ИНТ 0000
                    3673                                     ;       считать с индикатора  
1689 C3             3674     blokvv:         clr                     c
168A E547           3675                                mov          a,bufind+7      
168C 9430           3676                                      subb           a,#30h
168E B40002         3677                                      cjne           a,#0,blokvvc
1691 7401           3678                                      mov            a,#1                    ;номера блоков 1..4
                    3679     
1693 F538           3680     blokvvc: mov            nblok,a
1695 900000   F     3681                                mov          dptr,#teINT;ИНТ 0000c
1698 120000   F     3682                                call         lotext
169B 78CE           3683                                      mov            r0,#interva+1
169D 7952           3684                                      mov            r1,#abin+3
169F E6             3685                                      mov            a,@r0
16A0 F7             3686                                      mov            @r1,a
16A1 18             3687                                             dec                     r0
16A2 19             3688                                             dec                     r1
16A3 E6             3689                                             mov             a,@r0
16A4 F7             3690                                             mov             @r1,a
16A5 19             3691                                             dec             r1
16A6 E4             3692                                             clr             a
16A7 F7             3693                                             mov             @r1,a
16A8 19             3694                                             dec             r1
16A9 F7             3695                                             mov             @r1,a
                    3696                                                                             
16AA 7853           3697                                             mov             r0,#adec
16AC 7952           3698                                             mov             r1,#abin+3      ;hex->10
16AE 120000   F     3699                                             call    bindec
                    3700                                     
16B1 785C           3701                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
16B3 7948           3702                                             mov             r1,#bufind+8
16B5 7F04           3703                                             mov             r7,#4
16B7 E6             3704     bloin:                          mov             a,@r0
16B8 2430           3705                                             add             a,#30h
16BA F7             3706                                             mov             @r1,a
16BB 19             3707                                             dec             r1
16BC 18             3708                                             dec             r0
16BD DFF8           3709                                             djnz    r7,bloin
16BF 78B2           3710                                mov          r0,#marker
16C1 7605           3711                                mov          @r0,#5
16C3 753B08         3712                                mov          movrig,#8
16C6 753A05         3713                                mov          movleft,#5
16C9 789A           3714                                      mov            r0,#parT
16CB B60609         3715                                     cjne            @r0,#6,innot6
16CE 534BF0         3716                                     anl                     bufind+11,#0f0h;after 5- 0.000c
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    59

16D1 434B04         3717                                     orl                     bufind+11,#04h
                    3718                             
16D4 020000   F     3719                                     jmp                     goto7
16D7 B60309         3720     innot6: cjne            @r0,#3,innot3
16DA 534BF0         3721                                     anl                     bufind+11,#0f0h;after 7- 000.0c
16DD 434B20         3722                                     orl                     bufind+11,#20h
                    3723                                     ;call           ind
16E0 020000   F     3724                                     jmp                     out7;goto7
16E3 C3             3725     innot3: clr                     c
16E4 7403           3726                                     mov                     a,#3
16E6 96             3727                                     subb            a,@r0
16E7 5009           3728                                     jnc                     innot1_2
16E9 534BF0         3729                                     anl                     bufind+11,#0f0h;after 6- 00.00c
16EC 434B40         3730                                     orl                     bufind+11,#40h
                    3731                                     
16EF 020000   F     3732                                     jmp                     goto7
                    3733     
16F2                3734     innot1_2:
16F2 534B0F         3735                                     anl                     bufind+11,#0fh;0h;0000c
16F5 C219           3736                                     clr                     bitmig
                    3737                                     ;call           ind             нет необходимости пришет пр
                             обел         
16F7 020000   F     3738     rgoto7: jmp        goto7;outF
                    3739     
16FA B63276         3740     nom31:             cjne         @r0,#32h,nom32
16FD 75B0FB         3741                                     mov             p3,#0fbh
1700 20B71F         3742                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3743                                     
1703                3744     lefcur:         ;;кн <- 32 нач блок 000
                    3745     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3746     ;т е сохранить ее в ячейке для мигания в противном случае
                    3747     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3748     ;       знакоместа
1703 C219           3749                                                     clr             bitmig
1705 78B2           3750                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1707 7440           3751                                     mov             a,#bufind
1709 26             3752                                             add             a,@r0                   ;a=bufind+m
                             arker
170A F9             3753                                             mov             r1,a
170B 19             3754                                             dec             r1;;;;;;;;;;;
170C 873C           3755                                             mov             savba,@r1
                    3756                                             
170E 78B2           3757                                                     mov             r0,#marker      ;курсор сле
                             ва?
1710 E53A           3758                             mov             a,movleft
1712 C3             3759                             clr             c
1713 96             3760                             subb    a,@r0
1714 7006           3761                             jnz        noequ2
1716 E53B           3762                             mov             a,movrig
1718 F6             3763                             mov             @r0,a;уст в крайнюю правую позицию
1719 020000   F     3764                             jmp             goto7
171C 120000   F     3765     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
171F 020000   F     3766                             jmp        goto7        
                    3767                                                                       
                    3768     
                    3769     ;;;;;;;;;;;;;;;;;;
1722                3770     vvinte:         ;ввод интервал                          
1722 75B0F7         3771     no31n:             mov          p3,#0f7h
1725 20B7CF         3772                                     jb              p3.7,rgoto7
1728 7633           3773                                     mov             @r0,#33h
                    3774                                     ;считать с индикатора введенный интервал
172A 7F0A           3775                                             mov             r7,#10
172C 7853           3776                                     mov             r0,#adec
172E 120000   F     3777                                     call    clearN
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    60

1731 120000   F     3778                                     call    upak4                   
1734 784F           3779                                     mov             r0,#abin
1736 7953           3780                                     mov             r1,#adec                        ;мл        
                              ст
1738 120000   F     3781                                     call    decbin                  ;abin..abin+3 (hex)
173B 794F           3782                                     mov             r1,#abin
173D 78CE           3783                                     mov             r0,#interva+1
173F E7             3784                                     mov             a,@r1
1740 F6             3785                                     mov             @r0,a
1741 18             3786                                     dec             r0
1742 09             3787                                     inc             r1
1743 E7             3788                                     mov             a,@r1
1744 F6             3789                                     mov             @r0,a
                    3790                                     
1745 78D5           3791                                     mov             r0,#volume                      ;объем блок
                             а
1747 7600           3792                                     mov             @r0,#0
1749 08             3793                                     inc             r0
174A 76C7           3794                                     mov             @r0,#0c7h
174C 120000   F     3795                                     call            adrblok;dptr
174F 120000   F     3796                                     call            save_hl;1я ячейка блока
1752 78B2           3797                                mov          r0,#marker
1754 76FF           3798                                mov          @r0,#0ffh
1756 D204           3799                                      setb           bitizm
1758 C20B           3800                                      clr            bitmem
175A 789A           3801     vvod2_10: mov           r0,#parT
175C B6050C         3802                                      cjne           @r0,#5,no10msv
175F 900000   F     3803                                             mov                     dptr,#te10ms
1762 120000   F     3804     t2msme:         call            lotext
                    3805                                             
1765 120000   F     3806                                             call            ind
1768 020000   F     3807     no2msv:   jmp      goto7;
176B B606FA         3808     no10msv:        cjne            @r0,#6,no2msv   
176E 900000   F     3809                                             mov                     dptr,#te2ms
1771 80EF           3810                                     jmp                     t2msme
                    3811     
                    3812     
                    3813     
1773 B6332B         3814     nom32:           cjne           @r0,#33h,nom33
1776 75B0FB         3815                              mov            p3,#0fbh
1779 30B787         3816                              jnb            p3.7,lefcur
177C 75B0F7         3817                              mov            p3,#0f7h
177F 20B7E6         3818                              jb             p3.7,no2msv;rgoto7
                    3819                              ;запомнить номер ячейки конца блока
1782 7634           3820                              mov    @r0,#34h
1784 7F0A           3821     INTn:                   mov             r7,#10
1786 7853           3822                                     mov             r0,#adec
1788 120000   F     3823                                     call    clearN
178B 120000   F     3824                                     call    upak3                   
178E 784F           3825                                     mov             r0,#abin
1790 7953           3826                                     mov             r1,#adec                        ;мл        
                              ст
1792 120000   F     3827                                     call    decbin                  ;abin..abin+3 (hex)
1795 120000   F     3828                                     call    loadr2                  ;r2..r5
1798 120402         3829                                     call    altof                   ;r2..r5->int
179B 020000   F     3830     dgoto7:                  jmp            goto7
                    3831     
179E 020000   F     3832     rlefcur:                jmp             lefcur
                    3833     
17A1 B63464         3834     nom33:          cjne            @r0,#34h,labelP
17A4 75B0FB         3835                               mov           p3,#0fbh
17A7 30B7F4         3836                              jnb            p3.7,rlefcur
17AA 75B0F7         3837                              mov            p3,#0f7h
17AD 20B7EB         3838                              jb             p3.7,dgoto7
17B0 7635           3839                              mov            @r0,#35h
17B2 78B2           3840                              mov            r0,#marker
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    61

17B4 76FF           3841                              mov            @r0,#0ffh
                    3842                              ;T1<-число на индикаторе
                    3843                                               ;vvod КОН БЛ 000
17B6 78CF           3844                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
17B8 7630           3845                              mov            @r0,#30h  
17BA C20B           3846                              clr            bitmem
17BC D204           3847                              setb           bitizm;;;;      
17BE 020000   F     3848                             jmp        goto7
17C1 020000   F     3849     vodm11_15:                      jmp             vvodm11_15
17C4 020000   F     3850     me11_15de:                      jmp             me11_15dec
17C7 020000   F     3851     moutkmem:                               jmp             outkmem
                    3852     
17CA 020000   F     3853     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3854     ;обработка кнопки меню ввод
17CD 301138         3855     labelS:         jnb                     bitmenu,labelP
17D0 75B0EF         3856                                             mov                     p3,#0efh
17D3 30B7F4         3857                                             jnb                     p3.7,nmem_menu
17D6 75B0DF         3858                                             mov                     p3,#0dfh
17D9 30B7EB         3859                                             jnb                     p3.7,moutkmem
17DC 78B1           3860                                             mov                     r0,#vichR
17DE 7415           3861                                             mov                     a,#15h
17E0 C3             3862                                             clr                     c
17E1 96             3863                                             subb            a,@r0
17E2 4021           3864                                             jc                      rme21_23
                    3865                             
17E4 75B0FB         3866                                             mov                     p3,#0fbh
17E7 20B7D7         3867                                             jb                      p3.7,vodm11_15
17EA 78B1           3868                                             mov                     r0,#vichR
17EC B611D5         3869                                             cjne                    @r0,#11h,me11_15de;<-
17EF 7615           3870                                             mov                     @r0,#15h
17F1 900000   F     3871                                             mov                     dptr,#teKALIB
17F4 120000   F     3872                                             call            lotext
17F7 020000   F     3873                                             jmp                     onmem11
17FA C211           3874     menuon:         clr             bitmenu                 ;off menu
17FC D204           3875                                             setb    bitizm
                    3876     
17FE 78B1           3877                                     mov             r0,#vichR
1800 7600           3878                                     mov             @r0,#0
1802 020000   F     3879                                     jmp             onmem11
                    3880     
                    3881                                             ;;;;;
                    3882             
1805 020000   F     3883     rme21_23:               jmp             me21_23 
                    3884                             
                    3885     ;режим просмотра
1808 B64130         3886     labelP:                 cjne            @r0,#41h,govvlist
180B 7642           3887                                                     mov                     @r0,#42h
                    3888                                                     ;       считать с индикатора  
180D C3             3889                                             clr                     c
180E E547           3890                                mov          a,bufind+7      
1810 9430           3891                                      subb           a,#30h
1812 B40002         3892                                      cjne           a,#0,chaipr
1815 7401           3893                                      mov            a,#1
1817 F538           3894     chaipr:                          mov            nblok,a
1819 900000   F     3895                                mov          dptr,#teCH;ОТСЧЕТ 000
181C 120000   F     3896                                call         lotext
181F 534BEF         3897                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1822 78B2           3898                                mov          r0,#marker
1824 7607           3899                                mov          @r0,#7
1826 753B09         3900                                mov          movrig,#9
1829 753A07         3901                                mov          movleft,#7
182C 120000   F     3902                                             call            z_1s
182F 020000   F     3903                        jmp     goto7;outF
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    62

1832 020000   F     3904     label43:                jmp             label7
                    3905     
1835 020000   F     3906     rlist_43:                       jmp                     list_43                            
                                  
1838 020000   F     3907     mlabL2r:                        jmp                     mlabL2
183B B642F7         3908     govvlist:                       cjne            @r0,#42h,rlist_43
183E 75B0FB         3909                                                                     mov                     p3,
                             #0fbh
1841 30B7F4         3910                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1844 75B0F7         3911                                                             mov                     p3,#0f7h
1847 20B7E8         3912                                                             jb                      p3.7,label4
                             3
184A 7643           3913                                                             mov                     @r0,#43h;vv
                             od 
184C 78B2           3914                                                             mov                     r0,#marker
184E 76FF           3915                                                             mov                     @r0,#0ffh
1850 7F0A           3916                                                                     mov             r7,#10
1852 7853           3917                                     mov             r0,#adec
1854 120000   F     3918                                     call    clearN
1857 120000   F     3919                                     call    upak3                   
185A 784F           3920                                     mov             r0,#abin
185C 7953           3921                                     mov             r1,#adec                        ;мл        
                              ст
185E 120000   F     3922                                     call    decbin                  ;abin..abin+3 (hex)
1861 120000   F     3923                                     call    loadr2                  ;r2..r5
1864 ED             3924                                     mov             a,r5                            ;сохр номер
                              лемента
1865 F537           3925                                     mov             nelem,a
1867 120402         3926                                     call    altof                   ;r2..r5->int
186A 900000   F     3927                                     mov             dptr,#ch_1;
186D 120000   F     3928                                     call    ldc_ltemp                       ;r8..r11
1870 1201D1         3929                                     call    flsub
1873 900000   F     3930                                     mov             dptr,#ch_4;
1876 120000   F     3931                                     call    ldc_ltemp                       ;r8..r11
1879 120203         3932                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
187C 120343         3933                                     call            ftol                    ;r2..r5->hex
187F C002           3934                                     push            rr2
1881 C003           3935                                     push            rr3
1883 C004           3936                                     push            rr4
1885 C005           3937                                     push            rr5
1887 120000   F     3938                                     call            adrblok;dptr-
188A D005           3939                                     pop                     rr5
188C D004           3940                                     pop                     rr4
188E D003           3941                                     pop                     rr3
1890 D002           3942                                     pop                     rr2
1892 79D8           3943                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
1894 E582           3944                                     mov                     a,dpl
1896 2D             3945                                     add                     a,r5
1897 F582           3946                                     mov                     dpl,a
1899 F7             3947                                     mov                     @r1,a           ;low
189A E583           3948                                     mov                     a,dph
189C 3C             3949                                     addc            a,r4
189D F583           3950                                     mov                     dph,a
189F 19             3951                                     dec                     r1
18A0 F7             3952                                     mov                     @r1,a                   ;high
                    3953                             
18A1                3954     li42_43:
18A1 120000   F     3955                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
18A4 900000   F     3956                                     mov             dptr,#ch10;
18A7 120000   F     3957                                     call    ldc_ltemp
18AA 120000   F     3958                                     call    zdiv    
                    3959                                     ;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    63

18AD 120000   F     3960                                     call    maform
                    3961                                     ;;;;
                    3962     
                    3963                                     ;;;;;;;
18B0 784F           3964                                             mov             r0,#abin
18B2 120000   F     3965                                             call    saver2
18B5 7853           3966                                             mov             r0,#adec
18B7 7952           3967                                             mov             r1,#abin+3      ;hex->10
18B9 120000   F     3968                                             call    bindec
                    3969                                     
18BC 785C           3970                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
18BE 7945           3971                                             mov             r1,#bufind+5
18C0 7F07           3972                                             mov             r7,#7
18C2 E6             3973     ch43:                           mov             a,@r0
18C3 2430           3974                                             add             a,#30h
18C5 F7             3975                                             mov             @r1,a
18C6 19             3976                                             dec             r1
18C7 18             3977                                             dec             r0
18C8 DFF8           3978                                             djnz    r7,ch43
18CA 7847           3979                                             mov             r0,#bufind+7
18CC 762D           3980                                             mov             @r0,#2dh          ;-2..-9
18CE 7840           3981                                             mov             r0,#bufind
18D0 762B           3982                                             mov             @r0,#2bh
18D2 300202         3983                                             jnb             znmat,nozzmi43;bitznak,nozzmi
18D5 762D           3984                                             mov             @r0,#2dh
18D7 E538           3985     nozzmi43:       mov             a,nblok
18D9 B40104         3986                                             cjne    a,#1,nozzmi1            
18DC 7934           3987                                             mov             r1,#sadiap;diap
18DE 8010           3988                                             jmp             nozzbl
18E0 B40204         3989     nozzmi1:        cjne    a,#2,nozzmi2            
18E3 7932           3990                                             mov             r1,#sadiap2;diap
18E5 8009           3991                                             jmp             nozzbl
18E7 B40304         3992     nozzmi2:        cjne    a,#3,nozzmi3            
18EA 7931           3993                                             mov             r1,#sadiap3;diap
18EC 8002           3994                                             jmp             nozzbl
18EE 7930           3995     nozzmi3:        mov             r1,#sadiap4;diap
                    3996                                     
18F0 7848           3997     nozzbl:         mov             r0,#bufind+8
18F2 E7             3998                                             mov             a,@r1
18F3 B40808         3999                                             cjne    a,#8,nodi8_43
18F6 7630           4000                                             mov             @r0,#30h                 ;10-10
18F8 18             4001                                             dec             r0
18F9 7663           4002                                             mov             @r0,#63h;31h
18FB 08             4003                                             inc             r0
18FC 800E           4004                                             jmp             see_l43
18FE B40908         4005     nodi8_43:       cjne    a,#9,nodi9_43
                    4006                                     
1901 7631           4007                                             mov             @r0,#31h           ;10-11
1903 18             4008                                             dec             r0
1904 7663           4009                                             mov             @r0,#63h;31h
                    4010                                     
1906 08             4011                                             inc             r0
1907 8003           4012                                             jmp             see_l43
1909 2432           4013     nodi9_43:               add             a,#32h
190B F6             4014                                             mov             @r0,a;
190C 08             4015     see_l43:                        inc             r0
190D 7641           4016                                             mov             @r0,#"A";"E";
                    4017                             ;       inc             r0
                    4018                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    4019                             ;       inc             r0;             mov             bufind+11
                    4020                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
190F 434B10         4021                             orl                     bufind+11,#10h
1912 120000   F     4022     out43:          call            ind
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    64

1915 120000   F     4023                                             call            z_1s
1918 020000   F     4024                                             jmp             out7                               
                                  
                    4025     
                    4026                                     ;;;;;;;;        
191B 783D           4027     label7: mov             r0,#chkl
191D 7604           4028                                     mov             @r0,#04;3
191F 08             4029                                     inc             r0
1920 76E8           4030                                     mov             @r0,#0e8h               ;1000
1922 020000   F     4031                                     jmp             out7;
1925 B64351         4032     list_43:                cjne    @r0,#43h,noli_43
1928 75B0FB         4033                                                     mov             p3,#0fbh                ;43
                             h <-
192B 20B70A         4034                                                     jb              p3.7,vvod43             ;vv
                             od
192E C20B           4035                                                     clr             bitmem
1930 D204           4036                                                     setb    bitizm
1932 78B2           4037                                                     mov             r0,#marker
1934 76FF           4038                                                     mov             @r0,#0ffh
1936 80E3           4039                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    4040     
1938 7644           4041     vvod43:                 mov             @r0,#44h
193A E537           4042                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
193C 04             4043                                                     inc             a
193D F552           4044                                                     mov             abin+3,a
                    4045                                                     
193F F537           4046                                                     mov             nelem,a
1941 E4             4047                                                     clr             a
1942 F551           4048                                                     mov             abin+2,a
1944 F550           4049                                                     mov             abin+1,a
1946 F54F           4050                                                     mov             abin,a
                    4051                                             
1948 7853           4052                                             mov             r0,#adec
194A 7952           4053                                             mov             r1,#abin+3      ;hex->10
194C 120000   F     4054                                             call    bindec
194F 7840           4055                                             mov             r0,#bufind;почистить индикатор
1951 7F0A           4056                                             mov             r7,#10
1953 7420           4057                                             mov             a,#20h
1955 F6             4058     cle20:          mov             @r0,a
1956 08             4059                                             inc             r0
1957 DFFC           4060                                             djnz    r7,cle20
                    4061                                             ;;;;;;
1959 900000   F     4062                                             mov             dptr,#teCH;ОТСЧЕТ 000
195C 120000   F     4063                                call         lotext
195F 534BEF         4064                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1962 785C           4065                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1964 7949           4066                                             mov             r1,#bufind+9
1966 7F03           4067                                             mov             r7,#3
1968 E6             4068     ch43_42:                                mov             a,@r0
1969 2430           4069                                             add             a,#30h
196B F7             4070                                             mov             @r1,a
196C 19             4071                                             dec             r1
196D 18             4072                                             dec             r0
196E DFF8           4073                                             djnz    r7,ch43_42
1970 120000   F     4074                                             call            ind
1973 120000   F     4075                                             call            z_1s
1976 020000   F     4076                                             jmp             out7
1979 B64419         4077     noli_43:        cjne            @r0,#44h,vvosta
197C 7643           4078                                             mov                     @r0,#43h
197E 79D8           4079                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
1980 E7             4080                                                     mov                     a,@r1
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    65

1981 F582           4081                                                     mov                     dpl,a
1983 19             4082                                                     dec                     r1
1984 E7             4083                                                     mov                     a,@r1;high
1985 F583           4084                                                     mov                     dph,a
1987 A3             4085                                                     inc                     dptr
1988 A3             4086                                                     inc                     dptr
1989 A3             4087                                                     inc                     dptr
198A A3             4088                                                     inc                     dptr
198B E583           4089                                                     mov                     a,dph
198D F7             4090                                                     mov                     @r1,a
198E 09             4091                                                     inc                     r1
198F E582           4092                                                     mov                     a,dpl
1991 F7             4093                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
1992 020000   F     4094                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    4095     
1995 B66111         4096     vvosta:                 cjne            @r0,#61h,vvostad
1998 7662           4097                                                     mov                     @r0,#62h
199A 900000   F     4098                                                     mov                     dptr,#teMAX;
199D 120000   F     4099                                                     call            lotext
19A0 120000   F     4100                                                     call            vichmax
19A3 120000   F     4101                                                     call            z_05s;z_1s
19A6 020000   F     4102                                                     jmp             goto7
                    4103     
19A9 B66211         4104     vvostad:                cjne            @r0,#62h,rousta
19AC 7663           4105                                                     mov                     @r0,#63h
19AE 900000   F     4106                                                     mov             dptr,#teMid;
19B1 120000   F     4107                                                     call    lotext
19B4 120000   F     4108                                                     call            vichmean
19B7 120000   F     4109                                                     call            z_05s
19BA 020000   F     4110                                                     jmp             goto7
                    4111     
19BD B6630E         4112     rousta:                 cjne            @r0,#63h,rousta1
19C0 7661           4113                                                     mov                     @r0,#61h
19C2 900000   F     4114                                                     mov             dptr,#teMin;
19C5 120000   F     4115                                                     call    lotext
19C8 120000   F     4116                                                     call            vichmin
19CB 120000   F     4117                                                     call            z_05s
19CE 020000   F     4118     rousta1:                jmp             goto7
                    4119     
19D1 020000   F     4120     rLABELP:                jmp                     LABELP
19D4 78B1           4121     vvodm11_15:     mov                     r0,#vichR;vvod
19D6 75B0F7         4122                                                     mov                     p3,#0f7h
19D9 20B7F5         4123                                             jb                      p3.7,rLABELP;????
                    4124                                     
                    4125     
19DC B61115         4126                                             cjne                    @r0,#11h,tome21
19DF 7621           4127                                             mov                     @r0,#21h;vvod
19E1 900000   F     4128                                             mov                     dptr,#teTE11
19E4 120000   F     4129                                             call            lotext
19E7 534B03         4130                                             anl                     bufind+11,#03h ;погасить за
                             пятые
19EA 020000   F     4131                                             jmp                     onmem11
                    4132     
19ED 16             4133     me11_15dec:             dec             @r0                             ;<-
19EE 120000   F     4134     lokame1:        call            lomenu
19F1 020000   F     4135                                             jmp                     onmem11
                    4136     
19F4 B61206         4137     tome21:         cjne                    @r0,#12h,tome13
                    4138                                             ;вкл тест интерфейса
19F7 020000   F     4139                                             jmp             testrs;??????????
19FA 020000   F     4140                                             jmp                     onmem11
                    4141     
19FD B6132A         4142     tome13:         cjne                    @r0,#13h,tome14
1A00 7631           4143                                             mov                     @r0,#31h
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    66

                    4144                                             
1A02 7A50           4145                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1A04 7B2C           4146                                             mov                     r3,#2ch
1A06 120454         4147                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1A09 E508           4148                                             mov                     a,r8
1A0B B4000E         4149                                             cjne            a,#00,skor19
1A0E 900000   F     4150                                             mov                     dptr,#teS57_6;57,6
1A11 120000   F     4151                                             call            lotext
1A14 434B80         4152                                     orl                     bufind+11,#80h
1A17 C213           4153                                             clr                     bitv19
                    4154     
1A19 020000   F     4155                                             jmp             onmem11
1A1C 900000   F     4156     skor19:         mov                     dptr,#teS19_2
1A1F 120000   F     4157                                             call            lotext
1A22 D213           4158                                             setb            bitv19
1A24 434B80         4159                                             orl                     bufind+11,#80h
1A27 020000   F     4160                                             jmp                     onmem11
                    4161                                             
                    4162     
1A2A B61415         4163     tome14:         cjne                    @r0,#14h,tome15
1A2D D204           4164                                             setb            bitizm
1A2F 7881           4165                                             mov                     r0,#chavt
1A31 7600           4166                                             mov                     @r0,#0
1A33 08             4167                                             inc                     r0
1A34 7600           4168                                             mov                     @r0,#0
1A36 C211           4169     outmenu:        clr                     bitmenu
1A38 020000   F     4170                                             jmp                     out7
                    4171     
1A3B 78B1           4172     goparom:        mov             r0,#vichR               ;режим меню 52
1A3D 7652           4173                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
1A3F 020000   F     4174                                             jmp                     goparol
1A42 2016F6         4175     tome15:         jb              bitpar,goparom  
1A45 7651           4176                                             mov                     @r0,#51h;ПАРОЛЬ 000
1A47 120000   F     4177                                             call            lomenu
1A4A 78B2           4178                                             mov                     r0,#marker
1A4C 7607           4179                                             mov                     @r0,#7
1A4E 753B09         4180                                             mov                     movrig,#9
1A51 753A07         4181                                             mov                     movleft,#7
                    4182                                             ;setb           bitizm
1A54 020000   F     4183                                             jmp                     onmem11
                    4184     
                    4185     
1A57 78B1           4186     me21_23:        mov                     r0,#vichR               ;<-
1A59 7423           4187                                             mov                     a,#23h
1A5B C3             4188                                             clr                     c
1A5C 96             4189                                             subb            a,@r0
1A5D 403D           4190                                             jc                      labelS1
1A5F 75B0FB         4191                                             mov                     p3,#0fbh
1A62 20B718         4192                                             jb                      p3.7,vv21_23
1A65 B6210B         4193                                             cjne            @r0,#21h,me21_23dec;-<
1A68 7623           4194                                             mov                     @r0,#23h
1A6A 900000   F     4195                                             mov                     dptr,#teTE7
1A6D 120000   F     4196                                             call            lotext
1A70 020000   F     4197                                             jmp                     onmem11
1A73                4198     me21_23dec:     
1A73 16             4199                                             dec                     @r0
1A74 120000   F     4200                                             call            lomenu
1A77 020000   F     4201                                             jmp                     onmem11
1A7A 020000   F     4202     onmem12:        jmp             outF    ;(ie7)                          
                    4203                                                     
1A7D 75B0F7         4204     vv21_23:        mov             p3,#0f7h                ;vvod
1A80 20B7F7         4205                                             jb              p3.7,onmem12
1A83 B6210C         4206                                             cjne            @r0,#21h,test22
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    67

                    4207                                             ;mov                    dptr,#tabt11;заслать ус 11А
1A86 120000   F     4208     tests:          call            lotpus
1A89 D215           4209                                             setb            biteizm;запомнить режим ТИ
1A8B D204           4210                                             setb            bitizm
1A8D C211           4211                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1A8F 020000   F     4212                                             jmp                     onmem11
1A92 B62202         4213     test22:         cjne            @r0,#22h,test23
                    4214                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1A95 80EF           4215                                             jmp             tests   
1A97                4216     test23:
                    4217                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1A97 80ED           4218                                             jmp             tests   
1A99 020000   F     4219     left_s:         jmp                     left_sk
1A9C B63175         4220     labelS1:        cjne            @r0,#31h,me_41
1A9F 75B0FB         4221                                             mov                     p3,#0fbh                   
                                  ;<-
1AA2 30B7F4         4222                                             jnb                     p3.7,left_s
1AA5 75B0F7         4223                                             mov                     p3,#0f7h
1AA8 20B7CF         4224                                             jb                      p3.7,onmem12
                    4225                                             ;запомнить признак установленной скорости в рпзу
                    4226     
                    4227     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4228     ;и запись во внешнее озу(0000h)
1AAB 7900           4229                                             mov             r1,#0                   ;
1AAD 7A50           4230                                     mov             r2,#50h
1AAF 7B00           4231                                     mov             r3,#00
1AB1 120499         4232                                     call    copyPP
                    4233                                     ;внести изменения во внешн озу
                    4234                                     ;KD=00 01 86 A0 (KD=1)
                    4235                                     ;кофф *100000 и переведенный в hex формат
                    4236                                     ;согласно адресов диапазонов и адресов яч вн озу 
1AB4 792C           4237                                     mov             r1,#2ch
1AB6 7400           4238                                     mov             a,#0;57,6
1AB8 301302         4239                                     jnb             bitv19,spwri
1ABB 7401           4240                                     mov             a,#1;19.6
1ABD F3             4241     spwri:  movx    @r1,a
                    4242     ;стереть страницу пап прогр 
1ABE 905000         4243                                     mov             dptr,#5000h
1AC1 7FFF           4244                                     mov             r7,#0ffh
1AC3 12043E         4245                                     call    cle256
                    4246     ;и запись в ячейки кофф памяти прогр (3000h) 
1AC6 7FFF           4247                                     mov             r7,#0ffh
1AC8 7900           4248                                     mov             r1,#0                           ;external r
                             am
1ACA 905000         4249                                     mov             dptr,#5000h
1ACD 120480         4250                                     call    wrpage
                    4251             
1AD0 201305         4252                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1AD3 758DF4         4253                                             mov                     TH1,#244                ;57
                             .6
1AD6 8003           4254                                             jmp                     outsko
1AD8 758DDC         4255     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1ADB C211           4256     outsko:         clr             bitmenu
1ADD D204           4257                                             setb            bitizm
1ADF 020000   F     4258                                             jmp                     out7
                    4259     
1AE2 020000   F     4260     rlabels4:               jmp             labels4
1AE5 020000   F     4261     rlabelS13:      jmp             labelS13
                    4262     
1AE8 B652F7         4263     me_52:          cjne            @r0,#52h,rlabels4
1AEB 75B0FB         4264                                             mov                     p3,#0fbh;<-
1AEE 20B717         4265                                             jb                      p3.7,vv_52v     ;ввод в кал
                             ибровке
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    68

1AF1 78B2           4266                                                     mov             r0,#marker              ;сд
                             виг маркера влево при калибр
1AF3 7440           4267                                     mov             a,#bufind
1AF5 26             4268                                             add             a,@r0                   ;a=bufind+m
                             arker
1AF6 F9             4269                                             mov             r1,a
1AF7 19             4270                                             dec             r1;inc          r1
1AF8 873C           4271                                             mov             savba,@r1
                    4272                                                     
1AFA 78B2           4273                                             mov             r0,#marker
1AFC 16             4274                                             dec             @r0                             
1AFD C219           4275                                             clr             bitmig
1AFF E53A           4276                                             mov                     a,movleft
1B01 B60001         4277                                             cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр ка
                             либровки
1B04 06             4278                                             inc                     @r0
1B05 020000   F     4279     me_52v:         jmp                     goto7
                    4280     
1B08 75B0F7         4281     vv_52v:         mov             p3,#0f7h
1B0B 30B703         4282                                             jnb             p3.7,rvvkali52
1B0E 020000   F     4283                                             jmp                     goto7
1B11 020000   F     4284     rvvkali52:      jmp             vvkali52
                    4285     
                    4286     
1B14 B651D1         4287     me_41:          cjne            @r0,#51h,me_52;rlabels4
1B17 75B0FB         4288                                             mov             p3,#0fbh;<-
1B1A 30B7C8         4289                                             jnb             p3.7,rlabelS13
1B1D 75B0F7         4290                                             mov             p3,#0f7h
1B20 20B773         4291                                             jb              p3.7,vvmenu
                    4292                                             ;ввод пароля
                    4293                                     
                    4294     ;       считать с индикатора 
1B23 7F0E           4295                                     mov             r7,#14
1B25 784F           4296                                     mov             r0,#abin
1B27 120000   F     4297                                     call    clearN                  
                    4298                                     
                    4299     ;чтение номера байта с индикатора(3байта)
                    4300     ;bufind+3..bufind+9
                    4301     ;-  - - -
                    4302     ;- - - - - - - - - -
                    4303     ;adec..adec+9
                    4304     ;ст            мл
1B2A 7849           4305                                     mov             r0,#bufind+9;
1B2C 795C           4306                                     mov             r1,#adec+9
1B2E 7F03           4307                                     mov             r7,#3;3bait
1B30 C3             4308     upav1:          clr             c
1B31 E6             4309                                     mov             a,@r0
1B32 9430           4310                                     subb    a,#30h
1B34 F7             4311                                     mov             @r1,a
1B35 18             4312                                     dec             r0
1B36 19             4313                                     dec             r1
1B37 DFF7           4314                                     djnz    r7,upav1;adec+7..adec+9
1B39 7A50           4315                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1B3B 7B28           4316                                             mov                     r3,#28h
1B3D 120454         4317                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1B40 800F           4318     jmp                     goparol
1B42 E508           4319                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1B44 B55A52         4320                                     cjne            a,adec+7,parerr
1B47 E509           4321                                     mov                     a,r9    
1B49 B55B4D         4322                                     cjne            a,adec+8,parerr
1B4C E50A           4323                                     mov                     a,r10
1B4E B55C48         4324                                     cjne            a,adec+9,parerr
                    4325                                     ;равны
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    69

1B51 78B1           4326     goparol:        mov             r0,#vichR               ;режим меню 52
1B53 7652           4327                                             mov             @r0,#52h                ;0000-n
1B55 900000   F     4328                                             mov             dptr,#teKD;00000-nA
1B58 120000   F     4329                                             call            lotext
                    4330                                             ;;;;;;;;;
                    4331                                                     ;n(hex)->abin
1B5B 120000   F     4332                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1B5E 2552           4333                                             add             a,abin+3
1B60 F552           4334                                             mov             abin+3,a
1B62 7853           4335                                             mov             r0,#adec
1B64 7952           4336                                             mov             r1,#abin+3      ;hex->10
1B66 120000   F     4337                                             call    bindec
1B69 855C48         4338                                             mov             bufind+8,adec+9
1B6C 75472D         4339                                             mov             bufind+7,#2dh
1B6F 434A80         4340                                             orl                     bufind+10,#80h;зажечь KMП
1B72 434B10         4341                                             orl                     bufind+11,#10h;точка после 
                             1 знакоместа
1B75 79AE           4342                                             mov             r1,#diap
1B77 7848           4343                                             mov             r0,#bufind+8
1B79 E7             4344                                             mov             a,@r1
1B7A B40807         4345                                             cjne    a,#8,nodi8k
1B7D 7630           4346                                             mov             @r0,#30h                 ;10-10
1B7F 18             4347                                             dec             r0
1B80 7663           4348                                             mov             @r0,#63h;31h
1B82 8008           4349                                             jmp             nodisk9
1B84 B40905         4350     nodi8k:                         cjne    a,#9,nodisk9
                    4351                                     
1B87 7631           4352                                             mov             @r0,#31h           ;10-11
1B89 18             4353                                             dec             r0
1B8A 7663           4354                                             mov             @r0,#63h;31h
                    4355                                     
                    4356     
1B8C 78B2           4357     nodisk9:        mov                     r0,#marker
1B8E 7601           4358                                             mov                     @r0,#1
1B90 753A01         4359                                             mov                     movleft,#1
1B93 753B05         4360                                             mov                     movrig,#5
                    4361                                             
1B96 020000   F     4362     vvmenu:         jmp             goto7
                    4363     
1B99 753932         4364     parerr:         mov                     nuerr,#32h
1B9C 120000   F     4365                                             call            error
1B9F 120000   F     4366                                             call            ind
1BA2 120000   F     4367                                             call            z_1s
1BA5 C211           4368                                             clr                     bitmenu
1BA7 D204           4369                                             setb            bitizm
1BA9 78B2           4370                                             mov                     r0,#marker
1BAB 76FF           4371                                             mov                     @r0,#0ffh
1BAD 020000   F     4372                                             jmp             goto7
                    4373     
1BB0 30130E         4374     left_sk:                jnb                     bitv19,tosk19;<-
1BB3 900000   F     4375                                             mov                     dptr,#teS57_6;57,6
1BB6 120000   F     4376                                             call            lotext
1BB9 434B80         4377                                             orl                     bufind+11,#80h
1BBC C213           4378                                             clr                     bitv19
1BBE 020000   F     4379                                             jmp             out7
1BC1 900000   F     4380     tosk19:         mov                     dptr,#teS19_2
1BC4 120000   F     4381                                             call            lotext
1BC7 434B80         4382                                             orl                     bufind+11,#80h
1BCA D213           4383                                             setb            bitv19
1BCC 020000   F     4384                                             jmp             out7
                    4385     
1BCF                4386     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4387             
                    4388     ;;;;;;;;;;;;;;;;;;
                    4389     ;необходимо не портить цифру в следуюем слева знакоместе
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    70

                    4390     ;т е сохранить ее в ячейке для мигания в противном случае
                    4391     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4392     ;       знакоместа
1BCF 78B2           4393                                     mov             r0,#marker
1BD1 7440           4394                                     mov             a,#bufind
1BD3 26             4395                                             add             a,@r0                   ;a=bufind+m
                             arker
1BD4 F9             4396                                             mov             r1,a
1BD5 19             4397                                             dec             r1;inc          r1
1BD6 873C           4398                                             mov             savba,@r1
                    4399                                                     
1BD8 78B2           4400                                                     mov             r0,#marker
1BDA 16             4401                                                     dec             @r0                        
                                  
1BDB C219           4402                                     clr             bitmig
1BDD E53A           4403                                     mov                     a,movleft
1BDF B60652         4404                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1BE2 06             4405                                     inc             @r0
1BE3 020000   F     4406                                             jmp             goto7
                    4407     ;;;;;;;
                    4408     
1BE6                4409     vvkali52:       ;введено значение для калибровки
                    4410                                             ;число на индикаторе ->Ak  (52h)
                    4411                                             ;       считать с индикатора 
1BE6 7F0E           4412                                     mov             r7,#14
1BE8 784F           4413                                     mov             r0,#abin
1BEA 120000   F     4414                                     call    clearN                  
                    4415                                     
                    4416     ;чтение номера байта с индикатора(3байта)
                    4417     ;bufind+1..bufind+5
                    4418     ;-  - - -
                    4419     ;- - - - - - - - - -
                    4420     ;adec..adec+9
                    4421     ;ст            мл
1BED 7845           4422                                     mov             r0,#bufind+5;
1BEF 795C           4423                                     mov             r1,#adec+9
1BF1 7F05           4424                                     mov             r7,#5;5bait
1BF3 C3             4425     upav2:          clr             c
1BF4 E6             4426                                     mov             a,@r0
1BF5 9430           4427                                     subb    a,#30h
1BF7 F7             4428                                     mov             @r1,a
1BF8 18             4429                                     dec             r0
1BF9 19             4430                                     dec             r1
1BFA DFF7           4431                                     djnz    r7,upav2;adec+7..adec+9
                    4432     
1BFC 784F           4433                                     mov             r0,#abin
1BFE 7953           4434                                     mov             r1,#adec                        ;мл        
                              ст
1C00 120000   F     4435                                     call    decbin                  ;abin..abin+3 (hex)
1C03 120000   F     4436                                     call    loadr2                  ;r2..r5
1C06 120402         4437                                     call    altof   ;r2..r5->float
1C09 900000   F     4438                                     mov     dptr,#ch_10;10
1C0C 120000   F     4439                                     call    ldc_ltemp                       ;r8..r11=8
1C0F 120203         4440                                     call    flmul
1C12 78A4           4441                                     mov             r0,#rez_Ak
1C14 120000   F     4442                                     call    saver2
1C17 C211           4443                                             clr                     bitmenu
1C19 D212           4444                                             setb            bitklb
1C1B 434A80         4445                                             orl                     bufind+10,#80h;зажечь KMП
1C1E D204           4446                                             setb            bitizm;бит калибровки уже установле
                             н
1C20 78B2           4447                                             mov                     r0,#marker
1C22 76FF           4448                                             mov                     @r0,#0ffh
1C24 783D           4449                                     mov             r0,#chkl
1C26 76FF           4450                                     mov             @r0,#0ffh
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    71

1C28 08             4451                                     inc             r0
1C29 76FF           4452                                     mov             @r0,#0ffh;38h
1C2B 120000   F     4453                                     call            z_1s
1C2E 020000   F     4454                                     jmp             out7
                    4455     
                    4456     
1C31 020000   F     4457                                             jmp             goto7
                    4458                                              
1C34 020000   F     4459     onmem13:        jmp             goto7   ;(ie7)
                    4460     
1C37 B642AC         4461     labels4:        cjne            @r0,#42h,vvkali52
1C3A 75B0FB         4462                                             mov                     p3,#0fbh;<-
1C3D 30B7F4         4463                                             jnb             p3.7,onmem13
1C40 75B0F7         4464                                             mov             p3,#0f7h;vvod
1C43 20B7EE         4465                                             jb              p3.7,onmem13
                    4466                                             
                    4467             
1C46 020000   F     4468     jmp             out7                                                    
                    4469     ;;;;;;;
1C49                4470     labelI:
1C49 75B0FE         4471                                     mov             p3,#0feh
1C4C E5B0           4472                                     mov             a,p3
1C4E 20E703         4473                                     jb              acc.7,nopoint
                    4474                                     ;
1C51 020000   F     4475                                     jmp             goto7;out7
                    4476     
1C54 75B0FB         4477     nopoint:                mov             p3,#0fbh
1C57 E5B0           4478                                     mov             a,p3
1C59 20E72C         4479                                     jb              acc.7,nopoin7
1C5C 78B2           4480     labelS3:mov             r0,#marker
1C5E E53A           4481                                     mov             a,movleft
1C60 B40309         4482                                     cjne    a,#3,poina1
1C63 B6030B         4483                                     cjne    @r0,#3,nomarl;26
                    4484                                     ;mov            @r0,#9
1C66 E53B           4485     poina2: mov                     a,movrig                ;кн <- B=+00000
1C68 F6             4486                                     mov                     @r0,a
1C69 020000   F     4487                                     jmp             goto7;  out7
                    4488     
1C6C B60402         4489     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1C6F 80F5           4490                                             jmp             poina2
                    4491     
                    4492     
1C71                4493     nomarl:                 ;                               29.12.06
                    4494     ;;;;;;;;;;;;;;;;;;
                    4495     ;необходимо не портить цифру в следуюем справа знакоместе
                    4496     ;т е сохранить ее в ячейке для мигания в противном случае
                    4497     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4498     ;       знакоместа
1C71 78B2           4499                                     mov             r0,#marker
1C73 7440           4500                                     mov             a,#bufind
1C75 26             4501                                             add             a,@r0                   ;a=bufind+m
                             arker
1C76 F9             4502                                             mov             r1,a
1C77 09             4503                                             inc             r1
1C78 873C           4504                                             mov             savba,@r1
                    4505                                                     
1C7A 78B2           4506                                                     mov             r0,#marker
1C7C 16             4507                                                     dec             @r0                        
                                  
1C7D C219           4508                                     clr             bitmig
1C7F E53A           4509                                     mov                     a,movleft
1C81 B4036B         4510                                     cjne            a,#3,poinA
1C84 B60266         4511                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
                             0000
1C87 06             4512     poin3:  inc             @r0
                    4513     ;нажат ввод А =000000 запомнить константу А
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    72

1C88 75B0F7         4514     nopoin7:           mov          p3,#0f7h
1C8B E5B0           4515                                     mov             a,p3
1C8D 20E75D         4516                                     jb              acc.7,gogo7;out7
1C90 78B1           4517                                     mov             r0,#vichR
1C92 E6             4518                                     mov             a,@r0
1C93 B6215E         4519                                     cjne    @r0,#21h,no21p7
1C96 7611           4520                                     mov             @r0,#11h
                    4521                             ;       считать с индикатора  упаковать в плавающий формат
                    4522                             ;   сохранить
1C98 7F0E           4523                                     mov             r7,#14
1C9A 784F           4524                                     mov             r0,#abin
1C9C 120000   F     4525                                     call    clearN                  
1C9F 120000   F     4526                                     call    upakA
                    4527                                     
1CA2 784F           4528                                     mov             r0,#abin
1CA4 7953           4529                                     mov             r1,#adec                        ;мл        
                              ст
1CA6 120000   F     4530                                     call    decbin                  ;abin..abin+3 (hex)
1CA9 120000   F     4531                                     call    loadr2                  ;r2..r5
1CAC 120402         4532                                     call    altof                   ;r2..r5->float
1CAF 78BC           4533                                     mov                     r0,#konstA
1CB1 120000   F     4534                                     call            saver2
1CB4 900000   F     4535                                     mov                     dptr,#ch0
1CB7 120000   F     4536                                     call            ldc_ltemp
1CBA 1201D6         4537                                     call            flcmp
1CBD 6010           4538                                     jz              erra0
                    4539     ;26
1CBF 78B2           4540                                     mov             r0,#marker
1CC1 76FF           4541                                     mov             @r0,#0ffh
                    4542                                     
1CC3 900000   F     4543                                     mov             dptr,#teVICH;teBequ0
1CC6 120000   F     4544                                     call    lotext
                    4545                             ;       call            outB
1CC9 534BBF         4546                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4547                             ;       orl             bufind+11,#80h
1CCC 020000   F     4548                                     jmp             goto7
                    4549     
1CCF 78B2           4550     erra0:          mov             r0,#marker
1CD1 76FF           4551                                             mov             @r0,#0ffh
1CD3 753934         4552                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
1CD6 120000   F     4553                                             call            error
1CD9 120000   F     4554                                             call            ind
1CDC 120000   F     4555                                             call            z_1s
1CDF 78B1           4556                                             mov                     r0,#vichR
1CE1 7600           4557                                             mov                     @r0,#0
1CE3 C214           4558                                             clr                     bitvich
1CE5 C206           4559                                             clr                     bitvi11
1CE7 D204           4560                                             setb            bitizm
1CE9 78B2           4561                                             mov                     r0,#marker
1CEB 76FF           4562                                             mov                     @r0,#0ffh
1CED 802E           4563     gogo7:          jmp                     out7;goto7
                    4564     
1CEF B6032B         4565     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1CF2 8093           4566                                             jmp             poin3
                    4567     
1CF4                4568     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4569                             ;   сохранить
1CF4 7F0E           4570                                     mov             r7,#14
1CF6 784F           4571                                     mov             r0,#abin
1CF8 120000   F     4572                                     call    clearN                  
1CFB 120000   F     4573                                     call    upakB                   
1CFE 784F           4574                                     mov             r0,#abin
1D00 7953           4575                                     mov             r1,#adec                        ;мл        
                              ст
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    73

1D02 120000   F     4576                                     call    decbin                  ;abin..abin+3 (hex)
1D05 120000   F     4577                                     call    loadr2                  ;r2..r5
1D08 120402         4578                                     call    altof                   ;r2..r5->int
1D0B 301B04         4579                                     jnb             bitznB,pozB
1D0E EA             4580                                     mov             a,r2
1D0F 4480           4581                                     orl             a,#80h
1D11 FA             4582                                     mov             r2,a                    ;знак-
1D12                4583     pozB:           ;mov            r0,#konstB
                    4584                                     ;call   saver2
                    4585     
1D12 79B2           4586                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1D14 77FF           4587                                     mov             @r1,#0ffh
1D16 78B1           4588                                     mov             r0,#vichR
1D18 7611           4589                                     mov             @r0,#11h
1D1A 020000   F     4590                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4591                                     
                    4592     
1D1D                4593     out7:                   ;mov            IE,#80h
1D1D D083           4594                                     pop             dph
1D1F D082           4595                                     pop             dpl
1D21 D007           4596                                     pop             rr7     
1D23 D006           4597                                     pop             rr6
1D25 D005           4598                                     pop             rr5
1D27 D004           4599                                     pop             rr4
1D29 D003           4600                                     pop             rr3
1D2B D002           4601                                     pop             rr2
1D2D D001           4602                                     pop             rr1                             
1D2F D000           4603                                     pop             rr0
1D31 D0D0           4604                                     pop             psw
1D33 D0E0           4605                                     pop             acc
1D35 75AD00         4606                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1D38 75B0C0         4607                             mov             P3,#0c0h
                    4608                             ;       mov             EIE2,#30H
1D3B C219           4609     clr             bitmig
1D3D E586           4610                                             mov             a,P6            ;p6.4=0
1D3F 54EF           4611                             anl             a,#0efh
1D41 F586           4612                             mov             P6,a
1D43 00             4613                             nop
1D44 00             4614                             nop
                    4615                                     
1D45 E586           4616                             mov             a,P6                    ;p6.4=1 
1D47 4410           4617                             orl             a,#10h
1D49 F586           4618                             mov             P6,a
                    4619                             ;;;;;;;;;
1D4B E5DA           4620                             mov             a,PCA0CPM0;             TOG0
1D4D 4446           4621                             orl             a,#46h;anl              a,#0fbh
1D4F F5DA           4622                             mov             PCA0CPM0,a
                    4623     
1D51 75CDD0         4624                             mov             TH2,#0d0h
1D54 75CC00         4625                             mov             TL2,#00
                    4626     
1D57 D2CA           4627                             setb            T2CON.2
1D59 D2AD           4628                             setb            ET2;IE.5
                    4629                                                         
1D5B 32             4630                                     reti
                    4631     
                    4632     
                    4633                                     
                    4634     
                    4635     
1D5C 78B1           4636     lomenu:         mov             r0,#vichR
1D5E B61107         4637                                             cjne    @r0,#11h,menu12
1D61 900000   F     4638                                             mov             dptr,#teTESI
1D64 120000   F     4639     lome1:                  call    lotexT
1D67 22             4640                                             ret
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    74

1D68 B61205         4641     menu12:         cjne    @r0,#12h,menu13
1D6B 900000   F     4642                                             mov             dptr,#teTESR
1D6E 80F4           4643                                             jmp             lome1
1D70 B61305         4644     menu13:         cjne    @r0,#13h,menu14
1D73 900000   F     4645                                             mov             dptr,#teSKOR
1D76 80EC           4646                                             jmp             lome1
1D78 B61405         4647     menu14:         cjne    @r0,#14h,menu15
1D7B 900000   F     4648                                             mov             dptr,#teAVK
1D7E 80E4           4649                                             jmp             lome1
1D80 B61505         4650     menu15:                 cjne    @r0,#15h,menu21
1D83 900000   F     4651                                             mov             dptr,#teKALIB
1D86 80DC           4652                                             jmp             lome1
                    4653     
1D88 B62105         4654     menu21: cjne    @r0,#21h,menu22
1D8B 900000   F     4655                                             mov             dptr,#teTE11
1D8E 80D4           4656                                             jmp             lome1
1D90 B62205         4657     menu22:         cjne    @r0,#22h,menu23
1D93 900000   F     4658                                             mov             dptr,#teTE9
1D96 80CC           4659                                             jmp             lome1
1D98 B62305         4660     menu23:         cjne    @r0,#23h,menu31
1D9B 900000   F     4661                                             mov             dptr,#teTE7
1D9E 80C4           4662                                             jmp             lome1
1DA0 B63105         4663     menu31:         cjne    @r0,#31h,menu41
1DA3 900000   F     4664                                             mov             dptr,#teS57_6
1DA6 80BC           4665                                             jmp             lome1
                    4666     
1DA8                4667     menu41:         
1DA8 900000   F     4668                                             mov             dptr,#tePAR
1DAB 80B7           4669                                             jmp             lome1
                    4670     
1DAD 020000   F     4671     yesvi_kr:               jmp                     yesvi_km
1DB0                4672     endkalib:;KD=Ak/A3
1DB0 200DFA         4673                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1DB3 789C           4674                                             mov                     r0,#rez_A3
1DB5 120000   F     4675                                             call            resar2
                    4676                                     
1DB8 120402         4677                                     call    altof                   ;->float
1DBB EA             4678                                             mov                     a,r2
1DBC 547F           4679                                             anl                     a,#7fh
1DBE FA             4680                                             mov                     r2,a
1DBF 120000   F     4681                                     call            move28
1DC2 78A4           4682                                             mov                     r0,#rez_Ak
1DC4 120000   F     4683                                             call            resar2
1DC7 1202B7         4684                                             call            fldiv
                    4685                                                     
1DCA 900000   F     4686                                     mov     dptr,#CHtho;100000
1DCD 120000   F     4687                                     call    ldc_ltemp                       ;r8..r11=8
1DD0 120203         4688                                     call    flmul
1DD3 120343         4689                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4690     
1DD6 78A0           4691                                             mov                     r0,#koefKD
1DD8 120000   F     4692                                             call            saver2
                    4693                                             ;запись в рпзу в соотв ячейку
                    4694                             
1DDB 7900           4695                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1DDD 7A50           4696                                     mov             r2,#50h
1DDF 7B00           4697                                     mov             r3,#00
1DE1 120499         4698                                     call    copyPP
                    4699                                     ;внести изменения во внешн озу
1DE4 120000   F     4700                                     call            findext                 ;r1-внешн озу
1DE7 78A0           4701                                     mov                     r0,#koefKD
1DE9 120000   F     4702                                             call            resar2
1DEC EA             4703                                             mov                     a,r2
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    75

1DED F3             4704                                             movx            @r1,a
1DEE 09             4705                                             inc                     r1
1DEF EB             4706                                             mov                     a,r3
1DF0 F3             4707                                             movx            @r1,a
1DF1 09             4708                                             inc                     r1
1DF2 EC             4709                                             mov                     a,r4
1DF3 F3             4710                                             movx            @r1,a
1DF4 09             4711                                             inc                     r1
1DF5 ED             4712                                             mov                     a,r5
1DF6 F3             4713                                             movx            @r1,a
                    4714                                     ;кофф *100000 и переведенный в hex формат
                    4715                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4716     ;стереть страницу пап прогр 
1DF7 905000         4717                                     mov             dptr,#5000h
1DFA 7FFF           4718                                     mov             r7,#0ffh
1DFC 12043E         4719                                     call    cle256
                    4720     ;и запись в ячейки кофф памяти прогр (3000h) 
1DFF 7FFF           4721                                     mov             r7,#0ffh
1E01 7900           4722                                     mov             r1,#0                           ;external r
                             am
1E03 905000         4723                                     mov             dptr,#5000h
1E06 120480         4724                                     call    wrpage
                    4725     ;2.2.07
1E09 79AE           4726                                     mov                     r1,#diap
1E0B B70511         4727                                     cjne            @r1,#5,fulkalib
                    4728                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1E0E D20D           4729                                     setb            bifl_kt
                    4730                                     ;call           loadus
1E10 900000   F     4731                                     mov                     dptr,#tabt7;заслать ус 7А       
1E13 E4             4732                             clr             a
1E14 93             4733                             movc    a,@a+dptr                               ;high byte
1E15 F584           4734                             mov             p4,a
1E17 A3             4735                             inc             dptr
1E18 E4             4736                             clr             a
1E19 93             4737                             movc    a,@a+dptr                               ;low byte
1E1A F585           4738                             mov             p5,a
1E1C 020000   F     4739                                     jmp             goto7;  out_kali
                    4740     
                    4741     ;;;
1E1F                4742     fulkalib:
1E1F C212           4743                                             clr             bitklb
1E21 D216           4744                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1E23 900000   F     4745                                             mov             dptr,#teEND
1E26 120000   F     4746                                             call    lotext
1E29 120000   F     4747                                             call    ind
1E2C 120000   F     4748     out_kali:       call    z_1s
1E2F 120000   F     4749                                             call    z_1s
1E32 020000   F     4750                                             jmp             goto7
1E35                4751     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1E35 7A50           4752                                     mov                     r2,#50h                 ;-11a
1E37 7B14           4753                                     mov                     r3,#14h                 ;k7
1E39 12046C         4754                                     call            rebyte2                         ;r2..r5- he
                             x
1E3C 120402         4755                                     call            altof                   ;r2..r5->float
1E3F C002           4756                                     push            rr2
1E41 C003           4757                                     push            rr3
1E43 C004           4758                                     push            rr4
1E45 C005           4759                                     push            rr5
1E47 7A50           4760                                     mov                     r2,#50h                 ;k5
1E49 7B0C           4761                                     mov                     r3,#0ch
1E4B 12046C         4762                             call            rebyte2                 ;r2..r5
1E4E 120402         4763                                     call            altof                   ;r2..r5->float
1E51 120000   F     4764                                     call            move28
1E54 D005           4765                                     pop                     rr5
1E56 D004           4766                                     pop                     rr4
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    76

1E58 D003           4767                                     pop                     rr3
1E5A D002           4768                                     pop                     rr2
1E5C 1202B7         4769                                     call            fldiv                   ;K7/K5
                    4770     
1E5F 900000   F     4771                                     mov     dptr,#CHtho;100000
1E62 120000   F     4772                                     call    ldc_ltemp                       ;r8..r11=8
1E65 120203         4773                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1E68 C002           4774                                     push            rr2
1E6A C003           4775                                     push            rr3
1E6C C004           4776                                     push            rr4
1E6E C005           4777                                     push            rr5
                    4778                                     
1E70 789C           4779                                     mov                     r0,#rez_A3
1E72 120000   F     4780                                     call            resar2
1E75 120402         4781                                     call            altof                           ;r2..r5->fl
                             oat
1E78 120000   F     4782                                     call            move28
1E7B D005           4783                                     pop                     rr5
1E7D D004           4784                                     pop                     rr4
1E7F D003           4785                                     pop                     rr3
1E81 D002           4786                                     pop                     rr2
1E83 1202B7         4787                               call          fldiv           ;Km     
                    4788     
1E86 900000   F     4789                                     mov     dptr,#CHtho;100000
1E89 120000   F     4790                                     call    ldc_ltemp                       ;r8..r11=8
1E8C 120203         4791                                     call    flmul                           ;r2..r5
1E8F 120343         4792                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1E92 78A0           4793                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1E94 120000   F     4794                                     call            saver2
                    4795                                     ;запись в рпзу в соотв ячейку
1E97 7900           4796                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1E99 7A50           4797                                     mov             r2,#50h
1E9B 7B00           4798                                     mov             r3,#00
1E9D 120499         4799                                     call    copyPP
                    4800                                     ;внести изменения во внешн озу
1EA0 78A0           4801                                     mov                     r0,#koefKD
1EA2 120000   F     4802                                     call            resar2
1EA5 792C           4803                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4804                             
1EA7 EA             4805                                     mov                     a,r2
1EA8 F3             4806                                             movx            @r1,a
1EA9 09             4807                                             inc                     r1
1EAA EB             4808                                             mov                     a,r3
1EAB F3             4809                                             movx            @r1,a
1EAC 09             4810                                             inc                     r1
1EAD EC             4811                                             mov                     a,r4
1EAE F3             4812                                             movx            @r1,a
1EAF 09             4813                                             inc                     r1
1EB0 ED             4814                                             mov                     a,r5
1EB1 F3             4815                                             movx            @r1,a
                    4816                                     ;кофф *100000 и переведенный в hex формат
                    4817                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4818     ;стереть страницу пап прогр 
1EB2 905000         4819                                     mov             dptr,#5000h
1EB5 7FFF           4820                                     mov             r7,#0ffh
1EB7 12043E         4821                                     call    cle256
                    4822     ;и запись в ячейки кофф памяти прогр (3000h) 
1EBA 7FFF           4823                                     mov             r7,#0ffh
1EBC 7900           4824                                     mov             r1,#0                           ;external r
                             am
1EBE 905000         4825                                     mov             dptr,#5000h
1EC1 120480         4826                                     call    wrpage
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    77

                    4827     
1EC4 C20D           4828                                             clr             bifl_kt
1EC6 120000   F     4829                                             call    loadus
1EC9 020000   F     4830                                             jmp             fulkalib
                    4831     
                    4832     ;выч среднего по блоку
                    4833     ;вых r2..r5
1ECC                4834     vichmean:       
                    4835                                             ;;;;;;;;;;
1ECC 120000   F     4836                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1ECF E582           4837                                             mov                     a,dpl
1ED1 FF             4838                                             mov                     r7,a
1ED2 E583           4839                                             mov                     a,dph
1ED4 FE             4840                                             mov                     r6,a
1ED5 120000   F     4841                                             call            resa_hl;save_bl->dptr
                    4842     
1ED8 C3             4843                                                     clr             c; в начало блока?
1ED9 E582           4844                                                     mov                     a,dpl
1EDB 9F             4845                                                     subb            a,r7
1EDC FF             4846                                                     mov                     r7,a
1EDD 7006           4847                                                     jnz                     oldmean
1EDF E583           4848                                                     mov                     a,dph
1EE1 9E             4849                                                     subb            a,r6
1EE2 FE             4850                                                     mov                     r6,a
1EE3 6065           4851                                                     jz                      outmea;
                    4852     ;;;;;;;;;;
1EE5                4853     oldmean:
1EE5 120000   F     4854                                             call            resa_hl;save_bl->dptr
1EE8 78D7           4855                                             mov                     r0,#copy_hl
1EEA E583           4856                                             mov                     a,dph
1EEC F6             4857                                             mov                     @r0,a
1EED 08             4858                                             inc                     r0
1EEE E582           4859                                             mov                     a,dpl
1EF0 F6             4860                                             mov                     @r0,a
1EF1 78B8           4861                                             mov                     r0,#work
1EF3 120000   F     4862                                             call            clear4
1EF6 78D6           4863                                             mov                     r0,#chblok;volume
1EF8 7600           4864                                             mov                     @r0,#0
1EFA 120000   F     4865     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1EFD E582           4866                                             mov                     a,dpl
1EFF FF             4867                                             mov                     r7,a
1F00 E583           4868                                             mov                     a,dph
1F02 FE             4869                                             mov                     r6,a
                    4870     
1F03 78D7           4871                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1F05 E6             4872                                             mov                     a,@r0
1F06 F583           4873                                             mov                     dph,a
1F08 08             4874                                             inc                     r0
1F09 E6             4875                                             mov                     a,@r0
1F0A F582           4876                                             mov                     dpl,a
                    4877                                             
1F0C C3             4878                                             clr                     c;-4
1F0D E582           4879                                             mov                     a,dpl
1F0F 9404           4880                                             subb            a,#4
1F11 F582           4881                                             mov                     dpl,a
1F13 E583           4882                                             mov                     a,dph
1F15 9400           4883                                             subb            a,#0
1F17 F583           4884                                             mov                     dph,a;dptr-4
                    4885                                             ;;;;;;;;
1F19 79D7           4886                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1F1B E583           4887                                                     mov             a,dph
1F1D F7             4888                                               mov           @r1,a
1F1E 09             4889                                                     inc             r1
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    78

1F1F E582           4890                                                     mov             a,dpl
1F21 F7             4891                                                     mov             @r1,a
                    4892                                                     ;;;;;;;;;
1F22 C3             4893                                                     clr             c;пришли в начало блока?
1F23 E582           4894                                                     mov                     a,dpl
1F25 9F             4895                                                     subb            a,r7
1F26 FF             4896                                                     mov                     r7,a
1F27 7006           4897                                                     jnz                     nextmea
1F29 E583           4898                                                     mov                     a,dph
1F2B 9E             4899                                                     subb            a,r6
1F2C FE             4900                                                     mov                     r6,a
1F2D 601B           4901                                                     jz                      outmea;
                    4902                                                     
                    4903                                                     ;продолжаем сравнение
                    4904                                                     ;;;;;;;;;;;             
1F2F 120000   F     4905     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1F32 120402         4906                                             call            altof;->float
1F35 120000   F     4907                                             call            move28                  ;r8..r11
1F38 78B8           4908                                             mov                     r0,#work
1F3A 120000   F     4909                                             call            resar2
1F3D 120166         4910                                             call            fladd
1F40 78B8           4911                                             mov                     r0,#work
1F42 120000   F     4912                                             call            saver2
1F45 78D6           4913                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1F47 06             4914                                             inc                     @r0
1F48 80B0           4915                                             jmp                     meng
1F4A                4916     outmea:         
1F4A 120000   F     4917                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1F4D 120402         4918                                             call            altof;->float
1F50 120000   F     4919                                             call            move28                  ;r8..r11
1F53 78B8           4920                                             mov                     r0,#work
1F55 120000   F     4921                                             call            resar2
1F58 120166         4922                                             call            fladd
1F5B 78B8           4923                                             mov                     r0,#work
1F5D 120000   F     4924                                             call            saver2
1F60 E4             4925                                             clr                     a
1F61 FA             4926                                             mov                     r2,a
1F62 FB             4927                                             mov                     r3,a
1F63 FC             4928                                             mov                     r4,a
1F64 78D6           4929                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1F66 E6             4930                                             mov                     a,@r0
1F67 2401           4931                                             add                     a,#1
1F69 FD             4932                                             mov                     r5,a
1F6A 120402         4933                                             call            altof;r2..r5 float
1F6D 120000   F     4934                                             call            move28
1F70 78B8           4935                                             mov                     r0,#work
1F72 120000   F     4936                                             call            resar2
1F75 1202B7         4937                                             call            fldiv
1F78 900000   F     4938                                             mov                     dptr,#ch_10      
1F7B 120000   F     4939                                     call            ldc_ltemp
1F7E 1202B7         4940                                     call            fldiv
1F81 120343         4941                                             call            ftol                            ;->
                             hex
1F84 120000   F     4942                                             call    maform
1F87 784F           4943                                             mov             r0,#abin
1F89 120000   F     4944                                             call    saver2
                    4945     ;;;;;;;;
                    4946                                             
1F8C 7853           4947                                             mov             r0,#adec
1F8E 7952           4948                                             mov             r1,#abin+3      ;hex->10
1F90 120000   F     4949                                             call    bindec
                    4950                                     
1F93 785C           4951                                             mov             r0,#adec+9;разместить в буфер индик
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    79

                             ации
1F95 7949           4952                                             mov             r1,#bufind+9
1F97 7F05           4953                                             mov             r7,#5
1F99 E6             4954     bufmea:                         mov             a,@r0
1F9A 2430           4955                                             add             a,#30h
1F9C F7             4956                                             mov             @r1,a
1F9D 19             4957                                             dec             r1
1F9E 18             4958                                             dec             r0
1F9F DFF8           4959                                             djnz    r7,bufmea
1FA1 7844           4960                                             mov             r0,#bufind+4
1FA3 762B           4961                                             mov             @r0,#2bh          
1FA5 300202         4962                                             jnb             znmat,nozmea
1FA8 762D           4963                                             mov             @r0,#2dh
1FAA 434B05         4964     nozmea:         orl             bufind+11,#05h
1FAD 22             4965                                             ret
                    4966     
                    4967     
1FAE E0             4968     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1FAF FA             4969                                             mov                     r2,a
1FB0 A3             4970                                             inc                     dptr
1FB1 E0             4971                                             movx            a,@dptr
1FB2 FB             4972                                             mov                     r3,a
1FB3 A3             4973                                             inc                     dptr
1FB4 E0             4974                                             movx            a,@dptr
1FB5 FC             4975                                             mov                     r4,a
1FB6 A3             4976                                             inc                     dptr
1FB7 E0             4977                                             movx            a,@dptr
1FB8 FD             4978                                             mov                     r5,a    
1FB9 22             4979                                             ret
                    4980     
1FBA C3             4981     min4_hl:        clr                     c;-4
1FBB E582           4982                                             mov                     a,dpl
1FBD 9404           4983                                             subb            a,#4
1FBF F582           4984                                             mov                     dpl,a
1FC1 E583           4985                                             mov                     a,dph
1FC3 9400           4986                                             subb            a,#0
1FC5 F583           4987                                             mov                     dph,a;dptr-4
1FC7 22             4988                                             ret
                    4989     
1FC8 020000   F     4990     routmin:                jmp             outmin
                    4991     ;мин значение по по блоку
1FCB                4992     vichmin:        ;;;;;;;;;;
1FCB 120000   F     4993                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1FCE E582           4994                                             mov                     a,dpl
1FD0 FF             4995                                             mov                     r7,a
1FD1 E583           4996                                             mov                     a,dph
1FD3 FE             4997                                             mov                     r6,a
1FD4 120000   F     4998                                             call            resa_hl;save_bl->dptr
                    4999     
1FD7 C3             5000                                                     clr             c; в начало блока?
1FD8 E582           5001                                                     mov                     a,dpl
1FDA 9F             5002                                                     subb            a,r7
1FDB FF             5003                                                     mov                     r7,a
1FDC 7006           5004                                                     jnz                     oldmin
1FDE E583           5005                                                     mov                     a,dph
1FE0 9E             5006                                                     subb            a,r6
1FE1 FE             5007                                                     mov                     r6,a
1FE2 60E4           5008                                                     jz                      routmin;
                    5009     ;;;;;;;;;;
1FE4                5010     oldmin:
1FE4 120000   F     5011                                             call            resa_hl;save_bl->dptr
                    5012                                                                                     
                    5013     ;с конца блока адрес 2го измерение
1FE7 120000   F     5014                                             call            min4_hl
                    5015                                             
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    80

1FEA 78B8           5016                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5017                                             
1FEC E0             5018                                             movx            a,@dptr
1FED F6             5019                                             mov                     @r0,a
1FEE 08             5020                                             inc                     r0
1FEF A3             5021                                             inc                     dptr
1FF0 E0             5022                                             movx            a,@dptr
1FF1 F6             5023                                             mov                     @r0,a
1FF2 08             5024                                             inc                     r0
1FF3 A3             5025                                             inc                     dptr
1FF4 E0             5026                                             movx            a,@dptr
1FF5 F6             5027                                             mov                     @r0,a
1FF6 08             5028                                             inc                     r0
1FF7 A3             5029                                             inc                     dptr
1FF8 E0             5030                                             movx            a,@dptr
1FF9 F6             5031                                             mov                     @r0,a
1FFA A3             5032                                             inc                     dptr
                    5033                                             
1FFB 78B8           5034                                             mov                     r0,#work
1FFD 120000   F     5035                                             call            resar2
2000 120402         5036                                             call            altof;->float;r2..r5
2003 78B8           5037                                             mov                     r0,#work
2005 120000   F     5038                                             call            saver2
                    5039     
2008 120000   F     5040                                             call            min4_hl
                    5041                                             ;call           min4_hl
                    5042     
200B 78D7           5043                                             mov                     r0,#copy_hl
200D E583           5044                                             mov                     a,dph
200F F6             5045                                             mov                     @r0,a
2010 08             5046                                             inc                     r0
2011 E582           5047                                             mov                     a,dpl
2013 F6             5048                                             mov                     @r0,a
                    5049                                     
2014 78D6           5050                                             mov                     r0,#chblok;volume
2016 7600           5051                                             mov                     @r0,#0
2018 120000   F     5052     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
201B E582           5053                                             mov                     a,dpl
201D FF             5054                                             mov                     r7,a
201E E583           5055                                             mov                     a,dph
2020 FE             5056                                             mov                     r6,a
                    5057     
2021 78D7           5058                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2023 E6             5059                                             mov                     a,@r0
2024 F583           5060                                             mov                     dph,a
2026 08             5061                                             inc                     r0
2027 E6             5062                                             mov                     a,@r0
2028 F582           5063                                             mov                     dpl,a
                    5064                                             
202A C3             5065                                             clr                     c;-4
202B E582           5066                                             mov                     a,dpl
202D 9404           5067                                             subb            a,#4
202F F582           5068                                             mov                     dpl,a
2031 E583           5069                                             mov                     a,dph
2033 9400           5070                                             subb            a,#0
2035 F583           5071                                             mov                     dph,a;dptr-4
                    5072                                             ;;;;;;;;
2037 79D7           5073                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
2039 E583           5074                                                     mov             a,dph
203B F7             5075                                               mov           @r1,a
203C 09             5076                                                     inc             r1
203D E582           5077                                                     mov             a,dpl
203F F7             5078                                                     mov             @r1,a
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    81

                    5079                                                     ;;;;;;;;;
2040 C3             5080                                                     clr             c;пришли в начало блока?
2041 E582           5081                                                     mov                     a,dpl
2043 9F             5082                                                     subb            a,r7
2044 FF             5083                                                     mov                     r7,a
2045 7006           5084                                                     jnz                     nextmin
2047 E583           5085                                                     mov                     a,dph
2049 9E             5086                                                     subb            a,r6
204A FE             5087                                                     mov                     r6,a
204B 601D           5088                                                     jz                      outmin;
                    5089                                                     
                    5090                                                     ;продолжаем сравнение
                    5091                                                     ;;;;;;;;;;;             
204D 78B8           5092     nextmin:        mov                     r0,#work
204F 120000   F     5093                                             call            resar2
                    5094                                             ;call           altof;->float;r2..r5
2052 120000   F     5095                                             call            move28;->r8..r11
2055 120000   F     5096                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5097     
2058 120402         5098                                             call            altof;->float;r2..r5
                    5099                                             
205B 1201D6         5100                                             call            flcmp
205E 5005           5101                                             jnc                     nomini
2060 78B8           5102                                             mov                     r0,#work;<
2062 120000   F     5103                                             call            saver2;r2..r5
2065 78D6           5104     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
2067 06             5105                                             inc                     @r0
2068 80AE           5106                                             jmp                     ming
                    5107     
206A 78B8           5108     outmin:         mov                     r0,#work;1ое измерение блока
206C 120000   F     5109                                             call            resar2
                    5110                                     ;       call            altof;->float;r2..r5
206F 120000   F     5111                                             call            move28;->r8..r11
2072 120000   F     5112                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5113     
2075 120402         5114                                             call            altof;->float;r2..r5
                    5115                                             
2078 1201D6         5116                                             call            flcmp
207B 5005           5117                                             jnc                     minivix
207D 78B8           5118                                             mov                     r0,#work;<
207F 120000   F     5119                                             call            saver2;r2..r5
                    5120                                             ;;;;;;;;;
                    5121     
2082 78B8           5122     minivix:        mov                     r0,#work
2084 120000   F     5123                                             call            resar2
                    5124     
                    5125                                             ;call           altof;->float
                    5126                                     
2087 900000   F     5127                                             mov                     dptr,#ch_10      
208A 120000   F     5128                                             call            ldc_ltemp
208D 1202B7         5129                                             call            fldiv
2090 120343         5130                                             call            ftol                            ;->
                             hex
                    5131                                             ;;;
2093 120000   F     5132                                             call            maform
2096 784F           5133                                             mov                     r0,#abin
2098 120000   F     5134                                             call            saver2
                    5135     ;;;;;;;;
                    5136                                             
209B 7853           5137                                             mov             r0,#adec
209D 7952           5138                                             mov             r1,#abin+3      ;hex->10
209F 120000   F     5139                                             call    bindec
                    5140                                     
20A2 785C           5141                                             mov             r0,#adec+9;разместить в буфер индик
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    82

                             ации
20A4 7949           5142                                             mov             r1,#bufind+9
20A6 7F05           5143                                             mov             r7,#5
20A8 E6             5144     bufmin:                         mov             a,@r0
20A9 2430           5145                                             add             a,#30h
20AB F7             5146                                             mov             @r1,a
20AC 19             5147                                             dec             r1
20AD 18             5148                                             dec             r0
20AE DFF8           5149                                             djnz    r7,bufmin
20B0 7844           5150                                             mov             r0,#bufind+4
20B2 762B           5151                                             mov             @r0,#2bh          
20B4 300202         5152                                             jnb             znmat,nozmin
20B7 762D           5153                                             mov             @r0,#2dh
20B9 434B05         5154     nozmin:         orl             bufind+11,#05h
20BC 22             5155                                             ret
                    5156     
                    5157     
                    5158     
20BD 020000   F     5159     routmax:                jmp             outmax
                    5160     ;мин значение по по блоку
20C0                5161     vichmax:        ;;;;;;;;;;
20C0 120000   F     5162                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
20C3 E582           5163                                             mov                     a,dpl
20C5 FF             5164                                             mov                     r7,a
20C6 E583           5165                                             mov                     a,dph
20C8 FE             5166                                             mov                     r6,a
20C9 120000   F     5167                                             call            resa_hl;save_bl->dptr
                    5168     
20CC C3             5169                                                     clr             c; в начало блока?
20CD E582           5170                                                     mov                     a,dpl
20CF 9F             5171                                                     subb            a,r7
20D0 FF             5172                                                     mov                     r7,a
20D1 7006           5173                                                     jnz                     oldmax
20D3 E583           5174                                                     mov                     a,dph
20D5 9E             5175                                                     subb            a,r6
20D6 FE             5176                                                     mov                     r6,a
20D7 60E4           5177                                                     jz                      routmax;
                    5178     ;;;;;;;;;;
20D9                5179     oldmax:
20D9 120000   F     5180                                             call            resa_hl;save_bl->dptr
                    5181                                             
                    5182                                             
                    5183     ;с конца блока адрес 2го измерение
20DC 120000   F     5184                                             call            min4_hl
                    5185                                             
20DF 78B8           5186                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5187                                             
20E1 E0             5188                                             movx            a,@dptr
20E2 F6             5189                                             mov                     @r0,a
20E3 08             5190                                             inc                     r0
20E4 A3             5191                                             inc                     dptr
20E5 E0             5192                                             movx            a,@dptr
20E6 F6             5193                                             mov                     @r0,a
20E7 08             5194                                             inc                     r0
20E8 A3             5195                                             inc                     dptr
20E9 E0             5196                                             movx            a,@dptr
20EA F6             5197                                             mov                     @r0,a
20EB 08             5198                                             inc                     r0
20EC A3             5199                                             inc                     dptr
20ED E0             5200                                             movx            a,@dptr
20EE F6             5201                                             mov                     @r0,a
20EF A3             5202                                             inc                     dptr
                    5203                                             
20F0 78B8           5204                                             mov                     r0,#work
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    83

20F2 120000   F     5205                                             call            resar2
20F5 120402         5206                                             call            altof;->float;r2..r5
20F8 78B8           5207                                             mov                     r0,#work
20FA 120000   F     5208                                             call            saver2
                    5209     
20FD 120000   F     5210                                             call            min4_hl
                    5211                                     ;       call            min4_hl
                    5212     
2100 78D7           5213                                             mov                     r0,#copy_hl
2102 E583           5214                                             mov                     a,dph
2104 F6             5215                                             mov                     @r0,a
2105 08             5216                                             inc                     r0
2106 E582           5217                                             mov                     a,dpl
2108 F6             5218                                             mov                     @r0,a
                    5219                                     
2109 78D6           5220                                             mov                     r0,#chblok;volume
210B 7600           5221                                             mov                     @r0,#0
210D 120000   F     5222     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
2110 E582           5223                                             mov                     a,dpl
2112 FF             5224                                             mov                     r7,a
2113 E583           5225                                             mov                     a,dph
2115 FE             5226                                             mov                     r6,a
                    5227     
2116 78D7           5228                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2118 E6             5229                                             mov                     a,@r0
2119 F583           5230                                             mov                     dph,a
211B 08             5231                                             inc                     r0
211C E6             5232                                             mov                     a,@r0
211D F582           5233                                             mov                     dpl,a
                    5234                                             
211F C3             5235                                             clr                     c;-4
2120 E582           5236                                             mov                     a,dpl
2122 9404           5237                                             subb            a,#4
2124 F582           5238                                             mov                     dpl,a
2126 E583           5239                                             mov                     a,dph
2128 9400           5240                                             subb            a,#0
212A F583           5241                                             mov                     dph,a;dptr-4
                    5242                                             ;;;;;;;;
212C 79D7           5243                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
212E E583           5244                                                     mov             a,dph
2130 F7             5245                                               mov           @r1,a
2131 09             5246                                                     inc             r1
2132 E582           5247                                                     mov             a,dpl
2134 F7             5248                                                     mov             @r1,a
                    5249                                                     ;;;;;;;;;
2135 C3             5250                                                     clr             c;пришли в начало блока?
2136 E582           5251                                                     mov                     a,dpl
2138 9F             5252                                                     subb            a,r7
2139 FF             5253                                                     mov                     r7,a
213A 7006           5254                                                     jnz                     nextmax
213C E583           5255                                                     mov                     a,dph
213E 9E             5256                                                     subb            a,r6
213F FE             5257                                                     mov                     r6,a
2140 601D           5258                                                     jz                      outmax;
                    5259                                                     
                    5260                                                     ;продолжаем сравнение
                    5261                                                     ;;;;;;;;;;;             
2142 78B8           5262     nextmax:        mov                     r0,#work
2144 120000   F     5263                                             call            resar2
                    5264                                             ;call           altof;->float;r2..r5
2147 120000   F     5265                                             call            move28;->r8..r11
214A 120000   F     5266                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5267     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    84

214D 120402         5268                                             call            altof;->float;r2..r5
                    5269                                             
2150 1201D6         5270                                             call            flcmp
2153 4005           5271                                             jc                      nomaxi
2155 78B8           5272                                             mov                     r0,#work;>
2157 120000   F     5273                                             call            saver2;r2..r5
215A 78D6           5274     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
215C 06             5275                                             inc                     @r0
215D 80AE           5276                                             jmp                     maxg
215F 78B8           5277     outmax:         mov                     r0,#work;1ое измерение блока
2161 120000   F     5278                                             call            resar2
                    5279                                     ;       call            altof;->float;r2..r5
2164 120000   F     5280                                             call            move28;->r8..r11
2167 120000   F     5281                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5282     
216A 120402         5283                                             call            altof;->float;r2..r5
                    5284                                             
216D 1201D6         5285                                             call            flcmp
2170 4005           5286                                             jc                      maxvix
2172 78B8           5287                                             mov                     r0,#work;>
2174 120000   F     5288                                             call            saver2;r2..r5
                    5289                                             ;;;;;;;;;
                    5290     
2177 020000   F     5291     maxvix:         jmp             minivix
                    5292     
                    5293     
217A 78CF           5294     bufl_dec:       mov                     r0,#chbuf       
217C 120000   F     5295                                             call            resar2  
217F 900000   F     5296                                             mov                     dptr,#ch_1       
2182 120000   F     5297                                             call            ldc_ltemp
2185 1201D1         5298                                             call            flsub
2188 78CF           5299                                             mov                     r0,#chbuf       
218A 120000   F     5300                                             call            saver2  
218D 22             5301                                             ret
                    5302     ;прерывание таймера Т2
218E                5303     inter2:         
218E E5DA           5304                                             mov             a,PCA0CPM0
2190 54BF           5305                                             anl             a,#0bfh                         
2192 F5DA           5306                                             mov             PCA0CPM0,a
                    5307                                             ;mov            a,T2CON         ;T2CON.2=0
                    5308                                             ;anl            a,#0fbh
2194 75C800         5309                                             mov             T2CON,#00;a
2197 C2AD           5310                                             clr             IE.5
2199 32             5311                                             reti
                    5312     
                    5313     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
219A                5314      ind:   ;;;
219A E5E7           5315                             mov             a,EIE2
219C F9             5316                             mov             r1,a;save
219D 75E700         5317                             mov             EIE2,#00H
                    5318     
21A0 120000   F     5319                     call    mign
21A3 7840           5320                      mov            r0,#bufind;+11
21A5 7F0C           5321                      mov            r7,#12
21A7 C287           5322      nexin: clr             p0.7;6
21A9 E6             5323                     mov             a,@r0
21AA F59B           5324                     mov             SPI0DAT,a
21AC 20FBFD         5325                     jb              TXBSY,$
21AF D287           5326                     setb    p0.7;6
21B1 120000   F     5327                     call    z_9             ;25mks
21B4 08             5328                     inc             r0;dec          r0
21B5 DFF0           5329                     djnz    r7,nexin
21B7 E9             5330                     mov             a,r1
21B8 F5E7           5331                     mov             EIE2,a;#30H
                    5332     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    85

21BA 22             5333                ret
                    5334     
                    5335     
                    5336     ;$include (d:\amp\subr7.asm) 
                +1  5337     
                +1  5338     ;тест интерфейса
21BB            +1  5339     testrs: ;jb     p0.3,goprogr
21BB C2AC       +1  5340                                     clr     IE.4
21BD 759955     +1  5341     test1:  mov     SBUF0,#55h
21C0 3099FD     +1  5342                                     jnb     SCON0.1,$
21C3 78B8       +1  5343                                     mov     r0,#work;chtest
21C5 76BE       +1  5344                                     mov     @r0,#190d;60
                +1  5345     
21C7 309825     +1  5346     test01: jnb     SCON0.0,test2
21CA E599       +1  5347                                     mov     a,SBUF0
21CC B45512     +1  5348                                     cjne    a,#55h,test3
21CF C299       +1  5349     test4:  clr     SCON0.1
21D1 C298       +1  5350                                     clr     SCON0.0
21D3 7D0A       +1  5351                                     mov     r5,#10
21D5 7840       +1  5352                                     mov     r0,#bufind              ;- - - -
21D7 762D       +1  5353     test04: mov     @r0,#2dh
21D9 08         +1  5354                                     inc     r0
21DA DDFB       +1  5355                                     djnz    r5,test04
21DC 120000   F +1  5356                                     call    ind
21DF 80DC       +1  5357                                     jmp     test1
21E1            +1  5358     test3:  
21E1 753933     +1  5359                                     mov     nuerr,#33h
21E4 120000   F +1  5360                                     call    error           ;на кран прибора ERR 3
                +1  5361                             
21E7 120000   F +1  5362                                     call    ind;
21EA 120000   F +1  5363                                     call    z_01s           ;100ms
21ED 80E0       +1  5364                                     jmp     test4
21EF 78B8       +1  5365     test2:  mov     r0,#work;chtest
21F1 B60002     +1  5366                                     cjne    @r0,#0,test02
21F4 8003       +1  5367                                     jmp     test5
21F6 16         +1  5368     test02: dec     @r0
21F7 80CE       +1  5369                                     jmp     test01
21F9 120000   F +1  5370     test5:  call    z_1ms           ;1ms
21FC C299       +1  5371                                     clr     SCON0.1
                +1  5372             
21FE 753933     +1  5373                                     mov     nuerr,#33h
2201 120000   F +1  5374                                     call    error           ;на кран прибора ERR 3
                +1  5375                                     
2204 120000   F +1  5376                                     call    ind
2207 120000   F +1  5377                                     call    z_01s           ;100ms
220A 80B1       +1  5378                                     jmp     test1   
                +1  5379     
                +1  5380     
                +1  5381     
                +1  5382     
                +1  5383     
220C 7A08       +1  5384     zapadc:   mov R2,#8
220E D297       +1  5385     sdv:      setb P1.7
2210 33         +1  5386               rlc A
2211 9296       +1  5387                     mov P1.6,C
2213 120000   F +1  5388                     call tim2
                +1  5389                                     
2216 C297       +1  5390                     clr P1.7
2218 120000   F +1  5391                     call tim2
221B DAF1       +1  5392                     djnz R2,sdv
221D D296       +1  5393                     setb P1.6
221F 22         +1  5394                     ret
                +1  5395     
2220 7A08       +1  5396     chtadc:   mov R2,#8
2222 D297       +1  5397     sdv1:     setb P1.7
2224 120000   F +1  5398               call tim2
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    86

2227 C297       +1  5399                     clr P1.7
2229 A296       +1  5400                     mov C,P1.6
222B 33         +1  5401                     rlc A
222C 120000   F +1  5402                     call tim2
222F DAF1       +1  5403                     djnz R2,sdv1
2231 22         +1  5404                     ret
                +1  5405     
2232 7E30       +1  5406     tim:      mov R6,#30h;38h
2234 DEFE       +1  5407     tim1:     djnz R6,tim1
2236 22         +1  5408               ret
                +1  5409               
2237 7E10       +1  5410     tim2:     mov R6,#10h;14h
2239 DEFE       +1  5411     tim3:     djnz R6,tim3
223B 22         +1  5412               ret
                +1  5413     
                +1  5414     ;запись из acc
223C C3         +1  5415     write_x1: clr   c
223D            +1  5416     writeD_x1:
223D 92B1       +1  5417                       mov P3.1,c        ;запись
223F F5A0       +1  5418               mov P2,A
2241 D2B3       +1  5419                       setb P3.3
2243 120000   F +1  5420                       call z_5
2246 C2B3       +1  5421                       clr P3.3
2248 75A0FF     +1  5422                       mov P2,#0FFh
224B 22         +1  5423                       ret
                +1  5424     
                +1  5425     ;чтение в acc
224C C3         +1  5426     read_x2:  clr   c  
224D 92B1       +1  5427               mov P3.1,c        ;чтение
224F D2B2       +1  5428               setb P3.2
2251 D2B3       +1  5429                       setb P3.3
2253 120000   F +1  5430                     call z_5
2256 E5A0       +1  5431                       mov A,P2
2258 C2B3       +1  5432                       clr P3.3
225A C2B2       +1  5433                       clr P3.2
225C 22         +1  5434                       ret
                +1  5435     
                +1  5436     
225D 120000   F +1  5437     loop:     call read_x2;x2    ;ожидание флага готовности
2260 20E7FA     +1  5438                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
2263 22         +1  5439                        ret           ;возврат, если бит А(7)<>1
                +1  5440                                      
                +1  5441                                        
                +1  5442     
                +1  5443     
                +1  5444     
                +1  5445     
                +1  5446     
                +1  5447     
                +1  5448     
                +1  5449     ;принимаемый байт в acc
                +1  5450     ;прием байта последовательным кодом старшими разрядами вперед
2264 7A08       +1  5451     read:    mov R2,#8
2266 C297       +1  5452     re1:     clr P1.7;P1.2
2268 120000   F +1  5453              call tim2        ;5mks
226B A294       +1  5454                     mov C,P1.4;P1.0
226D 33         +1  5455                     rlc A           
226E D297       +1  5456                     setb P1.7;P1.2
2270 120000   F +1  5457                     call tim2
2273 DAF1       +1  5458                     djnz R2,re1
2275 22         +1  5459                     ret
                +1  5460     
                +1  5461      ;in r0-count   
                +1  5462     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5463     ;r2..r5 -значение счетчика
2276            +1  5464     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    87

2276 E6         +1  5465                     mov                     a,@r0
2277 FC         +1  5466                     mov                     r4,a
2278 08         +1  5467                     inc                     r0
2279 E6         +1  5468                     mov                     a,@r0
227A FD         +1  5469                     mov                     r5,a
227B 7B00       +1  5470                     mov                     r3,#0
227D 7A00       +1  5471                     mov                     r2,#0
227F 750800     +1  5472                     mov                     r8,#0;clr                       r8
2282 750900     +1  5473                     mov                     r9,#0;clr                       r9
2285 120000   F +1  5474                     call            lcmp
2288 22         +1  5475                     ret
                +1  5476     
                +1  5477     
                +1  5478     ;in-r1-count
2289            +1  5479     chdec:          ;mov            r1,#chavt               ;chavt-1
2289 E7         +1  5480                             mov             a,@r1
228A FC         +1  5481                             mov             r4,a
228B 09         +1  5482                             inc             r1
228C E7         +1  5483                             mov             a,@r1
228D FD         +1  5484                             mov             r5,a
228E C202       +1  5485                             clr             rr2
2290 C203       +1  5486                             clr             rr3
2292 900000   F +1  5487                             mov             dptr,#ch1        
2295 120000   F +1  5488                             call    ldc_ltemp
2298 120000   F +1  5489                             call    lsub
229B ED         +1  5490                             mov             a,r5
229C F7         +1  5491                             mov             @r1,a
229D 19         +1  5492                             dec             r1
229E EC         +1  5493                             mov             a,r4
229F F7         +1  5494                             mov             @r1,a
                +1  5495                             
22A0 22         +1  5496                             ret      
                +1  5497     
                +1  5498     
                +1  5499     
                +1  5500     
22A1            +1  5501     loadUS: ;если идет тест измерения ус восстановить для теста
22A1 201533     +1  5502                                     jb              biteizm,yestest
22A4 79AE       +1  5503                                             mov             r1,#diap
22A6 E7         +1  5504                             mov             a,@r1
22A7 23         +1  5505                             rl              a;*2
22A8 FC         +1  5506                             mov             r4,a                    ;save a
22A9 900000   F +1  5507                             mov             dptr,#tabus
22AC 93         +1  5508                             movc    a,@a+dptr
22AD FA         +1  5509                             mov             r2,a                    ;high byte
22AE E584       +1  5510                             mov             a,p4
22B0 5401       +1  5511                             anl             a,#01
22B2 4A         +1  5512                             orl             a,r2
22B3 F584       +1  5513                             mov             p4,a
22B5 0C         +1  5514                             inc             r4
22B6 EC         +1  5515                             mov             a,r4
22B7 93         +1  5516                             movc    a,@a+dptr
22B8 FB         +1  5517                             mov             r3,a                    ;low byte
22B9 E585       +1  5518                             mov             a,p5
22BB 5401       +1  5519                             anl             a,#01
22BD 4B         +1  5520                             orl             a,r3
22BE F585       +1  5521                             mov             p5,a
22C0 799A       +1  5522                             mov             r1,#parT
22C2 B7010E     +1  5523                             cjne    @r1,#1,bret
22C5 79AE       +1  5524                             mov             r1,#diap                  ;10s (parT=1)
22C7 7405       +1  5525                             mov             a,#5                      ;10-8..10-11 p4.1=1
22C9 C3         +1  5526                             clr             c
22CA 97         +1  5527                             subb    a,@r1
22CB 5006       +1  5528                             jnc             bret
22CD E584       +1  5529                             mov             a,p4
22CF 4402       +1  5530                             orl             a,#02
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    88

22D1 F584       +1  5531                             mov             p4,a                     ;10-8..10-11 p4.1=1
22D3 120000   F +1  5532     bret:      call          louizm         ;us если вкл кн ИЗМЕР
22D6 22         +1  5533                             ret
22D7            +1  5534     yestest:
22D7 120000   F +1  5535                             call            lotpus          ;ус теста измерения
22DA 22         +1  5536                             ret
                +1  5537                             
                +1  5538     ;загр ус для кор 0
                +1  5539     ;dptr-
22DB E4         +1  5540     lospus:         clr             a
                +1  5541                             ;movc   a,@a+dptr
                +1  5542                             ;mov            r2,a                    ;high byte
                +1  5543                             ;mov            a,p4
                +1  5544                             ;anl            a,#01
                +1  5545                             ;orl            a,r2
                +1  5546                             ;mov            p4,a
                +1  5547                             ;inc            dptr
22DC E4         +1  5548                             clr             a
22DD 93         +1  5549                             movc    a,@a+dptr
22DE FB         +1  5550                             mov             r3,a                    ;low byte
22DF E585       +1  5551                             mov             a,p5
22E1 54BF       +1  5552                             anl             a,#0bfh;01
22E3 4B         +1  5553                             orl             a,r3
22E4 F585       +1  5554                             mov             p5,a
22E6 22         +1  5555                             ret
                +1  5556     
22E7 80         +1  5557     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5558     
                +1  5559     ;us кнопка измерения выкл
22E8 88D6       +1  5560     tabus:     db           88h,0d6h         ;10-2
22EA 88F6       +1  5561                             db      88h,0f6h         ;10-3
22EC 88D6       +1  5562                             db              88h,0d6h         ;10-4
22EE 88F6       +1  5563                             db              88h,0f6h         ;10-5
22F0 9AD6       +1  5564                             db      9ah,0d6h         ;10-6
22F2 9AF6       +1  5565                             db              9ah,0f6h         ;10-7
22F4 ACD6       +1  5566                             db              0ach,0d6h        ;10-8
22F6 ACF6       +1  5567                             db      0ach,0f6h        ;10-9
22F8 C8D6       +1  5568                             db              0c8h,0d6h        ;10-10
22FA C8F6       +1  5569                             db              0c8h,0f6h        ;10-11
                +1  5570     
22FC            +1  5571     tabt11: 
22FC 66E6       +1  5572                             db              66h,0e6h;10-11
22FE            +1  5573     tabt9:  
22FE 32E6       +1  5574                             db              32h,0e6h;10-9
2300            +1  5575     tabt7:  
2300 18EE       +1  5576                             db              18h,0eeh;10-7
                +1  5577     
                +1  5578      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5579     ;в зав от parT (Tизм)
2302 79B7       +1  5580     loadT:          mov             r1,#load;parT
2304 7840       +1  5581     lolevT:         mov             r0,#bufind+0
2306 7B0A       +1  5582                             mov             r3,#10
2308 75F00A     +1  5583                             mov             b,#10
230B E7         +1  5584                             mov             a,@r1
230C A4         +1  5585                             mul             ab
230D FC         +1  5586                             mov             r4,a                    ;save a
230E 900000   F +1  5587                             mov             dptr,#textT
2311 93         +1  5588             lod1:   movc    a,@a+dptr
2312 F6         +1  5589                             mov             @r0,a
2313 08         +1  5590                             inc             r0
2314 0C         +1  5591                             inc             r4
2315 EC         +1  5592                             mov             a,r4
2316 DBF9       +1  5593                             djnz    r3,lod1
2318 534B03     +1  5594                             anl                     bufind+11,#03h          ;гашение точек
231B 22         +1  5595                             ret     
                +1  5596     ;загрузка текста в буфер 2 bufind+0..bufind9                    
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    89

                +1  5597     ;dptr-адр строки текста         
231C            +1  5598     lotext:         
231C 7B0A       +1  5599                             mov             r3,#10
231E 7840       +1  5600                             mov             r0,#bufind+0
2320 E4         +1  5601     lodt:           clr             a
2321 93         +1  5602                             movc    a,@a+dptr
2322 F6         +1  5603                             mov             @r0,a
2323 08         +1  5604                             inc             r0
2324 A3         +1  5605                             inc             dptr
2325 DBF9       +1  5606                             djnz    r3,lodt
2327 534B03     +1  5607                             anl                     bufind+11,#03h          ;гашение точек
232A 22         +1  5608                             ret                                     
                +1  5609     
                +1  5610     
                +1  5611     
                +1  5612     
                +1  5613      ;задержка 100 мкс
232B 7978       +1  5614     z_100:    mov R1,#78h     ;загрузка первого числа
232D 7A02       +1  5615     z100:     mov R2,#2h     ;загрузка второго числа
232F DAFE       +1  5616     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2331 D9FA       +1  5617               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2333 22         +1  5618               ret           
                +1  5619     
                +1  5620     ;задержка 34 мкс
2334 7B8B       +1  5621     z_5:      mov R3,#8Bh      ;загрузка числа
2336 DBFE       +1  5622     ct:       djnz R3,ct
2338 22         +1  5623               ret
                +1  5624     
                +1  5625     ;задержка 15 мс
2339 79FA       +1  5626     z_15:     mov R1,#0FAh    ;загрузка первого числа
233B 7AED       +1  5627     z15:      mov R2,#0EDh   ;загрузка второго числа
233D DAFE       +1  5628     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
233F D9FA       +1  5629               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
2341 22         +1  5630               ret   
                +1  5631                                               
                +1  5632      ;задержка 1 мс
2342 7910       +1  5633     z_1ms:     mov R1,#10h     
2344 7AED       +1  5634     ss1:       mov R2,#0EDh    
2346 DAFE       +1  5635                djnz R2, $    
2348 D9FA       +1  5636                djnz R1, ss1   
234A 22         +1  5637                ret   
                +1  5638     
                +1  5639      ;????????
                +1  5640     ;задержка 1с
234B 7D1F       +1  5641     z_1s:   mov             r5,#01fh 
234D 7EFF       +1  5642     co2s:   mov     R6,#0ffh     
234F 7FFF       +1  5643     z1s:     mov    R7,#0ffh     
2351 DFFE       +1  5644     co1s:   djnz    R7, co1s        
2353 DEFA       +1  5645             djnz    R6, z1s 
2355 DDF6       +1  5646                     djnz    r5,co2s
2357 22         +1  5647               ret
                +1  5648     ;задержка 0,1с
2358 7D03       +1  5649     z_01s:           mov            r5,#03h 
235A 7EFF       +1  5650     co02s:          mov     R6,#0ffh     
235C 7FFF       +1  5651     z01s:           mov     R7,#0ffh     
235E DFFE       +1  5652                             djnz    R7, $   
2360 DEFA       +1  5653                     djnz    R6, z01s 
2362 DDF6       +1  5654                             djnz    r5,co02s
2364 22         +1  5655                      ret
                +1  5656                                               
                +1  5657     ;задержка 0,5с
2365 7D0D       +1  5658     z_05s:           mov            r5,#0dh 
2367 7EFF       +1  5659     co05s:                  mov     R6,#0ffh     
2369 7FFF       +1  5660     z05s:           mov     R7,#0ffh     
236B DFFE       +1  5661                                     djnz    R7, $   
236D DEFA       +1  5662                     djnz    R6, z05s 
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    90

236F DDF6       +1  5663                                             djnz    r5,co05s
2371 22         +1  5664                      ret                                                     
                +1  5665                                                               
2372 000007FF   +1  5666     chzap:  db      00,00,07h,0ffh             
2376 00000000   +1  5667     ch0:    db      00,00,00,00
237A 0000000A   +1  5668     ch10:   db      00,00,00,0ah                            ;10
237E 00000005   +1  5669     ch5:    db      00,00,00,05                                             ;5
2382 00000004   +1  5670     ch4:    db      00,00,00,04                                             ;4
2386 000003B9   +1  5671     ch954:  db 00,00,03,0b9h                                                ;954
238A 000003E8   +1  5672     ch10000:        db 00,00,03h,0e8h                                               ;10000
238E 00000064   +1  5673     ch100:  db 00,00,00,64h ;100
2392 00000002   +1  5674     ch2:    db      00,00,00,02                                             
                +1  5675     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5676     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5677     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
2396 00000001   +1  5678     ch1:    db  00,00,00,01
239A 49742400   +1  5679     ch_mln: db      49h,74h,24h,00;10*6
239E 3F800000   +1  5680     ch_1:   db      3fh,80h,00,00   
23A2 40000000   +1  5681     ch_2:   db      40h,00,00,00;2
23A6 40800000   +1  5682     ch_4:   db      40h,80h,00,00;4 
23AA 40A00000   +1  5683     ch_5:   db      40h,0a0h,00,00;5
23AE 40E00000   +1  5684     ch_7:   db      40h,0e0h,00,00;7
                +1  5685             
23B2 3F741EDF   +1  5686     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
23B6 47C35000   +1  5687     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
23BA 3F800347   +1  5688     KD:             db      3fh,80h,03h,47h;1,0001
23BE 48435000   +1  5689     CH2tho: db      48h,43h,50h,00;200000
23C2 4856D800   +1  5690     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
23C6 4856D800   +1  5691     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
23CA 461C4000   +1  5692     ch_10th:db  46h,1ch,40h,00;10000-2710h
23CE 41200000   +1  5693     ch_10:  db      41h,20h,00,00;10d
23D2 48742400   +1  5694     ch_250: db      48h,74h,24h,00;250000
23D6 000186A0   +1  5695     chk:            db      00,01,86h,0a0h;
23DA 00000320   +1  5696     ch320h: db      00,00,03h,20h;320h=800d
23DE 00000150   +1  5697     ch150h: db      00,00,01h,50h;150h
23E2 C0400000   +1  5698     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5699     
                +1  5700     
                +1  5701     ;r1- мл байт 2х байтного числа
23E6            +1  5702     tenmin:         ;-10
23E6 C3         +1  5703                             clr             c
23E7 E7         +1  5704                     mov             a,@r1
23E8 9405       +1  5705                             subb    a,#5;10
23EA F7         +1  5706                             mov             @r1,a
23EB 19         +1  5707                             dec             r1
23EC E7         +1  5708                             mov             a,@r1
23ED 9400       +1  5709                             subb    a,#0
23EF F7         +1  5710                             mov             @r1,a
23F0 22         +1  5711                             ret
                +1  5712       ;r0-обнуление ячеек памяти  
23F1 7F04       +1  5713       clear4:        mov    r7,#4
23F3 E4         +1  5714                             clr             a
23F4 F6         +1  5715       cl4:          mov             @r0,a
23F5 08         +1  5716                             inc             r0
23F6 DFFC       +1  5717                             djnz    r7,cl4
23F8 22         +1  5718                             ret     
                +1  5719     
                +1  5720      ;r0-обнуление ячеек памяти 
                +1  5721      ;R7- 
23F9            +1  5722       clearN:        
23F9 E4         +1  5723                             clr             a
23FA F6         +1  5724       cl4N:         mov             @r0,a
23FB 08         +1  5725                             inc             r0
23FC DFFC       +1  5726                             djnz    r7,cl4N
23FE 22         +1  5727                             ret     
                +1  5728     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    91

                +1  5729       ;чтение номера байта с индикатора(2байта)
                +1  5730     ;bufind+8..bufind+9
                +1  5731     ;-  - - -
                +1  5732     ;- - - - - - - - - -
                +1  5733     ;adec..adec+9
                +1  5734     ;ст            мл
23FF 7848       +1  5735     upak2:  mov             r0,#bufind+8;
2401 795C       +1  5736                     mov             r1,#adec+9
2403 7F02       +1  5737                     mov             r7,#2;2bait
2405 C3         +1  5738     upa2:   clr             c
2406 E6         +1  5739                     mov             a,@r0
2407 9430       +1  5740                     subb    a,#30h
2409 F7         +1  5741                     mov             @r1,a
240A 18         +1  5742                     dec             r0
240B 19         +1  5743                     dec             r1
240C DFF7       +1  5744                     djnz    r7,upa2
240E 22         +1  5745                     ret  
                +1  5746     
                +1  5747     
                +1  5748         
                +1  5749      ;bufind+4..bufind+9
                +1  5750     ;-  - - -
                +1  5751     ;- - - - - - - - - -
                +1  5752     ;adec..adec+9
                +1  5753     ;ст            мл
240F 7849       +1  5754     upak:   mov             r0,#bufind+9;
2411 795C       +1  5755                     mov             r1,#adec+9
2413 7F06       +1  5756                     mov             r7,#6
2415 C3         +1  5757     upa:    clr             c
2416 E6         +1  5758                     mov             a,@r0
2417 9430       +1  5759                     subb    a,#30h
2419 F7         +1  5760                     mov             @r1,a
241A 18         +1  5761                     dec             r0
241B 19         +1  5762                     dec             r1
241C DFF7       +1  5763                     djnz    r7,upa
241E 22         +1  5764                     ret
                +1  5765     
                +1  5766      ;чтение номера байта с индикатора(3байта)
                +1  5767     ;bufind+3..bufind+9
                +1  5768     ;-  - - -
                +1  5769     ;- - - - - - - - - -
                +1  5770     ;adec..adec+9
                +1  5771     ;ст            мл
241F 7849       +1  5772     upak3:  mov             r0,#bufind+9;
2421 795C       +1  5773                     mov             r1,#adec+9
2423 7F03       +1  5774                     mov             r7,#3;3bait
2425 C3         +1  5775     upa1:   clr             c
2426 E6         +1  5776                     mov             a,@r0
2427 9430       +1  5777                     subb    a,#30h
2429 F7         +1  5778                     mov             @r1,a
242A 18         +1  5779                     dec             r0
242B 19         +1  5780                     dec             r1
242C DFF7       +1  5781                     djnz    r7,upa1
242E 22         +1  5782                     ret
                +1  5783     
                +1  5784     ;вых-r2,r3-адрес ячее памяти прогр
242F            +1  5785     findkoef:
242F 79AE       +1  5786                                     mov             r1,#diap
2431 E7         +1  5787                                     mov             a,@r1
2432 23         +1  5788                                     rl              a                                          
                                          ;diap*2(2bait )
2433 FC         +1  5789                                     mov             r4,a                                    ;sa
                             ve
2434 900000   F +1  5790                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5791                                     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    92

2437 93         +1  5792                                     movc    a,@a+dptr                       ;ст байт
2438 FA         +1  5793                                     mov             r2,a
2439 A3         +1  5794                                     inc             dptr
243A EC         +1  5795                                     mov             a,r4
243B 93         +1  5796                                     movc    a,@a+dptr
243C FB         +1  5797                                     mov             r3,a                    ;мл байт
243D 22         +1  5798                                     ret
                +1  5799     ;r2..r5 в опр яч внешн озу
243E            +1  5800     findext:
243E 79AE       +1  5801                                     mov             r1,#diap
2440 E7         +1  5802                                     mov             a,@r1
2441 23         +1  5803                                     rl              a                                          
                                          ;diap*2(2bait )
2442 23         +1  5804                                     rl              a                                          
                                          ;diap*2(2bait )
2443 F9         +1  5805                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5806                                     
2444 22         +1  5807                                     ret
                +1  5808     
                +1  5809     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5810     ;(5000h..5027h)
2445 5000       +1  5811     diKDw:  dw              5000h                   ;10-2
2447 5004       +1  5812                                     dw              5004h                   ;10-3
2449 5008       +1  5813                                     dw              5008h                   ;10-4
244B 500C       +1  5814                                     dw              500ch                   ;10-5
244D 5010       +1  5815                                     dw              5010h                   ;10-6
244F 5014       +1  5816                                     dw              5014h                   ;10-7
2451 5018       +1  5817                                     dw              5018h                   ;10-8
2453 501C       +1  5818                                     dw              501ch                   ;10-9
2455 5020       +1  5819                                     dw              5020h                   ;10-10
2457 5024       +1  5820                                     dw              5024h                   ;10-11
2459 5028       +1  5821     dipar:  dw              5028h                   ;parol
245B 502C       +1  5822     diKm:           dw              502ch                   ;Km для теста измерения
245D 000186A0   +1  5823     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5824     
2461 AA08       +1  5825     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
2463 AB09       +1  5826                                             mov     r3,ltemp+1
2465 AC0A       +1  5827                                             mov     r4,ltemp+2
2467 AD0B       +1  5828                                             mov     r5,ltemp+3
2469 22         +1  5829                                             ret
                +1  5830     ;bufind+4..bufind+9
                +1  5831     ;-  - - -
                +1  5832     ;- - - - - - - - - -
                +1  5833     ;adec..adec+9
                +1  5834     ;ст            мл
246A 7847       +1  5835     upakA:  mov             r0,#bufind+7;
246C 795C       +1  5836                     mov             r1,#adec+9
246E 7F04       +1  5837                     mov             r7,#4
2470 C3         +1  5838     upaa4:  clr             c
2471 E6         +1  5839                     mov             a,@r0
2472 9430       +1  5840                     subb    a,#30h
2474 F7         +1  5841                     mov             @r1,a
2475 18         +1  5842                     dec             r0
2476 19         +1  5843                     dec             r1
2477 DFF7       +1  5844                     djnz    r7,upaa4
2479 22         +1  5845                     ret
                +1  5846     
                +1  5847     ;bufind+4..bufind+9
                +1  5848     ;-  - - -
                +1  5849     ;- - - - - - - - - -
                +1  5850     ;adec..adec+9
                +1  5851     ;ст            мл
247A 7848       +1  5852     upakB:  mov             r0,#bufind+8;
247C 795C       +1  5853                     mov             r1,#adec+9
247E 7F05       +1  5854                     mov             r7,#5
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    93

2480 C3         +1  5855     upab:   clr             c
2481 E6         +1  5856                     mov             a,@r0
2482 9430       +1  5857                     subb    a,#30h
2484 F7         +1  5858                     mov             @r1,a
2485 18         +1  5859                     dec             r0
2486 19         +1  5860                     dec             r1
2487 DFF7       +1  5861                     djnz    r7,upab
2489 C21B       +1  5862                     clr                     bitznB
248B E543       +1  5863                     mov             a,bufind+3
248D B42D02     +1  5864                     cjne            a,#2dh,abret
2490 D21B       +1  5865                     setb            bitznB
2492            +1  5866     abret:
2492 22         +1  5867                     ret
2493            +1  5868     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
2493 4E6E6AA8   +1  5869                                             db      4eh,6eh,6ah,0a8h;10**9
2497 43FA0000   +1  5870     CH_500:         db              43h,0fah,00,00;1fah=500
249B 4856D800   +1  5871     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
249F 49742400   +1  5872     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5873     
                +1  5874     
                +1  5875     
                +1  5876     ;управление AD7731
                +1  5877     ;r4=b1 r5=b2
24A3            +1  5878     iniacp: ;управление AD7731
24A3 7403       +1  5879                             mov             a,#03
                +1  5880     
24A5 120000   F +1  5881                             call    write
24A8 EC         +1  5882                             mov             a,r4;#80h
24A9 120000   F +1  5883                             call    write
24AC ED         +1  5884                             mov             a,r5;#04
24AD 120000   F +1  5885                             call    write
24B0 7402       +1  5886                             mov             a,#02
24B2 120000   F +1  5887                             call    write
24B5 74A1       +1  5888                             mov             a,#0a1h
24B7 120000   F +1  5889                             call    write
24BA 7474       +1  5890                             mov             a,#74h
24BC 120000   F +1  5891                             call    write
24BF 2095FD     +1  5892                             jb              p1.5,$;p1.3,$
24C2 7402       +1  5893                             mov             a,#02
24C4 120000   F +1  5894                             call    write
24C7 7481       +1  5895                             mov             a,#81h
24C9 120000   F +1  5896                             call    write
24CC 7474       +1  5897                             mov             a,#74h
24CE 120000   F +1  5898                             call    write
24D1 2095FD     +1  5899                             jb              p1.5,$;p1.3,$
24D4 7402       +1  5900                             mov             a,#02
24D6 120000   F +1  5901                             call    write
24D9 7421       +1  5902                             mov             a,#21h
24DB 120000   F +1  5903                             call    write
24DE 7474       +1  5904                             mov             a,#74h
24E0 120000   F +1  5905                             call    write
24E3 22         +1  5906                             ret
                +1  5907                             ;;;;;;;;;;;;;;;;
                +1  5908     ;;;;;;;;;;;;;;;;;
                +1  5909     ;;;;;;;;;;;;;;;;;
24E4 0000       +1  5910     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
24E6 6000       +1  5911                                     db              60h,00h;40h,04h         ;10s
24E8 6000       +1  5912                                     db              60h,00;40h,04h          ;1s
24EA 6001       +1  5913                                     db              60h,01h;40h,04h         ;0,1s
24EC 6001       +1  5914                                     db              60h,01;00h;20h,04h              ;50ms
24EE 6001       +1  5915                                     db              60h,01;00h;20h,04h               ;10ms
24F0 1333       +1  5916                                     db              13h,33h;32h             ;2ms
                +1  5917     
                +1  5918     ;загр В1,В2 в завис от Т                                
24F2 799A       +1  5919     loab12:                 mov             r1,#parT
24F4 900000   F +1  5920                                     mov             dptr,#tabB1_2
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    94

24F7 E7         +1  5921                                     mov             a,@r1
24F8 23         +1  5922                                     rl              a;*2
24F9 FF         +1  5923                                     mov             r7,a                    ;save a
24FA 93         +1  5924                                     movc    a,@a+dptr
24FB FC         +1  5925                                     mov             r4,a   ;b1
24FC 0F         +1  5926                                     inc             r7
24FD EF         +1  5927                                     mov             a,r7
24FE 93         +1  5928                                     movc    a,@a+dptr
24FF FD         +1  5929                                     mov             r5,a
                +1  5930                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5931                             
2500 22         +1  5932                                     ret
                +1  5933     
                +1  5934     
2501 7852       +1  5935     loadr2: mov             r0,#abin+3              ;r2..r5
2503 E6         +1  5936                     mov             a,@r0                   ; ст мл   
2504 FA         +1  5937                     mov             r2,a
2505 18         +1  5938                     dec             r0
2506 E6         +1  5939                     mov             a,@r0
2507 FB         +1  5940                     mov             r3,a
2508 18         +1  5941                     dec             r0
2509 E6         +1  5942                     mov             a,@r0
250A FC         +1  5943                     mov             r4,a
250B 18         +1  5944                     dec             r0
250C E6         +1  5945                     mov             a,@r0
250D FD         +1  5946                     mov             r5,a
250E 22         +1  5947                     ret
                +1  5948                                             
                +1  5949      ;;;;;;;;;;;;;;;;;;;      
                +1  5950      ;загрузка KD в зависимости от диап изм  
                +1  5951      ;koef->r8..r11
250F 78AE       +1  5952     loadKD:                 mov             r0,#diap
2511 E6         +1  5953                                     mov             a,@r0
2512 900000   F +1  5954                                     mov             dptr,#diKDn
2515 75F004     +1  5955                                     mov             b,#4
2518 A4         +1  5956                                     mul             ab
2519 FF         +1  5957                                     mov             r7,a;save
251A 93         +1  5958                                     movc    a,@a+dptr
251B F508       +1  5959                                     mov             r8,a
251D A3         +1  5960                                     inc             dptr
251E EF         +1  5961                                     mov             a,r7
251F 93         +1  5962                                     movc    a,@a+dptr
2520 F509       +1  5963                                     mov             r9,a
2522 A3         +1  5964                                     inc             dptr
2523 EF         +1  5965                                     mov             a,r7
2524 93         +1  5966                                     movc    a,@a+dptr
2525 F50A       +1  5967                                     mov             r10,a
2527 A3         +1  5968                                     inc             dptr
2528 EF         +1  5969                                     mov             a,r7
2529 93         +1  5970                                     movc    a,@a+dptr
252A F50B       +1  5971                                     mov             r11,a
252C 22         +1  5972                                     ret
                +1  5973     
252D 3F506B7B   +1  5974      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2531 3F507FCC   +1  5975                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2535 3F4F9D0B   +1  5976                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
2539 3F4FE869   +1  5977                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
253D 3F50294A   +1  5978                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
2541 3F50639E   +1  5979                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
2545 3F4BC9F0   +1  5980                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    95

2549 3F4C063B   +1  5981                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
254D 3F50EFDD   +1  5982                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
2551 3F512AD9   +1  5983                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5984     
2555 00000039   +1  5985     ch57:   db      00,00,00,39h;57
2559 00000014   +1  5986     ch20:   db      00,00,00,14h;20
                +1  5987     
                +1  5988     ;загр ус для тестов ацп 
                +1  5989     ;dptr-
255D 78B1       +1  5990     lotpus: mov             r0,#vichR
255F B6210D     +1  5991                                     cjne    @r0,#21h,te22
2562 900000   F +1  5992                                     mov                     dptr,#tabt11;заслать ус 11А
2565 E4         +1  5993     lotp:           clr             a
2566 93         +1  5994                             movc    a,@a+dptr                               ;high byte
2567 F584       +1  5995                             mov             p4,a
2569 A3         +1  5996                             inc             dptr
256A E4         +1  5997                             clr             a
256B 93         +1  5998                             movc    a,@a+dptr                               ;low byte
256C F585       +1  5999                             mov             p5,a
256E 22         +1  6000                             ret
256F B62205     +1  6001     te22:                   cjne    @r0,#22h,te23
2572 900000   F +1  6002                             mov                     dptr,#tabt9;заслать ус 9А       
2575 80EE       +1  6003                             jmp                     lotp
                +1  6004     
2577 900000   F +1  6005     te23:   mov                     dptr,#tabt7;заслать ус 7А       
257A 80E9       +1  6006                             jmp                     lotp
                +1  6007     
                +1  6008     
                +1  6009     
                +1  6010     
                +1  6011     
257C 02030405   +1  6012     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
2580 06070809                
2584 0A0B                    
                +1  6013     
2586 78AE       +1  6014     findR:                  mov                     r0,#diap
2588 E6         +1  6015                                                     mov                     a,@r0
2589 900000   F +1  6016                                                     mov                     dptr,#Tabn
258C 93         +1  6017                                                     movc            a,@a+dptr
258D 22         +1  6018                                                     ret
                +1  6019     ;bufind=30h..39h                                                                           
                                           ;
258E C219       +1  6020     vvchif:                 clr             bitmig
2590 79B2       +1  6021                                     mov             r1,#marker
2592 E7         +1  6022                                     mov             a,@r1                   ;изм цифры
2593 7840       +1  6023                                     mov             r0,#bufind                      ;0000
2595 28         +1  6024                                     add             a,r0
2596 F8         +1  6025                                     mov             r0,a
2597 06         +1  6026                                     inc             @r0
2598 B63A03     +1  6027                                     cjne    @r0,#3ah,chif
259B 7630       +1  6028                                     mov             @r0,#30h
259D 22         +1  6029                                     ret
259E C3         +1  6030     chif:           clr                     c
259F 7430       +1  6031                                     mov                     a,#30h
25A1 96         +1  6032                                     subb            a,@r0
25A2 4002       +1  6033                                     jc                      chif5
25A4 7630       +1  6034                                     mov             @r0,#30h
25A6 22         +1  6035     chif5:  ret
                +1  6036     
25A7 80E5       +1  6037     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6038     
25A9 B641FB     +1  6039     vvnol31:        cjne            @r0,#41h,vvnol41
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    96

25AC 800A       +1  6040                                             jmp                     chifour
25AE B631F8     +1  6041     vvnol23:        cjne            @r0,#31h,vvnol31
25B1 8005       +1  6042                                             jmp                     chifour 
                +1  6043     
25B3 78B0       +1  6044     vvchibl:        mov                     r0,#level
25B5 B623F6     +1  6045                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
25B8 C219       +1  6046     chifour:                clr             bitmig
25BA 79B2       +1  6047                                     mov             r1,#marker
25BC E7         +1  6048                                     mov             a,@r1                   ;изм цифры
25BD 7840       +1  6049                                     mov             r0,#bufind                      ;1..4
25BF 28         +1  6050                                     add             a,r0
25C0 F8         +1  6051                                     mov             r0,a
25C1 06         +1  6052                                     inc             @r0
25C2 B63504     +1  6053                                     cjne    @r0,#35h,chifb
25C5 7631       +1  6054                                     mov             @r0,#31h
25C7 8006       +1  6055                                     jmp             chifb1
25C9 B63003     +1  6056     chifb:  cjne    @r0,#30h,chifb1
25CC 7631       +1  6057                                     mov             @r0,#31h
25CE 22         +1  6058                                     ret
25CF            +1  6059     chifb1:;;;;;;;;;;
25CF C3         +1  6060                                     clr                     c
25D0 7430       +1  6061                                     mov                     a,#30h
25D2 96         +1  6062                                     subb            a,@r0
25D3 4002       +1  6063                                     jc                      chifl5
25D5 7630       +1  6064                                     mov             @r0,#30h
                +1  6065                                     
25D7 22         +1  6066     chifl5: ret
                +1  6067     ;;;;;;;;;;;;;
25D8 22         +1  6068             ret
                +1  6069       ;перевод маркера влево
25D9            +1  6070     marle:  
25D9 C219       +1  6071                     clr             bitmig
                +1  6072                     ;mov            savba,#0   нельзя обнулять
25DB 78B2       +1  6073             mov             r0,#marker
25DD 16         +1  6074                     dec             @r0
25DE E6         +1  6075                     mov             a,@r0
25DF C3         +1  6076                     clr             c
25E0 953A       +1  6077                     subb    a,movleft         ;крайне левое положение
25E2 5001       +1  6078                     jnc             rler
25E4 06         +1  6079                     inc             @r0
25E5 22         +1  6080     rler:   ret
                +1  6081         
                +1  6082     ;перевод маркера вправо
25E6 C219       +1  6083     marri:  clr             bitmig
25E8 78B2       +1  6084                     mov             r0,#marker
25EA 06         +1  6085                     inc         @r0
25EB E53B       +1  6086                     mov             a,movrig           ;крайне правое положение
25ED C3         +1  6087                     clr             c
25EE 96         +1  6088                     subb    a,@r0
25EF 5001       +1  6089                     jnc             rrir
25F1 16         +1  6090                     dec             @r0
25F2 22         +1  6091     rrir:   ret
                +1  6092         
                +1  6093     ;konstA->bufind+4..bufind+7
25F3 78BC       +1  6094     outA:           mov                     r0,#konstA
25F5 120000   F +1  6095                                     call            resar2
25F8 120343     +1  6096                                     call            ftol                    ;->hex
25FB 784F       +1  6097                                     mov             r0,#abin
25FD 120000   F +1  6098                                     call            saver2
2600 7853       +1  6099                                     mov                     r0,#adec
2602 7952       +1  6100                                     mov             r1,#abin+3
2604 120000   F +1  6101                                     call            bindec
2607 785C       +1  6102                                     mov                     r0,#adec+9
2609 7947       +1  6103                                     mov                     r1,#bufind+7
260B 7F04       +1  6104                                     mov                     r7,#4
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    97

260D E6         +1  6105     outa2:  mov             a,@r0
260E 2430       +1  6106                               add           a,#30h
2610 F7         +1  6107                                     mov             @r1,a
2611 19         +1  6108                                     dec             r1
2612 18         +1  6109                                     dec             r0
2613 DFF8       +1  6110                                     djnz    r7,outa2
2615 22         +1  6111                                     ret
                +1  6112                                             
                +1  6113     ;konstB->bufind+4..bufind+8
                +1  6114     ;outB:          mov                     r0,#konstB
                +1  6115     ;                               call            resar2
                +1  6116     ;                               mov                     a,r2
                +1  6117     ;                               anl                     a,#80h
                +1  6118     ;                               jz                      outb3
                +1  6119     ;mov                    a,r2
                +1  6120     ;                               anl                     a,#7fh
                +1  6121     ;                               mov                     r2,a
                +1  6122     ;                               mov                     bufind+3,#2dh
                +1  6123     ;outb3: call            ftol                    ;->hex
                +1  6124     ;                               mov             r0,#abin
                +1  6125     ;                               call            saver2
                +1  6126     ;                               mov                     r0,#adec
                +1  6127     ;                               mov             r1,#abin+3
                +1  6128     ;                               call            bindec
                +1  6129     ;                               mov                     r0,#adec+9
                +1  6130     ;                               mov                     r1,#bufind+8
                +1  6131     ;                               mov                     r7,#5
                +1  6132     ;outb2: mov             a,@r0
                +1  6133     ;                         add           a,#30h
                +1  6134     ;                               mov             @r1,a
                +1  6135     ;                               dec             r1
                +1  6136     ;                               dec             r0
                +1  6137     ;                               djnz    r7,outb2
                +1  6138     ;                               ret
                +1  6139     
                +1  6140     
                +1  6141     ;пп мигания индикации
2616 78B2       +1  6142     mign:           mov             r0,#marker
                +1  6143                                     
2618 B6FF03     +1  6144                                     cjne    @r0,#0ffh,mignn
                +1  6145                                     ;реж изм мигает *
261B C219       +1  6146                                     clr             bitmig
261D 22         +1  6147                                     ret
                +1  6148     
261E            +1  6149     mignn:                  ;clr            c
261E 7440       +1  6150                                     mov             a,#bufind
2620 26         +1  6151                                     add             a,@r0                   ;a=bufind+marker
2621 F9         +1  6152                                     mov             r1,a
2622 201907     +1  6153                                     jb              bitmig,onmig
2625 873C       +1  6154                                     mov             savba,@r1
                +1  6155                             ;       mov             a,@r1
                +1  6156                             ;       mov             savba,a
2627 7720       +1  6157                                     mov             @r1,#" "
                +1  6158                                     
2629 D219       +1  6159                                     setb    bitmig
262B 22         +1  6160                                     ret
                +1  6161     
262C A73C       +1  6162     onmig:                  mov             @r1,savba
                +1  6163                                     ;mov            a,savba
                +1  6164                                     ; mov           @r1,a
262E C219       +1  6165                                     clr             bitmig
2630 120000   F +1  6166                                     call    z_01s
2633 22         +1  6167                                     ret
                +1  6168     ;номер ошибки bufind+6
2634 900000   F +1  6169     error:          mov             dptr,#teERR
2637 120000   F +1  6170                                             call    lotext
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    98

263A 853946     +1  6171                                             mov             bufind+6,nuerr
263D 22         +1  6172                                     ret
                +1  6173     
                +1  6174     
263E            +1  6175     textT:          
263E FD543D32   +1  6176     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
2642 6D67FDFD                
2646 FDFD                    
2648 FD543D31   +1  6177     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
264C 306D67FD                
2650 FDFD                    
2652 FD543D35   +1  6178                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
2656 306D67FD                
265A FDFD                    
265C FD543D64   +1  6179                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2660 3167FDFD                
2664 FDFD                    
2666 20202054   +1  6180                             db              " "," "," ","T","=",31h,67h," "," "," "
266A 3D316720                
266E 2020                    
2670 2020543D   +1  6181                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2674 31306720                
2678 2020                    
                +1  6182     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6183     
267A 42753474   +1  6184     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
267E 79767454                
2682 7720                    
2684 20553D20   +1  6185     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
2688 20202020                
268C 2065                    
268E 20423D2B   +1  6186     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2692 20202020                
2696 2020                    
2698 20207145   +1  6187     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
269C 48722020                
26A0 2020                    
                +1  6188     
26A2 20544579   +1  6189     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
26A6 542D7433                
26AA 7120                    
26AC 54457954   +1  6190     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
26B0 20523520                
26B4 2020                    
26B6 20794B30   +1  6191     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
26BA 50205235                
26BE 2020                    
26C0 20204142   +1  6192     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
26C4 4B202020                
26C8 2020                    
26CA 204B4176   +1  6193     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
26CE 74735020                
26D2 202020                  
                +1  6194     
26D5 20544579   +1  6195     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
26D9 54202020                
26DD 5431                    
26DF 20544579   +1  6196     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
26E3 54202020                
26E7 5432                    
26E9 20544579   +1  6197     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
26ED 54202020                
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE    99

26F1 5433                    
                +1  6198     
                +1  6199     
26F3 20202035   +1  6200     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
26F7 37362020                
26FB 2020                    
26FD 20202031   +1  6201     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2701 39322020                
2705 2020                    
                +1  6202     
2707 61415030   +1  6203     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
270B 76772030                
270F 3030                    
2711 20303030   +1  6204     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2715 30302020                
2719 2041                    
271B 74337120   +1  6205     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
271F 4B304879                
2723 5420                    
2725 20204275   +1  6206     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
2729 58307820                
272D 2020                    
272F 2020304C   +1  6207     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2733 4C202020                
2737 2020                    
2739 20203034   +1  6208     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
273D 7479544B                
2741 4120                    
2743 20203041   +1  6209     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
2747 71795420                
274B 20203341   +1  6210     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
274F 61747977                
2753 2020                    
2755 20206150   +1  6211     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
2759 30797130                
275D 545020                  
2760 20206130   +1  6212     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2764 76484162                
2768 2020                    
276A 20744854   +1  6213     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
276E 20303030                
2772 3067                    
2774 20207376   +1  6214     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2778 304B2020                
277C 2020                    
277E 20207376   +1  6215     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2782 304B2030                
2786 2020                    
2788 30547934   +1  6216     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
278C 45542030                
2790 3031                    
2792 79544154   +1  6217     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2796 74795474                
279A 4B41                    
279C 71744820   +1  6218     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
27A0 20202020                
27A4 2020                    
27A6 71414B79   +1  6219     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
27AA 20202020                
27AE 2020                    
27B0 79504578   +1  6220     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
27B4 20202020                
27B8 2020                    
                +1  6221      ;;;;;;;;;;;;;;;;;;;         
27BA 2020304C   +1  6222     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
27BE 4C204920                
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   100

27C2 2020                    
27C4 2020304C   +1  6223     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
27C8 4C206620                
27CC 2020                    
27CE 20204552   +1  6224     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
27D2 52202020                
27D6 2020                    
27D8 2020454E   +1  6225     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
27DC 44202020                
27E0 2020                    
                +1  6226     
                +1  6227     ;dptr+4-приемник
                +1  6228     ;dptr-источник
                +1  6229     ;r7-кол байт  
27E2            +1  6230     xCIKLWR:
27E2 7F04       +1  6231                             mov             r7,#4   
27E4 E0         +1  6232     lwrx:   movx    a,@dptr
27E5 C083       +1  6233                             push    dph
27E7 C082       +1  6234                             push    dpl
27E9 A3         +1  6235                             inc             dptr
27EA A3         +1  6236                             inc             dptr
27EB A3         +1  6237                             inc             dptr
27EC A3         +1  6238                             inc             dptr
27ED F0         +1  6239                             movx    @dptr,a
27EE D082       +1  6240                             pop             dpl
27F0 D083       +1  6241                             pop             dph
                +1  6242                             
27F2 A3         +1  6243                             inc             dptr
27F3 DFEF       +1  6244                             djnz    r7,lwrx
27F5 22         +1  6245                             ret
                +1  6246     ;r2..r5->@dptr..@dptr+3                         
27F6 EA         +1  6247     saveIr2:                mov     a,r2
27F7 F0         +1  6248                                             movx    @dptr,a
27F8 A3         +1  6249                                             inc     dptr
27F9 EB         +1  6250                                             mov     a,r3
27FA F0         +1  6251                                             movx    @dptr,a
27FB A3         +1  6252                                             inc     dptr
27FC EC         +1  6253                                             mov     a,r4
27FD F0         +1  6254                                             movx    @dptr,a
27FE A3         +1  6255                                             inc     dptr
27FF ED         +1  6256                                             mov     a,r5
2800 F0         +1  6257                                             movx    @dptr,a
2801 22         +1  6258                                             ret
                +1  6259     ;r2..r5-> @r0..@r0+3
                +1  6260     
2802 EA         +1  6261     saver2:         mov     a,r2
2803 F6         +1  6262                                             mov     @r0,a
2804 08         +1  6263                                             inc     r0
2805 EB         +1  6264                                             mov     a,r3
2806 F6         +1  6265                                             mov     @r0,a
2807 08         +1  6266                                             inc     r0
2808 EC         +1  6267                                             mov     a,r4
2809 F6         +1  6268                                             mov     @r0,a
280A 08         +1  6269                                             inc     r0
280B ED         +1  6270                                             mov     a,r5
280C F6         +1  6271                                             mov     @r0,a
280D 22         +1  6272                                             ret 
280E 7F50       +1  6273     clmassix:       mov                     r7,#50h;28h
2810 900100     +1  6274                             mov     dptr,#MASS0        ;забить массив A нулями
2813 7400       +1  6275     clmax:          mov          a,#00h
2815 F0         +1  6276                  movx    @dptr,a
2816 A3         +1  6277                  inc     dptr
2817 DFFA       +1  6278                 djnz                r7,clmax                
2819 F56E       +1  6279                  mov     chmas,a
281B C201       +1  6280                  clr     bitmas
281D 22         +1  6281                 ret
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   101

                +1  6282     ;r1-яЁшхьшъ
                +1  6283     ;r0-шёЄюўшъ
                +1  6284     ;r7-ъюы срщЄ  
281E            +1  6285     CIKLWR:
281E 7F04       +1  6286                             mov             r7,#4   
2820 E6         +1  6287     lwr:    mov     a,@r0
2821 F7         +1  6288                             mov     @r1,a
2822 09         +1  6289                             inc             r1
2823 08         +1  6290                             inc             r0
2824 DFFA       +1  6291                             djnz    r7,lwr
2826 22         +1  6292                             ret     
                +1  6293     ;r2..r5-> @dptr..@dptr+3
                +1  6294     
2827 120000   F +1  6295     zmul:   call    maform
282A 120000   F +1  6296                     call    lmul
282D 120000   F +1  6297                     call    bform
2830 22         +1  6298                     ret
                +1  6299     
2831 120000   F +1  6300     zdiv:   call    maform
2834 120000   F +1  6301                     call    divide
2837 120000   F +1  6302                     call    bform
283A 22         +1  6303                     ret
                +1  6304     
283B EA         +1  6305     maform: mov a,r2
283C 33         +1  6306             rlc a
283D 5006       +1  6307             jnc             fo1m
283F D202       +1  6308                     setb            znmat
2841 120000   F +1  6309                     call   form4
2844 22         +1  6310                     ret
2845 C202       +1  6311     fo1m:   clr             znmat
2847 22         +1  6312                     ret
                +1  6313     
2848 300203     +1  6314     bform:  jnb             znmat,fo2m
284B 120000   F +1  6315                     call    form4
284E 22         +1  6316     fo2m:   ret
                +1  6317       
                +1  6318     ;r2..r5 яхЁхтхёЄш т фюя ъюф
284F ED         +1  6319     form4:          mov a,r5
2850 F4         +1  6320             cpl a
2851 2401       +1  6321             add a,#1
2853 FD         +1  6322             mov r5,a
2854 EC         +1  6323             mov a,r4
2855 F4         +1  6324             cpl a
2856 3400       +1  6325             addc    a,#0
2858 FC         +1  6326             mov r4,a
2859 EB         +1  6327             mov a,r3
285A F4         +1  6328                 cpl a
285B 3400       +1  6329             addc    a,#0
285D FB         +1  6330             mov r3,a
285E EA         +1  6331             mov a,r2
285F F4         +1  6332             cpl a
2860 3400       +1  6333             addc    a,#0
2862 FA         +1  6334             mov r2,a
2863 22         +1  6335             ret
                +1  6336     
2864 120000   F +1  6337     zcmp:   call            maform
2867 120000   F +1  6338                     call            lcmp
286A C0D0       +1  6339                     push            psw
286C 120000   F +1  6340                     call    bform
286F D0D0       +1  6341                     pop             psw
2871 22         +1  6342                     ret
                +1  6343     
                +1  6344     
                +1  6345     ;@r0..@r0+3->r8..r11
                +1  6346     
2872 E6         +1  6347     resar8: mov     a,@r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   102

2873 F508       +1  6348                     mov     ltemp,a
2875 08         +1  6349                     inc     r0
2876 E6         +1  6350                     mov     a,@r0
2877 F509       +1  6351                     mov     ltemp+1,a
2879 08         +1  6352                     inc     r0
287A E6         +1  6353                     mov     a,@r0
287B F50A       +1  6354                     mov     ltemp+2,a
287D 08         +1  6355                     inc     r0
287E E6         +1  6356                     mov     a,@r0
287F F50B       +1  6357                     mov     ltemp+3,a
2881 22         +1  6358                     ret
                +1  6359     
                +1  6360     ;
                +1  6361     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6362     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6363     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6364     ;r2 a    ўшёыю 180
                +1  6365     ;00 b4
                +1  6366     ;т_ї- mabin..mabin+2
                +1  6367     ;     80 01 00
                +1  6368      
2882 C8         +1  6369     cond:   xch     a,r0    
2883 F9         +1  6370                     mov     r1,a
2884 C8         +1  6371                     xch     a,r0
2885 7C03       +1  6372                     mov     r4,#03
2887 7700       +1  6373     dcoa:   mov     @r1,#00
2889 09         +1  6374                     inc     r1
288A DCFB       +1  6375                     djnz    r4,dcoa
288C 7B10       +1  6376                     mov     r3,#10h
288E C3         +1  6377     dcob:   clr     c
288F 33         +1  6378                     rlc     a
2890 CA         +1  6379                     xch     a,r2
2891 33         +1  6380                     rlc     a
2892 CA         +1  6381                     xch     a,r2
2893 C8         +1  6382                     xch     a,r0
2894 F9         +1  6383                     mov     r1,a
2895 C8         +1  6384                     xch     a,r0
2896 7C03       +1  6385                     mov     r4,#03
2898 FD         +1  6386                     mov     r5,a
2899 E7         +1  6387     dcoc:   mov     a,@r1 
289A 37         +1  6388                     addc    a,@r1
289B D4         +1  6389                     da      a
289C F7         +1  6390                     mov     @r1,a
289D 09         +1  6391                     inc     r1
289E DCF9       +1  6392                     djnz    r4,dcoc
28A0 ED         +1  6393                     mov     a,r5
28A1 4003       +1  6394                     jc      dcod
28A3 DBE9       +1  6395                     djnz    r3,dcob
28A5 C3         +1  6396                     clr     c
28A6 00         +1  6397     dcod:   nop
28A7 22         +1  6398                     ret
                +1  6399     
28A8 8A08       +1  6400     move28: mov     ltemp,r2                        ;r2..r5->ltemp
28AA 850309     +1  6401                     mov     ltemp+1,3
28AD 85040A     +1  6402                     mov     ltemp+2,4
28B0 85050B     +1  6403                     mov     ltemp+3,5
28B3 22         +1  6404                     ret
                +1  6405     
                +1  6406     ;@r0..@r0+3->r2..r5
                +1  6407     
28B4 E6         +1  6408     resar2: mov     a,@r0
28B5 FA         +1  6409                     mov     r2,a
28B6 08         +1  6410                     inc     r0
28B7 E6         +1  6411                     mov     a,@r0
28B8 FB         +1  6412                     mov     r3,a
28B9 08         +1  6413                     inc     r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   103

28BA E6         +1  6414                     mov     a,@r0
28BB FC         +1  6415                     mov     r4,a
28BC 08         +1  6416                     inc     r0
28BD E6         +1  6417                     mov     a,@r0
28BE FD         +1  6418                     mov     r5,a
28BF 22         +1  6419                     ret
                +1  6420     
                +1  6421     ;25mkc !!!!!!!!!!!!!!!1
28C0 7B4B       +1  6422     z_9:      mov R3,#4Bh      ;загрузка числа
28C2 DBFE       +1  6423                    djnz R3,$
28C4 22         +1  6424               ret
                +1  6425     
                +1  6426     ;запись   передаваемый байт в acc
                +1  6427     ;передача байта послед кодом старшими разрядами  вперед
28C5 7A08       +1  6428     write:     mov R2,#8
28C7 C3         +1  6429                             clr  c  
28C8 C297       +1  6430     wr1:            clr             p1.7;P1.2
28CA 00         +1  6431                         nop 
28CB 33         +1  6432                             rlc A
28CC 9296       +1  6433                             mov P1.6,C;P1.1,C
28CE 120000   F +1  6434                        call tim2
28D1 D297       +1  6435                        setb P1.7;P1.2
28D3 120000   F +1  6436                call tim2
28D6 DAF0       +1  6437                       djnz R2,wr1
28D8 C296       +1  6438                       clr P1.6;P1.1
28DA 22         +1  6439                                              ret
                +1  6440     
                +1  6441     ;чтение номера байта с индикатора(2байта)
                +1  6442     ;bufind+8..bufind+9
                +1  6443     ;-  - - -
                +1  6444     ;- - - - - - - - - -
                +1  6445     ;adec..adec+9
                +1  6446     ;ст            мл
28DB 7847       +1  6447     upak1:  mov             r0,#bufind+7;
28DD 795C       +1  6448                                     mov             r1,#adec+9
28DF C3         +1  6449                                     clr             c
28E0 E6         +1  6450                                     mov             a,@r0
28E1 9430       +1  6451                                     subb    a,#30h
28E3 FF         +1  6452                                     mov             r7,a
28E4 C3         +1  6453                                     clr             c
28E5 9405       +1  6454                                     subb    a,#5
28E7 4004       +1  6455                                     jc              upk1
28E9 7404       +1  6456                                     mov             a,#4
28EB 8001       +1  6457                                     jmp             upk2
28ED EF         +1  6458     upk1:           mov             a,r7
28EE F7         +1  6459     upk2:           mov             @r1,a
28EF 22         +1  6460                                     ret  
                +1  6461     ;r1-мл байт счетчика ячеек
28F0 C3         +1  6462     chminus:        clr                     c
28F1 E7         +1  6463                                             mov                     a,@r1
28F2 9401       +1  6464                                             subb            a,#01
28F4 F7         +1  6465                                             mov                     @r1,a;low
28F5 19         +1  6466                                             dec                     r1
28F6 E7         +1  6467                                             mov                     a,@r1
28F7 9400       +1  6468                                             subb            a,#00
28F9 F7         +1  6469                                             mov                     @r1,a
28FA 22         +1  6470                                             ret
                +1  6471     
                +1  6472     
                +1  6473     ;чтение номера байта с индикатора(4байта)
                +1  6474     ;bufind+6..bufind+9
                +1  6475     ;-  - - -
                +1  6476     ;- - - - - - - - - -
                +1  6477     ;adec..adec+9
                +1  6478     ;ст            мл
28FB 7848       +1  6479     upak4:  mov             r0,#bufind+8;
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   104

28FD 795C       +1  6480                     mov             r1,#adec+9
28FF 7F04       +1  6481                     mov             r7,#4
2901 C3         +1  6482     upaa:   clr             c
2902 E6         +1  6483                     mov             a,@r0
2903 9430       +1  6484                     subb    a,#30h
2905 F7         +1  6485                     mov             @r1,a
2906 18         +1  6486                     dec             r0
2907 19         +1  6487                     dec             r1
2908 DFF7       +1  6488                     djnz    r7,upaa
290A 22         +1  6489                     ret
                +1  6490     
                +1  6491     ;dptr-адр ячейки 1й соотв блока 
290B E538       +1  6492     adrblok:         mov            a,nblok
290D C3         +1  6493                              clr            c
290E 9401       +1  6494                              subb           a,#1
2910 FD         +1  6495                              mov            r5,a
2911 E4         +1  6496                              clr            a
2912 FC         +1  6497                              mov            r4,a
2913 FB         +1  6498                              mov            r3,a
2914 FA         +1  6499                              mov            r2,a
2915 900000   F +1  6500                                     mov                     dptr,#ch320h
2918 120000   F +1  6501                                     CALL   ldc_ltemp                 ; ltemp <-320
291B 120000   F +1  6502                                     call            lmul;r2..r5
291E ED         +1  6503                                     mov                     a,r5
291F 2450       +1  6504                                     add                     a,#50h
2921 F582       +1  6505                                     mov                     dpl,a
2923 EC         +1  6506                                     mov                     a,r4
2924 3401       +1  6507                                     addc            a,#01           
2926 F583       +1  6508                                     mov                     dph,a                   ;dptr-
2928 22         +1  6509                                     ret
                +1  6510     
                +1  6511     ;
                +1  6512     ;saven_bl<-dptr  адрес след ячейки внешн озу 
2929 E538       +1  6513     save_hl:                mov             a,nblok
292B B4011D     +1  6514                                                     cjne    a,#1,sa_hl1
292E 79D3       +1  6515                                                     mov             r1,#saven_bl
2930 E583       +1  6516     sa_hl:                  mov             a,dph
2932 F7         +1  6517                                               mov           @r1,a
2933 09         +1  6518                                                     inc             r1
2934 E582       +1  6519                                                     mov             a,dpl
2936 F7         +1  6520                                                     mov             @r1,a
                +1  6521                                                     ;;;;;;;;;не конец ли блока
                +1  6522                             
2937 79D6       +1  6523                                     mov                     r1,#volume+1;work+1
2939 120000   F +1  6524                                     call            chminus
293C 78D5       +1  6525                                     mov             r0,#volume
293E E6         +1  6526                                     mov             a,@r0
293F 30E708     +1  6527                                     jnb             acc.7,noendli
2942 C20A       +1  6528                                     clr                     bitbon                  ;блок закон
                             чился
2944 534BFD     +1  6529                                     anl                     bufind+11,#0fdh
2947 120000   F +1  6530                                     call            ind
294A 22         +1  6531     noendli:ret
                +1  6532     
294B B40204     +1  6533     sa_hl1:         cjne    a,#2,sa_hl2
294E 79C0       +1  6534                                                     mov             r1,#saven_bl2
2950 80DE       +1  6535                                                     jmp             sa_hl
                +1  6536     
2952 B40304     +1  6537     sa_hl2:         cjne    a,#3,sa_hl3
2955 79C2       +1  6538                                                     mov             r1,#saven_bl3
2957 80D7       +1  6539                                                     jmp             sa_hl
2959 79D9       +1  6540     sa_hl3:                 mov             r1,#saven_bl4
295B 80D3       +1  6541                                                     jmp             sa_hl
                +1  6542     
                +1  6543     ;загрузка dptr сохр ранее значением адреса ячейки
295D E538       +1  6544     resa_hl:                mov             a,nblok
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   105

295F B4010A     +1  6545                                                     cjne    a,#1,re_hl1
2962 79D3       +1  6546                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
2964 E7         +1  6547     re_hl:                  mov             a,@r1   
2965 F583       +1  6548                                                     mov             dph,a
                +1  6549                                               
2967 09         +1  6550                                                     inc             r1
2968 E7         +1  6551                                                     mov             a,@r1
2969 F582       +1  6552                                                     mov             dpl,a
296B 22         +1  6553                                                     ret
                +1  6554     
296C B40204     +1  6555     re_hl1:                 cjne    a,#2,re_hl2
296F 79C0       +1  6556                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
2971 80F1       +1  6557                                                     jmp             re_hl
                +1  6558     
2973 B40304     +1  6559     re_hl2:                 cjne    a,#3,re_hl3
2976 79C2       +1  6560                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
2978 80EA       +1  6561                                                     jmp             re_hl
                +1  6562     
297A 79D9       +1  6563     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
297C 80E6       +1  6564                                                     jmp             re_hl
                +1  6565     ;загрузка rez_A3 в соотв яч внешн озу
297E 789C       +1  6566     loA3_X:                 mov             r0,#rez_A3
2980 120000   F +1  6567                                                     call    resar2
                +1  6568                                                     
2983 EA         +1  6569                                                     mov             a,r2                    ;
2984 F0         +1  6570                                                     movx    @dptr,a
2985 A3         +1  6571                                                     inc             dptr
2986 EB         +1  6572                                                     mov             a,r3
2987 F0         +1  6573                                                     movx    @dptr,a
2988 A3         +1  6574                                                     inc             dptr
2989 EC         +1  6575                                                     mov             a,r4
298A F0         +1  6576                                                     movx    @dptr,a
298B A3         +1  6577                                                     inc             dptr
298C ED         +1  6578                                                     mov             a,r5
298D F0         +1  6579                                                     movx    @dptr,a
298E A3         +1  6580                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
298F 22         +1  6581                                                     ret             ;в ячейке saven_bl
                +1  6582     ;чтение в rez_A3 из соотв яч внешн озу
2990            +1  6583     reA3_X:         
                +1  6584                                                     
2990 E0         +1  6585                                                     movx    a,@dptr
2991 FA         +1  6586                                                     mov             r2,a
2992 A3         +1  6587                                                     inc             dptr
2993 E0         +1  6588                                                     movx    a,@dptr
2994 FB         +1  6589                                                     mov             r3,a
2995 A3         +1  6590                                                     inc             dptr
2996 E0         +1  6591                                                     movx    a,@dptr
2997 FC         +1  6592                                                     mov             r4,a
2998 A3         +1  6593                                                     inc             dptr
2999 E0         +1  6594                                                     movx    a,@dptr
299A FD         +1  6595                                                     mov             r5,a
299B A3         +1  6596                                                     inc             dptr
299C 789C       +1  6597                                                     mov             r0,#rez_A3
299E 120000   F +1  6598                                                     call    saver2
29A1 22         +1  6599                                                     ret
                +1  6600     ;;;;;;;;;;;;;;;;;
                +1  6601     ;разбивка внешнего озу
                +1  6602     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6603     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6604     ;150h..46fh 1й блок
                +1  6605     ;470h..78fh     2й блок
                +1  6606     ;790h..aaf      3й блок
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   106

                +1  6607     ;ab0h..dcfh 4й блок
                +1  6608     ;dd0..fffh свободная область
                +1  6609     ;
                +1  6610     ;светодиоды и точки для индикатора
                +1  6611     ;такт
                +1  6612     ;измер
                +1  6613     ;avp
                +1  6614     ;нуль
                +1  6615     ;0,1s
                +1  6616     ;1s
                +1  6617     ;10s
                +1  6618     ;кмп
                +1  6619     ;память
                +1  6620     ;пуск
                +1  6621     ;
                +1  6622     ;
                    6623     
                    6624     ;$include (d:\amp\sarifm3.asm) 
                +1  6625     ; ” ©« SARIFM.ASM 8.11.95
                +1  6626     ;файл арифметики
                +1  6627       
  0008          +1  6628     ltemp    equ       8           ;long temporary
  000C          +1  6629     xtemp    equ       12          ;other temporaries
  000A          +1  6630     DECSIZE  EQU       10
  0004          +1  6631     NUMSIZE  EQU       4
  0004          +1  6632     RR4  EQU       4
  0005          +1  6633     RR5  EQU       5
                +1  6634     
                +1  6635                                                     
                +1  6636     
                +1  6637                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6638     ;             using    0              ; Specify register bank for the following
                +1  6639                                            ; program code.
                +1  6640     ;                                               cseg AT 400h
                +1  6641     ; Arithmetics:  CLEARING string
                +1  6642     ; Input:
                +1  6643     ; R0 - pointer to string,
                +1  6644     ; NUMSIZE - byte count if CLRNUM used,
                +1  6645     ; DECSIZE - byte count if CLRDEC used,
                +1  6646     ; R2 - byte count if CLEAR used;
                +1  6647     ; Output:  none.
                +1  6648     
29A2            +1  6649     CLRDEC:
29A2 7A0A       +1  6650         MOV R2, #DECSIZE
29A4 8002       +1  6651         SJMP    CLEAR
29A6            +1  6652     CLRNUM:
29A6 7A04       +1  6653         MOV R2, #NUMSIZE
                +1  6654         ;JMP    CLEAR
29A8            +1  6655     CLEAR:
29A8 E4         +1  6656         CLR A
29A9 F6         +1  6657     CLR11:  MOV @R0, A
29AA 08         +1  6658         INC R0
29AB DAFC       +1  6659         DJNZ    R2, CLR11
29AD 22         +1  6660         RET
                +1  6661     
                +1  6662     ;**********************************
                +1  6663     ;mov    r1,#abin+3
                +1  6664     ;mov    r0,#adec
                +1  6665     ; _ _ _ _
                +1  6666     ;     03ff
                +1  6667     ;ст     мл   - вход
                +1  6668     ; _ _ _ _ _ _ _ _ _ _
                +1  6669     ;             1 0 2 3
                +1  6670     ;ст                мл 
                +1  6671     ;**********************************
                +1  6672     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   107

29AE            +1  6673     BINDEC:
                +1  6674     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6675     ; Input:
                +1  6676     ; R0 - pointer to destination (high digit is the first),
                +1  6677     ; R1 - pointer to source,
                +1  6678     ; NUMSIZE - byte count in binary number;
                +1  6679     ; DECSIZE - byte count in decimal number;
                +1  6680     ; Output:  none.
                +1  6681     ; Source saved
                +1  6682     
                +1  6683         ; 1. Clear result
29AE 7A05       +1  6684         MOV R2, #DECSIZE/2
29B0 120000   F +1  6685         CALL   CLEAR  ; incrementing R0
                +1  6686     
                +1  6687         ; 2. Prepare convertion
29B3 18         +1  6688         DEC R0
29B4 8804       +1  6689         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
29B6 8905       +1  6690         MOV RR5, R1 ; R5 - pointer to low byte of binary number
29B8 7B20       +1  6691         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6692     
                +1  6693         ; 3. Convert cyrcle
29BA            +1  6694     BIN30:
                +1  6695     
                +1  6696         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
29BA A905       +1  6697         MOV R1, RR5
29BC 7A04       +1  6698         MOV R2, #NUMSIZE
29BE E7         +1  6699     BIN31:  MOV A, @R1
29BF 33         +1  6700         RLC A
29C0 F7         +1  6701         MOV @R1, A
29C1 19         +1  6702         DEC R1
29C2 DAFA       +1  6703         DJNZ    R2, BIN31
29C4 A905       +1  6704         MOV R1, RR5
29C6 E7         +1  6705         MOV A, @R1
29C7 92E0       +1  6706         MOV ACC.0, C
29C9 F7         +1  6707         MOV @R1, A
                +1  6708     
                +1  6709         ; 3.2. Doubling decimal result with <Carry>
29CA A804       +1  6710         MOV R0, RR4
29CC 7A05       +1  6711         MOV R2, #DECSIZE/2
29CE E6         +1  6712     BIN32:  MOV A, @R0
29CF 36         +1  6713         ADDC    A, @R0
29D0 D4         +1  6714         DA  A
29D1 F6         +1  6715         MOV @R0, A
29D2 18         +1  6716         DEC R0
29D3 DAF9       +1  6717         DJNZ    R2, BIN32
                +1  6718     
                +1  6719         ; 3.3. End of convert cyrcle
29D5 DBE3       +1  6720         DJNZ    R3, BIN30
                +1  6721     
                +1  6722         ; 4. Make bytes from half-bytes
29D7 E8         +1  6723         MOV A, R0
29D8 240A       +1  6724         ADD A, #DECSIZE
29DA F8         +1  6725         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
29DB A904       +1  6726         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
29DD 7A05       +1  6727         MOV R2, #DECSIZE/2
29DF E7         +1  6728     BIN41:  MOV A, @R1
29E0 540F       +1  6729         ANL A, #00FH
29E2 F6         +1  6730         MOV @R0, A
29E3 18         +1  6731         DEC R0
29E4 E7         +1  6732         MOV A, @R1
29E5 C4         +1  6733         SWAP    A
29E6 540F       +1  6734         ANL A, #00FH
29E8 F6         +1  6735         MOV @R0, A
29E9 18         +1  6736         DEC R0
29EA 19         +1  6737         DEC R1
29EB DAF2       +1  6738         DJNZ    R2, BIN41
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   108

29ED 22         +1  6739         RET
                +1  6740     
                +1  6741     
                +1  6742     ;*********************************
                +1  6743     ;mov    r0,#abin
                +1  6744     ;mov    r1,#adec
                +1  6745     ; _ _ _ _       -выход
                +1  6746     ; ff0000
                +1  6747     ;0004
                +1  6748     ;мл      ст
                +1  6749     
                +1  6750     ;ст                       мл
                +1  6751     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6752     ;                       2 5 5
                +1  6753     ;                   1 0 2 4
                +1  6754     
29EE            +1  6755     DECBIN:
                +1  6756     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6757     ; Input:
                +1  6758     ; R0 - pointer to destination,
                +1  6759     ; R1 - pointer to source (high digit is the first),
                +1  6760     ; NUMSIZE - byte count in binary number;
                +1  6761     ; DECSIZE - byte count in decimal number;
                +1  6762     ; Output:  none
                +1  6763     ; Source cleared
                +1  6764     
                +1  6765         ; 1. Clear result
29EE 120000   F +1  6766         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6767     
                +1  6768         ; 2. Prepare convertion
29F1 18         +1  6769         DEC R0
29F2 8804       +1  6770         MOV RR4, R0 ; R4 - pointer to high byte of binary result
29F4 8905       +1  6771         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
29F6 900000   F +1  6772         MOV DPTR, #DECT2
29F9 7B20       +1  6773         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6774     
                +1  6775         ; 3. Convert cyrcle
29FB            +1  6776     DEC30:
                +1  6777     
                +1  6778         ; 3.1. Divide decimal number by 2 and prepare <Carry>
29FB C3         +1  6779         CLR C
29FC A905       +1  6780         MOV R1, RR5
29FE 7A0A       +1  6781         MOV R2, #DECSIZE
2A00 E7         +1  6782     DEC31:  MOV A, @R1
2A01 540F       +1  6783         ANL A, #00FH
2A03 92E4       +1  6784         MOV ACC.4, C
2A05 93         +1  6785         MOVC    A,@A+DPTR
2A06 F7         +1  6786         MOV @R1, A
2A07 A2E7       +1  6787         MOV C, ACC.7
2A09 09         +1  6788         INC R1
2A0A DAF4       +1  6789         DJNZ    R2, DEC31
                +1  6790     
                +1  6791         ; 3.2. Rotate binary result one bit to right with <Carry>
2A0C A804       +1  6792         MOV R0, RR4
2A0E 7A04       +1  6793         MOV R2, #NUMSIZE
2A10 E6         +1  6794     DEC32:  MOV A, @R0
2A11 13         +1  6795         RRC A
2A12 F6         +1  6796         MOV @R0, A
2A13 18         +1  6797         DEC R0
2A14 DAFA       +1  6798         DJNZ    R2, DEC32
                +1  6799     
                +1  6800         ; 3.3. End of convert cyrcle
2A16 DBE3       +1  6801         DJNZ    R3, DEC30
2A18 22         +1  6802         RET
                +1  6803     
2A19 00800181   +1  6804     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   109

2A1D 02820383                
2A21 0484                    
2A23 00000000   +1  6805         DB  00,00,00,00,00,00
2A27 0000                    
2A29 05850686   +1  6806         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2A2D 07870888                
2A31 0989                    
                +1  6807     
                +1  6808     ;   Long comparison
                +1  6809     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6810     ;   flags and acc set as though a long subtraction was done.
                +1  6811     ;*******************************
                +1  6812     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6813     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6814     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6815     ;*******************************
2A33            +1  6816     lcmp:
2A33 C3         +1  6817         clr c
2A34 EA         +1  6818         mov a,r2
2A35 9508       +1  6819         subb    a,8
2A37 700F       +1  6820         jnz done
2A39 EB         +1  6821         mov a,r3
2A3A 9509       +1  6822         subb    a,9
2A3C 7008       +1  6823         jnz done1
2A3E EC         +1  6824         mov a,r4
2A3F 950A       +1  6825         subb    a,10
2A41 7003       +1  6826         jnz done1
2A43 ED         +1  6827         mov a,r5
2A44 950B       +1  6828         subb    a,11
2A46            +1  6829     done1:
2A46 C2D2       +1  6830         clr ov      ;overflow is significant only for top byte
2A48            +1  6831     done:
2A48 22         +1  6832         ret
                +1  6833     
                +1  6834     ;   Load long into r2-5 from [dptr]
                +1  6835     
2A49            +1  6836     ldc_long:
2A49 E583       +1  6837         mov a,dph       ;is it in on board memory
2A4B 6010       +1  6838         jz  onboard     ;yes
2A4D E4         +1  6839         clr a
2A4E 93         +1  6840         movc    a,@a+dptr
2A4F FA         +1  6841         mov r2,a
2A50 7401       +1  6842         mov a,#1
2A52 93         +1  6843         movc    a,@a+dptr
2A53 FB         +1  6844         mov r3,a
2A54 7402       +1  6845         mov a,#2
2A56 93         +1  6846         movc    a,@a+dptr
2A57 FC         +1  6847         mov r4,a
2A58 7403       +1  6848         mov a,#3
2A5A 93         +1  6849         movc    a,@a+dptr
2A5B FD         +1  6850         mov r5,a
2A5C 22         +1  6851         ret
2A5D            +1  6852     onboard:
2A5D A882       +1  6853         mov r0,dpl
2A5F E6         +1  6854         mov a,@r0
2A60 FA         +1  6855         mov r2,a
2A61 08         +1  6856         inc r0
2A62 E6         +1  6857         mov a,@r0
2A63 FB         +1  6858         mov r3,a
2A64 08         +1  6859         inc r0
2A65 E6         +1  6860         mov a,@r0
2A66 FC         +1  6861         mov r4,a
2A67 08         +1  6862         inc r0
2A68 E6         +1  6863         mov a,@r0
2A69 FD         +1  6864         mov r5,a
2A6A 22         +1  6865         ret
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   110

                +1  6866     
                +1  6867     ;**************************************
                +1  6868     ;загрузить ltemp...+3 из памяти программ
                +1  6869     ;mov    dptr,#CH5
                +1  6870     ;call   ldc_ltemp        ltemp <--5
                +1  6871     ;**************************************
2A6B            +1  6872     ldc_ltemp:
2A6B E583       +1  6873         mov a,dph       ;is it in on board memory
2A6D 6014       +1  6874         jz  oboard      ;yes
2A6F E4         +1  6875         clr a
2A70 93         +1  6876         movc    a,@a+dptr
2A71 F508       +1  6877         mov 8,a
2A73 7401       +1  6878         mov a,#1
2A75 93         +1  6879         movc    a,@a+dptr
2A76 F509       +1  6880         mov 9,a
2A78 7402       +1  6881         mov a,#2
2A7A 93         +1  6882         movc    a,@a+dptr
2A7B F50A       +1  6883         mov 10,a
2A7D 7403       +1  6884         mov a,#3
2A7F 93         +1  6885         movc    a,@a+dptr
2A80 F50B       +1  6886         mov 11,a
2A82 22         +1  6887         ret
2A83            +1  6888     oboard:
2A83 A882       +1  6889         mov r0,dpl
2A85 8608       +1  6890         mov 8,@r0
2A87 08         +1  6891         inc r0
2A88 8609       +1  6892         mov 9,@r0
2A8A 08         +1  6893         inc r0
2A8B 860A       +1  6894         mov 10,@r0
2A8D 08         +1  6895         inc r0
2A8E 860B       +1  6896         mov 11,@r0
2A90 22         +1  6897         ret
                +1  6898     
                +1  6899     ;*****************************
                +1  6900     ;mov    dptr,#k1
                +1  6901     ;call   ldx_long
                +1  6902     ;k1->r2..r5
                +1  6903     ;*****************************
                +1  6904     ;   Load long into r2-5 from [dptr]
                +1  6905     ;
                +1  6906     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2A91            +1  6907     ldx_long:
2A91 E583       +1  6908         mov a,dph       ;is it in on board memory
2A93 6014       +1  6909         jz  onboar1        ;yes
2A95 C082       +1  6910         push    dpl
2A97 C083       +1  6911         push    dph
2A99 E0         +1  6912         movx    a,@dptr
2A9A FA         +1  6913         mov r2,a
2A9B A3         +1  6914         inc dptr
2A9C E0         +1  6915         movx    a,@dptr
2A9D FB         +1  6916         mov r3,a
2A9E A3         +1  6917         inc dptr
2A9F E0         +1  6918         movx    a,@dptr
2AA0 FC         +1  6919         mov r4,a
2AA1 A3         +1  6920         inc dptr
2AA2 E0         +1  6921         movx    a,@dptr
2AA3 FD         +1  6922         mov r5,a
2AA4 D083       +1  6923         pop dph
2AA6 D082       +1  6924         pop dpl
2AA8 22         +1  6925         ret
2AA9            +1  6926     onboar1:
2AA9 A882       +1  6927         mov r0,dpl
2AAB E6         +1  6928         mov a,@r0
2AAC FA         +1  6929         mov r2,a
2AAD 08         +1  6930         inc r0
2AAE E6         +1  6931         mov a,@r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   111

2AAF FB         +1  6932         mov r3,a
2AB0 08         +1  6933         inc r0
2AB1 E6         +1  6934         mov a,@r0
2AB2 FC         +1  6935         mov r4,a
2AB3 08         +1  6936         inc r0
2AB4 E6         +1  6937         mov a,@r0
2AB5 FD         +1  6938         mov r5,a
2AB6 22         +1  6939         ret
                +1  6940     
                +1  6941     ;*********************************
                +1  6942     ;mov    dptr,#k2
                +1  6943     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6944     ;**********************************
2AB7            +1  6945     ldx_ltemp:
2AB7 E583       +1  6946         mov a,dph       ;is it in on board memory
2AB9 6010       +1  6947         jz  oboard1     ;yes
2ABB E0         +1  6948         movx    a,@dptr
2ABC F508       +1  6949         mov 8,a
2ABE A3         +1  6950         inc dptr
2ABF E0         +1  6951         movx    a,@dptr
2AC0 F509       +1  6952         mov 9,a
2AC2 A3         +1  6953         inc dptr
2AC3 E0         +1  6954         movx    a,@dptr
2AC4 F50A       +1  6955         mov 10,a
2AC6 A3         +1  6956         inc dptr
2AC7 E0         +1  6957         movx    a,@dptr
2AC8 F50B       +1  6958         mov 11,a
2ACA 22         +1  6959         ret
2ACB            +1  6960     oboard1:
2ACB A882       +1  6961         mov r0,dpl
2ACD 8608       +1  6962         mov 8,@r0
2ACF 08         +1  6963         inc r0
2AD0 8609       +1  6964         mov 9,@r0
2AD2 08         +1  6965         inc r0
2AD3 860A       +1  6966         mov 10,@r0
2AD5 08         +1  6967         inc r0
2AD6 860B       +1  6968         mov 11,@r0
2AD8 22         +1  6969         ret
                +1  6970     ;   Long division routines for 8051
                +1  6971     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6972     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6973     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6974     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6975     ;   r1 must be saved by the caller.
                +1  6976     ;   This is long unsigned division.
                +1  6977     
                +1  6978     
                +1  6979     ;   Register usage:
                +1  6980     ;       r0 loop counter
                +1  6981     ;       xtemp (12-15) accumulates quotient
                +1  6982     ;       r5-r2 holds dividend
                +1  6983     ;       ltemp holds divisor
                +1  6984     
                +1  6985     ;************************************
                +1  6986     ;r2..r5-делимое
                +1  6987     ;ltemp..-делитель
                +1  6988     ;частное -r2..r5
                +1  6989     ;*************************************
2AD9            +1  6990     divide:
2AD9 E4         +1  6991         clr a
2ADA F8         +1  6992         mov r0,a        ;initialize count
2ADB F50C       +1  6993         mov xtemp,a     ;zero quotient
2ADD F50D       +1  6994         mov xtemp+1,a
2ADF F50E       +1  6995         mov xtemp+2,a
2AE1 F50F       +1  6996         mov xtemp+3,a
2AE3 ED         +1  6997         mov a,r5        ;check for zero dividend
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   112

2AE4 4C         +1  6998         orl a,r4
2AE5 4B         +1  6999         orl a,r3
2AE6 4A         +1  7000         orl a,r2
2AE7 600B       +1  7001         jz  jfinis
2AE9 E508       +1  7002         mov a,ltemp     ;check for zero divisor
2AEB 4509       +1  7003         orl a,ltemp+1
2AED 450A       +1  7004         orl a,ltemp+2
2AEF 450B       +1  7005         orl a,ltemp+3
2AF1 7037       +1  7006         jnz midl
2AF3 22         +1  7007         ret
                +1  7008     
2AF4 020000   F +1  7009     jfinis: jmp finis
                +1  7010     
2AF7            +1  7011     loops:
2AF7 EA         +1  7012         mov a,r2
2AF8 C3         +1  7013         clr c
2AF9 9508       +1  7014         subb    a,ltemp+0   ;is divisor greater than dividend yet
2AFB 4033       +1  7015         jc  yes     ;yes, go no further
2AFD 7013       +1  7016         jnz no
2AFF EB         +1  7017         mov a,r3
2B00 9509       +1  7018         subb    a,ltemp+1
2B02 402C       +1  7019         jc  yes
2B04 700C       +1  7020         jnz no
2B06 EC         +1  7021         mov a,r4
2B07 950A       +1  7022         subb    a,ltemp+2
2B09 4025       +1  7023         jc  yes
2B0B 7005       +1  7024         jnz no
2B0D ED         +1  7025         mov a,r5
2B0E 950B       +1  7026         subb    a,ltemp+3
2B10 401E       +1  7027         jc  yes
2B12            +1  7028     no:
2B12 E50B       +1  7029         mov a,ltemp+3   ;shift divisor up one bit
2B14 250B       +1  7030         add a,ltemp+3
2B16 F50B       +1  7031         mov ltemp+3,a
2B18 E50A       +1  7032         mov a,ltemp+2
2B1A 350A       +1  7033         addc    a,ltemp+2
2B1C F50A       +1  7034         mov ltemp+2,a
2B1E E509       +1  7035         mov a,ltemp+1
2B20 3509       +1  7036         addc    a,ltemp+1
2B22 F509       +1  7037         mov ltemp+1,a
2B24 E508       +1  7038         mov a,ltemp+0
2B26 3508       +1  7039         addc    a,ltemp+0
2B28 F508       +1  7040         mov ltemp+0,a
2B2A            +1  7041     midl:
2B2A 08         +1  7042         inc r0      ;increment count
2B2B E508       +1  7043         mov a,ltemp+0   ;check for safe to shift some more
2B2D 30E7C7     +1  7044         jnb acc.7,loops  ;loop if top bit clear
2B30            +1  7045     yes:
2B30 E508       +1  7046         mov a,ltemp+0
2B32 C3         +1  7047         clr c
2B33 9A         +1  7048         subb    a,r2        ;can we subtract now?
2B34 401A       +1  7049         jc  dosub       ;yes, go and do it
2B36 7015       +1  7050         jnz nosub
2B38 E509       +1  7051         mov a,ltemp+1
2B3A 9B         +1  7052         subb    a,r3
2B3B 4013       +1  7053         jc  dosub
2B3D 700E       +1  7054         jnz nosub
2B3F E50A       +1  7055         mov a,ltemp+2
2B41 9C         +1  7056         subb    a,r4
2B42 400C       +1  7057         jc  dosub
2B44 7007       +1  7058         jnz nosub
2B46 E50B       +1  7059         mov a,ltemp+3
2B48 9D         +1  7060         subb    a,r5
2B49 4005       +1  7061         jc  dosub
2B4B 6003       +1  7062         jz  dosub
2B4D            +1  7063     nosub:
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   113

2B4D C3         +1  7064         clr c
2B4E 8012       +1  7065         sjmp    dosh
2B50            +1  7066     dosub:
2B50 C3         +1  7067         clr c       ;subtract divisor from dividend
2B51 ED         +1  7068         mov a,r5
2B52 950B       +1  7069         subb    a,ltemp+3
2B54 FD         +1  7070         mov r5,a
2B55 EC         +1  7071         mov a,r4
2B56 950A       +1  7072         subb    a,ltemp+2
2B58 FC         +1  7073         mov r4,a
2B59 EB         +1  7074         mov a,r3
2B5A 9509       +1  7075         subb    a,ltemp+1
2B5C FB         +1  7076         mov r3,a
2B5D EA         +1  7077         mov a,r2
2B5E 9508       +1  7078         subb    a,ltemp+0
2B60 FA         +1  7079         mov r2,a
2B61 D3         +1  7080         setb    c       ;now set bit for quotient
2B62            +1  7081     dosh:
2B62 E50F       +1  7082         mov a,xtemp+3
2B64 33         +1  7083         rlc a
2B65 F50F       +1  7084         mov xtemp+3,a
2B67 E50E       +1  7085         mov a,xtemp+2
2B69 33         +1  7086         rlc a
2B6A F50E       +1  7087         mov xtemp+2,a
2B6C E50D       +1  7088         mov a,xtemp+1
2B6E 33         +1  7089         rlc a
2B6F F50D       +1  7090         mov xtemp+1,a
2B71 E50C       +1  7091         mov a,xtemp+0
2B73 33         +1  7092         rlc a
2B74 F50C       +1  7093         mov xtemp+0,a
2B76 E508       +1  7094         mov a,ltemp+0       ;shift divisor down
2B78 C3         +1  7095         clr c
2B79 13         +1  7096         rrc a
2B7A F508       +1  7097         mov ltemp+0,a
2B7C E509       +1  7098         mov a,ltemp+1
2B7E 13         +1  7099         rrc a
2B7F F509       +1  7100         mov ltemp+1,a
2B81 E50A       +1  7101         mov a,ltemp+2
2B83 13         +1  7102         rrc a
2B84 F50A       +1  7103         mov ltemp+2,a
2B86 E50B       +1  7104         mov a,ltemp+3
2B88 13         +1  7105         rrc a
2B89 F50B       +1  7106         mov ltemp+3,a
                +1  7107     
2B8B D8A3       +1  7108         djnz    r0,yes      ;and continue with the rest
                +1  7109     
2B8D            +1  7110     finis:
2B8D 8D0B       +1  7111         mov ltemp+3,r5
2B8F 8C0A       +1  7112         mov ltemp+2,r4
2B91 8B09       +1  7113         mov ltemp+1,r3
2B93 8A08       +1  7114         mov ltemp+0,r2
2B95 AD0F       +1  7115         mov r5,xtemp+3
2B97 AC0E       +1  7116         mov r4,xtemp+2
2B99 AB0D       +1  7117         mov r3,xtemp+1
2B9B AA0C       +1  7118         mov r2,xtemp+0
2B9D 22         +1  7119         ret         ;and return with the satisfaction of a job well done
                +1  7120     
                +1  7121     
                +1  7122     ;   Long multiplication
                +1  7123     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7124     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7125     
                +1  7126     ;**********************************
                +1  7127     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7128     ;ст  мл
                +1  7129     ;**********************************
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   114

2B9E            +1  7130     llmul:
2B9E            +1  7131     almul:
2B9E            +1  7132     lmul:
2B9E ED         +1  7133         mov a,r5        ;low order byte
2B9F 850BF0     +1  7134         mov b,ltemp+3       ;times low order byte
2BA2 A4         +1  7135         mul ab
2BA3 F50F       +1  7136         mov xtemp+3,a       ;store low
2BA5 85F00E     +1  7137         mov xtemp+2,b   ;and high
2BA8 ED         +1  7138         mov a,r5        ;low order
2BA9 850AF0     +1  7139         mov b,ltemp+2   ;times next
2BAC A4         +1  7140         mul ab
2BAD 250E       +1  7141         add a,xtemp+2   ;add in
2BAF F50E       +1  7142         mov xtemp+2,a
2BB1 E5F0       +1  7143         mov a,b
2BB3 3400       +1  7144         addc    a,#0
2BB5 F50D       +1  7145         mov xtemp+1,a
2BB7 ED         +1  7146         mov a,r5
2BB8 8509F0     +1  7147         mov b,ltemp+1
2BBB A4         +1  7148         mul ab
2BBC 250D       +1  7149         add a,xtemp+1
2BBE F50D       +1  7150         mov xtemp+1,a
2BC0 E5F0       +1  7151         mov a,b
2BC2 3400       +1  7152         addc    a,#0
2BC4 F50C       +1  7153         mov xtemp+0,a
2BC6 ED         +1  7154         mov a,r5
2BC7 8508F0     +1  7155         mov b,ltemp+0
2BCA A4         +1  7156         mul ab
2BCB 250C       +1  7157         add a,xtemp+0
2BCD F50C       +1  7158         mov xtemp+0,a
2BCF EC         +1  7159         mov a,r4
2BD0 850BF0     +1  7160         mov b,ltemp+3
2BD3 A4         +1  7161         mul ab
2BD4 250E       +1  7162         add a,xtemp+2
2BD6 F50E       +1  7163         mov xtemp+2,a
2BD8 E5F0       +1  7164         mov a,b
2BDA 350D       +1  7165         addc    a,xtemp+1
2BDC F50D       +1  7166         mov xtemp+1,a
2BDE E50C       +1  7167         mov a,xtemp+0
2BE0 3400       +1  7168         addc    a,#0
2BE2 F50C       +1  7169         mov xtemp+0,a
2BE4 EC         +1  7170         mov a,r4
2BE5 850AF0     +1  7171         mov b,ltemp+2
2BE8 A4         +1  7172         mul ab
2BE9 250D       +1  7173         add a,xtemp+1
2BEB F50D       +1  7174         mov xtemp+1,a
2BED E5F0       +1  7175         mov a,b
2BEF 350C       +1  7176         addc    a,xtemp+0
2BF1 F50C       +1  7177         mov xtemp+0,a
2BF3 EC         +1  7178         mov a,r4
2BF4 8509F0     +1  7179         mov b,ltemp+1
2BF7 A4         +1  7180         mul ab
2BF8 250C       +1  7181         add a,xtemp+0
2BFA F50C       +1  7182         mov xtemp+0,a
                +1  7183     
2BFC EB         +1  7184         mov a,r3
2BFD 850BF0     +1  7185         mov b,ltemp+3
2C00 A4         +1  7186         mul ab
2C01 250D       +1  7187         add a,xtemp+1
2C03 F50D       +1  7188         mov xtemp+1,a
2C05 E5F0       +1  7189         mov a,b
2C07 350C       +1  7190         addc    a,xtemp+0
2C09 F50C       +1  7191         mov xtemp+0,a
2C0B EB         +1  7192         mov a,r3
2C0C 850AF0     +1  7193         mov b,ltemp+2
2C0F A4         +1  7194         mul ab
2C10 250C       +1  7195         add a,xtemp+0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   115

2C12 F50C       +1  7196         mov xtemp+0,a
                +1  7197     
2C14 EA         +1  7198         mov a,r2
2C15 850BF0     +1  7199         mov b,ltemp+3
2C18 A4         +1  7200         mul ab
2C19 250C       +1  7201         add a,xtemp+0
2C1B FA         +1  7202         mov r2,a
2C1C AB0D       +1  7203         mov r3,xtemp+1
2C1E AC0E       +1  7204         mov r4,xtemp+2
2C20 AD0F       +1  7205         mov r5,xtemp+3
                +1  7206     
2C22 22         +1  7207         ret         ;all done
                +1  7208     ;******************************
                +1  7209     ;из содержимого  r2-r5  вычесть
                +1  7210     ;содержимое          ltemp..ltemp+3
                +1  7211     ;******************************
2C23            +1  7212     llsub:
2C23            +1  7213      lsub:
2C23 ED         +1  7214         mov a,r5
2C24 C3         +1  7215         clr c
2C25 950B       +1  7216         subb    a,11
2C27 FD         +1  7217         mov r5,a
2C28 EC         +1  7218         mov a,r4
2C29 950A       +1  7219         subb    a,10
2C2B FC         +1  7220         mov r4,a
2C2C EB         +1  7221         mov a,r3
2C2D 9509       +1  7222         subb    a,9
2C2F FB         +1  7223         mov r3,a
2C30 EA         +1  7224         mov a,r2
2C31 9508       +1  7225         subb    a,8
2C33 FA         +1  7226         mov r2,a
2C34 22         +1  7227         ret
                +1  7228     
                +1  7229     ;***********************************************
                +1  7230     ;                                                      ст мл
                +1  7231     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7232     ;  r0- адрес младшего байта !!!
                +1  7233     ;результат- r2..r5
                +1  7234     ;***********************************************
                +1  7235     
2C35 C3         +1  7236     ladd:    clr       c
2C36 ED         +1  7237          mov       a,r5
2C37 26         +1  7238          add       a,@r0
2C38 FD         +1  7239          mov       r5,a
2C39 18         +1  7240          dec       r0
2C3A EC         +1  7241          mov       a,r4
2C3B 36         +1  7242          addc      a,@r0
2C3C FC         +1  7243          mov       r4,a
2C3D 18         +1  7244          dec       r0
2C3E EB         +1  7245          mov       a,r3
2C3F 36         +1  7246          addc      a,@r0
2C40 FB         +1  7247          mov       r3,a
2C41 18         +1  7248          dec       r0
2C42 EA         +1  7249          mov       a,r2
2C43 36         +1  7250          addc      a,@r0
2C44 FA         +1  7251          mov       r2,a
2C45 22         +1  7252          ret
                +1  7253     ;***********************************************
                +1  7254     ;                                                      ст мл
                +1  7255     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7256     ;  r0- адрес младшего байта !!!
                +1  7257     ;результат- r2..r5
                +1  7258     ;***********************************************
                +1  7259     
2C46 C3         +1  7260     laddx:    clr       c
2C47 E2         +1  7261                                             movx            a,@r0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   116

2C48 2D         +1  7262                                             add                     a,r5
2C49 FD         +1  7263               mov     r5,a
2C4A 18         +1  7264                             dec     r0
2C4B E2         +1  7265                             movx    a,@r0
2C4C 3C         +1  7266                             addc    a,r4
2C4D FC         +1  7267                             mov     r4,a
2C4E 18         +1  7268                             dec     r0
2C4F E2         +1  7269                             movx    a,@r0
2C50 3B         +1  7270                             addc    a,r3
2C51 FB         +1  7271                             mov     r3,a
2C52 18         +1  7272                             dec     r0
2C53 E2         +1  7273                             movx    a,@r0
2C54 3A         +1  7274                             addc    a,r2
2C55 FA         +1  7275                             mov       r2,a
2C56 22         +1  7276                             ret
                +1  7277     
                +1  7278     ;***********************************************
                +1  7279     ;                                                      ст мл
                +1  7280     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7281     ;  dptr- адрес младшего байта !!!
                +1  7282     ;результат- r2..r5
                +1  7283     ;***********************************************
                +1  7284     
2C57 C3         +1  7285     addx:    clr       c
2C58 E0         +1  7286                                             movx            a,@dptr
2C59 2D         +1  7287                                             add                     a,r5
2C5A FD         +1  7288               mov     r5,a
2C5B 120000   F +1  7289                             call            dedptr;dec     dptr
2C5E E0         +1  7290                             movx    a,@dptr
2C5F 3C         +1  7291                             addc    a,r4
2C60 FC         +1  7292                             mov     r4,a
2C61 120000   F +1  7293                             call            dedptr;dec     dptr
2C64 E0         +1  7294                             movx    a,@dptr
2C65 3B         +1  7295                             addc    a,r3
2C66 FB         +1  7296                             mov     r3,a
2C67 120000   F +1  7297                             call            dedptr;dec     dptr
2C6A E0         +1  7298                             movx    a,@dptr
2C6B 3A         +1  7299                             addc    a,r2
2C6C FA         +1  7300                             mov       r2,a
2C6D 22         +1  7301                             ret
                +1  7302     
2C6E C0D0       +1  7303     dedptr:         push    psw
2C70 C3         +1  7304                                             clr             c
2C71 E582       +1  7305                                             mov             a,dpl
2C73 9401       +1  7306                                             subb    a,#1
2C75 F582       +1  7307                                             mov             dpl,a
2C77 E583       +1  7308                                             mov             a,dph
2C79 9400       +1  7309                                             subb    a,#0
2C7B F583       +1  7310                                             mov             dph,a
2C7D D0D0       +1  7311                                             pop             psw
2C7F 22         +1  7312                                             ret
                    7313     
                    7314     ;$include (d:\amp\floatm.asm)
                +1  7315     ;       Copyright (C) 1988 HI-TECH Software
                +1  7316     
                +1  7317     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7318     
                +1  7319     ;       The format of floating point numbers is as follows:
                +1  7320     
                +1  7321     ;       -----------------
                +1  7322     ;       *     sign      *  1 bit
                +1  7323     ;       -----------------
                +1  7324     ;       *   exponent    *  8 bits
                +1  7325     ;       -----------------
                +1  7326     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7327     ;       -----------------
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   117

                +1  7328     
                +1  7329     
                +1  7330     ;       As usual for the 8051 the memory layout has the most significant
                +1  7331     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7332     ;       lowest address.
                +1  7333     
                +1  7334     ;       Calling conventions:
                +1  7335     
                +1  7336     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7337     ;
                +1  7338     ;       Return value is in r2-r5
                +1  7339     
                +1  7340     ;       Naming conventions: A routine name is constructed by
                +1  7341     
                +1  7342     ;             ASOP
                +1  7343     
                +1  7344     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7345     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7346     ;       Conversion routines are named
                +1  7347     
                +1  7348     ;               AStof
                +1  7349     
                +1  7350     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7351     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7352     ;       Conversion from float to integer is ftol.
                +1  7353     
                +1  7354     ;               .ORG  5000h
                +1  7355     ;               .CODE
                +1  7356     ;       seg     c_text
                +1  7357     
                +1  7358     ;;      $MOD812
----            +1  7359             CSEG
                +1  7360             ;ORG 1000h
                +1  7361     
                +1  7362                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7363             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7364     
                +1  7365     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7366     ;       macros
                +1  7367     
                +1  7368     saveregs        macro
                +1  7369             push    7
                +1  7370             push    6
                +1  7371             push    1
                +1  7372             push    0
                +1  7373             endm
                +1  7374     
                +1  7375     restregs        macro
                +1  7376             pop     0
                +1  7377             pop     1
                +1  7378             pop     6
                +1  7379             pop     7
                +1  7380             endm
                +1  7381     
                +1  7382     ;addr   
                +1  7383     dan     macro   pad
                +1  7384             mov     a,r5
                +1  7385             add     a,pad+3
                +1  7386             mov     pad+3,a
                +1  7387             mov     a,pad+2
                +1  7388             addc    a,r4
                +1  7389             mov     pad+2,a
                +1  7390             mov     a,pad+1
                +1  7391             addc    a,r3
                +1  7392             mov     pad+1,a
                +1  7393             mov     a,pad+0
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   118

                +1  7394             addc    a,r2
                +1  7395             mov     pad,a
                +1  7396             endm
                +1  7397     
                +1  7398     addl    macro  addr
                +1  7399             mov     a,r5
                +1  7400             add     a,addr+3
                +1  7401             mov     r5,a
                +1  7402             mov     a,addr+2
                +1  7403             addc    a,r4
                +1  7404             mov     r4,a
                +1  7405             mov     a,addr+1
                +1  7406             addc    a,r3
                +1  7407             mov     r3,a
                +1  7408             mov     a,addr+0
                +1  7409             addc    a,r2
                +1  7410             mov     r2,a
                +1  7411             endm
                +1  7412     
                +1  7413     
                +1  7414     add1    macro
                +1  7415             mov     a,r5
                +1  7416             add     a,#1
                +1  7417             mov     r5,a
                +1  7418             clr     a
                +1  7419             addc    a,r4
                +1  7420             mov     r4,a
                +1  7421             clr     a
                +1  7422             addc    a,r3
                +1  7423             mov     r3,a
                +1  7424             clr     a
                +1  7425             addc    a,r2
                +1  7426             mov     r2,a
                +1  7427             endm
                +1  7428     
                +1  7429     shfdn   macro  addr
                +1  7430             clr     c
                +1  7431             mov     a,addr
                +1  7432             rrc     a
                +1  7433             mov     addr,a
                +1  7434             mov     a,addr+1
                +1  7435             rrc     a
                +1  7436             mov     addr+1,a
                +1  7437             mov     a,addr+2
                +1  7438             rrc     a
                +1  7439             mov     addr+2,a
                +1  7440             mov     a,addr+3
                +1  7441             rrc     a
                +1  7442             mov     addr+3,a
                +1  7443             endm
                +1  7444     
                +1  7445     shfup   macro  addr
                +1  7446             clr     c
                +1  7447             mov     a,addr+3
                +1  7448             rlc     a
                +1  7449             mov     addr+3,a
                +1  7450             mov     a,addr+2
                +1  7451             rlc     a
                +1  7452             mov     addr+2,a
                +1  7453             mov     a,addr+1
                +1  7454             rlc     a
                +1  7455             mov     addr+1,a
                +1  7456             mov     a,addr
                +1  7457             rlc     a
                +1  7458             mov     addr,a
                +1  7459             endm
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   119

                +1  7460     
                +1  7461     rshift  macro
                +1  7462             clr     c
                +1  7463             mov     a,r2
                +1  7464             rrc     a
                +1  7465             mov     r2,a
                +1  7466             mov     a,r3
                +1  7467             rrc     a
                +1  7468             mov     r3,a
                +1  7469             mov     a,r4
                +1  7470             rrc     a
                +1  7471             mov     r4,a
                +1  7472             mov     a,r5
                +1  7473             rrc     a
                +1  7474             mov     r5,a
                +1  7475             endm
                +1  7476     rshift1 macro
                +1  7477             setb    c
                +1  7478             mov     a,r2
                +1  7479             rrc     a
                +1  7480             mov     r2,a
                +1  7481             mov     a,r3
                +1  7482             rrc     a
                +1  7483             mov     r3,a
                +1  7484             mov     a,r4
                +1  7485             rrc     a
                +1  7486             mov     r4,a
                +1  7487             mov     a,r5
                +1  7488             rrc     a
                +1  7489             mov     r5,a
                +1  7490             endm
                +1  7491     
                +1  7492     
                +1  7493     lshift  macro
                +1  7494             mov     a,r5
                +1  7495             rlc     a
                +1  7496             mov     r5,a
                +1  7497             mov     a,r4
                +1  7498             rlc     a
                +1  7499             mov     r4,a
                +1  7500             mov     a,r3
                +1  7501             rlc     a
                +1  7502             mov     r3,a
                +1  7503             mov     a,r2
                +1  7504             rlc     a
                +1  7505             mov     r2,a
                +1  7506             endm
                +1  7507     
                +1  7508     neg1    macro
                +1  7509             clr     c
                +1  7510             clr     a
                +1  7511             subb    a,r5
                +1  7512             mov     r5,a
                +1  7513             clr     a
                +1  7514             subb    a,r4
                +1  7515             mov     r4,a
                +1  7516             clr     a
                +1  7517             subb    a,r3
                +1  7518             mov     r3,a
                +1  7519             clr     a
                +1  7520             subb    a,r2
                +1  7521             mov     r2,a
                +1  7522             endm
                +1  7523     
                +1  7524     negm    macro  addr
                +1  7525             clr     c
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   120

                +1  7526             clr     a
                +1  7527             subb    a,addr+3
                +1  7528             mov     addr+3,a
                +1  7529             clr     a
                +1  7530             subb    a,addr+2
                +1  7531             mov     addr+2,a
                +1  7532             clr     a
                +1  7533             subb    a,addr+1
                +1  7534             mov     addr+1,a
                +1  7535             clr     a
                +1  7536             subb    a,addr
                +1  7537             mov     addr,a
                +1  7538             endm
                +1  7539     
                +1  7540     copytor macro  addr
                +1  7541             mov     r2,addr
                +1  7542             mov     r3,addr+1
                +1  7543             mov     r4,addr+2
                +1  7544             mov     r5,addr+3
                +1  7545             endm
                +1  7546     
                +1  7547     
                +1  7548     copyrto macro  addr
                +1  7549             mov     addr,r2
                +1  7550             mov     addr+1,r3
                +1  7551             mov     addr+2,r4
                +1  7552             mov     addr+3,r5
                +1  7553             endm
                +1  7554     
                +1  7555     
                +1  7556     ;       Internal representation: in this set of routines a floating number
                +1  7557     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7558     
                +1  7559     ;       Stack offset values
                +1  7560     ;ltemp   equ     28h
                +1  7561     
  0006          +1  7562     cntr    equ     6               ;r6 is the counter
  0007          +1  7563     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7564     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7565     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7566     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7567     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7568     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7569     
                +1  7570     
                +1  7571     
                +1  7572     
                +1  7573     
                +1  7574     ;DECSIZE EQU     10
                +1  7575     ;NUMSIZE EQU     4
                +1  7576     ;RR4     EQU     4
                +1  7577     ;RR5     EQU     5
                +1  7578     
                +1  7579     ;       unpack1 - unpacks the left operand
                +1  7580     
009E            +1  7581     unpack1:
009E EA         +1  7582             mov     a,r2            ;get sign
009F 5480       +1  7583             anl     a,#80h
00A1 530740     +1  7584             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7585             orl     sign,a          ;store sign
00A6 EB         +1  7586             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7587             rlc     a               ;rotate into carry
00A8 EA         +1  7588             mov     a,r2            ;get rest of exponent
00A9 33         +1  7589             rlc     a               ;and make it 8 bits
00AA F8         +1  7590             mov     r0,a            ;store it
00AB 6006       +1  7591             jz      zer1            ;if zero, the whole thing is zero
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   121

00AD 430380     +1  7592             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7593             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7594             ret
00B3            +1  7595     zer1:
00B3 E4         +1  7596             clr     a
00B4 FA         +1  7597             mov     r2,a
00B5 FB         +1  7598             mov     r3,a
00B6 FC         +1  7599             mov     r4,a
00B7 FD         +1  7600             mov     r5,a            ;zero mantissa
00B8 F8         +1  7601             mov     r0,a            ;zero exponent
00B9 22         +1  7602             ret
                +1  7603     
                +1  7604     ;       unpack2 - unpacks right operand
                +1  7605     
00BA            +1  7606     unpack2:
00BA E508       +1  7607             mov     a,ltemp         ;get sign
00BC 13         +1  7608             rrc     a               ;shift down
00BD 5440       +1  7609             anl     a,#40h          ;mask out sign
00BF 530780     +1  7610             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7611             orl     sign,a
00C4 E509       +1  7612             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7613             rlc     a               ;rotate into carry
00C7 E508       +1  7614             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7615             rlc     a               ;and make it 8 bits
00CA F9         +1  7616             mov     r1,a            ;store it
00CB 6007       +1  7617             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7618             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7619             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7620             ret
00D4            +1  7621     zer2:
00D4 E4         +1  7622             clr     a
00D5 F508       +1  7623             mov     ltemp,a
00D7 F509       +1  7624             mov     ltemp+1,a
00D9 F50A       +1  7625             mov     ltemp+2,a
00DB F50B       +1  7626             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7627             ret
                +1  7628     
                +1  7629     ;       pack1 - put operand 1 back into float format
                +1  7630     
00DE            +1  7631     pack1:
00DE E8         +1  7632             mov     a,r0            ;get exponent
00DF C3         +1  7633             clr     c
00E0 13         +1  7634             rrc     a               ;shift down 1 bit
00E1 530780     +1  7635             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7636             orl     a,r7            ;or in sign bit
00E5 FA         +1  7637             mov     r2,a            ;store
00E6 E8         +1  7638             mov     a,r0            ;get other bit
00E7 03         +1  7639             rr      a               ;rotate into hi bit
00E8 5480       +1  7640             anl     a,#80h          ;mask
00EA 53037F     +1  7641             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7642             orl     mant1+1,a       ;put in
00EF 22         +1  7643             ret
                +1  7644     
                +1  7645     
                +1  7646     ;       norm1 - normalize the unpacked value in 1
                +1  7647     
00F0            +1  7648     norm1:
00F0 E8         +1  7649             mov     a,r0            ;get exponent
00F1 60C0       +1  7650             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7651             mov     a,r2            ;get hi byte
00F4 6023       +1  7652             jz      norup           ;zero, so shift up if anything
00F6            +1  7653     nordn:
00F6 EA         +1  7654             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7655             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7656+3           add1                    ;add in a rounding bit
00FA ED         +1  7657+1           mov     a,r5
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   122

00FB 2401       +1  7658+1           add     a,#1
00FD FD         +1  7659+1           mov     r5,a
00FE E4         +1  7660+1           clr     a
00FF 3C         +1  7661+1           addc    a,r4
0100 FC         +1  7662+1           mov     r4,a
0101 E4         +1  7663+1           clr     a
0102 3B         +1  7664+1           addc    a,r3
0103 FB         +1  7665+1           mov     r3,a
0104 E4         +1  7666+1           clr     a
0105 3A         +1  7667+1           addc    a,r2
0106 FA         +1  7668+1           mov     r2,a
0107            +1  7669     nordn1:
                +1  7670+3           rshift                  ;shift down 1 bit
0107 C3         +1  7671+1           clr     c
0108 EA         +1  7672+1           mov     a,r2
0109 13         +1  7673+1           rrc     a
010A FA         +1  7674+1           mov     r2,a
010B EB         +1  7675+1           mov     a,r3
010C 13         +1  7676+1           rrc     a
010D FB         +1  7677+1           mov     r3,a
010E EC         +1  7678+1           mov     a,r4
010F 13         +1  7679+1           rrc     a
0110 FC         +1  7680+1           mov     r4,a
0111 ED         +1  7681+1           mov     a,r5
0112 13         +1  7682+1           rrc     a
0113 FD         +1  7683+1           mov     r5,a
0114 08         +1  7684             inc     r0              ;adjust exponent
0115 EA         +1  7685             mov     a,r2            ;test high byte
0116 70DE       +1  7686             jnz     nordn           ;loop
0118 22         +1  7687             ret                     ;done
                +1  7688     
0119            +1  7689     norup:
0119 4B         +1  7690             orl     a,r3
011A 4C         +1  7691             orl     a,r4
011B 4D         +1  7692             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7693             jz      zer1            ;it is - make it true zero
011E            +1  7694     norup1:
011E EB         +1  7695             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7696             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7697             clr     c
                +1  7698+3           lshift                  ;shift mantissa up
0123 ED         +1  7699+1           mov     a,r5
0124 33         +1  7700+1           rlc     a
0125 FD         +1  7701+1           mov     r5,a
0126 EC         +1  7702+1           mov     a,r4
0127 33         +1  7703+1           rlc     a
0128 FC         +1  7704+1           mov     r4,a
0129 EB         +1  7705+1           mov     a,r3
012A 33         +1  7706+1           rlc     a
012B FB         +1  7707+1           mov     r3,a
012C EA         +1  7708+1           mov     a,r2
012D 33         +1  7709+1           rlc     a
012E FA         +1  7710+1           mov     r2,a
012F 18         +1  7711             dec     r0              ;adjust exponent
0130 80EC       +1  7712             jmp     norup1
0132            +1  7713     norup2:
0132 22         +1  7714             ret                     ;finito
                +1  7715     
                +1  7716     
                +1  7717     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7718     ;       exponents are equal. This requires the smaller number to have
                +1  7719     ;       its exponent incremented and its mantissa shifted right.
                +1  7720     
0133            +1  7721     denorm:
0133 E8         +1  7722             mov     a,r0
0134 C3         +1  7723             clr     c
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   123

0135 99         +1  7724             subb    a,r1            ;compare exponents
0136 5029       +1  7725             jnc     up2a            ;shift operand 2
0138            +1  7726     up1:
0138 08         +1  7727             inc     r0              ;increment exponent
                +1  7728+3           rshift                  ;shift mantissa down
0139 C3         +1  7729+1           clr     c
013A EA         +1  7730+1           mov     a,r2
013B 13         +1  7731+1           rrc     a
013C FA         +1  7732+1           mov     r2,a
013D EB         +1  7733+1           mov     a,r3
013E 13         +1  7734+1           rrc     a
013F FB         +1  7735+1           mov     r3,a
0140 EC         +1  7736+1           mov     a,r4
0141 13         +1  7737+1           rrc     a
0142 FC         +1  7738+1           mov     r4,a
0143 ED         +1  7739+1           mov     a,r5
0144 13         +1  7740+1           rrc     a
0145 FD         +1  7741+1           mov     r5,a
0146 E8         +1  7742             mov     a,r0
0147 B501EE     +1  7743             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7744             ret
                +1  7745     
014B            +1  7746     up2:
014B 09         +1  7747             inc     r1              ;increment exponent 2
                +1  7748+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7749+1           clr     c
014D E508       +1  7750+1           mov     a,mant2
014F 13         +1  7751+1           rrc     a
0150 F508       +1  7752+1           mov     mant2,a
0152 E509       +1  7753+1           mov     a,mant2+1
0154 13         +1  7754+1           rrc     a
0155 F509       +1  7755+1           mov     mant2+1,a
0157 E50A       +1  7756+1           mov     a,mant2+2
0159 13         +1  7757+1           rrc     a
015A F50A       +1  7758+1           mov     mant2+2,a
015C E50B       +1  7759+1           mov     a,mant2+3
015E 13         +1  7760+1           rrc     a
015F F50B       +1  7761+1           mov     mant2+3,a
0161            +1  7762     up2a:
0161 E8         +1  7763             mov     a,r0            ;compare exponents
0162 B501E6     +1  7764             cjne    a,exp2,up2
0165 22         +1  7765             ret                     ;all done
                +1  7766     ;------------------------------------------------------------------
                +1  7767     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7768     
0166            +1  7769     fladd:
                +1  7770+3           saveregs
0166 C007       +1  7771+1           push    7
0168 C006       +1  7772+1           push    6
016A C001       +1  7773+1           push    1
016C C000       +1  7774+1           push    0
016E 119E       +1  7775             call    unpack1
0170 11BA       +1  7776             call    unpack2
0172 3133       +1  7777             call    denorm
0174 E507       +1  7778             mov     a,sign
0176 30E70D     +1  7779             jnb     acc.7,ok1       ;test left sign
                +1  7780+3           neg1                    ;negate op1
0179 C3         +1  7781+1           clr     c
017A E4         +1  7782+1           clr     a
017B 9D         +1  7783+1           subb    a,r5
017C FD         +1  7784+1           mov     r5,a
017D E4         +1  7785+1           clr     a
017E 9C         +1  7786+1           subb    a,r4
017F FC         +1  7787+1           mov     r4,a
0180 E4         +1  7788+1           clr     a
0181 9B         +1  7789+1           subb    a,r3
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   124

0182 FB         +1  7790+1           mov     r3,a
0183 E4         +1  7791+1           clr     a
0184 9A         +1  7792+1           subb    a,r2
0185 FA         +1  7793+1           mov     r2,a
0186            +1  7794     ok1:
0186 E507       +1  7795             mov     a,sign
0188 30E615     +1  7796             jnb     acc.6,ok2       ;test right sign
                +1  7797+3           negm    mant2           ;negate op2
018B C3         +1  7798+1           clr     c
018C E4         +1  7799+1           clr     a
018D 950B       +1  7800+1           subb    a,mant2+3
018F F50B       +1  7801+1           mov     mant2+3,a
0191 E4         +1  7802+1           clr     a
0192 950A       +1  7803+1           subb    a,mant2+2
0194 F50A       +1  7804+1           mov     mant2+2,a
0196 E4         +1  7805+1           clr     a
0197 9509       +1  7806+1           subb    a,mant2+1
0199 F509       +1  7807+1           mov     mant2+1,a
019B E4         +1  7808+1           clr     a
019C 9508       +1  7809+1           subb    a,mant2
019E F508       +1  7810+1           mov     mant2,a
01A0            +1  7811     ok2:
                +1  7812+3           addl    mant2           ;add mantissas
01A0 ED         +1  7813+1           mov     a,r5
01A1 250B       +1  7814+1           add     a,mant2+3
01A3 FD         +1  7815+1           mov     r5,a
01A4 E50A       +1  7816+1           mov     a,mant2+2
01A6 3C         +1  7817+1           addc    a,r4
01A7 FC         +1  7818+1           mov     r4,a
01A8 E509       +1  7819+1           mov     a,mant2+1
01AA 3B         +1  7820+1           addc    a,r3
01AB FB         +1  7821+1           mov     r3,a
01AC E508       +1  7822+1           mov     a,mant2+0
01AE 3A         +1  7823+1           addc    a,r2
01AF FA         +1  7824+1           mov     r2,a
01B0 E4         +1  7825             clr     a
01B1 FF         +1  7826             mov     r7,a            ;clear sign
01B2 EA         +1  7827             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7828             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7829             mov     r7,a            ;store sign
                +1  7830+3           neg1                    ;negate mantissa
01B7 C3         +1  7831+1           clr     c
01B8 E4         +1  7832+1           clr     a
01B9 9D         +1  7833+1           subb    a,r5
01BA FD         +1  7834+1           mov     r5,a
01BB E4         +1  7835+1           clr     a
01BC 9C         +1  7836+1           subb    a,r4
01BD FC         +1  7837+1           mov     r4,a
01BE E4         +1  7838+1           clr     a
01BF 9B         +1  7839+1           subb    a,r3
01C0 FB         +1  7840+1           mov     r3,a
01C1 E4         +1  7841+1           clr     a
01C2 9A         +1  7842+1           subb    a,r2
01C3 FA         +1  7843+1           mov     r2,a
01C4            +1  7844     ok3:
01C4 11F0       +1  7845             call    norm1
01C6 11DE       +1  7846             call    pack1           ;pack normalized result
                +1  7847+3           restregs                ;and return
01C8 D000       +1  7848+1           pop     0
01CA D001       +1  7849+1           pop     1
01CC D006       +1  7850+1           pop     6
01CE D007       +1  7851+1           pop     7
01D0 22         +1  7852             ret
                +1  7853     ;-------------------------------------------------------------
                +1  7854     ;       Subtract the number ltemp from the number in r2-r5
                +1  7855     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   125

01D1            +1  7856     flsub:
01D1 630880     +1  7857             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7858             jmp     fladd           ;and add!
                +1  7859     
                +1  7860     ;================================================================
                +1  7861     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7862     
01D6            +1  7863     flcmp:
01D6 EA         +1  7864            mov     a,r2            ;get sign of left
01D7 6508       +1  7865            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7866            jnb     acc.7,cexp      ;same, go check exponent
                +1  7867     ;ifdef SMALL_MODEL
01DC EA         +1  7868             mov     a,r2            ;get sign of left again
01DD 33         +1  7869             rlc     a
01DE 5001       +1  7870             jnc     flout
                +1  7871     ;endif
01E0 D3         +1  7872             setb    c
01E1 22         +1  7873     flout:          ret                    ;return with acc < 0
                +1  7874     
01E2            +1  7875     cexp:
01E2 C3         +1  7876            clr     c
01E3 EA         +1  7877            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7878            subb    a,ltemp
01E6 7010       +1  7879            jnz     fnd
01E8 EB         +1  7880            mov     a,r3
01E9 9509       +1  7881            subb    a,ltemp+1
01EB 700B       +1  7882            jnz     fnd
01ED EC         +1  7883            mov     a,r4
01EE 950A       +1  7884            subb    a,ltemp+2
01F0 7006       +1  7885            jnz     fnd
01F2 ED         +1  7886            mov     a,r5
01F3 950B       +1  7887            subb    a,ltemp+3
01F5 7001       +1  7888            jnz     fnd
01F7            +1  7889     cdone:
01F7 22         +1  7890            ret                     ;return with acc == 0
01F8            +1  7891     fnd:
01F8 8AF0       +1  7892           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7893          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7894            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7895                         orl         a,#1                          ;make non-zero
0201 B3         +1  7896             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7897             ret
                +1  7898     ;==============================================================
                +1  7899     
                +1  7900     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7901     ;       the result in r2-r5
                +1  7902     
0203            +1  7903     flmul:
                +1  7904+3           saveregs
0203 C007       +1  7905+1           push    7
0205 C006       +1  7906+1           push    6
0207 C001       +1  7907+1           push    1
0209 C000       +1  7908+1           push    0
020B 119E       +1  7909             call    unpack1
020D 11BA       +1  7910             call    unpack2
020F E4         +1  7911             clr     a
0210 F50C       +1  7912             mov     prod,a
0212 F50D       +1  7913             mov     prod+1,a        ;clear product
0214 F50E       +1  7914             mov     prod+2,a
0216 F50F       +1  7915             mov     prod+3,a
0218 7E07       +1  7916             mov     r6,#7           ;initialize counter
021A            +1  7917     mup1:
                +1  7918+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7919+1           clr     c
021B E508       +1  7920+1           mov     a,mant2
021D 13         +1  7921+1           rrc     a
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   126

021E F508       +1  7922+1           mov     mant2,a
0220 E509       +1  7923+1           mov     a,mant2+1
0222 13         +1  7924+1           rrc     a
0223 F509       +1  7925+1           mov     mant2+1,a
0225 E50A       +1  7926+1           mov     a,mant2+2
0227 13         +1  7927+1           rrc     a
0228 F50A       +1  7928+1           mov     mant2+2,a
022A E50B       +1  7929+1           mov     a,mant2+3
022C 13         +1  7930+1           rrc     a
022D F50B       +1  7931+1           mov     mant2+3,a
022F 5014       +1  7932             jnc     nobit           ;skip if lsb was zero
                +1  7933+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7934+1           mov     a,r5
0232 250F       +1  7935+1           add     a,prod+3
0234 F50F       +1  7936+1           mov     prod+3,a
0236 E50E       +1  7937+1           mov     a,prod+2
0238 3C         +1  7938+1           addc    a,r4
0239 F50E       +1  7939+1           mov     prod+2,a
023B E50D       +1  7940+1           mov     a,prod+1
023D 3B         +1  7941+1           addc    a,r3
023E F50D       +1  7942+1           mov     prod+1,a
0240 E50C       +1  7943+1           mov     a,prod+0
0242 3A         +1  7944+1           addc    a,r2
0243 F50C       +1  7945+1           mov     prod,a
0245            +1  7946     nobit:
                +1  7947+3           lshift                  ;shift multiplicand up
0245 ED         +1  7948+1           mov     a,r5
0246 33         +1  7949+1           rlc     a
0247 FD         +1  7950+1           mov     r5,a
0248 EC         +1  7951+1           mov     a,r4
0249 33         +1  7952+1           rlc     a
024A FC         +1  7953+1           mov     r4,a
024B EB         +1  7954+1           mov     a,r3
024C 33         +1  7955+1           rlc     a
024D FB         +1  7956+1           mov     r3,a
024E EA         +1  7957+1           mov     a,r2
024F 33         +1  7958+1           rlc     a
0250 FA         +1  7959+1           mov     r2,a
0251 DEC7       +1  7960             djnz    r6,mup1         ;loop if more
                +1  7961     
0253 7E11       +1  7962             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7963             sjmp    mup3
0257            +1  7964     mup11:
                +1  7965+3           shfdn   prod            ;shift product right
0257 C3         +1  7966+1           clr     c
0258 E50C       +1  7967+1           mov     a,prod
025A 13         +1  7968+1           rrc     a
025B F50C       +1  7969+1           mov     prod,a
025D E50D       +1  7970+1           mov     a,prod+1
025F 13         +1  7971+1           rrc     a
0260 F50D       +1  7972+1           mov     prod+1,a
0262 E50E       +1  7973+1           mov     a,prod+2
0264 13         +1  7974+1           rrc     a
0265 F50E       +1  7975+1           mov     prod+2,a
0267 E50F       +1  7976+1           mov     a,prod+3
0269 13         +1  7977+1           rrc     a
026A F50F       +1  7978+1           mov     prod+3,a
026C            +1  7979     mup3:
                +1  7980+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7981+1           clr     c
026D E508       +1  7982+1           mov     a,mant2
026F 13         +1  7983+1           rrc     a
0270 F508       +1  7984+1           mov     mant2,a
0272 E509       +1  7985+1           mov     a,mant2+1
0274 13         +1  7986+1           rrc     a
0275 F509       +1  7987+1           mov     mant2+1,a
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   127

0277 E50A       +1  7988+1           mov     a,mant2+2
0279 13         +1  7989+1           rrc     a
027A F50A       +1  7990+1           mov     mant2+2,a
027C E50B       +1  7991+1           mov     a,mant2+3
027E 13         +1  7992+1           rrc     a
027F F50B       +1  7993+1           mov     mant2+3,a
0281 5014       +1  7994             jnc     mup2            ;skip if bit not set
                +1  7995+3           dan     prod            ;add to prod
0283 ED         +1  7996+1           mov     a,r5
0284 250F       +1  7997+1           add     a,prod+3
0286 F50F       +1  7998+1           mov     prod+3,a
0288 E50E       +1  7999+1           mov     a,prod+2
028A 3C         +1  8000+1           addc    a,r4
028B F50E       +1  8001+1           mov     prod+2,a
028D E50D       +1  8002+1           mov     a,prod+1
028F 3B         +1  8003+1           addc    a,r3
0290 F50D       +1  8004+1           mov     prod+1,a
0292 E50C       +1  8005+1           mov     a,prod+0
0294 3A         +1  8006+1           addc    a,r2
0295 F50C       +1  8007+1           mov     prod,a
0297            +1  8008     mup2:
0297 DEBE       +1  8009             djnz    r6,mup11        ;loop if more
0299 E8         +1  8010             mov     a,r0            ;get exp1
029A 29         +1  8011             add     a,r1            ;add exp2
029B 247A       +1  8012             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8013             mov     r0,a            ;store
029E EF         +1  8014             mov     a,r7            ;get sign
029F 23         +1  8015             rl      a               ;rotate bit into msb
02A0 6207       +1  8016             xrl     sign,a          ;xor with other bit
                +1  8017+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8018+1           mov     r2,prod
02A4 AB0D       +1  8019+1           mov     r3,prod+1
02A6 AC0E       +1  8020+1           mov     r4,prod+2
02A8 AD0F       +1  8021+1           mov     r5,prod+3
02AA 11F0       +1  8022             call    norm1           ;normalize
02AC 11DE       +1  8023             call    pack1
                +1  8024+3           restregs
02AE D000       +1  8025+1           pop     0
02B0 D001       +1  8026+1           pop     1
02B2 D006       +1  8027+1           pop     6
02B4 D007       +1  8028+1           pop     7
02B6 22         +1  8029             ret
                +1  8030     ;-----------------------------------------------------------
                +1  8031     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8032     
02B7            +1  8033     fldiv:
                +1  8034+3           saveregs
02B7 C007       +1  8035+1           push    7
02B9 C006       +1  8036+1           push    6
02BB C001       +1  8037+1           push    1
02BD C000       +1  8038+1           push    0
02BF 119E       +1  8039             call    unpack1
02C1 11BA       +1  8040             call    unpack2
02C3 E4         +1  8041             clr     a
02C4 F50C       +1  8042             mov     prod,a
02C6 F50D       +1  8043             mov     prod+1,a
02C8 F50E       +1  8044             mov     prod+2,a
02CA F50F       +1  8045             mov     prod+3,a
02CC E9         +1  8046             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8047             jz      div9
02CF E8         +1  8048             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8049             jz      div9
02D2 C3         +1  8050             clr     c
02D3 99         +1  8051             subb    a,r1            ;compute new exponent
02D4 2478       +1  8052             add     a,#127-7        ;unbias
02D6 F8         +1  8053             mov     r0,a            ;store back
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   128

02D7 EF         +1  8054             mov     a,r7            ;get sign
02D8 23         +1  8055             rl      a
02D9 6207       +1  8056             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8057             mov     r6,#24+7        ;initialize counter
02DD            +1  8058     div1:
                +1  8059+3           shfup   prod            ;shift quotient up
02DD C3         +1  8060+1           clr     c
02DE E50F       +1  8061+1           mov     a,prod+3
02E0 33         +1  8062+1           rlc     a
02E1 F50F       +1  8063+1           mov     prod+3,a
02E3 E50E       +1  8064+1           mov     a,prod+2
02E5 33         +1  8065+1           rlc     a
02E6 F50E       +1  8066+1           mov     prod+2,a
02E8 E50D       +1  8067+1           mov     a,prod+1
02EA 33         +1  8068+1           rlc     a
02EB F50D       +1  8069+1           mov     prod+1,a
02ED E50C       +1  8070+1           mov     a,prod
02EF 33         +1  8071+1           rlc     a
02F0 F50C       +1  8072+1           mov     prod,a
02F2 C3         +1  8073             clr     c
02F3 EA         +1  8074             mov     a,r2            ;compare values
02F4 9508       +1  8075             subb    a,mant2
02F6 4028       +1  8076             jc      div2            ;skip if bigger
02F8 7013       +1  8077             jnz     div3
02FA EB         +1  8078             mov     a,r3            ;compare values
02FB 9509       +1  8079             subb    a,mant2+1
02FD 4021       +1  8080             jc      div2            ;skip if bigger
02FF 700C       +1  8081             jnz     div3
0301 EC         +1  8082             mov     a,r4            ;compare values
0302 950A       +1  8083             subb    a,mant2+2
0304 401A       +1  8084             jc      div2            ;skip if bigger
0306 7005       +1  8085             jnz     div3
0308 ED         +1  8086             mov     a,r5            ;compare values
0309 950B       +1  8087             subb    a,mant2+3
030B 4013       +1  8088             jc      div2            ;skip if bigger
030D            +1  8089     div3:
030D ED         +1  8090             mov     a,r5
030E 950B       +1  8091             subb    a,mant2+3
0310 FD         +1  8092             mov     r5,a
0311 EC         +1  8093             mov     a,r4
0312 950A       +1  8094             subb    a,mant2+2               ;do subtraction
0314 FC         +1  8095             mov     r4,a
0315 EB         +1  8096             mov     a,r3
0316 9509       +1  8097             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8098             mov     r3,a
0319 EA         +1  8099             mov     a,r2
031A 9508       +1  8100             subb    a,mant2         ;do subtraction
031C FA         +1  8101             mov     r2,a
031D 430F01     +1  8102             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8103     div2:
                +1  8104+3           lshift                  ;shift dividend up
0320 ED         +1  8105+1           mov     a,r5
0321 33         +1  8106+1           rlc     a
0322 FD         +1  8107+1           mov     r5,a
0323 EC         +1  8108+1           mov     a,r4
0324 33         +1  8109+1           rlc     a
0325 FC         +1  8110+1           mov     r4,a
0326 EB         +1  8111+1           mov     a,r3
0327 33         +1  8112+1           rlc     a
0328 FB         +1  8113+1           mov     r3,a
0329 EA         +1  8114+1           mov     a,r2
032A 33         +1  8115+1           rlc     a
032B FA         +1  8116+1           mov     r2,a
032C DEAF       +1  8117             djnz    r6,div1         ;loop if more
                +1  8118+3           copytor prod            ;copy quotient
032E AA0C       +1  8119+1           mov     r2,prod
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   129

0330 AB0D       +1  8120+1           mov     r3,prod+1
0332 AC0E       +1  8121+1           mov     r4,prod+2
0334 AD0F       +1  8122+1           mov     r5,prod+3
0336            +1  8123     div9:
0336 11F0       +1  8124             call    norm1           ;now normalize result
0338 11DE       +1  8125             call    pack1           ;pack it up
                +1  8126+3           restregs                ;restore registers
033A D000       +1  8127+1           pop     0
033C D001       +1  8128+1           pop     1
033E D006       +1  8129+1           pop     6
0340 D007       +1  8130+1           pop     7
0342 22         +1  8131             ret
                +1  8132     ;------------------------------------------------------------------
                +1  8133     
                +1  8134     ;       Float to long conversion: if the exponent is less than the
                +1  8135     ;       excess value, the result is zero. If the exponent is so large
                +1  8136     ;       that the value would be shifted out, the result is overflow.
                +1  8137     ;       Otherwise shift the mantissa up or down as required.
                +1  8138     
0343            +1  8139     ftol:
                +1  8140+3           saveregs
0343 C007       +1  8141+1           push    7
0345 C006       +1  8142+1           push    6
0347 C001       +1  8143+1           push    1
0349 C000       +1  8144+1           push    0
034B EA         +1  8145             mov     a,r2
034C B4BF09     +1  8146             cjne    a,#0bfh,ne05
034F EB         +1  8147             mov     a,r3
0350 7006       +1  8148             jnz     ne05
0352 EC         +1  8149             mov     a,r4
0353 7003       +1  8150             jnz     ne05
0355 ED         +1  8151             mov     a,r5
0356 6024       +1  8152             jz      ftol1
0358 119E       +1  8153     ne05:   call    unpack1
035A E8         +1  8154             mov     a,r0            ;get exponent
035B 2482       +1  8155             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8156             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8157             mov     a,r7            ;get sign
0361 30E70D     +1  8158             jnb     acc.7,ftol4     ;skip if +ve
                +1  8159+3           neg1                    ;negate it
0364 C3         +1  8160+1           clr     c
0365 E4         +1  8161+1           clr     a
0366 9D         +1  8162+1           subb    a,r5
0367 FD         +1  8163+1           mov     r5,a
0368 E4         +1  8164+1           clr     a
0369 9C         +1  8165+1           subb    a,r4
036A FC         +1  8166+1           mov     r4,a
036B E4         +1  8167+1           clr     a
036C 9B         +1  8168+1           subb    a,r3
036D FB         +1  8169+1           mov     r3,a
036E E4         +1  8170+1           clr     a
036F 9A         +1  8171+1           subb    a,r2
0370 FA         +1  8172+1           mov     r2,a
0371            +1  8173     ftol4:
0371 E8         +1  8174             mov     a,r0            ;get exponent
0372 246A       +1  8175             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8176             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8177             mov     r0,a            ;save it
0378 24F8       +1  8178             add     a,#-8           ;if > 8, too big
037A 500E       +1  8179             jnc     ftol3
037C            +1  8180     ftol1:
037C E4         +1  8181             clr     a
037D FA         +1  8182             mov     r2,a
037E FB         +1  8183             mov     r3,a
037F FC         +1  8184             mov     r4,a
0380 FD         +1  8185             mov     r5,a
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   130

0381            +1  8186     ftol9:
                +1  8187+3           restregs
0381 D000       +1  8188+1           pop     0
0383 D001       +1  8189+1           pop     1
0385 D006       +1  8190+1           pop     6
0387 D007       +1  8191+1           pop     7
0389 22         +1  8192             ret
038A            +1  8193     ftol3:
038A E8         +1  8194             mov     a,r0
038B FE         +1  8195             mov     r6,a            ;store in counter
038C 60F3       +1  8196             jz      ftol9           ;if zero, do nothing
038E            +1  8197     ftol33:
                +1  8198+3           lshift                  ;shift up
038E ED         +1  8199+1           mov     a,r5
038F 33         +1  8200+1           rlc     a
0390 FD         +1  8201+1           mov     r5,a
0391 EC         +1  8202+1           mov     a,r4
0392 33         +1  8203+1           rlc     a
0393 FC         +1  8204+1           mov     r4,a
0394 EB         +1  8205+1           mov     a,r3
0395 33         +1  8206+1           rlc     a
0396 FB         +1  8207+1           mov     r3,a
0397 EA         +1  8208+1           mov     a,r2
0398 33         +1  8209+1           rlc     a
0399 FA         +1  8210+1           mov     r2,a
039A DEF2       +1  8211             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8212             sjmp    ftol9
039E            +1  8213     ftol2:
039E F4         +1  8214             cpl     a               ;complement
039F FE         +1  8215             mov     r6,a
03A0 6022       +1  8216             jz      ftol22
03A2            +1  8217     ftol23:
03A2 EF         +1  8218             mov     a,r7
03A3 30E70F     +1  8219             jnb     acc.7,ftol24
                +1  8220+3           rshift1
03A6 D3         +1  8221+1           setb    c
03A7 EA         +1  8222+1           mov     a,r2
03A8 13         +1  8223+1           rrc     a
03A9 FA         +1  8224+1           mov     r2,a
03AA EB         +1  8225+1           mov     a,r3
03AB 13         +1  8226+1           rrc     a
03AC FB         +1  8227+1           mov     r3,a
03AD EC         +1  8228+1           mov     a,r4
03AE 13         +1  8229+1           rrc     a
03AF FC         +1  8230+1           mov     r4,a
03B0 ED         +1  8231+1           mov     a,r5
03B1 13         +1  8232+1           rrc     a
03B2 FD         +1  8233+1           mov     r5,a
03B3 800D       +1  8234             jmp     ftol25
03B5            +1  8235+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8236+1           clr     c
03B6 EA         +1  8237+1           mov     a,r2
03B7 13         +1  8238+1           rrc     a
03B8 FA         +1  8239+1           mov     r2,a
03B9 EB         +1  8240+1           mov     a,r3
03BA 13         +1  8241+1           rrc     a
03BB FB         +1  8242+1           mov     r3,a
03BC EC         +1  8243+1           mov     a,r4
03BD 13         +1  8244+1           rrc     a
03BE FC         +1  8245+1           mov     r4,a
03BF ED         +1  8246+1           mov     a,r5
03C0 13         +1  8247+1           rrc     a
03C1 FD         +1  8248+1           mov     r5,a
03C2 DEDE       +1  8249     ftol25: djnz    r6,ftol23
03C4            +1  8250     ftol22:
                +1  8251+3           add1                    ;round
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   131

03C4 ED         +1  8252+1           mov     a,r5
03C5 2401       +1  8253+1           add     a,#1
03C7 FD         +1  8254+1           mov     r5,a
03C8 E4         +1  8255+1           clr     a
03C9 3C         +1  8256+1           addc    a,r4
03CA FC         +1  8257+1           mov     r4,a
03CB E4         +1  8258+1           clr     a
03CC 3B         +1  8259+1           addc    a,r3
03CD FB         +1  8260+1           mov     r3,a
03CE E4         +1  8261+1           clr     a
03CF 3A         +1  8262+1           addc    a,r2
03D0 FA         +1  8263+1           mov     r2,a
03D1 EF         +1  8264             mov     a,r7
03D2 30E70F     +1  8265             jnb     acc.7,ftol26
                +1  8266+3           rshift1
03D5 D3         +1  8267+1           setb    c
03D6 EA         +1  8268+1           mov     a,r2
03D7 13         +1  8269+1           rrc     a
03D8 FA         +1  8270+1           mov     r2,a
03D9 EB         +1  8271+1           mov     a,r3
03DA 13         +1  8272+1           rrc     a
03DB FB         +1  8273+1           mov     r3,a
03DC EC         +1  8274+1           mov     a,r4
03DD 13         +1  8275+1           rrc     a
03DE FC         +1  8276+1           mov     r4,a
03DF ED         +1  8277+1           mov     a,r5
03E0 13         +1  8278+1           rrc     a
03E1 FD         +1  8279+1           mov     r5,a
03E2 809D       +1  8280             jmp     ftol9
03E4            +1  8281+3   ftol26: rshift
03E4 C3         +1  8282+1           clr     c
03E5 EA         +1  8283+1           mov     a,r2
03E6 13         +1  8284+1           rrc     a
03E7 FA         +1  8285+1           mov     r2,a
03E8 EB         +1  8286+1           mov     a,r3
03E9 13         +1  8287+1           rrc     a
03EA FB         +1  8288+1           mov     r3,a
03EB EC         +1  8289+1           mov     a,r4
03EC 13         +1  8290+1           rrc     a
03ED FC         +1  8291+1           mov     r4,a
03EE ED         +1  8292+1           mov     a,r5
03EF 13         +1  8293+1           rrc     a
03F0 FD         +1  8294+1           mov     r5,a
03F1 808E       +1  8295             jmp     ftol9
                +1  8296     
                +1  8297     ;       arithmetic integer to floating conversions
                +1  8298     
03F3            +1  8299     abtof:
03F3 ED         +1  8300             mov     a,r5
03F4 23         +1  8301             rl      a
03F5 FC         +1  8302             mov     r4,a
03F6 9C         +1  8303             subb    a,r4
03F7 FC         +1  8304             mov     r4,a
03F8 FB         +1  8305             mov     r3,a
03F9 FA         +1  8306             mov     r2,a
03FA 8006       +1  8307             jmp     altof
03FC            +1  8308     awtof:
03FC EC         +1  8309             mov     a,r4
03FD 23         +1  8310             rl      a
03FE FB         +1  8311             mov     r3,a
03FF 9B         +1  8312             subb    a,r3
0400 FB         +1  8313             mov     r3,a
0401 FA         +1  8314             mov     r2,a
0402            +1  8315     altof:
                +1  8316+3           saveregs
0402 C007       +1  8317+1           push    7
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   132

0404 C006       +1  8318+1           push    6
0406 C001       +1  8319+1           push    1
0408 C000       +1  8320+1           push    0
040A EA         +1  8321             mov     a,r2            ;get sign
040B 5480       +1  8322             anl     a,#80h
040D FF         +1  8323             mov     r7,a            ;store it
040E 30E70D     +1  8324             jnb     acc.7,altof1    ;skip if +ve
                +1  8325+3           neg1
0411 C3         +1  8326+1           clr     c
0412 E4         +1  8327+1           clr     a
0413 9D         +1  8328+1           subb    a,r5
0414 FD         +1  8329+1           mov     r5,a
0415 E4         +1  8330+1           clr     a
0416 9C         +1  8331+1           subb    a,r4
0417 FC         +1  8332+1           mov     r4,a
0418 E4         +1  8333+1           clr     a
0419 9B         +1  8334+1           subb    a,r3
041A FB         +1  8335+1           mov     r3,a
041B E4         +1  8336+1           clr     a
041C 9A         +1  8337+1           subb    a,r2
041D FA         +1  8338+1           mov     r2,a
041E            +1  8339     altof1:
041E 7896       +1  8340             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8341             call    norm1           ;normalize it
0422 11DE       +1  8342             call    pack1           ;and pack up
                +1  8343+3           restregs
0424 D000       +1  8344+1           pop     0
0426 D001       +1  8345+1           pop     1
0428 D006       +1  8346+1           pop     6
042A D007       +1  8347+1           pop     7
042C 22         +1  8348             ret
                +1  8349     
042D            +1  8350     lbtof:
042D 7C00       +1  8351             mov     r4,#0
042F            +1  8352     lwtof:
042F E4         +1  8353             clr     a
0430 FB         +1  8354             mov     r3,a
0431 FA         +1  8355             mov     r2,a
0432            +1  8356     lltof:
                +1  8357+3           saveregs
0432 C007       +1  8358+1           push    7
0434 C006       +1  8359+1           push    6
0436 C001       +1  8360+1           push    1
0438 C000       +1  8361+1           push    0
043A 7F00       +1  8362             mov     r7,#0           ;zero sign
043C 80E0       +1  8363             sjmp    altof1
                +1  8364     
                +1  8365     ;-------------------------------------------------------
                +1  8366     
                +1  8367     
                    8368     
                    8369     ;$include (d:\amp\wriread.asm)
                +1  8370     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8371     cle256:          mov            IE,#00H
0441 75B601     +1  8372                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8373                              MOV            PSCTL,#03
                +1  8374                                             
0447 7400       +1  8375                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8376                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8377                                     mov             PSCTL,#00
044D 75B600     +1  8378                                 mov         FLSCL,#00
0450 75A880     +1  8379                               mov           IE,#80H
0453 22         +1  8380                                     ret
                +1  8381     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   133

                +1  8382     ;чтение памяти программ в r8..r11
                +1  8383     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8384     re4byte:        mov                     dph,r2
0456 8B82       +1  8385                                             mov                     dpl,r3
0458 E4         +1  8386                                             clr                     a
0459 93         +1  8387                                             movc            a,@a+dptr
045A F508       +1  8388                                             mov                     r8,a
045C A3         +1  8389                                             inc                     dptr
045D E4         +1  8390                                             clr                     a
045E 93         +1  8391                                             movc            a,@a+dptr
045F F509       +1  8392                                             mov                     r9,a
0461 A3         +1  8393                                             inc                     dptr
0462 E4         +1  8394                                             clr                     a
0463 93         +1  8395                                             movc            a,@a+dptr
0464 F50A       +1  8396                                             mov                     r10,a
0466 A3         +1  8397                                             inc                     dptr
0467 E4         +1  8398                                             clr                     a
0468 93         +1  8399                                             movc            a,@a+dptr
0469 F50B       +1  8400                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8401                                             ret
                +1  8402      ;чтение памяти программ в r2..r5
                +1  8403     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8404     rebyte2:        mov                     dph,r2
046E 8B82       +1  8405                                             mov                     dpl,r3
0470 E4         +1  8406                                             clr                     a
0471 93         +1  8407                                             movc            a,@a+dptr
0472 FA         +1  8408                                             mov                     r2,a
0473 A3         +1  8409                                             inc                     dptr
0474 E4         +1  8410                                             clr                     a
0475 93         +1  8411                                             movc            a,@a+dptr
0476 FB         +1  8412                                             mov                     r3,a
0477 A3         +1  8413                                             inc                     dptr
0478 E4         +1  8414                                             clr                     a
0479 93         +1  8415                                             movc            a,@a+dptr
047A FC         +1  8416                                             mov                     r4,a
047B A3         +1  8417                                             inc                     dptr
047C E4         +1  8418                                             clr                     a
047D 93         +1  8419                                             movc            a,@a+dptr
047E FD         +1  8420                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8421                                             ret
                +1  8422      
                +1  8423     
                +1  8424      ;r7-количество байт
                +1  8425     ;dptr-адр ячейки для записи
                +1  8426     ;r1-адр ячейки  внешнего озу
                +1  8427     
0480 75A800     +1  8428     wrpage:  mov            IE,#00H
0483 75B601     +1  8429     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8430                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8431                      movx           a,@r1
048A F0         +1  8432                      movx           @dptr,a                         ;wr
048B 758F00     +1  8433                      mov            PSCTL,#0
048E 75B600     +1  8434                      mov            FLSCL,#00
0491 A3         +1  8435                     inc                     dptr
0492 09         +1  8436                     inc                     r1
0493 DFEE       +1  8437                     djnz            r7,WW5
0495 75A880     +1  8438                     mov             IE,#80H
0498 22         +1  8439                     ret
                +1  8440                             
                +1  8441     
                +1  8442     
                +1  8443                                                             
                +1  8444     
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   134

                +1  8445     
                +1  8446     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8447     ;чтение памяти программ во внешнее озу
                +1  8448     ;вх-r2,r3-адр яч памяти прогр
                +1  8449     ;r1- яч внешнее озу
0499 8A83       +1  8450     copyPP:         mov                     dph,r2
049B 8B82       +1  8451                                             mov                     dpl,r3
049D 7FFF       +1  8452                                             mov                     r7,#0ffh
049F E4         +1  8453     copy1:          clr                     a
04A0 93         +1  8454                                             movc            a,@a+dptr
04A1 F3         +1  8455                                             movx                    @r1,a
04A2 A3         +1  8456                                             inc                     dptr
04A3 09         +1  8457                                             inc                     r1
04A4 DFF9       +1  8458                                             djnz            r7,copy1
04A6 22         +1  8459                                             ret
                +1  8460     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8461     
                +1  8462                                     
                +1  8463     
                +1  8464     ;r8..r11->@r0..@r0+3
                +1  8465     ;r0-адр ячейки
                +1  8466     ;сохранить в ячейке озу
04A7 E508       +1  8467     savelte:        mov     a,ltemp
04A9 F6         +1  8468                                             mov     @r0,a
04AA 08         +1  8469                                             inc     r0
04AB E509       +1  8470                                             mov     a,ltemp+1
04AD F6         +1  8471                                             mov     @r0,a
04AE 08         +1  8472                                             inc     r0
04AF E50A       +1  8473                                             mov     a,ltemp+2
04B1 F6         +1  8474                                             mov     @r0,a
04B2 08         +1  8475                                             inc     r0
04B3 E50B       +1  8476                                             mov     a,ltemp+3
04B5 F6         +1  8477                                             mov     @r0,a
04B6 22         +1  8478                                             ret
                +1  8479     
                +1  8480     ;
                +1  8481     
                +1  8482     
                +1  8483     
                +1  8484     
                +1  8485     
                +1  8486                     
                +1  8487     
                +1  8488     
                +1  8489     
                +1  8490     
                +1  8491      
                    8492     
                    8493                                                   
                    8494     END
                                                                             
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   135

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03B1H   R   SEG=MAIN   868#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1476 1533 1558 1579 1583 1586 1587 1589 1677 1682 3684 3698 3779
                                           3782 3825 3920 3964 3967 4044 4048 4049 4050 4053 4296 4333 4334 4336 4413
                                           4433 4524 4528 4571 4574 4943 4948 5133 5138 5935 6097 6100
ABRET. . . . . . .  C ADDR   2492H   R   SEG=MAIN   5864 5866#
ABTOF. . . . . . .  C ADDR   03F3H   A      8299#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 682 699 746 754 762 770 772 792 1147 1158 1166 1245 1814 1823 1832
                                           1841 1862 2260 2285 2290 2294 2299 2302 2305 2308 2311 2500 2561 2607 2618
                                           2706 2715 2723 2732 2873 2931 2956 2961 2965 2968 2971 2974 2977 2980 3319
                                           3407 3453 3475 3494 3516 3567 4473 4479 4516 4605 5438 6527 6706 6784 6787
                                           7044 7696 7779 7796 7828 7866 7894 8156 8158 8176 8219 8265 8324
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2C57H   R   SEG=MAIN   903 940 942 944 946 948 950 952 954 956 1022 1024 1026 1028 1030
                                           1032 1034 1036 1038 1041 1043 1045 1047 1049 1051 1053 1055 1057 1059 1078
                                           1080 1082 7285#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1532 1544 1548 1563 1588 1591 1592 1681 1685 3697 3701 3776 3780
                                           3822 3826 3917 3921 3966 3970 4052 4065 4306 4320 4322 4324 4335 4338 4423
                                           4434 4529 4575 4947 4951 5137 5141 5736 5755 5773 5836 5853 6099 6102 6448
                                           6480
ADRBLOK. . . . . .  C ADDR   290BH   R   SEG=MAIN   3391 3414 3795 3938 4836 4865 4993 5052 5162 5222 6492#
AFTERK . . . . . .  C ADDR   06A8H   R   SEG=MAIN   1175 1254#
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   634# 637
AGE9 . . . . . . .  C ADDR   086EH   R   SEG=MAIN   1480# 1483
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   643# 645
ALLSUM . . . . . .  C ADDR   034FH   R   SEG=MAIN   812# 847 865 881
ALMUL. . . . . . .  C ADDR   2B9EH   R   SEG=MAIN   7131#
ALTOF. . . . . . .  C ADDR   0402H   A      1141 1239 1270 1278 1296 1312 1323 1340 1353 1438 1974 2084 2164 2202
                                           3829 3926 4437 4532 4578 4677 4755 4763 4781 4906 4918 4933 5036 5098 5114
                                           5206 5268 5283 8307 8315#
ALTOF1 . . . . . .  C ADDR   041EH   A      8324 8339# 8363
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   060EH   R   SEG=MAIN   1139 1155#
AN_T7. . . . . . .  C ADDR   11FFH   R   SEG=MAIN   2981# 3056 3066
AUTOKA . . . . . .  C ADDR   0C78H   R   SEG=MAIN   1173 2132#
AVPGO. . . . . . .  C ADDR   07D9H   R   SEG=MAIN   1400 1402#
AVTDEC1. . . . . .  C ADDR   066AH   R   SEG=MAIN   1208 1217#
AWTOF. . . . . . .  C ADDR   03FCH   A      8308#
B. . . . . . . . .  D ADDR   00F0H   A      122# 5583 5955 7134 7137 7139 7143 7147 7151 7155 7160 7164 7171 7175
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   136

                                           7179 7185 7189 7193 7199 7892 7893
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 462#
BFORM. . . . . . .  C ADDR   2848H   R   SEG=MAIN   6297 6302 6314# 6340
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4673 4729 4828
BIN30. . . . . . .  C ADDR   29BAH   R   SEG=MAIN   6694# 6720
BIN31. . . . . . .  C ADDR   29BEH   R   SEG=MAIN   6699# 6703
BIN32. . . . . . .  C ADDR   29CEH   R   SEG=MAIN   6712# 6717
BIN41. . . . . . .  C ADDR   29DFH   R   SEG=MAIN   6728# 6738
BINDEC . . . . . .  C ADDR   29AEH   R   SEG=MAIN   1534 1590 1683 3699 3968 4054 4337 4949 5139 6101 6673#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1768 1769 1772
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1366 1599 1758 3044 3045 3047
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1794 1918 2105 2132 2320 2321 2329 6528
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1264 1704 1711 1776 2371 3015 3031 4209 5502
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 583 714 1604 2291 2373 2458 2493 2524 2962 3018 3142 3165 3240 3271
                                           3296 3410 3534 3799 3847 3875 4036 4164 4210 4257 4369 4446 4560
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1333 1792 2296 3017 3035 3043 3050 4444 4743
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1089 1092 6280
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1667 2700 3274 3292 3308 3409 3533 3800 3846 4035
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1666 2523 2631 3019 3295 3855 3874 4169 4211 4256 4368 4443
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2600 2784 2884 3208 3596 3736 3749 4275 4402 4508 4609 6020 6046
                                           6071 6083 6146 6153 6159 6165
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1414 1623 1739 2360 3064 3068 3069 3076
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 658 1607 1664 3020
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4175 4744
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1917
BITPRER. . . . . .  B ADDR   0023H.4 A      358#
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1663 2459 2494 2497 3083 3241
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 527 531 2667 2672 2678 4153 4158 4239 4252 4374 4378 4383
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1364 1380 1423 2314 2316 2372 2522 3014 3134 3141 3294 4559
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1422 1662 2315 2374 2384 2521 2529 3101 3133 3164 3293 4558
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 683 729
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4579 5862 5865
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1415 1624 2032 2035 2419
BLOIN. . . . . . .  C ADDR   16B7H   R   SEG=MAIN   3704# 3709
BLOKVV . . . . . .  C ADDR   1689H   R   SEG=MAIN   3674#
BLOKVVC. . . . . .  C ADDR   1693H   R   SEG=MAIN   3677 3680#
BL_LI. . . . . . .  C ADDR   1654H   R   SEG=MAIN   3624 3632#
BONPART. . . . . .  C ADDR   0C48H   R   SEG=MAIN   2104#
BOUT7. . . . . . .  C ADDR   13D8H   R   SEG=MAIN   3251# 3253
BRET . . . . . . .  C ADDR   22D3H   R   SEG=MAIN   5523 5528 5532#
BUFDEC . . . . . .  C ADDR   09B6H   R   SEG=MAIN   1688# 1693
BUFIND . . . . . .  D ADDR   0040H   A      298# 633 637 642 645 651 1479 1483 1549 1570 1591 1592 1593 1642 1647
                                           1686 1694 1696 1701 1737 1756 1762 1770 1773 1778 1793 1795 2279 2326 2330
                                           2575 2593 2609 2611 2614 2670 2671 2676 2677 2779 2823 2842 2949 3023 3085
                                           3143 3144 3191 3195 3221 3243 3257 3264 3275 3276 3382 3591 3618 3646 3675
                                           3702 3716 3717 3721 3722 3729 3730 3735 3751 3890 3897 3971 3979 3981 3997
                                           4021 4055 4064 4066 4130 4152 4159 4267 4305 4338 4339 4340 4341 4343 4377
                                           4382 4394 4422 4445 4500 4546 4952 4960 4964 5142 5150 5154 5320 5352 5581
                                           5594 5600 5607 5735 5754 5772 5835 5852 5863 6023 6049 6103 6150 6171 6447
                                           6479 6529
BUFL_DEC . . . . .  C ADDR   217AH   R   SEG=MAIN   5294#
BUFMEA . . . . . .  C ADDR   1F99H   R   SEG=MAIN   4954# 4959
BUFMIN . . . . . .  C ADDR   20A8H   R   SEG=MAIN   5144# 5149
BUFON. . . . . . .  C ADDR   0DDBH   R   SEG=MAIN   2320 2329#
BUFR . . . . . . .  C ADDR   0913H   R   SEG=MAIN   1572# 1577
BUFR2. . . . . . .  C ADDR   08F5H   R   SEG=MAIN   1551# 1556
BUFR3. . . . . . .  C ADDR   08EEH   R   SEG=MAIN   1542 1547#
BUFR30 . . . . . .  C ADDR   08F1H   R   SEG=MAIN   1545 1549#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7889# 7893
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   137

CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357 358
CEXP . . . . . . .  C ADDR   01E2H   A      7866 7875#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   2376H   R   SEG=MAIN   1460 3077 4535 5667#
CH1. . . . . . . .  C ADDR   2396H   R   SEG=MAIN   5487 5678#
CH10 . . . . . . .  C ADDR   237AH   R   SEG=MAIN   864 1103 3956 5668#
CH100. . . . . . .  C ADDR   238EH   R   SEG=MAIN   811 5673#
CH10000. . . . . .  C ADDR   238AH   R   SEG=MAIN   5672#
CH150H . . . . . .  C ADDR   23DEH   R   SEG=MAIN   5697#
CH2. . . . . . . .  C ADDR   2392H   R   SEG=MAIN   1098 5674#
CH20 . . . . . . .  C ADDR   2559H   R   SEG=MAIN   846 1108 5986#
CH2THO . . . . . .  C ADDR   23BEH   R   SEG=MAIN   2171 2209 5689#
CH320H . . . . . .  C ADDR   23DAH   R   SEG=MAIN   5696# 6500
CH4. . . . . . . .  C ADDR   2382H   R   SEG=MAIN   1112 5670#
CH43 . . . . . . .  C ADDR   18C2H   R   SEG=MAIN   3973# 3978
CH43_42. . . . . .  C ADDR   1968H   R   SEG=MAIN   4068# 4073
CH5. . . . . . . .  C ADDR   237EH   R   SEG=MAIN   880 5669#
CH57 . . . . . . .  C ADDR   2555H   R   SEG=MAIN   5985#
CH954. . . . . . .  C ADDR   2386H   R   SEG=MAIN   5671#
CHAIBL . . . . . .  C ADDR   14EEH   R   SEG=MAIN   3384 3386#
CHAIPR . . . . . .  C ADDR   1817H   R   SEG=MAIN   3892 3894#
CHANMA . . . . . .  C ADDR   0FADH   R   SEG=MAIN   2607 2616#
CHANZ. . . . . . .  C ADDR   0F94H   R   SEG=MAIN   2561 2605#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 562 1164 1209 1217 2124 2228 4165
CHBEFORE . . . . .  D ADDR   009BH   A      381# 585 808 822 841 859 875
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4863 4913 4929 5050 5104 5220 5274
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 596 1892 2000 2041 2046 2106 2114 3844 5294 5299
CHBUF1 . . . . . .  X ADDR   0E00H   A      438# 1902 1987
CHCMP. . . . . . .  C ADDR   2276H   R   SEG=MAIN   1170 5464#
CHDEC. . . . . . .  C ADDR   2289H   R   SEG=MAIN   1218 1231 5479#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2065 2092 2134 2184 2222
CHDELMO. . . . . .  C ADDR   0C33H   R   SEG=MAIN   2075 2092# 2097
CHIF . . . . . . .  C ADDR   259EH   R   SEG=MAIN   6027 6030#
CHIF5. . . . . . .  C ADDR   25A6H   R   SEG=MAIN   6033 6035#
CHIFB. . . . . . .  C ADDR   25C9H   R   SEG=MAIN   6053 6056#
CHIFB1 . . . . . .  C ADDR   25CFH   R   SEG=MAIN   6055 6056 6059#
CHIFL5 . . . . . .  C ADDR   25D7H   R   SEG=MAIN   6063 6066#
CHIFOUR. . . . . .  C ADDR   25B8H   R   SEG=MAIN   6040 6042 6046#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1382 1799
CHIND2 . . . . . .  D ADDR   0033H   A      315# 716 718 726
CHINKOR. . . . . .  D ADDR   0098H   A      370# 557 790 1156 1169 1211 1225 1230 2099
CHK. . . . . . . .  C ADDR   23D6H   R   SEG=MAIN   1334 5695#
CHKL . . . . . . .  D ADDR   003DH   A      305# 698 706 708 709 711 2437 2464 2512 2995 3280 4027 4449
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1086 1093 1116 6279
CHMASN . . . . . .  D ADDR   003FH   A      306# 797 806 842 860 876 892 1091 1093 1094
CHMINUS. . . . . .  C ADDR   28F0H   R   SEG=MAIN   3404 3450 3472 3491 3513 6462# 6524
CHTADC . . . . . .  C ADDR   2220H   R   SEG=MAIN   5396#
CHTHO. . . . . . .  C ADDR   23B6H   R   SEG=MAIN   1303 1341 4686 4771 4789 5687#
CHTHOU . . . . . .  C ADDR   245DH   R   SEG=MAIN   5823#
CHZAP. . . . . . .  C ADDR   2372H   R   SEG=MAIN   1881 5666#
CH_1 . . . . . . .  C ADDR   239EH   R   SEG=MAIN   588 1496 1519 1899 2043 2118 3927 5296 5680#
CH_10. . . . . . .  C ADDR   23CEH   R   SEG=MAIN   1502 1525 1983 2013 4438 4938 5127 5693#
CH_10TH. . . . . .  C ADDR   23CAH   R   SEG=MAIN   1395 5692#
CH_2 . . . . . . .  C ADDR   23A2H   R   SEG=MAIN   1894 1978 2006 2022 5681#
CH_200 . . . . . .  C ADDR   23C6H   R   SEG=MAIN   5691#
CH_220 . . . . . .  C ADDR   23C2H   R   SEG=MAIN   1357 5690#
CH_22T . . . . . .  C ADDR   249BH   R   SEG=MAIN   1448 5871#
CH_250 . . . . . .  C ADDR   23D2H   R   SEG=MAIN   1259 5694#
CH_4 . . . . . . .  C ADDR   23A6H   R   SEG=MAIN   2016 3930 5682#
CH_5 . . . . . . .  C ADDR   23AAH   R   SEG=MAIN   5683#
CH_500 . . . . . .  C ADDR   2497H   R   SEG=MAIN   1444 5870#
CH_7 . . . . . . .  C ADDR   23AEH   R   SEG=MAIN   2110 5684#
CH_953 . . . . . .  C ADDR   23B2H   R   SEG=MAIN   5686#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   138

CH_B . . . . . . .  C ADDR   2493H   R   SEG=MAIN   1464 5868#
CH_FL. . . . . . .  C ADDR   249FH   R   SEG=MAIN   1488 5872#
CH_M3. . . . . . .  C ADDR   23E2H   R   SEG=MAIN   5698#
CH_MLN . . . . . .  C ADDR   239AH   R   SEG=MAIN   5679#
CIKLWR . . . . . .  C ADDR   281EH   R   SEG=MAIN   6285#
CKCON. . . . . . .  D ADDR   008EH   A      30# 480 511
CL4. . . . . . . .  C ADDR   23F4H   R   SEG=MAIN   5715# 5717
CL4N . . . . . . .  C ADDR   23FAH   R   SEG=MAIN   5724# 5726
CLE20. . . . . . .  C ADDR   1955H   R   SEG=MAIN   4058# 4060
CLE256 . . . . . .  C ADDR   043EH   A      4245 4719 4821 8371#
CLEAR. . . . . . .  C ADDR   29A8H   R   SEG=MAIN   6651 6655# 6685
CLEAR4 . . . . . .  C ADDR   23F1H   R   SEG=MAIN   820 1411 1413 1559 1580 1620 1622 2357 2359 3061 3063 4862 5713#
CLEARN . . . . . .  C ADDR   23F9H   R   SEG=MAIN   3777 3823 3918 4297 4414 4525 4572 5722#
CLMASSIX . . . . .  C ADDR   280EH   R   SEG=MAIN   548 1409 1618 2103 2232 2355 3059 3239 6273#
CLMASV . . . . . .  C ADDR   07DEH   R   SEG=MAIN   1404 1406#
CLMAX. . . . . . .  C ADDR   2813H   R   SEG=MAIN   6275# 6278
CLR11. . . . . . .  C ADDR   29A9H   R   SEG=MAIN   6657# 6659
CLRDEC . . . . . .  C ADDR   29A2H   R   SEG=MAIN   6649#
CLRNUM . . . . . .  C ADDR   29A6H   R   SEG=MAIN   6652# 6766
CLRVICH. . . . . .  C ADDR   1348H   R   SEG=MAIN   3164# 3181
CL_HL. . . . . . .  C ADDR   15A1H   R   SEG=MAIN   3527# 3542 3547 3551
CL_HL1 . . . . . .  C ADDR   15B3H   R   SEG=MAIN   3524 3539#
CL_HL2 . . . . . .  C ADDR   15BDH   R   SEG=MAIN   3539 3544#
CL_HL3 . . . . . .  C ADDR   15C7H   R   SEG=MAIN   3544 3549#
CNTR . . . . . . .  N NUMB   0006H   A      7562#
CO02S. . . . . . .  C ADDR   235AH   R   SEG=MAIN   5650# 5654
CO05S. . . . . . .  C ADDR   2367H   R   SEG=MAIN   5659# 5663
CO1S . . . . . . .  C ADDR   2351H   R   SEG=MAIN   5644# 5644
CO2S . . . . . . .  C ADDR   234DH   R   SEG=MAIN   5642# 5646
COMPA1 . . . . . .  C ADDR   088AH   R   SEG=MAIN   1496# 1505
COMPA2 . . . . . .  C ADDR   08C0H   R   SEG=MAIN   1519# 1528
COND . . . . . . .  C ADDR   2882H   R   SEG=MAIN   6369#
COPY1. . . . . . .  C ADDR   049FH   A      8453# 8458
COPYPP . . . . . .  C ADDR   0499H   A      4232 4698 4799 8450#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3943 4079 4855 4871 4886 5043 5058 5073 5213 5228 5243
COUNT. . . . . . .  C ADDR   232FH   R   SEG=MAIN   5616# 5616
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   2336H   R   SEG=MAIN   5622# 5622
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 485
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1889
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1886
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 486
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   2887H   R   SEG=MAIN   6373# 6375
DCOB . . . . . . .  C ADDR   288EH   R   SEG=MAIN   6377# 6395
DCOC . . . . . . .  C ADDR   2899H   R   SEG=MAIN   6387# 6392
DCOD . . . . . . .  C ADDR   28A6H   R   SEG=MAIN   6394 6397#
DDOUTF . . . . . .  C ADDR   1609H   R   SEG=MAIN   3373 3429 3577 3585# 3670
DDOUTFR. . . . . .  C ADDR   14D2H   R   SEG=MAIN   3373# 3379
DEC30. . . . . . .  C ADDR   29FBH   R   SEG=MAIN   6776# 6801
DEC31. . . . . . .  C ADDR   2A00H   R   SEG=MAIN   6782# 6789
DEC32. . . . . . .  C ADDR   2A10H   R   SEG=MAIN   6794# 6798
DECBIN . . . . . .  C ADDR   29EEH   R   SEG=MAIN   3781 3827 3922 4435 4530 4576 6755#
DECSIZE. . . . . .  N NUMB   000AH   A      6630# 6650 6684 6711 6724 6727 6781
DECT2. . . . . . .  C ADDR   2A19H   R   SEG=MAIN   6772 6804#
DEDPTR . . . . . .  C ADDR   2C6EH   R   SEG=MAIN   7289 7293 7297 7303#
DENORM . . . . . .  C ADDR   0133H   A      7721# 7777
DGOTO7 . . . . . .  C ADDR   179BH   R   SEG=MAIN   3830# 3838
DIAP . . . . . . .  D ADDR   00AEH   A      389# 576 1399 1601 1700 1928 2349 2390 3052 4342 4726 5503 5524 5786 5801
                                           5952 6014
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   139

DIINC. . . . . . .  C ADDR   0E00H   R   SEG=MAIN   2352 2355#
DIKDN. . . . . . .  C ADDR   252DH   R   SEG=MAIN   5954 5974#
DIKDW. . . . . . .  C ADDR   2445H   R   SEG=MAIN   5790 5811#
DIKM . . . . . . .  C ADDR   245BH   R   SEG=MAIN   5822#
DIPAR. . . . . . .  C ADDR   2459H   R   SEG=MAIN   5821#
DIV1 . . . . . . .  C ADDR   02DDH   A      8058# 8117
DIV2 . . . . . . .  C ADDR   0320H   A      8076 8080 8084 8088 8103#
DIV3 . . . . . . .  C ADDR   030DH   A      8077 8081 8085 8089#
DIV9 . . . . . . .  C ADDR   0336H   A      8047 8049 8123#
DIVIDE . . . . . .  C ADDR   2AD9H   R   SEG=MAIN   6301 6990#
DONE . . . . . . .  C ADDR   2A48H   R   SEG=MAIN   6820 6831#
DONE1. . . . . . .  C ADDR   2A46H   R   SEG=MAIN   6823 6826 6829#
DOSH . . . . . . .  C ADDR   2B62H   R   SEG=MAIN   7065 7081#
DOSUB. . . . . . .  C ADDR   2B50H   R   SEG=MAIN   7049 7053 7057 7061 7062 7066#
DPH. . . . . . . .  D ADDR   0083H   A      19# 554 600 608 615 622 2271 2862 2942 3527 3948 3950 4084 4089 4594 4839
                                           4848 4856 4868 4873 4882 4884 4887 4898 4985 4987 4996 5005 5044 5055 5060
                                           5069 5071 5074 5085 5165 5174 5214 5225 5230 5239 5241 5244 5255 6233 6241
                                           6508 6516 6548 6837 6873 6908 6911 6923 6946 7308 7310 8384 8404 8450
DPL. . . . . . . .  D ADDR   0082H   A      18# 603 611 618 625 2270 2863 2941 3530 3944 3946 4081 4092 4595 4837
                                           4844 4859 4866 4876 4879 4881 4890 4894 4982 4984 4994 5001 5047 5053 5063
                                           5066 5068 5077 5081 5163 5170 5217 5223 5233 5236 5238 5247 5251 6234 6240
                                           6505 6519 6552 6853 6889 6910 6924 6927 6961 7305 7307 8385 8405 8451
DVIG0. . . . . . .  C ADDR   0A97H   R   SEG=MAIN   1835# 1837
DVIG1. . . . . . .  C ADDR   0A8CH   R   SEG=MAIN   1826# 1828
DVIG2. . . . . . .  C ADDR   0A81H   R   SEG=MAIN   1817# 1819
DVIG3. . . . . . .  C ADDR   0A75H   R   SEG=MAIN   1808# 1810
DVIG4. . . . . . .  C ADDR   0AA3H   R   SEG=MAIN   1846# 1848
DVIG6. . . . . . .  C ADDR   0AC5H   R   SEG=MAIN   1874# 1876
DVM. . . . . . . .  C ADDR   0AC3H   R   SEG=MAIN   1862 1873#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 483
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 534 700 2257 2928 5315 5317 5331
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1DB0H   R   SEG=MAIN   3041 4672#
ENDSDV . . . . . .  C ADDR   0AC9H   R   SEG=MAIN   1868 1877#
ENDSUM . . . . . .  C ADDR   059CH   R   SEG=MAIN   904 957 1060 1085#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   08BBH   R   SEG=MAIN   1499 1515#
EQU00. . . . . . .  C ADDR   08D9H   R   SEG=MAIN   1517 1522 1531#
EQU1L. . . . . . .  C ADDR   10E4H   R   SEG=MAIN   2790 2794#
EQU2L. . . . . . .  C ADDR   166FH   R   SEG=MAIN   3656 3661#
ERRA0. . . . . . .  C ADDR   1CCFH   R   SEG=MAIN   4538 4550#
ERRA01 . . . . . .  C ADDR   07F4H   R   SEG=MAIN   1418# 1463
ERROR. . . . . . .  C ADDR   2634H   R   SEG=MAIN   1425 4365 4553 5360 5374 6169#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168# 1964 2903 4628
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7564#
EXP2 . . . . . . .  N NUMB   0001H   A      7566# 7743 7764
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   551# 555
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   243EH   R   SEG=MAIN   4700 5800#
FINDKOEF . . . . .  C ADDR   242FH   R   SEG=MAIN   1337 5785#
FINDMEM. . . . . .  C ADDR   1048H   R   SEG=MAIN   2630 2700#
FINDR. . . . . . .  C ADDR   2586H   R   SEG=MAIN   1585 4332 6014#
FINIS. . . . . . .  C ADDR   2B8DH   R   SEG=MAIN   7009 7110#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   140

FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      1999 4910 4922 7769# 7858
FLCMP. . . . . . .  C ADDR   01D6H   A      1261 1359 1397 1446 1450 1462 1498 1521 1896 4537 5100 5116 5270 5285
                                           7863#
FLDIV. . . . . . .  C ADDR   02B7H   A      1284 1305 1343 1471 1490 1504 2015 2173 2211 4684 4769 4787 4937 4940
                                           5129 8033#
FLMUL. . . . . . .  C ADDR   0203H   A      1150 1250 1302 1348 1466 1527 1986 2008 2018 2024 3932 4440 4688 4773
                                           4791 7903#
FLOUT. . . . . . .  C ADDR   01E1H   A      7870 7873#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8372 8378 8429 8434
FLSUB. . . . . . .  C ADDR   01D1H   A      1242 1901 2045 2113 2169 2207 3929 5298 7856#
FND. . . . . . . .  C ADDR   01F8H   A      7879 7882 7885 7888 7891#
FO1M . . . . . . .  C ADDR   2845H   R   SEG=MAIN   6307 6311#
FO2M . . . . . . .  C ADDR   284EH   R   SEG=MAIN   6314 6316#
FORM4. . . . . . .  C ADDR   284FH   R   SEG=MAIN   6309 6315 6319#
FT1IZM . . . . . .  C ADDR   0EEDH   R   SEG=MAIN   2507#
FTOL . . . . . . .  C ADDR   0343H   A      1195 1350 1474 3933 4689 4792 4941 5130 6096 8139#
FTOL1. . . . . . .  C ADDR   037CH   A      8152 8156 8180#
FTOL2. . . . . . .  C ADDR   039EH   A      8176 8213#
FTOL22 . . . . . .  C ADDR   03C4H   A      8216 8250#
FTOL23 . . . . . .  C ADDR   03A2H   A      8217# 8249
FTOL24 . . . . . .  C ADDR   03B5H   A      8219 8235#
FTOL25 . . . . . .  C ADDR   03C2H   A      8234 8249#
FTOL26 . . . . . .  C ADDR   03E4H   A      8265 8281#
FTOL3. . . . . . .  C ADDR   038AH   A      8179 8193#
FTOL33 . . . . . .  C ADDR   038EH   A      8197# 8211
FTOL4. . . . . . .  C ADDR   0371H   A      8158 8173#
FTOL9. . . . . . .  C ADDR   0381H   A      8186# 8196 8212 8280 8295
FULKALIB . . . . .  C ADDR   1E1FH   R   SEG=MAIN   4727 4742# 4830
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   491# 492
GO23NO . . . . . .  C ADDR   15CEH   R   SEG=MAIN   3430 3553#
GO31L. . . . . . .  C ADDR   10EAH   R   SEG=MAIN   2768 2799#
GO41L. . . . . . .  C ADDR   10EFH   R   SEG=MAIN   2799 2801#
GOA2 . . . . . . .  C ADDR   0794H   R   SEG=MAIN   1363 1365 1368# 1390
GOA3A2 . . . . . .  C ADDR   079EH   R   SEG=MAIN   1373#
GOCIKLE. . . . . .  C ADDR   0BCCH   R   SEG=MAIN   1919 2003 2032# 2039 2048
GOFULL . . . . . .  C ADDR   1601H   R   SEG=MAIN   3559 3581#
GOGO7. . . . . . .  C ADDR   1CEDH   R   SEG=MAIN   4511 4516 4563#
GOKAA2 . . . . . .  C ADDR   07BCH   R   SEG=MAIN   1388#
GOKLB. . . . . . .  C ADDR   0DC3H   R   SEG=MAIN   2296 2318#
GOOFF1 . . . . . .  C ADDR   1535H   R   SEG=MAIN   3444# 3453
GOOFF2 . . . . . .  C ADDR   1550H   R   SEG=MAIN   3466# 3475
GOOFF3 . . . . . .  C ADDR   156BH   R   SEG=MAIN   3485# 3494
GOOFF4 . . . . . .  C ADDR   1586H   R   SEG=MAIN   3507# 3516
GOONIN . . . . . .  C ADDR   07AEH   R   SEG=MAIN   1381# 1416 1428 1608 1625
GOONIN1. . . . . .  C ADDR   0955H   R   SEG=MAIN   1604 1608#
GOONIND. . . . . .  C ADDR   098DH   R   SEG=MAIN   1384 1654#
GOONOFF. . . . . .  C ADDR   14FAH   R   SEG=MAIN   3398# 3407
GOONT. . . . . . .  C ADDR   0B55H   R   SEG=MAIN   1922 1965#
GOPAROL. . . . . .  C ADDR   1B51H   R   SEG=MAIN   4174 4318 4326#
GOPAROM. . . . . .  C ADDR   1A3BH   R   SEG=MAIN   4172# 4175
GOPART . . . . . .  C ADDR   032DH   R   SEG=MAIN   792 795#
GOSK19 . . . . . .  C ADDR   1019H   R   SEG=MAIN   2667 2674#
GOTO7. . . . . . .  C ADDR   11FFH   R   SEG=MAIN   2994# 3074 3081 3119 3168 3197 3209 3251 3255 3303 3324 3333 3339
                                           3344 3350 3365 3427 3606 3609 3623 3660 3663 3719 3732 3738 3764 3766 3807
                                           3830 3848 3903 4102 4110 4118 4279 4283 4362 4372 4406 4457 4459 4475 4487
                                           4548 4739 4750
GOTOKD . . . . . .  C ADDR   062FH   R   SEG=MAIN   1153 1177#
GOTOSTROB. . . . .  C ADDR   0B37H   R   SEG=MAIN   1933 1936 1939 1942 1945#
GOUT6. . . . . . .  C ADDR   0D78H   R   SEG=MAIN   2286# 2314
GOVVLIST . . . . .  C ADDR   183BH   R   SEG=MAIN   3886 3908#
GOZNAK . . . . . .  C ADDR   02DFH   R   SEG=MAIN   689 735#
HNOR11 . . . . . .  C ADDR   1353H   R   SEG=MAIN   3130 3172#
HNOR12 . . . . . .  C ADDR   12FBH   R   SEG=MAIN   3120 3124#
HNOT1. . . . . . .  C ADDR   139CH   R   SEG=MAIN   3096 3218#
HNOT2. . . . . . .  C ADDR   12C9H   R   SEG=MAIN   3093#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   141

HR12 . . . . . . .  C ADDR   12F1H   R   SEG=MAIN   3115 3120#
HVI1113. . . . . .  C ADDR   12EBH   R   SEG=MAIN   3118# 3123 3128
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 536 5310 5340 8371 8379 8428 8438
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   12C5H   R   SEG=MAIN   3088 3090#
IND. . . . . . . .  C ADDR   219AH   R   SEG=MAIN   638 646 691 719 1426 1509 1513 1796 2327 2331 2342 3024 3261 3277
                                           3806 4022 4074 4366 4554 4747 5314# 5356 5362 5376 6530
INDOLL . . . . . .  C ADDR   094AH   R   SEG=MAIN   1599 1600 1604#
INIACP . . . . . .  C ADDR   24A3H   R   SEG=MAIN   655 3237 5878#
INNOT1_2 . . . . .  C ADDR   16F2H   R   SEG=MAIN   3728 3734#
INNOT3 . . . . . .  C ADDR   16E3H   R   SEG=MAIN   3720 3725#
INNOT6 . . . . . .  C ADDR   16D7H   R   SEG=MAIN   3715 3720#
INTER2 . . . . . .  C ADDR   218EH   R   SEG=MAIN   262 5303#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 629 1965 3683 3783
INTMUL . . . . . .  C ADDR   0B78H   R   SEG=MAIN   1980 1986#
INTMUL1. . . . . .  C ADDR   0B7BH   R   SEG=MAIN   1987#
INTMUL2. . . . . .  C ADDR   0B90H   R   SEG=MAIN   2000# 2009 2019 2025 2029
INTN . . . . . . .  C ADDR   1784H   R   SEG=MAIN   3821#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   1384H   R   SEG=MAIN   3199#
IZMAN. . . . . . .  C ADDR   0E64H   R   SEG=MAIN   2244 2411#
IZMFUN . . . . . .  C ADDR   0E73H   R   SEG=MAIN   2343 2354 2362 2415 2418#
IZMPAT . . . . . .  C ADDR   0E77H   R   SEG=MAIN   2312 2328 2332 2387 2422#
IZMT2. . . . . . .  C ADDR   0E86H   R   SEG=MAIN   2438 2443#
IZMT3. . . . . . .  C ADDR   0E91H   R   SEG=MAIN   2443 2449#
JFINIS . . . . . .  C ADDR   2AF4H   R   SEG=MAIN   7001 7009#
KD . . . . . . . .  C ADDR   23BAH   R   SEG=MAIN   5688#
KEYB1. . . . . . .  C ADDR   0D47H   R   SEG=MAIN   283 2250#
KEYB2. . . . . . .  C ADDR   1193H   R   SEG=MAIN   286 2920#
KFULL. . . . . . .  C ADDR   15D8H   R   SEG=MAIN   3366 3558#
KFULLR . . . . . .  C ADDR   14C1H   R   SEG=MAIN   3361 3366#
KGO23. . . . . . .  C ADDR   1522H   R   SEG=MAIN   3360 3433#
KKOUT6 . . . . . .  C ADDR   1153H   R   SEG=MAIN   2246 2881#
KLBOFF . . . . . .  C ADDR   124FH   R   SEG=MAIN   3017 3035#
KLEV1. . . . . . .  C ADDR   149BH   R   SEG=MAIN   3316 3351#
KLEV2. . . . . . .  C ADDR   14A0H   R   SEG=MAIN   3351 3353#
KLEV21 . . . . . .  C ADDR   14C4H   R   SEG=MAIN   3358 3367#
KLEV22 . . . . . .  C ADDR   14AAH   R   SEG=MAIN   3346 3355 3358#
KLEV23 . . . . . .  C ADDR   14D5H   R   SEG=MAIN   3367 3375#
KLEV3. . . . . . .  C ADDR   14A5H   R   SEG=MAIN   3353 3355#
KLMAS. . . . . . .  C ADDR   03DAH   R   SEG=MAIN   824 891#
KNAVP. . . . . . .  C ADDR   125EH   R   SEG=MAIN   2974 3043#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1363 1600 1764 2389 2411 2412 2416
KNIZMON. . . . . .  C ADDR   0E6EH   R   SEG=MAIN   2411 2416#
KNKMP. . . . . . .  C ADDR   117AH   R   SEG=MAIN   2908# 2968
KNLEFT . . . . . .  C ADDR   126EH   R   SEG=MAIN   2912 3050#
KNMEM. . . . . . .  C ADDR   13F9H   R   SEG=MAIN   2918 3271#
KNMENU . . . . . .  C ADDR   1221H   R   SEG=MAIN   2980 3014#
KNNUL. . . . . . .  C ADDR   128FH   R   SEG=MAIN   2911 3068#
KNOPT. . . . . . .  C ADDR   0E99H   R   SEG=MAIN   2243 2457#
KNRAZR . . . . . .  C ADDR   0EAEH   R   SEG=MAIN   2242 2470#
KNRIGHT. . . . . .  C ADDR   0DF6H   R   SEG=MAIN   2302 2347#
KNVICH . . . . . .  C ADDR   0E17H   R   SEG=MAIN   2311 2365#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 594 4691 4701 4793 4801
KOEFKM . . . . . .  D ADDR   0094H   A      378# 592 1148 1248 2215
KOEFKP . . . . . .  D ADDR   0090H   A      377# 590 1145 1243 2177
KOMUL. . . . . . .  C ADDR   0758H   R   SEG=MAIN   1336 1340#
KOMULPZ. . . . . .  C ADDR   0752H   R   SEG=MAIN   1333 1337#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1458 4533 6094
KON_B. . . . . . .  C ADDR   0F78H   R   SEG=MAIN   2563 2582#
KOR0US . . . . . .  C ADDR   22E7H   R   SEG=MAIN   2073 5557#
KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1240 2085 2167 2205
KORDEC1. . . . . .  C ADDR   0680H   R   SEG=MAIN   1223 1230#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   142

KORDEC10 . . . . .  C ADDR   0660H   R   SEG=MAIN   1211#
KORNUL . . . . . .  C ADDR   0C06H   R   SEG=MAIN   1160 2065#
KVVOD0 . . . . . .  C ADDR   15F4H   R   SEG=MAIN   3326 3567 3576#
LABEL43. . . . . .  C ADDR   1832H   R   SEG=MAIN   3904# 3912
LABEL7 . . . . . .  C ADDR   191BH   R   SEG=MAIN   3904 4027# 4039
LABELA . . . . . .  C ADDR   02A9H   R   SEG=MAIN   694# 723 2036
LABELB . . . . . .  C ADDR   0A6EH   R   SEG=MAIN   1203 1628 1801# 2053 2057 2059
LABELC . . . . . .  C ADDR   0EAEH   R   SEG=MAIN   2471#
LABELE . . . . . .  C ADDR   0E77H   R   SEG=MAIN   2420 2436# 2476 2479 2483 2487 2495
LABELF . . . . . .  C ADDR   0ED9H   R   SEG=MAIN   2241 2496#
LABELH . . . . . .  C ADDR   12B1H   R   SEG=MAIN   2910 3083#
LABELI . . . . . .  C ADDR   1C49H   R   SEG=MAIN   3099 3157 3211 4470#
LABELI2. . . . . .  C ADDR   1338H   R   SEG=MAIN   3157# 3158
LABELK . . . . . .  C ADDR   1439H   R   SEG=MAIN   3098 3305#
LABELL . . . . . .  C ADDR   10A5H   R   SEG=MAIN   2629 2729 2737#
LABELL1. . . . . .  C ADDR   0FB5H   R   SEG=MAIN   2620# 2693 2806 2855
LABELN . . . . . .  C ADDR   1109H   R   SEG=MAIN   2694 2815#
LABELP . . . . . .  C ADDR   1808H   R   SEG=MAIN   3834 3855 3886# 4120
LABELS . . . . . .  C ADDR   17CDH   R   SEG=MAIN   3563 3855#
LABELS1. . . . . .  C ADDR   1A9CH   R   SEG=MAIN   4190 4220#
LABELS13 . . . . .  C ADDR   1BCFH   R   SEG=MAIN   4261 4386#
LABELS3. . . . . .  C ADDR   1C5CH   R   SEG=MAIN   4480#
LABELS4. . . . . .  C ADDR   1C37H   R   SEG=MAIN   4260 4461#
LABL2. . . . . . .  C ADDR   10CBH   R   SEG=MAIN   2771# 3370
LABM . . . . . . .  C ADDR   1678H   R   SEG=MAIN   3371 3666#
LADD . . . . . . .  C ADDR   2C35H   R   SEG=MAIN   803 838 856 872 1884 7236#
LADDX. . . . . . .  C ADDR   2C46H   R   SEG=MAIN   7260#
LBTOF. . . . . . .  C ADDR   042DH   A      8350#
LCMP . . . . . . .  C ADDR   2A33H   R   SEG=MAIN   5474 6338 6816#
LDC_LONG . . . . .  C ADDR   2A49H   R   SEG=MAIN   589 1335 1882 2172 2210 3078 6836#
LDC_LTEMP. . . . .  C ADDR   2A6BH   R   SEG=MAIN   812 1099 1104 1109 1113 1260 1304 1342 1358 1396 1445 1449 1461
                                           1465 1489 1497 1503 1520 1526 1895 1900 1979 1984 2007 2014 2017 2023 2044
                                           2112 3928 3931 3957 4439 4536 4687 4772 4790 4939 5128 5297 5488 6501
                                           6872#
LDX_LONG . . . . .  C ADDR   2A91H   R   SEG=MAIN   6907#
LDX_LTEMP. . . . .  C ADDR   2AB7H   R   SEG=MAIN   6945#
LEFCUR . . . . . .  C ADDR   1703H   R   SEG=MAIN   3744# 3816 3832
LEFKL. . . . . . .  C ADDR   1278H   R   SEG=MAIN   3050 3056#
LEFMEM11 . . . . .  C ADDR   144DH   R   SEG=MAIN   3317# 3352 3354 3356
LEFT21 . . . . . .  C ADDR   1622H   R   SEG=MAIN   3602 3607#
LEFT_S . . . . . .  C ADDR   1A99H   R   SEG=MAIN   4219# 4222
LEFT_SK. . . . . .  C ADDR   1BB0H   R   SEG=MAIN   4219 4374#
LEV220 . . . . . .  C ADDR   14ADH   R   SEG=MAIN   3359# 3368
LEV2GO . . . . . .  C ADDR   112FH   R   SEG=MAIN   2814 2851#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2334 2701 2739 3278 3288 3315 3578 6044
LI21 . . . . . . .  C ADDR   138EH   R   SEG=MAIN   3206 3208#
LI42_43. . . . . .  C ADDR   18A1H   R   SEG=MAIN   3954# 4094
LIST_43. . . . . .  C ADDR   1925H   R   SEG=MAIN   3906 4032#
LLDI2. . . . . . .  C ADDR   0E5DH   R   SEG=MAIN   2402 2406#
LLDI23 . . . . . .  C ADDR   0E51H   R   SEG=MAIN   2394 2399#
LLDI3. . . . . . .  C ADDR   0E58H   R   SEG=MAIN   2401 2403#
LLEV2. . . . . . .  C ADDR   10F4H   R   SEG=MAIN   2770 2804#
LLMUL. . . . . . .  C ADDR   2B9EH   R   SEG=MAIN   7130#
LLSUB. . . . . . .  C ADDR   2C23H   R   SEG=MAIN   7212#
LLTOF. . . . . . .  C ADDR   0432H   A      8356#
LMUL . . . . . . .  C ADDR   2B9EH   R   SEG=MAIN   6296 6502 7132#
LOA3_X . . . . . .  C ADDR   297EH   R   SEG=MAIN   1925 6566#
LOAB12 . . . . . .  C ADDR   24F2H   R   SEG=MAIN   3235 5919#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2460 2501 3086 3231 5580
LOADB. . . . . . .  C ADDR   13AFH   R   SEG=MAIN   3226 3229# 3262 3268
LOADB2 . . . . . .  C ADDR   13DBH   R   SEG=MAIN   3249 3253#
LOADCLE. . . . . .  C ADDR   146BH   R   SEG=MAIN   3331# 3570
LOADKD . . . . . .  C ADDR   250FH   R   SEG=MAIN   5952#
LOADR2 . . . . . .  C ADDR   2501H   R   SEG=MAIN   3828 3923 4436 4531 4577 5935#
LOADT. . . . . . .  C ADDR   2302H   R   SEG=MAIN   2462 2507 3092 5580#
LOADUS . . . . . .  C ADDR   22A1H   R   SEG=MAIN   656 1407 1615 2361 2417 3032 3036 3065 3238 4829 5501#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   143

LOAHL_R2 . . . . .  C ADDR   1FAEH   R   SEG=MAIN   4905 4917 4968# 5096 5112 5266 5281
LOBLOK . . . . . .  C ADDR   162DH   R   SEG=MAIN   3556 3614# 3633
LOCLE. . . . . . .  C ADDR   1466H   R   SEG=MAIN   3320 3329#
LOD1 . . . . . . .  C ADDR   2311H   R   SEG=MAIN   5588# 5593
LODT . . . . . . .  C ADDR   2320H   R   SEG=MAIN   5601# 5606
LOIZMK . . . . . .  C ADDR   12FEH   R   SEG=MAIN   3125# 3162
LOKAME1. . . . . .  C ADDR   19EEH   R   SEG=MAIN   4134#
LOLEVT . . . . . .  C ADDR   2304H   R   SEG=MAIN   2340 5581#
LOLIST . . . . . .  C ADDR   145AH   R   SEG=MAIN   3322#
LOME1. . . . . . .  C ADDR   1D64H   R   SEG=MAIN   4639# 4643 4646 4649 4652 4656 4659 4662 4665 4669
LOMENU . . . . . .  C ADDR   1D5CH   R   SEG=MAIN   2644 2657 4134 4177 4200 4636#
LOOP . . . . . . .  C ADDR   225DH   R   SEG=MAIN   5437# 5438
LOOPS. . . . . . .  C ADDR   2AF7H   R   SEG=MAIN   7011# 7044
LOSPUS . . . . . .  C ADDR   22DBH   R   SEG=MAIN   2074 5540#
LOSTAT . . . . . .  C ADDR   1482H   R   SEG=MAIN   3335 3341#
LOTEXT . . . . . .  C ADDR   231CH   R   SEG=MAIN   1508 1512 1606 2380 2538 2546 2554 2669 2675 2709 2718 2726 2735
                                           2743 3022 3118 3188 3273 3323 3332 3338 3343 3349 3364 3582 3615 3627 3682
                                           3804 3872 3896 4063 4099 4107 4115 4129 4151 4157 4196 4329 4376 4381 4544
                                           4639 4746 5598# 6170
LOTP . . . . . . .  C ADDR   2565H   R   SEG=MAIN   5993# 6003 6006
LOTPUS . . . . . .  C ADDR   255DH   R   SEG=MAIN   4208 5535 5990#
LOU. . . . . . . .  C ADDR   0E63H   R   SEG=MAIN   2389 2405 2409#
LOUIZM . . . . . .  C ADDR   0E40H   R   SEG=MAIN   2389# 2414 5532
LOUTF. . . . . . .  C ADDR   10E7H   R   SEG=MAIN   2796# 2805 2812
LOVICH . . . . . .  C ADDR   12F4H   R   SEG=MAIN   3121# 3155 3176 4590
LOWR . . . . . . .  C ADDR   1474H   R   SEG=MAIN   3329 3335#
LOWR1. . . . . . .  C ADDR   1479H   R   SEG=MAIN   3337# 3574
LSUB . . . . . . .  C ADDR   2C23H   R   SEG=MAIN   1200 1376 5489 7213#
LTEMP. . . . . . .  N NUMB   0008H   A      1116 1118 1119 1120 5825 5826 5827 5828 6348 6351 6354 6357 6400 6401
                                           6402 6403 6628# 7002 7003 7004 7005 7014 7018 7022 7026 7029 7030 7031
                                           7032 7033 7034 7035 7036 7037 7038 7039 7040 7043 7046 7051 7055 7059 7069
                                           7072 7075 7078 7094 7097 7098 7100 7101 7103 7104 7106 7111 7112 7113 7114
                                           7134 7139 7147 7155 7160 7171 7179 7185 7193 7199 7567 7568 7607 7612 7614
                                           7623 7624 7625 7626 7857 7865 7878 7881 7884 7887 8467 8470 8473 8476
LWR. . . . . . . .  C ADDR   2820H   R   SEG=MAIN   6287# 6291
LWRX . . . . . . .  C ADDR   27E4H   R   SEG=MAIN   6232# 6244
LWTOF. . . . . . .  C ADDR   042FH   A      8352#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   283BH   R   SEG=MAIN   1676 3960 4942 5132 6295 6300 6305# 6337
MAIN . . . . . . .  C SEG    2C80H       REL=UNIT   237 294# 455
MANT1. . . . . . .  N NUMB   0002H   A      7565# 7592 7641 7642
MANT2. . . . . . .  N NUMB   0008H   A      7567# 7618 7619 7750 7752 7753 7755 7756 7758 7759 7761 7800 7801 7803
                                           7804 7806 7807 7809 7810 7814 7816 7819 7822 7920 7922 7923 7925 7926 7928
                                           7929 7931 7982 7984 7985 7987 7988 7990 7991 7993 8075 8079 8083 8087 8091
                                           8094 8097 8100
MARK0_8. . . . . .  C ADDR   0F7FH   R   SEG=MAIN   2565 2583 2585#
MARKER . . . . . .  D ADDR   00B2H   A      393# 567 2278 2525 2564 2574 2582 2592 2598 2778 2786 2822 2829 2841 2948
                                           3166 3183 3204 3297 3424 3535 3590 3598 3619 3645 3652 3710 3750 3757 3797
                                           3840 3898 3914 4037 4178 4266 4273 4357 4370 4393 4400 4447 4480 4499 4506
                                           4540 4550 4561 4586 6021 6047 6073 6084 6142
MARLE. . . . . . .  C ADDR   25D9H   R   SEG=MAIN   3765 6070#
MARRI. . . . . . .  C ADDR   25E6H   R   SEG=MAIN   2849 6083#
MAS10. . . . . . .  C ADDR   03F9H   R   SEG=MAIN   893 906#
MAS20. . . . . . .  C ADDR   0479H   R   SEG=MAIN   906 961#
MAS4 . . . . . . .  C ADDR   056DH   R   SEG=MAIN   959 1062#
MAS5DIV. . . . . .  C ADDR   05E1H   R   SEG=MAIN   1100 1105 1110 1114 1122#
MASFULL. . . . . .  C ADDR   05A8H   R   SEG=MAIN   1089 1093#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 894 899 928 936 1010 1018 1067 1074 6274
MASS1. . . . . . .  X ADDR   0104H   A      419# 902 925 939 1007 1021 1065 1077
MASS10 . . . . . .  X ADDR   0128H   A      428# 983 1040
MASS11 . . . . . .  X ADDR   012CH   A      429# 980 1042
MASS12 . . . . . .  X ADDR   0130H   A      430# 977 1044
MASS13 . . . . . .  X ADDR   0134H   A      431# 974 1046
MASS14 . . . . . .  X ADDR   0138H   A      432# 971 1048
MASS15 . . . . . .  X ADDR   013CH   A      433# 968 1050
MASS16 . . . . . .  X ADDR   0140H   A      434# 966 1052
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   144

MASS17 . . . . . .  X ADDR   0144H   A      435# 964 1054
MASS18 . . . . . .  X ADDR   0148H   A      436# 962 1056
MASS19 . . . . . .  X ADDR   014CH   A      437# 1058
MASS2. . . . . . .  X ADDR   0108H   A      420# 922 941 1004 1023 1063 1079
MASS3. . . . . . .  X ADDR   010CH   A      421# 919 943 1001 1025 1081
MASS4. . . . . . .  X ADDR   0110H   A      422# 916 945 998 1027
MASS5. . . . . . .  X ADDR   0114H   A      423# 913 947 995 1029
MASS6. . . . . . .  X ADDR   0118H   A      424# 911 949 993 1031
MASS7. . . . . . .  X ADDR   011CH   A      425# 909 951 991 1033
MASS8. . . . . . .  X ADDR   0120H   A      426# 907 953 989 1035
MASS9. . . . . . .  X ADDR   0124H   A      427# 955 986 1037
MASX5. . . . . . .  C ADDR   05D7H   R   SEG=MAIN   1091 1116#
MAXG . . . . . . .  C ADDR   210DH   R   SEG=MAIN   5222# 5276
MAXVIX . . . . . .  C ADDR   2177H   R   SEG=MAIN   5286 5291#
ME11_15DE. . . . .  C ADDR   17C4H   R   SEG=MAIN   3850# 3869
ME11_15DEC . . . .  C ADDR   19EDH   R   SEG=MAIN   3850 4133#
ME21_22. . . . . .  C ADDR   10AFH   R   SEG=MAIN   2743# 2752
ME21_23. . . . . .  C ADDR   1A57H   R   SEG=MAIN   3883 4186#
ME21_23DEC . . . .  C ADDR   1A73H   R   SEG=MAIN   4193 4198#
MEAVP. . . . . . .  C ADDR   1269H   R   SEG=MAIN   3044 3047#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   540# 542
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   544# 547
MEM10MS. . . . . .  C ADDR   02A4H   R   SEG=MAIN   691#
MEM12NO. . . . . .  C ADDR   15EFH   R   SEG=MAIN   3568 3572#
MENG . . . . . . .  C ADDR   1EFAH   R   SEG=MAIN   4865# 4915
MENU12 . . . . . .  C ADDR   1D68H   R   SEG=MAIN   4637 4641#
MENU13 . . . . . .  C ADDR   1D70H   R   SEG=MAIN   4641 4644#
MENU14 . . . . . .  C ADDR   1D78H   R   SEG=MAIN   4644 4647#
MENU15 . . . . . .  C ADDR   1D80H   R   SEG=MAIN   4647 4650#
MENU21 . . . . . .  C ADDR   1D88H   R   SEG=MAIN   4650 4654#
MENU22 . . . . . .  C ADDR   1D90H   R   SEG=MAIN   4654 4657#
MENU23 . . . . . .  C ADDR   1D98H   R   SEG=MAIN   4657 4660#
MENU31 . . . . . .  C ADDR   1DA0H   R   SEG=MAIN   4660 4663#
MENU41 . . . . . .  C ADDR   1DA8H   R   SEG=MAIN   4663 4667#
MENUOFF. . . . . .  C ADDR   1243H   R   SEG=MAIN   3015 3028#
MENUON . . . . . .  C ADDR   17FAH   R   SEG=MAIN   3874#
MERR . . . . . . .  C ADDR   121EH   R   SEG=MAIN   3011# 3014
ME_14. . . . . . .  C ADDR   148DH   R   SEG=MAIN   3346#
ME_41. . . . . . .  C ADDR   1B14H   R   SEG=MAIN   4220 4287#
ME_52. . . . . . .  C ADDR   1AE8H   R   SEG=MAIN   4263# 4287
ME_52V . . . . . .  C ADDR   1B05H   R   SEG=MAIN   4277 4279#
MIDL . . . . . . .  C ADDR   2B2AH   R   SEG=MAIN   7006 7041#
MIGN . . . . . . .  C ADDR   2616H   R   SEG=MAIN   5319 6142#
MIGNN. . . . . . .  C ADDR   261EH   R   SEG=MAIN   6144 6149#
MIN4_HL. . . . . .  C ADDR   1FBAH   R   SEG=MAIN   4981# 5014 5040 5184 5210
MING . . . . . . .  C ADDR   2018H   R   SEG=MAIN   5052# 5106
MINIVIX. . . . . .  C ADDR   2082H   R   SEG=MAIN   5117 5122# 5291
MLABL2 . . . . . .  C ADDR   1658H   R   SEG=MAIN   3583 3637# 3668 3907
MLABL2R. . . . . .  C ADDR   1838H   R   SEG=MAIN   3907# 3910
MMM. . . . . . . .  C ADDR   029FH   R   SEG=MAIN   687#
MO220. . . . . . .  C ADDR   093FH   R   SEG=MAIN   1215 1386 1599#
MO500I . . . . . .  C ADDR   08AFH   R   SEG=MAIN   1451 1511#
MO500R . . . . . .  C ADDR   08A3H   R   SEG=MAIN   1447 1507#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   1042H   R   SEG=MAIN   2695# 2706 2715 2723 2732
MOUTKMEM . . . . .  C ADDR   17C7H   R   SEG=MAIN   3851# 3859
MOVE28 . . . . . .  C ADDR   28A8H   R   SEG=MAIN   1279 1297 1344 1453 2170 2208 4681 4764 4782 4907 4919 4934 5095
                                           5111 5265 5280 6400#
MOVE82 . . . . . .  C ADDR   2461H   R   SEG=MAIN   5825#
MOVEA3 . . . . . .  C ADDR   098DH   R   SEG=MAIN   1657#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2566 2794 2834 3185 3555 3599 3607 3661 3713 3758 3901 4181 4276
                                           4359 4403 4481 4509 6077
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2562 2787 2791 2830 3186 3554 3603 3653 3657 3712 3762 3900 4180
                                           4360 4485 6086
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7917# 7960
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   145

MUP11. . . . . . .  C ADDR   0257H   A      7964# 8009
MUP2 . . . . . . .  C ADDR   0297H   A      7994 8008#
MUP3 . . . . . . .  C ADDR   026CH   A      7963 7979#
MVV11. . . . . . .  C ADDR   1628H   R   SEG=MAIN   3579 3612#
MVV12. . . . . . .  C ADDR   1640H   R   SEG=MAIN   3612 3624#
N12DELCH . . . . .  C ADDR   0D2AH   R   SEG=MAIN   2226 2234#
N4DELCH. . . . . .  C ADDR   0CD6H   R   SEG=MAIN   2150 2188#
N8DELCH. . . . . .  C ADDR   0D18H   R   SEG=MAIN   2188 2226#
NBIMENU. . . . . .  C ADDR   1048H   R   SEG=MAIN   2699#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 627 1930 3387 3523 3616 3680 3894 3985 6492 6513 6544
NE05 . . . . . . .  C ADDR   0358H   A      8146 8148 8150 8153#
NELEM. . . . . . .  D ADDR   0037H   A      312# 628 3925 4042 4046
NEXIN. . . . . . .  C ADDR   21A7H   R   SEG=MAIN   5322# 5329
NEXTMAX. . . . . .  C ADDR   2142H   R   SEG=MAIN   5254 5262#
NEXTMEA. . . . . .  C ADDR   1F2FH   R   SEG=MAIN   4897 4905#
NEXTMIN. . . . . .  C ADDR   204DH   R   SEG=MAIN   5084 5092#
NMEM_MENU. . . . .  C ADDR   17CAH   R   SEG=MAIN   3853# 3857
NMINUS . . . . . .  C ADDR   069DH   R   SEG=MAIN   1245 1249#
NMINUS3. . . . . .  C ADDR   0601H   R   SEG=MAIN   1147 1149#
NNDELCH. . . . . .  C ADDR   0C96H   R   SEG=MAIN   2135 2150#
NNMEMB . . . . . .  C ADDR   113BH   R   SEG=MAIN   2697 2857#
NNNUL. . . . . . .  C ADDR   0A0AH   R   SEG=MAIN   1739 1742#
NO . . . . . . . .  C ADDR   2B12H   R   SEG=MAIN   7016 7020 7024 7028#
NO0CHK . . . . . .  C ADDR   1189H   R   SEG=MAIN   2914#
NO0CHKL. . . . . .  C ADDR   0D3DH   R   SEG=MAIN   2246#
NO0KEY . . . . . .  C ADDR   02B3H   R   SEG=MAIN   699 703#
NO10MSV. . . . . .  C ADDR   176BH   R   SEG=MAIN   3802 3808#
NO11V6 . . . . . .  C ADDR   0F31H   R   SEG=MAIN   2533 2541#
NO12V6 . . . . . .  C ADDR   0F44H   R   SEG=MAIN   2541 2549#
NO13V6 . . . . . .  C ADDR   0F57H   R   SEG=MAIN   2549 2559#
NO21P7 . . . . . .  C ADDR   1CF4H   R   SEG=MAIN   4519 4568#
NO23RI . . . . . .  C ADDR   0FF9H   R   SEG=MAIN   2655 2659#
NO2MSV . . . . . .  C ADDR   1768H   R   SEG=MAIN   3807# 3808 3818
NO2PARN. . . . . .  C ADDR   0982H   R   SEG=MAIN   1640 1646#
NO31N. . . . . . .  C ADDR   1722H   R   SEG=MAIN   3771#
NO31RI . . . . . .  C ADDR   102AH   R   SEG=MAIN   2661 2685#
NO3PARN. . . . . .  C ADDR   0978H   R   SEG=MAIN   1640# 1720
NO4DEL . . . . . .  C ADDR   0C39H   R   SEG=MAIN   2078 2096#
NO5DEL . . . . . .  C ADDR   0C58H   R   SEG=MAIN   2111# 2119
NO6DEL . . . . . .  C ADDR   0C66H   R   SEG=MAIN   2109 2117#
NOAVK. . . . . . .  C ADDR   066FH   R   SEG=MAIN   1171 1220# 2128
NOAVP. . . . . . .  C ADDR   0794H   R   SEG=MAIN   1367# 1398 1401
NOBAVP . . . . . .  C ADDR   0A26H   R   SEG=MAIN   1510 1514 1594 1758 1762#
NOBEF99. . . . . .  C ADDR   036AH   R   SEG=MAIN   809 825# 844 862 878
NOBIT. . . . . . .  C ADDR   0245H   A      7932 7946#
NOBITIZM . . . . .  C ADDR   0A2FH   R   SEG=MAIN   1764 1767#
NOBL21 . . . . . .  C ADDR   10B8H   R   SEG=MAIN   2740 2748#
NOBL22 . . . . . .  C ADDR   10C2H   R   SEG=MAIN   2748 2768#
NOBUF. . . . . . .  C ADDR   0A64H   R   SEG=MAIN   1794 1796#
NOBUF0 . . . . . .  C ADDR   0BDCH   R   SEG=MAIN   1920 2041#
NOCHI0 . . . . . .  C ADDR   0974H   R   SEG=MAIN   1387 1627#
NOCHIND. . . . . .  C ADDR   02D2H   R   SEG=MAIN   717 725#
NOCHN10. . . . . .  C ADDR   05C4H   R   SEG=MAIN   1102 1107#
NOCHN2 . . . . . .  C ADDR   05B9H   R   SEG=MAIN   1097 1102#
NOCHN20. . . . . .  C ADDR   05CFH   R   SEG=MAIN   1107 1112#
NODI2. . . . . . .  C ADDR   0958H   R   SEG=MAIN   1602 1610#
NODI6. . . . . . .  C ADDR   127AH   R   SEG=MAIN   3054 3058#
NODI8. . . . . . .  C ADDR   09DEH   R   SEG=MAIN   1703 1710#
NODI8K . . . . . .  C ADDR   1B84H   R   SEG=MAIN   4345 4350#
NODI8_43 . . . . .  C ADDR   18FEH   R   SEG=MAIN   3999 4005#
NODI9. . . . . . .  C ADDR   095DH   R   SEG=MAIN   1612 1615#
NODI9_43 . . . . .  C ADDR   1909H   R   SEG=MAIN   4005 4013#
NODIS9 . . . . . .  C ADDR   09F0H   R   SEG=MAIN   1710 1722#
NODISK9. . . . . .  C ADDR   1B8CH   R   SEG=MAIN   4349 4350 4357#
NOENDLI. . . . . .  C ADDR   294AH   R   SEG=MAIN   6527 6531#
NOEQU1 . . . . . .  C ADDR   1120H   R   SEG=MAIN   2833 2837#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   146

NOEQU2 . . . . . .  C ADDR   171CH   R   SEG=MAIN   3761 3765#
NOFIZM . . . . . .  C ADDR   0F13H   R   SEG=MAIN   2497 2529#
NOFT1. . . . . . .  C ADDR   0EECH   R   SEG=MAIN   2502 2506#
NOFZ . . . . . . .  C ADDR   0BD7H   R   SEG=MAIN   2032 2036#
NOH37. . . . . . .  C ADDR   1313H   R   SEG=MAIN   3114 3138# 3149
NOHNOT1. . . . . .  C ADDR   13EEH   R   SEG=MAIN   3220 3263#
NOHNOT2. . . . . .  C ADDR   13E3H   R   SEG=MAIN   3256# 3263
NOKLB. . . . . . .  C ADDR   0A5EH   R   SEG=MAIN   1792 1794#
NOKORR . . . . . .  C ADDR   0617H   R   SEG=MAIN   1158 1161#
NOLAH. . . . . . .  C ADDR   12D5H   R   SEG=MAIN   3083 3101#
NOLI_43. . . . . .  C ADDR   1979H   R   SEG=MAIN   4032 4077#
NOM31. . . . . . .  C ADDR   16FAH   R   SEG=MAIN   3665 3740#
NOM32. . . . . . .  C ADDR   1773H   R   SEG=MAIN   3740 3814#
NOM33. . . . . . .  C ADDR   17A1H   R   SEG=MAIN   3814 3834#
NOMARL . . . . . .  C ADDR   1C71H   R   SEG=MAIN   4483 4489 4493#
NOMAXI . . . . . .  C ADDR   215AH   R   SEG=MAIN   5271 5274#
NOME11 . . . . . .  C ADDR   15DFH   R   SEG=MAIN   3565#
NOMEM11. . . . . .  C ADDR   1063H   R   SEG=MAIN   2702 2712#
NOMEM12. . . . . .  C ADDR   1079H   R   SEG=MAIN   2712 2720#
NOMEM13. . . . . .  C ADDR   108FH   R   SEG=MAIN   2720 2729#
NOMEMK . . . . . .  C ADDR   15DCH   R   SEG=MAIN   3286 3562#
NOMINI . . . . . .  C ADDR   2065H   R   SEG=MAIN   5101 5104#
NON1C. . . . . . .  C ADDR   0EBFH   R   SEG=MAIN   2477 2481#
NONULAVT . . . . .  C ADDR   0654H   R   SEG=MAIN   1166 1205#
NONULDEL . . . . .  C ADDR   0C1BH   R   SEG=MAIN   2066 2077#
NOP3_0 . . . . . .  C ADDR   0978H   R   SEG=MAIN   1633#
NOPART1. . . . . .  C ADDR   036EH   R   SEG=MAIN   798 832#
NOPART2. . . . . .  C ADDR   038EH   R   SEG=MAIN   832 851#
NOPART3. . . . . .  C ADDR   03AEH   R   SEG=MAIN   851 867#
NOPART4. . . . . .  C ADDR   03CEH   R   SEG=MAIN   867 884#
NOPLUS . . . . . .  C ADDR   0FA7H   R   SEG=MAIN   2610 2613#
NOPOIN7. . . . . .  C ADDR   1C88H   R   SEG=MAIN   4479 4514#
NOPOINT. . . . . .  C ADDR   1C54H   R   SEG=MAIN   4473 4477#
NORDN. . . . . . .  C ADDR   00F6H   A      7653# 7686
NORDN1 . . . . . .  C ADDR   0107H   A      7655 7669#
NORIG2 . . . . . .  C ADDR   10FDH   R   SEG=MAIN   2801 2809#
NORIM6 . . . . . .  C ADDR   113BH   R   SEG=MAIN   2861#
NORIME . . . . . .  C ADDR   0FDFH   R   SEG=MAIN   2642 2646#
NORIME1. . . . . .  C ADDR   0FD9H   R   SEG=MAIN   2644# 2647 2660
NORM1. . . . . . .  C ADDR   00F0H   A      7648# 7845 8022 8124 8341
NORR11 . . . . . .  C ADDR   132BH   R   SEG=MAIN   3151#
NORR12 . . . . . .  C ADDR   133BH   R   SEG=MAIN   3151 3158# 3172
NORUP. . . . . . .  C ADDR   0119H   A      7652 7689#
NORUP1 . . . . . .  C ADDR   011EH   A      7694# 7712
NORUP2 . . . . . .  C ADDR   0132H   A      7696 7713#
NORVICH. . . . . .  C ADDR   0A67H   R   SEG=MAIN   1719 1797#
NOSAV1 . . . . . .  C ADDR   0B25H   R   SEG=MAIN   1931 1934#
NOSAV2 . . . . . .  C ADDR   0B2CH   R   SEG=MAIN   1934 1937#
NOSAV3 . . . . . .  C ADDR   0B33H   R   SEG=MAIN   1937 1940#
NOSUB. . . . . . .  C ADDR   2B4DH   R   SEG=MAIN   7050 7054 7058 7063#
NOT1IN . . . . . .  C ADDR   0BF1H   R   SEG=MAIN   1870 2051#
NOT1_7 . . . . . .  C ADDR   120EH   R   SEG=MAIN   2996 3003#
NOT2IN . . . . . .  C ADDR   0BF9H   R   SEG=MAIN   2051 2055#
NOT2_7 . . . . . .  C ADDR   1219H   R   SEG=MAIN   3003 3008#
NOT3IN . . . . . .  C ADDR   0C01H   R   SEG=MAIN   2055 2058#
NOTAKT . . . . . .  C ADDR   0A39H   R   SEG=MAIN   1768 1772#
NOTE21 . . . . . .  C ADDR   0714H   R   SEG=MAIN   1266 1308#
NOTE22 . . . . . .  C ADDR   072FH   R   SEG=MAIN   1308 1320#
NOTESTIZM. . . . .  C ADDR   0747H   R   SEG=MAIN   1229 1332#
NOTT1. . . . . . .  C ADDR   0B6FH   R   SEG=MAIN   1977 1982#
NOTT2. . . . . . .  C ADDR   0B97H   R   SEG=MAIN   1982 2005#
NOTT3. . . . . . .  C ADDR   0BA5H   R   SEG=MAIN   2005 2012#
NOTT4. . . . . . .  C ADDR   0BBCH   R   SEG=MAIN   2012 2021#
NOTT5. . . . . . .  C ADDR   0BCAH   R   SEG=MAIN   2021 2026#
NOT_1. . . . . . .  C ADDR   0EC6H   R   SEG=MAIN   2481 2486#
NOT_10 . . . . . .  C ADDR   0EC6H   R   SEG=MAIN   2485#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   147

NOVIR. . . . . . .  C ADDR   0FC1H   R   SEG=MAIN   2518 2631#
NOVIR1 . . . . . .  C ADDR   0EFDH   R   SEG=MAIN   2518# 2529
NOZMEA . . . . . .  C ADDR   1FAAH   R   SEG=MAIN   4962 4964#
NOZMIN . . . . . .  C ADDR   20B9H   R   SEG=MAIN   5152 5154#
NOZZBL . . . . . .  C ADDR   18F0H   R   SEG=MAIN   3988 3991 3994 3997#
NOZZMI . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1698 1700#
NOZZMI1. . . . . .  C ADDR   18E0H   R   SEG=MAIN   3986 3989#
NOZZMI2. . . . . .  C ADDR   18E7H   R   SEG=MAIN   3989 3992#
NOZZMI3. . . . . .  C ADDR   18EEH   R   SEG=MAIN   3992 3995#
NOZZMI43 . . . . .  C ADDR   18D7H   R   SEG=MAIN   3983 3985#
NSEC1. . . . . . .  C ADDR   0A13H   R   SEG=MAIN   1743 1746#
NSEC10 . . . . . .  C ADDR   0A1CH   R   SEG=MAIN   1745 1748 1753#
NSEC11 . . . . . .  C ADDR   0A1AH   R   SEG=MAIN   1746 1750#
NUERR. . . . . . .  D ADDR   0039H   A      310# 1424 4364 4552 5359 5373 6171
NULAVT . . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2133#
NUMSIZE. . . . . .  N NUMB   0004H   A      6631# 6653 6691 6698 6773 6793
OBOARD . . . . . .  C ADDR   2A83H   R   SEG=MAIN   6874 6888#
OBOARD1. . . . . .  C ADDR   2ACBH   R   SEG=MAIN   6947 6960#
OFFMENUM . . . . .  C ADDR   1436H   R   SEG=MAIN   3302# 3311
OK1. . . . . . . .  C ADDR   0186H   A      7779 7794#
OK2. . . . . . . .  C ADDR   01A0H   A      7796 7811#
OK3. . . . . . . .  C ADDR   01C4H   A      7828 7844#
OLDMAX . . . . . .  C ADDR   20D9H   R   SEG=MAIN   5173 5179#
OLDMEAN. . . . . .  C ADDR   1EE5H   R   SEG=MAIN   4847 4853#
OLDMIN . . . . . .  C ADDR   1FE4H   R   SEG=MAIN   5004 5010#
ONBOAR1. . . . . .  C ADDR   2AA9H   R   SEG=MAIN   6909 6926#
ONBOARD. . . . . .  C ADDR   2A5DH   R   SEG=MAIN   6838 6852#
ONMEM11. . . . . .  C ADDR   1410H   R   SEG=MAIN   3027 3046 3048 3280# 3873 3879 4131 4135 4140 4155 4160 4183 4197
                                           4201 4212
ONMEM12. . . . . .  C ADDR   1A7AH   R   SEG=MAIN   4202# 4205 4224
ONMEM13. . . . . .  C ADDR   1C34H   R   SEG=MAIN   4404 4459# 4463 4465
ONMIG. . . . . . .  C ADDR   262CH   R   SEG=MAIN   6153 6162#
ONVICH . . . . . .  C ADDR   0E38H   R   SEG=MAIN   2372 2384#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 494
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 487 491
OUT43. . . . . . .  C ADDR   1912H   R   SEG=MAIN   4022#
OUT6 . . . . . . .  C ADDR   113BH   R   SEG=MAIN   2240 2318 2364 2442 2447 2452 2468 2504 2509 2516 2527 2645 2658
                                           2673 2679 2862#
OUT7 . . . . . . .  C ADDR   1D1DH   R   SEG=MAIN   2908 2909 3000 3007 3011 3033 3039 3089 3094 3145 3284 3372 3630
                                           3724 3853 4024 4031 4076 4170 4258 4379 4384 4454 4468 4563 4565 4593#
OUTA . . . . . . .  C ADDR   25F3H   R   SEG=MAIN   3190 6094#
OUTA2. . . . . . .  C ADDR   260DH   R   SEG=MAIN   6105# 6110
OUTF . . . . . . .  C ADDR   0EF3H   R   SEG=MAIN   2512# 2535 2539 2543 2547 2551 2555 2580 2603 2612 2615 2622 2695
                                           2710 2719 2727 2736 2746 2793 2796 2836 2850 2853 3135 3136 4202
OUTFL. . . . . . .  C ADDR   0FB8H   R   SEG=MAIN   2618 2622#
OUTKMEM. . . . . .  C ADDR   141DH   R   SEG=MAIN   3288# 3314 3851
OUTMA. . . . . . .  C ADDR   0F91H   R   SEG=MAIN   2601 2603#
OUTMAX . . . . . .  C ADDR   215FH   R   SEG=MAIN   5159 5258 5277#
OUTMEA . . . . . .  C ADDR   1F4AH   R   SEG=MAIN   4851 4901 4916#
OUTMENU. . . . . .  C ADDR   1A36H   R   SEG=MAIN   4169#
OUTMIN . . . . . .  C ADDR   206AH   R   SEG=MAIN   4990 5088 5108#
OUTR . . . . . . .  C ADDR   0906H   R   SEG=MAIN   1540 1563#
OUTR5. . . . . . .  C ADDR   0922H   R   SEG=MAIN   1561 1582#
OUTSKO . . . . . .  C ADDR   1ADBH   R   SEG=MAIN   4254 4256#
OUTSKO1. . . . . .  C ADDR   1AD8H   R   SEG=MAIN   4252 4255#
OUTVICH. . . . . .  C ADDR   0F00H   R   SEG=MAIN   2519# 2531
OUTVIR . . . . . .  C ADDR   0DBCH   R   SEG=MAIN   2285 2314#
OUT_KALI . . . . .  C ADDR   1E2CH   R   SEG=MAIN   4748#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6830
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5322 5326
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 465
P1 . . . . . . . .  D ADDR   0090H   A      32# 659 660 5385 5387 5390 5393 5397 5399 5400 5452 5454 5456 5892 5899
                                           6430 6433 6435 6438
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 466
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   148

P2 . . . . . . . .  D ADDR   00A0H   A      47# 5418 5422 5431
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 467
P3 . . . . . . . .  D ADDR   00B0H   A      62# 476 2248 2284 2286 2288 2289 2292 2293 2297 2298 2300 2301 2303 2304
                                           2306 2307 2309 2310 2491 2492 2498 2499 2530 2531 2534 2535 2542 2543 2550
                                           2551 2559 2560 2605 2606 2616 2617 2639 2640 2653 2654 2664 2665 2689 2690
                                           2691 2692 2704 2705 2713 2714 2721 2722 2730 2731 2769 2770 2804 2805 2813
                                           2814 2851 2852 2883 2915 2955 2957 2959 2960 2963 2964 2966 2967 2969 2970
                                           2972 2973 2975 2976 2978 2979 3084 3087 3113 3114 3138 3139 3152 3153 3159
                                           3160 3173 3174 3218 3219 3310 3311 3313 3314 3317 3318 3359 3360 3376 3377
                                           3378 3379 3433 3434 3565 3566 3576 3577 3667 3668 3669 3670 3741 3742 3771
                                           3772 3815 3816 3817 3818 3835 3836 3837 3838 3856 3857 3858 3859 3866 3867
                                           3909 3910 3911 3912 4033 4034 4122 4123 4191 4192 4204 4205 4221 4222 4223
                                           4224 4264 4265 4281 4282 4288 4289 4290 4291 4462 4463 4464 4465 4471 4472
                                           4477 4478 4514 4515 4607 5417 5419 5421 5427 5428 5429 5432 5433
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2247 2258 2882 2914 2929 4606
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 469
P4 . . . . . . . .  D ADDR   0084H   A      20# 2068 2089 2136 2219 2396 2398 4734 5510 5513 5529 5531 5995
P5 . . . . . . . .  D ADDR   0085H   A      21# 573 582 2070 2091 2138 2141 2146 2181 2183 2221 2406 2408 4738 5518
                                           5521 5551 5554 5999
P6 . . . . . . . .  D ADDR   0086H   A      22# 1946 1948 1952 1954 2885 2887 2891 2893 4610 4612 4616 4618
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 470
PACK1. . . . . . .  C ADDR   00DEH   A      7631# 7846 8023 8125 8342
PARERR . . . . . .  C ADDR   1B99H   R   SEG=MAIN   4320 4322 4324 4364#
PARN . . . . . . .  D ADDR   00AFH   A      390# 579 1733 2472 3246
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 574 796 1136 1178 1205 1220 1742 1798 1976 2108 2366 2436 2473 2994
                                           3229 3245 3714 3801 5522 5919
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215 519
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 518
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 517
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 516 1956 1958 2895 2897 4620 4622 5304 5306
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 463
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 464 515
PCON . . . . . . .  D ADDR   0087H   A      23# 510
POIN3. . . . . . .  C ADDR   1C87H   R   SEG=MAIN   4512# 4566
POINA. . . . . . .  C ADDR   1CEFH   R   SEG=MAIN   4510 4565#
POINA1 . . . . . .  C ADDR   1C6CH   R   SEG=MAIN   4482 4489#
POINA2 . . . . . .  C ADDR   1C66H   R   SEG=MAIN   4485# 4490
POZB . . . . . . .  C ADDR   1D12H   R   SEG=MAIN   4579 4583#
PROD . . . . . . .  N NUMB   000CH   A      7568# 7912 7913 7914 7915 7935 7936 7937 7939 7940 7942 7943 7945 7967
                                           7969 7970 7972 7973 7975 7976 7978 7997 7998 7999 8001 8002 8004 8005 8007
                                           8018 8019 8020 8021 8042 8043 8044 8045 8061 8063 8064 8066 8067 8069 8070
                                           8072 8102 8119 8120 8121 8122
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8373 8377 8430 8433
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2261 2872 2932 4604 6339 6341 7303
                                           7311
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   149

PYSKST . . . . . .  C ADDR   0DC6H   R   SEG=MAIN   2308 2320#
QUES . . . . . . .  C ADDR   14CFH   R   SEG=MAIN   3372# 3377
QU_AVP . . . . . .  C ADDR   0791H   R   SEG=MAIN   1364 1366#
R10. . . . . . . .  N NUMB   000AH   A      450# 1167 1419 1456 1468 1995 4323 5967 8396
R11. . . . . . . .  N NUMB   000BH   A      451# 1168 1418 1457 1467 1998 5971 8400
R8 . . . . . . . .  N NUMB   0008H   A      448# 525 1421 1454 1470 1989 4148 4319 5472 5959 8388
R9 . . . . . . . .  N NUMB   0009H   A      449# 1420 1455 1469 1992 4321 5473 5963 8392
RAFTERK. . . . . .  C ADDR   062DH   R   SEG=MAIN   1175# 1181
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   151CH   R   SEG=MAIN   3429# 3434
RE1. . . . . . . .  C ADDR   2266H   R   SEG=MAIN   5452# 5458
RE11_7 . . . . . .  C ADDR   06D5H   R   SEG=MAIN   1277# 1319 1330
RE4BYTE. . . . . .  C ADDR   0454H   A      524 4147 4317 8384#
REA3_X . . . . . .  C ADDR   2990H   R   SEG=MAIN   3955 6583#
REACP. . . . . . .  D ADDR   0077H   A      304# 674 676 678 680 737 753 761 769 778 785 800 835 853 869 885 2155
                                           2157 2159 2161 2193 2195 2197 2199
READ . . . . . . .  C ADDR   2264H   R   SEG=MAIN   673 675 677 5451#
READYACP . . . . .  C ADDR   0325H   R   SEG=MAIN   779 789#
READ_X2. . . . . .  C ADDR   224CH   R   SEG=MAIN   5426# 5437
REBYTE . . . . . .  C ADDR   0278H   R   SEG=MAIN   658# 692 714 826 2094 2116 2122 2148 2186 2224 2233 2235
REBYTE2. . . . . .  C ADDR   046CH   A      1269 1277 1295 1311 1322 1338 4754 4762 8404#
REBYTER. . . . . .  C ADDR   0C6BH   R   SEG=MAIN   2105 2122#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 471
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   125BH   R   SEG=MAIN   3041# 3043
RESAR2 . . . . . .  C ADDR   28B4H   R   SEG=MAIN   801 836 854 870 886 898 934 1016 1072 1193 1238 1346 1370 1436
                                           1459 1486 1674 1893 2042 2081 2107 3071 4675 4683 4702 4780 4802 4909 4921
                                           4936 5035 5093 5109 5123 5205 5263 5278 5295 6095 6408# 6567
RESAR8 . . . . . .  C ADDR   2872H   R   SEG=MAIN   1149 1199 1241 1249 1375 2168 2206 6347#
RESA_HL. . . . . .  C ADDR   295DH   R   SEG=MAIN   1924 4841 4854 4998 5011 5167 5180 6544#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2203
REZAP. . . . . . .  D ADDR   0088H   A      375# 2165
REZMUL . . . . . .  C ADDR   0685H   R   SEG=MAIN   1213 1227 1236#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 814 887 897 933 1015 1071 2080
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1198 1374 1412 1621 2358 3062 3072 3079
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1130 1196 1237 1351 1369 1388
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1371
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1201 1377 1435 1673 1803 3070 4674 4779 6566 6597
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4441 4682
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1142 1151 1192 1251 1345
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 816
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1472 1485
RE_HL. . . . . . .  C ADDR   2964H   R   SEG=MAIN   6547# 6557 6561 6564
RE_HL1 . . . . . .  C ADDR   296CH   R   SEG=MAIN   6545 6555#
RE_HL2 . . . . . .  C ADDR   2973H   R   SEG=MAIN   6555 6559#
RE_HL3 . . . . . .  C ADDR   297AH   R   SEG=MAIN   6559 6563#
RFINDMEM . . . . .  C ADDR   0FBEH   R   SEG=MAIN   2630# 2631
RGO23NO. . . . . .  C ADDR   151FH   R   SEG=MAIN   3430# 3435
RGOTO7 . . . . . .  C ADDR   16F7H   R   SEG=MAIN   3738# 3772
RHNOR11. . . . . .  C ADDR   1305H   R   SEG=MAIN   3112 3124 3130#
RHNOT1 . . . . . .  C ADDR   12CCH   R   SEG=MAIN   3087 3096#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0FE2H   R   SEG=MAIN   2637 2649#
RI6. . . . . . . .  C ADDR   0FDCH   R   SEG=MAIN   2640 2645# 2654 2665 2688 2692
RIGBLO . . . . . .  C ADDR   10C5H   R   SEG=MAIN   2769# 2800 2802
RIGBLOK. . . . . .  C ADDR   1103H   R   SEG=MAIN   2813#
RIGHT2 . . . . . .  C ADDR   0DEDH   R   SEG=MAIN   2335 2339#
RIGHT3 . . . . . .  C ADDR   0DF1H   R   SEG=MAIN   2337 2342#
RIKN . . . . . . .  C ADDR   0F69H   R   SEG=MAIN   2566# 2584
RIZMAN . . . . . .  C ADDR   0D3AH   R   SEG=MAIN   2244# 2294
RI_31. . . . . . .  C ADDR   0FFCH   R   SEG=MAIN   2652 2661#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   150

RKNLEFT. . . . . .  C ADDR   1186H   R   SEG=MAIN   2912# 2971
RKNMEM . . . . . .  C ADDR   1190H   R   SEG=MAIN   2918# 2977
RKNNUL . . . . . .  C ADDR   1183H   R   SEG=MAIN   2911# 2965
RKNOPT . . . . . .  C ADDR   0D37H   R   SEG=MAIN   2243# 2305
RKNRAZR. . . . . .  C ADDR   0D34H   R   SEG=MAIN   2242# 2299
RKVVOD0. . . . . .  C ADDR   1463H   R   SEG=MAIN   3319 3326#
RLABELF. . . . . .  C ADDR   0D31H   R   SEG=MAIN   2241# 2291
RLABELH. . . . . .  C ADDR   1180H   R   SEG=MAIN   2910# 2962
RLABELI. . . . . .  C ADDR   12D2H   R   SEG=MAIN   3099#
RLABELK. . . . . .  C ADDR   12CFH   R   SEG=MAIN   3098# 3101
RLABELL. . . . . .  C ADDR   0FBBH   R   SEG=MAIN   2629#
RLABELL1 . . . . .  C ADDR   1138H   R   SEG=MAIN   2852 2855#
RLABELN. . . . . .  C ADDR   103FH   R   SEG=MAIN   2690 2694#
RLABELP. . . . . .  C ADDR   19D1H   R   SEG=MAIN   4120# 4123
RLABELS13. . . . .  C ADDR   1AE5H   R   SEG=MAIN   4261# 4289
RLABELS4 . . . . .  C ADDR   1AE2H   R   SEG=MAIN   4260# 4263
RLABL2 . . . . . .  C ADDR   14C9H   R   SEG=MAIN   3370#
RLABM. . . . . . .  C ADDR   14CCH   R   SEG=MAIN   3371# 3375
RLEFCUR. . . . . .  C ADDR   179EH   R   SEG=MAIN   3832# 3836
RLER . . . . . . .  C ADDR   25E5H   R   SEG=MAIN   6078 6080#
RLIST_43 . . . . .  C ADDR   1835H   R   SEG=MAIN   3906# 3908
RMAS4. . . . . . .  C ADDR   0476H   R   SEG=MAIN   959# 961
RME21_23 . . . . .  C ADDR   1805H   R   SEG=MAIN   3864 3883#
RMO220 . . . . . .  C ADDR   0667H   R   SEG=MAIN   1215# 1262
RNNMEMB. . . . . .  C ADDR   1045H   R   SEG=MAIN   2697# 2700
RNO3PARN . . . . .  C ADDR   09EEH   R   SEG=MAIN   1720# 1734
RNOBUF0. . . . . .  C ADDR   0B0BH   R   SEG=MAIN   1897 1920#
RNOCHI0. . . . . .  C ADDR   07B9H   R   SEG=MAIN   1383 1387#
RNOH37 . . . . . .  C ADDR   1329H   R   SEG=MAIN   3149# 3153 3160 3174
RNOM31 . . . . . .  C ADDR   1675H   R   SEG=MAIN   3665# 3666
RNOMEMK. . . . . .  C ADDR   141AH   R   SEG=MAIN   3286# 3308
RNORVICH . . . . .  C ADDR   09ECH   R   SEG=MAIN   1662 1663 1719#
RNOT1IN. . . . . .  C ADDR   0AC0H   R   SEG=MAIN   1800 1870#
RNOTESTIZM . . . .  C ADDR   067DH   R   SEG=MAIN   1229# 1264
ROUSTA . . . . . .  C ADDR   19BDH   R   SEG=MAIN   4104 4112#
ROUSTA1. . . . . .  C ADDR   19CEH   R   SEG=MAIN   4112 4118#
ROUT6. . . . . . .  C ADDR   0D2EH   R   SEG=MAIN   2240# 2290
ROUT7. . . . . . .  C ADDR   117DH   R   SEG=MAIN   2909# 2956 2961
ROUTF. . . . . . .  C ADDR   1326H   R   SEG=MAIN   3145# 3219
ROUTMAX. . . . . .  C ADDR   20BDH   R   SEG=MAIN   5159# 5177
ROUTMIN. . . . . .  C ADDR   1FC8H   R   SEG=MAIN   4990# 5008
RR0. . . . . . . .  N NUMB   0000H   A      441# 2262 2871 2933 4603
RR1. . . . . . . .  N NUMB   0001H   A      442# 2263 2870 2934 4602
RR2. . . . . . . .  N NUMB   0002H   A      444# 1271 1283 1289 1301 1313 1324 2264 2869 2935 3934 3942 4601 4756
                                           4768 4774 4786 5485
RR3. . . . . . . .  N NUMB   0003H   A      445# 1272 1282 1290 1300 1314 1325 2265 2868 2936 3935 3941 4600 4757
                                           4767 4775 4785 5486
RR4. . . . . . . .  N NUMB   0004H   A      1273 1281 1291 1299 1315 1326 2266 2867 2937 3936 3940 4599 4758 4766
                                           4776 4784 6632# 6689 6710 6726 6770 6792
RR5. . . . . . . .  N NUMB   0005H   A      1274 1280 1292 1298 1316 1327 2267 2866 2938 3937 3939 4598 4759 4765
                                           4777 4783 6633# 6690 6697 6704 6771 6780
RR6. . . . . . . .  N NUMB   0006H   A      443# 2268 2865 2939 4597
RR7. . . . . . . .  N NUMB   0007H   A      446# 2269 2864 2940 4596
RRIR . . . . . . .  C ADDR   25F2H   R   SEG=MAIN   6089 6091#
RRMO220. . . . . .  C ADDR   07B6H   R   SEG=MAIN   1360 1386#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   098BH   R   SEG=MAIN   1652# 1664 1666 1667
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 501
RTIZMRI. . . . . .  C ADDR   0ECAH   R   SEG=MAIN   2489#
RVVIZKO. . . . . .  C ADDR   1307H   R   SEG=MAIN   3132# 3140
RVVKALI52. . . . .  C ADDR   1B11H   R   SEG=MAIN   4282 4284#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   151

SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 578 1932 3987
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1935 3990
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1938 3993
SADIAP4. . . . . .  D ADDR   0030H   A      318# 1941 3995
SAUS . . . . . . .  D ADDR   0036H   A      313# 2069 2071 2088 2090 2137 2139 2218 2220
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2282 2579 2597 2783 2827 2847 2952 3595 3650 3755 4271 4398 4504
                                           6154 6162
SAVEIR2. . . . . .  C ADDR   27F6H   R   SEG=MAIN   900 937 1019 1075 6247#
SAVELTE. . . . . .  C ADDR   04A7H   A      8467#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 599 3526 6515 6546
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 607 3541 6534 6556
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 614 3546 6538 6560
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 621 3550 6540 6563
SAVER2 . . . . . .  C ADDR   2802H   R   SEG=MAIN   591 593 595 597 805 815 817 840 858 874 888 1131 1143 1152 1197
                                           1202 1252 1352 1372 1378 1389 1473 1477 1678 2001 2047 2086 2115 2166 2178
                                           2204 2216 3073 3080 3965 4442 4534 4692 4794 4912 4924 4944 5038 5103 5119
                                           5134 5208 5273 5288 5300 6098 6261# 6598
SAVE_HL. . . . . .  C ADDR   2929H   R   SEG=MAIN   1927 3421 3796 6513#
SA_HL. . . . . . .  C ADDR   2930H   R   SEG=MAIN   6516# 6535 6539 6541
SA_HL1 . . . . . .  C ADDR   294BH   R   SEG=MAIN   6514 6533#
SA_HL2 . . . . . .  C ADDR   2952H   R   SEG=MAIN   6533 6537#
SA_HL3 . . . . . .  C ADDR   2959H   R   SEG=MAIN   6537 6540#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5341 5347
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 509 5342 5346 5349 5350 5371
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   220EH   R   SEG=MAIN   5385# 5392
SDV1 . . . . . . .  C ADDR   2222H   R   SEG=MAIN   5397# 5403
SDVIG0 . . . . . .  C ADDR   0306H   R   SEG=MAIN   765# 767
SDVIG1 . . . . . .  C ADDR   02FBH   R   SEG=MAIN   757# 759
SDVIG2 . . . . . .  C ADDR   02F0H   R   SEG=MAIN   749# 751
SDVIG3 . . . . . .  C ADDR   02E4H   R   SEG=MAIN   740# 742
SDVIG4 . . . . . .  C ADDR   0315H   R   SEG=MAIN   775# 777
SDVIG6 . . . . . .  C ADDR   031FH   R   SEG=MAIN   782# 784
SDVM . . . . . . .  C ADDR   031DH   R   SEG=MAIN   772 781#
SEEGOON. . . . . .  C ADDR   09F3H   R   SEG=MAIN   1704 1709 1711 1717 1724#
SEEIND . . . . . .  C ADDR   0A01H   R   SEG=MAIN   1644 1651 1652 1736#
SEE_L43. . . . . .  C ADDR   190CH   R   SEG=MAIN   4004 4012 4015#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7563# 7584 7585 7610 7611 7635 7778 7795 8016 8056
SKOR19 . . . . . .  C ADDR   1A1CH   R   SEG=MAIN   4149 4156#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   1396H   R   SEG=MAIN   3214# 3230
SP . . . . . . . .  D ADDR   0081H   A      17# 462
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 507
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 506
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5324
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   1ABDH   R   SEG=MAIN   4239 4241#
SS1. . . . . . . .  C ADDR   2344H   R   SEG=MAIN   5634# 5636
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 802 804 819 837 839 855 857 871 873 1410 1619 2356 3060
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   152

SUMT2. . . . . . .  C ADDR   0371H   R   SEG=MAIN   793 834#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196 520 1963 2902 4627 5309
T2MSME . . . . . .  C ADDR   1762H   R   SEG=MAIN   3804# 3810
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   24E4H   R   SEG=MAIN   5910# 5920
TABN . . . . . . .  C ADDR   257CH   R   SEG=MAIN   6012# 6016
TABT11 . . . . . .  C ADDR   22FCH   R   SEG=MAIN   5571# 5992
TABT7. . . . . . .  C ADDR   2300H   R   SEG=MAIN   4731 5575# 6005
TABT9. . . . . . .  C ADDR   22FEH   R   SEG=MAIN   5573# 6002
TABUS. . . . . . .  C ADDR   22E8H   R   SEG=MAIN   5507 5560#
TAKTIND. . . . . .  C ADDR   0A3EH   R   SEG=MAIN   1771 1774#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 498 499 513
TE10MS . . . . . .  C ADDR   2648H   R   SEG=MAIN   3803 6177#
TE22 . . . . . . .  C ADDR   256FH   R   SEG=MAIN   5991 6001#
TE23 . . . . . . .  C ADDR   2577H   R   SEG=MAIN   6001 6005#
TE2MS. . . . . . .  C ADDR   263EH   R   SEG=MAIN   3809 6176#
TEAEQU0. . . . . .  C ADDR   2684H   R   SEG=MAIN   3187 6185#
TEAVK. . . . . . .  C ADDR   26C0H   R   SEG=MAIN   4648 6192#
TEBEQU0. . . . . .  C ADDR   268EH   R   SEG=MAIN   6186#
TEBL . . . . . . .  C ADDR   2774H   R   SEG=MAIN   2742 3363 6214#
TEBL0. . . . . . .  C ADDR   277EH   R   SEG=MAIN   3614 6215#
TECH . . . . . . .  C ADDR   2788H   R   SEG=MAIN   3895 4062 6216#
TECLE. . . . . . .  C ADDR   2739H   R   SEG=MAIN   2734 3331 6208#
TEEND. . . . . . .  C ADDR   27D8H   R   SEG=MAIN   4745 6225#
TEERR. . . . . . .  C ADDR   27CEH   R   SEG=MAIN   6169 6224#
TEFULL . . . . . .  C ADDR   2760H   R   SEG=MAIN   2749 3581 6212#
TEINT. . . . . . .  C ADDR   276AH   R   SEG=MAIN   3681 6213#
TEIZMK . . . . . .  C ADDR   271BH   R   SEG=MAIN   2537 3117 3126 6205#
TEKALIB. . . . . .  C ADDR   26CAH   R   SEG=MAIN   3871 4651 6193#
TEKAOUT. . . . . .  C ADDR   0C6EH   R   SEG=MAIN   2124# 2132
TEKD . . . . . . .  C ADDR   2711H   R   SEG=MAIN   4328 6204#
TELIST . . . . . .  C ADDR   2755H   R   SEG=MAIN   2717 3272 3342 3348 6211#
TEMAX. . . . . . .  C ADDR   27A6H   R   SEG=MAIN   4098 6219#
TEMEM. . . . . . .  C ADDR   2743H   R   SEG=MAIN   6209#
TEMENU . . . . . .  C ADDR   2698H   R   SEG=MAIN   6187#
TEMID. . . . . . .  C ADDR   27B0H   R   SEG=MAIN   4106 6220#
TEMIN. . . . . . .  C ADDR   279CH   R   SEG=MAIN   3626 4114 6218#
TEMUL. . . . . . .  C ADDR   0764H   R   SEG=MAIN   1307 1344#
TENMIN . . . . . .  C ADDR   23E6H   R   SEG=MAIN   1210 1212 1226 5702#
TEOLI. . . . . . .  C ADDR   27BAH   R   SEG=MAIN   1511 6222#
TEOLL. . . . . . .  C ADDR   272FH   R   SEG=MAIN   1605 6207#
TEOLR. . . . . . .  C ADDR   27C4H   R   SEG=MAIN   1507 6223#
TEOUT. . . . . . .  C ADDR   2725H   R   SEG=MAIN   6206#
TEPAR. . . . . . .  C ADDR   2707H   R   SEG=MAIN   4668 6203#
TES19_2. . . . . .  C ADDR   26FDH   R   SEG=MAIN   530 2674 4156 4380 6201#
TES57_6. . . . . .  C ADDR   26F3H   R   SEG=MAIN   2668 4150 4375 4664 6200#
TESKOR . . . . . .  C ADDR   26B6H   R   SEG=MAIN   4645 6191#
TEST01 . . . . . .  C ADDR   21C7H   R   SEG=MAIN   5346# 5369
TEST02 . . . . . .  C ADDR   21F6H   R   SEG=MAIN   5366 5368#
TEST04 . . . . . .  C ADDR   21D7H   R   SEG=MAIN   5353# 5355
TEST1. . . . . . .  C ADDR   21BDH   R   SEG=MAIN   5341# 5357 5378
TEST2. . . . . . .  C ADDR   21EFH   R   SEG=MAIN   5346 5365#
TEST22 . . . . . .  C ADDR   1A92H   R   SEG=MAIN   4206 4213#
TEST23 . . . . . .  C ADDR   1A97H   R   SEG=MAIN   4213 4216#
TEST3. . . . . . .  C ADDR   21E1H   R   SEG=MAIN   5348 5358#
TEST4. . . . . . .  C ADDR   21CFH   R   SEG=MAIN   5349# 5364
TEST5. . . . . . .  C ADDR   21F9H   R   SEG=MAIN   5367 5370#
TEST7I . . . . . .  C ADDR   0A56H   R   SEG=MAIN   1786 1789#
TEST9I . . . . . .  C ADDR   0A4FH   R   SEG=MAIN   1781 1786#
TESTAT . . . . . .  C ADDR   2792H   R   SEG=MAIN   2725 3322 6217#
TESTRS . . . . . .  C ADDR   21BBH   R   SEG=MAIN   4139 5339#
TESTS. . . . . . .  C ADDR   1A86H   R   SEG=MAIN   4208# 4215 4218
TETE11 . . . . . .  C ADDR   26D5H   R   SEG=MAIN   4128 4655 6195#
TETE7. . . . . . .  C ADDR   26E9H   R   SEG=MAIN   4195 4661 6197#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   153

TETE9. . . . . . .  C ADDR   26DFH   R   SEG=MAIN   4658 6196#
TETESI . . . . . .  C ADDR   26A2H   R   SEG=MAIN   3021 4638 6189#
TETESR . . . . . .  C ADDR   26ACH   R   SEG=MAIN   4642 6190#
TEVICH . . . . . .  C ADDR   267AH   R   SEG=MAIN   2379 2545 2553 3122 4543 6184#
TEWR . . . . . . .  C ADDR   274BH   R   SEG=MAIN   2708 3337 6210#
TEXTT. . . . . . .  C ADDR   263EH   R   SEG=MAIN   5587 6175#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 481
TH1. . . . . . . .  D ADDR   008DH   A      29# 528 532 4253 4255
TH2. . . . . . . .  D ADDR   00CDH   A      89# 1960 2899 4624
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   2232H   R   SEG=MAIN   5406#
TIM1 . . . . . . .  C ADDR   2234H   R   SEG=MAIN   5407# 5407
TIM2 . . . . . . .  C ADDR   2237H   R   SEG=MAIN   5388 5391 5398 5402 5410# 5453 5457 6434 6436
TIM3 . . . . . . .  C ADDR   2239H   R   SEG=MAIN   5411# 5411
TIZMRI . . . . . .  C ADDR   0DE6H   R   SEG=MAIN   2334# 2489
TL0. . . . . . . .  D ADDR   008AH   A      26# 482
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88# 1961 2900 4625
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1393H   R   SEG=MAIN   3199 3211#
TMOD . . . . . . .  D ADDR   0089H   A      25# 479 512
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 496
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 495
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   19FDH   R   SEG=MAIN   4137 4142#
TOME14 . . . . . .  C ADDR   1A2AH   R   SEG=MAIN   4142 4163#
TOME15 . . . . . .  C ADDR   1A42H   R   SEG=MAIN   4163 4175#
TOME21 . . . . . .  C ADDR   19F4H   R   SEG=MAIN   4126 4137#
TOSK19 . . . . . .  C ADDR   1BC1H   R   SEG=MAIN   4374 4380#
TOUTF. . . . . . .  C ADDR   1310H   R   SEG=MAIN   3136# 3139
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0ECDH   R   SEG=MAIN   2491# 2500
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5325
UNPACK1. . . . . .  C ADDR   009EH   A      7581# 7775 7909 8039 8153
UNPACK2. . . . . .  C ADDR   00BAH   A      7606# 7776 7910 8040
UP1. . . . . . . .  C ADDR   0138H   A      7726# 7743
UP2. . . . . . . .  C ADDR   014BH   A      7746# 7764
UP2A . . . . . . .  C ADDR   0161H   A      7725 7762#
UPA. . . . . . . .  C ADDR   2415H   R   SEG=MAIN   5757# 5763
UPA1 . . . . . . .  C ADDR   2425H   R   SEG=MAIN   5775# 5781
UPA2 . . . . . . .  C ADDR   2405H   R   SEG=MAIN   5738# 5744
UPAA . . . . . . .  C ADDR   2901H   R   SEG=MAIN   6482# 6488
UPAA4. . . . . . .  C ADDR   2470H   R   SEG=MAIN   5838# 5844
UPAB . . . . . . .  C ADDR   2480H   R   SEG=MAIN   5855# 5861
UPAK . . . . . . .  C ADDR   240FH   R   SEG=MAIN   5754#
UPAK1. . . . . . .  C ADDR   28DBH   R   SEG=MAIN   6447#
UPAK2. . . . . . .  C ADDR   23FFH   R   SEG=MAIN   5735#
UPAK3. . . . . . .  C ADDR   241FH   R   SEG=MAIN   3824 3919 5772#
UPAK4. . . . . . .  C ADDR   28FBH   R   SEG=MAIN   3778 6479#
UPAKA. . . . . . .  C ADDR   246AH   R   SEG=MAIN   4526 5835#
UPAKB. . . . . . .  C ADDR   247AH   R   SEG=MAIN   4573 5852#
UPAV1. . . . . . .  C ADDR   1B30H   R   SEG=MAIN   4308# 4314
UPAV2. . . . . . .  C ADDR   1BF3H   R   SEG=MAIN   4425# 4431
UPK1 . . . . . . .  C ADDR   28EDH   R   SEG=MAIN   6455 6458#
UPK2 . . . . . . .  C ADDR   28EEH   R   SEG=MAIN   6457 6459#
VICHMAX. . . . . .  C ADDR   20C0H   R   SEG=MAIN   4100 5161#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   154

VICHMEAN . . . . .  C ADDR   1ECCH   R   SEG=MAIN   4108 4834#
VICHMIN. . . . . .  C ADDR   1FCBH   R   SEG=MAIN   3628 4116 4992#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1265 1777 2376 2385 2519 2532 2633 2641 3025 3029 3037 3111 3178
                                           3290 3860 3868 3877 4121 4172 4186 4326 4517 4556 4588 4636 5990
VIG0 . . . . . . .  C ADDR   0AACH   R   SEG=MAIN   1854# 1856
VIG4 . . . . . . .  C ADDR   0ABAH   R   SEG=MAIN   1865# 1867
VIOUT. . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2382 2464# 2492
VIOUTF . . . . . .  C ADDR   1309H   R   SEG=MAIN   3133#
VIT2_10. . . . . .  C ADDR   0E14H   R   SEG=MAIN   2364# 2370 2371
VODM11_15. . . . .  C ADDR   17C1H   R   SEG=MAIN   3849# 3867
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2322 3791 6523 6525
VV21_23. . . . . .  C ADDR   1A7DH   R   SEG=MAIN   4192 4204#
VVCHIBL. . . . . .  C ADDR   25B3H   R   SEG=MAIN   2620 6044#
VVCHIF . . . . . .  C ADDR   258EH   R   SEG=MAIN   6020# 6037
VVINTE . . . . . .  C ADDR   1722H   R   SEG=MAIN   3742 3770#
VVIZKO . . . . . .  C ADDR   1360H   R   SEG=MAIN   3132 3178#
VVKALI52 . . . . .  C ADDR   1BE6H   R   SEG=MAIN   4284 4409# 4461
VVMENU . . . . . .  C ADDR   1B96H   R   SEG=MAIN   4291 4362#
VVNOL23. . . . . .  C ADDR   25AEH   R   SEG=MAIN   6041# 6045
VVNOL31. . . . . .  C ADDR   25A9H   R   SEG=MAIN   6039# 6041
VVNOL41. . . . . .  C ADDR   25A7H   R   SEG=MAIN   6037# 6039
VVOD2_10 . . . . .  C ADDR   175AH   R   SEG=MAIN   3299 3426 3537 3801#
VVOD43 . . . . . .  C ADDR   1938H   R   SEG=MAIN   4034 4041#
VVODM11_15 . . . .  C ADDR   19D4H   R   SEG=MAIN   3849 4121#
VVOSTA . . . . . .  C ADDR   1995H   R   SEG=MAIN   4077 4096#
VVOSTAD. . . . . .  C ADDR   19A9H   R   SEG=MAIN   4096 4104#
VVRR6. . . . . . .  C ADDR   0F29H   R   SEG=MAIN   2537#
VV_52V . . . . . .  C ADDR   1B08H   R   SEG=MAIN   4265 4281#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 477 478
WORK . . . . . . .  D ADDR   00B8H   A      396# 1492 1494 1500 1516 1523 1539 1560 1565 1581 1805 1883 3393 3403
                                           3405 3439 3449 3451 3461 3471 3473 3480 3490 3492 3502 3512 3514 4861 4908
                                           4911 4920 4923 4935 5016 5034 5037 5092 5102 5108 5118 5122 5186 5204 5207
                                           5262 5272 5277 5287 5343 5365
WR1. . . . . . . .  C ADDR   28C8H   R   SEG=MAIN   6430# 6437
WRITE. . . . . . .  C ADDR   28C5H   R   SEG=MAIN   671 5881 5883 5885 5887 5889 5891 5894 5896 5898 5901 5903 5905
                                           6428#
WRITED_X1. . . . .  C ADDR   223DH   R   SEG=MAIN   5416#
WRITE_X1 . . . . .  C ADDR   223CH   R   SEG=MAIN   5415#
WRPAGE . . . . . .  C ADDR   0480H   A      4250 4724 4826 8428#
WW5. . . . . . . .  C ADDR   0483H   A      8429# 8437
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 473 505
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 474
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 475 504
XCIKLWR. . . . . .  C ADDR   27E2H   R   SEG=MAIN   895 908 910 912 915 918 921 924 927 930 963 965 967 970 973 976
                                           979 982 985 987 990 992 994 997 1000 1003 1006 1009 1012 1064 1066 1068
                                           6230#
XTEMP. . . . . . .  N NUMB   000CH   A      6629# 6993 6994 6995 6996 7082 7084 7085 7087 7088 7090 7091 7093 7115
                                           7116 7117 7118 7136 7137 7141 7142 7145 7149 7150 7153 7157 7158 7162 7163
                                           7165 7166 7167 7169 7173 7174 7176 7177 7181 7182 7187 7188 7190 7191 7195
                                           7196 7201 7203 7204 7205
YBNUL. . . . . . .  C ADDR   12A1H   R   SEG=MAIN   3068 3076#
YES. . . . . . . .  C ADDR   2B30H   R   SEG=MAIN   7015 7019 7023 7027 7045# 7108
YES0KEY. . . . . .  C ADDR   02C0H   R   SEG=MAIN   701 713#
YES0KEY1 . . . . .  C ADDR   02CDH   R   SEG=MAIN   720# 727
YESAVP . . . . . .  C ADDR   07C3H   R   SEG=MAIN   1366 1392#
YESBUF . . . . . .  C ADDR   0B10H   R   SEG=MAIN   1918 1923#
YESIND . . . . . .  C ADDR   0A58H   R   SEG=MAIN   1776 1785 1788 1791#
YESPRD . . . . . .  C ADDR   0B0EH   R   SEG=MAIN   1917 1921#
YESTEST. . . . . .  C ADDR   22D7H   R   SEG=MAIN   5502 5534#
YESTT5 . . . . . .  C ADDR   0BDAH   R   SEG=MAIN   2039#
YESVICH. . . . . .  C ADDR   080EH   R   SEG=MAIN   1380 1431#
YESVI_KM . . . . .  C ADDR   1E35H   R   SEG=MAIN   4671 4751#
YESVI_KR . . . . .  C ADDR   1DADH   R   SEG=MAIN   4671# 4673
YST1 . . . . . . .  C ADDR   01A2H   R   SEG=MAIN   529 533#
YST19. . . . . . .  C ADDR   019AH   R   SEG=MAIN   526 530#
A51 MACRO ASSEMBLER  AMP34_2                                                              02/27/2007 17:01:06 PAGE   155

Z01S . . . . . . .  C ADDR   235CH   R   SEG=MAIN   5651# 5653
Z05S . . . . . . .  C ADDR   2369H   R   SEG=MAIN   5660# 5662
Z100 . . . . . . .  C ADDR   232DH   R   SEG=MAIN   5615# 5617
Z15. . . . . . . .  C ADDR   233BH   R   SEG=MAIN   5627# 5629
Z1S. . . . . . . .  C ADDR   234FH   R   SEG=MAIN   5643# 5645
ZAPADC . . . . . .  C ADDR   220CH   R   SEG=MAIN   5384#
ZCMP . . . . . . .  C ADDR   2864H   R   SEG=MAIN   6337#
ZDIV . . . . . . .  C ADDR   2831H   R   SEG=MAIN   813 1123 3958 6300#
ZER1 . . . . . . .  C ADDR   00B3H   A      7591 7595# 7650 7693
ZER2 . . . . . . .  C ADDR   00D4H   A      7617 7621#
ZMUL . . . . . . .  C ADDR   2827H   R   SEG=MAIN   6295#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1698 3983 4962 5152 6308 6311 6314
ZNPLUS . . . . . .  C ADDR   02D7H   R   SEG=MAIN   682 729#
ZZ . . . . . . . .  C ADDR   233DH   R   SEG=MAIN   5628# 5628
Z_01S. . . . . . .  C ADDR   2358H   R   SEG=MAIN   2274 2275 2945 5363 5377 5649# 6166
Z_05S. . . . . . .  C ADDR   2365H   R   SEG=MAIN   2033 2034 2745 4101 4109 4117 5658#
Z_100. . . . . . .  C ADDR   232BH   R   SEG=MAIN   5614#
Z_15 . . . . . . .  C ADDR   2339H   R   SEG=MAIN   650 5626#
Z_1MS. . . . . . .  C ADDR   2342H   R   SEG=MAIN   720 5370 5633#
Z_1S . . . . . . .  C ADDR   234BH   R   SEG=MAIN   639 647 1427 2381 3629 3902 4023 4075 4367 4453 4555 4748 4749
                                           5641#
Z_5. . . . . . . .  C ADDR   2334H   R   SEG=MAIN   5420 5430 5621#
Z_9. . . . . . . .  C ADDR   28C0H   R   SEG=MAIN   5327 6422#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
