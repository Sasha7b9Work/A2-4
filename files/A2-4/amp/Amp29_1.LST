A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp29_1.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp29_1.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока
                     315     ;DATA           33H
                     316     ;;;;;
  0020               317      cellbit                DATA    20h
  0000               318     bitznak         BIT     cellbit.0       ;20.0           
  0001               319     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               320     znmat           BIT             cellbit.2       ;20.2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     6

  0003               321     bitrs           BIT             cellbit.3       ;20.3
  0004               322     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               323     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               324     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               325     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     326     
  0021               327     cellbit1                DATA    21h
  0008               328     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               329     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               330     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               331     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     332     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               333     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     334     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               335     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     336     
  0022               337     cellbit2                DATA    22h
  0010               338     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               339     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               340     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               341     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               342     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               343     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               344     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               345     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     346     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     347     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     348     ;и выдает т.н. буфер индикации  
  0023               349     cellbit3                DATA    23h
  0018               350     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               351     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               352     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               353     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     354     ;bit            BIT             cellbit3.4      ;22.4    
                     355     ;bit            BIT             cellbit3.5      ;22.5    
                     356     ;bit            BIT             cellbit3.6      ;22.6            
                     357     ;bit            BIT             cellbit3.7      ;22.7
                     358             
  005E               359     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     360     ;hex
  0062               361     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               362     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               363     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               364     rez_A2   data 7bh; A2
                     365     
  0098               366     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               367     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               368     chdel    data  83h              ; счетчик задержки
                     369     ;float
  0084               370     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               371     rezAp    data  88h              ;4byte  A+
  008C               372     rezAm    data  8ch              ;4byte  A-
  0090               373     koefKp   data  90h              ;4byte  K+
  0094               374     koefKm   data  94h              ;4byte  K-
                     375     ;hex 
  009A               376     parT     data  9ah              ;параметр времени измерения
  009B               377     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               378     rez_A3   data  9ch              ;A3
                     379     ;FLOAT
  00A0               380     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               381     rez_Ak  data  0a4h         ;Ak
  00A8               382     parol           data  0a8h         ;храним в памяти пароль
  00AC               383     chind   data  0ach         ;счетчик индикации
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     7

                     384     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               385     diap    data  0aeh         ;номер диапазона
  00AF               386     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               387     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               388     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               389     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               390     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               391     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               392     work    data  0b8h        ;рабочая ячейка
  00BC               393     konstA  data  0bch        ;     введенная с крана константа A
  00C0               394     konstB  data  0c0h         ;    введенная с крана константа B
                     395     ;       data  0c4h         ;
  00C5               396     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               397     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               398     interva data  0cdh;значение интервала (запись)2baita
  00CF               399     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               400     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               401     volume          data    0d5h;объем блока
  00D6               402     chblok          data    0d6h;volume;кол измерений блока
  00D7               403     copy_hl         data  0d7h;копия адреса последней записанной ячейки блока saven_bl
                     404     ;data           0d9h
                     405     
                     406     ;внешнее ОЗУ 64K 
                     407     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     408     ;ячейку  стирается целая страница 0..ffh рпзу
                     409     ;               XSEG AT 100h
                     410             PUBLIC    MASS0
  0100               411     MASS0  xdata 0100h;     скользящий массив измерения
  0104               412     MASS1  xdata 0104h;
  0108               413     MASS2  xdata 0108h;
  010C               414     MASS3  xdata 010ch;
  0110               415     MASS4  xdata 0110h;
  0114               416     MASS5  xdata 0114h;
  0118               417     MASS6  xdata 0118h;
  011C               418     MASS7  xdata 011ch;
  0120               419     MASS8  xdata 0120h;
  0124               420     MASS9  xdata 0124h;
  0128               421     MASS10  xdata 0128h;
  012C               422     MASS11  xdata 012ch;
  0130               423     MASS12  xdata 0130h;
  0134               424     MASS13  xdata 0134h;
  0138               425     MASS14  xdata 0138h;
  013C               426     MASS15  xdata 013ch;
  0140               427     MASS16  xdata 0140h;
  0144               428     MASS17  xdata 0144h;
  0148               429     MASS18  xdata 0148h;
  014C               430     MASS19  xdata 014ch;
                     431     ;xdata 
                     432     
  0000               433                             rr0             EQU 00
  0001               434                     rr1       equ   01
  0006               435                     rr6   equ 06
  0002               436                     rr2       equ   02
  0003               437                     rr3       equ   03
  0007               438                     rr7   equ 07
                     439     
  0008               440                     r8   equ 08
  0009               441                     r9        equ   09
  000A               442                     r10       equ   10
  000B               443                     r11   equ 11
                     444     
                     445                     
                     446        
----                 447                  rseg     Main          ; Switch to this code segment.
                     448     
                     449                  using    0              ; Specify register bank for the following
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     8

                     450     
0100                 451     org 100h
                     452     ;$EJECT
                     453     
0100 7581E0          454     begin:     mov  sp, #0e0h
0103 75E900          455                                             mov             PCA0L,#00;=0x00;
0106 75D900          456                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          457                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          458                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          459                                             mov     P2MDOUT,#00;=0x00;
                     460             
0112 75A73F          461             mov     P3MDOUT,#3fh;
0115 75B5FF          462             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          463             mov     REF0CN,#03h;=0x03;
                     464             
011B 75E114          465             mov     XBR0,#14h;= 0x14;
011E 75E200          466             mov     XBR1,#00; =0x00;
0121 75E300          467             mov XBR2,#00;=0x00;
0124 75B0C0          468             mov     P3,#0c0h
0127 75FFDE          469             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          470             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          471             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          472             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          473             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          474             mov     TL0,#0f9h;=0xf9; 
0139 75E680          475             mov     EIE1,#80h;=0x80;
                     476     
013C 75D480          477             mov     DAC0CN,#80h;=0x80;
013F 75D780          478             mov     DAC1CN,#80h;=0x80;
0142 75B167          479             mov     OSCXCN,#67h;=0x67;
                     480     
                     481      
                     482     
0145 E5B1            483     gener:     mov a, oscxcn
0147 B4E7FB          484                cjne a,#11100111b,gener
                     485                            
014A 75B288          486             mov     OSCICN,#88h;=0x84;
014D 75CA00          487         mov TMR2RLL,#0;=0;
0150 75CBD1          488         mov TMR2RLH,#0d1h;=0xd1;
                     489       
0153 D28E            490                     setb  TCON.6                    ;регистр управления
0155 D28C            491                      setb tcon.4
                     492     
0157 75EF00          493             mov     RSTSRC,#0;=00   ;//источники сброса 
                     494     
                     495             
015A 75E340          496          mov        XBR2,#40h
015D 75E106          497              mov    XBR0,#06h;16h
0160 75F803          498             mov             SPI0CN,#03
0163 759D31          499             mov             spi0ckr,#31H;;;;;;;;#04
                     500     ;установка скорости
0166 759850          501                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          502                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          503                                             mov             CKCON,#00010000b;TIM=1
016F 758920          504                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          505                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            506                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            507                                             mov                     r3,#2ch
0179 120454          508                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            509                                             mov                     a,r8
017E B40007          510                                             cjne            a,#00,yst19
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE     9

0181 C213            511                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          512                                             mov                     TH1,#244
0186 8008            513                                             jmp               yst1
0188 900000   F      514     yst19:          mov                     dptr,#teS19_2
018B D213            515                                             setb            bitv19                  ;19,2
018D 758DDC          516                                             mov                     TH1,#220
0190                 517     yst1:
0190 75E730          518                                             mov             EIE2,#30H;00110000
0193 75A880          519                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     520     ;ozu
0196 E4              521                                             clr     a
0197 7800            522                                             mov     r0,#00h 
0199 F6              523     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              524                                             inc     r0
019B B87FFB          525                                             cjne    r0,#7fh,mecle
019E 7880            526                                             mov     r0,#80h
01A0 F6              527     meff:                   mov     @r0,a 
01A1 F2              528                                             movx @r0,a
01A2 08              529                                             inc     r0
01A3 B8DFFA          530                             cjne    r0,#0dfh,meff
01A6 120000   F      531                             call    clmassix
                     532     ;обнулить внешнее озу 4кбайта
01A9 900000          533                                     mov                     dptr,#0
01AC E4              534     extcle: clr                     a
01AD F0              535                                     movx            @dptr,a
01AE A3              536                                     inc                     dptr
01AF E583            537                                     mov                     a,dph
01B1 B410F8          538                                     cjne            a,#10h,extcle
                     539     
01B4 7898            540                             mov             r0,#chinkor
01B6 7600            541                             mov             @r0,#0;1;
01B8 08              542                             inc             r0
01B9 7664            543                             mov             @r0,#64h;0c8h;90h;
                     544                             ;;;;
01BB 7881            545                             mov             r0,#chavt
01BD 7601            546                             mov             @r0,#1
01BF 08              547                             inc             r0
01C0 7690            548                             mov             @r0,#90h
                     549     
01C2 78B2            550                                     mov             r0,#marker
01C4 76FF            551                                     mov             @r0,#0ffh
                     552                             ;mov            r0,#chind
                     553                             ;mov            @r0,#1
                     554                     
01C6 74FF            555                             mov             a,#0ffh
01C8 F585            556                        mov          p5,a
01CA 799A            557                             mov             r1,#parT
01CC 7702            558                             mov             @r1,#2                  ;Tizm=1s
01CE 79AE            559                             mov             r1,#diap
01D0 7705            560                             mov             @r1,#5                  ;10-7a
01D2 753405          561                             mov             sadiap,#5
01D5 79AF            562                             mov             r1,#parN
01D7 7702            563                             mov             @r1,#2
01D9 7400            564                             mov             a,#00h
01DB F585            565                             mov             p5,a
01DD D204            566                             setb    bitizm
                     567     
01DF 799B            568                             mov             r1,#chbefore
01E1 7700            569                             mov             @r1,#0
                     570                             ;;;;;;
01E3 900000   F      571                             mov             dptr,#ch_1              ;1->r2..r5 float
01E6 120000   F      572                             call    ldc_long
01E9 7890            573                             mov             r0,#koefKp         ;1(float)->koefKp
01EB 120000   F      574                             call    saver2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    10

01EE 7894            575                             mov             r0,#koefKm              ;1(float)->koefKm
01F0 120000   F      576                             call    saver2
01F3 78A0            577                             mov             r0,#koefKD
01F5 120000   F      578                             call    saver2
01F8 78CF            579                             mov                     r0,#chbuf
01FA 120000   F      580                             call    saver2  
01FD 753801          581                             mov             nblok,#1                        ;номер введенного б
                             лока
0200 753701          582                             mov             nelem,#1
0203 78CD            583                             mov             r0,#interva
0205 7600            584                             mov             @r0,#0
0207 08              585                             inc             r0
0208 7601            586                             mov             @r0,#1
020A 7840            587                             mov             r0,#bufind
020C                 588     age2:
020C 76FD            589                             mov             @r0,#0fdh         ;погасить индикатор
020E 08              590                             inc             r0
020F B84CFA          591                             cjne    r0,#bufind+12,age2              
0212 120000   F      592                             call    ind
0215 120000   F      593                             call    z_1s
                     594     
                     595                                     ;зажечь все лементы индикации
0218 7840            596                             mov             r0,#bufind
021A 7669            597     ageon:          mov             @r0,#69h;0feh;?
021C 08              598                             inc             r0
021D B84CFA          599                             cjne    r0,#bufind+12,ageon             
0220 120000   F      600                             call    ind
0223 120000   F      601                             call    z_1s            ;1sec
                     602     ;;;;;;;;;;;;;;;;
                     603                     
0226 120000   F      604                             call    z_15;z_1ms
0229 434B10          605                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     606     ;;;;;;;;;;;;;;;;;;;
022C 7C60            607                             mov             r4,#60h
022E 7D00            608                             mov             r5,#00         
0230 120000   F      609                             call    iniacp;инициализация acp
0233 120000   F      610                             call    loadUS          ;us 10-7 A
                     611                             
0236 C217            612     rebyte:         clr             bitoll
0238 3095FD          613                             jnb             p1.5,$
023B 2095FD          614                             jb              p1.5,$
                     615                             ;mov            a,P6            ;p6.4=0
                     616                             ;anl            a,#0efh
                     617                             ;mov            P6,a
                     618                             ;nop
                     619                             ;nop
                     620                                     
                     621                             ;mov            a,P6                    ;p6.4=1 
                     622                             ;orl            a,#10h
                     623                             ;mov            P6,a                        
023E 7411            624                             mov             a,#11h
0240 120000   F      625                             call    write
                     626                             ;чтение acp
0243 120000   F      627                             call    read    
0246 F578            628                             mov     reacp+1,A       ;старший байт 
0248 120000   F      629                             call    read    
024B F579            630                             mov     reacp+2,A       ;средний байт 
024D 120000   F      631                             call    read
0250 F57A            632                             mov     reacp+3,A               ;мл байт
                     633                        ;;;;;;;;;;;
0252 7878            634                        mov          r0,#reacp+1
0254 E6              635                        mov          a,@r0
0255 20E732          636                             jb              acc.7,znplus;
0258 D200            637                             setb    bitznak
025A 4480            638                             orl             a,#80h  ;ост содерж яч 
025C F6              639                             mov             @r0,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    11

                     640                                     
025D 18              641     mmm:            dec             r0;,#reacp
025E 76FF            642                             mov             @r0,#0ffh
0260 8030            643                             jmp             goznak
                     644     
0262 120000   F      645     mem10ms:        call            ind
0265 80CF            646                                             jmp                     rebyte                     
                                  ;10ms
                     647     
0267 750A00          648     labelA:         mov             r10,#0          
026A 750B00          649                             mov             r11,#0
026D 783D            650                             mov             r0,#chkl
026F 120000   F      651                             call    chcmp
0272 7000            652                             jnz             no0key
                     653                             ;разрешить ie6,ie7       
                     654                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     655                     ;       mov             EIP2,#30h
                     656                        
0274 793D            657     no0key:         mov             r1,#chkl 
0276 120000   F      658                                             call    chdec
                     659                             ;;;;;;;;;;;;
0279 2004BA          660                                             jb              bitizm,rebyte
                     661                              ;буфер 2 выдать на индикацию
                     662     
027C 120000   F      663                             call    ind
027F 120000   F      664                             call    z_01s
0282 120000   F      665                             call    z_01s
0285 120000   F      666                             call    z_01s
0288 80DD            667                             jmp             labelA
                     668     
028A C200            669     znplus:         clr     bitznak
028C 547F            670                             anl             a,#7fh;fdh                      ;+
028E F6              671                             mov             @r0,a
028F 18              672                             dec             r0;,#reacp
0290 7600            673                             mov             @r0,#00h
                     674                             
0292                 675     goznak: 
                     676     ;;;;;;;;;;;;;
0292 787A            677                             mov     r0,#reacp+3
0294 E6              678                             mov             a,@r0
0295 7F05            679                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
0297 C3              680     sdvig3:         clr             c
0298 13              681                             rrc             a
0299 DFFC            682                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
029B FA              683                             mov             r2,a    ;сохр байт
029C 18              684                             dec             r0              ;       reacp+2
029D E6              685                             mov             a,@r0
029E C0E0            686                             push    acc
02A0 C3              687                             clr             c
02A1 7F03            688                             mov             r7,#3;2
02A3 C3              689     sdvig2:         clr             c
02A4 33              690                             rlc             a
02A5 DFFC            691                             djnz    r7,sdvig2 ;d12..d11      средний байт
02A7 4A              692                             orl             a,r2
02A8 F57A            693                             mov             reacp+3,a;сформ мл байт
02AA D0E0            694                             pop             acc
                     695                             
02AC 7F05            696                             mov             r7,#5;6
02AE C3              697     sdvig1:         clr             c
02AF 13              698                             rrc             a
02B0 DFFC            699                             djnz    r7,sdvig1 ;d15,d14        ср байт
02B2 FA              700                             mov             r2,a   ;сохр
02B3 E578            701                             mov             a,reacp+1
02B5 C0E0            702                             push    acc
                     703                     ;;      push    acc
02B7 7F03            704                             mov             r7,#3;2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    12

02B9 C3              705     sdvig0:         clr             c
02BA 33              706                             rlc             a
02BB DFFC            707                             djnz    r7,sdvig0 ;       d21..d16
02BD 4A              708                             orl             a,r2
02BE F579            709                             mov             reacp+2,a       ; сформ средний  байт
02C0 D0E0            710                             pop             acc       ;reacp+1
                     711                             ;;;;;;;;;;;;;;
02C2 20E70B          712                             jb              acc.7,sdvm
02C5 C3              713                             clr             c
02C6 7F05            714                             mov             r7,#5;6
02C8 C3              715     sdvig4:         clr             c
02C9 13              716                             rrc             a
02CA DFFC            717                             djnz    r7,sdvig4 ;       d23,d22
02CC F578            718                             mov             reacp+1,a
02CE 8008            719                             jmp             readyacp;ankor;klmas
                     720     ;;;;;;;;;;;;                                    
02D0 7F05            721     sdvm:           mov             r7,#5;6
02D2 D3              722     sdvig6:         setb            c
02D3 13              723                             rrc             a
02D4 DFFC            724                             djnz    r7,sdvig6 ;       d23,d22
02D6 F578            725                             mov             reacp+1,a
                     726                                                             
                     727     ; reacp..reacp+3-результат чтения асп(hex) 
                     728     ;;;;;;;;;
02D8                 729     readyacp:
02D8 7898            730                                             mov             r0,#chinkor
02DA E6              731                             mov             a,@r0
02DB 30E702          732                             jnb             acc.7,gopart
02DE 8044            733                                     jmp             sumt2
                     734                     
02E0                 735     gopart:
02E0 789A            736                             mov             r0,#parT        ;параметр времени
02E2 793F            737                             mov             r1,#chmasN
02E4 B6013A          738                             cjne    @r0,#1,noparT1
                     739                             ;РЕЗ+РЕЗ
02E7 7877            740                             mov             r0,#reacp
02E9 120000   F      741                             call    resar2          ;reacp->r2..r5
02EC 78B6            742                             mov             r0,#summa+3;rez_A+3
02EE 120000   F      743                             call    ladd
02F1 78B3            744                             mov             r0,#summa;rez_A
02F3 120000   F      745                             call    saver2
02F6 793F            746                              mov            r1,#chmasN
02F8 7714            747                             mov             @r1,#20;10
02FA 789B            748                             mov             r0,#chbefore
02FC B6631E          749                             cjne    @r0,#99,nobef99
                     750                             ;РЕЗ/100
02FF 900000   F      751                             MOV        DPTR,#ch100 
0302 120000   F      752     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0305 120000   F      753                             call    zdiv;divide
0308 7862            754                             mov             r0,#rez_A
030A 120000   F      755                             call    saver2          ;сумма 100 отсчетов /100
030D 78C5            756                             mov             r0,#Rez_del
030F 120000   F      757                             call    saver2  
                     758                        ;;;;;
0312 78B3            759                        mov          r0,#summa
0314 120000   F      760                        call         clear4
                     761     
0317 799B            762                             mov             r1,#chbefore
0319 7700            763                             mov             @r1,#0
031B 8070            764                             jmp             klmas           ;загр в массив скользящее ср
031D 06              765     nobef99:        inc             @r0                     ;chbefore
031E 020000   F      766                             jmp             rebyte;labelA;метка A
                     767     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     768     ;а потом уже располагаем  в скользящий массив  из n
                     769     
                     770     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    13

                     771     
0321 B6021D          772     noparT1:        cjne    @r0,#2,noparT2
                     773                             ;РЕЗ+РЕЗ
0324                 774     sumt2:
0324 7877            775                              mov            r0,#reacp
0326 120000   F      776                             call    resar2          ;reacp->r2..r5
0329 78B6            777                             mov             r0,#summa+3;rez_A+3
032B 120000   F      778                             call    ladd
032E 78B3            779                             mov             r0,#summa;rez_A
0330 120000   F      780                             call    saver2
0333 789B            781                             mov             r0,#chbefore
0335 793F            782                             mov             r1,#chmasN
0337 770A            783                             mov             @r1,#10
0339 B613E1          784                             cjne    @r0,#19,nobef99;9,nobef99
                     785                             ;РЕЗ/20
033C 900000   F      786                             MOV        DPTR,#ch20;ch10 
033F 80C1            787                             jmp             allsum
                     788                             ;;;;;;;
                     789                             
                     790     
0341 B6031D          791     noparT2:        cjne    @r0,#3,noparT3
                     792     
0344 7877            793                                                              mov            r0,#reacp
0346 120000   F      794                             call    resar2          ;reacp->r2..r5
0349 78B6            795                             mov             r0,#summa+3;rez_A+3
034B 120000   F      796                             call    ladd
034E 78B3            797                             mov             r0,#summa;rez_A
0350 120000   F      798                             call    saver2
0353 789B            799                             mov             r0,#chbefore
0355 793F            800                             mov             r1,#chmasN
0357 7704            801                             mov             @r1,#4                                  ;n=4
0359 B609C1          802                             cjne    @r0,#9,nobef99;9,nobef99
                     803                             ;РЕЗ/10
035C 900000   F      804                             MOV        DPTR,#ch10 
035F 80A1            805                             jmp             allsum
                     806                             
0361 B6041D          807     noparT3:        cjne    @r0,#4,noparT4
0364                 808     aapar:          
0364 7877            809              mov            r0,#reacp
0366 120000   F      810                             call    resar2          ;reacp->r2..r5
0369 78B6            811                             mov             r0,#summa+3;rez_A+3
036B 120000   F      812                             call    ladd
036E 78B3            813                             mov             r0,#summa;rez_A
0370 120000   F      814                             call    saver2
0373 789B            815                             mov             r0,#chbefore
0375 793F            816                             mov             r1,#chmasN
0377 7704            817                             mov             @r1,#4
0379 B604A1          818                             cjne    @r0,#4,nobef99;9,nobef99
                     819                             ;РЕЗ/10
037C 900000   F      820                             MOV        DPTR,#ch5
037F 8081            821                             jmp             allsum
                     822     
                     823                     
0381 7702            824     noparT4:   mov          @r1,#2          ;chmasN n=2
0383 7877            825                             mov             r0,#reacp
0385 120000   F      826                             call    resar2          ;reacp->r2..r5
0388 7862            827                             mov             r0,#rez_A
038A 120000   F      828                             call    saver2
                     829     ;загрузить А в массив из 2/10 значений
                     830     ;;;;;;;;;;;;;;;
038D                 831     klmas:           
038D 793F            832                             mov             r1,#chmasN
038F B7021A          833                             cjne    @r1,#2,mas10
0392 900100          834                             MOV        dptr,#MASS0
0395 120000   F      835                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     836     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    14

0398 7862            837                             mov             r0,#rez_A
039A 120000   F      838                             call    resar2          ;->r2..r5
039D 900100          839                             mov                     dptr,#MASS0
03A0 120000   F      840                   call              saveIr2                 ; R2-R5 --> MAS0
                     841                     
03A3 900107          842                   MOV          dptr,#MASS1+3
03A6 120000   F      843                   CALL       addx
03A9 020000   F      844                       jmp           endsum
                     845     ;массив из 10-ти измерений
03AC B70A7D          846     mas10:                  cjne    @r1,#10,mas20
03AF 900120          847                                             mov                     dptr,#MASS8
03B2 120000   F      848                     CALL            xCIKLWR         ;MASS8->MASS9
03B5 90011C          849                                             mov                     dptr,#MASS7
03B8 120000   F      850                     CALL            xCIKLWR         ;MASS7->MASS8
03BB 900118          851                     MOV       dptr,#MASS6
03BE 120000   F      852                     CALL       xCIKLWR         ; MASS6 --> MASS7
03C1 900114          853                     MOV        dptr,#MASS5
                     854                    
03C4 120000   F      855                    CALL        xCIKLWR        ; MASS5 --> MASS6
03C7 900110          856                    MOV         dptr,#MASS4
                     857                    
03CA 120000   F      858                    CALL        xCIKLWR        ; MASS4 --> MASS5
03CD 90010C          859                             mov                     dptr,#MASS3
                     860     
03D0 120000   F      861                    CALL             xCIKLWR         ;MASS3->MASS4
03D3 900108          862                     MOV        dptr,#MASS2
                     863                    
03D6 120000   F      864                    CALL        xCIKLWR         ; MASS2 --> MASS3
03D9 900104          865                    MOV         dptr,#MASS1
                     866                     
03DC 120000   F      867                   CALL         xCIKLWR        ; MASS1 --> MASS2
03DF 900100          868                    MOV         dptr,#MASS0
                     869                   
03E2 120000   F      870                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     871     
                     872                             
03E5 7862            873                             mov             r0,#rez_A
03E7 120000   F      874                             call    resar2          ;->r2..r5
                     875                                     ;call   aform
03EA 900100          876                                     mov                     dptr,#MASS0
03ED 120000   F      877                   call              saveIr2                 ; R2-R5 --> MAS0
                     878              
03F0 900107          879                   MOV          dptr,#MASS1+3
03F3 120000   F      880                   CALL       addx
03F6 90010B          881                   MOV          dptr,#MASS2+3
03F9 120000   F      882                   CALL       addx
03FC 90010F          883                   MOV          dptr,#MASS3+3
03FF 120000   F      884                  CALL        addx
0402 900113          885                   MOV       dptr,#MASS4+3
0405 120000   F      886                   call       addx
0408 900117          887                     MOV        dptr,#MASS5+3
040B 120000   F      888                  CALL        addx
040E 90011B          889                   MOV          dptr,#MASS6+3
0411 120000   F      890                   CALL       addx
0414 90011F          891                   MOV          dptr,#MASS7+3
0417 120000   F      892                  CALL        addx
041A 900123          893                  MOV        dptr,#MASS8+3
041D 120000   F      894                   call       addx
0420 900127          895                     MOV                     dptr,#MASS9+3
0423 120000   F      896                  call        addx
0426 020000   F      897                              jmp            endsum
                     898     
0429 020000   F      899     rmas4:          jmp                     mas4
                     900     ;массив из 20-ти измерений
042C B714FA          901     mas20:          cjne    @r1,#20,rmas4
042F 900148          902                                             mov                     dptr,#MASS18
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    15

0432 120000   F      903                     CALL            xCIKLWR         ;MASS18->MASS19
0435 900144          904                                             mov                     dptr,#MASS17
0438 120000   F      905                     CALL            xCIKLWR         ;MASS17->MASS18
043B 900140          906                     MOV       dptr,#MASS16
043E 120000   F      907                     CALL       xCIKLWR         ; MASS16 --> MASS17
0441 90013C          908                     MOV        dptr,#MASS15
                     909                    
0444 120000   F      910                    CALL        xCIKLWR        ; MASS15 --> MASS16
0447 900138          911                    MOV         dptr,#MASS14
                     912                    
044A 120000   F      913                    CALL        xCIKLWR        ; MASS14 --> MASS15
044D 900134          914                             mov                     dptr,#MASS13
                     915     
0450 120000   F      916                    CALL             xCIKLWR         ;MASS13->MASS14
0453 900130          917                     MOV        dptr,#MASS12
                     918                    
0456 120000   F      919                    CALL        xCIKLWR         ; MASS12 --> MASS13
0459 90012C          920                    MOV         dptr,#MASS11
                     921                     
045C 120000   F      922                   CALL         xCIKLWR        ; MASS11 --> MASS12
045F 900128          923                    MOV         dptr,#MASS10
                     924                   
0462 120000   F      925                    CALL        xCIKLWR        ; MASS10 --> MASS11
0465 900124          926                                      MOV       dptr,#MASS9
0468 120000   F      927                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     928     
046B 900120          929                                             mov                     dptr,#MASS8
046E 120000   F      930                     CALL            xCIKLWR         ;MASS8->MASS9
0471 90011C          931                                             mov                     dptr,#MASS7
0474 120000   F      932                     CALL            xCIKLWR         ;MASS7->MASS8
0477 900118          933                     MOV       dptr,#MASS6
047A 120000   F      934                     CALL       xCIKLWR         ; MASS6 --> MASS7
047D 900114          935                     MOV        dptr,#MASS5
                     936                    
0480 120000   F      937                    CALL        xCIKLWR        ; MASS5 --> MASS6
0483 900110          938                    MOV         dptr,#MASS4
                     939                    
0486 120000   F      940                    CALL        xCIKLWR        ; MASS4 --> MASS5
0489 90010C          941                             mov                     dptr,#MASS3
                     942     
048C 120000   F      943                    CALL             xCIKLWR         ;MASS3->MASS4
048F 900108          944                     MOV        dptr,#MASS2
                     945                    
0492 120000   F      946                    CALL        xCIKLWR         ; MASS2 --> MASS3
0495 900104          947                    MOV         dptr,#MASS1
                     948                     
0498 120000   F      949                   CALL         xCIKLWR        ; MASS1 --> MASS2
049B 900100          950                    MOV         dptr,#MASS0
                     951                   
049E 120000   F      952                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     953     
                     954                             
04A1 7862            955                             mov             r0,#rez_A
04A3 120000   F      956                             call    resar2          ;->r2..r5
                     957                                     ;call   aform
04A6 900100          958                                     mov                     dptr,#MASS0
04A9 120000   F      959                   call              saveIr2                 ; R2-R5 --> MAS0
                     960              
04AC 900107          961                   MOV          dptr,#MASS1+3
04AF 120000   F      962                   CALL       addx
04B2 90010B          963                   MOV          dptr,#MASS2+3
04B5 120000   F      964                   CALL       addx
04B8 90010F          965                   MOV          dptr,#MASS3+3
04BB 120000   F      966                  CALL        addx
04BE 900113          967                   MOV       dptr,#MASS4+3
04C1 120000   F      968                   call       addx
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    16

04C4 900117          969                     MOV        dptr,#MASS5+3
04C7 120000   F      970                  CALL        addx
04CA 90011B          971                   MOV          dptr,#MASS6+3
04CD 120000   F      972                   CALL       addx
04D0 90011F          973                   MOV          dptr,#MASS7+3
04D3 120000   F      974                  CALL        addx
04D6 900123          975                  MOV        dptr,#MASS8+3
04D9 120000   F      976                   call       addx
04DC 900127          977                     MOV                     dptr,#MASS9+3
04DF 120000   F      978                  call        addx
                     979     ;27
04E2 90012B          980                                     MOV        dptr,#MASS10+3
04E5 120000   F      981                   CALL       addx
04E8 90012F          982                                     MOV        dptr,#MASS11+3
04EB 120000   F      983                   CALL       addx
04EE 900133          984                   MOV          dptr,#MASS12+3
04F1 120000   F      985                   CALL       addx
04F4 900137          986                   MOV          dptr,#MASS13+3
04F7 120000   F      987                  CALL        addx
04FA 90013B          988                   MOV       dptr,#MASS14+3
04FD 120000   F      989                   call       addx
0500 90013F          990                                     MOV        dptr,#MASS15+3
0503 120000   F      991                     CALL     addx
0506 900143          992                   MOV          dptr,#MASS16+3
0509 120000   F      993                   CALL       addx
050C 900147          994                   MOV          dptr,#MASS17+3
050F 120000   F      995                  CALL        addx
0512 90014B          996                  MOV        dptr,#MASS18+3
0515 120000   F      997                   call       addx
0518 90014F          998                                     MOV                     dptr,#MASS19+3
051B 120000   F      999                  call        addx
051E 802F           1000                                     jmp             endsum
                    1001     ;массив из 4х измерений
0520                1002     mas4:                   
0520 900108         1003                                             MOV        dptr,#MASS2
0523 120000   F     1004                    CALL        xCIKLWR         ; MASS2 --> MASS3
0526 900104         1005                    MOV         dptr,#MASS1
0529 120000   F     1006                    CALL        xCIKLWR        ; MASS1 --> MASS2
052C 900100         1007                    MOV         dptr,#MASS0
052F 120000   F     1008                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1009     
                    1010                             
0532 7862           1011                             mov             r0,#rez_A
0534 120000   F     1012                             call    resar2          ;->r2..r5
                    1013                                     ;call   aform
0537 900100         1014                                     mov                     dptr,#MASS0
053A 120000   F     1015                   call              saveIr2                 ; R2-R5 --> MAS0
                    1016              
053D 900107         1017                   MOV          dptr,#MASS1+3
0540 120000   F     1018                   CALL       addx
0543 90010B         1019                   MOV          dptr,#MASS2+3
0546 120000   F     1020                   CALL       addx
0549 90010F         1021                   MOV          dptr,#MASS3+3
054C 120000   F     1022                  CALL        addx
                    1023                  
                    1024             ;23.03          
054F                1025     endsum:
054F 786E           1026                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
0551 06             1027                                     inc             @r0
0552 E6             1028                                     mov             a,@r0   
0553 200105         1029                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1030                                     
0556 B53F31         1031                                     cjne    a,chmasN,masx5
0559 D201           1032                                     setb    bitmas                  ;массив заполнен
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    17

055B 853F6E         1033     masfull:                mov             chmas,chmasN
055E 783F           1034                                     mov             r0,#chmasN
0560 E6             1035                                     mov             a,@r0
                    1036     ;masfull:
0561 B40208         1037                                     cjne    a,#2,nochn2
0564 900000   F     1038                                     MOV        DPTR,#ch2;10 
0567 120000   F     1039                                     CALL   ldc_ltemp                 ; ltemp <-- 2
056A 8028           1040                                     jmp             mas5div
                    1041     
056C B40A08         1042     nochn2:         cjne    a,#10,nochn10
056F 900000   F     1043                                                     MOV        DPTR,#ch10 
0572 120000   F     1044                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0575 801D           1045                                     jmp             mas5div
                    1046     
0577 B41408         1047     nochn10:        cjne    a,#20,nochn20
057A 900000   F     1048                                                     MOV        DPTR,#ch20 
057D 120000   F     1049                                     CALL   ldc_ltemp                 ; ltemp <-- 20
0580 8012           1050                                     jmp             mas5div
                    1051     
0582 900000   F     1052     nochn20:        MOV        DPTR,#ch4 
0585 120000   F     1053                                     CALL   ldc_ltemp                 ; ltemp <-- 4
0588 800A           1054                                     jmp             mas5div
                    1055     
058A 856E0B         1056     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
058D E4             1057                                     clr     a
058E F50A           1058                                     mov     ltemp+2,a
0590 F509           1059                                     mov     ltemp+1,a
0592 F508           1060                                     mov     ltemp,a
                    1061     
0594                1062     mas5div:
0594 120000   F     1063                                     CALL       zdiv;divide                           ; R2-R5 =
                    1064                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1065     
                    1066                             
                    1067      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1068     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1069     ;получен результат 3 байта и знак
0597 7866           1070                             mov             r0,#rez_A1
0599 120000   F     1071                             call    saver2           ;сохр среднее по массиву
                    1072     ;;8.11.06                       mov             chmasN,#0
                    1073      ;;;;;;;;;;;;
                    1074      ;;;;;;;;;;;;
059C C3             1075                             clr             c
059D 799A           1076                             mov             r1,#parT
059F 7402           1077                             mov             a,#2
05A1 97             1078                             subb    a,@r1
05A2 501D           1079                             jnc             ankor           ;T<3
                    1080                             ;A-=РЕЗ1                                ;T>3
05A4 120402         1081                             call    altof                   ;r2..r5->float
05A7 785E           1082                             mov             r0,#rez_Ame
05A9 120000   F     1083                             call    saver2
                    1084                             ;;;;
05AC 7890           1085                             mov             r0,#koefKp;->r8..r11
05AE EA             1086                             mov             a,r2
05AF 30E702         1087                             jnb             acc.7,nminus3
05B2 7894           1088                             mov             r0,#koefKm;->r8..r11
05B4 120000   F     1089     nminus3:                call    resar8
05B7 120203         1090                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05BA 785E           1091                             mov             r0,#rez_Ame
05BC 120000   F     1092                             call    saver2
05BF 8021           1093                             jmp             gotoKD
                    1094     
05C1                1095     ankor:  
05C1 7898           1096                             mov             r0,#chinkor
05C3 E6             1097                             mov             a,@r0
05C4 30E703         1098                             jnb             acc.7,nokorr
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    18

                    1099                             ;коррекция 0
05C7 020000   F     1100                             jmp             kornul
05CA                1101     nokorr: 
                    1102                             ;mov            r10,#00         ;       chavt
                    1103                             ;mov            r11,#00h
05CA 7881           1104                             mov              r0,#chavt      
05CC E6             1105                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
05CD 30E737         1106                             jnb             acc.7,nonulavt;jnz              nonulavt        
05D0 750A00         1107                             mov             r10,#0;1;00;02          
05D3 750BC8         1108                             mov             r11,#0c8h;90h;0c8h;58h
05D6 7898           1109                             mov             r0,#chinkor
05D8 120000   F     1110                             call    chcmp
05DB 7045           1111                             jnz             noavk
                    1112                             ;автокалибровка
05DD 020000   F     1113                             jmp             autoka;noavk;
                    1114     
05E0 8079           1115     rafterK:                jmp             afterK
                    1116     ;;;;;;;;;;
05E2 C3             1117      gotoKD:                clr             c
05E3 799A           1118                             mov             r1,#parT
05E5 7404           1119                             mov             a,#4
05E7 97             1120                             subb    a,@r1
05E8 50F6           1121                             jnc             rafterK         ;T<5
                    1122                             ;A1-=A- *KD                     ;T>5
                    1123                             ;call           findkoef                                ;r2,r3-hex
                    1124                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1125                                     
                    1126                             ;       call    altof                   ;r2..r5->float
                    1127                             ;       mov     dptr,#CHtho;100000
                    1128                             ;       call    ldc_ltemp                       ;r8..r11
                    1129                             ;       call    fldiv
                    1130                             ;       call    move28
                    1131                             
05EA 785E           1132                             mov             r0,#rez_Ame;->r2..r5   ???????????/
05EC 120000   F     1133                             call    resar2
                    1134                                     ;call   flmul
05EF 120343         1135                             call    ftol                    ;float->int
05F2 7866           1136                             mov             r0,#rez_A1
05F4 120000   F     1137                             call    saver2
05F7 786A           1138                             mov             r0,#rez_A0;->r8..r11 hex
05F9 120000   F     1139                             call    resar8
05FC 120000   F     1140                             call    lsub            ;A3=A-1-A0
05FF 789C           1141                             mov             r0,#rez_A3
0601 120000   F     1142                             call    saver2
0604 020000   F     1143                             jmp             labelB  
                    1144      ;;;;;;;;;;; 9.11.06
0607 789A           1145     nonulavt:        mov            r0,#parT
0609 E6             1146                             mov             a,@r0
060A 6401           1147                             xrl             a,#01
060C 700F           1148                             jnz             avtdec1
060E 7982           1149                             mov             r1,#chavt+1     ;T=1 chavt-10
0610 120000   F     1150                             call    tenmin
0613 7999           1151     kordec10:       mov             r1,#chinkor+1
0615 120000   F     1152                             call    tenmin
0618 801E           1153                             jmp             rezmul
                    1154     
061A 020000   F     1155     rmo220:         jmp             mo220
                    1156     
061D 7981           1157     avtdec1:        mov             r1,#chavt       
061F 120000   F     1158                             call    chdec           ;chavt-1
                    1159     ;                       jmp             kordec1;rezmul
0622 789A           1160     noavk:          mov             r0,#parT
0624 E6             1161                             mov             a,@r0
0625 6401           1162                             xrl             a,#01
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    19

0627 700A           1163                             jnz             kordec1
                    1164                             ;T=1 chinkor-10
0629 7999           1165                     mov             r1,#chinkor+1
062B 120000   F     1166                             call    tenmin
062E 8008           1167                             jmp             rezmul
                    1168     
0630 020000   F     1169     rnotestizm:             jmp                     notestizm
0633 7998           1170     kordec1:        mov             r1,#chinkor
0635 120000   F     1171                             call    chdec           ; chinkor-1
                    1172                        ;9.11.06
                    1173                             ;;;;;;;;;;;;;;
                    1174                             ;;;;;;;;;;;;;
                    1175     ;(РЕЗ1-АN)*K
0638                1176     rezmul:
0638 7866           1177                             mov             r0,#rez_A1;->r2..r5
063A 120000   F     1178                             call    resar2
063D 120402         1179                             call    altof   ;r2..r5->float  6.06    
0640 7884           1180                             mov             r0,#kor0_AN;->r8..r11
0642 120000   F     1181                             call    resar8
0645 1201D1         1182                             call    flsub
0648 7890           1183                             mov             r0,#koefKp;->r8..r11
064A EA             1184                             mov             a,r2
064B 30E702         1185                             jnb             acc.7,nminus
                    1186                             ;jnb            bitznak,nminus
                    1187                     
064E 7894           1188                             mov             r0,#koefKm;->r8..r11
0650 120000   F     1189     nminus:         call    resar8
0653 120203         1190                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0656 785E           1191                             mov             r0,#rez_Ame
0658 120000   F     1192                             call    saver2
                    1193      
065B                1194     afterK:                 
                    1195     ;;;;;;;;;;;;;;
065B EA             1196                                     mov             a,r2
065C 547F           1197                                     anl             a,#7fh
065E FA             1198                                     mov             r2,a
065F 900000   F     1199                                     mov     dptr,#ch_250;220;220000
0662 120000   F     1200                                     call    ldc_ltemp                       ;r8..r11=8
0665 1201D6         1201                                     call    flcmp
0668 50B0           1202                                     jnc             rmo220          ;A>220000
                    1203                                     ;;;;;;;;;
066A 3015C3         1204                                     jnb                     biteizm,rnotestizm
066D 78B1           1205                                     mov                     r0,#vichR
066F B62155         1206                                     cjne            @r0,#21h,note21
0672 7A50           1207                                     mov                     r2,#50h                 ;-11a
0674 7B18           1208                                     mov                     r3,#18h                 ;k8
0676 12046C         1209                                     call            rebyte2                         ;r2..r5- he
                             x
0679 120402         1210                                     call            altof                   ;r2..r5->float
067C C002           1211                                     push            rr2
067E C003           1212                                     push            rr3
0680 C004           1213                                     push            rr4
0682 C005           1214                                     push            rr5
0684 7A50           1215                                     mov                     r2,#50h                 ;k10
0686 7B20           1216                                     mov                     r3,#20h
0688 12046C         1217     re11_7: call            rebyte2                 ;r2..r5
068B 120402         1218                                     call            altof                   ;r2..r5->float
068E 120000   F     1219                                     call            move28
0691 D005           1220                                     pop                     rr5
0693 D004           1221                                     pop                     rr4
0695 D003           1222                                     pop                     rr3
0697 D002           1223                                     pop                     rr2
0699 1202B7         1224                                     call            fldiv
                    1225                             ;       mov                     dptr,#ch_10
                    1226                             ;       call            ldc_ltemp                       ;r8..r11
                    1227                             ;       call            flmul
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    20

                    1228                                     ;;;;;2.02.07
069C C002           1229                                     push            rr2
069E C003           1230                                     push            rr3
06A0 C004           1231                                     push            rr4
06A2 C005           1232                                     push            rr5
06A4 7A50           1233                                     mov                     r2,#50h                 ;-11a
06A6 7B2C           1234                                     mov                     r3,#2ch                 ;Km
06A8 12046C         1235                                     call            rebyte2                         ;r2..r5- he
                             x
06AB 120402         1236                                     call            altof                   ;r2..r5->float
06AE 120000   F     1237                                     call            move28
06B1 D005           1238                                     pop                     rr5
06B3 D004           1239                                     pop                     rr4
06B5 D003           1240                                     pop                     rr3
06B7 D002           1241                                     pop                     rr2
06B9 120203         1242                                     call            flmul                           ;*Km
06BC 900000   F     1243                                     mov     dptr,#CHtho;100000
06BF 120000   F     1244                                     call    ldc_ltemp                       ;r8..r11=8
06C2 1202B7         1245                                     call    fldiv
                    1246                                     ;;;;;
06C5 8050           1247                                     jmp                     temul   
06C7 B62218         1248     note21: cjne            @r0,#22h,note22
06CA 7A50           1249                                     mov                     r2,#50h                 ;-09a
06CC 7B10           1250                                     mov                     r3,#10h                 ;k6
06CE 12046C         1251                                     call            rebyte2                         ;r2..r5- he
                             x
06D1 120402         1252                                     call            altof                   ;r2..r5->float
06D4 C002           1253                                     push            rr2
06D6 C003           1254                                     push            rr3
06D8 C004           1255                                     push            rr4
06DA C005           1256                                     push            rr5
06DC 7A50           1257                                     mov                     r2,#50h                 ;k8
06DE 7B18           1258                                     mov                     r3,#18h
06E0 80A6           1259                                     jmp                     re11_7
06E2 7A50           1260     note22: mov                     r2,#50h                 ;-7a
06E4 7B08           1261                                     mov                     r3,#08h                 ;k4
06E6 12046C         1262                                     call            rebyte2                         ;r2..r5- he
                             x
06E9 120402         1263                                     call            altof                   ;r2..r5->float
06EC C002           1264                                     push            rr2
06EE C003           1265                                     push            rr3
06F0 C004           1266                                     push            rr4
06F2 C005           1267                                     push            rr5
06F4 7A50           1268                                     mov                     r2,#50h                 ;k6
06F6 7B10           1269                                     mov                     r3,#10h
06F8 808E           1270                                     jmp                     re11_7  
                    1271                                     ;;;;;;;;;
06FA                1272     notestizm:
06FA 301208         1273                                     jnb             bitklb,komulpz
06FD 900000   F     1274                                     mov     dptr,#chk;100000
0700 120000   F     1275                                     call    ldc_long                        ;r2..r5
0703 8006           1276                                     jmp             komul
0705 120000   F     1277     komulpz:call            findkoef                                ;r2,r3-hex
0708 12046C         1278                                     call            rebyte2                         ;r2..r5- he
                             x
                    1279                                     
070B 120402         1280     komul:  call    altof                   ;r2..r5->float
070E 900000   F     1281                                     mov     dptr,#CHtho;100000
0711 120000   F     1282                             call    ldc_ltemp                       ;r8..r11=8
0714 1202B7         1283                                     call    fldiv
0717 120000   F     1284     temul:                          call    move28
071A 785E           1285                                     mov             r0,#rez_Ame
071C 120000   F     1286                                     call    resar2
                    1287                     
071F 120203         1288                                     call    flmul     ;A1-=A-*KD  fl
                    1289                                     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    21

0722 120343         1290                                     call    ftol                    ;float->int
0725 7866           1291                                     mov             r0,#rez_A1
0727 120000   F     1292                                     call    saver2
072A 120402         1293                                     call    altof                   ;r2..r5->float
072D 900000   F     1294                                     mov     dptr,#ch_220;200;200000
0730 120000   F     1295                                     call    ldc_ltemp                       ;r8..r11=8
0733 1201D6         1296                                     call    flcmp
0736 502D           1297                                     jnc             rrmo220         ;A>200000
                    1298                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1299                             ;       jb              bitavp,yesavp
0738 301808         1300                                     jnb             knizm,goA2
073B 300602         1301                                     jnb             bitvi11,qu_avp
073E 8003           1302                                     jmp             goA2
0740 20052F         1303     qu_avp:                 jb              bitavp,yesavp
0743                1304     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0743                1305     goA2:                    ;A2=A1-
0743 7866           1306                                      mov            r0,#rez_A1
0745 120000   F     1307                                     call    resar2
0748 787B           1308                                     mov             r0,#rez_A2
074A 120000   F     1309                                     call    saver2
074D                1310     goA3A2:                  ;A3=A2-A0
074D 786A           1311                                       mov           r0,#rez_A0
074F 120000   F     1312                                     call    resar8
0752 120000   F     1313                                     call    lsub
0755 789C           1314                                     mov             r0,#rez_A3
0757 120000   F     1315                                     call    saver2
                    1316                                     ;;;;;;
075A 200644         1317                                     jb              bitvi11,yesvich
075D                1318     goonin:            ;jmp         goonind;indA3;8.11.06
075D 78AC           1319                                     mov             r0,#chind
075F B60006         1320                                     cjne    @r0,#0,rnochi0
0762 020000   F     1321                                     jmp             goonind;indA3
                    1322     
0765 020000   F     1323     rrmo220:                jmp             mo220
0768 020000   F     1324     rnochi0:                jmp             nochi0
076B 7866           1325     gokaA2:                 mov             r0,#rez_A1                      ;(float)
076D 120000   F     1326                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
0770 80D1           1327                                             jmp             goA2
                    1328     ;;;;;;;;;;;;;;;;
0772 EA             1329     yesavp:                 mov             a,r2
0773 547F           1330                                     anl             a,#7fh
0775 FA             1331                                     mov             r2,a
0776 900000   F     1332                                     mov     dptr,#ch_10th;10000
0779 120000   F     1333                                     call    ldc_ltemp                       ;r8..r11=8
077C 1201D6         1334                                     call    flcmp
077F 50C2           1335                                     jnc             noavp           ;A>10000        
0781 78AE           1336                                     mov             r0,#diap                ;10-11
0783 B60902         1337                                     cjne    @r0,#9,avpgo
0786 80BB           1338                                     jmp             noavp
0788                1339     avpgo:                  
0788 06             1340                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
0789 B60A01         1341                                     cjne    @r0,#0ah,clmasv
078C 16             1342                                     dec             @r0
078D                1343     clmasv:         ;сбросить массив
078D 120000   F     1344                             call    loadUS
                    1345                             ;call   louizm
0790 120000   F     1346                             call     clmassix
0793 78B3           1347                                     mov             r0,#summa
0795 120000   F     1348                                     call    clear4
0798 786A           1349                                     mov             r0,#rez_A0
079A 120000   F     1350                                     call    clear4
079D D207           1351                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    22

                                                                                   
079F 80BC           1352                                jmp     goonin
                    1353     
07A1                1354     yesvich:        
                    1355                     ;                       mov             r0,#konstB
                    1356                     ;               call    resar2
                    1357                     ;               call    move28
07A1 789C           1358                                     mov             r0,#rez_A3;A1
07A3 120000   F     1359                                     call    resar2                          ;HEX
                    1360                                     
07A6 120402         1361                                     call            altof                   ;r2..r5->float
07A9 EA             1362                                     mov             a,r2                    ;модуль
07AA 547F           1363                                     anl             a,#7fh
07AC FA             1364                                     mov             r2,a
                    1365                     ;               call            fladd                           ;A1+B
                    1366                                     
07AD 900000   F     1367                                     mov     dptr,#CH_500;
07B0 120000   F     1368                                     call    ldc_ltemp                       ;r8..r11
07B3 1201D6         1369                                     call    flcmp
07B6 4073           1370                                     jc                      mo500R;error <500 >22000
07B8 900000   F     1371                                     mov     dptr,#CH_22T;
07BB 120000   F     1372                                     call    ldc_ltemp                       ;r8..r11
07BE 1201D6         1373                                     call    flcmp
07C1 5074           1374                                     jnc             mo500I          ;error
                    1375                                     ;;;;;;;;;;;;
07C3 120000   F     1376                                     call            move28
07C6 C008           1377                                     push            r8
07C8 C009           1378                                     push            r9
07CA C00A           1379                                     push            r10
07CC C00B           1380                                     push            r11
07CE 78BC           1381                                     mov             r0,#konstA
07D0 120000   F     1382                                     call    resar2
07D3 900000   F     1383                                     mov             dptr,#CH_B
07D6 120000   F     1384                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
07D9 120203         1385                                     call            flmul                           ;A*10-7
07DC D00B           1386                                     pop                     r11
07DE D00A           1387                                     pop                     r10
07E0 D009           1388                                     pop                     r9
07E2 D008           1389                                     pop                     r8
07E4 1202B7         1390                                     call            fldiv                   ;результат R
07E7 78C9           1391                                     mov                     r0,#rez_R
07E9 120000   F     1392                                     call            saver2
07EC 120343         1393                                     call            ftol                    ;float->hex
                    1394                                     ;;;;;;;;;;
07EF 784F           1395                                             mov             r0,#abin
07F1 120000   F     1396                                             call    saver2
                    1397     ;;;;;;;;
07F4 7840           1398                                                     mov             r0,#bufind
07F6                1399     age9:
07F6 7620           1400                             mov             @r0,#" "          ;погасить индикатор
07F8 08             1401                             inc             r0
07F9 B84BFA         1402                             cjne    r0,#bufind+11,age9
                    1403                                             
07FC 78C9           1404                                             mov             r0,#rez_R
07FE 120000   F     1405                                             call            resar2
                    1406     ;;;;;;;;;;
0801 900000   F     1407                                     mov             dptr,#CH_fl
0804 120000   F     1408                                     CALL   ldc_ltemp
0807 1202B7         1409                                     call            fldiv
                    1410     
080A 78B8           1411                                     mov             r0,#work                ;степень +
080C 7600           1412                                     mov             @r0,#0
080E 78B9           1413                                     mov             r0,#work+1;степень -
0810 7600           1414                                     mov             @r0,#0
0812 900000   F     1415     compa1: mov     dptr,#ch_1;
0815 120000   F     1416                                     call    ldc_ltemp                       ;r8..r11
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    23

0818 1201D6         1417                                     call    flcmp
081B 4026           1418                                     jc              equ0            ;<1
081D 78B8           1419                                     mov             r0,#work                        ;степень +
081F 06             1420                                     inc             @r0
0820 900000   F     1421                                     mov             dptr,#ch_10;
0823 120000   F     1422                                     call    ldc_ltemp                       ;r8..r11
0826 1202B7         1423                                     call            fldiv
0829 80E7           1424                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1425                                     ;;;;;;;;;;;;;;;;;;;
082B 900000   F     1426     mo500R: mov             dptr,#teOLR
082E 120000   F     1427                               call          lotext           
0831 120000   F     1428                                     call            ind
0834 020000   F     1429                                     jmp                     nobavp;nobitizm
0837 900000   F     1430     mo500I: mov             dptr,#teOLI
083A 120000   F     1431                               call          lotext           
083D 120000   F     1432                                     call            ind
0840 020000   F     1433                                     jmp                     nobavp;nobitizm
0843                1434     equ0:           ;;;;;   call            ftol                    ;float->int
0843 78B8           1435                                     mov             r0,#work                ;степень +
0845 B60019         1436                                     cjne    @r0,#0,equ00
                    1437                                     
0848 900000   F     1438     compa2: mov     dptr,#ch_1;
084B 120000   F     1439                                     call    ldc_ltemp                       ;r8..r11
084E 1201D6         1440                                     call    flcmp
0851 500E           1441                                     jnc             equ00           ;>1
0853 78B9           1442                                     mov             r0,#work+1                      ;степень -
0855 16             1443                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0856 900000   F     1444                                     mov             dptr,#ch_10;
0859 120000   F     1445                                     call    ldc_ltemp                       ;r8..r11
085C 120203         1446                                     call            flmul
085F 80E7           1447                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1448     
                    1449     
0861                1450     equ00:          
0861 7853           1451                                                     mov             r0,#adec
0863 7952           1452                                             mov             r1,#abin+3      ;hex->10
0865 120000   F     1453                                             call    bindec
                    1454     
                    1455                                                     ;если степень полож убирать младший байт
                    1456                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1457                                                     ;число в bufind..bufind+5
0868 78B8           1458                                             mov             r0,#work
086A B60021         1459                                             cjne    @r0,#0,outr
086D 08             1460                                             inc             r0                      ;work+1
086E B6FF05         1461                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
0871 06             1462                                             inc                     @r0;!!!!!!!!!?
0872 785B           1463                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
0874 8003           1464                                             jmp                     bufr30
                    1465                                             ;;;;;;;;;;;;;;
0876 06             1466     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
0877 785C           1467                                                     mov             r0,#adec+9
0879 7945           1468     bufr30:         mov             r1,#bufind+5;6
087B 7F05           1469                                             mov             r7,#5;7
087D E6             1470     bufr2:                          mov             a,@r0
087E 2430           1471                                             add             a,#30h
0880 F7             1472                                             mov             @r1,a
0881 19             1473                                             dec             r1
0882 18             1474                                             dec             r0
0883 DFF8           1475                                             djnz    r7,bufr2
                    1476     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    24

0885 784F           1477                                             mov             r0,#abin
0887 120000   F     1478                                             call            clear4
088A 78B9           1479                                             mov             r0,#work+1
088C 801C           1480                                     jmp             outr5
                    1481     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
088E 785C           1482     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
0890 C3             1483                                             clr             c
0891 79B8           1484                                             mov             r1,#work
0893 E8             1485                                             mov             a,r0
0894 14             1486                                             dec             a                                  
                                  ;n-1
0895 97             1487                                             subb    a,@r1
0896 F8             1488                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0897 7945           1489                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0899 7F05           1490                                             mov             r7,#5;7
089B E6             1491     bufr:                           mov             a,@r0
089C 2430           1492                                             add             a,#30h
089E F7             1493                                             mov             @r1,a
089F 19             1494                                             dec             r1
08A0 18             1495                                             dec             r0
08A1 DFF8           1496                                             djnz    r7,bufr
                    1497     
08A3 784F           1498                                             mov             r0,#abin
08A5 120000   F     1499                                             call            clear4
08A8 78B8           1500                                     mov             r0,#work
08AA E6             1501     outr5:                  mov             a,@r0
08AB F552           1502                                             mov             abin+3,a
                    1503                                                                     ;n(hex)->abin
08AD 120000   F     1504                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
08B0 2552           1505                                             add             a,abin+3
08B2 F552           1506                                             mov             abin+3,a
08B4 7853           1507                                             mov             r0,#adec
08B6 7952           1508                                             mov             r1,#abin+3      ;hex->10
08B8 120000   F     1509                                             call    bindec
08BB 855C48         1510                                             mov             bufind+8,adec+9
08BE 855B47         1511                                             mov             bufind+7,adec+8
08C1 754966         1512                                             mov             bufind+9,#66h
08C4 020000   F     1513                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1514                                             
                    1515                                     ;;;;;;;;;;;;;;;;;;;;;
                    1516     ;;;;;;;;;;;;;
                    1517     
08C7 300508         1518     mo220:             jnb          bitavp,indoll
08CA 301805         1519                                jnb          knizm,indoll;bitizm,indoll
08CD 78AE           1520                                     mov             r0,#diap
08CF B6000B         1521                                     cjne    @r0,#0,nodi2
                    1522                                ;10-2
08D2 900000   F     1523     indoll:                 mov             dptr,#teOLL;OLL
08D5 120000   F     1524                                     call    lotext
08D8 D217           1525                                     setb    bitoll
08DA 020000   F     1526                                     jmp             goonin  
                    1527     
08DD 16             1528     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1529     
08DE B6FF01         1530                                     cjne    @r0,#0ffh,nodi9
08E1 06             1531                                     inc             @r0
                    1532     
08E2 120000   F     1533     nodi9:          call    loadUS
                    1534                                     ;call   louizm
                    1535                                     ;сбросить массив
08E5 120000   F     1536                                     call     clmassix
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    25

08E8 78B3           1537                                     mov             r0,#summa
08EA 120000   F     1538                                     call    clear4
08ED 786A           1539                                     mov             r0,#rez_A0
08EF 120000   F     1540                                     call    clear4  
08F2 D207           1541                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
08F4 020000   F     1542                                jmp     goonin
                    1543     
08F7 16             1544     nochi0:                 dec             @r0                     ;СТИ-1
08F8 020000   F     1545                                     jmp             labelB  
                    1546     
                    1547             
                    1548     ;;;;;;;;;;;;;;;
                    1549     
08FB                1550     nop3_0: ;;      ;rez_A-rez_A0
                    1551                     ;;                      mov             r0,#rez_A0
                    1552                     ;;                      call    resar8
                    1553                     ;;                      call    lsub
                    1554                     ;;                      mov             r0,#rez_A
                    1555                     ;;;                     call    saver2
                    1556      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
08FB 789C           1557      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
08FD 120000   F     1558                                             call    resar2
0900 900000   F     1559                                             mov             dptr,#ch100              
0903 120000   F     1560                                             call    ldc_ltemp        
0906 120000   F     1561                                             call    zdiv            ;rez_A3/100=r2..r5
                    1562                                     
0909 EC             1563                                             mov             a,r4
090A 20E71E         1564                                             jb              acc.7,aless0
090D 4408           1565                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
090F F5D3           1566                                             mov             DAC0H,a
                    1567                                                                             ;мл байт
0911 ED             1568                                             mov             a,r5
0912 F5D2           1569                                             mov             DAC0L,a
0914 801E           1570                                             jmp             moveA3;
                    1571     
0916 B70207         1572     no3parN:                        cjne    @r1,#2,no2parN
                    1573                                             ;в байт 0  записать пробел
0919 7946           1574                                             mov             r1,#bufind+6
091B 7720           1575                                             mov             @r1,#" ";0fdh;
091D 020000   F     1576                                             jmp             seeind;moveA3
                    1577     
0920                1578     no2parN:                        ;в байты 0 и 1 записать пробел
0920 7945           1579                                             mov             r1,#bufind+5
0922 7720           1580                                             mov             @r1,#" ";0fdh;" "
0924 09             1581                                             inc             r1
0925 7720           1582                                             mov             @r1,#" ";0fdh;" "
0927 8079           1583                                             jmp             seeind;moveA3
0929 8077           1584      rseeind:               jmp             seeind
092B F4             1585     aless0:                         cpl             a
092C 54F7           1586                                             anl             a,#0f7h         ;d11=0
092E F5D3           1587                                             mov             DAC0H,a
                    1588                                                                             ;мл байт
0930 ED             1589                                             mov             a,r5
0931 F4             1590                                             cpl             a
0932 F5D2           1591                                             mov             DAC0L,a
0934                1592     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1593                                     
                    1594                                             
0934                1595     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1596                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1597                     ;до конца цикла измерения результат не размещать в буфере
                    1598                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1599                     ;и возврату в режим измерения
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    26

0934 201456         1600                                             jb              bitvich,rnorvich
0937 201053         1601                                             jb              bitt2,rnorvich
093A 2017EC         1602                                             jb              bitoll,rseeind
                    1603                                             
093D 2011E9         1604                                             jb              bitmenu,rseeind
0940 200BE6         1605                                             jb              bitmem,rseeind
                    1606     ;;;;;;;;;;;;;;
                    1607                                             ; mov           r0,#rez_A3
                    1608                                             ;call   resar2
                    1609                                             ;call   ftol                    ;float->int r2..r5
                    1610     ;;;;;;;;
0943 789C           1611                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
0945 120000   F     1612                                             call    resar2;????????????????17.01.07
                    1613                                     
0948 120000   F     1614                                             call    maform
094B 784F           1615                                             mov             r0,#abin
094D 120000   F     1616                                             call    saver2
                    1617     ;;;;;;;;
                    1618                                             
0950 7853           1619                                             mov             r0,#adec
0952 7952           1620                                             mov             r1,#abin+3      ;hex->10
0954 120000   F     1621                                             call    bindec
                    1622                                     
0957 785C           1623                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0959 7946           1624                                             mov             r1,#bufind+6
095B 7F07           1625                                             mov             r7,#7
095D E6             1626     bufdec:                         mov             a,@r0
095E 2430           1627                                             add             a,#30h
0960 F7             1628                                             mov             @r1,a
0961 19             1629                                             dec             r1
0962 18             1630                                             dec             r0
0963 DFF8           1631                                             djnz    r7,bufdec
0965 7847           1632                                             mov             r0,#bufind+7
0967 762D           1633                                             mov             @r0,#2dh          ;-2..-9
0969 7840           1634                                             mov             r0,#bufind
096B 762B           1635                                             mov             @r0,#2bh
096D 300202         1636                                             jnb             znmat,nozzmi;bitznak,nozzmi
0970 762D           1637                                             mov             @r0,#2dh
0972 79AE           1638     nozzmi:                         mov             r1,#diap
0974 7848           1639                                             mov             r0,#bufind+8
0976 E7             1640                                             mov             a,@r1
0977 B40808         1641                                             cjne    a,#8,nodi8
097A 7630           1642                                             mov             @r0,#30h                 ;10-10
097C 18             1643                                             dec             r0
097D 7663           1644                                             mov             @r0,#63h;31h
097F 08             1645                                             inc             r0
0980 8012           1646                                             jmp             seegoon
0982 B4090C         1647     nodi8:                          cjne    a,#9,nodis9
                    1648                                     
0985 7631           1649                                             mov             @r0,#31h           ;10-11
0987 18             1650                                             dec             r0
0988 7663           1651                                             mov             @r0,#63h;31h
                    1652                                     
098A 08             1653                                             inc             r0
098B 8007           1654                                             jmp             seegoon
                    1655     
098D 8079           1656     rnorvich:               jmp             norvich
098F 8085           1657     rno3parN:               jmp             no3parN
                    1658     
0991 2432           1659     nodis9:                         add             a,#32h
0993 F6             1660                                             mov             @r0,a;#37h;"T";
0994 08             1661     seegoon:                        inc             r0
0995 7641           1662                                             mov             @r0,#"A";"E";
0997 08             1663                                             inc             r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    27

0998 7600           1664                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
099A 08             1665                                             inc             r0;             mov             buf
                             ind+11
099B 7610           1666                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1667                                             
                    1668     ;;;;;;;;;;;;;;;
                    1669     ;;;;;;goonind:
099D 79AF           1670                                             mov             r1,#parN        ; ??????
099F B703ED         1671                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1672             
09A2                1673     seeind:                         ;;;;;;;;;;;;;
09A2 784A           1674                                             mov             r0,#bufind+10
09A4 E6             1675                                             mov             a,@r0
09A5 300F03         1676                                             jnb             bitnul,nnnul
09A8 4408           1677                                             orl             a,#08h
09AA F6             1678                                             mov             @r0,a
09AB 799A           1679      nnnul:         mov             r1,#parT
09AD B70204         1680                                             cjne    @r1,#2,nsec1
09B0 4420           1681                                             orl             a,#20h    ;1s
09B2 8009           1682                                             jmp             nsec10
09B4 B70104         1683     nsec1:          cjne    @r1,#1,nsec11
09B7 4440           1684                                             orl             a,#40h                  ;10s
09B9 8002           1685                                             jmp             nsec10
                    1686                                     
09BB 4410           1687     nsec11:         orl             a,#10h
                    1688                                                      ;0,1s
                    1689     ;;;;;;;;;;;;;;;;
09BD                1690     nsec10:         
                    1691     
                    1692     
09BD 784A           1693                                             mov             r0,#bufind+10   
09BF F6             1694                                             mov             @r0,a
09C0 300504         1695                                             jnb             bitavp,nobavp
09C3 4404           1696                                             orl             a,#04           ;bufind+10.2
09C5 F6             1697                                             mov             @r0,a
09C6 F6             1698                                             mov             @r0,a   
09C7 784A           1699     nobavp:         mov             r0,#bufind+10   
09C9 F6             1700                                             mov             @r0,a   
09CA 301803         1701                                        jnb          knizm,nobitizm
09CD 4402           1702                                             orl             a,#02
09CF F6             1703                                              mov            @r0,a
09D0                1704     nobitizm:                       
09D0 301A07         1705                                             jnb             bitakt,notakt
09D3 C21A           1706                                             clr             bitakt
09D5 534AFE         1707                                             anl             bufind+10,#0feh
09D8 8005           1708                                             jmp             taktind
09DA D21A           1709     notakt:                         setb    bitakt
09DC 434A01         1710                                             orl             bufind+10,#01                      
                                          
09DF                1711     taktind:                
                    1712     ;;;;;;;;;
09DF 301517         1713                                             jnb             biteizm,yesind
09E2 79B1           1714                                             mov             r1,#vichR
09E4 7848           1715                                             mov             r0,#bufind+8
09E6 7654           1716                                             mov             @r0,#'T'
09E8 08             1717                                             inc             r0
09E9 B72104         1718                                             cjne    @r1,#21h,test9i
09EC 7631           1719                                             mov             @r0,#31h;11A
                    1720                                     ;       dec             r0
                    1721                                     ;       mov             @r0,#63h
09EE 8009           1722                                             jmp             yesind
09F0 B72204         1723     test9i:         cjne    @r1,#22h,test7i
09F3 7632           1724                                             mov             @r0,#32h;39h;09A
09F5 8002           1725                                             jmp             yesind
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    28

09F7 7633           1726     test7i:         mov             @r0,#33h;37h;07A
                    1727     ;;;;;;;;;
09F9                1728     yesind:         
09F9 301203         1729                                             jnb             bitklb,noklb
09FC 434A80         1730                                             orl             bufind+10,#80h; on kmp
09FF 300A03         1731     noklb:          jnb             bitbon,nobuf
0A02 434B02         1732                                             orl             bufind+11,#02h; on pysk
0A05 120000   F     1733     nobuf:          call    ind        ;пп выдачи на индикатор
0A08                1734     norvich: 
0A08 789A           1735                                     mov             r0,# parT
0A0A 79AC           1736                                             mov             r1,#chind
0A0C B60152         1737                                             cjne    @r0,#1,rnot1in
0A0F                1738     labelB:                    ;;;;;;;;;;;
                    1739                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A0F 789F           1740                                                     mov     r0,#rez_A3+3
                    1741                             ;;;;;;;;
0A11 79BB           1742                             mov             r1,#work+3
0A13 E6             1743                             mov             a,@r0
0A14 7F07           1744                             mov             r7,#7;кол сдв вправо
0A16 C3             1745     dvig3:          clr             c
0A17 13             1746                             rrc             a
0A18 DFFC           1747                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A1A FA             1748                             mov             r2,a    ;сохр байт
0A1B 18             1749                             dec             r0              ;rez_A3+2
0A1C E6             1750                             mov             a,@r0
0A1D C0E0           1751                             push    acc
0A1F C3             1752                             clr             c
0A20 7F01           1753                             mov             r7,#1
0A22 C3             1754     dvig2:          clr             c
0A23 33             1755                             rlc             a
0A24 DFFC           1756                             djnz    r7,dvig2 ;d12..d11       средний байт
0A26 4A             1757                             orl             a,r2
0A27 F7             1758                             mov             @r1,a;сформ мл байт
0A28 19             1759                             dec             r1
0A29 D0E0           1760                             pop             acc
                    1761                             
0A2B 7F07           1762                             mov             r7,#7
0A2D C3             1763     dvig1:          clr             c
0A2E 13             1764                             rrc             a
0A2F DFFC           1765                             djnz    r7,dvig1 ;d18     ср байт
0A31 FA             1766                             mov             r2,a   ;сохр
0A32 18             1767                             dec             r0
0A33 E6             1768                             mov             a,@r0 ;rez_A3+1
0A34 C0E0           1769                             push    acc
                    1770                     
0A36 7F01           1771                             mov             r7,#1
0A38 C3             1772     dvig0:          clr             c
0A39 33             1773                             rlc             a
0A3A DFFC           1774                             djnz    r7,dvig0 ;        d21..d16
0A3C 4A             1775                             orl             a,r2
0A3D F7             1776                             mov             @r1,a   ; сформ средний  байт
0A3E 19             1777                             dec             r1
0A3F D0E0           1778                             pop             acc       ;rez_A3+1
                    1779                             ;;;;;;;;;;;;;;
                    1780     ;                       jb              acc.7,dvm
0A41 C3             1781                             clr             c
0A42 7F07           1782                             mov             r7,#7
0A44 C3             1783     dvig4:          clr             c
0A45 13             1784                             rrc             a
0A46 DFFC           1785                             djnz    r7,dvig4 ;        d22
0A48 FA             1786                             mov             r2,a   ;сохр
0A49 18             1787                             dec             r0;     rez_A3
0A4A E6             1788                             mov             a,@r0
                    1789                             ;;;;;
0A4B 7F01           1790                             mov             r7,#1
0A4D C3             1791     vig0:           clr             c
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    29

0A4E 33             1792                             rlc             a
0A4F DFFC           1793                             djnz    r7,vig0 ;         d24..d30
0A51 4A             1794                             orl             a,r2
0A52 F7             1795                             mov             @r1,a   ; сформ   байт
0A53 19             1796                             dec             r1
0A54 E6             1797                             mov             a,@r0
                    1798                             ;;;;;
0A55 20E70C         1799                             jb              acc.7,dvm
0A58 C3             1800                             clr             c
0A59 7F07           1801                             mov             r7,#7
0A5B C3             1802     vig4:           clr             c
0A5C 13             1803                             rrc             a
0A5D DFFC           1804                             djnz    r7,vig4 ;         d
0A5F 8009           1805                             jmp             endsdv
                    1806     
0A61 020000   F     1807     rnot1in:                jmp             not1in
                    1808     
                    1809     ;;;;;;;;;;;;                                    
0A64 7F07           1810     dvm:            mov             r7,#7
0A66 D3             1811     dvig6:          setb            c
0A67 13             1812                             rrc             a
0A68 DFFC           1813                             djnz    r7,dvig6 ;        d31
0A6A F7             1814     endsdv:         mov             @r1,a
                    1815                                                             
                    1816      ;->work   
                    1817                             
0A6B 900000   F     1818                             mov             dptr,#chzap
0A6E 120000   F     1819                             call     ldc_long
0A71 78BB           1820                              mov            r0,#work+3
0A73 120000   F     1821                             call    ladd
0A76 ED             1822                             mov             a,r5
0A77 F5D5           1823                             mov             DAC1L,a
                    1824                             
0A79 EC             1825                             mov             a,r4
0A7A F5D6           1826                             mov             DAC1H,a
                    1827     
                    1828                                             ;;;;;;;;;;
0A7C 78CF           1829                                             mov                     r0,#chbuf       
0A7E 120000   F     1830                                             call            resar2  
0A81 900000   F     1831                                             mov                     dptr,#ch_1       
0A84 120000   F     1832                                             call            ldc_ltemp
0A87 1201D1         1833                                             call            flsub
0A8A 78CF           1834                                             mov                     r0,#chbuf       
0A8C 120000   F     1835                                             call            saver2  
0A8F 900000   F     1836                                             mov                     dptr,#ch_1
0A92 120000   F     1837                                             call            ldc_ltemp
0A95 1201D6         1838                                             call            flcmp
                    1839                                             
                    1840                                             
                    1841                                             
0A98 5009           1842                                             jnc                     rnobuf0
0A9A 200909         1843                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0A9D 200A08         1844                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0AA0 020000   F     1845                                             jmp             gocikle
0AA3 020000   F     1846     rnobuf0:        jmp             nobuf0
0AA6                1847     yesprd: ;передать   A3 в буфер
0AA6 801C           1848                                             jmp             goonT
0AA8                1849     yesbuf:         ;записать   A3 в буфер
0AA8 120000   F     1850                                             call            resa_hl;dptr-
0AAB 120000   F     1851                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1852                                                                             ;в ячейке saven_bl
0AAE 120000   F     1853                                             call            save_hl
0AB1 78AE           1854                                             mov                     r0,#diap
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    30

0AB3 E6             1855                                             mov                     a,@r0
0AB4 F534           1856                                             mov                     sadiap,a
                    1857                                             ;строб
0AB6 E586           1858                                                     mov             a,P6            ;p6.4=0
0AB8 54EF           1859                             anl             a,#0efh
0ABA F586           1860                             mov             P6,a
0ABC 00             1861                             nop
0ABD 00             1862                             nop
                    1863                                     
0ABE E586           1864                             mov             a,P6                    ;p6.4=1 
0AC0 4410           1865                             orl             a,#10h
0AC2 F586           1866                             mov             P6,a                        
0AC4 78CD           1867     goonT:                          mov             r0,#interva;high  byte loadr2
0AC6 E6             1868                                             mov             a,@r0
0AC7 FC             1869                                             mov             r4,a
0AC8 08             1870                                             inc             r0
0AC9 E6             1871                                             mov             a,@r0
0ACA FD             1872                                             mov             r5,a
0ACB E4             1873                                             clr             a
0ACC FB             1874                                             mov             r3,a
0ACD FA             1875                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0ACE 120402         1876                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1877     
0AD1 789A           1878                                                                             mov             r0,
                             #parT
0AD3 B60110         1879                                                                     cjne    @r0,#1,nott1
                    1880                                     
0AD6 900000   F     1881                                     mov                     dptr,#ch_2       
0AD9 120000   F     1882                                     call            ldc_ltemp
0ADC 120203         1883     intmul: call            flmul
0ADF 78CF           1884     intmul1:mov                     r0,#chbuf
0AE1 120000   F     1885                                     call            saver2          ;*2
0AE4 8040           1886                                     jmp             gocikle
                    1887     
0AE6 B60208         1888     nott1:                  cjne    @r0,#2,nott2
0AE9 900000   F     1889                                                     mov                     dptr,#ch_10      
0AEC 120000   F     1890                                     call            ldc_ltemp
0AEF 80EB           1891                                     jmp                     intmul                             
                                  ;*10
                    1892     
0AF1 B60308         1893     nott2:                  cjne    @r0,#3,nott3
0AF4 900000   F     1894                                                     mov                     dptr,#ch_2       
0AF7 120000   F     1895                                     call            ldc_ltemp
0AFA 80E0           1896                                     jmp                     intmul                             
                                  ;*2
                    1897     
                    1898     
0AFC B60411         1899     nott3:          cjne    @r0,#4,nott4
0AFF 900000   F     1900                                             mov                     dptr,#ch_10      
0B02 120000   F     1901                                             call            ldc_ltemp       ;/10*4
0B05 1202B7         1902                                             call            fldiv
0B08 900000   F     1903                                             mov                     dptr,#ch_4       
0B0B 120000   F     1904                                             call            ldc_ltemp
0B0E 80CC           1905                                             jmp             intmul
                    1906     
0B10 B6050B         1907     nott4:          cjne    @r0,#5,nott5
0B13 900000   F     1908                                                     mov                     dptr,#ch_5       
0B16 120000   F     1909                                             call            ldc_ltemp
0B19 1202B7         1910                                             call            fldiv           ;/5
0B1C 80C1           1911                                             jmp             intmul1;T=5
0B1E 900000   F     1912     nott5:                  mov                     dptr,#ch_1       
0B21 120000   F     1913                                     call            ldc_ltemp
0B24 80B6           1914                                     jmp                     intmul                             
                                  ;*1
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    31

                    1915     
                    1916     
0B26 300708         1917     gocikle:        jnb             bitzus,nofz                     
0B29 120000   F     1918                             call    z_05s    ;0,5c
0B2C 120000   F     1919                             call    z_05s    ;0,5c
0B2F C207           1920                             clr     bitzus;bitbuf бит задержки засылки us
0B31 020000   F     1921     nofz:           jmp     labelA;rebyte
                    1922     
                    1923     
0B34 80F0           1924     yestt5:         jmp             gocikle
                    1925     
0B36 78CF           1926     nobuf0:                         mov             r0,#chbuf
0B38 120000   F     1927                                                             call            resar2
0B3B 900000   F     1928                                                                     mov                     dpt
                             r,#ch_1       
0B3E 120000   F     1929                                     call            ldc_ltemp
0B41 1201D1         1930                                     call            flsub
0B44 80E0           1931                                             jmp             gocikle
                    1932     
                    1933     
0B46 B60205         1934     not1in:                         cjne    @r0,#2,not2in
0B49 7701           1935                                             mov             @r1,#1           ;T=2
0B4B 020000   F     1936                                             jmp     labelB
                    1937     
0B4E B60305         1938     not2in:                         cjne    @r0,#3,not3in
0B51 7701           1939                                             mov             @r1,#1;9                ;T=3
0B53 020000   F     1940                                             jmp     labelB
0B56 7703           1941     not3in:                         mov             @r1,#3;19
0B58 020000   F     1942                                             jmp     labelB
                    1943     
                    1944     
                    1945     ;;;;;;;;;;;3.11.06
                    1946     
                    1947     ;;коррекция 0
0B5B 7883           1948     KORnul:         mov             r0,#chdel
0B5D B60010         1949                             cjne    @r0,#0,nonuldel
                    1950                                     
0B60 E584           1951                             mov             a,p4                    ;сохр  us
0B62 F536           1952                             mov             saus,a
0B64 E585           1953                             mov             a,p5
0B66 F537           1954                             mov             saus+1,a
                    1955     
0B68 900000   F     1956                             mov             dptr,#kor0us
0B6B 120000   F     1957                             call    lospus          ;упр слово коррекции 0
0B6E 8018           1958                             jmp             chdelmo
                    1959     
0B70                1960     nonuldel:       ;cjne   @r0,#7,no4del
0B70 B6031B         1961                                                     cjne    @r0,#3,no4del
                    1962                             ;рез ->AN
0B73 7862           1963                             mov             r0,#rez_A;->r2..r5
0B75 120000   F     1964                             call    resar2
                    1965             
                    1966                                     ;;;;;;;;;;
0B78 120402         1967                             call    altof           ;r2..r5->float
0B7B 7884           1968                             mov             r0,#kor0_AN;->kor0_AN
0B7D 120000   F     1969                             call    saver2
                    1970                                     
0B80 E536           1971                             mov             a,saus                  ;восстан исходное упр слово
0B82 F584           1972                             mov             p4,a
0B84 E537           1973                             mov             a,saus+1
0B86 F585           1974                             mov             p5,a            
0B88 7883           1975     chdelmo:        mov             r0,#chdel
0B8A 06             1976                             inc             @r0             ;chdel+1
0B8B 020000   F     1977                             jmp              rebyte
                    1978     
0B8E                1979     no4del:         ;cjne   @r0,#14,chdelmo
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    32

0B8E B606F7         1980                                             cjne    @r0,#6,chdelmo
0B91 7600           1981                             mov             @r0,#0          ;chdel
0B93 7898           1982                             mov             r0,#chinkor
0B95 7600           1983                             mov             @r0,#00;1;00;02;600;
0B97 08             1984                             inc             r0
0B98 76C8           1985                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0B9A 120000   F     1986                             call    clmassix;сбросить массив скольз среднего
0B9D 020000   F     1987                             jmp              rebyte
                    1988     
                    1989     ;автокалибровка
0BA0                1990     autoka:  ;;  mov                r0,#chavt
                    1991                      ;;  call               chcmp
                    1992                      ;;  jz         nulavt
                    1993                     ;;   mov                r1,#chavt
                    1994                     ;;   call               chdec;chavt-1
                    1995                      ;; jmp         rebyte
0BA0                1996     nulavt:  ;;;;;
0BA0 7883           1997                             mov             r0,#chdel
0BA2 B60016         1998                             cjne    @r0,#0,nndelch
0BA5 E584           1999                             mov             a,p4                    ;сохр  us
0BA7 F536           2000                             mov             saus,a
0BA9 E585           2001                             mov             a,p5
0BAB F537           2002                             mov             saus+1,a
                    2003     
0BAD E585           2004                             mov   a,p5
0BAF 4404           2005                             orl             a,#04              ;p5.2=1
0BB1 00             2006                             nop
0BB2 00             2007                             nop
0BB3 543F           2008                             anl             a,#3fh          ;p5.6,p5.7=0
0BB5 F585           2009                             mov   p5,a
0BB7 06             2010                             inc             @r0
0BB8 020000   F     2011                             jmp              rebyte
                    2012     
0BBB B6033D         2013     nndelch:        cjne    @r0,#3,n4delch
                    2014                             ;pez->A+
                    2015                             ;K+=000/(A+-AN)
                    2016                             ;mov            r0,#rez_A;->r2..r5
                    2017                             ;call   resar2
0BBE E577           2018                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0BC0 FA             2019                                     mov             r2,a
0BC1 E578           2020                                     mov             a,reacp+1
0BC3 FB             2021                                     mov             r3,a
0BC4 E579           2022                                     mov             a,reacp+2
0BC6 FC             2023                                     mov             r4,a
0BC7 E57A           2024                                     mov             a,reacp+3
0BC9 FD             2025                                     mov             r5,a
                    2026                                     ;;;;;;;;;;;;;;;
0BCA 120402         2027                             call    altof                   ;r2..r5->float
0BCD 7888           2028                             mov             r0,#rezAp;->rezAp
0BCF 120000   F     2029                             call    saver2                          
0BD2 7884           2030                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0BD4 120000   F     2031                             call    resar8                          
0BD7 1201D1         2032                             call    flsub           ; r2..r5(A+-AN)
0BDA 120000   F     2033                             call    move28     ;r2..r5->r8..r11
0BDD 900000   F     2034                             mov             dptr,#CH2tho;000->r2..r5 float
0BE0 120000   F     2035                             call    ldc_long                
0BE3 1202B7         2036                             call    fldiv
0BE6 EA             2037                             mov             a,r2
0BE7 547F           2038                             anl             a,#7fh
0BE9 FA             2039                             mov             r2,a
0BEA 7890           2040                             mov             r0,#koefKp;->koefKp
0BEC 120000   F     2041                             call    saver2
                    2042                       
                    2043                     ;       anl             P5,#0feh                ;p5.0=0 
0BEF E585           2044                     mov             a,P5
0BF1 543B           2045                             anl             a,#3bh;acp-
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    33

0BF3 F585           2046                             mov             P5,a
0BF5 7883           2047                             mov             r0,#chdel
0BF7 06             2048                             inc             @r0                       ;ch+1
0BF8 020000   F     2049                             jmp             rebyte
                    2050     
0BFB B6063F         2051     n4delch:        cjne    @r0,#6,n8delch
                    2052                             ; pez->A-
                    2053                             ;K-=000/(A--AN)
                    2054                     ;       mov     r0,#rez_A;->r2..r5
                    2055                     ;       call    resar2
0BFE E577           2056                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C00 FA             2057                                     mov             r2,a
0C01 E578           2058                                     mov             a,reacp+1
0C03 FB             2059                                     mov             r3,a
0C04 E579           2060                                     mov             a,reacp+2
0C06 FC             2061                                     mov             r4,a
0C07 E57A           2062                                     mov             a,reacp+3
0C09 FD             2063                                     mov             r5,a
                    2064                                     ;;;;;;;;;;;;;;;
0C0A 120402         2065                             call    altof                   ;r2..r5->float
0C0D 788C           2066                             mov             r0,#rezAm;->rezAm
0C0F 120000   F     2067                             call    saver2                          
0C12 7884           2068                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0C14 120000   F     2069                             call    resar8                          
0C17 1201D1         2070                             call    flsub                   ; r2..r5(A--AN)
0C1A 120000   F     2071                             call    move28                  ;r2..r5->r8..r11
0C1D 900000   F     2072                             mov             dptr,#CH2tho    ;000->r2..r5 float
0C20 120000   F     2073                             call    ldc_long                
0C23 1202B7         2074                             call    fldiv
0C26 EA             2075                             mov             a,r2
0C27 547F           2076                             anl             a,#7fh
0C29 FA             2077                             mov             r2,a
0C2A 7894           2078                             mov             r0,#koefKm;->koefKm
0C2C 120000   F     2079                             call    saver2
                    2080                        
0C2F E536           2081                             mov             a,saus                  ;восстан исходное упр слово
0C31 F584           2082                             mov             p4,a
0C33 E537           2083                             mov             a,saus+1
0C35 F585           2084                             mov             p5,a            
0C37 7883           2085                             mov             r0,#chdel
0C39 06             2086                             inc             @r0                       ;ch+1
0C3A 020000   F     2087                        jmp    rebyte
                    2088     
0C3D B6090F         2089     n8delch:        cjne    @r0,#9,n12delch
0C40 7600           2090                             mov             @r0,#0
0C42 7981           2091                             mov             r1,#chavt
0C44 770C           2092                             mov             @r1,#0ch;6;1;
0C46 09             2093                             inc             r1
0C47 7780           2094                             mov             @r1,#80h;40h;
0C49 120000   F     2095                             call   clmassix     ;сбросить массив среднего
0C4C 020000   F     2096                             jmp             rebyte
0C4F 06             2097     n12delch:       inc             @r0
0C50 020000   F     2098                             jmp             rebyte
                    2099     
                    2100     
                    2101     
                    2102                                 
0C53 020000   F     2103     rout6:          jmp             out6
0C56 020000   F     2104     rlabelF:        jmp             labelF  
0C59 020000   F     2105     rknrazr:        jmp             knrazr  
0C5C 020000   F     2106     rknopt:         jmp             knopt
0C5F 020000   F     2107     rizman:         jmp             izman   
0C62                2108     keyb1:  ;IE6 
0C62 75E700         2109                                     mov             EIE2,#00H
                    2110                                     
0C65 C0E0           2111                                     push    acc
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    34

0C67 C0D0           2112                                     push    psw
0C69 C000           2113                                     push    rr0
0C6B C001           2114                                     push    rr1
0C6D C002           2115                                     push    rr2
0C6F C003           2116                                     push    rr3
0C71 C004           2117                                     push    rr4
0C73 C005           2118                                     push    rr5
0C75 C006           2119                                     push    rr6
0C77 C007           2120                                     push    rr7
                    2121                                     ;clr            bitmig
                    2122                       ;;;;;;;;;;;;;;
0C79 120000   F     2123                                     call    z_01s;0,1s
0C7C 120000   F     2124                                             call    z_01s
                    2125                                     ;восстан знакоместо при мигании
                    2126                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0C7F 78B2           2127                                     mov             r0,#marker
0C81 7440           2128                                     mov             a,#bufind
0C83 26             2129                                     add             a,@r0                   ;a=bufind+marker
0C84 F9             2130                                     mov             r1,a
0C85 A73C           2131                                     mov             @r1,savba
                    2132                                     ;;;;;;;;;;;
0C87 E5B0           2133                             mov             a,p3
0C89 20E644         2134                                     jb              acc.6,outviR;выход из режима выч R
0C8C E5B0           2135     gout6:                          mov             a,p3
0C8E 44FF           2136                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0C90 F5B0           2137                                     mov             p3,a
0C92 E5B0           2138                                     mov             a,p3
0C94 30E6BC         2139                                     jnb             acc.6,rout6             ;error
0C97 3004BC         2140                                     jnb             bitizm,rlabelF
0C9A 75B0FE         2141                                     mov             p3,#0feh                ;реж IZM
0C9D E5B0           2142                                     mov             a,p3
0C9F 30E6BD         2143                                     jnb             acc.6,rizman
                    2144                                     ;;;;;;
0CA2 201232         2145                                     jb              bitklb,goklb
0CA5 75B0FD         2146                                     mov             p3,#0fdh
0CA8 E5B0           2147                                     mov             a,p3
0CAA 30E6AC         2148                                     jnb             acc.6,rknrazr             ;labelC
0CAD 75B0FB         2149                                     mov             p3,#0fbh
0CB0 E5B0           2150                                     mov             a,p3
0CB2 30E655         2151                                     jnb             acc.6,knright           ;->
0CB5 75B0F7         2152                                     mov             p3,#0f7h
0CB8 E5B0           2153                                     mov             a,p3
0CBA 30E69F         2154                                     jnb             acc.6,rknopt                    ;T
0CBD 75B0EF         2155                                     mov             p3,#0efh
0CC0 E5B0           2156                                mov          a,p3
0CC2 30E615         2157                                     jnb             acc.6,pyskst                    ;pysk/stop
0CC5 75B0DF         2158                                     mov             p3,#0dfh
0CC8 E5B0           2159                                     mov             a,p3
0CCA 30E659         2160                                jnb          acc.6,knvich
0CCD 020000   F     2161                                     jmp             izmpaT
                    2162     
0CD0 3006B9         2163     outviR: jnb             bitvi11,gout6   
0CD3 C214           2164                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0CD5 C206           2165                                     clr             bitvi11
                    2166                                     
0CD7 020000   F     2167     goklb:          jmp             out6
                    2168     
0CDA 200A12         2169     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0CDD D20A           2170                                     setb    bitbon  ;уст реж буфер вкл
0CDF 79D5           2171                                     mov                     r1,#volume;work         ;обьем блок
                             а
0CE1 7700           2172                                     mov                     @r1,#00
0CE3 09             2173                                     inc                     r1
0CE4 77C7           2174                                     mov                     @r1,#0c7h                       ;32
                             0h/4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    35

0CE6 434B02         2175                                     orl             bufind+11,#02h; on pysk
0CE9 120000   F     2176                                     call            ind
0CEC 020000   F     2177                                     jmp             izmpaT
0CEF C20A           2178     bufon:                  clr             bitbon  ;уст реж буфер выкл
0CF1 534BFD         2179                                             anl             bufind+11,#0fdh; off pysk
0CF4 120000   F     2180                                             call    ind
0CF7 020000   F     2181                                     jmp             izmpaT
                    2182     
0CFA 79B0           2183     tizmri:                 mov             r1,#level
0CFC B70102         2184                                     cjne    @r1,#1,right2
                    2185                                     ;10s->HET
0CFF 8004           2186                                     jmp             right3
                    2187     
0D01 07             2188     right2:                 inc             @r1
0D02 120000   F     2189                                     call    lolevT
                    2190                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D05 120000   F     2191     right3:                 call    ind
0D08 806D           2192                                     jmp             izmfun
                    2193     
                    2194                             
                    2195                             
0D0A                2196     knright:        
                    2197     
0D0A 79AE           2198                                     mov             r1,#diap
                    2199                             ;перекл диапазон 1 поз вверх сбр массив
0D0C 17             2200                                     dec             @r1
0D0D B7FF04         2201                                     cjne    @r1,#0ffh,diinc
0D10 7700           2202                                     mov             @r1,#0
0D12 8063           2203                                     jmp  izmfun
0D14 120000   F     2204     diinc:                  call     clmassix
0D17 78B3           2205                                     mov             r0,#summa
0D19 120000   F     2206                                     call    clear4
0D1C 786A           2207                                     mov             r0,#rez_A0
0D1E 120000   F     2208                                     call    clear4  
0D21 120000   F     2209                                     call    loadUS
0D24 8051           2210                                      jmp  izmfun
                    2211     
0D26 200613         2212     knvich:            jb           bitvi11,onvich
0D29 C204           2213                                     clr             bitizm
0D2B D214           2214                                     setb    bitvich
                    2215                                     
0D2D 78B1           2216                                     mov             r0,#vichR
0D2F 7611           2217                                     mov             @r0,#11h;;????????or 0
                    2218                                     ;ВЫЧИСЛИТЬ
0D31 900000   F     2219                                     mov     dptr,#teVICH
0D34 120000   F     2220                                     call    lotext
0D37 120000   F     2221                                call         z_1s;;;;;;;
0D3A 8076           2222                                     jmp              viout;izmpaT
                    2223     
0D3C C214           2224     onvich:                 clr             bitvich
0D3E 78B1           2225                                     mov             r0,#vichR
0D40 7600           2226                                     mov             @r0,#0
0D42 8037           2227                                     jmp              izmpaT
                    2228     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0D44 301820         2229     louizm:            jnb          knizm,lou
0D47 79AE           2230                                     mov             r1,#diap
0D49 C3             2231                                     clr             c
0D4A 7403           2232                                     mov             a,#3
0D4C 97             2233                                     subb    a,@r1
0D4D 5006           2234                                     jnc             lldi23    ;10-2..10-5
                    2235                                     ;10-6..10-11
0D4F E584           2236                                     mov             a,p4
0D51 54F7           2237                                     anl             a,#0f7h   ;d3
0D53 F584           2238                                     mov             p4,a
0D55 E7             2239     lldi23:                 mov             a,@r1
0D56 6403           2240                                     xrl             a,#3
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    36

0D58 7002           2241                                     jnz             lldi3
0D5A 8005           2242                                     jmp             lldi2   ;10-5
0D5C E7             2243     lldi3:                  mov             a,@r1
0D5D 6402           2244                                     xrl             a,#2            ;
0D5F 7006           2245                                     jnz             lou             
0D61 E585           2246     lldi2:                  mov             a,p5            ;10-4
0D63 4408           2247                                     orl             a,#08
0D65 F585           2248                                     mov             p5,a
0D67 22             2249     lou:                    ret
                    2250                               ;;;;;;
0D68 201807         2251     izman:                  jb              knizm,knizmon
0D6B D218           2252                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2253                             ;       d3(k5 p4),d3(u5 p5)заслать us
0D6D 120000   F     2254                                     call    louizm 
0D70 8005           2255                                     jmp             izmfun
0D72 C218           2256     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0D74 120000   F     2257                                     call    loadUS;восстановить us
0D77                2258     izmfun:                 
0D77 D207           2259                                     setb    bitzus;bitbuf
0D79 8000           2260                                     jmp             labelE;;;;;;;;;;;;
                    2261                                     ;;;;;;;;;;;;;;
0D7B                2262     izmpaT:
                    2263     ;;;;;;;;;;;;;;;;;
                    2264                     ;       clr             c 
                    2265                     ;       mov             r1,#parN
                    2266     
                    2267                     ;       mov             r0,#diap
                    2268                     ;       mov             a,#6            
                    2269                     ;       subb    a,@r0
                    2270                     ;       jnc             labelE          ;         ;10-2..10-8
                    2271                               
                    2272                     ;       mov             @r1,#2          ;10-9..10-11            
                    2273                     ;       jmp             labelE
                    2274     
                    2275     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0D7B 789A           2276     labelE:                 mov             r0,#parT
0D7D 793D           2277                                     mov             r1,#chkl
0D7F B60108         2278                                     cjne    @r0,#1,izmt2
0D82 7700           2279                                     mov             @r1,#0
0D84 09             2280                                     inc             r1
0D85 7702           2281                                     mov             @r1,#2
0D87 020000   F     2282                                     jmp             out6
0D8A B60208         2283     izmt2:                  cjne    @r0,#2,izmt3
0D8D 7700           2284                                     mov             @r1,#0
0D8F 09             2285                                     inc             r1
0D90 7714           2286                                     mov             @r1,#20
0D92 020000   F     2287                                     jmp             out6
                    2288     
0D95 7700           2289     izmt3:                  mov             @r1,#0
0D97 09             2290                                     inc             r1
0D98 77C8           2291                                     mov             @r1,#200
0D9A 020000   F     2292                                     jmp             out6
                    2293     
                    2294     
                    2295     
                    2296     
0D9D                2297     knopt: ;кнопка T
0D9D C204           2298                                clr          bitizm
0D9F D210           2299                                setb         bitt2
0DA1 79B7           2300                                mov          r1,#load
0DA3 7704           2301                                mov          @r1,#4;1s
0DA5 120000   F     2302                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
0DA8 793D           2303                             mov             r1,#chkl
0DAA 7727           2304                             mov             @r1,#27h
0DAC 09             2305                             inc             r1
0DAD 7710           2306                             mov             @r1,#10h
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    37

0DAF 020000   F     2307                                jmp          out6
                    2308     
0DB2 793D           2309     viout:          mov             r1,#chkl
0DB4 7703           2310                             mov             @r1,#03
0DB6 09             2311                             inc             r1
0DB7 77E8           2312                             mov             @r1,#0e8h               ;1000
0DB9 020000   F     2313                             jmp             out6
                    2314     
0DBC                2315     knrazr:          
0DBC C3             2316     labelC:          clr            c
0DBD 78AF           2317                             mov             r0,#parN
0DBF 799A           2318                             mov             r1,#parT
0DC1 7402           2319                             mov             a,#2
0DC3 97             2320                             subb    a,@r1
0DC4 40B5           2321                             jc              labelE          ;T>2
0DC6 B60104         2322                             cjne    @r0,#1,noN1c
0DC9 7602           2323                             mov             @r0,#2          ;N=2
0DCB 80AE           2324                             jmp             labelE
                    2325     
0DCD B60204         2326     noN1c:          cjne    @r0,#2,not_1
0DD0 7603           2327                             mov             @r0,#3          ;N=3      ;10-2..10-8
0DD2 80A7           2328                             jmp             labelE
                    2329     
0DD4                2330     not_10: 
0DD4 7601           2331     not_1:          mov             @r0,#1                          ;N=1
0DD6 80A3           2332                             jmp     labelE
                    2333     
0DD8 020000   F     2334     rtizmri:        jmp             tizmri
0DDB D204           2335     ttout:          setb    bitizm;отжатие кнопки t
0DDD C210           2336                                             clr             bitt2
0DDF 020000   F     2337                                             jmp             out6
0DE2                2338     labelf:                 
0DE2 301037         2339                             jnb             bitt2,nofizm
0DE5 75B0FB         2340                        mov          p3,#0fbh
0DE8 E5B0           2341                        mov          a,p3
0DEA 20E6EE         2342                        jb           acc.6,ttout;outF
0DED 79B7           2343                        mov          r1,#load;parT
0DEF B70503         2344                        cjne         @r1,#5,noft1
                    2345                        ;t=10s
0DF2 020000   F     2346                        jmp          out6;ft1izm
                    2347     
0DF5 07             2348     noft1:     inc          @r1;dec         @r1
0DF6 120000   F     2349     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2350                             ;call   ind
0DF9 020000   F     2351                     jmp             out6;??????????????/
                    2352     
                    2353                             ;увеличить счетчик задержки клавиатуры
0DFC 783D           2354     outF:           mov             r0,#chkl
0DFE 7627           2355                             mov             @r0,#27h
0E00 08             2356                             inc             r0
0E01 7610           2357                             mov             @r0,#10h
0E03 020000   F     2358                             jmp             out6;out7
                    2359     
0E06 020000   F     2360     noviR1:         jmp             noviR
0E09 78B1           2361     outvich:        mov                     r0,#vichR
0E0B 7600           2362                                             mov                     @r0,#0
0E0D C214           2363                                             clr                     bitvich
0E0F C206           2364                                             clr                     bitvi11
0E11 C211           2365                                             clr                     bitmenu
0E13 D204           2366                                             setb            bitizm
0E15 78B2           2367                                             mov                     r0,#marker
0E17 76FF           2368                                             mov                     @r0,#0ffh
0E19 020000   F     2369                                             jmp                     out6    
                    2370     
0E1C 3014E7         2371     nofizm:         jnb             bitvich,noviR1
0E1F 75B0DF         2372                                                     mov             p3,#0dfh
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    38

0E22 30B6E4         2373                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0E25 78B1           2374                             mov             r0,#vichR
0E27 B61110         2375                             cjne    @r0,#11h,no11v6
0E2A 75B0FB         2376                             mov                     p3,#0fbh;->
0E2D 20B6CC         2377                             jb                      p3.6,outF
0E30 7612           2378                             mov             @r0,#12h                ;11= вычислить
0E32 900000   F     2379     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E35 120000   F     2380                             call    lotext
0E38 80C2           2381                             jmp             outF
                    2382             
0E3A B61210         2383     no11v6:         cjne    @r0,#12h,no12v6
0E3D 75B0FB         2384                             mov             p3,#0fbh;->
0E40 20B6B9         2385                             jb              p3.6,outF
0E43 7613           2386                             mov             @r0,#13h
0E45 900000   F     2387                             mov             dptr,#teOUT
0E48 120000   F     2388                             call    lotext
0E4B 80AF           2389                             jmp             outF
                    2390                     
0E4D B61310         2391     no12v6:         cjne    @r0,#13h,no13v6
0E50 75B0FB         2392                                                     mov             p3,#0fbh;->
0E53 20B6A6         2393                             jb              p3.6,outF
0E56 7611           2394                             mov             @r0,#11h
0E58 900000   F     2395                             mov             dptr,#teVICH
0E5B 120000   F     2396                             call    lotext
0E5E 809C           2397                             jmp             outF
                    2398     
                    2399     ;кн -> A= 0000
                    2400     ;кн -> B= +00000
0E60 75B0FB         2401     no13v6:         mov             p3,#0fbh
0E63 E5B0           2402                             mov             a,p3
0E65 20E635         2403                             jb              acc.6,chanZ
0E68 E53B           2404                             mov             a,movrig
0E6A B40714         2405                             cjne    a,#7,kon_B      
0E6D 78B2           2406                             mov             r0,#marker      ;A= 0000
0E6F B60716         2407                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0E72 E53A           2408     rikn:           mov             a,movleft
0E74 F6             2409                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2410     ;                               29.12.06
                    2411     ;;;;;;;;;;;;;;;;;;
                    2412     ;необходимо не портить цифру в следуюем справа знакоместе
                    2413     ;т е сохранить ее в ячейке для мигания в противном случае
                    2414     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2415     ;       знакоместа
0E75 78B2           2416                                     mov             r0,#marker
0E77 7440           2417                                     mov             a,#bufind
0E79 26             2418                                             add             a,@r0                   ;a=bufind+m
                             arker
0E7A F9             2419                                             mov             r1,a
0E7B 09             2420                                             inc             r1
0E7C 873C           2421                                             mov             savba,@r1
0E7E 020000   F     2422                                     jmp             outF
                    2423     
0E81 78B2           2424     kon_B:          mov             r0,#marker      ;B= +00000
0E83 B60802         2425                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0E86 80EA           2426                                             jmp             rikn
0E88                2427     mark0_8:
                    2428     ;                               29.12.06
                    2429     ;;;;;;;;;;;;;;;;;;
                    2430     ;необходимо не портить цифру в следуюем справа знакоместе
                    2431     ;т е сохранить ее в ячейке для мигания в противном случае
                    2432     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2433     ;       знакоместа ->B=+00000
0E88 78B2           2434                                             mov             r0,#marker
0E8A 7440           2435                                     mov             a,#bufind
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    39

0E8C 26             2436                                             add             a,@r0                   ;a=bufind+m
                             arker
0E8D F9             2437                                             mov             r1,a
0E8E 09             2438                                             inc             r1
0E8F 873C           2439                                             mov             savba,@r1
0E91 78B2           2440                             mov             r0,#marker
0E93 06             2441                             inc             @r0             ;       сдвинуть курсор вправо на 1
0E94 C219           2442                             clr             bitmig
0E96 B60901         2443                             cjne    @r0,#9,outma
0E99 18             2444                             dec             r0;ppp
0E9A 020000   F     2445     outma:          jmp             outF
                    2446     
0E9D 75B0FE         2447     chanZ:          mov             p3,#0feh
0EA0 E5B0           2448                             mov             a,p3
0EA2 20E611         2449                             jb              acc.6,chanma
                    2450                             ;изм знак в старшем разряде на противоположн
0EA5 E543           2451                             mov             a,bufind+3
0EA7 B42B06         2452                             cjne            a,#2bh,noplus
0EAA 75432D         2453                             mov                     bufind+3,#2dh           ;+->-   
0EAD 020000   F     2454                             jmp             outF
0EB0                2455     noplus:
0EB0 75432B         2456                             mov                     bufind+3,#2bh           ;-/+-
0EB3 020000   F     2457                             jmp             outF
0EB6 75B0FD         2458     chanma:         mov             p3,#0fdh
0EB9 E5B0           2459                             mov             a,p3
0EBB 20E603         2460                             jb              acc.6,outFl;labelL1
                    2461                             ;clr            bitmig
0EBE 120000   F     2462     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2463     
0EC1 020000   F     2464     outFl:                  jmp             outF
                    2465                     
0EC4                2466     nor11:          ;       выход
0EC4 7613           2467                     mov             @r0,#13h  ;12->13
0EC6 900000   F     2468                     mov             dptr,#teOUT
                    2469     ;               jmp             vi1113
                    2470     
                    2471     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2472     
                    2473     
                    2474     
0EC9 020000   F     2475     rlabelL:        jmp                     labelL
                    2476     ;findmem:               jmp             out6
0ECC 301171         2477     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2478     ;;;;;;;;;;;;;
0ECF 78B1           2479                                             mov                     r0,#vichR
0ED1 7415           2480                                             mov                     a,#15h
0ED3 C3             2481                                             clr                     c
0ED4 96             2482                                             subb            a,@r0
0ED5 4016           2483                                             jc                      ri21_23
                    2484     
0ED7 75B0FB         2485                                             mov             p3,#0fbh; реж кн меню ->
0EDA 20B60A         2486                                             jb              p3.6,ri6
0EDD 78B1           2487                                             mov             r0,#vichR
0EDF B61508         2488                                             cjne    @r0,#15h,norime
0EE2 7611           2489                                             mov             @r0,#11h
0EE4 120000   F     2490     norime1:        call            lomenu
0EE7 020000   F     2491     ri6:                    jmp             out6
0EEA 06             2492     norime:         inc             @r0
0EEB 80F7           2493                                             jmp             norime1
                    2494             
0EED 7423           2495     ri21_23:        mov                     a,#23h          ;->
0EEF C3             2496                                             clr                     c
0EF0 96             2497                                             subb            a,@r0
0EF1 4014           2498                                             jc                      ri_31
0EF3 75B0FB         2499                                             mov                     p3,#0fbh
0EF6 20B6EE         2500                                             jb                      p3.6,ri6
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    40

0EF9 B62308         2501                                             cjne            @r0,#23h,no23ri
0EFC 7621           2502                                             mov                     @r0,#21h
0EFE 120000   F     2503                                             call            lomenu
0F01 020000   F     2504                                             jmp                     out6
0F04 06             2505     no23ri:         inc                     @r0
0F05 80DD           2506                                             jmp                     norime1
0F07 B63119         2507     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0F0A 30130B         2508                                             jnb                     bitv19,gosk19
0F0D 900000   F     2509                                             mov                     dptr,#teS57_6;57,6
0F10 120000   F     2510                                             call            lotext
0F13 C213           2511                                             clr                     bitv19
0F15 020000   F     2512                                             jmp             out6
0F18 900000   F     2513     gosk19:         mov                     dptr,#teS19_2
0F1B 120000   F     2514                                             call            lotext
0F1E D213           2515                                             setb            bitv19
0F20 020000   F     2516                                             jmp                     out6
                    2517     
                    2518     
                    2519     
                    2520     ;labelS2:       jmp                     out6
                    2521     
0F23 7452           2522     no31ri:         mov                     a,#52h;42h              ;->
0F25 C3             2523                                             clr                     c
0F26 96             2524                                             subb            a,@r0
0F27 40BE           2525                                             jc                      ri6
0F29 75B0FB         2526                                             mov                     p3,#0fbh                   
                                  ;41,42
0F2C 30B608         2527                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F2F 75B0FD         2528                                             mov                     p3,#0fdh
0F32 20B6B2         2529                                             jb                      p3.6,ri6
0F35 8087           2530                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0F37 020000   F     2531     rlabelN:                jmp             labelN
0F3A 020000   F     2532     moutF:          jmp             outF
                    2533     ;;;;;;;;;;;;;;;;;;;;;;;;;
0F3D 020000   F     2534     rnnmemb:        jmp             nnmemb
                    2535     
0F40                2536     nbimenu:
0F40 300BFA         2537     findmem:        jnb             bitmem,rnnmemb
0F43 79B0           2538                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0F45 B71113         2539                        cjne         @r1,#11h,nomem11
                    2540                        
0F48 75B0FB         2541                        mov          p3,#0fbh
0F4B E5B0           2542                        mov          a,p3
0F4D 20E6EA         2543                        jb           acc.6,moutF
0F50 7712           2544                        mov          @r1,#12h
0F52 900000   F     2545                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0F55 120000   F     2546                        call         lotext
0F58 020000   F     2547                        jmp          outF
                    2548     
0F5B B71213         2549     nomem11:   cjne         @r1,#12h,nomem12
0F5E 75B0FB         2550                             mov             p3,#0fbh
0F61 E5B0           2551                        mov          a,p3
0F63 20E6D4         2552                        jb           acc.6,moutF
0F66 7713           2553                        mov          @r1,#13h
0F68 900000   F     2554                        mov          dptr,#teLIST            ;ПРОСМОТР
0F6B 120000   F     2555                        call         lotext
0F6E 020000   F     2556                        jmp          outF
0F71 B71313         2557     nomem12:         cjne           @r1,#13h,nomem13
0F74 75B0FB         2558                                             mov             p3,#0fbh
0F77 E5B0           2559                        mov          a,p3
0F79 20E6BE         2560                        jb           acc.6,moutF
0F7C 7714           2561                        mov          @r1,#14h
0F7E 900000   F     2562                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    41

0F81 120000   F     2563                        call         lotext
0F84 020000   F     2564                          jmp                outF
                    2565                             
0F87 B71413         2566     nomem13:cjne            @r1,#14h,labelL
0F8A 75B0FB         2567                             mov             p3,#0fbh
0F8D E5B0           2568                        mov          a,p3
0F8F 20E6A8         2569                        jb           acc.6,moutF
0F92 7711           2570                        mov          @r1,#11h
0F94 900000   F     2571                        mov          dptr,#teCLE                     ;ОЧИСТКА
0F97 120000   F     2572                        call         lotext
0F9A 020000   F     2573                          jmp                outF
0F9D                2574     labelL: 
                    2575                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
0F9D 78B0           2576                                     mov                     r0,#level
0F9F B6210E         2577                                     cjne            @r0,#21h,nobl21
0FA2 7622           2578                                     mov                     @r0,#22h                ;->БЛОК 
0FA4 900000   F     2579                                     mov                     dptr,#teBL
0FA7 120000   F     2580     me21_22:call            lotext
                    2581                             
0FAA 120000   F     2582                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
0FAD 020000   F     2583                                     jmp                     outF
                    2584     
0FB0 B62207         2585     nobl21: cjne            @r0,#22h,nobl22
0FB3 900000   F     2586                                     mov                     dptr,#teFULL
0FB6 7621           2587                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2588     
0FB8 80ED           2589                                     jmp                     me21_22
                    2590     
                    2591     ;labl21:           cjne @r0,#21h,nolev1
                    2592     ;                       mov             p3,#0fbh
                    2593     ;                       mov             a,p3
                    2594     ;                       jb              acc.6,loutF
                    2595     ;                       cjne    @r0,#21h,labl22
                    2596     ;                       mov             @r0,#22h
                    2597                             ;БЛОК
                    2598     ;                       call    lotext
                    2599     ;                       jmp             outF
                    2600     ;labl22:                mov             @r0,#21h
                    2601                             ;ПОЛНАЯ
                    2602     ;                       call    lotext
                    2603     ;                       jmp             outF
                    2604                      
0FBA B62325         2605     nobl22:         cjne    @r0,#23h,go31l
0FBD 75B0FB         2606     rigblo:         mov             p3,#0fbh
0FC0 20B629         2607                                             jb              p3.6,llev2
0FC3                2608     labL2:    ;  уст курсор в правую позицию 
                    2609                                     ;       кнопка                  ->
                    2610     ;;;;;;;;;;;;;;;;;;
                    2611     ;необходимо не портить цифру в следуюем справа знакоместе
                    2612     ;т е сохранить ее в ячейке для мигания в противном случае
                    2613     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2614     ;       знакоместа
0FC3 78B2           2615                                             mov             r0,#marker
0FC5 7440           2616                                     mov             a,#bufind
0FC7 26             2617                                             add             a,@r0                   ;a=bufind+m
                             arker
0FC8 F9             2618                                             mov             r1,a
0FC9 09             2619                                             inc             r1
0FCA 873C           2620                                             mov             savba,@r1
0FCC C219           2621                                             clr             bitmig
                    2622     ;;;;;;;;;;;;;;;;
0FCE 78B2           2623                       mov           r0,#marker      ;курсор справа  ?
0FD0 E53B           2624                             mov             a,movrig
0FD2 C3             2625                             clr             c
0FD3 96             2626                             subb    a,@r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    42

0FD4 6006           2627                             jz         equ1l
0FD6 E53B           2628                             mov             a,movrig;уст в правую позицию
0FD8 F6             2629                             mov             @r0,a
0FD9 020000   F     2630                             jmp             outF                                     
0FDC E53A           2631     equ1l:          mov             a,movleft;уст в левую позицию
0FDE F6             2632                             mov             @r0,a   
0FDF 020000   F     2633     loutF:  jmp             outF
                    2634                     
                    2635     
0FE2 B63102         2636     go31l:          cjne    @r0,#31h,go41l
0FE5 80D6           2637                             jmp             rigblo
0FE7 B6410B         2638     go41l:          cjne    @r0,#41h,norig2
0FEA 80D1           2639                             jmp             rigblo
                    2640     
0FEC 75B0FD         2641     llev2:          mov             p3,#0fdh
0FEF 20B6ED         2642                             jb              p3.6,loutF
0FF2 020000   F     2643                             jmp             labelL1
                    2644     
                    2645     ;->
0FF5 C3             2646     norig2:    clr          c               ;32,33,34,42
0FF6 7431           2647                             mov             a,#31h
0FF8 96             2648                             subb    a,@r0
0FF9 50E4           2649                             jnc             loutF
0FFB 75B0FB         2650     rigblok:        mov             p3,#0fbh  ;32,33,34,42
0FFE 20B626         2651                             jb              p3.6,lev2go
1001                2652     labelN: 
                    2653                             ;                               29.12.06
                    2654     ;;;;;;;;;;;;;;;;;;
                    2655     ;необходимо не портить цифру в следуюем справа знакоместе
                    2656     ;т е сохранить ее в ячейке для мигания в противном случае
                    2657     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2658     ;       знакоместа
1001 78B2           2659                                             mov             r0,#marker
1003 7440           2660                                     mov             a,#bufind
1005 26             2661                                             add             a,@r0                   ;a=bufind+m
                             arker
1006 F9             2662                                             mov             r1,a
1007 09             2663                                             inc             r1
1008 873C           2664                                             mov             savba,@r1
                    2665     ;;;;;;;;;;;;;;;;;;;
100A 78B2           2666                             mov             r0,#marker      ;курсор справа  ?
100C E53B           2667                             mov             a,movrig
100E C3             2668                             clr             c
100F 96             2669                             subb    a,@r0
1010 7006           2670                             jnz        noequ1
1012 E53A           2671                             mov             a,movleft;уст в крайнюю левую позицию
1014 F6             2672                             mov             @r0,a
1015 020000   F     2673                             jmp             outF
1018                2674     noequ1: ;29.12.06
                    2675     ;;;;;;;;;;;;;;;;;;
                    2676                             ;восстан знакоместо при мигании
                    2677                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1018 78B2           2678                                     mov             r0,#marker
101A 7440           2679                                     mov             a,#bufind
101C 26             2680                                     add             a,@r0                   ;a=bufind+marker
101D F9             2681                                     mov             r1,a
                    2682                                     ;mov            @r1,savba
101E 09             2683                                     inc             r1
101F 873C           2684                                     mov             savba,@r1
                    2685     ;;;;;;;;;;;;;;;;        
1021 120000   F     2686                             call    marri;уст сдвиг в правую        позицию
1024 020000   F     2687                             jmp             outF
1027 75B0FD         2688     lev2go:         mov             p3,#0fdh
102A 30B603         2689                             jnb             p3.6,rlabelL1
102D 020000   F     2690                             jmp             outF
                    2691     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    43

1030 020000   F     2692     rlabelL1:       jmp             labelL1
                    2693     
1033                2694     nnmemb:
                    2695                                     
                    2696     
                    2697     
1033                2698     norim6:    ;kn menu
1033                2699     out6:           
1033 D007           2700                                     pop             rr7     
1035 D006           2701                                     pop             rr6
1037 D005           2702                                     pop             rr5
1039 D004           2703                                     pop             rr4
103B D003           2704                                     pop             rr3
103D D002           2705                                     pop             rr2
103F D001           2706                                     pop             rr1                             
1041 D000           2707                                     pop             rr0
1043 D0D0           2708                                     pop             psw
1045 D0E0           2709                                     pop             acc
                    2710     ;clr            bitmig
1047 75E730         2711                                mov          EIE2,#30H
104A E5AD           2712                                mov          a,P3IF
104C 54BF           2713                                     anl             a,#0bfh
104E F5AD           2714                                     mov             P3IF,a
1050 75B0C0         2715                                     mov             P3,#0c0h
1053 C219           2716     clr             bitmig
1055 E586           2717                                             mov             a,P6            ;p6.4=0
1057 54EF           2718                             anl             a,#0efh
1059 F586           2719                             mov             P6,a
105B 00             2720                             nop
105C 00             2721                             nop
                    2722                                     
105D E586           2723                             mov             a,P6                    ;p6.4=1 
105F 4410           2724                             orl             a,#10h
1061 F586           2725                             mov             P6,a                        
1063 32             2726                             reti
                    2727     
1064 020000   F     2728     rknMEM:                 jmp             knMEM
1067 020000   F     2729     knKMP:             jmp          out7
106A 020000   F     2730     rout7:                  jmp             out7    
106D 020000   F     2731     rlabelH:                jmp             labelH
1070 020000   F     2732     rknNUL:         jmp             knNUL
1073 020000   F     2733     rknleft:                jmp             knleft
1076                2734     keyb2:  ;IE7
1076 75E700         2735                                     mov             EIE2,#00H
1079 C0E0           2736                                     push    acc
107B C0D0           2737                                     push    psw
107D C000           2738                                     push    rr0
107F C001           2739                                     push    rr1
1081 C002           2740                                     push    rr2
1083 C003           2741                                     push    rr3
1085 C004           2742                                     push    rr4
1087 C005           2743                                     push    rr5
1089 C006           2744                                     push    rr6
108B C007           2745                                     push    rr7
108D C082           2746                                     push    dpl
108F C083           2747                                     push    dph
                    2748                                     ;clr            bitmig
                    2749                       ;;;;;;;;;;;;;;
1091 120000   F     2750                               call  z_01s   ;0,1s
                    2751                               ;восстан знакоместо при мигании
                    2752                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1094 78B2           2753                                     mov             r0,#marker
1096 7440           2754                                     mov             a,#bufind
1098 26             2755                                     add             a,@r0                   ;a=bufind+marker
1099 F9             2756                                     mov             r1,a
109A A73C           2757                                     mov             @r1,savba
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    44

                    2758                                     ;;;;;;;;;;;
                    2759     
109C E5B0           2760                             mov             a,p3
109E 20E7C9         2761                                     jb              acc.7,rout7
10A1 E5B0           2762                                     mov             a,p3
10A3 74FF           2763                                     mov             a,#0ffh         ; p3.(5-0)<-3f
10A5 F5B0           2764                                     mov             p3,a
10A7 E5B0           2765                                     mov             a,p3
10A9 30E7BE         2766                                     jnb             acc.7,rout7             ;error
10AC 3004BE         2767                                     jnb             bitizm,rlabelH
10AF 75B0FE         2768                                     mov             p3,#0feh                ;реж IZM
10B2 E5B0           2769                                     mov             a,p3
10B4 30E7B9         2770                                     jnb             acc.7,rknNUL
10B7 75B0FD         2771                                     mov             p3,#0fdh
10BA E5B0           2772                                     mov             a,p3
10BC 30E7A8         2773                                     jnb             acc.7,knKMP
10BF 75B0FB         2774                                     mov             p3,#0fbh
10C2 E5B0           2775                                     mov             a,p3
10C4 30E7AC         2776                                     jnb             acc.7,rknleft
10C7 75B0F7         2777                                     mov             p3,#0f7h
10CA E5B0           2778                                     mov             a,p3
10CC 30E75B         2779                                     jnb             acc.7,knAVP
10CF 75B0EF         2780                                 mov         p3,#0efh
10D2 E5B0           2781                                     mov             a,p3
10D4 30E78D         2782                                     jnb             acc.7,rknMEM
10D7 75B0DF         2783                                     mov             p3,#0dfh
10DA E5B0           2784                                     mov             a,p3    
10DC 30E722         2785                                     jnb             acc.7,knmenu
10DF                2786     an_t7:             ;;;;;;;;;;;;
                    2787                     
                    2788     ;       clr             c
                    2789     ;       mov             r1,#parN
                    2790     ;
                    2791     ;                       mov             r0,#diap
                    2792     ;                       mov             a,#6            
                    2793     ;                       subb    a,@r0
                    2794     ;                       jnc             goto7           ;         ;10-2..10-8
                    2795                               
                    2796     ;                       mov             @r1,#2          ;10-9..10-11            
                    2797                             
                    2798                             ;;;;;;;;;;;;
10DF 799A           2799     goto7:                  mov             r1,#parT
10E1 783D           2800                                     mov             r0,#chkl
10E3 B70108         2801                                     cjne    @r1,#1,not1_7
10E6 7600           2802                                     mov             @r0,#00
10E8 08             2803                                     inc             r0
10E9 7602           2804                                     mov             @r0,#2
10EB 020000   F     2805                                     jmp             out7
                    2806                             
                    2807     
10EE B70208         2808     not1_7:                 cjne    @r1,#2,not2_7
10F1 760E           2809                                             mov             @r0,#0eh;00
10F3 08             2810                                     inc             r0
10F4 7638           2811                                     mov             @r0,#38h;20
10F6 020000   F     2812                                     jmp             out7
10F9 7600           2813     not2_7:                 mov             @r0,#00
10FB 08             2814                                     inc             r0
10FC 76C8           2815                                     mov             @r0,#200
10FE 020000   F     2816     merr:           jmp             out7
                    2817     
                    2818     
1101 2006FA         2819     knmenu: jb              bitvi11,merr
1104 201511         2820                                     jb              biteizm,menuoff
1107 C204           2821                              clr            bitizm          ;off IZM
1109 D211           2822                                     setb            bitmenu
110B 900000   F     2823                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    45

110E 120000   F     2824                                     call    lotext
                    2825                                     
1111 78B1           2826                                     mov             r0,#vichR
1113 7611           2827                                     mov             @r0,#11h
1115 020000   F     2828                                     jmp             onmem11
1118                2829     menuoff:
1118 78B1           2830                                     mov             r0,#vichR
111A 7600           2831                                     mov             @r0,#00
111C C215           2832                                     clr             biteizm
111E 120000   F     2833                                     call    loadus
1121 020000   F     2834                                     jmp             out7
1124 75EF10         2835                                     mov             RSTSRC,#10h
                    2836                                     ;jmp            begin;onmem11
                    2837     
1127 020000   F     2838     rendkalib:              jmp             endkalib
                    2839     
112A 2012FA         2840     knAVP:  jb              bitklb,rendkalib        
112D 200505         2841                                     jb              bitavp,meavp
1130 D205           2842                                     setb    bitavp
1132 020000   F     2843                                     jmp             onmem11
1135 C205           2844     meavp:                  clr             bitavp
1137 020000   F     2845                                     jmp             onmem11
                    2846     
113A 201207         2847     knleft: jb              bitklb,lefkl
                    2848                                     ;;;;;;;;
113D 79AE           2849                                mov          r1,#diap
113F 07             2850                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1140 B70A03         2851                                     cjne    @r1,#0ah,nodi6
1143 17             2852                                     dec             @r1
1144 8099           2853     lefkl:  jmp             an_t7
                    2854     
1146                2855     nodi6:             ;    cjne    @r1,#0,an_t7
1146 120000   F     2856                                      call    clmassix
1149 78B3           2857                                     mov             r0,#summa
114B 120000   F     2858                                     call    clear4  
114E 786A           2859                                     mov             r0,#rez_A0
1150 120000   F     2860                                     call    clear4  
1153 120000   F     2861                                     call    loadUS
1156 8087           2862                                jmp          an_t7
                    2863     
1158 200F0F         2864     knNUL:                  jb              bitnul,ybnul
115B D20F           2865                                     setb    bitnul
115D 789C           2866                                     mov             r0,#rez_A3      ;A3
115F 120000   F     2867                                     call    resar2
1162 786A           2868                                     mov             r0,#rez_A0      
1164 120000   F     2869                                     call    saver2;A0<-A3
1167 020000   F     2870                                     jmp             goto7;an_t7
                    2871     
116A C20F           2872     ybnul:                  clr             bitnul
116C 900000   F     2873                                      mov    DPTR,#ch0 
116F 120000   F     2874                                     CALL   ldc_long          ; r2..r5 <-- 0
1172 786A           2875                                     mov             r0,#rez_A0      ;A0=0
1174 120000   F     2876                                     call    saver2
1177 020000   F     2877                                     jmp             goto7;an_t7
                    2878     
117A 301021         2879     labelH:                 jnb             bitt2,nolah
117D 75B0FB         2880                                     mov             p3,#0fbh   ;вход в режим изм Т
1180 534A8F         2881                                     anl             bufind+10,#8fh
1183 79B7           2882                                     mov             r1,#load;parT
1185 20B70D         2883                                     jb              p3.7,rhnot1
1188 B70003         2884                                     cjne    @r1,#0,inct;
118B 020000   F     2885                                     jmp             out7;hyest6
118E 17             2886     inct:                   dec             @r1                     ;Tизм+1
                    2887                             
118F 120000   F     2888                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    46

1192                2889     hnot2:          ;       call    ind
1192 020000   F     2890                                     jmp             out7
                    2891     
1195 020000   F     2892      rhnot1:                jmp             hnot1
                    2893      ;rnoviR:       jmp             noviR
1198 020000   F     2894      rlabelK:       jmp             labelK
119B 020000   F     2895      rlabelI:       jmp             labelI          
                    2896      ;;;;;;;;;;;;;;;;;;;
119E 3014F7         2897     nolah:          jnb             bitvich,rlabelK 
                    2898                                     
                    2899                             ;;;;;;
                    2900                             ;увеличить счетчик задержки клавиатуры
                    2901                     ;;              mov             r0,#chkl
                    2902                     ;;              mov             @r0,#27h
                    2903                     ;;              inc             r0
                    2904                     ;;              mov             @r0,#10h
                    2905                             ;;;;;;
                    2906     
11A1 78B1           2907                             mov             r0,#vichR
11A3 B61128         2908                             cjne    @r0,#11h,rhnor11;rlabelI;;
11A6 75B0FB         2909                             mov             p3,#0fbh   ;<-
11A9 20B730         2910                             jb              p3.7,noh37;routF
11AC B6110B         2911                     cjne    @r0,#11h,hr12
11AF 7613           2912                             mov             @r0,#13h        ;11= вычислить
11B1 900000   F     2913                             mov             dptr,#teOUT;teVICH
11B4 120000   F     2914     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
11B7 020000   F     2915                             jmp             goto7;outF
11BA B61207         2916     hr12:           cjne    @r0,#12h,hnor12
11BD 7611           2917     lovich:         mov             @r0,#11h
11BF 900000   F     2918                             mov             dptr,#teVICH
11C2 80F0           2919                             jmp             hvi1113         
11C4 B61307         2920     hnor12:         cjne    @r0,#13h,rhnor11
11C7 7612           2921     loizmk:         mov             @r0,#12h
11C9 900000   F     2922                             mov             dptr,#teIZMK    ;       изм конст
                    2923                                        
11CC 80E6           2924                             jmp             hvi1113
                    2925     
11CE 804C           2926     rhnor11:                jmp             hnor11
                    2927     
11D0 8057           2928     rvvizko:                jmp             vvizko
11D2 C214           2929     vioutF:                 clr             bitvich
11D4 C206           2930                                                     clr             bitvi11
11D6 020000   F     2931                                                     jmp             outF
11D9 020000   F     2932     toutF:                  jmp     outF
                    2933     
11DC 75B0F7         2934     noh37:          mov             p3,#0f7h
11DF 20B7F7         2935                             jb              p3.7,toutF;vioutF
11E2 B611EB         2936                             cjne    @r0,#11h,rvvizko
11E5 D206           2937                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
11E7 D204           2938              setb   bitizm
11E9 534B07         2939                              anl            bufind+11,#07h
11EC 434B10         2940                              orl            bufind+11,#10h;точка после 1 знакоместа
11EF 020000   F     2941     routF:          jmp             out7;goto7;outF
                    2942     
                    2943     
                    2944     
11F2 80E8           2945     rnoh37:         jmp             noh37
                    2946     
11F4 B6120D         2947     norr11:         cjne    @r0,#12h,norr12
11F7 75B0FB         2948                             mov             p3,#0fbh   ;<-
11FA 20B7F5         2949                             jb              p3.7,rnoh37;routF
11FD 760B           2950                             mov             @r0,#11;12->11
11FF 80BC           2951                             jmp             lovich
                    2952     
1201 020000   F     2953     labelI2:                jmp             labelI
1204 B613FA         2954     norr12:         cjne    @r0,#13h,labelI2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    47

1207 75B0FB         2955                             mov             p3,#0fbh   ;<-
120A 20B7E5         2956                             jb              p3.7,rnoh37
120D 7612           2957                             mov             @r0,#12h
120F 80B6           2958                             jmp             loizmk
                    2959                             ;;;;
1211 C214           2960     clrvich:                clr             bitvich
1213 D204           2961                             setb    bitizm
1215 A8B2           2962                             mov             r0,marker
1217 76FF           2963                             mov             @r0,#0ffh
1219 020000   F     2964                              jmp    goto7;  routF
                    2965     
                    2966     ;rnoh37:                jmp             noh37
                    2967      ;ввод изм конст
121C B612E5         2968     hnor11:         cjne    @r0,#12h,norr12;clrvich
121F 75B0FB         2969                              mov            p3,#0fbh   
1222 20B7CD         2970                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
1225 7611           2971                             mov             @r0,#11h
1227 8094           2972                             jmp             lovich
                    2973     
1229 78B1           2974     vvizko:         mov             r0,#vichR
122B E6             2975                             mov             a,@r0
                    2976                     ;       cjne    @r0,#12h,clrvich
122C B412E2         2977                             cjne    a,#12h,clrvich
122F 7621           2978                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
1231 78B2           2979                             mov             r0,#marker
1233 7604           2980                             mov             @r0,#4;9
1235 753A04         2981                             mov             movleft,#4
1238 753B07         2982                             mov             movrig,#7
123B 900000   F     2983                             mov             dptr,#teAequ0
123E 120000   F     2984                             call    lotext
                    2985                             
1241 120000   F     2986                             call    outA
1244 534B0F         2987                             anl                     bufind+11,#0fh
                    2988             ;       mov             a,bufind+11
                    2989             ;       anl             a,#0f0h
                    2990             ;       mov             bufind+11,a
1247 434B40         2991                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    2992                             
124A 020000   F     2993                             jmp             goto7;routF
                    2994     ;hnor13:                jmp             hnor12          
124D B6210C         2995     izchi:          cjne    @r0,#21h,tlabelI
                    2996     ;<- при вводе цифр А                            
                    2997                     ;        mov            p3,#0fbh   
                    2998                     ;       jnb             p3.7,li21
                    2999             ;clr            bitmig
1250 78B2           3000                             mov             r0,#marker
1252 16             3001                             dec             @r0
1253 B60201         3002                             cjne    @r0,#2,li21
1256 06             3003                             inc             @r0;marker=3 +/-
1257 C219           3004     li21:           clr             bitmig
1259 020000   F     3005                             jmp             goto7;outF
                    3006     
125C 020000   F     3007     tlabelI:        jmp             labelI
                    3008     
                    3009     ;                       load    0 1 2 3 4 5             
125F 06050403       3010     sootv:          db              6,5,4,3,2,1;parT
1263 0201                    
                    3011     ;
                    3012     
                    3013     ;нажата кн ввод при наборе Т
1265 75B0F7         3014     hnot1:                  mov             p3,#0f7h
1268 20B784         3015                                     jb              p3.7,routF;out7
126B B70549         3016                                     cjne    @r1,#5,nohnot1  ;r1=load
126E 794A           3017                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    48

1270 E7             3018                                     mov             a,@r1
1271 548F           3019                                     anl             a,#8fh
1273 4440           3020                                     orl             a,#40h;.6
1275 F7             3021                                     mov             @r1,a
1276 8000           3022                                     jmp             loadb
                    3023                                     
                    3024                                     
1278 789A           3025     loadB:                  mov             r0,#parT
127A 900000   F     3026                                     mov             dptr,#sootv
127D 79B7           3027                                     mov             r1,#load                
127F E7             3028                                     mov             a,@r1;load
1280 93             3029                                     movc    a,@a+dptr
1281 F6             3030                                     mov             @r0,a
1282 120000   F     3031                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3032                                      ;r4=b1 r5=b2
1285 120000   F     3033                                     call    iniacp;инициализация АЦП
1288 120000   F     3034                                     call    loadUS
128B 120000   F     3035                                     call    clmassix        
128E D204           3036                                     setb    bitizm
1290 C210           3037                                     clr             bitt2
                    3038     
1292 534A8F         3039                                     anl             bufind+10,#8fh
1295 C3             3040                                      clr            c
1296 789A           3041                                  mov                r0,#parT
1298 79AF           3042                                      mov            r1,#parN
129A 7402           3043                                  mov                a,#2
129C 96             3044                                 subb                a,@r0
129D 5005           3045                                 jnc                 loadB2
129F 7701           3046                                     mov             @r1,#1;N=1         ;T>=2
12A1 020000   F     3047     bout7:                  jmp             goto7;out7
                    3048     
12A4 B702FA         3049     loadB2:                 cjne    @r1,#2,bout7
12A7 7702           3050                                     mov             @r1,#2;N=2
12A9 020000   F     3051                                     jmp             goto7;out7
12AC                3052     nohnot2:                ;в буфере 1 зажечь <=0,1s
12AC 794A           3053                                     mov             r1,#bufind+10
12AE E7             3054                                     mov             a,@r1
12AF 4410           3055                                     orl             a,#10h;.4
12B1 F7             3056                                     mov             @r1,a
12B2 120000   F     3057                                     call            ind
12B5 80C1           3058                                     jmp             loadB
12B7 B704F2         3059     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
12BA 794A           3060                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
12BC E7             3061                                     mov             a,@r1
12BD 4420           3062                                     orl             a,#20h;.5
12BF F7             3063                                     mov             @r1,a
12C0 80B6           3064                                     jmp             loadB
                    3065     
                    3066     ;кнопка ПАМЯТЬ
12C2 C204           3067     knMEM:                  clr             bitizm          ;off IZM
12C4 900000   F     3068                                     mov             dptr,#teCLE
12C7 120000   F     3069                                     call    lotext    ;в буф2 записать ОЧИСТКА
12CA D20B           3070                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
12CC 534BEF         3071                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
12CF 434B01         3072                                     orl             bufind+11,#01;зажечь светодиод память
12D2 120000   F     3073                                     call            ind
12D5 78B0           3074                                     mov             r0,#level
12D7 7611           3075                                     mov             @r0,#11h
12D9 783D           3076     onmem11:                mov             r0,#chkl
12DB 7603           3077                                     mov             @r0,#03
12DD 08             3078                                     inc             r0
12DE 76E8           3079                                     mov             @r0,#0e8h               ;1000
12E0 020000   F     3080                                     jmp             out7;goto7;out7
                    3081     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    49

12E3 020000   F     3082     rnomemk:                jmp             nomemk          ;
                    3083     
12E6 78B0           3084     outkmem:        mov                     r0,#level
12E8 7600           3085                                             mov                     @r0,#0
12EA 78B1           3086                                             mov                     r0,#vichR
12EC 7600           3087                                             mov                     @r0,#0
12EE C20B           3088                                             clr                     bitmem
12F0 C214           3089                                             clr                     bitvich
12F2 C206           3090                                             clr                     bitvi11
12F4 C211           3091                                             clr                     bitmenu
12F6 D204           3092                                             setb            bitizm
12F8 78B2           3093                                             mov                     r0,#marker
12FA 76FF           3094                                             mov                     @r0,#0ffh
12FC 020000   F     3095                                             jmp                     vvod2_10
12FF 020000   F     3096                                             jmp                     goto7   
1302                3097     labelK:
                    3098     
                    3099     ;;;;;;;;;;;;
1302 300BDE         3100                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
1305 75B0EF         3101                                     mov                     p3,#0efh
1308 30B7DB         3102                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
130B 78B0           3103                                      mov            r0,#level
130D B6114E         3104                               cjne          @r0,#11h,klev1;nome11
1310 75B0FB         3105     lefmem11:         mov           p3,#0fbh
1313 E5B0           3106                               mov           a,p3
1315 20E70E         3107                               jb            acc.7,rkvvod0
1318 B6110E         3108                               cjne          @r0,#11h,locle          ;<-memory
131B 7614           3109                               mov           @r0,#14h
131D 900000   F     3110     lolist:           mov           dptr,#teSTAT
1320 120000   F     3111                               call          lotext           ;СТАТИСТИКА
1323 020000   F     3112                               jmp   goto7;  outF
                    3113     
1326 020000   F     3114     rkvvod0:        jmp             kvvod0
                    3115     
                    3116     
1329 B6120B         3117     locle:          cjne            @r0,#12h,lowr           ;<-memory
132C 7611           3118                               mov           @r0,#11h                   ;ОЧИСТКА
132E 900000   F     3119     loadcle:          mov           dptr,#teCLE
1331 120000   F     3120                               call          lotext
1334 020000   F     3121                               jmp           goto7;outF
                    3122     
1337 B6130B         3123     lowr:                   cjne    @r0,#13h,lostat
133A 7612           3124                                             mov             @r0,#12h
133C 900000   F     3125      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
133F 120000   F     3126                             call    lotext
1342 020000   F     3127                             jmp             goto7;outF
                    3128     
1345 7613           3129     lostat:         mov             @r0,#13h
1347 900000   F     3130                                     mov             dptr,#teLIST              ;ПРОСМОТР
134A 120000   F     3131                             call    lotext
134D 020000   F     3132                             jmp             goto7;outF
                    3133     
1350 B6141A         3134     me_14:cjne              @r0,#14h,klev22
1353 7613           3135                                             mov             @r0,#13h
1355 900000   F     3136                             mov             dptr,#teLIST              ;;ПРОСМОТР
1358 120000   F     3137                             call    lotext
135B 020000   F     3138                             jmp             goto7
135E B61202         3139      klev1:          cjne   @r0,#12h,klev2
1361 80AD           3140                             jmp             lefmem11
1363 B61302         3141     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
1366 80A8           3142                             jmp             lefmem11
1368 B61402         3143     klev3:           cjne   @r0,#14h,klev22;
136B 80A3           3144                             jmp             lefmem11
                    3145     ;<- vvod на более низких уровнях
136D B62117         3146     klev22:         cjne    @r0,#21h,klev21
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    50

1370 75B0FB         3147     lev220:         mov             p3,#0fbh
1373 20B766         3148                             jb              p3.7,kgo23
1376 B6210B         3149                             cjne    @r0,#21h,kfullr
1379 7622           3150                             mov             @r0,#22h
137B 900000   F     3151                             mov             dptr,#teBL
137E 120000   F     3152                             call    lotext
1381 020000   F     3153                             jmp             goto7;outF
1384 020000   F     3154     kfullr:         jmp             kfull                           
1387 B6220E         3155     klev21:         cjne    @r0,#22h,klev23
138A 80E4           3156                             jmp             lev220
                    3157     
138C 020000   F     3158     rlabL2:         jmp             labL2
138F 020000   F     3159     rlabM:          jmp             labM
1392 020000   F     3160     ques:                   jmp             out7
1395 020000   F     3161     ddoutfr:        jmp             ddoutf
                    3162     
1398 B623F4         3163     klev23:          cjne   @r0,#23h,rlabM
139B 75B0FB         3164                              mov    p3,#0fbh
139E 30B7F1         3165                              jnb            p3.7,ques;errr labL2
13A1 75B0F7         3166                              mov    p3,#0f7h
13A4 20B7EE         3167                              jb             p3.7,ddoutfr
                    3168                                             ;       считать с индикатора  
13A7 C3             3169                                     clr                     c
13A8 E547           3170                                mov          a,bufind+7      
13AA 9430           3171                                      subb           a,#30h
13AC B40002         3172                                      cjne           a,#0,chaibl
13AF 7401           3173                                      mov            a,#1                    ;номера блоков 1..4
13B1                3174     chaibl:         
13B1 F538           3175                                             mov             nblok,a
                    3176                                
                    3177                              ;очистить блок памяти с набранным номером
                    3178                              ;150h..1000h( 150h+nblok*320h)
13B3 120000   F     3179                                     call            adrblok         ;dptr-
                    3180     
13B6 79B8           3181                                     mov                     r1,#work                ;обьем блок
                             а
13B8 7703           3182                                     mov                     @r1,#03
13BA 09             3183                                     inc                     r1
13BB 7720           3184                                     mov                     @r1,#20h                        ;32
                             0h
                    3185     
13BD                3186     goonoff:
13BD E4             3187                                     clr                     a
13BE F0             3188                                     movx            @dptr,a
13BF A3             3189                                     inc                     dptr
                    3190     
13C0 79B9           3191                                     mov                     r1,#work+1
13C2 120000   F     3192                                     call            chminus
13C5 78B8           3193                                     mov             r0,#work
13C7 E6             3194                             mov             a,@r0
13C8 30E7F2         3195                             jnb             acc.7,goonoff
                    3196     
13CB C20B           3197                              clr    bitmem  ;сбр признак памяти 
13CD D204           3198                              setb   bitizm
13CF 78B2           3199                              mov            r0,#marker
13D1 76FF           3200                              mov            @r0,#0ffh
13D3 020000   F     3201                                     jmp                     vvod2_10
13D6 020000   F     3202                              jmp    goto7
                    3203     
13D9 020000   F     3204     rddoutf:        jmp             ddoutf
                    3205     
                    3206     ;vvod   БЛОК->БЛОК 00           
13DC 75B0F7         3207     kgo23:           mov    p3,#0f7h
13DF 20B7F7         3208                             jb              p3.7,rddoutf
13E2 B6216B         3209                             cjne    @r0,#21h,go23no
                    3210                             ;очистить память 150..dd0h
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    51

                    3211                             ;1й блок
13E5 900150         3212                              mov                    dptr,#150h
13E8 79B8           3213                                     mov                     r1,#work                ;обьем блок
                             а
13EA 7703           3214                                     mov                     @r1,#03
13EC 09             3215                                     inc                     r1
13ED 7720           3216                                     mov                     @r1,#20h                        ;32
                             0h
                    3217     
13EF                3218     gooff1:
13EF E4             3219                                     clr                     a
13F0 F0             3220                                     movx            @dptr,a
13F1 A3             3221                                     inc                     dptr
                    3222     
13F2 79B9           3223                                     mov                     r1,#work+1
13F4 120000   F     3224                                     call            chminus
13F7 78B8           3225                                     mov             r0,#work
13F9 E6             3226                             mov             a,@r0
13FA 30E7F2         3227                             jnb             acc.7,gooff1
                    3228     ;2й блок
13FD 900470         3229     mov                     dptr,#470h
1400 79B8           3230                                     mov                     r1,#work                ;обьем блок
                             а
1402 7703           3231                                     mov                     @r1,#03
1404 09             3232                                     inc                     r1
1405 7720           3233                                     mov                     @r1,#20h                        ;32
                             0h
                    3234     
1407                3235     gooff2:
1407 E4             3236                                     clr                     a
1408 F0             3237                                     movx            @dptr,a
1409 A3             3238                                     inc                     dptr
                    3239     
140A 79B9           3240                                     mov                     r1,#work+1
140C 120000   F     3241                                     call            chminus
140F 78B8           3242                                     mov             r0,#work
1411 E6             3243                             mov             a,@r0
1412 30E7F2         3244                             jnb             acc.7,gooff2
                    3245     
                    3246     ;3й блок
1415 900490         3247                             mov                     dptr,#490h
1418 79B8           3248                                     mov                     r1,#work                ;обьем блок
                             а
141A 7703           3249                                     mov                     @r1,#03
141C 09             3250                                     inc                     r1
141D 7720           3251                                     mov                     @r1,#20h                        ;32
                             0h
                    3252     
141F                3253     gooff3:
141F E4             3254                                     clr                     a
1420 F0             3255                                     movx            @dptr,a
1421 A3             3256                                     inc                     dptr
                    3257     
1422 79B9           3258                                     mov                     r1,#work+1
1424 120000   F     3259                                     call            chminus
1427 78B8           3260                                     mov             r0,#work
1429 E6             3261                             mov             a,@r0
142A 30E7F2         3262                             jnb             acc.7,gooff3
                    3263     ;4й блок
142D 900AB0         3264     mov                     dptr,#0ab0h
1430 79B8           3265                                     mov                     r1,#work                ;обьем блок
                             а
1432 7703           3266                                     mov                     @r1,#03h
1434 09             3267                                     inc                     r1
1435 7720           3268                                     mov                     @r1,#20h                        ;32
                             0h
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    52

                    3269     
1437                3270     gooff4:
1437 E4             3271                                     clr                     a
1438 F0             3272                                     movx            @dptr,a
1439 A3             3273                                     inc                     dptr
                    3274     
143A 79B9           3275                                     mov                     r1,#work+1
143C 120000   F     3276                                     call            chminus
143F 78B8           3277                                     mov             r0,#work
1441 E6             3278                             mov             a,@r0
1442 30E7F2         3279                             jnb             acc.7,gooff4
1445 C20B           3280                             clr             bitmem
1447 D204           3281                             setb    bitizm
1449 78B2           3282                                     mov             r0,#marker
144B 76FF           3283                              mov            @r0,#0ffh
144D 020000   F     3284                             jmp                     vvod2_10;jmp            goto7
                    3285     
1450 7623           3286     go23no:    mov          @r0,#23h
1452 753B08         3287                                             mov                     movrig,#8
1455 753A07         3288                                             mov             movleft,#7
1458 8055           3289                             jmp             loblok;БЛОК 00
                    3290     
145A 7621           3291     kfull:          mov             @r0,#21h
145C 8025           3292                             jmp             gofull
                    3293                             
                    3294                                             
145E 020000   F     3295     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3296                             
1461 75B0FB         3297     nome11:           mov           p3,#0fbh
1464 E5B0           3298                               mov           a,p3
1466 20E70D         3299                               jb            acc.7,kvvod0
1469 B61205         3300                               cjne          @r0,#12h,mem12no        
146C 7611           3301                               mov           @r0,#11h                ;ОЧИСТКА
146E 020000   F     3302                               jmp            loadcle
                    3303     
1471                3304     mem12no:        ;cjne           @r0,#13h,lowr           
1471 7612           3305                               mov           @r0,#12h                   ;
1473 020000   F     3306                               jmp           lowr1                     ;ЗАПИСЬ
                    3307     
1476 75B0F7         3308     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1479 20B70F         3309                               jb            p3.7,ddoutf
147C 78B0           3310                               mov           r0,#level
147E B61129         3311                               cjne          @r0,#11h,mvv11
1481 7621           3312                               mov           @r0,#21h                ;ПОЛНАЯ
1483 900000   F     3313     gofull:           mov           dptr,#teFULL
1486 120000   F     3314                               call          lotext
1489 804F           3315                                     jmp             mlabL2  ;<-????????/
                    3316     
148B                3317     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3318     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3319     ;т е сохранить ее в ячейке для мигания в противном случае
                    3320     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3321     ;       знакоместа
148B 78B2           3322                                                     mov             r0,#marker
148D 7440           3323                                     mov             a,#bufind
148F 26             3324                                             add             a,@r0                   ;a=bufind+m
                             arker
1490 F9             3325                                             mov             r1,a
1491 19             3326                                             dec             r1      ;       inc             r1
1492 873C           3327                                             mov             savba,@r1
1494 C219           3328                                             clr             bitmig
                    3329     ;;;;;;;;;;;;;;;;
1496 78B2           3330                       mov           r0,#marker      ;курсор слева   ?
1498 E53A           3331                             mov             a,movleft
149A C3             3332                             clr             c
149B 96             3333                             subb    a,@r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    53

149C 7006           3334                             jnz        left21
149E E53B           3335                             mov             a,movrig;уст в правую позицию
14A0 F6             3336                             mov             @r0,a
                    3337     
14A1 020000   F     3338                             jmp             goto7                                            
14A4 E53A           3339     left21:         mov             a,movleft;уст в левую позицию
14A6 F6             3340                             mov             @r0,a   
14A7 020000   F     3341                             jmp             goto7
                    3342     
                    3343     
14AA B61215         3344     mvv11:            cjne          @r0,#12h,mvv12
14AD 7631           3345                                     mov             @r0,#31h
14AF 900000   F     3346     loblok:                 mov             dptr,#teBL0;БЛОК 0
14B2 120000   F     3347                                     call    lotext
14B5 E538           3348                                     mov                     a,nblok
14B7 2430           3349                                     add                     a,#30h
14B9 F547           3350                                     mov                     bufind+7,a
14BB 78B2           3351                                     mov             r0,#marker
14BD 7607           3352                                     mov             @r0,#7
                    3353                                     ;mov            movrig,#9
                    3354                                     ;mov            movleft,#6
14BF 020000   F     3355                                     jmp             goto7;outF
14C2 B61411         3356     mvv12:  cjne            @r0,#14h,bl_li
14C5 7661           3357                                     mov                     @r0,#61h
14C7 900000   F     3358                                     mov             dptr,#teMIN;
14CA 120000   F     3359                                     call    lotext
14CD 120000   F     3360                                     call    vichmin
14D0 120000   F     3361                                     call    z_1s
14D3 020000   F     3362                                     jmp             out7;goto7;outF
                    3363     
14D6 7641           3364     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
14D8 80D5           3365                                     jmp             loblok
                    3366     
                    3367     
                    3368     
14DA                3369     mlabL2:         ;jmp            labL2
                    3370                                             ;  уст курсор в правую позицию 
                    3371                                     ;                               29.12.06
                    3372     ;;;;;;;;;;;;;;;;;;
                    3373     ;необходимо не портить цифру в следуюем справа знакоместе
                    3374     ;т е сохранить ее в ячейке для мигания в противном случае
                    3375     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3376     ;       знакоместа
14DA 78B2           3377                                             mov             r0,#marker
14DC 7440           3378                                     mov             a,#bufind
14DE 26             3379                                             add             a,@r0                   ;a=bufind+m
                             arker
14DF F9             3380                                             mov             r1,a
14E0 09             3381                                             inc             r1
14E1 873C           3382                                             mov             savba,@r1
                    3383     ;;;;;;;;;;;;;;;;
14E3 78B2           3384                       mov           r0,#marker      ;курсор справа  ?
14E5 E53B           3385                             mov             a,movrig
14E7 C3             3386                             clr             c
14E8 96             3387                             subb    a,@r0
14E9 6006           3388                             jz         equ2l
14EB E53B           3389                             mov             a,movrig;уст в правую позицию
14ED F6             3390                             mov             @r0,a
                    3391     ;                       lool
14EE 020000   F     3392                             jmp             goto7                                            
14F1 E53A           3393     equ2l:          mov             a,movleft;уст в левую позицию
14F3 F6             3394                             mov             @r0,a   
14F4 020000   F     3395                             jmp             goto7
                    3396                     
14F7 020000   F     3397     rnom31:         jmp                     nom31
14FA B631FA         3398     labM:                   cjne    @r0,#31h,rnom31
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    54

14FD 75B0FB         3399                                     mov             p3,#0fbh
1500 30B7D7         3400                                     jnb             p3.7,mlabL2
1503 75B0F7         3401                                mov          p3,#0f7h
1506 20B782         3402                                jb           p3.7,ddoutf
                    3403                                
1509 7632           3404                                mov          @r0,#32h                        ;ИНТ 0000
                    3405                                     ;       считать с индикатора  
150B C3             3406     blokvv:         clr                     c
150C E547           3407                                mov          a,bufind+7      
150E 9430           3408                                      subb           a,#30h
1510 B40002         3409                                      cjne           a,#0,blokvvc
1513 7401           3410                                      mov            a,#1                    ;номера блоков 1..4
                    3411     
1515 F538           3412     blokvvc: mov            nblok,a
1517 900000   F     3413                                mov          dptr,#teINT;ИНТ 0000c
151A 120000   F     3414                                call         lotext
151D 78CE           3415                                      mov            r0,#interva+1
151F 7952           3416                                      mov            r1,#abin+3
1521 E6             3417                                      mov            a,@r0
1522 F7             3418                                      mov            @r1,a
1523 18             3419                                             dec                     r0
1524 19             3420                                             dec                     r1
1525 E6             3421                                             mov             a,@r0
1526 F7             3422                                             mov             @r1,a
1527 19             3423                                             dec             r1
1528 E4             3424                                             clr             a
1529 F7             3425                                             mov             @r1,a
152A 19             3426                                             dec             r1
152B F7             3427                                             mov             @r1,a
                    3428                                                                             
152C 7853           3429                                             mov             r0,#adec
152E 7952           3430                                             mov             r1,#abin+3      ;hex->10
1530 120000   F     3431                                             call    bindec
                    3432                                     
1533 785C           3433                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1535 7948           3434                                             mov             r1,#bufind+8
1537 7F04           3435                                             mov             r7,#4
1539 E6             3436     bloin:                          mov             a,@r0
153A 2430           3437                                             add             a,#30h
153C F7             3438                                             mov             @r1,a
153D 19             3439                                             dec             r1
153E 18             3440                                             dec             r0
153F DFF8           3441                                             djnz    r7,bloin
1541 78B2           3442                                mov          r0,#marker
1543 7605           3443                                mov          @r0,#5
1545 753B08         3444                                mov          movrig,#8
1548 753A05         3445                                mov          movleft,#5
154B 789A           3446                                      mov            r0,#parT
154D B60609         3447                                     cjne            @r0,#6,innot6
1550 534BF0         3448                                     anl                     bufind+11,#0f0h;after 5- 0.000c
1553 434B80         3449                                     orl                     bufind+11,#80h
                    3450                             
1556 020000   F     3451                                     jmp                     goto7
1559 B60309         3452     innot6: cjne            @r0,#3,innot3
155C 534BF0         3453                                     anl                     bufind+11,#0f0h;after 7- 000.0c
155F 434B20         3454                                     orl                     bufind+11,#20h
                    3455                                     ;call           ind
1562 020000   F     3456                                     jmp                     out7;goto7
1565 C3             3457     innot3: clr                     c
1566 7403           3458                                     mov                     a,#3
1568 96             3459                                     subb            a,@r0
1569 5009           3460                                     jnc                     innot1_2
156B 534BF0         3461                                     anl                     bufind+11,#0f0h;after 6- 00.00c
156E 434B40         3462                                     orl                     bufind+11,#40h
                    3463                                     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    55

1571 020000   F     3464                                     jmp                     goto7
                    3465     
1574                3466     innot1_2:
1574 534B0F         3467                                     anl                     bufind+11,#0fh;0h;0000c
                    3468                                     
1577 120000   F     3469                                     call            ind                             
157A 020000   F     3470     rgoto7: jmp        goto7;outF
                    3471     
157D B63276         3472     nom31:             cjne         @r0,#32h,nom32
1580 75B0FB         3473                                     mov             p3,#0fbh
1583 20B71F         3474                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3475                                     
1586                3476     lefcur:         ;;кн <- 32 нач блок 000
                    3477     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3478     ;т е сохранить ее в ячейке для мигания в противном случае
                    3479     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3480     ;       знакоместа
1586 C219           3481                                                     clr             bitmig
1588 78B2           3482                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
158A 7440           3483                                     mov             a,#bufind
158C 26             3484                                             add             a,@r0                   ;a=bufind+m
                             arker
158D F9             3485                                             mov             r1,a
158E 19             3486                                             dec             r1;;;;;;;;;;;
158F 873C           3487                                             mov             savba,@r1
                    3488                                             
1591 78B2           3489                                                     mov             r0,#marker      ;курсор сле
                             ва?
1593 E53A           3490                             mov             a,movleft
1595 C3             3491                             clr             c
1596 96             3492                             subb    a,@r0
1597 7006           3493                             jnz        noequ2
1599 E53B           3494                             mov             a,movrig
159B F6             3495                             mov             @r0,a;уст в крайнюю правую позицию
159C 020000   F     3496                             jmp             goto7
159F 120000   F     3497     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
15A2 020000   F     3498                             jmp        goto7        
                    3499                                                                       
                    3500     
                    3501     ;;;;;;;;;;;;;;;;;;
15A5                3502     vvinte:         ;ввод интервал                          
15A5 75B0F7         3503     no31n:             mov          p3,#0f7h
15A8 20B7CF         3504                                     jb              p3.7,rgoto7
15AB 7633           3505                                     mov             @r0,#33h
                    3506                                     ;считать с индикатора введенный интервал
15AD 7F0A           3507                                             mov             r7,#10
15AF 7853           3508                                     mov             r0,#adec
15B1 120000   F     3509                                     call    clearN
15B4 120000   F     3510                                     call    upak4                   
15B7 784F           3511                                     mov             r0,#abin
15B9 7953           3512                                     mov             r1,#adec                        ;мл        
                              ст
15BB 120000   F     3513                                     call    decbin                  ;abin..abin+3 (hex)
15BE 794F           3514                                     mov             r1,#abin
15C0 78CE           3515                                     mov             r0,#interva+1
15C2 E7             3516                                     mov             a,@r1
15C3 F6             3517                                     mov             @r0,a
15C4 18             3518                                     dec             r0
15C5 09             3519                                     inc             r1
15C6 E7             3520                                     mov             a,@r1
15C7 F6             3521                                     mov             @r0,a
                    3522                                     
15C8 78D5           3523                                     mov             r0,#volume                      ;объем блок
                             а
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    56

15CA 7600           3524                                     mov             @r0,#0
15CC 08             3525                                     inc             r0
15CD 76C7           3526                                     mov             @r0,#0c7h
15CF 120000   F     3527                                     call            adrblok;dptr
15D2 120000   F     3528                                     call            save_hl;1я ячейка блока
15D5 78B2           3529                                mov          r0,#marker
15D7 76FF           3530                                mov          @r0,#0ffh
15D9 D204           3531                                      setb           bitizm
15DB C20B           3532                                      clr            bitmem
15DD 789A           3533     vvod2_10: mov           r0,#parT
15DF B6050C         3534                                      cjne           @r0,#5,no10msv
15E2 900000   F     3535                                             mov                     dptr,#te10ms
15E5 120000   F     3536     t2msme:         call            lotext
15E8 120000   F     3537                                             call            ind
15EB 020000   F     3538     no2msv:   jmp      goto7;
15EE B606FA         3539     no10msv:        cjne            @r0,#6,no2msv   
15F1 900000   F     3540                                             mov                     dptr,#te2ms
15F4 80EF           3541                                     jmp                     t2msme
                    3542     
                    3543     
                    3544     
15F6 B6332B         3545     nom32:           cjne           @r0,#33h,nom33
15F9 75B0FB         3546                              mov            p3,#0fbh
15FC 30B787         3547                              jnb            p3.7,lefcur
15FF 75B0F7         3548                              mov            p3,#0f7h
1602 20B7E6         3549                              jb             p3.7,no2msv;rgoto7
                    3550                              ;запомнить номер ячейки конца блока
1605 7634           3551                              mov    @r0,#34h
1607 7F0A           3552     INTn:                   mov             r7,#10
1609 7853           3553                                     mov             r0,#adec
160B 120000   F     3554                                     call    clearN
160E 120000   F     3555                                     call    upak3                   
1611 784F           3556                                     mov             r0,#abin
1613 7953           3557                                     mov             r1,#adec                        ;мл        
                              ст
1615 120000   F     3558                                     call    decbin                  ;abin..abin+3 (hex)
1618 120000   F     3559                                     call    loadr2                  ;r2..r5
161B 120402         3560                                     call    altof                   ;r2..r5->int
161E 020000   F     3561     dgoto7:                  jmp            goto7
                    3562     
1621 020000   F     3563     rlefcur:                jmp             lefcur
                    3564     
1624 B6345B         3565     nom33:          cjne            @r0,#34h,labelP
1627 75B0FB         3566                               mov           p3,#0fbh
162A 30B7F4         3567                              jnb            p3.7,rlefcur
162D 75B0F7         3568                              mov            p3,#0f7h
1630 20B7EB         3569                              jb             p3.7,dgoto7
1633 7635           3570                              mov            @r0,#35h
1635 78B2           3571                              mov            r0,#marker
1637 76FF           3572                              mov            @r0,#0ffh
                    3573                              ;T1<-число на индикаторе
                    3574                                               ;vvod КОН БЛ 000
1639 78CF           3575                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
163B 7630           3576                              mov            @r0,#30h  
163D C20B           3577                              clr            bitmem
163F D204           3578                              setb           bitizm;;;;      
1641 020000   F     3579                             jmp        goto7
1644 020000   F     3580     vodm11_15:                      jmp             vvodm11_15
1647 020000   F     3581     me11_15de:                      jmp             me11_15dec
164A 020000   F     3582     moutkmem:                               jmp             outkmem
                    3583     
                    3584     ;обработка кнопки меню ввод
164D 301132         3585     labelS:         jnb                     bitmenu,labelP
1650 75B0DF         3586                                             mov                     p3,#0dfh
1653 30B7F4         3587                                             jnb                     p3.7,moutkmem
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    57

1656 78B1           3588                                             mov                     r0,#vichR
1658 7415           3589                                             mov                     a,#15h
165A C3             3590                                             clr                     c
165B 96             3591                                             subb            a,@r0
165C 4021           3592                                             jc                      rme21_23
                    3593                             
165E 75B0FB         3594                                             mov                     p3,#0fbh
1661 20B7E0         3595                                             jb                      p3.7,vodm11_15
1664 78B1           3596                                             mov                     r0,#vichR
1666 B611DE         3597                                             cjne                    @r0,#11h,me11_15de;<-
1669 7615           3598                                             mov                     @r0,#15h
166B 900000   F     3599                                             mov                     dptr,#teKALIB
166E 120000   F     3600                                             call            lotext
1671 020000   F     3601                                             jmp                     onmem11
1674 C211           3602     menuon:         clr             bitmenu                 ;off menu
1676 D204           3603                                             setb    bitizm
                    3604     
1678 78B1           3605                                     mov             r0,#vichR
167A 7600           3606                                     mov             @r0,#0
167C 020000   F     3607                                     jmp             onmem11
                    3608     
                    3609                                             ;;;;;
                    3610             
167F 020000   F     3611     rme21_23:               jmp             me21_23 
                    3612                             
                    3613     ;режим просмотра
1682 B64130         3614     labelP:                 cjne            @r0,#41h,govvlist
1685 7642           3615                                                     mov                     @r0,#42h
                    3616                                                     ;       считать с индикатора  
1687 C3             3617                                             clr                     c
1688 E547           3618                                mov          a,bufind+7      
168A 9430           3619                                      subb           a,#30h
168C B40002         3620                                      cjne           a,#0,chaipr
168F 7401           3621                                      mov            a,#1
1691 F538           3622     chaipr:                          mov            nblok,a
1693 900000   F     3623                                mov          dptr,#teCH;ОТСЧЕТ 000
1696 120000   F     3624                                call         lotext
1699 534BEF         3625                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
169C 78B2           3626                                mov          r0,#marker
169E 7607           3627                                mov          @r0,#7
16A0 753B09         3628                                mov          movrig,#9
16A3 753A07         3629                                mov          movleft,#7
16A6 120000   F     3630                                             call            z_1s
16A9 020000   F     3631                        jmp     goto7;outF
16AC 020000   F     3632     label43:                jmp             label7
                    3633     
16AF 020000   F     3634     rlist_43:                       jmp                     list_43                            
                                  
16B2 020000   F     3635     mlabL2r:                        jmp                     mlabL2
16B5 B642F7         3636     govvlist:                       cjne            @r0,#42h,rlist_43
16B8 75B0FB         3637                                                                     mov                     p3,
                             #0fbh
16BB 30B7F4         3638                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
16BE 75B0F7         3639                                                             mov                     p3,#0f7h
16C1 20B7E8         3640                                                             jb                      p3.7,label4
                             3
16C4 7643           3641                                                             mov                     @r0,#43h;vv
                             od 
16C6 78B2           3642                                                             mov                     r0,#marker
16C8 76FF           3643                                                             mov                     @r0,#0ffh
16CA 7F0A           3644                                                                     mov             r7,#10
16CC 7853           3645                                     mov             r0,#adec
16CE 120000   F     3646                                     call    clearN
16D1 120000   F     3647                                     call    upak3                   
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    58

16D4 784F           3648                                     mov             r0,#abin
16D6 7953           3649                                     mov             r1,#adec                        ;мл        
                              ст
16D8 120000   F     3650                                     call    decbin                  ;abin..abin+3 (hex)
16DB 120000   F     3651                                     call    loadr2                  ;r2..r5
16DE ED             3652                                     mov             a,r5                            ;сохр номер
                              лемента
16DF F537           3653                                     mov             nelem,a
16E1 120402         3654                                     call    altof                   ;r2..r5->int
16E4 900000   F     3655                                     mov             dptr,#ch_1;
16E7 120000   F     3656                                     call    ldc_ltemp                       ;r8..r11
16EA 1201D1         3657                                     call    flsub
16ED 900000   F     3658                                     mov             dptr,#ch_4;
16F0 120000   F     3659                                     call    ldc_ltemp                       ;r8..r11
16F3 120203         3660                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
16F6 120343         3661                                     call            ftol                    ;r2..r5->hex
16F9 C002           3662                                     push            rr2
16FB C003           3663                                     push            rr3
16FD C004           3664                                     push            rr4
16FF C005           3665                                     push            rr5
1701 120000   F     3666                                     call            adrblok;dptr-
1704 D005           3667                                     pop                     rr5
1706 D004           3668                                     pop                     rr4
1708 D003           3669                                     pop                     rr3
170A D002           3670                                     pop                     rr2
170C 79D8           3671                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
170E E582           3672                                     mov                     a,dpl
1710 2D             3673                                     add                     a,r5
1711 F582           3674                                     mov                     dpl,a
1713 F7             3675                                     mov                     @r1,a           ;low
1714 E583           3676                                     mov                     a,dph
1716 3C             3677                                     addc            a,r4
1717 F583           3678                                     mov                     dph,a
1719 19             3679                                     dec                     r1
171A F7             3680                                     mov                     @r1,a                   ;high
                    3681                             
171B                3682     li42_43:
171B 120000   F     3683                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
171E 900000   F     3684                                     mov             dptr,#ch10;
1721 120000   F     3685                                     call    ldc_ltemp
1724 120000   F     3686                                     call    zdiv    
                    3687                                     ;;;;;;;;;;;
1727 120000   F     3688                                     call    maform
                    3689                                     ;;;;
                    3690     
                    3691                                     ;;;;;;;
172A 784F           3692                                             mov             r0,#abin
172C 120000   F     3693                                             call    saver2
172F 7853           3694                                             mov             r0,#adec
1731 7952           3695                                             mov             r1,#abin+3      ;hex->10
1733 120000   F     3696                                             call    bindec
                    3697                                     
1736 785C           3698                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1738 7945           3699                                             mov             r1,#bufind+5
173A 7F07           3700                                             mov             r7,#7
173C E6             3701     ch43:                           mov             a,@r0
173D 2430           3702                                             add             a,#30h
173F F7             3703                                             mov             @r1,a
1740 19             3704                                             dec             r1
1741 18             3705                                             dec             r0
1742 DFF8           3706                                             djnz    r7,ch43
1744 7847           3707                                             mov             r0,#bufind+7
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    59

1746 762D           3708                                             mov             @r0,#2dh          ;-2..-9
1748 7840           3709                                             mov             r0,#bufind
174A 762B           3710                                             mov             @r0,#2bh
174C 300202         3711                                             jnb             znmat,nozzmi43;bitznak,nozzmi
174F 762D           3712                                             mov             @r0,#2dh
1751 7934           3713     nozzmi43:                               mov             r1,#sadiap;diap
1753 7848           3714                                             mov             r0,#bufind+8
1755 E7             3715                                             mov             a,@r1
1756 B40808         3716                                             cjne    a,#8,nodi8_43
1759 7630           3717                                             mov             @r0,#30h                 ;10-10
175B 18             3718                                             dec             r0
175C 7663           3719                                             mov             @r0,#63h;31h
175E 08             3720                                             inc             r0
175F 800E           3721                                             jmp             see_l43
1761 B40908         3722     nodi8_43:       cjne    a,#9,nodi9_43
                    3723                                     
1764 7631           3724                                             mov             @r0,#31h           ;10-11
1766 18             3725                                             dec             r0
1767 7663           3726                                             mov             @r0,#63h;31h
                    3727                                     
1769 08             3728                                             inc             r0
176A 8003           3729                                             jmp             see_l43
176C 2432           3730     nodi9_43:               add             a,#32h
176E F6             3731                                             mov             @r0,a;
176F 08             3732     see_l43:                        inc             r0
1770 7641           3733                                             mov             @r0,#"A";"E";
                    3734                             ;       inc             r0
                    3735                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    3736                             ;       inc             r0;             mov             bufind+11
                    3737                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
1772 434B10         3738                             orl                     bufind+11,#10h
1775 120000   F     3739     out43:          call            ind
1778 120000   F     3740                                             call            z_1s
177B 020000   F     3741                                             jmp             out7                               
                                  
                    3742     
                    3743                                     ;;;;;;;;        
177E 783D           3744     label7: mov             r0,#chkl
1780 7604           3745                                     mov             @r0,#04;3
1782 08             3746                                     inc             r0
1783 76E8           3747                                     mov             @r0,#0e8h               ;1000
1785 020000   F     3748                                     jmp             out7;
1788 B64351         3749     list_43:                cjne    @r0,#43h,noli_43
178B 75B0FB         3750                                                     mov             p3,#0fbh                ;43
                             h <-
178E 20B70A         3751                                                     jb              p3.7,vvod43             ;vv
                             od
1791 C20B           3752                                                     clr             bitmem
1793 D204           3753                                                     setb    bitizm
1795 78B2           3754                                                     mov             r0,#marker
1797 76FF           3755                                                     mov             @r0,#0ffh
1799 80E3           3756                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3757     
179B 7644           3758     vvod43:                 mov             @r0,#44h
179D E537           3759                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
179F 04             3760                                                     inc             a
17A0 F552           3761                                                     mov             abin+3,a
                    3762                                                     
17A2 F537           3763                                                     mov             nelem,a
17A4 E4             3764                                                     clr             a
17A5 F551           3765                                                     mov             abin+2,a
17A7 F550           3766                                                     mov             abin+1,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    60

17A9 F54F           3767                                                     mov             abin,a
                    3768                                             
17AB 7853           3769                                             mov             r0,#adec
17AD 7952           3770                                             mov             r1,#abin+3      ;hex->10
17AF 120000   F     3771                                             call    bindec
17B2 7840           3772                                             mov             r0,#bufind;почистить индикатор
17B4 7F0A           3773                                             mov             r7,#10
17B6 7420           3774                                             mov             a,#20h
17B8 F6             3775     cle20:          mov             @r0,a
17B9 08             3776                                             inc             r0
17BA DFFC           3777                                             djnz    r7,cle20
                    3778                                             ;;;;;;
17BC 900000   F     3779                                             mov             dptr,#teCH;ОТСЧЕТ 000
17BF 120000   F     3780                                call         lotext
17C2 534BEF         3781                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
17C5 785C           3782                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
17C7 7949           3783                                             mov             r1,#bufind+9
17C9 7F03           3784                                             mov             r7,#3
17CB E6             3785     ch43_42:                                mov             a,@r0
17CC 2430           3786                                             add             a,#30h
17CE F7             3787                                             mov             @r1,a
17CF 19             3788                                             dec             r1
17D0 18             3789                                             dec             r0
17D1 DFF8           3790                                             djnz    r7,ch43_42
17D3 120000   F     3791                                             call            ind
17D6 120000   F     3792                                             call            z_1s
17D9 020000   F     3793                                             jmp             out7
17DC B64419         3794     noli_43:        cjne            @r0,#44h,vvosta
17DF 7643           3795                                             mov                     @r0,#43h
17E1 79D8           3796                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
17E3 E7             3797                                                     mov                     a,@r1
17E4 F582           3798                                                     mov                     dpl,a
17E6 19             3799                                                     dec                     r1
17E7 E7             3800                                                     mov                     a,@r1;high
17E8 F583           3801                                                     mov                     dph,a
17EA A3             3802                                                     inc                     dptr
17EB A3             3803                                                     inc                     dptr
17EC A3             3804                                                     inc                     dptr
17ED A3             3805                                                     inc                     dptr
17EE E583           3806                                                     mov                     a,dph
17F0 F7             3807                                                     mov                     @r1,a
17F1 09             3808                                                     inc                     r1
17F2 E582           3809                                                     mov                     a,dpl
17F4 F7             3810                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
17F5 020000   F     3811                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3812     
17F8 B66111         3813     vvosta:                 cjne            @r0,#61h,vvostad
17FB 7662           3814                                                     mov                     @r0,#62h
17FD 900000   F     3815                                                     mov                     dptr,#teMAX;
1800 120000   F     3816                                                     call            lotext
1803 120000   F     3817                                                     call            vichmax
1806 120000   F     3818                                                     call            z_1s
1809 020000   F     3819                                                     jmp             goto7
                    3820     
180C                3821     vvostad:                ;cjne           @r0,#61h
180C 7663           3822                                                     mov                     @r0,#63h
180E 900000   F     3823                                                     mov             dptr,#teMid;
1811 120000   F     3824                                                     call    lotext
1814 120000   F     3825                                                     call            vichmean
1817 020000   F     3826                                                     jmp             goto7
                    3827     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    61

181A 020000   F     3828     rLABELP:                jmp                     LABELP
181D 78B1           3829     vvodm11_15:     mov                     r0,#vichR;vvod
181F 75B0F7         3830                                                     mov                     p3,#0f7h
1822 20B7F5         3831                                             jb                      p3.7,rLABELP;????
                    3832                                     
                    3833     
1825 B61112         3834                                             cjne                    @r0,#11h,tome21
1828 7621           3835                                             mov                     @r0,#21h;vvod
182A 900000   F     3836                                             mov                     dptr,#teTE11
182D 120000   F     3837                                             call            lotext
1830 020000   F     3838                                             jmp                     onmem11
                    3839     
1833 16             3840     me11_15dec:             dec             @r0                             ;<-
1834 120000   F     3841     lokame1:        call            lomenu
1837 020000   F     3842                                             jmp                     onmem11
                    3843     
183A B61206         3844     tome21:         cjne                    @r0,#12h,tome13
                    3845                                             ;вкл тест интерфейса
183D 020000   F     3846                                             jmp             testrs;??????????
1840 020000   F     3847                                             jmp                     onmem11
                    3848     
1843 B61324         3849     tome13:         cjne                    @r0,#13h,tome14
1846 7631           3850                                             mov                     @r0,#31h
                    3851                                             
1848 7A50           3852                                             mov                     r2,#50h                    
                                  ;57.6->19.2
184A 7B2C           3853                                             mov                     r3,#2ch
184C 120454         3854                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
184F E508           3855                                             mov                     a,r8
1851 B4000B         3856                                             cjne            a,#00,skor19
1854 900000   F     3857                                             mov                     dptr,#teS57_6;57,6
1857 120000   F     3858                                             call            lotext
185A C213           3859                                             clr                     bitv19
                    3860     
185C 020000   F     3861                                             jmp             onmem11
185F 900000   F     3862     skor19:         mov                     dptr,#teS19_2
1862 120000   F     3863                                             call            lotext
1865 D213           3864                                             setb            bitv19
                    3865             
1867 020000   F     3866                                             jmp                     onmem11
                    3867                                             
                    3868     
186A B61415         3869     tome14:         cjne                    @r0,#14h,tome15
186D D204           3870                                             setb            bitizm
186F 7881           3871                                             mov                     r0,#chavt
1871 7600           3872                                             mov                     @r0,#0
1873 08             3873                                             inc                     r0
1874 7600           3874                                             mov                     @r0,#0
1876 C211           3875     outmenu:        clr                     bitmenu
1878 020000   F     3876                                             jmp                     out7
                    3877     
187B 78B1           3878     goparom:        mov             r0,#vichR               ;режим меню 52
187D 7652           3879                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
187F 020000   F     3880                                             jmp                     goparol
1882 2016F6         3881     tome15:         jb              bitpar,goparom  
1885 7651           3882                                             mov                     @r0,#51h;ПАРОЛЬ 000
1887 120000   F     3883                                             call            lomenu
188A 78B2           3884                                             mov                     r0,#marker
188C 7607           3885                                             mov                     @r0,#7
188E 753B09         3886                                             mov                     movrig,#9
1891 753A07         3887                                             mov                     movleft,#7
                    3888                                             ;setb           bitizm
1894 020000   F     3889                                             jmp                     onmem11
                    3890     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    62

                    3891     
1897 78B1           3892     me21_23:        mov                     r0,#vichR               ;<-
1899 7423           3893                                             mov                     a,#23h
189B C3             3894                                             clr                     c
189C 96             3895                                             subb            a,@r0
189D 403D           3896                                             jc                      labelS1
189F 75B0FB         3897                                             mov                     p3,#0fbh
18A2 20B718         3898                                             jb                      p3.7,vv21_23
18A5 B6210B         3899                                             cjne            @r0,#21h,me21_23dec;-<
18A8 7623           3900                                             mov                     @r0,#23h
18AA 900000   F     3901                                             mov                     dptr,#teTE7
18AD 120000   F     3902                                             call            lotext
18B0 020000   F     3903                                             jmp                     onmem11
18B3                3904     me21_23dec:     
18B3 16             3905                                             dec                     @r0
18B4 120000   F     3906                                             call            lomenu
18B7 020000   F     3907                                             jmp                     onmem11
18BA 020000   F     3908     onmem12:        jmp             outF    ;(ie7)                          
                    3909                                                     
18BD 75B0F7         3910     vv21_23:        mov             p3,#0f7h                ;vvod
18C0 20B7F7         3911                                             jb              p3.7,onmem12
18C3 B6210C         3912                                             cjne            @r0,#21h,test22
                    3913                                             ;mov                    dptr,#tabt11;заслать ус 11А
18C6 120000   F     3914     tests:          call            lotpus
18C9 D215           3915                                             setb            biteizm;запомнить режим ТИ
18CB D204           3916                                             setb            bitizm
18CD C211           3917                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
18CF 020000   F     3918                                             jmp                     onmem11
18D2 B62202         3919     test22:         cjne            @r0,#22h,test23
                    3920                                     ;       mov                     dptr,#tabt9;заслать ус 9А
18D5 80EF           3921                                             jmp             tests   
18D7                3922     test23:
                    3923                                     ;       mov                     dptr,#tabt7;заслать ус 7А
18D7 80ED           3924                                             jmp             tests   
18D9 020000   F     3925     left_s:         jmp                     left_sk
18DC B63149         3926     labelS1:        cjne            @r0,#31h,me_41
18DF 75B0FB         3927                                             mov                     p3,#0fbh                   
                                  ;<-
18E2 30B7F4         3928                                             jnb                     p3.7,left_s
18E5 75B0F7         3929                                             mov                     p3,#0f7h
18E8 20B7CF         3930                                             jb                      p3.7,onmem12
                    3931                                             ;запомнить признак установленной скорости в рпзу
                    3932     
                    3933     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3934     ;и запись во внешнее озу(0000h)
18EB 7900           3935                                             mov             r1,#0                   ;
18ED 7A50           3936                                     mov             r2,#50h
18EF 7B00           3937                                     mov             r3,#00
18F1 120499         3938                                     call    copyPP
                    3939                                     ;внести изменения во внешн озу
                    3940                                     ;KD=00 01 86 A0 (KD=1)
                    3941                                     ;кофф *100000 и переведенный в hex формат
                    3942                                     ;согласно адресов диапазонов и адресов яч вн озу 
18F4 792C           3943                                     mov             r1,#2ch
18F6 7400           3944                                     mov             a,#0;57,6
18F8 301302         3945                                     jnb             bitv19,spwri
18FB 7401           3946                                     mov             a,#1;19.6
18FD F3             3947     spwri:  movx    @r1,a
                    3948     ;стереть страницу пап прогр 
18FE 905000         3949                                     mov             dptr,#5000h
1901 7FFF           3950                                     mov             r7,#0ffh
1903 12043E         3951                                     call    cle256
                    3952     ;и запись в ячейки кофф памяти прогр (3000h) 
1906 7FFF           3953                                     mov             r7,#0ffh
1908 7900           3954                                     mov             r1,#0                           ;external r
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    63

                             am
190A 905000         3955                                     mov             dptr,#5000h
190D 120480         3956                                     call    wrpage
                    3957             
1910 201305         3958                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1913 758DF4         3959                                             mov                     TH1,#244                ;57
                             .6
1916 8003           3960                                             jmp                     outsko
1918 758DDC         3961     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
191B C211           3962     outsko:         clr             bitmenu
191D D204           3963                                             setb            bitizm
191F 020000   F     3964                                             jmp                     out7
                    3965     
1922 020000   F     3966     rlabels4:               jmp             labels4
1925 020000   F     3967     rlabelS13:      jmp             labelS13
                    3968     
1928 B651F7         3969     me_41:          cjne            @r0,#51h,rlabels4
192B 75B0FB         3970                                             mov             p3,#0fbh;<-
192E 30B7F4         3971                                             jnb             p3.7,rlabelS13
1931 75B0F7         3972                                             mov             p3,#0f7h
1934 20B76D         3973                                             jb              p3.7,vvmenu
                    3974                                             ;ввод пароля
                    3975                                     
                    3976     ;       считать с индикатора 
1937 7F0E           3977                                     mov             r7,#14
1939 784F           3978                                     mov             r0,#abin
193B 120000   F     3979                                     call    clearN                  
                    3980                                     
                    3981     ;чтение номера байта с индикатора(3байта)
                    3982     ;bufind+3..bufind+9
                    3983     ;-  - - -
                    3984     ;- - - - - - - - - -
                    3985     ;adec..adec+9
                    3986     ;ст            мл
193E 7849           3987                                     mov             r0,#bufind+9;
1940 795C           3988                                     mov             r1,#adec+9
1942 7F03           3989                                     mov             r7,#3;3bait
1944 C3             3990     upav1:          clr             c
1945 E6             3991                                     mov             a,@r0
1946 9430           3992                                     subb    a,#30h
1948 F7             3993                                     mov             @r1,a
1949 18             3994                                     dec             r0
194A 19             3995                                     dec             r1
194B DFF7           3996                                     djnz    r7,upav1;adec+7..adec+9
194D 7A50           3997                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
194F 7B28           3998                                             mov                     r3,#28h
1951 120454         3999                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1954 800F           4000     jmp                     goparol
1956 E508           4001                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1958 B55A4C         4002                                     cjne            a,adec+7,parerr
195B E509           4003                                     mov                     a,r9    
195D B55B47         4004                                     cjne            a,adec+8,parerr
1960 E50A           4005                                     mov                     a,r10
1962 B55C42         4006                                     cjne            a,adec+9,parerr
                    4007                                     ;равны
1965 78B1           4008     goparol:        mov             r0,#vichR               ;режим меню 52
1967 7652           4009                                             mov             @r0,#52h                ;0000-n
1969 900000   F     4010                                             mov             dptr,#teKD;00000-nA
196C 120000   F     4011                                             call            lotext
                    4012                                             ;;;;;;;;;
                    4013                                                     ;n(hex)->abin
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    64

196F 120000   F     4014                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1972 2552           4015                                             add             a,abin+3
1974 F552           4016                                             mov             abin+3,a
1976 7853           4017                                             mov             r0,#adec
1978 7952           4018                                             mov             r1,#abin+3      ;hex->10
197A 120000   F     4019                                             call    bindec
197D 855C48         4020                                             mov             bufind+8,adec+9
1980 75472D         4021                                             mov             bufind+7,#2dh
                    4022     
1983 79AE           4023                                             mov             r1,#diap
1985 7848           4024                                             mov             r0,#bufind+8
1987 E7             4025                                             mov             a,@r1
1988 B40807         4026                                             cjne    a,#8,nodi8k
198B 7630           4027                                             mov             @r0,#30h                 ;10-10
198D 18             4028                                             dec             r0
198E 7663           4029                                             mov             @r0,#63h;31h
1990 8008           4030                                             jmp             nodisk9
1992 B40905         4031     nodi8k:                         cjne    a,#9,nodisk9
                    4032                                     
1995 7631           4033                                             mov             @r0,#31h           ;10-11
1997 18             4034                                             dec             r0
1998 7663           4035                                             mov             @r0,#63h;31h
                    4036                                     
                    4037     
199A 78B2           4038     nodisk9:        mov                     r0,#marker
199C 7601           4039                                             mov                     @r0,#1
199E 753A01         4040                                             mov                     movleft,#1
19A1 753B05         4041                                             mov                     movrig,#5
                    4042                                             
19A4 020000   F     4043     vvmenu:         jmp             goto7
                    4044     
19A7 753932         4045     parerr:         mov                     nuerr,#32h
19AA 120000   F     4046                                             call            error
19AD 120000   F     4047                                             call            ind
19B0 120000   F     4048                                             call            z_1s
19B3 C211           4049                                             clr                     bitmenu
19B5 D204           4050                                             setb            bitizm
19B7 78B2           4051                                             mov                     r0,#marker
19B9 76FF           4052                                             mov                     @r0,#0ffh
19BB 020000   F     4053                                             jmp             goto7
                    4054     
19BE 30130B         4055     left_sk:                jnb                     bitv19,tosk19;<-
19C1 900000   F     4056                                             mov                     dptr,#teS57_6;57,6
19C4 120000   F     4057                                             call            lotext
19C7 C213           4058                                             clr                     bitv19
19C9 020000   F     4059                                             jmp             out7
19CC 900000   F     4060     tosk19:         mov                     dptr,#teS19_2
19CF 120000   F     4061                                             call            lotext
19D2 D213           4062                                             setb            bitv19
19D4 020000   F     4063                                             jmp             out7
                    4064     
19D7                4065     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4066             
                    4067     ;;;;;;;;;;;;;;;;;;
                    4068     ;необходимо не портить цифру в следуюем справа знакоместе
                    4069     ;т е сохранить ее в ячейке для мигания в противном случае
                    4070     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4071     ;       знакоместа
19D7 78B2           4072                                     mov             r0,#marker
19D9 7440           4073                                     mov             a,#bufind
19DB 26             4074                                             add             a,@r0                   ;a=bufind+m
                             arker
19DC F9             4075                                             mov             r1,a
19DD 19             4076                                             dec             r1;inc          r1
19DE 873C           4077                                             mov             savba,@r1
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    65

                    4078                                                     
19E0 78B2           4079                                                     mov             r0,#marker
19E2 16             4080                                                     dec             @r0                        
                                  
19E3 C219           4081                                     clr             bitmig
19E5 E53A           4082                                     mov                     a,movleft
19E7 B6064F         4083                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
19EA 06             4084                                     inc             @r0
19EB 020000   F     4085                                             jmp             goto7
                    4086     ;;;;;;;
                    4087     
19EE                4088     vvkali52:       ;введено значение для калибровки
                    4089                                             ;число на индикаторе ->Ak  (52h)
                    4090                                             ;       считать с индикатора 
19EE 7F0E           4091                                     mov             r7,#14
19F0 784F           4092                                     mov             r0,#abin
19F2 120000   F     4093                                     call    clearN                  
                    4094                                     
                    4095     ;чтение номера байта с индикатора(3байта)
                    4096     ;bufind+1..bufind+5
                    4097     ;-  - - -
                    4098     ;- - - - - - - - - -
                    4099     ;adec..adec+9
                    4100     ;ст            мл
19F5 7845           4101                                     mov             r0,#bufind+5;
19F7 795C           4102                                     mov             r1,#adec+9
19F9 7F05           4103                                     mov             r7,#5;5bait
19FB C3             4104     upav2:          clr             c
19FC E6             4105                                     mov             a,@r0
19FD 9430           4106                                     subb    a,#30h
19FF F7             4107                                     mov             @r1,a
1A00 18             4108                                     dec             r0
1A01 19             4109                                     dec             r1
1A02 DFF7           4110                                     djnz    r7,upav2;adec+7..adec+9
                    4111     
1A04 784F           4112                                     mov             r0,#abin
1A06 7953           4113                                     mov             r1,#adec                        ;мл        
                              ст
1A08 120000   F     4114                                     call    decbin                  ;abin..abin+3 (hex)
1A0B 120000   F     4115                                     call    loadr2                  ;r2..r5
1A0E 120402         4116                                     call    altof   ;r2..r5->float
1A11 900000   F     4117                                     mov     dptr,#ch_10;10
1A14 120000   F     4118                                     call    ldc_ltemp                       ;r8..r11=8
1A17 120203         4119                                     call    flmul
1A1A 78A4           4120                                     mov             r0,#rez_Ak
1A1C 120000   F     4121                                     call    saver2
1A1F C211           4122                                             clr                     bitmenu
1A21 D212           4123                                             setb            bitklb
                    4124                                             ;зажечь KMП
1A23 D204           4125                                             setb            bitizm;бит калибровки уже установле
                             н
1A25 78B2           4126                                             mov                     r0,#marker
1A27 76FF           4127                                             mov                     @r0,#0ffh
1A29 783D           4128                                     mov             r0,#chkl
1A2B 76FF           4129                                     mov             @r0,#0ffh
1A2D 08             4130                                     inc             r0
1A2E 76FF           4131                                     mov             @r0,#0ffh;38h
1A30 120000   F     4132                                     call            z_1s
1A33 020000   F     4133                                     jmp             out7
                    4134     
                    4135     
1A36 020000   F     4136                                             jmp             goto7
                    4137                                              
1A39 020000   F     4138     onmem13:        jmp             goto7   ;(ie7)
                    4139     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    66

1A3C B642AF         4140     labels4:        cjne            @r0,#42h,vvkali52
1A3F 75B0FB         4141                                             mov                     p3,#0fbh;<-
1A42 30B7F4         4142                                             jnb             p3.7,onmem13
1A45 75B0F7         4143                                             mov             p3,#0f7h;vvod
1A48 20B7EE         4144                                             jb              p3.7,onmem13
                    4145                                             
                    4146             
1A4B 020000   F     4147     jmp             out7                                                    
                    4148     ;;;;;;;
1A4E                4149     labelI:
1A4E 75B0FE         4150                                     mov             p3,#0feh
1A51 E5B0           4151                                     mov             a,p3
1A53 20E703         4152                                     jb              acc.7,nopoint
                    4153                                     ;
1A56 020000   F     4154                                     jmp             goto7;out7
                    4155     
1A59 75B0FB         4156     nopoint:                mov             p3,#0fbh
1A5C E5B0           4157                                     mov             a,p3
1A5E 20E72C         4158                                     jb              acc.7,nopoin7
1A61 78B2           4159     labelS3:mov             r0,#marker
1A63 E53A           4160                                     mov             a,movleft
1A65 B40309         4161                                     cjne    a,#3,poina1
1A68 B6030B         4162                                     cjne    @r0,#3,nomarl;26
                    4163                                     ;mov            @r0,#9
1A6B E53B           4164     poina2: mov                     a,movrig                ;кн <- B=+00000
1A6D F6             4165                                     mov                     @r0,a
1A6E 020000   F     4166                                     jmp             goto7;  out7
                    4167     
1A71 B60402         4168     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1A74 80F5           4169                                             jmp             poina2
                    4170     
                    4171     
1A76                4172     nomarl:                 ;                               29.12.06
                    4173     ;;;;;;;;;;;;;;;;;;
                    4174     ;необходимо не портить цифру в следуюем справа знакоместе
                    4175     ;т е сохранить ее в ячейке для мигания в противном случае
                    4176     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4177     ;       знакоместа
1A76 78B2           4178                                     mov             r0,#marker
1A78 7440           4179                                     mov             a,#bufind
1A7A 26             4180                                             add             a,@r0                   ;a=bufind+m
                             arker
1A7B F9             4181                                             mov             r1,a
1A7C 09             4182                                             inc             r1
1A7D 873C           4183                                             mov             savba,@r1
                    4184                                                     
1A7F 78B2           4185                                                     mov             r0,#marker
1A81 16             4186                                                     dec             @r0                        
                                  
1A82 C219           4187                                     clr             bitmig
1A84 E53A           4188                                     mov                     a,movleft
1A86 B40340         4189                                     cjne            a,#3,poinA
1A89 B60270         4190                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
1A8C 06             4191     poin3:  inc             @r0
                    4192     ;нажат ввод А =000000 запомнить константу А
1A8D 75B0F7         4193     nopoin7:           mov          p3,#0f7h
1A90 E5B0           4194                                     mov             a,p3
1A92 20E767         4195                                     jb              acc.7,out7
1A95 78B1           4196                                     mov             r0,#vichR
1A97 E6             4197                                     mov             a,@r0
1A98 B62133         4198                                     cjne    @r0,#21h,no21p7
1A9B 7611           4199                                     mov             @r0,#11h
                    4200                             ;       считать с индикатора  упаковать в плавающий формат
                    4201                             ;   сохранить
1A9D 7F0E           4202                                     mov             r7,#14
1A9F 784F           4203                                     mov             r0,#abin
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    67

1AA1 120000   F     4204                                     call    clearN                  
1AA4 120000   F     4205                                     call    upakA
                    4206                                     
1AA7 784F           4207                                     mov             r0,#abin
1AA9 7953           4208                                     mov             r1,#adec                        ;мл        
                              ст
1AAB 120000   F     4209                                     call    decbin                  ;abin..abin+3 (hex)
1AAE 120000   F     4210                                     call    loadr2                  ;r2..r5
1AB1 120402         4211                                     call    altof                   ;r2..r5->int
1AB4 78BC           4212                                     mov             r0,#konstA
1AB6 120000   F     4213                                     call    saver2
                    4214     ;26
1AB9 78B2           4215                                     mov             r0,#marker
1ABB 76FF           4216                                     mov             @r0,#0ffh
                    4217                                     
1ABD 900000   F     4218                                     mov             dptr,#teVICH;teBequ0
1AC0 120000   F     4219                                     call    lotext
                    4220                             ;       call            outB
1AC3 534BBF         4221                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4222                             ;       orl             bufind+11,#80h
1AC6 020000   F     4223                                     jmp             goto7;out7
                    4224     
1AC9 B60330         4225     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1ACC 80BE           4226                                             jmp             poin3
                    4227     
1ACE                4228     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4229                             ;   сохранить
1ACE 7F0E           4230                                     mov             r7,#14
1AD0 784F           4231                                     mov             r0,#abin
1AD2 120000   F     4232                                     call    clearN                  
1AD5 120000   F     4233                                     call    upakB                   
1AD8 784F           4234                                     mov             r0,#abin
1ADA 7953           4235                                     mov             r1,#adec                        ;мл        
                              ст
1ADC 120000   F     4236                                     call    decbin                  ;abin..abin+3 (hex)
1ADF 120000   F     4237                                     call    loadr2                  ;r2..r5
1AE2 120402         4238                                     call    altof                   ;r2..r5->int
1AE5 301B04         4239                                     jnb             bitznB,pozB
1AE8 EA             4240                                     mov             a,r2
1AE9 4480           4241                                     orl             a,#80h
1AEB FA             4242                                     mov             r2,a                    ;знак-
1AEC 78C0           4243     pozB:           mov             r0,#konstB
1AEE 120000   F     4244                                     call    saver2
                    4245     
1AF1 79B2           4246                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1AF3 77FF           4247                                     mov             @r1,#0ffh
1AF5 78B1           4248                                     mov             r0,#vichR
1AF7 7611           4249                                     mov             @r0,#11h
1AF9 020000   F     4250                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4251                                     
                    4252     
1AFC                4253     out7:                   ;mov            IE,#80h
1AFC D083           4254                                     pop             dph
1AFE D082           4255                                     pop             dpl
1B00 D007           4256                                     pop             rr7     
1B02 D006           4257                                     pop             rr6
1B04 D005           4258                                     pop             rr5
1B06 D004           4259                                     pop             rr4
1B08 D003           4260                                     pop             rr3
1B0A D002           4261                                     pop             rr2
1B0C D001           4262                                     pop             rr1                             
1B0E D000           4263                                     pop             rr0
1B10 D0D0           4264                                     pop             psw
1B12 D0E0           4265                                     pop             acc
1B14 E5AD           4266                                     mov             a,P3IF
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    68

1B16 547F           4267                                     anl             a,#7fh
1B18 F5AD           4268                                     mov             P3IF,a
1B1A 75B0C0         4269                                     mov             P3,#0c0h
                    4270     ;clr            bitmig
1B1D 75E730         4271                                     mov             EIE2,#30H
1B20 C219           4272     clr             bitmig
1B22 E586           4273                                             mov             a,P6            ;p6.4=0
1B24 54EF           4274                             anl             a,#0efh
1B26 F586           4275                             mov             P6,a
1B28 00             4276                             nop
1B29 00             4277                             nop
                    4278                                     
1B2A E586           4279                             mov             a,P6                    ;p6.4=1 
1B2C 4410           4280                             orl             a,#10h
1B2E F586           4281                             mov             P6,a                        
1B30 32             4282                                     reti
                    4283     
                    4284     
                    4285                                     
                    4286     
                    4287     
1B31 78B1           4288     lomenu:         mov             r0,#vichR
1B33 B61107         4289                                             cjne    @r0,#11h,menu12
1B36 900000   F     4290                                             mov             dptr,#teTESI
1B39 120000   F     4291     lome1:                  call    lotexT
1B3C 22             4292                                             ret
1B3D B61205         4293     menu12:         cjne    @r0,#12h,menu13
1B40 900000   F     4294                                             mov             dptr,#teTESR
1B43 80F4           4295                                             jmp             lome1
1B45 B61305         4296     menu13:         cjne    @r0,#13h,menu14
1B48 900000   F     4297                                             mov             dptr,#teSKOR
1B4B 80EC           4298                                             jmp             lome1
1B4D B61405         4299     menu14:         cjne    @r0,#14h,menu15
1B50 900000   F     4300                                             mov             dptr,#teAVK
1B53 80E4           4301                                             jmp             lome1
1B55 B61505         4302     menu15:                 cjne    @r0,#15h,menu21
1B58 900000   F     4303                                             mov             dptr,#teKALIB
1B5B 80DC           4304                                             jmp             lome1
                    4305     
1B5D B62105         4306     menu21: cjne    @r0,#21h,menu22
1B60 900000   F     4307                                             mov             dptr,#teTE11
1B63 80D4           4308                                             jmp             lome1
1B65 B62205         4309     menu22:         cjne    @r0,#22h,menu23
1B68 900000   F     4310                                             mov             dptr,#teTE9
1B6B 80CC           4311                                             jmp             lome1
1B6D B62305         4312     menu23:         cjne    @r0,#23h,menu31
1B70 900000   F     4313                                             mov             dptr,#teTE7
1B73 80C4           4314                                             jmp             lome1
1B75 B63105         4315     menu31:         cjne    @r0,#31h,menu41
1B78 900000   F     4316                                             mov             dptr,#teS57_6
1B7B 80BC           4317                                             jmp             lome1
                    4318     
1B7D                4319     menu41:         
1B7D 900000   F     4320                                             mov             dptr,#tePAR
1B80 80B7           4321                                             jmp             lome1
                    4322     
1B82 020000   F     4323     yesvi_kr:               jmp                     yesvi_km
1B85                4324     endkalib:;KD=Ak/A3
1B85 200DFA         4325                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1B88 789C           4326                                             mov                     r0,#rez_A3
1B8A 120000   F     4327                                             call            resar2
                    4328                                     
1B8D 120402         4329                                     call    altof                   ;->float
1B90 EA             4330                                             mov                     a,r2
1B91 547F           4331                                             anl                     a,#7fh
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    69

1B93 FA             4332                                             mov                     r2,a
1B94 120000   F     4333                                     call            move28
1B97 78A4           4334                                             mov                     r0,#rez_Ak
1B99 120000   F     4335                                             call            resar2
1B9C 1202B7         4336                                             call            fldiv
                    4337                                                     
1B9F 900000   F     4338                                     mov     dptr,#CHtho;100000
1BA2 120000   F     4339                                     call    ldc_ltemp                       ;r8..r11=8
1BA5 120203         4340                                     call    flmul
1BA8 120343         4341                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4342     
1BAB 78A0           4343                                             mov                     r0,#koefKD
1BAD 120000   F     4344                                             call            saver2
                    4345                                             ;запись в рпзу в соотв ячейку
                    4346                             
1BB0 7900           4347                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1BB2 7A50           4348                                     mov             r2,#50h
1BB4 7B00           4349                                     mov             r3,#00
1BB6 120499         4350                                     call    copyPP
                    4351                                     ;внести изменения во внешн озу
1BB9 120000   F     4352                                     call            findext                 ;r1-внешн озу
1BBC 78A0           4353                                     mov                     r0,#koefKD
1BBE 120000   F     4354                                             call            resar2
1BC1 EA             4355                                             mov                     a,r2
1BC2 F3             4356                                             movx            @r1,a
1BC3 09             4357                                             inc                     r1
1BC4 EB             4358                                             mov                     a,r3
1BC5 F3             4359                                             movx            @r1,a
1BC6 09             4360                                             inc                     r1
1BC7 EC             4361                                             mov                     a,r4
1BC8 F3             4362                                             movx            @r1,a
1BC9 09             4363                                             inc                     r1
1BCA ED             4364                                             mov                     a,r5
1BCB F3             4365                                             movx            @r1,a
                    4366                                     ;кофф *100000 и переведенный в hex формат
                    4367                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4368     ;стереть страницу пап прогр 
1BCC 905000         4369                                     mov             dptr,#5000h
1BCF 7FFF           4370                                     mov             r7,#0ffh
1BD1 12043E         4371                                     call    cle256
                    4372     ;и запись в ячейки кофф памяти прогр (3000h) 
1BD4 7FFF           4373                                     mov             r7,#0ffh
1BD6 7900           4374                                     mov             r1,#0                           ;external r
                             am
1BD8 905000         4375                                     mov             dptr,#5000h
1BDB 120480         4376                                     call    wrpage
                    4377     ;2.2.07
1BDE 79AE           4378                                     mov                     r1,#diap
1BE0 B70511         4379                                     cjne            @r1,#5,fulkalib
                    4380                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1BE3 D20D           4381                                     setb            bifl_kt
                    4382                                     ;call           loadus
1BE5 900000   F     4383                                     mov                     dptr,#tabt7;заслать ус 7А       
1BE8 E4             4384                             clr             a
1BE9 93             4385                             movc    a,@a+dptr                               ;high byte
1BEA F584           4386                             mov             p4,a
1BEC A3             4387                             inc             dptr
1BED E4             4388                             clr             a
1BEE 93             4389                             movc    a,@a+dptr                               ;low byte
1BEF F585           4390                             mov             p5,a
1BF1 020000   F     4391                                     jmp             goto7;  out_kali
                    4392     
                    4393     ;;;
1BF4                4394     fulkalib:
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    70

1BF4 C212           4395                                             clr             bitklb
1BF6 D216           4396                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1BF8 900000   F     4397                                             mov             dptr,#teEND
1BFB 120000   F     4398                                             call    lotext
1BFE 120000   F     4399                                             call    ind
1C01 120000   F     4400     out_kali:       call    z_1s
1C04 120000   F     4401                                             call    z_1s
1C07 020000   F     4402                                             jmp             goto7
1C0A                4403     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1C0A 7A50           4404                                     mov                     r2,#50h                 ;-11a
1C0C 7B14           4405                                     mov                     r3,#14h                 ;k7
1C0E 12046C         4406                                     call            rebyte2                         ;r2..r5- he
                             x
1C11 120402         4407                                     call            altof                   ;r2..r5->float
1C14 C002           4408                                     push            rr2
1C16 C003           4409                                     push            rr3
1C18 C004           4410                                     push            rr4
1C1A C005           4411                                     push            rr5
1C1C 7A50           4412                                     mov                     r2,#50h                 ;k5
1C1E 7B0C           4413                                     mov                     r3,#0ch
1C20 12046C         4414                             call            rebyte2                 ;r2..r5
1C23 120402         4415                                     call            altof                   ;r2..r5->float
1C26 120000   F     4416                                     call            move28
1C29 D005           4417                                     pop                     rr5
1C2B D004           4418                                     pop                     rr4
1C2D D003           4419                                     pop                     rr3
1C2F D002           4420                                     pop                     rr2
1C31 1202B7         4421                                     call            fldiv                   ;K7/K5
                    4422     
1C34 900000   F     4423                                     mov     dptr,#CHtho;100000
1C37 120000   F     4424                                     call    ldc_ltemp                       ;r8..r11=8
1C3A 120203         4425                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1C3D C002           4426                                     push            rr2
1C3F C003           4427                                     push            rr3
1C41 C004           4428                                     push            rr4
1C43 C005           4429                                     push            rr5
                    4430                                     
1C45 789C           4431                                     mov                     r0,#rez_A3
1C47 120000   F     4432                                     call            resar2
1C4A 120402         4433                                     call            altof                           ;r2..r5->fl
                             oat
1C4D 120000   F     4434                                     call            move28
1C50 D005           4435                                     pop                     rr5
1C52 D004           4436                                     pop                     rr4
1C54 D003           4437                                     pop                     rr3
1C56 D002           4438                                     pop                     rr2
1C58 1202B7         4439                               call          fldiv           ;Km     
                    4440     
1C5B 900000   F     4441                                     mov     dptr,#CHtho;100000
1C5E 120000   F     4442                                     call    ldc_ltemp                       ;r8..r11=8
1C61 120203         4443                                     call    flmul                           ;r2..r5
1C64 120343         4444                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1C67 78A0           4445                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1C69 120000   F     4446                                     call            saver2
                    4447                                     ;запись в рпзу в соотв ячейку
1C6C 7900           4448                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1C6E 7A50           4449                                     mov             r2,#50h
1C70 7B00           4450                                     mov             r3,#00
1C72 120499         4451                                     call    copyPP
                    4452                                     ;внести изменения во внешн озу
1C75 78A0           4453                                     mov                     r0,#koefKD
1C77 120000   F     4454                                     call            resar2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    71

1C7A 792C           4455                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4456                             
1C7C EA             4457                                     mov                     a,r2
1C7D F3             4458                                             movx            @r1,a
1C7E 09             4459                                             inc                     r1
1C7F EB             4460                                             mov                     a,r3
1C80 F3             4461                                             movx            @r1,a
1C81 09             4462                                             inc                     r1
1C82 EC             4463                                             mov                     a,r4
1C83 F3             4464                                             movx            @r1,a
1C84 09             4465                                             inc                     r1
1C85 ED             4466                                             mov                     a,r5
1C86 F3             4467                                             movx            @r1,a
                    4468                                     ;кофф *100000 и переведенный в hex формат
                    4469                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4470     ;стереть страницу пап прогр 
1C87 905000         4471                                     mov             dptr,#5000h
1C8A 7FFF           4472                                     mov             r7,#0ffh
1C8C 12043E         4473                                     call    cle256
                    4474     ;и запись в ячейки кофф памяти прогр (3000h) 
1C8F 7FFF           4475                                     mov             r7,#0ffh
1C91 7900           4476                                     mov             r1,#0                           ;external r
                             am
1C93 905000         4477                                     mov             dptr,#5000h
1C96 120480         4478                                     call    wrpage
                    4479     
1C99 C20D           4480                                             clr             bifl_kt
1C9B 120000   F     4481                                             call    loadus
1C9E 020000   F     4482                                             jmp             fulkalib
                    4483     
                    4484     ;выч среднего по блоку
                    4485     ;вых r2..r5
1CA1                4486     vichmean:       
1CA1 120000   F     4487                                             call            resa_hl;save_bl->dptr
1CA4 78D7           4488                                             mov                     r0,#copy_hl
1CA6 E583           4489                                             mov                     a,dph
1CA8 F6             4490                                             mov                     @r0,a
1CA9 08             4491                                             inc                     r0
1CAA E582           4492                                             mov                     a,dpl
1CAC F6             4493                                             mov                     @r0,a
1CAD 78B8           4494                                             mov                     r0,#work
1CAF 120000   F     4495                                             call            clear4
1CB2 78D6           4496                                             mov                     r0,#chblok;volume
1CB4 7600           4497                                             mov                     @r0,#0
1CB6 120000   F     4498     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1CB9 E582           4499                                             mov                     a,dpl
1CBB FF             4500                                             mov                     r7,a
1CBC E583           4501                                             mov                     a,dph
1CBE FE             4502                                             mov                     r6,a
                    4503     
1CBF 78D7           4504                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1CC1 E6             4505                                             mov                     a,@r0
1CC2 F583           4506                                             mov                     dph,a
1CC4 08             4507                                             inc                     r0
1CC5 E6             4508                                             mov                     a,@r0
1CC6 F582           4509                                             mov                     dpl,a
                    4510                                             
1CC8 C3             4511                                             clr                     c;-4
1CC9 E582           4512                                             mov                     a,dpl
1CCB 9404           4513                                             subb            a,#4
1CCD F582           4514                                             mov                     dpl,a
1CCF E583           4515                                             mov                     a,dph
1CD1 9400           4516                                             subb            a,#0
1CD3 F583           4517                                             mov                     dph,a;dptr-4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    72

                    4518                                             ;;;;;;;;
1CD5 79D7           4519                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1CD7 E583           4520                                                     mov             a,dph
1CD9 F7             4521                                               mov           @r1,a
1CDA 09             4522                                                     inc             r1
1CDB E582           4523                                                     mov             a,dpl
1CDD F7             4524                                                     mov             @r1,a
                    4525                                                     ;;;;;;;;;
1CDE C3             4526                                                     clr             c;пришли в начало блока?
1CDF E582           4527                                                     mov                     a,dpl
1CE1 9F             4528                                                     subb            a,r7
1CE2 FF             4529                                                     mov                     r7,a
1CE3 7006           4530                                                     jnz                     nextmea
1CE5 E583           4531                                                     mov                     a,dph
1CE7 9E             4532                                                     subb            a,r6
1CE8 FE             4533                                                     mov                     r6,a
1CE9 601B           4534                                                     jz                      outmea;
                    4535                                                     
                    4536                                                     ;продолжаем сравнение
                    4537                                                     ;;;;;;;;;;;             
1CEB 120000   F     4538     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1CEE 120402         4539                                             call            altof;->float
1CF1 120000   F     4540                                             call            move28                  ;r8..r11
1CF4 78B8           4541                                             mov                     r0,#work
1CF6 120000   F     4542                                             call            resar2
1CF9 120166         4543                                             call            fladd
1CFC 78B8           4544                                             mov                     r0,#work
1CFE 120000   F     4545                                             call            saver2
1D01 78D6           4546                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1D03 06             4547                                             inc                     @r0
1D04 80B0           4548                                             jmp                     meng
1D06                4549     outmea:         
1D06 120000   F     4550                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1D09 120402         4551                                             call            altof;->float
1D0C 120000   F     4552                                             call            move28                  ;r8..r11
1D0F 78B8           4553                                             mov                     r0,#work
1D11 120000   F     4554                                             call            resar2
1D14 120166         4555                                             call            fladd
1D17 78B8           4556                                             mov                     r0,#work
1D19 120000   F     4557                                             call            saver2
1D1C E4             4558                                             clr                     a
1D1D FA             4559                                             mov                     r2,a
1D1E FB             4560                                             mov                     r3,a
1D1F FC             4561                                             mov                     r4,a
1D20 78D6           4562                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1D22 E6             4563                                             mov                     a,@r0
1D23 2401           4564                                             add                     a,#1
1D25 FD             4565                                             mov                     r5,a
1D26 120402         4566                                             call            altof;r2..r5 float
1D29 120000   F     4567                                             call            move28
1D2C 78B8           4568                                             mov                     r0,#work
1D2E 120000   F     4569                                             call            resar2
1D31 1202B7         4570                                             call            fldiv
1D34 900000   F     4571                                             mov                     dptr,#ch_10      
1D37 120000   F     4572                                     call            ldc_ltemp
1D3A 1202B7         4573                                     call            fldiv
1D3D 120343         4574                                             call            ftol                            ;->
                             hex
1D40 120000   F     4575                                             call    maform
1D43 784F           4576                                             mov             r0,#abin
1D45 120000   F     4577                                             call    saver2
                    4578     ;;;;;;;;
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    73

                    4579                                             
1D48 7853           4580                                             mov             r0,#adec
1D4A 7952           4581                                             mov             r1,#abin+3      ;hex->10
1D4C 120000   F     4582                                             call    bindec
                    4583                                     
1D4F 785C           4584                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1D51 7949           4585                                             mov             r1,#bufind+9
1D53 7F05           4586                                             mov             r7,#5
1D55 E6             4587     bufmea:                         mov             a,@r0
1D56 2430           4588                                             add             a,#30h
1D58 F7             4589                                             mov             @r1,a
1D59 19             4590                                             dec             r1
1D5A 18             4591                                             dec             r0
1D5B DFF8           4592                                             djnz    r7,bufmea
1D5D 7844           4593                                             mov             r0,#bufind+4
1D5F 762B           4594                                             mov             @r0,#2bh          
1D61 300202         4595                                             jnb             znmat,nozmea
1D64 762D           4596                                             mov             @r0,#2dh
1D66 434B05         4597     nozmea:         orl             bufind+11,#05h
1D69 22             4598                                             ret
                    4599     
                    4600     
1D6A E0             4601     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1D6B FA             4602                                             mov                     r2,a
1D6C A3             4603                                             inc                     dptr
1D6D E0             4604                                             movx            a,@dptr
1D6E FB             4605                                             mov                     r3,a
1D6F A3             4606                                             inc                     dptr
1D70 E0             4607                                             movx            a,@dptr
1D71 FC             4608                                             mov                     r4,a
1D72 A3             4609                                             inc                     dptr
1D73 E0             4610                                             movx            a,@dptr
1D74 FD             4611                                             mov                     r5,a    
1D75 22             4612                                             ret
                    4613     
1D76 C3             4614     min4_hl:        clr                     c;-4
1D77 E582           4615                                             mov                     a,dpl
1D79 9404           4616                                             subb            a,#4
1D7B F582           4617                                             mov                     dpl,a
1D7D E583           4618                                             mov                     a,dph
1D7F 9400           4619                                             subb            a,#0
1D81 F583           4620                                             mov                     dph,a;dptr-4
1D83 22             4621                                             ret
                    4622     
                    4623     ;мин значение по по блоку
1D84                4624     vichmin:        
1D84 120000   F     4625                                             call            resa_hl;save_bl->dptr
                    4626                                                                                     
                    4627     ;с конца блока адрес 2го измерение
1D87 120000   F     4628                                             call            min4_hl
                    4629                                             
1D8A 78B8           4630                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4631                                             
1D8C E0             4632                                             movx            a,@dptr
1D8D F6             4633                                             mov                     @r0,a
1D8E 08             4634                                             inc                     r0
1D8F A3             4635                                             inc                     dptr
1D90 E0             4636                                             movx            a,@dptr
1D91 F6             4637                                             mov                     @r0,a
1D92 08             4638                                             inc                     r0
1D93 A3             4639                                             inc                     dptr
1D94 E0             4640                                             movx            a,@dptr
1D95 F6             4641                                             mov                     @r0,a
1D96 08             4642                                             inc                     r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    74

1D97 A3             4643                                             inc                     dptr
1D98 E0             4644                                             movx            a,@dptr
1D99 F6             4645                                             mov                     @r0,a
1D9A A3             4646                                             inc                     dptr
                    4647                                             
1D9B 78B8           4648                                             mov                     r0,#work
1D9D 120000   F     4649                                             call            resar2
1DA0 120402         4650                                             call            altof;->float;r2..r5
1DA3 78B8           4651                                             mov                     r0,#work
1DA5 120000   F     4652                                             call            saver2
                    4653     
1DA8 120000   F     4654                                             call            min4_hl
                    4655                                             ;call           min4_hl
                    4656     
1DAB 78D7           4657                                             mov                     r0,#copy_hl
1DAD E583           4658                                             mov                     a,dph
1DAF F6             4659                                             mov                     @r0,a
1DB0 08             4660                                             inc                     r0
1DB1 E582           4661                                             mov                     a,dpl
1DB3 F6             4662                                             mov                     @r0,a
                    4663                                     
1DB4 78D6           4664                                             mov                     r0,#chblok;volume
1DB6 7600           4665                                             mov                     @r0,#0
1DB8 120000   F     4666     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1DBB E582           4667                                             mov                     a,dpl
1DBD FF             4668                                             mov                     r7,a
1DBE E583           4669                                             mov                     a,dph
1DC0 FE             4670                                             mov                     r6,a
                    4671     
1DC1 78D7           4672                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1DC3 E6             4673                                             mov                     a,@r0
1DC4 F583           4674                                             mov                     dph,a
1DC6 08             4675                                             inc                     r0
1DC7 E6             4676                                             mov                     a,@r0
1DC8 F582           4677                                             mov                     dpl,a
                    4678                                             
1DCA C3             4679                                             clr                     c;-4
1DCB E582           4680                                             mov                     a,dpl
1DCD 9404           4681                                             subb            a,#4
1DCF F582           4682                                             mov                     dpl,a
1DD1 E583           4683                                             mov                     a,dph
1DD3 9400           4684                                             subb            a,#0
1DD5 F583           4685                                             mov                     dph,a;dptr-4
                    4686                                             ;;;;;;;;
1DD7 79D7           4687                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1DD9 E583           4688                                                     mov             a,dph
1DDB F7             4689                                               mov           @r1,a
1DDC 09             4690                                                     inc             r1
1DDD E582           4691                                                     mov             a,dpl
1DDF F7             4692                                                     mov             @r1,a
                    4693                                                     ;;;;;;;;;
1DE0 C3             4694                                                     clr             c;пришли в начало блока?
1DE1 E582           4695                                                     mov                     a,dpl
1DE3 9F             4696                                                     subb            a,r7
1DE4 FF             4697                                                     mov                     r7,a
1DE5 7006           4698                                                     jnz                     nextmin
1DE7 E583           4699                                                     mov                     a,dph
1DE9 9E             4700                                                     subb            a,r6
1DEA FE             4701                                                     mov                     r6,a
1DEB 601D           4702                                                     jz                      outmin;
                    4703                                                     
                    4704                                                     ;продолжаем сравнение
                    4705                                                     ;;;;;;;;;;;             
1DED 78B8           4706     nextmin:        mov                     r0,#work
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    75

1DEF 120000   F     4707                                             call            resar2
                    4708                                             ;call           altof;->float;r2..r5
1DF2 120000   F     4709                                             call            move28;->r8..r11
1DF5 120000   F     4710                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4711     
1DF8 120402         4712                                             call            altof;->float;r2..r5
                    4713                                             
1DFB 1201D6         4714                                             call            flcmp
1DFE 5005           4715                                             jnc                     nomini
1E00 78B8           4716                                             mov                     r0,#work;<
1E02 120000   F     4717                                             call            saver2;r2..r5
1E05 78D6           4718     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
1E07 06             4719                                             inc                     @r0
1E08 80AE           4720                                             jmp                     ming
                    4721     
1E0A 78B8           4722     outmin:         mov                     r0,#work;1ое измерение блока
1E0C 120000   F     4723                                             call            resar2
                    4724                                     ;       call            altof;->float;r2..r5
1E0F 120000   F     4725                                             call            move28;->r8..r11
1E12 120000   F     4726                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4727     
1E15 120402         4728                                             call            altof;->float;r2..r5
                    4729                                             
1E18 1201D6         4730                                             call            flcmp
1E1B 5005           4731                                             jnc                     minivix
1E1D 78B8           4732                                             mov                     r0,#work;<
1E1F 120000   F     4733                                             call            saver2;r2..r5
                    4734                                             ;;;;;;;;;
                    4735     
1E22 78B8           4736     minivix:        mov                     r0,#work
1E24 120000   F     4737                                             call            resar2
                    4738     
                    4739                                             ;call           altof;->float
                    4740                                     
1E27 900000   F     4741                                             mov                     dptr,#ch_10      
1E2A 120000   F     4742                                             call            ldc_ltemp
1E2D 1202B7         4743                                             call            fldiv
1E30 120343         4744                                             call            ftol                            ;->
                             hex
                    4745                                             ;;;
1E33 120000   F     4746                                             call            maform
1E36 784F           4747                                             mov                     r0,#abin
1E38 120000   F     4748                                             call            saver2
                    4749     ;;;;;;;;
                    4750                                             
1E3B 7853           4751                                             mov             r0,#adec
1E3D 7952           4752                                             mov             r1,#abin+3      ;hex->10
1E3F 120000   F     4753                                             call    bindec
                    4754                                     
1E42 785C           4755                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1E44 7949           4756                                             mov             r1,#bufind+9
1E46 7F05           4757                                             mov             r7,#5
1E48 E6             4758     bufmin:                         mov             a,@r0
1E49 2430           4759                                             add             a,#30h
1E4B F7             4760                                             mov             @r1,a
1E4C 19             4761                                             dec             r1
1E4D 18             4762                                             dec             r0
1E4E DFF8           4763                                             djnz    r7,bufmin
1E50 7844           4764                                             mov             r0,#bufind+4
1E52 762B           4765                                             mov             @r0,#2bh          
1E54 300202         4766                                             jnb             znmat,nozmin
1E57 762D           4767                                             mov             @r0,#2dh
1E59 434B05         4768     nozmin:         orl             bufind+11,#05h
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    76

1E5C 22             4769                                             ret
                    4770     
                    4771     
                    4772     
                    4773     ;мин значение по по блоку
1E5D                4774     vichmax:        
1E5D 120000   F     4775                                             call            resa_hl;save_bl->dptr
                    4776                                             
                    4777                                             
                    4778     ;с конца блока адрес 2го измерение
1E60 120000   F     4779                                             call            min4_hl
                    4780                                             
1E63 78B8           4781                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4782                                             
1E65 E0             4783                                             movx            a,@dptr
1E66 F6             4784                                             mov                     @r0,a
1E67 08             4785                                             inc                     r0
1E68 A3             4786                                             inc                     dptr
1E69 E0             4787                                             movx            a,@dptr
1E6A F6             4788                                             mov                     @r0,a
1E6B 08             4789                                             inc                     r0
1E6C A3             4790                                             inc                     dptr
1E6D E0             4791                                             movx            a,@dptr
1E6E F6             4792                                             mov                     @r0,a
1E6F 08             4793                                             inc                     r0
1E70 A3             4794                                             inc                     dptr
1E71 E0             4795                                             movx            a,@dptr
1E72 F6             4796                                             mov                     @r0,a
1E73 A3             4797                                             inc                     dptr
                    4798                                             
1E74 78B8           4799                                             mov                     r0,#work
1E76 120000   F     4800                                             call            resar2
1E79 120402         4801                                             call            altof;->float;r2..r5
1E7C 78B8           4802                                             mov                     r0,#work
1E7E 120000   F     4803                                             call            saver2
                    4804     
1E81 120000   F     4805                                             call            min4_hl
                    4806                                     ;       call            min4_hl
                    4807     
1E84 78D7           4808                                             mov                     r0,#copy_hl
1E86 E583           4809                                             mov                     a,dph
1E88 F6             4810                                             mov                     @r0,a
1E89 08             4811                                             inc                     r0
1E8A E582           4812                                             mov                     a,dpl
1E8C F6             4813                                             mov                     @r0,a
                    4814                                     
1E8D 78D6           4815                                             mov                     r0,#chblok;volume
1E8F 7600           4816                                             mov                     @r0,#0
1E91 120000   F     4817     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1E94 E582           4818                                             mov                     a,dpl
1E96 FF             4819                                             mov                     r7,a
1E97 E583           4820                                             mov                     a,dph
1E99 FE             4821                                             mov                     r6,a
                    4822     
1E9A 78D7           4823                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1E9C E6             4824                                             mov                     a,@r0
1E9D F583           4825                                             mov                     dph,a
1E9F 08             4826                                             inc                     r0
1EA0 E6             4827                                             mov                     a,@r0
1EA1 F582           4828                                             mov                     dpl,a
                    4829                                             
1EA3 C3             4830                                             clr                     c;-4
1EA4 E582           4831                                             mov                     a,dpl
1EA6 9404           4832                                             subb            a,#4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    77

1EA8 F582           4833                                             mov                     dpl,a
1EAA E583           4834                                             mov                     a,dph
1EAC 9400           4835                                             subb            a,#0
1EAE F583           4836                                             mov                     dph,a;dptr-4
                    4837                                             ;;;;;;;;
1EB0 79D7           4838                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1EB2 E583           4839                                                     mov             a,dph
1EB4 F7             4840                                               mov           @r1,a
1EB5 09             4841                                                     inc             r1
1EB6 E582           4842                                                     mov             a,dpl
1EB8 F7             4843                                                     mov             @r1,a
                    4844                                                     ;;;;;;;;;
1EB9 C3             4845                                                     clr             c;пришли в начало блока?
1EBA E582           4846                                                     mov                     a,dpl
1EBC 9F             4847                                                     subb            a,r7
1EBD FF             4848                                                     mov                     r7,a
1EBE 7006           4849                                                     jnz                     nextmax
1EC0 E583           4850                                                     mov                     a,dph
1EC2 9E             4851                                                     subb            a,r6
1EC3 FE             4852                                                     mov                     r6,a
1EC4 601D           4853                                                     jz                      outmax;
                    4854                                                     
                    4855                                                     ;продолжаем сравнение
                    4856                                                     ;;;;;;;;;;;             
1EC6 78B8           4857     nextmax:        mov                     r0,#work
1EC8 120000   F     4858                                             call            resar2
                    4859                                             ;call           altof;->float;r2..r5
1ECB 120000   F     4860                                             call            move28;->r8..r11
1ECE 120000   F     4861                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4862     
1ED1 120402         4863                                             call            altof;->float;r2..r5
                    4864                                             
1ED4 1201D6         4865                                             call            flcmp
1ED7 4005           4866                                             jc                      nomaxi
1ED9 78B8           4867                                             mov                     r0,#work;>
1EDB 120000   F     4868                                             call            saver2;r2..r5
1EDE 78D6           4869     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
1EE0 06             4870                                             inc                     @r0
1EE1 80AE           4871                                             jmp                     maxg
1EE3 78B8           4872     outmax:         mov                     r0,#work;1ое измерение блока
1EE5 120000   F     4873                                             call            resar2
                    4874                                     ;       call            altof;->float;r2..r5
1EE8 120000   F     4875                                             call            move28;->r8..r11
1EEB 120000   F     4876                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4877     
1EEE 120402         4878                                             call            altof;->float;r2..r5
                    4879                                             
1EF1 1201D6         4880                                             call            flcmp
1EF4 4005           4881                                             jc                      maxvix
1EF6 78B8           4882                                             mov                     r0,#work;>
1EF8 120000   F     4883                                             call            saver2;r2..r5
                    4884                                             ;;;;;;;;;
                    4885     
1EFB 020000   F     4886     maxvix:         jmp             minivix
                    4887     
                    4888     
                    4889     
                    4890     ;$include (d:\amp\subr5.asm) 
                +1  4891     ;
                +1  4892     ;goprogr:       jmp     izm
                +1  4893     ;тест интерфейса
1EFE            +1  4894     testrs: ;jb     p0.3,goprogr
1EFE C2AC       +1  4895                                     clr     IE.4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    78

1F00 759955     +1  4896     test1:  mov     SBUF0,#55h
1F03 3099FD     +1  4897                                     jnb     SCON0.1,$
1F06 78B8       +1  4898                                     mov     r0,#work;chtest
1F08 76BE       +1  4899                                     mov     @r0,#190d;60
                +1  4900     
1F0A 309825     +1  4901     test01: jnb     SCON0.0,test2
1F0D E599       +1  4902                                     mov     a,SBUF0
1F0F B45512     +1  4903                                     cjne    a,#55h,test3
1F12 C299       +1  4904     test4:  clr     SCON0.1
1F14 C298       +1  4905                                     clr     SCON0.0
1F16 7D0A       +1  4906                                     mov     r5,#10
1F18 7840       +1  4907                                     mov     r0,#bufind              ;- - - -
1F1A 762D       +1  4908     test04: mov     @r0,#2dh
1F1C 08         +1  4909                                     inc     r0
1F1D DDFB       +1  4910                                     djnz    r5,test04
1F1F 120000   F +1  4911                                     call    ind
1F22 80DC       +1  4912                                     jmp     test1
1F24            +1  4913     test3:  
1F24 753933     +1  4914                                     mov     nuerr,#33h
1F27 120000   F +1  4915                                     call    error           ;на кран прибора ERR 3
                +1  4916                             
1F2A 120000   F +1  4917                                     call    ind;
1F2D 120000   F +1  4918                                     call    z_01s           ;100ms
1F30 80E0       +1  4919                                     jmp     test4
1F32 78B8       +1  4920     test2:  mov     r0,#work;chtest
1F34 B60002     +1  4921                                     cjne    @r0,#0,test02
1F37 8003       +1  4922                                     jmp     test5
1F39 16         +1  4923     test02: dec     @r0
1F3A 80CE       +1  4924                                     jmp     test01
1F3C 120000   F +1  4925     test5:  call    z_1ms           ;1ms
1F3F C299       +1  4926                                     clr     SCON0.1
                +1  4927             
1F41 753933     +1  4928                                     mov     nuerr,#33h
1F44 120000   F +1  4929                                     call    error           ;на кран прибора ERR 3
                +1  4930                                     
1F47 120000   F +1  4931                                     call    ind
1F4A 120000   F +1  4932                                     call    z_01s           ;100ms
1F4D 80B1       +1  4933                                     jmp     test1   
                +1  4934     
                +1  4935     
                +1  4936     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
1F4F 75E700     +1  4937      ind:   mov             EIE2,#00H;mov   IE,#00h
1F52 120000   F +1  4938                     call    mign
1F55 7840       +1  4939                      mov            r0,#bufind;+11
1F57 7F0C       +1  4940                      mov            r7,#12
1F59 C286       +1  4941      nexin: clr             p0.6
1F5B E6         +1  4942                     mov             a,@r0
1F5C F59B       +1  4943                     mov             SPI0DAT,a
1F5E 20FBFD     +1  4944                     jb              TXBSY,$
1F61 D286       +1  4945                     setb    p0.6
1F63 120000   F +1  4946                     call    z_9             ;25mks
1F66 08         +1  4947                     inc             r0;dec          r0
1F67 DFF0       +1  4948                     djnz    r7,nexin
1F69 75E730     +1  4949                     mov             EIE2,#30H;mov   IE,#80h
1F6C 22         +1  4950                ret
                +1  4951     
                +1  4952     
1F6D 7A08       +1  4953     zapadc:   mov R2,#8
1F6F D297       +1  4954     sdv:      setb P1.7
1F71 33         +1  4955               rlc A
1F72 9296       +1  4956                     mov P1.6,C
1F74 120000   F +1  4957                     call tim2
                +1  4958                                     
1F77 C297       +1  4959                     clr P1.7
1F79 120000   F +1  4960                     call tim2
1F7C DAF1       +1  4961                     djnz R2,sdv
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    79

1F7E D296       +1  4962                     setb P1.6
1F80 22         +1  4963                     ret
                +1  4964     
1F81 7A08       +1  4965     chtadc:   mov R2,#8
1F83 D297       +1  4966     sdv1:     setb P1.7
1F85 120000   F +1  4967               call tim2
1F88 C297       +1  4968                     clr P1.7
1F8A A296       +1  4969                     mov C,P1.6
1F8C 33         +1  4970                     rlc A
1F8D 120000   F +1  4971                     call tim2
1F90 DAF1       +1  4972                     djnz R2,sdv1
1F92 22         +1  4973                     ret
                +1  4974     
1F93 7E30       +1  4975     tim:      mov R6,#30h;38h
1F95 DEFE       +1  4976     tim1:     djnz R6,tim1
1F97 22         +1  4977               ret
                +1  4978               
1F98 7E10       +1  4979     tim2:     mov R6,#10h;14h
1F9A DEFE       +1  4980     tim3:     djnz R6,tim3
1F9C 22         +1  4981               ret
                +1  4982     
                +1  4983     ;запись из acc
1F9D C3         +1  4984     write_x1: clr   c
1F9E            +1  4985     writeD_x1:
1F9E 92B1       +1  4986                       mov P3.1,c        ;запись
1FA0 F5A0       +1  4987               mov P2,A
1FA2 D2B3       +1  4988                       setb P3.3
1FA4 120000   F +1  4989                       call z_5
1FA7 C2B3       +1  4990                       clr P3.3
1FA9 75A0FF     +1  4991                       mov P2,#0FFh
1FAC 22         +1  4992                       ret
                +1  4993     
                +1  4994     ;чтение в acc
1FAD C3         +1  4995     read_x2:  clr   c  
1FAE 92B1       +1  4996               mov P3.1,c        ;чтение
1FB0 D2B2       +1  4997               setb P3.2
1FB2 D2B3       +1  4998                       setb P3.3
1FB4 120000   F +1  4999                     call z_5
1FB7 E5A0       +1  5000                       mov A,P2
1FB9 C2B3       +1  5001                       clr P3.3
1FBB C2B2       +1  5002                       clr P3.2
1FBD 22         +1  5003                       ret
                +1  5004     
                +1  5005     
1FBE 120000   F +1  5006     loop:     call read_x2;x2    ;ожидание флага готовности
1FC1 20E7FA     +1  5007                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
1FC4 22         +1  5008                        ret           ;возврат, если бит А(7)<>1
                +1  5009                                      
                +1  5010                                        
                +1  5011     
                +1  5012     
                +1  5013     
                +1  5014     
                +1  5015     
                +1  5016     
                +1  5017     
                +1  5018     ;принимаемый байт в acc
                +1  5019     ;прием байта последовательным кодом старшими разрядами вперед
1FC5 7A08       +1  5020     read:    mov R2,#8
1FC7 C297       +1  5021     re1:     clr P1.7;P1.2
1FC9 120000   F +1  5022              call tim2        ;5mks
1FCC A294       +1  5023                     mov C,P1.4;P1.0
1FCE 33         +1  5024                     rlc A           
1FCF D297       +1  5025                     setb P1.7;P1.2
1FD1 120000   F +1  5026                     call tim2
1FD4 DAF1       +1  5027                     djnz R2,re1
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    80

1FD6 22         +1  5028                     ret
                +1  5029     
                +1  5030      ;in r0-count   
                +1  5031     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5032     ;r2..r5 -значение счетчика
1FD7            +1  5033     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
1FD7 E6         +1  5034                     mov                     a,@r0
1FD8 FC         +1  5035                     mov                     r4,a
1FD9 08         +1  5036                     inc                     r0
1FDA E6         +1  5037                     mov                     a,@r0
1FDB FD         +1  5038                     mov                     r5,a
1FDC 7B00       +1  5039                     mov                     r3,#0
1FDE 7A00       +1  5040                     mov                     r2,#0
1FE0 750800     +1  5041                     mov                     r8,#0;clr                       r8
1FE3 750900     +1  5042                     mov                     r9,#0;clr                       r9
1FE6 120000   F +1  5043                     call            lcmp
1FE9 22         +1  5044                     ret
                +1  5045     
                +1  5046     
                +1  5047     ;in-r1-count
1FEA            +1  5048     chdec:          ;mov            r1,#chavt               ;chavt-1
1FEA E7         +1  5049                             mov             a,@r1
1FEB FC         +1  5050                             mov             r4,a
1FEC 09         +1  5051                             inc             r1
1FED E7         +1  5052                             mov             a,@r1
1FEE FD         +1  5053                             mov             r5,a
1FEF C202       +1  5054                             clr             rr2
1FF1 C203       +1  5055                             clr             rr3
1FF3 900000   F +1  5056                             mov             dptr,#ch1        
1FF6 120000   F +1  5057                             call    ldc_ltemp
1FF9 120000   F +1  5058                             call    lsub
1FFC ED         +1  5059                             mov             a,r5
1FFD F7         +1  5060                             mov             @r1,a
1FFE 19         +1  5061                             dec             r1
1FFF EC         +1  5062                             mov             a,r4
2000 F7         +1  5063                             mov             @r1,a
2001 22         +1  5064                             ret      
                +1  5065     
                +1  5066     
                +1  5067     
                +1  5068     
2002            +1  5069     loadUS: ;если идет тест измерения ус восстановить для теста
2002 201533     +1  5070                                     jb              biteizm,yestest
2005 79AE       +1  5071                                             mov             r1,#diap
2007 E7         +1  5072                             mov             a,@r1
2008 23         +1  5073                             rl              a;*2
2009 FC         +1  5074                             mov             r4,a                    ;save a
200A 900000   F +1  5075                             mov             dptr,#tabus
200D 93         +1  5076                             movc    a,@a+dptr
200E FA         +1  5077                             mov             r2,a                    ;high byte
200F E584       +1  5078                             mov             a,p4
2011 5401       +1  5079                             anl             a,#01
2013 4A         +1  5080                             orl             a,r2
2014 F584       +1  5081                             mov             p4,a
2016 0C         +1  5082                             inc             r4
2017 EC         +1  5083                             mov             a,r4
2018 93         +1  5084                             movc    a,@a+dptr
2019 FB         +1  5085                             mov             r3,a                    ;low byte
201A E585       +1  5086                             mov             a,p5
201C 5401       +1  5087                             anl             a,#01
201E 4B         +1  5088                             orl             a,r3
201F F585       +1  5089                             mov             p5,a
2021 799A       +1  5090                             mov             r1,#parT
2023 B7010E     +1  5091                             cjne    @r1,#1,bret
2026 79AE       +1  5092                             mov             r1,#diap                  ;10s (parT=1)
2028 7405       +1  5093                             mov             a,#5                      ;10-8..10-11 p4.1=1
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    81

202A C3         +1  5094                             clr             c
202B 97         +1  5095                             subb    a,@r1
202C 5006       +1  5096                             jnc             bret
202E E584       +1  5097                             mov             a,p4
2030 4402       +1  5098                             orl             a,#02
2032 F584       +1  5099                             mov             p4,a                     ;10-8..10-11 p4.1=1
2034 120000   F +1  5100     bret:      call          louizm         ;us если вкл кн ИЗМЕР
2037 22         +1  5101                             ret
2038            +1  5102     yestest:
2038 120000   F +1  5103                             call            lotpus          ;ус теста измерения
203B 22         +1  5104                             ret
                +1  5105                             
                +1  5106     ;загр ус для кор 0
                +1  5107     ;dptr-
203C E4         +1  5108     lospus:         clr             a
                +1  5109                             ;movc   a,@a+dptr
                +1  5110                             ;mov            r2,a                    ;high byte
                +1  5111                             ;mov            a,p4
                +1  5112                             ;anl            a,#01
                +1  5113                             ;orl            a,r2
                +1  5114                             ;mov            p4,a
                +1  5115                             ;inc            dptr
203D E4         +1  5116                             clr             a
203E 93         +1  5117                             movc    a,@a+dptr
203F FB         +1  5118                             mov             r3,a                    ;low byte
2040 E585       +1  5119                             mov             a,p5
2042 54BF       +1  5120                             anl             a,#0bfh;01
2044 4B         +1  5121                             orl             a,r3
2045 F585       +1  5122                             mov             p5,a
2047 22         +1  5123                             ret
                +1  5124     
2048 80         +1  5125     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5126     
                +1  5127     ;us кнопка измерения выкл
2049 88D6       +1  5128     tabus:     db           88h,0d6h         ;10-2
204B 88F6       +1  5129                             db      88h,0f6h         ;10-3
204D 88D6       +1  5130                             db              88h,0d6h         ;10-4
204F 88F6       +1  5131                             db              88h,0f6h         ;10-5
2051 9AD6       +1  5132                             db      9ah,0d6h         ;10-6
2053 9AF6       +1  5133                             db              9ah,0f6h         ;10-7
2055 ACD6       +1  5134                             db              0ach,0d6h        ;10-8
2057 ACF6       +1  5135                             db      0ach,0f6h        ;10-9
2059 C8D6       +1  5136                             db              0c8h,0d6h        ;10-10
205B C8F6       +1  5137                             db              0c8h,0f6h        ;10-11
                +1  5138     
205D            +1  5139     tabt11: 
205D 66E6       +1  5140                             db              66h,0e6h;10-11
205F            +1  5141     tabt9:  
205F 32E6       +1  5142                             db              32h,0e6h;10-9
2061            +1  5143     tabt7:  
2061 18EE       +1  5144                             db              18h,0eeh;10-7
                +1  5145     
                +1  5146      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5147     ;в зав от parT (Tизм)
2063 79B7       +1  5148     loadT:          mov             r1,#load;parT
2065 7840       +1  5149     lolevT:         mov             r0,#bufind+0
2067 7B0A       +1  5150                             mov             r3,#10
2069 75F00A     +1  5151                             mov             b,#10
206C E7         +1  5152                             mov             a,@r1
206D A4         +1  5153                             mul             ab
206E FC         +1  5154                             mov             r4,a                    ;save a
206F 900000   F +1  5155                             mov             dptr,#textT
2072 93         +1  5156             lod1:   movc    a,@a+dptr
2073 F6         +1  5157                             mov             @r0,a
2074 08         +1  5158                             inc             r0
2075 0C         +1  5159                             inc             r4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    82

2076 EC         +1  5160                             mov             a,r4
2077 DBF9       +1  5161                             djnz    r3,lod1
2079 22         +1  5162                             ret     
                +1  5163     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5164     ;dptr-адр строки текста         
207A            +1  5165     lotext:         
207A 7B0A       +1  5166                             mov             r3,#10
207C 7840       +1  5167                             mov             r0,#bufind+0
207E E4         +1  5168     lodt:           clr             a
207F 93         +1  5169                             movc    a,@a+dptr
2080 F6         +1  5170                             mov             @r0,a
2081 08         +1  5171                             inc             r0
2082 A3         +1  5172                             inc             dptr
2083 DBF9       +1  5173                             djnz    r3,lodt
2085 22         +1  5174                             ret                                     
                +1  5175     
                +1  5176     
                +1  5177     
                +1  5178     
                +1  5179      ;задержка 100 мкс
2086 7978       +1  5180     z_100:    mov R1,#78h     ;загрузка первого числа
2088 7A02       +1  5181     z100:     mov R2,#2h     ;загрузка второго числа
208A DAFE       +1  5182     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
208C D9FA       +1  5183               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
208E 22         +1  5184               ret           
                +1  5185     
                +1  5186     ;задержка 34 мкс
208F 7B8B       +1  5187     z_5:      mov R3,#8Bh      ;загрузка числа
2091 DBFE       +1  5188     ct:       djnz R3,ct
2093 22         +1  5189               ret
                +1  5190     
                +1  5191     ;задержка 15 мс
2094 79FA       +1  5192     z_15:     mov R1,#0FAh    ;загрузка первого числа
2096 7AED       +1  5193     z15:      mov R2,#0EDh   ;загрузка второго числа
2098 DAFE       +1  5194     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
209A D9FA       +1  5195               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
209C 22         +1  5196               ret   
                +1  5197                                               
                +1  5198      ;задержка 1 мс
209D 7910       +1  5199     z_1ms:     mov R1,#10h     
209F 7AED       +1  5200     ss1:       mov R2,#0EDh    
20A1 DAFE       +1  5201                djnz R2, $    
20A3 D9FA       +1  5202                djnz R1, ss1   
20A5 22         +1  5203                ret   
                +1  5204     
                +1  5205      ;????????
                +1  5206     ;задержка 1с
20A6 7D1F       +1  5207     z_1s:   mov             r5,#01fh 
20A8 7EFF       +1  5208     co2s:   mov     R6,#0ffh     
20AA 7FFF       +1  5209     z1s:     mov    R7,#0ffh     
20AC DFFE       +1  5210     co1s:   djnz    R7, co1s        
20AE DEFA       +1  5211             djnz    R6, z1s 
20B0 DDF6       +1  5212                     djnz    r5,co2s
20B2 22         +1  5213               ret
                +1  5214     ;задержка 0,1с
20B3 7D03       +1  5215     z_01s:           mov            r5,#03h 
20B5 7EFF       +1  5216     co02s:          mov     R6,#0ffh     
20B7 7FFF       +1  5217     z01s:           mov     R7,#0ffh     
20B9 DFFE       +1  5218                             djnz    R7, $   
20BB DEFA       +1  5219                     djnz    R6, z01s 
20BD DDF6       +1  5220                             djnz    r5,co02s
20BF 22         +1  5221                      ret
                +1  5222                                               
                +1  5223     ;задержка 0,5с
20C0 7D0D       +1  5224     z_05s:           mov            r5,#0dh 
20C2 7EFF       +1  5225     co05s:                  mov     R6,#0ffh     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    83

20C4 7FFF       +1  5226     z05s:           mov     R7,#0ffh     
20C6 DFFE       +1  5227                                     djnz    R7, $   
20C8 DEFA       +1  5228                     djnz    R6, z05s 
20CA DDF6       +1  5229                                             djnz    r5,co05s
20CC 22         +1  5230                      ret                                                     
                +1  5231                                                               
20CD 000007FF   +1  5232     chzap:  db      00,00,07h,0ffh             
20D1 00000000   +1  5233     ch0:    db      00,00,00,00
20D5 0000000A   +1  5234     ch10:   db      00,00,00,0ah                            ;10
20D9 00000005   +1  5235     ch5:    db      00,00,00,05                                             ;5
20DD 00000004   +1  5236     ch4:    db      00,00,00,04                                             ;4
20E1 000003B9   +1  5237     ch954:  db 00,00,03,0b9h                                                ;954
20E5 000003E8   +1  5238     ch10000:        db 00,00,03h,0e8h                                               ;10000
20E9 00000064   +1  5239     ch100:  db 00,00,00,64h ;100
20ED 00000002   +1  5240     ch2:    db      00,00,00,02                                             
                +1  5241     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5242     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5243     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
20F1 00000001   +1  5244     ch1:    db  00,00,00,01
20F5 49742400   +1  5245     ch_mln: db      49h,74h,24h,00;10*6
20F9 3F800000   +1  5246     ch_1:   db      3fh,80h,00,00   
20FD 40000000   +1  5247     ch_2:   db      40h,00,00,00;2
2101 40800000   +1  5248     ch_4:   db      40h,80h,00,00;4 
2105 40A00000   +1  5249     ch_5:   db      40h,0a0h,00,00;5
                +1  5250     
                +1  5251             
2109 3F741EDF   +1  5252     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
210D 47C35000   +1  5253     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
2111 3F800347   +1  5254     KD:             db      3fh,80h,03h,47h;1,0001
2115 48435000   +1  5255     CH2tho: db      48h,43h,50h,00;200000
2119 4856D800   +1  5256     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
211D 4856D800   +1  5257     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
2121 461C4000   +1  5258     ch_10th:db  46h,1ch,40h,00;10000-2710h
2125 41200000   +1  5259     ch_10:  db      41h,20h,00,00;10d
2129 48742400   +1  5260     ch_250: db      48h,74h,24h,00;250000
212D 000186A0   +1  5261     chk:            db      00,01,86h,0a0h;
2131 00000320   +1  5262     ch320h: db      00,00,03h,20h;320h=800d
2135 00000150   +1  5263     ch150h: db      00,00,01h,50h;150h
                +1  5264     ;r1- мл байт 2х байтного числа
2139            +1  5265     tenmin:         ;-10
2139 C3         +1  5266                             clr             c
213A E7         +1  5267                     mov             a,@r1
213B 9405       +1  5268                             subb    a,#5;10
213D F7         +1  5269                             mov             @r1,a
213E 19         +1  5270                             dec             r1
213F E7         +1  5271                             mov             a,@r1
2140 9400       +1  5272                             subb    a,#0
2142 F7         +1  5273                             mov             @r1,a
2143 22         +1  5274                             ret
                +1  5275       ;r0-обнуление ячеек памяти  
2144 7F04       +1  5276       clear4:        mov    r7,#4
2146 E4         +1  5277                             clr             a
2147 F6         +1  5278       cl4:          mov             @r0,a
2148 08         +1  5279                             inc             r0
2149 DFFC       +1  5280                             djnz    r7,cl4
214B 22         +1  5281                             ret     
                +1  5282     
                +1  5283      ;r0-обнуление ячеек памяти 
                +1  5284      ;R7- 
214C            +1  5285       clearN:        
214C E4         +1  5286                             clr             a
214D F6         +1  5287       cl4N:         mov             @r0,a
214E 08         +1  5288                             inc             r0
214F DFFC       +1  5289                             djnz    r7,cl4N
2151 22         +1  5290                             ret     
                +1  5291     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    84

                +1  5292       ;чтение номера байта с индикатора(2байта)
                +1  5293     ;bufind+8..bufind+9
                +1  5294     ;-  - - -
                +1  5295     ;- - - - - - - - - -
                +1  5296     ;adec..adec+9
                +1  5297     ;ст            мл
2152 7848       +1  5298     upak2:  mov             r0,#bufind+8;
2154 795C       +1  5299                     mov             r1,#adec+9
2156 7F02       +1  5300                     mov             r7,#2;2bait
2158 C3         +1  5301     upa2:   clr             c
2159 E6         +1  5302                     mov             a,@r0
215A 9430       +1  5303                     subb    a,#30h
215C F7         +1  5304                     mov             @r1,a
215D 18         +1  5305                     dec             r0
215E 19         +1  5306                     dec             r1
215F DFF7       +1  5307                     djnz    r7,upa2
2161 22         +1  5308                     ret  
                +1  5309     
                +1  5310     
                +1  5311         
                +1  5312      ;bufind+4..bufind+9
                +1  5313     ;-  - - -
                +1  5314     ;- - - - - - - - - -
                +1  5315     ;adec..adec+9
                +1  5316     ;ст            мл
2162 7849       +1  5317     upak:   mov             r0,#bufind+9;
2164 795C       +1  5318                     mov             r1,#adec+9
2166 7F06       +1  5319                     mov             r7,#6
2168 C3         +1  5320     upa:    clr             c
2169 E6         +1  5321                     mov             a,@r0
216A 9430       +1  5322                     subb    a,#30h
216C F7         +1  5323                     mov             @r1,a
216D 18         +1  5324                     dec             r0
216E 19         +1  5325                     dec             r1
216F DFF7       +1  5326                     djnz    r7,upa
2171 22         +1  5327                     ret
                +1  5328     
                +1  5329      ;чтение номера байта с индикатора(3байта)
                +1  5330     ;bufind+3..bufind+9
                +1  5331     ;-  - - -
                +1  5332     ;- - - - - - - - - -
                +1  5333     ;adec..adec+9
                +1  5334     ;ст            мл
2172 7849       +1  5335     upak3:  mov             r0,#bufind+9;
2174 795C       +1  5336                     mov             r1,#adec+9
2176 7F03       +1  5337                     mov             r7,#3;3bait
2178 C3         +1  5338     upa1:   clr             c
2179 E6         +1  5339                     mov             a,@r0
217A 9430       +1  5340                     subb    a,#30h
217C F7         +1  5341                     mov             @r1,a
217D 18         +1  5342                     dec             r0
217E 19         +1  5343                     dec             r1
217F DFF7       +1  5344                     djnz    r7,upa1
2181 22         +1  5345                     ret
                +1  5346     
                +1  5347     ;вых-r2,r3-адрес ячее памяти прогр
2182            +1  5348     findkoef:
2182 79AE       +1  5349                                     mov             r1,#diap
2184 E7         +1  5350                                     mov             a,@r1
2185 23         +1  5351                                     rl              a                                          
                                          ;diap*2(2bait )
2186 FC         +1  5352                                     mov             r4,a                                    ;sa
                             ve
2187 900000   F +1  5353                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5354                                     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    85

218A 93         +1  5355                                     movc    a,@a+dptr                       ;ст байт
218B FA         +1  5356                                     mov             r2,a
218C A3         +1  5357                                     inc             dptr
218D EC         +1  5358                                     mov             a,r4
218E 93         +1  5359                                     movc    a,@a+dptr
218F FB         +1  5360                                     mov             r3,a                    ;мл байт
2190 22         +1  5361                                     ret
                +1  5362     ;r2..r5 в опр яч внешн озу
2191            +1  5363     findext:
2191 79AE       +1  5364                                     mov             r1,#diap
2193 E7         +1  5365                                     mov             a,@r1
2194 23         +1  5366                                     rl              a                                          
                                          ;diap*2(2bait )
2195 23         +1  5367                                     rl              a                                          
                                          ;diap*2(2bait )
2196 F9         +1  5368                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5369                                     
2197 22         +1  5370                                     ret
                +1  5371     
                +1  5372     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5373     ;(5000h..5027h)
2198 5000       +1  5374     diKDw:  dw              5000h                   ;10-2
219A 5004       +1  5375                                     dw              5004h                   ;10-3
219C 5008       +1  5376                                     dw              5008h                   ;10-4
219E 500C       +1  5377                                     dw              500ch                   ;10-5
21A0 5010       +1  5378                                     dw              5010h                   ;10-6
21A2 5014       +1  5379                                     dw              5014h                   ;10-7
21A4 5018       +1  5380                                     dw              5018h                   ;10-8
21A6 501C       +1  5381                                     dw              501ch                   ;10-9
21A8 5020       +1  5382                                     dw              5020h                   ;10-10
21AA 5024       +1  5383                                     dw              5024h                   ;10-11
21AC 5028       +1  5384     dipar:  dw              5028h                   ;parol
21AE 502C       +1  5385     diKm:           dw              502ch                   ;Km для теста измерения
21B0 000186A0   +1  5386     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5387     
21B4 AA08       +1  5388     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
21B6 AB09       +1  5389                                             mov     r3,ltemp+1
21B8 AC0A       +1  5390                                             mov     r4,ltemp+2
21BA AD0B       +1  5391                                             mov     r5,ltemp+3
21BC 22         +1  5392                                             ret
                +1  5393     ;bufind+4..bufind+9
                +1  5394     ;-  - - -
                +1  5395     ;- - - - - - - - - -
                +1  5396     ;adec..adec+9
                +1  5397     ;ст            мл
21BD 7847       +1  5398     upakA:  mov             r0,#bufind+7;
21BF 795C       +1  5399                     mov             r1,#adec+9
21C1 7F04       +1  5400                     mov             r7,#4
21C3 C3         +1  5401     upaa4:  clr             c
21C4 E6         +1  5402                     mov             a,@r0
21C5 9430       +1  5403                     subb    a,#30h
21C7 F7         +1  5404                     mov             @r1,a
21C8 18         +1  5405                     dec             r0
21C9 19         +1  5406                     dec             r1
21CA DFF7       +1  5407                     djnz    r7,upaa4
21CC 22         +1  5408                     ret
                +1  5409     
                +1  5410     ;bufind+4..bufind+9
                +1  5411     ;-  - - -
                +1  5412     ;- - - - - - - - - -
                +1  5413     ;adec..adec+9
                +1  5414     ;ст            мл
21CD 7848       +1  5415     upakB:  mov             r0,#bufind+8;
21CF 795C       +1  5416                     mov             r1,#adec+9
21D1 7F05       +1  5417                     mov             r7,#5
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    86

21D3 C3         +1  5418     upab:   clr             c
21D4 E6         +1  5419                     mov             a,@r0
21D5 9430       +1  5420                     subb    a,#30h
21D7 F7         +1  5421                     mov             @r1,a
21D8 18         +1  5422                     dec             r0
21D9 19         +1  5423                     dec             r1
21DA DFF7       +1  5424                     djnz    r7,upab
21DC C21B       +1  5425                     clr                     bitznB
21DE E543       +1  5426                     mov             a,bufind+3
21E0 B42D02     +1  5427                     cjne            a,#2dh,abret
21E3 D21B       +1  5428                     setb            bitznB
21E5            +1  5429     abret:
21E5 22         +1  5430                     ret
21E6            +1  5431     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
21E6 4E6E6AA8   +1  5432                                             db      4eh,6eh,6ah,0a8h;10**9
21EA 43FA0000   +1  5433     CH_500:         db              43h,0fah,00,00;1fah=500
21EE 4856D800   +1  5434     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
21F2 49742400   +1  5435     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5436     
                +1  5437     
                +1  5438     
                +1  5439     ;управление AD7731
                +1  5440     ;r4=b1 r5=b2
21F6            +1  5441     iniacp: ;управление AD7731
21F6 7403       +1  5442                             mov             a,#03
                +1  5443     
21F8 120000   F +1  5444                             call    write
21FB EC         +1  5445                             mov             a,r4;#80h
21FC 120000   F +1  5446                             call    write
21FF ED         +1  5447                             mov             a,r5;#04
2200 120000   F +1  5448                             call    write
2203 7402       +1  5449                             mov             a,#02
2205 120000   F +1  5450                             call    write
2208 74A1       +1  5451                             mov             a,#0a1h
220A 120000   F +1  5452                             call    write
220D 7474       +1  5453                             mov             a,#74h
220F 120000   F +1  5454                             call    write
2212 2095FD     +1  5455                             jb              p1.5,$;p1.3,$
2215 7402       +1  5456                             mov             a,#02
2217 120000   F +1  5457                             call    write
221A 7481       +1  5458                             mov             a,#81h
221C 120000   F +1  5459                             call    write
221F 7474       +1  5460                             mov             a,#74h
2221 120000   F +1  5461                             call    write
2224 2095FD     +1  5462                             jb              p1.5,$;p1.3,$
2227 7402       +1  5463                             mov             a,#02
2229 120000   F +1  5464                             call    write
222C 7421       +1  5465                             mov             a,#21h
222E 120000   F +1  5466                             call    write
2231 7474       +1  5467                             mov             a,#74h
2233 120000   F +1  5468                             call    write
2236 22         +1  5469                             ret
                +1  5470                             ;;;;;;;;;;;;;;;;
                +1  5471     ;;;;;;;;;;;;;;;;;
                +1  5472     ;;;;;;;;;;;;;;;;;
2237 0000       +1  5473     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
2239 6000       +1  5474                                     db              60h,00h;40h,04h         ;10s
223B 6000       +1  5475                                     db              60h,00;40h,04h          ;1s
223D 6000       +1  5476                                     db              60h,00h;40h,04h         ;0,1s
223F 6000       +1  5477                                     db              60h,00h;20h,04h         ;50ms
2241 6000       +1  5478                                     db              60h,00h;20h,04h          ;10ms
2243 1332       +1  5479                                     db              13h,32h         ;2ms
                +1  5480     
                +1  5481     ;загр В1,В2 в завис от Т                                
2245 799A       +1  5482     loab12:                 mov             r1,#parT
2247 900000   F +1  5483                                     mov             dptr,#tabB1_2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    87

224A E7         +1  5484                                     mov             a,@r1
224B 23         +1  5485                                     rl              a;*2
224C FF         +1  5486                                     mov             r7,a                    ;save a
224D 93         +1  5487                                     movc    a,@a+dptr
224E FC         +1  5488                                     mov             r4,a   ;b1
224F 0F         +1  5489                                     inc             r7
2250 EF         +1  5490                                     mov             a,r7
2251 93         +1  5491                                     movc    a,@a+dptr
2252 FD         +1  5492                                     mov             r5,a
                +1  5493                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5494                             
2253 22         +1  5495                                     ret
                +1  5496     
                +1  5497     
2254 7852       +1  5498     loadr2: mov             r0,#abin+3              ;r2..r5
2256 E6         +1  5499                     mov             a,@r0                   ; ст мл   
2257 FA         +1  5500                     mov             r2,a
2258 18         +1  5501                     dec             r0
2259 E6         +1  5502                     mov             a,@r0
225A FB         +1  5503                     mov             r3,a
225B 18         +1  5504                     dec             r0
225C E6         +1  5505                     mov             a,@r0
225D FC         +1  5506                     mov             r4,a
225E 18         +1  5507                     dec             r0
225F E6         +1  5508                     mov             a,@r0
2260 FD         +1  5509                     mov             r5,a
2261 22         +1  5510                     ret
                +1  5511                                             
                +1  5512      ;;;;;;;;;;;;;;;;;;;      
                +1  5513      ;загрузка KD в зависимости от диап изм  
                +1  5514      ;koef->r8..r11
2262 78AE       +1  5515     loadKD:                 mov             r0,#diap
2264 E6         +1  5516                                     mov             a,@r0
2265 900000   F +1  5517                                     mov             dptr,#diKDn
2268 75F004     +1  5518                                     mov             b,#4
226B A4         +1  5519                                     mul             ab
226C FF         +1  5520                                     mov             r7,a;save
226D 93         +1  5521                                     movc    a,@a+dptr
226E F508       +1  5522                                     mov             r8,a
2270 A3         +1  5523                                     inc             dptr
2271 EF         +1  5524                                     mov             a,r7
2272 93         +1  5525                                     movc    a,@a+dptr
2273 F509       +1  5526                                     mov             r9,a
2275 A3         +1  5527                                     inc             dptr
2276 EF         +1  5528                                     mov             a,r7
2277 93         +1  5529                                     movc    a,@a+dptr
2278 F50A       +1  5530                                     mov             r10,a
227A A3         +1  5531                                     inc             dptr
227B EF         +1  5532                                     mov             a,r7
227C 93         +1  5533                                     movc    a,@a+dptr
227D F50B       +1  5534                                     mov             r11,a
227F 22         +1  5535                                     ret
                +1  5536     
2280 3F506B7B   +1  5537      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2284 3F507FCC   +1  5538                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2288 3F4F9D0B   +1  5539                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
228C 3F4FE869   +1  5540                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
2290 3F50294A   +1  5541                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
2294 3F50639E   +1  5542                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
2298 3F4BC9F0   +1  5543                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    88

229C 3F4C063B   +1  5544                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
22A0 3F50EFDD   +1  5545                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
22A4 3F512AD9   +1  5546                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5547     
22A8 00000039   +1  5548     ch57:   db      00,00,00,39h;57
22AC 00000014   +1  5549     ch20:   db      00,00,00,14h;20
                +1  5550     
                +1  5551     ;загр ус для тестов ацп 
                +1  5552     ;dptr-
22B0 78B1       +1  5553     lotpus: mov             r0,#vichR
22B2 B6210D     +1  5554                                     cjne    @r0,#21h,te22
22B5 900000   F +1  5555                                     mov                     dptr,#tabt11;заслать ус 11А
22B8 E4         +1  5556     lotp:           clr             a
22B9 93         +1  5557                             movc    a,@a+dptr                               ;high byte
22BA F584       +1  5558                             mov             p4,a
22BC A3         +1  5559                             inc             dptr
22BD E4         +1  5560                             clr             a
22BE 93         +1  5561                             movc    a,@a+dptr                               ;low byte
22BF F585       +1  5562                             mov             p5,a
22C1 22         +1  5563                             ret
22C2 B62205     +1  5564     te22:                   cjne    @r0,#22h,te23
22C5 900000   F +1  5565                             mov                     dptr,#tabt9;заслать ус 9А       
22C8 80EE       +1  5566                             jmp                     lotp
                +1  5567     
22CA 900000   F +1  5568     te23:   mov                     dptr,#tabt7;заслать ус 7А       
22CD 80E9       +1  5569                             jmp                     lotp
                +1  5570     
                +1  5571     
                +1  5572     
                +1  5573     
                +1  5574     
22CF 02030405   +1  5575     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
22D3 06070809                
22D7 0A0B                    
                +1  5576     
22D9 78AE       +1  5577     findR:                  mov                     r0,#diap
22DB E6         +1  5578                                                     mov                     a,@r0
22DC 900000   F +1  5579                                                     mov                     dptr,#Tabn
22DF 93         +1  5580                                                     movc            a,@a+dptr
22E0 22         +1  5581                                                     ret
                +1  5582     ;bufind=30h..39h                                                                           
                                           ;
22E1 C219       +1  5583     vvchif:                 clr             bitmig
22E3 79B2       +1  5584                                     mov             r1,#marker
22E5 E7         +1  5585                                     mov             a,@r1                   ;изм цифры
22E6 7840       +1  5586                                     mov             r0,#bufind                      ;0000
22E8 28         +1  5587                                     add             a,r0
22E9 F8         +1  5588                                     mov             r0,a
22EA 06         +1  5589                                     inc             @r0
22EB B63A03     +1  5590                                     cjne    @r0,#3ah,chif
22EE 7630       +1  5591                                     mov             @r0,#30h
22F0 22         +1  5592                                     ret
22F1 C3         +1  5593     chif:           clr                     c
22F2 7430       +1  5594                                     mov                     a,#30h
22F4 96         +1  5595                                     subb            a,@r0
22F5 4002       +1  5596                                     jc                      chif5
22F7 7630       +1  5597                                     mov             @r0,#30h
22F9 22         +1  5598     chif5:  ret
                +1  5599     
22FA 80E5       +1  5600     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  5601     
22FC B641FB     +1  5602     vvnol31:        cjne            @r0,#41h,vvnol41
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    89

22FF 800A       +1  5603                                             jmp                     chifour
2301 B631F8     +1  5604     vvnol23:        cjne            @r0,#31h,vvnol31
2304 8005       +1  5605                                             jmp                     chifour 
                +1  5606     
2306 78B0       +1  5607     vvchibl:        mov                     r0,#level
2308 B623F6     +1  5608                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
230B C219       +1  5609     chifour:                clr             bitmig
230D 79B2       +1  5610                                     mov             r1,#marker
230F E7         +1  5611                                     mov             a,@r1                   ;изм цифры
2310 7840       +1  5612                                     mov             r0,#bufind                      ;1..4
2312 28         +1  5613                                     add             a,r0
2313 F8         +1  5614                                     mov             r0,a
2314 06         +1  5615                                     inc             @r0
2315 B63504     +1  5616                                     cjne    @r0,#35h,chifb
2318 7631       +1  5617                                     mov             @r0,#31h
231A 8006       +1  5618                                     jmp             chifb1
231C B63003     +1  5619     chifb:  cjne    @r0,#30h,chifb1
231F 7631       +1  5620                                     mov             @r0,#31h
2321 22         +1  5621                                     ret
2322            +1  5622     chifb1:;;;;;;;;;;
2322 C3         +1  5623                                     clr                     c
2323 7430       +1  5624                                     mov                     a,#30h
2325 96         +1  5625                                     subb            a,@r0
2326 4002       +1  5626                                     jc                      chifl5
2328 7630       +1  5627                                     mov             @r0,#30h
232A 22         +1  5628     chifl5: ret
                +1  5629     ;;;;;;;;;;;;;
232B 22         +1  5630             ret
                +1  5631       ;перевод маркера влево
232C            +1  5632     marle:  
232C C219       +1  5633                     clr             bitmig
                +1  5634                     ;mov            savba,#0   нельзя обнулять
232E 78B2       +1  5635             mov             r0,#marker
2330 16         +1  5636                     dec             @r0
2331 E6         +1  5637                     mov             a,@r0
2332 C3         +1  5638                     clr             c
2333 953A       +1  5639                     subb    a,movleft         ;крайне левое положение
2335 5001       +1  5640                     jnc             rler
2337 06         +1  5641                     inc             @r0
2338 22         +1  5642     rler:   ret
                +1  5643         
                +1  5644     ;перевод маркера вправо
2339 C219       +1  5645     marri:  clr             bitmig
233B 78B2       +1  5646                     mov             r0,#marker
233D 06         +1  5647                     inc         @r0
233E E53B       +1  5648                     mov             a,movrig           ;крайне правое положение
2340 C3         +1  5649                     clr             c
2341 96         +1  5650                     subb    a,@r0
2342 5001       +1  5651                     jnc             rrir
2344 16         +1  5652                     dec             @r0
2345 22         +1  5653     rrir:   ret
                +1  5654         
                +1  5655     ;konstA->bufind+4..bufind+7
2346 78BC       +1  5656     outA:           mov                     r0,#konstA
2348 120000   F +1  5657                                     call            resar2
234B 120343     +1  5658                                     call            ftol                    ;->hex
234E 784F       +1  5659                                     mov             r0,#abin
2350 120000   F +1  5660                                     call            saver2
2353 7853       +1  5661                                     mov                     r0,#adec
2355 7952       +1  5662                                     mov             r1,#abin+3
2357 120000   F +1  5663                                     call            bindec
235A 785C       +1  5664                                     mov                     r0,#adec+9
235C 7947       +1  5665                                     mov                     r1,#bufind+7
235E 7F04       +1  5666                                     mov                     r7,#4
2360 E6         +1  5667     outa2:  mov             a,@r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    90

2361 2430       +1  5668                               add           a,#30h
2363 F7         +1  5669                                     mov             @r1,a
2364 19         +1  5670                                     dec             r1
2365 18         +1  5671                                     dec             r0
2366 DFF8       +1  5672                                     djnz    r7,outa2
2368 22         +1  5673                                     ret
                +1  5674                                             
                +1  5675     ;konstB->bufind+4..bufind+8
2369 78C0       +1  5676     outB:           mov                     r0,#konstB
236B 120000   F +1  5677                                     call            resar2
236E EA         +1  5678                                     mov                     a,r2
236F 5480       +1  5679                                     anl                     a,#80h
2371 6007       +1  5680                                     jz                      outb3
2373 EA         +1  5681     mov                     a,r2
2374 547F       +1  5682                                     anl                     a,#7fh
2376 FA         +1  5683                                     mov                     r2,a
2377 75432D     +1  5684                                     mov                     bufind+3,#2dh
237A 120343     +1  5685     outb3:  call            ftol                    ;->hex
237D 784F       +1  5686                                     mov             r0,#abin
237F 120000   F +1  5687                                     call            saver2
2382 7853       +1  5688                                     mov                     r0,#adec
2384 7952       +1  5689                                     mov             r1,#abin+3
2386 120000   F +1  5690                                     call            bindec
2389 785C       +1  5691                                     mov                     r0,#adec+9
238B 7948       +1  5692                                     mov                     r1,#bufind+8
238D 7F05       +1  5693                                     mov                     r7,#5
238F E6         +1  5694     outb2:  mov             a,@r0
2390 2430       +1  5695                               add           a,#30h
2392 F7         +1  5696                                     mov             @r1,a
2393 19         +1  5697                                     dec             r1
2394 18         +1  5698                                     dec             r0
2395 DFF8       +1  5699                                     djnz    r7,outb2
2397 22         +1  5700                                     ret
                +1  5701     
                +1  5702     
                +1  5703     ;пп мигания индикации
2398 78B2       +1  5704     mign:           mov             r0,#marker
                +1  5705                                     
239A B6FF03     +1  5706                                     cjne    @r0,#0ffh,mignn
                +1  5707                                     ;реж изм мигает *
239D C219       +1  5708                                     clr             bitmig
239F 22         +1  5709                                     ret
                +1  5710     
23A0            +1  5711     mignn:                  ;clr            c
23A0 7440       +1  5712                                     mov             a,#bufind
23A2 26         +1  5713                                     add             a,@r0                   ;a=bufind+marker
23A3 F9         +1  5714                                     mov             r1,a
23A4 201907     +1  5715                                     jb              bitmig,onmig
23A7 873C       +1  5716                                     mov             savba,@r1
                +1  5717                             ;       mov             a,@r1
                +1  5718                             ;       mov             savba,a
23A9 7720       +1  5719                                     mov             @r1,#" "
                +1  5720                                     
23AB D219       +1  5721                                     setb    bitmig
23AD 22         +1  5722                                     ret
                +1  5723     
23AE A73C       +1  5724     onmig:                  mov             @r1,savba
                +1  5725                                     ;mov            a,savba
                +1  5726                                     ; mov           @r1,a
23B0 C219       +1  5727                                     clr             bitmig
23B2 120000   F +1  5728                                     call    z_01s
23B5 22         +1  5729                                     ret
                +1  5730     ;номер ошибки bufind+6
23B6 900000   F +1  5731     error:          mov             dptr,#teERR
23B9 120000   F +1  5732                                             call    lotext
23BC 853946     +1  5733                                             mov             bufind+6,nuerr
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    91

23BF 22         +1  5734                                     ret
                +1  5735     
                +1  5736     
23C0            +1  5737     textT:          
23C0 FD543D32   +1  5738     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
23C4 6D67FDFD                
23C8 FDFD                    
23CA FD543D31   +1  5739     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
23CE 306D67FD                
23D2 FDFD                    
23D4 FD543D35   +1  5740                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
23D8 306D67FD                
23DC FDFD                    
23DE FD543D64   +1  5741                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
23E2 3167FDFD                
23E6 FDFD                    
23E8 20202054   +1  5742                             db              " "," "," ","T","=",31h,67h," "," "," "
23EC 3D316720                
23F0 2020                    
23F2 2020543D   +1  5743                             db              " "," ","T","=",31h,30h,67h," "," "," "  
23F6 31306720                
23FA 2020                    
                +1  5744     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5745     
23FC 42753474   +1  5746     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
2400 79767454                
2404 7720                    
2406 20553D20   +1  5747     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
240A 20202020                
240E 2065                    
2410 20423D2B   +1  5748     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2414 20202020                
2418 2020                    
241A 20207145   +1  5749     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
241E 48722020                
2422 2020                    
                +1  5750     
2424 20544579   +1  5751     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2428 542D7433                
242C 7120                    
242E 54457954   +1  5752     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
2432 20523520                
2436 2020                    
2438 20794B30   +1  5753     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
243C 50205235                
2440 2020                    
2442 20204142   +1  5754     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
2446 4B202020                
244A 2020                    
244C 204B4176   +1  5755     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
2450 74735020                
2454 202020                  
                +1  5756     
2457 20544579   +1  5757     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
245B 54202020                
245F 5431                    
2461 20544579   +1  5758     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
2465 54202020                
2469 5432                    
246B 20544579   +1  5759     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
246F 54202020                
2473 5433                    
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    92

                +1  5760     
                +1  5761     
2475 20353736   +1  5762     teS57_6:                db              " ",35h,37h,36h," "," "," "," "," "," ";57.6
2479 20202020                
247D 2020                    
247F 20313932   +1  5763     teS19_2:                db              " ",31h,39h,32h," "," "," "," "," "," ";19,2
2483 20202020                
2487 2020                    
                +1  5764     
2489 61415030   +1  5765     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
248D 76772030                
2491 3030                    
2493 20303030   +1  5766     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2497 30302020                
249B 2041                    
249D 74337120   +1  5767     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
24A1 4B304879                
24A5 5420                    
24A7 20204275   +1  5768     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
24AB 58307820                
24AF 2020                    
24B1 2020304C   +1  5769     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
24B5 4C202020                
24B9 2020                    
24BB 20203034   +1  5770     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
24BF 7479544B                
24C3 4120                    
24C5 20203041   +1  5771     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
24C9 71795420                
24CD 20203341   +1  5772     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
24D1 61747977                
24D5 2020                    
24D7 20206150   +1  5773     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
24DB 30797130                
24DF 545020                  
24E2 20206130   +1  5774     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
24E6 76484162                
24EA 2020                    
24EC 20744854   +1  5775     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
24F0 20303030                
24F4 3067                    
24F6 20207376   +1  5776     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
24FA 304B2020                
24FE 2020                    
2500 20207376   +1  5777     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2504 304B2030                
2508 2020                    
250A 30547934   +1  5778     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,30h;ОТСЧЕТ 000
250E 45542030                
2512 3030                    
2514 79544154   +1  5779     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2518 74795474                
251C 4B41                    
251E 71744820   +1  5780     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
2522 20202020                
2526 2020                    
2528 71414B79   +1  5781     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
252C 20202020                
2530 2020                    
2532 79504578   +1  5782     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2536 20202020                
253A 2020                    
                +1  5783      ;;;;;;;;;;;;;;;;;;;         
253C 2020304C   +1  5784     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
2540 4C204920                
2544 2020                    
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    93

2546 2020304C   +1  5785     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
254A 4C206620                
254E 2020                    
2550 20204552   +1  5786     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2554 52202020                
2558 2020                    
255A 2020454E   +1  5787     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
255E 44202020                
2562 2020                    
                +1  5788     
                +1  5789     ;dptr+4-приемник
                +1  5790     ;dptr-источник
                +1  5791     ;r7-кол байт  
2564            +1  5792     xCIKLWR:
2564 7F04       +1  5793                             mov             r7,#4   
2566 E0         +1  5794     lwrx:   movx    a,@dptr
2567 C083       +1  5795                             push    dph
2569 C082       +1  5796                             push    dpl
256B A3         +1  5797                             inc             dptr
256C A3         +1  5798                             inc             dptr
256D A3         +1  5799                             inc             dptr
256E A3         +1  5800                             inc             dptr
256F F0         +1  5801                             movx    @dptr,a
2570 D082       +1  5802                             pop             dpl
2572 D083       +1  5803                             pop             dph
                +1  5804                             
2574 A3         +1  5805                             inc             dptr
2575 DFEF       +1  5806                             djnz    r7,lwrx
2577 22         +1  5807                             ret
                +1  5808     ;r2..r5->@dptr..@dptr+3                         
2578 EA         +1  5809     saveIr2:                mov     a,r2
2579 F0         +1  5810                                             movx    @dptr,a
257A A3         +1  5811                                             inc     dptr
257B EB         +1  5812                                             mov     a,r3
257C F0         +1  5813                                             movx    @dptr,a
257D A3         +1  5814                                             inc     dptr
257E EC         +1  5815                                             mov     a,r4
257F F0         +1  5816                                             movx    @dptr,a
2580 A3         +1  5817                                             inc     dptr
2581 ED         +1  5818                                             mov     a,r5
2582 F0         +1  5819                                             movx    @dptr,a
2583 22         +1  5820                                             ret
                +1  5821     ;r2..r5-> @r0..@r0+3
                +1  5822     
2584 EA         +1  5823     saver2:         mov     a,r2
2585 F6         +1  5824                                             mov     @r0,a
2586 08         +1  5825                                             inc     r0
2587 EB         +1  5826                                             mov     a,r3
2588 F6         +1  5827                                             mov     @r0,a
2589 08         +1  5828                                             inc     r0
258A EC         +1  5829                                             mov     a,r4
258B F6         +1  5830                                             mov     @r0,a
258C 08         +1  5831                                             inc     r0
258D ED         +1  5832                                             mov     a,r5
258E F6         +1  5833                                             mov     @r0,a
258F 22         +1  5834                                             ret 
2590 7F50       +1  5835     clmassix:       mov                     r7,#50h;28h
2592 900100     +1  5836                             mov     dptr,#MASS0        ;забить массив A нулями
2595 7400       +1  5837     clmax:          mov          a,#00h
2597 F0         +1  5838                  movx    @dptr,a
2598 A3         +1  5839                  inc     dptr
2599 DFFA       +1  5840                 djnz                r7,clmax                
259B F56E       +1  5841                  mov     chmas,a
259D C201       +1  5842                  clr     bitmas
259F 22         +1  5843                 ret
                +1  5844     ;r1-яЁшхьшъ
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    94

                +1  5845     ;r0-шёЄюўшъ
                +1  5846     ;r7-ъюы срщЄ  
25A0            +1  5847     CIKLWR:
25A0 7F04       +1  5848                             mov             r7,#4   
25A2 E6         +1  5849     lwr:    mov     a,@r0
25A3 F7         +1  5850                             mov     @r1,a
25A4 09         +1  5851                             inc             r1
25A5 08         +1  5852                             inc             r0
25A6 DFFA       +1  5853                             djnz    r7,lwr
25A8 22         +1  5854                             ret     
                +1  5855     ;r2..r5-> @dptr..@dptr+3
                +1  5856     
25A9 120000   F +1  5857     zmul:   call    maform
25AC 120000   F +1  5858                     call    lmul
25AF 120000   F +1  5859                     call    bform
25B2 22         +1  5860                     ret
                +1  5861     
25B3 120000   F +1  5862     zdiv:   call    maform
25B6 120000   F +1  5863                     call    divide
25B9 120000   F +1  5864                     call    bform
25BC 22         +1  5865                     ret
                +1  5866     
25BD EA         +1  5867     maform: mov a,r2
25BE 33         +1  5868             rlc a
25BF 5006       +1  5869             jnc             fo1m
25C1 D202       +1  5870                     setb            znmat
25C3 120000   F +1  5871                     call   form4
25C6 22         +1  5872                     ret
25C7 C202       +1  5873     fo1m:   clr             znmat
25C9 22         +1  5874                     ret
                +1  5875     
25CA 300203     +1  5876     bform:  jnb             znmat,fo2m
25CD 120000   F +1  5877                     call    form4
25D0 22         +1  5878     fo2m:   ret
                +1  5879       
                +1  5880     ;r2..r5 яхЁхтхёЄш т фюя ъюф
25D1 ED         +1  5881     form4:          mov a,r5
25D2 F4         +1  5882             cpl a
25D3 2401       +1  5883             add a,#1
25D5 FD         +1  5884             mov r5,a
25D6 EC         +1  5885             mov a,r4
25D7 F4         +1  5886             cpl a
25D8 3400       +1  5887             addc    a,#0
25DA FC         +1  5888             mov r4,a
25DB EB         +1  5889             mov a,r3
25DC F4         +1  5890                 cpl a
25DD 3400       +1  5891             addc    a,#0
25DF FB         +1  5892             mov r3,a
25E0 EA         +1  5893             mov a,r2
25E1 F4         +1  5894             cpl a
25E2 3400       +1  5895             addc    a,#0
25E4 FA         +1  5896             mov r2,a
25E5 22         +1  5897             ret
                +1  5898     
25E6 120000   F +1  5899     zcmp:   call            maform
25E9 120000   F +1  5900                     call            lcmp
25EC C0D0       +1  5901                     push            psw
25EE 120000   F +1  5902                     call    bform
25F1 D0D0       +1  5903                     pop             psw
25F3 22         +1  5904                     ret
                +1  5905     
                +1  5906     
                +1  5907     ;@r0..@r0+3->r8..r11
                +1  5908     
25F4 E6         +1  5909     resar8: mov     a,@r0
25F5 F508       +1  5910                     mov     ltemp,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    95

25F7 08         +1  5911                     inc     r0
25F8 E6         +1  5912                     mov     a,@r0
25F9 F509       +1  5913                     mov     ltemp+1,a
25FB 08         +1  5914                     inc     r0
25FC E6         +1  5915                     mov     a,@r0
25FD F50A       +1  5916                     mov     ltemp+2,a
25FF 08         +1  5917                     inc     r0
2600 E6         +1  5918                     mov     a,@r0
2601 F50B       +1  5919                     mov     ltemp+3,a
2603 22         +1  5920                     ret
                +1  5921     
                +1  5922     ;
                +1  5923     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  5924     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  5925     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  5926     ;r2 a    ўшёыю 180
                +1  5927     ;00 b4
                +1  5928     ;т_ї- mabin..mabin+2
                +1  5929     ;     80 01 00
                +1  5930      
2604 C8         +1  5931     cond:   xch     a,r0    
2605 F9         +1  5932                     mov     r1,a
2606 C8         +1  5933                     xch     a,r0
2607 7C03       +1  5934                     mov     r4,#03
2609 7700       +1  5935     dcoa:   mov     @r1,#00
260B 09         +1  5936                     inc     r1
260C DCFB       +1  5937                     djnz    r4,dcoa
260E 7B10       +1  5938                     mov     r3,#10h
2610 C3         +1  5939     dcob:   clr     c
2611 33         +1  5940                     rlc     a
2612 CA         +1  5941                     xch     a,r2
2613 33         +1  5942                     rlc     a
2614 CA         +1  5943                     xch     a,r2
2615 C8         +1  5944                     xch     a,r0
2616 F9         +1  5945                     mov     r1,a
2617 C8         +1  5946                     xch     a,r0
2618 7C03       +1  5947                     mov     r4,#03
261A FD         +1  5948                     mov     r5,a
261B E7         +1  5949     dcoc:   mov     a,@r1 
261C 37         +1  5950                     addc    a,@r1
261D D4         +1  5951                     da      a
261E F7         +1  5952                     mov     @r1,a
261F 09         +1  5953                     inc     r1
2620 DCF9       +1  5954                     djnz    r4,dcoc
2622 ED         +1  5955                     mov     a,r5
2623 4003       +1  5956                     jc      dcod
2625 DBE9       +1  5957                     djnz    r3,dcob
2627 C3         +1  5958                     clr     c
2628 00         +1  5959     dcod:   nop
2629 22         +1  5960                     ret
                +1  5961     
262A 8A08       +1  5962     move28: mov     ltemp,r2                        ;r2..r5->ltemp
262C 850309     +1  5963                     mov     ltemp+1,3
262F 85040A     +1  5964                     mov     ltemp+2,4
2632 85050B     +1  5965                     mov     ltemp+3,5
2635 22         +1  5966                     ret
                +1  5967     
                +1  5968     ;@r0..@r0+3->r2..r5
                +1  5969     
2636 E6         +1  5970     resar2: mov     a,@r0
2637 FA         +1  5971                     mov     r2,a
2638 08         +1  5972                     inc     r0
2639 E6         +1  5973                     mov     a,@r0
263A FB         +1  5974                     mov     r3,a
263B 08         +1  5975                     inc     r0
263C E6         +1  5976                     mov     a,@r0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    96

263D FC         +1  5977                     mov     r4,a
263E 08         +1  5978                     inc     r0
263F E6         +1  5979                     mov     a,@r0
2640 FD         +1  5980                     mov     r5,a
2641 22         +1  5981                     ret
                +1  5982     
                +1  5983     ;25mkc !!!!!!!!!!!!!!!1
2642 7B4B       +1  5984     z_9:      mov R3,#4Bh      ;загрузка числа
2644 DBFE       +1  5985                    djnz R3,$
2646 22         +1  5986               ret
                +1  5987     
                +1  5988     ;запись   передаваемый байт в acc
                +1  5989     ;передача байта послед кодом старшими разрядами  вперед
2647 7A08       +1  5990     write:     mov R2,#8
2649 C3         +1  5991                             clr  c  
264A C297       +1  5992     wr1:            clr             p1.7;P1.2
264C 00         +1  5993                         nop 
264D 33         +1  5994                             rlc A
264E 9296       +1  5995                             mov P1.6,C;P1.1,C
2650 120000   F +1  5996                        call tim2
2653 D297       +1  5997                        setb P1.7;P1.2
2655 120000   F +1  5998                call tim2
2658 DAF0       +1  5999                       djnz R2,wr1
265A C296       +1  6000                       clr P1.6;P1.1
265C 22         +1  6001                                              ret
                +1  6002     
                +1  6003     ;чтение номера байта с индикатора(2байта)
                +1  6004     ;bufind+8..bufind+9
                +1  6005     ;-  - - -
                +1  6006     ;- - - - - - - - - -
                +1  6007     ;adec..adec+9
                +1  6008     ;ст            мл
265D 7847       +1  6009     upak1:  mov             r0,#bufind+7;
265F 795C       +1  6010                                     mov             r1,#adec+9
2661 C3         +1  6011                                     clr             c
2662 E6         +1  6012                                     mov             a,@r0
2663 9430       +1  6013                                     subb    a,#30h
2665 FF         +1  6014                                     mov             r7,a
2666 C3         +1  6015                                     clr             c
2667 9405       +1  6016                                     subb    a,#5
2669 4004       +1  6017                                     jc              upk1
266B 7404       +1  6018                                     mov             a,#4
266D 8001       +1  6019                                     jmp             upk2
266F EF         +1  6020     upk1:           mov             a,r7
2670 F7         +1  6021     upk2:           mov             @r1,a
2671 22         +1  6022                                     ret  
                +1  6023     ;r1-мл байт счетчика ячеек
2672 C3         +1  6024     chminus:        clr                     c
2673 E7         +1  6025                                             mov                     a,@r1
2674 9401       +1  6026                                             subb            a,#01
2676 F7         +1  6027                                             mov                     @r1,a;low
2677 19         +1  6028                                             dec                     r1
2678 E7         +1  6029                                             mov                     a,@r1
2679 9400       +1  6030                                             subb            a,#00
267B F7         +1  6031                                             mov                     @r1,a
267C 22         +1  6032                                             ret
                +1  6033     
                +1  6034     
                +1  6035     ;чтение номера байта с индикатора(4байта)
                +1  6036     ;bufind+6..bufind+9
                +1  6037     ;-  - - -
                +1  6038     ;- - - - - - - - - -
                +1  6039     ;adec..adec+9
                +1  6040     ;ст            мл
267D 7848       +1  6041     upak4:  mov             r0,#bufind+8;
267F 795C       +1  6042                     mov             r1,#adec+9
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    97

2681 7F04       +1  6043                     mov             r7,#4
2683 C3         +1  6044     upaa:   clr             c
2684 E6         +1  6045                     mov             a,@r0
2685 9430       +1  6046                     subb    a,#30h
2687 F7         +1  6047                     mov             @r1,a
2688 18         +1  6048                     dec             r0
2689 19         +1  6049                     dec             r1
268A DFF7       +1  6050                     djnz    r7,upaa
268C 22         +1  6051                     ret
                +1  6052     
                +1  6053     ;dptr-адр ячейки 1й соотв блока 
268D E538       +1  6054     adrblok:         mov            a,nblok
268F C3         +1  6055                              clr            c
2690 9401       +1  6056                              subb           a,#1
2692 FD         +1  6057                              mov            r5,a
2693 E4         +1  6058                              clr            a
2694 FC         +1  6059                              mov            r4,a
2695 FB         +1  6060                              mov            r3,a
2696 FA         +1  6061                              mov            r2,a
2697 900000   F +1  6062                                     mov                     dptr,#ch320h
269A 120000   F +1  6063                                     CALL   ldc_ltemp                 ; ltemp <-320
269D 120000   F +1  6064                                     call            lmul;r2..r5
26A0 ED         +1  6065                                     mov                     a,r5
26A1 2450       +1  6066                                     add                     a,#50h
26A3 F582       +1  6067                                     mov                     dpl,a
26A5 EC         +1  6068                                     mov                     a,r4
26A6 3401       +1  6069                                     addc            a,#01           
26A8 F583       +1  6070                                     mov                     dph,a                   ;dptr-
26AA 22         +1  6071                                     ret
                +1  6072     
                +1  6073     ;
                +1  6074     ;saven_bl<-dptr  адрес след ячейки внешн озу 
26AB 79D3       +1  6075     save_hl:                mov             r1,#saven_bl
26AD E583       +1  6076                                                     mov             a,dph
26AF F7         +1  6077                                               mov           @r1,a
26B0 09         +1  6078                                                     inc             r1
26B1 E582       +1  6079                                                     mov             a,dpl
26B3 F7         +1  6080                                                     mov             @r1,a
                +1  6081                                                     ;;;;;;;;;не конец ли блока
                +1  6082                             
                +1  6083     
26B4 79D6       +1  6084                                     mov                     r1,#volume+1;work+1
26B6 120000   F +1  6085                                     call            chminus
26B9 78D5       +1  6086                                     mov             r0,#volume
26BB E6         +1  6087                                     mov             a,@r0
26BC 30E708     +1  6088                                     jnb             acc.7,noendli
26BF C20A       +1  6089                                     clr                     bitbon                  ;блок закон
                             чился
26C1 534BFD     +1  6090                                     anl                     bufind+11,#0fdh
26C4 120000   F +1  6091                                     call            ind
                +1  6092                             
26C7            +1  6093     noendli:        
26C7 22         +1  6094                                             ret
                +1  6095     ;загрузка dptr сохр ранее значением адреса ячейки
26C8 79D3       +1  6096     resa_hl:                mov             r1,#saven_bl
26CA E7         +1  6097                                                     mov             a,@r1
26CB F583       +1  6098                                                     mov             dph,a
                +1  6099                                               
26CD 09         +1  6100                                                     inc             r1
26CE E7         +1  6101                                                     mov             a,@r1
26CF F582       +1  6102                                                     mov             dpl,a
26D1 22         +1  6103                                                     ret
                +1  6104     ;загрузка rez_A3 в соотв яч внешн озу
26D2 789C       +1  6105     loA3_X:                 mov             r0,#rez_A3
26D4 120000   F +1  6106                                                     call    resar2
                +1  6107                                                     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    98

26D7 EA         +1  6108                                                     mov             a,r2                    ;
26D8 F0         +1  6109                                                     movx    @dptr,a
26D9 A3         +1  6110                                                     inc             dptr
26DA EB         +1  6111                                                     mov             a,r3
26DB F0         +1  6112                                                     movx    @dptr,a
26DC A3         +1  6113                                                     inc             dptr
26DD EC         +1  6114                                                     mov             a,r4
26DE F0         +1  6115                                                     movx    @dptr,a
26DF A3         +1  6116                                                     inc             dptr
26E0 ED         +1  6117                                                     mov             a,r5
26E1 F0         +1  6118                                                     movx    @dptr,a
26E2 A3         +1  6119                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
26E3 22         +1  6120                                                     ret             ;в ячейке saven_bl
                +1  6121     ;чтение в rez_A3 из соотв яч внешн озу
26E4            +1  6122     reA3_X:         
                +1  6123                                                     
26E4 E0         +1  6124                                                     movx    a,@dptr
26E5 FA         +1  6125                                                     mov             r2,a
26E6 A3         +1  6126                                                     inc             dptr
26E7 E0         +1  6127                                                     movx    a,@dptr
26E8 FB         +1  6128                                                     mov             r3,a
26E9 A3         +1  6129                                                     inc             dptr
26EA E0         +1  6130                                                     movx    a,@dptr
26EB FC         +1  6131                                                     mov             r4,a
26EC A3         +1  6132                                                     inc             dptr
26ED E0         +1  6133                                                     movx    a,@dptr
26EE FD         +1  6134                                                     mov             r5,a
26EF A3         +1  6135                                                     inc             dptr
26F0 789C       +1  6136                                                     mov             r0,#rez_A3
26F2 120000   F +1  6137                                                     call    saver2
26F5 22         +1  6138                                                     ret
                +1  6139     ;;;;;;;;;;;;;;;;;
                +1  6140     ;разбивка внешнего озу
                +1  6141     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6142     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6143     ;150h..46fh 1й блок
                +1  6144     ;470h..78fh     2й блок
                +1  6145     ;790h..aaf      3й блок
                +1  6146     ;ab0h..dcfh 4й блок
                +1  6147     ;dd0..fffh свободная область
                +1  6148     ;
                    6149     
                    6150     ;$include (d:\amp\sarifm3.asm) 
                +1  6151     ; ” ©« SARIFM.ASM 8.11.95
                +1  6152     ;файл арифметики
                +1  6153       
  0008          +1  6154     ltemp    equ       8           ;long temporary
  000C          +1  6155     xtemp    equ       12          ;other temporaries
  000A          +1  6156     DECSIZE  EQU       10
  0004          +1  6157     NUMSIZE  EQU       4
  0004          +1  6158     RR4  EQU       4
  0005          +1  6159     RR5  EQU       5
                +1  6160     
                +1  6161                                                     
                +1  6162     
                +1  6163                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6164     ;             using    0              ; Specify register bank for the following
                +1  6165                                            ; program code.
                +1  6166     ;                                               cseg AT 400h
                +1  6167     ; Arithmetics:  CLEARING string
                +1  6168     ; Input:
                +1  6169     ; R0 - pointer to string,
                +1  6170     ; NUMSIZE - byte count if CLRNUM used,
                +1  6171     ; DECSIZE - byte count if CLRDEC used,
                +1  6172     ; R2 - byte count if CLEAR used;
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE    99

                +1  6173     ; Output:  none.
                +1  6174     
26F6            +1  6175     CLRDEC:
26F6 7A0A       +1  6176         MOV R2, #DECSIZE
26F8 8002       +1  6177         SJMP    CLEAR
26FA            +1  6178     CLRNUM:
26FA 7A04       +1  6179         MOV R2, #NUMSIZE
                +1  6180         ;JMP    CLEAR
26FC            +1  6181     CLEAR:
26FC E4         +1  6182         CLR A
26FD F6         +1  6183     CLR11:  MOV @R0, A
26FE 08         +1  6184         INC R0
26FF DAFC       +1  6185         DJNZ    R2, CLR11
2701 22         +1  6186         RET
                +1  6187     
                +1  6188     ;**********************************
                +1  6189     ;mov    r1,#abin+3
                +1  6190     ;mov    r0,#adec
                +1  6191     ; _ _ _ _
                +1  6192     ;     03ff
                +1  6193     ;ст     мл   - вход
                +1  6194     ; _ _ _ _ _ _ _ _ _ _
                +1  6195     ;             1 0 2 3
                +1  6196     ;ст                мл 
                +1  6197     ;**********************************
                +1  6198     
2702            +1  6199     BINDEC:
                +1  6200     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6201     ; Input:
                +1  6202     ; R0 - pointer to destination (high digit is the first),
                +1  6203     ; R1 - pointer to source,
                +1  6204     ; NUMSIZE - byte count in binary number;
                +1  6205     ; DECSIZE - byte count in decimal number;
                +1  6206     ; Output:  none.
                +1  6207     ; Source saved
                +1  6208     
                +1  6209         ; 1. Clear result
2702 7A05       +1  6210         MOV R2, #DECSIZE/2
2704 120000   F +1  6211         CALL   CLEAR  ; incrementing R0
                +1  6212     
                +1  6213         ; 2. Prepare convertion
2707 18         +1  6214         DEC R0
2708 8804       +1  6215         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
270A 8905       +1  6216         MOV RR5, R1 ; R5 - pointer to low byte of binary number
270C 7B20       +1  6217         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6218     
                +1  6219         ; 3. Convert cyrcle
270E            +1  6220     BIN30:
                +1  6221     
                +1  6222         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
270E A905       +1  6223         MOV R1, RR5
2710 7A04       +1  6224         MOV R2, #NUMSIZE
2712 E7         +1  6225     BIN31:  MOV A, @R1
2713 33         +1  6226         RLC A
2714 F7         +1  6227         MOV @R1, A
2715 19         +1  6228         DEC R1
2716 DAFA       +1  6229         DJNZ    R2, BIN31
2718 A905       +1  6230         MOV R1, RR5
271A E7         +1  6231         MOV A, @R1
271B 92E0       +1  6232         MOV ACC.0, C
271D F7         +1  6233         MOV @R1, A
                +1  6234     
                +1  6235         ; 3.2. Doubling decimal result with <Carry>
271E A804       +1  6236         MOV R0, RR4
2720 7A05       +1  6237         MOV R2, #DECSIZE/2
2722 E6         +1  6238     BIN32:  MOV A, @R0
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   100

2723 36         +1  6239         ADDC    A, @R0
2724 D4         +1  6240         DA  A
2725 F6         +1  6241         MOV @R0, A
2726 18         +1  6242         DEC R0
2727 DAF9       +1  6243         DJNZ    R2, BIN32
                +1  6244     
                +1  6245         ; 3.3. End of convert cyrcle
2729 DBE3       +1  6246         DJNZ    R3, BIN30
                +1  6247     
                +1  6248         ; 4. Make bytes from half-bytes
272B E8         +1  6249         MOV A, R0
272C 240A       +1  6250         ADD A, #DECSIZE
272E F8         +1  6251         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
272F A904       +1  6252         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2731 7A05       +1  6253         MOV R2, #DECSIZE/2
2733 E7         +1  6254     BIN41:  MOV A, @R1
2734 540F       +1  6255         ANL A, #00FH
2736 F6         +1  6256         MOV @R0, A
2737 18         +1  6257         DEC R0
2738 E7         +1  6258         MOV A, @R1
2739 C4         +1  6259         SWAP    A
273A 540F       +1  6260         ANL A, #00FH
273C F6         +1  6261         MOV @R0, A
273D 18         +1  6262         DEC R0
273E 19         +1  6263         DEC R1
273F DAF2       +1  6264         DJNZ    R2, BIN41
2741 22         +1  6265         RET
                +1  6266     
                +1  6267     
                +1  6268     ;*********************************
                +1  6269     ;mov    r0,#abin
                +1  6270     ;mov    r1,#adec
                +1  6271     ; _ _ _ _       -выход
                +1  6272     ; ff0000
                +1  6273     ;0004
                +1  6274     ;мл      ст
                +1  6275     
                +1  6276     ;ст                       мл
                +1  6277     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6278     ;                       2 5 5
                +1  6279     ;                   1 0 2 4
                +1  6280     
2742            +1  6281     DECBIN:
                +1  6282     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6283     ; Input:
                +1  6284     ; R0 - pointer to destination,
                +1  6285     ; R1 - pointer to source (high digit is the first),
                +1  6286     ; NUMSIZE - byte count in binary number;
                +1  6287     ; DECSIZE - byte count in decimal number;
                +1  6288     ; Output:  none
                +1  6289     ; Source cleared
                +1  6290     
                +1  6291         ; 1. Clear result
2742 120000   F +1  6292         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6293     
                +1  6294         ; 2. Prepare convertion
2745 18         +1  6295         DEC R0
2746 8804       +1  6296         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2748 8905       +1  6297         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
274A 900000   F +1  6298         MOV DPTR, #DECT2
274D 7B20       +1  6299         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6300     
                +1  6301         ; 3. Convert cyrcle
274F            +1  6302     DEC30:
                +1  6303     
                +1  6304         ; 3.1. Divide decimal number by 2 and prepare <Carry>
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   101

274F C3         +1  6305         CLR C
2750 A905       +1  6306         MOV R1, RR5
2752 7A0A       +1  6307         MOV R2, #DECSIZE
2754 E7         +1  6308     DEC31:  MOV A, @R1
2755 540F       +1  6309         ANL A, #00FH
2757 92E4       +1  6310         MOV ACC.4, C
2759 93         +1  6311         MOVC    A,@A+DPTR
275A F7         +1  6312         MOV @R1, A
275B A2E7       +1  6313         MOV C, ACC.7
275D 09         +1  6314         INC R1
275E DAF4       +1  6315         DJNZ    R2, DEC31
                +1  6316     
                +1  6317         ; 3.2. Rotate binary result one bit to right with <Carry>
2760 A804       +1  6318         MOV R0, RR4
2762 7A04       +1  6319         MOV R2, #NUMSIZE
2764 E6         +1  6320     DEC32:  MOV A, @R0
2765 13         +1  6321         RRC A
2766 F6         +1  6322         MOV @R0, A
2767 18         +1  6323         DEC R0
2768 DAFA       +1  6324         DJNZ    R2, DEC32
                +1  6325     
                +1  6326         ; 3.3. End of convert cyrcle
276A DBE3       +1  6327         DJNZ    R3, DEC30
276C 22         +1  6328         RET
                +1  6329     
276D 00800181   +1  6330     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2771 02820383                
2775 0484                    
2777 00000000   +1  6331         DB  00,00,00,00,00,00
277B 0000                    
277D 05850686   +1  6332         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2781 07870888                
2785 0989                    
                +1  6333     
                +1  6334     ;   Long comparison
                +1  6335     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6336     ;   flags and acc set as though a long subtraction was done.
                +1  6337     ;*******************************
                +1  6338     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6339     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6340     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6341     ;*******************************
2787            +1  6342     lcmp:
2787 C3         +1  6343         clr c
2788 EA         +1  6344         mov a,r2
2789 9508       +1  6345         subb    a,8
278B 700F       +1  6346         jnz done
278D EB         +1  6347         mov a,r3
278E 9509       +1  6348         subb    a,9
2790 7008       +1  6349         jnz done1
2792 EC         +1  6350         mov a,r4
2793 950A       +1  6351         subb    a,10
2795 7003       +1  6352         jnz done1
2797 ED         +1  6353         mov a,r5
2798 950B       +1  6354         subb    a,11
279A            +1  6355     done1:
279A C2D2       +1  6356         clr ov      ;overflow is significant only for top byte
279C            +1  6357     done:
279C 22         +1  6358         ret
                +1  6359     
                +1  6360     ;   Load long into r2-5 from [dptr]
                +1  6361     
279D            +1  6362     ldc_long:
279D E583       +1  6363         mov a,dph       ;is it in on board memory
279F 6010       +1  6364         jz  onboard     ;yes
27A1 E4         +1  6365         clr a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   102

27A2 93         +1  6366         movc    a,@a+dptr
27A3 FA         +1  6367         mov r2,a
27A4 7401       +1  6368         mov a,#1
27A6 93         +1  6369         movc    a,@a+dptr
27A7 FB         +1  6370         mov r3,a
27A8 7402       +1  6371         mov a,#2
27AA 93         +1  6372         movc    a,@a+dptr
27AB FC         +1  6373         mov r4,a
27AC 7403       +1  6374         mov a,#3
27AE 93         +1  6375         movc    a,@a+dptr
27AF FD         +1  6376         mov r5,a
27B0 22         +1  6377         ret
27B1            +1  6378     onboard:
27B1 A882       +1  6379         mov r0,dpl
27B3 E6         +1  6380         mov a,@r0
27B4 FA         +1  6381         mov r2,a
27B5 08         +1  6382         inc r0
27B6 E6         +1  6383         mov a,@r0
27B7 FB         +1  6384         mov r3,a
27B8 08         +1  6385         inc r0
27B9 E6         +1  6386         mov a,@r0
27BA FC         +1  6387         mov r4,a
27BB 08         +1  6388         inc r0
27BC E6         +1  6389         mov a,@r0
27BD FD         +1  6390         mov r5,a
27BE 22         +1  6391         ret
                +1  6392     
                +1  6393     ;**************************************
                +1  6394     ;загрузить ltemp...+3 из памяти программ
                +1  6395     ;mov    dptr,#CH5
                +1  6396     ;call   ldc_ltemp        ltemp <--5
                +1  6397     ;**************************************
27BF            +1  6398     ldc_ltemp:
27BF E583       +1  6399         mov a,dph       ;is it in on board memory
27C1 6014       +1  6400         jz  oboard      ;yes
27C3 E4         +1  6401         clr a
27C4 93         +1  6402         movc    a,@a+dptr
27C5 F508       +1  6403         mov 8,a
27C7 7401       +1  6404         mov a,#1
27C9 93         +1  6405         movc    a,@a+dptr
27CA F509       +1  6406         mov 9,a
27CC 7402       +1  6407         mov a,#2
27CE 93         +1  6408         movc    a,@a+dptr
27CF F50A       +1  6409         mov 10,a
27D1 7403       +1  6410         mov a,#3
27D3 93         +1  6411         movc    a,@a+dptr
27D4 F50B       +1  6412         mov 11,a
27D6 22         +1  6413         ret
27D7            +1  6414     oboard:
27D7 A882       +1  6415         mov r0,dpl
27D9 8608       +1  6416         mov 8,@r0
27DB 08         +1  6417         inc r0
27DC 8609       +1  6418         mov 9,@r0
27DE 08         +1  6419         inc r0
27DF 860A       +1  6420         mov 10,@r0
27E1 08         +1  6421         inc r0
27E2 860B       +1  6422         mov 11,@r0
27E4 22         +1  6423         ret
                +1  6424     
                +1  6425     ;*****************************
                +1  6426     ;mov    dptr,#k1
                +1  6427     ;call   ldx_long
                +1  6428     ;k1->r2..r5
                +1  6429     ;*****************************
                +1  6430     ;   Load long into r2-5 from [dptr]
                +1  6431     ;
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   103

                +1  6432     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
27E5            +1  6433     ldx_long:
27E5 E583       +1  6434         mov a,dph       ;is it in on board memory
27E7 6014       +1  6435         jz  onboar1        ;yes
27E9 C082       +1  6436         push    dpl
27EB C083       +1  6437         push    dph
27ED E0         +1  6438         movx    a,@dptr
27EE FA         +1  6439         mov r2,a
27EF A3         +1  6440         inc dptr
27F0 E0         +1  6441         movx    a,@dptr
27F1 FB         +1  6442         mov r3,a
27F2 A3         +1  6443         inc dptr
27F3 E0         +1  6444         movx    a,@dptr
27F4 FC         +1  6445         mov r4,a
27F5 A3         +1  6446         inc dptr
27F6 E0         +1  6447         movx    a,@dptr
27F7 FD         +1  6448         mov r5,a
27F8 D083       +1  6449         pop dph
27FA D082       +1  6450         pop dpl
27FC 22         +1  6451         ret
27FD            +1  6452     onboar1:
27FD A882       +1  6453         mov r0,dpl
27FF E6         +1  6454         mov a,@r0
2800 FA         +1  6455         mov r2,a
2801 08         +1  6456         inc r0
2802 E6         +1  6457         mov a,@r0
2803 FB         +1  6458         mov r3,a
2804 08         +1  6459         inc r0
2805 E6         +1  6460         mov a,@r0
2806 FC         +1  6461         mov r4,a
2807 08         +1  6462         inc r0
2808 E6         +1  6463         mov a,@r0
2809 FD         +1  6464         mov r5,a
280A 22         +1  6465         ret
                +1  6466     
                +1  6467     ;*********************************
                +1  6468     ;mov    dptr,#k2
                +1  6469     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6470     ;**********************************
280B            +1  6471     ldx_ltemp:
280B E583       +1  6472         mov a,dph       ;is it in on board memory
280D 6010       +1  6473         jz  oboard1     ;yes
280F E0         +1  6474         movx    a,@dptr
2810 F508       +1  6475         mov 8,a
2812 A3         +1  6476         inc dptr
2813 E0         +1  6477         movx    a,@dptr
2814 F509       +1  6478         mov 9,a
2816 A3         +1  6479         inc dptr
2817 E0         +1  6480         movx    a,@dptr
2818 F50A       +1  6481         mov 10,a
281A A3         +1  6482         inc dptr
281B E0         +1  6483         movx    a,@dptr
281C F50B       +1  6484         mov 11,a
281E 22         +1  6485         ret
281F            +1  6486     oboard1:
281F A882       +1  6487         mov r0,dpl
2821 8608       +1  6488         mov 8,@r0
2823 08         +1  6489         inc r0
2824 8609       +1  6490         mov 9,@r0
2826 08         +1  6491         inc r0
2827 860A       +1  6492         mov 10,@r0
2829 08         +1  6493         inc r0
282A 860B       +1  6494         mov 11,@r0
282C 22         +1  6495         ret
                +1  6496     ;   Long division routines for 8051
                +1  6497     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   104

                +1  6498     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6499     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6500     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6501     ;   r1 must be saved by the caller.
                +1  6502     ;   This is long unsigned division.
                +1  6503     
                +1  6504     
                +1  6505     ;   Register usage:
                +1  6506     ;       r0 loop counter
                +1  6507     ;       xtemp (12-15) accumulates quotient
                +1  6508     ;       r5-r2 holds dividend
                +1  6509     ;       ltemp holds divisor
                +1  6510     
                +1  6511     ;************************************
                +1  6512     ;r2..r5-делимое
                +1  6513     ;ltemp..-делитель
                +1  6514     ;частное -r2..r5
                +1  6515     ;*************************************
282D            +1  6516     divide:
282D E4         +1  6517         clr a
282E F8         +1  6518         mov r0,a        ;initialize count
282F F50C       +1  6519         mov xtemp,a     ;zero quotient
2831 F50D       +1  6520         mov xtemp+1,a
2833 F50E       +1  6521         mov xtemp+2,a
2835 F50F       +1  6522         mov xtemp+3,a
2837 ED         +1  6523         mov a,r5        ;check for zero dividend
2838 4C         +1  6524         orl a,r4
2839 4B         +1  6525         orl a,r3
283A 4A         +1  6526         orl a,r2
283B 600B       +1  6527         jz  jfinis
283D E508       +1  6528         mov a,ltemp     ;check for zero divisor
283F 4509       +1  6529         orl a,ltemp+1
2841 450A       +1  6530         orl a,ltemp+2
2843 450B       +1  6531         orl a,ltemp+3
2845 7037       +1  6532         jnz midl
2847 22         +1  6533         ret
                +1  6534     
2848 020000   F +1  6535     jfinis: jmp finis
                +1  6536     
284B            +1  6537     loops:
284B EA         +1  6538         mov a,r2
284C C3         +1  6539         clr c
284D 9508       +1  6540         subb    a,ltemp+0   ;is divisor greater than dividend yet
284F 4033       +1  6541         jc  yes     ;yes, go no further
2851 7013       +1  6542         jnz no
2853 EB         +1  6543         mov a,r3
2854 9509       +1  6544         subb    a,ltemp+1
2856 402C       +1  6545         jc  yes
2858 700C       +1  6546         jnz no
285A EC         +1  6547         mov a,r4
285B 950A       +1  6548         subb    a,ltemp+2
285D 4025       +1  6549         jc  yes
285F 7005       +1  6550         jnz no
2861 ED         +1  6551         mov a,r5
2862 950B       +1  6552         subb    a,ltemp+3
2864 401E       +1  6553         jc  yes
2866            +1  6554     no:
2866 E50B       +1  6555         mov a,ltemp+3   ;shift divisor up one bit
2868 250B       +1  6556         add a,ltemp+3
286A F50B       +1  6557         mov ltemp+3,a
286C E50A       +1  6558         mov a,ltemp+2
286E 350A       +1  6559         addc    a,ltemp+2
2870 F50A       +1  6560         mov ltemp+2,a
2872 E509       +1  6561         mov a,ltemp+1
2874 3509       +1  6562         addc    a,ltemp+1
2876 F509       +1  6563         mov ltemp+1,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   105

2878 E508       +1  6564         mov a,ltemp+0
287A 3508       +1  6565         addc    a,ltemp+0
287C F508       +1  6566         mov ltemp+0,a
287E            +1  6567     midl:
287E 08         +1  6568         inc r0      ;increment count
287F E508       +1  6569         mov a,ltemp+0   ;check for safe to shift some more
2881 30E7C7     +1  6570         jnb acc.7,loops  ;loop if top bit clear
2884            +1  6571     yes:
2884 E508       +1  6572         mov a,ltemp+0
2886 C3         +1  6573         clr c
2887 9A         +1  6574         subb    a,r2        ;can we subtract now?
2888 401A       +1  6575         jc  dosub       ;yes, go and do it
288A 7015       +1  6576         jnz nosub
288C E509       +1  6577         mov a,ltemp+1
288E 9B         +1  6578         subb    a,r3
288F 4013       +1  6579         jc  dosub
2891 700E       +1  6580         jnz nosub
2893 E50A       +1  6581         mov a,ltemp+2
2895 9C         +1  6582         subb    a,r4
2896 400C       +1  6583         jc  dosub
2898 7007       +1  6584         jnz nosub
289A E50B       +1  6585         mov a,ltemp+3
289C 9D         +1  6586         subb    a,r5
289D 4005       +1  6587         jc  dosub
289F 6003       +1  6588         jz  dosub
28A1            +1  6589     nosub:
28A1 C3         +1  6590         clr c
28A2 8012       +1  6591         sjmp    dosh
28A4            +1  6592     dosub:
28A4 C3         +1  6593         clr c       ;subtract divisor from dividend
28A5 ED         +1  6594         mov a,r5
28A6 950B       +1  6595         subb    a,ltemp+3
28A8 FD         +1  6596         mov r5,a
28A9 EC         +1  6597         mov a,r4
28AA 950A       +1  6598         subb    a,ltemp+2
28AC FC         +1  6599         mov r4,a
28AD EB         +1  6600         mov a,r3
28AE 9509       +1  6601         subb    a,ltemp+1
28B0 FB         +1  6602         mov r3,a
28B1 EA         +1  6603         mov a,r2
28B2 9508       +1  6604         subb    a,ltemp+0
28B4 FA         +1  6605         mov r2,a
28B5 D3         +1  6606         setb    c       ;now set bit for quotient
28B6            +1  6607     dosh:
28B6 E50F       +1  6608         mov a,xtemp+3
28B8 33         +1  6609         rlc a
28B9 F50F       +1  6610         mov xtemp+3,a
28BB E50E       +1  6611         mov a,xtemp+2
28BD 33         +1  6612         rlc a
28BE F50E       +1  6613         mov xtemp+2,a
28C0 E50D       +1  6614         mov a,xtemp+1
28C2 33         +1  6615         rlc a
28C3 F50D       +1  6616         mov xtemp+1,a
28C5 E50C       +1  6617         mov a,xtemp+0
28C7 33         +1  6618         rlc a
28C8 F50C       +1  6619         mov xtemp+0,a
28CA E508       +1  6620         mov a,ltemp+0       ;shift divisor down
28CC C3         +1  6621         clr c
28CD 13         +1  6622         rrc a
28CE F508       +1  6623         mov ltemp+0,a
28D0 E509       +1  6624         mov a,ltemp+1
28D2 13         +1  6625         rrc a
28D3 F509       +1  6626         mov ltemp+1,a
28D5 E50A       +1  6627         mov a,ltemp+2
28D7 13         +1  6628         rrc a
28D8 F50A       +1  6629         mov ltemp+2,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   106

28DA E50B       +1  6630         mov a,ltemp+3
28DC 13         +1  6631         rrc a
28DD F50B       +1  6632         mov ltemp+3,a
                +1  6633     
28DF D8A3       +1  6634         djnz    r0,yes      ;and continue with the rest
                +1  6635     
28E1            +1  6636     finis:
28E1 8D0B       +1  6637         mov ltemp+3,r5
28E3 8C0A       +1  6638         mov ltemp+2,r4
28E5 8B09       +1  6639         mov ltemp+1,r3
28E7 8A08       +1  6640         mov ltemp+0,r2
28E9 AD0F       +1  6641         mov r5,xtemp+3
28EB AC0E       +1  6642         mov r4,xtemp+2
28ED AB0D       +1  6643         mov r3,xtemp+1
28EF AA0C       +1  6644         mov r2,xtemp+0
28F1 22         +1  6645         ret         ;and return with the satisfaction of a job well done
                +1  6646     
                +1  6647     
                +1  6648     ;   Long multiplication
                +1  6649     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  6650     ;   other in ltemp. It really doesn't matter which one is where.
                +1  6651     
                +1  6652     ;**********************************
                +1  6653     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  6654     ;ст  мл
                +1  6655     ;**********************************
28F2            +1  6656     llmul:
28F2            +1  6657     almul:
28F2            +1  6658     lmul:
28F2 ED         +1  6659         mov a,r5        ;low order byte
28F3 850BF0     +1  6660         mov b,ltemp+3       ;times low order byte
28F6 A4         +1  6661         mul ab
28F7 F50F       +1  6662         mov xtemp+3,a       ;store low
28F9 85F00E     +1  6663         mov xtemp+2,b   ;and high
28FC ED         +1  6664         mov a,r5        ;low order
28FD 850AF0     +1  6665         mov b,ltemp+2   ;times next
2900 A4         +1  6666         mul ab
2901 250E       +1  6667         add a,xtemp+2   ;add in
2903 F50E       +1  6668         mov xtemp+2,a
2905 E5F0       +1  6669         mov a,b
2907 3400       +1  6670         addc    a,#0
2909 F50D       +1  6671         mov xtemp+1,a
290B ED         +1  6672         mov a,r5
290C 8509F0     +1  6673         mov b,ltemp+1
290F A4         +1  6674         mul ab
2910 250D       +1  6675         add a,xtemp+1
2912 F50D       +1  6676         mov xtemp+1,a
2914 E5F0       +1  6677         mov a,b
2916 3400       +1  6678         addc    a,#0
2918 F50C       +1  6679         mov xtemp+0,a
291A ED         +1  6680         mov a,r5
291B 8508F0     +1  6681         mov b,ltemp+0
291E A4         +1  6682         mul ab
291F 250C       +1  6683         add a,xtemp+0
2921 F50C       +1  6684         mov xtemp+0,a
2923 EC         +1  6685         mov a,r4
2924 850BF0     +1  6686         mov b,ltemp+3
2927 A4         +1  6687         mul ab
2928 250E       +1  6688         add a,xtemp+2
292A F50E       +1  6689         mov xtemp+2,a
292C E5F0       +1  6690         mov a,b
292E 350D       +1  6691         addc    a,xtemp+1
2930 F50D       +1  6692         mov xtemp+1,a
2932 E50C       +1  6693         mov a,xtemp+0
2934 3400       +1  6694         addc    a,#0
2936 F50C       +1  6695         mov xtemp+0,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   107

2938 EC         +1  6696         mov a,r4
2939 850AF0     +1  6697         mov b,ltemp+2
293C A4         +1  6698         mul ab
293D 250D       +1  6699         add a,xtemp+1
293F F50D       +1  6700         mov xtemp+1,a
2941 E5F0       +1  6701         mov a,b
2943 350C       +1  6702         addc    a,xtemp+0
2945 F50C       +1  6703         mov xtemp+0,a
2947 EC         +1  6704         mov a,r4
2948 8509F0     +1  6705         mov b,ltemp+1
294B A4         +1  6706         mul ab
294C 250C       +1  6707         add a,xtemp+0
294E F50C       +1  6708         mov xtemp+0,a
                +1  6709     
2950 EB         +1  6710         mov a,r3
2951 850BF0     +1  6711         mov b,ltemp+3
2954 A4         +1  6712         mul ab
2955 250D       +1  6713         add a,xtemp+1
2957 F50D       +1  6714         mov xtemp+1,a
2959 E5F0       +1  6715         mov a,b
295B 350C       +1  6716         addc    a,xtemp+0
295D F50C       +1  6717         mov xtemp+0,a
295F EB         +1  6718         mov a,r3
2960 850AF0     +1  6719         mov b,ltemp+2
2963 A4         +1  6720         mul ab
2964 250C       +1  6721         add a,xtemp+0
2966 F50C       +1  6722         mov xtemp+0,a
                +1  6723     
2968 EA         +1  6724         mov a,r2
2969 850BF0     +1  6725         mov b,ltemp+3
296C A4         +1  6726         mul ab
296D 250C       +1  6727         add a,xtemp+0
296F FA         +1  6728         mov r2,a
2970 AB0D       +1  6729         mov r3,xtemp+1
2972 AC0E       +1  6730         mov r4,xtemp+2
2974 AD0F       +1  6731         mov r5,xtemp+3
                +1  6732     
2976 22         +1  6733         ret         ;all done
                +1  6734     ;******************************
                +1  6735     ;из содержимого  r2-r5  вычесть
                +1  6736     ;содержимое          ltemp..ltemp+3
                +1  6737     ;******************************
2977            +1  6738     llsub:
2977            +1  6739      lsub:
2977 ED         +1  6740         mov a,r5
2978 C3         +1  6741         clr c
2979 950B       +1  6742         subb    a,11
297B FD         +1  6743         mov r5,a
297C EC         +1  6744         mov a,r4
297D 950A       +1  6745         subb    a,10
297F FC         +1  6746         mov r4,a
2980 EB         +1  6747         mov a,r3
2981 9509       +1  6748         subb    a,9
2983 FB         +1  6749         mov r3,a
2984 EA         +1  6750         mov a,r2
2985 9508       +1  6751         subb    a,8
2987 FA         +1  6752         mov r2,a
2988 22         +1  6753         ret
                +1  6754     
                +1  6755     ;***********************************************
                +1  6756     ;                                                      ст мл
                +1  6757     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6758     ;  r0- адрес младшего байта !!!
                +1  6759     ;результат- r2..r5
                +1  6760     ;***********************************************
                +1  6761     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   108

2989 C3         +1  6762     ladd:    clr       c
298A ED         +1  6763          mov       a,r5
298B 26         +1  6764          add       a,@r0
298C FD         +1  6765          mov       r5,a
298D 18         +1  6766          dec       r0
298E EC         +1  6767          mov       a,r4
298F 36         +1  6768          addc      a,@r0
2990 FC         +1  6769          mov       r4,a
2991 18         +1  6770          dec       r0
2992 EB         +1  6771          mov       a,r3
2993 36         +1  6772          addc      a,@r0
2994 FB         +1  6773          mov       r3,a
2995 18         +1  6774          dec       r0
2996 EA         +1  6775          mov       a,r2
2997 36         +1  6776          addc      a,@r0
2998 FA         +1  6777          mov       r2,a
2999 22         +1  6778          ret
                +1  6779     ;***********************************************
                +1  6780     ;                                                      ст мл
                +1  6781     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6782     ;  r0- адрес младшего байта !!!
                +1  6783     ;результат- r2..r5
                +1  6784     ;***********************************************
                +1  6785     
299A C3         +1  6786     laddx:    clr       c
299B E2         +1  6787                                             movx            a,@r0
299C 2D         +1  6788                                             add                     a,r5
299D FD         +1  6789               mov     r5,a
299E 18         +1  6790                             dec     r0
299F E2         +1  6791                             movx    a,@r0
29A0 3C         +1  6792                             addc    a,r4
29A1 FC         +1  6793                             mov     r4,a
29A2 18         +1  6794                             dec     r0
29A3 E2         +1  6795                             movx    a,@r0
29A4 3B         +1  6796                             addc    a,r3
29A5 FB         +1  6797                             mov     r3,a
29A6 18         +1  6798                             dec     r0
29A7 E2         +1  6799                             movx    a,@r0
29A8 3A         +1  6800                             addc    a,r2
29A9 FA         +1  6801                             mov       r2,a
29AA 22         +1  6802                             ret
                +1  6803     
                +1  6804     ;***********************************************
                +1  6805     ;                                                      ст мл
                +1  6806     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6807     ;  dptr- адрес младшего байта !!!
                +1  6808     ;результат- r2..r5
                +1  6809     ;***********************************************
                +1  6810     
29AB C3         +1  6811     addx:    clr       c
29AC E0         +1  6812                                             movx            a,@dptr
29AD 2D         +1  6813                                             add                     a,r5
29AE FD         +1  6814               mov     r5,a
29AF 120000   F +1  6815                             call            dedptr;dec     dptr
29B2 E0         +1  6816                             movx    a,@dptr
29B3 3C         +1  6817                             addc    a,r4
29B4 FC         +1  6818                             mov     r4,a
29B5 120000   F +1  6819                             call            dedptr;dec     dptr
29B8 E0         +1  6820                             movx    a,@dptr
29B9 3B         +1  6821                             addc    a,r3
29BA FB         +1  6822                             mov     r3,a
29BB 120000   F +1  6823                             call            dedptr;dec     dptr
29BE E0         +1  6824                             movx    a,@dptr
29BF 3A         +1  6825                             addc    a,r2
29C0 FA         +1  6826                             mov       r2,a
29C1 22         +1  6827                             ret
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   109

                +1  6828     
29C2 C0D0       +1  6829     dedptr:         push    psw
29C4 C3         +1  6830                                             clr             c
29C5 E582       +1  6831                                             mov             a,dpl
29C7 9401       +1  6832                                             subb    a,#1
29C9 F582       +1  6833                                             mov             dpl,a
29CB E583       +1  6834                                             mov             a,dph
29CD 9400       +1  6835                                             subb    a,#0
29CF F583       +1  6836                                             mov             dph,a
29D1 D0D0       +1  6837                                             pop             psw
29D3 22         +1  6838                                             ret
                    6839     
                    6840     ;$include (d:\amp\floatm.asm)
                +1  6841     ;       Copyright (C) 1988 HI-TECH Software
                +1  6842     
                +1  6843     ;       Single Precision Floating point arithmetic routines for 8051
                +1  6844     
                +1  6845     ;       The format of floating point numbers is as follows:
                +1  6846     
                +1  6847     ;       -----------------
                +1  6848     ;       *     sign      *  1 bit
                +1  6849     ;       -----------------
                +1  6850     ;       *   exponent    *  8 bits
                +1  6851     ;       -----------------
                +1  6852     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  6853     ;       -----------------
                +1  6854     
                +1  6855     
                +1  6856     ;       As usual for the 8051 the memory layout has the most significant
                +1  6857     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  6858     ;       lowest address.
                +1  6859     
                +1  6860     ;       Calling conventions:
                +1  6861     
                +1  6862     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  6863     ;
                +1  6864     ;       Return value is in r2-r5
                +1  6865     
                +1  6866     ;       Naming conventions: A routine name is constructed by
                +1  6867     
                +1  6868     ;             ASOP
                +1  6869     
                +1  6870     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  6871     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  6872     ;       Conversion routines are named
                +1  6873     
                +1  6874     ;               AStof
                +1  6875     
                +1  6876     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  6877     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  6878     ;       Conversion from float to integer is ftol.
                +1  6879     
                +1  6880     ;               .ORG  5000h
                +1  6881     ;               .CODE
                +1  6882     ;       seg     c_text
                +1  6883     
                +1  6884     ;;      $MOD812
----            +1  6885             CSEG
                +1  6886             ;ORG 1000h
                +1  6887     
                +1  6888                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  6889             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  6890     
                +1  6891     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  6892     ;       macros
                +1  6893     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   110

                +1  6894     saveregs        macro
                +1  6895             push    7
                +1  6896             push    6
                +1  6897             push    1
                +1  6898             push    0
                +1  6899             endm
                +1  6900     
                +1  6901     restregs        macro
                +1  6902             pop     0
                +1  6903             pop     1
                +1  6904             pop     6
                +1  6905             pop     7
                +1  6906             endm
                +1  6907     
                +1  6908     ;addr   
                +1  6909     dan     macro   pad
                +1  6910             mov     a,r5
                +1  6911             add     a,pad+3
                +1  6912             mov     pad+3,a
                +1  6913             mov     a,pad+2
                +1  6914             addc    a,r4
                +1  6915             mov     pad+2,a
                +1  6916             mov     a,pad+1
                +1  6917             addc    a,r3
                +1  6918             mov     pad+1,a
                +1  6919             mov     a,pad+0
                +1  6920             addc    a,r2
                +1  6921             mov     pad,a
                +1  6922             endm
                +1  6923     
                +1  6924     addl    macro  addr
                +1  6925             mov     a,r5
                +1  6926             add     a,addr+3
                +1  6927             mov     r5,a
                +1  6928             mov     a,addr+2
                +1  6929             addc    a,r4
                +1  6930             mov     r4,a
                +1  6931             mov     a,addr+1
                +1  6932             addc    a,r3
                +1  6933             mov     r3,a
                +1  6934             mov     a,addr+0
                +1  6935             addc    a,r2
                +1  6936             mov     r2,a
                +1  6937             endm
                +1  6938     
                +1  6939     
                +1  6940     add1    macro
                +1  6941             mov     a,r5
                +1  6942             add     a,#1
                +1  6943             mov     r5,a
                +1  6944             clr     a
                +1  6945             addc    a,r4
                +1  6946             mov     r4,a
                +1  6947             clr     a
                +1  6948             addc    a,r3
                +1  6949             mov     r3,a
                +1  6950             clr     a
                +1  6951             addc    a,r2
                +1  6952             mov     r2,a
                +1  6953             endm
                +1  6954     
                +1  6955     shfdn   macro  addr
                +1  6956             clr     c
                +1  6957             mov     a,addr
                +1  6958             rrc     a
                +1  6959             mov     addr,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   111

                +1  6960             mov     a,addr+1
                +1  6961             rrc     a
                +1  6962             mov     addr+1,a
                +1  6963             mov     a,addr+2
                +1  6964             rrc     a
                +1  6965             mov     addr+2,a
                +1  6966             mov     a,addr+3
                +1  6967             rrc     a
                +1  6968             mov     addr+3,a
                +1  6969             endm
                +1  6970     
                +1  6971     shfup   macro  addr
                +1  6972             clr     c
                +1  6973             mov     a,addr+3
                +1  6974             rlc     a
                +1  6975             mov     addr+3,a
                +1  6976             mov     a,addr+2
                +1  6977             rlc     a
                +1  6978             mov     addr+2,a
                +1  6979             mov     a,addr+1
                +1  6980             rlc     a
                +1  6981             mov     addr+1,a
                +1  6982             mov     a,addr
                +1  6983             rlc     a
                +1  6984             mov     addr,a
                +1  6985             endm
                +1  6986     
                +1  6987     rshift  macro
                +1  6988             clr     c
                +1  6989             mov     a,r2
                +1  6990             rrc     a
                +1  6991             mov     r2,a
                +1  6992             mov     a,r3
                +1  6993             rrc     a
                +1  6994             mov     r3,a
                +1  6995             mov     a,r4
                +1  6996             rrc     a
                +1  6997             mov     r4,a
                +1  6998             mov     a,r5
                +1  6999             rrc     a
                +1  7000             mov     r5,a
                +1  7001             endm
                +1  7002     rshift1 macro
                +1  7003             setb    c
                +1  7004             mov     a,r2
                +1  7005             rrc     a
                +1  7006             mov     r2,a
                +1  7007             mov     a,r3
                +1  7008             rrc     a
                +1  7009             mov     r3,a
                +1  7010             mov     a,r4
                +1  7011             rrc     a
                +1  7012             mov     r4,a
                +1  7013             mov     a,r5
                +1  7014             rrc     a
                +1  7015             mov     r5,a
                +1  7016             endm
                +1  7017     
                +1  7018     
                +1  7019     lshift  macro
                +1  7020             mov     a,r5
                +1  7021             rlc     a
                +1  7022             mov     r5,a
                +1  7023             mov     a,r4
                +1  7024             rlc     a
                +1  7025             mov     r4,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   112

                +1  7026             mov     a,r3
                +1  7027             rlc     a
                +1  7028             mov     r3,a
                +1  7029             mov     a,r2
                +1  7030             rlc     a
                +1  7031             mov     r2,a
                +1  7032             endm
                +1  7033     
                +1  7034     neg1    macro
                +1  7035             clr     c
                +1  7036             clr     a
                +1  7037             subb    a,r5
                +1  7038             mov     r5,a
                +1  7039             clr     a
                +1  7040             subb    a,r4
                +1  7041             mov     r4,a
                +1  7042             clr     a
                +1  7043             subb    a,r3
                +1  7044             mov     r3,a
                +1  7045             clr     a
                +1  7046             subb    a,r2
                +1  7047             mov     r2,a
                +1  7048             endm
                +1  7049     
                +1  7050     negm    macro  addr
                +1  7051             clr     c
                +1  7052             clr     a
                +1  7053             subb    a,addr+3
                +1  7054             mov     addr+3,a
                +1  7055             clr     a
                +1  7056             subb    a,addr+2
                +1  7057             mov     addr+2,a
                +1  7058             clr     a
                +1  7059             subb    a,addr+1
                +1  7060             mov     addr+1,a
                +1  7061             clr     a
                +1  7062             subb    a,addr
                +1  7063             mov     addr,a
                +1  7064             endm
                +1  7065     
                +1  7066     copytor macro  addr
                +1  7067             mov     r2,addr
                +1  7068             mov     r3,addr+1
                +1  7069             mov     r4,addr+2
                +1  7070             mov     r5,addr+3
                +1  7071             endm
                +1  7072     
                +1  7073     
                +1  7074     copyrto macro  addr
                +1  7075             mov     addr,r2
                +1  7076             mov     addr+1,r3
                +1  7077             mov     addr+2,r4
                +1  7078             mov     addr+3,r5
                +1  7079             endm
                +1  7080     
                +1  7081     
                +1  7082     ;       Internal representation: in this set of routines a floating number
                +1  7083     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7084     
                +1  7085     ;       Stack offset values
                +1  7086     ;ltemp   equ     28h
                +1  7087     
  0006          +1  7088     cntr    equ     6               ;r6 is the counter
  0007          +1  7089     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7090     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7091     mant1   equ     2               ;mantissa 1 in r2-5
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   113

  0001          +1  7092     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7093     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7094     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7095     
                +1  7096     
                +1  7097     
                +1  7098     
                +1  7099     
                +1  7100     ;DECSIZE EQU     10
                +1  7101     ;NUMSIZE EQU     4
                +1  7102     ;RR4     EQU     4
                +1  7103     ;RR5     EQU     5
                +1  7104     
                +1  7105     ;       unpack1 - unpacks the left operand
                +1  7106     
009E            +1  7107     unpack1:
009E EA         +1  7108             mov     a,r2            ;get sign
009F 5480       +1  7109             anl     a,#80h
00A1 530740     +1  7110             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7111             orl     sign,a          ;store sign
00A6 EB         +1  7112             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7113             rlc     a               ;rotate into carry
00A8 EA         +1  7114             mov     a,r2            ;get rest of exponent
00A9 33         +1  7115             rlc     a               ;and make it 8 bits
00AA F8         +1  7116             mov     r0,a            ;store it
00AB 6006       +1  7117             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7118             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7119             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7120             ret
00B3            +1  7121     zer1:
00B3 E4         +1  7122             clr     a
00B4 FA         +1  7123             mov     r2,a
00B5 FB         +1  7124             mov     r3,a
00B6 FC         +1  7125             mov     r4,a
00B7 FD         +1  7126             mov     r5,a            ;zero mantissa
00B8 F8         +1  7127             mov     r0,a            ;zero exponent
00B9 22         +1  7128             ret
                +1  7129     
                +1  7130     ;       unpack2 - unpacks right operand
                +1  7131     
00BA            +1  7132     unpack2:
00BA E508       +1  7133             mov     a,ltemp         ;get sign
00BC 13         +1  7134             rrc     a               ;shift down
00BD 5440       +1  7135             anl     a,#40h          ;mask out sign
00BF 530780     +1  7136             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7137             orl     sign,a
00C4 E509       +1  7138             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7139             rlc     a               ;rotate into carry
00C7 E508       +1  7140             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7141             rlc     a               ;and make it 8 bits
00CA F9         +1  7142             mov     r1,a            ;store it
00CB 6007       +1  7143             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7144             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7145             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7146             ret
00D4            +1  7147     zer2:
00D4 E4         +1  7148             clr     a
00D5 F508       +1  7149             mov     ltemp,a
00D7 F509       +1  7150             mov     ltemp+1,a
00D9 F50A       +1  7151             mov     ltemp+2,a
00DB F50B       +1  7152             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7153             ret
                +1  7154     
                +1  7155     ;       pack1 - put operand 1 back into float format
                +1  7156     
00DE            +1  7157     pack1:
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   114

00DE E8         +1  7158             mov     a,r0            ;get exponent
00DF C3         +1  7159             clr     c
00E0 13         +1  7160             rrc     a               ;shift down 1 bit
00E1 530780     +1  7161             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7162             orl     a,r7            ;or in sign bit
00E5 FA         +1  7163             mov     r2,a            ;store
00E6 E8         +1  7164             mov     a,r0            ;get other bit
00E7 03         +1  7165             rr      a               ;rotate into hi bit
00E8 5480       +1  7166             anl     a,#80h          ;mask
00EA 53037F     +1  7167             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7168             orl     mant1+1,a       ;put in
00EF 22         +1  7169             ret
                +1  7170     
                +1  7171     
                +1  7172     ;       norm1 - normalize the unpacked value in 1
                +1  7173     
00F0            +1  7174     norm1:
00F0 E8         +1  7175             mov     a,r0            ;get exponent
00F1 60C0       +1  7176             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7177             mov     a,r2            ;get hi byte
00F4 6023       +1  7178             jz      norup           ;zero, so shift up if anything
00F6            +1  7179     nordn:
00F6 EA         +1  7180             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7181             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7182+3           add1                    ;add in a rounding bit
00FA ED         +1  7183+1           mov     a,r5
00FB 2401       +1  7184+1           add     a,#1
00FD FD         +1  7185+1           mov     r5,a
00FE E4         +1  7186+1           clr     a
00FF 3C         +1  7187+1           addc    a,r4
0100 FC         +1  7188+1           mov     r4,a
0101 E4         +1  7189+1           clr     a
0102 3B         +1  7190+1           addc    a,r3
0103 FB         +1  7191+1           mov     r3,a
0104 E4         +1  7192+1           clr     a
0105 3A         +1  7193+1           addc    a,r2
0106 FA         +1  7194+1           mov     r2,a
0107            +1  7195     nordn1:
                +1  7196+3           rshift                  ;shift down 1 bit
0107 C3         +1  7197+1           clr     c
0108 EA         +1  7198+1           mov     a,r2
0109 13         +1  7199+1           rrc     a
010A FA         +1  7200+1           mov     r2,a
010B EB         +1  7201+1           mov     a,r3
010C 13         +1  7202+1           rrc     a
010D FB         +1  7203+1           mov     r3,a
010E EC         +1  7204+1           mov     a,r4
010F 13         +1  7205+1           rrc     a
0110 FC         +1  7206+1           mov     r4,a
0111 ED         +1  7207+1           mov     a,r5
0112 13         +1  7208+1           rrc     a
0113 FD         +1  7209+1           mov     r5,a
0114 08         +1  7210             inc     r0              ;adjust exponent
0115 EA         +1  7211             mov     a,r2            ;test high byte
0116 70DE       +1  7212             jnz     nordn           ;loop
0118 22         +1  7213             ret                     ;done
                +1  7214     
0119            +1  7215     norup:
0119 4B         +1  7216             orl     a,r3
011A 4C         +1  7217             orl     a,r4
011B 4D         +1  7218             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7219             jz      zer1            ;it is - make it true zero
011E            +1  7220     norup1:
011E EB         +1  7221             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7222             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7223             clr     c
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   115

                +1  7224+3           lshift                  ;shift mantissa up
0123 ED         +1  7225+1           mov     a,r5
0124 33         +1  7226+1           rlc     a
0125 FD         +1  7227+1           mov     r5,a
0126 EC         +1  7228+1           mov     a,r4
0127 33         +1  7229+1           rlc     a
0128 FC         +1  7230+1           mov     r4,a
0129 EB         +1  7231+1           mov     a,r3
012A 33         +1  7232+1           rlc     a
012B FB         +1  7233+1           mov     r3,a
012C EA         +1  7234+1           mov     a,r2
012D 33         +1  7235+1           rlc     a
012E FA         +1  7236+1           mov     r2,a
012F 18         +1  7237             dec     r0              ;adjust exponent
0130 80EC       +1  7238             jmp     norup1
0132            +1  7239     norup2:
0132 22         +1  7240             ret                     ;finito
                +1  7241     
                +1  7242     
                +1  7243     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7244     ;       exponents are equal. This requires the smaller number to have
                +1  7245     ;       its exponent incremented and its mantissa shifted right.
                +1  7246     
0133            +1  7247     denorm:
0133 E8         +1  7248             mov     a,r0
0134 C3         +1  7249             clr     c
0135 99         +1  7250             subb    a,r1            ;compare exponents
0136 5029       +1  7251             jnc     up2a            ;shift operand 2
0138            +1  7252     up1:
0138 08         +1  7253             inc     r0              ;increment exponent
                +1  7254+3           rshift                  ;shift mantissa down
0139 C3         +1  7255+1           clr     c
013A EA         +1  7256+1           mov     a,r2
013B 13         +1  7257+1           rrc     a
013C FA         +1  7258+1           mov     r2,a
013D EB         +1  7259+1           mov     a,r3
013E 13         +1  7260+1           rrc     a
013F FB         +1  7261+1           mov     r3,a
0140 EC         +1  7262+1           mov     a,r4
0141 13         +1  7263+1           rrc     a
0142 FC         +1  7264+1           mov     r4,a
0143 ED         +1  7265+1           mov     a,r5
0144 13         +1  7266+1           rrc     a
0145 FD         +1  7267+1           mov     r5,a
0146 E8         +1  7268             mov     a,r0
0147 B501EE     +1  7269             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7270             ret
                +1  7271     
014B            +1  7272     up2:
014B 09         +1  7273             inc     r1              ;increment exponent 2
                +1  7274+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7275+1           clr     c
014D E508       +1  7276+1           mov     a,mant2
014F 13         +1  7277+1           rrc     a
0150 F508       +1  7278+1           mov     mant2,a
0152 E509       +1  7279+1           mov     a,mant2+1
0154 13         +1  7280+1           rrc     a
0155 F509       +1  7281+1           mov     mant2+1,a
0157 E50A       +1  7282+1           mov     a,mant2+2
0159 13         +1  7283+1           rrc     a
015A F50A       +1  7284+1           mov     mant2+2,a
015C E50B       +1  7285+1           mov     a,mant2+3
015E 13         +1  7286+1           rrc     a
015F F50B       +1  7287+1           mov     mant2+3,a
0161            +1  7288     up2a:
0161 E8         +1  7289             mov     a,r0            ;compare exponents
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   116

0162 B501E6     +1  7290             cjne    a,exp2,up2
0165 22         +1  7291             ret                     ;all done
                +1  7292     ;------------------------------------------------------------------
                +1  7293     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7294     
0166            +1  7295     fladd:
                +1  7296+3           saveregs
0166 C007       +1  7297+1           push    7
0168 C006       +1  7298+1           push    6
016A C001       +1  7299+1           push    1
016C C000       +1  7300+1           push    0
016E 119E       +1  7301             call    unpack1
0170 11BA       +1  7302             call    unpack2
0172 3133       +1  7303             call    denorm
0174 E507       +1  7304             mov     a,sign
0176 30E70D     +1  7305             jnb     acc.7,ok1       ;test left sign
                +1  7306+3           neg1                    ;negate op1
0179 C3         +1  7307+1           clr     c
017A E4         +1  7308+1           clr     a
017B 9D         +1  7309+1           subb    a,r5
017C FD         +1  7310+1           mov     r5,a
017D E4         +1  7311+1           clr     a
017E 9C         +1  7312+1           subb    a,r4
017F FC         +1  7313+1           mov     r4,a
0180 E4         +1  7314+1           clr     a
0181 9B         +1  7315+1           subb    a,r3
0182 FB         +1  7316+1           mov     r3,a
0183 E4         +1  7317+1           clr     a
0184 9A         +1  7318+1           subb    a,r2
0185 FA         +1  7319+1           mov     r2,a
0186            +1  7320     ok1:
0186 E507       +1  7321             mov     a,sign
0188 30E615     +1  7322             jnb     acc.6,ok2       ;test right sign
                +1  7323+3           negm    mant2           ;negate op2
018B C3         +1  7324+1           clr     c
018C E4         +1  7325+1           clr     a
018D 950B       +1  7326+1           subb    a,mant2+3
018F F50B       +1  7327+1           mov     mant2+3,a
0191 E4         +1  7328+1           clr     a
0192 950A       +1  7329+1           subb    a,mant2+2
0194 F50A       +1  7330+1           mov     mant2+2,a
0196 E4         +1  7331+1           clr     a
0197 9509       +1  7332+1           subb    a,mant2+1
0199 F509       +1  7333+1           mov     mant2+1,a
019B E4         +1  7334+1           clr     a
019C 9508       +1  7335+1           subb    a,mant2
019E F508       +1  7336+1           mov     mant2,a
01A0            +1  7337     ok2:
                +1  7338+3           addl    mant2           ;add mantissas
01A0 ED         +1  7339+1           mov     a,r5
01A1 250B       +1  7340+1           add     a,mant2+3
01A3 FD         +1  7341+1           mov     r5,a
01A4 E50A       +1  7342+1           mov     a,mant2+2
01A6 3C         +1  7343+1           addc    a,r4
01A7 FC         +1  7344+1           mov     r4,a
01A8 E509       +1  7345+1           mov     a,mant2+1
01AA 3B         +1  7346+1           addc    a,r3
01AB FB         +1  7347+1           mov     r3,a
01AC E508       +1  7348+1           mov     a,mant2+0
01AE 3A         +1  7349+1           addc    a,r2
01AF FA         +1  7350+1           mov     r2,a
01B0 E4         +1  7351             clr     a
01B1 FF         +1  7352             mov     r7,a            ;clear sign
01B2 EA         +1  7353             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7354             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7355             mov     r7,a            ;store sign
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   117

                +1  7356+3           neg1                    ;negate mantissa
01B7 C3         +1  7357+1           clr     c
01B8 E4         +1  7358+1           clr     a
01B9 9D         +1  7359+1           subb    a,r5
01BA FD         +1  7360+1           mov     r5,a
01BB E4         +1  7361+1           clr     a
01BC 9C         +1  7362+1           subb    a,r4
01BD FC         +1  7363+1           mov     r4,a
01BE E4         +1  7364+1           clr     a
01BF 9B         +1  7365+1           subb    a,r3
01C0 FB         +1  7366+1           mov     r3,a
01C1 E4         +1  7367+1           clr     a
01C2 9A         +1  7368+1           subb    a,r2
01C3 FA         +1  7369+1           mov     r2,a
01C4            +1  7370     ok3:
01C4 11F0       +1  7371             call    norm1
01C6 11DE       +1  7372             call    pack1           ;pack normalized result
                +1  7373+3           restregs                ;and return
01C8 D000       +1  7374+1           pop     0
01CA D001       +1  7375+1           pop     1
01CC D006       +1  7376+1           pop     6
01CE D007       +1  7377+1           pop     7
01D0 22         +1  7378             ret
                +1  7379     ;-------------------------------------------------------------
                +1  7380     ;       Subtract the number ltemp from the number in r2-r5
                +1  7381     
01D1            +1  7382     flsub:
01D1 630880     +1  7383             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7384             jmp     fladd           ;and add!
                +1  7385     
                +1  7386     ;================================================================
                +1  7387     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7388     
01D6            +1  7389     flcmp:
01D6 EA         +1  7390            mov     a,r2            ;get sign of left
01D7 6508       +1  7391            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7392            jnb     acc.7,cexp      ;same, go check exponent
                +1  7393     ;ifdef SMALL_MODEL
01DC EA         +1  7394             mov     a,r2            ;get sign of left again
01DD 33         +1  7395             rlc     a
01DE 5001       +1  7396             jnc     flout
                +1  7397     ;endif
01E0 D3         +1  7398             setb    c
01E1 22         +1  7399     flout:          ret                    ;return with acc < 0
                +1  7400     
01E2            +1  7401     cexp:
01E2 C3         +1  7402            clr     c
01E3 EA         +1  7403            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7404            subb    a,ltemp
01E6 7010       +1  7405            jnz     fnd
01E8 EB         +1  7406            mov     a,r3
01E9 9509       +1  7407            subb    a,ltemp+1
01EB 700B       +1  7408            jnz     fnd
01ED EC         +1  7409            mov     a,r4
01EE 950A       +1  7410            subb    a,ltemp+2
01F0 7006       +1  7411            jnz     fnd
01F2 ED         +1  7412            mov     a,r5
01F3 950B       +1  7413            subb    a,ltemp+3
01F5 7001       +1  7414            jnz     fnd
01F7            +1  7415     cdone:
01F7 22         +1  7416            ret                     ;return with acc == 0
01F8            +1  7417     fnd:
01F8 8AF0       +1  7418           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7419          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7420            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7421                         orl         a,#1                          ;make non-zero
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   118

0201 B3         +1  7422             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7423             ret
                +1  7424     ;==============================================================
                +1  7425     
                +1  7426     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7427     ;       the result in r2-r5
                +1  7428     
0203            +1  7429     flmul:
                +1  7430+3           saveregs
0203 C007       +1  7431+1           push    7
0205 C006       +1  7432+1           push    6
0207 C001       +1  7433+1           push    1
0209 C000       +1  7434+1           push    0
020B 119E       +1  7435             call    unpack1
020D 11BA       +1  7436             call    unpack2
020F E4         +1  7437             clr     a
0210 F50C       +1  7438             mov     prod,a
0212 F50D       +1  7439             mov     prod+1,a        ;clear product
0214 F50E       +1  7440             mov     prod+2,a
0216 F50F       +1  7441             mov     prod+3,a
0218 7E07       +1  7442             mov     r6,#7           ;initialize counter
021A            +1  7443     mup1:
                +1  7444+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7445+1           clr     c
021B E508       +1  7446+1           mov     a,mant2
021D 13         +1  7447+1           rrc     a
021E F508       +1  7448+1           mov     mant2,a
0220 E509       +1  7449+1           mov     a,mant2+1
0222 13         +1  7450+1           rrc     a
0223 F509       +1  7451+1           mov     mant2+1,a
0225 E50A       +1  7452+1           mov     a,mant2+2
0227 13         +1  7453+1           rrc     a
0228 F50A       +1  7454+1           mov     mant2+2,a
022A E50B       +1  7455+1           mov     a,mant2+3
022C 13         +1  7456+1           rrc     a
022D F50B       +1  7457+1           mov     mant2+3,a
022F 5014       +1  7458             jnc     nobit           ;skip if lsb was zero
                +1  7459+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7460+1           mov     a,r5
0232 250F       +1  7461+1           add     a,prod+3
0234 F50F       +1  7462+1           mov     prod+3,a
0236 E50E       +1  7463+1           mov     a,prod+2
0238 3C         +1  7464+1           addc    a,r4
0239 F50E       +1  7465+1           mov     prod+2,a
023B E50D       +1  7466+1           mov     a,prod+1
023D 3B         +1  7467+1           addc    a,r3
023E F50D       +1  7468+1           mov     prod+1,a
0240 E50C       +1  7469+1           mov     a,prod+0
0242 3A         +1  7470+1           addc    a,r2
0243 F50C       +1  7471+1           mov     prod,a
0245            +1  7472     nobit:
                +1  7473+3           lshift                  ;shift multiplicand up
0245 ED         +1  7474+1           mov     a,r5
0246 33         +1  7475+1           rlc     a
0247 FD         +1  7476+1           mov     r5,a
0248 EC         +1  7477+1           mov     a,r4
0249 33         +1  7478+1           rlc     a
024A FC         +1  7479+1           mov     r4,a
024B EB         +1  7480+1           mov     a,r3
024C 33         +1  7481+1           rlc     a
024D FB         +1  7482+1           mov     r3,a
024E EA         +1  7483+1           mov     a,r2
024F 33         +1  7484+1           rlc     a
0250 FA         +1  7485+1           mov     r2,a
0251 DEC7       +1  7486             djnz    r6,mup1         ;loop if more
                +1  7487     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   119

0253 7E11       +1  7488             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7489             sjmp    mup3
0257            +1  7490     mup11:
                +1  7491+3           shfdn   prod            ;shift product right
0257 C3         +1  7492+1           clr     c
0258 E50C       +1  7493+1           mov     a,prod
025A 13         +1  7494+1           rrc     a
025B F50C       +1  7495+1           mov     prod,a
025D E50D       +1  7496+1           mov     a,prod+1
025F 13         +1  7497+1           rrc     a
0260 F50D       +1  7498+1           mov     prod+1,a
0262 E50E       +1  7499+1           mov     a,prod+2
0264 13         +1  7500+1           rrc     a
0265 F50E       +1  7501+1           mov     prod+2,a
0267 E50F       +1  7502+1           mov     a,prod+3
0269 13         +1  7503+1           rrc     a
026A F50F       +1  7504+1           mov     prod+3,a
026C            +1  7505     mup3:
                +1  7506+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7507+1           clr     c
026D E508       +1  7508+1           mov     a,mant2
026F 13         +1  7509+1           rrc     a
0270 F508       +1  7510+1           mov     mant2,a
0272 E509       +1  7511+1           mov     a,mant2+1
0274 13         +1  7512+1           rrc     a
0275 F509       +1  7513+1           mov     mant2+1,a
0277 E50A       +1  7514+1           mov     a,mant2+2
0279 13         +1  7515+1           rrc     a
027A F50A       +1  7516+1           mov     mant2+2,a
027C E50B       +1  7517+1           mov     a,mant2+3
027E 13         +1  7518+1           rrc     a
027F F50B       +1  7519+1           mov     mant2+3,a
0281 5014       +1  7520             jnc     mup2            ;skip if bit not set
                +1  7521+3           dan     prod            ;add to prod
0283 ED         +1  7522+1           mov     a,r5
0284 250F       +1  7523+1           add     a,prod+3
0286 F50F       +1  7524+1           mov     prod+3,a
0288 E50E       +1  7525+1           mov     a,prod+2
028A 3C         +1  7526+1           addc    a,r4
028B F50E       +1  7527+1           mov     prod+2,a
028D E50D       +1  7528+1           mov     a,prod+1
028F 3B         +1  7529+1           addc    a,r3
0290 F50D       +1  7530+1           mov     prod+1,a
0292 E50C       +1  7531+1           mov     a,prod+0
0294 3A         +1  7532+1           addc    a,r2
0295 F50C       +1  7533+1           mov     prod,a
0297            +1  7534     mup2:
0297 DEBE       +1  7535             djnz    r6,mup11        ;loop if more
0299 E8         +1  7536             mov     a,r0            ;get exp1
029A 29         +1  7537             add     a,r1            ;add exp2
029B 247A       +1  7538             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7539             mov     r0,a            ;store
029E EF         +1  7540             mov     a,r7            ;get sign
029F 23         +1  7541             rl      a               ;rotate bit into msb
02A0 6207       +1  7542             xrl     sign,a          ;xor with other bit
                +1  7543+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7544+1           mov     r2,prod
02A4 AB0D       +1  7545+1           mov     r3,prod+1
02A6 AC0E       +1  7546+1           mov     r4,prod+2
02A8 AD0F       +1  7547+1           mov     r5,prod+3
02AA 11F0       +1  7548             call    norm1           ;normalize
02AC 11DE       +1  7549             call    pack1
                +1  7550+3           restregs
02AE D000       +1  7551+1           pop     0
02B0 D001       +1  7552+1           pop     1
02B2 D006       +1  7553+1           pop     6
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   120

02B4 D007       +1  7554+1           pop     7
02B6 22         +1  7555             ret
                +1  7556     ;-----------------------------------------------------------
                +1  7557     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  7558     
02B7            +1  7559     fldiv:
                +1  7560+3           saveregs
02B7 C007       +1  7561+1           push    7
02B9 C006       +1  7562+1           push    6
02BB C001       +1  7563+1           push    1
02BD C000       +1  7564+1           push    0
02BF 119E       +1  7565             call    unpack1
02C1 11BA       +1  7566             call    unpack2
02C3 E4         +1  7567             clr     a
02C4 F50C       +1  7568             mov     prod,a
02C6 F50D       +1  7569             mov     prod+1,a
02C8 F50E       +1  7570             mov     prod+2,a
02CA F50F       +1  7571             mov     prod+3,a
02CC E9         +1  7572             mov     a,r1            ;check for zero divisor
02CD 6067       +1  7573             jz      div9
02CF E8         +1  7574             mov     a,r0            ;check for zero dividend
02D0 6064       +1  7575             jz      div9
02D2 C3         +1  7576             clr     c
02D3 99         +1  7577             subb    a,r1            ;compute new exponent
02D4 2478       +1  7578             add     a,#127-7        ;unbias
02D6 F8         +1  7579             mov     r0,a            ;store back
02D7 EF         +1  7580             mov     a,r7            ;get sign
02D8 23         +1  7581             rl      a
02D9 6207       +1  7582             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  7583             mov     r6,#24+7        ;initialize counter
02DD            +1  7584     div1:
                +1  7585+3           shfup   prod            ;shift quotient up
02DD C3         +1  7586+1           clr     c
02DE E50F       +1  7587+1           mov     a,prod+3
02E0 33         +1  7588+1           rlc     a
02E1 F50F       +1  7589+1           mov     prod+3,a
02E3 E50E       +1  7590+1           mov     a,prod+2
02E5 33         +1  7591+1           rlc     a
02E6 F50E       +1  7592+1           mov     prod+2,a
02E8 E50D       +1  7593+1           mov     a,prod+1
02EA 33         +1  7594+1           rlc     a
02EB F50D       +1  7595+1           mov     prod+1,a
02ED E50C       +1  7596+1           mov     a,prod
02EF 33         +1  7597+1           rlc     a
02F0 F50C       +1  7598+1           mov     prod,a
02F2 C3         +1  7599             clr     c
02F3 EA         +1  7600             mov     a,r2            ;compare values
02F4 9508       +1  7601             subb    a,mant2
02F6 4028       +1  7602             jc      div2            ;skip if bigger
02F8 7013       +1  7603             jnz     div3
02FA EB         +1  7604             mov     a,r3            ;compare values
02FB 9509       +1  7605             subb    a,mant2+1
02FD 4021       +1  7606             jc      div2            ;skip if bigger
02FF 700C       +1  7607             jnz     div3
0301 EC         +1  7608             mov     a,r4            ;compare values
0302 950A       +1  7609             subb    a,mant2+2
0304 401A       +1  7610             jc      div2            ;skip if bigger
0306 7005       +1  7611             jnz     div3
0308 ED         +1  7612             mov     a,r5            ;compare values
0309 950B       +1  7613             subb    a,mant2+3
030B 4013       +1  7614             jc      div2            ;skip if bigger
030D            +1  7615     div3:
030D ED         +1  7616             mov     a,r5
030E 950B       +1  7617             subb    a,mant2+3
0310 FD         +1  7618             mov     r5,a
0311 EC         +1  7619             mov     a,r4
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   121

0312 950A       +1  7620             subb    a,mant2+2               ;do subtraction
0314 FC         +1  7621             mov     r4,a
0315 EB         +1  7622             mov     a,r3
0316 9509       +1  7623             subb    a,mant2+1               ;do subtraction
0318 FB         +1  7624             mov     r3,a
0319 EA         +1  7625             mov     a,r2
031A 9508       +1  7626             subb    a,mant2         ;do subtraction
031C FA         +1  7627             mov     r2,a
031D 430F01     +1  7628             orl     prod+3,#1       ;set lsb in quotient
0320            +1  7629     div2:
                +1  7630+3           lshift                  ;shift dividend up
0320 ED         +1  7631+1           mov     a,r5
0321 33         +1  7632+1           rlc     a
0322 FD         +1  7633+1           mov     r5,a
0323 EC         +1  7634+1           mov     a,r4
0324 33         +1  7635+1           rlc     a
0325 FC         +1  7636+1           mov     r4,a
0326 EB         +1  7637+1           mov     a,r3
0327 33         +1  7638+1           rlc     a
0328 FB         +1  7639+1           mov     r3,a
0329 EA         +1  7640+1           mov     a,r2
032A 33         +1  7641+1           rlc     a
032B FA         +1  7642+1           mov     r2,a
032C DEAF       +1  7643             djnz    r6,div1         ;loop if more
                +1  7644+3           copytor prod            ;copy quotient
032E AA0C       +1  7645+1           mov     r2,prod
0330 AB0D       +1  7646+1           mov     r3,prod+1
0332 AC0E       +1  7647+1           mov     r4,prod+2
0334 AD0F       +1  7648+1           mov     r5,prod+3
0336            +1  7649     div9:
0336 11F0       +1  7650             call    norm1           ;now normalize result
0338 11DE       +1  7651             call    pack1           ;pack it up
                +1  7652+3           restregs                ;restore registers
033A D000       +1  7653+1           pop     0
033C D001       +1  7654+1           pop     1
033E D006       +1  7655+1           pop     6
0340 D007       +1  7656+1           pop     7
0342 22         +1  7657             ret
                +1  7658     ;------------------------------------------------------------------
                +1  7659     
                +1  7660     ;       Float to long conversion: if the exponent is less than the
                +1  7661     ;       excess value, the result is zero. If the exponent is so large
                +1  7662     ;       that the value would be shifted out, the result is overflow.
                +1  7663     ;       Otherwise shift the mantissa up or down as required.
                +1  7664     
0343            +1  7665     ftol:
                +1  7666+3           saveregs
0343 C007       +1  7667+1           push    7
0345 C006       +1  7668+1           push    6
0347 C001       +1  7669+1           push    1
0349 C000       +1  7670+1           push    0
034B EA         +1  7671             mov     a,r2
034C B4BF09     +1  7672             cjne    a,#0bfh,ne05
034F EB         +1  7673             mov     a,r3
0350 7006       +1  7674             jnz     ne05
0352 EC         +1  7675             mov     a,r4
0353 7003       +1  7676             jnz     ne05
0355 ED         +1  7677             mov     a,r5
0356 6024       +1  7678             jz      ftol1
0358 119E       +1  7679     ne05:   call    unpack1
035A E8         +1  7680             mov     a,r0            ;get exponent
035B 2482       +1  7681             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  7682             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  7683             mov     a,r7            ;get sign
0361 30E70D     +1  7684             jnb     acc.7,ftol4     ;skip if +ve
                +1  7685+3           neg1                    ;negate it
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   122

0364 C3         +1  7686+1           clr     c
0365 E4         +1  7687+1           clr     a
0366 9D         +1  7688+1           subb    a,r5
0367 FD         +1  7689+1           mov     r5,a
0368 E4         +1  7690+1           clr     a
0369 9C         +1  7691+1           subb    a,r4
036A FC         +1  7692+1           mov     r4,a
036B E4         +1  7693+1           clr     a
036C 9B         +1  7694+1           subb    a,r3
036D FB         +1  7695+1           mov     r3,a
036E E4         +1  7696+1           clr     a
036F 9A         +1  7697+1           subb    a,r2
0370 FA         +1  7698+1           mov     r2,a
0371            +1  7699     ftol4:
0371 E8         +1  7700             mov     a,r0            ;get exponent
0372 246A       +1  7701             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  7702             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  7703             mov     r0,a            ;save it
0378 24F8       +1  7704             add     a,#-8           ;if > 8, too big
037A 500E       +1  7705             jnc     ftol3
037C            +1  7706     ftol1:
037C E4         +1  7707             clr     a
037D FA         +1  7708             mov     r2,a
037E FB         +1  7709             mov     r3,a
037F FC         +1  7710             mov     r4,a
0380 FD         +1  7711             mov     r5,a
0381            +1  7712     ftol9:
                +1  7713+3           restregs
0381 D000       +1  7714+1           pop     0
0383 D001       +1  7715+1           pop     1
0385 D006       +1  7716+1           pop     6
0387 D007       +1  7717+1           pop     7
0389 22         +1  7718             ret
038A            +1  7719     ftol3:
038A E8         +1  7720             mov     a,r0
038B FE         +1  7721             mov     r6,a            ;store in counter
038C 60F3       +1  7722             jz      ftol9           ;if zero, do nothing
038E            +1  7723     ftol33:
                +1  7724+3           lshift                  ;shift up
038E ED         +1  7725+1           mov     a,r5
038F 33         +1  7726+1           rlc     a
0390 FD         +1  7727+1           mov     r5,a
0391 EC         +1  7728+1           mov     a,r4
0392 33         +1  7729+1           rlc     a
0393 FC         +1  7730+1           mov     r4,a
0394 EB         +1  7731+1           mov     a,r3
0395 33         +1  7732+1           rlc     a
0396 FB         +1  7733+1           mov     r3,a
0397 EA         +1  7734+1           mov     a,r2
0398 33         +1  7735+1           rlc     a
0399 FA         +1  7736+1           mov     r2,a
039A DEF2       +1  7737             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7738             sjmp    ftol9
039E            +1  7739     ftol2:
039E F4         +1  7740             cpl     a               ;complement
039F FE         +1  7741             mov     r6,a
03A0 6022       +1  7742             jz      ftol22
03A2            +1  7743     ftol23:
03A2 EF         +1  7744             mov     a,r7
03A3 30E70F     +1  7745             jnb     acc.7,ftol24
                +1  7746+3           rshift1
03A6 D3         +1  7747+1           setb    c
03A7 EA         +1  7748+1           mov     a,r2
03A8 13         +1  7749+1           rrc     a
03A9 FA         +1  7750+1           mov     r2,a
03AA EB         +1  7751+1           mov     a,r3
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   123

03AB 13         +1  7752+1           rrc     a
03AC FB         +1  7753+1           mov     r3,a
03AD EC         +1  7754+1           mov     a,r4
03AE 13         +1  7755+1           rrc     a
03AF FC         +1  7756+1           mov     r4,a
03B0 ED         +1  7757+1           mov     a,r5
03B1 13         +1  7758+1           rrc     a
03B2 FD         +1  7759+1           mov     r5,a
03B3 800D       +1  7760             jmp     ftol25
03B5            +1  7761+3   ftol24: rshift                  ;shift down
03B5 C3         +1  7762+1           clr     c
03B6 EA         +1  7763+1           mov     a,r2
03B7 13         +1  7764+1           rrc     a
03B8 FA         +1  7765+1           mov     r2,a
03B9 EB         +1  7766+1           mov     a,r3
03BA 13         +1  7767+1           rrc     a
03BB FB         +1  7768+1           mov     r3,a
03BC EC         +1  7769+1           mov     a,r4
03BD 13         +1  7770+1           rrc     a
03BE FC         +1  7771+1           mov     r4,a
03BF ED         +1  7772+1           mov     a,r5
03C0 13         +1  7773+1           rrc     a
03C1 FD         +1  7774+1           mov     r5,a
03C2 DEDE       +1  7775     ftol25: djnz    r6,ftol23
03C4            +1  7776     ftol22:
                +1  7777+3           add1                    ;round
03C4 ED         +1  7778+1           mov     a,r5
03C5 2401       +1  7779+1           add     a,#1
03C7 FD         +1  7780+1           mov     r5,a
03C8 E4         +1  7781+1           clr     a
03C9 3C         +1  7782+1           addc    a,r4
03CA FC         +1  7783+1           mov     r4,a
03CB E4         +1  7784+1           clr     a
03CC 3B         +1  7785+1           addc    a,r3
03CD FB         +1  7786+1           mov     r3,a
03CE E4         +1  7787+1           clr     a
03CF 3A         +1  7788+1           addc    a,r2
03D0 FA         +1  7789+1           mov     r2,a
03D1 EF         +1  7790             mov     a,r7
03D2 30E70F     +1  7791             jnb     acc.7,ftol26
                +1  7792+3           rshift1
03D5 D3         +1  7793+1           setb    c
03D6 EA         +1  7794+1           mov     a,r2
03D7 13         +1  7795+1           rrc     a
03D8 FA         +1  7796+1           mov     r2,a
03D9 EB         +1  7797+1           mov     a,r3
03DA 13         +1  7798+1           rrc     a
03DB FB         +1  7799+1           mov     r3,a
03DC EC         +1  7800+1           mov     a,r4
03DD 13         +1  7801+1           rrc     a
03DE FC         +1  7802+1           mov     r4,a
03DF ED         +1  7803+1           mov     a,r5
03E0 13         +1  7804+1           rrc     a
03E1 FD         +1  7805+1           mov     r5,a
03E2 809D       +1  7806             jmp     ftol9
03E4            +1  7807+3   ftol26: rshift
03E4 C3         +1  7808+1           clr     c
03E5 EA         +1  7809+1           mov     a,r2
03E6 13         +1  7810+1           rrc     a
03E7 FA         +1  7811+1           mov     r2,a
03E8 EB         +1  7812+1           mov     a,r3
03E9 13         +1  7813+1           rrc     a
03EA FB         +1  7814+1           mov     r3,a
03EB EC         +1  7815+1           mov     a,r4
03EC 13         +1  7816+1           rrc     a
03ED FC         +1  7817+1           mov     r4,a
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   124

03EE ED         +1  7818+1           mov     a,r5
03EF 13         +1  7819+1           rrc     a
03F0 FD         +1  7820+1           mov     r5,a
03F1 808E       +1  7821             jmp     ftol9
                +1  7822     
                +1  7823     ;       arithmetic integer to floating conversions
                +1  7824     
03F3            +1  7825     abtof:
03F3 ED         +1  7826             mov     a,r5
03F4 23         +1  7827             rl      a
03F5 FC         +1  7828             mov     r4,a
03F6 9C         +1  7829             subb    a,r4
03F7 FC         +1  7830             mov     r4,a
03F8 FB         +1  7831             mov     r3,a
03F9 FA         +1  7832             mov     r2,a
03FA 8006       +1  7833             jmp     altof
03FC            +1  7834     awtof:
03FC EC         +1  7835             mov     a,r4
03FD 23         +1  7836             rl      a
03FE FB         +1  7837             mov     r3,a
03FF 9B         +1  7838             subb    a,r3
0400 FB         +1  7839             mov     r3,a
0401 FA         +1  7840             mov     r2,a
0402            +1  7841     altof:
                +1  7842+3           saveregs
0402 C007       +1  7843+1           push    7
0404 C006       +1  7844+1           push    6
0406 C001       +1  7845+1           push    1
0408 C000       +1  7846+1           push    0
040A EA         +1  7847             mov     a,r2            ;get sign
040B 5480       +1  7848             anl     a,#80h
040D FF         +1  7849             mov     r7,a            ;store it
040E 30E70D     +1  7850             jnb     acc.7,altof1    ;skip if +ve
                +1  7851+3           neg1
0411 C3         +1  7852+1           clr     c
0412 E4         +1  7853+1           clr     a
0413 9D         +1  7854+1           subb    a,r5
0414 FD         +1  7855+1           mov     r5,a
0415 E4         +1  7856+1           clr     a
0416 9C         +1  7857+1           subb    a,r4
0417 FC         +1  7858+1           mov     r4,a
0418 E4         +1  7859+1           clr     a
0419 9B         +1  7860+1           subb    a,r3
041A FB         +1  7861+1           mov     r3,a
041B E4         +1  7862+1           clr     a
041C 9A         +1  7863+1           subb    a,r2
041D FA         +1  7864+1           mov     r2,a
041E            +1  7865     altof1:
041E 7896       +1  7866             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  7867             call    norm1           ;normalize it
0422 11DE       +1  7868             call    pack1           ;and pack up
                +1  7869+3           restregs
0424 D000       +1  7870+1           pop     0
0426 D001       +1  7871+1           pop     1
0428 D006       +1  7872+1           pop     6
042A D007       +1  7873+1           pop     7
042C 22         +1  7874             ret
                +1  7875     
042D            +1  7876     lbtof:
042D 7C00       +1  7877             mov     r4,#0
042F            +1  7878     lwtof:
042F E4         +1  7879             clr     a
0430 FB         +1  7880             mov     r3,a
0431 FA         +1  7881             mov     r2,a
0432            +1  7882     lltof:
                +1  7883+3           saveregs
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   125

0432 C007       +1  7884+1           push    7
0434 C006       +1  7885+1           push    6
0436 C001       +1  7886+1           push    1
0438 C000       +1  7887+1           push    0
043A 7F00       +1  7888             mov     r7,#0           ;zero sign
043C 80E0       +1  7889             sjmp    altof1
                +1  7890     
                +1  7891     ;-------------------------------------------------------
                +1  7892     
                +1  7893     
                    7894     
                    7895     ;$include (d:\amp\wriread.asm)
                +1  7896     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  7897     cle256:          mov            IE,#00H
0441 75B601     +1  7898                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  7899                              MOV            PSCTL,#03
                +1  7900                                             
0447 7400       +1  7901                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  7902                                     movx    @dptr,a                         ;wr
044A 758F00     +1  7903                                     mov             PSCTL,#00
044D 75B600     +1  7904                                 mov         FLSCL,#00
0450 75A880     +1  7905                               mov           IE,#80H
0453 22         +1  7906                                     ret
                +1  7907     
                +1  7908     ;чтение памяти программ в r8..r11
                +1  7909     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  7910     re4byte:        mov                     dph,r2
0456 8B82       +1  7911                                             mov                     dpl,r3
0458 E4         +1  7912                                             clr                     a
0459 93         +1  7913                                             movc            a,@a+dptr
045A F508       +1  7914                                             mov                     r8,a
045C A3         +1  7915                                             inc                     dptr
045D E4         +1  7916                                             clr                     a
045E 93         +1  7917                                             movc            a,@a+dptr
045F F509       +1  7918                                             mov                     r9,a
0461 A3         +1  7919                                             inc                     dptr
0462 E4         +1  7920                                             clr                     a
0463 93         +1  7921                                             movc            a,@a+dptr
0464 F50A       +1  7922                                             mov                     r10,a
0466 A3         +1  7923                                             inc                     dptr
0467 E4         +1  7924                                             clr                     a
0468 93         +1  7925                                             movc            a,@a+dptr
0469 F50B       +1  7926                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  7927                                             ret
                +1  7928      ;чтение памяти программ в r2..r5
                +1  7929     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  7930     rebyte2:        mov                     dph,r2
046E 8B82       +1  7931                                             mov                     dpl,r3
0470 E4         +1  7932                                             clr                     a
0471 93         +1  7933                                             movc            a,@a+dptr
0472 FA         +1  7934                                             mov                     r2,a
0473 A3         +1  7935                                             inc                     dptr
0474 E4         +1  7936                                             clr                     a
0475 93         +1  7937                                             movc            a,@a+dptr
0476 FB         +1  7938                                             mov                     r3,a
0477 A3         +1  7939                                             inc                     dptr
0478 E4         +1  7940                                             clr                     a
0479 93         +1  7941                                             movc            a,@a+dptr
047A FC         +1  7942                                             mov                     r4,a
047B A3         +1  7943                                             inc                     dptr
047C E4         +1  7944                                             clr                     a
047D 93         +1  7945                                             movc            a,@a+dptr
047E FD         +1  7946                                             mov                     r5,a                       
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   126

                                                  ;r8..r11
047F 22         +1  7947                                             ret
                +1  7948      
                +1  7949     
                +1  7950      ;r7-количество байт
                +1  7951     ;dptr-адр ячейки для записи
                +1  7952     ;r1-адр ячейки  внешнего озу
                +1  7953     
0480 75A800     +1  7954     wrpage:  mov            IE,#00H
0483 75B601     +1  7955     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  7956                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  7957                      movx           a,@r1
048A F0         +1  7958                      movx           @dptr,a                         ;wr
048B 758F00     +1  7959                      mov            PSCTL,#0
048E 75B600     +1  7960                      mov            FLSCL,#00
0491 A3         +1  7961                     inc                     dptr
0492 09         +1  7962                     inc                     r1
0493 DFEE       +1  7963                     djnz            r7,WW5
0495 75A880     +1  7964                     mov             IE,#80H
0498 22         +1  7965                     ret
                +1  7966                             
                +1  7967     
                +1  7968     
                +1  7969                                                             
                +1  7970     
                +1  7971     
                +1  7972     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7973     ;чтение памяти программ во внешнее озу
                +1  7974     ;вх-r2,r3-адр яч памяти прогр
                +1  7975     ;r1- яч внешнее озу
0499 8A83       +1  7976     copyPP:         mov                     dph,r2
049B 8B82       +1  7977                                             mov                     dpl,r3
049D 7FFF       +1  7978                                             mov                     r7,#0ffh
049F E4         +1  7979     copy1:          clr                     a
04A0 93         +1  7980                                             movc            a,@a+dptr
04A1 F3         +1  7981                                             movx                    @r1,a
04A2 A3         +1  7982                                             inc                     dptr
04A3 09         +1  7983                                             inc                     r1
04A4 DFF9       +1  7984                                             djnz            r7,copy1
04A6 22         +1  7985                                             ret
                +1  7986     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7987     
                +1  7988                                     
                +1  7989     
                +1  7990     ;r8..r11->@r0..@r0+3
                +1  7991     ;r0-адр ячейки
                +1  7992     ;сохранить в ячейке озу
04A7 E508       +1  7993     savelte:        mov     a,ltemp
04A9 F6         +1  7994                                             mov     @r0,a
04AA 08         +1  7995                                             inc     r0
04AB E509       +1  7996                                             mov     a,ltemp+1
04AD F6         +1  7997                                             mov     @r0,a
04AE 08         +1  7998                                             inc     r0
04AF E50A       +1  7999                                             mov     a,ltemp+2
04B1 F6         +1  8000                                             mov     @r0,a
04B2 08         +1  8001                                             inc     r0
04B3 E50B       +1  8002                                             mov     a,ltemp+3
04B5 F6         +1  8003                                             mov     @r0,a
04B6 22         +1  8004                                             ret
                +1  8005     
                +1  8006     ;
                +1  8007     
                +1  8008     
                +1  8009     
                +1  8010     
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   127

                +1  8011     
                +1  8012                     
                +1  8013     
                +1  8014     
                +1  8015     
                +1  8016     
                +1  8017      
                    8018     
                    8019                                                   
                    8020     END
                                                                             
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   128

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   0364H   R   SEG=MAIN   808#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1395 1452 1477 1498 1502 1505 1506 1508 1615 1620 3416 3430 3511
                                           3514 3556 3648 3692 3695 3761 3765 3766 3767 3770 3978 4015 4016 4018 4092
                                           4112 4203 4207 4231 4234 4576 4581 4747 4752 5498 5659 5662 5686 5689
ABRET. . . . . . .  C ADDR   21E5H   R   SEG=MAIN   5427 5429#
ABTOF. . . . . . .  C ADDR   03F3H   A      7825#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 636 686 694 702 710 712 732 1087 1098 1106 1185 1564 1751 1760 1769
                                           1778 1799 2111 2134 2139 2143 2148 2151 2154 2157 2160 2342 2403 2449 2460
                                           2543 2552 2560 2569 2709 2736 2761 2766 2770 2773 2776 2779 2782 2785 3107
                                           3195 3227 3244 3262 3279 3299 4152 4158 4195 4265 5007 6088 6232 6310 6313
                                           6570 7222 7305 7322 7354 7392 7420 7682 7684 7702 7745 7791 7850
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   29ABH   R   SEG=MAIN   843 880 882 884 886 888 890 892 894 896 962 964 966 968 970 972
                                           974 976 978 981 983 985 987 989 991 993 995 997 999 1018 1020 1022 6811#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1451 1463 1467 1482 1507 1510 1511 1619 1623 3429 3433 3508 3512
                                           3553 3557 3645 3649 3694 3698 3769 3782 3988 4002 4004 4006 4017 4020 4102
                                           4113 4208 4235 4580 4584 4751 4755 5299 5318 5336 5399 5416 5661 5664 5688
                                           5691 6010 6042
ADRBLOK. . . . . .  C ADDR   268DH   R   SEG=MAIN   3179 3527 3666 4498 4666 4817 6054#
AFTERK . . . . . .  C ADDR   065BH   R   SEG=MAIN   1115 1194#
AGE2 . . . . . . .  C ADDR   020CH   R   SEG=MAIN   588# 591
AGE9 . . . . . . .  C ADDR   07F6H   R   SEG=MAIN   1399# 1402
AGEON. . . . . . .  C ADDR   021AH   R   SEG=MAIN   597# 599
ALESS0 . . . . . .  C ADDR   092BH   R   SEG=MAIN   1564 1585#
ALLSUM . . . . . .  C ADDR   0302H   R   SEG=MAIN   752# 787 805 821
ALMUL. . . . . . .  C ADDR   28F2H   R   SEG=MAIN   6657#
ALTOF. . . . . . .  C ADDR   0402H   A      1081 1179 1210 1218 1236 1252 1263 1280 1293 1361 1876 1967 2027 2065
                                           3560 3654 4116 4211 4238 4329 4407 4415 4433 4539 4551 4566 4650 4712 4728
                                           4801 4863 4878 7833 7841#
ALTOF1 . . . . . .  C ADDR   041EH   A      7850 7865# 7889
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05C1H   R   SEG=MAIN   1079 1095#
AN_T7. . . . . . .  C ADDR   10DFH   R   SEG=MAIN   2786# 2853 2862
AUTOKA . . . . . .  C ADDR   0BA0H   R   SEG=MAIN   1113 1990#
AVPGO. . . . . . .  C ADDR   0788H   R   SEG=MAIN   1337 1339#
AVTDEC1. . . . . .  C ADDR   061DH   R   SEG=MAIN   1148 1157#
AWTOF. . . . . . .  C ADDR   03FCH   A      7834#
B. . . . . . . . .  D ADDR   00F0H   A      122# 5151 5518 6660 6663 6665 6669 6673 6677 6681 6686 6690 6697 6701
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   129

                                           6705 6711 6715 6719 6725 7418 7419
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 454#
BFORM. . . . . . .  C ADDR   25CAH   R   SEG=MAIN   5859 5864 5876# 5902
BIFL_KT. . . . . .  B ADDR   0021H.5 A      333# 4325 4381 4480
BIN30. . . . . . .  C ADDR   270EH   R   SEG=MAIN   6220# 6246
BIN31. . . . . . .  C ADDR   2712H   R   SEG=MAIN   6225# 6229
BIN32. . . . . . .  C ADDR   2722H   R   SEG=MAIN   6238# 6243
BIN41. . . . . . .  C ADDR   2733H   R   SEG=MAIN   6254# 6264
BINDEC . . . . . .  C ADDR   2702H   R   SEG=MAIN   1453 1509 1621 3431 3696 3771 4019 4582 4753 5663 5690 6199#
BITAKT . . . . . .  B ADDR   0023H.2 A      352# 1705 1706 1709
BITAVP . . . . . .  B ADDR   0020H.5 A      323# 1303 1518 1695 2841 2842 2844
BITBON . . . . . .  B ADDR   0021H.2 A      330# 1731 1844 2169 2170 2178 6089
BITBUF . . . . . .  B ADDR   0021H.0 A      328#
BITEIZM. . . . . .  B ADDR   0022H.5 A      343# 1204 1713 2820 2832 3915 5070
BITIZM . . . . . .  B ADDR   0020H.4 A      322# 566 660 2140 2213 2298 2335 2366 2767 2821 2938 2961 3036 3067 3092
                                           3198 3281 3531 3578 3603 3753 3870 3916 3963 4050 4125
BITKLB . . . . . .  B ADDR   0022H.2 A      340# 1273 1729 2145 2840 2847 4123 4395
BITMAS . . . . . .  B ADDR   0020H.1 A      319# 1029 1032 5842
BITMEM . . . . . .  B ADDR   0021H.3 A      331# 1605 2537 3070 3088 3100 3197 3280 3532 3577 3752
BITMENU. . . . . .  B ADDR   0022H.1 A      339# 1604 2365 2477 2822 3091 3585 3602 3875 3917 3962 4049 4122
BITMIG . . . . . .  B ADDR   0023H.1 A      351# 2442 2621 2716 3004 3328 3481 4081 4187 4272 5583 5609 5633 5645
                                           5708 5715 5721 5727
BITNUL . . . . . .  B ADDR   0021H.7 A      335# 1676 2864 2865 2872
BITOLL . . . . . .  B ADDR   0022H.7 A      345# 612 1525 1602
BITPAR . . . . . .  B ADDR   0022H.6 A      344# 3881 4396
BITPRD . . . . . .  B ADDR   0021H.1 A      329# 1843
BITRS. . . . . . .  B ADDR   0020H.3 A      321#
BITT2. . . . . . .  B ADDR   0022H.0 A      338# 1601 2299 2336 2339 2879 3037
BITV19 . . . . . .  B ADDR   0022H.3 A      341# 511 515 2508 2511 2515 3859 3864 3945 3958 4055 4058 4062
BITVI11. . . . . .  B ADDR   0020H.6 A      324# 1301 1317 2163 2165 2212 2364 2819 2930 2937 3090
BITVICH. . . . . .  B ADDR   0022H.4 A      342# 1600 2164 2214 2224 2363 2371 2897 2929 2960 3089
BITZNAK. . . . . .  B ADDR   0020H.0 A      318# 637 669
BITZNB . . . . . .  B ADDR   0023H.3 A      353# 4239 5425 5428
BITZUS . . . . . .  B ADDR   0020H.7 A      325# 1351 1541 1917 1920 2259
BLOIN. . . . . . .  C ADDR   1539H   R   SEG=MAIN   3436# 3441
BLOKVV . . . . . .  C ADDR   150BH   R   SEG=MAIN   3406#
BLOKVVC. . . . . .  C ADDR   1515H   R   SEG=MAIN   3409 3412#
BL_LI. . . . . . .  C ADDR   14D6H   R   SEG=MAIN   3356 3364#
BOUT7. . . . . . .  C ADDR   12A1H   R   SEG=MAIN   3047# 3049
BRET . . . . . . .  C ADDR   2034H   R   SEG=MAIN   5091 5096 5100#
BUFDEC . . . . . .  C ADDR   095DH   R   SEG=MAIN   1626# 1631
BUFIND . . . . . .  D ADDR   0040H   A      298# 587 591 596 599 605 1398 1402 1468 1489 1510 1511 1512 1574 1579
                                           1624 1632 1634 1639 1674 1693 1699 1707 1710 1715 1730 1732 2128 2175 2179
                                           2417 2435 2451 2453 2456 2616 2660 2679 2754 2881 2939 2940 2987 2991 3017
                                           3039 3053 3060 3071 3072 3170 3323 3350 3378 3407 3434 3448 3449 3453 3454
                                           3461 3462 3467 3483 3618 3625 3699 3707 3709 3714 3738 3772 3781 3783 3987
                                           4020 4021 4024 4073 4101 4179 4221 4585 4593 4597 4756 4764 4768 4907 4939
                                           5149 5167 5298 5317 5335 5398 5415 5426 5586 5612 5665 5684 5692 5712 5733
                                           6009 6041 6090
BUFMEA . . . . . .  C ADDR   1D55H   R   SEG=MAIN   4587# 4592
BUFMIN . . . . . .  C ADDR   1E48H   R   SEG=MAIN   4758# 4763
BUFON. . . . . . .  C ADDR   0CEFH   R   SEG=MAIN   2169 2178#
BUFR . . . . . . .  C ADDR   089BH   R   SEG=MAIN   1491# 1496
BUFR2. . . . . . .  C ADDR   087DH   R   SEG=MAIN   1470# 1475
BUFR3. . . . . . .  C ADDR   0876H   R   SEG=MAIN   1461 1466#
BUFR30 . . . . . .  C ADDR   0879H   R   SEG=MAIN   1464 1468#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7415# 7419
CELLBIT. . . . . .  D ADDR   0020H   A      317# 318 319 320 321 322 323 324 325
CELLBIT1 . . . . .  D ADDR   0021H   A      327# 328 329 330 331 333 335
CELLBIT2 . . . . .  D ADDR   0022H   A      337# 338 339 340 341 342 343 344 345
CELLBIT3 . . . . .  D ADDR   0023H   A      349# 350 351 352 353
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   130

CEXP . . . . . . .  C ADDR   01E2H   A      7392 7401#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   20D1H   R   SEG=MAIN   2873 5233#
CH1. . . . . . . .  C ADDR   20F1H   R   SEG=MAIN   5056 5244#
CH10 . . . . . . .  C ADDR   20D5H   R   SEG=MAIN   804 1043 3684 5234#
CH100. . . . . . .  C ADDR   20E9H   R   SEG=MAIN   751 1559 5239#
CH10000. . . . . .  C ADDR   20E5H   R   SEG=MAIN   5238#
CH150H . . . . . .  C ADDR   2135H   R   SEG=MAIN   5263#
CH2. . . . . . . .  C ADDR   20EDH   R   SEG=MAIN   1038 5240#
CH20 . . . . . . .  C ADDR   22ACH   R   SEG=MAIN   786 1048 5549#
CH2THO . . . . . .  C ADDR   2115H   R   SEG=MAIN   2034 2072 5255#
CH320H . . . . . .  C ADDR   2131H   R   SEG=MAIN   5262# 6062
CH4. . . . . . . .  C ADDR   20DDH   R   SEG=MAIN   1052 5236#
CH43 . . . . . . .  C ADDR   173CH   R   SEG=MAIN   3701# 3706
CH43_42. . . . . .  C ADDR   17CBH   R   SEG=MAIN   3785# 3790
CH5. . . . . . . .  C ADDR   20D9H   R   SEG=MAIN   820 5235#
CH57 . . . . . . .  C ADDR   22A8H   R   SEG=MAIN   5548#
CH954. . . . . . .  C ADDR   20E1H   R   SEG=MAIN   5237#
CHAIBL . . . . . .  C ADDR   13B1H   R   SEG=MAIN   3172 3174#
CHAIPR . . . . . .  C ADDR   1691H   R   SEG=MAIN   3620 3622#
CHANMA . . . . . .  C ADDR   0EB6H   R   SEG=MAIN   2449 2458#
CHANZ. . . . . . .  C ADDR   0E9DH   R   SEG=MAIN   2403 2447#
CHAVT. . . . . . .  D ADDR   0081H   A      367# 545 1104 1149 1157 2091 3871
CHBEFORE . . . . .  D ADDR   009BH   A      377# 568 748 762 781 799 815
CHBLOK . . . . . .  D ADDR   00D6H   A      402# 4496 4546 4562 4664 4718 4815 4869
CHBUF. . . . . . .  D ADDR   00CFH   A      399# 579 1829 1834 1884 1926 3575
CHCMP. . . . . . .  C ADDR   1FD7H   R   SEG=MAIN   651 1110 5033#
CHDEC. . . . . . .  C ADDR   1FEAH   R   SEG=MAIN   658 1158 1171 5048#
CHDEL. . . . . . .  D ADDR   0083H   A      368# 1948 1975 1997 2047 2085
CHDELMO. . . . . .  C ADDR   0B88H   R   SEG=MAIN   1958 1975# 1980
CHIF . . . . . . .  C ADDR   22F1H   R   SEG=MAIN   5590 5593#
CHIF5. . . . . . .  C ADDR   22F9H   R   SEG=MAIN   5596 5598#
CHIFB. . . . . . .  C ADDR   231CH   R   SEG=MAIN   5616 5619#
CHIFB1 . . . . . .  C ADDR   2322H   R   SEG=MAIN   5618 5619 5622#
CHIFL5 . . . . . .  C ADDR   232AH   R   SEG=MAIN   5626 5628#
CHIFOUR. . . . . .  C ADDR   230BH   R   SEG=MAIN   5603 5605 5609#
CHIND. . . . . . .  D ADDR   00ACH   A      383# 1319 1736
CHINKOR. . . . . .  D ADDR   0098H   A      366# 540 730 1096 1109 1151 1165 1170 1982
CHK. . . . . . . .  C ADDR   212DH   R   SEG=MAIN   1274 5261#
CHKL . . . . . . .  D ADDR   003DH   A      305# 650 657 2277 2303 2309 2354 2800 3076 3744 4128
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1026 1033 1056 5841
CHMASN . . . . . .  D ADDR   003FH   A      306# 737 746 782 800 816 832 1031 1033 1034
CHMINUS. . . . . .  C ADDR   2672H   R   SEG=MAIN   3192 3224 3241 3259 3276 6024# 6085
CHTADC . . . . . .  C ADDR   1F81H   R   SEG=MAIN   4965#
CHTHO. . . . . . .  C ADDR   210DH   R   SEG=MAIN   1243 1281 4338 4423 4441 5253#
CHTHOU . . . . . .  C ADDR   21B0H   R   SEG=MAIN   5386#
CHZAP. . . . . . .  C ADDR   20CDH   R   SEG=MAIN   1818 5232#
CH_1 . . . . . . .  C ADDR   20F9H   R   SEG=MAIN   571 1415 1438 1831 1836 1912 1928 3655 5246#
CH_10. . . . . . .  C ADDR   2125H   R   SEG=MAIN   1421 1444 1889 1900 4117 4571 4741 5259#
CH_10TH. . . . . .  C ADDR   2121H   R   SEG=MAIN   1332 5258#
CH_2 . . . . . . .  C ADDR   20FDH   R   SEG=MAIN   1881 1894 5247#
CH_200 . . . . . .  C ADDR   211DH   R   SEG=MAIN   5257#
CH_220 . . . . . .  C ADDR   2119H   R   SEG=MAIN   1294 5256#
CH_22T . . . . . .  C ADDR   21EEH   R   SEG=MAIN   1371 5434#
CH_250 . . . . . .  C ADDR   2129H   R   SEG=MAIN   1199 5260#
CH_4 . . . . . . .  C ADDR   2101H   R   SEG=MAIN   1903 3658 5248#
CH_5 . . . . . . .  C ADDR   2105H   R   SEG=MAIN   1908 5249#
CH_500 . . . . . .  C ADDR   21EAH   R   SEG=MAIN   1367 5433#
CH_953 . . . . . .  C ADDR   2109H   R   SEG=MAIN   5252#
CH_B . . . . . . .  C ADDR   21E6H   R   SEG=MAIN   1383 5431#
CH_FL. . . . . . .  C ADDR   21F2H   R   SEG=MAIN   1407 5435#
CH_MLN . . . . . .  C ADDR   20F5H   R   SEG=MAIN   5245#
CIKLWR . . . . . .  C ADDR   25A0H   R   SEG=MAIN   5847#
CKCON. . . . . . .  D ADDR   008EH   A      30# 472 503
CL4. . . . . . . .  C ADDR   2147H   R   SEG=MAIN   5278# 5280
CL4N . . . . . . .  C ADDR   214DH   R   SEG=MAIN   5287# 5289
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   131

CLE20. . . . . . .  C ADDR   17B8H   R   SEG=MAIN   3775# 3777
CLE256 . . . . . .  C ADDR   043EH   A      3951 4371 4473 7897#
CLEAR. . . . . . .  C ADDR   26FCH   R   SEG=MAIN   6177 6181# 6211
CLEAR4 . . . . . .  C ADDR   2144H   R   SEG=MAIN   760 1348 1350 1478 1499 1538 1540 2206 2208 2858 2860 4495 5276#
CLEARN . . . . . .  C ADDR   214CH   R   SEG=MAIN   3509 3554 3646 3979 4093 4204 4232 5285#
CLMASSIX . . . . .  C ADDR   2590H   R   SEG=MAIN   531 1346 1536 1986 2095 2204 2856 3035 5835#
CLMASV . . . . . .  C ADDR   078DH   R   SEG=MAIN   1341 1343#
CLMAX. . . . . . .  C ADDR   2595H   R   SEG=MAIN   5837# 5840
CLR11. . . . . . .  C ADDR   26FDH   R   SEG=MAIN   6183# 6185
CLRDEC . . . . . .  C ADDR   26F6H   R   SEG=MAIN   6175#
CLRNUM . . . . . .  C ADDR   26FAH   R   SEG=MAIN   6178# 6292
CLRVICH. . . . . .  C ADDR   1211H   R   SEG=MAIN   2960# 2977
CNTR . . . . . . .  N NUMB   0006H   A      7088#
CO02S. . . . . . .  C ADDR   20B5H   R   SEG=MAIN   5216# 5220
CO05S. . . . . . .  C ADDR   20C2H   R   SEG=MAIN   5225# 5229
CO1S . . . . . . .  C ADDR   20ACH   R   SEG=MAIN   5210# 5210
CO2S . . . . . . .  C ADDR   20A8H   R   SEG=MAIN   5208# 5212
COMPA1 . . . . . .  C ADDR   0812H   R   SEG=MAIN   1415# 1424
COMPA2 . . . . . .  C ADDR   0848H   R   SEG=MAIN   1438# 1447
COND . . . . . . .  C ADDR   2604H   R   SEG=MAIN   5931#
COPY1. . . . . . .  C ADDR   049FH   A      7979# 7984
COPYPP . . . . . .  C ADDR   0499H   A      3938 4350 4451 7976#
COPY_HL. . . . . .  D ADDR   00D7H   A      403# 3671 3796 4488 4504 4519 4657 4672 4687 4808 4823 4838
COUNT. . . . . . .  C ADDR   208AH   R   SEG=MAIN   5182# 5182
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   2091H   R   SEG=MAIN   5188# 5188
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 477
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1566 1587
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1569 1591
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 478
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1826
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1823
DCOA . . . . . . .  C ADDR   2609H   R   SEG=MAIN   5935# 5937
DCOB . . . . . . .  C ADDR   2610H   R   SEG=MAIN   5939# 5957
DCOC . . . . . . .  C ADDR   261BH   R   SEG=MAIN   5949# 5954
DCOD . . . . . . .  C ADDR   2628H   R   SEG=MAIN   5956 5959#
DDOUTF . . . . . .  C ADDR   148BH   R   SEG=MAIN   3161 3204 3309 3317# 3402
DDOUTFR. . . . . .  C ADDR   1395H   R   SEG=MAIN   3161# 3167
DEC30. . . . . . .  C ADDR   274FH   R   SEG=MAIN   6302# 6327
DEC31. . . . . . .  C ADDR   2754H   R   SEG=MAIN   6308# 6315
DEC32. . . . . . .  C ADDR   2764H   R   SEG=MAIN   6320# 6324
DECBIN . . . . . .  C ADDR   2742H   R   SEG=MAIN   3513 3558 3650 4114 4209 4236 6281#
DECSIZE. . . . . .  N NUMB   000AH   A      6156# 6176 6210 6237 6250 6253 6307
DECT2. . . . . . .  C ADDR   276DH   R   SEG=MAIN   6298 6330#
DEDPTR . . . . . .  C ADDR   29C2H   R   SEG=MAIN   6815 6819 6823 6829#
DENORM . . . . . .  C ADDR   0133H   A      7247# 7303
DGOTO7 . . . . . .  C ADDR   161EH   R   SEG=MAIN   3561# 3569
DIAP . . . . . . .  D ADDR   00AEH   A      385# 559 1336 1520 1638 1854 2198 2230 2849 4023 4378 5071 5092 5349 5364
                                           5515 5577
DIINC. . . . . . .  C ADDR   0D14H   R   SEG=MAIN   2201 2204#
DIKDN. . . . . . .  C ADDR   2280H   R   SEG=MAIN   5517 5537#
DIKDW. . . . . . .  C ADDR   2198H   R   SEG=MAIN   5353 5374#
DIKM . . . . . . .  C ADDR   21AEH   R   SEG=MAIN   5385#
DIPAR. . . . . . .  C ADDR   21ACH   R   SEG=MAIN   5384#
DIV1 . . . . . . .  C ADDR   02DDH   A      7584# 7643
DIV2 . . . . . . .  C ADDR   0320H   A      7602 7606 7610 7614 7629#
DIV3 . . . . . . .  C ADDR   030DH   A      7603 7607 7611 7615#
DIV9 . . . . . . .  C ADDR   0336H   A      7573 7575 7649#
DIVIDE . . . . . .  C ADDR   282DH   R   SEG=MAIN   5863 6516#
DONE . . . . . . .  C ADDR   279CH   R   SEG=MAIN   6346 6357#
DONE1. . . . . . .  C ADDR   279AH   R   SEG=MAIN   6349 6352 6355#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   132

DOSH . . . . . . .  C ADDR   28B6H   R   SEG=MAIN   6591 6607#
DOSUB. . . . . . .  C ADDR   28A4H   R   SEG=MAIN   6575 6579 6583 6587 6588 6592#
DPH. . . . . . . .  D ADDR   0083H   A      19# 537 2747 3676 3678 3801 3806 4254 4489 4501 4506 4515 4517 4520 4531
                                           4618 4620 4658 4669 4674 4683 4685 4688 4699 4809 4820 4825 4834 4836 4839
                                           4850 5795 5803 6070 6076 6098 6363 6399 6434 6437 6449 6472 6834 6836 7910
                                           7930 7976
DPL. . . . . . . .  D ADDR   0082H   A      18# 2746 3672 3674 3798 3809 4255 4492 4499 4509 4512 4514 4523 4527 4615
                                           4617 4661 4667 4677 4680 4682 4691 4695 4812 4818 4828 4831 4833 4842 4846
                                           5796 5802 6067 6079 6102 6379 6415 6436 6450 6453 6487 6831 6833 7911 7931
                                           7977
DVIG0. . . . . . .  C ADDR   0A38H   R   SEG=MAIN   1772# 1774
DVIG1. . . . . . .  C ADDR   0A2DH   R   SEG=MAIN   1763# 1765
DVIG2. . . . . . .  C ADDR   0A22H   R   SEG=MAIN   1754# 1756
DVIG3. . . . . . .  C ADDR   0A16H   R   SEG=MAIN   1745# 1747
DVIG4. . . . . . .  C ADDR   0A44H   R   SEG=MAIN   1783# 1785
DVIG6. . . . . . .  C ADDR   0A66H   R   SEG=MAIN   1811# 1813
DVM. . . . . . . .  C ADDR   0A64H   R   SEG=MAIN   1799 1810#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 475
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 518 2109 2711 2735 4271 4937 4949
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1B85H   R   SEG=MAIN   2838 4324#
ENDSDV . . . . . .  C ADDR   0A6AH   R   SEG=MAIN   1805 1814#
ENDSUM . . . . . .  C ADDR   054FH   R   SEG=MAIN   844 897 1000 1025#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   0843H   R   SEG=MAIN   1418 1434#
EQU00. . . . . . .  C ADDR   0861H   R   SEG=MAIN   1436 1441 1450#
EQU1L. . . . . . .  C ADDR   0FDCH   R   SEG=MAIN   2627 2631#
EQU2L. . . . . . .  C ADDR   14F1H   R   SEG=MAIN   3388 3393#
ERROR. . . . . . .  C ADDR   23B6H   R   SEG=MAIN   4046 4915 4929 5731#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7090#
EXP2 . . . . . . .  N NUMB   0001H   A      7092# 7269 7290
EXTCLE . . . . . .  C ADDR   01ACH   R   SEG=MAIN   534# 538
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   2191H   R   SEG=MAIN   4352 5363#
FINDKOEF . . . . .  C ADDR   2182H   R   SEG=MAIN   1277 5348#
FINDMEM. . . . . .  C ADDR   0F40H   R   SEG=MAIN   2477 2537#
FINDR. . . . . . .  C ADDR   22D9H   R   SEG=MAIN   1504 4014 5577#
FINIS. . . . . . .  C ADDR   28E1H   R   SEG=MAIN   6535 6636#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      4543 4555 7295# 7384
FLCMP. . . . . . .  C ADDR   01D6H   A      1201 1296 1334 1369 1373 1417 1440 1838 4714 4730 4865 4880 7389#
FLDIV. . . . . . .  C ADDR   02B7H   A      1224 1245 1283 1390 1409 1423 1902 1910 2036 2074 4336 4421 4439 4570
                                           4573 4743 7559#
FLMUL. . . . . . .  C ADDR   0203H   A      1090 1190 1242 1288 1385 1446 1883 3660 4119 4340 4425 4443 7429#
FLOUT. . . . . . .  C ADDR   01E1H   A      7396 7399#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 7898 7904 7955 7960
FLSUB. . . . . . .  C ADDR   01D1H   A      1182 1833 1930 2032 2070 3657 7382#
FND. . . . . . . .  C ADDR   01F8H   A      7405 7408 7411 7414 7417#
FO1M . . . . . . .  C ADDR   25C7H   R   SEG=MAIN   5869 5873#
FO2M . . . . . . .  C ADDR   25D0H   R   SEG=MAIN   5876 5878#
FORM4. . . . . . .  C ADDR   25D1H   R   SEG=MAIN   5871 5877 5881#
FT1IZM . . . . . .  C ADDR   0DF6H   R   SEG=MAIN   2349#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   133

FTOL . . . . . . .  C ADDR   0343H   A      1135 1290 1393 3661 4341 4444 4574 4744 5658 5685 7665#
FTOL1. . . . . . .  C ADDR   037CH   A      7678 7682 7706#
FTOL2. . . . . . .  C ADDR   039EH   A      7702 7739#
FTOL22 . . . . . .  C ADDR   03C4H   A      7742 7776#
FTOL23 . . . . . .  C ADDR   03A2H   A      7743# 7775
FTOL24 . . . . . .  C ADDR   03B5H   A      7745 7761#
FTOL25 . . . . . .  C ADDR   03C2H   A      7760 7775#
FTOL26 . . . . . .  C ADDR   03E4H   A      7791 7807#
FTOL3. . . . . . .  C ADDR   038AH   A      7705 7719#
FTOL33 . . . . . .  C ADDR   038EH   A      7723# 7737
FTOL4. . . . . . .  C ADDR   0371H   A      7684 7699#
FTOL9. . . . . . .  C ADDR   0381H   A      7712# 7722 7738 7806 7821
FULKALIB . . . . .  C ADDR   1BF4H   R   SEG=MAIN   4379 4394# 4482
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   483# 484
GO23NO . . . . . .  C ADDR   1450H   R   SEG=MAIN   3209 3286#
GO31L. . . . . . .  C ADDR   0FE2H   R   SEG=MAIN   2605 2636#
GO41L. . . . . . .  C ADDR   0FE7H   R   SEG=MAIN   2636 2638#
GOA2 . . . . . . .  C ADDR   0743H   R   SEG=MAIN   1300 1302 1305# 1327
GOA3A2 . . . . . .  C ADDR   074DH   R   SEG=MAIN   1310#
GOCIKLE. . . . . .  C ADDR   0B26H   R   SEG=MAIN   1845 1886 1917# 1924 1931
GOFULL . . . . . .  C ADDR   1483H   R   SEG=MAIN   3292 3313#
GOKAA2 . . . . . .  C ADDR   076BH   R   SEG=MAIN   1325#
GOKLB. . . . . . .  C ADDR   0CD7H   R   SEG=MAIN   2145 2167#
GOOFF1 . . . . . .  C ADDR   13EFH   R   SEG=MAIN   3218# 3227
GOOFF2 . . . . . .  C ADDR   1407H   R   SEG=MAIN   3235# 3244
GOOFF3 . . . . . .  C ADDR   141FH   R   SEG=MAIN   3253# 3262
GOOFF4 . . . . . .  C ADDR   1437H   R   SEG=MAIN   3270# 3279
GOONIN . . . . . .  C ADDR   075DH   R   SEG=MAIN   1318# 1352 1526 1542
GOONIND. . . . . .  C ADDR   0934H   R   SEG=MAIN   1321 1592#
GOONOFF. . . . . .  C ADDR   13BDH   R   SEG=MAIN   3186# 3195
GOONT. . . . . . .  C ADDR   0AC4H   R   SEG=MAIN   1848 1867#
GOPAROL. . . . . .  C ADDR   1965H   R   SEG=MAIN   3880 4000 4008#
GOPAROM. . . . . .  C ADDR   187BH   R   SEG=MAIN   3878# 3881
GOPART . . . . . .  C ADDR   02E0H   R   SEG=MAIN   732 735#
GOSK19 . . . . . .  C ADDR   0F18H   R   SEG=MAIN   2508 2513#
GOTO7. . . . . . .  C ADDR   10DFH   R   SEG=MAIN   2799# 2870 2877 2915 2964 2993 3005 3047 3051 3096 3112 3121 3127
                                           3132 3138 3153 3202 3338 3341 3355 3392 3395 3451 3464 3470 3496 3498 3538
                                           3561 3579 3631 3819 3826 4043 4053 4085 4136 4138 4154 4166 4223 4391 4402
GOTOKD . . . . . .  C ADDR   05E2H   R   SEG=MAIN   1093 1117#
GOUT6. . . . . . .  C ADDR   0C8CH   R   SEG=MAIN   2135# 2163
GOVVLIST . . . . .  C ADDR   16B5H   R   SEG=MAIN   3614 3636#
GOZNAK . . . . . .  C ADDR   0292H   R   SEG=MAIN   643 675#
HNOR11 . . . . . .  C ADDR   121CH   R   SEG=MAIN   2926 2968#
HNOR12 . . . . . .  C ADDR   11C4H   R   SEG=MAIN   2916 2920#
HNOT1. . . . . . .  C ADDR   1265H   R   SEG=MAIN   2892 3014#
HNOT2. . . . . . .  C ADDR   1192H   R   SEG=MAIN   2889#
HR12 . . . . . . .  C ADDR   11BAH   R   SEG=MAIN   2911 2916#
HVI1113. . . . . .  C ADDR   11B4H   R   SEG=MAIN   2914# 2919 2924
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 519 4895 7897 7905 7954 7964
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   118EH   R   SEG=MAIN   2884 2886#
IND. . . . . . . .  C ADDR   1F4FH   R   SEG=MAIN   592 600 645 663 1428 1432 1733 2176 2180 2191 3057 3073 3469 3537
                                           3739 3791 4047 4399 4911 4917 4931 4937# 6091
INDA3. . . . . . .  C ADDR   08FBH   R   SEG=MAIN   1557#
INDOLL . . . . . .  C ADDR   08D2H   R   SEG=MAIN   1518 1519 1523#
INIACP . . . . . .  C ADDR   21F6H   R   SEG=MAIN   609 3033 5441#
INNOT1_2 . . . . .  C ADDR   1574H   R   SEG=MAIN   3460 3466#
INNOT3 . . . . . .  C ADDR   1565H   R   SEG=MAIN   3452 3457#
INNOT6 . . . . . .  C ADDR   1559H   R   SEG=MAIN   3447 3452#
INTERVA. . . . . .  D ADDR   00CDH   A      398# 583 1867 3415 3515
INTMUL . . . . . .  C ADDR   0ADCH   R   SEG=MAIN   1883# 1891 1896 1905 1914
INTMUL1. . . . . .  C ADDR   0ADFH   R   SEG=MAIN   1884# 1911
INTN . . . . . . .  C ADDR   1607H   R   SEG=MAIN   3552#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   134

IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   124DH   R   SEG=MAIN   2995#
IZMAN. . . . . . .  C ADDR   0D68H   R   SEG=MAIN   2107 2251#
IZMFUN . . . . . .  C ADDR   0D77H   R   SEG=MAIN   2192 2203 2210 2255 2258#
IZMPAT . . . . . .  C ADDR   0D7BH   R   SEG=MAIN   2161 2177 2181 2227 2262#
IZMT2. . . . . . .  C ADDR   0D8AH   R   SEG=MAIN   2278 2283#
IZMT3. . . . . . .  C ADDR   0D95H   R   SEG=MAIN   2283 2289#
JFINIS . . . . . .  C ADDR   2848H   R   SEG=MAIN   6527 6535#
KD . . . . . . . .  C ADDR   2111H   R   SEG=MAIN   5254#
KEYB1. . . . . . .  C ADDR   0C62H   R   SEG=MAIN   283 2108#
KEYB2. . . . . . .  C ADDR   1076H   R   SEG=MAIN   286 2734#
KFULL. . . . . . .  C ADDR   145AH   R   SEG=MAIN   3154 3291#
KFULLR . . . . . .  C ADDR   1384H   R   SEG=MAIN   3149 3154#
KGO23. . . . . . .  C ADDR   13DCH   R   SEG=MAIN   3148 3207#
KLEV1. . . . . . .  C ADDR   135EH   R   SEG=MAIN   3104 3139#
KLEV2. . . . . . .  C ADDR   1363H   R   SEG=MAIN   3139 3141#
KLEV21 . . . . . .  C ADDR   1387H   R   SEG=MAIN   3146 3155#
KLEV22 . . . . . .  C ADDR   136DH   R   SEG=MAIN   3134 3143 3146#
KLEV23 . . . . . .  C ADDR   1398H   R   SEG=MAIN   3155 3163#
KLEV3. . . . . . .  C ADDR   1368H   R   SEG=MAIN   3141 3143#
KLMAS. . . . . . .  C ADDR   038DH   R   SEG=MAIN   764 831#
KNAVP. . . . . . .  C ADDR   112AH   R   SEG=MAIN   2779 2840#
KNIZM. . . . . . .  B ADDR   0023H.0 A      350# 1300 1519 1701 2229 2251 2252 2256
KNIZMON. . . . . .  C ADDR   0D72H   R   SEG=MAIN   2251 2256#
KNKMP. . . . . . .  C ADDR   1067H   R   SEG=MAIN   2729# 2773
KNLEFT . . . . . .  C ADDR   113AH   R   SEG=MAIN   2733 2847#
KNMEM. . . . . . .  C ADDR   12C2H   R   SEG=MAIN   2728 3067#
KNMENU . . . . . .  C ADDR   1101H   R   SEG=MAIN   2785 2819#
KNNUL. . . . . . .  C ADDR   1158H   R   SEG=MAIN   2732 2864#
KNOPT. . . . . . .  C ADDR   0D9DH   R   SEG=MAIN   2106 2297#
KNRAZR . . . . . .  C ADDR   0DBCH   R   SEG=MAIN   2105 2315#
KNRIGHT. . . . . .  C ADDR   0D0AH   R   SEG=MAIN   2151 2196#
KNVICH . . . . . .  C ADDR   0D26H   R   SEG=MAIN   2160 2212#
KOEFKD . . . . . .  D ADDR   00A0H   A      380# 577 4343 4353 4445 4453
KOEFKM . . . . . .  D ADDR   0094H   A      374# 575 1088 1188 2078
KOEFKP . . . . . .  D ADDR   0090H   A      373# 573 1085 1183 2040
KOMUL. . . . . . .  C ADDR   070BH   R   SEG=MAIN   1276 1280#
KOMULPZ. . . . . .  C ADDR   0705H   R   SEG=MAIN   1273 1277#
KONSTA . . . . . .  D ADDR   00BCH   A      393# 1381 4212 5656
KONSTB . . . . . .  D ADDR   00C0H   A      394# 4243 5676
KON_B. . . . . . .  C ADDR   0E81H   R   SEG=MAIN   2405 2424#
KOR0US . . . . . .  C ADDR   2048H   R   SEG=MAIN   1956 5125#
KOR0_AN. . . . . .  D ADDR   0084H   A      370# 1180 1968 2030 2068
KORDEC1. . . . . .  C ADDR   0633H   R   SEG=MAIN   1163 1170#
KORDEC10 . . . . .  C ADDR   0613H   R   SEG=MAIN   1151#
KORNUL . . . . . .  C ADDR   0B5BH   R   SEG=MAIN   1100 1948#
KVVOD0 . . . . . .  C ADDR   1476H   R   SEG=MAIN   3114 3299 3308#
LABEL43. . . . . .  C ADDR   16ACH   R   SEG=MAIN   3632# 3640
LABEL7 . . . . . .  C ADDR   177EH   R   SEG=MAIN   3632 3744# 3756
LABELA . . . . . .  C ADDR   0267H   R   SEG=MAIN   648# 667 1921
LABELB . . . . . .  C ADDR   0A0FH   R   SEG=MAIN   1143 1545 1738# 1936 1940 1942
LABELC . . . . . .  C ADDR   0DBCH   R   SEG=MAIN   2316#
LABELE . . . . . .  C ADDR   0D7BH   R   SEG=MAIN   2260 2276# 2321 2324 2328 2332
LABELF . . . . . .  C ADDR   0DE2H   R   SEG=MAIN   2104 2338#
LABELH . . . . . .  C ADDR   117AH   R   SEG=MAIN   2731 2879#
LABELI . . . . . .  C ADDR   1A4EH   R   SEG=MAIN   2895 2953 3007 4149#
LABELI2. . . . . .  C ADDR   1201H   R   SEG=MAIN   2953# 2954
LABELK . . . . . .  C ADDR   1302H   R   SEG=MAIN   2894 3097#
LABELL . . . . . .  C ADDR   0F9DH   R   SEG=MAIN   2475 2566 2574#
LABELL1. . . . . .  C ADDR   0EBEH   R   SEG=MAIN   2462# 2530 2643 2692
LABELN . . . . . .  C ADDR   1001H   R   SEG=MAIN   2531 2652#
LABELP . . . . . .  C ADDR   1682H   R   SEG=MAIN   3565 3585 3614# 3828
LABELS . . . . . .  C ADDR   164DH   R   SEG=MAIN   3295 3585#
LABELS1. . . . . .  C ADDR   18DCH   R   SEG=MAIN   3896 3926#
LABELS13 . . . . .  C ADDR   19D7H   R   SEG=MAIN   3967 4065#
LABELS3. . . . . .  C ADDR   1A61H   R   SEG=MAIN   4159#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   135

LABELS4. . . . . .  C ADDR   1A3CH   R   SEG=MAIN   3966 4140#
LABL2. . . . . . .  C ADDR   0FC3H   R   SEG=MAIN   2608# 3158
LABM . . . . . . .  C ADDR   14FAH   R   SEG=MAIN   3159 3398#
LADD . . . . . . .  C ADDR   2989H   R   SEG=MAIN   743 778 796 812 1821 6762#
LADDX. . . . . . .  C ADDR   299AH   R   SEG=MAIN   6786#
LBTOF. . . . . . .  C ADDR   042DH   A      7876#
LCMP . . . . . . .  C ADDR   2787H   R   SEG=MAIN   5043 5900 6342#
LDC_LONG . . . . .  C ADDR   279DH   R   SEG=MAIN   572 1275 1819 2035 2073 2874 6362#
LDC_LTEMP. . . . .  C ADDR   27BFH   R   SEG=MAIN   752 1039 1044 1049 1053 1200 1244 1282 1295 1333 1368 1372 1384
                                           1408 1416 1422 1439 1445 1560 1832 1837 1882 1890 1895 1901 1904 1909 1913
                                           1929 3656 3659 3685 4118 4339 4424 4442 4572 4742 5057 6063 6398#
LDX_LONG . . . . .  C ADDR   27E5H   R   SEG=MAIN   6433#
LDX_LTEMP. . . . .  C ADDR   280BH   R   SEG=MAIN   6471#
LEFCUR . . . . . .  C ADDR   1586H   R   SEG=MAIN   3476# 3547 3563
LEFKL. . . . . . .  C ADDR   1144H   R   SEG=MAIN   2847 2853#
LEFMEM11 . . . . .  C ADDR   1310H   R   SEG=MAIN   3105# 3140 3142 3144
LEFT21 . . . . . .  C ADDR   14A4H   R   SEG=MAIN   3334 3339#
LEFT_S . . . . . .  C ADDR   18D9H   R   SEG=MAIN   3925# 3928
LEFT_SK. . . . . .  C ADDR   19BEH   R   SEG=MAIN   3925 4055#
LEV220 . . . . . .  C ADDR   1370H   R   SEG=MAIN   3147# 3156
LEV2GO . . . . . .  C ADDR   1027H   R   SEG=MAIN   2651 2688#
LEVEL. . . . . . .  D ADDR   00B0H   A      387# 2183 2538 2576 3074 3084 3103 3310 5607
LI21 . . . . . . .  C ADDR   1257H   R   SEG=MAIN   3002 3004#
LI42_43. . . . . .  C ADDR   171BH   R   SEG=MAIN   3682# 3811
LIST_43. . . . . .  C ADDR   1788H   R   SEG=MAIN   3634 3749#
LLDI2. . . . . . .  C ADDR   0D61H   R   SEG=MAIN   2242 2246#
LLDI23 . . . . . .  C ADDR   0D55H   R   SEG=MAIN   2234 2239#
LLDI3. . . . . . .  C ADDR   0D5CH   R   SEG=MAIN   2241 2243#
LLEV2. . . . . . .  C ADDR   0FECH   R   SEG=MAIN   2607 2641#
LLMUL. . . . . . .  C ADDR   28F2H   R   SEG=MAIN   6656#
LLSUB. . . . . . .  C ADDR   2977H   R   SEG=MAIN   6738#
LLTOF. . . . . . .  C ADDR   0432H   A      7882#
LMUL . . . . . . .  C ADDR   28F2H   R   SEG=MAIN   5858 6064 6658#
LOA3_X . . . . . .  C ADDR   26D2H   R   SEG=MAIN   1851 6105#
LOAB12 . . . . . .  C ADDR   2245H   R   SEG=MAIN   3031 5482#
LOAD . . . . . . .  D ADDR   00B7H   A      391# 2300 2343 2882 3027 5148
LOADB. . . . . . .  C ADDR   1278H   R   SEG=MAIN   3022 3025# 3058 3064
LOADB2 . . . . . .  C ADDR   12A4H   R   SEG=MAIN   3045 3049#
LOADCLE. . . . . .  C ADDR   132EH   R   SEG=MAIN   3119# 3302
LOADKD . . . . . .  C ADDR   2262H   R   SEG=MAIN   5515#
LOADR2 . . . . . .  C ADDR   2254H   R   SEG=MAIN   3559 3651 4115 4210 4237 5498#
LOADT. . . . . . .  C ADDR   2063H   R   SEG=MAIN   2302 2349 2888 5148#
LOADUS . . . . . .  C ADDR   2002H   R   SEG=MAIN   610 1344 1533 2209 2257 2833 2861 3034 4481 5069#
LOAHL_R2 . . . . .  C ADDR   1D6AH   R   SEG=MAIN   4538 4550 4601# 4710 4726 4861 4876
LOBLOK . . . . . .  C ADDR   14AFH   R   SEG=MAIN   3289 3346# 3365
LOCLE. . . . . . .  C ADDR   1329H   R   SEG=MAIN   3108 3117#
LOD1 . . . . . . .  C ADDR   2072H   R   SEG=MAIN   5156# 5161
LODT . . . . . . .  C ADDR   207EH   R   SEG=MAIN   5168# 5173
LOIZMK . . . . . .  C ADDR   11C7H   R   SEG=MAIN   2921# 2958
LOKAME1. . . . . .  C ADDR   1834H   R   SEG=MAIN   3841#
LOLEVT . . . . . .  C ADDR   2065H   R   SEG=MAIN   2189 5149#
LOLIST . . . . . .  C ADDR   131DH   R   SEG=MAIN   3110#
LOME1. . . . . . .  C ADDR   1B39H   R   SEG=MAIN   4291# 4295 4298 4301 4304 4308 4311 4314 4317 4321
LOMENU . . . . . .  C ADDR   1B31H   R   SEG=MAIN   2490 2503 3841 3883 3906 4288#
LOOP . . . . . . .  C ADDR   1FBEH   R   SEG=MAIN   5006# 5007
LOOPS. . . . . . .  C ADDR   284BH   R   SEG=MAIN   6537# 6570
LOSPUS . . . . . .  C ADDR   203CH   R   SEG=MAIN   1957 5108#
LOSTAT . . . . . .  C ADDR   1345H   R   SEG=MAIN   3123 3129#
LOTEXT . . . . . .  C ADDR   207AH   R   SEG=MAIN   1427 1431 1524 2220 2380 2388 2396 2510 2514 2546 2555 2563 2572
                                           2580 2824 2914 2984 3069 3111 3120 3126 3131 3137 3152 3314 3347 3359 3414
                                           3536 3600 3624 3780 3816 3824 3837 3858 3863 3902 4011 4057 4061 4219 4291
                                           4398 5165# 5732
LOTP . . . . . . .  C ADDR   22B8H   R   SEG=MAIN   5556# 5566 5569
LOTPUS . . . . . .  C ADDR   22B0H   R   SEG=MAIN   3914 5103 5553#
LOU. . . . . . . .  C ADDR   0D67H   R   SEG=MAIN   2229 2245 2249#
LOUIZM . . . . . .  C ADDR   0D44H   R   SEG=MAIN   2229# 2254 5100
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   136

LOUTF. . . . . . .  C ADDR   0FDFH   R   SEG=MAIN   2633# 2642 2649
LOVICH . . . . . .  C ADDR   11BDH   R   SEG=MAIN   2917# 2951 2972 4250
LOWR . . . . . . .  C ADDR   1337H   R   SEG=MAIN   3117 3123#
LOWR1. . . . . . .  C ADDR   133CH   R   SEG=MAIN   3125# 3306
LSUB . . . . . . .  C ADDR   2977H   R   SEG=MAIN   1140 1313 5058 6739#
LTEMP. . . . . . .  N NUMB   0008H   A      1056 1058 1059 1060 5388 5389 5390 5391 5910 5913 5916 5919 5962 5963
                                           5964 5965 6154# 6528 6529 6530 6531 6540 6544 6548 6552 6555 6556 6557
                                           6558 6559 6560 6561 6562 6563 6564 6565 6566 6569 6572 6577 6581 6585 6595
                                           6598 6601 6604 6620 6623 6624 6626 6627 6629 6630 6632 6637 6638 6639 6640
                                           6660 6665 6673 6681 6686 6697 6705 6711 6719 6725 7093 7094 7133 7138 7140
                                           7149 7150 7151 7152 7383 7391 7404 7407 7410 7413 7993 7996 7999 8002
LWR. . . . . . . .  C ADDR   25A2H   R   SEG=MAIN   5849# 5853
LWRX . . . . . . .  C ADDR   2566H   R   SEG=MAIN   5794# 5806
LWTOF. . . . . . .  C ADDR   042FH   A      7878#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   25BDH   R   SEG=MAIN   1614 3688 4575 4746 5857 5862 5867# 5899
MAIN . . . . . . .  C SEG    29D4H       REL=UNIT   237 294# 447
MANT1. . . . . . .  N NUMB   0002H   A      7091# 7118 7167 7168
MANT2. . . . . . .  N NUMB   0008H   A      7093# 7144 7145 7276 7278 7279 7281 7282 7284 7285 7287 7326 7327 7329
                                           7330 7332 7333 7335 7336 7340 7342 7345 7348 7446 7448 7449 7451 7452 7454
                                           7455 7457 7508 7510 7511 7513 7514 7516 7517 7519 7601 7605 7609 7613 7617
                                           7620 7623 7626
MARK0_8. . . . . .  C ADDR   0E88H   R   SEG=MAIN   2407 2425 2427#
MARKER . . . . . .  D ADDR   00B2H   A      389# 550 2127 2367 2406 2416 2424 2434 2440 2615 2623 2659 2666 2678 2753
                                           2962 2979 3000 3093 3199 3282 3322 3330 3351 3377 3384 3442 3482 3489 3529
                                           3571 3626 3642 3754 3884 4038 4051 4072 4079 4126 4159 4178 4185 4215 4246
                                           5584 5610 5635 5646 5704
MARLE. . . . . . .  C ADDR   232CH   R   SEG=MAIN   3497 5632#
MARRI. . . . . . .  C ADDR   2339H   R   SEG=MAIN   2686 5645#
MAS10. . . . . . .  C ADDR   03ACH   R   SEG=MAIN   833 846#
MAS20. . . . . . .  C ADDR   042CH   R   SEG=MAIN   846 901#
MAS4 . . . . . . .  C ADDR   0520H   R   SEG=MAIN   899 1002#
MAS5DIV. . . . . .  C ADDR   0594H   R   SEG=MAIN   1040 1045 1050 1054 1062#
MASFULL. . . . . .  C ADDR   055BH   R   SEG=MAIN   1029 1033#
MASS0. . . . . . .  X ADDR   0100H   A      410 411# 834 839 868 876 950 958 1007 1014 5836
MASS1. . . . . . .  X ADDR   0104H   A      412# 842 865 879 947 961 1005 1017
MASS10 . . . . . .  X ADDR   0128H   A      421# 923 980
MASS11 . . . . . .  X ADDR   012CH   A      422# 920 982
MASS12 . . . . . .  X ADDR   0130H   A      423# 917 984
MASS13 . . . . . .  X ADDR   0134H   A      424# 914 986
MASS14 . . . . . .  X ADDR   0138H   A      425# 911 988
MASS15 . . . . . .  X ADDR   013CH   A      426# 908 990
MASS16 . . . . . .  X ADDR   0140H   A      427# 906 992
MASS17 . . . . . .  X ADDR   0144H   A      428# 904 994
MASS18 . . . . . .  X ADDR   0148H   A      429# 902 996
MASS19 . . . . . .  X ADDR   014CH   A      430# 998
MASS2. . . . . . .  X ADDR   0108H   A      413# 862 881 944 963 1003 1019
MASS3. . . . . . .  X ADDR   010CH   A      414# 859 883 941 965 1021
MASS4. . . . . . .  X ADDR   0110H   A      415# 856 885 938 967
MASS5. . . . . . .  X ADDR   0114H   A      416# 853 887 935 969
MASS6. . . . . . .  X ADDR   0118H   A      417# 851 889 933 971
MASS7. . . . . . .  X ADDR   011CH   A      418# 849 891 931 973
MASS8. . . . . . .  X ADDR   0120H   A      419# 847 893 929 975
MASS9. . . . . . .  X ADDR   0124H   A      420# 895 926 977
MASX5. . . . . . .  C ADDR   058AH   R   SEG=MAIN   1031 1056#
MAXG . . . . . . .  C ADDR   1E91H   R   SEG=MAIN   4817# 4871
MAXVIX . . . . . .  C ADDR   1EFBH   R   SEG=MAIN   4881 4886#
ME11_15DE. . . . .  C ADDR   1647H   R   SEG=MAIN   3581# 3597
ME11_15DEC . . . .  C ADDR   1833H   R   SEG=MAIN   3581 3840#
ME21_22. . . . . .  C ADDR   0FA7H   R   SEG=MAIN   2580# 2589
ME21_23. . . . . .  C ADDR   1897H   R   SEG=MAIN   3611 3892#
ME21_23DEC . . . .  C ADDR   18B3H   R   SEG=MAIN   3899 3904#
MEAVP. . . . . . .  C ADDR   1135H   R   SEG=MAIN   2841 2844#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   523# 525
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   527# 530
MEM10MS. . . . . .  C ADDR   0262H   R   SEG=MAIN   645#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   137

MEM12NO. . . . . .  C ADDR   1471H   R   SEG=MAIN   3300 3304#
MENG . . . . . . .  C ADDR   1CB6H   R   SEG=MAIN   4498# 4548
MENU12 . . . . . .  C ADDR   1B3DH   R   SEG=MAIN   4289 4293#
MENU13 . . . . . .  C ADDR   1B45H   R   SEG=MAIN   4293 4296#
MENU14 . . . . . .  C ADDR   1B4DH   R   SEG=MAIN   4296 4299#
MENU15 . . . . . .  C ADDR   1B55H   R   SEG=MAIN   4299 4302#
MENU21 . . . . . .  C ADDR   1B5DH   R   SEG=MAIN   4302 4306#
MENU22 . . . . . .  C ADDR   1B65H   R   SEG=MAIN   4306 4309#
MENU23 . . . . . .  C ADDR   1B6DH   R   SEG=MAIN   4309 4312#
MENU31 . . . . . .  C ADDR   1B75H   R   SEG=MAIN   4312 4315#
MENU41 . . . . . .  C ADDR   1B7DH   R   SEG=MAIN   4315 4319#
MENUOFF. . . . . .  C ADDR   1118H   R   SEG=MAIN   2820 2829#
MENUON . . . . . .  C ADDR   1674H   R   SEG=MAIN   3602#
MERR . . . . . . .  C ADDR   10FEH   R   SEG=MAIN   2816# 2819
ME_14. . . . . . .  C ADDR   1350H   R   SEG=MAIN   3134#
ME_41. . . . . . .  C ADDR   1928H   R   SEG=MAIN   3926 3969#
MIDL . . . . . . .  C ADDR   287EH   R   SEG=MAIN   6532 6567#
MIGN . . . . . . .  C ADDR   2398H   R   SEG=MAIN   4938 5704#
MIGNN. . . . . . .  C ADDR   23A0H   R   SEG=MAIN   5706 5711#
MIN4_HL. . . . . .  C ADDR   1D76H   R   SEG=MAIN   4614# 4628 4654 4779 4805
MING . . . . . . .  C ADDR   1DB8H   R   SEG=MAIN   4666# 4720
MINIVIX. . . . . .  C ADDR   1E22H   R   SEG=MAIN   4731 4736# 4886
MLABL2 . . . . . .  C ADDR   14DAH   R   SEG=MAIN   3315 3369# 3400 3635
MLABL2R. . . . . .  C ADDR   16B2H   R   SEG=MAIN   3635# 3638
MMM. . . . . . . .  C ADDR   025DH   R   SEG=MAIN   641#
MO220. . . . . . .  C ADDR   08C7H   R   SEG=MAIN   1155 1323 1518#
MO500I . . . . . .  C ADDR   0837H   R   SEG=MAIN   1374 1430#
MO500R . . . . . .  C ADDR   082BH   R   SEG=MAIN   1370 1426#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0F3AH   R   SEG=MAIN   2532# 2543 2552 2560 2569
MOUTKMEM . . . . .  C ADDR   164AH   R   SEG=MAIN   3582# 3587
MOVE28 . . . . . .  C ADDR   262AH   R   SEG=MAIN   1219 1237 1284 1376 2033 2071 4333 4416 4434 4540 4552 4567 4709
                                           4725 4860 4875 5962#
MOVE82 . . . . . .  C ADDR   21B4H   R   SEG=MAIN   5388#
MOVEA3 . . . . . .  C ADDR   0934H   R   SEG=MAIN   1570 1595#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2408 2631 2671 2981 3288 3331 3339 3393 3445 3490 3629 3887 4040
                                           4082 4160 4188 5639
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2404 2624 2628 2667 2982 3287 3335 3385 3389 3444 3494 3628 3886
                                           4041 4164 5648
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7443# 7486
MUP11. . . . . . .  C ADDR   0257H   A      7490# 7535
MUP2 . . . . . . .  C ADDR   0297H   A      7520 7534#
MUP3 . . . . . . .  C ADDR   026CH   A      7489 7505#
MVV11. . . . . . .  C ADDR   14AAH   R   SEG=MAIN   3311 3344#
MVV12. . . . . . .  C ADDR   14C2H   R   SEG=MAIN   3344 3356#
N12DELCH . . . . .  C ADDR   0C4FH   R   SEG=MAIN   2089 2097#
N4DELCH. . . . . .  C ADDR   0BFBH   R   SEG=MAIN   2013 2051#
N8DELCH. . . . . .  C ADDR   0C3DH   R   SEG=MAIN   2051 2089#
NBIMENU. . . . . .  C ADDR   0F40H   R   SEG=MAIN   2536#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 581 3175 3348 3412 3622 6054
NE05 . . . . . . .  C ADDR   0358H   A      7672 7674 7676 7679#
NELEM. . . . . . .  D ADDR   0037H   A      312# 582 3653 3759 3763
NEXIN. . . . . . .  C ADDR   1F59H   R   SEG=MAIN   4941# 4948
NEXTMAX. . . . . .  C ADDR   1EC6H   R   SEG=MAIN   4849 4857#
NEXTMEA. . . . . .  C ADDR   1CEBH   R   SEG=MAIN   4530 4538#
NEXTMIN. . . . . .  C ADDR   1DEDH   R   SEG=MAIN   4698 4706#
NMINUS . . . . . .  C ADDR   0650H   R   SEG=MAIN   1185 1189#
NMINUS3. . . . . .  C ADDR   05B4H   R   SEG=MAIN   1087 1089#
NNDELCH. . . . . .  C ADDR   0BBBH   R   SEG=MAIN   1998 2013#
NNMEMB . . . . . .  C ADDR   1033H   R   SEG=MAIN   2534 2694#
NNNUL. . . . . . .  C ADDR   09ABH   R   SEG=MAIN   1676 1679#
NO . . . . . . . .  C ADDR   2866H   R   SEG=MAIN   6542 6546 6550 6554#
NO0KEY . . . . . .  C ADDR   0274H   R   SEG=MAIN   652 657#
NO10MSV. . . . . .  C ADDR   15EEH   R   SEG=MAIN   3534 3539#
NO11V6 . . . . . .  C ADDR   0E3AH   R   SEG=MAIN   2375 2383#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   138

NO12V6 . . . . . .  C ADDR   0E4DH   R   SEG=MAIN   2383 2391#
NO13V6 . . . . . .  C ADDR   0E60H   R   SEG=MAIN   2391 2401#
NO21P7 . . . . . .  C ADDR   1ACEH   R   SEG=MAIN   4198 4228#
NO23RI . . . . . .  C ADDR   0F04H   R   SEG=MAIN   2501 2505#
NO2MSV . . . . . .  C ADDR   15EBH   R   SEG=MAIN   3538# 3539 3549
NO2PARN. . . . . .  C ADDR   0920H   R   SEG=MAIN   1572 1578#
NO31N. . . . . . .  C ADDR   15A5H   R   SEG=MAIN   3503#
NO31RI . . . . . .  C ADDR   0F23H   R   SEG=MAIN   2507 2522#
NO3PARN. . . . . .  C ADDR   0916H   R   SEG=MAIN   1572# 1657
NO4DEL . . . . . .  C ADDR   0B8EH   R   SEG=MAIN   1961 1979#
NOAVK. . . . . . .  C ADDR   0622H   R   SEG=MAIN   1111 1160#
NOAVP. . . . . . .  C ADDR   0743H   R   SEG=MAIN   1304# 1335 1338
NOBAVP . . . . . .  C ADDR   09C7H   R   SEG=MAIN   1429 1433 1513 1695 1699#
NOBEF99. . . . . .  C ADDR   031DH   R   SEG=MAIN   749 765# 784 802 818
NOBIT. . . . . . .  C ADDR   0245H   A      7458 7472#
NOBITIZM . . . . .  C ADDR   09D0H   R   SEG=MAIN   1701 1704#
NOBL21 . . . . . .  C ADDR   0FB0H   R   SEG=MAIN   2577 2585#
NOBL22 . . . . . .  C ADDR   0FBAH   R   SEG=MAIN   2585 2605#
NOBUF. . . . . . .  C ADDR   0A05H   R   SEG=MAIN   1731 1733#
NOBUF0 . . . . . .  C ADDR   0B36H   R   SEG=MAIN   1846 1926#
NOCHI0 . . . . . .  C ADDR   08F7H   R   SEG=MAIN   1324 1544#
NOCHN10. . . . . .  C ADDR   0577H   R   SEG=MAIN   1042 1047#
NOCHN2 . . . . . .  C ADDR   056CH   R   SEG=MAIN   1037 1042#
NOCHN20. . . . . .  C ADDR   0582H   R   SEG=MAIN   1047 1052#
NODI2. . . . . . .  C ADDR   08DDH   R   SEG=MAIN   1521 1528#
NODI6. . . . . . .  C ADDR   1146H   R   SEG=MAIN   2851 2855#
NODI8. . . . . . .  C ADDR   0982H   R   SEG=MAIN   1641 1647#
NODI8K . . . . . .  C ADDR   1992H   R   SEG=MAIN   4026 4031#
NODI8_43 . . . . .  C ADDR   1761H   R   SEG=MAIN   3716 3722#
NODI9. . . . . . .  C ADDR   08E2H   R   SEG=MAIN   1530 1533#
NODI9_43 . . . . .  C ADDR   176CH   R   SEG=MAIN   3722 3730#
NODIS9 . . . . . .  C ADDR   0991H   R   SEG=MAIN   1647 1659#
NODISK9. . . . . .  C ADDR   199AH   R   SEG=MAIN   4030 4031 4038#
NOENDLI. . . . . .  C ADDR   26C7H   R   SEG=MAIN   6088 6093#
NOEQU1 . . . . . .  C ADDR   1018H   R   SEG=MAIN   2670 2674#
NOEQU2 . . . . . .  C ADDR   159FH   R   SEG=MAIN   3493 3497#
NOFIZM . . . . . .  C ADDR   0E1CH   R   SEG=MAIN   2339 2371#
NOFT1. . . . . . .  C ADDR   0DF5H   R   SEG=MAIN   2344 2348#
NOFZ . . . . . . .  C ADDR   0B31H   R   SEG=MAIN   1917 1921#
NOH37. . . . . . .  C ADDR   11DCH   R   SEG=MAIN   2910 2934# 2945
NOHNOT1. . . . . .  C ADDR   12B7H   R   SEG=MAIN   3016 3059#
NOHNOT2. . . . . .  C ADDR   12ACH   R   SEG=MAIN   3052# 3059
NOKLB. . . . . . .  C ADDR   09FFH   R   SEG=MAIN   1729 1731#
NOKORR . . . . . .  C ADDR   05CAH   R   SEG=MAIN   1098 1101#
NOLAH. . . . . . .  C ADDR   119EH   R   SEG=MAIN   2879 2897#
NOLI_43. . . . . .  C ADDR   17DCH   R   SEG=MAIN   3749 3794#
NOM31. . . . . . .  C ADDR   157DH   R   SEG=MAIN   3397 3472#
NOM32. . . . . . .  C ADDR   15F6H   R   SEG=MAIN   3472 3545#
NOM33. . . . . . .  C ADDR   1624H   R   SEG=MAIN   3545 3565#
NOMARL . . . . . .  C ADDR   1A76H   R   SEG=MAIN   4162 4168 4172#
NOMAXI . . . . . .  C ADDR   1EDEH   R   SEG=MAIN   4866 4869#
NOME11 . . . . . .  C ADDR   1461H   R   SEG=MAIN   3297#
NOMEM11. . . . . .  C ADDR   0F5BH   R   SEG=MAIN   2539 2549#
NOMEM12. . . . . .  C ADDR   0F71H   R   SEG=MAIN   2549 2557#
NOMEM13. . . . . .  C ADDR   0F87H   R   SEG=MAIN   2557 2566#
NOMEMK . . . . . .  C ADDR   145EH   R   SEG=MAIN   3082 3295#
NOMINI . . . . . .  C ADDR   1E05H   R   SEG=MAIN   4715 4718#
NON1C. . . . . . .  C ADDR   0DCDH   R   SEG=MAIN   2322 2326#
NONULAVT . . . . .  C ADDR   0607H   R   SEG=MAIN   1106 1145#
NONULDEL . . . . .  C ADDR   0B70H   R   SEG=MAIN   1949 1960#
NOP3_0 . . . . . .  C ADDR   08FBH   R   SEG=MAIN   1550#
NOPART1. . . . . .  C ADDR   0321H   R   SEG=MAIN   738 772#
NOPART2. . . . . .  C ADDR   0341H   R   SEG=MAIN   772 791#
NOPART3. . . . . .  C ADDR   0361H   R   SEG=MAIN   791 807#
NOPART4. . . . . .  C ADDR   0381H   R   SEG=MAIN   807 824#
NOPLUS . . . . . .  C ADDR   0EB0H   R   SEG=MAIN   2452 2455#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   139

NOPOIN7. . . . . .  C ADDR   1A8DH   R   SEG=MAIN   4158 4193#
NOPOINT. . . . . .  C ADDR   1A59H   R   SEG=MAIN   4152 4156#
NOR11. . . . . . .  C ADDR   0EC4H   R   SEG=MAIN   2466#
NORDN. . . . . . .  C ADDR   00F6H   A      7179# 7212
NORDN1 . . . . . .  C ADDR   0107H   A      7181 7195#
NORIG2 . . . . . .  C ADDR   0FF5H   R   SEG=MAIN   2638 2646#
NORIM6 . . . . . .  C ADDR   1033H   R   SEG=MAIN   2698#
NORIME . . . . . .  C ADDR   0EEAH   R   SEG=MAIN   2488 2492#
NORIME1. . . . . .  C ADDR   0EE4H   R   SEG=MAIN   2490# 2493 2506
NORM1. . . . . . .  C ADDR   00F0H   A      7174# 7371 7548 7650 7867
NORR11 . . . . . .  C ADDR   11F4H   R   SEG=MAIN   2947#
NORR12 . . . . . .  C ADDR   1204H   R   SEG=MAIN   2947 2954# 2968
NORUP. . . . . . .  C ADDR   0119H   A      7178 7215#
NORUP1 . . . . . .  C ADDR   011EH   A      7220# 7238
NORUP2 . . . . . .  C ADDR   0132H   A      7222 7239#
NORVICH. . . . . .  C ADDR   0A08H   R   SEG=MAIN   1656 1734#
NOSUB. . . . . . .  C ADDR   28A1H   R   SEG=MAIN   6576 6580 6584 6589#
NOT1IN . . . . . .  C ADDR   0B46H   R   SEG=MAIN   1807 1934#
NOT1_7 . . . . . .  C ADDR   10EEH   R   SEG=MAIN   2801 2808#
NOT2IN . . . . . .  C ADDR   0B4EH   R   SEG=MAIN   1934 1938#
NOT2_7 . . . . . .  C ADDR   10F9H   R   SEG=MAIN   2808 2813#
NOT3IN . . . . . .  C ADDR   0B56H   R   SEG=MAIN   1938 1941#
NOTAKT . . . . . .  C ADDR   09DAH   R   SEG=MAIN   1705 1709#
NOTE21 . . . . . .  C ADDR   06C7H   R   SEG=MAIN   1206 1248#
NOTE22 . . . . . .  C ADDR   06E2H   R   SEG=MAIN   1248 1260#
NOTESTIZM. . . . .  C ADDR   06FAH   R   SEG=MAIN   1169 1272#
NOTT1. . . . . . .  C ADDR   0AE6H   R   SEG=MAIN   1879 1888#
NOTT2. . . . . . .  C ADDR   0AF1H   R   SEG=MAIN   1888 1893#
NOTT3. . . . . . .  C ADDR   0AFCH   R   SEG=MAIN   1893 1899#
NOTT4. . . . . . .  C ADDR   0B10H   R   SEG=MAIN   1899 1907#
NOTT5. . . . . . .  C ADDR   0B1EH   R   SEG=MAIN   1907 1912#
NOT_1. . . . . . .  C ADDR   0DD4H   R   SEG=MAIN   2326 2331#
NOT_10 . . . . . .  C ADDR   0DD4H   R   SEG=MAIN   2330#
NOVIR. . . . . . .  C ADDR   0ECCH   R   SEG=MAIN   2360 2477#
NOVIR1 . . . . . .  C ADDR   0E06H   R   SEG=MAIN   2360# 2371
NOZMEA . . . . . .  C ADDR   1D66H   R   SEG=MAIN   4595 4597#
NOZMIN . . . . . .  C ADDR   1E59H   R   SEG=MAIN   4766 4768#
NOZZMI . . . . . .  C ADDR   0972H   R   SEG=MAIN   1636 1638#
NOZZMI43 . . . . .  C ADDR   1751H   R   SEG=MAIN   3711 3713#
NSEC1. . . . . . .  C ADDR   09B4H   R   SEG=MAIN   1680 1683#
NSEC10 . . . . . .  C ADDR   09BDH   R   SEG=MAIN   1682 1685 1690#
NSEC11 . . . . . .  C ADDR   09BBH   R   SEG=MAIN   1683 1687#
NUERR. . . . . . .  D ADDR   0039H   A      310# 4045 4914 4928 5733
NULAVT . . . . . .  C ADDR   0BA0H   R   SEG=MAIN   1996#
NUMSIZE. . . . . .  N NUMB   0004H   A      6157# 6179 6217 6224 6299 6319
OBOARD . . . . . .  C ADDR   27D7H   R   SEG=MAIN   6400 6414#
OBOARD1. . . . . .  C ADDR   281FH   R   SEG=MAIN   6473 6486#
OK1. . . . . . . .  C ADDR   0186H   A      7305 7320#
OK2. . . . . . . .  C ADDR   01A0H   A      7322 7337#
OK3. . . . . . . .  C ADDR   01C4H   A      7354 7370#
ONBOAR1. . . . . .  C ADDR   27FDH   R   SEG=MAIN   6435 6452#
ONBOARD. . . . . .  C ADDR   27B1H   R   SEG=MAIN   6364 6378#
ONMEM11. . . . . .  C ADDR   12D9H   R   SEG=MAIN   2828 2843 2845 3076# 3601 3607 3838 3842 3847 3861 3866 3889 3903
                                           3907 3918
ONMEM12. . . . . .  C ADDR   18BAH   R   SEG=MAIN   3908# 3911 3930
ONMEM13. . . . . .  C ADDR   1A39H   R   SEG=MAIN   4083 4138# 4142 4144
ONMIG. . . . . . .  C ADDR   23AEH   R   SEG=MAIN   5715 5724#
ONVICH . . . . . .  C ADDR   0D3CH   R   SEG=MAIN   2212 2224#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 486
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 479 483
OUT43. . . . . . .  C ADDR   1775H   R   SEG=MAIN   3739#
OUT6 . . . . . . .  C ADDR   1033H   R   SEG=MAIN   2103 2167 2282 2287 2292 2307 2313 2337 2346 2351 2358 2369 2491
                                           2504 2512 2516 2699#
OUT7 . . . . . . .  C ADDR   1AFCH   R   SEG=MAIN   2729 2730 2805 2812 2816 2834 2885 2890 2941 3080 3160 3362 3456
                                           3741 3748 3793 3876 3964 4059 4063 4133 4147 4190 4195 4225 4253#
OUTA . . . . . . .  C ADDR   2346H   R   SEG=MAIN   2986 5656#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   140

OUTA2. . . . . . .  C ADDR   2360H   R   SEG=MAIN   5667# 5672
OUTB . . . . . . .  C ADDR   2369H   R   SEG=MAIN   5676#
OUTB2. . . . . . .  C ADDR   238FH   R   SEG=MAIN   5694# 5699
OUTB3. . . . . . .  C ADDR   237AH   R   SEG=MAIN   5680 5685#
OUTF . . . . . . .  C ADDR   0DFCH   R   SEG=MAIN   2354# 2377 2381 2385 2389 2393 2397 2422 2445 2454 2457 2464 2532
                                           2547 2556 2564 2573 2583 2630 2633 2673 2687 2690 2931 2932 3908
OUTFL. . . . . . .  C ADDR   0EC1H   R   SEG=MAIN   2460 2464#
OUTKMEM. . . . . .  C ADDR   12E6H   R   SEG=MAIN   3084# 3102 3582
OUTMA. . . . . . .  C ADDR   0E9AH   R   SEG=MAIN   2443 2445#
OUTMAX . . . . . .  C ADDR   1EE3H   R   SEG=MAIN   4853 4872#
OUTMEA . . . . . .  C ADDR   1D06H   R   SEG=MAIN   4534 4549#
OUTMENU. . . . . .  C ADDR   1876H   R   SEG=MAIN   3875#
OUTMIN . . . . . .  C ADDR   1E0AH   R   SEG=MAIN   4702 4722#
OUTR . . . . . . .  C ADDR   088EH   R   SEG=MAIN   1459 1482#
OUTR5. . . . . . .  C ADDR   08AAH   R   SEG=MAIN   1480 1501#
OUTSKO . . . . . .  C ADDR   191BH   R   SEG=MAIN   3960 3962#
OUTSKO1. . . . . .  C ADDR   1918H   R   SEG=MAIN   3958 3961#
OUTVICH. . . . . .  C ADDR   0E09H   R   SEG=MAIN   2361# 2373
OUTVIR . . . . . .  C ADDR   0CD0H   R   SEG=MAIN   2134 2163#
OUT_KALI . . . . .  C ADDR   1C01H   R   SEG=MAIN   4400#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6356
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 4941 4945
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 457
P1 . . . . . . . .  D ADDR   0090H   A      32# 613 614 4954 4956 4959 4962 4966 4968 4969 5021 5023 5025 5455 5462
                                           5992 5995 5997 6000
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 458
P2 . . . . . . . .  D ADDR   00A0H   A      47# 4987 4991 5000
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 459
P3 . . . . . . . .  D ADDR   00B0H   A      62# 468 2133 2135 2137 2138 2141 2142 2146 2147 2149 2150 2152 2153 2155
                                           2156 2158 2159 2340 2341 2372 2373 2376 2377 2384 2385 2392 2393 2401 2402
                                           2447 2448 2458 2459 2485 2486 2499 2500 2526 2527 2528 2529 2541 2542 2550
                                           2551 2558 2559 2567 2568 2606 2607 2641 2642 2650 2651 2688 2689 2715 2760
                                           2762 2764 2765 2768 2769 2771 2772 2774 2775 2777 2778 2780 2781 2783 2784
                                           2880 2883 2909 2910 2934 2935 2948 2949 2955 2956 2969 2970 3014 3015 3101
                                           3102 3105 3106 3147 3148 3164 3165 3166 3167 3207 3208 3297 3298 3308 3309
                                           3399 3400 3401 3402 3473 3474 3503 3504 3546 3547 3548 3549 3566 3567 3568
                                           3569 3586 3587 3594 3595 3637 3638 3639 3640 3750 3751 3830 3831 3897 3898
                                           3910 3911 3927 3928 3929 3930 3970 3971 3972 3973 4141 4142 4143 4144 4150
                                           4151 4156 4157 4193 4194 4269 4986 4988 4990 4996 4997 4998 5001 5002
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2712 2714 4266 4268
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 461
P4 . . . . . . . .  D ADDR   0084H   A      20# 1951 1972 1999 2082 2236 2238 4386 5078 5081 5097 5099 5558
P5 . . . . . . . .  D ADDR   0085H   A      21# 556 565 1953 1974 2001 2004 2009 2044 2046 2084 2246 2248 4390 5086
                                           5089 5119 5122 5562
P6 . . . . . . . .  D ADDR   0086H   A      22# 1858 1860 1864 1866 2717 2719 2723 2725 4273 4275 4279 4281
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 462
PACK1. . . . . . .  C ADDR   00DEH   A      7157# 7372 7549 7651 7868
PARERR . . . . . .  C ADDR   19A7H   R   SEG=MAIN   4002 4004 4006 4045#
PARN . . . . . . .  D ADDR   00AFH   A      386# 562 1670 2317 3042
PAROL. . . . . . .  D ADDR   00A8H   A      382#
PART . . . . . . .  D ADDR   009AH   A      376# 557 736 1076 1118 1145 1160 1679 1735 1878 2276 2318 2799 3025 3041
                                           3446 3533 5090 5482
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   141

PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 455
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 456
PCON . . . . . . .  D ADDR   0087H   A      23# 502
POIN3. . . . . . .  C ADDR   1A8CH   R   SEG=MAIN   4191# 4226
POINA. . . . . . .  C ADDR   1AC9H   R   SEG=MAIN   4189 4225#
POINA1 . . . . . .  C ADDR   1A71H   R   SEG=MAIN   4161 4168#
POINA2 . . . . . .  C ADDR   1A6BH   R   SEG=MAIN   4164# 4169
POZB . . . . . . .  C ADDR   1AECH   R   SEG=MAIN   4239 4243#
PROD . . . . . . .  N NUMB   000CH   A      7094# 7438 7439 7440 7441 7461 7462 7463 7465 7466 7468 7469 7471 7493
                                           7495 7496 7498 7499 7501 7502 7504 7523 7524 7525 7527 7528 7530 7531 7533
                                           7544 7545 7546 7547 7568 7569 7570 7571 7587 7589 7590 7592 7593 7595 7596
                                           7598 7628 7645 7646 7647 7648
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 7899 7903 7956 7959
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2112 2708 2737 4264 5901 5903 6829
                                           6837
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0CDAH   R   SEG=MAIN   2157 2169#
QUES . . . . . . .  C ADDR   1392H   R   SEG=MAIN   3160# 3165
QU_AVP . . . . . .  C ADDR   0740H   R   SEG=MAIN   1301 1303#
R10. . . . . . . .  N NUMB   000AH   A      442# 648 1107 1379 1387 4005 5530 7922
R11. . . . . . . .  N NUMB   000BH   A      443# 649 1108 1380 1386 5534 7926
R8 . . . . . . . .  N NUMB   0008H   A      440# 509 1377 1389 3855 4001 5041 5522 7914
R9 . . . . . . . .  N NUMB   0009H   A      441# 1378 1388 4003 5042 5526 7918
RAFTERK. . . . . .  C ADDR   05E0H   R   SEG=MAIN   1115# 1121
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   13D9H   R   SEG=MAIN   3204# 3208
RE1. . . . . . . .  C ADDR   1FC7H   R   SEG=MAIN   5021# 5027
RE11_7 . . . . . .  C ADDR   0688H   R   SEG=MAIN   1217# 1259 1270
RE4BYTE. . . . . .  C ADDR   0454H   A      508 3854 3999 7910#
REA3_X . . . . . .  C ADDR   26E4H   R   SEG=MAIN   3683 6122#
REACP. . . . . . .  D ADDR   0077H   A      304# 628 630 632 634 677 693 701 709 718 725 740 775 793 809 825 2018
                                           2020 2022 2024 2056 2058 2060 2062
READ . . . . . . .  C ADDR   1FC5H   R   SEG=MAIN   627 629 631 5020#
READYACP . . . . .  C ADDR   02D8H   R   SEG=MAIN   719 729#
READ_X2. . . . . .  C ADDR   1FADH   R   SEG=MAIN   4995# 5006
REBYTE . . . . . .  C ADDR   0236H   R   SEG=MAIN   612# 646 660 766 1977 1987 2011 2049 2087 2096 2098
REBYTE2. . . . . .  C ADDR   046CH   A      1209 1217 1235 1251 1262 1278 4406 4414 7930#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 463
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   1127H   R   SEG=MAIN   2838# 2840
RESAR2 . . . . . .  C ADDR   2636H   R   SEG=MAIN   741 776 794 810 826 838 874 956 1012 1133 1178 1286 1307 1359
                                           1382 1405 1558 1612 1830 1927 1964 2867 4327 4335 4354 4432 4454 4542 4554
                                           4569 4649 4707 4723 4737 4800 4858 4873 5657 5677 5970# 6106
RESAR8 . . . . . .  C ADDR   25F4H   R   SEG=MAIN   1089 1139 1181 1189 1312 2031 2069 5909#
RESA_HL. . . . . .  C ADDR   26C8H   R   SEG=MAIN   1850 4487 4625 4775 6096#
REZAM. . . . . . .  D ADDR   008CH   A      372# 2066
REZAP. . . . . . .  D ADDR   0088H   A      371# 2028
REZMUL . . . . . .  C ADDR   0638H   R   SEG=MAIN   1153 1167 1176#
REZ_A. . . . . . .  D ADDR   0062H   A      361# 754 827 837 873 955 1011 1963
REZ_A0 . . . . . .  D ADDR   006AH   A      363# 1138 1311 1349 1539 2207 2859 2868 2875
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   142

REZ_A1 . . . . . .  D ADDR   0066H   A      362# 1070 1136 1177 1291 1306 1325
REZ_A2 . . . . . .  D ADDR   007BH   A      364# 1308
REZ_A3 . . . . . .  D ADDR   009CH   A      378# 1141 1314 1358 1557 1611 1740 2866 4326 4431 6105 6136
REZ_AK . . . . . .  D ADDR   00A4H   A      381# 4120 4334
REZ_AME. . . . . .  D ADDR   005EH   A      359# 1082 1091 1132 1191 1285
REZ_DEL. . . . . .  D ADDR   00C5H   A      396# 756
REZ_R. . . . . . .  D ADDR   00C9H   A      397# 1391 1404
RGOTO7 . . . . . .  C ADDR   157AH   R   SEG=MAIN   3470# 3504
RHNOR11. . . . . .  C ADDR   11CEH   R   SEG=MAIN   2908 2920 2926#
RHNOT1 . . . . . .  C ADDR   1195H   R   SEG=MAIN   2883 2892#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0EEDH   R   SEG=MAIN   2483 2495#
RI6. . . . . . . .  C ADDR   0EE7H   R   SEG=MAIN   2486 2491# 2500 2525 2529
RIGBLO . . . . . .  C ADDR   0FBDH   R   SEG=MAIN   2606# 2637 2639
RIGBLOK. . . . . .  C ADDR   0FFBH   R   SEG=MAIN   2650#
RIGHT2 . . . . . .  C ADDR   0D01H   R   SEG=MAIN   2184 2188#
RIGHT3 . . . . . .  C ADDR   0D05H   R   SEG=MAIN   2186 2191#
RIKN . . . . . . .  C ADDR   0E72H   R   SEG=MAIN   2408# 2426
RIZMAN . . . . . .  C ADDR   0C5FH   R   SEG=MAIN   2107# 2143
RI_31. . . . . . .  C ADDR   0F07H   R   SEG=MAIN   2498 2507#
RKNLEFT. . . . . .  C ADDR   1073H   R   SEG=MAIN   2733# 2776
RKNMEM . . . . . .  C ADDR   1064H   R   SEG=MAIN   2728# 2782
RKNNUL . . . . . .  C ADDR   1070H   R   SEG=MAIN   2732# 2770
RKNOPT . . . . . .  C ADDR   0C5CH   R   SEG=MAIN   2106# 2154
RKNRAZR. . . . . .  C ADDR   0C59H   R   SEG=MAIN   2105# 2148
RKVVOD0. . . . . .  C ADDR   1326H   R   SEG=MAIN   3107 3114#
RLABELF. . . . . .  C ADDR   0C56H   R   SEG=MAIN   2104# 2140
RLABELH. . . . . .  C ADDR   106DH   R   SEG=MAIN   2731# 2767
RLABELI. . . . . .  C ADDR   119BH   R   SEG=MAIN   2895#
RLABELK. . . . . .  C ADDR   1198H   R   SEG=MAIN   2894# 2897
RLABELL. . . . . .  C ADDR   0EC9H   R   SEG=MAIN   2475#
RLABELL1 . . . . .  C ADDR   1030H   R   SEG=MAIN   2689 2692#
RLABELN. . . . . .  C ADDR   0F37H   R   SEG=MAIN   2527 2531#
RLABELP. . . . . .  C ADDR   181AH   R   SEG=MAIN   3828# 3831
RLABELS13. . . . .  C ADDR   1925H   R   SEG=MAIN   3967# 3971
RLABELS4 . . . . .  C ADDR   1922H   R   SEG=MAIN   3966# 3969
RLABL2 . . . . . .  C ADDR   138CH   R   SEG=MAIN   3158#
RLABM. . . . . . .  C ADDR   138FH   R   SEG=MAIN   3159# 3163
RLEFCUR. . . . . .  C ADDR   1621H   R   SEG=MAIN   3563# 3567
RLER . . . . . . .  C ADDR   2338H   R   SEG=MAIN   5640 5642#
RLIST_43 . . . . .  C ADDR   16AFH   R   SEG=MAIN   3634# 3636
RMAS4. . . . . . .  C ADDR   0429H   R   SEG=MAIN   899# 901
RME21_23 . . . . .  C ADDR   167FH   R   SEG=MAIN   3592 3611#
RMO220 . . . . . .  C ADDR   061AH   R   SEG=MAIN   1155# 1202
RNNMEMB. . . . . .  C ADDR   0F3DH   R   SEG=MAIN   2534# 2537
RNO3PARN . . . . .  C ADDR   098FH   R   SEG=MAIN   1657# 1671
RNOBUF0. . . . . .  C ADDR   0AA3H   R   SEG=MAIN   1842 1846#
RNOCHI0. . . . . .  C ADDR   0768H   R   SEG=MAIN   1320 1324#
RNOH37 . . . . . .  C ADDR   11F2H   R   SEG=MAIN   2945# 2949 2956 2970
RNOM31 . . . . . .  C ADDR   14F7H   R   SEG=MAIN   3397# 3398
RNOMEMK. . . . . .  C ADDR   12E3H   R   SEG=MAIN   3082# 3100
RNORVICH . . . . .  C ADDR   098DH   R   SEG=MAIN   1600 1601 1656#
RNOT1IN. . . . . .  C ADDR   0A61H   R   SEG=MAIN   1737 1807#
RNOTESTIZM . . . .  C ADDR   0630H   R   SEG=MAIN   1169# 1204
ROUT6. . . . . . .  C ADDR   0C53H   R   SEG=MAIN   2103# 2139
ROUT7. . . . . . .  C ADDR   106AH   R   SEG=MAIN   2730# 2761 2766
ROUTF. . . . . . .  C ADDR   11EFH   R   SEG=MAIN   2941# 3015
RR0. . . . . . . .  N NUMB   0000H   A      433# 2113 2707 2738 4263
RR1. . . . . . . .  N NUMB   0001H   A      434# 2114 2706 2739 4262
RR2. . . . . . . .  N NUMB   0002H   A      436# 1211 1223 1229 1241 1253 1264 2115 2705 2740 3662 3670 4261 4408
                                           4420 4426 4438 5054
RR3. . . . . . . .  N NUMB   0003H   A      437# 1212 1222 1230 1240 1254 1265 2116 2704 2741 3663 3669 4260 4409
                                           4419 4427 4437 5055
RR4. . . . . . . .  N NUMB   0004H   A      1213 1221 1231 1239 1255 1266 2117 2703 2742 3664 3668 4259 4410 4418
                                           4428 4436 6158# 6215 6236 6252 6296 6318
RR5. . . . . . . .  N NUMB   0005H   A      1214 1220 1232 1238 1256 1267 2118 2702 2743 3665 3667 4258 4411 4417
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   143

                                           4429 4435 6159# 6216 6223 6230 6297 6306
RR6. . . . . . . .  N NUMB   0006H   A      435# 2119 2701 2744 4257
RR7. . . . . . . .  N NUMB   0007H   A      438# 2120 2700 2745 4256
RRIR . . . . . . .  C ADDR   2345H   R   SEG=MAIN   5651 5653#
RRMO220. . . . . .  C ADDR   0765H   R   SEG=MAIN   1297 1323#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0929H   R   SEG=MAIN   1584# 1602 1604 1605
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 493 2835
RTIZMRI. . . . . .  C ADDR   0DD8H   R   SEG=MAIN   2334#
RVVIZKO. . . . . .  C ADDR   11D0H   R   SEG=MAIN   2928# 2936
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 561 1856 3713
SAUS . . . . . . .  D ADDR   0036H   A      313# 1952 1954 1971 1973 2000 2002 2081 2083
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2131 2421 2439 2620 2664 2684 2757 3327 3382 3487 4077 4183 5716
                                           5724
SAVEIR2. . . . . .  C ADDR   2578H   R   SEG=MAIN   840 877 959 1015 5809#
SAVELTE. . . . . .  C ADDR   04A7H   A      7993#
SAVEN_BL . . . . .  D ADDR   00D3H   A      400# 6075 6096
SAVER2 . . . . . .  C ADDR   2584H   R   SEG=MAIN   574 576 578 580 745 755 757 780 798 814 828 1071 1083 1092 1137
                                           1142 1192 1292 1309 1315 1326 1392 1396 1616 1835 1885 1969 2029 2041 2067
                                           2079 2869 2876 3693 4121 4213 4244 4344 4446 4545 4557 4577 4652 4717 4733
                                           4748 4803 4868 4883 5660 5687 5823# 6137
SAVE_HL. . . . . .  C ADDR   26ABH   R   SEG=MAIN   1853 3528 6075#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 4896 4902
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 501 4897 4901 4904 4905 4926
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   1F6FH   R   SEG=MAIN   4954# 4961
SDV1 . . . . . . .  C ADDR   1F83H   R   SEG=MAIN   4966# 4972
SDVIG0 . . . . . .  C ADDR   02B9H   R   SEG=MAIN   705# 707
SDVIG1 . . . . . .  C ADDR   02AEH   R   SEG=MAIN   697# 699
SDVIG2 . . . . . .  C ADDR   02A3H   R   SEG=MAIN   689# 691
SDVIG3 . . . . . .  C ADDR   0297H   R   SEG=MAIN   680# 682
SDVIG4 . . . . . .  C ADDR   02C8H   R   SEG=MAIN   715# 717
SDVIG6 . . . . . .  C ADDR   02D2H   R   SEG=MAIN   722# 724
SDVM . . . . . . .  C ADDR   02D0H   R   SEG=MAIN   712 721#
SEEGOON. . . . . .  C ADDR   0994H   R   SEG=MAIN   1646 1654 1661#
SEEIND . . . . . .  C ADDR   09A2H   R   SEG=MAIN   1576 1583 1584 1673#
SEE_L43. . . . . .  C ADDR   176FH   R   SEG=MAIN   3721 3729 3732#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7089# 7110 7111 7136 7137 7161 7304 7321 7542 7582
SKOR19 . . . . . .  C ADDR   185FH   R   SEG=MAIN   3856 3862#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   125FH   R   SEG=MAIN   3010# 3026
SP . . . . . . . .  D ADDR   0081H   A      17# 454
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 499
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 498
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 4943
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   144

SPWRI. . . . . . .  C ADDR   18FDH   R   SEG=MAIN   3945 3947#
SS1. . . . . . . .  C ADDR   209FH   R   SEG=MAIN   5200# 5202
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      390# 742 744 759 777 779 795 797 811 813 1347 1537 2205 2857
SUMT2. . . . . . .  C ADDR   0324H   R   SEG=MAIN   733 774#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T2MSME . . . . . .  C ADDR   15E5H   R   SEG=MAIN   3536# 3541
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   2237H   R   SEG=MAIN   5473# 5483
TABN . . . . . . .  C ADDR   22CFH   R   SEG=MAIN   5575# 5579
TABT11 . . . . . .  C ADDR   205DH   R   SEG=MAIN   5139# 5555
TABT7. . . . . . .  C ADDR   2061H   R   SEG=MAIN   4383 5143# 5568
TABT9. . . . . . .  C ADDR   205FH   R   SEG=MAIN   5141# 5565
TABUS. . . . . . .  C ADDR   2049H   R   SEG=MAIN   5075 5128#
TAKTIND. . . . . .  C ADDR   09DFH   R   SEG=MAIN   1708 1711#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 490 491 505
TE10MS . . . . . .  C ADDR   23CAH   R   SEG=MAIN   3535 5739#
TE22 . . . . . . .  C ADDR   22C2H   R   SEG=MAIN   5554 5564#
TE23 . . . . . . .  C ADDR   22CAH   R   SEG=MAIN   5564 5568#
TE2MS. . . . . . .  C ADDR   23C0H   R   SEG=MAIN   3540 5738#
TEAEQU0. . . . . .  C ADDR   2406H   R   SEG=MAIN   2983 5747#
TEAVK. . . . . . .  C ADDR   2442H   R   SEG=MAIN   4300 5754#
TEBEQU0. . . . . .  C ADDR   2410H   R   SEG=MAIN   5748#
TEBL . . . . . . .  C ADDR   24F6H   R   SEG=MAIN   2579 3151 5776#
TEBL0. . . . . . .  C ADDR   2500H   R   SEG=MAIN   3346 5777#
TECH . . . . . . .  C ADDR   250AH   R   SEG=MAIN   3623 3779 5778#
TECLE. . . . . . .  C ADDR   24BBH   R   SEG=MAIN   2571 3068 3119 5770#
TEEND. . . . . . .  C ADDR   255AH   R   SEG=MAIN   4397 5787#
TEERR. . . . . . .  C ADDR   2550H   R   SEG=MAIN   5731 5786#
TEFULL . . . . . .  C ADDR   24E2H   R   SEG=MAIN   2586 3313 5774#
TEINT. . . . . . .  C ADDR   24ECH   R   SEG=MAIN   3413 5775#
TEIZMK . . . . . .  C ADDR   249DH   R   SEG=MAIN   2379 2922 5767#
TEKALIB. . . . . .  C ADDR   244CH   R   SEG=MAIN   3599 4303 5755#
TEKD . . . . . . .  C ADDR   2493H   R   SEG=MAIN   4010 5766#
TELIST . . . . . .  C ADDR   24D7H   R   SEG=MAIN   2554 3130 3136 5773#
TEMAX. . . . . . .  C ADDR   2528H   R   SEG=MAIN   3815 5781#
TEMEM. . . . . . .  C ADDR   24C5H   R   SEG=MAIN   5771#
TEMENU . . . . . .  C ADDR   241AH   R   SEG=MAIN   5749#
TEMID. . . . . . .  C ADDR   2532H   R   SEG=MAIN   3823 5782#
TEMIN. . . . . . .  C ADDR   251EH   R   SEG=MAIN   3358 5780#
TEMUL. . . . . . .  C ADDR   0717H   R   SEG=MAIN   1247 1284#
TENMIN . . . . . .  C ADDR   2139H   R   SEG=MAIN   1150 1152 1166 5265#
TEOLI. . . . . . .  C ADDR   253CH   R   SEG=MAIN   1430 5784#
TEOLL. . . . . . .  C ADDR   24B1H   R   SEG=MAIN   1523 5769#
TEOLR. . . . . . .  C ADDR   2546H   R   SEG=MAIN   1426 5785#
TEOUT. . . . . . .  C ADDR   24A7H   R   SEG=MAIN   2387 2468 2913 5768#
TEPAR. . . . . . .  C ADDR   2489H   R   SEG=MAIN   4320 5765#
TES19_2. . . . . .  C ADDR   247FH   R   SEG=MAIN   514 2513 3862 4060 5763#
TES57_6. . . . . .  C ADDR   2475H   R   SEG=MAIN   2509 3857 4056 4316 5762#
TESKOR . . . . . .  C ADDR   2438H   R   SEG=MAIN   4297 5753#
TEST01 . . . . . .  C ADDR   1F0AH   R   SEG=MAIN   4901# 4924
TEST02 . . . . . .  C ADDR   1F39H   R   SEG=MAIN   4921 4923#
TEST04 . . . . . .  C ADDR   1F1AH   R   SEG=MAIN   4908# 4910
TEST1. . . . . . .  C ADDR   1F00H   R   SEG=MAIN   4896# 4912 4933
TEST2. . . . . . .  C ADDR   1F32H   R   SEG=MAIN   4901 4920#
TEST22 . . . . . .  C ADDR   18D2H   R   SEG=MAIN   3912 3919#
TEST23 . . . . . .  C ADDR   18D7H   R   SEG=MAIN   3919 3922#
TEST3. . . . . . .  C ADDR   1F24H   R   SEG=MAIN   4903 4913#
TEST4. . . . . . .  C ADDR   1F12H   R   SEG=MAIN   4904# 4919
TEST5. . . . . . .  C ADDR   1F3CH   R   SEG=MAIN   4922 4925#
TEST7I . . . . . .  C ADDR   09F7H   R   SEG=MAIN   1723 1726#
TEST9I . . . . . .  C ADDR   09F0H   R   SEG=MAIN   1718 1723#
TESTAT . . . . . .  C ADDR   2514H   R   SEG=MAIN   2562 3110 5779#
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   145

TESTRS . . . . . .  C ADDR   1EFEH   R   SEG=MAIN   3846 4894#
TESTS. . . . . . .  C ADDR   18C6H   R   SEG=MAIN   3914# 3921 3924
TETE11 . . . . . .  C ADDR   2457H   R   SEG=MAIN   3836 4307 5757#
TETE7. . . . . . .  C ADDR   246BH   R   SEG=MAIN   3901 4313 5759#
TETE9. . . . . . .  C ADDR   2461H   R   SEG=MAIN   4310 5758#
TETESI . . . . . .  C ADDR   2424H   R   SEG=MAIN   2823 4290 5751#
TETESR . . . . . .  C ADDR   242EH   R   SEG=MAIN   4294 5752#
TEVICH . . . . . .  C ADDR   23FCH   R   SEG=MAIN   2219 2395 2918 4218 5746#
TEWR . . . . . . .  C ADDR   24CDH   R   SEG=MAIN   2545 3125 5772#
TEXTT. . . . . . .  C ADDR   23C0H   R   SEG=MAIN   5155 5737#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 473
TH1. . . . . . . .  D ADDR   008DH   A      29# 512 516 3959 3961
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   1F93H   R   SEG=MAIN   4975#
TIM1 . . . . . . .  C ADDR   1F95H   R   SEG=MAIN   4976# 4976
TIM2 . . . . . . .  C ADDR   1F98H   R   SEG=MAIN   4957 4960 4967 4971 4979# 5022 5026 5996 5998
TIM3 . . . . . . .  C ADDR   1F9AH   R   SEG=MAIN   4980# 4980
TIZMRI . . . . . .  C ADDR   0CFAH   R   SEG=MAIN   2183# 2334
TL0. . . . . . . .  D ADDR   008AH   A      26# 474
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   125CH   R   SEG=MAIN   2995 3007#
TMOD . . . . . . .  D ADDR   0089H   A      25# 471 504
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 488
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 487
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1843H   R   SEG=MAIN   3844 3849#
TOME14 . . . . . .  C ADDR   186AH   R   SEG=MAIN   3849 3869#
TOME15 . . . . . .  C ADDR   1882H   R   SEG=MAIN   3869 3881#
TOME21 . . . . . .  C ADDR   183AH   R   SEG=MAIN   3834 3844#
TOSK19 . . . . . .  C ADDR   19CCH   R   SEG=MAIN   4055 4060#
TOUTF. . . . . . .  C ADDR   11D9H   R   SEG=MAIN   2932# 2935
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0DDBH   R   SEG=MAIN   2335# 2342
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 4944
UNPACK1. . . . . .  C ADDR   009EH   A      7107# 7301 7435 7565 7679
UNPACK2. . . . . .  C ADDR   00BAH   A      7132# 7302 7436 7566
UP1. . . . . . . .  C ADDR   0138H   A      7252# 7269
UP2. . . . . . . .  C ADDR   014BH   A      7272# 7290
UP2A . . . . . . .  C ADDR   0161H   A      7251 7288#
UPA. . . . . . . .  C ADDR   2168H   R   SEG=MAIN   5320# 5326
UPA1 . . . . . . .  C ADDR   2178H   R   SEG=MAIN   5338# 5344
UPA2 . . . . . . .  C ADDR   2158H   R   SEG=MAIN   5301# 5307
UPAA . . . . . . .  C ADDR   2683H   R   SEG=MAIN   6044# 6050
UPAA4. . . . . . .  C ADDR   21C3H   R   SEG=MAIN   5401# 5407
UPAB . . . . . . .  C ADDR   21D3H   R   SEG=MAIN   5418# 5424
UPAK . . . . . . .  C ADDR   2162H   R   SEG=MAIN   5317#
UPAK1. . . . . . .  C ADDR   265DH   R   SEG=MAIN   6009#
UPAK2. . . . . . .  C ADDR   2152H   R   SEG=MAIN   5298#
UPAK3. . . . . . .  C ADDR   2172H   R   SEG=MAIN   3555 3647 5335#
UPAK4. . . . . . .  C ADDR   267DH   R   SEG=MAIN   3510 6041#
UPAKA. . . . . . .  C ADDR   21BDH   R   SEG=MAIN   4205 5398#
UPAKB. . . . . . .  C ADDR   21CDH   R   SEG=MAIN   4233 5415#
UPAV1. . . . . . .  C ADDR   1944H   R   SEG=MAIN   3990# 3996
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   146

UPAV2. . . . . . .  C ADDR   19FBH   R   SEG=MAIN   4104# 4110
UPK1 . . . . . . .  C ADDR   266FH   R   SEG=MAIN   6017 6020#
UPK2 . . . . . . .  C ADDR   2670H   R   SEG=MAIN   6019 6021#
VICHMAX. . . . . .  C ADDR   1E5DH   R   SEG=MAIN   3817 4774#
VICHMEAN . . . . .  C ADDR   1CA1H   R   SEG=MAIN   3825 4486#
VICHMIN. . . . . .  C ADDR   1D84H   R   SEG=MAIN   3360 4624#
VICHR. . . . . . .  D ADDR   00B1H   A      388# 1205 1714 2216 2225 2361 2374 2479 2487 2826 2830 2907 2974 3086
                                           3588 3596 3605 3829 3878 3892 4008 4196 4248 4288 5553
VIG0 . . . . . . .  C ADDR   0A4DH   R   SEG=MAIN   1791# 1793
VIG4 . . . . . . .  C ADDR   0A5BH   R   SEG=MAIN   1802# 1804
VIOUT. . . . . . .  C ADDR   0DB2H   R   SEG=MAIN   2222 2309#
VIOUTF . . . . . .  C ADDR   11D2H   R   SEG=MAIN   2929#
VODM11_15. . . . .  C ADDR   1644H   R   SEG=MAIN   3580# 3595
VOLUME . . . . . .  D ADDR   00D5H   A      401# 2171 3523 6084 6086
VV21_23. . . . . .  C ADDR   18BDH   R   SEG=MAIN   3898 3910#
VVCHIBL. . . . . .  C ADDR   2306H   R   SEG=MAIN   2462 5607#
VVCHIF . . . . . .  C ADDR   22E1H   R   SEG=MAIN   5583# 5600
VVINTE . . . . . .  C ADDR   15A5H   R   SEG=MAIN   3474 3502#
VVIZKO . . . . . .  C ADDR   1229H   R   SEG=MAIN   2928 2974#
VVKALI52 . . . . .  C ADDR   19EEH   R   SEG=MAIN   4088# 4140
VVMENU . . . . . .  C ADDR   19A4H   R   SEG=MAIN   3973 4043#
VVNOL23. . . . . .  C ADDR   2301H   R   SEG=MAIN   5604# 5608
VVNOL31. . . . . .  C ADDR   22FCH   R   SEG=MAIN   5602# 5604
VVNOL41. . . . . .  C ADDR   22FAH   R   SEG=MAIN   5600# 5602
VVOD2_10 . . . . .  C ADDR   15DDH   R   SEG=MAIN   3095 3201 3284 3533#
VVOD43 . . . . . .  C ADDR   179BH   R   SEG=MAIN   3751 3758#
VVODM11_15 . . . .  C ADDR   181DH   R   SEG=MAIN   3580 3829#
VVOSTA . . . . . .  C ADDR   17F8H   R   SEG=MAIN   3794 3813#
VVOSTAD. . . . . .  C ADDR   180CH   R   SEG=MAIN   3813 3821#
VVRR6. . . . . . .  C ADDR   0E32H   R   SEG=MAIN   2379#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 469 470
WORK . . . . . . .  D ADDR   00B8H   A      392# 1411 1413 1419 1435 1442 1458 1479 1484 1500 1742 1820 3181 3191
                                           3193 3213 3223 3225 3230 3240 3242 3248 3258 3260 3265 3275 3277 4494 4541
                                           4544 4553 4556 4568 4630 4648 4651 4706 4716 4722 4732 4736 4781 4799 4802
                                           4857 4867 4872 4882 4898 4920
WR1. . . . . . . .  C ADDR   264AH   R   SEG=MAIN   5992# 5999
WRITE. . . . . . .  C ADDR   2647H   R   SEG=MAIN   625 5444 5446 5448 5450 5452 5454 5457 5459 5461 5464 5466 5468
                                           5990#
WRITED_X1. . . . .  C ADDR   1F9EH   R   SEG=MAIN   4985#
WRITE_X1 . . . . .  C ADDR   1F9DH   R   SEG=MAIN   4984#
WRPAGE . . . . . .  C ADDR   0480H   A      3956 4376 4478 7954#
WW5. . . . . . . .  C ADDR   0483H   A      7955# 7963
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 465 497
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 466
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 467 496
XCIKLWR. . . . . .  C ADDR   2564H   R   SEG=MAIN   835 848 850 852 855 858 861 864 867 870 903 905 907 910 913 916
                                           919 922 925 927 930 932 934 937 940 943 946 949 952 1004 1006 1008 5792#
XTEMP. . . . . . .  N NUMB   000CH   A      6155# 6519 6520 6521 6522 6608 6610 6611 6613 6614 6616 6617 6619 6641
                                           6642 6643 6644 6662 6663 6667 6668 6671 6675 6676 6679 6683 6684 6688 6689
                                           6691 6692 6693 6695 6699 6700 6702 6703 6707 6708 6713 6714 6716 6717 6721
                                           6722 6727 6729 6730 6731
YBNUL. . . . . . .  C ADDR   116AH   R   SEG=MAIN   2864 2872#
YES. . . . . . . .  C ADDR   2884H   R   SEG=MAIN   6541 6545 6549 6553 6571# 6634
YESAVP . . . . . .  C ADDR   0772H   R   SEG=MAIN   1303 1329#
YESBUF . . . . . .  C ADDR   0AA8H   R   SEG=MAIN   1844 1849#
YESIND . . . . . .  C ADDR   09F9H   R   SEG=MAIN   1713 1722 1725 1728#
YESPRD . . . . . .  C ADDR   0AA6H   R   SEG=MAIN   1843 1847#
YESTEST. . . . . .  C ADDR   2038H   R   SEG=MAIN   5070 5102#
YESTT5 . . . . . .  C ADDR   0B34H   R   SEG=MAIN   1924#
YESVICH. . . . . .  C ADDR   07A1H   R   SEG=MAIN   1317 1354#
YESVI_KM . . . . .  C ADDR   1C0AH   R   SEG=MAIN   4323 4403#
YESVI_KR . . . . .  C ADDR   1B82H   R   SEG=MAIN   4323# 4325
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   513 517#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   510 514#
Z01S . . . . . . .  C ADDR   20B7H   R   SEG=MAIN   5217# 5219
A51 MACRO ASSEMBLER  AMP29_1                                                              02/08/2007 10:24:45 PAGE   147

Z05S . . . . . . .  C ADDR   20C4H   R   SEG=MAIN   5226# 5228
Z100 . . . . . . .  C ADDR   2088H   R   SEG=MAIN   5181# 5183
Z15. . . . . . . .  C ADDR   2096H   R   SEG=MAIN   5193# 5195
Z1S. . . . . . . .  C ADDR   20AAH   R   SEG=MAIN   5209# 5211
ZAPADC . . . . . .  C ADDR   1F6DH   R   SEG=MAIN   4953#
ZCMP . . . . . . .  C ADDR   25E6H   R   SEG=MAIN   5899#
ZDIV . . . . . . .  C ADDR   25B3H   R   SEG=MAIN   753 1063 1561 3686 5862#
ZER1 . . . . . . .  C ADDR   00B3H   A      7117 7121# 7176 7219
ZER2 . . . . . . .  C ADDR   00D4H   A      7143 7147#
ZMUL . . . . . . .  C ADDR   25A9H   R   SEG=MAIN   5857#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      320# 1636 3711 4595 4766 5870 5873 5876
ZNPLUS . . . . . .  C ADDR   028AH   R   SEG=MAIN   636 669#
ZZ . . . . . . . .  C ADDR   2098H   R   SEG=MAIN   5194# 5194
Z_01S. . . . . . .  C ADDR   20B3H   R   SEG=MAIN   664 665 666 2123 2124 2750 4918 4932 5215# 5728
Z_05S. . . . . . .  C ADDR   20C0H   R   SEG=MAIN   1918 1919 2582 5224#
Z_100. . . . . . .  C ADDR   2086H   R   SEG=MAIN   5180#
Z_15 . . . . . . .  C ADDR   2094H   R   SEG=MAIN   604 5192#
Z_1MS. . . . . . .  C ADDR   209DH   R   SEG=MAIN   4925 5199#
Z_1S . . . . . . .  C ADDR   20A6H   R   SEG=MAIN   593 601 2221 3361 3630 3740 3792 3818 4048 4132 4400 4401 5207#
Z_5. . . . . . . .  C ADDR   208FH   R   SEG=MAIN   4989 4999 5187#
Z_9. . . . . . . .  C ADDR   2642H   R   SEG=MAIN   4946 5984#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
