A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp35_2.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp35_2.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak 
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                            jmp begin;;Main               ; Locate a jump to the start of code a
                             t 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     5

0013 32              256                                                     reti
001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 020000   F      262                                                     jmp             inter2  ;IE.5,IP.5(ET2,PT2)
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     6

                     320     ;;;;;
  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
  001C               358     bitprer         BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     7

                     383     ;FLOAT
  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
  0E00               438     chbuf1  xdata 0e00h;счетчик буфера 1
                     439     ;xdata  0e04
                     440     
  0000               441                             rr0             EQU 00
  0001               442                     rr1       equ   01
  0006               443                     rr6   equ 06
  0002               444                     rr2       equ   02
  0003               445                     rr3       equ   03
  0007               446                     rr7   equ 07
                     447     
  0008               448                     r8   equ 08
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     8

  0009               449                     r9        equ   09
  000A               450                     r10       equ   10
  000B               451                     r11   equ 11
                     452     
                     453                     
                     454        
----                 455                  rseg     Main          ; Switch to this code segment.
                     456     
                     457                  using    0              ; Specify register bank for the following
                     458     
0100                 459     org 100h
                     460     ;$EJECT
                     461     
0100 7581E0          462     begin:     mov  sp, #0e0h
0103 75E900          463                                             mov             PCA0L,#00;=0x00;
0106 75D900          464                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          465                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          466                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          467                                             mov     P2MDOUT,#00;=0x00;
                     468             
0112 75A73F          469             mov     P3MDOUT,#3fh;
0115 75B5FF          470             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          471             mov     REF0CN,#03h;=0x03;
                     472             
011B 75E114          473             mov     XBR0,#14h;= 0x14;
011E 75E200          474             mov     XBR1,#00; =0x00;
0121 75E300          475             mov XBR2,#00;=0x00;
0124 75B0C0          476             mov     P3,#0c0h
0127 75FFDE          477             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          478             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          479             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          480             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          481             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          482             mov     TL0,#0f9h;=0xf9; 
0139 75E680          483             mov     EIE1,#80h;=0x80;
                     484     
013C 75D480          485             mov     DAC0CN,#80h;=0x80;
013F 75D780          486             mov     DAC1CN,#80h;=0x80;
0142 75B167          487             mov     OSCXCN,#67h;=0x67;
                     488     
                     489      
                     490     
0145 E5B1            491     gener:     mov a, oscxcn
0147 B4E7FB          492                cjne a,#11100111b,gener
                     493                            
014A 75B288          494             mov     OSCICN,#88h;=0x84;
014D 75CA00          495         mov TMR2RLL,#0;=0;
0150 75CBD1          496         mov TMR2RLH,#0d1h;=0xd1;
                     497       
0153 D28E            498                     setb  TCON.6                    ;регистр управления
0155 D28C            499                      setb tcon.4
                     500     
0157 75EF00          501             mov     RSTSRC,#0;=00   ;//источники сброса 
                     502     
                     503             
015A 75E340          504          mov        XBR2,#40h
015D 75E10E          505              mov    XBR0,#0eh;06h;16h
0160 75F803          506             mov             SPI0CN,#03
0163 759D31          507             mov             spi0ckr,#31H;;;;;;;;#04
                     508     ;установка скорости
0166 759850          509                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          510                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          511                                             mov             CKCON,#00010000b;TIM=1
016F 758920          512                                             mov             TMOD,#00100000b;реж2 внутр ист синх
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE     9

                             р
0172 758840          513                                             mov             TCON,#01000000b;счетчик запущен
                     514     ;;;;;
0175 75D900          515                                             mov             PCA0MD,#00              ;PCA 
0178 75DA00          516                                             mov             PCA0CPM0,#00000000b;00000110b;01000
                             010b;
017B 75EA00          517                                             mov             PCA0CPL0,#00
017E 75FA9C          518                                             mov             PCA0CPH0,#9ch;регулировка звука 088
                             h;90h
0181 75D840          519                                             mov             PCA0CN,#40h
0184 75C800          520                                             mov             T2CON,#00
                     521     ;;;;;;
0187 7A50            522                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0189 7B2C            523                                             mov                     r3,#2ch
018B 120454          524                                             call            re4byte                 ;502ch 1 ba
                             it skor
018E E508            525                                             mov                     a,r8
0190 B40007          526                                             cjne            a,#00,yst19
0193 C213            527                                             clr                     bitv19                  ;57
                             .6
0195 758DF4          528                                             mov                     TH1,#244
0198 8008            529                                             jmp               yst1
019A 900000   F      530     yst19:          mov                     dptr,#teS19_2
019D D213            531                                             setb            bitv19                  ;19,2
019F 758DDC          532                                             mov                     TH1,#220
01A2                 533     yst1:
01A2 75E730          534                                             mov             EIE2,#30H;00110000
                     535                                     ;       mov             EIP2,#30H
01A5 75A880          536                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     537     ;ozu
01A8 E4              538                                             clr     a
01A9 7800            539                                             mov     r0,#00h 
01AB F6              540     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
01AC 08              541                                             inc     r0
01AD B87FFB          542                                             cjne    r0,#7fh,mecle
01B0 7880            543                                             mov     r0,#80h
01B2 F6              544     meff:                   mov     @r0,a 
01B3 F2              545                                             movx @r0,a
01B4 08              546                                             inc     r0
01B5 B8DFFA          547                             cjne    r0,#0dfh,meff
01B8 120000   F      548                             call    clmassix
                     549     ;обнулить внешнее озу 4кбайта
01BB 900000          550                                     mov                     dptr,#0
01BE E4              551     extcle: clr                     a
01BF F0              552                                     movx            @dptr,a
01C0 A3              553                                     inc                     dptr
01C1 E583            554                                     mov                     a,dph
01C3 B410F8          555                                     cjne            a,#10h,extcle
                     556     
01C6 7898            557                             mov             r0,#chinkor
01C8 7600            558                             mov             @r0,#0;1;
01CA 08              559                             inc             r0
01CB 7619            560                             mov             @r0,#19h;64h;0c8h;90h;
                     561                             ;;;;
01CD 7881            562                             mov             r0,#chavt
01CF 7601            563                             mov             @r0,#1
01D1 08              564                             inc             r0
01D2 7690            565                             mov             @r0,#90h
                     566     
01D4 78B2            567                                     mov             r0,#marker
01D6 76FF            568                                     mov             @r0,#0ffh
                     569                             ;mov            r0,#chind
                     570                             ;mov            @r0,#1
                     571                     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    10

01D8 74FF            572                             mov             a,#0ffh
01DA F585            573                        mov          p5,a
01DC 799A            574                             mov             r1,#parT
01DE 7702            575                             mov             @r1,#2                  ;Tizm=1s
01E0 79AE            576                             mov             r1,#diap
01E2 7705            577                             mov             @r1,#5                  ;10-7a
01E4 753405          578                             mov             sadiap,#5
01E7 79AF            579                             mov             r1,#parN
01E9 7702            580                             mov             @r1,#2
01EB 7400            581                             mov             a,#00h
01ED F585            582                             mov             p5,a
01EF D204            583                             setb    bitizm
                     584     
01F1 799B            585                             mov             r1,#chbefore
01F3 7700            586                             mov             @r1,#0
                     587                             ;;;;;;
01F5 900000   F      588                             mov             dptr,#ch_1              ;1->r2..r5 float
01F8 120000   F      589                             call    ldc_long
01FB 7890            590                             mov             r0,#koefKp         ;1(float)->koefKp
01FD 120000   F      591                             call    saver2
0200 7894            592                             mov             r0,#koefKm              ;1(float)->koefKm
0202 120000   F      593                             call    saver2
0205 78A0            594                             mov             r0,#koefKD
0207 120000   F      595                             call    saver2
020A 78CF            596                             mov                     r0,#chbuf
020C 120000   F      597                             call    saver2
020F 900158          598                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0212 79D3            599                             mov             r1,#saven_bl
0214 E583            600                             mov             a,dph
0216 F7              601                                               mov           @r1,a
0217 09              602                                                     inc             r1
0218 E582            603                                                     mov             a,dpl
021A F7              604                                                     mov             @r1,a
                     605     
021B 900478          606                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
021E 79C0            607                             mov             r1,#saven_bl2
0220 E583            608                             mov             a,dph
0222 F7              609                                               mov           @r1,a
0223 09              610                                                     inc             r1
0224 E582            611                                                     mov             a,dpl
0226 F7              612                                                     mov             @r1,a
0227 900798          613                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
022A 79C2            614                             mov             r1,#saven_bl3
022C E583            615                             mov             a,dph
022E F7              616                                               mov           @r1,a
022F 09              617                                                     inc             r1
0230 E582            618                                                     mov             a,dpl
0232 F7              619                                                     mov             @r1,a
0233 900AB8          620                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0236 79D9            621                             mov             r1,#saven_bl4
0238 E583            622                             mov             a,dph
023A F7              623                                               mov           @r1,a
023B 09              624                                                     inc             r1
023C E582            625                                                     mov             a,dpl
023E F7              626                                                     mov             @r1,a
023F 753801          627                             mov             nblok,#1                        ;номер введенного б
                             лока
0242 753701          628                             mov             nelem,#1
0245 78CD            629                             mov             r0,#interva
0247 7600            630                             mov             @r0,#0
0249 08              631                             inc             r0
024A 7601            632                             mov             @r0,#1
024C 7840            633                             mov             r0,#bufind
024E                 634     age2:
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    11

024E 76FD            635                             mov             @r0,#0fdh         ;погасить индикатор
0250 08              636                             inc             r0
0251 B84CFA          637                             cjne    r0,#bufind+12,age2              
0254 120000   F      638                             call    ind
0257 120000   F      639                             call    z_1s
                     640     
                     641                                     ;зажечь все лементы индикации
025A 7840            642                             mov             r0,#bufind
025C 7669            643     ageon:          mov             @r0,#69h;0feh;?
025E 08              644                             inc             r0
025F B84CFA          645                             cjne    r0,#bufind+12,ageon             
0262 120000   F      646                             call    ind
0265 120000   F      647                             call    z_1s            ;1sec
                     648     ;;;;;;;;;;;;;;;;
                     649                     
0268 120000   F      650                             call    z_15;z_1ms
026B 434B10          651                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     652     ;;;;;;;;;;;;;;;;;;;
026E 7C60            653                             mov             r4,#60h
0270 7D00            654                             mov             r5,#00         
0272 120000   F      655                             call    iniacp;инициализация acp
0275 120000   F      656                             call    loadUS          ;us 10-7 A
                     657                             
0278 C217            658     rebyte:         clr             bitoll
027A 3095FD          659                             jnb             p1.5,$
027D 2095FD          660                             jb              p1.5,$
                     661                             ;mov            a,P6            ;p6.4=0
                     662                             ;anl            a,#0efh
                     663                             ;mov            P6,a
                     664                             ;nop
                     665                             ;nop
                     666                                     
                     667                             ;mov            a,P6                    ;p6.4=1 
                     668                             ;orl            a,#10h
                     669                             ;mov            P6,a                        
0280 7411            670                             mov             a,#11h
0282 120000   F      671                             call    write
                     672                             ;чтение acp
0285 120000   F      673                             call    read    
0288 F578            674                             mov     reacp+1,A       ;старший байт 
028A 120000   F      675                             call    read    
028D F579            676                             mov     reacp+2,A       ;средний байт 
028F 120000   F      677                             call    read
0292 F57A            678                             mov     reacp+3,A               ;мл байт
                     679                        ;;;;;;;;;;;
0294 7878            680                        mov          r0,#reacp+1
0296 E6              681                        mov          a,@r0
0297 20E743          682                             jb              acc.7,znplus;
029A D200            683                             setb    bitznak
029C 4480            684                             orl             a,#80h  ;ост содерж яч 
029E F6              685                             mov             @r0,a
                     686                                     
029F 18              687     mmm:            dec             r0;,#reacp
02A0 76FF            688                             mov             @r0,#0ffh
02A2 8041            689                             jmp             goznak
                     690     
02A4 120000   F      691     mem10ms:        call            ind
02A7 80CF            692                                             jmp                     rebyte                     
                                  ;10ms
                     693     
02A9                 694     labelA: 
                     695                             ;разрешить ie6,ie7
                     696     ;                       mov                     a,chkl+1                ;low
                     697     ;                       jnz                     no0key
02A9 E53D            698                             mov                     a,chkl
02AB 30E70B          699                             jnb                     acc.7,no0key;jnz                        no0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    12

                             key
02AE E5AD            700                             mov                     a,P3IF
02B0 543F            701                             anl                     a,#3fh
02B2 F5AD            702                             mov                     P3IF,a
02B4 75E730          703                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02B7 800D            704                             jmp                     yes0key
                     705                        
02B9                 706     no0key: ;       mov             r1,#chkl 
                     707                                     ;       call    chdec
02B9 C3              708                                     clr                     c
02BA E53E            709                                     mov                     a,chkl+1;chkl-1
02BC 9401            710                                     subb            a,#1
02BE F53E            711                                     mov                     chkl+1,a
02C0 E53D            712                                     mov                     a,chkl
02C2 9400            713                                     subb            a,#0
02C4 F53D            714                                     mov                     chkl,a
                     715                             ;;;;;;;;;;;;
02C6                 716     yes0key:
02C6 2004AF          717                                             jb              bitizm,rebyte
                     718                              ;буфер 2 выдать на индикацию
02C9 E533            719                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02CB 700B            720                             jnz             nochind
02CD 753364          721                             mov             chind2,#100
02D0 120000   F      722                             call    ind
02D3 120000   F      723     yes0key1:       call    z_1ms;z_01s
                     724                             ;call   z_01s
                     725                             ;call   z_01s
02D6 80D1            726                             jmp             labelA
                     727     
02D8 14              728     nochind:        dec             a
02D9 F533            729                                             mov             chind2,a
02DB 80F6            730                                     jmp             yes0key1;labelA
                     731             
02DD C200            732     znplus:         clr     bitznak
02DF 547F            733                             anl             a,#7fh;fdh                      ;+
02E1 F6              734                             mov             @r0,a
02E2 18              735                             dec             r0;,#reacp
02E3 7600            736                             mov             @r0,#00h
                     737                             
02E5                 738     goznak: 
                     739     ;;;;;;;;;;;;;
02E5 787A            740                             mov     r0,#reacp+3
02E7 E6              741                             mov             a,@r0
02E8 7F05            742                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02EA C3              743     sdvig3:         clr             c
02EB 13              744                             rrc             a
02EC DFFC            745                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02EE FA              746                             mov             r2,a    ;сохр байт
02EF 18              747                             dec             r0              ;       reacp+2
02F0 E6              748                             mov             a,@r0
02F1 C0E0            749                             push    acc
02F3 C3              750                             clr             c
02F4 7F03            751                             mov             r7,#3;2
02F6 C3              752     sdvig2:         clr             c
02F7 33              753                             rlc             a
02F8 DFFC            754                             djnz    r7,sdvig2 ;d12..d11      средний байт
02FA 4A              755                             orl             a,r2
02FB F57A            756                             mov             reacp+3,a;сформ мл байт
02FD D0E0            757                             pop             acc
                     758                             
02FF 7F05            759                             mov             r7,#5;6
0301 C3              760     sdvig1:         clr             c
0302 13              761                             rrc             a
0303 DFFC            762                             djnz    r7,sdvig1 ;d15,d14        ср байт
0305 FA              763                             mov             r2,a   ;сохр
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    13

0306 E578            764                             mov             a,reacp+1
0308 C0E0            765                             push    acc
                     766                     ;;      push    acc
030A 7F03            767                             mov             r7,#3;2
030C C3              768     sdvig0:         clr             c
030D 33              769                             rlc             a
030E DFFC            770                             djnz    r7,sdvig0 ;       d21..d16
0310 4A              771                             orl             a,r2
0311 F579            772                             mov             reacp+2,a       ; сформ средний  байт
0313 D0E0            773                             pop             acc       ;reacp+1
                     774                             ;;;;;;;;;;;;;;
0315 20E70B          775                             jb              acc.7,sdvm
0318 C3              776                             clr             c
0319 7F05            777                             mov             r7,#5;6
031B C3              778     sdvig4:         clr             c
031C 13              779                             rrc             a
031D DFFC            780                             djnz    r7,sdvig4 ;       d23,d22
031F F578            781                             mov             reacp+1,a
0321 8008            782                             jmp             readyacp;ankor;klmas
                     783     ;;;;;;;;;;;;                                    
0323 7F05            784     sdvm:           mov             r7,#5;6
0325 D3              785     sdvig6:         setb            c
0326 13              786                             rrc             a
0327 DFFC            787                             djnz    r7,sdvig6 ;       d23,d22
0329 F578            788                             mov             reacp+1,a
                     789                                                             
                     790     ; reacp..reacp+3-результат чтения асп(hex) 
                     791     ;;;;;;;;;
032B                 792     readyacp:
032B 7898            793                                             mov             r0,#chinkor
032D E6              794                             mov             a,@r0
032E 30E702          795                             jnb             acc.7,gopart
0331 8044            796                                     jmp             sumt2
                     797                     
0333                 798     gopart:
0333 789A            799                             mov             r0,#parT        ;параметр времени
0335 793F            800                             mov             r1,#chmasN
0337 B6013A          801                             cjne    @r0,#1,noparT1
                     802                             ;РЕЗ+РЕЗ
033A 7877            803                             mov             r0,#reacp
033C 120000   F      804                             call    resar2          ;reacp->r2..r5
033F 78B6            805                             mov             r0,#summa+3;rez_A+3
0341 120000   F      806                             call    ladd
0344 78B3            807                             mov             r0,#summa;rez_A
0346 120000   F      808                             call    saver2
0349 793F            809                              mov            r1,#chmasN
034B 7714            810                             mov             @r1,#20;10
034D 789B            811                             mov             r0,#chbefore
034F B6631E          812                             cjne    @r0,#99,nobef99
                     813                             ;РЕЗ/100
0352 900000   F      814                             MOV        DPTR,#ch100 
0355 120000   F      815     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0358 120000   F      816                             call    zdiv;divide
035B 7862            817                             mov             r0,#rez_A
035D 120000   F      818                             call    saver2          ;сумма 100 отсчетов /100
0360 78C5            819                             mov             r0,#Rez_del
0362 120000   F      820                             call    saver2  
                     821                        ;;;;;
0365 78B3            822                        mov          r0,#summa
0367 120000   F      823                        call         clear4
                     824     
036A 799B            825                             mov             r1,#chbefore
036C 7700            826                             mov             @r1,#0
036E 8070            827                             jmp             klmas           ;загр в массив скользящее ср
0370 06              828     nobef99:        inc             @r0                     ;chbefore
0371 020000   F      829                             jmp             rebyte;labelA;метка A
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    14

                     830     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     831     ;а потом уже располагаем  в скользящий массив  из n
                     832     
                     833     
                     834     
0374 B6021D          835     noparT1:        cjne    @r0,#2,noparT2
                     836                             ;РЕЗ+РЕЗ
0377                 837     sumt2:
0377 7877            838                              mov            r0,#reacp
0379 120000   F      839                             call    resar2          ;reacp->r2..r5
037C 78B6            840                             mov             r0,#summa+3;rez_A+3
037E 120000   F      841                             call    ladd
0381 78B3            842                             mov             r0,#summa;rez_A
0383 120000   F      843                             call    saver2
0386 789B            844                             mov             r0,#chbefore
0388 793F            845                             mov             r1,#chmasN
038A 770A            846                             mov             @r1,#10
038C B613E1          847                             cjne    @r0,#19,nobef99;9,nobef99
                     848                             ;РЕЗ/20
038F 900000   F      849                             MOV        DPTR,#ch20;ch10 
0392 80C1            850                             jmp             allsum
                     851                             ;;;;;;;
                     852                             
                     853     
0394 B6031D          854     noparT2:        cjne    @r0,#3,noparT3
                     855     
0397 7877            856                                                              mov            r0,#reacp
0399 120000   F      857                             call    resar2          ;reacp->r2..r5
039C 78B6            858                             mov             r0,#summa+3;rez_A+3
039E 120000   F      859                             call    ladd
03A1 78B3            860                             mov             r0,#summa;rez_A
03A3 120000   F      861                             call    saver2
03A6 789B            862                             mov             r0,#chbefore
03A8 793F            863                             mov             r1,#chmasN
03AA 7702            864                             mov             @r1,#2;4                                        ;n=
                             4
03AC B609C1          865                             cjne    @r0,#9,nobef99;9,nobef99
                     866                             ;РЕЗ/10
03AF 900000   F      867                             MOV        DPTR,#ch10 
03B2 80A1            868                             jmp             allsum
                     869                             
03B4 B6041D          870     noparT3:        cjne    @r0,#4,noparT4
03B7                 871     aapar:          
03B7 7877            872              mov            r0,#reacp
03B9 120000   F      873                             call    resar2          ;reacp->r2..r5
03BC 78B6            874                             mov             r0,#summa+3;rez_A+3
03BE 120000   F      875                             call    ladd
03C1 78B3            876                             mov             r0,#summa;rez_A
03C3 120000   F      877                             call    saver2
03C6 789B            878                             mov             r0,#chbefore
03C8 793F            879                             mov             r1,#chmasN
03CA 7702            880                             mov             @r1,#2;4
03CC B604A1          881                             cjne    @r0,#4,nobef99;9,nobef99
                     882                             ;РЕЗ/10
03CF 900000   F      883                             MOV        DPTR,#ch5
03D2 8081            884                             jmp             allsum
                     885     
                     886                     
03D4 7702            887     noparT4:   mov          @r1,#2          ;chmasN n=2
03D6 7877            888                             mov             r0,#reacp
03D8 120000   F      889                             call    resar2          ;reacp->r2..r5
03DB 7862            890                             mov             r0,#rez_A
03DD 120000   F      891                             call    saver2
                     892     ;загрузить А в массив из 2/10 значений
                     893     ;;;;;;;;;;;;;;;
03E0                 894     klmas:           
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    15

03E0 793F            895                             mov             r1,#chmasN
03E2 B7021A          896                             cjne    @r1,#2,mas10
03E5 900100          897                             MOV        dptr,#MASS0
03E8 120000   F      898                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     899     
03EB 7862            900                             mov             r0,#rez_A
03ED 120000   F      901                             call    resar2          ;->r2..r5
03F0 900100          902                             mov                     dptr,#MASS0
03F3 120000   F      903                   call              saveIr2                 ; R2-R5 --> MAS0
                     904                     
03F6 900107          905                   MOV          dptr,#MASS1+3
03F9 120000   F      906                   CALL       addx
03FC 020000   F      907                       jmp           endsum
                     908     ;массив из 10-ти измерений
03FF B70A7D          909     mas10:                  cjne    @r1,#10,mas20
0402 900120          910                                             mov                     dptr,#MASS8
0405 120000   F      911                     CALL            xCIKLWR         ;MASS8->MASS9
0408 90011C          912                                             mov                     dptr,#MASS7
040B 120000   F      913                     CALL            xCIKLWR         ;MASS7->MASS8
040E 900118          914                     MOV       dptr,#MASS6
0411 120000   F      915                     CALL       xCIKLWR         ; MASS6 --> MASS7
0414 900114          916                     MOV        dptr,#MASS5
                     917                    
0417 120000   F      918                    CALL        xCIKLWR        ; MASS5 --> MASS6
041A 900110          919                    MOV         dptr,#MASS4
                     920                    
041D 120000   F      921                    CALL        xCIKLWR        ; MASS4 --> MASS5
0420 90010C          922                             mov                     dptr,#MASS3
                     923     
0423 120000   F      924                    CALL             xCIKLWR         ;MASS3->MASS4
0426 900108          925                     MOV        dptr,#MASS2
                     926                    
0429 120000   F      927                    CALL        xCIKLWR         ; MASS2 --> MASS3
042C 900104          928                    MOV         dptr,#MASS1
                     929                     
042F 120000   F      930                   CALL         xCIKLWR        ; MASS1 --> MASS2
0432 900100          931                    MOV         dptr,#MASS0
                     932                   
0435 120000   F      933                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     934     
                     935                             
0438 7862            936                             mov             r0,#rez_A
043A 120000   F      937                             call    resar2          ;->r2..r5
                     938                                     ;call   aform
043D 900100          939                                     mov                     dptr,#MASS0
0440 120000   F      940                   call              saveIr2                 ; R2-R5 --> MAS0
                     941              
0443 900107          942                   MOV          dptr,#MASS1+3
0446 120000   F      943                   CALL       addx
0449 90010B          944                   MOV          dptr,#MASS2+3
044C 120000   F      945                   CALL       addx
044F 90010F          946                   MOV          dptr,#MASS3+3
0452 120000   F      947                  CALL        addx
0455 900113          948                   MOV       dptr,#MASS4+3
0458 120000   F      949                   call       addx
045B 900117          950                     MOV        dptr,#MASS5+3
045E 120000   F      951                  CALL        addx
0461 90011B          952                   MOV          dptr,#MASS6+3
0464 120000   F      953                   CALL       addx
0467 90011F          954                   MOV          dptr,#MASS7+3
046A 120000   F      955                  CALL        addx
046D 900123          956                  MOV        dptr,#MASS8+3
0470 120000   F      957                   call       addx
0473 900127          958                     MOV                     dptr,#MASS9+3
0476 120000   F      959                  call        addx
0479 020000   F      960                              jmp            endsum
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    16

                     961     
047C 020000   F      962     rmas4:          jmp                     mas4
                     963     ;массив из 20-ти измерений
047F B714FA          964     mas20:          cjne    @r1,#20,rmas4
0482 900148          965                                             mov                     dptr,#MASS18
0485 120000   F      966                     CALL            xCIKLWR         ;MASS18->MASS19
0488 900144          967                                             mov                     dptr,#MASS17
048B 120000   F      968                     CALL            xCIKLWR         ;MASS17->MASS18
048E 900140          969                     MOV       dptr,#MASS16
0491 120000   F      970                     CALL       xCIKLWR         ; MASS16 --> MASS17
0494 90013C          971                     MOV        dptr,#MASS15
                     972                    
0497 120000   F      973                    CALL        xCIKLWR        ; MASS15 --> MASS16
049A 900138          974                    MOV         dptr,#MASS14
                     975                    
049D 120000   F      976                    CALL        xCIKLWR        ; MASS14 --> MASS15
04A0 900134          977                             mov                     dptr,#MASS13
                     978     
04A3 120000   F      979                    CALL             xCIKLWR         ;MASS13->MASS14
04A6 900130          980                     MOV        dptr,#MASS12
                     981                    
04A9 120000   F      982                    CALL        xCIKLWR         ; MASS12 --> MASS13
04AC 90012C          983                    MOV         dptr,#MASS11
                     984                     
04AF 120000   F      985                   CALL         xCIKLWR        ; MASS11 --> MASS12
04B2 900128          986                    MOV         dptr,#MASS10
                     987                   
04B5 120000   F      988                    CALL        xCIKLWR        ; MASS10 --> MASS11
04B8 900124          989                                      MOV       dptr,#MASS9
04BB 120000   F      990                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     991     
04BE 900120          992                                             mov                     dptr,#MASS8
04C1 120000   F      993                     CALL            xCIKLWR         ;MASS8->MASS9
04C4 90011C          994                                             mov                     dptr,#MASS7
04C7 120000   F      995                     CALL            xCIKLWR         ;MASS7->MASS8
04CA 900118          996                     MOV       dptr,#MASS6
04CD 120000   F      997                     CALL       xCIKLWR         ; MASS6 --> MASS7
04D0 900114          998                     MOV        dptr,#MASS5
                     999                    
04D3 120000   F     1000                    CALL        xCIKLWR        ; MASS5 --> MASS6
04D6 900110         1001                    MOV         dptr,#MASS4
                    1002                    
04D9 120000   F     1003                    CALL        xCIKLWR        ; MASS4 --> MASS5
04DC 90010C         1004                             mov                     dptr,#MASS3
                    1005     
04DF 120000   F     1006                    CALL             xCIKLWR         ;MASS3->MASS4
04E2 900108         1007                     MOV        dptr,#MASS2
                    1008                    
04E5 120000   F     1009                    CALL        xCIKLWR         ; MASS2 --> MASS3
04E8 900104         1010                    MOV         dptr,#MASS1
                    1011                     
04EB 120000   F     1012                   CALL         xCIKLWR        ; MASS1 --> MASS2
04EE 900100         1013                    MOV         dptr,#MASS0
                    1014                   
04F1 120000   F     1015                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1016     
                    1017                             
04F4 7862           1018                             mov             r0,#rez_A
04F6 120000   F     1019                             call    resar2          ;->r2..r5
                    1020                                     ;call   aform
04F9 900100         1021                                     mov                     dptr,#MASS0
04FC 120000   F     1022                   call              saveIr2                 ; R2-R5 --> MAS0
                    1023              
04FF 900107         1024                   MOV          dptr,#MASS1+3
0502 120000   F     1025                   CALL       addx
0505 90010B         1026                   MOV          dptr,#MASS2+3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    17

0508 120000   F     1027                   CALL       addx
050B 90010F         1028                   MOV          dptr,#MASS3+3
050E 120000   F     1029                  CALL        addx
0511 900113         1030                   MOV       dptr,#MASS4+3
0514 120000   F     1031                   call       addx
0517 900117         1032                     MOV        dptr,#MASS5+3
051A 120000   F     1033                  CALL        addx
051D 90011B         1034                   MOV          dptr,#MASS6+3
0520 120000   F     1035                   CALL       addx
0523 90011F         1036                   MOV          dptr,#MASS7+3
0526 120000   F     1037                  CALL        addx
0529 900123         1038                  MOV        dptr,#MASS8+3
052C 120000   F     1039                   call       addx
052F 900127         1040                     MOV                     dptr,#MASS9+3
0532 120000   F     1041                  call        addx
                    1042     ;27
0535 90012B         1043                                     MOV        dptr,#MASS10+3
0538 120000   F     1044                   CALL       addx
053B 90012F         1045                                     MOV        dptr,#MASS11+3
053E 120000   F     1046                   CALL       addx
0541 900133         1047                   MOV          dptr,#MASS12+3
0544 120000   F     1048                   CALL       addx
0547 900137         1049                   MOV          dptr,#MASS13+3
054A 120000   F     1050                  CALL        addx
054D 90013B         1051                   MOV       dptr,#MASS14+3
0550 120000   F     1052                   call       addx
0553 90013F         1053                                     MOV        dptr,#MASS15+3
0556 120000   F     1054                     CALL     addx
0559 900143         1055                   MOV          dptr,#MASS16+3
055C 120000   F     1056                   CALL       addx
055F 900147         1057                   MOV          dptr,#MASS17+3
0562 120000   F     1058                  CALL        addx
0565 90014B         1059                  MOV        dptr,#MASS18+3
0568 120000   F     1060                   call       addx
056B 90014F         1061                                     MOV                     dptr,#MASS19+3
056E 120000   F     1062                  call        addx
0571 802F           1063                                     jmp             endsum
                    1064     ;массив из 4х измерений
0573                1065     mas4:                   
0573 900108         1066                                             MOV        dptr,#MASS2
0576 120000   F     1067                    CALL        xCIKLWR         ; MASS2 --> MASS3
0579 900104         1068                    MOV         dptr,#MASS1
057C 120000   F     1069                    CALL        xCIKLWR        ; MASS1 --> MASS2
057F 900100         1070                    MOV         dptr,#MASS0
0582 120000   F     1071                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1072     
                    1073                             
0585 7862           1074                             mov             r0,#rez_A
0587 120000   F     1075                             call    resar2          ;->r2..r5
                    1076                                     ;call   aform
058A 900100         1077                                     mov                     dptr,#MASS0
058D 120000   F     1078                   call              saveIr2                 ; R2-R5 --> MAS0
                    1079              
0590 900107         1080                   MOV          dptr,#MASS1+3
0593 120000   F     1081                   CALL       addx
0596 90010B         1082                   MOV          dptr,#MASS2+3
0599 120000   F     1083                   CALL       addx
059C 90010F         1084                   MOV          dptr,#MASS3+3
059F 120000   F     1085                  CALL        addx
                    1086                  
                    1087             ;23.03          
05A2                1088     endsum:
05A2 786E           1089                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
05A4 06             1090                                     inc             @r0
05A5 E6             1091                                     mov             a,@r0   
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    18

05A6 200105         1092                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1093                                     
05A9 B53F31         1094                                     cjne    a,chmasN,masx5
05AC D201           1095                                     setb    bitmas                  ;массив заполнен
05AE 853F6E         1096     masfull:                mov             chmas,chmasN
05B1 783F           1097                                     mov             r0,#chmasN
05B3 E6             1098                                     mov             a,@r0
                    1099     ;masfull:
05B4 B40208         1100                                     cjne    a,#2,nochn2
05B7 900000   F     1101                                     MOV        DPTR,#ch2;10 
05BA 120000   F     1102                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05BD 8028           1103                                     jmp             mas5div
                    1104     
05BF B40A08         1105     nochn2:         cjne    a,#10,nochn10
05C2 900000   F     1106                                                     MOV        DPTR,#ch10 
05C5 120000   F     1107                                     CALL   ldc_ltemp                 ; ltemp <-- 10
05C8 801D           1108                                     jmp             mas5div
                    1109     
05CA B41408         1110     nochn10:        cjne    a,#20,nochn20
05CD 900000   F     1111                                                     MOV        DPTR,#ch20 
05D0 120000   F     1112                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05D3 8012           1113                                     jmp             mas5div
                    1114     
05D5 900000   F     1115     nochn20:        MOV        DPTR,#ch4 
05D8 120000   F     1116                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05DB 800A           1117                                     jmp             mas5div
                    1118     
05DD 856E0B         1119     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05E0 E4             1120                                     clr     a
05E1 F50A           1121                                     mov     ltemp+2,a
05E3 F509           1122                                     mov     ltemp+1,a
05E5 F508           1123                                     mov     ltemp,a
                    1124     
05E7                1125     mas5div:
05E7 120000   F     1126                                     CALL       zdiv;divide                           ; R2-R5 =
                    1127                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1128     
                    1129                             
                    1130      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1131     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1132     ;получен результат 3 байта и знак
05EA 7866           1133                             mov             r0,#rez_A1
05EC 120000   F     1134                             call    saver2           ;сохр среднее по массиву
                    1135     ;;8.11.06                       mov             chmasN,#0
                    1136      ;;;;;;;;;;;;
                    1137      ;;;;;;;;;;;;
05EF C3             1138                             clr             c
05F0 799A           1139                             mov             r1,#parT
05F2 7402           1140                             mov             a,#2
05F4 97             1141                             subb    a,@r1
05F5 501D           1142                             jnc             ankor           ;T<3
                    1143                             ;A-=РЕЗ1                                ;T>3
05F7 120402         1144                             call    altof                   ;r2..r5->float
05FA 785E           1145                             mov             r0,#rez_Ame
05FC 120000   F     1146                             call    saver2
                    1147                             ;;;;
05FF 7890           1148                             mov             r0,#koefKp;->r8..r11
0601 EA             1149                             mov             a,r2
0602 30E702         1150                             jnb             acc.7,nminus3
0605 7894           1151                             mov             r0,#koefKm;->r8..r11
0607 120000   F     1152     nminus3:                call    resar8
060A 120203         1153                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
060D 785E           1154                             mov             r0,#rez_Ame
060F 120000   F     1155                             call    saver2
0612 8021           1156                             jmp             gotoKD
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    19

                    1157     
0614                1158     ankor:  
0614 7898           1159                             mov             r0,#chinkor
0616 E6             1160                             mov             a,@r0
0617 30E703         1161                             jnb             acc.7,nokorr
                    1162                             ;коррекция 0
061A 020000   F     1163                             jmp             kornul
061D                1164     nokorr: 
                    1165                             ;mov            r10,#00         ;       chavt
                    1166                             ;mov            r11,#00h
061D 7881           1167                             mov              r0,#chavt      
061F E6             1168                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
0620 30E737         1169                             jnb             acc.7,nonulavt;jnz              nonulavt        
0623 750A00         1170                             mov             r10,#0;1;00;02          
0626 750BC8         1171                             mov             r11,#0c8h;90h;0c8h;58h
0629 7898           1172                             mov             r0,#chinkor
062B 120000   F     1173                             call    chcmp
062E 7045           1174                             jnz             noavk
                    1175                             ;автокалибровка
0630 020000   F     1176                             jmp             autoka;noavk;
                    1177     
0633 8079           1178     rafterK:                jmp             afterK
                    1179     ;;;;;;;;;;
0635 C3             1180      gotoKD:                clr             c
0636 799A           1181                             mov             r1,#parT
0638 7404           1182                             mov             a,#4
063A 97             1183                             subb    a,@r1
063B 50F6           1184                             jnc             rafterK         ;T<5
                    1185                             ;A1-=A- *KD                     ;T>5
                    1186                             ;call           findkoef                                ;r2,r3-hex
                    1187                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1188                                     
                    1189                             ;       call    altof                   ;r2..r5->float
                    1190                             ;       mov     dptr,#CHtho;100000
                    1191                             ;       call    ldc_ltemp                       ;r8..r11
                    1192                             ;       call    fldiv
                    1193                             ;       call    move28
                    1194                             
063D 785E           1195                             mov             r0,#rez_Ame;->r2..r5   ???????????/
063F 120000   F     1196                             call    resar2
                    1197                                     ;call   flmul
0642 120343         1198                             call    ftol                    ;float->int
0645 7866           1199                             mov             r0,#rez_A1
0647 120000   F     1200                             call    saver2
064A 786A           1201                             mov             r0,#rez_A0;->r8..r11 hex
064C 120000   F     1202                             call    resar8
064F 120000   F     1203                             call    lsub            ;A3=A-1-A0
0652 789C           1204                             mov             r0,#rez_A3
0654 120000   F     1205                             call    saver2
0657 020000   F     1206                             jmp             labelB  
                    1207      ;;;;;;;;;;; 9.11.06
065A 789A           1208     nonulavt:        mov            r0,#parT
065C E6             1209                             mov             a,@r0
065D 6401           1210                             xrl             a,#01
065F 700F           1211                             jnz             avtdec1
0661 7982           1212                             mov             r1,#chavt+1     ;T=1 chavt-10
0663 120000   F     1213                             call    tenmin
0666 7999           1214     kordec10:       mov             r1,#chinkor+1
0668 120000   F     1215                             call    tenmin
066B 801E           1216                             jmp             rezmul
                    1217     
066D 020000   F     1218     rmo220:         jmp             mo220
                    1219     
0670 7981           1220     avtdec1:        mov             r1,#chavt       
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    20

0672 120000   F     1221                             call    chdec           ;chavt-1
                    1222     ;                       jmp             kordec1;rezmul
0675 789A           1223     noavk:          mov             r0,#parT
0677 E6             1224                             mov             a,@r0
0678 6401           1225                             xrl             a,#01
067A 700A           1226                             jnz             kordec1
                    1227                             ;T=1 chinkor-10
067C 7999           1228                     mov             r1,#chinkor+1
067E 120000   F     1229                             call    tenmin
0681 8008           1230                             jmp             rezmul
                    1231     
0683 020000   F     1232     rnotestizm:             jmp                     notestizm
0686 7998           1233     kordec1:        mov             r1,#chinkor
0688 120000   F     1234                             call    chdec           ; chinkor-1
                    1235                        ;9.11.06
                    1236                             ;;;;;;;;;;;;;;
                    1237                             ;;;;;;;;;;;;;
                    1238     ;(РЕЗ1-АN)*K
068B                1239     rezmul:
068B 7866           1240                             mov             r0,#rez_A1;->r2..r5
068D 120000   F     1241                             call    resar2
0690 120402         1242                             call    altof   ;r2..r5->float  6.06    
0693 7884           1243                             mov             r0,#kor0_AN;->r8..r11
0695 120000   F     1244                             call    resar8
0698 1201D1         1245                             call    flsub
069B 7890           1246                             mov             r0,#koefKp;->r8..r11
069D EA             1247                             mov             a,r2
069E 30E702         1248                             jnb             acc.7,nminus
                    1249                             ;jnb            bitznak,nminus
                    1250                     
06A1 7894           1251                             mov             r0,#koefKm;->r8..r11
06A3 120000   F     1252     nminus:         call    resar8
06A6 120203         1253                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
06A9 785E           1254                             mov             r0,#rez_Ame
06AB 120000   F     1255                             call    saver2
                    1256      
06AE                1257     afterK:                 
                    1258     ;;;;;;;;;;;;;;
06AE EA             1259                                     mov             a,r2
06AF 547F           1260                                     anl             a,#7fh
06B1 FA             1261                                     mov             r2,a
06B2 900000   F     1262                                     mov     dptr,#ch_250;220;220000
06B5 120000   F     1263                                     call    ldc_ltemp                       ;r8..r11=8
06B8 1201D6         1264                                     call    flcmp
06BB 50B0           1265                                     jnc             rmo220          ;A>220000
                    1266                                     ;;;;;;;;;
06BD 3015C3         1267                                     jnb                     biteizm,rnotestizm
06C0 78B1           1268                                     mov                     r0,#vichR
06C2 B62155         1269                                     cjne            @r0,#21h,note21
06C5 7A50           1270                                     mov                     r2,#50h                 ;-11a
06C7 7B18           1271                                     mov                     r3,#18h                 ;k8
06C9 12046C         1272                                     call            rebyte2                         ;r2..r5- he
                             x
06CC 120402         1273                                     call            altof                   ;r2..r5->float
06CF C002           1274                                     push            rr2
06D1 C003           1275                                     push            rr3
06D3 C004           1276                                     push            rr4
06D5 C005           1277                                     push            rr5
06D7 7A50           1278                                     mov                     r2,#50h                 ;k10
06D9 7B20           1279                                     mov                     r3,#20h
06DB 12046C         1280     re11_7: call            rebyte2                 ;r2..r5
06DE 120402         1281                                     call            altof                   ;r2..r5->float
06E1 120000   F     1282                                     call            move28
06E4 D005           1283                                     pop                     rr5
06E6 D004           1284                                     pop                     rr4
06E8 D003           1285                                     pop                     rr3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    21

06EA D002           1286                                     pop                     rr2
06EC 1202B7         1287                                     call            fldiv
                    1288                             ;       mov                     dptr,#ch_10
                    1289                             ;       call            ldc_ltemp                       ;r8..r11
                    1290                             ;       call            flmul
                    1291                                     ;;;;;2.02.07
06EF C002           1292                                     push            rr2
06F1 C003           1293                                     push            rr3
06F3 C004           1294                                     push            rr4
06F5 C005           1295                                     push            rr5
06F7 7A50           1296                                     mov                     r2,#50h                 ;-11a
06F9 7B2C           1297                                     mov                     r3,#2ch                 ;Km
06FB 12046C         1298                                     call            rebyte2                         ;r2..r5- he
                             x
06FE 120402         1299                                     call            altof                   ;r2..r5->float
0701 120000   F     1300                                     call            move28
0704 D005           1301                                     pop                     rr5
0706 D004           1302                                     pop                     rr4
0708 D003           1303                                     pop                     rr3
070A D002           1304                                     pop                     rr2
070C 120203         1305                                     call            flmul                           ;*Km
070F 900000   F     1306                                     mov     dptr,#CHtho;100000
0712 120000   F     1307                                     call    ldc_ltemp                       ;r8..r11=8
0715 1202B7         1308                                     call    fldiv
                    1309                                     ;;;;;
0718 8050           1310                                     jmp                     temul   
071A B62218         1311     note21: cjne            @r0,#22h,note22
071D 7A50           1312                                     mov                     r2,#50h                 ;-09a
071F 7B10           1313                                     mov                     r3,#10h                 ;k6
0721 12046C         1314                                     call            rebyte2                         ;r2..r5- he
                             x
0724 120402         1315                                     call            altof                   ;r2..r5->float
0727 C002           1316                                     push            rr2
0729 C003           1317                                     push            rr3
072B C004           1318                                     push            rr4
072D C005           1319                                     push            rr5
072F 7A50           1320                                     mov                     r2,#50h                 ;k8
0731 7B18           1321                                     mov                     r3,#18h
0733 80A6           1322                                     jmp                     re11_7
0735 7A50           1323     note22: mov                     r2,#50h                 ;-7a
0737 7B08           1324                                     mov                     r3,#08h                 ;k4
0739 12046C         1325                                     call            rebyte2                         ;r2..r5- he
                             x
073C 120402         1326                                     call            altof                   ;r2..r5->float
073F C002           1327                                     push            rr2
0741 C003           1328                                     push            rr3
0743 C004           1329                                     push            rr4
0745 C005           1330                                     push            rr5
0747 7A50           1331                                     mov                     r2,#50h                 ;k6
0749 7B10           1332                                     mov                     r3,#10h
074B 808E           1333                                     jmp                     re11_7  
                    1334                                     ;;;;;;;;;
074D                1335     notestizm:
074D 301208         1336                                     jnb             bitklb,komulpz
0750 900000   F     1337                                     mov     dptr,#chk;100000
0753 120000   F     1338                                     call    ldc_long                        ;r2..r5
0756 8006           1339                                     jmp             komul
0758 120000   F     1340     komulpz:call            findkoef                                ;r2,r3-hex
075B 12046C         1341                                     call            rebyte2                         ;r2..r5- he
                             x
                    1342                                     
075E 120402         1343     komul:  call    altof                   ;r2..r5->float
0761 900000   F     1344                                     mov     dptr,#CHtho;100000
0764 120000   F     1345                             call    ldc_ltemp                       ;r8..r11=8
0767 1202B7         1346                                     call    fldiv
076A 120000   F     1347     temul:                          call    move28
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    22

076D 785E           1348                                     mov             r0,#rez_Ame
076F 120000   F     1349                                     call    resar2
                    1350                     
0772 120203         1351                                     call    flmul     ;A1-=A-*KD  fl
                    1352                                     
0775 120343         1353                                     call    ftol                    ;float->int
0778 7866           1354                                     mov             r0,#rez_A1
077A 120000   F     1355                                     call    saver2
077D 120402         1356                                     call    altof                   ;r2..r5->float
0780 EA             1357                                     mov             a,r2
0781 547F           1358                                     anl             a,#7fh
0783 FA             1359                                     mov             r2,a
0784 900000   F     1360                                     mov     dptr,#ch_220;200;200000
0787 120000   F     1361                                     call    ldc_ltemp                       ;r8..r11=8
078A 1201D6         1362                                     call    flcmp
078D 502D           1363                                     jnc             rrmo220         ;A>200000
                    1364                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1365                             ;       jb              bitavp,yesavp
078F 301808         1366                                     jnb             knizm,goA2
0792 300602         1367                                     jnb             bitvi11,qu_avp
0795 8003           1368                                     jmp             goA2
0797 20052F         1369     qu_avp:                 jb              bitavp,yesavp
079A                1370     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
079A                1371     goA2:                    ;A2=A1-
079A 7866           1372                                      mov            r0,#rez_A1
079C 120000   F     1373                                     call    resar2
079F 787B           1374                                     mov             r0,#rez_A2
07A1 120000   F     1375                                     call    saver2
07A4                1376     goA3A2:                  ;A3=A2-A0
07A4 786A           1377                                       mov           r0,#rez_A0
07A6 120000   F     1378                                     call    resar8
07A9 120000   F     1379                                     call    lsub
07AC 789C           1380                                     mov             r0,#rez_A3
07AE 120000   F     1381                                     call    saver2
                    1382                                     ;;;;;;
07B1 200660         1383                                     jb              bitvi11,yesvich
07B4                1384     goonin:            ;jmp         goonind;indA3;8.11.06
07B4 78AC           1385                                     mov             r0,#chind
07B6 B60006         1386                                     cjne    @r0,#0,rnochi0
07B9 020000   F     1387                                     jmp             goonind;indA3
                    1388     
07BC 020000   F     1389     rrmo220:                jmp             mo220
07BF 020000   F     1390     rnochi0:                jmp             nochi0
07C2 7866           1391     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07C4 120000   F     1392                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07C7 80D1           1393                                             jmp             goA2
                    1394     ;;;;;;;;;;;;;;;;
07C9 EA             1395     yesavp:                 mov             a,r2
07CA 547F           1396                                     anl             a,#7fh
07CC FA             1397                                     mov             r2,a
07CD 900000   F     1398                                     mov     dptr,#ch_10th;10000
07D0 120000   F     1399                                     call    ldc_ltemp                       ;r8..r11=8
07D3 1201D6         1400                                     call    flcmp
07D6 50C2           1401                                     jnc             noavp           ;A>10000        
07D8 78AE           1402                                     mov             r0,#diap                ;10-11
07DA B60902         1403                                     cjne    @r0,#9,avpgo
07DD 80BB           1404                                     jmp             noavp
07DF                1405     avpgo:                  
07DF 06             1406                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07E0 B60A01         1407                                     cjne    @r0,#0ah,clmasv
07E3 16             1408                                     dec             @r0
07E4                1409     clmasv:         ;сбросить массив
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    23

07E4 120000   F     1410                             call    loadUS
                    1411                             ;call   louizm
07E7 120000   F     1412                             call     clmassix
07EA 78B3           1413                                     mov             r0,#summa
07EC 120000   F     1414                                     call    clear4
07EF 786A           1415                                     mov             r0,#rez_A0
07F1 120000   F     1416                                     call    clear4
07F4 C20F           1417                                     clr             bitnul
07F6 D207           1418                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07F8 80BA           1419                                jmp     goonin
                    1420     
07FA D00B           1421     erra01:         pop                     r11
07FC D00A           1422                                     pop                     r10
07FE D009           1423                                     pop                     r9
0800 D008           1424                                     pop                     r8
0802 C214           1425                                     clr             bitvich
0804 C206           1426                                     clr             bitvi11
0806 753934         1427                                             mov                     nuerr,#34h;константа не дол
                             жна быть равна0
0809 120000   F     1428                                             call            error
080C 120000   F     1429                                             call            ind
080F 120000   F     1430                                             call            z_1s
0812 80A0           1431                                             jmp             goonin
                    1432     
                    1433     
0814                1434     yesvich:        
                    1435                     ;                       mov             r0,#konstB
                    1436                     ;               call    resar2
                    1437                     ;               call    move28
0814 789C           1438                                     mov             r0,#rez_A3;A1
0816 120000   F     1439                                     call    resar2                          ;HEX
                    1440                                     
0819 120402         1441                                     call            altof                   ;r2..r5->float
081C EA             1442                                     mov             a,r2                    ;модуль
081D 547F           1443                                     anl             a,#7fh
081F FA             1444                                     mov             r2,a
                    1445                     ;               call            fladd                           ;A1+B
                    1446                                     
0820 900000   F     1447                                     mov     dptr,#CH_500;
0823 120000   F     1448                                     call    ldc_ltemp                       ;r8..r11
0826 1201D6         1449                                     call    flcmp
0829 407E           1450                                     jc                      mo500R;error <500 >22000
082B 900000   F     1451                                     mov     dptr,#CH_22T;
082E 120000   F     1452                                     call    ldc_ltemp                       ;r8..r11
0831 1201D6         1453                                     call    flcmp
0834 507F           1454                                     jnc             mo500I          ;error
                    1455                                     ;;;;;;;;;;;;
0836 120000   F     1456                                     call            move28
0839 C008           1457                                     push            r8
083B C009           1458                                     push            r9
083D C00A           1459                                     push            r10
083F C00B           1460                                     push            r11
0841 78BC           1461                                     mov             r0,#konstA
0843 120000   F     1462                                     call    resar2
0846 900000   F     1463                                     mov                     dptr,#ch0
0849 120000   F     1464                                     call            ldc_ltemp
084C 1201D6         1465                                     call            flcmp
084F 60A9           1466                                     jz              erra01
0851 900000   F     1467                                     mov             dptr,#CH_B
0854 120000   F     1468                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0857 120203         1469                                     call            flmul                           ;A*10-7
085A D00B           1470                                     pop                     r11
085C D00A           1471                                     pop                     r10
085E D009           1472                                     pop                     r9
0860 D008           1473                                     pop                     r8
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    24

0862 1202B7         1474                                     call            fldiv                   ;результат R
0865 78C9           1475                                     mov                     r0,#rez_R
0867 120000   F     1476                                     call            saver2
086A 120343         1477                                     call            ftol                    ;float->hex
                    1478                                     ;;;;;;;;;;
086D 784F           1479                                             mov             r0,#abin
086F 120000   F     1480                                             call    saver2
                    1481     ;;;;;;;;
0872 7840           1482                                                     mov             r0,#bufind
0874                1483     age9:
0874 7620           1484                             mov             @r0,#" "          ;погасить индикатор
0876 08             1485                             inc             r0
0877 B84BFA         1486                             cjne    r0,#bufind+11,age9
                    1487                                             
087A 78C9           1488                                             mov             r0,#rez_R
087C 120000   F     1489                                             call            resar2
                    1490     ;;;;;;;;;;
087F 900000   F     1491                                     mov             dptr,#CH_fl
0882 120000   F     1492                                     CALL   ldc_ltemp
0885 1202B7         1493                                     call            fldiv
                    1494     
0888 78B8           1495                                     mov             r0,#work                ;степень +
088A 7600           1496                                     mov             @r0,#0
088C 78B9           1497                                     mov             r0,#work+1;степень -
088E 7600           1498                                     mov             @r0,#0
0890 900000   F     1499     compa1: mov     dptr,#ch_1;
0893 120000   F     1500                                     call    ldc_ltemp                       ;r8..r11
0896 1201D6         1501                                     call    flcmp
0899 4026           1502                                     jc              equ0            ;<1
089B 78B8           1503                                     mov             r0,#work                        ;степень +
089D 06             1504                                     inc             @r0
089E 900000   F     1505                                     mov             dptr,#ch_10;
08A1 120000   F     1506                                     call    ldc_ltemp                       ;r8..r11
08A4 1202B7         1507                                     call            fldiv
08A7 80E7           1508                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1509                                     ;;;;;;;;;;;;;;;;;;;
08A9 900000   F     1510     mo500R: mov             dptr,#teOLR
08AC 120000   F     1511                               call          lotext           
08AF 120000   F     1512                                     call            ind
08B2 020000   F     1513                                     jmp                     nobavp;nobitizm
08B5 900000   F     1514     mo500I: mov             dptr,#teOLI
08B8 120000   F     1515                               call          lotext           
08BB 120000   F     1516                                     call            ind
08BE 020000   F     1517                                     jmp                     nobavp;nobitizm
08C1                1518     equ0:           ;;;;;   call            ftol                    ;float->int
08C1 78B8           1519                                     mov             r0,#work                ;степень +
08C3 B60019         1520                                     cjne    @r0,#0,equ00
                    1521                                     
08C6 900000   F     1522     compa2: mov     dptr,#ch_1;
08C9 120000   F     1523                                     call    ldc_ltemp                       ;r8..r11
08CC 1201D6         1524                                     call    flcmp
08CF 500E           1525                                     jnc             equ00           ;>1
08D1 78B9           1526                                     mov             r0,#work+1                      ;степень -
08D3 16             1527                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
08D4 900000   F     1528                                     mov             dptr,#ch_10;
08D7 120000   F     1529                                     call    ldc_ltemp                       ;r8..r11
08DA 120203         1530                                     call            flmul
08DD 80E7           1531                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1532     
                    1533     
08DF                1534     equ00:          
08DF 7853           1535                                                     mov             r0,#adec
08E1 7952           1536                                             mov             r1,#abin+3      ;hex->10
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    25

08E3 120000   F     1537                                             call    bindec
                    1538     
                    1539                                                     ;если степень полож убирать младший байт
                    1540                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1541                                                     ;число в bufind..bufind+5
08E6 78B8           1542                                             mov             r0,#work
08E8 B60021         1543                                             cjne    @r0,#0,outr
08EB 08             1544                                             inc             r0                      ;work+1
08EC B6FF05         1545                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08EF 06             1546                                             inc                     @r0;!!!!!!!!!?
08F0 785B           1547                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08F2 8003           1548                                             jmp                     bufr30
                    1549                                             ;;;;;;;;;;;;;;
08F4 06             1550     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08F5 785C           1551                                                     mov             r0,#adec+9
08F7 7945           1552     bufr30:         mov             r1,#bufind+5;6
08F9 7F05           1553                                             mov             r7,#5;7
08FB E6             1554     bufr2:                          mov             a,@r0
08FC 2430           1555                                             add             a,#30h
08FE F7             1556                                             mov             @r1,a
08FF 19             1557                                             dec             r1
0900 18             1558                                             dec             r0
0901 DFF8           1559                                             djnz    r7,bufr2
                    1560     
0903 784F           1561                                             mov             r0,#abin
0905 120000   F     1562                                             call            clear4
0908 78B9           1563                                             mov             r0,#work+1
090A 801C           1564                                     jmp             outr5
                    1565     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
090C 785C           1566     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
090E C3             1567                                             clr             c
090F 79B8           1568                                             mov             r1,#work
0911 E8             1569                                             mov             a,r0
0912 14             1570                                             dec             a                                  
                                  ;n-1
0913 97             1571                                             subb    a,@r1
0914 F8             1572                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0915 7945           1573                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0917 7F05           1574                                             mov             r7,#5;7
0919 E6             1575     bufr:                           mov             a,@r0
091A 2430           1576                                             add             a,#30h
091C F7             1577                                             mov             @r1,a
091D 19             1578                                             dec             r1
091E 18             1579                                             dec             r0
091F DFF8           1580                                             djnz    r7,bufr
                    1581     
0921 784F           1582                                             mov             r0,#abin
0923 120000   F     1583                                             call            clear4
0926 78B8           1584                                     mov             r0,#work
0928 E6             1585     outr5:                  mov             a,@r0
0929 F552           1586                                             mov             abin+3,a
                    1587                                                                     ;n(hex)->abin
092B 120000   F     1588                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
092E 2552           1589                                             add             a,abin+3
0930 F552           1590                                             mov             abin+3,a
0932 7853           1591                                             mov             r0,#adec
0934 7952           1592                                             mov             r1,#abin+3      ;hex->10
0936 120000   F     1593                                             call    bindec
0939 855C48         1594                                             mov             bufind+8,adec+9
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    26

093C 855B47         1595                                             mov             bufind+7,adec+8
093F 754966         1596                                             mov             bufind+9,#66h
0942 020000   F     1597                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1598                                             
                    1599                                     ;;;;;;;;;;;;;;;;;;;;;
                    1600     ;;;;;;;;;;;;;
                    1601     
0945 300508         1602     mo220:             jnb          bitavp,indoll
0948 301805         1603                                jnb          knizm,indoll;bitizm,indoll
094B 78AE           1604                                     mov             r0,#diap
094D B6000E         1605                                     cjne    @r0,#0,nodi2
                    1606                                ;10-2
0950 300408         1607     indoll:         jnb             bitizm,goonin1;чтобы не OLL было при нажатии кнопок меню,па
                             м,вычR
0953 900000   F     1608                                             mov             dptr,#teOLL;OLL
0956 120000   F     1609                                             call    lotext
0959 D217           1610                                             setb    bitoll
095B 020000   F     1611     goonin1:                jmp             goonin  
                    1612     
095E 16             1613     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1614     
095F B6FF01         1615                                     cjne    @r0,#0ffh,nodi9
0962 06             1616                                     inc             @r0
                    1617     
0963 120000   F     1618     nodi9:          call    loadUS
                    1619                                     ;call   louizm
                    1620                                     ;сбросить массив
0966 120000   F     1621                                     call     clmassix
0969 78B3           1622                                     mov             r0,#summa
096B 120000   F     1623                                     call    clear4
096E 786A           1624                                     mov             r0,#rez_A0
0970 120000   F     1625                                     call    clear4
0973 C20F           1626                                     clr             bitnul  
0975 D207           1627                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0977 020000   F     1628                                jmp     goonin
                    1629     
097A 16             1630     nochi0:                 dec             @r0                     ;СТИ-1
097B 020000   F     1631                                     jmp             labelB  
                    1632     
                    1633             
                    1634     ;;;;;;;;;;;;;;;
                    1635     
097E                1636     nop3_0: ;;      ;rez_A-rez_A0
                    1637                     ;;                      mov             r0,#rez_A0
                    1638                     ;;                      call    resar8
                    1639                     ;;                      call    lsub
                    1640                     ;;                      mov             r0,#rez_A
                    1641                     ;;;                     call    saver2
                    1642     
097E B70207         1643     no3parN:                        cjne    @r1,#2,no2parN
                    1644                                             ;в байт 0  записать пробел
0981 7946           1645                                             mov             r1,#bufind+6
0983 7720           1646                                             mov             @r1,#" ";0fdh;
0985 020000   F     1647                                             jmp             seeind;moveA3
                    1648     
0988                1649     no2parN:                        ;в байты 0 и 1 записать пробел
0988 7945           1650                                             mov             r1,#bufind+5
098A 7720           1651                                             mov             @r1,#" ";0fdh;" "
098C 09             1652                                             inc             r1
098D 7720           1653                                             mov             @r1,#" ";0fdh;" "
098F 8076           1654                                             jmp             seeind;moveA3
0991 8074           1655      rseeind:               jmp             seeind
                    1656     
0993                1657     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    27

                    1658                                     
                    1659                                             
0993                1660     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1661                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1662                     ;до конца цикла измерения результат не размещать в буфере
                    1663                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1664                     ;и возврату в режим измерения
0993 20145C         1665                                             jb              bitvich,rnorvich
0996 201059         1666                                             jb              bitt2,rnorvich
0999 2017F5         1667                                             jb              bitoll,rseeind
                    1668                                             
099C 2011F2         1669                                             jb              bitmenu,rseeind
099F 200BEF         1670                                             jb              bitmem,rseeind
                    1671     ;;;;;;;;;;;;;;
                    1672                                             ; mov           r0,#rez_A3
                    1673                                             ;call   resar2
                    1674                                             ;call   ftol                    ;float->int r2..r5
                    1675     ;;;;;;;;
09A2 789C           1676                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
09A4 120000   F     1677                                             call    resar2;????????????????17.01.07
                    1678                                     
09A7 120000   F     1679                                             call    maform
09AA 784F           1680                                             mov             r0,#abin
09AC 120000   F     1681                                             call    saver2
                    1682     ;;;;;;;;
                    1683                                             
09AF 7853           1684                                             mov             r0,#adec
09B1 7952           1685                                             mov             r1,#abin+3      ;hex->10
09B3 120000   F     1686                                             call    bindec
                    1687                                     
09B6 785C           1688                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
09B8 7946           1689                                             mov             r1,#bufind+6
09BA 7F07           1690                                             mov             r7,#7
09BC E6             1691     bufdec:                         mov             a,@r0
09BD 2430           1692                                             add             a,#30h
09BF F7             1693                                             mov             @r1,a
09C0 19             1694                                             dec             r1
09C1 18             1695                                             dec             r0
09C2 DFF8           1696                                             djnz    r7,bufdec
09C4 7847           1697                                             mov             r0,#bufind+7
09C6 762D           1698                                             mov             @r0,#2dh          ;-2..-9
09C8 7840           1699                                             mov             r0,#bufind
09CA 762B           1700                                             mov             @r0,#2bh
09CC 300202         1701                                             jnb             znmat,nozzmi;bitznak,nozzmi
09CF 762D           1702                                             mov             @r0,#2dh
09D1 79AE           1703     nozzmi:                         mov             r1,#diap
09D3 7848           1704                                             mov             r0,#bufind+8
09D5 E7             1705                                             mov             a,@r1
09D6 B4080B         1706                                             cjne    a,#8,nodi8
09D9 20151D         1707                                             jb              biteizm,seegoon
09DC 7630           1708                                             mov             @r0,#30h                 ;10-10
09DE 18             1709                                             dec             r0
09DF 7663           1710                                             mov             @r0,#63h;31h
09E1 08             1711                                             inc             r0
09E2 8015           1712                                             jmp             seegoon
09E4 B4090F         1713     nodi8:                          cjne    a,#9,nodis9
09E7 20150F         1714                                     jb              biteizm,seegoon
09EA 7631           1715                                             mov             @r0,#31h           ;10-11
09EC 18             1716                                             dec             r0
09ED 7663           1717                                             mov             @r0,#63h;31h
                    1718                                     
09EF 08             1719                                             inc             r0
09F0 8007           1720                                             jmp             seegoon
                    1721     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    28

09F2 8079           1722     rnorvich:               jmp             norvich
09F4 8088           1723     rno3parN:               jmp             no3parN
                    1724     
09F6 2432           1725     nodis9:                         add             a,#32h
09F8 F6             1726                                             mov             @r0,a;#37h;"T";
09F9 08             1727     seegoon:                        inc             r0
09FA 7641           1728                                             mov             @r0,#"A";"E";
09FC 08             1729                                             inc             r0
09FD 7600           1730                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09FF 08             1731                                             inc             r0;             mov             buf
                             ind+11
0A00 7610           1732                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1733                                             
                    1734     ;;;;;;;;;;;;;;;
                    1735     ;;;;;;goonind:
0A02 79AF           1736                                             mov             r1,#parN        ; ??????
0A04 B703ED         1737                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1738             
0A07                1739     seeind:                         ;;;;;;;;;;;;;
0A07 784A           1740                                             mov             r0,#bufind+10
0A09 E6             1741                                             mov             a,@r0
0A0A 300F03         1742                                             jnb             bitnul,nnnul
0A0D 4408           1743                                             orl             a,#08h
0A0F F6             1744                                             mov             @r0,a
0A10 799A           1745      nnnul:         mov             r1,#parT
0A12 B70204         1746                                             cjne    @r1,#2,nsec1
0A15 4420           1747                                             orl             a,#20h    ;1s
0A17 8009           1748                                             jmp             nsec10
0A19 B70104         1749     nsec1:          cjne    @r1,#1,nsec11
0A1C 4440           1750                                             orl             a,#40h                  ;10s
0A1E 8002           1751                                             jmp             nsec10
                    1752                                     
0A20 4410           1753     nsec11:         orl             a,#10h
                    1754                                                      ;0,1s
                    1755     ;;;;;;;;;;;;;;;;
0A22                1756     nsec10:         
                    1757     
                    1758     
0A22 784A           1759                                             mov             r0,#bufind+10   
0A24 F6             1760                                             mov             @r0,a
0A25 300504         1761                                             jnb             bitavp,nobavp
0A28 4404           1762                                             orl             a,#04           ;bufind+10.2
0A2A F6             1763                                             mov             @r0,a
0A2B F6             1764                                             mov             @r0,a   
0A2C 784A           1765     nobavp:         mov             r0,#bufind+10   
0A2E F6             1766                                             mov             @r0,a   
0A2F 301803         1767                                        jnb          knizm,nobitizm
0A32 4402           1768                                             orl             a,#02
0A34 F6             1769                                              mov            @r0,a
0A35                1770     nobitizm:                       
0A35 301A07         1771                                             jnb             bitakt,notakt
0A38 C21A           1772                                             clr             bitakt
0A3A 534AFE         1773                                             anl             bufind+10,#0feh
0A3D 8005           1774                                             jmp             taktind
0A3F D21A           1775     notakt:                         setb    bitakt
0A41 434A01         1776                                             orl             bufind+10,#01                      
                                          
0A44                1777     taktind:                
                    1778     ;;;;;;;;;
0A44 301517         1779                                             jnb             biteizm,yesind
0A47 79B1           1780                                             mov             r1,#vichR
0A49 7848           1781                                             mov             r0,#bufind+8
0A4B 7654           1782                                             mov             @r0,#'T'
0A4D 08             1783                                             inc             r0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    29

0A4E B72104         1784                                             cjne    @r1,#21h,test9i
0A51 7631           1785                                             mov             @r0,#31h;11A
                    1786                                     ;       dec             r0
                    1787                                     ;       mov             @r0,#63h
0A53 8009           1788                                             jmp             yesind
0A55 B72204         1789     test9i:         cjne    @r1,#22h,test7i
0A58 7632           1790                                             mov             @r0,#32h;39h;09A
0A5A 8002           1791                                             jmp             yesind
0A5C 7633           1792     test7i:         mov             @r0,#33h;37h;07A
                    1793     ;;;;;;;;;
0A5E                1794     yesind:         
0A5E 301203         1795                                             jnb             bitklb,noklb
0A61 434A80         1796                                             orl             bufind+10,#80h; on kmp
0A64 300A03         1797     noklb:          jnb             bitbon,nobuf
0A67 434B02         1798                                             orl             bufind+11,#02h; on pysk
0A6A 120000   F     1799     nobuf:          call    ind        ;пп выдачи на индикатор
0A6D                1800     norvich: 
0A6D 789A           1801                                     mov             r0,# parT
0A6F 79AC           1802                                             mov             r1,#chind
0A71 B60152         1803                                             cjne    @r0,#1,rnot1in
0A74                1804     labelB:                    ;;;;;;;;;;;
                    1805                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A74 789F           1806                                                     mov     r0,#rez_A3+3
                    1807                             ;;;;;;;;
0A76 79BB           1808                             mov             r1,#work+3
0A78 E6             1809                             mov             a,@r0
0A79 7F07           1810                             mov             r7,#7;кол сдв вправо
0A7B C3             1811     dvig3:          clr             c
0A7C 13             1812                             rrc             a
0A7D DFFC           1813                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A7F FA             1814                             mov             r2,a    ;сохр байт
0A80 18             1815                             dec             r0              ;rez_A3+2
0A81 E6             1816                             mov             a,@r0
0A82 C0E0           1817                             push    acc
0A84 C3             1818                             clr             c
0A85 7F01           1819                             mov             r7,#1
0A87 C3             1820     dvig2:          clr             c
0A88 33             1821                             rlc             a
0A89 DFFC           1822                             djnz    r7,dvig2 ;d12..d11       средний байт
0A8B 4A             1823                             orl             a,r2
0A8C F7             1824                             mov             @r1,a;сформ мл байт
0A8D 19             1825                             dec             r1
0A8E D0E0           1826                             pop             acc
                    1827                             
0A90 7F07           1828                             mov             r7,#7
0A92 C3             1829     dvig1:          clr             c
0A93 13             1830                             rrc             a
0A94 DFFC           1831                             djnz    r7,dvig1 ;d18     ср байт
0A96 FA             1832                             mov             r2,a   ;сохр
0A97 18             1833                             dec             r0
0A98 E6             1834                             mov             a,@r0 ;rez_A3+1
0A99 C0E0           1835                             push    acc
                    1836                     
0A9B 7F01           1837                             mov             r7,#1
0A9D C3             1838     dvig0:          clr             c
0A9E 33             1839                             rlc             a
0A9F DFFC           1840                             djnz    r7,dvig0 ;        d21..d16
0AA1 4A             1841                             orl             a,r2
0AA2 F7             1842                             mov             @r1,a   ; сформ средний  байт
0AA3 19             1843                             dec             r1
0AA4 D0E0           1844                             pop             acc       ;rez_A3+1
                    1845                             ;;;;;;;;;;;;;;
                    1846     ;                       jb              acc.7,dvm
0AA6 C3             1847                             clr             c
0AA7 7F07           1848                             mov             r7,#7
0AA9 C3             1849     dvig4:          clr             c
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    30

0AAA 13             1850                             rrc             a
0AAB DFFC           1851                             djnz    r7,dvig4 ;        d22
0AAD FA             1852                             mov             r2,a   ;сохр
0AAE 18             1853                             dec             r0;     rez_A3
0AAF E6             1854                             mov             a,@r0
                    1855                             ;;;;;
0AB0 7F01           1856                             mov             r7,#1
0AB2 C3             1857     vig0:           clr             c
0AB3 33             1858                             rlc             a
0AB4 DFFC           1859                             djnz    r7,vig0 ;         d24..d30
0AB6 4A             1860                             orl             a,r2
0AB7 F7             1861                             mov             @r1,a   ; сформ   байт
0AB8 19             1862                             dec             r1
0AB9 E6             1863                             mov             a,@r0
                    1864                             ;;;;;
0ABA 20E70C         1865                             jb              acc.7,dvm
0ABD C3             1866                             clr             c
0ABE 7F07           1867                             mov             r7,#7
0AC0 C3             1868     vig4:           clr             c
0AC1 13             1869                             rrc             a
0AC2 DFFC           1870                             djnz    r7,vig4 ;         d
0AC4 8009           1871                             jmp             endsdv
                    1872     
0AC6 020000   F     1873     rnot1in:                jmp             not1in
                    1874     
                    1875     ;;;;;;;;;;;;                                    
0AC9 7F07           1876     dvm:            mov             r7,#7
0ACB D3             1877     dvig6:          setb            c
0ACC 13             1878                             rrc             a
0ACD DFFC           1879                             djnz    r7,dvig6 ;        d31
0ACF F7             1880     endsdv:         mov             @r1,a
                    1881                                                             
                    1882      ;->work   
                    1883                             
0AD0 900000   F     1884                             mov             dptr,#chzap
0AD3 120000   F     1885                             call     ldc_long
0AD6 78BB           1886                              mov            r0,#work+3
0AD8 120000   F     1887                             call    ladd
0ADB ED             1888                             mov             a,r5
0ADC F5D2           1889                             mov             DAC0L,a
                    1890                             
0ADE EC             1891                             mov             a,r4
0ADF F5D3           1892                             mov             DAC0H,a
                    1893     
                    1894                                             ;;;;;;;;;;
0AE1 78CF           1895                                             mov                     r0,#chbuf               ;fl
                             oat
0AE3 120000   F     1896                                             call            resar2
0AE6 900000   F     1897                                             mov                     dptr,#ch_2;ch0;ch_1
0AE9 120000   F     1898                                             call            ldc_ltemp
0AEC 1201D6         1899                                             call            flcmp
0AEF 5020           1900                                             jnc                     rnobuf0
                    1901                                             
0AF1 900000   F     1902                                             mov                     dptr,#ch_1
0AF4 120000   F     1903                                             call            ldc_ltemp
0AF7 1201D1         1904                                             call            flsub
0AFA 900E00         1905                                             mov                     dptr,#chbuf1               
                                  ;СБ1 внешн озу
0AFD EA             1906                                             mov                     a,r2
0AFE F0             1907                                             movx            @dptr,a
0AFF A3             1908                                             inc                     dptr
0B00 EB             1909                                             mov                     a,r3
0B01 F0             1910                                             movx            @dptr,a
0B02 A3             1911                                             inc                     dptr
0B03 EC             1912                                             mov                     a,r4
0B04 F0             1913                                             movx            @dptr,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    31

0B05 A3             1914                                             inc                     dptr
0B06 ED             1915                                             mov                     a,r5
0B07 F0             1916                                             movx            @dptr,a
                    1917                                             
                    1918                                             
                    1919                                             ;jnc                    rnobuf0
0B08 200909         1920                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0B0B 200A08         1921                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0B0E 020000   F     1922                                             jmp             gocikle
0B11 020000   F     1923     rnobuf0:        jmp             nobuf0
0B14                1924     yesprd: ;передать   A3 в буфер
0B14 8045           1925                                             jmp             goonT
0B16                1926     yesbuf:         ;записать   A3 в буфер
0B16 120000   F     1927                                             call            resa_hl;dptr-
0B19 120000   F     1928                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1929                                                                             ;в ячейке saven_bl
0B1C 120000   F     1930                                             call            save_hl
0B1F 78AE           1931                                             mov                     r0,#diap
0B21 E6             1932                                             mov                     a,@r0
0B22 7938           1933                                             mov                     r1,#nblok
0B24 B70104         1934                                             cjne            @r1,#1,nosav1
0B27 F534           1935                                             mov                     sadiap,a
0B29 8012           1936                                             jmp                     gotostrob
0B2B B70204         1937     nosav1:         cjne            @r1,#2,nosav2
0B2E F532           1938                                             mov                     sadiap2,a
0B30 800B           1939                                     jmp                     gotostrob
0B32 B70304         1940     nosav2:         cjne            @r1,#3,nosav3
0B35 F531           1941                                             mov                     sadiap3,a
0B37 8004           1942                                     jmp                     gotostrob
0B39                1943     nosav3:         
0B39 F530           1944                                             mov                     sadiap4,a
0B3B 8000           1945                                     jmp                     gotostrob
                    1946     
                    1947                                             ;строб
0B3D                1948     gotostrob:
0B3D E586           1949                                     mov             a,P6            ;p6.4=0
0B3F 54EF           1950                             anl             a,#0efh
0B41 F586           1951                             mov             P6,a
0B43 00             1952                             nop
0B44 00             1953                             nop
                    1954                                     
0B45 E586           1955                             mov             a,P6                    ;p6.4=1 
0B47 4410           1956                             orl             a,#10h
0B49 F586           1957                             mov             P6,a
                    1958                                     ;;;;;;;;;
0B4B E5DA           1959                             mov             a,PCA0CPM0;     
0B4D 4446           1960                             orl             a,#46h;anl              a,#0fbh
0B4F F5DA           1961                             mov             PCA0CPM0,a
                    1962     
0B51 75CDD0         1963                             mov             TH2,#0d0h
0B54 75CC00         1964                             mov             TL2,#00
                    1965     
0B57 D2CA           1966                             setb            T2CON.2
0B59 D2AD           1967                             setb            ET2;IE.5                            
0B5B 78CD           1968     goonT:                          mov             r0,#interva;high  byte loadr2
0B5D E6             1969                                             mov             a,@r0
0B5E FC             1970                                             mov             r4,a
0B5F 08             1971                                             inc             r0
0B60 E6             1972                                             mov             a,@r0
0B61 FD             1973                                             mov             r5,a
0B62 E4             1974                                             clr             a
0B63 FB             1975                                             mov             r3,a
0B64 FA             1976                                             mov             r2,a                            ;r2
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    32

                             ..r5-interval(hex)
0B65 120402         1977                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1978     
0B68 789A           1979                                             mov             r0,#parT
0B6A B60108         1980                                             cjne    @r0,#1,nott1
0B6D 900000   F     1981                                             mov                     dptr,#ch_2       
0B70 120000   F     1982                                             call            ldc_ltemp
0B73 8009           1983                                             jmp                     intmul
                    1984     
0B75 B60225         1985     nott1:                  cjne    @r0,#2,nott2
0B78 900000   F     1986                                                     mov                     dptr,#ch_10      
0B7B 120000   F     1987                                                     call            ldc_ltemp
                    1988                                                                             
0B7E 120203         1989     intmul: call            flmul                                   ;*10
0B81 900E00         1990     intmul1:        mov             dptr,#chbuf1    ;СБ1
0B84 E0             1991                                             movx    a,@dptr
0B85 F508           1992                                             mov             r8,a
0B87 A3             1993                                             inc             dptr
0B88 E0             1994                                     movx    a,@dptr
0B89 F509           1995                                             mov             r9,a
0B8B A3             1996                                             inc             dptr
0B8C E0             1997                                     movx    a,@dptr
0B8D F50A           1998                                             mov             r10,a
0B8F A3             1999                                             inc             dptr
0B90 E0             2000                                             movx    a,@dptr
0B91 F50B           2001                                             mov             r11,a
0B93 120166         2002                                             call            fladd           ;СБ+СБ1
0B96 78CF           2003     intmul2:        mov                     r0,#chbuf
0B98 120000   F     2004                                     call            saver2          ;*2
                    2005                                     
0B9B 8035           2006                                     jmp             gocikle
                    2007     
0B9D B6030B         2008     nott2:                  cjne    @r0,#3,nott3
0BA0 900000   F     2009                                                     mov                     dptr,#ch_2       
0BA3 120000   F     2010                                                     call            ldc_ltemp
0BA6 120203         2011                                                     call            flmul
0BA9 80EB           2012                                                     jmp                     intmul2            
                                                  ;*2
                    2013     
                    2014     
0BAB B60414         2015     nott3:          cjne    @r0,#4,nott4
0BAE 900000   F     2016                                             mov                     dptr,#ch_10      
0BB1 120000   F     2017                                             call            ldc_ltemp       ;/10*4
0BB4 1202B7         2018                                             call            fldiv
0BB7 900000   F     2019                                             mov                     dptr,#ch_4       
0BBA 120000   F     2020                                             call            ldc_ltemp
0BBD 120203         2021                                             call            flmul
0BC0 80D4           2022                                             jmp             intmul2
                    2023     
0BC2 B6050B         2024     nott4:          cjne    @r0,#5,nott5
0BC5 900000   F     2025                                                     mov                     dptr,#ch_2       
0BC8 120000   F     2026                                             call            ldc_ltemp;*2
0BCB 120203         2027                                             call            flmul
0BCE 80C6           2028                                             jmp             intmul2;T=5
0BD0                2029     nott5:  ;               mov                     dptr,#ch_1       
                    2030                                     ;       call            ldc_ltemp
                    2031                                     ;       call            flmul
0BD0 80C4           2032                                     jmp                     intmul2                            
                                  ;*1
                    2033     
                    2034     
0BD2 300708         2035     gocikle:        jnb             bitzus,nofz                     
0BD5 120000   F     2036                             call    z_05s    ;0,5c
0BD8 120000   F     2037                             call    z_05s    ;0,5c
0BDB C207           2038                             clr     bitzus;bitbuf бит задержки засылки us
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    33

0BDD 020000   F     2039     nofz:           jmp     labelA;rebyte
                    2040     
                    2041     
0BE0 80F0           2042     yestt5:         jmp             gocikle
                    2043     
0BE2 78CF           2044     nobuf0:                 mov             r0,#chbuf
0BE4 120000   F     2045                                                     call            resar2
0BE7 900000   F     2046                                                     mov                     dptr,#ch_1       
0BEA 120000   F     2047                                             call            ldc_ltemp
0BED 1201D1         2048                                             call            flsub
0BF0 78CF           2049                                             mov                     r0,#chbuf       
0BF2 120000   F     2050                                             call            saver2  
0BF5 80DB           2051                                             jmp             gocikle
                    2052     
                    2053     
0BF7 B60205         2054     not1in:                         cjne    @r0,#2,not2in
0BFA 7701           2055                                             mov             @r1,#1           ;T=2
0BFC 020000   F     2056                                             jmp     labelB
                    2057     
0BFF B60305         2058     not2in:                         cjne    @r0,#3,not3in
0C02 7701           2059                                             mov             @r1,#1;9                ;T=3
0C04 020000   F     2060                                             jmp     labelB
0C07 7703           2061     not3in:                         mov             @r1,#3;19
0C09 020000   F     2062                                             jmp     labelB
                    2063     
                    2064     
                    2065     ;;;;;;;;;;;3.11.06
                    2066     
                    2067     ;;коррекция 0
0C0C 7883           2068     KORnul:         mov             r0,#chdel
0C0E B60010         2069                             cjne    @r0,#0,nonuldel
                    2070                                     
0C11 E584           2071                             mov             a,p4                    ;сохр  us
0C13 F536           2072                             mov             saus,a
0C15 E585           2073                             mov             a,p5
0C17 F537           2074                             mov             saus+1,a
                    2075     
0C19 900000   F     2076                             mov             dptr,#kor0us
0C1C 120000   F     2077                             call    lospus          ;упр слово коррекции 0
0C1F 8018           2078                             jmp             chdelmo
                    2079     
0C21                2080     nonuldel:       ;cjne   @r0,#7,no4del
0C21 B6031B         2081                                                     cjne    @r0,#3,no4del
                    2082                             ;рез ->AN
0C24 7862           2083                             mov             r0,#rez_A;->r2..r5
0C26 120000   F     2084                             call    resar2
                    2085             
                    2086                                     ;;;;;;;;;;
0C29 120402         2087                             call    altof           ;r2..r5->float
0C2C 7884           2088                             mov             r0,#kor0_AN;->kor0_AN
0C2E 120000   F     2089                             call    saver2
                    2090                                     
0C31 E536           2091                             mov             a,saus                  ;восстан исходное упр слово
0C33 F584           2092                             mov             p4,a
0C35 E537           2093                             mov             a,saus+1
0C37 F585           2094                             mov             p5,a            
0C39 7883           2095     chdelmo:        mov             r0,#chdel
0C3B 06             2096                             inc             @r0             ;chdel+1
0C3C 020000   F     2097                             jmp              rebyte
                    2098     
0C3F                2099     no4del:         ;cjne   @r0,#14,chdelmo
0C3F B606F7         2100                                             cjne    @r0,#6,chdelmo
0C42 7600           2101                             mov             @r0,#0          ;chdel
0C44 7898           2102                             mov             r0,#chinkor
0C46 7600           2103                             mov             @r0,#00;1;00;02;600;
0C48 08             2104                             inc             r0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    34

0C49 76C8           2105                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0C4B 120000   F     2106                             call    clmassix;сбросить массив скольз среднего
0C4E                2107     bonpart:
0C4E 300A20         2108                             jnb                     bitbon,rebyter
0C51 78CF           2109                             mov                     r0,#chbuf
0C53 120000   F     2110                             call            resar2
0C56 799A           2111                             mov                     r1,#parT
0C58 B70211         2112                             cjne            @r1,#2,no6del
0C5B 900000   F     2113                             mov                     dptr,#ch_7;5
0C5E                2114     no5del:
0C5E 120000   F     2115                             call            ldc_ltemp
0C61 1201D1         2116                             call            flsub   
0C64 78CF           2117                             mov                     r0,#chbuf
0C66 120000   F     2118                             call            saver2
0C69 020000   F     2119                             jmp              rebyte
0C6C                2120     no6del:
0C6C 900000   F     2121                             mov                     dptr,#ch_1
0C6F 80ED           2122                             jmp                     no5del
                    2123     
                    2124     
0C71 020000   F     2125     rebyter:        jmp              rebyte
                    2126     
0C74 7981           2127     tekaout:        mov             r1,#chavt
0C76 770C           2128                                             mov             @r1,#0ch;6;1;
0C78 09             2129                                             inc             r1
0C79 7780           2130                                             mov             @r1,#80h;40h;
0C7B 020000   F     2131                                             jmp             noavk
                    2132     
                    2133     
                    2134     ;автокалибровка
0C7E 200AF3         2135     autoka:  jb             bitbon,tekaout;rebyter
0C81                2136     nulavt:  ;;;;;
0C81 7883           2137                             mov             r0,#chdel
0C83 B60016         2138                             cjne    @r0,#0,nndelch
0C86 E584           2139                             mov             a,p4                    ;сохр  us
0C88 F536           2140                             mov             saus,a
0C8A E585           2141                             mov             a,p5
0C8C F537           2142                             mov             saus+1,a
                    2143     
0C8E E585           2144                             mov   a,p5
0C90 4404           2145                             orl             a,#04              ;p5.2=1
0C92 00             2146                             nop
0C93 00             2147                             nop
0C94 543F           2148                             anl             a,#3fh          ;p5.6,p5.7=0
0C96 F585           2149                             mov   p5,a
0C98 06             2150                             inc             @r0
0C99 020000   F     2151                             jmp              rebyte
                    2152     
0C9C B6033D         2153     nndelch:        cjne    @r0,#3,n4delch
                    2154                             ;pez->A+
                    2155                             ;K+=000/(A+-AN)
                    2156                             ;mov            r0,#rez_A;->r2..r5
                    2157                             ;call   resar2
0C9F E577           2158                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CA1 FA             2159                                     mov             r2,a
0CA2 E578           2160                                     mov             a,reacp+1
0CA4 FB             2161                                     mov             r3,a
0CA5 E579           2162                                     mov             a,reacp+2
0CA7 FC             2163                                     mov             r4,a
0CA8 E57A           2164                                     mov             a,reacp+3
0CAA FD             2165                                     mov             r5,a
                    2166                                     ;;;;;;;;;;;;;;;
0CAB 120402         2167                             call    altof                   ;r2..r5->float
0CAE 7888           2168                             mov             r0,#rezAp;->rezAp
0CB0 120000   F     2169                             call    saver2                          
0CB3 7884           2170                             mov             r0,#kor0_AN;kor0_AN->r8..r11
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    35

0CB5 120000   F     2171                             call    resar8                          
0CB8 1201D1         2172                             call    flsub           ; r2..r5(A+-AN)
0CBB 120000   F     2173                             call    move28     ;r2..r5->r8..r11
0CBE 900000   F     2174                             mov             dptr,#CH2tho;000->r2..r5 float
0CC1 120000   F     2175                             call    ldc_long                
0CC4 1202B7         2176                             call    fldiv
0CC7 EA             2177                             mov             a,r2
0CC8 547F           2178                             anl             a,#7fh
0CCA FA             2179                             mov             r2,a
0CCB 7890           2180                             mov             r0,#koefKp;->koefKp
0CCD 120000   F     2181                             call    saver2
                    2182                       
                    2183                     ;       anl             P5,#0feh                ;p5.0=0 
0CD0 E585           2184                     mov             a,P5
0CD2 543B           2185                             anl             a,#3bh;acp-
0CD4 F585           2186                             mov             P5,a
0CD6 7883           2187                             mov             r0,#chdel
0CD8 06             2188                             inc             @r0                       ;ch+1
0CD9 020000   F     2189                             jmp             rebyte
                    2190     
0CDC B6063F         2191     n4delch:        cjne    @r0,#6,n8delch
                    2192                             ; pez->A-
                    2193                             ;K-=000/(A--AN)
                    2194                     ;       mov     r0,#rez_A;->r2..r5
                    2195                     ;       call    resar2
0CDF E577           2196                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0CE1 FA             2197                                     mov             r2,a
0CE2 E578           2198                                     mov             a,reacp+1
0CE4 FB             2199                                     mov             r3,a
0CE5 E579           2200                                     mov             a,reacp+2
0CE7 FC             2201                                     mov             r4,a
0CE8 E57A           2202                                     mov             a,reacp+3
0CEA FD             2203                                     mov             r5,a
                    2204                                     ;;;;;;;;;;;;;;;
0CEB 120402         2205                             call    altof                   ;r2..r5->float
0CEE 788C           2206                             mov             r0,#rezAm;->rezAm
0CF0 120000   F     2207                             call    saver2                          
0CF3 7884           2208                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0CF5 120000   F     2209                             call    resar8                          
0CF8 1201D1         2210                             call    flsub                   ; r2..r5(A--AN)
0CFB 120000   F     2211                             call    move28                  ;r2..r5->r8..r11
0CFE 900000   F     2212                             mov             dptr,#CH2tho    ;000->r2..r5 float
0D01 120000   F     2213                             call    ldc_long                
0D04 1202B7         2214                             call    fldiv
0D07 EA             2215                             mov             a,r2
0D08 547F           2216                             anl             a,#7fh
0D0A FA             2217                             mov             r2,a
0D0B 7894           2218                             mov             r0,#koefKm;->koefKm
0D0D 120000   F     2219                             call    saver2
                    2220                        
0D10 E536           2221                             mov             a,saus                  ;восстан исходное упр слово
0D12 F584           2222                             mov             p4,a
0D14 E537           2223                             mov             a,saus+1
0D16 F585           2224                             mov             p5,a            
0D18 7883           2225                             mov             r0,#chdel
0D1A 06             2226                             inc             @r0                       ;ch+1
0D1B 020000   F     2227                        jmp    rebyte
                    2228     
0D1E B6090F         2229     n8delch:        cjne    @r0,#9,n12delch
0D21 7600           2230                             mov             @r0,#0
0D23 7981           2231                             mov             r1,#chavt
0D25 770C           2232                             mov             @r1,#0ch;6;1;
0D27 09             2233                             inc             r1
0D28 7780           2234                             mov             @r1,#80h;40h;
0D2A 120000   F     2235                             call   clmassix     ;сбросить массив среднего
0D2D 020000   F     2236                             jmp             rebyte; bonpart;
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    36

0D30 06             2237     n12delch:       inc             @r0
0D31 020000   F     2238                             jmp             rebyte
                    2239     
                    2240     
                    2241     
                    2242                                 
0D34 020000   F     2243     rout6:          jmp             out6
0D37 020000   F     2244     rlabelF:        jmp             labelF  
0D3A 020000   F     2245     rknrazr:        jmp             knrazr  
0D3D 020000   F     2246     rknopt:         jmp             knopt
0D40 020000   F     2247     rizman:         jmp             izman
                    2248             
0D43 020000   F     2249     no0chkl:        jmp             kkout6
0D46 75AD00         2250                                                     mov             P3IF,#00;               обя
                             зательно сбросить опять приходит на обработку прерывания
0D49 75B0C0         2251                                             mov             P3,#0c0h
0D4C 32             2252                                             reti
0D4D                2253     keyb1:  ;IE6
                    2254     ;;;;;
                    2255                     ;       mov                     a,chkl+1                ;low
                    2256                     ;       jnz                     no0chkl
                    2257                     ;       mov                     a,chkl                          ;high
                    2258                     ;       jnz                     no0chkl
                    2259     ;;;;;
0D4D 75E700         2260                                     mov             EIE2,#00H
0D50 75AD00         2261                                     mov             P3IF,#00
                    2262                                     
0D53 C0E0           2263                                     push    acc
0D55 C0D0           2264                                     push    psw
0D57 C000           2265                                     push    rr0
0D59 C001           2266                                     push    rr1
0D5B C002           2267                                     push    rr2
0D5D C003           2268                                     push    rr3
0D5F C004           2269                                     push    rr4
0D61 C005           2270                                     push    rr5
0D63 C006           2271                                     push    rr6
0D65 C007           2272                                     push    rr7
0D67 C082           2273                                     push    dpl
0D69 C083           2274                                     push    dph
                    2275                                     ;clr            bitmig
                    2276                       ;;;;;;;;;;;;;;
0D6B 120000   F     2277                                     call    z_01s;0,1s
0D6E 120000   F     2278                                             call    z_01s
                    2279                                     ;восстан знакоместо при мигании
                    2280                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0D71 78B2           2281                                     mov             r0,#marker
0D73 7440           2282                                     mov             a,#bufind
0D75 26             2283                                     add             a,@r0                   ;a=bufind+marker
0D76 F9             2284                                     mov             r1,a
0D77 A73C           2285                                     mov             @r1,savba
                    2286                                     ;;;;;;;;;;;
0D79 E5B0           2287                             mov             a,p3
0D7B 20E644         2288                                     jb              acc.6,outviR;выход из режима выч R
0D7E E5B0           2289     gout6:                          mov             a,p3
0D80 44FF           2290                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0D82 F5B0           2291                                     mov             p3,a
0D84 E5B0           2292                                     mov             a,p3
0D86 30E6AB         2293                                     jnb             acc.6,rout6             ;error
0D89 3004AB         2294                                     jnb             bitizm,rlabelF
0D8C 75B0FE         2295                                     mov             p3,#0feh                ;реж IZM
0D8F E5B0           2296                                     mov             a,p3
0D91 30E6AC         2297                                     jnb             acc.6,rizman
                    2298                                     ;;;;;;
0D94 201232         2299                                     jb              bitklb,goklb
0D97 75B0FD         2300                                     mov             p3,#0fdh
0D9A E5B0           2301                                     mov             a,p3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    37

0D9C 30E69B         2302                                     jnb             acc.6,rknrazr             ;labelC
0D9F 75B0FB         2303                                     mov             p3,#0fbh
0DA2 E5B0           2304                                     mov             a,p3
0DA4 30E656         2305                                     jnb             acc.6,knright           ;->
0DA7 75B0F7         2306                                     mov             p3,#0f7h
0DAA E5B0           2307                                     mov             a,p3
0DAC 30E68E         2308                                     jnb             acc.6,rknopt                    ;T
0DAF 75B0EF         2309                                     mov             p3,#0efh
0DB2 E5B0           2310                                mov          a,p3
0DB4 30E615         2311                                     jnb             acc.6,pyskst                    ;pysk/stop
0DB7 75B0DF         2312                                     mov             p3,#0dfh
0DBA E5B0           2313                                     mov             a,p3
0DBC 30E65F         2314                                jnb          acc.6,knvich
0DBF 020000   F     2315                                     jmp             izmpaT
                    2316     
0DC2 3006B9         2317     outviR: jnb             bitvi11,gout6   
0DC5 C214           2318                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0DC7 C206           2319                                     clr             bitvi11
                    2320                                     
0DC9 020000   F     2321     goklb:          jmp             out6
                    2322     
0DCC 200A12         2323     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0DCF D20A           2324                                     setb    bitbon  ;уст реж буфер вкл
0DD1 79D5           2325                                     mov                     r1,#volume;work         ;обьем блок
                             а
0DD3 7700           2326                                     mov                     @r1,#00
0DD5 09             2327                                     inc                     r1
0DD6 77C7           2328                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0DD8 434B02         2329                                     orl             bufind+11,#02h; on pysk
0DDB 120000   F     2330                                     call            ind
0DDE 020000   F     2331                                     jmp             izmpaT
0DE1 C20A           2332     bufon:                  clr             bitbon  ;уст реж буфер выкл
0DE3 534BFD         2333                                             anl             bufind+11,#0fdh; off pysk
0DE6 120000   F     2334                                             call    ind
0DE9 020000   F     2335                                     jmp             izmpaT
                    2336     
0DEC 79B0           2337     tizmri:                 mov             r1,#level
0DEE B70102         2338                                     cjne    @r1,#1,right2
                    2339                                     ;10s->HET
0DF1 8004           2340                                     jmp             right3
                    2341     
0DF3 07             2342     right2:                 inc             @r1
0DF4 120000   F     2343                                     call    lolevT
                    2344                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0DF7 120000   F     2345     right3:                 call    ind
0DFA 020000   F     2346                                     jmp             izmfun
                    2347     
                    2348                             
                    2349                             
0DFD                2350     knright:        
                    2351     
0DFD 79AE           2352                                     mov             r1,#diap
                    2353                             ;перекл диапазон 1 поз вверх сбр массив
0DFF 17             2354                                     dec             @r1
0E00 B7FF04         2355                                     cjne    @r1,#0ffh,diinc
0E03 7700           2356                                     mov             @r1,#0
0E05 807A           2357                                     jmp  izmfun
0E07 120000   F     2358     diinc:                  call     clmassix
0E0A 78B3           2359                                     mov             r0,#summa
0E0C 120000   F     2360                                     call    clear4
0E0F 786A           2361                                     mov             r0,#rez_A0
0E11 120000   F     2362                                     call    clear4
0E14 C20F           2363                                     clr             bitnul          ;гасить светодиод НУЛЬ  
0E16 120000   F     2364                                     call    loadUS
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    38

0E19 8066           2365                                      jmp  izmfun
                    2366     
0E1B 020000   F     2367     vit2_10:                jmp             out6
0E1E                2368     knvich:                 ;12.02.07
0E1E 789A           2369                                             mov                     r0,#parT
0E20 C3             2370                                             clr                     c
0E21 7404           2371                                             mov                     a,#4 
0E23 96             2372                                             subb            a,@r0
0E24 40F5           2373                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0E26 2015F2         2374                                             jb                      biteizm,vit2_10;не нажимать
                              кнопку ВЫЧ во время теста
0E29 200613         2375                               jb            bitvi11,onvich
0E2C C204           2376                                     clr             bitizm
0E2E D214           2377                                     setb    bitvich
                    2378                                     
0E30 78B1           2379                                     mov             r0,#vichR
0E32 7611           2380                                     mov             @r0,#11h;;????????or 0
                    2381                                     ;ВЫЧИСЛИТЬ
0E34 900000   F     2382                                     mov     dptr,#teVICH
0E37 120000   F     2383                                     call    lotext
0E3A 120000   F     2384                                call         z_1s;;;;;;;
0E3D 8073           2385                                     jmp              viout;izmpaT
                    2386     
0E3F C214           2387     onvich:                 clr             bitvich
                    2388                                                     ;;;;;;;;28.02
0E41 C206           2389                                                     clr             bitvi11
0E43 D204           2390                                                     setb            bitizm
                    2391                                                     ;;;;;;;;;
0E45 78B1           2392                                     mov             r0,#vichR
0E47 7600           2393                                     mov             @r0,#0
0E49 803A           2394                                     jmp              izmpaT
                    2395     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0E4B 301820         2396     louizm:            jnb          knizm,lou
0E4E 79AE           2397                                     mov             r1,#diap
0E50 C3             2398                                     clr             c
0E51 7403           2399                                     mov             a,#3
0E53 97             2400                                     subb    a,@r1
0E54 5006           2401                                     jnc             lldi23    ;10-2..10-5
                    2402                                     ;10-6..10-11
0E56 E584           2403                                     mov             a,p4
0E58 54F7           2404                                     anl             a,#0f7h   ;d3
0E5A F584           2405                                     mov             p4,a
0E5C E7             2406     lldi23:                 mov             a,@r1
0E5D 6403           2407                                     xrl             a,#3
0E5F 7002           2408                                     jnz             lldi3
0E61 8005           2409                                     jmp             lldi2   ;10-5
0E63 E7             2410     lldi3:                  mov             a,@r1
0E64 6402           2411                                     xrl             a,#2            ;
0E66 7006           2412                                     jnz             lou             
0E68 E585           2413     lldi2:                  mov             a,p5            ;10-4
0E6A 4408           2414                                     orl             a,#08
0E6C F585           2415                                     mov             p5,a
0E6E 22             2416     lou:                    ret
                    2417                               ;;;;;;
0E6F 201511         2418     izman:  jb              biteizm,ontest  
0E72 201807         2419                                     jb              knizm,knizmon
0E75 D218           2420                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2421                             ;       d3(k5 p4),d3(u5 p5)заслать us
0E77 120000   F     2422                                     call    louizm 
0E7A 8005           2423                                     jmp             izmfun
0E7C C218           2424     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0E7E 120000   F     2425                                     call    loadUS;восстановить us
0E81                2426     izmfun:                 
0E81 D207           2427                                     setb    bitzus;bitbuf
0E83 8000           2428     ontest: jmp             labelE;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    39

                    2429                                     ;;;;;;;;;;;;;;
0E85                2430     izmpaT:
                    2431     ;;;;;;;;;;;;;;;;;
                    2432                     ;       clr             c 
                    2433                     ;       mov             r1,#parN
                    2434     
                    2435                     ;       mov             r0,#diap
                    2436                     ;       mov             a,#6            
                    2437                     ;       subb    a,@r0
                    2438                     ;       jnc             labelE          ;         ;10-2..10-8
                    2439                               
                    2440                     ;       mov             @r1,#2          ;10-9..10-11            
                    2441                     ;       jmp             labelE
                    2442     
                    2443     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0E85 789A           2444     labelE:                 mov             r0,#parT
0E87 793D           2445                                     mov             r1,#chkl
0E89 B60108         2446                                     cjne    @r0,#1,izmt2
0E8C 7700           2447                                     mov             @r1,#0
0E8E 09             2448                                     inc             r1
0E8F 7702           2449                                     mov             @r1,#2
0E91 020000   F     2450                                     jmp             out6
0E94 B60208         2451     izmt2:                  cjne    @r0,#2,izmt3
0E97 7700           2452                                     mov             @r1,#0
0E99 09             2453                                     inc             r1
0E9A 770A           2454                                     mov             @r1,#10;20
0E9C 020000   F     2455                                     jmp             out6
                    2456     
0E9F 7700           2457     izmt3:                  mov             @r1,#0
0EA1 09             2458                                     inc             r1
0EA2 7714           2459                                     mov             @r1,#20;0
0EA4 020000   F     2460                                     jmp             out6
                    2461     
                    2462     
                    2463     
                    2464     
0EA7                2465     knopt: ;кнопка T
0EA7 C204           2466                                clr          bitizm
0EA9 D210           2467                                setb         bitt2
0EAB 79B7           2468                                mov          r1,#load
0EAD 7704           2469                                mov          @r1,#4;1s
0EAF 120000   F     2470                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2471                     
0EB2 793D           2472     viout:          mov             r1,#chkl
0EB4 7703           2473                             mov             @r1,#03
0EB6 09             2474                             inc             r1
0EB7 77E8           2475                             mov             @r1,#0e8h               ;1000
0EB9 020000   F     2476                             jmp             out6
                    2477     
0EBC                2478     knrazr:          
0EBC C3             2479     labelC:          clr            c
0EBD 78AF           2480                             mov             r0,#parN
0EBF 799A           2481                             mov             r1,#parT
0EC1 7402           2482                             mov             a,#2
0EC3 97             2483                             subb    a,@r1
0EC4 40BF           2484                             jc              labelE          ;T>2
0EC6 B60104         2485                             cjne    @r0,#1,noN1c
0EC9 7602           2486                             mov             @r0,#2          ;N=2
0ECB 80B8           2487                             jmp             labelE
                    2488     
0ECD B60204         2489     noN1c:          cjne    @r0,#2,not_1
0ED0 7603           2490                             mov             @r0,#3          ;N=3      ;10-2..10-8
0ED2 80B1           2491                             jmp             labelE
                    2492     
0ED4                2493     not_10: 
0ED4 7601           2494     not_1:          mov             @r0,#1                          ;N=1
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    40

0ED6 80AD           2495                             jmp     labelE
                    2496     
0ED8 020000   F     2497     rtizmri:        jmp             tizmri
                    2498     
0EDB 75B0F7         2499     ttout:          mov             p3,#0f7h
0EDE 20B6D1         2500                                             jb              p3.6,viout
0EE1 D204           2501                                             setb    bitizm;отжатие кнопки t
0EE3 C210           2502                                             clr             bitt2
0EE5 809E           2503                                             jmp             labelE
0EE7                2504     labelf:                 
0EE7 301035         2505                             jnb             bitt2,nofizm
0EEA 75B0FB         2506                        mov          p3,#0fbh
0EED E5B0           2507                        mov          a,p3
0EEF 20E6E9         2508                        jb           acc.6,ttout;outF
0EF2 79B7           2509                        mov          r1,#load;parT
0EF4 B70502         2510                        cjne         @r1,#5,noft1
                    2511                        ;t=10s
0EF7 80B9           2512                        jmp          viout;out6;ft1izm
                    2513     
0EF9 07             2514     noft1:     inc          @r1;dec         @r1
0EFA 120000   F     2515     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2516                             ;call   ind
0EFD 80B3           2517                     jmp             viout;out6;??????????????/
                    2518     
                    2519                             ;увеличить счетчик задержки клавиатуры
0EFF 783D           2520     outF:           mov             r0,#chkl
0F01 7627           2521                             mov             @r0,#27h
0F03 08             2522                             inc             r0
0F04 7610           2523                             mov             @r0,#10h
0F06 020000   F     2524                             jmp             out6;out7
                    2525     
0F09 020000   F     2526     noviR1:         jmp             noviR
0F0C 78B1           2527     outvich:        mov                     r0,#vichR
0F0E 7600           2528                                             mov                     @r0,#0
0F10 C214           2529                                             clr                     bitvich
0F12 C206           2530                                             clr                     bitvi11
0F14 C211           2531                                             clr                     bitmenu
0F16 D204           2532                                             setb            bitizm
0F18 78B2           2533                                             mov                     r0,#marker
0F1A 76FF           2534                                             mov                     @r0,#0ffh
0F1C 020000   F     2535                                             jmp                     labelE;out6     
                    2536     
0F1F 3014E7         2537     nofizm:         jnb             bitvich,noviR1
0F22 75B0DF         2538                                                     mov             p3,#0dfh
0F25 30B6E4         2539                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0F28 78B1           2540                             mov             r0,#vichR
0F2A B61111         2541                             cjne    @r0,#11h,no11v6
0F2D 75B0FB         2542                             mov                     p3,#0fbh;->
0F30 20B61C         2543                             jb                      p3.6,rviout;outF
0F33 7612           2544                             mov             @r0,#12h                ;11= вычислить
0F35 900000   F     2545     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0F38 120000   F     2546                             call    lotext
0F3B 020000   F     2547                             jmp             viout;outF
                    2548             
0F3E B61211         2549     no11v6:         cjne    @r0,#12h,no12v6
0F41 75B0FB         2550                             mov             p3,#0fbh;->
0F44 20B608         2551                             jb              p3.6,rviout;outF
0F47 7611           2552                             mov             @r0,#11h;13h
0F49 900000   F     2553                             mov             dptr,#teVICH;teOUT
0F4C 120000   F     2554                             call    lotext
0F4F                2555     rviout:
0F4F 020000   F     2556                             jmp             viout;outF
                    2557                     
0F52 B61311         2558     no12v6:         cjne    @r0,#13h,no13v6
0F55 75B0FB         2559                                                     mov             p3,#0fbh;->
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    41

0F58 20B6F4         2560                             jb              p3.6,rviout;outF
0F5B 7611           2561                             mov             @r0,#11h
0F5D 900000   F     2562                             mov             dptr,#teVICH
0F60 120000   F     2563                             call    lotext
0F63 020000   F     2564                             jmp             viout;outF
                    2565     
                    2566     ;кн -> A= 0000
                    2567     ;кн -> B= +00000
0F66 75B0FB         2568     no13v6:         mov             p3,#0fbh
0F69 E5B0           2569                             mov             a,p3
0F6B 20E635         2570                             jb              acc.6,chanZ
0F6E E53B           2571                             mov             a,movrig
0F70 B40714         2572                             cjne    a,#7,kon_B      
0F73 78B2           2573                             mov             r0,#marker      ;A= 0000
0F75 B60716         2574                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0F78 E53A           2575     rikn:           mov             a,movleft
0F7A F6             2576                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2577     ;                               29.12.06
                    2578     ;;;;;;;;;;;;;;;;;;
                    2579     ;необходимо не портить цифру в следуюем справа знакоместе
                    2580     ;т е сохранить ее в ячейке для мигания в противном случае
                    2581     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2582     ;       знакоместа
0F7B 78B2           2583                                     mov             r0,#marker
0F7D 7440           2584                                     mov             a,#bufind
0F7F 26             2585                                             add             a,@r0                   ;a=bufind+m
                             arker
0F80 F9             2586                                             mov             r1,a
0F81 09             2587                                             inc             r1
0F82 873C           2588                                             mov             savba,@r1
0F84 020000   F     2589                                             jmp             viout;outF
                    2590     
0F87 78B2           2591     kon_B:          mov             r0,#marker      ;B= +00000
0F89 B60802         2592                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0F8C 80EA           2593                                             jmp             rikn
0F8E                2594     mark0_8:
                    2595     ;                               29.12.06
                    2596     ;;;;;;;;;;;;;;;;;;
                    2597     ;необходимо не портить цифру в следуюем справа знакоместе
                    2598     ;т е сохранить ее в ячейке для мигания в противном случае
                    2599     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2600     ;       знакоместа ->B=+00000
0F8E 78B2           2601                                             mov             r0,#marker
0F90 7440           2602                                     mov             a,#bufind
0F92 26             2603                                             add             a,@r0                   ;a=bufind+m
                             arker
0F93 F9             2604                                             mov             r1,a
0F94 09             2605                                             inc             r1
0F95 873C           2606                                             mov             savba,@r1
0F97 78B2           2607                             mov             r0,#marker
0F99 06             2608                             inc             @r0             ;       сдвинуть курсор вправо на 1
0F9A C219           2609                             clr             bitmig
0F9C B60901         2610                             cjne    @r0,#9,outma
0F9F 18             2611                             dec             r0;ppp
0FA0 020000   F     2612     outma:          jmp             viout;outF
                    2613     
0FA3 75B0FE         2614     chanZ:          mov             p3,#0feh
0FA6 E5B0           2615                             mov             a,p3
0FA8 20E611         2616                             jb              acc.6,chanma
                    2617                             ;изм знак в старшем разряде на противоположн
0FAB E543           2618                             mov             a,bufind+3
0FAD B42B06         2619                             cjne            a,#2bh,noplus
0FB0 75432D         2620                             mov                     bufind+3,#2dh           ;+->-   
0FB3 020000   F     2621                             jmp                     viout;outF
0FB6                2622     noplus:
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    42

0FB6 75432B         2623                             mov                     bufind+3,#2bh           ;-/+-
0FB9 020000   F     2624                             jmp                     viout;outF
0FBC 75B0FD         2625     chanma:         mov             p3,#0fdh
0FBF E5B0           2626                             mov             a,p3
0FC1 20E603         2627                             jb              acc.6,outFl;labelL1
                    2628                             ;clr            bitmig
0FC4 120000   F     2629     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2630     
0FC7 793D           2631     outFl:                          mov             r1,#chkl
0FC9 7701           2632                             mov             @r1,#01
0FCB 09             2633                             inc             r1
0FCC 77F4           2634                             mov             @r1,#0f4h               ;1000
0FCE 020000   F     2635                             jmp             out6
                    2636                     
                    2637     
                    2638     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2639     
                    2640     
                    2641     
0FD1 020000   F     2642     rlabelL:        jmp                     labelL
0FD4 020000   F     2643     rfindmem:               jmp             findmem
0FD7 3011FA         2644     noviR:          jnb                     bitmenu,rfindmem;17.01.07
                    2645     ;;;;;;;;;;;;;
0FDA 78B1           2646                                             mov                     r0,#vichR
0FDC 7415           2647                                             mov                     a,#15h
0FDE C3             2648                                             clr                     c
0FDF 96             2649                                             subb            a,@r0
0FE0 4016           2650                                             jc                      ri21_23
                    2651     
0FE2 75B0FB         2652                                             mov             p3,#0fbh; реж кн меню ->
0FE5 20B60A         2653                                             jb              p3.6,ri6
0FE8 78B1           2654                                             mov             r0,#vichR
0FEA B61508         2655                                             cjne    @r0,#15h,norime
0FED 7611           2656                                             mov             @r0,#11h
0FEF 120000   F     2657     norime1:        call            lomenu
0FF2 020000   F     2658     ri6:                    jmp                     viout;out6
0FF5 06             2659     norime:         inc             @r0
0FF6 80F7           2660                                             jmp             norime1
                    2661             
0FF8 7423           2662     ri21_23:        mov                     a,#23h          ;->
0FFA C3             2663                                             clr                     c
0FFB 96             2664                                             subb            a,@r0
0FFC 4014           2665                                             jc                      ri_31
0FFE 75B0FB         2666                                             mov                     p3,#0fbh
1001 20B6EE         2667                                             jb                      p3.6,ri6
1004 B62308         2668                                             cjne            @r0,#23h,no23ri
1007 7621           2669                                             mov                     @r0,#21h
1009 120000   F     2670                                             call            lomenu
100C 020000   F     2671                                             jmp                     viout;out6
100F 06             2672     no23ri:         inc                     @r0
1010 80DD           2673                                             jmp                     norime1
1012 B6312B         2674     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
                    2675     
                    2676     ;;
1015 75B0FB         2677                                             mov                     p3,#0fbh
1018 20B6D7         2678                                             jb                      p3.6,ri6
                    2679     ;;
101B 301311         2680                                             jnb                     bitv19,gosk19
101E 900000   F     2681                                             mov                     dptr,#teS57_6;57,6
1021 120000   F     2682                                             call            lotext
1024 534B03         2683                                             anl                     bufind+11,#03h
1027 434B80         2684                                             orl                     bufind+11,#80h
102A C213           2685                                             clr                     bitv19
102C 020000   F     2686                                             jmp                     viout;out6
102F 900000   F     2687     gosk19:         mov                     dptr,#teS19_2
1032 120000   F     2688                                             call            lotext
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    43

1035 534B03         2689                                             anl                     bufind+11,#03h
1038 434B80         2690                                             orl                     bufind+11,#80h
103B D213           2691                                             setb            bitv19
103D 020000   F     2692                                             jmp                     viout;out6
                    2693     
                    2694     
                    2695     
                    2696     ;labelS2:       jmp                     out6
                    2697     
1040 7452           2698     no31ri:         mov                     a,#52h;42h              ;->
1042 C3             2699                                             clr                     c
1043 96             2700                                             subb            a,@r0
1044 40AC           2701                                             jc                      ri6
1046 75B0FB         2702                                             mov                     p3,#0fbh                   
                                  ;41,42
1049 30B609         2703                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
104C 75B0FD         2704                                             mov                     p3,#0fdh
104F 20B6A0         2705                                             jb                      p3.6,ri6
1052 020000   F     2706                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
1055 020000   F     2707     rlabelN:                jmp             labelN
1058 020000   F     2708     moutF:          jmp             viout;outF
                    2709     ;;;;;;;;;;;;;;;;;;;;;;;;;
105B 020000   F     2710     rnnmemb:        jmp             nnmemb
                    2711     
105E                2712     nbimenu:
105E 300BFA         2713     findmem:        jnb             bitmem,rnnmemb
1061 79B0           2714                                             mov             r1,#level                          
                                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
1063 B71113         2715                                     cjne            @r1,#11h,nomem11
                    2716                                             
1066 75B0FB         2717                        mov          p3,#0fbh
1069 E5B0           2718                        mov          a,p3
106B 20E6EA         2719                        jb           acc.6,moutF
106E 7712           2720                        mov          @r1,#12h
1070 900000   F     2721                        mov          dptr,#teWR      ;                       ЗАПИСЬ
1073 120000   F     2722                        call         lotext
1076 020000   F     2723                        jmp          viout;outF
                    2724     
1079 B71213         2725     nomem11:   cjne         @r1,#12h,nomem12
107C 75B0FB         2726                             mov             p3,#0fbh
107F E5B0           2727                        mov          a,p3
1081 20E6D4         2728                        jb           acc.6,moutF
1084 7713           2729                        mov          @r1,#13h
1086 900000   F     2730                        mov          dptr,#teLIST            ;ПРОСМОТР
1089 120000   F     2731                        call         lotext
108C 020000   F     2732                        jmp          viout;outF
108F B71313         2733     nomem12:         cjne           @r1,#13h,nomem13
1092 75B0FB         2734                                             mov             p3,#0fbh
1095 E5B0           2735                        mov          a,p3
1097 20E6BE         2736                        jb           acc.6,moutF
109A 7714           2737                        mov          @r1,#14h
109C 900000   F     2738                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
109F 120000   F     2739                        call         lotext
10A2 020000   F     2740                          jmp                viout;outF
                    2741                             
10A5 B71413         2742     nomem13:cjne            @r1,#14h,labelL
10A8 75B0FB         2743                             mov             p3,#0fbh
10AB E5B0           2744                        mov          a,p3
10AD 20E6A8         2745                        jb           acc.6,moutF
10B0 7711           2746                        mov          @r1,#11h
10B2 900000   F     2747                        mov          dptr,#teCLE                     ;ОЧИСТКА
10B5 120000   F     2748                        call         lotext
10B8 020000   F     2749                          jmp                viout;outF
10BB                2750     labelL: 
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    44

                    2751                             ;;;;;
10BB 75B0DF         2752                                             mov                     p3,#0dfh
10BE 30B697         2753                                     jnb                     p3.6,moutF;в реж очистка полная не 
                             отрабатывать ВЫЧ R
                    2754                     
                    2755                             ;;;;;
                    2756                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
10C1 78B0           2757                                     mov                     r0,#level
10C3 B6210E         2758                                     cjne            @r0,#21h,nobl21
10C6 7622           2759                                     mov                     @r0,#22h                ;->БЛОК 
10C8 900000   F     2760                                     mov                     dptr,#teBL
10CB 120000   F     2761     me21_22:call            lotext
                    2762                             
10CE 120000   F     2763                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
10D1 020000   F     2764                                     jmp                     viout;outF
                    2765     
10D4 B62207         2766     nobl21: cjne            @r0,#22h,nobl22
10D7 900000   F     2767                                     mov                     dptr,#teFULL
10DA 7621           2768                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2769     
10DC 80ED           2770                                     jmp                     me21_22
                    2771     
                    2772     ;labl21:           cjne @r0,#21h,nolev1
                    2773     ;                       mov             p3,#0fbh
                    2774     ;                       mov             a,p3
                    2775     ;                       jb              acc.6,loutF
                    2776     ;                       cjne    @r0,#21h,labl22
                    2777     ;                       mov             @r0,#22h
                    2778                             ;БЛОК
                    2779     ;                       call    lotext
                    2780     ;                       jmp             outF
                    2781     ;labl22:                mov             @r0,#21h
                    2782                             ;ПОЛНАЯ
                    2783     ;                       call    lotext
                    2784     ;                       jmp             outF
                    2785                      
10DE B62325         2786     nobl22:         cjne    @r0,#23h,go31l
10E1 75B0FB         2787     rigblo:         mov             p3,#0fbh
10E4 20B629         2788                                             jb              p3.6,llev2
10E7                2789     labL2:    ;  уст курсор в правую позицию 
                    2790                                     ;       кнопка                  ->
                    2791     ;;;;;;;;;;;;;;;;;;
                    2792     ;необходимо не портить цифру в следуюем справа знакоместе
                    2793     ;т е сохранить ее в ячейке для мигания в противном случае
                    2794     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2795     ;       знакоместа
10E7 78B2           2796                                             mov             r0,#marker
10E9 7440           2797                                     mov             a,#bufind
10EB 26             2798                                             add             a,@r0                   ;a=bufind+m
                             arker
10EC F9             2799                                             mov             r1,a
10ED 09             2800                                             inc             r1
10EE 873C           2801                                             mov             savba,@r1
10F0 C219           2802                                             clr             bitmig
                    2803     ;;;;;;;;;;;;;;;;
10F2 78B2           2804                       mov           r0,#marker      ;курсор справа  ?
10F4 E53B           2805                             mov             a,movrig
10F6 C3             2806                             clr             c
10F7 96             2807                             subb    a,@r0
10F8 6006           2808                             jz         equ1l
10FA E53B           2809                             mov             a,movrig;уст в правую позицию
10FC F6             2810                             mov             @r0,a
10FD 020000   F     2811                             jmp             viout;outF                                       
1100 E53A           2812     equ1l:          mov             a,movleft;уст в левую позицию
1102 F6             2813                             mov             @r0,a   
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    45

1103 020000   F     2814     loutF:  jmp             viout;outF
                    2815                     
                    2816     
1106 B63102         2817     go31l:          cjne    @r0,#31h,go41l
1109 80D6           2818                             jmp             rigblo
110B B6410B         2819     go41l:          cjne    @r0,#41h,norig2
110E 80D1           2820                             jmp             rigblo
                    2821     
1110 75B0FD         2822     llev2:          mov             p3,#0fdh
1113 20B6ED         2823                             jb              p3.6,loutF
1116 020000   F     2824                             jmp             labelL1
                    2825     
                    2826     ;->
1119 C3             2827     norig2:    clr          c               ;32,33,34,42
111A 7431           2828                             mov             a,#31h
111C 96             2829                             subb    a,@r0
111D 50E4           2830                             jnc             loutF
111F 75B0FB         2831     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1122 20B626         2832                             jb              p3.6,lev2go
1125                2833     labelN: 
                    2834                             ;                               29.12.06
                    2835     ;;;;;;;;;;;;;;;;;;
                    2836     ;необходимо не портить цифру в следуюем справа знакоместе
                    2837     ;т е сохранить ее в ячейке для мигания в противном случае
                    2838     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2839     ;       знакоместа
1125 78B2           2840                                             mov             r0,#marker
1127 7440           2841                                     mov             a,#bufind
1129 26             2842                                             add             a,@r0                   ;a=bufind+m
                             arker
112A F9             2843                                             mov             r1,a
112B 09             2844                                             inc             r1
112C 873C           2845                                             mov             savba,@r1
                    2846     ;;;;;;;;;;;;;;;;;;;
112E 78B2           2847                             mov             r0,#marker      ;курсор справа  ?
1130 E53B           2848                             mov             a,movrig
1132 C3             2849                             clr             c
1133 96             2850                             subb    a,@r0
1134 7006           2851                             jnz        noequ1
1136 E53A           2852                             mov             a,movleft;уст в крайнюю левую позицию
1138 F6             2853                             mov             @r0,a
1139 020000   F     2854                             jmp             viout;outF
113C                2855     noequ1: ;29.12.06
                    2856     ;;;;;;;;;;;;;;;;;;
                    2857                             ;восстан знакоместо при мигании
                    2858                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
113C 78B2           2859                                     mov             r0,#marker
113E 7440           2860                                     mov             a,#bufind
1140 26             2861                                     add             a,@r0                   ;a=bufind+marker
1141 F9             2862                                     mov             r1,a
                    2863                                     ;mov            @r1,savba
1142 09             2864                                     inc             r1
1143 873C           2865                                     mov             savba,@r1
                    2866     ;;;;;;;;;;;;;;;;        
1145 120000   F     2867                             call    marri;уст сдвиг в правую        позицию
1148 020000   F     2868                             jmp             viout;outF
114B 75B0FD         2869     lev2go:         mov             p3,#0fdh
114E 30B603         2870                             jnb             p3.6,rlabelL1
1151 020000   F     2871                             jmp             viout;outF
                    2872     
1154 020000   F     2873     rlabelL1:       jmp             labelL1
                    2874     
1157                2875     nnmemb:
                    2876                                     
                    2877     
                    2878     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    46

1157                2879     norim6:    ;kn menu
1157 D083           2880     out6:           pop             dph
1159 D082           2881                                     pop             dpl
115B D007           2882                                     pop             rr7     
115D D006           2883                                     pop             rr6
115F D005           2884                                     pop             rr5
1161 D004           2885                                     pop             rr4
1163 D003           2886                                     pop             rr3
1165 D002           2887                                     pop             rr2
1167 D001           2888                                     pop             rr1                             
1169 D000           2889                                     pop             rr0
116B D0D0           2890                                     pop             psw
116D D0E0           2891                                     pop             acc
                    2892     ;clr            bitmig
                    2893                               ; mov         EIE2,#30H
                    2894                              ;  mov         a,P3IF
                    2895                             ;       anl             a,#0bfh
                    2896                             ;       mov             P3IF,a
                    2897                             ;       mov             P3,#0c0h
                    2898                             ;;;;;;
116F                2899     kkout6:
116F 75AD00         2900                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1172 75B0C0         2901                             mov             P3,#0c0h
1175 C219           2902                             clr             bitmig
1177 E586           2903                                             mov             a,P6            ;p6.4=0
1179 54EF           2904                             anl             a,#0efh
117B F586           2905                             mov             P6,a
117D 00             2906                             nop
117E 00             2907                             nop
                    2908                                     
117F E586           2909                             mov             a,P6                    ;p6.4=1 
1181 4410           2910                             orl             a,#10h
1183 F586           2911                             mov             P6,a    
                    2912                             ;;;;;;;;;
1185 E5DA           2913                             mov             a,PCA0CPM0;     
1187 4446           2914                             orl             a,#46h;anl              a,#0fbh
1189 F5DA           2915                             mov             PCA0CPM0,a
                    2916     
118B 75CDD0         2917                             mov             TH2,#0d0h
118E 75CC00         2918                             mov             TL2,#00
                    2919     
1191 D2CA           2920                             setb            T2CON.2
1193 D2AD           2921                             setb            ET2;IE.5
                    2922                             ;;;;;;;;                    
1195 32             2923                             reti
                    2924     
                    2925     
1196 020000   F     2926     knKMP:             jmp          out7
1199 020000   F     2927     rout7:                  jmp             out7    
119C 020000   F     2928     rlabelH:                jmp             labelH
119F 020000   F     2929     rknNUL:         jmp             knNUL
11A2 020000   F     2930     rknleft:                jmp             knleft
                    2931     
11A5 75AD00         2932     no0chk:         mov             P3IF,#00;               обязательно сбросить опять приходит
                              на обработку прерывания
11A8 75B0C0         2933                                             mov             P3,#0c0h
11AB 32             2934                                             reti
                    2935     
11AC 020000   F     2936     rknMEM:                 jmp             knMEM
                    2937     
11AF                2938     keyb2:  ;IE7
                    2939     ;;;;;
                    2940                     ;       mov                     a,chkl          ;low
                    2941                     ;       jb                      acc.7,no0chk;
                    2942                             ;jnz                    no0chk
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    47

                    2943                             ;mov                    a,chkl                          ;high
                    2944                             ;jnz                    no0chk
                    2945     ;;;;
11AF 75E700         2946                                     mov             EIE2,#00H
11B2 75AD00         2947                                     mov             P3IF,#00
                    2948     
11B5 C0E0           2949                                     push    acc
11B7 C0D0           2950                                     push    psw
11B9 C000           2951                                     push    rr0
11BB C001           2952                                     push    rr1
11BD C002           2953                                     push    rr2
11BF C003           2954                                     push    rr3
11C1 C004           2955                                     push    rr4
11C3 C005           2956                                     push    rr5
11C5 C006           2957                                     push    rr6
11C7 C007           2958                                     push    rr7
11C9 C082           2959                                     push    dpl
11CB C083           2960                                     push    dph
                    2961                                     ;clr            bitmig
                    2962                       ;;;;;;;;;;;;;;
11CD 120000   F     2963                               call  z_01s   ;0,1s
                    2964                               ;восстан знакоместо при мигании
                    2965                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
11D0 78B2           2966                                     mov             r0,#marker
11D2 7440           2967                                     mov             a,#bufind
11D4 26             2968                                     add             a,@r0                   ;a=bufind+marker
11D5 F9             2969                                     mov             r1,a
11D6 A73C           2970                                     mov             @r1,savba
                    2971                                     ;;;;;;;;;;;
                    2972     
11D8 E5B0           2973                             mov             a,p3
11DA 20E7BC         2974                                     jb              acc.7,rout7
11DD E5B0           2975                                     mov             a,p3
11DF 74FF           2976                                     mov             a,#0ffh         ; p3.(5-0)<-3f
11E1 F5B0           2977                                     mov             p3,a
11E3 E5B0           2978                                     mov             a,p3
11E5 30E7B1         2979                                     jnb             acc.7,rout7             ;error
11E8 3004B1         2980                                     jnb             bitizm,rlabelH
11EB 75B0FE         2981                                     mov             p3,#0feh                ;реж IZM
11EE E5B0           2982                                     mov             a,p3
11F0 30E7AC         2983                                     jnb             acc.7,rknNUL
11F3 75B0FD         2984                                     mov             p3,#0fdh
11F6 E5B0           2985                                     mov             a,p3
11F8 30E79B         2986                                     jnb             acc.7,knKMP
11FB 75B0FB         2987                                     mov             p3,#0fbh
11FE E5B0           2988                                     mov             a,p3
1200 30E79F         2989                                     jnb             acc.7,rknleft
1203 75B0F7         2990                                     mov             p3,#0f7h
1206 00             2991                                     nop
1207 00             2992                                     nop
1208 00             2993                                     nop
1209 00             2994                                     nop
120A E5B0           2995                                     mov             a,p3
120C 30E76F         2996                                     jnb             acc.7,knAVP
120F 75B0EF         2997                                 mov         p3,#0efh
1212 E5B0           2998                                     mov             a,p3
1214 30E795         2999                                     jnb             acc.7,rknMEM
1217 75B0DF         3000                                     mov             p3,#0dfh
121A E5B0           3001                                     mov             a,p3    
121C 30E722         3002                                     jnb             acc.7,knmenu
121F                3003     an_t7:             ;;;;;;;;;;;;
                    3004                     
                    3005     ;       clr             c
                    3006     ;       mov             r1,#parN
                    3007     ;
                    3008     ;                       mov             r0,#diap
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    48

                    3009     ;                       mov             a,#6            
                    3010     ;                       subb    a,@r0
                    3011     ;                       jnc             goto7           ;         ;10-2..10-8
                    3012                               
                    3013     ;                       mov             @r1,#2          ;10-9..10-11            
                    3014                             
                    3015                             ;;;;;;;;;;;;
121F 799A           3016     goto7:                  mov             r1,#parT
1221 783D           3017                                     mov             r0,#chkl
1223 B70108         3018                                     cjne    @r1,#1,not1_7
1226 7600           3019                                     mov             @r0,#00
1228 08             3020                                     inc             r0
1229 7602           3021                                     mov             @r0,#2
122B 020000   F     3022                                     jmp             out7
                    3023                             
                    3024     
122E B70208         3025     not1_7:                 cjne    @r1,#2,not2_7
1231 7600           3026                                             mov             @r0,#00
1233 08             3027                                     inc             r0
1234 760A           3028                                     mov             @r0,#10;20
1236 020000   F     3029                                     jmp             out7
1239 7600           3030     not2_7:                 mov             @r0,#00
123B 08             3031                                     inc             r0
123C 7614           3032                                     mov             @r0,#20;0
123E 020000   F     3033     merr:           jmp             out7
                    3034     
                    3035     
1241 2006FA         3036     knmenu: jb              bitvi11,merr
1244 20151C         3037                                     jb              biteizm,menuoff
                    3038                                     ;;;;;
1247 201225         3039                                     jb              bitklb,klboff
124A C204           3040                              clr            bitizm          ;off IZM
124C D211           3041                                     setb            bitmenu
124E C217           3042                                     clr             bitoll
1250 900000   F     3043                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1253 120000   F     3044                                     call    lotext
1256 534B03         3045                                     anl                     bufind+11,#03h ;погасить запятые
1259 120000   F     3046                                     call            ind
125C 78B1           3047                                     mov             r0,#vichR
125E 7611           3048                                     mov             @r0,#11h
1260 020000   F     3049                                     jmp             onmem11
1263                3050     menuoff:
1263 78B1           3051                                     mov             r0,#vichR
1265 7600           3052                                     mov             @r0,#00
1267 C215           3053                                     clr             biteizm
1269 120000   F     3054                                     call    loadus
126C 020000   F     3055                                     jmp             out7
                    3056     
126F C212           3057     klboff:                 clr             bitklb
1271 120000   F     3058                                                     call            loadUS
1274 78B1           3059                                                     mov             r0,#vichR
1276 7600           3060                                                     mov             @r0,#00
1278 020000   F     3061                                                     jmp             out7
                    3062     
127B 020000   F     3063     rendkalib:              jmp             endkalib
                    3064     
127E 2012FA         3065     knAVP:  jb              bitklb,rendkalib        
1281 200504         3066                                     jb              bitavp,meavp
1284 D205           3067                                     setb    bitavp
1286 8097           3068                                     jmp             an_t7;onmem11
1288 C205           3069     meavp:                  clr             bitavp
128A 8093           3070                                     jmp             an_t7;onmem11
                    3071     
128C 201207         3072     knleft: jb              bitklb,lefkl
                    3073                                     ;;;;;;;;
128F 79AE           3074                                mov          r1,#diap
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    49

1291 07             3075                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1292 B70A03         3076                                     cjne    @r1,#0ah,nodi6
1295 17             3077                                     dec             @r1
1296 8087           3078     lefkl:  jmp             an_t7
                    3079     
1298                3080     nodi6:             ;    cjne    @r1,#0,an_t7
1298 120000   F     3081                                      call    clmassix
129B 78B3           3082                                     mov             r0,#summa
129D 120000   F     3083                                     call    clear4  
12A0 786A           3084                                     mov             r0,#rez_A0
12A2 120000   F     3085                                     call    clear4
12A5 C20F           3086                                     clr             bitnul          ;гасить светодиод НУЛЬ  
12A7 120000   F     3087                                     call    loadUS
12AA 020000   F     3088                                jmp          an_t7
                    3089     
12AD 200F0F         3090     knNUL:                  jb              bitnul,ybnul
12B0 D20F           3091                                     setb    bitnul
12B2 789C           3092                                     mov             r0,#rez_A3      ;A3
12B4 120000   F     3093                                     call    resar2
12B7 786A           3094                                     mov             r0,#rez_A0      
12B9 120000   F     3095                                     call    saver2;A0<-A3
12BC 020000   F     3096                                     jmp             goto7;an_t7
                    3097     
12BF C20F           3098     ybnul:                  clr             bitnul
12C1 900000   F     3099                                      mov    DPTR,#ch0 
12C4 120000   F     3100                                     CALL   ldc_long          ; r2..r5 <-- 0
12C7 786A           3101                                     mov             r0,#rez_A0      ;A0=0
12C9 120000   F     3102                                     call    saver2
12CC 020000   F     3103                                     jmp             goto7;an_t7
                    3104     
12CF 301021         3105     labelH:                 jnb             bitt2,nolah
12D2 75B0FB         3106                                     mov             p3,#0fbh   ;вход в режим изм Т
12D5 534A8F         3107                                     anl             bufind+10,#8fh
12D8 79B7           3108                                     mov             r1,#load;parT
12DA 20B70D         3109                                     jb              p3.7,rhnot1
12DD B70003         3110                                     cjne    @r1,#0,inct;
12E0 020000   F     3111                                     jmp             out7;hyest6
12E3 17             3112     inct:                   dec             @r1                     ;Tизм+1
                    3113                             
12E4 120000   F     3114                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
12E7                3115     hnot2:          ;       call    ind
12E7 020000   F     3116                                     jmp             onmem11;out7
                    3117     
12EA 020000   F     3118      rhnot1:                jmp             hnot1
                    3119      ;rnoviR:       jmp             noviR
12ED 020000   F     3120      rlabelK:       jmp             labelK
12F0 020000   F     3121      rlabelI:       jmp             labelI          
                    3122      ;;;;;;;;;;;;;;;;;;;
12F3 3014F7         3123     nolah:          jnb             bitvich,rlabelK 
                    3124                                     
                    3125                             ;;;;;;
                    3126                             ;увеличить счетчик задержки клавиатуры
                    3127                     ;;              mov             r0,#chkl
                    3128                     ;;              mov             @r0,#27h
                    3129                     ;;              inc             r0
                    3130                     ;;              mov             @r0,#10h
                    3131                             ;;;;;;
                    3132     
12F6 78B1           3133                             mov             r0,#vichR
12F8 B61128         3134                             cjne    @r0,#11h,rhnor11;rlabelI;;
12FB 75B0FB         3135                             mov             p3,#0fbh   ;<-
12FE 20B730         3136                             jb              p3.7,noh37;routF
1301 B6110B         3137                     cjne    @r0,#11h,hr12
1304 7612           3138                             mov             @r0,#12h;11h;= вычислить
1306 900000   F     3139                             mov             dptr,#teIZMK    ;       изм конст;teVICH
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    50

1309 120000   F     3140     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
130C 020000   F     3141                             jmp             onmem11;goto7
130F B61207         3142     hr12:           cjne    @r0,#12h,hnor12
1312 7611           3143     lovich:         mov             @r0,#11h
1314 900000   F     3144                             mov             dptr,#teVICH
1317 80F0           3145                             jmp             hvi1113         
1319 B61307         3146     hnor12:         cjne    @r0,#13h,rhnor11
131C 7612           3147     loizmk:         mov             @r0,#12h
131E 900000   F     3148                             mov             dptr,#teIZMK    ;       изм конст
                    3149                                        
1321 80E6           3150                             jmp             hvi1113
                    3151     
1323 804C           3152     rhnor11:                jmp             hnor11
                    3153     
1325 8057           3154     rvvizko:                jmp             vvizko
1327 C214           3155     vioutF:                 clr             bitvich
1329 C206           3156                                                     clr             bitvi11
132B 020000   F     3157                                                     jmp             viout;outF
132E 020000   F     3158     toutF:                  jmp             viout;outF
                    3159     
1331 75B0F7         3160     noh37:          mov             p3,#0f7h
1334 20B7F7         3161                             jb              p3.7,toutF;vioutF
1337 B611EB         3162                             cjne    @r0,#11h,rvvizko
133A D206           3163                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
133C D204           3164              setb   bitizm
133E 534B07         3165                              anl            bufind+11,#07h
1341 434B10         3166                              orl            bufind+11,#10h;точка после 1 знакоместа
1344 020000   F     3167                                     jmp             goto7;
                    3168     
                    3169     
1347 80E8           3170     rnoh37:         jmp             noh37
                    3171     
1349 B6120D         3172     norr11:         cjne    @r0,#12h,norr12
134C 75B0FB         3173                             mov             p3,#0fbh   ;<-
134F 20B7F5         3174                             jb              p3.7,rnoh37;routF
1352 760B           3175                             mov             @r0,#11;12->11
1354 80BC           3176                             jmp             lovich
                    3177     
1356 020000   F     3178     labelI2:                jmp             labelI
1359 B613FA         3179     norr12:         cjne    @r0,#13h,labelI2
135C 75B0FB         3180                             mov             p3,#0fbh   ;<-
135F 20B7E5         3181                             jb              p3.7,rnoh37
1362 7612           3182                             mov             @r0,#12h
1364 80B6           3183                             jmp             loizmk
                    3184                             ;;;;
1366 C214           3185     clrvich:                clr             bitvich
1368 D204           3186                             setb    bitizm
136A A8B2           3187                             mov             r0,marker
136C 76FF           3188                             mov             @r0,#0ffh
136E 020000   F     3189                              jmp    goto7;  routF
                    3190     
                    3191     ;rnoh37:                jmp             noh37
                    3192      ;ввод изм конст
1371 B612E5         3193     hnor11:         cjne    @r0,#12h,norr12;clrvich
1374 75B0FB         3194                              mov            p3,#0fbh   
1377 20B7CD         3195                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
137A 7611           3196                             mov             @r0,#11h
137C 8094           3197                             jmp             lovich
                    3198     
137E 78B1           3199     vvizko:         mov             r0,#vichR
1380 E6             3200                             mov             a,@r0
                    3201                     ;       cjne    @r0,#12h,clrvich
1381 B412E2         3202                             cjne    a,#12h,clrvich
1384 7621           3203                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
1386 78B2           3204                             mov             r0,#marker
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    51

1388 7604           3205                             mov             @r0,#4;9
138A 753A04         3206                             mov             movleft,#4
138D 753B07         3207                             mov             movrig,#7
1390 900000   F     3208                             mov             dptr,#teAequ0
1393 120000   F     3209                             call    lotext
                    3210                             
1396 120000   F     3211                             call    outA
1399 534B0F         3212                             anl                     bufind+11,#0fh
                    3213             ;       mov             a,bufind+11
                    3214             ;       anl             a,#0f0h
                    3215             ;       mov             bufind+11,a
139C 434B40         3216                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3217                             
139F 020000   F     3218                             jmp             goto7;routF
                    3219     ;hnor13:                jmp             hnor12          
13A2 B6210C         3220     izchi:          cjne    @r0,#21h,tlabelI
                    3221     ;<- при вводе цифр А                            
                    3222                     ;        mov            p3,#0fbh   
                    3223                     ;       jnb             p3.7,li21
                    3224             ;clr            bitmig
13A5 78B2           3225                             mov             r0,#marker
13A7 16             3226                             dec             @r0
13A8 B60201         3227                             cjne    @r0,#2,li21
13AB 06             3228                             inc             @r0;marker=3 +/-
13AC C219           3229     li21:           clr             bitmig
13AE 020000   F     3230                             jmp             goto7;outF
                    3231     
13B1 020000   F     3232     tlabelI:        jmp             labelI
                    3233     
                    3234     ;                       load    0 1 2 3 4 5             
13B4 06050403       3235     sootv:          db              6,5,4,3,2,1;parT
13B8 0201                    
                    3236     ;
13BA 020000   F     3237     nnnott:                 jmp             viout
                    3238     ;нажата кн ввод при наборе Т
13BD 75B0F7         3239     hnot1:                  mov             p3,#0f7h
13C0 20B7F7         3240                                     jb              p3.7,nnnott;routF;out7
13C3 B70549         3241                                     cjne    @r1,#5,nohnot1  ;r1=load
13C6 794A           3242                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
13C8 E7             3243                                     mov             a,@r1
13C9 548F           3244                                     anl             a,#8fh
13CB 4440           3245                                     orl             a,#40h;.6
13CD F7             3246                                     mov             @r1,a
13CE 8000           3247                                     jmp             loadb
                    3248                                     
                    3249                                     
13D0 789A           3250     loadB:                  mov             r0,#parT
13D2 900000   F     3251                                     mov             dptr,#sootv
13D5 79B7           3252                                     mov             r1,#load                
13D7 E7             3253                                     mov             a,@r1;load
13D8 93             3254                                     movc    a,@a+dptr
13D9 F6             3255                                     mov             @r0,a
13DA 120000   F     3256                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3257                                      ;r4=b1 r5=b2
13DD 120000   F     3258                                     call    iniacp;инициализация АЦП
13E0 120000   F     3259                                     call    loadUS
13E3 120000   F     3260                                     call    clmassix        
13E6 D204           3261                                     setb    bitizm
13E8 C210           3262                                     clr             bitt2
                    3263     
13EA 534A8F         3264                                     anl             bufind+10,#8fh
13ED C3             3265                                      clr            c
13EE 789A           3266                                  mov                r0,#parT
13F0 79AF           3267                                      mov            r1,#parN
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    52

13F2 7402           3268                                  mov                a,#2
13F4 96             3269                                 subb                a,@r0
13F5 5005           3270                                 jnc                 loadB2
13F7 7701           3271                                     mov             @r1,#1;N=1         ;T>=2
13F9 020000   F     3272     bout7:                  jmp             goto7;out7
                    3273     
13FC B702FA         3274     loadB2:                 cjne    @r1,#2,bout7
13FF 7702           3275                                     mov             @r1,#2;N=2
1401 020000   F     3276                                     jmp             goto7;out7
1404                3277     nohnot2:                ;в буфере 1 зажечь <=0,1s
1404 794A           3278                                     mov             r1,#bufind+10
1406 E7             3279                                     mov             a,@r1
1407 4410           3280                                     orl             a,#10h;.4
1409 F7             3281                                     mov             @r1,a
140A 120000   F     3282                                     call            ind
140D 80C1           3283                                     jmp             loadB
140F B704F2         3284     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
1412 794A           3285                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1414 E7             3286                                     mov             a,@r1
1415 4420           3287                                     orl             a,#20h;.5
1417 F7             3288                                     mov             @r1,a
1418 80B6           3289                                     jmp             loadB
                    3290     
                    3291     ;кнопка ПАМЯТЬ
141A 2012DC         3292     knMEM:  jb              bitklb,bout7;в реж калибровки не нажимать память
141D C204           3293                                     clr             bitizm          ;off IZM
141F 900000   F     3294                                     mov             dptr,#teLIST;CLE
1422 120000   F     3295                                     call    lotext    ;в буф2 записать ОЧИСТКА
1425 D20B           3296                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1427 534BEF         3297                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
142A 434B01         3298                                     orl             bufind+11,#01;зажечь светодиод память
142D 120000   F     3299                                     call            ind
1430 78B0           3300                                     mov             r0,#level
1432 7613           3301                                     mov             @r0,#13h;11h
1434 783D           3302     onmem11:                mov             r0,#chkl
1436 7603           3303                                     mov             @r0,#03
1438 08             3304                                     inc             r0
1439 76E8           3305                                     mov             @r0,#0e8h               ;1000
143B 020000   F     3306                                     jmp             out7;goto7;out7
                    3307     
143E 020000   F     3308     rnomemk:                jmp             nomemk          ;
                    3309     
1441 78B0           3310     outkmem:        mov                     r0,#level
1443 7600           3311                                             mov                     @r0,#0
1445 78B1           3312                                             mov                     r0,#vichR
1447 7600           3313                                             mov                     @r0,#0
1449 C20B           3314                                             clr                     bitmem
144B C214           3315                                             clr                     bitvich
144D C206           3316                                             clr                     bitvi11
144F C211           3317                                             clr                     bitmenu
1451 D204           3318                                             setb            bitizm
1453 78B2           3319                                             mov                     r0,#marker
1455 76FF           3320                                             mov                     @r0,#0ffh
1457 020000   F     3321                                             jmp                     vvod2_10
                    3322                                             
                    3323     
145A                3324     offmenum:       
145A 020000   F     3325                                                     jmp                     goto7   
                    3326             
145D                3327     labelK:
                    3328     
                    3329     ;;;;;;;;;;;;
145D 300BDE         3330                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
                    3331                                     ;;;;;;;
1460 75B0DF         3332                                     mov             p3,#0dfh;(код кнопки меню)
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    53

1463 30B7F4         3333                                     jnb             p3.7,offmenum
                    3334                                     ;;;;;;;
1466 75B0EF         3335                                     mov                     p3,#0efh
1469 30B7D5         3336                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
146C 78B0           3337                                      mov            r0,#level
146E B6114A         3338                               cjne          @r0,#11h,klev1;nome11
1471 75B0FB         3339     lefmem11:         mov           p3,#0fbh
1474 E5B0           3340                               mov           a,p3
1476 20E70D         3341                               jb            acc.7,rkvvod0
1479 B6110D         3342                               cjne          @r0,#11h,locle          ;<-memory
147C 7614           3343                               mov           @r0,#14h
147E 900000   F     3344     lolist:           mov           dptr,#teSTAT
1481 120000   F     3345                               call          lotext           ;СТАТИСТИКА
1484 80AE           3346                               jmp                   onmem11;goto7;
                    3347     
1486 020000   F     3348     rkvvod0:        jmp             kvvod0
                    3349     
                    3350     
1489 B6120A         3351     locle:          cjne            @r0,#12h,lowr           ;<-memory
148C 7611           3352                               mov           @r0,#11h                   ;ОЧИСТКА
148E 900000   F     3353     loadcle:          mov           dptr,#teCLE
1491 120000   F     3354                               call          lotext
1494 809E           3355                               jmp           onmem11;goto7
                    3356     
1496 B6130A         3357     lowr:                   cjne    @r0,#13h,lostat
1499 7612           3358                                             mov             @r0,#12h
149B 900000   F     3359      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
149E 120000   F     3360                             call    lotext
14A1 8091           3361                             jmp             onmem11;goto7
                    3362     
14A3 7613           3363     lostat:         mov             @r0,#13h
14A5 900000   F     3364                                     mov             dptr,#teLIST              ;ПРОСМОТР
14A8 120000   F     3365                                             call    lotext
14AB 8087           3366                                     jmp             onmem11;goto7
                    3367     
14AD B6141A         3368     me_14:cjne              @r0,#14h,klev22
14B0 7613           3369                                             mov             @r0,#13h
14B2 900000   F     3370                             mov             dptr,#teLIST              ;;ПРОСМОТР
14B5 120000   F     3371                             call    lotext
14B8 020000   F     3372                             jmp             goto7
14BB B61202         3373      klev1:          cjne   @r0,#12h,klev2
14BE 80B1           3374                             jmp             lefmem11
14C0 B61302         3375     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
14C3 80AC           3376                             jmp             lefmem11
14C5 B61402         3377     klev3:           cjne   @r0,#14h,klev22;
14C8 80A7           3378                             jmp             lefmem11
                    3379     ;<- vvod на более низких уровнях
14CA B62117         3380     klev22:         cjne    @r0,#21h,klev21
14CD 75B0FB         3381     lev220:         mov             p3,#0fbh
14D0 20B76F         3382                             jb              p3.7,kgo23
14D3 B6210B         3383                             cjne    @r0,#21h,kfullr
14D6 7622           3384                             mov             @r0,#22h
14D8 900000   F     3385                             mov             dptr,#teBL
14DB 120000   F     3386                             call    lotext
14DE 020000   F     3387                             jmp             goto7;outF
14E1 020000   F     3388     kfullr:         jmp             kfull                           
14E4 B6220E         3389     klev21:         cjne    @r0,#22h,klev23
14E7 80E4           3390                             jmp             lev220
                    3391     
14E9 020000   F     3392     rlabL2:         jmp             labL2
14EC 020000   F     3393     rlabM:          jmp             labM
14EF 020000   F     3394     ques:                   jmp             out7
14F2 020000   F     3395     ddoutfr:        jmp             ddoutf
                    3396     
14F5 B623F4         3397     klev23:          cjne   @r0,#23h,rlabM
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    54

14F8 75B0FB         3398                              mov    p3,#0fbh
14FB 30B7F1         3399                              jnb            p3.7,ques;errr labL2
14FE 75B0F7         3400                              mov    p3,#0f7h
1501 20B7EE         3401                              jb             p3.7,ddoutfr
                    3402                                             ;       считать с индикатора  
1504 C3             3403                                     clr                     c
1505 E547           3404                                mov          a,bufind+7      
1507 9430           3405                                      subb           a,#30h
1509 B40002         3406                                      cjne           a,#0,chaibl
150C 7401           3407                                      mov            a,#1                    ;номера блоков 1..4
150E                3408     chaibl:         
150E F538           3409                                             mov             nblok,a
                    3410                                
                    3411                              ;очистить блок памяти с набранным номером
                    3412                              ;150h..1000h( 150h+nblok*320h)
1510 120000   F     3413                                     call            adrblok         ;dptr-
                    3414     
1513 79B8           3415                                     mov                     r1,#work                ;обьем блок
                             а
1515 7703           3416                                     mov                     @r1,#03
1517 09             3417                                     inc                     r1
1518 7720           3418                                     mov                     @r1,#20h                        ;32
                             0h
                    3419     
151A                3420     goonoff:
151A E4             3421                                     clr                     a
151B F0             3422                                     movx            @dptr,a
151C A3             3423                                     inc                     dptr
                    3424     
151D 79B9           3425                                     mov                     r1,#work+1
151F 120000   F     3426                                     call            chminus
1522 78B8           3427                                     mov             r0,#work
1524 E6             3428                             mov             a,@r0
1525 30E7F2         3429                             jnb             acc.7,goonoff
                    3430     
1528 C20B           3431                              clr    bitmem  ;сбр признак памяти 
152A D204           3432                              setb   bitizm
                    3433                             ;после очистки блока сохраняем в saven_bl 
                    3434                             ;адрес второго с конца измерения потому
                    3435                             ;добавляем 8;;
152C 120000   F     3436                             call            adrblok;dptr-начало блока
                    3437                     ;       mov                     a,dpl
                    3438                     ;       add                     a,#8
                    3439                     ;       mov                     dpl,a
                    3440                     ;       mov                     a,dph
                    3441                     ;       addc            a,#0
                    3442                     ;       mov                     dph,a
152F 120000   F     3443                             call            save_hl;подготовка записи в начало блока
                    3444                             ;;;;;
                    3445     
1532 78B2           3446                              mov            r0,#marker
1534 76FF           3447                              mov            @r0,#0ffh
1536 020000   F     3448                                     jmp                     vvod2_10
1539 020000   F     3449                              jmp    goto7
                    3450     
153C 020000   F     3451     rddoutf:        jmp             ddoutf
153F 020000   F     3452     rgo23no:        jmp             go23no
                    3453     
                    3454     ;vvod   БЛОК->БЛОК 00           
1542 75B0F7         3455     kgo23:           mov    p3,#0f7h
1545 20B7F4         3456                             jb              p3.7,rddoutf
1548 B621F4         3457                             cjne    @r0,#21h,rgo23no
                    3458                             ;очистить память 150..dd0h
                    3459                             ;1й блок
154B 900150         3460                              mov                    dptr,#150h
154E 79B8           3461                                     mov                     r1,#work                ;обьем блок
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    55

                             а
1550 7703           3462                                     mov                     @r1,#03
1552 09             3463                                     inc                     r1
1553 7720           3464                                     mov                     @r1,#20h                        ;32
                             0h
                    3465     
1555                3466     gooff1:
1555 E4             3467                                     clr                     a
1556 F0             3468                                     movx            @dptr,a
1557 A3             3469                                     inc                     dptr
                    3470     
1558 79B9           3471                                     mov                     r1,#work+1
155A 120000   F     3472                                     call            chminus
155D 78B8           3473                                     mov             r0,#work
155F E6             3474                             mov             a,@r0
1560 30E7F2         3475                             jnb             acc.7,gooff1
1563 900150         3476                             mov                     dptr,#150h;начало 1 го блока
                    3477                             ;после очистки блока сохраняем в saven_bl 
                    3478                             ;адрес второго с конца измерения потому
                    3479                             ;добавляем 8;;
                    3480     ;                               call            save_hl;подготовка записи в начало блока
                    3481     ;2й блок
1566 900470         3482                             mov                     dptr,#470h
1569 79B8           3483                                     mov                     r1,#work                ;обьем блок
                             а
156B 7703           3484                                     mov                     @r1,#03
156D 09             3485                                     inc                     r1
156E 7720           3486                                     mov                     @r1,#20h                        ;32
                             0h
                    3487     
1570                3488     gooff2:
1570 E4             3489                                     clr                     a
1571 F0             3490                                     movx            @dptr,a
1572 A3             3491                                     inc                     dptr
                    3492     
1573 79B9           3493                                     mov                     r1,#work+1
1575 120000   F     3494                                     call            chminus
1578 78B8           3495                                     mov             r0,#work
157A E6             3496                             mov             a,@r0
157B 30E7F2         3497                             jnb             acc.7,gooff2
157E 900470         3498                             mov                     dptr,#470h;начало 2 го блока
                    3499     ;                       call            save_hl;подготовка записи в начало блока
                    3500     ;3й блок
1581 900790         3501                             mov                     dptr,#790h
1584 79B8           3502                                     mov                     r1,#work                ;обьем блок
                             а
1586 7703           3503                                     mov                     @r1,#03
1588 09             3504                                     inc                     r1
1589 7720           3505                                     mov                     @r1,#20h                        ;32
                             0h
                    3506     
158B                3507     gooff3:
158B E4             3508                                     clr                     a
158C F0             3509                                     movx            @dptr,a
158D A3             3510                                     inc                     dptr    
                    3511     
158E 79B9           3512                                     mov                     r1,#work+1
1590 120000   F     3513                                     call            chminus
1593 78B8           3514                                     mov             r0,#work
1595 E6             3515                             mov             a,@r0
1596 30E7F2         3516                             jnb             acc.7,gooff3
1599 900790         3517                             mov                     dptr,#790h;начало 3 го блока
                    3518                                     ;после очистки блока сохраняем в saven_bl 
                    3519                             ;адрес второго с конца измерения потому
                    3520                             ;добавляем 8;;
                    3521                     ;       call            save_hl;подготовка записи в начало блока
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    56

                    3522     ;4й блок
159C 900AB0         3523     mov                     dptr,#0ab0h
159F 79B8           3524                                     mov                     r1,#work                ;обьем блок
                             а
15A1 7703           3525                                     mov                     @r1,#03h
15A3 09             3526                                     inc                     r1
15A4 7720           3527                                     mov                     @r1,#20h                        ;32
                             0h
                    3528     
15A6                3529     gooff4:
15A6 E4             3530                                     clr                     a
15A7 F0             3531                                     movx            @dptr,a
15A8 A3             3532                                     inc                     dptr
                    3533     
15A9 79B9           3534                                     mov                     r1,#work+1
15AB 120000   F     3535                                     call            chminus
15AE 78B8           3536                                     mov             r0,#work
15B0 E6             3537                             mov             a,@r0
15B1 30E7F2         3538                             jnb             acc.7,gooff4
15B4 900AB0         3539                             mov                     dptr,#0ab0h;начало 4 го блока
                    3540                             ;после очистки блока сохраняем в saven_bl 
                    3541                             ;адрес второго с конца измерения потому
                    3542                             ;добавляем 8;;
                    3543     ;                       call            save_hl;подготовка записи в начало блока
                    3544                             ;;;;26.02.07
15B7 E538           3545                                                     mov             a,nblok
15B9 B40117         3546                                                     cjne    a,#1,cl_hl1
15BC 900150         3547                                                     mov             dptr,#150h
15BF 79D3           3548                                                     mov             r1,#saven_bl
15C1 E583           3549     cl_hl:                  mov             a,dph
15C3 F7             3550                                               mov           @r1,a
15C4 09             3551                                                     inc             r1
15C5 E582           3552                                                     mov             a,dpl
15C7 F7             3553                                                     mov             @r1,a
                    3554                             ;;;;;;;;
15C8 C20B           3555                                             clr             bitmem
15CA D204           3556                                             setb    bitizm
15CC 78B2           3557                                             mov             r0,#marker
15CE 76FF           3558                                             mov             @r0,#0ffh
15D0 020000   F     3559                                             jmp                     vvod2_10;jmp            got
                             o7
                    3560     
15D3 B40207         3561     cl_hl1:         cjne            a,#2,cl_hl2
15D6 900470         3562                                             mov                     dptr,#470h
15D9 79C0           3563                                             mov             r1,#saven_bl2
15DB 80E4           3564                                             jmp                     cl_hl
                    3565     
15DD B40307         3566     cl_hl2:         cjne            a,#3,cl_hl3
15E0 900790         3567                                             mov                     dptr,#790h
15E3 79C2           3568                                             mov             r1,#saven_bl3
15E5 80DA           3569                                             jmp                     cl_hl
                    3570     
15E7 900AB0         3571     cl_hl3:         mov                     dptr,#0ab0h
15EA 79D9           3572                                             mov             r1,#saven_bl4
15EC 80D3           3573                                             jmp                     cl_hl
                    3574     
15EE 7623           3575     go23no:    mov          @r0,#23h
15F0 753B08         3576                                             mov                     movrig,#8
15F3 753A07         3577                                             mov             movleft,#7
15F6 8056           3578                             jmp             loblok;БЛОК 00
                    3579     
15F8 7621           3580     kfull:          mov             @r0,#21h
15FA 8025           3581                             jmp             gofull
                    3582                             
                    3583                                             
15FC                3584     nomemk:                         
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    57

15FC 020000   F     3585                                     jmp             labelS                  ;нажат ввод меню
                    3586                             
15FF 75B0FB         3587     nome11:           mov           p3,#0fbh
1602 E5B0           3588                               mov           a,p3
1604 20E70D         3589                               jb            acc.7,kvvod0
1607 B61205         3590                               cjne          @r0,#12h,mem12no        
160A 7611           3591                               mov           @r0,#11h                ;ОЧИСТКА
160C 020000   F     3592                               jmp            loadcle
                    3593     
160F                3594     mem12no:        ;cjne           @r0,#13h,lowr           
160F 7612           3595                               mov           @r0,#12h                   ;
1611 020000   F     3596                               jmp           lowr1                     ;ЗАПИСЬ
                    3597     
1614 75B0F7         3598     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1617 20B710         3599                               jb            p3.7,ddoutf
161A 78B0           3600                               mov           r0,#level
161C B6112A         3601                               cjne          @r0,#11h,mvv11
161F 7621           3602                               mov           @r0,#21h                ;ПОЛНАЯ
1621 900000   F     3603     gofull:           mov           dptr,#teFULL
1624 120000   F     3604                               call          lotext
1627 020000   F     3605                                     jmp             onmem11;mlabL2  ;<-????????/
                    3606     
162A                3607     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3608     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3609     ;т е сохранить ее в ячейке для мигания в противном случае
                    3610     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3611     ;       знакоместа
162A 78B2           3612                                                     mov             r0,#marker
162C 7440           3613                                     mov             a,#bufind
162E 26             3614                                             add             a,@r0                   ;a=bufind+m
                             arker
162F F9             3615                                             mov             r1,a
1630 19             3616                                             dec             r1      ;       inc             r1
1631 873C           3617                                             mov             savba,@r1
1633 C219           3618                                             clr             bitmig
                    3619     ;;;;;;;;;;;;;;;;
1635 78B2           3620                       mov           r0,#marker      ;курсор слева   ?
1637 E53A           3621                             mov             a,movleft
1639 C3             3622                             clr             c
163A 96             3623                             subb    a,@r0
163B 7006           3624                             jnz        left21
163D E53B           3625                             mov             a,movrig;уст в правую позицию
163F F6             3626                             mov             @r0,a
                    3627     
1640 020000   F     3628                             jmp             goto7                                            
1643 E53A           3629     left21:         mov             a,movleft;уст в левую позицию
1645 F6             3630                             mov             @r0,a   
1646 020000   F     3631                             jmp             goto7
                    3632     
                    3633     
1649 B61215         3634     mvv11:            cjne          @r0,#12h,mvv12
164C 7631           3635                                     mov             @r0,#31h
164E 900000   F     3636     loblok:                 mov             dptr,#teBL0;БЛОК 0
1651 120000   F     3637                                     call    lotext
1654 E538           3638                                     mov                     a,nblok
1656 2430           3639                                     add                     a,#30h
1658 F547           3640                                     mov                     bufind+7,a
165A 78B2           3641                                     mov             r0,#marker
165C 7607           3642                                     mov             @r0,#7
                    3643                                     ;mov            movrig,#9
                    3644                                     ;mov            movleft,#6
165E 020000   F     3645                                     jmp             onmem11
1661 B61411         3646     mvv12:  cjne            @r0,#14h,bl_li
1664 7661           3647                                     mov                     @r0,#61h
1666 900000   F     3648                                     mov             dptr,#teMIN;
1669 120000   F     3649                                     call    lotext
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    58

166C 120000   F     3650                                     call    vichmin
166F 120000   F     3651                                     call    z_1s
1672 020000   F     3652                                     jmp             onmem11
                    3653     
1675 7641           3654     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1677 80D5           3655                                     jmp             loblok
                    3656     
                    3657     
                    3658     
1679                3659     mlabL2:         ;jmp            labL2
                    3660                                             ;  уст курсор в правую позицию 
                    3661                                     ;                               29.12.06
                    3662     ;;;;;;;;;;;;;;;;;;
                    3663     ;необходимо не портить цифру в следуюем справа знакоместе
                    3664     ;т е сохранить ее в ячейке для мигания в противном случае
                    3665     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3666     ;       знакоместа
1679 78B2           3667                                             mov             r0,#marker
167B 7440           3668                                     mov             a,#bufind
167D 26             3669                                             add             a,@r0                   ;a=bufind+m
                             arker
167E F9             3670                                             mov             r1,a
167F 09             3671                                             inc             r1
1680 873C           3672                                             mov             savba,@r1
                    3673     ;;;;;;;;;;;;;;;;
1682 78B2           3674                       mov           r0,#marker      ;курсор справа  ?
1684 E53B           3675                             mov             a,movrig
1686 C3             3676                             clr             c
1687 96             3677                             subb    a,@r0
1688 6006           3678                             jz         equ2l
168A E53B           3679                             mov             a,movrig;уст в правую позицию
168C F6             3680                             mov             @r0,a
                    3681     ;                       lool
168D 020000   F     3682                             jmp             goto7                                            
1690 E53A           3683     equ2l:          mov             a,movleft;уст в левую позицию
1692 F6             3684                             mov             @r0,a   
1693 020000   F     3685                             jmp             goto7
                    3686                     
1696 020000   F     3687     rnom31:         jmp                     nom31
1699 B631FA         3688     labM:                   cjne    @r0,#31h,rnom31
169C 75B0FB         3689                                     mov             p3,#0fbh
169F 30B7D7         3690                                     jnb             p3.7,mlabL2
16A2 75B0F7         3691                                mov          p3,#0f7h
16A5 20B782         3692                                jb           p3.7,ddoutf
                    3693                                
16A8 7632           3694                                mov          @r0,#32h                        ;ИНТ 0000
                    3695                                     ;       считать с индикатора  
16AA C3             3696     blokvv:         clr                     c
16AB E547           3697                                mov          a,bufind+7      
16AD 9430           3698                                      subb           a,#30h
16AF B40002         3699                                      cjne           a,#0,blokvvc
16B2 7401           3700                                      mov            a,#1                    ;номера блоков 1..4
                    3701     
16B4 F538           3702     blokvvc: mov            nblok,a
16B6 900000   F     3703                                mov          dptr,#teINT;ИНТ 0000c
16B9 120000   F     3704                                call         lotext
16BC 78CE           3705                                      mov            r0,#interva+1
16BE 7952           3706                                      mov            r1,#abin+3
16C0 E6             3707                                      mov            a,@r0
16C1 F7             3708                                      mov            @r1,a
16C2 18             3709                                             dec                     r0
16C3 19             3710                                             dec                     r1
16C4 E6             3711                                             mov             a,@r0
16C5 F7             3712                                             mov             @r1,a
16C6 19             3713                                             dec             r1
16C7 E4             3714                                             clr             a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    59

16C8 F7             3715                                             mov             @r1,a
16C9 19             3716                                             dec             r1
16CA F7             3717                                             mov             @r1,a
                    3718                                                                             
16CB 7853           3719                                             mov             r0,#adec
16CD 7952           3720                                             mov             r1,#abin+3      ;hex->10
16CF 120000   F     3721                                             call    bindec
                    3722                                     
16D2 785C           3723                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
16D4 7948           3724                                             mov             r1,#bufind+8
16D6 7F04           3725                                             mov             r7,#4
16D8 E6             3726     bloin:                          mov             a,@r0
16D9 2430           3727                                             add             a,#30h
16DB F7             3728                                             mov             @r1,a
16DC 19             3729                                             dec             r1
16DD 18             3730                                             dec             r0
16DE DFF8           3731                                             djnz    r7,bloin
16E0 78B2           3732                                mov          r0,#marker
16E2 7605           3733                                mov          @r0,#5
16E4 753B08         3734                                mov          movrig,#8
16E7 753A05         3735                                mov          movleft,#5
16EA 789A           3736                                      mov            r0,#parT
16EC B60609         3737                                     cjne            @r0,#6,innot6
16EF 534BF0         3738                                     anl                     bufind+11,#0f0h;after 5- 0.000c
16F2 434B04         3739                                     orl                     bufind+11,#04h
                    3740                             
16F5 020000   F     3741                                     jmp                     goto7
16F8 B60309         3742     innot6: cjne            @r0,#3,innot3
16FB 534BF0         3743                                     anl                     bufind+11,#0f0h;after 7- 000.0c
16FE 434B20         3744                                     orl                     bufind+11,#20h
                    3745                                     ;call           ind
1701 020000   F     3746                                     jmp                     out7;goto7
1704 C3             3747     innot3: clr                     c
1705 7403           3748                                     mov                     a,#3
1707 96             3749                                     subb            a,@r0
1708 5009           3750                                     jnc                     innot1_2
170A 534BF0         3751                                     anl                     bufind+11,#0f0h;after 6- 00.00c
170D 434B40         3752                                     orl                     bufind+11,#40h
                    3753                                     
1710 020000   F     3754                                     jmp                     goto7
                    3755     
1713                3756     innot1_2:
1713 534B0F         3757                                     anl                     bufind+11,#0fh;0h;0000c
1716 C219           3758                                     clr                     bitmig
                    3759                                     ;call           ind             нет необходимости пришет пр
                             обел         
1718 020000   F     3760     rgoto7: jmp        goto7;outF
                    3761     
171B B63276         3762     nom31:             cjne         @r0,#32h,nom32
171E 75B0FB         3763                                     mov             p3,#0fbh
1721 20B71F         3764                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3765                                     
1724                3766     lefcur:         ;;кн <- 32 нач блок 000
                    3767     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3768     ;т е сохранить ее в ячейке для мигания в противном случае
                    3769     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3770     ;       знакоместа
1724 C219           3771                                                     clr             bitmig
1726 78B2           3772                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1728 7440           3773                                     mov             a,#bufind
172A 26             3774                                             add             a,@r0                   ;a=bufind+m
                             arker
172B F9             3775                                             mov             r1,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    60

172C 19             3776                                             dec             r1;;;;;;;;;;;
172D 873C           3777                                             mov             savba,@r1
                    3778                                             
172F 78B2           3779                                                     mov             r0,#marker      ;курсор сле
                             ва?
1731 E53A           3780                             mov             a,movleft
1733 C3             3781                             clr             c
1734 96             3782                             subb    a,@r0
1735 7006           3783                             jnz        noequ2
1737 E53B           3784                             mov             a,movrig
1739 F6             3785                             mov             @r0,a;уст в крайнюю правую позицию
173A 020000   F     3786                             jmp             goto7
173D 120000   F     3787     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
1740 020000   F     3788                             jmp        goto7        
                    3789                                                                       
                    3790     
                    3791     ;;;;;;;;;;;;;;;;;;
1743                3792     vvinte:         ;ввод интервал                          
1743 75B0F7         3793     no31n:             mov          p3,#0f7h
1746 20B7CF         3794                                     jb              p3.7,rgoto7
1749 7633           3795                                     mov             @r0,#33h
                    3796                                     ;считать с индикатора введенный интервал
174B 7F0A           3797                                             mov             r7,#10
174D 7853           3798                                     mov             r0,#adec
174F 120000   F     3799                                     call    clearN
1752 120000   F     3800                                     call    upak4                   
1755 784F           3801                                     mov             r0,#abin
1757 7953           3802                                     mov             r1,#adec                        ;мл        
                              ст
1759 120000   F     3803                                     call    decbin                  ;abin..abin+3 (hex)
175C 794F           3804                                     mov             r1,#abin
175E 78CE           3805                                     mov             r0,#interva+1
1760 E7             3806                                     mov             a,@r1
1761 F6             3807                                     mov             @r0,a
1762 18             3808                                     dec             r0
1763 09             3809                                     inc             r1
1764 E7             3810                                     mov             a,@r1
1765 F6             3811                                     mov             @r0,a
                    3812                                     
1766 78D5           3813                                     mov             r0,#volume                      ;объем блок
                             а
1768 7600           3814                                     mov             @r0,#0
176A 08             3815                                     inc             r0
176B 76C7           3816                                     mov             @r0,#0c7h
176D 120000   F     3817                                     call            adrblok;dptr
1770 120000   F     3818                                     call            save_hl;1я ячейка блока
1773 78B2           3819                                mov          r0,#marker
1775 76FF           3820                                mov          @r0,#0ffh
1777 D204           3821                                      setb           bitizm
1779 C20B           3822                                      clr            bitmem
177B 789A           3823     vvod2_10: mov           r0,#parT
177D B6050C         3824                                      cjne           @r0,#5,no10msv
1780 900000   F     3825                                             mov                     dptr,#te10ms
1783 120000   F     3826     t2msme:         call            lotext
                    3827                                             
1786 120000   F     3828                                             call            ind
1789 020000   F     3829     no2msv:   jmp      goto7;
178C B606FA         3830     no10msv:        cjne            @r0,#6,no2msv   
178F 900000   F     3831                                             mov                     dptr,#te2ms
1792 80EF           3832                                     jmp                     t2msme
                    3833     
                    3834     
                    3835     
1794 B6332B         3836     nom32:           cjne           @r0,#33h,nom33
1797 75B0FB         3837                              mov            p3,#0fbh
179A 30B787         3838                              jnb            p3.7,lefcur
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    61

179D 75B0F7         3839                              mov            p3,#0f7h
17A0 20B7E6         3840                              jb             p3.7,no2msv;rgoto7
                    3841                              ;запомнить номер ячейки конца блока
17A3 7634           3842                              mov    @r0,#34h
17A5 7F0A           3843     INTn:                   mov             r7,#10
17A7 7853           3844                                     mov             r0,#adec
17A9 120000   F     3845                                     call    clearN
17AC 120000   F     3846                                     call    upak3                   
17AF 784F           3847                                     mov             r0,#abin
17B1 7953           3848                                     mov             r1,#adec                        ;мл        
                              ст
17B3 120000   F     3849                                     call    decbin                  ;abin..abin+3 (hex)
17B6 120000   F     3850                                     call    loadr2                  ;r2..r5
17B9 120402         3851                                     call    altof                   ;r2..r5->int
17BC 020000   F     3852     dgoto7:                  jmp            goto7
                    3853     
17BF 020000   F     3854     rlefcur:                jmp             lefcur
                    3855     
17C2 B63464         3856     nom33:          cjne            @r0,#34h,labelP
17C5 75B0FB         3857                               mov           p3,#0fbh
17C8 30B7F4         3858                              jnb            p3.7,rlefcur
17CB 75B0F7         3859                              mov            p3,#0f7h
17CE 20B7EB         3860                              jb             p3.7,dgoto7
17D1 7635           3861                              mov            @r0,#35h
17D3 78B2           3862                              mov            r0,#marker
17D5 76FF           3863                              mov            @r0,#0ffh
                    3864                              ;T1<-число на индикаторе
                    3865                                               ;vvod КОН БЛ 000
17D7 78CF           3866                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
17D9 7630           3867                              mov            @r0,#30h  
17DB C20B           3868                              clr            bitmem
17DD D204           3869                              setb           bitizm;;;;      
17DF 020000   F     3870                             jmp        goto7
17E2 020000   F     3871     vodm11_15:                      jmp             vvodm11_15
17E5 020000   F     3872     me11_15de:                      jmp             me11_15dec
17E8 020000   F     3873     moutkmem:                               jmp             outkmem
                    3874     
17EB 020000   F     3875     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3876     ;обработка кнопки меню ввод
17EE 301138         3877     labelS:         jnb                     bitmenu,labelP
17F1 75B0EF         3878                                             mov                     p3,#0efh
17F4 30B7F4         3879                                             jnb                     p3.7,nmem_menu
17F7 75B0DF         3880                                             mov                     p3,#0dfh
17FA 30B7EB         3881                                             jnb                     p3.7,moutkmem
17FD 78B1           3882                                             mov                     r0,#vichR
17FF 7415           3883                                             mov                     a,#15h
1801 C3             3884                                             clr                     c
1802 96             3885                                             subb            a,@r0
1803 4021           3886                                             jc                      rme21_23
                    3887                             
1805 75B0FB         3888                                             mov                     p3,#0fbh
1808 20B7D7         3889                                             jb                      p3.7,vodm11_15
180B 78B1           3890                                             mov                     r0,#vichR
180D B611D5         3891                                             cjne                    @r0,#11h,me11_15de;<-
1810 7615           3892                                             mov                     @r0,#15h
1812 900000   F     3893                                             mov                     dptr,#teKALIB
1815 120000   F     3894                                             call            lotext
1818 020000   F     3895                                             jmp                     onmem11
181B C211           3896     menuon:         clr             bitmenu                 ;off menu
181D D204           3897                                             setb    bitizm
                    3898     
181F 78B1           3899                                     mov             r0,#vichR
1821 7600           3900                                     mov             @r0,#0
1823 020000   F     3901                                     jmp             onmem11
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    62

                    3902     
                    3903                                             ;;;;;
                    3904             
1826 020000   F     3905     rme21_23:               jmp             me21_23 
                    3906                             
                    3907     ;режим просмотра
1829 B64130         3908     labelP:                 cjne            @r0,#41h,govvlist
182C 7642           3909                                                     mov                     @r0,#42h
                    3910                                                     ;       считать с индикатора  
182E C3             3911                                             clr                     c
182F E547           3912                                mov          a,bufind+7      
1831 9430           3913                                      subb           a,#30h
1833 B40002         3914                                      cjne           a,#0,chaipr
1836 7401           3915                                      mov            a,#1
1838 F538           3916     chaipr:                          mov            nblok,a
183A 900000   F     3917                                mov          dptr,#teCH;ОТСЧЕТ 000
183D 120000   F     3918                                call         lotext
1840 534BEF         3919                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1843 78B2           3920                                mov          r0,#marker
1845 7607           3921                                mov          @r0,#7
1847 753B09         3922                                mov          movrig,#9
184A 753A07         3923                                mov          movleft,#7
184D 120000   F     3924                                             call            z_1s
1850 020000   F     3925                        jmp     goto7;outF
1853 020000   F     3926     label43:                jmp             label7
                    3927     
1856 020000   F     3928     rlist_43:                       jmp                     list_43                            
                                  
1859 020000   F     3929     mlabL2r:                        jmp                     mlabL2
185C B642F7         3930     govvlist:                       cjne            @r0,#42h,rlist_43
185F 75B0FB         3931                                                                     mov                     p3,
                             #0fbh
1862 30B7F4         3932                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
1865 75B0F7         3933                                                             mov                     p3,#0f7h
1868 20B7E8         3934                                                             jb                      p3.7,label4
                             3
186B 7643           3935                                                             mov                     @r0,#43h;vv
                             od 
186D 78B2           3936                                                             mov                     r0,#marker
186F 76FF           3937                                                             mov                     @r0,#0ffh
1871 7F0A           3938                                                                     mov             r7,#10
1873 7853           3939                                     mov             r0,#adec
1875 120000   F     3940                                     call    clearN
1878 120000   F     3941                                     call    upak3                   
187B 784F           3942                                     mov             r0,#abin
187D 7953           3943                                     mov             r1,#adec                        ;мл        
                              ст
187F 120000   F     3944                                     call    decbin                  ;abin..abin+3 (hex)
1882 120000   F     3945                                     call    loadr2                  ;r2..r5
1885 ED             3946                                     mov             a,r5                            ;сохр номер
                              лемента
1886 F537           3947                                     mov             nelem,a
1888 120402         3948                                     call    altof                   ;r2..r5->int
188B 900000   F     3949                                     mov             dptr,#ch_1;
188E 120000   F     3950                                     call    ldc_ltemp                       ;r8..r11
1891 1201D1         3951                                     call    flsub
1894 900000   F     3952                                     mov             dptr,#ch_4;
1897 120000   F     3953                                     call    ldc_ltemp                       ;r8..r11
189A 120203         3954                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
189D 120343         3955                                     call            ftol                    ;r2..r5->hex
18A0 C002           3956                                     push            rr2
18A2 C003           3957                                     push            rr3
18A4 C004           3958                                     push            rr4
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    63

18A6 C005           3959                                     push            rr5
18A8 120000   F     3960                                     call            adrblok;dptr-
18AB D005           3961                                     pop                     rr5
18AD D004           3962                                     pop                     rr4
18AF D003           3963                                     pop                     rr3
18B1 D002           3964                                     pop                     rr2
18B3 79D8           3965                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
18B5 E582           3966                                     mov                     a,dpl
18B7 2D             3967                                     add                     a,r5
18B8 F582           3968                                     mov                     dpl,a
18BA F7             3969                                     mov                     @r1,a           ;low
18BB E583           3970                                     mov                     a,dph
18BD 3C             3971                                     addc            a,r4
18BE F583           3972                                     mov                     dph,a
18C0 19             3973                                     dec                     r1
18C1 F7             3974                                     mov                     @r1,a                   ;high
                    3975                             
18C2                3976     li42_43:
18C2 120000   F     3977                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
18C5 900000   F     3978                                     mov             dptr,#ch10;
18C8 120000   F     3979                                     call    ldc_ltemp
18CB 120000   F     3980                                     call    zdiv    
                    3981                                     ;;;;;;;;;;;
18CE 120000   F     3982                                     call    maform
                    3983                                     ;;;;
                    3984     
                    3985                                     ;;;;;;;
18D1 784F           3986                                             mov             r0,#abin
18D3 120000   F     3987                                             call    saver2
18D6 7853           3988                                             mov             r0,#adec
18D8 7952           3989                                             mov             r1,#abin+3      ;hex->10
18DA 120000   F     3990                                             call    bindec
                    3991                                     
18DD 785C           3992                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
18DF 7945           3993                                             mov             r1,#bufind+5
18E1 7F07           3994                                             mov             r7,#7
18E3 E6             3995     ch43:                           mov             a,@r0
18E4 2430           3996                                             add             a,#30h
18E6 F7             3997                                             mov             @r1,a
18E7 19             3998                                             dec             r1
18E8 18             3999                                             dec             r0
18E9 DFF8           4000                                             djnz    r7,ch43
18EB 7847           4001                                             mov             r0,#bufind+7
18ED 762D           4002                                             mov             @r0,#2dh          ;-2..-9
18EF 7840           4003                                             mov             r0,#bufind
18F1 762B           4004                                             mov             @r0,#2bh
18F3 300202         4005                                             jnb             znmat,nozzmi43;bitznak,nozzmi
18F6 762D           4006                                             mov             @r0,#2dh
18F8 E538           4007     nozzmi43:       mov             a,nblok
18FA B40104         4008                                             cjne    a,#1,nozzmi1            
18FD 7934           4009                                             mov             r1,#sadiap;diap
18FF 8010           4010                                             jmp             nozzbl
1901 B40204         4011     nozzmi1:        cjne    a,#2,nozzmi2            
1904 7932           4012                                             mov             r1,#sadiap2;diap
1906 8009           4013                                             jmp             nozzbl
1908 B40304         4014     nozzmi2:        cjne    a,#3,nozzmi3            
190B 7931           4015                                             mov             r1,#sadiap3;diap
190D 8002           4016                                             jmp             nozzbl
190F 7930           4017     nozzmi3:        mov             r1,#sadiap4;diap
                    4018                                     
1911 7848           4019     nozzbl:         mov             r0,#bufind+8
1913 E7             4020                                             mov             a,@r1
1914 B40808         4021                                             cjne    a,#8,nodi8_43
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    64

1917 7630           4022                                             mov             @r0,#30h                 ;10-10
1919 18             4023                                             dec             r0
191A 7663           4024                                             mov             @r0,#63h;31h
191C 08             4025                                             inc             r0
191D 800E           4026                                             jmp             see_l43
191F B40908         4027     nodi8_43:       cjne    a,#9,nodi9_43
                    4028                                     
1922 7631           4029                                             mov             @r0,#31h           ;10-11
1924 18             4030                                             dec             r0
1925 7663           4031                                             mov             @r0,#63h;31h
                    4032                                     
1927 08             4033                                             inc             r0
1928 8003           4034                                             jmp             see_l43
192A 2432           4035     nodi9_43:               add             a,#32h
192C F6             4036                                             mov             @r0,a;
192D 08             4037     see_l43:                        inc             r0
192E 7641           4038                                             mov             @r0,#"A";"E";
                    4039                             ;       inc             r0
                    4040                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    4041                             ;       inc             r0;             mov             bufind+11
                    4042                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
1930 434B10         4043                             orl                     bufind+11,#10h
1933 120000   F     4044     out43:          call            ind
1936 120000   F     4045                                             call            z_1s
1939 020000   F     4046                                             jmp             out7                               
                                  
                    4047     
                    4048                                     ;;;;;;;;        
193C 783D           4049     label7: mov             r0,#chkl
193E 7604           4050                                     mov             @r0,#04;3
1940 08             4051                                     inc             r0
1941 76E8           4052                                     mov             @r0,#0e8h               ;1000
1943 020000   F     4053                                     jmp             out7;
1946 B64351         4054     list_43:                cjne    @r0,#43h,noli_43
1949 75B0FB         4055                                                     mov             p3,#0fbh                ;43
                             h <-
194C 20B70A         4056                                                     jb              p3.7,vvod43             ;vv
                             od
194F C20B           4057                                                     clr             bitmem
1951 D204           4058                                                     setb    bitizm
1953 78B2           4059                                                     mov             r0,#marker
1955 76FF           4060                                                     mov             @r0,#0ffh
1957 80E3           4061                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    4062     
1959 7644           4063     vvod43:                 mov             @r0,#44h
195B E537           4064                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
195D 04             4065                                                     inc             a
195E F552           4066                                                     mov             abin+3,a
                    4067                                                     
1960 F537           4068                                                     mov             nelem,a
1962 E4             4069                                                     clr             a
1963 F551           4070                                                     mov             abin+2,a
1965 F550           4071                                                     mov             abin+1,a
1967 F54F           4072                                                     mov             abin,a
                    4073                                             
1969 7853           4074                                             mov             r0,#adec
196B 7952           4075                                             mov             r1,#abin+3      ;hex->10
196D 120000   F     4076                                             call    bindec
1970 7840           4077                                             mov             r0,#bufind;почистить индикатор
1972 7F0A           4078                                             mov             r7,#10
1974 7420           4079                                             mov             a,#20h
1976 F6             4080     cle20:          mov             @r0,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    65

1977 08             4081                                             inc             r0
1978 DFFC           4082                                             djnz    r7,cle20
                    4083                                             ;;;;;;
197A 900000   F     4084                                             mov             dptr,#teCH;ОТСЧЕТ 000
197D 120000   F     4085                                call         lotext
1980 534BEF         4086                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1983 785C           4087                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1985 7949           4088                                             mov             r1,#bufind+9
1987 7F03           4089                                             mov             r7,#3
1989 E6             4090     ch43_42:                                mov             a,@r0
198A 2430           4091                                             add             a,#30h
198C F7             4092                                             mov             @r1,a
198D 19             4093                                             dec             r1
198E 18             4094                                             dec             r0
198F DFF8           4095                                             djnz    r7,ch43_42
1991 120000   F     4096                                             call            ind
1994 120000   F     4097                                             call            z_1s
1997 020000   F     4098                                             jmp             out7
199A B64419         4099     noli_43:        cjne            @r0,#44h,vvosta
199D 7643           4100                                             mov                     @r0,#43h
199F 79D8           4101                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
19A1 E7             4102                                                     mov                     a,@r1
19A2 F582           4103                                                     mov                     dpl,a
19A4 19             4104                                                     dec                     r1
19A5 E7             4105                                                     mov                     a,@r1;high
19A6 F583           4106                                                     mov                     dph,a
19A8 A3             4107                                                     inc                     dptr
19A9 A3             4108                                                     inc                     dptr
19AA A3             4109                                                     inc                     dptr
19AB A3             4110                                                     inc                     dptr
19AC E583           4111                                                     mov                     a,dph
19AE F7             4112                                                     mov                     @r1,a
19AF 09             4113                                                     inc                     r1
19B0 E582           4114                                                     mov                     a,dpl
19B2 F7             4115                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
19B3 020000   F     4116                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    4117     
19B6 B66111         4118     vvosta:                 cjne            @r0,#61h,vvostad
19B9 7662           4119                                                     mov                     @r0,#62h
19BB 900000   F     4120                                                     mov                     dptr,#teMAX;
19BE 120000   F     4121                                                     call            lotext
19C1 120000   F     4122                                                     call            vichmax
19C4 120000   F     4123                                                     call            z_05s;z_1s
19C7 020000   F     4124                                                     jmp             goto7
                    4125     
19CA B66211         4126     vvostad:                cjne            @r0,#62h,rousta
19CD 7663           4127                                                     mov                     @r0,#63h
19CF 900000   F     4128                                                     mov             dptr,#teMid;
19D2 120000   F     4129                                                     call    lotext
19D5 120000   F     4130                                                     call            vichmean
19D8 120000   F     4131                                                     call            z_05s
19DB 020000   F     4132                                                     jmp             goto7
                    4133     
19DE B6630E         4134     rousta:                 cjne            @r0,#63h,rousta1
19E1 7661           4135                                                     mov                     @r0,#61h
19E3 900000   F     4136                                                     mov             dptr,#teMin;
19E6 120000   F     4137                                                     call    lotext
19E9 120000   F     4138                                                     call            vichmin
19EC 120000   F     4139                                                     call            z_05s
19EF 020000   F     4140     rousta1:                jmp             goto7
                    4141     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    66

19F2 020000   F     4142     rLABELP:                jmp                     LABELP
19F5 78B1           4143     vvodm11_15:     mov                     r0,#vichR;vvod
19F7 75B0F7         4144                                                     mov                     p3,#0f7h
19FA 20B7F5         4145                                             jb                      p3.7,rLABELP;????
                    4146                                     
                    4147     
19FD B61115         4148                                             cjne                    @r0,#11h,tome21
1A00 7621           4149                                             mov                     @r0,#21h;vvod
1A02 900000   F     4150                                             mov                     dptr,#teTE11
1A05 120000   F     4151                                             call            lotext
1A08 534B03         4152                                             anl                     bufind+11,#03h ;погасить за
                             пятые
1A0B 020000   F     4153                                             jmp                     onmem11
                    4154     
1A0E 16             4155     me11_15dec:             dec             @r0                             ;<-
1A0F 120000   F     4156     lokame1:        call            lomenu
1A12 020000   F     4157                                             jmp                     onmem11
                    4158     
1A15 B61206         4159     tome21:         cjne                    @r0,#12h,tome13
                    4160                                             ;вкл тест интерфейса
1A18 020000   F     4161                                             jmp             testrs;??????????
1A1B 020000   F     4162                                             jmp                     onmem11
                    4163     
1A1E B6132A         4164     tome13:         cjne                    @r0,#13h,tome14
1A21 7631           4165                                             mov                     @r0,#31h
                    4166                                             
1A23 7A50           4167                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1A25 7B2C           4168                                             mov                     r3,#2ch
1A27 120454         4169                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1A2A E508           4170                                             mov                     a,r8
1A2C B4000E         4171                                             cjne            a,#00,skor19
1A2F 900000   F     4172                                             mov                     dptr,#teS57_6;57,6
1A32 120000   F     4173                                             call            lotext
1A35 434B80         4174                                     orl                     bufind+11,#80h
1A38 C213           4175                                             clr                     bitv19
                    4176     
1A3A 020000   F     4177                                             jmp             onmem11
1A3D 900000   F     4178     skor19:         mov                     dptr,#teS19_2
1A40 120000   F     4179                                             call            lotext
1A43 D213           4180                                             setb            bitv19
1A45 434B80         4181                                             orl                     bufind+11,#80h
1A48 020000   F     4182                                             jmp                     onmem11
                    4183                                             
                    4184     
1A4B B61415         4185     tome14:         cjne                    @r0,#14h,tome15
1A4E D204           4186                                             setb            bitizm
1A50 7881           4187                                             mov                     r0,#chavt
1A52 7600           4188                                             mov                     @r0,#0
1A54 08             4189                                             inc                     r0
1A55 7600           4190                                             mov                     @r0,#0
1A57 C211           4191     outmenu:        clr                     bitmenu
1A59 020000   F     4192                                             jmp                     out7
                    4193     
1A5C 78B1           4194     goparom:        mov             r0,#vichR               ;режим меню 52
1A5E 7652           4195                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
1A60 020000   F     4196                                             jmp                     goparol
1A63 2016F6         4197     tome15:         jb              bitpar,goparom  
1A66 7651           4198                                             mov                     @r0,#51h;ПАРОЛЬ 000
1A68 120000   F     4199                                             call            lomenu
1A6B 78B2           4200                                             mov                     r0,#marker
1A6D 7607           4201                                             mov                     @r0,#7
1A6F 753B09         4202                                             mov                     movrig,#9
1A72 753A07         4203                                             mov                     movleft,#7
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    67

                    4204                                             ;setb           bitizm
1A75 020000   F     4205                                             jmp                     onmem11
                    4206     
                    4207     
1A78 78B1           4208     me21_23:        mov                     r0,#vichR               ;<-
1A7A 7423           4209                                             mov                     a,#23h
1A7C C3             4210                                             clr                     c
1A7D 96             4211                                             subb            a,@r0
1A7E 403D           4212                                             jc                      labelS1
1A80 75B0FB         4213                                             mov                     p3,#0fbh
1A83 20B718         4214                                             jb                      p3.7,vv21_23
1A86 B6210B         4215                                             cjne            @r0,#21h,me21_23dec;-<
1A89 7623           4216                                             mov                     @r0,#23h
1A8B 900000   F     4217                                             mov                     dptr,#teTE7
1A8E 120000   F     4218                                             call            lotext
1A91 020000   F     4219                                             jmp                     onmem11
1A94                4220     me21_23dec:     
1A94 16             4221                                             dec                     @r0
1A95 120000   F     4222                                             call            lomenu
1A98 020000   F     4223                                             jmp                     onmem11
1A9B 020000   F     4224     onmem12:        jmp                     viout;  outF    ;(ie7)                          
                    4225                                                     
1A9E 75B0F7         4226     vv21_23:        mov             p3,#0f7h                ;vvod
1AA1 20B7F7         4227                                             jb              p3.7,onmem12
1AA4 B6210C         4228                                             cjne            @r0,#21h,test22
                    4229                                             ;mov                    dptr,#tabt11;заслать ус 11А
1AA7 120000   F     4230     tests:          call            lotpus
1AAA D215           4231                                             setb            biteizm;запомнить режим ТИ
1AAC D204           4232                                             setb            bitizm
1AAE C211           4233                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1AB0 020000   F     4234                                             jmp                     goto7;onmem11
1AB3 B62202         4235     test22:         cjne            @r0,#22h,test23
                    4236                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1AB6 80EF           4237                                             jmp             tests   
1AB8                4238     test23:
                    4239                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1AB8 80ED           4240                                             jmp             tests   
1ABA 020000   F     4241     left_s:         jmp                     left_sk
1ABD B63175         4242     labelS1:        cjne            @r0,#31h,me_41
1AC0 75B0FB         4243                                             mov                     p3,#0fbh                   
                                  ;<-
1AC3 30B7F4         4244                                             jnb                     p3.7,left_s
1AC6 75B0F7         4245                                             mov                     p3,#0f7h
1AC9 20B7CF         4246                                             jb                      p3.7,onmem12
                    4247                                             ;запомнить признак установленной скорости в рпзу
                    4248     
                    4249     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4250     ;и запись во внешнее озу(0000h)
1ACC 7900           4251                                             mov             r1,#0                   ;
1ACE 7A50           4252                                     mov             r2,#50h
1AD0 7B00           4253                                     mov             r3,#00
1AD2 120499         4254                                     call    copyPP
                    4255                                     ;внести изменения во внешн озу
                    4256                                     ;KD=00 01 86 A0 (KD=1)
                    4257                                     ;кофф *100000 и переведенный в hex формат
                    4258                                     ;согласно адресов диапазонов и адресов яч вн озу 
1AD5 792C           4259                                     mov             r1,#2ch
1AD7 7400           4260                                     mov             a,#0;57,6
1AD9 301302         4261                                     jnb             bitv19,spwri
1ADC 7401           4262                                     mov             a,#1;19.6
1ADE F3             4263     spwri:  movx    @r1,a
                    4264     ;стереть страницу пап прогр 
1ADF 905000         4265                                     mov             dptr,#5000h
1AE2 7FFF           4266                                     mov             r7,#0ffh
1AE4 12043E         4267                                     call    cle256
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    68

                    4268     ;и запись в ячейки кофф памяти прогр (3000h) 
1AE7 7FFF           4269                                     mov             r7,#0ffh
1AE9 7900           4270                                     mov             r1,#0                           ;external r
                             am
1AEB 905000         4271                                     mov             dptr,#5000h
1AEE 120480         4272                                     call    wrpage
                    4273             
1AF1 201305         4274                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1AF4 758DF4         4275                                             mov                     TH1,#244                ;57
                             .6
1AF7 8003           4276                                             jmp                     outsko
1AF9 758DDC         4277     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1AFC C211           4278     outsko:         clr             bitmenu
1AFE D204           4279                                             setb            bitizm
1B00 020000   F     4280                                             jmp                     out7
                    4281     
1B03 020000   F     4282     rlabels4:               jmp             labels4
1B06 020000   F     4283     rlabelS13:      jmp             labelS13
                    4284     
1B09 B652F7         4285     me_52:          cjne            @r0,#52h,rlabels4
1B0C 75B0FB         4286                                             mov                     p3,#0fbh;<-
1B0F 20B717         4287                                             jb                      p3.7,vv_52v     ;ввод в кал
                             ибровке
1B12 78B2           4288                                                     mov             r0,#marker              ;сд
                             виг маркера влево при калибр
1B14 7440           4289                                     mov             a,#bufind
1B16 26             4290                                             add             a,@r0                   ;a=bufind+m
                             arker
1B17 F9             4291                                             mov             r1,a
1B18 19             4292                                             dec             r1;inc          r1
1B19 873C           4293                                             mov             savba,@r1
                    4294                                                     
1B1B 78B2           4295                                             mov             r0,#marker
1B1D 16             4296                                             dec             @r0                             
1B1E C219           4297                                             clr             bitmig
1B20 E53A           4298                                             mov                     a,movleft
1B22 B60001         4299                                             cjne    @r0,#0,me_52v;ажата кн <- при вводе цифр ка
                             либровки
1B25 06             4300                                             inc                     @r0
1B26 020000   F     4301     me_52v:         jmp                     goto7
                    4302     
1B29 75B0F7         4303     vv_52v:         mov             p3,#0f7h
1B2C 30B703         4304                                             jnb             p3.7,rvvkali52
1B2F 020000   F     4305                                             jmp                     goto7
1B32 020000   F     4306     rvvkali52:      jmp             vvkali52
                    4307     
                    4308     
1B35 B651D1         4309     me_41:          cjne            @r0,#51h,me_52;rlabels4
1B38 75B0FB         4310                                             mov             p3,#0fbh;<-
1B3B 30B7C8         4311                                             jnb             p3.7,rlabelS13
1B3E 75B0F7         4312                                             mov             p3,#0f7h
1B41 20B773         4313                                             jb              p3.7,vvmenu
                    4314                                             ;ввод пароля
                    4315                                     
                    4316     ;       считать с индикатора 
1B44 7F0E           4317                                     mov             r7,#14
1B46 784F           4318                                     mov             r0,#abin
1B48 120000   F     4319                                     call    clearN                  
                    4320                                     
                    4321     ;чтение номера байта с индикатора(3байта)
                    4322     ;bufind+3..bufind+9
                    4323     ;-  - - -
                    4324     ;- - - - - - - - - -
                    4325     ;adec..adec+9
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    69

                    4326     ;ст            мл
1B4B 7849           4327                                     mov             r0,#bufind+9;
1B4D 795C           4328                                     mov             r1,#adec+9
1B4F 7F03           4329                                     mov             r7,#3;3bait
1B51 C3             4330     upav1:          clr             c
1B52 E6             4331                                     mov             a,@r0
1B53 9430           4332                                     subb    a,#30h
1B55 F7             4333                                     mov             @r1,a
1B56 18             4334                                     dec             r0
1B57 19             4335                                     dec             r1
1B58 DFF7           4336                                     djnz    r7,upav1;adec+7..adec+9
1B5A 7A50           4337                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1B5C 7B28           4338                                             mov                     r3,#28h
1B5E 120454         4339                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1B61 800F           4340     jmp                     goparol
1B63 E508           4341                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1B65 B55A52         4342                                     cjne            a,adec+7,parerr
1B68 E509           4343                                     mov                     a,r9    
1B6A B55B4D         4344                                     cjne            a,adec+8,parerr
1B6D E50A           4345                                     mov                     a,r10
1B6F B55C48         4346                                     cjne            a,adec+9,parerr
                    4347                                     ;равны
1B72 78B1           4348     goparol:        mov             r0,#vichR               ;режим меню 52
1B74 7652           4349                                             mov             @r0,#52h                ;0000-n
1B76 900000   F     4350                                             mov             dptr,#teKD;00000-nA
1B79 120000   F     4351                                             call            lotext
                    4352                                             ;;;;;;;;;
                    4353                                                     ;n(hex)->abin
1B7C 120000   F     4354                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1B7F 2552           4355                                             add             a,abin+3
1B81 F552           4356                                             mov             abin+3,a
1B83 7853           4357                                             mov             r0,#adec
1B85 7952           4358                                             mov             r1,#abin+3      ;hex->10
1B87 120000   F     4359                                             call    bindec
1B8A 855C48         4360                                             mov             bufind+8,adec+9
1B8D 75472D         4361                                             mov             bufind+7,#2dh
1B90 434A80         4362                                             orl                     bufind+10,#80h;зажечь KMП
1B93 434B10         4363                                             orl                     bufind+11,#10h;точка после 
                             1 знакоместа
1B96 79AE           4364                                             mov             r1,#diap
1B98 7848           4365                                             mov             r0,#bufind+8
1B9A E7             4366                                             mov             a,@r1
1B9B B40807         4367                                             cjne    a,#8,nodi8k
1B9E 7630           4368                                             mov             @r0,#30h                 ;10-10
1BA0 18             4369                                             dec             r0
1BA1 7663           4370                                             mov             @r0,#63h;31h
1BA3 8008           4371                                             jmp             nodisk9
1BA5 B40905         4372     nodi8k:                         cjne    a,#9,nodisk9
                    4373                                     
1BA8 7631           4374                                             mov             @r0,#31h           ;10-11
1BAA 18             4375                                             dec             r0
1BAB 7663           4376                                             mov             @r0,#63h;31h
                    4377                                     
                    4378     
1BAD 78B2           4379     nodisk9:        mov                     r0,#marker
1BAF 7601           4380                                             mov                     @r0,#1
1BB1 753A01         4381                                             mov                     movleft,#1
1BB4 753B05         4382                                             mov                     movrig,#5
                    4383                                             
1BB7 020000   F     4384     vvmenu:         jmp             goto7
                    4385     
1BBA 753932         4386     parerr:         mov                     nuerr,#32h
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    70

1BBD 120000   F     4387                                             call            error
1BC0 120000   F     4388                                             call            ind
1BC3 120000   F     4389                                             call            z_1s
1BC6 C211           4390                                             clr                     bitmenu
1BC8 D204           4391                                             setb            bitizm
1BCA 78B2           4392                                             mov                     r0,#marker
1BCC 76FF           4393                                             mov                     @r0,#0ffh
1BCE 020000   F     4394                                             jmp             goto7
                    4395     
1BD1 30130E         4396     left_sk:                jnb                     bitv19,tosk19;<-
1BD4 900000   F     4397                                             mov                     dptr,#teS57_6;57,6
1BD7 120000   F     4398                                             call            lotext
1BDA 434B80         4399                                             orl                     bufind+11,#80h
1BDD C213           4400                                             clr                     bitv19
1BDF 020000   F     4401                                             jmp                     onmem11;goto7
1BE2 900000   F     4402     tosk19:         mov                     dptr,#teS19_2
1BE5 120000   F     4403                                             call            lotext
1BE8 434B80         4404                                             orl                     bufind+11,#80h
1BEB D213           4405                                             setb            bitv19
1BED 020000   F     4406                                             jmp                     onmem11;goto7
                    4407     
1BF0                4408     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4409             
                    4410     ;;;;;;;;;;;;;;;;;;
                    4411     ;необходимо не портить цифру в следуюем слева знакоместе
                    4412     ;т е сохранить ее в ячейке для мигания в противном случае
                    4413     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4414     ;       знакоместа
1BF0 78B2           4415                                     mov             r0,#marker
1BF2 7440           4416                                     mov             a,#bufind
1BF4 26             4417                                             add             a,@r0                   ;a=bufind+m
                             arker
1BF5 F9             4418                                             mov             r1,a
1BF6 19             4419                                             dec             r1;inc          r1
1BF7 873C           4420                                             mov             savba,@r1
                    4421                                                     
1BF9 78B2           4422                                                     mov             r0,#marker
1BFB 16             4423                                                     dec             @r0                        
                                  
1BFC C219           4424                                     clr             bitmig
1BFE E53A           4425                                     mov                     a,movleft
1C00 B60652         4426                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1C03 06             4427                                     inc             @r0
1C04 020000   F     4428                                             jmp             goto7
                    4429     ;;;;;;;
                    4430     
1C07                4431     vvkali52:       ;введено значение для калибровки
                    4432                                             ;число на индикаторе ->Ak  (52h)
                    4433                                             ;       считать с индикатора 
1C07 7F0E           4434                                     mov             r7,#14
1C09 784F           4435                                     mov             r0,#abin
1C0B 120000   F     4436                                     call    clearN                  
                    4437                                     
                    4438     ;чтение номера байта с индикатора(3байта)
                    4439     ;bufind+1..bufind+5
                    4440     ;-  - - -
                    4441     ;- - - - - - - - - -
                    4442     ;adec..adec+9
                    4443     ;ст            мл
1C0E 7845           4444                                     mov             r0,#bufind+5;
1C10 795C           4445                                     mov             r1,#adec+9
1C12 7F05           4446                                     mov             r7,#5;5bait
1C14 C3             4447     upav2:          clr             c
1C15 E6             4448                                     mov             a,@r0
1C16 9430           4449                                     subb    a,#30h
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    71

1C18 F7             4450                                     mov             @r1,a
1C19 18             4451                                     dec             r0
1C1A 19             4452                                     dec             r1
1C1B DFF7           4453                                     djnz    r7,upav2;adec+7..adec+9
                    4454     
1C1D 784F           4455                                     mov             r0,#abin
1C1F 7953           4456                                     mov             r1,#adec                        ;мл        
                              ст
1C21 120000   F     4457                                     call    decbin                  ;abin..abin+3 (hex)
1C24 120000   F     4458                                     call    loadr2                  ;r2..r5
1C27 120402         4459                                     call    altof   ;r2..r5->float
1C2A 900000   F     4460                                     mov     dptr,#ch_10;10
1C2D 120000   F     4461                                     call    ldc_ltemp                       ;r8..r11=8
1C30 120203         4462                                     call    flmul
1C33 78A4           4463                                     mov             r0,#rez_Ak
1C35 120000   F     4464                                     call    saver2
1C38 C211           4465                                             clr                     bitmenu
1C3A D212           4466                                             setb            bitklb
1C3C 434A80         4467                                             orl                     bufind+10,#80h;зажечь KMП
1C3F D204           4468                                             setb            bitizm;бит калибровки уже установле
                             н
1C41 78B2           4469                                             mov                     r0,#marker
1C43 76FF           4470                                             mov                     @r0,#0ffh
1C45 783D           4471                                     mov             r0,#chkl
1C47 76FF           4472                                     mov             @r0,#0ffh
1C49 08             4473                                     inc             r0
1C4A 76FF           4474                                     mov             @r0,#0ffh;38h
1C4C 120000   F     4475                                     call            z_1s
1C4F 020000   F     4476                                     jmp             out7
                    4477     
                    4478     
1C52 020000   F     4479                                             jmp             goto7
                    4480                                              
1C55 020000   F     4481     onmem13:        jmp             goto7   ;(ie7)
                    4482     
1C58 B642AC         4483     labels4:        cjne            @r0,#42h,vvkali52
1C5B 75B0FB         4484                                             mov                     p3,#0fbh;<-
1C5E 30B7F4         4485                                             jnb             p3.7,onmem13
1C61 75B0F7         4486                                             mov             p3,#0f7h;vvod
1C64 20B7EE         4487                                             jb              p3.7,onmem13
                    4488                                             
                    4489             
1C67 020000   F     4490     jmp             out7                                                    
                    4491     ;;;;;;;
1C6A                4492     labelI:
1C6A 75B0FE         4493                                     mov             p3,#0feh
1C6D E5B0           4494                                     mov             a,p3
1C6F 20E703         4495                                     jb              acc.7,nopoint
                    4496                                     ;
1C72 020000   F     4497                                     jmp             goto7;out7
                    4498     
1C75 75B0FB         4499     nopoint:                mov             p3,#0fbh
1C78 E5B0           4500                                     mov             a,p3
1C7A 20E72C         4501                                     jb              acc.7,nopoin7
1C7D 78B2           4502     labelS3:mov             r0,#marker
1C7F E53A           4503                                     mov             a,movleft
1C81 B40309         4504                                     cjne    a,#3,poina1
1C84 B6030B         4505                                     cjne    @r0,#3,nomarl;26
                    4506                                     ;mov            @r0,#9
1C87 E53B           4507     poina2: mov                     a,movrig                ;кн <- B=+00000
1C89 F6             4508                                     mov                     @r0,a
1C8A 020000   F     4509                                     jmp             goto7;  out7
                    4510     
1C8D B60402         4511     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1C90 80F5           4512                                             jmp             poina2
                    4513     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    72

                    4514     
1C92                4515     nomarl:                 ;                               29.12.06
                    4516     ;;;;;;;;;;;;;;;;;;
                    4517     ;необходимо не портить цифру в следуюем справа знакоместе
                    4518     ;т е сохранить ее в ячейке для мигания в противном случае
                    4519     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4520     ;       знакоместа
1C92 78B2           4521                                     mov             r0,#marker
1C94 7440           4522                                     mov             a,#bufind
1C96 26             4523                                             add             a,@r0                   ;a=bufind+m
                             arker
1C97 F9             4524                                             mov             r1,a
1C98 09             4525                                             inc             r1
1C99 873C           4526                                             mov             savba,@r1
                    4527                                                     
1C9B 78B2           4528                                                     mov             r0,#marker
1C9D 16             4529                                                     dec             @r0                        
                                  
1C9E C219           4530                                     clr             bitmig
1CA0 E53A           4531                                     mov                     a,movleft
1CA2 B4036B         4532                                     cjne            a,#3,poinA
1CA5 B60266         4533                                     cjne    @r0,#2,gogo7;out7;;нажата кн <- при вводе цифр B=+0
                             0000
1CA8 06             4534     poin3:  inc             @r0
                    4535     ;нажат ввод А =000000 запомнить константу А
1CA9 75B0F7         4536     nopoin7:           mov          p3,#0f7h
1CAC E5B0           4537                                     mov             a,p3
1CAE 20E75D         4538                                     jb              acc.7,gogo7;out7
1CB1 78B1           4539                                     mov             r0,#vichR
1CB3 E6             4540                                     mov             a,@r0
1CB4 B6215E         4541                                     cjne    @r0,#21h,no21p7
1CB7 7611           4542                                     mov             @r0,#11h
                    4543                             ;       считать с индикатора  упаковать в плавающий формат
                    4544                             ;   сохранить
1CB9 7F0E           4545                                     mov             r7,#14
1CBB 784F           4546                                     mov             r0,#abin
1CBD 120000   F     4547                                     call    clearN                  
1CC0 120000   F     4548                                     call    upakA
                    4549                                     
1CC3 784F           4550                                     mov             r0,#abin
1CC5 7953           4551                                     mov             r1,#adec                        ;мл        
                              ст
1CC7 120000   F     4552                                     call    decbin                  ;abin..abin+3 (hex)
1CCA 120000   F     4553                                     call    loadr2                  ;r2..r5
1CCD 120402         4554                                     call    altof                   ;r2..r5->float
1CD0 78BC           4555                                     mov                     r0,#konstA
1CD2 120000   F     4556                                     call            saver2
1CD5 900000   F     4557                                     mov                     dptr,#ch0
1CD8 120000   F     4558                                     call            ldc_ltemp
1CDB 1201D6         4559                                     call            flcmp
1CDE 6010           4560                                     jz              erra0
                    4561     ;26
1CE0 78B2           4562                                     mov             r0,#marker
1CE2 76FF           4563                                     mov             @r0,#0ffh
                    4564                                     
1CE4 900000   F     4565                                     mov             dptr,#teVICH;teBequ0
1CE7 120000   F     4566                                     call    lotext
                    4567                             ;       call            outB
1CEA 534BBF         4568                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4569                             ;       orl             bufind+11,#80h
1CED 020000   F     4570                                     jmp             goto7
                    4571     
1CF0 78B2           4572     erra0:          mov             r0,#marker
1CF2 76FF           4573                                             mov             @r0,#0ffh
1CF4 753934         4574                                             mov                     nuerr,#34h;константа не дол
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    73

                             жна быть равна0
1CF7 120000   F     4575                                             call            error
1CFA 120000   F     4576                                             call            ind
1CFD 120000   F     4577                                             call            z_1s
1D00 78B1           4578                                             mov                     r0,#vichR
1D02 7600           4579                                             mov                     @r0,#0
1D04 C214           4580                                             clr                     bitvich
1D06 C206           4581                                             clr                     bitvi11
1D08 D204           4582                                             setb            bitizm
1D0A 78B2           4583                                             mov                     r0,#marker
1D0C 76FF           4584                                             mov                     @r0,#0ffh
1D0E 802E           4585     gogo7:          jmp                     out7;goto7
                    4586     
1D10 B6032B         4587     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1D13 8093           4588                                             jmp             poin3
                    4589     
1D15                4590     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4591                             ;   сохранить
1D15 7F0E           4592                                     mov             r7,#14
1D17 784F           4593                                     mov             r0,#abin
1D19 120000   F     4594                                     call    clearN                  
1D1C 120000   F     4595                                     call    upakB                   
1D1F 784F           4596                                     mov             r0,#abin
1D21 7953           4597                                     mov             r1,#adec                        ;мл        
                              ст
1D23 120000   F     4598                                     call    decbin                  ;abin..abin+3 (hex)
1D26 120000   F     4599                                     call    loadr2                  ;r2..r5
1D29 120402         4600                                     call    altof                   ;r2..r5->int
1D2C 301B04         4601                                     jnb             bitznB,pozB
1D2F EA             4602                                     mov             a,r2
1D30 4480           4603                                     orl             a,#80h
1D32 FA             4604                                     mov             r2,a                    ;знак-
1D33                4605     pozB:           ;mov            r0,#konstB
                    4606                                     ;call   saver2
                    4607     
1D33 79B2           4608                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1D35 77FF           4609                                     mov             @r1,#0ffh
1D37 78B1           4610                                     mov             r0,#vichR
1D39 7611           4611                                     mov             @r0,#11h
1D3B 020000   F     4612                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4613                                     
                    4614     
1D3E                4615     out7:                   ;mov            IE,#80h
1D3E D083           4616                                     pop             dph
1D40 D082           4617                                     pop             dpl
1D42 D007           4618                                     pop             rr7     
1D44 D006           4619                                     pop             rr6
1D46 D005           4620                                     pop             rr5
1D48 D004           4621                                     pop             rr4
1D4A D003           4622                                     pop             rr3
1D4C D002           4623                                     pop             rr2
1D4E D001           4624                                     pop             rr1                             
1D50 D000           4625                                     pop             rr0
1D52 D0D0           4626                                     pop             psw
1D54 D0E0           4627                                     pop             acc
1D56 75AD00         4628                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1D59 75B0C0         4629                             mov             P3,#0c0h
                    4630                             ;       mov             EIE2,#30H
1D5C C219           4631     clr             bitmig
1D5E E586           4632                                             mov             a,P6            ;p6.4=0
1D60 54EF           4633                             anl             a,#0efh
1D62 F586           4634                             mov             P6,a
1D64 00             4635                             nop
1D65 00             4636                             nop
                    4637                                     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    74

1D66 E586           4638                             mov             a,P6                    ;p6.4=1 
1D68 4410           4639                             orl             a,#10h
1D6A F586           4640                             mov             P6,a
                    4641                             ;;;;;;;;;
1D6C E5DA           4642                             mov             a,PCA0CPM0;             TOG0
1D6E 4446           4643                             orl             a,#46h;anl              a,#0fbh
1D70 F5DA           4644                             mov             PCA0CPM0,a
                    4645     
1D72 75CDD0         4646                             mov             TH2,#0d0h
1D75 75CC00         4647                             mov             TL2,#00
                    4648     
1D78 D2CA           4649                             setb            T2CON.2
1D7A D2AD           4650                             setb            ET2;IE.5
                    4651                                                         
1D7C 32             4652                                     reti
                    4653     
                    4654     
                    4655                                     
                    4656     
                    4657     
1D7D 78B1           4658     lomenu:         mov             r0,#vichR
1D7F B61107         4659                                             cjne    @r0,#11h,menu12
1D82 900000   F     4660                                             mov             dptr,#teTESI
1D85 120000   F     4661     lome1:                  call    lotexT
1D88 22             4662                                             ret
1D89 B61205         4663     menu12:         cjne    @r0,#12h,menu13
1D8C 900000   F     4664                                             mov             dptr,#teTESR
1D8F 80F4           4665                                             jmp             lome1
1D91 B61305         4666     menu13:         cjne    @r0,#13h,menu14
1D94 900000   F     4667                                             mov             dptr,#teSKOR
1D97 80EC           4668                                             jmp             lome1
1D99 B61405         4669     menu14:         cjne    @r0,#14h,menu15
1D9C 900000   F     4670                                             mov             dptr,#teAVK
1D9F 80E4           4671                                             jmp             lome1
1DA1 B61505         4672     menu15:                 cjne    @r0,#15h,menu21
1DA4 900000   F     4673                                             mov             dptr,#teKALIB
1DA7 80DC           4674                                             jmp             lome1
                    4675     
1DA9 B62105         4676     menu21: cjne    @r0,#21h,menu22
1DAC 900000   F     4677                                             mov             dptr,#teTE11
1DAF 80D4           4678                                             jmp             lome1
1DB1 B62205         4679     menu22:         cjne    @r0,#22h,menu23
1DB4 900000   F     4680                                             mov             dptr,#teTE9
1DB7 80CC           4681                                             jmp             lome1
1DB9 B62305         4682     menu23:         cjne    @r0,#23h,menu31
1DBC 900000   F     4683                                             mov             dptr,#teTE7
1DBF 80C4           4684                                             jmp             lome1
1DC1 B63105         4685     menu31:         cjne    @r0,#31h,menu41
1DC4 900000   F     4686                                             mov             dptr,#teS57_6
1DC7 80BC           4687                                             jmp             lome1
                    4688     
1DC9                4689     menu41:         
1DC9 900000   F     4690                                             mov             dptr,#tePAR
1DCC 80B7           4691                                             jmp             lome1
                    4692     
1DCE 020000   F     4693     yesvi_kr:               jmp                     yesvi_km
1DD1                4694     endkalib:;KD=Ak/A3
1DD1 200DFA         4695                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1DD4 789C           4696                                             mov                     r0,#rez_A3
1DD6 120000   F     4697                                             call            resar2
                    4698                                     
1DD9 120402         4699                                     call    altof                   ;->float
1DDC EA             4700                                             mov                     a,r2
1DDD 547F           4701                                             anl                     a,#7fh
1DDF FA             4702                                             mov                     r2,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    75

1DE0 120000   F     4703                                     call            move28
1DE3 78A4           4704                                             mov                     r0,#rez_Ak
1DE5 120000   F     4705                                             call            resar2
1DE8 1202B7         4706                                             call            fldiv
                    4707                                                     
1DEB 900000   F     4708                                     mov     dptr,#CHtho;100000
1DEE 120000   F     4709                                     call    ldc_ltemp                       ;r8..r11=8
1DF1 120203         4710                                     call    flmul
1DF4 120343         4711                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4712     
1DF7 78A0           4713                                             mov                     r0,#koefKD
1DF9 120000   F     4714                                             call            saver2
                    4715                                             ;запись в рпзу в соотв ячейку
                    4716                             
1DFC 7900           4717                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1DFE 7A50           4718                                     mov             r2,#50h
1E00 7B00           4719                                     mov             r3,#00
1E02 120499         4720                                     call    copyPP
                    4721                                     ;внести изменения во внешн озу
1E05 120000   F     4722                                     call            findext                 ;r1-внешн озу
1E08 78A0           4723                                     mov                     r0,#koefKD
1E0A 120000   F     4724                                             call            resar2
1E0D EA             4725                                             mov                     a,r2
1E0E F3             4726                                             movx            @r1,a
1E0F 09             4727                                             inc                     r1
1E10 EB             4728                                             mov                     a,r3
1E11 F3             4729                                             movx            @r1,a
1E12 09             4730                                             inc                     r1
1E13 EC             4731                                             mov                     a,r4
1E14 F3             4732                                             movx            @r1,a
1E15 09             4733                                             inc                     r1
1E16 ED             4734                                             mov                     a,r5
1E17 F3             4735                                             movx            @r1,a
                    4736                                     ;кофф *100000 и переведенный в hex формат
                    4737                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4738     ;стереть страницу пап прогр 
1E18 905000         4739                                     mov             dptr,#5000h
1E1B 7FFF           4740                                     mov             r7,#0ffh
1E1D 12043E         4741                                     call    cle256
                    4742     ;и запись в ячейки кофф памяти прогр (3000h) 
1E20 7FFF           4743                                     mov             r7,#0ffh
1E22 7900           4744                                     mov             r1,#0                           ;external r
                             am
1E24 905000         4745                                     mov             dptr,#5000h
1E27 120480         4746                                     call    wrpage
                    4747     ;2.2.07
1E2A 79AE           4748                                     mov                     r1,#diap
1E2C B70511         4749                                     cjne            @r1,#5,fulkalib
                    4750                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1E2F D20D           4751                                     setb            bifl_kt
                    4752                                     ;call           loadus
1E31 900000   F     4753                                     mov                     dptr,#tabt7;заслать ус 7А       
1E34 E4             4754                             clr             a
1E35 93             4755                             movc    a,@a+dptr                               ;high byte
1E36 F584           4756                             mov             p4,a
1E38 A3             4757                             inc             dptr
1E39 E4             4758                             clr             a
1E3A 93             4759                             movc    a,@a+dptr                               ;low byte
1E3B F585           4760                             mov             p5,a
1E3D 020000   F     4761                                     jmp             goto7;  out_kali
                    4762     
                    4763     ;;;
1E40                4764     fulkalib:
1E40 C212           4765                                             clr             bitklb
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    76

1E42 D216           4766                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1E44 900000   F     4767                                             mov             dptr,#teEND
1E47 120000   F     4768                                             call    lotext
1E4A 120000   F     4769                                             call    ind
1E4D 120000   F     4770     out_kali:       call    z_1s
1E50 120000   F     4771                                             call    z_1s
1E53 020000   F     4772                                             jmp             goto7
1E56                4773     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1E56 7A50           4774                                     mov                     r2,#50h                 ;-11a
1E58 7B14           4775                                     mov                     r3,#14h                 ;k7
1E5A 12046C         4776                                     call            rebyte2                         ;r2..r5- he
                             x
1E5D 120402         4777                                     call            altof                   ;r2..r5->float
1E60 C002           4778                                     push            rr2
1E62 C003           4779                                     push            rr3
1E64 C004           4780                                     push            rr4
1E66 C005           4781                                     push            rr5
1E68 7A50           4782                                     mov                     r2,#50h                 ;k5
1E6A 7B0C           4783                                     mov                     r3,#0ch
1E6C 12046C         4784                             call            rebyte2                 ;r2..r5
1E6F 120402         4785                                     call            altof                   ;r2..r5->float
1E72 120000   F     4786                                     call            move28
1E75 D005           4787                                     pop                     rr5
1E77 D004           4788                                     pop                     rr4
1E79 D003           4789                                     pop                     rr3
1E7B D002           4790                                     pop                     rr2
1E7D 1202B7         4791                                     call            fldiv                   ;K7/K5
                    4792     
1E80 900000   F     4793                                     mov     dptr,#CHtho;100000
1E83 120000   F     4794                                     call    ldc_ltemp                       ;r8..r11=8
1E86 120203         4795                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1E89 C002           4796                                     push            rr2
1E8B C003           4797                                     push            rr3
1E8D C004           4798                                     push            rr4
1E8F C005           4799                                     push            rr5
                    4800                                     
1E91 789C           4801                                     mov                     r0,#rez_A3
1E93 120000   F     4802                                     call            resar2
1E96 120402         4803                                     call            altof                           ;r2..r5->fl
                             oat
1E99 120000   F     4804                                     call            move28
1E9C D005           4805                                     pop                     rr5
1E9E D004           4806                                     pop                     rr4
1EA0 D003           4807                                     pop                     rr3
1EA2 D002           4808                                     pop                     rr2
1EA4 1202B7         4809                               call          fldiv           ;Km     
                    4810     
1EA7 900000   F     4811                                     mov     dptr,#CHtho;100000
1EAA 120000   F     4812                                     call    ldc_ltemp                       ;r8..r11=8
1EAD 120203         4813                                     call    flmul                           ;r2..r5
1EB0 120343         4814                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1EB3 78A0           4815                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1EB5 120000   F     4816                                     call            saver2
                    4817                                     ;запись в рпзу в соотв ячейку
1EB8 7900           4818                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1EBA 7A50           4819                                     mov             r2,#50h
1EBC 7B00           4820                                     mov             r3,#00
1EBE 120499         4821                                     call    copyPP
                    4822                                     ;внести изменения во внешн озу
1EC1 78A0           4823                                     mov                     r0,#koefKD
1EC3 120000   F     4824                                     call            resar2
1EC6 792C           4825                                     mov                     r1,#2ch                 ;r1-внешн о
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    77

                             зу кофф Km
                    4826                             
1EC8 EA             4827                                     mov                     a,r2
1EC9 F3             4828                                             movx            @r1,a
1ECA 09             4829                                             inc                     r1
1ECB EB             4830                                             mov                     a,r3
1ECC F3             4831                                             movx            @r1,a
1ECD 09             4832                                             inc                     r1
1ECE EC             4833                                             mov                     a,r4
1ECF F3             4834                                             movx            @r1,a
1ED0 09             4835                                             inc                     r1
1ED1 ED             4836                                             mov                     a,r5
1ED2 F3             4837                                             movx            @r1,a
                    4838                                     ;кофф *100000 и переведенный в hex формат
                    4839                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4840     ;стереть страницу пап прогр 
1ED3 905000         4841                                     mov             dptr,#5000h
1ED6 7FFF           4842                                     mov             r7,#0ffh
1ED8 12043E         4843                                     call    cle256
                    4844     ;и запись в ячейки кофф памяти прогр (3000h) 
1EDB 7FFF           4845                                     mov             r7,#0ffh
1EDD 7900           4846                                     mov             r1,#0                           ;external r
                             am
1EDF 905000         4847                                     mov             dptr,#5000h
1EE2 120480         4848                                     call    wrpage
                    4849     
1EE5 C20D           4850                                             clr             bifl_kt
1EE7 120000   F     4851                                             call    loadus
1EEA 020000   F     4852                                             jmp             fulkalib
                    4853     
                    4854     ;выч среднего по блоку
                    4855     ;вых r2..r5
1EED                4856     vichmean:       
                    4857                                             ;;;;;;;;;;
1EED 120000   F     4858                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1EF0 E582           4859                                             mov                     a,dpl
1EF2 FF             4860                                             mov                     r7,a
1EF3 E583           4861                                             mov                     a,dph
1EF5 FE             4862                                             mov                     r6,a
1EF6 120000   F     4863                                             call            resa_hl;save_bl->dptr
                    4864     
1EF9 C3             4865                                                     clr             c; в начало блока?
1EFA E582           4866                                                     mov                     a,dpl
1EFC 9F             4867                                                     subb            a,r7
1EFD FF             4868                                                     mov                     r7,a
1EFE 7006           4869                                                     jnz                     oldmean
1F00 E583           4870                                                     mov                     a,dph
1F02 9E             4871                                                     subb            a,r6
1F03 FE             4872                                                     mov                     r6,a
1F04 6065           4873                                                     jz                      outmea;
                    4874     ;;;;;;;;;;
1F06                4875     oldmean:
1F06 120000   F     4876                                             call            resa_hl;save_bl->dptr
1F09 78D7           4877                                             mov                     r0,#copy_hl
1F0B E583           4878                                             mov                     a,dph
1F0D F6             4879                                             mov                     @r0,a
1F0E 08             4880                                             inc                     r0
1F0F E582           4881                                             mov                     a,dpl
1F11 F6             4882                                             mov                     @r0,a
1F12 78B8           4883                                             mov                     r0,#work
1F14 120000   F     4884                                             call            clear4
1F17 78D6           4885                                             mov                     r0,#chblok;volume
1F19 7600           4886                                             mov                     @r0,#0
1F1B 120000   F     4887     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1F1E E582           4888                                             mov                     a,dpl
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    78

1F20 FF             4889                                             mov                     r7,a
1F21 E583           4890                                             mov                     a,dph
1F23 FE             4891                                             mov                     r6,a
                    4892     
1F24 78D7           4893                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1F26 E6             4894                                             mov                     a,@r0
1F27 F583           4895                                             mov                     dph,a
1F29 08             4896                                             inc                     r0
1F2A E6             4897                                             mov                     a,@r0
1F2B F582           4898                                             mov                     dpl,a
                    4899                                             
1F2D C3             4900                                             clr                     c;-4
1F2E E582           4901                                             mov                     a,dpl
1F30 9404           4902                                             subb            a,#4
1F32 F582           4903                                             mov                     dpl,a
1F34 E583           4904                                             mov                     a,dph
1F36 9400           4905                                             subb            a,#0
1F38 F583           4906                                             mov                     dph,a;dptr-4
                    4907                                             ;;;;;;;;
1F3A 79D7           4908                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1F3C E583           4909                                                     mov             a,dph
1F3E F7             4910                                               mov           @r1,a
1F3F 09             4911                                                     inc             r1
1F40 E582           4912                                                     mov             a,dpl
1F42 F7             4913                                                     mov             @r1,a
                    4914                                                     ;;;;;;;;;
1F43 C3             4915                                                     clr             c;пришли в начало блока?
1F44 E582           4916                                                     mov                     a,dpl
1F46 9F             4917                                                     subb            a,r7
1F47 FF             4918                                                     mov                     r7,a
1F48 7006           4919                                                     jnz                     nextmea
1F4A E583           4920                                                     mov                     a,dph
1F4C 9E             4921                                                     subb            a,r6
1F4D FE             4922                                                     mov                     r6,a
1F4E 601B           4923                                                     jz                      outmea;
                    4924                                                     
                    4925                                                     ;продолжаем сравнение
                    4926                                                     ;;;;;;;;;;;             
1F50 120000   F     4927     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1F53 120402         4928                                             call            altof;->float
1F56 120000   F     4929                                             call            move28                  ;r8..r11
1F59 78B8           4930                                             mov                     r0,#work
1F5B 120000   F     4931                                             call            resar2
1F5E 120166         4932                                             call            fladd
1F61 78B8           4933                                             mov                     r0,#work
1F63 120000   F     4934                                             call            saver2
1F66 78D6           4935                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1F68 06             4936                                             inc                     @r0
1F69 80B0           4937                                             jmp                     meng
1F6B                4938     outmea:         
1F6B 120000   F     4939                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1F6E 120402         4940                                             call            altof;->float
1F71 120000   F     4941                                             call            move28                  ;r8..r11
1F74 78B8           4942                                             mov                     r0,#work
1F76 120000   F     4943                                             call            resar2
1F79 120166         4944                                             call            fladd
1F7C 78B8           4945                                             mov                     r0,#work
1F7E 120000   F     4946                                             call            saver2
1F81 E4             4947                                             clr                     a
1F82 FA             4948                                             mov                     r2,a
1F83 FB             4949                                             mov                     r3,a
1F84 FC             4950                                             mov                     r4,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    79

1F85 78D6           4951                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1F87 E6             4952                                             mov                     a,@r0
1F88 2401           4953                                             add                     a,#1
1F8A FD             4954                                             mov                     r5,a
1F8B 120402         4955                                             call            altof;r2..r5 float
1F8E 120000   F     4956                                             call            move28
1F91 78B8           4957                                             mov                     r0,#work
1F93 120000   F     4958                                             call            resar2
1F96 1202B7         4959                                             call            fldiv
1F99 900000   F     4960                                             mov                     dptr,#ch_10      
1F9C 120000   F     4961                                     call            ldc_ltemp
1F9F 1202B7         4962                                     call            fldiv
1FA2 120343         4963                                             call            ftol                            ;->
                             hex
1FA5 120000   F     4964                                             call    maform
1FA8 784F           4965                                             mov             r0,#abin
1FAA 120000   F     4966                                             call    saver2
                    4967     ;;;;;;;;
                    4968                                             
1FAD 7853           4969                                             mov             r0,#adec
1FAF 7952           4970                                             mov             r1,#abin+3      ;hex->10
1FB1 120000   F     4971                                             call    bindec
                    4972                                     
1FB4 785C           4973                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1FB6 7949           4974                                             mov             r1,#bufind+9
1FB8 7F05           4975                                             mov             r7,#5
1FBA E6             4976     bufmea:                         mov             a,@r0
1FBB 2430           4977                                             add             a,#30h
1FBD F7             4978                                             mov             @r1,a
1FBE 19             4979                                             dec             r1
1FBF 18             4980                                             dec             r0
1FC0 DFF8           4981                                             djnz    r7,bufmea
1FC2 7844           4982                                             mov             r0,#bufind+4
1FC4 762B           4983                                             mov             @r0,#2bh          
1FC6 300202         4984                                             jnb             znmat,nozmea
1FC9 762D           4985                                             mov             @r0,#2dh
1FCB 434B05         4986     nozmea:         orl             bufind+11,#05h
1FCE 22             4987                                             ret
                    4988     
                    4989     
1FCF E0             4990     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1FD0 FA             4991                                             mov                     r2,a
1FD1 A3             4992                                             inc                     dptr
1FD2 E0             4993                                             movx            a,@dptr
1FD3 FB             4994                                             mov                     r3,a
1FD4 A3             4995                                             inc                     dptr
1FD5 E0             4996                                             movx            a,@dptr
1FD6 FC             4997                                             mov                     r4,a
1FD7 A3             4998                                             inc                     dptr
1FD8 E0             4999                                             movx            a,@dptr
1FD9 FD             5000                                             mov                     r5,a    
1FDA 22             5001                                             ret
                    5002     
1FDB C3             5003     min4_hl:        clr                     c;-4
1FDC E582           5004                                             mov                     a,dpl
1FDE 9404           5005                                             subb            a,#4
1FE0 F582           5006                                             mov                     dpl,a
1FE2 E583           5007                                             mov                     a,dph
1FE4 9400           5008                                             subb            a,#0
1FE6 F583           5009                                             mov                     dph,a;dptr-4
1FE8 22             5010                                             ret
                    5011     
1FE9 020000   F     5012     routmin:                jmp             outmin
                    5013     ;мин значение по по блоку
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    80

1FEC                5014     vichmin:        ;;;;;;;;;;
1FEC 120000   F     5015                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
1FEF E582           5016                                             mov                     a,dpl
1FF1 FF             5017                                             mov                     r7,a
1FF2 E583           5018                                             mov                     a,dph
1FF4 FE             5019                                             mov                     r6,a
1FF5 120000   F     5020                                             call            resa_hl;save_bl->dptr
                    5021     
1FF8 C3             5022                                                     clr             c; в начало блока?
1FF9 E582           5023                                                     mov                     a,dpl
1FFB 9F             5024                                                     subb            a,r7
1FFC FF             5025                                                     mov                     r7,a
1FFD 7006           5026                                                     jnz                     oldmin
1FFF E583           5027                                                     mov                     a,dph
2001 9E             5028                                                     subb            a,r6
2002 FE             5029                                                     mov                     r6,a
2003 60E4           5030                                                     jz                      routmin;
                    5031     ;;;;;;;;;;
2005                5032     oldmin:
2005 120000   F     5033                                             call            resa_hl;save_bl->dptr
                    5034                                                                                     
                    5035     ;с конца блока адрес 2го измерение
2008 120000   F     5036                                             call            min4_hl
                    5037                                             
200B 78B8           5038                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5039                                             
200D E0             5040                                             movx            a,@dptr
200E F6             5041                                             mov                     @r0,a
200F 08             5042                                             inc                     r0
2010 A3             5043                                             inc                     dptr
2011 E0             5044                                             movx            a,@dptr
2012 F6             5045                                             mov                     @r0,a
2013 08             5046                                             inc                     r0
2014 A3             5047                                             inc                     dptr
2015 E0             5048                                             movx            a,@dptr
2016 F6             5049                                             mov                     @r0,a
2017 08             5050                                             inc                     r0
2018 A3             5051                                             inc                     dptr
2019 E0             5052                                             movx            a,@dptr
201A F6             5053                                             mov                     @r0,a
201B A3             5054                                             inc                     dptr
                    5055                                             
201C 78B8           5056                                             mov                     r0,#work
201E 120000   F     5057                                             call            resar2
2021 120402         5058                                             call            altof;->float;r2..r5
2024 78B8           5059                                             mov                     r0,#work
2026 120000   F     5060                                             call            saver2
                    5061     
2029 120000   F     5062                                             call            min4_hl
                    5063                                             ;call           min4_hl
                    5064     
202C 78D7           5065                                             mov                     r0,#copy_hl
202E E583           5066                                             mov                     a,dph
2030 F6             5067                                             mov                     @r0,a
2031 08             5068                                             inc                     r0
2032 E582           5069                                             mov                     a,dpl
2034 F6             5070                                             mov                     @r0,a
                    5071                                     
2035 78D6           5072                                             mov                     r0,#chblok;volume
2037 7600           5073                                             mov                     @r0,#0
2039 120000   F     5074     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
203C E582           5075                                             mov                     a,dpl
203E FF             5076                                             mov                     r7,a
203F E583           5077                                             mov                     a,dph
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    81

2041 FE             5078                                             mov                     r6,a
                    5079     
2042 78D7           5080                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2044 E6             5081                                             mov                     a,@r0
2045 F583           5082                                             mov                     dph,a
2047 08             5083                                             inc                     r0
2048 E6             5084                                             mov                     a,@r0
2049 F582           5085                                             mov                     dpl,a
                    5086                                             
204B C3             5087                                             clr                     c;-4
204C E582           5088                                             mov                     a,dpl
204E 9404           5089                                             subb            a,#4
2050 F582           5090                                             mov                     dpl,a
2052 E583           5091                                             mov                     a,dph
2054 9400           5092                                             subb            a,#0
2056 F583           5093                                             mov                     dph,a;dptr-4
                    5094                                             ;;;;;;;;
2058 79D7           5095                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
205A E583           5096                                                     mov             a,dph
205C F7             5097                                               mov           @r1,a
205D 09             5098                                                     inc             r1
205E E582           5099                                                     mov             a,dpl
2060 F7             5100                                                     mov             @r1,a
                    5101                                                     ;;;;;;;;;
2061 C3             5102                                                     clr             c;пришли в начало блока?
2062 E582           5103                                                     mov                     a,dpl
2064 9F             5104                                                     subb            a,r7
2065 FF             5105                                                     mov                     r7,a
2066 7006           5106                                                     jnz                     nextmin
2068 E583           5107                                                     mov                     a,dph
206A 9E             5108                                                     subb            a,r6
206B FE             5109                                                     mov                     r6,a
206C 601D           5110                                                     jz                      outmin;
                    5111                                                     
                    5112                                                     ;продолжаем сравнение
                    5113                                                     ;;;;;;;;;;;             
206E 78B8           5114     nextmin:        mov                     r0,#work
2070 120000   F     5115                                             call            resar2
                    5116                                             ;call           altof;->float;r2..r5
2073 120000   F     5117                                             call            move28;->r8..r11
2076 120000   F     5118                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5119     
2079 120402         5120                                             call            altof;->float;r2..r5
                    5121                                             
207C 1201D6         5122                                             call            flcmp
207F 5005           5123                                             jnc                     nomini
2081 78B8           5124                                             mov                     r0,#work;<
2083 120000   F     5125                                             call            saver2;r2..r5
2086 78D6           5126     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
2088 06             5127                                             inc                     @r0
2089 80AE           5128                                             jmp                     ming
                    5129     
208B 78B8           5130     outmin:         mov                     r0,#work;1ое измерение блока
208D 120000   F     5131                                             call            resar2
                    5132                                     ;       call            altof;->float;r2..r5
2090 120000   F     5133                                             call            move28;->r8..r11
2093 120000   F     5134                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5135     
2096 120402         5136                                             call            altof;->float;r2..r5
                    5137                                             
2099 1201D6         5138                                             call            flcmp
209C 5005           5139                                             jnc                     minivix
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    82

209E 78B8           5140                                             mov                     r0,#work;<
20A0 120000   F     5141                                             call            saver2;r2..r5
                    5142                                             ;;;;;;;;;
                    5143     
20A3 78B8           5144     minivix:        mov                     r0,#work
20A5 120000   F     5145                                             call            resar2
                    5146     
                    5147                                             ;call           altof;->float
                    5148                                     
20A8 900000   F     5149                                             mov                     dptr,#ch_10      
20AB 120000   F     5150                                             call            ldc_ltemp
20AE 1202B7         5151                                             call            fldiv
20B1 120343         5152                                             call            ftol                            ;->
                             hex
                    5153                                             ;;;
20B4 120000   F     5154                                             call            maform
20B7 784F           5155                                             mov                     r0,#abin
20B9 120000   F     5156                                             call            saver2
                    5157     ;;;;;;;;
                    5158                                             
20BC 7853           5159                                             mov             r0,#adec
20BE 7952           5160                                             mov             r1,#abin+3      ;hex->10
20C0 120000   F     5161                                             call    bindec
                    5162                                     
20C3 785C           5163                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
20C5 7949           5164                                             mov             r1,#bufind+9
20C7 7F05           5165                                             mov             r7,#5
20C9 E6             5166     bufmin:                         mov             a,@r0
20CA 2430           5167                                             add             a,#30h
20CC F7             5168                                             mov             @r1,a
20CD 19             5169                                             dec             r1
20CE 18             5170                                             dec             r0
20CF DFF8           5171                                             djnz    r7,bufmin
20D1 7844           5172                                             mov             r0,#bufind+4
20D3 762B           5173                                             mov             @r0,#2bh          
20D5 300202         5174                                             jnb             znmat,nozmin
20D8 762D           5175                                             mov             @r0,#2dh
20DA 434B05         5176     nozmin:         orl             bufind+11,#05h
20DD 22             5177                                             ret
                    5178     
                    5179     
                    5180     
20DE 020000   F     5181     routmax:                jmp             outmax
                    5182     ;мин значение по по блоку
20E1                5183     vichmax:        ;;;;;;;;;;
20E1 120000   F     5184                                             call            adrblok;dptr-адр ячейки 1й соотв бл
                             ока 
20E4 E582           5185                                             mov                     a,dpl
20E6 FF             5186                                             mov                     r7,a
20E7 E583           5187                                             mov                     a,dph
20E9 FE             5188                                             mov                     r6,a
20EA 120000   F     5189                                             call            resa_hl;save_bl->dptr
                    5190     
20ED C3             5191                                                     clr             c; в начало блока?
20EE E582           5192                                                     mov                     a,dpl
20F0 9F             5193                                                     subb            a,r7
20F1 FF             5194                                                     mov                     r7,a
20F2 7006           5195                                                     jnz                     oldmax
20F4 E583           5196                                                     mov                     a,dph
20F6 9E             5197                                                     subb            a,r6
20F7 FE             5198                                                     mov                     r6,a
20F8 60E4           5199                                                     jz                      routmax;
                    5200     ;;;;;;;;;;
20FA                5201     oldmax:
20FA 120000   F     5202                                             call            resa_hl;save_bl->dptr
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    83

                    5203                                             
                    5204                                             
                    5205     ;с конца блока адрес 2го измерение
20FD 120000   F     5206                                             call            min4_hl
                    5207                                             
2100 78B8           5208                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    5209                                             
2102 E0             5210                                             movx            a,@dptr
2103 F6             5211                                             mov                     @r0,a
2104 08             5212                                             inc                     r0
2105 A3             5213                                             inc                     dptr
2106 E0             5214                                             movx            a,@dptr
2107 F6             5215                                             mov                     @r0,a
2108 08             5216                                             inc                     r0
2109 A3             5217                                             inc                     dptr
210A E0             5218                                             movx            a,@dptr
210B F6             5219                                             mov                     @r0,a
210C 08             5220                                             inc                     r0
210D A3             5221                                             inc                     dptr
210E E0             5222                                             movx            a,@dptr
210F F6             5223                                             mov                     @r0,a
2110 A3             5224                                             inc                     dptr
                    5225                                             
2111 78B8           5226                                             mov                     r0,#work
2113 120000   F     5227                                             call            resar2
2116 120402         5228                                             call            altof;->float;r2..r5
2119 78B8           5229                                             mov                     r0,#work
211B 120000   F     5230                                             call            saver2
                    5231     
211E 120000   F     5232                                             call            min4_hl
                    5233                                     ;       call            min4_hl
                    5234     
2121 78D7           5235                                             mov                     r0,#copy_hl
2123 E583           5236                                             mov                     a,dph
2125 F6             5237                                             mov                     @r0,a
2126 08             5238                                             inc                     r0
2127 E582           5239                                             mov                     a,dpl
2129 F6             5240                                             mov                     @r0,a
                    5241                                     
212A 78D6           5242                                             mov                     r0,#chblok;volume
212C 7600           5243                                             mov                     @r0,#0
212E 120000   F     5244     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
2131 E582           5245                                             mov                     a,dpl
2133 FF             5246                                             mov                     r7,a
2134 E583           5247                                             mov                     a,dph
2136 FE             5248                                             mov                     r6,a
                    5249     
2137 78D7           5250                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
2139 E6             5251                                             mov                     a,@r0
213A F583           5252                                             mov                     dph,a
213C 08             5253                                             inc                     r0
213D E6             5254                                             mov                     a,@r0
213E F582           5255                                             mov                     dpl,a
                    5256                                             
2140 C3             5257                                             clr                     c;-4
2141 E582           5258                                             mov                     a,dpl
2143 9404           5259                                             subb            a,#4
2145 F582           5260                                             mov                     dpl,a
2147 E583           5261                                             mov                     a,dph
2149 9400           5262                                             subb            a,#0
214B F583           5263                                             mov                     dph,a;dptr-4
                    5264                                             ;;;;;;;;
214D 79D7           5265                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    84

214F E583           5266                                                     mov             a,dph
2151 F7             5267                                               mov           @r1,a
2152 09             5268                                                     inc             r1
2153 E582           5269                                                     mov             a,dpl
2155 F7             5270                                                     mov             @r1,a
                    5271                                                     ;;;;;;;;;
2156 C3             5272                                                     clr             c;пришли в начало блока?
2157 E582           5273                                                     mov                     a,dpl
2159 9F             5274                                                     subb            a,r7
215A FF             5275                                                     mov                     r7,a
215B 7006           5276                                                     jnz                     nextmax
215D E583           5277                                                     mov                     a,dph
215F 9E             5278                                                     subb            a,r6
2160 FE             5279                                                     mov                     r6,a
2161 601D           5280                                                     jz                      outmax;
                    5281                                                     
                    5282                                                     ;продолжаем сравнение
                    5283                                                     ;;;;;;;;;;;             
2163 78B8           5284     nextmax:        mov                     r0,#work
2165 120000   F     5285                                             call            resar2
                    5286                                             ;call           altof;->float;r2..r5
2168 120000   F     5287                                             call            move28;->r8..r11
216B 120000   F     5288                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5289     
216E 120402         5290                                             call            altof;->float;r2..r5
                    5291                                             
2171 1201D6         5292                                             call            flcmp
2174 4005           5293                                             jc                      nomaxi
2176 78B8           5294                                             mov                     r0,#work;>
2178 120000   F     5295                                             call            saver2;r2..r5
217B 78D6           5296     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
217D 06             5297                                             inc                     @r0
217E 80AE           5298                                             jmp                     maxg
2180 78B8           5299     outmax:         mov                     r0,#work;1ое измерение блока
2182 120000   F     5300                                             call            resar2
                    5301                                     ;       call            altof;->float;r2..r5
2185 120000   F     5302                                             call            move28;->r8..r11
2188 120000   F     5303                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5304     
218B 120402         5305                                             call            altof;->float;r2..r5
                    5306                                             
218E 1201D6         5307                                             call            flcmp
2191 4005           5308                                             jc                      maxvix
2193 78B8           5309                                             mov                     r0,#work;>
2195 120000   F     5310                                             call            saver2;r2..r5
                    5311                                             ;;;;;;;;;
                    5312     
2198 020000   F     5313     maxvix:         jmp             minivix
                    5314     
                    5315     
219B 78CF           5316     bufl_dec:       mov                     r0,#chbuf       
219D 120000   F     5317                                             call            resar2  
21A0 900000   F     5318                                             mov                     dptr,#ch_1       
21A3 120000   F     5319                                             call            ldc_ltemp
21A6 1201D1         5320                                             call            flsub
21A9 78CF           5321                                             mov                     r0,#chbuf       
21AB 120000   F     5322                                             call            saver2  
21AE 22             5323                                             ret
                    5324     ;прерывание таймера Т2
21AF                5325     inter2:         
21AF E5DA           5326                                             mov             a,PCA0CPM0
21B1 54BF           5327                                             anl             a,#0bfh                         
21B3 F5DA           5328                                             mov             PCA0CPM0,a
                    5329                                             ;mov            a,T2CON         ;T2CON.2=0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    85

                    5330                                             ;anl            a,#0fbh
21B5 75C800         5331                                             mov             T2CON,#00;a
21B8 C2AD           5332                                             clr             IE.5
21BA 32             5333                                             reti
                    5334     
                    5335     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
21BB                5336      ind:   ;;;
21BB E5E7           5337                             mov             a,EIE2
21BD FA             5338                             mov             r2,a;save
21BE 75E700         5339                             mov             EIE2,#00H
                    5340     
21C1 120000   F     5341                     call    mign
21C4 7840           5342                      mov            r0,#bufind;+11
21C6 7F0C           5343                      mov            r7,#12
21C8 C287           5344      nexin: clr             p0.7;6
21CA E6             5345                     mov             a,@r0
21CB F59B           5346                     mov             SPI0DAT,a
21CD 20FBFD         5347                     jb              TXBSY,$
21D0 D287           5348                     setb    p0.7;6
21D2 120000   F     5349                     call    z_9             ;25mks
21D5 08             5350                     inc             r0;dec          r0
21D6 DFF0           5351                     djnz    r7,nexin
21D8 EA             5352                     mov             a,r2
21D9 F5E7           5353                     mov             EIE2,a;#30H
                    5354     
21DB 22             5355                ret
                    5356     
                    5357     
                    5358     ;$include (d:\amp\subr7.asm) 
                +1  5359     
                +1  5360     ;тест интерфейса
21DC            +1  5361     testrs: ;jb     p0.3,goprogr
21DC C2AC       +1  5362                                     clr     IE.4
21DE 759955     +1  5363     test1:  mov     SBUF0,#55h
21E1 3099FD     +1  5364                                     jnb     SCON0.1,$
21E4 78B8       +1  5365                                     mov     r0,#work;chtest
21E6 76BE       +1  5366                                     mov     @r0,#190d;60
                +1  5367     
21E8 309825     +1  5368     test01: jnb     SCON0.0,test2
21EB E599       +1  5369                                     mov     a,SBUF0
21ED B45512     +1  5370                                     cjne    a,#55h,test3
21F0 C299       +1  5371     test4:  clr     SCON0.1
21F2 C298       +1  5372                                     clr     SCON0.0
21F4 7D0A       +1  5373                                     mov     r5,#10
21F6 7840       +1  5374                                     mov     r0,#bufind              ;- - - -
21F8 762D       +1  5375     test04: mov     @r0,#2dh
21FA 08         +1  5376                                     inc     r0
21FB DDFB       +1  5377                                     djnz    r5,test04
21FD 120000   F +1  5378                                     call    ind
2200 80DC       +1  5379                                     jmp     test1
2202            +1  5380     test3:  
2202 753933     +1  5381                                     mov     nuerr,#33h
2205 120000   F +1  5382                                     call    error           ;на кран прибора ERR 3
                +1  5383                             
2208 120000   F +1  5384                                     call    ind;
220B 120000   F +1  5385                                     call    z_01s           ;100ms
220E 80E0       +1  5386                                     jmp     test4
2210 78B8       +1  5387     test2:  mov     r0,#work;chtest
2212 B60002     +1  5388                                     cjne    @r0,#0,test02
2215 8003       +1  5389                                     jmp     test5
2217 16         +1  5390     test02: dec     @r0
2218 80CE       +1  5391                                     jmp     test01
221A 120000   F +1  5392     test5:  call    z_1ms           ;1ms
221D C299       +1  5393                                     clr     SCON0.1
                +1  5394             
221F 753933     +1  5395                                     mov     nuerr,#33h
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    86

2222 120000   F +1  5396                                     call    error           ;на кран прибора ERR 3
                +1  5397                                     
2225 120000   F +1  5398                                     call    ind
2228 120000   F +1  5399                                     call    z_01s           ;100ms
222B 80B1       +1  5400                                     jmp     test1   
                +1  5401     
                +1  5402     
                +1  5403     
                +1  5404     
                +1  5405     
222D 7A08       +1  5406     zapadc:   mov R2,#8
222F D297       +1  5407     sdv:      setb P1.7
2231 33         +1  5408               rlc A
2232 9296       +1  5409                     mov P1.6,C
2234 120000   F +1  5410                     call tim2
                +1  5411                                     
2237 C297       +1  5412                     clr P1.7
2239 120000   F +1  5413                     call tim2
223C DAF1       +1  5414                     djnz R2,sdv
223E D296       +1  5415                     setb P1.6
2240 22         +1  5416                     ret
                +1  5417     
2241 7A08       +1  5418     chtadc:   mov R2,#8
2243 D297       +1  5419     sdv1:     setb P1.7
2245 120000   F +1  5420               call tim2
2248 C297       +1  5421                     clr P1.7
224A A296       +1  5422                     mov C,P1.6
224C 33         +1  5423                     rlc A
224D 120000   F +1  5424                     call tim2
2250 DAF1       +1  5425                     djnz R2,sdv1
2252 22         +1  5426                     ret
                +1  5427     
2253 7E30       +1  5428     tim:      mov R6,#30h;38h
2255 DEFE       +1  5429     tim1:     djnz R6,tim1
2257 22         +1  5430               ret
                +1  5431               
2258 7E10       +1  5432     tim2:     mov R6,#10h;14h
225A DEFE       +1  5433     tim3:     djnz R6,tim3
225C 22         +1  5434               ret
                +1  5435     
                +1  5436     ;запись из acc
225D C3         +1  5437     write_x1: clr   c
225E            +1  5438     writeD_x1:
225E 92B1       +1  5439                       mov P3.1,c        ;запись
2260 F5A0       +1  5440               mov P2,A
2262 D2B3       +1  5441                       setb P3.3
2264 120000   F +1  5442                       call z_5
2267 C2B3       +1  5443                       clr P3.3
2269 75A0FF     +1  5444                       mov P2,#0FFh
226C 22         +1  5445                       ret
                +1  5446     
                +1  5447     ;чтение в acc
226D C3         +1  5448     read_x2:  clr   c  
226E 92B1       +1  5449               mov P3.1,c        ;чтение
2270 D2B2       +1  5450               setb P3.2
2272 D2B3       +1  5451                       setb P3.3
2274 120000   F +1  5452                     call z_5
2277 E5A0       +1  5453                       mov A,P2
2279 C2B3       +1  5454                       clr P3.3
227B C2B2       +1  5455                       clr P3.2
227D 22         +1  5456                       ret
                +1  5457     
                +1  5458     
227E 120000   F +1  5459     loop:     call read_x2;x2    ;ожидание флага готовности
2281 20E7FA     +1  5460                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
2284 22         +1  5461                        ret           ;возврат, если бит А(7)<>1
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    87

                +1  5462                                      
                +1  5463                                        
                +1  5464     
                +1  5465     
                +1  5466     
                +1  5467     
                +1  5468     
                +1  5469     
                +1  5470     
                +1  5471     ;принимаемый байт в acc
                +1  5472     ;прием байта последовательным кодом старшими разрядами вперед
2285 7A08       +1  5473     read:    mov R2,#8
2287 C297       +1  5474     re1:     clr P1.7;P1.2
2289 120000   F +1  5475              call tim2        ;5mks
228C A294       +1  5476                     mov C,P1.4;P1.0
228E 33         +1  5477                     rlc A           
228F D297       +1  5478                     setb P1.7;P1.2
2291 120000   F +1  5479                     call tim2
2294 DAF1       +1  5480                     djnz R2,re1
2296 22         +1  5481                     ret
                +1  5482     
                +1  5483      ;in r0-count   
                +1  5484     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5485     ;r2..r5 -значение счетчика
2297            +1  5486     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
2297 E6         +1  5487                     mov                     a,@r0
2298 FC         +1  5488                     mov                     r4,a
2299 08         +1  5489                     inc                     r0
229A E6         +1  5490                     mov                     a,@r0
229B FD         +1  5491                     mov                     r5,a
229C 7B00       +1  5492                     mov                     r3,#0
229E 7A00       +1  5493                     mov                     r2,#0
22A0 750800     +1  5494                     mov                     r8,#0;clr                       r8
22A3 750900     +1  5495                     mov                     r9,#0;clr                       r9
22A6 120000   F +1  5496                     call            lcmp
22A9 22         +1  5497                     ret
                +1  5498     
                +1  5499     
                +1  5500     ;in-r1-count
22AA            +1  5501     chdec:          ;mov            r1,#chavt               ;chavt-1
22AA E7         +1  5502                             mov             a,@r1
22AB FC         +1  5503                             mov             r4,a
22AC 09         +1  5504                             inc             r1
22AD E7         +1  5505                             mov             a,@r1
22AE FD         +1  5506                             mov             r5,a
22AF C202       +1  5507                             clr             rr2
22B1 C203       +1  5508                             clr             rr3
22B3 900000   F +1  5509                             mov             dptr,#ch1        
22B6 120000   F +1  5510                             call    ldc_ltemp
22B9 120000   F +1  5511                             call    lsub
22BC ED         +1  5512                             mov             a,r5
22BD F7         +1  5513                             mov             @r1,a
22BE 19         +1  5514                             dec             r1
22BF EC         +1  5515                             mov             a,r4
22C0 F7         +1  5516                             mov             @r1,a
                +1  5517                             
22C1 22         +1  5518                             ret      
                +1  5519     
                +1  5520     
                +1  5521     
                +1  5522     
22C2            +1  5523     loadUS: ;если идет тест измерения ус восстановить для теста
22C2 201533     +1  5524                                     jb              biteizm,yestest
22C5 79AE       +1  5525                                             mov             r1,#diap
22C7 E7         +1  5526                             mov             a,@r1
22C8 23         +1  5527                             rl              a;*2
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    88

22C9 FC         +1  5528                             mov             r4,a                    ;save a
22CA 900000   F +1  5529                             mov             dptr,#tabus
22CD 93         +1  5530                             movc    a,@a+dptr
22CE FA         +1  5531                             mov             r2,a                    ;high byte
22CF E584       +1  5532                             mov             a,p4
22D1 5401       +1  5533                             anl             a,#01
22D3 4A         +1  5534                             orl             a,r2
22D4 F584       +1  5535                             mov             p4,a
22D6 0C         +1  5536                             inc             r4
22D7 EC         +1  5537                             mov             a,r4
22D8 93         +1  5538                             movc    a,@a+dptr
22D9 FB         +1  5539                             mov             r3,a                    ;low byte
22DA E585       +1  5540                             mov             a,p5
22DC 5401       +1  5541                             anl             a,#01
22DE 4B         +1  5542                             orl             a,r3
22DF F585       +1  5543                             mov             p5,a
22E1 799A       +1  5544                             mov             r1,#parT
22E3 B7010E     +1  5545                             cjne    @r1,#1,bret
22E6 79AE       +1  5546                             mov             r1,#diap                  ;10s (parT=1)
22E8 7405       +1  5547                             mov             a,#5                      ;10-8..10-11 p4.1=1
22EA C3         +1  5548                             clr             c
22EB 97         +1  5549                             subb    a,@r1
22EC 5006       +1  5550                             jnc             bret
22EE E584       +1  5551                             mov             a,p4
22F0 4402       +1  5552                             orl             a,#02
22F2 F584       +1  5553                             mov             p4,a                     ;10-8..10-11 p4.1=1
22F4 120000   F +1  5554     bret:      call          louizm         ;us если вкл кн ИЗМЕР
22F7 22         +1  5555                             ret
22F8            +1  5556     yestest:
22F8 120000   F +1  5557                             call            lotpus          ;ус теста измерения
22FB 22         +1  5558                             ret
                +1  5559                             
                +1  5560     ;загр ус для кор 0
                +1  5561     ;dptr-
22FC E4         +1  5562     lospus:         clr             a
                +1  5563                             ;movc   a,@a+dptr
                +1  5564                             ;mov            r2,a                    ;high byte
                +1  5565                             ;mov            a,p4
                +1  5566                             ;anl            a,#01
                +1  5567                             ;orl            a,r2
                +1  5568                             ;mov            p4,a
                +1  5569                             ;inc            dptr
22FD E4         +1  5570                             clr             a
22FE 93         +1  5571                             movc    a,@a+dptr
22FF FB         +1  5572                             mov             r3,a                    ;low byte
2300 E585       +1  5573                             mov             a,p5
2302 54BF       +1  5574                             anl             a,#0bfh;01
2304 4B         +1  5575                             orl             a,r3
2305 F585       +1  5576                             mov             p5,a
2307 22         +1  5577                             ret
                +1  5578     
2308 80         +1  5579     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5580     
                +1  5581     ;us кнопка измерения выкл
2309 88D6       +1  5582     tabus:     db           88h,0d6h         ;10-2
230B 88F6       +1  5583                             db      88h,0f6h         ;10-3
230D 88D6       +1  5584                             db              88h,0d6h         ;10-4
230F 88F6       +1  5585                             db              88h,0f6h         ;10-5
2311 9AD6       +1  5586                             db      9ah,0d6h         ;10-6
2313 9AF6       +1  5587                             db              9ah,0f6h         ;10-7
2315 ACD6       +1  5588                             db              0ach,0d6h        ;10-8
2317 ACF6       +1  5589                             db      0ach,0f6h        ;10-9
2319 C8D6       +1  5590                             db              0c8h,0d6h        ;10-10
231B C8F6       +1  5591                             db              0c8h,0f6h        ;10-11
                +1  5592     
231D            +1  5593     tabt11: 
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    89

231D 66E6       +1  5594                             db              66h,0e6h;10-11
231F            +1  5595     tabt9:  
231F 32E6       +1  5596                             db              32h,0e6h;10-9
2321            +1  5597     tabt7:  
2321 18EE       +1  5598                             db              18h,0eeh;10-7
                +1  5599     
                +1  5600      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5601     ;в зав от parT (Tизм)
2323 79B7       +1  5602     loadT:          mov             r1,#load;parT
2325 7840       +1  5603     lolevT:         mov             r0,#bufind+0
2327 7B0A       +1  5604                             mov             r3,#10
2329 75F00A     +1  5605                             mov             b,#10
232C E7         +1  5606                             mov             a,@r1
232D A4         +1  5607                             mul             ab
232E FC         +1  5608                             mov             r4,a                    ;save a
232F 900000   F +1  5609                             mov             dptr,#textT
2332 93         +1  5610             lod1:   movc    a,@a+dptr
2333 F6         +1  5611                             mov             @r0,a
2334 08         +1  5612                             inc             r0
2335 0C         +1  5613                             inc             r4
2336 EC         +1  5614                             mov             a,r4
2337 DBF9       +1  5615                             djnz    r3,lod1
2339 534B03     +1  5616                             anl                     bufind+11,#03h          ;гашение точек
233C 22         +1  5617                             ret     
                +1  5618     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5619     ;dptr-адр строки текста         
233D            +1  5620     lotext:         
233D 7B0A       +1  5621                             mov             r3,#10
233F 7840       +1  5622                             mov             r0,#bufind+0
2341 E4         +1  5623     lodt:           clr             a
2342 93         +1  5624                             movc    a,@a+dptr
2343 F6         +1  5625                             mov             @r0,a
2344 08         +1  5626                             inc             r0
2345 A3         +1  5627                             inc             dptr
2346 DBF9       +1  5628                             djnz    r3,lodt
2348 534B03     +1  5629                             anl                     bufind+11,#03h          ;гашение точек
234B 22         +1  5630                             ret                                     
                +1  5631     
                +1  5632     
                +1  5633     
                +1  5634     
                +1  5635      ;задержка 100 мкс
234C 7978       +1  5636     z_100:    mov R1,#78h     ;загрузка первого числа
234E 7A02       +1  5637     z100:     mov R2,#2h     ;загрузка второго числа
2350 DAFE       +1  5638     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2352 D9FA       +1  5639               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2354 22         +1  5640               ret           
                +1  5641     
                +1  5642     ;задержка 34 мкс
2355 7B8B       +1  5643     z_5:      mov R3,#8Bh      ;загрузка числа
2357 DBFE       +1  5644     ct:       djnz R3,ct
2359 22         +1  5645               ret
                +1  5646     
                +1  5647     ;задержка 15 мс
235A 79FA       +1  5648     z_15:     mov R1,#0FAh    ;загрузка первого числа
235C 7AED       +1  5649     z15:      mov R2,#0EDh   ;загрузка второго числа
235E DAFE       +1  5650     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
2360 D9FA       +1  5651               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
2362 22         +1  5652               ret   
                +1  5653                                               
                +1  5654      ;задержка 1 мс
2363 7910       +1  5655     z_1ms:     mov R1,#10h     
2365 7AED       +1  5656     ss1:       mov R2,#0EDh    
2367 DAFE       +1  5657                djnz R2, $    
2369 D9FA       +1  5658                djnz R1, ss1   
236B 22         +1  5659                ret   
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    90

                +1  5660     
                +1  5661      ;????????
                +1  5662     ;задержка 1с
236C 7D1F       +1  5663     z_1s:   mov             r5,#01fh 
236E 7EFF       +1  5664     co2s:   mov     R6,#0ffh     
2370 7FFF       +1  5665     z1s:     mov    R7,#0ffh     
2372 DFFE       +1  5666     co1s:   djnz    R7, co1s        
2374 DEFA       +1  5667             djnz    R6, z1s 
2376 DDF6       +1  5668                     djnz    r5,co2s
2378 22         +1  5669               ret
                +1  5670     ;задержка 0,1с
2379 7D03       +1  5671     z_01s:           mov            r5,#03h 
237B 7EFF       +1  5672     co02s:          mov     R6,#0ffh     
237D 7FFF       +1  5673     z01s:           mov     R7,#0ffh     
237F DFFE       +1  5674                             djnz    R7, $   
2381 DEFA       +1  5675                     djnz    R6, z01s 
2383 DDF6       +1  5676                             djnz    r5,co02s
2385 22         +1  5677                      ret
                +1  5678                                               
                +1  5679     ;задержка 0,5с
2386 7D0D       +1  5680     z_05s:           mov            r5,#0dh 
2388 7EFF       +1  5681     co05s:                  mov     R6,#0ffh     
238A 7FFF       +1  5682     z05s:           mov     R7,#0ffh     
238C DFFE       +1  5683                                     djnz    R7, $   
238E DEFA       +1  5684                     djnz    R6, z05s 
2390 DDF6       +1  5685                                             djnz    r5,co05s
2392 22         +1  5686                      ret                                                     
                +1  5687                                                               
2393 000007FF   +1  5688     chzap:  db      00,00,07h,0ffh             
2397 00000000   +1  5689     ch0:    db      00,00,00,00
239B 0000000A   +1  5690     ch10:   db      00,00,00,0ah                            ;10
239F 00000005   +1  5691     ch5:    db      00,00,00,05                                             ;5
23A3 00000004   +1  5692     ch4:    db      00,00,00,04                                             ;4
23A7 000003B9   +1  5693     ch954:  db 00,00,03,0b9h                                                ;954
23AB 000003E8   +1  5694     ch10000:        db 00,00,03h,0e8h                                               ;10000
23AF 00000064   +1  5695     ch100:  db 00,00,00,64h ;100
23B3 00000002   +1  5696     ch2:    db      00,00,00,02                                             
                +1  5697     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5698     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5699     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
23B7 00000001   +1  5700     ch1:    db  00,00,00,01
23BB 49742400   +1  5701     ch_mln: db      49h,74h,24h,00;10*6
23BF 3F800000   +1  5702     ch_1:   db      3fh,80h,00,00   
23C3 40000000   +1  5703     ch_2:   db      40h,00,00,00;2
23C7 40800000   +1  5704     ch_4:   db      40h,80h,00,00;4 
23CB 40A00000   +1  5705     ch_5:   db      40h,0a0h,00,00;5
23CF 40E00000   +1  5706     ch_7:   db      40h,0e0h,00,00;7
                +1  5707             
23D3 3F741EDF   +1  5708     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
23D7 47C35000   +1  5709     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
23DB 3F800347   +1  5710     KD:             db      3fh,80h,03h,47h;1,0001
23DF 48435000   +1  5711     CH2tho: db      48h,43h,50h,00;200000
23E3 4856D800   +1  5712     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
23E7 4856D800   +1  5713     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
23EB 461C4000   +1  5714     ch_10th:db  46h,1ch,40h,00;10000-2710h
23EF 41200000   +1  5715     ch_10:  db      41h,20h,00,00;10d
23F3 48742400   +1  5716     ch_250: db      48h,74h,24h,00;250000
23F7 000186A0   +1  5717     chk:            db      00,01,86h,0a0h;
23FB 00000320   +1  5718     ch320h: db      00,00,03h,20h;320h=800d
23FF 00000150   +1  5719     ch150h: db      00,00,01h,50h;150h
2403 C0400000   +1  5720     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5721     
                +1  5722     
                +1  5723     ;r1- мл байт 2х байтного числа
2407            +1  5724     tenmin:         ;-10
2407 C3         +1  5725                             clr             c
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    91

2408 E7         +1  5726                     mov             a,@r1
2409 9405       +1  5727                             subb    a,#5;10
240B F7         +1  5728                             mov             @r1,a
240C 19         +1  5729                             dec             r1
240D E7         +1  5730                             mov             a,@r1
240E 9400       +1  5731                             subb    a,#0
2410 F7         +1  5732                             mov             @r1,a
2411 22         +1  5733                             ret
                +1  5734       ;r0-обнуление ячеек памяти  
2412 7F04       +1  5735       clear4:        mov    r7,#4
2414 E4         +1  5736                             clr             a
2415 F6         +1  5737       cl4:          mov             @r0,a
2416 08         +1  5738                             inc             r0
2417 DFFC       +1  5739                             djnz    r7,cl4
2419 22         +1  5740                             ret     
                +1  5741     
                +1  5742      ;r0-обнуление ячеек памяти 
                +1  5743      ;R7- 
241A            +1  5744       clearN:        
241A E4         +1  5745                             clr             a
241B F6         +1  5746       cl4N:         mov             @r0,a
241C 08         +1  5747                             inc             r0
241D DFFC       +1  5748                             djnz    r7,cl4N
241F 22         +1  5749                             ret     
                +1  5750     
                +1  5751       ;чтение номера байта с индикатора(2байта)
                +1  5752     ;bufind+8..bufind+9
                +1  5753     ;-  - - -
                +1  5754     ;- - - - - - - - - -
                +1  5755     ;adec..adec+9
                +1  5756     ;ст            мл
2420 7848       +1  5757     upak2:  mov             r0,#bufind+8;
2422 795C       +1  5758                     mov             r1,#adec+9
2424 7F02       +1  5759                     mov             r7,#2;2bait
2426 C3         +1  5760     upa2:   clr             c
2427 E6         +1  5761                     mov             a,@r0
2428 9430       +1  5762                     subb    a,#30h
242A F7         +1  5763                     mov             @r1,a
242B 18         +1  5764                     dec             r0
242C 19         +1  5765                     dec             r1
242D DFF7       +1  5766                     djnz    r7,upa2
242F 22         +1  5767                     ret  
                +1  5768     
                +1  5769     
                +1  5770         
                +1  5771      ;bufind+4..bufind+9
                +1  5772     ;-  - - -
                +1  5773     ;- - - - - - - - - -
                +1  5774     ;adec..adec+9
                +1  5775     ;ст            мл
2430 7849       +1  5776     upak:   mov             r0,#bufind+9;
2432 795C       +1  5777                     mov             r1,#adec+9
2434 7F06       +1  5778                     mov             r7,#6
2436 C3         +1  5779     upa:    clr             c
2437 E6         +1  5780                     mov             a,@r0
2438 9430       +1  5781                     subb    a,#30h
243A F7         +1  5782                     mov             @r1,a
243B 18         +1  5783                     dec             r0
243C 19         +1  5784                     dec             r1
243D DFF7       +1  5785                     djnz    r7,upa
243F 22         +1  5786                     ret
                +1  5787     
                +1  5788      ;чтение номера байта с индикатора(3байта)
                +1  5789     ;bufind+3..bufind+9
                +1  5790     ;-  - - -
                +1  5791     ;- - - - - - - - - -
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    92

                +1  5792     ;adec..adec+9
                +1  5793     ;ст            мл
2440 7849       +1  5794     upak3:  mov             r0,#bufind+9;
2442 795C       +1  5795                     mov             r1,#adec+9
2444 7F03       +1  5796                     mov             r7,#3;3bait
2446 C3         +1  5797     upa1:   clr             c
2447 E6         +1  5798                     mov             a,@r0
2448 9430       +1  5799                     subb    a,#30h
244A F7         +1  5800                     mov             @r1,a
244B 18         +1  5801                     dec             r0
244C 19         +1  5802                     dec             r1
244D DFF7       +1  5803                     djnz    r7,upa1
244F 22         +1  5804                     ret
                +1  5805     
                +1  5806     ;вых-r2,r3-адрес ячее памяти прогр
2450            +1  5807     findkoef:
2450 79AE       +1  5808                                     mov             r1,#diap
2452 E7         +1  5809                                     mov             a,@r1
2453 23         +1  5810                                     rl              a                                          
                                          ;diap*2(2bait )
2454 FC         +1  5811                                     mov             r4,a                                    ;sa
                             ve
2455 900000   F +1  5812                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5813                                     
2458 93         +1  5814                                     movc    a,@a+dptr                       ;ст байт
2459 FA         +1  5815                                     mov             r2,a
245A A3         +1  5816                                     inc             dptr
245B EC         +1  5817                                     mov             a,r4
245C 93         +1  5818                                     movc    a,@a+dptr
245D FB         +1  5819                                     mov             r3,a                    ;мл байт
245E 22         +1  5820                                     ret
                +1  5821     ;r2..r5 в опр яч внешн озу
245F            +1  5822     findext:
245F 79AE       +1  5823                                     mov             r1,#diap
2461 E7         +1  5824                                     mov             a,@r1
2462 23         +1  5825                                     rl              a                                          
                                          ;diap*2(2bait )
2463 23         +1  5826                                     rl              a                                          
                                          ;diap*2(2bait )
2464 F9         +1  5827                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5828                                     
2465 22         +1  5829                                     ret
                +1  5830     
                +1  5831     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5832     ;(5000h..5027h)
2466 5000       +1  5833     diKDw:  dw              5000h                   ;10-2
2468 5004       +1  5834                                     dw              5004h                   ;10-3
246A 5008       +1  5835                                     dw              5008h                   ;10-4
246C 500C       +1  5836                                     dw              500ch                   ;10-5
246E 5010       +1  5837                                     dw              5010h                   ;10-6
2470 5014       +1  5838                                     dw              5014h                   ;10-7
2472 5018       +1  5839                                     dw              5018h                   ;10-8
2474 501C       +1  5840                                     dw              501ch                   ;10-9
2476 5020       +1  5841                                     dw              5020h                   ;10-10
2478 5024       +1  5842                                     dw              5024h                   ;10-11
247A 5028       +1  5843     dipar:  dw              5028h                   ;parol
247C 502C       +1  5844     diKm:           dw              502ch                   ;Km для теста измерения
247E 000186A0   +1  5845     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5846     
2482 AA08       +1  5847     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
2484 AB09       +1  5848                                             mov     r3,ltemp+1
2486 AC0A       +1  5849                                             mov     r4,ltemp+2
2488 AD0B       +1  5850                                             mov     r5,ltemp+3
248A 22         +1  5851                                             ret
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    93

                +1  5852     ;bufind+4..bufind+9
                +1  5853     ;-  - - -
                +1  5854     ;- - - - - - - - - -
                +1  5855     ;adec..adec+9
                +1  5856     ;ст            мл
248B 7847       +1  5857     upakA:  mov             r0,#bufind+7;
248D 795C       +1  5858                     mov             r1,#adec+9
248F 7F04       +1  5859                     mov             r7,#4
2491 C3         +1  5860     upaa4:  clr             c
2492 E6         +1  5861                     mov             a,@r0
2493 9430       +1  5862                     subb    a,#30h
2495 F7         +1  5863                     mov             @r1,a
2496 18         +1  5864                     dec             r0
2497 19         +1  5865                     dec             r1
2498 DFF7       +1  5866                     djnz    r7,upaa4
249A 22         +1  5867                     ret
                +1  5868     
                +1  5869     ;bufind+4..bufind+9
                +1  5870     ;-  - - -
                +1  5871     ;- - - - - - - - - -
                +1  5872     ;adec..adec+9
                +1  5873     ;ст            мл
249B 7848       +1  5874     upakB:  mov             r0,#bufind+8;
249D 795C       +1  5875                     mov             r1,#adec+9
249F 7F05       +1  5876                     mov             r7,#5
24A1 C3         +1  5877     upab:   clr             c
24A2 E6         +1  5878                     mov             a,@r0
24A3 9430       +1  5879                     subb    a,#30h
24A5 F7         +1  5880                     mov             @r1,a
24A6 18         +1  5881                     dec             r0
24A7 19         +1  5882                     dec             r1
24A8 DFF7       +1  5883                     djnz    r7,upab
24AA C21B       +1  5884                     clr                     bitznB
24AC E543       +1  5885                     mov             a,bufind+3
24AE B42D02     +1  5886                     cjne            a,#2dh,abret
24B1 D21B       +1  5887                     setb            bitznB
24B3            +1  5888     abret:
24B3 22         +1  5889                     ret
24B4            +1  5890     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
24B4 4E6E6AA8   +1  5891                                             db      4eh,6eh,6ah,0a8h;10**9
24B8 43FA0000   +1  5892     CH_500:         db              43h,0fah,00,00;1fah=500
24BC 4856D800   +1  5893     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
24C0 49742400   +1  5894     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5895     
                +1  5896     
                +1  5897     
                +1  5898     ;управление AD7731
                +1  5899     ;r4=b1 r5=b2
24C4            +1  5900     iniacp: ;управление AD7731
24C4 7403       +1  5901                             mov             a,#03
                +1  5902     
24C6 120000   F +1  5903                             call    write
24C9 EC         +1  5904                             mov             a,r4;#80h
24CA 120000   F +1  5905                             call    write
24CD ED         +1  5906                             mov             a,r5;#04
24CE 120000   F +1  5907                             call    write
24D1 7402       +1  5908                             mov             a,#02
24D3 120000   F +1  5909                             call    write
24D6 74A1       +1  5910                             mov             a,#0a1h
24D8 120000   F +1  5911                             call    write
24DB 7474       +1  5912                             mov             a,#74h
24DD 120000   F +1  5913                             call    write
24E0 2095FD     +1  5914                             jb              p1.5,$;p1.3,$
24E3 7402       +1  5915                             mov             a,#02
24E5 120000   F +1  5916                             call    write
24E8 7481       +1  5917                             mov             a,#81h
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    94

24EA 120000   F +1  5918                             call    write
24ED 7474       +1  5919                             mov             a,#74h
24EF 120000   F +1  5920                             call    write
24F2 2095FD     +1  5921                             jb              p1.5,$;p1.3,$
24F5 7402       +1  5922                             mov             a,#02
24F7 120000   F +1  5923                             call    write
24FA 7421       +1  5924                             mov             a,#21h
24FC 120000   F +1  5925                             call    write
24FF 7474       +1  5926                             mov             a,#74h
2501 120000   F +1  5927                             call    write
2504 22         +1  5928                             ret
                +1  5929                             ;;;;;;;;;;;;;;;;
                +1  5930     ;;;;;;;;;;;;;;;;;
                +1  5931     ;;;;;;;;;;;;;;;;;
2505 0000       +1  5932     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
2507 6000       +1  5933                                     db              60h,00h;40h,04h         ;10s
2509 6000       +1  5934                                     db              60h,00;40h,04h          ;1s
250B 6001       +1  5935                                     db              60h,01h;40h,04h         ;0,1s
250D 6001       +1  5936                                     db              60h,01;00h;20h,04h              ;50ms
250F 6001       +1  5937                                     db              60h,01;00h;20h,04h               ;10ms
2511 1333       +1  5938                                     db              13h,33h;32h             ;2ms
                +1  5939     
                +1  5940     ;загр В1,В2 в завис от Т                                
2513 799A       +1  5941     loab12:                 mov             r1,#parT
2515 900000   F +1  5942                                     mov             dptr,#tabB1_2
2518 E7         +1  5943                                     mov             a,@r1
2519 23         +1  5944                                     rl              a;*2
251A FF         +1  5945                                     mov             r7,a                    ;save a
251B 93         +1  5946                                     movc    a,@a+dptr
251C FC         +1  5947                                     mov             r4,a   ;b1
251D 0F         +1  5948                                     inc             r7
251E EF         +1  5949                                     mov             a,r7
251F 93         +1  5950                                     movc    a,@a+dptr
2520 FD         +1  5951                                     mov             r5,a
                +1  5952                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5953                             
2521 22         +1  5954                                     ret
                +1  5955     
                +1  5956     
2522 7852       +1  5957     loadr2: mov             r0,#abin+3              ;r2..r5
2524 E6         +1  5958                     mov             a,@r0                   ; ст мл   
2525 FA         +1  5959                     mov             r2,a
2526 18         +1  5960                     dec             r0
2527 E6         +1  5961                     mov             a,@r0
2528 FB         +1  5962                     mov             r3,a
2529 18         +1  5963                     dec             r0
252A E6         +1  5964                     mov             a,@r0
252B FC         +1  5965                     mov             r4,a
252C 18         +1  5966                     dec             r0
252D E6         +1  5967                     mov             a,@r0
252E FD         +1  5968                     mov             r5,a
252F 22         +1  5969                     ret
                +1  5970                                             
                +1  5971      ;;;;;;;;;;;;;;;;;;;      
                +1  5972      ;загрузка KD в зависимости от диап изм  
                +1  5973      ;koef->r8..r11
2530 78AE       +1  5974     loadKD:                 mov             r0,#diap
2532 E6         +1  5975                                     mov             a,@r0
2533 900000   F +1  5976                                     mov             dptr,#diKDn
2536 75F004     +1  5977                                     mov             b,#4
2539 A4         +1  5978                                     mul             ab
253A FF         +1  5979                                     mov             r7,a;save
253B 93         +1  5980                                     movc    a,@a+dptr
253C F508       +1  5981                                     mov             r8,a
253E A3         +1  5982                                     inc             dptr
253F EF         +1  5983                                     mov             a,r7
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    95

2540 93         +1  5984                                     movc    a,@a+dptr
2541 F509       +1  5985                                     mov             r9,a
2543 A3         +1  5986                                     inc             dptr
2544 EF         +1  5987                                     mov             a,r7
2545 93         +1  5988                                     movc    a,@a+dptr
2546 F50A       +1  5989                                     mov             r10,a
2548 A3         +1  5990                                     inc             dptr
2549 EF         +1  5991                                     mov             a,r7
254A 93         +1  5992                                     movc    a,@a+dptr
254B F50B       +1  5993                                     mov             r11,a
254D 22         +1  5994                                     ret
                +1  5995     
254E 3F506B7B   +1  5996      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2552 3F507FCC   +1  5997                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
2556 3F4F9D0B   +1  5998                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
255A 3F4FE869   +1  5999                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
255E 3F50294A   +1  6000                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
2562 3F50639E   +1  6001                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
2566 3F4BC9F0   +1  6002                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
256A 3F4C063B   +1  6003                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
256E 3F50EFDD   +1  6004                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
2572 3F512AD9   +1  6005                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  6006     
2576 00000039   +1  6007     ch57:   db      00,00,00,39h;57
257A 00000014   +1  6008     ch20:   db      00,00,00,14h;20
                +1  6009     
                +1  6010     ;загр ус для тестов ацп 
                +1  6011     ;dptr-
257E 78B1       +1  6012     lotpus: mov             r0,#vichR
2580 B6210D     +1  6013                                     cjne    @r0,#21h,te22
2583 900000   F +1  6014                                     mov                     dptr,#tabt11;заслать ус 11А
2586 E4         +1  6015     lotp:           clr             a
2587 93         +1  6016                             movc    a,@a+dptr                               ;high byte
2588 F584       +1  6017                             mov             p4,a
258A A3         +1  6018                             inc             dptr
258B E4         +1  6019                             clr             a
258C 93         +1  6020                             movc    a,@a+dptr                               ;low byte
258D F585       +1  6021                             mov             p5,a
258F 22         +1  6022                             ret
2590 B62205     +1  6023     te22:                   cjne    @r0,#22h,te23
2593 900000   F +1  6024                             mov                     dptr,#tabt9;заслать ус 9А       
2596 80EE       +1  6025                             jmp                     lotp
                +1  6026     
2598 900000   F +1  6027     te23:   mov                     dptr,#tabt7;заслать ус 7А       
259B 80E9       +1  6028                             jmp                     lotp
                +1  6029     
                +1  6030     
                +1  6031     
                +1  6032     
                +1  6033     
259D 02030405   +1  6034     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
25A1 06070809                
25A5 0A0B                    
                +1  6035     
25A7 78AE       +1  6036     findR:                  mov                     r0,#diap
25A9 E6         +1  6037                                                     mov                     a,@r0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    96

25AA 900000   F +1  6038                                                     mov                     dptr,#Tabn
25AD 93         +1  6039                                                     movc            a,@a+dptr
25AE 22         +1  6040                                                     ret
                +1  6041     ;bufind=30h..39h                                                                           
                                           ;
25AF C219       +1  6042     vvchif:                 clr             bitmig
25B1 79B2       +1  6043                                     mov             r1,#marker
25B3 E7         +1  6044                                     mov             a,@r1                   ;изм цифры
25B4 7840       +1  6045                                     mov             r0,#bufind                      ;0000
25B6 28         +1  6046                                     add             a,r0
25B7 F8         +1  6047                                     mov             r0,a
25B8 06         +1  6048                                     inc             @r0
25B9 B63A03     +1  6049                                     cjne    @r0,#3ah,chif
25BC 7630       +1  6050                                     mov             @r0,#30h
25BE 22         +1  6051                                     ret
25BF C3         +1  6052     chif:           clr                     c
25C0 7430       +1  6053                                     mov                     a,#30h
25C2 96         +1  6054                                     subb            a,@r0
25C3 4002       +1  6055                                     jc                      chif5
25C5 7630       +1  6056                                     mov             @r0,#30h
25C7 22         +1  6057     chif5:  ret
                +1  6058     
25C8 80E5       +1  6059     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  6060     
25CA B641FB     +1  6061     vvnol31:        cjne            @r0,#41h,vvnol41
25CD 800A       +1  6062                                             jmp                     chifour
25CF B631F8     +1  6063     vvnol23:        cjne            @r0,#31h,vvnol31
25D2 8005       +1  6064                                             jmp                     chifour 
                +1  6065     
25D4 78B0       +1  6066     vvchibl:        mov                     r0,#level
25D6 B623F6     +1  6067                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
25D9 C219       +1  6068     chifour:                clr             bitmig
25DB 79B2       +1  6069                                     mov             r1,#marker
25DD E7         +1  6070                                     mov             a,@r1                   ;изм цифры
25DE 7840       +1  6071                                     mov             r0,#bufind                      ;1..4
25E0 28         +1  6072                                     add             a,r0
25E1 F8         +1  6073                                     mov             r0,a
25E2 06         +1  6074                                     inc             @r0
25E3 B63504     +1  6075                                     cjne    @r0,#35h,chifb
25E6 7631       +1  6076                                     mov             @r0,#31h
25E8 8006       +1  6077                                     jmp             chifb1
25EA B63003     +1  6078     chifb:  cjne    @r0,#30h,chifb1
25ED 7631       +1  6079                                     mov             @r0,#31h
25EF 22         +1  6080                                     ret
25F0            +1  6081     chifb1:;;;;;;;;;;
25F0 C3         +1  6082                                     clr                     c
25F1 7430       +1  6083                                     mov                     a,#30h
25F3 96         +1  6084                                     subb            a,@r0
25F4 4002       +1  6085                                     jc                      chifl5
25F6 7630       +1  6086                                     mov             @r0,#30h
                +1  6087                                     
25F8 22         +1  6088     chifl5: ret
                +1  6089     ;;;;;;;;;;;;;
25F9 22         +1  6090             ret
                +1  6091       ;перевод маркера влево
25FA            +1  6092     marle:  
25FA C219       +1  6093                     clr             bitmig
                +1  6094                     ;mov            savba,#0   нельзя обнулять
25FC 78B2       +1  6095             mov             r0,#marker
25FE 16         +1  6096                     dec             @r0
25FF E6         +1  6097                     mov             a,@r0
2600 C3         +1  6098                     clr             c
2601 953A       +1  6099                     subb    a,movleft         ;крайне левое положение
2603 5001       +1  6100                     jnc             rler
2605 06         +1  6101                     inc             @r0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    97

2606 22         +1  6102     rler:   ret
                +1  6103         
                +1  6104     ;перевод маркера вправо
2607 C219       +1  6105     marri:  clr             bitmig
2609 78B2       +1  6106                     mov             r0,#marker
260B 06         +1  6107                     inc         @r0
260C E53B       +1  6108                     mov             a,movrig           ;крайне правое положение
260E C3         +1  6109                     clr             c
260F 96         +1  6110                     subb    a,@r0
2610 5001       +1  6111                     jnc             rrir
2612 16         +1  6112                     dec             @r0
2613 22         +1  6113     rrir:   ret
                +1  6114         
                +1  6115     ;konstA->bufind+4..bufind+7
2614 78BC       +1  6116     outA:           mov                     r0,#konstA
2616 120000   F +1  6117                                     call            resar2
2619 120343     +1  6118                                     call            ftol                    ;->hex
261C 784F       +1  6119                                     mov             r0,#abin
261E 120000   F +1  6120                                     call            saver2
2621 7853       +1  6121                                     mov                     r0,#adec
2623 7952       +1  6122                                     mov             r1,#abin+3
2625 120000   F +1  6123                                     call            bindec
2628 785C       +1  6124                                     mov                     r0,#adec+9
262A 7947       +1  6125                                     mov                     r1,#bufind+7
262C 7F04       +1  6126                                     mov                     r7,#4
262E E6         +1  6127     outa2:  mov             a,@r0
262F 2430       +1  6128                               add           a,#30h
2631 F7         +1  6129                                     mov             @r1,a
2632 19         +1  6130                                     dec             r1
2633 18         +1  6131                                     dec             r0
2634 DFF8       +1  6132                                     djnz    r7,outa2
2636 22         +1  6133                                     ret
                +1  6134                                             
                +1  6135     ;konstB->bufind+4..bufind+8
                +1  6136     ;outB:          mov                     r0,#konstB
                +1  6137     ;                               call            resar2
                +1  6138     ;                               mov                     a,r2
                +1  6139     ;                               anl                     a,#80h
                +1  6140     ;                               jz                      outb3
                +1  6141     ;mov                    a,r2
                +1  6142     ;                               anl                     a,#7fh
                +1  6143     ;                               mov                     r2,a
                +1  6144     ;                               mov                     bufind+3,#2dh
                +1  6145     ;outb3: call            ftol                    ;->hex
                +1  6146     ;                               mov             r0,#abin
                +1  6147     ;                               call            saver2
                +1  6148     ;                               mov                     r0,#adec
                +1  6149     ;                               mov             r1,#abin+3
                +1  6150     ;                               call            bindec
                +1  6151     ;                               mov                     r0,#adec+9
                +1  6152     ;                               mov                     r1,#bufind+8
                +1  6153     ;                               mov                     r7,#5
                +1  6154     ;outb2: mov             a,@r0
                +1  6155     ;                         add           a,#30h
                +1  6156     ;                               mov             @r1,a
                +1  6157     ;                               dec             r1
                +1  6158     ;                               dec             r0
                +1  6159     ;                               djnz    r7,outb2
                +1  6160     ;                               ret
                +1  6161     
                +1  6162     
                +1  6163     ;пп мигания индикации
2637 78B2       +1  6164     mign:           mov             r0,#marker
                +1  6165                                     
2639 B6FF03     +1  6166                                     cjne    @r0,#0ffh,mignn
                +1  6167                                     ;реж изм мигает *
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    98

263C C219       +1  6168                                     clr             bitmig
263E 22         +1  6169                                     ret
                +1  6170     
263F            +1  6171     mignn:                  ;clr            c
263F 7440       +1  6172                                     mov             a,#bufind
2641 26         +1  6173                                     add             a,@r0                   ;a=bufind+marker
2642 F9         +1  6174                                     mov             r1,a
2643 201907     +1  6175                                     jb              bitmig,onmig
2646 873C       +1  6176                                     mov             savba,@r1
                +1  6177                             ;       mov             a,@r1
                +1  6178                             ;       mov             savba,a
2648 7720       +1  6179                                     mov             @r1,#" "
                +1  6180                                     
264A D219       +1  6181                                     setb    bitmig
264C 22         +1  6182                                     ret
                +1  6183     
264D A73C       +1  6184     onmig:                  mov             @r1,savba
                +1  6185                                     ;mov            a,savba
                +1  6186                                     ; mov           @r1,a
264F C219       +1  6187                                     clr             bitmig
2651 120000   F +1  6188                                     call    z_01s
2654 22         +1  6189                                     ret
                +1  6190     ;номер ошибки bufind+6
2655 900000   F +1  6191     error:          mov             dptr,#teERR
2658 120000   F +1  6192                                             call    lotext
265B 853946     +1  6193                                             mov             bufind+6,nuerr
265E 22         +1  6194                                     ret
                +1  6195     
                +1  6196     
265F            +1  6197     textT:          
265F FD543D32   +1  6198     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
2663 6D67FDFD                
2667 FDFD                    
2669 FD543D31   +1  6199     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
266D 306D67FD                
2671 FDFD                    
2673 FD543D35   +1  6200                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
2677 306D67FD                
267B FDFD                    
267D FD543D64   +1  6201                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2681 3167FDFD                
2685 FDFD                    
2687 20202054   +1  6202                             db              " "," "," ","T","=",31h,67h," "," "," "
268B 3D316720                
268F 2020                    
2691 2020543D   +1  6203                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2695 31306720                
2699 2020                    
                +1  6204     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  6205     
269B 42753474   +1  6206     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
269F 79767454                
26A3 7720                    
26A5 20553D20   +1  6207     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
26A9 20202020                
26AD 2065                    
26AF 20423D2B   +1  6208     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
26B3 20202020                
26B7 2020                    
26B9 20207145   +1  6209     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
26BD 48722020                
26C1 2020                    
                +1  6210     
26C3 20544579   +1  6211     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
26C7 542D7433                
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE    99

26CB 7120                    
26CD 54457954   +1  6212     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
26D1 20523520                
26D5 2020                    
26D7 20794B30   +1  6213     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
26DB 50205235                
26DF 2020                    
26E1 20204142   +1  6214     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
26E5 4B202020                
26E9 2020                    
26EB 204B4176   +1  6215     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
26EF 74735020                
26F3 202020                  
                +1  6216     
26F6 20544579   +1  6217     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
26FA 54202020                
26FE 5431                    
2700 20544579   +1  6218     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
2704 54202020                
2708 5432                    
270A 20544579   +1  6219     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
270E 54202020                
2712 5433                    
                +1  6220     
                +1  6221     
2714 20202035   +1  6222     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
2718 37362020                
271C 2020                    
271E 20202031   +1  6223     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2722 39322020                
2726 2020                    
                +1  6224     
2728 61415030   +1  6225     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
272C 76772030                
2730 3030                    
2732 20303030   +1  6226     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
2736 30302020                
273A 2041                    
273C 74337120   +1  6227     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
2740 4B304879                
2744 5420                    
2746 20204275   +1  6228     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
274A 58307820                
274E 2020                    
2750 2020304C   +1  6229     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2754 4C202020                
2758 2020                    
275A 20203034   +1  6230     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
275E 7479544B                
2762 4120                    
2764 20203041   +1  6231     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
2768 71795420                
276C 20203341   +1  6232     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
2770 61747977                
2774 2020                    
2776 20206150   +1  6233     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
277A 30797130                
277E 545020                  
2781 20206130   +1  6234     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2785 76484162                
2789 2020                    
278B 20744854   +1  6235     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
278F 20303030                
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   100

2793 3067                    
2795 20207376   +1  6236     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2799 304B2020                
279D 2020                    
279F 20207376   +1  6237     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
27A3 304B2030                
27A7 2020                    
27A9 30547934   +1  6238     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
27AD 45542030                
27B1 3031                    
27B3 79544154   +1  6239     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
27B7 74795474                
27BB 4B41                    
27BD 71744820   +1  6240     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
27C1 20202020                
27C5 2020                    
27C7 71414B79   +1  6241     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
27CB 20202020                
27CF 2020                    
27D1 79504578   +1  6242     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
27D5 20202020                
27D9 2020                    
                +1  6243      ;;;;;;;;;;;;;;;;;;;         
27DB 2020304C   +1  6244     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
27DF 4C204920                
27E3 2020                    
27E5 2020304C   +1  6245     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
27E9 4C206620                
27ED 2020                    
27EF 20204552   +1  6246     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
27F3 52202020                
27F7 2020                    
27F9 2020454E   +1  6247     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
27FD 44202020                
2801 2020                    
                +1  6248     
                +1  6249     ;dptr+4-приемник
                +1  6250     ;dptr-источник
                +1  6251     ;r7-кол байт  
2803            +1  6252     xCIKLWR:
2803 7F04       +1  6253                             mov             r7,#4   
2805 E0         +1  6254     lwrx:   movx    a,@dptr
2806 C083       +1  6255                             push    dph
2808 C082       +1  6256                             push    dpl
280A A3         +1  6257                             inc             dptr
280B A3         +1  6258                             inc             dptr
280C A3         +1  6259                             inc             dptr
280D A3         +1  6260                             inc             dptr
280E F0         +1  6261                             movx    @dptr,a
280F D082       +1  6262                             pop             dpl
2811 D083       +1  6263                             pop             dph
                +1  6264                             
2813 A3         +1  6265                             inc             dptr
2814 DFEF       +1  6266                             djnz    r7,lwrx
2816 22         +1  6267                             ret
                +1  6268     ;r2..r5->@dptr..@dptr+3                         
2817 EA         +1  6269     saveIr2:                mov     a,r2
2818 F0         +1  6270                                             movx    @dptr,a
2819 A3         +1  6271                                             inc     dptr
281A EB         +1  6272                                             mov     a,r3
281B F0         +1  6273                                             movx    @dptr,a
281C A3         +1  6274                                             inc     dptr
281D EC         +1  6275                                             mov     a,r4
281E F0         +1  6276                                             movx    @dptr,a
281F A3         +1  6277                                             inc     dptr
2820 ED         +1  6278                                             mov     a,r5
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   101

2821 F0         +1  6279                                             movx    @dptr,a
2822 22         +1  6280                                             ret
                +1  6281     ;r2..r5-> @r0..@r0+3
                +1  6282     
2823 EA         +1  6283     saver2:         mov     a,r2
2824 F6         +1  6284                                             mov     @r0,a
2825 08         +1  6285                                             inc     r0
2826 EB         +1  6286                                             mov     a,r3
2827 F6         +1  6287                                             mov     @r0,a
2828 08         +1  6288                                             inc     r0
2829 EC         +1  6289                                             mov     a,r4
282A F6         +1  6290                                             mov     @r0,a
282B 08         +1  6291                                             inc     r0
282C ED         +1  6292                                             mov     a,r5
282D F6         +1  6293                                             mov     @r0,a
282E 22         +1  6294                                             ret 
282F 7F50       +1  6295     clmassix:       mov                     r7,#50h;28h
2831 900100     +1  6296                             mov     dptr,#MASS0        ;забить массив A нулями
2834 7400       +1  6297     clmax:          mov          a,#00h
2836 F0         +1  6298                  movx    @dptr,a
2837 A3         +1  6299                  inc     dptr
2838 DFFA       +1  6300                 djnz                r7,clmax                
283A F56E       +1  6301                  mov     chmas,a
283C C201       +1  6302                  clr     bitmas
283E 22         +1  6303                 ret
                +1  6304     ;r1-яЁшхьшъ
                +1  6305     ;r0-шёЄюўшъ
                +1  6306     ;r7-ъюы срщЄ  
283F            +1  6307     CIKLWR:
283F 7F04       +1  6308                             mov             r7,#4   
2841 E6         +1  6309     lwr:    mov     a,@r0
2842 F7         +1  6310                             mov     @r1,a
2843 09         +1  6311                             inc             r1
2844 08         +1  6312                             inc             r0
2845 DFFA       +1  6313                             djnz    r7,lwr
2847 22         +1  6314                             ret     
                +1  6315     ;r2..r5-> @dptr..@dptr+3
                +1  6316     
2848 120000   F +1  6317     zmul:   call    maform
284B 120000   F +1  6318                     call    lmul
284E 120000   F +1  6319                     call    bform
2851 22         +1  6320                     ret
                +1  6321     
2852 120000   F +1  6322     zdiv:   call    maform
2855 120000   F +1  6323                     call    divide
2858 120000   F +1  6324                     call    bform
285B 22         +1  6325                     ret
                +1  6326     
285C EA         +1  6327     maform: mov a,r2
285D 33         +1  6328             rlc a
285E 5006       +1  6329             jnc             fo1m
2860 D202       +1  6330                     setb            znmat
2862 120000   F +1  6331                     call   form4
2865 22         +1  6332                     ret
2866 C202       +1  6333     fo1m:   clr             znmat
2868 22         +1  6334                     ret
                +1  6335     
2869 300203     +1  6336     bform:  jnb             znmat,fo2m
286C 120000   F +1  6337                     call    form4
286F 22         +1  6338     fo2m:   ret
                +1  6339       
                +1  6340     ;r2..r5 яхЁхтхёЄш т фюя ъюф
2870 ED         +1  6341     form4:          mov a,r5
2871 F4         +1  6342             cpl a
2872 2401       +1  6343             add a,#1
2874 FD         +1  6344             mov r5,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   102

2875 EC         +1  6345             mov a,r4
2876 F4         +1  6346             cpl a
2877 3400       +1  6347             addc    a,#0
2879 FC         +1  6348             mov r4,a
287A EB         +1  6349             mov a,r3
287B F4         +1  6350                 cpl a
287C 3400       +1  6351             addc    a,#0
287E FB         +1  6352             mov r3,a
287F EA         +1  6353             mov a,r2
2880 F4         +1  6354             cpl a
2881 3400       +1  6355             addc    a,#0
2883 FA         +1  6356             mov r2,a
2884 22         +1  6357             ret
                +1  6358     
2885 120000   F +1  6359     zcmp:   call            maform
2888 120000   F +1  6360                     call            lcmp
288B C0D0       +1  6361                     push            psw
288D 120000   F +1  6362                     call    bform
2890 D0D0       +1  6363                     pop             psw
2892 22         +1  6364                     ret
                +1  6365     
                +1  6366     
                +1  6367     ;@r0..@r0+3->r8..r11
                +1  6368     
2893 E6         +1  6369     resar8: mov     a,@r0
2894 F508       +1  6370                     mov     ltemp,a
2896 08         +1  6371                     inc     r0
2897 E6         +1  6372                     mov     a,@r0
2898 F509       +1  6373                     mov     ltemp+1,a
289A 08         +1  6374                     inc     r0
289B E6         +1  6375                     mov     a,@r0
289C F50A       +1  6376                     mov     ltemp+2,a
289E 08         +1  6377                     inc     r0
289F E6         +1  6378                     mov     a,@r0
28A0 F50B       +1  6379                     mov     ltemp+3,a
28A2 22         +1  6380                     ret
                +1  6381     
                +1  6382     ;
                +1  6383     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6384     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6385     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6386     ;r2 a    ўшёыю 180
                +1  6387     ;00 b4
                +1  6388     ;т_ї- mabin..mabin+2
                +1  6389     ;     80 01 00
                +1  6390      
28A3 C8         +1  6391     cond:   xch     a,r0    
28A4 F9         +1  6392                     mov     r1,a
28A5 C8         +1  6393                     xch     a,r0
28A6 7C03       +1  6394                     mov     r4,#03
28A8 7700       +1  6395     dcoa:   mov     @r1,#00
28AA 09         +1  6396                     inc     r1
28AB DCFB       +1  6397                     djnz    r4,dcoa
28AD 7B10       +1  6398                     mov     r3,#10h
28AF C3         +1  6399     dcob:   clr     c
28B0 33         +1  6400                     rlc     a
28B1 CA         +1  6401                     xch     a,r2
28B2 33         +1  6402                     rlc     a
28B3 CA         +1  6403                     xch     a,r2
28B4 C8         +1  6404                     xch     a,r0
28B5 F9         +1  6405                     mov     r1,a
28B6 C8         +1  6406                     xch     a,r0
28B7 7C03       +1  6407                     mov     r4,#03
28B9 FD         +1  6408                     mov     r5,a
28BA E7         +1  6409     dcoc:   mov     a,@r1 
28BB 37         +1  6410                     addc    a,@r1
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   103

28BC D4         +1  6411                     da      a
28BD F7         +1  6412                     mov     @r1,a
28BE 09         +1  6413                     inc     r1
28BF DCF9       +1  6414                     djnz    r4,dcoc
28C1 ED         +1  6415                     mov     a,r5
28C2 4003       +1  6416                     jc      dcod
28C4 DBE9       +1  6417                     djnz    r3,dcob
28C6 C3         +1  6418                     clr     c
28C7 00         +1  6419     dcod:   nop
28C8 22         +1  6420                     ret
                +1  6421     
28C9 8A08       +1  6422     move28: mov     ltemp,r2                        ;r2..r5->ltemp
28CB 850309     +1  6423                     mov     ltemp+1,3
28CE 85040A     +1  6424                     mov     ltemp+2,4
28D1 85050B     +1  6425                     mov     ltemp+3,5
28D4 22         +1  6426                     ret
                +1  6427     
                +1  6428     ;@r0..@r0+3->r2..r5
                +1  6429     
28D5 E6         +1  6430     resar2: mov     a,@r0
28D6 FA         +1  6431                     mov     r2,a
28D7 08         +1  6432                     inc     r0
28D8 E6         +1  6433                     mov     a,@r0
28D9 FB         +1  6434                     mov     r3,a
28DA 08         +1  6435                     inc     r0
28DB E6         +1  6436                     mov     a,@r0
28DC FC         +1  6437                     mov     r4,a
28DD 08         +1  6438                     inc     r0
28DE E6         +1  6439                     mov     a,@r0
28DF FD         +1  6440                     mov     r5,a
28E0 22         +1  6441                     ret
                +1  6442     
                +1  6443     ;25mkc !!!!!!!!!!!!!!!1
28E1 7B4B       +1  6444     z_9:      mov R3,#4Bh      ;загрузка числа
28E3 DBFE       +1  6445                    djnz R3,$
28E5 22         +1  6446               ret
                +1  6447     
                +1  6448     ;запись   передаваемый байт в acc
                +1  6449     ;передача байта послед кодом старшими разрядами  вперед
28E6 7A08       +1  6450     write:     mov R2,#8
28E8 C3         +1  6451                             clr  c  
28E9 C297       +1  6452     wr1:            clr             p1.7;P1.2
28EB 00         +1  6453                         nop 
28EC 33         +1  6454                             rlc A
28ED 9296       +1  6455                             mov P1.6,C;P1.1,C
28EF 120000   F +1  6456                        call tim2
28F2 D297       +1  6457                        setb P1.7;P1.2
28F4 120000   F +1  6458                call tim2
28F7 DAF0       +1  6459                       djnz R2,wr1
28F9 C296       +1  6460                       clr P1.6;P1.1
28FB 22         +1  6461                                              ret
                +1  6462     
                +1  6463     ;чтение номера байта с индикатора(2байта)
                +1  6464     ;bufind+8..bufind+9
                +1  6465     ;-  - - -
                +1  6466     ;- - - - - - - - - -
                +1  6467     ;adec..adec+9
                +1  6468     ;ст            мл
28FC 7847       +1  6469     upak1:  mov             r0,#bufind+7;
28FE 795C       +1  6470                                     mov             r1,#adec+9
2900 C3         +1  6471                                     clr             c
2901 E6         +1  6472                                     mov             a,@r0
2902 9430       +1  6473                                     subb    a,#30h
2904 FF         +1  6474                                     mov             r7,a
2905 C3         +1  6475                                     clr             c
2906 9405       +1  6476                                     subb    a,#5
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   104

2908 4004       +1  6477                                     jc              upk1
290A 7404       +1  6478                                     mov             a,#4
290C 8001       +1  6479                                     jmp             upk2
290E EF         +1  6480     upk1:           mov             a,r7
290F F7         +1  6481     upk2:           mov             @r1,a
2910 22         +1  6482                                     ret  
                +1  6483     ;r1-мл байт счетчика ячеек
2911 C3         +1  6484     chminus:        clr                     c
2912 E7         +1  6485                                             mov                     a,@r1
2913 9401       +1  6486                                             subb            a,#01
2915 F7         +1  6487                                             mov                     @r1,a;low
2916 19         +1  6488                                             dec                     r1
2917 E7         +1  6489                                             mov                     a,@r1
2918 9400       +1  6490                                             subb            a,#00
291A F7         +1  6491                                             mov                     @r1,a
291B 22         +1  6492                                             ret
                +1  6493     
                +1  6494     
                +1  6495     ;чтение номера байта с индикатора(4байта)
                +1  6496     ;bufind+6..bufind+9
                +1  6497     ;-  - - -
                +1  6498     ;- - - - - - - - - -
                +1  6499     ;adec..adec+9
                +1  6500     ;ст            мл
291C 7848       +1  6501     upak4:  mov             r0,#bufind+8;
291E 795C       +1  6502                     mov             r1,#adec+9
2920 7F04       +1  6503                     mov             r7,#4
2922 C3         +1  6504     upaa:   clr             c
2923 E6         +1  6505                     mov             a,@r0
2924 9430       +1  6506                     subb    a,#30h
2926 F7         +1  6507                     mov             @r1,a
2927 18         +1  6508                     dec             r0
2928 19         +1  6509                     dec             r1
2929 DFF7       +1  6510                     djnz    r7,upaa
292B 22         +1  6511                     ret
                +1  6512     
                +1  6513     ;dptr-адр ячейки 1й соотв блока 
292C E538       +1  6514     adrblok:         mov            a,nblok
292E C3         +1  6515                              clr            c
292F 9401       +1  6516                              subb           a,#1
2931 FD         +1  6517                              mov            r5,a
2932 E4         +1  6518                              clr            a
2933 FC         +1  6519                              mov            r4,a
2934 FB         +1  6520                              mov            r3,a
2935 FA         +1  6521                              mov            r2,a
2936 900000   F +1  6522                                     mov                     dptr,#ch320h
2939 120000   F +1  6523                                     CALL   ldc_ltemp                 ; ltemp <-320
293C 120000   F +1  6524                                     call            lmul;r2..r5
293F ED         +1  6525                                     mov                     a,r5
2940 2450       +1  6526                                     add                     a,#50h
2942 F582       +1  6527                                     mov                     dpl,a
2944 EC         +1  6528                                     mov                     a,r4
2945 3401       +1  6529                                     addc            a,#01           
2947 F583       +1  6530                                     mov                     dph,a                   ;dptr-
2949 22         +1  6531                                     ret
                +1  6532     
                +1  6533     ;
                +1  6534     ;saven_bl<-dptr  адрес след ячейки внешн озу 
294A E538       +1  6535     save_hl:                mov             a,nblok
294C B4011D     +1  6536                                                     cjne    a,#1,sa_hl1
294F 79D3       +1  6537                                                     mov             r1,#saven_bl
2951 E583       +1  6538     sa_hl:                  mov             a,dph
2953 F7         +1  6539                                               mov           @r1,a
2954 09         +1  6540                                                     inc             r1
2955 E582       +1  6541                                                     mov             a,dpl
2957 F7         +1  6542                                                     mov             @r1,a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   105

                +1  6543                                                     ;;;;;;;;;не конец ли блока
                +1  6544                             
2958 79D6       +1  6545                                     mov                     r1,#volume+1;work+1
295A 120000   F +1  6546                                     call            chminus
295D 78D5       +1  6547                                     mov             r0,#volume
295F E6         +1  6548                                     mov             a,@r0
2960 30E708     +1  6549                                     jnb             acc.7,noendli
2963 C20A       +1  6550                                     clr                     bitbon                  ;блок закон
                             чился
2965 534BFD     +1  6551                                     anl                     bufind+11,#0fdh
2968 120000   F +1  6552                                     call            ind
296B 22         +1  6553     noendli:ret
                +1  6554     
296C B40204     +1  6555     sa_hl1:         cjne    a,#2,sa_hl2
296F 79C0       +1  6556                                                     mov             r1,#saven_bl2
2971 80DE       +1  6557                                                     jmp             sa_hl
                +1  6558     
2973 B40304     +1  6559     sa_hl2:         cjne    a,#3,sa_hl3
2976 79C2       +1  6560                                                     mov             r1,#saven_bl3
2978 80D7       +1  6561                                                     jmp             sa_hl
297A 79D9       +1  6562     sa_hl3:                 mov             r1,#saven_bl4
297C 80D3       +1  6563                                                     jmp             sa_hl
                +1  6564     
                +1  6565     ;загрузка dptr сохр ранее значением адреса ячейки
297E E538       +1  6566     resa_hl:                mov             a,nblok
2980 B4010A     +1  6567                                                     cjne    a,#1,re_hl1
2983 79D3       +1  6568                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
2985 E7         +1  6569     re_hl:                  mov             a,@r1   
2986 F583       +1  6570                                                     mov             dph,a
                +1  6571                                               
2988 09         +1  6572                                                     inc             r1
2989 E7         +1  6573                                                     mov             a,@r1
298A F582       +1  6574                                                     mov             dpl,a
298C 22         +1  6575                                                     ret
                +1  6576     
298D B40204     +1  6577     re_hl1:                 cjne    a,#2,re_hl2
2990 79C0       +1  6578                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
2992 80F1       +1  6579                                                     jmp             re_hl
                +1  6580     
2994 B40304     +1  6581     re_hl2:                 cjne    a,#3,re_hl3
2997 79C2       +1  6582                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
2999 80EA       +1  6583                                                     jmp             re_hl
                +1  6584     
299B 79D9       +1  6585     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
299D 80E6       +1  6586                                                     jmp             re_hl
                +1  6587     ;загрузка rez_A3 в соотв яч внешн озу
299F 789C       +1  6588     loA3_X:                 mov             r0,#rez_A3
29A1 120000   F +1  6589                                                     call    resar2
                +1  6590                                                     
29A4 EA         +1  6591                                                     mov             a,r2                    ;
29A5 F0         +1  6592                                                     movx    @dptr,a
29A6 A3         +1  6593                                                     inc             dptr
29A7 EB         +1  6594                                                     mov             a,r3
29A8 F0         +1  6595                                                     movx    @dptr,a
29A9 A3         +1  6596                                                     inc             dptr
29AA EC         +1  6597                                                     mov             a,r4
29AB F0         +1  6598                                                     movx    @dptr,a
29AC A3         +1  6599                                                     inc             dptr
29AD ED         +1  6600                                                     mov             a,r5
29AE F0         +1  6601                                                     movx    @dptr,a
29AF A3         +1  6602                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
29B0 22         +1  6603                                                     ret             ;в ячейке saven_bl
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   106

                +1  6604     ;чтение в rez_A3 из соотв яч внешн озу
29B1            +1  6605     reA3_X:         
                +1  6606                                                     
29B1 E0         +1  6607                                                     movx    a,@dptr
29B2 FA         +1  6608                                                     mov             r2,a
29B3 A3         +1  6609                                                     inc             dptr
29B4 E0         +1  6610                                                     movx    a,@dptr
29B5 FB         +1  6611                                                     mov             r3,a
29B6 A3         +1  6612                                                     inc             dptr
29B7 E0         +1  6613                                                     movx    a,@dptr
29B8 FC         +1  6614                                                     mov             r4,a
29B9 A3         +1  6615                                                     inc             dptr
29BA E0         +1  6616                                                     movx    a,@dptr
29BB FD         +1  6617                                                     mov             r5,a
29BC A3         +1  6618                                                     inc             dptr
29BD 789C       +1  6619                                                     mov             r0,#rez_A3
29BF 120000   F +1  6620                                                     call    saver2
29C2 22         +1  6621                                                     ret
                +1  6622     ;;;;;;;;;;;;;;;;;
                +1  6623     ;разбивка внешнего озу
                +1  6624     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6625     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6626     ;150h..46fh 1й блок
                +1  6627     ;470h..78fh     2й блок
                +1  6628     ;790h..aaf      3й блок
                +1  6629     ;ab0h..dcfh 4й блок
                +1  6630     ;dd0..fffh свободная область
                +1  6631     ;
                +1  6632     ;светодиоды и точки для индикатора
                +1  6633     ;такт
                +1  6634     ;измер
                +1  6635     ;avp
                +1  6636     ;нуль
                +1  6637     ;0,1s
                +1  6638     ;1s
                +1  6639     ;10s
                +1  6640     ;кмп
                +1  6641     ;память
                +1  6642     ;пуск
                +1  6643     ;
                +1  6644     ;
                    6645     
                    6646     ;$include (d:\amp\sarifm3.asm) 
                +1  6647     ; ” ©« SARIFM.ASM 8.11.95
                +1  6648     ;файл арифметики
                +1  6649       
  0008          +1  6650     ltemp    equ       8           ;long temporary
  000C          +1  6651     xtemp    equ       12          ;other temporaries
  000A          +1  6652     DECSIZE  EQU       10
  0004          +1  6653     NUMSIZE  EQU       4
  0004          +1  6654     RR4  EQU       4
  0005          +1  6655     RR5  EQU       5
                +1  6656     
                +1  6657                                                     
                +1  6658     
                +1  6659                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6660     ;             using    0              ; Specify register bank for the following
                +1  6661                                            ; program code.
                +1  6662     ;                                               cseg AT 400h
                +1  6663     ; Arithmetics:  CLEARING string
                +1  6664     ; Input:
                +1  6665     ; R0 - pointer to string,
                +1  6666     ; NUMSIZE - byte count if CLRNUM used,
                +1  6667     ; DECSIZE - byte count if CLRDEC used,
                +1  6668     ; R2 - byte count if CLEAR used;
                +1  6669     ; Output:  none.
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   107

                +1  6670     
29C3            +1  6671     CLRDEC:
29C3 7A0A       +1  6672         MOV R2, #DECSIZE
29C5 8002       +1  6673         SJMP    CLEAR
29C7            +1  6674     CLRNUM:
29C7 7A04       +1  6675         MOV R2, #NUMSIZE
                +1  6676         ;JMP    CLEAR
29C9            +1  6677     CLEAR:
29C9 E4         +1  6678         CLR A
29CA F6         +1  6679     CLR11:  MOV @R0, A
29CB 08         +1  6680         INC R0
29CC DAFC       +1  6681         DJNZ    R2, CLR11
29CE 22         +1  6682         RET
                +1  6683     
                +1  6684     ;**********************************
                +1  6685     ;mov    r1,#abin+3
                +1  6686     ;mov    r0,#adec
                +1  6687     ; _ _ _ _
                +1  6688     ;     03ff
                +1  6689     ;ст     мл   - вход
                +1  6690     ; _ _ _ _ _ _ _ _ _ _
                +1  6691     ;             1 0 2 3
                +1  6692     ;ст                мл 
                +1  6693     ;**********************************
                +1  6694     
29CF            +1  6695     BINDEC:
                +1  6696     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6697     ; Input:
                +1  6698     ; R0 - pointer to destination (high digit is the first),
                +1  6699     ; R1 - pointer to source,
                +1  6700     ; NUMSIZE - byte count in binary number;
                +1  6701     ; DECSIZE - byte count in decimal number;
                +1  6702     ; Output:  none.
                +1  6703     ; Source saved
                +1  6704     
                +1  6705         ; 1. Clear result
29CF 7A05       +1  6706         MOV R2, #DECSIZE/2
29D1 120000   F +1  6707         CALL   CLEAR  ; incrementing R0
                +1  6708     
                +1  6709         ; 2. Prepare convertion
29D4 18         +1  6710         DEC R0
29D5 8804       +1  6711         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
29D7 8905       +1  6712         MOV RR5, R1 ; R5 - pointer to low byte of binary number
29D9 7B20       +1  6713         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6714     
                +1  6715         ; 3. Convert cyrcle
29DB            +1  6716     BIN30:
                +1  6717     
                +1  6718         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
29DB A905       +1  6719         MOV R1, RR5
29DD 7A04       +1  6720         MOV R2, #NUMSIZE
29DF E7         +1  6721     BIN31:  MOV A, @R1
29E0 33         +1  6722         RLC A
29E1 F7         +1  6723         MOV @R1, A
29E2 19         +1  6724         DEC R1
29E3 DAFA       +1  6725         DJNZ    R2, BIN31
29E5 A905       +1  6726         MOV R1, RR5
29E7 E7         +1  6727         MOV A, @R1
29E8 92E0       +1  6728         MOV ACC.0, C
29EA F7         +1  6729         MOV @R1, A
                +1  6730     
                +1  6731         ; 3.2. Doubling decimal result with <Carry>
29EB A804       +1  6732         MOV R0, RR4
29ED 7A05       +1  6733         MOV R2, #DECSIZE/2
29EF E6         +1  6734     BIN32:  MOV A, @R0
29F0 36         +1  6735         ADDC    A, @R0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   108

29F1 D4         +1  6736         DA  A
29F2 F6         +1  6737         MOV @R0, A
29F3 18         +1  6738         DEC R0
29F4 DAF9       +1  6739         DJNZ    R2, BIN32
                +1  6740     
                +1  6741         ; 3.3. End of convert cyrcle
29F6 DBE3       +1  6742         DJNZ    R3, BIN30
                +1  6743     
                +1  6744         ; 4. Make bytes from half-bytes
29F8 E8         +1  6745         MOV A, R0
29F9 240A       +1  6746         ADD A, #DECSIZE
29FB F8         +1  6747         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
29FC A904       +1  6748         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
29FE 7A05       +1  6749         MOV R2, #DECSIZE/2
2A00 E7         +1  6750     BIN41:  MOV A, @R1
2A01 540F       +1  6751         ANL A, #00FH
2A03 F6         +1  6752         MOV @R0, A
2A04 18         +1  6753         DEC R0
2A05 E7         +1  6754         MOV A, @R1
2A06 C4         +1  6755         SWAP    A
2A07 540F       +1  6756         ANL A, #00FH
2A09 F6         +1  6757         MOV @R0, A
2A0A 18         +1  6758         DEC R0
2A0B 19         +1  6759         DEC R1
2A0C DAF2       +1  6760         DJNZ    R2, BIN41
2A0E 22         +1  6761         RET
                +1  6762     
                +1  6763     
                +1  6764     ;*********************************
                +1  6765     ;mov    r0,#abin
                +1  6766     ;mov    r1,#adec
                +1  6767     ; _ _ _ _       -выход
                +1  6768     ; ff0000
                +1  6769     ;0004
                +1  6770     ;мл      ст
                +1  6771     
                +1  6772     ;ст                       мл
                +1  6773     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6774     ;                       2 5 5
                +1  6775     ;                   1 0 2 4
                +1  6776     
2A0F            +1  6777     DECBIN:
                +1  6778     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6779     ; Input:
                +1  6780     ; R0 - pointer to destination,
                +1  6781     ; R1 - pointer to source (high digit is the first),
                +1  6782     ; NUMSIZE - byte count in binary number;
                +1  6783     ; DECSIZE - byte count in decimal number;
                +1  6784     ; Output:  none
                +1  6785     ; Source cleared
                +1  6786     
                +1  6787         ; 1. Clear result
2A0F 120000   F +1  6788         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6789     
                +1  6790         ; 2. Prepare convertion
2A12 18         +1  6791         DEC R0
2A13 8804       +1  6792         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2A15 8905       +1  6793         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
2A17 900000   F +1  6794         MOV DPTR, #DECT2
2A1A 7B20       +1  6795         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6796     
                +1  6797         ; 3. Convert cyrcle
2A1C            +1  6798     DEC30:
                +1  6799     
                +1  6800         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2A1C C3         +1  6801         CLR C
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   109

2A1D A905       +1  6802         MOV R1, RR5
2A1F 7A0A       +1  6803         MOV R2, #DECSIZE
2A21 E7         +1  6804     DEC31:  MOV A, @R1
2A22 540F       +1  6805         ANL A, #00FH
2A24 92E4       +1  6806         MOV ACC.4, C
2A26 93         +1  6807         MOVC    A,@A+DPTR
2A27 F7         +1  6808         MOV @R1, A
2A28 A2E7       +1  6809         MOV C, ACC.7
2A2A 09         +1  6810         INC R1
2A2B DAF4       +1  6811         DJNZ    R2, DEC31
                +1  6812     
                +1  6813         ; 3.2. Rotate binary result one bit to right with <Carry>
2A2D A804       +1  6814         MOV R0, RR4
2A2F 7A04       +1  6815         MOV R2, #NUMSIZE
2A31 E6         +1  6816     DEC32:  MOV A, @R0
2A32 13         +1  6817         RRC A
2A33 F6         +1  6818         MOV @R0, A
2A34 18         +1  6819         DEC R0
2A35 DAFA       +1  6820         DJNZ    R2, DEC32
                +1  6821     
                +1  6822         ; 3.3. End of convert cyrcle
2A37 DBE3       +1  6823         DJNZ    R3, DEC30
2A39 22         +1  6824         RET
                +1  6825     
2A3A 00800181   +1  6826     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2A3E 02820383                
2A42 0484                    
2A44 00000000   +1  6827         DB  00,00,00,00,00,00
2A48 0000                    
2A4A 05850686   +1  6828         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2A4E 07870888                
2A52 0989                    
                +1  6829     
                +1  6830     ;   Long comparison
                +1  6831     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6832     ;   flags and acc set as though a long subtraction was done.
                +1  6833     ;*******************************
                +1  6834     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6835     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6836     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6837     ;*******************************
2A54            +1  6838     lcmp:
2A54 C3         +1  6839         clr c
2A55 EA         +1  6840         mov a,r2
2A56 9508       +1  6841         subb    a,8
2A58 700F       +1  6842         jnz done
2A5A EB         +1  6843         mov a,r3
2A5B 9509       +1  6844         subb    a,9
2A5D 7008       +1  6845         jnz done1
2A5F EC         +1  6846         mov a,r4
2A60 950A       +1  6847         subb    a,10
2A62 7003       +1  6848         jnz done1
2A64 ED         +1  6849         mov a,r5
2A65 950B       +1  6850         subb    a,11
2A67            +1  6851     done1:
2A67 C2D2       +1  6852         clr ov      ;overflow is significant only for top byte
2A69            +1  6853     done:
2A69 22         +1  6854         ret
                +1  6855     
                +1  6856     ;   Load long into r2-5 from [dptr]
                +1  6857     
2A6A            +1  6858     ldc_long:
2A6A E583       +1  6859         mov a,dph       ;is it in on board memory
2A6C 6010       +1  6860         jz  onboard     ;yes
2A6E E4         +1  6861         clr a
2A6F 93         +1  6862         movc    a,@a+dptr
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   110

2A70 FA         +1  6863         mov r2,a
2A71 7401       +1  6864         mov a,#1
2A73 93         +1  6865         movc    a,@a+dptr
2A74 FB         +1  6866         mov r3,a
2A75 7402       +1  6867         mov a,#2
2A77 93         +1  6868         movc    a,@a+dptr
2A78 FC         +1  6869         mov r4,a
2A79 7403       +1  6870         mov a,#3
2A7B 93         +1  6871         movc    a,@a+dptr
2A7C FD         +1  6872         mov r5,a
2A7D 22         +1  6873         ret
2A7E            +1  6874     onboard:
2A7E A882       +1  6875         mov r0,dpl
2A80 E6         +1  6876         mov a,@r0
2A81 FA         +1  6877         mov r2,a
2A82 08         +1  6878         inc r0
2A83 E6         +1  6879         mov a,@r0
2A84 FB         +1  6880         mov r3,a
2A85 08         +1  6881         inc r0
2A86 E6         +1  6882         mov a,@r0
2A87 FC         +1  6883         mov r4,a
2A88 08         +1  6884         inc r0
2A89 E6         +1  6885         mov a,@r0
2A8A FD         +1  6886         mov r5,a
2A8B 22         +1  6887         ret
                +1  6888     
                +1  6889     ;**************************************
                +1  6890     ;загрузить ltemp...+3 из памяти программ
                +1  6891     ;mov    dptr,#CH5
                +1  6892     ;call   ldc_ltemp        ltemp <--5
                +1  6893     ;**************************************
2A8C            +1  6894     ldc_ltemp:
2A8C E583       +1  6895         mov a,dph       ;is it in on board memory
2A8E 6014       +1  6896         jz  oboard      ;yes
2A90 E4         +1  6897         clr a
2A91 93         +1  6898         movc    a,@a+dptr
2A92 F508       +1  6899         mov 8,a
2A94 7401       +1  6900         mov a,#1
2A96 93         +1  6901         movc    a,@a+dptr
2A97 F509       +1  6902         mov 9,a
2A99 7402       +1  6903         mov a,#2
2A9B 93         +1  6904         movc    a,@a+dptr
2A9C F50A       +1  6905         mov 10,a
2A9E 7403       +1  6906         mov a,#3
2AA0 93         +1  6907         movc    a,@a+dptr
2AA1 F50B       +1  6908         mov 11,a
2AA3 22         +1  6909         ret
2AA4            +1  6910     oboard:
2AA4 A882       +1  6911         mov r0,dpl
2AA6 8608       +1  6912         mov 8,@r0
2AA8 08         +1  6913         inc r0
2AA9 8609       +1  6914         mov 9,@r0
2AAB 08         +1  6915         inc r0
2AAC 860A       +1  6916         mov 10,@r0
2AAE 08         +1  6917         inc r0
2AAF 860B       +1  6918         mov 11,@r0
2AB1 22         +1  6919         ret
                +1  6920     
                +1  6921     ;*****************************
                +1  6922     ;mov    dptr,#k1
                +1  6923     ;call   ldx_long
                +1  6924     ;k1->r2..r5
                +1  6925     ;*****************************
                +1  6926     ;   Load long into r2-5 from [dptr]
                +1  6927     ;
                +1  6928     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   111

2AB2            +1  6929     ldx_long:
2AB2 E583       +1  6930         mov a,dph       ;is it in on board memory
2AB4 6014       +1  6931         jz  onboar1        ;yes
2AB6 C082       +1  6932         push    dpl
2AB8 C083       +1  6933         push    dph
2ABA E0         +1  6934         movx    a,@dptr
2ABB FA         +1  6935         mov r2,a
2ABC A3         +1  6936         inc dptr
2ABD E0         +1  6937         movx    a,@dptr
2ABE FB         +1  6938         mov r3,a
2ABF A3         +1  6939         inc dptr
2AC0 E0         +1  6940         movx    a,@dptr
2AC1 FC         +1  6941         mov r4,a
2AC2 A3         +1  6942         inc dptr
2AC3 E0         +1  6943         movx    a,@dptr
2AC4 FD         +1  6944         mov r5,a
2AC5 D083       +1  6945         pop dph
2AC7 D082       +1  6946         pop dpl
2AC9 22         +1  6947         ret
2ACA            +1  6948     onboar1:
2ACA A882       +1  6949         mov r0,dpl
2ACC E6         +1  6950         mov a,@r0
2ACD FA         +1  6951         mov r2,a
2ACE 08         +1  6952         inc r0
2ACF E6         +1  6953         mov a,@r0
2AD0 FB         +1  6954         mov r3,a
2AD1 08         +1  6955         inc r0
2AD2 E6         +1  6956         mov a,@r0
2AD3 FC         +1  6957         mov r4,a
2AD4 08         +1  6958         inc r0
2AD5 E6         +1  6959         mov a,@r0
2AD6 FD         +1  6960         mov r5,a
2AD7 22         +1  6961         ret
                +1  6962     
                +1  6963     ;*********************************
                +1  6964     ;mov    dptr,#k2
                +1  6965     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6966     ;**********************************
2AD8            +1  6967     ldx_ltemp:
2AD8 E583       +1  6968         mov a,dph       ;is it in on board memory
2ADA 6010       +1  6969         jz  oboard1     ;yes
2ADC E0         +1  6970         movx    a,@dptr
2ADD F508       +1  6971         mov 8,a
2ADF A3         +1  6972         inc dptr
2AE0 E0         +1  6973         movx    a,@dptr
2AE1 F509       +1  6974         mov 9,a
2AE3 A3         +1  6975         inc dptr
2AE4 E0         +1  6976         movx    a,@dptr
2AE5 F50A       +1  6977         mov 10,a
2AE7 A3         +1  6978         inc dptr
2AE8 E0         +1  6979         movx    a,@dptr
2AE9 F50B       +1  6980         mov 11,a
2AEB 22         +1  6981         ret
2AEC            +1  6982     oboard1:
2AEC A882       +1  6983         mov r0,dpl
2AEE 8608       +1  6984         mov 8,@r0
2AF0 08         +1  6985         inc r0
2AF1 8609       +1  6986         mov 9,@r0
2AF3 08         +1  6987         inc r0
2AF4 860A       +1  6988         mov 10,@r0
2AF6 08         +1  6989         inc r0
2AF7 860B       +1  6990         mov 11,@r0
2AF9 22         +1  6991         ret
                +1  6992     ;   Long division routines for 8051
                +1  6993     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6994     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   112

                +1  6995     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6996     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6997     ;   r1 must be saved by the caller.
                +1  6998     ;   This is long unsigned division.
                +1  6999     
                +1  7000     
                +1  7001     ;   Register usage:
                +1  7002     ;       r0 loop counter
                +1  7003     ;       xtemp (12-15) accumulates quotient
                +1  7004     ;       r5-r2 holds dividend
                +1  7005     ;       ltemp holds divisor
                +1  7006     
                +1  7007     ;************************************
                +1  7008     ;r2..r5-делимое
                +1  7009     ;ltemp..-делитель
                +1  7010     ;частное -r2..r5
                +1  7011     ;*************************************
2AFA            +1  7012     divide:
2AFA E4         +1  7013         clr a
2AFB F8         +1  7014         mov r0,a        ;initialize count
2AFC F50C       +1  7015         mov xtemp,a     ;zero quotient
2AFE F50D       +1  7016         mov xtemp+1,a
2B00 F50E       +1  7017         mov xtemp+2,a
2B02 F50F       +1  7018         mov xtemp+3,a
2B04 ED         +1  7019         mov a,r5        ;check for zero dividend
2B05 4C         +1  7020         orl a,r4
2B06 4B         +1  7021         orl a,r3
2B07 4A         +1  7022         orl a,r2
2B08 600B       +1  7023         jz  jfinis
2B0A E508       +1  7024         mov a,ltemp     ;check for zero divisor
2B0C 4509       +1  7025         orl a,ltemp+1
2B0E 450A       +1  7026         orl a,ltemp+2
2B10 450B       +1  7027         orl a,ltemp+3
2B12 7037       +1  7028         jnz midl
2B14 22         +1  7029         ret
                +1  7030     
2B15 020000   F +1  7031     jfinis: jmp finis
                +1  7032     
2B18            +1  7033     loops:
2B18 EA         +1  7034         mov a,r2
2B19 C3         +1  7035         clr c
2B1A 9508       +1  7036         subb    a,ltemp+0   ;is divisor greater than dividend yet
2B1C 4033       +1  7037         jc  yes     ;yes, go no further
2B1E 7013       +1  7038         jnz no
2B20 EB         +1  7039         mov a,r3
2B21 9509       +1  7040         subb    a,ltemp+1
2B23 402C       +1  7041         jc  yes
2B25 700C       +1  7042         jnz no
2B27 EC         +1  7043         mov a,r4
2B28 950A       +1  7044         subb    a,ltemp+2
2B2A 4025       +1  7045         jc  yes
2B2C 7005       +1  7046         jnz no
2B2E ED         +1  7047         mov a,r5
2B2F 950B       +1  7048         subb    a,ltemp+3
2B31 401E       +1  7049         jc  yes
2B33            +1  7050     no:
2B33 E50B       +1  7051         mov a,ltemp+3   ;shift divisor up one bit
2B35 250B       +1  7052         add a,ltemp+3
2B37 F50B       +1  7053         mov ltemp+3,a
2B39 E50A       +1  7054         mov a,ltemp+2
2B3B 350A       +1  7055         addc    a,ltemp+2
2B3D F50A       +1  7056         mov ltemp+2,a
2B3F E509       +1  7057         mov a,ltemp+1
2B41 3509       +1  7058         addc    a,ltemp+1
2B43 F509       +1  7059         mov ltemp+1,a
2B45 E508       +1  7060         mov a,ltemp+0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   113

2B47 3508       +1  7061         addc    a,ltemp+0
2B49 F508       +1  7062         mov ltemp+0,a
2B4B            +1  7063     midl:
2B4B 08         +1  7064         inc r0      ;increment count
2B4C E508       +1  7065         mov a,ltemp+0   ;check for safe to shift some more
2B4E 30E7C7     +1  7066         jnb acc.7,loops  ;loop if top bit clear
2B51            +1  7067     yes:
2B51 E508       +1  7068         mov a,ltemp+0
2B53 C3         +1  7069         clr c
2B54 9A         +1  7070         subb    a,r2        ;can we subtract now?
2B55 401A       +1  7071         jc  dosub       ;yes, go and do it
2B57 7015       +1  7072         jnz nosub
2B59 E509       +1  7073         mov a,ltemp+1
2B5B 9B         +1  7074         subb    a,r3
2B5C 4013       +1  7075         jc  dosub
2B5E 700E       +1  7076         jnz nosub
2B60 E50A       +1  7077         mov a,ltemp+2
2B62 9C         +1  7078         subb    a,r4
2B63 400C       +1  7079         jc  dosub
2B65 7007       +1  7080         jnz nosub
2B67 E50B       +1  7081         mov a,ltemp+3
2B69 9D         +1  7082         subb    a,r5
2B6A 4005       +1  7083         jc  dosub
2B6C 6003       +1  7084         jz  dosub
2B6E            +1  7085     nosub:
2B6E C3         +1  7086         clr c
2B6F 8012       +1  7087         sjmp    dosh
2B71            +1  7088     dosub:
2B71 C3         +1  7089         clr c       ;subtract divisor from dividend
2B72 ED         +1  7090         mov a,r5
2B73 950B       +1  7091         subb    a,ltemp+3
2B75 FD         +1  7092         mov r5,a
2B76 EC         +1  7093         mov a,r4
2B77 950A       +1  7094         subb    a,ltemp+2
2B79 FC         +1  7095         mov r4,a
2B7A EB         +1  7096         mov a,r3
2B7B 9509       +1  7097         subb    a,ltemp+1
2B7D FB         +1  7098         mov r3,a
2B7E EA         +1  7099         mov a,r2
2B7F 9508       +1  7100         subb    a,ltemp+0
2B81 FA         +1  7101         mov r2,a
2B82 D3         +1  7102         setb    c       ;now set bit for quotient
2B83            +1  7103     dosh:
2B83 E50F       +1  7104         mov a,xtemp+3
2B85 33         +1  7105         rlc a
2B86 F50F       +1  7106         mov xtemp+3,a
2B88 E50E       +1  7107         mov a,xtemp+2
2B8A 33         +1  7108         rlc a
2B8B F50E       +1  7109         mov xtemp+2,a
2B8D E50D       +1  7110         mov a,xtemp+1
2B8F 33         +1  7111         rlc a
2B90 F50D       +1  7112         mov xtemp+1,a
2B92 E50C       +1  7113         mov a,xtemp+0
2B94 33         +1  7114         rlc a
2B95 F50C       +1  7115         mov xtemp+0,a
2B97 E508       +1  7116         mov a,ltemp+0       ;shift divisor down
2B99 C3         +1  7117         clr c
2B9A 13         +1  7118         rrc a
2B9B F508       +1  7119         mov ltemp+0,a
2B9D E509       +1  7120         mov a,ltemp+1
2B9F 13         +1  7121         rrc a
2BA0 F509       +1  7122         mov ltemp+1,a
2BA2 E50A       +1  7123         mov a,ltemp+2
2BA4 13         +1  7124         rrc a
2BA5 F50A       +1  7125         mov ltemp+2,a
2BA7 E50B       +1  7126         mov a,ltemp+3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   114

2BA9 13         +1  7127         rrc a
2BAA F50B       +1  7128         mov ltemp+3,a
                +1  7129     
2BAC D8A3       +1  7130         djnz    r0,yes      ;and continue with the rest
                +1  7131     
2BAE            +1  7132     finis:
2BAE 8D0B       +1  7133         mov ltemp+3,r5
2BB0 8C0A       +1  7134         mov ltemp+2,r4
2BB2 8B09       +1  7135         mov ltemp+1,r3
2BB4 8A08       +1  7136         mov ltemp+0,r2
2BB6 AD0F       +1  7137         mov r5,xtemp+3
2BB8 AC0E       +1  7138         mov r4,xtemp+2
2BBA AB0D       +1  7139         mov r3,xtemp+1
2BBC AA0C       +1  7140         mov r2,xtemp+0
2BBE 22         +1  7141         ret         ;and return with the satisfaction of a job well done
                +1  7142     
                +1  7143     
                +1  7144     ;   Long multiplication
                +1  7145     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  7146     ;   other in ltemp. It really doesn't matter which one is where.
                +1  7147     
                +1  7148     ;**********************************
                +1  7149     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  7150     ;ст  мл
                +1  7151     ;**********************************
2BBF            +1  7152     llmul:
2BBF            +1  7153     almul:
2BBF            +1  7154     lmul:
2BBF ED         +1  7155         mov a,r5        ;low order byte
2BC0 850BF0     +1  7156         mov b,ltemp+3       ;times low order byte
2BC3 A4         +1  7157         mul ab
2BC4 F50F       +1  7158         mov xtemp+3,a       ;store low
2BC6 85F00E     +1  7159         mov xtemp+2,b   ;and high
2BC9 ED         +1  7160         mov a,r5        ;low order
2BCA 850AF0     +1  7161         mov b,ltemp+2   ;times next
2BCD A4         +1  7162         mul ab
2BCE 250E       +1  7163         add a,xtemp+2   ;add in
2BD0 F50E       +1  7164         mov xtemp+2,a
2BD2 E5F0       +1  7165         mov a,b
2BD4 3400       +1  7166         addc    a,#0
2BD6 F50D       +1  7167         mov xtemp+1,a
2BD8 ED         +1  7168         mov a,r5
2BD9 8509F0     +1  7169         mov b,ltemp+1
2BDC A4         +1  7170         mul ab
2BDD 250D       +1  7171         add a,xtemp+1
2BDF F50D       +1  7172         mov xtemp+1,a
2BE1 E5F0       +1  7173         mov a,b
2BE3 3400       +1  7174         addc    a,#0
2BE5 F50C       +1  7175         mov xtemp+0,a
2BE7 ED         +1  7176         mov a,r5
2BE8 8508F0     +1  7177         mov b,ltemp+0
2BEB A4         +1  7178         mul ab
2BEC 250C       +1  7179         add a,xtemp+0
2BEE F50C       +1  7180         mov xtemp+0,a
2BF0 EC         +1  7181         mov a,r4
2BF1 850BF0     +1  7182         mov b,ltemp+3
2BF4 A4         +1  7183         mul ab
2BF5 250E       +1  7184         add a,xtemp+2
2BF7 F50E       +1  7185         mov xtemp+2,a
2BF9 E5F0       +1  7186         mov a,b
2BFB 350D       +1  7187         addc    a,xtemp+1
2BFD F50D       +1  7188         mov xtemp+1,a
2BFF E50C       +1  7189         mov a,xtemp+0
2C01 3400       +1  7190         addc    a,#0
2C03 F50C       +1  7191         mov xtemp+0,a
2C05 EC         +1  7192         mov a,r4
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   115

2C06 850AF0     +1  7193         mov b,ltemp+2
2C09 A4         +1  7194         mul ab
2C0A 250D       +1  7195         add a,xtemp+1
2C0C F50D       +1  7196         mov xtemp+1,a
2C0E E5F0       +1  7197         mov a,b
2C10 350C       +1  7198         addc    a,xtemp+0
2C12 F50C       +1  7199         mov xtemp+0,a
2C14 EC         +1  7200         mov a,r4
2C15 8509F0     +1  7201         mov b,ltemp+1
2C18 A4         +1  7202         mul ab
2C19 250C       +1  7203         add a,xtemp+0
2C1B F50C       +1  7204         mov xtemp+0,a
                +1  7205     
2C1D EB         +1  7206         mov a,r3
2C1E 850BF0     +1  7207         mov b,ltemp+3
2C21 A4         +1  7208         mul ab
2C22 250D       +1  7209         add a,xtemp+1
2C24 F50D       +1  7210         mov xtemp+1,a
2C26 E5F0       +1  7211         mov a,b
2C28 350C       +1  7212         addc    a,xtemp+0
2C2A F50C       +1  7213         mov xtemp+0,a
2C2C EB         +1  7214         mov a,r3
2C2D 850AF0     +1  7215         mov b,ltemp+2
2C30 A4         +1  7216         mul ab
2C31 250C       +1  7217         add a,xtemp+0
2C33 F50C       +1  7218         mov xtemp+0,a
                +1  7219     
2C35 EA         +1  7220         mov a,r2
2C36 850BF0     +1  7221         mov b,ltemp+3
2C39 A4         +1  7222         mul ab
2C3A 250C       +1  7223         add a,xtemp+0
2C3C FA         +1  7224         mov r2,a
2C3D AB0D       +1  7225         mov r3,xtemp+1
2C3F AC0E       +1  7226         mov r4,xtemp+2
2C41 AD0F       +1  7227         mov r5,xtemp+3
                +1  7228     
2C43 22         +1  7229         ret         ;all done
                +1  7230     ;******************************
                +1  7231     ;из содержимого  r2-r5  вычесть
                +1  7232     ;содержимое          ltemp..ltemp+3
                +1  7233     ;******************************
2C44            +1  7234     llsub:
2C44            +1  7235      lsub:
2C44 ED         +1  7236         mov a,r5
2C45 C3         +1  7237         clr c
2C46 950B       +1  7238         subb    a,11
2C48 FD         +1  7239         mov r5,a
2C49 EC         +1  7240         mov a,r4
2C4A 950A       +1  7241         subb    a,10
2C4C FC         +1  7242         mov r4,a
2C4D EB         +1  7243         mov a,r3
2C4E 9509       +1  7244         subb    a,9
2C50 FB         +1  7245         mov r3,a
2C51 EA         +1  7246         mov a,r2
2C52 9508       +1  7247         subb    a,8
2C54 FA         +1  7248         mov r2,a
2C55 22         +1  7249         ret
                +1  7250     
                +1  7251     ;***********************************************
                +1  7252     ;                                                      ст мл
                +1  7253     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7254     ;  r0- адрес младшего байта !!!
                +1  7255     ;результат- r2..r5
                +1  7256     ;***********************************************
                +1  7257     
2C56 C3         +1  7258     ladd:    clr       c
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   116

2C57 ED         +1  7259          mov       a,r5
2C58 26         +1  7260          add       a,@r0
2C59 FD         +1  7261          mov       r5,a
2C5A 18         +1  7262          dec       r0
2C5B EC         +1  7263          mov       a,r4
2C5C 36         +1  7264          addc      a,@r0
2C5D FC         +1  7265          mov       r4,a
2C5E 18         +1  7266          dec       r0
2C5F EB         +1  7267          mov       a,r3
2C60 36         +1  7268          addc      a,@r0
2C61 FB         +1  7269          mov       r3,a
2C62 18         +1  7270          dec       r0
2C63 EA         +1  7271          mov       a,r2
2C64 36         +1  7272          addc      a,@r0
2C65 FA         +1  7273          mov       r2,a
2C66 22         +1  7274          ret
                +1  7275     ;***********************************************
                +1  7276     ;                                                      ст мл
                +1  7277     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7278     ;  r0- адрес младшего байта !!!
                +1  7279     ;результат- r2..r5
                +1  7280     ;***********************************************
                +1  7281     
2C67 C3         +1  7282     laddx:    clr       c
2C68 E2         +1  7283                                             movx            a,@r0
2C69 2D         +1  7284                                             add                     a,r5
2C6A FD         +1  7285               mov     r5,a
2C6B 18         +1  7286                             dec     r0
2C6C E2         +1  7287                             movx    a,@r0
2C6D 3C         +1  7288                             addc    a,r4
2C6E FC         +1  7289                             mov     r4,a
2C6F 18         +1  7290                             dec     r0
2C70 E2         +1  7291                             movx    a,@r0
2C71 3B         +1  7292                             addc    a,r3
2C72 FB         +1  7293                             mov     r3,a
2C73 18         +1  7294                             dec     r0
2C74 E2         +1  7295                             movx    a,@r0
2C75 3A         +1  7296                             addc    a,r2
2C76 FA         +1  7297                             mov       r2,a
2C77 22         +1  7298                             ret
                +1  7299     
                +1  7300     ;***********************************************
                +1  7301     ;                                                      ст мл
                +1  7302     ; cложение содержимого  r2..r5 с числом по адресу
                +1  7303     ;  dptr- адрес младшего байта !!!
                +1  7304     ;результат- r2..r5
                +1  7305     ;***********************************************
                +1  7306     
2C78 C3         +1  7307     addx:    clr       c
2C79 E0         +1  7308                                             movx            a,@dptr
2C7A 2D         +1  7309                                             add                     a,r5
2C7B FD         +1  7310               mov     r5,a
2C7C 120000   F +1  7311                             call            dedptr;dec     dptr
2C7F E0         +1  7312                             movx    a,@dptr
2C80 3C         +1  7313                             addc    a,r4
2C81 FC         +1  7314                             mov     r4,a
2C82 120000   F +1  7315                             call            dedptr;dec     dptr
2C85 E0         +1  7316                             movx    a,@dptr
2C86 3B         +1  7317                             addc    a,r3
2C87 FB         +1  7318                             mov     r3,a
2C88 120000   F +1  7319                             call            dedptr;dec     dptr
2C8B E0         +1  7320                             movx    a,@dptr
2C8C 3A         +1  7321                             addc    a,r2
2C8D FA         +1  7322                             mov       r2,a
2C8E 22         +1  7323                             ret
                +1  7324     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   117

2C8F C0D0       +1  7325     dedptr:         push    psw
2C91 C3         +1  7326                                             clr             c
2C92 E582       +1  7327                                             mov             a,dpl
2C94 9401       +1  7328                                             subb    a,#1
2C96 F582       +1  7329                                             mov             dpl,a
2C98 E583       +1  7330                                             mov             a,dph
2C9A 9400       +1  7331                                             subb    a,#0
2C9C F583       +1  7332                                             mov             dph,a
2C9E D0D0       +1  7333                                             pop             psw
2CA0 22         +1  7334                                             ret
                    7335     
                    7336     ;$include (d:\amp\floatm.asm)
                +1  7337     ;       Copyright (C) 1988 HI-TECH Software
                +1  7338     
                +1  7339     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7340     
                +1  7341     ;       The format of floating point numbers is as follows:
                +1  7342     
                +1  7343     ;       -----------------
                +1  7344     ;       *     sign      *  1 bit
                +1  7345     ;       -----------------
                +1  7346     ;       *   exponent    *  8 bits
                +1  7347     ;       -----------------
                +1  7348     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7349     ;       -----------------
                +1  7350     
                +1  7351     
                +1  7352     ;       As usual for the 8051 the memory layout has the most significant
                +1  7353     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7354     ;       lowest address.
                +1  7355     
                +1  7356     ;       Calling conventions:
                +1  7357     
                +1  7358     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7359     ;
                +1  7360     ;       Return value is in r2-r5
                +1  7361     
                +1  7362     ;       Naming conventions: A routine name is constructed by
                +1  7363     
                +1  7364     ;             ASOP
                +1  7365     
                +1  7366     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7367     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7368     ;       Conversion routines are named
                +1  7369     
                +1  7370     ;               AStof
                +1  7371     
                +1  7372     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7373     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7374     ;       Conversion from float to integer is ftol.
                +1  7375     
                +1  7376     ;               .ORG  5000h
                +1  7377     ;               .CODE
                +1  7378     ;       seg     c_text
                +1  7379     
                +1  7380     ;;      $MOD812
----            +1  7381             CSEG
                +1  7382             ;ORG 1000h
                +1  7383     
                +1  7384                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7385             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7386     
                +1  7387     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7388     ;       macros
                +1  7389     
                +1  7390     saveregs        macro
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   118

                +1  7391             push    7
                +1  7392             push    6
                +1  7393             push    1
                +1  7394             push    0
                +1  7395             endm
                +1  7396     
                +1  7397     restregs        macro
                +1  7398             pop     0
                +1  7399             pop     1
                +1  7400             pop     6
                +1  7401             pop     7
                +1  7402             endm
                +1  7403     
                +1  7404     ;addr   
                +1  7405     dan     macro   pad
                +1  7406             mov     a,r5
                +1  7407             add     a,pad+3
                +1  7408             mov     pad+3,a
                +1  7409             mov     a,pad+2
                +1  7410             addc    a,r4
                +1  7411             mov     pad+2,a
                +1  7412             mov     a,pad+1
                +1  7413             addc    a,r3
                +1  7414             mov     pad+1,a
                +1  7415             mov     a,pad+0
                +1  7416             addc    a,r2
                +1  7417             mov     pad,a
                +1  7418             endm
                +1  7419     
                +1  7420     addl    macro  addr
                +1  7421             mov     a,r5
                +1  7422             add     a,addr+3
                +1  7423             mov     r5,a
                +1  7424             mov     a,addr+2
                +1  7425             addc    a,r4
                +1  7426             mov     r4,a
                +1  7427             mov     a,addr+1
                +1  7428             addc    a,r3
                +1  7429             mov     r3,a
                +1  7430             mov     a,addr+0
                +1  7431             addc    a,r2
                +1  7432             mov     r2,a
                +1  7433             endm
                +1  7434     
                +1  7435     
                +1  7436     add1    macro
                +1  7437             mov     a,r5
                +1  7438             add     a,#1
                +1  7439             mov     r5,a
                +1  7440             clr     a
                +1  7441             addc    a,r4
                +1  7442             mov     r4,a
                +1  7443             clr     a
                +1  7444             addc    a,r3
                +1  7445             mov     r3,a
                +1  7446             clr     a
                +1  7447             addc    a,r2
                +1  7448             mov     r2,a
                +1  7449             endm
                +1  7450     
                +1  7451     shfdn   macro  addr
                +1  7452             clr     c
                +1  7453             mov     a,addr
                +1  7454             rrc     a
                +1  7455             mov     addr,a
                +1  7456             mov     a,addr+1
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   119

                +1  7457             rrc     a
                +1  7458             mov     addr+1,a
                +1  7459             mov     a,addr+2
                +1  7460             rrc     a
                +1  7461             mov     addr+2,a
                +1  7462             mov     a,addr+3
                +1  7463             rrc     a
                +1  7464             mov     addr+3,a
                +1  7465             endm
                +1  7466     
                +1  7467     shfup   macro  addr
                +1  7468             clr     c
                +1  7469             mov     a,addr+3
                +1  7470             rlc     a
                +1  7471             mov     addr+3,a
                +1  7472             mov     a,addr+2
                +1  7473             rlc     a
                +1  7474             mov     addr+2,a
                +1  7475             mov     a,addr+1
                +1  7476             rlc     a
                +1  7477             mov     addr+1,a
                +1  7478             mov     a,addr
                +1  7479             rlc     a
                +1  7480             mov     addr,a
                +1  7481             endm
                +1  7482     
                +1  7483     rshift  macro
                +1  7484             clr     c
                +1  7485             mov     a,r2
                +1  7486             rrc     a
                +1  7487             mov     r2,a
                +1  7488             mov     a,r3
                +1  7489             rrc     a
                +1  7490             mov     r3,a
                +1  7491             mov     a,r4
                +1  7492             rrc     a
                +1  7493             mov     r4,a
                +1  7494             mov     a,r5
                +1  7495             rrc     a
                +1  7496             mov     r5,a
                +1  7497             endm
                +1  7498     rshift1 macro
                +1  7499             setb    c
                +1  7500             mov     a,r2
                +1  7501             rrc     a
                +1  7502             mov     r2,a
                +1  7503             mov     a,r3
                +1  7504             rrc     a
                +1  7505             mov     r3,a
                +1  7506             mov     a,r4
                +1  7507             rrc     a
                +1  7508             mov     r4,a
                +1  7509             mov     a,r5
                +1  7510             rrc     a
                +1  7511             mov     r5,a
                +1  7512             endm
                +1  7513     
                +1  7514     
                +1  7515     lshift  macro
                +1  7516             mov     a,r5
                +1  7517             rlc     a
                +1  7518             mov     r5,a
                +1  7519             mov     a,r4
                +1  7520             rlc     a
                +1  7521             mov     r4,a
                +1  7522             mov     a,r3
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   120

                +1  7523             rlc     a
                +1  7524             mov     r3,a
                +1  7525             mov     a,r2
                +1  7526             rlc     a
                +1  7527             mov     r2,a
                +1  7528             endm
                +1  7529     
                +1  7530     neg1    macro
                +1  7531             clr     c
                +1  7532             clr     a
                +1  7533             subb    a,r5
                +1  7534             mov     r5,a
                +1  7535             clr     a
                +1  7536             subb    a,r4
                +1  7537             mov     r4,a
                +1  7538             clr     a
                +1  7539             subb    a,r3
                +1  7540             mov     r3,a
                +1  7541             clr     a
                +1  7542             subb    a,r2
                +1  7543             mov     r2,a
                +1  7544             endm
                +1  7545     
                +1  7546     negm    macro  addr
                +1  7547             clr     c
                +1  7548             clr     a
                +1  7549             subb    a,addr+3
                +1  7550             mov     addr+3,a
                +1  7551             clr     a
                +1  7552             subb    a,addr+2
                +1  7553             mov     addr+2,a
                +1  7554             clr     a
                +1  7555             subb    a,addr+1
                +1  7556             mov     addr+1,a
                +1  7557             clr     a
                +1  7558             subb    a,addr
                +1  7559             mov     addr,a
                +1  7560             endm
                +1  7561     
                +1  7562     copytor macro  addr
                +1  7563             mov     r2,addr
                +1  7564             mov     r3,addr+1
                +1  7565             mov     r4,addr+2
                +1  7566             mov     r5,addr+3
                +1  7567             endm
                +1  7568     
                +1  7569     
                +1  7570     copyrto macro  addr
                +1  7571             mov     addr,r2
                +1  7572             mov     addr+1,r3
                +1  7573             mov     addr+2,r4
                +1  7574             mov     addr+3,r5
                +1  7575             endm
                +1  7576     
                +1  7577     
                +1  7578     ;       Internal representation: in this set of routines a floating number
                +1  7579     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7580     
                +1  7581     ;       Stack offset values
                +1  7582     ;ltemp   equ     28h
                +1  7583     
  0006          +1  7584     cntr    equ     6               ;r6 is the counter
  0007          +1  7585     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7586     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7587     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7588     exp2    equ     1               ;exponent 1 in r1
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   121

  0008          +1  7589     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7590     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7591     
                +1  7592     
                +1  7593     
                +1  7594     
                +1  7595     
                +1  7596     ;DECSIZE EQU     10
                +1  7597     ;NUMSIZE EQU     4
                +1  7598     ;RR4     EQU     4
                +1  7599     ;RR5     EQU     5
                +1  7600     
                +1  7601     ;       unpack1 - unpacks the left operand
                +1  7602     
009E            +1  7603     unpack1:
009E EA         +1  7604             mov     a,r2            ;get sign
009F 5480       +1  7605             anl     a,#80h
00A1 530740     +1  7606             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7607             orl     sign,a          ;store sign
00A6 EB         +1  7608             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7609             rlc     a               ;rotate into carry
00A8 EA         +1  7610             mov     a,r2            ;get rest of exponent
00A9 33         +1  7611             rlc     a               ;and make it 8 bits
00AA F8         +1  7612             mov     r0,a            ;store it
00AB 6006       +1  7613             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7614             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7615             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7616             ret
00B3            +1  7617     zer1:
00B3 E4         +1  7618             clr     a
00B4 FA         +1  7619             mov     r2,a
00B5 FB         +1  7620             mov     r3,a
00B6 FC         +1  7621             mov     r4,a
00B7 FD         +1  7622             mov     r5,a            ;zero mantissa
00B8 F8         +1  7623             mov     r0,a            ;zero exponent
00B9 22         +1  7624             ret
                +1  7625     
                +1  7626     ;       unpack2 - unpacks right operand
                +1  7627     
00BA            +1  7628     unpack2:
00BA E508       +1  7629             mov     a,ltemp         ;get sign
00BC 13         +1  7630             rrc     a               ;shift down
00BD 5440       +1  7631             anl     a,#40h          ;mask out sign
00BF 530780     +1  7632             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7633             orl     sign,a
00C4 E509       +1  7634             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7635             rlc     a               ;rotate into carry
00C7 E508       +1  7636             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7637             rlc     a               ;and make it 8 bits
00CA F9         +1  7638             mov     r1,a            ;store it
00CB 6007       +1  7639             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7640             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7641             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7642             ret
00D4            +1  7643     zer2:
00D4 E4         +1  7644             clr     a
00D5 F508       +1  7645             mov     ltemp,a
00D7 F509       +1  7646             mov     ltemp+1,a
00D9 F50A       +1  7647             mov     ltemp+2,a
00DB F50B       +1  7648             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7649             ret
                +1  7650     
                +1  7651     ;       pack1 - put operand 1 back into float format
                +1  7652     
00DE            +1  7653     pack1:
00DE E8         +1  7654             mov     a,r0            ;get exponent
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   122

00DF C3         +1  7655             clr     c
00E0 13         +1  7656             rrc     a               ;shift down 1 bit
00E1 530780     +1  7657             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7658             orl     a,r7            ;or in sign bit
00E5 FA         +1  7659             mov     r2,a            ;store
00E6 E8         +1  7660             mov     a,r0            ;get other bit
00E7 03         +1  7661             rr      a               ;rotate into hi bit
00E8 5480       +1  7662             anl     a,#80h          ;mask
00EA 53037F     +1  7663             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7664             orl     mant1+1,a       ;put in
00EF 22         +1  7665             ret
                +1  7666     
                +1  7667     
                +1  7668     ;       norm1 - normalize the unpacked value in 1
                +1  7669     
00F0            +1  7670     norm1:
00F0 E8         +1  7671             mov     a,r0            ;get exponent
00F1 60C0       +1  7672             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7673             mov     a,r2            ;get hi byte
00F4 6023       +1  7674             jz      norup           ;zero, so shift up if anything
00F6            +1  7675     nordn:
00F6 EA         +1  7676             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7677             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7678+3           add1                    ;add in a rounding bit
00FA ED         +1  7679+1           mov     a,r5
00FB 2401       +1  7680+1           add     a,#1
00FD FD         +1  7681+1           mov     r5,a
00FE E4         +1  7682+1           clr     a
00FF 3C         +1  7683+1           addc    a,r4
0100 FC         +1  7684+1           mov     r4,a
0101 E4         +1  7685+1           clr     a
0102 3B         +1  7686+1           addc    a,r3
0103 FB         +1  7687+1           mov     r3,a
0104 E4         +1  7688+1           clr     a
0105 3A         +1  7689+1           addc    a,r2
0106 FA         +1  7690+1           mov     r2,a
0107            +1  7691     nordn1:
                +1  7692+3           rshift                  ;shift down 1 bit
0107 C3         +1  7693+1           clr     c
0108 EA         +1  7694+1           mov     a,r2
0109 13         +1  7695+1           rrc     a
010A FA         +1  7696+1           mov     r2,a
010B EB         +1  7697+1           mov     a,r3
010C 13         +1  7698+1           rrc     a
010D FB         +1  7699+1           mov     r3,a
010E EC         +1  7700+1           mov     a,r4
010F 13         +1  7701+1           rrc     a
0110 FC         +1  7702+1           mov     r4,a
0111 ED         +1  7703+1           mov     a,r5
0112 13         +1  7704+1           rrc     a
0113 FD         +1  7705+1           mov     r5,a
0114 08         +1  7706             inc     r0              ;adjust exponent
0115 EA         +1  7707             mov     a,r2            ;test high byte
0116 70DE       +1  7708             jnz     nordn           ;loop
0118 22         +1  7709             ret                     ;done
                +1  7710     
0119            +1  7711     norup:
0119 4B         +1  7712             orl     a,r3
011A 4C         +1  7713             orl     a,r4
011B 4D         +1  7714             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7715             jz      zer1            ;it is - make it true zero
011E            +1  7716     norup1:
011E EB         +1  7717             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7718             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7719             clr     c
                +1  7720+3           lshift                  ;shift mantissa up
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   123

0123 ED         +1  7721+1           mov     a,r5
0124 33         +1  7722+1           rlc     a
0125 FD         +1  7723+1           mov     r5,a
0126 EC         +1  7724+1           mov     a,r4
0127 33         +1  7725+1           rlc     a
0128 FC         +1  7726+1           mov     r4,a
0129 EB         +1  7727+1           mov     a,r3
012A 33         +1  7728+1           rlc     a
012B FB         +1  7729+1           mov     r3,a
012C EA         +1  7730+1           mov     a,r2
012D 33         +1  7731+1           rlc     a
012E FA         +1  7732+1           mov     r2,a
012F 18         +1  7733             dec     r0              ;adjust exponent
0130 80EC       +1  7734             jmp     norup1
0132            +1  7735     norup2:
0132 22         +1  7736             ret                     ;finito
                +1  7737     
                +1  7738     
                +1  7739     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7740     ;       exponents are equal. This requires the smaller number to have
                +1  7741     ;       its exponent incremented and its mantissa shifted right.
                +1  7742     
0133            +1  7743     denorm:
0133 E8         +1  7744             mov     a,r0
0134 C3         +1  7745             clr     c
0135 99         +1  7746             subb    a,r1            ;compare exponents
0136 5029       +1  7747             jnc     up2a            ;shift operand 2
0138            +1  7748     up1:
0138 08         +1  7749             inc     r0              ;increment exponent
                +1  7750+3           rshift                  ;shift mantissa down
0139 C3         +1  7751+1           clr     c
013A EA         +1  7752+1           mov     a,r2
013B 13         +1  7753+1           rrc     a
013C FA         +1  7754+1           mov     r2,a
013D EB         +1  7755+1           mov     a,r3
013E 13         +1  7756+1           rrc     a
013F FB         +1  7757+1           mov     r3,a
0140 EC         +1  7758+1           mov     a,r4
0141 13         +1  7759+1           rrc     a
0142 FC         +1  7760+1           mov     r4,a
0143 ED         +1  7761+1           mov     a,r5
0144 13         +1  7762+1           rrc     a
0145 FD         +1  7763+1           mov     r5,a
0146 E8         +1  7764             mov     a,r0
0147 B501EE     +1  7765             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7766             ret
                +1  7767     
014B            +1  7768     up2:
014B 09         +1  7769             inc     r1              ;increment exponent 2
                +1  7770+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7771+1           clr     c
014D E508       +1  7772+1           mov     a,mant2
014F 13         +1  7773+1           rrc     a
0150 F508       +1  7774+1           mov     mant2,a
0152 E509       +1  7775+1           mov     a,mant2+1
0154 13         +1  7776+1           rrc     a
0155 F509       +1  7777+1           mov     mant2+1,a
0157 E50A       +1  7778+1           mov     a,mant2+2
0159 13         +1  7779+1           rrc     a
015A F50A       +1  7780+1           mov     mant2+2,a
015C E50B       +1  7781+1           mov     a,mant2+3
015E 13         +1  7782+1           rrc     a
015F F50B       +1  7783+1           mov     mant2+3,a
0161            +1  7784     up2a:
0161 E8         +1  7785             mov     a,r0            ;compare exponents
0162 B501E6     +1  7786             cjne    a,exp2,up2
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   124

0165 22         +1  7787             ret                     ;all done
                +1  7788     ;------------------------------------------------------------------
                +1  7789     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7790     
0166            +1  7791     fladd:
                +1  7792+3           saveregs
0166 C007       +1  7793+1           push    7
0168 C006       +1  7794+1           push    6
016A C001       +1  7795+1           push    1
016C C000       +1  7796+1           push    0
016E 119E       +1  7797             call    unpack1
0170 11BA       +1  7798             call    unpack2
0172 3133       +1  7799             call    denorm
0174 E507       +1  7800             mov     a,sign
0176 30E70D     +1  7801             jnb     acc.7,ok1       ;test left sign
                +1  7802+3           neg1                    ;negate op1
0179 C3         +1  7803+1           clr     c
017A E4         +1  7804+1           clr     a
017B 9D         +1  7805+1           subb    a,r5
017C FD         +1  7806+1           mov     r5,a
017D E4         +1  7807+1           clr     a
017E 9C         +1  7808+1           subb    a,r4
017F FC         +1  7809+1           mov     r4,a
0180 E4         +1  7810+1           clr     a
0181 9B         +1  7811+1           subb    a,r3
0182 FB         +1  7812+1           mov     r3,a
0183 E4         +1  7813+1           clr     a
0184 9A         +1  7814+1           subb    a,r2
0185 FA         +1  7815+1           mov     r2,a
0186            +1  7816     ok1:
0186 E507       +1  7817             mov     a,sign
0188 30E615     +1  7818             jnb     acc.6,ok2       ;test right sign
                +1  7819+3           negm    mant2           ;negate op2
018B C3         +1  7820+1           clr     c
018C E4         +1  7821+1           clr     a
018D 950B       +1  7822+1           subb    a,mant2+3
018F F50B       +1  7823+1           mov     mant2+3,a
0191 E4         +1  7824+1           clr     a
0192 950A       +1  7825+1           subb    a,mant2+2
0194 F50A       +1  7826+1           mov     mant2+2,a
0196 E4         +1  7827+1           clr     a
0197 9509       +1  7828+1           subb    a,mant2+1
0199 F509       +1  7829+1           mov     mant2+1,a
019B E4         +1  7830+1           clr     a
019C 9508       +1  7831+1           subb    a,mant2
019E F508       +1  7832+1           mov     mant2,a
01A0            +1  7833     ok2:
                +1  7834+3           addl    mant2           ;add mantissas
01A0 ED         +1  7835+1           mov     a,r5
01A1 250B       +1  7836+1           add     a,mant2+3
01A3 FD         +1  7837+1           mov     r5,a
01A4 E50A       +1  7838+1           mov     a,mant2+2
01A6 3C         +1  7839+1           addc    a,r4
01A7 FC         +1  7840+1           mov     r4,a
01A8 E509       +1  7841+1           mov     a,mant2+1
01AA 3B         +1  7842+1           addc    a,r3
01AB FB         +1  7843+1           mov     r3,a
01AC E508       +1  7844+1           mov     a,mant2+0
01AE 3A         +1  7845+1           addc    a,r2
01AF FA         +1  7846+1           mov     r2,a
01B0 E4         +1  7847             clr     a
01B1 FF         +1  7848             mov     r7,a            ;clear sign
01B2 EA         +1  7849             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7850             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7851             mov     r7,a            ;store sign
                +1  7852+3           neg1                    ;negate mantissa
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   125

01B7 C3         +1  7853+1           clr     c
01B8 E4         +1  7854+1           clr     a
01B9 9D         +1  7855+1           subb    a,r5
01BA FD         +1  7856+1           mov     r5,a
01BB E4         +1  7857+1           clr     a
01BC 9C         +1  7858+1           subb    a,r4
01BD FC         +1  7859+1           mov     r4,a
01BE E4         +1  7860+1           clr     a
01BF 9B         +1  7861+1           subb    a,r3
01C0 FB         +1  7862+1           mov     r3,a
01C1 E4         +1  7863+1           clr     a
01C2 9A         +1  7864+1           subb    a,r2
01C3 FA         +1  7865+1           mov     r2,a
01C4            +1  7866     ok3:
01C4 11F0       +1  7867             call    norm1
01C6 11DE       +1  7868             call    pack1           ;pack normalized result
                +1  7869+3           restregs                ;and return
01C8 D000       +1  7870+1           pop     0
01CA D001       +1  7871+1           pop     1
01CC D006       +1  7872+1           pop     6
01CE D007       +1  7873+1           pop     7
01D0 22         +1  7874             ret
                +1  7875     ;-------------------------------------------------------------
                +1  7876     ;       Subtract the number ltemp from the number in r2-r5
                +1  7877     
01D1            +1  7878     flsub:
01D1 630880     +1  7879             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7880             jmp     fladd           ;and add!
                +1  7881     
                +1  7882     ;================================================================
                +1  7883     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7884     
01D6            +1  7885     flcmp:
01D6 EA         +1  7886            mov     a,r2            ;get sign of left
01D7 6508       +1  7887            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7888            jnb     acc.7,cexp      ;same, go check exponent
                +1  7889     ;ifdef SMALL_MODEL
01DC EA         +1  7890             mov     a,r2            ;get sign of left again
01DD 33         +1  7891             rlc     a
01DE 5001       +1  7892             jnc     flout
                +1  7893     ;endif
01E0 D3         +1  7894             setb    c
01E1 22         +1  7895     flout:          ret                    ;return with acc < 0
                +1  7896     
01E2            +1  7897     cexp:
01E2 C3         +1  7898            clr     c
01E3 EA         +1  7899            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7900            subb    a,ltemp
01E6 7010       +1  7901            jnz     fnd
01E8 EB         +1  7902            mov     a,r3
01E9 9509       +1  7903            subb    a,ltemp+1
01EB 700B       +1  7904            jnz     fnd
01ED EC         +1  7905            mov     a,r4
01EE 950A       +1  7906            subb    a,ltemp+2
01F0 7006       +1  7907            jnz     fnd
01F2 ED         +1  7908            mov     a,r5
01F3 950B       +1  7909            subb    a,ltemp+3
01F5 7001       +1  7910            jnz     fnd
01F7            +1  7911     cdone:
01F7 22         +1  7912            ret                     ;return with acc == 0
01F8            +1  7913     fnd:
01F8 8AF0       +1  7914           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7915          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7916            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7917                         orl         a,#1                          ;make non-zero
0201 B3         +1  7918             cpl     c               ;c=0->1,c=1->0
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   126

0202 22         +1  7919             ret
                +1  7920     ;==============================================================
                +1  7921     
                +1  7922     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7923     ;       the result in r2-r5
                +1  7924     
0203            +1  7925     flmul:
                +1  7926+3           saveregs
0203 C007       +1  7927+1           push    7
0205 C006       +1  7928+1           push    6
0207 C001       +1  7929+1           push    1
0209 C000       +1  7930+1           push    0
020B 119E       +1  7931             call    unpack1
020D 11BA       +1  7932             call    unpack2
020F E4         +1  7933             clr     a
0210 F50C       +1  7934             mov     prod,a
0212 F50D       +1  7935             mov     prod+1,a        ;clear product
0214 F50E       +1  7936             mov     prod+2,a
0216 F50F       +1  7937             mov     prod+3,a
0218 7E07       +1  7938             mov     r6,#7           ;initialize counter
021A            +1  7939     mup1:
                +1  7940+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7941+1           clr     c
021B E508       +1  7942+1           mov     a,mant2
021D 13         +1  7943+1           rrc     a
021E F508       +1  7944+1           mov     mant2,a
0220 E509       +1  7945+1           mov     a,mant2+1
0222 13         +1  7946+1           rrc     a
0223 F509       +1  7947+1           mov     mant2+1,a
0225 E50A       +1  7948+1           mov     a,mant2+2
0227 13         +1  7949+1           rrc     a
0228 F50A       +1  7950+1           mov     mant2+2,a
022A E50B       +1  7951+1           mov     a,mant2+3
022C 13         +1  7952+1           rrc     a
022D F50B       +1  7953+1           mov     mant2+3,a
022F 5014       +1  7954             jnc     nobit           ;skip if lsb was zero
                +1  7955+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7956+1           mov     a,r5
0232 250F       +1  7957+1           add     a,prod+3
0234 F50F       +1  7958+1           mov     prod+3,a
0236 E50E       +1  7959+1           mov     a,prod+2
0238 3C         +1  7960+1           addc    a,r4
0239 F50E       +1  7961+1           mov     prod+2,a
023B E50D       +1  7962+1           mov     a,prod+1
023D 3B         +1  7963+1           addc    a,r3
023E F50D       +1  7964+1           mov     prod+1,a
0240 E50C       +1  7965+1           mov     a,prod+0
0242 3A         +1  7966+1           addc    a,r2
0243 F50C       +1  7967+1           mov     prod,a
0245            +1  7968     nobit:
                +1  7969+3           lshift                  ;shift multiplicand up
0245 ED         +1  7970+1           mov     a,r5
0246 33         +1  7971+1           rlc     a
0247 FD         +1  7972+1           mov     r5,a
0248 EC         +1  7973+1           mov     a,r4
0249 33         +1  7974+1           rlc     a
024A FC         +1  7975+1           mov     r4,a
024B EB         +1  7976+1           mov     a,r3
024C 33         +1  7977+1           rlc     a
024D FB         +1  7978+1           mov     r3,a
024E EA         +1  7979+1           mov     a,r2
024F 33         +1  7980+1           rlc     a
0250 FA         +1  7981+1           mov     r2,a
0251 DEC7       +1  7982             djnz    r6,mup1         ;loop if more
                +1  7983     
0253 7E11       +1  7984             mov     r6,#17          ;re-initalize counter
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   127

0255 8015       +1  7985             sjmp    mup3
0257            +1  7986     mup11:
                +1  7987+3           shfdn   prod            ;shift product right
0257 C3         +1  7988+1           clr     c
0258 E50C       +1  7989+1           mov     a,prod
025A 13         +1  7990+1           rrc     a
025B F50C       +1  7991+1           mov     prod,a
025D E50D       +1  7992+1           mov     a,prod+1
025F 13         +1  7993+1           rrc     a
0260 F50D       +1  7994+1           mov     prod+1,a
0262 E50E       +1  7995+1           mov     a,prod+2
0264 13         +1  7996+1           rrc     a
0265 F50E       +1  7997+1           mov     prod+2,a
0267 E50F       +1  7998+1           mov     a,prod+3
0269 13         +1  7999+1           rrc     a
026A F50F       +1  8000+1           mov     prod+3,a
026C            +1  8001     mup3:
                +1  8002+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  8003+1           clr     c
026D E508       +1  8004+1           mov     a,mant2
026F 13         +1  8005+1           rrc     a
0270 F508       +1  8006+1           mov     mant2,a
0272 E509       +1  8007+1           mov     a,mant2+1
0274 13         +1  8008+1           rrc     a
0275 F509       +1  8009+1           mov     mant2+1,a
0277 E50A       +1  8010+1           mov     a,mant2+2
0279 13         +1  8011+1           rrc     a
027A F50A       +1  8012+1           mov     mant2+2,a
027C E50B       +1  8013+1           mov     a,mant2+3
027E 13         +1  8014+1           rrc     a
027F F50B       +1  8015+1           mov     mant2+3,a
0281 5014       +1  8016             jnc     mup2            ;skip if bit not set
                +1  8017+3           dan     prod            ;add to prod
0283 ED         +1  8018+1           mov     a,r5
0284 250F       +1  8019+1           add     a,prod+3
0286 F50F       +1  8020+1           mov     prod+3,a
0288 E50E       +1  8021+1           mov     a,prod+2
028A 3C         +1  8022+1           addc    a,r4
028B F50E       +1  8023+1           mov     prod+2,a
028D E50D       +1  8024+1           mov     a,prod+1
028F 3B         +1  8025+1           addc    a,r3
0290 F50D       +1  8026+1           mov     prod+1,a
0292 E50C       +1  8027+1           mov     a,prod+0
0294 3A         +1  8028+1           addc    a,r2
0295 F50C       +1  8029+1           mov     prod,a
0297            +1  8030     mup2:
0297 DEBE       +1  8031             djnz    r6,mup11        ;loop if more
0299 E8         +1  8032             mov     a,r0            ;get exp1
029A 29         +1  8033             add     a,r1            ;add exp2
029B 247A       +1  8034             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  8035             mov     r0,a            ;store
029E EF         +1  8036             mov     a,r7            ;get sign
029F 23         +1  8037             rl      a               ;rotate bit into msb
02A0 6207       +1  8038             xrl     sign,a          ;xor with other bit
                +1  8039+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  8040+1           mov     r2,prod
02A4 AB0D       +1  8041+1           mov     r3,prod+1
02A6 AC0E       +1  8042+1           mov     r4,prod+2
02A8 AD0F       +1  8043+1           mov     r5,prod+3
02AA 11F0       +1  8044             call    norm1           ;normalize
02AC 11DE       +1  8045             call    pack1
                +1  8046+3           restregs
02AE D000       +1  8047+1           pop     0
02B0 D001       +1  8048+1           pop     1
02B2 D006       +1  8049+1           pop     6
02B4 D007       +1  8050+1           pop     7
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   128

02B6 22         +1  8051             ret
                +1  8052     ;-----------------------------------------------------------
                +1  8053     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  8054     
02B7            +1  8055     fldiv:
                +1  8056+3           saveregs
02B7 C007       +1  8057+1           push    7
02B9 C006       +1  8058+1           push    6
02BB C001       +1  8059+1           push    1
02BD C000       +1  8060+1           push    0
02BF 119E       +1  8061             call    unpack1
02C1 11BA       +1  8062             call    unpack2
02C3 E4         +1  8063             clr     a
02C4 F50C       +1  8064             mov     prod,a
02C6 F50D       +1  8065             mov     prod+1,a
02C8 F50E       +1  8066             mov     prod+2,a
02CA F50F       +1  8067             mov     prod+3,a
02CC E9         +1  8068             mov     a,r1            ;check for zero divisor
02CD 6067       +1  8069             jz      div9
02CF E8         +1  8070             mov     a,r0            ;check for zero dividend
02D0 6064       +1  8071             jz      div9
02D2 C3         +1  8072             clr     c
02D3 99         +1  8073             subb    a,r1            ;compute new exponent
02D4 2478       +1  8074             add     a,#127-7        ;unbias
02D6 F8         +1  8075             mov     r0,a            ;store back
02D7 EF         +1  8076             mov     a,r7            ;get sign
02D8 23         +1  8077             rl      a
02D9 6207       +1  8078             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  8079             mov     r6,#24+7        ;initialize counter
02DD            +1  8080     div1:
                +1  8081+3           shfup   prod            ;shift quotient up
02DD C3         +1  8082+1           clr     c
02DE E50F       +1  8083+1           mov     a,prod+3
02E0 33         +1  8084+1           rlc     a
02E1 F50F       +1  8085+1           mov     prod+3,a
02E3 E50E       +1  8086+1           mov     a,prod+2
02E5 33         +1  8087+1           rlc     a
02E6 F50E       +1  8088+1           mov     prod+2,a
02E8 E50D       +1  8089+1           mov     a,prod+1
02EA 33         +1  8090+1           rlc     a
02EB F50D       +1  8091+1           mov     prod+1,a
02ED E50C       +1  8092+1           mov     a,prod
02EF 33         +1  8093+1           rlc     a
02F0 F50C       +1  8094+1           mov     prod,a
02F2 C3         +1  8095             clr     c
02F3 EA         +1  8096             mov     a,r2            ;compare values
02F4 9508       +1  8097             subb    a,mant2
02F6 4028       +1  8098             jc      div2            ;skip if bigger
02F8 7013       +1  8099             jnz     div3
02FA EB         +1  8100             mov     a,r3            ;compare values
02FB 9509       +1  8101             subb    a,mant2+1
02FD 4021       +1  8102             jc      div2            ;skip if bigger
02FF 700C       +1  8103             jnz     div3
0301 EC         +1  8104             mov     a,r4            ;compare values
0302 950A       +1  8105             subb    a,mant2+2
0304 401A       +1  8106             jc      div2            ;skip if bigger
0306 7005       +1  8107             jnz     div3
0308 ED         +1  8108             mov     a,r5            ;compare values
0309 950B       +1  8109             subb    a,mant2+3
030B 4013       +1  8110             jc      div2            ;skip if bigger
030D            +1  8111     div3:
030D ED         +1  8112             mov     a,r5
030E 950B       +1  8113             subb    a,mant2+3
0310 FD         +1  8114             mov     r5,a
0311 EC         +1  8115             mov     a,r4
0312 950A       +1  8116             subb    a,mant2+2               ;do subtraction
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   129

0314 FC         +1  8117             mov     r4,a
0315 EB         +1  8118             mov     a,r3
0316 9509       +1  8119             subb    a,mant2+1               ;do subtraction
0318 FB         +1  8120             mov     r3,a
0319 EA         +1  8121             mov     a,r2
031A 9508       +1  8122             subb    a,mant2         ;do subtraction
031C FA         +1  8123             mov     r2,a
031D 430F01     +1  8124             orl     prod+3,#1       ;set lsb in quotient
0320            +1  8125     div2:
                +1  8126+3           lshift                  ;shift dividend up
0320 ED         +1  8127+1           mov     a,r5
0321 33         +1  8128+1           rlc     a
0322 FD         +1  8129+1           mov     r5,a
0323 EC         +1  8130+1           mov     a,r4
0324 33         +1  8131+1           rlc     a
0325 FC         +1  8132+1           mov     r4,a
0326 EB         +1  8133+1           mov     a,r3
0327 33         +1  8134+1           rlc     a
0328 FB         +1  8135+1           mov     r3,a
0329 EA         +1  8136+1           mov     a,r2
032A 33         +1  8137+1           rlc     a
032B FA         +1  8138+1           mov     r2,a
032C DEAF       +1  8139             djnz    r6,div1         ;loop if more
                +1  8140+3           copytor prod            ;copy quotient
032E AA0C       +1  8141+1           mov     r2,prod
0330 AB0D       +1  8142+1           mov     r3,prod+1
0332 AC0E       +1  8143+1           mov     r4,prod+2
0334 AD0F       +1  8144+1           mov     r5,prod+3
0336            +1  8145     div9:
0336 11F0       +1  8146             call    norm1           ;now normalize result
0338 11DE       +1  8147             call    pack1           ;pack it up
                +1  8148+3           restregs                ;restore registers
033A D000       +1  8149+1           pop     0
033C D001       +1  8150+1           pop     1
033E D006       +1  8151+1           pop     6
0340 D007       +1  8152+1           pop     7
0342 22         +1  8153             ret
                +1  8154     ;------------------------------------------------------------------
                +1  8155     
                +1  8156     ;       Float to long conversion: if the exponent is less than the
                +1  8157     ;       excess value, the result is zero. If the exponent is so large
                +1  8158     ;       that the value would be shifted out, the result is overflow.
                +1  8159     ;       Otherwise shift the mantissa up or down as required.
                +1  8160     
0343            +1  8161     ftol:
                +1  8162+3           saveregs
0343 C007       +1  8163+1           push    7
0345 C006       +1  8164+1           push    6
0347 C001       +1  8165+1           push    1
0349 C000       +1  8166+1           push    0
034B EA         +1  8167             mov     a,r2
034C B4BF09     +1  8168             cjne    a,#0bfh,ne05
034F EB         +1  8169             mov     a,r3
0350 7006       +1  8170             jnz     ne05
0352 EC         +1  8171             mov     a,r4
0353 7003       +1  8172             jnz     ne05
0355 ED         +1  8173             mov     a,r5
0356 6024       +1  8174             jz      ftol1
0358 119E       +1  8175     ne05:   call    unpack1
035A E8         +1  8176             mov     a,r0            ;get exponent
035B 2482       +1  8177             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  8178             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  8179             mov     a,r7            ;get sign
0361 30E70D     +1  8180             jnb     acc.7,ftol4     ;skip if +ve
                +1  8181+3           neg1                    ;negate it
0364 C3         +1  8182+1           clr     c
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   130

0365 E4         +1  8183+1           clr     a
0366 9D         +1  8184+1           subb    a,r5
0367 FD         +1  8185+1           mov     r5,a
0368 E4         +1  8186+1           clr     a
0369 9C         +1  8187+1           subb    a,r4
036A FC         +1  8188+1           mov     r4,a
036B E4         +1  8189+1           clr     a
036C 9B         +1  8190+1           subb    a,r3
036D FB         +1  8191+1           mov     r3,a
036E E4         +1  8192+1           clr     a
036F 9A         +1  8193+1           subb    a,r2
0370 FA         +1  8194+1           mov     r2,a
0371            +1  8195     ftol4:
0371 E8         +1  8196             mov     a,r0            ;get exponent
0372 246A       +1  8197             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  8198             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  8199             mov     r0,a            ;save it
0378 24F8       +1  8200             add     a,#-8           ;if > 8, too big
037A 500E       +1  8201             jnc     ftol3
037C            +1  8202     ftol1:
037C E4         +1  8203             clr     a
037D FA         +1  8204             mov     r2,a
037E FB         +1  8205             mov     r3,a
037F FC         +1  8206             mov     r4,a
0380 FD         +1  8207             mov     r5,a
0381            +1  8208     ftol9:
                +1  8209+3           restregs
0381 D000       +1  8210+1           pop     0
0383 D001       +1  8211+1           pop     1
0385 D006       +1  8212+1           pop     6
0387 D007       +1  8213+1           pop     7
0389 22         +1  8214             ret
038A            +1  8215     ftol3:
038A E8         +1  8216             mov     a,r0
038B FE         +1  8217             mov     r6,a            ;store in counter
038C 60F3       +1  8218             jz      ftol9           ;if zero, do nothing
038E            +1  8219     ftol33:
                +1  8220+3           lshift                  ;shift up
038E ED         +1  8221+1           mov     a,r5
038F 33         +1  8222+1           rlc     a
0390 FD         +1  8223+1           mov     r5,a
0391 EC         +1  8224+1           mov     a,r4
0392 33         +1  8225+1           rlc     a
0393 FC         +1  8226+1           mov     r4,a
0394 EB         +1  8227+1           mov     a,r3
0395 33         +1  8228+1           rlc     a
0396 FB         +1  8229+1           mov     r3,a
0397 EA         +1  8230+1           mov     a,r2
0398 33         +1  8231+1           rlc     a
0399 FA         +1  8232+1           mov     r2,a
039A DEF2       +1  8233             djnz    r6,ftol33       ;and loop
039C 80E3       +1  8234             sjmp    ftol9
039E            +1  8235     ftol2:
039E F4         +1  8236             cpl     a               ;complement
039F FE         +1  8237             mov     r6,a
03A0 6022       +1  8238             jz      ftol22
03A2            +1  8239     ftol23:
03A2 EF         +1  8240             mov     a,r7
03A3 30E70F     +1  8241             jnb     acc.7,ftol24
                +1  8242+3           rshift1
03A6 D3         +1  8243+1           setb    c
03A7 EA         +1  8244+1           mov     a,r2
03A8 13         +1  8245+1           rrc     a
03A9 FA         +1  8246+1           mov     r2,a
03AA EB         +1  8247+1           mov     a,r3
03AB 13         +1  8248+1           rrc     a
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   131

03AC FB         +1  8249+1           mov     r3,a
03AD EC         +1  8250+1           mov     a,r4
03AE 13         +1  8251+1           rrc     a
03AF FC         +1  8252+1           mov     r4,a
03B0 ED         +1  8253+1           mov     a,r5
03B1 13         +1  8254+1           rrc     a
03B2 FD         +1  8255+1           mov     r5,a
03B3 800D       +1  8256             jmp     ftol25
03B5            +1  8257+3   ftol24: rshift                  ;shift down
03B5 C3         +1  8258+1           clr     c
03B6 EA         +1  8259+1           mov     a,r2
03B7 13         +1  8260+1           rrc     a
03B8 FA         +1  8261+1           mov     r2,a
03B9 EB         +1  8262+1           mov     a,r3
03BA 13         +1  8263+1           rrc     a
03BB FB         +1  8264+1           mov     r3,a
03BC EC         +1  8265+1           mov     a,r4
03BD 13         +1  8266+1           rrc     a
03BE FC         +1  8267+1           mov     r4,a
03BF ED         +1  8268+1           mov     a,r5
03C0 13         +1  8269+1           rrc     a
03C1 FD         +1  8270+1           mov     r5,a
03C2 DEDE       +1  8271     ftol25: djnz    r6,ftol23
03C4            +1  8272     ftol22:
                +1  8273+3           add1                    ;round
03C4 ED         +1  8274+1           mov     a,r5
03C5 2401       +1  8275+1           add     a,#1
03C7 FD         +1  8276+1           mov     r5,a
03C8 E4         +1  8277+1           clr     a
03C9 3C         +1  8278+1           addc    a,r4
03CA FC         +1  8279+1           mov     r4,a
03CB E4         +1  8280+1           clr     a
03CC 3B         +1  8281+1           addc    a,r3
03CD FB         +1  8282+1           mov     r3,a
03CE E4         +1  8283+1           clr     a
03CF 3A         +1  8284+1           addc    a,r2
03D0 FA         +1  8285+1           mov     r2,a
03D1 EF         +1  8286             mov     a,r7
03D2 30E70F     +1  8287             jnb     acc.7,ftol26
                +1  8288+3           rshift1
03D5 D3         +1  8289+1           setb    c
03D6 EA         +1  8290+1           mov     a,r2
03D7 13         +1  8291+1           rrc     a
03D8 FA         +1  8292+1           mov     r2,a
03D9 EB         +1  8293+1           mov     a,r3
03DA 13         +1  8294+1           rrc     a
03DB FB         +1  8295+1           mov     r3,a
03DC EC         +1  8296+1           mov     a,r4
03DD 13         +1  8297+1           rrc     a
03DE FC         +1  8298+1           mov     r4,a
03DF ED         +1  8299+1           mov     a,r5
03E0 13         +1  8300+1           rrc     a
03E1 FD         +1  8301+1           mov     r5,a
03E2 809D       +1  8302             jmp     ftol9
03E4            +1  8303+3   ftol26: rshift
03E4 C3         +1  8304+1           clr     c
03E5 EA         +1  8305+1           mov     a,r2
03E6 13         +1  8306+1           rrc     a
03E7 FA         +1  8307+1           mov     r2,a
03E8 EB         +1  8308+1           mov     a,r3
03E9 13         +1  8309+1           rrc     a
03EA FB         +1  8310+1           mov     r3,a
03EB EC         +1  8311+1           mov     a,r4
03EC 13         +1  8312+1           rrc     a
03ED FC         +1  8313+1           mov     r4,a
03EE ED         +1  8314+1           mov     a,r5
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   132

03EF 13         +1  8315+1           rrc     a
03F0 FD         +1  8316+1           mov     r5,a
03F1 808E       +1  8317             jmp     ftol9
                +1  8318     
                +1  8319     ;       arithmetic integer to floating conversions
                +1  8320     
03F3            +1  8321     abtof:
03F3 ED         +1  8322             mov     a,r5
03F4 23         +1  8323             rl      a
03F5 FC         +1  8324             mov     r4,a
03F6 9C         +1  8325             subb    a,r4
03F7 FC         +1  8326             mov     r4,a
03F8 FB         +1  8327             mov     r3,a
03F9 FA         +1  8328             mov     r2,a
03FA 8006       +1  8329             jmp     altof
03FC            +1  8330     awtof:
03FC EC         +1  8331             mov     a,r4
03FD 23         +1  8332             rl      a
03FE FB         +1  8333             mov     r3,a
03FF 9B         +1  8334             subb    a,r3
0400 FB         +1  8335             mov     r3,a
0401 FA         +1  8336             mov     r2,a
0402            +1  8337     altof:
                +1  8338+3           saveregs
0402 C007       +1  8339+1           push    7
0404 C006       +1  8340+1           push    6
0406 C001       +1  8341+1           push    1
0408 C000       +1  8342+1           push    0
040A EA         +1  8343             mov     a,r2            ;get sign
040B 5480       +1  8344             anl     a,#80h
040D FF         +1  8345             mov     r7,a            ;store it
040E 30E70D     +1  8346             jnb     acc.7,altof1    ;skip if +ve
                +1  8347+3           neg1
0411 C3         +1  8348+1           clr     c
0412 E4         +1  8349+1           clr     a
0413 9D         +1  8350+1           subb    a,r5
0414 FD         +1  8351+1           mov     r5,a
0415 E4         +1  8352+1           clr     a
0416 9C         +1  8353+1           subb    a,r4
0417 FC         +1  8354+1           mov     r4,a
0418 E4         +1  8355+1           clr     a
0419 9B         +1  8356+1           subb    a,r3
041A FB         +1  8357+1           mov     r3,a
041B E4         +1  8358+1           clr     a
041C 9A         +1  8359+1           subb    a,r2
041D FA         +1  8360+1           mov     r2,a
041E            +1  8361     altof1:
041E 7896       +1  8362             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8363             call    norm1           ;normalize it
0422 11DE       +1  8364             call    pack1           ;and pack up
                +1  8365+3           restregs
0424 D000       +1  8366+1           pop     0
0426 D001       +1  8367+1           pop     1
0428 D006       +1  8368+1           pop     6
042A D007       +1  8369+1           pop     7
042C 22         +1  8370             ret
                +1  8371     
042D            +1  8372     lbtof:
042D 7C00       +1  8373             mov     r4,#0
042F            +1  8374     lwtof:
042F E4         +1  8375             clr     a
0430 FB         +1  8376             mov     r3,a
0431 FA         +1  8377             mov     r2,a
0432            +1  8378     lltof:
                +1  8379+3           saveregs
0432 C007       +1  8380+1           push    7
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   133

0434 C006       +1  8381+1           push    6
0436 C001       +1  8382+1           push    1
0438 C000       +1  8383+1           push    0
043A 7F00       +1  8384             mov     r7,#0           ;zero sign
043C 80E0       +1  8385             sjmp    altof1
                +1  8386     
                +1  8387     ;-------------------------------------------------------
                +1  8388     
                +1  8389     
                    8390     
                    8391     ;$include (d:\amp\wriread.asm)
                +1  8392     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8393     cle256:          mov            IE,#00H
0441 75B601     +1  8394                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8395                              MOV            PSCTL,#03
                +1  8396                                             
0447 7400       +1  8397                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8398                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8399                                     mov             PSCTL,#00
044D 75B600     +1  8400                                 mov         FLSCL,#00
0450 75A880     +1  8401                               mov           IE,#80H
0453 22         +1  8402                                     ret
                +1  8403     
                +1  8404     ;чтение памяти программ в r8..r11
                +1  8405     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8406     re4byte:        mov                     dph,r2
0456 8B82       +1  8407                                             mov                     dpl,r3
0458 E4         +1  8408                                             clr                     a
0459 93         +1  8409                                             movc            a,@a+dptr
045A F508       +1  8410                                             mov                     r8,a
045C A3         +1  8411                                             inc                     dptr
045D E4         +1  8412                                             clr                     a
045E 93         +1  8413                                             movc            a,@a+dptr
045F F509       +1  8414                                             mov                     r9,a
0461 A3         +1  8415                                             inc                     dptr
0462 E4         +1  8416                                             clr                     a
0463 93         +1  8417                                             movc            a,@a+dptr
0464 F50A       +1  8418                                             mov                     r10,a
0466 A3         +1  8419                                             inc                     dptr
0467 E4         +1  8420                                             clr                     a
0468 93         +1  8421                                             movc            a,@a+dptr
0469 F50B       +1  8422                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8423                                             ret
                +1  8424      ;чтение памяти программ в r2..r5
                +1  8425     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8426     rebyte2:        mov                     dph,r2
046E 8B82       +1  8427                                             mov                     dpl,r3
0470 E4         +1  8428                                             clr                     a
0471 93         +1  8429                                             movc            a,@a+dptr
0472 FA         +1  8430                                             mov                     r2,a
0473 A3         +1  8431                                             inc                     dptr
0474 E4         +1  8432                                             clr                     a
0475 93         +1  8433                                             movc            a,@a+dptr
0476 FB         +1  8434                                             mov                     r3,a
0477 A3         +1  8435                                             inc                     dptr
0478 E4         +1  8436                                             clr                     a
0479 93         +1  8437                                             movc            a,@a+dptr
047A FC         +1  8438                                             mov                     r4,a
047B A3         +1  8439                                             inc                     dptr
047C E4         +1  8440                                             clr                     a
047D 93         +1  8441                                             movc            a,@a+dptr
047E FD         +1  8442                                             mov                     r5,a                       
                                                  ;r8..r11
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   134

047F 22         +1  8443                                             ret
                +1  8444      
                +1  8445     
                +1  8446      ;r7-количество байт
                +1  8447     ;dptr-адр ячейки для записи
                +1  8448     ;r1-адр ячейки  внешнего озу
                +1  8449     
0480 75A800     +1  8450     wrpage:  mov            IE,#00H
0483 75B601     +1  8451     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  8452                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8453                      movx           a,@r1
048A F0         +1  8454                      movx           @dptr,a                         ;wr
048B 758F00     +1  8455                      mov            PSCTL,#0
048E 75B600     +1  8456                      mov            FLSCL,#00
0491 A3         +1  8457                     inc                     dptr
0492 09         +1  8458                     inc                     r1
0493 DFEE       +1  8459                     djnz            r7,WW5
0495 75A880     +1  8460                     mov             IE,#80H
0498 22         +1  8461                     ret
                +1  8462                             
                +1  8463     
                +1  8464     
                +1  8465                                                             
                +1  8466     
                +1  8467     
                +1  8468     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8469     ;чтение памяти программ во внешнее озу
                +1  8470     ;вх-r2,r3-адр яч памяти прогр
                +1  8471     ;r1- яч внешнее озу
0499 8A83       +1  8472     copyPP:         mov                     dph,r2
049B 8B82       +1  8473                                             mov                     dpl,r3
049D 7FFF       +1  8474                                             mov                     r7,#0ffh
049F E4         +1  8475     copy1:          clr                     a
04A0 93         +1  8476                                             movc            a,@a+dptr
04A1 F3         +1  8477                                             movx                    @r1,a
04A2 A3         +1  8478                                             inc                     dptr
04A3 09         +1  8479                                             inc                     r1
04A4 DFF9       +1  8480                                             djnz            r7,copy1
04A6 22         +1  8481                                             ret
                +1  8482     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8483     
                +1  8484                                     
                +1  8485     
                +1  8486     ;r8..r11->@r0..@r0+3
                +1  8487     ;r0-адр ячейки
                +1  8488     ;сохранить в ячейке озу
04A7 E508       +1  8489     savelte:        mov     a,ltemp
04A9 F6         +1  8490                                             mov     @r0,a
04AA 08         +1  8491                                             inc     r0
04AB E509       +1  8492                                             mov     a,ltemp+1
04AD F6         +1  8493                                             mov     @r0,a
04AE 08         +1  8494                                             inc     r0
04AF E50A       +1  8495                                             mov     a,ltemp+2
04B1 F6         +1  8496                                             mov     @r0,a
04B2 08         +1  8497                                             inc     r0
04B3 E50B       +1  8498                                             mov     a,ltemp+3
04B5 F6         +1  8499                                             mov     @r0,a
04B6 22         +1  8500                                             ret
                +1  8501     
                +1  8502     ;
                +1  8503     
                +1  8504     
                +1  8505     
                +1  8506     
                +1  8507     
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   135

                +1  8508                     
                +1  8509     
                +1  8510     
                +1  8511     
                +1  8512     
                +1  8513      
                    8514     
                    8515                                                   
                    8516     END
                                                                             
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   136

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03B7H   R   SEG=MAIN   871#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1479 1536 1561 1582 1586 1589 1590 1592 1680 1685 3706 3720 3801
                                           3804 3847 3942 3986 3989 4066 4070 4071 4072 4075 4318 4355 4356 4358 4435
                                           4455 4546 4550 4593 4596 4965 4970 5155 5160 5957 6119 6122
ABRET. . . . . . .  C ADDR   24B3H   R   SEG=MAIN   5886 5888#
ABTOF. . . . . . .  C ADDR   03F3H   A      8321#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 682 699 749 757 765 773 775 795 1150 1161 1169 1248 1817 1826 1835
                                           1844 1865 2263 2288 2293 2297 2302 2305 2308 2311 2314 2508 2570 2616 2627
                                           2719 2728 2736 2745 2891 2949 2974 2979 2983 2986 2989 2996 2999 3002 3341
                                           3429 3475 3497 3516 3538 3589 4495 4501 4538 4627 5460 6549 6728 6806 6809
                                           7066 7718 7801 7818 7850 7888 7916 8178 8180 8198 8241 8287 8346
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2C78H   R   SEG=MAIN   906 943 945 947 949 951 953 955 957 959 1025 1027 1029 1031 1033
                                           1035 1037 1039 1041 1044 1046 1048 1050 1052 1054 1056 1058 1060 1062 1081
                                           1083 1085 7307#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1535 1547 1551 1566 1591 1594 1595 1684 1688 3719 3723 3798 3802
                                           3844 3848 3939 3943 3988 3992 4074 4087 4328 4342 4344 4346 4357 4360 4445
                                           4456 4551 4597 4969 4973 5159 5163 5758 5777 5795 5858 5875 6121 6124 6470
                                           6502
ADRBLOK. . . . . .  C ADDR   292CH   R   SEG=MAIN   3413 3436 3817 3960 4858 4887 5015 5074 5184 5244 6514#
AFTERK . . . . . .  C ADDR   06AEH   R   SEG=MAIN   1178 1257#
AGE2 . . . . . . .  C ADDR   024EH   R   SEG=MAIN   634# 637
AGE9 . . . . . . .  C ADDR   0874H   R   SEG=MAIN   1483# 1486
AGEON. . . . . . .  C ADDR   025CH   R   SEG=MAIN   643# 645
ALLSUM . . . . . .  C ADDR   0355H   R   SEG=MAIN   815# 850 868 884
ALMUL. . . . . . .  C ADDR   2BBFH   R   SEG=MAIN   7153#
ALTOF. . . . . . .  C ADDR   0402H   A      1144 1242 1273 1281 1299 1315 1326 1343 1356 1441 1977 2087 2167 2205
                                           3851 3948 4459 4554 4600 4699 4777 4785 4803 4928 4940 4955 5058 5120 5136
                                           5228 5290 5305 8329 8337#
ALTOF1 . . . . . .  C ADDR   041EH   A      8346 8361# 8385
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0614H   R   SEG=MAIN   1142 1158#
AN_T7. . . . . . .  C ADDR   121FH   R   SEG=MAIN   3003# 3068 3070 3078 3088
AUTOKA . . . . . .  C ADDR   0C7EH   R   SEG=MAIN   1176 2135#
AVPGO. . . . . . .  C ADDR   07DFH   R   SEG=MAIN   1403 1405#
AVTDEC1. . . . . .  C ADDR   0670H   R   SEG=MAIN   1211 1220#
AWTOF. . . . . . .  C ADDR   03FCH   A      8330#
B. . . . . . . . .  D ADDR   00F0H   A      122# 5605 5977 7156 7159 7161 7165 7169 7173 7177 7182 7186 7193 7197
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   137

                                           7201 7207 7211 7215 7221 7914 7915
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 462#
BFORM. . . . . . .  C ADDR   2869H   R   SEG=MAIN   6319 6324 6336# 6362
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4695 4751 4850
BIN30. . . . . . .  C ADDR   29DBH   R   SEG=MAIN   6716# 6742
BIN31. . . . . . .  C ADDR   29DFH   R   SEG=MAIN   6721# 6725
BIN32. . . . . . .  C ADDR   29EFH   R   SEG=MAIN   6734# 6739
BIN41. . . . . . .  C ADDR   2A00H   R   SEG=MAIN   6750# 6760
BINDEC . . . . . .  C ADDR   29CFH   R   SEG=MAIN   1537 1593 1686 3721 3990 4076 4359 4971 5161 6123 6695#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1771 1772 1775
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1369 1602 1761 3066 3067 3069
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1797 1921 2108 2135 2323 2324 2332 6550
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1267 1707 1714 1779 2374 2418 3037 3053 4231 5524
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 583 717 1607 2294 2376 2390 2466 2501 2532 2980 3040 3164 3186 3261
                                           3293 3318 3432 3556 3821 3869 3897 4058 4186 4232 4279 4391 4468 4582
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1336 1795 2299 3039 3057 3065 3072 3292 4466 4765
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1092 1095 6302
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1670 2713 3296 3314 3330 3431 3555 3822 3868 4057
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1669 2531 2644 3041 3317 3877 3896 4191 4233 4278 4390 4465
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2609 2802 2902 3229 3618 3758 3771 4297 4424 4530 4631 6042 6068
                                           6093 6105 6168 6175 6181 6187
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1417 1626 1742 2363 3086 3090 3091 3098
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 658 1610 1667 3042
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4197 4766
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1920
BITPRER. . . . . .  B ADDR   0023H.4 A      358#
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1666 2467 2502 2505 3105 3262
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 527 531 2680 2685 2691 4175 4180 4261 4274 4396 4400 4405
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1367 1383 1426 2317 2319 2375 2389 2530 3036 3156 3163 3316 4581
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1425 1665 2318 2377 2387 2529 2537 3123 3155 3185 3315 4580
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 683 732
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4601 5884 5887
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1418 1627 2035 2038 2427
BLOIN. . . . . . .  C ADDR   16D8H   R   SEG=MAIN   3726# 3731
BLOKVV . . . . . .  C ADDR   16AAH   R   SEG=MAIN   3696#
BLOKVVC. . . . . .  C ADDR   16B4H   R   SEG=MAIN   3699 3702#
BL_LI. . . . . . .  C ADDR   1675H   R   SEG=MAIN   3646 3654#
BONPART. . . . . .  C ADDR   0C4EH   R   SEG=MAIN   2107#
BOUT7. . . . . . .  C ADDR   13F9H   R   SEG=MAIN   3272# 3274 3292
BRET . . . . . . .  C ADDR   22F4H   R   SEG=MAIN   5545 5550 5554#
BUFDEC . . . . . .  C ADDR   09BCH   R   SEG=MAIN   1691# 1696
BUFIND . . . . . .  D ADDR   0040H   A      298# 633 637 642 645 651 1482 1486 1552 1573 1594 1595 1596 1645 1650
                                           1689 1697 1699 1704 1740 1759 1765 1773 1776 1781 1796 1798 2282 2329 2333
                                           2584 2602 2618 2620 2623 2683 2684 2689 2690 2797 2841 2860 2967 3045 3107
                                           3165 3166 3212 3216 3242 3264 3278 3285 3297 3298 3404 3613 3640 3668 3697
                                           3724 3738 3739 3743 3744 3751 3752 3757 3773 3912 3919 3993 4001 4003 4019
                                           4043 4077 4086 4088 4152 4174 4181 4289 4327 4360 4361 4362 4363 4365 4399
                                           4404 4416 4444 4467 4522 4568 4974 4982 4986 5164 5172 5176 5342 5374 5603
                                           5616 5622 5629 5757 5776 5794 5857 5874 5885 6045 6071 6125 6172 6193 6469
                                           6501 6551
BUFL_DEC . . . . .  C ADDR   219BH   R   SEG=MAIN   5316#
BUFMEA . . . . . .  C ADDR   1FBAH   R   SEG=MAIN   4976# 4981
BUFMIN . . . . . .  C ADDR   20C9H   R   SEG=MAIN   5166# 5171
BUFON. . . . . . .  C ADDR   0DE1H   R   SEG=MAIN   2323 2332#
BUFR . . . . . . .  C ADDR   0919H   R   SEG=MAIN   1575# 1580
BUFR2. . . . . . .  C ADDR   08FBH   R   SEG=MAIN   1554# 1559
BUFR3. . . . . . .  C ADDR   08F4H   R   SEG=MAIN   1545 1550#
BUFR30 . . . . . .  C ADDR   08F7H   R   SEG=MAIN   1548 1552#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7911# 7915
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   138

CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357 358
CEXP . . . . . . .  C ADDR   01E2H   A      7888 7897#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   2397H   R   SEG=MAIN   1463 3099 4557 5689#
CH1. . . . . . . .  C ADDR   23B7H   R   SEG=MAIN   5509 5700#
CH10 . . . . . . .  C ADDR   239BH   R   SEG=MAIN   867 1106 3978 5690#
CH100. . . . . . .  C ADDR   23AFH   R   SEG=MAIN   814 5695#
CH10000. . . . . .  C ADDR   23ABH   R   SEG=MAIN   5694#
CH150H . . . . . .  C ADDR   23FFH   R   SEG=MAIN   5719#
CH2. . . . . . . .  C ADDR   23B3H   R   SEG=MAIN   1101 5696#
CH20 . . . . . . .  C ADDR   257AH   R   SEG=MAIN   849 1111 6008#
CH2THO . . . . . .  C ADDR   23DFH   R   SEG=MAIN   2174 2212 5711#
CH320H . . . . . .  C ADDR   23FBH   R   SEG=MAIN   5718# 6522
CH4. . . . . . . .  C ADDR   23A3H   R   SEG=MAIN   1115 5692#
CH43 . . . . . . .  C ADDR   18E3H   R   SEG=MAIN   3995# 4000
CH43_42. . . . . .  C ADDR   1989H   R   SEG=MAIN   4090# 4095
CH5. . . . . . . .  C ADDR   239FH   R   SEG=MAIN   883 5691#
CH57 . . . . . . .  C ADDR   2576H   R   SEG=MAIN   6007#
CH954. . . . . . .  C ADDR   23A7H   R   SEG=MAIN   5693#
CHAIBL . . . . . .  C ADDR   150EH   R   SEG=MAIN   3406 3408#
CHAIPR . . . . . .  C ADDR   1838H   R   SEG=MAIN   3914 3916#
CHANMA . . . . . .  C ADDR   0FBCH   R   SEG=MAIN   2616 2625#
CHANZ. . . . . . .  C ADDR   0FA3H   R   SEG=MAIN   2570 2614#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 562 1167 1212 1220 2127 2231 4187
CHBEFORE . . . . .  D ADDR   009BH   A      381# 585 811 825 844 862 878
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4885 4935 4951 5072 5126 5242 5296
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 596 1895 2003 2044 2049 2109 2117 3866 5316 5321
CHBUF1 . . . . . .  X ADDR   0E00H   A      438# 1905 1990
CHCMP. . . . . . .  C ADDR   2297H   R   SEG=MAIN   1173 5486#
CHDEC. . . . . . .  C ADDR   22AAH   R   SEG=MAIN   1221 1234 5501#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2068 2095 2137 2187 2225
CHDELMO. . . . . .  C ADDR   0C39H   R   SEG=MAIN   2078 2095# 2100
CHIF . . . . . . .  C ADDR   25BFH   R   SEG=MAIN   6049 6052#
CHIF5. . . . . . .  C ADDR   25C7H   R   SEG=MAIN   6055 6057#
CHIFB. . . . . . .  C ADDR   25EAH   R   SEG=MAIN   6075 6078#
CHIFB1 . . . . . .  C ADDR   25F0H   R   SEG=MAIN   6077 6078 6081#
CHIFL5 . . . . . .  C ADDR   25F8H   R   SEG=MAIN   6085 6088#
CHIFOUR. . . . . .  C ADDR   25D9H   R   SEG=MAIN   6062 6064 6068#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1385 1802
CHIND2 . . . . . .  D ADDR   0033H   A      315# 719 721 729
CHINKOR. . . . . .  D ADDR   0098H   A      370# 557 793 1159 1172 1214 1228 1233 2102
CHK. . . . . . . .  C ADDR   23F7H   R   SEG=MAIN   1337 5717#
CHKL . . . . . . .  D ADDR   003DH   A      305# 698 709 711 712 714 2445 2472 2520 2631 3017 3302 4049 4471
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1089 1096 1119 6301
CHMASN . . . . . .  D ADDR   003FH   A      306# 800 809 845 863 879 895 1094 1096 1097
CHMINUS. . . . . .  C ADDR   2911H   R   SEG=MAIN   3426 3472 3494 3513 3535 6484# 6546
CHTADC . . . . . .  C ADDR   2241H   R   SEG=MAIN   5418#
CHTHO. . . . . . .  C ADDR   23D7H   R   SEG=MAIN   1306 1344 4708 4793 4811 5709#
CHTHOU . . . . . .  C ADDR   247EH   R   SEG=MAIN   5845#
CHZAP. . . . . . .  C ADDR   2393H   R   SEG=MAIN   1884 5688#
CH_1 . . . . . . .  C ADDR   23BFH   R   SEG=MAIN   588 1499 1522 1902 2046 2121 3949 5318 5702#
CH_10. . . . . . .  C ADDR   23EFH   R   SEG=MAIN   1505 1528 1986 2016 4460 4960 5149 5715#
CH_10TH. . . . . .  C ADDR   23EBH   R   SEG=MAIN   1398 5714#
CH_2 . . . . . . .  C ADDR   23C3H   R   SEG=MAIN   1897 1981 2009 2025 5703#
CH_200 . . . . . .  C ADDR   23E7H   R   SEG=MAIN   5713#
CH_220 . . . . . .  C ADDR   23E3H   R   SEG=MAIN   1360 5712#
CH_22T . . . . . .  C ADDR   24BCH   R   SEG=MAIN   1451 5893#
CH_250 . . . . . .  C ADDR   23F3H   R   SEG=MAIN   1262 5716#
CH_4 . . . . . . .  C ADDR   23C7H   R   SEG=MAIN   2019 3952 5704#
CH_5 . . . . . . .  C ADDR   23CBH   R   SEG=MAIN   5705#
CH_500 . . . . . .  C ADDR   24B8H   R   SEG=MAIN   1447 5892#
CH_7 . . . . . . .  C ADDR   23CFH   R   SEG=MAIN   2113 5706#
CH_953 . . . . . .  C ADDR   23D3H   R   SEG=MAIN   5708#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   139

CH_B . . . . . . .  C ADDR   24B4H   R   SEG=MAIN   1467 5890#
CH_FL. . . . . . .  C ADDR   24C0H   R   SEG=MAIN   1491 5894#
CH_M3. . . . . . .  C ADDR   2403H   R   SEG=MAIN   5720#
CH_MLN . . . . . .  C ADDR   23BBH   R   SEG=MAIN   5701#
CIKLWR . . . . . .  C ADDR   283FH   R   SEG=MAIN   6307#
CKCON. . . . . . .  D ADDR   008EH   A      30# 480 511
CL4. . . . . . . .  C ADDR   2415H   R   SEG=MAIN   5737# 5739
CL4N . . . . . . .  C ADDR   241BH   R   SEG=MAIN   5746# 5748
CLE20. . . . . . .  C ADDR   1976H   R   SEG=MAIN   4080# 4082
CLE256 . . . . . .  C ADDR   043EH   A      4267 4741 4843 8393#
CLEAR. . . . . . .  C ADDR   29C9H   R   SEG=MAIN   6673 6677# 6707
CLEAR4 . . . . . .  C ADDR   2412H   R   SEG=MAIN   823 1414 1416 1562 1583 1623 1625 2360 2362 3083 3085 4884 5735#
CLEARN . . . . . .  C ADDR   241AH   R   SEG=MAIN   3799 3845 3940 4319 4436 4547 4594 5744#
CLMASSIX . . . . .  C ADDR   282FH   R   SEG=MAIN   548 1412 1621 2106 2235 2358 3081 3260 6295#
CLMASV . . . . . .  C ADDR   07E4H   R   SEG=MAIN   1407 1409#
CLMAX. . . . . . .  C ADDR   2834H   R   SEG=MAIN   6297# 6300
CLR11. . . . . . .  C ADDR   29CAH   R   SEG=MAIN   6679# 6681
CLRDEC . . . . . .  C ADDR   29C3H   R   SEG=MAIN   6671#
CLRNUM . . . . . .  C ADDR   29C7H   R   SEG=MAIN   6674# 6788
CLRVICH. . . . . .  C ADDR   1366H   R   SEG=MAIN   3185# 3202
CL_HL. . . . . . .  C ADDR   15C1H   R   SEG=MAIN   3549# 3564 3569 3573
CL_HL1 . . . . . .  C ADDR   15D3H   R   SEG=MAIN   3546 3561#
CL_HL2 . . . . . .  C ADDR   15DDH   R   SEG=MAIN   3561 3566#
CL_HL3 . . . . . .  C ADDR   15E7H   R   SEG=MAIN   3566 3571#
CNTR . . . . . . .  N NUMB   0006H   A      7584#
CO02S. . . . . . .  C ADDR   237BH   R   SEG=MAIN   5672# 5676
CO05S. . . . . . .  C ADDR   2388H   R   SEG=MAIN   5681# 5685
CO1S . . . . . . .  C ADDR   2372H   R   SEG=MAIN   5666# 5666
CO2S . . . . . . .  C ADDR   236EH   R   SEG=MAIN   5664# 5668
COMPA1 . . . . . .  C ADDR   0890H   R   SEG=MAIN   1499# 1508
COMPA2 . . . . . .  C ADDR   08C6H   R   SEG=MAIN   1522# 1531
COND . . . . . . .  C ADDR   28A3H   R   SEG=MAIN   6391#
COPY1. . . . . . .  C ADDR   049FH   A      8475# 8480
COPYPP . . . . . .  C ADDR   0499H   A      4254 4720 4821 8472#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3965 4101 4877 4893 4908 5065 5080 5095 5235 5250 5265
COUNT. . . . . . .  C ADDR   2350H   R   SEG=MAIN   5638# 5638
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   2357H   R   SEG=MAIN   5644# 5644
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 485
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1892
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1889
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 486
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   28A8H   R   SEG=MAIN   6395# 6397
DCOB . . . . . . .  C ADDR   28AFH   R   SEG=MAIN   6399# 6417
DCOC . . . . . . .  C ADDR   28BAH   R   SEG=MAIN   6409# 6414
DCOD . . . . . . .  C ADDR   28C7H   R   SEG=MAIN   6416 6419#
DDOUTF . . . . . .  C ADDR   162AH   R   SEG=MAIN   3395 3451 3599 3607# 3692
DDOUTFR. . . . . .  C ADDR   14F2H   R   SEG=MAIN   3395# 3401
DEC30. . . . . . .  C ADDR   2A1CH   R   SEG=MAIN   6798# 6823
DEC31. . . . . . .  C ADDR   2A21H   R   SEG=MAIN   6804# 6811
DEC32. . . . . . .  C ADDR   2A31H   R   SEG=MAIN   6816# 6820
DECBIN . . . . . .  C ADDR   2A0FH   R   SEG=MAIN   3803 3849 3944 4457 4552 4598 6777#
DECSIZE. . . . . .  N NUMB   000AH   A      6652# 6672 6706 6733 6746 6749 6803
DECT2. . . . . . .  C ADDR   2A3AH   R   SEG=MAIN   6794 6826#
DEDPTR . . . . . .  C ADDR   2C8FH   R   SEG=MAIN   7311 7315 7319 7325#
DENORM . . . . . .  C ADDR   0133H   A      7743# 7799
DGOTO7 . . . . . .  C ADDR   17BCH   R   SEG=MAIN   3852# 3860
DIAP . . . . . . .  D ADDR   00AEH   A      389# 576 1402 1604 1703 1931 2352 2397 3074 4364 4748 5525 5546 5808 5823
                                           5974 6036
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   140

DIINC. . . . . . .  C ADDR   0E07H   R   SEG=MAIN   2355 2358#
DIKDN. . . . . . .  C ADDR   254EH   R   SEG=MAIN   5976 5996#
DIKDW. . . . . . .  C ADDR   2466H   R   SEG=MAIN   5812 5833#
DIKM . . . . . . .  C ADDR   247CH   R   SEG=MAIN   5844#
DIPAR. . . . . . .  C ADDR   247AH   R   SEG=MAIN   5843#
DIV1 . . . . . . .  C ADDR   02DDH   A      8080# 8139
DIV2 . . . . . . .  C ADDR   0320H   A      8098 8102 8106 8110 8125#
DIV3 . . . . . . .  C ADDR   030DH   A      8099 8103 8107 8111#
DIV9 . . . . . . .  C ADDR   0336H   A      8069 8071 8145#
DIVIDE . . . . . .  C ADDR   2AFAH   R   SEG=MAIN   6323 7012#
DONE . . . . . . .  C ADDR   2A69H   R   SEG=MAIN   6842 6853#
DONE1. . . . . . .  C ADDR   2A67H   R   SEG=MAIN   6845 6848 6851#
DOSH . . . . . . .  C ADDR   2B83H   R   SEG=MAIN   7087 7103#
DOSUB. . . . . . .  C ADDR   2B71H   R   SEG=MAIN   7071 7075 7079 7083 7084 7088#
DPH. . . . . . . .  D ADDR   0083H   A      19# 554 600 608 615 622 2274 2880 2960 3549 3970 3972 4106 4111 4616 4861
                                           4870 4878 4890 4895 4904 4906 4909 4920 5007 5009 5018 5027 5066 5077 5082
                                           5091 5093 5096 5107 5187 5196 5236 5247 5252 5261 5263 5266 5277 6255 6263
                                           6530 6538 6570 6859 6895 6930 6933 6945 6968 7330 7332 8406 8426 8472
DPL. . . . . . . .  D ADDR   0082H   A      18# 603 611 618 625 2273 2881 2959 3552 3966 3968 4103 4114 4617 4859
                                           4866 4881 4888 4898 4901 4903 4912 4916 5004 5006 5016 5023 5069 5075 5085
                                           5088 5090 5099 5103 5185 5192 5239 5245 5255 5258 5260 5269 5273 6256 6262
                                           6527 6541 6574 6875 6911 6932 6946 6949 6983 7327 7329 8407 8427 8473
DVIG0. . . . . . .  C ADDR   0A9DH   R   SEG=MAIN   1838# 1840
DVIG1. . . . . . .  C ADDR   0A92H   R   SEG=MAIN   1829# 1831
DVIG2. . . . . . .  C ADDR   0A87H   R   SEG=MAIN   1820# 1822
DVIG3. . . . . . .  C ADDR   0A7BH   R   SEG=MAIN   1811# 1813
DVIG4. . . . . . .  C ADDR   0AA9H   R   SEG=MAIN   1849# 1851
DVIG6. . . . . . .  C ADDR   0ACBH   R   SEG=MAIN   1877# 1879
DVM. . . . . . . .  C ADDR   0AC9H   R   SEG=MAIN   1865 1876#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 483
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 534 703 2260 2946 5337 5339 5353
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1DD1H   R   SEG=MAIN   3063 4694#
ENDSDV . . . . . .  C ADDR   0ACFH   R   SEG=MAIN   1871 1880#
ENDSUM . . . . . .  C ADDR   05A2H   R   SEG=MAIN   907 960 1063 1088#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   08C1H   R   SEG=MAIN   1502 1518#
EQU00. . . . . . .  C ADDR   08DFH   R   SEG=MAIN   1520 1525 1534#
EQU1L. . . . . . .  C ADDR   1100H   R   SEG=MAIN   2808 2812#
EQU2L. . . . . . .  C ADDR   1690H   R   SEG=MAIN   3678 3683#
ERRA0. . . . . . .  C ADDR   1CF0H   R   SEG=MAIN   4560 4572#
ERRA01 . . . . . .  C ADDR   07FAH   R   SEG=MAIN   1421# 1466
ERROR. . . . . . .  C ADDR   2655H   R   SEG=MAIN   1428 4387 4575 5382 5396 6191#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168# 1967 2921 4650
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7586#
EXP2 . . . . . . .  N NUMB   0001H   A      7588# 7765 7786
EXTCLE . . . . . .  C ADDR   01BEH   R   SEG=MAIN   551# 555
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   245FH   R   SEG=MAIN   4722 5822#
FINDKOEF . . . . .  C ADDR   2450H   R   SEG=MAIN   1340 5807#
FINDMEM. . . . . .  C ADDR   105EH   R   SEG=MAIN   2643 2713#
FINDR. . . . . . .  C ADDR   25A7H   R   SEG=MAIN   1588 4354 6036#
FINIS. . . . . . .  C ADDR   2BAEH   R   SEG=MAIN   7031 7132#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   141

FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      2002 4932 4944 7791# 7880
FLCMP. . . . . . .  C ADDR   01D6H   A      1264 1362 1400 1449 1453 1465 1501 1524 1899 4559 5122 5138 5292 5307
                                           7885#
FLDIV. . . . . . .  C ADDR   02B7H   A      1287 1308 1346 1474 1493 1507 2018 2176 2214 4706 4791 4809 4959 4962
                                           5151 8055#
FLMUL. . . . . . .  C ADDR   0203H   A      1153 1253 1305 1351 1469 1530 1989 2011 2021 2027 3954 4462 4710 4795
                                           4813 7925#
FLOUT. . . . . . .  C ADDR   01E1H   A      7892 7895#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8394 8400 8451 8456
FLSUB. . . . . . .  C ADDR   01D1H   A      1245 1904 2048 2116 2172 2210 3951 5320 7878#
FND. . . . . . . .  C ADDR   01F8H   A      7901 7904 7907 7910 7913#
FO1M . . . . . . .  C ADDR   2866H   R   SEG=MAIN   6329 6333#
FO2M . . . . . . .  C ADDR   286FH   R   SEG=MAIN   6336 6338#
FORM4. . . . . . .  C ADDR   2870H   R   SEG=MAIN   6331 6337 6341#
FT1IZM . . . . . .  C ADDR   0EFAH   R   SEG=MAIN   2515#
FTOL . . . . . . .  C ADDR   0343H   A      1198 1353 1477 3955 4711 4814 4963 5152 6118 8161#
FTOL1. . . . . . .  C ADDR   037CH   A      8174 8178 8202#
FTOL2. . . . . . .  C ADDR   039EH   A      8198 8235#
FTOL22 . . . . . .  C ADDR   03C4H   A      8238 8272#
FTOL23 . . . . . .  C ADDR   03A2H   A      8239# 8271
FTOL24 . . . . . .  C ADDR   03B5H   A      8241 8257#
FTOL25 . . . . . .  C ADDR   03C2H   A      8256 8271#
FTOL26 . . . . . .  C ADDR   03E4H   A      8287 8303#
FTOL3. . . . . . .  C ADDR   038AH   A      8201 8215#
FTOL33 . . . . . .  C ADDR   038EH   A      8219# 8233
FTOL4. . . . . . .  C ADDR   0371H   A      8180 8195#
FTOL9. . . . . . .  C ADDR   0381H   A      8208# 8218 8234 8302 8317
FULKALIB . . . . .  C ADDR   1E40H   R   SEG=MAIN   4749 4764# 4852
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   491# 492
GO23NO . . . . . .  C ADDR   15EEH   R   SEG=MAIN   3452 3575#
GO31L. . . . . . .  C ADDR   1106H   R   SEG=MAIN   2786 2817#
GO41L. . . . . . .  C ADDR   110BH   R   SEG=MAIN   2817 2819#
GOA2 . . . . . . .  C ADDR   079AH   R   SEG=MAIN   1366 1368 1371# 1393
GOA3A2 . . . . . .  C ADDR   07A4H   R   SEG=MAIN   1376#
GOCIKLE. . . . . .  C ADDR   0BD2H   R   SEG=MAIN   1922 2006 2035# 2042 2051
GOFULL . . . . . .  C ADDR   1621H   R   SEG=MAIN   3581 3603#
GOGO7. . . . . . .  C ADDR   1D0EH   R   SEG=MAIN   4533 4538 4585#
GOKAA2 . . . . . .  C ADDR   07C2H   R   SEG=MAIN   1391#
GOKLB. . . . . . .  C ADDR   0DC9H   R   SEG=MAIN   2299 2321#
GOOFF1 . . . . . .  C ADDR   1555H   R   SEG=MAIN   3466# 3475
GOOFF2 . . . . . .  C ADDR   1570H   R   SEG=MAIN   3488# 3497
GOOFF3 . . . . . .  C ADDR   158BH   R   SEG=MAIN   3507# 3516
GOOFF4 . . . . . .  C ADDR   15A6H   R   SEG=MAIN   3529# 3538
GOONIN . . . . . .  C ADDR   07B4H   R   SEG=MAIN   1384# 1419 1431 1611 1628
GOONIN1. . . . . .  C ADDR   095BH   R   SEG=MAIN   1607 1611#
GOONIND. . . . . .  C ADDR   0993H   R   SEG=MAIN   1387 1657#
GOONOFF. . . . . .  C ADDR   151AH   R   SEG=MAIN   3420# 3429
GOONT. . . . . . .  C ADDR   0B5BH   R   SEG=MAIN   1925 1968#
GOPAROL. . . . . .  C ADDR   1B72H   R   SEG=MAIN   4196 4340 4348#
GOPAROM. . . . . .  C ADDR   1A5CH   R   SEG=MAIN   4194# 4197
GOPART . . . . . .  C ADDR   0333H   R   SEG=MAIN   795 798#
GOSK19 . . . . . .  C ADDR   102FH   R   SEG=MAIN   2680 2687#
GOTO7. . . . . . .  C ADDR   121FH   R   SEG=MAIN   3016# 3096 3103 3167 3189 3218 3230 3272 3276 3325 3372 3387 3449
                                           3628 3631 3682 3685 3741 3754 3760 3786 3788 3829 3852 3870 3925 4124 4132
                                           4140 4234 4301 4305 4384 4394 4428 4479 4481 4497 4509 4570 4761 4772
GOTOKD . . . . . .  C ADDR   0635H   R   SEG=MAIN   1156 1180#
GOTOSTROB. . . . .  C ADDR   0B3DH   R   SEG=MAIN   1936 1939 1942 1945 1948#
GOUT6. . . . . . .  C ADDR   0D7EH   R   SEG=MAIN   2289# 2317
GOVVLIST . . . . .  C ADDR   185CH   R   SEG=MAIN   3908 3930#
GOZNAK . . . . . .  C ADDR   02E5H   R   SEG=MAIN   689 738#
HNOR11 . . . . . .  C ADDR   1371H   R   SEG=MAIN   3152 3193#
HNOR12 . . . . . .  C ADDR   1319H   R   SEG=MAIN   3142 3146#
HNOT1. . . . . . .  C ADDR   13BDH   R   SEG=MAIN   3118 3239#
HNOT2. . . . . . .  C ADDR   12E7H   R   SEG=MAIN   3115#
HR12 . . . . . . .  C ADDR   130FH   R   SEG=MAIN   3137 3142#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   142

HVI1113. . . . . .  C ADDR   1309H   R   SEG=MAIN   3140# 3145 3150
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 536 5332 5362 8393 8401 8450 8460
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   12E3H   R   SEG=MAIN   3110 3112#
IND. . . . . . . .  C ADDR   21BBH   R   SEG=MAIN   638 646 691 722 1429 1512 1516 1799 2330 2334 2345 3046 3282 3299
                                           3828 4044 4096 4388 4576 4769 5336# 5378 5384 5398 6552
INDOLL . . . . . .  C ADDR   0950H   R   SEG=MAIN   1602 1603 1607#
INIACP . . . . . .  C ADDR   24C4H   R   SEG=MAIN   655 3258 5900#
INNOT1_2 . . . . .  C ADDR   1713H   R   SEG=MAIN   3750 3756#
INNOT3 . . . . . .  C ADDR   1704H   R   SEG=MAIN   3742 3747#
INNOT6 . . . . . .  C ADDR   16F8H   R   SEG=MAIN   3737 3742#
INTER2 . . . . . .  C ADDR   21AFH   R   SEG=MAIN   262 5325#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 629 1968 3705 3805
INTMUL . . . . . .  C ADDR   0B7EH   R   SEG=MAIN   1983 1989#
INTMUL1. . . . . .  C ADDR   0B81H   R   SEG=MAIN   1990#
INTMUL2. . . . . .  C ADDR   0B96H   R   SEG=MAIN   2003# 2012 2022 2028 2032
INTN . . . . . . .  C ADDR   17A5H   R   SEG=MAIN   3843#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   13A2H   R   SEG=MAIN   3220#
IZMAN. . . . . . .  C ADDR   0E6FH   R   SEG=MAIN   2247 2418#
IZMFUN . . . . . .  C ADDR   0E81H   R   SEG=MAIN   2346 2357 2365 2423 2426#
IZMPAT . . . . . .  C ADDR   0E85H   R   SEG=MAIN   2315 2331 2335 2394 2430#
IZMT2. . . . . . .  C ADDR   0E94H   R   SEG=MAIN   2446 2451#
IZMT3. . . . . . .  C ADDR   0E9FH   R   SEG=MAIN   2451 2457#
JFINIS . . . . . .  C ADDR   2B15H   R   SEG=MAIN   7023 7031#
KD . . . . . . . .  C ADDR   23DBH   R   SEG=MAIN   5710#
KEYB1. . . . . . .  C ADDR   0D4DH   R   SEG=MAIN   283 2253#
KEYB2. . . . . . .  C ADDR   11AFH   R   SEG=MAIN   286 2938#
KFULL. . . . . . .  C ADDR   15F8H   R   SEG=MAIN   3388 3580#
KFULLR . . . . . .  C ADDR   14E1H   R   SEG=MAIN   3383 3388#
KGO23. . . . . . .  C ADDR   1542H   R   SEG=MAIN   3382 3455#
KKOUT6 . . . . . .  C ADDR   116FH   R   SEG=MAIN   2249 2899#
KLBOFF . . . . . .  C ADDR   126FH   R   SEG=MAIN   3039 3057#
KLEV1. . . . . . .  C ADDR   14BBH   R   SEG=MAIN   3338 3373#
KLEV2. . . . . . .  C ADDR   14C0H   R   SEG=MAIN   3373 3375#
KLEV21 . . . . . .  C ADDR   14E4H   R   SEG=MAIN   3380 3389#
KLEV22 . . . . . .  C ADDR   14CAH   R   SEG=MAIN   3368 3377 3380#
KLEV23 . . . . . .  C ADDR   14F5H   R   SEG=MAIN   3389 3397#
KLEV3. . . . . . .  C ADDR   14C5H   R   SEG=MAIN   3375 3377#
KLMAS. . . . . . .  C ADDR   03E0H   R   SEG=MAIN   827 894#
KNAVP. . . . . . .  C ADDR   127EH   R   SEG=MAIN   2996 3065#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1366 1603 1767 2396 2419 2420 2424
KNIZMON. . . . . .  C ADDR   0E7CH   R   SEG=MAIN   2419 2424#
KNKMP. . . . . . .  C ADDR   1196H   R   SEG=MAIN   2926# 2986
KNLEFT . . . . . .  C ADDR   128CH   R   SEG=MAIN   2930 3072#
KNMEM. . . . . . .  C ADDR   141AH   R   SEG=MAIN   2936 3292#
KNMENU . . . . . .  C ADDR   1241H   R   SEG=MAIN   3002 3036#
KNNUL. . . . . . .  C ADDR   12ADH   R   SEG=MAIN   2929 3090#
KNOPT. . . . . . .  C ADDR   0EA7H   R   SEG=MAIN   2246 2465#
KNRAZR . . . . . .  C ADDR   0EBCH   R   SEG=MAIN   2245 2478#
KNRIGHT. . . . . .  C ADDR   0DFDH   R   SEG=MAIN   2305 2350#
KNVICH . . . . . .  C ADDR   0E1EH   R   SEG=MAIN   2314 2368#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 594 4713 4723 4815 4823
KOEFKM . . . . . .  D ADDR   0094H   A      378# 592 1151 1251 2218
KOEFKP . . . . . .  D ADDR   0090H   A      377# 590 1148 1246 2180
KOMUL. . . . . . .  C ADDR   075EH   R   SEG=MAIN   1339 1343#
KOMULPZ. . . . . .  C ADDR   0758H   R   SEG=MAIN   1336 1340#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1461 4555 6116
KON_B. . . . . . .  C ADDR   0F87H   R   SEG=MAIN   2572 2591#
KOR0US . . . . . .  C ADDR   2308H   R   SEG=MAIN   2076 5579#
KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1243 2088 2170 2208
KORDEC1. . . . . .  C ADDR   0686H   R   SEG=MAIN   1226 1233#
KORDEC10 . . . . .  C ADDR   0666H   R   SEG=MAIN   1214#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   143

KORNUL . . . . . .  C ADDR   0C0CH   R   SEG=MAIN   1163 2068#
KVVOD0 . . . . . .  C ADDR   1614H   R   SEG=MAIN   3348 3589 3598#
LABEL43. . . . . .  C ADDR   1853H   R   SEG=MAIN   3926# 3934
LABEL7 . . . . . .  C ADDR   193CH   R   SEG=MAIN   3926 4049# 4061
LABELA . . . . . .  C ADDR   02A9H   R   SEG=MAIN   694# 726 2039
LABELB . . . . . .  C ADDR   0A74H   R   SEG=MAIN   1206 1631 1804# 2056 2060 2062
LABELC . . . . . .  C ADDR   0EBCH   R   SEG=MAIN   2479#
LABELE . . . . . .  C ADDR   0E85H   R   SEG=MAIN   2428 2444# 2484 2487 2491 2495 2503 2535
LABELF . . . . . .  C ADDR   0EE7H   R   SEG=MAIN   2244 2504#
LABELH . . . . . .  C ADDR   12CFH   R   SEG=MAIN   2928 3105#
LABELI . . . . . .  C ADDR   1C6AH   R   SEG=MAIN   3121 3178 3232 4492#
LABELI2. . . . . .  C ADDR   1356H   R   SEG=MAIN   3178# 3179
LABELK . . . . . .  C ADDR   145DH   R   SEG=MAIN   3120 3327#
LABELL . . . . . .  C ADDR   10BBH   R   SEG=MAIN   2642 2742 2750#
LABELL1. . . . . .  C ADDR   0FC4H   R   SEG=MAIN   2629# 2706 2824 2873
LABELN . . . . . .  C ADDR   1125H   R   SEG=MAIN   2707 2833#
LABELP . . . . . .  C ADDR   1829H   R   SEG=MAIN   3856 3877 3908# 4142
LABELS . . . . . .  C ADDR   17EEH   R   SEG=MAIN   3585 3877#
LABELS1. . . . . .  C ADDR   1ABDH   R   SEG=MAIN   4212 4242#
LABELS13 . . . . .  C ADDR   1BF0H   R   SEG=MAIN   4283 4408#
LABELS3. . . . . .  C ADDR   1C7DH   R   SEG=MAIN   4502#
LABELS4. . . . . .  C ADDR   1C58H   R   SEG=MAIN   4282 4483#
LABL2. . . . . . .  C ADDR   10E7H   R   SEG=MAIN   2789# 3392
LABM . . . . . . .  C ADDR   1699H   R   SEG=MAIN   3393 3688#
LADD . . . . . . .  C ADDR   2C56H   R   SEG=MAIN   806 841 859 875 1887 7258#
LADDX. . . . . . .  C ADDR   2C67H   R   SEG=MAIN   7282#
LBTOF. . . . . . .  C ADDR   042DH   A      8372#
LCMP . . . . . . .  C ADDR   2A54H   R   SEG=MAIN   5496 6360 6838#
LDC_LONG . . . . .  C ADDR   2A6AH   R   SEG=MAIN   589 1338 1885 2175 2213 3100 6858#
LDC_LTEMP. . . . .  C ADDR   2A8CH   R   SEG=MAIN   815 1102 1107 1112 1116 1263 1307 1345 1361 1399 1448 1452 1464
                                           1468 1492 1500 1506 1523 1529 1898 1903 1982 1987 2010 2017 2020 2026 2047
                                           2115 3950 3953 3979 4461 4558 4709 4794 4812 4961 5150 5319 5510 6523
                                           6894#
LDX_LONG . . . . .  C ADDR   2AB2H   R   SEG=MAIN   6929#
LDX_LTEMP. . . . .  C ADDR   2AD8H   R   SEG=MAIN   6967#
LEFCUR . . . . . .  C ADDR   1724H   R   SEG=MAIN   3766# 3838 3854
LEFKL. . . . . . .  C ADDR   1296H   R   SEG=MAIN   3072 3078#
LEFMEM11 . . . . .  C ADDR   1471H   R   SEG=MAIN   3339# 3374 3376 3378
LEFT21 . . . . . .  C ADDR   1643H   R   SEG=MAIN   3624 3629#
LEFT_S . . . . . .  C ADDR   1ABAH   R   SEG=MAIN   4241# 4244
LEFT_SK. . . . . .  C ADDR   1BD1H   R   SEG=MAIN   4241 4396#
LEV220 . . . . . .  C ADDR   14CDH   R   SEG=MAIN   3381# 3390
LEV2GO . . . . . .  C ADDR   114BH   R   SEG=MAIN   2832 2869#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2337 2714 2757 3300 3310 3337 3600 6066
LI21 . . . . . . .  C ADDR   13ACH   R   SEG=MAIN   3227 3229#
LI42_43. . . . . .  C ADDR   18C2H   R   SEG=MAIN   3976# 4116
LIST_43. . . . . .  C ADDR   1946H   R   SEG=MAIN   3928 4054#
LLDI2. . . . . . .  C ADDR   0E68H   R   SEG=MAIN   2409 2413#
LLDI23 . . . . . .  C ADDR   0E5CH   R   SEG=MAIN   2401 2406#
LLDI3. . . . . . .  C ADDR   0E63H   R   SEG=MAIN   2408 2410#
LLEV2. . . . . . .  C ADDR   1110H   R   SEG=MAIN   2788 2822#
LLMUL. . . . . . .  C ADDR   2BBFH   R   SEG=MAIN   7152#
LLSUB. . . . . . .  C ADDR   2C44H   R   SEG=MAIN   7234#
LLTOF. . . . . . .  C ADDR   0432H   A      8378#
LMUL . . . . . . .  C ADDR   2BBFH   R   SEG=MAIN   6318 6524 7154#
LOA3_X . . . . . .  C ADDR   299FH   R   SEG=MAIN   1928 6588#
LOAB12 . . . . . .  C ADDR   2513H   R   SEG=MAIN   3256 5941#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2468 2509 3108 3252 5602
LOADB. . . . . . .  C ADDR   13D0H   R   SEG=MAIN   3247 3250# 3283 3289
LOADB2 . . . . . .  C ADDR   13FCH   R   SEG=MAIN   3270 3274#
LOADCLE. . . . . .  C ADDR   148EH   R   SEG=MAIN   3353# 3592
LOADKD . . . . . .  C ADDR   2530H   R   SEG=MAIN   5974#
LOADR2 . . . . . .  C ADDR   2522H   R   SEG=MAIN   3850 3945 4458 4553 4599 5957#
LOADT. . . . . . .  C ADDR   2323H   R   SEG=MAIN   2470 2515 3114 5602#
LOADUS . . . . . .  C ADDR   22C2H   R   SEG=MAIN   656 1410 1618 2364 2425 3054 3058 3087 3259 4851 5523#
LOAHL_R2 . . . . .  C ADDR   1FCFH   R   SEG=MAIN   4927 4939 4990# 5118 5134 5288 5303
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   144

LOBLOK . . . . . .  C ADDR   164EH   R   SEG=MAIN   3578 3636# 3655
LOCLE. . . . . . .  C ADDR   1489H   R   SEG=MAIN   3342 3351#
LOD1 . . . . . . .  C ADDR   2332H   R   SEG=MAIN   5610# 5615
LODT . . . . . . .  C ADDR   2341H   R   SEG=MAIN   5623# 5628
LOIZMK . . . . . .  C ADDR   131CH   R   SEG=MAIN   3147# 3183
LOKAME1. . . . . .  C ADDR   1A0FH   R   SEG=MAIN   4156#
LOLEVT . . . . . .  C ADDR   2325H   R   SEG=MAIN   2343 5603#
LOLIST . . . . . .  C ADDR   147EH   R   SEG=MAIN   3344#
LOME1. . . . . . .  C ADDR   1D85H   R   SEG=MAIN   4661# 4665 4668 4671 4674 4678 4681 4684 4687 4691
LOMENU . . . . . .  C ADDR   1D7DH   R   SEG=MAIN   2657 2670 4156 4199 4222 4658#
LOOP . . . . . . .  C ADDR   227EH   R   SEG=MAIN   5459# 5460
LOOPS. . . . . . .  C ADDR   2B18H   R   SEG=MAIN   7033# 7066
LOSPUS . . . . . .  C ADDR   22FCH   R   SEG=MAIN   2077 5562#
LOSTAT . . . . . .  C ADDR   14A3H   R   SEG=MAIN   3357 3363#
LOTEXT . . . . . .  C ADDR   233DH   R   SEG=MAIN   1511 1515 1609 2383 2546 2554 2563 2682 2688 2722 2731 2739 2748
                                           2761 3044 3140 3209 3295 3345 3354 3360 3365 3371 3386 3604 3637 3649 3704
                                           3826 3894 3918 4085 4121 4129 4137 4151 4173 4179 4218 4351 4398 4403 4566
                                           4661 4768 5620# 6192
LOTP . . . . . . .  C ADDR   2586H   R   SEG=MAIN   6015# 6025 6028
LOTPUS . . . . . .  C ADDR   257EH   R   SEG=MAIN   4230 5557 6012#
LOU. . . . . . . .  C ADDR   0E6EH   R   SEG=MAIN   2396 2412 2416#
LOUIZM . . . . . .  C ADDR   0E4BH   R   SEG=MAIN   2396# 2422 5554
LOUTF. . . . . . .  C ADDR   1103H   R   SEG=MAIN   2814# 2823 2830
LOVICH . . . . . .  C ADDR   1312H   R   SEG=MAIN   3143# 3176 3197 4612
LOWR . . . . . . .  C ADDR   1496H   R   SEG=MAIN   3351 3357#
LOWR1. . . . . . .  C ADDR   149BH   R   SEG=MAIN   3359# 3596
LSUB . . . . . . .  C ADDR   2C44H   R   SEG=MAIN   1203 1379 5511 7235#
LTEMP. . . . . . .  N NUMB   0008H   A      1119 1121 1122 1123 5847 5848 5849 5850 6370 6373 6376 6379 6422 6423
                                           6424 6425 6650# 7024 7025 7026 7027 7036 7040 7044 7048 7051 7052 7053
                                           7054 7055 7056 7057 7058 7059 7060 7061 7062 7065 7068 7073 7077 7081 7091
                                           7094 7097 7100 7116 7119 7120 7122 7123 7125 7126 7128 7133 7134 7135 7136
                                           7156 7161 7169 7177 7182 7193 7201 7207 7215 7221 7589 7590 7629 7634 7636
                                           7645 7646 7647 7648 7879 7887 7900 7903 7906 7909 8489 8492 8495 8498
LWR. . . . . . . .  C ADDR   2841H   R   SEG=MAIN   6309# 6313
LWRX . . . . . . .  C ADDR   2805H   R   SEG=MAIN   6254# 6266
LWTOF. . . . . . .  C ADDR   042FH   A      8374#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   285CH   R   SEG=MAIN   1679 3982 4964 5154 6317 6322 6327# 6359
MAIN . . . . . . .  C SEG    2CA1H       REL=UNIT   237 294# 455
MANT1. . . . . . .  N NUMB   0002H   A      7587# 7614 7663 7664
MANT2. . . . . . .  N NUMB   0008H   A      7589# 7640 7641 7772 7774 7775 7777 7778 7780 7781 7783 7822 7823 7825
                                           7826 7828 7829 7831 7832 7836 7838 7841 7844 7942 7944 7945 7947 7948 7950
                                           7951 7953 8004 8006 8007 8009 8010 8012 8013 8015 8097 8101 8105 8109 8113
                                           8116 8119 8122
MARK0_8. . . . . .  C ADDR   0F8EH   R   SEG=MAIN   2574 2592 2594#
MARKER . . . . . .  D ADDR   00B2H   A      393# 567 2281 2533 2573 2583 2591 2601 2607 2796 2804 2840 2847 2859 2966
                                           3187 3204 3225 3319 3446 3557 3612 3620 3641 3667 3674 3732 3772 3779 3819
                                           3862 3920 3936 4059 4200 4288 4295 4379 4392 4415 4422 4469 4502 4521 4528
                                           4562 4572 4583 4608 6043 6069 6095 6106 6164
MARLE. . . . . . .  C ADDR   25FAH   R   SEG=MAIN   3787 6092#
MARRI. . . . . . .  C ADDR   2607H   R   SEG=MAIN   2867 6105#
MAS10. . . . . . .  C ADDR   03FFH   R   SEG=MAIN   896 909#
MAS20. . . . . . .  C ADDR   047FH   R   SEG=MAIN   909 964#
MAS4 . . . . . . .  C ADDR   0573H   R   SEG=MAIN   962 1065#
MAS5DIV. . . . . .  C ADDR   05E7H   R   SEG=MAIN   1103 1108 1113 1117 1125#
MASFULL. . . . . .  C ADDR   05AEH   R   SEG=MAIN   1092 1096#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 897 902 931 939 1013 1021 1070 1077 6296
MASS1. . . . . . .  X ADDR   0104H   A      419# 905 928 942 1010 1024 1068 1080
MASS10 . . . . . .  X ADDR   0128H   A      428# 986 1043
MASS11 . . . . . .  X ADDR   012CH   A      429# 983 1045
MASS12 . . . . . .  X ADDR   0130H   A      430# 980 1047
MASS13 . . . . . .  X ADDR   0134H   A      431# 977 1049
MASS14 . . . . . .  X ADDR   0138H   A      432# 974 1051
MASS15 . . . . . .  X ADDR   013CH   A      433# 971 1053
MASS16 . . . . . .  X ADDR   0140H   A      434# 969 1055
MASS17 . . . . . .  X ADDR   0144H   A      435# 967 1057
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   145

MASS18 . . . . . .  X ADDR   0148H   A      436# 965 1059
MASS19 . . . . . .  X ADDR   014CH   A      437# 1061
MASS2. . . . . . .  X ADDR   0108H   A      420# 925 944 1007 1026 1066 1082
MASS3. . . . . . .  X ADDR   010CH   A      421# 922 946 1004 1028 1084
MASS4. . . . . . .  X ADDR   0110H   A      422# 919 948 1001 1030
MASS5. . . . . . .  X ADDR   0114H   A      423# 916 950 998 1032
MASS6. . . . . . .  X ADDR   0118H   A      424# 914 952 996 1034
MASS7. . . . . . .  X ADDR   011CH   A      425# 912 954 994 1036
MASS8. . . . . . .  X ADDR   0120H   A      426# 910 956 992 1038
MASS9. . . . . . .  X ADDR   0124H   A      427# 958 989 1040
MASX5. . . . . . .  C ADDR   05DDH   R   SEG=MAIN   1094 1119#
MAXG . . . . . . .  C ADDR   212EH   R   SEG=MAIN   5244# 5298
MAXVIX . . . . . .  C ADDR   2198H   R   SEG=MAIN   5308 5313#
ME11_15DE. . . . .  C ADDR   17E5H   R   SEG=MAIN   3872# 3891
ME11_15DEC . . . .  C ADDR   1A0EH   R   SEG=MAIN   3872 4155#
ME21_22. . . . . .  C ADDR   10CBH   R   SEG=MAIN   2761# 2770
ME21_23. . . . . .  C ADDR   1A78H   R   SEG=MAIN   3905 4208#
ME21_23DEC . . . .  C ADDR   1A94H   R   SEG=MAIN   4215 4220#
MEAVP. . . . . . .  C ADDR   1288H   R   SEG=MAIN   3066 3069#
MECLE. . . . . . .  C ADDR   01ABH   R   SEG=MAIN   540# 542
MEFF . . . . . . .  C ADDR   01B2H   R   SEG=MAIN   544# 547
MEM10MS. . . . . .  C ADDR   02A4H   R   SEG=MAIN   691#
MEM12NO. . . . . .  C ADDR   160FH   R   SEG=MAIN   3590 3594#
MENG . . . . . . .  C ADDR   1F1BH   R   SEG=MAIN   4887# 4937
MENU12 . . . . . .  C ADDR   1D89H   R   SEG=MAIN   4659 4663#
MENU13 . . . . . .  C ADDR   1D91H   R   SEG=MAIN   4663 4666#
MENU14 . . . . . .  C ADDR   1D99H   R   SEG=MAIN   4666 4669#
MENU15 . . . . . .  C ADDR   1DA1H   R   SEG=MAIN   4669 4672#
MENU21 . . . . . .  C ADDR   1DA9H   R   SEG=MAIN   4672 4676#
MENU22 . . . . . .  C ADDR   1DB1H   R   SEG=MAIN   4676 4679#
MENU23 . . . . . .  C ADDR   1DB9H   R   SEG=MAIN   4679 4682#
MENU31 . . . . . .  C ADDR   1DC1H   R   SEG=MAIN   4682 4685#
MENU41 . . . . . .  C ADDR   1DC9H   R   SEG=MAIN   4685 4689#
MENUOFF. . . . . .  C ADDR   1263H   R   SEG=MAIN   3037 3050#
MENUON . . . . . .  C ADDR   181BH   R   SEG=MAIN   3896#
MERR . . . . . . .  C ADDR   123EH   R   SEG=MAIN   3033# 3036
ME_14. . . . . . .  C ADDR   14ADH   R   SEG=MAIN   3368#
ME_41. . . . . . .  C ADDR   1B35H   R   SEG=MAIN   4242 4309#
ME_52. . . . . . .  C ADDR   1B09H   R   SEG=MAIN   4285# 4309
ME_52V . . . . . .  C ADDR   1B26H   R   SEG=MAIN   4299 4301#
MIDL . . . . . . .  C ADDR   2B4BH   R   SEG=MAIN   7028 7063#
MIGN . . . . . . .  C ADDR   2637H   R   SEG=MAIN   5341 6164#
MIGNN. . . . . . .  C ADDR   263FH   R   SEG=MAIN   6166 6171#
MIN4_HL. . . . . .  C ADDR   1FDBH   R   SEG=MAIN   5003# 5036 5062 5206 5232
MING . . . . . . .  C ADDR   2039H   R   SEG=MAIN   5074# 5128
MINIVIX. . . . . .  C ADDR   20A3H   R   SEG=MAIN   5139 5144# 5313
MLABL2 . . . . . .  C ADDR   1679H   R   SEG=MAIN   3659# 3690 3929
MLABL2R. . . . . .  C ADDR   1859H   R   SEG=MAIN   3929# 3932
MMM. . . . . . . .  C ADDR   029FH   R   SEG=MAIN   687#
MO220. . . . . . .  C ADDR   0945H   R   SEG=MAIN   1218 1389 1602#
MO500I . . . . . .  C ADDR   08B5H   R   SEG=MAIN   1454 1514#
MO500R . . . . . .  C ADDR   08A9H   R   SEG=MAIN   1450 1510#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   1058H   R   SEG=MAIN   2708# 2719 2728 2736 2745 2753
MOUTKMEM . . . . .  C ADDR   17E8H   R   SEG=MAIN   3873# 3881
MOVE28 . . . . . .  C ADDR   28C9H   R   SEG=MAIN   1282 1300 1347 1456 2173 2211 4703 4786 4804 4929 4941 4956 5117
                                           5133 5287 5302 6422#
MOVE82 . . . . . .  C ADDR   2482H   R   SEG=MAIN   5847#
MOVEA3 . . . . . .  C ADDR   0993H   R   SEG=MAIN   1660#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2575 2812 2852 3206 3577 3621 3629 3683 3735 3780 3923 4203 4298
                                           4381 4425 4503 4531 6099
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2571 2805 2809 2848 3207 3576 3625 3675 3679 3734 3784 3922 4202
                                           4382 4507 6108
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7939# 7982
MUP11. . . . . . .  C ADDR   0257H   A      7986# 8031
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   146

MUP2 . . . . . . .  C ADDR   0297H   A      8016 8030#
MUP3 . . . . . . .  C ADDR   026CH   A      7985 8001#
MVV11. . . . . . .  C ADDR   1649H   R   SEG=MAIN   3601 3634#
MVV12. . . . . . .  C ADDR   1661H   R   SEG=MAIN   3634 3646#
N12DELCH . . . . .  C ADDR   0D30H   R   SEG=MAIN   2229 2237#
N4DELCH. . . . . .  C ADDR   0CDCH   R   SEG=MAIN   2153 2191#
N8DELCH. . . . . .  C ADDR   0D1EH   R   SEG=MAIN   2191 2229#
NBIMENU. . . . . .  C ADDR   105EH   R   SEG=MAIN   2712#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 627 1933 3409 3545 3638 3702 3916 4007 6514 6535 6566
NE05 . . . . . . .  C ADDR   0358H   A      8168 8170 8172 8175#
NELEM. . . . . . .  D ADDR   0037H   A      312# 628 3947 4064 4068
NEXIN. . . . . . .  C ADDR   21C8H   R   SEG=MAIN   5344# 5351
NEXTMAX. . . . . .  C ADDR   2163H   R   SEG=MAIN   5276 5284#
NEXTMEA. . . . . .  C ADDR   1F50H   R   SEG=MAIN   4919 4927#
NEXTMIN. . . . . .  C ADDR   206EH   R   SEG=MAIN   5106 5114#
NMEM_MENU. . . . .  C ADDR   17EBH   R   SEG=MAIN   3875# 3879
NMINUS . . . . . .  C ADDR   06A3H   R   SEG=MAIN   1248 1252#
NMINUS3. . . . . .  C ADDR   0607H   R   SEG=MAIN   1150 1152#
NNDELCH. . . . . .  C ADDR   0C9CH   R   SEG=MAIN   2138 2153#
NNMEMB . . . . . .  C ADDR   1157H   R   SEG=MAIN   2710 2875#
NNNOTT . . . . . .  C ADDR   13BAH   R   SEG=MAIN   3237# 3240
NNNUL. . . . . . .  C ADDR   0A10H   R   SEG=MAIN   1742 1745#
NO . . . . . . . .  C ADDR   2B33H   R   SEG=MAIN   7038 7042 7046 7050#
NO0CHK . . . . . .  C ADDR   11A5H   R   SEG=MAIN   2932#
NO0CHKL. . . . . .  C ADDR   0D43H   R   SEG=MAIN   2249#
NO0KEY . . . . . .  C ADDR   02B9H   R   SEG=MAIN   699 706#
NO10MSV. . . . . .  C ADDR   178CH   R   SEG=MAIN   3824 3830#
NO11V6 . . . . . .  C ADDR   0F3EH   R   SEG=MAIN   2541 2549#
NO12V6 . . . . . .  C ADDR   0F52H   R   SEG=MAIN   2549 2558#
NO13V6 . . . . . .  C ADDR   0F66H   R   SEG=MAIN   2558 2568#
NO21P7 . . . . . .  C ADDR   1D15H   R   SEG=MAIN   4541 4590#
NO23RI . . . . . .  C ADDR   100FH   R   SEG=MAIN   2668 2672#
NO2MSV . . . . . .  C ADDR   1789H   R   SEG=MAIN   3829# 3830 3840
NO2PARN. . . . . .  C ADDR   0988H   R   SEG=MAIN   1643 1649#
NO31N. . . . . . .  C ADDR   1743H   R   SEG=MAIN   3793#
NO31RI . . . . . .  C ADDR   1040H   R   SEG=MAIN   2674 2698#
NO3PARN. . . . . .  C ADDR   097EH   R   SEG=MAIN   1643# 1723
NO4DEL . . . . . .  C ADDR   0C3FH   R   SEG=MAIN   2081 2099#
NO5DEL . . . . . .  C ADDR   0C5EH   R   SEG=MAIN   2114# 2122
NO6DEL . . . . . .  C ADDR   0C6CH   R   SEG=MAIN   2112 2120#
NOAVK. . . . . . .  C ADDR   0675H   R   SEG=MAIN   1174 1223# 2131
NOAVP. . . . . . .  C ADDR   079AH   R   SEG=MAIN   1370# 1401 1404
NOBAVP . . . . . .  C ADDR   0A2CH   R   SEG=MAIN   1513 1517 1597 1761 1765#
NOBEF99. . . . . .  C ADDR   0370H   R   SEG=MAIN   812 828# 847 865 881
NOBIT. . . . . . .  C ADDR   0245H   A      7954 7968#
NOBITIZM . . . . .  C ADDR   0A35H   R   SEG=MAIN   1767 1770#
NOBL21 . . . . . .  C ADDR   10D4H   R   SEG=MAIN   2758 2766#
NOBL22 . . . . . .  C ADDR   10DEH   R   SEG=MAIN   2766 2786#
NOBUF. . . . . . .  C ADDR   0A6AH   R   SEG=MAIN   1797 1799#
NOBUF0 . . . . . .  C ADDR   0BE2H   R   SEG=MAIN   1923 2044#
NOCHI0 . . . . . .  C ADDR   097AH   R   SEG=MAIN   1390 1630#
NOCHIND. . . . . .  C ADDR   02D8H   R   SEG=MAIN   720 728#
NOCHN10. . . . . .  C ADDR   05CAH   R   SEG=MAIN   1105 1110#
NOCHN2 . . . . . .  C ADDR   05BFH   R   SEG=MAIN   1100 1105#
NOCHN20. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1110 1115#
NODI2. . . . . . .  C ADDR   095EH   R   SEG=MAIN   1605 1613#
NODI6. . . . . . .  C ADDR   1298H   R   SEG=MAIN   3076 3080#
NODI8. . . . . . .  C ADDR   09E4H   R   SEG=MAIN   1706 1713#
NODI8K . . . . . .  C ADDR   1BA5H   R   SEG=MAIN   4367 4372#
NODI8_43 . . . . .  C ADDR   191FH   R   SEG=MAIN   4021 4027#
NODI9. . . . . . .  C ADDR   0963H   R   SEG=MAIN   1615 1618#
NODI9_43 . . . . .  C ADDR   192AH   R   SEG=MAIN   4027 4035#
NODIS9 . . . . . .  C ADDR   09F6H   R   SEG=MAIN   1713 1725#
NODISK9. . . . . .  C ADDR   1BADH   R   SEG=MAIN   4371 4372 4379#
NOENDLI. . . . . .  C ADDR   296BH   R   SEG=MAIN   6549 6553#
NOEQU1 . . . . . .  C ADDR   113CH   R   SEG=MAIN   2851 2855#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   147

NOEQU2 . . . . . .  C ADDR   173DH   R   SEG=MAIN   3783 3787#
NOFIZM . . . . . .  C ADDR   0F1FH   R   SEG=MAIN   2505 2537#
NOFT1. . . . . . .  C ADDR   0EF9H   R   SEG=MAIN   2510 2514#
NOFZ . . . . . . .  C ADDR   0BDDH   R   SEG=MAIN   2035 2039#
NOH37. . . . . . .  C ADDR   1331H   R   SEG=MAIN   3136 3160# 3170
NOHNOT1. . . . . .  C ADDR   140FH   R   SEG=MAIN   3241 3284#
NOHNOT2. . . . . .  C ADDR   1404H   R   SEG=MAIN   3277# 3284
NOKLB. . . . . . .  C ADDR   0A64H   R   SEG=MAIN   1795 1797#
NOKORR . . . . . .  C ADDR   061DH   R   SEG=MAIN   1161 1164#
NOLAH. . . . . . .  C ADDR   12F3H   R   SEG=MAIN   3105 3123#
NOLI_43. . . . . .  C ADDR   199AH   R   SEG=MAIN   4054 4099#
NOM31. . . . . . .  C ADDR   171BH   R   SEG=MAIN   3687 3762#
NOM32. . . . . . .  C ADDR   1794H   R   SEG=MAIN   3762 3836#
NOM33. . . . . . .  C ADDR   17C2H   R   SEG=MAIN   3836 3856#
NOMARL . . . . . .  C ADDR   1C92H   R   SEG=MAIN   4505 4511 4515#
NOMAXI . . . . . .  C ADDR   217BH   R   SEG=MAIN   5293 5296#
NOME11 . . . . . .  C ADDR   15FFH   R   SEG=MAIN   3587#
NOMEM11. . . . . .  C ADDR   1079H   R   SEG=MAIN   2715 2725#
NOMEM12. . . . . .  C ADDR   108FH   R   SEG=MAIN   2725 2733#
NOMEM13. . . . . .  C ADDR   10A5H   R   SEG=MAIN   2733 2742#
NOMEMK . . . . . .  C ADDR   15FCH   R   SEG=MAIN   3308 3584#
NOMINI . . . . . .  C ADDR   2086H   R   SEG=MAIN   5123 5126#
NON1C. . . . . . .  C ADDR   0ECDH   R   SEG=MAIN   2485 2489#
NONULAVT . . . . .  C ADDR   065AH   R   SEG=MAIN   1169 1208#
NONULDEL . . . . .  C ADDR   0C21H   R   SEG=MAIN   2069 2080#
NOP3_0 . . . . . .  C ADDR   097EH   R   SEG=MAIN   1636#
NOPART1. . . . . .  C ADDR   0374H   R   SEG=MAIN   801 835#
NOPART2. . . . . .  C ADDR   0394H   R   SEG=MAIN   835 854#
NOPART3. . . . . .  C ADDR   03B4H   R   SEG=MAIN   854 870#
NOPART4. . . . . .  C ADDR   03D4H   R   SEG=MAIN   870 887#
NOPLUS . . . . . .  C ADDR   0FB6H   R   SEG=MAIN   2619 2622#
NOPOIN7. . . . . .  C ADDR   1CA9H   R   SEG=MAIN   4501 4536#
NOPOINT. . . . . .  C ADDR   1C75H   R   SEG=MAIN   4495 4499#
NORDN. . . . . . .  C ADDR   00F6H   A      7675# 7708
NORDN1 . . . . . .  C ADDR   0107H   A      7677 7691#
NORIG2 . . . . . .  C ADDR   1119H   R   SEG=MAIN   2819 2827#
NORIM6 . . . . . .  C ADDR   1157H   R   SEG=MAIN   2879#
NORIME . . . . . .  C ADDR   0FF5H   R   SEG=MAIN   2655 2659#
NORIME1. . . . . .  C ADDR   0FEFH   R   SEG=MAIN   2657# 2660 2673
NORM1. . . . . . .  C ADDR   00F0H   A      7670# 7867 8044 8146 8363
NORR11 . . . . . .  C ADDR   1349H   R   SEG=MAIN   3172#
NORR12 . . . . . .  C ADDR   1359H   R   SEG=MAIN   3172 3179# 3193
NORUP. . . . . . .  C ADDR   0119H   A      7674 7711#
NORUP1 . . . . . .  C ADDR   011EH   A      7716# 7734
NORUP2 . . . . . .  C ADDR   0132H   A      7718 7735#
NORVICH. . . . . .  C ADDR   0A6DH   R   SEG=MAIN   1722 1800#
NOSAV1 . . . . . .  C ADDR   0B2BH   R   SEG=MAIN   1934 1937#
NOSAV2 . . . . . .  C ADDR   0B32H   R   SEG=MAIN   1937 1940#
NOSAV3 . . . . . .  C ADDR   0B39H   R   SEG=MAIN   1940 1943#
NOSUB. . . . . . .  C ADDR   2B6EH   R   SEG=MAIN   7072 7076 7080 7085#
NOT1IN . . . . . .  C ADDR   0BF7H   R   SEG=MAIN   1873 2054#
NOT1_7 . . . . . .  C ADDR   122EH   R   SEG=MAIN   3018 3025#
NOT2IN . . . . . .  C ADDR   0BFFH   R   SEG=MAIN   2054 2058#
NOT2_7 . . . . . .  C ADDR   1239H   R   SEG=MAIN   3025 3030#
NOT3IN . . . . . .  C ADDR   0C07H   R   SEG=MAIN   2058 2061#
NOTAKT . . . . . .  C ADDR   0A3FH   R   SEG=MAIN   1771 1775#
NOTE21 . . . . . .  C ADDR   071AH   R   SEG=MAIN   1269 1311#
NOTE22 . . . . . .  C ADDR   0735H   R   SEG=MAIN   1311 1323#
NOTESTIZM. . . . .  C ADDR   074DH   R   SEG=MAIN   1232 1335#
NOTT1. . . . . . .  C ADDR   0B75H   R   SEG=MAIN   1980 1985#
NOTT2. . . . . . .  C ADDR   0B9DH   R   SEG=MAIN   1985 2008#
NOTT3. . . . . . .  C ADDR   0BABH   R   SEG=MAIN   2008 2015#
NOTT4. . . . . . .  C ADDR   0BC2H   R   SEG=MAIN   2015 2024#
NOTT5. . . . . . .  C ADDR   0BD0H   R   SEG=MAIN   2024 2029#
NOT_1. . . . . . .  C ADDR   0ED4H   R   SEG=MAIN   2489 2494#
NOT_10 . . . . . .  C ADDR   0ED4H   R   SEG=MAIN   2493#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   148

NOVIR. . . . . . .  C ADDR   0FD7H   R   SEG=MAIN   2526 2644#
NOVIR1 . . . . . .  C ADDR   0F09H   R   SEG=MAIN   2526# 2537
NOZMEA . . . . . .  C ADDR   1FCBH   R   SEG=MAIN   4984 4986#
NOZMIN . . . . . .  C ADDR   20DAH   R   SEG=MAIN   5174 5176#
NOZZBL . . . . . .  C ADDR   1911H   R   SEG=MAIN   4010 4013 4016 4019#
NOZZMI . . . . . .  C ADDR   09D1H   R   SEG=MAIN   1701 1703#
NOZZMI1. . . . . .  C ADDR   1901H   R   SEG=MAIN   4008 4011#
NOZZMI2. . . . . .  C ADDR   1908H   R   SEG=MAIN   4011 4014#
NOZZMI3. . . . . .  C ADDR   190FH   R   SEG=MAIN   4014 4017#
NOZZMI43 . . . . .  C ADDR   18F8H   R   SEG=MAIN   4005 4007#
NSEC1. . . . . . .  C ADDR   0A19H   R   SEG=MAIN   1746 1749#
NSEC10 . . . . . .  C ADDR   0A22H   R   SEG=MAIN   1748 1751 1756#
NSEC11 . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1749 1753#
NUERR. . . . . . .  D ADDR   0039H   A      310# 1427 4386 4574 5381 5395 6193
NULAVT . . . . . .  C ADDR   0C81H   R   SEG=MAIN   2136#
NUMSIZE. . . . . .  N NUMB   0004H   A      6653# 6675 6713 6720 6795 6815
OBOARD . . . . . .  C ADDR   2AA4H   R   SEG=MAIN   6896 6910#
OBOARD1. . . . . .  C ADDR   2AECH   R   SEG=MAIN   6969 6982#
OFFMENUM . . . . .  C ADDR   145AH   R   SEG=MAIN   3324# 3333
OK1. . . . . . . .  C ADDR   0186H   A      7801 7816#
OK2. . . . . . . .  C ADDR   01A0H   A      7818 7833#
OK3. . . . . . . .  C ADDR   01C4H   A      7850 7866#
OLDMAX . . . . . .  C ADDR   20FAH   R   SEG=MAIN   5195 5201#
OLDMEAN. . . . . .  C ADDR   1F06H   R   SEG=MAIN   4869 4875#
OLDMIN . . . . . .  C ADDR   2005H   R   SEG=MAIN   5026 5032#
ONBOAR1. . . . . .  C ADDR   2ACAH   R   SEG=MAIN   6931 6948#
ONBOARD. . . . . .  C ADDR   2A7EH   R   SEG=MAIN   6860 6874#
ONMEM11. . . . . .  C ADDR   1434H   R   SEG=MAIN   3049 3116 3141 3302# 3346 3355 3361 3366 3605 3645 3652 3895 3901
                                           4153 4157 4162 4177 4182 4205 4219 4223 4401 4406
ONMEM12. . . . . .  C ADDR   1A9BH   R   SEG=MAIN   4224# 4227 4246
ONMEM13. . . . . .  C ADDR   1C55H   R   SEG=MAIN   4426 4481# 4485 4487
ONMIG. . . . . . .  C ADDR   264DH   R   SEG=MAIN   6175 6184#
ONTEST . . . . . .  C ADDR   0E83H   R   SEG=MAIN   2418 2428#
ONVICH . . . . . .  C ADDR   0E3FH   R   SEG=MAIN   2375 2387#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 494
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 487 491
OUT43. . . . . . .  C ADDR   1933H   R   SEG=MAIN   4044#
OUT6 . . . . . . .  C ADDR   1157H   R   SEG=MAIN   2243 2321 2367 2450 2455 2460 2476 2524 2635 2880#
OUT7 . . . . . . .  C ADDR   1D3EH   R   SEG=MAIN   2926 2927 3022 3029 3033 3055 3061 3111 3306 3394 3746 3875 4046
                                           4053 4098 4192 4280 4476 4490 4585 4587 4615#
OUTA . . . . . . .  C ADDR   2614H   R   SEG=MAIN   3211 6116#
OUTA2. . . . . . .  C ADDR   262EH   R   SEG=MAIN   6127# 6132
OUTF . . . . . . .  C ADDR   0EFFH   R   SEG=MAIN   2520#
OUTFL. . . . . . .  C ADDR   0FC7H   R   SEG=MAIN   2627 2631#
OUTKMEM. . . . . .  C ADDR   1441H   R   SEG=MAIN   3310# 3336 3873
OUTMA. . . . . . .  C ADDR   0FA0H   R   SEG=MAIN   2610 2612#
OUTMAX . . . . . .  C ADDR   2180H   R   SEG=MAIN   5181 5280 5299#
OUTMEA . . . . . .  C ADDR   1F6BH   R   SEG=MAIN   4873 4923 4938#
OUTMENU. . . . . .  C ADDR   1A57H   R   SEG=MAIN   4191#
OUTMIN . . . . . .  C ADDR   208BH   R   SEG=MAIN   5012 5110 5130#
OUTR . . . . . . .  C ADDR   090CH   R   SEG=MAIN   1543 1566#
OUTR5. . . . . . .  C ADDR   0928H   R   SEG=MAIN   1564 1585#
OUTSKO . . . . . .  C ADDR   1AFCH   R   SEG=MAIN   4276 4278#
OUTSKO1. . . . . .  C ADDR   1AF9H   R   SEG=MAIN   4274 4277#
OUTVICH. . . . . .  C ADDR   0F0CH   R   SEG=MAIN   2527# 2539
OUTVIR . . . . . .  C ADDR   0DC2H   R   SEG=MAIN   2288 2317#
OUT_KALI . . . . .  C ADDR   1E4DH   R   SEG=MAIN   4770#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6852
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5344 5348
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 465
P1 . . . . . . . .  D ADDR   0090H   A      32# 659 660 5407 5409 5412 5415 5419 5421 5422 5474 5476 5478 5914 5921
                                           6452 6455 6457 6460
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 466
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5440 5444 5453
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   149

P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 467
P3 . . . . . . . .  D ADDR   00B0H   A      62# 476 2251 2287 2289 2291 2292 2295 2296 2300 2301 2303 2304 2306 2307
                                           2309 2310 2312 2313 2499 2500 2506 2507 2538 2539 2542 2543 2550 2551 2559
                                           2560 2568 2569 2614 2615 2625 2626 2652 2653 2666 2667 2677 2678 2702 2703
                                           2704 2705 2717 2718 2726 2727 2734 2735 2743 2744 2752 2753 2787 2788 2822
                                           2823 2831 2832 2869 2870 2901 2933 2973 2975 2977 2978 2981 2982 2984 2985
                                           2987 2988 2990 2995 2997 2998 3000 3001 3106 3109 3135 3136 3160 3161 3173
                                           3174 3180 3181 3194 3195 3239 3240 3332 3333 3335 3336 3339 3340 3381 3382
                                           3398 3399 3400 3401 3455 3456 3587 3588 3598 3599 3689 3690 3691 3692 3763
                                           3764 3793 3794 3837 3838 3839 3840 3857 3858 3859 3860 3878 3879 3880 3881
                                           3888 3889 3931 3932 3933 3934 4055 4056 4144 4145 4213 4214 4226 4227 4243
                                           4244 4245 4246 4286 4287 4303 4304 4310 4311 4312 4313 4484 4485 4486 4487
                                           4493 4494 4499 4500 4536 4537 4629 5439 5441 5443 5449 5450 5451 5454 5455
P3IF . . . . . . .  D ADDR   00ADH   A      59# 700 702 2250 2261 2900 2932 2947 4628
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 469
P4 . . . . . . . .  D ADDR   0084H   A      20# 2071 2092 2139 2222 2403 2405 4756 5532 5535 5551 5553 6017
P5 . . . . . . . .  D ADDR   0085H   A      21# 573 582 2073 2094 2141 2144 2149 2184 2186 2224 2413 2415 4760 5540
                                           5543 5573 5576 6021
P6 . . . . . . . .  D ADDR   0086H   A      22# 1949 1951 1955 1957 2903 2905 2909 2911 4632 4634 4638 4640
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 470
PACK1. . . . . . .  C ADDR   00DEH   A      7653# 7868 8045 8147 8364
PARERR . . . . . .  C ADDR   1BBAH   R   SEG=MAIN   4342 4344 4346 4386#
PARN . . . . . . .  D ADDR   00AFH   A      390# 579 1736 2480 3267
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 574 799 1139 1181 1208 1223 1745 1801 1979 2111 2369 2444 2481 3016
                                           3250 3266 3736 3823 5544 5941
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215 519
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132# 518
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116# 517
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101# 516 1959 1961 2913 2915 4642 4644 5326 5328
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 463
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 464 515
PCON . . . . . . .  D ADDR   0087H   A      23# 510
POIN3. . . . . . .  C ADDR   1CA8H   R   SEG=MAIN   4534# 4588
POINA. . . . . . .  C ADDR   1D10H   R   SEG=MAIN   4532 4587#
POINA1 . . . . . .  C ADDR   1C8DH   R   SEG=MAIN   4504 4511#
POINA2 . . . . . .  C ADDR   1C87H   R   SEG=MAIN   4507# 4512
POZB . . . . . . .  C ADDR   1D33H   R   SEG=MAIN   4601 4605#
PROD . . . . . . .  N NUMB   000CH   A      7590# 7934 7935 7936 7937 7957 7958 7959 7961 7962 7964 7965 7967 7989
                                           7991 7992 7994 7995 7997 7998 8000 8019 8020 8021 8023 8024 8026 8027 8029
                                           8040 8041 8042 8043 8064 8065 8066 8067 8083 8085 8086 8088 8089 8091 8092
                                           8094 8124 8141 8142 8143 8144
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8395 8399 8452 8455
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2264 2890 2950 4626 6361 6363 7325
                                           7333
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0DCCH   R   SEG=MAIN   2311 2323#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   150

QUES . . . . . . .  C ADDR   14EFH   R   SEG=MAIN   3394# 3399
QU_AVP . . . . . .  C ADDR   0797H   R   SEG=MAIN   1367 1369#
R10. . . . . . . .  N NUMB   000AH   A      450# 1170 1422 1459 1471 1998 4345 5989 8418
R11. . . . . . . .  N NUMB   000BH   A      451# 1171 1421 1460 1470 2001 5993 8422
R8 . . . . . . . .  N NUMB   0008H   A      448# 525 1424 1457 1473 1992 4170 4341 5494 5981 8410
R9 . . . . . . . .  N NUMB   0009H   A      449# 1423 1458 1472 1995 4343 5495 5985 8414
RAFTERK. . . . . .  C ADDR   0633H   R   SEG=MAIN   1178# 1184
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   153CH   R   SEG=MAIN   3451# 3456
RE1. . . . . . . .  C ADDR   2287H   R   SEG=MAIN   5474# 5480
RE11_7 . . . . . .  C ADDR   06DBH   R   SEG=MAIN   1280# 1322 1333
RE4BYTE. . . . . .  C ADDR   0454H   A      524 4169 4339 8406#
REA3_X . . . . . .  C ADDR   29B1H   R   SEG=MAIN   3977 6605#
REACP. . . . . . .  D ADDR   0077H   A      304# 674 676 678 680 740 756 764 772 781 788 803 838 856 872 888 2158
                                           2160 2162 2164 2196 2198 2200 2202
READ . . . . . . .  C ADDR   2285H   R   SEG=MAIN   673 675 677 5473#
READYACP . . . . .  C ADDR   032BH   R   SEG=MAIN   782 792#
READ_X2. . . . . .  C ADDR   226DH   R   SEG=MAIN   5448# 5459
REBYTE . . . . . .  C ADDR   0278H   R   SEG=MAIN   658# 692 717 829 2097 2119 2125 2151 2189 2227 2236 2238
REBYTE2. . . . . .  C ADDR   046CH   A      1272 1280 1298 1314 1325 1341 4776 4784 8426#
REBYTER. . . . . .  C ADDR   0C71H   R   SEG=MAIN   2108 2125#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 471
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   127BH   R   SEG=MAIN   3063# 3065
RESAR2 . . . . . .  C ADDR   28D5H   R   SEG=MAIN   804 839 857 873 889 901 937 1019 1075 1196 1241 1349 1373 1439
                                           1462 1489 1677 1896 2045 2084 2110 3093 4697 4705 4724 4802 4824 4931 4943
                                           4958 5057 5115 5131 5145 5227 5285 5300 5317 6117 6430# 6589
RESAR8 . . . . . .  C ADDR   2893H   R   SEG=MAIN   1152 1202 1244 1252 1378 2171 2209 6369#
RESA_HL. . . . . .  C ADDR   297EH   R   SEG=MAIN   1927 4863 4876 5020 5033 5189 5202 6566#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2206
REZAP. . . . . . .  D ADDR   0088H   A      375# 2168
REZMUL . . . . . .  C ADDR   068BH   R   SEG=MAIN   1216 1230 1239#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 817 890 900 936 1018 1074 2083
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1201 1377 1415 1624 2361 3084 3094 3101
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1133 1199 1240 1354 1372 1391
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1374
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1204 1380 1438 1676 1806 3092 4696 4801 6588 6619
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4463 4704
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1145 1154 1195 1254 1348
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 819
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1475 1488
RE_HL. . . . . . .  C ADDR   2985H   R   SEG=MAIN   6569# 6579 6583 6586
RE_HL1 . . . . . .  C ADDR   298DH   R   SEG=MAIN   6567 6577#
RE_HL2 . . . . . .  C ADDR   2994H   R   SEG=MAIN   6577 6581#
RE_HL3 . . . . . .  C ADDR   299BH   R   SEG=MAIN   6581 6585#
RFINDMEM . . . . .  C ADDR   0FD4H   R   SEG=MAIN   2643# 2644
RGO23NO. . . . . .  C ADDR   153FH   R   SEG=MAIN   3452# 3457
RGOTO7 . . . . . .  C ADDR   1718H   R   SEG=MAIN   3760# 3794
RHNOR11. . . . . .  C ADDR   1323H   R   SEG=MAIN   3134 3146 3152#
RHNOT1 . . . . . .  C ADDR   12EAH   R   SEG=MAIN   3109 3118#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0FF8H   R   SEG=MAIN   2650 2662#
RI6. . . . . . . .  C ADDR   0FF2H   R   SEG=MAIN   2653 2658# 2667 2678 2701 2705
RIGBLO . . . . . .  C ADDR   10E1H   R   SEG=MAIN   2787# 2818 2820
RIGBLOK. . . . . .  C ADDR   111FH   R   SEG=MAIN   2831#
RIGHT2 . . . . . .  C ADDR   0DF3H   R   SEG=MAIN   2338 2342#
RIGHT3 . . . . . .  C ADDR   0DF7H   R   SEG=MAIN   2340 2345#
RIKN . . . . . . .  C ADDR   0F78H   R   SEG=MAIN   2575# 2593
RIZMAN . . . . . .  C ADDR   0D40H   R   SEG=MAIN   2247# 2297
RI_31. . . . . . .  C ADDR   1012H   R   SEG=MAIN   2665 2674#
RKNLEFT. . . . . .  C ADDR   11A2H   R   SEG=MAIN   2930# 2989
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   151

RKNMEM . . . . . .  C ADDR   11ACH   R   SEG=MAIN   2936# 2999
RKNNUL . . . . . .  C ADDR   119FH   R   SEG=MAIN   2929# 2983
RKNOPT . . . . . .  C ADDR   0D3DH   R   SEG=MAIN   2246# 2308
RKNRAZR. . . . . .  C ADDR   0D3AH   R   SEG=MAIN   2245# 2302
RKVVOD0. . . . . .  C ADDR   1486H   R   SEG=MAIN   3341 3348#
RLABELF. . . . . .  C ADDR   0D37H   R   SEG=MAIN   2244# 2294
RLABELH. . . . . .  C ADDR   119CH   R   SEG=MAIN   2928# 2980
RLABELI. . . . . .  C ADDR   12F0H   R   SEG=MAIN   3121#
RLABELK. . . . . .  C ADDR   12EDH   R   SEG=MAIN   3120# 3123
RLABELL. . . . . .  C ADDR   0FD1H   R   SEG=MAIN   2642#
RLABELL1 . . . . .  C ADDR   1154H   R   SEG=MAIN   2870 2873#
RLABELN. . . . . .  C ADDR   1055H   R   SEG=MAIN   2703 2707#
RLABELP. . . . . .  C ADDR   19F2H   R   SEG=MAIN   4142# 4145
RLABELS13. . . . .  C ADDR   1B06H   R   SEG=MAIN   4283# 4311
RLABELS4 . . . . .  C ADDR   1B03H   R   SEG=MAIN   4282# 4285
RLABL2 . . . . . .  C ADDR   14E9H   R   SEG=MAIN   3392#
RLABM. . . . . . .  C ADDR   14ECH   R   SEG=MAIN   3393# 3397
RLEFCUR. . . . . .  C ADDR   17BFH   R   SEG=MAIN   3854# 3858
RLER . . . . . . .  C ADDR   2606H   R   SEG=MAIN   6100 6102#
RLIST_43 . . . . .  C ADDR   1856H   R   SEG=MAIN   3928# 3930
RMAS4. . . . . . .  C ADDR   047CH   R   SEG=MAIN   962# 964
RME21_23 . . . . .  C ADDR   1826H   R   SEG=MAIN   3886 3905#
RMO220 . . . . . .  C ADDR   066DH   R   SEG=MAIN   1218# 1265
RNNMEMB. . . . . .  C ADDR   105BH   R   SEG=MAIN   2710# 2713
RNO3PARN . . . . .  C ADDR   09F4H   R   SEG=MAIN   1723# 1737
RNOBUF0. . . . . .  C ADDR   0B11H   R   SEG=MAIN   1900 1923#
RNOCHI0. . . . . .  C ADDR   07BFH   R   SEG=MAIN   1386 1390#
RNOH37 . . . . . .  C ADDR   1347H   R   SEG=MAIN   3170# 3174 3181 3195
RNOM31 . . . . . .  C ADDR   1696H   R   SEG=MAIN   3687# 3688
RNOMEMK. . . . . .  C ADDR   143EH   R   SEG=MAIN   3308# 3330
RNORVICH . . . . .  C ADDR   09F2H   R   SEG=MAIN   1665 1666 1722#
RNOT1IN. . . . . .  C ADDR   0AC6H   R   SEG=MAIN   1803 1873#
RNOTESTIZM . . . .  C ADDR   0683H   R   SEG=MAIN   1232# 1267
ROUSTA . . . . . .  C ADDR   19DEH   R   SEG=MAIN   4126 4134#
ROUSTA1. . . . . .  C ADDR   19EFH   R   SEG=MAIN   4134 4140#
ROUT6. . . . . . .  C ADDR   0D34H   R   SEG=MAIN   2243# 2293
ROUT7. . . . . . .  C ADDR   1199H   R   SEG=MAIN   2927# 2974 2979
ROUTMAX. . . . . .  C ADDR   20DEH   R   SEG=MAIN   5181# 5199
ROUTMIN. . . . . .  C ADDR   1FE9H   R   SEG=MAIN   5012# 5030
RR0. . . . . . . .  N NUMB   0000H   A      441# 2265 2889 2951 4625
RR1. . . . . . . .  N NUMB   0001H   A      442# 2266 2888 2952 4624
RR2. . . . . . . .  N NUMB   0002H   A      444# 1274 1286 1292 1304 1316 1327 2267 2887 2953 3956 3964 4623 4778
                                           4790 4796 4808 5507
RR3. . . . . . . .  N NUMB   0003H   A      445# 1275 1285 1293 1303 1317 1328 2268 2886 2954 3957 3963 4622 4779
                                           4789 4797 4807 5508
RR4. . . . . . . .  N NUMB   0004H   A      1276 1284 1294 1302 1318 1329 2269 2885 2955 3958 3962 4621 4780 4788
                                           4798 4806 6654# 6711 6732 6748 6792 6814
RR5. . . . . . . .  N NUMB   0005H   A      1277 1283 1295 1301 1319 1330 2270 2884 2956 3959 3961 4620 4781 4787
                                           4799 4805 6655# 6712 6719 6726 6793 6802
RR6. . . . . . . .  N NUMB   0006H   A      443# 2271 2883 2957 4619
RR7. . . . . . . .  N NUMB   0007H   A      446# 2272 2882 2958 4618
RRIR . . . . . . .  C ADDR   2613H   R   SEG=MAIN   6111 6113#
RRMO220. . . . . .  C ADDR   07BCH   R   SEG=MAIN   1363 1389#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0991H   R   SEG=MAIN   1655# 1667 1669 1670
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 501
RTIZMRI. . . . . .  C ADDR   0ED8H   R   SEG=MAIN   2497#
RVIOUT . . . . . .  C ADDR   0F4FH   R   SEG=MAIN   2543 2551 2555# 2560
RVVIZKO. . . . . .  C ADDR   1325H   R   SEG=MAIN   3154# 3162
RVVKALI52. . . . .  C ADDR   1B32H   R   SEG=MAIN   4304 4306#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   152

SADIAP . . . . . .  D ADDR   0034H   A      314# 578 1935 4009
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1938 4012
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1941 4015
SADIAP4. . . . . .  D ADDR   0030H   A      318# 1944 4017
SAUS . . . . . . .  D ADDR   0036H   A      313# 2072 2074 2091 2093 2140 2142 2221 2223
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2285 2588 2606 2801 2845 2865 2970 3617 3672 3777 4293 4420 4526
                                           6176 6184
SAVEIR2. . . . . .  C ADDR   2817H   R   SEG=MAIN   903 940 1022 1078 6269#
SAVELTE. . . . . .  C ADDR   04A7H   A      8489#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 599 3548 6537 6568
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 607 3563 6556 6578
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 614 3568 6560 6582
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 621 3572 6562 6585
SAVER2 . . . . . .  C ADDR   2823H   R   SEG=MAIN   591 593 595 597 808 818 820 843 861 877 891 1134 1146 1155 1200
                                           1205 1255 1355 1375 1381 1392 1476 1480 1681 2004 2050 2089 2118 2169 2181
                                           2207 2219 3095 3102 3987 4464 4556 4714 4816 4934 4946 4966 5060 5125 5141
                                           5156 5230 5295 5310 5322 6120 6283# 6620
SAVE_HL. . . . . .  C ADDR   294AH   R   SEG=MAIN   1930 3443 3818 6535#
SA_HL. . . . . . .  C ADDR   2951H   R   SEG=MAIN   6538# 6557 6561 6563
SA_HL1 . . . . . .  C ADDR   296CH   R   SEG=MAIN   6536 6555#
SA_HL2 . . . . . .  C ADDR   2973H   R   SEG=MAIN   6555 6559#
SA_HL3 . . . . . .  C ADDR   297AH   R   SEG=MAIN   6559 6562#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5363 5369
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 509 5364 5368 5371 5372 5393
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   222FH   R   SEG=MAIN   5407# 5414
SDV1 . . . . . . .  C ADDR   2243H   R   SEG=MAIN   5419# 5425
SDVIG0 . . . . . .  C ADDR   030CH   R   SEG=MAIN   768# 770
SDVIG1 . . . . . .  C ADDR   0301H   R   SEG=MAIN   760# 762
SDVIG2 . . . . . .  C ADDR   02F6H   R   SEG=MAIN   752# 754
SDVIG3 . . . . . .  C ADDR   02EAH   R   SEG=MAIN   743# 745
SDVIG4 . . . . . .  C ADDR   031BH   R   SEG=MAIN   778# 780
SDVIG6 . . . . . .  C ADDR   0325H   R   SEG=MAIN   785# 787
SDVM . . . . . . .  C ADDR   0323H   R   SEG=MAIN   775 784#
SEEGOON. . . . . .  C ADDR   09F9H   R   SEG=MAIN   1707 1712 1714 1720 1727#
SEEIND . . . . . .  C ADDR   0A07H   R   SEG=MAIN   1647 1654 1655 1739#
SEE_L43. . . . . .  C ADDR   192DH   R   SEG=MAIN   4026 4034 4037#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7585# 7606 7607 7632 7633 7657 7800 7817 8038 8078
SKOR19 . . . . . .  C ADDR   1A3DH   R   SEG=MAIN   4171 4178#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   13B4H   R   SEG=MAIN   3235# 3251
SP . . . . . . . .  D ADDR   0081H   A      17# 462
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 507
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 506
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5346
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   1ADEH   R   SEG=MAIN   4261 4263#
SS1. . . . . . . .  C ADDR   2365H   R   SEG=MAIN   5656# 5658
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 805 807 822 840 842 858 860 874 876 1413 1622 2359 3082
SUMT2. . . . . . .  C ADDR   0377H   R   SEG=MAIN   796 837#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   153

T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196 520 1966 2920 4649 5331
T2MSME . . . . . .  C ADDR   1783H   R   SEG=MAIN   3826# 3832
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   2505H   R   SEG=MAIN   5932# 5942
TABN . . . . . . .  C ADDR   259DH   R   SEG=MAIN   6034# 6038
TABT11 . . . . . .  C ADDR   231DH   R   SEG=MAIN   5593# 6014
TABT7. . . . . . .  C ADDR   2321H   R   SEG=MAIN   4753 5597# 6027
TABT9. . . . . . .  C ADDR   231FH   R   SEG=MAIN   5595# 6024
TABUS. . . . . . .  C ADDR   2309H   R   SEG=MAIN   5529 5582#
TAKTIND. . . . . .  C ADDR   0A44H   R   SEG=MAIN   1774 1777#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 498 499 513
TE10MS . . . . . .  C ADDR   2669H   R   SEG=MAIN   3825 6199#
TE22 . . . . . . .  C ADDR   2590H   R   SEG=MAIN   6013 6023#
TE23 . . . . . . .  C ADDR   2598H   R   SEG=MAIN   6023 6027#
TE2MS. . . . . . .  C ADDR   265FH   R   SEG=MAIN   3831 6198#
TEAEQU0. . . . . .  C ADDR   26A5H   R   SEG=MAIN   3208 6207#
TEAVK. . . . . . .  C ADDR   26E1H   R   SEG=MAIN   4670 6214#
TEBEQU0. . . . . .  C ADDR   26AFH   R   SEG=MAIN   6208#
TEBL . . . . . . .  C ADDR   2795H   R   SEG=MAIN   2760 3385 6236#
TEBL0. . . . . . .  C ADDR   279FH   R   SEG=MAIN   3636 6237#
TECH . . . . . . .  C ADDR   27A9H   R   SEG=MAIN   3917 4084 6238#
TECLE. . . . . . .  C ADDR   275AH   R   SEG=MAIN   2747 3353 6230#
TEEND. . . . . . .  C ADDR   27F9H   R   SEG=MAIN   4767 6247#
TEERR. . . . . . .  C ADDR   27EFH   R   SEG=MAIN   6191 6246#
TEFULL . . . . . .  C ADDR   2781H   R   SEG=MAIN   2767 3603 6234#
TEINT. . . . . . .  C ADDR   278BH   R   SEG=MAIN   3703 6235#
TEIZMK . . . . . .  C ADDR   273CH   R   SEG=MAIN   2545 3139 3148 6227#
TEKALIB. . . . . .  C ADDR   26EBH   R   SEG=MAIN   3893 4673 6215#
TEKAOUT. . . . . .  C ADDR   0C74H   R   SEG=MAIN   2127# 2135
TEKD . . . . . . .  C ADDR   2732H   R   SEG=MAIN   4350 6226#
TELIST . . . . . .  C ADDR   2776H   R   SEG=MAIN   2730 3294 3364 3370 6233#
TEMAX. . . . . . .  C ADDR   27C7H   R   SEG=MAIN   4120 6241#
TEMEM. . . . . . .  C ADDR   2764H   R   SEG=MAIN   6231#
TEMENU . . . . . .  C ADDR   26B9H   R   SEG=MAIN   6209#
TEMID. . . . . . .  C ADDR   27D1H   R   SEG=MAIN   4128 6242#
TEMIN. . . . . . .  C ADDR   27BDH   R   SEG=MAIN   3648 4136 6240#
TEMUL. . . . . . .  C ADDR   076AH   R   SEG=MAIN   1310 1347#
TENMIN . . . . . .  C ADDR   2407H   R   SEG=MAIN   1213 1215 1229 5724#
TEOLI. . . . . . .  C ADDR   27DBH   R   SEG=MAIN   1514 6244#
TEOLL. . . . . . .  C ADDR   2750H   R   SEG=MAIN   1608 6229#
TEOLR. . . . . . .  C ADDR   27E5H   R   SEG=MAIN   1510 6245#
TEOUT. . . . . . .  C ADDR   2746H   R   SEG=MAIN   6228#
TEPAR. . . . . . .  C ADDR   2728H   R   SEG=MAIN   4690 6225#
TES19_2. . . . . .  C ADDR   271EH   R   SEG=MAIN   530 2687 4178 4402 6223#
TES57_6. . . . . .  C ADDR   2714H   R   SEG=MAIN   2681 4172 4397 4686 6222#
TESKOR . . . . . .  C ADDR   26D7H   R   SEG=MAIN   4667 6213#
TEST01 . . . . . .  C ADDR   21E8H   R   SEG=MAIN   5368# 5391
TEST02 . . . . . .  C ADDR   2217H   R   SEG=MAIN   5388 5390#
TEST04 . . . . . .  C ADDR   21F8H   R   SEG=MAIN   5375# 5377
TEST1. . . . . . .  C ADDR   21DEH   R   SEG=MAIN   5363# 5379 5400
TEST2. . . . . . .  C ADDR   2210H   R   SEG=MAIN   5368 5387#
TEST22 . . . . . .  C ADDR   1AB3H   R   SEG=MAIN   4228 4235#
TEST23 . . . . . .  C ADDR   1AB8H   R   SEG=MAIN   4235 4238#
TEST3. . . . . . .  C ADDR   2202H   R   SEG=MAIN   5370 5380#
TEST4. . . . . . .  C ADDR   21F0H   R   SEG=MAIN   5371# 5386
TEST5. . . . . . .  C ADDR   221AH   R   SEG=MAIN   5389 5392#
TEST7I . . . . . .  C ADDR   0A5CH   R   SEG=MAIN   1789 1792#
TEST9I . . . . . .  C ADDR   0A55H   R   SEG=MAIN   1784 1789#
TESTAT . . . . . .  C ADDR   27B3H   R   SEG=MAIN   2738 3344 6239#
TESTRS . . . . . .  C ADDR   21DCH   R   SEG=MAIN   4161 5361#
TESTS. . . . . . .  C ADDR   1AA7H   R   SEG=MAIN   4230# 4237 4240
TETE11 . . . . . .  C ADDR   26F6H   R   SEG=MAIN   4150 4677 6217#
TETE7. . . . . . .  C ADDR   270AH   R   SEG=MAIN   4217 4683 6219#
TETE9. . . . . . .  C ADDR   2700H   R   SEG=MAIN   4680 6218#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   154

TETESI . . . . . .  C ADDR   26C3H   R   SEG=MAIN   3043 4660 6211#
TETESR . . . . . .  C ADDR   26CDH   R   SEG=MAIN   4664 6212#
TEVICH . . . . . .  C ADDR   269BH   R   SEG=MAIN   2382 2553 2562 3144 4565 6206#
TEWR . . . . . . .  C ADDR   276CH   R   SEG=MAIN   2721 3359 6232#
TEXTT. . . . . . .  C ADDR   265FH   R   SEG=MAIN   5609 6197#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 481
TH1. . . . . . . .  D ADDR   008DH   A      29# 528 532 4275 4277
TH2. . . . . . . .  D ADDR   00CDH   A      89# 1963 2917 4646
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   2253H   R   SEG=MAIN   5428#
TIM1 . . . . . . .  C ADDR   2255H   R   SEG=MAIN   5429# 5429
TIM2 . . . . . . .  C ADDR   2258H   R   SEG=MAIN   5410 5413 5420 5424 5432# 5475 5479 6456 6458
TIM3 . . . . . . .  C ADDR   225AH   R   SEG=MAIN   5433# 5433
TIZMRI . . . . . .  C ADDR   0DECH   R   SEG=MAIN   2337# 2497
TL0. . . . . . . .  D ADDR   008AH   A      26# 482
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88# 1964 2918 4647
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   13B1H   R   SEG=MAIN   3220 3232#
TMOD . . . . . . .  D ADDR   0089H   A      25# 479 512
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 496
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 495
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1A1EH   R   SEG=MAIN   4159 4164#
TOME14 . . . . . .  C ADDR   1A4BH   R   SEG=MAIN   4164 4185#
TOME15 . . . . . .  C ADDR   1A63H   R   SEG=MAIN   4185 4197#
TOME21 . . . . . .  C ADDR   1A15H   R   SEG=MAIN   4148 4159#
TOSK19 . . . . . .  C ADDR   1BE2H   R   SEG=MAIN   4396 4402#
TOUTF. . . . . . .  C ADDR   132EH   R   SEG=MAIN   3158# 3161
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0EDBH   R   SEG=MAIN   2499# 2508
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5347
UNPACK1. . . . . .  C ADDR   009EH   A      7603# 7797 7931 8061 8175
UNPACK2. . . . . .  C ADDR   00BAH   A      7628# 7798 7932 8062
UP1. . . . . . . .  C ADDR   0138H   A      7748# 7765
UP2. . . . . . . .  C ADDR   014BH   A      7768# 7786
UP2A . . . . . . .  C ADDR   0161H   A      7747 7784#
UPA. . . . . . . .  C ADDR   2436H   R   SEG=MAIN   5779# 5785
UPA1 . . . . . . .  C ADDR   2446H   R   SEG=MAIN   5797# 5803
UPA2 . . . . . . .  C ADDR   2426H   R   SEG=MAIN   5760# 5766
UPAA . . . . . . .  C ADDR   2922H   R   SEG=MAIN   6504# 6510
UPAA4. . . . . . .  C ADDR   2491H   R   SEG=MAIN   5860# 5866
UPAB . . . . . . .  C ADDR   24A1H   R   SEG=MAIN   5877# 5883
UPAK . . . . . . .  C ADDR   2430H   R   SEG=MAIN   5776#
UPAK1. . . . . . .  C ADDR   28FCH   R   SEG=MAIN   6469#
UPAK2. . . . . . .  C ADDR   2420H   R   SEG=MAIN   5757#
UPAK3. . . . . . .  C ADDR   2440H   R   SEG=MAIN   3846 3941 5794#
UPAK4. . . . . . .  C ADDR   291CH   R   SEG=MAIN   3800 6501#
UPAKA. . . . . . .  C ADDR   248BH   R   SEG=MAIN   4548 5857#
UPAKB. . . . . . .  C ADDR   249BH   R   SEG=MAIN   4595 5874#
UPAV1. . . . . . .  C ADDR   1B51H   R   SEG=MAIN   4330# 4336
UPAV2. . . . . . .  C ADDR   1C14H   R   SEG=MAIN   4447# 4453
UPK1 . . . . . . .  C ADDR   290EH   R   SEG=MAIN   6477 6480#
UPK2 . . . . . . .  C ADDR   290FH   R   SEG=MAIN   6479 6481#
VICHMAX. . . . . .  C ADDR   20E1H   R   SEG=MAIN   4122 5183#
VICHMEAN . . . . .  C ADDR   1EEDH   R   SEG=MAIN   4130 4856#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   155

VICHMIN. . . . . .  C ADDR   1FECH   R   SEG=MAIN   3650 4138 5014#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1268 1780 2379 2392 2527 2540 2646 2654 3047 3051 3059 3133 3199
                                           3312 3882 3890 3899 4143 4194 4208 4348 4539 4578 4610 4658 6012
VIG0 . . . . . . .  C ADDR   0AB2H   R   SEG=MAIN   1857# 1859
VIG4 . . . . . . .  C ADDR   0AC0H   R   SEG=MAIN   1868# 1870
VIOUT. . . . . . .  C ADDR   0EB2H   R   SEG=MAIN   2385 2472# 2500 2512 2517 2547 2556 2564 2589 2612 2621 2624 2658
                                           2671 2686 2692 2708 2723 2732 2740 2749 2764 2811 2814 2854 2868 2871 3157
                                           3158 3237 4224
VIOUTF . . . . . .  C ADDR   1327H   R   SEG=MAIN   3155#
VIT2_10. . . . . .  C ADDR   0E1BH   R   SEG=MAIN   2367# 2373 2374
VODM11_15. . . . .  C ADDR   17E2H   R   SEG=MAIN   3871# 3889
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2325 3813 6545 6547
VV21_23. . . . . .  C ADDR   1A9EH   R   SEG=MAIN   4214 4226#
VVCHIBL. . . . . .  C ADDR   25D4H   R   SEG=MAIN   2629 6066#
VVCHIF . . . . . .  C ADDR   25AFH   R   SEG=MAIN   6042# 6059
VVINTE . . . . . .  C ADDR   1743H   R   SEG=MAIN   3764 3792#
VVIZKO . . . . . .  C ADDR   137EH   R   SEG=MAIN   3154 3199#
VVKALI52 . . . . .  C ADDR   1C07H   R   SEG=MAIN   4306 4431# 4483
VVMENU . . . . . .  C ADDR   1BB7H   R   SEG=MAIN   4313 4384#
VVNOL23. . . . . .  C ADDR   25CFH   R   SEG=MAIN   6063# 6067
VVNOL31. . . . . .  C ADDR   25CAH   R   SEG=MAIN   6061# 6063
VVNOL41. . . . . .  C ADDR   25C8H   R   SEG=MAIN   6059# 6061
VVOD2_10 . . . . .  C ADDR   177BH   R   SEG=MAIN   3321 3448 3559 3823#
VVOD43 . . . . . .  C ADDR   1959H   R   SEG=MAIN   4056 4063#
VVODM11_15 . . . .  C ADDR   19F5H   R   SEG=MAIN   3871 4143#
VVOSTA . . . . . .  C ADDR   19B6H   R   SEG=MAIN   4099 4118#
VVOSTAD. . . . . .  C ADDR   19CAH   R   SEG=MAIN   4118 4126#
VVRR6. . . . . . .  C ADDR   0F35H   R   SEG=MAIN   2545#
VV_52V . . . . . .  C ADDR   1B29H   R   SEG=MAIN   4287 4303#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 477 478
WORK . . . . . . .  D ADDR   00B8H   A      396# 1495 1497 1503 1519 1526 1542 1563 1568 1584 1808 1886 3415 3425
                                           3427 3461 3471 3473 3483 3493 3495 3502 3512 3514 3524 3534 3536 4883 4930
                                           4933 4942 4945 4957 5038 5056 5059 5114 5124 5130 5140 5144 5208 5226 5229
                                           5284 5294 5299 5309 5365 5387
WR1. . . . . . . .  C ADDR   28E9H   R   SEG=MAIN   6452# 6459
WRITE. . . . . . .  C ADDR   28E6H   R   SEG=MAIN   671 5903 5905 5907 5909 5911 5913 5916 5918 5920 5923 5925 5927
                                           6450#
WRITED_X1. . . . .  C ADDR   225EH   R   SEG=MAIN   5438#
WRITE_X1 . . . . .  C ADDR   225DH   R   SEG=MAIN   5437#
WRPAGE . . . . . .  C ADDR   0480H   A      4272 4746 4848 8450#
WW5. . . . . . . .  C ADDR   0483H   A      8451# 8459
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 473 505
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 474
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 475 504
XCIKLWR. . . . . .  C ADDR   2803H   R   SEG=MAIN   898 911 913 915 918 921 924 927 930 933 966 968 970 973 976 979
                                           982 985 988 990 993 995 997 1000 1003 1006 1009 1012 1015 1067 1069 1071
                                           6252#
XTEMP. . . . . . .  N NUMB   000CH   A      6651# 7015 7016 7017 7018 7104 7106 7107 7109 7110 7112 7113 7115 7137
                                           7138 7139 7140 7158 7159 7163 7164 7167 7171 7172 7175 7179 7180 7184 7185
                                           7187 7188 7189 7191 7195 7196 7198 7199 7203 7204 7209 7210 7212 7213 7217
                                           7218 7223 7225 7226 7227
YBNUL. . . . . . .  C ADDR   12BFH   R   SEG=MAIN   3090 3098#
YES. . . . . . . .  C ADDR   2B51H   R   SEG=MAIN   7037 7041 7045 7049 7067# 7130
YES0KEY. . . . . .  C ADDR   02C6H   R   SEG=MAIN   704 716#
YES0KEY1 . . . . .  C ADDR   02D3H   R   SEG=MAIN   723# 730
YESAVP . . . . . .  C ADDR   07C9H   R   SEG=MAIN   1369 1395#
YESBUF . . . . . .  C ADDR   0B16H   R   SEG=MAIN   1921 1926#
YESIND . . . . . .  C ADDR   0A5EH   R   SEG=MAIN   1779 1788 1791 1794#
YESPRD . . . . . .  C ADDR   0B14H   R   SEG=MAIN   1920 1924#
YESTEST. . . . . .  C ADDR   22F8H   R   SEG=MAIN   5524 5556#
YESTT5 . . . . . .  C ADDR   0BE0H   R   SEG=MAIN   2042#
YESVICH. . . . . .  C ADDR   0814H   R   SEG=MAIN   1383 1434#
YESVI_KM . . . . .  C ADDR   1E56H   R   SEG=MAIN   4693 4773#
YESVI_KR . . . . .  C ADDR   1DCEH   R   SEG=MAIN   4693# 4695
YST1 . . . . . . .  C ADDR   01A2H   R   SEG=MAIN   529 533#
A51 MACRO ASSEMBLER  AMP35_2                                                              03/13/2007 11:23:34 PAGE   156

YST19. . . . . . .  C ADDR   019AH   R   SEG=MAIN   526 530#
Z01S . . . . . . .  C ADDR   237DH   R   SEG=MAIN   5673# 5675
Z05S . . . . . . .  C ADDR   238AH   R   SEG=MAIN   5682# 5684
Z100 . . . . . . .  C ADDR   234EH   R   SEG=MAIN   5637# 5639
Z15. . . . . . . .  C ADDR   235CH   R   SEG=MAIN   5649# 5651
Z1S. . . . . . . .  C ADDR   2370H   R   SEG=MAIN   5665# 5667
ZAPADC . . . . . .  C ADDR   222DH   R   SEG=MAIN   5406#
ZCMP . . . . . . .  C ADDR   2885H   R   SEG=MAIN   6359#
ZDIV . . . . . . .  C ADDR   2852H   R   SEG=MAIN   816 1126 3980 6322#
ZER1 . . . . . . .  C ADDR   00B3H   A      7613 7617# 7672 7715
ZER2 . . . . . . .  C ADDR   00D4H   A      7639 7643#
ZMUL . . . . . . .  C ADDR   2848H   R   SEG=MAIN   6317#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1701 4005 4984 5174 6330 6333 6336
ZNPLUS . . . . . .  C ADDR   02DDH   R   SEG=MAIN   682 732#
ZZ . . . . . . . .  C ADDR   235EH   R   SEG=MAIN   5650# 5650
Z_01S. . . . . . .  C ADDR   2379H   R   SEG=MAIN   2277 2278 2963 5385 5399 5671# 6188
Z_05S. . . . . . .  C ADDR   2386H   R   SEG=MAIN   2036 2037 2763 4123 4131 4139 5680#
Z_100. . . . . . .  C ADDR   234CH   R   SEG=MAIN   5636#
Z_15 . . . . . . .  C ADDR   235AH   R   SEG=MAIN   650 5648#
Z_1MS. . . . . . .  C ADDR   2363H   R   SEG=MAIN   723 5392 5655#
Z_1S . . . . . . .  C ADDR   236CH   R   SEG=MAIN   639 647 1430 2384 3651 3924 4045 4097 4389 4475 4577 4770 4771
                                           5663#
Z_5. . . . . . . .  C ADDR   2355H   R   SEG=MAIN   5442 5452 5643#
Z_9. . . . . . . .  C ADDR   28E1H   R   SEG=MAIN   5349 6444#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
