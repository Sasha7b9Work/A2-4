A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp25.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp25.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236             
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)               
                     311     
                     312     ;;;;;
  0020               313      cellbit                DATA    20h
  0000               314     bitznak         BIT     cellbit.0       ;20.0           
  0001               315     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               316     znmat           BIT             cellbit.2       ;20.2
  0003               317     bitrs           BIT             cellbit.3       ;20.3
  0004               318     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               319     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               320     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     6

                             !!!
  0007               321     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     322     
  0021               323     cellbit1                DATA    21h
  0008               324     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               325     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               326     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               327     bitmem          BIT             cellbit1.3      ;21.3
  000C               328     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               329     bmem12          BIT             cellbit1.5      ;21.5    бит ПАМ12
  000E               330     bmem13          BIT             cellbit1.6      ;21.6   бит ПАМ13        
  000F               331     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     332     
  0022               333     cellbit2                DATA    22h
  0010               334     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               335     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               336     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               337     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               338     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               339     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               340     bitvi31         BIT             cellbit2.6      ;22.6   бит ПАМ13        
  0017               341     bitoll          BIT             cellbit2.7      ;22.7
                     342     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     343     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     344     ;и выдает т.н. буфер индикации  
  0023               345     cellbit3                DATA    23h
  0018               346     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               347     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               348     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               349     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     350     ;bit            BIT             cellbit3.4      ;22.4    
                     351     ;bit            BIT             cellbit3.5      ;22.5    
                     352     ;bit            BIT             cellbit3.6      ;22.6            
                     353     ;bit            BIT             cellbit3.7      ;22.7
                     354             
  005E               355     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     356     ;hex
  0062               357     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               358     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               359     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               360     rez_A2   data 7bh; A2
                     361     
  0098               362     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               363     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               364     chdel    data  83h              ; счетчик задержки
                     365     ;float
  0084               366     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               367     rezAp    data  88h              ;4byte  A+
  008C               368     rezAm    data  8ch              ;4byte  A-
  0090               369     koefKp   data  90h              ;4byte  K+
  0094               370     koefKm   data  94h              ;4byte  K-
                     371     ;hex 
  009A               372     parT     data  9ah              ;параметр времени измерения
  009B               373     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               374     rez_A3   data  9ch              ;A3
                     375     ;FLOAT
  00A0               376     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               377     rez_Ak  data  0a4h         ;Ak
  00A8               378     parol           data  0a8h         ;храним в памяти пароль
  00AC               379     chind   data  0ach         ;счетчик индикации
  00AD               380     chbuf   data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               381     diap    data  0aeh         ;номер диапазона
  00AF               382     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               383     level   data  0b0h              ;уровень в меню, выч    ,Tизм
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     7

  00B1               384     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               385     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               386     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               387     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               388     work    data  0b8h        ;рабочая ячейка
  00BC               389     konstA  data  0bch        ;     введенная с крана константа A
  00C0               390     konstB  data  0c0h         ;    введенная с крана константа B
  00C4               391     nblok   data  0c4h         ;номер блока
  00C5               392     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               393     rez_R           data    0c9h            ;рез вычисления R
                     394     ;data  0cfh;параметр =11,12,13,21
                     395     ;data  0d0h
                     396     
                     397     ;внешнее ОЗУ 64K 
                     398     ;               XSEG AT 100h
                     399             PUBLIC    MASS0
  0080               400     MASS0  xdata 0080h;     скользящий массив измерения
  0084               401     MASS1  xdata 0084h;
  0088               402     MASS2  xdata 0088h;
  008C               403     MASS3  xdata 008ch;
  0090               404     MASS4  xdata 0090h;
  0094               405     MASS5  xdata 0094h;
  0098               406     MASS6  xdata 0098h;
  009C               407     MASS7  xdata 009ch;
  00A0               408     MASS8  xdata 00a0h;
  00A4               409     MASS9  xdata 00a4h;
  00A8               410     MASS10  xdata 00a8h;
  00AC               411     MASS11  xdata 00ach;
  00B0               412     MASS12  xdata 00b0h;
  00B4               413     MASS13  xdata 00b4h;
  00B8               414     MASS14  xdata 00b8h;
  00BC               415     MASS15  xdata 00bch;
  00C0               416     MASS16  xdata 00c0h;
  00C4               417     MASS17  xdata 00c4h;
  00C8               418     MASS18  xdata 00c8h;
  00CC               419     MASS19  xdata 00cch;
                     420     ;xdata 0038h;
                     421     
  0000               422                             rr0             EQU 00
  0001               423                     rr1       equ   01
  0006               424                     rr6   equ 06
  0002               425                     rr2       equ   02
  0003               426                     rr3       equ   03
  0007               427                     rr7   equ 07
                     428     
  0008               429                     r8   equ 08
  0009               430                     r9        equ   09
  000A               431                     r10       equ   10
  000B               432                     r11   equ 11
                     433     
                     434                     
                     435        
----                 436                  rseg     Main          ; Switch to this code segment.
                     437     
                     438                  using    0              ; Specify register bank for the following
                     439     
0100                 440     org 100h
                     441     ;$EJECT
                     442     
0100 7581E0          443     begin:     mov  sp, #0e0h
0103 75E900          444                                             mov             PCA0L,#00;=0x00;
0106 75D900          445                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          446                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          447                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          448                                             mov     P2MDOUT,#00;=0x00;
                     449             
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     8

0112 75A73F          450             mov     P3MDOUT,#3fh;
0115 75B5FF          451             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          452             mov     REF0CN,#03h;=0x03;
                     453             
011B 75E114          454             mov     XBR0,#14h;= 0x14;
011E 75E200          455             mov     XBR1,#00; =0x00;
0121 75E300          456             mov XBR2,#00;=0x00;
0124 75B0C0          457             mov     P3,#0c0h
0127 75FFDE          458             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          459             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          460             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          461             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          462             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          463             mov     TL0,#0f9h;=0xf9; 
0139 75E680          464             mov     EIE1,#80h;=0x80;
                     465     
013C 75D480          466             mov     DAC0CN,#80h;=0x80;
013F 75D780          467             mov     DAC1CN,#80h;=0x80;
0142 75B167          468             mov     OSCXCN,#67h;=0x67;
                     469     
                     470      
                     471     
0145 E5B1            472     gener:     mov a, oscxcn
0147 B4E7FB          473                cjne a,#11100111b,gener
                     474                            
014A 75B288          475             mov     OSCICN,#88h;=0x84;
014D 75CA00          476         mov TMR2RLL,#0;=0;
0150 75CBD1          477         mov TMR2RLH,#0d1h;=0xd1;
                     478       
0153 D28E            479                     setb  TCON.6                    ;регистр управления
0155 D28C            480                      setb tcon.4
                     481     
0157 75EF00          482             mov     RSTSRC,#0;=00   ;//источники сброса 
                     483     
                     484             
015A 75E340          485          mov        XBR2,#40h
015D 75E106          486              mov    XBR0,#06h;16h
0160 75F803          487             mov             SPI0CN,#03
0163 759D31          488             mov             spi0ckr,#31H;;;;;;;;#04
                     489     ;установка скорости
0166 759850          490                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          491                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          492                                             mov             CKCON,#00010000b;TIM=1
016F 758920          493                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          494                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            495                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            496                                             mov                     r3,#2ch
0179 120454          497                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            498                                             mov                     a,r8
017E B40007          499                                             cjne            a,#00,yst19
0181 C213            500                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          501                                             mov                     TH1,#244
0186 8008            502                                             jmp               yst1
0188 900000   F      503     yst19:          mov                     dptr,#teS19_2
018B D213            504                                             setb            bitv19                  ;19,2
018D 758DDC          505                                             mov                     TH1,#220
0190                 506     yst1:
0190 75E730          507                                             mov             EIE2,#30H;00110000
0193 75A880          508                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE     9

                     509     ;ozu
0196 E4              510                                             clr     a
0197 7800            511                                             mov     r0,#00h 
0199 F6              512     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              513                                             inc     r0
019B B87FFB          514                                             cjne    r0,#7fh,mecle
019E 7880            515                                             mov     r0,#80h
01A0 F6              516     meff:                   mov     @r0,a 
01A1 F2              517                                             movx @r0,a
01A2 08              518                                             inc     r0
01A3 B8DFFA          519                             cjne    r0,#0dfh,meff
01A6 120000   F      520                             call    clmassix
01A9 7898            521                             mov             r0,#chinkor
01AB 7600            522                             mov             @r0,#0;1;
01AD 08              523                             inc             r0
01AE 76C8            524                             mov             @r0,#0c8h;90h;
                     525                             ;;;;
01B0 7881            526                             mov             r0,#chavt
01B2 7603            527                             mov             @r0,#3;1
01B4 08              528                             inc             r0
01B5 7620            529                             mov             @r0,#20h;90h
                     530     
01B7 78B2            531                                     mov             r0,#marker
01B9 76FF            532                                     mov             @r0,#0ffh
                     533                             ;mov            r0,#chind
                     534                             ;mov            @r0,#1
                     535                     
01BB 74FF            536                             mov             a,#0ffh
01BD F585            537                        mov          p5,a
01BF 799A            538                             mov             r1,#parT
01C1 7702            539                             mov             @r1,#2                  ;Tizm=1s
01C3 79AE            540                             mov             r1,#diap
01C5 7705            541                             mov             @r1,#5                  ;10-7a
01C7 79AF            542                             mov             r1,#parN
01C9 7702            543                             mov             @r1,#2
01CB 7400            544                             mov             a,#00h
01CD F585            545                             mov             p5,a
01CF D204            546                             setb    bitizm
                     547     
01D1 799B            548                             mov             r1,#chbefore
01D3 7700            549                             mov             @r1,#0
                     550                             ;;;;;;
01D5 900000   F      551                             mov             dptr,#ch_1              ;1->r2..r5 float
01D8 120000   F      552                             call    ldc_long
01DB 7890            553                             mov             r0,#koefKp         ;1(float)->koefKp
01DD 120000   F      554                             call    saver2
01E0 7894            555                             mov             r0,#koefKm              ;1(float)->koefKm
01E2 120000   F      556                             call    saver2
01E5 78A0            557                             mov             r0,#koefKD
01E7 120000   F      558                             call    saver2  
                     559     ;START
                     560     ;                                       rez_A0=0;
                     561     ;        SUMM=0; //обнуление скользящего массива
                     562     ;        over_mas=0;
                     563     ;        count_mas=0;
                     564     
01EA 7840            565                             mov             r0,#bufind
01EC                 566     age2:
01EC 76FD            567                             mov             @r0,#0fdh         ;погасить индикатор
01EE 08              568                             inc             r0
01EF B84CFA          569                             cjne    r0,#bufind+12,age2              
01F2 120000   F      570                             call    ind
01F5 120000   F      571                             call    z_1s
                     572     
                     573                                     ;зажечь все лементы индикации
01F8 7840            574                             mov             r0,#bufind
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    10

01FA 76FE            575     ageon:          mov             @r0,#0feh;?
01FC 08              576                             inc             r0
01FD B84CFA          577                             cjne    r0,#bufind+12,ageon             
0200 120000   F      578                             call    ind
0203 120000   F      579                             call    z_1s            ;1sec
                     580     ;;;;;;;;;;;;;;;;
0206 7840            581                             mov             r0,#bufind
0208 7630            582                             mov             @r0,#30H;"A"
020A 08              583                             inc             r0
020B 7630            584                             mov             @r0,#30H;"В"
020D 08              585                             inc             r0
020E 7630            586                             mov             @r0,#30H;"Т"
0210 08              587                             inc             r0
0211 7634            588                             mov             @r0,#34H;2dh
0213 08              589                             inc             r0
0214 7635            590                             mov             @r0,#35H;"H"
0216 08              591                             inc             r0
0217 7636            592                             mov             @r0,#36h
0219 08              593                             inc             r0
021A 7637            594                             mov             @r0,#37h
021C 08              595                             inc             r0
021D 762D            596                             mov             @r0,#2dh
021F 08              597                             inc             r0
0220 7637            598                             mov             @r0,#37h
0222 08              599                             inc             r0
0223 7641            600                             mov             @r0,#"A";31h
0225 08              601                             inc             r0
                     602                     
0226 120000   F      603     dd:                     call    ind
0229 120000   F      604                             call    z_15;z_1ms
022C 434B10          605                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     606     ;;;;;;;;;;;;;;;;;;;
022F 7C60            607                             mov             r4,#60h
0231 7D00            608                             mov             r5,#00         
0233 120000   F      609                             call    iniacp;инициализация acp
0236 120000   F      610                             call    loadUS          ;us 10-7 A
                     611                             
0239 C217            612     rebyte:         clr             bitoll
023B 3095FD          613                             jnb             p1.5,$
023E 2095FD          614                             jb              p1.5,$
0241 E586            615                             mov             a,P6            ;p6.4=0
0243 54EF            616                             anl             a,#0efh
0245 F586            617                             mov             P6,a
0247 00              618                             nop
0248 00              619                             nop
                     620                                     
0249 E586            621                             mov             a,P6                    ;p6.4=1 
024B 4410            622                             orl             a,#10h
024D F586            623                             mov             P6,a                        
024F 7411            624                             mov             a,#11h
0251 120000   F      625                             call    write
                     626                             ;чтение acp
0254 120000   F      627                             call    read    
0257 F578            628                             mov     reacp+1,A       ;старший байт 
0259 120000   F      629                             call    read    
025C F579            630                             mov     reacp+2,A       ;средний байт 
025E 120000   F      631                             call    read
0261 F57A            632                             mov     reacp+3,A               ;мл байт
                     633                        ;;;;;;;;;;;
0263 7878            634                        mov          r0,#reacp+1
0265 E6              635                        mov          a,@r0
0266 20E72D          636                             jb              acc.7,znplus;
0269 D200            637                             setb    bitznak
026B 4480            638                             orl             a,#80h  ;ост содерж яч 
026D F6              639                             mov             @r0,a
                     640                                     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    11

026E 18              641     mmm:            dec             r0;,#reacp
026F 76FF            642                             mov             @r0,#0ffh
0271 802B            643                             jmp             goznak
                     644     
                     645     
0273 750A00          646     labelA:         mov             r10,#0          
0276 750B00          647                             mov             r11,#0
0279 783D            648                             mov             r0,#chkl
027B 120000   F      649                             call    chcmp
027E 7000            650                             jnz             no0key
                     651                             ;разрешить ie6,ie7       
                     652                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     653                     ;       mov             EIP2,#30h
                     654                        
0280 793D            655     no0key:         mov             r1,#chkl 
0282 120000   F      656                             call    chdec
0285 2004B1          657                             jb              bitizm,rebyte
                     658                              ;буфер 2 выдать на индикацию
                     659     ;3.11.06
                     660     ;                       mov             r0,#vichR
                     661     ;                                               mov             a,@r0
                     662     ;                                               cjne    @r0,#21h,poivich
                     663     ;                                               mov             a,bufind+7
                     664     ;                                               orl             a,#40h
                     665     ;                                               mov             bufind+7,a      
                     666     ;poivich:
0288 120000   F      667                             call    ind
028B 120000   F      668                             call    z_01s
028E 120000   F      669                             call    z_01s
0291 120000   F      670                             call    z_01s
0294 80DD            671                             jmp             labelA
                     672     
0296 C200            673     znplus:         clr     bitznak
0298 547F            674                             anl             a,#7fh;fdh                      ;+
029A F6              675                             mov             @r0,a
029B 18              676                             dec             r0;,#reacp
029C 7600            677                             mov             @r0,#00h
                     678                             
029E                 679     goznak: 
                     680     ;;;;;;;;;;;;;
029E 787A            681                             mov     r0,#reacp+3
02A0 E6              682                             mov             a,@r0
02A1 7F05            683                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02A3 C3              684     sdvig3:         clr             c
02A4 13              685                             rrc             a
02A5 DFFC            686                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02A7 FA              687                             mov             r2,a    ;сохр байт
02A8 18              688                             dec             r0              ;       reacp+2
02A9 E6              689                             mov             a,@r0
02AA C0E0            690                             push    acc
02AC C3              691                             clr             c
02AD 7F03            692                             mov             r7,#3;2
02AF C3              693     sdvig2:         clr             c
02B0 33              694                             rlc             a
02B1 DFFC            695                             djnz    r7,sdvig2 ;d12..d11      средний байт
02B3 4A              696                             orl             a,r2
02B4 F57A            697                             mov             reacp+3,a;сформ мл байт
02B6 D0E0            698                             pop             acc
                     699                             
02B8 7F05            700                             mov             r7,#5;6
02BA C3              701     sdvig1:         clr             c
02BB 13              702                             rrc             a
02BC DFFC            703                             djnz    r7,sdvig1 ;d15,d14        ср байт
02BE FA              704                             mov             r2,a   ;сохр
02BF E578            705                             mov             a,reacp+1
02C1 C0E0            706                             push    acc
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    12

                     707                     ;;      push    acc
02C3 7F03            708                             mov             r7,#3;2
02C5 C3              709     sdvig0:         clr             c
02C6 33              710                             rlc             a
02C7 DFFC            711                             djnz    r7,sdvig0 ;       d21..d16
02C9 4A              712                             orl             a,r2
02CA F579            713                             mov             reacp+2,a       ; сформ средний  байт
02CC D0E0            714                             pop             acc       ;reacp+1
                     715                             ;;;;;;;;;;;;;;
02CE 20E70B          716                             jb              acc.7,sdvm
02D1 C3              717                             clr             c
02D2 7F05            718                             mov             r7,#5;6
02D4 C3              719     sdvig4:         clr             c
02D5 13              720                             rrc             a
02D6 DFFC            721                             djnz    r7,sdvig4 ;       d23,d22
02D8 F578            722                             mov             reacp+1,a
02DA 8008            723                             jmp             readyacp;ankor;klmas
                     724     ;;;;;;;;;;;;                                    
02DC 7F05            725     sdvm:           mov             r7,#5;6
02DE D3              726     sdvig6:         setb            c
02DF 13              727                             rrc             a
02E0 DFFC            728                             djnz    r7,sdvig6 ;       d23,d22
02E2 F578            729                             mov             reacp+1,a
                     730                                                             
                     731     ; reacp..reacp+3-результат чтения асп(hex) 
                     732     ;;;;;;;;;
02E4                 733     readyacp:
02E4 7898            734                                             mov             r0,#chinkor
02E6 E6              735                             mov             a,@r0
02E7 30E702          736                             jnb             acc.7,gopart
02EA 8044            737                                     jmp             sumt2
                     738                     
02EC                 739     gopart:
02EC 789A            740                             mov             r0,#parT        ;параметр времени
02EE 793F            741                             mov             r1,#chmasN
02F0 B6013A          742                             cjne    @r0,#1,noparT1
                     743                             ;РЕЗ+РЕЗ
02F3 7877            744                             mov             r0,#reacp
02F5 120000   F      745                             call    resar2          ;reacp->r2..r5
02F8 78B6            746                             mov             r0,#summa+3;rez_A+3
02FA 120000   F      747                             call    ladd
02FD 78B3            748                             mov             r0,#summa;rez_A
02FF 120000   F      749                             call    saver2
0302 793F            750                              mov            r1,#chmasN
0304 7714            751                             mov             @r1,#20;10
0306 789B            752                             mov             r0,#chbefore
0308 B6631E          753                             cjne    @r0,#99,nobef99
                     754                             ;РЕЗ/100
030B 900000   F      755                             MOV        DPTR,#ch100 
030E 120000   F      756     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0311 120000   F      757                             call    zdiv;divide
0314 7862            758                             mov             r0,#rez_A
0316 120000   F      759                             call    saver2          ;сумма 100 отсчетов /100
0319 78C5            760                             mov             r0,#Rez_del
031B 120000   F      761                             call    saver2  
                     762                        ;;;;;
031E 78B3            763                        mov          r0,#summa
0320 120000   F      764                        call         clear4
                     765     ;                       mov             a,chmas
                     766     ;                       mov             @r1,a   ;->chmasN
0323 799B            767                             mov             r1,#chbefore
0325 7700            768                             mov             @r1,#0
0327 8048            769                             jmp             klmas           ;загр в массив скользящее ср
0329 06              770     nobef99:        inc             @r0                     ;chbefore
032A 020000   F      771                             jmp             rebyte;labelA;метка A
                     772     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    13

                     773     ;а потом уже располагаем  в скользящий массив  из n
                     774     
                     775     
                     776     
032D B6021D          777     noparT1:        cjne    @r0,#2,noparT2
                     778                             ;РЕЗ+РЕЗ
0330                 779     sumt2:
0330 7877            780                              mov            r0,#reacp
0332 120000   F      781                             call    resar2          ;reacp->r2..r5
0335 78B6            782                             mov             r0,#summa+3;rez_A+3
0337 120000   F      783                             call    ladd
033A 78B3            784                             mov             r0,#summa;rez_A
033C 120000   F      785                             call    saver2
033F 789B            786                             mov             r0,#chbefore
0341 793F            787                             mov             r1,#chmasN
0343 770A            788                             mov             @r1,#10
0345 B613E1          789                             cjne    @r0,#19,nobef99;9,nobef99
                     790                             ;РЕЗ/10
0348 900000   F      791                             MOV        DPTR,#ch20;ch10 
034B 80C1            792                             jmp             allsum
                     793                             ;;;;;;;
                     794                             
                     795     
034D B60302          796     noparT2:        cjne    @r0,#3,noparT3
0350 8003            797                             jmp             aapar
                     798     
0352 B60410          799     noparT3:        cjne    @r0,#4,noparT4
0355 7877            800     aapar:          mov             r0,#reacp
0357 120000   F      801                             call    resar2          ;reacp->r2..r5
035A 7862            802                             mov             r0,#rez_A
035C 120000   F      803                             call    saver2
035F 793F            804                              mov            r1,#chmasN
0361 770A            805                             mov             @r1,#10
                     806                     ;       mov             @r1,#10         ;n=10
0363 800C            807                             jmp             klmas
0365 7702            808     noparT4:   mov          @r1,#2          ;chmasN n=2
0367 7877            809                             mov             r0,#reacp
0369 120000   F      810                             call    resar2          ;reacp->r2..r5
036C 7862            811                             mov             r0,#rez_A
036E 120000   F      812                             call    saver2
                     813     ;загрузить А в массив из 2/10 значений
                     814     ;;;;;;;;;;;;;;;
0371                 815     klmas:           
0371 793F            816                             mov             r1,#chmasN
0373 B7021A          817                             cjne    @r1,#2,mas10
0376 900080          818                             MOV        dptr,#MASS0
0379 120000   F      819                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     820     
037C 7862            821                             mov             r0,#rez_A
037E 120000   F      822                             call    resar2          ;->r2..r5
0381 900080          823                             mov                     dptr,#MASS0
0384 120000   F      824                   call              saveIr2                 ; R2-R5 --> MAS0
                     825                     
0387 900087          826                   MOV          dptr,#MASS1+3
038A 120000   F      827                   CALL       addx
038D 020000   F      828                       jmp           endsum
0390 B70A7A          829     mas10:                  cjne    @r1,#10,mas20
0393 9000A0          830                                             mov                     dptr,#MASS8
0396 120000   F      831                     CALL            xCIKLWR         ;MASS8->MASS9
0399 90009C          832                                             mov                     dptr,#MASS7
039C 120000   F      833                     CALL            xCIKLWR         ;MASS7->MASS8
039F 900098          834                     MOV       dptr,#MASS6
03A2 120000   F      835                     CALL       xCIKLWR         ; MASS6 --> MASS7
03A5 900094          836                     MOV        dptr,#MASS5
                     837                    
03A8 120000   F      838                    CALL        xCIKLWR        ; MASS5 --> MASS6
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    14

03AB 900090          839                    MOV         dptr,#MASS4
                     840                    
03AE 120000   F      841                    CALL        xCIKLWR        ; MASS4 --> MASS5
03B1 90008C          842                             mov                     dptr,#MASS3
                     843     
03B4 120000   F      844                    CALL             xCIKLWR         ;MASS3->MASS4
03B7 900088          845                     MOV        dptr,#MASS2
                     846                    
03BA 120000   F      847                    CALL        xCIKLWR         ; MASS2 --> MASS3
03BD 900084          848                    MOV         dptr,#MASS1
                     849                     
03C0 120000   F      850                   CALL         xCIKLWR        ; MASS1 --> MASS2
03C3 900080          851                    MOV         dptr,#MASS0
                     852                   
03C6 120000   F      853                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     854     
                     855                             
03C9 7862            856                             mov             r0,#rez_A
03CB 120000   F      857                             call    resar2          ;->r2..r5
                     858                                     ;call   aform
03CE 900080          859                                     mov                     dptr,#MASS0
03D1 120000   F      860                   call              saveIr2                 ; R2-R5 --> MAS0
                     861              
03D4 900087          862                   MOV          dptr,#MASS1+3
03D7 120000   F      863                   CALL       addx
03DA 90008B          864                   MOV          dptr,#MASS2+3
03DD 120000   F      865                   CALL       addx
03E0 90008F          866                   MOV          dptr,#MASS3+3
03E3 120000   F      867                  CALL        addx
03E6 900093          868                   MOV       dptr,#MASS4+3
03E9 120000   F      869                   call       addx
03EC 900097          870                     MOV        dptr,#MASS5+3
03EF 120000   F      871                  CALL        addx
03F2 90009B          872                   MOV          dptr,#MASS6+3
03F5 120000   F      873                   CALL       addx
03F8 90009F          874                   MOV          dptr,#MASS7+3
03FB 120000   F      875                  CALL        addx
03FE 9000A3          876                  MOV        dptr,#MASS8+3
0401 120000   F      877                   call       addx
0404 9000A7          878                     MOV                     dptr,#MASS9+3
0407 120000   F      879                  call        addx
040A 020000   F      880                              jmp            endsum
                     881     
040D 9000C8          882     mas20:          mov                     dptr,#MASS18
0410 120000   F      883                     CALL            xCIKLWR         ;MASS18->MASS19
0413 9000C4          884                                             mov                     dptr,#MASS17
0416 120000   F      885                     CALL            xCIKLWR         ;MASS17->MASS18
0419 9000C0          886                     MOV       dptr,#MASS16
041C 120000   F      887                     CALL       xCIKLWR         ; MASS16 --> MASS17
041F 9000BC          888                     MOV        dptr,#MASS15
                     889                    
0422 120000   F      890                    CALL        xCIKLWR        ; MASS15 --> MASS16
0425 9000B8          891                    MOV         dptr,#MASS14
                     892                    
0428 120000   F      893                    CALL        xCIKLWR        ; MASS14 --> MASS15
042B 9000B4          894                             mov                     dptr,#MASS13
                     895     
042E 120000   F      896                    CALL             xCIKLWR         ;MASS13->MASS14
0431 9000B0          897                     MOV        dptr,#MASS12
                     898                    
0434 120000   F      899                    CALL        xCIKLWR         ; MASS12 --> MASS13
0437 9000AC          900                    MOV         dptr,#MASS11
                     901                     
043A 120000   F      902                   CALL         xCIKLWR        ; MASS11 --> MASS12
043D 9000A8          903                    MOV         dptr,#MASS10
                     904                   
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    15

0440 120000   F      905                    CALL        xCIKLWR        ; MASS10 --> MASS11
0443 9000A4          906                                      MOV       dptr,#MASS9
0446 120000   F      907                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     908     
0449 9000A0          909                                             mov                     dptr,#MASS8
044C 120000   F      910                     CALL            xCIKLWR         ;MASS8->MASS9
044F 90009C          911                                             mov                     dptr,#MASS7
0452 120000   F      912                     CALL            xCIKLWR         ;MASS7->MASS8
0455 900098          913                     MOV       dptr,#MASS6
0458 120000   F      914                     CALL       xCIKLWR         ; MASS6 --> MASS7
045B 900094          915                     MOV        dptr,#MASS5
                     916                    
045E 120000   F      917                    CALL        xCIKLWR        ; MASS5 --> MASS6
0461 900090          918                    MOV         dptr,#MASS4
                     919                    
0464 120000   F      920                    CALL        xCIKLWR        ; MASS4 --> MASS5
0467 90008C          921                             mov                     dptr,#MASS3
                     922     
046A 120000   F      923                    CALL             xCIKLWR         ;MASS3->MASS4
046D 900088          924                     MOV        dptr,#MASS2
                     925                    
0470 120000   F      926                    CALL        xCIKLWR         ; MASS2 --> MASS3
0473 900084          927                    MOV         dptr,#MASS1
                     928                     
0476 120000   F      929                   CALL         xCIKLWR        ; MASS1 --> MASS2
0479 900080          930                    MOV         dptr,#MASS0
                     931                   
047C 120000   F      932                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     933     
                     934                             
047F 7862            935                             mov             r0,#rez_A
0481 120000   F      936                             call    resar2          ;->r2..r5
                     937                                     ;call   aform
0484 900080          938                                     mov                     dptr,#MASS0
0487 120000   F      939                   call              saveIr2                 ; R2-R5 --> MAS0
                     940              
048A 900087          941                   MOV          dptr,#MASS1+3
048D 120000   F      942                   CALL       addx
0490 90008B          943                   MOV          dptr,#MASS2+3
0493 120000   F      944                   CALL       addx
0496 90008F          945                   MOV          dptr,#MASS3+3
0499 120000   F      946                  CALL        addx
049C 900093          947                   MOV       dptr,#MASS4+3
049F 120000   F      948                   call       addx
04A2 900097          949                     MOV        dptr,#MASS5+3
04A5 120000   F      950                  CALL        addx
04A8 90009B          951                   MOV          dptr,#MASS6+3
04AB 120000   F      952                   CALL       addx
04AE 90009F          953                   MOV          dptr,#MASS7+3
04B1 120000   F      954                  CALL        addx
04B4 9000A3          955                  MOV        dptr,#MASS8+3
04B7 120000   F      956                   call       addx
04BA 9000A7          957                     MOV                     dptr,#MASS9+3
04BD 120000   F      958                  call        addx
                     959     ;27
04C0 9000AB          960                                     MOV        dptr,#MASS10+3
04C3 120000   F      961                   CALL       addx
04C6 9000AF          962                                     MOV        dptr,#MASS11+3
04C9 120000   F      963                   CALL       addx
04CC 9000B3          964                   MOV          dptr,#MASS12+3
04CF 120000   F      965                   CALL       addx
04D2 9000B7          966                   MOV          dptr,#MASS13+3
04D5 120000   F      967                  CALL        addx
04D8 9000BB          968                   MOV       dptr,#MASS14+3
04DB 120000   F      969                   call       addx
04DE 9000BF          970                                     MOV        dptr,#MASS15+3
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    16

04E1 120000   F      971                     CALL     addx
04E4 9000C3          972                   MOV          dptr,#MASS16+3
04E7 120000   F      973                   CALL       addx
04EA 9000C7          974                   MOV          dptr,#MASS17+3
04ED 120000   F      975                  CALL        addx
04F0 9000CB          976                  MOV        dptr,#MASS18+3
04F3 120000   F      977                   call       addx
04F6 9000CF          978                                     MOV                     dptr,#MASS19+3
04F9 120000   F      979                  call        addx
                     980     
                     981     
                     982     
                     983             ;23.03          
04FC                 984     endsum:
04FC 786E            985                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
04FE 06              986                                     inc             @r0
04FF E6              987                                     mov             a,@r0   
0500 200105          988                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                     989                                     
0503 B53F26          990                                     cjne    a,chmasN,masx5
0506 D201            991                                     setb    bitmas                  ;массив заполнен
0508 853F6E          992     masfull:                mov             chmas,chmasN
050B 783F            993                                     mov             r0,#chmasN
050D E6              994                                     mov             a,@r0
                     995     ;masfull:
050E B40208          996                                     cjne    a,#2,nochn2
0511 900000   F      997                                     MOV        DPTR,#ch2;10 
0514 120000   F      998                                     CALL   ldc_ltemp                 ; ltemp <-- 2
0517 801D            999                                     jmp             mas5div
                    1000     
0519 B40A08         1001     nochn2:         cjne    a,#10,nochn10
051C 900000   F     1002                                                     MOV        DPTR,#ch10 
051F 120000   F     1003                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0522 8012           1004                                     jmp             mas5div
                    1005     
0524                1006     nochn10:
0524 900000   F     1007                                                     MOV        DPTR,#ch20 
0527 120000   F     1008                                     CALL   ldc_ltemp                 ; ltemp <-- 20
052A 800A           1009                                     jmp             mas5div
052C 856E0B         1010     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
052F E4             1011                                     clr     a
0530 F50A           1012                                     mov     ltemp+2,a
0532 F509           1013                                     mov     ltemp+1,a
0534 F508           1014                                     mov     ltemp,a
                    1015     
0536                1016     mas5div:
0536 120000   F     1017                                     CALL       zdiv;divide                           ; R2-R5 =
                    1018                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1019     
                    1020                             
                    1021      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1022     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1023     ;получен результат 3 байта и знак
0539 7866           1024                             mov             r0,#rez_A1
053B 120000   F     1025                             call    saver2           ;сохр среднее по массиву
                    1026     ;;8.11.06                       mov             chmasN,#0
                    1027      ;;;;;;;;;;;;
                    1028      ;;;;;;;;;;;;
053E C3             1029                             clr             c
053F 799A           1030                             mov             r1,#parT
0541 7402           1031                             mov             a,#2
0543 97             1032                             subb    a,@r1
0544 501D           1033                             jnc             ankor           ;T<3
                    1034                             ;A-=РЕЗ1                                ;T>3
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    17

0546 120402         1035                             call    altof                   ;r2..r5->float
0549 785E           1036                             mov             r0,#rez_Ame
054B 120000   F     1037                             call    saver2
                    1038                             ;;;;
054E 7890           1039                             mov             r0,#koefKp;->r8..r11
0550 EA             1040                             mov             a,r2
0551 30E702         1041                             jnb             acc.7,nminus3
0554 7894           1042                             mov             r0,#koefKm;->r8..r11
0556 120000   F     1043     nminus3:                call    resar8
0559 120203         1044                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
055C 785E           1045                             mov             r0,#rez_Ame
055E 120000   F     1046                             call    saver2
0561 8022           1047                             jmp             gotoKD
                    1048     
0563                1049     ankor:  
0563 7898           1050                             mov             r0,#chinkor
0565 E6             1051                             mov             a,@r0
0566 30E703         1052                             jnb             acc.7,nokorr
                    1053                             ;коррекция 0
0569 020000   F     1054                             jmp             kornul
056C                1055     nokorr: 
                    1056                             ;mov            r10,#00         ;       chavt
                    1057                             ;mov            r11,#00h
056C 7881           1058                             mov              r0,#chavt      
056E E6             1059                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
056F 30E750         1060                             jnb             acc.7,nonulavt;jnz              nonulavt        
0572 750A00         1061                             mov             r10,#0;1;00;02          
0575 750BC8         1062                             mov             r11,#0c8h;90h;0c8h;58h
0578 7898           1063                             mov             r0,#chinkor
057A 120000   F     1064                             call    chcmp
057D 705B           1065                             jnz             noavk
                    1066                             ;автокалибровка
057F 020000   F     1067                             jmp             autoka;noavk;
                    1068     
0582 020000   F     1069     rafterK:                jmp             afterK
                    1070     ;;;;;;;;;;
0585 C3             1071      gotoKD:                clr             c
0586 799A           1072                             mov             r1,#parT
0588 7404           1073                             mov             a,#4
058A 97             1074                             subb    a,@r1
058B 50F5           1075                             jnc             rafterK         ;T<5
                    1076                             ;A1-=A- *KD                     ;T>5
058D 120000   F     1077                             call            findkoef                                ;r2,r3-hex
0590 12046C         1078                                     call            rebyte2                         ;r2..r5- he
                             x
                    1079                                     
0593 120402         1080                                     call    altof                   ;r2..r5->float
0596 900000   F     1081                                     mov     dptr,#CHtho;100000
0599 120000   F     1082                                     call    ldc_ltemp                       ;r8..r11
059C 1202B7         1083                                     call    fldiv
059F 120000   F     1084                                     call    move28
                    1085                             
05A2 785E           1086                             mov             r0,#rez_Ame;->r2..r5   ???????????/
05A4 120000   F     1087                             call    resar2
05A7 120203         1088                                     call    flmul
05AA 120343         1089                             call    ftol                    ;float->int
05AD 7866           1090                             mov             r0,#rez_A1
05AF 120000   F     1091                             call    saver2
05B2 786A           1092                             mov             r0,#rez_A0;->r8..r11 hex
05B4 120000   F     1093                             call    resar8
05B7 120000   F     1094                             call    lsub            ;A3=A-1-A0
05BA 789C           1095                             mov             r0,#rez_A3
05BC 120000   F     1096                             call    saver2
05BF 020000   F     1097                             jmp             labelB  
                    1098      ;;;;;;;;;;; 9.11.06
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    18

05C2 789A           1099     nonulavt:        mov            r0,#parT
05C4 E6             1100                             mov             a,@r0
05C5 6401           1101                             xrl             a,#01
05C7 700C           1102                             jnz             avtdec1
05C9 7982           1103                             mov             r1,#chavt+1     ;T=1 chavt-10
05CB 120000   F     1104                             call    tenmin
05CE 7999           1105     kordec10:       mov             r1,#chinkor+1
05D0 120000   F     1106                             call    tenmin
05D3 8018           1107                             jmp             rezmul
                    1108     
05D5 7981           1109     avtdec1:        mov             r1,#chavt       
05D7 120000   F     1110                             call    chdec           ;chavt-1
                    1111     ;                       jmp             kordec1;rezmul
05DA 789A           1112     noavk:          mov             r0,#parT
05DC E6             1113                             mov             a,@r0
05DD 6401           1114                             xrl             a,#01
05DF 7007           1115                             jnz             kordec1
                    1116                             ;T=1 chinkor-10
05E1 7999           1117                     mov             r1,#chinkor+1
05E3 120000   F     1118                             call    tenmin
05E6 8005           1119                             jmp             rezmul
05E8 7998           1120     kordec1:        mov             r1,#chinkor
05EA 120000   F     1121                             call    chdec           ; chinkor-1
                    1122                        ;9.11.06
                    1123                             ;;;;;;;;;;;;;;
                    1124                             ;;;;;;;;;;;;;
                    1125     ;(РЕЗ1-АN)*K
05ED                1126     rezmul:
05ED 7866           1127                             mov             r0,#rez_A1;->r2..r5
05EF 120000   F     1128                             call    resar2
05F2 120402         1129                             call    altof   ;r2..r5->float  6.06    
05F5 7884           1130                             mov             r0,#kor0_AN;->r8..r11
05F7 120000   F     1131                             call    resar8
05FA 1201D1         1132                             call    flsub
05FD 7890           1133                             mov             r0,#koefKp;->r8..r11
05FF EA             1134                             mov             a,r2
0600 30E702         1135                             jnb             acc.7,nminus
                    1136                             ;jnb            bitznak,nminus
                    1137                     
0603 7894           1138                             mov             r0,#koefKm;->r8..r11
0605 120000   F     1139     nminus:         call    resar8
0608 120203         1140                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
060B 785E           1141                             mov             r0,#rez_Ame
060D 120000   F     1142                             call    saver2
                    1143      
0610                1144     afterK:                 
                    1145     ;;;;;;;;;;;;;;
0610 EA             1146                                     mov             a,r2
0611 547F           1147                                     anl             a,#7fh
0613 FA             1148                                     mov             r2,a
0614 900000   F     1149                                     mov     dptr,#ch_250;220;220000
0617 120000   F     1150                                     call    ldc_ltemp                       ;r8..r11=8
061A 1201D6         1151                                     call    flcmp
061D 5066           1152                                     jnc             rmo220          ;A>220000
061F 301208         1153                                     jnb             bitklb,komulpz
0622 900000   F     1154                                     mov     dptr,#chk;100000
0625 120000   F     1155                                     call    ldc_long                        ;r2..r5
0628 8006           1156                                     jmp             komul
062A 120000   F     1157     komulpz:call            findkoef                                ;r2,r3-hex
062D 12046C         1158                                     call            rebyte2                         ;r2..r5- he
                             x
                    1159                                     
0630 120402         1160     komul:  call    altof                   ;r2..r5->float
0633 900000   F     1161                                     mov     dptr,#CHtho;100000
0636 120000   F     1162                                     call    ldc_ltemp                       ;r8..r11=8
0639 1202B7         1163                                     call    fldiv
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    19

063C 120000   F     1164                                     call    move28
063F 785E           1165                                     mov             r0,#rez_Ame
0641 120000   F     1166                                     call    resar2
                    1167                     
0644 120203         1168                                     call    flmul     ;A1-=A-*KD  fl
                    1169                                     
0647 120343         1170                                     call    ftol                    ;float->int
064A 7866           1171                                     mov             r0,#rez_A1
064C 120000   F     1172                                     call    saver2
064F 120402         1173                                     call    altof                   ;r2..r5->float
0652 900000   F     1174                                     mov     dptr,#ch_220;200;200000
0655 120000   F     1175                                     call    ldc_ltemp                       ;r8..r11=8
0658 1201D6         1176                                     call    flcmp
065B 5028           1177                                     jnc             rmo220          ;A>200000
065D 301806         1178                                     jnb             knizm,goA2;             bitizm,goA2     
0660 20052F         1179                                     jb              bitavp,yesavp   
0663 20065B         1180     noavp:                  jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0666                1181     goA2:                    ;A2=A1-
0666 7866           1182                                      mov            r0,#rez_A1
0668 120000   F     1183                                     call    resar2
066B 787B           1184                                     mov             r0,#rez_A2
066D 120000   F     1185                                     call    saver2
0670                1186     goA3A2:                  ;A3=A2-A0
0670 786A           1187                                       mov           r0,#rez_A0
0672 120000   F     1188                                     call    resar8
0675 120000   F     1189                                     call    lsub
0678 789C           1190                                     mov             r0,#rez_A3
067A 120000   F     1191                                     call    saver2
                    1192                                     ;;;;;;
067D                1193     goonin:            ;jmp         goonind;indA3;8.11.06
067D 78AC           1194                                     mov             r0,#chind
067F B60006         1195                                     cjne    @r0,#0,rnochi0
0682 020000   F     1196                                     jmp             goonind;indA3
                    1197     ;                               clr             P3.4
                    1198     ;                               nop
                    1199     ;                               nop
                    1200     ;                               setb    P3.4      ;??????????????????????/
                    1201     ;                               jmp             nop3_0
                    1202     
                    1203     ;                               jb              P3.0,nop3_0     ;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1204     ;                               mov             r0,#rez_A0              ;r2..r5->rez_A0
                    1205     ;                               call    saver2                  ;ЗАПОМНИТЬ СМЕЩЕНИЕ НУЛЯ
                    1206     ;                               jmp             rebyte          ;age2
0685 020000   F     1207      rmo220:                jmp             mo220
0688 020000   F     1208      rnochi0:               jmp             nochi0
068B 7866           1209     gokaA2:                 mov             r0,#rez_A1                      ;(float)
068D 120000   F     1210                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
0690 80D4           1211                                             jmp             goA2
                    1212     ;;;;;;;;;;;;;;;;
0692 EA             1213     yesavp:                 mov             a,r2
0693 547F           1214                                     anl             a,#7fh
0695 FA             1215                                     mov             r2,a
0696 900000   F     1216                                     mov     dptr,#ch_10th;10000
0699 120000   F     1217                                     call    ldc_ltemp                       ;r8..r11=8
069C 1201D6         1218                                     call    flcmp
069F 50C2           1219                                     jnc             noavp           ;A>10000        
06A1 78AE           1220                                     mov             r0,#diap                ;10-11
06A3 B60902         1221                                     cjne    @r0,#9,avpgo
06A6 80BB           1222                                     jmp             noavp
06A8                1223     avpgo:                  
06A8 06             1224                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
06A9 B60A01         1225                                     cjne    @r0,#0ah,clmasv
06AC 16             1226                                     dec             @r0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    20

06AD                1227     clmasv:         ;сбросить массив
06AD 120000   F     1228                             call    loadUS
                    1229                             ;call   louizm
06B0 120000   F     1230                             call     clmassix
06B3 78B3           1231                                     mov             r0,#summa
06B5 120000   F     1232                                     call    clear4
06B8 786A           1233                                     mov             r0,#rez_A0
06BA 120000   F     1234                                     call    clear4
06BD D207           1235                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
06BF 80BC           1236                                jmp     goonin
                    1237     
06C1                1238     yesvich:        ;A2=E/A1-+F
06C1 78C0           1239                                             mov             r0,#konstB
06C3 120000   F     1240                                     call    resar2
06C6 120000   F     1241                                     call    move28
06C9 7866           1242                                     mov             r0,#rez_A1
06CB 120000   F     1243                                     call    resar2                          ;HEX
                    1244                                     
06CE 120402         1245                                     call            altof                   ;r2..r5->float
06D1 EA             1246                                     mov             a,r2                    ;модуль
06D2 547F           1247                                     anl             a,#7fh
06D4 FA             1248                                     mov             r2,a
06D5 120166         1249                                     call            fladd                           ;A1+B
                    1250                                     
06D8 900000   F     1251                                     mov     dptr,#CH_500;
06DB 120000   F     1252                                     call    ldc_ltemp                       ;r8..r11
06DE 1201D6         1253                                     call    flcmp
06E1 4073           1254                                     jc                      mo500R;error <500 >22000
06E3 900000   F     1255                                     mov     dptr,#CH_22T;
06E6 120000   F     1256                                     call    ldc_ltemp                       ;r8..r11
06E9 1201D6         1257                                     call    flcmp
06EC 5074           1258                                     jnc             mo500I          ;error
                    1259                                     ;;;;;;;;;;;;
06EE 120000   F     1260                                     call            move28
06F1 C008           1261                                     push            r8
06F3 C009           1262                                     push            r9
06F5 C00A           1263                                     push            r10
06F7 C00B           1264                                     push            r11
06F9 78BC           1265                                     mov             r0,#konstA
06FB 120000   F     1266                                     call    resar2
06FE 900000   F     1267                                     mov             dptr,#CH_B
0701 120000   F     1268                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0704 120203         1269                                     call            flmul                           ;A*10-7
0707 D00B           1270                                     pop                     r11
0709 D00A           1271                                     pop                     r10
070B D009           1272                                     pop                     r9
070D D008           1273                                     pop                     r8
070F 1202B7         1274                                     call            fldiv                   ;результат R
0712 78C9           1275                                     mov                     r0,#rez_R
0714 120000   F     1276                                     call            saver2
0717 120343         1277                                     call            ftol                    ;float->hex
                    1278                                     ;;;;;;;;;;
071A 784F           1279                                             mov             r0,#abin
071C 120000   F     1280                                             call    saver2
                    1281     ;;;;;;;;
071F 7840           1282                                                     mov             r0,#bufind
0721                1283     age9:
0721 7620           1284                             mov             @r0,#" "          ;погасить индикатор
0723 08             1285                             inc             r0
0724 B84BFA         1286                             cjne    r0,#bufind+11,age9
                    1287                                             
0727 78C9           1288                                             mov             r0,#rez_R
0729 120000   F     1289                                             call            resar2
                    1290     ;;;;;;;;;;
072C 900000   F     1291                                     mov             dptr,#CH_fl
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    21

072F 120000   F     1292                                     CALL   ldc_ltemp
0732 1202B7         1293                                     call            fldiv
                    1294     
0735 78B8           1295                                     mov             r0,#work                ;степень +
0737 7600           1296                                     mov             @r0,#0
0739 78B9           1297                                     mov             r0,#work+1;степень -
073B 7600           1298                                     mov             @r0,#0
073D 900000   F     1299     compa1: mov     dptr,#ch_1;
0740 120000   F     1300                                     call    ldc_ltemp                       ;r8..r11
0743 1201D6         1301                                     call    flcmp
0746 4026           1302                                     jc              equ0            ;<1
0748 78B8           1303                                     mov             r0,#work                        ;степень +
074A 06             1304                                     inc             @r0
074B 900000   F     1305                                     mov             dptr,#ch_10;
074E 120000   F     1306                                     call    ldc_ltemp                       ;r8..r11
0751 1202B7         1307                                     call            fldiv
0754 80E7           1308                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1309                                     ;;;;;;;;;;;;;;;;;;;
0756 900000   F     1310     mo500R: mov             dptr,#teOLR
0759 120000   F     1311                               call          lotext           ;ПРОСМОТР
075C 120000   F     1312                                     call            ind
075F 020000   F     1313                                     jmp                     nobitizm
0762 900000   F     1314     mo500I: mov             dptr,#teOLI
0765 120000   F     1315                               call          lotext           ;ПРОСМОТР
0768 120000   F     1316                                     call            ind
076B 020000   F     1317                                     jmp                     nobitizm
076E                1318     equ0:           ;;;;;   call            ftol                    ;float->int
076E 78B8           1319                                     mov             r0,#work                ;степень +
0770 B60019         1320                                     cjne    @r0,#0,equ00
                    1321                                     
0773 900000   F     1322     compa2: mov     dptr,#ch_1;
0776 120000   F     1323                                     call    ldc_ltemp                       ;r8..r11
0779 1201D6         1324                                     call    flcmp
077C 500E           1325                                     jnc             equ00           ;>1
077E 78B9           1326                                     mov             r0,#work+1                      ;степень -
0780 16             1327                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0781 900000   F     1328                                     mov             dptr,#ch_10;
0784 120000   F     1329                                     call    ldc_ltemp                       ;r8..r11
0787 120203         1330                                     call            flmul
078A 80E7           1331                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1332     
                    1333     
078C                1334     equ00:          
078C 7853           1335                                                     mov             r0,#adec
078E 7952           1336                                             mov             r1,#abin+3      ;hex->10
0790 120000   F     1337                                             call    bindec
                    1338     
                    1339                                                     ;если степень полож убирать младший байт
                    1340                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1341                                                     ;число в bufind..bufind+5
0793 78B8           1342                                             mov             r0,#work
0795 B60021         1343                                             cjne    @r0,#0,outr
0798 08             1344                                             inc             r0                      ;work+1
0799 B6FF05         1345                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
079C 06             1346                                             inc                     @r0;!!!!!!!!!?
079D 785B           1347                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
079F 8003           1348                                             jmp                     bufr30
                    1349                                             ;;;;;;;;;;;;;;
07A1 06             1350     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
07A2 785C           1351                                                     mov             r0,#adec+9
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    22

07A4 7945           1352     bufr30:         mov             r1,#bufind+5;6
07A6 7F05           1353                                             mov             r7,#5;7
07A8 E6             1354     bufr2:                          mov             a,@r0
07A9 2430           1355                                             add             a,#30h
07AB F7             1356                                             mov             @r1,a
07AC 19             1357                                             dec             r1
07AD 18             1358                                             dec             r0
07AE DFF8           1359                                             djnz    r7,bufr2
                    1360     
07B0 784F           1361                                             mov             r0,#abin
07B2 120000   F     1362                                             call            clear4
07B5 78B9           1363                                             mov             r0,#work+1
07B7 801C           1364                                     jmp             outr5
                    1365     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
07B9 785C           1366     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
07BB C3             1367                                             clr             c
07BC 79B8           1368                                             mov             r1,#work
07BE E8             1369                                             mov             a,r0
07BF 14             1370                                             dec             a                                  
                                  ;n-1
07C0 97             1371                                             subb    a,@r1
07C1 F8             1372                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
07C2 7945           1373                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
07C4 7F05           1374                                             mov             r7,#5;7
07C6 E6             1375     bufr:                           mov             a,@r0
07C7 2430           1376                                             add             a,#30h
07C9 F7             1377                                             mov             @r1,a
07CA 19             1378                                             dec             r1
07CB 18             1379                                             dec             r0
07CC DFF8           1380                                             djnz    r7,bufr
                    1381     
07CE 784F           1382                                             mov             r0,#abin
07D0 120000   F     1383                                             call            clear4
07D3 78B8           1384                                     mov             r0,#work
07D5 E6             1385     outr5:                  mov             a,@r0
07D6 F552           1386                                             mov             abin+3,a
                    1387                                                                     ;n(hex)->abin
07D8 120000   F     1388                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
07DB 2552           1389                                             add             a,abin+3
07DD F552           1390                                             mov             abin+3,a
07DF 7853           1391                                             mov             r0,#adec
07E1 7952           1392                                             mov             r1,#abin+3      ;hex->10
07E3 120000   F     1393                                             call    bindec
07E6 855C48         1394                                             mov             bufind+8,adec+9
07E9 855B47         1395                                             mov             bufind+7,adec+8
07EC 754966         1396                                             mov             bufind+9,#66h
07EF 020000   F     1397                                             jmp             nobitizm;       goonin;call     ind
                    1398                                             
                    1399                                     ;;;;;;;;;;;;;;;;;;;;;
                    1400     ;;;;;;;;;;;;;
                    1401     
07F2 300508         1402     mo220:             jnb          bitavp,indoll
07F5 301805         1403                                jnb          knizm,indoll;bitizm,indoll
07F8 78AE           1404                                     mov             r0,#diap
07FA B6000B         1405                                     cjne    @r0,#0,nodi2
                    1406                                ;10-2
07FD 900000   F     1407     indoll:                 mov             dptr,#teOLL;OLL
0800 120000   F     1408                                     call    lotext
0803 D217           1409                                     setb    bitoll
0805 020000   F     1410                                     jmp             goonin  
                    1411     
0808 16             1412     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    23

                    1413     
0809 B6FF01         1414                                     cjne    @r0,#0ffh,nodi9
080C 06             1415                                     inc             @r0
                    1416     
080D 120000   F     1417     nodi9:          call    loadUS
                    1418                                     ;call   louizm
                    1419                                     ;сбросить массив
0810 120000   F     1420                                     call     clmassix
0813 78B3           1421                                     mov             r0,#summa
0815 120000   F     1422                                     call    clear4
0818 786A           1423                                     mov             r0,#rez_A0
081A 120000   F     1424                                     call    clear4  
081D D207           1425                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
081F 020000   F     1426                                jmp     goonin
                    1427     
0822 16             1428     nochi0:                 dec             @r0                     ;СТИ-1
0823 020000   F     1429                                     jmp             labelB  
                    1430     
                    1431             
                    1432     ;;;;;;;;;;;;;;;
                    1433     
0826                1434     nop3_0: ;;      ;rez_A-rez_A0
                    1435                     ;;                      mov             r0,#rez_A0
                    1436                     ;;                      call    resar8
                    1437                     ;;                      call    lsub
                    1438                     ;;                      mov             r0,#rez_A
                    1439                     ;;;                     call    saver2
                    1440      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0826 789C           1441      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
0828 120000   F     1442                                             call    resar2
082B 900000   F     1443                                             mov             dptr,#ch100              
082E 120000   F     1444                                             call    ldc_ltemp        
0831 120000   F     1445                                             call    zdiv            ;rez_A3/100=r2..r5
                    1446                                     
0834 EC             1447                                             mov             a,r4
0835 20E71E         1448                                             jb              acc.7,aless0
0838 4408           1449                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
083A F5D3           1450                                             mov             DAC0H,a
                    1451                                                                             ;мл байт
083C ED             1452                                             mov             a,r5
083D F5D2           1453                                             mov             DAC0L,a
083F 801E           1454                                             jmp             moveA3;
                    1455     
0841 B70207         1456     no3parN:                        cjne    @r1,#2,no2parN
                    1457                                             ;в байт 0  записать пробел
0844 7946           1458                                             mov             r1,#bufind+6
0846 7720           1459                                             mov             @r1,#" ";0fdh;
0848 020000   F     1460                                             jmp             seeind;moveA3
                    1461     
084B                1462     no2parN:                        ;в байты 0 и 1 записать пробел
084B 7945           1463                                             mov             r1,#bufind+5
084D 7720           1464                                             mov             @r1,#" ";0fdh;" "
084F 09             1465                                             inc             r1
0850 7720           1466                                             mov             @r1,#" ";0fdh;" "
0852 8076           1467                                             jmp             seeind;moveA3
0854 8074           1468      rseeind:               jmp             seeind
0856 F4             1469     aless0:                         cpl             a
0857 54F7           1470                                             anl             a,#0f7h         ;d11=0
0859 F5D3           1471                                             mov             DAC0H,a
                    1472                                                                             ;мл байт
085B ED             1473                                             mov             a,r5
085C F4             1474                                             cpl             a
085D F5D2           1475                                             mov             DAC0L,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    24

085F                1476     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1477                                     
                    1478                                             
085F                1479     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1480                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1481                     ;до конца цикла измерения результат не размещать в буфере
                    1482                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1483                     ;и возврату в режим измерения
085F 201453         1484                                             jb              bitvich,rnorvich
0862 201050         1485                                             jb              bitt2,rnorvich
0865 2017EC         1486                                             jb              bitoll,rseeind
                    1487                                             
0868 2011E9         1488                                             jb              bitmenu,rseeind
                    1489             
                    1490     ;;;;;;;;;;;;;;
                    1491                                             ; mov           r0,#rez_A3
                    1492                                             ;call   resar2
                    1493                                             ;call   ftol                    ;float->int r2..r5
                    1494     ;;;;;;;;
086B 789C           1495                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
086D 120000   F     1496                                             call    resar2;????????????????17.01.07
                    1497                                     
0870 120000   F     1498                                             call    maform
0873 784F           1499                                             mov             r0,#abin
0875 120000   F     1500                                             call    saver2
                    1501     ;;;;;;;;
                    1502                                             
0878 7853           1503                                             mov             r0,#adec
087A 7952           1504                                             mov             r1,#abin+3      ;hex->10
087C 120000   F     1505                                             call    bindec
                    1506                                     
087F 785C           1507                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0881 7946           1508                                             mov             r1,#bufind+6
0883 7F07           1509                                             mov             r7,#7
0885 E6             1510     bufdec:                         mov             a,@r0
0886 2430           1511                                             add             a,#30h
0888 F7             1512                                             mov             @r1,a
0889 19             1513                                             dec             r1
088A 18             1514                                             dec             r0
088B DFF8           1515                                             djnz    r7,bufdec
088D 7847           1516                                             mov             r0,#bufind+7
088F 762D           1517                                             mov             @r0,#2dh          ;-2..-9
0891 7840           1518                                             mov             r0,#bufind
0893 762B           1519                                             mov             @r0,#2bh
0895 300202         1520                                             jnb             znmat,nozzmi;bitznak,nozzmi
0898 762D           1521                                             mov             @r0,#2dh
089A 79AE           1522     nozzmi:                         mov             r1,#diap
089C 7848           1523                                             mov             r0,#bufind+8
089E E7             1524                                             mov             a,@r1
089F B40808         1525                                             cjne    a,#8,nodi8
08A2 7630           1526                                             mov             @r0,#30h                 ;10-10
08A4 18             1527                                             dec             r0
08A5 7663           1528                                             mov             @r0,#63h;31h
08A7 08             1529                                             inc             r0
08A8 8012           1530                                             jmp             seegoon
08AA B4090C         1531     nodi8:                          cjne    a,#9,nodis9
                    1532                                     
08AD 7631           1533                                             mov             @r0,#31h           ;10-11
08AF 18             1534                                             dec             r0
08B0 7663           1535                                             mov             @r0,#63h;31h
                    1536                                     
08B2 08             1537                                             inc             r0
08B3 8007           1538                                             jmp             seegoon
                    1539     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    25

08B5 8071           1540     rnorvich:               jmp             norvich
08B7 8088           1541     rno3parN:               jmp             no3parN
                    1542     
08B9 2432           1543     nodis9:                         add             a,#32h
08BB F6             1544                                             mov             @r0,a;#37h;"T";
08BC 08             1545     seegoon:                        inc             r0
08BD 7641           1546                                             mov             @r0,#"A";"E";
08BF 08             1547                                             inc             r0
08C0 7600           1548                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
08C2 08             1549                                             inc             r0;             mov             buf
                             ind+11
08C3 76D0           1550                                             mov             @r0,#0d0h               ;bufind+11.
                             4 точка после первой цифры
                    1551                                             
                    1552     ;;;;;;;;;;;;;;;
                    1553     ;;;;;;goonind:
08C5 79AF           1554                                             mov             r1,#parN        ; ??????
08C7 B703ED         1555                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1556                                     
                    1557             
08CA                1558     seeind:                         ;;;;;;;;;;;;;
08CA 784A           1559                                             mov             r0,#bufind+10
08CC E6             1560                                             mov             a,@r0
08CD 300F03         1561                                             jnb             bitnul,nnnul
08D0 4408           1562                                             orl             a,#08h
08D2 F6             1563                                             mov             @r0,a
08D3 799A           1564      nnnul:                         mov             r1,#parT
08D5 B70304         1565                                             cjne    @r1,#3,nsec01
08D8 4410           1566                                             orl             a,#10h
08DA 800C           1567                                             jmp             nsec10   ;0,1s
08DC B70204         1568      nsec01:                        cjne    @r1,#2,nsec1
08DF 4420           1569                                             orl             a,#20h    ;1s
08E1 8005           1570                                             jmp             nsec10
08E3 B70102         1571     nsec1:                          cjne    @r1,#1,nsec10
08E6 4440           1572                                             orl             a,#40h
                    1573     
                    1574     ;;;;;;;;;;;;;;;;
08E8 F6             1575     nsec10:                         mov             @r0,a
08E9 300504         1576                                             jnb             bitavp,nobavp
08EC 4404           1577                                             orl             a,#04           ;bufind+10.2
08EE F6             1578                                             mov             @r0,a
08EF F6             1579                                             mov             @r0,a   
08F0 301803         1580     nobavp:                    jnb          knizm,nobitizm
08F3 4402           1581                                             orl             a,#02
08F5 F6             1582                                              mov            @r0,a
08F6                1583     nobitizm:                       
08F6 301A07         1584                                             jnb             bitakt,notakt
08F9 C21A           1585                                             clr             bitakt
08FB 534AFE         1586                                             anl             bufind+10,#0feh
08FE 8005           1587                                             jmp             taktind
0900 D21A           1588     notakt:                         setb    bitakt
0902 434A01         1589                                             orl             bufind+10,#01                      
                                          
0905                1590     taktind:                
                    1591     ;;;;;;;;;
0905 301517         1592                                             jnb             biteizm,yesind
0908 79B1           1593                                             mov             r1,#vichR
090A 7848           1594                                             mov             r0,#bufind+8
090C B72107         1595                                             cjne    @r1,#21h,test9i
090F 7631           1596                                             mov             @r0,#31h;11A
0911 18             1597                                             dec             r0
0912 7663           1598                                             mov             @r0,#63h
0914 8009           1599                                             jmp             yesind
0916 B72204         1600     test9i:         cjne    @r1,#22h,test7i
0919 7639           1601                                             mov             @r0,#39h;09A
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    26

091B 8002           1602                                             jmp             yesind
091D 7637           1603     test7i:         mov             @r0,#37h;07A
                    1604                                     
                    1605     ;;;;;;;;;
091F                1606     yesind:         
091F 301203         1607                                             jnb             bitklb,noklb
0922 434A80         1608                                             orl             bufind+10,#80h; on kmp
0925 120000   F     1609     noklb:          call    ind        ;пп выдачи на индикатор
0928                1610     norvich: 
0928 789A           1611                                     mov             r0,# parT
092A 79AC           1612                                             mov             r1,#chind
092C B60177         1613                                             cjne    @r0,#1,rnot1in
092F                1614     labelB:                    ;;;;;;;;;;;
                    1615                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
092F 789F           1616                                                     mov     r0,#rez_A3+3
                    1617                             ;;;;;;;;
0931 79BB           1618                             mov             r1,#work+3
0933 E6             1619                             mov             a,@r0
0934 7F07           1620                             mov             r7,#7;кол сдв вправо
0936 C3             1621     dvig3:          clr             c
0937 13             1622                             rrc             a
0938 DFFC           1623                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
093A FA             1624                             mov             r2,a    ;сохр байт
093B 18             1625                             dec             r0              ;rez_A3+2
093C E6             1626                             mov             a,@r0
093D C0E0           1627                             push    acc
093F C3             1628                             clr             c
0940 7F01           1629                             mov             r7,#1
0942 C3             1630     dvig2:          clr             c
0943 33             1631                             rlc             a
0944 DFFC           1632                             djnz    r7,dvig2 ;d12..d11       средний байт
0946 4A             1633                             orl             a,r2
0947 F7             1634                             mov             @r1,a;сформ мл байт
0948 19             1635                             dec             r1
0949 D0E0           1636                             pop             acc
                    1637                             
094B 7F07           1638                             mov             r7,#7
094D C3             1639     dvig1:          clr             c
094E 13             1640                             rrc             a
094F DFFC           1641                             djnz    r7,dvig1 ;d18     ср байт
0951 FA             1642                             mov             r2,a   ;сохр
0952 18             1643                             dec             r0
0953 E6             1644                             mov             a,@r0 ;rez_A3+1
0954 C0E0           1645                             push    acc
                    1646                     
0956 7F01           1647                             mov             r7,#1
0958 C3             1648     dvig0:          clr             c
0959 33             1649                             rlc             a
095A DFFC           1650                             djnz    r7,dvig0 ;        d21..d16
095C 4A             1651                             orl             a,r2
095D F7             1652                             mov             @r1,a   ; сформ средний  байт
095E 19             1653                             dec             r1
095F D0E0           1654                             pop             acc       ;rez_A3+1
                    1655                             ;;;;;;;;;;;;;;
                    1656     ;                       jb              acc.7,dvm
0961 C3             1657                             clr             c
0962 7F07           1658                             mov             r7,#7
0964 C3             1659     dvig4:          clr             c
0965 13             1660                             rrc             a
0966 DFFC           1661                             djnz    r7,dvig4 ;        d22
0968 FA             1662                             mov             r2,a   ;сохр
0969 18             1663                             dec             r0;     rez_A3
096A E6             1664                             mov             a,@r0
                    1665                             ;;;;;
096B 7F01           1666                             mov             r7,#1
096D C3             1667     vig0:           clr             c
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    27

096E 33             1668                             rlc             a
096F DFFC           1669                             djnz    r7,vig0 ;         d24..d30
0971 4A             1670                             orl             a,r2
0972 F7             1671                             mov             @r1,a   ; сформ   байт
0973 19             1672                             dec             r1
0974 E6             1673                             mov             a,@r0
                    1674                             ;;;;;
0975 20E709         1675                             jb              acc.7,dvm
0978 C3             1676                             clr             c
0979 7F07           1677                             mov             r7,#7
097B C3             1678     vig4:           clr             c
097C 13             1679                             rrc             a
097D DFFC           1680                             djnz    r7,vig4 ;         d
097F 8006           1681                             jmp             endsdv
                    1682     ;;;;;;;;;;;;                                    
0981 7F07           1683     dvm:            mov             r7,#7
0983 D3             1684     dvig6:          setb            c
0984 13             1685                             rrc             a
0985 DFFC           1686                             djnz    r7,dvig6 ;        d31
0987 F7             1687     endsdv:         mov             @r1,a
                    1688                                                             
                    1689      ;->work   
                    1690                             
0988 900000   F     1691                             mov             dptr,#chzap
098B 120000   F     1692                             call     ldc_long
098E 78BB           1693                              mov            r0,#work+3
0990 120000   F     1694                             call    ladd
0993 ED             1695                             mov             a,r5
0994 F5D5           1696                             mov             DAC1L,a
                    1697                             
0996 EC             1698                             mov             a,r4
0997 F5D6           1699                             mov             DAC1H,a
                    1700     
                    1701                                             ;;;;;;;;;;
0999 78AD           1702                                             mov             r0,#chbuf         ;T=1
099B B60032         1703                                             cjne    @r0,#0,nobuf0
099E 200907         1704                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
09A1 200A06         1705                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
09A4 801A           1706                                             jmp             gocikle
09A6 802B           1707     rnot1in:                jmp             not1in
09A8                1708     yesprd: ;передать   A3 в буфер
09A8 8000           1709                                             jmp             goonT
09AA                1710     yesbuf: ;записать   A3 в буфер
09AA 789A           1711     goonT:                          mov             r0,#parT
09AC 79AD           1712                                             mov             r1,#chbuf
09AE B60102         1713                                             cjne    @r0,#1,nott1
                    1714                                     ;       mov             @r1,#
09B1 800D           1715                                             jmp             gocikle
                    1716     
09B3 B60502         1717     nott1:                          cjne    @r0,#5,nott5
                    1718     
09B6 8008           1719                                             jmp             gocikle
                    1720     
09B8 C3             1721     nott5:           clr            c
09B9 799A           1722                             mov             r1,#parT
09BB 7404           1723                             mov             a,#4
09BD 97             1724                             subb    a,@r1
09BE 500E           1725                             jnc             yestt5          ;T<5
09C0 300708         1726     gocikle:        jnb             bitzus,nofz;bitbuf,nofz                                 
09C3 120000   F     1727                             call    z_05s    ;0,5c
09C6 120000   F     1728                             call    z_05s    ;0,5c
09C9 C207           1729                             clr     bitzus;bitbuf бит задержки засылки us
09CB 020000   F     1730     nofz:           jmp     labelA;rebyte
                    1731     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    28

                    1732     
09CE 80F0           1733     yestt5:         jmp             gocikle
                    1734     
09D0 16             1735     nobuf0:                         dec             @r0
09D1 80ED           1736                                             jmp             gocikle
                    1737     
                    1738     
09D3 B60205         1739     not1in:                         cjne    @r0,#2,not2in
09D6 7701           1740                                             mov             @r1,#1           ;T=2
09D8 020000   F     1741                                             jmp     labelB
                    1742     
09DB B60305         1743     not2in:                         cjne    @r0,#3,not3in
09DE 7709           1744                                             mov             @r1,#9          ;T=3
09E0 020000   F     1745                                             jmp     labelB
09E3 7713           1746     not3in:                         mov             @r1,#19
09E5 020000   F     1747                                             jmp     labelB
                    1748     
                    1749     
                    1750     ;;;;;;;;;;;3.11.06
                    1751     
                    1752     ;;коррекция 0
09E8 7883           1753     KORnul:         mov             r0,#chdel
09EA B60008         1754                             cjne    @r0,#0,nonuldel
                    1755                                     
                    1756                     ;       mov             a,P5       ;p5.3=1
                    1757                     ;       orl             a,#08
                    1758                     ;       mov             P5,a
                    1759                     ;       nop
                    1760                     ;       nop
                    1761                                     
                    1762                     ;       mov             a,P5              ;p5.0=0
                    1763                     ;       anl             a,#0feh
                    1764                     ;       mov             P5,a
                    1765             
09ED 900000   F     1766                             mov             dptr,#kor0us
09F0 120000   F     1767                             call    lospus          ;упр слово коррекции 0
09F3 8013           1768                             jmp             chdelmo
                    1769     
09F5                1770     nonuldel:       ;cjne   @r0,#7,no4del
09F5 B60316         1771                                                     cjne    @r0,#3,no4del
                    1772                             ;рез ->AN
09F8 7862           1773                             mov             r0,#rez_A;->r2..r5
09FA 120000   F     1774                             call    resar2
                    1775                     ;       mov             a,reacp         ;r2..r5 &&&&&&&&&&&
                    1776                     ;               mov             r2,a
                    1777                     ;               mov             a,reacp+1
                    1778                     ;               mov             r3,a
                    1779                     ;               mov             a,reacp+2
                    1780                     ;               mov             r4,a
                    1781                     ;               mov             a,reacp+3
                    1782                     ;               mov             r5,a
                    1783                                     ;;;;;;;;;;
09FD 120402         1784                             call    altof           ;r2..r5->float
0A00 7884           1785                             mov             r0,#kor0_AN;->kor0_AN
0A02 120000   F     1786                             call    saver2
                    1787                                     
                    1788                     ;       mov             a,P5            ;p5.0=1
                    1789                     ;       orl             a,#01
                    1790                     ;       mov             P5,a
                    1791                     ;       nop
                    1792                     ;       nop
                    1793                                     
                    1794                     ;       mov             a,P5                    ;p5.3=0 
                    1795                     ;       anl             a,#0f7h
                    1796                     ;       mov             P5,a                    
0A05 120000   F     1797                             call    loadUS          ;восстан исходное упр слово
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    29

0A08 7883           1798     chdelmo:        mov             r0,#chdel
0A0A 06             1799                             inc             @r0             ;chdel+1
0A0B 020000   F     1800                             jmp              rebyte
                    1801     
0A0E                1802     no4del:         ;cjne   @r0,#14,chdelmo
0A0E B606F7         1803                                             cjne    @r0,#6,chdelmo
0A11 7600           1804                             mov             @r0,#0          ;chdel
0A13 7898           1805                             mov             r0,#chinkor
0A15 7600           1806                             mov             @r0,#00;1;00;02;600;
0A17 08             1807                             inc             r0
0A18 76C8           1808                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0A1A 120000   F     1809                             call    clmassix;сбросить массив скольз среднего
0A1D 020000   F     1810                             jmp              rebyte
                    1811     
                    1812     ;автокалибровка
0A20                1813     autoka:  ;;  mov                r0,#chavt
                    1814                      ;;  call               chcmp
                    1815                      ;;  jz         nulavt
                    1816                     ;;   mov                r1,#chavt
                    1817                     ;;   call               chdec;chavt-1
                    1818                      ;; jmp         rebyte
0A20                1819     nulavt:  ;;;;;
0A20 7883           1820                             mov             r0,#chdel
0A22 B6000E         1821                             cjne    @r0,#0,nndelch
0A25 E585           1822                             mov   a,p5
0A27 4404           1823                             orl             a,#04              ;p5.2=1
0A29 00             1824                             nop
0A2A 00             1825                             nop
0A2B 543F           1826                             anl             a,#3fh          ;p5.6,p5.7=0
0A2D F585           1827                             mov   p5,a
0A2F 06             1828                             inc             @r0
0A30 020000   F     1829                             jmp              rebyte
                    1830     
0A33 B6033D         1831     nndelch:        cjne    @r0,#3,n4delch
                    1832                             ;pez->A+
                    1833                             ;K+=000/(A+-AN)
                    1834                             ;mov            r0,#rez_A;->r2..r5
                    1835                             ;call   resar2
0A36 E577           1836                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0A38 FA             1837                                     mov             r2,a
0A39 E578           1838                                     mov             a,reacp+1
0A3B FB             1839                                     mov             r3,a
0A3C E579           1840                                     mov             a,reacp+2
0A3E FC             1841                                     mov             r4,a
0A3F E57A           1842                                     mov             a,reacp+3
0A41 FD             1843                                     mov             r5,a
                    1844                                     ;;;;;;;;;;;;;;;
0A42 120402         1845                             call    altof                   ;r2..r5->float
0A45 7888           1846                             mov             r0,#rezAp;->rezAp
0A47 120000   F     1847                             call    saver2                          
0A4A 7884           1848                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0A4C 120000   F     1849                             call    resar8                          
0A4F 1201D1         1850                             call    flsub           ; r2..r5(A+-AN)
0A52 120000   F     1851                             call    move28     ;r2..r5->r8..r11
0A55 900000   F     1852                             mov             dptr,#CH2tho;000->r2..r5 float
0A58 120000   F     1853                             call    ldc_long                
0A5B 1202B7         1854                             call    fldiv
0A5E EA             1855                             mov             a,r2
0A5F 547F           1856                             anl             a,#7fh
0A61 FA             1857                             mov             r2,a
0A62 7890           1858                             mov             r0,#koefKp;->koefKp
0A64 120000   F     1859                             call    saver2
                    1860                       
                    1861                     ;       anl             P5,#0feh                ;p5.0=0 
0A67 E585           1862                     mov             a,P5
0A69 543B           1863                             anl             a,#3bh;acp-
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    30

0A6B F585           1864                             mov             P5,a
0A6D 7883           1865                             mov             r0,#chdel
0A6F 06             1866                             inc             @r0                       ;ch+1
0A70 020000   F     1867                             jmp             rebyte
                    1868     
0A73 B6063A         1869     n4delch:        cjne    @r0,#6,n8delch
                    1870                             ; pez->A-
                    1871                             ;K-=000/(A--AN)
                    1872                     ;       mov     r0,#rez_A;->r2..r5
                    1873                     ;       call    resar2
0A76 E577           1874                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0A78 FA             1875                                     mov             r2,a
0A79 E578           1876                                     mov             a,reacp+1
0A7B FB             1877                                     mov             r3,a
0A7C E579           1878                                     mov             a,reacp+2
0A7E FC             1879                                     mov             r4,a
0A7F E57A           1880                                     mov             a,reacp+3
0A81 FD             1881                                     mov             r5,a
                    1882                                     ;;;;;;;;;;;;;;;
0A82 120402         1883                             call    altof                   ;r2..r5->float
0A85 788C           1884                             mov             r0,#rezAm;->rezAm
0A87 120000   F     1885                             call    saver2                          
0A8A 7884           1886                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0A8C 120000   F     1887                             call    resar8                          
0A8F 1201D1         1888                             call    flsub                   ; r2..r5(A--AN)
0A92 120000   F     1889                             call    move28                  ;r2..r5->r8..r11
0A95 900000   F     1890                             mov             dptr,#CH2tho    ;000->r2..r5 float
0A98 120000   F     1891                             call    ldc_long                
0A9B 1202B7         1892                             call    fldiv
0A9E EA             1893                             mov             a,r2
0A9F 547F           1894                             anl             a,#7fh
0AA1 FA             1895                             mov             r2,a
0AA2 7894           1896                             mov             r0,#koefKm;->koefKm
0AA4 120000   F     1897                             call    saver2
                    1898                        
0AA7 120000   F     1899                             call    loadus
0AAA 7883           1900                             mov             r0,#chdel
0AAC 06             1901                             inc             @r0                       ;ch+1
0AAD 020000   F     1902                        jmp    rebyte
                    1903     
0AB0 B6090F         1904     n8delch:        cjne    @r0,#9,n12delch
0AB3 7600           1905                             mov             @r0,#0
0AB5 7981           1906                             mov             r1,#chavt
0AB7 770C           1907                             mov             @r1,#0ch;6;1;
0AB9 09             1908                             inc             r1
0ABA 7780           1909                             mov             @r1,#80h;40h;
0ABC 120000   F     1910                             call   clmassix     ;сбросить массив среднего
0ABF 020000   F     1911                             jmp             rebyte
0AC2 06             1912     n12delch:       inc             @r0
0AC3 020000   F     1913                             jmp             rebyte
                    1914     
                    1915     ;in-r1-count
0AC6                1916     chdec:          ;mov            r1,#chavt               ;chavt-1
0AC6 E7             1917                             mov             a,@r1
0AC7 FC             1918                             mov             r4,a
0AC8 09             1919                             inc             r1
0AC9 E7             1920                             mov             a,@r1
0ACA FD             1921                             mov             r5,a
0ACB C202           1922                             clr             rr2
0ACD C203           1923                             clr             rr3
0ACF 900000   F     1924                             mov             dptr,#ch1        
0AD2 120000   F     1925                             call    ldc_ltemp
0AD5 120000   F     1926                             call    lsub
0AD8 ED             1927                             mov             a,r5
0AD9 F7             1928                             mov             @r1,a
0ADA 19             1929                             dec             r1
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    31

0ADB EC             1930                             mov             a,r4
0ADC F7             1931                             mov             @r1,a
0ADD 22             1932                             ret      
                    1933     
                    1934     
                    1935     
                    1936     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
0ADE 75E700         1937      ind:   mov             EIE2,#00H;mov   IE,#00h
0AE1 120000   F     1938                     call    mign
0AE4 7840           1939                      mov            r0,#bufind;+11
0AE6 7F0C           1940                      mov            r7,#12
0AE8 C286           1941      nexin: clr             p0.6
0AEA E6             1942                     mov             a,@r0
0AEB F59B           1943                     mov             SPI0DAT,a
0AED 20FBFD         1944                     jb              TXBSY,$
0AF0 D286           1945                     setb    p0.6
0AF2 120000   F     1946                     call    z_9             ;25mks
0AF5 08             1947                     inc             r0;dec          r0
0AF6 DFF0           1948                     djnz    r7,nexin
0AF8 75E730         1949                     mov             EIE2,#30H;mov   IE,#80h
0AFB 22             1950                ret
                    1951     
                    1952     
0AFC 7A08           1953     zapadc:   mov R2,#8
0AFE D297           1954     sdv:      setb P1.7
0B00 33             1955               rlc A
0B01 9296           1956                     mov P1.6,C
0B03 120000   F     1957                     call tim2
                    1958                                     
0B06 C297           1959                     clr P1.7
0B08 120000   F     1960                     call tim2
0B0B DAF1           1961                     djnz R2,sdv
0B0D D296           1962                     setb P1.6
0B0F 22             1963                     ret
                    1964     
0B10 7A08           1965     chtadc:   mov R2,#8
0B12 D297           1966     sdv1:     setb P1.7
0B14 120000   F     1967               call tim2
0B17 C297           1968                     clr P1.7
0B19 A296           1969                     mov C,P1.6
0B1B 33             1970                     rlc A
0B1C 120000   F     1971                     call tim2
0B1F DAF1           1972                     djnz R2,sdv1
0B21 22             1973                     ret
                    1974     
0B22 7E30           1975     tim:      mov R6,#30h;38h
0B24 DEFE           1976     tim1:     djnz R6,tim1
0B26 22             1977               ret
                    1978               
0B27 7E10           1979     tim2:     mov R6,#10h;14h
0B29 DEFE           1980     tim3:     djnz R6,tim3
0B2B 22             1981               ret
                    1982     
                    1983     ;запись из acc
0B2C C3             1984     write_x1: clr   c
0B2D                1985     writeD_x1:
0B2D 92B1           1986                       mov P3.1,c        ;запись
0B2F F5A0           1987               mov P2,A
0B31 D2B3           1988                       setb P3.3
0B33 120000   F     1989                       call z_5
0B36 C2B3           1990                       clr P3.3
0B38 75A0FF         1991                       mov P2,#0FFh
0B3B 22             1992                       ret
                    1993     
                    1994     ;чтение в acc
0B3C C3             1995     read_x2:  clr   c  
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    32

0B3D 92B1           1996               mov P3.1,c        ;чтение
0B3F D2B2           1997               setb P3.2
0B41 D2B3           1998                       setb P3.3
0B43 120000   F     1999                     call z_5
0B46 E5A0           2000                       mov A,P2
0B48 C2B3           2001                       clr P3.3
0B4A C2B2           2002                       clr P3.2
0B4C 22             2003                       ret
                    2004     
                    2005     
0B4D 120000   F     2006     loop:     call read_x2;x2    ;ожидание флага готовности
0B50 20E7FA         2007                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
0B53 22             2008                        ret           ;возврат, если бит А(7)<>1
                    2009                                      
                    2010                                        
                    2011     
                    2012     
                    2013     
                    2014     ;dptr+4-приемник
                    2015     ;dptr-источник
                    2016     ;r7-кол байт  
0B54                2017     xCIKLWR:
0B54 7F04           2018                             mov             r7,#4   
0B56 E0             2019     lwrx:   movx    a,@dptr
0B57 C083           2020                             push    dph
0B59 C082           2021                             push    dpl
0B5B A3             2022                             inc             dptr
0B5C A3             2023                             inc             dptr
0B5D A3             2024                             inc             dptr
0B5E A3             2025                             inc             dptr
0B5F F0             2026                             movx    @dptr,a
0B60 D082           2027                             pop             dpl
0B62 D083           2028                             pop             dph
                    2029                             
0B64 A3             2030                             inc             dptr
0B65 DFEF           2031                             djnz    r7,lwrx
0B67 22             2032                             ret
                    2033     ;r2..r5->@dptr..@dptr+3                         
0B68 EA             2034     saveIr2:                mov     a,r2
0B69 F0             2035                                             movx    @dptr,a
0B6A A3             2036                                             inc     dptr
0B6B EB             2037                                             mov     a,r3
0B6C F0             2038                                             movx    @dptr,a
0B6D A3             2039                                             inc     dptr
0B6E EC             2040                                             mov     a,r4
0B6F F0             2041                                             movx    @dptr,a
0B70 A3             2042                                             inc     dptr
0B71 ED             2043                                             mov     a,r5
0B72 F0             2044                                             movx    @dptr,a
0B73 22             2045                                             ret
                    2046     ;r2..r5-> @r0..@r0+3
                    2047     
0B74 EA             2048     saver2:         mov     a,r2
0B75 F6             2049                                             mov     @r0,a
0B76 08             2050                                             inc     r0
0B77 EB             2051                                             mov     a,r3
0B78 F6             2052                                             mov     @r0,a
0B79 08             2053                                             inc     r0
0B7A EC             2054                                             mov     a,r4
0B7B F6             2055                                             mov     @r0,a
0B7C 08             2056                                             inc     r0
0B7D ED             2057                                             mov     a,r5
0B7E F6             2058                                             mov     @r0,a
0B7F 22             2059                                             ret 
0B80 7F50           2060     clmassix:       mov                     r7,#50h;28h
0B82 900080         2061                             mov     dptr,#MASS0        ;забить массив A нулями
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    33

0B85 7400           2062     clmax:          mov          a,#00h
0B87 F0             2063                  movx    @dptr,a
0B88 A3             2064                  inc     dptr
0B89 DFFA           2065                 djnz                r7,clmax                
0B8B F56E           2066                  mov     chmas,a
0B8D C201           2067                  clr     bitmas
0B8F 22             2068                 ret
                    2069     
                    2070     ;r1-яЁшхьшъ
                    2071     ;r0-шёЄюўшъ
                    2072     ;r7-ъюы срщЄ  
0B90                2073     CIKLWR:
0B90 7F04           2074                             mov             r7,#4   
0B92 E6             2075     lwr:    mov     a,@r0
0B93 F7             2076                             mov     @r1,a
0B94 09             2077                             inc             r1
0B95 08             2078                             inc             r0
0B96 DFFA           2079                             djnz    r7,lwr
0B98 22             2080                             ret     
                    2081     ;r2..r5-> @dptr..@dptr+3
                    2082     
0B99 120000   F     2083     zmul:   call    maform
0B9C 120000   F     2084                     call    lmul
0B9F 120000   F     2085                     call    bform
0BA2 22             2086                     ret
                    2087     
0BA3 120000   F     2088     zdiv:   call    maform
0BA6 120000   F     2089                     call    divide
0BA9 120000   F     2090                     call    bform
0BAC 22             2091                     ret
                    2092     
0BAD EA             2093     maform: mov a,r2
0BAE 33             2094             rlc a
0BAF 5006           2095             jnc             fo1m
0BB1 D202           2096                     setb            znmat
0BB3 120000   F     2097                     call   form4
0BB6 22             2098                     ret
0BB7 C202           2099     fo1m:   clr             znmat
0BB9 22             2100                     ret
                    2101     
0BBA 300203         2102     bform:  jnb             znmat,fo2m
0BBD 120000   F     2103                     call    form4
0BC0 22             2104     fo2m:   ret
                    2105       
                    2106     ;r2..r5 яхЁхтхёЄш т фюя ъюф
0BC1 ED             2107     form4:          mov a,r5
0BC2 F4             2108             cpl a
0BC3 2401           2109             add a,#1
0BC5 FD             2110             mov r5,a
0BC6 EC             2111             mov a,r4
0BC7 F4             2112             cpl a
0BC8 3400           2113             addc    a,#0
0BCA FC             2114             mov r4,a
0BCB EB             2115             mov a,r3
0BCC F4             2116                 cpl a
0BCD 3400           2117             addc    a,#0
0BCF FB             2118             mov r3,a
0BD0 EA             2119             mov a,r2
0BD1 F4             2120             cpl a
0BD2 3400           2121             addc    a,#0
0BD4 FA             2122             mov r2,a
0BD5 22             2123             ret
                    2124     
0BD6 120000   F     2125     zcmp:   call            maform
0BD9 120000   F     2126                     call            lcmp
0BDC C0D0           2127                     push            psw
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    34

0BDE 120000   F     2128                     call    bform
0BE1 D0D0           2129                     pop             psw
0BE3 22             2130                     ret
                    2131     
                    2132     
                    2133     ;@r0..@r0+3->r8..r11
                    2134     
0BE4 E6             2135     resar8: mov     a,@r0
0BE5 F508           2136                     mov     ltemp,a
0BE7 08             2137                     inc     r0
0BE8 E6             2138                     mov     a,@r0
0BE9 F509           2139                     mov     ltemp+1,a
0BEB 08             2140                     inc     r0
0BEC E6             2141                     mov     a,@r0
0BED F50A           2142                     mov     ltemp+2,a
0BEF 08             2143                     inc     r0
0BF0 E6             2144                     mov     a,@r0
0BF1 F50B           2145                     mov     ltemp+3,a
0BF3 22             2146                     ret
                    2147     
                    2148     ;
                    2149     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                    2150     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                    2151     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                    2152     ;r2 a    ўшёыю 180
                    2153     ;00 b4
                    2154     ;т_ї- mabin..mabin+2
                    2155     ;     80 01 00
                    2156      
0BF4 C8             2157     cond:   xch     a,r0    
0BF5 F9             2158                     mov     r1,a
0BF6 C8             2159                     xch     a,r0
0BF7 7C03           2160                     mov     r4,#03
0BF9 7700           2161     dcoa:   mov     @r1,#00
0BFB 09             2162                     inc     r1
0BFC DCFB           2163                     djnz    r4,dcoa
0BFE 7B10           2164                     mov     r3,#10h
0C00 C3             2165     dcob:   clr     c
0C01 33             2166                     rlc     a
0C02 CA             2167                     xch     a,r2
0C03 33             2168                     rlc     a
0C04 CA             2169                     xch     a,r2
0C05 C8             2170                     xch     a,r0
0C06 F9             2171                     mov     r1,a
0C07 C8             2172                     xch     a,r0
0C08 7C03           2173                     mov     r4,#03
0C0A FD             2174                     mov     r5,a
0C0B E7             2175     dcoc:   mov     a,@r1 
0C0C 37             2176                     addc    a,@r1
0C0D D4             2177                     da      a
0C0E F7             2178                     mov     @r1,a
0C0F 09             2179                     inc     r1
0C10 DCF9           2180                     djnz    r4,dcoc
0C12 ED             2181                     mov     a,r5
0C13 4003           2182                     jc      dcod
0C15 DBE9           2183                     djnz    r3,dcob
0C17 C3             2184                     clr     c
0C18 00             2185     dcod:   nop
0C19 22             2186                     ret
                    2187     
0C1A 8A08           2188     move28: mov     ltemp,r2                        ;r2..r5->ltemp
0C1C 850309         2189                     mov     ltemp+1,3
0C1F 85040A         2190                     mov     ltemp+2,4
0C22 85050B         2191                     mov     ltemp+3,5
0C25 22             2192                     ret
                    2193     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    35

                    2194     ;@r0..@r0+3->r2..r5
                    2195     
0C26 E6             2196     resar2: mov     a,@r0
0C27 FA             2197                     mov     r2,a
0C28 08             2198                     inc     r0
0C29 E6             2199                     mov     a,@r0
0C2A FB             2200                     mov     r3,a
0C2B 08             2201                     inc     r0
0C2C E6             2202                     mov     a,@r0
0C2D FC             2203                     mov     r4,a
0C2E 08             2204                     inc     r0
0C2F E6             2205                     mov     a,@r0
0C30 FD             2206                     mov     r5,a
0C31 22             2207                     ret
                    2208     
                    2209     ;25mkc !!!!!!!!!!!!!!!1
0C32 7B4B           2210     z_9:      mov R3,#4Bh      ;загрузка числа
0C34 DBFE           2211                    djnz R3,$
0C36 22             2212               ret
                    2213     
                    2214     ;запись   передаваемый байт в acc
                    2215     ;передача байта послед кодом старшими разрядами  вперед
0C37 7A08           2216     write:     mov R2,#8
0C39 C3             2217                             clr  c  
0C3A C297           2218     wr1:            clr             p1.7;P1.2
0C3C 00             2219                         nop 
0C3D 33             2220                             rlc A
0C3E 9296           2221                             mov P1.6,C;P1.1,C
0C40 120000   F     2222                        call tim2
0C43 D297           2223                        setb P1.7;P1.2
0C45 120000   F     2224                call tim2
0C48 DAF0           2225                       djnz R2,wr1
0C4A C296           2226                       clr P1.6;P1.1
0C4C 22             2227                      ret
                    2228     
                    2229     ;принимаемый байт в acc
                    2230     ;прием байта последовательным кодом старшими разрядами вперед
0C4D 7A08           2231     read:    mov R2,#8
0C4F C297           2232     re1:     clr P1.7;P1.2
0C51 120000   F     2233              call tim2        ;5mks
0C54 A294           2234                     mov C,P1.4;P1.0
0C56 33             2235                     rlc A           
0C57 D297           2236                     setb P1.7;P1.2
0C59 120000   F     2237                     call tim2
0C5C DAF1           2238                     djnz R2,re1
0C5E 22             2239                     ret
                    2240     
                    2241      ;in r0-count   
                    2242     ;r10,r11-значение с котоым сравнивается счетчик
                    2243     ;r2..r5 -значение счетчика
0C5F                2244     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
0C5F E6             2245                     mov                     a,@r0
0C60 FC             2246                     mov                     r4,a
0C61 08             2247                     inc                     r0
0C62 E6             2248                     mov                     a,@r0
0C63 FD             2249                     mov                     r5,a
0C64 7B00           2250                     mov                     r3,#0
0C66 7A00           2251                     mov                     r2,#0
0C68 750800         2252                     mov                     r8,#0;clr                       r8
0C6B 750900         2253                     mov                     r9,#0;clr                       r9
0C6E 120000   F     2254                     call            lcmp
0C71 22             2255                     ret
                    2256     
                    2257     
                    2258     
                    2259     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    36

                    2260     
                    2261     
                    2262                                 
0C72 020000   F     2263     rout6:          jmp             out6
0C75 020000   F     2264     rlabelF:        jmp             labelF  
0C78 020000   F     2265     rknrazr:        jmp             knrazr  
0C7B 020000   F     2266     rknopt:         jmp             knopt
0C7E 020000   F     2267     rizman:         jmp             izman   
0C81                2268     keyb1:  ;IE6 
0C81 75E700         2269                                     mov             EIE2,#00H
                    2270                                     
0C84 C0E0           2271                                     push    acc
0C86 C0D0           2272                                     push    psw
0C88 C000           2273                                     push    rr0
0C8A C001           2274                                     push    rr1
0C8C C002           2275                                     push    rr2
0C8E C003           2276                                     push    rr3
0C90 C004           2277                                     push    rr4
0C92 C005           2278                                     push    rr5
0C94 C006           2279                                     push    rr6
0C96 C007           2280                                     push    rr7
                    2281                                     ;clr            bitmig
                    2282                       ;;;;;;;;;;;;;;
0C98 120000   F     2283                                     call    z_01s;0,1s
                    2284                                     ;восстан знакоместо при мигании
                    2285                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0C9B 78B2           2286                                     mov             r0,#marker
0C9D 7440           2287                                     mov             a,#bufind
0C9F 26             2288                                     add             a,@r0                   ;a=bufind+marker
0CA0 F9             2289                                     mov             r1,a
0CA1 A73C           2290                                     mov             @r1,savba
                    2291                                     ;;;;;;;;;;;
0CA3 E5B0           2292                             mov             a,p3
0CA5 20E644         2293                                     jb              acc.6,outviR;выход из режима выч R
0CA8 E5B0           2294     gout6:                          mov             a,p3
0CAA 44FF           2295                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0CAC F5B0           2296                                     mov             p3,a
0CAE E5B0           2297                                     mov             a,p3
0CB0 30E6BF         2298                                     jnb             acc.6,rout6             ;error
0CB3 3004BF         2299                                     jnb             bitizm,rlabelF
0CB6 75B0FE         2300                                     mov             p3,#0feh                ;реж IZM
0CB9 E5B0           2301                                     mov             a,p3
0CBB 30E6C0         2302                                     jnb             acc.6,rizman
                    2303                                     ;;;;;;
0CBE 201232         2304                                     jb              bitklb,goklb
0CC1 75B0FD         2305                                     mov             p3,#0fdh
0CC4 E5B0           2306                                     mov             a,p3
0CC6 30E6AF         2307                                     jnb             acc.6,rknrazr             ;labelC
0CC9 75B0FB         2308                                     mov             p3,#0fbh
0CCC E5B0           2309                                     mov             a,p3
0CCE 30E641         2310                                     jnb             acc.6,knright           ;->
0CD1 75B0F7         2311                                     mov             p3,#0f7h
0CD4 E5B0           2312                                     mov             a,p3
0CD6 30E6A2         2313                                     jnb             acc.6,rknopt                    ;T
0CD9 75B0EF         2314                                     mov             p3,#0efh
0CDC E5B0           2315                                mov          a,p3
0CDE 30E615         2316                                     jnb             acc.6,pyskst                    ;pysk/stop
0CE1 75B0DF         2317                                     mov             p3,#0dfh
0CE4 E5B0           2318                                     mov             a,p3
0CE6 30E645         2319                                jnb          acc.6,knvich
0CE9 020000   F     2320                                     jmp             izmpaT
                    2321     
0CEC 3006B9         2322     outviR: jnb             bitvi11,gout6   
0CEF C214           2323                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0CF1 C206           2324                                     clr             bitvi11
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    37

                    2325                                     
0CF3 020000   F     2326     goklb:          jmp             out6
                    2327     
0CF6 200A05         2328     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0CF9 D20A           2329                                     setb    bitbon  ;уст реж буфер вкл
0CFB 020000   F     2330                                     jmp             izmpaT
0CFE C20A           2331     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D00 807E           2332                                     jmp             izmpaT
                    2333     
0D02 79B0           2334     tizmri:                 mov             r1,#level
0D04 B70102         2335                                     cjne    @r1,#1,right2
                    2336                                     ;10s->HET
0D07 8004           2337                                     jmp             right3
                    2338     
0D09 07             2339     right2:                 inc             @r1
0D0A 120000   F     2340                                     call    lolevT
                    2341                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D0D 120000   F     2342     right3:                 call    ind
0D10 806A           2343                                     jmp             izmfun
                    2344     
                    2345                             
                    2346                             
0D12                2347     knright:        
                    2348     
0D12 79AE           2349                                     mov             r1,#diap
                    2350                             ;перекл диапазон 1 поз вверх сбр массив
0D14 17             2351                                     dec             @r1
0D15 B7FF04         2352                                     cjne    @r1,#0ffh,diinc
0D18 7700           2353                                     mov             @r1,#0
0D1A 8060           2354                                     jmp  izmfun
0D1C 120000   F     2355     diinc:                  call     clmassix
0D1F 78B3           2356                                     mov             r0,#summa
0D21 120000   F     2357                                     call    clear4
0D24 786A           2358                                     mov             r0,#rez_A0
0D26 120000   F     2359                                     call    clear4  
0D29 120000   F     2360                                     call    loadUS
0D2C 804E           2361                                      jmp  izmfun
                    2362     
0D2E 200610         2363     knvich:            jb           bitvi11,onvich
0D31 C204           2364                                     clr             bitizm
0D33 D214           2365                                     setb    bitvich
                    2366                                     
0D35 78B1           2367                                     mov             r0,#vichR
0D37 7611           2368                                     mov             @r0,#11h;;????????or 0
                    2369                                     ;ВЫЧИСЛИТЬ
0D39 900000   F     2370                                     mov     dptr,#teVICH
0D3C 120000   F     2371                                     call    lotext
                    2372                               ; call                ind
0D3F 806C           2373                                     jmp              viout;izmpaT
                    2374     
0D41 C214           2375     onvich:                 clr             bitvich
0D43 78B1           2376                                     mov             r0,#vichR
0D45 7600           2377                                     mov             @r0,#0
0D47 8037           2378                                     jmp              izmpaT
                    2379     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0D49 301820         2380     louizm:            jnb          knizm,lou
0D4C 79AE           2381                                     mov             r1,#diap
0D4E C3             2382                                     clr             c
0D4F 7403           2383                                     mov             a,#3
0D51 97             2384                                     subb    a,@r1
0D52 5006           2385                                     jnc             lldi23    ;10-2..10-5
                    2386                                     ;10-6..10-11
0D54 E584           2387                                     mov             a,p4
0D56 54F7           2388                                     anl             a,#0f7h   ;d3
0D58 F584           2389                                     mov             p4,a
0D5A E7             2390     lldi23:                 mov             a,@r1
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    38

0D5B 6403           2391                                     xrl             a,#3
0D5D 7002           2392                                     jnz             lldi3
0D5F 8005           2393                                     jmp             lldi2   ;10-5
0D61 E7             2394     lldi3:                  mov             a,@r1
0D62 6402           2395                                     xrl             a,#2            ;
0D64 7006           2396                                     jnz             lou             
0D66 E585           2397     lldi2:                  mov             a,p5            ;10-4
0D68 4408           2398                                     orl             a,#08
0D6A F585           2399                                     mov             p5,a
0D6C 22             2400     lou:                    ret
                    2401                               ;;;;;;
0D6D 201807         2402     izman:                  jb              knizm,knizmon
0D70 D218           2403                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2404                             ;       d3(k5 p4),d3(u5 p5)заслать us
0D72 120000   F     2405                                     call    louizm 
0D75 8005           2406                                     jmp             izmfun
0D77 C218           2407     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0D79 120000   F     2408                                     call    loadUS;восстановить us
0D7C                2409     izmfun:                 
0D7C D207           2410                                     setb    bitzus;bitbuf
0D7E 8000           2411                                     jmp             labelE;;;;;;;;;;;;
                    2412                                     ;;;;;;;;;;;;;;
0D80                2413     izmpaT:
                    2414     ;;;;;;;;;;;;;;;;;
                    2415                     ;       clr             c 
                    2416                     ;       mov             r1,#parN
                    2417     
                    2418                     ;       mov             r0,#diap
                    2419                     ;       mov             a,#6            
                    2420                     ;       subb    a,@r0
                    2421                     ;       jnc             labelE          ;         ;10-2..10-8
                    2422                               
                    2423                     ;       mov             @r1,#2          ;10-9..10-11            
                    2424                     ;       jmp             labelE
                    2425     
                    2426     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0D80 789A           2427     labelE:                 mov             r0,#parT
0D82 793D           2428                                     mov             r1,#chkl
0D84 B60108         2429                                     cjne    @r0,#1,izmt2
0D87 7700           2430                                     mov             @r1,#0
0D89 09             2431                                     inc             r1
0D8A 7702           2432                                     mov             @r1,#2
0D8C 020000   F     2433                                     jmp             out6
0D8F B60208         2434     izmt2:                  cjne    @r0,#2,izmt3
0D92 7700           2435                                     mov             @r1,#0
0D94 09             2436                                     inc             r1
0D95 7714           2437                                     mov             @r1,#20
0D97 020000   F     2438                                     jmp             out6
                    2439     
0D9A 7700           2440     izmt3:                  mov             @r1,#0
0D9C 09             2441                                     inc             r1
0D9D 77C8           2442                                     mov             @r1,#200
0D9F 020000   F     2443                                     jmp             out6
                    2444     
                    2445     
                    2446     
                    2447     
0DA2                2448     knopt: ;кнопка T
0DA2 C204           2449                                clr          bitizm
0DA4 D210           2450                                setb         bitt2
0DA6 79B7           2451                                mov          r1,#load
0DA8 7704           2452                                mov          @r1,#4;1s
0DAA 120000   F     2453                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2454                                
                    2455     
0DAD 793D           2456     viout:          mov             r1,#chkl
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    39

0DAF 7703           2457                             mov             @r1,#03
0DB1 09             2458                             inc             r1
0DB2 77E8           2459                             mov             @r1,#0e8h               ;1000
0DB4 020000   F     2460                             jmp             out6
                    2461     
0DB7                2462     knrazr:          
0DB7 C3             2463     labelC:          clr            c
0DB8 78AF           2464                             mov             r0,#parN
0DBA 799A           2465                             mov             r1,#parT
0DBC 7402           2466                             mov             a,#2
0DBE 97             2467                             subb    a,@r1
0DBF 40BF           2468                             jc              labelE          ;T>2
0DC1 B60104         2469                             cjne    @r0,#1,noN1c
0DC4 7602           2470                             mov             @r0,#2          ;N=2
0DC6 80B8           2471                             jmp             labelE
                    2472     
0DC8 B60204         2473     noN1c:          cjne    @r0,#2,not_1
0DCB 7603           2474                             mov             @r0,#3          ;N=3      ;10-2..10-8
0DCD 80B1           2475                             jmp             labelE
                    2476     
0DCF                2477     not_10: 
0DCF 7601           2478     not_1:          mov             @r0,#1                          ;N=1
0DD1 80AD           2479                             jmp     labelE
                    2480     
0DD3 020000   F     2481     rtizmri:        jmp             tizmri
0DD6                2482     labelf:                 
0DD6 301024         2483                             jnb             bitt2,nofizm
0DD9 75B0FB         2484                        mov          p3,#0fbh
0DDC E5B0           2485                        mov          a,p3
0DDE 20E60F         2486                        jb           acc.6,outF
0DE1 79B7           2487                        mov          r1,#load;parT
0DE3 B70503         2488                        cjne         @r1,#5,noft1
                    2489                        ;t=10s
0DE6 020000   F     2490                        jmp          out6;ft1izm
                    2491     
0DE9 07             2492     noft1:     inc          @r1;dec         @r1
0DEA 120000   F     2493     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2494                             ;call   ind
0DED 020000   F     2495                     jmp             out6;??????????????/
                    2496     
                    2497                             ;увеличить счетчик задержки клавиатуры
0DF0 783D           2498     outF:           mov             r0,#chkl
0DF2 7627           2499                             mov             @r0,#27h
0DF4 08             2500                             inc             r0
0DF5 7610           2501                             mov             @r0,#10h
0DF7 020000   F     2502                             jmp             out6;out7
                    2503     
0DFA 020000   F     2504     noviR1:         jmp             noviR
0DFD 3014FA         2505     nofizm:         jnb             bitvich,noviR1
0E00 78B1           2506                             mov             r0,#vichR
0E02 B6111A         2507                             cjne    @r0,#11h,no11v6
0E05 7612           2508                             mov             @r0,#12h                ;11= вычислить
0E07 900000   F     2509     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E0A 120000   F     2510                             call    lotext
0E0D 80E1           2511                             jmp             outF
                    2512             
0E0F 020000   F     2513     rnor11:         jmp             nor11   
                    2514             
0E12 B611FA         2515     nor13:          cjne    @r0,#11h,rnor11
0E15 7612           2516                             mov             @r0,#12h
0E17 900000   F     2517                             mov             dptr,#teIZMK    ;       изм конст
0E1A 120000   F     2518                         call        lotext             
0E1D 80D1           2519                             jmp             outF
                    2520     
0E1F B6120A         2521     no11v6:         cjne    @r0,#12h,no12v6
0E22 7613           2522                             mov             @r0,#13h
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    40

0E24 900000   F     2523                             mov             dptr,#teOUT
0E27 120000   F     2524                             call    lotext
0E2A 80C4           2525                             jmp             outF
                    2526                     
0E2C B6130A         2527     no12v6:         cjne    @r0,#13h,no13v6
0E2F 7611           2528                             mov             @r0,#11h
0E31 900000   F     2529                             mov             dptr,#teVICH
0E34 120000   F     2530                             call    lotext
0E37 80B7           2531                             jmp             outF
                    2532     
                    2533     ;кн -> A= 0000
                    2534     ;кн -> B= +00000
0E39 75B0FB         2535     no13v6:         mov             p3,#0fbh
0E3C E5B0           2536                             mov             a,p3
0E3E 20E634         2537                             jb              acc.6,chanZ
0E41 E53B           2538                             mov             a,movrig
0E43 B40713         2539                             cjne    a,#7,kon_B      
0E46 78B2           2540                             mov             r0,#marker      ;A= 0000
0E48 B60715         2541                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0E4B E53A           2542     rikn:           mov             a,movleft
0E4D F6             2543                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2544     ;                               29.12.06
                    2545     ;;;;;;;;;;;;;;;;;;
                    2546     ;необходимо не портить цифру в следуюем справа знакоместе
                    2547     ;т е сохранить ее в ячейке для мигания в противном случае
                    2548     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2549     ;       знакоместа
0E4E 78B2           2550                                     mov             r0,#marker
0E50 7440           2551                                     mov             a,#bufind
0E52 26             2552                                             add             a,@r0                   ;a=bufind+m
                             arker
0E53 F9             2553                                             mov             r1,a
0E54 09             2554                                             inc             r1
0E55 873C           2555                                             mov             savba,@r1
0E57 8097           2556                                     jmp             outF
                    2557     
0E59 78B2           2558     kon_B:          mov             r0,#marker      ;B= +00000
0E5B B60802         2559                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0E5E 80EB           2560                                             jmp             rikn
0E60                2561     mark0_8:
                    2562     ;                               29.12.06
                    2563     ;;;;;;;;;;;;;;;;;;
                    2564     ;необходимо не портить цифру в следуюем справа знакоместе
                    2565     ;т е сохранить ее в ячейке для мигания в противном случае
                    2566     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2567     ;       знакоместа ->B=+00000
0E60 78B2           2568                                             mov             r0,#marker
0E62 7440           2569                                     mov             a,#bufind
0E64 26             2570                                             add             a,@r0                   ;a=bufind+m
                             arker
0E65 F9             2571                                             mov             r1,a
0E66 09             2572                                             inc             r1
0E67 873C           2573                                             mov             savba,@r1
0E69 78B2           2574                             mov             r0,#marker
0E6B 06             2575                             inc             @r0             ;       сдвинуть курсор вправо на 1
0E6C C219           2576                             clr             bitmig
0E6E B60901         2577                             cjne    @r0,#9,outma
0E71 18             2578                             dec             r0;ppp
0E72 020000   F     2579     outma:          jmp             outF
                    2580     
0E75 75B0FE         2581     chanZ:          mov             p3,#0feh
0E78 E5B0           2582                             mov             a,p3
0E7A 20E611         2583                             jb              acc.6,chanma
                    2584                             ;изм знак в старшем разряде на противоположн
0E7D E543           2585                             mov             a,bufind+3
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    41

0E7F B42B06         2586                             cjne            a,#2bh,noplus
0E82 75432D         2587                             mov                     bufind+3,#2dh           ;+->-   
0E85 020000   F     2588                             jmp             outF
0E88                2589     noplus:
0E88 75432B         2590                             mov                     bufind+3,#2bh           ;-/+-
0E8B 020000   F     2591                             jmp             outF
0E8E 75B0FD         2592     chanma:         mov             p3,#0fdh
0E91 E5B0           2593                             mov             a,p3
0E93 20E603         2594                             jb              acc.6,outFl;labelL1
                    2595                             ;clr            bitmig
0E96 120000   F     2596     labelL1:        call    vvchif  ;увеличить цифру 
                    2597     
0E99 020000   F     2598     outFl:                  jmp             outF
                    2599                     
0E9C                2600     nor11:          ;       выход
0E9C 7613           2601                     mov             @r0,#13h  ;12->13
0E9E 900000   F     2602                     mov             dptr,#teOUT
                    2603     ;               jmp             vi1113
                    2604     
                    2605     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2606     
0EA1 C206           2607     yesviR:         clr             bitvi11;????????/
0EA3 200C03         2608                             jb              bmem11,rlabelL
0EA6 020000   F     2609                             jmp             out6;???????//
                    2610     
0EA9 020000   F     2611     rlabelL:        jmp                     labelL
                    2612     
0EAC                2613     noviR:  ;       jb                      bitmenu,;15.01.07
                    2614     ;;;;;;;;;;;;;
0EAC 78B1           2615                                             mov                     r0,#vichR
0EAE 7415           2616                                             mov                     a,#15h
0EB0 C3             2617                                             clr                     c
0EB1 96             2618                                             subb            a,@r0
0EB2 4016           2619                                             jc                      ri21_23
                    2620     
0EB4 75B0FB         2621                                             mov             p3,#0fbh; реж кн меню ->
0EB7 20B60A         2622                                             jb              p3.6,ri6
0EBA 78B1           2623                                             mov             r0,#vichR
0EBC B61508         2624                                             cjne    @r0,#15h,norime
0EBF 7611           2625                                             mov             @r0,#11h
0EC1 120000   F     2626     norime1:        call            lomenu
0EC4 020000   F     2627     ri6:                    jmp             out6
0EC7 06             2628     norime:         inc             @r0
0EC8 80F7           2629                                             jmp             norime1
                    2630             
0ECA 7423           2631     ri21_23:        mov                     a,#23h          ;->
0ECC C3             2632                                             clr                     c
0ECD 96             2633                                             subb            a,@r0
0ECE 4014           2634                                             jc                      ri_31
0ED0 75B0FB         2635                                             mov                     p3,#0fbh
0ED3 20B6EE         2636                                             jb                      p3.6,ri6
0ED6 B62308         2637                                             cjne            @r0,#23h,no23ri
0ED9 7621           2638                                             mov                     @r0,#21h
0EDB 120000   F     2639                                             call            lomenu
0EDE 020000   F     2640                                             jmp                     out6
0EE1 06             2641     no23ri:         inc                     @r0
0EE2 80DD           2642                                             jmp                     norime1
0EE4 B63119         2643     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0EE7 30130B         2644                                             jnb                     bitv19,gosk19
0EEA 900000   F     2645                                             mov                     dptr,#teS57_6;57,6
0EED 120000   F     2646                                             call            lotext
0EF0 C213           2647                                             clr                     bitv19
0EF2 020000   F     2648                                             jmp             out6
0EF5 900000   F     2649     gosk19:         mov                     dptr,#teS19_2
0EF8 120000   F     2650                                             call            lotext
0EFB D213           2651                                             setb            bitv19
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    42

0EFD 020000   F     2652                                             jmp                     out6
                    2653     
                    2654     
                    2655     
                    2656     ;labelS2:       jmp                     out6
                    2657     
0F00 7452           2658     no31ri:         mov                     a,#52h;42h              ;->
0F02 C3             2659                                             clr                     c
0F03 96             2660                                             subb            a,@r0
0F04 40BE           2661                                             jc                      ri6
0F06 75B0FB         2662                                             mov                     p3,#0fbh                   
                                  ;41,42
0F09 30B608         2663                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F0C 75B0FD         2664                                             mov                     p3,#0fdh
0F0F 20B6B2         2665                                             jb                      p3.6,ri6
0F12 8082           2666                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0F14 020000   F     2667     rlabelN:                jmp             labelN
0F17 020000   F     2668     moutF:          jmp             outF
                    2669     ;;;;;;;;;;;;;;;;;;;;;;;;;
0F1A 020000   F     2670     rnnmemb:        jmp             nnmemb
0F1D 300BFA         2671     nbimenu:        jnb             bitmem,rnnmemb
0F20 79B0           2672                             mov             r1,#level
0F22 B71113         2673                        cjne         @r1,#11h,nomem11
                    2674                        
0F25 75B0FB         2675                        mov          p3,#0fbh
0F28 E5B0           2676                        mov          a,p3
0F2A 20E6EA         2677                        jb           acc.6,moutF
0F2D 7712           2678                        mov          @r1,#12h
0F2F 900000   F     2679                        mov          dptr,#teWR
0F32 120000   F     2680                        call         lotext
0F35 020000   F     2681                        jmp          outF
                    2682     
0F38 B71213         2683     nomem11:   cjne         @r1,#12h,nomem12
0F3B 75B0FB         2684                             mov             p3,#0fbh
0F3E E5B0           2685                        mov          a,p3
0F40 20E6D4         2686                        jb           acc.6,moutF
0F43 7713           2687                        mov          @r1,#13h
0F45 900000   F     2688                        mov          dptr,#teLIST
0F48 120000   F     2689                        call         lotext
0F4B 020000   F     2690                        jmp          outF
0F4E B71313         2691     nomem12:         cjne           @r1,#13h,labelL
0F51 75B0FB         2692                             mov             p3,#0fbh
0F54 E5B0           2693                        mov          a,p3
0F56 20E6BE         2694                        jb           acc.6,moutF
0F59 7711           2695                        mov          @r1,#11h
0F5B 900000   F     2696                        mov          dptr,#teCLE
0F5E 120000   F     2697                        call         lotext
0F61 020000   F     2698                          jmp                outF
                    2699     
0F64 78B0           2700     labelL:         mov             r0,#level
0F66 B6211B         2701                             cjne    @r0,#21h,labl21
0F69 75B0FB         2702                             mov             p3,#0fbh
0F6C E5B0           2703                             mov             a,p3
0F6E 20E610         2704                             jb              acc.6,loutF
0F71 B62108         2705                             cjne    @r0,#21h,lal22
0F74 7622           2706                             mov             @r0,#22h
                    2707                             ;БЛОК
0F76 120000   F     2708                             call    lotext
0F79 020000   F     2709                             jmp             outF
0F7C 7621           2710     lal22:          mov             @r0,#21h
                    2711                             ;ПОЛНАЯ
0F7E 120000   F     2712                             call    lotext
0F81 020000   F     2713     loutf:          jmp             outF
                    2714     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    43

0F84 B6211B         2715     labl21:    cjne @r0,#21h,nolev1
0F87 75B0FB         2716                             mov             p3,#0fbh
0F8A E5B0           2717                             mov             a,p3
0F8C 20E6F2         2718                             jb              acc.6,loutF
0F8F B62108         2719                             cjne    @r0,#21h,labl22
0F92 7622           2720                             mov             @r0,#22h
                    2721                             ;БЛОК
0F94 120000   F     2722                             call    lotext
0F97 020000   F     2723                             jmp             outF
0F9A 7621           2724     labl22:         mov             @r0,#21h
                    2725                             ;ПОЛНАЯ
0F9C 120000   F     2726                             call    lotext
0F9F 020000   F     2727                             jmp             outF
                    2728                      
0FA2 B62323         2729     nolev1:         cjne    @r0,#23h,go31l
0FA5 75B0FB         2730     rigblo:         mov             p3,#0fbh
0FA8 20B627         2731                             jb              p3.6,llev2
0FAB                2732     labL2:    ;  уст курсор в правую позицию 
                    2733                                     ;                               29.12.06
                    2734     ;;;;;;;;;;;;;;;;;;
                    2735     ;необходимо не портить цифру в следуюем справа знакоместе
                    2736     ;т е сохранить ее в ячейке для мигания в противном случае
                    2737     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2738     ;       знакоместа
0FAB 78B2           2739                                             mov             r0,#marker
0FAD 7440           2740                                     mov             a,#bufind
0FAF 26             2741                                             add             a,@r0                   ;a=bufind+m
                             arker
0FB0 F9             2742                                             mov             r1,a
0FB1 09             2743                                             inc             r1
0FB2 873C           2744                                             mov             savba,@r1
                    2745     ;;;;;;;;;;;;;;;;
0FB4 78B2           2746                       mov           r0,#marker      ;курсор справа  ?
0FB6 E53B           2747                             mov             a,movrig
0FB8 C3             2748                             clr             c
0FB9 96             2749                             subb    a,@r0
0FBA 6006           2750                             jz         equ1l
0FBC E53B           2751                             mov             a,movrig;уст в правую позицию
0FBE F6             2752                             mov             @r0,a
0FBF 020000   F     2753                             jmp             outF;goto7                                         
                                   
0FC2 E53A           2754     equ1l:          mov             a,movleft;уст в левую позицию
0FC4 F6             2755                             mov             @r0,a   
0FC5 020000   F     2756                             jmp             outF;goto7
                    2757                     
                    2758     
0FC8 B63102         2759     go31l:          cjne    @r0,#31h,go41l
0FCB 80D8           2760                             jmp             rigblo
0FCD B6410B         2761     go41l:          cjne    @r0,#41h,norig2
0FD0 80D3           2762                             jmp             rigblo
                    2763     
0FD2 75B0FD         2764     llev2:          mov             p3,#0fdh
0FD5 20B6A9         2765                             jb              p3.6,loutF
0FD8 020000   F     2766                             jmp             labelL1
                    2767     
                    2768     ;->
0FDB C3             2769     norig2:    clr          c               ;32,33,34,42
0FDC 7431           2770                             mov             a,#31h
0FDE 96             2771                             subb    a,@r0
0FDF 50A0           2772                             jnc             loutF
0FE1 75B0FB         2773     rigblok:        mov             p3,#0fbh  ;32,33,34,42
0FE4 20B626         2774                             jb              p3.6,lev2go
0FE7                2775     labelN: 
                    2776                             ;                               29.12.06
                    2777     ;;;;;;;;;;;;;;;;;;
                    2778     ;необходимо не портить цифру в следуюем справа знакоместе
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    44

                    2779     ;т е сохранить ее в ячейке для мигания в противном случае
                    2780     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2781     ;       знакоместа
0FE7 78B2           2782                                             mov             r0,#marker
0FE9 7440           2783                                     mov             a,#bufind
0FEB 26             2784                                             add             a,@r0                   ;a=bufind+m
                             arker
0FEC F9             2785                                             mov             r1,a
0FED 09             2786                                             inc             r1
0FEE 873C           2787                                             mov             savba,@r1
                    2788     ;;;;;;;;;;;;;;;;;;;
0FF0 78B2           2789                             mov             r0,#marker      ;курсор справа  ?
0FF2 E53B           2790                             mov             a,movrig
0FF4 C3             2791                             clr             c
0FF5 96             2792                             subb    a,@r0
0FF6 7006           2793                             jnz        noequ1
0FF8 E53A           2794                             mov             a,movleft;уст в крайнюю левую позицию
0FFA F6             2795                             mov             @r0,a
0FFB 020000   F     2796                             jmp             outF
0FFE                2797     noequ1: ;29.12.06
                    2798     ;;;;;;;;;;;;;;;;;;
                    2799                             ;восстан знакоместо при мигании
                    2800                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
0FFE 78B2           2801                                     mov             r0,#marker
1000 7440           2802                                     mov             a,#bufind
1002 26             2803                                     add             a,@r0                   ;a=bufind+marker
1003 F9             2804                                     mov             r1,a
                    2805                                     ;mov            @r1,savba
1004 09             2806                                     inc             r1
1005 873C           2807                                     mov             savba,@r1
                    2808     ;;;;;;;;;;;;;;;;        
1007 120000   F     2809                             call    marri;уст сдвиг в правую        позицию
100A 020000   F     2810                             jmp             outF
100D 75B0FD         2811     lev2go:         mov             p3,#0fdh
1010 30B603         2812                             jnb             p3.6,rlabelL1
1013 020000   F     2813                             jmp             outF
                    2814     
1016 020000   F     2815     rlabelL1:       jmp             labelL1
1019                2816     nnmemb:
1019                2817     norim6:    ;kn menu
1019                2818     out6:           
1019 D007           2819                                     pop             rr7     
101B D006           2820                                     pop             rr6
101D D005           2821                                     pop             rr5
101F D004           2822                                     pop             rr4
1021 D003           2823                                     pop             rr3
1023 D002           2824                                     pop             rr2
1025 D001           2825                                     pop             rr1                             
1027 D000           2826                                     pop             rr0
1029 D0D0           2827                                     pop             psw
102B D0E0           2828                                     pop             acc
                    2829     ;clr            bitmig
102D 75E730         2830                                mov          EIE2,#30H
1030 E5AD           2831                                mov          a,P3IF
1032 54BF           2832                                     anl             a,#0bfh
1034 F5AD           2833                                     mov             P3IF,a
1036 75B0C0         2834                                     mov             P3,#0c0h
1039 C219           2835     clr             bitmig
103B 32             2836                             reti
                    2837     
103C 020000   F     2838     rknMEM:                 jmp             knMEM
103F 020000   F     2839     knKMP:             jmp          out7
1042 020000   F     2840     rout7:                  jmp             out7    
1045 020000   F     2841     rlabelH:                jmp             labelH
1048 020000   F     2842     rknNUL:         jmp             knNUL
104B 020000   F     2843     rknleft:                jmp             knleft
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    45

104E                2844     keyb2:  ;IE7
104E 75E700         2845                                     mov             EIE2,#00H
1051 C0E0           2846                                     push    acc
1053 C0D0           2847                                     push    psw
1055 C000           2848                                     push    rr0
1057 C001           2849                                     push    rr1
1059 C002           2850                                     push    rr2
105B C003           2851                                     push    rr3
105D C004           2852                                     push    rr4
105F C005           2853                                     push    rr5
1061 C006           2854                                     push    rr6
1063 C007           2855                                     push    rr7
1065 C082           2856                                     push    dpl
1067 C083           2857                                     push    dph
                    2858                                     ;clr            bitmig
                    2859                       ;;;;;;;;;;;;;;
1069 120000   F     2860                               call  z_01s   ;0,1s
                    2861                               ;восстан знакоместо при мигании
                    2862                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
106C 78B2           2863                                     mov             r0,#marker
106E 7440           2864                                     mov             a,#bufind
1070 26             2865                                     add             a,@r0                   ;a=bufind+marker
1071 F9             2866                                     mov             r1,a
1072 A73C           2867                                     mov             @r1,savba
                    2868                                     ;;;;;;;;;;;
                    2869     
1074 E5B0           2870                             mov             a,p3
1076 20E7C9         2871                                     jb              acc.7,rout7
1079 E5B0           2872                                     mov             a,p3
107B 74FF           2873                                     mov             a,#0ffh         ; p3.(5-0)<-3f
107D F5B0           2874                                     mov             p3,a
107F E5B0           2875                                     mov             a,p3
1081 30E7BE         2876                                     jnb             acc.7,rout7             ;error
1084 3004BE         2877                                     jnb             bitizm,rlabelH
1087 75B0FE         2878                                     mov             p3,#0feh                ;реж IZM
108A E5B0           2879                                     mov             a,p3
108C 30E7B9         2880                                     jnb             acc.7,rknNUL
108F 75B0FD         2881                                     mov             p3,#0fdh
1092 E5B0           2882                                     mov             a,p3
1094 30E7A8         2883                                     jnb             acc.7,knKMP
1097 75B0FB         2884                                     mov             p3,#0fbh
109A E5B0           2885                                     mov             a,p3
109C 30E7AC         2886                                     jnb             acc.7,rknleft
109F 75B0F7         2887                                     mov             p3,#0f7h
10A2 E5B0           2888                                     mov             a,p3
10A4 30E755         2889                                     jnb             acc.7,knAVP
10A7 75B0EF         2890                                 mov         p3,#0efh
10AA E5B0           2891                                     mov             a,p3
10AC 30E78D         2892                                     jnb             acc.7,rknMEM
10AF 75B0DF         2893                                     mov             p3,#0dfh
10B2 E5B0           2894                                     mov             a,p3    
10B4 30E722         2895                                     jnb             acc.7,knmenu
10B7                2896     an_t7:             ;;;;;;;;;;;;
                    2897                     
                    2898     ;       clr             c
                    2899     ;       mov             r1,#parN
                    2900     ;
                    2901     ;                       mov             r0,#diap
                    2902     ;                       mov             a,#6            
                    2903     ;                       subb    a,@r0
                    2904     ;                       jnc             goto7           ;         ;10-2..10-8
                    2905                               
                    2906     ;                       mov             @r1,#2          ;10-9..10-11            
                    2907                             
                    2908                             ;;;;;;;;;;;;
10B7 799A           2909     goto7:                  mov             r1,#parT
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    46

10B9 783D           2910                                     mov             r0,#chkl
10BB B70108         2911                                     cjne    @r1,#1,not1_7
10BE 7600           2912                                     mov             @r0,#00
10C0 08             2913                                     inc             r0
10C1 7602           2914                                     mov             @r0,#2
10C3 020000   F     2915                                     jmp             out7
                    2916                             
                    2917     
10C6 B70208         2918     not1_7:                 cjne    @r1,#2,not2_7
10C9 760E           2919                                             mov             @r0,#0eh;00
10CB 08             2920                                     inc             r0
10CC 7638           2921                                     mov             @r0,#38h;20
10CE 020000   F     2922                                     jmp             out7
10D1 7600           2923     not2_7:                 mov             @r0,#00
10D3 08             2924                                     inc             r0
10D4 76C8           2925                                     mov             @r0,#200
10D6 020000   F     2926                                     jmp             out7
                    2927     
                    2928     
10D9 201511         2929     knmenu: jb              biteizm,menuoff
10DC C204           2930                              clr            bitizm          ;off IZM
10DE D211           2931                                     setb            bitmenu
10E0 900000   F     2932                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
10E3 120000   F     2933                                     call    lotext
                    2934                                     
10E6 78B1           2935                                     mov             r0,#vichR
10E8 7611           2936                                     mov             @r0,#11h
10EA 020000   F     2937                                     jmp             onmem11
10ED                2938     menuoff:
10ED 78B1           2939                                     mov             r0,#vichR
10EF 7600           2940                                     mov             @r0,#00
10F1 C215           2941                                     clr             biteizm
10F3 120000   F     2942                                     call    loadus
10F6 75EF10         2943                                     mov             RSTSRC,#10h
                    2944                                     ;jmp            begin;onmem11
                    2945     
10F9 020000   F     2946     rendkalib:              jmp             endkalib
                    2947     
10FC 2012FA         2948     knAVP:  jb              bitklb,rendkalib        
10FF 200505         2949                                     jb              bitavp,meavp
1102 D205           2950                                     setb    bitavp
1104 020000   F     2951                                     jmp             onmem11
1107 C205           2952     meavp:                  clr             bitavp
1109 020000   F     2953                                     jmp             onmem11
                    2954     
110C 201207         2955     knleft: jb              bitklb,lefkl
                    2956                                     ;;;;;;;;
110F 79AE           2957                                mov          r1,#diap
1111 07             2958                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1112 B70A03         2959                                     cjne    @r1,#0ah,nodi6
1115 17             2960                                     dec             @r1
1116 809F           2961     lefkl:  jmp             an_t7
                    2962     
1118                2963     nodi6:             ;    cjne    @r1,#0,an_t7
1118 120000   F     2964                                      call    clmassix
111B 78B3           2965                                     mov             r0,#summa
111D 120000   F     2966                                     call    clear4  
1120 786A           2967                                     mov             r0,#rez_A0
1122 120000   F     2968                                     call    clear4  
1125 120000   F     2969                                     call    loadUS
1128 808D           2970                                jmp          an_t7
                    2971     
112A 200F0F         2972     knNUL:                  jb              bitnul,ybnul
112D D20F           2973                                     setb    bitnul
112F 789C           2974                                     mov             r0,#rez_A3      ;A3
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    47

1131 120000   F     2975                                     call    resar2
1134 786A           2976                                     mov             r0,#rez_A0      
1136 120000   F     2977                                     call    saver2;A0<-A3
1139 020000   F     2978                                     jmp             goto7;an_t7
                    2979     
113C C20F           2980     ybnul:                  clr             bitnul
113E 900000   F     2981                                      mov    DPTR,#ch0 
1141 120000   F     2982                                     CALL   ldc_long          ; r2..r5 <-- 0
1144 786A           2983                                     mov             r0,#rez_A0      ;A0=0
1146 120000   F     2984                                     call    saver2
1149 020000   F     2985                                     jmp             goto7;an_t7
                    2986     
114C 30101E         2987     labelH:                 jnb             bitt2,nolah
114F 75B0FB         2988                                     mov             p3,#0fbh   ;вход в режим изм Т
1152 79B7           2989                                     mov             r1,#load;parT
1154 20B70D         2990                                     jb              p3.7,rhnot1
1157 B70003         2991                                     cjne    @r1,#0,inct;
115A 020000   F     2992                                     jmp             out7;hyest6
115D 17             2993     inct:                   dec             @r1                     ;Tизм+1
                    2994                             
115E 120000   F     2995                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
1161                2996     hnot2:          ;       call    ind
1161 020000   F     2997                                     jmp             out7
                    2998     
1164 020000   F     2999      rhnot1:                jmp             hnot1
                    3000      ;rnoviR:       jmp             noviR
1167 020000   F     3001      rlabelK:       jmp             labelK
116A 020000   F     3002      rlabelI:       jmp             labelI          
                    3003      ;;;;;;;;;;;;;;;;;;;
116D 3014F7         3004     nolah:          jnb             bitvich,rlabelK 
                    3005                             ;;;;;;
                    3006                             ;увеличить счетчик задержки клавиатуры
                    3007                     ;;              mov             r0,#chkl
                    3008                     ;;              mov             @r0,#27h
                    3009                     ;;              inc             r0
                    3010                     ;;              mov             @r0,#10h
                    3011                             ;;;;;;
                    3012     
1170 78B1           3013                             mov             r0,#vichR
1172 B61128         3014                             cjne    @r0,#11h,rhnor11;rlabelI;;
1175 75B0FB         3015                             mov             p3,#0fbh   ;<-
1178 20B728         3016                             jb              p3.7,noh37;routF
117B B6110B         3017                     cjne    @r0,#11h,hr12
117E 7613           3018                             mov             @r0,#13h        ;11= вычислить
1180 900000   F     3019                             mov             dptr,#teOUT;teVICH
1183 120000   F     3020     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1186 020000   F     3021                             jmp             goto7;outF
1189 B61207         3022     hr12:           cjne    @r0,#12h,hnor12
118C 7611           3023     lovich:         mov             @r0,#11h
118E 900000   F     3024                             mov             dptr,#teVICH
1191 80F0           3025                             jmp             hvi1113         
1193 B61307         3026     hnor12:         cjne    @r0,#13h,rhnor11
1196 7612           3027     loizmk:         mov             @r0,#12h
1198 900000   F     3028                             mov             dptr,#teIZMK    ;       изм конст
                    3029                                        
119B 80E6           3030                             jmp             hvi1113
                    3031     
119D 803E           3032     rhnor11:                jmp             hnor11
                    3033     
119F 8049           3034     rvvizko:                jmp             vvizko
11A1 80FE           3035     toutF:                  jmp     toutF
                    3036     
11A3 75B0F7         3037     noh37:          mov             p3,#0f7h
11A6 20B7F8         3038                             jb              p3.7,toutF
11A9 B611F3         3039                             cjne    @r0,#11h,rvvizko
11AC D206           3040                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    48

11AE D204           3041              setb   bitizm
11B0 020000   F     3042     routF:          jmp             goto7;outF
                    3043     
                    3044     
                    3045     
11B3 80EE           3046     rnoh37:         jmp             noh37
                    3047     
11B5 B6120D         3048     norr11:         cjne    @r0,#12h,norr12
11B8 75B0FB         3049                             mov             p3,#0fbh   ;<-
11BB 20B7F5         3050                             jb              p3.7,rnoh37;routF
11BE 760B           3051                             mov             @r0,#11;12->11
11C0 80CA           3052                             jmp             lovich
                    3053     
11C2 020000   F     3054     labelI2:                jmp             labelI
11C5 B613FA         3055     norr12:         cjne    @r0,#13h,labelI2
11C8 75B0FB         3056                             mov             p3,#0fbh   ;<-
11CB 20B7E5         3057                             jb              p3.7,rnoh37
11CE 7612           3058                             mov             @r0,#12h
11D0 80C4           3059                             jmp             loizmk
                    3060                             ;;;;
11D2 C214           3061     clrvich:                clr             bitvich
11D4 D204           3062                             setb    bitizm
11D6 A8B2           3063                             mov             r0,marker
11D8 76FF           3064                             mov             @r0,#0ffh
11DA 020000   F     3065                              jmp    goto7;  routF
                    3066     
                    3067     ;rnoh37:                jmp             noh37
                    3068      ;ввод изм конст
11DD B612E5         3069     hnor11:         cjne    @r0,#12h,norr12;clrvich
11E0 75B0FB         3070                              mov            p3,#0fbh   
11E3 20B7CD         3071                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
11E6 7611           3072                             mov             @r0,#11h
11E8 80A2           3073                             jmp             lovich
                    3074     
11EA 78B1           3075     vvizko:         mov             r0,#vichR
11EC E6             3076                             mov             a,@r0
                    3077                     ;       cjne    @r0,#12h,clrvich
11ED B412E2         3078                             cjne    a,#12h,clrvich
11F0 7621           3079                             mov             @r0,#21h                ;изм конст->a=+0000     (vv
                             od)
11F2 78B2           3080                             mov             r0,#marker
11F4 7604           3081                             mov             @r0,#4;9
11F6 753A04         3082                             mov             movleft,#4
11F9 753B07         3083                             mov             movrig,#7
11FC 900000   F     3084                             mov             dptr,#teAequ0
11FF 120000   F     3085                             call    lotext
                    3086                             
1202 120000   F     3087                             call    outA
1205 434B08         3088                             orl             bufind+11,#08h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3089                             
1208 020000   F     3090                             jmp             goto7;routF
                    3091     ;hnor13:                jmp             hnor12          
120B B6210C         3092     izchi:          cjne    @r0,#21h,tlabelI
                    3093     ;<- при вводе цифр А                            
                    3094                     ;        mov            p3,#0fbh   
                    3095                     ;       jnb             p3.7,li21
                    3096             ;clr            bitmig
120E 78B2           3097                             mov             r0,#marker
1210 16             3098                             dec             @r0
1211 B60201         3099                             cjne    @r0,#2,li21
1214 06             3100                             inc             @r0;marker=3 +/-
1215 C219           3101     li21:           clr             bitmig
1217 020000   F     3102                             jmp             goto7;outF
                    3103     
121A 020000   F     3104     tlabelI:        jmp             labelI
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    49

                    3105     
                    3106     ;                       load    0 1 2 3 4 5             
121D 06050403       3107     sootv:          db              6,5,4,3,2,1;parT
1221 0201                    
                    3108     ;
                    3109     
                    3110     ;нажата кн ввод при наборе Т
1223 75B0F7         3111     hnot1:                  mov             p3,#0f7h
1226 20B787         3112                                     jb              p3.7,routF;out7
1229 B70541         3113                                     cjne    @r1,#5,nohnot1  ;r1=load
122C 794A           3114                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
122E E7             3115                                     mov             a,@r1
122F 4440           3116                                     orl             a,#40h;.6
1231 F7             3117                                     mov             @r1,a
1232 8000           3118                                     jmp             loadb
                    3119                                     
                    3120                                     
1234 789A           3121     loadB:                  mov             r0,#parT
1236 900000   F     3122                                     mov             dptr,#sootv
1239 79B7           3123                                     mov             r1,#load                
123B E7             3124                                     mov             a,@r1;load
123C 93             3125                                     movc    a,@a+dptr
123D F6             3126                                     mov             @r0,a
123E 120000   F     3127                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3128                                      ;r4=b1 r5=b2
1241 120000   F     3129                                     call    iniacp;инициализация АЦП
1244 120000   F     3130                                     call    loadUS
1247 120000   F     3131                                     call    clmassix        
124A D204           3132                                     setb    bitizm
124C C210           3133                                     clr             bitt2
124E C3             3134                                      clr            c
124F 789A           3135                                  mov                r0,#parT
1251 79AF           3136                                      mov            r1,#parN
1253 7402           3137                                  mov                a,#2
1255 96             3138                                 subb                a,@r0
1256 5005           3139                                 jnc                 loadB2
1258 7701           3140                                     mov             @r1,#1;N=1         ;T>=2
125A 020000   F     3141     bout7:                  jmp             goto7;out7
                    3142     
125D B702FA         3143     loadB2:                 cjne    @r1,#2,bout7
1260 7702           3144                                     mov             @r1,#2;N=2
1262 020000   F     3145                                     jmp             goto7;out7
1265                3146     nohnot2:                ;в буфере 1 зажечь <=0,1s
1265 794A           3147                                     mov             r1,#bufind+10
1267 E7             3148                                     mov             a,@r1
1268 4410           3149                                     orl             a,#10h;.4
126A F7             3150                                     mov             @r1,a
126B 80C7           3151                                     jmp             loadB
126D B704F5         3152     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
1270 794A           3153                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1272 E7             3154                                     mov             a,@r1
1273 4420           3155                                     orl             a,#20h;.5
1275 F7             3156                                     mov             @r1,a
1276 80BC           3157                                     jmp             loadB
                    3158     
                    3159     ;кнопка ПАМЯТЬ
1278 C204           3160     knMEM:                  clr             bitizm          ;off IZM
127A 900000   F     3161                                     mov             dptr,#teCLE
127D 120000   F     3162                                     call    lotext    ;в буф2 записать ОЧИСТКА
1280 D20B           3163                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1282 78B0           3164                                     mov             r0,#level
1284 7611           3165                                     mov             @r0,#11h
1286 783D           3166     onmem11:                mov             r0,#chkl
1288 7603           3167                                     mov             @r0,#03
128A 08             3168                                     inc             r0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    50

128B 76E8           3169                                     mov             @r0,#0e8h               ;1000
128D 020000   F     3170                                     jmp             out7;goto7;out7
                    3171     
1290 020000   F     3172     rnomemk:                jmp             nomemk          ;
1293                3173     labelK:
                    3174     
                    3175     ;;;;;;;;;;;;
1293 300BFA         3176                               jnb           bitmem,rnomemk
1296 78B0           3177                               mov           r0,#level
1298 B61132         3178                               cjne          @r0,#11h,klev1;nome11
129B 75B0FB         3179     lefmem11:         mov           p3,#0fbh
129E E5B0           3180                               mov           a,p3
12A0 20E70E         3181                               jb            acc.7,rkvvod0
12A3 B6110E         3182                               cjne          @r0,#11h,locle          ;<-memory
12A6 7613           3183                               mov           @r0,#13h
12A8 900000   F     3184     lolist:           mov           dptr,#teLIST
12AB 120000   F     3185                               call          lotext           ;ПРОСМОТР
12AE 020000   F     3186                               jmp   goto7;  outF
                    3187     
12B1 020000   F     3188     rkvvod0:        jmp             kvvod0
                    3189     
                    3190     
12B4 B6120B         3191     locle:          cjne            @r0,#12h,lowr           ;<-memory
12B7 7611           3192                               mov           @r0,#11h                   ;ОЧИСТКА
12B9 900000   F     3193     loadcle:          mov           dptr,#teCLE
12BC 120000   F     3194                               call          lotext
12BF 020000   F     3195                               jmp           goto7;outF
12C2 7612           3196      lowr:          mov             @r0,#12h
12C4 900000   F     3197      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
12C7 120000   F     3198                             call    lotext
12CA 020000   F     3199                             jmp             goto7;outF
12CD B61202         3200      klev1:          cjne   @r0,#12h,klev2
12D0 80C9           3201                             jmp             lefmem11
12D2 B61302         3202     klev2:           cjne   @r0,#13h,klev22   ;11-13 нет
12D5 80C4           3203                             jmp             lefmem11
                    3204     
                    3205     ;<- vvod на более низких уровнях
12D7 B62114         3206     klev22:         cjne    @r0,#21h,klev21
12DA 75B0FB         3207     lev220:         mov             p3,#0fbh
12DD 20B72F         3208                             jb              p3.7,kgo23
12E0 B62146         3209                             cjne    @r0,#21h,kfull
12E3 7622           3210                             mov             @r0,#22h
12E5 900000   F     3211                             mov             dptr,#teBL
12E8 120000   F     3212                             call    lotext
12EB 020000   F     3213                             jmp             goto7;outF
                    3214                                     
12EE B62208         3215     klev21:         cjne    @r0,#22h,klev23
12F1 80E7           3216                             jmp             lev220
                    3217     
12F3 020000   F     3218     rlabL2:         jmp             labL2
12F6 020000   F     3219     rlabM:          jmp             labM
                    3220     
12F9 B623FA         3221     klev23:          cjne   @r0,#23h,rlabM
12FC 75B0FB         3222                              mov    p3,#0fbh
12FF 20B7F1         3223                              jb             p3.7,rlabL2
1302 75B0F7         3224                              mov    p3,#0f7h
1305 20B74F         3225                              jb             p3.7,ddoutf
                    3226                              ;очистить блок памяти с набранным номером
1308 C20B           3227                              clr    bitmem  ;сбр признак памяти 
130A D204           3228                              setb   bitizm
130C 020000   F     3229                              jmp    goto7;outF
                    3230                             
130F 75B0F7         3231     kgo23:           mov    p3,#0f7h
1312 20B742         3232                             jb              p3.7,ddoutf
1315 B62107         3233                             cjne    @r0,#21h,go23no
                    3234                             ;очистить память
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    51

1318 C20B           3235                             clr             bitmem
131A D204           3236                             setb    bitizm
131C 020000   F     3237                             jmp             goto7;outF
                    3238     
131F 7623           3239     go23no:    mov          @r0,#23h
1321 753B08         3240                                             mov                     movrig,#8
1324 753A07         3241                                             mov             movleft,#7
1327 8038           3242                             jmp             loblok;БЛОК 00
                    3243     
1329 7621           3244     kfull:          mov             @r0,#21h
132B 8024           3245                             jmp             gofull
                    3246                             
                    3247                                             
132D 020000   F     3248     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3249                             
1330 75B0FB         3250     nome11:           mov           p3,#0fbh
1333 E5B0           3251                               mov           a,p3
1335 20E70C         3252                               jb            acc.7,kvvod0
1338 B61205         3253                               cjne          @r0,#12h,mem12no        
133B 7611           3254                               mov           @r0,#11h                ;ОЧИСТКА
133D 020000   F     3255                               jmp            loadcle
                    3256     
1340                3257     mem12no:        ;cjne           @r0,#13h,lowr           
1340 7612           3258                               mov           @r0,#12h                   ;
1342 8080           3259                               jmp           lowr1                     ;ЗАПИСЬ
                    3260     
1344 75B0F7         3261     kvvod0:           mov           p3,#0f7h
1347 20B70D         3262                               jb            p3.7,ddoutf
134A 78B0           3263                               mov           r0,#level
134C B6110D         3264                               cjne          @r0,#11h,mvv11
134F 7621           3265                               mov           @r0,#21h                ;ПОЛНАЯ
1351 900000   F     3266     gofull:           mov           dptr,#teFULL
1354 120000   F     3267                               call          lotext
1357 801F           3268     ddoutf:         jmp             mlabL2  ;<-
                    3269     
1359 020000   F     3270     jmp             goto7
                    3271     
135C B61215         3272     mvv11:            cjne          @r0,#12h,mvv12
135F 7631           3273                                     mov             @r0,#31h
1361 900000   F     3274     loblok:                 mov             dptr,#teBLOK;БЛОК 00
1364 120000   F     3275                                     call    lotext
1367 78B2           3276                                     mov             r0,#marker
1369 7607           3277                                     mov             @r0,#7
136B 753B08         3278                                     mov             movrig,#8
136E 753A07         3279                                     mov             movleft,#7
1371 020000   F     3280                                     jmp             goto7;outF
1374 7641           3281     mvv12:                  mov             @r0,#41h                ; БЛОК 00
1376 80E9           3282                                     jmp             loblok
                    3283     
                    3284     
                    3285     
1378                3286     mlabL2:         ;jmp            labL2
                    3287                                             ;  уст курсор в правую позицию 
                    3288                                     ;                               29.12.06
                    3289     ;;;;;;;;;;;;;;;;;;
                    3290     ;необходимо не портить цифру в следуюем справа знакоместе
                    3291     ;т е сохранить ее в ячейке для мигания в противном случае
                    3292     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3293     ;       знакоместа
1378 78B2           3294                                             mov             r0,#marker
137A 7440           3295                                     mov             a,#bufind
137C 26             3296                                             add             a,@r0                   ;a=bufind+m
                             arker
137D F9             3297                                             mov             r1,a
137E 09             3298                                             inc             r1
137F 873C           3299                                             mov             savba,@r1
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    52

                    3300     ;;;;;;;;;;;;;;;;
1381 78B2           3301                       mov           r0,#marker      ;курсор справа  ?
1383 E53B           3302                             mov             a,movrig
1385 C3             3303                             clr             c
1386 96             3304                             subb    a,@r0
1387 6006           3305                             jz         equ2l
1389 E53B           3306                             mov             a,movrig;уст в правую позицию
138B F6             3307                             mov             @r0,a
                    3308     ;                       lool
138C 020000   F     3309                             jmp             goto7                                            
138F E53A           3310     equ2l:          mov             a,movleft;уст в левую позицию
1391 F6             3311                             mov             @r0,a   
1392 020000   F     3312                             jmp             goto7
                    3313                     
                    3314     
1395 B63137         3315     labM:                   cjne    @r0,#31h,nom31
1398 75B0FB         3316                                     mov             p3,#0fbh
139B 30B7DA         3317                                     jnb             p3.7,mlabL2
139E 75B0F7         3318                                mov          p3,#0f7h
13A1 20B7B3         3319                                jb           p3.7,ddoutf
                    3320                                
13A4 7632           3321                                mov          @r0,#32h
                    3322                                     ;       считать с индикатора  
13A6 7F0A           3323                                     mov             r7,#10
13A8 7853           3324                                     mov             r0,#adec
13AA 120000   F     3325                                     call    clearN
13AD 120000   F     3326                                     call    upak2                   
13B0 784F           3327                                     mov             r0,#abin
13B2 7953           3328                                     mov             r1,#adec                        ;мл        
                              ст
13B4 120000   F     3329                                     call    decbin                  ;abin..abin+3 (hex)
                    3330                                     ;call   loadr2                  ;r2..r5
                    3331                                     ;call   altof                   ;r2..r5->int
13B7 78C4           3332                                mov          r0,#nblok       ;   сохранить
13B9 E54F           3333                                mov          a,abin          ;;мл
13BB F6             3334                                mov          @r0,a
13BC 900000   F     3335                                mov          dptr,#tebBL;НАЧ БЛОК 000
13BF 120000   F     3336                                call         lotext
13C2 78B2           3337                                mov          r0,#marker
13C4 7607           3338                                mov          @r0,#7
13C6 753B09         3339                                mov          movrig,#9
13C9 753A07         3340                                mov          movleft,#7
13CC 020000   F     3341     rgoto7:            jmp     goto7;outF
                    3342     
13CF B6324C         3343     nom31:             cjne         @r0,#32h,nom32
13D2 75B0FB         3344                                     mov             p3,#0fbh
13D5 20B714         3345                                     jb              p3.7,no31n
                    3346                                     
13D8 78B2           3347     lefcur:         mov             r0,#marker      ;курсор слева?
13DA E53A           3348                             mov             a,movleft
13DC C3             3349                             clr             c
13DD 96             3350                             subb    a,@r0
13DE 7006           3351                             jnz        noequ2
13E0 E53B           3352                             mov             a,movrig
13E2 F6             3353                             mov             @r0,a;уст в крайнюю правую позицию
13E3 020000   F     3354                             jmp             goto7
13E6 120000   F     3355     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
13E9 020000   F     3356                             jmp        goto7
                    3357                                     
13EC 75B0F7         3358     no31n:             mov          p3,#0f7h
13EF 20B7DA         3359                                     jb              p3.7,rgoto7
13F2 7633           3360                                     mov             @r0,#33h
                    3361                                     ;запомнить номер ячейки блока
13F4 7F0A           3362                                             mov             r7,#10
13F6 7853           3363                                     mov             r0,#adec
13F8 120000   F     3364                                     call    clearN
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    53

13FB 120000   F     3365                                     call    upak3                   
13FE 784F           3366                                     mov             r0,#abin
1400 7953           3367                                     mov             r1,#adec                        ;мл        
                              ст
1402 120000   F     3368                                     call    decbin                  ;abin..abin+3 (hex)
1405 120000   F     3369                                     call    loadr2                  ;r2..r5
1408 120402         3370                                     call    altof                   ;r2..r5->int
                    3371     
140B 900000   F     3372                                      mov            dptr,#teeBL;КОН БЛОК 000
140E 120000   F     3373                                call         lotext
1411 78B2           3374                                mov          r0,#marker
1413 7607           3375                                mov          @r0,#7
1415 753B09         3376                                mov          movrig,#9
1418 753A07         3377                                mov          movleft,#7
141B 020000   F     3378                                jmp     goto7;
                    3379     
                    3380     
141E B63328         3381     nom32:           cjne           @r0,#33h,nom33
1421 75B0FB         3382                              mov            p3,#0fbh
1424 30B7B1         3383                              jnb            p3.7,lefcur
1427 75B0F7         3384                              mov            p3,#0f7h
142A 20B79F         3385                              jb             p3.7,rgoto7
                    3386                              ;запомнить номер ячейки конца блока
142D 7634           3387                              mov    @r0,#34h
142F 7F0A           3388     INTn:                   mov             r7,#10
1431 7853           3389                                     mov             r0,#adec
1433 120000   F     3390                                     call    clearN
1436 120000   F     3391                                     call    upak3                   
1439 784F           3392                                     mov             r0,#abin
143B 7953           3393                                     mov             r1,#adec                        ;мл        
                              ст
143D 120000   F     3394                                     call    decbin                  ;abin..abin+3 (hex)
1440 120000   F     3395                                     call    loadr2                  ;r2..r5
1443 120402         3396                                     call    altof                   ;r2..r5->int
1446 020000   F     3397     dgoto7:                  jmp            goto7
                    3398     
1449 B63443         3399     nom33:          cjne            @r0,#34h,labelP
144C 75B0FB         3400                               mov           p3,#0fbh
144F 30B786         3401                              jnb            p3.7,lefcur
1452 75B0F7         3402                              mov            p3,#0f7h
1455 20B7EE         3403                              jb             p3.7,dgoto7
1458 76FF           3404                              mov            @r0,#0ffh
                    3405                              ;T1<-число на индикаторе
145A C20B           3406                              clr            bitmem            ;vvod КОН БЛ 000
145C D204           3407                              setb           bitizm
                    3408                                     
145E 020000   F     3409                             jmp        goto7
                    3410     
                    3411     ;обработка кнопки меню ввод
1461 30112B         3412     labelS:         jnb                     bitmenu,labelP
1464 78B1           3413                                             mov                     r0,#vichR
1466 7415           3414                                             mov                     a,#15h
1468 C3             3415                                             clr                     c
1469 96             3416                                             subb            a,@r0
146A 4021           3417                                             jc                      rme21_23
                    3418                             
146C 75B0FB         3419                                             mov                     p3,#0fbh
146F 20B727         3420                                             jb                      p3.7,vvodm11_15
1472 78B1           3421                                             mov                     r0,#vichR
1474 B61138         3422                                             cjne                    @r0,#11h,me11_15dec;<-
1477 7615           3423                                             mov                     @r0,#15h
1479 900000   F     3424                                             mov                     dptr,#teKALIB
147C 120000   F     3425                                             call            lotext
147F 020000   F     3426                                             jmp                     onmem11
1482 C211           3427     menuon:         clr             bitmenu                 ;off menu
1484 D204           3428                                             setb    bitizm
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    54

                    3429     
1486 78B1           3430                                     mov             r0,#vichR
1488 7600           3431                                     mov             @r0,#0
148A 020000   F     3432                                     jmp             onmem11
                    3433     
                    3434                                             ;;;;;
                    3435             
148D 807A           3436     rme21_23:               jmp             me21_23                         
                    3437     
148F                3438     labelP:
148F 783D           3439     label7: mov             r0,#chkl
1491 7604           3440                                     mov             @r0,#04;3
1493 08             3441                                     inc             r0
1494 76E8           3442                                     mov             @r0,#0e8h               ;1000
1496 020000   F     3443                                     jmp             out7;
                    3444     
1499 78B1           3445     vvodm11_15:     mov                     r0,#vichR;vvod
149B 75B0F7         3446                                                     mov                     p3,#0f7h
149E 20B7EE         3447                                             jb                      p3.7,LABELP;????
                    3448                                     
                    3449     
14A1 B61112         3450                                             cjne                    @r0,#11h,tome21
14A4 7621           3451                                             mov                     @r0,#21h;vvod
14A6 900000   F     3452                                             mov                     dptr,#teTE11
14A9 120000   F     3453                                             call            lotext
14AC 020000   F     3454                                             jmp                     onmem11
                    3455     
14AF 16             3456     me11_15dec:             dec             @r0                             ;<-
14B0 120000   F     3457     lokame1:        call            lomenu
14B3 020000   F     3458                                             jmp                     onmem11
                    3459     
14B6 B61206         3460     tome21:         cjne                    @r0,#12h,tome13
                    3461                                             ;вкл тест интерфейса
14B9 020000   F     3462                                             jmp             testrs;??????????
14BC 020000   F     3463                                             jmp                     onmem11
                    3464     
14BF B61324         3465     tome13:         cjne                    @r0,#13h,tome14
14C2 7631           3466                                             mov                     @r0,#31h
                    3467                                             
14C4 7A50           3468                                             mov                     r2,#50h                    
                                  ;57.6->19.2
14C6 7B2C           3469                                             mov                     r3,#2ch
14C8 120454         3470                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
14CB E508           3471                                             mov                     a,r8
14CD B4000B         3472                                             cjne            a,#00,skor19
14D0 900000   F     3473                                             mov                     dptr,#teS57_6;57,6
14D3 120000   F     3474                                             call            lotext
14D6 C213           3475                                             clr                     bitv19
                    3476     
14D8 020000   F     3477                                             jmp             onmem11
14DB 900000   F     3478     skor19:         mov                     dptr,#teS19_2
14DE 120000   F     3479                                             call            lotext
14E1 D213           3480                                             setb            bitv19
                    3481             
14E3 020000   F     3482                                             jmp                     onmem11
                    3483                                             
                    3484     
14E6 B6140E         3485     tome14:         cjne                    @r0,#14h,tome15
14E9 D204           3486                                             setb            bitizm
14EB 7881           3487                                             mov                     r0,#chavt
14ED 7600           3488                                             mov                     @r0,#0
14EF 08             3489                                             inc                     r0
14F0 7600           3490                                             mov                     @r0,#0
14F2 C211           3491     outmenu:        clr                     bitmenu
14F4 020000   F     3492                                             jmp                     out7
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    55

                    3493     
14F7 7651           3494     tome15:         mov                     @r0,#51h;ПАРОЛЬ 000
14F9 120000   F     3495                                             call            lomenu
14FC 78B2           3496                                             mov                     r0,#marker
14FE 7607           3497                                             mov                     @r0,#7
1500 753B09         3498                                             mov                     movrig,#9
1503 753A07         3499                                             mov                     movleft,#7
                    3500                                             ;setb           bitizm
1506 020000   F     3501                                             jmp                     onmem11
                    3502     
                    3503     
1509 78B1           3504     me21_23:        mov                     r0,#vichR               ;<-
150B 7423           3505                                             mov                     a,#23h
150D C3             3506                                             clr                     c
150E 96             3507                                             subb            a,@r0
150F 403D           3508                                             jc                      labelS1
1511 75B0FB         3509                                             mov                     p3,#0fbh
1514 20B718         3510                                             jb                      p3.7,vv21_23
1517 B6210B         3511                                             cjne            @r0,#21h,me21_23dec;-<
151A 7623           3512                                             mov                     @r0,#23h
151C 900000   F     3513                                             mov                     dptr,#teTE7
151F 120000   F     3514                                             call            lotext
1522 020000   F     3515                                             jmp                     onmem11
1525                3516     me21_23dec:     
1525 16             3517                                             dec                     @r0
1526 120000   F     3518                                             call            lomenu
1529 020000   F     3519                                             jmp                     onmem11
152C 020000   F     3520     onmem12:        jmp             outF    ;(ie7)                          
                    3521                                                     
152F 75B0F7         3522     vv21_23:        mov             p3,#0f7h                ;vvod
1532 20B7F7         3523                                             jb              p3.7,onmem12
1535 B6210C         3524                                             cjne            @r0,#21h,test22
                    3525                                             ;mov                    dptr,#tabt11;заслать ус 11А
1538 120000   F     3526     tests:          call            lotpus
153B D215           3527                                             setb            biteizm;запомнить режим ТИ
153D D204           3528                                             setb            bitizm
153F C211           3529                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1541 020000   F     3530                                             jmp                     onmem11
1544 B62202         3531     test22:         cjne            @r0,#22h,test23
                    3532                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1547 80EF           3533                                             jmp             tests   
1549                3534     test23:
                    3535                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1549 80ED           3536                                             jmp             tests   
154B 020000   F     3537     left_s:         jmp                     left_sk
154E B63149         3538     labelS1:        cjne            @r0,#31h,me_41
1551 75B0FB         3539                                             mov                     p3,#0fbh                   
                                  ;<-
1554 30B7F4         3540                                             jnb                     p3.7,left_s
1557 75B0F7         3541                                             mov                     p3,#0f7h
155A 20B7CF         3542                                             jb                      p3.7,onmem12
                    3543                                             ;запомнить признак установленной скорости в рпзу
                    3544     
                    3545     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3546     ;и запись во внешнее озу(0000h)
155D 7900           3547                                             mov             r1,#0                   ;
155F 7A50           3548                                     mov             r2,#50h
1561 7B00           3549                                     mov             r3,#00
1563 120499         3550                                     call    copyPP
                    3551                                     ;внести изменения во внешн озу
                    3552                                     ;KD=00 01 86 A0 (KD=1)
                    3553                                     ;кофф *100000 и переведенный в hex формат
                    3554                                     ;согласно адресов диапазонов и адресов яч вн озу 
1566 792C           3555                                     mov             r1,#2ch
1568 7400           3556                                     mov             a,#0;57,6
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    56

156A 301302         3557                                     jnb             bitv19,spwri
156D 7401           3558                                     mov             a,#1;19.6
156F F3             3559     spwri:  movx    @r1,a
                    3560     ;стереть страницу пап прогр 
1570 905000         3561                                     mov             dptr,#5000h
1573 7FFF           3562                                     mov             r7,#0ffh
1575 12043E         3563                                     call    cle256
                    3564     ;и запись в ячейки кофф памяти прогр (3000h) 
1578 7FFF           3565                                     mov             r7,#0ffh
157A 7900           3566                                     mov             r1,#0                           ;external r
                             am
157C 905000         3567                                     mov             dptr,#5000h
157F 120480         3568                                     call    wrpage
                    3569             
1582 201305         3570                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1585 758DF4         3571                                             mov                     TH1,#244                ;57
                             .6
1588 8003           3572                                             jmp                     outsko
158A 758DDC         3573     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
158D C211           3574     outsko:         clr             bitmenu
158F D204           3575                                             setb            bitizm
1591 020000   F     3576                                             jmp                     out7
                    3577     
1594 020000   F     3578     rlabels4:               jmp             labels4
1597 020000   F     3579     rlabelS13:      jmp             labelS13
                    3580     
159A B651F7         3581     me_41:          cjne            @r0,#51h,rlabels4
159D 75B0FB         3582                                             mov             p3,#0fbh;<-
15A0 30B7F4         3583                                             jnb             p3.7,rlabelS13
15A3 75B0F7         3584                                             mov             p3,#0f7h
15A6 20B76D         3585                                             jb              p3.7,vvmenu
                    3586                                             ;ввод пароля
                    3587                                             
                    3588     ;       считать с индикатора 
15A9 7F0E           3589                                     mov             r7,#14
15AB 784F           3590                                     mov             r0,#abin
15AD 120000   F     3591                                     call    clearN                  
                    3592                                     
                    3593     ;чтение номера байта с индикатора(3байта)
                    3594     ;bufind+3..bufind+9
                    3595     ;-  - - -
                    3596     ;- - - - - - - - - -
                    3597     ;adec..adec+9
                    3598     ;ст            мл
15B0 7849           3599                                     mov             r0,#bufind+9;
15B2 795C           3600                                     mov             r1,#adec+9
15B4 7F03           3601                                     mov             r7,#3;3bait
15B6 C3             3602     upav1:          clr             c
15B7 E6             3603                                     mov             a,@r0
15B8 9430           3604                                     subb    a,#30h
15BA F7             3605                                     mov             @r1,a
15BB 18             3606                                     dec             r0
15BC 19             3607                                     dec             r1
15BD DFF7           3608                                     djnz    r7,upav1;adec+7..adec+9
15BF 7A50           3609                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
15C1 7B28           3610                                             mov                     r3,#28h
15C3 120454         3611                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
15C6 800F           3612     jmp                     goparol
15C8 E508           3613                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
15CA B55A4C         3614                                     cjne            a,adec+7,parerr
15CD E509           3615                                     mov                     a,r9    
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    57

15CF B55B47         3616                                     cjne            a,adec+8,parerr
15D2 E50A           3617                                     mov                     a,r10
15D4 B55C42         3618                                     cjne            a,adec+9,parerr
                    3619                                     ;равны
15D7 78B1           3620     goparol:        mov             r0,#vichR               ;режим меню 52
15D9 7652           3621                                             mov             @r0,#52h                ;0000-n
15DB 900000   F     3622                                             mov             dptr,#teKD;00000-nA
15DE 120000   F     3623                                             call            lotext
                    3624                                             ;;;;;;;;;
                    3625                                                     ;n(hex)->abin
15E1 120000   F     3626                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
15E4 2552           3627                                             add             a,abin+3
15E6 F552           3628                                             mov             abin+3,a
15E8 7853           3629                                             mov             r0,#adec
15EA 7952           3630                                             mov             r1,#abin+3      ;hex->10
15EC 120000   F     3631                                             call    bindec
15EF 855C48         3632                                             mov             bufind+8,adec+9
15F2 75472D         3633                                             mov             bufind+7,#2dh
                    3634     
15F5 79AE           3635                                             mov             r1,#diap
15F7 7848           3636                                             mov             r0,#bufind+8
15F9 E7             3637                                             mov             a,@r1
15FA B40807         3638                                             cjne    a,#8,nodi8k
15FD 7630           3639                                             mov             @r0,#30h                 ;10-10
15FF 18             3640                                             dec             r0
1600 7663           3641                                             mov             @r0,#63h;31h
1602 8008           3642                                             jmp             nodisk9
1604 B40905         3643     nodi8k:                         cjne    a,#9,nodisk9
                    3644                                     
1607 7631           3645                                             mov             @r0,#31h           ;10-11
1609 18             3646                                             dec             r0
160A 7663           3647                                             mov             @r0,#63h;31h
                    3648                                     
                    3649     
160C 78B2           3650     nodisk9:        mov                     r0,#marker
160E 7601           3651                                             mov                     @r0,#1
1610 753A01         3652                                             mov                     movleft,#1
1613 753B05         3653                                             mov                     movrig,#5
                    3654                                             
1616 020000   F     3655     vvmenu:         jmp             goto7
                    3656     
1619 753932         3657     parerr:         mov                     nuerr,#32h
161C 120000   F     3658                                             call            error
161F 120000   F     3659                                             call            ind
1622 120000   F     3660                                             call            z_1s
1625 C211           3661                                             clr                     bitmenu
1627 D204           3662                                             setb            bitizm
1629 78B2           3663                                             mov                     r0,#marker
162B 76FF           3664                                             mov                     @r0,#0ffh
162D 020000   F     3665                                             jmp             goto7
                    3666     
1630 30130B         3667     left_sk:                jnb                     bitv19,tosk19;<-
1633 900000   F     3668                                             mov                     dptr,#teS57_6;57,6
1636 120000   F     3669                                             call            lotext
1639 C213           3670                                             clr                     bitv19
163B 020000   F     3671                                             jmp             out7
163E 900000   F     3672     tosk19:         mov                     dptr,#teS19_2
1641 120000   F     3673                                             call            lotext
1644 D213           3674                                             setb            bitv19
1646 020000   F     3675                                             jmp             out7
                    3676     
1649                3677     labelS13:;<- MENU(ПАРОЛЬ 000)
                    3678             
                    3679     ;;;;;;;;;;;;;;;;;;
                    3680     ;необходимо не портить цифру в следуюем справа знакоместе
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    58

                    3681     ;т е сохранить ее в ячейке для мигания в противном случае
                    3682     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3683     ;       знакоместа
1649 78B2           3684                                     mov             r0,#marker
164B 7440           3685                                     mov             a,#bufind
164D 26             3686                                             add             a,@r0                   ;a=bufind+m
                             arker
164E F9             3687                                             mov             r1,a
164F 09             3688                                             inc             r1
1650 873C           3689                                             mov             savba,@r1
                    3690                                                     
1652 78B2           3691                                                     mov             r0,#marker
1654 16             3692                                                     dec             @r0                        
                                  
1655 C219           3693                                     clr             bitmig
1657 E53A           3694                                     mov                     a,movleft
1659 B6064F         3695                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
165C 06             3696                                     inc             @r0
165D 020000   F     3697                                             jmp             goto7
                    3698     ;;;;;;;
                    3699     
1660                3700     vvkali52:       ;введено значение для калибровки
                    3701                                             ;число на индикаторе ->Ak  (52h)
                    3702                                             ;       считать с индикатора 
1660 7F0E           3703                                     mov             r7,#14
1662 784F           3704                                     mov             r0,#abin
1664 120000   F     3705                                     call    clearN                  
                    3706                                     
                    3707     ;чтение номера байта с индикатора(3байта)
                    3708     ;bufind+1..bufind+5
                    3709     ;-  - - -
                    3710     ;- - - - - - - - - -
                    3711     ;adec..adec+9
                    3712     ;ст            мл
1667 7845           3713                                     mov             r0,#bufind+5;
1669 795C           3714                                     mov             r1,#adec+9
166B 7F05           3715                                     mov             r7,#5;5bait
166D C3             3716     upav2:          clr             c
166E E6             3717                                     mov             a,@r0
166F 9430           3718                                     subb    a,#30h
1671 F7             3719                                     mov             @r1,a
1672 18             3720                                     dec             r0
1673 19             3721                                     dec             r1
1674 DFF7           3722                                     djnz    r7,upav2;adec+7..adec+9
                    3723     
1676 784F           3724                                     mov             r0,#abin
1678 7953           3725                                     mov             r1,#adec                        ;мл        
                              ст
167A 120000   F     3726                                     call    decbin                  ;abin..abin+3 (hex)
167D 120000   F     3727                                     call    loadr2                  ;r2..r5
1680 120402         3728                                     call    altof   ;r2..r5->float
1683 900000   F     3729                                     mov     dptr,#ch_10;10
1686 120000   F     3730                                     call    ldc_ltemp                       ;r8..r11=8
1689 120203         3731                                     call    flmul
168C 78A4           3732                                     mov             r0,#rez_Ak
168E 120000   F     3733                                     call    saver2
1691 C211           3734                                             clr                     bitmenu
1693 D212           3735                                             setb            bitklb
                    3736                                             ;зажечь KMП
1695 D204           3737                                             setb            bitizm;бит калибровки уже установле
                             н
1697 78B2           3738                                             mov                     r0,#marker
1699 76FF           3739                                             mov                     @r0,#0ffh
169B 783D           3740                                     mov             r0,#chkl
169D 76FF           3741                                     mov             @r0,#0ffh
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    59

169F 08             3742                                     inc             r0
16A0 76FF           3743                                     mov             @r0,#0ffh;38h
16A2 120000   F     3744                                     call            z_1s
16A5 020000   F     3745                                     jmp             out7
                    3746     
                    3747     
16A8 020000   F     3748                                             jmp             goto7
                    3749                                              
16AB 020000   F     3750     onmem13:        jmp             goto7   ;(ie7)
                    3751     
16AE B642AF         3752     labels4:        cjne            @r0,#42h,vvkali52
16B1 75B0FB         3753                                             mov                     p3,#0fbh;<-
16B4 30B7F4         3754                                             jnb             p3.7,onmem13
16B7 75B0F7         3755                                             mov             p3,#0f7h;vvod
16BA 20B7EE         3756                                             jb              p3.7,onmem13
                    3757                                             
                    3758             
16BD 020000   F     3759     jmp             out7                                                    
                    3760     ;;;;;;;
16C0                3761     labelI:
16C0 75B0FE         3762                                     mov             p3,#0feh
16C3 E5B0           3763                                     mov             a,p3
16C5 20E703         3764                                     jb              acc.7,nopoint
                    3765                                     ;
16C8 020000   F     3766                                     jmp             goto7;out7
                    3767     
16CB 75B0FB         3768     nopoint:                mov             p3,#0fbh
16CE E5B0           3769                                     mov             a,p3
16D0 20E72C         3770                                     jb              acc.7,nopoin7
16D3 78B2           3771     labelS3:mov             r0,#marker
16D5 E53A           3772                                     mov             a,movleft
16D7 B40309         3773                                     cjne    a,#3,poina1
16DA B6030B         3774                                     cjne    @r0,#3,nomarl;26
                    3775                                     ;mov            @r0,#9
16DD E53B           3776     poina2: mov                     a,movrig                ;кн <- B=+00000
16DF F6             3777                                     mov                     @r0,a
16E0 020000   F     3778                                     jmp             goto7;  out7
                    3779     
16E3 B60402         3780     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
16E6 80F5           3781                                             jmp             poina2
                    3782     
                    3783     
16E8                3784     nomarl:                 ;                               29.12.06
                    3785     ;;;;;;;;;;;;;;;;;;
                    3786     ;необходимо не портить цифру в следуюем справа знакоместе
                    3787     ;т е сохранить ее в ячейке для мигания в противном случае
                    3788     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3789     ;       знакоместа
16E8 78B2           3790                                     mov             r0,#marker
16EA 7440           3791                                     mov             a,#bufind
16EC 26             3792                                             add             a,@r0                   ;a=bufind+m
                             arker
16ED F9             3793                                             mov             r1,a
16EE 09             3794                                             inc             r1
16EF 873C           3795                                             mov             savba,@r1
                    3796                                                     
16F1 78B2           3797                                                     mov             r0,#marker
16F3 16             3798                                                     dec             @r0                        
                                  
16F4 C219           3799                                     clr             bitmig
16F6 E53A           3800                                     mov                     a,movleft
16F8 B40349         3801                                     cjne            a,#3,poinA
16FB B60279         3802                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
16FE 06             3803     poin3:  inc             @r0
                    3804     ;нажат ввод А =000000 запомнить константу А
16FF 75B0F7         3805     nopoin7:           mov          p3,#0f7h
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    60

1702 E5B0           3806                                     mov             a,p3
1704 20E770         3807                                     jb              acc.7,out7
1707 78B1           3808                                     mov             r0,#vichR
1709 E6             3809                                     mov             a,@r0
170A B6213C         3810                                     cjne    @r0,#21h,no21p7
170D 7631           3811                                     mov             @r0,#31h
                    3812                             ;       считать с индикатора  упаковать в плавающий формат
                    3813                             ;   сохранить
170F 7F0E           3814                                     mov             r7,#14
1711 784F           3815                                     mov             r0,#abin
1713 120000   F     3816                                     call    clearN                  
1716 120000   F     3817                                     call    upakA
                    3818                                     
1719 784F           3819                                     mov             r0,#abin
171B 7953           3820                                     mov             r1,#adec                        ;мл        
                              ст
171D 120000   F     3821                                     call    decbin                  ;abin..abin+3 (hex)
1720 120000   F     3822                                     call    loadr2                  ;r2..r5
1723 120402         3823                                     call    altof                   ;r2..r5->int
1726 78BC           3824                                     mov             r0,#konstA
1728 120000   F     3825                                     call    saver2
                    3826     ;26
172B 78B2           3827                                     mov             r0,#marker
172D 7603           3828                                     mov             @r0,#3
172F 753B08         3829                                     mov             movrig,#8
1732 753A03         3830                                     mov             movleft,#3
1735 900000   F     3831                                     mov             dptr,#teBequ0
1738 120000   F     3832                                     call    lotext
173B 120000   F     3833                                     call            outB
173E 534BF7         3834                                     anl             bufind+11,#0f7h         ;гашение точки bufi
                             nd+7
1741 020000   F     3835                                     jmp             goto7;out7
                    3836     
1744 B60330         3837     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1747 80B5           3838                                             jmp             poin3
                    3839     
1749                3840     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    3841                             ;   сохранить
1749 7F0E           3842                                     mov             r7,#14
174B 784F           3843                                     mov             r0,#abin
174D 120000   F     3844                                     call    clearN                  
1750 120000   F     3845                                     call    upakB                   
1753 784F           3846                                     mov             r0,#abin
1755 7953           3847                                     mov             r1,#adec                        ;мл        
                              ст
1757 120000   F     3848                                     call    decbin                  ;abin..abin+3 (hex)
175A 120000   F     3849                                     call    loadr2                  ;r2..r5
175D 120402         3850                                     call    altof                   ;r2..r5->int
1760 301B04         3851                                     jnb             bitznB,pozB
1763 EA             3852                                     mov             a,r2
1764 4480           3853                                     orl             a,#80h
1766 FA             3854                                     mov             r2,a                    ;знак-
1767 78C0           3855     pozB:           mov             r0,#konstB
1769 120000   F     3856                                     call    saver2
                    3857     
176C 79B2           3858                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
176E 77FF           3859                                     mov             @r1,#0ffh
1770 78B1           3860                                     mov             r0,#vichR
1772 7611           3861                                     mov             @r0,#11h
1774 020000   F     3862                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    3863                                     
                    3864     
1777                3865     out7:                   ;mov            IE,#80h
1777 D083           3866                                     pop             dph
1779 D082           3867                                     pop             dpl
177B D007           3868                                     pop             rr7     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    61

177D D006           3869                                     pop             rr6
177F D005           3870                                     pop             rr5
1781 D004           3871                                     pop             rr4
1783 D003           3872                                     pop             rr3
1785 D002           3873                                     pop             rr2
1787 D001           3874                                     pop             rr1                             
1789 D000           3875                                     pop             rr0
178B D0D0           3876                                     pop             psw
178D D0E0           3877                                     pop             acc
178F E5AD           3878                                     mov             a,P3IF
1791 547F           3879                                     anl             a,#7fh
1793 F5AD           3880                                     mov             P3IF,a
1795 75B0C0         3881                                     mov             P3,#0c0h
                    3882     ;clr            bitmig
1798 75E730         3883                                     mov             EIE2,#30H
179B C219           3884     clr             bitmig
179D 32             3885                                     reti
                    3886     
                    3887     
                    3888                                     
                    3889     
                    3890     
179E 78B1           3891     lomenu:         mov             r0,#vichR
17A0 B61107         3892                                             cjne    @r0,#11h,menu12
17A3 900000   F     3893                                             mov             dptr,#teTESI
17A6 120000   F     3894     lome1:                  call    lotexT
17A9 22             3895                                             ret
17AA B61205         3896     menu12:         cjne    @r0,#12h,menu13
17AD 900000   F     3897                                             mov             dptr,#teTESR
17B0 80F4           3898                                             jmp             lome1
17B2 B61305         3899     menu13:         cjne    @r0,#13h,menu14
17B5 900000   F     3900                                             mov             dptr,#teSKOR
17B8 80EC           3901                                             jmp             lome1
17BA B61405         3902     menu14:         cjne    @r0,#14h,menu15
17BD 900000   F     3903                                             mov             dptr,#teAVK
17C0 80E4           3904                                             jmp             lome1
17C2 B61505         3905     menu15:                 cjne    @r0,#15h,menu21
17C5 900000   F     3906                                             mov             dptr,#teKALIB
17C8 80DC           3907                                             jmp             lome1
                    3908     
17CA B62105         3909     menu21: cjne    @r0,#21h,menu22
17CD 900000   F     3910                                             mov             dptr,#teTE11
17D0 80D4           3911                                             jmp             lome1
17D2 B62205         3912     menu22:         cjne    @r0,#22h,menu23
17D5 900000   F     3913                                             mov             dptr,#teTE9
17D8 80CC           3914                                             jmp             lome1
17DA B62305         3915     menu23:         cjne    @r0,#23h,menu31
17DD 900000   F     3916                                             mov             dptr,#teTE7
17E0 80C4           3917                                             jmp             lome1
17E2 B63105         3918     menu31:         cjne    @r0,#31h,menu41
17E5 900000   F     3919                                             mov             dptr,#teS57_6
17E8 80BC           3920                                             jmp             lome1
                    3921     
17EA                3922     menu41:         
17EA 900000   F     3923                                             mov             dptr,#tePAR
17ED 80B7           3924                                             jmp             lome1
                    3925     
                    3926     ;
                    3927     ;goprogr:       jmp     izm
                    3928     ;тест интерфейса
17EF                3929     testrs: ;jb     p0.3,goprogr
17EF C2AC           3930                                     clr     IE.4
17F1 759955         3931     test1:  mov     SBUF0,#55h
17F4 3099FD         3932                                     jnb     SCON0.1,$
17F7 78B8           3933                                     mov     r0,#work;chtest
17F9 76BE           3934                                     mov     @r0,#190d;60
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    62

                    3935     
17FB 309825         3936     test01: jnb     SCON0.0,test2
17FE E599           3937                                     mov     a,SBUF0
1800 B45512         3938                                     cjne    a,#55h,test3
1803 C299           3939     test4:  clr     SCON0.1
1805 C298           3940                                     clr     SCON0.0
1807 7D0A           3941                                     mov     r5,#10
1809 7840           3942                                     mov     r0,#bufind              ;- - - -
180B 762D           3943     test04: mov     @r0,#2dh
180D 08             3944                                     inc     r0
180E DDFB           3945                                     djnz    r5,test04
1810 120000   F     3946                                     call    ind
1813 80DC           3947                                     jmp     test1
1815                3948     test3:  
1815 753933         3949                                     mov     nuerr,#33h
1818 120000   F     3950                                     call    error           ;на кран прибора ERR 3
                    3951                             
181B 120000   F     3952                                     call    ind;
181E 120000   F     3953                                     call    z_01s           ;100ms
1821 80E0           3954                                     jmp     test4
1823 78B8           3955     test2:  mov     r0,#work;chtest
1825 B60002         3956                                     cjne    @r0,#0,test02
1828 8003           3957                                     jmp     test5
182A 16             3958     test02: dec     @r0
182B 80CE           3959                                     jmp     test01
182D 120000   F     3960     test5:  call    z_1ms           ;1ms
1830 C299           3961                                     clr     SCON0.1
                    3962             
1832 753933         3963                                     mov     nuerr,#33h
1835 120000   F     3964                                     call    error           ;на кран прибора ERR 3
                    3965                                     
1838 120000   F     3966                                     call    ind
183B 120000   F     3967                                     call    z_01s           ;100ms
183E 80B1           3968                                     jmp     test1   
                    3969     
                    3970     
                    3971     
1840                3972     endkalib:;KD=Ak/A3
1840 789C           3973                                             mov                     r0,#rez_A3
1842 120000   F     3974                                             call            resar2
                    3975                                     
1845 120402         3976                                     call    altof                   ;->float
1848 EA             3977                                             mov                     a,r2
1849 547F           3978                                             anl                     a,#7fh
184B FA             3979                                             mov                     r2,a
184C 120000   F     3980                                     call            move28
184F 78A4           3981                                             mov                     r0,#rez_Ak
1851 120000   F     3982                                             call            resar2
1854 1202B7         3983                                             call            fldiv
                    3984                                                     
1857 900000   F     3985                                     mov     dptr,#CHtho;100000
185A 120000   F     3986                                     call    ldc_ltemp                       ;r8..r11=8
185D 120203         3987                                     call    flmul
1860 120343         3988                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    3989     
1863 78A0           3990                                             mov                     r0,#koefKD
1865 120000   F     3991                                             call            saver2
                    3992                                             ;запись в рпзу в соотв ячейку
                    3993                             
1868 7900           3994                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
186A 7A50           3995                                     mov             r2,#50h
186C 7B00           3996                                     mov             r3,#00
186E 120499         3997                                     call    copyPP
                    3998                                     ;внести изменения во внешн озу
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    63

1871 120000   F     3999                                     call            findext                 ;r1-внешн озу
1874 78A0           4000                                     mov                     r0,#koefKD
1876 120000   F     4001                                             call            resar2
1879 EA             4002                                             mov                     a,r2
187A F3             4003                                             movx            @r1,a
187B 09             4004                                             inc                     r1
187C EB             4005                                             mov                     a,r3
187D F3             4006                                             movx            @r1,a
187E 09             4007                                             inc                     r1
187F EC             4008                                             mov                     a,r4
1880 F3             4009                                             movx            @r1,a
1881 09             4010                                             inc                     r1
1882 ED             4011                                             mov                     a,r5
1883 F3             4012                                             movx            @r1,a
                    4013                                     ;кофф *100000 и переведенный в hex формат
                    4014                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4015     ;стереть страницу пап прогр 
1884 905000         4016                                     mov             dptr,#5000h
1887 7FFF           4017                                     mov             r7,#0ffh
1889 12043E         4018                                     call    cle256
                    4019     ;и запись в ячейки кофф памяти прогр (3000h) 
188C 7FFF           4020                                     mov             r7,#0ffh
188E 7900           4021                                     mov             r1,#0                           ;external r
                             am
1890 905000         4022                                     mov             dptr,#5000h
1893 120480         4023                                     call    wrpage
                    4024     
                    4025     
1896 C212           4026                                             clr             bitklb
1898 900000   F     4027                                             mov             dptr,#teEND
189B 120000   F     4028                                             call    lotext
189E 120000   F     4029                                             call    ind
18A1 120000   F     4030                                             call    z_1s
18A4 120000   F     4031                                             call    z_1s
18A7 020000   F     4032                                             jmp             goto7
                    4033     
                    4034     ;$include (d:\amp\subr3.asm) 
18AA            +1  4035     loadUS: ;если идет тест измерения ус восстановить для теста
18AA 201533     +1  4036                                     jb              biteizm,yestest
18AD 79AE       +1  4037                                             mov             r1,#diap
18AF E7         +1  4038                             mov             a,@r1
18B0 23         +1  4039                             rl              a;*2
18B1 FC         +1  4040                             mov             r4,a                    ;save a
18B2 900000   F +1  4041                             mov             dptr,#tabus
18B5 93         +1  4042                             movc    a,@a+dptr
18B6 FA         +1  4043                             mov             r2,a                    ;high byte
18B7 E584       +1  4044                             mov             a,p4
18B9 5401       +1  4045                             anl             a,#01
18BB 4A         +1  4046                             orl             a,r2
18BC F584       +1  4047                             mov             p4,a
18BE 0C         +1  4048                             inc             r4
18BF EC         +1  4049                             mov             a,r4
18C0 93         +1  4050                             movc    a,@a+dptr
18C1 FB         +1  4051                             mov             r3,a                    ;low byte
18C2 E585       +1  4052                             mov             a,p5
18C4 5401       +1  4053                             anl             a,#01
18C6 4B         +1  4054                             orl             a,r3
18C7 F585       +1  4055                             mov             p5,a
18C9 799A       +1  4056                             mov             r1,#parT
18CB B7010E     +1  4057                             cjne    @r1,#1,bret
18CE 79AE       +1  4058                             mov             r1,#diap                  ;10s (parT=1)
18D0 7405       +1  4059                             mov             a,#5                      ;10-8..10-11 p4.1=1
18D2 C3         +1  4060                             clr             c
18D3 97         +1  4061                             subb    a,@r1
18D4 5006       +1  4062                             jnc             bret
18D6 E584       +1  4063                             mov             a,p4
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    64

18D8 4402       +1  4064                             orl             a,#02
18DA F584       +1  4065                             mov             p4,a                     ;10-8..10-11 p4.1=1
18DC 120000   F +1  4066     bret:      call          louizm         ;us если вкл кн ИЗМЕР
18DF 22         +1  4067                             ret
18E0            +1  4068     yestest:
18E0 120000   F +1  4069                             call            lotpus          ;ус теста измерения
18E3 22         +1  4070                             ret
                +1  4071                             
                +1  4072     ;загр ус для кор 0
                +1  4073     ;dptr-
18E4 E4         +1  4074     lospus:         clr             a
                +1  4075                             ;movc   a,@a+dptr
                +1  4076                             ;mov            r2,a                    ;high byte
                +1  4077                             ;mov            a,p4
                +1  4078                             ;anl            a,#01
                +1  4079                             ;orl            a,r2
                +1  4080                             ;mov            p4,a
                +1  4081                             ;inc            dptr
18E5 E4         +1  4082                             clr             a
18E6 93         +1  4083                             movc    a,@a+dptr
18E7 FB         +1  4084                             mov             r3,a                    ;low byte
18E8 E585       +1  4085                             mov             a,p5
18EA 54BF       +1  4086                             anl             a,#0bfh;01
18EC 4B         +1  4087                             orl             a,r3
18ED F585       +1  4088                             mov             p5,a
18EF 22         +1  4089                             ret
                +1  4090     
18F0 80         +1  4091     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  4092     
                +1  4093     ;us кнопка измерения выкл
18F1 88D6       +1  4094     tabus:     db           88h,0d6h         ;10-2
18F3 88F6       +1  4095                             db      88h,0f6h         ;10-3
18F5 88D6       +1  4096                             db              88h,0d6h         ;10-4
18F7 88F6       +1  4097                             db              88h,0f6h         ;10-5
18F9 9AD6       +1  4098                             db      9ah,0d6h         ;10-6
18FB 9AF6       +1  4099                             db              9ah,0f6h         ;10-7
18FD ACD6       +1  4100                             db              0ach,0d6h        ;10-8
18FF ACF6       +1  4101                             db      0ach,0f6h        ;10-9
1901 C8D6       +1  4102                             db              0c8h,0d6h        ;10-10
1903 C8F6       +1  4103                             db              0c8h,0f6h        ;10-11
                +1  4104     
1905            +1  4105     tabt11: 
1905 66E6       +1  4106                             db              66h,0e6h;10-11
1907            +1  4107     tabt9:  
1907 32E6       +1  4108                             db              32h,0e6h;10-9
1909            +1  4109     tabt7:  
1909 18EE       +1  4110                             db              18h,0eeh;10-7
                +1  4111     
                +1  4112      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  4113     ;в зав от parT (Tизм)
190B 79B7       +1  4114     loadT:          mov             r1,#load;parT
190D 7840       +1  4115     lolevT:         mov             r0,#bufind+0
190F 7B0A       +1  4116                             mov             r3,#10
1911 75F00A     +1  4117                             mov             b,#10
1914 E7         +1  4118                             mov             a,@r1
1915 A4         +1  4119                             mul             ab
1916 FC         +1  4120                             mov             r4,a                    ;save a
1917 900000   F +1  4121                             mov             dptr,#textT
191A 93         +1  4122             lod1:   movc    a,@a+dptr
191B F6         +1  4123                             mov             @r0,a
191C 08         +1  4124                             inc             r0
191D 0C         +1  4125                             inc             r4
191E EC         +1  4126                             mov             a,r4
191F DBF9       +1  4127                             djnz    r3,lod1
1921 22         +1  4128                             ret     
                +1  4129     ;загрузка текста в буфер 2 bufind+0..bufind9                    
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    65

                +1  4130     ;dptr-адр строки текста         
1922            +1  4131     lotext:         
1922 7B0A       +1  4132                             mov             r3,#10
1924 7840       +1  4133                             mov             r0,#bufind+0
1926 E4         +1  4134     lodt:           clr             a
1927 93         +1  4135                             movc    a,@a+dptr
1928 F6         +1  4136                             mov             @r0,a
1929 08         +1  4137                             inc             r0
192A A3         +1  4138                             inc             dptr
192B DBF9       +1  4139                             djnz    r3,lodt
192D 22         +1  4140                             ret                                     
                +1  4141     
                +1  4142     
                +1  4143     
                +1  4144     
                +1  4145      ;задержка 100 мкс
192E 7978       +1  4146     z_100:    mov R1,#78h     ;загрузка первого числа
1930 7A02       +1  4147     z100:     mov R2,#2h     ;загрузка второго числа
1932 DAFE       +1  4148     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
1934 D9FA       +1  4149               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
1936 22         +1  4150               ret           
                +1  4151     
                +1  4152     ;задержка 34 мкс
1937 7B8B       +1  4153     z_5:      mov R3,#8Bh      ;загрузка числа
1939 DBFE       +1  4154     ct:       djnz R3,ct
193B 22         +1  4155               ret
                +1  4156     
                +1  4157     ;задержка 15 мс
193C 79FA       +1  4158     z_15:     mov R1,#0FAh    ;загрузка первого числа
193E 7AED       +1  4159     z15:      mov R2,#0EDh   ;загрузка второго числа
1940 DAFE       +1  4160     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
1942 D9FA       +1  4161               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
1944 22         +1  4162               ret   
                +1  4163                                               
                +1  4164      ;задержка 1 мс
1945 7910       +1  4165     z_1ms:     mov R1,#10h     
1947 7AED       +1  4166     ss1:       mov R2,#0EDh    
1949 DAFE       +1  4167                djnz R2, $    
194B D9FA       +1  4168                djnz R1, ss1   
194D 22         +1  4169                ret   
                +1  4170     
                +1  4171      ;????????
                +1  4172     ;задержка 1с
194E 7D1F       +1  4173     z_1s:   mov             r5,#01fh 
1950 7EFF       +1  4174     co2s:   mov     R6,#0ffh     
1952 7FFF       +1  4175     z1s:     mov    R7,#0ffh     
1954 DFFE       +1  4176     co1s:   djnz    R7, co1s        
1956 DEFA       +1  4177             djnz    R6, z1s 
1958 DDF6       +1  4178                     djnz    r5,co2s
195A 22         +1  4179               ret
                +1  4180     ;задержка 0,1с
195B 7D03       +1  4181     z_01s:           mov            r5,#03h 
195D 7EFF       +1  4182     co02s:          mov     R6,#0ffh     
195F 7FFF       +1  4183     z01s:           mov     R7,#0ffh     
1961 DFFE       +1  4184                             djnz    R7, $   
1963 DEFA       +1  4185                     djnz    R6, z01s 
1965 DDF6       +1  4186                             djnz    r5,co02s
1967 22         +1  4187                      ret
                +1  4188                                               
                +1  4189     ;задержка 0,5с
1968 7D0D       +1  4190     z_05s:           mov            r5,#0dh 
196A 7EFF       +1  4191     co05s:                  mov     R6,#0ffh     
196C 7FFF       +1  4192     z05s:           mov     R7,#0ffh     
196E DFFE       +1  4193                                     djnz    R7, $   
1970 DEFA       +1  4194                     djnz    R6, z05s 
1972 DDF6       +1  4195                                             djnz    r5,co05s
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    66

1974 22         +1  4196                      ret                                                     
                +1  4197                                                               
1975 000007FF   +1  4198     chzap:  db      00,00,07h,0ffh             
1979 00000000   +1  4199     ch0:    db      00,00,00,00
197D 0000000A   +1  4200     ch10:   db      00,00,00,0ah                            ;10
1981 00000005   +1  4201     ch5:    db      00,00,00,05                                             ;5
1985 000003B9   +1  4202     ch954:  db 00,00,03,0b9h                                                ;954
1989 000003E8   +1  4203     ch10000:        db 00,00,03h,0e8h                                               ;10000
198D 00000064   +1  4204     ch100:  db 00,00,00,64h ;100
1991 00000002   +1  4205     ch2:    db      00,00,00,02                                             
                +1  4206     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  4207     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  4208     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
1995 00000001   +1  4209     ch1:    db  00,00,00,01
1999 3F800000   +1  4210     ch_1:   db      3fh,80h,00,00                   
199D 3F741EDF   +1  4211     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
19A1 47C35000   +1  4212     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
19A5 3F800347   +1  4213     KD:             db      3fh,80h,03h,47h;1,0001
19A9 48435000   +1  4214     CH2tho: db      48h,43h,50h,00;200000
19AD 4856D800   +1  4215     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
19B1 4856D800   +1  4216     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
19B5 461C4000   +1  4217     ch_10th:db  46h,1ch,40h,00;10000-2710h
19B9 41200000   +1  4218     ch_10:  db      41h,20h,00,00;10d
19BD 48742400   +1  4219     ch_250: db      48h,74h,24h,00;250000
19C1 000186A0   +1  4220     chk:            db      00,01,86h,0a0h;
                +1  4221     ;r1- мл байт 2х байтного числа
19C5            +1  4222     tenmin:         ;-10
19C5 C3         +1  4223                             clr             c
19C6 E7         +1  4224                     mov             a,@r1
19C7 9405       +1  4225                             subb    a,#5;10
19C9 F7         +1  4226                             mov             @r1,a
19CA 19         +1  4227                             dec             r1
19CB E7         +1  4228                             mov             a,@r1
19CC 9400       +1  4229                             subb    a,#0
19CE F7         +1  4230                             mov             @r1,a
19CF 22         +1  4231                             ret
                +1  4232       ;r0-обнуление ячеек памяти  
19D0 7F04       +1  4233       clear4:        mov    r7,#4
19D2 E4         +1  4234                             clr             a
19D3 F6         +1  4235       cl4:          mov             @r0,a
19D4 08         +1  4236                             inc             r0
19D5 DFFC       +1  4237                             djnz    r7,cl4
19D7 22         +1  4238                             ret     
                +1  4239     
                +1  4240      ;r0-обнуление ячеек памяти 
                +1  4241      ;R7- 
19D8            +1  4242       clearN:        
19D8 E4         +1  4243                             clr             a
19D9 F6         +1  4244       cl4N:         mov             @r0,a
19DA 08         +1  4245                             inc             r0
19DB DFFC       +1  4246                             djnz    r7,cl4N
19DD 22         +1  4247                             ret     
                +1  4248     
                +1  4249       ;чтение номера байта с индикатора(2байта)
                +1  4250     ;bufind+8..bufind+9
                +1  4251     ;-  - - -
                +1  4252     ;- - - - - - - - - -
                +1  4253     ;adec..adec+9
                +1  4254     ;ст            мл
19DE 7848       +1  4255     upak2:  mov             r0,#bufind+8;
19E0 795C       +1  4256                     mov             r1,#adec+9
19E2 7F02       +1  4257                     mov             r7,#2;2bait
19E4 C3         +1  4258     upa2:   clr             c
19E5 E6         +1  4259                     mov             a,@r0
19E6 9430       +1  4260                     subb    a,#30h
19E8 F7         +1  4261                     mov             @r1,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    67

19E9 18         +1  4262                     dec             r0
19EA 19         +1  4263                     dec             r1
19EB DFF7       +1  4264                     djnz    r7,upa2
19ED 22         +1  4265                     ret  
                +1  4266         
                +1  4267      ;bufind+4..bufind+9
                +1  4268     ;-  - - -
                +1  4269     ;- - - - - - - - - -
                +1  4270     ;adec..adec+9
                +1  4271     ;ст            мл
19EE 7849       +1  4272     upak:   mov             r0,#bufind+9;
19F0 795C       +1  4273                     mov             r1,#adec+9
19F2 7F06       +1  4274                     mov             r7,#6
19F4 C3         +1  4275     upa:    clr             c
19F5 E6         +1  4276                     mov             a,@r0
19F6 9430       +1  4277                     subb    a,#30h
19F8 F7         +1  4278                     mov             @r1,a
19F9 18         +1  4279                     dec             r0
19FA 19         +1  4280                     dec             r1
19FB DFF7       +1  4281                     djnz    r7,upa
19FD 22         +1  4282                     ret
                +1  4283     
                +1  4284      ;чтение номера байта с индикатора(3байта)
                +1  4285     ;bufind+3..bufind+9
                +1  4286     ;-  - - -
                +1  4287     ;- - - - - - - - - -
                +1  4288     ;adec..adec+9
                +1  4289     ;ст            мл
19FE 7849       +1  4290     upak3:  mov             r0,#bufind+9;
1A00 795C       +1  4291                     mov             r1,#adec+9
1A02 7F03       +1  4292                     mov             r7,#3;3bait
1A04 C3         +1  4293     upa1:   clr             c
1A05 E6         +1  4294                     mov             a,@r0
1A06 9430       +1  4295                     subb    a,#30h
1A08 F7         +1  4296                     mov             @r1,a
1A09 18         +1  4297                     dec             r0
1A0A 19         +1  4298                     dec             r1
1A0B DFF7       +1  4299                     djnz    r7,upa1
1A0D 22         +1  4300                     ret
                +1  4301     
                +1  4302     ;вых-r2,r3-адрес ячее памяти прогр
1A0E            +1  4303     findkoef:
1A0E 79AE       +1  4304                                     mov             r1,#diap
1A10 E7         +1  4305                                     mov             a,@r1
1A11 23         +1  4306                                     rl              a                                          
                                          ;diap*2(2bait )
1A12 FC         +1  4307                                     mov             r4,a                                    ;sa
                             ve
1A13 900000   F +1  4308                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  4309                                     
1A16 93         +1  4310                                     movc    a,@a+dptr                       ;ст байт
1A17 FA         +1  4311                                     mov             r2,a
1A18 A3         +1  4312                                     inc             dptr
1A19 EC         +1  4313                                     mov             a,r4
1A1A 93         +1  4314                                     movc    a,@a+dptr
1A1B FB         +1  4315                                     mov             r3,a                    ;мл байт
1A1C 22         +1  4316                                     ret
                +1  4317     ;r2..r5 в опр яч внешн озу
1A1D            +1  4318     findext:
1A1D 79AE       +1  4319                                     mov             r1,#diap
1A1F E7         +1  4320                                     mov             a,@r1
1A20 23         +1  4321                                     rl              a                                          
                                          ;diap*2(2bait )
1A21 23         +1  4322                                     rl              a                                          
                                          ;diap*2(2bait )
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    68

1A22 F9         +1  4323                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  4324                                     
1A23 22         +1  4325                                     ret
                +1  4326     
                +1  4327     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  4328     ;(5000h..5027h)
1A24 5000       +1  4329     diKDw:  dw              5000h                   ;10-2
1A26 5004       +1  4330                                     dw              5004h                   ;10-3
1A28 5008       +1  4331                                     dw              5008h                   ;10-4
1A2A 500C       +1  4332                                     dw              500ch                   ;10-5
1A2C 5010       +1  4333                                     dw              5010h                   ;10-6
1A2E 5014       +1  4334                                     dw              5014h                   ;10-7
1A30 5018       +1  4335                                     dw              5018h                   ;10-8
1A32 501C       +1  4336                                     dw              501ch                   ;10-9
1A34 5020       +1  4337                                     dw              5020h                   ;10-10
1A36 5024       +1  4338                                     dw              5024h                   ;10-11
1A38 5028       +1  4339     dipar:  dw              5028h                   ;parol
                +1  4340     
1A3A 000186A0   +1  4341     chthou: db      00,01,86h,0a0h  ;100.000
                +1  4342     
1A3E AA08       +1  4343     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
1A40 AB09       +1  4344                                             mov     r3,ltemp+1
1A42 AC0A       +1  4345                                             mov     r4,ltemp+2
1A44 AD0B       +1  4346                                             mov     r5,ltemp+3
1A46 22         +1  4347                                             ret
                +1  4348     ;bufind+4..bufind+9
                +1  4349     ;-  - - -
                +1  4350     ;- - - - - - - - - -
                +1  4351     ;adec..adec+9
                +1  4352     ;ст            мл
1A47 7847       +1  4353     upakA:  mov             r0,#bufind+7;
1A49 795C       +1  4354                     mov             r1,#adec+9
1A4B 7F04       +1  4355                     mov             r7,#4
1A4D C3         +1  4356     upaa:   clr             c
1A4E E6         +1  4357                     mov             a,@r0
1A4F 9430       +1  4358                     subb    a,#30h
1A51 F7         +1  4359                     mov             @r1,a
1A52 18         +1  4360                     dec             r0
1A53 19         +1  4361                     dec             r1
1A54 DFF7       +1  4362                     djnz    r7,upaa
1A56 22         +1  4363                     ret
                +1  4364     
                +1  4365     ;bufind+4..bufind+9
                +1  4366     ;-  - - -
                +1  4367     ;- - - - - - - - - -
                +1  4368     ;adec..adec+9
                +1  4369     ;ст            мл
1A57 7848       +1  4370     upakB:  mov             r0,#bufind+8;
1A59 795C       +1  4371                     mov             r1,#adec+9
1A5B 7F05       +1  4372                     mov             r7,#5
1A5D C3         +1  4373     upab:   clr             c
1A5E E6         +1  4374                     mov             a,@r0
1A5F 9430       +1  4375                     subb    a,#30h
1A61 F7         +1  4376                     mov             @r1,a
1A62 18         +1  4377                     dec             r0
1A63 19         +1  4378                     dec             r1
1A64 DFF7       +1  4379                     djnz    r7,upab
1A66 C21B       +1  4380                     clr                     bitznB
1A68 E543       +1  4381                     mov             a,bufind+3
1A6A B42D02     +1  4382                     cjne            a,#2dh,abret
1A6D D21B       +1  4383                     setb            bitznB
1A6F            +1  4384     abret:
1A6F 22         +1  4385                     ret
1A70            +1  4386     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
1A70 4E6E6AA8   +1  4387                                             db      4eh,6eh,6ah,0a8h;10**9
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    69

1A74 43FA0000   +1  4388     CH_500:         db              43h,0fah,00,00;1fah=500
1A78 4856D800   +1  4389     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
1A7C 49742400   +1  4390     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  4391     
                +1  4392     
                +1  4393     
                +1  4394     ;управление AD7731
                +1  4395     ;r4=b1 r5=b2
1A80            +1  4396     iniacp: ;управление AD7731
1A80 7403       +1  4397                             mov             a,#03
                +1  4398     
1A82 120000   F +1  4399                             call    write
1A85 EC         +1  4400                             mov             a,r4;#80h
1A86 120000   F +1  4401                             call    write
1A89 ED         +1  4402                             mov             a,r5;#04
1A8A 120000   F +1  4403                             call    write
1A8D 7402       +1  4404                             mov             a,#02
1A8F 120000   F +1  4405                             call    write
1A92 74A1       +1  4406                             mov             a,#0a1h
1A94 120000   F +1  4407                             call    write
1A97 7474       +1  4408                             mov             a,#74h
1A99 120000   F +1  4409                             call    write
1A9C 2095FD     +1  4410                             jb              p1.5,$;p1.3,$
1A9F 7402       +1  4411                             mov             a,#02
1AA1 120000   F +1  4412                             call    write
1AA4 7481       +1  4413                             mov             a,#81h
1AA6 120000   F +1  4414                             call    write
1AA9 7474       +1  4415                             mov             a,#74h
1AAB 120000   F +1  4416                             call    write
1AAE 2095FD     +1  4417                             jb              p1.5,$;p1.3,$
1AB1 7402       +1  4418                             mov             a,#02
1AB3 120000   F +1  4419                             call    write
1AB6 7421       +1  4420                             mov             a,#21h
1AB8 120000   F +1  4421                             call    write
1ABB 7474       +1  4422                             mov             a,#74h
1ABD 120000   F +1  4423                             call    write
1AC0 22         +1  4424                             ret
                +1  4425                             ;;;;;;;;;;;;;;;;
                +1  4426     ;;;;;;;;;;;;;;;;;
                +1  4427     ;;;;;;;;;;;;;;;;;
1AC1 0000       +1  4428     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
1AC3 6000       +1  4429                                     db              60h,00h;40h,04h         ;10s
1AC5 6000       +1  4430                                     db              60h,00;40h,04h          ;1s
1AC7 4004       +1  4431                                     db              40h,04h         ;0,1s
1AC9 2004       +1  4432                                     db              20h,04h         ;50ms
1ACB 2004       +1  4433                                     db              20h,04h          ;10ms
1ACD 1332       +1  4434                                     db              13h,32h         ;2ms
                +1  4435     
                +1  4436     ;загр В1,В2 в завис от Т                                
1ACF 799A       +1  4437     loab12:                 mov             r1,#parT
1AD1 900000   F +1  4438                                     mov             dptr,#tabB1_2
1AD4 E7         +1  4439                                     mov             a,@r1
1AD5 23         +1  4440                                     rl              a;*2
1AD6 FF         +1  4441                                     mov             r7,a                    ;save a
1AD7 93         +1  4442                                     movc    a,@a+dptr
1AD8 FC         +1  4443                                     mov             r4,a   ;b1
1AD9 0F         +1  4444                                     inc             r7
1ADA EF         +1  4445                                     mov             a,r7
1ADB 93         +1  4446                                     movc    a,@a+dptr
1ADC FD         +1  4447                                     mov             r5,a
                +1  4448                                     ;после загр В1,2 загр упр слово для нового Т
                +1  4449                             
1ADD 22         +1  4450                                     ret
                +1  4451     
                +1  4452     
1ADE 7852       +1  4453     loadr2: mov             r0,#abin+3              ;r2..r5
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    70

1AE0 E6         +1  4454                     mov             a,@r0                   ; ст мл   
1AE1 FA         +1  4455                     mov             r2,a
1AE2 18         +1  4456                     dec             r0
1AE3 E6         +1  4457                     mov             a,@r0
1AE4 FB         +1  4458                     mov             r3,a
1AE5 18         +1  4459                     dec             r0
1AE6 E6         +1  4460                     mov             a,@r0
1AE7 FC         +1  4461                     mov             r4,a
1AE8 18         +1  4462                     dec             r0
1AE9 E6         +1  4463                     mov             a,@r0
1AEA FD         +1  4464                     mov             r5,a
1AEB 22         +1  4465                     ret
                +1  4466                                             
                +1  4467      ;;;;;;;;;;;;;;;;;;;      
                +1  4468      ;загрузка KD в зависимости от диап изм  
                +1  4469      ;koef->r8..r11
1AEC 78AE       +1  4470     loadKD:                 mov             r0,#diap
1AEE E6         +1  4471                                     mov             a,@r0
1AEF 900000   F +1  4472                                     mov             dptr,#diKDn
1AF2 75F004     +1  4473                                     mov             b,#4
1AF5 A4         +1  4474                                     mul             ab
1AF6 FF         +1  4475                                     mov             r7,a;save
1AF7 93         +1  4476                                     movc    a,@a+dptr
1AF8 F508       +1  4477                                     mov             r8,a
1AFA A3         +1  4478                                     inc             dptr
1AFB EF         +1  4479                                     mov             a,r7
1AFC 93         +1  4480                                     movc    a,@a+dptr
1AFD F509       +1  4481                                     mov             r9,a
1AFF A3         +1  4482                                     inc             dptr
1B00 EF         +1  4483                                     mov             a,r7
1B01 93         +1  4484                                     movc    a,@a+dptr
1B02 F50A       +1  4485                                     mov             r10,a
1B04 A3         +1  4486                                     inc             dptr
1B05 EF         +1  4487                                     mov             a,r7
1B06 93         +1  4488                                     movc    a,@a+dptr
1B07 F50B       +1  4489                                     mov             r11,a
1B09 22         +1  4490                                     ret
                +1  4491     
1B0A 3F506B7B   +1  4492      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
1B0E 3F507FCC   +1  4493                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
1B12 3F4F9D0B   +1  4494                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
1B16 3F4FE869   +1  4495                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
1B1A 3F50294A   +1  4496                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
1B1E 3F50639E   +1  4497                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
1B22 3F4BC9F0   +1  4498                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
1B26 3F4C063B   +1  4499                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
1B2A 3F50EFDD   +1  4500                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
1B2E 3F512AD9   +1  4501                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  4502     
1B32 00000039   +1  4503     ch57:   db      00,00,00,39h;57
1B36 00000014   +1  4504     ch20:   db      00,00,00,14h;20
                +1  4505     
                +1  4506     ;загр ус для тестов ацп 
                +1  4507     ;dptr-
1B3A 78B1       +1  4508     lotpus: mov             r0,#vichR
1B3C B6210D     +1  4509                                     cjne    @r0,#21h,te22
1B3F 900000   F +1  4510                                     mov                     dptr,#tabt11;заслать ус 11А
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    71

1B42 E4         +1  4511     lotp:           clr             a
1B43 93         +1  4512                             movc    a,@a+dptr                               ;high byte
1B44 F584       +1  4513                             mov             p4,a
1B46 A3         +1  4514                             inc             dptr
1B47 E4         +1  4515                             clr             a
1B48 93         +1  4516                             movc    a,@a+dptr                               ;low byte
1B49 F585       +1  4517                             mov             p5,a
1B4B 22         +1  4518                             ret
1B4C B62205     +1  4519     te22:                   cjne    @r0,#22h,te23
1B4F 900000   F +1  4520                             mov                     dptr,#tabt9;заслать ус 9А       
1B52 80EE       +1  4521                             jmp                     lotp
                +1  4522     
1B54 900000   F +1  4523     te23:   mov                     dptr,#tabt7;заслать ус 7А       
1B57 80E9       +1  4524                             jmp                     lotp
                +1  4525     
                +1  4526     
                +1  4527     
                +1  4528     
                +1  4529     
1B59 02030405   +1  4530     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
1B5D 06070809                
1B61 0A0B                    
                +1  4531     
1B63 78AE       +1  4532     findR:                  mov                     r0,#diap
1B65 E6         +1  4533                                                     mov                     a,@r0
1B66 900000   F +1  4534                                                     mov                     dptr,#Tabn
1B69 93         +1  4535                                                     movc            a,@a+dptr
1B6A 22         +1  4536                                                     ret
                +1  4537     
                +1  4538     ;bufind=30h..39h                                                                           
                                           ;
1B6B C219       +1  4539     vvchif:                 clr             bitmig
1B6D 79B2       +1  4540                                     mov             r1,#marker
1B6F E7         +1  4541                                     mov             a,@r1                   ;изм цифры
1B70 7840       +1  4542                                     mov             r0,#bufind                      ;0000
1B72 28         +1  4543                                     add             a,r0
1B73 F8         +1  4544                                     mov             r0,a
1B74 06         +1  4545                                     inc             @r0
1B75 B63A02     +1  4546                                     cjne    @r0,#3ah,chif
1B78 7630       +1  4547                                     mov             @r0,#30h
1B7A            +1  4548     chif:   
1B7A 22         +1  4549                             ret
                +1  4550     
                +1  4551       ;перевод маркера влево
1B7B            +1  4552     marle:  
1B7B C219       +1  4553                     clr             bitmig
                +1  4554                     ;mov            savba,#0   нельзя обнулять
1B7D 78B2       +1  4555             mov             r0,#marker
1B7F 16         +1  4556                     dec             @r0
1B80 E6         +1  4557                     mov             a,@r0
1B81 C3         +1  4558                     clr             c
1B82 953A       +1  4559                     subb    a,movleft         ;крайне левое положение
1B84 5001       +1  4560                     jnc             rler
1B86 06         +1  4561                     inc             @r0
1B87 22         +1  4562     rler:   ret
                +1  4563         
                +1  4564     ;перевод маркера вправо
1B88 C219       +1  4565     marri:  clr             bitmig
1B8A 78B2       +1  4566                     mov             r0,#marker
1B8C 06         +1  4567                     inc         @r0
1B8D E53B       +1  4568                     mov             a,movrig           ;крайне правое положение
1B8F C3         +1  4569                     clr             c
1B90 96         +1  4570                     subb    a,@r0
1B91 5001       +1  4571                     jnc             rrir
1B93 16         +1  4572                     dec             @r0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    72

1B94 22         +1  4573     rrir:   ret
                +1  4574         
                +1  4575     ;konstA->bufind+4..bufind+7
1B95 78BC       +1  4576     outA:           mov                     r0,#konstA
1B97 120000   F +1  4577                                     call            resar2
1B9A 120343     +1  4578                                     call            ftol                    ;->hex
1B9D 784F       +1  4579                                     mov             r0,#abin
1B9F 120000   F +1  4580                                     call            saver2
1BA2 7853       +1  4581                                     mov                     r0,#adec
1BA4 7952       +1  4582                                     mov             r1,#abin+3
1BA6 120000   F +1  4583                                     call            bindec
1BA9 785C       +1  4584                                     mov                     r0,#adec+9
1BAB 7947       +1  4585                                     mov                     r1,#bufind+7
1BAD 7F04       +1  4586                                     mov                     r7,#4
1BAF E6         +1  4587     outa2:  mov             a,@r0
1BB0 2430       +1  4588                               add           a,#30h
1BB2 F7         +1  4589                                     mov             @r1,a
1BB3 19         +1  4590                                     dec             r1
1BB4 18         +1  4591                                     dec             r0
1BB5 DFF8       +1  4592                                     djnz    r7,outa2
1BB7 22         +1  4593                                     ret
                +1  4594                                             
                +1  4595     ;konstB->bufind+4..bufind+8
1BB8 78C0       +1  4596     outB:           mov                     r0,#konstB
1BBA 120000   F +1  4597                                     call            resar2
1BBD EA         +1  4598                                     mov                     a,r2
1BBE 5480       +1  4599                                     anl                     a,#80h
1BC0 6007       +1  4600                                     jz                      outb3
1BC2 EA         +1  4601     mov                     a,r2
1BC3 547F       +1  4602                                     anl                     a,#7fh
1BC5 FA         +1  4603                                     mov                     r2,a
1BC6 75432D     +1  4604                                     mov                     bufind+3,#2dh
1BC9 120343     +1  4605     outb3:  call            ftol                    ;->hex
1BCC 784F       +1  4606                                     mov             r0,#abin
1BCE 120000   F +1  4607                                     call            saver2
1BD1 7853       +1  4608                                     mov                     r0,#adec
1BD3 7952       +1  4609                                     mov             r1,#abin+3
1BD5 120000   F +1  4610                                     call            bindec
1BD8 785C       +1  4611                                     mov                     r0,#adec+9
1BDA 7948       +1  4612                                     mov                     r1,#bufind+8
1BDC 7F05       +1  4613                                     mov                     r7,#5
1BDE E6         +1  4614     outb2:  mov             a,@r0
1BDF 2430       +1  4615                               add           a,#30h
1BE1 F7         +1  4616                                     mov             @r1,a
1BE2 19         +1  4617                                     dec             r1
1BE3 18         +1  4618                                     dec             r0
1BE4 DFF8       +1  4619                                     djnz    r7,outb2
1BE6 22         +1  4620                                     ret
                +1  4621     
                +1  4622     
                +1  4623     ;пп мигания индикации
1BE7 78B2       +1  4624     mign:           mov             r0,#marker
                +1  4625                                     
1BE9 B6FF03     +1  4626                                     cjne    @r0,#0ffh,mignn
                +1  4627                                     ;реж изм мигает *
1BEC C219       +1  4628                                     clr             bitmig
1BEE 22         +1  4629                                     ret
                +1  4630     
1BEF            +1  4631     mignn:                  ;clr            c
1BEF 7440       +1  4632                                     mov             a,#bufind
1BF1 26         +1  4633                                     add             a,@r0                   ;a=bufind+marker
1BF2 F9         +1  4634                                     mov             r1,a
1BF3 201907     +1  4635                                     jb              bitmig,onmig
1BF6 873C       +1  4636                                     mov             savba,@r1
                +1  4637                             ;       mov             a,@r1
                +1  4638                             ;       mov             savba,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    73

1BF8 7720       +1  4639                                     mov             @r1,#" "
                +1  4640                                     
1BFA D219       +1  4641                                     setb    bitmig
1BFC 22         +1  4642                                     ret
                +1  4643     
1BFD A73C       +1  4644     onmig:                  mov             @r1,savba
                +1  4645                                     ;mov            a,savba
                +1  4646                                     ; mov           @r1,a
1BFF C219       +1  4647                                     clr             bitmig
1C01 120000   F +1  4648                                     call    z_01s
1C04 22         +1  4649                                     ret
                +1  4650     ;номер ошибки bufind+6
1C05 900000   F +1  4651     error:          mov             dptr,#teERR
1C08 120000   F +1  4652                                             call    lotext
1C0B 853946     +1  4653                                             mov             bufind+6,nuerr
1C0E 22         +1  4654                                     ret
                +1  4655     
                +1  4656     
1C0F            +1  4657     textT:          
1C0F FD543D32   +1  4658                             db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
1C13 6D67FDFD                
1C17 FDFD                    
1C19 FD543D31   +1  4659                             db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
1C1D 306D67FD                
1C21 FDFD                    
1C23 FD543D35   +1  4660                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
1C27 306D67FD                
1C2B FDFD                    
1C2D FD543D64   +1  4661                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
1C31 3167FDFD                
1C35 FDFD                    
1C37 20202054   +1  4662                             db              " "," "," ","T","=",31h,67h," "," "," "
1C3B 3D316720                
1C3F 2020                    
1C41 2020543D   +1  4663                             db              " "," ","T","=",31h,30h,67h," "," "," "  
1C45 31306720                
1C49 2020                    
                +1  4664     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  4665     
1C4B 42753474   +1  4666     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
1C4F 79767454                
1C53 7720                    
1C55 20413D20   +1  4667     teAequ0:        db              " ",'A','='," "," "," "," "," "," ",65h
1C59 20202020                
1C5D 2065                    
1C5F 20423D2B   +1  4668     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
1C63 20202020                
1C67 2020                    
1C69 20207145   +1  4669     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
1C6D 48722020                
1C71 2020                    
                +1  4670     
1C73 20544579   +1  4671     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
1C77 542D7433                
1C7B 7120                    
1C7D 54457954   +1  4672     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
1C81 20523520                
1C85 2020                    
1C87 20794B30   +1  4673     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
1C8B 50205235                
1C8F 2020                    
1C91 20204142   +1  4674     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
1C95 4B202020                
1C99 2020                    
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    74

1C9B 204B4176   +1  4675     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
1C9F 74735020                
1CA3 202020                  
                +1  4676     
1CA6 20544579   +1  4677     teTE11:         db              " ",'T',"E",79h,'T'," ",2dh,31h,31h,'A';          21
1CAA 54202D31                
1CAE 3141                    
1CB0 20544579   +1  4678     teTE9:          db              " ",'T',"E",79h,'T'," ",2dh,30h,39h,'A';                   
                                                  22
1CB4 54202D30                
1CB8 3941                    
1CBA 20544579   +1  4679     teTE7:          db              " ",'T',"E",79h,'T'," ",2dh,30h,37h,'A';                   
                                                  23
1CBE 54202D30                
1CC2 3741                    
                +1  4680     
                +1  4681     
1CC4 20203537   +1  4682     teS57_6:                db              " "," ",35h,37h,36h," "," "," "," "," ";57.6
1CC8 36202020                
1CCC 2020                    
1CCE 20203139   +1  4683     teS19_2:                db              " "," ",31h,39h,32h," "," "," "," "," ";19,2
1CD2 32202020                
1CD6 2020                    
                +1  4684     
1CD8 61415030   +1  4685     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
1CDC 76772030                
1CE0 3030                    
1CE2 20303030   +1  4686     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
1CE6 30302020                
1CEA 2041                    
1CEC 74337120   +1  4687     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
1CF0 4B304879                
1CF4 5420                    
1CF6 20204275   +1  4688     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
1CFA 58307820                
1CFE 2020                    
1D00 2020304C   +1  4689     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
1D04 4C202020                
1D08 2020                    
1D0A 20203034   +1  4690     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
1D0E 7479544B                
1D12 4120                    
1D14 20203041   +1  4691     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
1D18 71795420                
1D1C 20203341   +1  4692     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
1D20 61747977                
1D24 2020                    
1D26 20206150   +1  4693     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
1D2A 30797130                
1D2E 545020                  
1D31 20206130   +1  4694     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
1D35 76484162                
1D39 2020                    
1D3B 20207376   +1  4695     teBLOK: db      " "," ",73h,76h,30h,'K'," ",30h,30h," ";БЛОК 00
1D3F 304B2030                
1D43 3020                    
1D45 20207376   +1  4696     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
1D49 304B2020                
1D4D 2020                    
1D4F 48413420   +1  4697     tebBL:          db      "H",'A',34h," ",73h,76h," ",30h,30h,30h; НАЧ БЛОК 000
1D53 73762030                
1D57 3030                    
1D59 4B304820   +1  4698     teeBL:          db      "K",30h,"H"," ",73h,76h," ",30h,30h,30h; КОН БЛОК 000
1D5D 73762030                
1D61 3030                    
                +1  4699      ;;;;;;;;;;;;;;;;;;;         
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    75

1D63 2020304C   +1  4700     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
1D67 4C204920                
1D6B 2020                    
1D6D 2020304C   +1  4701     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
1D71 4C206620                
1D75 2020                    
1D77 20204552   +1  4702     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
1D7B 52202020                
1D7F 2020                    
1D81 2020454E   +1  4703     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
1D85 44202020                
1D89 2020                    
                +1  4704     
                    4705     
                    4706     ;$include (d:\amp\sarifm3.asm) 
                +1  4707     ; ” ©« SARIFM.ASM 8.11.95
                +1  4708     ;файл арифметики
                +1  4709       
  0008          +1  4710     ltemp    equ       8           ;long temporary
  000C          +1  4711     xtemp    equ       12          ;other temporaries
  000A          +1  4712     DECSIZE  EQU       10
  0004          +1  4713     NUMSIZE  EQU       4
  0004          +1  4714     RR4  EQU       4
  0005          +1  4715     RR5  EQU       5
                +1  4716     
                +1  4717                                                     
                +1  4718     
                +1  4719                 ; rseg     ARIF          ; Switch to this code segment.
                +1  4720     ;             using    0              ; Specify register bank for the following
                +1  4721                                            ; program code.
                +1  4722     ;                                               cseg AT 400h
                +1  4723     ; Arithmetics:  CLEARING string
                +1  4724     ; Input:
                +1  4725     ; R0 - pointer to string,
                +1  4726     ; NUMSIZE - byte count if CLRNUM used,
                +1  4727     ; DECSIZE - byte count if CLRDEC used,
                +1  4728     ; R2 - byte count if CLEAR used;
                +1  4729     ; Output:  none.
                +1  4730     
1D8B            +1  4731     CLRDEC:
1D8B 7A0A       +1  4732         MOV R2, #DECSIZE
1D8D 8002       +1  4733         SJMP    CLEAR
1D8F            +1  4734     CLRNUM:
1D8F 7A04       +1  4735         MOV R2, #NUMSIZE
                +1  4736         ;JMP    CLEAR
1D91            +1  4737     CLEAR:
1D91 E4         +1  4738         CLR A
1D92 F6         +1  4739     CLR11:  MOV @R0, A
1D93 08         +1  4740         INC R0
1D94 DAFC       +1  4741         DJNZ    R2, CLR11
1D96 22         +1  4742         RET
                +1  4743     
                +1  4744     ;**********************************
                +1  4745     ;mov    r1,#abin+3
                +1  4746     ;mov    r0,#adec
                +1  4747     ; _ _ _ _
                +1  4748     ;     03ff
                +1  4749     ;ст     мл   - вход
                +1  4750     ; _ _ _ _ _ _ _ _ _ _
                +1  4751     ;             1 0 2 3
                +1  4752     ;ст                мл 
                +1  4753     ;**********************************
                +1  4754     
1D97            +1  4755     BINDEC:
                +1  4756     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  4757     ; Input:
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    76

                +1  4758     ; R0 - pointer to destination (high digit is the first),
                +1  4759     ; R1 - pointer to source,
                +1  4760     ; NUMSIZE - byte count in binary number;
                +1  4761     ; DECSIZE - byte count in decimal number;
                +1  4762     ; Output:  none.
                +1  4763     ; Source saved
                +1  4764     
                +1  4765         ; 1. Clear result
1D97 7A05       +1  4766         MOV R2, #DECSIZE/2
1D99 120000   F +1  4767         CALL   CLEAR  ; incrementing R0
                +1  4768     
                +1  4769         ; 2. Prepare convertion
1D9C 18         +1  4770         DEC R0
1D9D 8804       +1  4771         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
1D9F 8905       +1  4772         MOV RR5, R1 ; R5 - pointer to low byte of binary number
1DA1 7B20       +1  4773         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  4774     
                +1  4775         ; 3. Convert cyrcle
1DA3            +1  4776     BIN30:
                +1  4777     
                +1  4778         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
1DA3 A905       +1  4779         MOV R1, RR5
1DA5 7A04       +1  4780         MOV R2, #NUMSIZE
1DA7 E7         +1  4781     BIN31:  MOV A, @R1
1DA8 33         +1  4782         RLC A
1DA9 F7         +1  4783         MOV @R1, A
1DAA 19         +1  4784         DEC R1
1DAB DAFA       +1  4785         DJNZ    R2, BIN31
1DAD A905       +1  4786         MOV R1, RR5
1DAF E7         +1  4787         MOV A, @R1
1DB0 92E0       +1  4788         MOV ACC.0, C
1DB2 F7         +1  4789         MOV @R1, A
                +1  4790     
                +1  4791         ; 3.2. Doubling decimal result with <Carry>
1DB3 A804       +1  4792         MOV R0, RR4
1DB5 7A05       +1  4793         MOV R2, #DECSIZE/2
1DB7 E6         +1  4794     BIN32:  MOV A, @R0
1DB8 36         +1  4795         ADDC    A, @R0
1DB9 D4         +1  4796         DA  A
1DBA F6         +1  4797         MOV @R0, A
1DBB 18         +1  4798         DEC R0
1DBC DAF9       +1  4799         DJNZ    R2, BIN32
                +1  4800     
                +1  4801         ; 3.3. End of convert cyrcle
1DBE DBE3       +1  4802         DJNZ    R3, BIN30
                +1  4803     
                +1  4804         ; 4. Make bytes from half-bytes
1DC0 E8         +1  4805         MOV A, R0
1DC1 240A       +1  4806         ADD A, #DECSIZE
1DC3 F8         +1  4807         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
1DC4 A904       +1  4808         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
1DC6 7A05       +1  4809         MOV R2, #DECSIZE/2
1DC8 E7         +1  4810     BIN41:  MOV A, @R1
1DC9 540F       +1  4811         ANL A, #00FH
1DCB F6         +1  4812         MOV @R0, A
1DCC 18         +1  4813         DEC R0
1DCD E7         +1  4814         MOV A, @R1
1DCE C4         +1  4815         SWAP    A
1DCF 540F       +1  4816         ANL A, #00FH
1DD1 F6         +1  4817         MOV @R0, A
1DD2 18         +1  4818         DEC R0
1DD3 19         +1  4819         DEC R1
1DD4 DAF2       +1  4820         DJNZ    R2, BIN41
1DD6 22         +1  4821         RET
                +1  4822     
                +1  4823     
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    77

                +1  4824     ;*********************************
                +1  4825     ;mov    r0,#abin
                +1  4826     ;mov    r1,#adec
                +1  4827     ; _ _ _ _       -выход
                +1  4828     ; ff0000
                +1  4829     ;0004
                +1  4830     ;мл      ст
                +1  4831     
                +1  4832     ;ст                       мл
                +1  4833     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  4834     ;                       2 5 5
                +1  4835     ;                   1 0 2 4
                +1  4836     
1DD7            +1  4837     DECBIN:
                +1  4838     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  4839     ; Input:
                +1  4840     ; R0 - pointer to destination,
                +1  4841     ; R1 - pointer to source (high digit is the first),
                +1  4842     ; NUMSIZE - byte count in binary number;
                +1  4843     ; DECSIZE - byte count in decimal number;
                +1  4844     ; Output:  none
                +1  4845     ; Source cleared
                +1  4846     
                +1  4847         ; 1. Clear result
1DD7 120000   F +1  4848         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  4849     
                +1  4850         ; 2. Prepare convertion
1DDA 18         +1  4851         DEC R0
1DDB 8804       +1  4852         MOV RR4, R0 ; R4 - pointer to high byte of binary result
1DDD 8905       +1  4853         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
1DDF 900000   F +1  4854         MOV DPTR, #DECT2
1DE2 7B20       +1  4855         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  4856     
                +1  4857         ; 3. Convert cyrcle
1DE4            +1  4858     DEC30:
                +1  4859     
                +1  4860         ; 3.1. Divide decimal number by 2 and prepare <Carry>
1DE4 C3         +1  4861         CLR C
1DE5 A905       +1  4862         MOV R1, RR5
1DE7 7A0A       +1  4863         MOV R2, #DECSIZE
1DE9 E7         +1  4864     DEC31:  MOV A, @R1
1DEA 540F       +1  4865         ANL A, #00FH
1DEC 92E4       +1  4866         MOV ACC.4, C
1DEE 93         +1  4867         MOVC    A,@A+DPTR
1DEF F7         +1  4868         MOV @R1, A
1DF0 A2E7       +1  4869         MOV C, ACC.7
1DF2 09         +1  4870         INC R1
1DF3 DAF4       +1  4871         DJNZ    R2, DEC31
                +1  4872     
                +1  4873         ; 3.2. Rotate binary result one bit to right with <Carry>
1DF5 A804       +1  4874         MOV R0, RR4
1DF7 7A04       +1  4875         MOV R2, #NUMSIZE
1DF9 E6         +1  4876     DEC32:  MOV A, @R0
1DFA 13         +1  4877         RRC A
1DFB F6         +1  4878         MOV @R0, A
1DFC 18         +1  4879         DEC R0
1DFD DAFA       +1  4880         DJNZ    R2, DEC32
                +1  4881     
                +1  4882         ; 3.3. End of convert cyrcle
1DFF DBE3       +1  4883         DJNZ    R3, DEC30
1E01 22         +1  4884         RET
                +1  4885     
1E02 00800181   +1  4886     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
1E06 02820383                
1E0A 0484                    
1E0C 00000000   +1  4887         DB  00,00,00,00,00,00
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    78

1E10 0000                    
1E12 05850686   +1  4888         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
1E16 07870888                
1E1A 0989                    
                +1  4889     
                +1  4890     ;   Long comparison
                +1  4891     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  4892     ;   flags and acc set as though a long subtraction was done.
                +1  4893     ;*******************************
                +1  4894     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  4895     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  4896     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  4897     ;*******************************
1E1C            +1  4898     lcmp:
1E1C C3         +1  4899         clr c
1E1D EA         +1  4900         mov a,r2
1E1E 9508       +1  4901         subb    a,8
1E20 700F       +1  4902         jnz done
1E22 EB         +1  4903         mov a,r3
1E23 9509       +1  4904         subb    a,9
1E25 7008       +1  4905         jnz done1
1E27 EC         +1  4906         mov a,r4
1E28 950A       +1  4907         subb    a,10
1E2A 7003       +1  4908         jnz done1
1E2C ED         +1  4909         mov a,r5
1E2D 950B       +1  4910         subb    a,11
1E2F            +1  4911     done1:
1E2F C2D2       +1  4912         clr ov      ;overflow is significant only for top byte
1E31            +1  4913     done:
1E31 22         +1  4914         ret
                +1  4915     
                +1  4916     ;   Load long into r2-5 from [dptr]
                +1  4917     
1E32            +1  4918     ldc_long:
1E32 E583       +1  4919         mov a,dph       ;is it in on board memory
1E34 6010       +1  4920         jz  onboard     ;yes
1E36 E4         +1  4921         clr a
1E37 93         +1  4922         movc    a,@a+dptr
1E38 FA         +1  4923         mov r2,a
1E39 7401       +1  4924         mov a,#1
1E3B 93         +1  4925         movc    a,@a+dptr
1E3C FB         +1  4926         mov r3,a
1E3D 7402       +1  4927         mov a,#2
1E3F 93         +1  4928         movc    a,@a+dptr
1E40 FC         +1  4929         mov r4,a
1E41 7403       +1  4930         mov a,#3
1E43 93         +1  4931         movc    a,@a+dptr
1E44 FD         +1  4932         mov r5,a
1E45 22         +1  4933         ret
1E46            +1  4934     onboard:
1E46 A882       +1  4935         mov r0,dpl
1E48 E6         +1  4936         mov a,@r0
1E49 FA         +1  4937         mov r2,a
1E4A 08         +1  4938         inc r0
1E4B E6         +1  4939         mov a,@r0
1E4C FB         +1  4940         mov r3,a
1E4D 08         +1  4941         inc r0
1E4E E6         +1  4942         mov a,@r0
1E4F FC         +1  4943         mov r4,a
1E50 08         +1  4944         inc r0
1E51 E6         +1  4945         mov a,@r0
1E52 FD         +1  4946         mov r5,a
1E53 22         +1  4947         ret
                +1  4948     
                +1  4949     ;**************************************
                +1  4950     ;загрузить ltemp...+3 из памяти программ
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    79

                +1  4951     ;mov    dptr,#CH5
                +1  4952     ;call   ldc_ltemp        ltemp <--5
                +1  4953     ;**************************************
1E54            +1  4954     ldc_ltemp:
1E54 E583       +1  4955         mov a,dph       ;is it in on board memory
1E56 6014       +1  4956         jz  oboard      ;yes
1E58 E4         +1  4957         clr a
1E59 93         +1  4958         movc    a,@a+dptr
1E5A F508       +1  4959         mov 8,a
1E5C 7401       +1  4960         mov a,#1
1E5E 93         +1  4961         movc    a,@a+dptr
1E5F F509       +1  4962         mov 9,a
1E61 7402       +1  4963         mov a,#2
1E63 93         +1  4964         movc    a,@a+dptr
1E64 F50A       +1  4965         mov 10,a
1E66 7403       +1  4966         mov a,#3
1E68 93         +1  4967         movc    a,@a+dptr
1E69 F50B       +1  4968         mov 11,a
1E6B 22         +1  4969         ret
1E6C            +1  4970     oboard:
1E6C A882       +1  4971         mov r0,dpl
1E6E 8608       +1  4972         mov 8,@r0
1E70 08         +1  4973         inc r0
1E71 8609       +1  4974         mov 9,@r0
1E73 08         +1  4975         inc r0
1E74 860A       +1  4976         mov 10,@r0
1E76 08         +1  4977         inc r0
1E77 860B       +1  4978         mov 11,@r0
1E79 22         +1  4979         ret
                +1  4980     
                +1  4981     ;*****************************
                +1  4982     ;mov    dptr,#k1
                +1  4983     ;call   ldx_long
                +1  4984     ;k1->r2..r5
                +1  4985     ;*****************************
                +1  4986     ;   Load long into r2-5 from [dptr]
                +1  4987     ;
                +1  4988     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
1E7A            +1  4989     ldx_long:
1E7A E583       +1  4990         mov a,dph       ;is it in on board memory
1E7C 6014       +1  4991         jz  onboar1        ;yes
1E7E C082       +1  4992         push    dpl
1E80 C083       +1  4993         push    dph
1E82 E0         +1  4994         movx    a,@dptr
1E83 FA         +1  4995         mov r2,a
1E84 A3         +1  4996         inc dptr
1E85 E0         +1  4997         movx    a,@dptr
1E86 FB         +1  4998         mov r3,a
1E87 A3         +1  4999         inc dptr
1E88 E0         +1  5000         movx    a,@dptr
1E89 FC         +1  5001         mov r4,a
1E8A A3         +1  5002         inc dptr
1E8B E0         +1  5003         movx    a,@dptr
1E8C FD         +1  5004         mov r5,a
1E8D D083       +1  5005         pop dph
1E8F D082       +1  5006         pop dpl
1E91 22         +1  5007         ret
1E92            +1  5008     onboar1:
1E92 A882       +1  5009         mov r0,dpl
1E94 E6         +1  5010         mov a,@r0
1E95 FA         +1  5011         mov r2,a
1E96 08         +1  5012         inc r0
1E97 E6         +1  5013         mov a,@r0
1E98 FB         +1  5014         mov r3,a
1E99 08         +1  5015         inc r0
1E9A E6         +1  5016         mov a,@r0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    80

1E9B FC         +1  5017         mov r4,a
1E9C 08         +1  5018         inc r0
1E9D E6         +1  5019         mov a,@r0
1E9E FD         +1  5020         mov r5,a
1E9F 22         +1  5021         ret
                +1  5022     
                +1  5023     ;*********************************
                +1  5024     ;mov    dptr,#k2
                +1  5025     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  5026     ;**********************************
1EA0            +1  5027     ldx_ltemp:
1EA0 E583       +1  5028         mov a,dph       ;is it in on board memory
1EA2 6010       +1  5029         jz  oboard1     ;yes
1EA4 E0         +1  5030         movx    a,@dptr
1EA5 F508       +1  5031         mov 8,a
1EA7 A3         +1  5032         inc dptr
1EA8 E0         +1  5033         movx    a,@dptr
1EA9 F509       +1  5034         mov 9,a
1EAB A3         +1  5035         inc dptr
1EAC E0         +1  5036         movx    a,@dptr
1EAD F50A       +1  5037         mov 10,a
1EAF A3         +1  5038         inc dptr
1EB0 E0         +1  5039         movx    a,@dptr
1EB1 F50B       +1  5040         mov 11,a
1EB3 22         +1  5041         ret
1EB4            +1  5042     oboard1:
1EB4 A882       +1  5043         mov r0,dpl
1EB6 8608       +1  5044         mov 8,@r0
1EB8 08         +1  5045         inc r0
1EB9 8609       +1  5046         mov 9,@r0
1EBB 08         +1  5047         inc r0
1EBC 860A       +1  5048         mov 10,@r0
1EBE 08         +1  5049         inc r0
1EBF 860B       +1  5050         mov 11,@r0
1EC1 22         +1  5051         ret
                +1  5052     ;   Long division routines for 8051
                +1  5053     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  5054     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  5055     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  5056     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  5057     ;   r1 must be saved by the caller.
                +1  5058     ;   This is long unsigned division.
                +1  5059     
                +1  5060     
                +1  5061     ;   Register usage:
                +1  5062     ;       r0 loop counter
                +1  5063     ;       xtemp (12-15) accumulates quotient
                +1  5064     ;       r5-r2 holds dividend
                +1  5065     ;       ltemp holds divisor
                +1  5066     
                +1  5067     ;************************************
                +1  5068     ;r2..r5-делимое
                +1  5069     ;ltemp..-делитель
                +1  5070     ;частное -r2..r5
                +1  5071     ;*************************************
1EC2            +1  5072     divide:
1EC2 E4         +1  5073         clr a
1EC3 F8         +1  5074         mov r0,a        ;initialize count
1EC4 F50C       +1  5075         mov xtemp,a     ;zero quotient
1EC6 F50D       +1  5076         mov xtemp+1,a
1EC8 F50E       +1  5077         mov xtemp+2,a
1ECA F50F       +1  5078         mov xtemp+3,a
1ECC ED         +1  5079         mov a,r5        ;check for zero dividend
1ECD 4C         +1  5080         orl a,r4
1ECE 4B         +1  5081         orl a,r3
1ECF 4A         +1  5082         orl a,r2
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    81

1ED0 600B       +1  5083         jz  jfinis
1ED2 E508       +1  5084         mov a,ltemp     ;check for zero divisor
1ED4 4509       +1  5085         orl a,ltemp+1
1ED6 450A       +1  5086         orl a,ltemp+2
1ED8 450B       +1  5087         orl a,ltemp+3
1EDA 7037       +1  5088         jnz midl
1EDC 22         +1  5089         ret
                +1  5090     
1EDD 020000   F +1  5091     jfinis: jmp finis
                +1  5092     
1EE0            +1  5093     loops:
1EE0 EA         +1  5094         mov a,r2
1EE1 C3         +1  5095         clr c
1EE2 9508       +1  5096         subb    a,ltemp+0   ;is divisor greater than dividend yet
1EE4 4033       +1  5097         jc  yes     ;yes, go no further
1EE6 7013       +1  5098         jnz no
1EE8 EB         +1  5099         mov a,r3
1EE9 9509       +1  5100         subb    a,ltemp+1
1EEB 402C       +1  5101         jc  yes
1EED 700C       +1  5102         jnz no
1EEF EC         +1  5103         mov a,r4
1EF0 950A       +1  5104         subb    a,ltemp+2
1EF2 4025       +1  5105         jc  yes
1EF4 7005       +1  5106         jnz no
1EF6 ED         +1  5107         mov a,r5
1EF7 950B       +1  5108         subb    a,ltemp+3
1EF9 401E       +1  5109         jc  yes
1EFB            +1  5110     no:
1EFB E50B       +1  5111         mov a,ltemp+3   ;shift divisor up one bit
1EFD 250B       +1  5112         add a,ltemp+3
1EFF F50B       +1  5113         mov ltemp+3,a
1F01 E50A       +1  5114         mov a,ltemp+2
1F03 350A       +1  5115         addc    a,ltemp+2
1F05 F50A       +1  5116         mov ltemp+2,a
1F07 E509       +1  5117         mov a,ltemp+1
1F09 3509       +1  5118         addc    a,ltemp+1
1F0B F509       +1  5119         mov ltemp+1,a
1F0D E508       +1  5120         mov a,ltemp+0
1F0F 3508       +1  5121         addc    a,ltemp+0
1F11 F508       +1  5122         mov ltemp+0,a
1F13            +1  5123     midl:
1F13 08         +1  5124         inc r0      ;increment count
1F14 E508       +1  5125         mov a,ltemp+0   ;check for safe to shift some more
1F16 30E7C7     +1  5126         jnb acc.7,loops  ;loop if top bit clear
1F19            +1  5127     yes:
1F19 E508       +1  5128         mov a,ltemp+0
1F1B C3         +1  5129         clr c
1F1C 9A         +1  5130         subb    a,r2        ;can we subtract now?
1F1D 401A       +1  5131         jc  dosub       ;yes, go and do it
1F1F 7015       +1  5132         jnz nosub
1F21 E509       +1  5133         mov a,ltemp+1
1F23 9B         +1  5134         subb    a,r3
1F24 4013       +1  5135         jc  dosub
1F26 700E       +1  5136         jnz nosub
1F28 E50A       +1  5137         mov a,ltemp+2
1F2A 9C         +1  5138         subb    a,r4
1F2B 400C       +1  5139         jc  dosub
1F2D 7007       +1  5140         jnz nosub
1F2F E50B       +1  5141         mov a,ltemp+3
1F31 9D         +1  5142         subb    a,r5
1F32 4005       +1  5143         jc  dosub
1F34 6003       +1  5144         jz  dosub
1F36            +1  5145     nosub:
1F36 C3         +1  5146         clr c
1F37 8012       +1  5147         sjmp    dosh
1F39            +1  5148     dosub:
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    82

1F39 C3         +1  5149         clr c       ;subtract divisor from dividend
1F3A ED         +1  5150         mov a,r5
1F3B 950B       +1  5151         subb    a,ltemp+3
1F3D FD         +1  5152         mov r5,a
1F3E EC         +1  5153         mov a,r4
1F3F 950A       +1  5154         subb    a,ltemp+2
1F41 FC         +1  5155         mov r4,a
1F42 EB         +1  5156         mov a,r3
1F43 9509       +1  5157         subb    a,ltemp+1
1F45 FB         +1  5158         mov r3,a
1F46 EA         +1  5159         mov a,r2
1F47 9508       +1  5160         subb    a,ltemp+0
1F49 FA         +1  5161         mov r2,a
1F4A D3         +1  5162         setb    c       ;now set bit for quotient
1F4B            +1  5163     dosh:
1F4B E50F       +1  5164         mov a,xtemp+3
1F4D 33         +1  5165         rlc a
1F4E F50F       +1  5166         mov xtemp+3,a
1F50 E50E       +1  5167         mov a,xtemp+2
1F52 33         +1  5168         rlc a
1F53 F50E       +1  5169         mov xtemp+2,a
1F55 E50D       +1  5170         mov a,xtemp+1
1F57 33         +1  5171         rlc a
1F58 F50D       +1  5172         mov xtemp+1,a
1F5A E50C       +1  5173         mov a,xtemp+0
1F5C 33         +1  5174         rlc a
1F5D F50C       +1  5175         mov xtemp+0,a
1F5F E508       +1  5176         mov a,ltemp+0       ;shift divisor down
1F61 C3         +1  5177         clr c
1F62 13         +1  5178         rrc a
1F63 F508       +1  5179         mov ltemp+0,a
1F65 E509       +1  5180         mov a,ltemp+1
1F67 13         +1  5181         rrc a
1F68 F509       +1  5182         mov ltemp+1,a
1F6A E50A       +1  5183         mov a,ltemp+2
1F6C 13         +1  5184         rrc a
1F6D F50A       +1  5185         mov ltemp+2,a
1F6F E50B       +1  5186         mov a,ltemp+3
1F71 13         +1  5187         rrc a
1F72 F50B       +1  5188         mov ltemp+3,a
                +1  5189     
1F74 D8A3       +1  5190         djnz    r0,yes      ;and continue with the rest
                +1  5191     
1F76            +1  5192     finis:
1F76 8D0B       +1  5193         mov ltemp+3,r5
1F78 8C0A       +1  5194         mov ltemp+2,r4
1F7A 8B09       +1  5195         mov ltemp+1,r3
1F7C 8A08       +1  5196         mov ltemp+0,r2
1F7E AD0F       +1  5197         mov r5,xtemp+3
1F80 AC0E       +1  5198         mov r4,xtemp+2
1F82 AB0D       +1  5199         mov r3,xtemp+1
1F84 AA0C       +1  5200         mov r2,xtemp+0
1F86 22         +1  5201         ret         ;and return with the satisfaction of a job well done
                +1  5202     
                +1  5203     
                +1  5204     ;   Long multiplication
                +1  5205     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  5206     ;   other in ltemp. It really doesn't matter which one is where.
                +1  5207     
                +1  5208     ;**********************************
                +1  5209     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  5210     ;ст  мл
                +1  5211     ;**********************************
1F87            +1  5212     llmul:
1F87            +1  5213     almul:
1F87            +1  5214     lmul:
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    83

1F87 ED         +1  5215         mov a,r5        ;low order byte
1F88 850BF0     +1  5216         mov b,ltemp+3       ;times low order byte
1F8B A4         +1  5217         mul ab
1F8C F50F       +1  5218         mov xtemp+3,a       ;store low
1F8E 85F00E     +1  5219         mov xtemp+2,b   ;and high
1F91 ED         +1  5220         mov a,r5        ;low order
1F92 850AF0     +1  5221         mov b,ltemp+2   ;times next
1F95 A4         +1  5222         mul ab
1F96 250E       +1  5223         add a,xtemp+2   ;add in
1F98 F50E       +1  5224         mov xtemp+2,a
1F9A E5F0       +1  5225         mov a,b
1F9C 3400       +1  5226         addc    a,#0
1F9E F50D       +1  5227         mov xtemp+1,a
1FA0 ED         +1  5228         mov a,r5
1FA1 8509F0     +1  5229         mov b,ltemp+1
1FA4 A4         +1  5230         mul ab
1FA5 250D       +1  5231         add a,xtemp+1
1FA7 F50D       +1  5232         mov xtemp+1,a
1FA9 E5F0       +1  5233         mov a,b
1FAB 3400       +1  5234         addc    a,#0
1FAD F50C       +1  5235         mov xtemp+0,a
1FAF ED         +1  5236         mov a,r5
1FB0 8508F0     +1  5237         mov b,ltemp+0
1FB3 A4         +1  5238         mul ab
1FB4 250C       +1  5239         add a,xtemp+0
1FB6 F50C       +1  5240         mov xtemp+0,a
1FB8 EC         +1  5241         mov a,r4
1FB9 850BF0     +1  5242         mov b,ltemp+3
1FBC A4         +1  5243         mul ab
1FBD 250E       +1  5244         add a,xtemp+2
1FBF F50E       +1  5245         mov xtemp+2,a
1FC1 E5F0       +1  5246         mov a,b
1FC3 350D       +1  5247         addc    a,xtemp+1
1FC5 F50D       +1  5248         mov xtemp+1,a
1FC7 E50C       +1  5249         mov a,xtemp+0
1FC9 3400       +1  5250         addc    a,#0
1FCB F50C       +1  5251         mov xtemp+0,a
1FCD EC         +1  5252         mov a,r4
1FCE 850AF0     +1  5253         mov b,ltemp+2
1FD1 A4         +1  5254         mul ab
1FD2 250D       +1  5255         add a,xtemp+1
1FD4 F50D       +1  5256         mov xtemp+1,a
1FD6 E5F0       +1  5257         mov a,b
1FD8 350C       +1  5258         addc    a,xtemp+0
1FDA F50C       +1  5259         mov xtemp+0,a
1FDC EC         +1  5260         mov a,r4
1FDD 8509F0     +1  5261         mov b,ltemp+1
1FE0 A4         +1  5262         mul ab
1FE1 250C       +1  5263         add a,xtemp+0
1FE3 F50C       +1  5264         mov xtemp+0,a
                +1  5265     
1FE5 EB         +1  5266         mov a,r3
1FE6 850BF0     +1  5267         mov b,ltemp+3
1FE9 A4         +1  5268         mul ab
1FEA 250D       +1  5269         add a,xtemp+1
1FEC F50D       +1  5270         mov xtemp+1,a
1FEE E5F0       +1  5271         mov a,b
1FF0 350C       +1  5272         addc    a,xtemp+0
1FF2 F50C       +1  5273         mov xtemp+0,a
1FF4 EB         +1  5274         mov a,r3
1FF5 850AF0     +1  5275         mov b,ltemp+2
1FF8 A4         +1  5276         mul ab
1FF9 250C       +1  5277         add a,xtemp+0
1FFB F50C       +1  5278         mov xtemp+0,a
                +1  5279     
1FFD EA         +1  5280         mov a,r2
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    84

1FFE 850BF0     +1  5281         mov b,ltemp+3
2001 A4         +1  5282         mul ab
2002 250C       +1  5283         add a,xtemp+0
2004 FA         +1  5284         mov r2,a
2005 AB0D       +1  5285         mov r3,xtemp+1
2007 AC0E       +1  5286         mov r4,xtemp+2
2009 AD0F       +1  5287         mov r5,xtemp+3
                +1  5288     
200B 22         +1  5289         ret         ;all done
                +1  5290     ;******************************
                +1  5291     ;из содержимого  r2-r5  вычесть
                +1  5292     ;содержимое          ltemp..ltemp+3
                +1  5293     ;******************************
200C            +1  5294     llsub:
200C            +1  5295      lsub:
200C ED         +1  5296         mov a,r5
200D C3         +1  5297         clr c
200E 950B       +1  5298         subb    a,11
2010 FD         +1  5299         mov r5,a
2011 EC         +1  5300         mov a,r4
2012 950A       +1  5301         subb    a,10
2014 FC         +1  5302         mov r4,a
2015 EB         +1  5303         mov a,r3
2016 9509       +1  5304         subb    a,9
2018 FB         +1  5305         mov r3,a
2019 EA         +1  5306         mov a,r2
201A 9508       +1  5307         subb    a,8
201C FA         +1  5308         mov r2,a
201D 22         +1  5309         ret
                +1  5310     
                +1  5311     ;***********************************************
                +1  5312     ;                                                      ст мл
                +1  5313     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5314     ;  r0- адрес младшего байта !!!
                +1  5315     ;результат- r2..r5
                +1  5316     ;***********************************************
                +1  5317     
201E C3         +1  5318     ladd:    clr       c
201F ED         +1  5319          mov       a,r5
2020 26         +1  5320          add       a,@r0
2021 FD         +1  5321          mov       r5,a
2022 18         +1  5322          dec       r0
2023 EC         +1  5323          mov       a,r4
2024 36         +1  5324          addc      a,@r0
2025 FC         +1  5325          mov       r4,a
2026 18         +1  5326          dec       r0
2027 EB         +1  5327          mov       a,r3
2028 36         +1  5328          addc      a,@r0
2029 FB         +1  5329          mov       r3,a
202A 18         +1  5330          dec       r0
202B EA         +1  5331          mov       a,r2
202C 36         +1  5332          addc      a,@r0
202D FA         +1  5333          mov       r2,a
202E 22         +1  5334          ret
                +1  5335     ;***********************************************
                +1  5336     ;                                                      ст мл
                +1  5337     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5338     ;  r0- адрес младшего байта !!!
                +1  5339     ;результат- r2..r5
                +1  5340     ;***********************************************
                +1  5341     
202F C3         +1  5342     laddx:    clr       c
2030 E2         +1  5343                                             movx            a,@r0
2031 2D         +1  5344                                             add                     a,r5
2032 FD         +1  5345               mov     r5,a
2033 18         +1  5346                             dec     r0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    85

2034 E2         +1  5347                             movx    a,@r0
2035 3C         +1  5348                             addc    a,r4
2036 FC         +1  5349                             mov     r4,a
2037 18         +1  5350                             dec     r0
2038 E2         +1  5351                             movx    a,@r0
2039 3B         +1  5352                             addc    a,r3
203A FB         +1  5353                             mov     r3,a
203B 18         +1  5354                             dec     r0
203C E2         +1  5355                             movx    a,@r0
203D 3A         +1  5356                             addc    a,r2
203E FA         +1  5357                             mov       r2,a
203F 22         +1  5358                             ret
                +1  5359     
                +1  5360     ;***********************************************
                +1  5361     ;                                                      ст мл
                +1  5362     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5363     ;  dptr- адрес младшего байта !!!
                +1  5364     ;результат- r2..r5
                +1  5365     ;***********************************************
                +1  5366     
2040 C3         +1  5367     addx:    clr       c
2041 E0         +1  5368                                             movx            a,@dptr
2042 2D         +1  5369                                             add                     a,r5
2043 FD         +1  5370               mov     r5,a
2044 120000   F +1  5371                             call            dedptr;dec     dptr
2047 E0         +1  5372                             movx    a,@dptr
2048 3C         +1  5373                             addc    a,r4
2049 FC         +1  5374                             mov     r4,a
204A 120000   F +1  5375                             call            dedptr;dec     dptr
204D E0         +1  5376                             movx    a,@dptr
204E 3B         +1  5377                             addc    a,r3
204F FB         +1  5378                             mov     r3,a
2050 120000   F +1  5379                             call            dedptr;dec     dptr
2053 E0         +1  5380                             movx    a,@dptr
2054 3A         +1  5381                             addc    a,r2
2055 FA         +1  5382                             mov       r2,a
2056 22         +1  5383                             ret
                +1  5384     
2057 C0D0       +1  5385     dedptr:         push    psw
2059 C3         +1  5386                                             clr             c
205A E582       +1  5387                                             mov             a,dpl
205C 9401       +1  5388                                             subb    a,#1
205E F582       +1  5389                                             mov             dpl,a
2060 E583       +1  5390                                             mov             a,dph
2062 9400       +1  5391                                             subb    a,#0
2064 F583       +1  5392                                             mov             dph,a
2066 D0D0       +1  5393                                             pop             psw
2068 22         +1  5394                                             ret
                    5395     
                    5396     ;$include (d:\amp\floatm.asm)
                +1  5397     ;       Copyright (C) 1988 HI-TECH Software
                +1  5398     
                +1  5399     ;       Single Precision Floating point arithmetic routines for 8051
                +1  5400     
                +1  5401     ;       The format of floating point numbers is as follows:
                +1  5402     
                +1  5403     ;       -----------------
                +1  5404     ;       *     sign      *  1 bit
                +1  5405     ;       -----------------
                +1  5406     ;       *   exponent    *  8 bits
                +1  5407     ;       -----------------
                +1  5408     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  5409     ;       -----------------
                +1  5410     
                +1  5411     
                +1  5412     ;       As usual for the 8051 the memory layout has the most significant
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    86

                +1  5413     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  5414     ;       lowest address.
                +1  5415     
                +1  5416     ;       Calling conventions:
                +1  5417     
                +1  5418     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  5419     ;
                +1  5420     ;       Return value is in r2-r5
                +1  5421     
                +1  5422     ;       Naming conventions: A routine name is constructed by
                +1  5423     
                +1  5424     ;             ASOP
                +1  5425     
                +1  5426     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  5427     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  5428     ;       Conversion routines are named
                +1  5429     
                +1  5430     ;               AStof
                +1  5431     
                +1  5432     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  5433     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  5434     ;       Conversion from float to integer is ftol.
                +1  5435     
                +1  5436     ;               .ORG  5000h
                +1  5437     ;               .CODE
                +1  5438     ;       seg     c_text
                +1  5439     
                +1  5440     ;;      $MOD812
----            +1  5441             CSEG
                +1  5442             ;ORG 1000h
                +1  5443     
                +1  5444                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  5445             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  5446     
                +1  5447     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  5448     ;       macros
                +1  5449     
                +1  5450     saveregs        macro
                +1  5451             push    7
                +1  5452             push    6
                +1  5453             push    1
                +1  5454             push    0
                +1  5455             endm
                +1  5456     
                +1  5457     restregs        macro
                +1  5458             pop     0
                +1  5459             pop     1
                +1  5460             pop     6
                +1  5461             pop     7
                +1  5462             endm
                +1  5463     
                +1  5464     ;addr   
                +1  5465     dan     macro   pad
                +1  5466             mov     a,r5
                +1  5467             add     a,pad+3
                +1  5468             mov     pad+3,a
                +1  5469             mov     a,pad+2
                +1  5470             addc    a,r4
                +1  5471             mov     pad+2,a
                +1  5472             mov     a,pad+1
                +1  5473             addc    a,r3
                +1  5474             mov     pad+1,a
                +1  5475             mov     a,pad+0
                +1  5476             addc    a,r2
                +1  5477             mov     pad,a
                +1  5478             endm
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    87

                +1  5479     
                +1  5480     addl    macro  addr
                +1  5481             mov     a,r5
                +1  5482             add     a,addr+3
                +1  5483             mov     r5,a
                +1  5484             mov     a,addr+2
                +1  5485             addc    a,r4
                +1  5486             mov     r4,a
                +1  5487             mov     a,addr+1
                +1  5488             addc    a,r3
                +1  5489             mov     r3,a
                +1  5490             mov     a,addr+0
                +1  5491             addc    a,r2
                +1  5492             mov     r2,a
                +1  5493             endm
                +1  5494     
                +1  5495     
                +1  5496     add1    macro
                +1  5497             mov     a,r5
                +1  5498             add     a,#1
                +1  5499             mov     r5,a
                +1  5500             clr     a
                +1  5501             addc    a,r4
                +1  5502             mov     r4,a
                +1  5503             clr     a
                +1  5504             addc    a,r3
                +1  5505             mov     r3,a
                +1  5506             clr     a
                +1  5507             addc    a,r2
                +1  5508             mov     r2,a
                +1  5509             endm
                +1  5510     
                +1  5511     shfdn   macro  addr
                +1  5512             clr     c
                +1  5513             mov     a,addr
                +1  5514             rrc     a
                +1  5515             mov     addr,a
                +1  5516             mov     a,addr+1
                +1  5517             rrc     a
                +1  5518             mov     addr+1,a
                +1  5519             mov     a,addr+2
                +1  5520             rrc     a
                +1  5521             mov     addr+2,a
                +1  5522             mov     a,addr+3
                +1  5523             rrc     a
                +1  5524             mov     addr+3,a
                +1  5525             endm
                +1  5526     
                +1  5527     shfup   macro  addr
                +1  5528             clr     c
                +1  5529             mov     a,addr+3
                +1  5530             rlc     a
                +1  5531             mov     addr+3,a
                +1  5532             mov     a,addr+2
                +1  5533             rlc     a
                +1  5534             mov     addr+2,a
                +1  5535             mov     a,addr+1
                +1  5536             rlc     a
                +1  5537             mov     addr+1,a
                +1  5538             mov     a,addr
                +1  5539             rlc     a
                +1  5540             mov     addr,a
                +1  5541             endm
                +1  5542     
                +1  5543     rshift  macro
                +1  5544             clr     c
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    88

                +1  5545             mov     a,r2
                +1  5546             rrc     a
                +1  5547             mov     r2,a
                +1  5548             mov     a,r3
                +1  5549             rrc     a
                +1  5550             mov     r3,a
                +1  5551             mov     a,r4
                +1  5552             rrc     a
                +1  5553             mov     r4,a
                +1  5554             mov     a,r5
                +1  5555             rrc     a
                +1  5556             mov     r5,a
                +1  5557             endm
                +1  5558     rshift1 macro
                +1  5559             setb    c
                +1  5560             mov     a,r2
                +1  5561             rrc     a
                +1  5562             mov     r2,a
                +1  5563             mov     a,r3
                +1  5564             rrc     a
                +1  5565             mov     r3,a
                +1  5566             mov     a,r4
                +1  5567             rrc     a
                +1  5568             mov     r4,a
                +1  5569             mov     a,r5
                +1  5570             rrc     a
                +1  5571             mov     r5,a
                +1  5572             endm
                +1  5573     
                +1  5574     
                +1  5575     lshift  macro
                +1  5576             mov     a,r5
                +1  5577             rlc     a
                +1  5578             mov     r5,a
                +1  5579             mov     a,r4
                +1  5580             rlc     a
                +1  5581             mov     r4,a
                +1  5582             mov     a,r3
                +1  5583             rlc     a
                +1  5584             mov     r3,a
                +1  5585             mov     a,r2
                +1  5586             rlc     a
                +1  5587             mov     r2,a
                +1  5588             endm
                +1  5589     
                +1  5590     neg1    macro
                +1  5591             clr     c
                +1  5592             clr     a
                +1  5593             subb    a,r5
                +1  5594             mov     r5,a
                +1  5595             clr     a
                +1  5596             subb    a,r4
                +1  5597             mov     r4,a
                +1  5598             clr     a
                +1  5599             subb    a,r3
                +1  5600             mov     r3,a
                +1  5601             clr     a
                +1  5602             subb    a,r2
                +1  5603             mov     r2,a
                +1  5604             endm
                +1  5605     
                +1  5606     negm    macro  addr
                +1  5607             clr     c
                +1  5608             clr     a
                +1  5609             subb    a,addr+3
                +1  5610             mov     addr+3,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    89

                +1  5611             clr     a
                +1  5612             subb    a,addr+2
                +1  5613             mov     addr+2,a
                +1  5614             clr     a
                +1  5615             subb    a,addr+1
                +1  5616             mov     addr+1,a
                +1  5617             clr     a
                +1  5618             subb    a,addr
                +1  5619             mov     addr,a
                +1  5620             endm
                +1  5621     
                +1  5622     copytor macro  addr
                +1  5623             mov     r2,addr
                +1  5624             mov     r3,addr+1
                +1  5625             mov     r4,addr+2
                +1  5626             mov     r5,addr+3
                +1  5627             endm
                +1  5628     
                +1  5629     
                +1  5630     copyrto macro  addr
                +1  5631             mov     addr,r2
                +1  5632             mov     addr+1,r3
                +1  5633             mov     addr+2,r4
                +1  5634             mov     addr+3,r5
                +1  5635             endm
                +1  5636     
                +1  5637     
                +1  5638     ;       Internal representation: in this set of routines a floating number
                +1  5639     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  5640     
                +1  5641     ;       Stack offset values
                +1  5642     ;ltemp   equ     28h
                +1  5643     
  0006          +1  5644     cntr    equ     6               ;r6 is the counter
  0007          +1  5645     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  5646     exp1    equ     0               ;exponent 1 in r0
  0002          +1  5647     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  5648     exp2    equ     1               ;exponent 1 in r1
  0008          +1  5649     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  5650     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  5651     
                +1  5652     
                +1  5653     
                +1  5654     
                +1  5655     
                +1  5656     ;DECSIZE EQU     10
                +1  5657     ;NUMSIZE EQU     4
                +1  5658     ;RR4     EQU     4
                +1  5659     ;RR5     EQU     5
                +1  5660     
                +1  5661     ;       unpack1 - unpacks the left operand
                +1  5662     
009E            +1  5663     unpack1:
009E EA         +1  5664             mov     a,r2            ;get sign
009F 5480       +1  5665             anl     a,#80h
00A1 530740     +1  5666             anl     sign,#40h       ;clear other bits
00A4 4207       +1  5667             orl     sign,a          ;store sign
00A6 EB         +1  5668             mov     a,r3            ;get lsb of exponent
00A7 33         +1  5669             rlc     a               ;rotate into carry
00A8 EA         +1  5670             mov     a,r2            ;get rest of exponent
00A9 33         +1  5671             rlc     a               ;and make it 8 bits
00AA F8         +1  5672             mov     r0,a            ;store it
00AB 6006       +1  5673             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  5674             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  5675             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  5676             ret
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    90

00B3            +1  5677     zer1:
00B3 E4         +1  5678             clr     a
00B4 FA         +1  5679             mov     r2,a
00B5 FB         +1  5680             mov     r3,a
00B6 FC         +1  5681             mov     r4,a
00B7 FD         +1  5682             mov     r5,a            ;zero mantissa
00B8 F8         +1  5683             mov     r0,a            ;zero exponent
00B9 22         +1  5684             ret
                +1  5685     
                +1  5686     ;       unpack2 - unpacks right operand
                +1  5687     
00BA            +1  5688     unpack2:
00BA E508       +1  5689             mov     a,ltemp         ;get sign
00BC 13         +1  5690             rrc     a               ;shift down
00BD 5440       +1  5691             anl     a,#40h          ;mask out sign
00BF 530780     +1  5692             anl     sign,#80h       ;clear old bit
00C2 4207       +1  5693             orl     sign,a
00C4 E509       +1  5694             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  5695             rlc     a               ;rotate into carry
00C7 E508       +1  5696             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  5697             rlc     a               ;and make it 8 bits
00CA F9         +1  5698             mov     r1,a            ;store it
00CB 6007       +1  5699             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  5700             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  5701             mov     mant2,#0        ;clear upper byte
00D3 22         +1  5702             ret
00D4            +1  5703     zer2:
00D4 E4         +1  5704             clr     a
00D5 F508       +1  5705             mov     ltemp,a
00D7 F509       +1  5706             mov     ltemp+1,a
00D9 F50A       +1  5707             mov     ltemp+2,a
00DB F50B       +1  5708             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  5709             ret
                +1  5710     
                +1  5711     ;       pack1 - put operand 1 back into float format
                +1  5712     
00DE            +1  5713     pack1:
00DE E8         +1  5714             mov     a,r0            ;get exponent
00DF C3         +1  5715             clr     c
00E0 13         +1  5716             rrc     a               ;shift down 1 bit
00E1 530780     +1  5717             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  5718             orl     a,r7            ;or in sign bit
00E5 FA         +1  5719             mov     r2,a            ;store
00E6 E8         +1  5720             mov     a,r0            ;get other bit
00E7 03         +1  5721             rr      a               ;rotate into hi bit
00E8 5480       +1  5722             anl     a,#80h          ;mask
00EA 53037F     +1  5723             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  5724             orl     mant1+1,a       ;put in
00EF 22         +1  5725             ret
                +1  5726     
                +1  5727     
                +1  5728     ;       norm1 - normalize the unpacked value in 1
                +1  5729     
00F0            +1  5730     norm1:
00F0 E8         +1  5731             mov     a,r0            ;get exponent
00F1 60C0       +1  5732             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  5733             mov     a,r2            ;get hi byte
00F4 6023       +1  5734             jz      norup           ;zero, so shift up if anything
00F6            +1  5735     nordn:
00F6 EA         +1  5736             mov     a,r2            ;get hi byte
00F7 B4010D     +1  5737             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  5738+3           add1                    ;add in a rounding bit
00FA ED         +1  5739+1           mov     a,r5
00FB 2401       +1  5740+1           add     a,#1
00FD FD         +1  5741+1           mov     r5,a
00FE E4         +1  5742+1           clr     a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    91

00FF 3C         +1  5743+1           addc    a,r4
0100 FC         +1  5744+1           mov     r4,a
0101 E4         +1  5745+1           clr     a
0102 3B         +1  5746+1           addc    a,r3
0103 FB         +1  5747+1           mov     r3,a
0104 E4         +1  5748+1           clr     a
0105 3A         +1  5749+1           addc    a,r2
0106 FA         +1  5750+1           mov     r2,a
0107            +1  5751     nordn1:
                +1  5752+3           rshift                  ;shift down 1 bit
0107 C3         +1  5753+1           clr     c
0108 EA         +1  5754+1           mov     a,r2
0109 13         +1  5755+1           rrc     a
010A FA         +1  5756+1           mov     r2,a
010B EB         +1  5757+1           mov     a,r3
010C 13         +1  5758+1           rrc     a
010D FB         +1  5759+1           mov     r3,a
010E EC         +1  5760+1           mov     a,r4
010F 13         +1  5761+1           rrc     a
0110 FC         +1  5762+1           mov     r4,a
0111 ED         +1  5763+1           mov     a,r5
0112 13         +1  5764+1           rrc     a
0113 FD         +1  5765+1           mov     r5,a
0114 08         +1  5766             inc     r0              ;adjust exponent
0115 EA         +1  5767             mov     a,r2            ;test high byte
0116 70DE       +1  5768             jnz     nordn           ;loop
0118 22         +1  5769             ret                     ;done
                +1  5770     
0119            +1  5771     norup:
0119 4B         +1  5772             orl     a,r3
011A 4C         +1  5773             orl     a,r4
011B 4D         +1  5774             orl     a,r5            ;test for zero mantissa
011C 6095       +1  5775             jz      zer1            ;it is - make it true zero
011E            +1  5776     norup1:
011E EB         +1  5777             mov     a,r3            ;get mantissa byte
011F 20E710     +1  5778             jb      acc.7,norup2    ;jump if set
0122 C3         +1  5779             clr     c
                +1  5780+3           lshift                  ;shift mantissa up
0123 ED         +1  5781+1           mov     a,r5
0124 33         +1  5782+1           rlc     a
0125 FD         +1  5783+1           mov     r5,a
0126 EC         +1  5784+1           mov     a,r4
0127 33         +1  5785+1           rlc     a
0128 FC         +1  5786+1           mov     r4,a
0129 EB         +1  5787+1           mov     a,r3
012A 33         +1  5788+1           rlc     a
012B FB         +1  5789+1           mov     r3,a
012C EA         +1  5790+1           mov     a,r2
012D 33         +1  5791+1           rlc     a
012E FA         +1  5792+1           mov     r2,a
012F 18         +1  5793             dec     r0              ;adjust exponent
0130 80EC       +1  5794             jmp     norup1
0132            +1  5795     norup2:
0132 22         +1  5796             ret                     ;finito
                +1  5797     
                +1  5798     
                +1  5799     ;       fpdenorm - denormalize one of the two operands so that their
                +1  5800     ;       exponents are equal. This requires the smaller number to have
                +1  5801     ;       its exponent incremented and its mantissa shifted right.
                +1  5802     
0133            +1  5803     denorm:
0133 E8         +1  5804             mov     a,r0
0134 C3         +1  5805             clr     c
0135 99         +1  5806             subb    a,r1            ;compare exponents
0136 5029       +1  5807             jnc     up2a            ;shift operand 2
0138            +1  5808     up1:
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    92

0138 08         +1  5809             inc     r0              ;increment exponent
                +1  5810+3           rshift                  ;shift mantissa down
0139 C3         +1  5811+1           clr     c
013A EA         +1  5812+1           mov     a,r2
013B 13         +1  5813+1           rrc     a
013C FA         +1  5814+1           mov     r2,a
013D EB         +1  5815+1           mov     a,r3
013E 13         +1  5816+1           rrc     a
013F FB         +1  5817+1           mov     r3,a
0140 EC         +1  5818+1           mov     a,r4
0141 13         +1  5819+1           rrc     a
0142 FC         +1  5820+1           mov     r4,a
0143 ED         +1  5821+1           mov     a,r5
0144 13         +1  5822+1           rrc     a
0145 FD         +1  5823+1           mov     r5,a
0146 E8         +1  5824             mov     a,r0
0147 B501EE     +1  5825             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  5826             ret
                +1  5827     
014B            +1  5828     up2:
014B 09         +1  5829             inc     r1              ;increment exponent 2
                +1  5830+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  5831+1           clr     c
014D E508       +1  5832+1           mov     a,mant2
014F 13         +1  5833+1           rrc     a
0150 F508       +1  5834+1           mov     mant2,a
0152 E509       +1  5835+1           mov     a,mant2+1
0154 13         +1  5836+1           rrc     a
0155 F509       +1  5837+1           mov     mant2+1,a
0157 E50A       +1  5838+1           mov     a,mant2+2
0159 13         +1  5839+1           rrc     a
015A F50A       +1  5840+1           mov     mant2+2,a
015C E50B       +1  5841+1           mov     a,mant2+3
015E 13         +1  5842+1           rrc     a
015F F50B       +1  5843+1           mov     mant2+3,a
0161            +1  5844     up2a:
0161 E8         +1  5845             mov     a,r0            ;compare exponents
0162 B501E6     +1  5846             cjne    a,exp2,up2
0165 22         +1  5847             ret                     ;all done
                +1  5848     ;------------------------------------------------------------------
                +1  5849     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  5850     
0166            +1  5851     fladd:
                +1  5852+3           saveregs
0166 C007       +1  5853+1           push    7
0168 C006       +1  5854+1           push    6
016A C001       +1  5855+1           push    1
016C C000       +1  5856+1           push    0
016E 119E       +1  5857             call    unpack1
0170 11BA       +1  5858             call    unpack2
0172 3133       +1  5859             call    denorm
0174 E507       +1  5860             mov     a,sign
0176 30E70D     +1  5861             jnb     acc.7,ok1       ;test left sign
                +1  5862+3           neg1                    ;negate op1
0179 C3         +1  5863+1           clr     c
017A E4         +1  5864+1           clr     a
017B 9D         +1  5865+1           subb    a,r5
017C FD         +1  5866+1           mov     r5,a
017D E4         +1  5867+1           clr     a
017E 9C         +1  5868+1           subb    a,r4
017F FC         +1  5869+1           mov     r4,a
0180 E4         +1  5870+1           clr     a
0181 9B         +1  5871+1           subb    a,r3
0182 FB         +1  5872+1           mov     r3,a
0183 E4         +1  5873+1           clr     a
0184 9A         +1  5874+1           subb    a,r2
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    93

0185 FA         +1  5875+1           mov     r2,a
0186            +1  5876     ok1:
0186 E507       +1  5877             mov     a,sign
0188 30E615     +1  5878             jnb     acc.6,ok2       ;test right sign
                +1  5879+3           negm    mant2           ;negate op2
018B C3         +1  5880+1           clr     c
018C E4         +1  5881+1           clr     a
018D 950B       +1  5882+1           subb    a,mant2+3
018F F50B       +1  5883+1           mov     mant2+3,a
0191 E4         +1  5884+1           clr     a
0192 950A       +1  5885+1           subb    a,mant2+2
0194 F50A       +1  5886+1           mov     mant2+2,a
0196 E4         +1  5887+1           clr     a
0197 9509       +1  5888+1           subb    a,mant2+1
0199 F509       +1  5889+1           mov     mant2+1,a
019B E4         +1  5890+1           clr     a
019C 9508       +1  5891+1           subb    a,mant2
019E F508       +1  5892+1           mov     mant2,a
01A0            +1  5893     ok2:
                +1  5894+3           addl    mant2           ;add mantissas
01A0 ED         +1  5895+1           mov     a,r5
01A1 250B       +1  5896+1           add     a,mant2+3
01A3 FD         +1  5897+1           mov     r5,a
01A4 E50A       +1  5898+1           mov     a,mant2+2
01A6 3C         +1  5899+1           addc    a,r4
01A7 FC         +1  5900+1           mov     r4,a
01A8 E509       +1  5901+1           mov     a,mant2+1
01AA 3B         +1  5902+1           addc    a,r3
01AB FB         +1  5903+1           mov     r3,a
01AC E508       +1  5904+1           mov     a,mant2+0
01AE 3A         +1  5905+1           addc    a,r2
01AF FA         +1  5906+1           mov     r2,a
01B0 E4         +1  5907             clr     a
01B1 FF         +1  5908             mov     r7,a            ;clear sign
01B2 EA         +1  5909             mov     a,r2            ;get sign of result
01B3 30E70E     +1  5910             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  5911             mov     r7,a            ;store sign
                +1  5912+3           neg1                    ;negate mantissa
01B7 C3         +1  5913+1           clr     c
01B8 E4         +1  5914+1           clr     a
01B9 9D         +1  5915+1           subb    a,r5
01BA FD         +1  5916+1           mov     r5,a
01BB E4         +1  5917+1           clr     a
01BC 9C         +1  5918+1           subb    a,r4
01BD FC         +1  5919+1           mov     r4,a
01BE E4         +1  5920+1           clr     a
01BF 9B         +1  5921+1           subb    a,r3
01C0 FB         +1  5922+1           mov     r3,a
01C1 E4         +1  5923+1           clr     a
01C2 9A         +1  5924+1           subb    a,r2
01C3 FA         +1  5925+1           mov     r2,a
01C4            +1  5926     ok3:
01C4 11F0       +1  5927             call    norm1
01C6 11DE       +1  5928             call    pack1           ;pack normalized result
                +1  5929+3           restregs                ;and return
01C8 D000       +1  5930+1           pop     0
01CA D001       +1  5931+1           pop     1
01CC D006       +1  5932+1           pop     6
01CE D007       +1  5933+1           pop     7
01D0 22         +1  5934             ret
                +1  5935     ;-------------------------------------------------------------
                +1  5936     ;       Subtract the number ltemp from the number in r2-r5
                +1  5937     
01D1            +1  5938     flsub:
01D1 630880     +1  5939             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  5940             jmp     fladd           ;and add!
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    94

                +1  5941     
                +1  5942     ;================================================================
                +1  5943     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  5944     
01D6            +1  5945     flcmp:
01D6 EA         +1  5946            mov     a,r2            ;get sign of left
01D7 6508       +1  5947            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  5948            jnb     acc.7,cexp      ;same, go check exponent
                +1  5949     ;ifdef SMALL_MODEL
01DC EA         +1  5950             mov     a,r2            ;get sign of left again
01DD 33         +1  5951             rlc     a
01DE 5001       +1  5952             jnc     flout
                +1  5953     ;endif
01E0 D3         +1  5954             setb    c
01E1 22         +1  5955     flout:          ret                    ;return with acc < 0
                +1  5956     
01E2            +1  5957     cexp:
01E2 C3         +1  5958            clr     c
01E3 EA         +1  5959            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  5960            subb    a,ltemp
01E6 7010       +1  5961            jnz     fnd
01E8 EB         +1  5962            mov     a,r3
01E9 9509       +1  5963            subb    a,ltemp+1
01EB 700B       +1  5964            jnz     fnd
01ED EC         +1  5965            mov     a,r4
01EE 950A       +1  5966            subb    a,ltemp+2
01F0 7006       +1  5967            jnz     fnd
01F2 ED         +1  5968            mov     a,r5
01F3 950B       +1  5969            subb    a,ltemp+3
01F5 7001       +1  5970            jnz     fnd
01F7            +1  5971     cdone:
01F7 22         +1  5972            ret                     ;return with acc == 0
01F8            +1  5973     fnd:
01F8 8AF0       +1  5974           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  5975          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  5976            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  5977                         orl         a,#1                          ;make non-zero
0201 B3         +1  5978             cpl     c               ;c=0->1,c=1->0
0202 22         +1  5979             ret
                +1  5980     ;==============================================================
                +1  5981     
                +1  5982     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  5983     ;       the result in r2-r5
                +1  5984     
0203            +1  5985     flmul:
                +1  5986+3           saveregs
0203 C007       +1  5987+1           push    7
0205 C006       +1  5988+1           push    6
0207 C001       +1  5989+1           push    1
0209 C000       +1  5990+1           push    0
020B 119E       +1  5991             call    unpack1
020D 11BA       +1  5992             call    unpack2
020F E4         +1  5993             clr     a
0210 F50C       +1  5994             mov     prod,a
0212 F50D       +1  5995             mov     prod+1,a        ;clear product
0214 F50E       +1  5996             mov     prod+2,a
0216 F50F       +1  5997             mov     prod+3,a
0218 7E07       +1  5998             mov     r6,#7           ;initialize counter
021A            +1  5999     mup1:
                +1  6000+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  6001+1           clr     c
021B E508       +1  6002+1           mov     a,mant2
021D 13         +1  6003+1           rrc     a
021E F508       +1  6004+1           mov     mant2,a
0220 E509       +1  6005+1           mov     a,mant2+1
0222 13         +1  6006+1           rrc     a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    95

0223 F509       +1  6007+1           mov     mant2+1,a
0225 E50A       +1  6008+1           mov     a,mant2+2
0227 13         +1  6009+1           rrc     a
0228 F50A       +1  6010+1           mov     mant2+2,a
022A E50B       +1  6011+1           mov     a,mant2+3
022C 13         +1  6012+1           rrc     a
022D F50B       +1  6013+1           mov     mant2+3,a
022F 5014       +1  6014             jnc     nobit           ;skip if lsb was zero
                +1  6015+3           dan     prod            ;add multiplicand to product
0231 ED         +1  6016+1           mov     a,r5
0232 250F       +1  6017+1           add     a,prod+3
0234 F50F       +1  6018+1           mov     prod+3,a
0236 E50E       +1  6019+1           mov     a,prod+2
0238 3C         +1  6020+1           addc    a,r4
0239 F50E       +1  6021+1           mov     prod+2,a
023B E50D       +1  6022+1           mov     a,prod+1
023D 3B         +1  6023+1           addc    a,r3
023E F50D       +1  6024+1           mov     prod+1,a
0240 E50C       +1  6025+1           mov     a,prod+0
0242 3A         +1  6026+1           addc    a,r2
0243 F50C       +1  6027+1           mov     prod,a
0245            +1  6028     nobit:
                +1  6029+3           lshift                  ;shift multiplicand up
0245 ED         +1  6030+1           mov     a,r5
0246 33         +1  6031+1           rlc     a
0247 FD         +1  6032+1           mov     r5,a
0248 EC         +1  6033+1           mov     a,r4
0249 33         +1  6034+1           rlc     a
024A FC         +1  6035+1           mov     r4,a
024B EB         +1  6036+1           mov     a,r3
024C 33         +1  6037+1           rlc     a
024D FB         +1  6038+1           mov     r3,a
024E EA         +1  6039+1           mov     a,r2
024F 33         +1  6040+1           rlc     a
0250 FA         +1  6041+1           mov     r2,a
0251 DEC7       +1  6042             djnz    r6,mup1         ;loop if more
                +1  6043     
0253 7E11       +1  6044             mov     r6,#17          ;re-initalize counter
0255 8015       +1  6045             sjmp    mup3
0257            +1  6046     mup11:
                +1  6047+3           shfdn   prod            ;shift product right
0257 C3         +1  6048+1           clr     c
0258 E50C       +1  6049+1           mov     a,prod
025A 13         +1  6050+1           rrc     a
025B F50C       +1  6051+1           mov     prod,a
025D E50D       +1  6052+1           mov     a,prod+1
025F 13         +1  6053+1           rrc     a
0260 F50D       +1  6054+1           mov     prod+1,a
0262 E50E       +1  6055+1           mov     a,prod+2
0264 13         +1  6056+1           rrc     a
0265 F50E       +1  6057+1           mov     prod+2,a
0267 E50F       +1  6058+1           mov     a,prod+3
0269 13         +1  6059+1           rrc     a
026A F50F       +1  6060+1           mov     prod+3,a
026C            +1  6061     mup3:
                +1  6062+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  6063+1           clr     c
026D E508       +1  6064+1           mov     a,mant2
026F 13         +1  6065+1           rrc     a
0270 F508       +1  6066+1           mov     mant2,a
0272 E509       +1  6067+1           mov     a,mant2+1
0274 13         +1  6068+1           rrc     a
0275 F509       +1  6069+1           mov     mant2+1,a
0277 E50A       +1  6070+1           mov     a,mant2+2
0279 13         +1  6071+1           rrc     a
027A F50A       +1  6072+1           mov     mant2+2,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    96

027C E50B       +1  6073+1           mov     a,mant2+3
027E 13         +1  6074+1           rrc     a
027F F50B       +1  6075+1           mov     mant2+3,a
0281 5014       +1  6076             jnc     mup2            ;skip if bit not set
                +1  6077+3           dan     prod            ;add to prod
0283 ED         +1  6078+1           mov     a,r5
0284 250F       +1  6079+1           add     a,prod+3
0286 F50F       +1  6080+1           mov     prod+3,a
0288 E50E       +1  6081+1           mov     a,prod+2
028A 3C         +1  6082+1           addc    a,r4
028B F50E       +1  6083+1           mov     prod+2,a
028D E50D       +1  6084+1           mov     a,prod+1
028F 3B         +1  6085+1           addc    a,r3
0290 F50D       +1  6086+1           mov     prod+1,a
0292 E50C       +1  6087+1           mov     a,prod+0
0294 3A         +1  6088+1           addc    a,r2
0295 F50C       +1  6089+1           mov     prod,a
0297            +1  6090     mup2:
0297 DEBE       +1  6091             djnz    r6,mup11        ;loop if more
0299 E8         +1  6092             mov     a,r0            ;get exp1
029A 29         +1  6093             add     a,r1            ;add exp2
029B 247A       +1  6094             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  6095             mov     r0,a            ;store
029E EF         +1  6096             mov     a,r7            ;get sign
029F 23         +1  6097             rl      a               ;rotate bit into msb
02A0 6207       +1  6098             xrl     sign,a          ;xor with other bit
                +1  6099+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  6100+1           mov     r2,prod
02A4 AB0D       +1  6101+1           mov     r3,prod+1
02A6 AC0E       +1  6102+1           mov     r4,prod+2
02A8 AD0F       +1  6103+1           mov     r5,prod+3
02AA 11F0       +1  6104             call    norm1           ;normalize
02AC 11DE       +1  6105             call    pack1
                +1  6106+3           restregs
02AE D000       +1  6107+1           pop     0
02B0 D001       +1  6108+1           pop     1
02B2 D006       +1  6109+1           pop     6
02B4 D007       +1  6110+1           pop     7
02B6 22         +1  6111             ret
                +1  6112     ;-----------------------------------------------------------
                +1  6113     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  6114     
02B7            +1  6115     fldiv:
                +1  6116+3           saveregs
02B7 C007       +1  6117+1           push    7
02B9 C006       +1  6118+1           push    6
02BB C001       +1  6119+1           push    1
02BD C000       +1  6120+1           push    0
02BF 119E       +1  6121             call    unpack1
02C1 11BA       +1  6122             call    unpack2
02C3 E4         +1  6123             clr     a
02C4 F50C       +1  6124             mov     prod,a
02C6 F50D       +1  6125             mov     prod+1,a
02C8 F50E       +1  6126             mov     prod+2,a
02CA F50F       +1  6127             mov     prod+3,a
02CC E9         +1  6128             mov     a,r1            ;check for zero divisor
02CD 6067       +1  6129             jz      div9
02CF E8         +1  6130             mov     a,r0            ;check for zero dividend
02D0 6064       +1  6131             jz      div9
02D2 C3         +1  6132             clr     c
02D3 99         +1  6133             subb    a,r1            ;compute new exponent
02D4 2478       +1  6134             add     a,#127-7        ;unbias
02D6 F8         +1  6135             mov     r0,a            ;store back
02D7 EF         +1  6136             mov     a,r7            ;get sign
02D8 23         +1  6137             rl      a
02D9 6207       +1  6138             xrl     sign,a          ;compute new sign
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    97

02DB 7E1F       +1  6139             mov     r6,#24+7        ;initialize counter
02DD            +1  6140     div1:
                +1  6141+3           shfup   prod            ;shift quotient up
02DD C3         +1  6142+1           clr     c
02DE E50F       +1  6143+1           mov     a,prod+3
02E0 33         +1  6144+1           rlc     a
02E1 F50F       +1  6145+1           mov     prod+3,a
02E3 E50E       +1  6146+1           mov     a,prod+2
02E5 33         +1  6147+1           rlc     a
02E6 F50E       +1  6148+1           mov     prod+2,a
02E8 E50D       +1  6149+1           mov     a,prod+1
02EA 33         +1  6150+1           rlc     a
02EB F50D       +1  6151+1           mov     prod+1,a
02ED E50C       +1  6152+1           mov     a,prod
02EF 33         +1  6153+1           rlc     a
02F0 F50C       +1  6154+1           mov     prod,a
02F2 C3         +1  6155             clr     c
02F3 EA         +1  6156             mov     a,r2            ;compare values
02F4 9508       +1  6157             subb    a,mant2
02F6 4028       +1  6158             jc      div2            ;skip if bigger
02F8 7013       +1  6159             jnz     div3
02FA EB         +1  6160             mov     a,r3            ;compare values
02FB 9509       +1  6161             subb    a,mant2+1
02FD 4021       +1  6162             jc      div2            ;skip if bigger
02FF 700C       +1  6163             jnz     div3
0301 EC         +1  6164             mov     a,r4            ;compare values
0302 950A       +1  6165             subb    a,mant2+2
0304 401A       +1  6166             jc      div2            ;skip if bigger
0306 7005       +1  6167             jnz     div3
0308 ED         +1  6168             mov     a,r5            ;compare values
0309 950B       +1  6169             subb    a,mant2+3
030B 4013       +1  6170             jc      div2            ;skip if bigger
030D            +1  6171     div3:
030D ED         +1  6172             mov     a,r5
030E 950B       +1  6173             subb    a,mant2+3
0310 FD         +1  6174             mov     r5,a
0311 EC         +1  6175             mov     a,r4
0312 950A       +1  6176             subb    a,mant2+2               ;do subtraction
0314 FC         +1  6177             mov     r4,a
0315 EB         +1  6178             mov     a,r3
0316 9509       +1  6179             subb    a,mant2+1               ;do subtraction
0318 FB         +1  6180             mov     r3,a
0319 EA         +1  6181             mov     a,r2
031A 9508       +1  6182             subb    a,mant2         ;do subtraction
031C FA         +1  6183             mov     r2,a
031D 430F01     +1  6184             orl     prod+3,#1       ;set lsb in quotient
0320            +1  6185     div2:
                +1  6186+3           lshift                  ;shift dividend up
0320 ED         +1  6187+1           mov     a,r5
0321 33         +1  6188+1           rlc     a
0322 FD         +1  6189+1           mov     r5,a
0323 EC         +1  6190+1           mov     a,r4
0324 33         +1  6191+1           rlc     a
0325 FC         +1  6192+1           mov     r4,a
0326 EB         +1  6193+1           mov     a,r3
0327 33         +1  6194+1           rlc     a
0328 FB         +1  6195+1           mov     r3,a
0329 EA         +1  6196+1           mov     a,r2
032A 33         +1  6197+1           rlc     a
032B FA         +1  6198+1           mov     r2,a
032C DEAF       +1  6199             djnz    r6,div1         ;loop if more
                +1  6200+3           copytor prod            ;copy quotient
032E AA0C       +1  6201+1           mov     r2,prod
0330 AB0D       +1  6202+1           mov     r3,prod+1
0332 AC0E       +1  6203+1           mov     r4,prod+2
0334 AD0F       +1  6204+1           mov     r5,prod+3
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    98

0336            +1  6205     div9:
0336 11F0       +1  6206             call    norm1           ;now normalize result
0338 11DE       +1  6207             call    pack1           ;pack it up
                +1  6208+3           restregs                ;restore registers
033A D000       +1  6209+1           pop     0
033C D001       +1  6210+1           pop     1
033E D006       +1  6211+1           pop     6
0340 D007       +1  6212+1           pop     7
0342 22         +1  6213             ret
                +1  6214     ;------------------------------------------------------------------
                +1  6215     
                +1  6216     ;       Float to long conversion: if the exponent is less than the
                +1  6217     ;       excess value, the result is zero. If the exponent is so large
                +1  6218     ;       that the value would be shifted out, the result is overflow.
                +1  6219     ;       Otherwise shift the mantissa up or down as required.
                +1  6220     
0343            +1  6221     ftol:
                +1  6222+3           saveregs
0343 C007       +1  6223+1           push    7
0345 C006       +1  6224+1           push    6
0347 C001       +1  6225+1           push    1
0349 C000       +1  6226+1           push    0
034B EA         +1  6227             mov     a,r2
034C B4BF09     +1  6228             cjne    a,#0bfh,ne05
034F EB         +1  6229             mov     a,r3
0350 7006       +1  6230             jnz     ne05
0352 EC         +1  6231             mov     a,r4
0353 7003       +1  6232             jnz     ne05
0355 ED         +1  6233             mov     a,r5
0356 6024       +1  6234             jz      ftol1
0358 119E       +1  6235     ne05:   call    unpack1
035A E8         +1  6236             mov     a,r0            ;get exponent
035B 2482       +1  6237             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  6238             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  6239             mov     a,r7            ;get sign
0361 30E70D     +1  6240             jnb     acc.7,ftol4     ;skip if +ve
                +1  6241+3           neg1                    ;negate it
0364 C3         +1  6242+1           clr     c
0365 E4         +1  6243+1           clr     a
0366 9D         +1  6244+1           subb    a,r5
0367 FD         +1  6245+1           mov     r5,a
0368 E4         +1  6246+1           clr     a
0369 9C         +1  6247+1           subb    a,r4
036A FC         +1  6248+1           mov     r4,a
036B E4         +1  6249+1           clr     a
036C 9B         +1  6250+1           subb    a,r3
036D FB         +1  6251+1           mov     r3,a
036E E4         +1  6252+1           clr     a
036F 9A         +1  6253+1           subb    a,r2
0370 FA         +1  6254+1           mov     r2,a
0371            +1  6255     ftol4:
0371 E8         +1  6256             mov     a,r0            ;get exponent
0372 246A       +1  6257             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  6258             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  6259             mov     r0,a            ;save it
0378 24F8       +1  6260             add     a,#-8           ;if > 8, too big
037A 500E       +1  6261             jnc     ftol3
037C            +1  6262     ftol1:
037C E4         +1  6263             clr     a
037D FA         +1  6264             mov     r2,a
037E FB         +1  6265             mov     r3,a
037F FC         +1  6266             mov     r4,a
0380 FD         +1  6267             mov     r5,a
0381            +1  6268     ftol9:
                +1  6269+3           restregs
0381 D000       +1  6270+1           pop     0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE    99

0383 D001       +1  6271+1           pop     1
0385 D006       +1  6272+1           pop     6
0387 D007       +1  6273+1           pop     7
0389 22         +1  6274             ret
038A            +1  6275     ftol3:
038A E8         +1  6276             mov     a,r0
038B FE         +1  6277             mov     r6,a            ;store in counter
038C 60F3       +1  6278             jz      ftol9           ;if zero, do nothing
038E            +1  6279     ftol33:
                +1  6280+3           lshift                  ;shift up
038E ED         +1  6281+1           mov     a,r5
038F 33         +1  6282+1           rlc     a
0390 FD         +1  6283+1           mov     r5,a
0391 EC         +1  6284+1           mov     a,r4
0392 33         +1  6285+1           rlc     a
0393 FC         +1  6286+1           mov     r4,a
0394 EB         +1  6287+1           mov     a,r3
0395 33         +1  6288+1           rlc     a
0396 FB         +1  6289+1           mov     r3,a
0397 EA         +1  6290+1           mov     a,r2
0398 33         +1  6291+1           rlc     a
0399 FA         +1  6292+1           mov     r2,a
039A DEF2       +1  6293             djnz    r6,ftol33       ;and loop
039C 80E3       +1  6294             sjmp    ftol9
039E            +1  6295     ftol2:
039E F4         +1  6296             cpl     a               ;complement
039F FE         +1  6297             mov     r6,a
03A0 6022       +1  6298             jz      ftol22
03A2            +1  6299     ftol23:
03A2 EF         +1  6300             mov     a,r7
03A3 30E70F     +1  6301             jnb     acc.7,ftol24
                +1  6302+3           rshift1
03A6 D3         +1  6303+1           setb    c
03A7 EA         +1  6304+1           mov     a,r2
03A8 13         +1  6305+1           rrc     a
03A9 FA         +1  6306+1           mov     r2,a
03AA EB         +1  6307+1           mov     a,r3
03AB 13         +1  6308+1           rrc     a
03AC FB         +1  6309+1           mov     r3,a
03AD EC         +1  6310+1           mov     a,r4
03AE 13         +1  6311+1           rrc     a
03AF FC         +1  6312+1           mov     r4,a
03B0 ED         +1  6313+1           mov     a,r5
03B1 13         +1  6314+1           rrc     a
03B2 FD         +1  6315+1           mov     r5,a
03B3 800D       +1  6316             jmp     ftol25
03B5            +1  6317+3   ftol24: rshift                  ;shift down
03B5 C3         +1  6318+1           clr     c
03B6 EA         +1  6319+1           mov     a,r2
03B7 13         +1  6320+1           rrc     a
03B8 FA         +1  6321+1           mov     r2,a
03B9 EB         +1  6322+1           mov     a,r3
03BA 13         +1  6323+1           rrc     a
03BB FB         +1  6324+1           mov     r3,a
03BC EC         +1  6325+1           mov     a,r4
03BD 13         +1  6326+1           rrc     a
03BE FC         +1  6327+1           mov     r4,a
03BF ED         +1  6328+1           mov     a,r5
03C0 13         +1  6329+1           rrc     a
03C1 FD         +1  6330+1           mov     r5,a
03C2 DEDE       +1  6331     ftol25: djnz    r6,ftol23
03C4            +1  6332     ftol22:
                +1  6333+3           add1                    ;round
03C4 ED         +1  6334+1           mov     a,r5
03C5 2401       +1  6335+1           add     a,#1
03C7 FD         +1  6336+1           mov     r5,a
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   100

03C8 E4         +1  6337+1           clr     a
03C9 3C         +1  6338+1           addc    a,r4
03CA FC         +1  6339+1           mov     r4,a
03CB E4         +1  6340+1           clr     a
03CC 3B         +1  6341+1           addc    a,r3
03CD FB         +1  6342+1           mov     r3,a
03CE E4         +1  6343+1           clr     a
03CF 3A         +1  6344+1           addc    a,r2
03D0 FA         +1  6345+1           mov     r2,a
03D1 EF         +1  6346             mov     a,r7
03D2 30E70F     +1  6347             jnb     acc.7,ftol26
                +1  6348+3           rshift1
03D5 D3         +1  6349+1           setb    c
03D6 EA         +1  6350+1           mov     a,r2
03D7 13         +1  6351+1           rrc     a
03D8 FA         +1  6352+1           mov     r2,a
03D9 EB         +1  6353+1           mov     a,r3
03DA 13         +1  6354+1           rrc     a
03DB FB         +1  6355+1           mov     r3,a
03DC EC         +1  6356+1           mov     a,r4
03DD 13         +1  6357+1           rrc     a
03DE FC         +1  6358+1           mov     r4,a
03DF ED         +1  6359+1           mov     a,r5
03E0 13         +1  6360+1           rrc     a
03E1 FD         +1  6361+1           mov     r5,a
03E2 809D       +1  6362             jmp     ftol9
03E4            +1  6363+3   ftol26: rshift
03E4 C3         +1  6364+1           clr     c
03E5 EA         +1  6365+1           mov     a,r2
03E6 13         +1  6366+1           rrc     a
03E7 FA         +1  6367+1           mov     r2,a
03E8 EB         +1  6368+1           mov     a,r3
03E9 13         +1  6369+1           rrc     a
03EA FB         +1  6370+1           mov     r3,a
03EB EC         +1  6371+1           mov     a,r4
03EC 13         +1  6372+1           rrc     a
03ED FC         +1  6373+1           mov     r4,a
03EE ED         +1  6374+1           mov     a,r5
03EF 13         +1  6375+1           rrc     a
03F0 FD         +1  6376+1           mov     r5,a
03F1 808E       +1  6377             jmp     ftol9
                +1  6378     
                +1  6379     ;       arithmetic integer to floating conversions
                +1  6380     
03F3            +1  6381     abtof:
03F3 ED         +1  6382             mov     a,r5
03F4 23         +1  6383             rl      a
03F5 FC         +1  6384             mov     r4,a
03F6 9C         +1  6385             subb    a,r4
03F7 FC         +1  6386             mov     r4,a
03F8 FB         +1  6387             mov     r3,a
03F9 FA         +1  6388             mov     r2,a
03FA 8006       +1  6389             jmp     altof
03FC            +1  6390     awtof:
03FC EC         +1  6391             mov     a,r4
03FD 23         +1  6392             rl      a
03FE FB         +1  6393             mov     r3,a
03FF 9B         +1  6394             subb    a,r3
0400 FB         +1  6395             mov     r3,a
0401 FA         +1  6396             mov     r2,a
0402            +1  6397     altof:
                +1  6398+3           saveregs
0402 C007       +1  6399+1           push    7
0404 C006       +1  6400+1           push    6
0406 C001       +1  6401+1           push    1
0408 C000       +1  6402+1           push    0
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   101

040A EA         +1  6403             mov     a,r2            ;get sign
040B 5480       +1  6404             anl     a,#80h
040D FF         +1  6405             mov     r7,a            ;store it
040E 30E70D     +1  6406             jnb     acc.7,altof1    ;skip if +ve
                +1  6407+3           neg1
0411 C3         +1  6408+1           clr     c
0412 E4         +1  6409+1           clr     a
0413 9D         +1  6410+1           subb    a,r5
0414 FD         +1  6411+1           mov     r5,a
0415 E4         +1  6412+1           clr     a
0416 9C         +1  6413+1           subb    a,r4
0417 FC         +1  6414+1           mov     r4,a
0418 E4         +1  6415+1           clr     a
0419 9B         +1  6416+1           subb    a,r3
041A FB         +1  6417+1           mov     r3,a
041B E4         +1  6418+1           clr     a
041C 9A         +1  6419+1           subb    a,r2
041D FA         +1  6420+1           mov     r2,a
041E            +1  6421     altof1:
041E 7896       +1  6422             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  6423             call    norm1           ;normalize it
0422 11DE       +1  6424             call    pack1           ;and pack up
                +1  6425+3           restregs
0424 D000       +1  6426+1           pop     0
0426 D001       +1  6427+1           pop     1
0428 D006       +1  6428+1           pop     6
042A D007       +1  6429+1           pop     7
042C 22         +1  6430             ret
                +1  6431     
042D            +1  6432     lbtof:
042D 7C00       +1  6433             mov     r4,#0
042F            +1  6434     lwtof:
042F E4         +1  6435             clr     a
0430 FB         +1  6436             mov     r3,a
0431 FA         +1  6437             mov     r2,a
0432            +1  6438     lltof:
                +1  6439+3           saveregs
0432 C007       +1  6440+1           push    7
0434 C006       +1  6441+1           push    6
0436 C001       +1  6442+1           push    1
0438 C000       +1  6443+1           push    0
043A 7F00       +1  6444             mov     r7,#0           ;zero sign
043C 80E0       +1  6445             sjmp    altof1
                +1  6446     
                +1  6447     ;-------------------------------------------------------
                +1  6448     
                +1  6449     
                    6450     
                    6451     ;$include (d:\amp\wriread.asm)
                +1  6452     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  6453     cle256:          mov            IE,#00H
0441 75B601     +1  6454                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  6455                              MOV            PSCTL,#03
                +1  6456                                             
0447 7400       +1  6457                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  6458                                     movx    @dptr,a                         ;wr
044A 758F00     +1  6459                                     mov             PSCTL,#00
044D 75B600     +1  6460                                 mov         FLSCL,#00
0450 75A880     +1  6461                               mov           IE,#80H
0453 22         +1  6462                                     ret
                +1  6463     
                +1  6464     ;чтение памяти программ в r8..r11
                +1  6465     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  6466     re4byte:        mov                     dph,r2
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   102

0456 8B82       +1  6467                                             mov                     dpl,r3
0458 E4         +1  6468                                             clr                     a
0459 93         +1  6469                                             movc            a,@a+dptr
045A F508       +1  6470                                             mov                     r8,a
045C A3         +1  6471                                             inc                     dptr
045D E4         +1  6472                                             clr                     a
045E 93         +1  6473                                             movc            a,@a+dptr
045F F509       +1  6474                                             mov                     r9,a
0461 A3         +1  6475                                             inc                     dptr
0462 E4         +1  6476                                             clr                     a
0463 93         +1  6477                                             movc            a,@a+dptr
0464 F50A       +1  6478                                             mov                     r10,a
0466 A3         +1  6479                                             inc                     dptr
0467 E4         +1  6480                                             clr                     a
0468 93         +1  6481                                             movc            a,@a+dptr
0469 F50B       +1  6482                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  6483                                             ret
                +1  6484      ;чтение памяти программ в r2..r5
                +1  6485     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  6486     rebyte2:        mov                     dph,r2
046E 8B82       +1  6487                                             mov                     dpl,r3
0470 E4         +1  6488                                             clr                     a
0471 93         +1  6489                                             movc            a,@a+dptr
0472 FA         +1  6490                                             mov                     r2,a
0473 A3         +1  6491                                             inc                     dptr
0474 E4         +1  6492                                             clr                     a
0475 93         +1  6493                                             movc            a,@a+dptr
0476 FB         +1  6494                                             mov                     r3,a
0477 A3         +1  6495                                             inc                     dptr
0478 E4         +1  6496                                             clr                     a
0479 93         +1  6497                                             movc            a,@a+dptr
047A FC         +1  6498                                             mov                     r4,a
047B A3         +1  6499                                             inc                     dptr
047C E4         +1  6500                                             clr                     a
047D 93         +1  6501                                             movc            a,@a+dptr
047E FD         +1  6502                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  6503                                             ret
                +1  6504      
                +1  6505     
                +1  6506      ;r7-количество байт
                +1  6507     ;dptr-адр ячейки для записи
                +1  6508     ;r1-адр ячейки  внешнего озу
                +1  6509     
0480 75A800     +1  6510     wrpage:  mov            IE,#00H
0483 75B601     +1  6511     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  6512                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  6513                      movx           a,@r1
048A F0         +1  6514                      movx           @dptr,a                         ;wr
048B 758F00     +1  6515                      mov            PSCTL,#0
048E 75B600     +1  6516                      mov            FLSCL,#00
0491 A3         +1  6517                     inc                     dptr
0492 09         +1  6518                     inc                     r1
0493 DFEE       +1  6519                     djnz            r7,WW5
0495 75A880     +1  6520                     mov             IE,#80H
0498 22         +1  6521                     ret
                +1  6522                             
                +1  6523     
                +1  6524     
                +1  6525                                                             
                +1  6526     
                +1  6527     
                +1  6528     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  6529     ;чтение памяти программ во внешнее озу
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   103

                +1  6530     ;вх-r2,r3-адр яч памяти прогр
                +1  6531     ;r1- яч внешнее озу
0499 8A83       +1  6532     copyPP:         mov                     dph,r2
049B 8B82       +1  6533                                             mov                     dpl,r3
049D 7FFF       +1  6534                                             mov                     r7,#0ffh
049F E4         +1  6535     copy1:          clr                     a
04A0 93         +1  6536                                             movc            a,@a+dptr
04A1 F3         +1  6537                                             movx                    @r1,a
04A2 A3         +1  6538                                             inc                     dptr
04A3 09         +1  6539                                             inc                     r1
04A4 DFF9       +1  6540                                             djnz            r7,copy1
04A6 22         +1  6541                                             ret
                +1  6542     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  6543     
                +1  6544                                     
                +1  6545     
                +1  6546     ;r8..r11->@r0..@r0+3
                +1  6547     ;r0-адр ячейки
                +1  6548     ;сохранить в ячейке озу
04A7 E508       +1  6549     savelte:        mov     a,ltemp
04A9 F6         +1  6550                                             mov     @r0,a
04AA 08         +1  6551                                             inc     r0
04AB E509       +1  6552                                             mov     a,ltemp+1
04AD F6         +1  6553                                             mov     @r0,a
04AE 08         +1  6554                                             inc     r0
04AF E50A       +1  6555                                             mov     a,ltemp+2
04B1 F6         +1  6556                                             mov     @r0,a
04B2 08         +1  6557                                             inc     r0
04B3 E50B       +1  6558                                             mov     a,ltemp+3
04B5 F6         +1  6559                                             mov     @r0,a
04B6 22         +1  6560                                             ret
                +1  6561     
                +1  6562     ;
                +1  6563     
                +1  6564     
                +1  6565     
                +1  6566     
                +1  6567     
                +1  6568                     
                +1  6569     
                +1  6570     
                +1  6571     
                +1  6572     
                +1  6573      
                    6574     
                    6575                                                   
                    6576     END
                                                                             
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   104

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   0355H   R   SEG=MAIN   797 800#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1279 1336 1361 1382 1386 1389 1390 1392 1499 1504 3327 3333 3366
                                           3392 3590 3627 3628 3630 3704 3724 3815 3819 3843 3846 4453 4579 4582 4606
                                           4609
ABRET. . . . . . .  C ADDR   1A6FH   R   SEG=MAIN   4382 4384#
ABTOF. . . . . . .  C ADDR   03F3H   A      6381#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 636 690 698 706 714 716 736 1041 1052 1060 1135 1448 1627 1636 1645
                                           1654 1675 2007 2271 2293 2298 2302 2307 2310 2313 2316 2319 2486 2537 2583
                                           2594 2677 2686 2694 2704 2718 2828 2846 2871 2876 2880 2883 2886 2889 2892
                                           2895 3181 3252 3764 3770 3807 3877 4788 4866 4869 5126 5778 5861 5878 5910
                                           5948 5976 6238 6240 6258 6301 6347 6406
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2040H   R   SEG=MAIN   827 863 865 867 869 871 873 875 877 879 942 944 946 948 950 952
                                           954 956 958 961 963 965 967 969 971 973 975 977 979 5367#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1335 1347 1351 1366 1391 1394 1395 1503 1507 3324 3328 3363 3367
                                           3389 3393 3600 3614 3616 3618 3629 3632 3714 3725 3820 3847 4256 4273 4291
                                           4354 4371 4581 4584 4608 4611
AFTERK . . . . . .  C ADDR   0610H   R   SEG=MAIN   1069 1144#
AGE2 . . . . . . .  C ADDR   01ECH   R   SEG=MAIN   566# 569
AGE9 . . . . . . .  C ADDR   0721H   R   SEG=MAIN   1283# 1286
AGEON. . . . . . .  C ADDR   01FAH   R   SEG=MAIN   575# 577
ALESS0 . . . . . .  C ADDR   0856H   R   SEG=MAIN   1448 1469#
ALLSUM . . . . . .  C ADDR   030EH   R   SEG=MAIN   756# 792
ALMUL. . . . . . .  C ADDR   1F87H   R   SEG=MAIN   5213#
ALTOF. . . . . . .  C ADDR   0402H   A      1035 1080 1129 1160 1173 1245 1784 1845 1883 3370 3396 3728 3823 3850
                                           3976 6389 6397#
ALTOF1 . . . . . .  C ADDR   041EH   A      6406 6421# 6445
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0563H   R   SEG=MAIN   1033 1049#
AN_T7. . . . . . .  C ADDR   10B7H   R   SEG=MAIN   2896# 2961 2970
AUTOKA . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1067 1813#
AVPGO. . . . . . .  C ADDR   06A8H   R   SEG=MAIN   1221 1223#
AVTDEC1. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1102 1109#
AWTOF. . . . . . .  C ADDR   03FCH   A      6390#
B. . . . . . . . .  D ADDR   00F0H   A      122# 4117 4473 5216 5219 5221 5225 5229 5233 5237 5242 5246 5253 5257
                                           5261 5267 5271 5275 5281 5974 5975
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 443#
BFORM. . . . . . .  C ADDR   0BBAH   R   SEG=MAIN   2085 2090 2102# 2128
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   105

BIN30. . . . . . .  C ADDR   1DA3H   R   SEG=MAIN   4776# 4802
BIN31. . . . . . .  C ADDR   1DA7H   R   SEG=MAIN   4781# 4785
BIN32. . . . . . .  C ADDR   1DB7H   R   SEG=MAIN   4794# 4799
BIN41. . . . . . .  C ADDR   1DC8H   R   SEG=MAIN   4810# 4820
BINDEC . . . . . .  C ADDR   1D97H   R   SEG=MAIN   1337 1393 1505 3631 4583 4610 4755#
BITAKT . . . . . .  B ADDR   0023H.2 A      348# 1584 1585 1588
BITAVP . . . . . .  B ADDR   0020H.5 A      319# 1179 1402 1576 2949 2950 2952
BITBON . . . . . .  B ADDR   0021H.2 A      326# 1705 2328 2329 2331
BITBUF . . . . . .  B ADDR   0021H.0 A      324#
BITEIZM. . . . . .  B ADDR   0022H.5 A      339# 1592 2929 2941 3527 4036
BITIZM . . . . . .  B ADDR   0020H.4 A      318# 546 657 2299 2364 2449 2877 2930 3041 3062 3132 3160 3228 3236 3407
                                           3428 3486 3528 3575 3662 3737
BITKLB . . . . . .  B ADDR   0022H.2 A      336# 1153 1607 2304 2948 2955 3735 4026
BITMAS . . . . . .  B ADDR   0020H.1 A      315# 988 991 2067
BITMEM . . . . . .  B ADDR   0021H.3 A      327# 2671 3163 3176 3227 3235 3406
BITMENU. . . . . .  B ADDR   0022H.1 A      335# 1488 2931 3412 3427 3491 3529 3574 3661 3734
BITMIG . . . . . .  B ADDR   0023H.1 A      347# 2576 2835 3101 3693 3799 3884 4539 4553 4565 4628 4635 4641 4647
BITNUL . . . . . .  B ADDR   0021H.7 A      331# 1561 2972 2973 2980
BITOLL . . . . . .  B ADDR   0022H.7 A      341# 612 1409 1486
BITPRD . . . . . .  B ADDR   0021H.1 A      325# 1704
BITRS. . . . . . .  B ADDR   0020H.3 A      317#
BITT2. . . . . . .  B ADDR   0022H.0 A      334# 1485 2450 2483 2987 3133
BITV19 . . . . . .  B ADDR   0022H.3 A      337# 500 504 2644 2647 2651 3475 3480 3557 3570 3667 3670 3674
BITVI11. . . . . .  B ADDR   0020H.6 A      320# 1180 2322 2324 2363 2607 3040
BITVI31. . . . . .  B ADDR   0022H.6 A      340#
BITVICH. . . . . .  B ADDR   0022H.4 A      338# 1484 2323 2365 2375 2505 3004 3061
BITZNAK. . . . . .  B ADDR   0020H.0 A      314# 637 673
BITZNB . . . . . .  B ADDR   0023H.3 A      349# 3851 4380 4383
BITZUS . . . . . .  B ADDR   0020H.7 A      321# 1235 1425 1726 1729 2410
BMEM11 . . . . . .  B ADDR   0021H.4 A      328# 2608
BMEM12 . . . . . .  B ADDR   0021H.5 A      329#
BMEM13 . . . . . .  B ADDR   0021H.6 A      330#
BOUT7. . . . . . .  C ADDR   125AH   R   SEG=MAIN   3141# 3143
BRET . . . . . . .  C ADDR   18DCH   R   SEG=MAIN   4057 4062 4066#
BUFDEC . . . . . .  C ADDR   0885H   R   SEG=MAIN   1510# 1515
BUFIND . . . . . .  D ADDR   0040H   A      298# 565 569 574 577 581 605 1282 1286 1352 1373 1394 1395 1396 1458 1463
                                           1508 1516 1518 1523 1559 1586 1589 1594 1608 1939 2287 2551 2569 2585 2587
                                           2590 2740 2783 2802 2864 3088 3114 3147 3153 3295 3599 3632 3633 3636 3685
                                           3713 3791 3834 3942 4115 4133 4255 4272 4290 4353 4370 4381 4542 4585 4604
                                           4612 4632 4653
BUFON. . . . . . .  C ADDR   0CFEH   R   SEG=MAIN   2328 2331#
BUFR . . . . . . .  C ADDR   07C6H   R   SEG=MAIN   1375# 1380
BUFR2. . . . . . .  C ADDR   07A8H   R   SEG=MAIN   1354# 1359
BUFR3. . . . . . .  C ADDR   07A1H   R   SEG=MAIN   1345 1350#
BUFR30 . . . . . .  C ADDR   07A4H   R   SEG=MAIN   1348 1352#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      5971# 5975
CELLBIT. . . . . .  D ADDR   0020H   A      313# 314 315 316 317 318 319 320 321
CELLBIT1 . . . . .  D ADDR   0021H   A      323# 324 325 326 327 328 329 330 331
CELLBIT2 . . . . .  D ADDR   0022H   A      333# 334 335 336 337 338 339 340 341
CELLBIT3 . . . . .  D ADDR   0023H   A      345# 346 347 348 349
CEXP . . . . . . .  C ADDR   01E2H   A      5948 5957#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   1979H   R   SEG=MAIN   2981 4199#
CH1. . . . . . . .  C ADDR   1995H   R   SEG=MAIN   1924 4209#
CH10 . . . . . . .  C ADDR   197DH   R   SEG=MAIN   1002 4200#
CH100. . . . . . .  C ADDR   198DH   R   SEG=MAIN   755 1443 4204#
CH10000. . . . . .  C ADDR   1989H   R   SEG=MAIN   4203#
CH2. . . . . . . .  C ADDR   1991H   R   SEG=MAIN   997 4205#
CH20 . . . . . . .  C ADDR   1B36H   R   SEG=MAIN   791 1007 4504#
CH2THO . . . . . .  C ADDR   19A9H   R   SEG=MAIN   1852 1890 4214#
CH5. . . . . . . .  C ADDR   1981H   R   SEG=MAIN   4201#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   106

CH57 . . . . . . .  C ADDR   1B32H   R   SEG=MAIN   4503#
CH954. . . . . . .  C ADDR   1985H   R   SEG=MAIN   4202#
CHANMA . . . . . .  C ADDR   0E8EH   R   SEG=MAIN   2583 2592#
CHANZ. . . . . . .  C ADDR   0E75H   R   SEG=MAIN   2537 2581#
CHAVT. . . . . . .  D ADDR   0081H   A      363# 526 1058 1103 1109 1906 3487
CHBEFORE . . . . .  D ADDR   009BH   A      373# 548 752 767 786
CHBUF. . . . . . .  D ADDR   00ADH   A      380# 1702 1712
CHCMP. . . . . . .  C ADDR   0C5FH   R   SEG=MAIN   649 1064 2244#
CHDEC. . . . . . .  C ADDR   0AC6H   R   SEG=MAIN   656 1110 1121 1916#
CHDEL. . . . . . .  D ADDR   0083H   A      364# 1753 1798 1820 1865 1900
CHDELMO. . . . . .  C ADDR   0A08H   R   SEG=MAIN   1768 1798# 1803
CHIF . . . . . . .  C ADDR   1B7AH   R   SEG=MAIN   4546 4548#
CHIND. . . . . . .  D ADDR   00ACH   A      379# 1194 1612
CHINKOR. . . . . .  D ADDR   0098H   A      362# 521 734 1050 1063 1105 1117 1120 1805
CHK. . . . . . . .  C ADDR   19C1H   R   SEG=MAIN   1154 4220#
CHKL . . . . . . .  D ADDR   003DH   A      305# 648 655 2428 2456 2498 2910 3166 3439 3740
CHMAS. . . . . . .  D ADDR   006EH   A      302# 985 992 1010 2066
CHMASN . . . . . .  D ADDR   003FH   A      306# 741 750 787 804 816 990 992 993
CHTADC . . . . . .  C ADDR   0B10H   R   SEG=MAIN   1965#
CHTHO. . . . . . .  C ADDR   19A1H   R   SEG=MAIN   1081 1161 3985 4212#
CHTHOU . . . . . .  C ADDR   1A3AH   R   SEG=MAIN   4341#
CHZAP. . . . . . .  C ADDR   1975H   R   SEG=MAIN   1691 4198#
CH_1 . . . . . . .  C ADDR   1999H   R   SEG=MAIN   551 1299 1322 4210#
CH_10. . . . . . .  C ADDR   19B9H   R   SEG=MAIN   1305 1328 3729 4218#
CH_10TH. . . . . .  C ADDR   19B5H   R   SEG=MAIN   1216 4217#
CH_200 . . . . . .  C ADDR   19B1H   R   SEG=MAIN   4216#
CH_220 . . . . . .  C ADDR   19ADH   R   SEG=MAIN   1174 4215#
CH_22T . . . . . .  C ADDR   1A78H   R   SEG=MAIN   1255 4389#
CH_250 . . . . . .  C ADDR   19BDH   R   SEG=MAIN   1149 4219#
CH_500 . . . . . .  C ADDR   1A74H   R   SEG=MAIN   1251 4388#
CH_953 . . . . . .  C ADDR   199DH   R   SEG=MAIN   4211#
CH_B . . . . . . .  C ADDR   1A70H   R   SEG=MAIN   1267 4386#
CH_FL. . . . . . .  C ADDR   1A7CH   R   SEG=MAIN   1291 4390#
CIKLWR . . . . . .  C ADDR   0B90H   R   SEG=MAIN   2073#
CKCON. . . . . . .  D ADDR   008EH   A      30# 461 492
CL4. . . . . . . .  C ADDR   19D3H   R   SEG=MAIN   4235# 4237
CL4N . . . . . . .  C ADDR   19D9H   R   SEG=MAIN   4244# 4246
CLE256 . . . . . .  C ADDR   043EH   A      3563 4018 6453#
CLEAR. . . . . . .  C ADDR   1D91H   R   SEG=MAIN   4733 4737# 4767
CLEAR4 . . . . . .  C ADDR   19D0H   R   SEG=MAIN   764 1232 1234 1362 1383 1422 1424 2357 2359 2966 2968 4233#
CLEARN . . . . . .  C ADDR   19D8H   R   SEG=MAIN   3325 3364 3390 3591 3705 3816 3844 4242#
CLMASSIX . . . . .  C ADDR   0B80H   R   SEG=MAIN   520 1230 1420 1809 1910 2060# 2355 2964 3131
CLMASV . . . . . .  C ADDR   06ADH   R   SEG=MAIN   1225 1227#
CLMAX. . . . . . .  C ADDR   0B85H   R   SEG=MAIN   2062# 2065
CLR11. . . . . . .  C ADDR   1D92H   R   SEG=MAIN   4739# 4741
CLRDEC . . . . . .  C ADDR   1D8BH   R   SEG=MAIN   4731#
CLRNUM . . . . . .  C ADDR   1D8FH   R   SEG=MAIN   4734# 4848
CLRVICH. . . . . .  C ADDR   11D2H   R   SEG=MAIN   3061# 3078
CNTR . . . . . . .  N NUMB   0006H   A      5644#
CO02S. . . . . . .  C ADDR   195DH   R   SEG=MAIN   4182# 4186
CO05S. . . . . . .  C ADDR   196AH   R   SEG=MAIN   4191# 4195
CO1S . . . . . . .  C ADDR   1954H   R   SEG=MAIN   4176# 4176
CO2S . . . . . . .  C ADDR   1950H   R   SEG=MAIN   4174# 4178
COMPA1 . . . . . .  C ADDR   073DH   R   SEG=MAIN   1299# 1308
COMPA2 . . . . . .  C ADDR   0773H   R   SEG=MAIN   1322# 1331
COND . . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   2157#
COPY1. . . . . . .  C ADDR   049FH   A      6535# 6540
COPYPP . . . . . .  C ADDR   0499H   A      3550 3997 6532#
COUNT. . . . . . .  C ADDR   1932H   R   SEG=MAIN   4148# 4148
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   1939H   R   SEG=MAIN   4154# 4154
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   107

DAC0CN . . . . . .  D ADDR   00D4H   A      95# 466
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1450 1471
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1453 1475
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 467
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1699
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1696
DCOA . . . . . . .  C ADDR   0BF9H   R   SEG=MAIN   2161# 2163
DCOB . . . . . . .  C ADDR   0C00H   R   SEG=MAIN   2165# 2183
DCOC . . . . . . .  C ADDR   0C0BH   R   SEG=MAIN   2175# 2180
DCOD . . . . . . .  C ADDR   0C18H   R   SEG=MAIN   2182 2185#
DD . . . . . . . .  C ADDR   0226H   R   SEG=MAIN   603#
DDOUTF . . . . . .  C ADDR   1357H   R   SEG=MAIN   3225 3232 3262 3268# 3319
DEC30. . . . . . .  C ADDR   1DE4H   R   SEG=MAIN   4858# 4883
DEC31. . . . . . .  C ADDR   1DE9H   R   SEG=MAIN   4864# 4871
DEC32. . . . . . .  C ADDR   1DF9H   R   SEG=MAIN   4876# 4880
DECBIN . . . . . .  C ADDR   1DD7H   R   SEG=MAIN   3329 3368 3394 3726 3821 3848 4837#
DECSIZE. . . . . .  N NUMB   000AH   A      4712# 4732 4766 4793 4806 4809 4863
DECT2. . . . . . .  C ADDR   1E02H   R   SEG=MAIN   4854 4886#
DEDPTR . . . . . .  C ADDR   2057H   R   SEG=MAIN   5371 5375 5379 5385#
DENORM . . . . . .  C ADDR   0133H   A      5803# 5859
DGOTO7 . . . . . .  C ADDR   1446H   R   SEG=MAIN   3397# 3403
DIAP . . . . . . .  D ADDR   00AEH   A      381# 540 1220 1404 1522 2349 2381 2957 3635 4037 4058 4304 4319 4470 4532
DIINC. . . . . . .  C ADDR   0D1CH   R   SEG=MAIN   2352 2355#
DIKDN. . . . . . .  C ADDR   1B0AH   R   SEG=MAIN   4472 4492#
DIKDW. . . . . . .  C ADDR   1A24H   R   SEG=MAIN   4308 4329#
DIPAR. . . . . . .  C ADDR   1A38H   R   SEG=MAIN   4339#
DIV1 . . . . . . .  C ADDR   02DDH   A      6140# 6199
DIV2 . . . . . . .  C ADDR   0320H   A      6158 6162 6166 6170 6185#
DIV3 . . . . . . .  C ADDR   030DH   A      6159 6163 6167 6171#
DIV9 . . . . . . .  C ADDR   0336H   A      6129 6131 6205#
DIVIDE . . . . . .  C ADDR   1EC2H   R   SEG=MAIN   2089 5072#
DONE . . . . . . .  C ADDR   1E31H   R   SEG=MAIN   4902 4913#
DONE1. . . . . . .  C ADDR   1E2FH   R   SEG=MAIN   4905 4908 4911#
DOSH . . . . . . .  C ADDR   1F4BH   R   SEG=MAIN   5147 5163#
DOSUB. . . . . . .  C ADDR   1F39H   R   SEG=MAIN   5131 5135 5139 5143 5144 5148#
DPH. . . . . . . .  D ADDR   0083H   A      19# 2020 2028 2857 3866 4919 4955 4990 4993 5005 5028 5390 5392 6466 6486
                                           6532
DPL. . . . . . . .  D ADDR   0082H   A      18# 2021 2027 2856 3867 4935 4971 4992 5006 5009 5043 5387 5389 6467 6487
                                           6533
DVIG0. . . . . . .  C ADDR   0958H   R   SEG=MAIN   1648# 1650
DVIG1. . . . . . .  C ADDR   094DH   R   SEG=MAIN   1639# 1641
DVIG2. . . . . . .  C ADDR   0942H   R   SEG=MAIN   1630# 1632
DVIG3. . . . . . .  C ADDR   0936H   R   SEG=MAIN   1621# 1623
DVIG4. . . . . . .  C ADDR   0964H   R   SEG=MAIN   1659# 1661
DVIG6. . . . . . .  C ADDR   0983H   R   SEG=MAIN   1684# 1686
DVM. . . . . . . .  C ADDR   0981H   R   SEG=MAIN   1675 1683#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 464
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 507 1937 1949 2269 2830 2845 3883
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1840H   R   SEG=MAIN   2946 3972#
ENDSDV . . . . . .  C ADDR   0987H   R   SEG=MAIN   1681 1687#
ENDSUM . . . . . .  C ADDR   04FCH   R   SEG=MAIN   828 880 984#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   076EH   R   SEG=MAIN   1302 1318#
EQU00. . . . . . .  C ADDR   078CH   R   SEG=MAIN   1320 1325 1334#
EQU1L. . . . . . .  C ADDR   0FC2H   R   SEG=MAIN   2750 2754#
EQU2L. . . . . . .  C ADDR   138FH   R   SEG=MAIN   3305 3310#
ERROR. . . . . . .  C ADDR   1C05H   R   SEG=MAIN   3658 3950 3964 4651#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   108

ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      5646#
EXP2 . . . . . . .  N NUMB   0001H   A      5648# 5825 5846
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   1A1DH   R   SEG=MAIN   3999 4318#
FINDKOEF . . . . .  C ADDR   1A0EH   R   SEG=MAIN   1077 1157 4303#
FINDR. . . . . . .  C ADDR   1B63H   R   SEG=MAIN   1388 3626 4532#
FINIS. . . . . . .  C ADDR   1F76H   R   SEG=MAIN   5091 5192#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      1249 5851# 5940
FLCMP. . . . . . .  C ADDR   01D6H   A      1151 1176 1218 1253 1257 1301 1324 5945#
FLDIV. . . . . . .  C ADDR   02B7H   A      1083 1163 1274 1293 1307 1854 1892 3983 6115#
FLMUL. . . . . . .  C ADDR   0203H   A      1044 1088 1140 1168 1269 1330 3731 3987 5985#
FLOUT. . . . . . .  C ADDR   01E1H   A      5952 5955#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 6454 6460 6511 6516
FLSUB. . . . . . .  C ADDR   01D1H   A      1132 1850 1888 5938#
FND. . . . . . . .  C ADDR   01F8H   A      5961 5964 5967 5970 5973#
FO1M . . . . . . .  C ADDR   0BB7H   R   SEG=MAIN   2095 2099#
FO2M . . . . . . .  C ADDR   0BC0H   R   SEG=MAIN   2102 2104#
FORM4. . . . . . .  C ADDR   0BC1H   R   SEG=MAIN   2097 2103 2107#
FT1IZM . . . . . .  C ADDR   0DEAH   R   SEG=MAIN   2493#
FTOL . . . . . . .  C ADDR   0343H   A      1089 1170 1277 3988 4578 4605 6221#
FTOL1. . . . . . .  C ADDR   037CH   A      6234 6238 6262#
FTOL2. . . . . . .  C ADDR   039EH   A      6258 6295#
FTOL22 . . . . . .  C ADDR   03C4H   A      6298 6332#
FTOL23 . . . . . .  C ADDR   03A2H   A      6299# 6331
FTOL24 . . . . . .  C ADDR   03B5H   A      6301 6317#
FTOL25 . . . . . .  C ADDR   03C2H   A      6316 6331#
FTOL26 . . . . . .  C ADDR   03E4H   A      6347 6363#
FTOL3. . . . . . .  C ADDR   038AH   A      6261 6275#
FTOL33 . . . . . .  C ADDR   038EH   A      6279# 6293
FTOL4. . . . . . .  C ADDR   0371H   A      6240 6255#
FTOL9. . . . . . .  C ADDR   0381H   A      6268# 6278 6294 6362 6377
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   472# 473
GO23NO . . . . . .  C ADDR   131FH   R   SEG=MAIN   3233 3239#
GO31L. . . . . . .  C ADDR   0FC8H   R   SEG=MAIN   2729 2759#
GO41L. . . . . . .  C ADDR   0FCDH   R   SEG=MAIN   2759 2761#
GOA2 . . . . . . .  C ADDR   0666H   R   SEG=MAIN   1178 1181# 1211
GOA3A2 . . . . . .  C ADDR   0670H   R   SEG=MAIN   1186#
GOCIKLE. . . . . .  C ADDR   09C0H   R   SEG=MAIN   1706 1715 1719 1726# 1733 1736
GOFULL . . . . . .  C ADDR   1351H   R   SEG=MAIN   3245 3266#
GOKAA2 . . . . . .  C ADDR   068BH   R   SEG=MAIN   1209#
GOKLB. . . . . . .  C ADDR   0CF3H   R   SEG=MAIN   2304 2326#
GOONIN . . . . . .  C ADDR   067DH   R   SEG=MAIN   1193# 1236 1410 1426
GOONIND. . . . . .  C ADDR   085FH   R   SEG=MAIN   1196 1476#
GOONT. . . . . . .  C ADDR   09AAH   R   SEG=MAIN   1709 1711#
GOPAROL. . . . . .  C ADDR   15D7H   R   SEG=MAIN   3612 3620#
GOPART . . . . . .  C ADDR   02ECH   R   SEG=MAIN   736 739#
GOSK19 . . . . . .  C ADDR   0EF5H   R   SEG=MAIN   2644 2649#
GOTO7. . . . . . .  C ADDR   10B7H   R   SEG=MAIN   2909# 2978 2985 3021 3042 3065 3090 3102 3141 3145 3186 3195 3199
                                           3213 3229 3237 3270 3280 3309 3312 3341 3354 3356 3378 3397 3409 3655 3665
                                           3697 3748 3750 3766 3778 3835 4032
GOTOKD . . . . . .  C ADDR   0585H   R   SEG=MAIN   1047 1071#
GOUT6. . . . . . .  C ADDR   0CA8H   R   SEG=MAIN   2294# 2322
GOZNAK . . . . . .  C ADDR   029EH   R   SEG=MAIN   643 679#
HNOR11 . . . . . .  C ADDR   11DDH   R   SEG=MAIN   3032 3069#
HNOR12 . . . . . .  C ADDR   1193H   R   SEG=MAIN   3022 3026#
HNOT1. . . . . . .  C ADDR   1223H   R   SEG=MAIN   2999 3111#
HNOT2. . . . . . .  C ADDR   1161H   R   SEG=MAIN   2996#
HR12 . . . . . . .  C ADDR   1189H   R   SEG=MAIN   3017 3022#
HVI1113. . . . . .  C ADDR   1183H   R   SEG=MAIN   3020# 3025 3030
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   109

IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 508 3930 6453 6461 6510 6520
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   115DH   R   SEG=MAIN   2991 2993#
IND. . . . . . . .  C ADDR   0ADEH   R   SEG=MAIN   570 578 603 667 1312 1316 1609 1937# 2342 3659 3946 3952 3966
                                           4029
INDA3. . . . . . .  C ADDR   0826H   R   SEG=MAIN   1441#
INDOLL . . . . . .  C ADDR   07FDH   R   SEG=MAIN   1402 1403 1407#
INIACP . . . . . .  C ADDR   1A80H   R   SEG=MAIN   609 3129 4396#
INTN . . . . . . .  C ADDR   142FH   R   SEG=MAIN   3388#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   120BH   R   SEG=MAIN   3092#
IZMAN. . . . . . .  C ADDR   0D6DH   R   SEG=MAIN   2267 2402#
IZMFUN . . . . . .  C ADDR   0D7CH   R   SEG=MAIN   2343 2354 2361 2406 2409#
IZMPAT . . . . . .  C ADDR   0D80H   R   SEG=MAIN   2320 2330 2332 2378 2413#
IZMT2. . . . . . .  C ADDR   0D8FH   R   SEG=MAIN   2429 2434#
IZMT3. . . . . . .  C ADDR   0D9AH   R   SEG=MAIN   2434 2440#
JFINIS . . . . . .  C ADDR   1EDDH   R   SEG=MAIN   5083 5091#
KD . . . . . . . .  C ADDR   19A5H   R   SEG=MAIN   4213#
KEYB1. . . . . . .  C ADDR   0C81H   R   SEG=MAIN   283 2268#
KEYB2. . . . . . .  C ADDR   104EH   R   SEG=MAIN   286 2844#
KFULL. . . . . . .  C ADDR   1329H   R   SEG=MAIN   3209 3244#
KGO23. . . . . . .  C ADDR   130FH   R   SEG=MAIN   3208 3231#
KLEV1. . . . . . .  C ADDR   12CDH   R   SEG=MAIN   3178 3200#
KLEV2. . . . . . .  C ADDR   12D2H   R   SEG=MAIN   3200 3202#
KLEV21 . . . . . .  C ADDR   12EEH   R   SEG=MAIN   3206 3215#
KLEV22 . . . . . .  C ADDR   12D7H   R   SEG=MAIN   3202 3206#
KLEV23 . . . . . .  C ADDR   12F9H   R   SEG=MAIN   3215 3221#
KLMAS. . . . . . .  C ADDR   0371H   R   SEG=MAIN   769 807 815#
KNAVP. . . . . . .  C ADDR   10FCH   R   SEG=MAIN   2889 2948#
KNIZM. . . . . . .  B ADDR   0023H.0 A      346# 1178 1403 1580 2380 2402 2403 2407
KNIZMON. . . . . .  C ADDR   0D77H   R   SEG=MAIN   2402 2407#
KNKMP. . . . . . .  C ADDR   103FH   R   SEG=MAIN   2839# 2883
KNLEFT . . . . . .  C ADDR   110CH   R   SEG=MAIN   2843 2955#
KNMEM. . . . . . .  C ADDR   1278H   R   SEG=MAIN   2838 3160#
KNMENU . . . . . .  C ADDR   10D9H   R   SEG=MAIN   2895 2929#
KNNUL. . . . . . .  C ADDR   112AH   R   SEG=MAIN   2842 2972#
KNOPT. . . . . . .  C ADDR   0DA2H   R   SEG=MAIN   2266 2448#
KNRAZR . . . . . .  C ADDR   0DB7H   R   SEG=MAIN   2265 2462#
KNRIGHT. . . . . .  C ADDR   0D12H   R   SEG=MAIN   2310 2347#
KNVICH . . . . . .  C ADDR   0D2EH   R   SEG=MAIN   2319 2363#
KOEFKD . . . . . .  D ADDR   00A0H   A      376# 557 3990 4000
KOEFKM . . . . . .  D ADDR   0094H   A      370# 555 1042 1138 1896
KOEFKP . . . . . .  D ADDR   0090H   A      369# 553 1039 1133 1858
KOMUL. . . . . . .  C ADDR   0630H   R   SEG=MAIN   1156 1160#
KOMULPZ. . . . . .  C ADDR   062AH   R   SEG=MAIN   1153 1157#
KONSTA . . . . . .  D ADDR   00BCH   A      389# 1265 3824 4576
KONSTB . . . . . .  D ADDR   00C0H   A      390# 1239 3855 4596
KON_B. . . . . . .  C ADDR   0E59H   R   SEG=MAIN   2539 2558#
KOR0US . . . . . .  C ADDR   18F0H   R   SEG=MAIN   1766 4091#
KOR0_AN. . . . . .  D ADDR   0084H   A      366# 1130 1785 1848 1886
KORDEC1. . . . . .  C ADDR   05E8H   R   SEG=MAIN   1115 1120#
KORDEC10 . . . . .  C ADDR   05CEH   R   SEG=MAIN   1105#
KORNUL . . . . . .  C ADDR   09E8H   R   SEG=MAIN   1054 1753#
KVVOD0 . . . . . .  C ADDR   1344H   R   SEG=MAIN   3188 3252 3261#
LABEL7 . . . . . .  C ADDR   148FH   R   SEG=MAIN   3439#
LABELA . . . . . .  C ADDR   0273H   R   SEG=MAIN   646# 671 1730
LABELB . . . . . .  C ADDR   092FH   R   SEG=MAIN   1097 1429 1614# 1741 1745 1747
LABELC . . . . . .  C ADDR   0DB7H   R   SEG=MAIN   2463#
LABELE . . . . . .  C ADDR   0D80H   R   SEG=MAIN   2411 2427# 2468 2471 2475 2479
LABELF . . . . . .  C ADDR   0DD6H   R   SEG=MAIN   2264 2482#
LABELH . . . . . .  C ADDR   114CH   R   SEG=MAIN   2841 2987#
LABELI . . . . . .  C ADDR   16C0H   R   SEG=MAIN   3002 3054 3104 3761#
LABELI2. . . . . .  C ADDR   11C2H   R   SEG=MAIN   3054# 3055
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   110

LABELK . . . . . .  C ADDR   1293H   R   SEG=MAIN   3001 3173#
LABELL . . . . . .  C ADDR   0F64H   R   SEG=MAIN   2611 2691 2700#
LABELL1. . . . . .  C ADDR   0E96H   R   SEG=MAIN   2596# 2666 2766 2815
LABELN . . . . . .  C ADDR   0FE7H   R   SEG=MAIN   2667 2775#
LABELP . . . . . .  C ADDR   148FH   R   SEG=MAIN   3399 3412 3438# 3447
LABELS . . . . . .  C ADDR   1461H   R   SEG=MAIN   3248 3412#
LABELS1. . . . . .  C ADDR   154EH   R   SEG=MAIN   3508 3538#
LABELS13 . . . . .  C ADDR   1649H   R   SEG=MAIN   3579 3677#
LABELS3. . . . . .  C ADDR   16D3H   R   SEG=MAIN   3771#
LABELS4. . . . . .  C ADDR   16AEH   R   SEG=MAIN   3578 3752#
LABL2. . . . . . .  C ADDR   0FABH   R   SEG=MAIN   2732# 3218
LABL21 . . . . . .  C ADDR   0F84H   R   SEG=MAIN   2701 2715#
LABL22 . . . . . .  C ADDR   0F9AH   R   SEG=MAIN   2719 2724#
LABM . . . . . . .  C ADDR   1395H   R   SEG=MAIN   3219 3315#
LADD . . . . . . .  C ADDR   201EH   R   SEG=MAIN   747 783 1694 5318#
LADDX. . . . . . .  C ADDR   202FH   R   SEG=MAIN   5342#
LAL22. . . . . . .  C ADDR   0F7CH   R   SEG=MAIN   2705 2710#
LBTOF. . . . . . .  C ADDR   042DH   A      6432#
LCMP . . . . . . .  C ADDR   1E1CH   R   SEG=MAIN   2126 2254 4898#
LDC_LONG . . . . .  C ADDR   1E32H   R   SEG=MAIN   552 1155 1692 1853 1891 2982 4918#
LDC_LTEMP. . . . .  C ADDR   1E54H   R   SEG=MAIN   756 998 1003 1008 1082 1150 1162 1175 1217 1252 1256 1268 1292
                                           1300 1306 1323 1329 1444 1925 3730 3986 4954#
LDX_LONG . . . . .  C ADDR   1E7AH   R   SEG=MAIN   4989#
LDX_LTEMP. . . . .  C ADDR   1EA0H   R   SEG=MAIN   5027#
LEFCUR . . . . . .  C ADDR   13D8H   R   SEG=MAIN   3347# 3383 3401
LEFKL. . . . . . .  C ADDR   1116H   R   SEG=MAIN   2955 2961#
LEFMEM11 . . . . .  C ADDR   129BH   R   SEG=MAIN   3179# 3201 3203
LEFT_S . . . . . .  C ADDR   154BH   R   SEG=MAIN   3537# 3540
LEFT_SK. . . . . .  C ADDR   1630H   R   SEG=MAIN   3537 3667#
LEV220 . . . . . .  C ADDR   12DAH   R   SEG=MAIN   3207# 3216
LEV2GO . . . . . .  C ADDR   100DH   R   SEG=MAIN   2774 2811#
LEVEL. . . . . . .  D ADDR   00B0H   A      383# 2334 2672 2700 3164 3177 3263
LI21 . . . . . . .  C ADDR   1215H   R   SEG=MAIN   3099 3101#
LLDI2. . . . . . .  C ADDR   0D66H   R   SEG=MAIN   2393 2397#
LLDI23 . . . . . .  C ADDR   0D5AH   R   SEG=MAIN   2385 2390#
LLDI3. . . . . . .  C ADDR   0D61H   R   SEG=MAIN   2392 2394#
LLEV2. . . . . . .  C ADDR   0FD2H   R   SEG=MAIN   2731 2764#
LLMUL. . . . . . .  C ADDR   1F87H   R   SEG=MAIN   5212#
LLSUB. . . . . . .  C ADDR   200CH   R   SEG=MAIN   5294#
LLTOF. . . . . . .  C ADDR   0432H   A      6438#
LMUL . . . . . . .  C ADDR   1F87H   R   SEG=MAIN   2084 5214#
LOAB12 . . . . . .  C ADDR   1ACFH   R   SEG=MAIN   3127 4437#
LOAD . . . . . . .  D ADDR   00B7H   A      387# 2451 2487 2989 3123 4114
LOADB. . . . . . .  C ADDR   1234H   R   SEG=MAIN   3118 3121# 3151 3157
LOADB2 . . . . . .  C ADDR   125DH   R   SEG=MAIN   3139 3143#
LOADCLE. . . . . .  C ADDR   12B9H   R   SEG=MAIN   3193# 3255
LOADKD . . . . . .  C ADDR   1AECH   R   SEG=MAIN   4470#
LOADR2 . . . . . .  C ADDR   1ADEH   R   SEG=MAIN   3369 3395 3727 3822 3849 4453#
LOADT. . . . . . .  C ADDR   190BH   R   SEG=MAIN   2453 2493 2995 4114#
LOADUS . . . . . .  C ADDR   18AAH   R   SEG=MAIN   610 1228 1417 1797 1899 2360 2408 2942 2969 3130 4035#
LOBLOK . . . . . .  C ADDR   1361H   R   SEG=MAIN   3242 3274# 3282
LOCLE. . . . . . .  C ADDR   12B4H   R   SEG=MAIN   3182 3191#
LOD1 . . . . . . .  C ADDR   191AH   R   SEG=MAIN   4122# 4127
LODT . . . . . . .  C ADDR   1926H   R   SEG=MAIN   4134# 4139
LOIZMK . . . . . .  C ADDR   1196H   R   SEG=MAIN   3027# 3059
LOKAME1. . . . . .  C ADDR   14B0H   R   SEG=MAIN   3457#
LOLEVT . . . . . .  C ADDR   190DH   R   SEG=MAIN   2340 4115#
LOLIST . . . . . .  C ADDR   12A8H   R   SEG=MAIN   3184#
LOME1. . . . . . .  C ADDR   17A6H   R   SEG=MAIN   3894# 3898 3901 3904 3907 3911 3914 3917 3920 3924
LOMENU . . . . . .  C ADDR   179EH   R   SEG=MAIN   2626 2639 3457 3495 3518 3891#
LOOP . . . . . . .  C ADDR   0B4DH   R   SEG=MAIN   2006# 2007
LOOPS. . . . . . .  C ADDR   1EE0H   R   SEG=MAIN   5093# 5126
LOSPUS . . . . . .  C ADDR   18E4H   R   SEG=MAIN   1767 4074#
LOTEXT . . . . . .  C ADDR   1922H   R   SEG=MAIN   1311 1315 1408 2371 2510 2518 2524 2530 2646 2650 2680 2689 2697
                                           2708 2712 2722 2726 2933 3020 3085 3162 3185 3194 3198 3212 3267 3275 3336
                                           3373 3425 3453 3474 3479 3514 3623 3669 3673 3832 3894 4028 4131# 4652
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   111

LOTP . . . . . . .  C ADDR   1B42H   R   SEG=MAIN   4511# 4521 4524
LOTPUS . . . . . .  C ADDR   1B3AH   R   SEG=MAIN   3526 4069 4508#
LOU. . . . . . . .  C ADDR   0D6CH   R   SEG=MAIN   2380 2396 2400#
LOUIZM . . . . . .  C ADDR   0D49H   R   SEG=MAIN   2380# 2405 4066
LOUTF. . . . . . .  C ADDR   0F81H   R   SEG=MAIN   2704 2713# 2718 2765 2772
LOVICH . . . . . .  C ADDR   118CH   R   SEG=MAIN   3023# 3052 3073 3862
LOWR . . . . . . .  C ADDR   12C2H   R   SEG=MAIN   3191 3196#
LOWR1. . . . . . .  C ADDR   12C4H   R   SEG=MAIN   3197# 3259
LSUB . . . . . . .  C ADDR   200CH   R   SEG=MAIN   1094 1189 1926 5295#
LTEMP. . . . . . .  N NUMB   0008H   A      1010 1012 1013 1014 2136 2139 2142 2145 2188 2189 2190 2191 4343 4344
                                           4345 4346 4710# 5084 5085 5086 5087 5096 5100 5104 5108 5111 5112 5113
                                           5114 5115 5116 5117 5118 5119 5120 5121 5122 5125 5128 5133 5137 5141 5151
                                           5154 5157 5160 5176 5179 5180 5182 5183 5185 5186 5188 5193 5194 5195 5196
                                           5216 5221 5229 5237 5242 5253 5261 5267 5275 5281 5649 5650 5689 5694 5696
                                           5705 5706 5707 5708 5939 5947 5960 5963 5966 5969 6549 6552 6555 6558
LWR. . . . . . . .  C ADDR   0B92H   R   SEG=MAIN   2075# 2079
LWRX . . . . . . .  C ADDR   0B56H   R   SEG=MAIN   2019# 2031
LWTOF. . . . . . .  C ADDR   042FH   A      6434#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   0BADH   R   SEG=MAIN   1498 2083 2088 2093# 2125
MAIN . . . . . . .  C SEG    2069H       REL=UNIT   237 294# 436
MANT1. . . . . . .  N NUMB   0002H   A      5647# 5674 5723 5724
MANT2. . . . . . .  N NUMB   0008H   A      5649# 5700 5701 5832 5834 5835 5837 5838 5840 5841 5843 5882 5883 5885
                                           5886 5888 5889 5891 5892 5896 5898 5901 5904 6002 6004 6005 6007 6008 6010
                                           6011 6013 6064 6066 6067 6069 6070 6072 6073 6075 6157 6161 6165 6169 6173
                                           6176 6179 6182
MARK0_8. . . . . .  C ADDR   0E60H   R   SEG=MAIN   2541 2559 2561#
MARKER . . . . . .  D ADDR   00B2H   A      385# 531 2286 2540 2550 2558 2568 2574 2739 2746 2782 2789 2801 2863 3063
                                           3080 3097 3276 3294 3301 3337 3347 3374 3496 3650 3663 3684 3691 3738 3771
                                           3790 3797 3827 3858 4540 4555 4566 4624
MARLE. . . . . . .  C ADDR   1B7BH   R   SEG=MAIN   3355 4552#
MARRI. . . . . . .  C ADDR   1B88H   R   SEG=MAIN   2809 4565#
MAS10. . . . . . .  C ADDR   0390H   R   SEG=MAIN   817 829#
MAS20. . . . . . .  C ADDR   040DH   R   SEG=MAIN   829 882#
MAS5DIV. . . . . .  C ADDR   0536H   R   SEG=MAIN   999 1004 1009 1016#
MASFULL. . . . . .  C ADDR   0508H   R   SEG=MAIN   988 992#
MASS0. . . . . . .  X ADDR   0080H   A      399 400# 818 823 851 859 930 938 2061
MASS1. . . . . . .  X ADDR   0084H   A      401# 826 848 862 927 941
MASS10 . . . . . .  X ADDR   00A8H   A      410# 903 960
MASS11 . . . . . .  X ADDR   00ACH   A      411# 900 962
MASS12 . . . . . .  X ADDR   00B0H   A      412# 897 964
MASS13 . . . . . .  X ADDR   00B4H   A      413# 894 966
MASS14 . . . . . .  X ADDR   00B8H   A      414# 891 968
MASS15 . . . . . .  X ADDR   00BCH   A      415# 888 970
MASS16 . . . . . .  X ADDR   00C0H   A      416# 886 972
MASS17 . . . . . .  X ADDR   00C4H   A      417# 884 974
MASS18 . . . . . .  X ADDR   00C8H   A      418# 882 976
MASS19 . . . . . .  X ADDR   00CCH   A      419# 978
MASS2. . . . . . .  X ADDR   0088H   A      402# 845 864 924 943
MASS3. . . . . . .  X ADDR   008CH   A      403# 842 866 921 945
MASS4. . . . . . .  X ADDR   0090H   A      404# 839 868 918 947
MASS5. . . . . . .  X ADDR   0094H   A      405# 836 870 915 949
MASS6. . . . . . .  X ADDR   0098H   A      406# 834 872 913 951
MASS7. . . . . . .  X ADDR   009CH   A      407# 832 874 911 953
MASS8. . . . . . .  X ADDR   00A0H   A      408# 830 876 909 955
MASS9. . . . . . .  X ADDR   00A4H   A      409# 878 906 957
MASX5. . . . . . .  C ADDR   052CH   R   SEG=MAIN   990 1010#
ME11_15DEC . . . .  C ADDR   14AFH   R   SEG=MAIN   3422 3456#
ME21_23. . . . . .  C ADDR   1509H   R   SEG=MAIN   3436 3504#
ME21_23DEC . . . .  C ADDR   1525H   R   SEG=MAIN   3511 3516#
MEAVP. . . . . . .  C ADDR   1107H   R   SEG=MAIN   2949 2952#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   512# 514
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   516# 519
MEM12NO. . . . . .  C ADDR   1340H   R   SEG=MAIN   3253 3257#
MENU12 . . . . . .  C ADDR   17AAH   R   SEG=MAIN   3892 3896#
MENU13 . . . . . .  C ADDR   17B2H   R   SEG=MAIN   3896 3899#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   112

MENU14 . . . . . .  C ADDR   17BAH   R   SEG=MAIN   3899 3902#
MENU15 . . . . . .  C ADDR   17C2H   R   SEG=MAIN   3902 3905#
MENU21 . . . . . .  C ADDR   17CAH   R   SEG=MAIN   3905 3909#
MENU22 . . . . . .  C ADDR   17D2H   R   SEG=MAIN   3909 3912#
MENU23 . . . . . .  C ADDR   17DAH   R   SEG=MAIN   3912 3915#
MENU31 . . . . . .  C ADDR   17E2H   R   SEG=MAIN   3915 3918#
MENU41 . . . . . .  C ADDR   17EAH   R   SEG=MAIN   3918 3922#
MENUOFF. . . . . .  C ADDR   10EDH   R   SEG=MAIN   2929 2938#
MENUON . . . . . .  C ADDR   1482H   R   SEG=MAIN   3427#
ME_41. . . . . . .  C ADDR   159AH   R   SEG=MAIN   3538 3581#
MIDL . . . . . . .  C ADDR   1F13H   R   SEG=MAIN   5088 5123#
MIGN . . . . . . .  C ADDR   1BE7H   R   SEG=MAIN   1938 4624#
MIGNN. . . . . . .  C ADDR   1BEFH   R   SEG=MAIN   4626 4631#
MLABL2 . . . . . .  C ADDR   1378H   R   SEG=MAIN   3268 3286# 3317
MMM. . . . . . . .  C ADDR   026EH   R   SEG=MAIN   641#
MO220. . . . . . .  C ADDR   07F2H   R   SEG=MAIN   1207 1402#
MO500I . . . . . .  C ADDR   0762H   R   SEG=MAIN   1258 1314#
MO500R . . . . . .  C ADDR   0756H   R   SEG=MAIN   1254 1310#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0F17H   R   SEG=MAIN   2668# 2677 2686 2694
MOVE28 . . . . . .  C ADDR   0C1AH   R   SEG=MAIN   1084 1164 1241 1260 1851 1889 2188# 3980
MOVE82 . . . . . .  C ADDR   1A3EH   R   SEG=MAIN   4343#
MOVEA3 . . . . . .  C ADDR   085FH   R   SEG=MAIN   1454 1479#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2542 2754 2794 3082 3241 3279 3310 3340 3348 3377 3499 3652 3694
                                           3772 3800 3830 4559
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2538 2747 2751 2790 3083 3240 3278 3302 3306 3339 3352 3376 3498
                                           3653 3776 3829 4568
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      5999# 6042
MUP11. . . . . . .  C ADDR   0257H   A      6046# 6091
MUP2 . . . . . . .  C ADDR   0297H   A      6076 6090#
MUP3 . . . . . . .  C ADDR   026CH   A      6045 6061#
MVV11. . . . . . .  C ADDR   135CH   R   SEG=MAIN   3264 3272#
MVV12. . . . . . .  C ADDR   1374H   R   SEG=MAIN   3272 3281#
N12DELCH . . . . .  C ADDR   0AC2H   R   SEG=MAIN   1904 1912#
N4DELCH. . . . . .  C ADDR   0A73H   R   SEG=MAIN   1831 1869#
N8DELCH. . . . . .  C ADDR   0AB0H   R   SEG=MAIN   1869 1904#
NBIMENU. . . . . .  C ADDR   0F1DH   R   SEG=MAIN   2671#
NBLOK. . . . . . .  D ADDR   00C4H   A      391# 3332
NE05 . . . . . . .  C ADDR   0358H   A      6228 6230 6232 6235#
NEXIN. . . . . . .  C ADDR   0AE8H   R   SEG=MAIN   1941# 1948
NMINUS . . . . . .  C ADDR   0605H   R   SEG=MAIN   1135 1139#
NMINUS3. . . . . .  C ADDR   0556H   R   SEG=MAIN   1041 1043#
NNDELCH. . . . . .  C ADDR   0A33H   R   SEG=MAIN   1821 1831#
NNMEMB . . . . . .  C ADDR   1019H   R   SEG=MAIN   2670 2816#
NNNUL. . . . . . .  C ADDR   08D3H   R   SEG=MAIN   1561 1564#
NO . . . . . . . .  C ADDR   1EFBH   R   SEG=MAIN   5098 5102 5106 5110#
NO0KEY . . . . . .  C ADDR   0280H   R   SEG=MAIN   650 655#
NO11V6 . . . . . .  C ADDR   0E1FH   R   SEG=MAIN   2507 2521#
NO12V6 . . . . . .  C ADDR   0E2CH   R   SEG=MAIN   2521 2527#
NO13V6 . . . . . .  C ADDR   0E39H   R   SEG=MAIN   2527 2535#
NO21P7 . . . . . .  C ADDR   1749H   R   SEG=MAIN   3810 3840#
NO23RI . . . . . .  C ADDR   0EE1H   R   SEG=MAIN   2637 2641#
NO2PARN. . . . . .  C ADDR   084BH   R   SEG=MAIN   1456 1462#
NO31N. . . . . . .  C ADDR   13ECH   R   SEG=MAIN   3345 3358#
NO31RI . . . . . .  C ADDR   0F00H   R   SEG=MAIN   2643 2658#
NO3PARN. . . . . .  C ADDR   0841H   R   SEG=MAIN   1456# 1541
NO4DEL . . . . . .  C ADDR   0A0EH   R   SEG=MAIN   1771 1802#
NOAVK. . . . . . .  C ADDR   05DAH   R   SEG=MAIN   1065 1112#
NOAVP. . . . . . .  C ADDR   0663H   R   SEG=MAIN   1180# 1219 1222
NOBAVP . . . . . .  C ADDR   08F0H   R   SEG=MAIN   1576 1580#
NOBEF99. . . . . .  C ADDR   0329H   R   SEG=MAIN   753 770# 789
NOBIT. . . . . . .  C ADDR   0245H   A      6014 6028#
NOBITIZM . . . . .  C ADDR   08F6H   R   SEG=MAIN   1313 1317 1397 1580 1583#
NOBUF0 . . . . . .  C ADDR   09D0H   R   SEG=MAIN   1703 1735#
NOCHI0 . . . . . .  C ADDR   0822H   R   SEG=MAIN   1208 1428#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   113

NOCHN10. . . . . .  C ADDR   0524H   R   SEG=MAIN   1001 1006#
NOCHN2 . . . . . .  C ADDR   0519H   R   SEG=MAIN   996 1001#
NODI2. . . . . . .  C ADDR   0808H   R   SEG=MAIN   1405 1412#
NODI6. . . . . . .  C ADDR   1118H   R   SEG=MAIN   2959 2963#
NODI8. . . . . . .  C ADDR   08AAH   R   SEG=MAIN   1525 1531#
NODI8K . . . . . .  C ADDR   1604H   R   SEG=MAIN   3638 3643#
NODI9. . . . . . .  C ADDR   080DH   R   SEG=MAIN   1414 1417#
NODIS9 . . . . . .  C ADDR   08B9H   R   SEG=MAIN   1531 1543#
NODISK9. . . . . .  C ADDR   160CH   R   SEG=MAIN   3642 3643 3650#
NOEQU1 . . . . . .  C ADDR   0FFEH   R   SEG=MAIN   2793 2797#
NOEQU2 . . . . . .  C ADDR   13E6H   R   SEG=MAIN   3351 3355#
NOFIZM . . . . . .  C ADDR   0DFDH   R   SEG=MAIN   2483 2505#
NOFT1. . . . . . .  C ADDR   0DE9H   R   SEG=MAIN   2488 2492#
NOFZ . . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1726 1730#
NOH37. . . . . . .  C ADDR   11A3H   R   SEG=MAIN   3016 3037# 3046
NOHNOT1. . . . . .  C ADDR   126DH   R   SEG=MAIN   3113 3152#
NOHNOT2. . . . . .  C ADDR   1265H   R   SEG=MAIN   3146# 3152
NOKLB. . . . . . .  C ADDR   0925H   R   SEG=MAIN   1607 1609#
NOKORR . . . . . .  C ADDR   056CH   R   SEG=MAIN   1052 1055#
NOLAH. . . . . . .  C ADDR   116DH   R   SEG=MAIN   2987 3004#
NOLEV1 . . . . . .  C ADDR   0FA2H   R   SEG=MAIN   2715 2729#
NOM31. . . . . . .  C ADDR   13CFH   R   SEG=MAIN   3315 3343#
NOM32. . . . . . .  C ADDR   141EH   R   SEG=MAIN   3343 3381#
NOM33. . . . . . .  C ADDR   1449H   R   SEG=MAIN   3381 3399#
NOMARL . . . . . .  C ADDR   16E8H   R   SEG=MAIN   3774 3780 3784#
NOME11 . . . . . .  C ADDR   1330H   R   SEG=MAIN   3250#
NOMEM11. . . . . .  C ADDR   0F38H   R   SEG=MAIN   2673 2683#
NOMEM12. . . . . .  C ADDR   0F4EH   R   SEG=MAIN   2683 2691#
NOMEMK . . . . . .  C ADDR   132DH   R   SEG=MAIN   3172 3248#
NON1C. . . . . . .  C ADDR   0DC8H   R   SEG=MAIN   2469 2473#
NONULAVT . . . . .  C ADDR   05C2H   R   SEG=MAIN   1060 1099#
NONULDEL . . . . .  C ADDR   09F5H   R   SEG=MAIN   1754 1770#
NOP3_0 . . . . . .  C ADDR   0826H   R   SEG=MAIN   1434#
NOPART1. . . . . .  C ADDR   032DH   R   SEG=MAIN   742 777#
NOPART2. . . . . .  C ADDR   034DH   R   SEG=MAIN   777 796#
NOPART3. . . . . .  C ADDR   0352H   R   SEG=MAIN   796 799#
NOPART4. . . . . .  C ADDR   0365H   R   SEG=MAIN   799 808#
NOPLUS . . . . . .  C ADDR   0E88H   R   SEG=MAIN   2586 2589#
NOPOIN7. . . . . .  C ADDR   16FFH   R   SEG=MAIN   3770 3805#
NOPOINT. . . . . .  C ADDR   16CBH   R   SEG=MAIN   3764 3768#
NOR11. . . . . . .  C ADDR   0E9CH   R   SEG=MAIN   2513 2600#
NOR13. . . . . . .  C ADDR   0E12H   R   SEG=MAIN   2515#
NORDN. . . . . . .  C ADDR   00F6H   A      5735# 5768
NORDN1 . . . . . .  C ADDR   0107H   A      5737 5751#
NORIG2 . . . . . .  C ADDR   0FDBH   R   SEG=MAIN   2761 2769#
NORIM6 . . . . . .  C ADDR   1019H   R   SEG=MAIN   2817#
NORIME . . . . . .  C ADDR   0EC7H   R   SEG=MAIN   2624 2628#
NORIME1. . . . . .  C ADDR   0EC1H   R   SEG=MAIN   2626# 2629 2642
NORM1. . . . . . .  C ADDR   00F0H   A      5730# 5927 6104 6206 6423
NORR11 . . . . . .  C ADDR   11B5H   R   SEG=MAIN   3048#
NORR12 . . . . . .  C ADDR   11C5H   R   SEG=MAIN   3048 3055# 3069
NORUP. . . . . . .  C ADDR   0119H   A      5734 5771#
NORUP1 . . . . . .  C ADDR   011EH   A      5776# 5794
NORUP2 . . . . . .  C ADDR   0132H   A      5778 5795#
NORVICH. . . . . .  C ADDR   0928H   R   SEG=MAIN   1540 1610#
NOSUB. . . . . . .  C ADDR   1F36H   R   SEG=MAIN   5132 5136 5140 5145#
NOT1IN . . . . . .  C ADDR   09D3H   R   SEG=MAIN   1707 1739#
NOT1_7 . . . . . .  C ADDR   10C6H   R   SEG=MAIN   2911 2918#
NOT2IN . . . . . .  C ADDR   09DBH   R   SEG=MAIN   1739 1743#
NOT2_7 . . . . . .  C ADDR   10D1H   R   SEG=MAIN   2918 2923#
NOT3IN . . . . . .  C ADDR   09E3H   R   SEG=MAIN   1743 1746#
NOTAKT . . . . . .  C ADDR   0900H   R   SEG=MAIN   1584 1588#
NOTT1. . . . . . .  C ADDR   09B3H   R   SEG=MAIN   1713 1717#
NOTT5. . . . . . .  C ADDR   09B8H   R   SEG=MAIN   1717 1721#
NOT_1. . . . . . .  C ADDR   0DCFH   R   SEG=MAIN   2473 2478#
NOT_10 . . . . . .  C ADDR   0DCFH   R   SEG=MAIN   2477#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   114

NOVIR. . . . . . .  C ADDR   0EACH   R   SEG=MAIN   2504 2613#
NOVIR1 . . . . . .  C ADDR   0DFAH   R   SEG=MAIN   2504# 2505
NOZZMI . . . . . .  C ADDR   089AH   R   SEG=MAIN   1520 1522#
NSEC01 . . . . . .  C ADDR   08DCH   R   SEG=MAIN   1565 1568#
NSEC1. . . . . . .  C ADDR   08E3H   R   SEG=MAIN   1568 1571#
NSEC10 . . . . . .  C ADDR   08E8H   R   SEG=MAIN   1567 1570 1571 1575#
NUERR. . . . . . .  D ADDR   0039H   A      310# 3657 3949 3963 4653
NULAVT . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1819#
NUMSIZE. . . . . .  N NUMB   0004H   A      4713# 4735 4773 4780 4855 4875
OBOARD . . . . . .  C ADDR   1E6CH   R   SEG=MAIN   4956 4970#
OBOARD1. . . . . .  C ADDR   1EB4H   R   SEG=MAIN   5029 5042#
OK1. . . . . . . .  C ADDR   0186H   A      5861 5876#
OK2. . . . . . . .  C ADDR   01A0H   A      5878 5893#
OK3. . . . . . . .  C ADDR   01C4H   A      5910 5926#
ONBOAR1. . . . . .  C ADDR   1E92H   R   SEG=MAIN   4991 5008#
ONBOARD. . . . . .  C ADDR   1E46H   R   SEG=MAIN   4920 4934#
ONMEM11. . . . . .  C ADDR   1286H   R   SEG=MAIN   2937 2951 2953 3166# 3426 3432 3454 3458 3463 3477 3482 3501 3515
                                           3519 3530
ONMEM12. . . . . .  C ADDR   152CH   R   SEG=MAIN   3520# 3523 3542
ONMEM13. . . . . .  C ADDR   16ABH   R   SEG=MAIN   3695 3750# 3754 3756
ONMIG. . . . . . .  C ADDR   1BFDH   R   SEG=MAIN   4635 4644#
ONVICH . . . . . .  C ADDR   0D41H   R   SEG=MAIN   2363 2375#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 475
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 468 472
OUT6 . . . . . . .  C ADDR   1019H   R   SEG=MAIN   2263 2326 2433 2438 2443 2460 2490 2495 2502 2609 2627 2640 2648
                                           2652 2818#
OUT7 . . . . . . .  C ADDR   1777H   R   SEG=MAIN   2839 2840 2915 2922 2926 2992 2997 3170 3443 3492 3576 3671 3675
                                           3745 3759 3802 3807 3837 3865#
OUTA . . . . . . .  C ADDR   1B95H   R   SEG=MAIN   3087 4576#
OUTA2. . . . . . .  C ADDR   1BAFH   R   SEG=MAIN   4587# 4592
OUTB . . . . . . .  C ADDR   1BB8H   R   SEG=MAIN   3833 4596#
OUTB2. . . . . . .  C ADDR   1BDEH   R   SEG=MAIN   4614# 4619
OUTB3. . . . . . .  C ADDR   1BC9H   R   SEG=MAIN   4600 4605#
OUTF . . . . . . .  C ADDR   0DF0H   R   SEG=MAIN   2486 2498# 2511 2519 2525 2531 2556 2579 2588 2591 2598 2668 2681
                                           2690 2698 2709 2713 2723 2727 2753 2756 2796 2810 2813 3520
OUTFL. . . . . . .  C ADDR   0E99H   R   SEG=MAIN   2594 2598#
OUTMA. . . . . . .  C ADDR   0E72H   R   SEG=MAIN   2577 2579#
OUTMENU. . . . . .  C ADDR   14F2H   R   SEG=MAIN   3491#
OUTR . . . . . . .  C ADDR   07B9H   R   SEG=MAIN   1343 1366#
OUTR5. . . . . . .  C ADDR   07D5H   R   SEG=MAIN   1364 1385#
OUTSKO . . . . . .  C ADDR   158DH   R   SEG=MAIN   3572 3574#
OUTSKO1. . . . . .  C ADDR   158AH   R   SEG=MAIN   3570 3573#
OUTVIR . . . . . .  C ADDR   0CECH   R   SEG=MAIN   2293 2322#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 4912
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 1941 1945
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 446
P1 . . . . . . . .  D ADDR   0090H   A      32# 613 614 1954 1956 1959 1962 1966 1968 1969 2218 2221 2223 2226 2232
                                           2234 2236 4410 4417
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 447
P2 . . . . . . . .  D ADDR   00A0H   A      47# 1987 1991 2000
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 448
P3 . . . . . . . .  D ADDR   00B0H   A      62# 457 1986 1988 1990 1996 1997 1998 2001 2002 2292 2294 2296 2297 2300
                                           2301 2305 2306 2308 2309 2311 2312 2314 2315 2317 2318 2484 2485 2535 2536
                                           2581 2582 2592 2593 2621 2622 2635 2636 2662 2663 2664 2665 2675 2676 2684
                                           2685 2692 2693 2702 2703 2716 2717 2730 2731 2764 2765 2773 2774 2811 2812
                                           2834 2870 2872 2874 2875 2878 2879 2881 2882 2884 2885 2887 2888 2890 2891
                                           2893 2894 2988 2990 3015 3016 3037 3038 3049 3050 3056 3057 3070 3071 3111
                                           3112 3179 3180 3207 3208 3222 3223 3224 3225 3231 3232 3250 3251 3261 3262
                                           3316 3317 3318 3319 3344 3345 3358 3359 3382 3383 3384 3385 3400 3401 3402
                                           3403 3419 3420 3446 3447 3509 3510 3522 3523 3539 3540 3541 3542 3582 3583
                                           3584 3585 3753 3754 3755 3756 3762 3763 3768 3769 3805 3806 3881
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2831 2833 3878 3880
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 450
P4 . . . . . . . .  D ADDR   0084H   A      20# 2387 2389 4044 4047 4063 4065 4513
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   115

P5 . . . . . . . .  D ADDR   0085H   A      21# 537 545 1822 1827 1862 1864 2397 2399 4052 4055 4085 4088 4517
P6 . . . . . . . .  D ADDR   0086H   A      22# 615 617 621 623
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 451
PACK1. . . . . . .  C ADDR   00DEH   A      5713# 5928 6105 6207 6424
PARERR . . . . . .  C ADDR   1619H   R   SEG=MAIN   3614 3616 3618 3657#
PARN . . . . . . .  D ADDR   00AFH   A      382# 542 1554 2464 3136
PAROL. . . . . . .  D ADDR   00A8H   A      378#
PART . . . . . . .  D ADDR   009AH   A      372# 538 740 1030 1072 1099 1112 1564 1611 1711 1722 2427 2465 2909 3121
                                           3135 4056 4437
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 444
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 445
PCON . . . . . . .  D ADDR   0087H   A      23# 491
POIN3. . . . . . .  C ADDR   16FEH   R   SEG=MAIN   3803# 3838
POINA. . . . . . .  C ADDR   1744H   R   SEG=MAIN   3801 3837#
POINA1 . . . . . .  C ADDR   16E3H   R   SEG=MAIN   3773 3780#
POINA2 . . . . . .  C ADDR   16DDH   R   SEG=MAIN   3776# 3781
POZB . . . . . . .  C ADDR   1767H   R   SEG=MAIN   3851 3855#
PROD . . . . . . .  N NUMB   000CH   A      5650# 5994 5995 5996 5997 6017 6018 6019 6021 6022 6024 6025 6027 6049
                                           6051 6052 6054 6055 6057 6058 6060 6079 6080 6081 6083 6084 6086 6087 6089
                                           6100 6101 6102 6103 6124 6125 6126 6127 6143 6145 6146 6148 6149 6151 6152
                                           6154 6184 6201 6202 6203 6204
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 6455 6459 6512 6515
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2127 2129 2272 2827 2847 3876 5385
                                           5393
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0CF6H   R   SEG=MAIN   2316 2328#
R10. . . . . . . .  N NUMB   000AH   A      431# 646 1061 1263 1271 3617 4485 6478
R11. . . . . . . .  N NUMB   000BH   A      432# 647 1062 1264 1270 4489 6482
R8 . . . . . . . .  N NUMB   0008H   A      429# 498 1261 1273 2252 3471 3613 4477 6470
R9 . . . . . . . .  N NUMB   0009H   A      430# 1262 1272 2253 3615 4481 6474
RAFTERK. . . . . .  C ADDR   0582H   R   SEG=MAIN   1069# 1075
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RE1. . . . . . . .  C ADDR   0C4FH   R   SEG=MAIN   2232# 2238
RE4BYTE. . . . . .  C ADDR   0454H   A      497 3470 3611 6466#
REACP. . . . . . .  D ADDR   0077H   A      304# 628 630 632 634 681 697 705 713 722 729 744 780 800 809 1836 1838
                                           1840 1842 1874 1876 1878 1880
READ . . . . . . .  C ADDR   0C4DH   R   SEG=MAIN   627 629 631 2231#
READYACP . . . . .  C ADDR   02E4H   R   SEG=MAIN   723 733#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   116

READ_X2. . . . . .  C ADDR   0B3CH   R   SEG=MAIN   1995# 2006
REBYTE . . . . . .  C ADDR   0239H   R   SEG=MAIN   612# 657 771 1800 1810 1829 1867 1902 1911 1913
REBYTE2. . . . . .  C ADDR   046CH   A      1078 1158 6486#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 452
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   10F9H   R   SEG=MAIN   2946# 2948
RESAR2 . . . . . .  C ADDR   0C26H   R   SEG=MAIN   745 781 801 810 822 857 936 1087 1128 1166 1183 1240 1243 1266
                                           1289 1442 1496 1774 2196# 2975 3974 3982 4001 4577 4597
RESAR8 . . . . . .  C ADDR   0BE4H   R   SEG=MAIN   1043 1093 1131 1139 1188 1849 1887 2135#
REZAM. . . . . . .  D ADDR   008CH   A      368# 1884
REZAP. . . . . . .  D ADDR   0088H   A      367# 1846
REZMUL . . . . . .  C ADDR   05EDH   R   SEG=MAIN   1107 1119 1126#
REZ_A. . . . . . .  D ADDR   0062H   A      357# 758 802 811 821 856 935 1773
REZ_A0 . . . . . .  D ADDR   006AH   A      359# 1092 1187 1233 1423 2358 2967 2976 2983
REZ_A1 . . . . . .  D ADDR   0066H   A      358# 1024 1090 1127 1171 1182 1209 1242
REZ_A2 . . . . . .  D ADDR   007BH   A      360# 1184
REZ_A3 . . . . . .  D ADDR   009CH   A      374# 1095 1190 1441 1495 1616 2974 3973
REZ_AK . . . . . .  D ADDR   00A4H   A      377# 3732 3981
REZ_AME. . . . . .  D ADDR   005EH   A      355# 1036 1045 1086 1141 1165
REZ_DEL. . . . . .  D ADDR   00C5H   A      392# 760
REZ_R. . . . . . .  D ADDR   00C9H   A      393# 1275 1288
RGOTO7 . . . . . .  C ADDR   13CCH   R   SEG=MAIN   3341# 3359 3385
RHNOR11. . . . . .  C ADDR   119DH   R   SEG=MAIN   3014 3026 3032#
RHNOT1 . . . . . .  C ADDR   1164H   R   SEG=MAIN   2990 2999#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0ECAH   R   SEG=MAIN   2619 2631#
RI6. . . . . . . .  C ADDR   0EC4H   R   SEG=MAIN   2622 2627# 2636 2661 2665
RIGBLO . . . . . .  C ADDR   0FA5H   R   SEG=MAIN   2730# 2760 2762
RIGBLOK. . . . . .  C ADDR   0FE1H   R   SEG=MAIN   2773#
RIGHT2 . . . . . .  C ADDR   0D09H   R   SEG=MAIN   2335 2339#
RIGHT3 . . . . . .  C ADDR   0D0DH   R   SEG=MAIN   2337 2342#
RIKN . . . . . . .  C ADDR   0E4BH   R   SEG=MAIN   2542# 2560
RIZMAN . . . . . .  C ADDR   0C7EH   R   SEG=MAIN   2267# 2302
RI_31. . . . . . .  C ADDR   0EE4H   R   SEG=MAIN   2634 2643#
RKNLEFT. . . . . .  C ADDR   104BH   R   SEG=MAIN   2843# 2886
RKNMEM . . . . . .  C ADDR   103CH   R   SEG=MAIN   2838# 2892
RKNNUL . . . . . .  C ADDR   1048H   R   SEG=MAIN   2842# 2880
RKNOPT . . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2266# 2313
RKNRAZR. . . . . .  C ADDR   0C78H   R   SEG=MAIN   2265# 2307
RKVVOD0. . . . . .  C ADDR   12B1H   R   SEG=MAIN   3181 3188#
RLABELF. . . . . .  C ADDR   0C75H   R   SEG=MAIN   2264# 2299
RLABELH. . . . . .  C ADDR   1045H   R   SEG=MAIN   2841# 2877
RLABELI. . . . . .  C ADDR   116AH   R   SEG=MAIN   3002#
RLABELK. . . . . .  C ADDR   1167H   R   SEG=MAIN   3001# 3004
RLABELL. . . . . .  C ADDR   0EA9H   R   SEG=MAIN   2608 2611#
RLABELL1 . . . . .  C ADDR   1016H   R   SEG=MAIN   2812 2815#
RLABELN. . . . . .  C ADDR   0F14H   R   SEG=MAIN   2663 2667#
RLABELS13. . . . .  C ADDR   1597H   R   SEG=MAIN   3579# 3583
RLABELS4 . . . . .  C ADDR   1594H   R   SEG=MAIN   3578# 3581
RLABL2 . . . . . .  C ADDR   12F3H   R   SEG=MAIN   3218# 3223
RLABM. . . . . . .  C ADDR   12F6H   R   SEG=MAIN   3219# 3221
RLER . . . . . . .  C ADDR   1B87H   R   SEG=MAIN   4560 4562#
RME21_23 . . . . .  C ADDR   148DH   R   SEG=MAIN   3417 3436#
RMO220 . . . . . .  C ADDR   0685H   R   SEG=MAIN   1152 1177 1207#
RNNMEMB. . . . . .  C ADDR   0F1AH   R   SEG=MAIN   2670# 2671
RNO3PARN . . . . .  C ADDR   08B7H   R   SEG=MAIN   1541# 1555
RNOCHI0. . . . . .  C ADDR   0688H   R   SEG=MAIN   1195 1208#
RNOH37 . . . . . .  C ADDR   11B3H   R   SEG=MAIN   3046# 3050 3057 3071
RNOMEMK. . . . . .  C ADDR   1290H   R   SEG=MAIN   3172# 3176
RNOR11 . . . . . .  C ADDR   0E0FH   R   SEG=MAIN   2513# 2515
RNORVICH . . . . .  C ADDR   08B5H   R   SEG=MAIN   1484 1485 1540#
RNOT1IN. . . . . .  C ADDR   09A6H   R   SEG=MAIN   1613 1707#
ROUT6. . . . . . .  C ADDR   0C72H   R   SEG=MAIN   2263# 2298
ROUT7. . . . . . .  C ADDR   1042H   R   SEG=MAIN   2840# 2871 2876
ROUTF. . . . . . .  C ADDR   11B0H   R   SEG=MAIN   3042# 3112
RR0. . . . . . . .  N NUMB   0000H   A      422# 2273 2826 2848 3875
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   117

RR1. . . . . . . .  N NUMB   0001H   A      423# 2274 2825 2849 3874
RR2. . . . . . . .  N NUMB   0002H   A      425# 1922 2275 2824 2850 3873
RR3. . . . . . . .  N NUMB   0003H   A      426# 1923 2276 2823 2851 3872
RR4. . . . . . . .  N NUMB   0004H   A      2277 2822 2852 3871 4714# 4771 4792 4808 4852 4874
RR5. . . . . . . .  N NUMB   0005H   A      2278 2821 2853 3870 4715# 4772 4779 4786 4853 4862
RR6. . . . . . . .  N NUMB   0006H   A      424# 2279 2820 2854 3869
RR7. . . . . . . .  N NUMB   0007H   A      427# 2280 2819 2855 3868
RRIR . . . . . . .  C ADDR   1B94H   R   SEG=MAIN   4571 4573#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0854H   R   SEG=MAIN   1468# 1486 1488
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 482 2943
RTIZMRI. . . . . .  C ADDR   0DD3H   R   SEG=MAIN   2481#
RVVIZKO. . . . . .  C ADDR   119FH   R   SEG=MAIN   3034# 3039
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2290 2555 2573 2744 2787 2807 2867 3299 3689 3795 4636 4644
SAVEIR2. . . . . .  C ADDR   0B68H   R   SEG=MAIN   824 860 939 2034#
SAVELTE. . . . . .  C ADDR   04A7H   A      6549#
SAVER2 . . . . . .  C ADDR   0B74H   R   SEG=MAIN   554 556 558 749 759 761 785 803 812 1025 1037 1046 1091 1096 1142
                                           1172 1185 1191 1210 1276 1280 1500 1786 1847 1859 1885 1897 2048# 2977
                                           2984 3733 3825 3856 3991 4580 4607
SBUF0. . . . . . .  D ADDR   0099H   A      40# 3931 3937
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 490 3932 3936 3939 3940 3961
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   0AFEH   R   SEG=MAIN   1954# 1961
SDV1 . . . . . . .  C ADDR   0B12H   R   SEG=MAIN   1966# 1972
SDVIG0 . . . . . .  C ADDR   02C5H   R   SEG=MAIN   709# 711
SDVIG1 . . . . . .  C ADDR   02BAH   R   SEG=MAIN   701# 703
SDVIG2 . . . . . .  C ADDR   02AFH   R   SEG=MAIN   693# 695
SDVIG3 . . . . . .  C ADDR   02A3H   R   SEG=MAIN   684# 686
SDVIG4 . . . . . .  C ADDR   02D4H   R   SEG=MAIN   719# 721
SDVIG6 . . . . . .  C ADDR   02DEH   R   SEG=MAIN   726# 728
SDVM . . . . . . .  C ADDR   02DCH   R   SEG=MAIN   716 725#
SEEGOON. . . . . .  C ADDR   08BCH   R   SEG=MAIN   1530 1538 1545#
SEEIND . . . . . .  C ADDR   08CAH   R   SEG=MAIN   1460 1467 1468 1558#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      5645# 5666 5667 5692 5693 5717 5860 5877 6098 6138
SKOR19 . . . . . .  C ADDR   14DBH   R   SEG=MAIN   3472 3478#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   121DH   R   SEG=MAIN   3107# 3122
SP . . . . . . . .  D ADDR   0081H   A      17# 443
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 488
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 487
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 1943
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   156FH   R   SEG=MAIN   3557 3559#
SS1. . . . . . . .  C ADDR   1947H   R   SEG=MAIN   4166# 4168
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   118

SUMMA. . . . . . .  D ADDR   00B3H   A      386# 746 748 763 782 784 1231 1421 2356 2965
SUMT2. . . . . . .  C ADDR   0330H   R   SEG=MAIN   737 779#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   1AC1H   R   SEG=MAIN   4428# 4438
TABN . . . . . . .  C ADDR   1B59H   R   SEG=MAIN   4530# 4534
TABT11 . . . . . .  C ADDR   1905H   R   SEG=MAIN   4105# 4510
TABT7. . . . . . .  C ADDR   1909H   R   SEG=MAIN   4109# 4523
TABT9. . . . . . .  C ADDR   1907H   R   SEG=MAIN   4107# 4520
TABUS. . . . . . .  C ADDR   18F1H   R   SEG=MAIN   4041 4094#
TAKTIND. . . . . .  C ADDR   0905H   R   SEG=MAIN   1587 1590#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 479 480 494
TE22 . . . . . . .  C ADDR   1B4CH   R   SEG=MAIN   4509 4519#
TE23 . . . . . . .  C ADDR   1B54H   R   SEG=MAIN   4519 4523#
TEAEQU0. . . . . .  C ADDR   1C55H   R   SEG=MAIN   3084 4667#
TEAVK. . . . . . .  C ADDR   1C91H   R   SEG=MAIN   3903 4674#
TEBBL. . . . . . .  C ADDR   1D4FH   R   SEG=MAIN   3335 4697#
TEBEQU0. . . . . .  C ADDR   1C5FH   R   SEG=MAIN   3831 4668#
TEBL . . . . . . .  C ADDR   1D45H   R   SEG=MAIN   3211 4696#
TEBLOK . . . . . .  C ADDR   1D3BH   R   SEG=MAIN   3274 4695#
TECLE. . . . . . .  C ADDR   1D0AH   R   SEG=MAIN   2696 3161 3193 4690#
TEEBL. . . . . . .  C ADDR   1D59H   R   SEG=MAIN   3372 4698#
TEEND. . . . . . .  C ADDR   1D81H   R   SEG=MAIN   4027 4703#
TEERR. . . . . . .  C ADDR   1D77H   R   SEG=MAIN   4651 4702#
TEFULL . . . . . .  C ADDR   1D31H   R   SEG=MAIN   3266 4694#
TEIZMK . . . . . .  C ADDR   1CECH   R   SEG=MAIN   2509 2517 3028 4687#
TEKALIB. . . . . .  C ADDR   1C9BH   R   SEG=MAIN   3424 3906 4675#
TEKD . . . . . . .  C ADDR   1CE2H   R   SEG=MAIN   3622 4686#
TELIST . . . . . .  C ADDR   1D26H   R   SEG=MAIN   2688 3184 4693#
TEMEM. . . . . . .  C ADDR   1D14H   R   SEG=MAIN   4691#
TEMENU . . . . . .  C ADDR   1C69H   R   SEG=MAIN   4669#
TENMIN . . . . . .  C ADDR   19C5H   R   SEG=MAIN   1104 1106 1118 4222#
TEOLI. . . . . . .  C ADDR   1D63H   R   SEG=MAIN   1314 4700#
TEOLL. . . . . . .  C ADDR   1D00H   R   SEG=MAIN   1407 4689#
TEOLR. . . . . . .  C ADDR   1D6DH   R   SEG=MAIN   1310 4701#
TEOUT. . . . . . .  C ADDR   1CF6H   R   SEG=MAIN   2523 2602 3019 4688#
TEPAR. . . . . . .  C ADDR   1CD8H   R   SEG=MAIN   3923 4685#
TES19_2. . . . . .  C ADDR   1CCEH   R   SEG=MAIN   503 2649 3478 3672 4683#
TES57_6. . . . . .  C ADDR   1CC4H   R   SEG=MAIN   2645 3473 3668 3919 4682#
TESKOR . . . . . .  C ADDR   1C87H   R   SEG=MAIN   3900 4673#
TEST01 . . . . . .  C ADDR   17FBH   R   SEG=MAIN   3936# 3959
TEST02 . . . . . .  C ADDR   182AH   R   SEG=MAIN   3956 3958#
TEST04 . . . . . .  C ADDR   180BH   R   SEG=MAIN   3943# 3945
TEST1. . . . . . .  C ADDR   17F1H   R   SEG=MAIN   3931# 3947 3968
TEST2. . . . . . .  C ADDR   1823H   R   SEG=MAIN   3936 3955#
TEST22 . . . . . .  C ADDR   1544H   R   SEG=MAIN   3524 3531#
TEST23 . . . . . .  C ADDR   1549H   R   SEG=MAIN   3531 3534#
TEST3. . . . . . .  C ADDR   1815H   R   SEG=MAIN   3938 3948#
TEST4. . . . . . .  C ADDR   1803H   R   SEG=MAIN   3939# 3954
TEST5. . . . . . .  C ADDR   182DH   R   SEG=MAIN   3957 3960#
TEST7I . . . . . .  C ADDR   091DH   R   SEG=MAIN   1600 1603#
TEST9I . . . . . .  C ADDR   0916H   R   SEG=MAIN   1595 1600#
TESTRS . . . . . .  C ADDR   17EFH   R   SEG=MAIN   3462 3929#
TESTS. . . . . . .  C ADDR   1538H   R   SEG=MAIN   3526# 3533 3536
TETE11 . . . . . .  C ADDR   1CA6H   R   SEG=MAIN   3452 3910 4677#
TETE7. . . . . . .  C ADDR   1CBAH   R   SEG=MAIN   3513 3916 4679#
TETE9. . . . . . .  C ADDR   1CB0H   R   SEG=MAIN   3913 4678#
TETESI . . . . . .  C ADDR   1C73H   R   SEG=MAIN   2932 3893 4671#
TETESR . . . . . .  C ADDR   1C7DH   R   SEG=MAIN   3897 4672#
TEVICH . . . . . .  C ADDR   1C4BH   R   SEG=MAIN   2370 2529 3024 4666#
TEWR . . . . . . .  C ADDR   1D1CH   R   SEG=MAIN   2679 3197 4692#
TEXTT. . . . . . .  C ADDR   1C0FH   R   SEG=MAIN   4121 4657#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   119

TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 462
TH1. . . . . . . .  D ADDR   008DH   A      29# 501 505 3571 3573
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   0B22H   R   SEG=MAIN   1975#
TIM1 . . . . . . .  C ADDR   0B24H   R   SEG=MAIN   1976# 1976
TIM2 . . . . . . .  C ADDR   0B27H   R   SEG=MAIN   1957 1960 1967 1971 1979# 2222 2224 2233 2237
TIM3 . . . . . . .  C ADDR   0B29H   R   SEG=MAIN   1980# 1980
TIZMRI . . . . . .  C ADDR   0D02H   R   SEG=MAIN   2334# 2481
TL0. . . . . . . .  D ADDR   008AH   A      26# 463
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   121AH   R   SEG=MAIN   3092 3104#
TMOD . . . . . . .  D ADDR   0089H   A      25# 460 493
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 477
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 476
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   14BFH   R   SEG=MAIN   3460 3465#
TOME14 . . . . . .  C ADDR   14E6H   R   SEG=MAIN   3465 3485#
TOME15 . . . . . .  C ADDR   14F7H   R   SEG=MAIN   3485 3494#
TOME21 . . . . . .  C ADDR   14B6H   R   SEG=MAIN   3450 3460#
TOSK19 . . . . . .  C ADDR   163EH   R   SEG=MAIN   3667 3672#
TOUTF. . . . . . .  C ADDR   11A1H   R   SEG=MAIN   3035# 3035 3038
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 1944
UNPACK1. . . . . .  C ADDR   009EH   A      5663# 5857 5991 6121 6235
UNPACK2. . . . . .  C ADDR   00BAH   A      5688# 5858 5992 6122
UP1. . . . . . . .  C ADDR   0138H   A      5808# 5825
UP2. . . . . . . .  C ADDR   014BH   A      5828# 5846
UP2A . . . . . . .  C ADDR   0161H   A      5807 5844#
UPA. . . . . . . .  C ADDR   19F4H   R   SEG=MAIN   4275# 4281
UPA1 . . . . . . .  C ADDR   1A04H   R   SEG=MAIN   4293# 4299
UPA2 . . . . . . .  C ADDR   19E4H   R   SEG=MAIN   4258# 4264
UPAA . . . . . . .  C ADDR   1A4DH   R   SEG=MAIN   4356# 4362
UPAB . . . . . . .  C ADDR   1A5DH   R   SEG=MAIN   4373# 4379
UPAK . . . . . . .  C ADDR   19EEH   R   SEG=MAIN   4272#
UPAK2. . . . . . .  C ADDR   19DEH   R   SEG=MAIN   3326 4255#
UPAK3. . . . . . .  C ADDR   19FEH   R   SEG=MAIN   3365 3391 4290#
UPAKA. . . . . . .  C ADDR   1A47H   R   SEG=MAIN   3817 4353#
UPAKB. . . . . . .  C ADDR   1A57H   R   SEG=MAIN   3845 4370#
UPAV1. . . . . . .  C ADDR   15B6H   R   SEG=MAIN   3602# 3608
UPAV2. . . . . . .  C ADDR   166DH   R   SEG=MAIN   3716# 3722
VICHR. . . . . . .  D ADDR   00B1H   A      384# 1593 2367 2376 2506 2615 2623 2935 2939 3013 3075 3413 3421 3430
                                           3445 3504 3620 3808 3860 3891 4508
VIG0 . . . . . . .  C ADDR   096DH   R   SEG=MAIN   1667# 1669
VIG4 . . . . . . .  C ADDR   097BH   R   SEG=MAIN   1678# 1680
VIOUT. . . . . . .  C ADDR   0DADH   R   SEG=MAIN   2373 2456#
VV21_23. . . . . .  C ADDR   152FH   R   SEG=MAIN   3510 3522#
VVCHIF . . . . . .  C ADDR   1B6BH   R   SEG=MAIN   2596 4539#
VVIZKO . . . . . .  C ADDR   11EAH   R   SEG=MAIN   3034 3075#
VVKALI52 . . . . .  C ADDR   1660H   R   SEG=MAIN   3700# 3752
VVMENU . . . . . .  C ADDR   1616H   R   SEG=MAIN   3585 3655#
VVODM11_15 . . . .  C ADDR   1499H   R   SEG=MAIN   3420 3445#
VVRR6. . . . . . .  C ADDR   0E07H   R   SEG=MAIN   2509#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 458 459
WORK . . . . . . .  D ADDR   00B8H   A      388# 1295 1297 1303 1319 1326 1342 1363 1368 1384 1618 1693 3933 3955
A51 MACRO ASSEMBLER  AMP25                                                                01/29/2007 16:42:17 PAGE   120

WR1. . . . . . . .  C ADDR   0C3AH   R   SEG=MAIN   2218# 2225
WRITE. . . . . . .  C ADDR   0C37H   R   SEG=MAIN   625 2216# 4399 4401 4403 4405 4407 4409 4412 4414 4416 4419 4421
                                           4423
WRITED_X1. . . . .  C ADDR   0B2DH   R   SEG=MAIN   1985#
WRITE_X1 . . . . .  C ADDR   0B2CH   R   SEG=MAIN   1984#
WRPAGE . . . . . .  C ADDR   0480H   A      3568 4023 6510#
WW5. . . . . . . .  C ADDR   0483H   A      6511# 6519
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 454 486
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 455
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 456 485
XCIKLWR. . . . . .  C ADDR   0B54H   R   SEG=MAIN   819 831 833 835 838 841 844 847 850 853 883 885 887 890 893 896
                                           899 902 905 907 910 912 914 917 920 923 926 929 932 2017#
XTEMP. . . . . . .  N NUMB   000CH   A      4711# 5075 5076 5077 5078 5164 5166 5167 5169 5170 5172 5173 5175 5197
                                           5198 5199 5200 5218 5219 5223 5224 5227 5231 5232 5235 5239 5240 5244 5245
                                           5247 5248 5249 5251 5255 5256 5258 5259 5263 5264 5269 5270 5272 5273 5277
                                           5278 5283 5285 5286 5287
YBNUL. . . . . . .  C ADDR   113CH   R   SEG=MAIN   2972 2980#
YES. . . . . . . .  C ADDR   1F19H   R   SEG=MAIN   5097 5101 5105 5109 5127# 5190
YESAVP . . . . . .  C ADDR   0692H   R   SEG=MAIN   1179 1213#
YESBUF . . . . . .  C ADDR   09AAH   R   SEG=MAIN   1705 1710#
YESIND . . . . . .  C ADDR   091FH   R   SEG=MAIN   1592 1599 1602 1606#
YESPRD . . . . . .  C ADDR   09A8H   R   SEG=MAIN   1704 1708#
YESTEST. . . . . .  C ADDR   18E0H   R   SEG=MAIN   4036 4068#
YESTT5 . . . . . .  C ADDR   09CEH   R   SEG=MAIN   1725 1733#
YESVICH. . . . . .  C ADDR   06C1H   R   SEG=MAIN   1180 1238#
YESVIR . . . . . .  C ADDR   0EA1H   R   SEG=MAIN   2607#
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   502 506#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   499 503#
Z01S . . . . . . .  C ADDR   195FH   R   SEG=MAIN   4183# 4185
Z05S . . . . . . .  C ADDR   196CH   R   SEG=MAIN   4192# 4194
Z100 . . . . . . .  C ADDR   1930H   R   SEG=MAIN   4147# 4149
Z15. . . . . . . .  C ADDR   193EH   R   SEG=MAIN   4159# 4161
Z1S. . . . . . . .  C ADDR   1952H   R   SEG=MAIN   4175# 4177
ZAPADC . . . . . .  C ADDR   0AFCH   R   SEG=MAIN   1953#
ZCMP . . . . . . .  C ADDR   0BD6H   R   SEG=MAIN   2125#
ZDIV . . . . . . .  C ADDR   0BA3H   R   SEG=MAIN   757 1017 1445 2088#
ZER1 . . . . . . .  C ADDR   00B3H   A      5673 5677# 5732 5775
ZER2 . . . . . . .  C ADDR   00D4H   A      5699 5703#
ZMUL . . . . . . .  C ADDR   0B99H   R   SEG=MAIN   2083#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      316# 1520 2096 2099 2102
ZNPLUS . . . . . .  C ADDR   0296H   R   SEG=MAIN   636 673#
ZZ . . . . . . . .  C ADDR   1940H   R   SEG=MAIN   4160# 4160
Z_01S. . . . . . .  C ADDR   195BH   R   SEG=MAIN   668 669 670 2283 2860 3953 3967 4181# 4648
Z_05S. . . . . . .  C ADDR   1968H   R   SEG=MAIN   1727 1728 4190#
Z_100. . . . . . .  C ADDR   192EH   R   SEG=MAIN   4146#
Z_15 . . . . . . .  C ADDR   193CH   R   SEG=MAIN   604 4158#
Z_1MS. . . . . . .  C ADDR   1945H   R   SEG=MAIN   3960 4165#
Z_1S . . . . . . .  C ADDR   194EH   R   SEG=MAIN   571 579 3660 3744 4030 4031 4173#
Z_5. . . . . . . .  C ADDR   1937H   R   SEG=MAIN   1989 1999 4153#
Z_9. . . . . . . .  C ADDR   0C32H   R   SEG=MAIN   1946 2210#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
