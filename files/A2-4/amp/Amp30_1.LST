A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp30_1.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp30_1.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti 
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
  0034               314     sadiap                  DATA    34H;сохр диапазон на кот проходила запись блока1
  0033               315     chind2                          DATA    33h;счетчик индикации
  0032               316     sadiap2                 DATA    32h;сохр диапазон на кот проходила запись блока2
  0031               317     sadiap3                 DATA    31h;сохр диапазон на кот проходила запись блока3
  0030               318     sadiap4                 DATA    30h;сохр диапазон на кот проходила запись блока4
                     319     ;DATA           2fh
                     320     ;;;;;
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     6

  0020               321      cellbit                DATA    20h
  0000               322     bitznak         BIT     cellbit.0       ;20.0           
  0001               323     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               324     znmat           BIT             cellbit.2       ;20.2
  0003               325     bitrs           BIT             cellbit.3       ;20.3
  0004               326     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               327     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               328     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               329     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     330     
  0021               331     cellbit1                DATA    21h
  0008               332     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               333     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               334     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               335     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
                     336     ;bmem11         BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               337     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     338     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               339     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     340     
  0022               341     cellbit2                DATA    22h
  0010               342     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               343     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               344     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               345     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               346     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               347     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               348     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               349     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     350     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     351     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     352     ;и выдает т.н. буфер индикации  
  0023               353     cellbit3                DATA    23h
  0018               354     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               355     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               356     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               357     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     358     ;bit            BIT             cellbit3.4      ;22.4    
                     359     ;bit            BIT             cellbit3.5      ;22.5    
                     360     ;bit            BIT             cellbit3.6      ;22.6            
                     361     ;bit            BIT             cellbit3.7      ;22.7
                     362             
  005E               363     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     364     ;hex
  0062               365     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               366     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               367     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               368     rez_A2   data 7bh; A2
                     369     
  0098               370     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               371     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               372     chdel    data  83h              ; счетчик задержки
                     373     ;float
  0084               374     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               375     rezAp    data  88h              ;4byte  A+
  008C               376     rezAm    data  8ch              ;4byte  A-
  0090               377     koefKp   data  90h              ;4byte  K+
  0094               378     koefKm   data  94h              ;4byte  K-
                     379     ;hex 
  009A               380     parT     data  9ah              ;параметр времени измерения
  009B               381     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               382     rez_A3   data  9ch              ;A3
                     383     ;FLOAT
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     7

  00A0               384     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               385     rez_Ak  data  0a4h         ;Ak
  00A8               386     parol           data  0a8h         ;храним в памяти пароль
  00AC               387     chind   data  0ach         ;счетчик индикации
                     388     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               389     diap    data  0aeh         ;номер диапазона
  00AF               390     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               391     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               392     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               393     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               394     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               395     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               396     work    data  0b8h        ;рабочая ячейка
  00BC               397     konstA  data  0bch        ;     введенная с крана константа A
                     398     ;konstB data  0c0h         ;    введенная с крана константа B
  00C0               399     saven_bl2       data    0c0h;;копия адреса последней записанной ячейки блока2
  00C2               400     saven_bl3       data  0c2h;копия адреса последней записанной ячейки блока3 
                     401                ;c4 1bait
  00C5               402     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               403     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               404     interva data  0cdh;значение интервала (запись)2baita
  00CF               405     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               406     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               407     volume          data    0d5h;объем блока 2 baita
  00D6               408     chblok          data    0d6h;volume;кол измерений блока
  00D7               409     copy_hl         data  0d7h;адрес ячейки блока для просмотра 
  00D9               410     saven_bl4       data  0d9h;копия адреса последней записанной ячейки блока4
                     411     ;data           0dbh e0h-граница стека
                     412     
                     413     ;внешнее ОЗУ 64K 
                     414     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     415     ;ячейку  стирается целая страница 0..ffh рпзу
                     416     ;               XSEG AT 100h
                     417             PUBLIC    MASS0
  0100               418     MASS0  xdata 0100h;     скользящий массив измерения
  0104               419     MASS1  xdata 0104h;
  0108               420     MASS2  xdata 0108h;
  010C               421     MASS3  xdata 010ch;
  0110               422     MASS4  xdata 0110h;
  0114               423     MASS5  xdata 0114h;
  0118               424     MASS6  xdata 0118h;
  011C               425     MASS7  xdata 011ch;
  0120               426     MASS8  xdata 0120h;
  0124               427     MASS9  xdata 0124h;
  0128               428     MASS10  xdata 0128h;
  012C               429     MASS11  xdata 012ch;
  0130               430     MASS12  xdata 0130h;
  0134               431     MASS13  xdata 0134h;
  0138               432     MASS14  xdata 0138h;
  013C               433     MASS15  xdata 013ch;
  0140               434     MASS16  xdata 0140h;
  0144               435     MASS17  xdata 0144h;
  0148               436     MASS18  xdata 0148h;
  014C               437     MASS19  xdata 014ch;
                     438     ;xdata 
                     439     
  0000               440                             rr0             EQU 00
  0001               441                     rr1       equ   01
  0006               442                     rr6   equ 06
  0002               443                     rr2       equ   02
  0003               444                     rr3       equ   03
  0007               445                     rr7   equ 07
                     446     
  0008               447                     r8   equ 08
  0009               448                     r9        equ   09
  000A               449                     r10       equ   10
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     8

  000B               450                     r11   equ 11
                     451     
                     452                     
                     453        
----                 454                  rseg     Main          ; Switch to this code segment.
                     455     
                     456                  using    0              ; Specify register bank for the following
                     457     
0100                 458     org 100h
                     459     ;$EJECT
                     460     
0100 7581E0          461     begin:     mov  sp, #0e0h
0103 75E900          462                                             mov             PCA0L,#00;=0x00;
0106 75D900          463                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          464                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          465                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          466                                             mov     P2MDOUT,#00;=0x00;
                     467             
0112 75A73F          468             mov     P3MDOUT,#3fh;
0115 75B5FF          469             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          470             mov     REF0CN,#03h;=0x03;
                     471             
011B 75E114          472             mov     XBR0,#14h;= 0x14;
011E 75E200          473             mov     XBR1,#00; =0x00;
0121 75E300          474             mov XBR2,#00;=0x00;
0124 75B0C0          475             mov     P3,#0c0h
0127 75FFDE          476             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          477             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          478             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          479             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          480             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          481             mov     TL0,#0f9h;=0xf9; 
0139 75E680          482             mov     EIE1,#80h;=0x80;
                     483     
013C 75D480          484             mov     DAC0CN,#80h;=0x80;
013F 75D780          485             mov     DAC1CN,#80h;=0x80;
0142 75B167          486             mov     OSCXCN,#67h;=0x67;
                     487     
                     488      
                     489     
0145 E5B1            490     gener:     mov a, oscxcn
0147 B4E7FB          491                cjne a,#11100111b,gener
                     492                            
014A 75B288          493             mov     OSCICN,#88h;=0x84;
014D 75CA00          494         mov TMR2RLL,#0;=0;
0150 75CBD1          495         mov TMR2RLH,#0d1h;=0xd1;
                     496       
0153 D28E            497                     setb  TCON.6                    ;регистр управления
0155 D28C            498                      setb tcon.4
                     499     
0157 75EF00          500             mov     RSTSRC,#0;=00   ;//источники сброса 
                     501     
                     502             
015A 75E340          503          mov        XBR2,#40h
015D 75E106          504              mov    XBR0,#06h;16h
0160 75F803          505             mov             SPI0CN,#03
0163 759D31          506             mov             spi0ckr,#31H;;;;;;;;#04
                     507     ;установка скорости
0166 759850          508                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          509                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          510                                             mov             CKCON,#00010000b;TIM=1
016F 758920          511                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          512                                             mov             TCON,#01000000b;счетчик запущен
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE     9

0175 7A50            513                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            514                                             mov                     r3,#2ch
0179 120454          515                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            516                                             mov                     a,r8
017E B40007          517                                             cjne            a,#00,yst19
0181 C213            518                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          519                                             mov                     TH1,#244
0186 8008            520                                             jmp               yst1
0188 900000   F      521     yst19:          mov                     dptr,#teS19_2
018B D213            522                                             setb            bitv19                  ;19,2
018D 758DDC          523                                             mov                     TH1,#220
0190                 524     yst1:
0190 75E730          525                                             mov             EIE2,#30H;00110000
                     526                                     ;       mov             EIP2,#30H
0193 75A880          527                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     528     ;ozu
0196 E4              529                                             clr     a
0197 7800            530                                             mov     r0,#00h 
0199 F6              531     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              532                                             inc     r0
019B B87FFB          533                                             cjne    r0,#7fh,mecle
019E 7880            534                                             mov     r0,#80h
01A0 F6              535     meff:                   mov     @r0,a 
01A1 F2              536                                             movx @r0,a
01A2 08              537                                             inc     r0
01A3 B8DFFA          538                             cjne    r0,#0dfh,meff
01A6 120000   F      539                             call    clmassix
                     540     ;обнулить внешнее озу 4кбайта
01A9 900000          541                                     mov                     dptr,#0
01AC E4              542     extcle: clr                     a
01AD F0              543                                     movx            @dptr,a
01AE A3              544                                     inc                     dptr
01AF E583            545                                     mov                     a,dph
01B1 B410F8          546                                     cjne            a,#10h,extcle
                     547     
01B4 7898            548                             mov             r0,#chinkor
01B6 7600            549                             mov             @r0,#0;1;
01B8 08              550                             inc             r0
01B9 7619            551                             mov             @r0,#19h;64h;0c8h;90h;
                     552                             ;;;;
01BB 7881            553                             mov             r0,#chavt
01BD 7601            554                             mov             @r0,#1
01BF 08              555                             inc             r0
01C0 7690            556                             mov             @r0,#90h
                     557     
01C2 78B2            558                                     mov             r0,#marker
01C4 76FF            559                                     mov             @r0,#0ffh
                     560                             ;mov            r0,#chind
                     561                             ;mov            @r0,#1
                     562                     
01C6 74FF            563                             mov             a,#0ffh
01C8 F585            564                        mov          p5,a
01CA 799A            565                             mov             r1,#parT
01CC 7702            566                             mov             @r1,#2                  ;Tizm=1s
01CE 79AE            567                             mov             r1,#diap
01D0 7705            568                             mov             @r1,#5                  ;10-7a
01D2 753405          569                             mov             sadiap,#5
01D5 79AF            570                             mov             r1,#parN
01D7 7702            571                             mov             @r1,#2
01D9 7400            572                             mov             a,#00h
01DB F585            573                             mov             p5,a
01DD D204            574                             setb    bitizm
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    10

                     575     
01DF 799B            576                             mov             r1,#chbefore
01E1 7700            577                             mov             @r1,#0
                     578                             ;;;;;;
01E3 900000   F      579                             mov             dptr,#ch_1              ;1->r2..r5 float
01E6 120000   F      580                             call    ldc_long
01E9 7890            581                             mov             r0,#koefKp         ;1(float)->koefKp
01EB 120000   F      582                             call    saver2
01EE 7894            583                             mov             r0,#koefKm              ;1(float)->koefKm
01F0 120000   F      584                             call    saver2
01F3 78A0            585                             mov             r0,#koefKD
01F5 120000   F      586                             call    saver2
01F8 78CF            587                             mov                     r0,#chbuf
01FA 120000   F      588                             call    saver2
01FD 900158          589                             mov                     dptr,#158h;1 блок(2е с конца измерение) 
0200 79D3            590                             mov             r1,#saven_bl
0202 E583            591                             mov             a,dph
0204 F7              592                                               mov           @r1,a
0205 09              593                                                     inc             r1
0206 E582            594                                                     mov             a,dpl
0208 F7              595                                                     mov             @r1,a
                     596     
0209 900478          597                             mov                     dptr,#478h;2 блок(2е с конца измерение) 
020C 79C0            598                             mov             r1,#saven_bl2
020E E583            599                             mov             a,dph
0210 F7              600                                               mov           @r1,a
0211 09              601                                                     inc             r1
0212 E582            602                                                     mov             a,dpl
0214 F7              603                                                     mov             @r1,a
0215 900798          604                                     mov                     dptr,#798h;3 блок(2е с конца измере
                             ние) 
0218 79C2            605                             mov             r1,#saven_bl3
021A E583            606                             mov             a,dph
021C F7              607                                               mov           @r1,a
021D 09              608                                                     inc             r1
021E E582            609                                                     mov             a,dpl
0220 F7              610                                                     mov             @r1,a
0221 900AB8          611                             mov                     dptr,#0ab8h;4 блок(2е с конца измерение)   
                                  
0224 79D9            612                             mov             r1,#saven_bl4
0226 E583            613                             mov             a,dph
0228 F7              614                                               mov           @r1,a
0229 09              615                                                     inc             r1
022A E582            616                                                     mov             a,dpl
022C F7              617                                                     mov             @r1,a
022D 753801          618                             mov             nblok,#1                        ;номер введенного б
                             лока
0230 753701          619                             mov             nelem,#1
0233 78CD            620                             mov             r0,#interva
0235 7600            621                             mov             @r0,#0
0237 08              622                             inc             r0
0238 7601            623                             mov             @r0,#1
023A 7840            624                             mov             r0,#bufind
023C                 625     age2:
023C 76FD            626                             mov             @r0,#0fdh         ;погасить индикатор
023E 08              627                             inc             r0
023F B84CFA          628                             cjne    r0,#bufind+12,age2              
0242 120000   F      629                             call    ind
0245 120000   F      630                             call    z_1s
                     631     
                     632                                     ;зажечь все лементы индикации
0248 7840            633                             mov             r0,#bufind
024A 7669            634     ageon:          mov             @r0,#69h;0feh;?
024C 08              635                             inc             r0
024D B84CFA          636                             cjne    r0,#bufind+12,ageon             
0250 120000   F      637                             call    ind
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    11

0253 120000   F      638                             call    z_1s            ;1sec
                     639     ;;;;;;;;;;;;;;;;
                     640                     
0256 120000   F      641                             call    z_15;z_1ms
0259 434B10          642                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     643     ;;;;;;;;;;;;;;;;;;;
025C 7C60            644                             mov             r4,#60h
025E 7D00            645                             mov             r5,#00         
0260 120000   F      646                             call    iniacp;инициализация acp
0263 120000   F      647                             call    loadUS          ;us 10-7 A
                     648                             
0266 C217            649     rebyte:         clr             bitoll
0268 3095FD          650                             jnb             p1.5,$
026B 2095FD          651                             jb              p1.5,$
                     652                             ;mov            a,P6            ;p6.4=0
                     653                             ;anl            a,#0efh
                     654                             ;mov            P6,a
                     655                             ;nop
                     656                             ;nop
                     657                                     
                     658                             ;mov            a,P6                    ;p6.4=1 
                     659                             ;orl            a,#10h
                     660                             ;mov            P6,a                        
026E 7411            661                             mov             a,#11h
0270 120000   F      662                             call    write
                     663                             ;чтение acp
0273 120000   F      664                             call    read    
0276 F578            665                             mov     reacp+1,A       ;старший байт 
0278 120000   F      666                             call    read    
027B F579            667                             mov     reacp+2,A       ;средний байт 
027D 120000   F      668                             call    read
0280 F57A            669                             mov     reacp+3,A               ;мл байт
                     670                        ;;;;;;;;;;;
0282 7878            671                        mov          r0,#reacp+1
0284 E6              672                        mov          a,@r0
0285 20E740          673                             jb              acc.7,znplus;
0288 D200            674                             setb    bitznak
028A 4480            675                             orl             a,#80h  ;ост содерж яч 
028C F6              676                             mov             @r0,a
                     677                                     
028D 18              678     mmm:            dec             r0;,#reacp
028E 76FF            679                             mov             @r0,#0ffh
0290 803E            680                             jmp             goznak
                     681     
0292 120000   F      682     mem10ms:        call            ind
0295 80CF            683                                             jmp                     rebyte                     
                                  ;10ms
                     684     
0297                 685     labelA: 
                     686                             ;разрешить ie6,ie7
0297 E53E            687                             mov                     a,chkl+1                ;low
0299 7009            688                             jnz                     no0key
029B E53D            689                             mov                     a,chkl
029D 7005            690                             jnz                     no0key
029F 75E730          691                             mov                     EIE2,#30h ;EIE2.5,EIE2.4
02A2 800D            692                             jmp                     yes0key
                     693                        
02A4                 694     no0key: ;       mov             r1,#chkl 
                     695                                     ;       call    chdec
02A4 C3              696                                     clr                     c
02A5 E53E            697                                     mov                     a,chkl+1;chkl-1
02A7 9401            698                                     subb            a,#1
02A9 F53E            699                                     mov                     chkl+1,a
02AB E53D            700                                     mov                     a,chkl
02AD 9400            701                                     subb            a,#0
02AF F53D            702                                     mov                     chkl,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    12

                     703                             ;;;;;;;;;;;;
02B1                 704     yes0key:
02B1 2004B2          705                                             jb              bitizm,rebyte
                     706                              ;буфер 2 выдать на индикацию
02B4 E533            707                             mov             a,chind2                        ;реже выдавать на и
                             ндикацию
02B6 700B            708                             jnz             nochind
02B8 753364          709                             mov             chind2,#100
02BB 120000   F      710                             call    ind
02BE 120000   F      711     yes0key1:       call    z_1ms;z_01s
                     712                             ;call   z_01s
                     713                             ;call   z_01s
02C1 80D4            714                             jmp             labelA
                     715     
02C3 14              716     nochind:        dec             a
02C4 F533            717                                             mov             chind2,a
02C6 80F6            718                                     jmp             yes0key1;labelA
                     719             
02C8 C200            720     znplus:         clr     bitznak
02CA 547F            721                             anl             a,#7fh;fdh                      ;+
02CC F6              722                             mov             @r0,a
02CD 18              723                             dec             r0;,#reacp
02CE 7600            724                             mov             @r0,#00h
                     725                             
02D0                 726     goznak: 
                     727     ;;;;;;;;;;;;;
02D0 787A            728                             mov     r0,#reacp+3
02D2 E6              729                             mov             a,@r0
02D3 7F05            730                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02D5 C3              731     sdvig3:         clr             c
02D6 13              732                             rrc             a
02D7 DFFC            733                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02D9 FA              734                             mov             r2,a    ;сохр байт
02DA 18              735                             dec             r0              ;       reacp+2
02DB E6              736                             mov             a,@r0
02DC C0E0            737                             push    acc
02DE C3              738                             clr             c
02DF 7F03            739                             mov             r7,#3;2
02E1 C3              740     sdvig2:         clr             c
02E2 33              741                             rlc             a
02E3 DFFC            742                             djnz    r7,sdvig2 ;d12..d11      средний байт
02E5 4A              743                             orl             a,r2
02E6 F57A            744                             mov             reacp+3,a;сформ мл байт
02E8 D0E0            745                             pop             acc
                     746                             
02EA 7F05            747                             mov             r7,#5;6
02EC C3              748     sdvig1:         clr             c
02ED 13              749                             rrc             a
02EE DFFC            750                             djnz    r7,sdvig1 ;d15,d14        ср байт
02F0 FA              751                             mov             r2,a   ;сохр
02F1 E578            752                             mov             a,reacp+1
02F3 C0E0            753                             push    acc
                     754                     ;;      push    acc
02F5 7F03            755                             mov             r7,#3;2
02F7 C3              756     sdvig0:         clr             c
02F8 33              757                             rlc             a
02F9 DFFC            758                             djnz    r7,sdvig0 ;       d21..d16
02FB 4A              759                             orl             a,r2
02FC F579            760                             mov             reacp+2,a       ; сформ средний  байт
02FE D0E0            761                             pop             acc       ;reacp+1
                     762                             ;;;;;;;;;;;;;;
0300 20E70B          763                             jb              acc.7,sdvm
0303 C3              764                             clr             c
0304 7F05            765                             mov             r7,#5;6
0306 C3              766     sdvig4:         clr             c
0307 13              767                             rrc             a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    13

0308 DFFC            768                             djnz    r7,sdvig4 ;       d23,d22
030A F578            769                             mov             reacp+1,a
030C 8008            770                             jmp             readyacp;ankor;klmas
                     771     ;;;;;;;;;;;;                                    
030E 7F05            772     sdvm:           mov             r7,#5;6
0310 D3              773     sdvig6:         setb            c
0311 13              774                             rrc             a
0312 DFFC            775                             djnz    r7,sdvig6 ;       d23,d22
0314 F578            776                             mov             reacp+1,a
                     777                                                             
                     778     ; reacp..reacp+3-результат чтения асп(hex) 
                     779     ;;;;;;;;;
0316                 780     readyacp:
0316 7898            781                                             mov             r0,#chinkor
0318 E6              782                             mov             a,@r0
0319 30E702          783                             jnb             acc.7,gopart
031C 8044            784                                     jmp             sumt2
                     785                     
031E                 786     gopart:
031E 789A            787                             mov             r0,#parT        ;параметр времени
0320 793F            788                             mov             r1,#chmasN
0322 B6013A          789                             cjne    @r0,#1,noparT1
                     790                             ;РЕЗ+РЕЗ
0325 7877            791                             mov             r0,#reacp
0327 120000   F      792                             call    resar2          ;reacp->r2..r5
032A 78B6            793                             mov             r0,#summa+3;rez_A+3
032C 120000   F      794                             call    ladd
032F 78B3            795                             mov             r0,#summa;rez_A
0331 120000   F      796                             call    saver2
0334 793F            797                              mov            r1,#chmasN
0336 7714            798                             mov             @r1,#20;10
0338 789B            799                             mov             r0,#chbefore
033A B6631E          800                             cjne    @r0,#99,nobef99
                     801                             ;РЕЗ/100
033D 900000   F      802                             MOV        DPTR,#ch100 
0340 120000   F      803     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0343 120000   F      804                             call    zdiv;divide
0346 7862            805                             mov             r0,#rez_A
0348 120000   F      806                             call    saver2          ;сумма 100 отсчетов /100
034B 78C5            807                             mov             r0,#Rez_del
034D 120000   F      808                             call    saver2  
                     809                        ;;;;;
0350 78B3            810                        mov          r0,#summa
0352 120000   F      811                        call         clear4
                     812     
0355 799B            813                             mov             r1,#chbefore
0357 7700            814                             mov             @r1,#0
0359 8070            815                             jmp             klmas           ;загр в массив скользящее ср
035B 06              816     nobef99:        inc             @r0                     ;chbefore
035C 020000   F      817                             jmp             rebyte;labelA;метка A
                     818     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     819     ;а потом уже располагаем  в скользящий массив  из n
                     820     
                     821     
                     822     
035F B6021D          823     noparT1:        cjne    @r0,#2,noparT2
                     824                             ;РЕЗ+РЕЗ
0362                 825     sumt2:
0362 7877            826                              mov            r0,#reacp
0364 120000   F      827                             call    resar2          ;reacp->r2..r5
0367 78B6            828                             mov             r0,#summa+3;rez_A+3
0369 120000   F      829                             call    ladd
036C 78B3            830                             mov             r0,#summa;rez_A
036E 120000   F      831                             call    saver2
0371 789B            832                             mov             r0,#chbefore
0373 793F            833                             mov             r1,#chmasN
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    14

0375 770A            834                             mov             @r1,#10
0377 B613E1          835                             cjne    @r0,#19,nobef99;9,nobef99
                     836                             ;РЕЗ/20
037A 900000   F      837                             MOV        DPTR,#ch20;ch10 
037D 80C1            838                             jmp             allsum
                     839                             ;;;;;;;
                     840                             
                     841     
037F B6031D          842     noparT2:        cjne    @r0,#3,noparT3
                     843     
0382 7877            844                                                              mov            r0,#reacp
0384 120000   F      845                             call    resar2          ;reacp->r2..r5
0387 78B6            846                             mov             r0,#summa+3;rez_A+3
0389 120000   F      847                             call    ladd
038C 78B3            848                             mov             r0,#summa;rez_A
038E 120000   F      849                             call    saver2
0391 789B            850                             mov             r0,#chbefore
0393 793F            851                             mov             r1,#chmasN
0395 7704            852                             mov             @r1,#4                                  ;n=4
0397 B609C1          853                             cjne    @r0,#9,nobef99;9,nobef99
                     854                             ;РЕЗ/10
039A 900000   F      855                             MOV        DPTR,#ch10 
039D 80A1            856                             jmp             allsum
                     857                             
039F B6041D          858     noparT3:        cjne    @r0,#4,noparT4
03A2                 859     aapar:          
03A2 7877            860              mov            r0,#reacp
03A4 120000   F      861                             call    resar2          ;reacp->r2..r5
03A7 78B6            862                             mov             r0,#summa+3;rez_A+3
03A9 120000   F      863                             call    ladd
03AC 78B3            864                             mov             r0,#summa;rez_A
03AE 120000   F      865                             call    saver2
03B1 789B            866                             mov             r0,#chbefore
03B3 793F            867                             mov             r1,#chmasN
03B5 7704            868                             mov             @r1,#4
03B7 B604A1          869                             cjne    @r0,#4,nobef99;9,nobef99
                     870                             ;РЕЗ/10
03BA 900000   F      871                             MOV        DPTR,#ch5
03BD 8081            872                             jmp             allsum
                     873     
                     874                     
03BF 7702            875     noparT4:   mov          @r1,#2          ;chmasN n=2
03C1 7877            876                             mov             r0,#reacp
03C3 120000   F      877                             call    resar2          ;reacp->r2..r5
03C6 7862            878                             mov             r0,#rez_A
03C8 120000   F      879                             call    saver2
                     880     ;загрузить А в массив из 2/10 значений
                     881     ;;;;;;;;;;;;;;;
03CB                 882     klmas:           
03CB 793F            883                             mov             r1,#chmasN
03CD B7021A          884                             cjne    @r1,#2,mas10
03D0 900100          885                             MOV        dptr,#MASS0
03D3 120000   F      886                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     887     
03D6 7862            888                             mov             r0,#rez_A
03D8 120000   F      889                             call    resar2          ;->r2..r5
03DB 900100          890                             mov                     dptr,#MASS0
03DE 120000   F      891                   call              saveIr2                 ; R2-R5 --> MAS0
                     892                     
03E1 900107          893                   MOV          dptr,#MASS1+3
03E4 120000   F      894                   CALL       addx
03E7 020000   F      895                       jmp           endsum
                     896     ;массив из 10-ти измерений
03EA B70A7D          897     mas10:                  cjne    @r1,#10,mas20
03ED 900120          898                                             mov                     dptr,#MASS8
03F0 120000   F      899                     CALL            xCIKLWR         ;MASS8->MASS9
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    15

03F3 90011C          900                                             mov                     dptr,#MASS7
03F6 120000   F      901                     CALL            xCIKLWR         ;MASS7->MASS8
03F9 900118          902                     MOV       dptr,#MASS6
03FC 120000   F      903                     CALL       xCIKLWR         ; MASS6 --> MASS7
03FF 900114          904                     MOV        dptr,#MASS5
                     905                    
0402 120000   F      906                    CALL        xCIKLWR        ; MASS5 --> MASS6
0405 900110          907                    MOV         dptr,#MASS4
                     908                    
0408 120000   F      909                    CALL        xCIKLWR        ; MASS4 --> MASS5
040B 90010C          910                             mov                     dptr,#MASS3
                     911     
040E 120000   F      912                    CALL             xCIKLWR         ;MASS3->MASS4
0411 900108          913                     MOV        dptr,#MASS2
                     914                    
0414 120000   F      915                    CALL        xCIKLWR         ; MASS2 --> MASS3
0417 900104          916                    MOV         dptr,#MASS1
                     917                     
041A 120000   F      918                   CALL         xCIKLWR        ; MASS1 --> MASS2
041D 900100          919                    MOV         dptr,#MASS0
                     920                   
0420 120000   F      921                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     922     
                     923                             
0423 7862            924                             mov             r0,#rez_A
0425 120000   F      925                             call    resar2          ;->r2..r5
                     926                                     ;call   aform
0428 900100          927                                     mov                     dptr,#MASS0
042B 120000   F      928                   call              saveIr2                 ; R2-R5 --> MAS0
                     929              
042E 900107          930                   MOV          dptr,#MASS1+3
0431 120000   F      931                   CALL       addx
0434 90010B          932                   MOV          dptr,#MASS2+3
0437 120000   F      933                   CALL       addx
043A 90010F          934                   MOV          dptr,#MASS3+3
043D 120000   F      935                  CALL        addx
0440 900113          936                   MOV       dptr,#MASS4+3
0443 120000   F      937                   call       addx
0446 900117          938                     MOV        dptr,#MASS5+3
0449 120000   F      939                  CALL        addx
044C 90011B          940                   MOV          dptr,#MASS6+3
044F 120000   F      941                   CALL       addx
0452 90011F          942                   MOV          dptr,#MASS7+3
0455 120000   F      943                  CALL        addx
0458 900123          944                  MOV        dptr,#MASS8+3
045B 120000   F      945                   call       addx
045E 900127          946                     MOV                     dptr,#MASS9+3
0461 120000   F      947                  call        addx
0464 020000   F      948                              jmp            endsum
                     949     
0467 020000   F      950     rmas4:          jmp                     mas4
                     951     ;массив из 20-ти измерений
046A B714FA          952     mas20:          cjne    @r1,#20,rmas4
046D 900148          953                                             mov                     dptr,#MASS18
0470 120000   F      954                     CALL            xCIKLWR         ;MASS18->MASS19
0473 900144          955                                             mov                     dptr,#MASS17
0476 120000   F      956                     CALL            xCIKLWR         ;MASS17->MASS18
0479 900140          957                     MOV       dptr,#MASS16
047C 120000   F      958                     CALL       xCIKLWR         ; MASS16 --> MASS17
047F 90013C          959                     MOV        dptr,#MASS15
                     960                    
0482 120000   F      961                    CALL        xCIKLWR        ; MASS15 --> MASS16
0485 900138          962                    MOV         dptr,#MASS14
                     963                    
0488 120000   F      964                    CALL        xCIKLWR        ; MASS14 --> MASS15
048B 900134          965                             mov                     dptr,#MASS13
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    16

                     966     
048E 120000   F      967                    CALL             xCIKLWR         ;MASS13->MASS14
0491 900130          968                     MOV        dptr,#MASS12
                     969                    
0494 120000   F      970                    CALL        xCIKLWR         ; MASS12 --> MASS13
0497 90012C          971                    MOV         dptr,#MASS11
                     972                     
049A 120000   F      973                   CALL         xCIKLWR        ; MASS11 --> MASS12
049D 900128          974                    MOV         dptr,#MASS10
                     975                   
04A0 120000   F      976                    CALL        xCIKLWR        ; MASS10 --> MASS11
04A3 900124          977                                      MOV       dptr,#MASS9
04A6 120000   F      978                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     979     
04A9 900120          980                                             mov                     dptr,#MASS8
04AC 120000   F      981                     CALL            xCIKLWR         ;MASS8->MASS9
04AF 90011C          982                                             mov                     dptr,#MASS7
04B2 120000   F      983                     CALL            xCIKLWR         ;MASS7->MASS8
04B5 900118          984                     MOV       dptr,#MASS6
04B8 120000   F      985                     CALL       xCIKLWR         ; MASS6 --> MASS7
04BB 900114          986                     MOV        dptr,#MASS5
                     987                    
04BE 120000   F      988                    CALL        xCIKLWR        ; MASS5 --> MASS6
04C1 900110          989                    MOV         dptr,#MASS4
                     990                    
04C4 120000   F      991                    CALL        xCIKLWR        ; MASS4 --> MASS5
04C7 90010C          992                             mov                     dptr,#MASS3
                     993     
04CA 120000   F      994                    CALL             xCIKLWR         ;MASS3->MASS4
04CD 900108          995                     MOV        dptr,#MASS2
                     996                    
04D0 120000   F      997                    CALL        xCIKLWR         ; MASS2 --> MASS3
04D3 900104          998                    MOV         dptr,#MASS1
                     999                     
04D6 120000   F     1000                   CALL         xCIKLWR        ; MASS1 --> MASS2
04D9 900100         1001                    MOV         dptr,#MASS0
                    1002                   
04DC 120000   F     1003                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1004     
                    1005                             
04DF 7862           1006                             mov             r0,#rez_A
04E1 120000   F     1007                             call    resar2          ;->r2..r5
                    1008                                     ;call   aform
04E4 900100         1009                                     mov                     dptr,#MASS0
04E7 120000   F     1010                   call              saveIr2                 ; R2-R5 --> MAS0
                    1011              
04EA 900107         1012                   MOV          dptr,#MASS1+3
04ED 120000   F     1013                   CALL       addx
04F0 90010B         1014                   MOV          dptr,#MASS2+3
04F3 120000   F     1015                   CALL       addx
04F6 90010F         1016                   MOV          dptr,#MASS3+3
04F9 120000   F     1017                  CALL        addx
04FC 900113         1018                   MOV       dptr,#MASS4+3
04FF 120000   F     1019                   call       addx
0502 900117         1020                     MOV        dptr,#MASS5+3
0505 120000   F     1021                  CALL        addx
0508 90011B         1022                   MOV          dptr,#MASS6+3
050B 120000   F     1023                   CALL       addx
050E 90011F         1024                   MOV          dptr,#MASS7+3
0511 120000   F     1025                  CALL        addx
0514 900123         1026                  MOV        dptr,#MASS8+3
0517 120000   F     1027                   call       addx
051A 900127         1028                     MOV                     dptr,#MASS9+3
051D 120000   F     1029                  call        addx
                    1030     ;27
0520 90012B         1031                                     MOV        dptr,#MASS10+3
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    17

0523 120000   F     1032                   CALL       addx
0526 90012F         1033                                     MOV        dptr,#MASS11+3
0529 120000   F     1034                   CALL       addx
052C 900133         1035                   MOV          dptr,#MASS12+3
052F 120000   F     1036                   CALL       addx
0532 900137         1037                   MOV          dptr,#MASS13+3
0535 120000   F     1038                  CALL        addx
0538 90013B         1039                   MOV       dptr,#MASS14+3
053B 120000   F     1040                   call       addx
053E 90013F         1041                                     MOV        dptr,#MASS15+3
0541 120000   F     1042                     CALL     addx
0544 900143         1043                   MOV          dptr,#MASS16+3
0547 120000   F     1044                   CALL       addx
054A 900147         1045                   MOV          dptr,#MASS17+3
054D 120000   F     1046                  CALL        addx
0550 90014B         1047                  MOV        dptr,#MASS18+3
0553 120000   F     1048                   call       addx
0556 90014F         1049                                     MOV                     dptr,#MASS19+3
0559 120000   F     1050                  call        addx
055C 802F           1051                                     jmp             endsum
                    1052     ;массив из 4х измерений
055E                1053     mas4:                   
055E 900108         1054                                             MOV        dptr,#MASS2
0561 120000   F     1055                    CALL        xCIKLWR         ; MASS2 --> MASS3
0564 900104         1056                    MOV         dptr,#MASS1
0567 120000   F     1057                    CALL        xCIKLWR        ; MASS1 --> MASS2
056A 900100         1058                    MOV         dptr,#MASS0
056D 120000   F     1059                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1060     
                    1061                             
0570 7862           1062                             mov             r0,#rez_A
0572 120000   F     1063                             call    resar2          ;->r2..r5
                    1064                                     ;call   aform
0575 900100         1065                                     mov                     dptr,#MASS0
0578 120000   F     1066                   call              saveIr2                 ; R2-R5 --> MAS0
                    1067              
057B 900107         1068                   MOV          dptr,#MASS1+3
057E 120000   F     1069                   CALL       addx
0581 90010B         1070                   MOV          dptr,#MASS2+3
0584 120000   F     1071                   CALL       addx
0587 90010F         1072                   MOV          dptr,#MASS3+3
058A 120000   F     1073                  CALL        addx
                    1074                  
                    1075             ;23.03          
058D                1076     endsum:
058D 786E           1077                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
058F 06             1078                                     inc             @r0
0590 E6             1079                                     mov             a,@r0   
0591 200105         1080                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1081                                     
0594 B53F31         1082                                     cjne    a,chmasN,masx5
0597 D201           1083                                     setb    bitmas                  ;массив заполнен
0599 853F6E         1084     masfull:                mov             chmas,chmasN
059C 783F           1085                                     mov             r0,#chmasN
059E E6             1086                                     mov             a,@r0
                    1087     ;masfull:
059F B40208         1088                                     cjne    a,#2,nochn2
05A2 900000   F     1089                                     MOV        DPTR,#ch2;10 
05A5 120000   F     1090                                     CALL   ldc_ltemp                 ; ltemp <-- 2
05A8 8028           1091                                     jmp             mas5div
                    1092     
05AA B40A08         1093     nochn2:         cjne    a,#10,nochn10
05AD 900000   F     1094                                                     MOV        DPTR,#ch10 
05B0 120000   F     1095                                     CALL   ldc_ltemp                 ; ltemp <-- 10
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    18

05B3 801D           1096                                     jmp             mas5div
                    1097     
05B5 B41408         1098     nochn10:        cjne    a,#20,nochn20
05B8 900000   F     1099                                                     MOV        DPTR,#ch20 
05BB 120000   F     1100                                     CALL   ldc_ltemp                 ; ltemp <-- 20
05BE 8012           1101                                     jmp             mas5div
                    1102     
05C0 900000   F     1103     nochn20:        MOV        DPTR,#ch4 
05C3 120000   F     1104                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05C6 800A           1105                                     jmp             mas5div
                    1106     
05C8 856E0B         1107     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05CB E4             1108                                     clr     a
05CC F50A           1109                                     mov     ltemp+2,a
05CE F509           1110                                     mov     ltemp+1,a
05D0 F508           1111                                     mov     ltemp,a
                    1112     
05D2                1113     mas5div:
05D2 120000   F     1114                                     CALL       zdiv;divide                           ; R2-R5 =
                    1115                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1116     
                    1117                             
                    1118      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1119     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1120     ;получен результат 3 байта и знак
05D5 7866           1121                             mov             r0,#rez_A1
05D7 120000   F     1122                             call    saver2           ;сохр среднее по массиву
                    1123     ;;8.11.06                       mov             chmasN,#0
                    1124      ;;;;;;;;;;;;
                    1125      ;;;;;;;;;;;;
05DA C3             1126                             clr             c
05DB 799A           1127                             mov             r1,#parT
05DD 7402           1128                             mov             a,#2
05DF 97             1129                             subb    a,@r1
05E0 501D           1130                             jnc             ankor           ;T<3
                    1131                             ;A-=РЕЗ1                                ;T>3
05E2 120402         1132                             call    altof                   ;r2..r5->float
05E5 785E           1133                             mov             r0,#rez_Ame
05E7 120000   F     1134                             call    saver2
                    1135                             ;;;;
05EA 7890           1136                             mov             r0,#koefKp;->r8..r11
05EC EA             1137                             mov             a,r2
05ED 30E702         1138                             jnb             acc.7,nminus3
05F0 7894           1139                             mov             r0,#koefKm;->r8..r11
05F2 120000   F     1140     nminus3:                call    resar8
05F5 120203         1141                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05F8 785E           1142                             mov             r0,#rez_Ame
05FA 120000   F     1143                             call    saver2
05FD 8021           1144                             jmp             gotoKD
                    1145     
05FF                1146     ankor:  
05FF 7898           1147                             mov             r0,#chinkor
0601 E6             1148                             mov             a,@r0
0602 30E703         1149                             jnb             acc.7,nokorr
                    1150                             ;коррекция 0
0605 020000   F     1151                             jmp             kornul
0608                1152     nokorr: 
                    1153                             ;mov            r10,#00         ;       chavt
                    1154                             ;mov            r11,#00h
0608 7881           1155                             mov              r0,#chavt      
060A E6             1156                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
060B 30E737         1157                             jnb             acc.7,nonulavt;jnz              nonulavt        
060E 750A00         1158                             mov             r10,#0;1;00;02          
0611 750BC8         1159                             mov             r11,#0c8h;90h;0c8h;58h
0614 7898           1160                             mov             r0,#chinkor
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    19

0616 120000   F     1161                             call    chcmp
0619 7045           1162                             jnz             noavk
                    1163                             ;автокалибровка
061B 020000   F     1164                             jmp             autoka;noavk;
                    1165     
061E 8079           1166     rafterK:                jmp             afterK
                    1167     ;;;;;;;;;;
0620 C3             1168      gotoKD:                clr             c
0621 799A           1169                             mov             r1,#parT
0623 7404           1170                             mov             a,#4
0625 97             1171                             subb    a,@r1
0626 50F6           1172                             jnc             rafterK         ;T<5
                    1173                             ;A1-=A- *KD                     ;T>5
                    1174                             ;call           findkoef                                ;r2,r3-hex
                    1175                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1176                                     
                    1177                             ;       call    altof                   ;r2..r5->float
                    1178                             ;       mov     dptr,#CHtho;100000
                    1179                             ;       call    ldc_ltemp                       ;r8..r11
                    1180                             ;       call    fldiv
                    1181                             ;       call    move28
                    1182                             
0628 785E           1183                             mov             r0,#rez_Ame;->r2..r5   ???????????/
062A 120000   F     1184                             call    resar2
                    1185                                     ;call   flmul
062D 120343         1186                             call    ftol                    ;float->int
0630 7866           1187                             mov             r0,#rez_A1
0632 120000   F     1188                             call    saver2
0635 786A           1189                             mov             r0,#rez_A0;->r8..r11 hex
0637 120000   F     1190                             call    resar8
063A 120000   F     1191                             call    lsub            ;A3=A-1-A0
063D 789C           1192                             mov             r0,#rez_A3
063F 120000   F     1193                             call    saver2
0642 020000   F     1194                             jmp             labelB  
                    1195      ;;;;;;;;;;; 9.11.06
0645 789A           1196     nonulavt:        mov            r0,#parT
0647 E6             1197                             mov             a,@r0
0648 6401           1198                             xrl             a,#01
064A 700F           1199                             jnz             avtdec1
064C 7982           1200                             mov             r1,#chavt+1     ;T=1 chavt-10
064E 120000   F     1201                             call    tenmin
0651 7999           1202     kordec10:       mov             r1,#chinkor+1
0653 120000   F     1203                             call    tenmin
0656 801E           1204                             jmp             rezmul
                    1205     
0658 020000   F     1206     rmo220:         jmp             mo220
                    1207     
065B 7981           1208     avtdec1:        mov             r1,#chavt       
065D 120000   F     1209                             call    chdec           ;chavt-1
                    1210     ;                       jmp             kordec1;rezmul
0660 789A           1211     noavk:          mov             r0,#parT
0662 E6             1212                             mov             a,@r0
0663 6401           1213                             xrl             a,#01
0665 700A           1214                             jnz             kordec1
                    1215                             ;T=1 chinkor-10
0667 7999           1216                     mov             r1,#chinkor+1
0669 120000   F     1217                             call    tenmin
066C 8008           1218                             jmp             rezmul
                    1219     
066E 020000   F     1220     rnotestizm:             jmp                     notestizm
0671 7998           1221     kordec1:        mov             r1,#chinkor
0673 120000   F     1222                             call    chdec           ; chinkor-1
                    1223                        ;9.11.06
                    1224                             ;;;;;;;;;;;;;;
                    1225                             ;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    20

                    1226     ;(РЕЗ1-АN)*K
0676                1227     rezmul:
0676 7866           1228                             mov             r0,#rez_A1;->r2..r5
0678 120000   F     1229                             call    resar2
067B 120402         1230                             call    altof   ;r2..r5->float  6.06    
067E 7884           1231                             mov             r0,#kor0_AN;->r8..r11
0680 120000   F     1232                             call    resar8
0683 1201D1         1233                             call    flsub
0686 7890           1234                             mov             r0,#koefKp;->r8..r11
0688 EA             1235                             mov             a,r2
0689 30E702         1236                             jnb             acc.7,nminus
                    1237                             ;jnb            bitznak,nminus
                    1238                     
068C 7894           1239                             mov             r0,#koefKm;->r8..r11
068E 120000   F     1240     nminus:         call    resar8
0691 120203         1241                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0694 785E           1242                             mov             r0,#rez_Ame
0696 120000   F     1243                             call    saver2
                    1244      
0699                1245     afterK:                 
                    1246     ;;;;;;;;;;;;;;
0699 EA             1247                                     mov             a,r2
069A 547F           1248                                     anl             a,#7fh
069C FA             1249                                     mov             r2,a
069D 900000   F     1250                                     mov     dptr,#ch_250;220;220000
06A0 120000   F     1251                                     call    ldc_ltemp                       ;r8..r11=8
06A3 1201D6         1252                                     call    flcmp
06A6 50B0           1253                                     jnc             rmo220          ;A>220000
                    1254                                     ;;;;;;;;;
06A8 3015C3         1255                                     jnb                     biteizm,rnotestizm
06AB 78B1           1256                                     mov                     r0,#vichR
06AD B62155         1257                                     cjne            @r0,#21h,note21
06B0 7A50           1258                                     mov                     r2,#50h                 ;-11a
06B2 7B18           1259                                     mov                     r3,#18h                 ;k8
06B4 12046C         1260                                     call            rebyte2                         ;r2..r5- he
                             x
06B7 120402         1261                                     call            altof                   ;r2..r5->float
06BA C002           1262                                     push            rr2
06BC C003           1263                                     push            rr3
06BE C004           1264                                     push            rr4
06C0 C005           1265                                     push            rr5
06C2 7A50           1266                                     mov                     r2,#50h                 ;k10
06C4 7B20           1267                                     mov                     r3,#20h
06C6 12046C         1268     re11_7: call            rebyte2                 ;r2..r5
06C9 120402         1269                                     call            altof                   ;r2..r5->float
06CC 120000   F     1270                                     call            move28
06CF D005           1271                                     pop                     rr5
06D1 D004           1272                                     pop                     rr4
06D3 D003           1273                                     pop                     rr3
06D5 D002           1274                                     pop                     rr2
06D7 1202B7         1275                                     call            fldiv
                    1276                             ;       mov                     dptr,#ch_10
                    1277                             ;       call            ldc_ltemp                       ;r8..r11
                    1278                             ;       call            flmul
                    1279                                     ;;;;;2.02.07
06DA C002           1280                                     push            rr2
06DC C003           1281                                     push            rr3
06DE C004           1282                                     push            rr4
06E0 C005           1283                                     push            rr5
06E2 7A50           1284                                     mov                     r2,#50h                 ;-11a
06E4 7B2C           1285                                     mov                     r3,#2ch                 ;Km
06E6 12046C         1286                                     call            rebyte2                         ;r2..r5- he
                             x
06E9 120402         1287                                     call            altof                   ;r2..r5->float
06EC 120000   F     1288                                     call            move28
06EF D005           1289                                     pop                     rr5
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    21

06F1 D004           1290                                     pop                     rr4
06F3 D003           1291                                     pop                     rr3
06F5 D002           1292                                     pop                     rr2
06F7 120203         1293                                     call            flmul                           ;*Km
06FA 900000   F     1294                                     mov     dptr,#CHtho;100000
06FD 120000   F     1295                                     call    ldc_ltemp                       ;r8..r11=8
0700 1202B7         1296                                     call    fldiv
                    1297                                     ;;;;;
0703 8050           1298                                     jmp                     temul   
0705 B62218         1299     note21: cjne            @r0,#22h,note22
0708 7A50           1300                                     mov                     r2,#50h                 ;-09a
070A 7B10           1301                                     mov                     r3,#10h                 ;k6
070C 12046C         1302                                     call            rebyte2                         ;r2..r5- he
                             x
070F 120402         1303                                     call            altof                   ;r2..r5->float
0712 C002           1304                                     push            rr2
0714 C003           1305                                     push            rr3
0716 C004           1306                                     push            rr4
0718 C005           1307                                     push            rr5
071A 7A50           1308                                     mov                     r2,#50h                 ;k8
071C 7B18           1309                                     mov                     r3,#18h
071E 80A6           1310                                     jmp                     re11_7
0720 7A50           1311     note22: mov                     r2,#50h                 ;-7a
0722 7B08           1312                                     mov                     r3,#08h                 ;k4
0724 12046C         1313                                     call            rebyte2                         ;r2..r5- he
                             x
0727 120402         1314                                     call            altof                   ;r2..r5->float
072A C002           1315                                     push            rr2
072C C003           1316                                     push            rr3
072E C004           1317                                     push            rr4
0730 C005           1318                                     push            rr5
0732 7A50           1319                                     mov                     r2,#50h                 ;k6
0734 7B10           1320                                     mov                     r3,#10h
0736 808E           1321                                     jmp                     re11_7  
                    1322                                     ;;;;;;;;;
0738                1323     notestizm:
0738 301208         1324                                     jnb             bitklb,komulpz
073B 900000   F     1325                                     mov     dptr,#chk;100000
073E 120000   F     1326                                     call    ldc_long                        ;r2..r5
0741 8006           1327                                     jmp             komul
0743 120000   F     1328     komulpz:call            findkoef                                ;r2,r3-hex
0746 12046C         1329                                     call            rebyte2                         ;r2..r5- he
                             x
                    1330                                     
0749 120402         1331     komul:  call    altof                   ;r2..r5->float
074C 900000   F     1332                                     mov     dptr,#CHtho;100000
074F 120000   F     1333                             call    ldc_ltemp                       ;r8..r11=8
0752 1202B7         1334                                     call    fldiv
0755 120000   F     1335     temul:                          call    move28
0758 785E           1336                                     mov             r0,#rez_Ame
075A 120000   F     1337                                     call    resar2
                    1338                     
075D 120203         1339                                     call    flmul     ;A1-=A-*KD  fl
                    1340                                     
0760 120343         1341                                     call    ftol                    ;float->int
0763 7866           1342                                     mov             r0,#rez_A1
0765 120000   F     1343                                     call    saver2
0768 120402         1344                                     call    altof                   ;r2..r5->float
076B 900000   F     1345                                     mov     dptr,#ch_220;200;200000
076E 120000   F     1346                                     call    ldc_ltemp                       ;r8..r11=8
0771 1201D6         1347                                     call    flcmp
0774 502D           1348                                     jnc             rrmo220         ;A>200000
                    1349                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1350                             ;       jb              bitavp,yesavp
0776 301808         1351                                     jnb             knizm,goA2
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    22

0779 300602         1352                                     jnb             bitvi11,qu_avp
077C 8003           1353                                     jmp             goA2
077E 20052F         1354     qu_avp:                 jb              bitavp,yesavp
0781                1355     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0781                1356     goA2:                    ;A2=A1-
0781 7866           1357                                      mov            r0,#rez_A1
0783 120000   F     1358                                     call    resar2
0786 787B           1359                                     mov             r0,#rez_A2
0788 120000   F     1360                                     call    saver2
078B                1361     goA3A2:                  ;A3=A2-A0
078B 786A           1362                                       mov           r0,#rez_A0
078D 120000   F     1363                                     call    resar8
0790 120000   F     1364                                     call    lsub
0793 789C           1365                                     mov             r0,#rez_A3
0795 120000   F     1366                                     call    saver2
                    1367                                     ;;;;;;
0798 200644         1368                                     jb              bitvi11,yesvich
079B                1369     goonin:            ;jmp         goonind;indA3;8.11.06
079B 78AC           1370                                     mov             r0,#chind
079D B60006         1371                                     cjne    @r0,#0,rnochi0
07A0 020000   F     1372                                     jmp             goonind;indA3
                    1373     
07A3 020000   F     1374     rrmo220:                jmp             mo220
07A6 020000   F     1375     rnochi0:                jmp             nochi0
07A9 7866           1376     gokaA2:                 mov             r0,#rez_A1                      ;(float)
07AB 120000   F     1377                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
07AE 80D1           1378                                             jmp             goA2
                    1379     ;;;;;;;;;;;;;;;;
07B0 EA             1380     yesavp:                 mov             a,r2
07B1 547F           1381                                     anl             a,#7fh
07B3 FA             1382                                     mov             r2,a
07B4 900000   F     1383                                     mov     dptr,#ch_10th;10000
07B7 120000   F     1384                                     call    ldc_ltemp                       ;r8..r11=8
07BA 1201D6         1385                                     call    flcmp
07BD 50C2           1386                                     jnc             noavp           ;A>10000        
07BF 78AE           1387                                     mov             r0,#diap                ;10-11
07C1 B60902         1388                                     cjne    @r0,#9,avpgo
07C4 80BB           1389                                     jmp             noavp
07C6                1390     avpgo:                  
07C6 06             1391                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
07C7 B60A01         1392                                     cjne    @r0,#0ah,clmasv
07CA 16             1393                                     dec             @r0
07CB                1394     clmasv:         ;сбросить массив
07CB 120000   F     1395                             call    loadUS
                    1396                             ;call   louizm
07CE 120000   F     1397                             call     clmassix
07D1 78B3           1398                                     mov             r0,#summa
07D3 120000   F     1399                                     call    clear4
07D6 786A           1400                                     mov             r0,#rez_A0
07D8 120000   F     1401                                     call    clear4
07DB D207           1402                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07DD 80BC           1403                                jmp     goonin
                    1404     
07DF                1405     yesvich:        
                    1406                     ;                       mov             r0,#konstB
                    1407                     ;               call    resar2
                    1408                     ;               call    move28
07DF 789C           1409                                     mov             r0,#rez_A3;A1
07E1 120000   F     1410                                     call    resar2                          ;HEX
                    1411                                     
07E4 120402         1412                                     call            altof                   ;r2..r5->float
07E7 EA             1413                                     mov             a,r2                    ;модуль
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    23

07E8 547F           1414                                     anl             a,#7fh
07EA FA             1415                                     mov             r2,a
                    1416                     ;               call            fladd                           ;A1+B
                    1417                                     
07EB 900000   F     1418                                     mov     dptr,#CH_500;
07EE 120000   F     1419                                     call    ldc_ltemp                       ;r8..r11
07F1 1201D6         1420                                     call    flcmp
07F4 4073           1421                                     jc                      mo500R;error <500 >22000
07F6 900000   F     1422                                     mov     dptr,#CH_22T;
07F9 120000   F     1423                                     call    ldc_ltemp                       ;r8..r11
07FC 1201D6         1424                                     call    flcmp
07FF 5074           1425                                     jnc             mo500I          ;error
                    1426                                     ;;;;;;;;;;;;
0801 120000   F     1427                                     call            move28
0804 C008           1428                                     push            r8
0806 C009           1429                                     push            r9
0808 C00A           1430                                     push            r10
080A C00B           1431                                     push            r11
080C 78BC           1432                                     mov             r0,#konstA
080E 120000   F     1433                                     call    resar2
0811 900000   F     1434                                     mov             dptr,#CH_B
0814 120000   F     1435                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
0817 120203         1436                                     call            flmul                           ;A*10-7
081A D00B           1437                                     pop                     r11
081C D00A           1438                                     pop                     r10
081E D009           1439                                     pop                     r9
0820 D008           1440                                     pop                     r8
0822 1202B7         1441                                     call            fldiv                   ;результат R
0825 78C9           1442                                     mov                     r0,#rez_R
0827 120000   F     1443                                     call            saver2
082A 120343         1444                                     call            ftol                    ;float->hex
                    1445                                     ;;;;;;;;;;
082D 784F           1446                                             mov             r0,#abin
082F 120000   F     1447                                             call    saver2
                    1448     ;;;;;;;;
0832 7840           1449                                                     mov             r0,#bufind
0834                1450     age9:
0834 7620           1451                             mov             @r0,#" "          ;погасить индикатор
0836 08             1452                             inc             r0
0837 B84BFA         1453                             cjne    r0,#bufind+11,age9
                    1454                                             
083A 78C9           1455                                             mov             r0,#rez_R
083C 120000   F     1456                                             call            resar2
                    1457     ;;;;;;;;;;
083F 900000   F     1458                                     mov             dptr,#CH_fl
0842 120000   F     1459                                     CALL   ldc_ltemp
0845 1202B7         1460                                     call            fldiv
                    1461     
0848 78B8           1462                                     mov             r0,#work                ;степень +
084A 7600           1463                                     mov             @r0,#0
084C 78B9           1464                                     mov             r0,#work+1;степень -
084E 7600           1465                                     mov             @r0,#0
0850 900000   F     1466     compa1: mov     dptr,#ch_1;
0853 120000   F     1467                                     call    ldc_ltemp                       ;r8..r11
0856 1201D6         1468                                     call    flcmp
0859 4026           1469                                     jc              equ0            ;<1
085B 78B8           1470                                     mov             r0,#work                        ;степень +
085D 06             1471                                     inc             @r0
085E 900000   F     1472                                     mov             dptr,#ch_10;
0861 120000   F     1473                                     call    ldc_ltemp                       ;r8..r11
0864 1202B7         1474                                     call            fldiv
0867 80E7           1475                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1476                                     ;;;;;;;;;;;;;;;;;;;
0869 900000   F     1477     mo500R: mov             dptr,#teOLR
086C 120000   F     1478                               call          lotext           
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    24

086F 120000   F     1479                                     call            ind
0872 020000   F     1480                                     jmp                     nobavp;nobitizm
0875 900000   F     1481     mo500I: mov             dptr,#teOLI
0878 120000   F     1482                               call          lotext           
087B 120000   F     1483                                     call            ind
087E 020000   F     1484                                     jmp                     nobavp;nobitizm
0881                1485     equ0:           ;;;;;   call            ftol                    ;float->int
0881 78B8           1486                                     mov             r0,#work                ;степень +
0883 B60019         1487                                     cjne    @r0,#0,equ00
                    1488                                     
0886 900000   F     1489     compa2: mov     dptr,#ch_1;
0889 120000   F     1490                                     call    ldc_ltemp                       ;r8..r11
088C 1201D6         1491                                     call    flcmp
088F 500E           1492                                     jnc             equ00           ;>1
0891 78B9           1493                                     mov             r0,#work+1                      ;степень -
0893 16             1494                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0894 900000   F     1495                                     mov             dptr,#ch_10;
0897 120000   F     1496                                     call    ldc_ltemp                       ;r8..r11
089A 120203         1497                                     call            flmul
089D 80E7           1498                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1499     
                    1500     
089F                1501     equ00:          
089F 7853           1502                                                     mov             r0,#adec
08A1 7952           1503                                             mov             r1,#abin+3      ;hex->10
08A3 120000   F     1504                                             call    bindec
                    1505     
                    1506                                                     ;если степень полож убирать младший байт
                    1507                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1508                                                     ;число в bufind..bufind+5
08A6 78B8           1509                                             mov             r0,#work
08A8 B60021         1510                                             cjne    @r0,#0,outr
08AB 08             1511                                             inc             r0                      ;work+1
08AC B6FF05         1512                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
08AF 06             1513                                             inc                     @r0;!!!!!!!!!?
08B0 785B           1514                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
08B2 8003           1515                                             jmp                     bufr30
                    1516                                             ;;;;;;;;;;;;;;
08B4 06             1517     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
08B5 785C           1518                                                     mov             r0,#adec+9
08B7 7945           1519     bufr30:         mov             r1,#bufind+5;6
08B9 7F05           1520                                             mov             r7,#5;7
08BB E6             1521     bufr2:                          mov             a,@r0
08BC 2430           1522                                             add             a,#30h
08BE F7             1523                                             mov             @r1,a
08BF 19             1524                                             dec             r1
08C0 18             1525                                             dec             r0
08C1 DFF8           1526                                             djnz    r7,bufr2
                    1527     
08C3 784F           1528                                             mov             r0,#abin
08C5 120000   F     1529                                             call            clear4
08C8 78B9           1530                                             mov             r0,#work+1
08CA 801C           1531                                     jmp             outr5
                    1532     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
08CC 785C           1533     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
08CE C3             1534                                             clr             c
08CF 79B8           1535                                             mov             r1,#work
08D1 E8             1536                                             mov             a,r0
08D2 14             1537                                             dec             a                                  
                                  ;n-1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    25

08D3 97             1538                                             subb    a,@r1
08D4 F8             1539                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
08D5 7945           1540                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
08D7 7F05           1541                                             mov             r7,#5;7
08D9 E6             1542     bufr:                           mov             a,@r0
08DA 2430           1543                                             add             a,#30h
08DC F7             1544                                             mov             @r1,a
08DD 19             1545                                             dec             r1
08DE 18             1546                                             dec             r0
08DF DFF8           1547                                             djnz    r7,bufr
                    1548     
08E1 784F           1549                                             mov             r0,#abin
08E3 120000   F     1550                                             call            clear4
08E6 78B8           1551                                     mov             r0,#work
08E8 E6             1552     outr5:                  mov             a,@r0
08E9 F552           1553                                             mov             abin+3,a
                    1554                                                                     ;n(hex)->abin
08EB 120000   F     1555                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
08EE 2552           1556                                             add             a,abin+3
08F0 F552           1557                                             mov             abin+3,a
08F2 7853           1558                                             mov             r0,#adec
08F4 7952           1559                                             mov             r1,#abin+3      ;hex->10
08F6 120000   F     1560                                             call    bindec
08F9 855C48         1561                                             mov             bufind+8,adec+9
08FC 855B47         1562                                             mov             bufind+7,adec+8
08FF 754966         1563                                             mov             bufind+9,#66h
0902 020000   F     1564                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1565                                             
                    1566                                     ;;;;;;;;;;;;;;;;;;;;;
                    1567     ;;;;;;;;;;;;;
                    1568     
0905 300508         1569     mo220:             jnb          bitavp,indoll
0908 301805         1570                                jnb          knizm,indoll;bitizm,indoll
090B 78AE           1571                                     mov             r0,#diap
090D B6000B         1572                                     cjne    @r0,#0,nodi2
                    1573                                ;10-2
0910 900000   F     1574     indoll:                 mov             dptr,#teOLL;OLL
0913 120000   F     1575                                     call    lotext
0916 D217           1576                                     setb    bitoll
0918 020000   F     1577                                     jmp             goonin  
                    1578     
091B 16             1579     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1580     
091C B6FF01         1581                                     cjne    @r0,#0ffh,nodi9
091F 06             1582                                     inc             @r0
                    1583     
0920 120000   F     1584     nodi9:          call    loadUS
                    1585                                     ;call   louizm
                    1586                                     ;сбросить массив
0923 120000   F     1587                                     call     clmassix
0926 78B3           1588                                     mov             r0,#summa
0928 120000   F     1589                                     call    clear4
092B 786A           1590                                     mov             r0,#rez_A0
092D 120000   F     1591                                     call    clear4  
0930 D207           1592                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0932 020000   F     1593                                jmp     goonin
                    1594     
0935 16             1595     nochi0:                 dec             @r0                     ;СТИ-1
0936 020000   F     1596                                     jmp             labelB  
                    1597     
                    1598             
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    26

                    1599     ;;;;;;;;;;;;;;;
                    1600     
0939                1601     nop3_0: ;;      ;rez_A-rez_A0
                    1602                     ;;                      mov             r0,#rez_A0
                    1603                     ;;                      call    resar8
                    1604                     ;;                      call    lsub
                    1605                     ;;                      mov             r0,#rez_A
                    1606                     ;;;                     call    saver2
                    1607      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0939 789C           1608      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
093B 120000   F     1609                                             call    resar2
093E 900000   F     1610                                             mov             dptr,#ch100              
0941 120000   F     1611                                             call    ldc_ltemp        
0944 120000   F     1612                                             call    zdiv            ;rez_A3/100=r2..r5
                    1613                                     
0947 EC             1614                                             mov             a,r4
0948 20E71E         1615                                             jb              acc.7,aless0
094B 4408           1616                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
094D F5D3           1617                                             mov             DAC0H,a
                    1618                                                                             ;мл байт
094F ED             1619                                             mov             a,r5
0950 F5D2           1620                                             mov             DAC0L,a
0952 801E           1621                                             jmp             moveA3;
                    1622     
0954 B70207         1623     no3parN:                        cjne    @r1,#2,no2parN
                    1624                                             ;в байт 0  записать пробел
0957 7946           1625                                             mov             r1,#bufind+6
0959 7720           1626                                             mov             @r1,#" ";0fdh;
095B 020000   F     1627                                             jmp             seeind;moveA3
                    1628     
095E                1629     no2parN:                        ;в байты 0 и 1 записать пробел
095E 7945           1630                                             mov             r1,#bufind+5
0960 7720           1631                                             mov             @r1,#" ";0fdh;" "
0962 09             1632                                             inc             r1
0963 7720           1633                                             mov             @r1,#" ";0fdh;" "
0965 8079           1634                                             jmp             seeind;moveA3
0967 8077           1635      rseeind:               jmp             seeind
0969 F4             1636     aless0:                         cpl             a
096A 54F7           1637                                             anl             a,#0f7h         ;d11=0
096C F5D3           1638                                             mov             DAC0H,a
                    1639                                                                             ;мл байт
096E ED             1640                                             mov             a,r5
096F F4             1641                                             cpl             a
0970 F5D2           1642                                             mov             DAC0L,a
0972                1643     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1644                                     
                    1645                                             
0972                1646     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1647                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1648                     ;до конца цикла измерения результат не размещать в буфере
                    1649                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1650                     ;и возврату в режим измерения
0972 201456         1651                                             jb              bitvich,rnorvich
0975 201053         1652                                             jb              bitt2,rnorvich
0978 2017EC         1653                                             jb              bitoll,rseeind
                    1654                                             
097B 2011E9         1655                                             jb              bitmenu,rseeind
097E 200BE6         1656                                             jb              bitmem,rseeind
                    1657     ;;;;;;;;;;;;;;
                    1658                                             ; mov           r0,#rez_A3
                    1659                                             ;call   resar2
                    1660                                             ;call   ftol                    ;float->int r2..r5
                    1661     ;;;;;;;;
0981 789C           1662                                             mov             r0,#rez_A3;->r2..r5       передать 
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    27

                             A3 в индикатор
0983 120000   F     1663                                             call    resar2;????????????????17.01.07
                    1664                                     
0986 120000   F     1665                                             call    maform
0989 784F           1666                                             mov             r0,#abin
098B 120000   F     1667                                             call    saver2
                    1668     ;;;;;;;;
                    1669                                             
098E 7853           1670                                             mov             r0,#adec
0990 7952           1671                                             mov             r1,#abin+3      ;hex->10
0992 120000   F     1672                                             call    bindec
                    1673                                     
0995 785C           1674                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0997 7946           1675                                             mov             r1,#bufind+6
0999 7F07           1676                                             mov             r7,#7
099B E6             1677     bufdec:                         mov             a,@r0
099C 2430           1678                                             add             a,#30h
099E F7             1679                                             mov             @r1,a
099F 19             1680                                             dec             r1
09A0 18             1681                                             dec             r0
09A1 DFF8           1682                                             djnz    r7,bufdec
09A3 7847           1683                                             mov             r0,#bufind+7
09A5 762D           1684                                             mov             @r0,#2dh          ;-2..-9
09A7 7840           1685                                             mov             r0,#bufind
09A9 762B           1686                                             mov             @r0,#2bh
09AB 300202         1687                                             jnb             znmat,nozzmi;bitznak,nozzmi
09AE 762D           1688                                             mov             @r0,#2dh
09B0 79AE           1689     nozzmi:                         mov             r1,#diap
09B2 7848           1690                                             mov             r0,#bufind+8
09B4 E7             1691                                             mov             a,@r1
09B5 B40808         1692                                             cjne    a,#8,nodi8
09B8 7630           1693                                             mov             @r0,#30h                 ;10-10
09BA 18             1694                                             dec             r0
09BB 7663           1695                                             mov             @r0,#63h;31h
09BD 08             1696                                             inc             r0
09BE 8012           1697                                             jmp             seegoon
09C0 B4090C         1698     nodi8:                          cjne    a,#9,nodis9
                    1699                                     
09C3 7631           1700                                             mov             @r0,#31h           ;10-11
09C5 18             1701                                             dec             r0
09C6 7663           1702                                             mov             @r0,#63h;31h
                    1703                                     
09C8 08             1704                                             inc             r0
09C9 8007           1705                                             jmp             seegoon
                    1706     
09CB 8079           1707     rnorvich:               jmp             norvich
09CD 8085           1708     rno3parN:               jmp             no3parN
                    1709     
09CF 2432           1710     nodis9:                         add             a,#32h
09D1 F6             1711                                             mov             @r0,a;#37h;"T";
09D2 08             1712     seegoon:                        inc             r0
09D3 7641           1713                                             mov             @r0,#"A";"E";
09D5 08             1714                                             inc             r0
09D6 7600           1715                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09D8 08             1716                                             inc             r0;             mov             buf
                             ind+11
09D9 7610           1717                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1718                                             
                    1719     ;;;;;;;;;;;;;;;
                    1720     ;;;;;;goonind:
09DB 79AF           1721                                             mov             r1,#parN        ; ??????
09DD B703ED         1722                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1723             
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    28

09E0                1724     seeind:                         ;;;;;;;;;;;;;
09E0 784A           1725                                             mov             r0,#bufind+10
09E2 E6             1726                                             mov             a,@r0
09E3 300F03         1727                                             jnb             bitnul,nnnul
09E6 4408           1728                                             orl             a,#08h
09E8 F6             1729                                             mov             @r0,a
09E9 799A           1730      nnnul:         mov             r1,#parT
09EB B70204         1731                                             cjne    @r1,#2,nsec1
09EE 4420           1732                                             orl             a,#20h    ;1s
09F0 8009           1733                                             jmp             nsec10
09F2 B70104         1734     nsec1:          cjne    @r1,#1,nsec11
09F5 4440           1735                                             orl             a,#40h                  ;10s
09F7 8002           1736                                             jmp             nsec10
                    1737                                     
09F9 4410           1738     nsec11:         orl             a,#10h
                    1739                                                      ;0,1s
                    1740     ;;;;;;;;;;;;;;;;
09FB                1741     nsec10:         
                    1742     
                    1743     
09FB 784A           1744                                             mov             r0,#bufind+10   
09FD F6             1745                                             mov             @r0,a
09FE 300504         1746                                             jnb             bitavp,nobavp
0A01 4404           1747                                             orl             a,#04           ;bufind+10.2
0A03 F6             1748                                             mov             @r0,a
0A04 F6             1749                                             mov             @r0,a   
0A05 784A           1750     nobavp:         mov             r0,#bufind+10   
0A07 F6             1751                                             mov             @r0,a   
0A08 301803         1752                                        jnb          knizm,nobitizm
0A0B 4402           1753                                             orl             a,#02
0A0D F6             1754                                              mov            @r0,a
0A0E                1755     nobitizm:                       
0A0E 301A07         1756                                             jnb             bitakt,notakt
0A11 C21A           1757                                             clr             bitakt
0A13 534AFE         1758                                             anl             bufind+10,#0feh
0A16 8005           1759                                             jmp             taktind
0A18 D21A           1760     notakt:                         setb    bitakt
0A1A 434A01         1761                                             orl             bufind+10,#01                      
                                          
0A1D                1762     taktind:                
                    1763     ;;;;;;;;;
0A1D 301517         1764                                             jnb             biteizm,yesind
0A20 79B1           1765                                             mov             r1,#vichR
0A22 7848           1766                                             mov             r0,#bufind+8
0A24 7654           1767                                             mov             @r0,#'T'
0A26 08             1768                                             inc             r0
0A27 B72104         1769                                             cjne    @r1,#21h,test9i
0A2A 7631           1770                                             mov             @r0,#31h;11A
                    1771                                     ;       dec             r0
                    1772                                     ;       mov             @r0,#63h
0A2C 8009           1773                                             jmp             yesind
0A2E B72204         1774     test9i:         cjne    @r1,#22h,test7i
0A31 7632           1775                                             mov             @r0,#32h;39h;09A
0A33 8002           1776                                             jmp             yesind
0A35 7633           1777     test7i:         mov             @r0,#33h;37h;07A
                    1778     ;;;;;;;;;
0A37                1779     yesind:         
0A37 301203         1780                                             jnb             bitklb,noklb
0A3A 434A80         1781                                             orl             bufind+10,#80h; on kmp
0A3D 300A03         1782     noklb:          jnb             bitbon,nobuf
0A40 434B02         1783                                             orl             bufind+11,#02h; on pysk
0A43 120000   F     1784     nobuf:          call    ind        ;пп выдачи на индикатор
0A46                1785     norvich: 
0A46 789A           1786                                     mov             r0,# parT
0A48 79AC           1787                                             mov             r1,#chind
0A4A B60152         1788                                             cjne    @r0,#1,rnot1in
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    29

0A4D                1789     labelB:                    ;;;;;;;;;;;
                    1790                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A4D 789F           1791                                                     mov     r0,#rez_A3+3
                    1792                             ;;;;;;;;
0A4F 79BB           1793                             mov             r1,#work+3
0A51 E6             1794                             mov             a,@r0
0A52 7F07           1795                             mov             r7,#7;кол сдв вправо
0A54 C3             1796     dvig3:          clr             c
0A55 13             1797                             rrc             a
0A56 DFFC           1798                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A58 FA             1799                             mov             r2,a    ;сохр байт
0A59 18             1800                             dec             r0              ;rez_A3+2
0A5A E6             1801                             mov             a,@r0
0A5B C0E0           1802                             push    acc
0A5D C3             1803                             clr             c
0A5E 7F01           1804                             mov             r7,#1
0A60 C3             1805     dvig2:          clr             c
0A61 33             1806                             rlc             a
0A62 DFFC           1807                             djnz    r7,dvig2 ;d12..d11       средний байт
0A64 4A             1808                             orl             a,r2
0A65 F7             1809                             mov             @r1,a;сформ мл байт
0A66 19             1810                             dec             r1
0A67 D0E0           1811                             pop             acc
                    1812                             
0A69 7F07           1813                             mov             r7,#7
0A6B C3             1814     dvig1:          clr             c
0A6C 13             1815                             rrc             a
0A6D DFFC           1816                             djnz    r7,dvig1 ;d18     ср байт
0A6F FA             1817                             mov             r2,a   ;сохр
0A70 18             1818                             dec             r0
0A71 E6             1819                             mov             a,@r0 ;rez_A3+1
0A72 C0E0           1820                             push    acc
                    1821                     
0A74 7F01           1822                             mov             r7,#1
0A76 C3             1823     dvig0:          clr             c
0A77 33             1824                             rlc             a
0A78 DFFC           1825                             djnz    r7,dvig0 ;        d21..d16
0A7A 4A             1826                             orl             a,r2
0A7B F7             1827                             mov             @r1,a   ; сформ средний  байт
0A7C 19             1828                             dec             r1
0A7D D0E0           1829                             pop             acc       ;rez_A3+1
                    1830                             ;;;;;;;;;;;;;;
                    1831     ;                       jb              acc.7,dvm
0A7F C3             1832                             clr             c
0A80 7F07           1833                             mov             r7,#7
0A82 C3             1834     dvig4:          clr             c
0A83 13             1835                             rrc             a
0A84 DFFC           1836                             djnz    r7,dvig4 ;        d22
0A86 FA             1837                             mov             r2,a   ;сохр
0A87 18             1838                             dec             r0;     rez_A3
0A88 E6             1839                             mov             a,@r0
                    1840                             ;;;;;
0A89 7F01           1841                             mov             r7,#1
0A8B C3             1842     vig0:           clr             c
0A8C 33             1843                             rlc             a
0A8D DFFC           1844                             djnz    r7,vig0 ;         d24..d30
0A8F 4A             1845                             orl             a,r2
0A90 F7             1846                             mov             @r1,a   ; сформ   байт
0A91 19             1847                             dec             r1
0A92 E6             1848                             mov             a,@r0
                    1849                             ;;;;;
0A93 20E70C         1850                             jb              acc.7,dvm
0A96 C3             1851                             clr             c
0A97 7F07           1852                             mov             r7,#7
0A99 C3             1853     vig4:           clr             c
0A9A 13             1854                             rrc             a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    30

0A9B DFFC           1855                             djnz    r7,vig4 ;         d
0A9D 8009           1856                             jmp             endsdv
                    1857     
0A9F 020000   F     1858     rnot1in:                jmp             not1in
                    1859     
                    1860     ;;;;;;;;;;;;                                    
0AA2 7F07           1861     dvm:            mov             r7,#7
0AA4 D3             1862     dvig6:          setb            c
0AA5 13             1863                             rrc             a
0AA6 DFFC           1864                             djnz    r7,dvig6 ;        d31
0AA8 F7             1865     endsdv:         mov             @r1,a
                    1866                                                             
                    1867      ;->work   
                    1868                             
0AA9 900000   F     1869                             mov             dptr,#chzap
0AAC 120000   F     1870                             call     ldc_long
0AAF 78BB           1871                              mov            r0,#work+3
0AB1 120000   F     1872                             call    ladd
0AB4 ED             1873                             mov             a,r5
0AB5 F5D5           1874                             mov             DAC1L,a
                    1875                             
0AB7 EC             1876                             mov             a,r4
0AB8 F5D6           1877                             mov             DAC1H,a
                    1878     
                    1879                                             ;;;;;;;;;;
0ABA 78CF           1880                                             mov                     r0,#chbuf       
0ABC 120000   F     1881                                             call            resar2  
0ABF 900000   F     1882                                             mov                     dptr,#ch_1       
0AC2 120000   F     1883                                             call            ldc_ltemp
0AC5 1201D1         1884                                             call            flsub
0AC8 78CF           1885                                             mov                     r0,#chbuf       
0ACA 120000   F     1886                                             call            saver2  
0ACD 900000   F     1887                                             mov                     dptr,#ch_1
0AD0 120000   F     1888                                             call            ldc_ltemp
0AD3 1201D6         1889                                             call            flcmp
                    1890                                             
                    1891                                             
                    1892                                             
0AD6 5009           1893                                             jnc                     rnobuf0
0AD8 200909         1894                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0ADB 200A08         1895                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0ADE 020000   F     1896                                             jmp             gocikle
0AE1 020000   F     1897     rnobuf0:        jmp             nobuf0
0AE4                1898     yesprd: ;передать   A3 в буфер
0AE4 8035           1899                                             jmp             goonT
0AE6                1900     yesbuf:         ;записать   A3 в буфер
0AE6 120000   F     1901                                             call            resa_hl;dptr-
0AE9 120000   F     1902                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1903                                                                             ;в ячейке saven_bl
0AEC 120000   F     1904                                             call            save_hl
0AEF 78AE           1905                                             mov                     r0,#diap
0AF1 E6             1906                                             mov                     a,@r0
0AF2 7938           1907                                             mov                     r1,#nblok
0AF4 B70104         1908                                             cjne            @r1,#1,nosav1
0AF7 F534           1909                                             mov                     sadiap,a
0AF9 8012           1910                                             jmp                     gotostrob
0AFB B70204         1911     nosav1:         cjne            @r1,#2,nosav2
0AFE F532           1912                                             mov                     sadiap2,a
0B00 800B           1913                                     jmp                     gotostrob
0B02 B70304         1914     nosav2:         cjne            @r1,#3,nosav3
0B05 F531           1915                                             mov                     sadiap3,a
0B07 8004           1916                                     jmp                     gotostrob
0B09                1917     nosav3:         
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    31

0B09 F530           1918                                             mov                     sadiap4,a
0B0B 8000           1919                                     jmp                     gotostrob
                    1920     
                    1921                                             ;строб
0B0D                1922     gotostrob:
0B0D E586           1923                                     mov             a,P6            ;p6.4=0
0B0F 54EF           1924                             anl             a,#0efh
0B11 F586           1925                             mov             P6,a
0B13 00             1926                             nop
0B14 00             1927                             nop
                    1928                                     
0B15 E586           1929                             mov             a,P6                    ;p6.4=1 
0B17 4410           1930                             orl             a,#10h
0B19 F586           1931                             mov             P6,a                        
0B1B 78CD           1932     goonT:                          mov             r0,#interva;high  byte loadr2
0B1D E6             1933                                             mov             a,@r0
0B1E FC             1934                                             mov             r4,a
0B1F 08             1935                                             inc             r0
0B20 E6             1936                                             mov             a,@r0
0B21 FD             1937                                             mov             r5,a
0B22 E4             1938                                             clr             a
0B23 FB             1939                                             mov             r3,a
0B24 FA             1940                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0B25 120402         1941                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1942     
0B28 789A           1943                                                                             mov             r0,
                             #parT
0B2A B60110         1944                                                                     cjne    @r0,#1,nott1
                    1945                                     
0B2D 900000   F     1946                                     mov                     dptr,#ch_2       
0B30 120000   F     1947                                     call            ldc_ltemp
0B33 120203         1948     intmul: call            flmul
0B36 78CF           1949     intmul1:mov                     r0,#chbuf
0B38 120000   F     1950                                     call            saver2          ;*2
0B3B 803D           1951                                     jmp             gocikle
                    1952     
0B3D B60208         1953     nott1:                  cjne    @r0,#2,nott2
0B40 900000   F     1954                                                     mov                     dptr,#ch_10      
0B43 120000   F     1955                                     call            ldc_ltemp
0B46 80EB           1956                                     jmp                     intmul                             
                                  ;*10
                    1957     
0B48 B60308         1958     nott2:                  cjne    @r0,#3,nott3
0B4B 900000   F     1959                                                     mov                     dptr,#ch_2       
0B4E 120000   F     1960                                     call            ldc_ltemp
0B51 80E0           1961                                     jmp                     intmul                             
                                  ;*2
                    1962     
                    1963     
0B53 B60411         1964     nott3:          cjne    @r0,#4,nott4
0B56 900000   F     1965                                             mov                     dptr,#ch_10      
0B59 120000   F     1966                                             call            ldc_ltemp       ;/10*4
0B5C 1202B7         1967                                             call            fldiv
0B5F 900000   F     1968                                             mov                     dptr,#ch_4       
0B62 120000   F     1969                                             call            ldc_ltemp
0B65 80CC           1970                                             jmp             intmul
                    1971     
0B67 B60508         1972     nott4:          cjne    @r0,#5,nott5
0B6A 900000   F     1973                                                     mov                     dptr,#ch_2       
0B6D 120000   F     1974                                             call            ldc_ltemp;*2
0B70 80C1           1975                                             jmp             intmul;T=5
0B72 900000   F     1976     nott5:                  mov                     dptr,#ch_1       
0B75 120000   F     1977                                     call            ldc_ltemp
0B78 80B9           1978                                     jmp                     intmul                             
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    32

                                  ;*1
                    1979     
                    1980     
0B7A 300708         1981     gocikle:        jnb             bitzus,nofz                     
0B7D 120000   F     1982                             call    z_05s    ;0,5c
0B80 120000   F     1983                             call    z_05s    ;0,5c
0B83 C207           1984                             clr     bitzus;bitbuf бит задержки засылки us
0B85 020000   F     1985     nofz:           jmp     labelA;rebyte
                    1986     
                    1987     
0B88 80F0           1988     yestt5:         jmp             gocikle
                    1989     
0B8A 78CF           1990     nobuf0:                         mov             r0,#chbuf
0B8C 120000   F     1991                                                             call            resar2
0B8F 900000   F     1992                                                                     mov                     dpt
                             r,#ch_1       
0B92 120000   F     1993                                     call            ldc_ltemp
0B95 1201D1         1994                                     call            flsub
0B98 80E0           1995                                             jmp             gocikle
                    1996     
                    1997     
0B9A B60205         1998     not1in:                         cjne    @r0,#2,not2in
0B9D 7701           1999                                             mov             @r1,#1           ;T=2
0B9F 020000   F     2000                                             jmp     labelB
                    2001     
0BA2 B60305         2002     not2in:                         cjne    @r0,#3,not3in
0BA5 7701           2003                                             mov             @r1,#1;9                ;T=3
0BA7 020000   F     2004                                             jmp     labelB
0BAA 7703           2005     not3in:                         mov             @r1,#3;19
0BAC 020000   F     2006                                             jmp     labelB
                    2007     
                    2008     
                    2009     ;;;;;;;;;;;3.11.06
                    2010     
                    2011     ;;коррекция 0
0BAF 7883           2012     KORnul:         mov             r0,#chdel
0BB1 B60010         2013                             cjne    @r0,#0,nonuldel
                    2014                                     
0BB4 E584           2015                             mov             a,p4                    ;сохр  us
0BB6 F536           2016                             mov             saus,a
0BB8 E585           2017                             mov             a,p5
0BBA F537           2018                             mov             saus+1,a
                    2019     
0BBC 900000   F     2020                             mov             dptr,#kor0us
0BBF 120000   F     2021                             call    lospus          ;упр слово коррекции 0
0BC2 8018           2022                             jmp             chdelmo
                    2023     
0BC4                2024     nonuldel:       ;cjne   @r0,#7,no4del
0BC4 B6031B         2025                                                     cjne    @r0,#3,no4del
                    2026                             ;рез ->AN
0BC7 7862           2027                             mov             r0,#rez_A;->r2..r5
0BC9 120000   F     2028                             call    resar2
                    2029             
                    2030                                     ;;;;;;;;;;
0BCC 120402         2031                             call    altof           ;r2..r5->float
0BCF 7884           2032                             mov             r0,#kor0_AN;->kor0_AN
0BD1 120000   F     2033                             call    saver2
                    2034                                     
0BD4 E536           2035                             mov             a,saus                  ;восстан исходное упр слово
0BD6 F584           2036                             mov             p4,a
0BD8 E537           2037                             mov             a,saus+1
0BDA F585           2038                             mov             p5,a            
0BDC 7883           2039     chdelmo:        mov             r0,#chdel
0BDE 06             2040                             inc             @r0             ;chdel+1
0BDF 020000   F     2041                             jmp              rebyte
                    2042     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    33

0BE2                2043     no4del:         ;cjne   @r0,#14,chdelmo
0BE2 B606F7         2044                                             cjne    @r0,#6,chdelmo
0BE5 7600           2045                             mov             @r0,#0          ;chdel
0BE7 7898           2046                             mov             r0,#chinkor
0BE9 7600           2047                             mov             @r0,#00;1;00;02;600;
0BEB 08             2048                             inc             r0
0BEC 76C8           2049                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0BEE 120000   F     2050                             call    clmassix;сбросить массив скольз среднего
0BF1 020000   F     2051                             jmp              rebyte
                    2052     
                    2053     ;автокалибровка
0BF4                2054     autoka:  ;;  mov                r0,#chavt
                    2055                      ;;  call               chcmp
                    2056                      ;;  jz         nulavt
                    2057                     ;;   mov                r1,#chavt
                    2058                     ;;   call               chdec;chavt-1
                    2059                      ;; jmp         rebyte
0BF4                2060     nulavt:  ;;;;;
0BF4 7883           2061                             mov             r0,#chdel
0BF6 B60016         2062                             cjne    @r0,#0,nndelch
0BF9 E584           2063                             mov             a,p4                    ;сохр  us
0BFB F536           2064                             mov             saus,a
0BFD E585           2065                             mov             a,p5
0BFF F537           2066                             mov             saus+1,a
                    2067     
0C01 E585           2068                             mov   a,p5
0C03 4404           2069                             orl             a,#04              ;p5.2=1
0C05 00             2070                             nop
0C06 00             2071                             nop
0C07 543F           2072                             anl             a,#3fh          ;p5.6,p5.7=0
0C09 F585           2073                             mov   p5,a
0C0B 06             2074                             inc             @r0
0C0C 020000   F     2075                             jmp              rebyte
                    2076     
0C0F B6033D         2077     nndelch:        cjne    @r0,#3,n4delch
                    2078                             ;pez->A+
                    2079                             ;K+=000/(A+-AN)
                    2080                             ;mov            r0,#rez_A;->r2..r5
                    2081                             ;call   resar2
0C12 E577           2082                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C14 FA             2083                                     mov             r2,a
0C15 E578           2084                                     mov             a,reacp+1
0C17 FB             2085                                     mov             r3,a
0C18 E579           2086                                     mov             a,reacp+2
0C1A FC             2087                                     mov             r4,a
0C1B E57A           2088                                     mov             a,reacp+3
0C1D FD             2089                                     mov             r5,a
                    2090                                     ;;;;;;;;;;;;;;;
0C1E 120402         2091                             call    altof                   ;r2..r5->float
0C21 7888           2092                             mov             r0,#rezAp;->rezAp
0C23 120000   F     2093                             call    saver2                          
0C26 7884           2094                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0C28 120000   F     2095                             call    resar8                          
0C2B 1201D1         2096                             call    flsub           ; r2..r5(A+-AN)
0C2E 120000   F     2097                             call    move28     ;r2..r5->r8..r11
0C31 900000   F     2098                             mov             dptr,#CH2tho;000->r2..r5 float
0C34 120000   F     2099                             call    ldc_long                
0C37 1202B7         2100                             call    fldiv
0C3A EA             2101                             mov             a,r2
0C3B 547F           2102                             anl             a,#7fh
0C3D FA             2103                             mov             r2,a
0C3E 7890           2104                             mov             r0,#koefKp;->koefKp
0C40 120000   F     2105                             call    saver2
                    2106                       
                    2107                     ;       anl             P5,#0feh                ;p5.0=0 
0C43 E585           2108                     mov             a,P5
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    34

0C45 543B           2109                             anl             a,#3bh;acp-
0C47 F585           2110                             mov             P5,a
0C49 7883           2111                             mov             r0,#chdel
0C4B 06             2112                             inc             @r0                       ;ch+1
0C4C 020000   F     2113                             jmp             rebyte
                    2114     
0C4F B6063F         2115     n4delch:        cjne    @r0,#6,n8delch
                    2116                             ; pez->A-
                    2117                             ;K-=000/(A--AN)
                    2118                     ;       mov     r0,#rez_A;->r2..r5
                    2119                     ;       call    resar2
0C52 E577           2120                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0C54 FA             2121                                     mov             r2,a
0C55 E578           2122                                     mov             a,reacp+1
0C57 FB             2123                                     mov             r3,a
0C58 E579           2124                                     mov             a,reacp+2
0C5A FC             2125                                     mov             r4,a
0C5B E57A           2126                                     mov             a,reacp+3
0C5D FD             2127                                     mov             r5,a
                    2128                                     ;;;;;;;;;;;;;;;
0C5E 120402         2129                             call    altof                   ;r2..r5->float
0C61 788C           2130                             mov             r0,#rezAm;->rezAm
0C63 120000   F     2131                             call    saver2                          
0C66 7884           2132                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0C68 120000   F     2133                             call    resar8                          
0C6B 1201D1         2134                             call    flsub                   ; r2..r5(A--AN)
0C6E 120000   F     2135                             call    move28                  ;r2..r5->r8..r11
0C71 900000   F     2136                             mov             dptr,#CH2tho    ;000->r2..r5 float
0C74 120000   F     2137                             call    ldc_long                
0C77 1202B7         2138                             call    fldiv
0C7A EA             2139                             mov             a,r2
0C7B 547F           2140                             anl             a,#7fh
0C7D FA             2141                             mov             r2,a
0C7E 7894           2142                             mov             r0,#koefKm;->koefKm
0C80 120000   F     2143                             call    saver2
                    2144                        
0C83 E536           2145                             mov             a,saus                  ;восстан исходное упр слово
0C85 F584           2146                             mov             p4,a
0C87 E537           2147                             mov             a,saus+1
0C89 F585           2148                             mov             p5,a            
0C8B 7883           2149                             mov             r0,#chdel
0C8D 06             2150                             inc             @r0                       ;ch+1
0C8E 020000   F     2151                        jmp    rebyte
                    2152     
0C91 B6090F         2153     n8delch:        cjne    @r0,#9,n12delch
0C94 7600           2154                             mov             @r0,#0
0C96 7981           2155                             mov             r1,#chavt
0C98 770C           2156                             mov             @r1,#0ch;6;1;
0C9A 09             2157                             inc             r1
0C9B 7780           2158                             mov             @r1,#80h;40h;
0C9D 120000   F     2159                             call   clmassix     ;сбросить массив среднего
0CA0 020000   F     2160                             jmp             rebyte
0CA3 06             2161     n12delch:       inc             @r0
0CA4 020000   F     2162                             jmp             rebyte
                    2163     
                    2164     
                    2165     
                    2166                                 
0CA7 020000   F     2167     rout6:          jmp             out6
0CAA 020000   F     2168     rlabelF:        jmp             labelF  
0CAD 020000   F     2169     rknrazr:        jmp             knrazr  
0CB0 020000   F     2170     rknopt:         jmp             knopt
0CB3 020000   F     2171     rizman:         jmp             izman   
0CB6                2172     keyb1:  ;IE6 
0CB6 75E700         2173                                     mov             EIE2,#00H
0CB9 75AD00         2174                                     mov             P3IF,#00
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    35

                    2175                                     
0CBC C0E0           2176                                     push    acc
0CBE C0D0           2177                                     push    psw
0CC0 C000           2178                                     push    rr0
0CC2 C001           2179                                     push    rr1
0CC4 C002           2180                                     push    rr2
0CC6 C003           2181                                     push    rr3
0CC8 C004           2182                                     push    rr4
0CCA C005           2183                                     push    rr5
0CCC C006           2184                                     push    rr6
0CCE C007           2185                                     push    rr7
                    2186                                     ;clr            bitmig
                    2187                       ;;;;;;;;;;;;;;
0CD0 120000   F     2188                                     call    z_01s;0,1s
0CD3 120000   F     2189                                             call    z_01s
                    2190                                     ;восстан знакоместо при мигании
                    2191                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0CD6 78B2           2192                                     mov             r0,#marker
0CD8 7440           2193                                     mov             a,#bufind
0CDA 26             2194                                     add             a,@r0                   ;a=bufind+marker
0CDB F9             2195                                     mov             r1,a
0CDC A73C           2196                                     mov             @r1,savba
                    2197                                     ;;;;;;;;;;;
0CDE E5B0           2198                             mov             a,p3
0CE0 20E644         2199                                     jb              acc.6,outviR;выход из режима выч R
0CE3 E5B0           2200     gout6:                          mov             a,p3
0CE5 44FF           2201                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0CE7 F5B0           2202                                     mov             p3,a
0CE9 E5B0           2203                                     mov             a,p3
0CEB 30E6B9         2204                                     jnb             acc.6,rout6             ;error
0CEE 3004B9         2205                                     jnb             bitizm,rlabelF
0CF1 75B0FE         2206                                     mov             p3,#0feh                ;реж IZM
0CF4 E5B0           2207                                     mov             a,p3
0CF6 30E6BA         2208                                     jnb             acc.6,rizman
                    2209                                     ;;;;;;
0CF9 201232         2210                                     jb              bitklb,goklb
0CFC 75B0FD         2211                                     mov             p3,#0fdh
0CFF E5B0           2212                                     mov             a,p3
0D01 30E6A9         2213                                     jnb             acc.6,rknrazr             ;labelC
0D04 75B0FB         2214                                     mov             p3,#0fbh
0D07 E5B0           2215                                     mov             a,p3
0D09 30E655         2216                                     jnb             acc.6,knright           ;->
0D0C 75B0F7         2217                                     mov             p3,#0f7h
0D0F E5B0           2218                                     mov             a,p3
0D11 30E69C         2219                                     jnb             acc.6,rknopt                    ;T
0D14 75B0EF         2220                                     mov             p3,#0efh
0D17 E5B0           2221                                mov          a,p3
0D19 30E615         2222                                     jnb             acc.6,pyskst                    ;pysk/stop
0D1C 75B0DF         2223                                     mov             p3,#0dfh
0D1F E5B0           2224                                     mov             a,p3
0D21 30E65C         2225                                jnb          acc.6,knvich
0D24 020000   F     2226                                     jmp             izmpaT
                    2227     
0D27 3006B9         2228     outviR: jnb             bitvi11,gout6   
0D2A C214           2229                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0D2C C206           2230                                     clr             bitvi11
                    2231                                     
0D2E 020000   F     2232     goklb:          jmp             out6
                    2233     
0D31 200A12         2234     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0D34 D20A           2235                                     setb    bitbon  ;уст реж буфер вкл
0D36 79D5           2236                                     mov                     r1,#volume;work         ;обьем блок
                             а
0D38 7700           2237                                     mov                     @r1,#00
0D3A 09             2238                                     inc                     r1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    36

0D3B 77C7           2239                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0D3D 434B02         2240                                     orl             bufind+11,#02h; on pysk
0D40 120000   F     2241                                     call            ind
0D43 020000   F     2242                                     jmp             izmpaT
0D46 C20A           2243     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D48 534BFD         2244                                             anl             bufind+11,#0fdh; off pysk
0D4B 120000   F     2245                                             call    ind
0D4E 020000   F     2246                                     jmp             izmpaT
                    2247     
0D51 79B0           2248     tizmri:                 mov             r1,#level
0D53 B70102         2249                                     cjne    @r1,#1,right2
                    2250                                     ;10s->HET
0D56 8004           2251                                     jmp             right3
                    2252     
0D58 07             2253     right2:                 inc             @r1
0D59 120000   F     2254                                     call    lolevT
                    2255                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D5C 120000   F     2256     right3:                 call    ind
0D5F 8078           2257                                     jmp             izmfun
                    2258     
                    2259                             
                    2260                             
0D61                2261     knright:        
                    2262     
0D61 79AE           2263                                     mov             r1,#diap
                    2264                             ;перекл диапазон 1 поз вверх сбр массив
0D63 17             2265                                     dec             @r1
0D64 B7FF04         2266                                     cjne    @r1,#0ffh,diinc
0D67 7700           2267                                     mov             @r1,#0
0D69 806E           2268                                     jmp  izmfun
0D6B 120000   F     2269     diinc:                  call     clmassix
0D6E 78B3           2270                                     mov             r0,#summa
0D70 120000   F     2271                                     call    clear4
0D73 786A           2272                                     mov             r0,#rez_A0
0D75 120000   F     2273                                     call    clear4  
0D78 120000   F     2274                                     call    loadUS
0D7B 805C           2275                                      jmp  izmfun
                    2276     
0D7D 020000   F     2277     vit2_10:                jmp             out6
0D80                2278     knvich:                 ;12.02.07
0D80 789A           2279                                             mov                     r0,#parT
0D82 C3             2280                                             clr                     c
0D83 7404           2281                                             mov                     a,#4 
0D85 96             2282                                             subb            a,@r0
0D86 40F5           2283                                             jc                      vit2_10;не нажимать кнопку 
                             ВЫЧ R T=10ms,2ms
0D88 200613         2284                               jb            bitvi11,onvich
0D8B C204           2285                                     clr             bitizm
0D8D D214           2286                                     setb    bitvich
                    2287                                     
0D8F 78B1           2288                                     mov             r0,#vichR
0D91 7611           2289                                     mov             @r0,#11h;;????????or 0
                    2290                                     ;ВЫЧИСЛИТЬ
0D93 900000   F     2291                                     mov     dptr,#teVICH
0D96 120000   F     2292                                     call    lotext
0D99 120000   F     2293                                call         z_1s;;;;;;;
0D9C 806C           2294                                     jmp              viout;izmpaT
                    2295     
0D9E C214           2296     onvich:                 clr             bitvich
0DA0 78B1           2297                                     mov             r0,#vichR
0DA2 7600           2298                                     mov             @r0,#0
0DA4 8037           2299                                     jmp              izmpaT
                    2300     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0DA6 301820         2301     louizm:            jnb          knizm,lou
0DA9 79AE           2302                                     mov             r1,#diap
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    37

0DAB C3             2303                                     clr             c
0DAC 7403           2304                                     mov             a,#3
0DAE 97             2305                                     subb    a,@r1
0DAF 5006           2306                                     jnc             lldi23    ;10-2..10-5
                    2307                                     ;10-6..10-11
0DB1 E584           2308                                     mov             a,p4
0DB3 54F7           2309                                     anl             a,#0f7h   ;d3
0DB5 F584           2310                                     mov             p4,a
0DB7 E7             2311     lldi23:                 mov             a,@r1
0DB8 6403           2312                                     xrl             a,#3
0DBA 7002           2313                                     jnz             lldi3
0DBC 8005           2314                                     jmp             lldi2   ;10-5
0DBE E7             2315     lldi3:                  mov             a,@r1
0DBF 6402           2316                                     xrl             a,#2            ;
0DC1 7006           2317                                     jnz             lou             
0DC3 E585           2318     lldi2:                  mov             a,p5            ;10-4
0DC5 4408           2319                                     orl             a,#08
0DC7 F585           2320                                     mov             p5,a
0DC9 22             2321     lou:                    ret
                    2322                               ;;;;;;
0DCA 201807         2323     izman:                  jb              knizm,knizmon
0DCD D218           2324                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2325                             ;       d3(k5 p4),d3(u5 p5)заслать us
0DCF 120000   F     2326                                     call    louizm 
0DD2 8005           2327                                     jmp             izmfun
0DD4 C218           2328     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0DD6 120000   F     2329                                     call    loadUS;восстановить us
0DD9                2330     izmfun:                 
0DD9 D207           2331                                     setb    bitzus;bitbuf
0DDB 8000           2332                                     jmp             labelE;;;;;;;;;;;;
                    2333                                     ;;;;;;;;;;;;;;
0DDD                2334     izmpaT:
                    2335     ;;;;;;;;;;;;;;;;;
                    2336                     ;       clr             c 
                    2337                     ;       mov             r1,#parN
                    2338     
                    2339                     ;       mov             r0,#diap
                    2340                     ;       mov             a,#6            
                    2341                     ;       subb    a,@r0
                    2342                     ;       jnc             labelE          ;         ;10-2..10-8
                    2343                               
                    2344                     ;       mov             @r1,#2          ;10-9..10-11            
                    2345                     ;       jmp             labelE
                    2346     
                    2347     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0DDD 789A           2348     labelE:                 mov             r0,#parT
0DDF 793D           2349                                     mov             r1,#chkl
0DE1 B60108         2350                                     cjne    @r0,#1,izmt2
0DE4 7700           2351                                     mov             @r1,#0
0DE6 09             2352                                     inc             r1
0DE7 7702           2353                                     mov             @r1,#2
0DE9 020000   F     2354                                     jmp             out6
0DEC B60208         2355     izmt2:                  cjne    @r0,#2,izmt3
0DEF 7700           2356                                     mov             @r1,#0
0DF1 09             2357                                     inc             r1
0DF2 7714           2358                                     mov             @r1,#20
0DF4 020000   F     2359                                     jmp             out6
                    2360     
0DF7 7700           2361     izmt3:                  mov             @r1,#0
0DF9 09             2362                                     inc             r1
0DFA 77C8           2363                                     mov             @r1,#200
0DFC 020000   F     2364                                     jmp             out6
                    2365     
                    2366     
                    2367     
                    2368     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    38

0DFF                2369     knopt: ;кнопка T
0DFF C204           2370                                clr          bitizm
0E01 D210           2371                                setb         bitt2
0E03 79B7           2372                                mov          r1,#load
0E05 7704           2373                                mov          @r1,#4;1s
0E07 120000   F     2374                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2375                     
0E0A 793D           2376     viout:          mov             r1,#chkl
0E0C 7703           2377                             mov             @r1,#03
0E0E 09             2378                             inc             r1
0E0F 77E8           2379                             mov             @r1,#0e8h               ;1000
0E11 020000   F     2380                             jmp             out6
                    2381     
0E14                2382     knrazr:          
0E14 C3             2383     labelC:          clr            c
0E15 78AF           2384                             mov             r0,#parN
0E17 799A           2385                             mov             r1,#parT
0E19 7402           2386                             mov             a,#2
0E1B 97             2387                             subb    a,@r1
0E1C 40BF           2388                             jc              labelE          ;T>2
0E1E B60104         2389                             cjne    @r0,#1,noN1c
0E21 7602           2390                             mov             @r0,#2          ;N=2
0E23 80B8           2391                             jmp             labelE
                    2392     
0E25 B60204         2393     noN1c:          cjne    @r0,#2,not_1
0E28 7603           2394                             mov             @r0,#3          ;N=3      ;10-2..10-8
0E2A 80B1           2395                             jmp             labelE
                    2396     
0E2C                2397     not_10: 
0E2C 7601           2398     not_1:          mov             @r0,#1                          ;N=1
0E2E 80AD           2399                             jmp     labelE
                    2400     
0E30 020000   F     2401     rtizmri:        jmp             tizmri
                    2402     
0E33 75B0F7         2403     ttout:          mov             p3,#0f7h
0E36 20B6D1         2404                                             jb              p3.6,viout
0E39 D204           2405                                             setb    bitizm;отжатие кнопки t
0E3B C210           2406                                             clr             bitt2
0E3D 809E           2407                                             jmp             labelE
0E3F                2408     labelf:                 
0E3F 301037         2409                             jnb             bitt2,nofizm
0E42 75B0FB         2410                        mov          p3,#0fbh
0E45 E5B0           2411                        mov          a,p3
0E47 20E6E9         2412                        jb           acc.6,ttout;outF
0E4A 79B7           2413                        mov          r1,#load;parT
0E4C B70503         2414                        cjne         @r1,#5,noft1
                    2415                        ;t=10s
0E4F 020000   F     2416                        jmp          out6;ft1izm
                    2417     
0E52 07             2418     noft1:     inc          @r1;dec         @r1
0E53 120000   F     2419     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2420                             ;call   ind
0E56 020000   F     2421                     jmp             out6;??????????????/
                    2422     
                    2423                             ;увеличить счетчик задержки клавиатуры
0E59 783D           2424     outF:           mov             r0,#chkl
0E5B 7627           2425                             mov             @r0,#27h
0E5D 08             2426                             inc             r0
0E5E 7610           2427                             mov             @r0,#10h
0E60 020000   F     2428                             jmp             out6;out7
                    2429     
0E63 020000   F     2430     noviR1:         jmp             noviR
0E66 78B1           2431     outvich:        mov                     r0,#vichR
0E68 7600           2432                                             mov                     @r0,#0
0E6A C214           2433                                             clr                     bitvich
0E6C C206           2434                                             clr                     bitvi11
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    39

0E6E C211           2435                                             clr                     bitmenu
0E70 D204           2436                                             setb            bitizm
0E72 78B2           2437                                             mov                     r0,#marker
0E74 76FF           2438                                             mov                     @r0,#0ffh
0E76 020000   F     2439                                             jmp                     out6    
                    2440     
0E79 3014E7         2441     nofizm:         jnb             bitvich,noviR1
0E7C 75B0DF         2442                                                     mov             p3,#0dfh
0E7F 30B6E4         2443                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0E82 78B1           2444                             mov             r0,#vichR
0E84 B61110         2445                             cjne    @r0,#11h,no11v6
0E87 75B0FB         2446                             mov                     p3,#0fbh;->
0E8A 20B6CC         2447                             jb                      p3.6,outF
0E8D 7612           2448                             mov             @r0,#12h                ;11= вычислить
0E8F 900000   F     2449     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E92 120000   F     2450                             call    lotext
0E95 80C2           2451                             jmp             outF
                    2452             
0E97 B61210         2453     no11v6:         cjne    @r0,#12h,no12v6
0E9A 75B0FB         2454                             mov             p3,#0fbh;->
0E9D 20B6B9         2455                             jb              p3.6,outF
0EA0 7613           2456                             mov             @r0,#13h
0EA2 900000   F     2457                             mov             dptr,#teOUT
0EA5 120000   F     2458                             call    lotext
0EA8 80AF           2459                             jmp             outF
                    2460                     
0EAA B61310         2461     no12v6:         cjne    @r0,#13h,no13v6
0EAD 75B0FB         2462                                                     mov             p3,#0fbh;->
0EB0 20B6A6         2463                             jb              p3.6,outF
0EB3 7611           2464                             mov             @r0,#11h
0EB5 900000   F     2465                             mov             dptr,#teVICH
0EB8 120000   F     2466                             call    lotext
0EBB 809C           2467                             jmp             outF
                    2468     
                    2469     ;кн -> A= 0000
                    2470     ;кн -> B= +00000
0EBD 75B0FB         2471     no13v6:         mov             p3,#0fbh
0EC0 E5B0           2472                             mov             a,p3
0EC2 20E635         2473                             jb              acc.6,chanZ
0EC5 E53B           2474                             mov             a,movrig
0EC7 B40714         2475                             cjne    a,#7,kon_B      
0ECA 78B2           2476                             mov             r0,#marker      ;A= 0000
0ECC B60716         2477                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0ECF E53A           2478     rikn:           mov             a,movleft
0ED1 F6             2479                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2480     ;                               29.12.06
                    2481     ;;;;;;;;;;;;;;;;;;
                    2482     ;необходимо не портить цифру в следуюем справа знакоместе
                    2483     ;т е сохранить ее в ячейке для мигания в противном случае
                    2484     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2485     ;       знакоместа
0ED2 78B2           2486                                     mov             r0,#marker
0ED4 7440           2487                                     mov             a,#bufind
0ED6 26             2488                                             add             a,@r0                   ;a=bufind+m
                             arker
0ED7 F9             2489                                             mov             r1,a
0ED8 09             2490                                             inc             r1
0ED9 873C           2491                                             mov             savba,@r1
0EDB 020000   F     2492                                     jmp             outF
                    2493     
0EDE 78B2           2494     kon_B:          mov             r0,#marker      ;B= +00000
0EE0 B60802         2495                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0EE3 80EA           2496                                             jmp             rikn
0EE5                2497     mark0_8:
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    40

                    2498     ;                               29.12.06
                    2499     ;;;;;;;;;;;;;;;;;;
                    2500     ;необходимо не портить цифру в следуюем справа знакоместе
                    2501     ;т е сохранить ее в ячейке для мигания в противном случае
                    2502     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2503     ;       знакоместа ->B=+00000
0EE5 78B2           2504                                             mov             r0,#marker
0EE7 7440           2505                                     mov             a,#bufind
0EE9 26             2506                                             add             a,@r0                   ;a=bufind+m
                             arker
0EEA F9             2507                                             mov             r1,a
0EEB 09             2508                                             inc             r1
0EEC 873C           2509                                             mov             savba,@r1
0EEE 78B2           2510                             mov             r0,#marker
0EF0 06             2511                             inc             @r0             ;       сдвинуть курсор вправо на 1
0EF1 C219           2512                             clr             bitmig
0EF3 B60901         2513                             cjne    @r0,#9,outma
0EF6 18             2514                             dec             r0;ppp
0EF7 020000   F     2515     outma:          jmp             outF
                    2516     
0EFA 75B0FE         2517     chanZ:          mov             p3,#0feh
0EFD E5B0           2518                             mov             a,p3
0EFF 20E611         2519                             jb              acc.6,chanma
                    2520                             ;изм знак в старшем разряде на противоположн
0F02 E543           2521                             mov             a,bufind+3
0F04 B42B06         2522                             cjne            a,#2bh,noplus
0F07 75432D         2523                             mov                     bufind+3,#2dh           ;+->-   
0F0A 020000   F     2524                             jmp             outF
0F0D                2525     noplus:
0F0D 75432B         2526                             mov                     bufind+3,#2bh           ;-/+-
0F10 020000   F     2527                             jmp             outF
0F13 75B0FD         2528     chanma:         mov             p3,#0fdh
0F16 E5B0           2529                             mov             a,p3
0F18 20E603         2530                             jb              acc.6,outFl;labelL1
                    2531                             ;clr            bitmig
0F1B 120000   F     2532     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2533     
0F1E 020000   F     2534     outFl:                  jmp             outF
                    2535                     
0F21                2536     nor11:          ;       выход
0F21 7613           2537                     mov             @r0,#13h  ;12->13
0F23 900000   F     2538                     mov             dptr,#teOUT
                    2539     ;               jmp             vi1113
                    2540     
                    2541     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2542     
                    2543     
                    2544     
0F26 020000   F     2545     rlabelL:        jmp                     labelL
                    2546     ;findmem:               jmp             out6
0F29 30117E         2547     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2548     ;;;;;;;;;;;;;
0F2C 78B1           2549                                             mov                     r0,#vichR
0F2E 7415           2550                                             mov                     a,#15h
0F30 C3             2551                                             clr                     c
0F31 96             2552                                             subb            a,@r0
0F32 4016           2553                                             jc                      ri21_23
                    2554     
0F34 75B0FB         2555                                             mov             p3,#0fbh; реж кн меню ->
0F37 20B60A         2556                                             jb              p3.6,ri6
0F3A 78B1           2557                                             mov             r0,#vichR
0F3C B61508         2558                                             cjne    @r0,#15h,norime
0F3F 7611           2559                                             mov             @r0,#11h
0F41 120000   F     2560     norime1:        call            lomenu
0F44 020000   F     2561     ri6:                    jmp             out6
0F47 06             2562     norime:         inc             @r0
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    41

0F48 80F7           2563                                             jmp             norime1
                    2564             
0F4A 7423           2565     ri21_23:        mov                     a,#23h          ;->
0F4C C3             2566                                             clr                     c
0F4D 96             2567                                             subb            a,@r0
0F4E 4014           2568                                             jc                      ri_31
0F50 75B0FB         2569                                             mov                     p3,#0fbh
0F53 20B6EE         2570                                             jb                      p3.6,ri6
0F56 B62308         2571                                             cjne            @r0,#23h,no23ri
0F59 7621           2572                                             mov                     @r0,#21h
0F5B 120000   F     2573                                             call            lomenu
0F5E 020000   F     2574                                             jmp                     out6
0F61 06             2575     no23ri:         inc                     @r0
0F62 80DD           2576                                             jmp                     norime1
0F64 B63125         2577     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0F67 301311         2578                                             jnb                     bitv19,gosk19
0F6A 900000   F     2579                                             mov                     dptr,#teS57_6;57,6
0F6D 120000   F     2580                                             call            lotext
0F70 534B03         2581                                             anl                     bufind+11,#03h
0F73 434B80         2582                                             orl                     bufind+11,#80h
0F76 C213           2583                                             clr                     bitv19
0F78 020000   F     2584                                             jmp             out6
0F7B 900000   F     2585     gosk19:         mov                     dptr,#teS19_2
0F7E 120000   F     2586                                             call            lotext
0F81 534B03         2587                                             anl                     bufind+11,#03h
0F84 434B80         2588                                             orl                     bufind+11,#80h
0F87 D213           2589                                             setb            bitv19
0F89 020000   F     2590                                             jmp                     out6
                    2591     
                    2592     
                    2593     
                    2594     ;labelS2:       jmp                     out6
                    2595     
0F8C 7452           2596     no31ri:         mov                     a,#52h;42h              ;->
0F8E C3             2597                                             clr                     c
0F8F 96             2598                                             subb            a,@r0
0F90 40B2           2599                                             jc                      ri6
0F92 75B0FB         2600                                             mov                     p3,#0fbh                   
                                  ;41,42
0F95 30B609         2601                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F98 75B0FD         2602                                             mov                     p3,#0fdh
0F9B 20B6A6         2603                                             jb                      p3.6,ri6
0F9E 020000   F     2604                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0FA1 020000   F     2605     rlabelN:                jmp             labelN
0FA4 020000   F     2606     moutF:          jmp             outF
                    2607     ;;;;;;;;;;;;;;;;;;;;;;;;;
0FA7 020000   F     2608     rnnmemb:        jmp             nnmemb
                    2609     
0FAA                2610     nbimenu:
0FAA 300BFA         2611     findmem:        jnb             bitmem,rnnmemb
0FAD 79B0           2612                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0FAF B71113         2613                        cjne         @r1,#11h,nomem11
                    2614                        
0FB2 75B0FB         2615                        mov          p3,#0fbh
0FB5 E5B0           2616                        mov          a,p3
0FB7 20E6EA         2617                        jb           acc.6,moutF
0FBA 7712           2618                        mov          @r1,#12h
0FBC 900000   F     2619                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0FBF 120000   F     2620                        call         lotext
0FC2 020000   F     2621                        jmp          outF
                    2622     
0FC5 B71213         2623     nomem11:   cjne         @r1,#12h,nomem12
0FC8 75B0FB         2624                             mov             p3,#0fbh
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    42

0FCB E5B0           2625                        mov          a,p3
0FCD 20E6D4         2626                        jb           acc.6,moutF
0FD0 7713           2627                        mov          @r1,#13h
0FD2 900000   F     2628                        mov          dptr,#teLIST            ;ПРОСМОТР
0FD5 120000   F     2629                        call         lotext
0FD8 020000   F     2630                        jmp          outF
0FDB B71313         2631     nomem12:         cjne           @r1,#13h,nomem13
0FDE 75B0FB         2632                                             mov             p3,#0fbh
0FE1 E5B0           2633                        mov          a,p3
0FE3 20E6BE         2634                        jb           acc.6,moutF
0FE6 7714           2635                        mov          @r1,#14h
0FE8 900000   F     2636                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
0FEB 120000   F     2637                        call         lotext
0FEE 020000   F     2638                          jmp                outF
                    2639                             
0FF1 B71413         2640     nomem13:cjne            @r1,#14h,labelL
0FF4 75B0FB         2641                             mov             p3,#0fbh
0FF7 E5B0           2642                        mov          a,p3
0FF9 20E6A8         2643                        jb           acc.6,moutF
0FFC 7711           2644                        mov          @r1,#11h
0FFE 900000   F     2645                        mov          dptr,#teCLE                     ;ОЧИСТКА
1001 120000   F     2646                        call         lotext
1004 020000   F     2647                          jmp                outF
1007                2648     labelL: 
                    2649                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
1007 78B0           2650                                     mov                     r0,#level
1009 B6210E         2651                                     cjne            @r0,#21h,nobl21
100C 7622           2652                                     mov                     @r0,#22h                ;->БЛОК 
100E 900000   F     2653                                     mov                     dptr,#teBL
1011 120000   F     2654     me21_22:call            lotext
                    2655                             
1014 120000   F     2656                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
1017 020000   F     2657                                     jmp                     outF
                    2658     
101A B62207         2659     nobl21: cjne            @r0,#22h,nobl22
101D 900000   F     2660                                     mov                     dptr,#teFULL
1020 7621           2661                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2662     
1022 80ED           2663                                     jmp                     me21_22
                    2664     
                    2665     ;labl21:           cjne @r0,#21h,nolev1
                    2666     ;                       mov             p3,#0fbh
                    2667     ;                       mov             a,p3
                    2668     ;                       jb              acc.6,loutF
                    2669     ;                       cjne    @r0,#21h,labl22
                    2670     ;                       mov             @r0,#22h
                    2671                             ;БЛОК
                    2672     ;                       call    lotext
                    2673     ;                       jmp             outF
                    2674     ;labl22:                mov             @r0,#21h
                    2675                             ;ПОЛНАЯ
                    2676     ;                       call    lotext
                    2677     ;                       jmp             outF
                    2678                      
1024 B62325         2679     nobl22:         cjne    @r0,#23h,go31l
1027 75B0FB         2680     rigblo:         mov             p3,#0fbh
102A 20B629         2681                                             jb              p3.6,llev2
102D                2682     labL2:    ;  уст курсор в правую позицию 
                    2683                                     ;       кнопка                  ->
                    2684     ;;;;;;;;;;;;;;;;;;
                    2685     ;необходимо не портить цифру в следуюем справа знакоместе
                    2686     ;т е сохранить ее в ячейке для мигания в противном случае
                    2687     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2688     ;       знакоместа
102D 78B2           2689                                             mov             r0,#marker
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    43

102F 7440           2690                                     mov             a,#bufind
1031 26             2691                                             add             a,@r0                   ;a=bufind+m
                             arker
1032 F9             2692                                             mov             r1,a
1033 09             2693                                             inc             r1
1034 873C           2694                                             mov             savba,@r1
1036 C219           2695                                             clr             bitmig
                    2696     ;;;;;;;;;;;;;;;;
1038 78B2           2697                       mov           r0,#marker      ;курсор справа  ?
103A E53B           2698                             mov             a,movrig
103C C3             2699                             clr             c
103D 96             2700                             subb    a,@r0
103E 6006           2701                             jz         equ1l
1040 E53B           2702                             mov             a,movrig;уст в правую позицию
1042 F6             2703                             mov             @r0,a
1043 020000   F     2704                             jmp             outF                                     
1046 E53A           2705     equ1l:          mov             a,movleft;уст в левую позицию
1048 F6             2706                             mov             @r0,a   
1049 020000   F     2707     loutF:  jmp             outF
                    2708                     
                    2709     
104C B63102         2710     go31l:          cjne    @r0,#31h,go41l
104F 80D6           2711                             jmp             rigblo
1051 B6410B         2712     go41l:          cjne    @r0,#41h,norig2
1054 80D1           2713                             jmp             rigblo
                    2714     
1056 75B0FD         2715     llev2:          mov             p3,#0fdh
1059 20B6ED         2716                             jb              p3.6,loutF
105C 020000   F     2717                             jmp             labelL1
                    2718     
                    2719     ;->
105F C3             2720     norig2:    clr          c               ;32,33,34,42
1060 7431           2721                             mov             a,#31h
1062 96             2722                             subb    a,@r0
1063 50E4           2723                             jnc             loutF
1065 75B0FB         2724     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1068 20B626         2725                             jb              p3.6,lev2go
106B                2726     labelN: 
                    2727                             ;                               29.12.06
                    2728     ;;;;;;;;;;;;;;;;;;
                    2729     ;необходимо не портить цифру в следуюем справа знакоместе
                    2730     ;т е сохранить ее в ячейке для мигания в противном случае
                    2731     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2732     ;       знакоместа
106B 78B2           2733                                             mov             r0,#marker
106D 7440           2734                                     mov             a,#bufind
106F 26             2735                                             add             a,@r0                   ;a=bufind+m
                             arker
1070 F9             2736                                             mov             r1,a
1071 09             2737                                             inc             r1
1072 873C           2738                                             mov             savba,@r1
                    2739     ;;;;;;;;;;;;;;;;;;;
1074 78B2           2740                             mov             r0,#marker      ;курсор справа  ?
1076 E53B           2741                             mov             a,movrig
1078 C3             2742                             clr             c
1079 96             2743                             subb    a,@r0
107A 7006           2744                             jnz        noequ1
107C E53A           2745                             mov             a,movleft;уст в крайнюю левую позицию
107E F6             2746                             mov             @r0,a
107F 020000   F     2747                             jmp             outF
1082                2748     noequ1: ;29.12.06
                    2749     ;;;;;;;;;;;;;;;;;;
                    2750                             ;восстан знакоместо при мигании
                    2751                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1082 78B2           2752                                     mov             r0,#marker
1084 7440           2753                                     mov             a,#bufind
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    44

1086 26             2754                                     add             a,@r0                   ;a=bufind+marker
1087 F9             2755                                     mov             r1,a
                    2756                                     ;mov            @r1,savba
1088 09             2757                                     inc             r1
1089 873C           2758                                     mov             savba,@r1
                    2759     ;;;;;;;;;;;;;;;;        
108B 120000   F     2760                             call    marri;уст сдвиг в правую        позицию
108E 020000   F     2761                             jmp             outF
1091 75B0FD         2762     lev2go:         mov             p3,#0fdh
1094 30B603         2763                             jnb             p3.6,rlabelL1
1097 020000   F     2764                             jmp             outF
                    2765     
109A 020000   F     2766     rlabelL1:       jmp             labelL1
                    2767     
109D                2768     nnmemb:
                    2769                                     
                    2770     
                    2771     
109D                2772     norim6:    ;kn menu
109D                2773     out6:           
109D D007           2774                                     pop             rr7     
109F D006           2775                                     pop             rr6
10A1 D005           2776                                     pop             rr5
10A3 D004           2777                                     pop             rr4
10A5 D003           2778                                     pop             rr3
10A7 D002           2779                                     pop             rr2
10A9 D001           2780                                     pop             rr1                             
10AB D000           2781                                     pop             rr0
10AD D0D0           2782                                     pop             psw
10AF D0E0           2783                                     pop             acc
                    2784     ;clr            bitmig
                    2785                               ; mov         EIE2,#30H
                    2786                              ;  mov         a,P3IF
                    2787                             ;       anl             a,#0bfh
                    2788                             ;       mov             P3IF,a
                    2789                             ;       mov             P3,#0c0h
                    2790                             ;;;;;;
10B1 75AD00         2791                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
10B4 75B0C0         2792                             mov             P3,#0c0h
10B7 C219           2793                             clr             bitmig
10B9 E586           2794                                             mov             a,P6            ;p6.4=0
10BB 54EF           2795                             anl             a,#0efh
10BD F586           2796                             mov             P6,a
10BF 00             2797                             nop
10C0 00             2798                             nop
                    2799                                     
10C1 E586           2800                             mov             a,P6                    ;p6.4=1 
10C3 4410           2801                             orl             a,#10h
10C5 F586           2802                             mov             P6,a                        
10C7 32             2803                             reti
                    2804     
10C8 020000   F     2805     rknMEM:                 jmp             knMEM
10CB 020000   F     2806     knKMP:             jmp          out7
10CE 020000   F     2807     rout7:                  jmp             out7    
10D1 020000   F     2808     rlabelH:                jmp             labelH
10D4 020000   F     2809     rknNUL:         jmp             knNUL
10D7 020000   F     2810     rknleft:                jmp             knleft
10DA                2811     keyb2:  ;IE7
10DA 75E700         2812                                     mov             EIE2,#00H
10DD 75AD00         2813                                     mov             P3IF,#00
                    2814     
10E0 C0E0           2815                                     push    acc
10E2 C0D0           2816                                     push    psw
10E4 C000           2817                                     push    rr0
10E6 C001           2818                                     push    rr1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    45

10E8 C002           2819                                     push    rr2
10EA C003           2820                                     push    rr3
10EC C004           2821                                     push    rr4
10EE C005           2822                                     push    rr5
10F0 C006           2823                                     push    rr6
10F2 C007           2824                                     push    rr7
10F4 C082           2825                                     push    dpl
10F6 C083           2826                                     push    dph
                    2827                                     ;clr            bitmig
                    2828                       ;;;;;;;;;;;;;;
10F8 120000   F     2829                               call  z_01s   ;0,1s
                    2830                               ;восстан знакоместо при мигании
                    2831                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
10FB 78B2           2832                                     mov             r0,#marker
10FD 7440           2833                                     mov             a,#bufind
10FF 26             2834                                     add             a,@r0                   ;a=bufind+marker
1100 F9             2835                                     mov             r1,a
1101 A73C           2836                                     mov             @r1,savba
                    2837                                     ;;;;;;;;;;;
                    2838     
1103 E5B0           2839                             mov             a,p3
1105 20E7C6         2840                                     jb              acc.7,rout7
1108 E5B0           2841                                     mov             a,p3
110A 74FF           2842                                     mov             a,#0ffh         ; p3.(5-0)<-3f
110C F5B0           2843                                     mov             p3,a
110E E5B0           2844                                     mov             a,p3
1110 30E7BB         2845                                     jnb             acc.7,rout7             ;error
1113 3004BB         2846                                     jnb             bitizm,rlabelH
1116 75B0FE         2847                                     mov             p3,#0feh                ;реж IZM
1119 E5B0           2848                                     mov             a,p3
111B 30E7B6         2849                                     jnb             acc.7,rknNUL
111E 75B0FD         2850                                     mov             p3,#0fdh
1121 E5B0           2851                                     mov             a,p3
1123 30E7A5         2852                                     jnb             acc.7,knKMP
1126 75B0FB         2853                                     mov             p3,#0fbh
1129 E5B0           2854                                     mov             a,p3
112B 30E7A9         2855                                     jnb             acc.7,rknleft
112E 75B0F7         2856                                     mov             p3,#0f7h
1131 E5B0           2857                                     mov             a,p3
1133 30E75E         2858                                     jnb             acc.7,knAVP
1136 75B0EF         2859                                 mov         p3,#0efh
1139 E5B0           2860                                     mov             a,p3
113B 30E78A         2861                                     jnb             acc.7,rknMEM
113E 75B0DF         2862                                     mov             p3,#0dfh
1141 E5B0           2863                                     mov             a,p3    
1143 30E722         2864                                     jnb             acc.7,knmenu
1146                2865     an_t7:             ;;;;;;;;;;;;
                    2866                     
                    2867     ;       clr             c
                    2868     ;       mov             r1,#parN
                    2869     ;
                    2870     ;                       mov             r0,#diap
                    2871     ;                       mov             a,#6            
                    2872     ;                       subb    a,@r0
                    2873     ;                       jnc             goto7           ;         ;10-2..10-8
                    2874                               
                    2875     ;                       mov             @r1,#2          ;10-9..10-11            
                    2876                             
                    2877                             ;;;;;;;;;;;;
1146 799A           2878     goto7:                  mov             r1,#parT
1148 783D           2879                                     mov             r0,#chkl
114A B70108         2880                                     cjne    @r1,#1,not1_7
114D 7600           2881                                     mov             @r0,#00
114F 08             2882                                     inc             r0
1150 7602           2883                                     mov             @r0,#2
1152 020000   F     2884                                     jmp             out7
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    46

                    2885                             
                    2886     
1155 B70208         2887     not1_7:                 cjne    @r1,#2,not2_7
1158 760E           2888                                             mov             @r0,#0eh;00
115A 08             2889                                     inc             r0
115B 7638           2890                                     mov             @r0,#38h;20
115D 020000   F     2891                                     jmp             out7
1160 7600           2892     not2_7:                 mov             @r0,#00
1162 08             2893                                     inc             r0
1163 76C8           2894                                     mov             @r0,#200
1165 020000   F     2895     merr:           jmp             out7
                    2896     
                    2897     
1168 2006FA         2898     knmenu: jb              bitvi11,merr
116B 201514         2899                                     jb              biteizm,menuoff
116E C204           2900                              clr            bitizm          ;off IZM
1170 D211           2901                                     setb            bitmenu
1172 900000   F     2902                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1175 120000   F     2903                                     call    lotext
1178 534B03         2904                                     anl                     bufind+11,#03h ;погасить запятые
117B 78B1           2905                                     mov             r0,#vichR
117D 7611           2906                                     mov             @r0,#11h
117F 020000   F     2907                                     jmp             onmem11
1182                2908     menuoff:
1182 78B1           2909                                     mov             r0,#vichR
1184 7600           2910                                     mov             @r0,#00
1186 C215           2911                                     clr             biteizm
1188 120000   F     2912                                     call    loadus
118B 020000   F     2913                                     jmp             out7
118E 75EF10         2914                                     mov             RSTSRC,#10h
                    2915                                     ;jmp            begin;onmem11
                    2916     
1191 020000   F     2917     rendkalib:              jmp             endkalib
                    2918     
1194 2012FA         2919     knAVP:  jb              bitklb,rendkalib        
1197 200505         2920                                     jb              bitavp,meavp
119A D205           2921                                     setb    bitavp
119C 020000   F     2922                                     jmp             onmem11
119F C205           2923     meavp:                  clr             bitavp
11A1 020000   F     2924                                     jmp             onmem11
                    2925     
11A4 201207         2926     knleft: jb              bitklb,lefkl
                    2927                                     ;;;;;;;;
11A7 79AE           2928                                mov          r1,#diap
11A9 07             2929                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
11AA B70A03         2930                                     cjne    @r1,#0ah,nodi6
11AD 17             2931                                     dec             @r1
11AE 8096           2932     lefkl:  jmp             an_t7
                    2933     
11B0                2934     nodi6:             ;    cjne    @r1,#0,an_t7
11B0 120000   F     2935                                      call    clmassix
11B3 78B3           2936                                     mov             r0,#summa
11B5 120000   F     2937                                     call    clear4  
11B8 786A           2938                                     mov             r0,#rez_A0
11BA 120000   F     2939                                     call    clear4  
11BD 120000   F     2940                                     call    loadUS
11C0 8084           2941                                jmp          an_t7
                    2942     
11C2 200F0F         2943     knNUL:                  jb              bitnul,ybnul
11C5 D20F           2944                                     setb    bitnul
11C7 789C           2945                                     mov             r0,#rez_A3      ;A3
11C9 120000   F     2946                                     call    resar2
11CC 786A           2947                                     mov             r0,#rez_A0      
11CE 120000   F     2948                                     call    saver2;A0<-A3
11D1 020000   F     2949                                     jmp             goto7;an_t7
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    47

                    2950     
11D4 C20F           2951     ybnul:                  clr             bitnul
11D6 900000   F     2952                                      mov    DPTR,#ch0 
11D9 120000   F     2953                                     CALL   ldc_long          ; r2..r5 <-- 0
11DC 786A           2954                                     mov             r0,#rez_A0      ;A0=0
11DE 120000   F     2955                                     call    saver2
11E1 020000   F     2956                                     jmp             goto7;an_t7
                    2957     
11E4 301021         2958     labelH:                 jnb             bitt2,nolah
11E7 75B0FB         2959                                     mov             p3,#0fbh   ;вход в режим изм Т
11EA 534A8F         2960                                     anl             bufind+10,#8fh
11ED 79B7           2961                                     mov             r1,#load;parT
11EF 20B70D         2962                                     jb              p3.7,rhnot1
11F2 B70003         2963                                     cjne    @r1,#0,inct;
11F5 020000   F     2964                                     jmp             out7;hyest6
11F8 17             2965     inct:                   dec             @r1                     ;Tизм+1
                    2966                             
11F9 120000   F     2967                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
11FC                2968     hnot2:          ;       call    ind
11FC 020000   F     2969                                     jmp             out7
                    2970     
11FF 020000   F     2971      rhnot1:                jmp             hnot1
                    2972      ;rnoviR:       jmp             noviR
1202 020000   F     2973      rlabelK:       jmp             labelK
1205 020000   F     2974      rlabelI:       jmp             labelI          
                    2975      ;;;;;;;;;;;;;;;;;;;
1208 3014F7         2976     nolah:          jnb             bitvich,rlabelK 
                    2977                                     
                    2978                             ;;;;;;
                    2979                             ;увеличить счетчик задержки клавиатуры
                    2980                     ;;              mov             r0,#chkl
                    2981                     ;;              mov             @r0,#27h
                    2982                     ;;              inc             r0
                    2983                     ;;              mov             @r0,#10h
                    2984                             ;;;;;;
                    2985     
120B 78B1           2986                             mov             r0,#vichR
120D B61128         2987                             cjne    @r0,#11h,rhnor11;rlabelI;;
1210 75B0FB         2988                             mov             p3,#0fbh   ;<-
1213 20B730         2989                             jb              p3.7,noh37;routF
1216 B6110B         2990                     cjne    @r0,#11h,hr12
1219 7613           2991                             mov             @r0,#13h        ;11= вычислить
121B 900000   F     2992                             mov             dptr,#teOUT;teVICH
121E 120000   F     2993     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1221 020000   F     2994                             jmp             goto7;outF
1224 B61207         2995     hr12:           cjne    @r0,#12h,hnor12
1227 7611           2996     lovich:         mov             @r0,#11h
1229 900000   F     2997                             mov             dptr,#teVICH
122C 80F0           2998                             jmp             hvi1113         
122E B61307         2999     hnor12:         cjne    @r0,#13h,rhnor11
1231 7612           3000     loizmk:         mov             @r0,#12h
1233 900000   F     3001                             mov             dptr,#teIZMK    ;       изм конст
                    3002                                        
1236 80E6           3003                             jmp             hvi1113
                    3004     
1238 804C           3005     rhnor11:                jmp             hnor11
                    3006     
123A 8057           3007     rvvizko:                jmp             vvizko
123C C214           3008     vioutF:                 clr             bitvich
123E C206           3009                                                     clr             bitvi11
1240 020000   F     3010                                                     jmp             outF
1243 020000   F     3011     toutF:                  jmp     outF
                    3012     
1246 75B0F7         3013     noh37:          mov             p3,#0f7h
1249 20B7F7         3014                             jb              p3.7,toutF;vioutF
124C B611EB         3015                             cjne    @r0,#11h,rvvizko
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    48

124F D206           3016                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1251 D204           3017              setb   bitizm
1253 534B07         3018                              anl            bufind+11,#07h
1256 434B10         3019                              orl            bufind+11,#10h;точка после 1 знакоместа
1259 020000   F     3020     routF:          jmp             out7;goto7;outF
                    3021     
                    3022     
                    3023     
125C 80E8           3024     rnoh37:         jmp             noh37
                    3025     
125E B6120D         3026     norr11:         cjne    @r0,#12h,norr12
1261 75B0FB         3027                             mov             p3,#0fbh   ;<-
1264 20B7F5         3028                             jb              p3.7,rnoh37;routF
1267 760B           3029                             mov             @r0,#11;12->11
1269 80BC           3030                             jmp             lovich
                    3031     
126B 020000   F     3032     labelI2:                jmp             labelI
126E B613FA         3033     norr12:         cjne    @r0,#13h,labelI2
1271 75B0FB         3034                             mov             p3,#0fbh   ;<-
1274 20B7E5         3035                             jb              p3.7,rnoh37
1277 7612           3036                             mov             @r0,#12h
1279 80B6           3037                             jmp             loizmk
                    3038                             ;;;;
127B C214           3039     clrvich:                clr             bitvich
127D D204           3040                             setb    bitizm
127F A8B2           3041                             mov             r0,marker
1281 76FF           3042                             mov             @r0,#0ffh
1283 020000   F     3043                              jmp    goto7;  routF
                    3044     
                    3045     ;rnoh37:                jmp             noh37
                    3046      ;ввод изм конст
1286 B612E5         3047     hnor11:         cjne    @r0,#12h,norr12;clrvich
1289 75B0FB         3048                              mov            p3,#0fbh   
128C 20B7CD         3049                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
128F 7611           3050                             mov             @r0,#11h
1291 8094           3051                             jmp             lovich
                    3052     
1293 78B1           3053     vvizko:         mov             r0,#vichR
1295 E6             3054                             mov             a,@r0
                    3055                     ;       cjne    @r0,#12h,clrvich
1296 B412E2         3056                             cjne    a,#12h,clrvich
1299 7621           3057                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
129B 78B2           3058                             mov             r0,#marker
129D 7604           3059                             mov             @r0,#4;9
129F 753A04         3060                             mov             movleft,#4
12A2 753B07         3061                             mov             movrig,#7
12A5 900000   F     3062                             mov             dptr,#teAequ0
12A8 120000   F     3063                             call    lotext
                    3064                             
12AB 120000   F     3065                             call    outA
12AE 534B0F         3066                             anl                     bufind+11,#0fh
                    3067             ;       mov             a,bufind+11
                    3068             ;       anl             a,#0f0h
                    3069             ;       mov             bufind+11,a
12B1 434B40         3070                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3071                             
12B4 020000   F     3072                             jmp             goto7;routF
                    3073     ;hnor13:                jmp             hnor12          
12B7 B6210C         3074     izchi:          cjne    @r0,#21h,tlabelI
                    3075     ;<- при вводе цифр А                            
                    3076                     ;        mov            p3,#0fbh   
                    3077                     ;       jnb             p3.7,li21
                    3078             ;clr            bitmig
12BA 78B2           3079                             mov             r0,#marker
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    49

12BC 16             3080                             dec             @r0
12BD B60201         3081                             cjne    @r0,#2,li21
12C0 06             3082                             inc             @r0;marker=3 +/-
12C1 C219           3083     li21:           clr             bitmig
12C3 020000   F     3084                             jmp             goto7;outF
                    3085     
12C6 020000   F     3086     tlabelI:        jmp             labelI
                    3087     
                    3088     ;                       load    0 1 2 3 4 5             
12C9 06050403       3089     sootv:          db              6,5,4,3,2,1;parT
12CD 0201                    
                    3090     ;
                    3091     
                    3092     ;нажата кн ввод при наборе Т
12CF 75B0F7         3093     hnot1:                  mov             p3,#0f7h
12D2 20B784         3094                                     jb              p3.7,routF;out7
12D5 B70549         3095                                     cjne    @r1,#5,nohnot1  ;r1=load
12D8 794A           3096                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
12DA E7             3097                                     mov             a,@r1
12DB 548F           3098                                     anl             a,#8fh
12DD 4440           3099                                     orl             a,#40h;.6
12DF F7             3100                                     mov             @r1,a
12E0 8000           3101                                     jmp             loadb
                    3102                                     
                    3103                                     
12E2 789A           3104     loadB:                  mov             r0,#parT
12E4 900000   F     3105                                     mov             dptr,#sootv
12E7 79B7           3106                                     mov             r1,#load                
12E9 E7             3107                                     mov             a,@r1;load
12EA 93             3108                                     movc    a,@a+dptr
12EB F6             3109                                     mov             @r0,a
12EC 120000   F     3110                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3111                                      ;r4=b1 r5=b2
12EF 120000   F     3112                                     call    iniacp;инициализация АЦП
12F2 120000   F     3113                                     call    loadUS
12F5 120000   F     3114                                     call    clmassix        
12F8 D204           3115                                     setb    bitizm
12FA C210           3116                                     clr             bitt2
                    3117     
12FC 534A8F         3118                                     anl             bufind+10,#8fh
12FF C3             3119                                      clr            c
1300 789A           3120                                  mov                r0,#parT
1302 79AF           3121                                      mov            r1,#parN
1304 7402           3122                                  mov                a,#2
1306 96             3123                                 subb                a,@r0
1307 5005           3124                                 jnc                 loadB2
1309 7701           3125                                     mov             @r1,#1;N=1         ;T>=2
130B 020000   F     3126     bout7:                  jmp             goto7;out7
                    3127     
130E B702FA         3128     loadB2:                 cjne    @r1,#2,bout7
1311 7702           3129                                     mov             @r1,#2;N=2
1313 020000   F     3130                                     jmp             goto7;out7
1316                3131     nohnot2:                ;в буфере 1 зажечь <=0,1s
1316 794A           3132                                     mov             r1,#bufind+10
1318 E7             3133                                     mov             a,@r1
1319 4410           3134                                     orl             a,#10h;.4
131B F7             3135                                     mov             @r1,a
131C 120000   F     3136                                     call            ind
131F 80C1           3137                                     jmp             loadB
1321 B704F2         3138     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
1324 794A           3139                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1326 E7             3140                                     mov             a,@r1
1327 4420           3141                                     orl             a,#20h;.5
1329 F7             3142                                     mov             @r1,a
132A 80B6           3143                                     jmp             loadB
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    50

                    3144     
                    3145     ;кнопка ПАМЯТЬ
132C C204           3146     knMEM:                  clr             bitizm          ;off IZM
132E 900000   F     3147                                     mov             dptr,#teCLE
1331 120000   F     3148                                     call    lotext    ;в буф2 записать ОЧИСТКА
1334 D20B           3149                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1336 534BEF         3150                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1339 434B01         3151                                     orl             bufind+11,#01;зажечь светодиод память
133C 120000   F     3152                                     call            ind
133F 78B0           3153                                     mov             r0,#level
1341 7611           3154                                     mov             @r0,#11h
1343 783D           3155     onmem11:                mov             r0,#chkl
1345 7603           3156                                     mov             @r0,#03
1347 08             3157                                     inc             r0
1348 76E8           3158                                     mov             @r0,#0e8h               ;1000
134A 020000   F     3159                                     jmp             out7;goto7;out7
                    3160     
134D 020000   F     3161     rnomemk:                jmp             nomemk          ;
                    3162     
1350 78B0           3163     outkmem:        mov                     r0,#level
1352 7600           3164                                             mov                     @r0,#0
1354 78B1           3165                                             mov                     r0,#vichR
1356 7600           3166                                             mov                     @r0,#0
1358 C20B           3167                                             clr                     bitmem
135A C214           3168                                             clr                     bitvich
135C C206           3169                                             clr                     bitvi11
135E C211           3170                                             clr                     bitmenu
1360 D204           3171                                             setb            bitizm
1362 78B2           3172                                             mov                     r0,#marker
1364 76FF           3173                                             mov                     @r0,#0ffh
1366 020000   F     3174                                             jmp                     vvod2_10
1369 020000   F     3175                                             jmp                     goto7   
136C                3176     labelK:
                    3177     
                    3178     ;;;;;;;;;;;;
136C 300BDE         3179                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
136F 75B0EF         3180                                     mov                     p3,#0efh
1372 30B7DB         3181                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1375 78B0           3182                                      mov            r0,#level
1377 B6114E         3183                               cjne          @r0,#11h,klev1;nome11
137A 75B0FB         3184     lefmem11:         mov           p3,#0fbh
137D E5B0           3185                               mov           a,p3
137F 20E70E         3186                               jb            acc.7,rkvvod0
1382 B6110E         3187                               cjne          @r0,#11h,locle          ;<-memory
1385 7614           3188                               mov           @r0,#14h
1387 900000   F     3189     lolist:           mov           dptr,#teSTAT
138A 120000   F     3190                               call          lotext           ;СТАТИСТИКА
138D 020000   F     3191                               jmp   goto7;  outF
                    3192     
1390 020000   F     3193     rkvvod0:        jmp             kvvod0
                    3194     
                    3195     
1393 B6120B         3196     locle:          cjne            @r0,#12h,lowr           ;<-memory
1396 7611           3197                               mov           @r0,#11h                   ;ОЧИСТКА
1398 900000   F     3198     loadcle:          mov           dptr,#teCLE
139B 120000   F     3199                               call          lotext
139E 020000   F     3200                               jmp           goto7;outF
                    3201     
13A1 B6130B         3202     lowr:                   cjne    @r0,#13h,lostat
13A4 7612           3203                                             mov             @r0,#12h
13A6 900000   F     3204      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
13A9 120000   F     3205                             call    lotext
13AC 020000   F     3206                             jmp             goto7;outF
                    3207     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    51

13AF 7613           3208     lostat:         mov             @r0,#13h
13B1 900000   F     3209                                     mov             dptr,#teLIST              ;ПРОСМОТР
13B4 120000   F     3210                             call    lotext
13B7 020000   F     3211                             jmp             goto7;outF
                    3212     
13BA B6141A         3213     me_14:cjne              @r0,#14h,klev22
13BD 7613           3214                                             mov             @r0,#13h
13BF 900000   F     3215                             mov             dptr,#teLIST              ;;ПРОСМОТР
13C2 120000   F     3216                             call    lotext
13C5 020000   F     3217                             jmp             goto7
13C8 B61202         3218      klev1:          cjne   @r0,#12h,klev2
13CB 80AD           3219                             jmp             lefmem11
13CD B61302         3220     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
13D0 80A8           3221                             jmp             lefmem11
13D2 B61402         3222     klev3:           cjne   @r0,#14h,klev22;
13D5 80A3           3223                             jmp             lefmem11
                    3224     ;<- vvod на более низких уровнях
13D7 B62117         3225     klev22:         cjne    @r0,#21h,klev21
13DA 75B0FB         3226     lev220:         mov             p3,#0fbh
13DD 20B77B         3227                             jb              p3.7,kgo23
13E0 B6210B         3228                             cjne    @r0,#21h,kfullr
13E3 7622           3229                             mov             @r0,#22h
13E5 900000   F     3230                             mov             dptr,#teBL
13E8 120000   F     3231                             call    lotext
13EB 020000   F     3232                             jmp             goto7;outF
13EE 020000   F     3233     kfullr:         jmp             kfull                           
13F1 B6220E         3234     klev21:         cjne    @r0,#22h,klev23
13F4 80E4           3235                             jmp             lev220
                    3236     
13F6 020000   F     3237     rlabL2:         jmp             labL2
13F9 020000   F     3238     rlabM:          jmp             labM
13FC 020000   F     3239     ques:                   jmp             out7
13FF 020000   F     3240     ddoutfr:        jmp             ddoutf
                    3241     
1402 B623F4         3242     klev23:          cjne   @r0,#23h,rlabM
1405 75B0FB         3243                              mov    p3,#0fbh
1408 30B7F1         3244                              jnb            p3.7,ques;errr labL2
140B 75B0F7         3245                              mov    p3,#0f7h
140E 20B7EE         3246                              jb             p3.7,ddoutfr
                    3247                                             ;       считать с индикатора  
1411 C3             3248                                     clr                     c
1412 E547           3249                                mov          a,bufind+7      
1414 9430           3250                                      subb           a,#30h
1416 B40002         3251                                      cjne           a,#0,chaibl
1419 7401           3252                                      mov            a,#1                    ;номера блоков 1..4
141B                3253     chaibl:         
141B F538           3254                                             mov             nblok,a
                    3255                                
                    3256                              ;очистить блок памяти с набранным номером
                    3257                              ;150h..1000h( 150h+nblok*320h)
141D 120000   F     3258                                     call            adrblok         ;dptr-
                    3259     
1420 79B8           3260                                     mov                     r1,#work                ;обьем блок
                             а
1422 7703           3261                                     mov                     @r1,#03
1424 09             3262                                     inc                     r1
1425 7720           3263                                     mov                     @r1,#20h                        ;32
                             0h
                    3264     
1427                3265     goonoff:
1427 E4             3266                                     clr                     a
1428 F0             3267                                     movx            @dptr,a
1429 A3             3268                                     inc                     dptr
                    3269     
142A 79B9           3270                                     mov                     r1,#work+1
142C 120000   F     3271                                     call            chminus
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    52

142F 78B8           3272                                     mov             r0,#work
1431 E6             3273                             mov             a,@r0
1432 30E7F2         3274                             jnb             acc.7,goonoff
                    3275     
1435 C20B           3276                              clr    bitmem  ;сбр признак памяти 
1437 D204           3277                              setb   bitizm
                    3278                             ;после очистки блока сохраняем в saven_bl 
                    3279                             ;адрес второго с конца измерения потому
                    3280                             ;добавляем 8;;
1439 120000   F     3281                             call            adrblok;dptr-начало блока
143C E582           3282                             mov                     a,dpl
143E 2408           3283                             add                     a,#8
1440 F582           3284                             mov                     dpl,a
1442 E583           3285                             mov                     a,dph
1444 3400           3286                             addc            a,#0
1446 F583           3287                             mov                     dph,a
1448 120000   F     3288                             call            save_hl;подготовка записи в начало блока
                    3289                             ;;;;;
                    3290     
144B 78B2           3291                              mov            r0,#marker
144D 76FF           3292                              mov            @r0,#0ffh
144F 020000   F     3293                                     jmp                     vvod2_10
1452 020000   F     3294                              jmp    goto7
                    3295     
1455 020000   F     3296     rddoutf:        jmp             ddoutf
1458 020000   F     3297     rgo23no:        jmp             go23no
                    3298     
                    3299     ;vvod   БЛОК->БЛОК 00           
145B 75B0F7         3300     kgo23:           mov    p3,#0f7h
145E 20B7F4         3301                             jb              p3.7,rddoutf
1461 B621F4         3302                             cjne    @r0,#21h,rgo23no
                    3303                             ;очистить память 150..dd0h
                    3304                             ;1й блок
1464 900150         3305                              mov                    dptr,#150h
1467 79B8           3306                                     mov                     r1,#work                ;обьем блок
                             а
1469 7703           3307                                     mov                     @r1,#03
146B 09             3308                                     inc                     r1
146C 7720           3309                                     mov                     @r1,#20h                        ;32
                             0h
                    3310     
146E                3311     gooff1:
146E E4             3312                                     clr                     a
146F F0             3313                                     movx            @dptr,a
1470 A3             3314                                     inc                     dptr
                    3315     
1471 79B9           3316                                     mov                     r1,#work+1
1473 120000   F     3317                                     call            chminus
1476 78B8           3318                                     mov             r0,#work
1478 E6             3319                             mov             a,@r0
1479 30E7F2         3320                             jnb             acc.7,gooff1
147C 900158         3321                             mov                     dptr,#158h;начало 1 го блока
                    3322                             ;после очистки блока сохраняем в saven_bl 
                    3323                             ;адрес второго с конца измерения потому
                    3324                             ;добавляем 8;;
147F 120000   F     3325                             call            save_hl;подготовка записи в начало блока
                    3326     ;2й блок
1482 900470         3327                             mov                     dptr,#470h
1485 79B8           3328                                     mov                     r1,#work                ;обьем блок
                             а
1487 7703           3329                                     mov                     @r1,#03
1489 09             3330                                     inc                     r1
148A 7720           3331                                     mov                     @r1,#20h                        ;32
                             0h
                    3332     
148C                3333     gooff2:
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    53

148C E4             3334                                     clr                     a
148D F0             3335                                     movx            @dptr,a
148E A3             3336                                     inc                     dptr
                    3337     
148F 79B9           3338                                     mov                     r1,#work+1
1491 120000   F     3339                                     call            chminus
1494 78B8           3340                                     mov             r0,#work
1496 E6             3341                             mov             a,@r0
1497 30E7F2         3342                             jnb             acc.7,gooff2
149A 900478         3343                             mov                     dptr,#478h;начало 2 го блока
149D 120000   F     3344                             call            save_hl;подготовка записи в начало блока
                    3345     ;3й блок
14A0 900790         3346                             mov                     dptr,#790h
14A3 79B8           3347                                     mov                     r1,#work                ;обьем блок
                             а
14A5 7703           3348                                     mov                     @r1,#03
14A7 09             3349                                     inc                     r1
14A8 7720           3350                                     mov                     @r1,#20h                        ;32
                             0h
                    3351     
14AA                3352     gooff3:
14AA E4             3353                                     clr                     a
14AB F0             3354                                     movx            @dptr,a
14AC A3             3355                                     inc                     dptr
                    3356     
14AD 79B9           3357                                     mov                     r1,#work+1
14AF 120000   F     3358                                     call            chminus
14B2 78B8           3359                                     mov             r0,#work
14B4 E6             3360                             mov             a,@r0
14B5 30E7F2         3361                             jnb             acc.7,gooff3
14B8 900798         3362                             mov                     dptr,#798h;начало 3 го блока
                    3363                                     ;после очистки блока сохраняем в saven_bl 
                    3364                             ;адрес второго с конца измерения потому
                    3365                             ;добавляем 8;;
14BB 120000   F     3366                             call            save_hl;подготовка записи в начало блока
                    3367     ;4й блок
14BE 900AB0         3368     mov                     dptr,#0ab0h
14C1 79B8           3369                                     mov                     r1,#work                ;обьем блок
                             а
14C3 7703           3370                                     mov                     @r1,#03h
14C5 09             3371                                     inc                     r1
14C6 7720           3372                                     mov                     @r1,#20h                        ;32
                             0h
                    3373     
14C8                3374     gooff4:
14C8 E4             3375                                     clr                     a
14C9 F0             3376                                     movx            @dptr,a
14CA A3             3377                                     inc                     dptr
                    3378     
14CB 79B9           3379                                     mov                     r1,#work+1
14CD 120000   F     3380                                     call            chminus
14D0 78B8           3381                                     mov             r0,#work
14D2 E6             3382                             mov             a,@r0
14D3 30E7F2         3383                             jnb             acc.7,gooff4
14D6 900AB8         3384                             mov                     dptr,#0ab8h;начало 4 го блока
                    3385                             ;после очистки блока сохраняем в saven_bl 
                    3386                             ;адрес второго с конца измерения потому
                    3387                             ;добавляем 8;;
14D9 120000   F     3388                             call            save_hl;подготовка записи в начало блока
14DC C20B           3389                             clr             bitmem
14DE D204           3390                             setb    bitizm
14E0 78B2           3391                                     mov             r0,#marker
14E2 76FF           3392                              mov            @r0,#0ffh
14E4 020000   F     3393                             jmp                     vvod2_10;jmp            goto7
                    3394     
14E7 7623           3395     go23no:    mov          @r0,#23h
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    54

14E9 753B08         3396                                             mov                     movrig,#8
14EC 753A07         3397                                             mov             movleft,#7
14EF 8055           3398                             jmp             loblok;БЛОК 00
                    3399     
14F1 7621           3400     kfull:          mov             @r0,#21h
14F3 8025           3401                             jmp             gofull
                    3402                             
                    3403                                             
14F5                3404     nomemk:                         
14F5 020000   F     3405                                     jmp             labelS                  ;нажат ввод меню
                    3406                             
14F8 75B0FB         3407     nome11:           mov           p3,#0fbh
14FB E5B0           3408                               mov           a,p3
14FD 20E70D         3409                               jb            acc.7,kvvod0
1500 B61205         3410                               cjne          @r0,#12h,mem12no        
1503 7611           3411                               mov           @r0,#11h                ;ОЧИСТКА
1505 020000   F     3412                               jmp            loadcle
                    3413     
1508                3414     mem12no:        ;cjne           @r0,#13h,lowr           
1508 7612           3415                               mov           @r0,#12h                   ;
150A 020000   F     3416                               jmp           lowr1                     ;ЗАПИСЬ
                    3417     
150D 75B0F7         3418     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
1510 20B70F         3419                               jb            p3.7,ddoutf
1513 78B0           3420                               mov           r0,#level
1515 B61129         3421                               cjne          @r0,#11h,mvv11
1518 7621           3422                               mov           @r0,#21h                ;ПОЛНАЯ
151A 900000   F     3423     gofull:           mov           dptr,#teFULL
151D 120000   F     3424                               call          lotext
1520 804F           3425                                     jmp             mlabL2  ;<-????????/
                    3426     
1522                3427     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3428     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3429     ;т е сохранить ее в ячейке для мигания в противном случае
                    3430     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3431     ;       знакоместа
1522 78B2           3432                                                     mov             r0,#marker
1524 7440           3433                                     mov             a,#bufind
1526 26             3434                                             add             a,@r0                   ;a=bufind+m
                             arker
1527 F9             3435                                             mov             r1,a
1528 19             3436                                             dec             r1      ;       inc             r1
1529 873C           3437                                             mov             savba,@r1
152B C219           3438                                             clr             bitmig
                    3439     ;;;;;;;;;;;;;;;;
152D 78B2           3440                       mov           r0,#marker      ;курсор слева   ?
152F E53A           3441                             mov             a,movleft
1531 C3             3442                             clr             c
1532 96             3443                             subb    a,@r0
1533 7006           3444                             jnz        left21
1535 E53B           3445                             mov             a,movrig;уст в правую позицию
1537 F6             3446                             mov             @r0,a
                    3447     
1538 020000   F     3448                             jmp             goto7                                            
153B E53A           3449     left21:         mov             a,movleft;уст в левую позицию
153D F6             3450                             mov             @r0,a   
153E 020000   F     3451                             jmp             goto7
                    3452     
                    3453     
1541 B61215         3454     mvv11:            cjne          @r0,#12h,mvv12
1544 7631           3455                                     mov             @r0,#31h
1546 900000   F     3456     loblok:                 mov             dptr,#teBL0;БЛОК 0
1549 120000   F     3457                                     call    lotext
154C E538           3458                                     mov                     a,nblok
154E 2430           3459                                     add                     a,#30h
1550 F547           3460                                     mov                     bufind+7,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    55

1552 78B2           3461                                     mov             r0,#marker
1554 7607           3462                                     mov             @r0,#7
                    3463                                     ;mov            movrig,#9
                    3464                                     ;mov            movleft,#6
1556 020000   F     3465                                     jmp             goto7;outF
1559 B61411         3466     mvv12:  cjne            @r0,#14h,bl_li
155C 7661           3467                                     mov                     @r0,#61h
155E 900000   F     3468                                     mov             dptr,#teMIN;
1561 120000   F     3469                                     call    lotext
1564 120000   F     3470                                     call    vichmin
1567 120000   F     3471                                     call    z_1s
156A 020000   F     3472                                     jmp             out7;goto7;outF
                    3473     
156D 7641           3474     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
156F 80D5           3475                                     jmp             loblok
                    3476     
                    3477     
                    3478     
1571                3479     mlabL2:         ;jmp            labL2
                    3480                                             ;  уст курсор в правую позицию 
                    3481                                     ;                               29.12.06
                    3482     ;;;;;;;;;;;;;;;;;;
                    3483     ;необходимо не портить цифру в следуюем справа знакоместе
                    3484     ;т е сохранить ее в ячейке для мигания в противном случае
                    3485     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3486     ;       знакоместа
1571 78B2           3487                                             mov             r0,#marker
1573 7440           3488                                     mov             a,#bufind
1575 26             3489                                             add             a,@r0                   ;a=bufind+m
                             arker
1576 F9             3490                                             mov             r1,a
1577 09             3491                                             inc             r1
1578 873C           3492                                             mov             savba,@r1
                    3493     ;;;;;;;;;;;;;;;;
157A 78B2           3494                       mov           r0,#marker      ;курсор справа  ?
157C E53B           3495                             mov             a,movrig
157E C3             3496                             clr             c
157F 96             3497                             subb    a,@r0
1580 6006           3498                             jz         equ2l
1582 E53B           3499                             mov             a,movrig;уст в правую позицию
1584 F6             3500                             mov             @r0,a
                    3501     ;                       lool
1585 020000   F     3502                             jmp             goto7                                            
1588 E53A           3503     equ2l:          mov             a,movleft;уст в левую позицию
158A F6             3504                             mov             @r0,a   
158B 020000   F     3505                             jmp             goto7
                    3506                     
158E 020000   F     3507     rnom31:         jmp                     nom31
1591 B631FA         3508     labM:                   cjne    @r0,#31h,rnom31
1594 75B0FB         3509                                     mov             p3,#0fbh
1597 30B7D7         3510                                     jnb             p3.7,mlabL2
159A 75B0F7         3511                                mov          p3,#0f7h
159D 20B782         3512                                jb           p3.7,ddoutf
                    3513                                
15A0 7632           3514                                mov          @r0,#32h                        ;ИНТ 0000
                    3515                                     ;       считать с индикатора  
15A2 C3             3516     blokvv:         clr                     c
15A3 E547           3517                                mov          a,bufind+7      
15A5 9430           3518                                      subb           a,#30h
15A7 B40002         3519                                      cjne           a,#0,blokvvc
15AA 7401           3520                                      mov            a,#1                    ;номера блоков 1..4
                    3521     
15AC F538           3522     blokvvc: mov            nblok,a
15AE 900000   F     3523                                mov          dptr,#teINT;ИНТ 0000c
15B1 120000   F     3524                                call         lotext
15B4 78CE           3525                                      mov            r0,#interva+1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    56

15B6 7952           3526                                      mov            r1,#abin+3
15B8 E6             3527                                      mov            a,@r0
15B9 F7             3528                                      mov            @r1,a
15BA 18             3529                                             dec                     r0
15BB 19             3530                                             dec                     r1
15BC E6             3531                                             mov             a,@r0
15BD F7             3532                                             mov             @r1,a
15BE 19             3533                                             dec             r1
15BF E4             3534                                             clr             a
15C0 F7             3535                                             mov             @r1,a
15C1 19             3536                                             dec             r1
15C2 F7             3537                                             mov             @r1,a
                    3538                                                                             
15C3 7853           3539                                             mov             r0,#adec
15C5 7952           3540                                             mov             r1,#abin+3      ;hex->10
15C7 120000   F     3541                                             call    bindec
                    3542                                     
15CA 785C           3543                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
15CC 7948           3544                                             mov             r1,#bufind+8
15CE 7F04           3545                                             mov             r7,#4
15D0 E6             3546     bloin:                          mov             a,@r0
15D1 2430           3547                                             add             a,#30h
15D3 F7             3548                                             mov             @r1,a
15D4 19             3549                                             dec             r1
15D5 18             3550                                             dec             r0
15D6 DFF8           3551                                             djnz    r7,bloin
15D8 78B2           3552                                mov          r0,#marker
15DA 7605           3553                                mov          @r0,#5
15DC 753B08         3554                                mov          movrig,#8
15DF 753A05         3555                                mov          movleft,#5
15E2 789A           3556                                      mov            r0,#parT
15E4 B60609         3557                                     cjne            @r0,#6,innot6
15E7 534BF0         3558                                     anl                     bufind+11,#0f0h;after 5- 0.000c
15EA 434B04         3559                                     orl                     bufind+11,#04h
                    3560                             
15ED 020000   F     3561                                     jmp                     goto7
15F0 B60309         3562     innot6: cjne            @r0,#3,innot3
15F3 534BF0         3563                                     anl                     bufind+11,#0f0h;after 7- 000.0c
15F6 434B20         3564                                     orl                     bufind+11,#20h
                    3565                                     ;call           ind
15F9 020000   F     3566                                     jmp                     out7;goto7
15FC C3             3567     innot3: clr                     c
15FD 7403           3568                                     mov                     a,#3
15FF 96             3569                                     subb            a,@r0
1600 5009           3570                                     jnc                     innot1_2
1602 534BF0         3571                                     anl                     bufind+11,#0f0h;after 6- 00.00c
1605 434B40         3572                                     orl                     bufind+11,#40h
                    3573                                     
1608 020000   F     3574                                     jmp                     goto7
                    3575     
160B                3576     innot1_2:
160B 534B0F         3577                                     anl                     bufind+11,#0fh;0h;0000c
160E C219           3578                                     clr                     bitmig
                    3579                                     ;call           ind             нет необходимости пришет пр
                             обел         
1610 020000   F     3580     rgoto7: jmp        goto7;outF
                    3581     
1613 B63276         3582     nom31:             cjne         @r0,#32h,nom32
1616 75B0FB         3583                                     mov             p3,#0fbh
1619 20B71F         3584                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3585                                     
161C                3586     lefcur:         ;;кн <- 32 нач блок 000
                    3587     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3588     ;т е сохранить ее в ячейке для мигания в противном случае
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    57

                    3589     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3590     ;       знакоместа
161C C219           3591                                                     clr             bitmig
161E 78B2           3592                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1620 7440           3593                                     mov             a,#bufind
1622 26             3594                                             add             a,@r0                   ;a=bufind+m
                             arker
1623 F9             3595                                             mov             r1,a
1624 19             3596                                             dec             r1;;;;;;;;;;;
1625 873C           3597                                             mov             savba,@r1
                    3598                                             
1627 78B2           3599                                                     mov             r0,#marker      ;курсор сле
                             ва?
1629 E53A           3600                             mov             a,movleft
162B C3             3601                             clr             c
162C 96             3602                             subb    a,@r0
162D 7006           3603                             jnz        noequ2
162F E53B           3604                             mov             a,movrig
1631 F6             3605                             mov             @r0,a;уст в крайнюю правую позицию
1632 020000   F     3606                             jmp             goto7
1635 120000   F     3607     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
1638 020000   F     3608                             jmp        goto7        
                    3609                                                                       
                    3610     
                    3611     ;;;;;;;;;;;;;;;;;;
163B                3612     vvinte:         ;ввод интервал                          
163B 75B0F7         3613     no31n:             mov          p3,#0f7h
163E 20B7CF         3614                                     jb              p3.7,rgoto7
1641 7633           3615                                     mov             @r0,#33h
                    3616                                     ;считать с индикатора введенный интервал
1643 7F0A           3617                                             mov             r7,#10
1645 7853           3618                                     mov             r0,#adec
1647 120000   F     3619                                     call    clearN
164A 120000   F     3620                                     call    upak4                   
164D 784F           3621                                     mov             r0,#abin
164F 7953           3622                                     mov             r1,#adec                        ;мл        
                              ст
1651 120000   F     3623                                     call    decbin                  ;abin..abin+3 (hex)
1654 794F           3624                                     mov             r1,#abin
1656 78CE           3625                                     mov             r0,#interva+1
1658 E7             3626                                     mov             a,@r1
1659 F6             3627                                     mov             @r0,a
165A 18             3628                                     dec             r0
165B 09             3629                                     inc             r1
165C E7             3630                                     mov             a,@r1
165D F6             3631                                     mov             @r0,a
                    3632                                     
165E 78D5           3633                                     mov             r0,#volume                      ;объем блок
                             а
1660 7600           3634                                     mov             @r0,#0
1662 08             3635                                     inc             r0
1663 76C7           3636                                     mov             @r0,#0c7h
1665 120000   F     3637                                     call            adrblok;dptr
1668 120000   F     3638                                     call            save_hl;1я ячейка блока
166B 78B2           3639                                mov          r0,#marker
166D 76FF           3640                                mov          @r0,#0ffh
166F D204           3641                                      setb           bitizm
1671 C20B           3642                                      clr            bitmem
1673 789A           3643     vvod2_10: mov           r0,#parT
1675 B6050C         3644                                      cjne           @r0,#5,no10msv
1678 900000   F     3645                                             mov                     dptr,#te10ms
167B 120000   F     3646     t2msme:         call            lotext
                    3647                                             
167E 120000   F     3648                                             call            ind
1681 020000   F     3649     no2msv:   jmp      goto7;
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    58

1684 B606FA         3650     no10msv:        cjne            @r0,#6,no2msv   
1687 900000   F     3651                                             mov                     dptr,#te2ms
168A 80EF           3652                                     jmp                     t2msme
                    3653     
                    3654     
                    3655     
168C B6332B         3656     nom32:           cjne           @r0,#33h,nom33
168F 75B0FB         3657                              mov            p3,#0fbh
1692 30B787         3658                              jnb            p3.7,lefcur
1695 75B0F7         3659                              mov            p3,#0f7h
1698 20B7E6         3660                              jb             p3.7,no2msv;rgoto7
                    3661                              ;запомнить номер ячейки конца блока
169B 7634           3662                              mov    @r0,#34h
169D 7F0A           3663     INTn:                   mov             r7,#10
169F 7853           3664                                     mov             r0,#adec
16A1 120000   F     3665                                     call    clearN
16A4 120000   F     3666                                     call    upak3                   
16A7 784F           3667                                     mov             r0,#abin
16A9 7953           3668                                     mov             r1,#adec                        ;мл        
                              ст
16AB 120000   F     3669                                     call    decbin                  ;abin..abin+3 (hex)
16AE 120000   F     3670                                     call    loadr2                  ;r2..r5
16B1 120402         3671                                     call    altof                   ;r2..r5->int
16B4 020000   F     3672     dgoto7:                  jmp            goto7
                    3673     
16B7 020000   F     3674     rlefcur:                jmp             lefcur
                    3675     
16BA B63464         3676     nom33:          cjne            @r0,#34h,labelP
16BD 75B0FB         3677                               mov           p3,#0fbh
16C0 30B7F4         3678                              jnb            p3.7,rlefcur
16C3 75B0F7         3679                              mov            p3,#0f7h
16C6 20B7EB         3680                              jb             p3.7,dgoto7
16C9 7635           3681                              mov            @r0,#35h
16CB 78B2           3682                              mov            r0,#marker
16CD 76FF           3683                              mov            @r0,#0ffh
                    3684                              ;T1<-число на индикаторе
                    3685                                               ;vvod КОН БЛ 000
16CF 78CF           3686                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
16D1 7630           3687                              mov            @r0,#30h  
16D3 C20B           3688                              clr            bitmem
16D5 D204           3689                              setb           bitizm;;;;      
16D7 020000   F     3690                             jmp        goto7
16DA 020000   F     3691     vodm11_15:                      jmp             vvodm11_15
16DD 020000   F     3692     me11_15de:                      jmp             me11_15dec
16E0 020000   F     3693     moutkmem:                               jmp             outkmem
                    3694     
16E3 020000   F     3695     nmem_menu:              jmp             out7                    ;нажата память в режиме мен
                             ю
                    3696     ;обработка кнопки меню ввод
16E6 301138         3697     labelS:         jnb                     bitmenu,labelP
16E9 75B0EF         3698                                             mov                     p3,#0efh
16EC 30B7F4         3699                                             jnb                     p3.7,nmem_menu
16EF 75B0DF         3700                                             mov                     p3,#0dfh
16F2 30B7EB         3701                                             jnb                     p3.7,moutkmem
16F5 78B1           3702                                             mov                     r0,#vichR
16F7 7415           3703                                             mov                     a,#15h
16F9 C3             3704                                             clr                     c
16FA 96             3705                                             subb            a,@r0
16FB 4021           3706                                             jc                      rme21_23
                    3707                             
16FD 75B0FB         3708                                             mov                     p3,#0fbh
1700 20B7D7         3709                                             jb                      p3.7,vodm11_15
1703 78B1           3710                                             mov                     r0,#vichR
1705 B611D5         3711                                             cjne                    @r0,#11h,me11_15de;<-
1708 7615           3712                                             mov                     @r0,#15h
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    59

170A 900000   F     3713                                             mov                     dptr,#teKALIB
170D 120000   F     3714                                             call            lotext
1710 020000   F     3715                                             jmp                     onmem11
1713 C211           3716     menuon:         clr             bitmenu                 ;off menu
1715 D204           3717                                             setb    bitizm
                    3718     
1717 78B1           3719                                     mov             r0,#vichR
1719 7600           3720                                     mov             @r0,#0
171B 020000   F     3721                                     jmp             onmem11
                    3722     
                    3723                                             ;;;;;
                    3724             
171E 020000   F     3725     rme21_23:               jmp             me21_23 
                    3726                             
                    3727     ;режим просмотра
1721 B64130         3728     labelP:                 cjne            @r0,#41h,govvlist
1724 7642           3729                                                     mov                     @r0,#42h
                    3730                                                     ;       считать с индикатора  
1726 C3             3731                                             clr                     c
1727 E547           3732                                mov          a,bufind+7      
1729 9430           3733                                      subb           a,#30h
172B B40002         3734                                      cjne           a,#0,chaipr
172E 7401           3735                                      mov            a,#1
1730 F538           3736     chaipr:                          mov            nblok,a
1732 900000   F     3737                                mov          dptr,#teCH;ОТСЧЕТ 000
1735 120000   F     3738                                call         lotext
1738 534BEF         3739                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
173B 78B2           3740                                mov          r0,#marker
173D 7607           3741                                mov          @r0,#7
173F 753B09         3742                                mov          movrig,#9
1742 753A07         3743                                mov          movleft,#7
1745 120000   F     3744                                             call            z_1s
1748 020000   F     3745                        jmp     goto7;outF
174B 020000   F     3746     label43:                jmp             label7
                    3747     
174E 020000   F     3748     rlist_43:                       jmp                     list_43                            
                                  
1751 020000   F     3749     mlabL2r:                        jmp                     mlabL2
1754 B642F7         3750     govvlist:                       cjne            @r0,#42h,rlist_43
1757 75B0FB         3751                                                                     mov                     p3,
                             #0fbh
175A 30B7F4         3752                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
175D 75B0F7         3753                                                             mov                     p3,#0f7h
1760 20B7E8         3754                                                             jb                      p3.7,label4
                             3
1763 7643           3755                                                             mov                     @r0,#43h;vv
                             od 
1765 78B2           3756                                                             mov                     r0,#marker
1767 76FF           3757                                                             mov                     @r0,#0ffh
1769 7F0A           3758                                                                     mov             r7,#10
176B 7853           3759                                     mov             r0,#adec
176D 120000   F     3760                                     call    clearN
1770 120000   F     3761                                     call    upak3                   
1773 784F           3762                                     mov             r0,#abin
1775 7953           3763                                     mov             r1,#adec                        ;мл        
                              ст
1777 120000   F     3764                                     call    decbin                  ;abin..abin+3 (hex)
177A 120000   F     3765                                     call    loadr2                  ;r2..r5
177D ED             3766                                     mov             a,r5                            ;сохр номер
                              лемента
177E F537           3767                                     mov             nelem,a
1780 120402         3768                                     call    altof                   ;r2..r5->int
1783 900000   F     3769                                     mov             dptr,#ch_1;
1786 120000   F     3770                                     call    ldc_ltemp                       ;r8..r11
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    60

1789 1201D1         3771                                     call    flsub
178C 900000   F     3772                                     mov             dptr,#ch_4;
178F 120000   F     3773                                     call    ldc_ltemp                       ;r8..r11
1792 120203         3774                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
1795 120343         3775                                     call            ftol                    ;r2..r5->hex
1798 C002           3776                                     push            rr2
179A C003           3777                                     push            rr3
179C C004           3778                                     push            rr4
179E C005           3779                                     push            rr5
17A0 120000   F     3780                                     call            adrblok;dptr-
17A3 D005           3781                                     pop                     rr5
17A5 D004           3782                                     pop                     rr4
17A7 D003           3783                                     pop                     rr3
17A9 D002           3784                                     pop                     rr2
17AB 79D8           3785                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
                              внешн озу введенного лемента
17AD E582           3786                                     mov                     a,dpl
17AF 2D             3787                                     add                     a,r5
17B0 F582           3788                                     mov                     dpl,a
17B2 F7             3789                                     mov                     @r1,a           ;low
17B3 E583           3790                                     mov                     a,dph
17B5 3C             3791                                     addc            a,r4
17B6 F583           3792                                     mov                     dph,a
17B8 19             3793                                     dec                     r1
17B9 F7             3794                                     mov                     @r1,a                   ;high
                    3795                             
17BA                3796     li42_43:
17BA 120000   F     3797                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
17BD 900000   F     3798                                     mov             dptr,#ch10;
17C0 120000   F     3799                                     call    ldc_ltemp
17C3 120000   F     3800                                     call    zdiv    
                    3801                                     ;;;;;;;;;;;
17C6 120000   F     3802                                     call    maform
                    3803                                     ;;;;
                    3804     
                    3805                                     ;;;;;;;
17C9 784F           3806                                             mov             r0,#abin
17CB 120000   F     3807                                             call    saver2
17CE 7853           3808                                             mov             r0,#adec
17D0 7952           3809                                             mov             r1,#abin+3      ;hex->10
17D2 120000   F     3810                                             call    bindec
                    3811                                     
17D5 785C           3812                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
17D7 7945           3813                                             mov             r1,#bufind+5
17D9 7F07           3814                                             mov             r7,#7
17DB E6             3815     ch43:                           mov             a,@r0
17DC 2430           3816                                             add             a,#30h
17DE F7             3817                                             mov             @r1,a
17DF 19             3818                                             dec             r1
17E0 18             3819                                             dec             r0
17E1 DFF8           3820                                             djnz    r7,ch43
17E3 7847           3821                                             mov             r0,#bufind+7
17E5 762D           3822                                             mov             @r0,#2dh          ;-2..-9
17E7 7840           3823                                             mov             r0,#bufind
17E9 762B           3824                                             mov             @r0,#2bh
17EB 300202         3825                                             jnb             znmat,nozzmi43;bitznak,nozzmi
17EE 762D           3826                                             mov             @r0,#2dh
17F0 E538           3827     nozzmi43:       mov             a,nblok
17F2 B40104         3828                                             cjne    a,#1,nozzmi1            
17F5 7934           3829                                             mov             r1,#sadiap;diap
17F7 8010           3830                                             jmp             nozzbl
17F9 B40204         3831     nozzmi1:        cjne    a,#2,nozzmi2            
17FC 7932           3832                                             mov             r1,#sadiap2;diap
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    61

17FE 8009           3833                                             jmp             nozzbl
1800 B40304         3834     nozzmi2:        cjne    a,#3,nozzmi3            
1803 7931           3835                                             mov             r1,#sadiap3;diap
1805 8002           3836                                             jmp             nozzbl
1807 7930           3837     nozzmi3:        mov             r1,#sadiap4;diap
                    3838                                     
1809 7848           3839     nozzbl:         mov             r0,#bufind+8
180B E7             3840                                             mov             a,@r1
180C B40808         3841                                             cjne    a,#8,nodi8_43
180F 7630           3842                                             mov             @r0,#30h                 ;10-10
1811 18             3843                                             dec             r0
1812 7663           3844                                             mov             @r0,#63h;31h
1814 08             3845                                             inc             r0
1815 800E           3846                                             jmp             see_l43
1817 B40908         3847     nodi8_43:       cjne    a,#9,nodi9_43
                    3848                                     
181A 7631           3849                                             mov             @r0,#31h           ;10-11
181C 18             3850                                             dec             r0
181D 7663           3851                                             mov             @r0,#63h;31h
                    3852                                     
181F 08             3853                                             inc             r0
1820 8003           3854                                             jmp             see_l43
1822 2432           3855     nodi9_43:               add             a,#32h
1824 F6             3856                                             mov             @r0,a;
1825 08             3857     see_l43:                        inc             r0
1826 7641           3858                                             mov             @r0,#"A";"E";
                    3859                             ;       inc             r0
                    3860                             ;       mov             @r0,#00h ;=feh в нач установе для поджига в
                             сех сегм
                    3861                             ;       inc             r0;             mov             bufind+11
                    3862                             ;       mov             @r0,#0d0h               ;bufind+11.4 точка 
                             после первой цифры
1828 434B10         3863                             orl                     bufind+11,#10h
182B 120000   F     3864     out43:          call            ind
182E 120000   F     3865                                             call            z_1s
1831 020000   F     3866                                             jmp             out7                               
                                  
                    3867     
                    3868                                     ;;;;;;;;        
1834 783D           3869     label7: mov             r0,#chkl
1836 7604           3870                                     mov             @r0,#04;3
1838 08             3871                                     inc             r0
1839 76E8           3872                                     mov             @r0,#0e8h               ;1000
183B 020000   F     3873                                     jmp             out7;
183E B64351         3874     list_43:                cjne    @r0,#43h,noli_43
1841 75B0FB         3875                                                     mov             p3,#0fbh                ;43
                             h <-
1844 20B70A         3876                                                     jb              p3.7,vvod43             ;vv
                             od
1847 C20B           3877                                                     clr             bitmem
1849 D204           3878                                                     setb    bitizm
184B 78B2           3879                                                     mov             r0,#marker
184D 76FF           3880                                                     mov             @r0,#0ffh
184F 80E3           3881                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3882     
1851 7644           3883     vvod43:                 mov             @r0,#44h
1853 E537           3884                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
1855 04             3885                                                     inc             a
1856 F552           3886                                                     mov             abin+3,a
                    3887                                                     
1858 F537           3888                                                     mov             nelem,a
185A E4             3889                                                     clr             a
185B F551           3890                                                     mov             abin+2,a
185D F550           3891                                                     mov             abin+1,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    62

185F F54F           3892                                                     mov             abin,a
                    3893                                             
1861 7853           3894                                             mov             r0,#adec
1863 7952           3895                                             mov             r1,#abin+3      ;hex->10
1865 120000   F     3896                                             call    bindec
1868 7840           3897                                             mov             r0,#bufind;почистить индикатор
186A 7F0A           3898                                             mov             r7,#10
186C 7420           3899                                             mov             a,#20h
186E F6             3900     cle20:          mov             @r0,a
186F 08             3901                                             inc             r0
1870 DFFC           3902                                             djnz    r7,cle20
                    3903                                             ;;;;;;
1872 900000   F     3904                                             mov             dptr,#teCH;ОТСЧЕТ 000
1875 120000   F     3905                                call         lotext
1878 534BEF         3906                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
187B 785C           3907                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
187D 7949           3908                                             mov             r1,#bufind+9
187F 7F03           3909                                             mov             r7,#3
1881 E6             3910     ch43_42:                                mov             a,@r0
1882 2430           3911                                             add             a,#30h
1884 F7             3912                                             mov             @r1,a
1885 19             3913                                             dec             r1
1886 18             3914                                             dec             r0
1887 DFF8           3915                                             djnz    r7,ch43_42
1889 120000   F     3916                                             call            ind
188C 120000   F     3917                                             call            z_1s
188F 020000   F     3918                                             jmp             out7
1892 B64419         3919     noli_43:        cjne            @r0,#44h,vvosta
1895 7643           3920                                             mov                     @r0,#43h
1897 79D8           3921                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
1899 E7             3922                                                     mov                     a,@r1
189A F582           3923                                                     mov                     dpl,a
189C 19             3924                                                     dec                     r1
189D E7             3925                                                     mov                     a,@r1;high
189E F583           3926                                                     mov                     dph,a
18A0 A3             3927                                                     inc                     dptr
18A1 A3             3928                                                     inc                     dptr
18A2 A3             3929                                                     inc                     dptr
18A3 A3             3930                                                     inc                     dptr
18A4 E583           3931                                                     mov                     a,dph
18A6 F7             3932                                                     mov                     @r1,a
18A7 09             3933                                                     inc                     r1
18A8 E582           3934                                                     mov                     a,dpl
18AA F7             3935                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
18AB 020000   F     3936                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3937     
18AE B66111         3938     vvosta:                 cjne            @r0,#61h,vvostad
18B1 7662           3939                                                     mov                     @r0,#62h
18B3 900000   F     3940                                                     mov                     dptr,#teMAX;
18B6 120000   F     3941                                                     call            lotext
18B9 120000   F     3942                                                     call            vichmax
18BC 120000   F     3943                                                     call            z_1s
18BF 020000   F     3944                                                     jmp             goto7
                    3945     
18C2                3946     vvostad:                ;cjne           @r0,#61h
18C2 7663           3947                                                     mov                     @r0,#63h
18C4 900000   F     3948                                                     mov             dptr,#teMid;
18C7 120000   F     3949                                                     call    lotext
18CA 120000   F     3950                                                     call            vichmean
18CD 020000   F     3951                                                     jmp             goto7
                    3952     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    63

18D0 020000   F     3953     rLABELP:                jmp                     LABELP
18D3 78B1           3954     vvodm11_15:     mov                     r0,#vichR;vvod
18D5 75B0F7         3955                                                     mov                     p3,#0f7h
18D8 20B7F5         3956                                             jb                      p3.7,rLABELP;????
                    3957                                     
                    3958     
18DB B61115         3959                                             cjne                    @r0,#11h,tome21
18DE 7621           3960                                             mov                     @r0,#21h;vvod
18E0 900000   F     3961                                             mov                     dptr,#teTE11
18E3 120000   F     3962                                             call            lotext
18E6 534B03         3963                                             anl                     bufind+11,#03h ;погасить за
                             пятые
18E9 020000   F     3964                                             jmp                     onmem11
                    3965     
18EC 16             3966     me11_15dec:             dec             @r0                             ;<-
18ED 120000   F     3967     lokame1:        call            lomenu
18F0 020000   F     3968                                             jmp                     onmem11
                    3969     
18F3 B61206         3970     tome21:         cjne                    @r0,#12h,tome13
                    3971                                             ;вкл тест интерфейса
18F6 020000   F     3972                                             jmp             testrs;??????????
18F9 020000   F     3973                                             jmp                     onmem11
                    3974     
18FC B6132A         3975     tome13:         cjne                    @r0,#13h,tome14
18FF 7631           3976                                             mov                     @r0,#31h
                    3977                                             
1901 7A50           3978                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1903 7B2C           3979                                             mov                     r3,#2ch
1905 120454         3980                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1908 E508           3981                                             mov                     a,r8
190A B4000E         3982                                             cjne            a,#00,skor19
190D 900000   F     3983                                             mov                     dptr,#teS57_6;57,6
1910 120000   F     3984                                             call            lotext
1913 434B80         3985                                     orl                     bufind+11,#80h
1916 C213           3986                                             clr                     bitv19
                    3987     
1918 020000   F     3988                                             jmp             onmem11
191B 900000   F     3989     skor19:         mov                     dptr,#teS19_2
191E 120000   F     3990                                             call            lotext
1921 D213           3991                                             setb            bitv19
1923 434B80         3992                                             orl                     bufind+11,#80h
1926 020000   F     3993                                             jmp                     onmem11
                    3994                                             
                    3995     
1929 B61415         3996     tome14:         cjne                    @r0,#14h,tome15
192C D204           3997                                             setb            bitizm
192E 7881           3998                                             mov                     r0,#chavt
1930 7600           3999                                             mov                     @r0,#0
1932 08             4000                                             inc                     r0
1933 7600           4001                                             mov                     @r0,#0
1935 C211           4002     outmenu:        clr                     bitmenu
1937 020000   F     4003                                             jmp                     out7
                    4004     
193A 78B1           4005     goparom:        mov             r0,#vichR               ;режим меню 52
193C 7652           4006                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
193E 020000   F     4007                                             jmp                     goparol
1941 2016F6         4008     tome15:         jb              bitpar,goparom  
1944 7651           4009                                             mov                     @r0,#51h;ПАРОЛЬ 000
1946 120000   F     4010                                             call            lomenu
1949 78B2           4011                                             mov                     r0,#marker
194B 7607           4012                                             mov                     @r0,#7
194D 753B09         4013                                             mov                     movrig,#9
1950 753A07         4014                                             mov                     movleft,#7
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    64

                    4015                                             ;setb           bitizm
1953 020000   F     4016                                             jmp                     onmem11
                    4017     
                    4018     
1956 78B1           4019     me21_23:        mov                     r0,#vichR               ;<-
1958 7423           4020                                             mov                     a,#23h
195A C3             4021                                             clr                     c
195B 96             4022                                             subb            a,@r0
195C 403D           4023                                             jc                      labelS1
195E 75B0FB         4024                                             mov                     p3,#0fbh
1961 20B718         4025                                             jb                      p3.7,vv21_23
1964 B6210B         4026                                             cjne            @r0,#21h,me21_23dec;-<
1967 7623           4027                                             mov                     @r0,#23h
1969 900000   F     4028                                             mov                     dptr,#teTE7
196C 120000   F     4029                                             call            lotext
196F 020000   F     4030                                             jmp                     onmem11
1972                4031     me21_23dec:     
1972 16             4032                                             dec                     @r0
1973 120000   F     4033                                             call            lomenu
1976 020000   F     4034                                             jmp                     onmem11
1979 020000   F     4035     onmem12:        jmp             outF    ;(ie7)                          
                    4036                                                     
197C 75B0F7         4037     vv21_23:        mov             p3,#0f7h                ;vvod
197F 20B7F7         4038                                             jb              p3.7,onmem12
1982 B6210C         4039                                             cjne            @r0,#21h,test22
                    4040                                             ;mov                    dptr,#tabt11;заслать ус 11А
1985 120000   F     4041     tests:          call            lotpus
1988 D215           4042                                             setb            biteizm;запомнить режим ТИ
198A D204           4043                                             setb            bitizm
198C C211           4044                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
198E 020000   F     4045                                             jmp                     onmem11
1991 B62202         4046     test22:         cjne            @r0,#22h,test23
                    4047                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1994 80EF           4048                                             jmp             tests   
1996                4049     test23:
                    4050                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1996 80ED           4051                                             jmp             tests   
1998 020000   F     4052     left_s:         jmp                     left_sk
199B B63149         4053     labelS1:        cjne            @r0,#31h,me_41
199E 75B0FB         4054                                             mov                     p3,#0fbh                   
                                  ;<-
19A1 30B7F4         4055                                             jnb                     p3.7,left_s
19A4 75B0F7         4056                                             mov                     p3,#0f7h
19A7 20B7CF         4057                                             jb                      p3.7,onmem12
                    4058                                             ;запомнить признак установленной скорости в рпзу
                    4059     
                    4060     ;чтение пам прогр(5000h) 1 страница(ffh)
                    4061     ;и запись во внешнее озу(0000h)
19AA 7900           4062                                             mov             r1,#0                   ;
19AC 7A50           4063                                     mov             r2,#50h
19AE 7B00           4064                                     mov             r3,#00
19B0 120499         4065                                     call    copyPP
                    4066                                     ;внести изменения во внешн озу
                    4067                                     ;KD=00 01 86 A0 (KD=1)
                    4068                                     ;кофф *100000 и переведенный в hex формат
                    4069                                     ;согласно адресов диапазонов и адресов яч вн озу 
19B3 792C           4070                                     mov             r1,#2ch
19B5 7400           4071                                     mov             a,#0;57,6
19B7 301302         4072                                     jnb             bitv19,spwri
19BA 7401           4073                                     mov             a,#1;19.6
19BC F3             4074     spwri:  movx    @r1,a
                    4075     ;стереть страницу пап прогр 
19BD 905000         4076                                     mov             dptr,#5000h
19C0 7FFF           4077                                     mov             r7,#0ffh
19C2 12043E         4078                                     call    cle256
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    65

                    4079     ;и запись в ячейки кофф памяти прогр (3000h) 
19C5 7FFF           4080                                     mov             r7,#0ffh
19C7 7900           4081                                     mov             r1,#0                           ;external r
                             am
19C9 905000         4082                                     mov             dptr,#5000h
19CC 120480         4083                                     call    wrpage
                    4084             
19CF 201305         4085                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
19D2 758DF4         4086                                             mov                     TH1,#244                ;57
                             .6
19D5 8003           4087                                             jmp                     outsko
19D7 758DDC         4088     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
19DA C211           4089     outsko:         clr             bitmenu
19DC D204           4090                                             setb            bitizm
19DE 020000   F     4091                                             jmp                     out7
                    4092     
19E1 020000   F     4093     rlabels4:               jmp             labels4
19E4 020000   F     4094     rlabelS13:      jmp             labelS13
                    4095     
19E7 B651F7         4096     me_41:          cjne            @r0,#51h,rlabels4
19EA 75B0FB         4097                                             mov             p3,#0fbh;<-
19ED 30B7F4         4098                                             jnb             p3.7,rlabelS13
19F0 75B0F7         4099                                             mov             p3,#0f7h
19F3 20B76D         4100                                             jb              p3.7,vvmenu
                    4101                                             ;ввод пароля
                    4102                                     
                    4103     ;       считать с индикатора 
19F6 7F0E           4104                                     mov             r7,#14
19F8 784F           4105                                     mov             r0,#abin
19FA 120000   F     4106                                     call    clearN                  
                    4107                                     
                    4108     ;чтение номера байта с индикатора(3байта)
                    4109     ;bufind+3..bufind+9
                    4110     ;-  - - -
                    4111     ;- - - - - - - - - -
                    4112     ;adec..adec+9
                    4113     ;ст            мл
19FD 7849           4114                                     mov             r0,#bufind+9;
19FF 795C           4115                                     mov             r1,#adec+9
1A01 7F03           4116                                     mov             r7,#3;3bait
1A03 C3             4117     upav1:          clr             c
1A04 E6             4118                                     mov             a,@r0
1A05 9430           4119                                     subb    a,#30h
1A07 F7             4120                                     mov             @r1,a
1A08 18             4121                                     dec             r0
1A09 19             4122                                     dec             r1
1A0A DFF7           4123                                     djnz    r7,upav1;adec+7..adec+9
1A0C 7A50           4124                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1A0E 7B28           4125                                             mov                     r3,#28h
1A10 120454         4126                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1A13 800F           4127     jmp                     goparol
1A15 E508           4128                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
1A17 B55A4C         4129                                     cjne            a,adec+7,parerr
1A1A E509           4130                                     mov                     a,r9    
1A1C B55B47         4131                                     cjne            a,adec+8,parerr
1A1F E50A           4132                                     mov                     a,r10
1A21 B55C42         4133                                     cjne            a,adec+9,parerr
                    4134                                     ;равны
1A24 78B1           4135     goparol:        mov             r0,#vichR               ;режим меню 52
1A26 7652           4136                                             mov             @r0,#52h                ;0000-n
1A28 900000   F     4137                                             mov             dptr,#teKD;00000-nA
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    66

1A2B 120000   F     4138                                             call            lotext
                    4139                                             ;;;;;;;;;
                    4140                                                     ;n(hex)->abin
1A2E 120000   F     4141                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1A31 2552           4142                                             add             a,abin+3
1A33 F552           4143                                             mov             abin+3,a
1A35 7853           4144                                             mov             r0,#adec
1A37 7952           4145                                             mov             r1,#abin+3      ;hex->10
1A39 120000   F     4146                                             call    bindec
1A3C 855C48         4147                                             mov             bufind+8,adec+9
1A3F 75472D         4148                                             mov             bufind+7,#2dh
                    4149     
1A42 79AE           4150                                             mov             r1,#diap
1A44 7848           4151                                             mov             r0,#bufind+8
1A46 E7             4152                                             mov             a,@r1
1A47 B40807         4153                                             cjne    a,#8,nodi8k
1A4A 7630           4154                                             mov             @r0,#30h                 ;10-10
1A4C 18             4155                                             dec             r0
1A4D 7663           4156                                             mov             @r0,#63h;31h
1A4F 8008           4157                                             jmp             nodisk9
1A51 B40905         4158     nodi8k:                         cjne    a,#9,nodisk9
                    4159                                     
1A54 7631           4160                                             mov             @r0,#31h           ;10-11
1A56 18             4161                                             dec             r0
1A57 7663           4162                                             mov             @r0,#63h;31h
                    4163                                     
                    4164     
1A59 78B2           4165     nodisk9:        mov                     r0,#marker
1A5B 7601           4166                                             mov                     @r0,#1
1A5D 753A01         4167                                             mov                     movleft,#1
1A60 753B05         4168                                             mov                     movrig,#5
                    4169                                             
1A63 020000   F     4170     vvmenu:         jmp             goto7
                    4171     
1A66 753932         4172     parerr:         mov                     nuerr,#32h
1A69 120000   F     4173                                             call            error
1A6C 120000   F     4174                                             call            ind
1A6F 120000   F     4175                                             call            z_1s
1A72 C211           4176                                             clr                     bitmenu
1A74 D204           4177                                             setb            bitizm
1A76 78B2           4178                                             mov                     r0,#marker
1A78 76FF           4179                                             mov                     @r0,#0ffh
1A7A 020000   F     4180                                             jmp             goto7
                    4181     
1A7D 30130B         4182     left_sk:                jnb                     bitv19,tosk19;<-
1A80 900000   F     4183                                             mov                     dptr,#teS57_6;57,6
1A83 120000   F     4184                                             call            lotext
1A86 C213           4185                                             clr                     bitv19
1A88 020000   F     4186                                             jmp             out7
1A8B 900000   F     4187     tosk19:         mov                     dptr,#teS19_2
1A8E 120000   F     4188                                             call            lotext
1A91 D213           4189                                             setb            bitv19
1A93 020000   F     4190                                             jmp             out7
                    4191     
1A96                4192     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4193             
                    4194     ;;;;;;;;;;;;;;;;;;
                    4195     ;необходимо не портить цифру в следуюем справа знакоместе
                    4196     ;т е сохранить ее в ячейке для мигания в противном случае
                    4197     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4198     ;       знакоместа
1A96 78B2           4199                                     mov             r0,#marker
1A98 7440           4200                                     mov             a,#bufind
1A9A 26             4201                                             add             a,@r0                   ;a=bufind+m
                             arker
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    67

1A9B F9             4202                                             mov             r1,a
1A9C 19             4203                                             dec             r1;inc          r1
1A9D 873C           4204                                             mov             savba,@r1
                    4205                                                     
1A9F 78B2           4206                                                     mov             r0,#marker
1AA1 16             4207                                                     dec             @r0                        
                                  
1AA2 C219           4208                                     clr             bitmig
1AA4 E53A           4209                                     mov                     a,movleft
1AA6 B6064F         4210                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
1AA9 06             4211                                     inc             @r0
1AAA 020000   F     4212                                             jmp             goto7
                    4213     ;;;;;;;
                    4214     
1AAD                4215     vvkali52:       ;введено значение для калибровки
                    4216                                             ;число на индикаторе ->Ak  (52h)
                    4217                                             ;       считать с индикатора 
1AAD 7F0E           4218                                     mov             r7,#14
1AAF 784F           4219                                     mov             r0,#abin
1AB1 120000   F     4220                                     call    clearN                  
                    4221                                     
                    4222     ;чтение номера байта с индикатора(3байта)
                    4223     ;bufind+1..bufind+5
                    4224     ;-  - - -
                    4225     ;- - - - - - - - - -
                    4226     ;adec..adec+9
                    4227     ;ст            мл
1AB4 7845           4228                                     mov             r0,#bufind+5;
1AB6 795C           4229                                     mov             r1,#adec+9
1AB8 7F05           4230                                     mov             r7,#5;5bait
1ABA C3             4231     upav2:          clr             c
1ABB E6             4232                                     mov             a,@r0
1ABC 9430           4233                                     subb    a,#30h
1ABE F7             4234                                     mov             @r1,a
1ABF 18             4235                                     dec             r0
1AC0 19             4236                                     dec             r1
1AC1 DFF7           4237                                     djnz    r7,upav2;adec+7..adec+9
                    4238     
1AC3 784F           4239                                     mov             r0,#abin
1AC5 7953           4240                                     mov             r1,#adec                        ;мл        
                              ст
1AC7 120000   F     4241                                     call    decbin                  ;abin..abin+3 (hex)
1ACA 120000   F     4242                                     call    loadr2                  ;r2..r5
1ACD 120402         4243                                     call    altof   ;r2..r5->float
1AD0 900000   F     4244                                     mov     dptr,#ch_10;10
1AD3 120000   F     4245                                     call    ldc_ltemp                       ;r8..r11=8
1AD6 120203         4246                                     call    flmul
1AD9 78A4           4247                                     mov             r0,#rez_Ak
1ADB 120000   F     4248                                     call    saver2
1ADE C211           4249                                             clr                     bitmenu
1AE0 D212           4250                                             setb            bitklb
                    4251                                             ;зажечь KMП
1AE2 D204           4252                                             setb            bitizm;бит калибровки уже установле
                             н
1AE4 78B2           4253                                             mov                     r0,#marker
1AE6 76FF           4254                                             mov                     @r0,#0ffh
1AE8 783D           4255                                     mov             r0,#chkl
1AEA 76FF           4256                                     mov             @r0,#0ffh
1AEC 08             4257                                     inc             r0
1AED 76FF           4258                                     mov             @r0,#0ffh;38h
1AEF 120000   F     4259                                     call            z_1s
1AF2 020000   F     4260                                     jmp             out7
                    4261     
                    4262     
1AF5 020000   F     4263                                             jmp             goto7
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    68

                    4264                                              
1AF8 020000   F     4265     onmem13:        jmp             goto7   ;(ie7)
                    4266     
1AFB B642AF         4267     labels4:        cjne            @r0,#42h,vvkali52
1AFE 75B0FB         4268                                             mov                     p3,#0fbh;<-
1B01 30B7F4         4269                                             jnb             p3.7,onmem13
1B04 75B0F7         4270                                             mov             p3,#0f7h;vvod
1B07 20B7EE         4271                                             jb              p3.7,onmem13
                    4272                                             
                    4273             
1B0A 020000   F     4274     jmp             out7                                                    
                    4275     ;;;;;;;
1B0D                4276     labelI:
1B0D 75B0FE         4277                                     mov             p3,#0feh
1B10 E5B0           4278                                     mov             a,p3
1B12 20E703         4279                                     jb              acc.7,nopoint
                    4280                                     ;
1B15 020000   F     4281                                     jmp             goto7;out7
                    4282     
1B18 75B0FB         4283     nopoint:                mov             p3,#0fbh
1B1B E5B0           4284                                     mov             a,p3
1B1D 20E72C         4285                                     jb              acc.7,nopoin7
1B20 78B2           4286     labelS3:mov             r0,#marker
1B22 E53A           4287                                     mov             a,movleft
1B24 B40309         4288                                     cjne    a,#3,poina1
1B27 B6030B         4289                                     cjne    @r0,#3,nomarl;26
                    4290                                     ;mov            @r0,#9
1B2A E53B           4291     poina2: mov                     a,movrig                ;кн <- B=+00000
1B2C F6             4292                                     mov                     @r0,a
1B2D 020000   F     4293                                     jmp             goto7;  out7
                    4294     
1B30 B60402         4295     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1B33 80F5           4296                                             jmp             poina2
                    4297     
                    4298     
1B35                4299     nomarl:                 ;                               29.12.06
                    4300     ;;;;;;;;;;;;;;;;;;
                    4301     ;необходимо не портить цифру в следуюем справа знакоместе
                    4302     ;т е сохранить ее в ячейке для мигания в противном случае
                    4303     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4304     ;       знакоместа
1B35 78B2           4305                                     mov             r0,#marker
1B37 7440           4306                                     mov             a,#bufind
1B39 26             4307                                             add             a,@r0                   ;a=bufind+m
                             arker
1B3A F9             4308                                             mov             r1,a
1B3B 09             4309                                             inc             r1
1B3C 873C           4310                                             mov             savba,@r1
                    4311                                                     
1B3E 78B2           4312                                                     mov             r0,#marker
1B40 16             4313                                                     dec             @r0                        
                                  
1B41 C219           4314                                     clr             bitmig
1B43 E53A           4315                                     mov                     a,movleft
1B45 B40340         4316                                     cjne            a,#3,poinA
1B48 B6026B         4317                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
1B4B 06             4318     poin3:  inc             @r0
                    4319     ;нажат ввод А =000000 запомнить константу А
1B4C 75B0F7         4320     nopoin7:           mov          p3,#0f7h
1B4F E5B0           4321                                     mov             a,p3
1B51 20E762         4322                                     jb              acc.7,out7
1B54 78B1           4323                                     mov             r0,#vichR
1B56 E6             4324                                     mov             a,@r0
1B57 B62133         4325                                     cjne    @r0,#21h,no21p7
1B5A 7611           4326                                     mov             @r0,#11h
                    4327                             ;       считать с индикатора  упаковать в плавающий формат
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    69

                    4328                             ;   сохранить
1B5C 7F0E           4329                                     mov             r7,#14
1B5E 784F           4330                                     mov             r0,#abin
1B60 120000   F     4331                                     call    clearN                  
1B63 120000   F     4332                                     call    upakA
                    4333                                     
1B66 784F           4334                                     mov             r0,#abin
1B68 7953           4335                                     mov             r1,#adec                        ;мл        
                              ст
1B6A 120000   F     4336                                     call    decbin                  ;abin..abin+3 (hex)
1B6D 120000   F     4337                                     call    loadr2                  ;r2..r5
1B70 120402         4338                                     call    altof                   ;r2..r5->int
1B73 78BC           4339                                     mov             r0,#konstA
1B75 120000   F     4340                                     call    saver2
                    4341     ;26
1B78 78B2           4342                                     mov             r0,#marker
1B7A 76FF           4343                                     mov             @r0,#0ffh
                    4344                                     
1B7C 900000   F     4345                                     mov             dptr,#teVICH;teBequ0
1B7F 120000   F     4346                                     call    lotext
                    4347                             ;       call            outB
1B82 534BBF         4348                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4349                             ;       orl             bufind+11,#80h
1B85 020000   F     4350                                     jmp             goto7;out7
                    4351     
1B88 B6032B         4352     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1B8B 80BE           4353                                             jmp             poin3
                    4354     
1B8D                4355     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4356                             ;   сохранить
1B8D 7F0E           4357                                     mov             r7,#14
1B8F 784F           4358                                     mov             r0,#abin
1B91 120000   F     4359                                     call    clearN                  
1B94 120000   F     4360                                     call    upakB                   
1B97 784F           4361                                     mov             r0,#abin
1B99 7953           4362                                     mov             r1,#adec                        ;мл        
                              ст
1B9B 120000   F     4363                                     call    decbin                  ;abin..abin+3 (hex)
1B9E 120000   F     4364                                     call    loadr2                  ;r2..r5
1BA1 120402         4365                                     call    altof                   ;r2..r5->int
1BA4 301B04         4366                                     jnb             bitznB,pozB
1BA7 EA             4367                                     mov             a,r2
1BA8 4480           4368                                     orl             a,#80h
1BAA FA             4369                                     mov             r2,a                    ;знак-
1BAB                4370     pozB:           ;mov            r0,#konstB
                    4371                                     ;call   saver2
                    4372     
1BAB 79B2           4373                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1BAD 77FF           4374                                     mov             @r1,#0ffh
1BAF 78B1           4375                                     mov             r0,#vichR
1BB1 7611           4376                                     mov             @r0,#11h
1BB3 020000   F     4377                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4378                                     
                    4379     
1BB6                4380     out7:                   ;mov            IE,#80h
1BB6 D083           4381                                     pop             dph
1BB8 D082           4382                                     pop             dpl
1BBA D007           4383                                     pop             rr7     
1BBC D006           4384                                     pop             rr6
1BBE D005           4385                                     pop             rr5
1BC0 D004           4386                                     pop             rr4
1BC2 D003           4387                                     pop             rr3
1BC4 D002           4388                                     pop             rr2
1BC6 D001           4389                                     pop             rr1                             
1BC8 D000           4390                                     pop             rr0
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    70

1BCA D0D0           4391                                     pop             psw
1BCC D0E0           4392                                     pop             acc
1BCE 75AD00         4393                             mov             P3IF,#00;               обязательно сбросить опять 
                             приходит на обработку прерывания
1BD1 75B0C0         4394                             mov             P3,#0c0h
                    4395                             ;       mov             EIE2,#30H
1BD4 C219           4396     clr             bitmig
1BD6 E586           4397                                             mov             a,P6            ;p6.4=0
1BD8 54EF           4398                             anl             a,#0efh
1BDA F586           4399                             mov             P6,a
1BDC 00             4400                             nop
1BDD 00             4401                             nop
                    4402                                     
1BDE E586           4403                             mov             a,P6                    ;p6.4=1 
1BE0 4410           4404                             orl             a,#10h
1BE2 F586           4405                             mov             P6,a                        
1BE4 32             4406                                     reti
                    4407     
                    4408     
                    4409                                     
                    4410     
                    4411     
1BE5 78B1           4412     lomenu:         mov             r0,#vichR
1BE7 B61107         4413                                             cjne    @r0,#11h,menu12
1BEA 900000   F     4414                                             mov             dptr,#teTESI
1BED 120000   F     4415     lome1:                  call    lotexT
1BF0 22             4416                                             ret
1BF1 B61205         4417     menu12:         cjne    @r0,#12h,menu13
1BF4 900000   F     4418                                             mov             dptr,#teTESR
1BF7 80F4           4419                                             jmp             lome1
1BF9 B61305         4420     menu13:         cjne    @r0,#13h,menu14
1BFC 900000   F     4421                                             mov             dptr,#teSKOR
1BFF 80EC           4422                                             jmp             lome1
1C01 B61405         4423     menu14:         cjne    @r0,#14h,menu15
1C04 900000   F     4424                                             mov             dptr,#teAVK
1C07 80E4           4425                                             jmp             lome1
1C09 B61505         4426     menu15:                 cjne    @r0,#15h,menu21
1C0C 900000   F     4427                                             mov             dptr,#teKALIB
1C0F 80DC           4428                                             jmp             lome1
                    4429     
1C11 B62105         4430     menu21: cjne    @r0,#21h,menu22
1C14 900000   F     4431                                             mov             dptr,#teTE11
1C17 80D4           4432                                             jmp             lome1
1C19 B62205         4433     menu22:         cjne    @r0,#22h,menu23
1C1C 900000   F     4434                                             mov             dptr,#teTE9
1C1F 80CC           4435                                             jmp             lome1
1C21 B62305         4436     menu23:         cjne    @r0,#23h,menu31
1C24 900000   F     4437                                             mov             dptr,#teTE7
1C27 80C4           4438                                             jmp             lome1
1C29 B63105         4439     menu31:         cjne    @r0,#31h,menu41
1C2C 900000   F     4440                                             mov             dptr,#teS57_6
1C2F 80BC           4441                                             jmp             lome1
                    4442     
1C31                4443     menu41:         
1C31 900000   F     4444                                             mov             dptr,#tePAR
1C34 80B7           4445                                             jmp             lome1
                    4446     
1C36 020000   F     4447     yesvi_kr:               jmp                     yesvi_km
1C39                4448     endkalib:;KD=Ak/A3
1C39 200DFA         4449                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1C3C 789C           4450                                             mov                     r0,#rez_A3
1C3E 120000   F     4451                                             call            resar2
                    4452                                     
1C41 120402         4453                                     call    altof                   ;->float
1C44 EA             4454                                             mov                     a,r2
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    71

1C45 547F           4455                                             anl                     a,#7fh
1C47 FA             4456                                             mov                     r2,a
1C48 120000   F     4457                                     call            move28
1C4B 78A4           4458                                             mov                     r0,#rez_Ak
1C4D 120000   F     4459                                             call            resar2
1C50 1202B7         4460                                             call            fldiv
                    4461                                                     
1C53 900000   F     4462                                     mov     dptr,#CHtho;100000
1C56 120000   F     4463                                     call    ldc_ltemp                       ;r8..r11=8
1C59 120203         4464                                     call    flmul
1C5C 120343         4465                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4466     
1C5F 78A0           4467                                             mov                     r0,#koefKD
1C61 120000   F     4468                                             call            saver2
                    4469                                             ;запись в рпзу в соотв ячейку
                    4470                             
1C64 7900           4471                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1C66 7A50           4472                                     mov             r2,#50h
1C68 7B00           4473                                     mov             r3,#00
1C6A 120499         4474                                     call    copyPP
                    4475                                     ;внести изменения во внешн озу
1C6D 120000   F     4476                                     call            findext                 ;r1-внешн озу
1C70 78A0           4477                                     mov                     r0,#koefKD
1C72 120000   F     4478                                             call            resar2
1C75 EA             4479                                             mov                     a,r2
1C76 F3             4480                                             movx            @r1,a
1C77 09             4481                                             inc                     r1
1C78 EB             4482                                             mov                     a,r3
1C79 F3             4483                                             movx            @r1,a
1C7A 09             4484                                             inc                     r1
1C7B EC             4485                                             mov                     a,r4
1C7C F3             4486                                             movx            @r1,a
1C7D 09             4487                                             inc                     r1
1C7E ED             4488                                             mov                     a,r5
1C7F F3             4489                                             movx            @r1,a
                    4490                                     ;кофф *100000 и переведенный в hex формат
                    4491                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4492     ;стереть страницу пап прогр 
1C80 905000         4493                                     mov             dptr,#5000h
1C83 7FFF           4494                                     mov             r7,#0ffh
1C85 12043E         4495                                     call    cle256
                    4496     ;и запись в ячейки кофф памяти прогр (3000h) 
1C88 7FFF           4497                                     mov             r7,#0ffh
1C8A 7900           4498                                     mov             r1,#0                           ;external r
                             am
1C8C 905000         4499                                     mov             dptr,#5000h
1C8F 120480         4500                                     call    wrpage
                    4501     ;2.2.07
1C92 79AE           4502                                     mov                     r1,#diap
1C94 B70511         4503                                     cjne            @r1,#5,fulkalib
                    4504                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1C97 D20D           4505                                     setb            bifl_kt
                    4506                                     ;call           loadus
1C99 900000   F     4507                                     mov                     dptr,#tabt7;заслать ус 7А       
1C9C E4             4508                             clr             a
1C9D 93             4509                             movc    a,@a+dptr                               ;high byte
1C9E F584           4510                             mov             p4,a
1CA0 A3             4511                             inc             dptr
1CA1 E4             4512                             clr             a
1CA2 93             4513                             movc    a,@a+dptr                               ;low byte
1CA3 F585           4514                             mov             p5,a
1CA5 020000   F     4515                                     jmp             goto7;  out_kali
                    4516     
                    4517     ;;;
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    72

1CA8                4518     fulkalib:
1CA8 C212           4519                                             clr             bitklb
1CAA D216           4520                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1CAC 900000   F     4521                                             mov             dptr,#teEND
1CAF 120000   F     4522                                             call    lotext
1CB2 120000   F     4523                                             call    ind
1CB5 120000   F     4524     out_kali:       call    z_1s
1CB8 120000   F     4525                                             call    z_1s
1CBB 020000   F     4526                                             jmp             goto7
1CBE                4527     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1CBE 7A50           4528                                     mov                     r2,#50h                 ;-11a
1CC0 7B14           4529                                     mov                     r3,#14h                 ;k7
1CC2 12046C         4530                                     call            rebyte2                         ;r2..r5- he
                             x
1CC5 120402         4531                                     call            altof                   ;r2..r5->float
1CC8 C002           4532                                     push            rr2
1CCA C003           4533                                     push            rr3
1CCC C004           4534                                     push            rr4
1CCE C005           4535                                     push            rr5
1CD0 7A50           4536                                     mov                     r2,#50h                 ;k5
1CD2 7B0C           4537                                     mov                     r3,#0ch
1CD4 12046C         4538                             call            rebyte2                 ;r2..r5
1CD7 120402         4539                                     call            altof                   ;r2..r5->float
1CDA 120000   F     4540                                     call            move28
1CDD D005           4541                                     pop                     rr5
1CDF D004           4542                                     pop                     rr4
1CE1 D003           4543                                     pop                     rr3
1CE3 D002           4544                                     pop                     rr2
1CE5 1202B7         4545                                     call            fldiv                   ;K7/K5
                    4546     
1CE8 900000   F     4547                                     mov     dptr,#CHtho;100000
1CEB 120000   F     4548                                     call    ldc_ltemp                       ;r8..r11=8
1CEE 120203         4549                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1CF1 C002           4550                                     push            rr2
1CF3 C003           4551                                     push            rr3
1CF5 C004           4552                                     push            rr4
1CF7 C005           4553                                     push            rr5
                    4554                                     
1CF9 789C           4555                                     mov                     r0,#rez_A3
1CFB 120000   F     4556                                     call            resar2
1CFE 120402         4557                                     call            altof                           ;r2..r5->fl
                             oat
1D01 120000   F     4558                                     call            move28
1D04 D005           4559                                     pop                     rr5
1D06 D004           4560                                     pop                     rr4
1D08 D003           4561                                     pop                     rr3
1D0A D002           4562                                     pop                     rr2
1D0C 1202B7         4563                               call          fldiv           ;Km     
                    4564     
1D0F 900000   F     4565                                     mov     dptr,#CHtho;100000
1D12 120000   F     4566                                     call    ldc_ltemp                       ;r8..r11=8
1D15 120203         4567                                     call    flmul                           ;r2..r5
1D18 120343         4568                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1D1B 78A0           4569                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1D1D 120000   F     4570                                     call            saver2
                    4571                                     ;запись в рпзу в соотв ячейку
1D20 7900           4572                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1D22 7A50           4573                                     mov             r2,#50h
1D24 7B00           4574                                     mov             r3,#00
1D26 120499         4575                                     call    copyPP
                    4576                                     ;внести изменения во внешн озу
1D29 78A0           4577                                     mov                     r0,#koefKD
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    73

1D2B 120000   F     4578                                     call            resar2
1D2E 792C           4579                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4580                             
1D30 EA             4581                                     mov                     a,r2
1D31 F3             4582                                             movx            @r1,a
1D32 09             4583                                             inc                     r1
1D33 EB             4584                                             mov                     a,r3
1D34 F3             4585                                             movx            @r1,a
1D35 09             4586                                             inc                     r1
1D36 EC             4587                                             mov                     a,r4
1D37 F3             4588                                             movx            @r1,a
1D38 09             4589                                             inc                     r1
1D39 ED             4590                                             mov                     a,r5
1D3A F3             4591                                             movx            @r1,a
                    4592                                     ;кофф *100000 и переведенный в hex формат
                    4593                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4594     ;стереть страницу пап прогр 
1D3B 905000         4595                                     mov             dptr,#5000h
1D3E 7FFF           4596                                     mov             r7,#0ffh
1D40 12043E         4597                                     call    cle256
                    4598     ;и запись в ячейки кофф памяти прогр (3000h) 
1D43 7FFF           4599                                     mov             r7,#0ffh
1D45 7900           4600                                     mov             r1,#0                           ;external r
                             am
1D47 905000         4601                                     mov             dptr,#5000h
1D4A 120480         4602                                     call    wrpage
                    4603     
1D4D C20D           4604                                             clr             bifl_kt
1D4F 120000   F     4605                                             call    loadus
1D52 020000   F     4606                                             jmp             fulkalib
                    4607     
                    4608     ;выч среднего по блоку
                    4609     ;вых r2..r5
1D55                4610     vichmean:       
1D55 120000   F     4611                                             call            resa_hl;save_bl->dptr
1D58 78D7           4612                                             mov                     r0,#copy_hl
1D5A E583           4613                                             mov                     a,dph
1D5C F6             4614                                             mov                     @r0,a
1D5D 08             4615                                             inc                     r0
1D5E E582           4616                                             mov                     a,dpl
1D60 F6             4617                                             mov                     @r0,a
1D61 78B8           4618                                             mov                     r0,#work
1D63 120000   F     4619                                             call            clear4
1D66 78D6           4620                                             mov                     r0,#chblok;volume
1D68 7600           4621                                             mov                     @r0,#0
1D6A 120000   F     4622     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1D6D E582           4623                                             mov                     a,dpl
1D6F FF             4624                                             mov                     r7,a
1D70 E583           4625                                             mov                     a,dph
1D72 FE             4626                                             mov                     r6,a
                    4627     
1D73 78D7           4628                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1D75 E6             4629                                             mov                     a,@r0
1D76 F583           4630                                             mov                     dph,a
1D78 08             4631                                             inc                     r0
1D79 E6             4632                                             mov                     a,@r0
1D7A F582           4633                                             mov                     dpl,a
                    4634                                             
1D7C C3             4635                                             clr                     c;-4
1D7D E582           4636                                             mov                     a,dpl
1D7F 9404           4637                                             subb            a,#4
1D81 F582           4638                                             mov                     dpl,a
1D83 E583           4639                                             mov                     a,dph
1D85 9400           4640                                             subb            a,#0
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    74

1D87 F583           4641                                             mov                     dph,a;dptr-4
                    4642                                             ;;;;;;;;
1D89 79D7           4643                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1D8B E583           4644                                                     mov             a,dph
1D8D F7             4645                                               mov           @r1,a
1D8E 09             4646                                                     inc             r1
1D8F E582           4647                                                     mov             a,dpl
1D91 F7             4648                                                     mov             @r1,a
                    4649                                                     ;;;;;;;;;
1D92 C3             4650                                                     clr             c;пришли в начало блока?
1D93 E582           4651                                                     mov                     a,dpl
1D95 9F             4652                                                     subb            a,r7
1D96 FF             4653                                                     mov                     r7,a
1D97 7006           4654                                                     jnz                     nextmea
1D99 E583           4655                                                     mov                     a,dph
1D9B 9E             4656                                                     subb            a,r6
1D9C FE             4657                                                     mov                     r6,a
1D9D 601B           4658                                                     jz                      outmea;
                    4659                                                     
                    4660                                                     ;продолжаем сравнение
                    4661                                                     ;;;;;;;;;;;             
1D9F 120000   F     4662     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1DA2 120402         4663                                             call            altof;->float
1DA5 120000   F     4664                                             call            move28                  ;r8..r11
1DA8 78B8           4665                                             mov                     r0,#work
1DAA 120000   F     4666                                             call            resar2
1DAD 120166         4667                                             call            fladd
1DB0 78B8           4668                                             mov                     r0,#work
1DB2 120000   F     4669                                             call            saver2
1DB5 78D6           4670                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1DB7 06             4671                                             inc                     @r0
1DB8 80B0           4672                                             jmp                     meng
1DBA                4673     outmea:         
1DBA 120000   F     4674                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1DBD 120402         4675                                             call            altof;->float
1DC0 120000   F     4676                                             call            move28                  ;r8..r11
1DC3 78B8           4677                                             mov                     r0,#work
1DC5 120000   F     4678                                             call            resar2
1DC8 120166         4679                                             call            fladd
1DCB 78B8           4680                                             mov                     r0,#work
1DCD 120000   F     4681                                             call            saver2
1DD0 E4             4682                                             clr                     a
1DD1 FA             4683                                             mov                     r2,a
1DD2 FB             4684                                             mov                     r3,a
1DD3 FC             4685                                             mov                     r4,a
1DD4 78D6           4686                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1DD6 E6             4687                                             mov                     a,@r0
1DD7 2401           4688                                             add                     a,#1
1DD9 FD             4689                                             mov                     r5,a
1DDA 120402         4690                                             call            altof;r2..r5 float
1DDD 120000   F     4691                                             call            move28
1DE0 78B8           4692                                             mov                     r0,#work
1DE2 120000   F     4693                                             call            resar2
1DE5 1202B7         4694                                             call            fldiv
1DE8 900000   F     4695                                             mov                     dptr,#ch_10      
1DEB 120000   F     4696                                     call            ldc_ltemp
1DEE 1202B7         4697                                     call            fldiv
1DF1 120343         4698                                             call            ftol                            ;->
                             hex
1DF4 120000   F     4699                                             call    maform
1DF7 784F           4700                                             mov             r0,#abin
1DF9 120000   F     4701                                             call    saver2
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    75

                    4702     ;;;;;;;;
                    4703                                             
1DFC 7853           4704                                             mov             r0,#adec
1DFE 7952           4705                                             mov             r1,#abin+3      ;hex->10
1E00 120000   F     4706                                             call    bindec
                    4707                                     
1E03 785C           4708                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1E05 7949           4709                                             mov             r1,#bufind+9
1E07 7F05           4710                                             mov             r7,#5
1E09 E6             4711     bufmea:                         mov             a,@r0
1E0A 2430           4712                                             add             a,#30h
1E0C F7             4713                                             mov             @r1,a
1E0D 19             4714                                             dec             r1
1E0E 18             4715                                             dec             r0
1E0F DFF8           4716                                             djnz    r7,bufmea
1E11 7844           4717                                             mov             r0,#bufind+4
1E13 762B           4718                                             mov             @r0,#2bh          
1E15 300202         4719                                             jnb             znmat,nozmea
1E18 762D           4720                                             mov             @r0,#2dh
1E1A 434B05         4721     nozmea:         orl             bufind+11,#05h
1E1D 22             4722                                             ret
                    4723     
                    4724     
1E1E E0             4725     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1E1F FA             4726                                             mov                     r2,a
1E20 A3             4727                                             inc                     dptr
1E21 E0             4728                                             movx            a,@dptr
1E22 FB             4729                                             mov                     r3,a
1E23 A3             4730                                             inc                     dptr
1E24 E0             4731                                             movx            a,@dptr
1E25 FC             4732                                             mov                     r4,a
1E26 A3             4733                                             inc                     dptr
1E27 E0             4734                                             movx            a,@dptr
1E28 FD             4735                                             mov                     r5,a    
1E29 22             4736                                             ret
                    4737     
1E2A C3             4738     min4_hl:        clr                     c;-4
1E2B E582           4739                                             mov                     a,dpl
1E2D 9404           4740                                             subb            a,#4
1E2F F582           4741                                             mov                     dpl,a
1E31 E583           4742                                             mov                     a,dph
1E33 9400           4743                                             subb            a,#0
1E35 F583           4744                                             mov                     dph,a;dptr-4
1E37 22             4745                                             ret
                    4746     
                    4747     ;мин значение по по блоку
1E38                4748     vichmin:        
1E38 120000   F     4749                                             call            resa_hl;save_bl->dptr
                    4750                                                                                     
                    4751     ;с конца блока адрес 2го измерение
1E3B 120000   F     4752                                             call            min4_hl
                    4753                                             
1E3E 78B8           4754                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4755                                             
1E40 E0             4756                                             movx            a,@dptr
1E41 F6             4757                                             mov                     @r0,a
1E42 08             4758                                             inc                     r0
1E43 A3             4759                                             inc                     dptr
1E44 E0             4760                                             movx            a,@dptr
1E45 F6             4761                                             mov                     @r0,a
1E46 08             4762                                             inc                     r0
1E47 A3             4763                                             inc                     dptr
1E48 E0             4764                                             movx            a,@dptr
1E49 F6             4765                                             mov                     @r0,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    76

1E4A 08             4766                                             inc                     r0
1E4B A3             4767                                             inc                     dptr
1E4C E0             4768                                             movx            a,@dptr
1E4D F6             4769                                             mov                     @r0,a
1E4E A3             4770                                             inc                     dptr
                    4771                                             
1E4F 78B8           4772                                             mov                     r0,#work
1E51 120000   F     4773                                             call            resar2
1E54 120402         4774                                             call            altof;->float;r2..r5
1E57 78B8           4775                                             mov                     r0,#work
1E59 120000   F     4776                                             call            saver2
                    4777     
1E5C 120000   F     4778                                             call            min4_hl
                    4779                                             ;call           min4_hl
                    4780     
1E5F 78D7           4781                                             mov                     r0,#copy_hl
1E61 E583           4782                                             mov                     a,dph
1E63 F6             4783                                             mov                     @r0,a
1E64 08             4784                                             inc                     r0
1E65 E582           4785                                             mov                     a,dpl
1E67 F6             4786                                             mov                     @r0,a
                    4787                                     
1E68 78D6           4788                                             mov                     r0,#chblok;volume
1E6A 7600           4789                                             mov                     @r0,#0
1E6C 120000   F     4790     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1E6F E582           4791                                             mov                     a,dpl
1E71 FF             4792                                             mov                     r7,a
1E72 E583           4793                                             mov                     a,dph
1E74 FE             4794                                             mov                     r6,a
                    4795     
1E75 78D7           4796                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1E77 E6             4797                                             mov                     a,@r0
1E78 F583           4798                                             mov                     dph,a
1E7A 08             4799                                             inc                     r0
1E7B E6             4800                                             mov                     a,@r0
1E7C F582           4801                                             mov                     dpl,a
                    4802                                             
1E7E C3             4803                                             clr                     c;-4
1E7F E582           4804                                             mov                     a,dpl
1E81 9404           4805                                             subb            a,#4
1E83 F582           4806                                             mov                     dpl,a
1E85 E583           4807                                             mov                     a,dph
1E87 9400           4808                                             subb            a,#0
1E89 F583           4809                                             mov                     dph,a;dptr-4
                    4810                                             ;;;;;;;;
1E8B 79D7           4811                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1E8D E583           4812                                                     mov             a,dph
1E8F F7             4813                                               mov           @r1,a
1E90 09             4814                                                     inc             r1
1E91 E582           4815                                                     mov             a,dpl
1E93 F7             4816                                                     mov             @r1,a
                    4817                                                     ;;;;;;;;;
1E94 C3             4818                                                     clr             c;пришли в начало блока?
1E95 E582           4819                                                     mov                     a,dpl
1E97 9F             4820                                                     subb            a,r7
1E98 FF             4821                                                     mov                     r7,a
1E99 7006           4822                                                     jnz                     nextmin
1E9B E583           4823                                                     mov                     a,dph
1E9D 9E             4824                                                     subb            a,r6
1E9E FE             4825                                                     mov                     r6,a
1E9F 601D           4826                                                     jz                      outmin;
                    4827                                                     
                    4828                                                     ;продолжаем сравнение
                    4829                                                     ;;;;;;;;;;;             
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    77

1EA1 78B8           4830     nextmin:        mov                     r0,#work
1EA3 120000   F     4831                                             call            resar2
                    4832                                             ;call           altof;->float;r2..r5
1EA6 120000   F     4833                                             call            move28;->r8..r11
1EA9 120000   F     4834                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4835     
1EAC 120402         4836                                             call            altof;->float;r2..r5
                    4837                                             
1EAF 1201D6         4838                                             call            flcmp
1EB2 5005           4839                                             jnc                     nomini
1EB4 78B8           4840                                             mov                     r0,#work;<
1EB6 120000   F     4841                                             call            saver2;r2..r5
1EB9 78D6           4842     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
1EBB 06             4843                                             inc                     @r0
1EBC 80AE           4844                                             jmp                     ming
                    4845     
1EBE 78B8           4846     outmin:         mov                     r0,#work;1ое измерение блока
1EC0 120000   F     4847                                             call            resar2
                    4848                                     ;       call            altof;->float;r2..r5
1EC3 120000   F     4849                                             call            move28;->r8..r11
1EC6 120000   F     4850                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4851     
1EC9 120402         4852                                             call            altof;->float;r2..r5
                    4853                                             
1ECC 1201D6         4854                                             call            flcmp
1ECF 5005           4855                                             jnc                     minivix
1ED1 78B8           4856                                             mov                     r0,#work;<
1ED3 120000   F     4857                                             call            saver2;r2..r5
                    4858                                             ;;;;;;;;;
                    4859     
1ED6 78B8           4860     minivix:        mov                     r0,#work
1ED8 120000   F     4861                                             call            resar2
                    4862     
                    4863                                             ;call           altof;->float
                    4864                                     
1EDB 900000   F     4865                                             mov                     dptr,#ch_10      
1EDE 120000   F     4866                                             call            ldc_ltemp
1EE1 1202B7         4867                                             call            fldiv
1EE4 120343         4868                                             call            ftol                            ;->
                             hex
                    4869                                             ;;;
1EE7 120000   F     4870                                             call            maform
1EEA 784F           4871                                             mov                     r0,#abin
1EEC 120000   F     4872                                             call            saver2
                    4873     ;;;;;;;;
                    4874                                             
1EEF 7853           4875                                             mov             r0,#adec
1EF1 7952           4876                                             mov             r1,#abin+3      ;hex->10
1EF3 120000   F     4877                                             call    bindec
                    4878                                     
1EF6 785C           4879                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1EF8 7949           4880                                             mov             r1,#bufind+9
1EFA 7F05           4881                                             mov             r7,#5
1EFC E6             4882     bufmin:                         mov             a,@r0
1EFD 2430           4883                                             add             a,#30h
1EFF F7             4884                                             mov             @r1,a
1F00 19             4885                                             dec             r1
1F01 18             4886                                             dec             r0
1F02 DFF8           4887                                             djnz    r7,bufmin
1F04 7844           4888                                             mov             r0,#bufind+4
1F06 762B           4889                                             mov             @r0,#2bh          
1F08 300202         4890                                             jnb             znmat,nozmin
1F0B 762D           4891                                             mov             @r0,#2dh
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    78

1F0D 434B05         4892     nozmin:         orl             bufind+11,#05h
1F10 22             4893                                             ret
                    4894     
                    4895     
                    4896     
                    4897     ;мин значение по по блоку
1F11                4898     vichmax:        
1F11 120000   F     4899                                             call            resa_hl;save_bl->dptr
                    4900                                             
                    4901                                             
                    4902     ;с конца блока адрес 2го измерение
1F14 120000   F     4903                                             call            min4_hl
                    4904                                             
1F17 78B8           4905                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4906                                             
1F19 E0             4907                                             movx            a,@dptr
1F1A F6             4908                                             mov                     @r0,a
1F1B 08             4909                                             inc                     r0
1F1C A3             4910                                             inc                     dptr
1F1D E0             4911                                             movx            a,@dptr
1F1E F6             4912                                             mov                     @r0,a
1F1F 08             4913                                             inc                     r0
1F20 A3             4914                                             inc                     dptr
1F21 E0             4915                                             movx            a,@dptr
1F22 F6             4916                                             mov                     @r0,a
1F23 08             4917                                             inc                     r0
1F24 A3             4918                                             inc                     dptr
1F25 E0             4919                                             movx            a,@dptr
1F26 F6             4920                                             mov                     @r0,a
1F27 A3             4921                                             inc                     dptr
                    4922                                             
1F28 78B8           4923                                             mov                     r0,#work
1F2A 120000   F     4924                                             call            resar2
1F2D 120402         4925                                             call            altof;->float;r2..r5
1F30 78B8           4926                                             mov                     r0,#work
1F32 120000   F     4927                                             call            saver2
                    4928     
1F35 120000   F     4929                                             call            min4_hl
                    4930                                     ;       call            min4_hl
                    4931     
1F38 78D7           4932                                             mov                     r0,#copy_hl
1F3A E583           4933                                             mov                     a,dph
1F3C F6             4934                                             mov                     @r0,a
1F3D 08             4935                                             inc                     r0
1F3E E582           4936                                             mov                     a,dpl
1F40 F6             4937                                             mov                     @r0,a
                    4938                                     
1F41 78D6           4939                                             mov                     r0,#chblok;volume
1F43 7600           4940                                             mov                     @r0,#0
1F45 120000   F     4941     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1F48 E582           4942                                             mov                     a,dpl
1F4A FF             4943                                             mov                     r7,a
1F4B E583           4944                                             mov                     a,dph
1F4D FE             4945                                             mov                     r6,a
                    4946     
1F4E 78D7           4947                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1F50 E6             4948                                             mov                     a,@r0
1F51 F583           4949                                             mov                     dph,a
1F53 08             4950                                             inc                     r0
1F54 E6             4951                                             mov                     a,@r0
1F55 F582           4952                                             mov                     dpl,a
                    4953                                             
1F57 C3             4954                                             clr                     c;-4
1F58 E582           4955                                             mov                     a,dpl
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    79

1F5A 9404           4956                                             subb            a,#4
1F5C F582           4957                                             mov                     dpl,a
1F5E E583           4958                                             mov                     a,dph
1F60 9400           4959                                             subb            a,#0
1F62 F583           4960                                             mov                     dph,a;dptr-4
                    4961                                             ;;;;;;;;
1F64 79D7           4962                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1F66 E583           4963                                                     mov             a,dph
1F68 F7             4964                                               mov           @r1,a
1F69 09             4965                                                     inc             r1
1F6A E582           4966                                                     mov             a,dpl
1F6C F7             4967                                                     mov             @r1,a
                    4968                                                     ;;;;;;;;;
1F6D C3             4969                                                     clr             c;пришли в начало блока?
1F6E E582           4970                                                     mov                     a,dpl
1F70 9F             4971                                                     subb            a,r7
1F71 FF             4972                                                     mov                     r7,a
1F72 7006           4973                                                     jnz                     nextmax
1F74 E583           4974                                                     mov                     a,dph
1F76 9E             4975                                                     subb            a,r6
1F77 FE             4976                                                     mov                     r6,a
1F78 601D           4977                                                     jz                      outmax;
                    4978                                                     
                    4979                                                     ;продолжаем сравнение
                    4980                                                     ;;;;;;;;;;;             
1F7A 78B8           4981     nextmax:        mov                     r0,#work
1F7C 120000   F     4982                                             call            resar2
                    4983                                             ;call           altof;->float;r2..r5
1F7F 120000   F     4984                                             call            move28;->r8..r11
1F82 120000   F     4985                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4986     
1F85 120402         4987                                             call            altof;->float;r2..r5
                    4988                                             
1F88 1201D6         4989                                             call            flcmp
1F8B 4005           4990                                             jc                      nomaxi
1F8D 78B8           4991                                             mov                     r0,#work;>
1F8F 120000   F     4992                                             call            saver2;r2..r5
1F92 78D6           4993     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
1F94 06             4994                                             inc                     @r0
1F95 80AE           4995                                             jmp                     maxg
1F97 78B8           4996     outmax:         mov                     r0,#work;1ое измерение блока
1F99 120000   F     4997                                             call            resar2
                    4998                                     ;       call            altof;->float;r2..r5
1F9C 120000   F     4999                                             call            move28;->r8..r11
1F9F 120000   F     5000                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    5001     
1FA2 120402         5002                                             call            altof;->float;r2..r5
                    5003                                             
1FA5 1201D6         5004                                             call            flcmp
1FA8 4005           5005                                             jc                      maxvix
1FAA 78B8           5006                                             mov                     r0,#work;>
1FAC 120000   F     5007                                             call            saver2;r2..r5
                    5008                                             ;;;;;;;;;
                    5009     
1FAF 020000   F     5010     maxvix:         jmp             minivix
                    5011     
                    5012     
                    5013     
                    5014     ;$include (d:\amp\subr6.asm) 
                +1  5015     
                +1  5016     ;тест интерфейса
1FB2            +1  5017     testrs: ;jb     p0.3,goprogr
1FB2 C2AC       +1  5018                                     clr     IE.4
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    80

1FB4 759955     +1  5019     test1:  mov     SBUF0,#55h
1FB7 3099FD     +1  5020                                     jnb     SCON0.1,$
1FBA 78B8       +1  5021                                     mov     r0,#work;chtest
1FBC 76BE       +1  5022                                     mov     @r0,#190d;60
                +1  5023     
1FBE 309825     +1  5024     test01: jnb     SCON0.0,test2
1FC1 E599       +1  5025                                     mov     a,SBUF0
1FC3 B45512     +1  5026                                     cjne    a,#55h,test3
1FC6 C299       +1  5027     test4:  clr     SCON0.1
1FC8 C298       +1  5028                                     clr     SCON0.0
1FCA 7D0A       +1  5029                                     mov     r5,#10
1FCC 7840       +1  5030                                     mov     r0,#bufind              ;- - - -
1FCE 762D       +1  5031     test04: mov     @r0,#2dh
1FD0 08         +1  5032                                     inc     r0
1FD1 DDFB       +1  5033                                     djnz    r5,test04
1FD3 120000   F +1  5034                                     call    ind
1FD6 80DC       +1  5035                                     jmp     test1
1FD8            +1  5036     test3:  
1FD8 753933     +1  5037                                     mov     nuerr,#33h
1FDB 120000   F +1  5038                                     call    error           ;на кран прибора ERR 3
                +1  5039                             
1FDE 120000   F +1  5040                                     call    ind;
1FE1 120000   F +1  5041                                     call    z_01s           ;100ms
1FE4 80E0       +1  5042                                     jmp     test4
1FE6 78B8       +1  5043     test2:  mov     r0,#work;chtest
1FE8 B60002     +1  5044                                     cjne    @r0,#0,test02
1FEB 8003       +1  5045                                     jmp     test5
1FED 16         +1  5046     test02: dec     @r0
1FEE 80CE       +1  5047                                     jmp     test01
1FF0 120000   F +1  5048     test5:  call    z_1ms           ;1ms
1FF3 C299       +1  5049                                     clr     SCON0.1
                +1  5050             
1FF5 753933     +1  5051                                     mov     nuerr,#33h
1FF8 120000   F +1  5052                                     call    error           ;на кран прибора ERR 3
                +1  5053                                     
1FFB 120000   F +1  5054                                     call    ind
1FFE 120000   F +1  5055                                     call    z_01s           ;100ms
2001 80B1       +1  5056                                     jmp     test1   
                +1  5057     
                +1  5058     
                +1  5059     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
2003 75E700     +1  5060      ind:   mov             EIE2,#00H;mov   IE,#00h
2006 120000   F +1  5061                     call    mign
2009 7840       +1  5062                      mov            r0,#bufind;+11
200B 7F0C       +1  5063                      mov            r7,#12
200D C287       +1  5064      nexin: clr             p0.7;6
200F E6         +1  5065                     mov             a,@r0
2010 F59B       +1  5066                     mov             SPI0DAT,a
2012 20FBFD     +1  5067                     jb              TXBSY,$
2015 D287       +1  5068                     setb    p0.7;6
2017 120000   F +1  5069                     call    z_9             ;25mks
201A 08         +1  5070                     inc             r0;dec          r0
201B DFF0       +1  5071                     djnz    r7,nexin
201D 75E730     +1  5072                     mov             EIE2,#30H;mov   IE,#80h
2020 22         +1  5073                ret
                +1  5074     
                +1  5075     
2021 7A08       +1  5076     zapadc:   mov R2,#8
2023 D297       +1  5077     sdv:      setb P1.7
2025 33         +1  5078               rlc A
2026 9296       +1  5079                     mov P1.6,C
2028 120000   F +1  5080                     call tim2
                +1  5081                                     
202B C297       +1  5082                     clr P1.7
202D 120000   F +1  5083                     call tim2
2030 DAF1       +1  5084                     djnz R2,sdv
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    81

2032 D296       +1  5085                     setb P1.6
2034 22         +1  5086                     ret
                +1  5087     
2035 7A08       +1  5088     chtadc:   mov R2,#8
2037 D297       +1  5089     sdv1:     setb P1.7
2039 120000   F +1  5090               call tim2
203C C297       +1  5091                     clr P1.7
203E A296       +1  5092                     mov C,P1.6
2040 33         +1  5093                     rlc A
2041 120000   F +1  5094                     call tim2
2044 DAF1       +1  5095                     djnz R2,sdv1
2046 22         +1  5096                     ret
                +1  5097     
2047 7E30       +1  5098     tim:      mov R6,#30h;38h
2049 DEFE       +1  5099     tim1:     djnz R6,tim1
204B 22         +1  5100               ret
                +1  5101               
204C 7E10       +1  5102     tim2:     mov R6,#10h;14h
204E DEFE       +1  5103     tim3:     djnz R6,tim3
2050 22         +1  5104               ret
                +1  5105     
                +1  5106     ;запись из acc
2051 C3         +1  5107     write_x1: clr   c
2052            +1  5108     writeD_x1:
2052 92B1       +1  5109                       mov P3.1,c        ;запись
2054 F5A0       +1  5110               mov P2,A
2056 D2B3       +1  5111                       setb P3.3
2058 120000   F +1  5112                       call z_5
205B C2B3       +1  5113                       clr P3.3
205D 75A0FF     +1  5114                       mov P2,#0FFh
2060 22         +1  5115                       ret
                +1  5116     
                +1  5117     ;чтение в acc
2061 C3         +1  5118     read_x2:  clr   c  
2062 92B1       +1  5119               mov P3.1,c        ;чтение
2064 D2B2       +1  5120               setb P3.2
2066 D2B3       +1  5121                       setb P3.3
2068 120000   F +1  5122                     call z_5
206B E5A0       +1  5123                       mov A,P2
206D C2B3       +1  5124                       clr P3.3
206F C2B2       +1  5125                       clr P3.2
2071 22         +1  5126                       ret
                +1  5127     
                +1  5128     
2072 120000   F +1  5129     loop:     call read_x2;x2    ;ожидание флага готовности
2075 20E7FA     +1  5130                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
2078 22         +1  5131                        ret           ;возврат, если бит А(7)<>1
                +1  5132                                      
                +1  5133                                        
                +1  5134     
                +1  5135     
                +1  5136     
                +1  5137     
                +1  5138     
                +1  5139     
                +1  5140     
                +1  5141     ;принимаемый байт в acc
                +1  5142     ;прием байта последовательным кодом старшими разрядами вперед
2079 7A08       +1  5143     read:    mov R2,#8
207B C297       +1  5144     re1:     clr P1.7;P1.2
207D 120000   F +1  5145              call tim2        ;5mks
2080 A294       +1  5146                     mov C,P1.4;P1.0
2082 33         +1  5147                     rlc A           
2083 D297       +1  5148                     setb P1.7;P1.2
2085 120000   F +1  5149                     call tim2
2088 DAF1       +1  5150                     djnz R2,re1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    82

208A 22         +1  5151                     ret
                +1  5152     
                +1  5153      ;in r0-count   
                +1  5154     ;r10,r11-значение с котоым сравнивается счетчик
                +1  5155     ;r2..r5 -значение счетчика
208B            +1  5156     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
208B E6         +1  5157                     mov                     a,@r0
208C FC         +1  5158                     mov                     r4,a
208D 08         +1  5159                     inc                     r0
208E E6         +1  5160                     mov                     a,@r0
208F FD         +1  5161                     mov                     r5,a
2090 7B00       +1  5162                     mov                     r3,#0
2092 7A00       +1  5163                     mov                     r2,#0
2094 750800     +1  5164                     mov                     r8,#0;clr                       r8
2097 750900     +1  5165                     mov                     r9,#0;clr                       r9
209A 120000   F +1  5166                     call            lcmp
209D 22         +1  5167                     ret
                +1  5168     
                +1  5169     
                +1  5170     ;in-r1-count
209E            +1  5171     chdec:          ;mov            r1,#chavt               ;chavt-1
209E E7         +1  5172                             mov             a,@r1
209F FC         +1  5173                             mov             r4,a
20A0 09         +1  5174                             inc             r1
20A1 E7         +1  5175                             mov             a,@r1
20A2 FD         +1  5176                             mov             r5,a
20A3 C202       +1  5177                             clr             rr2
20A5 C203       +1  5178                             clr             rr3
20A7 900000   F +1  5179                             mov             dptr,#ch1        
20AA 120000   F +1  5180                             call    ldc_ltemp
20AD 120000   F +1  5181                             call    lsub
20B0 ED         +1  5182                             mov             a,r5
20B1 F7         +1  5183                             mov             @r1,a
20B2 19         +1  5184                             dec             r1
20B3 EC         +1  5185                             mov             a,r4
20B4 F7         +1  5186                             mov             @r1,a
                +1  5187                             
20B5 22         +1  5188                             ret      
                +1  5189     
                +1  5190     
                +1  5191     
                +1  5192     
20B6            +1  5193     loadUS: ;если идет тест измерения ус восстановить для теста
20B6 201533     +1  5194                                     jb              biteizm,yestest
20B9 79AE       +1  5195                                             mov             r1,#diap
20BB E7         +1  5196                             mov             a,@r1
20BC 23         +1  5197                             rl              a;*2
20BD FC         +1  5198                             mov             r4,a                    ;save a
20BE 900000   F +1  5199                             mov             dptr,#tabus
20C1 93         +1  5200                             movc    a,@a+dptr
20C2 FA         +1  5201                             mov             r2,a                    ;high byte
20C3 E584       +1  5202                             mov             a,p4
20C5 5401       +1  5203                             anl             a,#01
20C7 4A         +1  5204                             orl             a,r2
20C8 F584       +1  5205                             mov             p4,a
20CA 0C         +1  5206                             inc             r4
20CB EC         +1  5207                             mov             a,r4
20CC 93         +1  5208                             movc    a,@a+dptr
20CD FB         +1  5209                             mov             r3,a                    ;low byte
20CE E585       +1  5210                             mov             a,p5
20D0 5401       +1  5211                             anl             a,#01
20D2 4B         +1  5212                             orl             a,r3
20D3 F585       +1  5213                             mov             p5,a
20D5 799A       +1  5214                             mov             r1,#parT
20D7 B7010E     +1  5215                             cjne    @r1,#1,bret
20DA 79AE       +1  5216                             mov             r1,#diap                  ;10s (parT=1)
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    83

20DC 7405       +1  5217                             mov             a,#5                      ;10-8..10-11 p4.1=1
20DE C3         +1  5218                             clr             c
20DF 97         +1  5219                             subb    a,@r1
20E0 5006       +1  5220                             jnc             bret
20E2 E584       +1  5221                             mov             a,p4
20E4 4402       +1  5222                             orl             a,#02
20E6 F584       +1  5223                             mov             p4,a                     ;10-8..10-11 p4.1=1
20E8 120000   F +1  5224     bret:      call          louizm         ;us если вкл кн ИЗМЕР
20EB 22         +1  5225                             ret
20EC            +1  5226     yestest:
20EC 120000   F +1  5227                             call            lotpus          ;ус теста измерения
20EF 22         +1  5228                             ret
                +1  5229                             
                +1  5230     ;загр ус для кор 0
                +1  5231     ;dptr-
20F0 E4         +1  5232     lospus:         clr             a
                +1  5233                             ;movc   a,@a+dptr
                +1  5234                             ;mov            r2,a                    ;high byte
                +1  5235                             ;mov            a,p4
                +1  5236                             ;anl            a,#01
                +1  5237                             ;orl            a,r2
                +1  5238                             ;mov            p4,a
                +1  5239                             ;inc            dptr
20F1 E4         +1  5240                             clr             a
20F2 93         +1  5241                             movc    a,@a+dptr
20F3 FB         +1  5242                             mov             r3,a                    ;low byte
20F4 E585       +1  5243                             mov             a,p5
20F6 54BF       +1  5244                             anl             a,#0bfh;01
20F8 4B         +1  5245                             orl             a,r3
20F9 F585       +1  5246                             mov             p5,a
20FB 22         +1  5247                             ret
                +1  5248     
20FC 80         +1  5249     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5250     
                +1  5251     ;us кнопка измерения выкл
20FD 88D6       +1  5252     tabus:     db           88h,0d6h         ;10-2
20FF 88F6       +1  5253                             db      88h,0f6h         ;10-3
2101 88D6       +1  5254                             db              88h,0d6h         ;10-4
2103 88F6       +1  5255                             db              88h,0f6h         ;10-5
2105 9AD6       +1  5256                             db      9ah,0d6h         ;10-6
2107 9AF6       +1  5257                             db              9ah,0f6h         ;10-7
2109 ACD6       +1  5258                             db              0ach,0d6h        ;10-8
210B ACF6       +1  5259                             db      0ach,0f6h        ;10-9
210D C8D6       +1  5260                             db              0c8h,0d6h        ;10-10
210F C8F6       +1  5261                             db              0c8h,0f6h        ;10-11
                +1  5262     
2111            +1  5263     tabt11: 
2111 66E6       +1  5264                             db              66h,0e6h;10-11
2113            +1  5265     tabt9:  
2113 32E6       +1  5266                             db              32h,0e6h;10-9
2115            +1  5267     tabt7:  
2115 18EE       +1  5268                             db              18h,0eeh;10-7
                +1  5269     
                +1  5270      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5271     ;в зав от parT (Tизм)
2117 79B7       +1  5272     loadT:          mov             r1,#load;parT
2119 7840       +1  5273     lolevT:         mov             r0,#bufind+0
211B 7B0A       +1  5274                             mov             r3,#10
211D 75F00A     +1  5275                             mov             b,#10
2120 E7         +1  5276                             mov             a,@r1
2121 A4         +1  5277                             mul             ab
2122 FC         +1  5278                             mov             r4,a                    ;save a
2123 900000   F +1  5279                             mov             dptr,#textT
2126 93         +1  5280             lod1:   movc    a,@a+dptr
2127 F6         +1  5281                             mov             @r0,a
2128 08         +1  5282                             inc             r0
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    84

2129 0C         +1  5283                             inc             r4
212A EC         +1  5284                             mov             a,r4
212B DBF9       +1  5285                             djnz    r3,lod1
212D 534B03     +1  5286                             anl                     bufind+11,#03h          ;гашение точек
2130 22         +1  5287                             ret     
                +1  5288     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5289     ;dptr-адр строки текста         
2131            +1  5290     lotext:         
2131 7B0A       +1  5291                             mov             r3,#10
2133 7840       +1  5292                             mov             r0,#bufind+0
2135 E4         +1  5293     lodt:           clr             a
2136 93         +1  5294                             movc    a,@a+dptr
2137 F6         +1  5295                             mov             @r0,a
2138 08         +1  5296                             inc             r0
2139 A3         +1  5297                             inc             dptr
213A DBF9       +1  5298                             djnz    r3,lodt
213C 534B03     +1  5299                             anl                     bufind+11,#03h          ;гашение точек
213F 22         +1  5300                             ret                                     
                +1  5301     
                +1  5302     
                +1  5303     
                +1  5304     
                +1  5305      ;задержка 100 мкс
2140 7978       +1  5306     z_100:    mov R1,#78h     ;загрузка первого числа
2142 7A02       +1  5307     z100:     mov R2,#2h     ;загрузка второго числа
2144 DAFE       +1  5308     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
2146 D9FA       +1  5309               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
2148 22         +1  5310               ret           
                +1  5311     
                +1  5312     ;задержка 34 мкс
2149 7B8B       +1  5313     z_5:      mov R3,#8Bh      ;загрузка числа
214B DBFE       +1  5314     ct:       djnz R3,ct
214D 22         +1  5315               ret
                +1  5316     
                +1  5317     ;задержка 15 мс
214E 79FA       +1  5318     z_15:     mov R1,#0FAh    ;загрузка первого числа
2150 7AED       +1  5319     z15:      mov R2,#0EDh   ;загрузка второго числа
2152 DAFE       +1  5320     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
2154 D9FA       +1  5321               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
2156 22         +1  5322               ret   
                +1  5323                                               
                +1  5324      ;задержка 1 мс
2157 7910       +1  5325     z_1ms:     mov R1,#10h     
2159 7AED       +1  5326     ss1:       mov R2,#0EDh    
215B DAFE       +1  5327                djnz R2, $    
215D D9FA       +1  5328                djnz R1, ss1   
215F 22         +1  5329                ret   
                +1  5330     
                +1  5331      ;????????
                +1  5332     ;задержка 1с
2160 7D1F       +1  5333     z_1s:   mov             r5,#01fh 
2162 7EFF       +1  5334     co2s:   mov     R6,#0ffh     
2164 7FFF       +1  5335     z1s:     mov    R7,#0ffh     
2166 DFFE       +1  5336     co1s:   djnz    R7, co1s        
2168 DEFA       +1  5337             djnz    R6, z1s 
216A DDF6       +1  5338                     djnz    r5,co2s
216C 22         +1  5339               ret
                +1  5340     ;задержка 0,1с
216D 7D03       +1  5341     z_01s:           mov            r5,#03h 
216F 7EFF       +1  5342     co02s:          mov     R6,#0ffh     
2171 7FFF       +1  5343     z01s:           mov     R7,#0ffh     
2173 DFFE       +1  5344                             djnz    R7, $   
2175 DEFA       +1  5345                     djnz    R6, z01s 
2177 DDF6       +1  5346                             djnz    r5,co02s
2179 22         +1  5347                      ret
                +1  5348                                               
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    85

                +1  5349     ;задержка 0,5с
217A 7D0D       +1  5350     z_05s:           mov            r5,#0dh 
217C 7EFF       +1  5351     co05s:                  mov     R6,#0ffh     
217E 7FFF       +1  5352     z05s:           mov     R7,#0ffh     
2180 DFFE       +1  5353                                     djnz    R7, $   
2182 DEFA       +1  5354                     djnz    R6, z05s 
2184 DDF6       +1  5355                                             djnz    r5,co05s
2186 22         +1  5356                      ret                                                     
                +1  5357                                                               
2187 000007FF   +1  5358     chzap:  db      00,00,07h,0ffh             
218B 00000000   +1  5359     ch0:    db      00,00,00,00
218F 0000000A   +1  5360     ch10:   db      00,00,00,0ah                            ;10
2193 00000005   +1  5361     ch5:    db      00,00,00,05                                             ;5
2197 00000004   +1  5362     ch4:    db      00,00,00,04                                             ;4
219B 000003B9   +1  5363     ch954:  db 00,00,03,0b9h                                                ;954
219F 000003E8   +1  5364     ch10000:        db 00,00,03h,0e8h                                               ;10000
21A3 00000064   +1  5365     ch100:  db 00,00,00,64h ;100
21A7 00000002   +1  5366     ch2:    db      00,00,00,02                                             
                +1  5367     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5368     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5369     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
21AB 00000001   +1  5370     ch1:    db  00,00,00,01
21AF 49742400   +1  5371     ch_mln: db      49h,74h,24h,00;10*6
21B3 3F800000   +1  5372     ch_1:   db      3fh,80h,00,00   
21B7 40000000   +1  5373     ch_2:   db      40h,00,00,00;2
21BB 40800000   +1  5374     ch_4:   db      40h,80h,00,00;4 
21BF 40A00000   +1  5375     ch_5:   db      40h,0a0h,00,00;5
21C3 40E00000   +1  5376     ch_7:   db      40h,0e0h,00,00;7
                +1  5377             
21C7 3F741EDF   +1  5378     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
21CB 47C35000   +1  5379     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
21CF 3F800347   +1  5380     KD:             db      3fh,80h,03h,47h;1,0001
21D3 48435000   +1  5381     CH2tho: db      48h,43h,50h,00;200000
21D7 4856D800   +1  5382     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
21DB 4856D800   +1  5383     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
21DF 461C4000   +1  5384     ch_10th:db  46h,1ch,40h,00;10000-2710h
21E3 41200000   +1  5385     ch_10:  db      41h,20h,00,00;10d
21E7 48742400   +1  5386     ch_250: db      48h,74h,24h,00;250000
21EB 000186A0   +1  5387     chk:            db      00,01,86h,0a0h;
21EF 00000320   +1  5388     ch320h: db      00,00,03h,20h;320h=800d
21F3 00000150   +1  5389     ch150h: db      00,00,01h,50h;150h
21F7 C0400000   +1  5390     ch_m3:  db      0c0h,40h,00,00;-3
                +1  5391     
                +1  5392     
                +1  5393     ;r1- мл байт 2х байтного числа
21FB            +1  5394     tenmin:         ;-10
21FB C3         +1  5395                             clr             c
21FC E7         +1  5396                     mov             a,@r1
21FD 9405       +1  5397                             subb    a,#5;10
21FF F7         +1  5398                             mov             @r1,a
2200 19         +1  5399                             dec             r1
2201 E7         +1  5400                             mov             a,@r1
2202 9400       +1  5401                             subb    a,#0
2204 F7         +1  5402                             mov             @r1,a
2205 22         +1  5403                             ret
                +1  5404       ;r0-обнуление ячеек памяти  
2206 7F04       +1  5405       clear4:        mov    r7,#4
2208 E4         +1  5406                             clr             a
2209 F6         +1  5407       cl4:          mov             @r0,a
220A 08         +1  5408                             inc             r0
220B DFFC       +1  5409                             djnz    r7,cl4
220D 22         +1  5410                             ret     
                +1  5411     
                +1  5412      ;r0-обнуление ячеек памяти 
                +1  5413      ;R7- 
220E            +1  5414       clearN:        
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    86

220E E4         +1  5415                             clr             a
220F F6         +1  5416       cl4N:         mov             @r0,a
2210 08         +1  5417                             inc             r0
2211 DFFC       +1  5418                             djnz    r7,cl4N
2213 22         +1  5419                             ret     
                +1  5420     
                +1  5421       ;чтение номера байта с индикатора(2байта)
                +1  5422     ;bufind+8..bufind+9
                +1  5423     ;-  - - -
                +1  5424     ;- - - - - - - - - -
                +1  5425     ;adec..adec+9
                +1  5426     ;ст            мл
2214 7848       +1  5427     upak2:  mov             r0,#bufind+8;
2216 795C       +1  5428                     mov             r1,#adec+9
2218 7F02       +1  5429                     mov             r7,#2;2bait
221A C3         +1  5430     upa2:   clr             c
221B E6         +1  5431                     mov             a,@r0
221C 9430       +1  5432                     subb    a,#30h
221E F7         +1  5433                     mov             @r1,a
221F 18         +1  5434                     dec             r0
2220 19         +1  5435                     dec             r1
2221 DFF7       +1  5436                     djnz    r7,upa2
2223 22         +1  5437                     ret  
                +1  5438     
                +1  5439     
                +1  5440         
                +1  5441      ;bufind+4..bufind+9
                +1  5442     ;-  - - -
                +1  5443     ;- - - - - - - - - -
                +1  5444     ;adec..adec+9
                +1  5445     ;ст            мл
2224 7849       +1  5446     upak:   mov             r0,#bufind+9;
2226 795C       +1  5447                     mov             r1,#adec+9
2228 7F06       +1  5448                     mov             r7,#6
222A C3         +1  5449     upa:    clr             c
222B E6         +1  5450                     mov             a,@r0
222C 9430       +1  5451                     subb    a,#30h
222E F7         +1  5452                     mov             @r1,a
222F 18         +1  5453                     dec             r0
2230 19         +1  5454                     dec             r1
2231 DFF7       +1  5455                     djnz    r7,upa
2233 22         +1  5456                     ret
                +1  5457     
                +1  5458      ;чтение номера байта с индикатора(3байта)
                +1  5459     ;bufind+3..bufind+9
                +1  5460     ;-  - - -
                +1  5461     ;- - - - - - - - - -
                +1  5462     ;adec..adec+9
                +1  5463     ;ст            мл
2234 7849       +1  5464     upak3:  mov             r0,#bufind+9;
2236 795C       +1  5465                     mov             r1,#adec+9
2238 7F03       +1  5466                     mov             r7,#3;3bait
223A C3         +1  5467     upa1:   clr             c
223B E6         +1  5468                     mov             a,@r0
223C 9430       +1  5469                     subb    a,#30h
223E F7         +1  5470                     mov             @r1,a
223F 18         +1  5471                     dec             r0
2240 19         +1  5472                     dec             r1
2241 DFF7       +1  5473                     djnz    r7,upa1
2243 22         +1  5474                     ret
                +1  5475     
                +1  5476     ;вых-r2,r3-адрес ячее памяти прогр
2244            +1  5477     findkoef:
2244 79AE       +1  5478                                     mov             r1,#diap
2246 E7         +1  5479                                     mov             a,@r1
2247 23         +1  5480                                     rl              a                                          
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    87

                                          ;diap*2(2bait )
2248 FC         +1  5481                                     mov             r4,a                                    ;sa
                             ve
2249 900000   F +1  5482                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5483                                     
224C 93         +1  5484                                     movc    a,@a+dptr                       ;ст байт
224D FA         +1  5485                                     mov             r2,a
224E A3         +1  5486                                     inc             dptr
224F EC         +1  5487                                     mov             a,r4
2250 93         +1  5488                                     movc    a,@a+dptr
2251 FB         +1  5489                                     mov             r3,a                    ;мл байт
2252 22         +1  5490                                     ret
                +1  5491     ;r2..r5 в опр яч внешн озу
2253            +1  5492     findext:
2253 79AE       +1  5493                                     mov             r1,#diap
2255 E7         +1  5494                                     mov             a,@r1
2256 23         +1  5495                                     rl              a                                          
                                          ;diap*2(2bait )
2257 23         +1  5496                                     rl              a                                          
                                          ;diap*2(2bait )
2258 F9         +1  5497                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5498                                     
2259 22         +1  5499                                     ret
                +1  5500     
                +1  5501     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5502     ;(5000h..5027h)
225A 5000       +1  5503     diKDw:  dw              5000h                   ;10-2
225C 5004       +1  5504                                     dw              5004h                   ;10-3
225E 5008       +1  5505                                     dw              5008h                   ;10-4
2260 500C       +1  5506                                     dw              500ch                   ;10-5
2262 5010       +1  5507                                     dw              5010h                   ;10-6
2264 5014       +1  5508                                     dw              5014h                   ;10-7
2266 5018       +1  5509                                     dw              5018h                   ;10-8
2268 501C       +1  5510                                     dw              501ch                   ;10-9
226A 5020       +1  5511                                     dw              5020h                   ;10-10
226C 5024       +1  5512                                     dw              5024h                   ;10-11
226E 5028       +1  5513     dipar:  dw              5028h                   ;parol
2270 502C       +1  5514     diKm:           dw              502ch                   ;Km для теста измерения
2272 000186A0   +1  5515     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5516     
2276 AA08       +1  5517     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
2278 AB09       +1  5518                                             mov     r3,ltemp+1
227A AC0A       +1  5519                                             mov     r4,ltemp+2
227C AD0B       +1  5520                                             mov     r5,ltemp+3
227E 22         +1  5521                                             ret
                +1  5522     ;bufind+4..bufind+9
                +1  5523     ;-  - - -
                +1  5524     ;- - - - - - - - - -
                +1  5525     ;adec..adec+9
                +1  5526     ;ст            мл
227F 7847       +1  5527     upakA:  mov             r0,#bufind+7;
2281 795C       +1  5528                     mov             r1,#adec+9
2283 7F04       +1  5529                     mov             r7,#4
2285 C3         +1  5530     upaa4:  clr             c
2286 E6         +1  5531                     mov             a,@r0
2287 9430       +1  5532                     subb    a,#30h
2289 F7         +1  5533                     mov             @r1,a
228A 18         +1  5534                     dec             r0
228B 19         +1  5535                     dec             r1
228C DFF7       +1  5536                     djnz    r7,upaa4
228E 22         +1  5537                     ret
                +1  5538     
                +1  5539     ;bufind+4..bufind+9
                +1  5540     ;-  - - -
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    88

                +1  5541     ;- - - - - - - - - -
                +1  5542     ;adec..adec+9
                +1  5543     ;ст            мл
228F 7848       +1  5544     upakB:  mov             r0,#bufind+8;
2291 795C       +1  5545                     mov             r1,#adec+9
2293 7F05       +1  5546                     mov             r7,#5
2295 C3         +1  5547     upab:   clr             c
2296 E6         +1  5548                     mov             a,@r0
2297 9430       +1  5549                     subb    a,#30h
2299 F7         +1  5550                     mov             @r1,a
229A 18         +1  5551                     dec             r0
229B 19         +1  5552                     dec             r1
229C DFF7       +1  5553                     djnz    r7,upab
229E C21B       +1  5554                     clr                     bitznB
22A0 E543       +1  5555                     mov             a,bufind+3
22A2 B42D02     +1  5556                     cjne            a,#2dh,abret
22A5 D21B       +1  5557                     setb            bitznB
22A7            +1  5558     abret:
22A7 22         +1  5559                     ret
22A8            +1  5560     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
22A8 4E6E6AA8   +1  5561                                             db      4eh,6eh,6ah,0a8h;10**9
22AC 43FA0000   +1  5562     CH_500:         db              43h,0fah,00,00;1fah=500
22B0 4856D800   +1  5563     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
22B4 49742400   +1  5564     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5565     
                +1  5566     
                +1  5567     
                +1  5568     ;управление AD7731
                +1  5569     ;r4=b1 r5=b2
22B8            +1  5570     iniacp: ;управление AD7731
22B8 7403       +1  5571                             mov             a,#03
                +1  5572     
22BA 120000   F +1  5573                             call    write
22BD EC         +1  5574                             mov             a,r4;#80h
22BE 120000   F +1  5575                             call    write
22C1 ED         +1  5576                             mov             a,r5;#04
22C2 120000   F +1  5577                             call    write
22C5 7402       +1  5578                             mov             a,#02
22C7 120000   F +1  5579                             call    write
22CA 74A1       +1  5580                             mov             a,#0a1h
22CC 120000   F +1  5581                             call    write
22CF 7474       +1  5582                             mov             a,#74h
22D1 120000   F +1  5583                             call    write
22D4 2095FD     +1  5584                             jb              p1.5,$;p1.3,$
22D7 7402       +1  5585                             mov             a,#02
22D9 120000   F +1  5586                             call    write
22DC 7481       +1  5587                             mov             a,#81h
22DE 120000   F +1  5588                             call    write
22E1 7474       +1  5589                             mov             a,#74h
22E3 120000   F +1  5590                             call    write
22E6 2095FD     +1  5591                             jb              p1.5,$;p1.3,$
22E9 7402       +1  5592                             mov             a,#02
22EB 120000   F +1  5593                             call    write
22EE 7421       +1  5594                             mov             a,#21h
22F0 120000   F +1  5595                             call    write
22F3 7474       +1  5596                             mov             a,#74h
22F5 120000   F +1  5597                             call    write
22F8 22         +1  5598                             ret
                +1  5599                             ;;;;;;;;;;;;;;;;
                +1  5600     ;;;;;;;;;;;;;;;;;
                +1  5601     ;;;;;;;;;;;;;;;;;
22F9 0000       +1  5602     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
22FB 6000       +1  5603                                     db              60h,00h;40h,04h         ;10s
22FD 6000       +1  5604                                     db              60h,00;40h,04h          ;1s
22FF 6000       +1  5605                                     db              60h,00h;40h,04h         ;0,1s
2301 6000       +1  5606                                     db              60h,00h;20h,04h         ;50ms
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    89

2303 6000       +1  5607                                     db              60h,00h;20h,04h          ;10ms
2305 1332       +1  5608                                     db              13h,32h         ;2ms
                +1  5609     
                +1  5610     ;загр В1,В2 в завис от Т                                
2307 799A       +1  5611     loab12:                 mov             r1,#parT
2309 900000   F +1  5612                                     mov             dptr,#tabB1_2
230C E7         +1  5613                                     mov             a,@r1
230D 23         +1  5614                                     rl              a;*2
230E FF         +1  5615                                     mov             r7,a                    ;save a
230F 93         +1  5616                                     movc    a,@a+dptr
2310 FC         +1  5617                                     mov             r4,a   ;b1
2311 0F         +1  5618                                     inc             r7
2312 EF         +1  5619                                     mov             a,r7
2313 93         +1  5620                                     movc    a,@a+dptr
2314 FD         +1  5621                                     mov             r5,a
                +1  5622                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5623                             
2315 22         +1  5624                                     ret
                +1  5625     
                +1  5626     
2316 7852       +1  5627     loadr2: mov             r0,#abin+3              ;r2..r5
2318 E6         +1  5628                     mov             a,@r0                   ; ст мл   
2319 FA         +1  5629                     mov             r2,a
231A 18         +1  5630                     dec             r0
231B E6         +1  5631                     mov             a,@r0
231C FB         +1  5632                     mov             r3,a
231D 18         +1  5633                     dec             r0
231E E6         +1  5634                     mov             a,@r0
231F FC         +1  5635                     mov             r4,a
2320 18         +1  5636                     dec             r0
2321 E6         +1  5637                     mov             a,@r0
2322 FD         +1  5638                     mov             r5,a
2323 22         +1  5639                     ret
                +1  5640                                             
                +1  5641      ;;;;;;;;;;;;;;;;;;;      
                +1  5642      ;загрузка KD в зависимости от диап изм  
                +1  5643      ;koef->r8..r11
2324 78AE       +1  5644     loadKD:                 mov             r0,#diap
2326 E6         +1  5645                                     mov             a,@r0
2327 900000   F +1  5646                                     mov             dptr,#diKDn
232A 75F004     +1  5647                                     mov             b,#4
232D A4         +1  5648                                     mul             ab
232E FF         +1  5649                                     mov             r7,a;save
232F 93         +1  5650                                     movc    a,@a+dptr
2330 F508       +1  5651                                     mov             r8,a
2332 A3         +1  5652                                     inc             dptr
2333 EF         +1  5653                                     mov             a,r7
2334 93         +1  5654                                     movc    a,@a+dptr
2335 F509       +1  5655                                     mov             r9,a
2337 A3         +1  5656                                     inc             dptr
2338 EF         +1  5657                                     mov             a,r7
2339 93         +1  5658                                     movc    a,@a+dptr
233A F50A       +1  5659                                     mov             r10,a
233C A3         +1  5660                                     inc             dptr
233D EF         +1  5661                                     mov             a,r7
233E 93         +1  5662                                     movc    a,@a+dptr
233F F50B       +1  5663                                     mov             r11,a
2341 22         +1  5664                                     ret
                +1  5665     
2342 3F506B7B   +1  5666      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
2346 3F507FCC   +1  5667                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
234A 3F4F9D0B   +1  5668                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
234E 3F4FE869   +1  5669                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    90

2352 3F50294A   +1  5670                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
2356 3F50639E   +1  5671                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
235A 3F4BC9F0   +1  5672                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
235E 3F4C063B   +1  5673                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
2362 3F50EFDD   +1  5674                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
2366 3F512AD9   +1  5675                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5676     
236A 00000039   +1  5677     ch57:   db      00,00,00,39h;57
236E 00000014   +1  5678     ch20:   db      00,00,00,14h;20
                +1  5679     
                +1  5680     ;загр ус для тестов ацп 
                +1  5681     ;dptr-
2372 78B1       +1  5682     lotpus: mov             r0,#vichR
2374 B6210D     +1  5683                                     cjne    @r0,#21h,te22
2377 900000   F +1  5684                                     mov                     dptr,#tabt11;заслать ус 11А
237A E4         +1  5685     lotp:           clr             a
237B 93         +1  5686                             movc    a,@a+dptr                               ;high byte
237C F584       +1  5687                             mov             p4,a
237E A3         +1  5688                             inc             dptr
237F E4         +1  5689                             clr             a
2380 93         +1  5690                             movc    a,@a+dptr                               ;low byte
2381 F585       +1  5691                             mov             p5,a
2383 22         +1  5692                             ret
2384 B62205     +1  5693     te22:                   cjne    @r0,#22h,te23
2387 900000   F +1  5694                             mov                     dptr,#tabt9;заслать ус 9А       
238A 80EE       +1  5695                             jmp                     lotp
                +1  5696     
238C 900000   F +1  5697     te23:   mov                     dptr,#tabt7;заслать ус 7А       
238F 80E9       +1  5698                             jmp                     lotp
                +1  5699     
                +1  5700     
                +1  5701     
                +1  5702     
                +1  5703     
2391 02030405   +1  5704     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
2395 06070809                
2399 0A0B                    
                +1  5705     
239B 78AE       +1  5706     findR:                  mov                     r0,#diap
239D E6         +1  5707                                                     mov                     a,@r0
239E 900000   F +1  5708                                                     mov                     dptr,#Tabn
23A1 93         +1  5709                                                     movc            a,@a+dptr
23A2 22         +1  5710                                                     ret
                +1  5711     ;bufind=30h..39h                                                                           
                                           ;
23A3 C219       +1  5712     vvchif:                 clr             bitmig
23A5 79B2       +1  5713                                     mov             r1,#marker
23A7 E7         +1  5714                                     mov             a,@r1                   ;изм цифры
23A8 7840       +1  5715                                     mov             r0,#bufind                      ;0000
23AA 28         +1  5716                                     add             a,r0
23AB F8         +1  5717                                     mov             r0,a
23AC 06         +1  5718                                     inc             @r0
23AD B63A03     +1  5719                                     cjne    @r0,#3ah,chif
23B0 7630       +1  5720                                     mov             @r0,#30h
23B2 22         +1  5721                                     ret
23B3 C3         +1  5722     chif:           clr                     c
23B4 7430       +1  5723                                     mov                     a,#30h
23B6 96         +1  5724                                     subb            a,@r0
23B7 4002       +1  5725                                     jc                      chif5
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    91

23B9 7630       +1  5726                                     mov             @r0,#30h
23BB 22         +1  5727     chif5:  ret
                +1  5728     
23BC 80E5       +1  5729     vvnol41:        jmp                     vvchif  ;при наборе цифр в интервале и константах
                +1  5730     
23BE B641FB     +1  5731     vvnol31:        cjne            @r0,#41h,vvnol41
23C1 800A       +1  5732                                             jmp                     chifour
23C3 B631F8     +1  5733     vvnol23:        cjne            @r0,#31h,vvnol31
23C6 8005       +1  5734                                             jmp                     chifour 
                +1  5735     
23C8 78B0       +1  5736     vvchibl:        mov                     r0,#level
23CA B623F6     +1  5737                                             cjne            @r0,#23h,vvnol23;при наборе цифр в 
                             блоке
23CD C219       +1  5738     chifour:                clr             bitmig
23CF 79B2       +1  5739                                     mov             r1,#marker
23D1 E7         +1  5740                                     mov             a,@r1                   ;изм цифры
23D2 7840       +1  5741                                     mov             r0,#bufind                      ;1..4
23D4 28         +1  5742                                     add             a,r0
23D5 F8         +1  5743                                     mov             r0,a
23D6 06         +1  5744                                     inc             @r0
23D7 B63504     +1  5745                                     cjne    @r0,#35h,chifb
23DA 7631       +1  5746                                     mov             @r0,#31h
23DC 8006       +1  5747                                     jmp             chifb1
23DE B63003     +1  5748     chifb:  cjne    @r0,#30h,chifb1
23E1 7631       +1  5749                                     mov             @r0,#31h
23E3 22         +1  5750                                     ret
23E4            +1  5751     chifb1:;;;;;;;;;;
23E4 C3         +1  5752                                     clr                     c
23E5 7430       +1  5753                                     mov                     a,#30h
23E7 96         +1  5754                                     subb            a,@r0
23E8 4002       +1  5755                                     jc                      chifl5
23EA 7630       +1  5756                                     mov             @r0,#30h
                +1  5757                                     
23EC 22         +1  5758     chifl5: ret
                +1  5759     ;;;;;;;;;;;;;
23ED 22         +1  5760             ret
                +1  5761       ;перевод маркера влево
23EE            +1  5762     marle:  
23EE C219       +1  5763                     clr             bitmig
                +1  5764                     ;mov            savba,#0   нельзя обнулять
23F0 78B2       +1  5765             mov             r0,#marker
23F2 16         +1  5766                     dec             @r0
23F3 E6         +1  5767                     mov             a,@r0
23F4 C3         +1  5768                     clr             c
23F5 953A       +1  5769                     subb    a,movleft         ;крайне левое положение
23F7 5001       +1  5770                     jnc             rler
23F9 06         +1  5771                     inc             @r0
23FA 22         +1  5772     rler:   ret
                +1  5773         
                +1  5774     ;перевод маркера вправо
23FB C219       +1  5775     marri:  clr             bitmig
23FD 78B2       +1  5776                     mov             r0,#marker
23FF 06         +1  5777                     inc         @r0
2400 E53B       +1  5778                     mov             a,movrig           ;крайне правое положение
2402 C3         +1  5779                     clr             c
2403 96         +1  5780                     subb    a,@r0
2404 5001       +1  5781                     jnc             rrir
2406 16         +1  5782                     dec             @r0
2407 22         +1  5783     rrir:   ret
                +1  5784         
                +1  5785     ;konstA->bufind+4..bufind+7
2408 78BC       +1  5786     outA:           mov                     r0,#konstA
240A 120000   F +1  5787                                     call            resar2
240D 120343     +1  5788                                     call            ftol                    ;->hex
2410 784F       +1  5789                                     mov             r0,#abin
2412 120000   F +1  5790                                     call            saver2
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    92

2415 7853       +1  5791                                     mov                     r0,#adec
2417 7952       +1  5792                                     mov             r1,#abin+3
2419 120000   F +1  5793                                     call            bindec
241C 785C       +1  5794                                     mov                     r0,#adec+9
241E 7947       +1  5795                                     mov                     r1,#bufind+7
2420 7F04       +1  5796                                     mov                     r7,#4
2422 E6         +1  5797     outa2:  mov             a,@r0
2423 2430       +1  5798                               add           a,#30h
2425 F7         +1  5799                                     mov             @r1,a
2426 19         +1  5800                                     dec             r1
2427 18         +1  5801                                     dec             r0
2428 DFF8       +1  5802                                     djnz    r7,outa2
242A 22         +1  5803                                     ret
                +1  5804                                             
                +1  5805     ;konstB->bufind+4..bufind+8
                +1  5806     ;outB:          mov                     r0,#konstB
                +1  5807     ;                               call            resar2
                +1  5808     ;                               mov                     a,r2
                +1  5809     ;                               anl                     a,#80h
                +1  5810     ;                               jz                      outb3
                +1  5811     ;mov                    a,r2
                +1  5812     ;                               anl                     a,#7fh
                +1  5813     ;                               mov                     r2,a
                +1  5814     ;                               mov                     bufind+3,#2dh
                +1  5815     ;outb3: call            ftol                    ;->hex
                +1  5816     ;                               mov             r0,#abin
                +1  5817     ;                               call            saver2
                +1  5818     ;                               mov                     r0,#adec
                +1  5819     ;                               mov             r1,#abin+3
                +1  5820     ;                               call            bindec
                +1  5821     ;                               mov                     r0,#adec+9
                +1  5822     ;                               mov                     r1,#bufind+8
                +1  5823     ;                               mov                     r7,#5
                +1  5824     ;outb2: mov             a,@r0
                +1  5825     ;                         add           a,#30h
                +1  5826     ;                               mov             @r1,a
                +1  5827     ;                               dec             r1
                +1  5828     ;                               dec             r0
                +1  5829     ;                               djnz    r7,outb2
                +1  5830     ;                               ret
                +1  5831     
                +1  5832     
                +1  5833     ;пп мигания индикации
242B 78B2       +1  5834     mign:           mov             r0,#marker
                +1  5835                                     
242D B6FF03     +1  5836                                     cjne    @r0,#0ffh,mignn
                +1  5837                                     ;реж изм мигает *
2430 C219       +1  5838                                     clr             bitmig
2432 22         +1  5839                                     ret
                +1  5840     
2433            +1  5841     mignn:                  ;clr            c
2433 7440       +1  5842                                     mov             a,#bufind
2435 26         +1  5843                                     add             a,@r0                   ;a=bufind+marker
2436 F9         +1  5844                                     mov             r1,a
2437 201907     +1  5845                                     jb              bitmig,onmig
243A 873C       +1  5846                                     mov             savba,@r1
                +1  5847                             ;       mov             a,@r1
                +1  5848                             ;       mov             savba,a
243C 7720       +1  5849                                     mov             @r1,#" "
                +1  5850                                     
243E D219       +1  5851                                     setb    bitmig
2440 22         +1  5852                                     ret
                +1  5853     
2441 A73C       +1  5854     onmig:                  mov             @r1,savba
                +1  5855                                     ;mov            a,savba
                +1  5856                                     ; mov           @r1,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    93

2443 C219       +1  5857                                     clr             bitmig
2445 120000   F +1  5858                                     call    z_01s
2448 22         +1  5859                                     ret
                +1  5860     ;номер ошибки bufind+6
2449 900000   F +1  5861     error:          mov             dptr,#teERR
244C 120000   F +1  5862                                             call    lotext
244F 853946     +1  5863                                             mov             bufind+6,nuerr
2452 22         +1  5864                                     ret
                +1  5865     
                +1  5866     
2453            +1  5867     textT:          
2453 FD543D32   +1  5868     te2ms:                  db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
2457 6D67FDFD                
245B FDFD                    
245D FD543D31   +1  5869     te10ms:                 db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
2461 306D67FD                
2465 FDFD                    
2467 FD543D35   +1  5870                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
246B 306D67FD                
246F FDFD                    
2471 FD543D64   +1  5871                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2475 3167FDFD                
2479 FDFD                    
247B 20202054   +1  5872                             db              " "," "," ","T","=",31h,67h," "," "," "
247F 3D316720                
2483 2020                    
2485 2020543D   +1  5873                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2489 31306720                
248D 2020                    
                +1  5874     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5875     
248F 42753474   +1  5876     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
2493 79767454                
2497 7720                    
2499 20553D20   +1  5877     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
249D 20202020                
24A1 2065                    
24A3 20423D2B   +1  5878     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
24A7 20202020                
24AB 2020                    
24AD 20207145   +1  5879     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
24B1 48722020                
24B5 2020                    
                +1  5880     
24B7 20544579   +1  5881     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
24BB 542D7433                
24BF 7120                    
24C1 54457954   +1  5882     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
24C5 20523520                
24C9 2020                    
24CB 20794B30   +1  5883     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
24CF 50205235                
24D3 2020                    
24D5 20204142   +1  5884     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
24D9 4B202020                
24DD 2020                    
24DF 204B4176   +1  5885     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
24E3 74735020                
24E7 202020                  
                +1  5886     
24EA 20544579   +1  5887     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
24EE 54202020                
24F2 5431                    
24F4 20544579   +1  5888     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    94

                                                  22
24F8 54202020                
24FC 5432                    
24FE 20544579   +1  5889     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
2502 54202020                
2506 5433                    
                +1  5890     
                +1  5891     
2508 20202035   +1  5892     teS57_6:                db              " "," "," ",35h,37h,36h," "," "," "," ";57.6
250C 37362020                
2510 2020                    
2512 20202031   +1  5893     teS19_2:                db              " "," "," ",31h,39h,32h," "," "," "," ";19,2
2516 39322020                
251A 2020                    
                +1  5894     
251C 61415030   +1  5895     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
2520 76772030                
2524 3030                    
2526 20303030   +1  5896     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
252A 30302020                
252E 2041                    
2530 74337120   +1  5897     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
2534 4B304879                
2538 5420                    
253A 20204275   +1  5898     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
253E 58307820                
2542 2020                    
2544 2020304C   +1  5899     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
2548 4C202020                
254C 2020                    
254E 20203034   +1  5900     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
2552 7479544B                
2556 4120                    
2558 20203041   +1  5901     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
255C 71795420                
2560 20203341   +1  5902     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
2564 61747977                
2568 2020                    
256A 20206150   +1  5903     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
256E 30797130                
2572 545020                  
2575 20206130   +1  5904     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2579 76484162                
257D 2020                    
257F 20744854   +1  5905     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
2583 20303030                
2587 3067                    
2589 20207376   +1  5906     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
258D 304B2020                
2591 2020                    
2593 20207376   +1  5907     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2597 304B2030                
259B 2020                    
259D 30547934   +1  5908     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,31h;ОТСЧЕТ 001
25A1 45542030                
25A5 3031                    
25A7 79544154   +1  5909     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
25AB 74795474                
25AF 4B41                    
25B1 71744820   +1  5910     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
25B5 20202020                
25B9 2020                    
25BB 71414B79   +1  5911     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
25BF 20202020                
25C3 2020                    
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    95

25C5 79504578   +1  5912     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
25C9 20202020                
25CD 2020                    
                +1  5913      ;;;;;;;;;;;;;;;;;;;         
25CF 2020304C   +1  5914     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
25D3 4C204920                
25D7 2020                    
25D9 2020304C   +1  5915     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
25DD 4C206620                
25E1 2020                    
25E3 20204552   +1  5916     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
25E7 52202020                
25EB 2020                    
25ED 2020454E   +1  5917     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
25F1 44202020                
25F5 2020                    
                +1  5918     
                +1  5919     ;dptr+4-приемник
                +1  5920     ;dptr-источник
                +1  5921     ;r7-кол байт  
25F7            +1  5922     xCIKLWR:
25F7 7F04       +1  5923                             mov             r7,#4   
25F9 E0         +1  5924     lwrx:   movx    a,@dptr
25FA C083       +1  5925                             push    dph
25FC C082       +1  5926                             push    dpl
25FE A3         +1  5927                             inc             dptr
25FF A3         +1  5928                             inc             dptr
2600 A3         +1  5929                             inc             dptr
2601 A3         +1  5930                             inc             dptr
2602 F0         +1  5931                             movx    @dptr,a
2603 D082       +1  5932                             pop             dpl
2605 D083       +1  5933                             pop             dph
                +1  5934                             
2607 A3         +1  5935                             inc             dptr
2608 DFEF       +1  5936                             djnz    r7,lwrx
260A 22         +1  5937                             ret
                +1  5938     ;r2..r5->@dptr..@dptr+3                         
260B EA         +1  5939     saveIr2:                mov     a,r2
260C F0         +1  5940                                             movx    @dptr,a
260D A3         +1  5941                                             inc     dptr
260E EB         +1  5942                                             mov     a,r3
260F F0         +1  5943                                             movx    @dptr,a
2610 A3         +1  5944                                             inc     dptr
2611 EC         +1  5945                                             mov     a,r4
2612 F0         +1  5946                                             movx    @dptr,a
2613 A3         +1  5947                                             inc     dptr
2614 ED         +1  5948                                             mov     a,r5
2615 F0         +1  5949                                             movx    @dptr,a
2616 22         +1  5950                                             ret
                +1  5951     ;r2..r5-> @r0..@r0+3
                +1  5952     
2617 EA         +1  5953     saver2:         mov     a,r2
2618 F6         +1  5954                                             mov     @r0,a
2619 08         +1  5955                                             inc     r0
261A EB         +1  5956                                             mov     a,r3
261B F6         +1  5957                                             mov     @r0,a
261C 08         +1  5958                                             inc     r0
261D EC         +1  5959                                             mov     a,r4
261E F6         +1  5960                                             mov     @r0,a
261F 08         +1  5961                                             inc     r0
2620 ED         +1  5962                                             mov     a,r5
2621 F6         +1  5963                                             mov     @r0,a
2622 22         +1  5964                                             ret 
2623 7F50       +1  5965     clmassix:       mov                     r7,#50h;28h
2625 900100     +1  5966                             mov     dptr,#MASS0        ;забить массив A нулями
2628 7400       +1  5967     clmax:          mov          a,#00h
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    96

262A F0         +1  5968                  movx    @dptr,a
262B A3         +1  5969                  inc     dptr
262C DFFA       +1  5970                 djnz                r7,clmax                
262E F56E       +1  5971                  mov     chmas,a
2630 C201       +1  5972                  clr     bitmas
2632 22         +1  5973                 ret
                +1  5974     ;r1-яЁшхьшъ
                +1  5975     ;r0-шёЄюўшъ
                +1  5976     ;r7-ъюы срщЄ  
2633            +1  5977     CIKLWR:
2633 7F04       +1  5978                             mov             r7,#4   
2635 E6         +1  5979     lwr:    mov     a,@r0
2636 F7         +1  5980                             mov     @r1,a
2637 09         +1  5981                             inc             r1
2638 08         +1  5982                             inc             r0
2639 DFFA       +1  5983                             djnz    r7,lwr
263B 22         +1  5984                             ret     
                +1  5985     ;r2..r5-> @dptr..@dptr+3
                +1  5986     
263C 120000   F +1  5987     zmul:   call    maform
263F 120000   F +1  5988                     call    lmul
2642 120000   F +1  5989                     call    bform
2645 22         +1  5990                     ret
                +1  5991     
2646 120000   F +1  5992     zdiv:   call    maform
2649 120000   F +1  5993                     call    divide
264C 120000   F +1  5994                     call    bform
264F 22         +1  5995                     ret
                +1  5996     
2650 EA         +1  5997     maform: mov a,r2
2651 33         +1  5998             rlc a
2652 5006       +1  5999             jnc             fo1m
2654 D202       +1  6000                     setb            znmat
2656 120000   F +1  6001                     call   form4
2659 22         +1  6002                     ret
265A C202       +1  6003     fo1m:   clr             znmat
265C 22         +1  6004                     ret
                +1  6005     
265D 300203     +1  6006     bform:  jnb             znmat,fo2m
2660 120000   F +1  6007                     call    form4
2663 22         +1  6008     fo2m:   ret
                +1  6009       
                +1  6010     ;r2..r5 яхЁхтхёЄш т фюя ъюф
2664 ED         +1  6011     form4:          mov a,r5
2665 F4         +1  6012             cpl a
2666 2401       +1  6013             add a,#1
2668 FD         +1  6014             mov r5,a
2669 EC         +1  6015             mov a,r4
266A F4         +1  6016             cpl a
266B 3400       +1  6017             addc    a,#0
266D FC         +1  6018             mov r4,a
266E EB         +1  6019             mov a,r3
266F F4         +1  6020                 cpl a
2670 3400       +1  6021             addc    a,#0
2672 FB         +1  6022             mov r3,a
2673 EA         +1  6023             mov a,r2
2674 F4         +1  6024             cpl a
2675 3400       +1  6025             addc    a,#0
2677 FA         +1  6026             mov r2,a
2678 22         +1  6027             ret
                +1  6028     
2679 120000   F +1  6029     zcmp:   call            maform
267C 120000   F +1  6030                     call            lcmp
267F C0D0       +1  6031                     push            psw
2681 120000   F +1  6032                     call    bform
2684 D0D0       +1  6033                     pop             psw
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    97

2686 22         +1  6034                     ret
                +1  6035     
                +1  6036     
                +1  6037     ;@r0..@r0+3->r8..r11
                +1  6038     
2687 E6         +1  6039     resar8: mov     a,@r0
2688 F508       +1  6040                     mov     ltemp,a
268A 08         +1  6041                     inc     r0
268B E6         +1  6042                     mov     a,@r0
268C F509       +1  6043                     mov     ltemp+1,a
268E 08         +1  6044                     inc     r0
268F E6         +1  6045                     mov     a,@r0
2690 F50A       +1  6046                     mov     ltemp+2,a
2692 08         +1  6047                     inc     r0
2693 E6         +1  6048                     mov     a,@r0
2694 F50B       +1  6049                     mov     ltemp+3,a
2696 22         +1  6050                     ret
                +1  6051     
                +1  6052     ;
                +1  6053     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  6054     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  6055     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  6056     ;r2 a    ўшёыю 180
                +1  6057     ;00 b4
                +1  6058     ;т_ї- mabin..mabin+2
                +1  6059     ;     80 01 00
                +1  6060      
2697 C8         +1  6061     cond:   xch     a,r0    
2698 F9         +1  6062                     mov     r1,a
2699 C8         +1  6063                     xch     a,r0
269A 7C03       +1  6064                     mov     r4,#03
269C 7700       +1  6065     dcoa:   mov     @r1,#00
269E 09         +1  6066                     inc     r1
269F DCFB       +1  6067                     djnz    r4,dcoa
26A1 7B10       +1  6068                     mov     r3,#10h
26A3 C3         +1  6069     dcob:   clr     c
26A4 33         +1  6070                     rlc     a
26A5 CA         +1  6071                     xch     a,r2
26A6 33         +1  6072                     rlc     a
26A7 CA         +1  6073                     xch     a,r2
26A8 C8         +1  6074                     xch     a,r0
26A9 F9         +1  6075                     mov     r1,a
26AA C8         +1  6076                     xch     a,r0
26AB 7C03       +1  6077                     mov     r4,#03
26AD FD         +1  6078                     mov     r5,a
26AE E7         +1  6079     dcoc:   mov     a,@r1 
26AF 37         +1  6080                     addc    a,@r1
26B0 D4         +1  6081                     da      a
26B1 F7         +1  6082                     mov     @r1,a
26B2 09         +1  6083                     inc     r1
26B3 DCF9       +1  6084                     djnz    r4,dcoc
26B5 ED         +1  6085                     mov     a,r5
26B6 4003       +1  6086                     jc      dcod
26B8 DBE9       +1  6087                     djnz    r3,dcob
26BA C3         +1  6088                     clr     c
26BB 00         +1  6089     dcod:   nop
26BC 22         +1  6090                     ret
                +1  6091     
26BD 8A08       +1  6092     move28: mov     ltemp,r2                        ;r2..r5->ltemp
26BF 850309     +1  6093                     mov     ltemp+1,3
26C2 85040A     +1  6094                     mov     ltemp+2,4
26C5 85050B     +1  6095                     mov     ltemp+3,5
26C8 22         +1  6096                     ret
                +1  6097     
                +1  6098     ;@r0..@r0+3->r2..r5
                +1  6099     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    98

26C9 E6         +1  6100     resar2: mov     a,@r0
26CA FA         +1  6101                     mov     r2,a
26CB 08         +1  6102                     inc     r0
26CC E6         +1  6103                     mov     a,@r0
26CD FB         +1  6104                     mov     r3,a
26CE 08         +1  6105                     inc     r0
26CF E6         +1  6106                     mov     a,@r0
26D0 FC         +1  6107                     mov     r4,a
26D1 08         +1  6108                     inc     r0
26D2 E6         +1  6109                     mov     a,@r0
26D3 FD         +1  6110                     mov     r5,a
26D4 22         +1  6111                     ret
                +1  6112     
                +1  6113     ;25mkc !!!!!!!!!!!!!!!1
26D5 7B4B       +1  6114     z_9:      mov R3,#4Bh      ;загрузка числа
26D7 DBFE       +1  6115                    djnz R3,$
26D9 22         +1  6116               ret
                +1  6117     
                +1  6118     ;запись   передаваемый байт в acc
                +1  6119     ;передача байта послед кодом старшими разрядами  вперед
26DA 7A08       +1  6120     write:     mov R2,#8
26DC C3         +1  6121                             clr  c  
26DD C297       +1  6122     wr1:            clr             p1.7;P1.2
26DF 00         +1  6123                         nop 
26E0 33         +1  6124                             rlc A
26E1 9296       +1  6125                             mov P1.6,C;P1.1,C
26E3 120000   F +1  6126                        call tim2
26E6 D297       +1  6127                        setb P1.7;P1.2
26E8 120000   F +1  6128                call tim2
26EB DAF0       +1  6129                       djnz R2,wr1
26ED C296       +1  6130                       clr P1.6;P1.1
26EF 22         +1  6131                                              ret
                +1  6132     
                +1  6133     ;чтение номера байта с индикатора(2байта)
                +1  6134     ;bufind+8..bufind+9
                +1  6135     ;-  - - -
                +1  6136     ;- - - - - - - - - -
                +1  6137     ;adec..adec+9
                +1  6138     ;ст            мл
26F0 7847       +1  6139     upak1:  mov             r0,#bufind+7;
26F2 795C       +1  6140                                     mov             r1,#adec+9
26F4 C3         +1  6141                                     clr             c
26F5 E6         +1  6142                                     mov             a,@r0
26F6 9430       +1  6143                                     subb    a,#30h
26F8 FF         +1  6144                                     mov             r7,a
26F9 C3         +1  6145                                     clr             c
26FA 9405       +1  6146                                     subb    a,#5
26FC 4004       +1  6147                                     jc              upk1
26FE 7404       +1  6148                                     mov             a,#4
2700 8001       +1  6149                                     jmp             upk2
2702 EF         +1  6150     upk1:           mov             a,r7
2703 F7         +1  6151     upk2:           mov             @r1,a
2704 22         +1  6152                                     ret  
                +1  6153     ;r1-мл байт счетчика ячеек
2705 C3         +1  6154     chminus:        clr                     c
2706 E7         +1  6155                                             mov                     a,@r1
2707 9401       +1  6156                                             subb            a,#01
2709 F7         +1  6157                                             mov                     @r1,a;low
270A 19         +1  6158                                             dec                     r1
270B E7         +1  6159                                             mov                     a,@r1
270C 9400       +1  6160                                             subb            a,#00
270E F7         +1  6161                                             mov                     @r1,a
270F 22         +1  6162                                             ret
                +1  6163     
                +1  6164     
                +1  6165     ;чтение номера байта с индикатора(4байта)
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE    99

                +1  6166     ;bufind+6..bufind+9
                +1  6167     ;-  - - -
                +1  6168     ;- - - - - - - - - -
                +1  6169     ;adec..adec+9
                +1  6170     ;ст            мл
2710 7848       +1  6171     upak4:  mov             r0,#bufind+8;
2712 795C       +1  6172                     mov             r1,#adec+9
2714 7F04       +1  6173                     mov             r7,#4
2716 C3         +1  6174     upaa:   clr             c
2717 E6         +1  6175                     mov             a,@r0
2718 9430       +1  6176                     subb    a,#30h
271A F7         +1  6177                     mov             @r1,a
271B 18         +1  6178                     dec             r0
271C 19         +1  6179                     dec             r1
271D DFF7       +1  6180                     djnz    r7,upaa
271F 22         +1  6181                     ret
                +1  6182     
                +1  6183     ;dptr-адр ячейки 1й соотв блока 
2720 E538       +1  6184     adrblok:         mov            a,nblok
2722 C3         +1  6185                              clr            c
2723 9401       +1  6186                              subb           a,#1
2725 FD         +1  6187                              mov            r5,a
2726 E4         +1  6188                              clr            a
2727 FC         +1  6189                              mov            r4,a
2728 FB         +1  6190                              mov            r3,a
2729 FA         +1  6191                              mov            r2,a
272A 900000   F +1  6192                                     mov                     dptr,#ch320h
272D 120000   F +1  6193                                     CALL   ldc_ltemp                 ; ltemp <-320
2730 120000   F +1  6194                                     call            lmul;r2..r5
2733 ED         +1  6195                                     mov                     a,r5
2734 2450       +1  6196                                     add                     a,#50h
2736 F582       +1  6197                                     mov                     dpl,a
2738 EC         +1  6198                                     mov                     a,r4
2739 3401       +1  6199                                     addc            a,#01           
273B F583       +1  6200                                     mov                     dph,a                   ;dptr-
273D 22         +1  6201                                     ret
                +1  6202     
                +1  6203     ;
                +1  6204     ;saven_bl<-dptr  адрес след ячейки внешн озу 
273E E538       +1  6205     save_hl:                mov             a,nblok
2740 B4011D     +1  6206                                                     cjne    a,#1,sa_hl1
2743 79D3       +1  6207                                                     mov             r1,#saven_bl
2745 E583       +1  6208     sa_hl:                  mov             a,dph
2747 F7         +1  6209                                               mov           @r1,a
2748 09         +1  6210                                                     inc             r1
2749 E582       +1  6211                                                     mov             a,dpl
274B F7         +1  6212                                                     mov             @r1,a
                +1  6213                                                     ;;;;;;;;;не конец ли блока
                +1  6214                             
274C 79D6       +1  6215                                     mov                     r1,#volume+1;work+1
274E 120000   F +1  6216                                     call            chminus
2751 78D5       +1  6217                                     mov             r0,#volume
2753 E6         +1  6218                                     mov             a,@r0
2754 30E708     +1  6219                                     jnb             acc.7,noendli
2757 C20A       +1  6220                                     clr                     bitbon                  ;блок закон
                             чился
2759 534BFD     +1  6221                                     anl                     bufind+11,#0fdh
275C 120000   F +1  6222                                     call            ind
275F 22         +1  6223     noendli:ret
                +1  6224     
2760 B40204     +1  6225     sa_hl1:         cjne    a,#2,sa_hl2
2763 79C0       +1  6226                                                     mov             r1,#saven_bl2
2765 80DE       +1  6227                                                     jmp             sa_hl
                +1  6228     
2767 B40304     +1  6229     sa_hl2:         cjne    a,#3,sa_hl3
276A 79C2       +1  6230                                                     mov             r1,#saven_bl3
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   100

276C 80D7       +1  6231                                                     jmp             sa_hl
276E 79D9       +1  6232     sa_hl3:                 mov             r1,#saven_bl4
2770 80D3       +1  6233                                                     jmp             sa_hl
                +1  6234     
                +1  6235     ;загрузка dptr сохр ранее значением адреса ячейки
2772 E538       +1  6236     resa_hl:                mov             a,nblok
2774 B4010A     +1  6237                                                     cjne    a,#1,re_hl1
2777 79D3       +1  6238                                                     mov             r1,#saven_bl;блок1 150h..46
                             fh
2779 E7         +1  6239     re_hl:                  mov             a,@r1   
277A F583       +1  6240                                                     mov             dph,a
                +1  6241                                               
277C 09         +1  6242                                                     inc             r1
277D E7         +1  6243                                                     mov             a,@r1
277E F582       +1  6244                                                     mov             dpl,a
2780 22         +1  6245                                                     ret
                +1  6246     
2781 B40204     +1  6247     re_hl1:                 cjne    a,#2,re_hl2
2784 79C0       +1  6248                                                     mov             r1,#saven_bl2   ;блок2 470h
                             ..78fh
2786 80F1       +1  6249                                                     jmp             re_hl
                +1  6250     
2788 B40304     +1  6251     re_hl2:                 cjne    a,#3,re_hl3
278B 79C2       +1  6252                                                     mov             r1,#saven_bl3   ;блок3 790h
                             ..aafh
278D 80EA       +1  6253                                                     jmp             re_hl
                +1  6254     
278F 79D9       +1  6255     re_hl3:                 mov             r1,#saven_bl4   ;блок4 ab0h..dcfh
2791 80E6       +1  6256                                                     jmp             re_hl
                +1  6257     ;загрузка rez_A3 в соотв яч внешн озу
2793 789C       +1  6258     loA3_X:                 mov             r0,#rez_A3
2795 120000   F +1  6259                                                     call    resar2
                +1  6260                                                     
2798 EA         +1  6261                                                     mov             a,r2                    ;
2799 F0         +1  6262                                                     movx    @dptr,a
279A A3         +1  6263                                                     inc             dptr
279B EB         +1  6264                                                     mov             a,r3
279C F0         +1  6265                                                     movx    @dptr,a
279D A3         +1  6266                                                     inc             dptr
279E EC         +1  6267                                                     mov             a,r4
279F F0         +1  6268                                                     movx    @dptr,a
27A0 A3         +1  6269                                                     inc             dptr
27A1 ED         +1  6270                                                     mov             a,r5
27A2 F0         +1  6271                                                     movx    @dptr,a
27A3 A3         +1  6272                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
27A4 22         +1  6273                                                     ret             ;в ячейке saven_bl
                +1  6274     ;чтение в rez_A3 из соотв яч внешн озу
27A5            +1  6275     reA3_X:         
                +1  6276                                                     
27A5 E0         +1  6277                                                     movx    a,@dptr
27A6 FA         +1  6278                                                     mov             r2,a
27A7 A3         +1  6279                                                     inc             dptr
27A8 E0         +1  6280                                                     movx    a,@dptr
27A9 FB         +1  6281                                                     mov             r3,a
27AA A3         +1  6282                                                     inc             dptr
27AB E0         +1  6283                                                     movx    a,@dptr
27AC FC         +1  6284                                                     mov             r4,a
27AD A3         +1  6285                                                     inc             dptr
27AE E0         +1  6286                                                     movx    a,@dptr
27AF FD         +1  6287                                                     mov             r5,a
27B0 A3         +1  6288                                                     inc             dptr
27B1 789C       +1  6289                                                     mov             r0,#rez_A3
27B3 120000   F +1  6290                                                     call    saver2
27B6 22         +1  6291                                                     ret
                +1  6292     ;;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   101

                +1  6293     ;разбивка внешнего озу
                +1  6294     ;0..ffh считывается страница рпзу калибровочных коффициентов
                +1  6295     ;100h..150h обл внеш озу для скользящего массива измерения
                +1  6296     ;150h..46fh 1й блок
                +1  6297     ;470h..78fh     2й блок
                +1  6298     ;790h..aaf      3й блок
                +1  6299     ;ab0h..dcfh 4й блок
                +1  6300     ;dd0..fffh свободная область
                +1  6301     ;
                +1  6302     ;светодиоды и точки для индикатора
                +1  6303     ;bufind+10.0->makoi.7 такт
                +1  6304     ;bufind+10.1->makoi+1.7 измер
                +1  6305     ;bufind+10.2->makoi+2.7 avp
                +1  6306     ;bufind+10.3->makoi+3.7 нуль
                +1  6307     ;bufind+10.4->makoi+4.7 0,1s
                +1  6308     ;bufind+10.5->makoi+5.7 1s
                +1  6309     ;bufind+10.6->makoi+6.7 10s
                +1  6310     ;bufind+10.7->makoi+7.7 кмп
                +1  6311     ;bufind+11.0->makoi+8.7 память
                +1  6312     ;bufind+11.1->makoi+9.7 пуск
                +1  6313     ;знакоместа 0..9(10 знакомест)
                +1  6314     ;bufind+11.2->точка после 5 знакоместа
                +1  6315     ;bufind+11.3->точка после 8 знакоместа
                +1  6316     ;bufind+11.4->точка после 1 знакоместа(+0,0000  -7a)
                +1  6317     ;bufind+11.5->точка после 7 знакоместа
                +1  6318     ;bufind+11.6->точка после 6 знакоместа
                +1  6319     ;bufind+11.7->точка после 4 знакоместа
                +1  6320     
                +1  6321     ;ERR ошибки
                +1  6322     ;ERR 2-пароль в калибровке не соответствует
                +1  6323     ;ERR 3-не проходит тест RS
                +1  6324     ;ERR 4-в режиме R не введена константа U=0000(=0)
                    6325     
                    6326     ;$include (d:\amp\sarifm3.asm) 
                +1  6327     ; ” ©« SARIFM.ASM 8.11.95
                +1  6328     ;файл арифметики
                +1  6329       
  0008          +1  6330     ltemp    equ       8           ;long temporary
  000C          +1  6331     xtemp    equ       12          ;other temporaries
  000A          +1  6332     DECSIZE  EQU       10
  0004          +1  6333     NUMSIZE  EQU       4
  0004          +1  6334     RR4  EQU       4
  0005          +1  6335     RR5  EQU       5
                +1  6336     
                +1  6337                                                     
                +1  6338     
                +1  6339                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6340     ;             using    0              ; Specify register bank for the following
                +1  6341                                            ; program code.
                +1  6342     ;                                               cseg AT 400h
                +1  6343     ; Arithmetics:  CLEARING string
                +1  6344     ; Input:
                +1  6345     ; R0 - pointer to string,
                +1  6346     ; NUMSIZE - byte count if CLRNUM used,
                +1  6347     ; DECSIZE - byte count if CLRDEC used,
                +1  6348     ; R2 - byte count if CLEAR used;
                +1  6349     ; Output:  none.
                +1  6350     
27B7            +1  6351     CLRDEC:
27B7 7A0A       +1  6352         MOV R2, #DECSIZE
27B9 8002       +1  6353         SJMP    CLEAR
27BB            +1  6354     CLRNUM:
27BB 7A04       +1  6355         MOV R2, #NUMSIZE
                +1  6356         ;JMP    CLEAR
27BD            +1  6357     CLEAR:
27BD E4         +1  6358         CLR A
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   102

27BE F6         +1  6359     CLR11:  MOV @R0, A
27BF 08         +1  6360         INC R0
27C0 DAFC       +1  6361         DJNZ    R2, CLR11
27C2 22         +1  6362         RET
                +1  6363     
                +1  6364     ;**********************************
                +1  6365     ;mov    r1,#abin+3
                +1  6366     ;mov    r0,#adec
                +1  6367     ; _ _ _ _
                +1  6368     ;     03ff
                +1  6369     ;ст     мл   - вход
                +1  6370     ; _ _ _ _ _ _ _ _ _ _
                +1  6371     ;             1 0 2 3
                +1  6372     ;ст                мл 
                +1  6373     ;**********************************
                +1  6374     
27C3            +1  6375     BINDEC:
                +1  6376     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6377     ; Input:
                +1  6378     ; R0 - pointer to destination (high digit is the first),
                +1  6379     ; R1 - pointer to source,
                +1  6380     ; NUMSIZE - byte count in binary number;
                +1  6381     ; DECSIZE - byte count in decimal number;
                +1  6382     ; Output:  none.
                +1  6383     ; Source saved
                +1  6384     
                +1  6385         ; 1. Clear result
27C3 7A05       +1  6386         MOV R2, #DECSIZE/2
27C5 120000   F +1  6387         CALL   CLEAR  ; incrementing R0
                +1  6388     
                +1  6389         ; 2. Prepare convertion
27C8 18         +1  6390         DEC R0
27C9 8804       +1  6391         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
27CB 8905       +1  6392         MOV RR5, R1 ; R5 - pointer to low byte of binary number
27CD 7B20       +1  6393         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6394     
                +1  6395         ; 3. Convert cyrcle
27CF            +1  6396     BIN30:
                +1  6397     
                +1  6398         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
27CF A905       +1  6399         MOV R1, RR5
27D1 7A04       +1  6400         MOV R2, #NUMSIZE
27D3 E7         +1  6401     BIN31:  MOV A, @R1
27D4 33         +1  6402         RLC A
27D5 F7         +1  6403         MOV @R1, A
27D6 19         +1  6404         DEC R1
27D7 DAFA       +1  6405         DJNZ    R2, BIN31
27D9 A905       +1  6406         MOV R1, RR5
27DB E7         +1  6407         MOV A, @R1
27DC 92E0       +1  6408         MOV ACC.0, C
27DE F7         +1  6409         MOV @R1, A
                +1  6410     
                +1  6411         ; 3.2. Doubling decimal result with <Carry>
27DF A804       +1  6412         MOV R0, RR4
27E1 7A05       +1  6413         MOV R2, #DECSIZE/2
27E3 E6         +1  6414     BIN32:  MOV A, @R0
27E4 36         +1  6415         ADDC    A, @R0
27E5 D4         +1  6416         DA  A
27E6 F6         +1  6417         MOV @R0, A
27E7 18         +1  6418         DEC R0
27E8 DAF9       +1  6419         DJNZ    R2, BIN32
                +1  6420     
                +1  6421         ; 3.3. End of convert cyrcle
27EA DBE3       +1  6422         DJNZ    R3, BIN30
                +1  6423     
                +1  6424         ; 4. Make bytes from half-bytes
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   103

27EC E8         +1  6425         MOV A, R0
27ED 240A       +1  6426         ADD A, #DECSIZE
27EF F8         +1  6427         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
27F0 A904       +1  6428         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
27F2 7A05       +1  6429         MOV R2, #DECSIZE/2
27F4 E7         +1  6430     BIN41:  MOV A, @R1
27F5 540F       +1  6431         ANL A, #00FH
27F7 F6         +1  6432         MOV @R0, A
27F8 18         +1  6433         DEC R0
27F9 E7         +1  6434         MOV A, @R1
27FA C4         +1  6435         SWAP    A
27FB 540F       +1  6436         ANL A, #00FH
27FD F6         +1  6437         MOV @R0, A
27FE 18         +1  6438         DEC R0
27FF 19         +1  6439         DEC R1
2800 DAF2       +1  6440         DJNZ    R2, BIN41
2802 22         +1  6441         RET
                +1  6442     
                +1  6443     
                +1  6444     ;*********************************
                +1  6445     ;mov    r0,#abin
                +1  6446     ;mov    r1,#adec
                +1  6447     ; _ _ _ _       -выход
                +1  6448     ; ff0000
                +1  6449     ;0004
                +1  6450     ;мл      ст
                +1  6451     
                +1  6452     ;ст                       мл
                +1  6453     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6454     ;                       2 5 5
                +1  6455     ;                   1 0 2 4
                +1  6456     
2803            +1  6457     DECBIN:
                +1  6458     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6459     ; Input:
                +1  6460     ; R0 - pointer to destination,
                +1  6461     ; R1 - pointer to source (high digit is the first),
                +1  6462     ; NUMSIZE - byte count in binary number;
                +1  6463     ; DECSIZE - byte count in decimal number;
                +1  6464     ; Output:  none
                +1  6465     ; Source cleared
                +1  6466     
                +1  6467         ; 1. Clear result
2803 120000   F +1  6468         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6469     
                +1  6470         ; 2. Prepare convertion
2806 18         +1  6471         DEC R0
2807 8804       +1  6472         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2809 8905       +1  6473         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
280B 900000   F +1  6474         MOV DPTR, #DECT2
280E 7B20       +1  6475         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6476     
                +1  6477         ; 3. Convert cyrcle
2810            +1  6478     DEC30:
                +1  6479     
                +1  6480         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2810 C3         +1  6481         CLR C
2811 A905       +1  6482         MOV R1, RR5
2813 7A0A       +1  6483         MOV R2, #DECSIZE
2815 E7         +1  6484     DEC31:  MOV A, @R1
2816 540F       +1  6485         ANL A, #00FH
2818 92E4       +1  6486         MOV ACC.4, C
281A 93         +1  6487         MOVC    A,@A+DPTR
281B F7         +1  6488         MOV @R1, A
281C A2E7       +1  6489         MOV C, ACC.7
281E 09         +1  6490         INC R1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   104

281F DAF4       +1  6491         DJNZ    R2, DEC31
                +1  6492     
                +1  6493         ; 3.2. Rotate binary result one bit to right with <Carry>
2821 A804       +1  6494         MOV R0, RR4
2823 7A04       +1  6495         MOV R2, #NUMSIZE
2825 E6         +1  6496     DEC32:  MOV A, @R0
2826 13         +1  6497         RRC A
2827 F6         +1  6498         MOV @R0, A
2828 18         +1  6499         DEC R0
2829 DAFA       +1  6500         DJNZ    R2, DEC32
                +1  6501     
                +1  6502         ; 3.3. End of convert cyrcle
282B DBE3       +1  6503         DJNZ    R3, DEC30
282D 22         +1  6504         RET
                +1  6505     
282E 00800181   +1  6506     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2832 02820383                
2836 0484                    
2838 00000000   +1  6507         DB  00,00,00,00,00,00
283C 0000                    
283E 05850686   +1  6508         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2842 07870888                
2846 0989                    
                +1  6509     
                +1  6510     ;   Long comparison
                +1  6511     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6512     ;   flags and acc set as though a long subtraction was done.
                +1  6513     ;*******************************
                +1  6514     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6515     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6516     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6517     ;*******************************
2848            +1  6518     lcmp:
2848 C3         +1  6519         clr c
2849 EA         +1  6520         mov a,r2
284A 9508       +1  6521         subb    a,8
284C 700F       +1  6522         jnz done
284E EB         +1  6523         mov a,r3
284F 9509       +1  6524         subb    a,9
2851 7008       +1  6525         jnz done1
2853 EC         +1  6526         mov a,r4
2854 950A       +1  6527         subb    a,10
2856 7003       +1  6528         jnz done1
2858 ED         +1  6529         mov a,r5
2859 950B       +1  6530         subb    a,11
285B            +1  6531     done1:
285B C2D2       +1  6532         clr ov      ;overflow is significant only for top byte
285D            +1  6533     done:
285D 22         +1  6534         ret
                +1  6535     
                +1  6536     ;   Load long into r2-5 from [dptr]
                +1  6537     
285E            +1  6538     ldc_long:
285E E583       +1  6539         mov a,dph       ;is it in on board memory
2860 6010       +1  6540         jz  onboard     ;yes
2862 E4         +1  6541         clr a
2863 93         +1  6542         movc    a,@a+dptr
2864 FA         +1  6543         mov r2,a
2865 7401       +1  6544         mov a,#1
2867 93         +1  6545         movc    a,@a+dptr
2868 FB         +1  6546         mov r3,a
2869 7402       +1  6547         mov a,#2
286B 93         +1  6548         movc    a,@a+dptr
286C FC         +1  6549         mov r4,a
286D 7403       +1  6550         mov a,#3
286F 93         +1  6551         movc    a,@a+dptr
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   105

2870 FD         +1  6552         mov r5,a
2871 22         +1  6553         ret
2872            +1  6554     onboard:
2872 A882       +1  6555         mov r0,dpl
2874 E6         +1  6556         mov a,@r0
2875 FA         +1  6557         mov r2,a
2876 08         +1  6558         inc r0
2877 E6         +1  6559         mov a,@r0
2878 FB         +1  6560         mov r3,a
2879 08         +1  6561         inc r0
287A E6         +1  6562         mov a,@r0
287B FC         +1  6563         mov r4,a
287C 08         +1  6564         inc r0
287D E6         +1  6565         mov a,@r0
287E FD         +1  6566         mov r5,a
287F 22         +1  6567         ret
                +1  6568     
                +1  6569     ;**************************************
                +1  6570     ;загрузить ltemp...+3 из памяти программ
                +1  6571     ;mov    dptr,#CH5
                +1  6572     ;call   ldc_ltemp        ltemp <--5
                +1  6573     ;**************************************
2880            +1  6574     ldc_ltemp:
2880 E583       +1  6575         mov a,dph       ;is it in on board memory
2882 6014       +1  6576         jz  oboard      ;yes
2884 E4         +1  6577         clr a
2885 93         +1  6578         movc    a,@a+dptr
2886 F508       +1  6579         mov 8,a
2888 7401       +1  6580         mov a,#1
288A 93         +1  6581         movc    a,@a+dptr
288B F509       +1  6582         mov 9,a
288D 7402       +1  6583         mov a,#2
288F 93         +1  6584         movc    a,@a+dptr
2890 F50A       +1  6585         mov 10,a
2892 7403       +1  6586         mov a,#3
2894 93         +1  6587         movc    a,@a+dptr
2895 F50B       +1  6588         mov 11,a
2897 22         +1  6589         ret
2898            +1  6590     oboard:
2898 A882       +1  6591         mov r0,dpl
289A 8608       +1  6592         mov 8,@r0
289C 08         +1  6593         inc r0
289D 8609       +1  6594         mov 9,@r0
289F 08         +1  6595         inc r0
28A0 860A       +1  6596         mov 10,@r0
28A2 08         +1  6597         inc r0
28A3 860B       +1  6598         mov 11,@r0
28A5 22         +1  6599         ret
                +1  6600     
                +1  6601     ;*****************************
                +1  6602     ;mov    dptr,#k1
                +1  6603     ;call   ldx_long
                +1  6604     ;k1->r2..r5
                +1  6605     ;*****************************
                +1  6606     ;   Load long into r2-5 from [dptr]
                +1  6607     ;
                +1  6608     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
28A6            +1  6609     ldx_long:
28A6 E583       +1  6610         mov a,dph       ;is it in on board memory
28A8 6014       +1  6611         jz  onboar1        ;yes
28AA C082       +1  6612         push    dpl
28AC C083       +1  6613         push    dph
28AE E0         +1  6614         movx    a,@dptr
28AF FA         +1  6615         mov r2,a
28B0 A3         +1  6616         inc dptr
28B1 E0         +1  6617         movx    a,@dptr
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   106

28B2 FB         +1  6618         mov r3,a
28B3 A3         +1  6619         inc dptr
28B4 E0         +1  6620         movx    a,@dptr
28B5 FC         +1  6621         mov r4,a
28B6 A3         +1  6622         inc dptr
28B7 E0         +1  6623         movx    a,@dptr
28B8 FD         +1  6624         mov r5,a
28B9 D083       +1  6625         pop dph
28BB D082       +1  6626         pop dpl
28BD 22         +1  6627         ret
28BE            +1  6628     onboar1:
28BE A882       +1  6629         mov r0,dpl
28C0 E6         +1  6630         mov a,@r0
28C1 FA         +1  6631         mov r2,a
28C2 08         +1  6632         inc r0
28C3 E6         +1  6633         mov a,@r0
28C4 FB         +1  6634         mov r3,a
28C5 08         +1  6635         inc r0
28C6 E6         +1  6636         mov a,@r0
28C7 FC         +1  6637         mov r4,a
28C8 08         +1  6638         inc r0
28C9 E6         +1  6639         mov a,@r0
28CA FD         +1  6640         mov r5,a
28CB 22         +1  6641         ret
                +1  6642     
                +1  6643     ;*********************************
                +1  6644     ;mov    dptr,#k2
                +1  6645     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6646     ;**********************************
28CC            +1  6647     ldx_ltemp:
28CC E583       +1  6648         mov a,dph       ;is it in on board memory
28CE 6010       +1  6649         jz  oboard1     ;yes
28D0 E0         +1  6650         movx    a,@dptr
28D1 F508       +1  6651         mov 8,a
28D3 A3         +1  6652         inc dptr
28D4 E0         +1  6653         movx    a,@dptr
28D5 F509       +1  6654         mov 9,a
28D7 A3         +1  6655         inc dptr
28D8 E0         +1  6656         movx    a,@dptr
28D9 F50A       +1  6657         mov 10,a
28DB A3         +1  6658         inc dptr
28DC E0         +1  6659         movx    a,@dptr
28DD F50B       +1  6660         mov 11,a
28DF 22         +1  6661         ret
28E0            +1  6662     oboard1:
28E0 A882       +1  6663         mov r0,dpl
28E2 8608       +1  6664         mov 8,@r0
28E4 08         +1  6665         inc r0
28E5 8609       +1  6666         mov 9,@r0
28E7 08         +1  6667         inc r0
28E8 860A       +1  6668         mov 10,@r0
28EA 08         +1  6669         inc r0
28EB 860B       +1  6670         mov 11,@r0
28ED 22         +1  6671         ret
                +1  6672     ;   Long division routines for 8051
                +1  6673     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6674     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6675     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6676     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6677     ;   r1 must be saved by the caller.
                +1  6678     ;   This is long unsigned division.
                +1  6679     
                +1  6680     
                +1  6681     ;   Register usage:
                +1  6682     ;       r0 loop counter
                +1  6683     ;       xtemp (12-15) accumulates quotient
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   107

                +1  6684     ;       r5-r2 holds dividend
                +1  6685     ;       ltemp holds divisor
                +1  6686     
                +1  6687     ;************************************
                +1  6688     ;r2..r5-делимое
                +1  6689     ;ltemp..-делитель
                +1  6690     ;частное -r2..r5
                +1  6691     ;*************************************
28EE            +1  6692     divide:
28EE E4         +1  6693         clr a
28EF F8         +1  6694         mov r0,a        ;initialize count
28F0 F50C       +1  6695         mov xtemp,a     ;zero quotient
28F2 F50D       +1  6696         mov xtemp+1,a
28F4 F50E       +1  6697         mov xtemp+2,a
28F6 F50F       +1  6698         mov xtemp+3,a
28F8 ED         +1  6699         mov a,r5        ;check for zero dividend
28F9 4C         +1  6700         orl a,r4
28FA 4B         +1  6701         orl a,r3
28FB 4A         +1  6702         orl a,r2
28FC 600B       +1  6703         jz  jfinis
28FE E508       +1  6704         mov a,ltemp     ;check for zero divisor
2900 4509       +1  6705         orl a,ltemp+1
2902 450A       +1  6706         orl a,ltemp+2
2904 450B       +1  6707         orl a,ltemp+3
2906 7037       +1  6708         jnz midl
2908 22         +1  6709         ret
                +1  6710     
2909 020000   F +1  6711     jfinis: jmp finis
                +1  6712     
290C            +1  6713     loops:
290C EA         +1  6714         mov a,r2
290D C3         +1  6715         clr c
290E 9508       +1  6716         subb    a,ltemp+0   ;is divisor greater than dividend yet
2910 4033       +1  6717         jc  yes     ;yes, go no further
2912 7013       +1  6718         jnz no
2914 EB         +1  6719         mov a,r3
2915 9509       +1  6720         subb    a,ltemp+1
2917 402C       +1  6721         jc  yes
2919 700C       +1  6722         jnz no
291B EC         +1  6723         mov a,r4
291C 950A       +1  6724         subb    a,ltemp+2
291E 4025       +1  6725         jc  yes
2920 7005       +1  6726         jnz no
2922 ED         +1  6727         mov a,r5
2923 950B       +1  6728         subb    a,ltemp+3
2925 401E       +1  6729         jc  yes
2927            +1  6730     no:
2927 E50B       +1  6731         mov a,ltemp+3   ;shift divisor up one bit
2929 250B       +1  6732         add a,ltemp+3
292B F50B       +1  6733         mov ltemp+3,a
292D E50A       +1  6734         mov a,ltemp+2
292F 350A       +1  6735         addc    a,ltemp+2
2931 F50A       +1  6736         mov ltemp+2,a
2933 E509       +1  6737         mov a,ltemp+1
2935 3509       +1  6738         addc    a,ltemp+1
2937 F509       +1  6739         mov ltemp+1,a
2939 E508       +1  6740         mov a,ltemp+0
293B 3508       +1  6741         addc    a,ltemp+0
293D F508       +1  6742         mov ltemp+0,a
293F            +1  6743     midl:
293F 08         +1  6744         inc r0      ;increment count
2940 E508       +1  6745         mov a,ltemp+0   ;check for safe to shift some more
2942 30E7C7     +1  6746         jnb acc.7,loops  ;loop if top bit clear
2945            +1  6747     yes:
2945 E508       +1  6748         mov a,ltemp+0
2947 C3         +1  6749         clr c
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   108

2948 9A         +1  6750         subb    a,r2        ;can we subtract now?
2949 401A       +1  6751         jc  dosub       ;yes, go and do it
294B 7015       +1  6752         jnz nosub
294D E509       +1  6753         mov a,ltemp+1
294F 9B         +1  6754         subb    a,r3
2950 4013       +1  6755         jc  dosub
2952 700E       +1  6756         jnz nosub
2954 E50A       +1  6757         mov a,ltemp+2
2956 9C         +1  6758         subb    a,r4
2957 400C       +1  6759         jc  dosub
2959 7007       +1  6760         jnz nosub
295B E50B       +1  6761         mov a,ltemp+3
295D 9D         +1  6762         subb    a,r5
295E 4005       +1  6763         jc  dosub
2960 6003       +1  6764         jz  dosub
2962            +1  6765     nosub:
2962 C3         +1  6766         clr c
2963 8012       +1  6767         sjmp    dosh
2965            +1  6768     dosub:
2965 C3         +1  6769         clr c       ;subtract divisor from dividend
2966 ED         +1  6770         mov a,r5
2967 950B       +1  6771         subb    a,ltemp+3
2969 FD         +1  6772         mov r5,a
296A EC         +1  6773         mov a,r4
296B 950A       +1  6774         subb    a,ltemp+2
296D FC         +1  6775         mov r4,a
296E EB         +1  6776         mov a,r3
296F 9509       +1  6777         subb    a,ltemp+1
2971 FB         +1  6778         mov r3,a
2972 EA         +1  6779         mov a,r2
2973 9508       +1  6780         subb    a,ltemp+0
2975 FA         +1  6781         mov r2,a
2976 D3         +1  6782         setb    c       ;now set bit for quotient
2977            +1  6783     dosh:
2977 E50F       +1  6784         mov a,xtemp+3
2979 33         +1  6785         rlc a
297A F50F       +1  6786         mov xtemp+3,a
297C E50E       +1  6787         mov a,xtemp+2
297E 33         +1  6788         rlc a
297F F50E       +1  6789         mov xtemp+2,a
2981 E50D       +1  6790         mov a,xtemp+1
2983 33         +1  6791         rlc a
2984 F50D       +1  6792         mov xtemp+1,a
2986 E50C       +1  6793         mov a,xtemp+0
2988 33         +1  6794         rlc a
2989 F50C       +1  6795         mov xtemp+0,a
298B E508       +1  6796         mov a,ltemp+0       ;shift divisor down
298D C3         +1  6797         clr c
298E 13         +1  6798         rrc a
298F F508       +1  6799         mov ltemp+0,a
2991 E509       +1  6800         mov a,ltemp+1
2993 13         +1  6801         rrc a
2994 F509       +1  6802         mov ltemp+1,a
2996 E50A       +1  6803         mov a,ltemp+2
2998 13         +1  6804         rrc a
2999 F50A       +1  6805         mov ltemp+2,a
299B E50B       +1  6806         mov a,ltemp+3
299D 13         +1  6807         rrc a
299E F50B       +1  6808         mov ltemp+3,a
                +1  6809     
29A0 D8A3       +1  6810         djnz    r0,yes      ;and continue with the rest
                +1  6811     
29A2            +1  6812     finis:
29A2 8D0B       +1  6813         mov ltemp+3,r5
29A4 8C0A       +1  6814         mov ltemp+2,r4
29A6 8B09       +1  6815         mov ltemp+1,r3
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   109

29A8 8A08       +1  6816         mov ltemp+0,r2
29AA AD0F       +1  6817         mov r5,xtemp+3
29AC AC0E       +1  6818         mov r4,xtemp+2
29AE AB0D       +1  6819         mov r3,xtemp+1
29B0 AA0C       +1  6820         mov r2,xtemp+0
29B2 22         +1  6821         ret         ;and return with the satisfaction of a job well done
                +1  6822     
                +1  6823     
                +1  6824     ;   Long multiplication
                +1  6825     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  6826     ;   other in ltemp. It really doesn't matter which one is where.
                +1  6827     
                +1  6828     ;**********************************
                +1  6829     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  6830     ;ст  мл
                +1  6831     ;**********************************
29B3            +1  6832     llmul:
29B3            +1  6833     almul:
29B3            +1  6834     lmul:
29B3 ED         +1  6835         mov a,r5        ;low order byte
29B4 850BF0     +1  6836         mov b,ltemp+3       ;times low order byte
29B7 A4         +1  6837         mul ab
29B8 F50F       +1  6838         mov xtemp+3,a       ;store low
29BA 85F00E     +1  6839         mov xtemp+2,b   ;and high
29BD ED         +1  6840         mov a,r5        ;low order
29BE 850AF0     +1  6841         mov b,ltemp+2   ;times next
29C1 A4         +1  6842         mul ab
29C2 250E       +1  6843         add a,xtemp+2   ;add in
29C4 F50E       +1  6844         mov xtemp+2,a
29C6 E5F0       +1  6845         mov a,b
29C8 3400       +1  6846         addc    a,#0
29CA F50D       +1  6847         mov xtemp+1,a
29CC ED         +1  6848         mov a,r5
29CD 8509F0     +1  6849         mov b,ltemp+1
29D0 A4         +1  6850         mul ab
29D1 250D       +1  6851         add a,xtemp+1
29D3 F50D       +1  6852         mov xtemp+1,a
29D5 E5F0       +1  6853         mov a,b
29D7 3400       +1  6854         addc    a,#0
29D9 F50C       +1  6855         mov xtemp+0,a
29DB ED         +1  6856         mov a,r5
29DC 8508F0     +1  6857         mov b,ltemp+0
29DF A4         +1  6858         mul ab
29E0 250C       +1  6859         add a,xtemp+0
29E2 F50C       +1  6860         mov xtemp+0,a
29E4 EC         +1  6861         mov a,r4
29E5 850BF0     +1  6862         mov b,ltemp+3
29E8 A4         +1  6863         mul ab
29E9 250E       +1  6864         add a,xtemp+2
29EB F50E       +1  6865         mov xtemp+2,a
29ED E5F0       +1  6866         mov a,b
29EF 350D       +1  6867         addc    a,xtemp+1
29F1 F50D       +1  6868         mov xtemp+1,a
29F3 E50C       +1  6869         mov a,xtemp+0
29F5 3400       +1  6870         addc    a,#0
29F7 F50C       +1  6871         mov xtemp+0,a
29F9 EC         +1  6872         mov a,r4
29FA 850AF0     +1  6873         mov b,ltemp+2
29FD A4         +1  6874         mul ab
29FE 250D       +1  6875         add a,xtemp+1
2A00 F50D       +1  6876         mov xtemp+1,a
2A02 E5F0       +1  6877         mov a,b
2A04 350C       +1  6878         addc    a,xtemp+0
2A06 F50C       +1  6879         mov xtemp+0,a
2A08 EC         +1  6880         mov a,r4
2A09 8509F0     +1  6881         mov b,ltemp+1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   110

2A0C A4         +1  6882         mul ab
2A0D 250C       +1  6883         add a,xtemp+0
2A0F F50C       +1  6884         mov xtemp+0,a
                +1  6885     
2A11 EB         +1  6886         mov a,r3
2A12 850BF0     +1  6887         mov b,ltemp+3
2A15 A4         +1  6888         mul ab
2A16 250D       +1  6889         add a,xtemp+1
2A18 F50D       +1  6890         mov xtemp+1,a
2A1A E5F0       +1  6891         mov a,b
2A1C 350C       +1  6892         addc    a,xtemp+0
2A1E F50C       +1  6893         mov xtemp+0,a
2A20 EB         +1  6894         mov a,r3
2A21 850AF0     +1  6895         mov b,ltemp+2
2A24 A4         +1  6896         mul ab
2A25 250C       +1  6897         add a,xtemp+0
2A27 F50C       +1  6898         mov xtemp+0,a
                +1  6899     
2A29 EA         +1  6900         mov a,r2
2A2A 850BF0     +1  6901         mov b,ltemp+3
2A2D A4         +1  6902         mul ab
2A2E 250C       +1  6903         add a,xtemp+0
2A30 FA         +1  6904         mov r2,a
2A31 AB0D       +1  6905         mov r3,xtemp+1
2A33 AC0E       +1  6906         mov r4,xtemp+2
2A35 AD0F       +1  6907         mov r5,xtemp+3
                +1  6908     
2A37 22         +1  6909         ret         ;all done
                +1  6910     ;******************************
                +1  6911     ;из содержимого  r2-r5  вычесть
                +1  6912     ;содержимое          ltemp..ltemp+3
                +1  6913     ;******************************
2A38            +1  6914     llsub:
2A38            +1  6915      lsub:
2A38 ED         +1  6916         mov a,r5
2A39 C3         +1  6917         clr c
2A3A 950B       +1  6918         subb    a,11
2A3C FD         +1  6919         mov r5,a
2A3D EC         +1  6920         mov a,r4
2A3E 950A       +1  6921         subb    a,10
2A40 FC         +1  6922         mov r4,a
2A41 EB         +1  6923         mov a,r3
2A42 9509       +1  6924         subb    a,9
2A44 FB         +1  6925         mov r3,a
2A45 EA         +1  6926         mov a,r2
2A46 9508       +1  6927         subb    a,8
2A48 FA         +1  6928         mov r2,a
2A49 22         +1  6929         ret
                +1  6930     
                +1  6931     ;***********************************************
                +1  6932     ;                                                      ст мл
                +1  6933     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6934     ;  r0- адрес младшего байта !!!
                +1  6935     ;результат- r2..r5
                +1  6936     ;***********************************************
                +1  6937     
2A4A C3         +1  6938     ladd:    clr       c
2A4B ED         +1  6939          mov       a,r5
2A4C 26         +1  6940          add       a,@r0
2A4D FD         +1  6941          mov       r5,a
2A4E 18         +1  6942          dec       r0
2A4F EC         +1  6943          mov       a,r4
2A50 36         +1  6944          addc      a,@r0
2A51 FC         +1  6945          mov       r4,a
2A52 18         +1  6946          dec       r0
2A53 EB         +1  6947          mov       a,r3
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   111

2A54 36         +1  6948          addc      a,@r0
2A55 FB         +1  6949          mov       r3,a
2A56 18         +1  6950          dec       r0
2A57 EA         +1  6951          mov       a,r2
2A58 36         +1  6952          addc      a,@r0
2A59 FA         +1  6953          mov       r2,a
2A5A 22         +1  6954          ret
                +1  6955     ;***********************************************
                +1  6956     ;                                                      ст мл
                +1  6957     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6958     ;  r0- адрес младшего байта !!!
                +1  6959     ;результат- r2..r5
                +1  6960     ;***********************************************
                +1  6961     
2A5B C3         +1  6962     laddx:    clr       c
2A5C E2         +1  6963                                             movx            a,@r0
2A5D 2D         +1  6964                                             add                     a,r5
2A5E FD         +1  6965               mov     r5,a
2A5F 18         +1  6966                             dec     r0
2A60 E2         +1  6967                             movx    a,@r0
2A61 3C         +1  6968                             addc    a,r4
2A62 FC         +1  6969                             mov     r4,a
2A63 18         +1  6970                             dec     r0
2A64 E2         +1  6971                             movx    a,@r0
2A65 3B         +1  6972                             addc    a,r3
2A66 FB         +1  6973                             mov     r3,a
2A67 18         +1  6974                             dec     r0
2A68 E2         +1  6975                             movx    a,@r0
2A69 3A         +1  6976                             addc    a,r2
2A6A FA         +1  6977                             mov       r2,a
2A6B 22         +1  6978                             ret
                +1  6979     
                +1  6980     ;***********************************************
                +1  6981     ;                                                      ст мл
                +1  6982     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6983     ;  dptr- адрес младшего байта !!!
                +1  6984     ;результат- r2..r5
                +1  6985     ;***********************************************
                +1  6986     
2A6C C3         +1  6987     addx:    clr       c
2A6D E0         +1  6988                                             movx            a,@dptr
2A6E 2D         +1  6989                                             add                     a,r5
2A6F FD         +1  6990               mov     r5,a
2A70 120000   F +1  6991                             call            dedptr;dec     dptr
2A73 E0         +1  6992                             movx    a,@dptr
2A74 3C         +1  6993                             addc    a,r4
2A75 FC         +1  6994                             mov     r4,a
2A76 120000   F +1  6995                             call            dedptr;dec     dptr
2A79 E0         +1  6996                             movx    a,@dptr
2A7A 3B         +1  6997                             addc    a,r3
2A7B FB         +1  6998                             mov     r3,a
2A7C 120000   F +1  6999                             call            dedptr;dec     dptr
2A7F E0         +1  7000                             movx    a,@dptr
2A80 3A         +1  7001                             addc    a,r2
2A81 FA         +1  7002                             mov       r2,a
2A82 22         +1  7003                             ret
                +1  7004     
2A83 C0D0       +1  7005     dedptr:         push    psw
2A85 C3         +1  7006                                             clr             c
2A86 E582       +1  7007                                             mov             a,dpl
2A88 9401       +1  7008                                             subb    a,#1
2A8A F582       +1  7009                                             mov             dpl,a
2A8C E583       +1  7010                                             mov             a,dph
2A8E 9400       +1  7011                                             subb    a,#0
2A90 F583       +1  7012                                             mov             dph,a
2A92 D0D0       +1  7013                                             pop             psw
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   112

2A94 22         +1  7014                                             ret
                    7015     
                    7016     ;$include (d:\amp\floatm.asm)
                +1  7017     ;       Copyright (C) 1988 HI-TECH Software
                +1  7018     
                +1  7019     ;       Single Precision Floating point arithmetic routines for 8051
                +1  7020     
                +1  7021     ;       The format of floating point numbers is as follows:
                +1  7022     
                +1  7023     ;       -----------------
                +1  7024     ;       *     sign      *  1 bit
                +1  7025     ;       -----------------
                +1  7026     ;       *   exponent    *  8 bits
                +1  7027     ;       -----------------
                +1  7028     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  7029     ;       -----------------
                +1  7030     
                +1  7031     
                +1  7032     ;       As usual for the 8051 the memory layout has the most significant
                +1  7033     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  7034     ;       lowest address.
                +1  7035     
                +1  7036     ;       Calling conventions:
                +1  7037     
                +1  7038     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  7039     ;
                +1  7040     ;       Return value is in r2-r5
                +1  7041     
                +1  7042     ;       Naming conventions: A routine name is constructed by
                +1  7043     
                +1  7044     ;             ASOP
                +1  7045     
                +1  7046     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  7047     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  7048     ;       Conversion routines are named
                +1  7049     
                +1  7050     ;               AStof
                +1  7051     
                +1  7052     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  7053     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  7054     ;       Conversion from float to integer is ftol.
                +1  7055     
                +1  7056     ;               .ORG  5000h
                +1  7057     ;               .CODE
                +1  7058     ;       seg     c_text
                +1  7059     
                +1  7060     ;;      $MOD812
----            +1  7061             CSEG
                +1  7062             ;ORG 1000h
                +1  7063     
                +1  7064                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  7065             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  7066     
                +1  7067     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  7068     ;       macros
                +1  7069     
                +1  7070     saveregs        macro
                +1  7071             push    7
                +1  7072             push    6
                +1  7073             push    1
                +1  7074             push    0
                +1  7075             endm
                +1  7076     
                +1  7077     restregs        macro
                +1  7078             pop     0
                +1  7079             pop     1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   113

                +1  7080             pop     6
                +1  7081             pop     7
                +1  7082             endm
                +1  7083     
                +1  7084     ;addr   
                +1  7085     dan     macro   pad
                +1  7086             mov     a,r5
                +1  7087             add     a,pad+3
                +1  7088             mov     pad+3,a
                +1  7089             mov     a,pad+2
                +1  7090             addc    a,r4
                +1  7091             mov     pad+2,a
                +1  7092             mov     a,pad+1
                +1  7093             addc    a,r3
                +1  7094             mov     pad+1,a
                +1  7095             mov     a,pad+0
                +1  7096             addc    a,r2
                +1  7097             mov     pad,a
                +1  7098             endm
                +1  7099     
                +1  7100     addl    macro  addr
                +1  7101             mov     a,r5
                +1  7102             add     a,addr+3
                +1  7103             mov     r5,a
                +1  7104             mov     a,addr+2
                +1  7105             addc    a,r4
                +1  7106             mov     r4,a
                +1  7107             mov     a,addr+1
                +1  7108             addc    a,r3
                +1  7109             mov     r3,a
                +1  7110             mov     a,addr+0
                +1  7111             addc    a,r2
                +1  7112             mov     r2,a
                +1  7113             endm
                +1  7114     
                +1  7115     
                +1  7116     add1    macro
                +1  7117             mov     a,r5
                +1  7118             add     a,#1
                +1  7119             mov     r5,a
                +1  7120             clr     a
                +1  7121             addc    a,r4
                +1  7122             mov     r4,a
                +1  7123             clr     a
                +1  7124             addc    a,r3
                +1  7125             mov     r3,a
                +1  7126             clr     a
                +1  7127             addc    a,r2
                +1  7128             mov     r2,a
                +1  7129             endm
                +1  7130     
                +1  7131     shfdn   macro  addr
                +1  7132             clr     c
                +1  7133             mov     a,addr
                +1  7134             rrc     a
                +1  7135             mov     addr,a
                +1  7136             mov     a,addr+1
                +1  7137             rrc     a
                +1  7138             mov     addr+1,a
                +1  7139             mov     a,addr+2
                +1  7140             rrc     a
                +1  7141             mov     addr+2,a
                +1  7142             mov     a,addr+3
                +1  7143             rrc     a
                +1  7144             mov     addr+3,a
                +1  7145             endm
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   114

                +1  7146     
                +1  7147     shfup   macro  addr
                +1  7148             clr     c
                +1  7149             mov     a,addr+3
                +1  7150             rlc     a
                +1  7151             mov     addr+3,a
                +1  7152             mov     a,addr+2
                +1  7153             rlc     a
                +1  7154             mov     addr+2,a
                +1  7155             mov     a,addr+1
                +1  7156             rlc     a
                +1  7157             mov     addr+1,a
                +1  7158             mov     a,addr
                +1  7159             rlc     a
                +1  7160             mov     addr,a
                +1  7161             endm
                +1  7162     
                +1  7163     rshift  macro
                +1  7164             clr     c
                +1  7165             mov     a,r2
                +1  7166             rrc     a
                +1  7167             mov     r2,a
                +1  7168             mov     a,r3
                +1  7169             rrc     a
                +1  7170             mov     r3,a
                +1  7171             mov     a,r4
                +1  7172             rrc     a
                +1  7173             mov     r4,a
                +1  7174             mov     a,r5
                +1  7175             rrc     a
                +1  7176             mov     r5,a
                +1  7177             endm
                +1  7178     rshift1 macro
                +1  7179             setb    c
                +1  7180             mov     a,r2
                +1  7181             rrc     a
                +1  7182             mov     r2,a
                +1  7183             mov     a,r3
                +1  7184             rrc     a
                +1  7185             mov     r3,a
                +1  7186             mov     a,r4
                +1  7187             rrc     a
                +1  7188             mov     r4,a
                +1  7189             mov     a,r5
                +1  7190             rrc     a
                +1  7191             mov     r5,a
                +1  7192             endm
                +1  7193     
                +1  7194     
                +1  7195     lshift  macro
                +1  7196             mov     a,r5
                +1  7197             rlc     a
                +1  7198             mov     r5,a
                +1  7199             mov     a,r4
                +1  7200             rlc     a
                +1  7201             mov     r4,a
                +1  7202             mov     a,r3
                +1  7203             rlc     a
                +1  7204             mov     r3,a
                +1  7205             mov     a,r2
                +1  7206             rlc     a
                +1  7207             mov     r2,a
                +1  7208             endm
                +1  7209     
                +1  7210     neg1    macro
                +1  7211             clr     c
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   115

                +1  7212             clr     a
                +1  7213             subb    a,r5
                +1  7214             mov     r5,a
                +1  7215             clr     a
                +1  7216             subb    a,r4
                +1  7217             mov     r4,a
                +1  7218             clr     a
                +1  7219             subb    a,r3
                +1  7220             mov     r3,a
                +1  7221             clr     a
                +1  7222             subb    a,r2
                +1  7223             mov     r2,a
                +1  7224             endm
                +1  7225     
                +1  7226     negm    macro  addr
                +1  7227             clr     c
                +1  7228             clr     a
                +1  7229             subb    a,addr+3
                +1  7230             mov     addr+3,a
                +1  7231             clr     a
                +1  7232             subb    a,addr+2
                +1  7233             mov     addr+2,a
                +1  7234             clr     a
                +1  7235             subb    a,addr+1
                +1  7236             mov     addr+1,a
                +1  7237             clr     a
                +1  7238             subb    a,addr
                +1  7239             mov     addr,a
                +1  7240             endm
                +1  7241     
                +1  7242     copytor macro  addr
                +1  7243             mov     r2,addr
                +1  7244             mov     r3,addr+1
                +1  7245             mov     r4,addr+2
                +1  7246             mov     r5,addr+3
                +1  7247             endm
                +1  7248     
                +1  7249     
                +1  7250     copyrto macro  addr
                +1  7251             mov     addr,r2
                +1  7252             mov     addr+1,r3
                +1  7253             mov     addr+2,r4
                +1  7254             mov     addr+3,r5
                +1  7255             endm
                +1  7256     
                +1  7257     
                +1  7258     ;       Internal representation: in this set of routines a floating number
                +1  7259     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  7260     
                +1  7261     ;       Stack offset values
                +1  7262     ;ltemp   equ     28h
                +1  7263     
  0006          +1  7264     cntr    equ     6               ;r6 is the counter
  0007          +1  7265     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  7266     exp1    equ     0               ;exponent 1 in r0
  0002          +1  7267     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  7268     exp2    equ     1               ;exponent 1 in r1
  0008          +1  7269     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  7270     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  7271     
                +1  7272     
                +1  7273     
                +1  7274     
                +1  7275     
                +1  7276     ;DECSIZE EQU     10
                +1  7277     ;NUMSIZE EQU     4
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   116

                +1  7278     ;RR4     EQU     4
                +1  7279     ;RR5     EQU     5
                +1  7280     
                +1  7281     ;       unpack1 - unpacks the left operand
                +1  7282     
009E            +1  7283     unpack1:
009E EA         +1  7284             mov     a,r2            ;get sign
009F 5480       +1  7285             anl     a,#80h
00A1 530740     +1  7286             anl     sign,#40h       ;clear other bits
00A4 4207       +1  7287             orl     sign,a          ;store sign
00A6 EB         +1  7288             mov     a,r3            ;get lsb of exponent
00A7 33         +1  7289             rlc     a               ;rotate into carry
00A8 EA         +1  7290             mov     a,r2            ;get rest of exponent
00A9 33         +1  7291             rlc     a               ;and make it 8 bits
00AA F8         +1  7292             mov     r0,a            ;store it
00AB 6006       +1  7293             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  7294             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  7295             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  7296             ret
00B3            +1  7297     zer1:
00B3 E4         +1  7298             clr     a
00B4 FA         +1  7299             mov     r2,a
00B5 FB         +1  7300             mov     r3,a
00B6 FC         +1  7301             mov     r4,a
00B7 FD         +1  7302             mov     r5,a            ;zero mantissa
00B8 F8         +1  7303             mov     r0,a            ;zero exponent
00B9 22         +1  7304             ret
                +1  7305     
                +1  7306     ;       unpack2 - unpacks right operand
                +1  7307     
00BA            +1  7308     unpack2:
00BA E508       +1  7309             mov     a,ltemp         ;get sign
00BC 13         +1  7310             rrc     a               ;shift down
00BD 5440       +1  7311             anl     a,#40h          ;mask out sign
00BF 530780     +1  7312             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7313             orl     sign,a
00C4 E509       +1  7314             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7315             rlc     a               ;rotate into carry
00C7 E508       +1  7316             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7317             rlc     a               ;and make it 8 bits
00CA F9         +1  7318             mov     r1,a            ;store it
00CB 6007       +1  7319             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7320             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7321             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7322             ret
00D4            +1  7323     zer2:
00D4 E4         +1  7324             clr     a
00D5 F508       +1  7325             mov     ltemp,a
00D7 F509       +1  7326             mov     ltemp+1,a
00D9 F50A       +1  7327             mov     ltemp+2,a
00DB F50B       +1  7328             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7329             ret
                +1  7330     
                +1  7331     ;       pack1 - put operand 1 back into float format
                +1  7332     
00DE            +1  7333     pack1:
00DE E8         +1  7334             mov     a,r0            ;get exponent
00DF C3         +1  7335             clr     c
00E0 13         +1  7336             rrc     a               ;shift down 1 bit
00E1 530780     +1  7337             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7338             orl     a,r7            ;or in sign bit
00E5 FA         +1  7339             mov     r2,a            ;store
00E6 E8         +1  7340             mov     a,r0            ;get other bit
00E7 03         +1  7341             rr      a               ;rotate into hi bit
00E8 5480       +1  7342             anl     a,#80h          ;mask
00EA 53037F     +1  7343             anl     mant1+1,#7Fh    ;clear hidden bit
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   117

00ED 4203       +1  7344             orl     mant1+1,a       ;put in
00EF 22         +1  7345             ret
                +1  7346     
                +1  7347     
                +1  7348     ;       norm1 - normalize the unpacked value in 1
                +1  7349     
00F0            +1  7350     norm1:
00F0 E8         +1  7351             mov     a,r0            ;get exponent
00F1 60C0       +1  7352             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7353             mov     a,r2            ;get hi byte
00F4 6023       +1  7354             jz      norup           ;zero, so shift up if anything
00F6            +1  7355     nordn:
00F6 EA         +1  7356             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7357             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7358+3           add1                    ;add in a rounding bit
00FA ED         +1  7359+1           mov     a,r5
00FB 2401       +1  7360+1           add     a,#1
00FD FD         +1  7361+1           mov     r5,a
00FE E4         +1  7362+1           clr     a
00FF 3C         +1  7363+1           addc    a,r4
0100 FC         +1  7364+1           mov     r4,a
0101 E4         +1  7365+1           clr     a
0102 3B         +1  7366+1           addc    a,r3
0103 FB         +1  7367+1           mov     r3,a
0104 E4         +1  7368+1           clr     a
0105 3A         +1  7369+1           addc    a,r2
0106 FA         +1  7370+1           mov     r2,a
0107            +1  7371     nordn1:
                +1  7372+3           rshift                  ;shift down 1 bit
0107 C3         +1  7373+1           clr     c
0108 EA         +1  7374+1           mov     a,r2
0109 13         +1  7375+1           rrc     a
010A FA         +1  7376+1           mov     r2,a
010B EB         +1  7377+1           mov     a,r3
010C 13         +1  7378+1           rrc     a
010D FB         +1  7379+1           mov     r3,a
010E EC         +1  7380+1           mov     a,r4
010F 13         +1  7381+1           rrc     a
0110 FC         +1  7382+1           mov     r4,a
0111 ED         +1  7383+1           mov     a,r5
0112 13         +1  7384+1           rrc     a
0113 FD         +1  7385+1           mov     r5,a
0114 08         +1  7386             inc     r0              ;adjust exponent
0115 EA         +1  7387             mov     a,r2            ;test high byte
0116 70DE       +1  7388             jnz     nordn           ;loop
0118 22         +1  7389             ret                     ;done
                +1  7390     
0119            +1  7391     norup:
0119 4B         +1  7392             orl     a,r3
011A 4C         +1  7393             orl     a,r4
011B 4D         +1  7394             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7395             jz      zer1            ;it is - make it true zero
011E            +1  7396     norup1:
011E EB         +1  7397             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7398             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7399             clr     c
                +1  7400+3           lshift                  ;shift mantissa up
0123 ED         +1  7401+1           mov     a,r5
0124 33         +1  7402+1           rlc     a
0125 FD         +1  7403+1           mov     r5,a
0126 EC         +1  7404+1           mov     a,r4
0127 33         +1  7405+1           rlc     a
0128 FC         +1  7406+1           mov     r4,a
0129 EB         +1  7407+1           mov     a,r3
012A 33         +1  7408+1           rlc     a
012B FB         +1  7409+1           mov     r3,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   118

012C EA         +1  7410+1           mov     a,r2
012D 33         +1  7411+1           rlc     a
012E FA         +1  7412+1           mov     r2,a
012F 18         +1  7413             dec     r0              ;adjust exponent
0130 80EC       +1  7414             jmp     norup1
0132            +1  7415     norup2:
0132 22         +1  7416             ret                     ;finito
                +1  7417     
                +1  7418     
                +1  7419     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7420     ;       exponents are equal. This requires the smaller number to have
                +1  7421     ;       its exponent incremented and its mantissa shifted right.
                +1  7422     
0133            +1  7423     denorm:
0133 E8         +1  7424             mov     a,r0
0134 C3         +1  7425             clr     c
0135 99         +1  7426             subb    a,r1            ;compare exponents
0136 5029       +1  7427             jnc     up2a            ;shift operand 2
0138            +1  7428     up1:
0138 08         +1  7429             inc     r0              ;increment exponent
                +1  7430+3           rshift                  ;shift mantissa down
0139 C3         +1  7431+1           clr     c
013A EA         +1  7432+1           mov     a,r2
013B 13         +1  7433+1           rrc     a
013C FA         +1  7434+1           mov     r2,a
013D EB         +1  7435+1           mov     a,r3
013E 13         +1  7436+1           rrc     a
013F FB         +1  7437+1           mov     r3,a
0140 EC         +1  7438+1           mov     a,r4
0141 13         +1  7439+1           rrc     a
0142 FC         +1  7440+1           mov     r4,a
0143 ED         +1  7441+1           mov     a,r5
0144 13         +1  7442+1           rrc     a
0145 FD         +1  7443+1           mov     r5,a
0146 E8         +1  7444             mov     a,r0
0147 B501EE     +1  7445             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7446             ret
                +1  7447     
014B            +1  7448     up2:
014B 09         +1  7449             inc     r1              ;increment exponent 2
                +1  7450+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7451+1           clr     c
014D E508       +1  7452+1           mov     a,mant2
014F 13         +1  7453+1           rrc     a
0150 F508       +1  7454+1           mov     mant2,a
0152 E509       +1  7455+1           mov     a,mant2+1
0154 13         +1  7456+1           rrc     a
0155 F509       +1  7457+1           mov     mant2+1,a
0157 E50A       +1  7458+1           mov     a,mant2+2
0159 13         +1  7459+1           rrc     a
015A F50A       +1  7460+1           mov     mant2+2,a
015C E50B       +1  7461+1           mov     a,mant2+3
015E 13         +1  7462+1           rrc     a
015F F50B       +1  7463+1           mov     mant2+3,a
0161            +1  7464     up2a:
0161 E8         +1  7465             mov     a,r0            ;compare exponents
0162 B501E6     +1  7466             cjne    a,exp2,up2
0165 22         +1  7467             ret                     ;all done
                +1  7468     ;------------------------------------------------------------------
                +1  7469     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7470     
0166            +1  7471     fladd:
                +1  7472+3           saveregs
0166 C007       +1  7473+1           push    7
0168 C006       +1  7474+1           push    6
016A C001       +1  7475+1           push    1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   119

016C C000       +1  7476+1           push    0
016E 119E       +1  7477             call    unpack1
0170 11BA       +1  7478             call    unpack2
0172 3133       +1  7479             call    denorm
0174 E507       +1  7480             mov     a,sign
0176 30E70D     +1  7481             jnb     acc.7,ok1       ;test left sign
                +1  7482+3           neg1                    ;negate op1
0179 C3         +1  7483+1           clr     c
017A E4         +1  7484+1           clr     a
017B 9D         +1  7485+1           subb    a,r5
017C FD         +1  7486+1           mov     r5,a
017D E4         +1  7487+1           clr     a
017E 9C         +1  7488+1           subb    a,r4
017F FC         +1  7489+1           mov     r4,a
0180 E4         +1  7490+1           clr     a
0181 9B         +1  7491+1           subb    a,r3
0182 FB         +1  7492+1           mov     r3,a
0183 E4         +1  7493+1           clr     a
0184 9A         +1  7494+1           subb    a,r2
0185 FA         +1  7495+1           mov     r2,a
0186            +1  7496     ok1:
0186 E507       +1  7497             mov     a,sign
0188 30E615     +1  7498             jnb     acc.6,ok2       ;test right sign
                +1  7499+3           negm    mant2           ;negate op2
018B C3         +1  7500+1           clr     c
018C E4         +1  7501+1           clr     a
018D 950B       +1  7502+1           subb    a,mant2+3
018F F50B       +1  7503+1           mov     mant2+3,a
0191 E4         +1  7504+1           clr     a
0192 950A       +1  7505+1           subb    a,mant2+2
0194 F50A       +1  7506+1           mov     mant2+2,a
0196 E4         +1  7507+1           clr     a
0197 9509       +1  7508+1           subb    a,mant2+1
0199 F509       +1  7509+1           mov     mant2+1,a
019B E4         +1  7510+1           clr     a
019C 9508       +1  7511+1           subb    a,mant2
019E F508       +1  7512+1           mov     mant2,a
01A0            +1  7513     ok2:
                +1  7514+3           addl    mant2           ;add mantissas
01A0 ED         +1  7515+1           mov     a,r5
01A1 250B       +1  7516+1           add     a,mant2+3
01A3 FD         +1  7517+1           mov     r5,a
01A4 E50A       +1  7518+1           mov     a,mant2+2
01A6 3C         +1  7519+1           addc    a,r4
01A7 FC         +1  7520+1           mov     r4,a
01A8 E509       +1  7521+1           mov     a,mant2+1
01AA 3B         +1  7522+1           addc    a,r3
01AB FB         +1  7523+1           mov     r3,a
01AC E508       +1  7524+1           mov     a,mant2+0
01AE 3A         +1  7525+1           addc    a,r2
01AF FA         +1  7526+1           mov     r2,a
01B0 E4         +1  7527             clr     a
01B1 FF         +1  7528             mov     r7,a            ;clear sign
01B2 EA         +1  7529             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7530             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7531             mov     r7,a            ;store sign
                +1  7532+3           neg1                    ;negate mantissa
01B7 C3         +1  7533+1           clr     c
01B8 E4         +1  7534+1           clr     a
01B9 9D         +1  7535+1           subb    a,r5
01BA FD         +1  7536+1           mov     r5,a
01BB E4         +1  7537+1           clr     a
01BC 9C         +1  7538+1           subb    a,r4
01BD FC         +1  7539+1           mov     r4,a
01BE E4         +1  7540+1           clr     a
01BF 9B         +1  7541+1           subb    a,r3
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   120

01C0 FB         +1  7542+1           mov     r3,a
01C1 E4         +1  7543+1           clr     a
01C2 9A         +1  7544+1           subb    a,r2
01C3 FA         +1  7545+1           mov     r2,a
01C4            +1  7546     ok3:
01C4 11F0       +1  7547             call    norm1
01C6 11DE       +1  7548             call    pack1           ;pack normalized result
                +1  7549+3           restregs                ;and return
01C8 D000       +1  7550+1           pop     0
01CA D001       +1  7551+1           pop     1
01CC D006       +1  7552+1           pop     6
01CE D007       +1  7553+1           pop     7
01D0 22         +1  7554             ret
                +1  7555     ;-------------------------------------------------------------
                +1  7556     ;       Subtract the number ltemp from the number in r2-r5
                +1  7557     
01D1            +1  7558     flsub:
01D1 630880     +1  7559             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7560             jmp     fladd           ;and add!
                +1  7561     
                +1  7562     ;================================================================
                +1  7563     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7564     
01D6            +1  7565     flcmp:
01D6 EA         +1  7566            mov     a,r2            ;get sign of left
01D7 6508       +1  7567            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7568            jnb     acc.7,cexp      ;same, go check exponent
                +1  7569     ;ifdef SMALL_MODEL
01DC EA         +1  7570             mov     a,r2            ;get sign of left again
01DD 33         +1  7571             rlc     a
01DE 5001       +1  7572             jnc     flout
                +1  7573     ;endif
01E0 D3         +1  7574             setb    c
01E1 22         +1  7575     flout:          ret                    ;return with acc < 0
                +1  7576     
01E2            +1  7577     cexp:
01E2 C3         +1  7578            clr     c
01E3 EA         +1  7579            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7580            subb    a,ltemp
01E6 7010       +1  7581            jnz     fnd
01E8 EB         +1  7582            mov     a,r3
01E9 9509       +1  7583            subb    a,ltemp+1
01EB 700B       +1  7584            jnz     fnd
01ED EC         +1  7585            mov     a,r4
01EE 950A       +1  7586            subb    a,ltemp+2
01F0 7006       +1  7587            jnz     fnd
01F2 ED         +1  7588            mov     a,r5
01F3 950B       +1  7589            subb    a,ltemp+3
01F5 7001       +1  7590            jnz     fnd
01F7            +1  7591     cdone:
01F7 22         +1  7592            ret                     ;return with acc == 0
01F8            +1  7593     fnd:
01F8 8AF0       +1  7594           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7595          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7596            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7597                         orl         a,#1                          ;make non-zero
0201 B3         +1  7598             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7599             ret
                +1  7600     ;==============================================================
                +1  7601     
                +1  7602     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7603     ;       the result in r2-r5
                +1  7604     
0203            +1  7605     flmul:
                +1  7606+3           saveregs
0203 C007       +1  7607+1           push    7
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   121

0205 C006       +1  7608+1           push    6
0207 C001       +1  7609+1           push    1
0209 C000       +1  7610+1           push    0
020B 119E       +1  7611             call    unpack1
020D 11BA       +1  7612             call    unpack2
020F E4         +1  7613             clr     a
0210 F50C       +1  7614             mov     prod,a
0212 F50D       +1  7615             mov     prod+1,a        ;clear product
0214 F50E       +1  7616             mov     prod+2,a
0216 F50F       +1  7617             mov     prod+3,a
0218 7E07       +1  7618             mov     r6,#7           ;initialize counter
021A            +1  7619     mup1:
                +1  7620+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7621+1           clr     c
021B E508       +1  7622+1           mov     a,mant2
021D 13         +1  7623+1           rrc     a
021E F508       +1  7624+1           mov     mant2,a
0220 E509       +1  7625+1           mov     a,mant2+1
0222 13         +1  7626+1           rrc     a
0223 F509       +1  7627+1           mov     mant2+1,a
0225 E50A       +1  7628+1           mov     a,mant2+2
0227 13         +1  7629+1           rrc     a
0228 F50A       +1  7630+1           mov     mant2+2,a
022A E50B       +1  7631+1           mov     a,mant2+3
022C 13         +1  7632+1           rrc     a
022D F50B       +1  7633+1           mov     mant2+3,a
022F 5014       +1  7634             jnc     nobit           ;skip if lsb was zero
                +1  7635+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7636+1           mov     a,r5
0232 250F       +1  7637+1           add     a,prod+3
0234 F50F       +1  7638+1           mov     prod+3,a
0236 E50E       +1  7639+1           mov     a,prod+2
0238 3C         +1  7640+1           addc    a,r4
0239 F50E       +1  7641+1           mov     prod+2,a
023B E50D       +1  7642+1           mov     a,prod+1
023D 3B         +1  7643+1           addc    a,r3
023E F50D       +1  7644+1           mov     prod+1,a
0240 E50C       +1  7645+1           mov     a,prod+0
0242 3A         +1  7646+1           addc    a,r2
0243 F50C       +1  7647+1           mov     prod,a
0245            +1  7648     nobit:
                +1  7649+3           lshift                  ;shift multiplicand up
0245 ED         +1  7650+1           mov     a,r5
0246 33         +1  7651+1           rlc     a
0247 FD         +1  7652+1           mov     r5,a
0248 EC         +1  7653+1           mov     a,r4
0249 33         +1  7654+1           rlc     a
024A FC         +1  7655+1           mov     r4,a
024B EB         +1  7656+1           mov     a,r3
024C 33         +1  7657+1           rlc     a
024D FB         +1  7658+1           mov     r3,a
024E EA         +1  7659+1           mov     a,r2
024F 33         +1  7660+1           rlc     a
0250 FA         +1  7661+1           mov     r2,a
0251 DEC7       +1  7662             djnz    r6,mup1         ;loop if more
                +1  7663     
0253 7E11       +1  7664             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7665             sjmp    mup3
0257            +1  7666     mup11:
                +1  7667+3           shfdn   prod            ;shift product right
0257 C3         +1  7668+1           clr     c
0258 E50C       +1  7669+1           mov     a,prod
025A 13         +1  7670+1           rrc     a
025B F50C       +1  7671+1           mov     prod,a
025D E50D       +1  7672+1           mov     a,prod+1
025F 13         +1  7673+1           rrc     a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   122

0260 F50D       +1  7674+1           mov     prod+1,a
0262 E50E       +1  7675+1           mov     a,prod+2
0264 13         +1  7676+1           rrc     a
0265 F50E       +1  7677+1           mov     prod+2,a
0267 E50F       +1  7678+1           mov     a,prod+3
0269 13         +1  7679+1           rrc     a
026A F50F       +1  7680+1           mov     prod+3,a
026C            +1  7681     mup3:
                +1  7682+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7683+1           clr     c
026D E508       +1  7684+1           mov     a,mant2
026F 13         +1  7685+1           rrc     a
0270 F508       +1  7686+1           mov     mant2,a
0272 E509       +1  7687+1           mov     a,mant2+1
0274 13         +1  7688+1           rrc     a
0275 F509       +1  7689+1           mov     mant2+1,a
0277 E50A       +1  7690+1           mov     a,mant2+2
0279 13         +1  7691+1           rrc     a
027A F50A       +1  7692+1           mov     mant2+2,a
027C E50B       +1  7693+1           mov     a,mant2+3
027E 13         +1  7694+1           rrc     a
027F F50B       +1  7695+1           mov     mant2+3,a
0281 5014       +1  7696             jnc     mup2            ;skip if bit not set
                +1  7697+3           dan     prod            ;add to prod
0283 ED         +1  7698+1           mov     a,r5
0284 250F       +1  7699+1           add     a,prod+3
0286 F50F       +1  7700+1           mov     prod+3,a
0288 E50E       +1  7701+1           mov     a,prod+2
028A 3C         +1  7702+1           addc    a,r4
028B F50E       +1  7703+1           mov     prod+2,a
028D E50D       +1  7704+1           mov     a,prod+1
028F 3B         +1  7705+1           addc    a,r3
0290 F50D       +1  7706+1           mov     prod+1,a
0292 E50C       +1  7707+1           mov     a,prod+0
0294 3A         +1  7708+1           addc    a,r2
0295 F50C       +1  7709+1           mov     prod,a
0297            +1  7710     mup2:
0297 DEBE       +1  7711             djnz    r6,mup11        ;loop if more
0299 E8         +1  7712             mov     a,r0            ;get exp1
029A 29         +1  7713             add     a,r1            ;add exp2
029B 247A       +1  7714             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7715             mov     r0,a            ;store
029E EF         +1  7716             mov     a,r7            ;get sign
029F 23         +1  7717             rl      a               ;rotate bit into msb
02A0 6207       +1  7718             xrl     sign,a          ;xor with other bit
                +1  7719+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7720+1           mov     r2,prod
02A4 AB0D       +1  7721+1           mov     r3,prod+1
02A6 AC0E       +1  7722+1           mov     r4,prod+2
02A8 AD0F       +1  7723+1           mov     r5,prod+3
02AA 11F0       +1  7724             call    norm1           ;normalize
02AC 11DE       +1  7725             call    pack1
                +1  7726+3           restregs
02AE D000       +1  7727+1           pop     0
02B0 D001       +1  7728+1           pop     1
02B2 D006       +1  7729+1           pop     6
02B4 D007       +1  7730+1           pop     7
02B6 22         +1  7731             ret
                +1  7732     ;-----------------------------------------------------------
                +1  7733     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  7734     
02B7            +1  7735     fldiv:
                +1  7736+3           saveregs
02B7 C007       +1  7737+1           push    7
02B9 C006       +1  7738+1           push    6
02BB C001       +1  7739+1           push    1
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   123

02BD C000       +1  7740+1           push    0
02BF 119E       +1  7741             call    unpack1
02C1 11BA       +1  7742             call    unpack2
02C3 E4         +1  7743             clr     a
02C4 F50C       +1  7744             mov     prod,a
02C6 F50D       +1  7745             mov     prod+1,a
02C8 F50E       +1  7746             mov     prod+2,a
02CA F50F       +1  7747             mov     prod+3,a
02CC E9         +1  7748             mov     a,r1            ;check for zero divisor
02CD 6067       +1  7749             jz      div9
02CF E8         +1  7750             mov     a,r0            ;check for zero dividend
02D0 6064       +1  7751             jz      div9
02D2 C3         +1  7752             clr     c
02D3 99         +1  7753             subb    a,r1            ;compute new exponent
02D4 2478       +1  7754             add     a,#127-7        ;unbias
02D6 F8         +1  7755             mov     r0,a            ;store back
02D7 EF         +1  7756             mov     a,r7            ;get sign
02D8 23         +1  7757             rl      a
02D9 6207       +1  7758             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  7759             mov     r6,#24+7        ;initialize counter
02DD            +1  7760     div1:
                +1  7761+3           shfup   prod            ;shift quotient up
02DD C3         +1  7762+1           clr     c
02DE E50F       +1  7763+1           mov     a,prod+3
02E0 33         +1  7764+1           rlc     a
02E1 F50F       +1  7765+1           mov     prod+3,a
02E3 E50E       +1  7766+1           mov     a,prod+2
02E5 33         +1  7767+1           rlc     a
02E6 F50E       +1  7768+1           mov     prod+2,a
02E8 E50D       +1  7769+1           mov     a,prod+1
02EA 33         +1  7770+1           rlc     a
02EB F50D       +1  7771+1           mov     prod+1,a
02ED E50C       +1  7772+1           mov     a,prod
02EF 33         +1  7773+1           rlc     a
02F0 F50C       +1  7774+1           mov     prod,a
02F2 C3         +1  7775             clr     c
02F3 EA         +1  7776             mov     a,r2            ;compare values
02F4 9508       +1  7777             subb    a,mant2
02F6 4028       +1  7778             jc      div2            ;skip if bigger
02F8 7013       +1  7779             jnz     div3
02FA EB         +1  7780             mov     a,r3            ;compare values
02FB 9509       +1  7781             subb    a,mant2+1
02FD 4021       +1  7782             jc      div2            ;skip if bigger
02FF 700C       +1  7783             jnz     div3
0301 EC         +1  7784             mov     a,r4            ;compare values
0302 950A       +1  7785             subb    a,mant2+2
0304 401A       +1  7786             jc      div2            ;skip if bigger
0306 7005       +1  7787             jnz     div3
0308 ED         +1  7788             mov     a,r5            ;compare values
0309 950B       +1  7789             subb    a,mant2+3
030B 4013       +1  7790             jc      div2            ;skip if bigger
030D            +1  7791     div3:
030D ED         +1  7792             mov     a,r5
030E 950B       +1  7793             subb    a,mant2+3
0310 FD         +1  7794             mov     r5,a
0311 EC         +1  7795             mov     a,r4
0312 950A       +1  7796             subb    a,mant2+2               ;do subtraction
0314 FC         +1  7797             mov     r4,a
0315 EB         +1  7798             mov     a,r3
0316 9509       +1  7799             subb    a,mant2+1               ;do subtraction
0318 FB         +1  7800             mov     r3,a
0319 EA         +1  7801             mov     a,r2
031A 9508       +1  7802             subb    a,mant2         ;do subtraction
031C FA         +1  7803             mov     r2,a
031D 430F01     +1  7804             orl     prod+3,#1       ;set lsb in quotient
0320            +1  7805     div2:
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   124

                +1  7806+3           lshift                  ;shift dividend up
0320 ED         +1  7807+1           mov     a,r5
0321 33         +1  7808+1           rlc     a
0322 FD         +1  7809+1           mov     r5,a
0323 EC         +1  7810+1           mov     a,r4
0324 33         +1  7811+1           rlc     a
0325 FC         +1  7812+1           mov     r4,a
0326 EB         +1  7813+1           mov     a,r3
0327 33         +1  7814+1           rlc     a
0328 FB         +1  7815+1           mov     r3,a
0329 EA         +1  7816+1           mov     a,r2
032A 33         +1  7817+1           rlc     a
032B FA         +1  7818+1           mov     r2,a
032C DEAF       +1  7819             djnz    r6,div1         ;loop if more
                +1  7820+3           copytor prod            ;copy quotient
032E AA0C       +1  7821+1           mov     r2,prod
0330 AB0D       +1  7822+1           mov     r3,prod+1
0332 AC0E       +1  7823+1           mov     r4,prod+2
0334 AD0F       +1  7824+1           mov     r5,prod+3
0336            +1  7825     div9:
0336 11F0       +1  7826             call    norm1           ;now normalize result
0338 11DE       +1  7827             call    pack1           ;pack it up
                +1  7828+3           restregs                ;restore registers
033A D000       +1  7829+1           pop     0
033C D001       +1  7830+1           pop     1
033E D006       +1  7831+1           pop     6
0340 D007       +1  7832+1           pop     7
0342 22         +1  7833             ret
                +1  7834     ;------------------------------------------------------------------
                +1  7835     
                +1  7836     ;       Float to long conversion: if the exponent is less than the
                +1  7837     ;       excess value, the result is zero. If the exponent is so large
                +1  7838     ;       that the value would be shifted out, the result is overflow.
                +1  7839     ;       Otherwise shift the mantissa up or down as required.
                +1  7840     
0343            +1  7841     ftol:
                +1  7842+3           saveregs
0343 C007       +1  7843+1           push    7
0345 C006       +1  7844+1           push    6
0347 C001       +1  7845+1           push    1
0349 C000       +1  7846+1           push    0
034B EA         +1  7847             mov     a,r2
034C B4BF09     +1  7848             cjne    a,#0bfh,ne05
034F EB         +1  7849             mov     a,r3
0350 7006       +1  7850             jnz     ne05
0352 EC         +1  7851             mov     a,r4
0353 7003       +1  7852             jnz     ne05
0355 ED         +1  7853             mov     a,r5
0356 6024       +1  7854             jz      ftol1
0358 119E       +1  7855     ne05:   call    unpack1
035A E8         +1  7856             mov     a,r0            ;get exponent
035B 2482       +1  7857             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  7858             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  7859             mov     a,r7            ;get sign
0361 30E70D     +1  7860             jnb     acc.7,ftol4     ;skip if +ve
                +1  7861+3           neg1                    ;negate it
0364 C3         +1  7862+1           clr     c
0365 E4         +1  7863+1           clr     a
0366 9D         +1  7864+1           subb    a,r5
0367 FD         +1  7865+1           mov     r5,a
0368 E4         +1  7866+1           clr     a
0369 9C         +1  7867+1           subb    a,r4
036A FC         +1  7868+1           mov     r4,a
036B E4         +1  7869+1           clr     a
036C 9B         +1  7870+1           subb    a,r3
036D FB         +1  7871+1           mov     r3,a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   125

036E E4         +1  7872+1           clr     a
036F 9A         +1  7873+1           subb    a,r2
0370 FA         +1  7874+1           mov     r2,a
0371            +1  7875     ftol4:
0371 E8         +1  7876             mov     a,r0            ;get exponent
0372 246A       +1  7877             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  7878             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  7879             mov     r0,a            ;save it
0378 24F8       +1  7880             add     a,#-8           ;if > 8, too big
037A 500E       +1  7881             jnc     ftol3
037C            +1  7882     ftol1:
037C E4         +1  7883             clr     a
037D FA         +1  7884             mov     r2,a
037E FB         +1  7885             mov     r3,a
037F FC         +1  7886             mov     r4,a
0380 FD         +1  7887             mov     r5,a
0381            +1  7888     ftol9:
                +1  7889+3           restregs
0381 D000       +1  7890+1           pop     0
0383 D001       +1  7891+1           pop     1
0385 D006       +1  7892+1           pop     6
0387 D007       +1  7893+1           pop     7
0389 22         +1  7894             ret
038A            +1  7895     ftol3:
038A E8         +1  7896             mov     a,r0
038B FE         +1  7897             mov     r6,a            ;store in counter
038C 60F3       +1  7898             jz      ftol9           ;if zero, do nothing
038E            +1  7899     ftol33:
                +1  7900+3           lshift                  ;shift up
038E ED         +1  7901+1           mov     a,r5
038F 33         +1  7902+1           rlc     a
0390 FD         +1  7903+1           mov     r5,a
0391 EC         +1  7904+1           mov     a,r4
0392 33         +1  7905+1           rlc     a
0393 FC         +1  7906+1           mov     r4,a
0394 EB         +1  7907+1           mov     a,r3
0395 33         +1  7908+1           rlc     a
0396 FB         +1  7909+1           mov     r3,a
0397 EA         +1  7910+1           mov     a,r2
0398 33         +1  7911+1           rlc     a
0399 FA         +1  7912+1           mov     r2,a
039A DEF2       +1  7913             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7914             sjmp    ftol9
039E            +1  7915     ftol2:
039E F4         +1  7916             cpl     a               ;complement
039F FE         +1  7917             mov     r6,a
03A0 6022       +1  7918             jz      ftol22
03A2            +1  7919     ftol23:
03A2 EF         +1  7920             mov     a,r7
03A3 30E70F     +1  7921             jnb     acc.7,ftol24
                +1  7922+3           rshift1
03A6 D3         +1  7923+1           setb    c
03A7 EA         +1  7924+1           mov     a,r2
03A8 13         +1  7925+1           rrc     a
03A9 FA         +1  7926+1           mov     r2,a
03AA EB         +1  7927+1           mov     a,r3
03AB 13         +1  7928+1           rrc     a
03AC FB         +1  7929+1           mov     r3,a
03AD EC         +1  7930+1           mov     a,r4
03AE 13         +1  7931+1           rrc     a
03AF FC         +1  7932+1           mov     r4,a
03B0 ED         +1  7933+1           mov     a,r5
03B1 13         +1  7934+1           rrc     a
03B2 FD         +1  7935+1           mov     r5,a
03B3 800D       +1  7936             jmp     ftol25
03B5            +1  7937+3   ftol24: rshift                  ;shift down
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   126

03B5 C3         +1  7938+1           clr     c
03B6 EA         +1  7939+1           mov     a,r2
03B7 13         +1  7940+1           rrc     a
03B8 FA         +1  7941+1           mov     r2,a
03B9 EB         +1  7942+1           mov     a,r3
03BA 13         +1  7943+1           rrc     a
03BB FB         +1  7944+1           mov     r3,a
03BC EC         +1  7945+1           mov     a,r4
03BD 13         +1  7946+1           rrc     a
03BE FC         +1  7947+1           mov     r4,a
03BF ED         +1  7948+1           mov     a,r5
03C0 13         +1  7949+1           rrc     a
03C1 FD         +1  7950+1           mov     r5,a
03C2 DEDE       +1  7951     ftol25: djnz    r6,ftol23
03C4            +1  7952     ftol22:
                +1  7953+3           add1                    ;round
03C4 ED         +1  7954+1           mov     a,r5
03C5 2401       +1  7955+1           add     a,#1
03C7 FD         +1  7956+1           mov     r5,a
03C8 E4         +1  7957+1           clr     a
03C9 3C         +1  7958+1           addc    a,r4
03CA FC         +1  7959+1           mov     r4,a
03CB E4         +1  7960+1           clr     a
03CC 3B         +1  7961+1           addc    a,r3
03CD FB         +1  7962+1           mov     r3,a
03CE E4         +1  7963+1           clr     a
03CF 3A         +1  7964+1           addc    a,r2
03D0 FA         +1  7965+1           mov     r2,a
03D1 EF         +1  7966             mov     a,r7
03D2 30E70F     +1  7967             jnb     acc.7,ftol26
                +1  7968+3           rshift1
03D5 D3         +1  7969+1           setb    c
03D6 EA         +1  7970+1           mov     a,r2
03D7 13         +1  7971+1           rrc     a
03D8 FA         +1  7972+1           mov     r2,a
03D9 EB         +1  7973+1           mov     a,r3
03DA 13         +1  7974+1           rrc     a
03DB FB         +1  7975+1           mov     r3,a
03DC EC         +1  7976+1           mov     a,r4
03DD 13         +1  7977+1           rrc     a
03DE FC         +1  7978+1           mov     r4,a
03DF ED         +1  7979+1           mov     a,r5
03E0 13         +1  7980+1           rrc     a
03E1 FD         +1  7981+1           mov     r5,a
03E2 809D       +1  7982             jmp     ftol9
03E4            +1  7983+3   ftol26: rshift
03E4 C3         +1  7984+1           clr     c
03E5 EA         +1  7985+1           mov     a,r2
03E6 13         +1  7986+1           rrc     a
03E7 FA         +1  7987+1           mov     r2,a
03E8 EB         +1  7988+1           mov     a,r3
03E9 13         +1  7989+1           rrc     a
03EA FB         +1  7990+1           mov     r3,a
03EB EC         +1  7991+1           mov     a,r4
03EC 13         +1  7992+1           rrc     a
03ED FC         +1  7993+1           mov     r4,a
03EE ED         +1  7994+1           mov     a,r5
03EF 13         +1  7995+1           rrc     a
03F0 FD         +1  7996+1           mov     r5,a
03F1 808E       +1  7997             jmp     ftol9
                +1  7998     
                +1  7999     ;       arithmetic integer to floating conversions
                +1  8000     
03F3            +1  8001     abtof:
03F3 ED         +1  8002             mov     a,r5
03F4 23         +1  8003             rl      a
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   127

03F5 FC         +1  8004             mov     r4,a
03F6 9C         +1  8005             subb    a,r4
03F7 FC         +1  8006             mov     r4,a
03F8 FB         +1  8007             mov     r3,a
03F9 FA         +1  8008             mov     r2,a
03FA 8006       +1  8009             jmp     altof
03FC            +1  8010     awtof:
03FC EC         +1  8011             mov     a,r4
03FD 23         +1  8012             rl      a
03FE FB         +1  8013             mov     r3,a
03FF 9B         +1  8014             subb    a,r3
0400 FB         +1  8015             mov     r3,a
0401 FA         +1  8016             mov     r2,a
0402            +1  8017     altof:
                +1  8018+3           saveregs
0402 C007       +1  8019+1           push    7
0404 C006       +1  8020+1           push    6
0406 C001       +1  8021+1           push    1
0408 C000       +1  8022+1           push    0
040A EA         +1  8023             mov     a,r2            ;get sign
040B 5480       +1  8024             anl     a,#80h
040D FF         +1  8025             mov     r7,a            ;store it
040E 30E70D     +1  8026             jnb     acc.7,altof1    ;skip if +ve
                +1  8027+3           neg1
0411 C3         +1  8028+1           clr     c
0412 E4         +1  8029+1           clr     a
0413 9D         +1  8030+1           subb    a,r5
0414 FD         +1  8031+1           mov     r5,a
0415 E4         +1  8032+1           clr     a
0416 9C         +1  8033+1           subb    a,r4
0417 FC         +1  8034+1           mov     r4,a
0418 E4         +1  8035+1           clr     a
0419 9B         +1  8036+1           subb    a,r3
041A FB         +1  8037+1           mov     r3,a
041B E4         +1  8038+1           clr     a
041C 9A         +1  8039+1           subb    a,r2
041D FA         +1  8040+1           mov     r2,a
041E            +1  8041     altof1:
041E 7896       +1  8042             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  8043             call    norm1           ;normalize it
0422 11DE       +1  8044             call    pack1           ;and pack up
                +1  8045+3           restregs
0424 D000       +1  8046+1           pop     0
0426 D001       +1  8047+1           pop     1
0428 D006       +1  8048+1           pop     6
042A D007       +1  8049+1           pop     7
042C 22         +1  8050             ret
                +1  8051     
042D            +1  8052     lbtof:
042D 7C00       +1  8053             mov     r4,#0
042F            +1  8054     lwtof:
042F E4         +1  8055             clr     a
0430 FB         +1  8056             mov     r3,a
0431 FA         +1  8057             mov     r2,a
0432            +1  8058     lltof:
                +1  8059+3           saveregs
0432 C007       +1  8060+1           push    7
0434 C006       +1  8061+1           push    6
0436 C001       +1  8062+1           push    1
0438 C000       +1  8063+1           push    0
043A 7F00       +1  8064             mov     r7,#0           ;zero sign
043C 80E0       +1  8065             sjmp    altof1
                +1  8066     
                +1  8067     ;-------------------------------------------------------
                +1  8068     
                +1  8069     
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   128

                    8070     
                    8071     ;$include (d:\amp\wriread.asm)
                +1  8072     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  8073     cle256:          mov            IE,#00H
0441 75B601     +1  8074                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  8075                              MOV            PSCTL,#03
                +1  8076                                             
0447 7400       +1  8077                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  8078                                     movx    @dptr,a                         ;wr
044A 758F00     +1  8079                                     mov             PSCTL,#00
044D 75B600     +1  8080                                 mov         FLSCL,#00
0450 75A880     +1  8081                               mov           IE,#80H
0453 22         +1  8082                                     ret
                +1  8083     
                +1  8084     ;чтение памяти программ в r8..r11
                +1  8085     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  8086     re4byte:        mov                     dph,r2
0456 8B82       +1  8087                                             mov                     dpl,r3
0458 E4         +1  8088                                             clr                     a
0459 93         +1  8089                                             movc            a,@a+dptr
045A F508       +1  8090                                             mov                     r8,a
045C A3         +1  8091                                             inc                     dptr
045D E4         +1  8092                                             clr                     a
045E 93         +1  8093                                             movc            a,@a+dptr
045F F509       +1  8094                                             mov                     r9,a
0461 A3         +1  8095                                             inc                     dptr
0462 E4         +1  8096                                             clr                     a
0463 93         +1  8097                                             movc            a,@a+dptr
0464 F50A       +1  8098                                             mov                     r10,a
0466 A3         +1  8099                                             inc                     dptr
0467 E4         +1  8100                                             clr                     a
0468 93         +1  8101                                             movc            a,@a+dptr
0469 F50B       +1  8102                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  8103                                             ret
                +1  8104      ;чтение памяти программ в r2..r5
                +1  8105     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  8106     rebyte2:        mov                     dph,r2
046E 8B82       +1  8107                                             mov                     dpl,r3
0470 E4         +1  8108                                             clr                     a
0471 93         +1  8109                                             movc            a,@a+dptr
0472 FA         +1  8110                                             mov                     r2,a
0473 A3         +1  8111                                             inc                     dptr
0474 E4         +1  8112                                             clr                     a
0475 93         +1  8113                                             movc            a,@a+dptr
0476 FB         +1  8114                                             mov                     r3,a
0477 A3         +1  8115                                             inc                     dptr
0478 E4         +1  8116                                             clr                     a
0479 93         +1  8117                                             movc            a,@a+dptr
047A FC         +1  8118                                             mov                     r4,a
047B A3         +1  8119                                             inc                     dptr
047C E4         +1  8120                                             clr                     a
047D 93         +1  8121                                             movc            a,@a+dptr
047E FD         +1  8122                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  8123                                             ret
                +1  8124      
                +1  8125     
                +1  8126      ;r7-количество байт
                +1  8127     ;dptr-адр ячейки для записи
                +1  8128     ;r1-адр ячейки  внешнего озу
                +1  8129     
0480 75A800     +1  8130     wrpage:  mov            IE,#00H
0483 75B601     +1  8131     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   129

0486 758F01     +1  8132                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  8133                      movx           a,@r1
048A F0         +1  8134                      movx           @dptr,a                         ;wr
048B 758F00     +1  8135                      mov            PSCTL,#0
048E 75B600     +1  8136                      mov            FLSCL,#00
0491 A3         +1  8137                     inc                     dptr
0492 09         +1  8138                     inc                     r1
0493 DFEE       +1  8139                     djnz            r7,WW5
0495 75A880     +1  8140                     mov             IE,#80H
0498 22         +1  8141                     ret
                +1  8142                             
                +1  8143     
                +1  8144     
                +1  8145                                                             
                +1  8146     
                +1  8147     
                +1  8148     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8149     ;чтение памяти программ во внешнее озу
                +1  8150     ;вх-r2,r3-адр яч памяти прогр
                +1  8151     ;r1- яч внешнее озу
0499 8A83       +1  8152     copyPP:         mov                     dph,r2
049B 8B82       +1  8153                                             mov                     dpl,r3
049D 7FFF       +1  8154                                             mov                     r7,#0ffh
049F E4         +1  8155     copy1:          clr                     a
04A0 93         +1  8156                                             movc            a,@a+dptr
04A1 F3         +1  8157                                             movx                    @r1,a
04A2 A3         +1  8158                                             inc                     dptr
04A3 09         +1  8159                                             inc                     r1
04A4 DFF9       +1  8160                                             djnz            r7,copy1
04A6 22         +1  8161                                             ret
                +1  8162     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  8163     
                +1  8164                                     
                +1  8165     
                +1  8166     ;r8..r11->@r0..@r0+3
                +1  8167     ;r0-адр ячейки
                +1  8168     ;сохранить в ячейке озу
04A7 E508       +1  8169     savelte:        mov     a,ltemp
04A9 F6         +1  8170                                             mov     @r0,a
04AA 08         +1  8171                                             inc     r0
04AB E509       +1  8172                                             mov     a,ltemp+1
04AD F6         +1  8173                                             mov     @r0,a
04AE 08         +1  8174                                             inc     r0
04AF E50A       +1  8175                                             mov     a,ltemp+2
04B1 F6         +1  8176                                             mov     @r0,a
04B2 08         +1  8177                                             inc     r0
04B3 E50B       +1  8178                                             mov     a,ltemp+3
04B5 F6         +1  8179                                             mov     @r0,a
04B6 22         +1  8180                                             ret
                +1  8181     
                +1  8182     ;
                +1  8183     
                +1  8184     
                +1  8185     
                +1  8186     
                +1  8187     
                +1  8188                     
                +1  8189     
                +1  8190     
                +1  8191     
                +1  8192     
                +1  8193      
                    8194     
                    8195                                                   
                    8196     END
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   130

                                                                             
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   131

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   03A2H   R   SEG=MAIN   859#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1446 1503 1528 1549 1553 1556 1557 1559 1666 1671 3526 3540 3621
                                           3624 3667 3762 3806 3809 3886 3890 3891 3892 3895 4105 4142 4143 4145 4219
                                           4239 4330 4334 4358 4361 4700 4705 4871 4876 5627 5789 5792
ABRET. . . . . . .  C ADDR   22A7H   R   SEG=MAIN   5556 5558#
ABTOF. . . . . . .  C ADDR   03F3H   A      8001#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 673 737 745 753 761 763 783 1138 1149 1157 1236 1615 1802 1811 1820
                                           1829 1850 2176 2199 2204 2208 2213 2216 2219 2222 2225 2412 2473 2519 2530
                                           2617 2626 2634 2643 2783 2815 2840 2845 2849 2852 2855 2858 2861 2864 3186
                                           3274 3320 3342 3361 3383 3409 4279 4285 4322 4392 5130 6219 6408 6486 6489
                                           6746 7398 7481 7498 7530 7568 7596 7858 7860 7878 7921 7967 8026
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   2A6CH   R   SEG=MAIN   894 931 933 935 937 939 941 943 945 947 1013 1015 1017 1019 1021
                                           1023 1025 1027 1029 1032 1034 1036 1038 1040 1042 1044 1046 1048 1050 1069
                                           1071 1073 6987#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1502 1514 1518 1533 1558 1561 1562 1670 1674 3539 3543 3618 3622
                                           3664 3668 3759 3763 3808 3812 3894 3907 4115 4129 4131 4133 4144 4147 4229
                                           4240 4335 4362 4704 4708 4875 4879 5428 5447 5465 5528 5545 5791 5794 6140
                                           6172
ADRBLOK. . . . . .  C ADDR   2720H   R   SEG=MAIN   3258 3281 3637 3780 4622 4790 4941 6184#
AFTERK . . . . . .  C ADDR   0699H   R   SEG=MAIN   1166 1245#
AGE2 . . . . . . .  C ADDR   023CH   R   SEG=MAIN   625# 628
AGE9 . . . . . . .  C ADDR   0834H   R   SEG=MAIN   1450# 1453
AGEON. . . . . . .  C ADDR   024AH   R   SEG=MAIN   634# 636
ALESS0 . . . . . .  C ADDR   0969H   R   SEG=MAIN   1615 1636#
ALLSUM . . . . . .  C ADDR   0340H   R   SEG=MAIN   803# 838 856 872
ALMUL. . . . . . .  C ADDR   29B3H   R   SEG=MAIN   6833#
ALTOF. . . . . . .  C ADDR   0402H   A      1132 1230 1261 1269 1287 1303 1314 1331 1344 1412 1941 2031 2091 2129
                                           3671 3768 4243 4338 4365 4453 4531 4539 4557 4663 4675 4690 4774 4836 4852
                                           4925 4987 5002 8009 8017#
ALTOF1 . . . . . .  C ADDR   041EH   A      8026 8041# 8065
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05FFH   R   SEG=MAIN   1130 1146#
AN_T7. . . . . . .  C ADDR   1146H   R   SEG=MAIN   2865# 2932 2941
AUTOKA . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   1164 2054#
AVPGO. . . . . . .  C ADDR   07C6H   R   SEG=MAIN   1388 1390#
AVTDEC1. . . . . .  C ADDR   065BH   R   SEG=MAIN   1199 1208#
AWTOF. . . . . . .  C ADDR   03FCH   A      8010#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   132

B. . . . . . . . .  D ADDR   00F0H   A      122# 5275 5647 6836 6839 6841 6845 6849 6853 6857 6862 6866 6873 6877
                                           6881 6887 6891 6895 6901 7594 7595
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 461#
BFORM. . . . . . .  C ADDR   265DH   R   SEG=MAIN   5989 5994 6006# 6032
BIFL_KT. . . . . .  B ADDR   0021H.5 A      337# 4449 4505 4604
BIN30. . . . . . .  C ADDR   27CFH   R   SEG=MAIN   6396# 6422
BIN31. . . . . . .  C ADDR   27D3H   R   SEG=MAIN   6401# 6405
BIN32. . . . . . .  C ADDR   27E3H   R   SEG=MAIN   6414# 6419
BIN41. . . . . . .  C ADDR   27F4H   R   SEG=MAIN   6430# 6440
BINDEC . . . . . .  C ADDR   27C3H   R   SEG=MAIN   1504 1560 1672 3541 3810 3896 4146 4706 4877 5793 6375#
BITAKT . . . . . .  B ADDR   0023H.2 A      356# 1756 1757 1760
BITAVP . . . . . .  B ADDR   0020H.5 A      327# 1354 1569 1746 2920 2921 2923
BITBON . . . . . .  B ADDR   0021H.2 A      334# 1782 1895 2234 2235 2243 6220
BITBUF . . . . . .  B ADDR   0021H.0 A      332#
BITEIZM. . . . . .  B ADDR   0022H.5 A      347# 1255 1764 2899 2911 4042 5194
BITIZM . . . . . .  B ADDR   0020H.4 A      326# 574 705 2205 2285 2370 2405 2436 2846 2900 3017 3040 3115 3146 3171
                                           3277 3390 3641 3689 3717 3878 3997 4043 4090 4177 4252
BITKLB . . . . . .  B ADDR   0022H.2 A      344# 1324 1780 2210 2919 2926 4250 4519
BITMAS . . . . . .  B ADDR   0020H.1 A      323# 1080 1083 5972
BITMEM . . . . . .  B ADDR   0021H.3 A      335# 1656 2611 3149 3167 3179 3276 3389 3642 3688 3877
BITMENU. . . . . .  B ADDR   0022H.1 A      343# 1655 2435 2547 2901 3170 3697 3716 4002 4044 4089 4176 4249
BITMIG . . . . . .  B ADDR   0023H.1 A      355# 2512 2695 2793 3083 3438 3578 3591 4208 4314 4396 5712 5738 5763
                                           5775 5838 5845 5851 5857
BITNUL . . . . . .  B ADDR   0021H.7 A      339# 1727 2943 2944 2951
BITOLL . . . . . .  B ADDR   0022H.7 A      349# 649 1576 1653
BITPAR . . . . . .  B ADDR   0022H.6 A      348# 4008 4520
BITPRD . . . . . .  B ADDR   0021H.1 A      333# 1894
BITRS. . . . . . .  B ADDR   0020H.3 A      325#
BITT2. . . . . . .  B ADDR   0022H.0 A      342# 1652 2371 2406 2409 2958 3116
BITV19 . . . . . .  B ADDR   0022H.3 A      345# 518 522 2578 2583 2589 3986 3991 4072 4085 4182 4185 4189
BITVI11. . . . . .  B ADDR   0020H.6 A      328# 1352 1368 2228 2230 2284 2434 2898 3009 3016 3169
BITVICH. . . . . .  B ADDR   0022H.4 A      346# 1651 2229 2286 2296 2433 2441 2976 3008 3039 3168
BITZNAK. . . . . .  B ADDR   0020H.0 A      322# 674 720
BITZNB . . . . . .  B ADDR   0023H.3 A      357# 4366 5554 5557
BITZUS . . . . . .  B ADDR   0020H.7 A      329# 1402 1592 1981 1984 2331
BLOIN. . . . . . .  C ADDR   15D0H   R   SEG=MAIN   3546# 3551
BLOKVV . . . . . .  C ADDR   15A2H   R   SEG=MAIN   3516#
BLOKVVC. . . . . .  C ADDR   15ACH   R   SEG=MAIN   3519 3522#
BL_LI. . . . . . .  C ADDR   156DH   R   SEG=MAIN   3466 3474#
BOUT7. . . . . . .  C ADDR   130BH   R   SEG=MAIN   3126# 3128
BRET . . . . . . .  C ADDR   20E8H   R   SEG=MAIN   5215 5220 5224#
BUFDEC . . . . . .  C ADDR   099BH   R   SEG=MAIN   1677# 1682
BUFIND . . . . . .  D ADDR   0040H   A      298# 624 628 633 636 642 1449 1453 1519 1540 1561 1562 1563 1625 1630
                                           1675 1683 1685 1690 1725 1744 1750 1758 1761 1766 1781 1783 2193 2240 2244
                                           2487 2505 2521 2523 2526 2581 2582 2587 2588 2690 2734 2753 2833 2904 2960
                                           3018 3019 3066 3070 3096 3118 3132 3139 3150 3151 3249 3433 3460 3488 3517
                                           3544 3558 3559 3563 3564 3571 3572 3577 3593 3732 3739 3813 3821 3823 3839
                                           3863 3897 3906 3908 3963 3985 3992 4114 4147 4148 4151 4200 4228 4306 4348
                                           4709 4717 4721 4880 4888 4892 5030 5062 5273 5286 5292 5299 5427 5446 5464
                                           5527 5544 5555 5715 5741 5795 5842 5863 6139 6171 6221
BUFMEA . . . . . .  C ADDR   1E09H   R   SEG=MAIN   4711# 4716
BUFMIN . . . . . .  C ADDR   1EFCH   R   SEG=MAIN   4882# 4887
BUFON. . . . . . .  C ADDR   0D46H   R   SEG=MAIN   2234 2243#
BUFR . . . . . . .  C ADDR   08D9H   R   SEG=MAIN   1542# 1547
BUFR2. . . . . . .  C ADDR   08BBH   R   SEG=MAIN   1521# 1526
BUFR3. . . . . . .  C ADDR   08B4H   R   SEG=MAIN   1512 1517#
BUFR30 . . . . . .  C ADDR   08B7H   R   SEG=MAIN   1515 1519#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7591# 7595
CELLBIT. . . . . .  D ADDR   0020H   A      321# 322 323 324 325 326 327 328 329
CELLBIT1 . . . . .  D ADDR   0021H   A      331# 332 333 334 335 337 339
CELLBIT2 . . . . .  D ADDR   0022H   A      341# 342 343 344 345 346 347 348 349
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   133

CELLBIT3 . . . . .  D ADDR   0023H   A      353# 354 355 356 357
CEXP . . . . . . .  C ADDR   01E2H   A      7568 7577#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   218BH   R   SEG=MAIN   2952 5359#
CH1. . . . . . . .  C ADDR   21ABH   R   SEG=MAIN   5179 5370#
CH10 . . . . . . .  C ADDR   218FH   R   SEG=MAIN   855 1094 3798 5360#
CH100. . . . . . .  C ADDR   21A3H   R   SEG=MAIN   802 1610 5365#
CH10000. . . . . .  C ADDR   219FH   R   SEG=MAIN   5364#
CH150H . . . . . .  C ADDR   21F3H   R   SEG=MAIN   5389#
CH2. . . . . . . .  C ADDR   21A7H   R   SEG=MAIN   1089 5366#
CH20 . . . . . . .  C ADDR   236EH   R   SEG=MAIN   837 1099 5678#
CH2THO . . . . . .  C ADDR   21D3H   R   SEG=MAIN   2098 2136 5381#
CH320H . . . . . .  C ADDR   21EFH   R   SEG=MAIN   5388# 6192
CH4. . . . . . . .  C ADDR   2197H   R   SEG=MAIN   1103 5362#
CH43 . . . . . . .  C ADDR   17DBH   R   SEG=MAIN   3815# 3820
CH43_42. . . . . .  C ADDR   1881H   R   SEG=MAIN   3910# 3915
CH5. . . . . . . .  C ADDR   2193H   R   SEG=MAIN   871 5361#
CH57 . . . . . . .  C ADDR   236AH   R   SEG=MAIN   5677#
CH954. . . . . . .  C ADDR   219BH   R   SEG=MAIN   5363#
CHAIBL . . . . . .  C ADDR   141BH   R   SEG=MAIN   3251 3253#
CHAIPR . . . . . .  C ADDR   1730H   R   SEG=MAIN   3734 3736#
CHANMA . . . . . .  C ADDR   0F13H   R   SEG=MAIN   2519 2528#
CHANZ. . . . . . .  C ADDR   0EFAH   R   SEG=MAIN   2473 2517#
CHAVT. . . . . . .  D ADDR   0081H   A      371# 553 1155 1200 1208 2155 3998
CHBEFORE . . . . .  D ADDR   009BH   A      381# 576 799 813 832 850 866
CHBLOK . . . . . .  D ADDR   00D6H   A      408# 4620 4670 4686 4788 4842 4939 4993
CHBUF. . . . . . .  D ADDR   00CFH   A      405# 587 1880 1885 1949 1990 3686
CHCMP. . . . . . .  C ADDR   208BH   R   SEG=MAIN   1161 5156#
CHDEC. . . . . . .  C ADDR   209EH   R   SEG=MAIN   1209 1222 5171#
CHDEL. . . . . . .  D ADDR   0083H   A      372# 2012 2039 2061 2111 2149
CHDELMO. . . . . .  C ADDR   0BDCH   R   SEG=MAIN   2022 2039# 2044
CHIF . . . . . . .  C ADDR   23B3H   R   SEG=MAIN   5719 5722#
CHIF5. . . . . . .  C ADDR   23BBH   R   SEG=MAIN   5725 5727#
CHIFB. . . . . . .  C ADDR   23DEH   R   SEG=MAIN   5745 5748#
CHIFB1 . . . . . .  C ADDR   23E4H   R   SEG=MAIN   5747 5748 5751#
CHIFL5 . . . . . .  C ADDR   23ECH   R   SEG=MAIN   5755 5758#
CHIFOUR. . . . . .  C ADDR   23CDH   R   SEG=MAIN   5732 5734 5738#
CHIND. . . . . . .  D ADDR   00ACH   A      387# 1370 1787
CHIND2 . . . . . .  D ADDR   0033H   A      315# 707 709 717
CHINKOR. . . . . .  D ADDR   0098H   A      370# 548 781 1147 1160 1202 1216 1221 2046
CHK. . . . . . . .  C ADDR   21EBH   R   SEG=MAIN   1325 5387#
CHKL . . . . . . .  D ADDR   003DH   A      305# 687 689 697 699 700 702 2349 2376 2424 2879 3155 3869 4255
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1077 1084 1107 5971
CHMASN . . . . . .  D ADDR   003FH   A      306# 788 797 833 851 867 883 1082 1084 1085
CHMINUS. . . . . .  C ADDR   2705H   R   SEG=MAIN   3271 3317 3339 3358 3380 6154# 6216
CHTADC . . . . . .  C ADDR   2035H   R   SEG=MAIN   5088#
CHTHO. . . . . . .  C ADDR   21CBH   R   SEG=MAIN   1294 1332 4462 4547 4565 5379#
CHTHOU . . . . . .  C ADDR   2272H   R   SEG=MAIN   5515#
CHZAP. . . . . . .  C ADDR   2187H   R   SEG=MAIN   1869 5358#
CH_1 . . . . . . .  C ADDR   21B3H   R   SEG=MAIN   579 1466 1489 1882 1887 1976 1992 3769 5372#
CH_10. . . . . . .  C ADDR   21E3H   R   SEG=MAIN   1472 1495 1954 1965 4244 4695 4865 5385#
CH_10TH. . . . . .  C ADDR   21DFH   R   SEG=MAIN   1383 5384#
CH_2 . . . . . . .  C ADDR   21B7H   R   SEG=MAIN   1946 1959 1973 5373#
CH_200 . . . . . .  C ADDR   21DBH   R   SEG=MAIN   5383#
CH_220 . . . . . .  C ADDR   21D7H   R   SEG=MAIN   1345 5382#
CH_22T . . . . . .  C ADDR   22B0H   R   SEG=MAIN   1422 5563#
CH_250 . . . . . .  C ADDR   21E7H   R   SEG=MAIN   1250 5386#
CH_4 . . . . . . .  C ADDR   21BBH   R   SEG=MAIN   1968 3772 5374#
CH_5 . . . . . . .  C ADDR   21BFH   R   SEG=MAIN   5375#
CH_500 . . . . . .  C ADDR   22ACH   R   SEG=MAIN   1418 5562#
CH_7 . . . . . . .  C ADDR   21C3H   R   SEG=MAIN   5376#
CH_953 . . . . . .  C ADDR   21C7H   R   SEG=MAIN   5378#
CH_B . . . . . . .  C ADDR   22A8H   R   SEG=MAIN   1434 5560#
CH_FL. . . . . . .  C ADDR   22B4H   R   SEG=MAIN   1458 5564#
CH_M3. . . . . . .  C ADDR   21F7H   R   SEG=MAIN   5390#
CH_MLN . . . . . .  C ADDR   21AFH   R   SEG=MAIN   5371#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   134

CIKLWR . . . . . .  C ADDR   2633H   R   SEG=MAIN   5977#
CKCON. . . . . . .  D ADDR   008EH   A      30# 479 510
CL4. . . . . . . .  C ADDR   2209H   R   SEG=MAIN   5407# 5409
CL4N . . . . . . .  C ADDR   220FH   R   SEG=MAIN   5416# 5418
CLE20. . . . . . .  C ADDR   186EH   R   SEG=MAIN   3900# 3902
CLE256 . . . . . .  C ADDR   043EH   A      4078 4495 4597 8073#
CLEAR. . . . . . .  C ADDR   27BDH   R   SEG=MAIN   6353 6357# 6387
CLEAR4 . . . . . .  C ADDR   2206H   R   SEG=MAIN   811 1399 1401 1529 1550 1589 1591 2271 2273 2937 2939 4619 5405#
CLEARN . . . . . .  C ADDR   220EH   R   SEG=MAIN   3619 3665 3760 4106 4220 4331 4359 5414#
CLMASSIX . . . . .  C ADDR   2623H   R   SEG=MAIN   539 1397 1587 2050 2159 2269 2935 3114 5965#
CLMASV . . . . . .  C ADDR   07CBH   R   SEG=MAIN   1392 1394#
CLMAX. . . . . . .  C ADDR   2628H   R   SEG=MAIN   5967# 5970
CLR11. . . . . . .  C ADDR   27BEH   R   SEG=MAIN   6359# 6361
CLRDEC . . . . . .  C ADDR   27B7H   R   SEG=MAIN   6351#
CLRNUM . . . . . .  C ADDR   27BBH   R   SEG=MAIN   6354# 6468
CLRVICH. . . . . .  C ADDR   127BH   R   SEG=MAIN   3039# 3056
CNTR . . . . . . .  N NUMB   0006H   A      7264#
CO02S. . . . . . .  C ADDR   216FH   R   SEG=MAIN   5342# 5346
CO05S. . . . . . .  C ADDR   217CH   R   SEG=MAIN   5351# 5355
CO1S . . . . . . .  C ADDR   2166H   R   SEG=MAIN   5336# 5336
CO2S . . . . . . .  C ADDR   2162H   R   SEG=MAIN   5334# 5338
COMPA1 . . . . . .  C ADDR   0850H   R   SEG=MAIN   1466# 1475
COMPA2 . . . . . .  C ADDR   0886H   R   SEG=MAIN   1489# 1498
COND . . . . . . .  C ADDR   2697H   R   SEG=MAIN   6061#
COPY1. . . . . . .  C ADDR   049FH   A      8155# 8160
COPYPP . . . . . .  C ADDR   0499H   A      4065 4474 4575 8152#
COPY_HL. . . . . .  D ADDR   00D7H   A      409# 3785 3921 4612 4628 4643 4781 4796 4811 4932 4947 4962
COUNT. . . . . . .  C ADDR   2144H   R   SEG=MAIN   5308# 5308
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   214BH   R   SEG=MAIN   5314# 5314
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 484
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1617 1638
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1620 1642
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 485
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1877
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1874
DCOA . . . . . . .  C ADDR   269CH   R   SEG=MAIN   6065# 6067
DCOB . . . . . . .  C ADDR   26A3H   R   SEG=MAIN   6069# 6087
DCOC . . . . . . .  C ADDR   26AEH   R   SEG=MAIN   6079# 6084
DCOD . . . . . . .  C ADDR   26BBH   R   SEG=MAIN   6086 6089#
DDOUTF . . . . . .  C ADDR   1522H   R   SEG=MAIN   3240 3296 3419 3427# 3512
DDOUTFR. . . . . .  C ADDR   13FFH   R   SEG=MAIN   3240# 3246
DEC30. . . . . . .  C ADDR   2810H   R   SEG=MAIN   6478# 6503
DEC31. . . . . . .  C ADDR   2815H   R   SEG=MAIN   6484# 6491
DEC32. . . . . . .  C ADDR   2825H   R   SEG=MAIN   6496# 6500
DECBIN . . . . . .  C ADDR   2803H   R   SEG=MAIN   3623 3669 3764 4241 4336 4363 6457#
DECSIZE. . . . . .  N NUMB   000AH   A      6332# 6352 6386 6413 6426 6429 6483
DECT2. . . . . . .  C ADDR   282EH   R   SEG=MAIN   6474 6506#
DEDPTR . . . . . .  C ADDR   2A83H   R   SEG=MAIN   6991 6995 6999 7005#
DENORM . . . . . .  C ADDR   0133H   A      7423# 7479
DGOTO7 . . . . . .  C ADDR   16B4H   R   SEG=MAIN   3672# 3680
DIAP . . . . . . .  D ADDR   00AEH   A      389# 567 1387 1571 1689 1905 2263 2302 2928 4150 4502 5195 5216 5478 5493
                                           5644 5706
DIINC. . . . . . .  C ADDR   0D6BH   R   SEG=MAIN   2266 2269#
DIKDN. . . . . . .  C ADDR   2342H   R   SEG=MAIN   5646 5666#
DIKDW. . . . . . .  C ADDR   225AH   R   SEG=MAIN   5482 5503#
DIKM . . . . . . .  C ADDR   2270H   R   SEG=MAIN   5514#
DIPAR. . . . . . .  C ADDR   226EH   R   SEG=MAIN   5513#
DIV1 . . . . . . .  C ADDR   02DDH   A      7760# 7819
DIV2 . . . . . . .  C ADDR   0320H   A      7778 7782 7786 7790 7805#
DIV3 . . . . . . .  C ADDR   030DH   A      7779 7783 7787 7791#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   135

DIV9 . . . . . . .  C ADDR   0336H   A      7749 7751 7825#
DIVIDE . . . . . .  C ADDR   28EEH   R   SEG=MAIN   5993 6692#
DONE . . . . . . .  C ADDR   285DH   R   SEG=MAIN   6522 6533#
DONE1. . . . . . .  C ADDR   285BH   R   SEG=MAIN   6525 6528 6531#
DOSH . . . . . . .  C ADDR   2977H   R   SEG=MAIN   6767 6783#
DOSUB. . . . . . .  C ADDR   2965H   R   SEG=MAIN   6751 6755 6759 6763 6764 6768#
DPH. . . . . . . .  D ADDR   0083H   A      19# 545 591 599 606 613 2826 3285 3287 3790 3792 3926 3931 4381 4613 4625
                                           4630 4639 4641 4644 4655 4742 4744 4782 4793 4798 4807 4809 4812 4823 4933
                                           4944 4949 4958 4960 4963 4974 5925 5933 6200 6208 6240 6539 6575 6610 6613
                                           6625 6648 7010 7012 8086 8106 8152
DPL. . . . . . . .  D ADDR   0082H   A      18# 594 602 609 616 2825 3282 3284 3786 3788 3923 3934 4382 4616 4623
                                           4633 4636 4638 4647 4651 4739 4741 4785 4791 4801 4804 4806 4815 4819 4936
                                           4942 4952 4955 4957 4966 4970 5926 5932 6197 6211 6244 6555 6591 6612 6626
                                           6629 6663 7007 7009 8087 8107 8153
DVIG0. . . . . . .  C ADDR   0A76H   R   SEG=MAIN   1823# 1825
DVIG1. . . . . . .  C ADDR   0A6BH   R   SEG=MAIN   1814# 1816
DVIG2. . . . . . .  C ADDR   0A60H   R   SEG=MAIN   1805# 1807
DVIG3. . . . . . .  C ADDR   0A54H   R   SEG=MAIN   1796# 1798
DVIG4. . . . . . .  C ADDR   0A82H   R   SEG=MAIN   1834# 1836
DVIG6. . . . . . .  C ADDR   0AA4H   R   SEG=MAIN   1862# 1864
DVM. . . . . . . .  C ADDR   0AA2H   R   SEG=MAIN   1850 1861#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 482
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 525 691 2173 2812 5060 5072
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1C39H   R   SEG=MAIN   2917 4448#
ENDSDV . . . . . .  C ADDR   0AA8H   R   SEG=MAIN   1856 1865#
ENDSUM . . . . . .  C ADDR   058DH   R   SEG=MAIN   895 948 1051 1076#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   0881H   R   SEG=MAIN   1469 1485#
EQU00. . . . . . .  C ADDR   089FH   R   SEG=MAIN   1487 1492 1501#
EQU1L. . . . . . .  C ADDR   1046H   R   SEG=MAIN   2701 2705#
EQU2L. . . . . . .  C ADDR   1588H   R   SEG=MAIN   3498 3503#
ERROR. . . . . . .  C ADDR   2449H   R   SEG=MAIN   4173 5038 5052 5861#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      7266#
EXP2 . . . . . . .  N NUMB   0001H   A      7268# 7445 7466
EXTCLE . . . . . .  C ADDR   01ACH   R   SEG=MAIN   542# 546
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   2253H   R   SEG=MAIN   4476 5492#
FINDKOEF . . . . .  C ADDR   2244H   R   SEG=MAIN   1328 5477#
FINDMEM. . . . . .  C ADDR   0FAAH   R   SEG=MAIN   2547 2611#
FINDR. . . . . . .  C ADDR   239BH   R   SEG=MAIN   1555 4141 5706#
FINIS. . . . . . .  C ADDR   29A2H   R   SEG=MAIN   6711 6812#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      4667 4679 7471# 7560
FLCMP. . . . . . .  C ADDR   01D6H   A      1252 1347 1385 1420 1424 1468 1491 1889 4838 4854 4989 5004 7565#
FLDIV. . . . . . .  C ADDR   02B7H   A      1275 1296 1334 1441 1460 1474 1967 2100 2138 4460 4545 4563 4694 4697
                                           4867 7735#
FLMUL. . . . . . .  C ADDR   0203H   A      1141 1241 1293 1339 1436 1497 1948 3774 4246 4464 4549 4567 7605#
FLOUT. . . . . . .  C ADDR   01E1H   A      7572 7575#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 8074 8080 8131 8136
FLSUB. . . . . . .  C ADDR   01D1H   A      1233 1884 1994 2096 2134 3771 7558#
FND. . . . . . . .  C ADDR   01F8H   A      7581 7584 7587 7590 7593#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   136

FO1M . . . . . . .  C ADDR   265AH   R   SEG=MAIN   5999 6003#
FO2M . . . . . . .  C ADDR   2663H   R   SEG=MAIN   6006 6008#
FORM4. . . . . . .  C ADDR   2664H   R   SEG=MAIN   6001 6007 6011#
FT1IZM . . . . . .  C ADDR   0E53H   R   SEG=MAIN   2419#
FTOL . . . . . . .  C ADDR   0343H   A      1186 1341 1444 3775 4465 4568 4698 4868 5788 7841#
FTOL1. . . . . . .  C ADDR   037CH   A      7854 7858 7882#
FTOL2. . . . . . .  C ADDR   039EH   A      7878 7915#
FTOL22 . . . . . .  C ADDR   03C4H   A      7918 7952#
FTOL23 . . . . . .  C ADDR   03A2H   A      7919# 7951
FTOL24 . . . . . .  C ADDR   03B5H   A      7921 7937#
FTOL25 . . . . . .  C ADDR   03C2H   A      7936 7951#
FTOL26 . . . . . .  C ADDR   03E4H   A      7967 7983#
FTOL3. . . . . . .  C ADDR   038AH   A      7881 7895#
FTOL33 . . . . . .  C ADDR   038EH   A      7899# 7913
FTOL4. . . . . . .  C ADDR   0371H   A      7860 7875#
FTOL9. . . . . . .  C ADDR   0381H   A      7888# 7898 7914 7982 7997
FULKALIB . . . . .  C ADDR   1CA8H   R   SEG=MAIN   4503 4518# 4606
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   490# 491
GO23NO . . . . . .  C ADDR   14E7H   R   SEG=MAIN   3297 3395#
GO31L. . . . . . .  C ADDR   104CH   R   SEG=MAIN   2679 2710#
GO41L. . . . . . .  C ADDR   1051H   R   SEG=MAIN   2710 2712#
GOA2 . . . . . . .  C ADDR   0781H   R   SEG=MAIN   1351 1353 1356# 1378
GOA3A2 . . . . . .  C ADDR   078BH   R   SEG=MAIN   1361#
GOCIKLE. . . . . .  C ADDR   0B7AH   R   SEG=MAIN   1896 1951 1981# 1988 1995
GOFULL . . . . . .  C ADDR   151AH   R   SEG=MAIN   3401 3423#
GOKAA2 . . . . . .  C ADDR   07A9H   R   SEG=MAIN   1376#
GOKLB. . . . . . .  C ADDR   0D2EH   R   SEG=MAIN   2210 2232#
GOOFF1 . . . . . .  C ADDR   146EH   R   SEG=MAIN   3311# 3320
GOOFF2 . . . . . .  C ADDR   148CH   R   SEG=MAIN   3333# 3342
GOOFF3 . . . . . .  C ADDR   14AAH   R   SEG=MAIN   3352# 3361
GOOFF4 . . . . . .  C ADDR   14C8H   R   SEG=MAIN   3374# 3383
GOONIN . . . . . .  C ADDR   079BH   R   SEG=MAIN   1369# 1403 1577 1593
GOONIND. . . . . .  C ADDR   0972H   R   SEG=MAIN   1372 1643#
GOONOFF. . . . . .  C ADDR   1427H   R   SEG=MAIN   3265# 3274
GOONT. . . . . . .  C ADDR   0B1BH   R   SEG=MAIN   1899 1932#
GOPAROL. . . . . .  C ADDR   1A24H   R   SEG=MAIN   4007 4127 4135#
GOPAROM. . . . . .  C ADDR   193AH   R   SEG=MAIN   4005# 4008
GOPART . . . . . .  C ADDR   031EH   R   SEG=MAIN   783 786#
GOSK19 . . . . . .  C ADDR   0F7BH   R   SEG=MAIN   2578 2585#
GOTO7. . . . . . .  C ADDR   1146H   R   SEG=MAIN   2878# 2949 2956 2994 3043 3072 3084 3126 3130 3175 3191 3200 3206
                                           3211 3217 3232 3294 3448 3451 3465 3502 3505 3561 3574 3580 3606 3608 3649
                                           3672 3690 3745 3944 3951 4170 4180 4212 4263 4265 4281 4293 4350 4515 4526
GOTOKD . . . . . .  C ADDR   0620H   R   SEG=MAIN   1144 1168#
GOTOSTROB. . . . .  C ADDR   0B0DH   R   SEG=MAIN   1910 1913 1916 1919 1922#
GOUT6. . . . . . .  C ADDR   0CE3H   R   SEG=MAIN   2200# 2228
GOVVLIST . . . . .  C ADDR   1754H   R   SEG=MAIN   3728 3750#
GOZNAK . . . . . .  C ADDR   02D0H   R   SEG=MAIN   680 726#
HNOR11 . . . . . .  C ADDR   1286H   R   SEG=MAIN   3005 3047#
HNOR12 . . . . . .  C ADDR   122EH   R   SEG=MAIN   2995 2999#
HNOT1. . . . . . .  C ADDR   12CFH   R   SEG=MAIN   2971 3093#
HNOT2. . . . . . .  C ADDR   11FCH   R   SEG=MAIN   2968#
HR12 . . . . . . .  C ADDR   1224H   R   SEG=MAIN   2990 2995#
HVI1113. . . . . .  C ADDR   121EH   R   SEG=MAIN   2993# 2998 3003
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 527 5018 8073 8081 8130 8140
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   11F8H   R   SEG=MAIN   2963 2965#
IND. . . . . . . .  C ADDR   2003H   R   SEG=MAIN   629 637 682 710 1479 1483 1784 2241 2245 2256 3136 3152 3648 3864
                                           3916 4174 4523 5034 5040 5054 5060# 6222
INDA3. . . . . . .  C ADDR   0939H   R   SEG=MAIN   1608#
INDOLL . . . . . .  C ADDR   0910H   R   SEG=MAIN   1569 1570 1574#
INIACP . . . . . .  C ADDR   22B8H   R   SEG=MAIN   646 3112 5570#
INNOT1_2 . . . . .  C ADDR   160BH   R   SEG=MAIN   3570 3576#
INNOT3 . . . . . .  C ADDR   15FCH   R   SEG=MAIN   3562 3567#
INNOT6 . . . . . .  C ADDR   15F0H   R   SEG=MAIN   3557 3562#
INTERVA. . . . . .  D ADDR   00CDH   A      404# 620 1932 3525 3625
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   137

INTMUL . . . . . .  C ADDR   0B33H   R   SEG=MAIN   1948# 1956 1961 1970 1975 1978
INTMUL1. . . . . .  C ADDR   0B36H   R   SEG=MAIN   1949#
INTN . . . . . . .  C ADDR   169DH   R   SEG=MAIN   3663#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   12B7H   R   SEG=MAIN   3074#
IZMAN. . . . . . .  C ADDR   0DCAH   R   SEG=MAIN   2171 2323#
IZMFUN . . . . . .  C ADDR   0DD9H   R   SEG=MAIN   2257 2268 2275 2327 2330#
IZMPAT . . . . . .  C ADDR   0DDDH   R   SEG=MAIN   2226 2242 2246 2299 2334#
IZMT2. . . . . . .  C ADDR   0DECH   R   SEG=MAIN   2350 2355#
IZMT3. . . . . . .  C ADDR   0DF7H   R   SEG=MAIN   2355 2361#
JFINIS . . . . . .  C ADDR   2909H   R   SEG=MAIN   6703 6711#
KD . . . . . . . .  C ADDR   21CFH   R   SEG=MAIN   5380#
KEYB1. . . . . . .  C ADDR   0CB6H   R   SEG=MAIN   283 2172#
KEYB2. . . . . . .  C ADDR   10DAH   R   SEG=MAIN   286 2811#
KFULL. . . . . . .  C ADDR   14F1H   R   SEG=MAIN   3233 3400#
KFULLR . . . . . .  C ADDR   13EEH   R   SEG=MAIN   3228 3233#
KGO23. . . . . . .  C ADDR   145BH   R   SEG=MAIN   3227 3300#
KLEV1. . . . . . .  C ADDR   13C8H   R   SEG=MAIN   3183 3218#
KLEV2. . . . . . .  C ADDR   13CDH   R   SEG=MAIN   3218 3220#
KLEV21 . . . . . .  C ADDR   13F1H   R   SEG=MAIN   3225 3234#
KLEV22 . . . . . .  C ADDR   13D7H   R   SEG=MAIN   3213 3222 3225#
KLEV23 . . . . . .  C ADDR   1402H   R   SEG=MAIN   3234 3242#
KLEV3. . . . . . .  C ADDR   13D2H   R   SEG=MAIN   3220 3222#
KLMAS. . . . . . .  C ADDR   03CBH   R   SEG=MAIN   815 882#
KNAVP. . . . . . .  C ADDR   1194H   R   SEG=MAIN   2858 2919#
KNIZM. . . . . . .  B ADDR   0023H.0 A      354# 1351 1570 1752 2301 2323 2324 2328
KNIZMON. . . . . .  C ADDR   0DD4H   R   SEG=MAIN   2323 2328#
KNKMP. . . . . . .  C ADDR   10CBH   R   SEG=MAIN   2806# 2852
KNLEFT . . . . . .  C ADDR   11A4H   R   SEG=MAIN   2810 2926#
KNMEM. . . . . . .  C ADDR   132CH   R   SEG=MAIN   2805 3146#
KNMENU . . . . . .  C ADDR   1168H   R   SEG=MAIN   2864 2898#
KNNUL. . . . . . .  C ADDR   11C2H   R   SEG=MAIN   2809 2943#
KNOPT. . . . . . .  C ADDR   0DFFH   R   SEG=MAIN   2170 2369#
KNRAZR . . . . . .  C ADDR   0E14H   R   SEG=MAIN   2169 2382#
KNRIGHT. . . . . .  C ADDR   0D61H   R   SEG=MAIN   2216 2261#
KNVICH . . . . . .  C ADDR   0D80H   R   SEG=MAIN   2225 2278#
KOEFKD . . . . . .  D ADDR   00A0H   A      384# 585 4467 4477 4569 4577
KOEFKM . . . . . .  D ADDR   0094H   A      378# 583 1139 1239 2142
KOEFKP . . . . . .  D ADDR   0090H   A      377# 581 1136 1234 2104
KOMUL. . . . . . .  C ADDR   0749H   R   SEG=MAIN   1327 1331#
KOMULPZ. . . . . .  C ADDR   0743H   R   SEG=MAIN   1324 1328#
KONSTA . . . . . .  D ADDR   00BCH   A      397# 1432 4339 5786
KON_B. . . . . . .  C ADDR   0EDEH   R   SEG=MAIN   2475 2494#
KOR0US . . . . . .  C ADDR   20FCH   R   SEG=MAIN   2020 5249#
KOR0_AN. . . . . .  D ADDR   0084H   A      374# 1231 2032 2094 2132
KORDEC1. . . . . .  C ADDR   0671H   R   SEG=MAIN   1214 1221#
KORDEC10 . . . . .  C ADDR   0651H   R   SEG=MAIN   1202#
KORNUL . . . . . .  C ADDR   0BAFH   R   SEG=MAIN   1151 2012#
KVVOD0 . . . . . .  C ADDR   150DH   R   SEG=MAIN   3193 3409 3418#
LABEL43. . . . . .  C ADDR   174BH   R   SEG=MAIN   3746# 3754
LABEL7 . . . . . .  C ADDR   1834H   R   SEG=MAIN   3746 3869# 3881
LABELA . . . . . .  C ADDR   0297H   R   SEG=MAIN   685# 714 1985
LABELB . . . . . .  C ADDR   0A4DH   R   SEG=MAIN   1194 1596 1789# 2000 2004 2006
LABELC . . . . . .  C ADDR   0E14H   R   SEG=MAIN   2383#
LABELE . . . . . .  C ADDR   0DDDH   R   SEG=MAIN   2332 2348# 2388 2391 2395 2399 2407
LABELF . . . . . .  C ADDR   0E3FH   R   SEG=MAIN   2168 2408#
LABELH . . . . . .  C ADDR   11E4H   R   SEG=MAIN   2808 2958#
LABELI . . . . . .  C ADDR   1B0DH   R   SEG=MAIN   2974 3032 3086 4276#
LABELI2. . . . . .  C ADDR   126BH   R   SEG=MAIN   3032# 3033
LABELK . . . . . .  C ADDR   136CH   R   SEG=MAIN   2973 3176#
LABELL . . . . . .  C ADDR   1007H   R   SEG=MAIN   2545 2640 2648#
LABELL1. . . . . .  C ADDR   0F1BH   R   SEG=MAIN   2532# 2604 2717 2766
LABELN . . . . . .  C ADDR   106BH   R   SEG=MAIN   2605 2726#
LABELP . . . . . .  C ADDR   1721H   R   SEG=MAIN   3676 3697 3728# 3953
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   138

LABELS . . . . . .  C ADDR   16E6H   R   SEG=MAIN   3405 3697#
LABELS1. . . . . .  C ADDR   199BH   R   SEG=MAIN   4023 4053#
LABELS13 . . . . .  C ADDR   1A96H   R   SEG=MAIN   4094 4192#
LABELS3. . . . . .  C ADDR   1B20H   R   SEG=MAIN   4286#
LABELS4. . . . . .  C ADDR   1AFBH   R   SEG=MAIN   4093 4267#
LABL2. . . . . . .  C ADDR   102DH   R   SEG=MAIN   2682# 3237
LABM . . . . . . .  C ADDR   1591H   R   SEG=MAIN   3238 3508#
LADD . . . . . . .  C ADDR   2A4AH   R   SEG=MAIN   794 829 847 863 1872 6938#
LADDX. . . . . . .  C ADDR   2A5BH   R   SEG=MAIN   6962#
LBTOF. . . . . . .  C ADDR   042DH   A      8052#
LCMP . . . . . . .  C ADDR   2848H   R   SEG=MAIN   5166 6030 6518#
LDC_LONG . . . . .  C ADDR   285EH   R   SEG=MAIN   580 1326 1870 2099 2137 2953 6538#
LDC_LTEMP. . . . .  C ADDR   2880H   R   SEG=MAIN   803 1090 1095 1100 1104 1251 1295 1333 1346 1384 1419 1423 1435
                                           1459 1467 1473 1490 1496 1611 1883 1888 1947 1955 1960 1966 1969 1974 1977
                                           1993 3770 3773 3799 4245 4463 4548 4566 4696 4866 5180 6193 6574#
LDX_LONG . . . . .  C ADDR   28A6H   R   SEG=MAIN   6609#
LDX_LTEMP. . . . .  C ADDR   28CCH   R   SEG=MAIN   6647#
LEFCUR . . . . . .  C ADDR   161CH   R   SEG=MAIN   3586# 3658 3674
LEFKL. . . . . . .  C ADDR   11AEH   R   SEG=MAIN   2926 2932#
LEFMEM11 . . . . .  C ADDR   137AH   R   SEG=MAIN   3184# 3219 3221 3223
LEFT21 . . . . . .  C ADDR   153BH   R   SEG=MAIN   3444 3449#
LEFT_S . . . . . .  C ADDR   1998H   R   SEG=MAIN   4052# 4055
LEFT_SK. . . . . .  C ADDR   1A7DH   R   SEG=MAIN   4052 4182#
LEV220 . . . . . .  C ADDR   13DAH   R   SEG=MAIN   3226# 3235
LEV2GO . . . . . .  C ADDR   1091H   R   SEG=MAIN   2725 2762#
LEVEL. . . . . . .  D ADDR   00B0H   A      391# 2248 2612 2650 3153 3163 3182 3420 5736
LI21 . . . . . . .  C ADDR   12C1H   R   SEG=MAIN   3081 3083#
LI42_43. . . . . .  C ADDR   17BAH   R   SEG=MAIN   3796# 3936
LIST_43. . . . . .  C ADDR   183EH   R   SEG=MAIN   3748 3874#
LLDI2. . . . . . .  C ADDR   0DC3H   R   SEG=MAIN   2314 2318#
LLDI23 . . . . . .  C ADDR   0DB7H   R   SEG=MAIN   2306 2311#
LLDI3. . . . . . .  C ADDR   0DBEH   R   SEG=MAIN   2313 2315#
LLEV2. . . . . . .  C ADDR   1056H   R   SEG=MAIN   2681 2715#
LLMUL. . . . . . .  C ADDR   29B3H   R   SEG=MAIN   6832#
LLSUB. . . . . . .  C ADDR   2A38H   R   SEG=MAIN   6914#
LLTOF. . . . . . .  C ADDR   0432H   A      8058#
LMUL . . . . . . .  C ADDR   29B3H   R   SEG=MAIN   5988 6194 6834#
LOA3_X . . . . . .  C ADDR   2793H   R   SEG=MAIN   1902 6258#
LOAB12 . . . . . .  C ADDR   2307H   R   SEG=MAIN   3110 5611#
LOAD . . . . . . .  D ADDR   00B7H   A      395# 2372 2413 2961 3106 5272
LOADB. . . . . . .  C ADDR   12E2H   R   SEG=MAIN   3101 3104# 3137 3143
LOADB2 . . . . . .  C ADDR   130EH   R   SEG=MAIN   3124 3128#
LOADCLE. . . . . .  C ADDR   1398H   R   SEG=MAIN   3198# 3412
LOADKD . . . . . .  C ADDR   2324H   R   SEG=MAIN   5644#
LOADR2 . . . . . .  C ADDR   2316H   R   SEG=MAIN   3670 3765 4242 4337 4364 5627#
LOADT. . . . . . .  C ADDR   2117H   R   SEG=MAIN   2374 2419 2967 5272#
LOADUS . . . . . .  C ADDR   20B6H   R   SEG=MAIN   647 1395 1584 2274 2329 2912 2940 3113 4605 5193#
LOAHL_R2 . . . . .  C ADDR   1E1EH   R   SEG=MAIN   4662 4674 4725# 4834 4850 4985 5000
LOBLOK . . . . . .  C ADDR   1546H   R   SEG=MAIN   3398 3456# 3475
LOCLE. . . . . . .  C ADDR   1393H   R   SEG=MAIN   3187 3196#
LOD1 . . . . . . .  C ADDR   2126H   R   SEG=MAIN   5280# 5285
LODT . . . . . . .  C ADDR   2135H   R   SEG=MAIN   5293# 5298
LOIZMK . . . . . .  C ADDR   1231H   R   SEG=MAIN   3000# 3037
LOKAME1. . . . . .  C ADDR   18EDH   R   SEG=MAIN   3967#
LOLEVT . . . . . .  C ADDR   2119H   R   SEG=MAIN   2254 5273#
LOLIST . . . . . .  C ADDR   1387H   R   SEG=MAIN   3189#
LOME1. . . . . . .  C ADDR   1BEDH   R   SEG=MAIN   4415# 4419 4422 4425 4428 4432 4435 4438 4441 4445
LOMENU . . . . . .  C ADDR   1BE5H   R   SEG=MAIN   2560 2573 3967 4010 4033 4412#
LOOP . . . . . . .  C ADDR   2072H   R   SEG=MAIN   5129# 5130
LOOPS. . . . . . .  C ADDR   290CH   R   SEG=MAIN   6713# 6746
LOSPUS . . . . . .  C ADDR   20F0H   R   SEG=MAIN   2021 5232#
LOSTAT . . . . . .  C ADDR   13AFH   R   SEG=MAIN   3202 3208#
LOTEXT . . . . . .  C ADDR   2131H   R   SEG=MAIN   1478 1482 1575 2292 2450 2458 2466 2580 2586 2620 2629 2637 2646
                                           2654 2903 2993 3063 3148 3190 3199 3205 3210 3216 3231 3424 3457 3469 3524
                                           3646 3714 3738 3905 3941 3949 3962 3984 3990 4029 4138 4184 4188 4346 4415
                                           4522 5290# 5862
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   139

LOTP . . . . . . .  C ADDR   237AH   R   SEG=MAIN   5685# 5695 5698
LOTPUS . . . . . .  C ADDR   2372H   R   SEG=MAIN   4041 5227 5682#
LOU. . . . . . . .  C ADDR   0DC9H   R   SEG=MAIN   2301 2317 2321#
LOUIZM . . . . . .  C ADDR   0DA6H   R   SEG=MAIN   2301# 2326 5224
LOUTF. . . . . . .  C ADDR   1049H   R   SEG=MAIN   2707# 2716 2723
LOVICH . . . . . .  C ADDR   1227H   R   SEG=MAIN   2996# 3030 3051 4377
LOWR . . . . . . .  C ADDR   13A1H   R   SEG=MAIN   3196 3202#
LOWR1. . . . . . .  C ADDR   13A6H   R   SEG=MAIN   3204# 3416
LSUB . . . . . . .  C ADDR   2A38H   R   SEG=MAIN   1191 1364 5181 6915#
LTEMP. . . . . . .  N NUMB   0008H   A      1107 1109 1110 1111 5517 5518 5519 5520 6040 6043 6046 6049 6092 6093
                                           6094 6095 6330# 6704 6705 6706 6707 6716 6720 6724 6728 6731 6732 6733
                                           6734 6735 6736 6737 6738 6739 6740 6741 6742 6745 6748 6753 6757 6761 6771
                                           6774 6777 6780 6796 6799 6800 6802 6803 6805 6806 6808 6813 6814 6815 6816
                                           6836 6841 6849 6857 6862 6873 6881 6887 6895 6901 7269 7270 7309 7314 7316
                                           7325 7326 7327 7328 7559 7567 7580 7583 7586 7589 8169 8172 8175 8178
LWR. . . . . . . .  C ADDR   2635H   R   SEG=MAIN   5979# 5983
LWRX . . . . . . .  C ADDR   25F9H   R   SEG=MAIN   5924# 5936
LWTOF. . . . . . .  C ADDR   042FH   A      8054#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   2650H   R   SEG=MAIN   1665 3802 4699 4870 5987 5992 5997# 6029
MAIN . . . . . . .  C SEG    2A95H       REL=UNIT   237 294# 454
MANT1. . . . . . .  N NUMB   0002H   A      7267# 7294 7343 7344
MANT2. . . . . . .  N NUMB   0008H   A      7269# 7320 7321 7452 7454 7455 7457 7458 7460 7461 7463 7502 7503 7505
                                           7506 7508 7509 7511 7512 7516 7518 7521 7524 7622 7624 7625 7627 7628 7630
                                           7631 7633 7684 7686 7687 7689 7690 7692 7693 7695 7777 7781 7785 7789 7793
                                           7796 7799 7802
MARK0_8. . . . . .  C ADDR   0EE5H   R   SEG=MAIN   2477 2495 2497#
MARKER . . . . . .  D ADDR   00B2H   A      393# 558 2192 2437 2476 2486 2494 2504 2510 2689 2697 2733 2740 2752 2832
                                           3041 3058 3079 3172 3291 3391 3432 3440 3461 3487 3494 3552 3592 3599 3639
                                           3682 3740 3756 3879 4011 4165 4178 4199 4206 4253 4286 4305 4312 4342 4373
                                           5713 5739 5765 5776 5834
MARLE. . . . . . .  C ADDR   23EEH   R   SEG=MAIN   3607 5762#
MARRI. . . . . . .  C ADDR   23FBH   R   SEG=MAIN   2760 5775#
MAS10. . . . . . .  C ADDR   03EAH   R   SEG=MAIN   884 897#
MAS20. . . . . . .  C ADDR   046AH   R   SEG=MAIN   897 952#
MAS4 . . . . . . .  C ADDR   055EH   R   SEG=MAIN   950 1053#
MAS5DIV. . . . . .  C ADDR   05D2H   R   SEG=MAIN   1091 1096 1101 1105 1113#
MASFULL. . . . . .  C ADDR   0599H   R   SEG=MAIN   1080 1084#
MASS0. . . . . . .  X ADDR   0100H   A      417 418# 885 890 919 927 1001 1009 1058 1065 5966
MASS1. . . . . . .  X ADDR   0104H   A      419# 893 916 930 998 1012 1056 1068
MASS10 . . . . . .  X ADDR   0128H   A      428# 974 1031
MASS11 . . . . . .  X ADDR   012CH   A      429# 971 1033
MASS12 . . . . . .  X ADDR   0130H   A      430# 968 1035
MASS13 . . . . . .  X ADDR   0134H   A      431# 965 1037
MASS14 . . . . . .  X ADDR   0138H   A      432# 962 1039
MASS15 . . . . . .  X ADDR   013CH   A      433# 959 1041
MASS16 . . . . . .  X ADDR   0140H   A      434# 957 1043
MASS17 . . . . . .  X ADDR   0144H   A      435# 955 1045
MASS18 . . . . . .  X ADDR   0148H   A      436# 953 1047
MASS19 . . . . . .  X ADDR   014CH   A      437# 1049
MASS2. . . . . . .  X ADDR   0108H   A      420# 913 932 995 1014 1054 1070
MASS3. . . . . . .  X ADDR   010CH   A      421# 910 934 992 1016 1072
MASS4. . . . . . .  X ADDR   0110H   A      422# 907 936 989 1018
MASS5. . . . . . .  X ADDR   0114H   A      423# 904 938 986 1020
MASS6. . . . . . .  X ADDR   0118H   A      424# 902 940 984 1022
MASS7. . . . . . .  X ADDR   011CH   A      425# 900 942 982 1024
MASS8. . . . . . .  X ADDR   0120H   A      426# 898 944 980 1026
MASS9. . . . . . .  X ADDR   0124H   A      427# 946 977 1028
MASX5. . . . . . .  C ADDR   05C8H   R   SEG=MAIN   1082 1107#
MAXG . . . . . . .  C ADDR   1F45H   R   SEG=MAIN   4941# 4995
MAXVIX . . . . . .  C ADDR   1FAFH   R   SEG=MAIN   5005 5010#
ME11_15DE. . . . .  C ADDR   16DDH   R   SEG=MAIN   3692# 3711
ME11_15DEC . . . .  C ADDR   18ECH   R   SEG=MAIN   3692 3966#
ME21_22. . . . . .  C ADDR   1011H   R   SEG=MAIN   2654# 2663
ME21_23. . . . . .  C ADDR   1956H   R   SEG=MAIN   3725 4019#
ME21_23DEC . . . .  C ADDR   1972H   R   SEG=MAIN   4026 4031#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   140

MEAVP. . . . . . .  C ADDR   119FH   R   SEG=MAIN   2920 2923#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   531# 533
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   535# 538
MEM10MS. . . . . .  C ADDR   0292H   R   SEG=MAIN   682#
MEM12NO. . . . . .  C ADDR   1508H   R   SEG=MAIN   3410 3414#
MENG . . . . . . .  C ADDR   1D6AH   R   SEG=MAIN   4622# 4672
MENU12 . . . . . .  C ADDR   1BF1H   R   SEG=MAIN   4413 4417#
MENU13 . . . . . .  C ADDR   1BF9H   R   SEG=MAIN   4417 4420#
MENU14 . . . . . .  C ADDR   1C01H   R   SEG=MAIN   4420 4423#
MENU15 . . . . . .  C ADDR   1C09H   R   SEG=MAIN   4423 4426#
MENU21 . . . . . .  C ADDR   1C11H   R   SEG=MAIN   4426 4430#
MENU22 . . . . . .  C ADDR   1C19H   R   SEG=MAIN   4430 4433#
MENU23 . . . . . .  C ADDR   1C21H   R   SEG=MAIN   4433 4436#
MENU31 . . . . . .  C ADDR   1C29H   R   SEG=MAIN   4436 4439#
MENU41 . . . . . .  C ADDR   1C31H   R   SEG=MAIN   4439 4443#
MENUOFF. . . . . .  C ADDR   1182H   R   SEG=MAIN   2899 2908#
MENUON . . . . . .  C ADDR   1713H   R   SEG=MAIN   3716#
MERR . . . . . . .  C ADDR   1165H   R   SEG=MAIN   2895# 2898
ME_14. . . . . . .  C ADDR   13BAH   R   SEG=MAIN   3213#
ME_41. . . . . . .  C ADDR   19E7H   R   SEG=MAIN   4053 4096#
MIDL . . . . . . .  C ADDR   293FH   R   SEG=MAIN   6708 6743#
MIGN . . . . . . .  C ADDR   242BH   R   SEG=MAIN   5061 5834#
MIGNN. . . . . . .  C ADDR   2433H   R   SEG=MAIN   5836 5841#
MIN4_HL. . . . . .  C ADDR   1E2AH   R   SEG=MAIN   4738# 4752 4778 4903 4929
MING . . . . . . .  C ADDR   1E6CH   R   SEG=MAIN   4790# 4844
MINIVIX. . . . . .  C ADDR   1ED6H   R   SEG=MAIN   4855 4860# 5010
MLABL2 . . . . . .  C ADDR   1571H   R   SEG=MAIN   3425 3479# 3510 3749
MLABL2R. . . . . .  C ADDR   1751H   R   SEG=MAIN   3749# 3752
MMM. . . . . . . .  C ADDR   028DH   R   SEG=MAIN   678#
MO220. . . . . . .  C ADDR   0905H   R   SEG=MAIN   1206 1374 1569#
MO500I . . . . . .  C ADDR   0875H   R   SEG=MAIN   1425 1481#
MO500R . . . . . .  C ADDR   0869H   R   SEG=MAIN   1421 1477#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0FA4H   R   SEG=MAIN   2606# 2617 2626 2634 2643
MOUTKMEM . . . . .  C ADDR   16E0H   R   SEG=MAIN   3693# 3701
MOVE28 . . . . . .  C ADDR   26BDH   R   SEG=MAIN   1270 1288 1335 1427 2097 2135 4457 4540 4558 4664 4676 4691 4833
                                           4849 4984 4999 6092#
MOVE82 . . . . . .  C ADDR   2276H   R   SEG=MAIN   5517#
MOVEA3 . . . . . .  C ADDR   0972H   R   SEG=MAIN   1621 1646#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2478 2705 2745 3060 3397 3441 3449 3503 3555 3600 3743 4014 4167
                                           4209 4287 4315 5769
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2474 2698 2702 2741 3061 3396 3445 3495 3499 3554 3604 3742 4013
                                           4168 4291 5778
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7619# 7662
MUP11. . . . . . .  C ADDR   0257H   A      7666# 7711
MUP2 . . . . . . .  C ADDR   0297H   A      7696 7710#
MUP3 . . . . . . .  C ADDR   026CH   A      7665 7681#
MVV11. . . . . . .  C ADDR   1541H   R   SEG=MAIN   3421 3454#
MVV12. . . . . . .  C ADDR   1559H   R   SEG=MAIN   3454 3466#
N12DELCH . . . . .  C ADDR   0CA3H   R   SEG=MAIN   2153 2161#
N4DELCH. . . . . .  C ADDR   0C4FH   R   SEG=MAIN   2077 2115#
N8DELCH. . . . . .  C ADDR   0C91H   R   SEG=MAIN   2115 2153#
NBIMENU. . . . . .  C ADDR   0FAAH   R   SEG=MAIN   2610#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 618 1907 3254 3458 3522 3736 3827 6184 6205 6236
NE05 . . . . . . .  C ADDR   0358H   A      7848 7850 7852 7855#
NELEM. . . . . . .  D ADDR   0037H   A      312# 619 3767 3884 3888
NEXIN. . . . . . .  C ADDR   200DH   R   SEG=MAIN   5064# 5071
NEXTMAX. . . . . .  C ADDR   1F7AH   R   SEG=MAIN   4973 4981#
NEXTMEA. . . . . .  C ADDR   1D9FH   R   SEG=MAIN   4654 4662#
NEXTMIN. . . . . .  C ADDR   1EA1H   R   SEG=MAIN   4822 4830#
NMEM_MENU. . . . .  C ADDR   16E3H   R   SEG=MAIN   3695# 3699
NMINUS . . . . . .  C ADDR   068EH   R   SEG=MAIN   1236 1240#
NMINUS3. . . . . .  C ADDR   05F2H   R   SEG=MAIN   1138 1140#
NNDELCH. . . . . .  C ADDR   0C0FH   R   SEG=MAIN   2062 2077#
NNMEMB . . . . . .  C ADDR   109DH   R   SEG=MAIN   2608 2768#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   141

NNNUL. . . . . . .  C ADDR   09E9H   R   SEG=MAIN   1727 1730#
NO . . . . . . . .  C ADDR   2927H   R   SEG=MAIN   6718 6722 6726 6730#
NO0KEY . . . . . .  C ADDR   02A4H   R   SEG=MAIN   688 690 694#
NO10MSV. . . . . .  C ADDR   1684H   R   SEG=MAIN   3644 3650#
NO11V6 . . . . . .  C ADDR   0E97H   R   SEG=MAIN   2445 2453#
NO12V6 . . . . . .  C ADDR   0EAAH   R   SEG=MAIN   2453 2461#
NO13V6 . . . . . .  C ADDR   0EBDH   R   SEG=MAIN   2461 2471#
NO21P7 . . . . . .  C ADDR   1B8DH   R   SEG=MAIN   4325 4355#
NO23RI . . . . . .  C ADDR   0F61H   R   SEG=MAIN   2571 2575#
NO2MSV . . . . . .  C ADDR   1681H   R   SEG=MAIN   3649# 3650 3660
NO2PARN. . . . . .  C ADDR   095EH   R   SEG=MAIN   1623 1629#
NO31N. . . . . . .  C ADDR   163BH   R   SEG=MAIN   3613#
NO31RI . . . . . .  C ADDR   0F8CH   R   SEG=MAIN   2577 2596#
NO3PARN. . . . . .  C ADDR   0954H   R   SEG=MAIN   1623# 1708
NO4DEL . . . . . .  C ADDR   0BE2H   R   SEG=MAIN   2025 2043#
NOAVK. . . . . . .  C ADDR   0660H   R   SEG=MAIN   1162 1211#
NOAVP. . . . . . .  C ADDR   0781H   R   SEG=MAIN   1355# 1386 1389
NOBAVP . . . . . .  C ADDR   0A05H   R   SEG=MAIN   1480 1484 1564 1746 1750#
NOBEF99. . . . . .  C ADDR   035BH   R   SEG=MAIN   800 816# 835 853 869
NOBIT. . . . . . .  C ADDR   0245H   A      7634 7648#
NOBITIZM . . . . .  C ADDR   0A0EH   R   SEG=MAIN   1752 1755#
NOBL21 . . . . . .  C ADDR   101AH   R   SEG=MAIN   2651 2659#
NOBL22 . . . . . .  C ADDR   1024H   R   SEG=MAIN   2659 2679#
NOBUF. . . . . . .  C ADDR   0A43H   R   SEG=MAIN   1782 1784#
NOBUF0 . . . . . .  C ADDR   0B8AH   R   SEG=MAIN   1897 1990#
NOCHI0 . . . . . .  C ADDR   0935H   R   SEG=MAIN   1375 1595#
NOCHIND. . . . . .  C ADDR   02C3H   R   SEG=MAIN   708 716#
NOCHN10. . . . . .  C ADDR   05B5H   R   SEG=MAIN   1093 1098#
NOCHN2 . . . . . .  C ADDR   05AAH   R   SEG=MAIN   1088 1093#
NOCHN20. . . . . .  C ADDR   05C0H   R   SEG=MAIN   1098 1103#
NODI2. . . . . . .  C ADDR   091BH   R   SEG=MAIN   1572 1579#
NODI6. . . . . . .  C ADDR   11B0H   R   SEG=MAIN   2930 2934#
NODI8. . . . . . .  C ADDR   09C0H   R   SEG=MAIN   1692 1698#
NODI8K . . . . . .  C ADDR   1A51H   R   SEG=MAIN   4153 4158#
NODI8_43 . . . . .  C ADDR   1817H   R   SEG=MAIN   3841 3847#
NODI9. . . . . . .  C ADDR   0920H   R   SEG=MAIN   1581 1584#
NODI9_43 . . . . .  C ADDR   1822H   R   SEG=MAIN   3847 3855#
NODIS9 . . . . . .  C ADDR   09CFH   R   SEG=MAIN   1698 1710#
NODISK9. . . . . .  C ADDR   1A59H   R   SEG=MAIN   4157 4158 4165#
NOENDLI. . . . . .  C ADDR   275FH   R   SEG=MAIN   6219 6223#
NOEQU1 . . . . . .  C ADDR   1082H   R   SEG=MAIN   2744 2748#
NOEQU2 . . . . . .  C ADDR   1635H   R   SEG=MAIN   3603 3607#
NOFIZM . . . . . .  C ADDR   0E79H   R   SEG=MAIN   2409 2441#
NOFT1. . . . . . .  C ADDR   0E52H   R   SEG=MAIN   2414 2418#
NOFZ . . . . . . .  C ADDR   0B85H   R   SEG=MAIN   1981 1985#
NOH37. . . . . . .  C ADDR   1246H   R   SEG=MAIN   2989 3013# 3024
NOHNOT1. . . . . .  C ADDR   1321H   R   SEG=MAIN   3095 3138#
NOHNOT2. . . . . .  C ADDR   1316H   R   SEG=MAIN   3131# 3138
NOKLB. . . . . . .  C ADDR   0A3DH   R   SEG=MAIN   1780 1782#
NOKORR . . . . . .  C ADDR   0608H   R   SEG=MAIN   1149 1152#
NOLAH. . . . . . .  C ADDR   1208H   R   SEG=MAIN   2958 2976#
NOLI_43. . . . . .  C ADDR   1892H   R   SEG=MAIN   3874 3919#
NOM31. . . . . . .  C ADDR   1613H   R   SEG=MAIN   3507 3582#
NOM32. . . . . . .  C ADDR   168CH   R   SEG=MAIN   3582 3656#
NOM33. . . . . . .  C ADDR   16BAH   R   SEG=MAIN   3656 3676#
NOMARL . . . . . .  C ADDR   1B35H   R   SEG=MAIN   4289 4295 4299#
NOMAXI . . . . . .  C ADDR   1F92H   R   SEG=MAIN   4990 4993#
NOME11 . . . . . .  C ADDR   14F8H   R   SEG=MAIN   3407#
NOMEM11. . . . . .  C ADDR   0FC5H   R   SEG=MAIN   2613 2623#
NOMEM12. . . . . .  C ADDR   0FDBH   R   SEG=MAIN   2623 2631#
NOMEM13. . . . . .  C ADDR   0FF1H   R   SEG=MAIN   2631 2640#
NOMEMK . . . . . .  C ADDR   14F5H   R   SEG=MAIN   3161 3404#
NOMINI . . . . . .  C ADDR   1EB9H   R   SEG=MAIN   4839 4842#
NON1C. . . . . . .  C ADDR   0E25H   R   SEG=MAIN   2389 2393#
NONULAVT . . . . .  C ADDR   0645H   R   SEG=MAIN   1157 1196#
NONULDEL . . . . .  C ADDR   0BC4H   R   SEG=MAIN   2013 2024#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   142

NOP3_0 . . . . . .  C ADDR   0939H   R   SEG=MAIN   1601#
NOPART1. . . . . .  C ADDR   035FH   R   SEG=MAIN   789 823#
NOPART2. . . . . .  C ADDR   037FH   R   SEG=MAIN   823 842#
NOPART3. . . . . .  C ADDR   039FH   R   SEG=MAIN   842 858#
NOPART4. . . . . .  C ADDR   03BFH   R   SEG=MAIN   858 875#
NOPLUS . . . . . .  C ADDR   0F0DH   R   SEG=MAIN   2522 2525#
NOPOIN7. . . . . .  C ADDR   1B4CH   R   SEG=MAIN   4285 4320#
NOPOINT. . . . . .  C ADDR   1B18H   R   SEG=MAIN   4279 4283#
NOR11. . . . . . .  C ADDR   0F21H   R   SEG=MAIN   2536#
NORDN. . . . . . .  C ADDR   00F6H   A      7355# 7388
NORDN1 . . . . . .  C ADDR   0107H   A      7357 7371#
NORIG2 . . . . . .  C ADDR   105FH   R   SEG=MAIN   2712 2720#
NORIM6 . . . . . .  C ADDR   109DH   R   SEG=MAIN   2772#
NORIME . . . . . .  C ADDR   0F47H   R   SEG=MAIN   2558 2562#
NORIME1. . . . . .  C ADDR   0F41H   R   SEG=MAIN   2560# 2563 2576
NORM1. . . . . . .  C ADDR   00F0H   A      7350# 7547 7724 7826 8043
NORR11 . . . . . .  C ADDR   125EH   R   SEG=MAIN   3026#
NORR12 . . . . . .  C ADDR   126EH   R   SEG=MAIN   3026 3033# 3047
NORUP. . . . . . .  C ADDR   0119H   A      7354 7391#
NORUP1 . . . . . .  C ADDR   011EH   A      7396# 7414
NORUP2 . . . . . .  C ADDR   0132H   A      7398 7415#
NORVICH. . . . . .  C ADDR   0A46H   R   SEG=MAIN   1707 1785#
NOSAV1 . . . . . .  C ADDR   0AFBH   R   SEG=MAIN   1908 1911#
NOSAV2 . . . . . .  C ADDR   0B02H   R   SEG=MAIN   1911 1914#
NOSAV3 . . . . . .  C ADDR   0B09H   R   SEG=MAIN   1914 1917#
NOSUB. . . . . . .  C ADDR   2962H   R   SEG=MAIN   6752 6756 6760 6765#
NOT1IN . . . . . .  C ADDR   0B9AH   R   SEG=MAIN   1858 1998#
NOT1_7 . . . . . .  C ADDR   1155H   R   SEG=MAIN   2880 2887#
NOT2IN . . . . . .  C ADDR   0BA2H   R   SEG=MAIN   1998 2002#
NOT2_7 . . . . . .  C ADDR   1160H   R   SEG=MAIN   2887 2892#
NOT3IN . . . . . .  C ADDR   0BAAH   R   SEG=MAIN   2002 2005#
NOTAKT . . . . . .  C ADDR   0A18H   R   SEG=MAIN   1756 1760#
NOTE21 . . . . . .  C ADDR   0705H   R   SEG=MAIN   1257 1299#
NOTE22 . . . . . .  C ADDR   0720H   R   SEG=MAIN   1299 1311#
NOTESTIZM. . . . .  C ADDR   0738H   R   SEG=MAIN   1220 1323#
NOTT1. . . . . . .  C ADDR   0B3DH   R   SEG=MAIN   1944 1953#
NOTT2. . . . . . .  C ADDR   0B48H   R   SEG=MAIN   1953 1958#
NOTT3. . . . . . .  C ADDR   0B53H   R   SEG=MAIN   1958 1964#
NOTT4. . . . . . .  C ADDR   0B67H   R   SEG=MAIN   1964 1972#
NOTT5. . . . . . .  C ADDR   0B72H   R   SEG=MAIN   1972 1976#
NOT_1. . . . . . .  C ADDR   0E2CH   R   SEG=MAIN   2393 2398#
NOT_10 . . . . . .  C ADDR   0E2CH   R   SEG=MAIN   2397#
NOVIR. . . . . . .  C ADDR   0F29H   R   SEG=MAIN   2430 2547#
NOVIR1 . . . . . .  C ADDR   0E63H   R   SEG=MAIN   2430# 2441
NOZMEA . . . . . .  C ADDR   1E1AH   R   SEG=MAIN   4719 4721#
NOZMIN . . . . . .  C ADDR   1F0DH   R   SEG=MAIN   4890 4892#
NOZZBL . . . . . .  C ADDR   1809H   R   SEG=MAIN   3830 3833 3836 3839#
NOZZMI . . . . . .  C ADDR   09B0H   R   SEG=MAIN   1687 1689#
NOZZMI1. . . . . .  C ADDR   17F9H   R   SEG=MAIN   3828 3831#
NOZZMI2. . . . . .  C ADDR   1800H   R   SEG=MAIN   3831 3834#
NOZZMI3. . . . . .  C ADDR   1807H   R   SEG=MAIN   3834 3837#
NOZZMI43 . . . . .  C ADDR   17F0H   R   SEG=MAIN   3825 3827#
NSEC1. . . . . . .  C ADDR   09F2H   R   SEG=MAIN   1731 1734#
NSEC10 . . . . . .  C ADDR   09FBH   R   SEG=MAIN   1733 1736 1741#
NSEC11 . . . . . .  C ADDR   09F9H   R   SEG=MAIN   1734 1738#
NUERR. . . . . . .  D ADDR   0039H   A      310# 4172 5037 5051 5863
NULAVT . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   2060#
NUMSIZE. . . . . .  N NUMB   0004H   A      6333# 6355 6393 6400 6475 6495
OBOARD . . . . . .  C ADDR   2898H   R   SEG=MAIN   6576 6590#
OBOARD1. . . . . .  C ADDR   28E0H   R   SEG=MAIN   6649 6662#
OK1. . . . . . . .  C ADDR   0186H   A      7481 7496#
OK2. . . . . . . .  C ADDR   01A0H   A      7498 7513#
OK3. . . . . . . .  C ADDR   01C4H   A      7530 7546#
ONBOAR1. . . . . .  C ADDR   28BEH   R   SEG=MAIN   6611 6628#
ONBOARD. . . . . .  C ADDR   2872H   R   SEG=MAIN   6540 6554#
ONMEM11. . . . . .  C ADDR   1343H   R   SEG=MAIN   2907 2922 2924 3155# 3715 3721 3964 3968 3973 3988 3993 4016 4030
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   143

                                           4034 4045
ONMEM12. . . . . .  C ADDR   1979H   R   SEG=MAIN   4035# 4038 4057
ONMEM13. . . . . .  C ADDR   1AF8H   R   SEG=MAIN   4210 4265# 4269 4271
ONMIG. . . . . . .  C ADDR   2441H   R   SEG=MAIN   5845 5854#
ONVICH . . . . . .  C ADDR   0D9EH   R   SEG=MAIN   2284 2296#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 493
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 486 490
OUT43. . . . . . .  C ADDR   182BH   R   SEG=MAIN   3864#
OUT6 . . . . . . .  C ADDR   109DH   R   SEG=MAIN   2167 2232 2277 2354 2359 2364 2380 2416 2421 2428 2439 2561 2574
                                           2584 2590 2773#
OUT7 . . . . . . .  C ADDR   1BB6H   R   SEG=MAIN   2806 2807 2884 2891 2895 2913 2964 2969 3020 3159 3239 3472 3566
                                           3695 3866 3873 3918 4003 4091 4186 4190 4260 4274 4317 4322 4352 4380#
OUTA . . . . . . .  C ADDR   2408H   R   SEG=MAIN   3065 5786#
OUTA2. . . . . . .  C ADDR   2422H   R   SEG=MAIN   5797# 5802
OUTF . . . . . . .  C ADDR   0E59H   R   SEG=MAIN   2424# 2447 2451 2455 2459 2463 2467 2492 2515 2524 2527 2534 2606
                                           2621 2630 2638 2647 2657 2704 2707 2747 2761 2764 3010 3011 4035
OUTFL. . . . . . .  C ADDR   0F1EH   R   SEG=MAIN   2530 2534#
OUTKMEM. . . . . .  C ADDR   1350H   R   SEG=MAIN   3163# 3181 3693
OUTMA. . . . . . .  C ADDR   0EF7H   R   SEG=MAIN   2513 2515#
OUTMAX . . . . . .  C ADDR   1F97H   R   SEG=MAIN   4977 4996#
OUTMEA . . . . . .  C ADDR   1DBAH   R   SEG=MAIN   4658 4673#
OUTMENU. . . . . .  C ADDR   1935H   R   SEG=MAIN   4002#
OUTMIN . . . . . .  C ADDR   1EBEH   R   SEG=MAIN   4826 4846#
OUTR . . . . . . .  C ADDR   08CCH   R   SEG=MAIN   1510 1533#
OUTR5. . . . . . .  C ADDR   08E8H   R   SEG=MAIN   1531 1552#
OUTSKO . . . . . .  C ADDR   19DAH   R   SEG=MAIN   4087 4089#
OUTSKO1. . . . . .  C ADDR   19D7H   R   SEG=MAIN   4085 4088#
OUTVICH. . . . . .  C ADDR   0E66H   R   SEG=MAIN   2431# 2443
OUTVIR . . . . . .  C ADDR   0D27H   R   SEG=MAIN   2199 2228#
OUT_KALI . . . . .  C ADDR   1CB5H   R   SEG=MAIN   4524#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6532
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 5064 5068
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 464
P1 . . . . . . . .  D ADDR   0090H   A      32# 650 651 5077 5079 5082 5085 5089 5091 5092 5144 5146 5148 5584 5591
                                           6122 6125 6127 6130
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 465
P2 . . . . . . . .  D ADDR   00A0H   A      47# 5110 5114 5123
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 466
P3 . . . . . . . .  D ADDR   00B0H   A      62# 475 2198 2200 2202 2203 2206 2207 2211 2212 2214 2215 2217 2218 2220
                                           2221 2223 2224 2403 2404 2410 2411 2442 2443 2446 2447 2454 2455 2462 2463
                                           2471 2472 2517 2518 2528 2529 2555 2556 2569 2570 2600 2601 2602 2603 2615
                                           2616 2624 2625 2632 2633 2641 2642 2680 2681 2715 2716 2724 2725 2762 2763
                                           2792 2839 2841 2843 2844 2847 2848 2850 2851 2853 2854 2856 2857 2859 2860
                                           2862 2863 2959 2962 2988 2989 3013 3014 3027 3028 3034 3035 3048 3049 3093
                                           3094 3180 3181 3184 3185 3226 3227 3243 3244 3245 3246 3300 3301 3407 3408
                                           3418 3419 3509 3510 3511 3512 3583 3584 3613 3614 3657 3658 3659 3660 3677
                                           3678 3679 3680 3698 3699 3700 3701 3708 3709 3751 3752 3753 3754 3875 3876
                                           3955 3956 4024 4025 4037 4038 4054 4055 4056 4057 4097 4098 4099 4100 4268
                                           4269 4270 4271 4277 4278 4283 4284 4320 4321 4394 5109 5111 5113 5119 5120
                                           5121 5124 5125
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2174 2791 2813 4393
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 468
P4 . . . . . . . .  D ADDR   0084H   A      20# 2015 2036 2063 2146 2308 2310 4510 5202 5205 5221 5223 5687
P5 . . . . . . . .  D ADDR   0085H   A      21# 564 573 2017 2038 2065 2068 2073 2108 2110 2148 2318 2320 4514 5210
                                           5213 5243 5246 5691
P6 . . . . . . . .  D ADDR   0086H   A      22# 1923 1925 1929 1931 2794 2796 2800 2802 4397 4399 4403 4405
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 469
PACK1. . . . . . .  C ADDR   00DEH   A      7333# 7548 7725 7827 8044
PARERR . . . . . .  C ADDR   1A66H   R   SEG=MAIN   4129 4131 4133 4172#
PARN . . . . . . .  D ADDR   00AFH   A      390# 570 1721 2384 3121
PAROL. . . . . . .  D ADDR   00A8H   A      386#
PART . . . . . . .  D ADDR   009AH   A      380# 565 787 1127 1169 1196 1211 1730 1786 1943 2279 2348 2385 2878 3104
                                           3120 3556 3643 5214 5611
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   144

PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 462
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 463
PCON . . . . . . .  D ADDR   0087H   A      23# 509
POIN3. . . . . . .  C ADDR   1B4BH   R   SEG=MAIN   4318# 4353
POINA. . . . . . .  C ADDR   1B88H   R   SEG=MAIN   4316 4352#
POINA1 . . . . . .  C ADDR   1B30H   R   SEG=MAIN   4288 4295#
POINA2 . . . . . .  C ADDR   1B2AH   R   SEG=MAIN   4291# 4296
POZB . . . . . . .  C ADDR   1BABH   R   SEG=MAIN   4366 4370#
PROD . . . . . . .  N NUMB   000CH   A      7270# 7614 7615 7616 7617 7637 7638 7639 7641 7642 7644 7645 7647 7669
                                           7671 7672 7674 7675 7677 7678 7680 7699 7700 7701 7703 7704 7706 7707 7709
                                           7720 7721 7722 7723 7744 7745 7746 7747 7763 7765 7766 7768 7769 7771 7772
                                           7774 7804 7821 7822 7823 7824
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 8075 8079 8132 8135
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2177 2782 2816 4391 6031 6033 7005
                                           7013
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0D31H   R   SEG=MAIN   2222 2234#
QUES . . . . . . .  C ADDR   13FCH   R   SEG=MAIN   3239# 3244
QU_AVP . . . . . .  C ADDR   077EH   R   SEG=MAIN   1352 1354#
R10. . . . . . . .  N NUMB   000AH   A      449# 1158 1430 1438 4132 5659 8098
R11. . . . . . . .  N NUMB   000BH   A      450# 1159 1431 1437 5663 8102
R8 . . . . . . . .  N NUMB   0008H   A      447# 516 1428 1440 3981 4128 5164 5651 8090
R9 . . . . . . . .  N NUMB   0009H   A      448# 1429 1439 4130 5165 5655 8094
RAFTERK. . . . . .  C ADDR   061EH   R   SEG=MAIN   1166# 1172
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   1455H   R   SEG=MAIN   3296# 3301
RE1. . . . . . . .  C ADDR   207BH   R   SEG=MAIN   5144# 5150
RE11_7 . . . . . .  C ADDR   06C6H   R   SEG=MAIN   1268# 1310 1321
RE4BYTE. . . . . .  C ADDR   0454H   A      515 3980 4126 8086#
REA3_X . . . . . .  C ADDR   27A5H   R   SEG=MAIN   3797 6275#
REACP. . . . . . .  D ADDR   0077H   A      304# 665 667 669 671 728 744 752 760 769 776 791 826 844 860 876 2082
                                           2084 2086 2088 2120 2122 2124 2126
READ . . . . . . .  C ADDR   2079H   R   SEG=MAIN   664 666 668 5143#
READYACP . . . . .  C ADDR   0316H   R   SEG=MAIN   770 780#
READ_X2. . . . . .  C ADDR   2061H   R   SEG=MAIN   5118# 5129
REBYTE . . . . . .  C ADDR   0266H   R   SEG=MAIN   649# 683 705 817 2041 2051 2075 2113 2151 2160 2162
REBYTE2. . . . . .  C ADDR   046CH   A      1260 1268 1286 1302 1313 1329 4530 4538 8106#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 470
REN. . . . . . . .  B ADDR   0098H.4 A      157#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   145

RENDKALIB. . . . .  C ADDR   1191H   R   SEG=MAIN   2917# 2919
RESAR2 . . . . . .  C ADDR   26C9H   R   SEG=MAIN   792 827 845 861 877 889 925 1007 1063 1184 1229 1337 1358 1410
                                           1433 1456 1609 1663 1881 1991 2028 2946 4451 4459 4478 4556 4578 4666 4678
                                           4693 4773 4831 4847 4861 4924 4982 4997 5787 6100# 6259
RESAR8 . . . . . .  C ADDR   2687H   R   SEG=MAIN   1140 1190 1232 1240 1363 2095 2133 6039#
RESA_HL. . . . . .  C ADDR   2772H   R   SEG=MAIN   1901 4611 4749 4899 6236#
REZAM. . . . . . .  D ADDR   008CH   A      376# 2130
REZAP. . . . . . .  D ADDR   0088H   A      375# 2092
REZMUL . . . . . .  C ADDR   0676H   R   SEG=MAIN   1204 1218 1227#
REZ_A. . . . . . .  D ADDR   0062H   A      365# 805 878 888 924 1006 1062 2027
REZ_A0 . . . . . .  D ADDR   006AH   A      367# 1189 1362 1400 1590 2272 2938 2947 2954
REZ_A1 . . . . . .  D ADDR   0066H   A      366# 1121 1187 1228 1342 1357 1376
REZ_A2 . . . . . .  D ADDR   007BH   A      368# 1359
REZ_A3 . . . . . .  D ADDR   009CH   A      382# 1192 1365 1409 1608 1662 1791 2945 4450 4555 6258 6289
REZ_AK . . . . . .  D ADDR   00A4H   A      385# 4247 4458
REZ_AME. . . . . .  D ADDR   005EH   A      363# 1133 1142 1183 1242 1336
REZ_DEL. . . . . .  D ADDR   00C5H   A      402# 807
REZ_R. . . . . . .  D ADDR   00C9H   A      403# 1442 1455
RE_HL. . . . . . .  C ADDR   2779H   R   SEG=MAIN   6239# 6249 6253 6256
RE_HL1 . . . . . .  C ADDR   2781H   R   SEG=MAIN   6237 6247#
RE_HL2 . . . . . .  C ADDR   2788H   R   SEG=MAIN   6247 6251#
RE_HL3 . . . . . .  C ADDR   278FH   R   SEG=MAIN   6251 6255#
RGO23NO. . . . . .  C ADDR   1458H   R   SEG=MAIN   3297# 3302
RGOTO7 . . . . . .  C ADDR   1610H   R   SEG=MAIN   3580# 3614
RHNOR11. . . . . .  C ADDR   1238H   R   SEG=MAIN   2987 2999 3005#
RHNOT1 . . . . . .  C ADDR   11FFH   R   SEG=MAIN   2962 2971#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0F4AH   R   SEG=MAIN   2553 2565#
RI6. . . . . . . .  C ADDR   0F44H   R   SEG=MAIN   2556 2561# 2570 2599 2603
RIGBLO . . . . . .  C ADDR   1027H   R   SEG=MAIN   2680# 2711 2713
RIGBLOK. . . . . .  C ADDR   1065H   R   SEG=MAIN   2724#
RIGHT2 . . . . . .  C ADDR   0D58H   R   SEG=MAIN   2249 2253#
RIGHT3 . . . . . .  C ADDR   0D5CH   R   SEG=MAIN   2251 2256#
RIKN . . . . . . .  C ADDR   0ECFH   R   SEG=MAIN   2478# 2496
RIZMAN . . . . . .  C ADDR   0CB3H   R   SEG=MAIN   2171# 2208
RI_31. . . . . . .  C ADDR   0F64H   R   SEG=MAIN   2568 2577#
RKNLEFT. . . . . .  C ADDR   10D7H   R   SEG=MAIN   2810# 2855
RKNMEM . . . . . .  C ADDR   10C8H   R   SEG=MAIN   2805# 2861
RKNNUL . . . . . .  C ADDR   10D4H   R   SEG=MAIN   2809# 2849
RKNOPT . . . . . .  C ADDR   0CB0H   R   SEG=MAIN   2170# 2219
RKNRAZR. . . . . .  C ADDR   0CADH   R   SEG=MAIN   2169# 2213
RKVVOD0. . . . . .  C ADDR   1390H   R   SEG=MAIN   3186 3193#
RLABELF. . . . . .  C ADDR   0CAAH   R   SEG=MAIN   2168# 2205
RLABELH. . . . . .  C ADDR   10D1H   R   SEG=MAIN   2808# 2846
RLABELI. . . . . .  C ADDR   1205H   R   SEG=MAIN   2974#
RLABELK. . . . . .  C ADDR   1202H   R   SEG=MAIN   2973# 2976
RLABELL. . . . . .  C ADDR   0F26H   R   SEG=MAIN   2545#
RLABELL1 . . . . .  C ADDR   109AH   R   SEG=MAIN   2763 2766#
RLABELN. . . . . .  C ADDR   0FA1H   R   SEG=MAIN   2601 2605#
RLABELP. . . . . .  C ADDR   18D0H   R   SEG=MAIN   3953# 3956
RLABELS13. . . . .  C ADDR   19E4H   R   SEG=MAIN   4094# 4098
RLABELS4 . . . . .  C ADDR   19E1H   R   SEG=MAIN   4093# 4096
RLABL2 . . . . . .  C ADDR   13F6H   R   SEG=MAIN   3237#
RLABM. . . . . . .  C ADDR   13F9H   R   SEG=MAIN   3238# 3242
RLEFCUR. . . . . .  C ADDR   16B7H   R   SEG=MAIN   3674# 3678
RLER . . . . . . .  C ADDR   23FAH   R   SEG=MAIN   5770 5772#
RLIST_43 . . . . .  C ADDR   174EH   R   SEG=MAIN   3748# 3750
RMAS4. . . . . . .  C ADDR   0467H   R   SEG=MAIN   950# 952
RME21_23 . . . . .  C ADDR   171EH   R   SEG=MAIN   3706 3725#
RMO220 . . . . . .  C ADDR   0658H   R   SEG=MAIN   1206# 1253
RNNMEMB. . . . . .  C ADDR   0FA7H   R   SEG=MAIN   2608# 2611
RNO3PARN . . . . .  C ADDR   09CDH   R   SEG=MAIN   1708# 1722
RNOBUF0. . . . . .  C ADDR   0AE1H   R   SEG=MAIN   1893 1897#
RNOCHI0. . . . . .  C ADDR   07A6H   R   SEG=MAIN   1371 1375#
RNOH37 . . . . . .  C ADDR   125CH   R   SEG=MAIN   3024# 3028 3035 3049
RNOM31 . . . . . .  C ADDR   158EH   R   SEG=MAIN   3507# 3508
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   146

RNOMEMK. . . . . .  C ADDR   134DH   R   SEG=MAIN   3161# 3179
RNORVICH . . . . .  C ADDR   09CBH   R   SEG=MAIN   1651 1652 1707#
RNOT1IN. . . . . .  C ADDR   0A9FH   R   SEG=MAIN   1788 1858#
RNOTESTIZM . . . .  C ADDR   066EH   R   SEG=MAIN   1220# 1255
ROUT6. . . . . . .  C ADDR   0CA7H   R   SEG=MAIN   2167# 2204
ROUT7. . . . . . .  C ADDR   10CEH   R   SEG=MAIN   2807# 2840 2845
ROUTF. . . . . . .  C ADDR   1259H   R   SEG=MAIN   3020# 3094
RR0. . . . . . . .  N NUMB   0000H   A      440# 2178 2781 2817 4390
RR1. . . . . . . .  N NUMB   0001H   A      441# 2179 2780 2818 4389
RR2. . . . . . . .  N NUMB   0002H   A      443# 1262 1274 1280 1292 1304 1315 2180 2779 2819 3776 3784 4388 4532
                                           4544 4550 4562 5177
RR3. . . . . . . .  N NUMB   0003H   A      444# 1263 1273 1281 1291 1305 1316 2181 2778 2820 3777 3783 4387 4533
                                           4543 4551 4561 5178
RR4. . . . . . . .  N NUMB   0004H   A      1264 1272 1282 1290 1306 1317 2182 2777 2821 3778 3782 4386 4534 4542
                                           4552 4560 6334# 6391 6412 6428 6472 6494
RR5. . . . . . . .  N NUMB   0005H   A      1265 1271 1283 1289 1307 1318 2183 2776 2822 3779 3781 4385 4535 4541
                                           4553 4559 6335# 6392 6399 6406 6473 6482
RR6. . . . . . . .  N NUMB   0006H   A      442# 2184 2775 2823 4384
RR7. . . . . . . .  N NUMB   0007H   A      445# 2185 2774 2824 4383
RRIR . . . . . . .  C ADDR   2407H   R   SEG=MAIN   5781 5783#
RRMO220. . . . . .  C ADDR   07A3H   R   SEG=MAIN   1348 1374#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0967H   R   SEG=MAIN   1635# 1653 1655 1656
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 500 2914
RTIZMRI. . . . . .  C ADDR   0E30H   R   SEG=MAIN   2401#
RVVIZKO. . . . . .  C ADDR   123AH   R   SEG=MAIN   3007# 3015
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SADIAP . . . . . .  D ADDR   0034H   A      314# 569 1909 3829
SADIAP2. . . . . .  D ADDR   0032H   A      316# 1912 3832
SADIAP3. . . . . .  D ADDR   0031H   A      317# 1915 3835
SADIAP4. . . . . .  D ADDR   0030H   A      318# 1918 3837
SAUS . . . . . . .  D ADDR   0036H   A      313# 2016 2018 2035 2037 2064 2066 2145 2147
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2196 2491 2509 2694 2738 2758 2836 3437 3492 3597 4204 4310 5846
                                           5854
SAVEIR2. . . . . .  C ADDR   260BH   R   SEG=MAIN   891 928 1010 1066 5939#
SAVELTE. . . . . .  C ADDR   04A7H   A      8169#
SAVEN_BL . . . . .  D ADDR   00D3H   A      406# 590 6207 6238
SAVEN_BL2. . . . .  D ADDR   00C0H   A      399# 598 6226 6248
SAVEN_BL3. . . . .  D ADDR   00C2H   A      400# 605 6230 6252
SAVEN_BL4. . . . .  D ADDR   00D9H   A      410# 612 6232 6255
SAVER2 . . . . . .  C ADDR   2617H   R   SEG=MAIN   582 584 586 588 796 806 808 831 849 865 879 1122 1134 1143 1188
                                           1193 1243 1343 1360 1366 1377 1443 1447 1667 1886 1950 2033 2093 2105 2131
                                           2143 2948 2955 3807 4248 4340 4468 4570 4669 4681 4701 4776 4841 4857 4872
                                           4927 4992 5007 5790 5953# 6290
SAVE_HL. . . . . .  C ADDR   273EH   R   SEG=MAIN   1904 3288 3325 3344 3366 3388 3638 6205#
SA_HL. . . . . . .  C ADDR   2745H   R   SEG=MAIN   6208# 6227 6231 6233
SA_HL1 . . . . . .  C ADDR   2760H   R   SEG=MAIN   6206 6225#
SA_HL2 . . . . . .  C ADDR   2767H   R   SEG=MAIN   6225 6229#
SA_HL3 . . . . . .  C ADDR   276EH   R   SEG=MAIN   6229 6232#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 5019 5025
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 508 5020 5024 5027 5028 5049
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   2023H   R   SEG=MAIN   5077# 5084
SDV1 . . . . . . .  C ADDR   2037H   R   SEG=MAIN   5089# 5095
SDVIG0 . . . . . .  C ADDR   02F7H   R   SEG=MAIN   756# 758
SDVIG1 . . . . . .  C ADDR   02ECH   R   SEG=MAIN   748# 750
SDVIG2 . . . . . .  C ADDR   02E1H   R   SEG=MAIN   740# 742
SDVIG3 . . . . . .  C ADDR   02D5H   R   SEG=MAIN   731# 733
SDVIG4 . . . . . .  C ADDR   0306H   R   SEG=MAIN   766# 768
SDVIG6 . . . . . .  C ADDR   0310H   R   SEG=MAIN   773# 775
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   147

SDVM . . . . . . .  C ADDR   030EH   R   SEG=MAIN   763 772#
SEEGOON. . . . . .  C ADDR   09D2H   R   SEG=MAIN   1697 1705 1712#
SEEIND . . . . . .  C ADDR   09E0H   R   SEG=MAIN   1627 1634 1635 1724#
SEE_L43. . . . . .  C ADDR   1825H   R   SEG=MAIN   3846 3854 3857#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      7265# 7286 7287 7312 7313 7337 7480 7497 7718 7758
SKOR19 . . . . . .  C ADDR   191BH   R   SEG=MAIN   3982 3989#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   12C9H   R   SEG=MAIN   3089# 3105
SP . . . . . . . .  D ADDR   0081H   A      17# 461
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 506
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 505
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 5066
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   19BCH   R   SEG=MAIN   4072 4074#
SS1. . . . . . . .  C ADDR   2159H   R   SEG=MAIN   5326# 5328
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      394# 793 795 810 828 830 846 848 862 864 1398 1588 2270 2936
SUMT2. . . . . . .  C ADDR   0362H   R   SEG=MAIN   784 825#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T2MSME . . . . . .  C ADDR   167BH   R   SEG=MAIN   3646# 3652
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   22F9H   R   SEG=MAIN   5602# 5612
TABN . . . . . . .  C ADDR   2391H   R   SEG=MAIN   5704# 5708
TABT11 . . . . . .  C ADDR   2111H   R   SEG=MAIN   5263# 5684
TABT7. . . . . . .  C ADDR   2115H   R   SEG=MAIN   4507 5267# 5697
TABT9. . . . . . .  C ADDR   2113H   R   SEG=MAIN   5265# 5694
TABUS. . . . . . .  C ADDR   20FDH   R   SEG=MAIN   5199 5252#
TAKTIND. . . . . .  C ADDR   0A1DH   R   SEG=MAIN   1759 1762#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 497 498 512
TE10MS . . . . . .  C ADDR   245DH   R   SEG=MAIN   3645 5869#
TE22 . . . . . . .  C ADDR   2384H   R   SEG=MAIN   5683 5693#
TE23 . . . . . . .  C ADDR   238CH   R   SEG=MAIN   5693 5697#
TE2MS. . . . . . .  C ADDR   2453H   R   SEG=MAIN   3651 5868#
TEAEQU0. . . . . .  C ADDR   2499H   R   SEG=MAIN   3062 5877#
TEAVK. . . . . . .  C ADDR   24D5H   R   SEG=MAIN   4424 5884#
TEBEQU0. . . . . .  C ADDR   24A3H   R   SEG=MAIN   5878#
TEBL . . . . . . .  C ADDR   2589H   R   SEG=MAIN   2653 3230 5906#
TEBL0. . . . . . .  C ADDR   2593H   R   SEG=MAIN   3456 5907#
TECH . . . . . . .  C ADDR   259DH   R   SEG=MAIN   3737 3904 5908#
TECLE. . . . . . .  C ADDR   254EH   R   SEG=MAIN   2645 3147 3198 5900#
TEEND. . . . . . .  C ADDR   25EDH   R   SEG=MAIN   4521 5917#
TEERR. . . . . . .  C ADDR   25E3H   R   SEG=MAIN   5861 5916#
TEFULL . . . . . .  C ADDR   2575H   R   SEG=MAIN   2660 3423 5904#
TEINT. . . . . . .  C ADDR   257FH   R   SEG=MAIN   3523 5905#
TEIZMK . . . . . .  C ADDR   2530H   R   SEG=MAIN   2449 3001 5897#
TEKALIB. . . . . .  C ADDR   24DFH   R   SEG=MAIN   3713 4427 5885#
TEKD . . . . . . .  C ADDR   2526H   R   SEG=MAIN   4137 5896#
TELIST . . . . . .  C ADDR   256AH   R   SEG=MAIN   2628 3209 3215 5903#
TEMAX. . . . . . .  C ADDR   25BBH   R   SEG=MAIN   3940 5911#
TEMEM. . . . . . .  C ADDR   2558H   R   SEG=MAIN   5901#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   148

TEMENU . . . . . .  C ADDR   24ADH   R   SEG=MAIN   5879#
TEMID. . . . . . .  C ADDR   25C5H   R   SEG=MAIN   3948 5912#
TEMIN. . . . . . .  C ADDR   25B1H   R   SEG=MAIN   3468 5910#
TEMUL. . . . . . .  C ADDR   0755H   R   SEG=MAIN   1298 1335#
TENMIN . . . . . .  C ADDR   21FBH   R   SEG=MAIN   1201 1203 1217 5394#
TEOLI. . . . . . .  C ADDR   25CFH   R   SEG=MAIN   1481 5914#
TEOLL. . . . . . .  C ADDR   2544H   R   SEG=MAIN   1574 5899#
TEOLR. . . . . . .  C ADDR   25D9H   R   SEG=MAIN   1477 5915#
TEOUT. . . . . . .  C ADDR   253AH   R   SEG=MAIN   2457 2538 2992 5898#
TEPAR. . . . . . .  C ADDR   251CH   R   SEG=MAIN   4444 5895#
TES19_2. . . . . .  C ADDR   2512H   R   SEG=MAIN   521 2585 3989 4187 5893#
TES57_6. . . . . .  C ADDR   2508H   R   SEG=MAIN   2579 3983 4183 4440 5892#
TESKOR . . . . . .  C ADDR   24CBH   R   SEG=MAIN   4421 5883#
TEST01 . . . . . .  C ADDR   1FBEH   R   SEG=MAIN   5024# 5047
TEST02 . . . . . .  C ADDR   1FEDH   R   SEG=MAIN   5044 5046#
TEST04 . . . . . .  C ADDR   1FCEH   R   SEG=MAIN   5031# 5033
TEST1. . . . . . .  C ADDR   1FB4H   R   SEG=MAIN   5019# 5035 5056
TEST2. . . . . . .  C ADDR   1FE6H   R   SEG=MAIN   5024 5043#
TEST22 . . . . . .  C ADDR   1991H   R   SEG=MAIN   4039 4046#
TEST23 . . . . . .  C ADDR   1996H   R   SEG=MAIN   4046 4049#
TEST3. . . . . . .  C ADDR   1FD8H   R   SEG=MAIN   5026 5036#
TEST4. . . . . . .  C ADDR   1FC6H   R   SEG=MAIN   5027# 5042
TEST5. . . . . . .  C ADDR   1FF0H   R   SEG=MAIN   5045 5048#
TEST7I . . . . . .  C ADDR   0A35H   R   SEG=MAIN   1774 1777#
TEST9I . . . . . .  C ADDR   0A2EH   R   SEG=MAIN   1769 1774#
TESTAT . . . . . .  C ADDR   25A7H   R   SEG=MAIN   2636 3189 5909#
TESTRS . . . . . .  C ADDR   1FB2H   R   SEG=MAIN   3972 5017#
TESTS. . . . . . .  C ADDR   1985H   R   SEG=MAIN   4041# 4048 4051
TETE11 . . . . . .  C ADDR   24EAH   R   SEG=MAIN   3961 4431 5887#
TETE7. . . . . . .  C ADDR   24FEH   R   SEG=MAIN   4028 4437 5889#
TETE9. . . . . . .  C ADDR   24F4H   R   SEG=MAIN   4434 5888#
TETESI . . . . . .  C ADDR   24B7H   R   SEG=MAIN   2902 4414 5881#
TETESR . . . . . .  C ADDR   24C1H   R   SEG=MAIN   4418 5882#
TEVICH . . . . . .  C ADDR   248FH   R   SEG=MAIN   2291 2465 2997 4345 5876#
TEWR . . . . . . .  C ADDR   2560H   R   SEG=MAIN   2619 3204 5902#
TEXTT. . . . . . .  C ADDR   2453H   R   SEG=MAIN   5279 5867#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 480
TH1. . . . . . . .  D ADDR   008DH   A      29# 519 523 4086 4088
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   2047H   R   SEG=MAIN   5098#
TIM1 . . . . . . .  C ADDR   2049H   R   SEG=MAIN   5099# 5099
TIM2 . . . . . . .  C ADDR   204CH   R   SEG=MAIN   5080 5083 5090 5094 5102# 5145 5149 6126 6128
TIM3 . . . . . . .  C ADDR   204EH   R   SEG=MAIN   5103# 5103
TIZMRI . . . . . .  C ADDR   0D51H   R   SEG=MAIN   2248# 2401
TL0. . . . . . . .  D ADDR   008AH   A      26# 481
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   12C6H   R   SEG=MAIN   3074 3086#
TMOD . . . . . . .  D ADDR   0089H   A      25# 478 511
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 495
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 494
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   18FCH   R   SEG=MAIN   3970 3975#
TOME14 . . . . . .  C ADDR   1929H   R   SEG=MAIN   3975 3996#
TOME15 . . . . . .  C ADDR   1941H   R   SEG=MAIN   3996 4008#
TOME21 . . . . . .  C ADDR   18F3H   R   SEG=MAIN   3959 3970#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   149

TOSK19 . . . . . .  C ADDR   1A8BH   R   SEG=MAIN   4182 4187#
TOUTF. . . . . . .  C ADDR   1243H   R   SEG=MAIN   3011# 3014
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TTOUT. . . . . . .  C ADDR   0E33H   R   SEG=MAIN   2403# 2412
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 5067
UNPACK1. . . . . .  C ADDR   009EH   A      7283# 7477 7611 7741 7855
UNPACK2. . . . . .  C ADDR   00BAH   A      7308# 7478 7612 7742
UP1. . . . . . . .  C ADDR   0138H   A      7428# 7445
UP2. . . . . . . .  C ADDR   014BH   A      7448# 7466
UP2A . . . . . . .  C ADDR   0161H   A      7427 7464#
UPA. . . . . . . .  C ADDR   222AH   R   SEG=MAIN   5449# 5455
UPA1 . . . . . . .  C ADDR   223AH   R   SEG=MAIN   5467# 5473
UPA2 . . . . . . .  C ADDR   221AH   R   SEG=MAIN   5430# 5436
UPAA . . . . . . .  C ADDR   2716H   R   SEG=MAIN   6174# 6180
UPAA4. . . . . . .  C ADDR   2285H   R   SEG=MAIN   5530# 5536
UPAB . . . . . . .  C ADDR   2295H   R   SEG=MAIN   5547# 5553
UPAK . . . . . . .  C ADDR   2224H   R   SEG=MAIN   5446#
UPAK1. . . . . . .  C ADDR   26F0H   R   SEG=MAIN   6139#
UPAK2. . . . . . .  C ADDR   2214H   R   SEG=MAIN   5427#
UPAK3. . . . . . .  C ADDR   2234H   R   SEG=MAIN   3666 3761 5464#
UPAK4. . . . . . .  C ADDR   2710H   R   SEG=MAIN   3620 6171#
UPAKA. . . . . . .  C ADDR   227FH   R   SEG=MAIN   4332 5527#
UPAKB. . . . . . .  C ADDR   228FH   R   SEG=MAIN   4360 5544#
UPAV1. . . . . . .  C ADDR   1A03H   R   SEG=MAIN   4117# 4123
UPAV2. . . . . . .  C ADDR   1ABAH   R   SEG=MAIN   4231# 4237
UPK1 . . . . . . .  C ADDR   2702H   R   SEG=MAIN   6147 6150#
UPK2 . . . . . . .  C ADDR   2703H   R   SEG=MAIN   6149 6151#
VICHMAX. . . . . .  C ADDR   1F11H   R   SEG=MAIN   3942 4898#
VICHMEAN . . . . .  C ADDR   1D55H   R   SEG=MAIN   3950 4610#
VICHMIN. . . . . .  C ADDR   1E38H   R   SEG=MAIN   3470 4748#
VICHR. . . . . . .  D ADDR   00B1H   A      392# 1256 1765 2288 2297 2431 2444 2549 2557 2905 2909 2986 3053 3165
                                           3702 3710 3719 3954 4005 4019 4135 4323 4375 4412 5682
VIG0 . . . . . . .  C ADDR   0A8BH   R   SEG=MAIN   1842# 1844
VIG4 . . . . . . .  C ADDR   0A99H   R   SEG=MAIN   1853# 1855
VIOUT. . . . . . .  C ADDR   0E0AH   R   SEG=MAIN   2294 2376# 2404
VIOUTF . . . . . .  C ADDR   123CH   R   SEG=MAIN   3008#
VIT2_10. . . . . .  C ADDR   0D7DH   R   SEG=MAIN   2277# 2283
VODM11_15. . . . .  C ADDR   16DAH   R   SEG=MAIN   3691# 3709
VOLUME . . . . . .  D ADDR   00D5H   A      407# 2236 3633 6215 6217
VV21_23. . . . . .  C ADDR   197CH   R   SEG=MAIN   4025 4037#
VVCHIBL. . . . . .  C ADDR   23C8H   R   SEG=MAIN   2532 5736#
VVCHIF . . . . . .  C ADDR   23A3H   R   SEG=MAIN   5712# 5729
VVINTE . . . . . .  C ADDR   163BH   R   SEG=MAIN   3584 3612#
VVIZKO . . . . . .  C ADDR   1293H   R   SEG=MAIN   3007 3053#
VVKALI52 . . . . .  C ADDR   1AADH   R   SEG=MAIN   4215# 4267
VVMENU . . . . . .  C ADDR   1A63H   R   SEG=MAIN   4100 4170#
VVNOL23. . . . . .  C ADDR   23C3H   R   SEG=MAIN   5733# 5737
VVNOL31. . . . . .  C ADDR   23BEH   R   SEG=MAIN   5731# 5733
VVNOL41. . . . . .  C ADDR   23BCH   R   SEG=MAIN   5729# 5731
VVOD2_10 . . . . .  C ADDR   1673H   R   SEG=MAIN   3174 3293 3393 3643#
VVOD43 . . . . . .  C ADDR   1851H   R   SEG=MAIN   3876 3883#
VVODM11_15 . . . .  C ADDR   18D3H   R   SEG=MAIN   3691 3954#
VVOSTA . . . . . .  C ADDR   18AEH   R   SEG=MAIN   3919 3938#
VVOSTAD. . . . . .  C ADDR   18C2H   R   SEG=MAIN   3938 3946#
VVRR6. . . . . . .  C ADDR   0E8FH   R   SEG=MAIN   2449#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 476 477
WORK . . . . . . .  D ADDR   00B8H   A      396# 1462 1464 1470 1486 1493 1509 1530 1535 1551 1793 1871 3260 3270
                                           3272 3306 3316 3318 3328 3338 3340 3347 3357 3359 3369 3379 3381 4618 4665
                                           4668 4677 4680 4692 4754 4772 4775 4830 4840 4846 4856 4860 4905 4923 4926
                                           4981 4991 4996 5006 5021 5043
WR1. . . . . . . .  C ADDR   26DDH   R   SEG=MAIN   6122# 6129
WRITE. . . . . . .  C ADDR   26DAH   R   SEG=MAIN   662 5573 5575 5577 5579 5581 5583 5586 5588 5590 5593 5595 5597
                                           6120#
A51 MACRO ASSEMBLER  AMP30_1                                                              02/20/2007 15:12:09 PAGE   150

WRITED_X1. . . . .  C ADDR   2052H   R   SEG=MAIN   5108#
WRITE_X1 . . . . .  C ADDR   2051H   R   SEG=MAIN   5107#
WRPAGE . . . . . .  C ADDR   0480H   A      4083 4500 4602 8130#
WW5. . . . . . . .  C ADDR   0483H   A      8131# 8139
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 472 504
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 473
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 474 503
XCIKLWR. . . . . .  C ADDR   25F7H   R   SEG=MAIN   886 899 901 903 906 909 912 915 918 921 954 956 958 961 964 967
                                           970 973 976 978 981 983 985 988 991 994 997 1000 1003 1055 1057 1059 5922#
XTEMP. . . . . . .  N NUMB   000CH   A      6331# 6695 6696 6697 6698 6784 6786 6787 6789 6790 6792 6793 6795 6817
                                           6818 6819 6820 6838 6839 6843 6844 6847 6851 6852 6855 6859 6860 6864 6865
                                           6867 6868 6869 6871 6875 6876 6878 6879 6883 6884 6889 6890 6892 6893 6897
                                           6898 6903 6905 6906 6907
YBNUL. . . . . . .  C ADDR   11D4H   R   SEG=MAIN   2943 2951#
YES. . . . . . . .  C ADDR   2945H   R   SEG=MAIN   6717 6721 6725 6729 6747# 6810
YES0KEY. . . . . .  C ADDR   02B1H   R   SEG=MAIN   692 704#
YES0KEY1 . . . . .  C ADDR   02BEH   R   SEG=MAIN   711# 718
YESAVP . . . . . .  C ADDR   07B0H   R   SEG=MAIN   1354 1380#
YESBUF . . . . . .  C ADDR   0AE6H   R   SEG=MAIN   1895 1900#
YESIND . . . . . .  C ADDR   0A37H   R   SEG=MAIN   1764 1773 1776 1779#
YESPRD . . . . . .  C ADDR   0AE4H   R   SEG=MAIN   1894 1898#
YESTEST. . . . . .  C ADDR   20ECH   R   SEG=MAIN   5194 5226#
YESTT5 . . . . . .  C ADDR   0B88H   R   SEG=MAIN   1988#
YESVICH. . . . . .  C ADDR   07DFH   R   SEG=MAIN   1368 1405#
YESVI_KM . . . . .  C ADDR   1CBEH   R   SEG=MAIN   4447 4527#
YESVI_KR . . . . .  C ADDR   1C36H   R   SEG=MAIN   4447# 4449
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   520 524#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   517 521#
Z01S . . . . . . .  C ADDR   2171H   R   SEG=MAIN   5343# 5345
Z05S . . . . . . .  C ADDR   217EH   R   SEG=MAIN   5352# 5354
Z100 . . . . . . .  C ADDR   2142H   R   SEG=MAIN   5307# 5309
Z15. . . . . . . .  C ADDR   2150H   R   SEG=MAIN   5319# 5321
Z1S. . . . . . . .  C ADDR   2164H   R   SEG=MAIN   5335# 5337
ZAPADC . . . . . .  C ADDR   2021H   R   SEG=MAIN   5076#
ZCMP . . . . . . .  C ADDR   2679H   R   SEG=MAIN   6029#
ZDIV . . . . . . .  C ADDR   2646H   R   SEG=MAIN   804 1114 1612 3800 5992#
ZER1 . . . . . . .  C ADDR   00B3H   A      7293 7297# 7352 7395
ZER2 . . . . . . .  C ADDR   00D4H   A      7319 7323#
ZMUL . . . . . . .  C ADDR   263CH   R   SEG=MAIN   5987#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      324# 1687 3825 4719 4890 6000 6003 6006
ZNPLUS . . . . . .  C ADDR   02C8H   R   SEG=MAIN   673 720#
ZZ . . . . . . . .  C ADDR   2152H   R   SEG=MAIN   5320# 5320
Z_01S. . . . . . .  C ADDR   216DH   R   SEG=MAIN   2188 2189 2829 5041 5055 5341# 5858
Z_05S. . . . . . .  C ADDR   217AH   R   SEG=MAIN   1982 1983 2656 5350#
Z_100. . . . . . .  C ADDR   2140H   R   SEG=MAIN   5306#
Z_15 . . . . . . .  C ADDR   214EH   R   SEG=MAIN   641 5318#
Z_1MS. . . . . . .  C ADDR   2157H   R   SEG=MAIN   711 5048 5325#
Z_1S . . . . . . .  C ADDR   2160H   R   SEG=MAIN   630 638 2293 3471 3744 3865 3917 3943 4175 4259 4524 4525 5333#
Z_5. . . . . . . .  C ADDR   2149H   R   SEG=MAIN   5112 5122 5313#
Z_9. . . . . . . .  C ADDR   26D5H   R   SEG=MAIN   5069 6114#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
