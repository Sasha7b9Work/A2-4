A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN loadKD_X.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE loadKD_X.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1       ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236             
                     237     NAME    MAIN
                     238                     
0000                 239                             org 0h;    cseg AT 0
                     240     
0000 020000   F      241                 jmp begin;!!!!!!!!!!!1Main               ; Locate a jump to the start of code a
                             t 
                     242                                             
0003                 243                                                     org 3
0003 32              244                                                     reti
000B                 245                                                     org 0bh
000B 32              246                                                     reti
0013                 247                                                     org 13h
0013 32              248                                                     reti
001B                 249                                                     org 1bh
001B 32              250                                                     reti
0023                 251                                                     org 23h
0023 32              252                                                     reti
002B                 253                                                     org 2bh
002B 32              254                                                     reti
0033                 255                                                     org 33h
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     5

0033 32              256                                                     reti
003B                 257                                                     org 3bh
003B 32              258                                                     reti
0043                 259                                                     org 43h
0043 32              260                                                     reti
004B                 261                                                     org 4bh
004B 32              262                                                     reti
0053                 263                                                     org 53h
0053 32              264                                                     reti
005B                 265                                                     org 5bh
                     266                                                     
005B 32              267                                                     reti
0063                 268                                                     org 63h
0063 32              269                                                     reti
006B                 270                                                     org 6bh
006B 32              271                                                     reti
0073                 272                                                      org 73h
0073 32              273                                                     reti
                     274     
0093                 275                                                     org     93h
0093 32              276                                                     reti;jmp        keyb1           ;IE6
                     277     
009B                 278                                                     org     9bh
009B 32              279                                                     reti;jmp        keyb2      ;IE7
                     280     
                     281     
                     282     
                     283      
                     284       
                     285     
  00CA               286     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               287     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     288      
                     289                                                     
                     290     Main         SEGMENT  CODE
                     291     
----                 292                                     DSEG
                     293       
  0040               294     bufind  DATA    40h;буффер индикации 12byte     (коды koi и коды букв )
                     295     ;DATA 4ch
  004F               296     abin            DATA    4fh;4byte
  0053               297     adec            DATA    53h;10byte
  006E               298     chmas           DATA    6eh;
  006F               299     mabin           DATA    6fh
  0077               300     reacp           DATA    77h;результат чтения асп 4byte int (hex)
                     301     
                     302       
  003D               303     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               304     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       
                     305             
  0020               306     cellbit         DATA    20h
  0000               307     bitznak         BIT     cellbit.0       ;20.0           
  0001               308     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               309     znmat           BIT             cellbit.2       ;20.2
  0003               310     bitrs           BIT             cellbit.3       ;20.3
  0004               311     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               312     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               313     bitvi11         BIT             cellbit.6       ;20.6   бит режима выч R
  0007               314     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us
                     315     
  0021               316     cellbit1                DATA    21h
  0008               317     bitbuf          BIT     cellbit1.0      ;21.0           
  0009               318     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               319     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               320     bitmem          BIT             cellbit1.3      ;21.3
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     6

  000C               321     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               322     bmem12          BIT             cellbit1.5      ;21.5    бит ПАМ12
  000E               323     bmem13          BIT             cellbit1.6      ;21.6   бит ПАМ13        
  000F               324     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     325     
  0022               326     cellbit2                DATA    22h
  0010               327     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2         
  0011               328     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               329     bitvi12         BIT             cellbit2.2      ;22.2  
  0013               330     bitvi13         BIT             cellbit2.3      ;22.3
  0014               331     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               332     bitvi21         BIT             cellbit2.5      ;22.5    
  0016               333     bitvi31         BIT             cellbit2.6      ;22.6   бит ПАМ13        
                     334     ;bitnul         BIT             cellbit2.7      ;22.7 бит кнопки НУЛЬ   
                     335     
                     336             
                     337     
  005E               338     rez_Ame   data 5eh;      (РЕЗ1-AN)*K
  0062               339     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               340     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               341     rez_A0  data 6ah;
  007B               342     rez_A2   data 7bh; A2
                     343     
  0098               344     chinkor  data  98h;98..99;80h           ;счетчик интервала коррекции  2byte
  0081               345     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               346     chdel    data  83h              ; счетчик задержки
                     347     ;float
  0084               348     kor0_AN  data  84h              ;4byte  AN
  0088               349     rezAp    data  88h              ;4byte  A+
  008C               350     rezAm    data  8ch              ;4byte  A-
  0090               351     koefKp   data  90h              ;4byte  K+
  0094               352     koefKm   data  94h              ;4byte  K-
                     353     ;hex 
  009A               354     parT     data  9ah              ;параметр времени измерения
  009B               355     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               356     rez_A3   data  9ch              ;A3
                     357     ;FLOAT
  00A0               358     koefKD  data  0a0h         ;KD
  00A4               359     constE  data  0a4h         ;E
  00A8               360     constF  data  0a8h         ;F
  00AC               361     chind   data  0ach         ;счетчик индикации
  00AD               362     chbuf   data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               363     diap    data  0aeh         ;номер диапазона
  00AF               364     parN    data  0afh         ;N
  00B0               365     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               366     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               367     marker  data  0b2h         ;номер мигающего знакоместа
                     368     ;data  0b3h
                     369     ;внешнее ОЗУ 64K 
                     370     ;               XSEG AT 100h                                                               
                                                   
                     371             PUBLIC    MASS0
  0080               372     MASS0  xdata 0080h;
  0084               373     MASS1  xdata 0084h;
  0088               374     MASS2  xdata 0088h;
  008C               375     MASS3  xdata 008ch;
  0090               376     MASS4  xdata 0090h;
  0094               377     MASS5  xdata 0094h;
  0098               378     MASS6  xdata 0098h;
  009C               379     MASS7  xdata 009ch;
  00A0               380     MASS8  xdata 00a0h;
  00A4               381     MASS9  xdata 00a4h;
                     382     ;xdata 0038h;
                     383     
  0000               384                             rr0             EQU 00
  0001               385                     rr1       equ   01
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     7

  0006               386                     rr6   equ 06
  0002               387                     rr2       equ   02
  0003               388                     rr3       equ   03
  0007               389                     rr7   equ 07
                     390     
  0008               391                     r8   equ 08
  0009               392                     r9        equ   09
  000A               393                     r10       equ   10
  000B               394                     r11   equ 11
                     395     
                     396                     
                     397        
----                 398                  rseg     Main          ; Switch to this code segment.
                     399     
                     400                  using    0              ; Specify register bank for the following
                     401     
0100                 402     org 100h
                     403     ;$EJECT
                     404     
0100 7581E0          405     begin:     mov  sp, #0e0h
0103 75E900          406                                             mov             PCA0L,#00;=0x00;
0106 75D900          407                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          408                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A586          409                                             mov     P1MDOUT,#86h;8fh;=0x8f;
010F 75A600          410                                             mov     P2MDOUT,#00;=0x00;
                     411             
                     412             
0112 75B5FF          413             mov     P74OUT ,#0ffh;=0xff;
0115 75D103          414             mov     REF0CN,#03h;=0x03;
                     415             
0118 75E114          416             mov     XBR0,#14h;= 0x14;
011B 75E200          417             mov     XBR1,#00; =0x00;
011E 75E300          418             mov XBR2,#00;=0x00;
                     419      
0121 75FFDE          420             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
0124 75FFAD          421             mov     WDTCN,#0adh;=0xad;                                   
0127 758922          422             mov     TMOD,#22h;=0x22;        //регистр режимов
012A 758E30          423             mov     CKCON,#30h;=0x30; //сист частота/12     
012D 758CF9          424             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0130 758AF9          425             mov     TL0,#0f9h;=0xf9; 
0133 75E680          426             mov     EIE1,#80h;=0x80;
                     427     
0136 75D480          428             mov     DAC0CN,#80h;=0x80;
0139 75D780          429             mov     DAC1CN,#80h;=0x80;
013C 75B167          430             mov     OSCXCN,#67h;=0x67;
                     431     
                     432      
                     433     
013F E5B1            434     gener:     mov a, oscxcn
0141 B4E7FB          435                cjne a,#11100111b,gener
                     436                            
0144 75B288          437             mov     OSCICN,#88h;=0x84;
0147 75CA00          438         mov TMR2RLL,#0;=0;
014A 75CBD1          439         mov TMR2RLH,#0d1h;=0xd1;
                     440       
014D D28E            441                     setb  TCON.6                    ;регистр управления
014F D28C            442                      setb tcon.4
                     443     
0151 75EF00          444             mov     RSTSRC,#0;=00   ;//источники сброса 
                     445     
                     446             ;mov    IE,#80h;//10000000      ;//Снятие блокировки всех прерываний
0154 75E340          447          mov        XBR2,#40h
0157 75E106          448              mov    XBR0,#06h;16h
015A 75F803          449             mov             SPI0CN,#03
015D 759D31          450             mov             spi0ckr,#31H;;;;;;;;#04
                     451     ;ozu
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     8

0160 E4              452                             clr     a
0161 7800            453                             mov     r0,#00h 
0163 F6              454     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
0164 08              455                             inc     r0
0165 B87FFB          456                             cjne    r0,#7fh,mecle
0168 7880            457                             mov     r0,#80h
016A F6              458     meff:           mov     @r0,a 
016B F2              459                             movx @r0,a
016C 08              460                             inc     r0
016D B8DFFA          461                             cjne    r0,#0dfh,meff
0170 120000   F      462                             call    clmassix
0173 7898            463                             mov             r0,#chinkor
0175 7602            464                             mov             @r0,#02;600;
0177 08              465                             inc             r0
0178 7658            466                             mov             @r0,#58h;258h
                     467                             ;;;;
017A 7881            468                             mov             r0,#chavt
017C 7607            469                             mov             @r0,#07h;2eh
017E 08              470                             inc             r0
017F 76D0            471                             mov             @r0,#0d0h;0e0h
0181 789A            472                             mov             r0,#parT
0183 7702            473                             mov             @r1,#2                  ;Tizm=1s
0185 79AE            474                             mov             r1,#diap
0187 7705            475                             mov             @r1,#5                  ;10-7a
0189 79AF            476                             mov             r1,#parN
018B 7702            477                             mov             @r1,#2
                     478                             ;;;;;;
018D 900000   F      479                             mov             dptr,#ch_1              ;1->r2..r5 float
0190 120000   F      480                             call    ldc_long
0193 7890            481                             mov             r0,#koefKp         ;1(float)->koefKp
0195 120000   F      482                             call    saver2
0198 7894            483                             mov             r0,#koefKm              ;1(float)->koefKm
019A 120000   F      484                             call    saver2
                     485                              ;погасить индикатор
019D 7840            486                             mov             r0,#bufind
019F                 487     age1:
019F 76FD            488                             mov             @r0,#0fdh;" ";0ffh   ;-----
01A1 08              489                             inc             r0
01A2 B84BFA          490                             cjne    r0,#bufind+11,age1              
01A5 120000   F      491                             call    ind
                     492                     ;чтение пам прогр(5000h) 1 страница(ffh)
                     493     ;и запись во внешнее озу(0000h)
01A8 75A800          494     copyP:            mov           ie,#00h
01AB 7900            495                                     mov             r1,#0                   ;
01AD 7A50            496                                     mov             r2,#50h
01AF 7B00            497                                     mov             r3,#00
01B1 120000   F      498                                     call    copyPP
                     499                                     ;внести изменения во внешн озу
                     500                                     ;KD=00 01 86 A0 (KD=1)
                     501                                     ;кофф *100000 и переведенный в hex формат
                     502                                     ;согласно адресов диапазонов и адресов яч вн озу 
                     503     ;стереть страницу пап прогр 
01B4 905000          504                                     mov             dptr,#5000h
01B7 7FFF            505                                     mov             r7,#0ffh
01B9 120000   F      506                                     call    cle256
                     507     ;и запись в ячейки кофф памяти прогр (3000h) 
01BC 7FFF            508                                     mov             r7,#0ffh
01BE 7900            509                                     mov             r1,#0                           ;external r
                             am
01C0 905000          510                                     mov             dptr,#5000h
01C3 120000   F      511                                     call    wrpage
01C6 80FE            512                                     jmp             $
                     513     
                     514     
                     515     ;адрес ячеек веншнего озу соответствующего диапазона KD
                     516     ;(5000h..5027h)
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE     9

                     517     ;               0000h                   ;10-2
                     518     ;               0004h                   ;10-3
                     519     ;               0008h                   ;10-4
                     520     ;               000ch                   ;10-5
                     521     ;               0010h                   ;10-6
                     522     ;               0014h                   ;10-7
                     523     ;               0018h                   ;10-8
                     524     ;               001ch                   ;10-9
                     525     ;               0020h                   ;10-10
                     526     ;               0024h                   ;10-11
                     527     ;               0028h                   ;parol
                     528     
                     529     
                     530     
                     531     
                     532     
                     533     
                     534     
                     535                     
                     536                     
                     537                     
                     538                     
                     539     
                     540                                     
                     541                     
                     542                     
                     543     
                     544     
                     545     
                     546                     
                     547                               
                     548                     
                     549     
                     550     
                     551     ;загрузка коф KD в зависимости от диапазона
01C8                 552     loadKD:
                     553     ;;;;;;;;;;;;
                     554      ;;;;;;;;;;;;;;
                     555     ;r7-количество байт
                     556     ;dptr-адр 1-й ячейки сектора
                     557     ;
01C8                 558     cle256:
                     559                              ; push rr7                                             ;стирание r
                             7 байт(запись в ячейки ff)
                     560                                                             
01C8 758F02          561     mm3:            MOV             PSCTL,#02
                     562                                     
01CB 758F03          563                                     MOV             PSCTL,#03
01CE 75B6A5          564                                     mov             FLSCL,#0a5h
01D1 75B6F1          565                                     mov             FLSCL,#0f1h
                     566                                             
01D4 74FF            567                                     mov             a,#0ffh
01D6 F0              568                                     movx    @dptr,a                         ;wr
01D7 22              569                                     ret
                     570                                     
                     571     ;;;;;;;;;;;;;;
                     572     ;r7-количество байт
                     573     ;dptr-адр ячейки для записи
                     574     ;r1-адр ячейки
01D8                 575     wr4bait:
01D8                 576     mm5:
01D8 758F03          577                             MOV             PSCTL,#03;00                            ;обязательн
                             о для каждого записи байта
                     578                                     
01DB 758F01          579                                     MOV             PSCTL,#01                       ;обязательн
                             о для каждого записи байта
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    10

                     580     ;                               mov             FLKEY,#0a5h             ;обязательно для ка
                             ждого записи байта
                     581     ;                               mov             FLKEY,#0f1h             ;обязательно для ка
                             ждого записи байта
                     582                                             
01DE E7              583                               mov   a,@r1
01DF F0              584                                     movx    @dptr,a                         ;wr
01E0 A3              585                                     inc             dptr
01E1 09              586                                     inc             r1
01E2 DFF4            587                                     djnz    r7,mm5
01E4 22              588                                     ret
                     589     
                     590     ;чтение памяти программ в r8..r11
                     591     ;вх-r2,r3-адр яч памяти прогр
01E5 8A83            592     re4byte:        mov                     dph,r2
01E7 8B82            593                                             mov                     dpl,r3
01E9 E4              594                                             clr                     a
01EA 93              595                                             movc            a,@a+dptr
01EB F508            596                                             mov                     r8,a
01ED A3              597                                             inc                     dptr
01EE E4              598                                             clr                     a
01EF 93              599                                             movc            a,@a+dptr
01F0 F509            600                                             mov                     r9,a
01F2 A3              601                                             inc                     dptr
01F3 E4              602                                             clr                     a
01F4 93              603                                             movc            a,@a+dptr
01F5 F50A            604                                             mov                     r10,a
01F7 A3              605                                             inc                     dptr
01F8 E4              606                                             clr                     a
01F9 93              607                                             movc            a,@a+dptr
01FA F50B            608                                             mov                     r11,a                      
                                                  ;r8..r11
01FC 22              609                                             ret
                     610     
                     611     
                     612     
                     613     
                     614     
                     615                                                             
                     616     
                     617     ;;;;;;;;;;;;;
                     618     ;r7-количество байт
                     619     ;dptr-адр ячейки для записи
                     620     ;r1-адр ячейки
                     621     
01FD                 622     wrpage:
01FD                 623     WW5:
01FD 75A800          624                             mov             IE,#0
0200 75B601          625                             MOV             FLSCL,#01;FLWE(FLSCL.0)обязательно для каждого запи
                             си байта
                     626                                     
0203 758F03          627                             MOV             PSCTL,#03;FLWE(PSCTL.1,.0)обязательно для каждого з
                             аписи байта
0206 758F00          628                             MOV             PSCTL,#00
0209 E3              629                             movx    a,@r1
020A 758F01          630                             MOV             PSCTL,#01
020D F0              631                             movx    @dptr,a                         ;wr
020E 758F00          632                             MOV             PSCTL,#00
0211 A3              633                             inc             dptr
0212 09              634                             inc             r1
0213 DFE8            635                             djnz    r7,WW5
0215 75A880          636                             mov             IE,#80h
0218 22              637                             ret
                     638                             
                     639     ;;;;;;;;;;;;;;;;;;;;;;;;;
                     640     ;чтение памяти программ во внешнее озу
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    11

                     641     ;вх-r2,r3-адр яч памяти прогр
                     642     ;r1- яч внешнее озу
0219 8A83            643     copyPP:         mov                     dph,r2
021B 8B82            644                                             mov                     dpl,r3
021D 7FFF            645                                             mov                     r7,#0ffh
021F E4              646     copy1:          clr                     a
0220 93              647                                             movc            a,@a+dptr
0221 F3              648                                             movx                    @r1,a
0222 A3              649                                             inc                     dptr
0223 09              650                                             inc                     r1
0224 DFF9            651                                             djnz            r7,copy1
0226 22              652                                             ret
                     653     ;;;;;;;;;;;;;;;;;;;;;;;;;
                     654     
                     655                                     
                     656     
                     657     
                     658     
                     659     ;$include (d:\amp\subr1.asm) 
                +1   660      ;in-r1-count
0227            +1   661     chdec:          ;mov            r1,#chavt               ;chavt-1
0227 E7         +1   662                             mov             a,@r1
0228 FC         +1   663                             mov             r4,a
0229 09         +1   664                             inc             r1
022A E7         +1   665                             mov             a,@r1
022B FD         +1   666                             mov             r5,a
022C C202       +1   667                             clr             rr2
022E C203       +1   668                             clr             rr3
0230 900000   F +1   669                             mov             dptr,#ch1        
0233 120000   F +1   670                             call    ldc_ltemp
0236 120000   F +1   671                             call    lsub
0239 ED         +1   672                             mov             a,r5
023A F7         +1   673                             mov             @r1,a
023B 19         +1   674                             dec             r1
023C EC         +1   675                             mov             a,r4
023D F7         +1   676                             mov             @r1,a
023E 22         +1   677                             ret      
                +1   678     
                +1   679     
                +1   680     
                +1   681     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
023F 784B       +1   682      ind:    mov            r0,#bufind+11
0241 7F0C       +1   683                      mov            r7,#12
0243 C286       +1   684      nexin: clr             p0.6
0245 E6         +1   685                     mov             a,@r0
0246 F59B       +1   686                     mov             SPI0DAT,a
0248 20FBFD     +1   687                     jb              TXBSY,$
024B D286       +1   688                     setb    p0.6
024D 120000   F +1   689                     call    z_9
0250 18         +1   690                     dec             r0
0251 DFF0       +1   691                     djnz    r7,nexin
0253 22         +1   692                ret
                +1   693     
0254 7A08       +1   694     zapadc:   mov R2,#8
0256 D297       +1   695     sdv:      setb P1.7
0258 33         +1   696               rlc A
0259 9296       +1   697                     mov P1.6,C
025B 120000   F +1   698                     call tim2
                +1   699                                     
025E C297       +1   700                     clr P1.7
0260 120000   F +1   701                     call tim2
0263 DAF1       +1   702                     djnz R2,sdv
0265 D296       +1   703                     setb P1.6
0267 22         +1   704                     ret
                +1   705     
0268 7A08       +1   706     chtadc:   mov R2,#8
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    12

026A D297       +1   707     sdv1:     setb P1.7
026C 120000   F +1   708               call tim2
026F C297       +1   709                     clr P1.7
0271 A296       +1   710                     mov C,P1.6
0273 33         +1   711                     rlc A
0274 120000   F +1   712                     call tim2
0277 DAF1       +1   713                     djnz R2,sdv1
0279 22         +1   714                     ret
                +1   715     
027A 7E30       +1   716     tim:      mov R6,#30h;38h
027C DEFE       +1   717     tim1:     djnz R6,tim1
027E 22         +1   718               ret
                +1   719               
027F 7E10       +1   720     tim2:     mov R6,#10h;14h
0281 DEFE       +1   721     tim3:     djnz R6,tim3
0283 22         +1   722               ret
                +1   723     
                +1   724     ;запись из acc
0284 C3         +1   725     write_x1: clr   c
0285            +1   726     writeD_x1:
0285 92B1       +1   727                       mov P3.1,c        ;запись
0287 F5A0       +1   728               mov P2,A
0289 D2B3       +1   729                       setb P3.3
028B 120000   F +1   730                       call z_5
028E C2B3       +1   731                       clr P3.3
0290 75A0FF     +1   732                       mov P2,#0FFh
0293 22         +1   733                       ret
                +1   734     
                +1   735     ;чтение в acc
0294 C3         +1   736     read_x2:  clr   c  
0295 92B1       +1   737               mov P3.1,c        ;чтение
0297 D2B2       +1   738               setb P3.2
0299 D2B3       +1   739                       setb P3.3
029B 120000   F +1   740                     call z_5
029E E5A0       +1   741                       mov A,P2
02A0 C2B3       +1   742                       clr P3.3
02A2 C2B2       +1   743                       clr P3.2
02A4 22         +1   744                       ret
                +1   745     
                +1   746     
02A5 120000   F +1   747     loop:     call read_x2;x2    ;ожидание флага готовности
02A8 20E7FA     +1   748                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
02AB 22         +1   749                        ret           ;возврат, если бит А(7)<>1
                +1   750                                      
                +1   751                                        
                +1   752     
                +1   753     ;задержка 100 мкс
02AC 7978       +1   754     z_100:    mov R1,#78h     ;загрузка первого числа
02AE 7A02       +1   755     z100:     mov R2,#2h     ;загрузка второго числа
02B0 DAFE       +1   756     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
02B2 D9FA       +1   757               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
02B4 22         +1   758               ret           
                +1   759     
                +1   760     ;задержка 34 мкс
02B5 7B8B       +1   761     z_5:      mov R3,#8Bh      ;загрузка числа
02B7 DBFE       +1   762     ct:       djnz R3,ct
02B9 22         +1   763               ret
                +1   764     
                +1   765     ;задержка 15 мс
02BA 79FA       +1   766     z_15:     mov R1,#0FAh    ;загрузка первого числа
02BC 7AED       +1   767     z15:      mov R2,#0EDh   ;загрузка второго числа
02BE DAFE       +1   768     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
02C0 D9FA       +1   769               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
02C2 22         +1   770               ret   
                +1   771                                               
                +1   772     ;????????
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    13

                +1   773     ;задержка 1с
02C3 7D1F       +1   774     z_1s:   mov             r5,#01fh 
02C5 7EFF       +1   775     co2s:   mov     R6,#0ffh     
02C7 7FFF       +1   776     z1s:     mov    R7,#0ffh     
02C9 DFFE       +1   777     co1s:   djnz    R7, co1s        
02CB DEFA       +1   778             djnz    R6, z1s 
02CD DDF6       +1   779                     djnz    r5,co2s
02CF 22         +1   780               ret           
                +1   781     
02D0 7D6F       +1   782      z_ss:   mov            r5,#06fh 
02D2 7EFF       +1   783     coss:   mov     R6,#0ffh     
02D4 7FFF       +1   784     zss:     mov    R7,#0ffh     
02D6 DFFE       +1   785     cozs:   djnz    R7, cozs        
02D8 DEFA       +1   786             djnz    R6, zss 
02DA DDF6       +1   787                     djnz    r5,coss
02DC 22         +1   788               ret           
                +1   789     ;dptr+4-приемник
                +1   790     ;dptr-источник
                +1   791     ;r7-кол байт  
02DD            +1   792     xCIKLWR:
02DD 7F04       +1   793                             mov             r7,#4   
02DF E0         +1   794     lwrx:   movx    a,@dptr
02E0 C083       +1   795                             push    dph
02E2 C082       +1   796                             push    dpl
02E4 A3         +1   797                             inc             dptr
02E5 A3         +1   798                             inc             dptr
02E6 A3         +1   799                             inc             dptr
02E7 A3         +1   800                             inc             dptr
02E8 F0         +1   801                             movx    @dptr,a
02E9 D082       +1   802                             pop             dpl
02EB D083       +1   803                             pop             dph
                +1   804                             
02ED A3         +1   805                             inc             dptr
02EE DFEF       +1   806                             djnz    r7,lwrx
02F0 22         +1   807                             ret
                +1   808     ;r2..r5->@dptr..@dptr+3                         
02F1 EA         +1   809     saveIr2:                mov     a,r2
02F2 F0         +1   810                                             movx    @dptr,a
02F3 A3         +1   811                                             inc     dptr
02F4 EB         +1   812                                             mov     a,r3
02F5 F0         +1   813                                             movx    @dptr,a
02F6 A3         +1   814                                             inc     dptr
02F7 EC         +1   815                                             mov     a,r4
02F8 F0         +1   816                                             movx    @dptr,a
02F9 A3         +1   817                                             inc     dptr
02FA ED         +1   818                                             mov     a,r5
02FB F0         +1   819                                             movx    @dptr,a
02FC 22         +1   820                                             ret
                +1   821     ;r2..r5-> @r0..@r0+3
                +1   822     
02FD EA         +1   823     saver2:         mov     a,r2
02FE F6         +1   824                                             mov     @r0,a
02FF 08         +1   825                                             inc     r0
0300 EB         +1   826                                             mov     a,r3
0301 F6         +1   827                                             mov     @r0,a
0302 08         +1   828                                             inc     r0
0303 EC         +1   829                                             mov     a,r4
0304 F6         +1   830                                             mov     @r0,a
0305 08         +1   831                                             inc     r0
0306 ED         +1   832                                             mov     a,r5
0307 F6         +1   833                                             mov     @r0,a
0308 22         +1   834                                             ret 
                +1   835     ;r8..r11-> @r0..@r0+3
                +1   836     
0309 E508       +1   837     saver8:         mov     a,r8
030B F6         +1   838                                             mov     @r0,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    14

030C 08         +1   839                                             inc     r0
030D E509       +1   840                                             mov     a,r9
030F F6         +1   841                                             mov     @r0,a
0310 08         +1   842                                             inc     r0
0311 E50A       +1   843                                             mov     a,r10
0313 F6         +1   844                                             mov     @r0,a
0314 08         +1   845                                             inc     r0
0315 E50B       +1   846                                             mov     a,r11
0317 F6         +1   847                                             mov     @r0,a
0318 22         +1   848                                             ret 
                +1   849     
0319 7F28       +1   850     clmassix:       mov                     r7,#28h
031B 900080     +1   851                             mov     dptr,#MASS0        ;забить массив A нулями
031E 7400       +1   852     clmax:          mov          a,#00h
0320 F0         +1   853                  movx    @dptr,a
0321 A3         +1   854                  inc     dptr
0322 DFFA       +1   855                 djnz                r7,clmax                
0324 F56E       +1   856                  mov     chmas,a
0326 C201       +1   857                  clr     bitmas
0328 22         +1   858                 ret
                +1   859     
                +1   860     ;r1-яЁшхьшъ
                +1   861     ;r0-шёЄюўшъ
                +1   862     ;r7-ъюы срщЄ  
0329            +1   863     CIKLWR:
0329 7F04       +1   864                             mov             r7,#4   
032B E6         +1   865     lwr:    mov     a,@r0
032C F7         +1   866                             mov     @r1,a
032D 09         +1   867                             inc             r1
032E 08         +1   868                             inc             r0
032F DFFA       +1   869                             djnz    r7,lwr
0331 22         +1   870                             ret     
                +1   871     ;r2..r5-> @dptr..@dptr+3
                +1   872     
0332 120000   F +1   873     zmul:   call    maform
0335 120000   F +1   874                     call    lmul
0338 120000   F +1   875                     call    bform
033B 22         +1   876                     ret
                +1   877     
033C 120000   F +1   878     zdiv:   call    maform
033F 120000   F +1   879                     call    divide
0342 120000   F +1   880                     call    bform
0345 22         +1   881                     ret
                +1   882     
0346 EA         +1   883     maform: mov a,r2
0347 33         +1   884             rlc a
0348 5006       +1   885             jnc             fo1m
034A D202       +1   886                     setb            znmat
034C 120000   F +1   887                     call   form4
034F 22         +1   888                     ret
0350 C202       +1   889     fo1m:   clr             znmat
0352 22         +1   890                     ret
                +1   891     
0353 300203     +1   892     bform:  jnb             znmat,fo2m
0356 120000   F +1   893                     call    form4
0359 22         +1   894     fo2m:   ret
                +1   895       
                +1   896     ;r2..r5 яхЁхтхёЄш т фюя ъюф
035A ED         +1   897     form4:          mov a,r5
035B F4         +1   898             cpl a
035C 2401       +1   899             add a,#1
035E FD         +1   900             mov r5,a
035F EC         +1   901             mov a,r4
0360 F4         +1   902             cpl a
0361 3400       +1   903             addc    a,#0
0363 FC         +1   904             mov r4,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    15

0364 EB         +1   905             mov a,r3
0365 F4         +1   906                 cpl a
0366 3400       +1   907             addc    a,#0
0368 FB         +1   908             mov r3,a
0369 EA         +1   909             mov a,r2
036A F4         +1   910             cpl a
036B 3400       +1   911             addc    a,#0
036D FA         +1   912             mov r2,a
036E 22         +1   913             ret
                +1   914     
036F 120000   F +1   915     zcmp:   call            maform
0372 120000   F +1   916                     call            lcmp
0375 C0D0       +1   917                     push            psw
0377 120000   F +1   918                     call    bform
037A D0D0       +1   919                     pop             psw
037C 22         +1   920                     ret
                +1   921     
                +1   922     
                +1   923     ;@r0..@r0+3->r8..r11
                +1   924     
037D E6         +1   925     resar8: mov     a,@r0
037E F508       +1   926                     mov     ltemp,a
0380 08         +1   927                     inc     r0
0381 E6         +1   928                     mov     a,@r0
0382 F509       +1   929                     mov     ltemp+1,a
0384 08         +1   930                     inc     r0
0385 E6         +1   931                     mov     a,@r0
0386 F50A       +1   932                     mov     ltemp+2,a
0388 08         +1   933                     inc     r0
0389 E6         +1   934                     mov     a,@r0
038A F50B       +1   935                     mov     ltemp+3,a
038C 22         +1   936                     ret
                +1   937     
                +1   938     ;
                +1   939     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1   940     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1   941     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1   942     ;r2 a    ўшёыю 180
                +1   943     ;00 b4
                +1   944     ;т_ї- mabin..mabin+2
                +1   945     ;     80 01 00
                +1   946      
038D C8         +1   947     cond:   xch     a,r0    
038E F9         +1   948                     mov     r1,a
038F C8         +1   949                     xch     a,r0
0390 7C03       +1   950                     mov     r4,#03
0392 7700       +1   951     dcoa:   mov     @r1,#00
0394 09         +1   952                     inc     r1
0395 DCFB       +1   953                     djnz    r4,dcoa
0397 7B10       +1   954                     mov     r3,#10h
0399 C3         +1   955     dcob:   clr     c
039A 33         +1   956                     rlc     a
039B CA         +1   957                     xch     a,r2
039C 33         +1   958                     rlc     a
039D CA         +1   959                     xch     a,r2
039E C8         +1   960                     xch     a,r0
039F F9         +1   961                     mov     r1,a
03A0 C8         +1   962                     xch     a,r0
03A1 7C03       +1   963                     mov     r4,#03
03A3 FD         +1   964                     mov     r5,a
03A4 E7         +1   965     dcoc:   mov     a,@r1 
03A5 37         +1   966                     addc    a,@r1
03A6 D4         +1   967                     da      a
03A7 F7         +1   968                     mov     @r1,a
03A8 09         +1   969                     inc     r1
03A9 DCF9       +1   970                     djnz    r4,dcoc
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    16

03AB ED         +1   971                     mov     a,r5
03AC 4003       +1   972                     jc      dcod
03AE DBE9       +1   973                     djnz    r3,dcob
03B0 C3         +1   974                     clr     c
03B1 00         +1   975     dcod:   nop
03B2 22         +1   976                     ret
                +1   977     
03B3 8A08       +1   978     move28: mov     ltemp,r2                        ;r2..r5->ltemp
03B5 850309     +1   979                     mov     ltemp+1,3
03B8 85040A     +1   980                     mov     ltemp+2,4
03BB 85050B     +1   981                     mov     ltemp+3,5
03BE 22         +1   982                     ret
                +1   983     
                +1   984     ;@r0..@r0+3->r2..r5
                +1   985     
03BF E6         +1   986     resar2: mov     a,@r0
03C0 FA         +1   987                     mov     r2,a
03C1 08         +1   988                     inc     r0
03C2 E6         +1   989                     mov     a,@r0
03C3 FB         +1   990                     mov     r3,a
03C4 08         +1   991                     inc     r0
03C5 E6         +1   992                     mov     a,@r0
03C6 FC         +1   993                     mov     r4,a
03C7 08         +1   994                     inc     r0
03C8 E6         +1   995                     mov     a,@r0
03C9 FD         +1   996                     mov     r5,a
03CA 22         +1   997                     ret
                +1   998     
                +1   999     ;25mkc !!!!!!!!!!!!!!!1
03CB 7B4B       +1  1000     z_9:      mov R3,#4Bh      ;загрузка числа
03CD DBFE       +1  1001                    djnz R3,$
03CF 22         +1  1002               ret
                +1  1003     
                +1  1004     ;запись   передаваемый байт в acc
                +1  1005     ;передача байта послед кодом старшими разрядами  вперед
03D0 7A08       +1  1006     write:     mov R2,#8
03D2 C3         +1  1007                             clr  c  
03D3 C292       +1  1008     wr1:            clr             P1.2
03D5 00         +1  1009                         nop 
03D6 33         +1  1010                             rlc A
03D7 9291       +1  1011                             mov P1.1,C
03D9 120000   F +1  1012                        call tim2
03DC D292       +1  1013                        setb P1.2
03DE 120000   F +1  1014                call tim2
03E1 DAF0       +1  1015                       djnz R2,wr1
03E3 C291       +1  1016                       clr P1.1
03E5 22         +1  1017                      ret
                +1  1018     
                +1  1019     ;принимаемый байт в acc
                +1  1020     ;прием байта последовательным кодом старшими разрядами вперед
03E6 7A08       +1  1021     read:    mov R2,#8
03E8 C292       +1  1022     re1:     clr P1.2
03EA 120000   F +1  1023              call tim2        ;5mks
03ED A290       +1  1024                     mov C,P1.0
03EF 33         +1  1025                     rlc A           
03F0 D292       +1  1026                     setb P1.2
03F2 120000   F +1  1027                     call tim2
03F5 DAF1       +1  1028                     djnz R2,re1
03F7 22         +1  1029                     ret
                +1  1030     
                +1  1031      ;in r0-count   
                +1  1032     ;r10,r11-значение с котоым сравнивается счетчик
                +1  1033     ;r2..r5 -значение счетчика
03F8            +1  1034     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
03F8 E6         +1  1035                     mov                     a,@r0
03F9 FC         +1  1036                     mov                     r4,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    17

03FA 08         +1  1037                     inc                     r0
03FB E6         +1  1038                     mov                     a,@r0
03FC FD         +1  1039                     mov                     r5,a
03FD 7B00       +1  1040                     mov                     r3,#0
03FF 7A00       +1  1041                     mov                     r2,#0
0401 750800     +1  1042                     mov                     r8,#0;clr                       r8
0404 750900     +1  1043                     mov                     r9,#0;clr                       r9
0407 120000   F +1  1044                     call            lcmp
040A 22         +1  1045                     ret
                +1  1046     
                +1  1047     
                +1  1048     
040B 00000000   +1  1049     ch0:    db      00,00,00,00
040F 0000000A   +1  1050     ch10:   db      00,00,00,0ah                            ;10
0413 00000005   +1  1051     ch5:    db      00,00,00,05                                             ;5
0417 000003B9   +1  1052     ch954:  db 00,00,03,0b9h                                                ;954
041B 000003E8   +1  1053     ch10000:        db 00,00,03h,0e8h                                               ;10000
041F 00000064   +1  1054     ch100:  db 00,00,00,64h ;100
0423 00000002   +1  1055     ch2:    db      00,00,00,02                                             
                +1  1056     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  1057     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  1058     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
0427 00000001   +1  1059     ch1:    db  00,00,00,01
042B 3F800000   +1  1060     ch_1:   db      3fh,80h,00,00                   
042F 3F741EDF   +1  1061     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
0433 47C35000   +1  1062     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000    
0437 4856D800   +1  1063     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
043B 4856D800   +1  1064     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
043F 461C4000   +1  1065     ch_10th:db  46h,1ch,40h,00;10000-2710h
                    1066     
                    1067     ;$include (d:\amp\sarifm3.asm) 
                +1  1068     ; ” ©« SARIFM.ASM 8.11.95
                +1  1069     ;файл арифметики
                +1  1070       
  0008          +1  1071     ltemp    equ       8           ;long temporary
  000C          +1  1072     xtemp    equ       12          ;other temporaries
  000A          +1  1073     DECSIZE  EQU       10
  0004          +1  1074     NUMSIZE  EQU       4
  0004          +1  1075     RR4  EQU       4
  0005          +1  1076     RR5  EQU       5
                +1  1077     
                +1  1078                                                     
                +1  1079     
                +1  1080                 ; rseg     ARIF          ; Switch to this code segment.
                +1  1081     ;             using    0              ; Specify register bank for the following
                +1  1082                                            ; program code.
                +1  1083     ;                                               cseg AT 400h
                +1  1084     ; Arithmetics:  CLEARING string
                +1  1085     ; Input:
                +1  1086     ; R0 - pointer to string,
                +1  1087     ; NUMSIZE - byte count if CLRNUM used,
                +1  1088     ; DECSIZE - byte count if CLRDEC used,
                +1  1089     ; R2 - byte count if CLEAR used;
                +1  1090     ; Output:  none.
                +1  1091     
0443            +1  1092     CLRDEC:
0443 7A0A       +1  1093         MOV R2, #DECSIZE
0445 8002       +1  1094         SJMP    CLEAR
0447            +1  1095     CLRNUM:
0447 7A04       +1  1096         MOV R2, #NUMSIZE
                +1  1097         ;JMP    CLEAR
0449            +1  1098     CLEAR:
0449 E4         +1  1099         CLR A
044A F6         +1  1100     CLR11:  MOV @R0, A
044B 08         +1  1101         INC R0
044C DAFC       +1  1102         DJNZ    R2, CLR11
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    18

044E 22         +1  1103         RET
                +1  1104     
                +1  1105     ;**********************************
                +1  1106     ;mov    r1,#abin+3
                +1  1107     ;mov    r0,#adec
                +1  1108     ; _ _ _ _
                +1  1109     ;     03ff
                +1  1110     ;ст     мл   - вход
                +1  1111     ; _ _ _ _ _ _ _ _ _ _
                +1  1112     ;             1 0 2 3
                +1  1113     ;ст                мл 
                +1  1114     ;**********************************
                +1  1115     
044F            +1  1116     BINDEC:
                +1  1117     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  1118     ; Input:
                +1  1119     ; R0 - pointer to destination (high digit is the first),
                +1  1120     ; R1 - pointer to source,
                +1  1121     ; NUMSIZE - byte count in binary number;
                +1  1122     ; DECSIZE - byte count in decimal number;
                +1  1123     ; Output:  none.
                +1  1124     ; Source saved
                +1  1125     
                +1  1126         ; 1. Clear result
044F 7A05       +1  1127         MOV R2, #DECSIZE/2
0451 120000   F +1  1128         CALL   CLEAR  ; incrementing R0
                +1  1129     
                +1  1130         ; 2. Prepare convertion
0454 18         +1  1131         DEC R0
0455 8804       +1  1132         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
0457 8905       +1  1133         MOV RR5, R1 ; R5 - pointer to low byte of binary number
0459 7B20       +1  1134         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  1135     
                +1  1136         ; 3. Convert cyrcle
045B            +1  1137     BIN30:
                +1  1138     
                +1  1139         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
045B A905       +1  1140         MOV R1, RR5
045D 7A04       +1  1141         MOV R2, #NUMSIZE
045F E7         +1  1142     BIN31:  MOV A, @R1
0460 33         +1  1143         RLC A
0461 F7         +1  1144         MOV @R1, A
0462 19         +1  1145         DEC R1
0463 DAFA       +1  1146         DJNZ    R2, BIN31
0465 A905       +1  1147         MOV R1, RR5
0467 E7         +1  1148         MOV A, @R1
0468 92E0       +1  1149         MOV ACC.0, C
046A F7         +1  1150         MOV @R1, A
                +1  1151     
                +1  1152         ; 3.2. Doubling decimal result with <Carry>
046B A804       +1  1153         MOV R0, RR4
046D 7A05       +1  1154         MOV R2, #DECSIZE/2
046F E6         +1  1155     BIN32:  MOV A, @R0
0470 36         +1  1156         ADDC    A, @R0
0471 D4         +1  1157         DA  A
0472 F6         +1  1158         MOV @R0, A
0473 18         +1  1159         DEC R0
0474 DAF9       +1  1160         DJNZ    R2, BIN32
                +1  1161     
                +1  1162         ; 3.3. End of convert cyrcle
0476 DBE3       +1  1163         DJNZ    R3, BIN30
                +1  1164     
                +1  1165         ; 4. Make bytes from half-bytes
0478 E8         +1  1166         MOV A, R0
0479 240A       +1  1167         ADD A, #DECSIZE
047B F8         +1  1168         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    19

047C A904       +1  1169         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
047E 7A05       +1  1170         MOV R2, #DECSIZE/2
0480 E7         +1  1171     BIN41:  MOV A, @R1
0481 540F       +1  1172         ANL A, #00FH
0483 F6         +1  1173         MOV @R0, A
0484 18         +1  1174         DEC R0
0485 E7         +1  1175         MOV A, @R1
0486 C4         +1  1176         SWAP    A
0487 540F       +1  1177         ANL A, #00FH
0489 F6         +1  1178         MOV @R0, A
048A 18         +1  1179         DEC R0
048B 19         +1  1180         DEC R1
048C DAF2       +1  1181         DJNZ    R2, BIN41
048E 22         +1  1182         RET
                +1  1183     
                +1  1184     
                +1  1185     ;*********************************
                +1  1186     ;mov    r0,#abin
                +1  1187     ;mov    r1,#adec
                +1  1188     ; _ _ _ _       -выход
                +1  1189     ; ff0000
                +1  1190     ;0004
                +1  1191     ;мл      ст
                +1  1192     
                +1  1193     ;ст                       мл
                +1  1194     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  1195     ;                       2 5 5
                +1  1196     ;                   1 0 2 4
                +1  1197     
048F            +1  1198     DECBIN:
                +1  1199     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  1200     ; Input:
                +1  1201     ; R0 - pointer to destination,
                +1  1202     ; R1 - pointer to source (high digit is the first),
                +1  1203     ; NUMSIZE - byte count in binary number;
                +1  1204     ; DECSIZE - byte count in decimal number;
                +1  1205     ; Output:  none
                +1  1206     ; Source cleared
                +1  1207     
                +1  1208         ; 1. Clear result
048F 120000   F +1  1209         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  1210     
                +1  1211         ; 2. Prepare convertion
0492 18         +1  1212         DEC R0
0493 8804       +1  1213         MOV RR4, R0 ; R4 - pointer to high byte of binary result
0495 8905       +1  1214         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
0497 900000   F +1  1215         MOV DPTR, #DECT2
049A 7B20       +1  1216         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  1217     
                +1  1218         ; 3. Convert cyrcle
049C            +1  1219     DEC30:
                +1  1220     
                +1  1221         ; 3.1. Divide decimal number by 2 and prepare <Carry>
049C C3         +1  1222         CLR C
049D A905       +1  1223         MOV R1, RR5
049F 7A0A       +1  1224         MOV R2, #DECSIZE
04A1 E7         +1  1225     DEC31:  MOV A, @R1
04A2 540F       +1  1226         ANL A, #00FH
04A4 92E4       +1  1227         MOV ACC.4, C
04A6 93         +1  1228         MOVC    A,@A+DPTR
04A7 F7         +1  1229         MOV @R1, A
04A8 A2E7       +1  1230         MOV C, ACC.7
04AA 09         +1  1231         INC R1
04AB DAF4       +1  1232         DJNZ    R2, DEC31
                +1  1233     
                +1  1234         ; 3.2. Rotate binary result one bit to right with <Carry>
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    20

04AD A804       +1  1235         MOV R0, RR4
04AF 7A04       +1  1236         MOV R2, #NUMSIZE
04B1 E6         +1  1237     DEC32:  MOV A, @R0
04B2 13         +1  1238         RRC A
04B3 F6         +1  1239         MOV @R0, A
04B4 18         +1  1240         DEC R0
04B5 DAFA       +1  1241         DJNZ    R2, DEC32
                +1  1242     
                +1  1243         ; 3.3. End of convert cyrcle
04B7 DBE3       +1  1244         DJNZ    R3, DEC30
04B9 22         +1  1245         RET
                +1  1246     
04BA 00800181   +1  1247     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
04BE 02820383                
04C2 0484                    
04C4 00000000   +1  1248         DB  00,00,00,00,00,00
04C8 0000                    
04CA 05850686   +1  1249         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
04CE 07870888                
04D2 0989                    
                +1  1250     
                +1  1251     ;   Long comparison
                +1  1252     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  1253     ;   flags and acc set as though a long subtraction was done.
                +1  1254     ;*******************************
                +1  1255     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  1256     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  1257     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  1258     ;*******************************
04D4            +1  1259     lcmp:
04D4 C3         +1  1260         clr c
04D5 EA         +1  1261         mov a,r2
04D6 9508       +1  1262         subb    a,8
04D8 700F       +1  1263         jnz done
04DA EB         +1  1264         mov a,r3
04DB 9509       +1  1265         subb    a,9
04DD 7008       +1  1266         jnz done1
04DF EC         +1  1267         mov a,r4
04E0 950A       +1  1268         subb    a,10
04E2 7003       +1  1269         jnz done1
04E4 ED         +1  1270         mov a,r5
04E5 950B       +1  1271         subb    a,11
04E7            +1  1272     done1:
04E7 C2D2       +1  1273         clr ov      ;overflow is significant only for top byte
04E9            +1  1274     done:
04E9 22         +1  1275         ret
                +1  1276     
                +1  1277     ;   Load long into r2-5 from [dptr]
                +1  1278     
04EA            +1  1279     ldc_long:
04EA E583       +1  1280         mov a,dph       ;is it in on board memory
04EC 6010       +1  1281         jz  onboard     ;yes
04EE E4         +1  1282         clr a
04EF 93         +1  1283         movc    a,@a+dptr
04F0 FA         +1  1284         mov r2,a
04F1 7401       +1  1285         mov a,#1
04F3 93         +1  1286         movc    a,@a+dptr
04F4 FB         +1  1287         mov r3,a
04F5 7402       +1  1288         mov a,#2
04F7 93         +1  1289         movc    a,@a+dptr
04F8 FC         +1  1290         mov r4,a
04F9 7403       +1  1291         mov a,#3
04FB 93         +1  1292         movc    a,@a+dptr
04FC FD         +1  1293         mov r5,a
04FD 22         +1  1294         ret
04FE            +1  1295     onboard:
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    21

04FE A882       +1  1296         mov r0,dpl
0500 E6         +1  1297         mov a,@r0
0501 FA         +1  1298         mov r2,a
0502 08         +1  1299         inc r0
0503 E6         +1  1300         mov a,@r0
0504 FB         +1  1301         mov r3,a
0505 08         +1  1302         inc r0
0506 E6         +1  1303         mov a,@r0
0507 FC         +1  1304         mov r4,a
0508 08         +1  1305         inc r0
0509 E6         +1  1306         mov a,@r0
050A FD         +1  1307         mov r5,a
050B 22         +1  1308         ret
                +1  1309     
                +1  1310     ;**************************************
                +1  1311     ;загрузить ltemp...+3 из памяти программ
                +1  1312     ;mov    dptr,#CH5
                +1  1313     ;call   ldc_ltemp        ltemp <--5
                +1  1314     ;**************************************
050C            +1  1315     ldc_ltemp:
050C E583       +1  1316         mov a,dph       ;is it in on board memory
050E 6014       +1  1317         jz  oboard      ;yes
0510 E4         +1  1318         clr a
0511 93         +1  1319         movc    a,@a+dptr
0512 F508       +1  1320         mov 8,a
0514 7401       +1  1321         mov a,#1
0516 93         +1  1322         movc    a,@a+dptr
0517 F509       +1  1323         mov 9,a
0519 7402       +1  1324         mov a,#2
051B 93         +1  1325         movc    a,@a+dptr
051C F50A       +1  1326         mov 10,a
051E 7403       +1  1327         mov a,#3
0520 93         +1  1328         movc    a,@a+dptr
0521 F50B       +1  1329         mov 11,a
0523 22         +1  1330         ret
0524            +1  1331     oboard:
0524 A882       +1  1332         mov r0,dpl
0526 8608       +1  1333         mov 8,@r0
0528 08         +1  1334         inc r0
0529 8609       +1  1335         mov 9,@r0
052B 08         +1  1336         inc r0
052C 860A       +1  1337         mov 10,@r0
052E 08         +1  1338         inc r0
052F 860B       +1  1339         mov 11,@r0
0531 22         +1  1340         ret
                +1  1341     
                +1  1342     ;*****************************
                +1  1343     ;mov    dptr,#k1
                +1  1344     ;call   ldx_long
                +1  1345     ;k1->r2..r5
                +1  1346     ;*****************************
                +1  1347     ;   Load long into r2-5 from [dptr]
                +1  1348     ;
                +1  1349     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
0532            +1  1350     ldx_long:
0532 E583       +1  1351         mov a,dph       ;is it in on board memory
0534 6014       +1  1352         jz  onboar1        ;yes
0536 C082       +1  1353         push    dpl
0538 C083       +1  1354         push    dph
053A E0         +1  1355         movx    a,@dptr
053B FA         +1  1356         mov r2,a
053C A3         +1  1357         inc dptr
053D E0         +1  1358         movx    a,@dptr
053E FB         +1  1359         mov r3,a
053F A3         +1  1360         inc dptr
0540 E0         +1  1361         movx    a,@dptr
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    22

0541 FC         +1  1362         mov r4,a
0542 A3         +1  1363         inc dptr
0543 E0         +1  1364         movx    a,@dptr
0544 FD         +1  1365         mov r5,a
0545 D083       +1  1366         pop dph
0547 D082       +1  1367         pop dpl
0549 22         +1  1368         ret
054A            +1  1369     onboar1:
054A A882       +1  1370         mov r0,dpl
054C E6         +1  1371         mov a,@r0
054D FA         +1  1372         mov r2,a
054E 08         +1  1373         inc r0
054F E6         +1  1374         mov a,@r0
0550 FB         +1  1375         mov r3,a
0551 08         +1  1376         inc r0
0552 E6         +1  1377         mov a,@r0
0553 FC         +1  1378         mov r4,a
0554 08         +1  1379         inc r0
0555 E6         +1  1380         mov a,@r0
0556 FD         +1  1381         mov r5,a
0557 22         +1  1382         ret
                +1  1383     
                +1  1384     ;*********************************
                +1  1385     ;mov    dptr,#k2
                +1  1386     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  1387     ;**********************************
0558            +1  1388     ldx_ltemp:
0558 E583       +1  1389         mov a,dph       ;is it in on board memory
055A 6010       +1  1390         jz  oboard1     ;yes
055C E0         +1  1391         movx    a,@dptr
055D F508       +1  1392         mov 8,a
055F A3         +1  1393         inc dptr
0560 E0         +1  1394         movx    a,@dptr
0561 F509       +1  1395         mov 9,a
0563 A3         +1  1396         inc dptr
0564 E0         +1  1397         movx    a,@dptr
0565 F50A       +1  1398         mov 10,a
0567 A3         +1  1399         inc dptr
0568 E0         +1  1400         movx    a,@dptr
0569 F50B       +1  1401         mov 11,a
056B 22         +1  1402         ret
056C            +1  1403     oboard1:
056C A882       +1  1404         mov r0,dpl
056E 8608       +1  1405         mov 8,@r0
0570 08         +1  1406         inc r0
0571 8609       +1  1407         mov 9,@r0
0573 08         +1  1408         inc r0
0574 860A       +1  1409         mov 10,@r0
0576 08         +1  1410         inc r0
0577 860B       +1  1411         mov 11,@r0
0579 22         +1  1412         ret
                +1  1413     ;   Long division routines for 8051
                +1  1414     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  1415     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  1416     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  1417     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  1418     ;   r1 must be saved by the caller.
                +1  1419     ;   This is long unsigned division.
                +1  1420     
                +1  1421     
                +1  1422     ;   Register usage:
                +1  1423     ;       r0 loop counter
                +1  1424     ;       xtemp (12-15) accumulates quotient
                +1  1425     ;       r5-r2 holds dividend
                +1  1426     ;       ltemp holds divisor
                +1  1427     
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    23

                +1  1428     ;************************************
                +1  1429     ;r2..r5-делимое
                +1  1430     ;ltemp..-делитель
                +1  1431     ;частное -r2..r5
                +1  1432     ;*************************************
057A            +1  1433     divide:
057A E4         +1  1434         clr a
057B F8         +1  1435         mov r0,a        ;initialize count
057C F50C       +1  1436         mov xtemp,a     ;zero quotient
057E F50D       +1  1437         mov xtemp+1,a
0580 F50E       +1  1438         mov xtemp+2,a
0582 F50F       +1  1439         mov xtemp+3,a
0584 ED         +1  1440         mov a,r5        ;check for zero dividend
0585 4C         +1  1441         orl a,r4
0586 4B         +1  1442         orl a,r3
0587 4A         +1  1443         orl a,r2
0588 600B       +1  1444         jz  jfinis
058A E508       +1  1445         mov a,ltemp     ;check for zero divisor
058C 4509       +1  1446         orl a,ltemp+1
058E 450A       +1  1447         orl a,ltemp+2
0590 450B       +1  1448         orl a,ltemp+3
0592 7037       +1  1449         jnz midl
0594 22         +1  1450         ret
                +1  1451     
0595 020000   F +1  1452     jfinis: jmp finis
                +1  1453     
0598            +1  1454     loops:
0598 EA         +1  1455         mov a,r2
0599 C3         +1  1456         clr c
059A 9508       +1  1457         subb    a,ltemp+0   ;is divisor greater than dividend yet
059C 4033       +1  1458         jc  yes     ;yes, go no further
059E 7013       +1  1459         jnz no
05A0 EB         +1  1460         mov a,r3
05A1 9509       +1  1461         subb    a,ltemp+1
05A3 402C       +1  1462         jc  yes
05A5 700C       +1  1463         jnz no
05A7 EC         +1  1464         mov a,r4
05A8 950A       +1  1465         subb    a,ltemp+2
05AA 4025       +1  1466         jc  yes
05AC 7005       +1  1467         jnz no
05AE ED         +1  1468         mov a,r5
05AF 950B       +1  1469         subb    a,ltemp+3
05B1 401E       +1  1470         jc  yes
05B3            +1  1471     no:
05B3 E50B       +1  1472         mov a,ltemp+3   ;shift divisor up one bit
05B5 250B       +1  1473         add a,ltemp+3
05B7 F50B       +1  1474         mov ltemp+3,a
05B9 E50A       +1  1475         mov a,ltemp+2
05BB 350A       +1  1476         addc    a,ltemp+2
05BD F50A       +1  1477         mov ltemp+2,a
05BF E509       +1  1478         mov a,ltemp+1
05C1 3509       +1  1479         addc    a,ltemp+1
05C3 F509       +1  1480         mov ltemp+1,a
05C5 E508       +1  1481         mov a,ltemp+0
05C7 3508       +1  1482         addc    a,ltemp+0
05C9 F508       +1  1483         mov ltemp+0,a
05CB            +1  1484     midl:
05CB 08         +1  1485         inc r0      ;increment count
05CC E508       +1  1486         mov a,ltemp+0   ;check for safe to shift some more
05CE 30E7C7     +1  1487         jnb acc.7,loops  ;loop if top bit clear
05D1            +1  1488     yes:
05D1 E508       +1  1489         mov a,ltemp+0
05D3 C3         +1  1490         clr c
05D4 9A         +1  1491         subb    a,r2        ;can we subtract now?
05D5 401A       +1  1492         jc  dosub       ;yes, go and do it
05D7 7015       +1  1493         jnz nosub
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    24

05D9 E509       +1  1494         mov a,ltemp+1
05DB 9B         +1  1495         subb    a,r3
05DC 4013       +1  1496         jc  dosub
05DE 700E       +1  1497         jnz nosub
05E0 E50A       +1  1498         mov a,ltemp+2
05E2 9C         +1  1499         subb    a,r4
05E3 400C       +1  1500         jc  dosub
05E5 7007       +1  1501         jnz nosub
05E7 E50B       +1  1502         mov a,ltemp+3
05E9 9D         +1  1503         subb    a,r5
05EA 4005       +1  1504         jc  dosub
05EC 6003       +1  1505         jz  dosub
05EE            +1  1506     nosub:
05EE C3         +1  1507         clr c
05EF 8012       +1  1508         sjmp    dosh
05F1            +1  1509     dosub:
05F1 C3         +1  1510         clr c       ;subtract divisor from dividend
05F2 ED         +1  1511         mov a,r5
05F3 950B       +1  1512         subb    a,ltemp+3
05F5 FD         +1  1513         mov r5,a
05F6 EC         +1  1514         mov a,r4
05F7 950A       +1  1515         subb    a,ltemp+2
05F9 FC         +1  1516         mov r4,a
05FA EB         +1  1517         mov a,r3
05FB 9509       +1  1518         subb    a,ltemp+1
05FD FB         +1  1519         mov r3,a
05FE EA         +1  1520         mov a,r2
05FF 9508       +1  1521         subb    a,ltemp+0
0601 FA         +1  1522         mov r2,a
0602 D3         +1  1523         setb    c       ;now set bit for quotient
0603            +1  1524     dosh:
0603 E50F       +1  1525         mov a,xtemp+3
0605 33         +1  1526         rlc a
0606 F50F       +1  1527         mov xtemp+3,a
0608 E50E       +1  1528         mov a,xtemp+2
060A 33         +1  1529         rlc a
060B F50E       +1  1530         mov xtemp+2,a
060D E50D       +1  1531         mov a,xtemp+1
060F 33         +1  1532         rlc a
0610 F50D       +1  1533         mov xtemp+1,a
0612 E50C       +1  1534         mov a,xtemp+0
0614 33         +1  1535         rlc a
0615 F50C       +1  1536         mov xtemp+0,a
0617 E508       +1  1537         mov a,ltemp+0       ;shift divisor down
0619 C3         +1  1538         clr c
061A 13         +1  1539         rrc a
061B F508       +1  1540         mov ltemp+0,a
061D E509       +1  1541         mov a,ltemp+1
061F 13         +1  1542         rrc a
0620 F509       +1  1543         mov ltemp+1,a
0622 E50A       +1  1544         mov a,ltemp+2
0624 13         +1  1545         rrc a
0625 F50A       +1  1546         mov ltemp+2,a
0627 E50B       +1  1547         mov a,ltemp+3
0629 13         +1  1548         rrc a
062A F50B       +1  1549         mov ltemp+3,a
                +1  1550     
062C D8A3       +1  1551         djnz    r0,yes      ;and continue with the rest
                +1  1552     
062E            +1  1553     finis:
062E 8D0B       +1  1554         mov ltemp+3,r5
0630 8C0A       +1  1555         mov ltemp+2,r4
0632 8B09       +1  1556         mov ltemp+1,r3
0634 8A08       +1  1557         mov ltemp+0,r2
0636 AD0F       +1  1558         mov r5,xtemp+3
0638 AC0E       +1  1559         mov r4,xtemp+2
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    25

063A AB0D       +1  1560         mov r3,xtemp+1
063C AA0C       +1  1561         mov r2,xtemp+0
063E 22         +1  1562         ret         ;and return with the satisfaction of a job well done
                +1  1563     
                +1  1564     
                +1  1565     ;   Long multiplication
                +1  1566     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  1567     ;   other in ltemp. It really doesn't matter which one is where.
                +1  1568     
                +1  1569     ;**********************************
                +1  1570     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  1571     ;ст  мл
                +1  1572     ;**********************************
063F            +1  1573     llmul:
063F            +1  1574     almul:
063F            +1  1575     lmul:
063F ED         +1  1576         mov a,r5        ;low order byte
0640 850BF0     +1  1577         mov b,ltemp+3       ;times low order byte
0643 A4         +1  1578         mul ab
0644 F50F       +1  1579         mov xtemp+3,a       ;store low
0646 85F00E     +1  1580         mov xtemp+2,b   ;and high
0649 ED         +1  1581         mov a,r5        ;low order
064A 850AF0     +1  1582         mov b,ltemp+2   ;times next
064D A4         +1  1583         mul ab
064E 250E       +1  1584         add a,xtemp+2   ;add in
0650 F50E       +1  1585         mov xtemp+2,a
0652 E5F0       +1  1586         mov a,b
0654 3400       +1  1587         addc    a,#0
0656 F50D       +1  1588         mov xtemp+1,a
0658 ED         +1  1589         mov a,r5
0659 8509F0     +1  1590         mov b,ltemp+1
065C A4         +1  1591         mul ab
065D 250D       +1  1592         add a,xtemp+1
065F F50D       +1  1593         mov xtemp+1,a
0661 E5F0       +1  1594         mov a,b
0663 3400       +1  1595         addc    a,#0
0665 F50C       +1  1596         mov xtemp+0,a
0667 ED         +1  1597         mov a,r5
0668 8508F0     +1  1598         mov b,ltemp+0
066B A4         +1  1599         mul ab
066C 250C       +1  1600         add a,xtemp+0
066E F50C       +1  1601         mov xtemp+0,a
0670 EC         +1  1602         mov a,r4
0671 850BF0     +1  1603         mov b,ltemp+3
0674 A4         +1  1604         mul ab
0675 250E       +1  1605         add a,xtemp+2
0677 F50E       +1  1606         mov xtemp+2,a
0679 E5F0       +1  1607         mov a,b
067B 350D       +1  1608         addc    a,xtemp+1
067D F50D       +1  1609         mov xtemp+1,a
067F E50C       +1  1610         mov a,xtemp+0
0681 3400       +1  1611         addc    a,#0
0683 F50C       +1  1612         mov xtemp+0,a
0685 EC         +1  1613         mov a,r4
0686 850AF0     +1  1614         mov b,ltemp+2
0689 A4         +1  1615         mul ab
068A 250D       +1  1616         add a,xtemp+1
068C F50D       +1  1617         mov xtemp+1,a
068E E5F0       +1  1618         mov a,b
0690 350C       +1  1619         addc    a,xtemp+0
0692 F50C       +1  1620         mov xtemp+0,a
0694 EC         +1  1621         mov a,r4
0695 8509F0     +1  1622         mov b,ltemp+1
0698 A4         +1  1623         mul ab
0699 250C       +1  1624         add a,xtemp+0
069B F50C       +1  1625         mov xtemp+0,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    26

                +1  1626     
069D EB         +1  1627         mov a,r3
069E 850BF0     +1  1628         mov b,ltemp+3
06A1 A4         +1  1629         mul ab
06A2 250D       +1  1630         add a,xtemp+1
06A4 F50D       +1  1631         mov xtemp+1,a
06A6 E5F0       +1  1632         mov a,b
06A8 350C       +1  1633         addc    a,xtemp+0
06AA F50C       +1  1634         mov xtemp+0,a
06AC EB         +1  1635         mov a,r3
06AD 850AF0     +1  1636         mov b,ltemp+2
06B0 A4         +1  1637         mul ab
06B1 250C       +1  1638         add a,xtemp+0
06B3 F50C       +1  1639         mov xtemp+0,a
                +1  1640     
06B5 EA         +1  1641         mov a,r2
06B6 850BF0     +1  1642         mov b,ltemp+3
06B9 A4         +1  1643         mul ab
06BA 250C       +1  1644         add a,xtemp+0
06BC FA         +1  1645         mov r2,a
06BD AB0D       +1  1646         mov r3,xtemp+1
06BF AC0E       +1  1647         mov r4,xtemp+2
06C1 AD0F       +1  1648         mov r5,xtemp+3
                +1  1649     
06C3 22         +1  1650         ret         ;all done
                +1  1651     ;******************************
                +1  1652     ;из содержимого  r2-r5  вычесть
                +1  1653     ;содержимое          ltemp..ltemp+3
                +1  1654     ;******************************
06C4            +1  1655     llsub:
06C4            +1  1656      lsub:
06C4 ED         +1  1657         mov a,r5
06C5 C3         +1  1658         clr c
06C6 950B       +1  1659         subb    a,11
06C8 FD         +1  1660         mov r5,a
06C9 EC         +1  1661         mov a,r4
06CA 950A       +1  1662         subb    a,10
06CC FC         +1  1663         mov r4,a
06CD EB         +1  1664         mov a,r3
06CE 9509       +1  1665         subb    a,9
06D0 FB         +1  1666         mov r3,a
06D1 EA         +1  1667         mov a,r2
06D2 9508       +1  1668         subb    a,8
06D4 FA         +1  1669         mov r2,a
06D5 22         +1  1670         ret
                +1  1671     
                +1  1672     ;***********************************************
                +1  1673     ;                                                      ст мл
                +1  1674     ; cложение содержимого  r2..r5 с числом по адресу
                +1  1675     ;  r0- адрес младшего байта !!!
                +1  1676     ;результат- r2..r5
                +1  1677     ;***********************************************
                +1  1678     
06D6 C3         +1  1679     ladd:    clr       c
06D7 ED         +1  1680          mov       a,r5
06D8 26         +1  1681          add       a,@r0
06D9 FD         +1  1682          mov       r5,a
06DA 18         +1  1683          dec       r0
06DB EC         +1  1684          mov       a,r4
06DC 36         +1  1685          addc      a,@r0
06DD FC         +1  1686          mov       r4,a
06DE 18         +1  1687          dec       r0
06DF EB         +1  1688          mov       a,r3
06E0 36         +1  1689          addc      a,@r0
06E1 FB         +1  1690          mov       r3,a
06E2 18         +1  1691          dec       r0
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    27

06E3 EA         +1  1692          mov       a,r2
06E4 36         +1  1693          addc      a,@r0
06E5 FA         +1  1694          mov       r2,a
06E6 22         +1  1695          ret
                +1  1696     ;***********************************************
                +1  1697     ;                                                      ст мл
                +1  1698     ; cложение содержимого  r2..r5 с числом по адресу
                +1  1699     ;  r0- адрес младшего байта !!!
                +1  1700     ;результат- r2..r5
                +1  1701     ;***********************************************
                +1  1702     
06E7 C3         +1  1703     laddx:    clr       c
06E8 E2         +1  1704                                             movx            a,@r0
06E9 2D         +1  1705                                             add                     a,r5
06EA FD         +1  1706               mov     r5,a
06EB 18         +1  1707                             dec     r0
06EC E2         +1  1708                             movx    a,@r0
06ED 3C         +1  1709                             addc    a,r4
06EE FC         +1  1710                             mov     r4,a
06EF 18         +1  1711                             dec     r0
06F0 E2         +1  1712                             movx    a,@r0
06F1 3B         +1  1713                             addc    a,r3
06F2 FB         +1  1714                             mov     r3,a
06F3 18         +1  1715                             dec     r0
06F4 E2         +1  1716                             movx    a,@r0
06F5 3A         +1  1717                             addc    a,r2
06F6 FA         +1  1718                             mov       r2,a
06F7 22         +1  1719                             ret
                +1  1720     
                +1  1721     ;***********************************************
                +1  1722     ;                                                      ст мл
                +1  1723     ; cложение содержимого  r2..r5 с числом по адресу
                +1  1724     ;  dptr- адрес младшего байта !!!
                +1  1725     ;результат- r2..r5
                +1  1726     ;***********************************************
                +1  1727     
06F8 C3         +1  1728     addx:    clr       c
06F9 E0         +1  1729                                             movx            a,@dptr
06FA 2D         +1  1730                                             add                     a,r5
06FB FD         +1  1731               mov     r5,a
06FC 120000   F +1  1732                             call            dedptr;dec     dptr
06FF E0         +1  1733                             movx    a,@dptr
0700 3C         +1  1734                             addc    a,r4
0701 FC         +1  1735                             mov     r4,a
0702 120000   F +1  1736                             call            dedptr;dec     dptr
0705 E0         +1  1737                             movx    a,@dptr
0706 3B         +1  1738                             addc    a,r3
0707 FB         +1  1739                             mov     r3,a
0708 120000   F +1  1740                             call            dedptr;dec     dptr
070B E0         +1  1741                             movx    a,@dptr
070C 3A         +1  1742                             addc    a,r2
070D FA         +1  1743                             mov       r2,a
070E 22         +1  1744                             ret
                +1  1745     
070F C0D0       +1  1746     dedptr:         push    psw
0711 C3         +1  1747                                             clr             c
0712 E582       +1  1748                                             mov             a,dpl
0714 9401       +1  1749                                             subb    a,#1
0716 F582       +1  1750                                             mov             dpl,a
0718 E583       +1  1751                                             mov             a,dph
071A 9400       +1  1752                                             subb    a,#0
071C F583       +1  1753                                             mov             dph,a
071E D0D0       +1  1754                                             pop             psw
0720 22         +1  1755                                             ret
                    1756     
                    1757     ;$include (d:\amp\floatm.asm)
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    28

                +1  1758     ;       Copyright (C) 1988 HI-TECH Software
                +1  1759     
                +1  1760     ;       Single Precision Floating point arithmetic routines for 8051
                +1  1761     
                +1  1762     ;       The format of floating point numbers is as follows:
                +1  1763     
                +1  1764     ;       -----------------
                +1  1765     ;       *     sign      *  1 bit
                +1  1766     ;       -----------------
                +1  1767     ;       *   exponent    *  8 bits
                +1  1768     ;       -----------------
                +1  1769     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  1770     ;       -----------------
                +1  1771     
                +1  1772     
                +1  1773     ;       As usual for the 8051 the memory layout has the most significant
                +1  1774     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  1775     ;       lowest address.
                +1  1776     
                +1  1777     ;       Calling conventions:
                +1  1778     
                +1  1779     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  1780     ;
                +1  1781     ;       Return value is in r2-r5
                +1  1782     
                +1  1783     ;       Naming conventions: A routine name is constructed by
                +1  1784     
                +1  1785     ;             ASOP
                +1  1786     
                +1  1787     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  1788     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  1789     ;       Conversion routines are named
                +1  1790     
                +1  1791     ;               AStof
                +1  1792     
                +1  1793     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  1794     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  1795     ;       Conversion from float to integer is ftol.
                +1  1796     
                +1  1797     ;               .ORG  5000h
                +1  1798     ;               .CODE
                +1  1799     ;       seg     c_text
                +1  1800     
                +1  1801     ;;      $MOD812
----            +1  1802             CSEG
                +1  1803             ;ORG 1000h
                +1  1804     
                +1  1805                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  1806             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  1807     
                +1  1808     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  1809     ;       macros
                +1  1810     
                +1  1811     saveregs        macro
                +1  1812             push    7
                +1  1813             push    6
                +1  1814             push    1
                +1  1815             push    0
                +1  1816             endm
                +1  1817     
                +1  1818     restregs        macro
                +1  1819             pop     0
                +1  1820             pop     1
                +1  1821             pop     6
                +1  1822             pop     7
                +1  1823             endm
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    29

                +1  1824     
                +1  1825     ;addr   
                +1  1826     dan     macro   pad
                +1  1827             mov     a,r5
                +1  1828             add     a,pad+3
                +1  1829             mov     pad+3,a
                +1  1830             mov     a,pad+2
                +1  1831             addc    a,r4
                +1  1832             mov     pad+2,a
                +1  1833             mov     a,pad+1
                +1  1834             addc    a,r3
                +1  1835             mov     pad+1,a
                +1  1836             mov     a,pad+0
                +1  1837             addc    a,r2
                +1  1838             mov     pad,a
                +1  1839             endm
                +1  1840     
                +1  1841     addl    macro  addr
                +1  1842             mov     a,r5
                +1  1843             add     a,addr+3
                +1  1844             mov     r5,a
                +1  1845             mov     a,addr+2
                +1  1846             addc    a,r4
                +1  1847             mov     r4,a
                +1  1848             mov     a,addr+1
                +1  1849             addc    a,r3
                +1  1850             mov     r3,a
                +1  1851             mov     a,addr+0
                +1  1852             addc    a,r2
                +1  1853             mov     r2,a
                +1  1854             endm
                +1  1855     
                +1  1856     
                +1  1857     add1    macro
                +1  1858             mov     a,r5
                +1  1859             add     a,#1
                +1  1860             mov     r5,a
                +1  1861             clr     a
                +1  1862             addc    a,r4
                +1  1863             mov     r4,a
                +1  1864             clr     a
                +1  1865             addc    a,r3
                +1  1866             mov     r3,a
                +1  1867             clr     a
                +1  1868             addc    a,r2
                +1  1869             mov     r2,a
                +1  1870             endm
                +1  1871     
                +1  1872     shfdn   macro  addr
                +1  1873             clr     c
                +1  1874             mov     a,addr
                +1  1875             rrc     a
                +1  1876             mov     addr,a
                +1  1877             mov     a,addr+1
                +1  1878             rrc     a
                +1  1879             mov     addr+1,a
                +1  1880             mov     a,addr+2
                +1  1881             rrc     a
                +1  1882             mov     addr+2,a
                +1  1883             mov     a,addr+3
                +1  1884             rrc     a
                +1  1885             mov     addr+3,a
                +1  1886             endm
                +1  1887     
                +1  1888     shfup   macro  addr
                +1  1889             clr     c
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    30

                +1  1890             mov     a,addr+3
                +1  1891             rlc     a
                +1  1892             mov     addr+3,a
                +1  1893             mov     a,addr+2
                +1  1894             rlc     a
                +1  1895             mov     addr+2,a
                +1  1896             mov     a,addr+1
                +1  1897             rlc     a
                +1  1898             mov     addr+1,a
                +1  1899             mov     a,addr
                +1  1900             rlc     a
                +1  1901             mov     addr,a
                +1  1902             endm
                +1  1903     
                +1  1904     rshift  macro
                +1  1905             clr     c
                +1  1906             mov     a,r2
                +1  1907             rrc     a
                +1  1908             mov     r2,a
                +1  1909             mov     a,r3
                +1  1910             rrc     a
                +1  1911             mov     r3,a
                +1  1912             mov     a,r4
                +1  1913             rrc     a
                +1  1914             mov     r4,a
                +1  1915             mov     a,r5
                +1  1916             rrc     a
                +1  1917             mov     r5,a
                +1  1918             endm
                +1  1919     rshift1 macro
                +1  1920             setb    c
                +1  1921             mov     a,r2
                +1  1922             rrc     a
                +1  1923             mov     r2,a
                +1  1924             mov     a,r3
                +1  1925             rrc     a
                +1  1926             mov     r3,a
                +1  1927             mov     a,r4
                +1  1928             rrc     a
                +1  1929             mov     r4,a
                +1  1930             mov     a,r5
                +1  1931             rrc     a
                +1  1932             mov     r5,a
                +1  1933             endm
                +1  1934     
                +1  1935     
                +1  1936     lshift  macro
                +1  1937             mov     a,r5
                +1  1938             rlc     a
                +1  1939             mov     r5,a
                +1  1940             mov     a,r4
                +1  1941             rlc     a
                +1  1942             mov     r4,a
                +1  1943             mov     a,r3
                +1  1944             rlc     a
                +1  1945             mov     r3,a
                +1  1946             mov     a,r2
                +1  1947             rlc     a
                +1  1948             mov     r2,a
                +1  1949             endm
                +1  1950     
                +1  1951     neg1    macro
                +1  1952             clr     c
                +1  1953             clr     a
                +1  1954             subb    a,r5
                +1  1955             mov     r5,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    31

                +1  1956             clr     a
                +1  1957             subb    a,r4
                +1  1958             mov     r4,a
                +1  1959             clr     a
                +1  1960             subb    a,r3
                +1  1961             mov     r3,a
                +1  1962             clr     a
                +1  1963             subb    a,r2
                +1  1964             mov     r2,a
                +1  1965             endm
                +1  1966     
                +1  1967     negm    macro  addr
                +1  1968             clr     c
                +1  1969             clr     a
                +1  1970             subb    a,addr+3
                +1  1971             mov     addr+3,a
                +1  1972             clr     a
                +1  1973             subb    a,addr+2
                +1  1974             mov     addr+2,a
                +1  1975             clr     a
                +1  1976             subb    a,addr+1
                +1  1977             mov     addr+1,a
                +1  1978             clr     a
                +1  1979             subb    a,addr
                +1  1980             mov     addr,a
                +1  1981             endm
                +1  1982     
                +1  1983     copytor macro  addr
                +1  1984             mov     r2,addr
                +1  1985             mov     r3,addr+1
                +1  1986             mov     r4,addr+2
                +1  1987             mov     r5,addr+3
                +1  1988             endm
                +1  1989     
                +1  1990     
                +1  1991     copyrto macro  addr
                +1  1992             mov     addr,r2
                +1  1993             mov     addr+1,r3
                +1  1994             mov     addr+2,r4
                +1  1995             mov     addr+3,r5
                +1  1996             endm
                +1  1997     
                +1  1998     
                +1  1999     ;       Internal representation: in this set of routines a floating number
                +1  2000     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  2001     
                +1  2002     ;       Stack offset values
                +1  2003     ;ltemp   equ     28h
                +1  2004     
  0006          +1  2005     cntr    equ     6               ;r6 is the counter
  0007          +1  2006     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  2007     exp1    equ     0               ;exponent 1 in r0
  0002          +1  2008     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  2009     exp2    equ     1               ;exponent 1 in r1
  0008          +1  2010     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  2011     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  2012     
                +1  2013     
                +1  2014     
                +1  2015     
                +1  2016     
                +1  2017     ;DECSIZE EQU     10
                +1  2018     ;NUMSIZE EQU     4
                +1  2019     ;RR4     EQU     4
                +1  2020     ;RR5     EQU     5
                +1  2021     
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    32

                +1  2022     ;       unpack1 - unpacks the left operand
                +1  2023     
009C            +1  2024     unpack1:
009C EA         +1  2025             mov     a,r2            ;get sign
009D 5480       +1  2026             anl     a,#80h
009F 530740     +1  2027             anl     sign,#40h       ;clear other bits
00A2 4207       +1  2028             orl     sign,a          ;store sign
00A4 EB         +1  2029             mov     a,r3            ;get lsb of exponent
00A5 33         +1  2030             rlc     a               ;rotate into carry
00A6 EA         +1  2031             mov     a,r2            ;get rest of exponent
00A7 33         +1  2032             rlc     a               ;and make it 8 bits
00A8 F8         +1  2033             mov     r0,a            ;store it
00A9 6006       +1  2034             jz      zer1            ;if zero, the whole thing is zero
00AB 430380     +1  2035             orl     mant1+1,#80h    ;set hidden bit
00AE 7A00       +1  2036             mov     r2,#0           ;clear upper byte of mantissa
00B0 22         +1  2037             ret
00B1            +1  2038     zer1:
00B1 E4         +1  2039             clr     a
00B2 FA         +1  2040             mov     r2,a
00B3 FB         +1  2041             mov     r3,a
00B4 FC         +1  2042             mov     r4,a
00B5 FD         +1  2043             mov     r5,a            ;zero mantissa
00B6 F8         +1  2044             mov     r0,a            ;zero exponent
00B7 22         +1  2045             ret
                +1  2046     
                +1  2047     ;       unpack2 - unpacks right operand
                +1  2048     
00B8            +1  2049     unpack2:
00B8 E508       +1  2050             mov     a,ltemp         ;get sign
00BA 13         +1  2051             rrc     a               ;shift down
00BB 5440       +1  2052             anl     a,#40h          ;mask out sign
00BD 530780     +1  2053             anl     sign,#80h       ;clear old bit
00C0 4207       +1  2054             orl     sign,a
00C2 E509       +1  2055             mov     a,ltemp+1       ;get lsb of exponent
00C4 33         +1  2056             rlc     a               ;rotate into carry
00C5 E508       +1  2057             mov     a,ltemp         ;get rest of exponent
00C7 33         +1  2058             rlc     a               ;and make it 8 bits
00C8 F9         +1  2059             mov     r1,a            ;store it
00C9 6007       +1  2060             jz      zer2            ;if zero, the whole thing is zero
00CB 430980     +1  2061             orl     mant2+1,#80h    ;set hidden bit
00CE 750800     +1  2062             mov     mant2,#0        ;clear upper byte
00D1 22         +1  2063             ret
00D2            +1  2064     zer2:
00D2 E4         +1  2065             clr     a
00D3 F508       +1  2066             mov     ltemp,a
00D5 F509       +1  2067             mov     ltemp+1,a
00D7 F50A       +1  2068             mov     ltemp+2,a
00D9 F50B       +1  2069             mov     ltemp+3,a               ;zero mantissa
00DB 22         +1  2070             ret
                +1  2071     
                +1  2072     ;       pack1 - put operand 1 back into float format
                +1  2073     
00DC            +1  2074     pack1:
00DC E8         +1  2075             mov     a,r0            ;get exponent
00DD C3         +1  2076             clr     c
00DE 13         +1  2077             rrc     a               ;shift down 1 bit
00DF 530780     +1  2078             anl     sign,#80h       ;mask sign bit
00E2 4F         +1  2079             orl     a,r7            ;or in sign bit
00E3 FA         +1  2080             mov     r2,a            ;store
00E4 E8         +1  2081             mov     a,r0            ;get other bit
00E5 03         +1  2082             rr      a               ;rotate into hi bit
00E6 5480       +1  2083             anl     a,#80h          ;mask
00E8 53037F     +1  2084             anl     mant1+1,#7Fh    ;clear hidden bit
00EB 4203       +1  2085             orl     mant1+1,a       ;put in
00ED 22         +1  2086             ret
                +1  2087     
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    33

                +1  2088     
                +1  2089     ;       norm1 - normalize the unpacked value in 1
                +1  2090     
00EE            +1  2091     norm1:
00EE E8         +1  2092             mov     a,r0            ;get exponent
00EF 60C0       +1  2093             jz      zer1            ;zero the mantissa if so
00F1 EA         +1  2094             mov     a,r2            ;get hi byte
00F2 6023       +1  2095             jz      norup           ;zero, so shift up if anything
00F4            +1  2096     nordn:
00F4 EA         +1  2097             mov     a,r2            ;get hi byte
00F5 B4010D     +1  2098             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  2099+3           add1                    ;add in a rounding bit
00F8 ED         +1  2100+1           mov     a,r5
00F9 2401       +1  2101+1           add     a,#1
00FB FD         +1  2102+1           mov     r5,a
00FC E4         +1  2103+1           clr     a
00FD 3C         +1  2104+1           addc    a,r4
00FE FC         +1  2105+1           mov     r4,a
00FF E4         +1  2106+1           clr     a
0100 3B         +1  2107+1           addc    a,r3
0101 FB         +1  2108+1           mov     r3,a
0102 E4         +1  2109+1           clr     a
0103 3A         +1  2110+1           addc    a,r2
0104 FA         +1  2111+1           mov     r2,a
0105            +1  2112     nordn1:
                +1  2113+3           rshift                  ;shift down 1 bit
0105 C3         +1  2114+1           clr     c
0106 EA         +1  2115+1           mov     a,r2
0107 13         +1  2116+1           rrc     a
0108 FA         +1  2117+1           mov     r2,a
0109 EB         +1  2118+1           mov     a,r3
010A 13         +1  2119+1           rrc     a
010B FB         +1  2120+1           mov     r3,a
010C EC         +1  2121+1           mov     a,r4
010D 13         +1  2122+1           rrc     a
010E FC         +1  2123+1           mov     r4,a
010F ED         +1  2124+1           mov     a,r5
0110 13         +1  2125+1           rrc     a
0111 FD         +1  2126+1           mov     r5,a
0112 08         +1  2127             inc     r0              ;adjust exponent
0113 EA         +1  2128             mov     a,r2            ;test high byte
0114 70DE       +1  2129             jnz     nordn           ;loop
0116 22         +1  2130             ret                     ;done
                +1  2131     
0117            +1  2132     norup:
0117 4B         +1  2133             orl     a,r3
0118 4C         +1  2134             orl     a,r4
0119 4D         +1  2135             orl     a,r5            ;test for zero mantissa
011A 6095       +1  2136             jz      zer1            ;it is - make it true zero
011C            +1  2137     norup1:
011C EB         +1  2138             mov     a,r3            ;get mantissa byte
011D 20E710     +1  2139             jb      acc.7,norup2    ;jump if set
0120 C3         +1  2140             clr     c
                +1  2141+3           lshift                  ;shift mantissa up
0121 ED         +1  2142+1           mov     a,r5
0122 33         +1  2143+1           rlc     a
0123 FD         +1  2144+1           mov     r5,a
0124 EC         +1  2145+1           mov     a,r4
0125 33         +1  2146+1           rlc     a
0126 FC         +1  2147+1           mov     r4,a
0127 EB         +1  2148+1           mov     a,r3
0128 33         +1  2149+1           rlc     a
0129 FB         +1  2150+1           mov     r3,a
012A EA         +1  2151+1           mov     a,r2
012B 33         +1  2152+1           rlc     a
012C FA         +1  2153+1           mov     r2,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    34

012D 18         +1  2154             dec     r0              ;adjust exponent
012E 80EC       +1  2155             jmp     norup1
0130            +1  2156     norup2:
0130 22         +1  2157             ret                     ;finito
                +1  2158     
                +1  2159     
                +1  2160     ;       fpdenorm - denormalize one of the two operands so that their
                +1  2161     ;       exponents are equal. This requires the smaller number to have
                +1  2162     ;       its exponent incremented and its mantissa shifted right.
                +1  2163     
0131            +1  2164     denorm:
0131 E8         +1  2165             mov     a,r0
0132 C3         +1  2166             clr     c
0133 99         +1  2167             subb    a,r1            ;compare exponents
0134 5029       +1  2168             jnc     up2a            ;shift operand 2
0136            +1  2169     up1:
0136 08         +1  2170             inc     r0              ;increment exponent
                +1  2171+3           rshift                  ;shift mantissa down
0137 C3         +1  2172+1           clr     c
0138 EA         +1  2173+1           mov     a,r2
0139 13         +1  2174+1           rrc     a
013A FA         +1  2175+1           mov     r2,a
013B EB         +1  2176+1           mov     a,r3
013C 13         +1  2177+1           rrc     a
013D FB         +1  2178+1           mov     r3,a
013E EC         +1  2179+1           mov     a,r4
013F 13         +1  2180+1           rrc     a
0140 FC         +1  2181+1           mov     r4,a
0141 ED         +1  2182+1           mov     a,r5
0142 13         +1  2183+1           rrc     a
0143 FD         +1  2184+1           mov     r5,a
0144 E8         +1  2185             mov     a,r0
0145 B501EE     +1  2186             cjne    a,exp2,up1      ;loop if still not equal
0148 22         +1  2187             ret
                +1  2188     
0149            +1  2189     up2:
0149 09         +1  2190             inc     r1              ;increment exponent 2
                +1  2191+3           shfdn   mant2           ;shift mantissa down
014A C3         +1  2192+1           clr     c
014B E508       +1  2193+1           mov     a,mant2
014D 13         +1  2194+1           rrc     a
014E F508       +1  2195+1           mov     mant2,a
0150 E509       +1  2196+1           mov     a,mant2+1
0152 13         +1  2197+1           rrc     a
0153 F509       +1  2198+1           mov     mant2+1,a
0155 E50A       +1  2199+1           mov     a,mant2+2
0157 13         +1  2200+1           rrc     a
0158 F50A       +1  2201+1           mov     mant2+2,a
015A E50B       +1  2202+1           mov     a,mant2+3
015C 13         +1  2203+1           rrc     a
015D F50B       +1  2204+1           mov     mant2+3,a
015F            +1  2205     up2a:
015F E8         +1  2206             mov     a,r0            ;compare exponents
0160 B501E6     +1  2207             cjne    a,exp2,up2
0163 22         +1  2208             ret                     ;all done
                +1  2209     ;------------------------------------------------------------------
                +1  2210     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  2211     
0164            +1  2212     fladd:
                +1  2213+3           saveregs
0164 C007       +1  2214+1           push    7
0166 C006       +1  2215+1           push    6
0168 C001       +1  2216+1           push    1
016A C000       +1  2217+1           push    0
016C 119C       +1  2218             call    unpack1
016E 11B8       +1  2219             call    unpack2
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    35

0170 3131       +1  2220             call    denorm
0172 E507       +1  2221             mov     a,sign
0174 30E70D     +1  2222             jnb     acc.7,ok1       ;test left sign
                +1  2223+3           neg1                    ;negate op1
0177 C3         +1  2224+1           clr     c
0178 E4         +1  2225+1           clr     a
0179 9D         +1  2226+1           subb    a,r5
017A FD         +1  2227+1           mov     r5,a
017B E4         +1  2228+1           clr     a
017C 9C         +1  2229+1           subb    a,r4
017D FC         +1  2230+1           mov     r4,a
017E E4         +1  2231+1           clr     a
017F 9B         +1  2232+1           subb    a,r3
0180 FB         +1  2233+1           mov     r3,a
0181 E4         +1  2234+1           clr     a
0182 9A         +1  2235+1           subb    a,r2
0183 FA         +1  2236+1           mov     r2,a
0184            +1  2237     ok1:
0184 E507       +1  2238             mov     a,sign
0186 30E615     +1  2239             jnb     acc.6,ok2       ;test right sign
                +1  2240+3           negm    mant2           ;negate op2
0189 C3         +1  2241+1           clr     c
018A E4         +1  2242+1           clr     a
018B 950B       +1  2243+1           subb    a,mant2+3
018D F50B       +1  2244+1           mov     mant2+3,a
018F E4         +1  2245+1           clr     a
0190 950A       +1  2246+1           subb    a,mant2+2
0192 F50A       +1  2247+1           mov     mant2+2,a
0194 E4         +1  2248+1           clr     a
0195 9509       +1  2249+1           subb    a,mant2+1
0197 F509       +1  2250+1           mov     mant2+1,a
0199 E4         +1  2251+1           clr     a
019A 9508       +1  2252+1           subb    a,mant2
019C F508       +1  2253+1           mov     mant2,a
019E            +1  2254     ok2:
                +1  2255+3           addl    mant2           ;add mantissas
019E ED         +1  2256+1           mov     a,r5
019F 250B       +1  2257+1           add     a,mant2+3
01A1 FD         +1  2258+1           mov     r5,a
01A2 E50A       +1  2259+1           mov     a,mant2+2
01A4 3C         +1  2260+1           addc    a,r4
01A5 FC         +1  2261+1           mov     r4,a
01A6 E509       +1  2262+1           mov     a,mant2+1
01A8 3B         +1  2263+1           addc    a,r3
01A9 FB         +1  2264+1           mov     r3,a
01AA E508       +1  2265+1           mov     a,mant2+0
01AC 3A         +1  2266+1           addc    a,r2
01AD FA         +1  2267+1           mov     r2,a
01AE E4         +1  2268             clr     a
01AF FF         +1  2269             mov     r7,a            ;clear sign
01B0 EA         +1  2270             mov     a,r2            ;get sign of result
01B1 30E70E     +1  2271             jnb     acc.7,ok3       ;all ok
01B4 FF         +1  2272             mov     r7,a            ;store sign
                +1  2273+3           neg1                    ;negate mantissa
01B5 C3         +1  2274+1           clr     c
01B6 E4         +1  2275+1           clr     a
01B7 9D         +1  2276+1           subb    a,r5
01B8 FD         +1  2277+1           mov     r5,a
01B9 E4         +1  2278+1           clr     a
01BA 9C         +1  2279+1           subb    a,r4
01BB FC         +1  2280+1           mov     r4,a
01BC E4         +1  2281+1           clr     a
01BD 9B         +1  2282+1           subb    a,r3
01BE FB         +1  2283+1           mov     r3,a
01BF E4         +1  2284+1           clr     a
01C0 9A         +1  2285+1           subb    a,r2
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    36

01C1 FA         +1  2286+1           mov     r2,a
01C2            +1  2287     ok3:
01C2 11EE       +1  2288             call    norm1
01C4 11DC       +1  2289             call    pack1           ;pack normalized result
                +1  2290+3           restregs                ;and return
01C6 D000       +1  2291+1           pop     0
01C8 D001       +1  2292+1           pop     1
01CA D006       +1  2293+1           pop     6
01CC D007       +1  2294+1           pop     7
01CE 22         +1  2295             ret
                +1  2296     ;-------------------------------------------------------------
                +1  2297     ;       Subtract the number ltemp from the number in r2-r5
                +1  2298     
01CF            +1  2299     flsub:
01CF 630880     +1  2300             xrl     ltemp,#80h      ;toggle sign bit
01D2 8090       +1  2301             jmp     fladd           ;and add!
                +1  2302     
                +1  2303     ;================================================================
                +1  2304     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  2305     
01D4            +1  2306     flcmp:
01D4 EA         +1  2307            mov     a,r2            ;get sign of left
01D5 6508       +1  2308            xrl     a,ltemp         ;calculate new sign
01D7 30E706     +1  2309            jnb     acc.7,cexp      ;same, go check exponent
                +1  2310     ;ifdef SMALL_MODEL
01DA EA         +1  2311             mov     a,r2            ;get sign of left again
01DB 33         +1  2312             rlc     a
01DC 5001       +1  2313             jnc     flout
                +1  2314     ;endif
01DE D3         +1  2315             setb    c
01DF 22         +1  2316     flout:          ret                    ;return with acc < 0
                +1  2317     
01E0            +1  2318     cexp:
01E0 C3         +1  2319            clr     c
01E1 EA         +1  2320            mov     a,r2            ;compare exponent and mantissa
01E2 9508       +1  2321            subb    a,ltemp
01E4 7010       +1  2322            jnz     fnd
01E6 EB         +1  2323            mov     a,r3
01E7 9509       +1  2324            subb    a,ltemp+1
01E9 700B       +1  2325            jnz     fnd
01EB EC         +1  2326            mov     a,r4
01EC 950A       +1  2327            subb    a,ltemp+2
01EE 7006       +1  2328            jnz     fnd
01F0 ED         +1  2329            mov     a,r5
01F1 950B       +1  2330            subb    a,ltemp+3
01F3 7001       +1  2331            jnz     fnd
01F5            +1  2332     cdone:
01F5 22         +1  2333            ret                     ;return with acc == 0
01F6            +1  2334     fnd:
01F6 8AF0       +1  2335           mov     b,r2             ;get sign of left value
01F8 30F7FA     +1  2336          jnb     b.7,cdone       ;if positive, finished
01FB B2E7       +1  2337            cpl   acc.7             ;toggle sign???????/
01FD 4401       +1  2338                         orl         a,#1                          ;make non-zero
01FF B3         +1  2339             cpl     c               ;c=0->1,c=1->0
0200 22         +1  2340             ret
                +1  2341     ;==============================================================
                +1  2342     
                +1  2343     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  2344     ;       the result in r2-r5
                +1  2345     
0201            +1  2346     flmul:
                +1  2347+3           saveregs
0201 C007       +1  2348+1           push    7
0203 C006       +1  2349+1           push    6
0205 C001       +1  2350+1           push    1
0207 C000       +1  2351+1           push    0
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    37

0209 119C       +1  2352             call    unpack1
020B 11B8       +1  2353             call    unpack2
020D E4         +1  2354             clr     a
020E F50C       +1  2355             mov     prod,a
0210 F50D       +1  2356             mov     prod+1,a        ;clear product
0212 F50E       +1  2357             mov     prod+2,a
0214 F50F       +1  2358             mov     prod+3,a
0216 7E07       +1  2359             mov     r6,#7           ;initialize counter
0218            +1  2360     mup1:
                +1  2361+3           shfdn   mant2           ;shift multiplier right
0218 C3         +1  2362+1           clr     c
0219 E508       +1  2363+1           mov     a,mant2
021B 13         +1  2364+1           rrc     a
021C F508       +1  2365+1           mov     mant2,a
021E E509       +1  2366+1           mov     a,mant2+1
0220 13         +1  2367+1           rrc     a
0221 F509       +1  2368+1           mov     mant2+1,a
0223 E50A       +1  2369+1           mov     a,mant2+2
0225 13         +1  2370+1           rrc     a
0226 F50A       +1  2371+1           mov     mant2+2,a
0228 E50B       +1  2372+1           mov     a,mant2+3
022A 13         +1  2373+1           rrc     a
022B F50B       +1  2374+1           mov     mant2+3,a
022D 5014       +1  2375             jnc     nobit           ;skip if lsb was zero
                +1  2376+3           dan     prod            ;add multiplicand to product
022F ED         +1  2377+1           mov     a,r5
0230 250F       +1  2378+1           add     a,prod+3
0232 F50F       +1  2379+1           mov     prod+3,a
0234 E50E       +1  2380+1           mov     a,prod+2
0236 3C         +1  2381+1           addc    a,r4
0237 F50E       +1  2382+1           mov     prod+2,a
0239 E50D       +1  2383+1           mov     a,prod+1
023B 3B         +1  2384+1           addc    a,r3
023C F50D       +1  2385+1           mov     prod+1,a
023E E50C       +1  2386+1           mov     a,prod+0
0240 3A         +1  2387+1           addc    a,r2
0241 F50C       +1  2388+1           mov     prod,a
0243            +1  2389     nobit:
                +1  2390+3           lshift                  ;shift multiplicand up
0243 ED         +1  2391+1           mov     a,r5
0244 33         +1  2392+1           rlc     a
0245 FD         +1  2393+1           mov     r5,a
0246 EC         +1  2394+1           mov     a,r4
0247 33         +1  2395+1           rlc     a
0248 FC         +1  2396+1           mov     r4,a
0249 EB         +1  2397+1           mov     a,r3
024A 33         +1  2398+1           rlc     a
024B FB         +1  2399+1           mov     r3,a
024C EA         +1  2400+1           mov     a,r2
024D 33         +1  2401+1           rlc     a
024E FA         +1  2402+1           mov     r2,a
024F DEC7       +1  2403             djnz    r6,mup1         ;loop if more
                +1  2404     
0251 7E11       +1  2405             mov     r6,#17          ;re-initalize counter
0253 8015       +1  2406             sjmp    mup3
0255            +1  2407     mup11:
                +1  2408+3           shfdn   prod            ;shift product right
0255 C3         +1  2409+1           clr     c
0256 E50C       +1  2410+1           mov     a,prod
0258 13         +1  2411+1           rrc     a
0259 F50C       +1  2412+1           mov     prod,a
025B E50D       +1  2413+1           mov     a,prod+1
025D 13         +1  2414+1           rrc     a
025E F50D       +1  2415+1           mov     prod+1,a
0260 E50E       +1  2416+1           mov     a,prod+2
0262 13         +1  2417+1           rrc     a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    38

0263 F50E       +1  2418+1           mov     prod+2,a
0265 E50F       +1  2419+1           mov     a,prod+3
0267 13         +1  2420+1           rrc     a
0268 F50F       +1  2421+1           mov     prod+3,a
026A            +1  2422     mup3:
                +1  2423+3           shfdn   mant2           ;shift multiplier down
026A C3         +1  2424+1           clr     c
026B E508       +1  2425+1           mov     a,mant2
026D 13         +1  2426+1           rrc     a
026E F508       +1  2427+1           mov     mant2,a
0270 E509       +1  2428+1           mov     a,mant2+1
0272 13         +1  2429+1           rrc     a
0273 F509       +1  2430+1           mov     mant2+1,a
0275 E50A       +1  2431+1           mov     a,mant2+2
0277 13         +1  2432+1           rrc     a
0278 F50A       +1  2433+1           mov     mant2+2,a
027A E50B       +1  2434+1           mov     a,mant2+3
027C 13         +1  2435+1           rrc     a
027D F50B       +1  2436+1           mov     mant2+3,a
027F 5014       +1  2437             jnc     mup2            ;skip if bit not set
                +1  2438+3           dan     prod            ;add to prod
0281 ED         +1  2439+1           mov     a,r5
0282 250F       +1  2440+1           add     a,prod+3
0284 F50F       +1  2441+1           mov     prod+3,a
0286 E50E       +1  2442+1           mov     a,prod+2
0288 3C         +1  2443+1           addc    a,r4
0289 F50E       +1  2444+1           mov     prod+2,a
028B E50D       +1  2445+1           mov     a,prod+1
028D 3B         +1  2446+1           addc    a,r3
028E F50D       +1  2447+1           mov     prod+1,a
0290 E50C       +1  2448+1           mov     a,prod+0
0292 3A         +1  2449+1           addc    a,r2
0293 F50C       +1  2450+1           mov     prod,a
0295            +1  2451     mup2:
0295 DEBE       +1  2452             djnz    r6,mup11        ;loop if more
0297 E8         +1  2453             mov     a,r0            ;get exp1
0298 29         +1  2454             add     a,r1            ;add exp2
0299 247A       +1  2455             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029B F8         +1  2456             mov     r0,a            ;store
029C EF         +1  2457             mov     a,r7            ;get sign
029D 23         +1  2458             rl      a               ;rotate bit into msb
029E 6207       +1  2459             xrl     sign,a          ;xor with other bit
                +1  2460+3           copytor prod            ;copy prod to mant1
02A0 AA0C       +1  2461+1           mov     r2,prod
02A2 AB0D       +1  2462+1           mov     r3,prod+1
02A4 AC0E       +1  2463+1           mov     r4,prod+2
02A6 AD0F       +1  2464+1           mov     r5,prod+3
02A8 11EE       +1  2465             call    norm1           ;normalize
02AA 11DC       +1  2466             call    pack1
                +1  2467+3           restregs
02AC D000       +1  2468+1           pop     0
02AE D001       +1  2469+1           pop     1
02B0 D006       +1  2470+1           pop     6
02B2 D007       +1  2471+1           pop     7
02B4 22         +1  2472             ret
                +1  2473     ;-----------------------------------------------------------
                +1  2474     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  2475     
02B5            +1  2476     fldiv:
                +1  2477+3           saveregs
02B5 C007       +1  2478+1           push    7
02B7 C006       +1  2479+1           push    6
02B9 C001       +1  2480+1           push    1
02BB C000       +1  2481+1           push    0
02BD 119C       +1  2482             call    unpack1
02BF 11B8       +1  2483             call    unpack2
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    39

02C1 E4         +1  2484             clr     a
02C2 F50C       +1  2485             mov     prod,a
02C4 F50D       +1  2486             mov     prod+1,a
02C6 F50E       +1  2487             mov     prod+2,a
02C8 F50F       +1  2488             mov     prod+3,a
02CA E9         +1  2489             mov     a,r1            ;check for zero divisor
02CB 6067       +1  2490             jz      div9
02CD E8         +1  2491             mov     a,r0            ;check for zero dividend
02CE 6064       +1  2492             jz      div9
02D0 C3         +1  2493             clr     c
02D1 99         +1  2494             subb    a,r1            ;compute new exponent
02D2 2478       +1  2495             add     a,#127-7        ;unbias
02D4 F8         +1  2496             mov     r0,a            ;store back
02D5 EF         +1  2497             mov     a,r7            ;get sign
02D6 23         +1  2498             rl      a
02D7 6207       +1  2499             xrl     sign,a          ;compute new sign
02D9 7E1F       +1  2500             mov     r6,#24+7        ;initialize counter
02DB            +1  2501     div1:
                +1  2502+3           shfup   prod            ;shift quotient up
02DB C3         +1  2503+1           clr     c
02DC E50F       +1  2504+1           mov     a,prod+3
02DE 33         +1  2505+1           rlc     a
02DF F50F       +1  2506+1           mov     prod+3,a
02E1 E50E       +1  2507+1           mov     a,prod+2
02E3 33         +1  2508+1           rlc     a
02E4 F50E       +1  2509+1           mov     prod+2,a
02E6 E50D       +1  2510+1           mov     a,prod+1
02E8 33         +1  2511+1           rlc     a
02E9 F50D       +1  2512+1           mov     prod+1,a
02EB E50C       +1  2513+1           mov     a,prod
02ED 33         +1  2514+1           rlc     a
02EE F50C       +1  2515+1           mov     prod,a
02F0 C3         +1  2516             clr     c
02F1 EA         +1  2517             mov     a,r2            ;compare values
02F2 9508       +1  2518             subb    a,mant2
02F4 4028       +1  2519             jc      div2            ;skip if bigger
02F6 7013       +1  2520             jnz     div3
02F8 EB         +1  2521             mov     a,r3            ;compare values
02F9 9509       +1  2522             subb    a,mant2+1
02FB 4021       +1  2523             jc      div2            ;skip if bigger
02FD 700C       +1  2524             jnz     div3
02FF EC         +1  2525             mov     a,r4            ;compare values
0300 950A       +1  2526             subb    a,mant2+2
0302 401A       +1  2527             jc      div2            ;skip if bigger
0304 7005       +1  2528             jnz     div3
0306 ED         +1  2529             mov     a,r5            ;compare values
0307 950B       +1  2530             subb    a,mant2+3
0309 4013       +1  2531             jc      div2            ;skip if bigger
030B            +1  2532     div3:
030B ED         +1  2533             mov     a,r5
030C 950B       +1  2534             subb    a,mant2+3
030E FD         +1  2535             mov     r5,a
030F EC         +1  2536             mov     a,r4
0310 950A       +1  2537             subb    a,mant2+2               ;do subtraction
0312 FC         +1  2538             mov     r4,a
0313 EB         +1  2539             mov     a,r3
0314 9509       +1  2540             subb    a,mant2+1               ;do subtraction
0316 FB         +1  2541             mov     r3,a
0317 EA         +1  2542             mov     a,r2
0318 9508       +1  2543             subb    a,mant2         ;do subtraction
031A FA         +1  2544             mov     r2,a
031B 430F01     +1  2545             orl     prod+3,#1       ;set lsb in quotient
031E            +1  2546     div2:
                +1  2547+3           lshift                  ;shift dividend up
031E ED         +1  2548+1           mov     a,r5
031F 33         +1  2549+1           rlc     a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    40

0320 FD         +1  2550+1           mov     r5,a
0321 EC         +1  2551+1           mov     a,r4
0322 33         +1  2552+1           rlc     a
0323 FC         +1  2553+1           mov     r4,a
0324 EB         +1  2554+1           mov     a,r3
0325 33         +1  2555+1           rlc     a
0326 FB         +1  2556+1           mov     r3,a
0327 EA         +1  2557+1           mov     a,r2
0328 33         +1  2558+1           rlc     a
0329 FA         +1  2559+1           mov     r2,a
032A DEAF       +1  2560             djnz    r6,div1         ;loop if more
                +1  2561+3           copytor prod            ;copy quotient
032C AA0C       +1  2562+1           mov     r2,prod
032E AB0D       +1  2563+1           mov     r3,prod+1
0330 AC0E       +1  2564+1           mov     r4,prod+2
0332 AD0F       +1  2565+1           mov     r5,prod+3
0334            +1  2566     div9:
0334 11EE       +1  2567             call    norm1           ;now normalize result
0336 11DC       +1  2568             call    pack1           ;pack it up
                +1  2569+3           restregs                ;restore registers
0338 D000       +1  2570+1           pop     0
033A D001       +1  2571+1           pop     1
033C D006       +1  2572+1           pop     6
033E D007       +1  2573+1           pop     7
0340 22         +1  2574             ret
                +1  2575     ;------------------------------------------------------------------
                +1  2576     
                +1  2577     ;       Float to long conversion: if the exponent is less than the
                +1  2578     ;       excess value, the result is zero. If the exponent is so large
                +1  2579     ;       that the value would be shifted out, the result is overflow.
                +1  2580     ;       Otherwise shift the mantissa up or down as required.
                +1  2581     
0341            +1  2582     ftol:
                +1  2583+3           saveregs
0341 C007       +1  2584+1           push    7
0343 C006       +1  2585+1           push    6
0345 C001       +1  2586+1           push    1
0347 C000       +1  2587+1           push    0
0349 EA         +1  2588             mov     a,r2
034A B4BF09     +1  2589             cjne    a,#0bfh,ne05
034D EB         +1  2590             mov     a,r3
034E 7006       +1  2591             jnz     ne05
0350 EC         +1  2592             mov     a,r4
0351 7003       +1  2593             jnz     ne05
0353 ED         +1  2594             mov     a,r5
0354 6024       +1  2595             jz      ftol1
0356 119C       +1  2596     ne05:   call    unpack1
0358 E8         +1  2597             mov     a,r0            ;get exponent
0359 2482       +1  2598             add     a,#-(127-1)     ;unbias
035B 20E71C     +1  2599             jb      acc.7,ftol1     ;jump if < 0
035E EF         +1  2600             mov     a,r7            ;get sign
035F 30E70D     +1  2601             jnb     acc.7,ftol4     ;skip if +ve
                +1  2602+3           neg1                    ;negate it
0362 C3         +1  2603+1           clr     c
0363 E4         +1  2604+1           clr     a
0364 9D         +1  2605+1           subb    a,r5
0365 FD         +1  2606+1           mov     r5,a
0366 E4         +1  2607+1           clr     a
0367 9C         +1  2608+1           subb    a,r4
0368 FC         +1  2609+1           mov     r4,a
0369 E4         +1  2610+1           clr     a
036A 9B         +1  2611+1           subb    a,r3
036B FB         +1  2612+1           mov     r3,a
036C E4         +1  2613+1           clr     a
036D 9A         +1  2614+1           subb    a,r2
036E FA         +1  2615+1           mov     r2,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    41

036F            +1  2616     ftol4:
036F E8         +1  2617             mov     a,r0            ;get exponent
0370 246A       +1  2618             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0372 20E727     +1  2619             jb      acc.7,ftol2     ;shift has to be right
0375 F8         +1  2620             mov     r0,a            ;save it
0376 24F8       +1  2621             add     a,#-8           ;if > 8, too big
0378 500E       +1  2622             jnc     ftol3
037A            +1  2623     ftol1:
037A E4         +1  2624             clr     a
037B FA         +1  2625             mov     r2,a
037C FB         +1  2626             mov     r3,a
037D FC         +1  2627             mov     r4,a
037E FD         +1  2628             mov     r5,a
037F            +1  2629     ftol9:
                +1  2630+3           restregs
037F D000       +1  2631+1           pop     0
0381 D001       +1  2632+1           pop     1
0383 D006       +1  2633+1           pop     6
0385 D007       +1  2634+1           pop     7
0387 22         +1  2635             ret
0388            +1  2636     ftol3:
0388 E8         +1  2637             mov     a,r0
0389 FE         +1  2638             mov     r6,a            ;store in counter
038A 60F3       +1  2639             jz      ftol9           ;if zero, do nothing
038C            +1  2640     ftol33:
                +1  2641+3           lshift                  ;shift up
038C ED         +1  2642+1           mov     a,r5
038D 33         +1  2643+1           rlc     a
038E FD         +1  2644+1           mov     r5,a
038F EC         +1  2645+1           mov     a,r4
0390 33         +1  2646+1           rlc     a
0391 FC         +1  2647+1           mov     r4,a
0392 EB         +1  2648+1           mov     a,r3
0393 33         +1  2649+1           rlc     a
0394 FB         +1  2650+1           mov     r3,a
0395 EA         +1  2651+1           mov     a,r2
0396 33         +1  2652+1           rlc     a
0397 FA         +1  2653+1           mov     r2,a
0398 DEF2       +1  2654             djnz    r6,ftol33       ;and loop
039A 80E3       +1  2655             sjmp    ftol9
039C            +1  2656     ftol2:
039C F4         +1  2657             cpl     a               ;complement
039D FE         +1  2658             mov     r6,a
039E 6022       +1  2659             jz      ftol22
03A0            +1  2660     ftol23:
03A0 EF         +1  2661             mov     a,r7
03A1 30E70F     +1  2662             jnb     acc.7,ftol24
                +1  2663+3           rshift1
03A4 D3         +1  2664+1           setb    c
03A5 EA         +1  2665+1           mov     a,r2
03A6 13         +1  2666+1           rrc     a
03A7 FA         +1  2667+1           mov     r2,a
03A8 EB         +1  2668+1           mov     a,r3
03A9 13         +1  2669+1           rrc     a
03AA FB         +1  2670+1           mov     r3,a
03AB EC         +1  2671+1           mov     a,r4
03AC 13         +1  2672+1           rrc     a
03AD FC         +1  2673+1           mov     r4,a
03AE ED         +1  2674+1           mov     a,r5
03AF 13         +1  2675+1           rrc     a
03B0 FD         +1  2676+1           mov     r5,a
03B1 800D       +1  2677             jmp     ftol25
03B3            +1  2678+3   ftol24: rshift                  ;shift down
03B3 C3         +1  2679+1           clr     c
03B4 EA         +1  2680+1           mov     a,r2
03B5 13         +1  2681+1           rrc     a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    42

03B6 FA         +1  2682+1           mov     r2,a
03B7 EB         +1  2683+1           mov     a,r3
03B8 13         +1  2684+1           rrc     a
03B9 FB         +1  2685+1           mov     r3,a
03BA EC         +1  2686+1           mov     a,r4
03BB 13         +1  2687+1           rrc     a
03BC FC         +1  2688+1           mov     r4,a
03BD ED         +1  2689+1           mov     a,r5
03BE 13         +1  2690+1           rrc     a
03BF FD         +1  2691+1           mov     r5,a
03C0 DEDE       +1  2692     ftol25: djnz    r6,ftol23
03C2            +1  2693     ftol22:
                +1  2694+3           add1                    ;round
03C2 ED         +1  2695+1           mov     a,r5
03C3 2401       +1  2696+1           add     a,#1
03C5 FD         +1  2697+1           mov     r5,a
03C6 E4         +1  2698+1           clr     a
03C7 3C         +1  2699+1           addc    a,r4
03C8 FC         +1  2700+1           mov     r4,a
03C9 E4         +1  2701+1           clr     a
03CA 3B         +1  2702+1           addc    a,r3
03CB FB         +1  2703+1           mov     r3,a
03CC E4         +1  2704+1           clr     a
03CD 3A         +1  2705+1           addc    a,r2
03CE FA         +1  2706+1           mov     r2,a
03CF EF         +1  2707             mov     a,r7
03D0 30E70F     +1  2708             jnb     acc.7,ftol26
                +1  2709+3           rshift1
03D3 D3         +1  2710+1           setb    c
03D4 EA         +1  2711+1           mov     a,r2
03D5 13         +1  2712+1           rrc     a
03D6 FA         +1  2713+1           mov     r2,a
03D7 EB         +1  2714+1           mov     a,r3
03D8 13         +1  2715+1           rrc     a
03D9 FB         +1  2716+1           mov     r3,a
03DA EC         +1  2717+1           mov     a,r4
03DB 13         +1  2718+1           rrc     a
03DC FC         +1  2719+1           mov     r4,a
03DD ED         +1  2720+1           mov     a,r5
03DE 13         +1  2721+1           rrc     a
03DF FD         +1  2722+1           mov     r5,a
03E0 809D       +1  2723             jmp     ftol9
03E2            +1  2724+3   ftol26: rshift
03E2 C3         +1  2725+1           clr     c
03E3 EA         +1  2726+1           mov     a,r2
03E4 13         +1  2727+1           rrc     a
03E5 FA         +1  2728+1           mov     r2,a
03E6 EB         +1  2729+1           mov     a,r3
03E7 13         +1  2730+1           rrc     a
03E8 FB         +1  2731+1           mov     r3,a
03E9 EC         +1  2732+1           mov     a,r4
03EA 13         +1  2733+1           rrc     a
03EB FC         +1  2734+1           mov     r4,a
03EC ED         +1  2735+1           mov     a,r5
03ED 13         +1  2736+1           rrc     a
03EE FD         +1  2737+1           mov     r5,a
03EF 808E       +1  2738             jmp     ftol9
                +1  2739     
                +1  2740     ;       arithmetic integer to floating conversions
                +1  2741     
03F1            +1  2742     abtof:
03F1 ED         +1  2743             mov     a,r5
03F2 23         +1  2744             rl      a
03F3 FC         +1  2745             mov     r4,a
03F4 9C         +1  2746             subb    a,r4
03F5 FC         +1  2747             mov     r4,a
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    43

03F6 FB         +1  2748             mov     r3,a
03F7 FA         +1  2749             mov     r2,a
03F8 8006       +1  2750             jmp     altof
03FA            +1  2751     awtof:
03FA EC         +1  2752             mov     a,r4
03FB 23         +1  2753             rl      a
03FC FB         +1  2754             mov     r3,a
03FD 9B         +1  2755             subb    a,r3
03FE FB         +1  2756             mov     r3,a
03FF FA         +1  2757             mov     r2,a
0400            +1  2758     altof:
                +1  2759+3           saveregs
0400 C007       +1  2760+1           push    7
0402 C006       +1  2761+1           push    6
0404 C001       +1  2762+1           push    1
0406 C000       +1  2763+1           push    0
0408 EA         +1  2764             mov     a,r2            ;get sign
0409 5480       +1  2765             anl     a,#80h
040B FF         +1  2766             mov     r7,a            ;store it
040C 30E70D     +1  2767             jnb     acc.7,altof1    ;skip if +ve
                +1  2768+3           neg1
040F C3         +1  2769+1           clr     c
0410 E4         +1  2770+1           clr     a
0411 9D         +1  2771+1           subb    a,r5
0412 FD         +1  2772+1           mov     r5,a
0413 E4         +1  2773+1           clr     a
0414 9C         +1  2774+1           subb    a,r4
0415 FC         +1  2775+1           mov     r4,a
0416 E4         +1  2776+1           clr     a
0417 9B         +1  2777+1           subb    a,r3
0418 FB         +1  2778+1           mov     r3,a
0419 E4         +1  2779+1           clr     a
041A 9A         +1  2780+1           subb    a,r2
041B FA         +1  2781+1           mov     r2,a
041C            +1  2782     altof1:
041C 7896       +1  2783             mov     r0,#127+23      ;initialize exponent
041E 11EE       +1  2784             call    norm1           ;normalize it
0420 11DC       +1  2785             call    pack1           ;and pack up
                +1  2786+3           restregs
0422 D000       +1  2787+1           pop     0
0424 D001       +1  2788+1           pop     1
0426 D006       +1  2789+1           pop     6
0428 D007       +1  2790+1           pop     7
042A 22         +1  2791             ret
                +1  2792     
042B            +1  2793     lbtof:
042B 7C00       +1  2794             mov     r4,#0
042D            +1  2795     lwtof:
042D E4         +1  2796             clr     a
042E FB         +1  2797             mov     r3,a
042F FA         +1  2798             mov     r2,a
0430            +1  2799     lltof:
                +1  2800+3           saveregs
0430 C007       +1  2801+1           push    7
0432 C006       +1  2802+1           push    6
0434 C001       +1  2803+1           push    1
0436 C000       +1  2804+1           push    0
0438 7F00       +1  2805             mov     r7,#0           ;zero sign
043A 80E0       +1  2806             sjmp    altof1
                +1  2807     
                +1  2808     ;-------------------------------------------------------
                +1  2809     
                +1  2810     
                    2811     
                    2812     ;$include (d:\amp\wriread.asm)                                        
                    2813     END
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    44

                                                                             
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    45

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
ABIN . . . . . . .  D ADDR   004FH   A      296#
ABTOF. . . . . . .  C ADDR   03F1H   A      2742#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 748 1149 1227 1230 1487 2139 2222 2239 2271 2309 2337 2599 2601 2619
                                           2662 2708 2767
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   06F8H   R   SEG=MAIN   1728#
ADEC . . . . . . .  D ADDR   0053H   A      297#
AGE1 . . . . . . .  C ADDR   019FH   R   SEG=MAIN   487# 490
ALMUL. . . . . . .  C ADDR   063FH   R   SEG=MAIN   1574#
ALTOF. . . . . . .  C ADDR   0400H   A      2750 2758#
ALTOF1 . . . . . .  C ADDR   041CH   A      2767 2782# 2806
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
AWTOF. . . . . . .  C ADDR   03FAH   A      2751#
B. . . . . . . . .  D ADDR   00F0H   A      122# 1577 1580 1582 1586 1590 1594 1598 1603 1607 1614 1618 1622 1628
                                           1632 1636 1642 2335 2336
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   241 405#
BFORM. . . . . . .  C ADDR   0353H   R   SEG=MAIN   875 880 892# 918
BIN30. . . . . . .  C ADDR   045BH   R   SEG=MAIN   1137# 1163
BIN31. . . . . . .  C ADDR   045FH   R   SEG=MAIN   1142# 1146
BIN32. . . . . . .  C ADDR   046FH   R   SEG=MAIN   1155# 1160
BIN41. . . . . . .  C ADDR   0480H   R   SEG=MAIN   1171# 1181
BINDEC . . . . . .  C ADDR   044FH   R   SEG=MAIN   1116#
BITAVP . . . . . .  B ADDR   0020H.5 A      312#
BITBON . . . . . .  B ADDR   0021H.2 A      319#
BITBUF . . . . . .  B ADDR   0021H.0 A      317#
BITIZM . . . . . .  B ADDR   0020H.4 A      311#
BITMAS . . . . . .  B ADDR   0020H.1 A      308# 857
BITMEM . . . . . .  B ADDR   0021H.3 A      320#
BITMENU. . . . . .  B ADDR   0022H.1 A      328#
BITNUL . . . . . .  B ADDR   0021H.7 A      324#
BITPRD . . . . . .  B ADDR   0021H.1 A      318#
BITRS. . . . . . .  B ADDR   0020H.3 A      310#
BITT2. . . . . . .  B ADDR   0022H.0 A      327#
BITVI11. . . . . .  B ADDR   0020H.6 A      313#
BITVI12. . . . . .  B ADDR   0022H.2 A      329#
BITVI13. . . . . .  B ADDR   0022H.3 A      330#
BITVI21. . . . . .  B ADDR   0022H.5 A      332#
BITVI31. . . . . .  B ADDR   0022H.6 A      333#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    46

BITVICH. . . . . .  B ADDR   0022H.4 A      331#
BITZNAK. . . . . .  B ADDR   0020H.0 A      307#
BITZUS . . . . . .  B ADDR   0020H.7 A      314#
BMEM11 . . . . . .  B ADDR   0021H.4 A      321#
BMEM12 . . . . . .  B ADDR   0021H.5 A      322#
BMEM13 . . . . . .  B ADDR   0021H.6 A      323#
BUFIND . . . . . .  D ADDR   0040H   A      294# 486 490 682
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F5H   A      2332# 2336
CELLBIT. . . . . .  D ADDR   0020H   A      306# 307 308 309 310 311 312 313 314
CELLBIT1 . . . . .  D ADDR   0021H   A      316# 317 318 319 320 321 322 323 324
CELLBIT2 . . . . .  D ADDR   0022H   A      326# 327 328 329 330 331 332 333
CEXP . . . . . . .  C ADDR   01E0H   A      2309 2318#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   040BH   R   SEG=MAIN   1049#
CH1. . . . . . . .  C ADDR   0427H   R   SEG=MAIN   669 1059#
CH10 . . . . . . .  C ADDR   040FH   R   SEG=MAIN   1050#
CH100. . . . . . .  C ADDR   041FH   R   SEG=MAIN   1054#
CH10000. . . . . .  C ADDR   041BH   R   SEG=MAIN   1053#
CH2. . . . . . . .  C ADDR   0423H   R   SEG=MAIN   1055#
CH5. . . . . . . .  C ADDR   0413H   R   SEG=MAIN   1051#
CH954. . . . . . .  C ADDR   0417H   R   SEG=MAIN   1052#
CHAVT. . . . . . .  D ADDR   0081H   A      345# 468
CHBEFORE . . . . .  D ADDR   009BH   A      355#
CHBUF. . . . . . .  D ADDR   00ADH   A      362#
CHCMP. . . . . . .  C ADDR   03F8H   R   SEG=MAIN   1034#
CHDEC. . . . . . .  C ADDR   0227H   R   SEG=MAIN   661#
CHDEL. . . . . . .  D ADDR   0083H   A      346#
CHIND. . . . . . .  D ADDR   00ACH   A      361#
CHINKOR. . . . . .  D ADDR   0098H   A      344# 463
CHKL . . . . . . .  D ADDR   003DH   A      303#
CHMAS. . . . . . .  D ADDR   006EH   A      298# 856
CHMASN . . . . . .  D ADDR   003FH   A      304#
CHTADC . . . . . .  C ADDR   0268H   R   SEG=MAIN   706#
CHTHO. . . . . . .  C ADDR   0433H   R   SEG=MAIN   1062#
CH_1 . . . . . . .  C ADDR   042BH   R   SEG=MAIN   479 1060#
CH_10TH. . . . . .  C ADDR   043FH   R   SEG=MAIN   1065#
CH_200 . . . . . .  C ADDR   043BH   R   SEG=MAIN   1064#
CH_220 . . . . . .  C ADDR   0437H   R   SEG=MAIN   1063#
CH_953 . . . . . .  C ADDR   042FH   R   SEG=MAIN   1061#
CIKLWR . . . . . .  C ADDR   0329H   R   SEG=MAIN   863#
CKCON. . . . . . .  D ADDR   008EH   A      30# 423
CLE256 . . . . . .  C ADDR   01C8H   R   SEG=MAIN   506 558#
CLEAR. . . . . . .  C ADDR   0449H   R   SEG=MAIN   1094 1098# 1128
CLMASSIX . . . . .  C ADDR   0319H   R   SEG=MAIN   462 850#
CLMAX. . . . . . .  C ADDR   031EH   R   SEG=MAIN   852# 855
CLR11. . . . . . .  C ADDR   044AH   R   SEG=MAIN   1100# 1102
CLRDEC . . . . . .  C ADDR   0443H   R   SEG=MAIN   1092#
CLRNUM . . . . . .  C ADDR   0447H   R   SEG=MAIN   1095# 1209
CNTR . . . . . . .  N NUMB   0006H   A      2005#
CO1S . . . . . . .  C ADDR   02C9H   R   SEG=MAIN   777# 777
CO2S . . . . . . .  C ADDR   02C5H   R   SEG=MAIN   775# 779
COND . . . . . . .  C ADDR   038DH   R   SEG=MAIN   947#
CONSTE . . . . . .  D ADDR   00A4H   A      359#
CONSTF . . . . . .  D ADDR   00A8H   A      360#
COPY1. . . . . . .  C ADDR   021FH   R   SEG=MAIN   646# 651
COPYP. . . . . . .  C ADDR   01A8H   R   SEG=MAIN   494#
COPYPP . . . . . .  C ADDR   0219H   R   SEG=MAIN   498 643#
COSS . . . . . . .  C ADDR   02D2H   R   SEG=MAIN   783# 787
COUNT. . . . . . .  C ADDR   02B0H   R   SEG=MAIN   756# 756
COZS . . . . . . .  C ADDR   02D6H   R   SEG=MAIN   785# 785
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    47

CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   02B7H   R   SEG=MAIN   762# 762
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 428
DAC0H. . . . . . .  D ADDR   00D3H   A      94#
DAC0L. . . . . . .  D ADDR   00D2H   A      93#
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 429
DAC1H. . . . . . .  D ADDR   00D6H   A      97#
DAC1L. . . . . . .  D ADDR   00D5H   A      96#
DCOA . . . . . . .  C ADDR   0392H   R   SEG=MAIN   951# 953
DCOB . . . . . . .  C ADDR   0399H   R   SEG=MAIN   955# 973
DCOC . . . . . . .  C ADDR   03A4H   R   SEG=MAIN   965# 970
DCOD . . . . . . .  C ADDR   03B1H   R   SEG=MAIN   972 975#
DEC30. . . . . . .  C ADDR   049CH   R   SEG=MAIN   1219# 1244
DEC31. . . . . . .  C ADDR   04A1H   R   SEG=MAIN   1225# 1232
DEC32. . . . . . .  C ADDR   04B1H   R   SEG=MAIN   1237# 1241
DECBIN . . . . . .  C ADDR   048FH   R   SEG=MAIN   1198#
DECSIZE. . . . . .  N NUMB   000AH   A      1073# 1093 1127 1154 1167 1170 1224
DECT2. . . . . . .  C ADDR   04BAH   R   SEG=MAIN   1215 1247#
DEDPTR . . . . . .  C ADDR   070FH   R   SEG=MAIN   1732 1736 1740 1746#
DENORM . . . . . .  C ADDR   0131H   A      2164# 2220
DIAP . . . . . . .  D ADDR   00AEH   A      363# 474
DIV1 . . . . . . .  C ADDR   02DBH   A      2501# 2560
DIV2 . . . . . . .  C ADDR   031EH   A      2519 2523 2527 2531 2546#
DIV3 . . . . . . .  C ADDR   030BH   A      2520 2524 2528 2532#
DIV9 . . . . . . .  C ADDR   0334H   A      2490 2492 2566#
DIVIDE . . . . . .  C ADDR   057AH   R   SEG=MAIN   879 1433#
DONE . . . . . . .  C ADDR   04E9H   R   SEG=MAIN   1263 1274#
DONE1. . . . . . .  C ADDR   04E7H   R   SEG=MAIN   1266 1269 1272#
DOSH . . . . . . .  C ADDR   0603H   R   SEG=MAIN   1508 1524#
DOSUB. . . . . . .  C ADDR   05F1H   R   SEG=MAIN   1492 1496 1500 1504 1505 1509#
DPH. . . . . . . .  D ADDR   0083H   A      19# 592 643 795 803 1280 1316 1351 1354 1366 1389 1751 1753
DPL. . . . . . . .  D ADDR   0082H   A      18# 593 644 796 802 1296 1332 1353 1367 1370 1404 1748 1750
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 426
EIE2 . . . . . . .  D ADDR   00E7H   A      113#
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      2007#
EXP2 . . . . . . .  N NUMB   0001H   A      2009# 2186 2207
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINIS. . . . . . .  C ADDR   062EH   R   SEG=MAIN   1452 1553#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0164H   A      2212# 2301
FLCMP. . . . . . .  C ADDR   01D4H   A      2306#
FLDIV. . . . . . .  C ADDR   02B5H   A      2476#
FLMUL. . . . . . .  C ADDR   0201H   A      2346#
FLOUT. . . . . . .  C ADDR   01DFH   A      2313 2316#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 564 565 625
FLSUB. . . . . . .  C ADDR   01CFH   A      2299#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    48

FND. . . . . . . .  C ADDR   01F6H   A      2322 2325 2328 2331 2334#
FO1M . . . . . . .  C ADDR   0350H   R   SEG=MAIN   885 889#
FO2M . . . . . . .  C ADDR   0359H   R   SEG=MAIN   892 894#
FORM4. . . . . . .  C ADDR   035AH   R   SEG=MAIN   887 893 897#
FTOL . . . . . . .  C ADDR   0341H   A      2582#
FTOL1. . . . . . .  C ADDR   037AH   A      2595 2599 2623#
FTOL2. . . . . . .  C ADDR   039CH   A      2619 2656#
FTOL22 . . . . . .  C ADDR   03C2H   A      2659 2693#
FTOL23 . . . . . .  C ADDR   03A0H   A      2660# 2692
FTOL24 . . . . . .  C ADDR   03B3H   A      2662 2678#
FTOL25 . . . . . .  C ADDR   03C0H   A      2677 2692#
FTOL26 . . . . . .  C ADDR   03E2H   A      2708 2724#
FTOL3. . . . . . .  C ADDR   0388H   A      2622 2636#
FTOL33 . . . . . .  C ADDR   038CH   A      2640# 2654
FTOL4. . . . . . .  C ADDR   036FH   A      2601 2616#
FTOL9. . . . . . .  C ADDR   037FH   A      2629# 2639 2655 2723 2738
GENER. . . . . . .  C ADDR   013FH   R   SEG=MAIN   434# 435
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 494 624 636
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
IND. . . . . . . .  C ADDR   023FH   R   SEG=MAIN   491 682#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
JFINIS . . . . . .  C ADDR   0595H   R   SEG=MAIN   1444 1452#
KOEFKD . . . . . .  D ADDR   00A0H   A      358#
KOEFKM . . . . . .  D ADDR   0094H   A      352# 483
KOEFKP . . . . . .  D ADDR   0090H   A      351# 481
KOR0_AN. . . . . .  D ADDR   0084H   A      348#
LADD . . . . . . .  C ADDR   06D6H   R   SEG=MAIN   1679#
LADDX. . . . . . .  C ADDR   06E7H   R   SEG=MAIN   1703#
LBTOF. . . . . . .  C ADDR   042BH   A      2793#
LCMP . . . . . . .  C ADDR   04D4H   R   SEG=MAIN   916 1044 1259#
LDC_LONG . . . . .  C ADDR   04EAH   R   SEG=MAIN   480 1279#
LDC_LTEMP. . . . .  C ADDR   050CH   R   SEG=MAIN   670 1315#
LDX_LONG . . . . .  C ADDR   0532H   R   SEG=MAIN   1350#
LDX_LTEMP. . . . .  C ADDR   0558H   R   SEG=MAIN   1388#
LEVEL. . . . . . .  D ADDR   00B0H   A      365#
LLMUL. . . . . . .  C ADDR   063FH   R   SEG=MAIN   1573#
LLSUB. . . . . . .  C ADDR   06C4H   R   SEG=MAIN   1655#
LLTOF. . . . . . .  C ADDR   0430H   A      2799#
LMUL . . . . . . .  C ADDR   063FH   R   SEG=MAIN   874 1575#
LOADKD . . . . . .  C ADDR   01C8H   R   SEG=MAIN   552#
LOOP . . . . . . .  C ADDR   02A5H   R   SEG=MAIN   747# 748
LOOPS. . . . . . .  C ADDR   0598H   R   SEG=MAIN   1454# 1487
LSUB . . . . . . .  C ADDR   06C4H   R   SEG=MAIN   671 1656#
LTEMP. . . . . . .  N NUMB   0008H   A      926 929 932 935 978 979 980 981 1071# 1445 1446 1447 1448 1457 1461 1465
                                           1469 1472 1473 1474 1475 1476 1477 1478 1479 1480 1481 1482 1483 1486 1489
                                           1494 1498 1502 1512 1515 1518 1521 1537 1540 1541 1543 1544 1546 1547 1549
                                           1554 1555 1556 1557 1577 1582 1590 1598 1603 1614 1622 1628 1636 1642 2010
                                           2011 2050 2055 2057 2066 2067 2068 2069 2300 2308 2321 2324 2327 2330
LWR. . . . . . . .  C ADDR   032BH   R   SEG=MAIN   865# 869
LWRX . . . . . . .  C ADDR   02DFH   R   SEG=MAIN   794# 806
LWTOF. . . . . . .  C ADDR   042DH   A      2795#
MABIN. . . . . . .  D ADDR   006FH   A      299#
MAFORM . . . . . .  C ADDR   0346H   R   SEG=MAIN   873 878 883# 915
MAIN . . . . . . .  C SEG    0721H       REL=UNIT   237 290# 398
MANT1. . . . . . .  N NUMB   0002H   A      2008# 2035 2084 2085
MANT2. . . . . . .  N NUMB   0008H   A      2010# 2061 2062 2193 2195 2196 2198 2199 2201 2202 2204 2243 2244 2246
                                           2247 2249 2250 2252 2253 2257 2259 2262 2265 2363 2365 2366 2368 2369 2371
                                           2372 2374 2425 2427 2428 2430 2431 2433 2434 2436 2518 2522 2526 2530 2534
                                           2537 2540 2543
MARKER . . . . . .  D ADDR   00B2H   A      367#
MASS0. . . . . . .  X ADDR   0080H   A      371 372# 851
MASS1. . . . . . .  X ADDR   0084H   A      373#
MASS2. . . . . . .  X ADDR   0088H   A      374#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    49

MASS3. . . . . . .  X ADDR   008CH   A      375#
MASS4. . . . . . .  X ADDR   0090H   A      376#
MASS5. . . . . . .  X ADDR   0094H   A      377#
MASS6. . . . . . .  X ADDR   0098H   A      378#
MASS7. . . . . . .  X ADDR   009CH   A      379#
MASS8. . . . . . .  X ADDR   00A0H   A      380#
MASS9. . . . . . .  X ADDR   00A4H   A      381#
MECLE. . . . . . .  C ADDR   0163H   R   SEG=MAIN   454# 456
MEFF . . . . . . .  C ADDR   016AH   R   SEG=MAIN   458# 461
MIDL . . . . . . .  C ADDR   05CBH   R   SEG=MAIN   1449 1484#
MM3. . . . . . . .  C ADDR   01C8H   R   SEG=MAIN   561#
MM5. . . . . . . .  C ADDR   01D8H   R   SEG=MAIN   576# 587
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOVE28 . . . . . .  C ADDR   03B3H   R   SEG=MAIN   978#
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   0218H   A      2360# 2403
MUP11. . . . . . .  C ADDR   0255H   A      2407# 2452
MUP2 . . . . . . .  C ADDR   0295H   A      2437 2451#
MUP3 . . . . . . .  C ADDR   026AH   A      2406 2422#
NE05 . . . . . . .  C ADDR   0356H   A      2589 2591 2593 2596#
NEXIN. . . . . . .  C ADDR   0243H   R   SEG=MAIN   684# 691
NO . . . . . . . .  C ADDR   05B3H   R   SEG=MAIN   1459 1463 1467 1471#
NOBIT. . . . . . .  C ADDR   0243H   A      2375 2389#
NORDN. . . . . . .  C ADDR   00F4H   A      2096# 2129
NORDN1 . . . . . .  C ADDR   0105H   A      2098 2112#
NORM1. . . . . . .  C ADDR   00EEH   A      2091# 2288 2465 2567 2784
NORUP. . . . . . .  C ADDR   0117H   A      2095 2132#
NORUP1 . . . . . .  C ADDR   011CH   A      2137# 2155
NORUP2 . . . . . .  C ADDR   0130H   A      2139 2156#
NOSUB. . . . . . .  C ADDR   05EEH   R   SEG=MAIN   1493 1497 1501 1506#
NUMSIZE. . . . . .  N NUMB   0004H   A      1074# 1096 1134 1141 1216 1236
OBOARD . . . . . .  C ADDR   0524H   R   SEG=MAIN   1317 1331#
OBOARD1. . . . . .  C ADDR   056CH   R   SEG=MAIN   1390 1403#
OK1. . . . . . . .  C ADDR   0184H   A      2222 2237#
OK2. . . . . . . .  C ADDR   019EH   A      2239 2254#
OK3. . . . . . . .  C ADDR   01C2H   A      2271 2287#
ONBOAR1. . . . . .  C ADDR   054AH   R   SEG=MAIN   1352 1369#
ONBOARD. . . . . .  C ADDR   04FEH   R   SEG=MAIN   1281 1295#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 437
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 430 434
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 1273
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 684 688
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 408
P1 . . . . . . . .  D ADDR   0090H   A      32# 695 697 700 703 707 709 710 1008 1011 1013 1016 1022 1024 1026
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 409
P2 . . . . . . . .  D ADDR   00A0H   A      47# 728 732 741
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 410
P3 . . . . . . . .  D ADDR   00B0H   A      62# 727 729 731 737 738 739 742 743
P3IF . . . . . . .  D ADDR   00ADH   A      59#
P3MDOUT. . . . . .  D ADDR   00A7H   A      53#
P4 . . . . . . . .  D ADDR   0084H   A      20#
P5 . . . . . . . .  D ADDR   0085H   A      21#
P6 . . . . . . . .  D ADDR   0086H   A      22#
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 413
PACK1. . . . . . .  C ADDR   00DCH   A      2074# 2289 2466 2568 2785
PARN . . . . . . .  D ADDR   00AFH   A      364# 476
PART . . . . . . .  D ADDR   009AH   A      354# 472
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    50

PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 406
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 407
PCON . . . . . . .  D ADDR   0087H   A      23#
PROD . . . . . . .  N NUMB   000CH   A      2011# 2355 2356 2357 2358 2378 2379 2380 2382 2383 2385 2386 2388 2410
                                           2412 2413 2415 2416 2418 2419 2421 2440 2441 2442 2444 2445 2447 2448 2450
                                           2461 2462 2463 2464 2485 2486 2487 2488 2504 2506 2507 2509 2510 2512 2513
                                           2515 2545 2562 2563 2564 2565
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 561 563 577 579 627 628 630 632
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 917 919 1746 1754
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
R10. . . . . . . .  N NUMB   000AH   A      393# 604 843
R11. . . . . . . .  N NUMB   000BH   A      394# 608 846
R8 . . . . . . . .  N NUMB   0008H   A      391# 596 837 1042
R9 . . . . . . . .  N NUMB   0009H   A      392# 600 840 1043
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RE1. . . . . . . .  C ADDR   03E8H   R   SEG=MAIN   1022# 1028
RE4BYTE. . . . . .  C ADDR   01E5H   R   SEG=MAIN   592#
REACP. . . . . . .  D ADDR   0077H   A      300#
READ . . . . . . .  C ADDR   03E6H   R   SEG=MAIN   1021#
READ_X2. . . . . .  C ADDR   0294H   R   SEG=MAIN   736# 747
REF0CN . . . . . .  D ADDR   00D1H   A      92# 414
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RESAR2 . . . . . .  C ADDR   03BFH   R   SEG=MAIN   986#
RESAR8 . . . . . .  C ADDR   037DH   R   SEG=MAIN   925#
REZAM. . . . . . .  D ADDR   008CH   A      350#
REZAP. . . . . . .  D ADDR   0088H   A      349#
REZ_A. . . . . . .  D ADDR   0062H   A      339#
REZ_A0 . . . . . .  D ADDR   006AH   A      341#
REZ_A1 . . . . . .  D ADDR   0066H   A      340#
REZ_A2 . . . . . .  D ADDR   007BH   A      342#
REZ_A3 . . . . . .  D ADDR   009CH   A      356#
REZ_AME. . . . . .  D ADDR   005EH   A      338#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RR0. . . . . . . .  N NUMB   0000H   A      384#
RR1. . . . . . . .  N NUMB   0001H   A      385#
RR2. . . . . . . .  N NUMB   0002H   A      387# 667
RR3. . . . . . . .  N NUMB   0003H   A      388# 668
RR4. . . . . . . .  N NUMB   0004H   A      1075# 1132 1153 1169 1213 1235
RR5. . . . . . . .  N NUMB   0005H   A      1076# 1133 1140 1147 1214 1223
RR6. . . . . . . .  N NUMB   0006H   A      386#
RR7. . . . . . . .  N NUMB   0007H   A      389#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 444
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    51

SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAVEIR2. . . . . .  C ADDR   02F1H   R   SEG=MAIN   809#
SAVER2 . . . . . .  C ADDR   02FDH   R   SEG=MAIN   482 484 823#
SAVER8 . . . . . .  C ADDR   0309H   R   SEG=MAIN   837#
SBUF0. . . . . . .  D ADDR   0099H   A      40#
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   0256H   R   SEG=MAIN   695# 702
SDV1 . . . . . . .  C ADDR   026AH   R   SEG=MAIN   707# 713
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      2006# 2027 2028 2053 2054 2078 2221 2238 2459 2499
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SP . . . . . . . .  D ADDR   0081H   A      17# 405
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 450
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 449
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 686
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 441 442
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 424
TH1. . . . . . . .  D ADDR   008DH   A      29#
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   027AH   R   SEG=MAIN   716#
TIM1 . . . . . . .  C ADDR   027CH   R   SEG=MAIN   717# 717
TIM2 . . . . . . .  C ADDR   027FH   R   SEG=MAIN   698 701 708 712 720# 1012 1014 1023 1027
TIM3 . . . . . . .  C ADDR   0281H   R   SEG=MAIN   721# 721
TL0. . . . . . . .  D ADDR   008AH   A      26# 425
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TMOD . . . . . . .  D ADDR   0089H   A      25# 422
TMR2RLH. . . . . .  D ADDR   00CBH   A      287# 439
TMR2RLL. . . . . .  D ADDR   00CAH   A      286# 438
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
A51 MACRO ASSEMBLER  LOADKD_X                                                             01/16/2007 10:24:23 PAGE    52

TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 687
UNPACK1. . . . . .  C ADDR   009CH   A      2024# 2218 2352 2482 2596
UNPACK2. . . . . .  C ADDR   00B8H   A      2049# 2219 2353 2483
UP1. . . . . . . .  C ADDR   0136H   A      2169# 2186
UP2. . . . . . . .  C ADDR   0149H   A      2189# 2207
UP2A . . . . . . .  C ADDR   015FH   A      2168 2205#
VICHR. . . . . . .  D ADDR   00B1H   A      366#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 420 421
WR1. . . . . . . .  C ADDR   03D3H   R   SEG=MAIN   1008# 1015
WR4BAIT. . . . . .  C ADDR   01D8H   R   SEG=MAIN   575#
WRITE. . . . . . .  C ADDR   03D0H   R   SEG=MAIN   1006#
WRITED_X1. . . . .  C ADDR   0285H   R   SEG=MAIN   726#
WRITE_X1 . . . . .  C ADDR   0284H   R   SEG=MAIN   725#
WRPAGE . . . . . .  C ADDR   01FDH   R   SEG=MAIN   511 622#
WW5. . . . . . . .  C ADDR   01FDH   R   SEG=MAIN   623# 635
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 416 448
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 417
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 418 447
XCIKLWR. . . . . .  C ADDR   02DDH   R   SEG=MAIN   792#
XTEMP. . . . . . .  N NUMB   000CH   A      1072# 1436 1437 1438 1439 1525 1527 1528 1530 1531 1533 1534 1536 1558
                                           1559 1560 1561 1579 1580 1584 1585 1588 1592 1593 1596 1600 1601 1605 1606
                                           1608 1609 1610 1612 1616 1617 1619 1620 1624 1625 1630 1631 1633 1634 1638
                                           1639 1644 1646 1647 1648
YES. . . . . . . .  C ADDR   05D1H   R   SEG=MAIN   1458 1462 1466 1470 1488# 1551
Z100 . . . . . . .  C ADDR   02AEH   R   SEG=MAIN   755# 757
Z15. . . . . . . .  C ADDR   02BCH   R   SEG=MAIN   767# 769
Z1S. . . . . . . .  C ADDR   02C7H   R   SEG=MAIN   776# 778
ZAPADC . . . . . .  C ADDR   0254H   R   SEG=MAIN   694#
ZCMP . . . . . . .  C ADDR   036FH   R   SEG=MAIN   915#
ZDIV . . . . . . .  C ADDR   033CH   R   SEG=MAIN   878#
ZER1 . . . . . . .  C ADDR   00B1H   A      2034 2038# 2093 2136
ZER2 . . . . . . .  C ADDR   00D2H   A      2060 2064#
ZMUL . . . . . . .  C ADDR   0332H   R   SEG=MAIN   873#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      309# 886 889 892
ZSS. . . . . . . .  C ADDR   02D4H   R   SEG=MAIN   784# 786
ZZ . . . . . . . .  C ADDR   02BEH   R   SEG=MAIN   768# 768
Z_100. . . . . . .  C ADDR   02ACH   R   SEG=MAIN   754#
Z_15 . . . . . . .  C ADDR   02BAH   R   SEG=MAIN   766#
Z_1S . . . . . . .  C ADDR   02C3H   R   SEG=MAIN   774#
Z_5. . . . . . . .  C ADDR   02B5H   R   SEG=MAIN   730 740 761#
Z_9. . . . . . . .  C ADDR   03CBH   R   SEG=MAIN   689 1000#
Z_SS . . . . . . .  C ADDR   02D0H   R   SEG=MAIN   782#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
