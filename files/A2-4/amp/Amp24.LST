A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp24.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp24.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236             
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)               
                     311     
                     312     ;;;;;
  0020               313      cellbit                DATA    20h
  0000               314     bitznak         BIT     cellbit.0       ;20.0           
  0001               315     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               316     znmat           BIT             cellbit.2       ;20.2
  0003               317     bitrs           BIT             cellbit.3       ;20.3
  0004               318     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               319     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               320     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     6

                             !!!
  0007               321     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     322     
  0021               323     cellbit1                DATA    21h
  0008               324     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               325     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               326     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               327     bitmem          BIT             cellbit1.3      ;21.3
  000C               328     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               329     bmem12          BIT             cellbit1.5      ;21.5    бит ПАМ12
  000E               330     bmem13          BIT             cellbit1.6      ;21.6   бит ПАМ13        
  000F               331     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     332     
  0022               333     cellbit2                DATA    22h
  0010               334     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               335     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               336     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               337     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               338     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               339     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               340     bitvi31         BIT             cellbit2.6      ;22.6   бит ПАМ13        
  0017               341     bitoll          BIT             cellbit2.7      ;22.7
                     342     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     343     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     344     ;и выдает т.н. буфер индикации  
  0023               345     cellbit3                DATA    23h
  0018               346     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               347     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               348     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               349     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     350     ;bit            BIT             cellbit3.4      ;22.4    
                     351     ;bit            BIT             cellbit3.5      ;22.5    
                     352     ;bit            BIT             cellbit3.6      ;22.6            
                     353     ;bit            BIT             cellbit3.7      ;22.7
                     354             
  005E               355     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     356     ;hex
  0062               357     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               358     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               359     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               360     rez_A2   data 7bh; A2
                     361     
  0098               362     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               363     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               364     chdel    data  83h              ; счетчик задержки
                     365     ;float
  0084               366     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               367     rezAp    data  88h              ;4byte  A+
  008C               368     rezAm    data  8ch              ;4byte  A-
  0090               369     koefKp   data  90h              ;4byte  K+
  0094               370     koefKm   data  94h              ;4byte  K-
                     371     ;hex 
  009A               372     parT     data  9ah              ;параметр времени измерения
  009B               373     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               374     rez_A3   data  9ch              ;A3
                     375     ;FLOAT
  00A0               376     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               377     rez_Ak  data  0a4h         ;Ak
  00A8               378     parol           data  0a8h         ;храним в памяти пароль
  00AC               379     chind   data  0ach         ;счетчик индикации
  00AD               380     chbuf   data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               381     diap    data  0aeh         ;номер диапазона
  00AF               382     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               383     level   data  0b0h              ;уровень в меню, выч    ,Tизм
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     7

  00B1               384     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               385     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               386     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               387     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               388     work    data  0b8h        ;рабочая ячейка
  00BC               389     konstA  data  0bch        ;     введенная с крана константа A
  00C0               390     konstB  data  0c0h         ;    введенная с крана константа B
  00C4               391     nblok   data  0c4h         ;номер блока
  00C5               392     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               393     rez_R           data    0c9h            ;рез вычисления R
                     394     ;data  0cfh;параметр =11,12,13,21
                     395     ;data  0d0h
                     396     
                     397     ;внешнее ОЗУ 64K 
                     398     ;               XSEG AT 100h
                     399             PUBLIC    MASS0
  0080               400     MASS0  xdata 0080h;     скользящий массив измерения
  0084               401     MASS1  xdata 0084h;
  0088               402     MASS2  xdata 0088h;
  008C               403     MASS3  xdata 008ch;
  0090               404     MASS4  xdata 0090h;
  0094               405     MASS5  xdata 0094h;
  0098               406     MASS6  xdata 0098h;
  009C               407     MASS7  xdata 009ch;
  00A0               408     MASS8  xdata 00a0h;
  00A4               409     MASS9  xdata 00a4h;
  00A8               410     MASS10  xdata 00a8h;
  00AC               411     MASS11  xdata 00ach;
  00B0               412     MASS12  xdata 00b0h;
  00B4               413     MASS13  xdata 00b4h;
  00B8               414     MASS14  xdata 00b8h;
  00BC               415     MASS15  xdata 00bch;
  00C0               416     MASS16  xdata 00c0h;
  00C4               417     MASS17  xdata 00c4h;
  00C8               418     MASS18  xdata 00c8h;
  00CC               419     MASS19  xdata 00cch;
                     420     ;xdata 0038h;
                     421     
  0000               422                             rr0             EQU 00
  0001               423                     rr1       equ   01
  0006               424                     rr6   equ 06
  0002               425                     rr2       equ   02
  0003               426                     rr3       equ   03
  0007               427                     rr7   equ 07
                     428     
  0008               429                     r8   equ 08
  0009               430                     r9        equ   09
  000A               431                     r10       equ   10
  000B               432                     r11   equ 11
                     433     
                     434                     
                     435        
----                 436                  rseg     Main          ; Switch to this code segment.
                     437     
                     438                  using    0              ; Specify register bank for the following
                     439     
0100                 440     org 100h
                     441     ;$EJECT
                     442     
0100 7581E0          443     begin:     mov  sp, #0e0h
0103 75E900          444                                             mov             PCA0L,#00;=0x00;
0106 75D900          445                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          446                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          447                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          448                                             mov     P2MDOUT,#00;=0x00;
                     449             
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     8

0112 75A73F          450             mov     P3MDOUT,#3fh;
0115 75B5FF          451             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          452             mov     REF0CN,#03h;=0x03;
                     453             
011B 75E114          454             mov     XBR0,#14h;= 0x14;
011E 75E200          455             mov     XBR1,#00; =0x00;
0121 75E300          456             mov XBR2,#00;=0x00;
0124 75B0C0          457             mov     P3,#0c0h
0127 75FFDE          458             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          459             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          460             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          461             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          462             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          463             mov     TL0,#0f9h;=0xf9; 
0139 75E680          464             mov     EIE1,#80h;=0x80;
                     465     
013C 75D480          466             mov     DAC0CN,#80h;=0x80;
013F 75D780          467             mov     DAC1CN,#80h;=0x80;
0142 75B167          468             mov     OSCXCN,#67h;=0x67;
                     469     
                     470      
                     471     
0145 E5B1            472     gener:     mov a, oscxcn
0147 B4E7FB          473                cjne a,#11100111b,gener
                     474                            
014A 75B288          475             mov     OSCICN,#88h;=0x84;
014D 75CA00          476         mov TMR2RLL,#0;=0;
0150 75CBD1          477         mov TMR2RLH,#0d1h;=0xd1;
                     478       
0153 D28E            479                     setb  TCON.6                    ;регистр управления
0155 D28C            480                      setb tcon.4
                     481     
0157 75EF00          482             mov     RSTSRC,#0;=00   ;//источники сброса 
                     483     
                     484             
015A 75E340          485          mov        XBR2,#40h
015D 75E106          486              mov    XBR0,#06h;16h
0160 75F803          487             mov             SPI0CN,#03
0163 759D31          488             mov             spi0ckr,#31H;;;;;;;;#04
                     489     ;установка скорости
0166 759850          490                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          491                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          492                                             mov             CKCON,#00010000b;TIM=1
016F 758920          493                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          494                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            495                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            496                                             mov                     r3,#2ch
0179 120454          497                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            498                                             mov                     a,r8
017E B40007          499                                             cjne            a,#00,yst19
0181 C213            500                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          501                                             mov                     TH1,#244
0186 8008            502                                             jmp               yst1
0188 900000   F      503     yst19:          mov                     dptr,#teS19_2
018B D213            504                                             setb            bitv19                  ;19,2
018D 758DDC          505                                             mov                     TH1,#220
0190                 506     yst1:
0190 75E730          507                                             mov             EIE2,#30H;00110000
0193 75A880          508                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE     9

                     509     ;ozu
0196 E4              510                                             clr     a
0197 7800            511                                             mov     r0,#00h 
0199 F6              512     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              513                                             inc     r0
019B B87FFB          514                                             cjne    r0,#7fh,mecle
019E 7880            515                                             mov     r0,#80h
01A0 F6              516     meff:                   mov     @r0,a 
01A1 F2              517                                             movx @r0,a
01A2 08              518                                             inc     r0
01A3 B8DFFA          519                             cjne    r0,#0dfh,meff
01A6 120000   F      520                             call    clmassix
01A9 7898            521                             mov             r0,#chinkor
01AB 7600            522                             mov             @r0,#0;1;
01AD 08              523                             inc             r0
01AE 76C8            524                             mov             @r0,#0c8h;90h;
                     525                             ;;;;
01B0 7881            526                             mov             r0,#chavt
01B2 7603            527                             mov             @r0,#3;1
01B4 08              528                             inc             r0
01B5 7620            529                             mov             @r0,#20h;90h
                     530     
01B7 78B2            531                                     mov             r0,#marker
01B9 76FF            532                                     mov             @r0,#0ffh
                     533                             ;mov            r0,#chind
                     534                             ;mov            @r0,#1
                     535                     
01BB 74FF            536                             mov             a,#0ffh
01BD F585            537                        mov          p5,a
01BF 799A            538                             mov             r1,#parT
01C1 7702            539                             mov             @r1,#2                  ;Tizm=1s
01C3 79AE            540                             mov             r1,#diap
01C5 7705            541                             mov             @r1,#5                  ;10-7a
01C7 79AF            542                             mov             r1,#parN
01C9 7702            543                             mov             @r1,#2
01CB 7400            544                             mov             a,#00h
01CD F585            545                             mov             p5,a
01CF D204            546                             setb    bitizm
                     547     
01D1 799B            548                             mov             r1,#chbefore
01D3 7700            549                             mov             @r1,#0
                     550                             ;;;;;;
01D5 900000   F      551                             mov             dptr,#ch_1              ;1->r2..r5 float
01D8 120000   F      552                             call    ldc_long
01DB 7890            553                             mov             r0,#koefKp         ;1(float)->koefKp
01DD 120000   F      554                             call    saver2
01E0 7894            555                             mov             r0,#koefKm              ;1(float)->koefKm
01E2 120000   F      556                             call    saver2
01E5 78A0            557                             mov             r0,#koefKD
01E7 120000   F      558                             call    saver2  
                     559     ;START
                     560     ;                                       rez_A0=0;
                     561     ;        SUMM=0; //обнуление скользящего массива
                     562     ;        over_mas=0;
                     563     ;        count_mas=0;
                     564     
01EA 7840            565                             mov             r0,#bufind
01EC                 566     age2:
01EC 76FD            567                             mov             @r0,#0fdh         ;погасить индикатор
01EE 08              568                             inc             r0
01EF B84CFA          569                             cjne    r0,#bufind+12,age2              
01F2 120000   F      570                             call    ind
01F5 120000   F      571                             call    z_1s
                     572     
                     573                                     ;зажечь все лементы индикации
01F8 7840            574                             mov             r0,#bufind
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    10

01FA 76FE            575     ageon:          mov             @r0,#0feh;?
01FC 08              576                             inc             r0
01FD B84CFA          577                             cjne    r0,#bufind+12,ageon             
0200 120000   F      578                             call    ind
0203 120000   F      579                             call    z_1s            ;1sec
                     580     ;;;;;;;;;;;;;;;;
0206 7840            581                             mov             r0,#bufind
0208 7630            582                             mov             @r0,#30H;"A"
020A 08              583                             inc             r0
020B 7630            584                             mov             @r0,#30H;"В"
020D 08              585                             inc             r0
020E 7630            586                             mov             @r0,#30H;"Т"
0210 08              587                             inc             r0
0211 7634            588                             mov             @r0,#34H;2dh
0213 08              589                             inc             r0
0214 7635            590                             mov             @r0,#35H;"H"
0216 08              591                             inc             r0
0217 7636            592                             mov             @r0,#36h
0219 08              593                             inc             r0
021A 7637            594                             mov             @r0,#37h
021C 08              595                             inc             r0
021D 762D            596                             mov             @r0,#2dh
021F 08              597                             inc             r0
0220 7637            598                             mov             @r0,#37h
0222 08              599                             inc             r0
0223 7641            600                             mov             @r0,#"A";31h
0225 08              601                             inc             r0
                     602                     
0226 120000   F      603     dd:                     call    ind
0229 120000   F      604                             call    z_15;z_1ms
022C 434B10          605                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     606     ;;;;;;;;;;;;;;;;;;;
022F 7C60            607                             mov             r4,#60h
0231 7D00            608                             mov             r5,#00         
0233 120000   F      609                             call    iniacp;инициализация acp
0236 120000   F      610                             call    loadUS          ;us 10-7 A
                     611                             
0239 C217            612     rebyte:         clr             bitoll
023B 3095FD          613                             jnb             p1.5,$
023E 2095FD          614                             jb              p1.5,$
0241 E586            615                             mov             a,P6            ;p6.4=0
0243 54EF            616                             anl             a,#0efh
0245 F586            617                             mov             P6,a
0247 00              618                             nop
0248 00              619                             nop
                     620                                     
0249 E586            621                             mov             a,P6                    ;p6.4=1 
024B 4410            622                             orl             a,#10h
024D F586            623                             mov             P6,a                        
024F 7411            624                             mov             a,#11h
0251 120000   F      625                             call    write
                     626                             ;чтение acp
0254 120000   F      627                             call    read    
0257 F578            628                             mov     reacp+1,A       ;старший байт 
0259 120000   F      629                             call    read    
025C F579            630                             mov     reacp+2,A       ;средний байт 
025E 120000   F      631                             call    read
0261 F57A            632                             mov     reacp+3,A               ;мл байт
                     633                        ;;;;;;;;;;;
0263 7878            634                        mov          r0,#reacp+1
0265 E6              635                        mov          a,@r0
0266 20E72D          636                             jb              acc.7,znplus;
0269 D200            637                             setb    bitznak
026B 4480            638                             orl             a,#80h  ;ост содерж яч 
026D F6              639                             mov             @r0,a
                     640                                     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    11

026E 18              641     mmm:            dec             r0;,#reacp
026F 76FF            642                             mov             @r0,#0ffh
0271 802B            643                             jmp             goznak
                     644     
                     645     
0273 750A00          646     labelA:         mov             r10,#0          
0276 750B00          647                             mov             r11,#0
0279 783D            648                             mov             r0,#chkl
027B 120000   F      649                             call    chcmp
027E 7000            650                             jnz             no0key
                     651                             ;разрешить ie6,ie7       
                     652                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     653                     ;       mov             EIP2,#30h
                     654                        
0280 793D            655     no0key:         mov             r1,#chkl 
0282 120000   F      656                             call    chdec
0285 2004B1          657                             jb              bitizm,rebyte
                     658                              ;буфер 2 выдать на индикацию
                     659     ;3.11.06
                     660     ;                       mov             r0,#vichR
                     661     ;                                               mov             a,@r0
                     662     ;                                               cjne    @r0,#21h,poivich
                     663     ;                                               mov             a,bufind+7
                     664     ;                                               orl             a,#40h
                     665     ;                                               mov             bufind+7,a      
                     666     ;poivich:
0288 120000   F      667                             call    ind
028B 120000   F      668                             call    z_01s
028E 120000   F      669                             call    z_01s
0291 120000   F      670                             call    z_01s
0294 80DD            671                             jmp             labelA
                     672     
0296 C200            673     znplus:         clr     bitznak
0298 547F            674                             anl             a,#7fh;fdh                      ;+
029A F6              675                             mov             @r0,a
029B 18              676                             dec             r0;,#reacp
029C 7600            677                             mov             @r0,#00h
                     678                             
029E                 679     goznak: 
                     680     ;;;;;;;;;;;;;
029E 787A            681                             mov     r0,#reacp+3
02A0 E6              682                             mov             a,@r0
02A1 7F05            683                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02A3 C3              684     sdvig3:         clr             c
02A4 13              685                             rrc             a
02A5 DFFC            686                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02A7 FA              687                             mov             r2,a    ;сохр байт
02A8 18              688                             dec             r0              ;       reacp+2
02A9 E6              689                             mov             a,@r0
02AA C0E0            690                             push    acc
02AC C3              691                             clr             c
02AD 7F03            692                             mov             r7,#3;2
02AF C3              693     sdvig2:         clr             c
02B0 33              694                             rlc             a
02B1 DFFC            695                             djnz    r7,sdvig2 ;d12..d11      средний байт
02B3 4A              696                             orl             a,r2
02B4 F57A            697                             mov             reacp+3,a;сформ мл байт
02B6 D0E0            698                             pop             acc
                     699                             
02B8 7F05            700                             mov             r7,#5;6
02BA C3              701     sdvig1:         clr             c
02BB 13              702                             rrc             a
02BC DFFC            703                             djnz    r7,sdvig1 ;d15,d14        ср байт
02BE FA              704                             mov             r2,a   ;сохр
02BF E578            705                             mov             a,reacp+1
02C1 C0E0            706                             push    acc
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    12

                     707                     ;;      push    acc
02C3 7F03            708                             mov             r7,#3;2
02C5 C3              709     sdvig0:         clr             c
02C6 33              710                             rlc             a
02C7 DFFC            711                             djnz    r7,sdvig0 ;       d21..d16
02C9 4A              712                             orl             a,r2
02CA F579            713                             mov             reacp+2,a       ; сформ средний  байт
02CC D0E0            714                             pop             acc       ;reacp+1
                     715                             ;;;;;;;;;;;;;;
02CE 20E70B          716                             jb              acc.7,sdvm
02D1 C3              717                             clr             c
02D2 7F05            718                             mov             r7,#5;6
02D4 C3              719     sdvig4:         clr             c
02D5 13              720                             rrc             a
02D6 DFFC            721                             djnz    r7,sdvig4 ;       d23,d22
02D8 F578            722                             mov             reacp+1,a
02DA 8008            723                             jmp             readyacp;ankor;klmas
                     724     ;;;;;;;;;;;;                                    
02DC 7F05            725     sdvm:           mov             r7,#5;6
02DE D3              726     sdvig6:         setb            c
02DF 13              727                             rrc             a
02E0 DFFC            728                             djnz    r7,sdvig6 ;       d23,d22
02E2 F578            729                             mov             reacp+1,a
                     730                                                             
                     731     ; reacp..reacp+3-результат чтения асп(hex) 
                     732     ;;;;;;;;;
02E4                 733     readyacp:
02E4 7898            734                                             mov             r0,#chinkor
02E6 E6              735                             mov             a,@r0
02E7 30E702          736                             jnb             acc.7,gopart
02EA 8044            737                                     jmp             sumt2
                     738                     
02EC                 739     gopart:
02EC 789A            740                             mov             r0,#parT        ;параметр времени
02EE 793F            741                             mov             r1,#chmasN
02F0 B6013A          742                             cjne    @r0,#1,noparT1
                     743                             ;РЕЗ+РЕЗ
02F3 7877            744                             mov             r0,#reacp
02F5 120000   F      745                             call    resar2          ;reacp->r2..r5
02F8 78B6            746                             mov             r0,#summa+3;rez_A+3
02FA 120000   F      747                             call    ladd
02FD 78B3            748                             mov             r0,#summa;rez_A
02FF 120000   F      749                             call    saver2
0302 793F            750                              mov            r1,#chmasN
0304 7714            751                             mov             @r1,#20;10
0306 789B            752                             mov             r0,#chbefore
0308 B6631E          753                             cjne    @r0,#99,nobef99
                     754                             ;РЕЗ/100
030B 900000   F      755                             MOV        DPTR,#ch100 
030E 120000   F      756     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0311 120000   F      757                             call    zdiv;divide
0314 7862            758                             mov             r0,#rez_A
0316 120000   F      759                             call    saver2          ;сумма 100 отсчетов /100
0319 78C5            760                             mov             r0,#Rez_del
031B 120000   F      761                             call    saver2  
                     762                        ;;;;;
031E 78B3            763                        mov          r0,#summa
0320 120000   F      764                        call         clear4
                     765     ;                       mov             a,chmas
                     766     ;                       mov             @r1,a   ;->chmasN
0323 799B            767                             mov             r1,#chbefore
0325 7700            768                             mov             @r1,#0
0327 8048            769                             jmp             klmas           ;загр в массив скользящее ср
0329 06              770     nobef99:        inc             @r0                     ;chbefore
032A 020000   F      771                             jmp             rebyte;labelA;метка A
                     772     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    13

                     773     ;а потом уже располагаем  в скользящий массив  из n
                     774     
                     775     
                     776     
032D B6021D          777     noparT1:        cjne    @r0,#2,noparT2
                     778                             ;РЕЗ+РЕЗ
0330                 779     sumt2:
0330 7877            780                              mov            r0,#reacp
0332 120000   F      781                             call    resar2          ;reacp->r2..r5
0335 78B6            782                             mov             r0,#summa+3;rez_A+3
0337 120000   F      783                             call    ladd
033A 78B3            784                             mov             r0,#summa;rez_A
033C 120000   F      785                             call    saver2
033F 789B            786                             mov             r0,#chbefore
0341 793F            787                             mov             r1,#chmasN
0343 770A            788                             mov             @r1,#10
0345 B613E1          789                             cjne    @r0,#19,nobef99;9,nobef99
                     790                             ;РЕЗ/10
0348 900000   F      791                             MOV        DPTR,#ch20;ch10 
034B 80C1            792                             jmp             allsum
                     793                             ;;;;;;;
                     794                             
                     795     
034D B60302          796     noparT2:        cjne    @r0,#3,noparT3
0350 8003            797                             jmp             aapar
                     798     
0352 B60410          799     noparT3:        cjne    @r0,#4,noparT4
0355 7877            800     aapar:          mov             r0,#reacp
0357 120000   F      801                             call    resar2          ;reacp->r2..r5
035A 7862            802                             mov             r0,#rez_A
035C 120000   F      803                             call    saver2
035F 793F            804                              mov            r1,#chmasN
0361 770A            805                             mov             @r1,#10
                     806                     ;       mov             @r1,#10         ;n=10
0363 800C            807                             jmp             klmas
0365 7702            808     noparT4:   mov          @r1,#2          ;chmasN n=2
0367 7877            809                             mov             r0,#reacp
0369 120000   F      810                             call    resar2          ;reacp->r2..r5
036C 7862            811                             mov             r0,#rez_A
036E 120000   F      812                             call    saver2
                     813     ;загрузить А в массив из 2/10 значений
                     814     ;;;;;;;;;;;;;;;
0371                 815     klmas:           
0371 793F            816                             mov             r1,#chmasN
0373 B7021A          817                             cjne    @r1,#2,mas10
0376 900080          818                             MOV        dptr,#MASS0
0379 120000   F      819                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     820     
037C 7862            821                             mov             r0,#rez_A
037E 120000   F      822                             call    resar2          ;->r2..r5
0381 900080          823                             mov                     dptr,#MASS0
0384 120000   F      824                   call              saveIr2                 ; R2-R5 --> MAS0
                     825                     
0387 900087          826                   MOV          dptr,#MASS1+3
038A 120000   F      827                   CALL       addx
038D 020000   F      828                       jmp           endsum
0390 B70A7A          829     mas10:                  cjne    @r1,#10,mas20
0393 9000A0          830                                             mov                     dptr,#MASS8
0396 120000   F      831                     CALL            xCIKLWR         ;MASS8->MASS9
0399 90009C          832                                             mov                     dptr,#MASS7
039C 120000   F      833                     CALL            xCIKLWR         ;MASS7->MASS8
039F 900098          834                     MOV       dptr,#MASS6
03A2 120000   F      835                     CALL       xCIKLWR         ; MASS6 --> MASS7
03A5 900094          836                     MOV        dptr,#MASS5
                     837                    
03A8 120000   F      838                    CALL        xCIKLWR        ; MASS5 --> MASS6
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    14

03AB 900090          839                    MOV         dptr,#MASS4
                     840                    
03AE 120000   F      841                    CALL        xCIKLWR        ; MASS4 --> MASS5
03B1 90008C          842                             mov                     dptr,#MASS3
                     843     
03B4 120000   F      844                    CALL             xCIKLWR         ;MASS3->MASS4
03B7 900088          845                     MOV        dptr,#MASS2
                     846                    
03BA 120000   F      847                    CALL        xCIKLWR         ; MASS2 --> MASS3
03BD 900084          848                    MOV         dptr,#MASS1
                     849                     
03C0 120000   F      850                   CALL         xCIKLWR        ; MASS1 --> MASS2
03C3 900080          851                    MOV         dptr,#MASS0
                     852                   
03C6 120000   F      853                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     854     
                     855                             
03C9 7862            856                             mov             r0,#rez_A
03CB 120000   F      857                             call    resar2          ;->r2..r5
                     858                                     ;call   aform
03CE 900080          859                                     mov                     dptr,#MASS0
03D1 120000   F      860                   call              saveIr2                 ; R2-R5 --> MAS0
                     861              
03D4 900087          862                   MOV          dptr,#MASS1+3
03D7 120000   F      863                   CALL       addx
03DA 90008B          864                   MOV          dptr,#MASS2+3
03DD 120000   F      865                   CALL       addx
03E0 90008F          866                   MOV          dptr,#MASS3+3
03E3 120000   F      867                  CALL        addx
03E6 900093          868                   MOV       dptr,#MASS4+3
03E9 120000   F      869                   call       addx
03EC 900097          870                     MOV        dptr,#MASS5+3
03EF 120000   F      871                  CALL        addx
03F2 90009B          872                   MOV          dptr,#MASS6+3
03F5 120000   F      873                   CALL       addx
03F8 90009F          874                   MOV          dptr,#MASS7+3
03FB 120000   F      875                  CALL        addx
03FE 9000A3          876                  MOV        dptr,#MASS8+3
0401 120000   F      877                   call       addx
0404 9000A7          878                     MOV                     dptr,#MASS9+3
0407 120000   F      879                  call        addx
040A 020000   F      880                              jmp            endsum
                     881     
040D 9000C8          882     mas20:          mov                     dptr,#MASS18
0410 120000   F      883                     CALL            xCIKLWR         ;MASS18->MASS19
0413 9000C4          884                                             mov                     dptr,#MASS17
0416 120000   F      885                     CALL            xCIKLWR         ;MASS17->MASS18
0419 9000C0          886                     MOV       dptr,#MASS16
041C 120000   F      887                     CALL       xCIKLWR         ; MASS16 --> MASS17
041F 9000BC          888                     MOV        dptr,#MASS15
                     889                    
0422 120000   F      890                    CALL        xCIKLWR        ; MASS15 --> MASS16
0425 9000B8          891                    MOV         dptr,#MASS14
                     892                    
0428 120000   F      893                    CALL        xCIKLWR        ; MASS14 --> MASS15
042B 9000B4          894                             mov                     dptr,#MASS13
                     895     
042E 120000   F      896                    CALL             xCIKLWR         ;MASS13->MASS14
0431 9000B0          897                     MOV        dptr,#MASS12
                     898                    
0434 120000   F      899                    CALL        xCIKLWR         ; MASS12 --> MASS13
0437 9000AC          900                    MOV         dptr,#MASS11
                     901                     
043A 120000   F      902                   CALL         xCIKLWR        ; MASS11 --> MASS12
043D 9000A8          903                    MOV         dptr,#MASS10
                     904                   
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    15

0440 120000   F      905                    CALL        xCIKLWR        ; MASS10 --> MASS11
0443 9000A4          906                                      MOV       dptr,#MASS9
0446 120000   F      907                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     908     
0449 9000A0          909                                             mov                     dptr,#MASS8
044C 120000   F      910                     CALL            xCIKLWR         ;MASS8->MASS9
044F 90009C          911                                             mov                     dptr,#MASS7
0452 120000   F      912                     CALL            xCIKLWR         ;MASS7->MASS8
0455 900098          913                     MOV       dptr,#MASS6
0458 120000   F      914                     CALL       xCIKLWR         ; MASS6 --> MASS7
045B 900094          915                     MOV        dptr,#MASS5
                     916                    
045E 120000   F      917                    CALL        xCIKLWR        ; MASS5 --> MASS6
0461 900090          918                    MOV         dptr,#MASS4
                     919                    
0464 120000   F      920                    CALL        xCIKLWR        ; MASS4 --> MASS5
0467 90008C          921                             mov                     dptr,#MASS3
                     922     
046A 120000   F      923                    CALL             xCIKLWR         ;MASS3->MASS4
046D 900088          924                     MOV        dptr,#MASS2
                     925                    
0470 120000   F      926                    CALL        xCIKLWR         ; MASS2 --> MASS3
0473 900084          927                    MOV         dptr,#MASS1
                     928                     
0476 120000   F      929                   CALL         xCIKLWR        ; MASS1 --> MASS2
0479 900080          930                    MOV         dptr,#MASS0
                     931                   
047C 120000   F      932                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     933     
                     934                             
047F 7862            935                             mov             r0,#rez_A
0481 120000   F      936                             call    resar2          ;->r2..r5
                     937                                     ;call   aform
0484 900080          938                                     mov                     dptr,#MASS0
0487 120000   F      939                   call              saveIr2                 ; R2-R5 --> MAS0
                     940              
048A 900087          941                   MOV          dptr,#MASS1+3
048D 120000   F      942                   CALL       addx
0490 90008B          943                   MOV          dptr,#MASS2+3
0493 120000   F      944                   CALL       addx
0496 90008F          945                   MOV          dptr,#MASS3+3
0499 120000   F      946                  CALL        addx
049C 900093          947                   MOV       dptr,#MASS4+3
049F 120000   F      948                   call       addx
04A2 900097          949                     MOV        dptr,#MASS5+3
04A5 120000   F      950                  CALL        addx
04A8 90009B          951                   MOV          dptr,#MASS6+3
04AB 120000   F      952                   CALL       addx
04AE 90009F          953                   MOV          dptr,#MASS7+3
04B1 120000   F      954                  CALL        addx
04B4 9000A3          955                  MOV        dptr,#MASS8+3
04B7 120000   F      956                   call       addx
04BA 9000A7          957                     MOV                     dptr,#MASS9+3
04BD 120000   F      958                  call        addx
                     959     ;27
04C0 9000AB          960                                     MOV        dptr,#MASS10+3
04C3 120000   F      961                   CALL       addx
04C6 9000AF          962                                     MOV        dptr,#MASS11+3
04C9 120000   F      963                   CALL       addx
04CC 9000B3          964                   MOV          dptr,#MASS12+3
04CF 120000   F      965                   CALL       addx
04D2 9000B7          966                   MOV          dptr,#MASS13+3
04D5 120000   F      967                  CALL        addx
04D8 9000BB          968                   MOV       dptr,#MASS14+3
04DB 120000   F      969                   call       addx
04DE 9000BF          970                                     MOV        dptr,#MASS15+3
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    16

04E1 120000   F      971                     CALL     addx
04E4 9000C3          972                   MOV          dptr,#MASS16+3
04E7 120000   F      973                   CALL       addx
04EA 9000C7          974                   MOV          dptr,#MASS17+3
04ED 120000   F      975                  CALL        addx
04F0 9000CB          976                  MOV        dptr,#MASS18+3
04F3 120000   F      977                   call       addx
04F6 9000CF          978                                     MOV                     dptr,#MASS19+3
04F9 120000   F      979                  call        addx
                     980     
                     981     
                     982     
                     983             ;23.03          
04FC                 984     endsum:
04FC 786E            985                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
04FE 06              986                                     inc             @r0
04FF E6              987                                     mov             a,@r0   
0500 200105          988                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                     989                                     
0503 B53F26          990                                     cjne    a,chmasN,masx5
0506 D201            991                                     setb    bitmas                  ;массив заполнен
0508 853F6E          992     masfull:                mov             chmas,chmasN
050B 783F            993                                     mov             r0,#chmasN
050D E6              994                                     mov             a,@r0
                     995     ;masfull:
050E B40208          996                                     cjne    a,#2,nochn2
0511 900000   F      997                                     MOV        DPTR,#ch2;10 
0514 120000   F      998                                     CALL   ldc_ltemp                 ; ltemp <-- 2
0517 801D            999                                     jmp             mas5div
                    1000     
0519 B40A08         1001     nochn2:         cjne    a,#10,nochn10
051C 900000   F     1002                                                     MOV        DPTR,#ch10 
051F 120000   F     1003                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0522 8012           1004                                     jmp             mas5div
                    1005     
0524                1006     nochn10:
0524 900000   F     1007                                                     MOV        DPTR,#ch20 
0527 120000   F     1008                                     CALL   ldc_ltemp                 ; ltemp <-- 20
052A 800A           1009                                     jmp             mas5div
052C 856E0B         1010     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
052F E4             1011                                     clr     a
0530 F50A           1012                                     mov     ltemp+2,a
0532 F509           1013                                     mov     ltemp+1,a
0534 F508           1014                                     mov     ltemp,a
                    1015     
0536                1016     mas5div:
0536 120000   F     1017                                     CALL       zdiv;divide                           ; R2-R5 =
                    1018                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1019     
                    1020                             
                    1021      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1022     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1023     ;получен результат 3 байта и знак
0539 7866           1024                             mov             r0,#rez_A1
053B 120000   F     1025                             call    saver2           ;сохр среднее по массиву
                    1026     ;;8.11.06                       mov             chmasN,#0
                    1027      ;;;;;;;;;;;;
                    1028      ;;;;;;;;;;;;
053E C3             1029                             clr             c
053F 799A           1030                             mov             r1,#parT
0541 7402           1031                             mov             a,#2
0543 97             1032                             subb    a,@r1
0544 501D           1033                             jnc             ankor           ;T<3
                    1034                             ;A-=РЕЗ1                                ;T>3
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    17

0546 120402         1035                             call    altof                   ;r2..r5->float
0549 785E           1036                             mov             r0,#rez_Ame
054B 120000   F     1037                             call    saver2
                    1038                             ;;;;
054E 7890           1039                             mov             r0,#koefKp;->r8..r11
0550 EA             1040                             mov             a,r2
0551 30E702         1041                             jnb             acc.7,nminus3
0554 7894           1042                             mov             r0,#koefKm;->r8..r11
0556 120000   F     1043     nminus3:                call    resar8
0559 120203         1044                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
055C 785E           1045                             mov             r0,#rez_Ame
055E 120000   F     1046                             call    saver2
0561 8022           1047                             jmp             gotoKD
                    1048     
0563                1049     ankor:  
0563 7898           1050                             mov             r0,#chinkor
0565 E6             1051                             mov             a,@r0
0566 30E703         1052                             jnb             acc.7,nokorr
                    1053                             ;коррекция 0
0569 020000   F     1054                             jmp             kornul
056C                1055     nokorr: 
                    1056                             ;mov            r10,#00         ;       chavt
                    1057                             ;mov            r11,#00h
056C 7881           1058                             mov              r0,#chavt      
056E E6             1059                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
056F 30E750         1060                             jnb             acc.7,nonulavt;jnz              nonulavt        
0572 750A00         1061                             mov             r10,#0;1;00;02          
0575 750BC8         1062                             mov             r11,#0c8h;90h;0c8h;58h
0578 7898           1063                             mov             r0,#chinkor
057A 120000   F     1064                             call    chcmp
057D 705B           1065                             jnz             noavk
                    1066                             ;автокалибровка
057F 020000   F     1067                             jmp             autoka;noavk;
                    1068     
0582 020000   F     1069     rafterK:                jmp             afterK
                    1070     ;;;;;;;;;;
0585 C3             1071      gotoKD:                clr             c
0586 799A           1072                             mov             r1,#parT
0588 7404           1073                             mov             a,#4
058A 97             1074                             subb    a,@r1
058B 50F5           1075                             jnc             rafterK         ;T<5
                    1076                             ;A1-=A- *KD                     ;T>5
058D 120000   F     1077                             call            findkoef                                ;r2,r3-hex
0590 12046C         1078                                     call            rebyte2                         ;r2..r5- he
                             x
                    1079                                     
0593 120402         1080                                     call    altof                   ;r2..r5->float
0596 900000   F     1081                                     mov     dptr,#CHtho;100000
0599 120000   F     1082                                     call    ldc_ltemp                       ;r8..r11
059C 1202B7         1083                                     call    fldiv
059F 120000   F     1084                                     call    move28
                    1085                             
05A2 785E           1086                             mov             r0,#rez_Ame;->r2..r5   ???????????/
05A4 120000   F     1087                             call    resar2
05A7 120203         1088                                     call    flmul
05AA 120343         1089                             call    ftol                    ;float->int
05AD 7866           1090                             mov             r0,#rez_A1
05AF 120000   F     1091                             call    saver2
05B2 786A           1092                             mov             r0,#rez_A0;->r8..r11 hex
05B4 120000   F     1093                             call    resar8
05B7 120000   F     1094                             call    lsub            ;A3=A-1-A0
05BA 789C           1095                             mov             r0,#rez_A3
05BC 120000   F     1096                             call    saver2
05BF 020000   F     1097                             jmp             labelB  
                    1098      ;;;;;;;;;;; 9.11.06
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    18

05C2 789A           1099     nonulavt:        mov            r0,#parT
05C4 E6             1100                             mov             a,@r0
05C5 6401           1101                             xrl             a,#01
05C7 700C           1102                             jnz             avtdec1
05C9 7982           1103                             mov             r1,#chavt+1     ;T=1 chavt-10
05CB 120000   F     1104                             call    tenmin
05CE 7999           1105     kordec10:       mov             r1,#chinkor+1
05D0 120000   F     1106                             call    tenmin
05D3 8018           1107                             jmp             rezmul
                    1108     
05D5 7981           1109     avtdec1:        mov             r1,#chavt       
05D7 120000   F     1110                             call    chdec           ;chavt-1
                    1111     ;                       jmp             kordec1;rezmul
05DA 789A           1112     noavk:          mov             r0,#parT
05DC E6             1113                             mov             a,@r0
05DD 6401           1114                             xrl             a,#01
05DF 7007           1115                             jnz             kordec1
                    1116                             ;T=1 chinkor-10
05E1 7999           1117                     mov             r1,#chinkor+1
05E3 120000   F     1118                             call    tenmin
05E6 8005           1119                             jmp             rezmul
05E8 7998           1120     kordec1:        mov             r1,#chinkor
05EA 120000   F     1121                             call    chdec           ; chinkor-1
                    1122                        ;9.11.06
                    1123                             ;;;;;;;;;;;;;;
                    1124                             ;;;;;;;;;;;;;
                    1125     ;(РЕЗ1-АN)*K
05ED                1126     rezmul:
05ED 7866           1127                             mov             r0,#rez_A1;->r2..r5
05EF 120000   F     1128                             call    resar2
05F2 120402         1129                             call    altof   ;r2..r5->float  6.06    
05F5 7884           1130                             mov             r0,#kor0_AN;->r8..r11
05F7 120000   F     1131                             call    resar8
                    1132                             ;;call  altof   ;r2..r5->float
05FA 1201D1         1133                             call    flsub
05FD 7890           1134                             mov             r0,#koefKp;->r8..r11
05FF EA             1135                             mov             a,r2
0600 30E702         1136                             jnb             acc.7,nminus
                    1137                             ;jnb            bitznak,nminus
                    1138                     
0603 7894           1139                             mov             r0,#koefKm;->r8..r11
0605 120000   F     1140     nminus:         call    resar8
0608 120203         1141                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
                    1142                     
                    1143                     ;;;;;;;;        call    ftol                    ;float->int
060B 785E           1144                             mov             r0,#rez_Ame
060D 120000   F     1145                             call    saver2
                    1146      ;;;;;;;;;;;;;;;;;;;;;;;;;;
0610 7866           1147                                     mov             r0,#rez_A1
0612 120000   F     1148                                     call    saver2                          ;то необх для калиб
                             ровки ,goA2 работает с тим знач
                    1149      ;;;;;;;;;;;;;;;;;;;;;;;;;;
0615                1150     afterK:                 
                    1151     ;;;;;;;;;;;;;;
0615 20124B         1152                                     jb              bitklb,goA2
0618 EA             1153                                     mov             a,r2
0619 547F           1154                                     anl             a,#7fh
061B FA             1155                                     mov             r2,a
061C 900000   F     1156                                     mov     dptr,#ch_250;220;220000
061F 120000   F     1157                                     call    ldc_ltemp                       ;r8..r11=8
0622 1201D6         1158                                     call    flcmp
0625 505B           1159                                     jnc             rmo220          ;A>220000
0627 120000   F     1160                                     call            findkoef                                ;r2
                             ,r3-hex
062A 12046C         1161                                     call            rebyte2                         ;r2..r5- he
                             x
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    19

                    1162                                     
062D 120402         1163                                     call    altof                   ;r2..r5->float
0630 900000   F     1164                                     mov     dptr,#CHtho;100000
0633 120000   F     1165                                     call    ldc_ltemp                       ;r8..r11=8
0636 1202B7         1166                                     call    fldiv
0639 120000   F     1167                                     call    move28
063C 785E           1168                                     mov             r0,#rez_Ame
063E 120000   F     1169                                     call    resar2
                    1170                     
0641 120203         1171                                     call    flmul     ;A1-=A-*KD  fl
                    1172                                     
0644 120343         1173                                     call    ftol                    ;float->int
0647 7866           1174                                     mov             r0,#rez_A1
0649 120000   F     1175                                     call    saver2
064C 120402         1176                                     call    altof                   ;r2..r5->float
064F 900000   F     1177                                     mov     dptr,#ch_220;200;200000
0652 120000   F     1178                                     call    ldc_ltemp                       ;r8..r11=8
0655 1201D6         1179                                     call    flcmp
0658 5028           1180                                     jnc             rmo220          ;A>200000
065A 301806         1181                                     jnb             knizm,goA2;             bitizm,goA2     
065D 200528         1182                                     jb              bitavp,yesavp   
0660 200654         1183     noavp:                  jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0663                1184     goA2:                    ;A2=A1-
0663 7866           1185                                      mov            r0,#rez_A1
0665 120000   F     1186                                     call    resar2
0668 787B           1187                                     mov             r0,#rez_A2
066A 120000   F     1188                                     call    saver2
066D                1189     goA3A2:                  ;A3=A2-A0
066D 786A           1190                                       mov           r0,#rez_A0
066F 120000   F     1191                                     call    resar8
0672 120000   F     1192                                     call    lsub
0675 789C           1193                                     mov             r0,#rez_A3
0677 120000   F     1194                                     call    saver2
                    1195                                     ;;;;;;
067A                1196     goonin:            ;jmp         goonind;indA3;8.11.06
067A 78AC           1197                                     mov             r0,#chind
067C B60006         1198                                     cjne    @r0,#0,rnochi0
067F 020000   F     1199                                     jmp             goonind;indA3
                    1200     ;                               clr             P3.4
                    1201     ;                               nop
                    1202     ;                               nop
                    1203     ;                               setb    P3.4      ;??????????????????????/
                    1204     ;                               jmp             nop3_0
                    1205     
                    1206     ;                               jb              P3.0,nop3_0     ;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1207     ;                               mov             r0,#rez_A0              ;r2..r5->rez_A0
                    1208     ;                               call    saver2                  ;ЗАПОМНИТЬ СМЕЩЕНИЕ НУЛЯ
                    1209     ;                               jmp             rebyte          ;age2
0682 020000   F     1210      rmo220:                jmp             mo220
0685 020000   F     1211      rnochi0:               jmp             nochi0
                    1212     
                    1213     ;;;;;;;;;;;;;;;;
0688 EA             1214     yesavp:                 mov             a,r2
0689 547F           1215                                     anl             a,#7fh
068B FA             1216                                     mov             r2,a
068C 900000   F     1217                                     mov     dptr,#ch_10th;10000
068F 120000   F     1218                                     call    ldc_ltemp                       ;r8..r11=8
0692 1201D6         1219                                     call    flcmp
0695 50C9           1220                                     jnc             noavp           ;A>10000        
0697 78AE           1221                                     mov             r0,#diap                ;10-11
0699 B60902         1222                                     cjne    @r0,#9,avpgo
069C 80C2           1223                                     jmp             noavp
069E                1224     avpgo:                  
069E 06             1225                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    20

069F B60A01         1226                                     cjne    @r0,#0ah,clmasv
06A2 16             1227                                     dec             @r0
06A3                1228     clmasv:         ;сбросить массив
06A3 120000   F     1229                             call    loadUS
                    1230                             ;call   louizm
06A6 120000   F     1231                             call     clmassix
06A9 78B3           1232                                     mov             r0,#summa
06AB 120000   F     1233                                     call    clear4
06AE 786A           1234                                     mov             r0,#rez_A0
06B0 120000   F     1235                                     call    clear4
06B3 D207           1236                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
06B5 80C3           1237                                jmp     goonin
                    1238     
06B7                1239     yesvich:        ;A2=E/A1-+F
06B7 78C0           1240                                             mov             r0,#konstB
06B9 120000   F     1241                                     call    resar2
06BC 120000   F     1242                                     call    move28
06BF 7866           1243                                     mov             r0,#rez_A1
06C1 120000   F     1244                                     call    resar2                          ;HEX
                    1245                                     
06C4 120402         1246                                     call            altof                   ;r2..r5->float
06C7 EA             1247                                     mov             a,r2                    ;модуль
06C8 547F           1248                                     anl             a,#7fh
06CA FA             1249                                     mov             r2,a
06CB 120166         1250                                     call            fladd                           ;A1+B
                    1251                                     
06CE 900000   F     1252                                     mov     dptr,#CH_500;
06D1 120000   F     1253                                     call    ldc_ltemp                       ;r8..r11
06D4 1201D6         1254                                     call    flcmp
06D7 4073           1255                                     jc                      mo500R;error <500 >22000
06D9 900000   F     1256                                     mov     dptr,#CH_22T;
06DC 120000   F     1257                                     call    ldc_ltemp                       ;r8..r11
06DF 1201D6         1258                                     call    flcmp
06E2 5074           1259                                     jnc             mo500I          ;error
                    1260                                     ;;;;;;;;;;;;
06E4 120000   F     1261                                     call            move28
06E7 C008           1262                                     push            r8
06E9 C009           1263                                     push            r9
06EB C00A           1264                                     push            r10
06ED C00B           1265                                     push            r11
06EF 78BC           1266                                     mov             r0,#konstA
06F1 120000   F     1267                                     call    resar2
06F4 900000   F     1268                                     mov             dptr,#CH_B
06F7 120000   F     1269                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
06FA 120203         1270                                     call            flmul                           ;A*10-7
06FD D00B           1271                                     pop                     r11
06FF D00A           1272                                     pop                     r10
0701 D009           1273                                     pop                     r9
0703 D008           1274                                     pop                     r8
0705 1202B7         1275                                     call            fldiv                   ;результат R
0708 78C9           1276                                     mov                     r0,#rez_R
070A 120000   F     1277                                     call            saver2
070D 120343         1278                                     call            ftol                    ;float->hex
                    1279                                     ;;;;;;;;;;
0710 784F           1280                                             mov             r0,#abin
0712 120000   F     1281                                             call    saver2
                    1282     ;;;;;;;;
0715 7840           1283                                                     mov             r0,#bufind
0717                1284     age9:
0717 7620           1285                             mov             @r0,#" "          ;погасить индикатор
0719 08             1286                             inc             r0
071A B84BFA         1287                             cjne    r0,#bufind+11,age9
                    1288                                             
071D 78C9           1289                                             mov             r0,#rez_R
071F 120000   F     1290                                             call            resar2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    21

                    1291     ;;;;;;;;;;
0722 900000   F     1292                                     mov             dptr,#CH_fl
0725 120000   F     1293                                     CALL   ldc_ltemp
0728 1202B7         1294                                     call            fldiv
                    1295     
072B 78B8           1296                                     mov             r0,#work                ;степень +
072D 7600           1297                                     mov             @r0,#0
072F 78B9           1298                                     mov             r0,#work+1;степень -
0731 7600           1299                                     mov             @r0,#0
0733 900000   F     1300     compa1: mov     dptr,#ch_1;
0736 120000   F     1301                                     call    ldc_ltemp                       ;r8..r11
0739 1201D6         1302                                     call    flcmp
073C 4026           1303                                     jc              equ0            ;<1
073E 78B8           1304                                     mov             r0,#work                        ;степень +
0740 06             1305                                     inc             @r0
0741 900000   F     1306                                     mov             dptr,#ch_10;
0744 120000   F     1307                                     call    ldc_ltemp                       ;r8..r11
0747 1202B7         1308                                     call            fldiv
074A 80E7           1309                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1310                                     ;;;;;;;;;;;;;;;;;;;
074C 900000   F     1311     mo500R: mov             dptr,#teOLR
074F 120000   F     1312                               call          lotext           ;ПРОСМОТР
0752 120000   F     1313                                     call            ind
0755 020000   F     1314                                     jmp                     nobitizm
0758 900000   F     1315     mo500I: mov             dptr,#teOLI
075B 120000   F     1316                               call          lotext           ;ПРОСМОТР
075E 120000   F     1317                                     call            ind
0761 020000   F     1318                                     jmp                     nobitizm
0764                1319     equ0:           ;;;;;   call            ftol                    ;float->int
0764 78B8           1320                                     mov             r0,#work                ;степень +
0766 B60019         1321                                     cjne    @r0,#0,equ00
                    1322                                     
0769 900000   F     1323     compa2: mov     dptr,#ch_1;
076C 120000   F     1324                                     call    ldc_ltemp                       ;r8..r11
076F 1201D6         1325                                     call    flcmp
0772 500E           1326                                     jnc             equ00           ;>1
0774 78B9           1327                                     mov             r0,#work+1                      ;степень -
0776 16             1328                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0777 900000   F     1329                                     mov             dptr,#ch_10;
077A 120000   F     1330                                     call    ldc_ltemp                       ;r8..r11
077D 120203         1331                                     call            flmul
0780 80E7           1332                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1333     
                    1334     
0782                1335     equ00:          
0782 7853           1336                                                     mov             r0,#adec
0784 7952           1337                                             mov             r1,#abin+3      ;hex->10
0786 120000   F     1338                                             call    bindec
                    1339     
                    1340                                                     ;если степень полож убирать младший байт
                    1341                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1342                                                     ;число в bufind..bufind+5
0789 78B8           1343                                             mov             r0,#work
078B B60021         1344                                             cjne    @r0,#0,outr
078E 08             1345                                             inc             r0                      ;work+1
078F B6FF05         1346                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
0792 06             1347                                             inc                     @r0;!!!!!!!!!?
0793 785B           1348                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
0795 8003           1349                                             jmp                     bufr30
                    1350                                             ;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    22

0797 06             1351     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
0798 785C           1352                                                     mov             r0,#adec+9
079A 7945           1353     bufr30:         mov             r1,#bufind+5;6
079C 7F05           1354                                             mov             r7,#5;7
079E E6             1355     bufr2:                          mov             a,@r0
079F 2430           1356                                             add             a,#30h
07A1 F7             1357                                             mov             @r1,a
07A2 19             1358                                             dec             r1
07A3 18             1359                                             dec             r0
07A4 DFF8           1360                                             djnz    r7,bufr2
                    1361     
07A6 784F           1362                                             mov             r0,#abin
07A8 120000   F     1363                                             call            clear4
07AB 78B9           1364                                             mov             r0,#work+1
07AD 801C           1365                                     jmp             outr5
                    1366     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
07AF 785C           1367     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
07B1 C3             1368                                             clr             c
07B2 79B8           1369                                             mov             r1,#work
07B4 E8             1370                                             mov             a,r0
07B5 14             1371                                             dec             a                                  
                                  ;n-1
07B6 97             1372                                             subb    a,@r1
07B7 F8             1373                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
07B8 7945           1374                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
07BA 7F05           1375                                             mov             r7,#5;7
07BC E6             1376     bufr:                           mov             a,@r0
07BD 2430           1377                                             add             a,#30h
07BF F7             1378                                             mov             @r1,a
07C0 19             1379                                             dec             r1
07C1 18             1380                                             dec             r0
07C2 DFF8           1381                                             djnz    r7,bufr
                    1382     
07C4 784F           1383                                             mov             r0,#abin
07C6 120000   F     1384                                             call            clear4
07C9 78B8           1385                                     mov             r0,#work
07CB E6             1386     outr5:                  mov             a,@r0
07CC F552           1387                                             mov             abin+3,a
                    1388                                                                     ;n(hex)->abin
07CE 120000   F     1389                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
07D1 2552           1390                                             add             a,abin+3
07D3 F552           1391                                             mov             abin+3,a
07D5 7853           1392                                             mov             r0,#adec
07D7 7952           1393                                             mov             r1,#abin+3      ;hex->10
07D9 120000   F     1394                                             call    bindec
07DC 855C48         1395                                             mov             bufind+8,adec+9
07DF 855B47         1396                                             mov             bufind+7,adec+8
07E2 754966         1397                                             mov             bufind+9,#66h
07E5 020000   F     1398                                             jmp             nobitizm;       goonin;call     ind
                    1399                                             
                    1400                                     ;;;;;;;;;;;;;;;;;;;;;
                    1401     ;;;;;;;;;;;;;
                    1402     
07E8 300508         1403     mo220:             jnb          bitavp,indoll
07EB 301805         1404                                jnb          knizm,indoll;bitizm,indoll
07EE 78AE           1405                                     mov             r0,#diap
07F0 B6000B         1406                                     cjne    @r0,#0,nodi2
                    1407                                ;10-2
07F3 900000   F     1408     indoll:                 mov             dptr,#teOLL;OLL
07F6 120000   F     1409                                     call    lotext
07F9 D217           1410                                     setb    bitoll
07FB 020000   F     1411                                     jmp             goonin  
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    23

                    1412     
07FE 16             1413     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1414     
07FF B6FF01         1415                                     cjne    @r0,#0ffh,nodi9
0802 06             1416                                     inc             @r0
                    1417     
0803 120000   F     1418     nodi9:          call    loadUS
                    1419                                     ;call   louizm
                    1420                                     ;сбросить массив
0806 120000   F     1421                                     call     clmassix
0809 78B3           1422                                     mov             r0,#summa
080B 120000   F     1423                                     call    clear4
080E 786A           1424                                     mov             r0,#rez_A0
0810 120000   F     1425                                     call    clear4  
0813 D207           1426                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
0815 020000   F     1427                                jmp     goonin
                    1428     
0818 16             1429     nochi0:                 dec             @r0                     ;СТИ-1
0819 020000   F     1430                                     jmp             labelB  
                    1431     
                    1432             
                    1433     ;;;;;;;;;;;;;;;
                    1434     
081C                1435     nop3_0: ;;      ;rez_A-rez_A0
                    1436                     ;;                      mov             r0,#rez_A0
                    1437                     ;;                      call    resar8
                    1438                     ;;                      call    lsub
                    1439                     ;;                      mov             r0,#rez_A
                    1440                     ;;;                     call    saver2
                    1441      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
081C 789C           1442      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
081E 120000   F     1443                                             call    resar2
0821 900000   F     1444                                             mov             dptr,#ch100              
0824 120000   F     1445                                             call    ldc_ltemp        
0827 120000   F     1446                                             call    zdiv            ;rez_A3/100=r2..r5
                    1447                                     
082A EC             1448                                             mov             a,r4
082B 20E71F         1449                                             jb              acc.7,aless0
082E 4408           1450                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
0830 F5D3           1451                                             mov             DAC0H,a
                    1452                                                                             ;мл байт
0832 ED             1453                                             mov             a,r5
0833 F5D2           1454                                             mov             DAC0L,a
0835 801F           1455                                             jmp             moveA3;
                    1456     
0837 B70207         1457     no3parN:                        cjne    @r1,#2,no2parN
                    1458                                             ;в байт 0  записать пробел
083A 7946           1459                                             mov             r1,#bufind+6
083C 7720           1460                                             mov             @r1,#" ";0fdh;
083E 020000   F     1461                                             jmp             seeind;moveA3
                    1462     
0841                1463     no2parN:                        ;в байты 0 и 1 записать пробел
0841 7945           1464                                             mov             r1,#bufind+5
0843 7720           1465                                             mov             @r1,#" ";0fdh;" "
0845 09             1466                                             inc             r1
0846 7720           1467                                             mov             @r1,#" ";0fdh;" "
0848 020000   F     1468                                             jmp             seeind;moveA3
084B 807D           1469      rseeind:               jmp             seeind
084D F4             1470     aless0:                         cpl             a
084E 54F7           1471                                             anl             a,#0f7h         ;d11=0
0850 F5D3           1472                                             mov             DAC0H,a
                    1473                                                                             ;мл байт
0852 ED             1474                                             mov             a,r5
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    24

0853 F4             1475                                             cpl             a
0854 F5D2           1476                                             mov             DAC0L,a
0856                1477     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1478                                     
                    1479                                             
0856                1480     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1481                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1482                     ;до конца цикла измерения результат не размещать в буфере
                    1483                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1484                     ;и возврату в режим измерения
0856 20145B         1485                                             jb              bitvich,rnorvich
0859 201058         1486                                             jb              bitt2,rnorvich
085C 2017EC         1487                                             jb              bitoll,rseeind
                    1488                                             
085F 2011E9         1489                                             jb              bitmenu,rseeind
                    1490             
                    1491     ;;;;;;;;;;;;;;
0862 789C           1492                                              mov            r0,#rez_A3
0864 120000   F     1493                                             call    resar2
0867 120343         1494                                             call    ftol                    ;float->int r2..r5
                    1495     ;;;;;;;;
086A 789C           1496                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
086C 120000   F     1497                                             call    resar2
                    1498                                     
086F 120000   F     1499                                             call    maform
0872 784F           1500                                             mov             r0,#abin
0874 120000   F     1501                                             call    saver2
                    1502     ;;;;;;;;
                    1503                                             
0877 7853           1504                                             mov             r0,#adec
0879 7952           1505                                             mov             r1,#abin+3      ;hex->10
087B 120000   F     1506                                             call    bindec
                    1507                                     
087E 785C           1508                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0880 7946           1509                                             mov             r1,#bufind+6
0882 7F07           1510                                             mov             r7,#7
0884 E6             1511     bufdec:                         mov             a,@r0
0885 2430           1512                                             add             a,#30h
0887 F7             1513                                             mov             @r1,a
0888 19             1514                                             dec             r1
0889 18             1515                                             dec             r0
088A DFF8           1516                                             djnz    r7,bufdec
088C 7847           1517                                             mov             r0,#bufind+7
088E 762D           1518                                             mov             @r0,#2dh          ;-2..-9
0890 7840           1519                                             mov             r0,#bufind
0892 762B           1520                                             mov             @r0,#2bh
0894 300202         1521                                             jnb             znmat,nozzmi;bitznak,nozzmi
0897 762D           1522                                             mov             @r0,#2dh
0899 79AE           1523     nozzmi:                         mov             r1,#diap
089B 7848           1524                                             mov             r0,#bufind+8
089D E7             1525                                             mov             a,@r1
089E B40808         1526                                             cjne    a,#8,nodi8
08A1 7630           1527                                             mov             @r0,#30h                 ;10-10
08A3 18             1528                                             dec             r0
08A4 7663           1529                                             mov             @r0,#63h;31h
08A6 08             1530                                             inc             r0
08A7 8013           1531                                             jmp             seegoon
08A9 B4090D         1532     nodi8:                          cjne    a,#9,nodis9
                    1533                                     
08AC 7631           1534                                             mov             @r0,#31h           ;10-11
08AE 18             1535                                             dec             r0
08AF 7663           1536                                             mov             @r0,#63h;31h
                    1537                                     
08B1 08             1538                                             inc             r0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    25

08B2 8008           1539                                             jmp             seegoon
                    1540     
08B4 8072           1541     rnorvich:               jmp             norvich
08B6 020000   F     1542     rno3parN:               jmp             no3parN
                    1543     
08B9 2432           1544     nodis9:                         add             a,#32h
08BB F6             1545                                             mov             @r0,a;#37h;"T";
08BC 08             1546     seegoon:                        inc             r0
08BD 7641           1547                                             mov             @r0,#"A";"E";
08BF 08             1548                                             inc             r0
08C0 7600           1549                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
08C2 08             1550                                             inc             r0;             mov             buf
                             ind+11
08C3 76D0           1551                                             mov             @r0,#0d0h               ;bufind+11.
                             4 точка после первой цифры
                    1552                                             
                    1553     ;;;;;;;;;;;;;;;
                    1554     ;;;;;;goonind:
08C5 79AF           1555                                             mov             r1,#parN        ; ??????
08C7 B703EC         1556                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1557                                     
                    1558             
08CA                1559     seeind:                         ;;;;;;;;;;;;;
08CA 784A           1560                                             mov             r0,#bufind+10
08CC E6             1561                                             mov             a,@r0
08CD 300F03         1562                                             jnb             bitnul,nnnul
08D0 4408           1563                                             orl             a,#08h
08D2 F6             1564                                             mov             @r0,a
08D3 799A           1565      nnnul:                         mov             r1,#parT
08D5 B70304         1566                                             cjne    @r1,#3,nsec01
08D8 4410           1567                                             orl             a,#10h
08DA 800C           1568                                             jmp             nsec10   ;0,1s
08DC B70204         1569      nsec01:                        cjne    @r1,#2,nsec1
08DF 4420           1570                                             orl             a,#20h    ;1s
08E1 8005           1571                                             jmp             nsec10
08E3 B70102         1572     nsec1:                          cjne    @r1,#1,nsec10
08E6 4440           1573                                             orl             a,#40h
                    1574     
                    1575     ;;;;;;;;;;;;;;;;
08E8 F6             1576     nsec10:                         mov             @r0,a
08E9 300504         1577                                             jnb             bitavp,nobavp
08EC 4404           1578                                             orl             a,#04           ;bufind+10.2
08EE F6             1579                                             mov             @r0,a
08EF F6             1580                                             mov             @r0,a   
08F0 301803         1581     nobavp:                    jnb          knizm,nobitizm
08F3 4402           1582                                             orl             a,#02
08F5 F6             1583                                              mov            @r0,a
08F6                1584     nobitizm:                       
08F6 301A07         1585                                             jnb             bitakt,notakt
08F9 C21A           1586                                             clr             bitakt
08FB 534AFE         1587                                             anl             bufind+10,#0feh
08FE 8005           1588                                             jmp             taktind
0900 D21A           1589     notakt:                         setb    bitakt
0902 434A01         1590                                             orl             bufind+10,#01                      
                                          
0905                1591     taktind:                
                    1592     ;;;;;;;;;
0905 301517         1593                                             jnb             biteizm,yesind
0908 79B1           1594                                             mov             r1,#vichR
090A 7848           1595                                             mov             r0,#bufind+8
090C B72107         1596                                             cjne    @r1,#21h,test9i
090F 7631           1597                                             mov             @r0,#31h;11A
0911 18             1598                                             dec             r0
0912 7663           1599                                             mov             @r0,#63h
0914 8009           1600                                             jmp             yesind
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    26

0916 B72204         1601     test9i:         cjne    @r1,#22h,test7i
0919 7639           1602                                             mov             @r0,#39h;09A
091B 8002           1603                                             jmp             yesind
091D 7637           1604     test7i:         mov             @r0,#37h;07A
                    1605                                     
                    1606     ;;;;;;;;;
091F                1607     yesind:         
091F 301203         1608                                             jnb             bitklb,noklb
0922 434A80         1609                                             orl             bufind+10,#80h; on kmp
0925 120000   F     1610     noklb:          call    ind        ;пп выдачи на индикатор
0928                1611     norvich: 
0928 789A           1612                                     mov             r0,# parT
092A 79AC           1613                                             mov             r1,#chind
092C B60177         1614                                             cjne    @r0,#1,rnot1in
092F                1615     labelB:                    ;;;;;;;;;;;
                    1616                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
092F 789F           1617                                                     mov     r0,#rez_A3+3
                    1618                             ;;;;;;;;
0931 79BB           1619                             mov             r1,#work+3
0933 E6             1620                             mov             a,@r0
0934 7F07           1621                             mov             r7,#7;кол сдв вправо
0936 C3             1622     dvig3:          clr             c
0937 13             1623                             rrc             a
0938 DFFC           1624                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
093A FA             1625                             mov             r2,a    ;сохр байт
093B 18             1626                             dec             r0              ;rez_A3+2
093C E6             1627                             mov             a,@r0
093D C0E0           1628                             push    acc
093F C3             1629                             clr             c
0940 7F01           1630                             mov             r7,#1
0942 C3             1631     dvig2:          clr             c
0943 33             1632                             rlc             a
0944 DFFC           1633                             djnz    r7,dvig2 ;d12..d11       средний байт
0946 4A             1634                             orl             a,r2
0947 F7             1635                             mov             @r1,a;сформ мл байт
0948 19             1636                             dec             r1
0949 D0E0           1637                             pop             acc
                    1638                             
094B 7F07           1639                             mov             r7,#7
094D C3             1640     dvig1:          clr             c
094E 13             1641                             rrc             a
094F DFFC           1642                             djnz    r7,dvig1 ;d18     ср байт
0951 FA             1643                             mov             r2,a   ;сохр
0952 18             1644                             dec             r0
0953 E6             1645                             mov             a,@r0 ;rez_A3+1
0954 C0E0           1646                             push    acc
                    1647                     
0956 7F01           1648                             mov             r7,#1
0958 C3             1649     dvig0:          clr             c
0959 33             1650                             rlc             a
095A DFFC           1651                             djnz    r7,dvig0 ;        d21..d16
095C 4A             1652                             orl             a,r2
095D F7             1653                             mov             @r1,a   ; сформ средний  байт
095E 19             1654                             dec             r1
095F D0E0           1655                             pop             acc       ;rez_A3+1
                    1656                             ;;;;;;;;;;;;;;
                    1657     ;                       jb              acc.7,dvm
0961 C3             1658                             clr             c
0962 7F07           1659                             mov             r7,#7
0964 C3             1660     dvig4:          clr             c
0965 13             1661                             rrc             a
0966 DFFC           1662                             djnz    r7,dvig4 ;        d22
0968 FA             1663                             mov             r2,a   ;сохр
0969 18             1664                             dec             r0;     rez_A3
096A E6             1665                             mov             a,@r0
                    1666                             ;;;;;
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    27

096B 7F01           1667                             mov             r7,#1
096D C3             1668     vig0:           clr             c
096E 33             1669                             rlc             a
096F DFFC           1670                             djnz    r7,vig0 ;         d24..d30
0971 4A             1671                             orl             a,r2
0972 F7             1672                             mov             @r1,a   ; сформ   байт
0973 19             1673                             dec             r1
0974 E6             1674                             mov             a,@r0
                    1675                             ;;;;;
0975 20E709         1676                             jb              acc.7,dvm
0978 C3             1677                             clr             c
0979 7F07           1678                             mov             r7,#7
097B C3             1679     vig4:           clr             c
097C 13             1680                             rrc             a
097D DFFC           1681                             djnz    r7,vig4 ;         d
097F 8006           1682                             jmp             endsdv
                    1683     ;;;;;;;;;;;;                                    
0981 7F07           1684     dvm:            mov             r7,#7
0983 D3             1685     dvig6:          setb            c
0984 13             1686                             rrc             a
0985 DFFC           1687                             djnz    r7,dvig6 ;        d31
0987 F7             1688     endsdv:         mov             @r1,a
                    1689                                                             
                    1690      ;->work   
                    1691                             
0988 900000   F     1692                             mov             dptr,#chzap
098B 120000   F     1693                             call     ldc_long
098E 78BB           1694                              mov            r0,#work+3
0990 120000   F     1695                             call    ladd
0993 ED             1696                             mov             a,r5
0994 F5D5           1697                             mov             DAC1L,a
                    1698                             
0996 EC             1699                             mov             a,r4
0997 F5D6           1700                             mov             DAC1H,a
                    1701     
                    1702                                             ;;;;;;;;;;
0999 78AD           1703                                             mov             r0,#chbuf         ;T=1
099B B60032         1704                                             cjne    @r0,#0,nobuf0
099E 200907         1705                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
09A1 200A06         1706                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
09A4 801A           1707                                             jmp             gocikle
09A6 802B           1708     rnot1in:                jmp             not1in
09A8                1709     yesprd: ;передать   A3 в буфер
09A8 8000           1710                                             jmp             goonT
09AA                1711     yesbuf: ;записать   A3 в буфер
09AA 789A           1712     goonT:                          mov             r0,#parT
09AC 79AD           1713                                             mov             r1,#chbuf
09AE B60102         1714                                             cjne    @r0,#1,nott1
                    1715                                     ;       mov             @r1,#
09B1 800D           1716                                             jmp             gocikle
                    1717     
09B3 B60502         1718     nott1:                          cjne    @r0,#5,nott5
                    1719     
09B6 8008           1720                                             jmp             gocikle
                    1721     
09B8 C3             1722     nott5:           clr            c
09B9 799A           1723                             mov             r1,#parT
09BB 7404           1724                             mov             a,#4
09BD 97             1725                             subb    a,@r1
09BE 500E           1726                             jnc             yestt5          ;T<5
09C0 300708         1727     gocikle:        jnb             bitzus,nofz;bitbuf,nofz                                 
09C3 120000   F     1728                             call    z_05s    ;0,5c
09C6 120000   F     1729                             call    z_05s    ;0,5c
09C9 C207           1730                             clr     bitzus;bitbuf бит задержки засылки us
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    28

09CB 020000   F     1731     nofz:           jmp     labelA;rebyte
                    1732     
                    1733     
09CE 80F0           1734     yestt5:         jmp             gocikle
                    1735     
09D0 16             1736     nobuf0:                         dec             @r0
09D1 80ED           1737                                             jmp             gocikle
                    1738     
                    1739     
09D3 B60205         1740     not1in:                         cjne    @r0,#2,not2in
09D6 7701           1741                                             mov             @r1,#1           ;T=2
09D8 020000   F     1742                                             jmp     labelB
                    1743     
09DB B60305         1744     not2in:                         cjne    @r0,#3,not3in
09DE 7709           1745                                             mov             @r1,#9          ;T=3
09E0 020000   F     1746                                             jmp     labelB
09E3 7713           1747     not3in:                         mov             @r1,#19
09E5 020000   F     1748                                             jmp     labelB
                    1749     
                    1750     
                    1751     ;;;;;;;;;;;3.11.06
                    1752     
                    1753     ;;коррекция 0
09E8 7883           1754     KORnul:         mov             r0,#chdel
09EA B60008         1755                             cjne    @r0,#0,nonuldel
                    1756                                     
                    1757                     ;       mov             a,P5       ;p5.3=1
                    1758                     ;       orl             a,#08
                    1759                     ;       mov             P5,a
                    1760                     ;       nop
                    1761                     ;       nop
                    1762                                     
                    1763                     ;       mov             a,P5              ;p5.0=0
                    1764                     ;       anl             a,#0feh
                    1765                     ;       mov             P5,a
                    1766             
09ED 900000   F     1767                             mov             dptr,#kor0us
09F0 120000   F     1768                             call    lospus          ;упр слово коррекции 0
09F3 8013           1769                             jmp             chdelmo
                    1770     
09F5                1771     nonuldel:       ;cjne   @r0,#7,no4del
09F5 B60316         1772                                                     cjne    @r0,#3,no4del
                    1773                             ;рез ->AN
09F8 7862           1774                             mov             r0,#rez_A;->r2..r5
09FA 120000   F     1775                             call    resar2
                    1776                     ;       mov             a,reacp         ;r2..r5 &&&&&&&&&&&
                    1777                     ;               mov             r2,a
                    1778                     ;               mov             a,reacp+1
                    1779                     ;               mov             r3,a
                    1780                     ;               mov             a,reacp+2
                    1781                     ;               mov             r4,a
                    1782                     ;               mov             a,reacp+3
                    1783                     ;               mov             r5,a
                    1784                                     ;;;;;;;;;;
09FD 120402         1785                             call    altof           ;r2..r5->float
0A00 7884           1786                             mov             r0,#kor0_AN;->kor0_AN
0A02 120000   F     1787                             call    saver2
                    1788                                     
                    1789                     ;       mov             a,P5            ;p5.0=1
                    1790                     ;       orl             a,#01
                    1791                     ;       mov             P5,a
                    1792                     ;       nop
                    1793                     ;       nop
                    1794                                     
                    1795                     ;       mov             a,P5                    ;p5.3=0 
                    1796                     ;       anl             a,#0f7h
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    29

                    1797                     ;       mov             P5,a                    
0A05 120000   F     1798                             call    loadUS          ;восстан исходное упр слово
0A08 7883           1799     chdelmo:        mov             r0,#chdel
0A0A 06             1800                             inc             @r0             ;chdel+1
0A0B 020000   F     1801                             jmp              rebyte
                    1802     
0A0E                1803     no4del:         ;cjne   @r0,#14,chdelmo
0A0E B606F7         1804                                             cjne    @r0,#6,chdelmo
0A11 7600           1805                             mov             @r0,#0          ;chdel
0A13 7898           1806                             mov             r0,#chinkor
0A15 7600           1807                             mov             @r0,#00;1;00;02;600;
0A17 08             1808                             inc             r0
0A18 76C8           1809                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0A1A 120000   F     1810                             call    clmassix;сбросить массив скольз среднего
0A1D 020000   F     1811                             jmp              rebyte
                    1812     
                    1813     ;автокалибровка
0A20                1814     autoka:  ;;  mov                r0,#chavt
                    1815                      ;;  call               chcmp
                    1816                      ;;  jz         nulavt
                    1817                     ;;   mov                r1,#chavt
                    1818                     ;;   call               chdec;chavt-1
                    1819                      ;; jmp         rebyte
0A20                1820     nulavt:  ;;;;;
0A20 7883           1821                             mov             r0,#chdel
0A22 B6000E         1822                             cjne    @r0,#0,nndelch
0A25 E585           1823                             mov   a,p5
0A27 4404           1824                             orl             a,#04              ;p5.2=1
0A29 00             1825                             nop
0A2A 00             1826                             nop
0A2B 543F           1827                             anl             a,#3fh          ;p5.6,p5.7=0
0A2D F585           1828                             mov   p5,a
0A2F 06             1829                             inc             @r0
0A30 020000   F     1830                             jmp              rebyte
                    1831     
0A33 B6033D         1832     nndelch:        cjne    @r0,#3,n4delch
                    1833                             ;pez->A+
                    1834                             ;K+=000/(A+-AN)
                    1835                             ;mov            r0,#rez_A;->r2..r5
                    1836                             ;call   resar2
0A36 E577           1837                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0A38 FA             1838                                     mov             r2,a
0A39 E578           1839                                     mov             a,reacp+1
0A3B FB             1840                                     mov             r3,a
0A3C E579           1841                                     mov             a,reacp+2
0A3E FC             1842                                     mov             r4,a
0A3F E57A           1843                                     mov             a,reacp+3
0A41 FD             1844                                     mov             r5,a
                    1845                                     ;;;;;;;;;;;;;;;
0A42 120402         1846                             call    altof                   ;r2..r5->float
0A45 7888           1847                             mov             r0,#rezAp;->rezAp
0A47 120000   F     1848                             call    saver2                          
0A4A 7884           1849                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0A4C 120000   F     1850                             call    resar8                          
0A4F 1201D1         1851                             call    flsub           ; r2..r5(A+-AN)
0A52 120000   F     1852                             call    move28     ;r2..r5->r8..r11
0A55 900000   F     1853                             mov             dptr,#CH2tho;000->r2..r5 float
0A58 120000   F     1854                             call    ldc_long                
0A5B 1202B7         1855                             call    fldiv
0A5E EA             1856                             mov             a,r2
0A5F 547F           1857                             anl             a,#7fh
0A61 FA             1858                             mov             r2,a
0A62 7890           1859                             mov             r0,#koefKp;->koefKp
0A64 120000   F     1860                             call    saver2
                    1861                       
                    1862                     ;       anl             P5,#0feh                ;p5.0=0 
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    30

0A67 E585           1863                     mov             a,P5
0A69 543B           1864                             anl             a,#3bh;acp-
0A6B F585           1865                             mov             P5,a
0A6D 7883           1866                             mov             r0,#chdel
0A6F 06             1867                             inc             @r0                       ;ch+1
0A70 020000   F     1868                             jmp             rebyte
                    1869     
0A73 B6063A         1870     n4delch:        cjne    @r0,#6,n8delch
                    1871                             ; pez->A-
                    1872                             ;K-=000/(A--AN)
                    1873                     ;       mov     r0,#rez_A;->r2..r5
                    1874                     ;       call    resar2
0A76 E577           1875                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0A78 FA             1876                                     mov             r2,a
0A79 E578           1877                                     mov             a,reacp+1
0A7B FB             1878                                     mov             r3,a
0A7C E579           1879                                     mov             a,reacp+2
0A7E FC             1880                                     mov             r4,a
0A7F E57A           1881                                     mov             a,reacp+3
0A81 FD             1882                                     mov             r5,a
                    1883                                     ;;;;;;;;;;;;;;;
0A82 120402         1884                             call    altof                   ;r2..r5->float
0A85 788C           1885                             mov             r0,#rezAm;->rezAm
0A87 120000   F     1886                             call    saver2                          
0A8A 7884           1887                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0A8C 120000   F     1888                             call    resar8                          
0A8F 1201D1         1889                             call    flsub                   ; r2..r5(A--AN)
0A92 120000   F     1890                             call    move28                  ;r2..r5->r8..r11
0A95 900000   F     1891                             mov             dptr,#CH2tho    ;000->r2..r5 float
0A98 120000   F     1892                             call    ldc_long                
0A9B 1202B7         1893                             call    fldiv
0A9E EA             1894                             mov             a,r2
0A9F 547F           1895                             anl             a,#7fh
0AA1 FA             1896                             mov             r2,a
0AA2 7894           1897                             mov             r0,#koefKm;->koefKm
0AA4 120000   F     1898                             call    saver2
                    1899                        
0AA7 120000   F     1900                             call    loadus
0AAA 7883           1901                             mov             r0,#chdel
0AAC 06             1902                             inc             @r0                       ;ch+1
0AAD 020000   F     1903                        jmp    rebyte
                    1904     
0AB0 B6090F         1905     n8delch:        cjne    @r0,#9,n12delch
0AB3 7600           1906                             mov             @r0,#0
0AB5 7981           1907                             mov             r1,#chavt
0AB7 770C           1908                             mov             @r1,#0ch;6;1;
0AB9 09             1909                             inc             r1
0ABA 7780           1910                             mov             @r1,#80h;40h;
0ABC 120000   F     1911                             call   clmassix     ;сбросить массив среднего
0ABF 020000   F     1912                             jmp             rebyte
0AC2 06             1913     n12delch:       inc             @r0
0AC3 020000   F     1914                             jmp             rebyte
                    1915     
                    1916     ;in-r1-count
0AC6                1917     chdec:          ;mov            r1,#chavt               ;chavt-1
0AC6 E7             1918                             mov             a,@r1
0AC7 FC             1919                             mov             r4,a
0AC8 09             1920                             inc             r1
0AC9 E7             1921                             mov             a,@r1
0ACA FD             1922                             mov             r5,a
0ACB C202           1923                             clr             rr2
0ACD C203           1924                             clr             rr3
0ACF 900000   F     1925                             mov             dptr,#ch1        
0AD2 120000   F     1926                             call    ldc_ltemp
0AD5 120000   F     1927                             call    lsub
0AD8 ED             1928                             mov             a,r5
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    31

0AD9 F7             1929                             mov             @r1,a
0ADA 19             1930                             dec             r1
0ADB EC             1931                             mov             a,r4
0ADC F7             1932                             mov             @r1,a
0ADD 22             1933                             ret      
                    1934     
                    1935     
                    1936     
                    1937     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
0ADE 75E700         1938      ind:   mov             EIE2,#00H;mov   IE,#00h
0AE1 120000   F     1939                     call    mign
0AE4 7840           1940                      mov            r0,#bufind;+11
0AE6 7F0C           1941                      mov            r7,#12
0AE8 C286           1942      nexin: clr             p0.6
0AEA E6             1943                     mov             a,@r0
0AEB F59B           1944                     mov             SPI0DAT,a
0AED 20FBFD         1945                     jb              TXBSY,$
0AF0 D286           1946                     setb    p0.6
0AF2 120000   F     1947                     call    z_9             ;25mks
0AF5 08             1948                     inc             r0;dec          r0
0AF6 DFF0           1949                     djnz    r7,nexin
0AF8 75E730         1950                     mov             EIE2,#30H;mov   IE,#80h
0AFB 22             1951                ret
                    1952     
                    1953     
0AFC 7A08           1954     zapadc:   mov R2,#8
0AFE D297           1955     sdv:      setb P1.7
0B00 33             1956               rlc A
0B01 9296           1957                     mov P1.6,C
0B03 120000   F     1958                     call tim2
                    1959                                     
0B06 C297           1960                     clr P1.7
0B08 120000   F     1961                     call tim2
0B0B DAF1           1962                     djnz R2,sdv
0B0D D296           1963                     setb P1.6
0B0F 22             1964                     ret
                    1965     
0B10 7A08           1966     chtadc:   mov R2,#8
0B12 D297           1967     sdv1:     setb P1.7
0B14 120000   F     1968               call tim2
0B17 C297           1969                     clr P1.7
0B19 A296           1970                     mov C,P1.6
0B1B 33             1971                     rlc A
0B1C 120000   F     1972                     call tim2
0B1F DAF1           1973                     djnz R2,sdv1
0B21 22             1974                     ret
                    1975     
0B22 7E30           1976     tim:      mov R6,#30h;38h
0B24 DEFE           1977     tim1:     djnz R6,tim1
0B26 22             1978               ret
                    1979               
0B27 7E10           1980     tim2:     mov R6,#10h;14h
0B29 DEFE           1981     tim3:     djnz R6,tim3
0B2B 22             1982               ret
                    1983     
                    1984     ;запись из acc
0B2C C3             1985     write_x1: clr   c
0B2D                1986     writeD_x1:
0B2D 92B1           1987                       mov P3.1,c        ;запись
0B2F F5A0           1988               mov P2,A
0B31 D2B3           1989                       setb P3.3
0B33 120000   F     1990                       call z_5
0B36 C2B3           1991                       clr P3.3
0B38 75A0FF         1992                       mov P2,#0FFh
0B3B 22             1993                       ret
                    1994     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    32

                    1995     ;чтение в acc
0B3C C3             1996     read_x2:  clr   c  
0B3D 92B1           1997               mov P3.1,c        ;чтение
0B3F D2B2           1998               setb P3.2
0B41 D2B3           1999                       setb P3.3
0B43 120000   F     2000                     call z_5
0B46 E5A0           2001                       mov A,P2
0B48 C2B3           2002                       clr P3.3
0B4A C2B2           2003                       clr P3.2
0B4C 22             2004                       ret
                    2005     
                    2006     
0B4D 120000   F     2007     loop:     call read_x2;x2    ;ожидание флага готовности
0B50 20E7FA         2008                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
0B53 22             2009                        ret           ;возврат, если бит А(7)<>1
                    2010                                      
                    2011                                        
                    2012     
                    2013     
                    2014     
                    2015     ;dptr+4-приемник
                    2016     ;dptr-источник
                    2017     ;r7-кол байт  
0B54                2018     xCIKLWR:
0B54 7F04           2019                             mov             r7,#4   
0B56 E0             2020     lwrx:   movx    a,@dptr
0B57 C083           2021                             push    dph
0B59 C082           2022                             push    dpl
0B5B A3             2023                             inc             dptr
0B5C A3             2024                             inc             dptr
0B5D A3             2025                             inc             dptr
0B5E A3             2026                             inc             dptr
0B5F F0             2027                             movx    @dptr,a
0B60 D082           2028                             pop             dpl
0B62 D083           2029                             pop             dph
                    2030                             
0B64 A3             2031                             inc             dptr
0B65 DFEF           2032                             djnz    r7,lwrx
0B67 22             2033                             ret
                    2034     ;r2..r5->@dptr..@dptr+3                         
0B68 EA             2035     saveIr2:                mov     a,r2
0B69 F0             2036                                             movx    @dptr,a
0B6A A3             2037                                             inc     dptr
0B6B EB             2038                                             mov     a,r3
0B6C F0             2039                                             movx    @dptr,a
0B6D A3             2040                                             inc     dptr
0B6E EC             2041                                             mov     a,r4
0B6F F0             2042                                             movx    @dptr,a
0B70 A3             2043                                             inc     dptr
0B71 ED             2044                                             mov     a,r5
0B72 F0             2045                                             movx    @dptr,a
0B73 22             2046                                             ret
                    2047     ;r2..r5-> @r0..@r0+3
                    2048     
0B74 EA             2049     saver2:         mov     a,r2
0B75 F6             2050                                             mov     @r0,a
0B76 08             2051                                             inc     r0
0B77 EB             2052                                             mov     a,r3
0B78 F6             2053                                             mov     @r0,a
0B79 08             2054                                             inc     r0
0B7A EC             2055                                             mov     a,r4
0B7B F6             2056                                             mov     @r0,a
0B7C 08             2057                                             inc     r0
0B7D ED             2058                                             mov     a,r5
0B7E F6             2059                                             mov     @r0,a
0B7F 22             2060                                             ret 
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    33

0B80 7F50           2061     clmassix:       mov                     r7,#50h;28h
0B82 900080         2062                             mov     dptr,#MASS0        ;забить массив A нулями
0B85 7400           2063     clmax:          mov          a,#00h
0B87 F0             2064                  movx    @dptr,a
0B88 A3             2065                  inc     dptr
0B89 DFFA           2066                 djnz                r7,clmax                
0B8B F56E           2067                  mov     chmas,a
0B8D C201           2068                  clr     bitmas
0B8F 22             2069                 ret
                    2070     
                    2071     ;r1-яЁшхьшъ
                    2072     ;r0-шёЄюўшъ
                    2073     ;r7-ъюы срщЄ  
0B90                2074     CIKLWR:
0B90 7F04           2075                             mov             r7,#4   
0B92 E6             2076     lwr:    mov     a,@r0
0B93 F7             2077                             mov     @r1,a
0B94 09             2078                             inc             r1
0B95 08             2079                             inc             r0
0B96 DFFA           2080                             djnz    r7,lwr
0B98 22             2081                             ret     
                    2082     ;r2..r5-> @dptr..@dptr+3
                    2083     
0B99 120000   F     2084     zmul:   call    maform
0B9C 120000   F     2085                     call    lmul
0B9F 120000   F     2086                     call    bform
0BA2 22             2087                     ret
                    2088     
0BA3 120000   F     2089     zdiv:   call    maform
0BA6 120000   F     2090                     call    divide
0BA9 120000   F     2091                     call    bform
0BAC 22             2092                     ret
                    2093     
0BAD EA             2094     maform: mov a,r2
0BAE 33             2095             rlc a
0BAF 5006           2096             jnc             fo1m
0BB1 D202           2097                     setb            znmat
0BB3 120000   F     2098                     call   form4
0BB6 22             2099                     ret
0BB7 C202           2100     fo1m:   clr             znmat
0BB9 22             2101                     ret
                    2102     
0BBA 300203         2103     bform:  jnb             znmat,fo2m
0BBD 120000   F     2104                     call    form4
0BC0 22             2105     fo2m:   ret
                    2106       
                    2107     ;r2..r5 яхЁхтхёЄш т фюя ъюф
0BC1 ED             2108     form4:          mov a,r5
0BC2 F4             2109             cpl a
0BC3 2401           2110             add a,#1
0BC5 FD             2111             mov r5,a
0BC6 EC             2112             mov a,r4
0BC7 F4             2113             cpl a
0BC8 3400           2114             addc    a,#0
0BCA FC             2115             mov r4,a
0BCB EB             2116             mov a,r3
0BCC F4             2117                 cpl a
0BCD 3400           2118             addc    a,#0
0BCF FB             2119             mov r3,a
0BD0 EA             2120             mov a,r2
0BD1 F4             2121             cpl a
0BD2 3400           2122             addc    a,#0
0BD4 FA             2123             mov r2,a
0BD5 22             2124             ret
                    2125     
0BD6 120000   F     2126     zcmp:   call            maform
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    34

0BD9 120000   F     2127                     call            lcmp
0BDC C0D0           2128                     push            psw
0BDE 120000   F     2129                     call    bform
0BE1 D0D0           2130                     pop             psw
0BE3 22             2131                     ret
                    2132     
                    2133     
                    2134     ;@r0..@r0+3->r8..r11
                    2135     
0BE4 E6             2136     resar8: mov     a,@r0
0BE5 F508           2137                     mov     ltemp,a
0BE7 08             2138                     inc     r0
0BE8 E6             2139                     mov     a,@r0
0BE9 F509           2140                     mov     ltemp+1,a
0BEB 08             2141                     inc     r0
0BEC E6             2142                     mov     a,@r0
0BED F50A           2143                     mov     ltemp+2,a
0BEF 08             2144                     inc     r0
0BF0 E6             2145                     mov     a,@r0
0BF1 F50B           2146                     mov     ltemp+3,a
0BF3 22             2147                     ret
                    2148     
                    2149     ;
                    2150     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                    2151     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                    2152     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                    2153     ;r2 a    ўшёыю 180
                    2154     ;00 b4
                    2155     ;т_ї- mabin..mabin+2
                    2156     ;     80 01 00
                    2157      
0BF4 C8             2158     cond:   xch     a,r0    
0BF5 F9             2159                     mov     r1,a
0BF6 C8             2160                     xch     a,r0
0BF7 7C03           2161                     mov     r4,#03
0BF9 7700           2162     dcoa:   mov     @r1,#00
0BFB 09             2163                     inc     r1
0BFC DCFB           2164                     djnz    r4,dcoa
0BFE 7B10           2165                     mov     r3,#10h
0C00 C3             2166     dcob:   clr     c
0C01 33             2167                     rlc     a
0C02 CA             2168                     xch     a,r2
0C03 33             2169                     rlc     a
0C04 CA             2170                     xch     a,r2
0C05 C8             2171                     xch     a,r0
0C06 F9             2172                     mov     r1,a
0C07 C8             2173                     xch     a,r0
0C08 7C03           2174                     mov     r4,#03
0C0A FD             2175                     mov     r5,a
0C0B E7             2176     dcoc:   mov     a,@r1 
0C0C 37             2177                     addc    a,@r1
0C0D D4             2178                     da      a
0C0E F7             2179                     mov     @r1,a
0C0F 09             2180                     inc     r1
0C10 DCF9           2181                     djnz    r4,dcoc
0C12 ED             2182                     mov     a,r5
0C13 4003           2183                     jc      dcod
0C15 DBE9           2184                     djnz    r3,dcob
0C17 C3             2185                     clr     c
0C18 00             2186     dcod:   nop
0C19 22             2187                     ret
                    2188     
0C1A 8A08           2189     move28: mov     ltemp,r2                        ;r2..r5->ltemp
0C1C 850309         2190                     mov     ltemp+1,3
0C1F 85040A         2191                     mov     ltemp+2,4
0C22 85050B         2192                     mov     ltemp+3,5
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    35

0C25 22             2193                     ret
                    2194     
                    2195     ;@r0..@r0+3->r2..r5
                    2196     
0C26 E6             2197     resar2: mov     a,@r0
0C27 FA             2198                     mov     r2,a
0C28 08             2199                     inc     r0
0C29 E6             2200                     mov     a,@r0
0C2A FB             2201                     mov     r3,a
0C2B 08             2202                     inc     r0
0C2C E6             2203                     mov     a,@r0
0C2D FC             2204                     mov     r4,a
0C2E 08             2205                     inc     r0
0C2F E6             2206                     mov     a,@r0
0C30 FD             2207                     mov     r5,a
0C31 22             2208                     ret
                    2209     
                    2210     ;25mkc !!!!!!!!!!!!!!!1
0C32 7B4B           2211     z_9:      mov R3,#4Bh      ;загрузка числа
0C34 DBFE           2212                    djnz R3,$
0C36 22             2213               ret
                    2214     
                    2215     ;запись   передаваемый байт в acc
                    2216     ;передача байта послед кодом старшими разрядами  вперед
0C37 7A08           2217     write:     mov R2,#8
0C39 C3             2218                             clr  c  
0C3A C297           2219     wr1:            clr             p1.7;P1.2
0C3C 00             2220                         nop 
0C3D 33             2221                             rlc A
0C3E 9296           2222                             mov P1.6,C;P1.1,C
0C40 120000   F     2223                        call tim2
0C43 D297           2224                        setb P1.7;P1.2
0C45 120000   F     2225                call tim2
0C48 DAF0           2226                       djnz R2,wr1
0C4A C296           2227                       clr P1.6;P1.1
0C4C 22             2228                      ret
                    2229     
                    2230     ;принимаемый байт в acc
                    2231     ;прием байта последовательным кодом старшими разрядами вперед
0C4D 7A08           2232     read:    mov R2,#8
0C4F C297           2233     re1:     clr P1.7;P1.2
0C51 120000   F     2234              call tim2        ;5mks
0C54 A294           2235                     mov C,P1.4;P1.0
0C56 33             2236                     rlc A           
0C57 D297           2237                     setb P1.7;P1.2
0C59 120000   F     2238                     call tim2
0C5C DAF1           2239                     djnz R2,re1
0C5E 22             2240                     ret
                    2241     
                    2242      ;in r0-count   
                    2243     ;r10,r11-значение с котоым сравнивается счетчик
                    2244     ;r2..r5 -значение счетчика
0C5F                2245     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
0C5F E6             2246                     mov                     a,@r0
0C60 FC             2247                     mov                     r4,a
0C61 08             2248                     inc                     r0
0C62 E6             2249                     mov                     a,@r0
0C63 FD             2250                     mov                     r5,a
0C64 7B00           2251                     mov                     r3,#0
0C66 7A00           2252                     mov                     r2,#0
0C68 750800         2253                     mov                     r8,#0;clr                       r8
0C6B 750900         2254                     mov                     r9,#0;clr                       r9
0C6E 120000   F     2255                     call            lcmp
0C71 22             2256                     ret
                    2257     
                    2258     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    36

                    2259     
                    2260     
                    2261     
                    2262     
                    2263                                 
0C72 020000   F     2264     rout6:          jmp             out6
0C75 020000   F     2265     rlabelF:        jmp             labelF  
0C78 020000   F     2266     rknrazr:        jmp             knrazr  
0C7B 020000   F     2267     rknopt:         jmp             knopt
0C7E 020000   F     2268     rizman:         jmp             izman   
0C81                2269     keyb1:  ;IE6 
0C81 75E700         2270                                     mov             EIE2,#00H
                    2271                                     
0C84 C0E0           2272                                     push    acc
0C86 C0D0           2273                                     push    psw
0C88 C000           2274                                     push    rr0
0C8A C001           2275                                     push    rr1
0C8C C002           2276                                     push    rr2
0C8E C003           2277                                     push    rr3
0C90 C004           2278                                     push    rr4
0C92 C005           2279                                     push    rr5
0C94 C006           2280                                     push    rr6
0C96 C007           2281                                     push    rr7
                    2282                                     ;clr            bitmig
                    2283                       ;;;;;;;;;;;;;;
0C98 120000   F     2284                                     call    z_01s;0,1s
                    2285                                     ;восстан знакоместо при мигании
                    2286                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0C9B 78B2           2287                                     mov             r0,#marker
0C9D 7440           2288                                     mov             a,#bufind
0C9F 26             2289                                     add             a,@r0                   ;a=bufind+marker
0CA0 F9             2290                                     mov             r1,a
0CA1 A73C           2291                                     mov             @r1,savba
                    2292                                     ;;;;;;;;;;;
0CA3 E5B0           2293                             mov             a,p3
0CA5 20E644         2294                                     jb              acc.6,outviR;выход из режима выч R
0CA8 E5B0           2295     gout6:                          mov             a,p3
0CAA 44FF           2296                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0CAC F5B0           2297                                     mov             p3,a
0CAE E5B0           2298                                     mov             a,p3
0CB0 30E6BF         2299                                     jnb             acc.6,rout6             ;error
0CB3 3004BF         2300                                     jnb             bitizm,rlabelF
0CB6 75B0FE         2301                                     mov             p3,#0feh                ;реж IZM
0CB9 E5B0           2302                                     mov             a,p3
0CBB 30E6C0         2303                                     jnb             acc.6,rizman
                    2304                                     ;;;;;;
0CBE 201232         2305                                     jb              bitklb,goklb
0CC1 75B0FD         2306                                     mov             p3,#0fdh
0CC4 E5B0           2307                                     mov             a,p3
0CC6 30E6AF         2308                                     jnb             acc.6,rknrazr             ;labelC
0CC9 75B0FB         2309                                     mov             p3,#0fbh
0CCC E5B0           2310                                     mov             a,p3
0CCE 30E641         2311                                     jnb             acc.6,knright           ;->
0CD1 75B0F7         2312                                     mov             p3,#0f7h
0CD4 E5B0           2313                                     mov             a,p3
0CD6 30E6A2         2314                                     jnb             acc.6,rknopt                    ;T
0CD9 75B0EF         2315                                     mov             p3,#0efh
0CDC E5B0           2316                                mov          a,p3
0CDE 30E615         2317                                     jnb             acc.6,pyskst                    ;pysk/stop
0CE1 75B0DF         2318                                     mov             p3,#0dfh
0CE4 E5B0           2319                                     mov             a,p3
0CE6 30E645         2320                                jnb          acc.6,knvich
0CE9 020000   F     2321                                     jmp             izmpaT
                    2322     
0CEC 3006B9         2323     outviR: jnb             bitvi11,gout6   
0CEF C214           2324                                     clr             bitvich                         ;выход из р
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    37

                             ежима выч R  
0CF1 C206           2325                                     clr             bitvi11
                    2326                                     
0CF3 020000   F     2327     goklb:          jmp             out6
                    2328     
0CF6 200A05         2329     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0CF9 D20A           2330                                     setb    bitbon  ;уст реж буфер вкл
0CFB 020000   F     2331                                     jmp             izmpaT
0CFE C20A           2332     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D00 807E           2333                                     jmp             izmpaT
                    2334     
0D02 79B0           2335     tizmri:                 mov             r1,#level
0D04 B70102         2336                                     cjne    @r1,#1,right2
                    2337                                     ;10s->HET
0D07 8004           2338                                     jmp             right3
                    2339     
0D09 07             2340     right2:                 inc             @r1
0D0A 120000   F     2341                                     call    lolevT
                    2342                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D0D 120000   F     2343     right3:                 call    ind
0D10 806A           2344                                     jmp             izmfun
                    2345     
                    2346                             
                    2347                             
0D12                2348     knright:        
                    2349     
0D12 79AE           2350                                     mov             r1,#diap
                    2351                             ;перекл диапазон 1 поз вверх сбр массив
0D14 17             2352                                     dec             @r1
0D15 B7FF04         2353                                     cjne    @r1,#0ffh,diinc
0D18 7700           2354                                     mov             @r1,#0
0D1A 8060           2355                                     jmp  izmfun
0D1C 120000   F     2356     diinc:                  call     clmassix
0D1F 78B3           2357                                     mov             r0,#summa
0D21 120000   F     2358                                     call    clear4
0D24 786A           2359                                     mov             r0,#rez_A0
0D26 120000   F     2360                                     call    clear4  
0D29 120000   F     2361                                     call    loadUS
0D2C 804E           2362                                      jmp  izmfun
                    2363     
0D2E 200610         2364     knvich:            jb           bitvi11,onvich
0D31 C204           2365                                     clr             bitizm
0D33 D214           2366                                     setb    bitvich
                    2367                                     
0D35 78B1           2368                                     mov             r0,#vichR
0D37 7611           2369                                     mov             @r0,#11h;;????????or 0
                    2370                                     ;ВЫЧИСЛИТЬ
0D39 900000   F     2371                                     mov     dptr,#teVICH
0D3C 120000   F     2372                                     call    lotext
                    2373                               ; call                ind
0D3F 806C           2374                                     jmp              viout;izmpaT
                    2375     
0D41 C214           2376     onvich:                 clr             bitvich
0D43 78B1           2377                                     mov             r0,#vichR
0D45 7600           2378                                     mov             @r0,#0
0D47 8037           2379                                     jmp              izmpaT
                    2380     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0D49 301820         2381     louizm:            jnb          knizm,lou
0D4C 79AE           2382                                     mov             r1,#diap
0D4E C3             2383                                     clr             c
0D4F 7403           2384                                     mov             a,#3
0D51 97             2385                                     subb    a,@r1
0D52 5006           2386                                     jnc             lldi23    ;10-2..10-5
                    2387                                     ;10-6..10-11
0D54 E584           2388                                     mov             a,p4
0D56 54F7           2389                                     anl             a,#0f7h   ;d3
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    38

0D58 F584           2390                                     mov             p4,a
0D5A E7             2391     lldi23:                 mov             a,@r1
0D5B 6403           2392                                     xrl             a,#3
0D5D 7002           2393                                     jnz             lldi3
0D5F 8005           2394                                     jmp             lldi2   ;10-5
0D61 E7             2395     lldi3:                  mov             a,@r1
0D62 6402           2396                                     xrl             a,#2            ;
0D64 7006           2397                                     jnz             lou             
0D66 E585           2398     lldi2:                  mov             a,p5            ;10-4
0D68 4408           2399                                     orl             a,#08
0D6A F585           2400                                     mov             p5,a
0D6C 22             2401     lou:                    ret
                    2402                               ;;;;;;
0D6D 201807         2403     izman:                  jb              knizm,knizmon
0D70 D218           2404                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2405                             ;       d3(k5 p4),d3(u5 p5)заслать us
0D72 120000   F     2406                                     call    louizm 
0D75 8005           2407                                     jmp             izmfun
0D77 C218           2408     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0D79 120000   F     2409                                     call    loadUS;восстановить us
0D7C                2410     izmfun:                 
0D7C D207           2411                                     setb    bitzus;bitbuf
0D7E 8000           2412                                     jmp             labelE;;;;;;;;;;;;
                    2413                                     ;;;;;;;;;;;;;;
0D80                2414     izmpaT:
                    2415     ;;;;;;;;;;;;;;;;;
                    2416                     ;       clr             c 
                    2417                     ;       mov             r1,#parN
                    2418     
                    2419                     ;       mov             r0,#diap
                    2420                     ;       mov             a,#6            
                    2421                     ;       subb    a,@r0
                    2422                     ;       jnc             labelE          ;         ;10-2..10-8
                    2423                               
                    2424                     ;       mov             @r1,#2          ;10-9..10-11            
                    2425                     ;       jmp             labelE
                    2426     
                    2427     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0D80 789A           2428     labelE:                 mov             r0,#parT
0D82 793D           2429                                     mov             r1,#chkl
0D84 B60108         2430                                     cjne    @r0,#1,izmt2
0D87 7700           2431                                     mov             @r1,#0
0D89 09             2432                                     inc             r1
0D8A 7702           2433                                     mov             @r1,#2
0D8C 020000   F     2434                                     jmp             out6
0D8F B60208         2435     izmt2:                  cjne    @r0,#2,izmt3
0D92 7700           2436                                     mov             @r1,#0
0D94 09             2437                                     inc             r1
0D95 7714           2438                                     mov             @r1,#20
0D97 020000   F     2439                                     jmp             out6
                    2440     
0D9A 7700           2441     izmt3:                  mov             @r1,#0
0D9C 09             2442                                     inc             r1
0D9D 77C8           2443                                     mov             @r1,#200
0D9F 020000   F     2444                                     jmp             out6
                    2445     
                    2446     
                    2447     
                    2448     
0DA2                2449     knopt: ;кнопка T
0DA2 C204           2450                                clr          bitizm
0DA4 D210           2451                                setb         bitt2
0DA6 79B7           2452                                mov          r1,#load
0DA8 7704           2453                                mov          @r1,#4;1s
0DAA 120000   F     2454                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2455                                
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    39

                    2456     
0DAD 793D           2457     viout:          mov             r1,#chkl
0DAF 7703           2458                             mov             @r1,#03
0DB1 09             2459                             inc             r1
0DB2 77E8           2460                             mov             @r1,#0e8h               ;1000
0DB4 020000   F     2461                             jmp             out6
                    2462     
0DB7                2463     knrazr:          
0DB7 C3             2464     labelC:          clr            c
0DB8 78AF           2465                             mov             r0,#parN
0DBA 799A           2466                             mov             r1,#parT
0DBC 7402           2467                             mov             a,#2
0DBE 97             2468                             subb    a,@r1
0DBF 40BF           2469                             jc              labelE          ;T>2
0DC1 B60104         2470                             cjne    @r0,#1,noN1c
0DC4 7602           2471                             mov             @r0,#2          ;N=2
0DC6 80B8           2472                             jmp             labelE
                    2473     
0DC8 B60204         2474     noN1c:          cjne    @r0,#2,not_1
0DCB 7603           2475                             mov             @r0,#3          ;N=3      ;10-2..10-8
0DCD 80B1           2476                             jmp             labelE
                    2477     
0DCF                2478     not_10: 
0DCF 7601           2479     not_1:          mov             @r0,#1                          ;N=1
0DD1 80AD           2480                             jmp     labelE
                    2481     
0DD3 020000   F     2482     rtizmri:        jmp             tizmri
0DD6                2483     labelf:                 
0DD6 301024         2484                             jnb             bitt2,nofizm
0DD9 75B0FB         2485                        mov          p3,#0fbh
0DDC E5B0           2486                        mov          a,p3
0DDE 20E60F         2487                        jb           acc.6,outF
0DE1 79B7           2488                        mov          r1,#load;parT
0DE3 B70503         2489                        cjne         @r1,#5,noft1
                    2490                        ;t=10s
0DE6 020000   F     2491                        jmp          out6;ft1izm
                    2492     
0DE9 07             2493     noft1:     inc          @r1;dec         @r1
0DEA 120000   F     2494     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2495                             ;call   ind
0DED 020000   F     2496                     jmp             out6;??????????????/
                    2497     
                    2498                             ;увеличить счетчик задержки клавиатуры
0DF0 783D           2499     outF:           mov             r0,#chkl
0DF2 7627           2500                             mov             @r0,#27h
0DF4 08             2501                             inc             r0
0DF5 7610           2502                             mov             @r0,#10h
0DF7 020000   F     2503                             jmp             out6;out7
                    2504     
0DFA 020000   F     2505     noviR1:         jmp             noviR
0DFD 3014FA         2506     nofizm:         jnb             bitvich,noviR1
0E00 78B1           2507                             mov             r0,#vichR
0E02 B6111A         2508                             cjne    @r0,#11h,no11v6
0E05 7612           2509                             mov             @r0,#12h                ;11= вычислить
0E07 900000   F     2510     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E0A 120000   F     2511                             call    lotext
0E0D 80E1           2512                             jmp             outF
                    2513             
0E0F 020000   F     2514     rnor11:         jmp             nor11   
                    2515             
0E12 B611FA         2516     nor13:          cjne    @r0,#11h,rnor11
0E15 7612           2517                             mov             @r0,#12h
0E17 900000   F     2518                             mov             dptr,#teIZMK    ;       изм конст
0E1A 120000   F     2519                         call        lotext             
0E1D 80D1           2520                             jmp             outF
                    2521     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    40

0E1F B6120A         2522     no11v6:         cjne    @r0,#12h,no12v6
0E22 7613           2523                             mov             @r0,#13h
0E24 900000   F     2524                             mov             dptr,#teOUT
0E27 120000   F     2525                             call    lotext
0E2A 80C4           2526                             jmp             outF
                    2527                     
0E2C B6130A         2528     no12v6:         cjne    @r0,#13h,no13v6
0E2F 7611           2529                             mov             @r0,#11h
0E31 900000   F     2530                             mov             dptr,#teVICH
0E34 120000   F     2531                             call    lotext
0E37 80B7           2532                             jmp             outF
                    2533     
                    2534     ;кн -> A= 0000
                    2535     ;кн -> B= +00000
0E39 75B0FB         2536     no13v6:         mov             p3,#0fbh
0E3C E5B0           2537                             mov             a,p3
0E3E 20E634         2538                             jb              acc.6,chanZ
0E41 E53B           2539                             mov             a,movrig
0E43 B40713         2540                             cjne    a,#7,kon_B      
0E46 78B2           2541                             mov             r0,#marker      ;A= 0000
0E48 B60715         2542                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0E4B E53A           2543     rikn:           mov             a,movleft
0E4D F6             2544                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2545     ;                               29.12.06
                    2546     ;;;;;;;;;;;;;;;;;;
                    2547     ;необходимо не портить цифру в следуюем справа знакоместе
                    2548     ;т е сохранить ее в ячейке для мигания в противном случае
                    2549     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2550     ;       знакоместа
0E4E 78B2           2551                                     mov             r0,#marker
0E50 7440           2552                                     mov             a,#bufind
0E52 26             2553                                             add             a,@r0                   ;a=bufind+m
                             arker
0E53 F9             2554                                             mov             r1,a
0E54 09             2555                                             inc             r1
0E55 873C           2556                                             mov             savba,@r1
0E57 8097           2557                                     jmp             outF
                    2558     
0E59 78B2           2559     kon_B:          mov             r0,#marker      ;B= +00000
0E5B B60802         2560                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0E5E 80EB           2561                                             jmp             rikn
0E60                2562     mark0_8:
                    2563     ;                               29.12.06
                    2564     ;;;;;;;;;;;;;;;;;;
                    2565     ;необходимо не портить цифру в следуюем справа знакоместе
                    2566     ;т е сохранить ее в ячейке для мигания в противном случае
                    2567     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2568     ;       знакоместа ->B=+00000
0E60 78B2           2569                                             mov             r0,#marker
0E62 7440           2570                                     mov             a,#bufind
0E64 26             2571                                             add             a,@r0                   ;a=bufind+m
                             arker
0E65 F9             2572                                             mov             r1,a
0E66 09             2573                                             inc             r1
0E67 873C           2574                                             mov             savba,@r1
0E69 78B2           2575                             mov             r0,#marker
0E6B 06             2576                             inc             @r0             ;       сдвинуть курсор вправо на 1
0E6C C219           2577                             clr             bitmig
0E6E B60901         2578                             cjne    @r0,#9,outma
0E71 18             2579                             dec             r0;ppp
0E72 020000   F     2580     outma:          jmp             outF
                    2581     
0E75 75B0FE         2582     chanZ:          mov             p3,#0feh
0E78 E5B0           2583                             mov             a,p3
0E7A 20E611         2584                             jb              acc.6,chanma
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    41

                    2585                             ;изм знак в старшем разряде на противоположн
0E7D E543           2586                             mov             a,bufind+3
0E7F B42B06         2587                             cjne            a,#2bh,noplus
0E82 75432D         2588                             mov                     bufind+3,#2dh           ;+->-   
0E85 020000   F     2589                             jmp             outF
0E88                2590     noplus:
0E88 75432B         2591                             mov                     bufind+3,#2bh           ;-/+-
0E8B 020000   F     2592                             jmp             outF
0E8E 75B0FD         2593     chanma:         mov             p3,#0fdh
0E91 E5B0           2594                             mov             a,p3
0E93 20E603         2595                             jb              acc.6,outFl;labelL1
                    2596                             ;clr            bitmig
0E96 120000   F     2597     labelL1:        call    vvchif  ;увеличить цифру 
                    2598     
0E99 020000   F     2599     outFl:                  jmp             outF
                    2600                     
0E9C                2601     nor11:          ;       выход
0E9C 7613           2602                     mov             @r0,#13h  ;12->13
0E9E 900000   F     2603                     mov             dptr,#teOUT
                    2604     ;               jmp             vi1113
                    2605     
                    2606     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2607     
0EA1 C206           2608     yesviR:         clr             bitvi11;????????/
0EA3 200C03         2609                             jb              bmem11,rlabelL
0EA6 020000   F     2610                             jmp             out6;???????//
                    2611     
0EA9 020000   F     2612     rlabelL:        jmp                     labelL
                    2613     
0EAC                2614     noviR:  ;       jb                      bitmenu,;15.01.07
                    2615     ;;;;;;;;;;;;;
0EAC 78B1           2616                                             mov                     r0,#vichR
0EAE 7415           2617                                             mov                     a,#15h
0EB0 C3             2618                                             clr                     c
0EB1 96             2619                                             subb            a,@r0
0EB2 4016           2620                                             jc                      ri21_23
                    2621     
0EB4 75B0FB         2622                                             mov             p3,#0fbh; реж кн меню ->
0EB7 20B60A         2623                                             jb              p3.6,ri6
0EBA 78B1           2624                                             mov             r0,#vichR
0EBC B61508         2625                                             cjne    @r0,#15h,norime
0EBF 7611           2626                                             mov             @r0,#11h
0EC1 120000   F     2627     norime1:        call            lomenu
0EC4 020000   F     2628     ri6:                    jmp             out6
0EC7 06             2629     norime:         inc             @r0
0EC8 80F7           2630                                             jmp             norime1
                    2631             
0ECA 7423           2632     ri21_23:        mov                     a,#23h          ;->
0ECC C3             2633                                             clr                     c
0ECD 96             2634                                             subb            a,@r0
0ECE 4014           2635                                             jc                      ri_31
0ED0 75B0FB         2636                                             mov                     p3,#0fbh
0ED3 20B6EE         2637                                             jb                      p3.6,ri6
0ED6 B62308         2638                                             cjne            @r0,#23h,no23ri
0ED9 7621           2639                                             mov                     @r0,#21h
0EDB 120000   F     2640                                             call            lomenu
0EDE 020000   F     2641                                             jmp                     out6
0EE1 06             2642     no23ri:         inc                     @r0
0EE2 80DD           2643                                             jmp                     norime1
0EE4 B63119         2644     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0EE7 30130B         2645                                             jnb                     bitv19,gosk19
0EEA 900000   F     2646                                             mov                     dptr,#teS57_6;57,6
0EED 120000   F     2647                                             call            lotext
0EF0 C213           2648                                             clr                     bitv19
0EF2 020000   F     2649                                             jmp             out6
0EF5 900000   F     2650     gosk19:         mov                     dptr,#teS19_2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    42

0EF8 120000   F     2651                                             call            lotext
0EFB D213           2652                                             setb            bitv19
0EFD 020000   F     2653                                             jmp                     out6
                    2654     
                    2655     
                    2656     
                    2657     ;labelS2:       jmp                     out6
                    2658     
0F00 7452           2659     no31ri:         mov                     a,#52h;42h              ;->
0F02 C3             2660                                             clr                     c
0F03 96             2661                                             subb            a,@r0
0F04 40BE           2662                                             jc                      ri6
0F06 75B0FB         2663                                             mov                     p3,#0fbh                   
                                  ;41,42
0F09 30B608         2664                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F0C 75B0FD         2665                                             mov                     p3,#0fdh
0F0F 20B6B2         2666                                             jb                      p3.6,ri6
0F12 8082           2667                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0F14 020000   F     2668     rlabelN:                jmp             labelN
0F17 020000   F     2669     moutF:          jmp             outF
                    2670     ;;;;;;;;;;;;;;;;;;;;;;;;;
0F1A 020000   F     2671     rnnmemb:        jmp             nnmemb
0F1D 300BFA         2672     nbimenu:        jnb             bitmem,rnnmemb
0F20 79B0           2673                             mov             r1,#level
0F22 B71113         2674                        cjne         @r1,#11h,nomem11
                    2675                        
0F25 75B0FB         2676                        mov          p3,#0fbh
0F28 E5B0           2677                        mov          a,p3
0F2A 20E6EA         2678                        jb           acc.6,moutF
0F2D 7712           2679                        mov          @r1,#12h
0F2F 900000   F     2680                        mov          dptr,#teWR
0F32 120000   F     2681                        call         lotext
0F35 020000   F     2682                        jmp          outF
                    2683     
0F38 B71213         2684     nomem11:   cjne         @r1,#12h,nomem12
0F3B 75B0FB         2685                             mov             p3,#0fbh
0F3E E5B0           2686                        mov          a,p3
0F40 20E6D4         2687                        jb           acc.6,moutF
0F43 7713           2688                        mov          @r1,#13h
0F45 900000   F     2689                        mov          dptr,#teLIST
0F48 120000   F     2690                        call         lotext
0F4B 020000   F     2691                        jmp          outF
0F4E B71313         2692     nomem12:         cjne           @r1,#13h,labelL
0F51 75B0FB         2693                             mov             p3,#0fbh
0F54 E5B0           2694                        mov          a,p3
0F56 20E6BE         2695                        jb           acc.6,moutF
0F59 7711           2696                        mov          @r1,#11h
0F5B 900000   F     2697                        mov          dptr,#teCLE
0F5E 120000   F     2698                        call         lotext
0F61 020000   F     2699                          jmp                outF
                    2700     
0F64 78B0           2701     labelL:         mov             r0,#level
0F66 B6211B         2702                             cjne    @r0,#21h,labl21
0F69 75B0FB         2703                             mov             p3,#0fbh
0F6C E5B0           2704                             mov             a,p3
0F6E 20E610         2705                             jb              acc.6,loutF
0F71 B62108         2706                             cjne    @r0,#21h,lal22
0F74 7622           2707                             mov             @r0,#22h
                    2708                             ;БЛОК
0F76 120000   F     2709                             call    lotext
0F79 020000   F     2710                             jmp             outF
0F7C 7621           2711     lal22:          mov             @r0,#21h
                    2712                             ;ПОЛНАЯ
0F7E 120000   F     2713                             call    lotext
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    43

0F81 020000   F     2714     loutf:          jmp             outF
                    2715     
0F84 B6211B         2716     labl21:    cjne @r0,#21h,nolev1
0F87 75B0FB         2717                             mov             p3,#0fbh
0F8A E5B0           2718                             mov             a,p3
0F8C 20E6F2         2719                             jb              acc.6,loutF
0F8F B62108         2720                             cjne    @r0,#21h,labl22
0F92 7622           2721                             mov             @r0,#22h
                    2722                             ;БЛОК
0F94 120000   F     2723                             call    lotext
0F97 020000   F     2724                             jmp             outF
0F9A 7621           2725     labl22:         mov             @r0,#21h
                    2726                             ;ПОЛНАЯ
0F9C 120000   F     2727                             call    lotext
0F9F 020000   F     2728                             jmp             outF
                    2729                      
0FA2 B62323         2730     nolev1:         cjne    @r0,#23h,go31l
0FA5 75B0FB         2731     rigblo:         mov             p3,#0fbh
0FA8 20B627         2732                             jb              p3.6,llev2
0FAB                2733     labL2:    ;  уст курсор в правую позицию 
                    2734                                     ;                               29.12.06
                    2735     ;;;;;;;;;;;;;;;;;;
                    2736     ;необходимо не портить цифру в следуюем справа знакоместе
                    2737     ;т е сохранить ее в ячейке для мигания в противном случае
                    2738     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2739     ;       знакоместа
0FAB 78B2           2740                                             mov             r0,#marker
0FAD 7440           2741                                     mov             a,#bufind
0FAF 26             2742                                             add             a,@r0                   ;a=bufind+m
                             arker
0FB0 F9             2743                                             mov             r1,a
0FB1 09             2744                                             inc             r1
0FB2 873C           2745                                             mov             savba,@r1
                    2746     ;;;;;;;;;;;;;;;;
0FB4 78B2           2747                       mov           r0,#marker      ;курсор справа  ?
0FB6 E53B           2748                             mov             a,movrig
0FB8 C3             2749                             clr             c
0FB9 96             2750                             subb    a,@r0
0FBA 6006           2751                             jz         equ1l
0FBC E53B           2752                             mov             a,movrig;уст в правую позицию
0FBE F6             2753                             mov             @r0,a
0FBF 020000   F     2754                             jmp             outF;goto7                                         
                                   
0FC2 E53A           2755     equ1l:          mov             a,movleft;уст в левую позицию
0FC4 F6             2756                             mov             @r0,a   
0FC5 020000   F     2757                             jmp             outF;goto7
                    2758                     
                    2759     
0FC8 B63102         2760     go31l:          cjne    @r0,#31h,go41l
0FCB 80D8           2761                             jmp             rigblo
0FCD B6410B         2762     go41l:          cjne    @r0,#41h,norig2
0FD0 80D3           2763                             jmp             rigblo
                    2764     
0FD2 75B0FD         2765     llev2:          mov             p3,#0fdh
0FD5 20B6A9         2766                             jb              p3.6,loutF
0FD8 020000   F     2767                             jmp             labelL1
                    2768     
                    2769     ;->
0FDB C3             2770     norig2:    clr          c               ;32,33,34,42
0FDC 7431           2771                             mov             a,#31h
0FDE 96             2772                             subb    a,@r0
0FDF 50A0           2773                             jnc             loutF
0FE1 75B0FB         2774     rigblok:        mov             p3,#0fbh  ;32,33,34,42
0FE4 20B626         2775                             jb              p3.6,lev2go
0FE7                2776     labelN: 
                    2777                             ;                               29.12.06
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    44

                    2778     ;;;;;;;;;;;;;;;;;;
                    2779     ;необходимо не портить цифру в следуюем справа знакоместе
                    2780     ;т е сохранить ее в ячейке для мигания в противном случае
                    2781     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2782     ;       знакоместа
0FE7 78B2           2783                                             mov             r0,#marker
0FE9 7440           2784                                     mov             a,#bufind
0FEB 26             2785                                             add             a,@r0                   ;a=bufind+m
                             arker
0FEC F9             2786                                             mov             r1,a
0FED 09             2787                                             inc             r1
0FEE 873C           2788                                             mov             savba,@r1
                    2789     ;;;;;;;;;;;;;;;;;;;
0FF0 78B2           2790                             mov             r0,#marker      ;курсор справа  ?
0FF2 E53B           2791                             mov             a,movrig
0FF4 C3             2792                             clr             c
0FF5 96             2793                             subb    a,@r0
0FF6 7006           2794                             jnz        noequ1
0FF8 E53A           2795                             mov             a,movleft;уст в крайнюю левую позицию
0FFA F6             2796                             mov             @r0,a
0FFB 020000   F     2797                             jmp             outF
0FFE                2798     noequ1: ;29.12.06
                    2799     ;;;;;;;;;;;;;;;;;;
                    2800                             ;восстан знакоместо при мигании
                    2801                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
0FFE 78B2           2802                                     mov             r0,#marker
1000 7440           2803                                     mov             a,#bufind
1002 26             2804                                     add             a,@r0                   ;a=bufind+marker
1003 F9             2805                                     mov             r1,a
                    2806                                     ;mov            @r1,savba
1004 09             2807                                     inc             r1
1005 873C           2808                                     mov             savba,@r1
                    2809     ;;;;;;;;;;;;;;;;        
1007 120000   F     2810                             call    marri;уст сдвиг в правую        позицию
100A 020000   F     2811                             jmp             outF
100D 75B0FD         2812     lev2go:         mov             p3,#0fdh
1010 30B603         2813                             jnb             p3.6,rlabelL1
1013 020000   F     2814                             jmp             outF
                    2815     
1016 020000   F     2816     rlabelL1:       jmp             labelL1
1019                2817     nnmemb:
1019                2818     norim6:    ;kn menu
1019                2819     out6:           
1019 D007           2820                                     pop             rr7     
101B D006           2821                                     pop             rr6
101D D005           2822                                     pop             rr5
101F D004           2823                                     pop             rr4
1021 D003           2824                                     pop             rr3
1023 D002           2825                                     pop             rr2
1025 D001           2826                                     pop             rr1                             
1027 D000           2827                                     pop             rr0
1029 D0D0           2828                                     pop             psw
102B D0E0           2829                                     pop             acc
                    2830     ;clr            bitmig
102D 75E730         2831                                mov          EIE2,#30H
1030 E5AD           2832                                mov          a,P3IF
1032 54BF           2833                                     anl             a,#0bfh
1034 F5AD           2834                                     mov             P3IF,a
1036 75B0C0         2835                                     mov             P3,#0c0h
1039 C219           2836     clr             bitmig
103B 32             2837                             reti
                    2838     
103C 020000   F     2839     rknMEM:                 jmp             knMEM
103F 020000   F     2840     knKMP:             jmp          out7
1042 020000   F     2841     rout7:                  jmp             out7    
1045 020000   F     2842     rlabelH:                jmp             labelH
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    45

1048 020000   F     2843     rknNUL:         jmp             knNUL
104B 020000   F     2844     rknleft:                jmp             knleft
104E                2845     keyb2:  ;IE7
104E 75E700         2846                                     mov             EIE2,#00H
1051 C0E0           2847                                     push    acc
1053 C0D0           2848                                     push    psw
1055 C000           2849                                     push    rr0
1057 C001           2850                                     push    rr1
1059 C002           2851                                     push    rr2
105B C003           2852                                     push    rr3
105D C004           2853                                     push    rr4
105F C005           2854                                     push    rr5
1061 C006           2855                                     push    rr6
1063 C007           2856                                     push    rr7
1065 C082           2857                                     push    dpl
1067 C083           2858                                     push    dph
                    2859                                     ;clr            bitmig
                    2860                       ;;;;;;;;;;;;;;
1069 120000   F     2861                               call  z_01s   ;0,1s
                    2862                               ;восстан знакоместо при мигании
                    2863                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
106C 78B2           2864                                     mov             r0,#marker
106E 7440           2865                                     mov             a,#bufind
1070 26             2866                                     add             a,@r0                   ;a=bufind+marker
1071 F9             2867                                     mov             r1,a
1072 A73C           2868                                     mov             @r1,savba
                    2869                                     ;;;;;;;;;;;
                    2870     
1074 E5B0           2871                             mov             a,p3
1076 20E7C9         2872                                     jb              acc.7,rout7
1079 E5B0           2873                                     mov             a,p3
107B 74FF           2874                                     mov             a,#0ffh         ; p3.(5-0)<-3f
107D F5B0           2875                                     mov             p3,a
107F E5B0           2876                                     mov             a,p3
1081 30E7BE         2877                                     jnb             acc.7,rout7             ;error
1084 3004BE         2878                                     jnb             bitizm,rlabelH
1087 75B0FE         2879                                     mov             p3,#0feh                ;реж IZM
108A E5B0           2880                                     mov             a,p3
108C 30E7B9         2881                                     jnb             acc.7,rknNUL
108F 75B0FD         2882                                     mov             p3,#0fdh
1092 E5B0           2883                                     mov             a,p3
1094 30E7A8         2884                                     jnb             acc.7,knKMP
1097 75B0FB         2885                                     mov             p3,#0fbh
109A E5B0           2886                                     mov             a,p3
109C 30E7AC         2887                                     jnb             acc.7,rknleft
109F 75B0F7         2888                                     mov             p3,#0f7h
10A2 E5B0           2889                                     mov             a,p3
10A4 30E755         2890                                     jnb             acc.7,knAVP
10A7 75B0EF         2891                                 mov         p3,#0efh
10AA E5B0           2892                                     mov             a,p3
10AC 30E78D         2893                                     jnb             acc.7,rknMEM
10AF 75B0DF         2894                                     mov             p3,#0dfh
10B2 E5B0           2895                                     mov             a,p3    
10B4 30E722         2896                                     jnb             acc.7,knmenu
10B7                2897     an_t7:             ;;;;;;;;;;;;
                    2898                     
                    2899     ;       clr             c
                    2900     ;       mov             r1,#parN
                    2901     ;
                    2902     ;                       mov             r0,#diap
                    2903     ;                       mov             a,#6            
                    2904     ;                       subb    a,@r0
                    2905     ;                       jnc             goto7           ;         ;10-2..10-8
                    2906                               
                    2907     ;                       mov             @r1,#2          ;10-9..10-11            
                    2908                             
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    46

                    2909                             ;;;;;;;;;;;;
10B7 799A           2910     goto7:                  mov             r1,#parT
10B9 783D           2911                                     mov             r0,#chkl
10BB B70108         2912                                     cjne    @r1,#1,not1_7
10BE 7600           2913                                     mov             @r0,#00
10C0 08             2914                                     inc             r0
10C1 7602           2915                                     mov             @r0,#2
10C3 020000   F     2916                                     jmp             out7
                    2917                             
                    2918     
10C6 B70208         2919     not1_7:                 cjne    @r1,#2,not2_7
10C9 760E           2920                                     mov             @r0,#0eh;00
10CB 08             2921                                     inc             r0
10CC 7638           2922                                     mov             @r0,#38h;20
10CE 020000   F     2923                                     jmp             out7
10D1 7600           2924     not2_7:                 mov             @r0,#00
10D3 08             2925                                     inc             r0
10D4 76C8           2926                                     mov             @r0,#200
10D6 020000   F     2927                                     jmp             out7
                    2928     
                    2929     
10D9 201511         2930     knmenu: jb              biteizm,menuoff
10DC C204           2931                              clr            bitizm          ;off IZM
10DE D211           2932                                     setb            bitmenu
10E0 900000   F     2933                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
10E3 120000   F     2934                                     call    lotext
                    2935                                     
10E6 78B1           2936                                     mov             r0,#vichR
10E8 7611           2937                                     mov             @r0,#11h
10EA 020000   F     2938                                     jmp             onmem11
10ED                2939     menuoff:
10ED 78B1           2940                                     mov             r0,#vichR
10EF 7600           2941                                     mov             @r0,#00
10F1 C215           2942                                     clr             biteizm
10F3 120000   F     2943                                     call    loadus
10F6 75EF10         2944                                     mov             RSTSRC,#10h
                    2945                                     ;jmp            begin;onmem11
                    2946     
10F9 020000   F     2947     rendkalib:              jmp             endkalib
                    2948     
10FC 2012FA         2949     knAVP:  jb              bitklb,rendkalib        
10FF 200505         2950                                     jb              bitavp,meavp
1102 D205           2951                                     setb    bitavp
1104 020000   F     2952                                     jmp             onmem11
1107 C205           2953     meavp:                  clr             bitavp
1109 020000   F     2954                                     jmp             onmem11
                    2955     
110C 201207         2956     knleft: jb              bitklb,lefkl
                    2957                                     ;;;;;;;;
110F 79AE           2958                                mov          r1,#diap
1111 07             2959                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1112 B70A03         2960                                     cjne    @r1,#0ah,nodi6
1115 17             2961                                     dec             @r1
1116 809F           2962     lefkl:  jmp             an_t7
                    2963     
1118                2964     nodi6:             ;    cjne    @r1,#0,an_t7
1118 120000   F     2965                                      call    clmassix
111B 78B3           2966                                     mov             r0,#summa
111D 120000   F     2967                                     call    clear4  
1120 786A           2968                                     mov             r0,#rez_A0
1122 120000   F     2969                                     call    clear4  
1125 120000   F     2970                                     call    loadUS
1128 808D           2971                                jmp          an_t7
                    2972     
112A 200F0F         2973     knNUL:                  jb              bitnul,ybnul
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    47

112D D20F           2974                                     setb    bitnul
112F 789C           2975                                     mov             r0,#rez_A3      ;A3
1131 120000   F     2976                                     call    resar2
1134 786A           2977                                     mov             r0,#rez_A0      
1136 120000   F     2978                                     call    saver2;A0<-A3
1139 020000   F     2979                                     jmp             goto7;an_t7
                    2980     
113C C20F           2981     ybnul:                  clr             bitnul
113E 900000   F     2982                                      mov    DPTR,#ch0 
1141 120000   F     2983                                     CALL   ldc_long          ; r2..r5 <-- 0
1144 786A           2984                                     mov             r0,#rez_A0      ;A0=0
1146 120000   F     2985                                     call    saver2
1149 020000   F     2986                                     jmp             goto7;an_t7
                    2987     
114C 30101E         2988     labelH:                 jnb             bitt2,nolah
114F 75B0FB         2989                                     mov             p3,#0fbh   ;вход в режим изм Т
1152 79B7           2990                                     mov             r1,#load;parT
1154 20B70D         2991                                     jb              p3.7,rhnot1
1157 B70003         2992                                     cjne    @r1,#0,inct;
115A 020000   F     2993                                     jmp             out7;hyest6
115D 17             2994     inct:                   dec             @r1                     ;Tизм+1
                    2995                             
115E 120000   F     2996                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
1161                2997     hnot2:          ;       call    ind
1161 020000   F     2998                                     jmp             out7
                    2999     
1164 020000   F     3000      rhnot1:                jmp             hnot1
                    3001      ;rnoviR:       jmp             noviR
1167 020000   F     3002      rlabelK:       jmp             labelK
116A 020000   F     3003      rlabelI:       jmp             labelI          
                    3004      ;;;;;;;;;;;;;;;;;;;
116D 3014F7         3005     nolah:          jnb             bitvich,rlabelK 
                    3006                             ;;;;;;
                    3007                             ;увеличить счетчик задержки клавиатуры
                    3008                     ;;              mov             r0,#chkl
                    3009                     ;;              mov             @r0,#27h
                    3010                     ;;              inc             r0
                    3011                     ;;              mov             @r0,#10h
                    3012                             ;;;;;;
                    3013     
1170 78B1           3014                             mov             r0,#vichR
1172 B61128         3015                             cjne    @r0,#11h,rhnor11;rlabelI;;
1175 75B0FB         3016                             mov             p3,#0fbh   ;<-
1178 20B728         3017                             jb              p3.7,noh37;routF
117B B6110B         3018                     cjne    @r0,#11h,hr12
117E 7613           3019                             mov             @r0,#13h        ;11= вычислить
1180 900000   F     3020                             mov             dptr,#teOUT;teVICH
1183 120000   F     3021     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1186 020000   F     3022                             jmp             goto7;outF
1189 B61207         3023     hr12:           cjne    @r0,#12h,hnor12
118C 7611           3024     lovich:         mov             @r0,#11h
118E 900000   F     3025                             mov             dptr,#teVICH
1191 80F0           3026                             jmp             hvi1113         
1193 B61307         3027     hnor12:         cjne    @r0,#13h,rhnor11
1196 7612           3028     loizmk:         mov             @r0,#12h
1198 900000   F     3029                             mov             dptr,#teIZMK    ;       изм конст
                    3030                                        
119B 80E6           3031                             jmp             hvi1113
                    3032     
119D 803E           3033     rhnor11:                jmp             hnor11
                    3034     
119F 8049           3035     rvvizko:                jmp             vvizko
11A1 80FE           3036     toutF:                  jmp     toutF
                    3037     
11A3 75B0F7         3038     noh37:          mov             p3,#0f7h
11A6 20B7F8         3039                             jb              p3.7,toutF
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    48

11A9 B611F3         3040                             cjne    @r0,#11h,rvvizko
11AC D206           3041                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
11AE D204           3042              setb   bitizm
11B0 020000   F     3043     routF:          jmp             goto7;outF
                    3044     
                    3045     
                    3046     
11B3 80EE           3047     rnoh37:         jmp             noh37
                    3048     
11B5 B6120D         3049     norr11:         cjne    @r0,#12h,norr12
11B8 75B0FB         3050                             mov             p3,#0fbh   ;<-
11BB 20B7F5         3051                             jb              p3.7,rnoh37;routF
11BE 760B           3052                             mov             @r0,#11;12->11
11C0 80CA           3053                             jmp             lovich
                    3054     
11C2 020000   F     3055     labelI2:                jmp             labelI
11C5 B613FA         3056     norr12:         cjne    @r0,#13h,labelI2
11C8 75B0FB         3057                             mov             p3,#0fbh   ;<-
11CB 20B7E5         3058                             jb              p3.7,rnoh37
11CE 7612           3059                             mov             @r0,#12h
11D0 80C4           3060                             jmp             loizmk
                    3061                             ;;;;
11D2 C214           3062     clrvich:                clr             bitvich
11D4 D204           3063                             setb    bitizm
11D6 A8B2           3064                             mov             r0,marker
11D8 76FF           3065                             mov             @r0,#0ffh
11DA 020000   F     3066                              jmp    goto7;  routF
                    3067     
                    3068     ;rnoh37:                jmp             noh37
                    3069      ;ввод изм конст
11DD B612E5         3070     hnor11:         cjne    @r0,#12h,norr12;clrvich
11E0 75B0FB         3071                              mov            p3,#0fbh   
11E3 20B7CD         3072                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
11E6 7611           3073                             mov             @r0,#11h
11E8 80A2           3074                             jmp             lovich
                    3075     
11EA 78B1           3076     vvizko:         mov             r0,#vichR
11EC E6             3077                             mov             a,@r0
                    3078                     ;       cjne    @r0,#12h,clrvich
11ED B412E2         3079                             cjne    a,#12h,clrvich
11F0 7621           3080                             mov             @r0,#21h                ;изм конст->a=+0000     (vv
                             od)
11F2 78B2           3081                             mov             r0,#marker
11F4 7604           3082                             mov             @r0,#4;9
11F6 753A04         3083                             mov             movleft,#4
11F9 753B07         3084                             mov             movrig,#7
11FC 900000   F     3085                             mov             dptr,#teAequ0
11FF 120000   F     3086                             call    lotext
                    3087                             
1202 120000   F     3088                             call    outA
1205 434B08         3089                             orl             bufind+11,#08h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3090                             
1208 020000   F     3091                             jmp             goto7;routF
                    3092     ;hnor13:                jmp             hnor12          
120B B6210C         3093     izchi:          cjne    @r0,#21h,tlabelI
                    3094     ;<- при вводе цифр А                            
                    3095                     ;        mov            p3,#0fbh   
                    3096                     ;       jnb             p3.7,li21
                    3097             ;clr            bitmig
120E 78B2           3098                             mov             r0,#marker
1210 16             3099                             dec             @r0
1211 B60201         3100                             cjne    @r0,#2,li21
1214 06             3101                             inc             @r0;marker=3 +/-
1215 C219           3102     li21:           clr             bitmig
1217 020000   F     3103                             jmp             goto7;outF
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    49

                    3104     
121A 020000   F     3105     tlabelI:        jmp             labelI
                    3106     
                    3107     ;                       load    0 1 2 3 4 5             
121D 06050403       3108     sootv:          db              6,5,4,3,2,1;parT
1221 0201                    
                    3109     ;
                    3110     
                    3111     ;нажата кн ввод при наборе Т
1223 75B0F7         3112     hnot1:                  mov             p3,#0f7h
1226 20B787         3113                                     jb              p3.7,routF;out7
1229 B70541         3114                                     cjne    @r1,#5,nohnot1  ;r1=load
122C 794A           3115                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
122E E7             3116                                     mov             a,@r1
122F 4440           3117                                     orl             a,#40h;.6
1231 F7             3118                                     mov             @r1,a
1232 8000           3119                                     jmp             loadb
                    3120                                     
                    3121                                     
1234 789A           3122     loadB:                  mov             r0,#parT
1236 900000   F     3123                                     mov             dptr,#sootv
1239 79B7           3124                                     mov             r1,#load                
123B E7             3125                                     mov             a,@r1;load
123C 93             3126                                     movc    a,@a+dptr
123D F6             3127                                     mov             @r0,a
123E 120000   F     3128                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3129                                      ;r4=b1 r5=b2
1241 120000   F     3130                                     call    iniacp;инициализация АЦП
1244 120000   F     3131                                     call    loadUS
1247 120000   F     3132                                     call    clmassix        
124A D204           3133                                     setb    bitizm
124C C210           3134                                     clr             bitt2
124E C3             3135                                      clr            c
124F 789A           3136                                  mov                r0,#parT
1251 79AF           3137                                      mov            r1,#parN
1253 7402           3138                                  mov                a,#2
1255 96             3139                                 subb                a,@r0
1256 5005           3140                                 jnc                 loadB2
1258 7701           3141                                     mov             @r1,#1;N=1         ;T>=2
125A 020000   F     3142     bout7:                  jmp             goto7;out7
                    3143     
125D B702FA         3144     loadB2:                 cjne    @r1,#2,bout7
1260 7702           3145                                     mov             @r1,#2;N=2
1262 020000   F     3146                                     jmp             goto7;out7
1265                3147     nohnot2:                ;в буфере 1 зажечь <=0,1s
1265 794A           3148                                     mov             r1,#bufind+10
1267 E7             3149                                     mov             a,@r1
1268 4410           3150                                     orl             a,#10h;.4
126A F7             3151                                     mov             @r1,a
126B 80C7           3152                                     jmp             loadB
126D B704F5         3153     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
1270 794A           3154                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
1272 E7             3155                                     mov             a,@r1
1273 4420           3156                                     orl             a,#20h;.5
1275 F7             3157                                     mov             @r1,a
1276 80BC           3158                                     jmp             loadB
                    3159     
                    3160     ;кнопка ПАМЯТЬ
1278 C204           3161     knMEM:                  clr             bitizm          ;off IZM
127A 900000   F     3162                                     mov             dptr,#teCLE
127D 120000   F     3163                                     call    lotext    ;в буф2 записать ОЧИСТКА
1280 D20B           3164                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1282 78B0           3165                                     mov             r0,#level
1284 7611           3166                                     mov             @r0,#11h
1286 783D           3167     onmem11:                mov             r0,#chkl
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    50

1288 7603           3168                                     mov             @r0,#03
128A 08             3169                                     inc             r0
128B 76E8           3170                                     mov             @r0,#0e8h               ;1000
128D 020000   F     3171                                     jmp             out7;goto7;out7
                    3172     
1290 020000   F     3173     rnomemk:                jmp             nomemk          ;
1293                3174     labelK:
                    3175     
                    3176     ;;;;;;;;;;;;
1293 300BFA         3177                               jnb           bitmem,rnomemk
1296 78B0           3178                               mov           r0,#level
1298 B61132         3179                               cjne          @r0,#11h,klev1;nome11
129B 75B0FB         3180     lefmem11:         mov           p3,#0fbh
129E E5B0           3181                               mov           a,p3
12A0 20E70E         3182                               jb            acc.7,rkvvod0
12A3 B6110E         3183                               cjne          @r0,#11h,locle          ;<-memory
12A6 7613           3184                               mov           @r0,#13h
12A8 900000   F     3185     lolist:           mov           dptr,#teLIST
12AB 120000   F     3186                               call          lotext           ;ПРОСМОТР
12AE 020000   F     3187                               jmp   goto7;  outF
                    3188     
12B1 020000   F     3189     rkvvod0:        jmp             kvvod0
                    3190     
                    3191     
12B4 B6120B         3192     locle:          cjne            @r0,#12h,lowr           ;<-memory
12B7 7611           3193                               mov           @r0,#11h                   ;ОЧИСТКА
12B9 900000   F     3194     loadcle:          mov           dptr,#teCLE
12BC 120000   F     3195                               call          lotext
12BF 020000   F     3196                               jmp           goto7;outF
12C2 7612           3197      lowr:          mov             @r0,#12h
12C4 900000   F     3198      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
12C7 120000   F     3199                             call    lotext
12CA 020000   F     3200                             jmp             goto7;outF
12CD B61202         3201      klev1:          cjne   @r0,#12h,klev2
12D0 80C9           3202                             jmp             lefmem11
12D2 B61302         3203     klev2:           cjne   @r0,#13h,klev22   ;11-13 нет
12D5 80C4           3204                             jmp             lefmem11
                    3205     
                    3206     ;<- vvod на более низких уровнях
12D7 B62114         3207     klev22:         cjne    @r0,#21h,klev21
12DA 75B0FB         3208     lev220:         mov             p3,#0fbh
12DD 20B72F         3209                             jb              p3.7,kgo23
12E0 B62146         3210                             cjne    @r0,#21h,kfull
12E3 7622           3211                             mov             @r0,#22h
12E5 900000   F     3212                             mov             dptr,#teBL
12E8 120000   F     3213                             call    lotext
12EB 020000   F     3214                             jmp             goto7;outF
                    3215                                     
12EE B62208         3216     klev21:         cjne    @r0,#22h,klev23
12F1 80E7           3217                             jmp             lev220
                    3218     
12F3 020000   F     3219     rlabL2:         jmp             labL2
12F6 020000   F     3220     rlabM:          jmp             labM
                    3221     
12F9 B623FA         3222     klev23:          cjne   @r0,#23h,rlabM
12FC 75B0FB         3223                              mov    p3,#0fbh
12FF 20B7F1         3224                              jb             p3.7,rlabL2
1302 75B0F7         3225                              mov    p3,#0f7h
1305 20B74F         3226                              jb             p3.7,ddoutf
                    3227                              ;очистить блок памяти с набранным номером
1308 C20B           3228                              clr    bitmem  ;сбр признак памяти 
130A D204           3229                              setb   bitizm
130C 020000   F     3230                              jmp    goto7;outF
                    3231                             
130F 75B0F7         3232     kgo23:           mov    p3,#0f7h
1312 20B742         3233                             jb              p3.7,ddoutf
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    51

1315 B62107         3234                             cjne    @r0,#21h,go23no
                    3235                             ;очистить память
1318 C20B           3236                             clr             bitmem
131A D204           3237                             setb    bitizm
131C 020000   F     3238                             jmp             goto7;outF
                    3239     
131F 7623           3240     go23no:    mov          @r0,#23h
1321 753B08         3241                                             mov                     movrig,#8
1324 753A07         3242                                             mov             movleft,#7
1327 8038           3243                             jmp             loblok;БЛОК 00
                    3244     
1329 7621           3245     kfull:          mov             @r0,#21h
132B 8024           3246                             jmp             gofull
                    3247                             
                    3248                                             
132D 020000   F     3249     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3250                             
1330 75B0FB         3251     nome11:           mov           p3,#0fbh
1333 E5B0           3252                               mov           a,p3
1335 20E70C         3253                               jb            acc.7,kvvod0
1338 B61205         3254                               cjne          @r0,#12h,mem12no        
133B 7611           3255                               mov           @r0,#11h                ;ОЧИСТКА
133D 020000   F     3256                               jmp            loadcle
                    3257     
1340                3258     mem12no:        ;cjne           @r0,#13h,lowr           
1340 7612           3259                               mov           @r0,#12h                   ;
1342 8080           3260                               jmp           lowr1                     ;ЗАПИСЬ
                    3261     
1344 75B0F7         3262     kvvod0:           mov           p3,#0f7h
1347 20B70D         3263                               jb            p3.7,ddoutf
134A 78B0           3264                               mov           r0,#level
134C B6110D         3265                               cjne          @r0,#11h,mvv11
134F 7621           3266                               mov           @r0,#21h                ;ПОЛНАЯ
1351 900000   F     3267     gofull:           mov           dptr,#teFULL
1354 120000   F     3268                               call          lotext
1357 801F           3269     ddoutf:         jmp             mlabL2  ;<-
                    3270     
1359 020000   F     3271     jmp             goto7
                    3272     
135C B61215         3273     mvv11:            cjne          @r0,#12h,mvv12
135F 7631           3274                                     mov             @r0,#31h
1361 900000   F     3275     loblok:                 mov             dptr,#teBLOK;БЛОК 00
1364 120000   F     3276                                     call    lotext
1367 78B2           3277                                     mov             r0,#marker
1369 7607           3278                                     mov             @r0,#7
136B 753B08         3279                                     mov             movrig,#8
136E 753A07         3280                                     mov             movleft,#7
1371 020000   F     3281                                     jmp             goto7;outF
1374 7641           3282     mvv12:                  mov             @r0,#41h                ; БЛОК 00
1376 80E9           3283                                     jmp             loblok
                    3284     
                    3285     
                    3286     
1378                3287     mlabL2:         ;jmp            labL2
                    3288                                             ;  уст курсор в правую позицию 
                    3289                                     ;                               29.12.06
                    3290     ;;;;;;;;;;;;;;;;;;
                    3291     ;необходимо не портить цифру в следуюем справа знакоместе
                    3292     ;т е сохранить ее в ячейке для мигания в противном случае
                    3293     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3294     ;       знакоместа
1378 78B2           3295                                             mov             r0,#marker
137A 7440           3296                                     mov             a,#bufind
137C 26             3297                                             add             a,@r0                   ;a=bufind+m
                             arker
137D F9             3298                                             mov             r1,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    52

137E 09             3299                                             inc             r1
137F 873C           3300                                             mov             savba,@r1
                    3301     ;;;;;;;;;;;;;;;;
1381 78B2           3302                       mov           r0,#marker      ;курсор справа  ?
1383 E53B           3303                             mov             a,movrig
1385 C3             3304                             clr             c
1386 96             3305                             subb    a,@r0
1387 6006           3306                             jz         equ2l
1389 E53B           3307                             mov             a,movrig;уст в правую позицию
138B F6             3308                             mov             @r0,a
                    3309     ;                       lool
138C 020000   F     3310                             jmp             goto7                                            
138F E53A           3311     equ2l:          mov             a,movleft;уст в левую позицию
1391 F6             3312                             mov             @r0,a   
1392 020000   F     3313                             jmp             goto7
                    3314                     
                    3315     
1395 B63137         3316     labM:                   cjne    @r0,#31h,nom31
1398 75B0FB         3317                                     mov             p3,#0fbh
139B 30B7DA         3318                                     jnb             p3.7,mlabL2
139E 75B0F7         3319                                mov          p3,#0f7h
13A1 20B7B3         3320                                jb           p3.7,ddoutf
                    3321                                
13A4 7632           3322                                mov          @r0,#32h
                    3323                                     ;       считать с индикатора  
13A6 7F0A           3324                                     mov             r7,#10
13A8 7853           3325                                     mov             r0,#adec
13AA 120000   F     3326                                     call    clearN
13AD 120000   F     3327                                     call    upak2                   
13B0 784F           3328                                     mov             r0,#abin
13B2 7953           3329                                     mov             r1,#adec                        ;мл        
                              ст
13B4 120000   F     3330                                     call    decbin                  ;abin..abin+3 (hex)
                    3331                                     ;call   loadr2                  ;r2..r5
                    3332                                     ;call   altof                   ;r2..r5->int
13B7 78C4           3333                                mov          r0,#nblok       ;   сохранить
13B9 E54F           3334                                mov          a,abin          ;;мл
13BB F6             3335                                mov          @r0,a
13BC 900000   F     3336                                mov          dptr,#tebBL;НАЧ БЛОК 000
13BF 120000   F     3337                                call         lotext
13C2 78B2           3338                                mov          r0,#marker
13C4 7607           3339                                mov          @r0,#7
13C6 753B09         3340                                mov          movrig,#9
13C9 753A07         3341                                mov          movleft,#7
13CC 020000   F     3342     rgoto7:            jmp     goto7;outF
                    3343     
13CF B6324C         3344     nom31:             cjne         @r0,#32h,nom32
13D2 75B0FB         3345                                     mov             p3,#0fbh
13D5 20B714         3346                                     jb              p3.7,no31n
                    3347                                     
13D8 78B2           3348     lefcur:         mov             r0,#marker      ;курсор слева?
13DA E53A           3349                             mov             a,movleft
13DC C3             3350                             clr             c
13DD 96             3351                             subb    a,@r0
13DE 7006           3352                             jnz        noequ2
13E0 E53B           3353                             mov             a,movrig
13E2 F6             3354                             mov             @r0,a;уст в крайнюю правую позицию
13E3 020000   F     3355                             jmp             goto7
13E6 120000   F     3356     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
13E9 020000   F     3357                             jmp        goto7
                    3358                                     
13EC 75B0F7         3359     no31n:             mov          p3,#0f7h
13EF 20B7DA         3360                                     jb              p3.7,rgoto7
13F2 7633           3361                                     mov             @r0,#33h
                    3362                                     ;запомнить номер ячейки блока
13F4 7F0A           3363                                             mov             r7,#10
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    53

13F6 7853           3364                                     mov             r0,#adec
13F8 120000   F     3365                                     call    clearN
13FB 120000   F     3366                                     call    upak3                   
13FE 784F           3367                                     mov             r0,#abin
1400 7953           3368                                     mov             r1,#adec                        ;мл        
                              ст
1402 120000   F     3369                                     call    decbin                  ;abin..abin+3 (hex)
1405 120000   F     3370                                     call    loadr2                  ;r2..r5
1408 120402         3371                                     call    altof                   ;r2..r5->int
                    3372     
140B 900000   F     3373                                      mov            dptr,#teeBL;КОН БЛОК 000
140E 120000   F     3374                                call         lotext
1411 78B2           3375                                mov          r0,#marker
1413 7607           3376                                mov          @r0,#7
1415 753B09         3377                                mov          movrig,#9
1418 753A07         3378                                mov          movleft,#7
141B 020000   F     3379                                jmp     goto7;
                    3380     
                    3381     
141E B63328         3382     nom32:           cjne           @r0,#33h,nom33
1421 75B0FB         3383                              mov            p3,#0fbh
1424 30B7B1         3384                              jnb            p3.7,lefcur
1427 75B0F7         3385                              mov            p3,#0f7h
142A 20B79F         3386                              jb             p3.7,rgoto7
                    3387                              ;запомнить номер ячейки конца блока
142D 7634           3388                              mov    @r0,#34h
142F 7F0A           3389     INTn:                   mov             r7,#10
1431 7853           3390                                     mov             r0,#adec
1433 120000   F     3391                                     call    clearN
1436 120000   F     3392                                     call    upak3                   
1439 784F           3393                                     mov             r0,#abin
143B 7953           3394                                     mov             r1,#adec                        ;мл        
                              ст
143D 120000   F     3395                                     call    decbin                  ;abin..abin+3 (hex)
1440 120000   F     3396                                     call    loadr2                  ;r2..r5
1443 120402         3397                                     call    altof                   ;r2..r5->int
1446 020000   F     3398     dgoto7:                  jmp            goto7
                    3399     
1449 B63443         3400     nom33:          cjne            @r0,#34h,labelP
144C 75B0FB         3401                               mov           p3,#0fbh
144F 30B786         3402                              jnb            p3.7,lefcur
1452 75B0F7         3403                              mov            p3,#0f7h
1455 20B7EE         3404                              jb             p3.7,dgoto7
1458 76FF           3405                              mov            @r0,#0ffh
                    3406                              ;T1<-число на индикаторе
145A C20B           3407                              clr            bitmem            ;vvod КОН БЛ 000
145C D204           3408                              setb           bitizm
                    3409                                     
145E 020000   F     3410                             jmp        goto7
                    3411     
                    3412     ;обработка кнопки меню ввод
1461 30112B         3413     labelS:         jnb                     bitmenu,labelP
1464 78B1           3414                                             mov                     r0,#vichR
1466 7415           3415                                             mov                     a,#15h
1468 C3             3416                                             clr                     c
1469 96             3417                                             subb            a,@r0
146A 4021           3418                                             jc                      rme21_23
                    3419                             
146C 75B0FB         3420                                             mov                     p3,#0fbh
146F 20B727         3421                                             jb                      p3.7,vvodm11_15
1472 78B1           3422                                             mov                     r0,#vichR
1474 B61138         3423                                             cjne                    @r0,#11h,me11_15dec;<-
1477 7615           3424                                             mov                     @r0,#15h
1479 900000   F     3425                                             mov                     dptr,#teKALIB
147C 120000   F     3426                                             call            lotext
147F 020000   F     3427                                             jmp                     onmem11
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    54

1482 C211           3428     menuon:         clr             bitmenu                 ;off menu
1484 D204           3429                                             setb    bitizm
                    3430     
1486 78B1           3431                                     mov             r0,#vichR
1488 7600           3432                                     mov             @r0,#0
148A 020000   F     3433                                     jmp             onmem11
                    3434     
                    3435                                             ;;;;;
                    3436             
148D 807A           3437     rme21_23:               jmp             me21_23                         
                    3438     
148F                3439     labelP:
148F 783D           3440     label7: mov             r0,#chkl
1491 7604           3441                                     mov             @r0,#04;3
1493 08             3442                                     inc             r0
1494 76E8           3443                                     mov             @r0,#0e8h               ;1000
1496 020000   F     3444                                     jmp             out7;
                    3445     
1499 78B1           3446     vvodm11_15:     mov                     r0,#vichR;vvod
149B 75B0F7         3447                                                     mov                     p3,#0f7h
149E 20B7EE         3448                                             jb                      p3.7,LABELP;????
                    3449                                     
                    3450     
14A1 B61112         3451                                             cjne                    @r0,#11h,tome21
14A4 7621           3452                                             mov                     @r0,#21h;vvod
14A6 900000   F     3453                                             mov                     dptr,#teTE11
14A9 120000   F     3454                                             call            lotext
14AC 020000   F     3455                                             jmp                     onmem11
                    3456     
14AF 16             3457     me11_15dec:             dec             @r0                             ;<-
14B0 120000   F     3458     lokame1:        call            lomenu
14B3 020000   F     3459                                             jmp                     onmem11
                    3460     
14B6 B61206         3461     tome21:         cjne                    @r0,#12h,tome13
                    3462                                             ;вкл тест интерфейса
14B9 020000   F     3463                                             jmp             testrs;??????????
14BC 020000   F     3464                                             jmp                     onmem11
                    3465     
14BF B61324         3466     tome13:         cjne                    @r0,#13h,tome14
14C2 7631           3467                                             mov                     @r0,#31h
                    3468                                             
14C4 7A50           3469                                             mov                     r2,#50h                    
                                  ;57.6->19.2
14C6 7B2C           3470                                             mov                     r3,#2ch
14C8 120454         3471                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
14CB E508           3472                                             mov                     a,r8
14CD B4000B         3473                                             cjne            a,#00,skor19
14D0 900000   F     3474                                             mov                     dptr,#teS57_6;57,6
14D3 120000   F     3475                                             call            lotext
14D6 C213           3476                                             clr                     bitv19
                    3477     
14D8 020000   F     3478                                             jmp             onmem11
14DB 900000   F     3479     skor19:         mov                     dptr,#teS19_2
14DE 120000   F     3480                                             call            lotext
14E1 D213           3481                                             setb            bitv19
                    3482             
14E3 020000   F     3483                                             jmp                     onmem11
                    3484                                             
                    3485     
14E6 B6140E         3486     tome14:         cjne                    @r0,#14h,tome15
14E9 D204           3487                                             setb            bitizm
14EB 7881           3488                                             mov                     r0,#chavt
14ED 7600           3489                                             mov                     @r0,#0
14EF 08             3490                                             inc                     r0
14F0 7600           3491                                             mov                     @r0,#0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    55

14F2 C211           3492     outmenu:        clr                     bitmenu
14F4 020000   F     3493                                             jmp                     out7
                    3494     
14F7 7651           3495     tome15:         mov                     @r0,#51h;ПАРОЛЬ 000
14F9 120000   F     3496                                             call            lomenu
14FC 78B2           3497                                             mov                     r0,#marker
14FE 7607           3498                                             mov                     @r0,#7
1500 753B09         3499                                             mov                     movrig,#9
1503 753A07         3500                                             mov                     movleft,#7
                    3501                                             ;setb           bitizm
1506 020000   F     3502                                             jmp                     onmem11
                    3503     
                    3504     
1509 78B1           3505     me21_23:        mov                     r0,#vichR               ;<-
150B 7423           3506                                             mov                     a,#23h
150D C3             3507                                             clr                     c
150E 96             3508                                             subb            a,@r0
150F 403D           3509                                             jc                      labelS1
1511 75B0FB         3510                                             mov                     p3,#0fbh
1514 20B718         3511                                             jb                      p3.7,vv21_23
1517 B6210B         3512                                             cjne            @r0,#21h,me21_23dec;-<
151A 7623           3513                                             mov                     @r0,#23h
151C 900000   F     3514                                             mov                     dptr,#teTE7
151F 120000   F     3515                                             call            lotext
1522 020000   F     3516                                             jmp                     onmem11
1525                3517     me21_23dec:     
1525 16             3518                                             dec                     @r0
1526 120000   F     3519                                             call            lomenu
1529 020000   F     3520                                             jmp                     onmem11
152C 020000   F     3521     onmem12:        jmp             outF    ;(ie7)                          
                    3522                                                     
152F 75B0F7         3523     vv21_23:        mov             p3,#0f7h                ;vvod
1532 20B7F7         3524                                             jb              p3.7,onmem12
1535 B6210C         3525                                             cjne            @r0,#21h,test22
                    3526                                             ;mov                    dptr,#tabt11;заслать ус 11А
1538 120000   F     3527     tests:          call            lotpus
153B D215           3528                                             setb            biteizm;запомнить режим ТИ
153D D204           3529                                             setb            bitizm
153F C211           3530                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
1541 020000   F     3531                                             jmp                     onmem11
1544 B62202         3532     test22:         cjne            @r0,#22h,test23
                    3533                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1547 80EF           3534                                             jmp             tests   
1549                3535     test23:
                    3536                                     ;       mov                     dptr,#tabt7;заслать ус 7А
1549 80ED           3537                                             jmp             tests   
154B 020000   F     3538     left_s:         jmp                     left_sk
154E B63149         3539     labelS1:        cjne            @r0,#31h,me_41
1551 75B0FB         3540                                             mov                     p3,#0fbh                   
                                  ;<-
1554 30B7F4         3541                                             jnb                     p3.7,left_s
1557 75B0F7         3542                                             mov                     p3,#0f7h
155A 20B7CF         3543                                             jb                      p3.7,onmem12
                    3544                                             ;запомнить признак установленной скорости в рпзу
                    3545     
                    3546     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3547     ;и запись во внешнее озу(0000h)
155D 7900           3548                                             mov             r1,#0                   ;
155F 7A50           3549                                     mov             r2,#50h
1561 7B00           3550                                     mov             r3,#00
1563 120499         3551                                     call    copyPP
                    3552                                     ;внести изменения во внешн озу
                    3553                                     ;KD=00 01 86 A0 (KD=1)
                    3554                                     ;кофф *100000 и переведенный в hex формат
                    3555                                     ;согласно адресов диапазонов и адресов яч вн озу 
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    56

1566 792C           3556                                     mov             r1,#2ch
1568 7400           3557                                     mov             a,#0;57,6
156A 301302         3558                                     jnb             bitv19,spwri
156D 7401           3559                                     mov             a,#1;19.6
156F F3             3560     spwri:  movx    @r1,a
                    3561     ;стереть страницу пап прогр 
1570 905000         3562                                     mov             dptr,#5000h
1573 7FFF           3563                                     mov             r7,#0ffh
1575 12043E         3564                                     call    cle256
                    3565     ;и запись в ячейки кофф памяти прогр (3000h) 
1578 7FFF           3566                                     mov             r7,#0ffh
157A 7900           3567                                     mov             r1,#0                           ;external r
                             am
157C 905000         3568                                     mov             dptr,#5000h
157F 120480         3569                                     call    wrpage
                    3570             
1582 201305         3571                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1585 758DF4         3572                                             mov                     TH1,#244                ;57
                             .6
1588 8003           3573                                             jmp                     outsko
158A 758DDC         3574     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
158D C211           3575     outsko:         clr             bitmenu
158F D204           3576                                             setb            bitizm
1591 020000   F     3577                                             jmp                     out7
                    3578     
1594 020000   F     3579     rlabels4:               jmp             labels4
1597 020000   F     3580     rlabelS13:      jmp             labelS13
                    3581     
159A B651F7         3582     me_41:          cjne            @r0,#51h,rlabels4
159D 75B0FB         3583                                             mov             p3,#0fbh;<-
15A0 30B7F4         3584                                             jnb             p3.7,rlabelS13
15A3 75B0F7         3585                                             mov             p3,#0f7h
15A6 20B76B         3586                                             jb              p3.7,vvmenu
                    3587                                             ;ввод пароля
                    3588                                             
                    3589     ;       считать с индикатора 
15A9 7F0E           3590                                     mov             r7,#14
15AB 784F           3591                                     mov             r0,#abin
15AD 120000   F     3592                                     call    clearN                  
                    3593                                     
                    3594     ;чтение номера байта с индикатора(3байта)
                    3595     ;bufind+3..bufind+9
                    3596     ;-  - - -
                    3597     ;- - - - - - - - - -
                    3598     ;adec..adec+9
                    3599     ;ст            мл
15B0 7849           3600                                     mov             r0,#bufind+9;
15B2 795C           3601                                     mov             r1,#adec+9
15B4 7F03           3602                                     mov             r7,#3;3bait
15B6 C3             3603     upav1:          clr             c
15B7 E6             3604                                     mov             a,@r0
15B8 9430           3605                                     subb    a,#30h
15BA F7             3606                                     mov             @r1,a
15BB 18             3607                                     dec             r0
15BC 19             3608                                     dec             r1
15BD DFF7           3609                                     djnz    r7,upav1;adec+7..adec+9
15BF 7A50           3610                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
15C1 7B28           3611                                             mov                     r3,#28h
15C3 120454         3612                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
                    3613     
15C6 E508           3614                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    57

15C8 B55A4C         3615                                     cjne            a,adec+7,parerr
15CB E509           3616                                     mov                     a,r9    
15CD B55B47         3617                                     cjne            a,adec+8,parerr
15D0 E50A           3618                                     mov                     a,r10
15D2 B55C42         3619                                     cjne            a,adec+9,parerr
                    3620                                     ;равны
15D5 78B1           3621                                             mov             r0,#vichR               ;режим меню
                              52
15D7 7652           3622                                             mov             @r0,#52h                ;0000-n
15D9 900000   F     3623                                             mov             dptr,#teKD;00000-nA
15DC 120000   F     3624                                             call            lotext
                    3625                                             ;;;;;;;;;
                    3626                                                     ;n(hex)->abin
15DF 120000   F     3627                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
15E2 2552           3628                                             add             a,abin+3
15E4 F552           3629                                             mov             abin+3,a
15E6 7853           3630                                             mov             r0,#adec
15E8 7952           3631                                             mov             r1,#abin+3      ;hex->10
15EA 120000   F     3632                                             call    bindec
15ED 855C48         3633                                             mov             bufind+8,adec+9
15F0 75472D         3634                                             mov             bufind+7,#2dh
                    3635     
15F3 79AE           3636                                             mov             r1,#diap
15F5 7848           3637                                             mov             r0,#bufind+8
15F7 E7             3638                                             mov             a,@r1
15F8 B40807         3639                                             cjne    a,#8,nodi8k
15FB 7630           3640                                             mov             @r0,#30h                 ;10-10
15FD 18             3641                                             dec             r0
15FE 7663           3642                                             mov             @r0,#63h;31h
1600 8008           3643                                             jmp             nodisk9
1602 B40905         3644     nodi8k:                         cjne    a,#9,nodisk9
                    3645                                     
1605 7631           3646                                             mov             @r0,#31h           ;10-11
1607 18             3647                                             dec             r0
1608 7663           3648                                             mov             @r0,#63h;31h
                    3649                                     
                    3650     
160A 78B2           3651     nodisk9:        mov                     r0,#marker
160C 7601           3652                                             mov                     @r0,#1
160E 753A01         3653                                             mov                     movleft,#1
1611 753B05         3654                                             mov                     movrig,#5
                    3655                                             
1614 020000   F     3656     vvmenu:         jmp             goto7
                    3657     
1617 753932         3658     parerr:         mov                     nuerr,#32h
161A 120000   F     3659                                             call            error
161D 120000   F     3660                                             call            ind
1620 120000   F     3661                                             call            z_1s
1623 C211           3662                                             clr                     bitmenu
1625 D204           3663                                             setb            bitizm
1627 78B2           3664                                             mov                     r0,#marker
1629 76FF           3665                                             mov                     @r0,#0ffh
162B 020000   F     3666                                             jmp             goto7
                    3667     
162E 30130B         3668     left_sk:                jnb                     bitv19,tosk19;<-
1631 900000   F     3669                                             mov                     dptr,#teS57_6;57,6
1634 120000   F     3670                                             call            lotext
1637 C213           3671                                             clr                     bitv19
1639 020000   F     3672                                             jmp             out7
163C 900000   F     3673     tosk19:         mov                     dptr,#teS19_2
163F 120000   F     3674                                             call            lotext
1642 D213           3675                                             setb            bitv19
1644 020000   F     3676                                             jmp             out7
                    3677     
1647                3678     labelS13:;<- MENU(ПАРОЛЬ 000)
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    58

                    3679             
                    3680     ;;;;;;;;;;;;;;;;;;
                    3681     ;необходимо не портить цифру в следуюем справа знакоместе
                    3682     ;т е сохранить ее в ячейке для мигания в противном случае
                    3683     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3684     ;       знакоместа
1647 78B2           3685                                     mov             r0,#marker
1649 7440           3686                                     mov             a,#bufind
164B 26             3687                                             add             a,@r0                   ;a=bufind+m
                             arker
164C F9             3688                                             mov             r1,a
164D 09             3689                                             inc             r1
164E 873C           3690                                             mov             savba,@r1
                    3691                                                     
1650 78B2           3692                                                     mov             r0,#marker
1652 16             3693                                                     dec             @r0                        
                                  
1653 C219           3694                                     clr             bitmig
1655 E53A           3695                                     mov                     a,movleft
1657 B60639         3696                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
165A 06             3697                                     inc             @r0
165B 020000   F     3698                                             jmp             goto7
                    3699     ;;;;;;;
                    3700     
165E                3701     vvkali52:       ;введено значение для калибровки
                    3702                                             ;число на индикаторе ->Ak  (52h)
                    3703                                             ;       считать с индикатора 
165E 7F0E           3704                                     mov             r7,#14
1660 784F           3705                                     mov             r0,#abin
1662 120000   F     3706                                     call    clearN                  
                    3707                                     
                    3708     ;чтение номера байта с индикатора(3байта)
                    3709     ;bufind+1..bufind+5
                    3710     ;-  - - -
                    3711     ;- - - - - - - - - -
                    3712     ;adec..adec+9
                    3713     ;ст            мл
1665 7845           3714                                     mov             r0,#bufind+5;
1667 795C           3715                                     mov             r1,#adec+9
1669 7F05           3716                                     mov             r7,#5;5bait
166B C3             3717     upav2:          clr             c
166C E6             3718                                     mov             a,@r0
166D 9430           3719                                     subb    a,#30h
166F F7             3720                                     mov             @r1,a
1670 18             3721                                     dec             r0
1671 19             3722                                     dec             r1
1672 DFF7           3723                                     djnz    r7,upav2;adec+7..adec+9
                    3724     
1674 784F           3725                                     mov             r0,#abin
1676 7953           3726                                     mov             r1,#adec                        ;мл        
                              ст
1678 120000   F     3727                                     call    decbin                  ;abin..abin+3 (hex)
167B 120000   F     3728                                     call    loadr2                  ;r2..r5
167E 120402         3729                                     call    altof   ;r2..r5->float
1681 78A4           3730                                     mov             r0,#rez_Ak
1683 120000   F     3731                                     call    saver2
1686 C211           3732                                             clr                     bitmenu
1688 D212           3733                                             setb            bitklb
                    3734                                             ;зажечь KMП
168A D204           3735                                             setb            bitizm;бит калибровки уже установле
                             н
168C 78B2           3736                                             mov                     r0,#marker
168E 76FF           3737                                             mov                     @r0,#0ffh
1690 020000   F     3738                                             jmp             goto7
                    3739                                              
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    59

1693 020000   F     3740     onmem13:        jmp             goto7   ;(ie7)
                    3741     
1696 B642C5         3742     labels4:        cjne            @r0,#42h,vvkali52
1699 75B0FB         3743                                             mov                     p3,#0fbh;<-
169C 30B7F4         3744                                             jnb             p3.7,onmem13
169F 75B0F7         3745                                             mov             p3,#0f7h;vvod
16A2 20B7EE         3746                                             jb              p3.7,onmem13
                    3747                                             
                    3748             
16A5 020000   F     3749     jmp             out7                                                    
                    3750     ;;;;;;;
16A8                3751     labelI:
16A8 75B0FE         3752                                     mov             p3,#0feh
16AB E5B0           3753                                     mov             a,p3
16AD 20E703         3754                                     jb              acc.7,nopoint
                    3755                                     ;
16B0 020000   F     3756                                     jmp             goto7;out7
                    3757     
16B3 75B0FB         3758     nopoint:                mov             p3,#0fbh
16B6 E5B0           3759                                     mov             a,p3
16B8 20E72C         3760                                     jb              acc.7,nopoin7
16BB 78B2           3761     labelS3:mov             r0,#marker
16BD E53A           3762                                     mov             a,movleft
16BF B40309         3763                                     cjne    a,#3,poina1
16C2 B6030B         3764                                     cjne    @r0,#3,nomarl;26
                    3765                                     ;mov            @r0,#9
16C5 E53B           3766     poina2: mov                     a,movrig                ;кн <- B=+00000
16C7 F6             3767                                     mov                     @r0,a
16C8 020000   F     3768                                     jmp             goto7;  out7
                    3769     
16CB B60402         3770     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
16CE 80F5           3771                                             jmp             poina2
                    3772     
                    3773     
16D0                3774     nomarl:                 ;                               29.12.06
                    3775     ;;;;;;;;;;;;;;;;;;
                    3776     ;необходимо не портить цифру в следуюем справа знакоместе
                    3777     ;т е сохранить ее в ячейке для мигания в противном случае
                    3778     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3779     ;       знакоместа
16D0 78B2           3780                                     mov             r0,#marker
16D2 7440           3781                                     mov             a,#bufind
16D4 26             3782                                             add             a,@r0                   ;a=bufind+m
                             arker
16D5 F9             3783                                             mov             r1,a
16D6 09             3784                                             inc             r1
16D7 873C           3785                                             mov             savba,@r1
                    3786                                                     
16D9 78B2           3787                                                     mov             r0,#marker
16DB 16             3788                                                     dec             @r0                        
                                  
16DC C219           3789                                     clr             bitmig
16DE E53A           3790                                     mov                     a,movleft
16E0 B40349         3791                                     cjne            a,#3,poinA
16E3 B60279         3792                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
16E6 06             3793     poin3:  inc             @r0
                    3794     ;нажат ввод А =000000 запомнить константу А
16E7 75B0F7         3795     nopoin7:           mov          p3,#0f7h
16EA E5B0           3796                                     mov             a,p3
16EC 20E770         3797                                     jb              acc.7,out7
16EF 78B1           3798                                     mov             r0,#vichR
16F1 E6             3799                                     mov             a,@r0
16F2 B6213C         3800                                     cjne    @r0,#21h,no21p7
16F5 7631           3801                                     mov             @r0,#31h
                    3802                             ;       считать с индикатора  упаковать в плавающий формат
                    3803                             ;   сохранить
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    60

16F7 7F0E           3804                                     mov             r7,#14
16F9 784F           3805                                     mov             r0,#abin
16FB 120000   F     3806                                     call    clearN                  
16FE 120000   F     3807                                     call    upakA
                    3808                                     
1701 784F           3809                                     mov             r0,#abin
1703 7953           3810                                     mov             r1,#adec                        ;мл        
                              ст
1705 120000   F     3811                                     call    decbin                  ;abin..abin+3 (hex)
1708 120000   F     3812                                     call    loadr2                  ;r2..r5
170B 120402         3813                                     call    altof                   ;r2..r5->int
170E 78BC           3814                                     mov             r0,#konstA
1710 120000   F     3815                                     call    saver2
                    3816     ;26
1713 78B2           3817                                     mov             r0,#marker
1715 7603           3818                                     mov             @r0,#3
1717 753B08         3819                                     mov             movrig,#8
171A 753A03         3820                                     mov             movleft,#3
171D 900000   F     3821                                     mov             dptr,#teBequ0
1720 120000   F     3822                                     call    lotext
1723 120000   F     3823                                     call            outB
1726 534BF7         3824                                     anl             bufind+11,#0f7h         ;гашение точки bufi
                             nd+7
1729 020000   F     3825                                     jmp             goto7;out7
                    3826     
172C B60330         3827     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
172F 80B5           3828                                             jmp             poin3
                    3829     
1731                3830     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    3831                             ;   сохранить
1731 7F0E           3832                                     mov             r7,#14
1733 784F           3833                                     mov             r0,#abin
1735 120000   F     3834                                     call    clearN                  
1738 120000   F     3835                                     call    upakB                   
173B 784F           3836                                     mov             r0,#abin
173D 7953           3837                                     mov             r1,#adec                        ;мл        
                              ст
173F 120000   F     3838                                     call    decbin                  ;abin..abin+3 (hex)
1742 120000   F     3839                                     call    loadr2                  ;r2..r5
1745 120402         3840                                     call    altof                   ;r2..r5->int
1748 301B04         3841                                     jnb             bitznB,pozB
174B EA             3842                                     mov             a,r2
174C 4480           3843                                     orl             a,#80h
174E FA             3844                                     mov             r2,a                    ;знак-
174F 78C0           3845     pozB:           mov             r0,#konstB
1751 120000   F     3846                                     call    saver2
                    3847     
1754 79B2           3848                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1756 77FF           3849                                     mov             @r1,#0ffh
1758 78B1           3850                                     mov             r0,#vichR
175A 7611           3851                                     mov             @r0,#11h
175C 020000   F     3852                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    3853                                     
                    3854     
175F                3855     out7:                   ;mov            IE,#80h
175F D083           3856                                     pop             dph
1761 D082           3857                                     pop             dpl
1763 D007           3858                                     pop             rr7     
1765 D006           3859                                     pop             rr6
1767 D005           3860                                     pop             rr5
1769 D004           3861                                     pop             rr4
176B D003           3862                                     pop             rr3
176D D002           3863                                     pop             rr2
176F D001           3864                                     pop             rr1                             
1771 D000           3865                                     pop             rr0
1773 D0D0           3866                                     pop             psw
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    61

1775 D0E0           3867                                     pop             acc
1777 E5AD           3868                                     mov             a,P3IF
1779 547F           3869                                     anl             a,#7fh
177B F5AD           3870                                     mov             P3IF,a
177D 75B0C0         3871                                     mov             P3,#0c0h
                    3872     ;clr            bitmig
1780 75E730         3873                                     mov             EIE2,#30H
1783 C219           3874     clr             bitmig
1785 32             3875                                     reti
                    3876     
                    3877     
                    3878                                     
                    3879     
                    3880     
1786 78B1           3881     lomenu:         mov             r0,#vichR
1788 B61107         3882                                             cjne    @r0,#11h,menu12
178B 900000   F     3883                                             mov             dptr,#teTESI
178E 120000   F     3884     lome1:                  call    lotexT
1791 22             3885                                             ret
1792 B61205         3886     menu12:         cjne    @r0,#12h,menu13
1795 900000   F     3887                                             mov             dptr,#teTESR
1798 80F4           3888                                             jmp             lome1
179A B61305         3889     menu13:         cjne    @r0,#13h,menu14
179D 900000   F     3890                                             mov             dptr,#teSKOR
17A0 80EC           3891                                             jmp             lome1
17A2 B61405         3892     menu14:         cjne    @r0,#14h,menu15
17A5 900000   F     3893                                             mov             dptr,#teAVK
17A8 80E4           3894                                             jmp             lome1
17AA B61505         3895     menu15:                 cjne    @r0,#15h,menu21
17AD 900000   F     3896                                             mov             dptr,#teKALIB
17B0 80DC           3897                                             jmp             lome1
                    3898     
17B2 B62105         3899     menu21: cjne    @r0,#21h,menu22
17B5 900000   F     3900                                             mov             dptr,#teTE11
17B8 80D4           3901                                             jmp             lome1
17BA B62205         3902     menu22:         cjne    @r0,#22h,menu23
17BD 900000   F     3903                                             mov             dptr,#teTE9
17C0 80CC           3904                                             jmp             lome1
17C2 B62305         3905     menu23:         cjne    @r0,#23h,menu31
17C5 900000   F     3906                                             mov             dptr,#teTE7
17C8 80C4           3907                                             jmp             lome1
17CA B63105         3908     menu31:         cjne    @r0,#31h,menu41
17CD 900000   F     3909                                             mov             dptr,#teS57_6
17D0 80BC           3910                                             jmp             lome1
                    3911     
17D2                3912     menu41:         
17D2 900000   F     3913                                             mov             dptr,#tePAR
17D5 80B7           3914                                             jmp             lome1
                    3915     
                    3916     ;
                    3917     ;goprogr:       jmp     izm
                    3918     ;тест интерфейса
17D7                3919     testrs: ;jb     p0.3,goprogr
17D7 C2AC           3920                                     clr     IE.4
17D9 759955         3921     test1:  mov     SBUF0,#55h
17DC 3099FD         3922                                     jnb     SCON0.1,$
17DF 78B8           3923                                     mov     r0,#work;chtest
17E1 76BE           3924                                     mov     @r0,#190d;60
                    3925     
17E3 309822         3926     test01: jnb     SCON0.0,test2
17E6 E599           3927                                     mov     a,SBUF0
17E8 B4550F         3928                                     cjne    a,#55h,test3
17EB C299           3929     test4:  clr     SCON0.1
17ED C298           3930                                     clr     SCON0.0
17EF 7D0A           3931                                     mov     r5,#10
17F1 7840           3932                                     mov     r0,#bufind              ;- - - -
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    62

17F3 762D           3933     test04: mov     @r0,#2dh
17F5 08             3934                                     inc     r0
17F6 DDFB           3935                                     djnz    r5,test04
                    3936     ;                               ;call   wwind
17F8 80DF           3937                                     jmp     test1
17FA                3938     test3:  
17FA 753933         3939                                     mov     nuerr,#33h
17FD 120000   F     3940                                     call    error           ;на кран прибора ERR 3
                    3941                             
1800 120000   F     3942                                     call    ind;
1803 120000   F     3943                                     call    z_01s           ;100ms
1806 80E3           3944                                     jmp     test4
1808 78B8           3945     test2:  mov     r0,#work;chtest
180A B60002         3946                                     cjne    @r0,#0,test02
180D 8003           3947                                     jmp     test5
180F 16             3948     test02: dec     @r0
1810 80D1           3949                                     jmp     test01
1812 120000   F     3950     test5:  call    z_1ms           ;1ms
1815 C299           3951                                     clr     SCON0.1
                    3952             
1817 753933         3953                                     mov     nuerr,#33h
181A 120000   F     3954                                     call    error           ;на кран прибора ERR 3
                    3955                                     
181D 120000   F     3956                                     call    ind
1820 120000   F     3957                                     call    z_01s           ;100ms
1823 80B4           3958                                     jmp     test1   
                    3959     
                    3960     
                    3961     
1825                3962     endkalib:;KD=Ak/A3
1825 789C           3963                                             mov                     r0,#rez_A3
1827 120000   F     3964                                             call            resar8
182A 78A4           3965                                             mov                     r0,#rez_Ak
182C 120000   F     3966                                             call            resar2
182F 1202B7         3967                                             call            fldiv
                    3968                                                     
1832 900000   F     3969                                     mov     dptr,#CHtho;100000
1835 120000   F     3970                                     call    ldc_ltemp                       ;r8..r11=8
1838 120203         3971                                     call    flmul
183B 120343         3972                                     call    ftol            ;r2..r5->float
                    3973     
183E 78A0           3974                                             mov                     r0,#koefKD
1840 120000   F     3975                                             call            saver2
                    3976                                             ;запись в рпзу в соотв ячейку
1843 C212           3977                                             clr             bitklb
1845 900000   F     3978                                             mov             dptr,#teEND
1848 120000   F     3979                                             call    lotext
184B 120000   F     3980                                             call    ind
184E 120000   F     3981                                             call    z_1s
1851 120000   F     3982                                             call    z_1s
1854 020000   F     3983                                             jmp             outF
                    3984     
                    3985     ;$include (d:\amp\subr3.asm) 
1857            +1  3986     loadUS: ;если идет тест измерения ус восстановить для теста
1857 201533     +1  3987                                     jb              biteizm,yestest
185A 79AE       +1  3988                                             mov             r1,#diap
185C E7         +1  3989                             mov             a,@r1
185D 23         +1  3990                             rl              a;*2
185E FC         +1  3991                             mov             r4,a                    ;save a
185F 900000   F +1  3992                             mov             dptr,#tabus
1862 93         +1  3993                             movc    a,@a+dptr
1863 FA         +1  3994                             mov             r2,a                    ;high byte
1864 E584       +1  3995                             mov             a,p4
1866 5401       +1  3996                             anl             a,#01
1868 4A         +1  3997                             orl             a,r2
1869 F584       +1  3998                             mov             p4,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    63

186B 0C         +1  3999                             inc             r4
186C EC         +1  4000                             mov             a,r4
186D 93         +1  4001                             movc    a,@a+dptr
186E FB         +1  4002                             mov             r3,a                    ;low byte
186F E585       +1  4003                             mov             a,p5
1871 5401       +1  4004                             anl             a,#01
1873 4B         +1  4005                             orl             a,r3
1874 F585       +1  4006                             mov             p5,a
1876 799A       +1  4007                             mov             r1,#parT
1878 B7010E     +1  4008                             cjne    @r1,#1,bret
187B 79AE       +1  4009                             mov             r1,#diap                  ;10s (parT=1)
187D 7405       +1  4010                             mov             a,#5                      ;10-8..10-11 p4.1=1
187F C3         +1  4011                             clr             c
1880 97         +1  4012                             subb    a,@r1
1881 5006       +1  4013                             jnc             bret
1883 E584       +1  4014                             mov             a,p4
1885 4402       +1  4015                             orl             a,#02
1887 F584       +1  4016                             mov             p4,a                     ;10-8..10-11 p4.1=1
1889 120000   F +1  4017     bret:      call          louizm         ;us если вкл кн ИЗМЕР
188C 22         +1  4018                             ret
188D            +1  4019     yestest:
188D 120000   F +1  4020                             call            lotpus          ;ус теста измерения
1890 22         +1  4021                             ret
                +1  4022                             
                +1  4023     ;загр ус для кор 0
                +1  4024     ;dptr-
1891 E4         +1  4025     lospus:         clr             a
                +1  4026                             ;movc   a,@a+dptr
                +1  4027                             ;mov            r2,a                    ;high byte
                +1  4028                             ;mov            a,p4
                +1  4029                             ;anl            a,#01
                +1  4030                             ;orl            a,r2
                +1  4031                             ;mov            p4,a
                +1  4032                             ;inc            dptr
1892 E4         +1  4033                             clr             a
1893 93         +1  4034                             movc    a,@a+dptr
1894 FB         +1  4035                             mov             r3,a                    ;low byte
1895 E585       +1  4036                             mov             a,p5
1897 54BF       +1  4037                             anl             a,#0bfh;01
1899 4B         +1  4038                             orl             a,r3
189A F585       +1  4039                             mov             p5,a
189C 22         +1  4040                             ret
                +1  4041     
189D 80         +1  4042     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  4043     
                +1  4044     ;us кнопка измерения выкл
189E 88D6       +1  4045     tabus:     db           88h,0d6h         ;10-2
18A0 88F6       +1  4046                             db      88h,0f6h         ;10-3
18A2 88D6       +1  4047                             db              88h,0d6h         ;10-4
18A4 88F6       +1  4048                             db              88h,0f6h         ;10-5
18A6 9AD6       +1  4049                             db      9ah,0d6h         ;10-6
18A8 9AF6       +1  4050                             db              9ah,0f6h         ;10-7
18AA ACD6       +1  4051                             db              0ach,0d6h        ;10-8
18AC ACF6       +1  4052                             db      0ach,0f6h        ;10-9
18AE C8D6       +1  4053                             db              0c8h,0d6h        ;10-10
18B0 C8F6       +1  4054                             db              0c8h,0f6h        ;10-11
                +1  4055     
18B2            +1  4056     tabt11: 
18B2 66E6       +1  4057                             db              66h,0e6h;10-11
18B4            +1  4058     tabt9:  
18B4 32E6       +1  4059                             db              32h,0e6h;10-9
18B6            +1  4060     tabt7:  
18B6 18EE       +1  4061                             db              18h,0eeh;10-7
                +1  4062     
                +1  4063      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  4064     ;в зав от parT (Tизм)
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    64

18B8 79B7       +1  4065     loadT:          mov             r1,#load;parT
18BA 7840       +1  4066     lolevT:         mov             r0,#bufind+0
18BC 7B0A       +1  4067                             mov             r3,#10
18BE 75F00A     +1  4068                             mov             b,#10
18C1 E7         +1  4069                             mov             a,@r1
18C2 A4         +1  4070                             mul             ab
18C3 FC         +1  4071                             mov             r4,a                    ;save a
18C4 900000   F +1  4072                             mov             dptr,#textT
18C7 93         +1  4073             lod1:   movc    a,@a+dptr
18C8 F6         +1  4074                             mov             @r0,a
18C9 08         +1  4075                             inc             r0
18CA 0C         +1  4076                             inc             r4
18CB EC         +1  4077                             mov             a,r4
18CC DBF9       +1  4078                             djnz    r3,lod1
18CE 22         +1  4079                             ret     
                +1  4080     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  4081     ;dptr-адр строки текста         
18CF            +1  4082     lotext:         
18CF 7B0A       +1  4083                             mov             r3,#10
18D1 7840       +1  4084                             mov             r0,#bufind+0
18D3 E4         +1  4085     lodt:           clr             a
18D4 93         +1  4086                             movc    a,@a+dptr
18D5 F6         +1  4087                             mov             @r0,a
18D6 08         +1  4088                             inc             r0
18D7 A3         +1  4089                             inc             dptr
18D8 DBF9       +1  4090                             djnz    r3,lodt
18DA 22         +1  4091                             ret                                     
                +1  4092     
                +1  4093     
                +1  4094     
                +1  4095     
                +1  4096      ;задержка 100 мкс
18DB 7978       +1  4097     z_100:    mov R1,#78h     ;загрузка первого числа
18DD 7A02       +1  4098     z100:     mov R2,#2h     ;загрузка второго числа
18DF DAFE       +1  4099     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
18E1 D9FA       +1  4100               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
18E3 22         +1  4101               ret           
                +1  4102     
                +1  4103     ;задержка 34 мкс
18E4 7B8B       +1  4104     z_5:      mov R3,#8Bh      ;загрузка числа
18E6 DBFE       +1  4105     ct:       djnz R3,ct
18E8 22         +1  4106               ret
                +1  4107     
                +1  4108     ;задержка 15 мс
18E9 79FA       +1  4109     z_15:     mov R1,#0FAh    ;загрузка первого числа
18EB 7AED       +1  4110     z15:      mov R2,#0EDh   ;загрузка второго числа
18ED DAFE       +1  4111     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
18EF D9FA       +1  4112               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
18F1 22         +1  4113               ret   
                +1  4114                                               
                +1  4115      ;задержка 1 мс
18F2 7910       +1  4116     z_1ms:     mov R1,#10h     
18F4 7AED       +1  4117     ss1:       mov R2,#0EDh    
18F6 DAFE       +1  4118                djnz R2, $    
18F8 D9FA       +1  4119                djnz R1, ss1   
18FA 22         +1  4120                ret   
                +1  4121     
                +1  4122      ;????????
                +1  4123     ;задержка 1с
18FB 7D1F       +1  4124     z_1s:   mov             r5,#01fh 
18FD 7EFF       +1  4125     co2s:   mov     R6,#0ffh     
18FF 7FFF       +1  4126     z1s:     mov    R7,#0ffh     
1901 DFFE       +1  4127     co1s:   djnz    R7, co1s        
1903 DEFA       +1  4128             djnz    R6, z1s 
1905 DDF6       +1  4129                     djnz    r5,co2s
1907 22         +1  4130               ret
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    65

                +1  4131     ;задержка 0,1с
1908 7D03       +1  4132     z_01s:           mov            r5,#03h 
190A 7EFF       +1  4133     co02s:          mov     R6,#0ffh     
190C 7FFF       +1  4134     z01s:           mov     R7,#0ffh     
190E DFFE       +1  4135                             djnz    R7, $   
1910 DEFA       +1  4136                     djnz    R6, z01s 
1912 DDF6       +1  4137                             djnz    r5,co02s
1914 22         +1  4138                      ret
                +1  4139                                               
                +1  4140     ;задержка 0,5с
1915 7D0D       +1  4141     z_05s:           mov            r5,#0dh 
1917 7EFF       +1  4142     co05s:                  mov     R6,#0ffh     
1919 7FFF       +1  4143     z05s:           mov     R7,#0ffh     
191B DFFE       +1  4144                                     djnz    R7, $   
191D DEFA       +1  4145                     djnz    R6, z05s 
191F DDF6       +1  4146                                             djnz    r5,co05s
1921 22         +1  4147                      ret                                                     
                +1  4148                                                               
1922 000007FF   +1  4149     chzap:  db      00,00,07h,0ffh             
1926 00000000   +1  4150     ch0:    db      00,00,00,00
192A 0000000A   +1  4151     ch10:   db      00,00,00,0ah                            ;10
192E 00000005   +1  4152     ch5:    db      00,00,00,05                                             ;5
1932 000003B9   +1  4153     ch954:  db 00,00,03,0b9h                                                ;954
1936 000003E8   +1  4154     ch10000:        db 00,00,03h,0e8h                                               ;10000
193A 00000064   +1  4155     ch100:  db 00,00,00,64h ;100
193E 00000002   +1  4156     ch2:    db      00,00,00,02                                             
                +1  4157     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  4158     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  4159     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
1942 00000001   +1  4160     ch1:    db  00,00,00,01
1946 3F800000   +1  4161     ch_1:   db      3fh,80h,00,00                   
194A 3F741EDF   +1  4162     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
194E 47C35000   +1  4163     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
1952 3F800347   +1  4164     KD:             db      3fh,80h,03h,47h;1,0001
1956 48435000   +1  4165     CH2tho: db      48h,43h,50h,00;200000
195A 4856D800   +1  4166     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
195E 4856D800   +1  4167     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
1962 461C4000   +1  4168     ch_10th:db  46h,1ch,40h,00;10000-2710h
1966 41200000   +1  4169     ch_10:  db      41h,20h,00,00;10d
196A 48742400   +1  4170     ch_250: db      48h,74h,24h,00;250000
196E 000186A0   +1  4171     chk:            db      00,01,86h,0a0h;
                +1  4172     ;r1- мл байт 2х байтного числа
1972            +1  4173     tenmin:         ;-10
1972 C3         +1  4174                             clr             c
1973 E7         +1  4175                     mov             a,@r1
1974 9405       +1  4176                             subb    a,#5;10
1976 F7         +1  4177                             mov             @r1,a
1977 19         +1  4178                             dec             r1
1978 E7         +1  4179                             mov             a,@r1
1979 9400       +1  4180                             subb    a,#0
197B F7         +1  4181                             mov             @r1,a
197C 22         +1  4182                             ret
                +1  4183       ;r0-обнуление ячеек памяти  
197D 7F04       +1  4184       clear4:        mov    r7,#4
197F E4         +1  4185                             clr             a
1980 F6         +1  4186       cl4:          mov             @r0,a
1981 08         +1  4187                             inc             r0
1982 DFFC       +1  4188                             djnz    r7,cl4
1984 22         +1  4189                             ret     
                +1  4190     
                +1  4191      ;r0-обнуление ячеек памяти 
                +1  4192      ;R7- 
1985            +1  4193       clearN:        
1985 E4         +1  4194                             clr             a
1986 F6         +1  4195       cl4N:         mov             @r0,a
1987 08         +1  4196                             inc             r0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    66

1988 DFFC       +1  4197                             djnz    r7,cl4N
198A 22         +1  4198                             ret     
                +1  4199     
                +1  4200       ;чтение номера байта с индикатора(2байта)
                +1  4201     ;bufind+8..bufind+9
                +1  4202     ;-  - - -
                +1  4203     ;- - - - - - - - - -
                +1  4204     ;adec..adec+9
                +1  4205     ;ст            мл
198B 7848       +1  4206     upak2:  mov             r0,#bufind+8;
198D 795C       +1  4207                     mov             r1,#adec+9
198F 7F02       +1  4208                     mov             r7,#2;2bait
1991 C3         +1  4209     upa2:   clr             c
1992 E6         +1  4210                     mov             a,@r0
1993 9430       +1  4211                     subb    a,#30h
1995 F7         +1  4212                     mov             @r1,a
1996 18         +1  4213                     dec             r0
1997 19         +1  4214                     dec             r1
1998 DFF7       +1  4215                     djnz    r7,upa2
199A 22         +1  4216                     ret  
                +1  4217         
                +1  4218      ;bufind+4..bufind+9
                +1  4219     ;-  - - -
                +1  4220     ;- - - - - - - - - -
                +1  4221     ;adec..adec+9
                +1  4222     ;ст            мл
199B 7849       +1  4223     upak:   mov             r0,#bufind+9;
199D 795C       +1  4224                     mov             r1,#adec+9
199F 7F06       +1  4225                     mov             r7,#6
19A1 C3         +1  4226     upa:    clr             c
19A2 E6         +1  4227                     mov             a,@r0
19A3 9430       +1  4228                     subb    a,#30h
19A5 F7         +1  4229                     mov             @r1,a
19A6 18         +1  4230                     dec             r0
19A7 19         +1  4231                     dec             r1
19A8 DFF7       +1  4232                     djnz    r7,upa
19AA 22         +1  4233                     ret
                +1  4234     
                +1  4235      ;чтение номера байта с индикатора(3байта)
                +1  4236     ;bufind+3..bufind+9
                +1  4237     ;-  - - -
                +1  4238     ;- - - - - - - - - -
                +1  4239     ;adec..adec+9
                +1  4240     ;ст            мл
19AB 7849       +1  4241     upak3:  mov             r0,#bufind+9;
19AD 795C       +1  4242                     mov             r1,#adec+9
19AF 7F03       +1  4243                     mov             r7,#3;3bait
19B1 C3         +1  4244     upa1:   clr             c
19B2 E6         +1  4245                     mov             a,@r0
19B3 9430       +1  4246                     subb    a,#30h
19B5 F7         +1  4247                     mov             @r1,a
19B6 18         +1  4248                     dec             r0
19B7 19         +1  4249                     dec             r1
19B8 DFF7       +1  4250                     djnz    r7,upa1
19BA 22         +1  4251                     ret
                +1  4252     
                +1  4253     ;вых-r2,r3-адрес ячее памяти прогр
19BB            +1  4254     findkoef:
19BB 79AE       +1  4255                                     mov             r1,#diap
19BD E7         +1  4256                                     mov             a,@r1
19BE 23         +1  4257                                     rl              a                                          
                                          ;diap*2(2bait )
19BF FC         +1  4258                                     mov             r4,a                                    ;sa
                             ve
19C0 900000   F +1  4259                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    67

                +1  4260                                     
19C3 93         +1  4261                                     movc    a,@a+dptr                       ;ст байт
19C4 FA         +1  4262                                     mov             r2,a
19C5 A3         +1  4263                                     inc             dptr
19C6 EC         +1  4264                                     mov             a,r4
19C7 93         +1  4265                                     movc    a,@a+dptr
19C8 FB         +1  4266                                     mov             r3,a                    ;мл байт
19C9 22         +1  4267                                     ret
                +1  4268     ;r2..r5 в опр яч внешн озу
19CA            +1  4269     findext:
19CA 79AE       +1  4270                                     mov             r1,#diap
19CC E7         +1  4271                                     mov             a,@r1
19CD 23         +1  4272                                     rl              a                                          
                                          ;diap*2(2bait )
19CE 23         +1  4273                                     rl              a                                          
                                          ;diap*2(2bait )
19CF F9         +1  4274                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  4275                                     
19D0 22         +1  4276                                     ret
                +1  4277     
                +1  4278     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  4279     ;(5000h..5027h)
19D1 5000       +1  4280     diKDw:  dw              5000h                   ;10-2
19D3 5004       +1  4281                                     dw              5004h                   ;10-3
19D5 5008       +1  4282                                     dw              5008h                   ;10-4
19D7 500C       +1  4283                                     dw              500ch                   ;10-5
19D9 5010       +1  4284                                     dw              5010h                   ;10-6
19DB 5014       +1  4285                                     dw              5014h                   ;10-7
19DD 5018       +1  4286                                     dw              5018h                   ;10-8
19DF 501C       +1  4287                                     dw              501ch                   ;10-9
19E1 5020       +1  4288                                     dw              5020h                   ;10-10
19E3 5024       +1  4289                                     dw              5024h                   ;10-11
19E5 5028       +1  4290     dipar:  dw              5028h                   ;parol
                +1  4291     
19E7 000186A0   +1  4292     chthou: db      00,01,86h,0a0h  ;100.000
                +1  4293     
19EB AA08       +1  4294     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
19ED AB09       +1  4295                                             mov     r3,ltemp+1
19EF AC0A       +1  4296                                             mov     r4,ltemp+2
19F1 AD0B       +1  4297                                             mov     r5,ltemp+3
19F3 22         +1  4298                                             ret
                +1  4299     ;bufind+4..bufind+9
                +1  4300     ;-  - - -
                +1  4301     ;- - - - - - - - - -
                +1  4302     ;adec..adec+9
                +1  4303     ;ст            мл
19F4 7847       +1  4304     upakA:  mov             r0,#bufind+7;
19F6 795C       +1  4305                     mov             r1,#adec+9
19F8 7F04       +1  4306                     mov             r7,#4
19FA C3         +1  4307     upaa:   clr             c
19FB E6         +1  4308                     mov             a,@r0
19FC 9430       +1  4309                     subb    a,#30h
19FE F7         +1  4310                     mov             @r1,a
19FF 18         +1  4311                     dec             r0
1A00 19         +1  4312                     dec             r1
1A01 DFF7       +1  4313                     djnz    r7,upaa
1A03 22         +1  4314                     ret
                +1  4315     
                +1  4316     ;bufind+4..bufind+9
                +1  4317     ;-  - - -
                +1  4318     ;- - - - - - - - - -
                +1  4319     ;adec..adec+9
                +1  4320     ;ст            мл
1A04 7848       +1  4321     upakB:  mov             r0,#bufind+8;
1A06 795C       +1  4322                     mov             r1,#adec+9
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    68

1A08 7F05       +1  4323                     mov             r7,#5
1A0A C3         +1  4324     upab:   clr             c
1A0B E6         +1  4325                     mov             a,@r0
1A0C 9430       +1  4326                     subb    a,#30h
1A0E F7         +1  4327                     mov             @r1,a
1A0F 18         +1  4328                     dec             r0
1A10 19         +1  4329                     dec             r1
1A11 DFF7       +1  4330                     djnz    r7,upab
1A13 C21B       +1  4331                     clr                     bitznB
1A15 E543       +1  4332                     mov             a,bufind+3
1A17 B42D02     +1  4333                     cjne            a,#2dh,abret
1A1A D21B       +1  4334                     setb            bitznB
1A1C            +1  4335     abret:
1A1C 22         +1  4336                     ret
1A1D            +1  4337     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
1A1D 4E6E6AA8   +1  4338                                             db      4eh,6eh,6ah,0a8h;10**9
1A21 43FA0000   +1  4339     CH_500:         db              43h,0fah,00,00;1fah=500
1A25 4856D800   +1  4340     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
1A29 49742400   +1  4341     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  4342     
                +1  4343     
                +1  4344     
                +1  4345     ;управление AD7731
                +1  4346     ;r4=b1 r5=b2
1A2D            +1  4347     iniacp: ;управление AD7731
1A2D 7403       +1  4348                             mov             a,#03
                +1  4349     
1A2F 120000   F +1  4350                             call    write
1A32 EC         +1  4351                             mov             a,r4;#80h
1A33 120000   F +1  4352                             call    write
1A36 ED         +1  4353                             mov             a,r5;#04
1A37 120000   F +1  4354                             call    write
1A3A 7402       +1  4355                             mov             a,#02
1A3C 120000   F +1  4356                             call    write
1A3F 74A1       +1  4357                             mov             a,#0a1h
1A41 120000   F +1  4358                             call    write
1A44 7474       +1  4359                             mov             a,#74h
1A46 120000   F +1  4360                             call    write
1A49 2095FD     +1  4361                             jb              p1.5,$;p1.3,$
1A4C 7402       +1  4362                             mov             a,#02
1A4E 120000   F +1  4363                             call    write
1A51 7481       +1  4364                             mov             a,#81h
1A53 120000   F +1  4365                             call    write
1A56 7474       +1  4366                             mov             a,#74h
1A58 120000   F +1  4367                             call    write
1A5B 2095FD     +1  4368                             jb              p1.5,$;p1.3,$
1A5E 7402       +1  4369                             mov             a,#02
1A60 120000   F +1  4370                             call    write
1A63 7421       +1  4371                             mov             a,#21h
1A65 120000   F +1  4372                             call    write
1A68 7474       +1  4373                             mov             a,#74h
1A6A 120000   F +1  4374                             call    write
1A6D 22         +1  4375                             ret
                +1  4376                             ;;;;;;;;;;;;;;;;
                +1  4377     ;;;;;;;;;;;;;;;;;
                +1  4378     ;;;;;;;;;;;;;;;;;
1A6E 0000       +1  4379     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
1A70 6000       +1  4380                                     db              60h,00h;40h,04h         ;10s
1A72 6000       +1  4381                                     db              60h,00;40h,04h          ;1s
1A74 4004       +1  4382                                     db              40h,04h         ;0,1s
1A76 2004       +1  4383                                     db              20h,04h         ;50ms
1A78 2004       +1  4384                                     db              20h,04h          ;10ms
1A7A 1332       +1  4385                                     db              13h,32h         ;2ms
                +1  4386     
                +1  4387     ;загр В1,В2 в завис от Т                                
1A7C 799A       +1  4388     loab12:                 mov             r1,#parT
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    69

1A7E 900000   F +1  4389                                     mov             dptr,#tabB1_2
1A81 E7         +1  4390                                     mov             a,@r1
1A82 23         +1  4391                                     rl              a;*2
1A83 FF         +1  4392                                     mov             r7,a                    ;save a
1A84 93         +1  4393                                     movc    a,@a+dptr
1A85 FC         +1  4394                                     mov             r4,a   ;b1
1A86 0F         +1  4395                                     inc             r7
1A87 EF         +1  4396                                     mov             a,r7
1A88 93         +1  4397                                     movc    a,@a+dptr
1A89 FD         +1  4398                                     mov             r5,a
                +1  4399                                     ;после загр В1,2 загр упр слово для нового Т
                +1  4400                             
1A8A 22         +1  4401                                     ret
                +1  4402     
                +1  4403     
1A8B 7852       +1  4404     loadr2: mov             r0,#abin+3              ;r2..r5
1A8D E6         +1  4405                     mov             a,@r0                   ; ст мл   
1A8E FA         +1  4406                     mov             r2,a
1A8F 18         +1  4407                     dec             r0
1A90 E6         +1  4408                     mov             a,@r0
1A91 FB         +1  4409                     mov             r3,a
1A92 18         +1  4410                     dec             r0
1A93 E6         +1  4411                     mov             a,@r0
1A94 FC         +1  4412                     mov             r4,a
1A95 18         +1  4413                     dec             r0
1A96 E6         +1  4414                     mov             a,@r0
1A97 FD         +1  4415                     mov             r5,a
1A98 22         +1  4416                     ret
                +1  4417                                             
                +1  4418      ;;;;;;;;;;;;;;;;;;;      
                +1  4419      ;загрузка KD в зависимости от диап изм  
                +1  4420      ;koef->r8..r11
1A99 78AE       +1  4421     loadKD:                 mov             r0,#diap
1A9B E6         +1  4422                                     mov             a,@r0
1A9C 900000   F +1  4423                                     mov             dptr,#diKDn
1A9F 75F004     +1  4424                                     mov             b,#4
1AA2 A4         +1  4425                                     mul             ab
1AA3 FF         +1  4426                                     mov             r7,a;save
1AA4 93         +1  4427                                     movc    a,@a+dptr
1AA5 F508       +1  4428                                     mov             r8,a
1AA7 A3         +1  4429                                     inc             dptr
1AA8 EF         +1  4430                                     mov             a,r7
1AA9 93         +1  4431                                     movc    a,@a+dptr
1AAA F509       +1  4432                                     mov             r9,a
1AAC A3         +1  4433                                     inc             dptr
1AAD EF         +1  4434                                     mov             a,r7
1AAE 93         +1  4435                                     movc    a,@a+dptr
1AAF F50A       +1  4436                                     mov             r10,a
1AB1 A3         +1  4437                                     inc             dptr
1AB2 EF         +1  4438                                     mov             a,r7
1AB3 93         +1  4439                                     movc    a,@a+dptr
1AB4 F50B       +1  4440                                     mov             r11,a
1AB6 22         +1  4441                                     ret
                +1  4442     
1AB7 3F506B7B   +1  4443      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
1ABB 3F507FCC   +1  4444                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
1ABF 3F4F9D0B   +1  4445                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
1AC3 3F4FE869   +1  4446                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
1AC7 3F50294A   +1  4447                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
1ACB 3F50639E   +1  4448                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
1ACF 3F4BC9F0   +1  4449                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    70

                             -8
1AD3 3F4C063B   +1  4450                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
1AD7 3F50EFDD   +1  4451                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
1ADB 3F512AD9   +1  4452                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  4453     
1ADF 00000039   +1  4454     ch57:   db      00,00,00,39h;57
1AE3 00000014   +1  4455     ch20:   db      00,00,00,14h;20
                +1  4456     
                +1  4457     ;загр ус для тестов ацп 
                +1  4458     ;dptr-
1AE7 78B1       +1  4459     lotpus: mov             r0,#vichR
1AE9 B6210D     +1  4460                                     cjne    @r0,#21h,te22
1AEC 900000   F +1  4461                                     mov                     dptr,#tabt11;заслать ус 11А
1AEF E4         +1  4462     lotp:           clr             a
1AF0 93         +1  4463                             movc    a,@a+dptr                               ;high byte
1AF1 F584       +1  4464                             mov             p4,a
1AF3 A3         +1  4465                             inc             dptr
1AF4 E4         +1  4466                             clr             a
1AF5 93         +1  4467                             movc    a,@a+dptr                               ;low byte
1AF6 F585       +1  4468                             mov             p5,a
1AF8 22         +1  4469                             ret
1AF9 B62205     +1  4470     te22:                   cjne    @r0,#22h,te23
1AFC 900000   F +1  4471                             mov                     dptr,#tabt9;заслать ус 9А       
1AFF 80EE       +1  4472                             jmp                     lotp
                +1  4473     
1B01 900000   F +1  4474     te23:   mov                     dptr,#tabt7;заслать ус 7А       
1B04 80E9       +1  4475                             jmp                     lotp
                +1  4476     
                +1  4477     
                +1  4478     
                +1  4479     
                +1  4480     
1B06 02030405   +1  4481     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
1B0A 06070809                
1B0E 0A0B                    
                +1  4482     
1B10 78AE       +1  4483     findR:                  mov                     r0,#diap
1B12 E6         +1  4484                                                     mov                     a,@r0
1B13 900000   F +1  4485                                                     mov                     dptr,#Tabn
1B16 93         +1  4486                                                     movc            a,@a+dptr
1B17 22         +1  4487                                                     ret
                +1  4488     
                +1  4489     ;bufind=30h..39h                                                                           
                                           ;
1B18 C219       +1  4490     vvchif:                 clr             bitmig
1B1A 79B2       +1  4491                                     mov             r1,#marker
1B1C E7         +1  4492                                     mov             a,@r1                   ;изм цифры
1B1D 7840       +1  4493                                     mov             r0,#bufind                      ;0000
1B1F 28         +1  4494                                     add             a,r0
1B20 F8         +1  4495                                     mov             r0,a
1B21 06         +1  4496                                     inc             @r0
1B22 B63A02     +1  4497                                     cjne    @r0,#3ah,chif
1B25 7630       +1  4498                                     mov             @r0,#30h
1B27            +1  4499     chif:   
1B27 22         +1  4500                             ret
                +1  4501     
                +1  4502       ;перевод маркера влево
1B28            +1  4503     marle:  
1B28 C219       +1  4504                     clr             bitmig
                +1  4505                     ;mov            savba,#0   нельзя обнулять
1B2A 78B2       +1  4506             mov             r0,#marker
1B2C 16         +1  4507                     dec             @r0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    71

1B2D E6         +1  4508                     mov             a,@r0
1B2E C3         +1  4509                     clr             c
1B2F 953A       +1  4510                     subb    a,movleft         ;крайне левое положение
1B31 5001       +1  4511                     jnc             rler
1B33 06         +1  4512                     inc             @r0
1B34 22         +1  4513     rler:   ret
                +1  4514         
                +1  4515     ;перевод маркера вправо
1B35 C219       +1  4516     marri:  clr             bitmig
1B37 78B2       +1  4517                     mov             r0,#marker
1B39 06         +1  4518                     inc         @r0
1B3A E53B       +1  4519                     mov             a,movrig           ;крайне правое положение
1B3C C3         +1  4520                     clr             c
1B3D 96         +1  4521                     subb    a,@r0
1B3E 5001       +1  4522                     jnc             rrir
1B40 16         +1  4523                     dec             @r0
1B41 22         +1  4524     rrir:   ret
                +1  4525         
                +1  4526     ;konstA->bufind+4..bufind+7
1B42 78BC       +1  4527     outA:           mov                     r0,#konstA
1B44 120000   F +1  4528                                     call            resar2
1B47 120343     +1  4529                                     call            ftol                    ;->hex
1B4A 784F       +1  4530                                     mov             r0,#abin
1B4C 120000   F +1  4531                                     call            saver2
1B4F 7853       +1  4532                                     mov                     r0,#adec
1B51 7952       +1  4533                                     mov             r1,#abin+3
1B53 120000   F +1  4534                                     call            bindec
1B56 785C       +1  4535                                     mov                     r0,#adec+9
1B58 7947       +1  4536                                     mov                     r1,#bufind+7
1B5A 7F04       +1  4537                                     mov                     r7,#4
1B5C E6         +1  4538     outa2:  mov             a,@r0
1B5D 2430       +1  4539                               add           a,#30h
1B5F F7         +1  4540                                     mov             @r1,a
1B60 19         +1  4541                                     dec             r1
1B61 18         +1  4542                                     dec             r0
1B62 DFF8       +1  4543                                     djnz    r7,outa2
1B64 22         +1  4544                                     ret
                +1  4545                                             
                +1  4546     ;konstB->bufind+4..bufind+8
1B65 78C0       +1  4547     outB:           mov                     r0,#konstB
1B67 120000   F +1  4548                                     call            resar2
1B6A EA         +1  4549                                     mov                     a,r2
1B6B 5480       +1  4550                                     anl                     a,#80h
1B6D 6007       +1  4551                                     jz                      outb3
1B6F EA         +1  4552     mov                     a,r2
1B70 547F       +1  4553                                     anl                     a,#7fh
1B72 FA         +1  4554                                     mov                     r2,a
1B73 75432D     +1  4555                                     mov                     bufind+3,#2dh
1B76 120343     +1  4556     outb3:  call            ftol                    ;->hex
1B79 784F       +1  4557                                     mov             r0,#abin
1B7B 120000   F +1  4558                                     call            saver2
1B7E 7853       +1  4559                                     mov                     r0,#adec
1B80 7952       +1  4560                                     mov             r1,#abin+3
1B82 120000   F +1  4561                                     call            bindec
1B85 785C       +1  4562                                     mov                     r0,#adec+9
1B87 7948       +1  4563                                     mov                     r1,#bufind+8
1B89 7F05       +1  4564                                     mov                     r7,#5
1B8B E6         +1  4565     outb2:  mov             a,@r0
1B8C 2430       +1  4566                               add           a,#30h
1B8E F7         +1  4567                                     mov             @r1,a
1B8F 19         +1  4568                                     dec             r1
1B90 18         +1  4569                                     dec             r0
1B91 DFF8       +1  4570                                     djnz    r7,outb2
1B93 22         +1  4571                                     ret
                +1  4572     
                +1  4573     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    72

                +1  4574     ;пп мигания индикации
1B94 78B2       +1  4575     mign:           mov             r0,#marker
                +1  4576                                     
1B96 B6FF03     +1  4577                                     cjne    @r0,#0ffh,mignn
                +1  4578                                     ;реж изм мигает *
1B99 C219       +1  4579                                     clr             bitmig
1B9B 22         +1  4580                                     ret
                +1  4581     
1B9C            +1  4582     mignn:                  ;clr            c
1B9C 7440       +1  4583                                     mov             a,#bufind
1B9E 26         +1  4584                                     add             a,@r0                   ;a=bufind+marker
1B9F F9         +1  4585                                     mov             r1,a
1BA0 201907     +1  4586                                     jb              bitmig,onmig
1BA3 873C       +1  4587                                     mov             savba,@r1
                +1  4588                             ;       mov             a,@r1
                +1  4589                             ;       mov             savba,a
1BA5 7720       +1  4590                                     mov             @r1,#" "
                +1  4591                                     
1BA7 D219       +1  4592                                     setb    bitmig
1BA9 22         +1  4593                                     ret
                +1  4594     
1BAA A73C       +1  4595     onmig:                  mov             @r1,savba
                +1  4596                                     ;mov            a,savba
                +1  4597                                     ; mov           @r1,a
1BAC C219       +1  4598                                     clr             bitmig
1BAE 120000   F +1  4599                                     call    z_01s
1BB1 22         +1  4600                                     ret
                +1  4601     ;номер ошибки bufind+6
1BB2 900000   F +1  4602     error:          mov             dptr,#teERR
1BB5 120000   F +1  4603                                             call    lotext
1BB8 853946     +1  4604                                             mov             bufind+6,nuerr
1BBB 22         +1  4605                                     ret
                +1  4606     
                +1  4607     
1BBC            +1  4608     textT:          
1BBC FD543D32   +1  4609                             db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
1BC0 6D67FDFD                
1BC4 FDFD                    
1BC6 FD543D31   +1  4610                             db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
1BCA 306D67FD                
1BCE FDFD                    
1BD0 FD543D35   +1  4611                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
1BD4 306D67FD                
1BD8 FDFD                    
1BDA FD543D64   +1  4612                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
1BDE 3167FDFD                
1BE2 FDFD                    
1BE4 20202054   +1  4613                             db              " "," "," ","T","=",31h,67h," "," "," "
1BE8 3D316720                
1BEC 2020                    
1BEE 2020543D   +1  4614                             db              " "," ","T","=",31h,30h,67h," "," "," "  
1BF2 31306720                
1BF6 2020                    
                +1  4615     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  4616     
1BF8 42753474   +1  4617     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
1BFC 79767454                
1C00 7720                    
1C02 20413D20   +1  4618     teAequ0:        db              " ",'A','='," "," "," "," "," "," ",65h
1C06 20202020                
1C0A 2065                    
1C0C 20423D2B   +1  4619     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
1C10 20202020                
1C14 2020                    
1C16 20207145   +1  4620     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    73

1C1A 48722020                
1C1E 2020                    
                +1  4621     
1C20 20544579   +1  4622     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
1C24 542D7433                
1C28 7120                    
1C2A 54457954   +1  4623     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
1C2E 20523520                
1C32 2020                    
1C34 20794B30   +1  4624     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
1C38 50205235                
1C3C 2020                    
1C3E 20204142   +1  4625     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
1C42 4B202020                
1C46 2020                    
1C48 204B4176   +1  4626     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
1C4C 74735020                
1C50 202020                  
                +1  4627     
1C53 20544579   +1  4628     teTE11:         db              " ",'T',"E",79h,'T'," ",2dh,31h,31h,'A';          21
1C57 54202D31                
1C5B 3141                    
1C5D 20544579   +1  4629     teTE9:          db              " ",'T',"E",79h,'T'," ",2dh,30h,39h,'A';                   
                                                  22
1C61 54202D30                
1C65 3941                    
1C67 20544579   +1  4630     teTE7:          db              " ",'T',"E",79h,'T'," ",2dh,30h,37h,'A';                   
                                                  23
1C6B 54202D30                
1C6F 3741                    
                +1  4631     
                +1  4632     
1C71 20203537   +1  4633     teS57_6:                db              " "," ",35h,37h,36h," "," "," "," "," ";57.6
1C75 36202020                
1C79 2020                    
1C7B 20203139   +1  4634     teS19_2:                db              " "," ",31h,39h,32h," "," "," "," "," ";19,2
1C7F 32202020                
1C83 2020                    
                +1  4635     
1C85 61415030   +1  4636     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
1C89 76772030                
1C8D 3030                    
1C8F 20303030   +1  4637     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
1C93 30302020                
1C97 2041                    
1C99 74337120   +1  4638     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
1C9D 4B304879                
1CA1 5420                    
1CA3 20204275   +1  4639     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
1CA7 58307820                
1CAB 2020                    
1CAD 2020304C   +1  4640     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
1CB1 4C202020                
1CB5 2020                    
1CB7 20203034   +1  4641     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
1CBB 7479544B                
1CBF 4120                    
1CC1 20203041   +1  4642     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
1CC5 71795420                
1CC9 20203341   +1  4643     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
1CCD 61747977                
1CD1 2020                    
1CD3 20206150   +1  4644     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
1CD7 30797130                
1CDB 545020                  
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    74

1CDE 20206130   +1  4645     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
1CE2 76484162                
1CE6 2020                    
1CE8 20207376   +1  4646     teBLOK: db      " "," ",73h,76h,30h,'K'," ",30h,30h," ";БЛОК 00
1CEC 304B2030                
1CF0 3020                    
1CF2 20207376   +1  4647     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
1CF6 304B2020                
1CFA 2020                    
1CFC 48413420   +1  4648     tebBL:          db      "H",'A',34h," ",73h,76h," ",30h,30h,30h; НАЧ БЛОК 000
1D00 73762030                
1D04 3030                    
1D06 4B304820   +1  4649     teeBL:          db      "K",30h,"H"," ",73h,76h," ",30h,30h,30h; КОН БЛОК 000
1D0A 73762030                
1D0E 3030                    
                +1  4650      ;;;;;;;;;;;;;;;;;;;         
1D10 2020304C   +1  4651     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
1D14 4C204920                
1D18 2020                    
1D1A 2020304C   +1  4652     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
1D1E 4C206620                
1D22 2020                    
1D24 20204552   +1  4653     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
1D28 52202020                
1D2C 2020                    
1D2E 2020454E   +1  4654     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
1D32 44202020                
1D36 2020                    
                +1  4655     
                    4656     
                    4657     ;$include (d:\amp\sarifm3.asm) 
                +1  4658     ; ” ©« SARIFM.ASM 8.11.95
                +1  4659     ;файл арифметики
                +1  4660       
  0008          +1  4661     ltemp    equ       8           ;long temporary
  000C          +1  4662     xtemp    equ       12          ;other temporaries
  000A          +1  4663     DECSIZE  EQU       10
  0004          +1  4664     NUMSIZE  EQU       4
  0004          +1  4665     RR4  EQU       4
  0005          +1  4666     RR5  EQU       5
                +1  4667     
                +1  4668                                                     
                +1  4669     
                +1  4670                 ; rseg     ARIF          ; Switch to this code segment.
                +1  4671     ;             using    0              ; Specify register bank for the following
                +1  4672                                            ; program code.
                +1  4673     ;                                               cseg AT 400h
                +1  4674     ; Arithmetics:  CLEARING string
                +1  4675     ; Input:
                +1  4676     ; R0 - pointer to string,
                +1  4677     ; NUMSIZE - byte count if CLRNUM used,
                +1  4678     ; DECSIZE - byte count if CLRDEC used,
                +1  4679     ; R2 - byte count if CLEAR used;
                +1  4680     ; Output:  none.
                +1  4681     
1D38            +1  4682     CLRDEC:
1D38 7A0A       +1  4683         MOV R2, #DECSIZE
1D3A 8002       +1  4684         SJMP    CLEAR
1D3C            +1  4685     CLRNUM:
1D3C 7A04       +1  4686         MOV R2, #NUMSIZE
                +1  4687         ;JMP    CLEAR
1D3E            +1  4688     CLEAR:
1D3E E4         +1  4689         CLR A
1D3F F6         +1  4690     CLR11:  MOV @R0, A
1D40 08         +1  4691         INC R0
1D41 DAFC       +1  4692         DJNZ    R2, CLR11
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    75

1D43 22         +1  4693         RET
                +1  4694     
                +1  4695     ;**********************************
                +1  4696     ;mov    r1,#abin+3
                +1  4697     ;mov    r0,#adec
                +1  4698     ; _ _ _ _
                +1  4699     ;     03ff
                +1  4700     ;ст     мл   - вход
                +1  4701     ; _ _ _ _ _ _ _ _ _ _
                +1  4702     ;             1 0 2 3
                +1  4703     ;ст                мл 
                +1  4704     ;**********************************
                +1  4705     
1D44            +1  4706     BINDEC:
                +1  4707     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  4708     ; Input:
                +1  4709     ; R0 - pointer to destination (high digit is the first),
                +1  4710     ; R1 - pointer to source,
                +1  4711     ; NUMSIZE - byte count in binary number;
                +1  4712     ; DECSIZE - byte count in decimal number;
                +1  4713     ; Output:  none.
                +1  4714     ; Source saved
                +1  4715     
                +1  4716         ; 1. Clear result
1D44 7A05       +1  4717         MOV R2, #DECSIZE/2
1D46 120000   F +1  4718         CALL   CLEAR  ; incrementing R0
                +1  4719     
                +1  4720         ; 2. Prepare convertion
1D49 18         +1  4721         DEC R0
1D4A 8804       +1  4722         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
1D4C 8905       +1  4723         MOV RR5, R1 ; R5 - pointer to low byte of binary number
1D4E 7B20       +1  4724         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  4725     
                +1  4726         ; 3. Convert cyrcle
1D50            +1  4727     BIN30:
                +1  4728     
                +1  4729         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
1D50 A905       +1  4730         MOV R1, RR5
1D52 7A04       +1  4731         MOV R2, #NUMSIZE
1D54 E7         +1  4732     BIN31:  MOV A, @R1
1D55 33         +1  4733         RLC A
1D56 F7         +1  4734         MOV @R1, A
1D57 19         +1  4735         DEC R1
1D58 DAFA       +1  4736         DJNZ    R2, BIN31
1D5A A905       +1  4737         MOV R1, RR5
1D5C E7         +1  4738         MOV A, @R1
1D5D 92E0       +1  4739         MOV ACC.0, C
1D5F F7         +1  4740         MOV @R1, A
                +1  4741     
                +1  4742         ; 3.2. Doubling decimal result with <Carry>
1D60 A804       +1  4743         MOV R0, RR4
1D62 7A05       +1  4744         MOV R2, #DECSIZE/2
1D64 E6         +1  4745     BIN32:  MOV A, @R0
1D65 36         +1  4746         ADDC    A, @R0
1D66 D4         +1  4747         DA  A
1D67 F6         +1  4748         MOV @R0, A
1D68 18         +1  4749         DEC R0
1D69 DAF9       +1  4750         DJNZ    R2, BIN32
                +1  4751     
                +1  4752         ; 3.3. End of convert cyrcle
1D6B DBE3       +1  4753         DJNZ    R3, BIN30
                +1  4754     
                +1  4755         ; 4. Make bytes from half-bytes
1D6D E8         +1  4756         MOV A, R0
1D6E 240A       +1  4757         ADD A, #DECSIZE
1D70 F8         +1  4758         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    76

1D71 A904       +1  4759         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
1D73 7A05       +1  4760         MOV R2, #DECSIZE/2
1D75 E7         +1  4761     BIN41:  MOV A, @R1
1D76 540F       +1  4762         ANL A, #00FH
1D78 F6         +1  4763         MOV @R0, A
1D79 18         +1  4764         DEC R0
1D7A E7         +1  4765         MOV A, @R1
1D7B C4         +1  4766         SWAP    A
1D7C 540F       +1  4767         ANL A, #00FH
1D7E F6         +1  4768         MOV @R0, A
1D7F 18         +1  4769         DEC R0
1D80 19         +1  4770         DEC R1
1D81 DAF2       +1  4771         DJNZ    R2, BIN41
1D83 22         +1  4772         RET
                +1  4773     
                +1  4774     
                +1  4775     ;*********************************
                +1  4776     ;mov    r0,#abin
                +1  4777     ;mov    r1,#adec
                +1  4778     ; _ _ _ _       -выход
                +1  4779     ; ff0000
                +1  4780     ;0004
                +1  4781     ;мл      ст
                +1  4782     
                +1  4783     ;ст                       мл
                +1  4784     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  4785     ;                       2 5 5
                +1  4786     ;                   1 0 2 4
                +1  4787     
1D84            +1  4788     DECBIN:
                +1  4789     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  4790     ; Input:
                +1  4791     ; R0 - pointer to destination,
                +1  4792     ; R1 - pointer to source (high digit is the first),
                +1  4793     ; NUMSIZE - byte count in binary number;
                +1  4794     ; DECSIZE - byte count in decimal number;
                +1  4795     ; Output:  none
                +1  4796     ; Source cleared
                +1  4797     
                +1  4798         ; 1. Clear result
1D84 120000   F +1  4799         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  4800     
                +1  4801         ; 2. Prepare convertion
1D87 18         +1  4802         DEC R0
1D88 8804       +1  4803         MOV RR4, R0 ; R4 - pointer to high byte of binary result
1D8A 8905       +1  4804         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
1D8C 900000   F +1  4805         MOV DPTR, #DECT2
1D8F 7B20       +1  4806         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  4807     
                +1  4808         ; 3. Convert cyrcle
1D91            +1  4809     DEC30:
                +1  4810     
                +1  4811         ; 3.1. Divide decimal number by 2 and prepare <Carry>
1D91 C3         +1  4812         CLR C
1D92 A905       +1  4813         MOV R1, RR5
1D94 7A0A       +1  4814         MOV R2, #DECSIZE
1D96 E7         +1  4815     DEC31:  MOV A, @R1
1D97 540F       +1  4816         ANL A, #00FH
1D99 92E4       +1  4817         MOV ACC.4, C
1D9B 93         +1  4818         MOVC    A,@A+DPTR
1D9C F7         +1  4819         MOV @R1, A
1D9D A2E7       +1  4820         MOV C, ACC.7
1D9F 09         +1  4821         INC R1
1DA0 DAF4       +1  4822         DJNZ    R2, DEC31
                +1  4823     
                +1  4824         ; 3.2. Rotate binary result one bit to right with <Carry>
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    77

1DA2 A804       +1  4825         MOV R0, RR4
1DA4 7A04       +1  4826         MOV R2, #NUMSIZE
1DA6 E6         +1  4827     DEC32:  MOV A, @R0
1DA7 13         +1  4828         RRC A
1DA8 F6         +1  4829         MOV @R0, A
1DA9 18         +1  4830         DEC R0
1DAA DAFA       +1  4831         DJNZ    R2, DEC32
                +1  4832     
                +1  4833         ; 3.3. End of convert cyrcle
1DAC DBE3       +1  4834         DJNZ    R3, DEC30
1DAE 22         +1  4835         RET
                +1  4836     
1DAF 00800181   +1  4837     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
1DB3 02820383                
1DB7 0484                    
1DB9 00000000   +1  4838         DB  00,00,00,00,00,00
1DBD 0000                    
1DBF 05850686   +1  4839         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
1DC3 07870888                
1DC7 0989                    
                +1  4840     
                +1  4841     ;   Long comparison
                +1  4842     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  4843     ;   flags and acc set as though a long subtraction was done.
                +1  4844     ;*******************************
                +1  4845     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  4846     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  4847     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  4848     ;*******************************
1DC9            +1  4849     lcmp:
1DC9 C3         +1  4850         clr c
1DCA EA         +1  4851         mov a,r2
1DCB 9508       +1  4852         subb    a,8
1DCD 700F       +1  4853         jnz done
1DCF EB         +1  4854         mov a,r3
1DD0 9509       +1  4855         subb    a,9
1DD2 7008       +1  4856         jnz done1
1DD4 EC         +1  4857         mov a,r4
1DD5 950A       +1  4858         subb    a,10
1DD7 7003       +1  4859         jnz done1
1DD9 ED         +1  4860         mov a,r5
1DDA 950B       +1  4861         subb    a,11
1DDC            +1  4862     done1:
1DDC C2D2       +1  4863         clr ov      ;overflow is significant only for top byte
1DDE            +1  4864     done:
1DDE 22         +1  4865         ret
                +1  4866     
                +1  4867     ;   Load long into r2-5 from [dptr]
                +1  4868     
1DDF            +1  4869     ldc_long:
1DDF E583       +1  4870         mov a,dph       ;is it in on board memory
1DE1 6010       +1  4871         jz  onboard     ;yes
1DE3 E4         +1  4872         clr a
1DE4 93         +1  4873         movc    a,@a+dptr
1DE5 FA         +1  4874         mov r2,a
1DE6 7401       +1  4875         mov a,#1
1DE8 93         +1  4876         movc    a,@a+dptr
1DE9 FB         +1  4877         mov r3,a
1DEA 7402       +1  4878         mov a,#2
1DEC 93         +1  4879         movc    a,@a+dptr
1DED FC         +1  4880         mov r4,a
1DEE 7403       +1  4881         mov a,#3
1DF0 93         +1  4882         movc    a,@a+dptr
1DF1 FD         +1  4883         mov r5,a
1DF2 22         +1  4884         ret
1DF3            +1  4885     onboard:
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    78

1DF3 A882       +1  4886         mov r0,dpl
1DF5 E6         +1  4887         mov a,@r0
1DF6 FA         +1  4888         mov r2,a
1DF7 08         +1  4889         inc r0
1DF8 E6         +1  4890         mov a,@r0
1DF9 FB         +1  4891         mov r3,a
1DFA 08         +1  4892         inc r0
1DFB E6         +1  4893         mov a,@r0
1DFC FC         +1  4894         mov r4,a
1DFD 08         +1  4895         inc r0
1DFE E6         +1  4896         mov a,@r0
1DFF FD         +1  4897         mov r5,a
1E00 22         +1  4898         ret
                +1  4899     
                +1  4900     ;**************************************
                +1  4901     ;загрузить ltemp...+3 из памяти программ
                +1  4902     ;mov    dptr,#CH5
                +1  4903     ;call   ldc_ltemp        ltemp <--5
                +1  4904     ;**************************************
1E01            +1  4905     ldc_ltemp:
1E01 E583       +1  4906         mov a,dph       ;is it in on board memory
1E03 6014       +1  4907         jz  oboard      ;yes
1E05 E4         +1  4908         clr a
1E06 93         +1  4909         movc    a,@a+dptr
1E07 F508       +1  4910         mov 8,a
1E09 7401       +1  4911         mov a,#1
1E0B 93         +1  4912         movc    a,@a+dptr
1E0C F509       +1  4913         mov 9,a
1E0E 7402       +1  4914         mov a,#2
1E10 93         +1  4915         movc    a,@a+dptr
1E11 F50A       +1  4916         mov 10,a
1E13 7403       +1  4917         mov a,#3
1E15 93         +1  4918         movc    a,@a+dptr
1E16 F50B       +1  4919         mov 11,a
1E18 22         +1  4920         ret
1E19            +1  4921     oboard:
1E19 A882       +1  4922         mov r0,dpl
1E1B 8608       +1  4923         mov 8,@r0
1E1D 08         +1  4924         inc r0
1E1E 8609       +1  4925         mov 9,@r0
1E20 08         +1  4926         inc r0
1E21 860A       +1  4927         mov 10,@r0
1E23 08         +1  4928         inc r0
1E24 860B       +1  4929         mov 11,@r0
1E26 22         +1  4930         ret
                +1  4931     
                +1  4932     ;*****************************
                +1  4933     ;mov    dptr,#k1
                +1  4934     ;call   ldx_long
                +1  4935     ;k1->r2..r5
                +1  4936     ;*****************************
                +1  4937     ;   Load long into r2-5 from [dptr]
                +1  4938     ;
                +1  4939     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
1E27            +1  4940     ldx_long:
1E27 E583       +1  4941         mov a,dph       ;is it in on board memory
1E29 6014       +1  4942         jz  onboar1        ;yes
1E2B C082       +1  4943         push    dpl
1E2D C083       +1  4944         push    dph
1E2F E0         +1  4945         movx    a,@dptr
1E30 FA         +1  4946         mov r2,a
1E31 A3         +1  4947         inc dptr
1E32 E0         +1  4948         movx    a,@dptr
1E33 FB         +1  4949         mov r3,a
1E34 A3         +1  4950         inc dptr
1E35 E0         +1  4951         movx    a,@dptr
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    79

1E36 FC         +1  4952         mov r4,a
1E37 A3         +1  4953         inc dptr
1E38 E0         +1  4954         movx    a,@dptr
1E39 FD         +1  4955         mov r5,a
1E3A D083       +1  4956         pop dph
1E3C D082       +1  4957         pop dpl
1E3E 22         +1  4958         ret
1E3F            +1  4959     onboar1:
1E3F A882       +1  4960         mov r0,dpl
1E41 E6         +1  4961         mov a,@r0
1E42 FA         +1  4962         mov r2,a
1E43 08         +1  4963         inc r0
1E44 E6         +1  4964         mov a,@r0
1E45 FB         +1  4965         mov r3,a
1E46 08         +1  4966         inc r0
1E47 E6         +1  4967         mov a,@r0
1E48 FC         +1  4968         mov r4,a
1E49 08         +1  4969         inc r0
1E4A E6         +1  4970         mov a,@r0
1E4B FD         +1  4971         mov r5,a
1E4C 22         +1  4972         ret
                +1  4973     
                +1  4974     ;*********************************
                +1  4975     ;mov    dptr,#k2
                +1  4976     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  4977     ;**********************************
1E4D            +1  4978     ldx_ltemp:
1E4D E583       +1  4979         mov a,dph       ;is it in on board memory
1E4F 6010       +1  4980         jz  oboard1     ;yes
1E51 E0         +1  4981         movx    a,@dptr
1E52 F508       +1  4982         mov 8,a
1E54 A3         +1  4983         inc dptr
1E55 E0         +1  4984         movx    a,@dptr
1E56 F509       +1  4985         mov 9,a
1E58 A3         +1  4986         inc dptr
1E59 E0         +1  4987         movx    a,@dptr
1E5A F50A       +1  4988         mov 10,a
1E5C A3         +1  4989         inc dptr
1E5D E0         +1  4990         movx    a,@dptr
1E5E F50B       +1  4991         mov 11,a
1E60 22         +1  4992         ret
1E61            +1  4993     oboard1:
1E61 A882       +1  4994         mov r0,dpl
1E63 8608       +1  4995         mov 8,@r0
1E65 08         +1  4996         inc r0
1E66 8609       +1  4997         mov 9,@r0
1E68 08         +1  4998         inc r0
1E69 860A       +1  4999         mov 10,@r0
1E6B 08         +1  5000         inc r0
1E6C 860B       +1  5001         mov 11,@r0
1E6E 22         +1  5002         ret
                +1  5003     ;   Long division routines for 8051
                +1  5004     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  5005     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  5006     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  5007     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  5008     ;   r1 must be saved by the caller.
                +1  5009     ;   This is long unsigned division.
                +1  5010     
                +1  5011     
                +1  5012     ;   Register usage:
                +1  5013     ;       r0 loop counter
                +1  5014     ;       xtemp (12-15) accumulates quotient
                +1  5015     ;       r5-r2 holds dividend
                +1  5016     ;       ltemp holds divisor
                +1  5017     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    80

                +1  5018     ;************************************
                +1  5019     ;r2..r5-делимое
                +1  5020     ;ltemp..-делитель
                +1  5021     ;частное -r2..r5
                +1  5022     ;*************************************
1E6F            +1  5023     divide:
1E6F E4         +1  5024         clr a
1E70 F8         +1  5025         mov r0,a        ;initialize count
1E71 F50C       +1  5026         mov xtemp,a     ;zero quotient
1E73 F50D       +1  5027         mov xtemp+1,a
1E75 F50E       +1  5028         mov xtemp+2,a
1E77 F50F       +1  5029         mov xtemp+3,a
1E79 ED         +1  5030         mov a,r5        ;check for zero dividend
1E7A 4C         +1  5031         orl a,r4
1E7B 4B         +1  5032         orl a,r3
1E7C 4A         +1  5033         orl a,r2
1E7D 600B       +1  5034         jz  jfinis
1E7F E508       +1  5035         mov a,ltemp     ;check for zero divisor
1E81 4509       +1  5036         orl a,ltemp+1
1E83 450A       +1  5037         orl a,ltemp+2
1E85 450B       +1  5038         orl a,ltemp+3
1E87 7037       +1  5039         jnz midl
1E89 22         +1  5040         ret
                +1  5041     
1E8A 020000   F +1  5042     jfinis: jmp finis
                +1  5043     
1E8D            +1  5044     loops:
1E8D EA         +1  5045         mov a,r2
1E8E C3         +1  5046         clr c
1E8F 9508       +1  5047         subb    a,ltemp+0   ;is divisor greater than dividend yet
1E91 4033       +1  5048         jc  yes     ;yes, go no further
1E93 7013       +1  5049         jnz no
1E95 EB         +1  5050         mov a,r3
1E96 9509       +1  5051         subb    a,ltemp+1
1E98 402C       +1  5052         jc  yes
1E9A 700C       +1  5053         jnz no
1E9C EC         +1  5054         mov a,r4
1E9D 950A       +1  5055         subb    a,ltemp+2
1E9F 4025       +1  5056         jc  yes
1EA1 7005       +1  5057         jnz no
1EA3 ED         +1  5058         mov a,r5
1EA4 950B       +1  5059         subb    a,ltemp+3
1EA6 401E       +1  5060         jc  yes
1EA8            +1  5061     no:
1EA8 E50B       +1  5062         mov a,ltemp+3   ;shift divisor up one bit
1EAA 250B       +1  5063         add a,ltemp+3
1EAC F50B       +1  5064         mov ltemp+3,a
1EAE E50A       +1  5065         mov a,ltemp+2
1EB0 350A       +1  5066         addc    a,ltemp+2
1EB2 F50A       +1  5067         mov ltemp+2,a
1EB4 E509       +1  5068         mov a,ltemp+1
1EB6 3509       +1  5069         addc    a,ltemp+1
1EB8 F509       +1  5070         mov ltemp+1,a
1EBA E508       +1  5071         mov a,ltemp+0
1EBC 3508       +1  5072         addc    a,ltemp+0
1EBE F508       +1  5073         mov ltemp+0,a
1EC0            +1  5074     midl:
1EC0 08         +1  5075         inc r0      ;increment count
1EC1 E508       +1  5076         mov a,ltemp+0   ;check for safe to shift some more
1EC3 30E7C7     +1  5077         jnb acc.7,loops  ;loop if top bit clear
1EC6            +1  5078     yes:
1EC6 E508       +1  5079         mov a,ltemp+0
1EC8 C3         +1  5080         clr c
1EC9 9A         +1  5081         subb    a,r2        ;can we subtract now?
1ECA 401A       +1  5082         jc  dosub       ;yes, go and do it
1ECC 7015       +1  5083         jnz nosub
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    81

1ECE E509       +1  5084         mov a,ltemp+1
1ED0 9B         +1  5085         subb    a,r3
1ED1 4013       +1  5086         jc  dosub
1ED3 700E       +1  5087         jnz nosub
1ED5 E50A       +1  5088         mov a,ltemp+2
1ED7 9C         +1  5089         subb    a,r4
1ED8 400C       +1  5090         jc  dosub
1EDA 7007       +1  5091         jnz nosub
1EDC E50B       +1  5092         mov a,ltemp+3
1EDE 9D         +1  5093         subb    a,r5
1EDF 4005       +1  5094         jc  dosub
1EE1 6003       +1  5095         jz  dosub
1EE3            +1  5096     nosub:
1EE3 C3         +1  5097         clr c
1EE4 8012       +1  5098         sjmp    dosh
1EE6            +1  5099     dosub:
1EE6 C3         +1  5100         clr c       ;subtract divisor from dividend
1EE7 ED         +1  5101         mov a,r5
1EE8 950B       +1  5102         subb    a,ltemp+3
1EEA FD         +1  5103         mov r5,a
1EEB EC         +1  5104         mov a,r4
1EEC 950A       +1  5105         subb    a,ltemp+2
1EEE FC         +1  5106         mov r4,a
1EEF EB         +1  5107         mov a,r3
1EF0 9509       +1  5108         subb    a,ltemp+1
1EF2 FB         +1  5109         mov r3,a
1EF3 EA         +1  5110         mov a,r2
1EF4 9508       +1  5111         subb    a,ltemp+0
1EF6 FA         +1  5112         mov r2,a
1EF7 D3         +1  5113         setb    c       ;now set bit for quotient
1EF8            +1  5114     dosh:
1EF8 E50F       +1  5115         mov a,xtemp+3
1EFA 33         +1  5116         rlc a
1EFB F50F       +1  5117         mov xtemp+3,a
1EFD E50E       +1  5118         mov a,xtemp+2
1EFF 33         +1  5119         rlc a
1F00 F50E       +1  5120         mov xtemp+2,a
1F02 E50D       +1  5121         mov a,xtemp+1
1F04 33         +1  5122         rlc a
1F05 F50D       +1  5123         mov xtemp+1,a
1F07 E50C       +1  5124         mov a,xtemp+0
1F09 33         +1  5125         rlc a
1F0A F50C       +1  5126         mov xtemp+0,a
1F0C E508       +1  5127         mov a,ltemp+0       ;shift divisor down
1F0E C3         +1  5128         clr c
1F0F 13         +1  5129         rrc a
1F10 F508       +1  5130         mov ltemp+0,a
1F12 E509       +1  5131         mov a,ltemp+1
1F14 13         +1  5132         rrc a
1F15 F509       +1  5133         mov ltemp+1,a
1F17 E50A       +1  5134         mov a,ltemp+2
1F19 13         +1  5135         rrc a
1F1A F50A       +1  5136         mov ltemp+2,a
1F1C E50B       +1  5137         mov a,ltemp+3
1F1E 13         +1  5138         rrc a
1F1F F50B       +1  5139         mov ltemp+3,a
                +1  5140     
1F21 D8A3       +1  5141         djnz    r0,yes      ;and continue with the rest
                +1  5142     
1F23            +1  5143     finis:
1F23 8D0B       +1  5144         mov ltemp+3,r5
1F25 8C0A       +1  5145         mov ltemp+2,r4
1F27 8B09       +1  5146         mov ltemp+1,r3
1F29 8A08       +1  5147         mov ltemp+0,r2
1F2B AD0F       +1  5148         mov r5,xtemp+3
1F2D AC0E       +1  5149         mov r4,xtemp+2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    82

1F2F AB0D       +1  5150         mov r3,xtemp+1
1F31 AA0C       +1  5151         mov r2,xtemp+0
1F33 22         +1  5152         ret         ;and return with the satisfaction of a job well done
                +1  5153     
                +1  5154     
                +1  5155     ;   Long multiplication
                +1  5156     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  5157     ;   other in ltemp. It really doesn't matter which one is where.
                +1  5158     
                +1  5159     ;**********************************
                +1  5160     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  5161     ;ст  мл
                +1  5162     ;**********************************
1F34            +1  5163     llmul:
1F34            +1  5164     almul:
1F34            +1  5165     lmul:
1F34 ED         +1  5166         mov a,r5        ;low order byte
1F35 850BF0     +1  5167         mov b,ltemp+3       ;times low order byte
1F38 A4         +1  5168         mul ab
1F39 F50F       +1  5169         mov xtemp+3,a       ;store low
1F3B 85F00E     +1  5170         mov xtemp+2,b   ;and high
1F3E ED         +1  5171         mov a,r5        ;low order
1F3F 850AF0     +1  5172         mov b,ltemp+2   ;times next
1F42 A4         +1  5173         mul ab
1F43 250E       +1  5174         add a,xtemp+2   ;add in
1F45 F50E       +1  5175         mov xtemp+2,a
1F47 E5F0       +1  5176         mov a,b
1F49 3400       +1  5177         addc    a,#0
1F4B F50D       +1  5178         mov xtemp+1,a
1F4D ED         +1  5179         mov a,r5
1F4E 8509F0     +1  5180         mov b,ltemp+1
1F51 A4         +1  5181         mul ab
1F52 250D       +1  5182         add a,xtemp+1
1F54 F50D       +1  5183         mov xtemp+1,a
1F56 E5F0       +1  5184         mov a,b
1F58 3400       +1  5185         addc    a,#0
1F5A F50C       +1  5186         mov xtemp+0,a
1F5C ED         +1  5187         mov a,r5
1F5D 8508F0     +1  5188         mov b,ltemp+0
1F60 A4         +1  5189         mul ab
1F61 250C       +1  5190         add a,xtemp+0
1F63 F50C       +1  5191         mov xtemp+0,a
1F65 EC         +1  5192         mov a,r4
1F66 850BF0     +1  5193         mov b,ltemp+3
1F69 A4         +1  5194         mul ab
1F6A 250E       +1  5195         add a,xtemp+2
1F6C F50E       +1  5196         mov xtemp+2,a
1F6E E5F0       +1  5197         mov a,b
1F70 350D       +1  5198         addc    a,xtemp+1
1F72 F50D       +1  5199         mov xtemp+1,a
1F74 E50C       +1  5200         mov a,xtemp+0
1F76 3400       +1  5201         addc    a,#0
1F78 F50C       +1  5202         mov xtemp+0,a
1F7A EC         +1  5203         mov a,r4
1F7B 850AF0     +1  5204         mov b,ltemp+2
1F7E A4         +1  5205         mul ab
1F7F 250D       +1  5206         add a,xtemp+1
1F81 F50D       +1  5207         mov xtemp+1,a
1F83 E5F0       +1  5208         mov a,b
1F85 350C       +1  5209         addc    a,xtemp+0
1F87 F50C       +1  5210         mov xtemp+0,a
1F89 EC         +1  5211         mov a,r4
1F8A 8509F0     +1  5212         mov b,ltemp+1
1F8D A4         +1  5213         mul ab
1F8E 250C       +1  5214         add a,xtemp+0
1F90 F50C       +1  5215         mov xtemp+0,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    83

                +1  5216     
1F92 EB         +1  5217         mov a,r3
1F93 850BF0     +1  5218         mov b,ltemp+3
1F96 A4         +1  5219         mul ab
1F97 250D       +1  5220         add a,xtemp+1
1F99 F50D       +1  5221         mov xtemp+1,a
1F9B E5F0       +1  5222         mov a,b
1F9D 350C       +1  5223         addc    a,xtemp+0
1F9F F50C       +1  5224         mov xtemp+0,a
1FA1 EB         +1  5225         mov a,r3
1FA2 850AF0     +1  5226         mov b,ltemp+2
1FA5 A4         +1  5227         mul ab
1FA6 250C       +1  5228         add a,xtemp+0
1FA8 F50C       +1  5229         mov xtemp+0,a
                +1  5230     
1FAA EA         +1  5231         mov a,r2
1FAB 850BF0     +1  5232         mov b,ltemp+3
1FAE A4         +1  5233         mul ab
1FAF 250C       +1  5234         add a,xtemp+0
1FB1 FA         +1  5235         mov r2,a
1FB2 AB0D       +1  5236         mov r3,xtemp+1
1FB4 AC0E       +1  5237         mov r4,xtemp+2
1FB6 AD0F       +1  5238         mov r5,xtemp+3
                +1  5239     
1FB8 22         +1  5240         ret         ;all done
                +1  5241     ;******************************
                +1  5242     ;из содержимого  r2-r5  вычесть
                +1  5243     ;содержимое          ltemp..ltemp+3
                +1  5244     ;******************************
1FB9            +1  5245     llsub:
1FB9            +1  5246      lsub:
1FB9 ED         +1  5247         mov a,r5
1FBA C3         +1  5248         clr c
1FBB 950B       +1  5249         subb    a,11
1FBD FD         +1  5250         mov r5,a
1FBE EC         +1  5251         mov a,r4
1FBF 950A       +1  5252         subb    a,10
1FC1 FC         +1  5253         mov r4,a
1FC2 EB         +1  5254         mov a,r3
1FC3 9509       +1  5255         subb    a,9
1FC5 FB         +1  5256         mov r3,a
1FC6 EA         +1  5257         mov a,r2
1FC7 9508       +1  5258         subb    a,8
1FC9 FA         +1  5259         mov r2,a
1FCA 22         +1  5260         ret
                +1  5261     
                +1  5262     ;***********************************************
                +1  5263     ;                                                      ст мл
                +1  5264     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5265     ;  r0- адрес младшего байта !!!
                +1  5266     ;результат- r2..r5
                +1  5267     ;***********************************************
                +1  5268     
1FCB C3         +1  5269     ladd:    clr       c
1FCC ED         +1  5270          mov       a,r5
1FCD 26         +1  5271          add       a,@r0
1FCE FD         +1  5272          mov       r5,a
1FCF 18         +1  5273          dec       r0
1FD0 EC         +1  5274          mov       a,r4
1FD1 36         +1  5275          addc      a,@r0
1FD2 FC         +1  5276          mov       r4,a
1FD3 18         +1  5277          dec       r0
1FD4 EB         +1  5278          mov       a,r3
1FD5 36         +1  5279          addc      a,@r0
1FD6 FB         +1  5280          mov       r3,a
1FD7 18         +1  5281          dec       r0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    84

1FD8 EA         +1  5282          mov       a,r2
1FD9 36         +1  5283          addc      a,@r0
1FDA FA         +1  5284          mov       r2,a
1FDB 22         +1  5285          ret
                +1  5286     ;***********************************************
                +1  5287     ;                                                      ст мл
                +1  5288     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5289     ;  r0- адрес младшего байта !!!
                +1  5290     ;результат- r2..r5
                +1  5291     ;***********************************************
                +1  5292     
1FDC C3         +1  5293     laddx:    clr       c
1FDD E2         +1  5294                                             movx            a,@r0
1FDE 2D         +1  5295                                             add                     a,r5
1FDF FD         +1  5296               mov     r5,a
1FE0 18         +1  5297                             dec     r0
1FE1 E2         +1  5298                             movx    a,@r0
1FE2 3C         +1  5299                             addc    a,r4
1FE3 FC         +1  5300                             mov     r4,a
1FE4 18         +1  5301                             dec     r0
1FE5 E2         +1  5302                             movx    a,@r0
1FE6 3B         +1  5303                             addc    a,r3
1FE7 FB         +1  5304                             mov     r3,a
1FE8 18         +1  5305                             dec     r0
1FE9 E2         +1  5306                             movx    a,@r0
1FEA 3A         +1  5307                             addc    a,r2
1FEB FA         +1  5308                             mov       r2,a
1FEC 22         +1  5309                             ret
                +1  5310     
                +1  5311     ;***********************************************
                +1  5312     ;                                                      ст мл
                +1  5313     ; cложение содержимого  r2..r5 с числом по адресу
                +1  5314     ;  dptr- адрес младшего байта !!!
                +1  5315     ;результат- r2..r5
                +1  5316     ;***********************************************
                +1  5317     
1FED C3         +1  5318     addx:    clr       c
1FEE E0         +1  5319                                             movx            a,@dptr
1FEF 2D         +1  5320                                             add                     a,r5
1FF0 FD         +1  5321               mov     r5,a
1FF1 120000   F +1  5322                             call            dedptr;dec     dptr
1FF4 E0         +1  5323                             movx    a,@dptr
1FF5 3C         +1  5324                             addc    a,r4
1FF6 FC         +1  5325                             mov     r4,a
1FF7 120000   F +1  5326                             call            dedptr;dec     dptr
1FFA E0         +1  5327                             movx    a,@dptr
1FFB 3B         +1  5328                             addc    a,r3
1FFC FB         +1  5329                             mov     r3,a
1FFD 120000   F +1  5330                             call            dedptr;dec     dptr
2000 E0         +1  5331                             movx    a,@dptr
2001 3A         +1  5332                             addc    a,r2
2002 FA         +1  5333                             mov       r2,a
2003 22         +1  5334                             ret
                +1  5335     
2004 C0D0       +1  5336     dedptr:         push    psw
2006 C3         +1  5337                                             clr             c
2007 E582       +1  5338                                             mov             a,dpl
2009 9401       +1  5339                                             subb    a,#1
200B F582       +1  5340                                             mov             dpl,a
200D E583       +1  5341                                             mov             a,dph
200F 9400       +1  5342                                             subb    a,#0
2011 F583       +1  5343                                             mov             dph,a
2013 D0D0       +1  5344                                             pop             psw
2015 22         +1  5345                                             ret
                    5346     
                    5347     ;$include (d:\amp\floatm.asm)
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    85

                +1  5348     ;       Copyright (C) 1988 HI-TECH Software
                +1  5349     
                +1  5350     ;       Single Precision Floating point arithmetic routines for 8051
                +1  5351     
                +1  5352     ;       The format of floating point numbers is as follows:
                +1  5353     
                +1  5354     ;       -----------------
                +1  5355     ;       *     sign      *  1 bit
                +1  5356     ;       -----------------
                +1  5357     ;       *   exponent    *  8 bits
                +1  5358     ;       -----------------
                +1  5359     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  5360     ;       -----------------
                +1  5361     
                +1  5362     
                +1  5363     ;       As usual for the 8051 the memory layout has the most significant
                +1  5364     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  5365     ;       lowest address.
                +1  5366     
                +1  5367     ;       Calling conventions:
                +1  5368     
                +1  5369     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  5370     ;
                +1  5371     ;       Return value is in r2-r5
                +1  5372     
                +1  5373     ;       Naming conventions: A routine name is constructed by
                +1  5374     
                +1  5375     ;             ASOP
                +1  5376     
                +1  5377     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  5378     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  5379     ;       Conversion routines are named
                +1  5380     
                +1  5381     ;               AStof
                +1  5382     
                +1  5383     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  5384     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  5385     ;       Conversion from float to integer is ftol.
                +1  5386     
                +1  5387     ;               .ORG  5000h
                +1  5388     ;               .CODE
                +1  5389     ;       seg     c_text
                +1  5390     
                +1  5391     ;;      $MOD812
----            +1  5392             CSEG
                +1  5393             ;ORG 1000h
                +1  5394     
                +1  5395                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  5396             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  5397     
                +1  5398     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  5399     ;       macros
                +1  5400     
                +1  5401     saveregs        macro
                +1  5402             push    7
                +1  5403             push    6
                +1  5404             push    1
                +1  5405             push    0
                +1  5406             endm
                +1  5407     
                +1  5408     restregs        macro
                +1  5409             pop     0
                +1  5410             pop     1
                +1  5411             pop     6
                +1  5412             pop     7
                +1  5413             endm
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    86

                +1  5414     
                +1  5415     ;addr   
                +1  5416     dan     macro   pad
                +1  5417             mov     a,r5
                +1  5418             add     a,pad+3
                +1  5419             mov     pad+3,a
                +1  5420             mov     a,pad+2
                +1  5421             addc    a,r4
                +1  5422             mov     pad+2,a
                +1  5423             mov     a,pad+1
                +1  5424             addc    a,r3
                +1  5425             mov     pad+1,a
                +1  5426             mov     a,pad+0
                +1  5427             addc    a,r2
                +1  5428             mov     pad,a
                +1  5429             endm
                +1  5430     
                +1  5431     addl    macro  addr
                +1  5432             mov     a,r5
                +1  5433             add     a,addr+3
                +1  5434             mov     r5,a
                +1  5435             mov     a,addr+2
                +1  5436             addc    a,r4
                +1  5437             mov     r4,a
                +1  5438             mov     a,addr+1
                +1  5439             addc    a,r3
                +1  5440             mov     r3,a
                +1  5441             mov     a,addr+0
                +1  5442             addc    a,r2
                +1  5443             mov     r2,a
                +1  5444             endm
                +1  5445     
                +1  5446     
                +1  5447     add1    macro
                +1  5448             mov     a,r5
                +1  5449             add     a,#1
                +1  5450             mov     r5,a
                +1  5451             clr     a
                +1  5452             addc    a,r4
                +1  5453             mov     r4,a
                +1  5454             clr     a
                +1  5455             addc    a,r3
                +1  5456             mov     r3,a
                +1  5457             clr     a
                +1  5458             addc    a,r2
                +1  5459             mov     r2,a
                +1  5460             endm
                +1  5461     
                +1  5462     shfdn   macro  addr
                +1  5463             clr     c
                +1  5464             mov     a,addr
                +1  5465             rrc     a
                +1  5466             mov     addr,a
                +1  5467             mov     a,addr+1
                +1  5468             rrc     a
                +1  5469             mov     addr+1,a
                +1  5470             mov     a,addr+2
                +1  5471             rrc     a
                +1  5472             mov     addr+2,a
                +1  5473             mov     a,addr+3
                +1  5474             rrc     a
                +1  5475             mov     addr+3,a
                +1  5476             endm
                +1  5477     
                +1  5478     shfup   macro  addr
                +1  5479             clr     c
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    87

                +1  5480             mov     a,addr+3
                +1  5481             rlc     a
                +1  5482             mov     addr+3,a
                +1  5483             mov     a,addr+2
                +1  5484             rlc     a
                +1  5485             mov     addr+2,a
                +1  5486             mov     a,addr+1
                +1  5487             rlc     a
                +1  5488             mov     addr+1,a
                +1  5489             mov     a,addr
                +1  5490             rlc     a
                +1  5491             mov     addr,a
                +1  5492             endm
                +1  5493     
                +1  5494     rshift  macro
                +1  5495             clr     c
                +1  5496             mov     a,r2
                +1  5497             rrc     a
                +1  5498             mov     r2,a
                +1  5499             mov     a,r3
                +1  5500             rrc     a
                +1  5501             mov     r3,a
                +1  5502             mov     a,r4
                +1  5503             rrc     a
                +1  5504             mov     r4,a
                +1  5505             mov     a,r5
                +1  5506             rrc     a
                +1  5507             mov     r5,a
                +1  5508             endm
                +1  5509     rshift1 macro
                +1  5510             setb    c
                +1  5511             mov     a,r2
                +1  5512             rrc     a
                +1  5513             mov     r2,a
                +1  5514             mov     a,r3
                +1  5515             rrc     a
                +1  5516             mov     r3,a
                +1  5517             mov     a,r4
                +1  5518             rrc     a
                +1  5519             mov     r4,a
                +1  5520             mov     a,r5
                +1  5521             rrc     a
                +1  5522             mov     r5,a
                +1  5523             endm
                +1  5524     
                +1  5525     
                +1  5526     lshift  macro
                +1  5527             mov     a,r5
                +1  5528             rlc     a
                +1  5529             mov     r5,a
                +1  5530             mov     a,r4
                +1  5531             rlc     a
                +1  5532             mov     r4,a
                +1  5533             mov     a,r3
                +1  5534             rlc     a
                +1  5535             mov     r3,a
                +1  5536             mov     a,r2
                +1  5537             rlc     a
                +1  5538             mov     r2,a
                +1  5539             endm
                +1  5540     
                +1  5541     neg1    macro
                +1  5542             clr     c
                +1  5543             clr     a
                +1  5544             subb    a,r5
                +1  5545             mov     r5,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    88

                +1  5546             clr     a
                +1  5547             subb    a,r4
                +1  5548             mov     r4,a
                +1  5549             clr     a
                +1  5550             subb    a,r3
                +1  5551             mov     r3,a
                +1  5552             clr     a
                +1  5553             subb    a,r2
                +1  5554             mov     r2,a
                +1  5555             endm
                +1  5556     
                +1  5557     negm    macro  addr
                +1  5558             clr     c
                +1  5559             clr     a
                +1  5560             subb    a,addr+3
                +1  5561             mov     addr+3,a
                +1  5562             clr     a
                +1  5563             subb    a,addr+2
                +1  5564             mov     addr+2,a
                +1  5565             clr     a
                +1  5566             subb    a,addr+1
                +1  5567             mov     addr+1,a
                +1  5568             clr     a
                +1  5569             subb    a,addr
                +1  5570             mov     addr,a
                +1  5571             endm
                +1  5572     
                +1  5573     copytor macro  addr
                +1  5574             mov     r2,addr
                +1  5575             mov     r3,addr+1
                +1  5576             mov     r4,addr+2
                +1  5577             mov     r5,addr+3
                +1  5578             endm
                +1  5579     
                +1  5580     
                +1  5581     copyrto macro  addr
                +1  5582             mov     addr,r2
                +1  5583             mov     addr+1,r3
                +1  5584             mov     addr+2,r4
                +1  5585             mov     addr+3,r5
                +1  5586             endm
                +1  5587     
                +1  5588     
                +1  5589     ;       Internal representation: in this set of routines a floating number
                +1  5590     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  5591     
                +1  5592     ;       Stack offset values
                +1  5593     ;ltemp   equ     28h
                +1  5594     
  0006          +1  5595     cntr    equ     6               ;r6 is the counter
  0007          +1  5596     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  5597     exp1    equ     0               ;exponent 1 in r0
  0002          +1  5598     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  5599     exp2    equ     1               ;exponent 1 in r1
  0008          +1  5600     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  5601     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  5602     
                +1  5603     
                +1  5604     
                +1  5605     
                +1  5606     
                +1  5607     ;DECSIZE EQU     10
                +1  5608     ;NUMSIZE EQU     4
                +1  5609     ;RR4     EQU     4
                +1  5610     ;RR5     EQU     5
                +1  5611     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    89

                +1  5612     ;       unpack1 - unpacks the left operand
                +1  5613     
009E            +1  5614     unpack1:
009E EA         +1  5615             mov     a,r2            ;get sign
009F 5480       +1  5616             anl     a,#80h
00A1 530740     +1  5617             anl     sign,#40h       ;clear other bits
00A4 4207       +1  5618             orl     sign,a          ;store sign
00A6 EB         +1  5619             mov     a,r3            ;get lsb of exponent
00A7 33         +1  5620             rlc     a               ;rotate into carry
00A8 EA         +1  5621             mov     a,r2            ;get rest of exponent
00A9 33         +1  5622             rlc     a               ;and make it 8 bits
00AA F8         +1  5623             mov     r0,a            ;store it
00AB 6006       +1  5624             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  5625             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  5626             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  5627             ret
00B3            +1  5628     zer1:
00B3 E4         +1  5629             clr     a
00B4 FA         +1  5630             mov     r2,a
00B5 FB         +1  5631             mov     r3,a
00B6 FC         +1  5632             mov     r4,a
00B7 FD         +1  5633             mov     r5,a            ;zero mantissa
00B8 F8         +1  5634             mov     r0,a            ;zero exponent
00B9 22         +1  5635             ret
                +1  5636     
                +1  5637     ;       unpack2 - unpacks right operand
                +1  5638     
00BA            +1  5639     unpack2:
00BA E508       +1  5640             mov     a,ltemp         ;get sign
00BC 13         +1  5641             rrc     a               ;shift down
00BD 5440       +1  5642             anl     a,#40h          ;mask out sign
00BF 530780     +1  5643             anl     sign,#80h       ;clear old bit
00C2 4207       +1  5644             orl     sign,a
00C4 E509       +1  5645             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  5646             rlc     a               ;rotate into carry
00C7 E508       +1  5647             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  5648             rlc     a               ;and make it 8 bits
00CA F9         +1  5649             mov     r1,a            ;store it
00CB 6007       +1  5650             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  5651             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  5652             mov     mant2,#0        ;clear upper byte
00D3 22         +1  5653             ret
00D4            +1  5654     zer2:
00D4 E4         +1  5655             clr     a
00D5 F508       +1  5656             mov     ltemp,a
00D7 F509       +1  5657             mov     ltemp+1,a
00D9 F50A       +1  5658             mov     ltemp+2,a
00DB F50B       +1  5659             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  5660             ret
                +1  5661     
                +1  5662     ;       pack1 - put operand 1 back into float format
                +1  5663     
00DE            +1  5664     pack1:
00DE E8         +1  5665             mov     a,r0            ;get exponent
00DF C3         +1  5666             clr     c
00E0 13         +1  5667             rrc     a               ;shift down 1 bit
00E1 530780     +1  5668             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  5669             orl     a,r7            ;or in sign bit
00E5 FA         +1  5670             mov     r2,a            ;store
00E6 E8         +1  5671             mov     a,r0            ;get other bit
00E7 03         +1  5672             rr      a               ;rotate into hi bit
00E8 5480       +1  5673             anl     a,#80h          ;mask
00EA 53037F     +1  5674             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  5675             orl     mant1+1,a       ;put in
00EF 22         +1  5676             ret
                +1  5677     
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    90

                +1  5678     
                +1  5679     ;       norm1 - normalize the unpacked value in 1
                +1  5680     
00F0            +1  5681     norm1:
00F0 E8         +1  5682             mov     a,r0            ;get exponent
00F1 60C0       +1  5683             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  5684             mov     a,r2            ;get hi byte
00F4 6023       +1  5685             jz      norup           ;zero, so shift up if anything
00F6            +1  5686     nordn:
00F6 EA         +1  5687             mov     a,r2            ;get hi byte
00F7 B4010D     +1  5688             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  5689+3           add1                    ;add in a rounding bit
00FA ED         +1  5690+1           mov     a,r5
00FB 2401       +1  5691+1           add     a,#1
00FD FD         +1  5692+1           mov     r5,a
00FE E4         +1  5693+1           clr     a
00FF 3C         +1  5694+1           addc    a,r4
0100 FC         +1  5695+1           mov     r4,a
0101 E4         +1  5696+1           clr     a
0102 3B         +1  5697+1           addc    a,r3
0103 FB         +1  5698+1           mov     r3,a
0104 E4         +1  5699+1           clr     a
0105 3A         +1  5700+1           addc    a,r2
0106 FA         +1  5701+1           mov     r2,a
0107            +1  5702     nordn1:
                +1  5703+3           rshift                  ;shift down 1 bit
0107 C3         +1  5704+1           clr     c
0108 EA         +1  5705+1           mov     a,r2
0109 13         +1  5706+1           rrc     a
010A FA         +1  5707+1           mov     r2,a
010B EB         +1  5708+1           mov     a,r3
010C 13         +1  5709+1           rrc     a
010D FB         +1  5710+1           mov     r3,a
010E EC         +1  5711+1           mov     a,r4
010F 13         +1  5712+1           rrc     a
0110 FC         +1  5713+1           mov     r4,a
0111 ED         +1  5714+1           mov     a,r5
0112 13         +1  5715+1           rrc     a
0113 FD         +1  5716+1           mov     r5,a
0114 08         +1  5717             inc     r0              ;adjust exponent
0115 EA         +1  5718             mov     a,r2            ;test high byte
0116 70DE       +1  5719             jnz     nordn           ;loop
0118 22         +1  5720             ret                     ;done
                +1  5721     
0119            +1  5722     norup:
0119 4B         +1  5723             orl     a,r3
011A 4C         +1  5724             orl     a,r4
011B 4D         +1  5725             orl     a,r5            ;test for zero mantissa
011C 6095       +1  5726             jz      zer1            ;it is - make it true zero
011E            +1  5727     norup1:
011E EB         +1  5728             mov     a,r3            ;get mantissa byte
011F 20E710     +1  5729             jb      acc.7,norup2    ;jump if set
0122 C3         +1  5730             clr     c
                +1  5731+3           lshift                  ;shift mantissa up
0123 ED         +1  5732+1           mov     a,r5
0124 33         +1  5733+1           rlc     a
0125 FD         +1  5734+1           mov     r5,a
0126 EC         +1  5735+1           mov     a,r4
0127 33         +1  5736+1           rlc     a
0128 FC         +1  5737+1           mov     r4,a
0129 EB         +1  5738+1           mov     a,r3
012A 33         +1  5739+1           rlc     a
012B FB         +1  5740+1           mov     r3,a
012C EA         +1  5741+1           mov     a,r2
012D 33         +1  5742+1           rlc     a
012E FA         +1  5743+1           mov     r2,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    91

012F 18         +1  5744             dec     r0              ;adjust exponent
0130 80EC       +1  5745             jmp     norup1
0132            +1  5746     norup2:
0132 22         +1  5747             ret                     ;finito
                +1  5748     
                +1  5749     
                +1  5750     ;       fpdenorm - denormalize one of the two operands so that their
                +1  5751     ;       exponents are equal. This requires the smaller number to have
                +1  5752     ;       its exponent incremented and its mantissa shifted right.
                +1  5753     
0133            +1  5754     denorm:
0133 E8         +1  5755             mov     a,r0
0134 C3         +1  5756             clr     c
0135 99         +1  5757             subb    a,r1            ;compare exponents
0136 5029       +1  5758             jnc     up2a            ;shift operand 2
0138            +1  5759     up1:
0138 08         +1  5760             inc     r0              ;increment exponent
                +1  5761+3           rshift                  ;shift mantissa down
0139 C3         +1  5762+1           clr     c
013A EA         +1  5763+1           mov     a,r2
013B 13         +1  5764+1           rrc     a
013C FA         +1  5765+1           mov     r2,a
013D EB         +1  5766+1           mov     a,r3
013E 13         +1  5767+1           rrc     a
013F FB         +1  5768+1           mov     r3,a
0140 EC         +1  5769+1           mov     a,r4
0141 13         +1  5770+1           rrc     a
0142 FC         +1  5771+1           mov     r4,a
0143 ED         +1  5772+1           mov     a,r5
0144 13         +1  5773+1           rrc     a
0145 FD         +1  5774+1           mov     r5,a
0146 E8         +1  5775             mov     a,r0
0147 B501EE     +1  5776             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  5777             ret
                +1  5778     
014B            +1  5779     up2:
014B 09         +1  5780             inc     r1              ;increment exponent 2
                +1  5781+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  5782+1           clr     c
014D E508       +1  5783+1           mov     a,mant2
014F 13         +1  5784+1           rrc     a
0150 F508       +1  5785+1           mov     mant2,a
0152 E509       +1  5786+1           mov     a,mant2+1
0154 13         +1  5787+1           rrc     a
0155 F509       +1  5788+1           mov     mant2+1,a
0157 E50A       +1  5789+1           mov     a,mant2+2
0159 13         +1  5790+1           rrc     a
015A F50A       +1  5791+1           mov     mant2+2,a
015C E50B       +1  5792+1           mov     a,mant2+3
015E 13         +1  5793+1           rrc     a
015F F50B       +1  5794+1           mov     mant2+3,a
0161            +1  5795     up2a:
0161 E8         +1  5796             mov     a,r0            ;compare exponents
0162 B501E6     +1  5797             cjne    a,exp2,up2
0165 22         +1  5798             ret                     ;all done
                +1  5799     ;------------------------------------------------------------------
                +1  5800     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  5801     
0166            +1  5802     fladd:
                +1  5803+3           saveregs
0166 C007       +1  5804+1           push    7
0168 C006       +1  5805+1           push    6
016A C001       +1  5806+1           push    1
016C C000       +1  5807+1           push    0
016E 119E       +1  5808             call    unpack1
0170 11BA       +1  5809             call    unpack2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    92

0172 3133       +1  5810             call    denorm
0174 E507       +1  5811             mov     a,sign
0176 30E70D     +1  5812             jnb     acc.7,ok1       ;test left sign
                +1  5813+3           neg1                    ;negate op1
0179 C3         +1  5814+1           clr     c
017A E4         +1  5815+1           clr     a
017B 9D         +1  5816+1           subb    a,r5
017C FD         +1  5817+1           mov     r5,a
017D E4         +1  5818+1           clr     a
017E 9C         +1  5819+1           subb    a,r4
017F FC         +1  5820+1           mov     r4,a
0180 E4         +1  5821+1           clr     a
0181 9B         +1  5822+1           subb    a,r3
0182 FB         +1  5823+1           mov     r3,a
0183 E4         +1  5824+1           clr     a
0184 9A         +1  5825+1           subb    a,r2
0185 FA         +1  5826+1           mov     r2,a
0186            +1  5827     ok1:
0186 E507       +1  5828             mov     a,sign
0188 30E615     +1  5829             jnb     acc.6,ok2       ;test right sign
                +1  5830+3           negm    mant2           ;negate op2
018B C3         +1  5831+1           clr     c
018C E4         +1  5832+1           clr     a
018D 950B       +1  5833+1           subb    a,mant2+3
018F F50B       +1  5834+1           mov     mant2+3,a
0191 E4         +1  5835+1           clr     a
0192 950A       +1  5836+1           subb    a,mant2+2
0194 F50A       +1  5837+1           mov     mant2+2,a
0196 E4         +1  5838+1           clr     a
0197 9509       +1  5839+1           subb    a,mant2+1
0199 F509       +1  5840+1           mov     mant2+1,a
019B E4         +1  5841+1           clr     a
019C 9508       +1  5842+1           subb    a,mant2
019E F508       +1  5843+1           mov     mant2,a
01A0            +1  5844     ok2:
                +1  5845+3           addl    mant2           ;add mantissas
01A0 ED         +1  5846+1           mov     a,r5
01A1 250B       +1  5847+1           add     a,mant2+3
01A3 FD         +1  5848+1           mov     r5,a
01A4 E50A       +1  5849+1           mov     a,mant2+2
01A6 3C         +1  5850+1           addc    a,r4
01A7 FC         +1  5851+1           mov     r4,a
01A8 E509       +1  5852+1           mov     a,mant2+1
01AA 3B         +1  5853+1           addc    a,r3
01AB FB         +1  5854+1           mov     r3,a
01AC E508       +1  5855+1           mov     a,mant2+0
01AE 3A         +1  5856+1           addc    a,r2
01AF FA         +1  5857+1           mov     r2,a
01B0 E4         +1  5858             clr     a
01B1 FF         +1  5859             mov     r7,a            ;clear sign
01B2 EA         +1  5860             mov     a,r2            ;get sign of result
01B3 30E70E     +1  5861             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  5862             mov     r7,a            ;store sign
                +1  5863+3           neg1                    ;negate mantissa
01B7 C3         +1  5864+1           clr     c
01B8 E4         +1  5865+1           clr     a
01B9 9D         +1  5866+1           subb    a,r5
01BA FD         +1  5867+1           mov     r5,a
01BB E4         +1  5868+1           clr     a
01BC 9C         +1  5869+1           subb    a,r4
01BD FC         +1  5870+1           mov     r4,a
01BE E4         +1  5871+1           clr     a
01BF 9B         +1  5872+1           subb    a,r3
01C0 FB         +1  5873+1           mov     r3,a
01C1 E4         +1  5874+1           clr     a
01C2 9A         +1  5875+1           subb    a,r2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    93

01C3 FA         +1  5876+1           mov     r2,a
01C4            +1  5877     ok3:
01C4 11F0       +1  5878             call    norm1
01C6 11DE       +1  5879             call    pack1           ;pack normalized result
                +1  5880+3           restregs                ;and return
01C8 D000       +1  5881+1           pop     0
01CA D001       +1  5882+1           pop     1
01CC D006       +1  5883+1           pop     6
01CE D007       +1  5884+1           pop     7
01D0 22         +1  5885             ret
                +1  5886     ;-------------------------------------------------------------
                +1  5887     ;       Subtract the number ltemp from the number in r2-r5
                +1  5888     
01D1            +1  5889     flsub:
01D1 630880     +1  5890             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  5891             jmp     fladd           ;and add!
                +1  5892     
                +1  5893     ;================================================================
                +1  5894     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  5895     
01D6            +1  5896     flcmp:
01D6 EA         +1  5897            mov     a,r2            ;get sign of left
01D7 6508       +1  5898            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  5899            jnb     acc.7,cexp      ;same, go check exponent
                +1  5900     ;ifdef SMALL_MODEL
01DC EA         +1  5901             mov     a,r2            ;get sign of left again
01DD 33         +1  5902             rlc     a
01DE 5001       +1  5903             jnc     flout
                +1  5904     ;endif
01E0 D3         +1  5905             setb    c
01E1 22         +1  5906     flout:          ret                    ;return with acc < 0
                +1  5907     
01E2            +1  5908     cexp:
01E2 C3         +1  5909            clr     c
01E3 EA         +1  5910            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  5911            subb    a,ltemp
01E6 7010       +1  5912            jnz     fnd
01E8 EB         +1  5913            mov     a,r3
01E9 9509       +1  5914            subb    a,ltemp+1
01EB 700B       +1  5915            jnz     fnd
01ED EC         +1  5916            mov     a,r4
01EE 950A       +1  5917            subb    a,ltemp+2
01F0 7006       +1  5918            jnz     fnd
01F2 ED         +1  5919            mov     a,r5
01F3 950B       +1  5920            subb    a,ltemp+3
01F5 7001       +1  5921            jnz     fnd
01F7            +1  5922     cdone:
01F7 22         +1  5923            ret                     ;return with acc == 0
01F8            +1  5924     fnd:
01F8 8AF0       +1  5925           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  5926          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  5927            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  5928                         orl         a,#1                          ;make non-zero
0201 B3         +1  5929             cpl     c               ;c=0->1,c=1->0
0202 22         +1  5930             ret
                +1  5931     ;==============================================================
                +1  5932     
                +1  5933     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  5934     ;       the result in r2-r5
                +1  5935     
0203            +1  5936     flmul:
                +1  5937+3           saveregs
0203 C007       +1  5938+1           push    7
0205 C006       +1  5939+1           push    6
0207 C001       +1  5940+1           push    1
0209 C000       +1  5941+1           push    0
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    94

020B 119E       +1  5942             call    unpack1
020D 11BA       +1  5943             call    unpack2
020F E4         +1  5944             clr     a
0210 F50C       +1  5945             mov     prod,a
0212 F50D       +1  5946             mov     prod+1,a        ;clear product
0214 F50E       +1  5947             mov     prod+2,a
0216 F50F       +1  5948             mov     prod+3,a
0218 7E07       +1  5949             mov     r6,#7           ;initialize counter
021A            +1  5950     mup1:
                +1  5951+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  5952+1           clr     c
021B E508       +1  5953+1           mov     a,mant2
021D 13         +1  5954+1           rrc     a
021E F508       +1  5955+1           mov     mant2,a
0220 E509       +1  5956+1           mov     a,mant2+1
0222 13         +1  5957+1           rrc     a
0223 F509       +1  5958+1           mov     mant2+1,a
0225 E50A       +1  5959+1           mov     a,mant2+2
0227 13         +1  5960+1           rrc     a
0228 F50A       +1  5961+1           mov     mant2+2,a
022A E50B       +1  5962+1           mov     a,mant2+3
022C 13         +1  5963+1           rrc     a
022D F50B       +1  5964+1           mov     mant2+3,a
022F 5014       +1  5965             jnc     nobit           ;skip if lsb was zero
                +1  5966+3           dan     prod            ;add multiplicand to product
0231 ED         +1  5967+1           mov     a,r5
0232 250F       +1  5968+1           add     a,prod+3
0234 F50F       +1  5969+1           mov     prod+3,a
0236 E50E       +1  5970+1           mov     a,prod+2
0238 3C         +1  5971+1           addc    a,r4
0239 F50E       +1  5972+1           mov     prod+2,a
023B E50D       +1  5973+1           mov     a,prod+1
023D 3B         +1  5974+1           addc    a,r3
023E F50D       +1  5975+1           mov     prod+1,a
0240 E50C       +1  5976+1           mov     a,prod+0
0242 3A         +1  5977+1           addc    a,r2
0243 F50C       +1  5978+1           mov     prod,a
0245            +1  5979     nobit:
                +1  5980+3           lshift                  ;shift multiplicand up
0245 ED         +1  5981+1           mov     a,r5
0246 33         +1  5982+1           rlc     a
0247 FD         +1  5983+1           mov     r5,a
0248 EC         +1  5984+1           mov     a,r4
0249 33         +1  5985+1           rlc     a
024A FC         +1  5986+1           mov     r4,a
024B EB         +1  5987+1           mov     a,r3
024C 33         +1  5988+1           rlc     a
024D FB         +1  5989+1           mov     r3,a
024E EA         +1  5990+1           mov     a,r2
024F 33         +1  5991+1           rlc     a
0250 FA         +1  5992+1           mov     r2,a
0251 DEC7       +1  5993             djnz    r6,mup1         ;loop if more
                +1  5994     
0253 7E11       +1  5995             mov     r6,#17          ;re-initalize counter
0255 8015       +1  5996             sjmp    mup3
0257            +1  5997     mup11:
                +1  5998+3           shfdn   prod            ;shift product right
0257 C3         +1  5999+1           clr     c
0258 E50C       +1  6000+1           mov     a,prod
025A 13         +1  6001+1           rrc     a
025B F50C       +1  6002+1           mov     prod,a
025D E50D       +1  6003+1           mov     a,prod+1
025F 13         +1  6004+1           rrc     a
0260 F50D       +1  6005+1           mov     prod+1,a
0262 E50E       +1  6006+1           mov     a,prod+2
0264 13         +1  6007+1           rrc     a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    95

0265 F50E       +1  6008+1           mov     prod+2,a
0267 E50F       +1  6009+1           mov     a,prod+3
0269 13         +1  6010+1           rrc     a
026A F50F       +1  6011+1           mov     prod+3,a
026C            +1  6012     mup3:
                +1  6013+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  6014+1           clr     c
026D E508       +1  6015+1           mov     a,mant2
026F 13         +1  6016+1           rrc     a
0270 F508       +1  6017+1           mov     mant2,a
0272 E509       +1  6018+1           mov     a,mant2+1
0274 13         +1  6019+1           rrc     a
0275 F509       +1  6020+1           mov     mant2+1,a
0277 E50A       +1  6021+1           mov     a,mant2+2
0279 13         +1  6022+1           rrc     a
027A F50A       +1  6023+1           mov     mant2+2,a
027C E50B       +1  6024+1           mov     a,mant2+3
027E 13         +1  6025+1           rrc     a
027F F50B       +1  6026+1           mov     mant2+3,a
0281 5014       +1  6027             jnc     mup2            ;skip if bit not set
                +1  6028+3           dan     prod            ;add to prod
0283 ED         +1  6029+1           mov     a,r5
0284 250F       +1  6030+1           add     a,prod+3
0286 F50F       +1  6031+1           mov     prod+3,a
0288 E50E       +1  6032+1           mov     a,prod+2
028A 3C         +1  6033+1           addc    a,r4
028B F50E       +1  6034+1           mov     prod+2,a
028D E50D       +1  6035+1           mov     a,prod+1
028F 3B         +1  6036+1           addc    a,r3
0290 F50D       +1  6037+1           mov     prod+1,a
0292 E50C       +1  6038+1           mov     a,prod+0
0294 3A         +1  6039+1           addc    a,r2
0295 F50C       +1  6040+1           mov     prod,a
0297            +1  6041     mup2:
0297 DEBE       +1  6042             djnz    r6,mup11        ;loop if more
0299 E8         +1  6043             mov     a,r0            ;get exp1
029A 29         +1  6044             add     a,r1            ;add exp2
029B 247A       +1  6045             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  6046             mov     r0,a            ;store
029E EF         +1  6047             mov     a,r7            ;get sign
029F 23         +1  6048             rl      a               ;rotate bit into msb
02A0 6207       +1  6049             xrl     sign,a          ;xor with other bit
                +1  6050+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  6051+1           mov     r2,prod
02A4 AB0D       +1  6052+1           mov     r3,prod+1
02A6 AC0E       +1  6053+1           mov     r4,prod+2
02A8 AD0F       +1  6054+1           mov     r5,prod+3
02AA 11F0       +1  6055             call    norm1           ;normalize
02AC 11DE       +1  6056             call    pack1
                +1  6057+3           restregs
02AE D000       +1  6058+1           pop     0
02B0 D001       +1  6059+1           pop     1
02B2 D006       +1  6060+1           pop     6
02B4 D007       +1  6061+1           pop     7
02B6 22         +1  6062             ret
                +1  6063     ;-----------------------------------------------------------
                +1  6064     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  6065     
02B7            +1  6066     fldiv:
                +1  6067+3           saveregs
02B7 C007       +1  6068+1           push    7
02B9 C006       +1  6069+1           push    6
02BB C001       +1  6070+1           push    1
02BD C000       +1  6071+1           push    0
02BF 119E       +1  6072             call    unpack1
02C1 11BA       +1  6073             call    unpack2
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    96

02C3 E4         +1  6074             clr     a
02C4 F50C       +1  6075             mov     prod,a
02C6 F50D       +1  6076             mov     prod+1,a
02C8 F50E       +1  6077             mov     prod+2,a
02CA F50F       +1  6078             mov     prod+3,a
02CC E9         +1  6079             mov     a,r1            ;check for zero divisor
02CD 6067       +1  6080             jz      div9
02CF E8         +1  6081             mov     a,r0            ;check for zero dividend
02D0 6064       +1  6082             jz      div9
02D2 C3         +1  6083             clr     c
02D3 99         +1  6084             subb    a,r1            ;compute new exponent
02D4 2478       +1  6085             add     a,#127-7        ;unbias
02D6 F8         +1  6086             mov     r0,a            ;store back
02D7 EF         +1  6087             mov     a,r7            ;get sign
02D8 23         +1  6088             rl      a
02D9 6207       +1  6089             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  6090             mov     r6,#24+7        ;initialize counter
02DD            +1  6091     div1:
                +1  6092+3           shfup   prod            ;shift quotient up
02DD C3         +1  6093+1           clr     c
02DE E50F       +1  6094+1           mov     a,prod+3
02E0 33         +1  6095+1           rlc     a
02E1 F50F       +1  6096+1           mov     prod+3,a
02E3 E50E       +1  6097+1           mov     a,prod+2
02E5 33         +1  6098+1           rlc     a
02E6 F50E       +1  6099+1           mov     prod+2,a
02E8 E50D       +1  6100+1           mov     a,prod+1
02EA 33         +1  6101+1           rlc     a
02EB F50D       +1  6102+1           mov     prod+1,a
02ED E50C       +1  6103+1           mov     a,prod
02EF 33         +1  6104+1           rlc     a
02F0 F50C       +1  6105+1           mov     prod,a
02F2 C3         +1  6106             clr     c
02F3 EA         +1  6107             mov     a,r2            ;compare values
02F4 9508       +1  6108             subb    a,mant2
02F6 4028       +1  6109             jc      div2            ;skip if bigger
02F8 7013       +1  6110             jnz     div3
02FA EB         +1  6111             mov     a,r3            ;compare values
02FB 9509       +1  6112             subb    a,mant2+1
02FD 4021       +1  6113             jc      div2            ;skip if bigger
02FF 700C       +1  6114             jnz     div3
0301 EC         +1  6115             mov     a,r4            ;compare values
0302 950A       +1  6116             subb    a,mant2+2
0304 401A       +1  6117             jc      div2            ;skip if bigger
0306 7005       +1  6118             jnz     div3
0308 ED         +1  6119             mov     a,r5            ;compare values
0309 950B       +1  6120             subb    a,mant2+3
030B 4013       +1  6121             jc      div2            ;skip if bigger
030D            +1  6122     div3:
030D ED         +1  6123             mov     a,r5
030E 950B       +1  6124             subb    a,mant2+3
0310 FD         +1  6125             mov     r5,a
0311 EC         +1  6126             mov     a,r4
0312 950A       +1  6127             subb    a,mant2+2               ;do subtraction
0314 FC         +1  6128             mov     r4,a
0315 EB         +1  6129             mov     a,r3
0316 9509       +1  6130             subb    a,mant2+1               ;do subtraction
0318 FB         +1  6131             mov     r3,a
0319 EA         +1  6132             mov     a,r2
031A 9508       +1  6133             subb    a,mant2         ;do subtraction
031C FA         +1  6134             mov     r2,a
031D 430F01     +1  6135             orl     prod+3,#1       ;set lsb in quotient
0320            +1  6136     div2:
                +1  6137+3           lshift                  ;shift dividend up
0320 ED         +1  6138+1           mov     a,r5
0321 33         +1  6139+1           rlc     a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    97

0322 FD         +1  6140+1           mov     r5,a
0323 EC         +1  6141+1           mov     a,r4
0324 33         +1  6142+1           rlc     a
0325 FC         +1  6143+1           mov     r4,a
0326 EB         +1  6144+1           mov     a,r3
0327 33         +1  6145+1           rlc     a
0328 FB         +1  6146+1           mov     r3,a
0329 EA         +1  6147+1           mov     a,r2
032A 33         +1  6148+1           rlc     a
032B FA         +1  6149+1           mov     r2,a
032C DEAF       +1  6150             djnz    r6,div1         ;loop if more
                +1  6151+3           copytor prod            ;copy quotient
032E AA0C       +1  6152+1           mov     r2,prod
0330 AB0D       +1  6153+1           mov     r3,prod+1
0332 AC0E       +1  6154+1           mov     r4,prod+2
0334 AD0F       +1  6155+1           mov     r5,prod+3
0336            +1  6156     div9:
0336 11F0       +1  6157             call    norm1           ;now normalize result
0338 11DE       +1  6158             call    pack1           ;pack it up
                +1  6159+3           restregs                ;restore registers
033A D000       +1  6160+1           pop     0
033C D001       +1  6161+1           pop     1
033E D006       +1  6162+1           pop     6
0340 D007       +1  6163+1           pop     7
0342 22         +1  6164             ret
                +1  6165     ;------------------------------------------------------------------
                +1  6166     
                +1  6167     ;       Float to long conversion: if the exponent is less than the
                +1  6168     ;       excess value, the result is zero. If the exponent is so large
                +1  6169     ;       that the value would be shifted out, the result is overflow.
                +1  6170     ;       Otherwise shift the mantissa up or down as required.
                +1  6171     
0343            +1  6172     ftol:
                +1  6173+3           saveregs
0343 C007       +1  6174+1           push    7
0345 C006       +1  6175+1           push    6
0347 C001       +1  6176+1           push    1
0349 C000       +1  6177+1           push    0
034B EA         +1  6178             mov     a,r2
034C B4BF09     +1  6179             cjne    a,#0bfh,ne05
034F EB         +1  6180             mov     a,r3
0350 7006       +1  6181             jnz     ne05
0352 EC         +1  6182             mov     a,r4
0353 7003       +1  6183             jnz     ne05
0355 ED         +1  6184             mov     a,r5
0356 6024       +1  6185             jz      ftol1
0358 119E       +1  6186     ne05:   call    unpack1
035A E8         +1  6187             mov     a,r0            ;get exponent
035B 2482       +1  6188             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  6189             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  6190             mov     a,r7            ;get sign
0361 30E70D     +1  6191             jnb     acc.7,ftol4     ;skip if +ve
                +1  6192+3           neg1                    ;negate it
0364 C3         +1  6193+1           clr     c
0365 E4         +1  6194+1           clr     a
0366 9D         +1  6195+1           subb    a,r5
0367 FD         +1  6196+1           mov     r5,a
0368 E4         +1  6197+1           clr     a
0369 9C         +1  6198+1           subb    a,r4
036A FC         +1  6199+1           mov     r4,a
036B E4         +1  6200+1           clr     a
036C 9B         +1  6201+1           subb    a,r3
036D FB         +1  6202+1           mov     r3,a
036E E4         +1  6203+1           clr     a
036F 9A         +1  6204+1           subb    a,r2
0370 FA         +1  6205+1           mov     r2,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    98

0371            +1  6206     ftol4:
0371 E8         +1  6207             mov     a,r0            ;get exponent
0372 246A       +1  6208             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  6209             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  6210             mov     r0,a            ;save it
0378 24F8       +1  6211             add     a,#-8           ;if > 8, too big
037A 500E       +1  6212             jnc     ftol3
037C            +1  6213     ftol1:
037C E4         +1  6214             clr     a
037D FA         +1  6215             mov     r2,a
037E FB         +1  6216             mov     r3,a
037F FC         +1  6217             mov     r4,a
0380 FD         +1  6218             mov     r5,a
0381            +1  6219     ftol9:
                +1  6220+3           restregs
0381 D000       +1  6221+1           pop     0
0383 D001       +1  6222+1           pop     1
0385 D006       +1  6223+1           pop     6
0387 D007       +1  6224+1           pop     7
0389 22         +1  6225             ret
038A            +1  6226     ftol3:
038A E8         +1  6227             mov     a,r0
038B FE         +1  6228             mov     r6,a            ;store in counter
038C 60F3       +1  6229             jz      ftol9           ;if zero, do nothing
038E            +1  6230     ftol33:
                +1  6231+3           lshift                  ;shift up
038E ED         +1  6232+1           mov     a,r5
038F 33         +1  6233+1           rlc     a
0390 FD         +1  6234+1           mov     r5,a
0391 EC         +1  6235+1           mov     a,r4
0392 33         +1  6236+1           rlc     a
0393 FC         +1  6237+1           mov     r4,a
0394 EB         +1  6238+1           mov     a,r3
0395 33         +1  6239+1           rlc     a
0396 FB         +1  6240+1           mov     r3,a
0397 EA         +1  6241+1           mov     a,r2
0398 33         +1  6242+1           rlc     a
0399 FA         +1  6243+1           mov     r2,a
039A DEF2       +1  6244             djnz    r6,ftol33       ;and loop
039C 80E3       +1  6245             sjmp    ftol9
039E            +1  6246     ftol2:
039E F4         +1  6247             cpl     a               ;complement
039F FE         +1  6248             mov     r6,a
03A0 6022       +1  6249             jz      ftol22
03A2            +1  6250     ftol23:
03A2 EF         +1  6251             mov     a,r7
03A3 30E70F     +1  6252             jnb     acc.7,ftol24
                +1  6253+3           rshift1
03A6 D3         +1  6254+1           setb    c
03A7 EA         +1  6255+1           mov     a,r2
03A8 13         +1  6256+1           rrc     a
03A9 FA         +1  6257+1           mov     r2,a
03AA EB         +1  6258+1           mov     a,r3
03AB 13         +1  6259+1           rrc     a
03AC FB         +1  6260+1           mov     r3,a
03AD EC         +1  6261+1           mov     a,r4
03AE 13         +1  6262+1           rrc     a
03AF FC         +1  6263+1           mov     r4,a
03B0 ED         +1  6264+1           mov     a,r5
03B1 13         +1  6265+1           rrc     a
03B2 FD         +1  6266+1           mov     r5,a
03B3 800D       +1  6267             jmp     ftol25
03B5            +1  6268+3   ftol24: rshift                  ;shift down
03B5 C3         +1  6269+1           clr     c
03B6 EA         +1  6270+1           mov     a,r2
03B7 13         +1  6271+1           rrc     a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE    99

03B8 FA         +1  6272+1           mov     r2,a
03B9 EB         +1  6273+1           mov     a,r3
03BA 13         +1  6274+1           rrc     a
03BB FB         +1  6275+1           mov     r3,a
03BC EC         +1  6276+1           mov     a,r4
03BD 13         +1  6277+1           rrc     a
03BE FC         +1  6278+1           mov     r4,a
03BF ED         +1  6279+1           mov     a,r5
03C0 13         +1  6280+1           rrc     a
03C1 FD         +1  6281+1           mov     r5,a
03C2 DEDE       +1  6282     ftol25: djnz    r6,ftol23
03C4            +1  6283     ftol22:
                +1  6284+3           add1                    ;round
03C4 ED         +1  6285+1           mov     a,r5
03C5 2401       +1  6286+1           add     a,#1
03C7 FD         +1  6287+1           mov     r5,a
03C8 E4         +1  6288+1           clr     a
03C9 3C         +1  6289+1           addc    a,r4
03CA FC         +1  6290+1           mov     r4,a
03CB E4         +1  6291+1           clr     a
03CC 3B         +1  6292+1           addc    a,r3
03CD FB         +1  6293+1           mov     r3,a
03CE E4         +1  6294+1           clr     a
03CF 3A         +1  6295+1           addc    a,r2
03D0 FA         +1  6296+1           mov     r2,a
03D1 EF         +1  6297             mov     a,r7
03D2 30E70F     +1  6298             jnb     acc.7,ftol26
                +1  6299+3           rshift1
03D5 D3         +1  6300+1           setb    c
03D6 EA         +1  6301+1           mov     a,r2
03D7 13         +1  6302+1           rrc     a
03D8 FA         +1  6303+1           mov     r2,a
03D9 EB         +1  6304+1           mov     a,r3
03DA 13         +1  6305+1           rrc     a
03DB FB         +1  6306+1           mov     r3,a
03DC EC         +1  6307+1           mov     a,r4
03DD 13         +1  6308+1           rrc     a
03DE FC         +1  6309+1           mov     r4,a
03DF ED         +1  6310+1           mov     a,r5
03E0 13         +1  6311+1           rrc     a
03E1 FD         +1  6312+1           mov     r5,a
03E2 809D       +1  6313             jmp     ftol9
03E4            +1  6314+3   ftol26: rshift
03E4 C3         +1  6315+1           clr     c
03E5 EA         +1  6316+1           mov     a,r2
03E6 13         +1  6317+1           rrc     a
03E7 FA         +1  6318+1           mov     r2,a
03E8 EB         +1  6319+1           mov     a,r3
03E9 13         +1  6320+1           rrc     a
03EA FB         +1  6321+1           mov     r3,a
03EB EC         +1  6322+1           mov     a,r4
03EC 13         +1  6323+1           rrc     a
03ED FC         +1  6324+1           mov     r4,a
03EE ED         +1  6325+1           mov     a,r5
03EF 13         +1  6326+1           rrc     a
03F0 FD         +1  6327+1           mov     r5,a
03F1 808E       +1  6328             jmp     ftol9
                +1  6329     
                +1  6330     ;       arithmetic integer to floating conversions
                +1  6331     
03F3            +1  6332     abtof:
03F3 ED         +1  6333             mov     a,r5
03F4 23         +1  6334             rl      a
03F5 FC         +1  6335             mov     r4,a
03F6 9C         +1  6336             subb    a,r4
03F7 FC         +1  6337             mov     r4,a
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   100

03F8 FB         +1  6338             mov     r3,a
03F9 FA         +1  6339             mov     r2,a
03FA 8006       +1  6340             jmp     altof
03FC            +1  6341     awtof:
03FC EC         +1  6342             mov     a,r4
03FD 23         +1  6343             rl      a
03FE FB         +1  6344             mov     r3,a
03FF 9B         +1  6345             subb    a,r3
0400 FB         +1  6346             mov     r3,a
0401 FA         +1  6347             mov     r2,a
0402            +1  6348     altof:
                +1  6349+3           saveregs
0402 C007       +1  6350+1           push    7
0404 C006       +1  6351+1           push    6
0406 C001       +1  6352+1           push    1
0408 C000       +1  6353+1           push    0
040A EA         +1  6354             mov     a,r2            ;get sign
040B 5480       +1  6355             anl     a,#80h
040D FF         +1  6356             mov     r7,a            ;store it
040E 30E70D     +1  6357             jnb     acc.7,altof1    ;skip if +ve
                +1  6358+3           neg1
0411 C3         +1  6359+1           clr     c
0412 E4         +1  6360+1           clr     a
0413 9D         +1  6361+1           subb    a,r5
0414 FD         +1  6362+1           mov     r5,a
0415 E4         +1  6363+1           clr     a
0416 9C         +1  6364+1           subb    a,r4
0417 FC         +1  6365+1           mov     r4,a
0418 E4         +1  6366+1           clr     a
0419 9B         +1  6367+1           subb    a,r3
041A FB         +1  6368+1           mov     r3,a
041B E4         +1  6369+1           clr     a
041C 9A         +1  6370+1           subb    a,r2
041D FA         +1  6371+1           mov     r2,a
041E            +1  6372     altof1:
041E 7896       +1  6373             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  6374             call    norm1           ;normalize it
0422 11DE       +1  6375             call    pack1           ;and pack up
                +1  6376+3           restregs
0424 D000       +1  6377+1           pop     0
0426 D001       +1  6378+1           pop     1
0428 D006       +1  6379+1           pop     6
042A D007       +1  6380+1           pop     7
042C 22         +1  6381             ret
                +1  6382     
042D            +1  6383     lbtof:
042D 7C00       +1  6384             mov     r4,#0
042F            +1  6385     lwtof:
042F E4         +1  6386             clr     a
0430 FB         +1  6387             mov     r3,a
0431 FA         +1  6388             mov     r2,a
0432            +1  6389     lltof:
                +1  6390+3           saveregs
0432 C007       +1  6391+1           push    7
0434 C006       +1  6392+1           push    6
0436 C001       +1  6393+1           push    1
0438 C000       +1  6394+1           push    0
043A 7F00       +1  6395             mov     r7,#0           ;zero sign
043C 80E0       +1  6396             sjmp    altof1
                +1  6397     
                +1  6398     ;-------------------------------------------------------
                +1  6399     
                +1  6400     
                    6401     
                    6402     ;$include (d:\amp\wriread.asm)
                +1  6403     ;dptr-адрес ячейки страницы памяти
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   101

043E 75A800     +1  6404     cle256:          mov            IE,#00H
0441 75B601     +1  6405                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  6406                              MOV            PSCTL,#03
                +1  6407                                             
0447 7400       +1  6408                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  6409                                     movx    @dptr,a                         ;wr
044A 758F00     +1  6410                                     mov             PSCTL,#00
044D 75B600     +1  6411                                 mov         FLSCL,#00
0450 75A880     +1  6412                               mov           IE,#80H
0453 22         +1  6413                                     ret
                +1  6414     
                +1  6415     ;чтение памяти программ в r8..r11
                +1  6416     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  6417     re4byte:        mov                     dph,r2
0456 8B82       +1  6418                                             mov                     dpl,r3
0458 E4         +1  6419                                             clr                     a
0459 93         +1  6420                                             movc            a,@a+dptr
045A F508       +1  6421                                             mov                     r8,a
045C A3         +1  6422                                             inc                     dptr
045D E4         +1  6423                                             clr                     a
045E 93         +1  6424                                             movc            a,@a+dptr
045F F509       +1  6425                                             mov                     r9,a
0461 A3         +1  6426                                             inc                     dptr
0462 E4         +1  6427                                             clr                     a
0463 93         +1  6428                                             movc            a,@a+dptr
0464 F50A       +1  6429                                             mov                     r10,a
0466 A3         +1  6430                                             inc                     dptr
0467 E4         +1  6431                                             clr                     a
0468 93         +1  6432                                             movc            a,@a+dptr
0469 F50B       +1  6433                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  6434                                             ret
                +1  6435      ;чтение памяти программ в r2..r5
                +1  6436     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  6437     rebyte2:        mov                     dph,r2
046E 8B82       +1  6438                                             mov                     dpl,r3
0470 E4         +1  6439                                             clr                     a
0471 93         +1  6440                                             movc            a,@a+dptr
0472 FA         +1  6441                                             mov                     r2,a
0473 A3         +1  6442                                             inc                     dptr
0474 E4         +1  6443                                             clr                     a
0475 93         +1  6444                                             movc            a,@a+dptr
0476 FB         +1  6445                                             mov                     r3,a
0477 A3         +1  6446                                             inc                     dptr
0478 E4         +1  6447                                             clr                     a
0479 93         +1  6448                                             movc            a,@a+dptr
047A FC         +1  6449                                             mov                     r4,a
047B A3         +1  6450                                             inc                     dptr
047C E4         +1  6451                                             clr                     a
047D 93         +1  6452                                             movc            a,@a+dptr
047E FD         +1  6453                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  6454                                             ret
                +1  6455      
                +1  6456     
                +1  6457      ;r7-количество байт
                +1  6458     ;dptr-адр ячейки для записи
                +1  6459     ;r1-адр ячейки  внешнего озу
                +1  6460     
0480 75A800     +1  6461     wrpage:  mov            IE,#00H
0483 75B601     +1  6462     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  6463                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  6464                      movx           a,@r1
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   102

048A F0         +1  6465                      movx           @dptr,a                         ;wr
048B 758F00     +1  6466                      mov            PSCTL,#0
048E 75B600     +1  6467                      mov            FLSCL,#00
0491 A3         +1  6468                     inc                     dptr
0492 09         +1  6469                     inc                     r1
0493 DFEE       +1  6470                     djnz            r7,WW5
0495 75A880     +1  6471                     mov             IE,#80H
0498 22         +1  6472                     ret
                +1  6473                             
                +1  6474     
                +1  6475     
                +1  6476                                                             
                +1  6477     
                +1  6478     
                +1  6479     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  6480     ;чтение памяти программ во внешнее озу
                +1  6481     ;вх-r2,r3-адр яч памяти прогр
                +1  6482     ;r1- яч внешнее озу
0499 8A83       +1  6483     copyPP:         mov                     dph,r2
049B 8B82       +1  6484                                             mov                     dpl,r3
049D 7FFF       +1  6485                                             mov                     r7,#0ffh
049F E4         +1  6486     copy1:          clr                     a
04A0 93         +1  6487                                             movc            a,@a+dptr
04A1 F3         +1  6488                                             movx                    @r1,a
04A2 A3         +1  6489                                             inc                     dptr
04A3 09         +1  6490                                             inc                     r1
04A4 DFF9       +1  6491                                             djnz            r7,copy1
04A6 22         +1  6492                                             ret
                +1  6493     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  6494     
                +1  6495                                     
                +1  6496     
                +1  6497     ;r8..r11->@r0..@r0+3
                +1  6498     ;r0-адр ячейки
                +1  6499     ;сохранить в ячейке озу
04A7 E508       +1  6500     savelte:        mov     a,ltemp
04A9 F6         +1  6501                                             mov     @r0,a
04AA 08         +1  6502                                             inc     r0
04AB E509       +1  6503                                             mov     a,ltemp+1
04AD F6         +1  6504                                             mov     @r0,a
04AE 08         +1  6505                                             inc     r0
04AF E50A       +1  6506                                             mov     a,ltemp+2
04B1 F6         +1  6507                                             mov     @r0,a
04B2 08         +1  6508                                             inc     r0
04B3 E50B       +1  6509                                             mov     a,ltemp+3
04B5 F6         +1  6510                                             mov     @r0,a
04B6 22         +1  6511                                             ret
                +1  6512     
                +1  6513     ;
                +1  6514     
                +1  6515     
                +1  6516     
                +1  6517     
                +1  6518     
                +1  6519                     
                +1  6520     
                +1  6521     
                +1  6522     
                +1  6523     
                +1  6524      
                    6525     
                    6526                                                   
                    6527     END
                                                                             
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   103

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   0355H   R   SEG=MAIN   797 800#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1280 1337 1362 1383 1387 1390 1391 1393 1500 1505 3328 3334 3367
                                           3393 3591 3628 3629 3631 3705 3725 3805 3809 3833 3836 4404 4530 4533 4557
                                           4560
ABRET. . . . . . .  C ADDR   1A1CH   R   SEG=MAIN   4333 4335#
ABTOF. . . . . . .  C ADDR   03F3H   A      6332#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 636 690 698 706 714 716 736 1041 1052 1060 1136 1449 1628 1637 1646
                                           1655 1676 2008 2272 2294 2299 2303 2308 2311 2314 2317 2320 2487 2538 2584
                                           2595 2678 2687 2695 2705 2719 2829 2847 2872 2877 2881 2884 2887 2890 2893
                                           2896 3182 3253 3754 3760 3797 3867 4739 4817 4820 5077 5729 5812 5829 5861
                                           5899 5927 6189 6191 6209 6252 6298 6357
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   1FEDH   R   SEG=MAIN   827 863 865 867 869 871 873 875 877 879 942 944 946 948 950 952
                                           954 956 958 961 963 965 967 969 971 973 975 977 979 5318#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1336 1348 1352 1367 1392 1395 1396 1504 1508 3325 3329 3364 3368
                                           3390 3394 3601 3615 3617 3619 3630 3633 3715 3726 3810 3837 4207 4224 4242
                                           4305 4322 4532 4535 4559 4562
AFTERK . . . . . .  C ADDR   0615H   R   SEG=MAIN   1069 1150#
AGE2 . . . . . . .  C ADDR   01ECH   R   SEG=MAIN   566# 569
AGE9 . . . . . . .  C ADDR   0717H   R   SEG=MAIN   1284# 1287
AGEON. . . . . . .  C ADDR   01FAH   R   SEG=MAIN   575# 577
ALESS0 . . . . . .  C ADDR   084DH   R   SEG=MAIN   1449 1470#
ALLSUM . . . . . .  C ADDR   030EH   R   SEG=MAIN   756# 792
ALMUL. . . . . . .  C ADDR   1F34H   R   SEG=MAIN   5164#
ALTOF. . . . . . .  C ADDR   0402H   A      1035 1080 1129 1163 1176 1246 1785 1846 1884 3371 3397 3729 3813 3840
                                           6340 6348#
ALTOF1 . . . . . .  C ADDR   041EH   A      6357 6372# 6396
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   0563H   R   SEG=MAIN   1033 1049#
AN_T7. . . . . . .  C ADDR   10B7H   R   SEG=MAIN   2897# 2962 2971
AUTOKA . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1067 1814#
AVPGO. . . . . . .  C ADDR   069EH   R   SEG=MAIN   1222 1224#
AVTDEC1. . . . . .  C ADDR   05D5H   R   SEG=MAIN   1102 1109#
AWTOF. . . . . . .  C ADDR   03FCH   A      6341#
B. . . . . . . . .  D ADDR   00F0H   A      122# 4068 4424 5167 5170 5172 5176 5180 5184 5188 5193 5197 5204 5208
                                           5212 5218 5222 5226 5232 5925 5926
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 443#
BFORM. . . . . . .  C ADDR   0BBAH   R   SEG=MAIN   2086 2091 2103# 2129
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   104

BIN30. . . . . . .  C ADDR   1D50H   R   SEG=MAIN   4727# 4753
BIN31. . . . . . .  C ADDR   1D54H   R   SEG=MAIN   4732# 4736
BIN32. . . . . . .  C ADDR   1D64H   R   SEG=MAIN   4745# 4750
BIN41. . . . . . .  C ADDR   1D75H   R   SEG=MAIN   4761# 4771
BINDEC . . . . . .  C ADDR   1D44H   R   SEG=MAIN   1338 1394 1506 3632 4534 4561 4706#
BITAKT . . . . . .  B ADDR   0023H.2 A      348# 1585 1586 1589
BITAVP . . . . . .  B ADDR   0020H.5 A      319# 1182 1403 1577 2950 2951 2953
BITBON . . . . . .  B ADDR   0021H.2 A      326# 1706 2329 2330 2332
BITBUF . . . . . .  B ADDR   0021H.0 A      324#
BITEIZM. . . . . .  B ADDR   0022H.5 A      339# 1593 2930 2942 3528 3987
BITIZM . . . . . .  B ADDR   0020H.4 A      318# 546 657 2300 2365 2450 2878 2931 3042 3063 3133 3161 3229 3237 3408
                                           3429 3487 3529 3576 3663 3735
BITKLB . . . . . .  B ADDR   0022H.2 A      336# 1152 1608 2305 2949 2956 3733 3977
BITMAS . . . . . .  B ADDR   0020H.1 A      315# 988 991 2068
BITMEM . . . . . .  B ADDR   0021H.3 A      327# 2672 3164 3177 3228 3236 3407
BITMENU. . . . . .  B ADDR   0022H.1 A      335# 1489 2932 3413 3428 3492 3530 3575 3662 3732
BITMIG . . . . . .  B ADDR   0023H.1 A      347# 2577 2836 3102 3694 3789 3874 4490 4504 4516 4579 4586 4592 4598
BITNUL . . . . . .  B ADDR   0021H.7 A      331# 1562 2973 2974 2981
BITOLL . . . . . .  B ADDR   0022H.7 A      341# 612 1410 1487
BITPRD . . . . . .  B ADDR   0021H.1 A      325# 1705
BITRS. . . . . . .  B ADDR   0020H.3 A      317#
BITT2. . . . . . .  B ADDR   0022H.0 A      334# 1486 2451 2484 2988 3134
BITV19 . . . . . .  B ADDR   0022H.3 A      337# 500 504 2645 2648 2652 3476 3481 3558 3571 3668 3671 3675
BITVI11. . . . . .  B ADDR   0020H.6 A      320# 1183 2323 2325 2364 2608 3041
BITVI31. . . . . .  B ADDR   0022H.6 A      340#
BITVICH. . . . . .  B ADDR   0022H.4 A      338# 1485 2324 2366 2376 2506 3005 3062
BITZNAK. . . . . .  B ADDR   0020H.0 A      314# 637 673
BITZNB . . . . . .  B ADDR   0023H.3 A      349# 3841 4331 4334
BITZUS . . . . . .  B ADDR   0020H.7 A      321# 1236 1426 1727 1730 2411
BMEM11 . . . . . .  B ADDR   0021H.4 A      328# 2609
BMEM12 . . . . . .  B ADDR   0021H.5 A      329#
BMEM13 . . . . . .  B ADDR   0021H.6 A      330#
BOUT7. . . . . . .  C ADDR   125AH   R   SEG=MAIN   3142# 3144
BRET . . . . . . .  C ADDR   1889H   R   SEG=MAIN   4008 4013 4017#
BUFDEC . . . . . .  C ADDR   0884H   R   SEG=MAIN   1511# 1516
BUFIND . . . . . .  D ADDR   0040H   A      298# 565 569 574 577 581 605 1283 1287 1353 1374 1395 1396 1397 1459 1464
                                           1509 1517 1519 1524 1560 1587 1590 1595 1609 1940 2288 2552 2570 2586 2588
                                           2591 2741 2784 2803 2865 3089 3115 3148 3154 3296 3600 3633 3634 3637 3686
                                           3714 3781 3824 3932 4066 4084 4206 4223 4241 4304 4321 4332 4493 4536 4555
                                           4563 4583 4604
BUFON. . . . . . .  C ADDR   0CFEH   R   SEG=MAIN   2329 2332#
BUFR . . . . . . .  C ADDR   07BCH   R   SEG=MAIN   1376# 1381
BUFR2. . . . . . .  C ADDR   079EH   R   SEG=MAIN   1355# 1360
BUFR3. . . . . . .  C ADDR   0797H   R   SEG=MAIN   1346 1351#
BUFR30 . . . . . .  C ADDR   079AH   R   SEG=MAIN   1349 1353#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      5922# 5926
CELLBIT. . . . . .  D ADDR   0020H   A      313# 314 315 316 317 318 319 320 321
CELLBIT1 . . . . .  D ADDR   0021H   A      323# 324 325 326 327 328 329 330 331
CELLBIT2 . . . . .  D ADDR   0022H   A      333# 334 335 336 337 338 339 340 341
CELLBIT3 . . . . .  D ADDR   0023H   A      345# 346 347 348 349
CEXP . . . . . . .  C ADDR   01E2H   A      5899 5908#
CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   1926H   R   SEG=MAIN   2982 4150#
CH1. . . . . . . .  C ADDR   1942H   R   SEG=MAIN   1925 4160#
CH10 . . . . . . .  C ADDR   192AH   R   SEG=MAIN   1002 4151#
CH100. . . . . . .  C ADDR   193AH   R   SEG=MAIN   755 1444 4155#
CH10000. . . . . .  C ADDR   1936H   R   SEG=MAIN   4154#
CH2. . . . . . . .  C ADDR   193EH   R   SEG=MAIN   997 4156#
CH20 . . . . . . .  C ADDR   1AE3H   R   SEG=MAIN   791 1007 4455#
CH2THO . . . . . .  C ADDR   1956H   R   SEG=MAIN   1853 1891 4165#
CH5. . . . . . . .  C ADDR   192EH   R   SEG=MAIN   4152#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   105

CH57 . . . . . . .  C ADDR   1ADFH   R   SEG=MAIN   4454#
CH954. . . . . . .  C ADDR   1932H   R   SEG=MAIN   4153#
CHANMA . . . . . .  C ADDR   0E8EH   R   SEG=MAIN   2584 2593#
CHANZ. . . . . . .  C ADDR   0E75H   R   SEG=MAIN   2538 2582#
CHAVT. . . . . . .  D ADDR   0081H   A      363# 526 1058 1103 1109 1907 3488
CHBEFORE . . . . .  D ADDR   009BH   A      373# 548 752 767 786
CHBUF. . . . . . .  D ADDR   00ADH   A      380# 1703 1713
CHCMP. . . . . . .  C ADDR   0C5FH   R   SEG=MAIN   649 1064 2245#
CHDEC. . . . . . .  C ADDR   0AC6H   R   SEG=MAIN   656 1110 1121 1917#
CHDEL. . . . . . .  D ADDR   0083H   A      364# 1754 1799 1821 1866 1901
CHDELMO. . . . . .  C ADDR   0A08H   R   SEG=MAIN   1769 1799# 1804
CHIF . . . . . . .  C ADDR   1B27H   R   SEG=MAIN   4497 4499#
CHIND. . . . . . .  D ADDR   00ACH   A      379# 1197 1613
CHINKOR. . . . . .  D ADDR   0098H   A      362# 521 734 1050 1063 1105 1117 1120 1806
CHK. . . . . . . .  C ADDR   196EH   R   SEG=MAIN   4171#
CHKL . . . . . . .  D ADDR   003DH   A      305# 648 655 2429 2457 2499 2911 3167 3440
CHMAS. . . . . . .  D ADDR   006EH   A      302# 985 992 1010 2067
CHMASN . . . . . .  D ADDR   003FH   A      306# 741 750 787 804 816 990 992 993
CHTADC . . . . . .  C ADDR   0B10H   R   SEG=MAIN   1966#
CHTHO. . . . . . .  C ADDR   194EH   R   SEG=MAIN   1081 1164 3969 4163#
CHTHOU . . . . . .  C ADDR   19E7H   R   SEG=MAIN   4292#
CHZAP. . . . . . .  C ADDR   1922H   R   SEG=MAIN   1692 4149#
CH_1 . . . . . . .  C ADDR   1946H   R   SEG=MAIN   551 1300 1323 4161#
CH_10. . . . . . .  C ADDR   1966H   R   SEG=MAIN   1306 1329 4169#
CH_10TH. . . . . .  C ADDR   1962H   R   SEG=MAIN   1217 4168#
CH_200 . . . . . .  C ADDR   195EH   R   SEG=MAIN   4167#
CH_220 . . . . . .  C ADDR   195AH   R   SEG=MAIN   1177 4166#
CH_22T . . . . . .  C ADDR   1A25H   R   SEG=MAIN   1256 4340#
CH_250 . . . . . .  C ADDR   196AH   R   SEG=MAIN   1156 4170#
CH_500 . . . . . .  C ADDR   1A21H   R   SEG=MAIN   1252 4339#
CH_953 . . . . . .  C ADDR   194AH   R   SEG=MAIN   4162#
CH_B . . . . . . .  C ADDR   1A1DH   R   SEG=MAIN   1268 4337#
CH_FL. . . . . . .  C ADDR   1A29H   R   SEG=MAIN   1292 4341#
CIKLWR . . . . . .  C ADDR   0B90H   R   SEG=MAIN   2074#
CKCON. . . . . . .  D ADDR   008EH   A      30# 461 492
CL4. . . . . . . .  C ADDR   1980H   R   SEG=MAIN   4186# 4188
CL4N . . . . . . .  C ADDR   1986H   R   SEG=MAIN   4195# 4197
CLE256 . . . . . .  C ADDR   043EH   A      3564 6404#
CLEAR. . . . . . .  C ADDR   1D3EH   R   SEG=MAIN   4684 4688# 4718
CLEAR4 . . . . . .  C ADDR   197DH   R   SEG=MAIN   764 1233 1235 1363 1384 1423 1425 2358 2360 2967 2969 4184#
CLEARN . . . . . .  C ADDR   1985H   R   SEG=MAIN   3326 3365 3391 3592 3706 3806 3834 4193#
CLMASSIX . . . . .  C ADDR   0B80H   R   SEG=MAIN   520 1231 1421 1810 1911 2061# 2356 2965 3132
CLMASV . . . . . .  C ADDR   06A3H   R   SEG=MAIN   1226 1228#
CLMAX. . . . . . .  C ADDR   0B85H   R   SEG=MAIN   2063# 2066
CLR11. . . . . . .  C ADDR   1D3FH   R   SEG=MAIN   4690# 4692
CLRDEC . . . . . .  C ADDR   1D38H   R   SEG=MAIN   4682#
CLRNUM . . . . . .  C ADDR   1D3CH   R   SEG=MAIN   4685# 4799
CLRVICH. . . . . .  C ADDR   11D2H   R   SEG=MAIN   3062# 3079
CNTR . . . . . . .  N NUMB   0006H   A      5595#
CO02S. . . . . . .  C ADDR   190AH   R   SEG=MAIN   4133# 4137
CO05S. . . . . . .  C ADDR   1917H   R   SEG=MAIN   4142# 4146
CO1S . . . . . . .  C ADDR   1901H   R   SEG=MAIN   4127# 4127
CO2S . . . . . . .  C ADDR   18FDH   R   SEG=MAIN   4125# 4129
COMPA1 . . . . . .  C ADDR   0733H   R   SEG=MAIN   1300# 1309
COMPA2 . . . . . .  C ADDR   0769H   R   SEG=MAIN   1323# 1332
COND . . . . . . .  C ADDR   0BF4H   R   SEG=MAIN   2158#
COPY1. . . . . . .  C ADDR   049FH   A      6486# 6491
COPYPP . . . . . .  C ADDR   0499H   A      3551 6483#
COUNT. . . . . . .  C ADDR   18DFH   R   SEG=MAIN   4099# 4099
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   18E6H   R   SEG=MAIN   4105# 4105
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   106

DAC0CN . . . . . .  D ADDR   00D4H   A      95# 466
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1451 1472
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1454 1476
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 467
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1700
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1697
DCOA . . . . . . .  C ADDR   0BF9H   R   SEG=MAIN   2162# 2164
DCOB . . . . . . .  C ADDR   0C00H   R   SEG=MAIN   2166# 2184
DCOC . . . . . . .  C ADDR   0C0BH   R   SEG=MAIN   2176# 2181
DCOD . . . . . . .  C ADDR   0C18H   R   SEG=MAIN   2183 2186#
DD . . . . . . . .  C ADDR   0226H   R   SEG=MAIN   603#
DDOUTF . . . . . .  C ADDR   1357H   R   SEG=MAIN   3226 3233 3263 3269# 3320
DEC30. . . . . . .  C ADDR   1D91H   R   SEG=MAIN   4809# 4834
DEC31. . . . . . .  C ADDR   1D96H   R   SEG=MAIN   4815# 4822
DEC32. . . . . . .  C ADDR   1DA6H   R   SEG=MAIN   4827# 4831
DECBIN . . . . . .  C ADDR   1D84H   R   SEG=MAIN   3330 3369 3395 3727 3811 3838 4788#
DECSIZE. . . . . .  N NUMB   000AH   A      4663# 4683 4717 4744 4757 4760 4814
DECT2. . . . . . .  C ADDR   1DAFH   R   SEG=MAIN   4805 4837#
DEDPTR . . . . . .  C ADDR   2004H   R   SEG=MAIN   5322 5326 5330 5336#
DENORM . . . . . .  C ADDR   0133H   A      5754# 5810
DGOTO7 . . . . . .  C ADDR   1446H   R   SEG=MAIN   3398# 3404
DIAP . . . . . . .  D ADDR   00AEH   A      381# 540 1221 1405 1523 2350 2382 2958 3636 3988 4009 4255 4270 4421 4483
DIINC. . . . . . .  C ADDR   0D1CH   R   SEG=MAIN   2353 2356#
DIKDN. . . . . . .  C ADDR   1AB7H   R   SEG=MAIN   4423 4443#
DIKDW. . . . . . .  C ADDR   19D1H   R   SEG=MAIN   4259 4280#
DIPAR. . . . . . .  C ADDR   19E5H   R   SEG=MAIN   4290#
DIV1 . . . . . . .  C ADDR   02DDH   A      6091# 6150
DIV2 . . . . . . .  C ADDR   0320H   A      6109 6113 6117 6121 6136#
DIV3 . . . . . . .  C ADDR   030DH   A      6110 6114 6118 6122#
DIV9 . . . . . . .  C ADDR   0336H   A      6080 6082 6156#
DIVIDE . . . . . .  C ADDR   1E6FH   R   SEG=MAIN   2090 5023#
DONE . . . . . . .  C ADDR   1DDEH   R   SEG=MAIN   4853 4864#
DONE1. . . . . . .  C ADDR   1DDCH   R   SEG=MAIN   4856 4859 4862#
DOSH . . . . . . .  C ADDR   1EF8H   R   SEG=MAIN   5098 5114#
DOSUB. . . . . . .  C ADDR   1EE6H   R   SEG=MAIN   5082 5086 5090 5094 5095 5099#
DPH. . . . . . . .  D ADDR   0083H   A      19# 2021 2029 2858 3856 4870 4906 4941 4944 4956 4979 5341 5343 6417 6437
                                           6483
DPL. . . . . . . .  D ADDR   0082H   A      18# 2022 2028 2857 3857 4886 4922 4943 4957 4960 4994 5338 5340 6418 6438
                                           6484
DVIG0. . . . . . .  C ADDR   0958H   R   SEG=MAIN   1649# 1651
DVIG1. . . . . . .  C ADDR   094DH   R   SEG=MAIN   1640# 1642
DVIG2. . . . . . .  C ADDR   0942H   R   SEG=MAIN   1631# 1633
DVIG3. . . . . . .  C ADDR   0936H   R   SEG=MAIN   1622# 1624
DVIG4. . . . . . .  C ADDR   0964H   R   SEG=MAIN   1660# 1662
DVIG6. . . . . . .  C ADDR   0983H   R   SEG=MAIN   1685# 1687
DVM. . . . . . . .  C ADDR   0981H   R   SEG=MAIN   1676 1684#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 464
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 507 1938 1950 2270 2831 2846 3873
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1825H   R   SEG=MAIN   2947 3962#
ENDSDV . . . . . .  C ADDR   0987H   R   SEG=MAIN   1682 1688#
ENDSUM . . . . . .  C ADDR   04FCH   R   SEG=MAIN   828 880 984#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   0764H   R   SEG=MAIN   1303 1319#
EQU00. . . . . . .  C ADDR   0782H   R   SEG=MAIN   1321 1326 1335#
EQU1L. . . . . . .  C ADDR   0FC2H   R   SEG=MAIN   2751 2755#
EQU2L. . . . . . .  C ADDR   138FH   R   SEG=MAIN   3306 3311#
ERROR. . . . . . .  C ADDR   1BB2H   R   SEG=MAIN   3659 3940 3954 4602#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   107

ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      5597#
EXP2 . . . . . . .  N NUMB   0001H   A      5599# 5776 5797
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   19CAH   R   SEG=MAIN   4269#
FINDKOEF . . . . .  C ADDR   19BBH   R   SEG=MAIN   1077 1160 4254#
FINDR. . . . . . .  C ADDR   1B10H   R   SEG=MAIN   1389 3627 4483#
FINIS. . . . . . .  C ADDR   1F23H   R   SEG=MAIN   5042 5143#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      1250 5802# 5891
FLCMP. . . . . . .  C ADDR   01D6H   A      1158 1179 1219 1254 1258 1302 1325 5896#
FLDIV. . . . . . .  C ADDR   02B7H   A      1083 1166 1275 1294 1308 1855 1893 3967 6066#
FLMUL. . . . . . .  C ADDR   0203H   A      1044 1088 1141 1171 1270 1331 3971 5936#
FLOUT. . . . . . .  C ADDR   01E1H   A      5903 5906#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 6405 6411 6462 6467
FLSUB. . . . . . .  C ADDR   01D1H   A      1133 1851 1889 5889#
FND. . . . . . . .  C ADDR   01F8H   A      5912 5915 5918 5921 5924#
FO1M . . . . . . .  C ADDR   0BB7H   R   SEG=MAIN   2096 2100#
FO2M . . . . . . .  C ADDR   0BC0H   R   SEG=MAIN   2103 2105#
FORM4. . . . . . .  C ADDR   0BC1H   R   SEG=MAIN   2098 2104 2108#
FT1IZM . . . . . .  C ADDR   0DEAH   R   SEG=MAIN   2494#
FTOL . . . . . . .  C ADDR   0343H   A      1089 1173 1278 1494 3972 4529 4556 6172#
FTOL1. . . . . . .  C ADDR   037CH   A      6185 6189 6213#
FTOL2. . . . . . .  C ADDR   039EH   A      6209 6246#
FTOL22 . . . . . .  C ADDR   03C4H   A      6249 6283#
FTOL23 . . . . . .  C ADDR   03A2H   A      6250# 6282
FTOL24 . . . . . .  C ADDR   03B5H   A      6252 6268#
FTOL25 . . . . . .  C ADDR   03C2H   A      6267 6282#
FTOL26 . . . . . .  C ADDR   03E4H   A      6298 6314#
FTOL3. . . . . . .  C ADDR   038AH   A      6212 6226#
FTOL33 . . . . . .  C ADDR   038EH   A      6230# 6244
FTOL4. . . . . . .  C ADDR   0371H   A      6191 6206#
FTOL9. . . . . . .  C ADDR   0381H   A      6219# 6229 6245 6313 6328
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   472# 473
GO23NO . . . . . .  C ADDR   131FH   R   SEG=MAIN   3234 3240#
GO31L. . . . . . .  C ADDR   0FC8H   R   SEG=MAIN   2730 2760#
GO41L. . . . . . .  C ADDR   0FCDH   R   SEG=MAIN   2760 2762#
GOA2 . . . . . . .  C ADDR   0663H   R   SEG=MAIN   1152 1181 1184#
GOA3A2 . . . . . .  C ADDR   066DH   R   SEG=MAIN   1189#
GOCIKLE. . . . . .  C ADDR   09C0H   R   SEG=MAIN   1707 1716 1720 1727# 1734 1737
GOFULL . . . . . .  C ADDR   1351H   R   SEG=MAIN   3246 3267#
GOKLB. . . . . . .  C ADDR   0CF3H   R   SEG=MAIN   2305 2327#
GOONIN . . . . . .  C ADDR   067AH   R   SEG=MAIN   1196# 1237 1411 1427
GOONIND. . . . . .  C ADDR   0856H   R   SEG=MAIN   1199 1477#
GOONT. . . . . . .  C ADDR   09AAH   R   SEG=MAIN   1710 1712#
GOPART . . . . . .  C ADDR   02ECH   R   SEG=MAIN   736 739#
GOSK19 . . . . . .  C ADDR   0EF5H   R   SEG=MAIN   2645 2650#
GOTO7. . . . . . .  C ADDR   10B7H   R   SEG=MAIN   2910# 2979 2986 3022 3043 3066 3091 3103 3142 3146 3187 3196 3200
                                           3214 3230 3238 3271 3281 3310 3313 3342 3355 3357 3379 3398 3410 3656 3666
                                           3698 3738 3740 3756 3768 3825
GOTOKD . . . . . .  C ADDR   0585H   R   SEG=MAIN   1047 1071#
GOUT6. . . . . . .  C ADDR   0CA8H   R   SEG=MAIN   2295# 2323
GOZNAK . . . . . .  C ADDR   029EH   R   SEG=MAIN   643 679#
HNOR11 . . . . . .  C ADDR   11DDH   R   SEG=MAIN   3033 3070#
HNOR12 . . . . . .  C ADDR   1193H   R   SEG=MAIN   3023 3027#
HNOT1. . . . . . .  C ADDR   1223H   R   SEG=MAIN   3000 3112#
HNOT2. . . . . . .  C ADDR   1161H   R   SEG=MAIN   2997#
HR12 . . . . . . .  C ADDR   1189H   R   SEG=MAIN   3018 3023#
HVI1113. . . . . .  C ADDR   1183H   R   SEG=MAIN   3021# 3026 3031
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 508 3920 6404 6412 6461 6471
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   108

IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   115DH   R   SEG=MAIN   2992 2994#
IND. . . . . . . .  C ADDR   0ADEH   R   SEG=MAIN   570 578 603 667 1313 1317 1610 1938# 2343 3660 3942 3956 3980
INDA3. . . . . . .  C ADDR   081CH   R   SEG=MAIN   1442#
INDOLL . . . . . .  C ADDR   07F3H   R   SEG=MAIN   1403 1404 1408#
INIACP . . . . . .  C ADDR   1A2DH   R   SEG=MAIN   609 3130 4347#
INTN . . . . . . .  C ADDR   142FH   R   SEG=MAIN   3389#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   120BH   R   SEG=MAIN   3093#
IZMAN. . . . . . .  C ADDR   0D6DH   R   SEG=MAIN   2268 2403#
IZMFUN . . . . . .  C ADDR   0D7CH   R   SEG=MAIN   2344 2355 2362 2407 2410#
IZMPAT . . . . . .  C ADDR   0D80H   R   SEG=MAIN   2321 2331 2333 2379 2414#
IZMT2. . . . . . .  C ADDR   0D8FH   R   SEG=MAIN   2430 2435#
IZMT3. . . . . . .  C ADDR   0D9AH   R   SEG=MAIN   2435 2441#
JFINIS . . . . . .  C ADDR   1E8AH   R   SEG=MAIN   5034 5042#
KD . . . . . . . .  C ADDR   1952H   R   SEG=MAIN   4164#
KEYB1. . . . . . .  C ADDR   0C81H   R   SEG=MAIN   283 2269#
KEYB2. . . . . . .  C ADDR   104EH   R   SEG=MAIN   286 2845#
KFULL. . . . . . .  C ADDR   1329H   R   SEG=MAIN   3210 3245#
KGO23. . . . . . .  C ADDR   130FH   R   SEG=MAIN   3209 3232#
KLEV1. . . . . . .  C ADDR   12CDH   R   SEG=MAIN   3179 3201#
KLEV2. . . . . . .  C ADDR   12D2H   R   SEG=MAIN   3201 3203#
KLEV21 . . . . . .  C ADDR   12EEH   R   SEG=MAIN   3207 3216#
KLEV22 . . . . . .  C ADDR   12D7H   R   SEG=MAIN   3203 3207#
KLEV23 . . . . . .  C ADDR   12F9H   R   SEG=MAIN   3216 3222#
KLMAS. . . . . . .  C ADDR   0371H   R   SEG=MAIN   769 807 815#
KNAVP. . . . . . .  C ADDR   10FCH   R   SEG=MAIN   2890 2949#
KNIZM. . . . . . .  B ADDR   0023H.0 A      346# 1181 1404 1581 2381 2403 2404 2408
KNIZMON. . . . . .  C ADDR   0D77H   R   SEG=MAIN   2403 2408#
KNKMP. . . . . . .  C ADDR   103FH   R   SEG=MAIN   2840# 2884
KNLEFT . . . . . .  C ADDR   110CH   R   SEG=MAIN   2844 2956#
KNMEM. . . . . . .  C ADDR   1278H   R   SEG=MAIN   2839 3161#
KNMENU . . . . . .  C ADDR   10D9H   R   SEG=MAIN   2896 2930#
KNNUL. . . . . . .  C ADDR   112AH   R   SEG=MAIN   2843 2973#
KNOPT. . . . . . .  C ADDR   0DA2H   R   SEG=MAIN   2267 2449#
KNRAZR . . . . . .  C ADDR   0DB7H   R   SEG=MAIN   2266 2463#
KNRIGHT. . . . . .  C ADDR   0D12H   R   SEG=MAIN   2311 2348#
KNVICH . . . . . .  C ADDR   0D2EH   R   SEG=MAIN   2320 2364#
KOEFKD . . . . . .  D ADDR   00A0H   A      376# 557 3974
KOEFKM . . . . . .  D ADDR   0094H   A      370# 555 1042 1139 1897
KOEFKP . . . . . .  D ADDR   0090H   A      369# 553 1039 1134 1859
KONSTA . . . . . .  D ADDR   00BCH   A      389# 1266 3814 4527
KONSTB . . . . . .  D ADDR   00C0H   A      390# 1240 3845 4547
KON_B. . . . . . .  C ADDR   0E59H   R   SEG=MAIN   2540 2559#
KOR0US . . . . . .  C ADDR   189DH   R   SEG=MAIN   1767 4042#
KOR0_AN. . . . . .  D ADDR   0084H   A      366# 1130 1786 1849 1887
KORDEC1. . . . . .  C ADDR   05E8H   R   SEG=MAIN   1115 1120#
KORDEC10 . . . . .  C ADDR   05CEH   R   SEG=MAIN   1105#
KORNUL . . . . . .  C ADDR   09E8H   R   SEG=MAIN   1054 1754#
KVVOD0 . . . . . .  C ADDR   1344H   R   SEG=MAIN   3189 3253 3262#
LABEL7 . . . . . .  C ADDR   148FH   R   SEG=MAIN   3440#
LABELA . . . . . .  C ADDR   0273H   R   SEG=MAIN   646# 671 1731
LABELB . . . . . .  C ADDR   092FH   R   SEG=MAIN   1097 1430 1615# 1742 1746 1748
LABELC . . . . . .  C ADDR   0DB7H   R   SEG=MAIN   2464#
LABELE . . . . . .  C ADDR   0D80H   R   SEG=MAIN   2412 2428# 2469 2472 2476 2480
LABELF . . . . . .  C ADDR   0DD6H   R   SEG=MAIN   2265 2483#
LABELH . . . . . .  C ADDR   114CH   R   SEG=MAIN   2842 2988#
LABELI . . . . . .  C ADDR   16A8H   R   SEG=MAIN   3003 3055 3105 3751#
LABELI2. . . . . .  C ADDR   11C2H   R   SEG=MAIN   3055# 3056
LABELK . . . . . .  C ADDR   1293H   R   SEG=MAIN   3002 3174#
LABELL . . . . . .  C ADDR   0F64H   R   SEG=MAIN   2612 2692 2701#
LABELL1. . . . . .  C ADDR   0E96H   R   SEG=MAIN   2597# 2667 2767 2816
LABELN . . . . . .  C ADDR   0FE7H   R   SEG=MAIN   2668 2776#
LABELP . . . . . .  C ADDR   148FH   R   SEG=MAIN   3400 3413 3439# 3448
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   109

LABELS . . . . . .  C ADDR   1461H   R   SEG=MAIN   3249 3413#
LABELS1. . . . . .  C ADDR   154EH   R   SEG=MAIN   3509 3539#
LABELS13 . . . . .  C ADDR   1647H   R   SEG=MAIN   3580 3678#
LABELS3. . . . . .  C ADDR   16BBH   R   SEG=MAIN   3761#
LABELS4. . . . . .  C ADDR   1696H   R   SEG=MAIN   3579 3742#
LABL2. . . . . . .  C ADDR   0FABH   R   SEG=MAIN   2733# 3219
LABL21 . . . . . .  C ADDR   0F84H   R   SEG=MAIN   2702 2716#
LABL22 . . . . . .  C ADDR   0F9AH   R   SEG=MAIN   2720 2725#
LABM . . . . . . .  C ADDR   1395H   R   SEG=MAIN   3220 3316#
LADD . . . . . . .  C ADDR   1FCBH   R   SEG=MAIN   747 783 1695 5269#
LADDX. . . . . . .  C ADDR   1FDCH   R   SEG=MAIN   5293#
LAL22. . . . . . .  C ADDR   0F7CH   R   SEG=MAIN   2706 2711#
LBTOF. . . . . . .  C ADDR   042DH   A      6383#
LCMP . . . . . . .  C ADDR   1DC9H   R   SEG=MAIN   2127 2255 4849#
LDC_LONG . . . . .  C ADDR   1DDFH   R   SEG=MAIN   552 1693 1854 1892 2983 4869#
LDC_LTEMP. . . . .  C ADDR   1E01H   R   SEG=MAIN   756 998 1003 1008 1082 1157 1165 1178 1218 1253 1257 1269 1293
                                           1301 1307 1324 1330 1445 1926 3970 4905#
LDX_LONG . . . . .  C ADDR   1E27H   R   SEG=MAIN   4940#
LDX_LTEMP. . . . .  C ADDR   1E4DH   R   SEG=MAIN   4978#
LEFCUR . . . . . .  C ADDR   13D8H   R   SEG=MAIN   3348# 3384 3402
LEFKL. . . . . . .  C ADDR   1116H   R   SEG=MAIN   2956 2962#
LEFMEM11 . . . . .  C ADDR   129BH   R   SEG=MAIN   3180# 3202 3204
LEFT_S . . . . . .  C ADDR   154BH   R   SEG=MAIN   3538# 3541
LEFT_SK. . . . . .  C ADDR   162EH   R   SEG=MAIN   3538 3668#
LEV220 . . . . . .  C ADDR   12DAH   R   SEG=MAIN   3208# 3217
LEV2GO . . . . . .  C ADDR   100DH   R   SEG=MAIN   2775 2812#
LEVEL. . . . . . .  D ADDR   00B0H   A      383# 2335 2673 2701 3165 3178 3264
LI21 . . . . . . .  C ADDR   1215H   R   SEG=MAIN   3100 3102#
LLDI2. . . . . . .  C ADDR   0D66H   R   SEG=MAIN   2394 2398#
LLDI23 . . . . . .  C ADDR   0D5AH   R   SEG=MAIN   2386 2391#
LLDI3. . . . . . .  C ADDR   0D61H   R   SEG=MAIN   2393 2395#
LLEV2. . . . . . .  C ADDR   0FD2H   R   SEG=MAIN   2732 2765#
LLMUL. . . . . . .  C ADDR   1F34H   R   SEG=MAIN   5163#
LLSUB. . . . . . .  C ADDR   1FB9H   R   SEG=MAIN   5245#
LLTOF. . . . . . .  C ADDR   0432H   A      6389#
LMUL . . . . . . .  C ADDR   1F34H   R   SEG=MAIN   2085 5165#
LOAB12 . . . . . .  C ADDR   1A7CH   R   SEG=MAIN   3128 4388#
LOAD . . . . . . .  D ADDR   00B7H   A      387# 2452 2488 2990 3124 4065
LOADB. . . . . . .  C ADDR   1234H   R   SEG=MAIN   3119 3122# 3152 3158
LOADB2 . . . . . .  C ADDR   125DH   R   SEG=MAIN   3140 3144#
LOADCLE. . . . . .  C ADDR   12B9H   R   SEG=MAIN   3194# 3256
LOADKD . . . . . .  C ADDR   1A99H   R   SEG=MAIN   4421#
LOADR2 . . . . . .  C ADDR   1A8BH   R   SEG=MAIN   3370 3396 3728 3812 3839 4404#
LOADT. . . . . . .  C ADDR   18B8H   R   SEG=MAIN   2454 2494 2996 4065#
LOADUS . . . . . .  C ADDR   1857H   R   SEG=MAIN   610 1229 1418 1798 1900 2361 2409 2943 2970 3131 3986#
LOBLOK . . . . . .  C ADDR   1361H   R   SEG=MAIN   3243 3275# 3283
LOCLE. . . . . . .  C ADDR   12B4H   R   SEG=MAIN   3183 3192#
LOD1 . . . . . . .  C ADDR   18C7H   R   SEG=MAIN   4073# 4078
LODT . . . . . . .  C ADDR   18D3H   R   SEG=MAIN   4085# 4090
LOIZMK . . . . . .  C ADDR   1196H   R   SEG=MAIN   3028# 3060
LOKAME1. . . . . .  C ADDR   14B0H   R   SEG=MAIN   3458#
LOLEVT . . . . . .  C ADDR   18BAH   R   SEG=MAIN   2341 4066#
LOLIST . . . . . .  C ADDR   12A8H   R   SEG=MAIN   3185#
LOME1. . . . . . .  C ADDR   178EH   R   SEG=MAIN   3884# 3888 3891 3894 3897 3901 3904 3907 3910 3914
LOMENU . . . . . .  C ADDR   1786H   R   SEG=MAIN   2627 2640 3458 3496 3519 3881#
LOOP . . . . . . .  C ADDR   0B4DH   R   SEG=MAIN   2007# 2008
LOOPS. . . . . . .  C ADDR   1E8DH   R   SEG=MAIN   5044# 5077
LOSPUS . . . . . .  C ADDR   1891H   R   SEG=MAIN   1768 4025#
LOTEXT . . . . . .  C ADDR   18CFH   R   SEG=MAIN   1312 1316 1409 2372 2511 2519 2525 2531 2647 2651 2681 2690 2698
                                           2709 2713 2723 2727 2934 3021 3086 3163 3186 3195 3199 3213 3268 3276 3337
                                           3374 3426 3454 3475 3480 3515 3624 3670 3674 3822 3884 3979 4082# 4603
LOTP . . . . . . .  C ADDR   1AEFH   R   SEG=MAIN   4462# 4472 4475
LOTPUS . . . . . .  C ADDR   1AE7H   R   SEG=MAIN   3527 4020 4459#
LOU. . . . . . . .  C ADDR   0D6CH   R   SEG=MAIN   2381 2397 2401#
LOUIZM . . . . . .  C ADDR   0D49H   R   SEG=MAIN   2381# 2406 4017
LOUTF. . . . . . .  C ADDR   0F81H   R   SEG=MAIN   2705 2714# 2719 2766 2773
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   110

LOVICH . . . . . .  C ADDR   118CH   R   SEG=MAIN   3024# 3053 3074 3852
LOWR . . . . . . .  C ADDR   12C2H   R   SEG=MAIN   3192 3197#
LOWR1. . . . . . .  C ADDR   12C4H   R   SEG=MAIN   3198# 3260
LSUB . . . . . . .  C ADDR   1FB9H   R   SEG=MAIN   1094 1192 1927 5246#
LTEMP. . . . . . .  N NUMB   0008H   A      1010 1012 1013 1014 2137 2140 2143 2146 2189 2190 2191 2192 4294 4295
                                           4296 4297 4661# 5035 5036 5037 5038 5047 5051 5055 5059 5062 5063 5064
                                           5065 5066 5067 5068 5069 5070 5071 5072 5073 5076 5079 5084 5088 5092 5102
                                           5105 5108 5111 5127 5130 5131 5133 5134 5136 5137 5139 5144 5145 5146 5147
                                           5167 5172 5180 5188 5193 5204 5212 5218 5226 5232 5600 5601 5640 5645 5647
                                           5656 5657 5658 5659 5890 5898 5911 5914 5917 5920 6500 6503 6506 6509
LWR. . . . . . . .  C ADDR   0B92H   R   SEG=MAIN   2076# 2080
LWRX . . . . . . .  C ADDR   0B56H   R   SEG=MAIN   2020# 2032
LWTOF. . . . . . .  C ADDR   042FH   A      6385#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   0BADH   R   SEG=MAIN   1499 2084 2089 2094# 2126
MAIN . . . . . . .  C SEG    2016H       REL=UNIT   237 294# 436
MANT1. . . . . . .  N NUMB   0002H   A      5598# 5625 5674 5675
MANT2. . . . . . .  N NUMB   0008H   A      5600# 5651 5652 5783 5785 5786 5788 5789 5791 5792 5794 5833 5834 5836
                                           5837 5839 5840 5842 5843 5847 5849 5852 5855 5953 5955 5956 5958 5959 5961
                                           5962 5964 6015 6017 6018 6020 6021 6023 6024 6026 6108 6112 6116 6120 6124
                                           6127 6130 6133
MARK0_8. . . . . .  C ADDR   0E60H   R   SEG=MAIN   2542 2560 2562#
MARKER . . . . . .  D ADDR   00B2H   A      385# 531 2287 2541 2551 2559 2569 2575 2740 2747 2783 2790 2802 2864 3064
                                           3081 3098 3277 3295 3302 3338 3348 3375 3497 3651 3664 3685 3692 3736 3761
                                           3780 3787 3817 3848 4491 4506 4517 4575
MARLE. . . . . . .  C ADDR   1B28H   R   SEG=MAIN   3356 4503#
MARRI. . . . . . .  C ADDR   1B35H   R   SEG=MAIN   2810 4516#
MAS10. . . . . . .  C ADDR   0390H   R   SEG=MAIN   817 829#
MAS20. . . . . . .  C ADDR   040DH   R   SEG=MAIN   829 882#
MAS5DIV. . . . . .  C ADDR   0536H   R   SEG=MAIN   999 1004 1009 1016#
MASFULL. . . . . .  C ADDR   0508H   R   SEG=MAIN   988 992#
MASS0. . . . . . .  X ADDR   0080H   A      399 400# 818 823 851 859 930 938 2062
MASS1. . . . . . .  X ADDR   0084H   A      401# 826 848 862 927 941
MASS10 . . . . . .  X ADDR   00A8H   A      410# 903 960
MASS11 . . . . . .  X ADDR   00ACH   A      411# 900 962
MASS12 . . . . . .  X ADDR   00B0H   A      412# 897 964
MASS13 . . . . . .  X ADDR   00B4H   A      413# 894 966
MASS14 . . . . . .  X ADDR   00B8H   A      414# 891 968
MASS15 . . . . . .  X ADDR   00BCH   A      415# 888 970
MASS16 . . . . . .  X ADDR   00C0H   A      416# 886 972
MASS17 . . . . . .  X ADDR   00C4H   A      417# 884 974
MASS18 . . . . . .  X ADDR   00C8H   A      418# 882 976
MASS19 . . . . . .  X ADDR   00CCH   A      419# 978
MASS2. . . . . . .  X ADDR   0088H   A      402# 845 864 924 943
MASS3. . . . . . .  X ADDR   008CH   A      403# 842 866 921 945
MASS4. . . . . . .  X ADDR   0090H   A      404# 839 868 918 947
MASS5. . . . . . .  X ADDR   0094H   A      405# 836 870 915 949
MASS6. . . . . . .  X ADDR   0098H   A      406# 834 872 913 951
MASS7. . . . . . .  X ADDR   009CH   A      407# 832 874 911 953
MASS8. . . . . . .  X ADDR   00A0H   A      408# 830 876 909 955
MASS9. . . . . . .  X ADDR   00A4H   A      409# 878 906 957
MASX5. . . . . . .  C ADDR   052CH   R   SEG=MAIN   990 1010#
ME11_15DEC . . . .  C ADDR   14AFH   R   SEG=MAIN   3423 3457#
ME21_23. . . . . .  C ADDR   1509H   R   SEG=MAIN   3437 3505#
ME21_23DEC . . . .  C ADDR   1525H   R   SEG=MAIN   3512 3517#
MEAVP. . . . . . .  C ADDR   1107H   R   SEG=MAIN   2950 2953#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   512# 514
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   516# 519
MEM12NO. . . . . .  C ADDR   1340H   R   SEG=MAIN   3254 3258#
MENU12 . . . . . .  C ADDR   1792H   R   SEG=MAIN   3882 3886#
MENU13 . . . . . .  C ADDR   179AH   R   SEG=MAIN   3886 3889#
MENU14 . . . . . .  C ADDR   17A2H   R   SEG=MAIN   3889 3892#
MENU15 . . . . . .  C ADDR   17AAH   R   SEG=MAIN   3892 3895#
MENU21 . . . . . .  C ADDR   17B2H   R   SEG=MAIN   3895 3899#
MENU22 . . . . . .  C ADDR   17BAH   R   SEG=MAIN   3899 3902#
MENU23 . . . . . .  C ADDR   17C2H   R   SEG=MAIN   3902 3905#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   111

MENU31 . . . . . .  C ADDR   17CAH   R   SEG=MAIN   3905 3908#
MENU41 . . . . . .  C ADDR   17D2H   R   SEG=MAIN   3908 3912#
MENUOFF. . . . . .  C ADDR   10EDH   R   SEG=MAIN   2930 2939#
MENUON . . . . . .  C ADDR   1482H   R   SEG=MAIN   3428#
ME_41. . . . . . .  C ADDR   159AH   R   SEG=MAIN   3539 3582#
MIDL . . . . . . .  C ADDR   1EC0H   R   SEG=MAIN   5039 5074#
MIGN . . . . . . .  C ADDR   1B94H   R   SEG=MAIN   1939 4575#
MIGNN. . . . . . .  C ADDR   1B9CH   R   SEG=MAIN   4577 4582#
MLABL2 . . . . . .  C ADDR   1378H   R   SEG=MAIN   3269 3287# 3318
MMM. . . . . . . .  C ADDR   026EH   R   SEG=MAIN   641#
MO220. . . . . . .  C ADDR   07E8H   R   SEG=MAIN   1210 1403#
MO500I . . . . . .  C ADDR   0758H   R   SEG=MAIN   1259 1315#
MO500R . . . . . .  C ADDR   074CH   R   SEG=MAIN   1255 1311#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0F17H   R   SEG=MAIN   2669# 2678 2687 2695
MOVE28 . . . . . .  C ADDR   0C1AH   R   SEG=MAIN   1084 1167 1242 1261 1852 1890 2189#
MOVE82 . . . . . .  C ADDR   19EBH   R   SEG=MAIN   4294#
MOVEA3 . . . . . .  C ADDR   0856H   R   SEG=MAIN   1455 1480#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2543 2755 2795 3083 3242 3280 3311 3341 3349 3378 3500 3653 3695
                                           3762 3790 3820 4510
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2539 2748 2752 2791 3084 3241 3279 3303 3307 3340 3353 3377 3499
                                           3654 3766 3819 4519
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      5950# 5993
MUP11. . . . . . .  C ADDR   0257H   A      5997# 6042
MUP2 . . . . . . .  C ADDR   0297H   A      6027 6041#
MUP3 . . . . . . .  C ADDR   026CH   A      5996 6012#
MVV11. . . . . . .  C ADDR   135CH   R   SEG=MAIN   3265 3273#
MVV12. . . . . . .  C ADDR   1374H   R   SEG=MAIN   3273 3282#
N12DELCH . . . . .  C ADDR   0AC2H   R   SEG=MAIN   1905 1913#
N4DELCH. . . . . .  C ADDR   0A73H   R   SEG=MAIN   1832 1870#
N8DELCH. . . . . .  C ADDR   0AB0H   R   SEG=MAIN   1870 1905#
NBIMENU. . . . . .  C ADDR   0F1DH   R   SEG=MAIN   2672#
NBLOK. . . . . . .  D ADDR   00C4H   A      391# 3333
NE05 . . . . . . .  C ADDR   0358H   A      6179 6181 6183 6186#
NEXIN. . . . . . .  C ADDR   0AE8H   R   SEG=MAIN   1942# 1949
NMINUS . . . . . .  C ADDR   0605H   R   SEG=MAIN   1136 1140#
NMINUS3. . . . . .  C ADDR   0556H   R   SEG=MAIN   1041 1043#
NNDELCH. . . . . .  C ADDR   0A33H   R   SEG=MAIN   1822 1832#
NNMEMB . . . . . .  C ADDR   1019H   R   SEG=MAIN   2671 2817#
NNNUL. . . . . . .  C ADDR   08D3H   R   SEG=MAIN   1562 1565#
NO . . . . . . . .  C ADDR   1EA8H   R   SEG=MAIN   5049 5053 5057 5061#
NO0KEY . . . . . .  C ADDR   0280H   R   SEG=MAIN   650 655#
NO11V6 . . . . . .  C ADDR   0E1FH   R   SEG=MAIN   2508 2522#
NO12V6 . . . . . .  C ADDR   0E2CH   R   SEG=MAIN   2522 2528#
NO13V6 . . . . . .  C ADDR   0E39H   R   SEG=MAIN   2528 2536#
NO21P7 . . . . . .  C ADDR   1731H   R   SEG=MAIN   3800 3830#
NO23RI . . . . . .  C ADDR   0EE1H   R   SEG=MAIN   2638 2642#
NO2PARN. . . . . .  C ADDR   0841H   R   SEG=MAIN   1457 1463#
NO31N. . . . . . .  C ADDR   13ECH   R   SEG=MAIN   3346 3359#
NO31RI . . . . . .  C ADDR   0F00H   R   SEG=MAIN   2644 2659#
NO3PARN. . . . . .  C ADDR   0837H   R   SEG=MAIN   1457# 1542
NO4DEL . . . . . .  C ADDR   0A0EH   R   SEG=MAIN   1772 1803#
NOAVK. . . . . . .  C ADDR   05DAH   R   SEG=MAIN   1065 1112#
NOAVP. . . . . . .  C ADDR   0660H   R   SEG=MAIN   1183# 1220 1223
NOBAVP . . . . . .  C ADDR   08F0H   R   SEG=MAIN   1577 1581#
NOBEF99. . . . . .  C ADDR   0329H   R   SEG=MAIN   753 770# 789
NOBIT. . . . . . .  C ADDR   0245H   A      5965 5979#
NOBITIZM . . . . .  C ADDR   08F6H   R   SEG=MAIN   1314 1318 1398 1581 1584#
NOBUF0 . . . . . .  C ADDR   09D0H   R   SEG=MAIN   1704 1736#
NOCHI0 . . . . . .  C ADDR   0818H   R   SEG=MAIN   1211 1429#
NOCHN10. . . . . .  C ADDR   0524H   R   SEG=MAIN   1001 1006#
NOCHN2 . . . . . .  C ADDR   0519H   R   SEG=MAIN   996 1001#
NODI2. . . . . . .  C ADDR   07FEH   R   SEG=MAIN   1406 1413#
NODI6. . . . . . .  C ADDR   1118H   R   SEG=MAIN   2960 2964#
NODI8. . . . . . .  C ADDR   08A9H   R   SEG=MAIN   1526 1532#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   112

NODI8K . . . . . .  C ADDR   1602H   R   SEG=MAIN   3639 3644#
NODI9. . . . . . .  C ADDR   0803H   R   SEG=MAIN   1415 1418#
NODIS9 . . . . . .  C ADDR   08B9H   R   SEG=MAIN   1532 1544#
NODISK9. . . . . .  C ADDR   160AH   R   SEG=MAIN   3643 3644 3651#
NOEQU1 . . . . . .  C ADDR   0FFEH   R   SEG=MAIN   2794 2798#
NOEQU2 . . . . . .  C ADDR   13E6H   R   SEG=MAIN   3352 3356#
NOFIZM . . . . . .  C ADDR   0DFDH   R   SEG=MAIN   2484 2506#
NOFT1. . . . . . .  C ADDR   0DE9H   R   SEG=MAIN   2489 2493#
NOFZ . . . . . . .  C ADDR   09CBH   R   SEG=MAIN   1727 1731#
NOH37. . . . . . .  C ADDR   11A3H   R   SEG=MAIN   3017 3038# 3047
NOHNOT1. . . . . .  C ADDR   126DH   R   SEG=MAIN   3114 3153#
NOHNOT2. . . . . .  C ADDR   1265H   R   SEG=MAIN   3147# 3153
NOKLB. . . . . . .  C ADDR   0925H   R   SEG=MAIN   1608 1610#
NOKORR . . . . . .  C ADDR   056CH   R   SEG=MAIN   1052 1055#
NOLAH. . . . . . .  C ADDR   116DH   R   SEG=MAIN   2988 3005#
NOLEV1 . . . . . .  C ADDR   0FA2H   R   SEG=MAIN   2716 2730#
NOM31. . . . . . .  C ADDR   13CFH   R   SEG=MAIN   3316 3344#
NOM32. . . . . . .  C ADDR   141EH   R   SEG=MAIN   3344 3382#
NOM33. . . . . . .  C ADDR   1449H   R   SEG=MAIN   3382 3400#
NOMARL . . . . . .  C ADDR   16D0H   R   SEG=MAIN   3764 3770 3774#
NOME11 . . . . . .  C ADDR   1330H   R   SEG=MAIN   3251#
NOMEM11. . . . . .  C ADDR   0F38H   R   SEG=MAIN   2674 2684#
NOMEM12. . . . . .  C ADDR   0F4EH   R   SEG=MAIN   2684 2692#
NOMEMK . . . . . .  C ADDR   132DH   R   SEG=MAIN   3173 3249#
NON1C. . . . . . .  C ADDR   0DC8H   R   SEG=MAIN   2470 2474#
NONULAVT . . . . .  C ADDR   05C2H   R   SEG=MAIN   1060 1099#
NONULDEL . . . . .  C ADDR   09F5H   R   SEG=MAIN   1755 1771#
NOP3_0 . . . . . .  C ADDR   081CH   R   SEG=MAIN   1435#
NOPART1. . . . . .  C ADDR   032DH   R   SEG=MAIN   742 777#
NOPART2. . . . . .  C ADDR   034DH   R   SEG=MAIN   777 796#
NOPART3. . . . . .  C ADDR   0352H   R   SEG=MAIN   796 799#
NOPART4. . . . . .  C ADDR   0365H   R   SEG=MAIN   799 808#
NOPLUS . . . . . .  C ADDR   0E88H   R   SEG=MAIN   2587 2590#
NOPOIN7. . . . . .  C ADDR   16E7H   R   SEG=MAIN   3760 3795#
NOPOINT. . . . . .  C ADDR   16B3H   R   SEG=MAIN   3754 3758#
NOR11. . . . . . .  C ADDR   0E9CH   R   SEG=MAIN   2514 2601#
NOR13. . . . . . .  C ADDR   0E12H   R   SEG=MAIN   2516#
NORDN. . . . . . .  C ADDR   00F6H   A      5686# 5719
NORDN1 . . . . . .  C ADDR   0107H   A      5688 5702#
NORIG2 . . . . . .  C ADDR   0FDBH   R   SEG=MAIN   2762 2770#
NORIM6 . . . . . .  C ADDR   1019H   R   SEG=MAIN   2818#
NORIME . . . . . .  C ADDR   0EC7H   R   SEG=MAIN   2625 2629#
NORIME1. . . . . .  C ADDR   0EC1H   R   SEG=MAIN   2627# 2630 2643
NORM1. . . . . . .  C ADDR   00F0H   A      5681# 5878 6055 6157 6374
NORR11 . . . . . .  C ADDR   11B5H   R   SEG=MAIN   3049#
NORR12 . . . . . .  C ADDR   11C5H   R   SEG=MAIN   3049 3056# 3070
NORUP. . . . . . .  C ADDR   0119H   A      5685 5722#
NORUP1 . . . . . .  C ADDR   011EH   A      5727# 5745
NORUP2 . . . . . .  C ADDR   0132H   A      5729 5746#
NORVICH. . . . . .  C ADDR   0928H   R   SEG=MAIN   1541 1611#
NOSUB. . . . . . .  C ADDR   1EE3H   R   SEG=MAIN   5083 5087 5091 5096#
NOT1IN . . . . . .  C ADDR   09D3H   R   SEG=MAIN   1708 1740#
NOT1_7 . . . . . .  C ADDR   10C6H   R   SEG=MAIN   2912 2919#
NOT2IN . . . . . .  C ADDR   09DBH   R   SEG=MAIN   1740 1744#
NOT2_7 . . . . . .  C ADDR   10D1H   R   SEG=MAIN   2919 2924#
NOT3IN . . . . . .  C ADDR   09E3H   R   SEG=MAIN   1744 1747#
NOTAKT . . . . . .  C ADDR   0900H   R   SEG=MAIN   1585 1589#
NOTT1. . . . . . .  C ADDR   09B3H   R   SEG=MAIN   1714 1718#
NOTT5. . . . . . .  C ADDR   09B8H   R   SEG=MAIN   1718 1722#
NOT_1. . . . . . .  C ADDR   0DCFH   R   SEG=MAIN   2474 2479#
NOT_10 . . . . . .  C ADDR   0DCFH   R   SEG=MAIN   2478#
NOVIR. . . . . . .  C ADDR   0EACH   R   SEG=MAIN   2505 2614#
NOVIR1 . . . . . .  C ADDR   0DFAH   R   SEG=MAIN   2505# 2506
NOZZMI . . . . . .  C ADDR   0899H   R   SEG=MAIN   1521 1523#
NSEC01 . . . . . .  C ADDR   08DCH   R   SEG=MAIN   1566 1569#
NSEC1. . . . . . .  C ADDR   08E3H   R   SEG=MAIN   1569 1572#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   113

NSEC10 . . . . . .  C ADDR   08E8H   R   SEG=MAIN   1568 1571 1572 1576#
NUERR. . . . . . .  D ADDR   0039H   A      310# 3658 3939 3953 4604
NULAVT . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1820#
NUMSIZE. . . . . .  N NUMB   0004H   A      4664# 4686 4724 4731 4806 4826
OBOARD . . . . . .  C ADDR   1E19H   R   SEG=MAIN   4907 4921#
OBOARD1. . . . . .  C ADDR   1E61H   R   SEG=MAIN   4980 4993#
OK1. . . . . . . .  C ADDR   0186H   A      5812 5827#
OK2. . . . . . . .  C ADDR   01A0H   A      5829 5844#
OK3. . . . . . . .  C ADDR   01C4H   A      5861 5877#
ONBOAR1. . . . . .  C ADDR   1E3FH   R   SEG=MAIN   4942 4959#
ONBOARD. . . . . .  C ADDR   1DF3H   R   SEG=MAIN   4871 4885#
ONMEM11. . . . . .  C ADDR   1286H   R   SEG=MAIN   2938 2952 2954 3167# 3427 3433 3455 3459 3464 3478 3483 3502 3516
                                           3520 3531
ONMEM12. . . . . .  C ADDR   152CH   R   SEG=MAIN   3521# 3524 3543
ONMEM13. . . . . .  C ADDR   1693H   R   SEG=MAIN   3696 3740# 3744 3746
ONMIG. . . . . . .  C ADDR   1BAAH   R   SEG=MAIN   4586 4595#
ONVICH . . . . . .  C ADDR   0D41H   R   SEG=MAIN   2364 2376#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 475
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 468 472
OUT6 . . . . . . .  C ADDR   1019H   R   SEG=MAIN   2264 2327 2434 2439 2444 2461 2491 2496 2503 2610 2628 2641 2649
                                           2653 2819#
OUT7 . . . . . . .  C ADDR   175FH   R   SEG=MAIN   2840 2841 2916 2923 2927 2993 2998 3171 3444 3493 3577 3672 3676
                                           3749 3792 3797 3827 3855#
OUTA . . . . . . .  C ADDR   1B42H   R   SEG=MAIN   3088 4527#
OUTA2. . . . . . .  C ADDR   1B5CH   R   SEG=MAIN   4538# 4543
OUTB . . . . . . .  C ADDR   1B65H   R   SEG=MAIN   3823 4547#
OUTB2. . . . . . .  C ADDR   1B8BH   R   SEG=MAIN   4565# 4570
OUTB3. . . . . . .  C ADDR   1B76H   R   SEG=MAIN   4551 4556#
OUTF . . . . . . .  C ADDR   0DF0H   R   SEG=MAIN   2487 2499# 2512 2520 2526 2532 2557 2580 2589 2592 2599 2669 2682
                                           2691 2699 2710 2714 2724 2728 2754 2757 2797 2811 2814 3521 3983
OUTFL. . . . . . .  C ADDR   0E99H   R   SEG=MAIN   2595 2599#
OUTMA. . . . . . .  C ADDR   0E72H   R   SEG=MAIN   2578 2580#
OUTMENU. . . . . .  C ADDR   14F2H   R   SEG=MAIN   3492#
OUTR . . . . . . .  C ADDR   07AFH   R   SEG=MAIN   1344 1367#
OUTR5. . . . . . .  C ADDR   07CBH   R   SEG=MAIN   1365 1386#
OUTSKO . . . . . .  C ADDR   158DH   R   SEG=MAIN   3573 3575#
OUTSKO1. . . . . .  C ADDR   158AH   R   SEG=MAIN   3571 3574#
OUTVIR . . . . . .  C ADDR   0CECH   R   SEG=MAIN   2294 2323#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 4863
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 1942 1946
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 446
P1 . . . . . . . .  D ADDR   0090H   A      32# 613 614 1955 1957 1960 1963 1967 1969 1970 2219 2222 2224 2227 2233
                                           2235 2237 4361 4368
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 447
P2 . . . . . . . .  D ADDR   00A0H   A      47# 1988 1992 2001
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 448
P3 . . . . . . . .  D ADDR   00B0H   A      62# 457 1987 1989 1991 1997 1998 1999 2002 2003 2293 2295 2297 2298 2301
                                           2302 2306 2307 2309 2310 2312 2313 2315 2316 2318 2319 2485 2486 2536 2537
                                           2582 2583 2593 2594 2622 2623 2636 2637 2663 2664 2665 2666 2676 2677 2685
                                           2686 2693 2694 2703 2704 2717 2718 2731 2732 2765 2766 2774 2775 2812 2813
                                           2835 2871 2873 2875 2876 2879 2880 2882 2883 2885 2886 2888 2889 2891 2892
                                           2894 2895 2989 2991 3016 3017 3038 3039 3050 3051 3057 3058 3071 3072 3112
                                           3113 3180 3181 3208 3209 3223 3224 3225 3226 3232 3233 3251 3252 3262 3263
                                           3317 3318 3319 3320 3345 3346 3359 3360 3383 3384 3385 3386 3401 3402 3403
                                           3404 3420 3421 3447 3448 3510 3511 3523 3524 3540 3541 3542 3543 3583 3584
                                           3585 3586 3743 3744 3745 3746 3752 3753 3758 3759 3795 3796 3871
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2832 2834 3868 3870
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 450
P4 . . . . . . . .  D ADDR   0084H   A      20# 2388 2390 3995 3998 4014 4016 4464
P5 . . . . . . . .  D ADDR   0085H   A      21# 537 545 1823 1828 1863 1865 2398 2400 4003 4006 4036 4039 4468
P6 . . . . . . . .  D ADDR   0086H   A      22# 615 617 621 623
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 451
PACK1. . . . . . .  C ADDR   00DEH   A      5664# 5879 6056 6158 6375
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   114

PARERR . . . . . .  C ADDR   1617H   R   SEG=MAIN   3615 3617 3619 3658#
PARN . . . . . . .  D ADDR   00AFH   A      382# 542 1555 2465 3137
PAROL. . . . . . .  D ADDR   00A8H   A      378#
PART . . . . . . .  D ADDR   009AH   A      372# 538 740 1030 1072 1099 1112 1565 1612 1712 1723 2428 2466 2910 3122
                                           3136 4007 4388
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 444
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 445
PCON . . . . . . .  D ADDR   0087H   A      23# 491
POIN3. . . . . . .  C ADDR   16E6H   R   SEG=MAIN   3793# 3828
POINA. . . . . . .  C ADDR   172CH   R   SEG=MAIN   3791 3827#
POINA1 . . . . . .  C ADDR   16CBH   R   SEG=MAIN   3763 3770#
POINA2 . . . . . .  C ADDR   16C5H   R   SEG=MAIN   3766# 3771
POZB . . . . . . .  C ADDR   174FH   R   SEG=MAIN   3841 3845#
PROD . . . . . . .  N NUMB   000CH   A      5601# 5945 5946 5947 5948 5968 5969 5970 5972 5973 5975 5976 5978 6000
                                           6002 6003 6005 6006 6008 6009 6011 6030 6031 6032 6034 6035 6037 6038 6040
                                           6051 6052 6053 6054 6075 6076 6077 6078 6094 6096 6097 6099 6100 6102 6103
                                           6105 6135 6152 6153 6154 6155
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 6406 6410 6463 6466
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2128 2130 2273 2828 2848 3866 5336
                                           5344
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0CF6H   R   SEG=MAIN   2317 2329#
R10. . . . . . . .  N NUMB   000AH   A      431# 646 1061 1264 1272 3618 4436 6429
R11. . . . . . . .  N NUMB   000BH   A      432# 647 1062 1265 1271 4440 6433
R8 . . . . . . . .  N NUMB   0008H   A      429# 498 1262 1274 2253 3472 3614 4428 6421
R9 . . . . . . . .  N NUMB   0009H   A      430# 1263 1273 2254 3616 4432 6425
RAFTERK. . . . . .  C ADDR   0582H   R   SEG=MAIN   1069# 1075
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RE1. . . . . . . .  C ADDR   0C4FH   R   SEG=MAIN   2233# 2239
RE4BYTE. . . . . .  C ADDR   0454H   A      497 3471 3612 6417#
REACP. . . . . . .  D ADDR   0077H   A      304# 628 630 632 634 681 697 705 713 722 729 744 780 800 809 1837 1839
                                           1841 1843 1875 1877 1879 1881
READ . . . . . . .  C ADDR   0C4DH   R   SEG=MAIN   627 629 631 2232#
READYACP . . . . .  C ADDR   02E4H   R   SEG=MAIN   723 733#
READ_X2. . . . . .  C ADDR   0B3CH   R   SEG=MAIN   1996# 2007
REBYTE . . . . . .  C ADDR   0239H   R   SEG=MAIN   612# 657 771 1801 1811 1830 1868 1903 1912 1914
REBYTE2. . . . . .  C ADDR   046CH   A      1078 1161 6437#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 452
REN. . . . . . . .  B ADDR   0098H.4 A      157#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   115

RENDKALIB. . . . .  C ADDR   10F9H   R   SEG=MAIN   2947# 2949
RESAR2 . . . . . .  C ADDR   0C26H   R   SEG=MAIN   745 781 801 810 822 857 936 1087 1128 1169 1186 1241 1244 1267
                                           1290 1443 1493 1497 1775 2197# 2976 3966 4528 4548
RESAR8 . . . . . .  C ADDR   0BE4H   R   SEG=MAIN   1043 1093 1131 1140 1191 1850 1888 2136# 3964
REZAM. . . . . . .  D ADDR   008CH   A      368# 1885
REZAP. . . . . . .  D ADDR   0088H   A      367# 1847
REZMUL . . . . . .  C ADDR   05EDH   R   SEG=MAIN   1107 1119 1126#
REZ_A. . . . . . .  D ADDR   0062H   A      357# 758 802 811 821 856 935 1774
REZ_A0 . . . . . .  D ADDR   006AH   A      359# 1092 1190 1234 1424 2359 2968 2977 2984
REZ_A1 . . . . . .  D ADDR   0066H   A      358# 1024 1090 1127 1147 1174 1185 1243
REZ_A2 . . . . . .  D ADDR   007BH   A      360# 1187
REZ_A3 . . . . . .  D ADDR   009CH   A      374# 1095 1193 1442 1492 1496 1617 2975 3963
REZ_AK . . . . . .  D ADDR   00A4H   A      377# 3730 3965
REZ_AME. . . . . .  D ADDR   005EH   A      355# 1036 1045 1086 1144 1168
REZ_DEL. . . . . .  D ADDR   00C5H   A      392# 760
REZ_R. . . . . . .  D ADDR   00C9H   A      393# 1276 1289
RGOTO7 . . . . . .  C ADDR   13CCH   R   SEG=MAIN   3342# 3360 3386
RHNOR11. . . . . .  C ADDR   119DH   R   SEG=MAIN   3015 3027 3033#
RHNOT1 . . . . . .  C ADDR   1164H   R   SEG=MAIN   2991 3000#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0ECAH   R   SEG=MAIN   2620 2632#
RI6. . . . . . . .  C ADDR   0EC4H   R   SEG=MAIN   2623 2628# 2637 2662 2666
RIGBLO . . . . . .  C ADDR   0FA5H   R   SEG=MAIN   2731# 2761 2763
RIGBLOK. . . . . .  C ADDR   0FE1H   R   SEG=MAIN   2774#
RIGHT2 . . . . . .  C ADDR   0D09H   R   SEG=MAIN   2336 2340#
RIGHT3 . . . . . .  C ADDR   0D0DH   R   SEG=MAIN   2338 2343#
RIKN . . . . . . .  C ADDR   0E4BH   R   SEG=MAIN   2543# 2561
RIZMAN . . . . . .  C ADDR   0C7EH   R   SEG=MAIN   2268# 2303
RI_31. . . . . . .  C ADDR   0EE4H   R   SEG=MAIN   2635 2644#
RKNLEFT. . . . . .  C ADDR   104BH   R   SEG=MAIN   2844# 2887
RKNMEM . . . . . .  C ADDR   103CH   R   SEG=MAIN   2839# 2893
RKNNUL . . . . . .  C ADDR   1048H   R   SEG=MAIN   2843# 2881
RKNOPT . . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2267# 2314
RKNRAZR. . . . . .  C ADDR   0C78H   R   SEG=MAIN   2266# 2308
RKVVOD0. . . . . .  C ADDR   12B1H   R   SEG=MAIN   3182 3189#
RLABELF. . . . . .  C ADDR   0C75H   R   SEG=MAIN   2265# 2300
RLABELH. . . . . .  C ADDR   1045H   R   SEG=MAIN   2842# 2878
RLABELI. . . . . .  C ADDR   116AH   R   SEG=MAIN   3003#
RLABELK. . . . . .  C ADDR   1167H   R   SEG=MAIN   3002# 3005
RLABELL. . . . . .  C ADDR   0EA9H   R   SEG=MAIN   2609 2612#
RLABELL1 . . . . .  C ADDR   1016H   R   SEG=MAIN   2813 2816#
RLABELN. . . . . .  C ADDR   0F14H   R   SEG=MAIN   2664 2668#
RLABELS13. . . . .  C ADDR   1597H   R   SEG=MAIN   3580# 3584
RLABELS4 . . . . .  C ADDR   1594H   R   SEG=MAIN   3579# 3582
RLABL2 . . . . . .  C ADDR   12F3H   R   SEG=MAIN   3219# 3224
RLABM. . . . . . .  C ADDR   12F6H   R   SEG=MAIN   3220# 3222
RLER . . . . . . .  C ADDR   1B34H   R   SEG=MAIN   4511 4513#
RME21_23 . . . . .  C ADDR   148DH   R   SEG=MAIN   3418 3437#
RMO220 . . . . . .  C ADDR   0682H   R   SEG=MAIN   1159 1180 1210#
RNNMEMB. . . . . .  C ADDR   0F1AH   R   SEG=MAIN   2671# 2672
RNO3PARN . . . . .  C ADDR   08B6H   R   SEG=MAIN   1542# 1556
RNOCHI0. . . . . .  C ADDR   0685H   R   SEG=MAIN   1198 1211#
RNOH37 . . . . . .  C ADDR   11B3H   R   SEG=MAIN   3047# 3051 3058 3072
RNOMEMK. . . . . .  C ADDR   1290H   R   SEG=MAIN   3173# 3177
RNOR11 . . . . . .  C ADDR   0E0FH   R   SEG=MAIN   2514# 2516
RNORVICH . . . . .  C ADDR   08B4H   R   SEG=MAIN   1485 1486 1541#
RNOT1IN. . . . . .  C ADDR   09A6H   R   SEG=MAIN   1614 1708#
ROUT6. . . . . . .  C ADDR   0C72H   R   SEG=MAIN   2264# 2299
ROUT7. . . . . . .  C ADDR   1042H   R   SEG=MAIN   2841# 2872 2877
ROUTF. . . . . . .  C ADDR   11B0H   R   SEG=MAIN   3043# 3113
RR0. . . . . . . .  N NUMB   0000H   A      422# 2274 2827 2849 3865
RR1. . . . . . . .  N NUMB   0001H   A      423# 2275 2826 2850 3864
RR2. . . . . . . .  N NUMB   0002H   A      425# 1923 2276 2825 2851 3863
RR3. . . . . . . .  N NUMB   0003H   A      426# 1924 2277 2824 2852 3862
RR4. . . . . . . .  N NUMB   0004H   A      2278 2823 2853 3861 4665# 4722 4743 4759 4803 4825
RR5. . . . . . . .  N NUMB   0005H   A      2279 2822 2854 3860 4666# 4723 4730 4737 4804 4813
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   116

RR6. . . . . . . .  N NUMB   0006H   A      424# 2280 2821 2855 3859
RR7. . . . . . . .  N NUMB   0007H   A      427# 2281 2820 2856 3858
RRIR . . . . . . .  C ADDR   1B41H   R   SEG=MAIN   4522 4524#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   084BH   R   SEG=MAIN   1469# 1487 1489
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 482 2944
RTIZMRI. . . . . .  C ADDR   0DD3H   R   SEG=MAIN   2482#
RVVIZKO. . . . . .  C ADDR   119FH   R   SEG=MAIN   3035# 3040
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2291 2556 2574 2745 2788 2808 2868 3300 3690 3785 4587 4595
SAVEIR2. . . . . .  C ADDR   0B68H   R   SEG=MAIN   824 860 939 2035#
SAVELTE. . . . . .  C ADDR   04A7H   A      6500#
SAVER2 . . . . . .  C ADDR   0B74H   R   SEG=MAIN   554 556 558 749 759 761 785 803 812 1025 1037 1046 1091 1096 1145
                                           1148 1175 1188 1194 1277 1281 1501 1787 1848 1860 1886 1898 2049# 2978
                                           2985 3731 3815 3846 3975 4531 4558
SBUF0. . . . . . .  D ADDR   0099H   A      40# 3921 3927
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 490 3922 3926 3929 3930 3951
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   0AFEH   R   SEG=MAIN   1955# 1962
SDV1 . . . . . . .  C ADDR   0B12H   R   SEG=MAIN   1967# 1973
SDVIG0 . . . . . .  C ADDR   02C5H   R   SEG=MAIN   709# 711
SDVIG1 . . . . . .  C ADDR   02BAH   R   SEG=MAIN   701# 703
SDVIG2 . . . . . .  C ADDR   02AFH   R   SEG=MAIN   693# 695
SDVIG3 . . . . . .  C ADDR   02A3H   R   SEG=MAIN   684# 686
SDVIG4 . . . . . .  C ADDR   02D4H   R   SEG=MAIN   719# 721
SDVIG6 . . . . . .  C ADDR   02DEH   R   SEG=MAIN   726# 728
SDVM . . . . . . .  C ADDR   02DCH   R   SEG=MAIN   716 725#
SEEGOON. . . . . .  C ADDR   08BCH   R   SEG=MAIN   1531 1539 1546#
SEEIND . . . . . .  C ADDR   08CAH   R   SEG=MAIN   1461 1468 1469 1559#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      5596# 5617 5618 5643 5644 5668 5811 5828 6049 6089
SKOR19 . . . . . .  C ADDR   14DBH   R   SEG=MAIN   3473 3479#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   121DH   R   SEG=MAIN   3108# 3123
SP . . . . . . . .  D ADDR   0081H   A      17# 443
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 488
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 487
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 1944
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   156FH   R   SEG=MAIN   3558 3560#
SS1. . . . . . . .  C ADDR   18F4H   R   SEG=MAIN   4117# 4119
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      386# 746 748 763 782 784 1232 1422 2357 2966
SUMT2. . . . . . .  C ADDR   0330H   R   SEG=MAIN   737 779#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   1A6EH   R   SEG=MAIN   4379# 4389
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   117

TABN . . . . . . .  C ADDR   1B06H   R   SEG=MAIN   4481# 4485
TABT11 . . . . . .  C ADDR   18B2H   R   SEG=MAIN   4056# 4461
TABT7. . . . . . .  C ADDR   18B6H   R   SEG=MAIN   4060# 4474
TABT9. . . . . . .  C ADDR   18B4H   R   SEG=MAIN   4058# 4471
TABUS. . . . . . .  C ADDR   189EH   R   SEG=MAIN   3992 4045#
TAKTIND. . . . . .  C ADDR   0905H   R   SEG=MAIN   1588 1591#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 479 480 494
TE22 . . . . . . .  C ADDR   1AF9H   R   SEG=MAIN   4460 4470#
TE23 . . . . . . .  C ADDR   1B01H   R   SEG=MAIN   4470 4474#
TEAEQU0. . . . . .  C ADDR   1C02H   R   SEG=MAIN   3085 4618#
TEAVK. . . . . . .  C ADDR   1C3EH   R   SEG=MAIN   3893 4625#
TEBBL. . . . . . .  C ADDR   1CFCH   R   SEG=MAIN   3336 4648#
TEBEQU0. . . . . .  C ADDR   1C0CH   R   SEG=MAIN   3821 4619#
TEBL . . . . . . .  C ADDR   1CF2H   R   SEG=MAIN   3212 4647#
TEBLOK . . . . . .  C ADDR   1CE8H   R   SEG=MAIN   3275 4646#
TECLE. . . . . . .  C ADDR   1CB7H   R   SEG=MAIN   2697 3162 3194 4641#
TEEBL. . . . . . .  C ADDR   1D06H   R   SEG=MAIN   3373 4649#
TEEND. . . . . . .  C ADDR   1D2EH   R   SEG=MAIN   3978 4654#
TEERR. . . . . . .  C ADDR   1D24H   R   SEG=MAIN   4602 4653#
TEFULL . . . . . .  C ADDR   1CDEH   R   SEG=MAIN   3267 4645#
TEIZMK . . . . . .  C ADDR   1C99H   R   SEG=MAIN   2510 2518 3029 4638#
TEKALIB. . . . . .  C ADDR   1C48H   R   SEG=MAIN   3425 3896 4626#
TEKD . . . . . . .  C ADDR   1C8FH   R   SEG=MAIN   3623 4637#
TELIST . . . . . .  C ADDR   1CD3H   R   SEG=MAIN   2689 3185 4644#
TEMEM. . . . . . .  C ADDR   1CC1H   R   SEG=MAIN   4642#
TEMENU . . . . . .  C ADDR   1C16H   R   SEG=MAIN   4620#
TENMIN . . . . . .  C ADDR   1972H   R   SEG=MAIN   1104 1106 1118 4173#
TEOLI. . . . . . .  C ADDR   1D10H   R   SEG=MAIN   1315 4651#
TEOLL. . . . . . .  C ADDR   1CADH   R   SEG=MAIN   1408 4640#
TEOLR. . . . . . .  C ADDR   1D1AH   R   SEG=MAIN   1311 4652#
TEOUT. . . . . . .  C ADDR   1CA3H   R   SEG=MAIN   2524 2603 3020 4639#
TEPAR. . . . . . .  C ADDR   1C85H   R   SEG=MAIN   3913 4636#
TES19_2. . . . . .  C ADDR   1C7BH   R   SEG=MAIN   503 2650 3479 3673 4634#
TES57_6. . . . . .  C ADDR   1C71H   R   SEG=MAIN   2646 3474 3669 3909 4633#
TESKOR . . . . . .  C ADDR   1C34H   R   SEG=MAIN   3890 4624#
TEST01 . . . . . .  C ADDR   17E3H   R   SEG=MAIN   3926# 3949
TEST02 . . . . . .  C ADDR   180FH   R   SEG=MAIN   3946 3948#
TEST04 . . . . . .  C ADDR   17F3H   R   SEG=MAIN   3933# 3935
TEST1. . . . . . .  C ADDR   17D9H   R   SEG=MAIN   3921# 3937 3958
TEST2. . . . . . .  C ADDR   1808H   R   SEG=MAIN   3926 3945#
TEST22 . . . . . .  C ADDR   1544H   R   SEG=MAIN   3525 3532#
TEST23 . . . . . .  C ADDR   1549H   R   SEG=MAIN   3532 3535#
TEST3. . . . . . .  C ADDR   17FAH   R   SEG=MAIN   3928 3938#
TEST4. . . . . . .  C ADDR   17EBH   R   SEG=MAIN   3929# 3944
TEST5. . . . . . .  C ADDR   1812H   R   SEG=MAIN   3947 3950#
TEST7I . . . . . .  C ADDR   091DH   R   SEG=MAIN   1601 1604#
TEST9I . . . . . .  C ADDR   0916H   R   SEG=MAIN   1596 1601#
TESTRS . . . . . .  C ADDR   17D7H   R   SEG=MAIN   3463 3919#
TESTS. . . . . . .  C ADDR   1538H   R   SEG=MAIN   3527# 3534 3537
TETE11 . . . . . .  C ADDR   1C53H   R   SEG=MAIN   3453 3900 4628#
TETE7. . . . . . .  C ADDR   1C67H   R   SEG=MAIN   3514 3906 4630#
TETE9. . . . . . .  C ADDR   1C5DH   R   SEG=MAIN   3903 4629#
TETESI . . . . . .  C ADDR   1C20H   R   SEG=MAIN   2933 3883 4622#
TETESR . . . . . .  C ADDR   1C2AH   R   SEG=MAIN   3887 4623#
TEVICH . . . . . .  C ADDR   1BF8H   R   SEG=MAIN   2371 2530 3025 4617#
TEWR . . . . . . .  C ADDR   1CC9H   R   SEG=MAIN   2680 3198 4643#
TEXTT. . . . . . .  C ADDR   1BBCH   R   SEG=MAIN   4072 4608#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 462
TH1. . . . . . . .  D ADDR   008DH   A      29# 501 505 3572 3574
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   118

TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   0B22H   R   SEG=MAIN   1976#
TIM1 . . . . . . .  C ADDR   0B24H   R   SEG=MAIN   1977# 1977
TIM2 . . . . . . .  C ADDR   0B27H   R   SEG=MAIN   1958 1961 1968 1972 1980# 2223 2225 2234 2238
TIM3 . . . . . . .  C ADDR   0B29H   R   SEG=MAIN   1981# 1981
TIZMRI . . . . . .  C ADDR   0D02H   R   SEG=MAIN   2335# 2482
TL0. . . . . . . .  D ADDR   008AH   A      26# 463
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   121AH   R   SEG=MAIN   3093 3105#
TMOD . . . . . . .  D ADDR   0089H   A      25# 460 493
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 477
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 476
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   14BFH   R   SEG=MAIN   3461 3466#
TOME14 . . . . . .  C ADDR   14E6H   R   SEG=MAIN   3466 3486#
TOME15 . . . . . .  C ADDR   14F7H   R   SEG=MAIN   3486 3495#
TOME21 . . . . . .  C ADDR   14B6H   R   SEG=MAIN   3451 3461#
TOSK19 . . . . . .  C ADDR   163CH   R   SEG=MAIN   3668 3673#
TOUTF. . . . . . .  C ADDR   11A1H   R   SEG=MAIN   3036# 3036 3039
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 1945
UNPACK1. . . . . .  C ADDR   009EH   A      5614# 5808 5942 6072 6186
UNPACK2. . . . . .  C ADDR   00BAH   A      5639# 5809 5943 6073
UP1. . . . . . . .  C ADDR   0138H   A      5759# 5776
UP2. . . . . . . .  C ADDR   014BH   A      5779# 5797
UP2A . . . . . . .  C ADDR   0161H   A      5758 5795#
UPA. . . . . . . .  C ADDR   19A1H   R   SEG=MAIN   4226# 4232
UPA1 . . . . . . .  C ADDR   19B1H   R   SEG=MAIN   4244# 4250
UPA2 . . . . . . .  C ADDR   1991H   R   SEG=MAIN   4209# 4215
UPAA . . . . . . .  C ADDR   19FAH   R   SEG=MAIN   4307# 4313
UPAB . . . . . . .  C ADDR   1A0AH   R   SEG=MAIN   4324# 4330
UPAK . . . . . . .  C ADDR   199BH   R   SEG=MAIN   4223#
UPAK2. . . . . . .  C ADDR   198BH   R   SEG=MAIN   3327 4206#
UPAK3. . . . . . .  C ADDR   19ABH   R   SEG=MAIN   3366 3392 4241#
UPAKA. . . . . . .  C ADDR   19F4H   R   SEG=MAIN   3807 4304#
UPAKB. . . . . . .  C ADDR   1A04H   R   SEG=MAIN   3835 4321#
UPAV1. . . . . . .  C ADDR   15B6H   R   SEG=MAIN   3603# 3609
UPAV2. . . . . . .  C ADDR   166BH   R   SEG=MAIN   3717# 3723
VICHR. . . . . . .  D ADDR   00B1H   A      384# 1594 2368 2377 2507 2616 2624 2936 2940 3014 3076 3414 3422 3431
                                           3446 3505 3621 3798 3850 3881 4459
VIG0 . . . . . . .  C ADDR   096DH   R   SEG=MAIN   1668# 1670
VIG4 . . . . . . .  C ADDR   097BH   R   SEG=MAIN   1679# 1681
VIOUT. . . . . . .  C ADDR   0DADH   R   SEG=MAIN   2374 2457#
VV21_23. . . . . .  C ADDR   152FH   R   SEG=MAIN   3511 3523#
VVCHIF . . . . . .  C ADDR   1B18H   R   SEG=MAIN   2597 4490#
VVIZKO . . . . . .  C ADDR   11EAH   R   SEG=MAIN   3035 3076#
VVKALI52 . . . . .  C ADDR   165EH   R   SEG=MAIN   3701# 3742
VVMENU . . . . . .  C ADDR   1614H   R   SEG=MAIN   3586 3656#
VVODM11_15 . . . .  C ADDR   1499H   R   SEG=MAIN   3421 3446#
VVRR6. . . . . . .  C ADDR   0E07H   R   SEG=MAIN   2510#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 458 459
WORK . . . . . . .  D ADDR   00B8H   A      388# 1296 1298 1304 1320 1327 1343 1364 1369 1385 1619 1694 3923 3945
WR1. . . . . . . .  C ADDR   0C3AH   R   SEG=MAIN   2219# 2226
WRITE. . . . . . .  C ADDR   0C37H   R   SEG=MAIN   625 2217# 4350 4352 4354 4356 4358 4360 4363 4365 4367 4370 4372
                                           4374
WRITED_X1. . . . .  C ADDR   0B2DH   R   SEG=MAIN   1986#
WRITE_X1 . . . . .  C ADDR   0B2CH   R   SEG=MAIN   1985#
A51 MACRO ASSEMBLER  AMP24                                                                01/26/2007 12:09:43 PAGE   119

WRPAGE . . . . . .  C ADDR   0480H   A      3569 6461#
WW5. . . . . . . .  C ADDR   0483H   A      6462# 6470
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 454 486
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 455
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 456 485
XCIKLWR. . . . . .  C ADDR   0B54H   R   SEG=MAIN   819 831 833 835 838 841 844 847 850 853 883 885 887 890 893 896
                                           899 902 905 907 910 912 914 917 920 923 926 929 932 2018#
XTEMP. . . . . . .  N NUMB   000CH   A      4662# 5026 5027 5028 5029 5115 5117 5118 5120 5121 5123 5124 5126 5148
                                           5149 5150 5151 5169 5170 5174 5175 5178 5182 5183 5186 5190 5191 5195 5196
                                           5198 5199 5200 5202 5206 5207 5209 5210 5214 5215 5220 5221 5223 5224 5228
                                           5229 5234 5236 5237 5238
YBNUL. . . . . . .  C ADDR   113CH   R   SEG=MAIN   2973 2981#
YES. . . . . . . .  C ADDR   1EC6H   R   SEG=MAIN   5048 5052 5056 5060 5078# 5141
YESAVP . . . . . .  C ADDR   0688H   R   SEG=MAIN   1182 1214#
YESBUF . . . . . .  C ADDR   09AAH   R   SEG=MAIN   1706 1711#
YESIND . . . . . .  C ADDR   091FH   R   SEG=MAIN   1593 1600 1603 1607#
YESPRD . . . . . .  C ADDR   09A8H   R   SEG=MAIN   1705 1709#
YESTEST. . . . . .  C ADDR   188DH   R   SEG=MAIN   3987 4019#
YESTT5 . . . . . .  C ADDR   09CEH   R   SEG=MAIN   1726 1734#
YESVICH. . . . . .  C ADDR   06B7H   R   SEG=MAIN   1183 1239#
YESVIR . . . . . .  C ADDR   0EA1H   R   SEG=MAIN   2608#
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   502 506#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   499 503#
Z01S . . . . . . .  C ADDR   190CH   R   SEG=MAIN   4134# 4136
Z05S . . . . . . .  C ADDR   1919H   R   SEG=MAIN   4143# 4145
Z100 . . . . . . .  C ADDR   18DDH   R   SEG=MAIN   4098# 4100
Z15. . . . . . . .  C ADDR   18EBH   R   SEG=MAIN   4110# 4112
Z1S. . . . . . . .  C ADDR   18FFH   R   SEG=MAIN   4126# 4128
ZAPADC . . . . . .  C ADDR   0AFCH   R   SEG=MAIN   1954#
ZCMP . . . . . . .  C ADDR   0BD6H   R   SEG=MAIN   2126#
ZDIV . . . . . . .  C ADDR   0BA3H   R   SEG=MAIN   757 1017 1446 2089#
ZER1 . . . . . . .  C ADDR   00B3H   A      5624 5628# 5683 5726
ZER2 . . . . . . .  C ADDR   00D4H   A      5650 5654#
ZMUL . . . . . . .  C ADDR   0B99H   R   SEG=MAIN   2084#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      316# 1521 2097 2100 2103
ZNPLUS . . . . . .  C ADDR   0296H   R   SEG=MAIN   636 673#
ZZ . . . . . . . .  C ADDR   18EDH   R   SEG=MAIN   4111# 4111
Z_01S. . . . . . .  C ADDR   1908H   R   SEG=MAIN   668 669 670 2284 2861 3943 3957 4132# 4599
Z_05S. . . . . . .  C ADDR   1915H   R   SEG=MAIN   1728 1729 4141#
Z_100. . . . . . .  C ADDR   18DBH   R   SEG=MAIN   4097#
Z_15 . . . . . . .  C ADDR   18E9H   R   SEG=MAIN   604 4109#
Z_1MS. . . . . . .  C ADDR   18F2H   R   SEG=MAIN   3950 4116#
Z_1S . . . . . . .  C ADDR   18FBH   R   SEG=MAIN   571 579 3661 3981 3982 4124#
Z_5. . . . . . . .  C ADDR   18E4H   R   SEG=MAIN   1990 2000 4104#
Z_9. . . . . . . .  C ADDR   0C32H   R   SEG=MAIN   1947 2211#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
