A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp29.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp29.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236              
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
  0036               313     saus                            DATA    36h;сохр упр слово
                     314     ;DATA           34H
                     315     ;;;;;
  0020               316      cellbit                DATA    20h
  0000               317     bitznak         BIT     cellbit.0       ;20.0           
  0001               318     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               319     znmat           BIT             cellbit.2       ;20.2
  0003               320     bitrs           BIT             cellbit.3       ;20.3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     6

  0004               321     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               322     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
  0006               323     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               324     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     325     
  0021               326     cellbit1                DATA    21h
  0008               327     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               328     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               329     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               330     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
  000C               331     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
  000D               332     bifl_kt         BIT             cellbit1.5      ;21.5  бит для выч Км теста измерения  
                     333     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               334     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     335     
  0022               336     cellbit2                DATA    22h
  0010               337     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               338     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               339     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               340     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               341     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               342     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               343     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               344     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     345     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     346     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     347     ;и выдает т.н. буфер индикации  
  0023               348     cellbit3                DATA    23h
  0018               349     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               350     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               351     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               352     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     353     ;bit            BIT             cellbit3.4      ;22.4    
                     354     ;bit            BIT             cellbit3.5      ;22.5    
                     355     ;bit            BIT             cellbit3.6      ;22.6            
                     356     ;bit            BIT             cellbit3.7      ;22.7
                     357             
  005E               358     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     359     ;hex
  0062               360     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               361     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               362     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               363     rez_A2   data 7bh; A2
                     364     
  0098               365     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               366     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               367     chdel    data  83h              ; счетчик задержки
                     368     ;float
  0084               369     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               370     rezAp    data  88h              ;4byte  A+
  008C               371     rezAm    data  8ch              ;4byte  A-
  0090               372     koefKp   data  90h              ;4byte  K+
  0094               373     koefKm   data  94h              ;4byte  K-
                     374     ;hex 
  009A               375     parT     data  9ah              ;параметр времени измерения
  009B               376     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               377     rez_A3   data  9ch              ;A3
                     378     ;FLOAT
  00A0               379     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               380     rez_Ak  data  0a4h         ;Ak
  00A8               381     parol           data  0a8h         ;храним в памяти пароль
  00AC               382     chind   data  0ach         ;счетчик индикации
                     383     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     7

  00AE               384     diap    data  0aeh         ;номер диапазона
  00AF               385     parN    data  0afh         ;N  пар разрядности индикатора
  00B0               386     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               387     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               388     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               389     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               390     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               391     work    data  0b8h        ;рабочая ячейка
  00BC               392     konstA  data  0bch        ;     введенная с крана константа A
  00C0               393     konstB  data  0c0h         ;    введенная с крана константа B
                     394     ;       data  0c4h         ;
  00C5               395     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               396     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               397     interva data  0cdh;значение интервала (запись)2baita
  00CF               398     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               399     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               400     volume          data    0d5h;объем блока
  00D6               401     chblok          data    0d6h;volume;кол измерений блока
  00D7               402     copy_hl         data  0d7h;копия адреса последней записанной ячейки блока saven_bl
                     403     ;data           0d9h
                     404     
                     405     ;внешнее ОЗУ 64K 
                     406     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     407     ;ячейку  стирается целая страница 0..ffh рпзу
                     408     ;               XSEG AT 100h
                     409             PUBLIC    MASS0
  0100               410     MASS0  xdata 0100h;     скользящий массив измерения
  0104               411     MASS1  xdata 0104h;
  0108               412     MASS2  xdata 0108h;
  010C               413     MASS3  xdata 010ch;
  0110               414     MASS4  xdata 0110h;
  0114               415     MASS5  xdata 0114h;
  0118               416     MASS6  xdata 0118h;
  011C               417     MASS7  xdata 011ch;
  0120               418     MASS8  xdata 0120h;
  0124               419     MASS9  xdata 0124h;
  0128               420     MASS10  xdata 0128h;
  012C               421     MASS11  xdata 012ch;
  0130               422     MASS12  xdata 0130h;
  0134               423     MASS13  xdata 0134h;
  0138               424     MASS14  xdata 0138h;
  013C               425     MASS15  xdata 013ch;
  0140               426     MASS16  xdata 0140h;
  0144               427     MASS17  xdata 0144h;
  0148               428     MASS18  xdata 0148h;
  014C               429     MASS19  xdata 014ch;
                     430     ;xdata 
                     431     
  0000               432                             rr0             EQU 00
  0001               433                     rr1       equ   01
  0006               434                     rr6   equ 06
  0002               435                     rr2       equ   02
  0003               436                     rr3       equ   03
  0007               437                     rr7   equ 07
                     438     
  0008               439                     r8   equ 08
  0009               440                     r9        equ   09
  000A               441                     r10       equ   10
  000B               442                     r11   equ 11
                     443     
                     444                     
                     445        
----                 446                  rseg     Main          ; Switch to this code segment.
                     447     
                     448                  using    0              ; Specify register bank for the following
                     449     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     8

0100                 450     org 100h
                     451     ;$EJECT
                     452     
0100 7581E0          453     begin:     mov  sp, #0e0h
0103 75E900          454                                             mov             PCA0L,#00;=0x00;
0106 75D900          455                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          456                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          457                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          458                                             mov     P2MDOUT,#00;=0x00;
                     459             
0112 75A73F          460             mov     P3MDOUT,#3fh;
0115 75B5FF          461             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          462             mov     REF0CN,#03h;=0x03;
                     463             
011B 75E114          464             mov     XBR0,#14h;= 0x14;
011E 75E200          465             mov     XBR1,#00; =0x00;
0121 75E300          466             mov XBR2,#00;=0x00;
0124 75B0C0          467             mov     P3,#0c0h
0127 75FFDE          468             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          469             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          470             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          471             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          472             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          473             mov     TL0,#0f9h;=0xf9; 
0139 75E680          474             mov     EIE1,#80h;=0x80;
                     475     
013C 75D480          476             mov     DAC0CN,#80h;=0x80;
013F 75D780          477             mov     DAC1CN,#80h;=0x80;
0142 75B167          478             mov     OSCXCN,#67h;=0x67;
                     479     
                     480      
                     481     
0145 E5B1            482     gener:     mov a, oscxcn
0147 B4E7FB          483                cjne a,#11100111b,gener
                     484                            
014A 75B288          485             mov     OSCICN,#88h;=0x84;
014D 75CA00          486         mov TMR2RLL,#0;=0;
0150 75CBD1          487         mov TMR2RLH,#0d1h;=0xd1;
                     488       
0153 D28E            489                     setb  TCON.6                    ;регистр управления
0155 D28C            490                      setb tcon.4
                     491     
0157 75EF00          492             mov     RSTSRC,#0;=00   ;//источники сброса 
                     493     
                     494             
015A 75E340          495          mov        XBR2,#40h
015D 75E106          496              mov    XBR0,#06h;16h
0160 75F803          497             mov             SPI0CN,#03
0163 759D31          498             mov             spi0ckr,#31H;;;;;;;;#04
                     499     ;установка скорости
0166 759850          500                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          501                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          502                                             mov             CKCON,#00010000b;TIM=1
016F 758920          503                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          504                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            505                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            506                                             mov                     r3,#2ch
0179 120454          507                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            508                                             mov                     a,r8
017E B40007          509                                             cjne            a,#00,yst19
0181 C213            510                                             clr                     bitv19                  ;57
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE     9

                             .6
0183 758DF4          511                                             mov                     TH1,#244
0186 8008            512                                             jmp               yst1
0188 900000   F      513     yst19:          mov                     dptr,#teS19_2
018B D213            514                                             setb            bitv19                  ;19,2
018D 758DDC          515                                             mov                     TH1,#220
0190                 516     yst1:
0190 75E730          517                                             mov             EIE2,#30H;00110000
0193 75A880          518                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     519     ;ozu
0196 E4              520                                             clr     a
0197 7800            521                                             mov     r0,#00h 
0199 F6              522     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              523                                             inc     r0
019B B87FFB          524                                             cjne    r0,#7fh,mecle
019E 7880            525                                             mov     r0,#80h
01A0 F6              526     meff:                   mov     @r0,a 
01A1 F2              527                                             movx @r0,a
01A2 08              528                                             inc     r0
01A3 B8DFFA          529                             cjne    r0,#0dfh,meff
01A6 120000   F      530                             call    clmassix
                     531     ;обнулить внешнее озу 4кбайта
01A9 900000          532                                     mov                     dptr,#0
01AC E4              533     extcle: clr                     a
01AD F0              534                                     movx            @dptr,a
01AE A3              535                                     inc                     dptr
01AF E583            536                                     mov                     a,dph
01B1 B410F8          537                                     cjne            a,#10h,extcle
                     538     
01B4 7898            539                             mov             r0,#chinkor
01B6 7600            540                             mov             @r0,#0;1;
01B8 08              541                             inc             r0
01B9 7664            542                             mov             @r0,#64h;0c8h;90h;
                     543                             ;;;;
01BB 7881            544                             mov             r0,#chavt
01BD 7601            545                             mov             @r0,#1
01BF 08              546                             inc             r0
01C0 7690            547                             mov             @r0,#90h
                     548     
01C2 78B2            549                                     mov             r0,#marker
01C4 76FF            550                                     mov             @r0,#0ffh
                     551                             ;mov            r0,#chind
                     552                             ;mov            @r0,#1
                     553                     
01C6 74FF            554                             mov             a,#0ffh
01C8 F585            555                        mov          p5,a
01CA 799A            556                             mov             r1,#parT
01CC 7702            557                             mov             @r1,#2                  ;Tizm=1s
01CE 79AE            558                             mov             r1,#diap
01D0 7705            559                             mov             @r1,#5                  ;10-7a
01D2 79AF            560                             mov             r1,#parN
01D4 7702            561                             mov             @r1,#2
01D6 7400            562                             mov             a,#00h
01D8 F585            563                             mov             p5,a
01DA D204            564                             setb    bitizm
                     565     
01DC 799B            566                             mov             r1,#chbefore
01DE 7700            567                             mov             @r1,#0
                     568                             ;;;;;;
01E0 900000   F      569                             mov             dptr,#ch_1              ;1->r2..r5 float
01E3 120000   F      570                             call    ldc_long
01E6 7890            571                             mov             r0,#koefKp         ;1(float)->koefKp
01E8 120000   F      572                             call    saver2
01EB 7894            573                             mov             r0,#koefKm              ;1(float)->koefKm
01ED 120000   F      574                             call    saver2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    10

01F0 78A0            575                             mov             r0,#koefKD
01F2 120000   F      576                             call    saver2
01F5 78CF            577                             mov                     r0,#chbuf
01F7 120000   F      578                             call    saver2  
                     579     ;START
                     580     ;                                       rez_A0=0;
                     581     ;        SUMM=0; //обнуление скользящего массива
                     582     ;        over_mas=0;
                     583     ;        count_mas=0;
                     584     
01FA 7840            585                             mov             r0,#bufind
01FC                 586     age2:
01FC 76FD            587                             mov             @r0,#0fdh         ;погасить индикатор
01FE 08              588                             inc             r0
01FF B84CFA          589                             cjne    r0,#bufind+12,age2              
0202 120000   F      590                             call    ind
0205 120000   F      591                             call    z_1s
                     592     
                     593                                     ;зажечь все лементы индикации
0208 7840            594                             mov             r0,#bufind
020A 7669            595     ageon:          mov             @r0,#69h;0feh;?
020C 08              596                             inc             r0
020D B84CFA          597                             cjne    r0,#bufind+12,ageon             
0210 120000   F      598                             call    ind
0213 120000   F      599                             call    z_1s            ;1sec
                     600     ;;;;;;;;;;;;;;;;
                     601                     
0216 120000   F      602                             call    z_15;z_1ms
0219 434B10          603                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     604     ;;;;;;;;;;;;;;;;;;;
021C 7C60            605                             mov             r4,#60h
021E 7D00            606                             mov             r5,#00         
0220 120000   F      607                             call    iniacp;инициализация acp
0223 120000   F      608                             call    loadUS          ;us 10-7 A
                     609                             
0226 C217            610     rebyte:         clr             bitoll
0228 3095FD          611                             jnb             p1.5,$
022B 2095FD          612                             jb              p1.5,$
                     613                             ;mov            a,P6            ;p6.4=0
                     614                             ;anl            a,#0efh
                     615                             ;mov            P6,a
                     616                             ;nop
                     617                             ;nop
                     618                                     
                     619                             ;mov            a,P6                    ;p6.4=1 
                     620                             ;orl            a,#10h
                     621                             ;mov            P6,a                        
022E 7411            622                             mov             a,#11h
0230 120000   F      623                             call    write
                     624                             ;чтение acp
0233 120000   F      625                             call    read    
0236 F578            626                             mov     reacp+1,A       ;старший байт 
0238 120000   F      627                             call    read    
023B F579            628                             mov     reacp+2,A       ;средний байт 
023D 120000   F      629                             call    read
0240 F57A            630                             mov     reacp+3,A               ;мл байт
                     631                        ;;;;;;;;;;;
0242 7878            632                        mov          r0,#reacp+1
0244 E6              633                        mov          a,@r0
0245 20E72D          634                             jb              acc.7,znplus;
0248 D200            635                             setb    bitznak
024A 4480            636                             orl             a,#80h  ;ост содерж яч 
024C F6              637                             mov             @r0,a
                     638                                     
024D 18              639     mmm:            dec             r0;,#reacp
024E 76FF            640                             mov             @r0,#0ffh
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    11

0250 802B            641                             jmp             goznak
                     642     
                     643     
0252 750A00          644     labelA:         mov             r10,#0          
0255 750B00          645                             mov             r11,#0
0258 783D            646                             mov             r0,#chkl
025A 120000   F      647                             call    chcmp
025D 7000            648                             jnz             no0key
                     649                             ;разрешить ie6,ie7       
                     650                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     651                     ;       mov             EIP2,#30h
                     652                        
025F 793D            653     no0key:         mov             r1,#chkl 
0261 120000   F      654                             call    chdec
0264 2004BF          655                             jb              bitizm,rebyte
                     656                              ;буфер 2 выдать на индикацию
                     657     
0267 120000   F      658                             call    ind
026A 120000   F      659                             call    z_01s
026D 120000   F      660                             call    z_01s
0270 120000   F      661                             call    z_01s
0273 80DD            662                             jmp             labelA
                     663     
0275 C200            664     znplus:         clr     bitznak
0277 547F            665                             anl             a,#7fh;fdh                      ;+
0279 F6              666                             mov             @r0,a
027A 18              667                             dec             r0;,#reacp
027B 7600            668                             mov             @r0,#00h
                     669                             
027D                 670     goznak: 
                     671     ;;;;;;;;;;;;;
027D 787A            672                             mov     r0,#reacp+3
027F E6              673                             mov             a,@r0
0280 7F05            674                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
0282 C3              675     sdvig3:         clr             c
0283 13              676                             rrc             a
0284 DFFC            677                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
0286 FA              678                             mov             r2,a    ;сохр байт
0287 18              679                             dec             r0              ;       reacp+2
0288 E6              680                             mov             a,@r0
0289 C0E0            681                             push    acc
028B C3              682                             clr             c
028C 7F03            683                             mov             r7,#3;2
028E C3              684     sdvig2:         clr             c
028F 33              685                             rlc             a
0290 DFFC            686                             djnz    r7,sdvig2 ;d12..d11      средний байт
0292 4A              687                             orl             a,r2
0293 F57A            688                             mov             reacp+3,a;сформ мл байт
0295 D0E0            689                             pop             acc
                     690                             
0297 7F05            691                             mov             r7,#5;6
0299 C3              692     sdvig1:         clr             c
029A 13              693                             rrc             a
029B DFFC            694                             djnz    r7,sdvig1 ;d15,d14        ср байт
029D FA              695                             mov             r2,a   ;сохр
029E E578            696                             mov             a,reacp+1
02A0 C0E0            697                             push    acc
                     698                     ;;      push    acc
02A2 7F03            699                             mov             r7,#3;2
02A4 C3              700     sdvig0:         clr             c
02A5 33              701                             rlc             a
02A6 DFFC            702                             djnz    r7,sdvig0 ;       d21..d16
02A8 4A              703                             orl             a,r2
02A9 F579            704                             mov             reacp+2,a       ; сформ средний  байт
02AB D0E0            705                             pop             acc       ;reacp+1
                     706                             ;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    12

02AD 20E70B          707                             jb              acc.7,sdvm
02B0 C3              708                             clr             c
02B1 7F05            709                             mov             r7,#5;6
02B3 C3              710     sdvig4:         clr             c
02B4 13              711                             rrc             a
02B5 DFFC            712                             djnz    r7,sdvig4 ;       d23,d22
02B7 F578            713                             mov             reacp+1,a
02B9 8008            714                             jmp             readyacp;ankor;klmas
                     715     ;;;;;;;;;;;;                                    
02BB 7F05            716     sdvm:           mov             r7,#5;6
02BD D3              717     sdvig6:         setb            c
02BE 13              718                             rrc             a
02BF DFFC            719                             djnz    r7,sdvig6 ;       d23,d22
02C1 F578            720                             mov             reacp+1,a
                     721                                                             
                     722     ; reacp..reacp+3-результат чтения асп(hex) 
                     723     ;;;;;;;;;
02C3                 724     readyacp:
02C3 7898            725                                             mov             r0,#chinkor
02C5 E6              726                             mov             a,@r0
02C6 30E702          727                             jnb             acc.7,gopart
02C9 8044            728                                     jmp             sumt2
                     729                     
02CB                 730     gopart:
02CB 789A            731                             mov             r0,#parT        ;параметр времени
02CD 793F            732                             mov             r1,#chmasN
02CF B6013A          733                             cjne    @r0,#1,noparT1
                     734                             ;РЕЗ+РЕЗ
02D2 7877            735                             mov             r0,#reacp
02D4 120000   F      736                             call    resar2          ;reacp->r2..r5
02D7 78B6            737                             mov             r0,#summa+3;rez_A+3
02D9 120000   F      738                             call    ladd
02DC 78B3            739                             mov             r0,#summa;rez_A
02DE 120000   F      740                             call    saver2
02E1 793F            741                              mov            r1,#chmasN
02E3 7714            742                             mov             @r1,#20;10
02E5 789B            743                             mov             r0,#chbefore
02E7 B6631E          744                             cjne    @r0,#99,nobef99
                     745                             ;РЕЗ/100
02EA 900000   F      746                             MOV        DPTR,#ch100 
02ED 120000   F      747     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
02F0 120000   F      748                             call    zdiv;divide
02F3 7862            749                             mov             r0,#rez_A
02F5 120000   F      750                             call    saver2          ;сумма 100 отсчетов /100
02F8 78C5            751                             mov             r0,#Rez_del
02FA 120000   F      752                             call    saver2  
                     753                        ;;;;;
02FD 78B3            754                        mov          r0,#summa
02FF 120000   F      755                        call         clear4
                     756     
0302 799B            757                             mov             r1,#chbefore
0304 7700            758                             mov             @r1,#0
0306 8070            759                             jmp             klmas           ;загр в массив скользящее ср
0308 06              760     nobef99:        inc             @r0                     ;chbefore
0309 020000   F      761                             jmp             rebyte;labelA;метка A
                     762     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     763     ;а потом уже располагаем  в скользящий массив  из n
                     764     
                     765     
                     766     
030C B6021D          767     noparT1:        cjne    @r0,#2,noparT2
                     768                             ;РЕЗ+РЕЗ
030F                 769     sumt2:
030F 7877            770                              mov            r0,#reacp
0311 120000   F      771                             call    resar2          ;reacp->r2..r5
0314 78B6            772                             mov             r0,#summa+3;rez_A+3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    13

0316 120000   F      773                             call    ladd
0319 78B3            774                             mov             r0,#summa;rez_A
031B 120000   F      775                             call    saver2
031E 789B            776                             mov             r0,#chbefore
0320 793F            777                             mov             r1,#chmasN
0322 770A            778                             mov             @r1,#10
0324 B613E1          779                             cjne    @r0,#19,nobef99;9,nobef99
                     780                             ;РЕЗ/20
0327 900000   F      781                             MOV        DPTR,#ch20;ch10 
032A 80C1            782                             jmp             allsum
                     783                             ;;;;;;;
                     784                             
                     785     
032C B6031D          786     noparT2:        cjne    @r0,#3,noparT3
                     787     
032F 7877            788                                                              mov            r0,#reacp
0331 120000   F      789                             call    resar2          ;reacp->r2..r5
0334 78B6            790                             mov             r0,#summa+3;rez_A+3
0336 120000   F      791                             call    ladd
0339 78B3            792                             mov             r0,#summa;rez_A
033B 120000   F      793                             call    saver2
033E 789B            794                             mov             r0,#chbefore
0340 793F            795                             mov             r1,#chmasN
0342 7704            796                             mov             @r1,#4                                  ;n=4
0344 B609C1          797                             cjne    @r0,#9,nobef99;9,nobef99
                     798                             ;РЕЗ/10
0347 900000   F      799                             MOV        DPTR,#ch10 
034A 80A1            800                             jmp             allsum
                     801                             
034C B6041D          802     noparT3:        cjne    @r0,#4,noparT4
034F                 803     aapar:          
034F 7877            804              mov            r0,#reacp
0351 120000   F      805                             call    resar2          ;reacp->r2..r5
0354 78B6            806                             mov             r0,#summa+3;rez_A+3
0356 120000   F      807                             call    ladd
0359 78B3            808                             mov             r0,#summa;rez_A
035B 120000   F      809                             call    saver2
035E 789B            810                             mov             r0,#chbefore
0360 793F            811                             mov             r1,#chmasN
0362 7704            812                             mov             @r1,#4
0364 B604A1          813                             cjne    @r0,#4,nobef99;9,nobef99
                     814                             ;РЕЗ/10
0367 900000   F      815                             MOV        DPTR,#ch5
036A 8081            816                             jmp             allsum
                     817     
                     818                     
036C 7702            819     noparT4:   mov          @r1,#2          ;chmasN n=2
036E 7877            820                             mov             r0,#reacp
0370 120000   F      821                             call    resar2          ;reacp->r2..r5
0373 7862            822                             mov             r0,#rez_A
0375 120000   F      823                             call    saver2
                     824     ;загрузить А в массив из 2/10 значений
                     825     ;;;;;;;;;;;;;;;
0378                 826     klmas:           
0378 793F            827                             mov             r1,#chmasN
037A B7021A          828                             cjne    @r1,#2,mas10
037D 900100          829                             MOV        dptr,#MASS0
0380 120000   F      830                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     831     
0383 7862            832                             mov             r0,#rez_A
0385 120000   F      833                             call    resar2          ;->r2..r5
0388 900100          834                             mov                     dptr,#MASS0
038B 120000   F      835                   call              saveIr2                 ; R2-R5 --> MAS0
                     836                     
038E 900107          837                   MOV          dptr,#MASS1+3
0391 120000   F      838                   CALL       addx
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    14

0394 020000   F      839                       jmp           endsum
                     840     ;массив из 10-ти измерений
0397 B70A7D          841     mas10:                  cjne    @r1,#10,mas20
039A 900120          842                                             mov                     dptr,#MASS8
039D 120000   F      843                     CALL            xCIKLWR         ;MASS8->MASS9
03A0 90011C          844                                             mov                     dptr,#MASS7
03A3 120000   F      845                     CALL            xCIKLWR         ;MASS7->MASS8
03A6 900118          846                     MOV       dptr,#MASS6
03A9 120000   F      847                     CALL       xCIKLWR         ; MASS6 --> MASS7
03AC 900114          848                     MOV        dptr,#MASS5
                     849                    
03AF 120000   F      850                    CALL        xCIKLWR        ; MASS5 --> MASS6
03B2 900110          851                    MOV         dptr,#MASS4
                     852                    
03B5 120000   F      853                    CALL        xCIKLWR        ; MASS4 --> MASS5
03B8 90010C          854                             mov                     dptr,#MASS3
                     855     
03BB 120000   F      856                    CALL             xCIKLWR         ;MASS3->MASS4
03BE 900108          857                     MOV        dptr,#MASS2
                     858                    
03C1 120000   F      859                    CALL        xCIKLWR         ; MASS2 --> MASS3
03C4 900104          860                    MOV         dptr,#MASS1
                     861                     
03C7 120000   F      862                   CALL         xCIKLWR        ; MASS1 --> MASS2
03CA 900100          863                    MOV         dptr,#MASS0
                     864                   
03CD 120000   F      865                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     866     
                     867                             
03D0 7862            868                             mov             r0,#rez_A
03D2 120000   F      869                             call    resar2          ;->r2..r5
                     870                                     ;call   aform
03D5 900100          871                                     mov                     dptr,#MASS0
03D8 120000   F      872                   call              saveIr2                 ; R2-R5 --> MAS0
                     873              
03DB 900107          874                   MOV          dptr,#MASS1+3
03DE 120000   F      875                   CALL       addx
03E1 90010B          876                   MOV          dptr,#MASS2+3
03E4 120000   F      877                   CALL       addx
03E7 90010F          878                   MOV          dptr,#MASS3+3
03EA 120000   F      879                  CALL        addx
03ED 900113          880                   MOV       dptr,#MASS4+3
03F0 120000   F      881                   call       addx
03F3 900117          882                     MOV        dptr,#MASS5+3
03F6 120000   F      883                  CALL        addx
03F9 90011B          884                   MOV          dptr,#MASS6+3
03FC 120000   F      885                   CALL       addx
03FF 90011F          886                   MOV          dptr,#MASS7+3
0402 120000   F      887                  CALL        addx
0405 900123          888                  MOV        dptr,#MASS8+3
0408 120000   F      889                   call       addx
040B 900127          890                     MOV                     dptr,#MASS9+3
040E 120000   F      891                  call        addx
0411 020000   F      892                              jmp            endsum
                     893     
0414 020000   F      894     rmas4:          jmp                     mas4
                     895     ;массив из 20-ти измерений
0417 B714FA          896     mas20:          cjne    @r1,#20,rmas4
041A 900148          897                                             mov                     dptr,#MASS18
041D 120000   F      898                     CALL            xCIKLWR         ;MASS18->MASS19
0420 900144          899                                             mov                     dptr,#MASS17
0423 120000   F      900                     CALL            xCIKLWR         ;MASS17->MASS18
0426 900140          901                     MOV       dptr,#MASS16
0429 120000   F      902                     CALL       xCIKLWR         ; MASS16 --> MASS17
042C 90013C          903                     MOV        dptr,#MASS15
                     904                    
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    15

042F 120000   F      905                    CALL        xCIKLWR        ; MASS15 --> MASS16
0432 900138          906                    MOV         dptr,#MASS14
                     907                    
0435 120000   F      908                    CALL        xCIKLWR        ; MASS14 --> MASS15
0438 900134          909                             mov                     dptr,#MASS13
                     910     
043B 120000   F      911                    CALL             xCIKLWR         ;MASS13->MASS14
043E 900130          912                     MOV        dptr,#MASS12
                     913                    
0441 120000   F      914                    CALL        xCIKLWR         ; MASS12 --> MASS13
0444 90012C          915                    MOV         dptr,#MASS11
                     916                     
0447 120000   F      917                   CALL         xCIKLWR        ; MASS11 --> MASS12
044A 900128          918                    MOV         dptr,#MASS10
                     919                   
044D 120000   F      920                    CALL        xCIKLWR        ; MASS10 --> MASS11
0450 900124          921                                      MOV       dptr,#MASS9
0453 120000   F      922                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     923     
0456 900120          924                                             mov                     dptr,#MASS8
0459 120000   F      925                     CALL            xCIKLWR         ;MASS8->MASS9
045C 90011C          926                                             mov                     dptr,#MASS7
045F 120000   F      927                     CALL            xCIKLWR         ;MASS7->MASS8
0462 900118          928                     MOV       dptr,#MASS6
0465 120000   F      929                     CALL       xCIKLWR         ; MASS6 --> MASS7
0468 900114          930                     MOV        dptr,#MASS5
                     931                    
046B 120000   F      932                    CALL        xCIKLWR        ; MASS5 --> MASS6
046E 900110          933                    MOV         dptr,#MASS4
                     934                    
0471 120000   F      935                    CALL        xCIKLWR        ; MASS4 --> MASS5
0474 90010C          936                             mov                     dptr,#MASS3
                     937     
0477 120000   F      938                    CALL             xCIKLWR         ;MASS3->MASS4
047A 900108          939                     MOV        dptr,#MASS2
                     940                    
047D 120000   F      941                    CALL        xCIKLWR         ; MASS2 --> MASS3
0480 900104          942                    MOV         dptr,#MASS1
                     943                     
0483 120000   F      944                   CALL         xCIKLWR        ; MASS1 --> MASS2
0486 900100          945                    MOV         dptr,#MASS0
                     946                   
0489 120000   F      947                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     948     
                     949                             
048C 7862            950                             mov             r0,#rez_A
048E 120000   F      951                             call    resar2          ;->r2..r5
                     952                                     ;call   aform
0491 900100          953                                     mov                     dptr,#MASS0
0494 120000   F      954                   call              saveIr2                 ; R2-R5 --> MAS0
                     955              
0497 900107          956                   MOV          dptr,#MASS1+3
049A 120000   F      957                   CALL       addx
049D 90010B          958                   MOV          dptr,#MASS2+3
04A0 120000   F      959                   CALL       addx
04A3 90010F          960                   MOV          dptr,#MASS3+3
04A6 120000   F      961                  CALL        addx
04A9 900113          962                   MOV       dptr,#MASS4+3
04AC 120000   F      963                   call       addx
04AF 900117          964                     MOV        dptr,#MASS5+3
04B2 120000   F      965                  CALL        addx
04B5 90011B          966                   MOV          dptr,#MASS6+3
04B8 120000   F      967                   CALL       addx
04BB 90011F          968                   MOV          dptr,#MASS7+3
04BE 120000   F      969                  CALL        addx
04C1 900123          970                  MOV        dptr,#MASS8+3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    16

04C4 120000   F      971                   call       addx
04C7 900127          972                     MOV                     dptr,#MASS9+3
04CA 120000   F      973                  call        addx
                     974     ;27
04CD 90012B          975                                     MOV        dptr,#MASS10+3
04D0 120000   F      976                   CALL       addx
04D3 90012F          977                                     MOV        dptr,#MASS11+3
04D6 120000   F      978                   CALL       addx
04D9 900133          979                   MOV          dptr,#MASS12+3
04DC 120000   F      980                   CALL       addx
04DF 900137          981                   MOV          dptr,#MASS13+3
04E2 120000   F      982                  CALL        addx
04E5 90013B          983                   MOV       dptr,#MASS14+3
04E8 120000   F      984                   call       addx
04EB 90013F          985                                     MOV        dptr,#MASS15+3
04EE 120000   F      986                     CALL     addx
04F1 900143          987                   MOV          dptr,#MASS16+3
04F4 120000   F      988                   CALL       addx
04F7 900147          989                   MOV          dptr,#MASS17+3
04FA 120000   F      990                  CALL        addx
04FD 90014B          991                  MOV        dptr,#MASS18+3
0500 120000   F      992                   call       addx
0503 90014F          993                                     MOV                     dptr,#MASS19+3
0506 120000   F      994                  call        addx
0509 802F            995                                     jmp             endsum
                     996     ;массив из 4х измерений
050B                 997     mas4:                   
050B 900108          998                                             MOV        dptr,#MASS2
050E 120000   F      999                    CALL        xCIKLWR         ; MASS2 --> MASS3
0511 900104         1000                    MOV         dptr,#MASS1
0514 120000   F     1001                    CALL        xCIKLWR        ; MASS1 --> MASS2
0517 900100         1002                    MOV         dptr,#MASS0
051A 120000   F     1003                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1004     
                    1005                             
051D 7862           1006                             mov             r0,#rez_A
051F 120000   F     1007                             call    resar2          ;->r2..r5
                    1008                                     ;call   aform
0522 900100         1009                                     mov                     dptr,#MASS0
0525 120000   F     1010                   call              saveIr2                 ; R2-R5 --> MAS0
                    1011              
0528 900107         1012                   MOV          dptr,#MASS1+3
052B 120000   F     1013                   CALL       addx
052E 90010B         1014                   MOV          dptr,#MASS2+3
0531 120000   F     1015                   CALL       addx
0534 90010F         1016                   MOV          dptr,#MASS3+3
0537 120000   F     1017                  CALL        addx
                    1018                  
                    1019             ;23.03          
053A                1020     endsum:
053A 786E           1021                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
053C 06             1022                                     inc             @r0
053D E6             1023                                     mov             a,@r0   
053E 200105         1024                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1025                                     
0541 B53F31         1026                                     cjne    a,chmasN,masx5
0544 D201           1027                                     setb    bitmas                  ;массив заполнен
0546 853F6E         1028     masfull:                mov             chmas,chmasN
0549 783F           1029                                     mov             r0,#chmasN
054B E6             1030                                     mov             a,@r0
                    1031     ;masfull:
054C B40208         1032                                     cjne    a,#2,nochn2
054F 900000   F     1033                                     MOV        DPTR,#ch2;10 
0552 120000   F     1034                                     CALL   ldc_ltemp                 ; ltemp <-- 2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    17

0555 8028           1035                                     jmp             mas5div
                    1036     
0557 B40A08         1037     nochn2:         cjne    a,#10,nochn10
055A 900000   F     1038                                                     MOV        DPTR,#ch10 
055D 120000   F     1039                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0560 801D           1040                                     jmp             mas5div
                    1041     
0562 B41408         1042     nochn10:        cjne    a,#20,nochn20
0565 900000   F     1043                                                     MOV        DPTR,#ch20 
0568 120000   F     1044                                     CALL   ldc_ltemp                 ; ltemp <-- 20
056B 8012           1045                                     jmp             mas5div
                    1046     
056D 900000   F     1047     nochn20:        MOV        DPTR,#ch4 
0570 120000   F     1048                                     CALL   ldc_ltemp                 ; ltemp <-- 4
0573 800A           1049                                     jmp             mas5div
                    1050     
0575 856E0B         1051     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
0578 E4             1052                                     clr     a
0579 F50A           1053                                     mov     ltemp+2,a
057B F509           1054                                     mov     ltemp+1,a
057D F508           1055                                     mov     ltemp,a
                    1056     
057F                1057     mas5div:
057F 120000   F     1058                                     CALL       zdiv;divide                           ; R2-R5 =
                    1059                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1060     
                    1061                             
                    1062      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1063     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1064     ;получен результат 3 байта и знак
0582 7866           1065                             mov             r0,#rez_A1
0584 120000   F     1066                             call    saver2           ;сохр среднее по массиву
                    1067     ;;8.11.06                       mov             chmasN,#0
                    1068      ;;;;;;;;;;;;
                    1069      ;;;;;;;;;;;;
0587 C3             1070                             clr             c
0588 799A           1071                             mov             r1,#parT
058A 7402           1072                             mov             a,#2
058C 97             1073                             subb    a,@r1
058D 501D           1074                             jnc             ankor           ;T<3
                    1075                             ;A-=РЕЗ1                                ;T>3
058F 120402         1076                             call    altof                   ;r2..r5->float
0592 785E           1077                             mov             r0,#rez_Ame
0594 120000   F     1078                             call    saver2
                    1079                             ;;;;
0597 7890           1080                             mov             r0,#koefKp;->r8..r11
0599 EA             1081                             mov             a,r2
059A 30E702         1082                             jnb             acc.7,nminus3
059D 7894           1083                             mov             r0,#koefKm;->r8..r11
059F 120000   F     1084     nminus3:                call    resar8
05A2 120203         1085                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05A5 785E           1086                             mov             r0,#rez_Ame
05A7 120000   F     1087                             call    saver2
05AA 8021           1088                             jmp             gotoKD
                    1089     
05AC                1090     ankor:  
05AC 7898           1091                             mov             r0,#chinkor
05AE E6             1092                             mov             a,@r0
05AF 30E703         1093                             jnb             acc.7,nokorr
                    1094                             ;коррекция 0
05B2 020000   F     1095                             jmp             kornul
05B5                1096     nokorr: 
                    1097                             ;mov            r10,#00         ;       chavt
                    1098                             ;mov            r11,#00h
05B5 7881           1099                             mov              r0,#chavt      
05B7 E6             1100                             mov                     a,@r0;call      chcmp           ;сравн счет
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    18

                             чик авто калибровки с 0h
05B8 30E737         1101                             jnb             acc.7,nonulavt;jnz              nonulavt        
05BB 750A00         1102                             mov             r10,#0;1;00;02          
05BE 750BC8         1103                             mov             r11,#0c8h;90h;0c8h;58h
05C1 7898           1104                             mov             r0,#chinkor
05C3 120000   F     1105                             call    chcmp
05C6 7045           1106                             jnz             noavk
                    1107                             ;автокалибровка
05C8 020000   F     1108                             jmp             autoka;noavk;
                    1109     
05CB 8079           1110     rafterK:                jmp             afterK
                    1111     ;;;;;;;;;;
05CD C3             1112      gotoKD:                clr             c
05CE 799A           1113                             mov             r1,#parT
05D0 7404           1114                             mov             a,#4
05D2 97             1115                             subb    a,@r1
05D3 50F6           1116                             jnc             rafterK         ;T<5
                    1117                             ;A1-=A- *KD                     ;T>5
                    1118                             ;call           findkoef                                ;r2,r3-hex
                    1119                             ;       call            rebyte2                         ;r2..r5- he
                             x
                    1120                                     
                    1121                             ;       call    altof                   ;r2..r5->float
                    1122                             ;       mov     dptr,#CHtho;100000
                    1123                             ;       call    ldc_ltemp                       ;r8..r11
                    1124                             ;       call    fldiv
                    1125                             ;       call    move28
                    1126                             
05D5 785E           1127                             mov             r0,#rez_Ame;->r2..r5   ???????????/
05D7 120000   F     1128                             call    resar2
                    1129                                     ;call   flmul
05DA 120343         1130                             call    ftol                    ;float->int
05DD 7866           1131                             mov             r0,#rez_A1
05DF 120000   F     1132                             call    saver2
05E2 786A           1133                             mov             r0,#rez_A0;->r8..r11 hex
05E4 120000   F     1134                             call    resar8
05E7 120000   F     1135                             call    lsub            ;A3=A-1-A0
05EA 789C           1136                             mov             r0,#rez_A3
05EC 120000   F     1137                             call    saver2
05EF 020000   F     1138                             jmp             labelB  
                    1139      ;;;;;;;;;;; 9.11.06
05F2 789A           1140     nonulavt:        mov            r0,#parT
05F4 E6             1141                             mov             a,@r0
05F5 6401           1142                             xrl             a,#01
05F7 700F           1143                             jnz             avtdec1
05F9 7982           1144                             mov             r1,#chavt+1     ;T=1 chavt-10
05FB 120000   F     1145                             call    tenmin
05FE 7999           1146     kordec10:       mov             r1,#chinkor+1
0600 120000   F     1147                             call    tenmin
0603 801E           1148                             jmp             rezmul
                    1149     
0605 020000   F     1150     rmo220:         jmp             mo220
                    1151     
0608 7981           1152     avtdec1:        mov             r1,#chavt       
060A 120000   F     1153                             call    chdec           ;chavt-1
                    1154     ;                       jmp             kordec1;rezmul
060D 789A           1155     noavk:          mov             r0,#parT
060F E6             1156                             mov             a,@r0
0610 6401           1157                             xrl             a,#01
0612 700A           1158                             jnz             kordec1
                    1159                             ;T=1 chinkor-10
0614 7999           1160                     mov             r1,#chinkor+1
0616 120000   F     1161                             call    tenmin
0619 8008           1162                             jmp             rezmul
                    1163     
061B 020000   F     1164     rnotestizm:             jmp                     notestizm
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    19

061E 7998           1165     kordec1:        mov             r1,#chinkor
0620 120000   F     1166                             call    chdec           ; chinkor-1
                    1167                        ;9.11.06
                    1168                             ;;;;;;;;;;;;;;
                    1169                             ;;;;;;;;;;;;;
                    1170     ;(РЕЗ1-АN)*K
0623                1171     rezmul:
0623 7866           1172                             mov             r0,#rez_A1;->r2..r5
0625 120000   F     1173                             call    resar2
0628 120402         1174                             call    altof   ;r2..r5->float  6.06    
062B 7884           1175                             mov             r0,#kor0_AN;->r8..r11
062D 120000   F     1176                             call    resar8
0630 1201D1         1177                             call    flsub
0633 7890           1178                             mov             r0,#koefKp;->r8..r11
0635 EA             1179                             mov             a,r2
0636 30E702         1180                             jnb             acc.7,nminus
                    1181                             ;jnb            bitznak,nminus
                    1182                     
0639 7894           1183                             mov             r0,#koefKm;->r8..r11
063B 120000   F     1184     nminus:         call    resar8
063E 120203         1185                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0641 785E           1186                             mov             r0,#rez_Ame
0643 120000   F     1187                             call    saver2
                    1188      
0646                1189     afterK:                 
                    1190     ;;;;;;;;;;;;;;
0646 EA             1191                                     mov             a,r2
0647 547F           1192                                     anl             a,#7fh
0649 FA             1193                                     mov             r2,a
064A 900000   F     1194                                     mov     dptr,#ch_250;220;220000
064D 120000   F     1195                                     call    ldc_ltemp                       ;r8..r11=8
0650 1201D6         1196                                     call    flcmp
0653 50B0           1197                                     jnc             rmo220          ;A>220000
                    1198                                     ;;;;;;;;;
0655 3015C3         1199                                     jnb                     biteizm,rnotestizm
0658 78B1           1200                                     mov                     r0,#vichR
065A B62155         1201                                     cjne            @r0,#21h,note21
065D 7A50           1202                                     mov                     r2,#50h                 ;-11a
065F 7B18           1203                                     mov                     r3,#18h                 ;k8
0661 12046C         1204                                     call            rebyte2                         ;r2..r5- he
                             x
0664 120402         1205                                     call            altof                   ;r2..r5->float
0667 C002           1206                                     push            rr2
0669 C003           1207                                     push            rr3
066B C004           1208                                     push            rr4
066D C005           1209                                     push            rr5
066F 7A50           1210                                     mov                     r2,#50h                 ;k10
0671 7B20           1211                                     mov                     r3,#20h
0673 12046C         1212     re11_7: call            rebyte2                 ;r2..r5
0676 120402         1213                                     call            altof                   ;r2..r5->float
0679 120000   F     1214                                     call            move28
067C D005           1215                                     pop                     rr5
067E D004           1216                                     pop                     rr4
0680 D003           1217                                     pop                     rr3
0682 D002           1218                                     pop                     rr2
0684 1202B7         1219                                     call            fldiv
                    1220                             ;       mov                     dptr,#ch_10
                    1221                             ;       call            ldc_ltemp                       ;r8..r11
                    1222                             ;       call            flmul
                    1223                                     ;;;;;2.02.07
0687 C002           1224                                     push            rr2
0689 C003           1225                                     push            rr3
068B C004           1226                                     push            rr4
068D C005           1227                                     push            rr5
068F 7A50           1228                                     mov                     r2,#50h                 ;-11a
0691 7B2C           1229                                     mov                     r3,#2ch                 ;Km
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    20

0693 12046C         1230                                     call            rebyte2                         ;r2..r5- he
                             x
0696 120402         1231                                     call            altof                   ;r2..r5->float
0699 120000   F     1232                                     call            move28
069C D005           1233                                     pop                     rr5
069E D004           1234                                     pop                     rr4
06A0 D003           1235                                     pop                     rr3
06A2 D002           1236                                     pop                     rr2
06A4 120203         1237                                     call            flmul                           ;*Km
06A7 900000   F     1238                                     mov     dptr,#CHtho;100000
06AA 120000   F     1239                                     call    ldc_ltemp                       ;r8..r11=8
06AD 1202B7         1240                                     call    fldiv
                    1241                                     ;;;;;
06B0 8050           1242                                     jmp                     temul   
06B2 B62218         1243     note21: cjne            @r0,#22h,note22
06B5 7A50           1244                                     mov                     r2,#50h                 ;-09a
06B7 7B10           1245                                     mov                     r3,#10h                 ;k6
06B9 12046C         1246                                     call            rebyte2                         ;r2..r5- he
                             x
06BC 120402         1247                                     call            altof                   ;r2..r5->float
06BF C002           1248                                     push            rr2
06C1 C003           1249                                     push            rr3
06C3 C004           1250                                     push            rr4
06C5 C005           1251                                     push            rr5
06C7 7A50           1252                                     mov                     r2,#50h                 ;k8
06C9 7B18           1253                                     mov                     r3,#18h
06CB 80A6           1254                                     jmp                     re11_7
06CD 7A50           1255     note22: mov                     r2,#50h                 ;-7a
06CF 7B08           1256                                     mov                     r3,#08h                 ;k4
06D1 12046C         1257                                     call            rebyte2                         ;r2..r5- he
                             x
06D4 120402         1258                                     call            altof                   ;r2..r5->float
06D7 C002           1259                                     push            rr2
06D9 C003           1260                                     push            rr3
06DB C004           1261                                     push            rr4
06DD C005           1262                                     push            rr5
06DF 7A50           1263                                     mov                     r2,#50h                 ;k6
06E1 7B10           1264                                     mov                     r3,#10h
06E3 808E           1265                                     jmp                     re11_7  
                    1266                                     ;;;;;;;;;
06E5                1267     notestizm:
06E5 301208         1268                                     jnb             bitklb,komulpz
06E8 900000   F     1269                                     mov     dptr,#chk;100000
06EB 120000   F     1270                                     call    ldc_long                        ;r2..r5
06EE 8006           1271                                     jmp             komul
06F0 120000   F     1272     komulpz:call            findkoef                                ;r2,r3-hex
06F3 12046C         1273                                     call            rebyte2                         ;r2..r5- he
                             x
                    1274                                     
06F6 120402         1275     komul:  call    altof                   ;r2..r5->float
06F9 900000   F     1276                                     mov     dptr,#CHtho;100000
06FC 120000   F     1277                             call    ldc_ltemp                       ;r8..r11=8
06FF 1202B7         1278                                     call    fldiv
0702 120000   F     1279     temul:                          call    move28
0705 785E           1280                                     mov             r0,#rez_Ame
0707 120000   F     1281                                     call    resar2
                    1282                     
070A 120203         1283                                     call    flmul     ;A1-=A-*KD  fl
                    1284                                     
070D 120343         1285                                     call    ftol                    ;float->int
0710 7866           1286                                     mov             r0,#rez_A1
0712 120000   F     1287                                     call    saver2
0715 120402         1288                                     call    altof                   ;r2..r5->float
0718 900000   F     1289                                     mov     dptr,#ch_220;200;200000
071B 120000   F     1290                                     call    ldc_ltemp                       ;r8..r11=8
071E 1201D6         1291                                     call    flcmp
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    21

0721 502D           1292                                     jnc             rrmo220         ;A>200000
                    1293                             ;       jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
                    1294                             ;       jb              bitavp,yesavp
0723 301808         1295                                     jnb             knizm,goA2
0726 300602         1296                                     jnb             bitvi11,qu_avp
0729 8003           1297                                     jmp             goA2
072B 20052F         1298     qu_avp:                 jb              bitavp,yesavp
072E                1299     noavp:  ;               jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
072E                1300     goA2:                    ;A2=A1-
072E 7866           1301                                      mov            r0,#rez_A1
0730 120000   F     1302                                     call    resar2
0733 787B           1303                                     mov             r0,#rez_A2
0735 120000   F     1304                                     call    saver2
0738                1305     goA3A2:                  ;A3=A2-A0
0738 786A           1306                                       mov           r0,#rez_A0
073A 120000   F     1307                                     call    resar8
073D 120000   F     1308                                     call    lsub
0740 789C           1309                                     mov             r0,#rez_A3
0742 120000   F     1310                                     call    saver2
                    1311                                     ;;;;;;
0745 200644         1312                                     jb              bitvi11,yesvich
0748                1313     goonin:            ;jmp         goonind;indA3;8.11.06
0748 78AC           1314                                     mov             r0,#chind
074A B60006         1315                                     cjne    @r0,#0,rnochi0
074D 020000   F     1316                                     jmp             goonind;indA3
                    1317     
0750 020000   F     1318     rrmo220:                jmp             mo220
0753 020000   F     1319     rnochi0:                jmp             nochi0
0756 7866           1320     gokaA2:                 mov             r0,#rez_A1                      ;(float)
0758 120000   F     1321                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
075B 80D1           1322                                             jmp             goA2
                    1323     ;;;;;;;;;;;;;;;;
075D EA             1324     yesavp:                 mov             a,r2
075E 547F           1325                                     anl             a,#7fh
0760 FA             1326                                     mov             r2,a
0761 900000   F     1327                                     mov     dptr,#ch_10th;10000
0764 120000   F     1328                                     call    ldc_ltemp                       ;r8..r11=8
0767 1201D6         1329                                     call    flcmp
076A 50C2           1330                                     jnc             noavp           ;A>10000        
076C 78AE           1331                                     mov             r0,#diap                ;10-11
076E B60902         1332                                     cjne    @r0,#9,avpgo
0771 80BB           1333                                     jmp             noavp
0773                1334     avpgo:                  
0773 06             1335                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
0774 B60A01         1336                                     cjne    @r0,#0ah,clmasv
0777 16             1337                                     dec             @r0
0778                1338     clmasv:         ;сбросить массив
0778 120000   F     1339                             call    loadUS
                    1340                             ;call   louizm
077B 120000   F     1341                             call     clmassix
077E 78B3           1342                                     mov             r0,#summa
0780 120000   F     1343                                     call    clear4
0783 786A           1344                                     mov             r0,#rez_A0
0785 120000   F     1345                                     call    clear4
0788 D207           1346                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
078A 80BC           1347                                jmp     goonin
                    1348     
078C                1349     yesvich:        
                    1350                     ;                       mov             r0,#konstB
                    1351                     ;               call    resar2
                    1352                     ;               call    move28
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    22

078C 789C           1353                                     mov             r0,#rez_A3;A1
078E 120000   F     1354                                     call    resar2                          ;HEX
                    1355                                     
0791 120402         1356                                     call            altof                   ;r2..r5->float
0794 EA             1357                                     mov             a,r2                    ;модуль
0795 547F           1358                                     anl             a,#7fh
0797 FA             1359                                     mov             r2,a
                    1360                     ;               call            fladd                           ;A1+B
                    1361                                     
0798 900000   F     1362                                     mov     dptr,#CH_500;
079B 120000   F     1363                                     call    ldc_ltemp                       ;r8..r11
079E 1201D6         1364                                     call    flcmp
07A1 4073           1365                                     jc                      mo500R;error <500 >22000
07A3 900000   F     1366                                     mov     dptr,#CH_22T;
07A6 120000   F     1367                                     call    ldc_ltemp                       ;r8..r11
07A9 1201D6         1368                                     call    flcmp
07AC 5074           1369                                     jnc             mo500I          ;error
                    1370                                     ;;;;;;;;;;;;
07AE 120000   F     1371                                     call            move28
07B1 C008           1372                                     push            r8
07B3 C009           1373                                     push            r9
07B5 C00A           1374                                     push            r10
07B7 C00B           1375                                     push            r11
07B9 78BC           1376                                     mov             r0,#konstA
07BB 120000   F     1377                                     call    resar2
07BE 900000   F     1378                                     mov             dptr,#CH_B
07C1 120000   F     1379                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
07C4 120203         1380                                     call            flmul                           ;A*10-7
07C7 D00B           1381                                     pop                     r11
07C9 D00A           1382                                     pop                     r10
07CB D009           1383                                     pop                     r9
07CD D008           1384                                     pop                     r8
07CF 1202B7         1385                                     call            fldiv                   ;результат R
07D2 78C9           1386                                     mov                     r0,#rez_R
07D4 120000   F     1387                                     call            saver2
07D7 120343         1388                                     call            ftol                    ;float->hex
                    1389                                     ;;;;;;;;;;
07DA 784F           1390                                             mov             r0,#abin
07DC 120000   F     1391                                             call    saver2
                    1392     ;;;;;;;;
07DF 7840           1393                                                     mov             r0,#bufind
07E1                1394     age9:
07E1 7620           1395                             mov             @r0,#" "          ;погасить индикатор
07E3 08             1396                             inc             r0
07E4 B84BFA         1397                             cjne    r0,#bufind+11,age9
                    1398                                             
07E7 78C9           1399                                             mov             r0,#rez_R
07E9 120000   F     1400                                             call            resar2
                    1401     ;;;;;;;;;;
07EC 900000   F     1402                                     mov             dptr,#CH_fl
07EF 120000   F     1403                                     CALL   ldc_ltemp
07F2 1202B7         1404                                     call            fldiv
                    1405     
07F5 78B8           1406                                     mov             r0,#work                ;степень +
07F7 7600           1407                                     mov             @r0,#0
07F9 78B9           1408                                     mov             r0,#work+1;степень -
07FB 7600           1409                                     mov             @r0,#0
07FD 900000   F     1410     compa1: mov     dptr,#ch_1;
0800 120000   F     1411                                     call    ldc_ltemp                       ;r8..r11
0803 1201D6         1412                                     call    flcmp
0806 4026           1413                                     jc              equ0            ;<1
0808 78B8           1414                                     mov             r0,#work                        ;степень +
080A 06             1415                                     inc             @r0
080B 900000   F     1416                                     mov             dptr,#ch_10;
080E 120000   F     1417                                     call    ldc_ltemp                       ;r8..r11
0811 1202B7         1418                                     call            fldiv
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    23

0814 80E7           1419                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1420                                     ;;;;;;;;;;;;;;;;;;;
0816 900000   F     1421     mo500R: mov             dptr,#teOLR
0819 120000   F     1422                               call          lotext           
081C 120000   F     1423                                     call            ind
081F 020000   F     1424                                     jmp                     nobavp;nobitizm
0822 900000   F     1425     mo500I: mov             dptr,#teOLI
0825 120000   F     1426                               call          lotext           
0828 120000   F     1427                                     call            ind
082B 020000   F     1428                                     jmp                     nobavp;nobitizm
082E                1429     equ0:           ;;;;;   call            ftol                    ;float->int
082E 78B8           1430                                     mov             r0,#work                ;степень +
0830 B60019         1431                                     cjne    @r0,#0,equ00
                    1432                                     
0833 900000   F     1433     compa2: mov     dptr,#ch_1;
0836 120000   F     1434                                     call    ldc_ltemp                       ;r8..r11
0839 1201D6         1435                                     call    flcmp
083C 500E           1436                                     jnc             equ00           ;>1
083E 78B9           1437                                     mov             r0,#work+1                      ;степень -
0840 16             1438                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
0841 900000   F     1439                                     mov             dptr,#ch_10;
0844 120000   F     1440                                     call    ldc_ltemp                       ;r8..r11
0847 120203         1441                                     call            flmul
084A 80E7           1442                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1443     
                    1444     
084C                1445     equ00:          
084C 7853           1446                                                     mov             r0,#adec
084E 7952           1447                                             mov             r1,#abin+3      ;hex->10
0850 120000   F     1448                                             call    bindec
                    1449     
                    1450                                                     ;если степень полож убирать младший байт
                    1451                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1452                                                     ;число в bufind..bufind+5
0853 78B8           1453                                             mov             r0,#work
0855 B60021         1454                                             cjne    @r0,#0,outr
0858 08             1455                                             inc             r0                      ;work+1
0859 B6FF05         1456                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
085C 06             1457                                             inc                     @r0;!!!!!!!!!?
085D 785B           1458                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
085F 8003           1459                                             jmp                     bufr30
                    1460                                             ;;;;;;;;;;;;;;
0861 06             1461     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
0862 785C           1462                                                     mov             r0,#adec+9
0864 7945           1463     bufr30:         mov             r1,#bufind+5;6
0866 7F05           1464                                             mov             r7,#5;7
0868 E6             1465     bufr2:                          mov             a,@r0
0869 2430           1466                                             add             a,#30h
086B F7             1467                                             mov             @r1,a
086C 19             1468                                             dec             r1
086D 18             1469                                             dec             r0
086E DFF8           1470                                             djnz    r7,bufr2
                    1471     
0870 784F           1472                                             mov             r0,#abin
0872 120000   F     1473                                             call            clear4
0875 78B9           1474                                             mov             r0,#work+1
0877 801C           1475                                     jmp             outr5
                    1476     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
0879 785C           1477     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    24

087B C3             1478                                             clr             c
087C 79B8           1479                                             mov             r1,#work
087E E8             1480                                             mov             a,r0
087F 14             1481                                             dec             a                                  
                                  ;n-1
0880 97             1482                                             subb    a,@r1
0881 F8             1483                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
0882 7945           1484                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
0884 7F05           1485                                             mov             r7,#5;7
0886 E6             1486     bufr:                           mov             a,@r0
0887 2430           1487                                             add             a,#30h
0889 F7             1488                                             mov             @r1,a
088A 19             1489                                             dec             r1
088B 18             1490                                             dec             r0
088C DFF8           1491                                             djnz    r7,bufr
                    1492     
088E 784F           1493                                             mov             r0,#abin
0890 120000   F     1494                                             call            clear4
0893 78B8           1495                                     mov             r0,#work
0895 E6             1496     outr5:                  mov             a,@r0
0896 F552           1497                                             mov             abin+3,a
                    1498                                                                     ;n(hex)->abin
0898 120000   F     1499                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
089B 2552           1500                                             add             a,abin+3
089D F552           1501                                             mov             abin+3,a
089F 7853           1502                                             mov             r0,#adec
08A1 7952           1503                                             mov             r1,#abin+3      ;hex->10
08A3 120000   F     1504                                             call    bindec
08A6 855C48         1505                                             mov             bufind+8,adec+9
08A9 855B47         1506                                             mov             bufind+7,adec+8
08AC 754966         1507                                             mov             bufind+9,#66h
08AF 020000   F     1508                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1509                                             
                    1510                                     ;;;;;;;;;;;;;;;;;;;;;
                    1511     ;;;;;;;;;;;;;
                    1512     
08B2 300508         1513     mo220:             jnb          bitavp,indoll
08B5 301805         1514                                jnb          knizm,indoll;bitizm,indoll
08B8 78AE           1515                                     mov             r0,#diap
08BA B6000B         1516                                     cjne    @r0,#0,nodi2
                    1517                                ;10-2
08BD 900000   F     1518     indoll:                 mov             dptr,#teOLL;OLL
08C0 120000   F     1519                                     call    lotext
08C3 D217           1520                                     setb    bitoll
08C5 020000   F     1521                                     jmp             goonin  
                    1522     
08C8 16             1523     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1524     
08C9 B6FF01         1525                                     cjne    @r0,#0ffh,nodi9
08CC 06             1526                                     inc             @r0
                    1527     
08CD 120000   F     1528     nodi9:          call    loadUS
                    1529                                     ;call   louizm
                    1530                                     ;сбросить массив
08D0 120000   F     1531                                     call     clmassix
08D3 78B3           1532                                     mov             r0,#summa
08D5 120000   F     1533                                     call    clear4
08D8 786A           1534                                     mov             r0,#rez_A0
08DA 120000   F     1535                                     call    clear4  
08DD D207           1536                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
08DF 020000   F     1537                                jmp     goonin
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    25

                    1538     
08E2 16             1539     nochi0:                 dec             @r0                     ;СТИ-1
08E3 020000   F     1540                                     jmp             labelB  
                    1541     
                    1542             
                    1543     ;;;;;;;;;;;;;;;
                    1544     
08E6                1545     nop3_0: ;;      ;rez_A-rez_A0
                    1546                     ;;                      mov             r0,#rez_A0
                    1547                     ;;                      call    resar8
                    1548                     ;;                      call    lsub
                    1549                     ;;                      mov             r0,#rez_A
                    1550                     ;;;                     call    saver2
                    1551      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
08E6 789C           1552      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
08E8 120000   F     1553                                             call    resar2
08EB 900000   F     1554                                             mov             dptr,#ch100              
08EE 120000   F     1555                                             call    ldc_ltemp        
08F1 120000   F     1556                                             call    zdiv            ;rez_A3/100=r2..r5
                    1557                                     
08F4 EC             1558                                             mov             a,r4
08F5 20E71E         1559                                             jb              acc.7,aless0
08F8 4408           1560                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
08FA F5D3           1561                                             mov             DAC0H,a
                    1562                                                                             ;мл байт
08FC ED             1563                                             mov             a,r5
08FD F5D2           1564                                             mov             DAC0L,a
08FF 801E           1565                                             jmp             moveA3;
                    1566     
0901 B70207         1567     no3parN:                        cjne    @r1,#2,no2parN
                    1568                                             ;в байт 0  записать пробел
0904 7946           1569                                             mov             r1,#bufind+6
0906 7720           1570                                             mov             @r1,#" ";0fdh;
0908 020000   F     1571                                             jmp             seeind;moveA3
                    1572     
090B                1573     no2parN:                        ;в байты 0 и 1 записать пробел
090B 7945           1574                                             mov             r1,#bufind+5
090D 7720           1575                                             mov             @r1,#" ";0fdh;" "
090F 09             1576                                             inc             r1
0910 7720           1577                                             mov             @r1,#" ";0fdh;" "
0912 8079           1578                                             jmp             seeind;moveA3
0914 8077           1579      rseeind:               jmp             seeind
0916 F4             1580     aless0:                         cpl             a
0917 54F7           1581                                             anl             a,#0f7h         ;d11=0
0919 F5D3           1582                                             mov             DAC0H,a
                    1583                                                                             ;мл байт
091B ED             1584                                             mov             a,r5
091C F4             1585                                             cpl             a
091D F5D2           1586                                             mov             DAC0L,a
091F                1587     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1588                                     
                    1589                                             
091F                1590     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1591                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1592                     ;до конца цикла измерения результат не размещать в буфере
                    1593                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1594                     ;и возврату в режим измерения
091F 201456         1595                                             jb              bitvich,rnorvich
0922 201053         1596                                             jb              bitt2,rnorvich
0925 2017EC         1597                                             jb              bitoll,rseeind
                    1598                                             
0928 2011E9         1599                                             jb              bitmenu,rseeind
092B 200BE6         1600                                             jb              bitmem,rseeind
                    1601     ;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    26

                    1602                                             ; mov           r0,#rez_A3
                    1603                                             ;call   resar2
                    1604                                             ;call   ftol                    ;float->int r2..r5
                    1605     ;;;;;;;;
092E 789C           1606                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
0930 120000   F     1607                                             call    resar2;????????????????17.01.07
                    1608                                     
0933 120000   F     1609                                             call    maform
0936 784F           1610                                             mov             r0,#abin
0938 120000   F     1611                                             call    saver2
                    1612     ;;;;;;;;
                    1613                                             
093B 7853           1614                                             mov             r0,#adec
093D 7952           1615                                             mov             r1,#abin+3      ;hex->10
093F 120000   F     1616                                             call    bindec
                    1617                                     
0942 785C           1618                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0944 7946           1619                                             mov             r1,#bufind+6
0946 7F07           1620                                             mov             r7,#7
0948 E6             1621     bufdec:                         mov             a,@r0
0949 2430           1622                                             add             a,#30h
094B F7             1623                                             mov             @r1,a
094C 19             1624                                             dec             r1
094D 18             1625                                             dec             r0
094E DFF8           1626                                             djnz    r7,bufdec
0950 7847           1627                                             mov             r0,#bufind+7
0952 762D           1628                                             mov             @r0,#2dh          ;-2..-9
0954 7840           1629                                             mov             r0,#bufind
0956 762B           1630                                             mov             @r0,#2bh
0958 300202         1631                                             jnb             znmat,nozzmi;bitznak,nozzmi
095B 762D           1632                                             mov             @r0,#2dh
095D 79AE           1633     nozzmi:                         mov             r1,#diap
095F 7848           1634                                             mov             r0,#bufind+8
0961 E7             1635                                             mov             a,@r1
0962 B40808         1636                                             cjne    a,#8,nodi8
0965 7630           1637                                             mov             @r0,#30h                 ;10-10
0967 18             1638                                             dec             r0
0968 7663           1639                                             mov             @r0,#63h;31h
096A 08             1640                                             inc             r0
096B 8012           1641                                             jmp             seegoon
096D B4090C         1642     nodi8:                          cjne    a,#9,nodis9
                    1643                                     
0970 7631           1644                                             mov             @r0,#31h           ;10-11
0972 18             1645                                             dec             r0
0973 7663           1646                                             mov             @r0,#63h;31h
                    1647                                     
0975 08             1648                                             inc             r0
0976 8007           1649                                             jmp             seegoon
                    1650     
0978 807C           1651     rnorvich:               jmp             norvich
097A 8085           1652     rno3parN:               jmp             no3parN
                    1653     
097C 2432           1654     nodis9:                         add             a,#32h
097E F6             1655                                             mov             @r0,a;#37h;"T";
097F 08             1656     seegoon:                        inc             r0
0980 7641           1657                                             mov             @r0,#"A";"E";
0982 08             1658                                             inc             r0
0983 7600           1659                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
0985 08             1660                                             inc             r0;             mov             buf
                             ind+11
0986 7610           1661                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
                    1662                                             
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    27

                    1663     ;;;;;;;;;;;;;;;
                    1664     ;;;;;;goonind:
0988 79AF           1665                                             mov             r1,#parN        ; ??????
098A B703ED         1666                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1667             
098D                1668     seeind:                         ;;;;;;;;;;;;;
098D 784A           1669                                             mov             r0,#bufind+10
098F E6             1670                                             mov             a,@r0
0990 300F03         1671                                             jnb             bitnul,nnnul
0993 4408           1672                                             orl             a,#08h
0995 F6             1673                                             mov             @r0,a
0996 799A           1674      nnnul:                         mov             r1,#parT
0998 B70304         1675                                             cjne    @r1,#3,nsec01
099B 4410           1676                                             orl             a,#10h
099D 800C           1677                                             jmp             nsec10   ;0,1s
099F B70204         1678      nsec01:                        cjne    @r1,#2,nsec1
09A2 4420           1679                                             orl             a,#20h    ;1s
09A4 8005           1680                                             jmp             nsec10
09A6 B70102         1681     nsec1:                          cjne    @r1,#1,nsec10
09A9 4440           1682                                             orl             a,#40h
                    1683     
                    1684     ;;;;;;;;;;;;;;;;
09AB 784A           1685     nsec10:                 mov             r0,#bufind+10   
09AD F6             1686                                             mov             @r0,a
09AE 300504         1687                                             jnb             bitavp,nobavp
09B1 4404           1688                                             orl             a,#04           ;bufind+10.2
09B3 F6             1689                                             mov             @r0,a
09B4 F6             1690                                             mov             @r0,a   
09B5 784A           1691     nobavp:         mov             r0,#bufind+10   
09B7 F6             1692                                             mov             @r0,a   
09B8 301803         1693                                        jnb          knizm,nobitizm
09BB 4402           1694                                             orl             a,#02
09BD F6             1695                                              mov            @r0,a
09BE                1696     nobitizm:                       
09BE 301A07         1697                                             jnb             bitakt,notakt
09C1 C21A           1698                                             clr             bitakt
09C3 534AFE         1699                                             anl             bufind+10,#0feh
09C6 8005           1700                                             jmp             taktind
09C8 D21A           1701     notakt:                         setb    bitakt
09CA 434A01         1702                                             orl             bufind+10,#01                      
                                          
09CD                1703     taktind:                
                    1704     ;;;;;;;;;
09CD 301517         1705                                             jnb             biteizm,yesind
09D0 79B1           1706                                             mov             r1,#vichR
09D2 7848           1707                                             mov             r0,#bufind+8
09D4 7654           1708                                             mov             @r0,#'T'
09D6 08             1709                                             inc             r0
09D7 B72104         1710                                             cjne    @r1,#21h,test9i
09DA 7631           1711                                             mov             @r0,#31h;11A
                    1712                                     ;       dec             r0
                    1713                                     ;       mov             @r0,#63h
09DC 8009           1714                                             jmp             yesind
09DE B72204         1715     test9i:         cjne    @r1,#22h,test7i
09E1 7632           1716                                             mov             @r0,#32h;39h;09A
09E3 8002           1717                                             jmp             yesind
09E5 7633           1718     test7i:         mov             @r0,#33h;37h;07A
                    1719     ;;;;;;;;;
09E7                1720     yesind:         
09E7 301203         1721                                             jnb             bitklb,noklb
09EA 434A80         1722                                             orl             bufind+10,#80h; on kmp
09ED 300A03         1723     noklb:          jnb             bitbon,nobuf
09F0 434B02         1724                                             orl             bufind+11,#02h; on pysk
09F3 120000   F     1725     nobuf:          call    ind        ;пп выдачи на индикатор
09F6                1726     norvich: 
09F6 789A           1727                                     mov             r0,# parT
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    28

09F8 79AC           1728                                             mov             r1,#chind
09FA B60152         1729                                             cjne    @r0,#1,rnot1in
09FD                1730     labelB:                    ;;;;;;;;;;;
                    1731                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
09FD 789F           1732                                                     mov     r0,#rez_A3+3
                    1733                             ;;;;;;;;
09FF 79BB           1734                             mov             r1,#work+3
0A01 E6             1735                             mov             a,@r0
0A02 7F07           1736                             mov             r7,#7;кол сдв вправо
0A04 C3             1737     dvig3:          clr             c
0A05 13             1738                             rrc             a
0A06 DFFC           1739                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A08 FA             1740                             mov             r2,a    ;сохр байт
0A09 18             1741                             dec             r0              ;rez_A3+2
0A0A E6             1742                             mov             a,@r0
0A0B C0E0           1743                             push    acc
0A0D C3             1744                             clr             c
0A0E 7F01           1745                             mov             r7,#1
0A10 C3             1746     dvig2:          clr             c
0A11 33             1747                             rlc             a
0A12 DFFC           1748                             djnz    r7,dvig2 ;d12..d11       средний байт
0A14 4A             1749                             orl             a,r2
0A15 F7             1750                             mov             @r1,a;сформ мл байт
0A16 19             1751                             dec             r1
0A17 D0E0           1752                             pop             acc
                    1753                             
0A19 7F07           1754                             mov             r7,#7
0A1B C3             1755     dvig1:          clr             c
0A1C 13             1756                             rrc             a
0A1D DFFC           1757                             djnz    r7,dvig1 ;d18     ср байт
0A1F FA             1758                             mov             r2,a   ;сохр
0A20 18             1759                             dec             r0
0A21 E6             1760                             mov             a,@r0 ;rez_A3+1
0A22 C0E0           1761                             push    acc
                    1762                     
0A24 7F01           1763                             mov             r7,#1
0A26 C3             1764     dvig0:          clr             c
0A27 33             1765                             rlc             a
0A28 DFFC           1766                             djnz    r7,dvig0 ;        d21..d16
0A2A 4A             1767                             orl             a,r2
0A2B F7             1768                             mov             @r1,a   ; сформ средний  байт
0A2C 19             1769                             dec             r1
0A2D D0E0           1770                             pop             acc       ;rez_A3+1
                    1771                             ;;;;;;;;;;;;;;
                    1772     ;                       jb              acc.7,dvm
0A2F C3             1773                             clr             c
0A30 7F07           1774                             mov             r7,#7
0A32 C3             1775     dvig4:          clr             c
0A33 13             1776                             rrc             a
0A34 DFFC           1777                             djnz    r7,dvig4 ;        d22
0A36 FA             1778                             mov             r2,a   ;сохр
0A37 18             1779                             dec             r0;     rez_A3
0A38 E6             1780                             mov             a,@r0
                    1781                             ;;;;;
0A39 7F01           1782                             mov             r7,#1
0A3B C3             1783     vig0:           clr             c
0A3C 33             1784                             rlc             a
0A3D DFFC           1785                             djnz    r7,vig0 ;         d24..d30
0A3F 4A             1786                             orl             a,r2
0A40 F7             1787                             mov             @r1,a   ; сформ   байт
0A41 19             1788                             dec             r1
0A42 E6             1789                             mov             a,@r0
                    1790                             ;;;;;
0A43 20E70C         1791                             jb              acc.7,dvm
0A46 C3             1792                             clr             c
0A47 7F07           1793                             mov             r7,#7
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    29

0A49 C3             1794     vig4:           clr             c
0A4A 13             1795                             rrc             a
0A4B DFFC           1796                             djnz    r7,vig4 ;         d
0A4D 8009           1797                             jmp             endsdv
                    1798     
0A4F 020000   F     1799     rnot1in:                jmp             not1in
                    1800     
                    1801     ;;;;;;;;;;;;                                    
0A52 7F07           1802     dvm:            mov             r7,#7
0A54 D3             1803     dvig6:          setb            c
0A55 13             1804                             rrc             a
0A56 DFFC           1805                             djnz    r7,dvig6 ;        d31
0A58 F7             1806     endsdv:         mov             @r1,a
                    1807                                                             
                    1808      ;->work   
                    1809                             
0A59 900000   F     1810                             mov             dptr,#chzap
0A5C 120000   F     1811                             call     ldc_long
0A5F 78BB           1812                              mov            r0,#work+3
0A61 120000   F     1813                             call    ladd
0A64 ED             1814                             mov             a,r5
0A65 F5D5           1815                             mov             DAC1L,a
                    1816                             
0A67 EC             1817                             mov             a,r4
0A68 F5D6           1818                             mov             DAC1H,a
                    1819     
                    1820                                             ;;;;;;;;;;
0A6A 78CF           1821                                             mov                     r0,#chbuf       
0A6C 120000   F     1822                                             call            resar2  
0A6F 900000   F     1823                                             mov                     dptr,#ch_1       
0A72 120000   F     1824                                             call            ldc_ltemp
0A75 1201D1         1825                                             call            flsub
0A78 78CF           1826                                             mov                     r0,#chbuf       
0A7A 120000   F     1827                                             call            saver2  
0A7D 900000   F     1828                                             mov                     dptr,#ch_1
0A80 120000   F     1829                                             call            ldc_ltemp
0A83 1201D6         1830                                             call            flcmp
                    1831                                             
                    1832                                             
                    1833                                             
0A86 506B           1834                                             jnc                     nobuf0
0A88 200905         1835                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0A8B 200A04         1836                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0A8E 8053           1837                                             jmp             gocikle
                    1838     
0A90                1839     yesprd: ;передать   A3 в буфер
0A90 8017           1840                                             jmp             goonT
0A92                1841     yesbuf:         ;записать   A3 в буфер
0A92 120000   F     1842                                             call            resa_hl;dptr-
0A95 120000   F     1843                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1844                                                                             ;в ячейке saven_bl
0A98 120000   F     1845                                             call            save_hl
                    1846                                             ;строб
0A9B E586           1847                                                     mov             a,P6            ;p6.4=0
0A9D 54EF           1848                             anl             a,#0efh
0A9F F586           1849                             mov             P6,a
0AA1 00             1850                             nop
0AA2 00             1851                             nop
                    1852                                     
0AA3 E586           1853                             mov             a,P6                    ;p6.4=1 
0AA5 4410           1854                             orl             a,#10h
0AA7 F586           1855                             mov             P6,a                        
0AA9 78CD           1856     goonT:                          mov             r0,#interva;high  byte loadr2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    30

0AAB E6             1857                                             mov             a,@r0
0AAC FC             1858                                             mov             r4,a
0AAD 08             1859                                             inc             r0
0AAE E6             1860                                             mov             a,@r0
0AAF FD             1861                                             mov             r5,a
0AB0 E4             1862                                             clr             a
0AB1 FB             1863                                             mov             r3,a
0AB2 FA             1864                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
0AB3 120402         1865                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1866     
0AB6 789A           1867                                                                             mov             r0,
                             #parT
0AB8 B60110         1868                                                                     cjne    @r0,#1,nott1
                    1869                                     
0ABB 900000   F     1870                                     mov                     dptr,#ch_2       
0ABE 120000   F     1871                                     call            ldc_ltemp
0AC1 120203         1872     intmul: call            flmul
0AC4 78CF           1873                                     mov                     r0,#chbuf
0AC6 120000   F     1874                                     call            saver2          ;*2
0AC9 8018           1875                                     jmp             gocikle
                    1876     
0ACB B60208         1877     nott1:                  cjne    @r0,#2,nott2
0ACE 900000   F     1878                                                     mov                     dptr,#ch_10      
0AD1 120000   F     1879                                     call            ldc_ltemp
0AD4 80EB           1880                                     jmp                     intmul                             
                                  ;*10
                    1881     
0AD6 B60502         1882     nott2:                  cjne    @r0,#5,nott5
                    1883     
0AD9 8008           1884                                             jmp             gocikle
                    1885     
0ADB C3             1886     nott5:           clr            c
0ADC 799A           1887                             mov             r1,#parT
0ADE 7404           1888                             mov             a,#4
0AE0 97             1889                             subb    a,@r1
0AE1 500E           1890                             jnc             yestt5          ;T<5
0AE3 300708         1891     gocikle:        jnb             bitzus,nofz;bitbuf,nofz                                 
0AE6 120000   F     1892                             call    z_05s    ;0,5c
0AE9 120000   F     1893                             call    z_05s    ;0,5c
0AEC C207           1894                             clr     bitzus;bitbuf бит задержки засылки us
0AEE 020000   F     1895     nofz:           jmp     labelA;rebyte
                    1896     
                    1897     
0AF1 80F0           1898     yestt5:         jmp             gocikle
                    1899     
0AF3 78CF           1900     nobuf0:                         mov             r0,#chbuf
0AF5 120000   F     1901                                                             call            resar2
0AF8 900000   F     1902                                                                     mov                     dpt
                             r,#ch_1       
0AFB 120000   F     1903                                     call            ldc_ltemp
0AFE 1201D1         1904                                     call            flsub
0B01 80E0           1905                                             jmp             gocikle
                    1906     
                    1907     
0B03 B60205         1908     not1in:                         cjne    @r0,#2,not2in
0B06 7701           1909                                             mov             @r1,#1           ;T=2
0B08 020000   F     1910                                             jmp     labelB
                    1911     
0B0B B60305         1912     not2in:                         cjne    @r0,#3,not3in
0B0E 7701           1913                                             mov             @r1,#1;9                ;T=3
0B10 020000   F     1914                                             jmp     labelB
0B13 7703           1915     not3in:                         mov             @r1,#3;19
0B15 020000   F     1916                                             jmp     labelB
                    1917     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    31

                    1918     
                    1919     ;;;;;;;;;;;3.11.06
                    1920     
                    1921     ;;коррекция 0
0B18 7883           1922     KORnul:         mov             r0,#chdel
0B1A B60010         1923                             cjne    @r0,#0,nonuldel
                    1924                                     
0B1D E584           1925                             mov             a,p4                    ;сохр  us
0B1F F536           1926                             mov             saus,a
0B21 E585           1927                             mov             a,p5
0B23 F537           1928                             mov             saus+1,a
                    1929     
0B25 900000   F     1930                             mov             dptr,#kor0us
0B28 120000   F     1931                             call    lospus          ;упр слово коррекции 0
0B2B 8018           1932                             jmp             chdelmo
                    1933     
0B2D                1934     nonuldel:       ;cjne   @r0,#7,no4del
0B2D B6031B         1935                                                     cjne    @r0,#3,no4del
                    1936                             ;рез ->AN
0B30 7862           1937                             mov             r0,#rez_A;->r2..r5
0B32 120000   F     1938                             call    resar2
                    1939             
                    1940                                     ;;;;;;;;;;
0B35 120402         1941                             call    altof           ;r2..r5->float
0B38 7884           1942                             mov             r0,#kor0_AN;->kor0_AN
0B3A 120000   F     1943                             call    saver2
                    1944                                     
0B3D E536           1945                             mov             a,saus                  ;восстан исходное упр слово
0B3F F584           1946                             mov             p4,a
0B41 E537           1947                             mov             a,saus+1
0B43 F585           1948                             mov             p5,a            
0B45 7883           1949     chdelmo:        mov             r0,#chdel
0B47 06             1950                             inc             @r0             ;chdel+1
0B48 020000   F     1951                             jmp              rebyte
                    1952     
0B4B                1953     no4del:         ;cjne   @r0,#14,chdelmo
0B4B B606F7         1954                                             cjne    @r0,#6,chdelmo
0B4E 7600           1955                             mov             @r0,#0          ;chdel
0B50 7898           1956                             mov             r0,#chinkor
0B52 7600           1957                             mov             @r0,#00;1;00;02;600;
0B54 08             1958                             inc             r0
0B55 76C8           1959                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0B57 120000   F     1960                             call    clmassix;сбросить массив скольз среднего
0B5A 020000   F     1961                             jmp              rebyte
                    1962     
                    1963     ;автокалибровка
0B5D                1964     autoka:  ;;  mov                r0,#chavt
                    1965                      ;;  call               chcmp
                    1966                      ;;  jz         nulavt
                    1967                     ;;   mov                r1,#chavt
                    1968                     ;;   call               chdec;chavt-1
                    1969                      ;; jmp         rebyte
0B5D                1970     nulavt:  ;;;;;
0B5D 7883           1971                             mov             r0,#chdel
0B5F B60016         1972                             cjne    @r0,#0,nndelch
0B62 E584           1973                             mov             a,p4                    ;сохр  us
0B64 F536           1974                             mov             saus,a
0B66 E585           1975                             mov             a,p5
0B68 F537           1976                             mov             saus+1,a
                    1977     
0B6A E585           1978                             mov   a,p5
0B6C 4404           1979                             orl             a,#04              ;p5.2=1
0B6E 00             1980                             nop
0B6F 00             1981                             nop
0B70 543F           1982                             anl             a,#3fh          ;p5.6,p5.7=0
0B72 F585           1983                             mov   p5,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    32

0B74 06             1984                             inc             @r0
0B75 020000   F     1985                             jmp              rebyte
                    1986     
0B78 B6033D         1987     nndelch:        cjne    @r0,#3,n4delch
                    1988                             ;pez->A+
                    1989                             ;K+=000/(A+-AN)
                    1990                             ;mov            r0,#rez_A;->r2..r5
                    1991                             ;call   resar2
0B7B E577           1992                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0B7D FA             1993                                     mov             r2,a
0B7E E578           1994                                     mov             a,reacp+1
0B80 FB             1995                                     mov             r3,a
0B81 E579           1996                                     mov             a,reacp+2
0B83 FC             1997                                     mov             r4,a
0B84 E57A           1998                                     mov             a,reacp+3
0B86 FD             1999                                     mov             r5,a
                    2000                                     ;;;;;;;;;;;;;;;
0B87 120402         2001                             call    altof                   ;r2..r5->float
0B8A 7888           2002                             mov             r0,#rezAp;->rezAp
0B8C 120000   F     2003                             call    saver2                          
0B8F 7884           2004                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0B91 120000   F     2005                             call    resar8                          
0B94 1201D1         2006                             call    flsub           ; r2..r5(A+-AN)
0B97 120000   F     2007                             call    move28     ;r2..r5->r8..r11
0B9A 900000   F     2008                             mov             dptr,#CH2tho;000->r2..r5 float
0B9D 120000   F     2009                             call    ldc_long                
0BA0 1202B7         2010                             call    fldiv
0BA3 EA             2011                             mov             a,r2
0BA4 547F           2012                             anl             a,#7fh
0BA6 FA             2013                             mov             r2,a
0BA7 7890           2014                             mov             r0,#koefKp;->koefKp
0BA9 120000   F     2015                             call    saver2
                    2016                       
                    2017                     ;       anl             P5,#0feh                ;p5.0=0 
0BAC E585           2018                     mov             a,P5
0BAE 543B           2019                             anl             a,#3bh;acp-
0BB0 F585           2020                             mov             P5,a
0BB2 7883           2021                             mov             r0,#chdel
0BB4 06             2022                             inc             @r0                       ;ch+1
0BB5 020000   F     2023                             jmp             rebyte
                    2024     
0BB8 B6063F         2025     n4delch:        cjne    @r0,#6,n8delch
                    2026                             ; pez->A-
                    2027                             ;K-=000/(A--AN)
                    2028                     ;       mov     r0,#rez_A;->r2..r5
                    2029                     ;       call    resar2
0BBB E577           2030                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0BBD FA             2031                                     mov             r2,a
0BBE E578           2032                                     mov             a,reacp+1
0BC0 FB             2033                                     mov             r3,a
0BC1 E579           2034                                     mov             a,reacp+2
0BC3 FC             2035                                     mov             r4,a
0BC4 E57A           2036                                     mov             a,reacp+3
0BC6 FD             2037                                     mov             r5,a
                    2038                                     ;;;;;;;;;;;;;;;
0BC7 120402         2039                             call    altof                   ;r2..r5->float
0BCA 788C           2040                             mov             r0,#rezAm;->rezAm
0BCC 120000   F     2041                             call    saver2                          
0BCF 7884           2042                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0BD1 120000   F     2043                             call    resar8                          
0BD4 1201D1         2044                             call    flsub                   ; r2..r5(A--AN)
0BD7 120000   F     2045                             call    move28                  ;r2..r5->r8..r11
0BDA 900000   F     2046                             mov             dptr,#CH2tho    ;000->r2..r5 float
0BDD 120000   F     2047                             call    ldc_long                
0BE0 1202B7         2048                             call    fldiv
0BE3 EA             2049                             mov             a,r2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    33

0BE4 547F           2050                             anl             a,#7fh
0BE6 FA             2051                             mov             r2,a
0BE7 7894           2052                             mov             r0,#koefKm;->koefKm
0BE9 120000   F     2053                             call    saver2
                    2054                        
0BEC E536           2055                             mov             a,saus                  ;восстан исходное упр слово
0BEE F584           2056                             mov             p4,a
0BF0 E537           2057                             mov             a,saus+1
0BF2 F585           2058                             mov             p5,a            
0BF4 7883           2059                             mov             r0,#chdel
0BF6 06             2060                             inc             @r0                       ;ch+1
0BF7 020000   F     2061                        jmp    rebyte
                    2062     
0BFA B6090F         2063     n8delch:        cjne    @r0,#9,n12delch
0BFD 7600           2064                             mov             @r0,#0
0BFF 7981           2065                             mov             r1,#chavt
0C01 770C           2066                             mov             @r1,#0ch;6;1;
0C03 09             2067                             inc             r1
0C04 7780           2068                             mov             @r1,#80h;40h;
0C06 120000   F     2069                             call   clmassix     ;сбросить массив среднего
0C09 020000   F     2070                             jmp             rebyte
0C0C 06             2071     n12delch:       inc             @r0
0C0D 020000   F     2072                             jmp             rebyte
                    2073     
                    2074     
                    2075     
                    2076                                 
0C10 020000   F     2077     rout6:          jmp             out6
0C13 020000   F     2078     rlabelF:        jmp             labelF  
0C16 020000   F     2079     rknrazr:        jmp             knrazr  
0C19 020000   F     2080     rknopt:         jmp             knopt
0C1C 020000   F     2081     rizman:         jmp             izman   
0C1F                2082     keyb1:  ;IE6 
0C1F 75E700         2083                                     mov             EIE2,#00H
                    2084                                     
0C22 C0E0           2085                                     push    acc
0C24 C0D0           2086                                     push    psw
0C26 C000           2087                                     push    rr0
0C28 C001           2088                                     push    rr1
0C2A C002           2089                                     push    rr2
0C2C C003           2090                                     push    rr3
0C2E C004           2091                                     push    rr4
0C30 C005           2092                                     push    rr5
0C32 C006           2093                                     push    rr6
0C34 C007           2094                                     push    rr7
                    2095                                     ;clr            bitmig
                    2096                       ;;;;;;;;;;;;;;
0C36 120000   F     2097                                     call    z_01s;0,1s
                    2098                                     ;восстан знакоместо при мигании
                    2099                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0C39 78B2           2100                                     mov             r0,#marker
0C3B 7440           2101                                     mov             a,#bufind
0C3D 26             2102                                     add             a,@r0                   ;a=bufind+marker
0C3E F9             2103                                     mov             r1,a
0C3F A73C           2104                                     mov             @r1,savba
                    2105                                     ;;;;;;;;;;;
0C41 E5B0           2106                             mov             a,p3
0C43 20E644         2107                                     jb              acc.6,outviR;выход из режима выч R
0C46 E5B0           2108     gout6:                          mov             a,p3
0C48 44FF           2109                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0C4A F5B0           2110                                     mov             p3,a
0C4C E5B0           2111                                     mov             a,p3
0C4E 30E6BF         2112                                     jnb             acc.6,rout6             ;error
0C51 3004BF         2113                                     jnb             bitizm,rlabelF
0C54 75B0FE         2114                                     mov             p3,#0feh                ;реж IZM
0C57 E5B0           2115                                     mov             a,p3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    34

0C59 30E6C0         2116                                     jnb             acc.6,rizman
                    2117                                     ;;;;;;
0C5C 201232         2118                                     jb              bitklb,goklb
0C5F 75B0FD         2119                                     mov             p3,#0fdh
0C62 E5B0           2120                                     mov             a,p3
0C64 30E6AF         2121                                     jnb             acc.6,rknrazr             ;labelC
0C67 75B0FB         2122                                     mov             p3,#0fbh
0C6A E5B0           2123                                     mov             a,p3
0C6C 30E649         2124                                     jnb             acc.6,knright           ;->
0C6F 75B0F7         2125                                     mov             p3,#0f7h
0C72 E5B0           2126                                     mov             a,p3
0C74 30E6A2         2127                                     jnb             acc.6,rknopt                    ;T
0C77 75B0EF         2128                                     mov             p3,#0efh
0C7A E5B0           2129                                mov          a,p3
0C7C 30E615         2130                                     jnb             acc.6,pyskst                    ;pysk/stop
0C7F 75B0DF         2131                                     mov             p3,#0dfh
0C82 E5B0           2132                                     mov             a,p3
0C84 30E64D         2133                                jnb          acc.6,knvich
0C87 020000   F     2134                                     jmp             izmpaT
                    2135     
0C8A 3006B9         2136     outviR: jnb             bitvi11,gout6   
0C8D C214           2137                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0C8F C206           2138                                     clr             bitvi11
                    2139                                     
0C91 020000   F     2140     goklb:          jmp             out6
                    2141     
0C94 200A0C         2142     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0C97 D20A           2143                                     setb    bitbon  ;уст реж буфер вкл
0C99 79D5           2144                                     mov                     r1,#volume;work         ;обьем блок
                             а
0C9B 7700           2145                                     mov                     @r1,#00
0C9D 09             2146                                     inc                     r1
0C9E 77C7           2147                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0CA0 020000   F     2148                                     jmp             izmpaT
0CA3 C20A           2149     bufon:                  clr             bitbon  ;уст реж буфер выкл
0CA5 020000   F     2150                                     jmp             izmpaT
                    2151     
0CA8 79B0           2152     tizmri:                 mov             r1,#level
0CAA B70102         2153                                     cjne    @r1,#1,right2
                    2154                                     ;10s->HET
0CAD 8004           2155                                     jmp             right3
                    2156     
0CAF 07             2157     right2:                 inc             @r1
0CB0 120000   F     2158                                     call    lolevT
                    2159                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0CB3 120000   F     2160     right3:                 call    ind
0CB6 806D           2161                                     jmp             izmfun
                    2162     
                    2163                             
                    2164                             
0CB8                2165     knright:        
                    2166     
0CB8 79AE           2167                                     mov             r1,#diap
                    2168                             ;перекл диапазон 1 поз вверх сбр массив
0CBA 17             2169                                     dec             @r1
0CBB B7FF04         2170                                     cjne    @r1,#0ffh,diinc
0CBE 7700           2171                                     mov             @r1,#0
0CC0 8063           2172                                     jmp  izmfun
0CC2 120000   F     2173     diinc:                  call     clmassix
0CC5 78B3           2174                                     mov             r0,#summa
0CC7 120000   F     2175                                     call    clear4
0CCA 786A           2176                                     mov             r0,#rez_A0
0CCC 120000   F     2177                                     call    clear4  
0CCF 120000   F     2178                                     call    loadUS
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    35

0CD2 8051           2179                                      jmp  izmfun
                    2180     
0CD4 200613         2181     knvich:            jb           bitvi11,onvich
0CD7 C204           2182                                     clr             bitizm
0CD9 D214           2183                                     setb    bitvich
                    2184                                     
0CDB 78B1           2185                                     mov             r0,#vichR
0CDD 7611           2186                                     mov             @r0,#11h;;????????or 0
                    2187                                     ;ВЫЧИСЛИТЬ
0CDF 900000   F     2188                                     mov     dptr,#teVICH
0CE2 120000   F     2189                                     call    lotext
0CE5 120000   F     2190                                call         z_1s;;;;;;;
0CE8 806C           2191                                     jmp              viout;izmpaT
                    2192     
0CEA C214           2193     onvich:                 clr             bitvich
0CEC 78B1           2194                                     mov             r0,#vichR
0CEE 7600           2195                                     mov             @r0,#0
0CF0 8037           2196                                     jmp              izmpaT
                    2197     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0CF2 301820         2198     louizm:            jnb          knizm,lou
0CF5 79AE           2199                                     mov             r1,#diap
0CF7 C3             2200                                     clr             c
0CF8 7403           2201                                     mov             a,#3
0CFA 97             2202                                     subb    a,@r1
0CFB 5006           2203                                     jnc             lldi23    ;10-2..10-5
                    2204                                     ;10-6..10-11
0CFD E584           2205                                     mov             a,p4
0CFF 54F7           2206                                     anl             a,#0f7h   ;d3
0D01 F584           2207                                     mov             p4,a
0D03 E7             2208     lldi23:                 mov             a,@r1
0D04 6403           2209                                     xrl             a,#3
0D06 7002           2210                                     jnz             lldi3
0D08 8005           2211                                     jmp             lldi2   ;10-5
0D0A E7             2212     lldi3:                  mov             a,@r1
0D0B 6402           2213                                     xrl             a,#2            ;
0D0D 7006           2214                                     jnz             lou             
0D0F E585           2215     lldi2:                  mov             a,p5            ;10-4
0D11 4408           2216                                     orl             a,#08
0D13 F585           2217                                     mov             p5,a
0D15 22             2218     lou:                    ret
                    2219                               ;;;;;;
0D16 201807         2220     izman:                  jb              knizm,knizmon
0D19 D218           2221                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2222                             ;       d3(k5 p4),d3(u5 p5)заслать us
0D1B 120000   F     2223                                     call    louizm 
0D1E 8005           2224                                     jmp             izmfun
0D20 C218           2225     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0D22 120000   F     2226                                     call    loadUS;восстановить us
0D25                2227     izmfun:                 
0D25 D207           2228                                     setb    bitzus;bitbuf
0D27 8000           2229                                     jmp             labelE;;;;;;;;;;;;
                    2230                                     ;;;;;;;;;;;;;;
0D29                2231     izmpaT:
                    2232     ;;;;;;;;;;;;;;;;;
                    2233                     ;       clr             c 
                    2234                     ;       mov             r1,#parN
                    2235     
                    2236                     ;       mov             r0,#diap
                    2237                     ;       mov             a,#6            
                    2238                     ;       subb    a,@r0
                    2239                     ;       jnc             labelE          ;         ;10-2..10-8
                    2240                               
                    2241                     ;       mov             @r1,#2          ;10-9..10-11            
                    2242                     ;       jmp             labelE
                    2243     
                    2244     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    36

0D29 789A           2245     labelE:                 mov             r0,#parT
0D2B 793D           2246                                     mov             r1,#chkl
0D2D B60108         2247                                     cjne    @r0,#1,izmt2
0D30 7700           2248                                     mov             @r1,#0
0D32 09             2249                                     inc             r1
0D33 7702           2250                                     mov             @r1,#2
0D35 020000   F     2251                                     jmp             out6
0D38 B60208         2252     izmt2:                  cjne    @r0,#2,izmt3
0D3B 7700           2253                                     mov             @r1,#0
0D3D 09             2254                                     inc             r1
0D3E 7714           2255                                     mov             @r1,#20
0D40 020000   F     2256                                     jmp             out6
                    2257     
0D43 7700           2258     izmt3:                  mov             @r1,#0
0D45 09             2259                                     inc             r1
0D46 77C8           2260                                     mov             @r1,#200
0D48 020000   F     2261                                     jmp             out6
                    2262     
                    2263     
                    2264     
                    2265     
0D4B                2266     knopt: ;кнопка T
0D4B C204           2267                                clr          bitizm
0D4D D210           2268                                setb         bitt2
0D4F 79B7           2269                                mov          r1,#load
0D51 7704           2270                                mov          @r1,#4;1s
0D53 120000   F     2271                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2272                                
                    2273     
0D56 793D           2274     viout:          mov             r1,#chkl
0D58 7703           2275                             mov             @r1,#03
0D5A 09             2276                             inc             r1
0D5B 77E8           2277                             mov             @r1,#0e8h               ;1000
0D5D 020000   F     2278                             jmp             out6
                    2279     
0D60                2280     knrazr:          
0D60 C3             2281     labelC:          clr            c
0D61 78AF           2282                             mov             r0,#parN
0D63 799A           2283                             mov             r1,#parT
0D65 7402           2284                             mov             a,#2
0D67 97             2285                             subb    a,@r1
0D68 40BF           2286                             jc              labelE          ;T>2
0D6A B60104         2287                             cjne    @r0,#1,noN1c
0D6D 7602           2288                             mov             @r0,#2          ;N=2
0D6F 80B8           2289                             jmp             labelE
                    2290     
0D71 B60204         2291     noN1c:          cjne    @r0,#2,not_1
0D74 7603           2292                             mov             @r0,#3          ;N=3      ;10-2..10-8
0D76 80B1           2293                             jmp             labelE
                    2294     
0D78                2295     not_10: 
0D78 7601           2296     not_1:          mov             @r0,#1                          ;N=1
0D7A 80AD           2297                             jmp     labelE
                    2298     
0D7C 020000   F     2299     rtizmri:        jmp             tizmri
0D7F                2300     labelf:                 
0D7F 301037         2301                             jnb             bitt2,nofizm
0D82 75B0FB         2302                        mov          p3,#0fbh
0D85 E5B0           2303                        mov          a,p3
0D87 20E60F         2304                        jb           acc.6,outF
0D8A 79B7           2305                        mov          r1,#load;parT
0D8C B70503         2306                        cjne         @r1,#5,noft1
                    2307                        ;t=10s
0D8F 020000   F     2308                        jmp          out6;ft1izm
                    2309     
0D92 07             2310     noft1:     inc          @r1;dec         @r1
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    37

0D93 120000   F     2311     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2312                             ;call   ind
0D96 020000   F     2313                     jmp             out6;??????????????/
                    2314     
                    2315                             ;увеличить счетчик задержки клавиатуры
0D99 783D           2316     outF:           mov             r0,#chkl
0D9B 7627           2317                             mov             @r0,#27h
0D9D 08             2318                             inc             r0
0D9E 7610           2319                             mov             @r0,#10h
0DA0 020000   F     2320                             jmp             out6;out7
                    2321     
0DA3 020000   F     2322     noviR1:         jmp             noviR
0DA6 78B1           2323     outvich:        mov                     r0,#vichR
0DA8 7600           2324                                             mov                     @r0,#0
0DAA C214           2325                                             clr                     bitvich
0DAC C206           2326                                             clr                     bitvi11
0DAE C211           2327                                             clr                     bitmenu
0DB0 D204           2328                                             setb            bitizm
0DB2 78B2           2329                                             mov                     r0,#marker
0DB4 76FF           2330                                             mov                     @r0,#0ffh
0DB6 020000   F     2331                                             jmp                     out6    
                    2332     
0DB9 3014E7         2333     nofizm:         jnb             bitvich,noviR1
0DBC 75B0DF         2334                                                     mov             p3,#0dfh
0DBF 30B6E4         2335                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0DC2 78B1           2336                             mov             r0,#vichR
0DC4 B61110         2337                             cjne    @r0,#11h,no11v6
0DC7 75B0FB         2338                             mov                     p3,#0fbh;->
0DCA 20B6CC         2339                             jb                      p3.6,outF
0DCD 7612           2340                             mov             @r0,#12h                ;11= вычислить
0DCF 900000   F     2341     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0DD2 120000   F     2342                             call    lotext
0DD5 80C2           2343                             jmp             outF
                    2344             
0DD7 B61210         2345     no11v6:         cjne    @r0,#12h,no12v6
0DDA 75B0FB         2346                             mov             p3,#0fbh;->
0DDD 20B6B9         2347                             jb              p3.6,outF
0DE0 7613           2348                             mov             @r0,#13h
0DE2 900000   F     2349                             mov             dptr,#teOUT
0DE5 120000   F     2350                             call    lotext
0DE8 80AF           2351                             jmp             outF
                    2352                     
0DEA B61310         2353     no12v6:         cjne    @r0,#13h,no13v6
0DED 75B0FB         2354                                                     mov             p3,#0fbh;->
0DF0 20B6A6         2355                             jb              p3.6,outF
0DF3 7611           2356                             mov             @r0,#11h
0DF5 900000   F     2357                             mov             dptr,#teVICH
0DF8 120000   F     2358                             call    lotext
0DFB 809C           2359                             jmp             outF
                    2360     
                    2361     ;кн -> A= 0000
                    2362     ;кн -> B= +00000
0DFD 75B0FB         2363     no13v6:         mov             p3,#0fbh
0E00 E5B0           2364                             mov             a,p3
0E02 20E635         2365                             jb              acc.6,chanZ
0E05 E53B           2366                             mov             a,movrig
0E07 B40714         2367                             cjne    a,#7,kon_B      
0E0A 78B2           2368                             mov             r0,#marker      ;A= 0000
0E0C B60716         2369                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0E0F E53A           2370     rikn:           mov             a,movleft
0E11 F6             2371                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
                    2372     ;                               29.12.06
                    2373     ;;;;;;;;;;;;;;;;;;
                    2374     ;необходимо не портить цифру в следуюем справа знакоместе
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    38

                    2375     ;т е сохранить ее в ячейке для мигания в противном случае
                    2376     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2377     ;       знакоместа
0E12 78B2           2378                                     mov             r0,#marker
0E14 7440           2379                                     mov             a,#bufind
0E16 26             2380                                             add             a,@r0                   ;a=bufind+m
                             arker
0E17 F9             2381                                             mov             r1,a
0E18 09             2382                                             inc             r1
0E19 873C           2383                                             mov             savba,@r1
0E1B 020000   F     2384                                     jmp             outF
                    2385     
0E1E 78B2           2386     kon_B:          mov             r0,#marker      ;B= +00000
0E20 B60802         2387                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0E23 80EA           2388                                             jmp             rikn
0E25                2389     mark0_8:
                    2390     ;                               29.12.06
                    2391     ;;;;;;;;;;;;;;;;;;
                    2392     ;необходимо не портить цифру в следуюем справа знакоместе
                    2393     ;т е сохранить ее в ячейке для мигания в противном случае
                    2394     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2395     ;       знакоместа ->B=+00000
0E25 78B2           2396                                             mov             r0,#marker
0E27 7440           2397                                     mov             a,#bufind
0E29 26             2398                                             add             a,@r0                   ;a=bufind+m
                             arker
0E2A F9             2399                                             mov             r1,a
0E2B 09             2400                                             inc             r1
0E2C 873C           2401                                             mov             savba,@r1
0E2E 78B2           2402                             mov             r0,#marker
0E30 06             2403                             inc             @r0             ;       сдвинуть курсор вправо на 1
0E31 C219           2404                             clr             bitmig
0E33 B60901         2405                             cjne    @r0,#9,outma
0E36 18             2406                             dec             r0;ppp
0E37 020000   F     2407     outma:          jmp             outF
                    2408     
0E3A 75B0FE         2409     chanZ:          mov             p3,#0feh
0E3D E5B0           2410                             mov             a,p3
0E3F 20E611         2411                             jb              acc.6,chanma
                    2412                             ;изм знак в старшем разряде на противоположн
0E42 E543           2413                             mov             a,bufind+3
0E44 B42B06         2414                             cjne            a,#2bh,noplus
0E47 75432D         2415                             mov                     bufind+3,#2dh           ;+->-   
0E4A 020000   F     2416                             jmp             outF
0E4D                2417     noplus:
0E4D 75432B         2418                             mov                     bufind+3,#2bh           ;-/+-
0E50 020000   F     2419                             jmp             outF
0E53 75B0FD         2420     chanma:         mov             p3,#0fdh
0E56 E5B0           2421                             mov             a,p3
0E58 20E603         2422                             jb              acc.6,outFl;labelL1
                    2423                             ;clr            bitmig
0E5B 120000   F     2424     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2425     
0E5E 020000   F     2426     outFl:                  jmp             outF
                    2427                     
0E61                2428     nor11:          ;       выход
0E61 7613           2429                     mov             @r0,#13h  ;12->13
0E63 900000   F     2430                     mov             dptr,#teOUT
                    2431     ;               jmp             vi1113
                    2432     
                    2433     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2434     
                    2435     ;yesviR:                clr             bitvi11;????????/
                    2436     ;                       jb              bmem11,rlabelL
                    2437     ;                       jmp             out6;???????//
                    2438     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    39

0E66 020000   F     2439     rlabelL:        jmp                     labelL
                    2440     ;findmem:               jmp             out6
0E69 301171         2441     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2442     ;;;;;;;;;;;;;
0E6C 78B1           2443                                             mov                     r0,#vichR
0E6E 7415           2444                                             mov                     a,#15h
0E70 C3             2445                                             clr                     c
0E71 96             2446                                             subb            a,@r0
0E72 4016           2447                                             jc                      ri21_23
                    2448     
0E74 75B0FB         2449                                             mov             p3,#0fbh; реж кн меню ->
0E77 20B60A         2450                                             jb              p3.6,ri6
0E7A 78B1           2451                                             mov             r0,#vichR
0E7C B61508         2452                                             cjne    @r0,#15h,norime
0E7F 7611           2453                                             mov             @r0,#11h
0E81 120000   F     2454     norime1:        call            lomenu
0E84 020000   F     2455     ri6:                    jmp             out6
0E87 06             2456     norime:         inc             @r0
0E88 80F7           2457                                             jmp             norime1
                    2458             
0E8A 7423           2459     ri21_23:        mov                     a,#23h          ;->
0E8C C3             2460                                             clr                     c
0E8D 96             2461                                             subb            a,@r0
0E8E 4014           2462                                             jc                      ri_31
0E90 75B0FB         2463                                             mov                     p3,#0fbh
0E93 20B6EE         2464                                             jb                      p3.6,ri6
0E96 B62308         2465                                             cjne            @r0,#23h,no23ri
0E99 7621           2466                                             mov                     @r0,#21h
0E9B 120000   F     2467                                             call            lomenu
0E9E 020000   F     2468                                             jmp                     out6
0EA1 06             2469     no23ri:         inc                     @r0
0EA2 80DD           2470                                             jmp                     norime1
0EA4 B63119         2471     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0EA7 30130B         2472                                             jnb                     bitv19,gosk19
0EAA 900000   F     2473                                             mov                     dptr,#teS57_6;57,6
0EAD 120000   F     2474                                             call            lotext
0EB0 C213           2475                                             clr                     bitv19
0EB2 020000   F     2476                                             jmp             out6
0EB5 900000   F     2477     gosk19:         mov                     dptr,#teS19_2
0EB8 120000   F     2478                                             call            lotext
0EBB D213           2479                                             setb            bitv19
0EBD 020000   F     2480                                             jmp                     out6
                    2481     
                    2482     
                    2483     
                    2484     ;labelS2:       jmp                     out6
                    2485     
0EC0 7452           2486     no31ri:         mov                     a,#52h;42h              ;->
0EC2 C3             2487                                             clr                     c
0EC3 96             2488                                             subb            a,@r0
0EC4 40BE           2489                                             jc                      ri6
0EC6 75B0FB         2490                                             mov                     p3,#0fbh                   
                                  ;41,42
0EC9 30B608         2491                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0ECC 75B0FD         2492                                             mov                     p3,#0fdh
0ECF 20B6B2         2493                                             jb                      p3.6,ri6
0ED2 8087           2494                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0ED4 020000   F     2495     rlabelN:                jmp             labelN
0ED7 020000   F     2496     moutF:          jmp             outF
                    2497     ;;;;;;;;;;;;;;;;;;;;;;;;;
0EDA 020000   F     2498     rnnmemb:        jmp             nnmemb
                    2499     
0EDD                2500     nbimenu:
0EDD 300BFA         2501     findmem:        jnb             bitmem,rnnmemb
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    40

0EE0 79B0           2502                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0EE2 B71113         2503                        cjne         @r1,#11h,nomem11
                    2504                        
0EE5 75B0FB         2505                        mov          p3,#0fbh
0EE8 E5B0           2506                        mov          a,p3
0EEA 20E6EA         2507                        jb           acc.6,moutF
0EED 7712           2508                        mov          @r1,#12h
0EEF 900000   F     2509                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0EF2 120000   F     2510                        call         lotext
0EF5 020000   F     2511                        jmp          outF
                    2512     
0EF8 B71213         2513     nomem11:   cjne         @r1,#12h,nomem12
0EFB 75B0FB         2514                             mov             p3,#0fbh
0EFE E5B0           2515                        mov          a,p3
0F00 20E6D4         2516                        jb           acc.6,moutF
0F03 7713           2517                        mov          @r1,#13h
0F05 900000   F     2518                        mov          dptr,#teLIST            ;ПРОСМОТР
0F08 120000   F     2519                        call         lotext
0F0B 020000   F     2520                        jmp          outF
0F0E B71313         2521     nomem12:         cjne           @r1,#13h,nomem13
0F11 75B0FB         2522                                             mov             p3,#0fbh
0F14 E5B0           2523                        mov          a,p3
0F16 20E6BE         2524                        jb           acc.6,moutF
0F19 7714           2525                        mov          @r1,#14h
0F1B 900000   F     2526                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
0F1E 120000   F     2527                        call         lotext
0F21 020000   F     2528                          jmp                outF
                    2529                             
0F24 B71413         2530     nomem13:cjne            @r1,#14h,labelL
0F27 75B0FB         2531                             mov             p3,#0fbh
0F2A E5B0           2532                        mov          a,p3
0F2C 20E6A8         2533                        jb           acc.6,moutF
0F2F 7711           2534                        mov          @r1,#11h
0F31 900000   F     2535                        mov          dptr,#teCLE                     ;ОЧИСТКА
0F34 120000   F     2536                        call         lotext
0F37 020000   F     2537                          jmp                outF
0F3A                2538     labelL: 
                    2539                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
0F3A 78B0           2540                                     mov                     r0,#level
0F3C B6210E         2541                                     cjne            @r0,#21h,nobl21
0F3F 7622           2542                                     mov                     @r0,#22h                ;->БЛОК 
0F41 900000   F     2543                                     mov                     dptr,#teBL
0F44 120000   F     2544     me21_22:call            lotext
0F47 120000   F     2545                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
0F4A 020000   F     2546                                     jmp                     outF
                    2547     
0F4D B62207         2548     nobl21: cjne            @r0,#22h,nobl22
0F50 900000   F     2549                                     mov                     dptr,#teFULL
0F53 7621           2550                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2551     
0F55 80ED           2552                                     jmp                     me21_22
                    2553     
                    2554     ;labl21:           cjne @r0,#21h,nolev1
                    2555     ;                       mov             p3,#0fbh
                    2556     ;                       mov             a,p3
                    2557     ;                       jb              acc.6,loutF
                    2558     ;                       cjne    @r0,#21h,labl22
                    2559     ;                       mov             @r0,#22h
                    2560                             ;БЛОК
                    2561     ;                       call    lotext
                    2562     ;                       jmp             outF
                    2563     ;labl22:                mov             @r0,#21h
                    2564                             ;ПОЛНАЯ
                    2565     ;                       call    lotext
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    41

                    2566     ;                       jmp             outF
                    2567                      
0F57 B62325         2568     nobl22:         cjne    @r0,#23h,go31l
0F5A 75B0FB         2569     rigblo:         mov             p3,#0fbh
0F5D 20B629         2570                                             jb              p3.6,llev2
0F60                2571     labL2:    ;  уст курсор в правую позицию 
                    2572                                     ;       кнопка                  ->
                    2573     ;;;;;;;;;;;;;;;;;;
                    2574     ;необходимо не портить цифру в следуюем справа знакоместе
                    2575     ;т е сохранить ее в ячейке для мигания в противном случае
                    2576     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2577     ;       знакоместа
0F60 78B2           2578                                             mov             r0,#marker
0F62 7440           2579                                     mov             a,#bufind
0F64 26             2580                                             add             a,@r0                   ;a=bufind+m
                             arker
0F65 F9             2581                                             mov             r1,a
0F66 09             2582                                             inc             r1
0F67 873C           2583                                             mov             savba,@r1
0F69 C219           2584                                             clr             bitmig
                    2585     ;;;;;;;;;;;;;;;;
0F6B 78B2           2586                       mov           r0,#marker      ;курсор справа  ?
0F6D E53B           2587                             mov             a,movrig
0F6F C3             2588                             clr             c
0F70 96             2589                             subb    a,@r0
0F71 6006           2590                             jz         equ1l
0F73 E53B           2591                             mov             a,movrig;уст в правую позицию
0F75 F6             2592                             mov             @r0,a
0F76 020000   F     2593                             jmp             outF                                     
0F79 E53A           2594     equ1l:          mov             a,movleft;уст в левую позицию
0F7B F6             2595                             mov             @r0,a   
0F7C 020000   F     2596     loutF:  jmp             outF
                    2597                     
                    2598     
0F7F B63102         2599     go31l:          cjne    @r0,#31h,go41l
0F82 80D6           2600                             jmp             rigblo
0F84 B6410B         2601     go41l:          cjne    @r0,#41h,norig2
0F87 80D1           2602                             jmp             rigblo
                    2603     
0F89 75B0FD         2604     llev2:          mov             p3,#0fdh
0F8C 20B6ED         2605                             jb              p3.6,loutF
0F8F 020000   F     2606                             jmp             labelL1
                    2607     
                    2608     ;->
0F92 C3             2609     norig2:    clr          c               ;32,33,34,42
0F93 7431           2610                             mov             a,#31h
0F95 96             2611                             subb    a,@r0
0F96 50E4           2612                             jnc             loutF
0F98 75B0FB         2613     rigblok:        mov             p3,#0fbh  ;32,33,34,42
0F9B 20B626         2614                             jb              p3.6,lev2go
0F9E                2615     labelN: 
                    2616                             ;                               29.12.06
                    2617     ;;;;;;;;;;;;;;;;;;
                    2618     ;необходимо не портить цифру в следуюем справа знакоместе
                    2619     ;т е сохранить ее в ячейке для мигания в противном случае
                    2620     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2621     ;       знакоместа
0F9E 78B2           2622                                             mov             r0,#marker
0FA0 7440           2623                                     mov             a,#bufind
0FA2 26             2624                                             add             a,@r0                   ;a=bufind+m
                             arker
0FA3 F9             2625                                             mov             r1,a
0FA4 09             2626                                             inc             r1
0FA5 873C           2627                                             mov             savba,@r1
                    2628     ;;;;;;;;;;;;;;;;;;;
0FA7 78B2           2629                             mov             r0,#marker      ;курсор справа  ?
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    42

0FA9 E53B           2630                             mov             a,movrig
0FAB C3             2631                             clr             c
0FAC 96             2632                             subb    a,@r0
0FAD 7006           2633                             jnz        noequ1
0FAF E53A           2634                             mov             a,movleft;уст в крайнюю левую позицию
0FB1 F6             2635                             mov             @r0,a
0FB2 020000   F     2636                             jmp             outF
0FB5                2637     noequ1: ;29.12.06
                    2638     ;;;;;;;;;;;;;;;;;;
                    2639                             ;восстан знакоместо при мигании
                    2640                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
0FB5 78B2           2641                                     mov             r0,#marker
0FB7 7440           2642                                     mov             a,#bufind
0FB9 26             2643                                     add             a,@r0                   ;a=bufind+marker
0FBA F9             2644                                     mov             r1,a
                    2645                                     ;mov            @r1,savba
0FBB 09             2646                                     inc             r1
0FBC 873C           2647                                     mov             savba,@r1
                    2648     ;;;;;;;;;;;;;;;;        
0FBE 120000   F     2649                             call    marri;уст сдвиг в правую        позицию
0FC1 020000   F     2650                             jmp             outF
0FC4 75B0FD         2651     lev2go:         mov             p3,#0fdh
0FC7 30B603         2652                             jnb             p3.6,rlabelL1
0FCA 020000   F     2653                             jmp             outF
                    2654     
0FCD 020000   F     2655     rlabelL1:       jmp             labelL1
                    2656     
0FD0                2657     nnmemb:
                    2658                                     
                    2659     
                    2660     
0FD0                2661     norim6:    ;kn menu
0FD0                2662     out6:           
0FD0 D007           2663                                     pop             rr7     
0FD2 D006           2664                                     pop             rr6
0FD4 D005           2665                                     pop             rr5
0FD6 D004           2666                                     pop             rr4
0FD8 D003           2667                                     pop             rr3
0FDA D002           2668                                     pop             rr2
0FDC D001           2669                                     pop             rr1                             
0FDE D000           2670                                     pop             rr0
0FE0 D0D0           2671                                     pop             psw
0FE2 D0E0           2672                                     pop             acc
                    2673     ;clr            bitmig
0FE4 75E730         2674                                mov          EIE2,#30H
0FE7 E5AD           2675                                mov          a,P3IF
0FE9 54BF           2676                                     anl             a,#0bfh
0FEB F5AD           2677                                     mov             P3IF,a
0FED 75B0C0         2678                                     mov             P3,#0c0h
0FF0 C219           2679     clr             bitmig
0FF2 E586           2680                                             mov             a,P6            ;p6.4=0
0FF4 54EF           2681                             anl             a,#0efh
0FF6 F586           2682                             mov             P6,a
0FF8 00             2683                             nop
0FF9 00             2684                             nop
                    2685                                     
0FFA E586           2686                             mov             a,P6                    ;p6.4=1 
0FFC 4410           2687                             orl             a,#10h
0FFE F586           2688                             mov             P6,a                        
1000 32             2689                             reti
                    2690     
1001 020000   F     2691     rknMEM:                 jmp             knMEM
1004 020000   F     2692     knKMP:             jmp          out7
1007 020000   F     2693     rout7:                  jmp             out7    
100A 020000   F     2694     rlabelH:                jmp             labelH
100D 020000   F     2695     rknNUL:         jmp             knNUL
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    43

1010 020000   F     2696     rknleft:                jmp             knleft
1013                2697     keyb2:  ;IE7
1013 75E700         2698                                     mov             EIE2,#00H
1016 C0E0           2699                                     push    acc
1018 C0D0           2700                                     push    psw
101A C000           2701                                     push    rr0
101C C001           2702                                     push    rr1
101E C002           2703                                     push    rr2
1020 C003           2704                                     push    rr3
1022 C004           2705                                     push    rr4
1024 C005           2706                                     push    rr5
1026 C006           2707                                     push    rr6
1028 C007           2708                                     push    rr7
102A C082           2709                                     push    dpl
102C C083           2710                                     push    dph
                    2711                                     ;clr            bitmig
                    2712                       ;;;;;;;;;;;;;;
102E 120000   F     2713                               call  z_01s   ;0,1s
                    2714                               ;восстан знакоместо при мигании
                    2715                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
1031 78B2           2716                                     mov             r0,#marker
1033 7440           2717                                     mov             a,#bufind
1035 26             2718                                     add             a,@r0                   ;a=bufind+marker
1036 F9             2719                                     mov             r1,a
1037 A73C           2720                                     mov             @r1,savba
                    2721                                     ;;;;;;;;;;;
                    2722     
1039 E5B0           2723                             mov             a,p3
103B 20E7C9         2724                                     jb              acc.7,rout7
103E E5B0           2725                                     mov             a,p3
1040 74FF           2726                                     mov             a,#0ffh         ; p3.(5-0)<-3f
1042 F5B0           2727                                     mov             p3,a
1044 E5B0           2728                                     mov             a,p3
1046 30E7BE         2729                                     jnb             acc.7,rout7             ;error
1049 3004BE         2730                                     jnb             bitizm,rlabelH
104C 75B0FE         2731                                     mov             p3,#0feh                ;реж IZM
104F E5B0           2732                                     mov             a,p3
1051 30E7B9         2733                                     jnb             acc.7,rknNUL
1054 75B0FD         2734                                     mov             p3,#0fdh
1057 E5B0           2735                                     mov             a,p3
1059 30E7A8         2736                                     jnb             acc.7,knKMP
105C 75B0FB         2737                                     mov             p3,#0fbh
105F E5B0           2738                                     mov             a,p3
1061 30E7AC         2739                                     jnb             acc.7,rknleft
1064 75B0F7         2740                                     mov             p3,#0f7h
1067 E5B0           2741                                     mov             a,p3
1069 30E75B         2742                                     jnb             acc.7,knAVP
106C 75B0EF         2743                                 mov         p3,#0efh
106F E5B0           2744                                     mov             a,p3
1071 30E78D         2745                                     jnb             acc.7,rknMEM
1074 75B0DF         2746                                     mov             p3,#0dfh
1077 E5B0           2747                                     mov             a,p3    
1079 30E722         2748                                     jnb             acc.7,knmenu
107C                2749     an_t7:             ;;;;;;;;;;;;
                    2750                     
                    2751     ;       clr             c
                    2752     ;       mov             r1,#parN
                    2753     ;
                    2754     ;                       mov             r0,#diap
                    2755     ;                       mov             a,#6            
                    2756     ;                       subb    a,@r0
                    2757     ;                       jnc             goto7           ;         ;10-2..10-8
                    2758                               
                    2759     ;                       mov             @r1,#2          ;10-9..10-11            
                    2760                             
                    2761                             ;;;;;;;;;;;;
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    44

107C 799A           2762     goto7:                  mov             r1,#parT
107E 783D           2763                                     mov             r0,#chkl
1080 B70108         2764                                     cjne    @r1,#1,not1_7
1083 7600           2765                                     mov             @r0,#00
1085 08             2766                                     inc             r0
1086 7602           2767                                     mov             @r0,#2
1088 020000   F     2768                                     jmp             out7
                    2769                             
                    2770     
108B B70208         2771     not1_7:                 cjne    @r1,#2,not2_7
108E 760E           2772                                             mov             @r0,#0eh;00
1090 08             2773                                     inc             r0
1091 7638           2774                                     mov             @r0,#38h;20
1093 020000   F     2775                                     jmp             out7
1096 7600           2776     not2_7:                 mov             @r0,#00
1098 08             2777                                     inc             r0
1099 76C8           2778                                     mov             @r0,#200
109B 020000   F     2779     merr:           jmp             out7
                    2780     
                    2781     
109E 2006FA         2782     knmenu: jb              bitvi11,merr
10A1 201511         2783                                     jb              biteizm,menuoff
10A4 C204           2784                              clr            bitizm          ;off IZM
10A6 D211           2785                                     setb            bitmenu
10A8 900000   F     2786                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
10AB 120000   F     2787                                     call    lotext
                    2788                                     
10AE 78B1           2789                                     mov             r0,#vichR
10B0 7611           2790                                     mov             @r0,#11h
10B2 020000   F     2791                                     jmp             onmem11
10B5                2792     menuoff:
10B5 78B1           2793                                     mov             r0,#vichR
10B7 7600           2794                                     mov             @r0,#00
10B9 C215           2795                                     clr             biteizm
10BB 120000   F     2796                                     call    loadus
10BE 020000   F     2797                                     jmp             out7
10C1 75EF10         2798                                     mov             RSTSRC,#10h
                    2799                                     ;jmp            begin;onmem11
                    2800     
10C4 020000   F     2801     rendkalib:              jmp             endkalib
                    2802     
10C7 2012FA         2803     knAVP:  jb              bitklb,rendkalib        
10CA 200505         2804                                     jb              bitavp,meavp
10CD D205           2805                                     setb    bitavp
10CF 020000   F     2806                                     jmp             onmem11
10D2 C205           2807     meavp:                  clr             bitavp
10D4 020000   F     2808                                     jmp             onmem11
                    2809     
10D7 201207         2810     knleft: jb              bitklb,lefkl
                    2811                                     ;;;;;;;;
10DA 79AE           2812                                mov          r1,#diap
10DC 07             2813                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
10DD B70A03         2814                                     cjne    @r1,#0ah,nodi6
10E0 17             2815                                     dec             @r1
10E1 8099           2816     lefkl:  jmp             an_t7
                    2817     
10E3                2818     nodi6:             ;    cjne    @r1,#0,an_t7
10E3 120000   F     2819                                      call    clmassix
10E6 78B3           2820                                     mov             r0,#summa
10E8 120000   F     2821                                     call    clear4  
10EB 786A           2822                                     mov             r0,#rez_A0
10ED 120000   F     2823                                     call    clear4  
10F0 120000   F     2824                                     call    loadUS
10F3 8087           2825                                jmp          an_t7
                    2826     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    45

10F5 200F0F         2827     knNUL:                  jb              bitnul,ybnul
10F8 D20F           2828                                     setb    bitnul
10FA 789C           2829                                     mov             r0,#rez_A3      ;A3
10FC 120000   F     2830                                     call    resar2
10FF 786A           2831                                     mov             r0,#rez_A0      
1101 120000   F     2832                                     call    saver2;A0<-A3
1104 020000   F     2833                                     jmp             goto7;an_t7
                    2834     
1107 C20F           2835     ybnul:                  clr             bitnul
1109 900000   F     2836                                      mov    DPTR,#ch0 
110C 120000   F     2837                                     CALL   ldc_long          ; r2..r5 <-- 0
110F 786A           2838                                     mov             r0,#rez_A0      ;A0=0
1111 120000   F     2839                                     call    saver2
1114 020000   F     2840                                     jmp             goto7;an_t7
                    2841     
1117 30101E         2842     labelH:                 jnb             bitt2,nolah
111A 75B0FB         2843                                     mov             p3,#0fbh   ;вход в режим изм Т
111D 79B7           2844                                     mov             r1,#load;parT
111F 20B70D         2845                                     jb              p3.7,rhnot1
1122 B70003         2846                                     cjne    @r1,#0,inct;
1125 020000   F     2847                                     jmp             out7;hyest6
1128 17             2848     inct:                   dec             @r1                     ;Tизм+1
                    2849                             
1129 120000   F     2850                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
112C                2851     hnot2:          ;       call    ind
112C 020000   F     2852                                     jmp             out7
                    2853     
112F 020000   F     2854      rhnot1:                jmp             hnot1
                    2855      ;rnoviR:       jmp             noviR
1132 020000   F     2856      rlabelK:       jmp             labelK
1135 020000   F     2857      rlabelI:       jmp             labelI          
                    2858      ;;;;;;;;;;;;;;;;;;;
1138 3014F7         2859     nolah:          jnb             bitvich,rlabelK 
                    2860                                     
                    2861                             ;;;;;;
                    2862                             ;увеличить счетчик задержки клавиатуры
                    2863                     ;;              mov             r0,#chkl
                    2864                     ;;              mov             @r0,#27h
                    2865                     ;;              inc             r0
                    2866                     ;;              mov             @r0,#10h
                    2867                             ;;;;;;
                    2868     
113B 78B1           2869                             mov             r0,#vichR
113D B61128         2870                             cjne    @r0,#11h,rhnor11;rlabelI;;
1140 75B0FB         2871                             mov             p3,#0fbh   ;<-
1143 20B730         2872                             jb              p3.7,noh37;routF
1146 B6110B         2873                     cjne    @r0,#11h,hr12
1149 7613           2874                             mov             @r0,#13h        ;11= вычислить
114B 900000   F     2875                             mov             dptr,#teOUT;teVICH
114E 120000   F     2876     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
1151 020000   F     2877                             jmp             goto7;outF
1154 B61207         2878     hr12:           cjne    @r0,#12h,hnor12
1157 7611           2879     lovich:         mov             @r0,#11h
1159 900000   F     2880                             mov             dptr,#teVICH
115C 80F0           2881                             jmp             hvi1113         
115E B61307         2882     hnor12:         cjne    @r0,#13h,rhnor11
1161 7612           2883     loizmk:         mov             @r0,#12h
1163 900000   F     2884                             mov             dptr,#teIZMK    ;       изм конст
                    2885                                        
1166 80E6           2886                             jmp             hvi1113
                    2887     
1168 804C           2888     rhnor11:                jmp             hnor11
                    2889     
116A 8057           2890     rvvizko:                jmp             vvizko
116C C214           2891     vioutF:                 clr             bitvich
116E C206           2892                                                     clr             bitvi11
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    46

1170 020000   F     2893                                                     jmp             outF
1173 020000   F     2894     toutF:                  jmp     outF
                    2895     
1176 75B0F7         2896     noh37:          mov             p3,#0f7h
1179 20B7F7         2897                             jb              p3.7,toutF;vioutF
117C B611EB         2898                             cjne    @r0,#11h,rvvizko
117F D206           2899                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1181 D204           2900              setb   bitizm
1183 534B07         2901                              anl            bufind+11,#07h
1186 434B10         2902                              orl            bufind+11,#10h;точка после 1 знакоместа
1189 020000   F     2903     routF:          jmp             out7;goto7;outF
                    2904     
                    2905     
                    2906     
118C 80E8           2907     rnoh37:         jmp             noh37
                    2908     
118E B6120D         2909     norr11:         cjne    @r0,#12h,norr12
1191 75B0FB         2910                             mov             p3,#0fbh   ;<-
1194 20B7F5         2911                             jb              p3.7,rnoh37;routF
1197 760B           2912                             mov             @r0,#11;12->11
1199 80BC           2913                             jmp             lovich
                    2914     
119B 020000   F     2915     labelI2:                jmp             labelI
119E B613FA         2916     norr12:         cjne    @r0,#13h,labelI2
11A1 75B0FB         2917                             mov             p3,#0fbh   ;<-
11A4 20B7E5         2918                             jb              p3.7,rnoh37
11A7 7612           2919                             mov             @r0,#12h
11A9 80B6           2920                             jmp             loizmk
                    2921                             ;;;;
11AB C214           2922     clrvich:                clr             bitvich
11AD D204           2923                             setb    bitizm
11AF A8B2           2924                             mov             r0,marker
11B1 76FF           2925                             mov             @r0,#0ffh
11B3 020000   F     2926                              jmp    goto7;  routF
                    2927     
                    2928     ;rnoh37:                jmp             noh37
                    2929      ;ввод изм конст
11B6 B612E5         2930     hnor11:         cjne    @r0,#12h,norr12;clrvich
11B9 75B0FB         2931                              mov            p3,#0fbh   
11BC 20B7CD         2932                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
11BF 7611           2933                             mov             @r0,#11h
11C1 8094           2934                             jmp             lovich
                    2935     
11C3 78B1           2936     vvizko:         mov             r0,#vichR
11C5 E6             2937                             mov             a,@r0
                    2938                     ;       cjne    @r0,#12h,clrvich
11C6 B412E2         2939                             cjne    a,#12h,clrvich
11C9 7621           2940                             mov             @r0,#21h                ;изм конст->U=+0000     (vv
                             od)
11CB 78B2           2941                             mov             r0,#marker
11CD 7604           2942                             mov             @r0,#4;9
11CF 753A04         2943                             mov             movleft,#4
11D2 753B07         2944                             mov             movrig,#7
11D5 900000   F     2945                             mov             dptr,#teAequ0
11D8 120000   F     2946                             call    lotext
                    2947                             
11DB 120000   F     2948                             call    outA
11DE 534B0F         2949                             anl                     bufind+11,#0fh
                    2950             ;       mov             a,bufind+11
                    2951             ;       anl             a,#0f0h
                    2952             ;       mov             bufind+11,a
11E1 434B40         2953                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    2954                             
11E4 020000   F     2955                             jmp             goto7;routF
                    2956     ;hnor13:                jmp             hnor12          
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    47

11E7 B6210C         2957     izchi:          cjne    @r0,#21h,tlabelI
                    2958     ;<- при вводе цифр А                            
                    2959                     ;        mov            p3,#0fbh   
                    2960                     ;       jnb             p3.7,li21
                    2961             ;clr            bitmig
11EA 78B2           2962                             mov             r0,#marker
11EC 16             2963                             dec             @r0
11ED B60201         2964                             cjne    @r0,#2,li21
11F0 06             2965                             inc             @r0;marker=3 +/-
11F1 C219           2966     li21:           clr             bitmig
11F3 020000   F     2967                             jmp             goto7;outF
                    2968     
11F6 020000   F     2969     tlabelI:        jmp             labelI
                    2970     
                    2971     ;                       load    0 1 2 3 4 5             
11F9 06050403       2972     sootv:          db              6,5,4,3,2,1;parT
11FD 0201                    
                    2973     ;
                    2974     
                    2975     ;нажата кн ввод при наборе Т
11FF 75B0F7         2976     hnot1:                  mov             p3,#0f7h
1202 20B784         2977                                     jb              p3.7,routF;out7
1205 B70541         2978                                     cjne    @r1,#5,nohnot1  ;r1=load
1208 794A           2979                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
120A E7             2980                                     mov             a,@r1
120B 4440           2981                                     orl             a,#40h;.6
120D F7             2982                                     mov             @r1,a
120E 8000           2983                                     jmp             loadb
                    2984                                     
                    2985                                     
1210 789A           2986     loadB:                  mov             r0,#parT
1212 900000   F     2987                                     mov             dptr,#sootv
1215 79B7           2988                                     mov             r1,#load                
1217 E7             2989                                     mov             a,@r1;load
1218 93             2990                                     movc    a,@a+dptr
1219 F6             2991                                     mov             @r0,a
121A 120000   F     2992                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    2993                                      ;r4=b1 r5=b2
121D 120000   F     2994                                     call    iniacp;инициализация АЦП
1220 120000   F     2995                                     call    loadUS
1223 120000   F     2996                                     call    clmassix        
1226 D204           2997                                     setb    bitizm
1228 C210           2998                                     clr             bitt2
122A C3             2999                                      clr            c
122B 789A           3000                                  mov                r0,#parT
122D 79AF           3001                                      mov            r1,#parN
122F 7402           3002                                  mov                a,#2
1231 96             3003                                 subb                a,@r0
1232 5005           3004                                 jnc                 loadB2
1234 7701           3005                                     mov             @r1,#1;N=1         ;T>=2
1236 020000   F     3006     bout7:                  jmp             goto7;out7
                    3007     
1239 B702FA         3008     loadB2:                 cjne    @r1,#2,bout7
123C 7702           3009                                     mov             @r1,#2;N=2
123E 020000   F     3010                                     jmp             goto7;out7
1241                3011     nohnot2:                ;в буфере 1 зажечь <=0,1s
1241 794A           3012                                     mov             r1,#bufind+10
1243 E7             3013                                     mov             a,@r1
1244 4410           3014                                     orl             a,#10h;.4
1246 F7             3015                                     mov             @r1,a
1247 80C7           3016                                     jmp             loadB
1249 B704F5         3017     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
124C 794A           3018                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
124E E7             3019                                     mov             a,@r1
124F 4420           3020                                     orl             a,#20h;.5
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    48

1251 F7             3021                                     mov             @r1,a
1252 80BC           3022                                     jmp             loadB
                    3023     
                    3024     ;кнопка ПАМЯТЬ
1254 C204           3025     knMEM:                  clr             bitizm          ;off IZM
1256 900000   F     3026                                     mov             dptr,#teCLE
1259 120000   F     3027                                     call    lotext    ;в буф2 записать ОЧИСТКА
125C D20B           3028                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
125E 534BEF         3029                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1261 78B0           3030                                     mov             r0,#level
1263 7611           3031                                     mov             @r0,#11h
1265 783D           3032     onmem11:                mov             r0,#chkl
1267 7603           3033                                     mov             @r0,#03
1269 08             3034                                     inc             r0
126A 76E8           3035                                     mov             @r0,#0e8h               ;1000
126C 020000   F     3036                                     jmp             out7;goto7;out7
                    3037     
126F 020000   F     3038     rnomemk:                jmp             nomemk          ;
                    3039     
1272 78B0           3040     outkmem:        mov                     r0,#level
1274 7600           3041                                             mov                     @r0,#0
1276 78B1           3042                                             mov                     r0,#vichR
1278 7600           3043                                             mov                     @r0,#0
127A C20B           3044                                             clr                     bitmem
127C C214           3045                                             clr                     bitvich
127E C206           3046                                             clr                     bitvi11
1280 C211           3047                                             clr                     bitmenu
1282 D204           3048                                             setb            bitizm
1284 78B2           3049                                             mov                     r0,#marker
1286 76FF           3050                                             mov                     @r0,#0ffh
1288 020000   F     3051                                             jmp                     goto7   
128B                3052     labelK:
                    3053     
                    3054     ;;;;;;;;;;;;
128B 300BE1         3055                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
128E 75B0EF         3056                                     mov                     p3,#0efh
1291 30B7DE         3057                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1294 78B0           3058                                      mov            r0,#level
1296 B6114E         3059                               cjne          @r0,#11h,klev1;nome11
1299 75B0FB         3060     lefmem11:         mov           p3,#0fbh
129C E5B0           3061                               mov           a,p3
129E 20E70E         3062                               jb            acc.7,rkvvod0
12A1 B6110E         3063                               cjne          @r0,#11h,locle          ;<-memory
12A4 7614           3064                               mov           @r0,#14h
12A6 900000   F     3065     lolist:           mov           dptr,#teSTAT
12A9 120000   F     3066                               call          lotext           ;СТАТИСТИКА
12AC 020000   F     3067                               jmp   goto7;  outF
                    3068     
12AF 020000   F     3069     rkvvod0:        jmp             kvvod0
                    3070     
                    3071     
12B2 B6120B         3072     locle:          cjne            @r0,#12h,lowr           ;<-memory
12B5 7611           3073                               mov           @r0,#11h                   ;ОЧИСТКА
12B7 900000   F     3074     loadcle:          mov           dptr,#teCLE
12BA 120000   F     3075                               call          lotext
12BD 020000   F     3076                               jmp           goto7;outF
                    3077     
12C0 B6130B         3078     lowr:                   cjne    @r0,#13h,lostat
12C3 7612           3079                                             mov             @r0,#12h
12C5 900000   F     3080      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
12C8 120000   F     3081                             call    lotext
12CB 020000   F     3082                             jmp             goto7;outF
                    3083     
12CE 7613           3084     lostat:         mov             @r0,#13h
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    49

12D0 900000   F     3085                                     mov             dptr,#teLIST              ;ПРОСМОТР
12D3 120000   F     3086                             call    lotext
12D6 020000   F     3087                             jmp             goto7;outF
                    3088     
12D9 B6141A         3089     me_14:cjne              @r0,#14h,klev22
12DC 7613           3090                                             mov             @r0,#13h
12DE 900000   F     3091                             mov             dptr,#teLIST              ;;ПРОСМОТР
12E1 120000   F     3092                             call    lotext
12E4 020000   F     3093                             jmp             goto7
12E7 B61202         3094      klev1:          cjne   @r0,#12h,klev2
12EA 80AD           3095                             jmp             lefmem11
12EC B61302         3096     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
12EF 80A8           3097                             jmp             lefmem11
12F1 B61402         3098     klev3:           cjne   @r0,#14h,klev22;
12F4 80A3           3099                             jmp             lefmem11
                    3100     ;<- vvod на более низких уровнях
12F6 B62117         3101     klev22:         cjne    @r0,#21h,klev21
12F9 75B0FB         3102     lev220:         mov             p3,#0fbh
12FC 20B763         3103                             jb              p3.7,kgo23
12FF B6210B         3104                             cjne    @r0,#21h,kfullr
1302 7622           3105                             mov             @r0,#22h
1304 900000   F     3106                             mov             dptr,#teBL
1307 120000   F     3107                             call    lotext
130A 020000   F     3108                             jmp             goto7;outF
130D 020000   F     3109     kfullr:         jmp             kfull                           
1310 B6220E         3110     klev21:         cjne    @r0,#22h,klev23
1313 80E4           3111                             jmp             lev220
                    3112     
1315 020000   F     3113     rlabL2:         jmp             labL2
1318 020000   F     3114     rlabM:          jmp             labM
131B 020000   F     3115     ques:                   jmp             out7
131E 020000   F     3116     ddoutfr:        jmp             ddoutf
                    3117     
1321 B623F4         3118     klev23:          cjne   @r0,#23h,rlabM
1324 75B0FB         3119                              mov    p3,#0fbh
1327 30B7F1         3120                              jnb            p3.7,ques;errr labL2
132A 75B0F7         3121                              mov    p3,#0f7h
132D 20B7EE         3122                              jb             p3.7,ddoutfr
                    3123                                             ;       считать с индикатора  
1330 C3             3124                                     clr                     c
1331 E547           3125                                mov          a,bufind+7      
1333 9430           3126                                      subb           a,#30h
1335 B40002         3127                                      cjne           a,#0,chaibl
1338 7401           3128                                      mov            a,#1                    ;номера блоков 1..4
133A F538           3129     chaibl:  mov            nblok,a
                    3130                                
                    3131                              ;очистить блок памяти с набранным номером
                    3132                              ;150h..1000h( 150h+nblok*320h)
133C 120000   F     3133                                     call            adrblok         ;dptr-
                    3134     
133F 79B8           3135                                     mov                     r1,#work                ;обьем блок
                             а
1341 7703           3136                                     mov                     @r1,#03
1343 09             3137                                     inc                     r1
1344 7720           3138                                     mov                     @r1,#20h                        ;32
                             0h
                    3139     
1346                3140     goonoff:
1346 E4             3141                                     clr                     a
1347 F0             3142                                     movx            @dptr,a
1348 A3             3143                                     inc                     dptr
                    3144     
1349 79B9           3145                                     mov                     r1,#work+1
134B 120000   F     3146                                     call            chminus
134E 78B8           3147                                     mov             r0,#work
1350 E6             3148                             mov             a,@r0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    50

1351 30E7F2         3149                             jnb             acc.7,goonoff
                    3150     
1354 C20B           3151                              clr    bitmem  ;сбр признак памяти 
1356 D204           3152                              setb   bitizm
1358 78B2           3153                              mov            r0,#marker
135A 76FF           3154                              mov            @r0,#0ffh
135C 020000   F     3155                              jmp    goto7
                    3156     
135F 020000   F     3157     rddoutf:        jmp             ddoutf
                    3158     
                    3159     ;vvod   БЛОК->БЛОК 00           
1362 75B0F7         3160     kgo23:           mov    p3,#0f7h
1365 20B7F7         3161                             jb              p3.7,rddoutf
1368 B6216B         3162                             cjne    @r0,#21h,go23no
                    3163                             ;очистить память 150..dd0h
                    3164                             ;1й блок
136B 900150         3165                              mov                    dptr,#150h
136E 79B8           3166                                     mov                     r1,#work                ;обьем блок
                             а
1370 7703           3167                                     mov                     @r1,#03
1372 09             3168                                     inc                     r1
1373 7720           3169                                     mov                     @r1,#20h                        ;32
                             0h
                    3170     
1375                3171     gooff1:
1375 E4             3172                                     clr                     a
1376 F0             3173                                     movx            @dptr,a
1377 A3             3174                                     inc                     dptr
                    3175     
1378 79B9           3176                                     mov                     r1,#work+1
137A 120000   F     3177                                     call            chminus
137D 78B8           3178                                     mov             r0,#work
137F E6             3179                             mov             a,@r0
1380 30E7F2         3180                             jnb             acc.7,gooff1
                    3181     ;2й блок
1383 900470         3182     mov                     dptr,#470h
1386 79B8           3183                                     mov                     r1,#work                ;обьем блок
                             а
1388 7703           3184                                     mov                     @r1,#03
138A 09             3185                                     inc                     r1
138B 7720           3186                                     mov                     @r1,#20h                        ;32
                             0h
                    3187     
138D                3188     gooff2:
138D E4             3189                                     clr                     a
138E F0             3190                                     movx            @dptr,a
138F A3             3191                                     inc                     dptr
                    3192     
1390 79B9           3193                                     mov                     r1,#work+1
1392 120000   F     3194                                     call            chminus
1395 78B8           3195                                     mov             r0,#work
1397 E6             3196                             mov             a,@r0
1398 30E7F2         3197                             jnb             acc.7,gooff2
                    3198     
                    3199     ;3й блок
139B 900490         3200                             mov                     dptr,#490h
139E 79B8           3201                                     mov                     r1,#work                ;обьем блок
                             а
13A0 7703           3202                                     mov                     @r1,#03
13A2 09             3203                                     inc                     r1
13A3 7720           3204                                     mov                     @r1,#20h                        ;32
                             0h
                    3205     
13A5                3206     gooff3:
13A5 E4             3207                                     clr                     a
13A6 F0             3208                                     movx            @dptr,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    51

13A7 A3             3209                                     inc                     dptr
                    3210     
13A8 79B9           3211                                     mov                     r1,#work+1
13AA 120000   F     3212                                     call            chminus
13AD 78B8           3213                                     mov             r0,#work
13AF E6             3214                             mov             a,@r0
13B0 30E7F2         3215                             jnb             acc.7,gooff3
                    3216     ;4й блок
13B3 900AB0         3217     mov                     dptr,#0ab0h
13B6 79B8           3218                                     mov                     r1,#work                ;обьем блок
                             а
13B8 7703           3219                                     mov                     @r1,#03h
13BA 09             3220                                     inc                     r1
13BB 7720           3221                                     mov                     @r1,#20h                        ;32
                             0h
                    3222     
13BD                3223     gooff4:
13BD E4             3224                                     clr                     a
13BE F0             3225                                     movx            @dptr,a
13BF A3             3226                                     inc                     dptr
                    3227     
13C0 79B9           3228                                     mov                     r1,#work+1
13C2 120000   F     3229                                     call            chminus
13C5 78B8           3230                                     mov             r0,#work
13C7 E6             3231                             mov             a,@r0
13C8 30E7F2         3232                             jnb             acc.7,gooff4
13CB C20B           3233                             clr             bitmem
13CD D204           3234                             setb    bitizm
13CF 78B2           3235                                     mov             r0,#marker
13D1 76FF           3236                              mov            @r0,#0ffh
13D3 020000   F     3237                             jmp             goto7
                    3238     
13D6 7623           3239     go23no:    mov          @r0,#23h
13D8 753B08         3240                                             mov                     movrig,#8
13DB 753A07         3241                                             mov             movleft,#7
13DE 8055           3242                             jmp             loblok;БЛОК 00
                    3243     
13E0 7621           3244     kfull:          mov             @r0,#21h
13E2 8025           3245                             jmp             gofull
                    3246                             
                    3247                                             
13E4 020000   F     3248     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3249                             
13E7 75B0FB         3250     nome11:           mov           p3,#0fbh
13EA E5B0           3251                               mov           a,p3
13EC 20E70D         3252                               jb            acc.7,kvvod0
13EF B61205         3253                               cjne          @r0,#12h,mem12no        
13F2 7611           3254                               mov           @r0,#11h                ;ОЧИСТКА
13F4 020000   F     3255                               jmp            loadcle
                    3256     
13F7                3257     mem12no:        ;cjne           @r0,#13h,lowr           
13F7 7612           3258                               mov           @r0,#12h                   ;
13F9 020000   F     3259                               jmp           lowr1                     ;ЗАПИСЬ
                    3260     
13FC 75B0F7         3261     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
13FF 20B70F         3262                               jb            p3.7,ddoutf
1402 78B0           3263                               mov           r0,#level
1404 B61129         3264                               cjne          @r0,#11h,mvv11
1407 7621           3265                               mov           @r0,#21h                ;ПОЛНАЯ
1409 900000   F     3266     gofull:           mov           dptr,#teFULL
140C 120000   F     3267                               call          lotext
140F 8049           3268                                     jmp             mlabL2  ;<-????????/
                    3269     
1411                3270     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3271     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3272     ;т е сохранить ее в ячейке для мигания в противном случае
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    52

                    3273     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3274     ;       знакоместа
1411 78B2           3275                                                     mov             r0,#marker
1413 7440           3276                                     mov             a,#bufind
1415 26             3277                                             add             a,@r0                   ;a=bufind+m
                             arker
1416 F9             3278                                             mov             r1,a
1417 19             3279                                             dec             r1      ;       inc             r1
1418 873C           3280                                             mov             savba,@r1
141A C219           3281                                             clr             bitmig
                    3282     ;;;;;;;;;;;;;;;;
141C 78B2           3283                       mov           r0,#marker      ;курсор слева   ?
141E E53A           3284                             mov             a,movleft
1420 C3             3285                             clr             c
1421 96             3286                             subb    a,@r0
1422 7006           3287                             jnz        left21
1424 E53B           3288                             mov             a,movrig;уст в правую позицию
1426 F6             3289                             mov             @r0,a
                    3290     
1427 020000   F     3291                             jmp             goto7                                            
142A E53A           3292     left21:         mov             a,movleft;уст в левую позицию
142C F6             3293                             mov             @r0,a   
142D 020000   F     3294                             jmp             goto7
                    3295     
                    3296     
1430 B6120F         3297     mvv11:            cjne          @r0,#12h,mvv12
1433 7631           3298                                     mov             @r0,#31h
1435 900000   F     3299     loblok:                 mov             dptr,#teBL0;БЛОК 0
1438 120000   F     3300                                     call    lotext
143B 78B2           3301                                     mov             r0,#marker
143D 7607           3302                                     mov             @r0,#7
                    3303                                     ;mov            movrig,#9
                    3304                                     ;mov            movleft,#6
143F 020000   F     3305                                     jmp             goto7;outF
1442 B61411         3306     mvv12:  cjne            @r0,#14h,bl_li
1445 7661           3307                                     mov                     @r0,#61h
1447 900000   F     3308                                     mov             dptr,#teMIN;
144A 120000   F     3309                                     call    lotext
144D 120000   F     3310                                     call    vichmin
1450 120000   F     3311                                     call    z_1s
1453 020000   F     3312                                     jmp             out7;goto7;outF
                    3313     
1456 7641           3314     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
1458 80DB           3315                                     jmp             loblok
                    3316     
                    3317     
                    3318     
145A                3319     mlabL2:         ;jmp            labL2
                    3320                                             ;  уст курсор в правую позицию 
                    3321                                     ;                               29.12.06
                    3322     ;;;;;;;;;;;;;;;;;;
                    3323     ;необходимо не портить цифру в следуюем справа знакоместе
                    3324     ;т е сохранить ее в ячейке для мигания в противном случае
                    3325     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3326     ;       знакоместа
145A 78B2           3327                                             mov             r0,#marker
145C 7440           3328                                     mov             a,#bufind
145E 26             3329                                             add             a,@r0                   ;a=bufind+m
                             arker
145F F9             3330                                             mov             r1,a
1460 09             3331                                             inc             r1
1461 873C           3332                                             mov             savba,@r1
                    3333     ;;;;;;;;;;;;;;;;
1463 78B2           3334                       mov           r0,#marker      ;курсор справа  ?
1465 E53B           3335                             mov             a,movrig
1467 C3             3336                             clr             c
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    53

1468 96             3337                             subb    a,@r0
1469 6006           3338                             jz         equ2l
146B E53B           3339                             mov             a,movrig;уст в правую позицию
146D F6             3340                             mov             @r0,a
                    3341     ;                       lool
146E 020000   F     3342                             jmp             goto7                                            
1471 E53A           3343     equ2l:          mov             a,movleft;уст в левую позицию
1473 F6             3344                             mov             @r0,a   
1474 020000   F     3345                             jmp             goto7
                    3346                     
                    3347     
1477 B63159         3348     labM:                   cjne    @r0,#31h,nom31
147A 75B0FB         3349                                     mov             p3,#0fbh
147D 30B7DA         3350                                     jnb             p3.7,mlabL2
1480 75B0F7         3351                                mov          p3,#0f7h
1483 20B78B         3352                                jb           p3.7,ddoutf
                    3353                                
1486 7632           3354                                mov          @r0,#32h                        ;ИНТ 0000
                    3355                                     ;       считать с индикатора  
1488 C3             3356     blokvv:         clr                     c
1489 E547           3357                                mov          a,bufind+7      
148B 9430           3358                                      subb           a,#30h
148D B40002         3359                                      cjne           a,#0,blokvvc
1490 7401           3360                                      mov            a,#1                    ;номера блоков 1..4
                    3361     
1492 F538           3362     blokvvc: mov            nblok,a
1494 900000   F     3363                                mov          dptr,#teINT;ИНТ 0000c
1497 120000   F     3364                                call         lotext
                    3365                                      ;anl           bufind+11,#0efh
149A 78B2           3366                                mov          r0,#marker
149C 7605           3367                                mov          @r0,#5
149E 753B08         3368                                mov          movrig,#8
14A1 753A05         3369                                mov          movleft,#5
14A4 789A           3370                                      mov            r0,#parT
14A6 B60609         3371                                     cjne            @r0,#6,innot6
14A9 534BF0         3372                                     anl                     bufind+11,#0f0h;after 5- 0.000c
14AC 434B80         3373                                     orl                     bufind+11,#80h
14AF 020000   F     3374                                     jmp                     goto7
14B2 B60309         3375     innot6: cjne            @r0,#3,innot3
14B5 534BF0         3376                                     anl                     bufind+11,#0f0h;after 7- 000.0c
14B8 434B20         3377                                     orl                     bufind+11,#20h
                    3378                                     ;call           ind
14BB 020000   F     3379                                     jmp                     out7;goto7
14BE C3             3380     innot3: clr                     c
14BF 7403           3381                                     mov                     a,#3
14C1 96             3382                                     subb            a,@r0
14C2 5009           3383                                     jnc                     innot1_2
14C4 534BF0         3384                                     anl                     bufind+11,#0f0h;after 6- 00.00c
14C7 434B40         3385                                     orl                     bufind+11,#40h
14CA 020000   F     3386                                     jmp                     goto7
                    3387     
14CD                3388     innot1_2:
14CD 534BF0         3389                                     anl                     bufind+11,#0f0h;0000c
                    3390                                                                     
14D0 020000   F     3391     rgoto7: jmp        goto7;outF
                    3392     
14D3 B63260         3393     nom31:             cjne         @r0,#32h,nom32
14D6 75B0FB         3394                                     mov             p3,#0fbh
14D9 20B71F         3395                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3396                                     
14DC                3397     lefcur:         ;;кн <- 32 нач блок 000
                    3398     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3399     ;т е сохранить ее в ячейке для мигания в противном случае
                    3400     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3401     ;       знакоместа
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    54

14DC C219           3402                                                     clr             bitmig
14DE 78B2           3403                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
14E0 7440           3404                                     mov             a,#bufind
14E2 26             3405                                             add             a,@r0                   ;a=bufind+m
                             arker
14E3 F9             3406                                             mov             r1,a
14E4 19             3407                                             dec             r1;;;;;;;;;;;
14E5 873C           3408                                             mov             savba,@r1
                    3409                                             
14E7 78B2           3410                                                     mov             r0,#marker      ;курсор сле
                             ва?
14E9 E53A           3411                             mov             a,movleft
14EB C3             3412                             clr             c
14EC 96             3413                             subb    a,@r0
14ED 7006           3414                             jnz        noequ2
14EF E53B           3415                             mov             a,movrig
14F1 F6             3416                             mov             @r0,a;уст в крайнюю правую позицию
14F2 020000   F     3417                             jmp             goto7
14F5 120000   F     3418     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
14F8 020000   F     3419                             jmp        goto7        
                    3420                                                                       
                    3421     
                    3422     ;;;;;;;;;;;;;;;;;;
14FB                3423     vvinte:         ;ввод интервал                          
14FB 75B0F7         3424     no31n:             mov          p3,#0f7h
14FE 20B7CF         3425                                     jb              p3.7,rgoto7
1501 7633           3426                                     mov             @r0,#33h
                    3427                                     ;считать с индикатора введенный интервал
1503 7F0A           3428                                             mov             r7,#10
1505 7853           3429                                     mov             r0,#adec
1507 120000   F     3430                                     call    clearN
150A 120000   F     3431                                     call    upak4                   
150D 784F           3432                                     mov             r0,#abin
150F 7953           3433                                     mov             r1,#adec                        ;мл        
                              ст
1511 120000   F     3434                                     call    decbin                  ;abin..abin+3 (hex)
1514 794F           3435                                     mov             r1,#abin
1516 78CE           3436                                     mov             r0,#interva+1
1518 E7             3437                                     mov             a,@r1
1519 F6             3438                                     mov             @r0,a
151A 18             3439                                     dec             r0
151B 09             3440                                     inc             r1
151C E7             3441                                     mov             a,@r1
151D F6             3442                                     mov             @r0,a
                    3443                                     
151E 78D5           3444                                     mov             r0,#volume                      ;объем блок
                             а
1520 7600           3445                                     mov             @r0,#0
1522 08             3446                                     inc             r0
1523 76C7           3447                                     mov             @r0,#0c7h
1525 120000   F     3448                                     call            adrblok;dptr
1528 120000   F     3449                                     call            save_hl;1я ячейка блока
152B 78B2           3450                                mov          r0,#marker
152D 76FF           3451                                mov          @r0,#0ffh
152F D204           3452                                      setb           bitizm
1531 C20B           3453                                      clr            bitmem
1533 020000   F     3454                                jmp     goto7;
                    3455     
                    3456     
1536 B6332B         3457     nom32:           cjne           @r0,#33h,nom33
1539 75B0FB         3458                              mov            p3,#0fbh
153C 30B79D         3459                              jnb            p3.7,lefcur
153F 75B0F7         3460                              mov            p3,#0f7h
1542 20B78B         3461                              jb             p3.7,rgoto7
                    3462                              ;запомнить номер ячейки конца блока
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    55

1545 7634           3463                              mov    @r0,#34h
1547 7F0A           3464     INTn:                   mov             r7,#10
1549 7853           3465                                     mov             r0,#adec
154B 120000   F     3466                                     call    clearN
154E 120000   F     3467                                     call    upak3                   
1551 784F           3468                                     mov             r0,#abin
1553 7953           3469                                     mov             r1,#adec                        ;мл        
                              ст
1555 120000   F     3470                                     call    decbin                  ;abin..abin+3 (hex)
1558 120000   F     3471                                     call    loadr2                  ;r2..r5
155B 120402         3472                                     call    altof                   ;r2..r5->int
155E 020000   F     3473     dgoto7:                  jmp            goto7
                    3474     
1561 020000   F     3475     rlefcur:                jmp             lefcur
                    3476     
1564 B6345B         3477     nom33:          cjne            @r0,#34h,labelP
1567 75B0FB         3478                               mov           p3,#0fbh
156A 30B7F4         3479                              jnb            p3.7,rlefcur
156D 75B0F7         3480                              mov            p3,#0f7h
1570 20B7EB         3481                              jb             p3.7,dgoto7
1573 7635           3482                              mov            @r0,#35h
1575 78B2           3483                              mov            r0,#marker
1577 76FF           3484                              mov            @r0,#0ffh
                    3485                              ;T1<-число на индикаторе
                    3486                                               ;vvod КОН БЛ 000
1579 78CF           3487                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
157B 7630           3488                              mov            @r0,#30h  
157D C20B           3489                              clr            bitmem
157F D204           3490                              setb           bitizm;;;;      
1581 020000   F     3491                             jmp        goto7
1584 020000   F     3492     vodm11_15:                      jmp             vvodm11_15
1587 020000   F     3493     me11_15de:                      jmp             me11_15dec
158A 020000   F     3494     moutkmem:                               jmp             outkmem
                    3495     
                    3496     ;обработка кнопки меню ввод
158D 301132         3497     labelS:         jnb                     bitmenu,labelP
1590 75B0DF         3498                                             mov                     p3,#0dfh
1593 30B7F4         3499                                             jnb                     p3.7,moutkmem
1596 78B1           3500                                             mov                     r0,#vichR
1598 7415           3501                                             mov                     a,#15h
159A C3             3502                                             clr                     c
159B 96             3503                                             subb            a,@r0
159C 4021           3504                                             jc                      rme21_23
                    3505                             
159E 75B0FB         3506                                             mov                     p3,#0fbh
15A1 20B7E0         3507                                             jb                      p3.7,vodm11_15
15A4 78B1           3508                                             mov                     r0,#vichR
15A6 B611DE         3509                                             cjne                    @r0,#11h,me11_15de;<-
15A9 7615           3510                                             mov                     @r0,#15h
15AB 900000   F     3511                                             mov                     dptr,#teKALIB
15AE 120000   F     3512                                             call            lotext
15B1 020000   F     3513                                             jmp                     onmem11
15B4 C211           3514     menuon:         clr             bitmenu                 ;off menu
15B6 D204           3515                                             setb    bitizm
                    3516     
15B8 78B1           3517                                     mov             r0,#vichR
15BA 7600           3518                                     mov             @r0,#0
15BC 020000   F     3519                                     jmp             onmem11
                    3520     
                    3521                                             ;;;;;
                    3522             
15BF 020000   F     3523     rme21_23:               jmp             me21_23 
                    3524                             
                    3525     ;режим просмотра
15C2 B64130         3526     labelP:                 cjne            @r0,#41h,govvlist
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    56

15C5 7642           3527                                                     mov                     @r0,#42h
                    3528                                                     ;       считать с индикатора  
15C7 C3             3529                                             clr                     c
15C8 E547           3530                                mov          a,bufind+7      
15CA 9430           3531                                      subb           a,#30h
15CC B40002         3532                                      cjne           a,#0,chaipr
15CF 7401           3533                                      mov            a,#1
15D1 F538           3534     chaipr:                          mov            nblok,a
15D3 900000   F     3535                                mov          dptr,#teCH;ОТСЧЕТ 000
15D6 120000   F     3536                                call         lotext
15D9 534BEF         3537                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
15DC 78B2           3538                                mov          r0,#marker
15DE 7607           3539                                mov          @r0,#7
15E0 753B09         3540                                mov          movrig,#9
15E3 753A07         3541                                mov          movleft,#7
15E6 120000   F     3542                                             call            z_1s
15E9 020000   F     3543                        jmp     goto7;outF
15EC 020000   F     3544     label43:                jmp             label7
                    3545     
15EF 020000   F     3546     rlist_43:                       jmp                     list_43                            
                                  
15F2 020000   F     3547     mlabL2r:                        jmp                     mlabL2
15F5 B642F7         3548     govvlist:                       cjne            @r0,#42h,rlist_43
15F8 75B0FB         3549                                                                     mov                     p3,
                             #0fbh
15FB 30B7F4         3550                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
15FE 75B0F7         3551                                                             mov                     p3,#0f7h
1601 20B7E8         3552                                                             jb                      p3.7,label4
                             3
1604 7643           3553                                                             mov                     @r0,#43h;vv
                             od 
1606 78B2           3554                                                             mov                     r0,#marker
1608 76FF           3555                                                             mov                     @r0,#0ffh
160A 7F0A           3556                                                                     mov             r7,#10
160C 7853           3557                                     mov             r0,#adec
160E 120000   F     3558                                     call    clearN
1611 120000   F     3559                                     call    upak3                   
1614 784F           3560                                     mov             r0,#abin
1616 7953           3561                                     mov             r1,#adec                        ;мл        
                              ст
1618 120000   F     3562                                     call    decbin                  ;abin..abin+3 (hex)
161B 120000   F     3563                                     call    loadr2                  ;r2..r5
161E ED             3564                                     mov             a,r5                            ;сохр номер
                              лемента
161F F537           3565                                     mov             nelem,a
1621 120402         3566                                     call    altof                   ;r2..r5->int
1624 900000   F     3567                                     mov             dptr,#ch_1;
1627 120000   F     3568                                     call    ldc_ltemp                       ;r8..r11
162A 1201D1         3569                                     call    flsub
162D 900000   F     3570                                     mov             dptr,#ch_4;
1630 120000   F     3571                                     call    ldc_ltemp                       ;r8..r11
1633 120203         3572                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
1636 120343         3573                                     call            ftol                    ;r2..r5->hex
1639 C002           3574                                     push            rr2
163B C003           3575                                     push            rr3
163D C004           3576                                     push            rr4
163F C005           3577                                     push            rr5
1641 120000   F     3578                                     call            adrblok;dptr-
1644 D005           3579                                     pop                     rr5
1646 D004           3580                                     pop                     rr4
1648 D003           3581                                     pop                     rr3
164A D002           3582                                     pop                     rr2
164C 79D8           3583                                     mov                     r1,#copy_hl+1;saven_bl+1;сохр адрес
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    57

                              внешн озу введенного лемента
164E E582           3584                                     mov                     a,dpl
1650 2D             3585                                     add                     a,r5
1651 F582           3586                                     mov                     dpl,a
1653 F7             3587                                     mov                     @r1,a           ;low
1654 E583           3588                                     mov                     a,dph
1656 3C             3589                                     addc            a,r4
1657 F583           3590                                     mov                     dph,a
1659 19             3591                                     dec                     r1
165A F7             3592                                     mov                     @r1,a                   ;high
                    3593                             
165B                3594     li42_43:
165B 120000   F     3595                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
165E 900000   F     3596                                     mov             dptr,#ch10;
1661 120000   F     3597                                     call    ldc_ltemp
1664 120000   F     3598                                     call    zdiv    
                    3599                                     ;;;;;;;;;;;
1667 120000   F     3600                                     call    maform
                    3601                                     ;;;;
                    3602     
                    3603                                     ;;;;;;;
166A 784F           3604                                             mov             r0,#abin
166C 120000   F     3605                                             call    saver2
166F 7853           3606                                             mov             r0,#adec
1671 7952           3607                                             mov             r1,#abin+3      ;hex->10
1673 120000   F     3608                                             call    bindec
                    3609                                     
1676 785C           3610                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1678 7945           3611                                             mov             r1,#bufind+5
167A 7F07           3612                                             mov             r7,#7
167C E6             3613     ch43:                           mov             a,@r0
167D 2430           3614                                             add             a,#30h
167F F7             3615                                             mov             @r1,a
1680 19             3616                                             dec             r1
1681 18             3617                                             dec             r0
1682 DFF8           3618                                             djnz    r7,ch43
1684 7847           3619                                             mov             r0,#bufind+7
1686 762D           3620                                             mov             @r0,#2dh          ;-2..-9
1688 7840           3621                                             mov             r0,#bufind
168A 762B           3622                                             mov             @r0,#2bh
168C 300202         3623                                             jnb             znmat,nozzmi43;bitznak,nozzmi
168F 762D           3624                                             mov             @r0,#2dh
1691 79AE           3625     nozzmi43:                               mov             r1,#diap
1693 7848           3626                                             mov             r0,#bufind+8
1695 E7             3627                                             mov             a,@r1
1696 B40808         3628                                             cjne    a,#8,nodi8_43
1699 7630           3629                                             mov             @r0,#30h                 ;10-10
169B 18             3630                                             dec             r0
169C 7663           3631                                             mov             @r0,#63h;31h
169E 08             3632                                             inc             r0
169F 800E           3633                                             jmp             see_l43
16A1 B40908         3634     nodi8_43:       cjne    a,#9,nodi9_43
                    3635                                     
16A4 7631           3636                                             mov             @r0,#31h           ;10-11
16A6 18             3637                                             dec             r0
16A7 7663           3638                                             mov             @r0,#63h;31h
                    3639                                     
16A9 08             3640                                             inc             r0
16AA 8003           3641                                             jmp             see_l43
16AC 2432           3642     nodi9_43:               add             a,#32h
16AE F6             3643                                             mov             @r0,a;
16AF 08             3644     see_l43:                        inc             r0
16B0 7641           3645                                             mov             @r0,#"A";"E";
16B2 08             3646                                             inc             r0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    58

16B3 7600           3647                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
16B5 08             3648                                             inc             r0;             mov             buf
                             ind+11
16B6 76D0           3649                                             mov             @r0,#0d0h               ;bufind+11.
                             4 точка после первой цифры
16B8 120000   F     3650     out43:          call            ind
16BB 120000   F     3651                                             call            z_1s
16BE 020000   F     3652                                             jmp             out7                               
                                  
                    3653     
                    3654                                     ;;;;;;;;        
16C1 783D           3655     label7: mov             r0,#chkl
16C3 7604           3656                                     mov             @r0,#04;3
16C5 08             3657                                     inc             r0
16C6 76E8           3658                                     mov             @r0,#0e8h               ;1000
16C8 020000   F     3659                                     jmp             out7;
16CB B64351         3660     list_43:                cjne    @r0,#43h,noli_43
16CE 75B0FB         3661                                                     mov             p3,#0fbh                ;43
                             h <-
16D1 20B70A         3662                                                     jb              p3.7,vvod43             ;vv
                             od
16D4 C20B           3663                                                     clr             bitmem
16D6 D204           3664                                                     setb    bitizm
16D8 78B2           3665                                                     mov             r0,#marker
16DA 76FF           3666                                                     mov             @r0,#0ffh
16DC 80E3           3667                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3668     
16DE 7644           3669     vvod43:                 mov             @r0,#44h
16E0 E537           3670                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
16E2 F552           3671                                                     mov             abin+3,a
16E4 04             3672                                                     inc             a
16E5 F537           3673                                                     mov             nelem,a
16E7 E4             3674                                                     clr             a
16E8 F551           3675                                                     mov             abin+2,a
16EA F550           3676                                                     mov             abin+1,a
16EC F54F           3677                                                     mov             abin,a
                    3678                                             
16EE 7853           3679                                             mov             r0,#adec
16F0 7952           3680                                             mov             r1,#abin+3      ;hex->10
16F2 120000   F     3681                                             call    bindec
16F5 7840           3682                                             mov             r0,#bufind;почистить индикатор
16F7 7F0A           3683                                             mov             r7,#10
16F9 7420           3684                                             mov             a,#20h
16FB F6             3685     cle20:          mov             @r0,a
16FC 08             3686                                             inc             r0
16FD DFFC           3687                                             djnz    r7,cle20
                    3688                                             ;;;;;;
16FF 900000   F     3689                                             mov             dptr,#teCH;ОТСЧЕТ 000
1702 120000   F     3690                                call         lotext
1705 534BEF         3691                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
1708 785C           3692                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
170A 7949           3693                                             mov             r1,#bufind+9
170C 7F03           3694                                             mov             r7,#3
170E E6             3695     ch43_42:                                mov             a,@r0
170F 2430           3696                                             add             a,#30h
1711 F7             3697                                             mov             @r1,a
1712 19             3698                                             dec             r1
1713 18             3699                                             dec             r0
1714 DFF8           3700                                             djnz    r7,ch43_42
1716 120000   F     3701                                             call            ind
1719 120000   F     3702                                             call            z_1s
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    59

171C 020000   F     3703                                             jmp             out7
171F B64419         3704     noli_43:        cjne            @r0,#44h,vvosta
1722 7643           3705                                             mov                     @r0,#43h
1724 79D8           3706                                                     mov                     r1,#copy_hl+1;saven
                             _bl+1
1726 E7             3707                                                     mov                     a,@r1
1727 F582           3708                                                     mov                     dpl,a
1729 19             3709                                                     dec                     r1
172A E7             3710                                                     mov                     a,@r1;high
172B F583           3711                                                     mov                     dph,a
172D A3             3712                                                     inc                     dptr
172E A3             3713                                                     inc                     dptr
172F A3             3714                                                     inc                     dptr
1730 A3             3715                                                     inc                     dptr
1731 E583           3716                                                     mov                     a,dph
1733 F7             3717                                                     mov                     @r1,a
1734 09             3718                                                     inc                     r1
1735 E582           3719                                                     mov                     a,dpl
1737 F7             3720                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
1738 020000   F     3721                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3722     
173B B66111         3723     vvosta:                 cjne            @r0,#61h,vvostad
173E 7662           3724                                                     mov                     @r0,#62h
1740 900000   F     3725                                                     mov                     dptr,#teMAX;
1743 120000   F     3726                                                     call            lotext
1746 120000   F     3727                                                     call            vichmax
1749 120000   F     3728                                                     call            z_1s
174C 020000   F     3729                                                     jmp             goto7
                    3730     
174F                3731     vvostad:                ;cjne           @r0,#61h
174F 7663           3732                                                     mov                     @r0,#63h
1751 900000   F     3733                                                     mov             dptr,#teMid;
1754 120000   F     3734                                                     call    lotext
1757 120000   F     3735                                                     call            vichmean
175A 020000   F     3736                                                     jmp             goto7
                    3737     
175D 020000   F     3738     rLABELP:                jmp                     LABELP
1760 78B1           3739     vvodm11_15:     mov                     r0,#vichR;vvod
1762 75B0F7         3740                                                     mov                     p3,#0f7h
1765 20B7F5         3741                                             jb                      p3.7,rLABELP;????
                    3742                                     
                    3743     
1768 B61112         3744                                             cjne                    @r0,#11h,tome21
176B 7621           3745                                             mov                     @r0,#21h;vvod
176D 900000   F     3746                                             mov                     dptr,#teTE11
1770 120000   F     3747                                             call            lotext
1773 020000   F     3748                                             jmp                     onmem11
                    3749     
1776 16             3750     me11_15dec:             dec             @r0                             ;<-
1777 120000   F     3751     lokame1:        call            lomenu
177A 020000   F     3752                                             jmp                     onmem11
                    3753     
177D B61206         3754     tome21:         cjne                    @r0,#12h,tome13
                    3755                                             ;вкл тест интерфейса
1780 020000   F     3756                                             jmp             testrs;??????????
1783 020000   F     3757                                             jmp                     onmem11
                    3758     
1786 B61324         3759     tome13:         cjne                    @r0,#13h,tome14
1789 7631           3760                                             mov                     @r0,#31h
                    3761                                             
178B 7A50           3762                                             mov                     r2,#50h                    
                                  ;57.6->19.2
178D 7B2C           3763                                             mov                     r3,#2ch
178F 120454         3764                                             call            re4byte                 ;28..2bh 3b
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    60

                             ait-parol,1 bait skor
1792 E508           3765                                             mov                     a,r8
1794 B4000B         3766                                             cjne            a,#00,skor19
1797 900000   F     3767                                             mov                     dptr,#teS57_6;57,6
179A 120000   F     3768                                             call            lotext
179D C213           3769                                             clr                     bitv19
                    3770     
179F 020000   F     3771                                             jmp             onmem11
17A2 900000   F     3772     skor19:         mov                     dptr,#teS19_2
17A5 120000   F     3773                                             call            lotext
17A8 D213           3774                                             setb            bitv19
                    3775             
17AA 020000   F     3776                                             jmp                     onmem11
                    3777                                             
                    3778     
17AD B61415         3779     tome14:         cjne                    @r0,#14h,tome15
17B0 D204           3780                                             setb            bitizm
17B2 7881           3781                                             mov                     r0,#chavt
17B4 7600           3782                                             mov                     @r0,#0
17B6 08             3783                                             inc                     r0
17B7 7600           3784                                             mov                     @r0,#0
17B9 C211           3785     outmenu:        clr                     bitmenu
17BB 020000   F     3786                                             jmp                     out7
                    3787     
17BE 78B1           3788     goparom:        mov             r0,#vichR               ;режим меню 52
17C0 7652           3789                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
17C2 020000   F     3790                                             jmp                     goparol
17C5 2016F6         3791     tome15:         jb              bitpar,goparom  
17C8 7651           3792                                             mov                     @r0,#51h;ПАРОЛЬ 000
17CA 120000   F     3793                                             call            lomenu
17CD 78B2           3794                                             mov                     r0,#marker
17CF 7607           3795                                             mov                     @r0,#7
17D1 753B09         3796                                             mov                     movrig,#9
17D4 753A07         3797                                             mov                     movleft,#7
                    3798                                             ;setb           bitizm
17D7 020000   F     3799                                             jmp                     onmem11
                    3800     
                    3801     
17DA 78B1           3802     me21_23:        mov                     r0,#vichR               ;<-
17DC 7423           3803                                             mov                     a,#23h
17DE C3             3804                                             clr                     c
17DF 96             3805                                             subb            a,@r0
17E0 403D           3806                                             jc                      labelS1
17E2 75B0FB         3807                                             mov                     p3,#0fbh
17E5 20B718         3808                                             jb                      p3.7,vv21_23
17E8 B6210B         3809                                             cjne            @r0,#21h,me21_23dec;-<
17EB 7623           3810                                             mov                     @r0,#23h
17ED 900000   F     3811                                             mov                     dptr,#teTE7
17F0 120000   F     3812                                             call            lotext
17F3 020000   F     3813                                             jmp                     onmem11
17F6                3814     me21_23dec:     
17F6 16             3815                                             dec                     @r0
17F7 120000   F     3816                                             call            lomenu
17FA 020000   F     3817                                             jmp                     onmem11
17FD 020000   F     3818     onmem12:        jmp             outF    ;(ie7)                          
                    3819                                                     
1800 75B0F7         3820     vv21_23:        mov             p3,#0f7h                ;vvod
1803 20B7F7         3821                                             jb              p3.7,onmem12
1806 B6210C         3822                                             cjne            @r0,#21h,test22
                    3823                                             ;mov                    dptr,#tabt11;заслать ус 11А
1809 120000   F     3824     tests:          call            lotpus
180C D215           3825                                             setb            biteizm;запомнить режим ТИ
180E D204           3826                                             setb            bitizm
1810 C211           3827                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    61

1812 020000   F     3828                                             jmp                     onmem11
1815 B62202         3829     test22:         cjne            @r0,#22h,test23
                    3830                                     ;       mov                     dptr,#tabt9;заслать ус 9А
1818 80EF           3831                                             jmp             tests   
181A                3832     test23:
                    3833                                     ;       mov                     dptr,#tabt7;заслать ус 7А
181A 80ED           3834                                             jmp             tests   
181C 020000   F     3835     left_s:         jmp                     left_sk
181F B63149         3836     labelS1:        cjne            @r0,#31h,me_41
1822 75B0FB         3837                                             mov                     p3,#0fbh                   
                                  ;<-
1825 30B7F4         3838                                             jnb                     p3.7,left_s
1828 75B0F7         3839                                             mov                     p3,#0f7h
182B 20B7CF         3840                                             jb                      p3.7,onmem12
                    3841                                             ;запомнить признак установленной скорости в рпзу
                    3842     
                    3843     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3844     ;и запись во внешнее озу(0000h)
182E 7900           3845                                             mov             r1,#0                   ;
1830 7A50           3846                                     mov             r2,#50h
1832 7B00           3847                                     mov             r3,#00
1834 120499         3848                                     call    copyPP
                    3849                                     ;внести изменения во внешн озу
                    3850                                     ;KD=00 01 86 A0 (KD=1)
                    3851                                     ;кофф *100000 и переведенный в hex формат
                    3852                                     ;согласно адресов диапазонов и адресов яч вн озу 
1837 792C           3853                                     mov             r1,#2ch
1839 7400           3854                                     mov             a,#0;57,6
183B 301302         3855                                     jnb             bitv19,spwri
183E 7401           3856                                     mov             a,#1;19.6
1840 F3             3857     spwri:  movx    @r1,a
                    3858     ;стереть страницу пап прогр 
1841 905000         3859                                     mov             dptr,#5000h
1844 7FFF           3860                                     mov             r7,#0ffh
1846 12043E         3861                                     call    cle256
                    3862     ;и запись в ячейки кофф памяти прогр (3000h) 
1849 7FFF           3863                                     mov             r7,#0ffh
184B 7900           3864                                     mov             r1,#0                           ;external r
                             am
184D 905000         3865                                     mov             dptr,#5000h
1850 120480         3866                                     call    wrpage
                    3867             
1853 201305         3868                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
1856 758DF4         3869                                             mov                     TH1,#244                ;57
                             .6
1859 8003           3870                                             jmp                     outsko
185B 758DDC         3871     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
185E C211           3872     outsko:         clr             bitmenu
1860 D204           3873                                             setb            bitizm
1862 020000   F     3874                                             jmp                     out7
                    3875     
1865 020000   F     3876     rlabels4:               jmp             labels4
1868 020000   F     3877     rlabelS13:      jmp             labelS13
                    3878     
186B B651F7         3879     me_41:          cjne            @r0,#51h,rlabels4
186E 75B0FB         3880                                             mov             p3,#0fbh;<-
1871 30B7F4         3881                                             jnb             p3.7,rlabelS13
1874 75B0F7         3882                                             mov             p3,#0f7h
1877 20B76D         3883                                             jb              p3.7,vvmenu
                    3884                                             ;ввод пароля
                    3885                                     
                    3886     ;       считать с индикатора 
187A 7F0E           3887                                     mov             r7,#14
187C 784F           3888                                     mov             r0,#abin
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    62

187E 120000   F     3889                                     call    clearN                  
                    3890                                     
                    3891     ;чтение номера байта с индикатора(3байта)
                    3892     ;bufind+3..bufind+9
                    3893     ;-  - - -
                    3894     ;- - - - - - - - - -
                    3895     ;adec..adec+9
                    3896     ;ст            мл
1881 7849           3897                                     mov             r0,#bufind+9;
1883 795C           3898                                     mov             r1,#adec+9
1885 7F03           3899                                     mov             r7,#3;3bait
1887 C3             3900     upav1:          clr             c
1888 E6             3901                                     mov             a,@r0
1889 9430           3902                                     subb    a,#30h
188B F7             3903                                     mov             @r1,a
188C 18             3904                                     dec             r0
188D 19             3905                                     dec             r1
188E DFF7           3906                                     djnz    r7,upav1;adec+7..adec+9
1890 7A50           3907                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1892 7B28           3908                                             mov                     r3,#28h
1894 120454         3909                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
1897 800F           3910     jmp                     goparol
1899 E508           3911                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
189B B55A4C         3912                                     cjne            a,adec+7,parerr
189E E509           3913                                     mov                     a,r9    
18A0 B55B47         3914                                     cjne            a,adec+8,parerr
18A3 E50A           3915                                     mov                     a,r10
18A5 B55C42         3916                                     cjne            a,adec+9,parerr
                    3917                                     ;равны
18A8 78B1           3918     goparol:        mov             r0,#vichR               ;режим меню 52
18AA 7652           3919                                             mov             @r0,#52h                ;0000-n
18AC 900000   F     3920                                             mov             dptr,#teKD;00000-nA
18AF 120000   F     3921                                             call            lotext
                    3922                                             ;;;;;;;;;
                    3923                                                     ;n(hex)->abin
18B2 120000   F     3924                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
18B5 2552           3925                                             add             a,abin+3
18B7 F552           3926                                             mov             abin+3,a
18B9 7853           3927                                             mov             r0,#adec
18BB 7952           3928                                             mov             r1,#abin+3      ;hex->10
18BD 120000   F     3929                                             call    bindec
18C0 855C48         3930                                             mov             bufind+8,adec+9
18C3 75472D         3931                                             mov             bufind+7,#2dh
                    3932     
18C6 79AE           3933                                             mov             r1,#diap
18C8 7848           3934                                             mov             r0,#bufind+8
18CA E7             3935                                             mov             a,@r1
18CB B40807         3936                                             cjne    a,#8,nodi8k
18CE 7630           3937                                             mov             @r0,#30h                 ;10-10
18D0 18             3938                                             dec             r0
18D1 7663           3939                                             mov             @r0,#63h;31h
18D3 8008           3940                                             jmp             nodisk9
18D5 B40905         3941     nodi8k:                         cjne    a,#9,nodisk9
                    3942                                     
18D8 7631           3943                                             mov             @r0,#31h           ;10-11
18DA 18             3944                                             dec             r0
18DB 7663           3945                                             mov             @r0,#63h;31h
                    3946                                     
                    3947     
18DD 78B2           3948     nodisk9:        mov                     r0,#marker
18DF 7601           3949                                             mov                     @r0,#1
18E1 753A01         3950                                             mov                     movleft,#1
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    63

18E4 753B05         3951                                             mov                     movrig,#5
                    3952                                             
18E7 020000   F     3953     vvmenu:         jmp             goto7
                    3954     
18EA 753932         3955     parerr:         mov                     nuerr,#32h
18ED 120000   F     3956                                             call            error
18F0 120000   F     3957                                             call            ind
18F3 120000   F     3958                                             call            z_1s
18F6 C211           3959                                             clr                     bitmenu
18F8 D204           3960                                             setb            bitizm
18FA 78B2           3961                                             mov                     r0,#marker
18FC 76FF           3962                                             mov                     @r0,#0ffh
18FE 020000   F     3963                                             jmp             goto7
                    3964     
1901 30130B         3965     left_sk:                jnb                     bitv19,tosk19;<-
1904 900000   F     3966                                             mov                     dptr,#teS57_6;57,6
1907 120000   F     3967                                             call            lotext
190A C213           3968                                             clr                     bitv19
190C 020000   F     3969                                             jmp             out7
190F 900000   F     3970     tosk19:         mov                     dptr,#teS19_2
1912 120000   F     3971                                             call            lotext
1915 D213           3972                                             setb            bitv19
1917 020000   F     3973                                             jmp             out7
                    3974     
191A                3975     labelS13:;<- MENU(ПАРОЛЬ 000)
                    3976             
                    3977     ;;;;;;;;;;;;;;;;;;
                    3978     ;необходимо не портить цифру в следуюем справа знакоместе
                    3979     ;т е сохранить ее в ячейке для мигания в противном случае
                    3980     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3981     ;       знакоместа
191A 78B2           3982                                     mov             r0,#marker
191C 7440           3983                                     mov             a,#bufind
191E 26             3984                                             add             a,@r0                   ;a=bufind+m
                             arker
191F F9             3985                                             mov             r1,a
1920 19             3986                                             dec             r1;inc          r1
1921 873C           3987                                             mov             savba,@r1
                    3988                                                     
1923 78B2           3989                                                     mov             r0,#marker
1925 16             3990                                                     dec             @r0                        
                                  
1926 C219           3991                                     clr             bitmig
1928 E53A           3992                                     mov                     a,movleft
192A B6064F         3993                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
192D 06             3994                                     inc             @r0
192E 020000   F     3995                                             jmp             goto7
                    3996     ;;;;;;;
                    3997     
1931                3998     vvkali52:       ;введено значение для калибровки
                    3999                                             ;число на индикаторе ->Ak  (52h)
                    4000                                             ;       считать с индикатора 
1931 7F0E           4001                                     mov             r7,#14
1933 784F           4002                                     mov             r0,#abin
1935 120000   F     4003                                     call    clearN                  
                    4004                                     
                    4005     ;чтение номера байта с индикатора(3байта)
                    4006     ;bufind+1..bufind+5
                    4007     ;-  - - -
                    4008     ;- - - - - - - - - -
                    4009     ;adec..adec+9
                    4010     ;ст            мл
1938 7845           4011                                     mov             r0,#bufind+5;
193A 795C           4012                                     mov             r1,#adec+9
193C 7F05           4013                                     mov             r7,#5;5bait
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    64

193E C3             4014     upav2:          clr             c
193F E6             4015                                     mov             a,@r0
1940 9430           4016                                     subb    a,#30h
1942 F7             4017                                     mov             @r1,a
1943 18             4018                                     dec             r0
1944 19             4019                                     dec             r1
1945 DFF7           4020                                     djnz    r7,upav2;adec+7..adec+9
                    4021     
1947 784F           4022                                     mov             r0,#abin
1949 7953           4023                                     mov             r1,#adec                        ;мл        
                              ст
194B 120000   F     4024                                     call    decbin                  ;abin..abin+3 (hex)
194E 120000   F     4025                                     call    loadr2                  ;r2..r5
1951 120402         4026                                     call    altof   ;r2..r5->float
1954 900000   F     4027                                     mov     dptr,#ch_10;10
1957 120000   F     4028                                     call    ldc_ltemp                       ;r8..r11=8
195A 120203         4029                                     call    flmul
195D 78A4           4030                                     mov             r0,#rez_Ak
195F 120000   F     4031                                     call    saver2
1962 C211           4032                                             clr                     bitmenu
1964 D212           4033                                             setb            bitklb
                    4034                                             ;зажечь KMП
1966 D204           4035                                             setb            bitizm;бит калибровки уже установле
                             н
1968 78B2           4036                                             mov                     r0,#marker
196A 76FF           4037                                             mov                     @r0,#0ffh
196C 783D           4038                                     mov             r0,#chkl
196E 76FF           4039                                     mov             @r0,#0ffh
1970 08             4040                                     inc             r0
1971 76FF           4041                                     mov             @r0,#0ffh;38h
1973 120000   F     4042                                     call            z_1s
1976 020000   F     4043                                     jmp             out7
                    4044     
                    4045     
1979 020000   F     4046                                             jmp             goto7
                    4047                                              
197C 020000   F     4048     onmem13:        jmp             goto7   ;(ie7)
                    4049     
197F B642AF         4050     labels4:        cjne            @r0,#42h,vvkali52
1982 75B0FB         4051                                             mov                     p3,#0fbh;<-
1985 30B7F4         4052                                             jnb             p3.7,onmem13
1988 75B0F7         4053                                             mov             p3,#0f7h;vvod
198B 20B7EE         4054                                             jb              p3.7,onmem13
                    4055                                             
                    4056             
198E 020000   F     4057     jmp             out7                                                    
                    4058     ;;;;;;;
1991                4059     labelI:
1991 75B0FE         4060                                     mov             p3,#0feh
1994 E5B0           4061                                     mov             a,p3
1996 20E703         4062                                     jb              acc.7,nopoint
                    4063                                     ;
1999 020000   F     4064                                     jmp             goto7;out7
                    4065     
199C 75B0FB         4066     nopoint:                mov             p3,#0fbh
199F E5B0           4067                                     mov             a,p3
19A1 20E72C         4068                                     jb              acc.7,nopoin7
19A4 78B2           4069     labelS3:mov             r0,#marker
19A6 E53A           4070                                     mov             a,movleft
19A8 B40309         4071                                     cjne    a,#3,poina1
19AB B6030B         4072                                     cjne    @r0,#3,nomarl;26
                    4073                                     ;mov            @r0,#9
19AE E53B           4074     poina2: mov                     a,movrig                ;кн <- B=+00000
19B0 F6             4075                                     mov                     @r0,a
19B1 020000   F     4076                                     jmp             goto7;  out7
                    4077     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    65

19B4 B60402         4078     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
19B7 80F5           4079                                             jmp             poina2
                    4080     
                    4081     
19B9                4082     nomarl:                 ;                               29.12.06
                    4083     ;;;;;;;;;;;;;;;;;;
                    4084     ;необходимо не портить цифру в следуюем справа знакоместе
                    4085     ;т е сохранить ее в ячейке для мигания в противном случае
                    4086     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4087     ;       знакоместа
19B9 78B2           4088                                     mov             r0,#marker
19BB 7440           4089                                     mov             a,#bufind
19BD 26             4090                                             add             a,@r0                   ;a=bufind+m
                             arker
19BE F9             4091                                             mov             r1,a
19BF 09             4092                                             inc             r1
19C0 873C           4093                                             mov             savba,@r1
                    4094                                                     
19C2 78B2           4095                                                     mov             r0,#marker
19C4 16             4096                                                     dec             @r0                        
                                  
19C5 C219           4097                                     clr             bitmig
19C7 E53A           4098                                     mov                     a,movleft
19C9 B40340         4099                                     cjne            a,#3,poinA
19CC B60270         4100                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
19CF 06             4101     poin3:  inc             @r0
                    4102     ;нажат ввод А =000000 запомнить константу А
19D0 75B0F7         4103     nopoin7:           mov          p3,#0f7h
19D3 E5B0           4104                                     mov             a,p3
19D5 20E767         4105                                     jb              acc.7,out7
19D8 78B1           4106                                     mov             r0,#vichR
19DA E6             4107                                     mov             a,@r0
19DB B62133         4108                                     cjne    @r0,#21h,no21p7
19DE 7611           4109                                     mov             @r0,#11h
                    4110                             ;       считать с индикатора  упаковать в плавающий формат
                    4111                             ;   сохранить
19E0 7F0E           4112                                     mov             r7,#14
19E2 784F           4113                                     mov             r0,#abin
19E4 120000   F     4114                                     call    clearN                  
19E7 120000   F     4115                                     call    upakA
                    4116                                     
19EA 784F           4117                                     mov             r0,#abin
19EC 7953           4118                                     mov             r1,#adec                        ;мл        
                              ст
19EE 120000   F     4119                                     call    decbin                  ;abin..abin+3 (hex)
19F1 120000   F     4120                                     call    loadr2                  ;r2..r5
19F4 120402         4121                                     call    altof                   ;r2..r5->int
19F7 78BC           4122                                     mov             r0,#konstA
19F9 120000   F     4123                                     call    saver2
                    4124     ;26
19FC 78B2           4125                                     mov             r0,#marker
19FE 76FF           4126                                     mov             @r0,#0ffh
                    4127                                     
1A00 900000   F     4128                                     mov             dptr,#teVICH;teBequ0
1A03 120000   F     4129                                     call    lotext
                    4130                             ;       call            outB
1A06 534BBF         4131                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
                    4132                             ;       orl             bufind+11,#80h
1A09 020000   F     4133                                     jmp             goto7;out7
                    4134     
1A0C B60330         4135     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1A0F 80BE           4136                                             jmp             poin3
                    4137     
1A11                4138     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4139                             ;   сохранить
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    66

1A11 7F0E           4140                                     mov             r7,#14
1A13 784F           4141                                     mov             r0,#abin
1A15 120000   F     4142                                     call    clearN                  
1A18 120000   F     4143                                     call    upakB                   
1A1B 784F           4144                                     mov             r0,#abin
1A1D 7953           4145                                     mov             r1,#adec                        ;мл        
                              ст
1A1F 120000   F     4146                                     call    decbin                  ;abin..abin+3 (hex)
1A22 120000   F     4147                                     call    loadr2                  ;r2..r5
1A25 120402         4148                                     call    altof                   ;r2..r5->int
1A28 301B04         4149                                     jnb             bitznB,pozB
1A2B EA             4150                                     mov             a,r2
1A2C 4480           4151                                     orl             a,#80h
1A2E FA             4152                                     mov             r2,a                    ;знак-
1A2F 78C0           4153     pozB:           mov             r0,#konstB
1A31 120000   F     4154                                     call    saver2
                    4155     
1A34 79B2           4156                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1A36 77FF           4157                                     mov             @r1,#0ffh
1A38 78B1           4158                                     mov             r0,#vichR
1A3A 7611           4159                                     mov             @r0,#11h
1A3C 020000   F     4160                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4161                                     
                    4162     
1A3F                4163     out7:                   ;mov            IE,#80h
1A3F D083           4164                                     pop             dph
1A41 D082           4165                                     pop             dpl
1A43 D007           4166                                     pop             rr7     
1A45 D006           4167                                     pop             rr6
1A47 D005           4168                                     pop             rr5
1A49 D004           4169                                     pop             rr4
1A4B D003           4170                                     pop             rr3
1A4D D002           4171                                     pop             rr2
1A4F D001           4172                                     pop             rr1                             
1A51 D000           4173                                     pop             rr0
1A53 D0D0           4174                                     pop             psw
1A55 D0E0           4175                                     pop             acc
1A57 E5AD           4176                                     mov             a,P3IF
1A59 547F           4177                                     anl             a,#7fh
1A5B F5AD           4178                                     mov             P3IF,a
1A5D 75B0C0         4179                                     mov             P3,#0c0h
                    4180     ;clr            bitmig
1A60 75E730         4181                                     mov             EIE2,#30H
1A63 C219           4182     clr             bitmig
1A65 E586           4183                                             mov             a,P6            ;p6.4=0
1A67 54EF           4184                             anl             a,#0efh
1A69 F586           4185                             mov             P6,a
1A6B 00             4186                             nop
1A6C 00             4187                             nop
                    4188                                     
1A6D E586           4189                             mov             a,P6                    ;p6.4=1 
1A6F 4410           4190                             orl             a,#10h
1A71 F586           4191                             mov             P6,a                        
1A73 32             4192                                     reti
                    4193     
                    4194     
                    4195                                     
                    4196     
                    4197     
1A74 78B1           4198     lomenu:         mov             r0,#vichR
1A76 B61107         4199                                             cjne    @r0,#11h,menu12
1A79 900000   F     4200                                             mov             dptr,#teTESI
1A7C 120000   F     4201     lome1:                  call    lotexT
1A7F 22             4202                                             ret
1A80 B61205         4203     menu12:         cjne    @r0,#12h,menu13
1A83 900000   F     4204                                             mov             dptr,#teTESR
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    67

1A86 80F4           4205                                             jmp             lome1
1A88 B61305         4206     menu13:         cjne    @r0,#13h,menu14
1A8B 900000   F     4207                                             mov             dptr,#teSKOR
1A8E 80EC           4208                                             jmp             lome1
1A90 B61405         4209     menu14:         cjne    @r0,#14h,menu15
1A93 900000   F     4210                                             mov             dptr,#teAVK
1A96 80E4           4211                                             jmp             lome1
1A98 B61505         4212     menu15:                 cjne    @r0,#15h,menu21
1A9B 900000   F     4213                                             mov             dptr,#teKALIB
1A9E 80DC           4214                                             jmp             lome1
                    4215     
1AA0 B62105         4216     menu21: cjne    @r0,#21h,menu22
1AA3 900000   F     4217                                             mov             dptr,#teTE11
1AA6 80D4           4218                                             jmp             lome1
1AA8 B62205         4219     menu22:         cjne    @r0,#22h,menu23
1AAB 900000   F     4220                                             mov             dptr,#teTE9
1AAE 80CC           4221                                             jmp             lome1
1AB0 B62305         4222     menu23:         cjne    @r0,#23h,menu31
1AB3 900000   F     4223                                             mov             dptr,#teTE7
1AB6 80C4           4224                                             jmp             lome1
1AB8 B63105         4225     menu31:         cjne    @r0,#31h,menu41
1ABB 900000   F     4226                                             mov             dptr,#teS57_6
1ABE 80BC           4227                                             jmp             lome1
                    4228     
1AC0                4229     menu41:         
1AC0 900000   F     4230                                             mov             dptr,#tePAR
1AC3 80B7           4231                                             jmp             lome1
                    4232     
1AC5 020000   F     4233     yesvi_kr:               jmp                     yesvi_km
1AC8                4234     endkalib:;KD=Ak/A3
1AC8 200DFA         4235                                             jb                      bifl_kt,yesvi_kr;выч кофф К
                             м
1ACB 789C           4236                                             mov                     r0,#rez_A3
1ACD 120000   F     4237                                             call            resar2
                    4238                                     
1AD0 120402         4239                                     call    altof                   ;->float
1AD3 EA             4240                                             mov                     a,r2
1AD4 547F           4241                                             anl                     a,#7fh
1AD6 FA             4242                                             mov                     r2,a
1AD7 120000   F     4243                                     call            move28
1ADA 78A4           4244                                             mov                     r0,#rez_Ak
1ADC 120000   F     4245                                             call            resar2
1ADF 1202B7         4246                                             call            fldiv
                    4247                                                     
1AE2 900000   F     4248                                     mov     dptr,#CHtho;100000
1AE5 120000   F     4249                                     call    ldc_ltemp                       ;r8..r11=8
1AE8 120203         4250                                     call    flmul
1AEB 120343         4251                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4252     
1AEE 78A0           4253                                             mov                     r0,#koefKD
1AF0 120000   F     4254                                             call            saver2
                    4255                                             ;запись в рпзу в соотв ячейку
                    4256                             
1AF3 7900           4257                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1AF5 7A50           4258                                     mov             r2,#50h
1AF7 7B00           4259                                     mov             r3,#00
1AF9 120499         4260                                     call    copyPP
                    4261                                     ;внести изменения во внешн озу
1AFC 120000   F     4262                                     call            findext                 ;r1-внешн озу
1AFF 78A0           4263                                     mov                     r0,#koefKD
1B01 120000   F     4264                                             call            resar2
1B04 EA             4265                                             mov                     a,r2
1B05 F3             4266                                             movx            @r1,a
1B06 09             4267                                             inc                     r1
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    68

1B07 EB             4268                                             mov                     a,r3
1B08 F3             4269                                             movx            @r1,a
1B09 09             4270                                             inc                     r1
1B0A EC             4271                                             mov                     a,r4
1B0B F3             4272                                             movx            @r1,a
1B0C 09             4273                                             inc                     r1
1B0D ED             4274                                             mov                     a,r5
1B0E F3             4275                                             movx            @r1,a
                    4276                                     ;кофф *100000 и переведенный в hex формат
                    4277                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4278     ;стереть страницу пап прогр 
1B0F 905000         4279                                     mov             dptr,#5000h
1B12 7FFF           4280                                     mov             r7,#0ffh
1B14 12043E         4281                                     call    cle256
                    4282     ;и запись в ячейки кофф памяти прогр (3000h) 
1B17 7FFF           4283                                     mov             r7,#0ffh
1B19 7900           4284                                     mov             r1,#0                           ;external r
                             am
1B1B 905000         4285                                     mov             dptr,#5000h
1B1E 120480         4286                                     call    wrpage
                    4287     ;2.2.07
1B21 79AE           4288                                     mov                     r1,#diap
1B23 B70511         4289                                     cjne            @r1,#5,fulkalib
                    4290                                     ;jb                     bifl_kt,yesvi_km;выч кофф Км
1B26 D20D           4291                                     setb            bifl_kt
                    4292                                     ;call           loadus
1B28 900000   F     4293                                     mov                     dptr,#tabt7;заслать ус 7А       
1B2B E4             4294                             clr             a
1B2C 93             4295                             movc    a,@a+dptr                               ;high byte
1B2D F584           4296                             mov             p4,a
1B2F A3             4297                             inc             dptr
1B30 E4             4298                             clr             a
1B31 93             4299                             movc    a,@a+dptr                               ;low byte
1B32 F585           4300                             mov             p5,a
1B34 020000   F     4301                                     jmp             goto7;  out_kali
                    4302     
                    4303     ;;;
1B37                4304     fulkalib:
1B37 C212           4305                                             clr             bitklb
1B39 D216           4306                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1B3B 900000   F     4307                                             mov             dptr,#teEND
1B3E 120000   F     4308                                             call    lotext
1B41 120000   F     4309                                             call    ind
1B44 120000   F     4310     out_kali:       call    z_1s
1B47 120000   F     4311                                             call    z_1s
1B4A 020000   F     4312                                             jmp             goto7
1B4D                4313     yesvi_km:               ;выч кофф Км=(10**5/A2)*K7/K5
1B4D 7A50           4314                                     mov                     r2,#50h                 ;-11a
1B4F 7B14           4315                                     mov                     r3,#14h                 ;k7
1B51 12046C         4316                                     call            rebyte2                         ;r2..r5- he
                             x
1B54 120402         4317                                     call            altof                   ;r2..r5->float
1B57 C002           4318                                     push            rr2
1B59 C003           4319                                     push            rr3
1B5B C004           4320                                     push            rr4
1B5D C005           4321                                     push            rr5
1B5F 7A50           4322                                     mov                     r2,#50h                 ;k5
1B61 7B0C           4323                                     mov                     r3,#0ch
1B63 12046C         4324                             call            rebyte2                 ;r2..r5
1B66 120402         4325                                     call            altof                   ;r2..r5->float
1B69 120000   F     4326                                     call            move28
1B6C D005           4327                                     pop                     rr5
1B6E D004           4328                                     pop                     rr4
1B70 D003           4329                                     pop                     rr3
1B72 D002           4330                                     pop                     rr2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    69

1B74 1202B7         4331                                     call            fldiv                   ;K7/K5
                    4332     
1B77 900000   F     4333                                     mov     dptr,#CHtho;100000
1B7A 120000   F     4334                                     call    ldc_ltemp                       ;r8..r11=8
1B7D 120203         4335                                     call    flmul                           ;r2..r5 ;K7/K5*10**
                             5
1B80 C002           4336                                     push            rr2
1B82 C003           4337                                     push            rr3
1B84 C004           4338                                     push            rr4
1B86 C005           4339                                     push            rr5
                    4340                                     
1B88 789C           4341                                     mov                     r0,#rez_A3
1B8A 120000   F     4342                                     call            resar2
1B8D 120402         4343                                     call            altof                           ;r2..r5->fl
                             oat
1B90 120000   F     4344                                     call            move28
1B93 D005           4345                                     pop                     rr5
1B95 D004           4346                                     pop                     rr4
1B97 D003           4347                                     pop                     rr3
1B99 D002           4348                                     pop                     rr2
1B9B 1202B7         4349                               call          fldiv           ;Km     
                    4350     
1B9E 900000   F     4351                                     mov     dptr,#CHtho;100000
1BA1 120000   F     4352                                     call    ldc_ltemp                       ;r8..r11=8
1BA4 120203         4353                                     call    flmul                           ;r2..r5
1BA7 120343         4354                                     call    ftol                    ;r2..r5->hex кофф Km(РЕЗ ИЗ
                             М ЧИСЛО 6разрядное)
1BAA 78A0           4355                                     mov                     r0,#koefKD;2ое исп ячейки koefKD
1BAC 120000   F     4356                                     call            saver2
                    4357                                     ;запись в рпзу в соотв ячейку
1BAF 7900           4358                                     mov             r1,#0                   ;счит рпзу во внешн
                              озу
1BB1 7A50           4359                                     mov             r2,#50h
1BB3 7B00           4360                                     mov             r3,#00
1BB5 120499         4361                                     call    copyPP
                    4362                                     ;внести изменения во внешн озу
1BB8 78A0           4363                                     mov                     r0,#koefKD
1BBA 120000   F     4364                                     call            resar2
1BBD 792C           4365                                     mov                     r1,#2ch                 ;r1-внешн о
                             зу кофф Km
                    4366                             
1BBF EA             4367                                     mov                     a,r2
1BC0 F3             4368                                             movx            @r1,a
1BC1 09             4369                                             inc                     r1
1BC2 EB             4370                                             mov                     a,r3
1BC3 F3             4371                                             movx            @r1,a
1BC4 09             4372                                             inc                     r1
1BC5 EC             4373                                             mov                     a,r4
1BC6 F3             4374                                             movx            @r1,a
1BC7 09             4375                                             inc                     r1
1BC8 ED             4376                                             mov                     a,r5
1BC9 F3             4377                                             movx            @r1,a
                    4378                                     ;кофф *100000 и переведенный в hex формат
                    4379                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4380     ;стереть страницу пап прогр 
1BCA 905000         4381                                     mov             dptr,#5000h
1BCD 7FFF           4382                                     mov             r7,#0ffh
1BCF 12043E         4383                                     call    cle256
                    4384     ;и запись в ячейки кофф памяти прогр (3000h) 
1BD2 7FFF           4385                                     mov             r7,#0ffh
1BD4 7900           4386                                     mov             r1,#0                           ;external r
                             am
1BD6 905000         4387                                     mov             dptr,#5000h
1BD9 120480         4388                                     call    wrpage
                    4389     
1BDC C20D           4390                                             clr             bifl_kt
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    70

1BDE 120000   F     4391                                             call    loadus
1BE1 020000   F     4392                                             jmp             fulkalib
                    4393     
                    4394     ;выч среднего по блоку
                    4395     ;вых r2..r5
1BE4                4396     vichmean:       
1BE4 120000   F     4397                                             call            resa_hl;save_bl->dptr
1BE7 78D7           4398                                             mov                     r0,#copy_hl
1BE9 E583           4399                                             mov                     a,dph
1BEB F6             4400                                             mov                     @r0,a
1BEC 08             4401                                             inc                     r0
1BED E582           4402                                             mov                     a,dpl
1BEF F6             4403                                             mov                     @r0,a
1BF0 78B8           4404                                             mov                     r0,#work
1BF2 120000   F     4405                                             call            clear4
1BF5 78D6           4406                                             mov                     r0,#chblok;volume
1BF7 7600           4407                                             mov                     @r0,#0
1BF9 120000   F     4408     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1BFC E582           4409                                             mov                     a,dpl
1BFE FF             4410                                             mov                     r7,a
1BFF E583           4411                                             mov                     a,dph
1C01 FE             4412                                             mov                     r6,a
                    4413     
1C02 78D7           4414                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1C04 E6             4415                                             mov                     a,@r0
1C05 F583           4416                                             mov                     dph,a
1C07 08             4417                                             inc                     r0
1C08 E6             4418                                             mov                     a,@r0
1C09 F582           4419                                             mov                     dpl,a
                    4420                                             
1C0B C3             4421                                             clr                     c;-4
1C0C E582           4422                                             mov                     a,dpl
1C0E 9404           4423                                             subb            a,#4
1C10 F582           4424                                             mov                     dpl,a
1C12 E583           4425                                             mov                     a,dph
1C14 9400           4426                                             subb            a,#0
1C16 F583           4427                                             mov                     dph,a;dptr-4
                    4428                                             ;;;;;;;;
1C18 79D7           4429                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1C1A E583           4430                                                     mov             a,dph
1C1C F7             4431                                               mov           @r1,a
1C1D 09             4432                                                     inc             r1
1C1E E582           4433                                                     mov             a,dpl
1C20 F7             4434                                                     mov             @r1,a
                    4435                                                     ;;;;;;;;;
1C21 C3             4436                                                     clr             c;пришли в начало блока?
1C22 E582           4437                                                     mov                     a,dpl
1C24 9F             4438                                                     subb            a,r7
1C25 FF             4439                                                     mov                     r7,a
1C26 7006           4440                                                     jnz                     nextmea
1C28 E583           4441                                                     mov                     a,dph
1C2A 9E             4442                                                     subb            a,r6
1C2B FE             4443                                                     mov                     r6,a
1C2C 601B           4444                                                     jz                      outmea;
                    4445                                                     
                    4446                                                     ;продолжаем сравнение
                    4447                                                     ;;;;;;;;;;;             
1C2E 120000   F     4448     nextmea:                call            loahl_r2        ;из яч внешн озу ->r2..r5
1C31 120402         4449                                             call            altof;->float
1C34 120000   F     4450                                             call            move28                  ;r8..r11
1C37 78B8           4451                                             mov                     r0,#work
1C39 120000   F     4452                                             call            resar2
1C3C 120166         4453                                             call            fladd
1C3F 78B8           4454                                             mov                     r0,#work
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    71

1C41 120000   F     4455                                             call            saver2
1C44 78D6           4456                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1C46 06             4457                                             inc                     @r0
1C47 80B0           4458                                             jmp                     meng
1C49                4459     outmea:         
1C49 120000   F     4460                                             call            loahl_r2        ;из яч внешн озу ->
                             r2..r5
1C4C 120402         4461                                             call            altof;->float
1C4F 120000   F     4462                                             call            move28                  ;r8..r11
1C52 78B8           4463                                             mov                     r0,#work
1C54 120000   F     4464                                             call            resar2
1C57 120166         4465                                             call            fladd
1C5A 78B8           4466                                             mov                     r0,#work
1C5C 120000   F     4467                                             call            saver2
1C5F E4             4468                                             clr                     a
1C60 FA             4469                                             mov                     r2,a
1C61 FB             4470                                             mov                     r3,a
1C62 FC             4471                                             mov                     r4,a
1C63 78D6           4472                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1C65 E6             4473                                             mov                     a,@r0
1C66 2401           4474                                             add                     a,#1
1C68 FD             4475                                             mov                     r5,a
1C69 120402         4476                                             call            altof;r2..r5 float
1C6C 120000   F     4477                                             call            move28
1C6F 78B8           4478                                             mov                     r0,#work
1C71 120000   F     4479                                             call            resar2
1C74 1202B7         4480                                             call            fldiv
1C77 900000   F     4481                                             mov                     dptr,#ch_10      
1C7A 120000   F     4482                                     call            ldc_ltemp
1C7D 1202B7         4483                                     call            fldiv
1C80 120343         4484                                             call            ftol                            ;->
                             hex
1C83 120000   F     4485                                             call    maform
1C86 784F           4486                                             mov             r0,#abin
1C88 120000   F     4487                                             call    saver2
                    4488     ;;;;;;;;
                    4489                                             
1C8B 7853           4490                                             mov             r0,#adec
1C8D 7952           4491                                             mov             r1,#abin+3      ;hex->10
1C8F 120000   F     4492                                             call    bindec
                    4493                                     
1C92 785C           4494                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1C94 7949           4495                                             mov             r1,#bufind+9
1C96 7F05           4496                                             mov             r7,#5
1C98 E6             4497     bufmea:                         mov             a,@r0
1C99 2430           4498                                             add             a,#30h
1C9B F7             4499                                             mov             @r1,a
1C9C 19             4500                                             dec             r1
1C9D 18             4501                                             dec             r0
1C9E DFF8           4502                                             djnz    r7,bufmea
1CA0 7844           4503                                             mov             r0,#bufind+4
1CA2 762B           4504                                             mov             @r0,#2bh          
1CA4 300202         4505                                             jnb             znmat,nozmea
1CA7 762D           4506                                             mov             @r0,#2dh
1CA9 434B05         4507     nozmea:         orl             bufind+11,#05h
1CAC 22             4508                                             ret
                    4509     
                    4510     
1CAD E0             4511     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1CAE FA             4512                                             mov                     r2,a
1CAF A3             4513                                             inc                     dptr
1CB0 E0             4514                                             movx            a,@dptr
1CB1 FB             4515                                             mov                     r3,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    72

1CB2 A3             4516                                             inc                     dptr
1CB3 E0             4517                                             movx            a,@dptr
1CB4 FC             4518                                             mov                     r4,a
1CB5 A3             4519                                             inc                     dptr
1CB6 E0             4520                                             movx            a,@dptr
1CB7 FD             4521                                             mov                     r5,a    
1CB8 22             4522                                             ret
                    4523     
1CB9 C3             4524     min4_hl:        clr                     c;-4
1CBA E582           4525                                             mov                     a,dpl
1CBC 9404           4526                                             subb            a,#4
1CBE F582           4527                                             mov                     dpl,a
1CC0 E583           4528                                             mov                     a,dph
1CC2 9400           4529                                             subb            a,#0
1CC4 F583           4530                                             mov                     dph,a;dptr-4
1CC6 22             4531                                             ret
                    4532     
                    4533     ;мин значение по по блоку
1CC7                4534     vichmin:        
1CC7 120000   F     4535                                             call            resa_hl;save_bl->dptr
                    4536                                                                                     
                    4537     ;с конца блока адрес 2го измерение
1CCA 120000   F     4538                                             call            min4_hl
                    4539                                             
1CCD 78B8           4540                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4541                                             
1CCF E0             4542                                             movx            a,@dptr
1CD0 F6             4543                                             mov                     @r0,a
1CD1 08             4544                                             inc                     r0
1CD2 A3             4545                                             inc                     dptr
1CD3 E0             4546                                             movx            a,@dptr
1CD4 F6             4547                                             mov                     @r0,a
1CD5 08             4548                                             inc                     r0
1CD6 A3             4549                                             inc                     dptr
1CD7 E0             4550                                             movx            a,@dptr
1CD8 F6             4551                                             mov                     @r0,a
1CD9 08             4552                                             inc                     r0
1CDA A3             4553                                             inc                     dptr
1CDB E0             4554                                             movx            a,@dptr
1CDC F6             4555                                             mov                     @r0,a
1CDD A3             4556                                             inc                     dptr
                    4557                                             
1CDE 78B8           4558                                             mov                     r0,#work
1CE0 120000   F     4559                                             call            resar2
1CE3 120402         4560                                             call            altof;->float;r2..r5
1CE6 78B8           4561                                             mov                     r0,#work
1CE8 120000   F     4562                                             call            saver2
                    4563     
1CEB 120000   F     4564                                             call            min4_hl
                    4565                                             ;call           min4_hl
                    4566     
1CEE 78D7           4567                                             mov                     r0,#copy_hl
1CF0 E583           4568                                             mov                     a,dph
1CF2 F6             4569                                             mov                     @r0,a
1CF3 08             4570                                             inc                     r0
1CF4 E582           4571                                             mov                     a,dpl
1CF6 F6             4572                                             mov                     @r0,a
                    4573                                     
1CF7 78D6           4574                                             mov                     r0,#chblok;volume
1CF9 7600           4575                                             mov                     @r0,#0
1CFB 120000   F     4576     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1CFE E582           4577                                             mov                     a,dpl
1D00 FF             4578                                             mov                     r7,a
1D01 E583           4579                                             mov                     a,dph
1D03 FE             4580                                             mov                     r6,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    73

                    4581     
1D04 78D7           4582                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1D06 E6             4583                                             mov                     a,@r0
1D07 F583           4584                                             mov                     dph,a
1D09 08             4585                                             inc                     r0
1D0A E6             4586                                             mov                     a,@r0
1D0B F582           4587                                             mov                     dpl,a
                    4588                                             
1D0D C3             4589                                             clr                     c;-4
1D0E E582           4590                                             mov                     a,dpl
1D10 9404           4591                                             subb            a,#4
1D12 F582           4592                                             mov                     dpl,a
1D14 E583           4593                                             mov                     a,dph
1D16 9400           4594                                             subb            a,#0
1D18 F583           4595                                             mov                     dph,a;dptr-4
                    4596                                             ;;;;;;;;
1D1A 79D7           4597                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1D1C E583           4598                                                     mov             a,dph
1D1E F7             4599                                               mov           @r1,a
1D1F 09             4600                                                     inc             r1
1D20 E582           4601                                                     mov             a,dpl
1D22 F7             4602                                                     mov             @r1,a
                    4603                                                     ;;;;;;;;;
1D23 C3             4604                                                     clr             c;пришли в начало блока?
1D24 E582           4605                                                     mov                     a,dpl
1D26 9F             4606                                                     subb            a,r7
1D27 FF             4607                                                     mov                     r7,a
1D28 7006           4608                                                     jnz                     nextmin
1D2A E583           4609                                                     mov                     a,dph
1D2C 9E             4610                                                     subb            a,r6
1D2D FE             4611                                                     mov                     r6,a
1D2E 601D           4612                                                     jz                      outmin;
                    4613                                                     
                    4614                                                     ;продолжаем сравнение
                    4615                                                     ;;;;;;;;;;;             
1D30 78B8           4616     nextmin:        mov                     r0,#work
1D32 120000   F     4617                                             call            resar2
                    4618                                             ;call           altof;->float;r2..r5
1D35 120000   F     4619                                             call            move28;->r8..r11
1D38 120000   F     4620                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4621     
1D3B 120402         4622                                             call            altof;->float;r2..r5
                    4623                                             
1D3E 1201D6         4624                                             call            flcmp
1D41 5005           4625                                             jnc                     nomini
1D43 78B8           4626                                             mov                     r0,#work;<
1D45 120000   F     4627                                             call            saver2;r2..r5
1D48 78D6           4628     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
1D4A 06             4629                                             inc                     @r0
1D4B 80AE           4630                                             jmp                     ming
                    4631     
1D4D 78B8           4632     outmin:         mov                     r0,#work;1ое измерение блока
1D4F 120000   F     4633                                             call            resar2
                    4634                                     ;       call            altof;->float;r2..r5
1D52 120000   F     4635                                             call            move28;->r8..r11
1D55 120000   F     4636                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4637     
1D58 120402         4638                                             call            altof;->float;r2..r5
                    4639                                             
1D5B 1201D6         4640                                             call            flcmp
1D5E 5005           4641                                             jnc                     minivix
1D60 78B8           4642                                             mov                     r0,#work;<
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    74

1D62 120000   F     4643                                             call            saver2;r2..r5
                    4644                                             ;;;;;;;;;
                    4645     
1D65 78B8           4646     minivix:        mov                     r0,#work
1D67 120000   F     4647                                             call            resar2
                    4648     
                    4649                                             ;call           altof;->float
                    4650                                     
1D6A 900000   F     4651                                             mov                     dptr,#ch_10      
1D6D 120000   F     4652                                             call            ldc_ltemp
1D70 1202B7         4653                                             call            fldiv
1D73 120343         4654                                             call            ftol                            ;->
                             hex
                    4655                                             ;;;
1D76 120000   F     4656                                             call            maform
1D79 784F           4657                                             mov                     r0,#abin
1D7B 120000   F     4658                                             call            saver2
                    4659     ;;;;;;;;
                    4660                                             
1D7E 7853           4661                                             mov             r0,#adec
1D80 7952           4662                                             mov             r1,#abin+3      ;hex->10
1D82 120000   F     4663                                             call    bindec
                    4664                                     
1D85 785C           4665                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1D87 7949           4666                                             mov             r1,#bufind+9
1D89 7F05           4667                                             mov             r7,#5
1D8B E6             4668     bufmin:                         mov             a,@r0
1D8C 2430           4669                                             add             a,#30h
1D8E F7             4670                                             mov             @r1,a
1D8F 19             4671                                             dec             r1
1D90 18             4672                                             dec             r0
1D91 DFF8           4673                                             djnz    r7,bufmin
1D93 7844           4674                                             mov             r0,#bufind+4
1D95 762B           4675                                             mov             @r0,#2bh          
1D97 300202         4676                                             jnb             znmat,nozmin
1D9A 762D           4677                                             mov             @r0,#2dh
1D9C 434B05         4678     nozmin:         orl             bufind+11,#05h
1D9F 22             4679                                             ret
                    4680     
                    4681     
                    4682     
                    4683     ;мин значение по по блоку
1DA0                4684     vichmax:        
1DA0 120000   F     4685                                             call            resa_hl;save_bl->dptr
                    4686                                             
                    4687                                             
                    4688     ;с конца блока адрес 2го измерение
1DA3 120000   F     4689                                             call            min4_hl
                    4690                                             
1DA6 78B8           4691                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4692                                             
1DA8 E0             4693                                             movx            a,@dptr
1DA9 F6             4694                                             mov                     @r0,a
1DAA 08             4695                                             inc                     r0
1DAB A3             4696                                             inc                     dptr
1DAC E0             4697                                             movx            a,@dptr
1DAD F6             4698                                             mov                     @r0,a
1DAE 08             4699                                             inc                     r0
1DAF A3             4700                                             inc                     dptr
1DB0 E0             4701                                             movx            a,@dptr
1DB1 F6             4702                                             mov                     @r0,a
1DB2 08             4703                                             inc                     r0
1DB3 A3             4704                                             inc                     dptr
1DB4 E0             4705                                             movx            a,@dptr
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    75

1DB5 F6             4706                                             mov                     @r0,a
1DB6 A3             4707                                             inc                     dptr
                    4708                                             
1DB7 78B8           4709                                             mov                     r0,#work
1DB9 120000   F     4710                                             call            resar2
1DBC 120402         4711                                             call            altof;->float;r2..r5
1DBF 78B8           4712                                             mov                     r0,#work
1DC1 120000   F     4713                                             call            saver2
                    4714     
1DC4 120000   F     4715                                             call            min4_hl
                    4716                                     ;       call            min4_hl
                    4717     
1DC7 78D7           4718                                             mov                     r0,#copy_hl
1DC9 E583           4719                                             mov                     a,dph
1DCB F6             4720                                             mov                     @r0,a
1DCC 08             4721                                             inc                     r0
1DCD E582           4722                                             mov                     a,dpl
1DCF F6             4723                                             mov                     @r0,a
                    4724                                     
1DD0 78D6           4725                                             mov                     r0,#chblok;volume
1DD2 7600           4726                                             mov                     @r0,#0
1DD4 120000   F     4727     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1DD7 E582           4728                                             mov                     a,dpl
1DD9 FF             4729                                             mov                     r7,a
1DDA E583           4730                                             mov                     a,dph
1DDC FE             4731                                             mov                     r6,a
                    4732     
1DDD 78D7           4733                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1DDF E6             4734                                             mov                     a,@r0
1DE0 F583           4735                                             mov                     dph,a
1DE2 08             4736                                             inc                     r0
1DE3 E6             4737                                             mov                     a,@r0
1DE4 F582           4738                                             mov                     dpl,a
                    4739                                             
1DE6 C3             4740                                             clr                     c;-4
1DE7 E582           4741                                             mov                     a,dpl
1DE9 9404           4742                                             subb            a,#4
1DEB F582           4743                                             mov                     dpl,a
1DED E583           4744                                             mov                     a,dph
1DEF 9400           4745                                             subb            a,#0
1DF1 F583           4746                                             mov                     dph,a;dptr-4
                    4747                                             ;;;;;;;;
1DF3 79D7           4748                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1DF5 E583           4749                                                     mov             a,dph
1DF7 F7             4750                                               mov           @r1,a
1DF8 09             4751                                                     inc             r1
1DF9 E582           4752                                                     mov             a,dpl
1DFB F7             4753                                                     mov             @r1,a
                    4754                                                     ;;;;;;;;;
1DFC C3             4755                                                     clr             c;пришли в начало блока?
1DFD E582           4756                                                     mov                     a,dpl
1DFF 9F             4757                                                     subb            a,r7
1E00 FF             4758                                                     mov                     r7,a
1E01 7006           4759                                                     jnz                     nextmax
1E03 E583           4760                                                     mov                     a,dph
1E05 9E             4761                                                     subb            a,r6
1E06 FE             4762                                                     mov                     r6,a
1E07 601D           4763                                                     jz                      outmax;
                    4764                                                     
                    4765                                                     ;продолжаем сравнение
                    4766                                                     ;;;;;;;;;;;             
1E09 78B8           4767     nextmax:        mov                     r0,#work
1E0B 120000   F     4768                                             call            resar2
                    4769                                             ;call           altof;->float;r2..r5
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    76

1E0E 120000   F     4770                                             call            move28;->r8..r11
1E11 120000   F     4771                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4772     
1E14 120402         4773                                             call            altof;->float;r2..r5
                    4774                                             
1E17 1201D6         4775                                             call            flcmp
1E1A 4005           4776                                             jc                      nomaxi
1E1C 78B8           4777                                             mov                     r0,#work;>
1E1E 120000   F     4778                                             call            saver2;r2..r5
1E21 78D6           4779     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
1E23 06             4780                                             inc                     @r0
1E24 80AE           4781                                             jmp                     maxg
1E26 78B8           4782     outmax:         mov                     r0,#work;1ое измерение блока
1E28 120000   F     4783                                             call            resar2
                    4784                                     ;       call            altof;->float;r2..r5
1E2B 120000   F     4785                                             call            move28;->r8..r11
1E2E 120000   F     4786                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4787     
1E31 120402         4788                                             call            altof;->float;r2..r5
                    4789                                             
1E34 1201D6         4790                                             call            flcmp
1E37 4005           4791                                             jc                      maxvix
1E39 78B8           4792                                             mov                     r0,#work;>
1E3B 120000   F     4793                                             call            saver2;r2..r5
                    4794                                             ;;;;;;;;;
                    4795     
1E3E 020000   F     4796     maxvix:         jmp             minivix
                    4797     
                    4798     
                    4799     
                    4800     
                    4801     ;$include (d:\amp\subr5.asm) 
                +1  4802     ;
                +1  4803     ;goprogr:       jmp     izm
                +1  4804     ;тест интерфейса
1E41            +1  4805     testrs: ;jb     p0.3,goprogr
1E41 C2AC       +1  4806                                     clr     IE.4
1E43 759955     +1  4807     test1:  mov     SBUF0,#55h
1E46 3099FD     +1  4808                                     jnb     SCON0.1,$
1E49 78B8       +1  4809                                     mov     r0,#work;chtest
1E4B 76BE       +1  4810                                     mov     @r0,#190d;60
                +1  4811     
1E4D 309825     +1  4812     test01: jnb     SCON0.0,test2
1E50 E599       +1  4813                                     mov     a,SBUF0
1E52 B45512     +1  4814                                     cjne    a,#55h,test3
1E55 C299       +1  4815     test4:  clr     SCON0.1
1E57 C298       +1  4816                                     clr     SCON0.0
1E59 7D0A       +1  4817                                     mov     r5,#10
1E5B 7840       +1  4818                                     mov     r0,#bufind              ;- - - -
1E5D 762D       +1  4819     test04: mov     @r0,#2dh
1E5F 08         +1  4820                                     inc     r0
1E60 DDFB       +1  4821                                     djnz    r5,test04
1E62 120000   F +1  4822                                     call    ind
1E65 80DC       +1  4823                                     jmp     test1
1E67            +1  4824     test3:  
1E67 753933     +1  4825                                     mov     nuerr,#33h
1E6A 120000   F +1  4826                                     call    error           ;на кран прибора ERR 3
                +1  4827                             
1E6D 120000   F +1  4828                                     call    ind;
1E70 120000   F +1  4829                                     call    z_01s           ;100ms
1E73 80E0       +1  4830                                     jmp     test4
1E75 78B8       +1  4831     test2:  mov     r0,#work;chtest
1E77 B60002     +1  4832                                     cjne    @r0,#0,test02
1E7A 8003       +1  4833                                     jmp     test5
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    77

1E7C 16         +1  4834     test02: dec     @r0
1E7D 80CE       +1  4835                                     jmp     test01
1E7F 120000   F +1  4836     test5:  call    z_1ms           ;1ms
1E82 C299       +1  4837                                     clr     SCON0.1
                +1  4838             
1E84 753933     +1  4839                                     mov     nuerr,#33h
1E87 120000   F +1  4840                                     call    error           ;на кран прибора ERR 3
                +1  4841                                     
1E8A 120000   F +1  4842                                     call    ind
1E8D 120000   F +1  4843                                     call    z_01s           ;100ms
1E90 80B1       +1  4844                                     jmp     test1   
                +1  4845     
                +1  4846     
                +1  4847     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
1E92 75E700     +1  4848      ind:   mov             EIE2,#00H;mov   IE,#00h
1E95 120000   F +1  4849                     call    mign
1E98 7840       +1  4850                      mov            r0,#bufind;+11
1E9A 7F0C       +1  4851                      mov            r7,#12
1E9C C286       +1  4852      nexin: clr             p0.6
1E9E E6         +1  4853                     mov             a,@r0
1E9F F59B       +1  4854                     mov             SPI0DAT,a
1EA1 20FBFD     +1  4855                     jb              TXBSY,$
1EA4 D286       +1  4856                     setb    p0.6
1EA6 120000   F +1  4857                     call    z_9             ;25mks
1EA9 08         +1  4858                     inc             r0;dec          r0
1EAA DFF0       +1  4859                     djnz    r7,nexin
1EAC 75E730     +1  4860                     mov             EIE2,#30H;mov   IE,#80h
1EAF 22         +1  4861                ret
                +1  4862     
                +1  4863     
1EB0 7A08       +1  4864     zapadc:   mov R2,#8
1EB2 D297       +1  4865     sdv:      setb P1.7
1EB4 33         +1  4866               rlc A
1EB5 9296       +1  4867                     mov P1.6,C
1EB7 120000   F +1  4868                     call tim2
                +1  4869                                     
1EBA C297       +1  4870                     clr P1.7
1EBC 120000   F +1  4871                     call tim2
1EBF DAF1       +1  4872                     djnz R2,sdv
1EC1 D296       +1  4873                     setb P1.6
1EC3 22         +1  4874                     ret
                +1  4875     
1EC4 7A08       +1  4876     chtadc:   mov R2,#8
1EC6 D297       +1  4877     sdv1:     setb P1.7
1EC8 120000   F +1  4878               call tim2
1ECB C297       +1  4879                     clr P1.7
1ECD A296       +1  4880                     mov C,P1.6
1ECF 33         +1  4881                     rlc A
1ED0 120000   F +1  4882                     call tim2
1ED3 DAF1       +1  4883                     djnz R2,sdv1
1ED5 22         +1  4884                     ret
                +1  4885     
1ED6 7E30       +1  4886     tim:      mov R6,#30h;38h
1ED8 DEFE       +1  4887     tim1:     djnz R6,tim1
1EDA 22         +1  4888               ret
                +1  4889               
1EDB 7E10       +1  4890     tim2:     mov R6,#10h;14h
1EDD DEFE       +1  4891     tim3:     djnz R6,tim3
1EDF 22         +1  4892               ret
                +1  4893     
                +1  4894     ;запись из acc
1EE0 C3         +1  4895     write_x1: clr   c
1EE1            +1  4896     writeD_x1:
1EE1 92B1       +1  4897                       mov P3.1,c        ;запись
1EE3 F5A0       +1  4898               mov P2,A
1EE5 D2B3       +1  4899                       setb P3.3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    78

1EE7 120000   F +1  4900                       call z_5
1EEA C2B3       +1  4901                       clr P3.3
1EEC 75A0FF     +1  4902                       mov P2,#0FFh
1EEF 22         +1  4903                       ret
                +1  4904     
                +1  4905     ;чтение в acc
1EF0 C3         +1  4906     read_x2:  clr   c  
1EF1 92B1       +1  4907               mov P3.1,c        ;чтение
1EF3 D2B2       +1  4908               setb P3.2
1EF5 D2B3       +1  4909                       setb P3.3
1EF7 120000   F +1  4910                     call z_5
1EFA E5A0       +1  4911                       mov A,P2
1EFC C2B3       +1  4912                       clr P3.3
1EFE C2B2       +1  4913                       clr P3.2
1F00 22         +1  4914                       ret
                +1  4915     
                +1  4916     
1F01 120000   F +1  4917     loop:     call read_x2;x2    ;ожидание флага готовности
1F04 20E7FA     +1  4918                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
1F07 22         +1  4919                        ret           ;возврат, если бит А(7)<>1
                +1  4920                                      
                +1  4921                                        
                +1  4922     
                +1  4923     
                +1  4924     
                +1  4925     
                +1  4926     
                +1  4927     
                +1  4928     
                +1  4929     ;принимаемый байт в acc
                +1  4930     ;прием байта последовательным кодом старшими разрядами вперед
1F08 7A08       +1  4931     read:    mov R2,#8
1F0A C297       +1  4932     re1:     clr P1.7;P1.2
1F0C 120000   F +1  4933              call tim2        ;5mks
1F0F A294       +1  4934                     mov C,P1.4;P1.0
1F11 33         +1  4935                     rlc A           
1F12 D297       +1  4936                     setb P1.7;P1.2
1F14 120000   F +1  4937                     call tim2
1F17 DAF1       +1  4938                     djnz R2,re1
1F19 22         +1  4939                     ret
                +1  4940     
                +1  4941      ;in r0-count   
                +1  4942     ;r10,r11-значение с котоым сравнивается счетчик
                +1  4943     ;r2..r5 -значение счетчика
1F1A            +1  4944     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
1F1A E6         +1  4945                     mov                     a,@r0
1F1B FC         +1  4946                     mov                     r4,a
1F1C 08         +1  4947                     inc                     r0
1F1D E6         +1  4948                     mov                     a,@r0
1F1E FD         +1  4949                     mov                     r5,a
1F1F 7B00       +1  4950                     mov                     r3,#0
1F21 7A00       +1  4951                     mov                     r2,#0
1F23 750800     +1  4952                     mov                     r8,#0;clr                       r8
1F26 750900     +1  4953                     mov                     r9,#0;clr                       r9
1F29 120000   F +1  4954                     call            lcmp
1F2C 22         +1  4955                     ret
                +1  4956     
                +1  4957     
                +1  4958     ;in-r1-count
1F2D            +1  4959     chdec:          ;mov            r1,#chavt               ;chavt-1
1F2D E7         +1  4960                             mov             a,@r1
1F2E FC         +1  4961                             mov             r4,a
1F2F 09         +1  4962                             inc             r1
1F30 E7         +1  4963                             mov             a,@r1
1F31 FD         +1  4964                             mov             r5,a
1F32 C202       +1  4965                             clr             rr2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    79

1F34 C203       +1  4966                             clr             rr3
1F36 900000   F +1  4967                             mov             dptr,#ch1        
1F39 120000   F +1  4968                             call    ldc_ltemp
1F3C 120000   F +1  4969                             call    lsub
1F3F ED         +1  4970                             mov             a,r5
1F40 F7         +1  4971                             mov             @r1,a
1F41 19         +1  4972                             dec             r1
1F42 EC         +1  4973                             mov             a,r4
1F43 F7         +1  4974                             mov             @r1,a
1F44 22         +1  4975                             ret      
                +1  4976     
                +1  4977     
                +1  4978     
                +1  4979     
1F45            +1  4980     loadUS: ;если идет тест измерения ус восстановить для теста
1F45 201533     +1  4981                                     jb              biteizm,yestest
1F48 79AE       +1  4982                                             mov             r1,#diap
1F4A E7         +1  4983                             mov             a,@r1
1F4B 23         +1  4984                             rl              a;*2
1F4C FC         +1  4985                             mov             r4,a                    ;save a
1F4D 900000   F +1  4986                             mov             dptr,#tabus
1F50 93         +1  4987                             movc    a,@a+dptr
1F51 FA         +1  4988                             mov             r2,a                    ;high byte
1F52 E584       +1  4989                             mov             a,p4
1F54 5401       +1  4990                             anl             a,#01
1F56 4A         +1  4991                             orl             a,r2
1F57 F584       +1  4992                             mov             p4,a
1F59 0C         +1  4993                             inc             r4
1F5A EC         +1  4994                             mov             a,r4
1F5B 93         +1  4995                             movc    a,@a+dptr
1F5C FB         +1  4996                             mov             r3,a                    ;low byte
1F5D E585       +1  4997                             mov             a,p5
1F5F 5401       +1  4998                             anl             a,#01
1F61 4B         +1  4999                             orl             a,r3
1F62 F585       +1  5000                             mov             p5,a
1F64 799A       +1  5001                             mov             r1,#parT
1F66 B7010E     +1  5002                             cjne    @r1,#1,bret
1F69 79AE       +1  5003                             mov             r1,#diap                  ;10s (parT=1)
1F6B 7405       +1  5004                             mov             a,#5                      ;10-8..10-11 p4.1=1
1F6D C3         +1  5005                             clr             c
1F6E 97         +1  5006                             subb    a,@r1
1F6F 5006       +1  5007                             jnc             bret
1F71 E584       +1  5008                             mov             a,p4
1F73 4402       +1  5009                             orl             a,#02
1F75 F584       +1  5010                             mov             p4,a                     ;10-8..10-11 p4.1=1
1F77 120000   F +1  5011     bret:      call          louizm         ;us если вкл кн ИЗМЕР
1F7A 22         +1  5012                             ret
1F7B            +1  5013     yestest:
1F7B 120000   F +1  5014                             call            lotpus          ;ус теста измерения
1F7E 22         +1  5015                             ret
                +1  5016                             
                +1  5017     ;загр ус для кор 0
                +1  5018     ;dptr-
1F7F E4         +1  5019     lospus:         clr             a
                +1  5020                             ;movc   a,@a+dptr
                +1  5021                             ;mov            r2,a                    ;high byte
                +1  5022                             ;mov            a,p4
                +1  5023                             ;anl            a,#01
                +1  5024                             ;orl            a,r2
                +1  5025                             ;mov            p4,a
                +1  5026                             ;inc            dptr
1F80 E4         +1  5027                             clr             a
1F81 93         +1  5028                             movc    a,@a+dptr
1F82 FB         +1  5029                             mov             r3,a                    ;low byte
1F83 E585       +1  5030                             mov             a,p5
1F85 54BF       +1  5031                             anl             a,#0bfh;01
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    80

1F87 4B         +1  5032                             orl             a,r3
1F88 F585       +1  5033                             mov             p5,a
1F8A 22         +1  5034                             ret
                +1  5035     
1F8B 80         +1  5036     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  5037     
                +1  5038     ;us кнопка измерения выкл
1F8C 88D6       +1  5039     tabus:     db           88h,0d6h         ;10-2
1F8E 88F6       +1  5040                             db      88h,0f6h         ;10-3
1F90 88D6       +1  5041                             db              88h,0d6h         ;10-4
1F92 88F6       +1  5042                             db              88h,0f6h         ;10-5
1F94 9AD6       +1  5043                             db      9ah,0d6h         ;10-6
1F96 9AF6       +1  5044                             db              9ah,0f6h         ;10-7
1F98 ACD6       +1  5045                             db              0ach,0d6h        ;10-8
1F9A ACF6       +1  5046                             db      0ach,0f6h        ;10-9
1F9C C8D6       +1  5047                             db              0c8h,0d6h        ;10-10
1F9E C8F6       +1  5048                             db              0c8h,0f6h        ;10-11
                +1  5049     
1FA0            +1  5050     tabt11: 
1FA0 66E6       +1  5051                             db              66h,0e6h;10-11
1FA2            +1  5052     tabt9:  
1FA2 32E6       +1  5053                             db              32h,0e6h;10-9
1FA4            +1  5054     tabt7:  
1FA4 18EE       +1  5055                             db              18h,0eeh;10-7
                +1  5056     
                +1  5057      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  5058     ;в зав от parT (Tизм)
1FA6 79B7       +1  5059     loadT:          mov             r1,#load;parT
1FA8 7840       +1  5060     lolevT:         mov             r0,#bufind+0
1FAA 7B0A       +1  5061                             mov             r3,#10
1FAC 75F00A     +1  5062                             mov             b,#10
1FAF E7         +1  5063                             mov             a,@r1
1FB0 A4         +1  5064                             mul             ab
1FB1 FC         +1  5065                             mov             r4,a                    ;save a
1FB2 900000   F +1  5066                             mov             dptr,#textT
1FB5 93         +1  5067             lod1:   movc    a,@a+dptr
1FB6 F6         +1  5068                             mov             @r0,a
1FB7 08         +1  5069                             inc             r0
1FB8 0C         +1  5070                             inc             r4
1FB9 EC         +1  5071                             mov             a,r4
1FBA DBF9       +1  5072                             djnz    r3,lod1
1FBC 22         +1  5073                             ret     
                +1  5074     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  5075     ;dptr-адр строки текста         
1FBD            +1  5076     lotext:         
1FBD 7B0A       +1  5077                             mov             r3,#10
1FBF 7840       +1  5078                             mov             r0,#bufind+0
1FC1 E4         +1  5079     lodt:           clr             a
1FC2 93         +1  5080                             movc    a,@a+dptr
1FC3 F6         +1  5081                             mov             @r0,a
1FC4 08         +1  5082                             inc             r0
1FC5 A3         +1  5083                             inc             dptr
1FC6 DBF9       +1  5084                             djnz    r3,lodt
1FC8 22         +1  5085                             ret                                     
                +1  5086     
                +1  5087     
                +1  5088     
                +1  5089     
                +1  5090      ;задержка 100 мкс
1FC9 7978       +1  5091     z_100:    mov R1,#78h     ;загрузка первого числа
1FCB 7A02       +1  5092     z100:     mov R2,#2h     ;загрузка второго числа
1FCD DAFE       +1  5093     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
1FCF D9FA       +1  5094               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
1FD1 22         +1  5095               ret           
                +1  5096     
                +1  5097     ;задержка 34 мкс
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    81

1FD2 7B8B       +1  5098     z_5:      mov R3,#8Bh      ;загрузка числа
1FD4 DBFE       +1  5099     ct:       djnz R3,ct
1FD6 22         +1  5100               ret
                +1  5101     
                +1  5102     ;задержка 15 мс
1FD7 79FA       +1  5103     z_15:     mov R1,#0FAh    ;загрузка первого числа
1FD9 7AED       +1  5104     z15:      mov R2,#0EDh   ;загрузка второго числа
1FDB DAFE       +1  5105     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
1FDD D9FA       +1  5106               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
1FDF 22         +1  5107               ret   
                +1  5108                                               
                +1  5109      ;задержка 1 мс
1FE0 7910       +1  5110     z_1ms:     mov R1,#10h     
1FE2 7AED       +1  5111     ss1:       mov R2,#0EDh    
1FE4 DAFE       +1  5112                djnz R2, $    
1FE6 D9FA       +1  5113                djnz R1, ss1   
1FE8 22         +1  5114                ret   
                +1  5115     
                +1  5116      ;????????
                +1  5117     ;задержка 1с
1FE9 7D1F       +1  5118     z_1s:   mov             r5,#01fh 
1FEB 7EFF       +1  5119     co2s:   mov     R6,#0ffh     
1FED 7FFF       +1  5120     z1s:     mov    R7,#0ffh     
1FEF DFFE       +1  5121     co1s:   djnz    R7, co1s        
1FF1 DEFA       +1  5122             djnz    R6, z1s 
1FF3 DDF6       +1  5123                     djnz    r5,co2s
1FF5 22         +1  5124               ret
                +1  5125     ;задержка 0,1с
1FF6 7D03       +1  5126     z_01s:           mov            r5,#03h 
1FF8 7EFF       +1  5127     co02s:          mov     R6,#0ffh     
1FFA 7FFF       +1  5128     z01s:           mov     R7,#0ffh     
1FFC DFFE       +1  5129                             djnz    R7, $   
1FFE DEFA       +1  5130                     djnz    R6, z01s 
2000 DDF6       +1  5131                             djnz    r5,co02s
2002 22         +1  5132                      ret
                +1  5133                                               
                +1  5134     ;задержка 0,5с
2003 7D0D       +1  5135     z_05s:           mov            r5,#0dh 
2005 7EFF       +1  5136     co05s:                  mov     R6,#0ffh     
2007 7FFF       +1  5137     z05s:           mov     R7,#0ffh     
2009 DFFE       +1  5138                                     djnz    R7, $   
200B DEFA       +1  5139                     djnz    R6, z05s 
200D DDF6       +1  5140                                             djnz    r5,co05s
200F 22         +1  5141                      ret                                                     
                +1  5142                                                               
2010 000007FF   +1  5143     chzap:  db      00,00,07h,0ffh             
2014 00000000   +1  5144     ch0:    db      00,00,00,00
2018 0000000A   +1  5145     ch10:   db      00,00,00,0ah                            ;10
201C 00000005   +1  5146     ch5:    db      00,00,00,05                                             ;5
2020 00000004   +1  5147     ch4:    db      00,00,00,04                                             ;4
2024 000003B9   +1  5148     ch954:  db 00,00,03,0b9h                                                ;954
2028 000003E8   +1  5149     ch10000:        db 00,00,03h,0e8h                                               ;10000
202C 00000064   +1  5150     ch100:  db 00,00,00,64h ;100
2030 00000002   +1  5151     ch2:    db      00,00,00,02                                             
                +1  5152     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5153     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5154     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
2034 00000001   +1  5155     ch1:    db  00,00,00,01
2038 49742400   +1  5156     ch_mln: db      49h,74h,24h,00;10*6
203C 3F800000   +1  5157     ch_1:   db      3fh,80h,00,00   
2040 40000000   +1  5158     ch_2:   db      40h,00,00,00;2
2044 40800000   +1  5159     ch_4:   db      40h,80h,00,00;4         
2048 3F741EDF   +1  5160     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
204C 47C35000   +1  5161     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
2050 3F800347   +1  5162     KD:             db      3fh,80h,03h,47h;1,0001
2054 48435000   +1  5163     CH2tho: db      48h,43h,50h,00;200000
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    82

2058 4856D800   +1  5164     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
205C 4856D800   +1  5165     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
2060 461C4000   +1  5166     ch_10th:db  46h,1ch,40h,00;10000-2710h
2064 41200000   +1  5167     ch_10:  db      41h,20h,00,00;10d
2068 48742400   +1  5168     ch_250: db      48h,74h,24h,00;250000
206C 000186A0   +1  5169     chk:            db      00,01,86h,0a0h;
2070 00000320   +1  5170     ch320h: db      00,00,03h,20h;320h=800d
2074 00000150   +1  5171     ch150h: db      00,00,01h,50h;150h
                +1  5172     ;r1- мл байт 2х байтного числа
2078            +1  5173     tenmin:         ;-10
2078 C3         +1  5174                             clr             c
2079 E7         +1  5175                     mov             a,@r1
207A 9405       +1  5176                             subb    a,#5;10
207C F7         +1  5177                             mov             @r1,a
207D 19         +1  5178                             dec             r1
207E E7         +1  5179                             mov             a,@r1
207F 9400       +1  5180                             subb    a,#0
2081 F7         +1  5181                             mov             @r1,a
2082 22         +1  5182                             ret
                +1  5183       ;r0-обнуление ячеек памяти  
2083 7F04       +1  5184       clear4:        mov    r7,#4
2085 E4         +1  5185                             clr             a
2086 F6         +1  5186       cl4:          mov             @r0,a
2087 08         +1  5187                             inc             r0
2088 DFFC       +1  5188                             djnz    r7,cl4
208A 22         +1  5189                             ret     
                +1  5190     
                +1  5191      ;r0-обнуление ячеек памяти 
                +1  5192      ;R7- 
208B            +1  5193       clearN:        
208B E4         +1  5194                             clr             a
208C F6         +1  5195       cl4N:         mov             @r0,a
208D 08         +1  5196                             inc             r0
208E DFFC       +1  5197                             djnz    r7,cl4N
2090 22         +1  5198                             ret     
                +1  5199     
                +1  5200       ;чтение номера байта с индикатора(2байта)
                +1  5201     ;bufind+8..bufind+9
                +1  5202     ;-  - - -
                +1  5203     ;- - - - - - - - - -
                +1  5204     ;adec..adec+9
                +1  5205     ;ст            мл
2091 7848       +1  5206     upak2:  mov             r0,#bufind+8;
2093 795C       +1  5207                     mov             r1,#adec+9
2095 7F02       +1  5208                     mov             r7,#2;2bait
2097 C3         +1  5209     upa2:   clr             c
2098 E6         +1  5210                     mov             a,@r0
2099 9430       +1  5211                     subb    a,#30h
209B F7         +1  5212                     mov             @r1,a
209C 18         +1  5213                     dec             r0
209D 19         +1  5214                     dec             r1
209E DFF7       +1  5215                     djnz    r7,upa2
20A0 22         +1  5216                     ret  
                +1  5217     
                +1  5218     
                +1  5219         
                +1  5220      ;bufind+4..bufind+9
                +1  5221     ;-  - - -
                +1  5222     ;- - - - - - - - - -
                +1  5223     ;adec..adec+9
                +1  5224     ;ст            мл
20A1 7849       +1  5225     upak:   mov             r0,#bufind+9;
20A3 795C       +1  5226                     mov             r1,#adec+9
20A5 7F06       +1  5227                     mov             r7,#6
20A7 C3         +1  5228     upa:    clr             c
20A8 E6         +1  5229                     mov             a,@r0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    83

20A9 9430       +1  5230                     subb    a,#30h
20AB F7         +1  5231                     mov             @r1,a
20AC 18         +1  5232                     dec             r0
20AD 19         +1  5233                     dec             r1
20AE DFF7       +1  5234                     djnz    r7,upa
20B0 22         +1  5235                     ret
                +1  5236     
                +1  5237      ;чтение номера байта с индикатора(3байта)
                +1  5238     ;bufind+3..bufind+9
                +1  5239     ;-  - - -
                +1  5240     ;- - - - - - - - - -
                +1  5241     ;adec..adec+9
                +1  5242     ;ст            мл
20B1 7849       +1  5243     upak3:  mov             r0,#bufind+9;
20B3 795C       +1  5244                     mov             r1,#adec+9
20B5 7F03       +1  5245                     mov             r7,#3;3bait
20B7 C3         +1  5246     upa1:   clr             c
20B8 E6         +1  5247                     mov             a,@r0
20B9 9430       +1  5248                     subb    a,#30h
20BB F7         +1  5249                     mov             @r1,a
20BC 18         +1  5250                     dec             r0
20BD 19         +1  5251                     dec             r1
20BE DFF7       +1  5252                     djnz    r7,upa1
20C0 22         +1  5253                     ret
                +1  5254     
                +1  5255     ;вых-r2,r3-адрес ячее памяти прогр
20C1            +1  5256     findkoef:
20C1 79AE       +1  5257                                     mov             r1,#diap
20C3 E7         +1  5258                                     mov             a,@r1
20C4 23         +1  5259                                     rl              a                                          
                                          ;diap*2(2bait )
20C5 FC         +1  5260                                     mov             r4,a                                    ;sa
                             ve
20C6 900000   F +1  5261                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5262                                     
20C9 93         +1  5263                                     movc    a,@a+dptr                       ;ст байт
20CA FA         +1  5264                                     mov             r2,a
20CB A3         +1  5265                                     inc             dptr
20CC EC         +1  5266                                     mov             a,r4
20CD 93         +1  5267                                     movc    a,@a+dptr
20CE FB         +1  5268                                     mov             r3,a                    ;мл байт
20CF 22         +1  5269                                     ret
                +1  5270     ;r2..r5 в опр яч внешн озу
20D0            +1  5271     findext:
20D0 79AE       +1  5272                                     mov             r1,#diap
20D2 E7         +1  5273                                     mov             a,@r1
20D3 23         +1  5274                                     rl              a                                          
                                          ;diap*2(2bait )
20D4 23         +1  5275                                     rl              a                                          
                                          ;diap*2(2bait )
20D5 F9         +1  5276                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5277                                     
20D6 22         +1  5278                                     ret
                +1  5279     
                +1  5280     ;адрес ячеек прзу  коффициентов диапазона KD
                +1  5281     ;(5000h..5027h)
20D7 5000       +1  5282     diKDw:  dw              5000h                   ;10-2
20D9 5004       +1  5283                                     dw              5004h                   ;10-3
20DB 5008       +1  5284                                     dw              5008h                   ;10-4
20DD 500C       +1  5285                                     dw              500ch                   ;10-5
20DF 5010       +1  5286                                     dw              5010h                   ;10-6
20E1 5014       +1  5287                                     dw              5014h                   ;10-7
20E3 5018       +1  5288                                     dw              5018h                   ;10-8
20E5 501C       +1  5289                                     dw              501ch                   ;10-9
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    84

20E7 5020       +1  5290                                     dw              5020h                   ;10-10
20E9 5024       +1  5291                                     dw              5024h                   ;10-11
20EB 5028       +1  5292     dipar:  dw              5028h                   ;parol
20ED 502C       +1  5293     diKm:           dw              502ch                   ;Km для теста измерения
20EF 000186A0   +1  5294     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5295     
20F3 AA08       +1  5296     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
20F5 AB09       +1  5297                                             mov     r3,ltemp+1
20F7 AC0A       +1  5298                                             mov     r4,ltemp+2
20F9 AD0B       +1  5299                                             mov     r5,ltemp+3
20FB 22         +1  5300                                             ret
                +1  5301     ;bufind+4..bufind+9
                +1  5302     ;-  - - -
                +1  5303     ;- - - - - - - - - -
                +1  5304     ;adec..adec+9
                +1  5305     ;ст            мл
20FC 7847       +1  5306     upakA:  mov             r0,#bufind+7;
20FE 795C       +1  5307                     mov             r1,#adec+9
2100 7F04       +1  5308                     mov             r7,#4
2102 C3         +1  5309     upaa4:  clr             c
2103 E6         +1  5310                     mov             a,@r0
2104 9430       +1  5311                     subb    a,#30h
2106 F7         +1  5312                     mov             @r1,a
2107 18         +1  5313                     dec             r0
2108 19         +1  5314                     dec             r1
2109 DFF7       +1  5315                     djnz    r7,upaa4
210B 22         +1  5316                     ret
                +1  5317     
                +1  5318     ;bufind+4..bufind+9
                +1  5319     ;-  - - -
                +1  5320     ;- - - - - - - - - -
                +1  5321     ;adec..adec+9
                +1  5322     ;ст            мл
210C 7848       +1  5323     upakB:  mov             r0,#bufind+8;
210E 795C       +1  5324                     mov             r1,#adec+9
2110 7F05       +1  5325                     mov             r7,#5
2112 C3         +1  5326     upab:   clr             c
2113 E6         +1  5327                     mov             a,@r0
2114 9430       +1  5328                     subb    a,#30h
2116 F7         +1  5329                     mov             @r1,a
2117 18         +1  5330                     dec             r0
2118 19         +1  5331                     dec             r1
2119 DFF7       +1  5332                     djnz    r7,upab
211B C21B       +1  5333                     clr                     bitznB
211D E543       +1  5334                     mov             a,bufind+3
211F B42D02     +1  5335                     cjne            a,#2dh,abret
2122 D21B       +1  5336                     setb            bitznB
2124            +1  5337     abret:
2124 22         +1  5338                     ret
2125            +1  5339     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
2125 4E6E6AA8   +1  5340                                             db      4eh,6eh,6ah,0a8h;10**9
2129 43FA0000   +1  5341     CH_500:         db              43h,0fah,00,00;1fah=500
212D 4856D800   +1  5342     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
2131 49742400   +1  5343     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5344     
                +1  5345     
                +1  5346     
                +1  5347     ;управление AD7731
                +1  5348     ;r4=b1 r5=b2
2135            +1  5349     iniacp: ;управление AD7731
2135 7403       +1  5350                             mov             a,#03
                +1  5351     
2137 120000   F +1  5352                             call    write
213A EC         +1  5353                             mov             a,r4;#80h
213B 120000   F +1  5354                             call    write
213E ED         +1  5355                             mov             a,r5;#04
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    85

213F 120000   F +1  5356                             call    write
2142 7402       +1  5357                             mov             a,#02
2144 120000   F +1  5358                             call    write
2147 74A1       +1  5359                             mov             a,#0a1h
2149 120000   F +1  5360                             call    write
214C 7474       +1  5361                             mov             a,#74h
214E 120000   F +1  5362                             call    write
2151 2095FD     +1  5363                             jb              p1.5,$;p1.3,$
2154 7402       +1  5364                             mov             a,#02
2156 120000   F +1  5365                             call    write
2159 7481       +1  5366                             mov             a,#81h
215B 120000   F +1  5367                             call    write
215E 7474       +1  5368                             mov             a,#74h
2160 120000   F +1  5369                             call    write
2163 2095FD     +1  5370                             jb              p1.5,$;p1.3,$
2166 7402       +1  5371                             mov             a,#02
2168 120000   F +1  5372                             call    write
216B 7421       +1  5373                             mov             a,#21h
216D 120000   F +1  5374                             call    write
2170 7474       +1  5375                             mov             a,#74h
2172 120000   F +1  5376                             call    write
2175 22         +1  5377                             ret
                +1  5378                             ;;;;;;;;;;;;;;;;
                +1  5379     ;;;;;;;;;;;;;;;;;
                +1  5380     ;;;;;;;;;;;;;;;;;
2176 0000       +1  5381     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
2178 6000       +1  5382                                     db              60h,00h;40h,04h         ;10s
217A 6000       +1  5383                                     db              60h,00;40h,04h          ;1s
217C 6000       +1  5384                                     db              60h,00h;40h,04h         ;0,1s
217E 6000       +1  5385                                     db              60h,00h;20h,04h         ;50ms
2180 6000       +1  5386                                     db              60h,00h;20h,04h          ;10ms
2182 1332       +1  5387                                     db              13h,32h         ;2ms
                +1  5388     
                +1  5389     ;загр В1,В2 в завис от Т                                
2184 799A       +1  5390     loab12:                 mov             r1,#parT
2186 900000   F +1  5391                                     mov             dptr,#tabB1_2
2189 E7         +1  5392                                     mov             a,@r1
218A 23         +1  5393                                     rl              a;*2
218B FF         +1  5394                                     mov             r7,a                    ;save a
218C 93         +1  5395                                     movc    a,@a+dptr
218D FC         +1  5396                                     mov             r4,a   ;b1
218E 0F         +1  5397                                     inc             r7
218F EF         +1  5398                                     mov             a,r7
2190 93         +1  5399                                     movc    a,@a+dptr
2191 FD         +1  5400                                     mov             r5,a
                +1  5401                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5402                             
2192 22         +1  5403                                     ret
                +1  5404     
                +1  5405     
2193 7852       +1  5406     loadr2: mov             r0,#abin+3              ;r2..r5
2195 E6         +1  5407                     mov             a,@r0                   ; ст мл   
2196 FA         +1  5408                     mov             r2,a
2197 18         +1  5409                     dec             r0
2198 E6         +1  5410                     mov             a,@r0
2199 FB         +1  5411                     mov             r3,a
219A 18         +1  5412                     dec             r0
219B E6         +1  5413                     mov             a,@r0
219C FC         +1  5414                     mov             r4,a
219D 18         +1  5415                     dec             r0
219E E6         +1  5416                     mov             a,@r0
219F FD         +1  5417                     mov             r5,a
21A0 22         +1  5418                     ret
                +1  5419                                             
                +1  5420      ;;;;;;;;;;;;;;;;;;;      
                +1  5421      ;загрузка KD в зависимости от диап изм  
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    86

                +1  5422      ;koef->r8..r11
21A1 78AE       +1  5423     loadKD:                 mov             r0,#diap
21A3 E6         +1  5424                                     mov             a,@r0
21A4 900000   F +1  5425                                     mov             dptr,#diKDn
21A7 75F004     +1  5426                                     mov             b,#4
21AA A4         +1  5427                                     mul             ab
21AB FF         +1  5428                                     mov             r7,a;save
21AC 93         +1  5429                                     movc    a,@a+dptr
21AD F508       +1  5430                                     mov             r8,a
21AF A3         +1  5431                                     inc             dptr
21B0 EF         +1  5432                                     mov             a,r7
21B1 93         +1  5433                                     movc    a,@a+dptr
21B2 F509       +1  5434                                     mov             r9,a
21B4 A3         +1  5435                                     inc             dptr
21B5 EF         +1  5436                                     mov             a,r7
21B6 93         +1  5437                                     movc    a,@a+dptr
21B7 F50A       +1  5438                                     mov             r10,a
21B9 A3         +1  5439                                     inc             dptr
21BA EF         +1  5440                                     mov             a,r7
21BB 93         +1  5441                                     movc    a,@a+dptr
21BC F50B       +1  5442                                     mov             r11,a
21BE 22         +1  5443                                     ret
                +1  5444     
21BF 3F506B7B   +1  5445      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
21C3 3F507FCC   +1  5446                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
21C7 3F4F9D0B   +1  5447                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
21CB 3F4FE869   +1  5448                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
21CF 3F50294A   +1  5449                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
21D3 3F50639E   +1  5450                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
21D7 3F4BC9F0   +1  5451                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
21DB 3F4C063B   +1  5452                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
21DF 3F50EFDD   +1  5453                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
21E3 3F512AD9   +1  5454                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5455     
21E7 00000039   +1  5456     ch57:   db      00,00,00,39h;57
21EB 00000014   +1  5457     ch20:   db      00,00,00,14h;20
                +1  5458     
                +1  5459     ;загр ус для тестов ацп 
                +1  5460     ;dptr-
21EF 78B1       +1  5461     lotpus: mov             r0,#vichR
21F1 B6210D     +1  5462                                     cjne    @r0,#21h,te22
21F4 900000   F +1  5463                                     mov                     dptr,#tabt11;заслать ус 11А
21F7 E4         +1  5464     lotp:           clr             a
21F8 93         +1  5465                             movc    a,@a+dptr                               ;high byte
21F9 F584       +1  5466                             mov             p4,a
21FB A3         +1  5467                             inc             dptr
21FC E4         +1  5468                             clr             a
21FD 93         +1  5469                             movc    a,@a+dptr                               ;low byte
21FE F585       +1  5470                             mov             p5,a
2200 22         +1  5471                             ret
2201 B62205     +1  5472     te22:                   cjne    @r0,#22h,te23
2204 900000   F +1  5473                             mov                     dptr,#tabt9;заслать ус 9А       
2207 80EE       +1  5474                             jmp                     lotp
                +1  5475     
2209 900000   F +1  5476     te23:   mov                     dptr,#tabt7;заслать ус 7А       
220C 80E9       +1  5477                             jmp                     lotp
                +1  5478     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    87

                +1  5479     
                +1  5480     
                +1  5481     
                +1  5482     
220E 02030405   +1  5483     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
2212 06070809                
2216 0A0B                    
                +1  5484     
2218 78AE       +1  5485     findR:                  mov                     r0,#diap
221A E6         +1  5486                                                     mov                     a,@r0
221B 900000   F +1  5487                                                     mov                     dptr,#Tabn
221E 93         +1  5488                                                     movc            a,@a+dptr
221F 22         +1  5489                                                     ret
                +1  5490     
                +1  5491     ;bufind=30h..39h                                                                           
                                           ;
2220 C219       +1  5492     vvchif:                 clr             bitmig
2222 79B2       +1  5493                                     mov             r1,#marker
2224 E7         +1  5494                                     mov             a,@r1                   ;изм цифры
2225 7840       +1  5495                                     mov             r0,#bufind                      ;0000
2227 28         +1  5496                                     add             a,r0
2228 F8         +1  5497                                     mov             r0,a
2229 06         +1  5498                                     inc             @r0
222A B63A02     +1  5499                                     cjne    @r0,#3ah,chif
222D 7630       +1  5500                                     mov             @r0,#30h
222F            +1  5501     chif:   
222F 22         +1  5502                             ret
2230            +1  5503     vvchibl:        ;mov                    r0,#level
                +1  5504                                             ;cjne           @r0,#32h,vvchibl4;при наборе цифр в
                              блоке
2230 80EE       +1  5505                                             jmp                     vvchif  ;при наборе цифр в 
                             интервале                                    
2232            +1  5506     vvchibl4:
2232 C219       +1  5507                             clr             bitmig
2234 79B2       +1  5508                                     mov             r1,#marker
2236 E7         +1  5509                                     mov             a,@r1                   ;изм цифры
2237 7840       +1  5510                                     mov             r0,#bufind                      ;1..4
2239 28         +1  5511                                     add             a,r0
223A F8         +1  5512                                     mov             r0,a
223B 06         +1  5513                                     inc             @r0
223C B63504     +1  5514                                     cjne    @r0,#35h,chifb
223F 7631       +1  5515                                     mov             @r0,#31h
2241 8005       +1  5516                                     jmp             chifb1
2243 B63002     +1  5517     chifb:  cjne    @r0,#30h,chifb1
2246 7631       +1  5518                                     mov             @r0,#31h
2248            +1  5519     chifb1:
2248 22         +1  5520             ret
                +1  5521       ;перевод маркера влево
2249            +1  5522     marle:  
2249 C219       +1  5523                     clr             bitmig
                +1  5524                     ;mov            savba,#0   нельзя обнулять
224B 78B2       +1  5525             mov             r0,#marker
224D 16         +1  5526                     dec             @r0
224E E6         +1  5527                     mov             a,@r0
224F C3         +1  5528                     clr             c
2250 953A       +1  5529                     subb    a,movleft         ;крайне левое положение
2252 5001       +1  5530                     jnc             rler
2254 06         +1  5531                     inc             @r0
2255 22         +1  5532     rler:   ret
                +1  5533         
                +1  5534     ;перевод маркера вправо
2256 C219       +1  5535     marri:  clr             bitmig
2258 78B2       +1  5536                     mov             r0,#marker
225A 06         +1  5537                     inc         @r0
225B E53B       +1  5538                     mov             a,movrig           ;крайне правое положение
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    88

225D C3         +1  5539                     clr             c
225E 96         +1  5540                     subb    a,@r0
225F 5001       +1  5541                     jnc             rrir
2261 16         +1  5542                     dec             @r0
2262 22         +1  5543     rrir:   ret
                +1  5544         
                +1  5545     ;konstA->bufind+4..bufind+7
2263 78BC       +1  5546     outA:           mov                     r0,#konstA
2265 120000   F +1  5547                                     call            resar2
2268 120343     +1  5548                                     call            ftol                    ;->hex
226B 784F       +1  5549                                     mov             r0,#abin
226D 120000   F +1  5550                                     call            saver2
2270 7853       +1  5551                                     mov                     r0,#adec
2272 7952       +1  5552                                     mov             r1,#abin+3
2274 120000   F +1  5553                                     call            bindec
2277 785C       +1  5554                                     mov                     r0,#adec+9
2279 7947       +1  5555                                     mov                     r1,#bufind+7
227B 7F04       +1  5556                                     mov                     r7,#4
227D E6         +1  5557     outa2:  mov             a,@r0
227E 2430       +1  5558                               add           a,#30h
2280 F7         +1  5559                                     mov             @r1,a
2281 19         +1  5560                                     dec             r1
2282 18         +1  5561                                     dec             r0
2283 DFF8       +1  5562                                     djnz    r7,outa2
2285 22         +1  5563                                     ret
                +1  5564                                             
                +1  5565     ;konstB->bufind+4..bufind+8
2286 78C0       +1  5566     outB:           mov                     r0,#konstB
2288 120000   F +1  5567                                     call            resar2
228B EA         +1  5568                                     mov                     a,r2
228C 5480       +1  5569                                     anl                     a,#80h
228E 6007       +1  5570                                     jz                      outb3
2290 EA         +1  5571     mov                     a,r2
2291 547F       +1  5572                                     anl                     a,#7fh
2293 FA         +1  5573                                     mov                     r2,a
2294 75432D     +1  5574                                     mov                     bufind+3,#2dh
2297 120343     +1  5575     outb3:  call            ftol                    ;->hex
229A 784F       +1  5576                                     mov             r0,#abin
229C 120000   F +1  5577                                     call            saver2
229F 7853       +1  5578                                     mov                     r0,#adec
22A1 7952       +1  5579                                     mov             r1,#abin+3
22A3 120000   F +1  5580                                     call            bindec
22A6 785C       +1  5581                                     mov                     r0,#adec+9
22A8 7948       +1  5582                                     mov                     r1,#bufind+8
22AA 7F05       +1  5583                                     mov                     r7,#5
22AC E6         +1  5584     outb2:  mov             a,@r0
22AD 2430       +1  5585                               add           a,#30h
22AF F7         +1  5586                                     mov             @r1,a
22B0 19         +1  5587                                     dec             r1
22B1 18         +1  5588                                     dec             r0
22B2 DFF8       +1  5589                                     djnz    r7,outb2
22B4 22         +1  5590                                     ret
                +1  5591     
                +1  5592     
                +1  5593     ;пп мигания индикации
22B5 78B2       +1  5594     mign:           mov             r0,#marker
                +1  5595                                     
22B7 B6FF03     +1  5596                                     cjne    @r0,#0ffh,mignn
                +1  5597                                     ;реж изм мигает *
22BA C219       +1  5598                                     clr             bitmig
22BC 22         +1  5599                                     ret
                +1  5600     
22BD            +1  5601     mignn:                  ;clr            c
22BD 7440       +1  5602                                     mov             a,#bufind
22BF 26         +1  5603                                     add             a,@r0                   ;a=bufind+marker
22C0 F9         +1  5604                                     mov             r1,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    89

22C1 201907     +1  5605                                     jb              bitmig,onmig
22C4 873C       +1  5606                                     mov             savba,@r1
                +1  5607                             ;       mov             a,@r1
                +1  5608                             ;       mov             savba,a
22C6 7720       +1  5609                                     mov             @r1,#" "
                +1  5610                                     
22C8 D219       +1  5611                                     setb    bitmig
22CA 22         +1  5612                                     ret
                +1  5613     
22CB A73C       +1  5614     onmig:                  mov             @r1,savba
                +1  5615                                     ;mov            a,savba
                +1  5616                                     ; mov           @r1,a
22CD C219       +1  5617                                     clr             bitmig
22CF 120000   F +1  5618                                     call    z_01s
22D2 22         +1  5619                                     ret
                +1  5620     ;номер ошибки bufind+6
22D3 900000   F +1  5621     error:          mov             dptr,#teERR
22D6 120000   F +1  5622                                             call    lotext
22D9 853946     +1  5623                                             mov             bufind+6,nuerr
22DC 22         +1  5624                                     ret
                +1  5625     
                +1  5626     
22DD            +1  5627     textT:          
22DD FD543D32   +1  5628                             db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
22E1 6D67FDFD                
22E5 FDFD                    
22E7 FD543D31   +1  5629                             db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
22EB 306D67FD                
22EF FDFD                    
22F1 FD543D35   +1  5630                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
22F5 306D67FD                
22F9 FDFD                    
22FB FD543D64   +1  5631                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
22FF 3167FDFD                
2303 FDFD                    
2305 20202054   +1  5632                             db              " "," "," ","T","=",31h,67h," "," "," "
2309 3D316720                
230D 2020                    
230F 2020543D   +1  5633                             db              " "," ","T","=",31h,30h,67h," "," "," "  
2313 31306720                
2317 2020                    
                +1  5634     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5635     
2319 42753474   +1  5636     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
231D 79767454                
2321 7720                    
2323 20553D20   +1  5637     teAequ0:        db              " ",'U','='," "," "," "," "," "," ",65h
2327 20202020                
232B 2065                    
232D 20423D2B   +1  5638     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
2331 20202020                
2335 2020                    
2337 20207145   +1  5639     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
233B 48722020                
233F 2020                    
                +1  5640     
2341 20544579   +1  5641     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
2345 542D7433                
2349 7120                    
234B 54457954   +1  5642     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
234F 20523520                
2353 2020                    
2355 20794B30   +1  5643     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
2359 50205235                
235D 2020                    
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    90

235F 20204142   +1  5644     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
2363 4B202020                
2367 2020                    
2369 204B4176   +1  5645     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
236D 74735020                
2371 202020                  
                +1  5646     
2374 20544579   +1  5647     teTE11:         db              " ",'T',"E",79h,'T'," "," "," ",'T',31h;          21
2378 54202020                
237C 5431                    
237E 20544579   +1  5648     teTE9:          db              " ",'T',"E",79h,'T'," "," "," ",'T',32h;                   
                                                  22
2382 54202020                
2386 5432                    
2388 20544579   +1  5649     teTE7:          db              " ",'T',"E",79h,'T'," "," "," ",'T',33h;                   
                                                  23
238C 54202020                
2390 5433                    
                +1  5650     
                +1  5651     
2392 20353736   +1  5652     teS57_6:                db              " ",35h,37h,36h," "," "," "," "," "," ";57.6
2396 20202020                
239A 2020                    
239C 20313932   +1  5653     teS19_2:                db              " ",31h,39h,32h," "," "," "," "," "," ";19,2
23A0 20202020                
23A4 2020                    
                +1  5654     
23A6 61415030   +1  5655     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
23AA 76772030                
23AE 3030                    
23B0 20303030   +1  5656     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
23B4 30302020                
23B8 2041                    
23BA 74337120   +1  5657     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
23BE 4B304879                
23C2 5420                    
23C4 20204275   +1  5658     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
23C8 58307820                
23CC 2020                    
23CE 2020304C   +1  5659     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
23D2 4C202020                
23D6 2020                    
23D8 20203034   +1  5660     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
23DC 7479544B                
23E0 4120                    
23E2 20203041   +1  5661     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
23E6 71795420                
23EA 20203341   +1  5662     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
23EE 61747977                
23F2 2020                    
23F4 20206150   +1  5663     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
23F8 30797130                
23FC 545020                  
23FF 20206130   +1  5664     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
2403 76484162                
2407 2020                    
2409 20744854   +1  5665     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
240D 20303030                
2411 3067                    
2413 20207376   +1  5666     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2417 304B2020                
241B 2020                    
241D 20207376   +1  5667     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
2421 304B2030                
2425 2020                    
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    91

2427 30547934   +1  5668     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,30h;ОТСЧЕТ 000
242B 45542030                
242F 3030                    
2431 79544154   +1  5669     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
2435 74795474                
2439 4B41                    
243B 71744820   +1  5670     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
243F 20202020                
2443 2020                    
2445 71414B79   +1  5671     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2449 20202020                
244D 2020                    
244F 79504578   +1  5672     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
2453 20202020                
2457 2020                    
                +1  5673      ;;;;;;;;;;;;;;;;;;;         
2459 2020304C   +1  5674     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
245D 4C204920                
2461 2020                    
2463 2020304C   +1  5675     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
2467 4C206620                
246B 2020                    
246D 20204552   +1  5676     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
2471 52202020                
2475 2020                    
2477 2020454E   +1  5677     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
247B 44202020                
247F 2020                    
                +1  5678     
                +1  5679     ;dptr+4-приемник
                +1  5680     ;dptr-источник
                +1  5681     ;r7-кол байт  
2481            +1  5682     xCIKLWR:
2481 7F04       +1  5683                             mov             r7,#4   
2483 E0         +1  5684     lwrx:   movx    a,@dptr
2484 C083       +1  5685                             push    dph
2486 C082       +1  5686                             push    dpl
2488 A3         +1  5687                             inc             dptr
2489 A3         +1  5688                             inc             dptr
248A A3         +1  5689                             inc             dptr
248B A3         +1  5690                             inc             dptr
248C F0         +1  5691                             movx    @dptr,a
248D D082       +1  5692                             pop             dpl
248F D083       +1  5693                             pop             dph
                +1  5694                             
2491 A3         +1  5695                             inc             dptr
2492 DFEF       +1  5696                             djnz    r7,lwrx
2494 22         +1  5697                             ret
                +1  5698     ;r2..r5->@dptr..@dptr+3                         
2495 EA         +1  5699     saveIr2:                mov     a,r2
2496 F0         +1  5700                                             movx    @dptr,a
2497 A3         +1  5701                                             inc     dptr
2498 EB         +1  5702                                             mov     a,r3
2499 F0         +1  5703                                             movx    @dptr,a
249A A3         +1  5704                                             inc     dptr
249B EC         +1  5705                                             mov     a,r4
249C F0         +1  5706                                             movx    @dptr,a
249D A3         +1  5707                                             inc     dptr
249E ED         +1  5708                                             mov     a,r5
249F F0         +1  5709                                             movx    @dptr,a
24A0 22         +1  5710                                             ret
                +1  5711     ;r2..r5-> @r0..@r0+3
                +1  5712     
24A1 EA         +1  5713     saver2:         mov     a,r2
24A2 F6         +1  5714                                             mov     @r0,a
24A3 08         +1  5715                                             inc     r0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    92

24A4 EB         +1  5716                                             mov     a,r3
24A5 F6         +1  5717                                             mov     @r0,a
24A6 08         +1  5718                                             inc     r0
24A7 EC         +1  5719                                             mov     a,r4
24A8 F6         +1  5720                                             mov     @r0,a
24A9 08         +1  5721                                             inc     r0
24AA ED         +1  5722                                             mov     a,r5
24AB F6         +1  5723                                             mov     @r0,a
24AC 22         +1  5724                                             ret 
24AD 7F50       +1  5725     clmassix:       mov                     r7,#50h;28h
24AF 900100     +1  5726                             mov     dptr,#MASS0        ;забить массив A нулями
24B2 7400       +1  5727     clmax:          mov          a,#00h
24B4 F0         +1  5728                  movx    @dptr,a
24B5 A3         +1  5729                  inc     dptr
24B6 DFFA       +1  5730                 djnz                r7,clmax                
24B8 F56E       +1  5731                  mov     chmas,a
24BA C201       +1  5732                  clr     bitmas
24BC 22         +1  5733                 ret
                +1  5734     ;r1-яЁшхьшъ
                +1  5735     ;r0-шёЄюўшъ
                +1  5736     ;r7-ъюы срщЄ  
24BD            +1  5737     CIKLWR:
24BD 7F04       +1  5738                             mov             r7,#4   
24BF E6         +1  5739     lwr:    mov     a,@r0
24C0 F7         +1  5740                             mov     @r1,a
24C1 09         +1  5741                             inc             r1
24C2 08         +1  5742                             inc             r0
24C3 DFFA       +1  5743                             djnz    r7,lwr
24C5 22         +1  5744                             ret     
                +1  5745     ;r2..r5-> @dptr..@dptr+3
                +1  5746     
24C6 120000   F +1  5747     zmul:   call    maform
24C9 120000   F +1  5748                     call    lmul
24CC 120000   F +1  5749                     call    bform
24CF 22         +1  5750                     ret
                +1  5751     
24D0 120000   F +1  5752     zdiv:   call    maform
24D3 120000   F +1  5753                     call    divide
24D6 120000   F +1  5754                     call    bform
24D9 22         +1  5755                     ret
                +1  5756     
24DA EA         +1  5757     maform: mov a,r2
24DB 33         +1  5758             rlc a
24DC 5006       +1  5759             jnc             fo1m
24DE D202       +1  5760                     setb            znmat
24E0 120000   F +1  5761                     call   form4
24E3 22         +1  5762                     ret
24E4 C202       +1  5763     fo1m:   clr             znmat
24E6 22         +1  5764                     ret
                +1  5765     
24E7 300203     +1  5766     bform:  jnb             znmat,fo2m
24EA 120000   F +1  5767                     call    form4
24ED 22         +1  5768     fo2m:   ret
                +1  5769       
                +1  5770     ;r2..r5 яхЁхтхёЄш т фюя ъюф
24EE ED         +1  5771     form4:          mov a,r5
24EF F4         +1  5772             cpl a
24F0 2401       +1  5773             add a,#1
24F2 FD         +1  5774             mov r5,a
24F3 EC         +1  5775             mov a,r4
24F4 F4         +1  5776             cpl a
24F5 3400       +1  5777             addc    a,#0
24F7 FC         +1  5778             mov r4,a
24F8 EB         +1  5779             mov a,r3
24F9 F4         +1  5780                 cpl a
24FA 3400       +1  5781             addc    a,#0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    93

24FC FB         +1  5782             mov r3,a
24FD EA         +1  5783             mov a,r2
24FE F4         +1  5784             cpl a
24FF 3400       +1  5785             addc    a,#0
2501 FA         +1  5786             mov r2,a
2502 22         +1  5787             ret
                +1  5788     
2503 120000   F +1  5789     zcmp:   call            maform
2506 120000   F +1  5790                     call            lcmp
2509 C0D0       +1  5791                     push            psw
250B 120000   F +1  5792                     call    bform
250E D0D0       +1  5793                     pop             psw
2510 22         +1  5794                     ret
                +1  5795     
                +1  5796     
                +1  5797     ;@r0..@r0+3->r8..r11
                +1  5798     
2511 E6         +1  5799     resar8: mov     a,@r0
2512 F508       +1  5800                     mov     ltemp,a
2514 08         +1  5801                     inc     r0
2515 E6         +1  5802                     mov     a,@r0
2516 F509       +1  5803                     mov     ltemp+1,a
2518 08         +1  5804                     inc     r0
2519 E6         +1  5805                     mov     a,@r0
251A F50A       +1  5806                     mov     ltemp+2,a
251C 08         +1  5807                     inc     r0
251D E6         +1  5808                     mov     a,@r0
251E F50B       +1  5809                     mov     ltemp+3,a
2520 22         +1  5810                     ret
                +1  5811     
                +1  5812     ;
                +1  5813     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  5814     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  5815     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  5816     ;r2 a    ўшёыю 180
                +1  5817     ;00 b4
                +1  5818     ;т_ї- mabin..mabin+2
                +1  5819     ;     80 01 00
                +1  5820      
2521 C8         +1  5821     cond:   xch     a,r0    
2522 F9         +1  5822                     mov     r1,a
2523 C8         +1  5823                     xch     a,r0
2524 7C03       +1  5824                     mov     r4,#03
2526 7700       +1  5825     dcoa:   mov     @r1,#00
2528 09         +1  5826                     inc     r1
2529 DCFB       +1  5827                     djnz    r4,dcoa
252B 7B10       +1  5828                     mov     r3,#10h
252D C3         +1  5829     dcob:   clr     c
252E 33         +1  5830                     rlc     a
252F CA         +1  5831                     xch     a,r2
2530 33         +1  5832                     rlc     a
2531 CA         +1  5833                     xch     a,r2
2532 C8         +1  5834                     xch     a,r0
2533 F9         +1  5835                     mov     r1,a
2534 C8         +1  5836                     xch     a,r0
2535 7C03       +1  5837                     mov     r4,#03
2537 FD         +1  5838                     mov     r5,a
2538 E7         +1  5839     dcoc:   mov     a,@r1 
2539 37         +1  5840                     addc    a,@r1
253A D4         +1  5841                     da      a
253B F7         +1  5842                     mov     @r1,a
253C 09         +1  5843                     inc     r1
253D DCF9       +1  5844                     djnz    r4,dcoc
253F ED         +1  5845                     mov     a,r5
2540 4003       +1  5846                     jc      dcod
2542 DBE9       +1  5847                     djnz    r3,dcob
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    94

2544 C3         +1  5848                     clr     c
2545 00         +1  5849     dcod:   nop
2546 22         +1  5850                     ret
                +1  5851     
2547 8A08       +1  5852     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2549 850309     +1  5853                     mov     ltemp+1,3
254C 85040A     +1  5854                     mov     ltemp+2,4
254F 85050B     +1  5855                     mov     ltemp+3,5
2552 22         +1  5856                     ret
                +1  5857     
                +1  5858     ;@r0..@r0+3->r2..r5
                +1  5859     
2553 E6         +1  5860     resar2: mov     a,@r0
2554 FA         +1  5861                     mov     r2,a
2555 08         +1  5862                     inc     r0
2556 E6         +1  5863                     mov     a,@r0
2557 FB         +1  5864                     mov     r3,a
2558 08         +1  5865                     inc     r0
2559 E6         +1  5866                     mov     a,@r0
255A FC         +1  5867                     mov     r4,a
255B 08         +1  5868                     inc     r0
255C E6         +1  5869                     mov     a,@r0
255D FD         +1  5870                     mov     r5,a
255E 22         +1  5871                     ret
                +1  5872     
                +1  5873     ;25mkc !!!!!!!!!!!!!!!1
255F 7B4B       +1  5874     z_9:      mov R3,#4Bh      ;загрузка числа
2561 DBFE       +1  5875                    djnz R3,$
2563 22         +1  5876               ret
                +1  5877     
                +1  5878     ;запись   передаваемый байт в acc
                +1  5879     ;передача байта послед кодом старшими разрядами  вперед
2564 7A08       +1  5880     write:     mov R2,#8
2566 C3         +1  5881                             clr  c  
2567 C297       +1  5882     wr1:            clr             p1.7;P1.2
2569 00         +1  5883                         nop 
256A 33         +1  5884                             rlc A
256B 9296       +1  5885                             mov P1.6,C;P1.1,C
256D 120000   F +1  5886                        call tim2
2570 D297       +1  5887                        setb P1.7;P1.2
2572 120000   F +1  5888                call tim2
2575 DAF0       +1  5889                       djnz R2,wr1
2577 C296       +1  5890                       clr P1.6;P1.1
2579 22         +1  5891                                              ret
                +1  5892     
                +1  5893     ;чтение номера байта с индикатора(2байта)
                +1  5894     ;bufind+8..bufind+9
                +1  5895     ;-  - - -
                +1  5896     ;- - - - - - - - - -
                +1  5897     ;adec..adec+9
                +1  5898     ;ст            мл
257A 7847       +1  5899     upak1:  mov             r0,#bufind+7;
257C 795C       +1  5900                                     mov             r1,#adec+9
257E C3         +1  5901                                     clr             c
257F E6         +1  5902                                     mov             a,@r0
2580 9430       +1  5903                                     subb    a,#30h
2582 FF         +1  5904                                     mov             r7,a
2583 C3         +1  5905                                     clr             c
2584 9405       +1  5906                                     subb    a,#5
2586 4004       +1  5907                                     jc              upk1
2588 7404       +1  5908                                     mov             a,#4
258A 8001       +1  5909                                     jmp             upk2
258C EF         +1  5910     upk1:           mov             a,r7
258D F7         +1  5911     upk2:           mov             @r1,a
258E 22         +1  5912                                     ret  
                +1  5913     ;r1-мл байт счетчика ячеек
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    95

258F C3         +1  5914     chminus:        clr                     c
2590 E7         +1  5915                                             mov                     a,@r1
2591 9401       +1  5916                                             subb            a,#01
2593 F7         +1  5917                                             mov                     @r1,a;low
2594 19         +1  5918                                             dec                     r1
2595 E7         +1  5919                                             mov                     a,@r1
2596 9400       +1  5920                                             subb            a,#00
2598 F7         +1  5921                                             mov                     @r1,a
2599 22         +1  5922                                             ret
                +1  5923     
                +1  5924     
                +1  5925     ;чтение номера байта с индикатора(4байта)
                +1  5926     ;bufind+6..bufind+9
                +1  5927     ;-  - - -
                +1  5928     ;- - - - - - - - - -
                +1  5929     ;adec..adec+9
                +1  5930     ;ст            мл
259A 7848       +1  5931     upak4:  mov             r0,#bufind+8;
259C 795C       +1  5932                     mov             r1,#adec+9
259E 7F04       +1  5933                     mov             r7,#4
25A0 C3         +1  5934     upaa:   clr             c
25A1 E6         +1  5935                     mov             a,@r0
25A2 9430       +1  5936                     subb    a,#30h
25A4 F7         +1  5937                     mov             @r1,a
25A5 18         +1  5938                     dec             r0
25A6 19         +1  5939                     dec             r1
25A7 DFF7       +1  5940                     djnz    r7,upaa
25A9 22         +1  5941                     ret
                +1  5942     
                +1  5943     ;dptr-адр ячейки 1й соотв блока 
25AA E538       +1  5944     adrblok:         mov            a,nblok
25AC C3         +1  5945                              clr            c
25AD 9401       +1  5946                              subb           a,#1
25AF FD         +1  5947                              mov            r5,a
25B0 E4         +1  5948                              clr            a
25B1 FC         +1  5949                              mov            r4,a
25B2 FB         +1  5950                              mov            r3,a
25B3 FA         +1  5951                              mov            r2,a
25B4 900000   F +1  5952                                     mov                     dptr,#ch320h
25B7 120000   F +1  5953                                     CALL   ldc_ltemp                 ; ltemp <-320
25BA 120000   F +1  5954                                     call            lmul;r2..r5
25BD ED         +1  5955                                     mov                     a,r5
25BE 2450       +1  5956                                     add                     a,#50h
25C0 F582       +1  5957                                     mov                     dpl,a
25C2 EC         +1  5958                                     mov                     a,r4
25C3 3401       +1  5959                                     addc            a,#01           
25C5 F583       +1  5960                                     mov                     dph,a                   ;dptr-
25C7 22         +1  5961                                     ret
                +1  5962     
                +1  5963     ;
                +1  5964     ;saven_bl<-dptr  адрес след ячейки внешн озу 
25C8 79D3       +1  5965     save_hl:                mov             r1,#saven_bl
25CA E583       +1  5966                                                     mov             a,dph
25CC F7         +1  5967                                               mov           @r1,a
25CD 09         +1  5968                                                     inc             r1
25CE E582       +1  5969                                                     mov             a,dpl
25D0 F7         +1  5970                                                     mov             @r1,a
                +1  5971                                                     ;;;;;;;;;не конец ли блока
                +1  5972                             
                +1  5973     
25D1 79D6       +1  5974                                     mov                     r1,#volume+1;work+1
25D3 120000   F +1  5975                                     call            chminus
25D6 78D5       +1  5976                                     mov             r0,#volume
25D8 E6         +1  5977                                     mov             a,@r0
25D9 30E702     +1  5978                                     jnb             acc.7,noendli
25DC C20A       +1  5979                                     clr                     bitbon                  ;блок закон
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    96

                             чился
                +1  5980                             
25DE            +1  5981     noendli:        
25DE 22         +1  5982                                             ret
                +1  5983     ;загрузка dptr сохр ранее значением адреса ячейки
25DF 79D3       +1  5984     resa_hl:                mov             r1,#saven_bl
25E1 E7         +1  5985                                                     mov             a,@r1
25E2 F583       +1  5986                                                     mov             dph,a
                +1  5987                                               
25E4 09         +1  5988                                                     inc             r1
25E5 E7         +1  5989                                                     mov             a,@r1
25E6 F582       +1  5990                                                     mov             dpl,a
25E8 22         +1  5991                                                     ret
                +1  5992     ;загрузка rez_A3 в соотв яч внешн озу
25E9 789C       +1  5993     loA3_X:                 mov             r0,#rez_A3
25EB 120000   F +1  5994                                                     call    resar2
                +1  5995                                                     
25EE EA         +1  5996                                                     mov             a,r2                    ;
25EF F0         +1  5997                                                     movx    @dptr,a
25F0 A3         +1  5998                                                     inc             dptr
25F1 EB         +1  5999                                                     mov             a,r3
25F2 F0         +1  6000                                                     movx    @dptr,a
25F3 A3         +1  6001                                                     inc             dptr
25F4 EC         +1  6002                                                     mov             a,r4
25F5 F0         +1  6003                                                     movx    @dptr,a
25F6 A3         +1  6004                                                     inc             dptr
25F7 ED         +1  6005                                                     mov             a,r5
25F8 F0         +1  6006                                                     movx    @dptr,a
25F9 A3         +1  6007                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
25FA 22         +1  6008                                                     ret             ;в ячейке saven_bl
                +1  6009     ;чтение в rez_A3 из соотв яч внешн озу
25FB            +1  6010     reA3_X:         
                +1  6011                                                     
25FB E0         +1  6012                                                     movx    a,@dptr
25FC FA         +1  6013                                                     mov             r2,a
25FD A3         +1  6014                                                     inc             dptr
25FE E0         +1  6015                                                     movx    a,@dptr
25FF FB         +1  6016                                                     mov             r3,a
2600 A3         +1  6017                                                     inc             dptr
2601 E0         +1  6018                                                     movx    a,@dptr
2602 FC         +1  6019                                                     mov             r4,a
2603 A3         +1  6020                                                     inc             dptr
2604 E0         +1  6021                                                     movx    a,@dptr
2605 FD         +1  6022                                                     mov             r5,a
2606 A3         +1  6023                                                     inc             dptr
2607 789C       +1  6024                                                     mov             r0,#rez_A3
2609 120000   F +1  6025                                                     call    saver2
260C 22         +1  6026                                                     ret
                    6027     
                    6028     ;$include (d:\amp\sarifm3.asm) 
                +1  6029     ; ” ©« SARIFM.ASM 8.11.95
                +1  6030     ;файл арифметики
                +1  6031       
  0008          +1  6032     ltemp    equ       8           ;long temporary
  000C          +1  6033     xtemp    equ       12          ;other temporaries
  000A          +1  6034     DECSIZE  EQU       10
  0004          +1  6035     NUMSIZE  EQU       4
  0004          +1  6036     RR4  EQU       4
  0005          +1  6037     RR5  EQU       5
                +1  6038     
                +1  6039                                                     
                +1  6040     
                +1  6041                 ; rseg     ARIF          ; Switch to this code segment.
                +1  6042     ;             using    0              ; Specify register bank for the following
                +1  6043                                            ; program code.
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    97

                +1  6044     ;                                               cseg AT 400h
                +1  6045     ; Arithmetics:  CLEARING string
                +1  6046     ; Input:
                +1  6047     ; R0 - pointer to string,
                +1  6048     ; NUMSIZE - byte count if CLRNUM used,
                +1  6049     ; DECSIZE - byte count if CLRDEC used,
                +1  6050     ; R2 - byte count if CLEAR used;
                +1  6051     ; Output:  none.
                +1  6052     
260D            +1  6053     CLRDEC:
260D 7A0A       +1  6054         MOV R2, #DECSIZE
260F 8002       +1  6055         SJMP    CLEAR
2611            +1  6056     CLRNUM:
2611 7A04       +1  6057         MOV R2, #NUMSIZE
                +1  6058         ;JMP    CLEAR
2613            +1  6059     CLEAR:
2613 E4         +1  6060         CLR A
2614 F6         +1  6061     CLR11:  MOV @R0, A
2615 08         +1  6062         INC R0
2616 DAFC       +1  6063         DJNZ    R2, CLR11
2618 22         +1  6064         RET
                +1  6065     
                +1  6066     ;**********************************
                +1  6067     ;mov    r1,#abin+3
                +1  6068     ;mov    r0,#adec
                +1  6069     ; _ _ _ _
                +1  6070     ;     03ff
                +1  6071     ;ст     мл   - вход
                +1  6072     ; _ _ _ _ _ _ _ _ _ _
                +1  6073     ;             1 0 2 3
                +1  6074     ;ст                мл 
                +1  6075     ;**********************************
                +1  6076     
2619            +1  6077     BINDEC:
                +1  6078     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  6079     ; Input:
                +1  6080     ; R0 - pointer to destination (high digit is the first),
                +1  6081     ; R1 - pointer to source,
                +1  6082     ; NUMSIZE - byte count in binary number;
                +1  6083     ; DECSIZE - byte count in decimal number;
                +1  6084     ; Output:  none.
                +1  6085     ; Source saved
                +1  6086     
                +1  6087         ; 1. Clear result
2619 7A05       +1  6088         MOV R2, #DECSIZE/2
261B 120000   F +1  6089         CALL   CLEAR  ; incrementing R0
                +1  6090     
                +1  6091         ; 2. Prepare convertion
261E 18         +1  6092         DEC R0
261F 8804       +1  6093         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
2621 8905       +1  6094         MOV RR5, R1 ; R5 - pointer to low byte of binary number
2623 7B20       +1  6095         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6096     
                +1  6097         ; 3. Convert cyrcle
2625            +1  6098     BIN30:
                +1  6099     
                +1  6100         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
2625 A905       +1  6101         MOV R1, RR5
2627 7A04       +1  6102         MOV R2, #NUMSIZE
2629 E7         +1  6103     BIN31:  MOV A, @R1
262A 33         +1  6104         RLC A
262B F7         +1  6105         MOV @R1, A
262C 19         +1  6106         DEC R1
262D DAFA       +1  6107         DJNZ    R2, BIN31
262F A905       +1  6108         MOV R1, RR5
2631 E7         +1  6109         MOV A, @R1
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    98

2632 92E0       +1  6110         MOV ACC.0, C
2634 F7         +1  6111         MOV @R1, A
                +1  6112     
                +1  6113         ; 3.2. Doubling decimal result with <Carry>
2635 A804       +1  6114         MOV R0, RR4
2637 7A05       +1  6115         MOV R2, #DECSIZE/2
2639 E6         +1  6116     BIN32:  MOV A, @R0
263A 36         +1  6117         ADDC    A, @R0
263B D4         +1  6118         DA  A
263C F6         +1  6119         MOV @R0, A
263D 18         +1  6120         DEC R0
263E DAF9       +1  6121         DJNZ    R2, BIN32
                +1  6122     
                +1  6123         ; 3.3. End of convert cyrcle
2640 DBE3       +1  6124         DJNZ    R3, BIN30
                +1  6125     
                +1  6126         ; 4. Make bytes from half-bytes
2642 E8         +1  6127         MOV A, R0
2643 240A       +1  6128         ADD A, #DECSIZE
2645 F8         +1  6129         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
2646 A904       +1  6130         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2648 7A05       +1  6131         MOV R2, #DECSIZE/2
264A E7         +1  6132     BIN41:  MOV A, @R1
264B 540F       +1  6133         ANL A, #00FH
264D F6         +1  6134         MOV @R0, A
264E 18         +1  6135         DEC R0
264F E7         +1  6136         MOV A, @R1
2650 C4         +1  6137         SWAP    A
2651 540F       +1  6138         ANL A, #00FH
2653 F6         +1  6139         MOV @R0, A
2654 18         +1  6140         DEC R0
2655 19         +1  6141         DEC R1
2656 DAF2       +1  6142         DJNZ    R2, BIN41
2658 22         +1  6143         RET
                +1  6144     
                +1  6145     
                +1  6146     ;*********************************
                +1  6147     ;mov    r0,#abin
                +1  6148     ;mov    r1,#adec
                +1  6149     ; _ _ _ _       -выход
                +1  6150     ; ff0000
                +1  6151     ;0004
                +1  6152     ;мл      ст
                +1  6153     
                +1  6154     ;ст                       мл
                +1  6155     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6156     ;                       2 5 5
                +1  6157     ;                   1 0 2 4
                +1  6158     
2659            +1  6159     DECBIN:
                +1  6160     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6161     ; Input:
                +1  6162     ; R0 - pointer to destination,
                +1  6163     ; R1 - pointer to source (high digit is the first),
                +1  6164     ; NUMSIZE - byte count in binary number;
                +1  6165     ; DECSIZE - byte count in decimal number;
                +1  6166     ; Output:  none
                +1  6167     ; Source cleared
                +1  6168     
                +1  6169         ; 1. Clear result
2659 120000   F +1  6170         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6171     
                +1  6172         ; 2. Prepare convertion
265C 18         +1  6173         DEC R0
265D 8804       +1  6174         MOV RR4, R0 ; R4 - pointer to high byte of binary result
265F 8905       +1  6175         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE    99

2661 900000   F +1  6176         MOV DPTR, #DECT2
2664 7B20       +1  6177         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6178     
                +1  6179         ; 3. Convert cyrcle
2666            +1  6180     DEC30:
                +1  6181     
                +1  6182         ; 3.1. Divide decimal number by 2 and prepare <Carry>
2666 C3         +1  6183         CLR C
2667 A905       +1  6184         MOV R1, RR5
2669 7A0A       +1  6185         MOV R2, #DECSIZE
266B E7         +1  6186     DEC31:  MOV A, @R1
266C 540F       +1  6187         ANL A, #00FH
266E 92E4       +1  6188         MOV ACC.4, C
2670 93         +1  6189         MOVC    A,@A+DPTR
2671 F7         +1  6190         MOV @R1, A
2672 A2E7       +1  6191         MOV C, ACC.7
2674 09         +1  6192         INC R1
2675 DAF4       +1  6193         DJNZ    R2, DEC31
                +1  6194     
                +1  6195         ; 3.2. Rotate binary result one bit to right with <Carry>
2677 A804       +1  6196         MOV R0, RR4
2679 7A04       +1  6197         MOV R2, #NUMSIZE
267B E6         +1  6198     DEC32:  MOV A, @R0
267C 13         +1  6199         RRC A
267D F6         +1  6200         MOV @R0, A
267E 18         +1  6201         DEC R0
267F DAFA       +1  6202         DJNZ    R2, DEC32
                +1  6203     
                +1  6204         ; 3.3. End of convert cyrcle
2681 DBE3       +1  6205         DJNZ    R3, DEC30
2683 22         +1  6206         RET
                +1  6207     
2684 00800181   +1  6208     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
2688 02820383                
268C 0484                    
268E 00000000   +1  6209         DB  00,00,00,00,00,00
2692 0000                    
2694 05850686   +1  6210         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
2698 07870888                
269C 0989                    
                +1  6211     
                +1  6212     ;   Long comparison
                +1  6213     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6214     ;   flags and acc set as though a long subtraction was done.
                +1  6215     ;*******************************
                +1  6216     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6217     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6218     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6219     ;*******************************
269E            +1  6220     lcmp:
269E C3         +1  6221         clr c
269F EA         +1  6222         mov a,r2
26A0 9508       +1  6223         subb    a,8
26A2 700F       +1  6224         jnz done
26A4 EB         +1  6225         mov a,r3
26A5 9509       +1  6226         subb    a,9
26A7 7008       +1  6227         jnz done1
26A9 EC         +1  6228         mov a,r4
26AA 950A       +1  6229         subb    a,10
26AC 7003       +1  6230         jnz done1
26AE ED         +1  6231         mov a,r5
26AF 950B       +1  6232         subb    a,11
26B1            +1  6233     done1:
26B1 C2D2       +1  6234         clr ov      ;overflow is significant only for top byte
26B3            +1  6235     done:
26B3 22         +1  6236         ret
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   100

                +1  6237     
                +1  6238     ;   Load long into r2-5 from [dptr]
                +1  6239     
26B4            +1  6240     ldc_long:
26B4 E583       +1  6241         mov a,dph       ;is it in on board memory
26B6 6010       +1  6242         jz  onboard     ;yes
26B8 E4         +1  6243         clr a
26B9 93         +1  6244         movc    a,@a+dptr
26BA FA         +1  6245         mov r2,a
26BB 7401       +1  6246         mov a,#1
26BD 93         +1  6247         movc    a,@a+dptr
26BE FB         +1  6248         mov r3,a
26BF 7402       +1  6249         mov a,#2
26C1 93         +1  6250         movc    a,@a+dptr
26C2 FC         +1  6251         mov r4,a
26C3 7403       +1  6252         mov a,#3
26C5 93         +1  6253         movc    a,@a+dptr
26C6 FD         +1  6254         mov r5,a
26C7 22         +1  6255         ret
26C8            +1  6256     onboard:
26C8 A882       +1  6257         mov r0,dpl
26CA E6         +1  6258         mov a,@r0
26CB FA         +1  6259         mov r2,a
26CC 08         +1  6260         inc r0
26CD E6         +1  6261         mov a,@r0
26CE FB         +1  6262         mov r3,a
26CF 08         +1  6263         inc r0
26D0 E6         +1  6264         mov a,@r0
26D1 FC         +1  6265         mov r4,a
26D2 08         +1  6266         inc r0
26D3 E6         +1  6267         mov a,@r0
26D4 FD         +1  6268         mov r5,a
26D5 22         +1  6269         ret
                +1  6270     
                +1  6271     ;**************************************
                +1  6272     ;загрузить ltemp...+3 из памяти программ
                +1  6273     ;mov    dptr,#CH5
                +1  6274     ;call   ldc_ltemp        ltemp <--5
                +1  6275     ;**************************************
26D6            +1  6276     ldc_ltemp:
26D6 E583       +1  6277         mov a,dph       ;is it in on board memory
26D8 6014       +1  6278         jz  oboard      ;yes
26DA E4         +1  6279         clr a
26DB 93         +1  6280         movc    a,@a+dptr
26DC F508       +1  6281         mov 8,a
26DE 7401       +1  6282         mov a,#1
26E0 93         +1  6283         movc    a,@a+dptr
26E1 F509       +1  6284         mov 9,a
26E3 7402       +1  6285         mov a,#2
26E5 93         +1  6286         movc    a,@a+dptr
26E6 F50A       +1  6287         mov 10,a
26E8 7403       +1  6288         mov a,#3
26EA 93         +1  6289         movc    a,@a+dptr
26EB F50B       +1  6290         mov 11,a
26ED 22         +1  6291         ret
26EE            +1  6292     oboard:
26EE A882       +1  6293         mov r0,dpl
26F0 8608       +1  6294         mov 8,@r0
26F2 08         +1  6295         inc r0
26F3 8609       +1  6296         mov 9,@r0
26F5 08         +1  6297         inc r0
26F6 860A       +1  6298         mov 10,@r0
26F8 08         +1  6299         inc r0
26F9 860B       +1  6300         mov 11,@r0
26FB 22         +1  6301         ret
                +1  6302     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   101

                +1  6303     ;*****************************
                +1  6304     ;mov    dptr,#k1
                +1  6305     ;call   ldx_long
                +1  6306     ;k1->r2..r5
                +1  6307     ;*****************************
                +1  6308     ;   Load long into r2-5 from [dptr]
                +1  6309     ;
                +1  6310     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
26FC            +1  6311     ldx_long:
26FC E583       +1  6312         mov a,dph       ;is it in on board memory
26FE 6014       +1  6313         jz  onboar1        ;yes
2700 C082       +1  6314         push    dpl
2702 C083       +1  6315         push    dph
2704 E0         +1  6316         movx    a,@dptr
2705 FA         +1  6317         mov r2,a
2706 A3         +1  6318         inc dptr
2707 E0         +1  6319         movx    a,@dptr
2708 FB         +1  6320         mov r3,a
2709 A3         +1  6321         inc dptr
270A E0         +1  6322         movx    a,@dptr
270B FC         +1  6323         mov r4,a
270C A3         +1  6324         inc dptr
270D E0         +1  6325         movx    a,@dptr
270E FD         +1  6326         mov r5,a
270F D083       +1  6327         pop dph
2711 D082       +1  6328         pop dpl
2713 22         +1  6329         ret
2714            +1  6330     onboar1:
2714 A882       +1  6331         mov r0,dpl
2716 E6         +1  6332         mov a,@r0
2717 FA         +1  6333         mov r2,a
2718 08         +1  6334         inc r0
2719 E6         +1  6335         mov a,@r0
271A FB         +1  6336         mov r3,a
271B 08         +1  6337         inc r0
271C E6         +1  6338         mov a,@r0
271D FC         +1  6339         mov r4,a
271E 08         +1  6340         inc r0
271F E6         +1  6341         mov a,@r0
2720 FD         +1  6342         mov r5,a
2721 22         +1  6343         ret
                +1  6344     
                +1  6345     ;*********************************
                +1  6346     ;mov    dptr,#k2
                +1  6347     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6348     ;**********************************
2722            +1  6349     ldx_ltemp:
2722 E583       +1  6350         mov a,dph       ;is it in on board memory
2724 6010       +1  6351         jz  oboard1     ;yes
2726 E0         +1  6352         movx    a,@dptr
2727 F508       +1  6353         mov 8,a
2729 A3         +1  6354         inc dptr
272A E0         +1  6355         movx    a,@dptr
272B F509       +1  6356         mov 9,a
272D A3         +1  6357         inc dptr
272E E0         +1  6358         movx    a,@dptr
272F F50A       +1  6359         mov 10,a
2731 A3         +1  6360         inc dptr
2732 E0         +1  6361         movx    a,@dptr
2733 F50B       +1  6362         mov 11,a
2735 22         +1  6363         ret
2736            +1  6364     oboard1:
2736 A882       +1  6365         mov r0,dpl
2738 8608       +1  6366         mov 8,@r0
273A 08         +1  6367         inc r0
273B 8609       +1  6368         mov 9,@r0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   102

273D 08         +1  6369         inc r0
273E 860A       +1  6370         mov 10,@r0
2740 08         +1  6371         inc r0
2741 860B       +1  6372         mov 11,@r0
2743 22         +1  6373         ret
                +1  6374     ;   Long division routines for 8051
                +1  6375     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6376     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6377     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6378     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6379     ;   r1 must be saved by the caller.
                +1  6380     ;   This is long unsigned division.
                +1  6381     
                +1  6382     
                +1  6383     ;   Register usage:
                +1  6384     ;       r0 loop counter
                +1  6385     ;       xtemp (12-15) accumulates quotient
                +1  6386     ;       r5-r2 holds dividend
                +1  6387     ;       ltemp holds divisor
                +1  6388     
                +1  6389     ;************************************
                +1  6390     ;r2..r5-делимое
                +1  6391     ;ltemp..-делитель
                +1  6392     ;частное -r2..r5
                +1  6393     ;*************************************
2744            +1  6394     divide:
2744 E4         +1  6395         clr a
2745 F8         +1  6396         mov r0,a        ;initialize count
2746 F50C       +1  6397         mov xtemp,a     ;zero quotient
2748 F50D       +1  6398         mov xtemp+1,a
274A F50E       +1  6399         mov xtemp+2,a
274C F50F       +1  6400         mov xtemp+3,a
274E ED         +1  6401         mov a,r5        ;check for zero dividend
274F 4C         +1  6402         orl a,r4
2750 4B         +1  6403         orl a,r3
2751 4A         +1  6404         orl a,r2
2752 600B       +1  6405         jz  jfinis
2754 E508       +1  6406         mov a,ltemp     ;check for zero divisor
2756 4509       +1  6407         orl a,ltemp+1
2758 450A       +1  6408         orl a,ltemp+2
275A 450B       +1  6409         orl a,ltemp+3
275C 7037       +1  6410         jnz midl
275E 22         +1  6411         ret
                +1  6412     
275F 020000   F +1  6413     jfinis: jmp finis
                +1  6414     
2762            +1  6415     loops:
2762 EA         +1  6416         mov a,r2
2763 C3         +1  6417         clr c
2764 9508       +1  6418         subb    a,ltemp+0   ;is divisor greater than dividend yet
2766 4033       +1  6419         jc  yes     ;yes, go no further
2768 7013       +1  6420         jnz no
276A EB         +1  6421         mov a,r3
276B 9509       +1  6422         subb    a,ltemp+1
276D 402C       +1  6423         jc  yes
276F 700C       +1  6424         jnz no
2771 EC         +1  6425         mov a,r4
2772 950A       +1  6426         subb    a,ltemp+2
2774 4025       +1  6427         jc  yes
2776 7005       +1  6428         jnz no
2778 ED         +1  6429         mov a,r5
2779 950B       +1  6430         subb    a,ltemp+3
277B 401E       +1  6431         jc  yes
277D            +1  6432     no:
277D E50B       +1  6433         mov a,ltemp+3   ;shift divisor up one bit
277F 250B       +1  6434         add a,ltemp+3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   103

2781 F50B       +1  6435         mov ltemp+3,a
2783 E50A       +1  6436         mov a,ltemp+2
2785 350A       +1  6437         addc    a,ltemp+2
2787 F50A       +1  6438         mov ltemp+2,a
2789 E509       +1  6439         mov a,ltemp+1
278B 3509       +1  6440         addc    a,ltemp+1
278D F509       +1  6441         mov ltemp+1,a
278F E508       +1  6442         mov a,ltemp+0
2791 3508       +1  6443         addc    a,ltemp+0
2793 F508       +1  6444         mov ltemp+0,a
2795            +1  6445     midl:
2795 08         +1  6446         inc r0      ;increment count
2796 E508       +1  6447         mov a,ltemp+0   ;check for safe to shift some more
2798 30E7C7     +1  6448         jnb acc.7,loops  ;loop if top bit clear
279B            +1  6449     yes:
279B E508       +1  6450         mov a,ltemp+0
279D C3         +1  6451         clr c
279E 9A         +1  6452         subb    a,r2        ;can we subtract now?
279F 401A       +1  6453         jc  dosub       ;yes, go and do it
27A1 7015       +1  6454         jnz nosub
27A3 E509       +1  6455         mov a,ltemp+1
27A5 9B         +1  6456         subb    a,r3
27A6 4013       +1  6457         jc  dosub
27A8 700E       +1  6458         jnz nosub
27AA E50A       +1  6459         mov a,ltemp+2
27AC 9C         +1  6460         subb    a,r4
27AD 400C       +1  6461         jc  dosub
27AF 7007       +1  6462         jnz nosub
27B1 E50B       +1  6463         mov a,ltemp+3
27B3 9D         +1  6464         subb    a,r5
27B4 4005       +1  6465         jc  dosub
27B6 6003       +1  6466         jz  dosub
27B8            +1  6467     nosub:
27B8 C3         +1  6468         clr c
27B9 8012       +1  6469         sjmp    dosh
27BB            +1  6470     dosub:
27BB C3         +1  6471         clr c       ;subtract divisor from dividend
27BC ED         +1  6472         mov a,r5
27BD 950B       +1  6473         subb    a,ltemp+3
27BF FD         +1  6474         mov r5,a
27C0 EC         +1  6475         mov a,r4
27C1 950A       +1  6476         subb    a,ltemp+2
27C3 FC         +1  6477         mov r4,a
27C4 EB         +1  6478         mov a,r3
27C5 9509       +1  6479         subb    a,ltemp+1
27C7 FB         +1  6480         mov r3,a
27C8 EA         +1  6481         mov a,r2
27C9 9508       +1  6482         subb    a,ltemp+0
27CB FA         +1  6483         mov r2,a
27CC D3         +1  6484         setb    c       ;now set bit for quotient
27CD            +1  6485     dosh:
27CD E50F       +1  6486         mov a,xtemp+3
27CF 33         +1  6487         rlc a
27D0 F50F       +1  6488         mov xtemp+3,a
27D2 E50E       +1  6489         mov a,xtemp+2
27D4 33         +1  6490         rlc a
27D5 F50E       +1  6491         mov xtemp+2,a
27D7 E50D       +1  6492         mov a,xtemp+1
27D9 33         +1  6493         rlc a
27DA F50D       +1  6494         mov xtemp+1,a
27DC E50C       +1  6495         mov a,xtemp+0
27DE 33         +1  6496         rlc a
27DF F50C       +1  6497         mov xtemp+0,a
27E1 E508       +1  6498         mov a,ltemp+0       ;shift divisor down
27E3 C3         +1  6499         clr c
27E4 13         +1  6500         rrc a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   104

27E5 F508       +1  6501         mov ltemp+0,a
27E7 E509       +1  6502         mov a,ltemp+1
27E9 13         +1  6503         rrc a
27EA F509       +1  6504         mov ltemp+1,a
27EC E50A       +1  6505         mov a,ltemp+2
27EE 13         +1  6506         rrc a
27EF F50A       +1  6507         mov ltemp+2,a
27F1 E50B       +1  6508         mov a,ltemp+3
27F3 13         +1  6509         rrc a
27F4 F50B       +1  6510         mov ltemp+3,a
                +1  6511     
27F6 D8A3       +1  6512         djnz    r0,yes      ;and continue with the rest
                +1  6513     
27F8            +1  6514     finis:
27F8 8D0B       +1  6515         mov ltemp+3,r5
27FA 8C0A       +1  6516         mov ltemp+2,r4
27FC 8B09       +1  6517         mov ltemp+1,r3
27FE 8A08       +1  6518         mov ltemp+0,r2
2800 AD0F       +1  6519         mov r5,xtemp+3
2802 AC0E       +1  6520         mov r4,xtemp+2
2804 AB0D       +1  6521         mov r3,xtemp+1
2806 AA0C       +1  6522         mov r2,xtemp+0
2808 22         +1  6523         ret         ;and return with the satisfaction of a job well done
                +1  6524     
                +1  6525     
                +1  6526     ;   Long multiplication
                +1  6527     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  6528     ;   other in ltemp. It really doesn't matter which one is where.
                +1  6529     
                +1  6530     ;**********************************
                +1  6531     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  6532     ;ст  мл
                +1  6533     ;**********************************
2809            +1  6534     llmul:
2809            +1  6535     almul:
2809            +1  6536     lmul:
2809 ED         +1  6537         mov a,r5        ;low order byte
280A 850BF0     +1  6538         mov b,ltemp+3       ;times low order byte
280D A4         +1  6539         mul ab
280E F50F       +1  6540         mov xtemp+3,a       ;store low
2810 85F00E     +1  6541         mov xtemp+2,b   ;and high
2813 ED         +1  6542         mov a,r5        ;low order
2814 850AF0     +1  6543         mov b,ltemp+2   ;times next
2817 A4         +1  6544         mul ab
2818 250E       +1  6545         add a,xtemp+2   ;add in
281A F50E       +1  6546         mov xtemp+2,a
281C E5F0       +1  6547         mov a,b
281E 3400       +1  6548         addc    a,#0
2820 F50D       +1  6549         mov xtemp+1,a
2822 ED         +1  6550         mov a,r5
2823 8509F0     +1  6551         mov b,ltemp+1
2826 A4         +1  6552         mul ab
2827 250D       +1  6553         add a,xtemp+1
2829 F50D       +1  6554         mov xtemp+1,a
282B E5F0       +1  6555         mov a,b
282D 3400       +1  6556         addc    a,#0
282F F50C       +1  6557         mov xtemp+0,a
2831 ED         +1  6558         mov a,r5
2832 8508F0     +1  6559         mov b,ltemp+0
2835 A4         +1  6560         mul ab
2836 250C       +1  6561         add a,xtemp+0
2838 F50C       +1  6562         mov xtemp+0,a
283A EC         +1  6563         mov a,r4
283B 850BF0     +1  6564         mov b,ltemp+3
283E A4         +1  6565         mul ab
283F 250E       +1  6566         add a,xtemp+2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   105

2841 F50E       +1  6567         mov xtemp+2,a
2843 E5F0       +1  6568         mov a,b
2845 350D       +1  6569         addc    a,xtemp+1
2847 F50D       +1  6570         mov xtemp+1,a
2849 E50C       +1  6571         mov a,xtemp+0
284B 3400       +1  6572         addc    a,#0
284D F50C       +1  6573         mov xtemp+0,a
284F EC         +1  6574         mov a,r4
2850 850AF0     +1  6575         mov b,ltemp+2
2853 A4         +1  6576         mul ab
2854 250D       +1  6577         add a,xtemp+1
2856 F50D       +1  6578         mov xtemp+1,a
2858 E5F0       +1  6579         mov a,b
285A 350C       +1  6580         addc    a,xtemp+0
285C F50C       +1  6581         mov xtemp+0,a
285E EC         +1  6582         mov a,r4
285F 8509F0     +1  6583         mov b,ltemp+1
2862 A4         +1  6584         mul ab
2863 250C       +1  6585         add a,xtemp+0
2865 F50C       +1  6586         mov xtemp+0,a
                +1  6587     
2867 EB         +1  6588         mov a,r3
2868 850BF0     +1  6589         mov b,ltemp+3
286B A4         +1  6590         mul ab
286C 250D       +1  6591         add a,xtemp+1
286E F50D       +1  6592         mov xtemp+1,a
2870 E5F0       +1  6593         mov a,b
2872 350C       +1  6594         addc    a,xtemp+0
2874 F50C       +1  6595         mov xtemp+0,a
2876 EB         +1  6596         mov a,r3
2877 850AF0     +1  6597         mov b,ltemp+2
287A A4         +1  6598         mul ab
287B 250C       +1  6599         add a,xtemp+0
287D F50C       +1  6600         mov xtemp+0,a
                +1  6601     
287F EA         +1  6602         mov a,r2
2880 850BF0     +1  6603         mov b,ltemp+3
2883 A4         +1  6604         mul ab
2884 250C       +1  6605         add a,xtemp+0
2886 FA         +1  6606         mov r2,a
2887 AB0D       +1  6607         mov r3,xtemp+1
2889 AC0E       +1  6608         mov r4,xtemp+2
288B AD0F       +1  6609         mov r5,xtemp+3
                +1  6610     
288D 22         +1  6611         ret         ;all done
                +1  6612     ;******************************
                +1  6613     ;из содержимого  r2-r5  вычесть
                +1  6614     ;содержимое          ltemp..ltemp+3
                +1  6615     ;******************************
288E            +1  6616     llsub:
288E            +1  6617      lsub:
288E ED         +1  6618         mov a,r5
288F C3         +1  6619         clr c
2890 950B       +1  6620         subb    a,11
2892 FD         +1  6621         mov r5,a
2893 EC         +1  6622         mov a,r4
2894 950A       +1  6623         subb    a,10
2896 FC         +1  6624         mov r4,a
2897 EB         +1  6625         mov a,r3
2898 9509       +1  6626         subb    a,9
289A FB         +1  6627         mov r3,a
289B EA         +1  6628         mov a,r2
289C 9508       +1  6629         subb    a,8
289E FA         +1  6630         mov r2,a
289F 22         +1  6631         ret
                +1  6632     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   106

                +1  6633     ;***********************************************
                +1  6634     ;                                                      ст мл
                +1  6635     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6636     ;  r0- адрес младшего байта !!!
                +1  6637     ;результат- r2..r5
                +1  6638     ;***********************************************
                +1  6639     
28A0 C3         +1  6640     ladd:    clr       c
28A1 ED         +1  6641          mov       a,r5
28A2 26         +1  6642          add       a,@r0
28A3 FD         +1  6643          mov       r5,a
28A4 18         +1  6644          dec       r0
28A5 EC         +1  6645          mov       a,r4
28A6 36         +1  6646          addc      a,@r0
28A7 FC         +1  6647          mov       r4,a
28A8 18         +1  6648          dec       r0
28A9 EB         +1  6649          mov       a,r3
28AA 36         +1  6650          addc      a,@r0
28AB FB         +1  6651          mov       r3,a
28AC 18         +1  6652          dec       r0
28AD EA         +1  6653          mov       a,r2
28AE 36         +1  6654          addc      a,@r0
28AF FA         +1  6655          mov       r2,a
28B0 22         +1  6656          ret
                +1  6657     ;***********************************************
                +1  6658     ;                                                      ст мл
                +1  6659     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6660     ;  r0- адрес младшего байта !!!
                +1  6661     ;результат- r2..r5
                +1  6662     ;***********************************************
                +1  6663     
28B1 C3         +1  6664     laddx:    clr       c
28B2 E2         +1  6665                                             movx            a,@r0
28B3 2D         +1  6666                                             add                     a,r5
28B4 FD         +1  6667               mov     r5,a
28B5 18         +1  6668                             dec     r0
28B6 E2         +1  6669                             movx    a,@r0
28B7 3C         +1  6670                             addc    a,r4
28B8 FC         +1  6671                             mov     r4,a
28B9 18         +1  6672                             dec     r0
28BA E2         +1  6673                             movx    a,@r0
28BB 3B         +1  6674                             addc    a,r3
28BC FB         +1  6675                             mov     r3,a
28BD 18         +1  6676                             dec     r0
28BE E2         +1  6677                             movx    a,@r0
28BF 3A         +1  6678                             addc    a,r2
28C0 FA         +1  6679                             mov       r2,a
28C1 22         +1  6680                             ret
                +1  6681     
                +1  6682     ;***********************************************
                +1  6683     ;                                                      ст мл
                +1  6684     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6685     ;  dptr- адрес младшего байта !!!
                +1  6686     ;результат- r2..r5
                +1  6687     ;***********************************************
                +1  6688     
28C2 C3         +1  6689     addx:    clr       c
28C3 E0         +1  6690                                             movx            a,@dptr
28C4 2D         +1  6691                                             add                     a,r5
28C5 FD         +1  6692               mov     r5,a
28C6 120000   F +1  6693                             call            dedptr;dec     dptr
28C9 E0         +1  6694                             movx    a,@dptr
28CA 3C         +1  6695                             addc    a,r4
28CB FC         +1  6696                             mov     r4,a
28CC 120000   F +1  6697                             call            dedptr;dec     dptr
28CF E0         +1  6698                             movx    a,@dptr
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   107

28D0 3B         +1  6699                             addc    a,r3
28D1 FB         +1  6700                             mov     r3,a
28D2 120000   F +1  6701                             call            dedptr;dec     dptr
28D5 E0         +1  6702                             movx    a,@dptr
28D6 3A         +1  6703                             addc    a,r2
28D7 FA         +1  6704                             mov       r2,a
28D8 22         +1  6705                             ret
                +1  6706     
28D9 C0D0       +1  6707     dedptr:         push    psw
28DB C3         +1  6708                                             clr             c
28DC E582       +1  6709                                             mov             a,dpl
28DE 9401       +1  6710                                             subb    a,#1
28E0 F582       +1  6711                                             mov             dpl,a
28E2 E583       +1  6712                                             mov             a,dph
28E4 9400       +1  6713                                             subb    a,#0
28E6 F583       +1  6714                                             mov             dph,a
28E8 D0D0       +1  6715                                             pop             psw
28EA 22         +1  6716                                             ret
                    6717     
                    6718     ;$include (d:\amp\floatm.asm)
                +1  6719     ;       Copyright (C) 1988 HI-TECH Software
                +1  6720     
                +1  6721     ;       Single Precision Floating point arithmetic routines for 8051
                +1  6722     
                +1  6723     ;       The format of floating point numbers is as follows:
                +1  6724     
                +1  6725     ;       -----------------
                +1  6726     ;       *     sign      *  1 bit
                +1  6727     ;       -----------------
                +1  6728     ;       *   exponent    *  8 bits
                +1  6729     ;       -----------------
                +1  6730     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  6731     ;       -----------------
                +1  6732     
                +1  6733     
                +1  6734     ;       As usual for the 8051 the memory layout has the most significant
                +1  6735     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  6736     ;       lowest address.
                +1  6737     
                +1  6738     ;       Calling conventions:
                +1  6739     
                +1  6740     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  6741     ;
                +1  6742     ;       Return value is in r2-r5
                +1  6743     
                +1  6744     ;       Naming conventions: A routine name is constructed by
                +1  6745     
                +1  6746     ;             ASOP
                +1  6747     
                +1  6748     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  6749     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  6750     ;       Conversion routines are named
                +1  6751     
                +1  6752     ;               AStof
                +1  6753     
                +1  6754     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  6755     ;       S is the integer size, one of b (byte), w (word) or l (long).
                +1  6756     ;       Conversion from float to integer is ftol.
                +1  6757     
                +1  6758     ;               .ORG  5000h
                +1  6759     ;               .CODE
                +1  6760     ;       seg     c_text
                +1  6761     
                +1  6762     ;;      $MOD812
----            +1  6763             CSEG
                +1  6764             ;ORG 1000h
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   108

                +1  6765     
                +1  6766                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  6767             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  6768     
                +1  6769     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  6770     ;       macros
                +1  6771     
                +1  6772     saveregs        macro
                +1  6773             push    7
                +1  6774             push    6
                +1  6775             push    1
                +1  6776             push    0
                +1  6777             endm
                +1  6778     
                +1  6779     restregs        macro
                +1  6780             pop     0
                +1  6781             pop     1
                +1  6782             pop     6
                +1  6783             pop     7
                +1  6784             endm
                +1  6785     
                +1  6786     ;addr   
                +1  6787     dan     macro   pad
                +1  6788             mov     a,r5
                +1  6789             add     a,pad+3
                +1  6790             mov     pad+3,a
                +1  6791             mov     a,pad+2
                +1  6792             addc    a,r4
                +1  6793             mov     pad+2,a
                +1  6794             mov     a,pad+1
                +1  6795             addc    a,r3
                +1  6796             mov     pad+1,a
                +1  6797             mov     a,pad+0
                +1  6798             addc    a,r2
                +1  6799             mov     pad,a
                +1  6800             endm
                +1  6801     
                +1  6802     addl    macro  addr
                +1  6803             mov     a,r5
                +1  6804             add     a,addr+3
                +1  6805             mov     r5,a
                +1  6806             mov     a,addr+2
                +1  6807             addc    a,r4
                +1  6808             mov     r4,a
                +1  6809             mov     a,addr+1
                +1  6810             addc    a,r3
                +1  6811             mov     r3,a
                +1  6812             mov     a,addr+0
                +1  6813             addc    a,r2
                +1  6814             mov     r2,a
                +1  6815             endm
                +1  6816     
                +1  6817     
                +1  6818     add1    macro
                +1  6819             mov     a,r5
                +1  6820             add     a,#1
                +1  6821             mov     r5,a
                +1  6822             clr     a
                +1  6823             addc    a,r4
                +1  6824             mov     r4,a
                +1  6825             clr     a
                +1  6826             addc    a,r3
                +1  6827             mov     r3,a
                +1  6828             clr     a
                +1  6829             addc    a,r2
                +1  6830             mov     r2,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   109

                +1  6831             endm
                +1  6832     
                +1  6833     shfdn   macro  addr
                +1  6834             clr     c
                +1  6835             mov     a,addr
                +1  6836             rrc     a
                +1  6837             mov     addr,a
                +1  6838             mov     a,addr+1
                +1  6839             rrc     a
                +1  6840             mov     addr+1,a
                +1  6841             mov     a,addr+2
                +1  6842             rrc     a
                +1  6843             mov     addr+2,a
                +1  6844             mov     a,addr+3
                +1  6845             rrc     a
                +1  6846             mov     addr+3,a
                +1  6847             endm
                +1  6848     
                +1  6849     shfup   macro  addr
                +1  6850             clr     c
                +1  6851             mov     a,addr+3
                +1  6852             rlc     a
                +1  6853             mov     addr+3,a
                +1  6854             mov     a,addr+2
                +1  6855             rlc     a
                +1  6856             mov     addr+2,a
                +1  6857             mov     a,addr+1
                +1  6858             rlc     a
                +1  6859             mov     addr+1,a
                +1  6860             mov     a,addr
                +1  6861             rlc     a
                +1  6862             mov     addr,a
                +1  6863             endm
                +1  6864     
                +1  6865     rshift  macro
                +1  6866             clr     c
                +1  6867             mov     a,r2
                +1  6868             rrc     a
                +1  6869             mov     r2,a
                +1  6870             mov     a,r3
                +1  6871             rrc     a
                +1  6872             mov     r3,a
                +1  6873             mov     a,r4
                +1  6874             rrc     a
                +1  6875             mov     r4,a
                +1  6876             mov     a,r5
                +1  6877             rrc     a
                +1  6878             mov     r5,a
                +1  6879             endm
                +1  6880     rshift1 macro
                +1  6881             setb    c
                +1  6882             mov     a,r2
                +1  6883             rrc     a
                +1  6884             mov     r2,a
                +1  6885             mov     a,r3
                +1  6886             rrc     a
                +1  6887             mov     r3,a
                +1  6888             mov     a,r4
                +1  6889             rrc     a
                +1  6890             mov     r4,a
                +1  6891             mov     a,r5
                +1  6892             rrc     a
                +1  6893             mov     r5,a
                +1  6894             endm
                +1  6895     
                +1  6896     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   110

                +1  6897     lshift  macro
                +1  6898             mov     a,r5
                +1  6899             rlc     a
                +1  6900             mov     r5,a
                +1  6901             mov     a,r4
                +1  6902             rlc     a
                +1  6903             mov     r4,a
                +1  6904             mov     a,r3
                +1  6905             rlc     a
                +1  6906             mov     r3,a
                +1  6907             mov     a,r2
                +1  6908             rlc     a
                +1  6909             mov     r2,a
                +1  6910             endm
                +1  6911     
                +1  6912     neg1    macro
                +1  6913             clr     c
                +1  6914             clr     a
                +1  6915             subb    a,r5
                +1  6916             mov     r5,a
                +1  6917             clr     a
                +1  6918             subb    a,r4
                +1  6919             mov     r4,a
                +1  6920             clr     a
                +1  6921             subb    a,r3
                +1  6922             mov     r3,a
                +1  6923             clr     a
                +1  6924             subb    a,r2
                +1  6925             mov     r2,a
                +1  6926             endm
                +1  6927     
                +1  6928     negm    macro  addr
                +1  6929             clr     c
                +1  6930             clr     a
                +1  6931             subb    a,addr+3
                +1  6932             mov     addr+3,a
                +1  6933             clr     a
                +1  6934             subb    a,addr+2
                +1  6935             mov     addr+2,a
                +1  6936             clr     a
                +1  6937             subb    a,addr+1
                +1  6938             mov     addr+1,a
                +1  6939             clr     a
                +1  6940             subb    a,addr
                +1  6941             mov     addr,a
                +1  6942             endm
                +1  6943     
                +1  6944     copytor macro  addr
                +1  6945             mov     r2,addr
                +1  6946             mov     r3,addr+1
                +1  6947             mov     r4,addr+2
                +1  6948             mov     r5,addr+3
                +1  6949             endm
                +1  6950     
                +1  6951     
                +1  6952     copyrto macro  addr
                +1  6953             mov     addr,r2
                +1  6954             mov     addr+1,r3
                +1  6955             mov     addr+2,r4
                +1  6956             mov     addr+3,r5
                +1  6957             endm
                +1  6958     
                +1  6959     
                +1  6960     ;       Internal representation: in this set of routines a floating number
                +1  6961     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  6962     
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   111

                +1  6963     ;       Stack offset values
                +1  6964     ;ltemp   equ     28h
                +1  6965     
  0006          +1  6966     cntr    equ     6               ;r6 is the counter
  0007          +1  6967     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  6968     exp1    equ     0               ;exponent 1 in r0
  0002          +1  6969     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  6970     exp2    equ     1               ;exponent 1 in r1
  0008          +1  6971     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  6972     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  6973     
                +1  6974     
                +1  6975     
                +1  6976     
                +1  6977     
                +1  6978     ;DECSIZE EQU     10
                +1  6979     ;NUMSIZE EQU     4
                +1  6980     ;RR4     EQU     4
                +1  6981     ;RR5     EQU     5
                +1  6982     
                +1  6983     ;       unpack1 - unpacks the left operand
                +1  6984     
009E            +1  6985     unpack1:
009E EA         +1  6986             mov     a,r2            ;get sign
009F 5480       +1  6987             anl     a,#80h
00A1 530740     +1  6988             anl     sign,#40h       ;clear other bits
00A4 4207       +1  6989             orl     sign,a          ;store sign
00A6 EB         +1  6990             mov     a,r3            ;get lsb of exponent
00A7 33         +1  6991             rlc     a               ;rotate into carry
00A8 EA         +1  6992             mov     a,r2            ;get rest of exponent
00A9 33         +1  6993             rlc     a               ;and make it 8 bits
00AA F8         +1  6994             mov     r0,a            ;store it
00AB 6006       +1  6995             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  6996             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  6997             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  6998             ret
00B3            +1  6999     zer1:
00B3 E4         +1  7000             clr     a
00B4 FA         +1  7001             mov     r2,a
00B5 FB         +1  7002             mov     r3,a
00B6 FC         +1  7003             mov     r4,a
00B7 FD         +1  7004             mov     r5,a            ;zero mantissa
00B8 F8         +1  7005             mov     r0,a            ;zero exponent
00B9 22         +1  7006             ret
                +1  7007     
                +1  7008     ;       unpack2 - unpacks right operand
                +1  7009     
00BA            +1  7010     unpack2:
00BA E508       +1  7011             mov     a,ltemp         ;get sign
00BC 13         +1  7012             rrc     a               ;shift down
00BD 5440       +1  7013             anl     a,#40h          ;mask out sign
00BF 530780     +1  7014             anl     sign,#80h       ;clear old bit
00C2 4207       +1  7015             orl     sign,a
00C4 E509       +1  7016             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  7017             rlc     a               ;rotate into carry
00C7 E508       +1  7018             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  7019             rlc     a               ;and make it 8 bits
00CA F9         +1  7020             mov     r1,a            ;store it
00CB 6007       +1  7021             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  7022             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  7023             mov     mant2,#0        ;clear upper byte
00D3 22         +1  7024             ret
00D4            +1  7025     zer2:
00D4 E4         +1  7026             clr     a
00D5 F508       +1  7027             mov     ltemp,a
00D7 F509       +1  7028             mov     ltemp+1,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   112

00D9 F50A       +1  7029             mov     ltemp+2,a
00DB F50B       +1  7030             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  7031             ret
                +1  7032     
                +1  7033     ;       pack1 - put operand 1 back into float format
                +1  7034     
00DE            +1  7035     pack1:
00DE E8         +1  7036             mov     a,r0            ;get exponent
00DF C3         +1  7037             clr     c
00E0 13         +1  7038             rrc     a               ;shift down 1 bit
00E1 530780     +1  7039             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  7040             orl     a,r7            ;or in sign bit
00E5 FA         +1  7041             mov     r2,a            ;store
00E6 E8         +1  7042             mov     a,r0            ;get other bit
00E7 03         +1  7043             rr      a               ;rotate into hi bit
00E8 5480       +1  7044             anl     a,#80h          ;mask
00EA 53037F     +1  7045             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  7046             orl     mant1+1,a       ;put in
00EF 22         +1  7047             ret
                +1  7048     
                +1  7049     
                +1  7050     ;       norm1 - normalize the unpacked value in 1
                +1  7051     
00F0            +1  7052     norm1:
00F0 E8         +1  7053             mov     a,r0            ;get exponent
00F1 60C0       +1  7054             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  7055             mov     a,r2            ;get hi byte
00F4 6023       +1  7056             jz      norup           ;zero, so shift up if anything
00F6            +1  7057     nordn:
00F6 EA         +1  7058             mov     a,r2            ;get hi byte
00F7 B4010D     +1  7059             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  7060+3           add1                    ;add in a rounding bit
00FA ED         +1  7061+1           mov     a,r5
00FB 2401       +1  7062+1           add     a,#1
00FD FD         +1  7063+1           mov     r5,a
00FE E4         +1  7064+1           clr     a
00FF 3C         +1  7065+1           addc    a,r4
0100 FC         +1  7066+1           mov     r4,a
0101 E4         +1  7067+1           clr     a
0102 3B         +1  7068+1           addc    a,r3
0103 FB         +1  7069+1           mov     r3,a
0104 E4         +1  7070+1           clr     a
0105 3A         +1  7071+1           addc    a,r2
0106 FA         +1  7072+1           mov     r2,a
0107            +1  7073     nordn1:
                +1  7074+3           rshift                  ;shift down 1 bit
0107 C3         +1  7075+1           clr     c
0108 EA         +1  7076+1           mov     a,r2
0109 13         +1  7077+1           rrc     a
010A FA         +1  7078+1           mov     r2,a
010B EB         +1  7079+1           mov     a,r3
010C 13         +1  7080+1           rrc     a
010D FB         +1  7081+1           mov     r3,a
010E EC         +1  7082+1           mov     a,r4
010F 13         +1  7083+1           rrc     a
0110 FC         +1  7084+1           mov     r4,a
0111 ED         +1  7085+1           mov     a,r5
0112 13         +1  7086+1           rrc     a
0113 FD         +1  7087+1           mov     r5,a
0114 08         +1  7088             inc     r0              ;adjust exponent
0115 EA         +1  7089             mov     a,r2            ;test high byte
0116 70DE       +1  7090             jnz     nordn           ;loop
0118 22         +1  7091             ret                     ;done
                +1  7092     
0119            +1  7093     norup:
0119 4B         +1  7094             orl     a,r3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   113

011A 4C         +1  7095             orl     a,r4
011B 4D         +1  7096             orl     a,r5            ;test for zero mantissa
011C 6095       +1  7097             jz      zer1            ;it is - make it true zero
011E            +1  7098     norup1:
011E EB         +1  7099             mov     a,r3            ;get mantissa byte
011F 20E710     +1  7100             jb      acc.7,norup2    ;jump if set
0122 C3         +1  7101             clr     c
                +1  7102+3           lshift                  ;shift mantissa up
0123 ED         +1  7103+1           mov     a,r5
0124 33         +1  7104+1           rlc     a
0125 FD         +1  7105+1           mov     r5,a
0126 EC         +1  7106+1           mov     a,r4
0127 33         +1  7107+1           rlc     a
0128 FC         +1  7108+1           mov     r4,a
0129 EB         +1  7109+1           mov     a,r3
012A 33         +1  7110+1           rlc     a
012B FB         +1  7111+1           mov     r3,a
012C EA         +1  7112+1           mov     a,r2
012D 33         +1  7113+1           rlc     a
012E FA         +1  7114+1           mov     r2,a
012F 18         +1  7115             dec     r0              ;adjust exponent
0130 80EC       +1  7116             jmp     norup1
0132            +1  7117     norup2:
0132 22         +1  7118             ret                     ;finito
                +1  7119     
                +1  7120     
                +1  7121     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7122     ;       exponents are equal. This requires the smaller number to have
                +1  7123     ;       its exponent incremented and its mantissa shifted right.
                +1  7124     
0133            +1  7125     denorm:
0133 E8         +1  7126             mov     a,r0
0134 C3         +1  7127             clr     c
0135 99         +1  7128             subb    a,r1            ;compare exponents
0136 5029       +1  7129             jnc     up2a            ;shift operand 2
0138            +1  7130     up1:
0138 08         +1  7131             inc     r0              ;increment exponent
                +1  7132+3           rshift                  ;shift mantissa down
0139 C3         +1  7133+1           clr     c
013A EA         +1  7134+1           mov     a,r2
013B 13         +1  7135+1           rrc     a
013C FA         +1  7136+1           mov     r2,a
013D EB         +1  7137+1           mov     a,r3
013E 13         +1  7138+1           rrc     a
013F FB         +1  7139+1           mov     r3,a
0140 EC         +1  7140+1           mov     a,r4
0141 13         +1  7141+1           rrc     a
0142 FC         +1  7142+1           mov     r4,a
0143 ED         +1  7143+1           mov     a,r5
0144 13         +1  7144+1           rrc     a
0145 FD         +1  7145+1           mov     r5,a
0146 E8         +1  7146             mov     a,r0
0147 B501EE     +1  7147             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7148             ret
                +1  7149     
014B            +1  7150     up2:
014B 09         +1  7151             inc     r1              ;increment exponent 2
                +1  7152+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7153+1           clr     c
014D E508       +1  7154+1           mov     a,mant2
014F 13         +1  7155+1           rrc     a
0150 F508       +1  7156+1           mov     mant2,a
0152 E509       +1  7157+1           mov     a,mant2+1
0154 13         +1  7158+1           rrc     a
0155 F509       +1  7159+1           mov     mant2+1,a
0157 E50A       +1  7160+1           mov     a,mant2+2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   114

0159 13         +1  7161+1           rrc     a
015A F50A       +1  7162+1           mov     mant2+2,a
015C E50B       +1  7163+1           mov     a,mant2+3
015E 13         +1  7164+1           rrc     a
015F F50B       +1  7165+1           mov     mant2+3,a
0161            +1  7166     up2a:
0161 E8         +1  7167             mov     a,r0            ;compare exponents
0162 B501E6     +1  7168             cjne    a,exp2,up2
0165 22         +1  7169             ret                     ;all done
                +1  7170     ;------------------------------------------------------------------
                +1  7171     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7172     
0166            +1  7173     fladd:
                +1  7174+3           saveregs
0166 C007       +1  7175+1           push    7
0168 C006       +1  7176+1           push    6
016A C001       +1  7177+1           push    1
016C C000       +1  7178+1           push    0
016E 119E       +1  7179             call    unpack1
0170 11BA       +1  7180             call    unpack2
0172 3133       +1  7181             call    denorm
0174 E507       +1  7182             mov     a,sign
0176 30E70D     +1  7183             jnb     acc.7,ok1       ;test left sign
                +1  7184+3           neg1                    ;negate op1
0179 C3         +1  7185+1           clr     c
017A E4         +1  7186+1           clr     a
017B 9D         +1  7187+1           subb    a,r5
017C FD         +1  7188+1           mov     r5,a
017D E4         +1  7189+1           clr     a
017E 9C         +1  7190+1           subb    a,r4
017F FC         +1  7191+1           mov     r4,a
0180 E4         +1  7192+1           clr     a
0181 9B         +1  7193+1           subb    a,r3
0182 FB         +1  7194+1           mov     r3,a
0183 E4         +1  7195+1           clr     a
0184 9A         +1  7196+1           subb    a,r2
0185 FA         +1  7197+1           mov     r2,a
0186            +1  7198     ok1:
0186 E507       +1  7199             mov     a,sign
0188 30E615     +1  7200             jnb     acc.6,ok2       ;test right sign
                +1  7201+3           negm    mant2           ;negate op2
018B C3         +1  7202+1           clr     c
018C E4         +1  7203+1           clr     a
018D 950B       +1  7204+1           subb    a,mant2+3
018F F50B       +1  7205+1           mov     mant2+3,a
0191 E4         +1  7206+1           clr     a
0192 950A       +1  7207+1           subb    a,mant2+2
0194 F50A       +1  7208+1           mov     mant2+2,a
0196 E4         +1  7209+1           clr     a
0197 9509       +1  7210+1           subb    a,mant2+1
0199 F509       +1  7211+1           mov     mant2+1,a
019B E4         +1  7212+1           clr     a
019C 9508       +1  7213+1           subb    a,mant2
019E F508       +1  7214+1           mov     mant2,a
01A0            +1  7215     ok2:
                +1  7216+3           addl    mant2           ;add mantissas
01A0 ED         +1  7217+1           mov     a,r5
01A1 250B       +1  7218+1           add     a,mant2+3
01A3 FD         +1  7219+1           mov     r5,a
01A4 E50A       +1  7220+1           mov     a,mant2+2
01A6 3C         +1  7221+1           addc    a,r4
01A7 FC         +1  7222+1           mov     r4,a
01A8 E509       +1  7223+1           mov     a,mant2+1
01AA 3B         +1  7224+1           addc    a,r3
01AB FB         +1  7225+1           mov     r3,a
01AC E508       +1  7226+1           mov     a,mant2+0
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   115

01AE 3A         +1  7227+1           addc    a,r2
01AF FA         +1  7228+1           mov     r2,a
01B0 E4         +1  7229             clr     a
01B1 FF         +1  7230             mov     r7,a            ;clear sign
01B2 EA         +1  7231             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7232             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7233             mov     r7,a            ;store sign
                +1  7234+3           neg1                    ;negate mantissa
01B7 C3         +1  7235+1           clr     c
01B8 E4         +1  7236+1           clr     a
01B9 9D         +1  7237+1           subb    a,r5
01BA FD         +1  7238+1           mov     r5,a
01BB E4         +1  7239+1           clr     a
01BC 9C         +1  7240+1           subb    a,r4
01BD FC         +1  7241+1           mov     r4,a
01BE E4         +1  7242+1           clr     a
01BF 9B         +1  7243+1           subb    a,r3
01C0 FB         +1  7244+1           mov     r3,a
01C1 E4         +1  7245+1           clr     a
01C2 9A         +1  7246+1           subb    a,r2
01C3 FA         +1  7247+1           mov     r2,a
01C4            +1  7248     ok3:
01C4 11F0       +1  7249             call    norm1
01C6 11DE       +1  7250             call    pack1           ;pack normalized result
                +1  7251+3           restregs                ;and return
01C8 D000       +1  7252+1           pop     0
01CA D001       +1  7253+1           pop     1
01CC D006       +1  7254+1           pop     6
01CE D007       +1  7255+1           pop     7
01D0 22         +1  7256             ret
                +1  7257     ;-------------------------------------------------------------
                +1  7258     ;       Subtract the number ltemp from the number in r2-r5
                +1  7259     
01D1            +1  7260     flsub:
01D1 630880     +1  7261             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7262             jmp     fladd           ;and add!
                +1  7263     
                +1  7264     ;================================================================
                +1  7265     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7266     
01D6            +1  7267     flcmp:
01D6 EA         +1  7268            mov     a,r2            ;get sign of left
01D7 6508       +1  7269            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7270            jnb     acc.7,cexp      ;same, go check exponent
                +1  7271     ;ifdef SMALL_MODEL
01DC EA         +1  7272             mov     a,r2            ;get sign of left again
01DD 33         +1  7273             rlc     a
01DE 5001       +1  7274             jnc     flout
                +1  7275     ;endif
01E0 D3         +1  7276             setb    c
01E1 22         +1  7277     flout:          ret                    ;return with acc < 0
                +1  7278     
01E2            +1  7279     cexp:
01E2 C3         +1  7280            clr     c
01E3 EA         +1  7281            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7282            subb    a,ltemp
01E6 7010       +1  7283            jnz     fnd
01E8 EB         +1  7284            mov     a,r3
01E9 9509       +1  7285            subb    a,ltemp+1
01EB 700B       +1  7286            jnz     fnd
01ED EC         +1  7287            mov     a,r4
01EE 950A       +1  7288            subb    a,ltemp+2
01F0 7006       +1  7289            jnz     fnd
01F2 ED         +1  7290            mov     a,r5
01F3 950B       +1  7291            subb    a,ltemp+3
01F5 7001       +1  7292            jnz     fnd
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   116

01F7            +1  7293     cdone:
01F7 22         +1  7294            ret                     ;return with acc == 0
01F8            +1  7295     fnd:
01F8 8AF0       +1  7296           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7297          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7298            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7299                         orl         a,#1                          ;make non-zero
0201 B3         +1  7300             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7301             ret
                +1  7302     ;==============================================================
                +1  7303     
                +1  7304     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7305     ;       the result in r2-r5
                +1  7306     
0203            +1  7307     flmul:
                +1  7308+3           saveregs
0203 C007       +1  7309+1           push    7
0205 C006       +1  7310+1           push    6
0207 C001       +1  7311+1           push    1
0209 C000       +1  7312+1           push    0
020B 119E       +1  7313             call    unpack1
020D 11BA       +1  7314             call    unpack2
020F E4         +1  7315             clr     a
0210 F50C       +1  7316             mov     prod,a
0212 F50D       +1  7317             mov     prod+1,a        ;clear product
0214 F50E       +1  7318             mov     prod+2,a
0216 F50F       +1  7319             mov     prod+3,a
0218 7E07       +1  7320             mov     r6,#7           ;initialize counter
021A            +1  7321     mup1:
                +1  7322+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7323+1           clr     c
021B E508       +1  7324+1           mov     a,mant2
021D 13         +1  7325+1           rrc     a
021E F508       +1  7326+1           mov     mant2,a
0220 E509       +1  7327+1           mov     a,mant2+1
0222 13         +1  7328+1           rrc     a
0223 F509       +1  7329+1           mov     mant2+1,a
0225 E50A       +1  7330+1           mov     a,mant2+2
0227 13         +1  7331+1           rrc     a
0228 F50A       +1  7332+1           mov     mant2+2,a
022A E50B       +1  7333+1           mov     a,mant2+3
022C 13         +1  7334+1           rrc     a
022D F50B       +1  7335+1           mov     mant2+3,a
022F 5014       +1  7336             jnc     nobit           ;skip if lsb was zero
                +1  7337+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7338+1           mov     a,r5
0232 250F       +1  7339+1           add     a,prod+3
0234 F50F       +1  7340+1           mov     prod+3,a
0236 E50E       +1  7341+1           mov     a,prod+2
0238 3C         +1  7342+1           addc    a,r4
0239 F50E       +1  7343+1           mov     prod+2,a
023B E50D       +1  7344+1           mov     a,prod+1
023D 3B         +1  7345+1           addc    a,r3
023E F50D       +1  7346+1           mov     prod+1,a
0240 E50C       +1  7347+1           mov     a,prod+0
0242 3A         +1  7348+1           addc    a,r2
0243 F50C       +1  7349+1           mov     prod,a
0245            +1  7350     nobit:
                +1  7351+3           lshift                  ;shift multiplicand up
0245 ED         +1  7352+1           mov     a,r5
0246 33         +1  7353+1           rlc     a
0247 FD         +1  7354+1           mov     r5,a
0248 EC         +1  7355+1           mov     a,r4
0249 33         +1  7356+1           rlc     a
024A FC         +1  7357+1           mov     r4,a
024B EB         +1  7358+1           mov     a,r3
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   117

024C 33         +1  7359+1           rlc     a
024D FB         +1  7360+1           mov     r3,a
024E EA         +1  7361+1           mov     a,r2
024F 33         +1  7362+1           rlc     a
0250 FA         +1  7363+1           mov     r2,a
0251 DEC7       +1  7364             djnz    r6,mup1         ;loop if more
                +1  7365     
0253 7E11       +1  7366             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7367             sjmp    mup3
0257            +1  7368     mup11:
                +1  7369+3           shfdn   prod            ;shift product right
0257 C3         +1  7370+1           clr     c
0258 E50C       +1  7371+1           mov     a,prod
025A 13         +1  7372+1           rrc     a
025B F50C       +1  7373+1           mov     prod,a
025D E50D       +1  7374+1           mov     a,prod+1
025F 13         +1  7375+1           rrc     a
0260 F50D       +1  7376+1           mov     prod+1,a
0262 E50E       +1  7377+1           mov     a,prod+2
0264 13         +1  7378+1           rrc     a
0265 F50E       +1  7379+1           mov     prod+2,a
0267 E50F       +1  7380+1           mov     a,prod+3
0269 13         +1  7381+1           rrc     a
026A F50F       +1  7382+1           mov     prod+3,a
026C            +1  7383     mup3:
                +1  7384+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7385+1           clr     c
026D E508       +1  7386+1           mov     a,mant2
026F 13         +1  7387+1           rrc     a
0270 F508       +1  7388+1           mov     mant2,a
0272 E509       +1  7389+1           mov     a,mant2+1
0274 13         +1  7390+1           rrc     a
0275 F509       +1  7391+1           mov     mant2+1,a
0277 E50A       +1  7392+1           mov     a,mant2+2
0279 13         +1  7393+1           rrc     a
027A F50A       +1  7394+1           mov     mant2+2,a
027C E50B       +1  7395+1           mov     a,mant2+3
027E 13         +1  7396+1           rrc     a
027F F50B       +1  7397+1           mov     mant2+3,a
0281 5014       +1  7398             jnc     mup2            ;skip if bit not set
                +1  7399+3           dan     prod            ;add to prod
0283 ED         +1  7400+1           mov     a,r5
0284 250F       +1  7401+1           add     a,prod+3
0286 F50F       +1  7402+1           mov     prod+3,a
0288 E50E       +1  7403+1           mov     a,prod+2
028A 3C         +1  7404+1           addc    a,r4
028B F50E       +1  7405+1           mov     prod+2,a
028D E50D       +1  7406+1           mov     a,prod+1
028F 3B         +1  7407+1           addc    a,r3
0290 F50D       +1  7408+1           mov     prod+1,a
0292 E50C       +1  7409+1           mov     a,prod+0
0294 3A         +1  7410+1           addc    a,r2
0295 F50C       +1  7411+1           mov     prod,a
0297            +1  7412     mup2:
0297 DEBE       +1  7413             djnz    r6,mup11        ;loop if more
0299 E8         +1  7414             mov     a,r0            ;get exp1
029A 29         +1  7415             add     a,r1            ;add exp2
029B 247A       +1  7416             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7417             mov     r0,a            ;store
029E EF         +1  7418             mov     a,r7            ;get sign
029F 23         +1  7419             rl      a               ;rotate bit into msb
02A0 6207       +1  7420             xrl     sign,a          ;xor with other bit
                +1  7421+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7422+1           mov     r2,prod
02A4 AB0D       +1  7423+1           mov     r3,prod+1
02A6 AC0E       +1  7424+1           mov     r4,prod+2
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   118

02A8 AD0F       +1  7425+1           mov     r5,prod+3
02AA 11F0       +1  7426             call    norm1           ;normalize
02AC 11DE       +1  7427             call    pack1
                +1  7428+3           restregs
02AE D000       +1  7429+1           pop     0
02B0 D001       +1  7430+1           pop     1
02B2 D006       +1  7431+1           pop     6
02B4 D007       +1  7432+1           pop     7
02B6 22         +1  7433             ret
                +1  7434     ;-----------------------------------------------------------
                +1  7435     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  7436     
02B7            +1  7437     fldiv:
                +1  7438+3           saveregs
02B7 C007       +1  7439+1           push    7
02B9 C006       +1  7440+1           push    6
02BB C001       +1  7441+1           push    1
02BD C000       +1  7442+1           push    0
02BF 119E       +1  7443             call    unpack1
02C1 11BA       +1  7444             call    unpack2
02C3 E4         +1  7445             clr     a
02C4 F50C       +1  7446             mov     prod,a
02C6 F50D       +1  7447             mov     prod+1,a
02C8 F50E       +1  7448             mov     prod+2,a
02CA F50F       +1  7449             mov     prod+3,a
02CC E9         +1  7450             mov     a,r1            ;check for zero divisor
02CD 6067       +1  7451             jz      div9
02CF E8         +1  7452             mov     a,r0            ;check for zero dividend
02D0 6064       +1  7453             jz      div9
02D2 C3         +1  7454             clr     c
02D3 99         +1  7455             subb    a,r1            ;compute new exponent
02D4 2478       +1  7456             add     a,#127-7        ;unbias
02D6 F8         +1  7457             mov     r0,a            ;store back
02D7 EF         +1  7458             mov     a,r7            ;get sign
02D8 23         +1  7459             rl      a
02D9 6207       +1  7460             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  7461             mov     r6,#24+7        ;initialize counter
02DD            +1  7462     div1:
                +1  7463+3           shfup   prod            ;shift quotient up
02DD C3         +1  7464+1           clr     c
02DE E50F       +1  7465+1           mov     a,prod+3
02E0 33         +1  7466+1           rlc     a
02E1 F50F       +1  7467+1           mov     prod+3,a
02E3 E50E       +1  7468+1           mov     a,prod+2
02E5 33         +1  7469+1           rlc     a
02E6 F50E       +1  7470+1           mov     prod+2,a
02E8 E50D       +1  7471+1           mov     a,prod+1
02EA 33         +1  7472+1           rlc     a
02EB F50D       +1  7473+1           mov     prod+1,a
02ED E50C       +1  7474+1           mov     a,prod
02EF 33         +1  7475+1           rlc     a
02F0 F50C       +1  7476+1           mov     prod,a
02F2 C3         +1  7477             clr     c
02F3 EA         +1  7478             mov     a,r2            ;compare values
02F4 9508       +1  7479             subb    a,mant2
02F6 4028       +1  7480             jc      div2            ;skip if bigger
02F8 7013       +1  7481             jnz     div3
02FA EB         +1  7482             mov     a,r3            ;compare values
02FB 9509       +1  7483             subb    a,mant2+1
02FD 4021       +1  7484             jc      div2            ;skip if bigger
02FF 700C       +1  7485             jnz     div3
0301 EC         +1  7486             mov     a,r4            ;compare values
0302 950A       +1  7487             subb    a,mant2+2
0304 401A       +1  7488             jc      div2            ;skip if bigger
0306 7005       +1  7489             jnz     div3
0308 ED         +1  7490             mov     a,r5            ;compare values
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   119

0309 950B       +1  7491             subb    a,mant2+3
030B 4013       +1  7492             jc      div2            ;skip if bigger
030D            +1  7493     div3:
030D ED         +1  7494             mov     a,r5
030E 950B       +1  7495             subb    a,mant2+3
0310 FD         +1  7496             mov     r5,a
0311 EC         +1  7497             mov     a,r4
0312 950A       +1  7498             subb    a,mant2+2               ;do subtraction
0314 FC         +1  7499             mov     r4,a
0315 EB         +1  7500             mov     a,r3
0316 9509       +1  7501             subb    a,mant2+1               ;do subtraction
0318 FB         +1  7502             mov     r3,a
0319 EA         +1  7503             mov     a,r2
031A 9508       +1  7504             subb    a,mant2         ;do subtraction
031C FA         +1  7505             mov     r2,a
031D 430F01     +1  7506             orl     prod+3,#1       ;set lsb in quotient
0320            +1  7507     div2:
                +1  7508+3           lshift                  ;shift dividend up
0320 ED         +1  7509+1           mov     a,r5
0321 33         +1  7510+1           rlc     a
0322 FD         +1  7511+1           mov     r5,a
0323 EC         +1  7512+1           mov     a,r4
0324 33         +1  7513+1           rlc     a
0325 FC         +1  7514+1           mov     r4,a
0326 EB         +1  7515+1           mov     a,r3
0327 33         +1  7516+1           rlc     a
0328 FB         +1  7517+1           mov     r3,a
0329 EA         +1  7518+1           mov     a,r2
032A 33         +1  7519+1           rlc     a
032B FA         +1  7520+1           mov     r2,a
032C DEAF       +1  7521             djnz    r6,div1         ;loop if more
                +1  7522+3           copytor prod            ;copy quotient
032E AA0C       +1  7523+1           mov     r2,prod
0330 AB0D       +1  7524+1           mov     r3,prod+1
0332 AC0E       +1  7525+1           mov     r4,prod+2
0334 AD0F       +1  7526+1           mov     r5,prod+3
0336            +1  7527     div9:
0336 11F0       +1  7528             call    norm1           ;now normalize result
0338 11DE       +1  7529             call    pack1           ;pack it up
                +1  7530+3           restregs                ;restore registers
033A D000       +1  7531+1           pop     0
033C D001       +1  7532+1           pop     1
033E D006       +1  7533+1           pop     6
0340 D007       +1  7534+1           pop     7
0342 22         +1  7535             ret
                +1  7536     ;------------------------------------------------------------------
                +1  7537     
                +1  7538     ;       Float to long conversion: if the exponent is less than the
                +1  7539     ;       excess value, the result is zero. If the exponent is so large
                +1  7540     ;       that the value would be shifted out, the result is overflow.
                +1  7541     ;       Otherwise shift the mantissa up or down as required.
                +1  7542     
0343            +1  7543     ftol:
                +1  7544+3           saveregs
0343 C007       +1  7545+1           push    7
0345 C006       +1  7546+1           push    6
0347 C001       +1  7547+1           push    1
0349 C000       +1  7548+1           push    0
034B EA         +1  7549             mov     a,r2
034C B4BF09     +1  7550             cjne    a,#0bfh,ne05
034F EB         +1  7551             mov     a,r3
0350 7006       +1  7552             jnz     ne05
0352 EC         +1  7553             mov     a,r4
0353 7003       +1  7554             jnz     ne05
0355 ED         +1  7555             mov     a,r5
0356 6024       +1  7556             jz      ftol1
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   120

0358 119E       +1  7557     ne05:   call    unpack1
035A E8         +1  7558             mov     a,r0            ;get exponent
035B 2482       +1  7559             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  7560             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  7561             mov     a,r7            ;get sign
0361 30E70D     +1  7562             jnb     acc.7,ftol4     ;skip if +ve
                +1  7563+3           neg1                    ;negate it
0364 C3         +1  7564+1           clr     c
0365 E4         +1  7565+1           clr     a
0366 9D         +1  7566+1           subb    a,r5
0367 FD         +1  7567+1           mov     r5,a
0368 E4         +1  7568+1           clr     a
0369 9C         +1  7569+1           subb    a,r4
036A FC         +1  7570+1           mov     r4,a
036B E4         +1  7571+1           clr     a
036C 9B         +1  7572+1           subb    a,r3
036D FB         +1  7573+1           mov     r3,a
036E E4         +1  7574+1           clr     a
036F 9A         +1  7575+1           subb    a,r2
0370 FA         +1  7576+1           mov     r2,a
0371            +1  7577     ftol4:
0371 E8         +1  7578             mov     a,r0            ;get exponent
0372 246A       +1  7579             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  7580             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  7581             mov     r0,a            ;save it
0378 24F8       +1  7582             add     a,#-8           ;if > 8, too big
037A 500E       +1  7583             jnc     ftol3
037C            +1  7584     ftol1:
037C E4         +1  7585             clr     a
037D FA         +1  7586             mov     r2,a
037E FB         +1  7587             mov     r3,a
037F FC         +1  7588             mov     r4,a
0380 FD         +1  7589             mov     r5,a
0381            +1  7590     ftol9:
                +1  7591+3           restregs
0381 D000       +1  7592+1           pop     0
0383 D001       +1  7593+1           pop     1
0385 D006       +1  7594+1           pop     6
0387 D007       +1  7595+1           pop     7
0389 22         +1  7596             ret
038A            +1  7597     ftol3:
038A E8         +1  7598             mov     a,r0
038B FE         +1  7599             mov     r6,a            ;store in counter
038C 60F3       +1  7600             jz      ftol9           ;if zero, do nothing
038E            +1  7601     ftol33:
                +1  7602+3           lshift                  ;shift up
038E ED         +1  7603+1           mov     a,r5
038F 33         +1  7604+1           rlc     a
0390 FD         +1  7605+1           mov     r5,a
0391 EC         +1  7606+1           mov     a,r4
0392 33         +1  7607+1           rlc     a
0393 FC         +1  7608+1           mov     r4,a
0394 EB         +1  7609+1           mov     a,r3
0395 33         +1  7610+1           rlc     a
0396 FB         +1  7611+1           mov     r3,a
0397 EA         +1  7612+1           mov     a,r2
0398 33         +1  7613+1           rlc     a
0399 FA         +1  7614+1           mov     r2,a
039A DEF2       +1  7615             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7616             sjmp    ftol9
039E            +1  7617     ftol2:
039E F4         +1  7618             cpl     a               ;complement
039F FE         +1  7619             mov     r6,a
03A0 6022       +1  7620             jz      ftol22
03A2            +1  7621     ftol23:
03A2 EF         +1  7622             mov     a,r7
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   121

03A3 30E70F     +1  7623             jnb     acc.7,ftol24
                +1  7624+3           rshift1
03A6 D3         +1  7625+1           setb    c
03A7 EA         +1  7626+1           mov     a,r2
03A8 13         +1  7627+1           rrc     a
03A9 FA         +1  7628+1           mov     r2,a
03AA EB         +1  7629+1           mov     a,r3
03AB 13         +1  7630+1           rrc     a
03AC FB         +1  7631+1           mov     r3,a
03AD EC         +1  7632+1           mov     a,r4
03AE 13         +1  7633+1           rrc     a
03AF FC         +1  7634+1           mov     r4,a
03B0 ED         +1  7635+1           mov     a,r5
03B1 13         +1  7636+1           rrc     a
03B2 FD         +1  7637+1           mov     r5,a
03B3 800D       +1  7638             jmp     ftol25
03B5            +1  7639+3   ftol24: rshift                  ;shift down
03B5 C3         +1  7640+1           clr     c
03B6 EA         +1  7641+1           mov     a,r2
03B7 13         +1  7642+1           rrc     a
03B8 FA         +1  7643+1           mov     r2,a
03B9 EB         +1  7644+1           mov     a,r3
03BA 13         +1  7645+1           rrc     a
03BB FB         +1  7646+1           mov     r3,a
03BC EC         +1  7647+1           mov     a,r4
03BD 13         +1  7648+1           rrc     a
03BE FC         +1  7649+1           mov     r4,a
03BF ED         +1  7650+1           mov     a,r5
03C0 13         +1  7651+1           rrc     a
03C1 FD         +1  7652+1           mov     r5,a
03C2 DEDE       +1  7653     ftol25: djnz    r6,ftol23
03C4            +1  7654     ftol22:
                +1  7655+3           add1                    ;round
03C4 ED         +1  7656+1           mov     a,r5
03C5 2401       +1  7657+1           add     a,#1
03C7 FD         +1  7658+1           mov     r5,a
03C8 E4         +1  7659+1           clr     a
03C9 3C         +1  7660+1           addc    a,r4
03CA FC         +1  7661+1           mov     r4,a
03CB E4         +1  7662+1           clr     a
03CC 3B         +1  7663+1           addc    a,r3
03CD FB         +1  7664+1           mov     r3,a
03CE E4         +1  7665+1           clr     a
03CF 3A         +1  7666+1           addc    a,r2
03D0 FA         +1  7667+1           mov     r2,a
03D1 EF         +1  7668             mov     a,r7
03D2 30E70F     +1  7669             jnb     acc.7,ftol26
                +1  7670+3           rshift1
03D5 D3         +1  7671+1           setb    c
03D6 EA         +1  7672+1           mov     a,r2
03D7 13         +1  7673+1           rrc     a
03D8 FA         +1  7674+1           mov     r2,a
03D9 EB         +1  7675+1           mov     a,r3
03DA 13         +1  7676+1           rrc     a
03DB FB         +1  7677+1           mov     r3,a
03DC EC         +1  7678+1           mov     a,r4
03DD 13         +1  7679+1           rrc     a
03DE FC         +1  7680+1           mov     r4,a
03DF ED         +1  7681+1           mov     a,r5
03E0 13         +1  7682+1           rrc     a
03E1 FD         +1  7683+1           mov     r5,a
03E2 809D       +1  7684             jmp     ftol9
03E4            +1  7685+3   ftol26: rshift
03E4 C3         +1  7686+1           clr     c
03E5 EA         +1  7687+1           mov     a,r2
03E6 13         +1  7688+1           rrc     a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   122

03E7 FA         +1  7689+1           mov     r2,a
03E8 EB         +1  7690+1           mov     a,r3
03E9 13         +1  7691+1           rrc     a
03EA FB         +1  7692+1           mov     r3,a
03EB EC         +1  7693+1           mov     a,r4
03EC 13         +1  7694+1           rrc     a
03ED FC         +1  7695+1           mov     r4,a
03EE ED         +1  7696+1           mov     a,r5
03EF 13         +1  7697+1           rrc     a
03F0 FD         +1  7698+1           mov     r5,a
03F1 808E       +1  7699             jmp     ftol9
                +1  7700     
                +1  7701     ;       arithmetic integer to floating conversions
                +1  7702     
03F3            +1  7703     abtof:
03F3 ED         +1  7704             mov     a,r5
03F4 23         +1  7705             rl      a
03F5 FC         +1  7706             mov     r4,a
03F6 9C         +1  7707             subb    a,r4
03F7 FC         +1  7708             mov     r4,a
03F8 FB         +1  7709             mov     r3,a
03F9 FA         +1  7710             mov     r2,a
03FA 8006       +1  7711             jmp     altof
03FC            +1  7712     awtof:
03FC EC         +1  7713             mov     a,r4
03FD 23         +1  7714             rl      a
03FE FB         +1  7715             mov     r3,a
03FF 9B         +1  7716             subb    a,r3
0400 FB         +1  7717             mov     r3,a
0401 FA         +1  7718             mov     r2,a
0402            +1  7719     altof:
                +1  7720+3           saveregs
0402 C007       +1  7721+1           push    7
0404 C006       +1  7722+1           push    6
0406 C001       +1  7723+1           push    1
0408 C000       +1  7724+1           push    0
040A EA         +1  7725             mov     a,r2            ;get sign
040B 5480       +1  7726             anl     a,#80h
040D FF         +1  7727             mov     r7,a            ;store it
040E 30E70D     +1  7728             jnb     acc.7,altof1    ;skip if +ve
                +1  7729+3           neg1
0411 C3         +1  7730+1           clr     c
0412 E4         +1  7731+1           clr     a
0413 9D         +1  7732+1           subb    a,r5
0414 FD         +1  7733+1           mov     r5,a
0415 E4         +1  7734+1           clr     a
0416 9C         +1  7735+1           subb    a,r4
0417 FC         +1  7736+1           mov     r4,a
0418 E4         +1  7737+1           clr     a
0419 9B         +1  7738+1           subb    a,r3
041A FB         +1  7739+1           mov     r3,a
041B E4         +1  7740+1           clr     a
041C 9A         +1  7741+1           subb    a,r2
041D FA         +1  7742+1           mov     r2,a
041E            +1  7743     altof1:
041E 7896       +1  7744             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  7745             call    norm1           ;normalize it
0422 11DE       +1  7746             call    pack1           ;and pack up
                +1  7747+3           restregs
0424 D000       +1  7748+1           pop     0
0426 D001       +1  7749+1           pop     1
0428 D006       +1  7750+1           pop     6
042A D007       +1  7751+1           pop     7
042C 22         +1  7752             ret
                +1  7753     
042D            +1  7754     lbtof:
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   123

042D 7C00       +1  7755             mov     r4,#0
042F            +1  7756     lwtof:
042F E4         +1  7757             clr     a
0430 FB         +1  7758             mov     r3,a
0431 FA         +1  7759             mov     r2,a
0432            +1  7760     lltof:
                +1  7761+3           saveregs
0432 C007       +1  7762+1           push    7
0434 C006       +1  7763+1           push    6
0436 C001       +1  7764+1           push    1
0438 C000       +1  7765+1           push    0
043A 7F00       +1  7766             mov     r7,#0           ;zero sign
043C 80E0       +1  7767             sjmp    altof1
                +1  7768     
                +1  7769     ;-------------------------------------------------------
                +1  7770     
                +1  7771     
                    7772     
                    7773     ;$include (d:\amp\wriread.asm)
                +1  7774     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  7775     cle256:          mov            IE,#00H
0441 75B601     +1  7776                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  7777                              MOV            PSCTL,#03
                +1  7778                                             
0447 7400       +1  7779                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  7780                                     movx    @dptr,a                         ;wr
044A 758F00     +1  7781                                     mov             PSCTL,#00
044D 75B600     +1  7782                                 mov         FLSCL,#00
0450 75A880     +1  7783                               mov           IE,#80H
0453 22         +1  7784                                     ret
                +1  7785     
                +1  7786     ;чтение памяти программ в r8..r11
                +1  7787     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  7788     re4byte:        mov                     dph,r2
0456 8B82       +1  7789                                             mov                     dpl,r3
0458 E4         +1  7790                                             clr                     a
0459 93         +1  7791                                             movc            a,@a+dptr
045A F508       +1  7792                                             mov                     r8,a
045C A3         +1  7793                                             inc                     dptr
045D E4         +1  7794                                             clr                     a
045E 93         +1  7795                                             movc            a,@a+dptr
045F F509       +1  7796                                             mov                     r9,a
0461 A3         +1  7797                                             inc                     dptr
0462 E4         +1  7798                                             clr                     a
0463 93         +1  7799                                             movc            a,@a+dptr
0464 F50A       +1  7800                                             mov                     r10,a
0466 A3         +1  7801                                             inc                     dptr
0467 E4         +1  7802                                             clr                     a
0468 93         +1  7803                                             movc            a,@a+dptr
0469 F50B       +1  7804                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  7805                                             ret
                +1  7806      ;чтение памяти программ в r2..r5
                +1  7807     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  7808     rebyte2:        mov                     dph,r2
046E 8B82       +1  7809                                             mov                     dpl,r3
0470 E4         +1  7810                                             clr                     a
0471 93         +1  7811                                             movc            a,@a+dptr
0472 FA         +1  7812                                             mov                     r2,a
0473 A3         +1  7813                                             inc                     dptr
0474 E4         +1  7814                                             clr                     a
0475 93         +1  7815                                             movc            a,@a+dptr
0476 FB         +1  7816                                             mov                     r3,a
0477 A3         +1  7817                                             inc                     dptr
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   124

0478 E4         +1  7818                                             clr                     a
0479 93         +1  7819                                             movc            a,@a+dptr
047A FC         +1  7820                                             mov                     r4,a
047B A3         +1  7821                                             inc                     dptr
047C E4         +1  7822                                             clr                     a
047D 93         +1  7823                                             movc            a,@a+dptr
047E FD         +1  7824                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  7825                                             ret
                +1  7826      
                +1  7827     
                +1  7828      ;r7-количество байт
                +1  7829     ;dptr-адр ячейки для записи
                +1  7830     ;r1-адр ячейки  внешнего озу
                +1  7831     
0480 75A800     +1  7832     wrpage:  mov            IE,#00H
0483 75B601     +1  7833     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  7834                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  7835                      movx           a,@r1
048A F0         +1  7836                      movx           @dptr,a                         ;wr
048B 758F00     +1  7837                      mov            PSCTL,#0
048E 75B600     +1  7838                      mov            FLSCL,#00
0491 A3         +1  7839                     inc                     dptr
0492 09         +1  7840                     inc                     r1
0493 DFEE       +1  7841                     djnz            r7,WW5
0495 75A880     +1  7842                     mov             IE,#80H
0498 22         +1  7843                     ret
                +1  7844                             
                +1  7845     
                +1  7846     
                +1  7847                                                             
                +1  7848     
                +1  7849     
                +1  7850     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7851     ;чтение памяти программ во внешнее озу
                +1  7852     ;вх-r2,r3-адр яч памяти прогр
                +1  7853     ;r1- яч внешнее озу
0499 8A83       +1  7854     copyPP:         mov                     dph,r2
049B 8B82       +1  7855                                             mov                     dpl,r3
049D 7FFF       +1  7856                                             mov                     r7,#0ffh
049F E4         +1  7857     copy1:          clr                     a
04A0 93         +1  7858                                             movc            a,@a+dptr
04A1 F3         +1  7859                                             movx                    @r1,a
04A2 A3         +1  7860                                             inc                     dptr
04A3 09         +1  7861                                             inc                     r1
04A4 DFF9       +1  7862                                             djnz            r7,copy1
04A6 22         +1  7863                                             ret
                +1  7864     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7865     
                +1  7866                                     
                +1  7867     
                +1  7868     ;r8..r11->@r0..@r0+3
                +1  7869     ;r0-адр ячейки
                +1  7870     ;сохранить в ячейке озу
04A7 E508       +1  7871     savelte:        mov     a,ltemp
04A9 F6         +1  7872                                             mov     @r0,a
04AA 08         +1  7873                                             inc     r0
04AB E509       +1  7874                                             mov     a,ltemp+1
04AD F6         +1  7875                                             mov     @r0,a
04AE 08         +1  7876                                             inc     r0
04AF E50A       +1  7877                                             mov     a,ltemp+2
04B1 F6         +1  7878                                             mov     @r0,a
04B2 08         +1  7879                                             inc     r0
04B3 E50B       +1  7880                                             mov     a,ltemp+3
04B5 F6         +1  7881                                             mov     @r0,a
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   125

04B6 22         +1  7882                                             ret
                +1  7883     
                +1  7884     ;
                +1  7885     
                +1  7886     
                +1  7887     
                +1  7888     
                +1  7889     
                +1  7890                     
                +1  7891     
                +1  7892     
                +1  7893     
                +1  7894     
                +1  7895      
                    7896     
                    7897                                                   
                    7898     END
                                                                             
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   126

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   034FH   R   SEG=MAIN   803#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1390 1447 1472 1493 1497 1500 1501 1503 1610 1615 3432 3435 3468
                                           3560 3604 3607 3671 3675 3676 3677 3680 3888 3925 3926 3928 4002 4022 4113
                                           4117 4141 4144 4486 4491 4657 4662 5406 5549 5552 5576 5579
ABRET. . . . . . .  C ADDR   2124H   R   SEG=MAIN   5335 5337#
ABTOF. . . . . . .  C ADDR   03F3H   A      7703#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 634 681 689 697 705 707 727 1082 1093 1101 1180 1559 1743 1752 1761
                                           1770 1791 2085 2107 2112 2116 2121 2124 2127 2130 2133 2304 2365 2411 2422
                                           2507 2516 2524 2533 2672 2699 2724 2729 2733 2736 2739 2742 2745 2748 3062
                                           3149 3180 3197 3215 3232 3252 4062 4068 4105 4175 4918 5978 6110 6188 6191
                                           6448 7100 7183 7200 7232 7270 7298 7560 7562 7580 7623 7669 7728
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   28C2H   R   SEG=MAIN   838 875 877 879 881 883 885 887 889 891 957 959 961 963 965 967
                                           969 971 973 976 978 980 982 984 986 988 990 992 994 1013 1015 1017 6689#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1446 1458 1462 1477 1502 1505 1506 1614 1618 3429 3433 3465 3469
                                           3557 3561 3606 3610 3679 3692 3898 3912 3914 3916 3927 3930 4012 4023 4118
                                           4145 4490 4494 4661 4665 5207 5226 5244 5307 5324 5551 5554 5578 5581 5900
                                           5932
ADRBLOK. . . . . .  C ADDR   25AAH   R   SEG=MAIN   3133 3448 3578 4408 4576 4727 5944#
AFTERK . . . . . .  C ADDR   0646H   R   SEG=MAIN   1110 1189#
AGE2 . . . . . . .  C ADDR   01FCH   R   SEG=MAIN   586# 589
AGE9 . . . . . . .  C ADDR   07E1H   R   SEG=MAIN   1394# 1397
AGEON. . . . . . .  C ADDR   020AH   R   SEG=MAIN   595# 597
ALESS0 . . . . . .  C ADDR   0916H   R   SEG=MAIN   1559 1580#
ALLSUM . . . . . .  C ADDR   02EDH   R   SEG=MAIN   747# 782 800 816
ALMUL. . . . . . .  C ADDR   2809H   R   SEG=MAIN   6535#
ALTOF. . . . . . .  C ADDR   0402H   A      1076 1174 1205 1213 1231 1247 1258 1275 1288 1356 1865 1941 2001 2039
                                           3472 3566 4026 4121 4148 4239 4317 4325 4343 4449 4461 4476 4560 4622 4638
                                           4711 4773 4788 7711 7719#
ALTOF1 . . . . . .  C ADDR   041EH   A      7728 7743# 7767
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05ACH   R   SEG=MAIN   1074 1090#
AN_T7. . . . . . .  C ADDR   107CH   R   SEG=MAIN   2749# 2816 2825
AUTOKA . . . . . .  C ADDR   0B5DH   R   SEG=MAIN   1108 1964#
AVPGO. . . . . . .  C ADDR   0773H   R   SEG=MAIN   1332 1334#
AVTDEC1. . . . . .  C ADDR   0608H   R   SEG=MAIN   1143 1152#
AWTOF. . . . . . .  C ADDR   03FCH   A      7712#
B. . . . . . . . .  D ADDR   00F0H   A      122# 5062 5426 6538 6541 6543 6547 6551 6555 6559 6564 6568 6575 6579
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   127

                                           6583 6589 6593 6597 6603 7296 7297
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 453#
BFORM. . . . . . .  C ADDR   24E7H   R   SEG=MAIN   5749 5754 5766# 5792
BIFL_KT. . . . . .  B ADDR   0021H.5 A      332# 4235 4291 4390
BIN30. . . . . . .  C ADDR   2625H   R   SEG=MAIN   6098# 6124
BIN31. . . . . . .  C ADDR   2629H   R   SEG=MAIN   6103# 6107
BIN32. . . . . . .  C ADDR   2639H   R   SEG=MAIN   6116# 6121
BIN41. . . . . . .  C ADDR   264AH   R   SEG=MAIN   6132# 6142
BINDEC . . . . . .  C ADDR   2619H   R   SEG=MAIN   1448 1504 1616 3608 3681 3929 4492 4663 5553 5580 6077#
BITAKT . . . . . .  B ADDR   0023H.2 A      351# 1697 1698 1701
BITAVP . . . . . .  B ADDR   0020H.5 A      322# 1298 1513 1687 2804 2805 2807
BITBON . . . . . .  B ADDR   0021H.2 A      329# 1723 1836 2142 2143 2149 5979
BITBUF . . . . . .  B ADDR   0021H.0 A      327#
BITEIZM. . . . . .  B ADDR   0022H.5 A      342# 1199 1705 2783 2795 3825 4981
BITIZM . . . . . .  B ADDR   0020H.4 A      321# 564 655 2113 2182 2267 2328 2730 2784 2900 2923 2997 3025 3048 3152
                                           3234 3452 3490 3515 3664 3780 3826 3873 3960 4035
BITKLB . . . . . .  B ADDR   0022H.2 A      339# 1268 1721 2118 2803 2810 4033 4305
BITMAS . . . . . .  B ADDR   0020H.1 A      318# 1024 1027 5732
BITMEM . . . . . .  B ADDR   0021H.3 A      330# 1600 2501 3028 3044 3055 3151 3233 3453 3489 3663
BITMENU. . . . . .  B ADDR   0022H.1 A      338# 1599 2327 2441 2785 3047 3497 3514 3785 3827 3872 3959 4032
BITMIG . . . . . .  B ADDR   0023H.1 A      350# 2404 2584 2679 2966 3281 3402 3991 4097 4182 5492 5507 5523 5535
                                           5598 5605 5611 5617
BITNUL . . . . . .  B ADDR   0021H.7 A      334# 1671 2827 2828 2835
BITOLL . . . . . .  B ADDR   0022H.7 A      344# 610 1520 1597
BITPAR . . . . . .  B ADDR   0022H.6 A      343# 3791 4306
BITPRD . . . . . .  B ADDR   0021H.1 A      328# 1835
BITRS. . . . . . .  B ADDR   0020H.3 A      320#
BITT2. . . . . . .  B ADDR   0022H.0 A      337# 1596 2268 2301 2842 2998
BITV19 . . . . . .  B ADDR   0022H.3 A      340# 510 514 2472 2475 2479 3769 3774 3855 3868 3965 3968 3972
BITVI11. . . . . .  B ADDR   0020H.6 A      323# 1296 1312 2136 2138 2181 2326 2782 2892 2899 3046
BITVICH. . . . . .  B ADDR   0022H.4 A      341# 1595 2137 2183 2193 2325 2333 2859 2891 2922 3045
BITZNAK. . . . . .  B ADDR   0020H.0 A      317# 635 664
BITZNB . . . . . .  B ADDR   0023H.3 A      352# 4149 5333 5336
BITZUS . . . . . .  B ADDR   0020H.7 A      324# 1346 1536 1891 1894 2228
BLOKVV . . . . . .  C ADDR   1488H   R   SEG=MAIN   3356#
BLOKVVC. . . . . .  C ADDR   1492H   R   SEG=MAIN   3359 3362#
BL_LI. . . . . . .  C ADDR   1456H   R   SEG=MAIN   3306 3314#
BMEM11 . . . . . .  B ADDR   0021H.4 A      331#
BOUT7. . . . . . .  C ADDR   1236H   R   SEG=MAIN   3006# 3008
BRET . . . . . . .  C ADDR   1F77H   R   SEG=MAIN   5002 5007 5011#
BUFDEC . . . . . .  C ADDR   0948H   R   SEG=MAIN   1621# 1626
BUFIND . . . . . .  D ADDR   0040H   A      298# 585 589 594 597 603 1393 1397 1463 1484 1505 1506 1507 1569 1574
                                           1619 1627 1629 1634 1669 1685 1691 1699 1702 1707 1722 1724 2101 2379 2397
                                           2413 2415 2418 2579 2623 2642 2717 2901 2902 2949 2953 2979 3012 3018 3029
                                           3125 3276 3328 3357 3372 3373 3376 3377 3384 3385 3389 3404 3530 3537 3611
                                           3619 3621 3626 3682 3691 3693 3897 3930 3931 3934 3983 4011 4089 4131 4495
                                           4503 4507 4666 4674 4678 4818 4850 5060 5078 5206 5225 5243 5306 5323 5334
                                           5495 5510 5555 5574 5582 5602 5623 5899 5931
BUFMEA . . . . . .  C ADDR   1C98H   R   SEG=MAIN   4497# 4502
BUFMIN . . . . . .  C ADDR   1D8BH   R   SEG=MAIN   4668# 4673
BUFON. . . . . . .  C ADDR   0CA3H   R   SEG=MAIN   2142 2149#
BUFR . . . . . . .  C ADDR   0886H   R   SEG=MAIN   1486# 1491
BUFR2. . . . . . .  C ADDR   0868H   R   SEG=MAIN   1465# 1470
BUFR3. . . . . . .  C ADDR   0861H   R   SEG=MAIN   1456 1461#
BUFR30 . . . . . .  C ADDR   0864H   R   SEG=MAIN   1459 1463#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7293# 7297
CELLBIT. . . . . .  D ADDR   0020H   A      316# 317 318 319 320 321 322 323 324
CELLBIT1 . . . . .  D ADDR   0021H   A      326# 327 328 329 330 331 332 334
CELLBIT2 . . . . .  D ADDR   0022H   A      336# 337 338 339 340 341 342 343 344
CELLBIT3 . . . . .  D ADDR   0023H   A      348# 349 350 351 352
CEXP . . . . . . .  C ADDR   01E2H   A      7270 7279#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   128

CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   2014H   R   SEG=MAIN   2836 5144#
CH1. . . . . . . .  C ADDR   2034H   R   SEG=MAIN   4967 5155#
CH10 . . . . . . .  C ADDR   2018H   R   SEG=MAIN   799 1038 3596 5145#
CH100. . . . . . .  C ADDR   202CH   R   SEG=MAIN   746 1554 5150#
CH10000. . . . . .  C ADDR   2028H   R   SEG=MAIN   5149#
CH150H . . . . . .  C ADDR   2074H   R   SEG=MAIN   5171#
CH2. . . . . . . .  C ADDR   2030H   R   SEG=MAIN   1033 5151#
CH20 . . . . . . .  C ADDR   21EBH   R   SEG=MAIN   781 1043 5457#
CH2THO . . . . . .  C ADDR   2054H   R   SEG=MAIN   2008 2046 5163#
CH320H . . . . . .  C ADDR   2070H   R   SEG=MAIN   5170# 5952
CH4. . . . . . . .  C ADDR   2020H   R   SEG=MAIN   1047 5147#
CH43 . . . . . . .  C ADDR   167CH   R   SEG=MAIN   3613# 3618
CH43_42. . . . . .  C ADDR   170EH   R   SEG=MAIN   3695# 3700
CH5. . . . . . . .  C ADDR   201CH   R   SEG=MAIN   815 5146#
CH57 . . . . . . .  C ADDR   21E7H   R   SEG=MAIN   5456#
CH954. . . . . . .  C ADDR   2024H   R   SEG=MAIN   5148#
CHAIBL . . . . . .  C ADDR   133AH   R   SEG=MAIN   3127 3129#
CHAIPR . . . . . .  C ADDR   15D1H   R   SEG=MAIN   3532 3534#
CHANMA . . . . . .  C ADDR   0E53H   R   SEG=MAIN   2411 2420#
CHANZ. . . . . . .  C ADDR   0E3AH   R   SEG=MAIN   2365 2409#
CHAVT. . . . . . .  D ADDR   0081H   A      366# 544 1099 1144 1152 2065 3781
CHBEFORE . . . . .  D ADDR   009BH   A      376# 566 743 757 776 794 810
CHBLOK . . . . . .  D ADDR   00D6H   A      401# 4406 4456 4472 4574 4628 4725 4779
CHBUF. . . . . . .  D ADDR   00CFH   A      398# 577 1821 1826 1873 1900 3487
CHCMP. . . . . . .  C ADDR   1F1AH   R   SEG=MAIN   647 1105 4944#
CHDEC. . . . . . .  C ADDR   1F2DH   R   SEG=MAIN   654 1153 1166 4959#
CHDEL. . . . . . .  D ADDR   0083H   A      367# 1922 1949 1971 2021 2059
CHDELMO. . . . . .  C ADDR   0B45H   R   SEG=MAIN   1932 1949# 1954
CHIF . . . . . . .  C ADDR   222FH   R   SEG=MAIN   5499 5501#
CHIFB. . . . . . .  C ADDR   2243H   R   SEG=MAIN   5514 5517#
CHIFB1 . . . . . .  C ADDR   2248H   R   SEG=MAIN   5516 5517 5519#
CHIND. . . . . . .  D ADDR   00ACH   A      382# 1314 1728
CHINKOR. . . . . .  D ADDR   0098H   A      365# 539 725 1091 1104 1146 1160 1165 1956
CHK. . . . . . . .  C ADDR   206CH   R   SEG=MAIN   1269 5169#
CHKL . . . . . . .  D ADDR   003DH   A      305# 646 653 2246 2274 2316 2763 3032 3655 4038
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1021 1028 1051 5731
CHMASN . . . . . .  D ADDR   003FH   A      306# 732 741 777 795 811 827 1026 1028 1029
CHMINUS. . . . . .  C ADDR   258FH   R   SEG=MAIN   3146 3177 3194 3212 3229 5914# 5975
CHTADC . . . . . .  C ADDR   1EC4H   R   SEG=MAIN   4876#
CHTHO. . . . . . .  C ADDR   204CH   R   SEG=MAIN   1238 1276 4248 4333 4351 5161#
CHTHOU . . . . . .  C ADDR   20EFH   R   SEG=MAIN   5294#
CHZAP. . . . . . .  C ADDR   2010H   R   SEG=MAIN   1810 5143#
CH_1 . . . . . . .  C ADDR   203CH   R   SEG=MAIN   569 1410 1433 1823 1828 1902 3567 5157#
CH_10. . . . . . .  C ADDR   2064H   R   SEG=MAIN   1416 1439 1878 4027 4481 4651 5167#
CH_10TH. . . . . .  C ADDR   2060H   R   SEG=MAIN   1327 5166#
CH_2 . . . . . . .  C ADDR   2040H   R   SEG=MAIN   1870 5158#
CH_200 . . . . . .  C ADDR   205CH   R   SEG=MAIN   5165#
CH_220 . . . . . .  C ADDR   2058H   R   SEG=MAIN   1289 5164#
CH_22T . . . . . .  C ADDR   212DH   R   SEG=MAIN   1366 5342#
CH_250 . . . . . .  C ADDR   2068H   R   SEG=MAIN   1194 5168#
CH_4 . . . . . . .  C ADDR   2044H   R   SEG=MAIN   3570 5159#
CH_500 . . . . . .  C ADDR   2129H   R   SEG=MAIN   1362 5341#
CH_953 . . . . . .  C ADDR   2048H   R   SEG=MAIN   5160#
CH_B . . . . . . .  C ADDR   2125H   R   SEG=MAIN   1378 5339#
CH_FL. . . . . . .  C ADDR   2131H   R   SEG=MAIN   1402 5343#
CH_MLN . . . . . .  C ADDR   2038H   R   SEG=MAIN   5156#
CIKLWR . . . . . .  C ADDR   24BDH   R   SEG=MAIN   5737#
CKCON. . . . . . .  D ADDR   008EH   A      30# 471 502
CL4. . . . . . . .  C ADDR   2086H   R   SEG=MAIN   5186# 5188
CL4N . . . . . . .  C ADDR   208CH   R   SEG=MAIN   5195# 5197
CLE20. . . . . . .  C ADDR   16FBH   R   SEG=MAIN   3685# 3687
CLE256 . . . . . .  C ADDR   043EH   A      3861 4281 4383 7775#
CLEAR. . . . . . .  C ADDR   2613H   R   SEG=MAIN   6055 6059# 6089
CLEAR4 . . . . . .  C ADDR   2083H   R   SEG=MAIN   755 1343 1345 1473 1494 1533 1535 2175 2177 2821 2823 4405 5184#
CLEARN . . . . . .  C ADDR   208BH   R   SEG=MAIN   3430 3466 3558 3889 4003 4114 4142 5193#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   129

CLMASSIX . . . . .  C ADDR   24ADH   R   SEG=MAIN   530 1341 1531 1960 2069 2173 2819 2996 5725#
CLMASV . . . . . .  C ADDR   0778H   R   SEG=MAIN   1336 1338#
CLMAX. . . . . . .  C ADDR   24B2H   R   SEG=MAIN   5727# 5730
CLR11. . . . . . .  C ADDR   2614H   R   SEG=MAIN   6061# 6063
CLRDEC . . . . . .  C ADDR   260DH   R   SEG=MAIN   6053#
CLRNUM . . . . . .  C ADDR   2611H   R   SEG=MAIN   6056# 6170
CLRVICH. . . . . .  C ADDR   11ABH   R   SEG=MAIN   2922# 2939
CNTR . . . . . . .  N NUMB   0006H   A      6966#
CO02S. . . . . . .  C ADDR   1FF8H   R   SEG=MAIN   5127# 5131
CO05S. . . . . . .  C ADDR   2005H   R   SEG=MAIN   5136# 5140
CO1S . . . . . . .  C ADDR   1FEFH   R   SEG=MAIN   5121# 5121
CO2S . . . . . . .  C ADDR   1FEBH   R   SEG=MAIN   5119# 5123
COMPA1 . . . . . .  C ADDR   07FDH   R   SEG=MAIN   1410# 1419
COMPA2 . . . . . .  C ADDR   0833H   R   SEG=MAIN   1433# 1442
COND . . . . . . .  C ADDR   2521H   R   SEG=MAIN   5821#
COPY1. . . . . . .  C ADDR   049FH   A      7857# 7862
COPYPP . . . . . .  C ADDR   0499H   A      3848 4260 4361 7854#
COPY_HL. . . . . .  D ADDR   00D7H   A      402# 3583 3706 4398 4414 4429 4567 4582 4597 4718 4733 4748
COUNT. . . . . . .  C ADDR   1FCDH   R   SEG=MAIN   5093# 5093
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   1FD4H   R   SEG=MAIN   5099# 5099
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 476
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1561 1582
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1564 1586
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 477
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1818
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1815
DCOA . . . . . . .  C ADDR   2526H   R   SEG=MAIN   5825# 5827
DCOB . . . . . . .  C ADDR   252DH   R   SEG=MAIN   5829# 5847
DCOC . . . . . . .  C ADDR   2538H   R   SEG=MAIN   5839# 5844
DCOD . . . . . . .  C ADDR   2545H   R   SEG=MAIN   5846 5849#
DDOUTF . . . . . .  C ADDR   1411H   R   SEG=MAIN   3116 3157 3262 3270# 3352
DDOUTFR. . . . . .  C ADDR   131EH   R   SEG=MAIN   3116# 3122
DEC30. . . . . . .  C ADDR   2666H   R   SEG=MAIN   6180# 6205
DEC31. . . . . . .  C ADDR   266BH   R   SEG=MAIN   6186# 6193
DEC32. . . . . . .  C ADDR   267BH   R   SEG=MAIN   6198# 6202
DECBIN . . . . . .  C ADDR   2659H   R   SEG=MAIN   3434 3470 3562 4024 4119 4146 6159#
DECSIZE. . . . . .  N NUMB   000AH   A      6034# 6054 6088 6115 6128 6131 6185
DECT2. . . . . . .  C ADDR   2684H   R   SEG=MAIN   6176 6208#
DEDPTR . . . . . .  C ADDR   28D9H   R   SEG=MAIN   6693 6697 6701 6707#
DENORM . . . . . .  C ADDR   0133H   A      7125# 7181
DGOTO7 . . . . . .  C ADDR   155EH   R   SEG=MAIN   3473# 3481
DIAP . . . . . . .  D ADDR   00AEH   A      384# 558 1331 1515 1633 2167 2199 2812 3625 3933 4288 4982 5003 5257 5272
                                           5423 5485
DIINC. . . . . . .  C ADDR   0CC2H   R   SEG=MAIN   2170 2173#
DIKDN. . . . . . .  C ADDR   21BFH   R   SEG=MAIN   5425 5445#
DIKDW. . . . . . .  C ADDR   20D7H   R   SEG=MAIN   5261 5282#
DIKM . . . . . . .  C ADDR   20EDH   R   SEG=MAIN   5293#
DIPAR. . . . . . .  C ADDR   20EBH   R   SEG=MAIN   5292#
DIV1 . . . . . . .  C ADDR   02DDH   A      7462# 7521
DIV2 . . . . . . .  C ADDR   0320H   A      7480 7484 7488 7492 7507#
DIV3 . . . . . . .  C ADDR   030DH   A      7481 7485 7489 7493#
DIV9 . . . . . . .  C ADDR   0336H   A      7451 7453 7527#
DIVIDE . . . . . .  C ADDR   2744H   R   SEG=MAIN   5753 6394#
DONE . . . . . . .  C ADDR   26B3H   R   SEG=MAIN   6224 6235#
DONE1. . . . . . .  C ADDR   26B1H   R   SEG=MAIN   6227 6230 6233#
DOSH . . . . . . .  C ADDR   27CDH   R   SEG=MAIN   6469 6485#
DOSUB. . . . . . .  C ADDR   27BBH   R   SEG=MAIN   6453 6457 6461 6465 6466 6470#
DPH. . . . . . . .  D ADDR   0083H   A      19# 536 2710 3588 3590 3711 3716 4164 4399 4411 4416 4425 4427 4430 4441
                                           4528 4530 4568 4579 4584 4593 4595 4598 4609 4719 4730 4735 4744 4746 4749
                                           4760 5685 5693 5960 5966 5986 6241 6277 6312 6315 6327 6350 6712 6714 7788
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   130

                                           7808 7854
DPL. . . . . . . .  D ADDR   0082H   A      18# 2709 3584 3586 3708 3719 4165 4402 4409 4419 4422 4424 4433 4437 4525
                                           4527 4571 4577 4587 4590 4592 4601 4605 4722 4728 4738 4741 4743 4752 4756
                                           5686 5692 5957 5969 5990 6257 6293 6314 6328 6331 6365 6709 6711 7789 7809
                                           7855
DVIG0. . . . . . .  C ADDR   0A26H   R   SEG=MAIN   1764# 1766
DVIG1. . . . . . .  C ADDR   0A1BH   R   SEG=MAIN   1755# 1757
DVIG2. . . . . . .  C ADDR   0A10H   R   SEG=MAIN   1746# 1748
DVIG3. . . . . . .  C ADDR   0A04H   R   SEG=MAIN   1737# 1739
DVIG4. . . . . . .  C ADDR   0A32H   R   SEG=MAIN   1775# 1777
DVIG6. . . . . . .  C ADDR   0A54H   R   SEG=MAIN   1803# 1805
DVM. . . . . . . .  C ADDR   0A52H   R   SEG=MAIN   1791 1802#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 474
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 517 2083 2674 2698 4181 4848 4860
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1AC8H   R   SEG=MAIN   2801 4234#
ENDSDV . . . . . .  C ADDR   0A58H   R   SEG=MAIN   1797 1806#
ENDSUM . . . . . .  C ADDR   053AH   R   SEG=MAIN   839 892 995 1020#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   082EH   R   SEG=MAIN   1413 1429#
EQU00. . . . . . .  C ADDR   084CH   R   SEG=MAIN   1431 1436 1445#
EQU1L. . . . . . .  C ADDR   0F79H   R   SEG=MAIN   2590 2594#
EQU2L. . . . . . .  C ADDR   1471H   R   SEG=MAIN   3338 3343#
ERROR. . . . . . .  C ADDR   22D3H   R   SEG=MAIN   3956 4826 4840 5621#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      6968#
EXP2 . . . . . . .  N NUMB   0001H   A      6970# 7147 7168
EXTCLE . . . . . .  C ADDR   01ACH   R   SEG=MAIN   533# 537
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   20D0H   R   SEG=MAIN   4262 5271#
FINDKOEF . . . . .  C ADDR   20C1H   R   SEG=MAIN   1272 5256#
FINDMEM. . . . . .  C ADDR   0EDDH   R   SEG=MAIN   2441 2501#
FINDR. . . . . . .  C ADDR   2218H   R   SEG=MAIN   1499 3924 5485#
FINIS. . . . . . .  C ADDR   27F8H   R   SEG=MAIN   6413 6514#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      4453 4465 7173# 7262
FLCMP. . . . . . .  C ADDR   01D6H   A      1196 1291 1329 1364 1368 1412 1435 1830 4624 4640 4775 4790 7267#
FLDIV. . . . . . .  C ADDR   02B7H   A      1219 1240 1278 1385 1404 1418 2010 2048 4246 4331 4349 4480 4483 4653
                                           7437#
FLMUL. . . . . . .  C ADDR   0203H   A      1085 1185 1237 1283 1380 1441 1872 3572 4029 4250 4335 4353 7307#
FLOUT. . . . . . .  C ADDR   01E1H   A      7274 7277#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 7776 7782 7833 7838
FLSUB. . . . . . .  C ADDR   01D1H   A      1177 1825 1904 2006 2044 3569 7260#
FND. . . . . . . .  C ADDR   01F8H   A      7283 7286 7289 7292 7295#
FO1M . . . . . . .  C ADDR   24E4H   R   SEG=MAIN   5759 5763#
FO2M . . . . . . .  C ADDR   24EDH   R   SEG=MAIN   5766 5768#
FORM4. . . . . . .  C ADDR   24EEH   R   SEG=MAIN   5761 5767 5771#
FT1IZM . . . . . .  C ADDR   0D93H   R   SEG=MAIN   2311#
FTOL . . . . . . .  C ADDR   0343H   A      1130 1285 1388 3573 4251 4354 4484 4654 5548 5575 7543#
FTOL1. . . . . . .  C ADDR   037CH   A      7556 7560 7584#
FTOL2. . . . . . .  C ADDR   039EH   A      7580 7617#
FTOL22 . . . . . .  C ADDR   03C4H   A      7620 7654#
FTOL23 . . . . . .  C ADDR   03A2H   A      7621# 7653
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   131

FTOL24 . . . . . .  C ADDR   03B5H   A      7623 7639#
FTOL25 . . . . . .  C ADDR   03C2H   A      7638 7653#
FTOL26 . . . . . .  C ADDR   03E4H   A      7669 7685#
FTOL3. . . . . . .  C ADDR   038AH   A      7583 7597#
FTOL33 . . . . . .  C ADDR   038EH   A      7601# 7615
FTOL4. . . . . . .  C ADDR   0371H   A      7562 7577#
FTOL9. . . . . . .  C ADDR   0381H   A      7590# 7600 7616 7684 7699
FULKALIB . . . . .  C ADDR   1B37H   R   SEG=MAIN   4289 4304# 4392
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   482# 483
GO23NO . . . . . .  C ADDR   13D6H   R   SEG=MAIN   3162 3239#
GO31L. . . . . . .  C ADDR   0F7FH   R   SEG=MAIN   2568 2599#
GO41L. . . . . . .  C ADDR   0F84H   R   SEG=MAIN   2599 2601#
GOA2 . . . . . . .  C ADDR   072EH   R   SEG=MAIN   1295 1297 1300# 1322
GOA3A2 . . . . . .  C ADDR   0738H   R   SEG=MAIN   1305#
GOCIKLE. . . . . .  C ADDR   0AE3H   R   SEG=MAIN   1837 1875 1884 1891# 1898 1905
GOFULL . . . . . .  C ADDR   1409H   R   SEG=MAIN   3245 3266#
GOKAA2 . . . . . .  C ADDR   0756H   R   SEG=MAIN   1320#
GOKLB. . . . . . .  C ADDR   0C91H   R   SEG=MAIN   2118 2140#
GOOFF1 . . . . . .  C ADDR   1375H   R   SEG=MAIN   3171# 3180
GOOFF2 . . . . . .  C ADDR   138DH   R   SEG=MAIN   3188# 3197
GOOFF3 . . . . . .  C ADDR   13A5H   R   SEG=MAIN   3206# 3215
GOOFF4 . . . . . .  C ADDR   13BDH   R   SEG=MAIN   3223# 3232
GOONIN . . . . . .  C ADDR   0748H   R   SEG=MAIN   1313# 1347 1521 1537
GOONIND. . . . . .  C ADDR   091FH   R   SEG=MAIN   1316 1587#
GOONOFF. . . . . .  C ADDR   1346H   R   SEG=MAIN   3140# 3149
GOONT. . . . . . .  C ADDR   0AA9H   R   SEG=MAIN   1840 1856#
GOPAROL. . . . . .  C ADDR   18A8H   R   SEG=MAIN   3790 3910 3918#
GOPAROM. . . . . .  C ADDR   17BEH   R   SEG=MAIN   3788# 3791
GOPART . . . . . .  C ADDR   02CBH   R   SEG=MAIN   727 730#
GOSK19 . . . . . .  C ADDR   0EB5H   R   SEG=MAIN   2472 2477#
GOTO7. . . . . . .  C ADDR   107CH   R   SEG=MAIN   2762# 2833 2840 2877 2926 2955 2967 3006 3010 3051 3067 3076 3082
                                           3087 3093 3108 3155 3237 3291 3294 3305 3342 3345 3374 3386 3391 3417 3419
                                           3454 3473 3491 3543 3729 3736 3953 3963 3995 4046 4048 4064 4076 4133 4301
                                           4312
GOTOKD . . . . . .  C ADDR   05CDH   R   SEG=MAIN   1088 1112#
GOUT6. . . . . . .  C ADDR   0C46H   R   SEG=MAIN   2108# 2136
GOVVLIST . . . . .  C ADDR   15F5H   R   SEG=MAIN   3526 3548#
GOZNAK . . . . . .  C ADDR   027DH   R   SEG=MAIN   641 670#
HNOR11 . . . . . .  C ADDR   11B6H   R   SEG=MAIN   2888 2930#
HNOR12 . . . . . .  C ADDR   115EH   R   SEG=MAIN   2878 2882#
HNOT1. . . . . . .  C ADDR   11FFH   R   SEG=MAIN   2854 2976#
HNOT2. . . . . . .  C ADDR   112CH   R   SEG=MAIN   2851#
HR12 . . . . . . .  C ADDR   1154H   R   SEG=MAIN   2873 2878#
HVI1113. . . . . .  C ADDR   114EH   R   SEG=MAIN   2876# 2881 2886
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 518 4806 7775 7783 7832 7842
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   1128H   R   SEG=MAIN   2846 2848#
IND. . . . . . . .  C ADDR   1E92H   R   SEG=MAIN   590 598 658 1423 1427 1725 2160 3650 3701 3957 4309 4822 4828
                                           4842 4848#
INDA3. . . . . . .  C ADDR   08E6H   R   SEG=MAIN   1552#
INDOLL . . . . . .  C ADDR   08BDH   R   SEG=MAIN   1513 1514 1518#
INIACP . . . . . .  C ADDR   2135H   R   SEG=MAIN   607 2994 5349#
INNOT1_2 . . . . .  C ADDR   14CDH   R   SEG=MAIN   3383 3388#
INNOT3 . . . . . .  C ADDR   14BEH   R   SEG=MAIN   3375 3380#
INNOT6 . . . . . .  C ADDR   14B2H   R   SEG=MAIN   3371 3375#
INTERVA. . . . . .  D ADDR   00CDH   A      397# 1856 3436
INTMUL . . . . . .  C ADDR   0AC1H   R   SEG=MAIN   1872# 1880
INTN . . . . . . .  C ADDR   1547H   R   SEG=MAIN   3464#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   11E7H   R   SEG=MAIN   2957#
IZMAN. . . . . . .  C ADDR   0D16H   R   SEG=MAIN   2081 2220#
IZMFUN . . . . . .  C ADDR   0D25H   R   SEG=MAIN   2161 2172 2179 2224 2227#
IZMPAT . . . . . .  C ADDR   0D29H   R   SEG=MAIN   2134 2148 2150 2196 2231#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   132

IZMT2. . . . . . .  C ADDR   0D38H   R   SEG=MAIN   2247 2252#
IZMT3. . . . . . .  C ADDR   0D43H   R   SEG=MAIN   2252 2258#
JFINIS . . . . . .  C ADDR   275FH   R   SEG=MAIN   6405 6413#
KD . . . . . . . .  C ADDR   2050H   R   SEG=MAIN   5162#
KEYB1. . . . . . .  C ADDR   0C1FH   R   SEG=MAIN   283 2082#
KEYB2. . . . . . .  C ADDR   1013H   R   SEG=MAIN   286 2697#
KFULL. . . . . . .  C ADDR   13E0H   R   SEG=MAIN   3109 3244#
KFULLR . . . . . .  C ADDR   130DH   R   SEG=MAIN   3104 3109#
KGO23. . . . . . .  C ADDR   1362H   R   SEG=MAIN   3103 3160#
KLEV1. . . . . . .  C ADDR   12E7H   R   SEG=MAIN   3059 3094#
KLEV2. . . . . . .  C ADDR   12ECH   R   SEG=MAIN   3094 3096#
KLEV21 . . . . . .  C ADDR   1310H   R   SEG=MAIN   3101 3110#
KLEV22 . . . . . .  C ADDR   12F6H   R   SEG=MAIN   3089 3098 3101#
KLEV23 . . . . . .  C ADDR   1321H   R   SEG=MAIN   3110 3118#
KLEV3. . . . . . .  C ADDR   12F1H   R   SEG=MAIN   3096 3098#
KLMAS. . . . . . .  C ADDR   0378H   R   SEG=MAIN   759 826#
KNAVP. . . . . . .  C ADDR   10C7H   R   SEG=MAIN   2742 2803#
KNIZM. . . . . . .  B ADDR   0023H.0 A      349# 1295 1514 1693 2198 2220 2221 2225
KNIZMON. . . . . .  C ADDR   0D20H   R   SEG=MAIN   2220 2225#
KNKMP. . . . . . .  C ADDR   1004H   R   SEG=MAIN   2692# 2736
KNLEFT . . . . . .  C ADDR   10D7H   R   SEG=MAIN   2696 2810#
KNMEM. . . . . . .  C ADDR   1254H   R   SEG=MAIN   2691 3025#
KNMENU . . . . . .  C ADDR   109EH   R   SEG=MAIN   2748 2782#
KNNUL. . . . . . .  C ADDR   10F5H   R   SEG=MAIN   2695 2827#
KNOPT. . . . . . .  C ADDR   0D4BH   R   SEG=MAIN   2080 2266#
KNRAZR . . . . . .  C ADDR   0D60H   R   SEG=MAIN   2079 2280#
KNRIGHT. . . . . .  C ADDR   0CB8H   R   SEG=MAIN   2124 2165#
KNVICH . . . . . .  C ADDR   0CD4H   R   SEG=MAIN   2133 2181#
KOEFKD . . . . . .  D ADDR   00A0H   A      379# 575 4253 4263 4355 4363
KOEFKM . . . . . .  D ADDR   0094H   A      373# 573 1083 1183 2052
KOEFKP . . . . . .  D ADDR   0090H   A      372# 571 1080 1178 2014
KOMUL. . . . . . .  C ADDR   06F6H   R   SEG=MAIN   1271 1275#
KOMULPZ. . . . . .  C ADDR   06F0H   R   SEG=MAIN   1268 1272#
KONSTA . . . . . .  D ADDR   00BCH   A      392# 1376 4122 5546
KONSTB . . . . . .  D ADDR   00C0H   A      393# 4153 5566
KON_B. . . . . . .  C ADDR   0E1EH   R   SEG=MAIN   2367 2386#
KOR0US . . . . . .  C ADDR   1F8BH   R   SEG=MAIN   1930 5036#
KOR0_AN. . . . . .  D ADDR   0084H   A      369# 1175 1942 2004 2042
KORDEC1. . . . . .  C ADDR   061EH   R   SEG=MAIN   1158 1165#
KORDEC10 . . . . .  C ADDR   05FEH   R   SEG=MAIN   1146#
KORNUL . . . . . .  C ADDR   0B18H   R   SEG=MAIN   1095 1922#
KVVOD0 . . . . . .  C ADDR   13FCH   R   SEG=MAIN   3069 3252 3261#
LABEL43. . . . . .  C ADDR   15ECH   R   SEG=MAIN   3544# 3552
LABEL7 . . . . . .  C ADDR   16C1H   R   SEG=MAIN   3544 3655# 3667
LABELA . . . . . .  C ADDR   0252H   R   SEG=MAIN   644# 662 1895
LABELB . . . . . .  C ADDR   09FDH   R   SEG=MAIN   1138 1540 1730# 1910 1914 1916
LABELC . . . . . .  C ADDR   0D60H   R   SEG=MAIN   2281#
LABELE . . . . . .  C ADDR   0D29H   R   SEG=MAIN   2229 2245# 2286 2289 2293 2297
LABELF . . . . . .  C ADDR   0D7FH   R   SEG=MAIN   2078 2300#
LABELH . . . . . .  C ADDR   1117H   R   SEG=MAIN   2694 2842#
LABELI . . . . . .  C ADDR   1991H   R   SEG=MAIN   2857 2915 2969 4059#
LABELI2. . . . . .  C ADDR   119BH   R   SEG=MAIN   2915# 2916
LABELK . . . . . .  C ADDR   128BH   R   SEG=MAIN   2856 3052#
LABELL . . . . . .  C ADDR   0F3AH   R   SEG=MAIN   2439 2530 2538#
LABELL1. . . . . .  C ADDR   0E5BH   R   SEG=MAIN   2424# 2494 2606 2655
LABELN . . . . . .  C ADDR   0F9EH   R   SEG=MAIN   2495 2615#
LABELP . . . . . .  C ADDR   15C2H   R   SEG=MAIN   3477 3497 3526# 3738
LABELS . . . . . .  C ADDR   158DH   R   SEG=MAIN   3248 3497#
LABELS1. . . . . .  C ADDR   181FH   R   SEG=MAIN   3806 3836#
LABELS13 . . . . .  C ADDR   191AH   R   SEG=MAIN   3877 3975#
LABELS3. . . . . .  C ADDR   19A4H   R   SEG=MAIN   4069#
LABELS4. . . . . .  C ADDR   197FH   R   SEG=MAIN   3876 4050#
LABL2. . . . . . .  C ADDR   0F60H   R   SEG=MAIN   2571# 3113
LABM . . . . . . .  C ADDR   1477H   R   SEG=MAIN   3114 3348#
LADD . . . . . . .  C ADDR   28A0H   R   SEG=MAIN   738 773 791 807 1813 6640#
LADDX. . . . . . .  C ADDR   28B1H   R   SEG=MAIN   6664#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   133

LBTOF. . . . . . .  C ADDR   042DH   A      7754#
LCMP . . . . . . .  C ADDR   269EH   R   SEG=MAIN   4954 5790 6220#
LDC_LONG . . . . .  C ADDR   26B4H   R   SEG=MAIN   570 1270 1811 2009 2047 2837 6240#
LDC_LTEMP. . . . .  C ADDR   26D6H   R   SEG=MAIN   747 1034 1039 1044 1048 1195 1239 1277 1290 1328 1363 1367 1379
                                           1403 1411 1417 1434 1440 1555 1824 1829 1871 1879 1903 3568 3571 3597 4028
                                           4249 4334 4352 4482 4652 4968 5953 6276#
LDX_LONG . . . . .  C ADDR   26FCH   R   SEG=MAIN   6311#
LDX_LTEMP. . . . .  C ADDR   2722H   R   SEG=MAIN   6349#
LEFCUR . . . . . .  C ADDR   14DCH   R   SEG=MAIN   3397# 3459 3475
LEFKL. . . . . . .  C ADDR   10E1H   R   SEG=MAIN   2810 2816#
LEFMEM11 . . . . .  C ADDR   1299H   R   SEG=MAIN   3060# 3095 3097 3099
LEFT21 . . . . . .  C ADDR   142AH   R   SEG=MAIN   3287 3292#
LEFT_S . . . . . .  C ADDR   181CH   R   SEG=MAIN   3835# 3838
LEFT_SK. . . . . .  C ADDR   1901H   R   SEG=MAIN   3835 3965#
LEV220 . . . . . .  C ADDR   12F9H   R   SEG=MAIN   3102# 3111
LEV2GO . . . . . .  C ADDR   0FC4H   R   SEG=MAIN   2614 2651#
LEVEL. . . . . . .  D ADDR   00B0H   A      386# 2152 2502 2540 3030 3040 3058 3263
LI21 . . . . . . .  C ADDR   11F1H   R   SEG=MAIN   2964 2966#
LI42_43. . . . . .  C ADDR   165BH   R   SEG=MAIN   3594# 3721
LIST_43. . . . . .  C ADDR   16CBH   R   SEG=MAIN   3546 3660#
LLDI2. . . . . . .  C ADDR   0D0FH   R   SEG=MAIN   2211 2215#
LLDI23 . . . . . .  C ADDR   0D03H   R   SEG=MAIN   2203 2208#
LLDI3. . . . . . .  C ADDR   0D0AH   R   SEG=MAIN   2210 2212#
LLEV2. . . . . . .  C ADDR   0F89H   R   SEG=MAIN   2570 2604#
LLMUL. . . . . . .  C ADDR   2809H   R   SEG=MAIN   6534#
LLSUB. . . . . . .  C ADDR   288EH   R   SEG=MAIN   6616#
LLTOF. . . . . . .  C ADDR   0432H   A      7760#
LMUL . . . . . . .  C ADDR   2809H   R   SEG=MAIN   5748 5954 6536#
LOA3_X . . . . . .  C ADDR   25E9H   R   SEG=MAIN   1843 5993#
LOAB12 . . . . . .  C ADDR   2184H   R   SEG=MAIN   2992 5390#
LOAD . . . . . . .  D ADDR   00B7H   A      390# 2269 2305 2844 2988 5059
LOADB. . . . . . .  C ADDR   1210H   R   SEG=MAIN   2983 2986# 3016 3022
LOADB2 . . . . . .  C ADDR   1239H   R   SEG=MAIN   3004 3008#
LOADCLE. . . . . .  C ADDR   12B7H   R   SEG=MAIN   3074# 3255
LOADKD . . . . . .  C ADDR   21A1H   R   SEG=MAIN   5423#
LOADR2 . . . . . .  C ADDR   2193H   R   SEG=MAIN   3471 3563 4025 4120 4147 5406#
LOADT. . . . . . .  C ADDR   1FA6H   R   SEG=MAIN   2271 2311 2850 5059#
LOADUS . . . . . .  C ADDR   1F45H   R   SEG=MAIN   608 1339 1528 2178 2226 2796 2824 2995 4391 4980#
LOAHL_R2 . . . . .  C ADDR   1CADH   R   SEG=MAIN   4448 4460 4511# 4620 4636 4771 4786
LOBLOK . . . . . .  C ADDR   1435H   R   SEG=MAIN   3242 3299# 3315
LOCLE. . . . . . .  C ADDR   12B2H   R   SEG=MAIN   3063 3072#
LOD1 . . . . . . .  C ADDR   1FB5H   R   SEG=MAIN   5067# 5072
LODT . . . . . . .  C ADDR   1FC1H   R   SEG=MAIN   5079# 5084
LOIZMK . . . . . .  C ADDR   1161H   R   SEG=MAIN   2883# 2920
LOKAME1. . . . . .  C ADDR   1777H   R   SEG=MAIN   3751#
LOLEVT . . . . . .  C ADDR   1FA8H   R   SEG=MAIN   2158 5060#
LOLIST . . . . . .  C ADDR   12A6H   R   SEG=MAIN   3065#
LOME1. . . . . . .  C ADDR   1A7CH   R   SEG=MAIN   4201# 4205 4208 4211 4214 4218 4221 4224 4227 4231
LOMENU . . . . . .  C ADDR   1A74H   R   SEG=MAIN   2454 2467 3751 3793 3816 4198#
LOOP . . . . . . .  C ADDR   1F01H   R   SEG=MAIN   4917# 4918
LOOPS. . . . . . .  C ADDR   2762H   R   SEG=MAIN   6415# 6448
LOSPUS . . . . . .  C ADDR   1F7FH   R   SEG=MAIN   1931 5019#
LOSTAT . . . . . .  C ADDR   12CEH   R   SEG=MAIN   3078 3084#
LOTEXT . . . . . .  C ADDR   1FBDH   R   SEG=MAIN   1422 1426 1519 2189 2342 2350 2358 2474 2478 2510 2519 2527 2536
                                           2544 2787 2876 2946 3027 3066 3075 3081 3086 3092 3107 3267 3300 3309 3364
                                           3512 3536 3690 3726 3734 3747 3768 3773 3812 3921 3967 3971 4129 4201 4308
                                           5076# 5622
LOTP . . . . . . .  C ADDR   21F7H   R   SEG=MAIN   5464# 5474 5477
LOTPUS . . . . . .  C ADDR   21EFH   R   SEG=MAIN   3824 5014 5461#
LOU. . . . . . . .  C ADDR   0D15H   R   SEG=MAIN   2198 2214 2218#
LOUIZM . . . . . .  C ADDR   0CF2H   R   SEG=MAIN   2198# 2223 5011
LOUTF. . . . . . .  C ADDR   0F7CH   R   SEG=MAIN   2596# 2605 2612
LOVICH . . . . . .  C ADDR   1157H   R   SEG=MAIN   2879# 2913 2934 4160
LOWR . . . . . . .  C ADDR   12C0H   R   SEG=MAIN   3072 3078#
LOWR1. . . . . . .  C ADDR   12C5H   R   SEG=MAIN   3080# 3259
LSUB . . . . . . .  C ADDR   288EH   R   SEG=MAIN   1135 1308 4969 6617#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   134

LTEMP. . . . . . .  N NUMB   0008H   A      1051 1053 1054 1055 5296 5297 5298 5299 5800 5803 5806 5809 5852 5853
                                           5854 5855 6032# 6406 6407 6408 6409 6418 6422 6426 6430 6433 6434 6435
                                           6436 6437 6438 6439 6440 6441 6442 6443 6444 6447 6450 6455 6459 6463 6473
                                           6476 6479 6482 6498 6501 6502 6504 6505 6507 6508 6510 6515 6516 6517 6518
                                           6538 6543 6551 6559 6564 6575 6583 6589 6597 6603 6971 6972 7011 7016 7018
                                           7027 7028 7029 7030 7261 7269 7282 7285 7288 7291 7871 7874 7877 7880
LWR. . . . . . . .  C ADDR   24BFH   R   SEG=MAIN   5739# 5743
LWRX . . . . . . .  C ADDR   2483H   R   SEG=MAIN   5684# 5696
LWTOF. . . . . . .  C ADDR   042FH   A      7756#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   24DAH   R   SEG=MAIN   1609 3600 4485 4656 5747 5752 5757# 5789
MAIN . . . . . . .  C SEG    28EBH       REL=UNIT   237 294# 446
MANT1. . . . . . .  N NUMB   0002H   A      6969# 6996 7045 7046
MANT2. . . . . . .  N NUMB   0008H   A      6971# 7022 7023 7154 7156 7157 7159 7160 7162 7163 7165 7204 7205 7207
                                           7208 7210 7211 7213 7214 7218 7220 7223 7226 7324 7326 7327 7329 7330 7332
                                           7333 7335 7386 7388 7389 7391 7392 7394 7395 7397 7479 7483 7487 7491 7495
                                           7498 7501 7504
MARK0_8. . . . . .  C ADDR   0E25H   R   SEG=MAIN   2369 2387 2389#
MARKER . . . . . .  D ADDR   00B2H   A      388# 549 2100 2329 2368 2378 2386 2396 2402 2578 2586 2622 2629 2641 2716
                                           2924 2941 2962 3049 3153 3235 3275 3283 3301 3327 3334 3366 3403 3410 3450
                                           3483 3538 3554 3665 3794 3948 3961 3982 3989 4036 4069 4088 4095 4125 4156
                                           5493 5508 5525 5536 5594
MARLE. . . . . . .  C ADDR   2249H   R   SEG=MAIN   3418 5522#
MARRI. . . . . . .  C ADDR   2256H   R   SEG=MAIN   2649 5535#
MAS10. . . . . . .  C ADDR   0397H   R   SEG=MAIN   828 841#
MAS20. . . . . . .  C ADDR   0417H   R   SEG=MAIN   841 896#
MAS4 . . . . . . .  C ADDR   050BH   R   SEG=MAIN   894 997#
MAS5DIV. . . . . .  C ADDR   057FH   R   SEG=MAIN   1035 1040 1045 1049 1057#
MASFULL. . . . . .  C ADDR   0546H   R   SEG=MAIN   1024 1028#
MASS0. . . . . . .  X ADDR   0100H   A      409 410# 829 834 863 871 945 953 1002 1009 5726
MASS1. . . . . . .  X ADDR   0104H   A      411# 837 860 874 942 956 1000 1012
MASS10 . . . . . .  X ADDR   0128H   A      420# 918 975
MASS11 . . . . . .  X ADDR   012CH   A      421# 915 977
MASS12 . . . . . .  X ADDR   0130H   A      422# 912 979
MASS13 . . . . . .  X ADDR   0134H   A      423# 909 981
MASS14 . . . . . .  X ADDR   0138H   A      424# 906 983
MASS15 . . . . . .  X ADDR   013CH   A      425# 903 985
MASS16 . . . . . .  X ADDR   0140H   A      426# 901 987
MASS17 . . . . . .  X ADDR   0144H   A      427# 899 989
MASS18 . . . . . .  X ADDR   0148H   A      428# 897 991
MASS19 . . . . . .  X ADDR   014CH   A      429# 993
MASS2. . . . . . .  X ADDR   0108H   A      412# 857 876 939 958 998 1014
MASS3. . . . . . .  X ADDR   010CH   A      413# 854 878 936 960 1016
MASS4. . . . . . .  X ADDR   0110H   A      414# 851 880 933 962
MASS5. . . . . . .  X ADDR   0114H   A      415# 848 882 930 964
MASS6. . . . . . .  X ADDR   0118H   A      416# 846 884 928 966
MASS7. . . . . . .  X ADDR   011CH   A      417# 844 886 926 968
MASS8. . . . . . .  X ADDR   0120H   A      418# 842 888 924 970
MASS9. . . . . . .  X ADDR   0124H   A      419# 890 921 972
MASX5. . . . . . .  C ADDR   0575H   R   SEG=MAIN   1026 1051#
MAXG . . . . . . .  C ADDR   1DD4H   R   SEG=MAIN   4727# 4781
MAXVIX . . . . . .  C ADDR   1E3EH   R   SEG=MAIN   4791 4796#
ME11_15DE. . . . .  C ADDR   1587H   R   SEG=MAIN   3493# 3509
ME11_15DEC . . . .  C ADDR   1776H   R   SEG=MAIN   3493 3750#
ME21_22. . . . . .  C ADDR   0F44H   R   SEG=MAIN   2544# 2552
ME21_23. . . . . .  C ADDR   17DAH   R   SEG=MAIN   3523 3802#
ME21_23DEC . . . .  C ADDR   17F6H   R   SEG=MAIN   3809 3814#
MEAVP. . . . . . .  C ADDR   10D2H   R   SEG=MAIN   2804 2807#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   522# 524
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   526# 529
MEM12NO. . . . . .  C ADDR   13F7H   R   SEG=MAIN   3253 3257#
MENG . . . . . . .  C ADDR   1BF9H   R   SEG=MAIN   4408# 4458
MENU12 . . . . . .  C ADDR   1A80H   R   SEG=MAIN   4199 4203#
MENU13 . . . . . .  C ADDR   1A88H   R   SEG=MAIN   4203 4206#
MENU14 . . . . . .  C ADDR   1A90H   R   SEG=MAIN   4206 4209#
MENU15 . . . . . .  C ADDR   1A98H   R   SEG=MAIN   4209 4212#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   135

MENU21 . . . . . .  C ADDR   1AA0H   R   SEG=MAIN   4212 4216#
MENU22 . . . . . .  C ADDR   1AA8H   R   SEG=MAIN   4216 4219#
MENU23 . . . . . .  C ADDR   1AB0H   R   SEG=MAIN   4219 4222#
MENU31 . . . . . .  C ADDR   1AB8H   R   SEG=MAIN   4222 4225#
MENU41 . . . . . .  C ADDR   1AC0H   R   SEG=MAIN   4225 4229#
MENUOFF. . . . . .  C ADDR   10B5H   R   SEG=MAIN   2783 2792#
MENUON . . . . . .  C ADDR   15B4H   R   SEG=MAIN   3514#
MERR . . . . . . .  C ADDR   109BH   R   SEG=MAIN   2779# 2782
ME_14. . . . . . .  C ADDR   12D9H   R   SEG=MAIN   3089#
ME_41. . . . . . .  C ADDR   186BH   R   SEG=MAIN   3836 3879#
MIDL . . . . . . .  C ADDR   2795H   R   SEG=MAIN   6410 6445#
MIGN . . . . . . .  C ADDR   22B5H   R   SEG=MAIN   4849 5594#
MIGNN. . . . . . .  C ADDR   22BDH   R   SEG=MAIN   5596 5601#
MIN4_HL. . . . . .  C ADDR   1CB9H   R   SEG=MAIN   4524# 4538 4564 4689 4715
MING . . . . . . .  C ADDR   1CFBH   R   SEG=MAIN   4576# 4630
MINIVIX. . . . . .  C ADDR   1D65H   R   SEG=MAIN   4641 4646# 4796
MLABL2 . . . . . .  C ADDR   145AH   R   SEG=MAIN   3268 3319# 3350 3547
MLABL2R. . . . . .  C ADDR   15F2H   R   SEG=MAIN   3547# 3550
MMM. . . . . . . .  C ADDR   024DH   R   SEG=MAIN   639#
MO220. . . . . . .  C ADDR   08B2H   R   SEG=MAIN   1150 1318 1513#
MO500I . . . . . .  C ADDR   0822H   R   SEG=MAIN   1369 1425#
MO500R . . . . . .  C ADDR   0816H   R   SEG=MAIN   1365 1421#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0ED7H   R   SEG=MAIN   2496# 2507 2516 2524 2533
MOUTKMEM . . . . .  C ADDR   158AH   R   SEG=MAIN   3494# 3499
MOVE28 . . . . . .  C ADDR   2547H   R   SEG=MAIN   1214 1232 1279 1371 2007 2045 4243 4326 4344 4450 4462 4477 4619
                                           4635 4770 4785 5852#
MOVE82 . . . . . .  C ADDR   20F3H   R   SEG=MAIN   5296#
MOVEA3 . . . . . .  C ADDR   091FH   R   SEG=MAIN   1565 1590#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2370 2594 2634 2943 3241 3284 3292 3343 3369 3411 3541 3797 3950
                                           3992 4070 4098 5529
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2366 2587 2591 2630 2944 3240 3288 3335 3339 3368 3415 3540 3796
                                           3951 4074 5538
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7321# 7364
MUP11. . . . . . .  C ADDR   0257H   A      7368# 7413
MUP2 . . . . . . .  C ADDR   0297H   A      7398 7412#
MUP3 . . . . . . .  C ADDR   026CH   A      7367 7383#
MVV11. . . . . . .  C ADDR   1430H   R   SEG=MAIN   3264 3297#
MVV12. . . . . . .  C ADDR   1442H   R   SEG=MAIN   3297 3306#
N12DELCH . . . . .  C ADDR   0C0CH   R   SEG=MAIN   2063 2071#
N4DELCH. . . . . .  C ADDR   0BB8H   R   SEG=MAIN   1987 2025#
N8DELCH. . . . . .  C ADDR   0BFAH   R   SEG=MAIN   2025 2063#
NBIMENU. . . . . .  C ADDR   0EDDH   R   SEG=MAIN   2500#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 3129 3362 3534 5944
NE05 . . . . . . .  C ADDR   0358H   A      7550 7552 7554 7557#
NELEM. . . . . . .  D ADDR   0037H   A      312# 3565 3670 3673
NEXIN. . . . . . .  C ADDR   1E9CH   R   SEG=MAIN   4852# 4859
NEXTMAX. . . . . .  C ADDR   1E09H   R   SEG=MAIN   4759 4767#
NEXTMEA. . . . . .  C ADDR   1C2EH   R   SEG=MAIN   4440 4448#
NEXTMIN. . . . . .  C ADDR   1D30H   R   SEG=MAIN   4608 4616#
NMINUS . . . . . .  C ADDR   063BH   R   SEG=MAIN   1180 1184#
NMINUS3. . . . . .  C ADDR   059FH   R   SEG=MAIN   1082 1084#
NNDELCH. . . . . .  C ADDR   0B78H   R   SEG=MAIN   1972 1987#
NNMEMB . . . . . .  C ADDR   0FD0H   R   SEG=MAIN   2498 2657#
NNNUL. . . . . . .  C ADDR   0996H   R   SEG=MAIN   1671 1674#
NO . . . . . . . .  C ADDR   277DH   R   SEG=MAIN   6420 6424 6428 6432#
NO0KEY . . . . . .  C ADDR   025FH   R   SEG=MAIN   648 653#
NO11V6 . . . . . .  C ADDR   0DD7H   R   SEG=MAIN   2337 2345#
NO12V6 . . . . . .  C ADDR   0DEAH   R   SEG=MAIN   2345 2353#
NO13V6 . . . . . .  C ADDR   0DFDH   R   SEG=MAIN   2353 2363#
NO21P7 . . . . . .  C ADDR   1A11H   R   SEG=MAIN   4108 4138#
NO23RI . . . . . .  C ADDR   0EA1H   R   SEG=MAIN   2465 2469#
NO2PARN. . . . . .  C ADDR   090BH   R   SEG=MAIN   1567 1573#
NO31N. . . . . . .  C ADDR   14FBH   R   SEG=MAIN   3424#
NO31RI . . . . . .  C ADDR   0EC0H   R   SEG=MAIN   2471 2486#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   136

NO3PARN. . . . . .  C ADDR   0901H   R   SEG=MAIN   1567# 1652
NO4DEL . . . . . .  C ADDR   0B4BH   R   SEG=MAIN   1935 1953#
NOAVK. . . . . . .  C ADDR   060DH   R   SEG=MAIN   1106 1155#
NOAVP. . . . . . .  C ADDR   072EH   R   SEG=MAIN   1299# 1330 1333
NOBAVP . . . . . .  C ADDR   09B5H   R   SEG=MAIN   1424 1428 1508 1687 1691#
NOBEF99. . . . . .  C ADDR   0308H   R   SEG=MAIN   744 760# 779 797 813
NOBIT. . . . . . .  C ADDR   0245H   A      7336 7350#
NOBITIZM . . . . .  C ADDR   09BEH   R   SEG=MAIN   1693 1696#
NOBL21 . . . . . .  C ADDR   0F4DH   R   SEG=MAIN   2541 2548#
NOBL22 . . . . . .  C ADDR   0F57H   R   SEG=MAIN   2548 2568#
NOBUF. . . . . . .  C ADDR   09F3H   R   SEG=MAIN   1723 1725#
NOBUF0 . . . . . .  C ADDR   0AF3H   R   SEG=MAIN   1834 1900#
NOCHI0 . . . . . .  C ADDR   08E2H   R   SEG=MAIN   1319 1539#
NOCHN10. . . . . .  C ADDR   0562H   R   SEG=MAIN   1037 1042#
NOCHN2 . . . . . .  C ADDR   0557H   R   SEG=MAIN   1032 1037#
NOCHN20. . . . . .  C ADDR   056DH   R   SEG=MAIN   1042 1047#
NODI2. . . . . . .  C ADDR   08C8H   R   SEG=MAIN   1516 1523#
NODI6. . . . . . .  C ADDR   10E3H   R   SEG=MAIN   2814 2818#
NODI8. . . . . . .  C ADDR   096DH   R   SEG=MAIN   1636 1642#
NODI8K . . . . . .  C ADDR   18D5H   R   SEG=MAIN   3936 3941#
NODI8_43 . . . . .  C ADDR   16A1H   R   SEG=MAIN   3628 3634#
NODI9. . . . . . .  C ADDR   08CDH   R   SEG=MAIN   1525 1528#
NODI9_43 . . . . .  C ADDR   16ACH   R   SEG=MAIN   3634 3642#
NODIS9 . . . . . .  C ADDR   097CH   R   SEG=MAIN   1642 1654#
NODISK9. . . . . .  C ADDR   18DDH   R   SEG=MAIN   3940 3941 3948#
NOENDLI. . . . . .  C ADDR   25DEH   R   SEG=MAIN   5978 5981#
NOEQU1 . . . . . .  C ADDR   0FB5H   R   SEG=MAIN   2633 2637#
NOEQU2 . . . . . .  C ADDR   14F5H   R   SEG=MAIN   3414 3418#
NOFIZM . . . . . .  C ADDR   0DB9H   R   SEG=MAIN   2301 2333#
NOFT1. . . . . . .  C ADDR   0D92H   R   SEG=MAIN   2306 2310#
NOFZ . . . . . . .  C ADDR   0AEEH   R   SEG=MAIN   1891 1895#
NOH37. . . . . . .  C ADDR   1176H   R   SEG=MAIN   2872 2896# 2907
NOHNOT1. . . . . .  C ADDR   1249H   R   SEG=MAIN   2978 3017#
NOHNOT2. . . . . .  C ADDR   1241H   R   SEG=MAIN   3011# 3017
NOKLB. . . . . . .  C ADDR   09EDH   R   SEG=MAIN   1721 1723#
NOKORR . . . . . .  C ADDR   05B5H   R   SEG=MAIN   1093 1096#
NOLAH. . . . . . .  C ADDR   1138H   R   SEG=MAIN   2842 2859#
NOLI_43. . . . . .  C ADDR   171FH   R   SEG=MAIN   3660 3704#
NOM31. . . . . . .  C ADDR   14D3H   R   SEG=MAIN   3348 3393#
NOM32. . . . . . .  C ADDR   1536H   R   SEG=MAIN   3393 3457#
NOM33. . . . . . .  C ADDR   1564H   R   SEG=MAIN   3457 3477#
NOMARL . . . . . .  C ADDR   19B9H   R   SEG=MAIN   4072 4078 4082#
NOMAXI . . . . . .  C ADDR   1E21H   R   SEG=MAIN   4776 4779#
NOME11 . . . . . .  C ADDR   13E7H   R   SEG=MAIN   3250#
NOMEM11. . . . . .  C ADDR   0EF8H   R   SEG=MAIN   2503 2513#
NOMEM12. . . . . .  C ADDR   0F0EH   R   SEG=MAIN   2513 2521#
NOMEM13. . . . . .  C ADDR   0F24H   R   SEG=MAIN   2521 2530#
NOMEMK . . . . . .  C ADDR   13E4H   R   SEG=MAIN   3038 3248#
NOMINI . . . . . .  C ADDR   1D48H   R   SEG=MAIN   4625 4628#
NON1C. . . . . . .  C ADDR   0D71H   R   SEG=MAIN   2287 2291#
NONULAVT . . . . .  C ADDR   05F2H   R   SEG=MAIN   1101 1140#
NONULDEL . . . . .  C ADDR   0B2DH   R   SEG=MAIN   1923 1934#
NOP3_0 . . . . . .  C ADDR   08E6H   R   SEG=MAIN   1545#
NOPART1. . . . . .  C ADDR   030CH   R   SEG=MAIN   733 767#
NOPART2. . . . . .  C ADDR   032CH   R   SEG=MAIN   767 786#
NOPART3. . . . . .  C ADDR   034CH   R   SEG=MAIN   786 802#
NOPART4. . . . . .  C ADDR   036CH   R   SEG=MAIN   802 819#
NOPLUS . . . . . .  C ADDR   0E4DH   R   SEG=MAIN   2414 2417#
NOPOIN7. . . . . .  C ADDR   19D0H   R   SEG=MAIN   4068 4103#
NOPOINT. . . . . .  C ADDR   199CH   R   SEG=MAIN   4062 4066#
NOR11. . . . . . .  C ADDR   0E61H   R   SEG=MAIN   2428#
NORDN. . . . . . .  C ADDR   00F6H   A      7057# 7090
NORDN1 . . . . . .  C ADDR   0107H   A      7059 7073#
NORIG2 . . . . . .  C ADDR   0F92H   R   SEG=MAIN   2601 2609#
NORIM6 . . . . . .  C ADDR   0FD0H   R   SEG=MAIN   2661#
NORIME . . . . . .  C ADDR   0E87H   R   SEG=MAIN   2452 2456#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   137

NORIME1. . . . . .  C ADDR   0E81H   R   SEG=MAIN   2454# 2457 2470
NORM1. . . . . . .  C ADDR   00F0H   A      7052# 7249 7426 7528 7745
NORR11 . . . . . .  C ADDR   118EH   R   SEG=MAIN   2909#
NORR12 . . . . . .  C ADDR   119EH   R   SEG=MAIN   2909 2916# 2930
NORUP. . . . . . .  C ADDR   0119H   A      7056 7093#
NORUP1 . . . . . .  C ADDR   011EH   A      7098# 7116
NORUP2 . . . . . .  C ADDR   0132H   A      7100 7117#
NORVICH. . . . . .  C ADDR   09F6H   R   SEG=MAIN   1651 1726#
NOSUB. . . . . . .  C ADDR   27B8H   R   SEG=MAIN   6454 6458 6462 6467#
NOT1IN . . . . . .  C ADDR   0B03H   R   SEG=MAIN   1799 1908#
NOT1_7 . . . . . .  C ADDR   108BH   R   SEG=MAIN   2764 2771#
NOT2IN . . . . . .  C ADDR   0B0BH   R   SEG=MAIN   1908 1912#
NOT2_7 . . . . . .  C ADDR   1096H   R   SEG=MAIN   2771 2776#
NOT3IN . . . . . .  C ADDR   0B13H   R   SEG=MAIN   1912 1915#
NOTAKT . . . . . .  C ADDR   09C8H   R   SEG=MAIN   1697 1701#
NOTE21 . . . . . .  C ADDR   06B2H   R   SEG=MAIN   1201 1243#
NOTE22 . . . . . .  C ADDR   06CDH   R   SEG=MAIN   1243 1255#
NOTESTIZM. . . . .  C ADDR   06E5H   R   SEG=MAIN   1164 1267#
NOTT1. . . . . . .  C ADDR   0ACBH   R   SEG=MAIN   1868 1877#
NOTT2. . . . . . .  C ADDR   0AD6H   R   SEG=MAIN   1877 1882#
NOTT5. . . . . . .  C ADDR   0ADBH   R   SEG=MAIN   1882 1886#
NOT_1. . . . . . .  C ADDR   0D78H   R   SEG=MAIN   2291 2296#
NOT_10 . . . . . .  C ADDR   0D78H   R   SEG=MAIN   2295#
NOVIR. . . . . . .  C ADDR   0E69H   R   SEG=MAIN   2322 2441#
NOVIR1 . . . . . .  C ADDR   0DA3H   R   SEG=MAIN   2322# 2333
NOZMEA . . . . . .  C ADDR   1CA9H   R   SEG=MAIN   4505 4507#
NOZMIN . . . . . .  C ADDR   1D9CH   R   SEG=MAIN   4676 4678#
NOZZMI . . . . . .  C ADDR   095DH   R   SEG=MAIN   1631 1633#
NOZZMI43 . . . . .  C ADDR   1691H   R   SEG=MAIN   3623 3625#
NSEC01 . . . . . .  C ADDR   099FH   R   SEG=MAIN   1675 1678#
NSEC1. . . . . . .  C ADDR   09A6H   R   SEG=MAIN   1678 1681#
NSEC10 . . . . . .  C ADDR   09ABH   R   SEG=MAIN   1677 1680 1681 1685#
NUERR. . . . . . .  D ADDR   0039H   A      310# 3955 4825 4839 5623
NULAVT . . . . . .  C ADDR   0B5DH   R   SEG=MAIN   1970#
NUMSIZE. . . . . .  N NUMB   0004H   A      6035# 6057 6095 6102 6177 6197
OBOARD . . . . . .  C ADDR   26EEH   R   SEG=MAIN   6278 6292#
OBOARD1. . . . . .  C ADDR   2736H   R   SEG=MAIN   6351 6364#
OK1. . . . . . . .  C ADDR   0186H   A      7183 7198#
OK2. . . . . . . .  C ADDR   01A0H   A      7200 7215#
OK3. . . . . . . .  C ADDR   01C4H   A      7232 7248#
ONBOAR1. . . . . .  C ADDR   2714H   R   SEG=MAIN   6313 6330#
ONBOARD. . . . . .  C ADDR   26C8H   R   SEG=MAIN   6242 6256#
ONMEM11. . . . . .  C ADDR   1265H   R   SEG=MAIN   2791 2806 2808 3032# 3513 3519 3748 3752 3757 3771 3776 3799 3813
                                           3817 3828
ONMEM12. . . . . .  C ADDR   17FDH   R   SEG=MAIN   3818# 3821 3840
ONMEM13. . . . . .  C ADDR   197CH   R   SEG=MAIN   3993 4048# 4052 4054
ONMIG. . . . . . .  C ADDR   22CBH   R   SEG=MAIN   5605 5614#
ONVICH . . . . . .  C ADDR   0CEAH   R   SEG=MAIN   2181 2193#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 485
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 478 482
OUT43. . . . . . .  C ADDR   16B8H   R   SEG=MAIN   3650#
OUT6 . . . . . . .  C ADDR   0FD0H   R   SEG=MAIN   2077 2140 2251 2256 2261 2278 2308 2313 2320 2331 2455 2468 2476
                                           2480 2662#
OUT7 . . . . . . .  C ADDR   1A3FH   R   SEG=MAIN   2692 2693 2768 2775 2779 2797 2847 2852 2903 3036 3115 3312 3379
                                           3652 3659 3703 3786 3874 3969 3973 4043 4057 4100 4105 4135 4163#
OUTA . . . . . . .  C ADDR   2263H   R   SEG=MAIN   2948 5546#
OUTA2. . . . . . .  C ADDR   227DH   R   SEG=MAIN   5557# 5562
OUTB . . . . . . .  C ADDR   2286H   R   SEG=MAIN   5566#
OUTB2. . . . . . .  C ADDR   22ACH   R   SEG=MAIN   5584# 5589
OUTB3. . . . . . .  C ADDR   2297H   R   SEG=MAIN   5570 5575#
OUTF . . . . . . .  C ADDR   0D99H   R   SEG=MAIN   2304 2316# 2339 2343 2347 2351 2355 2359 2384 2407 2416 2419 2426
                                           2496 2511 2520 2528 2537 2546 2593 2596 2636 2650 2653 2893 2894 3818
OUTFL. . . . . . .  C ADDR   0E5EH   R   SEG=MAIN   2422 2426#
OUTKMEM. . . . . .  C ADDR   1272H   R   SEG=MAIN   3040# 3057 3494
OUTMA. . . . . . .  C ADDR   0E37H   R   SEG=MAIN   2405 2407#
OUTMAX . . . . . .  C ADDR   1E26H   R   SEG=MAIN   4763 4782#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   138

OUTMEA . . . . . .  C ADDR   1C49H   R   SEG=MAIN   4444 4459#
OUTMENU. . . . . .  C ADDR   17B9H   R   SEG=MAIN   3785#
OUTMIN . . . . . .  C ADDR   1D4DH   R   SEG=MAIN   4612 4632#
OUTR . . . . . . .  C ADDR   0879H   R   SEG=MAIN   1454 1477#
OUTR5. . . . . . .  C ADDR   0895H   R   SEG=MAIN   1475 1496#
OUTSKO . . . . . .  C ADDR   185EH   R   SEG=MAIN   3870 3872#
OUTSKO1. . . . . .  C ADDR   185BH   R   SEG=MAIN   3868 3871#
OUTVICH. . . . . .  C ADDR   0DA6H   R   SEG=MAIN   2323# 2335
OUTVIR . . . . . .  C ADDR   0C8AH   R   SEG=MAIN   2107 2136#
OUT_KALI . . . . .  C ADDR   1B44H   R   SEG=MAIN   4310#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6234
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 4852 4856
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 456
P1 . . . . . . . .  D ADDR   0090H   A      32# 611 612 4865 4867 4870 4873 4877 4879 4880 4932 4934 4936 5363 5370
                                           5882 5885 5887 5890
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 457
P2 . . . . . . . .  D ADDR   00A0H   A      47# 4898 4902 4911
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 458
P3 . . . . . . . .  D ADDR   00B0H   A      62# 467 2106 2108 2110 2111 2114 2115 2119 2120 2122 2123 2125 2126 2128
                                           2129 2131 2132 2302 2303 2334 2335 2338 2339 2346 2347 2354 2355 2363 2364
                                           2409 2410 2420 2421 2449 2450 2463 2464 2490 2491 2492 2493 2505 2506 2514
                                           2515 2522 2523 2531 2532 2569 2570 2604 2605 2613 2614 2651 2652 2678 2723
                                           2725 2727 2728 2731 2732 2734 2735 2737 2738 2740 2741 2743 2744 2746 2747
                                           2843 2845 2871 2872 2896 2897 2910 2911 2917 2918 2931 2932 2976 2977 3056
                                           3057 3060 3061 3102 3103 3119 3120 3121 3122 3160 3161 3250 3251 3261 3262
                                           3349 3350 3351 3352 3394 3395 3424 3425 3458 3459 3460 3461 3478 3479 3480
                                           3481 3498 3499 3506 3507 3549 3550 3551 3552 3661 3662 3740 3741 3807 3808
                                           3820 3821 3837 3838 3839 3840 3880 3881 3882 3883 4051 4052 4053 4054 4060
                                           4061 4066 4067 4103 4104 4179 4897 4899 4901 4907 4908 4909 4912 4913
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2675 2677 4176 4178
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 460
P4 . . . . . . . .  D ADDR   0084H   A      20# 1925 1946 1973 2056 2205 2207 4296 4989 4992 5008 5010 5466
P5 . . . . . . . .  D ADDR   0085H   A      21# 555 563 1927 1948 1975 1978 1983 2018 2020 2058 2215 2217 4300 4997
                                           5000 5030 5033 5470
P6 . . . . . . . .  D ADDR   0086H   A      22# 1847 1849 1853 1855 2680 2682 2686 2688 4183 4185 4189 4191
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 461
PACK1. . . . . . .  C ADDR   00DEH   A      7035# 7250 7427 7529 7746
PARERR . . . . . .  C ADDR   18EAH   R   SEG=MAIN   3912 3914 3916 3955#
PARN . . . . . . .  D ADDR   00AFH   A      385# 560 1665 2282 3001
PAROL. . . . . . .  D ADDR   00A8H   A      381#
PART . . . . . . .  D ADDR   009AH   A      375# 556 731 1071 1113 1140 1155 1674 1727 1867 1887 2245 2283 2762 2986
                                           3000 3370 5001 5390
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 454
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 455
PCON . . . . . . .  D ADDR   0087H   A      23# 501
POIN3. . . . . . .  C ADDR   19CFH   R   SEG=MAIN   4101# 4136
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   139

POINA. . . . . . .  C ADDR   1A0CH   R   SEG=MAIN   4099 4135#
POINA1 . . . . . .  C ADDR   19B4H   R   SEG=MAIN   4071 4078#
POINA2 . . . . . .  C ADDR   19AEH   R   SEG=MAIN   4074# 4079
POZB . . . . . . .  C ADDR   1A2FH   R   SEG=MAIN   4149 4153#
PROD . . . . . . .  N NUMB   000CH   A      6972# 7316 7317 7318 7319 7339 7340 7341 7343 7344 7346 7347 7349 7371
                                           7373 7374 7376 7377 7379 7380 7382 7401 7402 7403 7405 7406 7408 7409 7411
                                           7422 7423 7424 7425 7446 7447 7448 7449 7465 7467 7468 7470 7471 7473 7474
                                           7476 7506 7523 7524 7525 7526
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 7777 7781 7834 7837
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2086 2671 2700 4174 5791 5793 6707
                                           6715
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0C94H   R   SEG=MAIN   2130 2142#
QUES . . . . . . .  C ADDR   131BH   R   SEG=MAIN   3115# 3120
QU_AVP . . . . . .  C ADDR   072BH   R   SEG=MAIN   1296 1298#
R10. . . . . . . .  N NUMB   000AH   A      441# 644 1102 1374 1382 3915 5438 7800
R11. . . . . . . .  N NUMB   000BH   A      442# 645 1103 1375 1381 5442 7804
R8 . . . . . . . .  N NUMB   0008H   A      439# 508 1372 1384 3765 3911 4952 5430 7792
R9 . . . . . . . .  N NUMB   0009H   A      440# 1373 1383 3913 4953 5434 7796
RAFTERK. . . . . .  C ADDR   05CBH   R   SEG=MAIN   1110# 1116
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   135FH   R   SEG=MAIN   3157# 3161
RE1. . . . . . . .  C ADDR   1F0AH   R   SEG=MAIN   4932# 4938
RE11_7 . . . . . .  C ADDR   0673H   R   SEG=MAIN   1212# 1254 1265
RE4BYTE. . . . . .  C ADDR   0454H   A      507 3764 3909 7788#
REA3_X . . . . . .  C ADDR   25FBH   R   SEG=MAIN   3595 6010#
REACP. . . . . . .  D ADDR   0077H   A      304# 626 628 630 632 672 688 696 704 713 720 735 770 788 804 820 1992
                                           1994 1996 1998 2030 2032 2034 2036
READ . . . . . . .  C ADDR   1F08H   R   SEG=MAIN   625 627 629 4931#
READYACP . . . . .  C ADDR   02C3H   R   SEG=MAIN   714 724#
READ_X2. . . . . .  C ADDR   1EF0H   R   SEG=MAIN   4906# 4917
REBYTE . . . . . .  C ADDR   0226H   R   SEG=MAIN   610# 655 761 1951 1961 1985 2023 2061 2070 2072
REBYTE2. . . . . .  C ADDR   046CH   A      1204 1212 1230 1246 1257 1273 4316 4324 7808#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 462
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   10C4H   R   SEG=MAIN   2801# 2803
RESAR2 . . . . . .  C ADDR   2553H   R   SEG=MAIN   736 771 789 805 821 833 869 951 1007 1128 1173 1281 1302 1354
                                           1377 1400 1553 1607 1822 1901 1938 2830 4237 4245 4264 4342 4364 4452 4464
                                           4479 4559 4617 4633 4647 4710 4768 4783 5547 5567 5860# 5994
RESAR8 . . . . . .  C ADDR   2511H   R   SEG=MAIN   1084 1134 1176 1184 1307 2005 2043 5799#
RESA_HL. . . . . .  C ADDR   25DFH   R   SEG=MAIN   1842 4397 4535 4685 5984#
REZAM. . . . . . .  D ADDR   008CH   A      371# 2040
REZAP. . . . . . .  D ADDR   0088H   A      370# 2002
REZMUL . . . . . .  C ADDR   0623H   R   SEG=MAIN   1148 1162 1171#
REZ_A. . . . . . .  D ADDR   0062H   A      360# 749 822 832 868 950 1006 1937
REZ_A0 . . . . . .  D ADDR   006AH   A      362# 1133 1306 1344 1534 2176 2822 2831 2838
REZ_A1 . . . . . .  D ADDR   0066H   A      361# 1065 1131 1172 1286 1301 1320
REZ_A2 . . . . . .  D ADDR   007BH   A      363# 1303
REZ_A3 . . . . . .  D ADDR   009CH   A      377# 1136 1309 1353 1552 1606 1732 2829 4236 4341 5993 6024
REZ_AK . . . . . .  D ADDR   00A4H   A      380# 4030 4244
REZ_AME. . . . . .  D ADDR   005EH   A      358# 1077 1086 1127 1186 1280
REZ_DEL. . . . . .  D ADDR   00C5H   A      395# 751
REZ_R. . . . . . .  D ADDR   00C9H   A      396# 1386 1399
RGOTO7 . . . . . .  C ADDR   14D0H   R   SEG=MAIN   3391# 3425 3461
RHNOR11. . . . . .  C ADDR   1168H   R   SEG=MAIN   2870 2882 2888#
RHNOT1 . . . . . .  C ADDR   112FH   R   SEG=MAIN   2845 2854#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   140

RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0E8AH   R   SEG=MAIN   2447 2459#
RI6. . . . . . . .  C ADDR   0E84H   R   SEG=MAIN   2450 2455# 2464 2489 2493
RIGBLO . . . . . .  C ADDR   0F5AH   R   SEG=MAIN   2569# 2600 2602
RIGBLOK. . . . . .  C ADDR   0F98H   R   SEG=MAIN   2613#
RIGHT2 . . . . . .  C ADDR   0CAFH   R   SEG=MAIN   2153 2157#
RIGHT3 . . . . . .  C ADDR   0CB3H   R   SEG=MAIN   2155 2160#
RIKN . . . . . . .  C ADDR   0E0FH   R   SEG=MAIN   2370# 2388
RIZMAN . . . . . .  C ADDR   0C1CH   R   SEG=MAIN   2081# 2116
RI_31. . . . . . .  C ADDR   0EA4H   R   SEG=MAIN   2462 2471#
RKNLEFT. . . . . .  C ADDR   1010H   R   SEG=MAIN   2696# 2739
RKNMEM . . . . . .  C ADDR   1001H   R   SEG=MAIN   2691# 2745
RKNNUL . . . . . .  C ADDR   100DH   R   SEG=MAIN   2695# 2733
RKNOPT . . . . . .  C ADDR   0C19H   R   SEG=MAIN   2080# 2127
RKNRAZR. . . . . .  C ADDR   0C16H   R   SEG=MAIN   2079# 2121
RKVVOD0. . . . . .  C ADDR   12AFH   R   SEG=MAIN   3062 3069#
RLABELF. . . . . .  C ADDR   0C13H   R   SEG=MAIN   2078# 2113
RLABELH. . . . . .  C ADDR   100AH   R   SEG=MAIN   2694# 2730
RLABELI. . . . . .  C ADDR   1135H   R   SEG=MAIN   2857#
RLABELK. . . . . .  C ADDR   1132H   R   SEG=MAIN   2856# 2859
RLABELL. . . . . .  C ADDR   0E66H   R   SEG=MAIN   2439#
RLABELL1 . . . . .  C ADDR   0FCDH   R   SEG=MAIN   2652 2655#
RLABELN. . . . . .  C ADDR   0ED4H   R   SEG=MAIN   2491 2495#
RLABELP. . . . . .  C ADDR   175DH   R   SEG=MAIN   3738# 3741
RLABELS13. . . . .  C ADDR   1868H   R   SEG=MAIN   3877# 3881
RLABELS4 . . . . .  C ADDR   1865H   R   SEG=MAIN   3876# 3879
RLABL2 . . . . . .  C ADDR   1315H   R   SEG=MAIN   3113#
RLABM. . . . . . .  C ADDR   1318H   R   SEG=MAIN   3114# 3118
RLEFCUR. . . . . .  C ADDR   1561H   R   SEG=MAIN   3475# 3479
RLER . . . . . . .  C ADDR   2255H   R   SEG=MAIN   5530 5532#
RLIST_43 . . . . .  C ADDR   15EFH   R   SEG=MAIN   3546# 3548
RMAS4. . . . . . .  C ADDR   0414H   R   SEG=MAIN   894# 896
RME21_23 . . . . .  C ADDR   15BFH   R   SEG=MAIN   3504 3523#
RMO220 . . . . . .  C ADDR   0605H   R   SEG=MAIN   1150# 1197
RNNMEMB. . . . . .  C ADDR   0EDAH   R   SEG=MAIN   2498# 2501
RNO3PARN . . . . .  C ADDR   097AH   R   SEG=MAIN   1652# 1666
RNOCHI0. . . . . .  C ADDR   0753H   R   SEG=MAIN   1315 1319#
RNOH37 . . . . . .  C ADDR   118CH   R   SEG=MAIN   2907# 2911 2918 2932
RNOMEMK. . . . . .  C ADDR   126FH   R   SEG=MAIN   3038# 3055
RNORVICH . . . . .  C ADDR   0978H   R   SEG=MAIN   1595 1596 1651#
RNOT1IN. . . . . .  C ADDR   0A4FH   R   SEG=MAIN   1729 1799#
RNOTESTIZM . . . .  C ADDR   061BH   R   SEG=MAIN   1164# 1199
ROUT6. . . . . . .  C ADDR   0C10H   R   SEG=MAIN   2077# 2112
ROUT7. . . . . . .  C ADDR   1007H   R   SEG=MAIN   2693# 2724 2729
ROUTF. . . . . . .  C ADDR   1189H   R   SEG=MAIN   2903# 2977
RR0. . . . . . . .  N NUMB   0000H   A      432# 2087 2670 2701 4173
RR1. . . . . . . .  N NUMB   0001H   A      433# 2088 2669 2702 4172
RR2. . . . . . . .  N NUMB   0002H   A      435# 1206 1218 1224 1236 1248 1259 2089 2668 2703 3574 3582 4171 4318
                                           4330 4336 4348 4965
RR3. . . . . . . .  N NUMB   0003H   A      436# 1207 1217 1225 1235 1249 1260 2090 2667 2704 3575 3581 4170 4319
                                           4329 4337 4347 4966
RR4. . . . . . . .  N NUMB   0004H   A      1208 1216 1226 1234 1250 1261 2091 2666 2705 3576 3580 4169 4320 4328
                                           4338 4346 6036# 6093 6114 6130 6174 6196
RR5. . . . . . . .  N NUMB   0005H   A      1209 1215 1227 1233 1251 1262 2092 2665 2706 3577 3579 4168 4321 4327
                                           4339 4345 6037# 6094 6101 6108 6175 6184
RR6. . . . . . . .  N NUMB   0006H   A      434# 2093 2664 2707 4167
RR7. . . . . . . .  N NUMB   0007H   A      437# 2094 2663 2708 4166
RRIR . . . . . . .  C ADDR   2262H   R   SEG=MAIN   5541 5543#
RRMO220. . . . . .  C ADDR   0750H   R   SEG=MAIN   1292 1318#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0914H   R   SEG=MAIN   1579# 1597 1599 1600
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 492 2798
RTIZMRI. . . . . .  C ADDR   0D7CH   R   SEG=MAIN   2299#
RVVIZKO. . . . . .  C ADDR   116AH   R   SEG=MAIN   2890# 2898
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   141

SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAUS . . . . . . .  D ADDR   0036H   A      313# 1926 1928 1945 1947 1974 1976 2055 2057
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2104 2383 2401 2583 2627 2647 2720 3280 3332 3408 3987 4093 5606
                                           5614
SAVEIR2. . . . . .  C ADDR   2495H   R   SEG=MAIN   835 872 954 1010 5699#
SAVELTE. . . . . .  C ADDR   04A7H   A      7871#
SAVEN_BL . . . . .  D ADDR   00D3H   A      399# 5965 5984
SAVER2 . . . . . .  C ADDR   24A1H   R   SEG=MAIN   572 574 576 578 740 750 752 775 793 809 823 1066 1078 1087 1132
                                           1137 1187 1287 1304 1310 1321 1387 1391 1611 1827 1874 1943 2003 2015 2041
                                           2053 2832 2839 3605 4031 4123 4154 4254 4356 4455 4467 4487 4562 4627 4643
                                           4658 4713 4778 4793 5550 5577 5713# 6025
SAVE_HL. . . . . .  C ADDR   25C8H   R   SEG=MAIN   1845 3449 5965#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 4807 4813
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 500 4808 4812 4815 4816 4837
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   1EB2H   R   SEG=MAIN   4865# 4872
SDV1 . . . . . . .  C ADDR   1EC6H   R   SEG=MAIN   4877# 4883
SDVIG0 . . . . . .  C ADDR   02A4H   R   SEG=MAIN   700# 702
SDVIG1 . . . . . .  C ADDR   0299H   R   SEG=MAIN   692# 694
SDVIG2 . . . . . .  C ADDR   028EH   R   SEG=MAIN   684# 686
SDVIG3 . . . . . .  C ADDR   0282H   R   SEG=MAIN   675# 677
SDVIG4 . . . . . .  C ADDR   02B3H   R   SEG=MAIN   710# 712
SDVIG6 . . . . . .  C ADDR   02BDH   R   SEG=MAIN   717# 719
SDVM . . . . . . .  C ADDR   02BBH   R   SEG=MAIN   707 716#
SEEGOON. . . . . .  C ADDR   097FH   R   SEG=MAIN   1641 1649 1656#
SEEIND . . . . . .  C ADDR   098DH   R   SEG=MAIN   1571 1578 1579 1668#
SEE_L43. . . . . .  C ADDR   16AFH   R   SEG=MAIN   3633 3641 3644#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      6967# 6988 6989 7014 7015 7039 7182 7199 7420 7460
SKOR19 . . . . . .  C ADDR   17A2H   R   SEG=MAIN   3766 3772#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   11F9H   R   SEG=MAIN   2972# 2987
SP . . . . . . . .  D ADDR   0081H   A      17# 453
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 498
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 497
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 4854
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   1840H   R   SEG=MAIN   3855 3857#
SS1. . . . . . . .  C ADDR   1FE2H   R   SEG=MAIN   5111# 5113
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      389# 737 739 754 772 774 790 792 806 808 1342 1532 2174 2820
SUMT2. . . . . . .  C ADDR   030FH   R   SEG=MAIN   728 769#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   2176H   R   SEG=MAIN   5381# 5391
TABN . . . . . . .  C ADDR   220EH   R   SEG=MAIN   5483# 5487
TABT11 . . . . . .  C ADDR   1FA0H   R   SEG=MAIN   5050# 5463
TABT7. . . . . . .  C ADDR   1FA4H   R   SEG=MAIN   4293 5054# 5476
TABT9. . . . . . .  C ADDR   1FA2H   R   SEG=MAIN   5052# 5473
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   142

TABUS. . . . . . .  C ADDR   1F8CH   R   SEG=MAIN   4986 5039#
TAKTIND. . . . . .  C ADDR   09CDH   R   SEG=MAIN   1700 1703#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 489 490 504
TE22 . . . . . . .  C ADDR   2201H   R   SEG=MAIN   5462 5472#
TE23 . . . . . . .  C ADDR   2209H   R   SEG=MAIN   5472 5476#
TEAEQU0. . . . . .  C ADDR   2323H   R   SEG=MAIN   2945 5637#
TEAVK. . . . . . .  C ADDR   235FH   R   SEG=MAIN   4210 5644#
TEBEQU0. . . . . .  C ADDR   232DH   R   SEG=MAIN   5638#
TEBL . . . . . . .  C ADDR   2413H   R   SEG=MAIN   2543 3106 5666#
TEBL0. . . . . . .  C ADDR   241DH   R   SEG=MAIN   3299 5667#
TECH . . . . . . .  C ADDR   2427H   R   SEG=MAIN   3535 3689 5668#
TECLE. . . . . . .  C ADDR   23D8H   R   SEG=MAIN   2535 3026 3074 5660#
TEEND. . . . . . .  C ADDR   2477H   R   SEG=MAIN   4307 5677#
TEERR. . . . . . .  C ADDR   246DH   R   SEG=MAIN   5621 5676#
TEFULL . . . . . .  C ADDR   23FFH   R   SEG=MAIN   2549 3266 5664#
TEINT. . . . . . .  C ADDR   2409H   R   SEG=MAIN   3363 5665#
TEIZMK . . . . . .  C ADDR   23BAH   R   SEG=MAIN   2341 2884 5657#
TEKALIB. . . . . .  C ADDR   2369H   R   SEG=MAIN   3511 4213 5645#
TEKD . . . . . . .  C ADDR   23B0H   R   SEG=MAIN   3920 5656#
TELIST . . . . . .  C ADDR   23F4H   R   SEG=MAIN   2518 3085 3091 5663#
TEMAX. . . . . . .  C ADDR   2445H   R   SEG=MAIN   3725 5671#
TEMEM. . . . . . .  C ADDR   23E2H   R   SEG=MAIN   5661#
TEMENU . . . . . .  C ADDR   2337H   R   SEG=MAIN   5639#
TEMID. . . . . . .  C ADDR   244FH   R   SEG=MAIN   3733 5672#
TEMIN. . . . . . .  C ADDR   243BH   R   SEG=MAIN   3308 5670#
TEMUL. . . . . . .  C ADDR   0702H   R   SEG=MAIN   1242 1279#
TENMIN . . . . . .  C ADDR   2078H   R   SEG=MAIN   1145 1147 1161 5173#
TEOLI. . . . . . .  C ADDR   2459H   R   SEG=MAIN   1425 5674#
TEOLL. . . . . . .  C ADDR   23CEH   R   SEG=MAIN   1518 5659#
TEOLR. . . . . . .  C ADDR   2463H   R   SEG=MAIN   1421 5675#
TEOUT. . . . . . .  C ADDR   23C4H   R   SEG=MAIN   2349 2430 2875 5658#
TEPAR. . . . . . .  C ADDR   23A6H   R   SEG=MAIN   4230 5655#
TES19_2. . . . . .  C ADDR   239CH   R   SEG=MAIN   513 2477 3772 3970 5653#
TES57_6. . . . . .  C ADDR   2392H   R   SEG=MAIN   2473 3767 3966 4226 5652#
TESKOR . . . . . .  C ADDR   2355H   R   SEG=MAIN   4207 5643#
TEST01 . . . . . .  C ADDR   1E4DH   R   SEG=MAIN   4812# 4835
TEST02 . . . . . .  C ADDR   1E7CH   R   SEG=MAIN   4832 4834#
TEST04 . . . . . .  C ADDR   1E5DH   R   SEG=MAIN   4819# 4821
TEST1. . . . . . .  C ADDR   1E43H   R   SEG=MAIN   4807# 4823 4844
TEST2. . . . . . .  C ADDR   1E75H   R   SEG=MAIN   4812 4831#
TEST22 . . . . . .  C ADDR   1815H   R   SEG=MAIN   3822 3829#
TEST23 . . . . . .  C ADDR   181AH   R   SEG=MAIN   3829 3832#
TEST3. . . . . . .  C ADDR   1E67H   R   SEG=MAIN   4814 4824#
TEST4. . . . . . .  C ADDR   1E55H   R   SEG=MAIN   4815# 4830
TEST5. . . . . . .  C ADDR   1E7FH   R   SEG=MAIN   4833 4836#
TEST7I . . . . . .  C ADDR   09E5H   R   SEG=MAIN   1715 1718#
TEST9I . . . . . .  C ADDR   09DEH   R   SEG=MAIN   1710 1715#
TESTAT . . . . . .  C ADDR   2431H   R   SEG=MAIN   2526 3065 5669#
TESTRS . . . . . .  C ADDR   1E41H   R   SEG=MAIN   3756 4805#
TESTS. . . . . . .  C ADDR   1809H   R   SEG=MAIN   3824# 3831 3834
TETE11 . . . . . .  C ADDR   2374H   R   SEG=MAIN   3746 4217 5647#
TETE7. . . . . . .  C ADDR   2388H   R   SEG=MAIN   3811 4223 5649#
TETE9. . . . . . .  C ADDR   237EH   R   SEG=MAIN   4220 5648#
TETESI . . . . . .  C ADDR   2341H   R   SEG=MAIN   2786 4200 5641#
TETESR . . . . . .  C ADDR   234BH   R   SEG=MAIN   4204 5642#
TEVICH . . . . . .  C ADDR   2319H   R   SEG=MAIN   2188 2357 2880 4128 5636#
TEWR . . . . . . .  C ADDR   23EAH   R   SEG=MAIN   2509 3080 5662#
TEXTT. . . . . . .  C ADDR   22DDH   R   SEG=MAIN   5066 5627#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 472
TH1. . . . . . . .  D ADDR   008DH   A      29# 511 515 3869 3871
TH2. . . . . . . .  D ADDR   00CDH   A      89#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   143

TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   1ED6H   R   SEG=MAIN   4886#
TIM1 . . . . . . .  C ADDR   1ED8H   R   SEG=MAIN   4887# 4887
TIM2 . . . . . . .  C ADDR   1EDBH   R   SEG=MAIN   4868 4871 4878 4882 4890# 4933 4937 5886 5888
TIM3 . . . . . . .  C ADDR   1EDDH   R   SEG=MAIN   4891# 4891
TIZMRI . . . . . .  C ADDR   0CA8H   R   SEG=MAIN   2152# 2299
TL0. . . . . . . .  D ADDR   008AH   A      26# 473
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   11F6H   R   SEG=MAIN   2957 2969#
TMOD . . . . . . .  D ADDR   0089H   A      25# 470 503
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 487
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 486
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1786H   R   SEG=MAIN   3754 3759#
TOME14 . . . . . .  C ADDR   17ADH   R   SEG=MAIN   3759 3779#
TOME15 . . . . . .  C ADDR   17C5H   R   SEG=MAIN   3779 3791#
TOME21 . . . . . .  C ADDR   177DH   R   SEG=MAIN   3744 3754#
TOSK19 . . . . . .  C ADDR   190FH   R   SEG=MAIN   3965 3970#
TOUTF. . . . . . .  C ADDR   1173H   R   SEG=MAIN   2894# 2897
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 4855
UNPACK1. . . . . .  C ADDR   009EH   A      6985# 7179 7313 7443 7557
UNPACK2. . . . . .  C ADDR   00BAH   A      7010# 7180 7314 7444
UP1. . . . . . . .  C ADDR   0138H   A      7130# 7147
UP2. . . . . . . .  C ADDR   014BH   A      7150# 7168
UP2A . . . . . . .  C ADDR   0161H   A      7129 7166#
UPA. . . . . . . .  C ADDR   20A7H   R   SEG=MAIN   5228# 5234
UPA1 . . . . . . .  C ADDR   20B7H   R   SEG=MAIN   5246# 5252
UPA2 . . . . . . .  C ADDR   2097H   R   SEG=MAIN   5209# 5215
UPAA . . . . . . .  C ADDR   25A0H   R   SEG=MAIN   5934# 5940
UPAA4. . . . . . .  C ADDR   2102H   R   SEG=MAIN   5309# 5315
UPAB . . . . . . .  C ADDR   2112H   R   SEG=MAIN   5326# 5332
UPAK . . . . . . .  C ADDR   20A1H   R   SEG=MAIN   5225#
UPAK1. . . . . . .  C ADDR   257AH   R   SEG=MAIN   5899#
UPAK2. . . . . . .  C ADDR   2091H   R   SEG=MAIN   5206#
UPAK3. . . . . . .  C ADDR   20B1H   R   SEG=MAIN   3467 3559 5243#
UPAK4. . . . . . .  C ADDR   259AH   R   SEG=MAIN   3431 5931#
UPAKA. . . . . . .  C ADDR   20FCH   R   SEG=MAIN   4115 5306#
UPAKB. . . . . . .  C ADDR   210CH   R   SEG=MAIN   4143 5323#
UPAV1. . . . . . .  C ADDR   1887H   R   SEG=MAIN   3900# 3906
UPAV2. . . . . . .  C ADDR   193EH   R   SEG=MAIN   4014# 4020
UPK1 . . . . . . .  C ADDR   258CH   R   SEG=MAIN   5907 5910#
UPK2 . . . . . . .  C ADDR   258DH   R   SEG=MAIN   5909 5911#
VICHMAX. . . . . .  C ADDR   1DA0H   R   SEG=MAIN   3727 4684#
VICHMEAN . . . . .  C ADDR   1BE4H   R   SEG=MAIN   3735 4396#
VICHMIN. . . . . .  C ADDR   1CC7H   R   SEG=MAIN   3310 4534#
VICHR. . . . . . .  D ADDR   00B1H   A      387# 1200 1706 2185 2194 2323 2336 2443 2451 2789 2793 2869 2936 3042
                                           3500 3508 3517 3739 3788 3802 3918 4106 4158 4198 5461
VIG0 . . . . . . .  C ADDR   0A3BH   R   SEG=MAIN   1783# 1785
VIG4 . . . . . . .  C ADDR   0A49H   R   SEG=MAIN   1794# 1796
VIOUT. . . . . . .  C ADDR   0D56H   R   SEG=MAIN   2191 2274#
VIOUTF . . . . . .  C ADDR   116CH   R   SEG=MAIN   2891#
VODM11_15. . . . .  C ADDR   1584H   R   SEG=MAIN   3492# 3507
VOLUME . . . . . .  D ADDR   00D5H   A      400# 2144 3444 5974 5976
VV21_23. . . . . .  C ADDR   1800H   R   SEG=MAIN   3808 3820#
VVCHIBL. . . . . .  C ADDR   2230H   R   SEG=MAIN   2424 5503#
VVCHIBL4 . . . . .  C ADDR   2232H   R   SEG=MAIN   5506#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   144

VVCHIF . . . . . .  C ADDR   2220H   R   SEG=MAIN   5492# 5505
VVINTE . . . . . .  C ADDR   14FBH   R   SEG=MAIN   3395 3423#
VVIZKO . . . . . .  C ADDR   11C3H   R   SEG=MAIN   2890 2936#
VVKALI52 . . . . .  C ADDR   1931H   R   SEG=MAIN   3998# 4050
VVMENU . . . . . .  C ADDR   18E7H   R   SEG=MAIN   3883 3953#
VVOD43 . . . . . .  C ADDR   16DEH   R   SEG=MAIN   3662 3669#
VVODM11_15 . . . .  C ADDR   1760H   R   SEG=MAIN   3492 3739#
VVOSTA . . . . . .  C ADDR   173BH   R   SEG=MAIN   3704 3723#
VVOSTAD. . . . . .  C ADDR   174FH   R   SEG=MAIN   3723 3731#
VVRR6. . . . . . .  C ADDR   0DCFH   R   SEG=MAIN   2341#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
WDTCN. . . . . . .  D ADDR   00FFH   A      137# 468 469
WORK . . . . . . .  D ADDR   00B8H   A      391# 1406 1408 1414 1430 1437 1453 1474 1479 1495 1734 1812 3135 3145
                                           3147 3166 3176 3178 3183 3193 3195 3201 3211 3213 3218 3228 3230 4404 4451
                                           4454 4463 4466 4478 4540 4558 4561 4616 4626 4632 4642 4646 4691 4709 4712
                                           4767 4777 4782 4792 4809 4831
WR1. . . . . . . .  C ADDR   2567H   R   SEG=MAIN   5882# 5889
WRITE. . . . . . .  C ADDR   2564H   R   SEG=MAIN   623 5352 5354 5356 5358 5360 5362 5365 5367 5369 5372 5374 5376
                                           5880#
WRITED_X1. . . . .  C ADDR   1EE1H   R   SEG=MAIN   4896#
WRITE_X1 . . . . .  C ADDR   1EE0H   R   SEG=MAIN   4895#
WRPAGE . . . . . .  C ADDR   0480H   A      3866 4286 4388 7832#
WW5. . . . . . . .  C ADDR   0483H   A      7833# 7841
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 464 496
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 465
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 466 495
XCIKLWR. . . . . .  C ADDR   2481H   R   SEG=MAIN   830 843 845 847 850 853 856 859 862 865 898 900 902 905 908 911
                                           914 917 920 922 925 927 929 932 935 938 941 944 947 999 1001 1003 5682#
XTEMP. . . . . . .  N NUMB   000CH   A      6033# 6397 6398 6399 6400 6486 6488 6489 6491 6492 6494 6495 6497 6519
                                           6520 6521 6522 6540 6541 6545 6546 6549 6553 6554 6557 6561 6562 6566 6567
                                           6569 6570 6571 6573 6577 6578 6580 6581 6585 6586 6591 6592 6594 6595 6599
                                           6600 6605 6607 6608 6609
YBNUL. . . . . . .  C ADDR   1107H   R   SEG=MAIN   2827 2835#
YES. . . . . . . .  C ADDR   279BH   R   SEG=MAIN   6419 6423 6427 6431 6449# 6512
YESAVP . . . . . .  C ADDR   075DH   R   SEG=MAIN   1298 1324#
YESBUF . . . . . .  C ADDR   0A92H   R   SEG=MAIN   1836 1841#
YESIND . . . . . .  C ADDR   09E7H   R   SEG=MAIN   1705 1714 1717 1720#
YESPRD . . . . . .  C ADDR   0A90H   R   SEG=MAIN   1835 1839#
YESTEST. . . . . .  C ADDR   1F7BH   R   SEG=MAIN   4981 5013#
YESTT5 . . . . . .  C ADDR   0AF1H   R   SEG=MAIN   1890 1898#
YESVICH. . . . . .  C ADDR   078CH   R   SEG=MAIN   1312 1349#
YESVI_KM . . . . .  C ADDR   1B4DH   R   SEG=MAIN   4233 4313#
YESVI_KR . . . . .  C ADDR   1AC5H   R   SEG=MAIN   4233# 4235
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   512 516#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   509 513#
Z01S . . . . . . .  C ADDR   1FFAH   R   SEG=MAIN   5128# 5130
Z05S . . . . . . .  C ADDR   2007H   R   SEG=MAIN   5137# 5139
Z100 . . . . . . .  C ADDR   1FCBH   R   SEG=MAIN   5092# 5094
Z15. . . . . . . .  C ADDR   1FD9H   R   SEG=MAIN   5104# 5106
Z1S. . . . . . . .  C ADDR   1FEDH   R   SEG=MAIN   5120# 5122
ZAPADC . . . . . .  C ADDR   1EB0H   R   SEG=MAIN   4864#
ZCMP . . . . . . .  C ADDR   2503H   R   SEG=MAIN   5789#
ZDIV . . . . . . .  C ADDR   24D0H   R   SEG=MAIN   748 1058 1556 3598 5752#
ZER1 . . . . . . .  C ADDR   00B3H   A      6995 6999# 7054 7097
ZER2 . . . . . . .  C ADDR   00D4H   A      7021 7025#
ZMUL . . . . . . .  C ADDR   24C6H   R   SEG=MAIN   5747#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      319# 1631 3623 4505 4676 5760 5763 5766
ZNPLUS . . . . . .  C ADDR   0275H   R   SEG=MAIN   634 664#
ZZ . . . . . . . .  C ADDR   1FDBH   R   SEG=MAIN   5105# 5105
Z_01S. . . . . . .  C ADDR   1FF6H   R   SEG=MAIN   659 660 661 2097 2713 4829 4843 5126# 5618
Z_05S. . . . . . .  C ADDR   2003H   R   SEG=MAIN   1892 1893 2545 5135#
Z_100. . . . . . .  C ADDR   1FC9H   R   SEG=MAIN   5091#
Z_15 . . . . . . .  C ADDR   1FD7H   R   SEG=MAIN   602 5103#
Z_1MS. . . . . . .  C ADDR   1FE0H   R   SEG=MAIN   4836 5110#
Z_1S . . . . . . .  C ADDR   1FE9H   R   SEG=MAIN   591 599 2190 3311 3542 3651 3702 3728 3958 4042 4310 4311 5118#
Z_5. . . . . . . .  C ADDR   1FD2H   R   SEG=MAIN   4900 4910 5098#
A51 MACRO ASSEMBLER  AMP29                                                                02/05/2007 13:48:15 PAGE   145

Z_9. . . . . . . .  C ADDR   255FH   R   SEG=MAIN   4857 5874#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
