A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     1


MACRO ASSEMBLER A51 V6.14a
OBJECT MODULE PLACED IN Amp27.OBJ
ASSEMBLER INVOKED BY: D:\PROGRAM FILES\CYGNAL\IDEFILES\C51\BIN\A51.EXE Amp27.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1        ;$include (c8051f020.inc) ; Include register definition file.
                +1     2     ;-----------------------------------------------------------------------------
                +1     3     ;       Copyright (C) 2001 CYGNAL INTEGRATED PRODUCTS, INC.
                +1     4     ;       All rights reserved.
                +1     5     ;
                +1     6     ;
                +1     7     ;       FILE NAME       : C8051F020.INC 
                +1     8     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1     9     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    10     ;
                +1    11     ;       REVISION 1.0    
                +1    12     ;
                +1    13     ;-----------------------------------------------------------------------------
                +1    14     ;REGISTER DEFINITIONS
                +1    15     ;
  0080          +1    16     P0       DATA  080H   ; PORT 0
  0081          +1    17     SP       DATA  081H   ; STACK POINTER
  0082          +1    18     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    19     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    20     P4       DATA  084H   ; PORT 4
  0085          +1    21     P5       DATA  085H   ; PORT 5
  0086          +1    22     P6       DATA  086H   ; PORT 6
  0087          +1    23     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    24     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    25     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    26     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    27     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    28     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    29     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    30     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    31     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    32     P1       DATA  090H   ; PORT 1
  0091          +1    33     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    34     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    35     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    36     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    37     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    38     P7       DATA  096H   ; PORT 7
  0098          +1    39     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    40     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    41     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
  009B          +1    42     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    43     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    44     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    45     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    46     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    47     P2       DATA  0A0H   ; PORT 2
  00A1          +1    48     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    49     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    50     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    51     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    52     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    53     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    54     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    55     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    56     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    57     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    58     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     2

  00AD          +1    59     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    60     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    61     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    62     P3       DATA  0B0H   ; PORT 3
  00B1          +1    63     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    64     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    65     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    66     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    67     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    68     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    69     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    70     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    71     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    72     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    73     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    74     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    75     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    76     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    77     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    78     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    79     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    80     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    81     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    82     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1    83     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1    84     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1    85     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1    86     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1    87     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1    88     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1    89     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1    90     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1    91     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1    92     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1    93     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1    94     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1    95     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1    96     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1    97     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1    98     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1    99     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   100     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   101     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   102     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   103     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   104     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   105     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   106     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   107     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
  00E2          +1   108     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   109     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   110     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   111     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   112     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   113     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   114     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   115     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   116     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   117     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   118     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   119     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   120     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   121     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   122     B        DATA  0F0H   ; B REGISTER
  00F1          +1   123     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   124     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     3

  00F3          +1   125     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   126     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   127     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   128     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   129     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   130     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   131     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   132     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   133     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   134     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   135     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   136     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   137     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   138     ;
                +1   139     ;------------------------------------------------------------------------------
                +1   140     ;BIT DEFINITIONS
                +1   141     ;
                +1   142     ; TCON 88H
  0088          +1   143     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   144     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   145     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   146     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   147     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   148     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   149     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   150     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   151     ;
                +1   152     ; SCON0 98H
  0098          +1   153     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   154     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   155     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   156     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   157     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   158     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   159     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   160     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   161     ; 
                +1   162     ; IE A8H
  00A8          +1   163     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   164     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   165     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   166     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   167     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   168     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   169     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   170     ;
                +1   171     ; IP B8H
  00B8          +1   172     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   173     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
  00BA          +1   174     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   175     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   176     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   177     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   178     ;
                +1   179     ; SMB0CN C0H
  00C0          +1   180     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   181     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   182     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   183     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   184     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   185     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   186     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   187     ;
                +1   188     ; T2CON C8H
  00C8          +1   189     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   190     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     4

  00CA          +1   191     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   192     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   193     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   194     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   195     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   196     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   197     ;
                +1   198     ; PSW D0H
  00D0          +1   199     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   200     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   201     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   202     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   203     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   204     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   205     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   206     CY       BIT   PSW.7  ; CARRY FLAG
                +1   207     ;
                +1   208     ; PCA0CN D8H
  00D8          +1   209     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   210     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   211     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   212     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   213     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   214     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   215     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   216     ;
                +1   217     ; ADC0CN E8H
  00E8          +1   218     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   219     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   220     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   221     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   222     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   223     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   224     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   225     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   226     ;
                +1   227     ; SPI0CN F8H
  00F8          +1   228     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   229     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   230     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   231     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   232     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   233     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   234     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   235     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     236             
                     237     NAME    MAIN
                     238                      ;      EXTRN  CODE(end1)
                     239                      ;      EXTRN CODE(numb)
                     240                       ; EXTRN CODE(SOROS)
                     241                        ;EXTRN  CODE(Abegin)
                     242     
                     243                             
                     244                             ;PUBLIC gener,bitmas,bitrs,bitznak
                     245                             ;PUBLIC meff
                     246                             ;PUBLIC rez_A, rez_A0;  !!!!!!!!!!!!!
0000                 247                             org 0h;    cseg AT 0
                     248     
0000 020000   F      249                        jmp begin;;Main               ; Locate a jump to the start of code at 
                     250                                             
0003                 251                                                     org 3
0003 32              252                                                     reti   
000B                 253                                                     org 0bh
000B 32              254                                                     reti
0013                 255                                                     org 13h
0013 32              256                                                     reti
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     5

001B                 257                                                     org 1bh
001B 32              258                                                     reti
0023                 259                                                     org 23h
0023 32              260                                                     reti
002B                 261                                                     org 2bh
002B 32              262                                                     reti
0033                 263                                                     org 33h
0033 32              264                                                     reti
003B                 265                                                     org 3bh
003B 32              266                                                     reti
0043                 267                                                     org 43h
0043 32              268                                                     reti
004B                 269                                                     org 4bh
004B 32              270                                                     reti
0053                 271                                                     org 53h
0053 32              272                                                     reti
005B                 273                                                     org 5bh
                     274                                                     
005B 32              275                                                     reti
0063                 276                                                     org 63h
0063 32              277                                                     reti
006B                 278                                                     org 6bh
006B 32              279                                                     reti
0073                 280                                                      org 73h
0073 32              281                                                     reti
0093                 282                                                     org     93h
0093 020000   F      283                                                     jmp             keyb1           ;IE6
                     284     
009B                 285                                                     org     9bh
009B 020000   F      286                                                     jmp             keyb2      ;IE7
                     287     
                     288     
                     289     
                     290     
  00CA               291     TMR2RLL  DATA 0cah;    // TIMER 2 RELOAD LOW                                       */
  00CB               292     TMR2RLH  DATA 0cbh;    // TIMER 2 RELOAD HIGH 
                     293      
                     294     Main         SEGMENT  CODE
                     295     
----                 296                                     DSEG
                     297       
  0040               298     bufind  DATA    40h;буффер индикации 12byte
                     299     ;DATA 4ch
  004F               300     abin            DATA    4fh;4byte
  0053               301     adec            DATA    53h;53h..5dh 10byte
  006E               302     chmas           DATA    6eh;счетчик л-тов незаполн массива
  006F               303     mabin           DATA    6fh
  0077               304     reacp           DATA    77h;результат чтения асп 4byte int (hex)
  003D               305     chkl            DATA    3dh             ;счетчик задержки клавиатуры 2bait                 
                                     
  003F               306     chmasN          DATA    3fh             ;n=2,n=10 суммирование n значений       =20(27.12.0
                             6)
  003C               307     savba           DATA    3ch;сохр байта индикации при миганиии   
  003B               308     movrig      DATA        3bh;крайне правое положение
  003A               309     movleft     DATA        3ah; крайне левое положение                  
  0039               310     nuerr                           DATA    39h;номер ошибки (для интерфейса)       
  0038               311     nblok                           DATA    38h;номер введенного блока
  0037               312     nelem                           DATA    37h;номер лемента в блоке 0..200
                     313     ;;;;;
  0020               314      cellbit                DATA    20h
  0000               315     bitznak         BIT     cellbit.0       ;20.0           
  0001               316     bitmas          BIT     cellbit.1       ;20.1 бит заполнения массива            
  0002               317     znmat           BIT             cellbit.2       ;20.2
  0003               318     bitrs           BIT             cellbit.3       ;20.3
  0004               319     bitizm          BIT             cellbit.4       ;20.4 вкл реж измерения
  0005               320     bitavp          BIT             cellbit.5       ;20.5  бит режима avp
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     6

  0006               321     bitvi11         BIT             cellbit.6       ;20.6   бит нажатия ввод режима вычислить R
                             !!!
  0007               322     bitzus          BIT             cellbit.7       ;20.7;флаг задержки     после установки us 
                                  
                     323     
  0021               324     cellbit1                DATA    21h
  0008               325     bitbuf          BIT     cellbit1.0      ;21.0   
  0009               326     bitprd          BIT     cellbit1.1      ;21.1  выдача вкл       
  000A               327     bitbon          BIT             cellbit1.2      ;21.2  буфер вкл
  000B               328     bitmem          BIT             cellbit1.3      ;21.3 нажата кн память
  000C               329     bmem11          BIT             cellbit1.4      ;21.4    бит ПАМ11
                     330     ;bmem12         BIT             cellbit1.5      ;21.5    
                     331     ;bmem13         BIT             cellbit1.6      ;21.6            
  000F               332     bitnul          BIT             cellbit1.7      ;21.7 бит кнопки НУЛЬ
                     333     
  0022               334     cellbit2                DATA    22h
  0010               335     bitt2           BIT     cellbit2.0      ;22.0 уст признак Tизм2 нажата кнопка Т 
  0011               336     bitmenu         BIT     cellbit2.1      ;22.1  бит режима меню(нажата кн меню)  
  0012               337     bitklb          BIT             cellbit2.2      ;22.2  признак калибровки
  0013               338     bitv19          BIT             cellbit2.3      ;22.3           бит установки скор итерфейс
                             а 19.6
  0014               339     bitvich         BIT             cellbit2.4      ;22.4    1-е нажатие кн ВЫЧ R (режим ВЫЧ R)
  0015               340     biteizm         BIT             cellbit2.5      ;22.5   признак теста измерения 
  0016               341     bitpar          BIT             cellbit2.6      ;22.6   бит проведенного 1раз пароля 
  0017               342     bitoll          BIT             cellbit2.7      ;22.7 бит перегрузки
                     343     ;в реж измерения прибор измеряет (кнопка ИЗМ не нажата )
                     344     ;при нажатии кнопок (T,МЕНЮ ,ПАМЯТЬ ,ВЫЧ R)прибор выходит из реж измерения
                     345     ;и выдает т.н. буфер индикации  
  0023               346     cellbit3                DATA    23h
  0018               347     knizm           BIT     cellbit3.0      ;22.0 уст признак нажата кнопка ИЗМ     
  0019               348     bitmig          BIT     cellbit3.1      ;22.1 бит мигания при наборе конст      
  001A               349     bitakt          BIT             cellbit3.2      ;22.2  бит такта
  001B               350     bitznB          BIT             cellbit3.3      ;22.3 БИТ ЗНАКА ПРИ ВВОДЕ константы В
                     351     ;bit            BIT             cellbit3.4      ;22.4    
                     352     ;bit            BIT             cellbit3.5      ;22.5    
                     353     ;bit            BIT             cellbit3.6      ;22.6            
                     354     ;bit            BIT             cellbit3.7      ;22.7
                     355             
  005E               356     rez_Ame   data 5eh;float         (РЕЗ1-AN)*K
                     357     ;hex
  0062               358     rez_A    data 62h       ;РЕЗ сумма 100 (10)отсчетов измерения    
  0066               359     rez_A1  data 66h        ;РЕЗ1  среднее по массиву из 2,10 ти лементов int (hex)
  006A               360     rez_A0  data 6ah;рез изм по нажатию кн НУЛЬ
  007B               361     rez_A2   data 7bh; A2
                     362     
  0098               363     chinkor  data  98h;80h          ;счетчик интервала коррекции  2byte
  0081               364     chavt    data  81h              ;счетчик автокалибровки  2byte
  0083               365     chdel    data  83h              ; счетчик задержки
                     366     ;float
  0084               367     kor0_AN  data  84h              ;4byte  AN      результат коррекции 0
  0088               368     rezAp    data  88h              ;4byte  A+
  008C               369     rezAm    data  8ch              ;4byte  A-
  0090               370     koefKp   data  90h              ;4byte  K+
  0094               371     koefKm   data  94h              ;4byte  K-
                     372     ;hex 
  009A               373     parT     data  9ah              ;параметр времени измерения
  009B               374     chbefore data  9bh              ;счетчик предварительного суммирования
  009C               375     rez_A3   data  9ch              ;A3
                     376     ;FLOAT
  00A0               377     koefKD  data  0a0h         ;KD кофф диапазона
  00A4               378     rez_Ak  data  0a4h         ;Ak
  00A8               379     parol           data  0a8h         ;храним в памяти пароль
  00AC               380     chind   data  0ach         ;счетчик индикации
                     381     ;chbuf  data  0adh         ;счетчик периода загрузки в буфер и интерфейс
  00AE               382     diap    data  0aeh         ;номер диапазона
  00AF               383     parN    data  0afh         ;N  пар разрядности индикатора
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     7

  00B0               384     level   data  0b0h              ;уровень в меню, выч    ,Tизм
  00B1               385     vichR   data  0b1h              ;параметр =11,12,13,21
  00B2               386     marker  data  0b2h         ;номер мигающего знакоместа
  00B3               387     summa   data  0b3h         ;ячейка длясуммирования      rez_A
  00B7               388     load    data  0b7h         ;яч для загрузки текстов на индикатор
  00B8               389     work    data  0b8h        ;рабочая ячейка
  00BC               390     konstA  data  0bch        ;     введенная с крана константа A
  00C0               391     konstB  data  0c0h         ;    введенная с крана константа B
                     392     ;       data  0c4h         ;
  00C5               393     Rez_del data  0c5h      ;сумма n-значений /n
  00C9               394     rez_R           data    0c9h            ;рез вычисления R 4baita
  00CD               395     interva data  0cdh;значение интервала (запись)2baita
  00CF               396     chbuf   data  0cfh         ;счетчик периода загрузки в буфер и интерфейс
  00D3               397     saven_bl        data  0d3h;номер ячейки в блоке 2 baita
  00D5               398     volume          data    0d5h;объем блока
  00D6               399     chblok          data    0d6h;volume;кол измерений блока
  00D7               400     copy_hl         data  0d7h;копия адреса последней записанной ячейки блока saven_bl
                     401     ;data           0d9h
                     402     
                     403     ;внешнее ОЗУ 64K 
                     404     ;в обл внешнего озу 0..ffh читается страница рпзу и при записи в любую
                     405     ;ячейку  стирается целая страница 0..ffh рпзу
                     406     ;               XSEG AT 100h
                     407             PUBLIC    MASS0
  0100               408     MASS0  xdata 0100h;     скользящий массив измерения
  0104               409     MASS1  xdata 0104h;
  0108               410     MASS2  xdata 0108h;
  010C               411     MASS3  xdata 010ch;
  0110               412     MASS4  xdata 0110h;
  0114               413     MASS5  xdata 0114h;
  0118               414     MASS6  xdata 0118h;
  011C               415     MASS7  xdata 011ch;
  0120               416     MASS8  xdata 0120h;
  0124               417     MASS9  xdata 0124h;
  0128               418     MASS10  xdata 0128h;
  012C               419     MASS11  xdata 012ch;
  0130               420     MASS12  xdata 0130h;
  0134               421     MASS13  xdata 0134h;
  0138               422     MASS14  xdata 0138h;
  013C               423     MASS15  xdata 013ch;
  0140               424     MASS16  xdata 0140h;
  0144               425     MASS17  xdata 0144h;
  0148               426     MASS18  xdata 0148h;
  014C               427     MASS19  xdata 014ch;
                     428     ;xdata 
                     429     
  0000               430                             rr0             EQU 00
  0001               431                     rr1       equ   01
  0006               432                     rr6   equ 06
  0002               433                     rr2       equ   02
  0003               434                     rr3       equ   03
  0007               435                     rr7   equ 07
                     436     
  0008               437                     r8   equ 08
  0009               438                     r9        equ   09
  000A               439                     r10       equ   10
  000B               440                     r11   equ 11
                     441     
                     442                     
                     443        
----                 444                  rseg     Main          ; Switch to this code segment.
                     445     
                     446                  using    0              ; Specify register bank for the following
                     447     
0100                 448     org 100h
                     449     ;$EJECT
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     8

                     450     
0100 7581E0          451     begin:     mov  sp, #0e0h
0103 75E900          452                                             mov             PCA0L,#00;=0x00;
0106 75D900          453                                             mov     PCA0MD,#00;= 0x00;
0109 75A41F          454                                             mov     P0MDOUT,#1fh;=0x1f;
010C 75A5CD          455                                             mov     P1MDOUT,#0cdh;86h;8fh;=0x8f;
010F 75A600          456                                             mov     P2MDOUT,#00;=0x00;
                     457             
0112 75A73F          458             mov     P3MDOUT,#3fh;
0115 75B5FF          459             mov     P74OUT ,#0ffh;=0xff;
0118 75D103          460             mov     REF0CN,#03h;=0x03;
                     461             
011B 75E114          462             mov     XBR0,#14h;= 0x14;
011E 75E200          463             mov     XBR1,#00; =0x00;
0121 75E300          464             mov XBR2,#00;=0x00;
0124 75B0C0          465             mov     P3,#0c0h
0127 75FFDE          466             mov     WDTCN,#0deh;=0xde;       //запрет работы WDT
012A 75FFAD          467             mov     WDTCN,#0adh;=0xad;                                   
012D 758922          468             mov     TMOD,#22h;=0x22;        //регистр режимов
0130 758E30          469             mov     CKCON,#30h;=0x30; //сист частота/12     
0133 758CF9          470             mov     TH0,#0f9h;=0xf9;//      ; Установка таймера
0136 758AF9          471             mov     TL0,#0f9h;=0xf9; 
0139 75E680          472             mov     EIE1,#80h;=0x80;
                     473     
013C 75D480          474             mov     DAC0CN,#80h;=0x80;
013F 75D780          475             mov     DAC1CN,#80h;=0x80;
0142 75B167          476             mov     OSCXCN,#67h;=0x67;
                     477     
                     478      
                     479     
0145 E5B1            480     gener:     mov a, oscxcn
0147 B4E7FB          481                cjne a,#11100111b,gener
                     482                            
014A 75B288          483             mov     OSCICN,#88h;=0x84;
014D 75CA00          484         mov TMR2RLL,#0;=0;
0150 75CBD1          485         mov TMR2RLH,#0d1h;=0xd1;
                     486       
0153 D28E            487                     setb  TCON.6                    ;регистр управления
0155 D28C            488                      setb tcon.4
                     489     
0157 75EF00          490             mov     RSTSRC,#0;=00   ;//источники сброса 
                     491     
                     492             
015A 75E340          493          mov        XBR2,#40h
015D 75E106          494              mov    XBR0,#06h;16h
0160 75F803          495             mov             SPI0CN,#03
0163 759D31          496             mov             spi0ckr,#31H;;;;;;;;#04
                     497     ;установка скорости
0166 759850          498                                             mov             SCON0,#50h;01010000;скорость обмена
                              определяется таймером1
0169 758780          499                                             mov             PCON,#10000000b;удвоенная скорость 
                             передачи SMOD0=1
016C 758E10          500                                             mov             CKCON,#00010000b;TIM=1
016F 758920          501                                             mov             TMOD,#00100000b;реж2 внутр ист синх
                             р
0172 758840          502                                             mov             TCON,#01000000b;счетчик запущен
0175 7A50            503                                             mov                     r2,#50h                    
                                  ;57.6->19.2
0177 7B2C            504                                             mov                     r3,#2ch
0179 120454          505                                             call            re4byte                 ;502ch 1 ba
                             it skor
017C E508            506                                             mov                     a,r8
017E B40007          507                                             cjne            a,#00,yst19
0181 C213            508                                             clr                     bitv19                  ;57
                             .6
0183 758DF4          509                                             mov                     TH1,#244
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE     9

0186 8008            510                                             jmp               yst1
0188 900000   F      511     yst19:          mov                     dptr,#teS19_2
018B D213            512                                             setb            bitv19                  ;19,2
018D 758DDC          513                                             mov                     TH1,#220
0190                 514     yst1:
0190 75E730          515                                             mov             EIE2,#30H;00110000
0193 75A880          516                                             mov     IE,#80h;//10000000      ;//Снятие блокировк
                             и всех прерываний
                     517     ;ozu
0196 E4              518                                             clr     a
0197 7800            519                                             mov     r0,#00h 
0199 F6              520     mecle:          mov     @r0,a                   ;обнулить озу 256 байт
019A 08              521                                             inc     r0
019B B87FFB          522                                             cjne    r0,#7fh,mecle
019E 7880            523                                             mov     r0,#80h
01A0 F6              524     meff:                   mov     @r0,a 
01A1 F2              525                                             movx @r0,a
01A2 08              526                                             inc     r0
01A3 B8DFFA          527                             cjne    r0,#0dfh,meff
01A6 120000   F      528                             call    clmassix
                     529     ;обнулить внешнее озу 4кбайта
01A9 900000          530                                     mov                     dptr,#0
01AC E4              531     extcle: clr                     a
01AD F0              532                                     movx            @dptr,a
01AE A3              533                                     inc                     dptr
01AF E583            534                                     mov                     a,dph
01B1 B410F8          535                                     cjne            a,#10h,extcle
                     536     
01B4 7898            537                             mov             r0,#chinkor
01B6 7600            538                             mov             @r0,#0;1;
01B8 08              539                             inc             r0
01B9 76C8            540                             mov             @r0,#0c8h;90h;
                     541                             ;;;;
01BB 7881            542                             mov             r0,#chavt
01BD 7603            543                             mov             @r0,#3;1
01BF 08              544                             inc             r0
01C0 7620            545                             mov             @r0,#20h;90h
                     546     
01C2 78B2            547                                     mov             r0,#marker
01C4 76FF            548                                     mov             @r0,#0ffh
                     549                             ;mov            r0,#chind
                     550                             ;mov            @r0,#1
                     551                     
01C6 74FF            552                             mov             a,#0ffh
01C8 F585            553                        mov          p5,a
01CA 799A            554                             mov             r1,#parT
01CC 7702            555                             mov             @r1,#2                  ;Tizm=1s
01CE 79AE            556                             mov             r1,#diap
01D0 7705            557                             mov             @r1,#5                  ;10-7a
01D2 79AF            558                             mov             r1,#parN
01D4 7702            559                             mov             @r1,#2
01D6 7400            560                             mov             a,#00h
01D8 F585            561                             mov             p5,a
01DA D204            562                             setb    bitizm
                     563     
01DC 799B            564                             mov             r1,#chbefore
01DE 7700            565                             mov             @r1,#0
                     566                             ;;;;;;
01E0 900000   F      567                             mov             dptr,#ch_1              ;1->r2..r5 float
01E3 120000   F      568                             call    ldc_long
01E6 7890            569                             mov             r0,#koefKp         ;1(float)->koefKp
01E8 120000   F      570                             call    saver2
01EB 7894            571                             mov             r0,#koefKm              ;1(float)->koefKm
01ED 120000   F      572                             call    saver2
01F0 78A0            573                             mov             r0,#koefKD
01F2 120000   F      574                             call    saver2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    10

01F5 78CF            575                             mov                     r0,#chbuf
01F7 120000   F      576                             call    saver2  
                     577     ;START
                     578     ;                                       rez_A0=0;
                     579     ;        SUMM=0; //обнуление скользящего массива
                     580     ;        over_mas=0;
                     581     ;        count_mas=0;
                     582     
01FA 7840            583                             mov             r0,#bufind
01FC                 584     age2:
01FC 76FD            585                             mov             @r0,#0fdh         ;погасить индикатор
01FE 08              586                             inc             r0
01FF B84CFA          587                             cjne    r0,#bufind+12,age2              
0202 120000   F      588                             call    ind
0205 120000   F      589                             call    z_1s
                     590     
                     591                                     ;зажечь все лементы индикации
0208 7840            592                             mov             r0,#bufind
020A 76FE            593     ageon:          mov             @r0,#0feh;?
020C 08              594                             inc             r0
020D B84CFA          595                             cjne    r0,#bufind+12,ageon             
0210 120000   F      596                             call    ind
0213 120000   F      597                             call    z_1s            ;1sec
                     598     ;;;;;;;;;;;;;;;;
0216 7840            599                             mov             r0,#bufind
0218 7630            600                             mov             @r0,#30H;"A"
021A 08              601                             inc             r0
021B 7630            602                             mov             @r0,#30H;"В"
021D 08              603                             inc             r0
021E 7630            604                             mov             @r0,#30H;"Т"
0220 08              605                             inc             r0
0221 7634            606                             mov             @r0,#34H;2dh
0223 08              607                             inc             r0
0224 7635            608                             mov             @r0,#35H;"H"
0226 08              609                             inc             r0
0227 7636            610                             mov             @r0,#36h
0229 08              611                             inc             r0
022A 7637            612                             mov             @r0,#37h
022C 08              613                             inc             r0
022D 762D            614                             mov             @r0,#2dh
022F 08              615                             inc             r0
0230 7637            616                             mov             @r0,#37h
0232 08              617                             inc             r0
0233 7641            618                             mov             @r0,#"A";31h
0235 08              619                             inc             r0
                     620                     
0236 120000   F      621     dd:                     call    ind
0239 120000   F      622                             call    z_15;z_1ms
023C 434B10          623                             orl             bufind+11,#10h;бит точки после 1 знакоместа
                     624     ;;;;;;;;;;;;;;;;;;;
023F 7C60            625                             mov             r4,#60h
0241 7D00            626                             mov             r5,#00         
0243 120000   F      627                             call    iniacp;инициализация acp
0246 120000   F      628                             call    loadUS          ;us 10-7 A
                     629                             
0249 C217            630     rebyte:         clr             bitoll
024B 3095FD          631                             jnb             p1.5,$
024E 2095FD          632                             jb              p1.5,$
0251 E586            633                             mov             a,P6            ;p6.4=0
0253 54EF            634                             anl             a,#0efh
0255 F586            635                             mov             P6,a
0257 00              636                             nop
0258 00              637                             nop
                     638                                     
0259 E586            639                             mov             a,P6                    ;p6.4=1 
025B 4410            640                             orl             a,#10h
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    11

025D F586            641                             mov             P6,a                        
025F 7411            642                             mov             a,#11h
0261 120000   F      643                             call    write
                     644                             ;чтение acp
0264 120000   F      645                             call    read    
0267 F578            646                             mov     reacp+1,A       ;старший байт 
0269 120000   F      647                             call    read    
026C F579            648                             mov     reacp+2,A       ;средний байт 
026E 120000   F      649                             call    read
0271 F57A            650                             mov     reacp+3,A               ;мл байт
                     651                        ;;;;;;;;;;;
0273 7878            652                        mov          r0,#reacp+1
0275 E6              653                        mov          a,@r0
0276 20E72D          654                             jb              acc.7,znplus;
0279 D200            655                             setb    bitznak
027B 4480            656                             orl             a,#80h  ;ост содерж яч 
027D F6              657                             mov             @r0,a
                     658                                     
027E 18              659     mmm:            dec             r0;,#reacp
027F 76FF            660                             mov             @r0,#0ffh
0281 802B            661                             jmp             goznak
                     662     
                     663     
0283 750A00          664     labelA:         mov             r10,#0          
0286 750B00          665                             mov             r11,#0
0289 783D            666                             mov             r0,#chkl
028B 120000   F      667                             call    chcmp
028E 7000            668                             jnz             no0key
                     669                             ;разрешить ie6,ie7       
                     670                     ;       mov             EIE2,#30h ;EIE2.5,EIE2.4
                     671                     ;       mov             EIP2,#30h
                     672                        
0290 793D            673     no0key:         mov             r1,#chkl 
0292 120000   F      674                             call    chdec
0295 2004B1          675                             jb              bitizm,rebyte
                     676                              ;буфер 2 выдать на индикацию
                     677     
0298 120000   F      678                             call    ind
029B 120000   F      679                             call    z_01s
029E 120000   F      680                             call    z_01s
02A1 120000   F      681                             call    z_01s
02A4 80DD            682                             jmp             labelA
                     683     
02A6 C200            684     znplus:         clr     bitznak
02A8 547F            685                             anl             a,#7fh;fdh                      ;+
02AA F6              686                             mov             @r0,a
02AB 18              687                             dec             r0;,#reacp
02AC 7600            688                             mov             @r0,#00h
                     689                             
02AE                 690     goznak: 
                     691     ;;;;;;;;;;;;;
02AE 787A            692                             mov     r0,#reacp+3
02B0 E6              693                             mov             a,@r0
02B1 7F05            694                             mov             r7,#5;6 сдвиг на 5 разрядов вправо
02B3 C3              695     sdvig3:         clr             c
02B4 13              696                             rrc             a
02B5 DFFC            697                             djnz    r7,sdvig3 ;d7,d6,d5       мл байт
02B7 FA              698                             mov             r2,a    ;сохр байт
02B8 18              699                             dec             r0              ;       reacp+2
02B9 E6              700                             mov             a,@r0
02BA C0E0            701                             push    acc
02BC C3              702                             clr             c
02BD 7F03            703                             mov             r7,#3;2
02BF C3              704     sdvig2:         clr             c
02C0 33              705                             rlc             a
02C1 DFFC            706                             djnz    r7,sdvig2 ;d12..d11      средний байт
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    12

02C3 4A              707                             orl             a,r2
02C4 F57A            708                             mov             reacp+3,a;сформ мл байт
02C6 D0E0            709                             pop             acc
                     710                             
02C8 7F05            711                             mov             r7,#5;6
02CA C3              712     sdvig1:         clr             c
02CB 13              713                             rrc             a
02CC DFFC            714                             djnz    r7,sdvig1 ;d15,d14        ср байт
02CE FA              715                             mov             r2,a   ;сохр
02CF E578            716                             mov             a,reacp+1
02D1 C0E0            717                             push    acc
                     718                     ;;      push    acc
02D3 7F03            719                             mov             r7,#3;2
02D5 C3              720     sdvig0:         clr             c
02D6 33              721                             rlc             a
02D7 DFFC            722                             djnz    r7,sdvig0 ;       d21..d16
02D9 4A              723                             orl             a,r2
02DA F579            724                             mov             reacp+2,a       ; сформ средний  байт
02DC D0E0            725                             pop             acc       ;reacp+1
                     726                             ;;;;;;;;;;;;;;
02DE 20E70B          727                             jb              acc.7,sdvm
02E1 C3              728                             clr             c
02E2 7F05            729                             mov             r7,#5;6
02E4 C3              730     sdvig4:         clr             c
02E5 13              731                             rrc             a
02E6 DFFC            732                             djnz    r7,sdvig4 ;       d23,d22
02E8 F578            733                             mov             reacp+1,a
02EA 8008            734                             jmp             readyacp;ankor;klmas
                     735     ;;;;;;;;;;;;                                    
02EC 7F05            736     sdvm:           mov             r7,#5;6
02EE D3              737     sdvig6:         setb            c
02EF 13              738                             rrc             a
02F0 DFFC            739                             djnz    r7,sdvig6 ;       d23,d22
02F2 F578            740                             mov             reacp+1,a
                     741                                                             
                     742     ; reacp..reacp+3-результат чтения асп(hex) 
                     743     ;;;;;;;;;
02F4                 744     readyacp:
02F4 7898            745                                             mov             r0,#chinkor
02F6 E6              746                             mov             a,@r0
02F7 30E702          747                             jnb             acc.7,gopart
02FA 8044            748                                     jmp             sumt2
                     749                     
02FC                 750     gopart:
02FC 789A            751                             mov             r0,#parT        ;параметр времени
02FE 793F            752                             mov             r1,#chmasN
0300 B6013A          753                             cjne    @r0,#1,noparT1
                     754                             ;РЕЗ+РЕЗ
0303 7877            755                             mov             r0,#reacp
0305 120000   F      756                             call    resar2          ;reacp->r2..r5
0308 78B6            757                             mov             r0,#summa+3;rez_A+3
030A 120000   F      758                             call    ladd
030D 78B3            759                             mov             r0,#summa;rez_A
030F 120000   F      760                             call    saver2
0312 793F            761                              mov            r1,#chmasN
0314 7714            762                             mov             @r1,#20;10
0316 789B            763                             mov             r0,#chbefore
0318 B6631E          764                             cjne    @r0,#99,nobef99
                     765                             ;РЕЗ/100
031B 900000   F      766                             MOV        DPTR,#ch100 
031E 120000   F      767     allsum:         CALL   ldc_ltemp                 ; ltemp <-- 100
0321 120000   F      768                             call    zdiv;divide
0324 7862            769                             mov             r0,#rez_A
0326 120000   F      770                             call    saver2          ;сумма 100 отсчетов /100
0329 78C5            771                             mov             r0,#Rez_del
032B 120000   F      772                             call    saver2  
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    13

                     773                        ;;;;;
032E 78B3            774                        mov          r0,#summa
0330 120000   F      775                        call         clear4
                     776     
0333 799B            777                             mov             r1,#chbefore
0335 7700            778                             mov             @r1,#0
0337 8070            779                             jmp             klmas           ;загр в массив скользящее ср
0339 06              780     nobef99:        inc             @r0                     ;chbefore
033A 020000   F      781                             jmp             rebyte;labelA;метка A
                     782     ;сначала суммируем 100 знач (не выводим на индикатор не расп в скользящий массив )
                     783     ;а потом уже располагаем  в скользящий массив  из n
                     784     
                     785     
                     786     
033D B6021D          787     noparT1:        cjne    @r0,#2,noparT2
                     788                             ;РЕЗ+РЕЗ
0340                 789     sumt2:
0340 7877            790                              mov            r0,#reacp
0342 120000   F      791                             call    resar2          ;reacp->r2..r5
0345 78B6            792                             mov             r0,#summa+3;rez_A+3
0347 120000   F      793                             call    ladd
034A 78B3            794                             mov             r0,#summa;rez_A
034C 120000   F      795                             call    saver2
034F 789B            796                             mov             r0,#chbefore
0351 793F            797                             mov             r1,#chmasN
0353 770A            798                             mov             @r1,#10
0355 B613E1          799                             cjne    @r0,#19,nobef99;9,nobef99
                     800                             ;РЕЗ/20
0358 900000   F      801                             MOV        DPTR,#ch20;ch10 
035B 80C1            802                             jmp             allsum
                     803                             ;;;;;;;
                     804                             
                     805     
035D B6031D          806     noparT2:        cjne    @r0,#3,noparT3
0360 7877            807                                                              mov            r0,#reacp
0362 120000   F      808                             call    resar2          ;reacp->r2..r5
0365 78B6            809                             mov             r0,#summa+3;rez_A+3
0367 120000   F      810                             call    ladd
036A 78B3            811                             mov             r0,#summa;rez_A
036C 120000   F      812                             call    saver2
036F 789B            813                             mov             r0,#chbefore
0371 793F            814                             mov             r1,#chmasN
0373 7704            815                             mov             @r1,#4                                  ;n=4
0375 B60AC1          816                             cjne    @r0,#10,nobef99;9,nobef99
                     817                             ;РЕЗ/10
0378 900000   F      818                             MOV        DPTR,#ch10 
037B 80A1            819                             jmp             allsum
                     820                             
037D B6041D          821     noparT3:        cjne    @r0,#4,noparT4
0380                 822     aapar:          
0380 7877            823              mov            r0,#reacp
0382 120000   F      824                             call    resar2          ;reacp->r2..r5
0385 78B6            825                             mov             r0,#summa+3;rez_A+3
0387 120000   F      826                             call    ladd
038A 78B3            827                             mov             r0,#summa;rez_A
038C 120000   F      828                             call    saver2
038F 789B            829                             mov             r0,#chbefore
0391 793F            830                             mov             r1,#chmasN
0393 7704            831                             mov             @r1,#4
0395 B605A1          832                             cjne    @r0,#5,nobef99;9,nobef99
                     833                             ;РЕЗ/10
0398 900000   F      834                             MOV        DPTR,#ch5
039B 8081            835                             jmp             allsum
                     836     
                     837                     
039D 7702            838     noparT4:   mov          @r1,#2          ;chmasN n=2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    14

039F 7877            839                             mov             r0,#reacp
03A1 120000   F      840                             call    resar2          ;reacp->r2..r5
03A4 7862            841                             mov             r0,#rez_A
03A6 120000   F      842                             call    saver2
                     843     ;загрузить А в массив из 2/10 значений
                     844     ;;;;;;;;;;;;;;;
03A9                 845     klmas:           
03A9 793F            846                             mov             r1,#chmasN
03AB B7021A          847                             cjne    @r1,#2,mas10
03AE 900100          848                             MOV        dptr,#MASS0
03B1 120000   F      849                     CALL       xCIKLWR        ; MASS0 --> MASS1
                     850     
03B4 7862            851                             mov             r0,#rez_A
03B6 120000   F      852                             call    resar2          ;->r2..r5
03B9 900100          853                             mov                     dptr,#MASS0
03BC 120000   F      854                   call              saveIr2                 ; R2-R5 --> MAS0
                     855                     
03BF 900107          856                   MOV          dptr,#MASS1+3
03C2 120000   F      857                   CALL       addx
03C5 020000   F      858                       jmp           endsum
                     859     ;массив из 10-ти измерений
03C8 B70A7D          860     mas10:                  cjne    @r1,#10,mas20
03CB 900120          861                                             mov                     dptr,#MASS8
03CE 120000   F      862                     CALL            xCIKLWR         ;MASS8->MASS9
03D1 90011C          863                                             mov                     dptr,#MASS7
03D4 120000   F      864                     CALL            xCIKLWR         ;MASS7->MASS8
03D7 900118          865                     MOV       dptr,#MASS6
03DA 120000   F      866                     CALL       xCIKLWR         ; MASS6 --> MASS7
03DD 900114          867                     MOV        dptr,#MASS5
                     868                    
03E0 120000   F      869                    CALL        xCIKLWR        ; MASS5 --> MASS6
03E3 900110          870                    MOV         dptr,#MASS4
                     871                    
03E6 120000   F      872                    CALL        xCIKLWR        ; MASS4 --> MASS5
03E9 90010C          873                             mov                     dptr,#MASS3
                     874     
03EC 120000   F      875                    CALL             xCIKLWR         ;MASS3->MASS4
03EF 900108          876                     MOV        dptr,#MASS2
                     877                    
03F2 120000   F      878                    CALL        xCIKLWR         ; MASS2 --> MASS3
03F5 900104          879                    MOV         dptr,#MASS1
                     880                     
03F8 120000   F      881                   CALL         xCIKLWR        ; MASS1 --> MASS2
03FB 900100          882                    MOV         dptr,#MASS0
                     883                   
03FE 120000   F      884                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     885     
                     886                             
0401 7862            887                             mov             r0,#rez_A
0403 120000   F      888                             call    resar2          ;->r2..r5
                     889                                     ;call   aform
0406 900100          890                                     mov                     dptr,#MASS0
0409 120000   F      891                   call              saveIr2                 ; R2-R5 --> MAS0
                     892              
040C 900107          893                   MOV          dptr,#MASS1+3
040F 120000   F      894                   CALL       addx
0412 90010B          895                   MOV          dptr,#MASS2+3
0415 120000   F      896                   CALL       addx
0418 90010F          897                   MOV          dptr,#MASS3+3
041B 120000   F      898                  CALL        addx
041E 900113          899                   MOV       dptr,#MASS4+3
0421 120000   F      900                   call       addx
0424 900117          901                     MOV        dptr,#MASS5+3
0427 120000   F      902                  CALL        addx
042A 90011B          903                   MOV          dptr,#MASS6+3
042D 120000   F      904                   CALL       addx
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    15

0430 90011F          905                   MOV          dptr,#MASS7+3
0433 120000   F      906                  CALL        addx
0436 900123          907                  MOV        dptr,#MASS8+3
0439 120000   F      908                   call       addx
043C 900127          909                     MOV                     dptr,#MASS9+3
043F 120000   F      910                  call        addx
0442 020000   F      911                              jmp            endsum
                     912     
0445 020000   F      913     rmas4:          jmp                     mas4
                     914     ;массив из 20-ти измерений
0448 B714FA          915     mas20:          cjne    @r1,#20,rmas4
044B 900148          916                                             mov                     dptr,#MASS18
044E 120000   F      917                     CALL            xCIKLWR         ;MASS18->MASS19
0451 900144          918                                             mov                     dptr,#MASS17
0454 120000   F      919                     CALL            xCIKLWR         ;MASS17->MASS18
0457 900140          920                     MOV       dptr,#MASS16
045A 120000   F      921                     CALL       xCIKLWR         ; MASS16 --> MASS17
045D 90013C          922                     MOV        dptr,#MASS15
                     923                    
0460 120000   F      924                    CALL        xCIKLWR        ; MASS15 --> MASS16
0463 900138          925                    MOV         dptr,#MASS14
                     926                    
0466 120000   F      927                    CALL        xCIKLWR        ; MASS14 --> MASS15
0469 900134          928                             mov                     dptr,#MASS13
                     929     
046C 120000   F      930                    CALL             xCIKLWR         ;MASS13->MASS14
046F 900130          931                     MOV        dptr,#MASS12
                     932                    
0472 120000   F      933                    CALL        xCIKLWR         ; MASS12 --> MASS13
0475 90012C          934                    MOV         dptr,#MASS11
                     935                     
0478 120000   F      936                   CALL         xCIKLWR        ; MASS11 --> MASS12
047B 900128          937                    MOV         dptr,#MASS10
                     938                   
047E 120000   F      939                    CALL        xCIKLWR        ; MASS10 --> MASS11
0481 900124          940                                      MOV       dptr,#MASS9
0484 120000   F      941                     CALL       xCIKLWR        ; MASS9 --> MASS10
                     942     
0487 900120          943                                             mov                     dptr,#MASS8
048A 120000   F      944                     CALL            xCIKLWR         ;MASS8->MASS9
048D 90011C          945                                             mov                     dptr,#MASS7
0490 120000   F      946                     CALL            xCIKLWR         ;MASS7->MASS8
0493 900118          947                     MOV       dptr,#MASS6
0496 120000   F      948                     CALL       xCIKLWR         ; MASS6 --> MASS7
0499 900114          949                     MOV        dptr,#MASS5
                     950                    
049C 120000   F      951                    CALL        xCIKLWR        ; MASS5 --> MASS6
049F 900110          952                    MOV         dptr,#MASS4
                     953                    
04A2 120000   F      954                    CALL        xCIKLWR        ; MASS4 --> MASS5
04A5 90010C          955                             mov                     dptr,#MASS3
                     956     
04A8 120000   F      957                    CALL             xCIKLWR         ;MASS3->MASS4
04AB 900108          958                     MOV        dptr,#MASS2
                     959                    
04AE 120000   F      960                    CALL        xCIKLWR         ; MASS2 --> MASS3
04B1 900104          961                    MOV         dptr,#MASS1
                     962                     
04B4 120000   F      963                   CALL         xCIKLWR        ; MASS1 --> MASS2
04B7 900100          964                    MOV         dptr,#MASS0
                     965                   
04BA 120000   F      966                    CALL        xCIKLWR        ; MASS0 --> MASS1
                     967     
                     968                             
04BD 7862            969                             mov             r0,#rez_A
04BF 120000   F      970                             call    resar2          ;->r2..r5
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    16

                     971                                     ;call   aform
04C2 900100          972                                     mov                     dptr,#MASS0
04C5 120000   F      973                   call              saveIr2                 ; R2-R5 --> MAS0
                     974              
04C8 900107          975                   MOV          dptr,#MASS1+3
04CB 120000   F      976                   CALL       addx
04CE 90010B          977                   MOV          dptr,#MASS2+3
04D1 120000   F      978                   CALL       addx
04D4 90010F          979                   MOV          dptr,#MASS3+3
04D7 120000   F      980                  CALL        addx
04DA 900113          981                   MOV       dptr,#MASS4+3
04DD 120000   F      982                   call       addx
04E0 900117          983                     MOV        dptr,#MASS5+3
04E3 120000   F      984                  CALL        addx
04E6 90011B          985                   MOV          dptr,#MASS6+3
04E9 120000   F      986                   CALL       addx
04EC 90011F          987                   MOV          dptr,#MASS7+3
04EF 120000   F      988                  CALL        addx
04F2 900123          989                  MOV        dptr,#MASS8+3
04F5 120000   F      990                   call       addx
04F8 900127          991                     MOV                     dptr,#MASS9+3
04FB 120000   F      992                  call        addx
                     993     ;27
04FE 90012B          994                                     MOV        dptr,#MASS10+3
0501 120000   F      995                   CALL       addx
0504 90012F          996                                     MOV        dptr,#MASS11+3
0507 120000   F      997                   CALL       addx
050A 900133          998                   MOV          dptr,#MASS12+3
050D 120000   F      999                   CALL       addx
0510 900137         1000                   MOV          dptr,#MASS13+3
0513 120000   F     1001                  CALL        addx
0516 90013B         1002                   MOV       dptr,#MASS14+3
0519 120000   F     1003                   call       addx
051C 90013F         1004                                     MOV        dptr,#MASS15+3
051F 120000   F     1005                     CALL     addx
0522 900143         1006                   MOV          dptr,#MASS16+3
0525 120000   F     1007                   CALL       addx
0528 900147         1008                   MOV          dptr,#MASS17+3
052B 120000   F     1009                  CALL        addx
052E 90014B         1010                  MOV        dptr,#MASS18+3
0531 120000   F     1011                   call       addx
0534 90014F         1012                                     MOV                     dptr,#MASS19+3
0537 120000   F     1013                  call        addx
053A 802F           1014                                     jmp             endsum
                    1015     ;массив из 4х измерений
053C                1016     mas4:                   
053C 900108         1017                                             MOV        dptr,#MASS2
053F 120000   F     1018                    CALL        xCIKLWR         ; MASS2 --> MASS3
0542 900104         1019                    MOV         dptr,#MASS1
0545 120000   F     1020                    CALL        xCIKLWR        ; MASS1 --> MASS2
0548 900100         1021                    MOV         dptr,#MASS0
054B 120000   F     1022                    CALL        xCIKLWR        ; MASS0 --> MASS1
                    1023     
                    1024                             
054E 7862           1025                             mov             r0,#rez_A
0550 120000   F     1026                             call    resar2          ;->r2..r5
                    1027                                     ;call   aform
0553 900100         1028                                     mov                     dptr,#MASS0
0556 120000   F     1029                   call              saveIr2                 ; R2-R5 --> MAS0
                    1030              
0559 900107         1031                   MOV          dptr,#MASS1+3
055C 120000   F     1032                   CALL       addx
055F 90010B         1033                   MOV          dptr,#MASS2+3
0562 120000   F     1034                   CALL       addx
0565 90010F         1035                   MOV          dptr,#MASS3+3
0568 120000   F     1036                  CALL        addx
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    17

                    1037                  
                    1038             ;23.03          
056B                1039     endsum:
056B 786E           1040                                     mov             r0,#chmas;8.11.06               ;0..n(0..2,
                             0..10)
056D 06             1041                                     inc             @r0
056E E6             1042                                     mov             a,@r0   
056F 200105         1043                                     jb              bitmas,masfull          ;массив заполнен 2/
                             10 значениями
                    1044                                     
0572 B53F31         1045                                     cjne    a,chmasN,masx5
0575 D201           1046                                     setb    bitmas                  ;массив заполнен
0577 853F6E         1047     masfull:                mov             chmas,chmasN
057A 783F           1048                                     mov             r0,#chmasN
057C E6             1049                                     mov             a,@r0
                    1050     ;masfull:
057D B40208         1051                                     cjne    a,#2,nochn2
0580 900000   F     1052                                     MOV        DPTR,#ch2;10 
0583 120000   F     1053                                     CALL   ldc_ltemp                 ; ltemp <-- 2
0586 8028           1054                                     jmp             mas5div
                    1055     
0588 B40A08         1056     nochn2:         cjne    a,#10,nochn10
058B 900000   F     1057                                                     MOV        DPTR,#ch10 
058E 120000   F     1058                                     CALL   ldc_ltemp                 ; ltemp <-- 10
0591 801D           1059                                     jmp             mas5div
                    1060     
0593 B41408         1061     nochn10:        cjne    a,#20,nochn20
0596 900000   F     1062                                                     MOV        DPTR,#ch20 
0599 120000   F     1063                                     CALL   ldc_ltemp                 ; ltemp <-- 20
059C 8012           1064                                     jmp             mas5div
                    1065     
059E 900000   F     1066     nochn20:        MOV        DPTR,#ch4 
05A1 120000   F     1067                                     CALL   ldc_ltemp                 ; ltemp <-- 4
05A4 800A           1068                                     jmp             mas5div
                    1069     
05A6 856E0B         1070     masx5:                  mov     ltemp+3,chmas                   ;массив не заполнен
05A9 E4             1071                                     clr     a
05AA F50A           1072                                     mov     ltemp+2,a
05AC F509           1073                                     mov     ltemp+1,a
05AE F508           1074                                     mov     ltemp,a
                    1075     
05B0                1076     mas5div:
05B0 120000   F     1077                                     CALL       zdiv;divide                           ; R2-R5 =
                    1078                                              ; = (MAS0+MAS1+MAS2+MAS3+MAS4)/5
                    1079     
                    1080                             
                    1081      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1082     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1083     ;получен результат 3 байта и знак
05B3 7866           1084                             mov             r0,#rez_A1
05B5 120000   F     1085                             call    saver2           ;сохр среднее по массиву
                    1086     ;;8.11.06                       mov             chmasN,#0
                    1087      ;;;;;;;;;;;;
                    1088      ;;;;;;;;;;;;
05B8 C3             1089                             clr             c
05B9 799A           1090                             mov             r1,#parT
05BB 7402           1091                             mov             a,#2
05BD 97             1092                             subb    a,@r1
05BE 501D           1093                             jnc             ankor           ;T<3
                    1094                             ;A-=РЕЗ1                                ;T>3
05C0 120402         1095                             call    altof                   ;r2..r5->float
05C3 785E           1096                             mov             r0,#rez_Ame
05C5 120000   F     1097                             call    saver2
                    1098                             ;;;;
05C8 7890           1099                             mov             r0,#koefKp;->r8..r11
05CA EA             1100                             mov             a,r2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    18

05CB 30E702         1101                             jnb             acc.7,nminus3
05CE 7894           1102                             mov             r0,#koefKm;->r8..r11
05D0 120000   F     1103     nminus3:                call    resar8
05D3 120203         1104                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
05D6 785E           1105                             mov             r0,#rez_Ame
05D8 120000   F     1106                             call    saver2
05DB 8022           1107                             jmp             gotoKD
                    1108     
05DD                1109     ankor:  
05DD 7898           1110                             mov             r0,#chinkor
05DF E6             1111                             mov             a,@r0
05E0 30E703         1112                             jnb             acc.7,nokorr
                    1113                             ;коррекция 0
05E3 020000   F     1114                             jmp             kornul
05E6                1115     nokorr: 
                    1116                             ;mov            r10,#00         ;       chavt
                    1117                             ;mov            r11,#00h
05E6 7881           1118                             mov              r0,#chavt      
05E8 E6             1119                             mov                     a,@r0;call      chcmp           ;сравн счет
                             чик авто калибровки с 0h
05E9 30E750         1120                             jnb             acc.7,nonulavt;jnz              nonulavt        
05EC 750A00         1121                             mov             r10,#0;1;00;02          
05EF 750BC8         1122                             mov             r11,#0c8h;90h;0c8h;58h
05F2 7898           1123                             mov             r0,#chinkor
05F4 120000   F     1124                             call    chcmp
05F7 705E           1125                             jnz             noavk
                    1126                             ;автокалибровка
05F9 020000   F     1127                             jmp             autoka;noavk;
                    1128     
05FC 020000   F     1129     rafterK:                jmp             afterK
                    1130     ;;;;;;;;;;
05FF C3             1131      gotoKD:                clr             c
0600 799A           1132                             mov             r1,#parT
0602 7404           1133                             mov             a,#4
0604 97             1134                             subb    a,@r1
0605 50F5           1135                             jnc             rafterK         ;T<5
                    1136                             ;A1-=A- *KD                     ;T>5
0607 120000   F     1137                             call            findkoef                                ;r2,r3-hex
060A 12046C         1138                                     call            rebyte2                         ;r2..r5- he
                             x
                    1139                                     
060D 120402         1140                                     call    altof                   ;r2..r5->float
0610 900000   F     1141                                     mov     dptr,#CHtho;100000
0613 120000   F     1142                                     call    ldc_ltemp                       ;r8..r11
0616 1202B7         1143                                     call    fldiv
0619 120000   F     1144                                     call    move28
                    1145                             
061C 785E           1146                             mov             r0,#rez_Ame;->r2..r5   ???????????/
061E 120000   F     1147                             call    resar2
0621 120203         1148                                     call    flmul
0624 120343         1149                             call    ftol                    ;float->int
0627 7866           1150                             mov             r0,#rez_A1
0629 120000   F     1151                             call    saver2
062C 786A           1152                             mov             r0,#rez_A0;->r8..r11 hex
062E 120000   F     1153                             call    resar8
0631 120000   F     1154                             call    lsub            ;A3=A-1-A0
0634 789C           1155                             mov             r0,#rez_A3
0636 120000   F     1156                             call    saver2
0639 020000   F     1157                             jmp             labelB  
                    1158      ;;;;;;;;;;; 9.11.06
063C 789A           1159     nonulavt:        mov            r0,#parT
063E E6             1160                             mov             a,@r0
063F 6401           1161                             xrl             a,#01
0641 700F           1162                             jnz             avtdec1
0643 7982           1163                             mov             r1,#chavt+1     ;T=1 chavt-10
0645 120000   F     1164                             call    tenmin
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    19

0648 7999           1165     kordec10:       mov             r1,#chinkor+1
064A 120000   F     1166                             call    tenmin
064D 801B           1167                             jmp             rezmul
                    1168     
064F 020000   F     1169     rmo220:         jmp             mo220
                    1170     
0652 7981           1171     avtdec1:        mov             r1,#chavt       
0654 120000   F     1172                             call    chdec           ;chavt-1
                    1173     ;                       jmp             kordec1;rezmul
0657 789A           1174     noavk:          mov             r0,#parT
0659 E6             1175                             mov             a,@r0
065A 6401           1176                             xrl             a,#01
065C 7007           1177                             jnz             kordec1
                    1178                             ;T=1 chinkor-10
065E 7999           1179                     mov             r1,#chinkor+1
0660 120000   F     1180                             call    tenmin
0663 8005           1181                             jmp             rezmul
0665 7998           1182     kordec1:        mov             r1,#chinkor
0667 120000   F     1183                             call    chdec           ; chinkor-1
                    1184                        ;9.11.06
                    1185                             ;;;;;;;;;;;;;;
                    1186                             ;;;;;;;;;;;;;
                    1187     ;(РЕЗ1-АN)*K
066A                1188     rezmul:
066A 7866           1189                             mov             r0,#rez_A1;->r2..r5
066C 120000   F     1190                             call    resar2
066F 120402         1191                             call    altof   ;r2..r5->float  6.06    
0672 7884           1192                             mov             r0,#kor0_AN;->r8..r11
0674 120000   F     1193                             call    resar8
0677 1201D1         1194                             call    flsub
067A 7890           1195                             mov             r0,#koefKp;->r8..r11
067C EA             1196                             mov             a,r2
067D 30E702         1197                             jnb             acc.7,nminus
                    1198                             ;jnb            bitznak,nminus
                    1199                     
0680 7894           1200                             mov             r0,#koefKm;->r8..r11
0682 120000   F     1201     nminus:         call    resar8
0685 120203         1202                             call    flmul  ;результат в плавающем формате м.б. его сохранить?
0688 785E           1203                             mov             r0,#rez_Ame
068A 120000   F     1204                             call    saver2
                    1205      
068D                1206     afterK:                 
                    1207     ;;;;;;;;;;;;;;
068D EA             1208                                     mov             a,r2
068E 547F           1209                                     anl             a,#7fh
0690 FA             1210                                     mov             r2,a
0691 900000   F     1211                                     mov     dptr,#ch_250;220;220000
0694 120000   F     1212                                     call    ldc_ltemp                       ;r8..r11=8
0697 1201D6         1213                                     call    flcmp
069A 50B3           1214                                     jnc             rmo220          ;A>220000
                    1215                                     ;;;;;;;;;
069C 30156D         1216                                     jnb                     biteizm,notestizm
069F 78B1           1217                                     mov                     r0,#vichR
06A1 B62135         1218                                     cjne            @r0,#21h,note21
06A4 7A50           1219                                     mov                     r2,#50h                 ;-11a
06A6 7B18           1220                                     mov                     r3,#18h                 ;k8
06A8 12046C         1221                                     call            rebyte2                         ;r2..r5- he
                             x
06AB 120402         1222                                     call            altof                   ;r2..r5->float
06AE C002           1223                                     push            rr2
06B0 C003           1224                                     push            rr3
06B2 C004           1225                                     push            rr4
06B4 C005           1226                                     push            rr5
06B6 7A50           1227                                     mov                     r2,#50h                 ;k10
06B8 7B20           1228                                     mov                     r3,#20h
06BA 12046C         1229     re11_7: call            rebyte2                 ;r2..r5
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    20

06BD 120402         1230                                     call            altof                   ;r2..r5->float
06C0 120000   F     1231                                     call            move28
06C3 D005           1232                                     pop                     rr5
06C5 D004           1233                                     pop                     rr4
06C7 D003           1234                                     pop                     rr3
06C9 D002           1235                                     pop                     rr2
06CB 1202B7         1236                                     call            fldiv
06CE 900000   F     1237                                     mov                     dptr,#ch_10
06D1 120000   F     1238                                     call            ldc_ltemp                       ;r8..r11
06D4 120203         1239                                     call            flmul
06D7 8050           1240                                     jmp                     temul   
06D9 B62218         1241     note21: cjne            @r0,#22h,note22
06DC 7A50           1242                                     mov                     r2,#50h                 ;-09a
06DE 7B10           1243                                     mov                     r3,#10h                 ;k6
06E0 12046C         1244                                     call            rebyte2                         ;r2..r5- he
                             x
06E3 120402         1245                                     call            altof                   ;r2..r5->float
06E6 C002           1246                                     push            rr2
06E8 C003           1247                                     push            rr3
06EA C004           1248                                     push            rr4
06EC C005           1249                                     push            rr5
06EE 7A50           1250                                     mov                     r2,#50h                 ;k8
06F0 7B18           1251                                     mov                     r3,#18h
06F2 80C6           1252                                     jmp                     re11_7
06F4 7A50           1253     note22: mov                     r2,#50h                 ;-7a
06F6 7B08           1254                                     mov                     r3,#08h                 ;k4
06F8 12046C         1255                                     call            rebyte2                         ;r2..r5- he
                             x
06FB 120402         1256                                     call            altof                   ;r2..r5->float
06FE C002           1257                                     push            rr2
0700 C003           1258                                     push            rr3
0702 C004           1259                                     push            rr4
0704 C005           1260                                     push            rr5
0706 7A50           1261                                     mov                     r2,#50h                 ;k6
0708 7B10           1262                                     mov                     r3,#10h
070A 80AE           1263                                     jmp                     re11_7  
                    1264                                     ;;;;;;;;;
070C                1265     notestizm:
070C 301208         1266                                     jnb             bitklb,komulpz
070F 900000   F     1267                                     mov     dptr,#chk;100000
0712 120000   F     1268                                     call    ldc_long                        ;r2..r5
0715 8006           1269                                     jmp             komul
0717 120000   F     1270     komulpz:call            findkoef                                ;r2,r3-hex
071A 12046C         1271                                     call            rebyte2                         ;r2..r5- he
                             x
                    1272                                     
071D 120402         1273     komul:  call    altof                   ;r2..r5->float
0720 900000   F     1274                                     mov     dptr,#CHtho;100000
0723 120000   F     1275                             call    ldc_ltemp                       ;r8..r11=8
0726 1202B7         1276                                     call    fldiv
0729 120000   F     1277     temul:                          call    move28
072C 785E           1278                                     mov             r0,#rez_Ame
072E 120000   F     1279                                     call    resar2
                    1280                     
0731 120203         1281                                     call    flmul     ;A1-=A-*KD  fl
                    1282                                     
0734 120343         1283                                     call    ftol                    ;float->int
0737 7866           1284                                     mov             r0,#rez_A1
0739 120000   F     1285                                     call    saver2
073C 120402         1286                                     call    altof                   ;r2..r5->float
073F 900000   F     1287                                     mov     dptr,#ch_220;200;200000
0742 120000   F     1288                                     call    ldc_ltemp                       ;r8..r11=8
0745 1201D6         1289                                     call    flcmp
0748 5028           1290                                     jnc             rrmo220         ;A>200000
074A 301803         1291                                     jnb             knizm,noavp;goA2;               bitizm,goA2
                                  
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    21

074D 20052F         1292                                     jb              bitavp,yesavp   
0750 20065B         1293     noavp:                  jb              bitvi11,yesvich  ;уст после ввода A B (ввод ВЫЧИСЛИ
                             ТЬ)
0753                1294     goA2:                    ;A2=A1-
0753 7866           1295                                      mov            r0,#rez_A1
0755 120000   F     1296                                     call    resar2
0758 787B           1297                                     mov             r0,#rez_A2
075A 120000   F     1298                                     call    saver2
075D                1299     goA3A2:                  ;A3=A2-A0
075D 786A           1300                                       mov           r0,#rez_A0
075F 120000   F     1301                                     call    resar8
0762 120000   F     1302                                     call    lsub
0765 789C           1303                                     mov             r0,#rez_A3
0767 120000   F     1304                                     call    saver2
                    1305                                     ;;;;;;
076A                1306     goonin:            ;jmp         goonind;indA3;8.11.06
076A 78AC           1307                                     mov             r0,#chind
076C B60006         1308                                     cjne    @r0,#0,rnochi0
076F 020000   F     1309                                     jmp             goonind;indA3
                    1310     ;                               clr             P3.4
                    1311     ;                               nop
                    1312     ;                               nop
                    1313     ;                               setb    P3.4      ;??????????????????????/
                    1314     ;                               jmp             nop3_0
                    1315     
                    1316     ;                               jb              P3.0,nop3_0     ;;;;;;;;;;;;;;;;;;;;;;;;;;
                    1317     ;                               mov             r0,#rez_A0              ;r2..r5->rez_A0
                    1318     ;                               call    saver2                  ;ЗАПОМНИТЬ СМЕЩЕНИЕ НУЛЯ
                    1319     ;                               jmp             rebyte          ;age2
0772 020000   F     1320     rrmo220:                jmp             mo220
0775 020000   F     1321     rnochi0:                jmp             nochi0
0778 7866           1322     gokaA2:                 mov             r0,#rez_A1                      ;(float)
077A 120000   F     1323                                                     call    saver2                          ;то
                              необх для калибровки ,goA2 работает с тим знач
077D 80D4           1324                                             jmp             goA2
                    1325     ;;;;;;;;;;;;;;;;
077F EA             1326     yesavp:                 mov             a,r2
0780 547F           1327                                     anl             a,#7fh
0782 FA             1328                                     mov             r2,a
0783 900000   F     1329                                     mov     dptr,#ch_10th;10000
0786 120000   F     1330                                     call    ldc_ltemp                       ;r8..r11=8
0789 1201D6         1331                                     call    flcmp
078C 50C2           1332                                     jnc             noavp           ;A>10000        
078E 78AE           1333                                     mov             r0,#diap                ;10-11
0790 B60902         1334                                     cjne    @r0,#9,avpgo
0793 80BB           1335                                     jmp             noavp
0795                1336     avpgo:                  
0795 06             1337                                     inc             @r0             ;переключ диапазон на 1 поз
                             ицию вниз
0796 B60A01         1338                                     cjne    @r0,#0ah,clmasv
0799 16             1339                                     dec             @r0
079A                1340     clmasv:         ;сбросить массив
079A 120000   F     1341                             call    loadUS
                    1342                             ;call   louizm
079D 120000   F     1343                             call     clmassix
07A0 78B3           1344                                     mov             r0,#summa
07A2 120000   F     1345                                     call    clear4
07A5 786A           1346                                     mov             r0,#rez_A0
07A7 120000   F     1347                                     call    clear4
07AA D207           1348                                     setb            bitzus;bitbuf;;;;;;;;;;;;                  
                                                                                   
07AC 80BC           1349                                jmp     goonin
                    1350     
07AE                1351     yesvich:        ;A2=E/A1-+F
07AE 78C0           1352                                             mov             r0,#konstB
07B0 120000   F     1353                                     call    resar2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    22

07B3 120000   F     1354                                     call    move28
07B6 7866           1355                                     mov             r0,#rez_A1
07B8 120000   F     1356                                     call    resar2                          ;HEX
                    1357                                     
07BB 120402         1358                                     call            altof                   ;r2..r5->float
07BE EA             1359                                     mov             a,r2                    ;модуль
07BF 547F           1360                                     anl             a,#7fh
07C1 FA             1361                                     mov             r2,a
07C2 120166         1362                                     call            fladd                           ;A1+B
                    1363                                     
07C5 900000   F     1364                                     mov     dptr,#CH_500;
07C8 120000   F     1365                                     call    ldc_ltemp                       ;r8..r11
07CB 1201D6         1366                                     call    flcmp
07CE 4073           1367                                     jc                      mo500R;error <500 >22000
07D0 900000   F     1368                                     mov     dptr,#CH_22T;
07D3 120000   F     1369                                     call    ldc_ltemp                       ;r8..r11
07D6 1201D6         1370                                     call    flcmp
07D9 5074           1371                                     jnc             mo500I          ;error
                    1372                                     ;;;;;;;;;;;;
07DB 120000   F     1373                                     call            move28
07DE C008           1374                                     push            r8
07E0 C009           1375                                     push            r9
07E2 C00A           1376                                     push            r10
07E4 C00B           1377                                     push            r11
07E6 78BC           1378                                     mov             r0,#konstA
07E8 120000   F     1379                                     call    resar2
07EB 900000   F     1380                                     mov             dptr,#CH_B
07EE 120000   F     1381                                     CALL   ldc_ltemp                 ; ltemp <-- 10-7
07F1 120203         1382                                     call            flmul                           ;A*10-7
07F4 D00B           1383                                     pop                     r11
07F6 D00A           1384                                     pop                     r10
07F8 D009           1385                                     pop                     r9
07FA D008           1386                                     pop                     r8
07FC 1202B7         1387                                     call            fldiv                   ;результат R
07FF 78C9           1388                                     mov                     r0,#rez_R
0801 120000   F     1389                                     call            saver2
0804 120343         1390                                     call            ftol                    ;float->hex
                    1391                                     ;;;;;;;;;;
0807 784F           1392                                             mov             r0,#abin
0809 120000   F     1393                                             call    saver2
                    1394     ;;;;;;;;
080C 7840           1395                                                     mov             r0,#bufind
080E                1396     age9:
080E 7620           1397                             mov             @r0,#" "          ;погасить индикатор
0810 08             1398                             inc             r0
0811 B84BFA         1399                             cjne    r0,#bufind+11,age9
                    1400                                             
0814 78C9           1401                                             mov             r0,#rez_R
0816 120000   F     1402                                             call            resar2
                    1403     ;;;;;;;;;;
0819 900000   F     1404                                     mov             dptr,#CH_fl
081C 120000   F     1405                                     CALL   ldc_ltemp
081F 1202B7         1406                                     call            fldiv
                    1407     
0822 78B8           1408                                     mov             r0,#work                ;степень +
0824 7600           1409                                     mov             @r0,#0
0826 78B9           1410                                     mov             r0,#work+1;степень -
0828 7600           1411                                     mov             @r0,#0
082A 900000   F     1412     compa1: mov     dptr,#ch_1;
082D 120000   F     1413                                     call    ldc_ltemp                       ;r8..r11
0830 1201D6         1414                                     call    flcmp
0833 4026           1415                                     jc              equ0            ;<1
0835 78B8           1416                                     mov             r0,#work                        ;степень +
0837 06             1417                                     inc             @r0
0838 900000   F     1418                                     mov             dptr,#ch_10;
083B 120000   F     1419                                     call    ldc_ltemp                       ;r8..r11
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    23

083E 1202B7         1420                                     call            fldiv
0841 80E7           1421                                     jmp             compa1                          ;work значе
                             ние степени n(hex)  
                    1422                                     ;;;;;;;;;;;;;;;;;;;
0843 900000   F     1423     mo500R: mov             dptr,#teOLR
0846 120000   F     1424                               call          lotext           
0849 120000   F     1425                                     call            ind
084C 020000   F     1426                                     jmp                     nobavp;nobitizm
084F 900000   F     1427     mo500I: mov             dptr,#teOLI
0852 120000   F     1428                               call          lotext           
0855 120000   F     1429                                     call            ind
0858 020000   F     1430                                     jmp                     nobavp;nobitizm
085B                1431     equ0:           ;;;;;   call            ftol                    ;float->int
085B 78B8           1432                                     mov             r0,#work                ;степень +
085D B60019         1433                                     cjne    @r0,#0,equ00
                    1434                                     
0860 900000   F     1435     compa2: mov     dptr,#ch_1;
0863 120000   F     1436                                     call    ldc_ltemp                       ;r8..r11
0866 1201D6         1437                                     call    flcmp
0869 500E           1438                                     jnc             equ00           ;>1
086B 78B9           1439                                     mov             r0,#work+1                      ;степень -
086D 16             1440                                     dec             @r0                                        
                                          ;0,ff(-1),fe(-2)...
086E 900000   F     1441                                     mov             dptr,#ch_10;
0871 120000   F     1442                                     call    ldc_ltemp                       ;r8..r11
0874 120203         1443                                     call            flmul
0877 80E7           1444                                     jmp             compa2                          ;work значе
                             ние степени n(hex)  
                    1445     
                    1446     
0879                1447     equ00:          
0879 7853           1448                                                     mov             r0,#adec
087B 7952           1449                                             mov             r1,#abin+3      ;hex->10
087D 120000   F     1450                                             call    bindec
                    1451     
                    1452                                                     ;если степень полож убирать младший байт
                    1453                                                     ;чтобы уложиться в 5 разрядов, если отриц р
                             асполагать
                    1454                                                     ;число в bufind..bufind+5
0880 78B8           1455                                             mov             r0,#work
0882 B60021         1456                                             cjne    @r0,#0,outr
0885 08             1457                                             inc             r0                      ;work+1
0886 B6FF05         1458                                             cjne            @r0,#0ffh,bufr3         ;6разрядов 
                             нужно вывести 5
0889 06             1459                                             inc                     @r0;!!!!!!!!!?
088A 785B           1460                                             mov                     r0,#adec+8;разместить в буф
                             ер индикации R
088C 8003           1461                                             jmp                     bufr30
                    1462                                             ;;;;;;;;;;;;;;
088E 06             1463     bufr3:          inc             @r0                     ;?!!!!!!!!n+1
088F 785C           1464                                                     mov             r0,#adec+9
0891 7945           1465     bufr30:         mov             r1,#bufind+5;6
0893 7F05           1466                                             mov             r7,#5;7
0895 E6             1467     bufr2:                          mov             a,@r0
0896 2430           1468                                             add             a,#30h
0898 F7             1469                                             mov             @r1,a
0899 19             1470                                             dec             r1
089A 18             1471                                             dec             r0
089B DFF8           1472                                             djnz    r7,bufr2
                    1473     
089D 784F           1474                                             mov             r0,#abin
089F 120000   F     1475                                             call            clear4
08A2 78B9           1476                                             mov             r0,#work+1
08A4 801C           1477                                     jmp             outr5
                    1478     ;work!=0 значит после дел на 10**9 получили число > с чем 6 разрядов                       
                                          
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    24

08A6 785C           1479     outr:                   mov             r0,#adec+9;разместить в буфер индикации R
08A8 C3             1480                                             clr             c
08A9 79B8           1481                                             mov             r1,#work
08AB E8             1482                                             mov             a,r0
08AC 14             1483                                             dec             a                                  
                                  ;n-1
08AD 97             1484                                             subb    a,@r1
08AE F8             1485                                             mov             r0,a                    ;adec+9-n !
                             !!!!!!!!!!!!!!
08AF 7945           1486                                     mov             r1,#bufind+5;т к число разрядов > чем знако
                             мест
08B1 7F05           1487                                             mov             r7,#5;7
08B3 E6             1488     bufr:                           mov             a,@r0
08B4 2430           1489                                             add             a,#30h
08B6 F7             1490                                             mov             @r1,a
08B7 19             1491                                             dec             r1
08B8 18             1492                                             dec             r0
08B9 DFF8           1493                                             djnz    r7,bufr
                    1494     
08BB 784F           1495                                             mov             r0,#abin
08BD 120000   F     1496                                             call            clear4
08C0 78B8           1497                                     mov             r0,#work
08C2 E6             1498     outr5:                  mov             a,@r0
08C3 F552           1499                                             mov             abin+3,a
                    1500                                                                     ;n(hex)->abin
08C5 120000   F     1501                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
08C8 2552           1502                                             add             a,abin+3
08CA F552           1503                                             mov             abin+3,a
08CC 7853           1504                                             mov             r0,#adec
08CE 7952           1505                                             mov             r1,#abin+3      ;hex->10
08D0 120000   F     1506                                             call    bindec
08D3 855C48         1507                                             mov             bufind+8,adec+9
08D6 855B47         1508                                             mov             bufind+7,adec+8
08D9 754966         1509                                             mov             bufind+9,#66h
08DC 020000   F     1510                                             jmp             nobavp;nobitizm;        goonin;call
                                  ind
                    1511                                             
                    1512                                     ;;;;;;;;;;;;;;;;;;;;;
                    1513     ;;;;;;;;;;;;;
                    1514     
08DF 300508         1515     mo220:             jnb          bitavp,indoll
08E2 301805         1516                                jnb          knizm,indoll;bitizm,indoll
08E5 78AE           1517                                     mov             r0,#diap
08E7 B6000B         1518                                     cjne    @r0,#0,nodi2
                    1519                                ;10-2
08EA 900000   F     1520     indoll:                 mov             dptr,#teOLL;OLL
08ED 120000   F     1521                                     call    lotext
08F0 D217           1522                                     setb    bitoll
08F2 020000   F     1523                                     jmp             goonin  
                    1524     
08F5 16             1525     nodi2:             dec          @r0     ;переключить на 1 позицию вверх
                    1526     
08F6 B6FF01         1527                                     cjne    @r0,#0ffh,nodi9
08F9 06             1528                                     inc             @r0
                    1529     
08FA 120000   F     1530     nodi9:          call    loadUS
                    1531                                     ;call   louizm
                    1532                                     ;сбросить массив
08FD 120000   F     1533                                     call     clmassix
0900 78B3           1534                                     mov             r0,#summa
0902 120000   F     1535                                     call    clear4
0905 786A           1536                                     mov             r0,#rez_A0
0907 120000   F     1537                                     call    clear4  
090A D207           1538                                     setb    bitzus;bitbuf   ;флаг задержки  после установки us 
                                                                           
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    25

090C 020000   F     1539                                jmp     goonin
                    1540     
090F 16             1541     nochi0:                 dec             @r0                     ;СТИ-1
0910 020000   F     1542                                     jmp             labelB  
                    1543     
                    1544             
                    1545     ;;;;;;;;;;;;;;;
                    1546     
0913                1547     nop3_0: ;;      ;rez_A-rez_A0
                    1548                     ;;                      mov             r0,#rez_A0
                    1549                     ;;                      call    resar8
                    1550                     ;;                      call    lsub
                    1551                     ;;                      mov             r0,#rez_A
                    1552                     ;;;                     call    saver2
                    1553      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0913 789C           1554      indA3:                         mov             r0,#rez_A3       ;A3 ->в десятич форму(6дес
                              разрядов и в кои)
0915 120000   F     1555                                             call    resar2
0918 900000   F     1556                                             mov             dptr,#ch100              
091B 120000   F     1557                                             call    ldc_ltemp        
091E 120000   F     1558                                             call    zdiv            ;rez_A3/100=r2..r5
                    1559                                     
0921 EC             1560                                             mov             a,r4
0922 20E71E         1561                                             jb              acc.7,aless0
0925 4408           1562                                             orl             a,#08                   ;rez_A>0 d1
                             1=1
0927 F5D3           1563                                             mov             DAC0H,a
                    1564                                                                             ;мл байт
0929 ED             1565                                             mov             a,r5
092A F5D2           1566                                             mov             DAC0L,a
092C 801E           1567                                             jmp             moveA3;
                    1568     
092E B70207         1569     no3parN:                        cjne    @r1,#2,no2parN
                    1570                                             ;в байт 0  записать пробел
0931 7946           1571                                             mov             r1,#bufind+6
0933 7720           1572                                             mov             @r1,#" ";0fdh;
0935 020000   F     1573                                             jmp             seeind;moveA3
                    1574     
0938                1575     no2parN:                        ;в байты 0 и 1 записать пробел
0938 7945           1576                                             mov             r1,#bufind+5
093A 7720           1577                                             mov             @r1,#" ";0fdh;" "
093C 09             1578                                             inc             r1
093D 7720           1579                                             mov             @r1,#" ";0fdh;" "
093F 8079           1580                                             jmp             seeind;moveA3
0941 8077           1581      rseeind:               jmp             seeind
0943 F4             1582     aless0:                         cpl             a
0944 54F7           1583                                             anl             a,#0f7h         ;d11=0
0946 F5D3           1584                                             mov             DAC0H,a
                    1585                                                                             ;мл байт
0948 ED             1586                                             mov             a,r5
0949 F4             1587                                             cpl             a
094A F5D2           1588                                             mov             DAC0L,a
094C                1589     goonind:                  ; ВЫДАЧА НА ИНДИКАТОР РЕЗУЛЬТАТА
                    1590                                     
                    1591                                             
094C                1592     moveA3: ;нажата кн вычR не выдавать на индикатор не портить bufind..
                    1593                     ;по нажатию кн по прерыванию по выходу из прерыв прог доходит
                    1594                     ;до конца цикла измерения результат не размещать в буфере
                    1595                     ;не забывать сбрасывать по выходу из режима обр кнопки 
                    1596                     ;и возврату в режим измерения
094C 201456         1597                                             jb              bitvich,rnorvich
094F 201053         1598                                             jb              bitt2,rnorvich
0952 2017EC         1599                                             jb              bitoll,rseeind
                    1600                                             
0955 2011E9         1601                                             jb              bitmenu,rseeind
0958 200BE6         1602                                             jb              bitmem,rseeind
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    26

                    1603     ;;;;;;;;;;;;;;
                    1604                                             ; mov           r0,#rez_A3
                    1605                                             ;call   resar2
                    1606                                             ;call   ftol                    ;float->int r2..r5
                    1607     ;;;;;;;;
095B 789C           1608                                             mov             r0,#rez_A3;->r2..r5       передать 
                             A3 в индикатор
095D 120000   F     1609                                             call    resar2;????????????????17.01.07
                    1610                                     
0960 120000   F     1611                                             call    maform
0963 784F           1612                                             mov             r0,#abin
0965 120000   F     1613                                             call    saver2
                    1614     ;;;;;;;;
                    1615                                             
0968 7853           1616                                             mov             r0,#adec
096A 7952           1617                                             mov             r1,#abin+3      ;hex->10
096C 120000   F     1618                                             call    bindec
                    1619                                     
096F 785C           1620                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
0971 7946           1621                                             mov             r1,#bufind+6
0973 7F07           1622                                             mov             r7,#7
0975 E6             1623     bufdec:                         mov             a,@r0
0976 2430           1624                                             add             a,#30h
0978 F7             1625                                             mov             @r1,a
0979 19             1626                                             dec             r1
097A 18             1627                                             dec             r0
097B DFF8           1628                                             djnz    r7,bufdec
097D 7847           1629                                             mov             r0,#bufind+7
097F 762D           1630                                             mov             @r0,#2dh          ;-2..-9
0981 7840           1631                                             mov             r0,#bufind
0983 762B           1632                                             mov             @r0,#2bh
0985 300202         1633                                             jnb             znmat,nozzmi;bitznak,nozzmi
0988 762D           1634                                             mov             @r0,#2dh
098A 79AE           1635     nozzmi:                         mov             r1,#diap
098C 7848           1636                                             mov             r0,#bufind+8
098E E7             1637                                             mov             a,@r1
098F B40808         1638                                             cjne    a,#8,nodi8
0992 7630           1639                                             mov             @r0,#30h                 ;10-10
0994 18             1640                                             dec             r0
0995 7663           1641                                             mov             @r0,#63h;31h
0997 08             1642                                             inc             r0
0998 8012           1643                                             jmp             seegoon
099A B4090C         1644     nodi8:                          cjne    a,#9,nodis9
                    1645                                     
099D 7631           1646                                             mov             @r0,#31h           ;10-11
099F 18             1647                                             dec             r0
09A0 7663           1648                                             mov             @r0,#63h;31h
                    1649                                     
09A2 08             1650                                             inc             r0
09A3 8007           1651                                             jmp             seegoon
                    1652     
09A5 807C           1653     rnorvich:               jmp             norvich
09A7 8085           1654     rno3parN:               jmp             no3parN
                    1655     
09A9 2432           1656     nodis9:                         add             a,#32h
09AB F6             1657                                             mov             @r0,a;#37h;"T";
09AC 08             1658     seegoon:                        inc             r0
09AD 7641           1659                                             mov             @r0,#"A";"E";
09AF 08             1660                                             inc             r0
09B0 7600           1661                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
09B2 08             1662                                             inc             r0;             mov             buf
                             ind+11
09B3 7610           1663                                             mov             @r0,#010h               ;bufind+11.
                             4 точка после первой цифры
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    27

                    1664                                             
                    1665     ;;;;;;;;;;;;;;;
                    1666     ;;;;;;goonind:
09B5 79AF           1667                                             mov             r1,#parN        ; ??????
09B7 B703ED         1668                                             cjne    @r1,#3,rno3parN ;  8.11.06
                    1669             
09BA                1670     seeind:                         ;;;;;;;;;;;;;
09BA 784A           1671                                             mov             r0,#bufind+10
09BC E6             1672                                             mov             a,@r0
09BD 300F03         1673                                             jnb             bitnul,nnnul
09C0 4408           1674                                             orl             a,#08h
09C2 F6             1675                                             mov             @r0,a
09C3 799A           1676      nnnul:                         mov             r1,#parT
09C5 B70304         1677                                             cjne    @r1,#3,nsec01
09C8 4410           1678                                             orl             a,#10h
09CA 800C           1679                                             jmp             nsec10   ;0,1s
09CC B70204         1680      nsec01:                        cjne    @r1,#2,nsec1
09CF 4420           1681                                             orl             a,#20h    ;1s
09D1 8005           1682                                             jmp             nsec10
09D3 B70102         1683     nsec1:                          cjne    @r1,#1,nsec10
09D6 4440           1684                                             orl             a,#40h
                    1685     
                    1686     ;;;;;;;;;;;;;;;;
09D8 784A           1687     nsec10:                 mov             r0,#bufind+10   
09DA F6             1688                                             mov             @r0,a
09DB 300504         1689                                             jnb             bitavp,nobavp
09DE 4404           1690                                             orl             a,#04           ;bufind+10.2
09E0 F6             1691                                             mov             @r0,a
09E1 F6             1692                                             mov             @r0,a   
09E2 784A           1693     nobavp:         mov             r0,#bufind+10   
09E4 F6             1694                                             mov             @r0,a   
09E5 301803         1695                                        jnb          knizm,nobitizm
09E8 4402           1696                                             orl             a,#02
09EA F6             1697                                              mov            @r0,a
09EB                1698     nobitizm:                       
09EB 301A07         1699                                             jnb             bitakt,notakt
09EE C21A           1700                                             clr             bitakt
09F0 534AFE         1701                                             anl             bufind+10,#0feh
09F3 8005           1702                                             jmp             taktind
09F5 D21A           1703     notakt:                         setb    bitakt
09F7 434A01         1704                                             orl             bufind+10,#01                      
                                          
09FA                1705     taktind:                
                    1706     ;;;;;;;;;
09FA 301517         1707                                             jnb             biteizm,yesind
09FD 79B1           1708                                             mov             r1,#vichR
09FF 7848           1709                                             mov             r0,#bufind+8
0A01 B72107         1710                                             cjne    @r1,#21h,test9i
0A04 7631           1711                                             mov             @r0,#31h;11A
0A06 18             1712                                             dec             r0
0A07 7663           1713                                             mov             @r0,#63h
0A09 8009           1714                                             jmp             yesind
0A0B B72204         1715     test9i:         cjne    @r1,#22h,test7i
0A0E 7639           1716                                             mov             @r0,#39h;09A
0A10 8002           1717                                             jmp             yesind
0A12 7637           1718     test7i:         mov             @r0,#37h;07A
                    1719                                     
                    1720     ;;;;;;;;;
0A14                1721     yesind:         
0A14 301203         1722                                             jnb             bitklb,noklb
0A17 434A80         1723                                             orl             bufind+10,#80h; on kmp
0A1A 300A03         1724     noklb:          jnb             bitbon,nobuf
0A1D 434B02         1725                                             orl             bufind+11,#02h; on pysk
0A20 120000   F     1726     nobuf:          call    ind        ;пп выдачи на индикатор
0A23                1727     norvich: 
0A23 789A           1728                                     mov             r0,# parT
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    28

0A25 79AC           1729                                             mov             r1,#chind
0A27 B60152         1730                                             cjne    @r0,#1,rnot1in
0A2A                1731     labelB:                    ;;;;;;;;;;;
                    1732                                             ;сдвиг по алгоритму чтобы посмотреть в цапе 
0A2A 789F           1733                                                     mov     r0,#rez_A3+3
                    1734                             ;;;;;;;;
0A2C 79BB           1735                             mov             r1,#work+3
0A2E E6             1736                             mov             a,@r0
0A2F 7F07           1737                             mov             r7,#7;кол сдв вправо
0A31 C3             1738     dvig3:          clr             c
0A32 13             1739                             rrc             a
0A33 DFFC           1740                             djnz    r7,dvig3 ;d7,d6,d5        мл байт
0A35 FA             1741                             mov             r2,a    ;сохр байт
0A36 18             1742                             dec             r0              ;rez_A3+2
0A37 E6             1743                             mov             a,@r0
0A38 C0E0           1744                             push    acc
0A3A C3             1745                             clr             c
0A3B 7F01           1746                             mov             r7,#1
0A3D C3             1747     dvig2:          clr             c
0A3E 33             1748                             rlc             a
0A3F DFFC           1749                             djnz    r7,dvig2 ;d12..d11       средний байт
0A41 4A             1750                             orl             a,r2
0A42 F7             1751                             mov             @r1,a;сформ мл байт
0A43 19             1752                             dec             r1
0A44 D0E0           1753                             pop             acc
                    1754                             
0A46 7F07           1755                             mov             r7,#7
0A48 C3             1756     dvig1:          clr             c
0A49 13             1757                             rrc             a
0A4A DFFC           1758                             djnz    r7,dvig1 ;d18     ср байт
0A4C FA             1759                             mov             r2,a   ;сохр
0A4D 18             1760                             dec             r0
0A4E E6             1761                             mov             a,@r0 ;rez_A3+1
0A4F C0E0           1762                             push    acc
                    1763                     
0A51 7F01           1764                             mov             r7,#1
0A53 C3             1765     dvig0:          clr             c
0A54 33             1766                             rlc             a
0A55 DFFC           1767                             djnz    r7,dvig0 ;        d21..d16
0A57 4A             1768                             orl             a,r2
0A58 F7             1769                             mov             @r1,a   ; сформ средний  байт
0A59 19             1770                             dec             r1
0A5A D0E0           1771                             pop             acc       ;rez_A3+1
                    1772                             ;;;;;;;;;;;;;;
                    1773     ;                       jb              acc.7,dvm
0A5C C3             1774                             clr             c
0A5D 7F07           1775                             mov             r7,#7
0A5F C3             1776     dvig4:          clr             c
0A60 13             1777                             rrc             a
0A61 DFFC           1778                             djnz    r7,dvig4 ;        d22
0A63 FA             1779                             mov             r2,a   ;сохр
0A64 18             1780                             dec             r0;     rez_A3
0A65 E6             1781                             mov             a,@r0
                    1782                             ;;;;;
0A66 7F01           1783                             mov             r7,#1
0A68 C3             1784     vig0:           clr             c
0A69 33             1785                             rlc             a
0A6A DFFC           1786                             djnz    r7,vig0 ;         d24..d30
0A6C 4A             1787                             orl             a,r2
0A6D F7             1788                             mov             @r1,a   ; сформ   байт
0A6E 19             1789                             dec             r1
0A6F E6             1790                             mov             a,@r0
                    1791                             ;;;;;
0A70 20E70C         1792                             jb              acc.7,dvm
0A73 C3             1793                             clr             c
0A74 7F07           1794                             mov             r7,#7
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    29

0A76 C3             1795     vig4:           clr             c
0A77 13             1796                             rrc             a
0A78 DFFC           1797                             djnz    r7,vig4 ;         d
0A7A 8009           1798                             jmp             endsdv
                    1799     
0A7C 020000   F     1800     rnot1in:                jmp             not1in
                    1801     
                    1802     ;;;;;;;;;;;;                                    
0A7F 7F07           1803     dvm:            mov             r7,#7
0A81 D3             1804     dvig6:          setb            c
0A82 13             1805                             rrc             a
0A83 DFFC           1806                             djnz    r7,dvig6 ;        d31
0A85 F7             1807     endsdv:         mov             @r1,a
                    1808                                                             
                    1809      ;->work   
                    1810                             
0A86 900000   F     1811                             mov             dptr,#chzap
0A89 120000   F     1812                             call     ldc_long
0A8C 78BB           1813                              mov            r0,#work+3
0A8E 120000   F     1814                             call    ladd
0A91 ED             1815                             mov             a,r5
0A92 F5D5           1816                             mov             DAC1L,a
                    1817                             
0A94 EC             1818                             mov             a,r4
0A95 F5D6           1819                             mov             DAC1H,a
                    1820     
                    1821                                             ;;;;;;;;;;
0A97 78CF           1822                                             mov                     r0,#chbuf       
0A99 120000   F     1823                                             call            resar2  
0A9C 900000   F     1824                                             mov                     dptr,#ch_1       
0A9F 120000   F     1825                                             call            ldc_ltemp
0AA2 1201D1         1826                                             call            flsub
0AA5 78CF           1827                                             mov                     r0,#chbuf       
0AA7 120000   F     1828                                             call            saver2  
0AAA 900000   F     1829                                             mov                     dptr,#ch_1
0AAD 120000   F     1830                                             call            ldc_ltemp
0AB0 1201D6         1831                                             call            flcmp
                    1832                                             
                    1833                                             
                    1834                                             
0AB3 505D           1835                                             jnc                     nobuf0
0AB5 200905         1836                                             jb              bitprd,yesprd   ;передать   A3 в бу
                             фер
0AB8 200A04         1837                                             jb              bitbon,yesbuf   ;записать   A3 в бу
                             фер
0ABB 8045           1838                                             jmp             gocikle
                    1839     
0ABD                1840     yesprd: ;передать   A3 в буфер
0ABD 8009           1841                                             jmp             goonT
0ABF                1842     yesbuf:         ;записать   A3 в буфер
0ABF 120000   F     1843                                             call            resa_hl;dptr-
0AC2 120000   F     1844                                             call            loA3_X  ;адрес след ячейки внешн оз
                             у храним
                    1845                                                                             ;в ячейке saven_bl
0AC5 120000   F     1846                                             call            save_hl
                    1847                                             
0AC8 78CD           1848     goonT:                          mov             r0,#interva;high  byte loadr2
0ACA E6             1849                                             mov             a,@r0
0ACB FC             1850                                             mov             r4,a
0ACC 08             1851                                             inc             r0
0ACD E6             1852                                             mov             a,@r0
0ACE FD             1853                                             mov             r5,a
0ACF E4             1854                                             clr             a
0AD0 FB             1855                                             mov             r3,a
0AD1 FA             1856                                             mov             r2,a                            ;r2
                             ..r5-interval(hex)
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    30

0AD2 120402         1857                                             call            altof                   ;r2..r5->in
                             terval (float)
                    1858     
0AD5 789A           1859                                                                             mov             r0,
                             #parT
0AD7 B60110         1860                                                                     cjne    @r0,#1,nott1
                    1861                                     
0ADA 900000   F     1862                                     mov                     dptr,#ch_2       
0ADD 120000   F     1863                                     call            ldc_ltemp
0AE0 120203         1864     intmul: call            flmul
0AE3 78CF           1865                                     mov                     r0,#chbuf
0AE5 120000   F     1866                                     call            saver2          ;*2
0AE8 8018           1867                                     jmp             gocikle
                    1868     
0AEA B60208         1869     nott1:                  cjne    @r0,#2,nott2
0AED 900000   F     1870                                                     mov                     dptr,#ch_10      
0AF0 120000   F     1871                                     call            ldc_ltemp
0AF3 80EB           1872                                     jmp                     intmul                             
                                  ;*10
                    1873     
0AF5 B60502         1874     nott2:                  cjne    @r0,#5,nott5
                    1875     
0AF8 8008           1876                                             jmp             gocikle
                    1877     
0AFA C3             1878     nott5:           clr            c
0AFB 799A           1879                             mov             r1,#parT
0AFD 7404           1880                             mov             a,#4
0AFF 97             1881                             subb    a,@r1
0B00 500E           1882                             jnc             yestt5          ;T<5
0B02 300708         1883     gocikle:        jnb             bitzus,nofz;bitbuf,nofz                                 
0B05 120000   F     1884                             call    z_05s    ;0,5c
0B08 120000   F     1885                             call    z_05s    ;0,5c
0B0B C207           1886                             clr     bitzus;bitbuf бит задержки засылки us
0B0D 020000   F     1887     nofz:           jmp     labelA;rebyte
                    1888     
                    1889     
0B10 80F0           1890     yestt5:         jmp             gocikle
                    1891     
0B12 78CF           1892     nobuf0:                         mov             r0,#chbuf
0B14 120000   F     1893                                                             call            resar2
0B17 900000   F     1894                                                                     mov                     dpt
                             r,#ch_1       
0B1A 120000   F     1895                                     call            ldc_ltemp
0B1D 1201D1         1896                                     call            flsub
0B20 80E0           1897                                             jmp             gocikle
                    1898     
                    1899     
0B22 B60205         1900     not1in:                         cjne    @r0,#2,not2in
0B25 7701           1901                                             mov             @r1,#1           ;T=2
0B27 020000   F     1902                                             jmp     labelB
                    1903     
0B2A B60305         1904     not2in:                         cjne    @r0,#3,not3in
0B2D 7709           1905                                             mov             @r1,#9          ;T=3
0B2F 020000   F     1906                                             jmp     labelB
0B32 7713           1907     not3in:                         mov             @r1,#19
0B34 020000   F     1908                                             jmp     labelB
                    1909     
                    1910     
                    1911     ;;;;;;;;;;;3.11.06
                    1912     
                    1913     ;;коррекция 0
0B37 7883           1914     KORnul:         mov             r0,#chdel
0B39 B60008         1915                             cjne    @r0,#0,nonuldel
                    1916                                     
                    1917                     ;       mov             a,P5       ;p5.3=1
                    1918                     ;       orl             a,#08
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    31

                    1919                     ;       mov             P5,a
                    1920                     ;       nop
                    1921                     ;       nop
                    1922                                     
                    1923                     ;       mov             a,P5              ;p5.0=0
                    1924                     ;       anl             a,#0feh
                    1925                     ;       mov             P5,a
                    1926             
0B3C 900000   F     1927                             mov             dptr,#kor0us
0B3F 120000   F     1928                             call    lospus          ;упр слово коррекции 0
0B42 8013           1929                             jmp             chdelmo
                    1930     
0B44                1931     nonuldel:       ;cjne   @r0,#7,no4del
0B44 B60316         1932                                                     cjne    @r0,#3,no4del
                    1933                             ;рез ->AN
0B47 7862           1934                             mov             r0,#rez_A;->r2..r5
0B49 120000   F     1935                             call    resar2
                    1936                     ;       mov             a,reacp         ;r2..r5 &&&&&&&&&&&
                    1937                     ;               mov             r2,a
                    1938                     ;               mov             a,reacp+1
                    1939                     ;               mov             r3,a
                    1940                     ;               mov             a,reacp+2
                    1941                     ;               mov             r4,a
                    1942                     ;               mov             a,reacp+3
                    1943                     ;               mov             r5,a
                    1944                                     ;;;;;;;;;;
0B4C 120402         1945                             call    altof           ;r2..r5->float
0B4F 7884           1946                             mov             r0,#kor0_AN;->kor0_AN
0B51 120000   F     1947                             call    saver2
                    1948                                     
                    1949                     ;       mov             a,P5            ;p5.0=1
                    1950                     ;       orl             a,#01
                    1951                     ;       mov             P5,a
                    1952                     ;       nop
                    1953                     ;       nop
                    1954                                     
                    1955                     ;       mov             a,P5                    ;p5.3=0 
                    1956                     ;       anl             a,#0f7h
                    1957                     ;       mov             P5,a                    
0B54 120000   F     1958                             call    loadUS          ;восстан исходное упр слово
0B57 7883           1959     chdelmo:        mov             r0,#chdel
0B59 06             1960                             inc             @r0             ;chdel+1
0B5A 020000   F     1961                             jmp              rebyte
                    1962     
0B5D                1963     no4del:         ;cjne   @r0,#14,chdelmo
0B5D B606F7         1964                                             cjne    @r0,#6,chdelmo
0B60 7600           1965                             mov             @r0,#0          ;chdel
0B62 7898           1966                             mov             r0,#chinkor
0B64 7600           1967                             mov             @r0,#00;1;00;02;600;
0B66 08             1968                             inc             r0
0B67 76C8           1969                             mov             @r0,#0c8h;90h;0c8h;58h;258h
0B69 120000   F     1970                             call    clmassix;сбросить массив скольз среднего
0B6C 020000   F     1971                             jmp              rebyte
                    1972     
                    1973     ;автокалибровка
0B6F                1974     autoka:  ;;  mov                r0,#chavt
                    1975                      ;;  call               chcmp
                    1976                      ;;  jz         nulavt
                    1977                     ;;   mov                r1,#chavt
                    1978                     ;;   call               chdec;chavt-1
                    1979                      ;; jmp         rebyte
0B6F                1980     nulavt:  ;;;;;
0B6F 7883           1981                             mov             r0,#chdel
0B71 B6000E         1982                             cjne    @r0,#0,nndelch
0B74 E585           1983                             mov   a,p5
0B76 4404           1984                             orl             a,#04              ;p5.2=1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    32

0B78 00             1985                             nop
0B79 00             1986                             nop
0B7A 543F           1987                             anl             a,#3fh          ;p5.6,p5.7=0
0B7C F585           1988                             mov   p5,a
0B7E 06             1989                             inc             @r0
0B7F 020000   F     1990                             jmp              rebyte
                    1991     
0B82 B6033D         1992     nndelch:        cjne    @r0,#3,n4delch
                    1993                             ;pez->A+
                    1994                             ;K+=000/(A+-AN)
                    1995                             ;mov            r0,#rez_A;->r2..r5
                    1996                             ;call   resar2
0B85 E577           1997                                     mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0B87 FA             1998                                     mov             r2,a
0B88 E578           1999                                     mov             a,reacp+1
0B8A FB             2000                                     mov             r3,a
0B8B E579           2001                                     mov             a,reacp+2
0B8D FC             2002                                     mov             r4,a
0B8E E57A           2003                                     mov             a,reacp+3
0B90 FD             2004                                     mov             r5,a
                    2005                                     ;;;;;;;;;;;;;;;
0B91 120402         2006                             call    altof                   ;r2..r5->float
0B94 7888           2007                             mov             r0,#rezAp;->rezAp
0B96 120000   F     2008                             call    saver2                          
0B99 7884           2009                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0B9B 120000   F     2010                             call    resar8                          
0B9E 1201D1         2011                             call    flsub           ; r2..r5(A+-AN)
0BA1 120000   F     2012                             call    move28     ;r2..r5->r8..r11
0BA4 900000   F     2013                             mov             dptr,#CH2tho;000->r2..r5 float
0BA7 120000   F     2014                             call    ldc_long                
0BAA 1202B7         2015                             call    fldiv
0BAD EA             2016                             mov             a,r2
0BAE 547F           2017                             anl             a,#7fh
0BB0 FA             2018                             mov             r2,a
0BB1 7890           2019                             mov             r0,#koefKp;->koefKp
0BB3 120000   F     2020                             call    saver2
                    2021                       
                    2022                     ;       anl             P5,#0feh                ;p5.0=0 
0BB6 E585           2023                     mov             a,P5
0BB8 543B           2024                             anl             a,#3bh;acp-
0BBA F585           2025                             mov             P5,a
0BBC 7883           2026                             mov             r0,#chdel
0BBE 06             2027                             inc             @r0                       ;ch+1
0BBF 020000   F     2028                             jmp             rebyte
                    2029     
0BC2 B6063A         2030     n4delch:        cjne    @r0,#6,n8delch
                    2031                             ; pez->A-
                    2032                             ;K-=000/(A--AN)
                    2033                     ;       mov     r0,#rez_A;->r2..r5
                    2034                     ;       call    resar2
0BC5 E577           2035                             mov             a,reacp         ;r2..r5 &&&&&&&&&&&
0BC7 FA             2036                                     mov             r2,a
0BC8 E578           2037                                     mov             a,reacp+1
0BCA FB             2038                                     mov             r3,a
0BCB E579           2039                                     mov             a,reacp+2
0BCD FC             2040                                     mov             r4,a
0BCE E57A           2041                                     mov             a,reacp+3
0BD0 FD             2042                                     mov             r5,a
                    2043                                     ;;;;;;;;;;;;;;;
0BD1 120402         2044                             call    altof                   ;r2..r5->float
0BD4 788C           2045                             mov             r0,#rezAm;->rezAm
0BD6 120000   F     2046                             call    saver2                          
0BD9 7884           2047                             mov             r0,#kor0_AN;kor0_AN->r8..r11
0BDB 120000   F     2048                             call    resar8                          
0BDE 1201D1         2049                             call    flsub                   ; r2..r5(A--AN)
0BE1 120000   F     2050                             call    move28                  ;r2..r5->r8..r11
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    33

0BE4 900000   F     2051                             mov             dptr,#CH2tho    ;000->r2..r5 float
0BE7 120000   F     2052                             call    ldc_long                
0BEA 1202B7         2053                             call    fldiv
0BED EA             2054                             mov             a,r2
0BEE 547F           2055                             anl             a,#7fh
0BF0 FA             2056                             mov             r2,a
0BF1 7894           2057                             mov             r0,#koefKm;->koefKm
0BF3 120000   F     2058                             call    saver2
                    2059                        
0BF6 120000   F     2060                             call    loadus
0BF9 7883           2061                             mov             r0,#chdel
0BFB 06             2062                             inc             @r0                       ;ch+1
0BFC 020000   F     2063                        jmp    rebyte
                    2064     
0BFF B6090F         2065     n8delch:        cjne    @r0,#9,n12delch
0C02 7600           2066                             mov             @r0,#0
0C04 7981           2067                             mov             r1,#chavt
0C06 770C           2068                             mov             @r1,#0ch;6;1;
0C08 09             2069                             inc             r1
0C09 7780           2070                             mov             @r1,#80h;40h;
0C0B 120000   F     2071                             call   clmassix     ;сбросить массив среднего
0C0E 020000   F     2072                             jmp             rebyte
0C11 06             2073     n12delch:       inc             @r0
0C12 020000   F     2074                             jmp             rebyte
                    2075     
                    2076     ;in-r1-count
0C15                2077     chdec:          ;mov            r1,#chavt               ;chavt-1
0C15 E7             2078                             mov             a,@r1
0C16 FC             2079                             mov             r4,a
0C17 09             2080                             inc             r1
0C18 E7             2081                             mov             a,@r1
0C19 FD             2082                             mov             r5,a
0C1A C202           2083                             clr             rr2
0C1C C203           2084                             clr             rr3
0C1E 900000   F     2085                             mov             dptr,#ch1        
0C21 120000   F     2086                             call    ldc_ltemp
0C24 120000   F     2087                             call    lsub
0C27 ED             2088                             mov             a,r5
0C28 F7             2089                             mov             @r1,a
0C29 19             2090                             dec             r1
0C2A EC             2091                             mov             a,r4
0C2B F7             2092                             mov             @r1,a
0C2C 22             2093                             ret      
                    2094     
                    2095     
                    2096     
                    2097     ;пп выдачи на индикатор 12 байт   bufind..bufind+11
0C2D 75E700         2098      ind:   mov             EIE2,#00H;mov   IE,#00h
0C30 120000   F     2099                     call    mign
0C33 7840           2100                      mov            r0,#bufind;+11
0C35 7F0C           2101                      mov            r7,#12
0C37 C286           2102      nexin: clr             p0.6
0C39 E6             2103                     mov             a,@r0
0C3A F59B           2104                     mov             SPI0DAT,a
0C3C 20FBFD         2105                     jb              TXBSY,$
0C3F D286           2106                     setb    p0.6
0C41 120000   F     2107                     call    z_9             ;25mks
0C44 08             2108                     inc             r0;dec          r0
0C45 DFF0           2109                     djnz    r7,nexin
0C47 75E730         2110                     mov             EIE2,#30H;mov   IE,#80h
0C4A 22             2111                ret
                    2112     
                    2113     
0C4B 7A08           2114     zapadc:   mov R2,#8
0C4D D297           2115     sdv:      setb P1.7
0C4F 33             2116               rlc A
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    34

0C50 9296           2117                     mov P1.6,C
0C52 120000   F     2118                     call tim2
                    2119                                     
0C55 C297           2120                     clr P1.7
0C57 120000   F     2121                     call tim2
0C5A DAF1           2122                     djnz R2,sdv
0C5C D296           2123                     setb P1.6
0C5E 22             2124                     ret
                    2125     
0C5F 7A08           2126     chtadc:   mov R2,#8
0C61 D297           2127     sdv1:     setb P1.7
0C63 120000   F     2128               call tim2
0C66 C297           2129                     clr P1.7
0C68 A296           2130                     mov C,P1.6
0C6A 33             2131                     rlc A
0C6B 120000   F     2132                     call tim2
0C6E DAF1           2133                     djnz R2,sdv1
0C70 22             2134                     ret
                    2135     
0C71 7E30           2136     tim:      mov R6,#30h;38h
0C73 DEFE           2137     tim1:     djnz R6,tim1
0C75 22             2138               ret
                    2139               
0C76 7E10           2140     tim2:     mov R6,#10h;14h
0C78 DEFE           2141     tim3:     djnz R6,tim3
0C7A 22             2142               ret
                    2143     
                    2144     ;запись из acc
0C7B C3             2145     write_x1: clr   c
0C7C                2146     writeD_x1:
0C7C 92B1           2147                       mov P3.1,c        ;запись
0C7E F5A0           2148               mov P2,A
0C80 D2B3           2149                       setb P3.3
0C82 120000   F     2150                       call z_5
0C85 C2B3           2151                       clr P3.3
0C87 75A0FF         2152                       mov P2,#0FFh
0C8A 22             2153                       ret
                    2154     
                    2155     ;чтение в acc
0C8B C3             2156     read_x2:  clr   c  
0C8C 92B1           2157               mov P3.1,c        ;чтение
0C8E D2B2           2158               setb P3.2
0C90 D2B3           2159                       setb P3.3
0C92 120000   F     2160                     call z_5
0C95 E5A0           2161                       mov A,P2
0C97 C2B3           2162                       clr P3.3
0C99 C2B2           2163                       clr P3.2
0C9B 22             2164                       ret
                    2165     
                    2166     
0C9C 120000   F     2167     loop:     call read_x2;x2    ;ожидание флага готовности
0C9F 20E7FA         2168                       jb ACC.7,loop     ;переход на чтение, если бит А(7)=1
0CA2 22             2169                        ret           ;возврат, если бит А(7)<>1
                    2170                                      
                    2171                                        
                    2172     
                    2173     
                    2174     
                    2175     
                    2176     
                    2177     
                    2178     
                    2179     ;принимаемый байт в acc
                    2180     ;прием байта последовательным кодом старшими разрядами вперед
0CA3 7A08           2181     read:    mov R2,#8
0CA5 C297           2182     re1:     clr P1.7;P1.2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    35

0CA7 120000   F     2183              call tim2        ;5mks
0CAA A294           2184                     mov C,P1.4;P1.0
0CAC 33             2185                     rlc A           
0CAD D297           2186                     setb P1.7;P1.2
0CAF 120000   F     2187                     call tim2
0CB2 DAF1           2188                     djnz R2,re1
0CB4 22             2189                     ret
                    2190     
                    2191      ;in r0-count   
                    2192     ;r10,r11-значение с котоым сравнивается счетчик
                    2193     ;r2..r5 -значение счетчика
0CB5                2194     chcmp:; mov              r0,#chavt                                      ;>=7500(1d4ch
0CB5 E6             2195                     mov                     a,@r0
0CB6 FC             2196                     mov                     r4,a
0CB7 08             2197                     inc                     r0
0CB8 E6             2198                     mov                     a,@r0
0CB9 FD             2199                     mov                     r5,a
0CBA 7B00           2200                     mov                     r3,#0
0CBC 7A00           2201                     mov                     r2,#0
0CBE 750800         2202                     mov                     r8,#0;clr                       r8
0CC1 750900         2203                     mov                     r9,#0;clr                       r9
0CC4 120000   F     2204                     call            lcmp
0CC7 22             2205                     ret
                    2206     
                    2207     
                    2208     
                    2209     
                    2210     
                    2211     
                    2212                                 
0CC8 020000   F     2213     rout6:          jmp             out6
0CCB 020000   F     2214     rlabelF:        jmp             labelF  
0CCE 020000   F     2215     rknrazr:        jmp             knrazr  
0CD1 020000   F     2216     rknopt:         jmp             knopt
0CD4 020000   F     2217     rizman:         jmp             izman   
0CD7                2218     keyb1:  ;IE6 
0CD7 75E700         2219                                     mov             EIE2,#00H
                    2220                                     
0CDA C0E0           2221                                     push    acc
0CDC C0D0           2222                                     push    psw
0CDE C000           2223                                     push    rr0
0CE0 C001           2224                                     push    rr1
0CE2 C002           2225                                     push    rr2
0CE4 C003           2226                                     push    rr3
0CE6 C004           2227                                     push    rr4
0CE8 C005           2228                                     push    rr5
0CEA C006           2229                                     push    rr6
0CEC C007           2230                                     push    rr7
                    2231                                     ;clr            bitmig
                    2232                       ;;;;;;;;;;;;;;
0CEE 120000   F     2233                                     call    z_01s;0,1s
                    2234                                     ;восстан знакоместо при мигании
                    2235                                     ;т к в соотв яч буфера индикации пишется 20h(пробел)
0CF1 78B2           2236                                     mov             r0,#marker
0CF3 7440           2237                                     mov             a,#bufind
0CF5 26             2238                                     add             a,@r0                   ;a=bufind+marker
0CF6 F9             2239                                     mov             r1,a
0CF7 A73C           2240                                     mov             @r1,savba
                    2241                                     ;;;;;;;;;;;
0CF9 E5B0           2242                             mov             a,p3
0CFB 20E644         2243                                     jb              acc.6,outviR;выход из режима выч R
0CFE E5B0           2244     gout6:                          mov             a,p3
0D00 44FF           2245                                     orl             a,#0ffh         ; p3.(5-0)<-3f
0D02 F5B0           2246                                     mov             p3,a
0D04 E5B0           2247                                     mov             a,p3
0D06 30E6BF         2248                                     jnb             acc.6,rout6             ;error
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    36

0D09 3004BF         2249                                     jnb             bitizm,rlabelF
0D0C 75B0FE         2250                                     mov             p3,#0feh                ;реж IZM
0D0F E5B0           2251                                     mov             a,p3
0D11 30E6C0         2252                                     jnb             acc.6,rizman
                    2253                                     ;;;;;;
0D14 201232         2254                                     jb              bitklb,goklb
0D17 75B0FD         2255                                     mov             p3,#0fdh
0D1A E5B0           2256                                     mov             a,p3
0D1C 30E6AF         2257                                     jnb             acc.6,rknrazr             ;labelC
0D1F 75B0FB         2258                                     mov             p3,#0fbh
0D22 E5B0           2259                                     mov             a,p3
0D24 30E649         2260                                     jnb             acc.6,knright           ;->
0D27 75B0F7         2261                                     mov             p3,#0f7h
0D2A E5B0           2262                                     mov             a,p3
0D2C 30E6A2         2263                                     jnb             acc.6,rknopt                    ;T
0D2F 75B0EF         2264                                     mov             p3,#0efh
0D32 E5B0           2265                                mov          a,p3
0D34 30E615         2266                                     jnb             acc.6,pyskst                    ;pysk/stop
0D37 75B0DF         2267                                     mov             p3,#0dfh
0D3A E5B0           2268                                     mov             a,p3
0D3C 30E64D         2269                                jnb          acc.6,knvich
0D3F 020000   F     2270                                     jmp             izmpaT
                    2271     
0D42 3006B9         2272     outviR: jnb             bitvi11,gout6   
0D45 C214           2273                                     clr             bitvich                         ;выход из р
                             ежима выч R  
0D47 C206           2274                                     clr             bitvi11
                    2275                                     
0D49 020000   F     2276     goklb:          jmp             out6
                    2277     
0D4C 200A0C         2278     pyskst:                 jb      bitbon,bufon            ;pysk/stop
0D4F D20A           2279                                     setb    bitbon  ;уст реж буфер вкл
0D51 79D5           2280                                     mov                     r1,#volume;work         ;обьем блок
                             а
0D53 7700           2281                                     mov                     @r1,#00
0D55 09             2282                                     inc                     r1
0D56 77C7           2283                                     mov                     @r1,#0c7h                       ;32
                             0h/4
0D58 020000   F     2284                                     jmp             izmpaT
0D5B C20A           2285     bufon:                  clr             bitbon  ;уст реж буфер выкл
0D5D 020000   F     2286                                     jmp             izmpaT
                    2287     
0D60 79B0           2288     tizmri:                 mov             r1,#level
0D62 B70102         2289                                     cjne    @r1,#1,right2
                    2290                                     ;10s->HET
0D65 8004           2291                                     jmp             right3
                    2292     
0D67 07             2293     right2:                 inc             @r1
0D68 120000   F     2294                                     call    lolevT
                    2295                                     ;call   loadT   ;нажата кн-> в реж Tизм 
0D6B 120000   F     2296     right3:                 call    ind
0D6E 806D           2297                                     jmp             izmfun
                    2298     
                    2299                             
                    2300                             
0D70                2301     knright:        
                    2302     
0D70 79AE           2303                                     mov             r1,#diap
                    2304                             ;перекл диапазон 1 поз вверх сбр массив
0D72 17             2305                                     dec             @r1
0D73 B7FF04         2306                                     cjne    @r1,#0ffh,diinc
0D76 7700           2307                                     mov             @r1,#0
0D78 8063           2308                                     jmp  izmfun
0D7A 120000   F     2309     diinc:                  call     clmassix
0D7D 78B3           2310                                     mov             r0,#summa
0D7F 120000   F     2311                                     call    clear4
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    37

0D82 786A           2312                                     mov             r0,#rez_A0
0D84 120000   F     2313                                     call    clear4  
0D87 120000   F     2314                                     call    loadUS
0D8A 8051           2315                                      jmp  izmfun
                    2316     
0D8C 200613         2317     knvich:            jb           bitvi11,onvich
0D8F C204           2318                                     clr             bitizm
0D91 D214           2319                                     setb    bitvich
                    2320                                     
0D93 78B1           2321                                     mov             r0,#vichR
0D95 7611           2322                                     mov             @r0,#11h;;????????or 0
                    2323                                     ;ВЫЧИСЛИТЬ
0D97 900000   F     2324                                     mov     dptr,#teVICH
0D9A 120000   F     2325                                     call    lotext
0D9D 120000   F     2326                                call         z_1s;;;;;;;
0DA0 806C           2327                                     jmp              viout;izmpaT
                    2328     
0DA2 C214           2329     onvich:                 clr             bitvich
0DA4 78B1           2330                                     mov             r0,#vichR
0DA6 7600           2331                                     mov             @r0,#0
0DA8 8037           2332                                     jmp              izmpaT
                    2333     ; изм упр слова при нажатии ИЗМ d3(k5 p4),d3(u5 p5)
0DAA 301820         2334     louizm:            jnb          knizm,lou
0DAD 79AE           2335                                     mov             r1,#diap
0DAF C3             2336                                     clr             c
0DB0 7403           2337                                     mov             a,#3
0DB2 97             2338                                     subb    a,@r1
0DB3 5006           2339                                     jnc             lldi23    ;10-2..10-5
                    2340                                     ;10-6..10-11
0DB5 E584           2341                                     mov             a,p4
0DB7 54F7           2342                                     anl             a,#0f7h   ;d3
0DB9 F584           2343                                     mov             p4,a
0DBB E7             2344     lldi23:                 mov             a,@r1
0DBC 6403           2345                                     xrl             a,#3
0DBE 7002           2346                                     jnz             lldi3
0DC0 8005           2347                                     jmp             lldi2   ;10-5
0DC2 E7             2348     lldi3:                  mov             a,@r1
0DC3 6402           2349                                     xrl             a,#2            ;
0DC5 7006           2350                                     jnz             lou             
0DC7 E585           2351     lldi2:                  mov             a,p5            ;10-4
0DC9 4408           2352                                     orl             a,#08
0DCB F585           2353                                     mov             p5,a
0DCD 22             2354     lou:                    ret
                    2355                               ;;;;;;
0DCE 201807         2356     izman:                  jb              knizm,knizmon
0DD1 D218           2357                                     setb    knizm           ;уст реж ИЗМ ВКЛ
                    2358                             ;       d3(k5 p4),d3(u5 p5)заслать us
0DD3 120000   F     2359                                     call    louizm 
0DD6 8005           2360                                     jmp             izmfun
0DD8 C218           2361     knizmon:                clr             knizm           ;уст реж ИЗМ ВЫКЛ
0DDA 120000   F     2362                                     call    loadUS;восстановить us
0DDD                2363     izmfun:                 
0DDD D207           2364                                     setb    bitzus;bitbuf
0DDF 8000           2365                                     jmp             labelE;;;;;;;;;;;;
                    2366                                     ;;;;;;;;;;;;;;
0DE1                2367     izmpaT:
                    2368     ;;;;;;;;;;;;;;;;;
                    2369                     ;       clr             c 
                    2370                     ;       mov             r1,#parN
                    2371     
                    2372                     ;       mov             r0,#diap
                    2373                     ;       mov             a,#6            
                    2374                     ;       subb    a,@r0
                    2375                     ;       jnc             labelE          ;         ;10-2..10-8
                    2376                               
                    2377                     ;       mov             @r1,#2          ;10-9..10-11            
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    38

                    2378                     ;       jmp             labelE
                    2379     
                    2380     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0DE1 789A           2381     labelE:                 mov             r0,#parT
0DE3 793D           2382                                     mov             r1,#chkl
0DE5 B60108         2383                                     cjne    @r0,#1,izmt2
0DE8 7700           2384                                     mov             @r1,#0
0DEA 09             2385                                     inc             r1
0DEB 7702           2386                                     mov             @r1,#2
0DED 020000   F     2387                                     jmp             out6
0DF0 B60208         2388     izmt2:                  cjne    @r0,#2,izmt3
0DF3 7700           2389                                     mov             @r1,#0
0DF5 09             2390                                     inc             r1
0DF6 7714           2391                                     mov             @r1,#20
0DF8 020000   F     2392                                     jmp             out6
                    2393     
0DFB 7700           2394     izmt3:                  mov             @r1,#0
0DFD 09             2395                                     inc             r1
0DFE 77C8           2396                                     mov             @r1,#200
0E00 020000   F     2397                                     jmp             out6
                    2398     
                    2399     
                    2400     
                    2401     
0E03                2402     knopt: ;кнопка T
0E03 C204           2403                                clr          bitizm
0E05 D210           2404                                setb         bitt2
0E07 79B7           2405                                mov          r1,#load
0E09 7704           2406                                mov          @r1,#4;1s
0E0B 120000   F     2407                                call         loadT           ;T=1S,10S,HET,0.1S,50mS,
                    2408                                
                    2409     
0E0E 793D           2410     viout:          mov             r1,#chkl
0E10 7703           2411                             mov             @r1,#03
0E12 09             2412                             inc             r1
0E13 77E8           2413                             mov             @r1,#0e8h               ;1000
0E15 020000   F     2414                             jmp             out6
                    2415     
0E18                2416     knrazr:          
0E18 C3             2417     labelC:          clr            c
0E19 78AF           2418                             mov             r0,#parN
0E1B 799A           2419                             mov             r1,#parT
0E1D 7402           2420                             mov             a,#2
0E1F 97             2421                             subb    a,@r1
0E20 40BF           2422                             jc              labelE          ;T>2
0E22 B60104         2423                             cjne    @r0,#1,noN1c
0E25 7602           2424                             mov             @r0,#2          ;N=2
0E27 80B8           2425                             jmp             labelE
                    2426     
0E29 B60204         2427     noN1c:          cjne    @r0,#2,not_1
0E2C 7603           2428                             mov             @r0,#3          ;N=3      ;10-2..10-8
0E2E 80B1           2429                             jmp             labelE
                    2430     
0E30                2431     not_10: 
0E30 7601           2432     not_1:          mov             @r0,#1                          ;N=1
0E32 80AD           2433                             jmp     labelE
                    2434     
0E34 020000   F     2435     rtizmri:        jmp             tizmri
0E37                2436     labelf:                 
0E37 301037         2437                             jnb             bitt2,nofizm
0E3A 75B0FB         2438                        mov          p3,#0fbh
0E3D E5B0           2439                        mov          a,p3
0E3F 20E60F         2440                        jb           acc.6,outF
0E42 79B7           2441                        mov          r1,#load;parT
0E44 B70503         2442                        cjne         @r1,#5,noft1
                    2443                        ;t=10s
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    39

0E47 020000   F     2444                        jmp          out6;ft1izm
                    2445     
0E4A 07             2446     noft1:     inc          @r1;dec         @r1
0E4B 120000   F     2447     ft1izm:         call    loadT;в буфер 2 записать текст с соотв load(parT)
                    2448                             ;call   ind
0E4E 020000   F     2449                     jmp             out6;??????????????/
                    2450     
                    2451                             ;увеличить счетчик задержки клавиатуры
0E51 783D           2452     outF:           mov             r0,#chkl
0E53 7627           2453                             mov             @r0,#27h
0E55 08             2454                             inc             r0
0E56 7610           2455                             mov             @r0,#10h
0E58 020000   F     2456                             jmp             out6;out7
                    2457     
0E5B 020000   F     2458     noviR1:         jmp             noviR
0E5E 78B1           2459     outvich:        mov                     r0,#vichR
0E60 7600           2460                                             mov                     @r0,#0
0E62 C214           2461                                             clr                     bitvich
0E64 C206           2462                                             clr                     bitvi11
0E66 C211           2463                                             clr                     bitmenu
0E68 D204           2464                                             setb            bitizm
0E6A 78B2           2465                                             mov                     r0,#marker
0E6C 76FF           2466                                             mov                     @r0,#0ffh
0E6E 020000   F     2467                                             jmp                     out6    
                    2468     
0E71 3014E7         2469     nofizm:         jnb             bitvich,noviR1
0E74 75B0DF         2470                                                     mov             p3,#0dfh
0E77 30B6E4         2471                                                     jnb             p3.6,outvich;отжатие кнопки
                              вычR
0E7A 78B1           2472                             mov             r0,#vichR
0E7C B61110         2473                             cjne    @r0,#11h,no11v6
0E7F 75B0FB         2474                             mov                     p3,#0fbh;->
0E82 20B6CC         2475                             jb                      p3.6,outF
0E85 7612           2476                             mov             @r0,#12h                ;11= вычислить
0E87 900000   F     2477     vvrr6:          mov             dptr,#teIZMK    ;       изм конст;teVICH
0E8A 120000   F     2478                             call    lotext
0E8D 80C2           2479                             jmp             outF
                    2480             
0E8F B61210         2481     no11v6:         cjne    @r0,#12h,no12v6
0E92 75B0FB         2482                             mov             p3,#0fbh;->
0E95 20B6B9         2483                             jb              p3.6,outF
0E98 7613           2484                             mov             @r0,#13h
0E9A 900000   F     2485                             mov             dptr,#teOUT
0E9D 120000   F     2486                             call    lotext
0EA0 80AF           2487                             jmp             outF
                    2488                     
0EA2 B61310         2489     no12v6:         cjne    @r0,#13h,no13v6
0EA5 75B0FB         2490                                                     mov             p3,#0fbh;->
0EA8 20B6A6         2491                             jb              p3.6,outF
0EAB 7611           2492                             mov             @r0,#11h
0EAD 900000   F     2493                             mov             dptr,#teVICH
0EB0 120000   F     2494                             call    lotext
0EB3 809C           2495                             jmp             outF
                    2496     
                    2497     ;кн -> A= 0000
                    2498     ;кн -> B= +00000
0EB5 75B0FB         2499     no13v6:         mov             p3,#0fbh
0EB8 E5B0           2500                             mov             a,p3
0EBA 20E635         2501                             jb              acc.6,chanZ
0EBD E53B           2502                             mov             a,movrig
0EBF B40714         2503                             cjne    a,#7,kon_B      
0EC2 78B2           2504                             mov             r0,#marker      ;A= 0000
0EC4 B60716         2505                             cjne    @r0,#7,mark0_8          ;курсор справа ?
0EC7 E53A           2506     rikn:           mov             a,movleft
0EC9 F6             2507                             mov             @r0,a                           ; уст курсор в кр л
                             евую поз+1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    40

                    2508     ;                               29.12.06
                    2509     ;;;;;;;;;;;;;;;;;;
                    2510     ;необходимо не портить цифру в следуюем справа знакоместе
                    2511     ;т е сохранить ее в ячейке для мигания в противном случае
                    2512     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2513     ;       знакоместа
0ECA 78B2           2514                                     mov             r0,#marker
0ECC 7440           2515                                     mov             a,#bufind
0ECE 26             2516                                             add             a,@r0                   ;a=bufind+m
                             arker
0ECF F9             2517                                             mov             r1,a
0ED0 09             2518                                             inc             r1
0ED1 873C           2519                                             mov             savba,@r1
0ED3 020000   F     2520                                     jmp             outF
                    2521     
0ED6 78B2           2522     kon_B:          mov             r0,#marker      ;B= +00000
0ED8 B60802         2523                                             cjne    @r0,#8,mark0_8          ;курсор справа ?
0EDB 80EA           2524                                             jmp             rikn
0EDD                2525     mark0_8:
                    2526     ;                               29.12.06
                    2527     ;;;;;;;;;;;;;;;;;;
                    2528     ;необходимо не портить цифру в следуюем справа знакоместе
                    2529     ;т е сохранить ее в ячейке для мигания в противном случае
                    2530     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2531     ;       знакоместа ->B=+00000
0EDD 78B2           2532                                             mov             r0,#marker
0EDF 7440           2533                                     mov             a,#bufind
0EE1 26             2534                                             add             a,@r0                   ;a=bufind+m
                             arker
0EE2 F9             2535                                             mov             r1,a
0EE3 09             2536                                             inc             r1
0EE4 873C           2537                                             mov             savba,@r1
0EE6 78B2           2538                             mov             r0,#marker
0EE8 06             2539                             inc             @r0             ;       сдвинуть курсор вправо на 1
0EE9 C219           2540                             clr             bitmig
0EEB B60901         2541                             cjne    @r0,#9,outma
0EEE 18             2542                             dec             r0;ppp
0EEF 020000   F     2543     outma:          jmp             outF
                    2544     
0EF2 75B0FE         2545     chanZ:          mov             p3,#0feh
0EF5 E5B0           2546                             mov             a,p3
0EF7 20E611         2547                             jb              acc.6,chanma
                    2548                             ;изм знак в старшем разряде на противоположн
0EFA E543           2549                             mov             a,bufind+3
0EFC B42B06         2550                             cjne            a,#2bh,noplus
0EFF 75432D         2551                             mov                     bufind+3,#2dh           ;+->-   
0F02 020000   F     2552                             jmp             outF
0F05                2553     noplus:
0F05 75432B         2554                             mov                     bufind+3,#2bh           ;-/+-
0F08 020000   F     2555                             jmp             outF
0F0B 75B0FD         2556     chanma:         mov             p3,#0fdh
0F0E E5B0           2557                             mov             a,p3
0F10 20E603         2558                             jb              acc.6,outFl;labelL1
                    2559                             ;clr            bitmig
0F13 120000   F     2560     labelL1:        call    vvchibl;f       ;увеличить цифру 
                    2561     
0F16 020000   F     2562     outFl:                  jmp             outF
                    2563                     
0F19                2564     nor11:          ;       выход
0F19 7613           2565                     mov             @r0,#13h  ;12->13
0F1B 900000   F     2566                     mov             dptr,#teOUT
                    2567     ;               jmp             vi1113
                    2568     
                    2569     ;;;;;;;;;кнопка -> в режиме кнопки меню
                    2570     
                    2571     ;yesviR:                clr             bitvi11;????????/
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    41

                    2572     ;                       jb              bmem11,rlabelL
                    2573     ;                       jmp             out6;???????//
                    2574     
0F1E 020000   F     2575     rlabelL:        jmp                     labelL
                    2576     ;findmem:               jmp             out6
0F21 301171         2577     noviR:          jnb                     bitmenu,findmem;17.01.07
                    2578     ;;;;;;;;;;;;;
0F24 78B1           2579                                             mov                     r0,#vichR
0F26 7415           2580                                             mov                     a,#15h
0F28 C3             2581                                             clr                     c
0F29 96             2582                                             subb            a,@r0
0F2A 4016           2583                                             jc                      ri21_23
                    2584     
0F2C 75B0FB         2585                                             mov             p3,#0fbh; реж кн меню ->
0F2F 20B60A         2586                                             jb              p3.6,ri6
0F32 78B1           2587                                             mov             r0,#vichR
0F34 B61508         2588                                             cjne    @r0,#15h,norime
0F37 7611           2589                                             mov             @r0,#11h
0F39 120000   F     2590     norime1:        call            lomenu
0F3C 020000   F     2591     ri6:                    jmp             out6
0F3F 06             2592     norime:         inc             @r0
0F40 80F7           2593                                             jmp             norime1
                    2594             
0F42 7423           2595     ri21_23:        mov                     a,#23h          ;->
0F44 C3             2596                                             clr                     c
0F45 96             2597                                             subb            a,@r0
0F46 4014           2598                                             jc                      ri_31
0F48 75B0FB         2599                                             mov                     p3,#0fbh
0F4B 20B6EE         2600                                             jb                      p3.6,ri6
0F4E B62308         2601                                             cjne            @r0,#23h,no23ri
0F51 7621           2602                                             mov                     @r0,#21h
0F53 120000   F     2603                                             call            lomenu
0F56 020000   F     2604                                             jmp                     out6
0F59 06             2605     no23ri:         inc                     @r0
0F5A 80DD           2606                                             jmp                     norime1
0F5C B63119         2607     ri_31:          cjne            @r0,#31h,no31ri;->19.2->57.6->19.2
0F5F 30130B         2608                                             jnb                     bitv19,gosk19
0F62 900000   F     2609                                             mov                     dptr,#teS57_6;57,6
0F65 120000   F     2610                                             call            lotext
0F68 C213           2611                                             clr                     bitv19
0F6A 020000   F     2612                                             jmp             out6
0F6D 900000   F     2613     gosk19:         mov                     dptr,#teS19_2
0F70 120000   F     2614                                             call            lotext
0F73 D213           2615                                             setb            bitv19
0F75 020000   F     2616                                             jmp                     out6
                    2617     
                    2618     
                    2619     
                    2620     ;labelS2:       jmp                     out6
                    2621     
0F78 7452           2622     no31ri:         mov                     a,#52h;42h              ;->
0F7A C3             2623                                             clr                     c
0F7B 96             2624                                             subb            a,@r0
0F7C 40BE           2625                                             jc                      ri6
0F7E 75B0FB         2626                                             mov                     p3,#0fbh                   
                                  ;41,42
0F81 30B608         2627                                             jnb                     p3.6,rlabelN    ;кнопка ->(
                             пароль 000)
0F84 75B0FD         2628                                             mov                     p3,#0fdh
0F87 20B6B2         2629                                             jb                      p3.6,ri6
0F8A 8087           2630                                             jmp             labelL1                            
                                  ;кнопка 0..9  (пароль 000)
0F8C 020000   F     2631     rlabelN:                jmp             labelN
0F8F 020000   F     2632     moutF:          jmp             outF
                    2633     ;;;;;;;;;;;;;;;;;;;;;;;;;
0F92 020000   F     2634     rnnmemb:        jmp             nnmemb
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    42

                    2635     
0F95                2636     nbimenu:
0F95 300BFA         2637     findmem:        jnb             bitmem,rnnmemb
0F98 79B0           2638                             mov             r1,#level                                          
                                          ;-> кн ПАМЯТЬ (ОЧИСТКА ->ЗАПИСЬ-> ПРОСМОТР)
0F9A B71113         2639                        cjne         @r1,#11h,nomem11
                    2640                        
0F9D 75B0FB         2641                        mov          p3,#0fbh
0FA0 E5B0           2642                        mov          a,p3
0FA2 20E6EA         2643                        jb           acc.6,moutF
0FA5 7712           2644                        mov          @r1,#12h
0FA7 900000   F     2645                        mov          dptr,#teWR      ;                       ЗАПИСЬ
0FAA 120000   F     2646                        call         lotext
0FAD 020000   F     2647                        jmp          outF
                    2648     
0FB0 B71213         2649     nomem11:   cjne         @r1,#12h,nomem12
0FB3 75B0FB         2650                             mov             p3,#0fbh
0FB6 E5B0           2651                        mov          a,p3
0FB8 20E6D4         2652                        jb           acc.6,moutF
0FBB 7713           2653                        mov          @r1,#13h
0FBD 900000   F     2654                        mov          dptr,#teLIST            ;ПРОСМОТР
0FC0 120000   F     2655                        call         lotext
0FC3 020000   F     2656                        jmp          outF
0FC6 B71313         2657     nomem12:         cjne           @r1,#13h,nomem13
0FC9 75B0FB         2658                                             mov             p3,#0fbh
0FCC E5B0           2659                        mov          a,p3
0FCE 20E6BE         2660                        jb           acc.6,moutF
0FD1 7714           2661                        mov          @r1,#14h
0FD3 900000   F     2662                        mov          dptr,#teSTAT                    ;СТАТИСТИКА
0FD6 120000   F     2663                        call         lotext
0FD9 020000   F     2664                          jmp                outF
                    2665                             
0FDC B71413         2666     nomem13:cjne            @r1,#14h,labelL
0FDF 75B0FB         2667                             mov             p3,#0fbh
0FE2 E5B0           2668                        mov          a,p3
0FE4 20E6A8         2669                        jb           acc.6,moutF
0FE7 7711           2670                        mov          @r1,#11h
0FE9 900000   F     2671                        mov          dptr,#teCLE                     ;ОЧИСТКА
0FEC 120000   F     2672                        call         lotext
0FEF 020000   F     2673                          jmp                outF
0FF2                2674     labelL: 
                    2675                             ;ПОЛНАЯ->БЛОК 00(level 21->22) 
0FF2 78B0           2676                                     mov                     r0,#level
0FF4 B6210E         2677                                     cjne            @r0,#21h,nobl21
0FF7 7622           2678                                     mov                     @r0,#22h                ;->БЛОК 
0FF9 900000   F     2679                                     mov                     dptr,#teBL
0FFC 120000   F     2680     me21_22:call            lotext
0FFF 120000   F     2681                                     call            z_05s;задержка чтобы не проскакивала пргр н
                             а следующий уровень
1002 020000   F     2682                                     jmp                     outF
                    2683     
1005 B62207         2684     nobl21: cjne            @r0,#22h,nobl22
1008 900000   F     2685                                     mov                     dptr,#teFULL
100B 7621           2686                                     mov                     @r0,#21h                ;->ПОЛНАЯ
                    2687     
100D 80ED           2688                                     jmp                     me21_22
                    2689     
                    2690     ;labl21:           cjne @r0,#21h,nolev1
                    2691     ;                       mov             p3,#0fbh
                    2692     ;                       mov             a,p3
                    2693     ;                       jb              acc.6,loutF
                    2694     ;                       cjne    @r0,#21h,labl22
                    2695     ;                       mov             @r0,#22h
                    2696                             ;БЛОК
                    2697     ;                       call    lotext
                    2698     ;                       jmp             outF
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    43

                    2699     ;labl22:                mov             @r0,#21h
                    2700                             ;ПОЛНАЯ
                    2701     ;                       call    lotext
                    2702     ;                       jmp             outF
                    2703                      
100F B62325         2704     nobl22:         cjne    @r0,#23h,go31l
1012 75B0FB         2705     rigblo:         mov             p3,#0fbh
1015 20B629         2706                                             jb              p3.6,llev2
1018                2707     labL2:    ;  уст курсор в правую позицию 
                    2708                                     ;       кнопка                  ->
                    2709     ;;;;;;;;;;;;;;;;;;
                    2710     ;необходимо не портить цифру в следуюем справа знакоместе
                    2711     ;т е сохранить ее в ячейке для мигания в противном случае
                    2712     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2713     ;       знакоместа
1018 78B2           2714                                             mov             r0,#marker
101A 7440           2715                                     mov             a,#bufind
101C 26             2716                                             add             a,@r0                   ;a=bufind+m
                             arker
101D F9             2717                                             mov             r1,a
101E 09             2718                                             inc             r1
101F 873C           2719                                             mov             savba,@r1
1021 C219           2720                                             clr             bitmig
                    2721     ;;;;;;;;;;;;;;;;
1023 78B2           2722                       mov           r0,#marker      ;курсор справа  ?
1025 E53B           2723                             mov             a,movrig
1027 C3             2724                             clr             c
1028 96             2725                             subb    a,@r0
1029 6006           2726                             jz         equ1l
102B E53B           2727                             mov             a,movrig;уст в правую позицию
102D F6             2728                             mov             @r0,a
102E 020000   F     2729                             jmp             outF                                     
1031 E53A           2730     equ1l:          mov             a,movleft;уст в левую позицию
1033 F6             2731                             mov             @r0,a   
1034 020000   F     2732     loutF:  jmp             outF
                    2733                     
                    2734     
1037 B63102         2735     go31l:          cjne    @r0,#31h,go41l
103A 80D6           2736                             jmp             rigblo
103C B6410B         2737     go41l:          cjne    @r0,#41h,norig2
103F 80D1           2738                             jmp             rigblo
                    2739     
1041 75B0FD         2740     llev2:          mov             p3,#0fdh
1044 20B6ED         2741                             jb              p3.6,loutF
1047 020000   F     2742                             jmp             labelL1
                    2743     
                    2744     ;->
104A C3             2745     norig2:    clr          c               ;32,33,34,42
104B 7431           2746                             mov             a,#31h
104D 96             2747                             subb    a,@r0
104E 50E4           2748                             jnc             loutF
1050 75B0FB         2749     rigblok:        mov             p3,#0fbh  ;32,33,34,42
1053 20B626         2750                             jb              p3.6,lev2go
1056                2751     labelN: 
                    2752                             ;                               29.12.06
                    2753     ;;;;;;;;;;;;;;;;;;
                    2754     ;необходимо не портить цифру в следуюем справа знакоместе
                    2755     ;т е сохранить ее в ячейке для мигания в противном случае
                    2756     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    2757     ;       знакоместа
1056 78B2           2758                                             mov             r0,#marker
1058 7440           2759                                     mov             a,#bufind
105A 26             2760                                             add             a,@r0                   ;a=bufind+m
                             arker
105B F9             2761                                             mov             r1,a
105C 09             2762                                             inc             r1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    44

105D 873C           2763                                             mov             savba,@r1
                    2764     ;;;;;;;;;;;;;;;;;;;
105F 78B2           2765                             mov             r0,#marker      ;курсор справа  ?
1061 E53B           2766                             mov             a,movrig
1063 C3             2767                             clr             c
1064 96             2768                             subb    a,@r0
1065 7006           2769                             jnz        noequ1
1067 E53A           2770                             mov             a,movleft;уст в крайнюю левую позицию
1069 F6             2771                             mov             @r0,a
106A 020000   F     2772                             jmp             outF
106D                2773     noequ1: ;29.12.06
                    2774     ;;;;;;;;;;;;;;;;;;
                    2775                             ;восстан знакоместо при мигании
                    2776                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
106D 78B2           2777                                     mov             r0,#marker
106F 7440           2778                                     mov             a,#bufind
1071 26             2779                                     add             a,@r0                   ;a=bufind+marker
1072 F9             2780                                     mov             r1,a
                    2781                                     ;mov            @r1,savba
1073 09             2782                                     inc             r1
1074 873C           2783                                     mov             savba,@r1
                    2784     ;;;;;;;;;;;;;;;;        
1076 120000   F     2785                             call    marri;уст сдвиг в правую        позицию
1079 020000   F     2786                             jmp             outF
107C 75B0FD         2787     lev2go:         mov             p3,#0fdh
107F 30B603         2788                             jnb             p3.6,rlabelL1
1082 020000   F     2789                             jmp             outF
                    2790     
1085 020000   F     2791     rlabelL1:       jmp             labelL1
                    2792     
1088                2793     nnmemb:
                    2794                                     
                    2795     
                    2796     
1088                2797     norim6:    ;kn menu
1088                2798     out6:           
1088 D007           2799                                     pop             rr7     
108A D006           2800                                     pop             rr6
108C D005           2801                                     pop             rr5
108E D004           2802                                     pop             rr4
1090 D003           2803                                     pop             rr3
1092 D002           2804                                     pop             rr2
1094 D001           2805                                     pop             rr1                             
1096 D000           2806                                     pop             rr0
1098 D0D0           2807                                     pop             psw
109A D0E0           2808                                     pop             acc
                    2809     ;clr            bitmig
109C 75E730         2810                                mov          EIE2,#30H
109F E5AD           2811                                mov          a,P3IF
10A1 54BF           2812                                     anl             a,#0bfh
10A3 F5AD           2813                                     mov             P3IF,a
10A5 75B0C0         2814                                     mov             P3,#0c0h
10A8 C219           2815     clr             bitmig
10AA 32             2816                             reti
                    2817     
10AB 020000   F     2818     rknMEM:                 jmp             knMEM
10AE 020000   F     2819     knKMP:             jmp          out7
10B1 020000   F     2820     rout7:                  jmp             out7    
10B4 020000   F     2821     rlabelH:                jmp             labelH
10B7 020000   F     2822     rknNUL:         jmp             knNUL
10BA 020000   F     2823     rknleft:                jmp             knleft
10BD                2824     keyb2:  ;IE7
10BD 75E700         2825                                     mov             EIE2,#00H
10C0 C0E0           2826                                     push    acc
10C2 C0D0           2827                                     push    psw
10C4 C000           2828                                     push    rr0
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    45

10C6 C001           2829                                     push    rr1
10C8 C002           2830                                     push    rr2
10CA C003           2831                                     push    rr3
10CC C004           2832                                     push    rr4
10CE C005           2833                                     push    rr5
10D0 C006           2834                                     push    rr6
10D2 C007           2835                                     push    rr7
10D4 C082           2836                                     push    dpl
10D6 C083           2837                                     push    dph
                    2838                                     ;clr            bitmig
                    2839                       ;;;;;;;;;;;;;;
10D8 120000   F     2840                               call  z_01s   ;0,1s
                    2841                               ;восстан знакоместо при мигании
                    2842                               ;т к в соотв яч буфера индикации пишется 20h(пробел)
10DB 78B2           2843                                     mov             r0,#marker
10DD 7440           2844                                     mov             a,#bufind
10DF 26             2845                                     add             a,@r0                   ;a=bufind+marker
10E0 F9             2846                                     mov             r1,a
10E1 A73C           2847                                     mov             @r1,savba
                    2848                                     ;;;;;;;;;;;
                    2849     
10E3 E5B0           2850                             mov             a,p3
10E5 20E7C9         2851                                     jb              acc.7,rout7
10E8 E5B0           2852                                     mov             a,p3
10EA 74FF           2853                                     mov             a,#0ffh         ; p3.(5-0)<-3f
10EC F5B0           2854                                     mov             p3,a
10EE E5B0           2855                                     mov             a,p3
10F0 30E7BE         2856                                     jnb             acc.7,rout7             ;error
10F3 3004BE         2857                                     jnb             bitizm,rlabelH
10F6 75B0FE         2858                                     mov             p3,#0feh                ;реж IZM
10F9 E5B0           2859                                     mov             a,p3
10FB 30E7B9         2860                                     jnb             acc.7,rknNUL
10FE 75B0FD         2861                                     mov             p3,#0fdh
1101 E5B0           2862                                     mov             a,p3
1103 30E7A8         2863                                     jnb             acc.7,knKMP
1106 75B0FB         2864                                     mov             p3,#0fbh
1109 E5B0           2865                                     mov             a,p3
110B 30E7AC         2866                                     jnb             acc.7,rknleft
110E 75B0F7         2867                                     mov             p3,#0f7h
1111 E5B0           2868                                     mov             a,p3
1113 30E75B         2869                                     jnb             acc.7,knAVP
1116 75B0EF         2870                                 mov         p3,#0efh
1119 E5B0           2871                                     mov             a,p3
111B 30E78D         2872                                     jnb             acc.7,rknMEM
111E 75B0DF         2873                                     mov             p3,#0dfh
1121 E5B0           2874                                     mov             a,p3    
1123 30E722         2875                                     jnb             acc.7,knmenu
1126                2876     an_t7:             ;;;;;;;;;;;;
                    2877                     
                    2878     ;       clr             c
                    2879     ;       mov             r1,#parN
                    2880     ;
                    2881     ;                       mov             r0,#diap
                    2882     ;                       mov             a,#6            
                    2883     ;                       subb    a,@r0
                    2884     ;                       jnc             goto7           ;         ;10-2..10-8
                    2885                               
                    2886     ;                       mov             @r1,#2          ;10-9..10-11            
                    2887                             
                    2888                             ;;;;;;;;;;;;
1126 799A           2889     goto7:                  mov             r1,#parT
1128 783D           2890                                     mov             r0,#chkl
112A B70108         2891                                     cjne    @r1,#1,not1_7
112D 7600           2892                                     mov             @r0,#00
112F 08             2893                                     inc             r0
1130 7602           2894                                     mov             @r0,#2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    46

1132 020000   F     2895                                     jmp             out7
                    2896                             
                    2897     
1135 B70208         2898     not1_7:                 cjne    @r1,#2,not2_7
1138 760E           2899                                             mov             @r0,#0eh;00
113A 08             2900                                     inc             r0
113B 7638           2901                                     mov             @r0,#38h;20
113D 020000   F     2902                                     jmp             out7
1140 7600           2903     not2_7:                 mov             @r0,#00
1142 08             2904                                     inc             r0
1143 76C8           2905                                     mov             @r0,#200
1145 020000   F     2906     merr:           jmp             out7
                    2907     
                    2908     
1148 2006FA         2909     knmenu: jb              bitvi11,merr
114B 201511         2910                                     jb              biteizm,menuoff
114E C204           2911                              clr            bitizm          ;off IZM
1150 D211           2912                                     setb            bitmenu
1152 900000   F     2913                                     mov             dptr,#teTESI    ;в буф2 записать ТЕСТ-ИЗМЕР
1155 120000   F     2914                                     call    lotext
                    2915                                     
1158 78B1           2916                                     mov             r0,#vichR
115A 7611           2917                                     mov             @r0,#11h
115C 020000   F     2918                                     jmp             onmem11
115F                2919     menuoff:
115F 78B1           2920                                     mov             r0,#vichR
1161 7600           2921                                     mov             @r0,#00
1163 C215           2922                                     clr             biteizm
1165 120000   F     2923                                     call    loadus
1168 020000   F     2924                                     jmp             out7
116B 75EF10         2925                                     mov             RSTSRC,#10h
                    2926                                     ;jmp            begin;onmem11
                    2927     
116E 020000   F     2928     rendkalib:              jmp             endkalib
                    2929     
1171 2012FA         2930     knAVP:  jb              bitklb,rendkalib        
1174 200505         2931                                     jb              bitavp,meavp
1177 D205           2932                                     setb    bitavp
1179 020000   F     2933                                     jmp             onmem11
117C C205           2934     meavp:                  clr             bitavp
117E 020000   F     2935                                     jmp             onmem11
                    2936     
1181 201207         2937     knleft: jb              bitklb,lefkl
                    2938                                     ;;;;;;;;
1184 79AE           2939                                mov          r1,#diap
1186 07             2940                                     inc             @r1             ;перекл диапазон 1 поз в сб
                             р массив
1187 B70A03         2941                                     cjne    @r1,#0ah,nodi6
118A 17             2942                                     dec             @r1
118B 8099           2943     lefkl:  jmp             an_t7
                    2944     
118D                2945     nodi6:             ;    cjne    @r1,#0,an_t7
118D 120000   F     2946                                      call    clmassix
1190 78B3           2947                                     mov             r0,#summa
1192 120000   F     2948                                     call    clear4  
1195 786A           2949                                     mov             r0,#rez_A0
1197 120000   F     2950                                     call    clear4  
119A 120000   F     2951                                     call    loadUS
119D 8087           2952                                jmp          an_t7
                    2953     
119F 200F0F         2954     knNUL:                  jb              bitnul,ybnul
11A2 D20F           2955                                     setb    bitnul
11A4 789C           2956                                     mov             r0,#rez_A3      ;A3
11A6 120000   F     2957                                     call    resar2
11A9 786A           2958                                     mov             r0,#rez_A0      
11AB 120000   F     2959                                     call    saver2;A0<-A3
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    47

11AE 020000   F     2960                                     jmp             goto7;an_t7
                    2961     
11B1 C20F           2962     ybnul:                  clr             bitnul
11B3 900000   F     2963                                      mov    DPTR,#ch0 
11B6 120000   F     2964                                     CALL   ldc_long          ; r2..r5 <-- 0
11B9 786A           2965                                     mov             r0,#rez_A0      ;A0=0
11BB 120000   F     2966                                     call    saver2
11BE 020000   F     2967                                     jmp             goto7;an_t7
                    2968     
11C1 30101E         2969     labelH:                 jnb             bitt2,nolah
11C4 75B0FB         2970                                     mov             p3,#0fbh   ;вход в режим изм Т
11C7 79B7           2971                                     mov             r1,#load;parT
11C9 20B70D         2972                                     jb              p3.7,rhnot1
11CC B70003         2973                                     cjne    @r1,#0,inct;
11CF 020000   F     2974                                     jmp             out7;hyest6
11D2 17             2975     inct:                   dec             @r1                     ;Tизм+1
                    2976                             
11D3 120000   F     2977                             call    loadT   ;в буфер2 записать текст  в соотв с     Tизм
11D6                2978     hnot2:          ;       call    ind
11D6 020000   F     2979                                     jmp             out7
                    2980     
11D9 020000   F     2981      rhnot1:                jmp             hnot1
                    2982      ;rnoviR:       jmp             noviR
11DC 020000   F     2983      rlabelK:       jmp             labelK
11DF 020000   F     2984      rlabelI:       jmp             labelI          
                    2985      ;;;;;;;;;;;;;;;;;;;
11E2 3014F7         2986     nolah:          jnb             bitvich,rlabelK 
                    2987                                     
                    2988                             ;;;;;;
                    2989                             ;увеличить счетчик задержки клавиатуры
                    2990                     ;;              mov             r0,#chkl
                    2991                     ;;              mov             @r0,#27h
                    2992                     ;;              inc             r0
                    2993                     ;;              mov             @r0,#10h
                    2994                             ;;;;;;
                    2995     
11E5 78B1           2996                             mov             r0,#vichR
11E7 B61128         2997                             cjne    @r0,#11h,rhnor11;rlabelI;;
11EA 75B0FB         2998                             mov             p3,#0fbh   ;<-
11ED 20B729         2999                             jb              p3.7,noh37;routF
11F0 B6110B         3000                     cjne    @r0,#11h,hr12
11F3 7613           3001                             mov             @r0,#13h        ;11= вычислить
11F5 900000   F     3002                             mov             dptr,#teOUT;teVICH
11F8 120000   F     3003     hvi1113:        call    lotext  ;в буфер 2 записать текст в соотв с состоянием
11FB 020000   F     3004                             jmp             goto7;outF
11FE B61207         3005     hr12:           cjne    @r0,#12h,hnor12
1201 7611           3006     lovich:         mov             @r0,#11h
1203 900000   F     3007                             mov             dptr,#teVICH
1206 80F0           3008                             jmp             hvi1113         
1208 B61307         3009     hnor12:         cjne    @r0,#13h,rhnor11
120B 7612           3010     loizmk:         mov             @r0,#12h
120D 900000   F     3011                             mov             dptr,#teIZMK    ;       изм конст
                    3012                                        
1210 80E6           3013                             jmp             hvi1113
                    3014     
1212 8045           3015     rhnor11:                jmp             hnor11
                    3016     
1214 8050           3017     rvvizko:                jmp             vvizko
1216 020000   F     3018     toutF:                  jmp     outF
                    3019     
1219 75B0F7         3020     noh37:          mov             p3,#0f7h
121C 20B7F7         3021                             jb              p3.7,toutF
121F B611F2         3022                             cjne    @r0,#11h,rvvizko
1222 D206           3023                             setb    bitvi11    ;нажат ввод ВЫЧИСЛИТЬ
1224 D204           3024              setb   bitizm
1226 534B07         3025                              anl            bufind+11,#07h
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    48

1229 434B10         3026                              orl            bufind+11,#10h;точка после 1 знакоместа
122C 020000   F     3027     routF:          jmp             out7;goto7;outF
                    3028     
                    3029     
                    3030     
122F 80E8           3031     rnoh37:         jmp             noh37
                    3032     
1231 B6120D         3033     norr11:         cjne    @r0,#12h,norr12
1234 75B0FB         3034                             mov             p3,#0fbh   ;<-
1237 20B7F5         3035                             jb              p3.7,rnoh37;routF
123A 760B           3036                             mov             @r0,#11;12->11
123C 80C3           3037                             jmp             lovich
                    3038     
123E 020000   F     3039     labelI2:                jmp             labelI
1241 B613FA         3040     norr12:         cjne    @r0,#13h,labelI2
1244 75B0FB         3041                             mov             p3,#0fbh   ;<-
1247 20B7E5         3042                             jb              p3.7,rnoh37
124A 7612           3043                             mov             @r0,#12h
124C 80BD           3044                             jmp             loizmk
                    3045                             ;;;;
124E C214           3046     clrvich:                clr             bitvich
1250 D204           3047                             setb    bitizm
1252 A8B2           3048                             mov             r0,marker
1254 76FF           3049                             mov             @r0,#0ffh
1256 020000   F     3050                              jmp    goto7;  routF
                    3051     
                    3052     ;rnoh37:                jmp             noh37
                    3053      ;ввод изм конст
1259 B612E5         3054     hnor11:         cjne    @r0,#12h,norr12;clrvich
125C 75B0FB         3055                              mov            p3,#0fbh   
125F 20B7CD         3056                             jb              p3.7,rnoh37;lovich;;изм конст <-  выч
1262 7611           3057                             mov             @r0,#11h
1264 809B           3058                             jmp             lovich
                    3059     
1266 78B1           3060     vvizko:         mov             r0,#vichR
1268 E6             3061                             mov             a,@r0
                    3062                     ;       cjne    @r0,#12h,clrvich
1269 B412E2         3063                             cjne    a,#12h,clrvich
126C 7621           3064                             mov             @r0,#21h                ;изм конст->a=+0000     (vv
                             od)
126E 78B2           3065                             mov             r0,#marker
1270 7604           3066                             mov             @r0,#4;9
1272 753A04         3067                             mov             movleft,#4
1275 753B07         3068                             mov             movrig,#7
1278 900000   F     3069                             mov             dptr,#teAequ0
127B 120000   F     3070                             call    lotext
                    3071                             
127E 120000   F     3072                             call    outA
1281 534B0F         3073                             anl                     bufind+11,#0fh
                    3074             ;       mov             a,bufind+11
                    3075             ;       anl             a,#0f0h
                    3076             ;       mov             bufind+11,a
1284 434B40         3077                             orl             bufind+11,#40h;бит точки после 7 знакоместа(a=000.0
                              v)
                    3078                             
1287 020000   F     3079                             jmp             goto7;routF
                    3080     ;hnor13:                jmp             hnor12          
128A B6210C         3081     izchi:          cjne    @r0,#21h,tlabelI
                    3082     ;<- при вводе цифр А                            
                    3083                     ;        mov            p3,#0fbh   
                    3084                     ;       jnb             p3.7,li21
                    3085             ;clr            bitmig
128D 78B2           3086                             mov             r0,#marker
128F 16             3087                             dec             @r0
1290 B60201         3088                             cjne    @r0,#2,li21
1293 06             3089                             inc             @r0;marker=3 +/-
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    49

1294 C219           3090     li21:           clr             bitmig
1296 020000   F     3091                             jmp             goto7;outF
                    3092     
1299 020000   F     3093     tlabelI:        jmp             labelI
                    3094     
                    3095     ;                       load    0 1 2 3 4 5             
129C 06050403       3096     sootv:          db              6,5,4,3,2,1;parT
12A0 0201                    
                    3097     ;
                    3098     
                    3099     ;нажата кн ввод при наборе Т
12A2 75B0F7         3100     hnot1:                  mov             p3,#0f7h
12A5 20B784         3101                                     jb              p3.7,routF;out7
12A8 B70541         3102                                     cjne    @r1,#5,nohnot1  ;r1=load
12AB 794A           3103                                     mov             r1,#bufind+10;в буфере 1 зажечь 10s
12AD E7             3104                                     mov             a,@r1
12AE 4440           3105                                     orl             a,#40h;.6
12B0 F7             3106                                     mov             @r1,a
12B1 8000           3107                                     jmp             loadb
                    3108                                     
                    3109                                     
12B3 789A           3110     loadB:                  mov             r0,#parT
12B5 900000   F     3111                                     mov             dptr,#sootv
12B8 79B7           3112                                     mov             r1,#load                
12BA E7             3113                                     mov             a,@r1;load
12BB 93             3114                                     movc    a,@a+dptr
12BC F6             3115                                     mov             @r0,a
12BD 120000   F     3116                                     call            loab12  ;установить B1,B2 в соотв с Tизм   
                             ??????
                    3117                                      ;r4=b1 r5=b2
12C0 120000   F     3118                                     call    iniacp;инициализация АЦП
12C3 120000   F     3119                                     call    loadUS
12C6 120000   F     3120                                     call    clmassix        
12C9 D204           3121                                     setb    bitizm
12CB C210           3122                                     clr             bitt2
12CD C3             3123                                      clr            c
12CE 789A           3124                                  mov                r0,#parT
12D0 79AF           3125                                      mov            r1,#parN
12D2 7402           3126                                  mov                a,#2
12D4 96             3127                                 subb                a,@r0
12D5 5005           3128                                 jnc                 loadB2
12D7 7701           3129                                     mov             @r1,#1;N=1         ;T>=2
12D9 020000   F     3130     bout7:                  jmp             goto7;out7
                    3131     
12DC B702FA         3132     loadB2:                 cjne    @r1,#2,bout7
12DF 7702           3133                                     mov             @r1,#2;N=2
12E1 020000   F     3134                                     jmp             goto7;out7
12E4                3135     nohnot2:                ;в буфере 1 зажечь <=0,1s
12E4 794A           3136                                     mov             r1,#bufind+10
12E6 E7             3137                                     mov             a,@r1
12E7 4410           3138                                     orl             a,#10h;.4
12E9 F7             3139                                     mov             @r1,a
12EA 80C7           3140                                     jmp             loadB
12EC B704F5         3141     nohnot1:                cjne    @r1,#4,nohnot2  ;ввод кнопка Т  
12EF 794A           3142                                     mov             r1,#bufind+10;в буфере 1 зажечь 1s
12F1 E7             3143                                     mov             a,@r1
12F2 4420           3144                                     orl             a,#20h;.5
12F4 F7             3145                                     mov             @r1,a
12F5 80BC           3146                                     jmp             loadB
                    3147     
                    3148     ;кнопка ПАМЯТЬ
12F7 C204           3149     knMEM:                  clr             bitizm          ;off IZM
12F9 900000   F     3150                                     mov             dptr,#teCLE
12FC 120000   F     3151                                     call    lotext    ;в буф2 записать ОЧИСТКА
12FF D20B           3152                                     setb    bitmem     ;нажата кнопка ПАМЯТЬ
1301 534BEF         3153                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    50

                             та
1304 78B0           3154                                     mov             r0,#level
1306 7611           3155                                     mov             @r0,#11h
1308 783D           3156     onmem11:                mov             r0,#chkl
130A 7603           3157                                     mov             @r0,#03
130C 08             3158                                     inc             r0
130D 76E8           3159                                     mov             @r0,#0e8h               ;1000
130F 020000   F     3160                                     jmp             out7;goto7;out7
                    3161     
1312 020000   F     3162     rnomemk:                jmp             nomemk          ;
                    3163     
1315 78B0           3164     outkmem:        mov                     r0,#level
1317 7600           3165                                             mov                     @r0,#0
1319 78B1           3166                                             mov                     r0,#vichR
131B 7600           3167                                             mov                     @r0,#0
131D C20B           3168                                             clr                     bitmem
131F C214           3169                                             clr                     bitvich
1321 C206           3170                                             clr                     bitvi11
1323 C211           3171                                             clr                     bitmenu
1325 D204           3172                                             setb            bitizm
1327 78B2           3173                                             mov                     r0,#marker
1329 76FF           3174                                             mov                     @r0,#0ffh
132B 020000   F     3175                                             jmp                     goto7   
132E                3176     labelK:
                    3177     
                    3178     ;;;;;;;;;;;;
132E 300BE1         3179                               jnb           bitmem,rnomemk          ;кн память (ввод и <-)
1331 75B0EF         3180                                     mov                     p3,#0efh
1334 30B7DE         3181                                     jnb                     p3.7,outkmem            ;отжатие кн
                              память на любом уровне обработки памяти
1337 78B0           3182                                      mov            r0,#level
1339 B6114E         3183                               cjne          @r0,#11h,klev1;nome11
133C 75B0FB         3184     lefmem11:         mov           p3,#0fbh
133F E5B0           3185                               mov           a,p3
1341 20E70E         3186                               jb            acc.7,rkvvod0
1344 B6110E         3187                               cjne          @r0,#11h,locle          ;<-memory
1347 7614           3188                               mov           @r0,#14h
1349 900000   F     3189     lolist:           mov           dptr,#teSTAT
134C 120000   F     3190                               call          lotext           ;СТАТИСТИКА
134F 020000   F     3191                               jmp   goto7;  outF
                    3192     
1352 020000   F     3193     rkvvod0:        jmp             kvvod0
                    3194     
                    3195     
1355 B6120B         3196     locle:          cjne            @r0,#12h,lowr           ;<-memory
1358 7611           3197                               mov           @r0,#11h                   ;ОЧИСТКА
135A 900000   F     3198     loadcle:          mov           dptr,#teCLE
135D 120000   F     3199                               call          lotext
1360 020000   F     3200                               jmp           goto7;outF
                    3201     
1363 B6130B         3202     lowr:                   cjne    @r0,#13h,lostat
1366 7612           3203                                             mov             @r0,#12h
1368 900000   F     3204      lowr1:         mov             dptr,#teWR                ;ЗАПИСЬ
136B 120000   F     3205                             call    lotext
136E 020000   F     3206                             jmp             goto7;outF
                    3207     
1371 7613           3208     lostat:         mov             @r0,#13h
1373 900000   F     3209                                     mov             dptr,#teLIST              ;ПРОСМОТР
1376 120000   F     3210                             call    lotext
1379 020000   F     3211                             jmp             goto7;outF
                    3212     
137C B6141A         3213     me_14:cjne              @r0,#14h,klev22
137F 7613           3214                                             mov             @r0,#13h
1381 900000   F     3215                             mov             dptr,#teLIST              ;;ПРОСМОТР
1384 120000   F     3216                             call    lotext
1387 020000   F     3217                             jmp             goto7
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    51

138A B61202         3218      klev1:          cjne   @r0,#12h,klev2
138D 80AD           3219                             jmp             lefmem11
138F B61302         3220     klev2:           cjne   @r0,#13h,klev3;11-14   klev22     ;11-13 нет
1392 80A8           3221                             jmp             lefmem11
1394 B61402         3222     klev3:           cjne   @r0,#14h,klev22;
1397 80A3           3223                             jmp             lefmem11
                    3224     ;<- vvod на более низких уровнях
1399 B62117         3225     klev22:         cjne    @r0,#21h,klev21
139C 75B0FB         3226     lev220:         mov             p3,#0fbh
139F 20B763         3227                             jb              p3.7,kgo23
13A2 B6210B         3228                             cjne    @r0,#21h,kfullr
13A5 7622           3229                             mov             @r0,#22h
13A7 900000   F     3230                             mov             dptr,#teBL
13AA 120000   F     3231                             call    lotext
13AD 020000   F     3232                             jmp             goto7;outF
13B0 020000   F     3233     kfullr:         jmp             kfull                           
13B3 B6220E         3234     klev21:         cjne    @r0,#22h,klev23
13B6 80E4           3235                             jmp             lev220
                    3236     
13B8 020000   F     3237     rlabL2:         jmp             labL2
13BB 020000   F     3238     rlabM:          jmp             labM
13BE 020000   F     3239     ques:                   jmp             out7
13C1 020000   F     3240     ddoutfr:        jmp             ddoutf
                    3241     
13C4 B623F4         3242     klev23:          cjne   @r0,#23h,rlabM
13C7 75B0FB         3243                              mov    p3,#0fbh
13CA 30B7F1         3244                              jnb            p3.7,ques;errr labL2
13CD 75B0F7         3245                              mov    p3,#0f7h
13D0 20B7EE         3246                              jb             p3.7,ddoutfr
                    3247                                             ;       считать с индикатора  
13D3 C3             3248                                     clr                     c
13D4 E547           3249                                mov          a,bufind+7      
13D6 9430           3250                                      subb           a,#30h
13D8 B40002         3251                                      cjne           a,#0,chaibl
13DB 7401           3252                                      mov            a,#1                    ;номера блоков 1..4
13DD F538           3253     chaibl:  mov            nblok,a
                    3254                                
                    3255                              ;очистить блок памяти с набранным номером
                    3256                              ;150h..1000h( 150h+nblok*320h)
13DF 120000   F     3257                                     call            adrblok         ;dptr-
                    3258     
13E2 79B8           3259                                     mov                     r1,#work                ;обьем блок
                             а
13E4 7703           3260                                     mov                     @r1,#03
13E6 09             3261                                     inc                     r1
13E7 7720           3262                                     mov                     @r1,#20h                        ;32
                             0h
                    3263     
13E9                3264     goonoff:
13E9 E4             3265                                     clr                     a
13EA F0             3266                                     movx            @dptr,a
13EB A3             3267                                     inc                     dptr
                    3268     
13EC 79B9           3269                                     mov                     r1,#work+1
13EE 120000   F     3270                                     call            chminus
13F1 78B8           3271                                     mov             r0,#work
13F3 E6             3272                             mov             a,@r0
13F4 30E7F2         3273                             jnb             acc.7,goonoff
                    3274     
13F7 C20B           3275                              clr    bitmem  ;сбр признак памяти 
13F9 D204           3276                              setb   bitizm
13FB 78B2           3277                              mov            r0,#marker
13FD 76FF           3278                              mov            @r0,#0ffh
13FF 020000   F     3279                              jmp    goto7
                    3280     
1402 020000   F     3281     rddoutf:        jmp             ddoutf
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    52

                    3282     
                    3283     ;vvod   БЛОК->БЛОК 00           
1405 75B0F7         3284     kgo23:           mov    p3,#0f7h
1408 20B7F7         3285                             jb              p3.7,rddoutf
140B B6216B         3286                             cjne    @r0,#21h,go23no
                    3287                             ;очистить память 150..dd0h
                    3288                             ;1й блок
140E 900150         3289                              mov                    dptr,#150h
1411 79B8           3290                                     mov                     r1,#work                ;обьем блок
                             а
1413 7703           3291                                     mov                     @r1,#03
1415 09             3292                                     inc                     r1
1416 7720           3293                                     mov                     @r1,#20h                        ;32
                             0h
                    3294     
1418                3295     gooff1:
1418 E4             3296                                     clr                     a
1419 F0             3297                                     movx            @dptr,a
141A A3             3298                                     inc                     dptr
                    3299     
141B 79B9           3300                                     mov                     r1,#work+1
141D 120000   F     3301                                     call            chminus
1420 78B8           3302                                     mov             r0,#work
1422 E6             3303                             mov             a,@r0
1423 30E7F2         3304                             jnb             acc.7,gooff1
                    3305     ;2й блок
1426 900470         3306     mov                     dptr,#470h
1429 79B8           3307                                     mov                     r1,#work                ;обьем блок
                             а
142B 7703           3308                                     mov                     @r1,#03
142D 09             3309                                     inc                     r1
142E 7720           3310                                     mov                     @r1,#20h                        ;32
                             0h
                    3311     
1430                3312     gooff2:
1430 E4             3313                                     clr                     a
1431 F0             3314                                     movx            @dptr,a
1432 A3             3315                                     inc                     dptr
                    3316     
1433 79B9           3317                                     mov                     r1,#work+1
1435 120000   F     3318                                     call            chminus
1438 78B8           3319                                     mov             r0,#work
143A E6             3320                             mov             a,@r0
143B 30E7F2         3321                             jnb             acc.7,gooff2
                    3322     
                    3323     ;3й блок
143E 900490         3324                             mov                     dptr,#490h
1441 79B8           3325                                     mov                     r1,#work                ;обьем блок
                             а
1443 7703           3326                                     mov                     @r1,#03
1445 09             3327                                     inc                     r1
1446 7720           3328                                     mov                     @r1,#20h                        ;32
                             0h
                    3329     
1448                3330     gooff3:
1448 E4             3331                                     clr                     a
1449 F0             3332                                     movx            @dptr,a
144A A3             3333                                     inc                     dptr
                    3334     
144B 79B9           3335                                     mov                     r1,#work+1
144D 120000   F     3336                                     call            chminus
1450 78B8           3337                                     mov             r0,#work
1452 E6             3338                             mov             a,@r0
1453 30E7F2         3339                             jnb             acc.7,gooff3
                    3340     ;4й блок
1456 900AB0         3341     mov                     dptr,#0ab0h
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    53

1459 79B8           3342                                     mov                     r1,#work                ;обьем блок
                             а
145B 7703           3343                                     mov                     @r1,#03h
145D 09             3344                                     inc                     r1
145E 7720           3345                                     mov                     @r1,#20h                        ;32
                             0h
                    3346     
1460                3347     gooff4:
1460 E4             3348                                     clr                     a
1461 F0             3349                                     movx            @dptr,a
1462 A3             3350                                     inc                     dptr
                    3351     
1463 79B9           3352                                     mov                     r1,#work+1
1465 120000   F     3353                                     call            chminus
1468 78B8           3354                                     mov             r0,#work
146A E6             3355                             mov             a,@r0
146B 30E7F2         3356                             jnb             acc.7,gooff4
146E C20B           3357                             clr             bitmem
1470 D204           3358                             setb    bitizm
1472 78B2           3359                                     mov             r0,#marker
1474 76FF           3360                              mov            @r0,#0ffh
1476 020000   F     3361                             jmp             goto7
                    3362     
1479 7623           3363     go23no:    mov          @r0,#23h
147B 753B08         3364                                             mov                     movrig,#8
147E 753A07         3365                                             mov             movleft,#7
1481 8055           3366                             jmp             loblok;БЛОК 00
                    3367     
1483 7621           3368     kfull:          mov             @r0,#21h
1485 8025           3369                             jmp             gofull
                    3370                             
                    3371                                             
1487 020000   F     3372     nomemk:         jmp             labelS                  ;нажат ввод меню
                    3373                             
148A 75B0FB         3374     nome11:           mov           p3,#0fbh
148D E5B0           3375                               mov           a,p3
148F 20E70D         3376                               jb            acc.7,kvvod0
1492 B61205         3377                               cjne          @r0,#12h,mem12no        
1495 7611           3378                               mov           @r0,#11h                ;ОЧИСТКА
1497 020000   F     3379                               jmp            loadcle
                    3380     
149A                3381     mem12no:        ;cjne           @r0,#13h,lowr           
149A 7612           3382                               mov           @r0,#12h                   ;
149C 020000   F     3383                               jmp           lowr1                     ;ЗАПИСЬ
                    3384     
149F 75B0F7         3385     kvvod0:           mov           p3,#0f7h                        ;knopka vvod
14A2 20B70F         3386                               jb            p3.7,ddoutf
14A5 78B0           3387                               mov           r0,#level
14A7 B61129         3388                               cjne          @r0,#11h,mvv11
14AA 7621           3389                               mov           @r0,#21h                ;ПОЛНАЯ
14AC 900000   F     3390     gofull:           mov           dptr,#teFULL
14AF 120000   F     3391                               call          lotext
14B2 8049           3392                                     jmp             mlabL2  ;<-????????/
                    3393     
14B4                3394     ddoutf:         ;<- БЛОК 00(ОЧИСТКА)
                    3395     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3396     ;т е сохранить ее в ячейке для мигания в противном случае
                    3397     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3398     ;       знакоместа
14B4 78B2           3399                                                     mov             r0,#marker
14B6 7440           3400                                     mov             a,#bufind
14B8 26             3401                                             add             a,@r0                   ;a=bufind+m
                             arker
14B9 F9             3402                                             mov             r1,a
14BA 19             3403                                             dec             r1      ;       inc             r1
14BB 873C           3404                                             mov             savba,@r1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    54

14BD C219           3405                                             clr             bitmig
                    3406     ;;;;;;;;;;;;;;;;
14BF 78B2           3407                       mov           r0,#marker      ;курсор слева   ?
14C1 E53A           3408                             mov             a,movleft
14C3 C3             3409                             clr             c
14C4 96             3410                             subb    a,@r0
14C5 7006           3411                             jnz        left21
14C7 E53B           3412                             mov             a,movrig;уст в правую позицию
14C9 F6             3413                             mov             @r0,a
                    3414     
14CA 020000   F     3415                             jmp             goto7                                            
14CD E53A           3416     left21:         mov             a,movleft;уст в левую позицию
14CF F6             3417                             mov             @r0,a   
14D0 020000   F     3418                             jmp             goto7
                    3419     
                    3420     
14D3 B6120F         3421     mvv11:            cjne          @r0,#12h,mvv12
14D6 7631           3422                                     mov             @r0,#31h
14D8 900000   F     3423     loblok:                 mov             dptr,#teBL0;БЛОК 0
14DB 120000   F     3424                                     call    lotext
14DE 78B2           3425                                     mov             r0,#marker
14E0 7607           3426                                     mov             @r0,#7
                    3427                                     ;mov            movrig,#9
                    3428                                     ;mov            movleft,#6
14E2 020000   F     3429                                     jmp             goto7;outF
14E5 B61411         3430     mvv12:  cjne            @r0,#14h,bl_li
14E8 7661           3431                                     mov                     @r0,#61h
14EA 900000   F     3432                                     mov             dptr,#teMIN;
14ED 120000   F     3433                                     call    lotext
14F0 120000   F     3434                                     call    vichmin
14F3 120000   F     3435                                     call    z_1s
14F6 020000   F     3436                                     jmp             out7;goto7;outF
                    3437     
14F9 7641           3438     bl_li:          mov             @r0,#41h                ; БЛОК 00(ЗАПИСЬ И ПРОСМОТР)
14FB 80DB           3439                                     jmp             loblok
                    3440     
                    3441     
                    3442     
14FD                3443     mlabL2:         ;jmp            labL2
                    3444                                             ;  уст курсор в правую позицию 
                    3445                                     ;                               29.12.06
                    3446     ;;;;;;;;;;;;;;;;;;
                    3447     ;необходимо не портить цифру в следуюем справа знакоместе
                    3448     ;т е сохранить ее в ячейке для мигания в противном случае
                    3449     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3450     ;       знакоместа
14FD 78B2           3451                                             mov             r0,#marker
14FF 7440           3452                                     mov             a,#bufind
1501 26             3453                                             add             a,@r0                   ;a=bufind+m
                             arker
1502 F9             3454                                             mov             r1,a
1503 09             3455                                             inc             r1
1504 873C           3456                                             mov             savba,@r1
                    3457     ;;;;;;;;;;;;;;;;
1506 78B2           3458                       mov           r0,#marker      ;курсор справа  ?
1508 E53B           3459                             mov             a,movrig
150A C3             3460                             clr             c
150B 96             3461                             subb    a,@r0
150C 6006           3462                             jz         equ2l
150E E53B           3463                             mov             a,movrig;уст в правую позицию
1510 F6             3464                             mov             @r0,a
                    3465     ;                       lool
1511 020000   F     3466                             jmp             goto7                                            
1514 E53A           3467     equ2l:          mov             a,movleft;уст в левую позицию
1516 F6             3468                             mov             @r0,a   
1517 020000   F     3469                             jmp             goto7
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    55

                    3470                     
                    3471     
151A B63159         3472     labM:                   cjne    @r0,#31h,nom31
151D 75B0FB         3473                                     mov             p3,#0fbh
1520 30B7DA         3474                                     jnb             p3.7,mlabL2
1523 75B0F7         3475                                mov          p3,#0f7h
1526 20B78B         3476                                jb           p3.7,ddoutf
                    3477                                
1529 7632           3478                                mov          @r0,#32h                        ;ИНТ 0000
                    3479                                     ;       считать с индикатора  
152B C3             3480     blokvv:         clr                     c
152C E547           3481                                mov          a,bufind+7      
152E 9430           3482                                      subb           a,#30h
1530 B40002         3483                                      cjne           a,#0,blokvvc
1533 7401           3484                                      mov            a,#1                    ;номера блоков 1..4
                    3485     
1535 F538           3486     blokvvc: mov            nblok,a
1537 900000   F     3487                                mov          dptr,#teINT;ИНТ 0000c
153A 120000   F     3488                                call         lotext
                    3489                                      ;anl           bufind+11,#0efh
153D 78B2           3490                                mov          r0,#marker
153F 7605           3491                                mov          @r0,#5
1541 753B08         3492                                mov          movrig,#8
1544 753A05         3493                                mov          movleft,#5
1547 789A           3494                                      mov            r0,#parT
1549 B60609         3495                                     cjne            @r0,#6,innot6
154C 534BF0         3496                                     anl                     bufind+11,#0f0h;after 5- 0.000c
154F 434B80         3497                                     orl                     bufind+11,#80h
1552 020000   F     3498                                     jmp                     goto7
1555 B60309         3499     innot6: cjne            @r0,#3,innot3
1558 534BF0         3500                                     anl                     bufind+11,#0f0h;after 7- 000.0c
155B 434B20         3501                                     orl                     bufind+11,#20h
                    3502                                     ;call           ind
155E 020000   F     3503                                     jmp                     out7;goto7
1561 C3             3504     innot3: clr                     c
1562 7403           3505                                     mov                     a,#3
1564 96             3506                                     subb            a,@r0
1565 5009           3507                                     jnc                     innot1_2
1567 534BF0         3508                                     anl                     bufind+11,#0f0h;after 6- 00.00c
156A 434B40         3509                                     orl                     bufind+11,#40h
156D 020000   F     3510                                     jmp                     goto7
                    3511     
1570                3512     innot1_2:
1570 534BF0         3513                                     anl                     bufind+11,#0f0h;0000c
                    3514                                                                     
1573 020000   F     3515     rgoto7: jmp        goto7;outF
                    3516     
1576 B63260         3517     nom31:             cjne         @r0,#32h,nom32
1579 75B0FB         3518                                     mov             p3,#0fbh
157C 20B71F         3519                                     jb              p3.7,vvinte             ;ввод интервал;no31
                             n
                    3520                                     
157F                3521     lefcur:         ;;кн <- 32 нач блок 000
                    3522     ;необходимо не портить цифру в следуюем сслева знакоместе
                    3523     ;т е сохранить ее в ячейке для мигания в противном случае
                    3524     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    3525     ;       знакоместа
157F C219           3526                                                     clr             bitmig
1581 78B2           3527                                                     mov             r0,#marker;нажата кн <- при
                              вводе цифр нач блок 000
1583 7440           3528                                     mov             a,#bufind
1585 26             3529                                             add             a,@r0                   ;a=bufind+m
                             arker
1586 F9             3530                                             mov             r1,a
1587 19             3531                                             dec             r1;;;;;;;;;;;
1588 873C           3532                                             mov             savba,@r1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    56

                    3533                                             
158A 78B2           3534                                                     mov             r0,#marker      ;курсор сле
                             ва?
158C E53A           3535                             mov             a,movleft
158E C3             3536                             clr             c
158F 96             3537                             subb    a,@r0
1590 7006           3538                             jnz        noequ2
1592 E53B           3539                             mov             a,movrig
1594 F6             3540                             mov             @r0,a;уст в крайнюю правую позицию
1595 020000   F     3541                             jmp             goto7
1598 120000   F     3542     noequ2:         call    marle;сдвинуть курсор в  лево на 1позицию       
159B 020000   F     3543                             jmp        goto7        
                    3544                                                                       
                    3545     
                    3546     ;;;;;;;;;;;;;;;;;;
159E                3547     vvinte:         ;ввод интервал                          
159E 75B0F7         3548     no31n:             mov          p3,#0f7h
15A1 20B7CF         3549                                     jb              p3.7,rgoto7
15A4 7633           3550                                     mov             @r0,#33h
                    3551                                     ;считать с индикатора введенный интервал
15A6 7F0A           3552                                             mov             r7,#10
15A8 7853           3553                                     mov             r0,#adec
15AA 120000   F     3554                                     call    clearN
15AD 120000   F     3555                                     call    upak4                   
15B0 784F           3556                                     mov             r0,#abin
15B2 7953           3557                                     mov             r1,#adec                        ;мл        
                              ст
15B4 120000   F     3558                                     call    decbin                  ;abin..abin+3 (hex)
15B7 794F           3559                                     mov             r1,#abin
15B9 78CE           3560                                     mov             r0,#interva+1
15BB E7             3561                                     mov             a,@r1
15BC F6             3562                                     mov             @r0,a
15BD 18             3563                                     dec             r0
15BE 09             3564                                     inc             r1
15BF E7             3565                                     mov             a,@r1
15C0 F6             3566                                     mov             @r0,a
                    3567                                     
15C1 78D5           3568                                     mov             r0,#volume                      ;объем блок
                             а
15C3 7600           3569                                     mov             @r0,#0
15C5 08             3570                                     inc             r0
15C6 76C7           3571                                     mov             @r0,#0c7h
15C8 120000   F     3572                                     call            adrblok;dptr
15CB 120000   F     3573                                     call            save_hl;1я ячейка блока
15CE 78B2           3574                                mov          r0,#marker
15D0 76FF           3575                                mov          @r0,#0ffh
15D2 D204           3576                                      setb           bitizm
15D4 C20B           3577                                      clr            bitmem
15D6 020000   F     3578                                jmp     goto7;
                    3579     
                    3580     
15D9 B6332B         3581     nom32:           cjne           @r0,#33h,nom33
15DC 75B0FB         3582                              mov            p3,#0fbh
15DF 30B79D         3583                              jnb            p3.7,lefcur
15E2 75B0F7         3584                              mov            p3,#0f7h
15E5 20B78B         3585                              jb             p3.7,rgoto7
                    3586                              ;запомнить номер ячейки конца блока
15E8 7634           3587                              mov    @r0,#34h
15EA 7F0A           3588     INTn:                   mov             r7,#10
15EC 7853           3589                                     mov             r0,#adec
15EE 120000   F     3590                                     call    clearN
15F1 120000   F     3591                                     call    upak3                   
15F4 784F           3592                                     mov             r0,#abin
15F6 7953           3593                                     mov             r1,#adec                        ;мл        
                              ст
15F8 120000   F     3594                                     call    decbin                  ;abin..abin+3 (hex)
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    57

15FB 120000   F     3595                                     call    loadr2                  ;r2..r5
15FE 120402         3596                                     call    altof                   ;r2..r5->int
1601 020000   F     3597     dgoto7:                  jmp            goto7
                    3598     
1604 020000   F     3599     rlefcur:                jmp             lefcur
                    3600     
1607 B6345B         3601     nom33:          cjne            @r0,#34h,labelP
160A 75B0FB         3602                               mov           p3,#0fbh
160D 30B7F4         3603                              jnb            p3.7,rlefcur
1610 75B0F7         3604                              mov            p3,#0f7h
1613 20B7EB         3605                              jb             p3.7,dgoto7
1616 7635           3606                              mov            @r0,#35h
1618 78B2           3607                              mov            r0,#marker
161A 76FF           3608                              mov            @r0,#0ffh
                    3609                              ;T1<-число на индикаторе
                    3610                                               ;vvod КОН БЛ 000
161C 78CF           3611                              mov            r0,#chbuf               ;счетчик периода загрузки в
                              буфер и интерфейс
161E 7630           3612                              mov            @r0,#30h  
1620 C20B           3613                              clr            bitmem
1622 D204           3614                              setb           bitizm;;;;      
1624 020000   F     3615                             jmp        goto7
1627 020000   F     3616     vodm11_15:                      jmp             vvodm11_15
162A 020000   F     3617     me11_15de:                      jmp             me11_15dec
162D 020000   F     3618     moutkmem:                               jmp             outkmem
                    3619     
                    3620     ;обработка кнопки меню ввод
1630 301132         3621     labelS:         jnb                     bitmenu,labelP
1633 75B0DF         3622                                             mov                     p3,#0dfh
1636 30B7F4         3623                                             jnb                     p3.7,moutkmem
1639 78B1           3624                                             mov                     r0,#vichR
163B 7415           3625                                             mov                     a,#15h
163D C3             3626                                             clr                     c
163E 96             3627                                             subb            a,@r0
163F 4021           3628                                             jc                      rme21_23
                    3629                             
1641 75B0FB         3630                                             mov                     p3,#0fbh
1644 20B7E0         3631                                             jb                      p3.7,vodm11_15
1647 78B1           3632                                             mov                     r0,#vichR
1649 B611DE         3633                                             cjne                    @r0,#11h,me11_15de;<-
164C 7615           3634                                             mov                     @r0,#15h
164E 900000   F     3635                                             mov                     dptr,#teKALIB
1651 120000   F     3636                                             call            lotext
1654 020000   F     3637                                             jmp                     onmem11
1657 C211           3638     menuon:         clr             bitmenu                 ;off menu
1659 D204           3639                                             setb    bitizm
                    3640     
165B 78B1           3641                                     mov             r0,#vichR
165D 7600           3642                                     mov             @r0,#0
165F 020000   F     3643                                     jmp             onmem11
                    3644     
                    3645                                             ;;;;;
                    3646             
1662 020000   F     3647     rme21_23:               jmp             me21_23 
                    3648                             
                    3649     ;режим просмотра
1665 B64130         3650     labelP:                 cjne            @r0,#41h,govvlist
1668 7642           3651                                                     mov                     @r0,#42h
                    3652                                                     ;       считать с индикатора  
166A C3             3653                                             clr                     c
166B E547           3654                                mov          a,bufind+7      
166D 9430           3655                                      subb           a,#30h
166F B40002         3656                                      cjne           a,#0,chaipr
1672 7401           3657                                      mov            a,#1
1674 F538           3658     chaipr:                          mov            nblok,a
1676 900000   F     3659                                mov          dptr,#teCH;ОТСЧЕТ 000
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    58

1679 120000   F     3660                                call         lotext
167C 534BEF         3661                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
167F 78B2           3662                                mov          r0,#marker
1681 7607           3663                                mov          @r0,#7
1683 753B09         3664                                mov          movrig,#9
1686 753A07         3665                                mov          movleft,#7
1689 120000   F     3666                                             call            z_1s
168C 020000   F     3667                        jmp     goto7;outF
168F 020000   F     3668     label43:                jmp             label7
                    3669     
1692 020000   F     3670     rlist_43:                       jmp                     list_43                            
                                  
1695 020000   F     3671     mlabL2r:                        jmp                     mlabL2
1698 B642F7         3672     govvlist:                       cjne            @r0,#42h,rlist_43
169B 75B0FB         3673                                                                     mov                     p3,
                             #0fbh
169E 30B7F4         3674                                                             jnb                     p3.7,mlabL2
                             r;кн <- ОТСЧЕТ 000
16A1 75B0F7         3675                                                             mov                     p3,#0f7h
16A4 20B7E8         3676                                                             jb                      p3.7,label4
                             3
16A7 7643           3677                                                             mov                     @r0,#43h;vv
                             od 
16A9 78B2           3678                                                             mov                     r0,#marker
16AB 76FF           3679                                                             mov                     @r0,#0ffh
16AD 7F0A           3680                                                                     mov             r7,#10
16AF 7853           3681                                     mov             r0,#adec
16B1 120000   F     3682                                     call    clearN
16B4 120000   F     3683                                     call    upak3                   
16B7 784F           3684                                     mov             r0,#abin
16B9 7953           3685                                     mov             r1,#adec                        ;мл        
                              ст
16BB 120000   F     3686                                     call    decbin                  ;abin..abin+3 (hex)
16BE 120000   F     3687                                     call    loadr2                  ;r2..r5
16C1 ED             3688                                     mov             a,r5                            ;сохр номер
                              лемента
16C2 F537           3689                                     mov             nelem,a
16C4 120402         3690                                     call    altof                   ;r2..r5->int
16C7 900000   F     3691                                     mov             dptr,#ch_1;
16CA 120000   F     3692                                     call    ldc_ltemp                       ;r8..r11
16CD 1201D1         3693                                     call    flsub
16D0 900000   F     3694                                     mov             dptr,#ch_4;
16D3 120000   F     3695                                     call    ldc_ltemp                       ;r8..r11
16D6 120203         3696                                     call    flmul                           ;(n(номер отсчета)-
                             1)*4+адр нач блока
16D9 120343         3697                                     call            ftol                    ;r2..r5->hex
16DC C002           3698                                     push            rr2
16DE C003           3699                                     push            rr3
16E0 C004           3700                                     push            rr4
16E2 C005           3701                                     push            rr5
16E4 120000   F     3702                                     call            adrblok;dptr-
16E7 D005           3703                                     pop                     rr5
16E9 D004           3704                                     pop                     rr4
16EB D003           3705                                     pop                     rr3
16ED D002           3706                                     pop                     rr2
16EF 79D4           3707                                     mov                     r1,#saven_bl+1;сохр адрес внешн озу
                              введенного лемента
16F1 E582           3708                                     mov                     a,dpl
16F3 2D             3709                                     add                     a,r5
16F4 F582           3710                                     mov                     dpl,a
16F6 F7             3711                                     mov                     @r1,a           ;low
16F7 E583           3712                                     mov                     a,dph
16F9 3C             3713                                     addc            a,r4
16FA F583           3714                                     mov                     dph,a
16FC 19             3715                                     dec                     r1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    59

16FD F7             3716                                     mov                     @r1,a                   ;high
                    3717                             
16FE                3718     li42_43:
16FE 120000   F     3719                                     call            reA3_X          ;r2..r5/выдать рез из внешн
                              пам на индикатор
1701 900000   F     3720                                     mov             dptr,#ch10;
1704 120000   F     3721                                     call    ldc_ltemp
1707 120000   F     3722                                     call    zdiv    
                    3723                                     ;;;;;;;;;;;
170A 120000   F     3724                                     call    maform
                    3725                                     ;;;;
                    3726     
                    3727                                     ;;;;;;;
170D 784F           3728                                             mov             r0,#abin
170F 120000   F     3729                                             call    saver2
1712 7853           3730                                             mov             r0,#adec
1714 7952           3731                                             mov             r1,#abin+3      ;hex->10
1716 120000   F     3732                                             call    bindec
                    3733                                     
1719 785C           3734                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
171B 7945           3735                                             mov             r1,#bufind+5
171D 7F07           3736                                             mov             r7,#7
171F E6             3737     ch43:                           mov             a,@r0
1720 2430           3738                                             add             a,#30h
1722 F7             3739                                             mov             @r1,a
1723 19             3740                                             dec             r1
1724 18             3741                                             dec             r0
1725 DFF8           3742                                             djnz    r7,ch43
1727 7847           3743                                             mov             r0,#bufind+7
1729 762D           3744                                             mov             @r0,#2dh          ;-2..-9
172B 7840           3745                                             mov             r0,#bufind
172D 762B           3746                                             mov             @r0,#2bh
172F 300202         3747                                             jnb             znmat,nozzmi43;bitznak,nozzmi
1732 762D           3748                                             mov             @r0,#2dh
1734 79AE           3749     nozzmi43:                               mov             r1,#diap
1736 7848           3750                                             mov             r0,#bufind+8
1738 E7             3751                                             mov             a,@r1
1739 B40808         3752                                             cjne    a,#8,nodi8_43
173C 7630           3753                                             mov             @r0,#30h                 ;10-10
173E 18             3754                                             dec             r0
173F 7663           3755                                             mov             @r0,#63h;31h
1741 08             3756                                             inc             r0
1742 800E           3757                                             jmp             see_l43
1744 B40908         3758     nodi8_43:       cjne    a,#9,nodi9_43
                    3759                                     
1747 7631           3760                                             mov             @r0,#31h           ;10-11
1749 18             3761                                             dec             r0
174A 7663           3762                                             mov             @r0,#63h;31h
                    3763                                     
174C 08             3764                                             inc             r0
174D 8003           3765                                             jmp             see_l43
174F 2432           3766     nodi9_43:               add             a,#32h
1751 F6             3767                                             mov             @r0,a;
1752 08             3768     see_l43:                        inc             r0
1753 7641           3769                                             mov             @r0,#"A";"E";
1755 08             3770                                             inc             r0
1756 7600           3771                                             mov             @r0,#00h ;=feh в нач установе для п
                             оджига всех сегм
1758 08             3772                                             inc             r0;             mov             buf
                             ind+11
1759 76D0           3773                                             mov             @r0,#0d0h               ;bufind+11.
                             4 точка после первой цифры
175B 120000   F     3774     out43:          call            ind
175E 120000   F     3775                                             call            z_1s
1761 020000   F     3776                                             jmp             out7                               
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    60

                                  
                    3777     
                    3778                                     ;;;;;;;;        
1764 783D           3779     label7: mov             r0,#chkl
1766 7604           3780                                     mov             @r0,#04;3
1768 08             3781                                     inc             r0
1769 76E8           3782                                     mov             @r0,#0e8h               ;1000
176B 020000   F     3783                                     jmp             out7;
176E B64351         3784     list_43:                cjne    @r0,#43h,noli_43
1771 75B0FB         3785                                                     mov             p3,#0fbh                ;43
                             h <-
1774 20B70A         3786                                                     jb              p3.7,vvod43             ;vv
                             od
1777 C20B           3787                                                     clr             bitmem
1779 D204           3788                                                     setb    bitizm
177B 78B2           3789                                                     mov             r0,#marker
177D 76FF           3790                                                     mov             @r0,#0ffh
177F 80E3           3791                                                     jmp             label7;по кн <- выход из пр
                             осмотра
                    3792     
1781 7644           3793     vvod43:                 mov             @r0,#44h
1783 E537           3794                                                     mov             a,nelem;вывод порядкового н
                             омера в блоке 
1785 F552           3795                                                     mov             abin+3,a
1787 04             3796                                                     inc             a
1788 F537           3797                                                     mov             nelem,a
178A E4             3798                                                     clr             a
178B F551           3799                                                     mov             abin+2,a
178D F550           3800                                                     mov             abin+1,a
178F F54F           3801                                                     mov             abin,a
                    3802                                             
1791 7853           3803                                             mov             r0,#adec
1793 7952           3804                                             mov             r1,#abin+3      ;hex->10
1795 120000   F     3805                                             call    bindec
1798 7840           3806                                             mov             r0,#bufind;почистить индикатор
179A 7F0A           3807                                             mov             r7,#10
179C 7420           3808                                             mov             a,#20h
179E F6             3809     cle20:          mov             @r0,a
179F 08             3810                                             inc             r0
17A0 DFFC           3811                                             djnz    r7,cle20
                    3812                                             ;;;;;;
17A2 900000   F     3813                                             mov             dptr,#teCH;ОТСЧЕТ 000
17A5 120000   F     3814                                call         lotext
17A8 534BEF         3815                                     anl             bufind+11,#0efh;убрать точку с 1го знакомес
                             та
17AB 785C           3816                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
17AD 7949           3817                                             mov             r1,#bufind+9
17AF 7F03           3818                                             mov             r7,#3
17B1 E6             3819     ch43_42:                                mov             a,@r0
17B2 2430           3820                                             add             a,#30h
17B4 F7             3821                                             mov             @r1,a
17B5 19             3822                                             dec             r1
17B6 18             3823                                             dec             r0
17B7 DFF8           3824                                             djnz    r7,ch43_42
17B9 120000   F     3825                                             call            ind
17BC 120000   F     3826                                             call            z_1s
17BF 020000   F     3827                                             jmp             out7
17C2 B64419         3828     noli_43:        cjne            @r0,#44h,vvosta
17C5 7643           3829                                             mov                     @r0,#43h
17C7 79D4           3830                                                     mov                     r1,#saven_bl+1
17C9 E7             3831                                                     mov                     a,@r1
17CA F582           3832                                                     mov                     dpl,a
17CC 19             3833                                                     dec                     r1
17CD E7             3834                                                     mov                     a,@r1;high
17CE F583           3835                                                     mov                     dph,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    61

17D0 A3             3836                                                     inc                     dptr
17D1 A3             3837                                                     inc                     dptr
17D2 A3             3838                                                     inc                     dptr
17D3 A3             3839                                                     inc                     dptr
17D4 E583           3840                                                     mov                     a,dph
17D6 F7             3841                                                     mov                     @r1,a
17D7 09             3842                                                     inc                     r1
17D8 E582           3843                                                     mov                     a,dpl
17DA F7             3844                                                     mov                     @r1,a              
                                          ;сохр адр внешн озу
17DB 020000   F     3845                                             jmp                     li42_43;вывод значения след
                             ующего в блоке
                    3846     
17DE B66111         3847     vvosta:                 cjne            @r0,#61h,vvostad
17E1 7662           3848                                                     mov                     @r0,#62h
17E3 900000   F     3849                                                     mov                     dptr,#teMAX;
17E6 120000   F     3850                                                     call            lotext
17E9 120000   F     3851                                                     call            vichmax
17EC 120000   F     3852                                                     call            z_1s
17EF 020000   F     3853                                                     jmp             goto7
                    3854     
17F2                3855     vvostad:                ;cjne           @r0,#61h
17F2 7663           3856                                                     mov                     @r0,#63h
17F4 900000   F     3857                                                     mov             dptr,#teMid;
17F7 120000   F     3858                                                     call    lotext
17FA 120000   F     3859                                                     call            vichmean
17FD 020000   F     3860                                                     jmp             goto7
                    3861     
1800 020000   F     3862     rLABELP:                jmp                     LABELP
1803 78B1           3863     vvodm11_15:     mov                     r0,#vichR;vvod
1805 75B0F7         3864                                                     mov                     p3,#0f7h
1808 20B7F5         3865                                             jb                      p3.7,rLABELP;????
                    3866                                     
                    3867     
180B B61112         3868                                             cjne                    @r0,#11h,tome21
180E 7621           3869                                             mov                     @r0,#21h;vvod
1810 900000   F     3870                                             mov                     dptr,#teTE11
1813 120000   F     3871                                             call            lotext
1816 020000   F     3872                                             jmp                     onmem11
                    3873     
1819 16             3874     me11_15dec:             dec             @r0                             ;<-
181A 120000   F     3875     lokame1:        call            lomenu
181D 020000   F     3876                                             jmp                     onmem11
                    3877     
1820 B61206         3878     tome21:         cjne                    @r0,#12h,tome13
                    3879                                             ;вкл тест интерфейса
1823 020000   F     3880                                             jmp             testrs;??????????
1826 020000   F     3881                                             jmp                     onmem11
                    3882     
1829 B61324         3883     tome13:         cjne                    @r0,#13h,tome14
182C 7631           3884                                             mov                     @r0,#31h
                    3885                                             
182E 7A50           3886                                             mov                     r2,#50h                    
                                  ;57.6->19.2
1830 7B2C           3887                                             mov                     r3,#2ch
1832 120454         3888                                             call            re4byte                 ;28..2bh 3b
                             ait-parol,1 bait skor
1835 E508           3889                                             mov                     a,r8
1837 B4000B         3890                                             cjne            a,#00,skor19
183A 900000   F     3891                                             mov                     dptr,#teS57_6;57,6
183D 120000   F     3892                                             call            lotext
1840 C213           3893                                             clr                     bitv19
                    3894     
1842 020000   F     3895                                             jmp             onmem11
1845 900000   F     3896     skor19:         mov                     dptr,#teS19_2
1848 120000   F     3897                                             call            lotext
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    62

184B D213           3898                                             setb            bitv19
                    3899             
184D 020000   F     3900                                             jmp                     onmem11
                    3901                                             
                    3902     
1850 B61415         3903     tome14:         cjne                    @r0,#14h,tome15
1853 D204           3904                                             setb            bitizm
1855 7881           3905                                             mov                     r0,#chavt
1857 7600           3906                                             mov                     @r0,#0
1859 08             3907                                             inc                     r0
185A 7600           3908                                             mov                     @r0,#0
185C C211           3909     outmenu:        clr                     bitmenu
185E 020000   F     3910                                             jmp                     out7
                    3911     
1861 78B1           3912     goparom:        mov             r0,#vichR               ;режим меню 52
1863 7652           3913                                             mov                     @r0,#52h                   
                                  ;пароль уже ввели
1865 020000   F     3914                                             jmp                     goparol
1868 2016F6         3915     tome15:         jb              bitpar,goparom  
186B 7651           3916                                             mov                     @r0,#51h;ПАРОЛЬ 000
186D 120000   F     3917                                             call            lomenu
1870 78B2           3918                                             mov                     r0,#marker
1872 7607           3919                                             mov                     @r0,#7
1874 753B09         3920                                             mov                     movrig,#9
1877 753A07         3921                                             mov                     movleft,#7
                    3922                                             ;setb           bitizm
187A 020000   F     3923                                             jmp                     onmem11
                    3924     
                    3925     
187D 78B1           3926     me21_23:        mov                     r0,#vichR               ;<-
187F 7423           3927                                             mov                     a,#23h
1881 C3             3928                                             clr                     c
1882 96             3929                                             subb            a,@r0
1883 403D           3930                                             jc                      labelS1
1885 75B0FB         3931                                             mov                     p3,#0fbh
1888 20B718         3932                                             jb                      p3.7,vv21_23
188B B6210B         3933                                             cjne            @r0,#21h,me21_23dec;-<
188E 7623           3934                                             mov                     @r0,#23h
1890 900000   F     3935                                             mov                     dptr,#teTE7
1893 120000   F     3936                                             call            lotext
1896 020000   F     3937                                             jmp                     onmem11
1899                3938     me21_23dec:     
1899 16             3939                                             dec                     @r0
189A 120000   F     3940                                             call            lomenu
189D 020000   F     3941                                             jmp                     onmem11
18A0 020000   F     3942     onmem12:        jmp             outF    ;(ie7)                          
                    3943                                                     
18A3 75B0F7         3944     vv21_23:        mov             p3,#0f7h                ;vvod
18A6 20B7F7         3945                                             jb              p3.7,onmem12
18A9 B6210C         3946                                             cjne            @r0,#21h,test22
                    3947                                             ;mov                    dptr,#tabt11;заслать ус 11А
18AC 120000   F     3948     tests:          call            lotpus
18AF D215           3949                                             setb            biteizm;запомнить режим ТИ
18B1 D204           3950                                             setb            bitizm
18B3 C211           3951                                             clr                     bitmenu;обнулить т к не буд
                             ет индикации измерения       
18B5 020000   F     3952                                             jmp                     onmem11
18B8 B62202         3953     test22:         cjne            @r0,#22h,test23
                    3954                                     ;       mov                     dptr,#tabt9;заслать ус 9А
18BB 80EF           3955                                             jmp             tests   
18BD                3956     test23:
                    3957                                     ;       mov                     dptr,#tabt7;заслать ус 7А
18BD 80ED           3958                                             jmp             tests   
18BF 020000   F     3959     left_s:         jmp                     left_sk
18C2 B63149         3960     labelS1:        cjne            @r0,#31h,me_41
18C5 75B0FB         3961                                             mov                     p3,#0fbh                   
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    63

                                  ;<-
18C8 30B7F4         3962                                             jnb                     p3.7,left_s
18CB 75B0F7         3963                                             mov                     p3,#0f7h
18CE 20B7CF         3964                                             jb                      p3.7,onmem12
                    3965                                             ;запомнить признак установленной скорости в рпзу
                    3966     
                    3967     ;чтение пам прогр(5000h) 1 страница(ffh)
                    3968     ;и запись во внешнее озу(0000h)
18D1 7900           3969                                             mov             r1,#0                   ;
18D3 7A50           3970                                     mov             r2,#50h
18D5 7B00           3971                                     mov             r3,#00
18D7 120499         3972                                     call    copyPP
                    3973                                     ;внести изменения во внешн озу
                    3974                                     ;KD=00 01 86 A0 (KD=1)
                    3975                                     ;кофф *100000 и переведенный в hex формат
                    3976                                     ;согласно адресов диапазонов и адресов яч вн озу 
18DA 792C           3977                                     mov             r1,#2ch
18DC 7400           3978                                     mov             a,#0;57,6
18DE 301302         3979                                     jnb             bitv19,spwri
18E1 7401           3980                                     mov             a,#1;19.6
18E3 F3             3981     spwri:  movx    @r1,a
                    3982     ;стереть страницу пап прогр 
18E4 905000         3983                                     mov             dptr,#5000h
18E7 7FFF           3984                                     mov             r7,#0ffh
18E9 12043E         3985                                     call    cle256
                    3986     ;и запись в ячейки кофф памяти прогр (3000h) 
18EC 7FFF           3987                                     mov             r7,#0ffh
18EE 7900           3988                                     mov             r1,#0                           ;external r
                             am
18F0 905000         3989                                     mov             dptr,#5000h
18F3 120480         3990                                     call    wrpage
                    3991             
18F6 201305         3992                                     jb              bitv19,outsko1  ;загр Т1 в соотв с установл
                             енной скоростью
18F9 758DF4         3993                                             mov                     TH1,#244                ;57
                             .6
18FC 8003           3994                                             jmp                     outsko
18FE 758DDC         3995     outsko1:                                        mov                     TH1,#220           
                                  ;19.6
1901 C211           3996     outsko:         clr             bitmenu
1903 D204           3997                                             setb            bitizm
1905 020000   F     3998                                             jmp                     out7
                    3999     
1908 020000   F     4000     rlabels4:               jmp             labels4
190B 020000   F     4001     rlabelS13:      jmp             labelS13
                    4002     
190E B651F7         4003     me_41:          cjne            @r0,#51h,rlabels4
1911 75B0FB         4004                                             mov             p3,#0fbh;<-
1914 30B7F4         4005                                             jnb             p3.7,rlabelS13
1917 75B0F7         4006                                             mov             p3,#0f7h
191A 20B76D         4007                                             jb              p3.7,vvmenu
                    4008                                             ;ввод пароля
                    4009                                     
                    4010     ;       считать с индикатора 
191D 7F0E           4011                                     mov             r7,#14
191F 784F           4012                                     mov             r0,#abin
1921 120000   F     4013                                     call    clearN                  
                    4014                                     
                    4015     ;чтение номера байта с индикатора(3байта)
                    4016     ;bufind+3..bufind+9
                    4017     ;-  - - -
                    4018     ;- - - - - - - - - -
                    4019     ;adec..adec+9
                    4020     ;ст            мл
1924 7849           4021                                     mov             r0,#bufind+9;
1926 795C           4022                                     mov             r1,#adec+9
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    64

1928 7F03           4023                                     mov             r7,#3;3bait
192A C3             4024     upav1:          clr             c
192B E6             4025                                     mov             a,@r0
192C 9430           4026                                     subb    a,#30h
192E F7             4027                                     mov             @r1,a
192F 18             4028                                     dec             r0
1930 19             4029                                     dec             r1
1931 DFF7           4030                                     djnz    r7,upav1;adec+7..adec+9
1933 7A50           4031                                             mov                     r2,#50h                    
                                  ;parol 000x    (5028h )
1935 7B28           4032                                             mov                     r3,#28h
1937 120454         4033                                             call            re4byte                 ;r8..r11(3 
                             bait parol)
193A 800F           4034     jmp                     goparol
193C E508           4035                                     mov                     a,r8                    ;сравнить п
                             ароль с индикатором
193E B55A4C         4036                                     cjne            a,adec+7,parerr
1941 E509           4037                                     mov                     a,r9    
1943 B55B47         4038                                     cjne            a,adec+8,parerr
1946 E50A           4039                                     mov                     a,r10
1948 B55C42         4040                                     cjne            a,adec+9,parerr
                    4041                                     ;равны
194B 78B1           4042     goparol:        mov             r0,#vichR               ;режим меню 52
194D 7652           4043                                             mov             @r0,#52h                ;0000-n
194F 900000   F     4044                                             mov             dptr,#teKD;00000-nA
1952 120000   F     4045                                             call            lotext
                    4046                                             ;;;;;;;;;
                    4047                                                     ;n(hex)->abin
1955 120000   F     4048                                             call    findR                           ;a=2(10-2).
                             ..11(10-11)
1958 2552           4049                                             add             a,abin+3
195A F552           4050                                             mov             abin+3,a
195C 7853           4051                                             mov             r0,#adec
195E 7952           4052                                             mov             r1,#abin+3      ;hex->10
1960 120000   F     4053                                             call    bindec
1963 855C48         4054                                             mov             bufind+8,adec+9
1966 75472D         4055                                             mov             bufind+7,#2dh
                    4056     
1969 79AE           4057                                             mov             r1,#diap
196B 7848           4058                                             mov             r0,#bufind+8
196D E7             4059                                             mov             a,@r1
196E B40807         4060                                             cjne    a,#8,nodi8k
1971 7630           4061                                             mov             @r0,#30h                 ;10-10
1973 18             4062                                             dec             r0
1974 7663           4063                                             mov             @r0,#63h;31h
1976 8008           4064                                             jmp             nodisk9
1978 B40905         4065     nodi8k:                         cjne    a,#9,nodisk9
                    4066                                     
197B 7631           4067                                             mov             @r0,#31h           ;10-11
197D 18             4068                                             dec             r0
197E 7663           4069                                             mov             @r0,#63h;31h
                    4070                                     
                    4071     
1980 78B2           4072     nodisk9:        mov                     r0,#marker
1982 7601           4073                                             mov                     @r0,#1
1984 753A01         4074                                             mov                     movleft,#1
1987 753B05         4075                                             mov                     movrig,#5
                    4076                                             
198A 020000   F     4077     vvmenu:         jmp             goto7
                    4078     
198D 753932         4079     parerr:         mov                     nuerr,#32h
1990 120000   F     4080                                             call            error
1993 120000   F     4081                                             call            ind
1996 120000   F     4082                                             call            z_1s
1999 C211           4083                                             clr                     bitmenu
199B D204           4084                                             setb            bitizm
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    65

199D 78B2           4085                                             mov                     r0,#marker
199F 76FF           4086                                             mov                     @r0,#0ffh
19A1 020000   F     4087                                             jmp             goto7
                    4088     
19A4 30130B         4089     left_sk:                jnb                     bitv19,tosk19;<-
19A7 900000   F     4090                                             mov                     dptr,#teS57_6;57,6
19AA 120000   F     4091                                             call            lotext
19AD C213           4092                                             clr                     bitv19
19AF 020000   F     4093                                             jmp             out7
19B2 900000   F     4094     tosk19:         mov                     dptr,#teS19_2
19B5 120000   F     4095                                             call            lotext
19B8 D213           4096                                             setb            bitv19
19BA 020000   F     4097                                             jmp             out7
                    4098     
19BD                4099     labelS13:;<- MENU(ПАРОЛЬ 000)
                    4100             
                    4101     ;;;;;;;;;;;;;;;;;;
                    4102     ;необходимо не портить цифру в следуюем справа знакоместе
                    4103     ;т е сохранить ее в ячейке для мигания в противном случае
                    4104     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4105     ;       знакоместа
19BD 78B2           4106                                     mov             r0,#marker
19BF 7440           4107                                     mov             a,#bufind
19C1 26             4108                                             add             a,@r0                   ;a=bufind+m
                             arker
19C2 F9             4109                                             mov             r1,a
19C3 19             4110                                             dec             r1;inc          r1
19C4 873C           4111                                             mov             savba,@r1
                    4112                                                     
19C6 78B2           4113                                                     mov             r0,#marker
19C8 16             4114                                                     dec             @r0                        
                                  
19C9 C219           4115                                     clr             bitmig
19CB E53A           4116                                     mov                     a,movleft
19CD B6064F         4117                                     cjne    @r0,#6,onmem13;;нажата кн <- при вводе цифр ПАРОЛЬ 
                             000
19D0 06             4118                                     inc             @r0
19D1 020000   F     4119                                             jmp             goto7
                    4120     ;;;;;;;
                    4121     
19D4                4122     vvkali52:       ;введено значение для калибровки
                    4123                                             ;число на индикаторе ->Ak  (52h)
                    4124                                             ;       считать с индикатора 
19D4 7F0E           4125                                     mov             r7,#14
19D6 784F           4126                                     mov             r0,#abin
19D8 120000   F     4127                                     call    clearN                  
                    4128                                     
                    4129     ;чтение номера байта с индикатора(3байта)
                    4130     ;bufind+1..bufind+5
                    4131     ;-  - - -
                    4132     ;- - - - - - - - - -
                    4133     ;adec..adec+9
                    4134     ;ст            мл
19DB 7845           4135                                     mov             r0,#bufind+5;
19DD 795C           4136                                     mov             r1,#adec+9
19DF 7F05           4137                                     mov             r7,#5;5bait
19E1 C3             4138     upav2:          clr             c
19E2 E6             4139                                     mov             a,@r0
19E3 9430           4140                                     subb    a,#30h
19E5 F7             4141                                     mov             @r1,a
19E6 18             4142                                     dec             r0
19E7 19             4143                                     dec             r1
19E8 DFF7           4144                                     djnz    r7,upav2;adec+7..adec+9
                    4145     
19EA 784F           4146                                     mov             r0,#abin
19EC 7953           4147                                     mov             r1,#adec                        ;мл        
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    66

                              ст
19EE 120000   F     4148                                     call    decbin                  ;abin..abin+3 (hex)
19F1 120000   F     4149                                     call    loadr2                  ;r2..r5
19F4 120402         4150                                     call    altof   ;r2..r5->float
19F7 900000   F     4151                                     mov     dptr,#ch_10;10
19FA 120000   F     4152                                     call    ldc_ltemp                       ;r8..r11=8
19FD 120203         4153                                     call    flmul
1A00 78A4           4154                                     mov             r0,#rez_Ak
1A02 120000   F     4155                                     call    saver2
1A05 C211           4156                                             clr                     bitmenu
1A07 D212           4157                                             setb            bitklb
                    4158                                             ;зажечь KMП
1A09 D204           4159                                             setb            bitizm;бит калибровки уже установле
                             н
1A0B 78B2           4160                                             mov                     r0,#marker
1A0D 76FF           4161                                             mov                     @r0,#0ffh
1A0F 783D           4162                                     mov             r0,#chkl
1A11 76FF           4163                                     mov             @r0,#0ffh
1A13 08             4164                                     inc             r0
1A14 76FF           4165                                     mov             @r0,#0ffh;38h
1A16 120000   F     4166                                     call            z_1s
1A19 020000   F     4167                                     jmp             out7
                    4168     
                    4169     
1A1C 020000   F     4170                                             jmp             goto7
                    4171                                              
1A1F 020000   F     4172     onmem13:        jmp             goto7   ;(ie7)
                    4173     
1A22 B642AF         4174     labels4:        cjne            @r0,#42h,vvkali52
1A25 75B0FB         4175                                             mov                     p3,#0fbh;<-
1A28 30B7F4         4176                                             jnb             p3.7,onmem13
1A2B 75B0F7         4177                                             mov             p3,#0f7h;vvod
1A2E 20B7EE         4178                                             jb              p3.7,onmem13
                    4179                                             
                    4180             
1A31 020000   F     4181     jmp             out7                                                    
                    4182     ;;;;;;;
1A34                4183     labelI:
1A34 75B0FE         4184                                     mov             p3,#0feh
1A37 E5B0           4185                                     mov             a,p3
1A39 20E703         4186                                     jb              acc.7,nopoint
                    4187                                     ;
1A3C 020000   F     4188                                     jmp             goto7;out7
                    4189     
1A3F 75B0FB         4190     nopoint:                mov             p3,#0fbh
1A42 E5B0           4191                                     mov             a,p3
1A44 20E72C         4192                                     jb              acc.7,nopoin7
1A47 78B2           4193     labelS3:mov             r0,#marker
1A49 E53A           4194                                     mov             a,movleft
1A4B B40309         4195                                     cjne    a,#3,poina1
1A4E B6030B         4196                                     cjne    @r0,#3,nomarl;26
                    4197                                     ;mov            @r0,#9
1A51 E53B           4198     poina2: mov                     a,movrig                ;кн <- B=+00000
1A53 F6             4199                                     mov                     @r0,a
1A54 020000   F     4200                                     jmp             goto7;  out7
                    4201     
1A57 B60402         4202     poina1:         cjne    @r0,#4,nomarl;кн <- A= 0000
1A5A 80F5           4203                                             jmp             poina2
                    4204     
                    4205     
1A5C                4206     nomarl:                 ;                               29.12.06
                    4207     ;;;;;;;;;;;;;;;;;;
                    4208     ;необходимо не портить цифру в следуюем справа знакоместе
                    4209     ;т е сохранить ее в ячейке для мигания в противном случае
                    4210     ;при сдвиге курсора мигания вправо переносилась цифра с предыдущего 
                    4211     ;       знакоместа
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    67

1A5C 78B2           4212                                     mov             r0,#marker
1A5E 7440           4213                                     mov             a,#bufind
1A60 26             4214                                             add             a,@r0                   ;a=bufind+m
                             arker
1A61 F9             4215                                             mov             r1,a
1A62 09             4216                                             inc             r1
1A63 873C           4217                                             mov             savba,@r1
                    4218                                                     
1A65 78B2           4219                                                     mov             r0,#marker
1A67 16             4220                                                     dec             @r0                        
                                  
1A68 C219           4221                                     clr             bitmig
1A6A E53A           4222                                     mov                     a,movleft
1A6C B4034C         4223                                     cjne            a,#3,poinA
1A6F B6027C         4224                                     cjne    @r0,#2,out7;;нажата кн <- при вводе цифр B=+00000
1A72 06             4225     poin3:  inc             @r0
                    4226     ;нажат ввод А =000000 запомнить константу А
1A73 75B0F7         4227     nopoin7:           mov          p3,#0f7h
1A76 E5B0           4228                                     mov             a,p3
1A78 20E773         4229                                     jb              acc.7,out7
1A7B 78B1           4230                                     mov             r0,#vichR
1A7D E6             4231                                     mov             a,@r0
1A7E B6213F         4232                                     cjne    @r0,#21h,no21p7
1A81 7631           4233                                     mov             @r0,#31h
                    4234                             ;       считать с индикатора  упаковать в плавающий формат
                    4235                             ;   сохранить
1A83 7F0E           4236                                     mov             r7,#14
1A85 784F           4237                                     mov             r0,#abin
1A87 120000   F     4238                                     call    clearN                  
1A8A 120000   F     4239                                     call    upakA
                    4240                                     
1A8D 784F           4241                                     mov             r0,#abin
1A8F 7953           4242                                     mov             r1,#adec                        ;мл        
                              ст
1A91 120000   F     4243                                     call    decbin                  ;abin..abin+3 (hex)
1A94 120000   F     4244                                     call    loadr2                  ;r2..r5
1A97 120402         4245                                     call    altof                   ;r2..r5->int
1A9A 78BC           4246                                     mov             r0,#konstA
1A9C 120000   F     4247                                     call    saver2
                    4248     ;26
1A9F 78B2           4249                                     mov             r0,#marker
1AA1 7603           4250                                     mov             @r0,#3
1AA3 753B08         4251                                     mov             movrig,#8
1AA6 753A03         4252                                     mov             movleft,#3
1AA9 900000   F     4253                                     mov             dptr,#teBequ0
1AAC 120000   F     4254                                     call    lotext
1AAF 120000   F     4255                                     call            outB
1AB2 534BBF         4256                                     anl             bufind+11,#0bfh         ;гашение точки bufi
                             nd+7
1AB5 434B80         4257                                     orl             bufind+11,#80h
1AB8 020000   F     4258                                     jmp             goto7;out7
                    4259     
1ABB B60330         4260     poinA:          cjne    @r0,#3,out7;;нажата кн <- при вводе цифр A= 0000
1ABE 80B2           4261                                             jmp             poin3
                    4262     
1AC0                4263     no21p7:                 ;       считать с индикатора  упаковать в плавающий формат
                    4264                             ;   сохранить
1AC0 7F0E           4265                                     mov             r7,#14
1AC2 784F           4266                                     mov             r0,#abin
1AC4 120000   F     4267                                     call    clearN                  
1AC7 120000   F     4268                                     call    upakB                   
1ACA 784F           4269                                     mov             r0,#abin
1ACC 7953           4270                                     mov             r1,#adec                        ;мл        
                              ст
1ACE 120000   F     4271                                     call    decbin                  ;abin..abin+3 (hex)
1AD1 120000   F     4272                                     call    loadr2                  ;r2..r5
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    68

1AD4 120402         4273                                     call    altof                   ;r2..r5->int
1AD7 301B04         4274                                     jnb             bitznB,pozB
1ADA EA             4275                                     mov             a,r2
1ADB 4480           4276                                     orl             a,#80h
1ADD FA             4277                                     mov             r2,a                    ;знак-
1ADE 78C0           4278     pozB:           mov             r0,#konstB
1AE0 120000   F     4279                                     call    saver2
                    4280     
1AE3 79B2           4281                                     mov             r1,#marker       ;B=000000-> ВЫЧИСЛИТЬ
1AE5 77FF           4282                                     mov             @r1,#0ffh
1AE7 78B1           4283                                     mov             r0,#vichR
1AE9 7611           4284                                     mov             @r0,#11h
1AEB 020000   F     4285                               jmp           lovich     ;3.01.07ВЫЧИСЛИТЬ
                    4286                                     
                    4287     
1AEE                4288     out7:                   ;mov            IE,#80h
1AEE D083           4289                                     pop             dph
1AF0 D082           4290                                     pop             dpl
1AF2 D007           4291                                     pop             rr7     
1AF4 D006           4292                                     pop             rr6
1AF6 D005           4293                                     pop             rr5
1AF8 D004           4294                                     pop             rr4
1AFA D003           4295                                     pop             rr3
1AFC D002           4296                                     pop             rr2
1AFE D001           4297                                     pop             rr1                             
1B00 D000           4298                                     pop             rr0
1B02 D0D0           4299                                     pop             psw
1B04 D0E0           4300                                     pop             acc
1B06 E5AD           4301                                     mov             a,P3IF
1B08 547F           4302                                     anl             a,#7fh
1B0A F5AD           4303                                     mov             P3IF,a
1B0C 75B0C0         4304                                     mov             P3,#0c0h
                    4305     ;clr            bitmig
1B0F 75E730         4306                                     mov             EIE2,#30H
1B12 C219           4307     clr             bitmig
1B14 32             4308                                     reti
                    4309     
                    4310     
                    4311                                     
                    4312     
                    4313     
1B15 78B1           4314     lomenu:         mov             r0,#vichR
1B17 B61107         4315                                             cjne    @r0,#11h,menu12
1B1A 900000   F     4316                                             mov             dptr,#teTESI
1B1D 120000   F     4317     lome1:                  call    lotexT
1B20 22             4318                                             ret
1B21 B61205         4319     menu12:         cjne    @r0,#12h,menu13
1B24 900000   F     4320                                             mov             dptr,#teTESR
1B27 80F4           4321                                             jmp             lome1
1B29 B61305         4322     menu13:         cjne    @r0,#13h,menu14
1B2C 900000   F     4323                                             mov             dptr,#teSKOR
1B2F 80EC           4324                                             jmp             lome1
1B31 B61405         4325     menu14:         cjne    @r0,#14h,menu15
1B34 900000   F     4326                                             mov             dptr,#teAVK
1B37 80E4           4327                                             jmp             lome1
1B39 B61505         4328     menu15:                 cjne    @r0,#15h,menu21
1B3C 900000   F     4329                                             mov             dptr,#teKALIB
1B3F 80DC           4330                                             jmp             lome1
                    4331     
1B41 B62105         4332     menu21: cjne    @r0,#21h,menu22
1B44 900000   F     4333                                             mov             dptr,#teTE11
1B47 80D4           4334                                             jmp             lome1
1B49 B62205         4335     menu22:         cjne    @r0,#22h,menu23
1B4C 900000   F     4336                                             mov             dptr,#teTE9
1B4F 80CC           4337                                             jmp             lome1
1B51 B62305         4338     menu23:         cjne    @r0,#23h,menu31
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    69

1B54 900000   F     4339                                             mov             dptr,#teTE7
1B57 80C4           4340                                             jmp             lome1
1B59 B63105         4341     menu31:         cjne    @r0,#31h,menu41
1B5C 900000   F     4342                                             mov             dptr,#teS57_6
1B5F 80BC           4343                                             jmp             lome1
                    4344     
1B61                4345     menu41:         
1B61 900000   F     4346                                             mov             dptr,#tePAR
1B64 80B7           4347                                             jmp             lome1
                    4348     
                    4349     ;
                    4350     ;goprogr:       jmp     izm
                    4351     ;тест интерфейса
1B66                4352     testrs: ;jb     p0.3,goprogr
1B66 C2AC           4353                                     clr     IE.4
1B68 759955         4354     test1:  mov     SBUF0,#55h
1B6B 3099FD         4355                                     jnb     SCON0.1,$
1B6E 78B8           4356                                     mov     r0,#work;chtest
1B70 76BE           4357                                     mov     @r0,#190d;60
                    4358     
1B72 309825         4359     test01: jnb     SCON0.0,test2
1B75 E599           4360                                     mov     a,SBUF0
1B77 B45512         4361                                     cjne    a,#55h,test3
1B7A C299           4362     test4:  clr     SCON0.1
1B7C C298           4363                                     clr     SCON0.0
1B7E 7D0A           4364                                     mov     r5,#10
1B80 7840           4365                                     mov     r0,#bufind              ;- - - -
1B82 762D           4366     test04: mov     @r0,#2dh
1B84 08             4367                                     inc     r0
1B85 DDFB           4368                                     djnz    r5,test04
1B87 120000   F     4369                                     call    ind
1B8A 80DC           4370                                     jmp     test1
1B8C                4371     test3:  
1B8C 753933         4372                                     mov     nuerr,#33h
1B8F 120000   F     4373                                     call    error           ;на кран прибора ERR 3
                    4374                             
1B92 120000   F     4375                                     call    ind;
1B95 120000   F     4376                                     call    z_01s           ;100ms
1B98 80E0           4377                                     jmp     test4
1B9A 78B8           4378     test2:  mov     r0,#work;chtest
1B9C B60002         4379                                     cjne    @r0,#0,test02
1B9F 8003           4380                                     jmp     test5
1BA1 16             4381     test02: dec     @r0
1BA2 80CE           4382                                     jmp     test01
1BA4 120000   F     4383     test5:  call    z_1ms           ;1ms
1BA7 C299           4384                                     clr     SCON0.1
                    4385             
1BA9 753933         4386                                     mov     nuerr,#33h
1BAC 120000   F     4387                                     call    error           ;на кран прибора ERR 3
                    4388                                     
1BAF 120000   F     4389                                     call    ind
1BB2 120000   F     4390                                     call    z_01s           ;100ms
1BB5 80B1           4391                                     jmp     test1   
                    4392     
                    4393     
                    4394     
1BB7                4395     endkalib:;KD=Ak/A3
1BB7 789C           4396                                             mov                     r0,#rez_A3
1BB9 120000   F     4397                                             call            resar2
                    4398                                     
1BBC 120402         4399                                     call    altof                   ;->float
1BBF EA             4400                                             mov                     a,r2
1BC0 547F           4401                                             anl                     a,#7fh
1BC2 FA             4402                                             mov                     r2,a
1BC3 120000   F     4403                                     call            move28
1BC6 78A4           4404                                             mov                     r0,#rez_Ak
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    70

1BC8 120000   F     4405                                             call            resar2
1BCB 1202B7         4406                                             call            fldiv
                    4407                                                     
1BCE 900000   F     4408                                     mov     dptr,#CHtho;100000
1BD1 120000   F     4409                                     call    ldc_ltemp                       ;r8..r11=8
1BD4 120203         4410                                     call    flmul
1BD7 120343         4411                                     call    ftol            ;r2..r5->hex кофф KD (РЕЗ ИЗМ ЧИСЛО
                              6разрядное)
                    4412     
1BDA 78A0           4413                                             mov                     r0,#koefKD
1BDC 120000   F     4414                                             call            saver2
                    4415                                             ;запись в рпзу в соотв ячейку
                    4416                             
1BDF 7900           4417                                             mov             r1,#0                   ;счит рпзу 
                             во внешн озу
1BE1 7A50           4418                                     mov             r2,#50h
1BE3 7B00           4419                                     mov             r3,#00
1BE5 120499         4420                                     call    copyPP
                    4421                                     ;внести изменения во внешн озу
1BE8 120000   F     4422                                     call            findext                 ;r1-внешн озу
1BEB 78A0           4423                                     mov                     r0,#koefKD
1BED 120000   F     4424                                             call            resar2
1BF0 EA             4425                                             mov                     a,r2
1BF1 F3             4426                                             movx            @r1,a
1BF2 09             4427                                             inc                     r1
1BF3 EB             4428                                             mov                     a,r3
1BF4 F3             4429                                             movx            @r1,a
1BF5 09             4430                                             inc                     r1
1BF6 EC             4431                                             mov                     a,r4
1BF7 F3             4432                                             movx            @r1,a
1BF8 09             4433                                             inc                     r1
1BF9 ED             4434                                             mov                     a,r5
1BFA F3             4435                                             movx            @r1,a
                    4436                                     ;кофф *100000 и переведенный в hex формат
                    4437                                     ;согласно адресов диапазонов и адресов яч вн озу 
                    4438     ;стереть страницу пап прогр 
1BFB 905000         4439                                     mov             dptr,#5000h
1BFE 7FFF           4440                                     mov             r7,#0ffh
1C00 12043E         4441                                     call    cle256
                    4442     ;и запись в ячейки кофф памяти прогр (3000h) 
1C03 7FFF           4443                                     mov             r7,#0ffh
1C05 7900           4444                                     mov             r1,#0                           ;external r
                             am
1C07 905000         4445                                     mov             dptr,#5000h
1C0A 120480         4446                                     call    wrpage
                    4447     
                    4448     
1C0D C212           4449                                             clr             bitklb
1C0F D216           4450                                             setb    bitpar                  ;пароль провели 1 р
                             аз успешно
1C11 900000   F     4451                                             mov             dptr,#teEND
1C14 120000   F     4452                                             call    lotext
1C17 120000   F     4453                                             call    ind
1C1A 120000   F     4454                                             call    z_1s
1C1D 120000   F     4455                                             call    z_1s
1C20 020000   F     4456                                             jmp             goto7
                    4457     
                    4458     ;выч среднего по блоку
                    4459     ;вых r2..r5
1C23                4460     vichmean:       
1C23 120000   F     4461                                             call            resa_hl;save_bl->dptr
1C26 78D7           4462                                             mov                     r0,#copy_hl
1C28 E583           4463                                             mov                     a,dph
1C2A F6             4464                                             mov                     @r0,a
1C2B 08             4465                                             inc                     r0
1C2C E582           4466                                             mov                     a,dpl
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    71

1C2E F6             4467                                             mov                     @r0,a
1C2F 78B8           4468                                             mov                     r0,#work
1C31 120000   F     4469                                             call            clear4
1C34 78D6           4470                                             mov                     r0,#chblok;volume
1C36 7600           4471                                             mov                     @r0,#0
1C38 120000   F     4472     meng:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1C3B E582           4473                                             mov                     a,dpl
1C3D FF             4474                                             mov                     r7,a
1C3E E583           4475                                             mov                     a,dph
1C40 FE             4476                                             mov                     r6,a
                    4477     
1C41 78D7           4478                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1C43 E6             4479                                             mov                     a,@r0
1C44 F583           4480                                             mov                     dph,a
1C46 08             4481                                             inc                     r0
1C47 E6             4482                                             mov                     a,@r0
1C48 F582           4483                                             mov                     dpl,a
                    4484                                             
1C4A C3             4485                                             clr                     c;-4
1C4B E582           4486                                             mov                     a,dpl
1C4D 9404           4487                                             subb            a,#4
1C4F F582           4488                                             mov                     dpl,a
1C51 E583           4489                                             mov                     a,dph
1C53 9400           4490                                             subb            a,#0
1C55 F583           4491                                             mov                     dph,a;dptr-4
                    4492                                             ;;;;;;;;
1C57 79D7           4493                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1C59 E583           4494                                                     mov             a,dph
1C5B F7             4495                                               mov           @r1,a
1C5C 09             4496                                                     inc             r1
1C5D E582           4497                                                     mov             a,dpl
1C5F F7             4498                                                     mov             @r1,a
                    4499                                                     ;;;;;;;;;
1C60 C3             4500                                                     clr             c;пришли в начало блока?
1C61 E582           4501                                                     mov                     a,dpl
1C63 9F             4502                                                     subb            a,r7
1C64 FF             4503                                                     mov                     r7,a
1C65 7006           4504                                                     jnz                     nextmea
1C67 E583           4505                                                     mov                     a,dph
1C69 9E             4506                                                     subb            a,r6
1C6A FE             4507                                                     mov                     r6,a
1C6B 6023           4508                                                     jz                      outmea;
                    4509                                                     
                    4510                                                     ;продолжаем сравнение
                    4511                                                     ;;;;;;;;;;;             
1C6D E0             4512     nextmea:                movx            a,@dptr         ;из яч внешн озу ->r2..r5
1C6E FA             4513                                             mov                     r2,a
1C6F A3             4514                                             inc                     dptr
1C70 E0             4515                                             movx            a,@dptr
1C71 FB             4516                                             mov                     r3,a
1C72 A3             4517                                             inc                     dptr
1C73 E0             4518                                             movx            a,@dptr
1C74 FC             4519                                             mov                     r4,a
1C75 A3             4520                                             inc                     dptr
1C76 E0             4521                                             movx            a,@dptr
1C77 FD             4522                                             mov                     r5,a
                    4523     
1C78 120402         4524                                             call            altof;->float
1C7B 120000   F     4525                                             call            move28                  ;r8..r11
1C7E 78B8           4526                                             mov                     r0,#work
1C80 120000   F     4527                                             call            resar2
1C83 120166         4528                                             call            fladd
1C86 78B8           4529                                             mov                     r0,#work
1C88 120000   F     4530                                             call            saver2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    72

1C8B 78D6           4531                                             mov                     r0,#chblok;volume;кол измер
                             ений блока
1C8D 06             4532                                             inc                     @r0
1C8E 80A8           4533                                             jmp                     meng
1C90                4534     outmea:         
1C90 E4             4535                                             clr                     a
1C91 FA             4536                                             mov                     r2,a
1C92 FB             4537                                             mov                     r3,a
1C93 FC             4538                                             mov                     r4,a
1C94 78D6           4539                                             mov                     r0,#chblok;volume;кол измер
                             ений блока...200d
1C96 E6             4540                                             mov                     a,@r0
1C97 FD             4541                                             mov                     r5,a
1C98 120402         4542                                             call            altof;r2..r5 float
1C9B 120000   F     4543                                             call            move28
1C9E 78B8           4544                                             mov                     r0,#work
1CA0 120000   F     4545                                             call            resar2
1CA3 1202B7         4546                                             call            fldiv
1CA6 900000   F     4547                                             mov                     dptr,#ch_10      
1CA9 120000   F     4548                                     call            ldc_ltemp
1CAC 1202B7         4549                                     call            fldiv
1CAF 120343         4550                                             call            ftol                            ;->
                             hex
1CB2 120000   F     4551                                             call    maform
1CB5 784F           4552                                             mov             r0,#abin
1CB7 120000   F     4553                                             call    saver2
                    4554     ;;;;;;;;
                    4555                                             
1CBA 7853           4556                                             mov             r0,#adec
1CBC 7952           4557                                             mov             r1,#abin+3      ;hex->10
1CBE 120000   F     4558                                             call    bindec
                    4559                                     
1CC1 785C           4560                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1CC3 7949           4561                                             mov             r1,#bufind+9
1CC5 7F05           4562                                             mov             r7,#5
1CC7 E6             4563     bufmea:                         mov             a,@r0
1CC8 2430           4564                                             add             a,#30h
1CCA F7             4565                                             mov             @r1,a
1CCB 19             4566                                             dec             r1
1CCC 18             4567                                             dec             r0
1CCD DFF8           4568                                             djnz    r7,bufmea
1CCF 7844           4569                                             mov             r0,#bufind+4
1CD1 762B           4570                                             mov             @r0,#2bh          
1CD3 300202         4571                                             jnb             znmat,nozmea
1CD6 762D           4572                                             mov             @r0,#2dh
1CD8 434B05         4573     nozmea:         orl             bufind+11,#05h
1CDB 22             4574                                             ret
                    4575     
                    4576     
1CDC E0             4577     loahl_r2:       movx            a,@dptr         ;из яч внешн озу ->r2..r5
1CDD FA             4578                                             mov                     r2,a
1CDE A3             4579                                             inc                     dptr
1CDF E0             4580                                             movx            a,@dptr
1CE0 FB             4581                                             mov                     r3,a
1CE1 A3             4582                                             inc                     dptr
1CE2 E0             4583                                             movx            a,@dptr
1CE3 FC             4584                                             mov                     r4,a
1CE4 A3             4585                                             inc                     dptr
1CE5 E0             4586                                             movx            a,@dptr
1CE6 FD             4587                                             mov                     r5,a    
1CE7 22             4588                                             ret
                    4589     
1CE8 C3             4590     min4_hl:        clr                     c;-4
1CE9 E582           4591                                             mov                     a,dpl
1CEB 9404           4592                                             subb            a,#4
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    73

1CED F582           4593                                             mov                     dpl,a
1CEF E583           4594                                             mov                     a,dph
1CF1 9400           4595                                             subb            a,#0
1CF3 F583           4596                                             mov                     dph,a;dptr-4
1CF5 22             4597                                             ret
                    4598     
                    4599     ;мин значение по по блоку
1CF6                4600     vichmin:        
1CF6 120000   F     4601                                             call            resa_hl;save_bl->dptr
                    4602                                                                                     
                    4603     ;с конца блока адрес 2го измерение
1CF9 120000   F     4604                                             call            min4_hl
                    4605                                             
1CFC 78B8           4606                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4607                                             
1CFE E0             4608                                             movx            a,@dptr
1CFF F6             4609                                             mov                     @r0,a
1D00 08             4610                                             inc                     r0
1D01 A3             4611                                             inc                     dptr
1D02 E0             4612                                             movx            a,@dptr
1D03 F6             4613                                             mov                     @r0,a
1D04 08             4614                                             inc                     r0
1D05 A3             4615                                             inc                     dptr
1D06 E0             4616                                             movx            a,@dptr
1D07 F6             4617                                             mov                     @r0,a
1D08 08             4618                                             inc                     r0
1D09 A3             4619                                             inc                     dptr
1D0A E0             4620                                             movx            a,@dptr
1D0B F6             4621                                             mov                     @r0,a
1D0C A3             4622                                             inc                     dptr
                    4623                                             
1D0D 78B8           4624                                             mov                     r0,#work
1D0F 120000   F     4625                                             call            resar2
1D12 120402         4626                                             call            altof;->float;r2..r5
1D15 78B8           4627                                             mov                     r0,#work
1D17 120000   F     4628                                             call            saver2
                    4629     
1D1A 120000   F     4630                                             call            min4_hl
                    4631                                             ;call           min4_hl
                    4632     
1D1D 78D7           4633                                             mov                     r0,#copy_hl
1D1F E583           4634                                             mov                     a,dph
1D21 F6             4635                                             mov                     @r0,a
1D22 08             4636                                             inc                     r0
1D23 E582           4637                                             mov                     a,dpl
1D25 F6             4638                                             mov                     @r0,a
                    4639                                     
1D26 78D6           4640                                             mov                     r0,#chblok;volume
1D28 7600           4641                                             mov                     @r0,#0
1D2A 120000   F     4642     ming:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1D2D E582           4643                                             mov                     a,dpl
1D2F FF             4644                                             mov                     r7,a
1D30 E583           4645                                             mov                     a,dph
1D32 FE             4646                                             mov                     r6,a
                    4647     
1D33 78D7           4648                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1D35 E6             4649                                             mov                     a,@r0
1D36 F583           4650                                             mov                     dph,a
1D38 08             4651                                             inc                     r0
1D39 E6             4652                                             mov                     a,@r0
1D3A F582           4653                                             mov                     dpl,a
                    4654                                             
1D3C C3             4655                                             clr                     c;-4
1D3D E582           4656                                             mov                     a,dpl
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    74

1D3F 9404           4657                                             subb            a,#4
1D41 F582           4658                                             mov                     dpl,a
1D43 E583           4659                                             mov                     a,dph
1D45 9400           4660                                             subb            a,#0
1D47 F583           4661                                             mov                     dph,a;dptr-4
                    4662                                             ;;;;;;;;
1D49 79D7           4663                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1D4B E583           4664                                                     mov             a,dph
1D4D F7             4665                                               mov           @r1,a
1D4E 09             4666                                                     inc             r1
1D4F E582           4667                                                     mov             a,dpl
1D51 F7             4668                                                     mov             @r1,a
                    4669                                                     ;;;;;;;;;
1D52 C3             4670                                                     clr             c;пришли в начало блока?
1D53 E582           4671                                                     mov                     a,dpl
1D55 9F             4672                                                     subb            a,r7
1D56 FF             4673                                                     mov                     r7,a
1D57 7006           4674                                                     jnz                     nextmin
1D59 E583           4675                                                     mov                     a,dph
1D5B 9E             4676                                                     subb            a,r6
1D5C FE             4677                                                     mov                     r6,a
1D5D 601D           4678                                                     jz                      outmin;
                    4679                                                     
                    4680                                                     ;продолжаем сравнение
                    4681                                                     ;;;;;;;;;;;             
1D5F 78B8           4682     nextmin:        mov                     r0,#work
1D61 120000   F     4683                                             call            resar2
                    4684                                             ;call           altof;->float;r2..r5
1D64 120000   F     4685                                             call            move28;->r8..r11
1D67 120000   F     4686                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4687     
1D6A 120402         4688                                             call            altof;->float;r2..r5
                    4689                                             
1D6D 1201D6         4690                                             call            flcmp
1D70 5005           4691                                             jnc                     nomini
1D72 78B8           4692                                             mov                     r0,#work;<
1D74 120000   F     4693                                             call            saver2;r2..r5
1D77 78D6           4694     nomini:                 mov                     r0,#chblok;volume;кол измерений блока
1D79 06             4695                                             inc                     @r0
1D7A 80AE           4696                                             jmp                     ming
                    4697     
1D7C 78B8           4698     outmin:         mov                     r0,#work;1ое измерение блока
1D7E 120000   F     4699                                             call            resar2
                    4700                                     ;       call            altof;->float;r2..r5
1D81 120000   F     4701                                             call            move28;->r8..r11
1D84 120000   F     4702                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4703     
1D87 120402         4704                                             call            altof;->float;r2..r5
                    4705                                             
1D8A 1201D6         4706                                             call            flcmp
1D8D 5005           4707                                             jnc                     minivix
1D8F 78B8           4708                                             mov                     r0,#work;<
1D91 120000   F     4709                                             call            saver2;r2..r5
                    4710                                             ;;;;;;;;;
                    4711     
1D94 78B8           4712     minivix:        mov                     r0,#work
1D96 120000   F     4713                                             call            resar2
                    4714     
                    4715                                             ;call           altof;->float
                    4716                                     
1D99 900000   F     4717                                             mov                     dptr,#ch_10      
1D9C 120000   F     4718                                             call            ldc_ltemp
1D9F 1202B7         4719                                             call            fldiv
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    75

1DA2 120343         4720                                             call            ftol                            ;->
                             hex
                    4721                                             ;;;
1DA5 120000   F     4722                                             call            maform
1DA8 784F           4723                                             mov                     r0,#abin
1DAA 120000   F     4724                                             call            saver2
                    4725     ;;;;;;;;
                    4726                                             
1DAD 7853           4727                                             mov             r0,#adec
1DAF 7952           4728                                             mov             r1,#abin+3      ;hex->10
1DB1 120000   F     4729                                             call    bindec
                    4730                                     
1DB4 785C           4731                                             mov             r0,#adec+9;разместить в буфер индик
                             ации
1DB6 7949           4732                                             mov             r1,#bufind+9
1DB8 7F05           4733                                             mov             r7,#5
1DBA E6             4734     bufmin:                         mov             a,@r0
1DBB 2430           4735                                             add             a,#30h
1DBD F7             4736                                             mov             @r1,a
1DBE 19             4737                                             dec             r1
1DBF 18             4738                                             dec             r0
1DC0 DFF8           4739                                             djnz    r7,bufmin
1DC2 7844           4740                                             mov             r0,#bufind+4
1DC4 762B           4741                                             mov             @r0,#2bh          
1DC6 300202         4742                                             jnb             znmat,nozmin
1DC9 762D           4743                                             mov             @r0,#2dh
1DCB 434B05         4744     nozmin:         orl             bufind+11,#05h
1DCE 22             4745                                             ret
                    4746     
                    4747     
                    4748     
                    4749     ;мин значение по по блоку
1DCF                4750     vichmax:        
1DCF 120000   F     4751                                             call            resa_hl;save_bl->dptr
                    4752                                             
                    4753                                             
                    4754     ;с конца блока адрес 2го измерение
1DD2 120000   F     4755                                             call            min4_hl
                    4756                                             
1DD5 78B8           4757                                                     mov                     r0,#work        ;бл
                             ок анализируется с конца 1я измерение загружается в work
                    4758                                             
1DD7 E0             4759                                             movx            a,@dptr
1DD8 F6             4760                                             mov                     @r0,a
1DD9 08             4761                                             inc                     r0
1DDA A3             4762                                             inc                     dptr
1DDB E0             4763                                             movx            a,@dptr
1DDC F6             4764                                             mov                     @r0,a
1DDD 08             4765                                             inc                     r0
1DDE A3             4766                                             inc                     dptr
1DDF E0             4767                                             movx            a,@dptr
1DE0 F6             4768                                             mov                     @r0,a
1DE1 08             4769                                             inc                     r0
1DE2 A3             4770                                             inc                     dptr
1DE3 E0             4771                                             movx            a,@dptr
1DE4 F6             4772                                             mov                     @r0,a
1DE5 A3             4773                                             inc                     dptr
                    4774                                             
1DE6 78B8           4775                                             mov                     r0,#work
1DE8 120000   F     4776                                             call            resar2
1DEB 120402         4777                                             call            altof;->float;r2..r5
1DEE 78B8           4778                                             mov                     r0,#work
1DF0 120000   F     4779                                             call            saver2
                    4780     
1DF3 120000   F     4781                                             call            min4_hl
                    4782                                     ;       call            min4_hl
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    76

                    4783     
1DF6 78D7           4784                                             mov                     r0,#copy_hl
1DF8 E583           4785                                             mov                     a,dph
1DFA F6             4786                                             mov                     @r0,a
1DFB 08             4787                                             inc                     r0
1DFC E582           4788                                             mov                     a,dpl
1DFE F6             4789                                             mov                     @r0,a
                    4790                                     
1DFF 78D6           4791                                             mov                     r0,#chblok;volume
1E01 7600           4792                                             mov                     @r0,#0
1E03 120000   F     4793     maxg:                   call            adrblok;dptr-адр ячейки 1й соотв блока 
1E06 E582           4794                                             mov                     a,dpl
1E08 FF             4795                                             mov                     r7,a
1E09 E583           4796                                             mov                     a,dph
1E0B FE             4797                                             mov                     r6,a
                    4798     
1E0C 78D7           4799                                             mov                     r0,#copy_hl;call           
                                  resa_hl;save_bl->dptr
1E0E E6             4800                                             mov                     a,@r0
1E0F F583           4801                                             mov                     dph,a
1E11 08             4802                                             inc                     r0
1E12 E6             4803                                             mov                     a,@r0
1E13 F582           4804                                             mov                     dpl,a
                    4805                                             
1E15 C3             4806                                             clr                     c;-4
1E16 E582           4807                                             mov                     a,dpl
1E18 9404           4808                                             subb            a,#4
1E1A F582           4809                                             mov                     dpl,a
1E1C E583           4810                                             mov                     a,dph
1E1E 9400           4811                                             subb            a,#0
1E20 F583           4812                                             mov                     dph,a;dptr-4
                    4813                                             ;;;;;;;;
1E22 79D7           4814                                                     mov             r1,#copy_hl;saven_bl    ;со
                             хранить dptr 
1E24 E583           4815                                                     mov             a,dph
1E26 F7             4816                                               mov           @r1,a
1E27 09             4817                                                     inc             r1
1E28 E582           4818                                                     mov             a,dpl
1E2A F7             4819                                                     mov             @r1,a
                    4820                                                     ;;;;;;;;;
1E2B C3             4821                                                     clr             c;пришли в начало блока?
1E2C E582           4822                                                     mov                     a,dpl
1E2E 9F             4823                                                     subb            a,r7
1E2F FF             4824                                                     mov                     r7,a
1E30 7006           4825                                                     jnz                     nextmax
1E32 E583           4826                                                     mov                     a,dph
1E34 9E             4827                                                     subb            a,r6
1E35 FE             4828                                                     mov                     r6,a
1E36 601D           4829                                                     jz                      outmax;
                    4830                                                     
                    4831                                                     ;продолжаем сравнение
                    4832                                                     ;;;;;;;;;;;             
1E38 78B8           4833     nextmax:        mov                     r0,#work
1E3A 120000   F     4834                                             call            resar2
                    4835                                             ;call           altof;->float;r2..r5
1E3D 120000   F     4836                                             call            move28;->r8..r11
1E40 120000   F     4837                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4838     
1E43 120402         4839                                             call            altof;->float;r2..r5
                    4840                                             
1E46 1201D6         4841                                             call            flcmp
1E49 4005           4842                                             jc                      nomaxi
1E4B 78B8           4843                                             mov                     r0,#work;>
1E4D 120000   F     4844                                             call            saver2;r2..r5
1E50 78D6           4845     nomaxi:                 mov                     r0,#chblok;volume;кол измерений блока
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    77

1E52 06             4846                                             inc                     @r0
1E53 80AE           4847                                             jmp                     maxg
1E55 78B8           4848     outmax:         mov                     r0,#work;1ое измерение блока
1E57 120000   F     4849                                             call            resar2
                    4850                                     ;       call            altof;->float;r2..r5
1E5A 120000   F     4851                                             call            move28;->r8..r11
1E5D 120000   F     4852                                             call            loahl_r2                ;из яч внеш
                             н озу ->r2..r5
                    4853     
1E60 120402         4854                                             call            altof;->float;r2..r5
                    4855                                             
1E63 1201D6         4856                                             call            flcmp
1E66 4005           4857                                             jc                      maxvix
1E68 78B8           4858                                             mov                     r0,#work;>
1E6A 120000   F     4859                                             call            saver2;r2..r5
                    4860                                             ;;;;;;;;;
                    4861     
1E6D 020000   F     4862     maxvix:         jmp             minivix
                    4863     
                    4864     
                    4865     
                    4866     
                    4867     ;$include (d:\amp\subr4.asm) 
1E70            +1  4868     loadUS: ;если идет тест измерения ус восстановить для теста
1E70 201533     +1  4869                                     jb              biteizm,yestest
1E73 79AE       +1  4870                                             mov             r1,#diap
1E75 E7         +1  4871                             mov             a,@r1
1E76 23         +1  4872                             rl              a;*2
1E77 FC         +1  4873                             mov             r4,a                    ;save a
1E78 900000   F +1  4874                             mov             dptr,#tabus
1E7B 93         +1  4875                             movc    a,@a+dptr
1E7C FA         +1  4876                             mov             r2,a                    ;high byte
1E7D E584       +1  4877                             mov             a,p4
1E7F 5401       +1  4878                             anl             a,#01
1E81 4A         +1  4879                             orl             a,r2
1E82 F584       +1  4880                             mov             p4,a
1E84 0C         +1  4881                             inc             r4
1E85 EC         +1  4882                             mov             a,r4
1E86 93         +1  4883                             movc    a,@a+dptr
1E87 FB         +1  4884                             mov             r3,a                    ;low byte
1E88 E585       +1  4885                             mov             a,p5
1E8A 5401       +1  4886                             anl             a,#01
1E8C 4B         +1  4887                             orl             a,r3
1E8D F585       +1  4888                             mov             p5,a
1E8F 799A       +1  4889                             mov             r1,#parT
1E91 B7010E     +1  4890                             cjne    @r1,#1,bret
1E94 79AE       +1  4891                             mov             r1,#diap                  ;10s (parT=1)
1E96 7405       +1  4892                             mov             a,#5                      ;10-8..10-11 p4.1=1
1E98 C3         +1  4893                             clr             c
1E99 97         +1  4894                             subb    a,@r1
1E9A 5006       +1  4895                             jnc             bret
1E9C E584       +1  4896                             mov             a,p4
1E9E 4402       +1  4897                             orl             a,#02
1EA0 F584       +1  4898                             mov             p4,a                     ;10-8..10-11 p4.1=1
1EA2 120000   F +1  4899     bret:      call          louizm         ;us если вкл кн ИЗМЕР
1EA5 22         +1  4900                             ret
1EA6            +1  4901     yestest:
1EA6 120000   F +1  4902                             call            lotpus          ;ус теста измерения
1EA9 22         +1  4903                             ret
                +1  4904                             
                +1  4905     ;загр ус для кор 0
                +1  4906     ;dptr-
1EAA E4         +1  4907     lospus:         clr             a
                +1  4908                             ;movc   a,@a+dptr
                +1  4909                             ;mov            r2,a                    ;high byte
                +1  4910                             ;mov            a,p4
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    78

                +1  4911                             ;anl            a,#01
                +1  4912                             ;orl            a,r2
                +1  4913                             ;mov            p4,a
                +1  4914                             ;inc            dptr
1EAB E4         +1  4915                             clr             a
1EAC 93         +1  4916                             movc    a,@a+dptr
1EAD FB         +1  4917                             mov             r3,a                    ;low byte
1EAE E585       +1  4918                             mov             a,p5
1EB0 54BF       +1  4919                             anl             a,#0bfh;01
1EB2 4B         +1  4920                             orl             a,r3
1EB3 F585       +1  4921                             mov             p5,a
1EB5 22         +1  4922                             ret
                +1  4923     
1EB6 80         +1  4924     kor0us:         db              80h;18h,2eh             ;us режима коррекции 0
                +1  4925     
                +1  4926     ;us кнопка измерения выкл
1EB7 88D6       +1  4927     tabus:     db           88h,0d6h         ;10-2
1EB9 88F6       +1  4928                             db      88h,0f6h         ;10-3
1EBB 88D6       +1  4929                             db              88h,0d6h         ;10-4
1EBD 88F6       +1  4930                             db              88h,0f6h         ;10-5
1EBF 9AD6       +1  4931                             db      9ah,0d6h         ;10-6
1EC1 9AF6       +1  4932                             db              9ah,0f6h         ;10-7
1EC3 ACD6       +1  4933                             db              0ach,0d6h        ;10-8
1EC5 ACF6       +1  4934                             db      0ach,0f6h        ;10-9
1EC7 C8D6       +1  4935                             db              0c8h,0d6h        ;10-10
1EC9 C8F6       +1  4936                             db              0c8h,0f6h        ;10-11
                +1  4937     
1ECB            +1  4938     tabt11: 
1ECB 66E6       +1  4939                             db              66h,0e6h;10-11
1ECD            +1  4940     tabt9:  
1ECD 32E6       +1  4941                             db              32h,0e6h;10-9
1ECF            +1  4942     tabt7:  
1ECF 18EE       +1  4943                             db              18h,0eeh;10-7
                +1  4944     
                +1  4945      ;загрузка текста в буфер 2 bufind+0..bufind9
                +1  4946     ;в зав от parT (Tизм)
1ED1 79B7       +1  4947     loadT:          mov             r1,#load;parT
1ED3 7840       +1  4948     lolevT:         mov             r0,#bufind+0
1ED5 7B0A       +1  4949                             mov             r3,#10
1ED7 75F00A     +1  4950                             mov             b,#10
1EDA E7         +1  4951                             mov             a,@r1
1EDB A4         +1  4952                             mul             ab
1EDC FC         +1  4953                             mov             r4,a                    ;save a
1EDD 900000   F +1  4954                             mov             dptr,#textT
1EE0 93         +1  4955             lod1:   movc    a,@a+dptr
1EE1 F6         +1  4956                             mov             @r0,a
1EE2 08         +1  4957                             inc             r0
1EE3 0C         +1  4958                             inc             r4
1EE4 EC         +1  4959                             mov             a,r4
1EE5 DBF9       +1  4960                             djnz    r3,lod1
1EE7 22         +1  4961                             ret     
                +1  4962     ;загрузка текста в буфер 2 bufind+0..bufind9                    
                +1  4963     ;dptr-адр строки текста         
1EE8            +1  4964     lotext:         
1EE8 7B0A       +1  4965                             mov             r3,#10
1EEA 7840       +1  4966                             mov             r0,#bufind+0
1EEC E4         +1  4967     lodt:           clr             a
1EED 93         +1  4968                             movc    a,@a+dptr
1EEE F6         +1  4969                             mov             @r0,a
1EEF 08         +1  4970                             inc             r0
1EF0 A3         +1  4971                             inc             dptr
1EF1 DBF9       +1  4972                             djnz    r3,lodt
1EF3 22         +1  4973                             ret                                     
                +1  4974     
                +1  4975     
                +1  4976     
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    79

                +1  4977     
                +1  4978      ;задержка 100 мкс
1EF4 7978       +1  4979     z_100:    mov R1,#78h     ;загрузка первого числа
1EF6 7A02       +1  4980     z100:     mov R2,#2h     ;загрузка второго числа
1EF8 DAFE       +1  4981     count:    djnz R2, count;декремент R2 и внутренний цикл, если R2<>0     
1EFA D9FA       +1  4982               djnz R1, z100 ;декремент R1 и внутренний цикл, если R1<>0
1EFC 22         +1  4983               ret           
                +1  4984     
                +1  4985     ;задержка 34 мкс
1EFD 7B8B       +1  4986     z_5:      mov R3,#8Bh      ;загрузка числа
1EFF DBFE       +1  4987     ct:       djnz R3,ct
1F01 22         +1  4988               ret
                +1  4989     
                +1  4990     ;задержка 15 мс
1F02 79FA       +1  4991     z_15:     mov R1,#0FAh    ;загрузка первого числа
1F04 7AED       +1  4992     z15:      mov R2,#0EDh   ;загрузка второго числа
1F06 DAFE       +1  4993     zz:       djnz R2, zz   ;декремент R2 и внутренний цикл, если R2<>0
1F08 D9FA       +1  4994               djnz R1, z15  ;декремент R1 и внутренний цикл, если R1<>0
1F0A 22         +1  4995               ret   
                +1  4996                                               
                +1  4997      ;задержка 1 мс
1F0B 7910       +1  4998     z_1ms:     mov R1,#10h     
1F0D 7AED       +1  4999     ss1:       mov R2,#0EDh    
1F0F DAFE       +1  5000                djnz R2, $    
1F11 D9FA       +1  5001                djnz R1, ss1   
1F13 22         +1  5002                ret   
                +1  5003     
                +1  5004      ;????????
                +1  5005     ;задержка 1с
1F14 7D1F       +1  5006     z_1s:   mov             r5,#01fh 
1F16 7EFF       +1  5007     co2s:   mov     R6,#0ffh     
1F18 7FFF       +1  5008     z1s:     mov    R7,#0ffh     
1F1A DFFE       +1  5009     co1s:   djnz    R7, co1s        
1F1C DEFA       +1  5010             djnz    R6, z1s 
1F1E DDF6       +1  5011                     djnz    r5,co2s
1F20 22         +1  5012               ret
                +1  5013     ;задержка 0,1с
1F21 7D03       +1  5014     z_01s:           mov            r5,#03h 
1F23 7EFF       +1  5015     co02s:          mov     R6,#0ffh     
1F25 7FFF       +1  5016     z01s:           mov     R7,#0ffh     
1F27 DFFE       +1  5017                             djnz    R7, $   
1F29 DEFA       +1  5018                     djnz    R6, z01s 
1F2B DDF6       +1  5019                             djnz    r5,co02s
1F2D 22         +1  5020                      ret
                +1  5021                                               
                +1  5022     ;задержка 0,5с
1F2E 7D0D       +1  5023     z_05s:           mov            r5,#0dh 
1F30 7EFF       +1  5024     co05s:                  mov     R6,#0ffh     
1F32 7FFF       +1  5025     z05s:           mov     R7,#0ffh     
1F34 DFFE       +1  5026                                     djnz    R7, $   
1F36 DEFA       +1  5027                     djnz    R6, z05s 
1F38 DDF6       +1  5028                                             djnz    r5,co05s
1F3A 22         +1  5029                      ret                                                     
                +1  5030                                                               
1F3B 000007FF   +1  5031     chzap:  db      00,00,07h,0ffh             
1F3F 00000000   +1  5032     ch0:    db      00,00,00,00
1F43 0000000A   +1  5033     ch10:   db      00,00,00,0ah                            ;10
1F47 00000005   +1  5034     ch5:    db      00,00,00,05                                             ;5
1F4B 00000004   +1  5035     ch4:    db      00,00,00,04                                             ;4
1F4F 000003B9   +1  5036     ch954:  db 00,00,03,0b9h                                                ;954
1F53 000003E8   +1  5037     ch10000:        db 00,00,03h,0e8h                                               ;10000
1F57 00000064   +1  5038     ch100:  db 00,00,00,64h ;100
1F5B 00000002   +1  5039     ch2:    db      00,00,00,02                                             
                +1  5040     ;CH_953:        db 3fh,74h,37h,72h;0,953971
                +1  5041     ;CH_953:        db 3fh,74h,1ch,71h;0,953558
                +1  5042     ;CH_953:        db 3fh,74h,02,0d2h;0.953168
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    80

1F5F 00000001   +1  5043     ch1:    db  00,00,00,01
1F63 49742400   +1  5044     ch_mln: db      49h,74h,24h,00;10*6
1F67 3F800000   +1  5045     ch_1:   db      3fh,80h,00,00   
1F6B 40000000   +1  5046     ch_2:   db      40h,00,00,00;2
1F6F 40800000   +1  5047     ch_4:   db      40h,80h,00,00;4         
1F73 3F741EDF   +1  5048     CH_953: db 3fh,74h,1eh,0dfh             ;0,953596
1F77 47C35000   +1  5049     CHtho:  db      47h,0c3h,50h,00;48h,43h,50h,00;30d40 h  -000
1F7B 3F800347   +1  5050     KD:             db      3fh,80h,03h,47h;1,0001
1F7F 48435000   +1  5051     CH2tho: db      48h,43h,50h,00;200000
1F83 4856D800   +1  5052     ch_220: db  48h,56h,0d8h,00;220000 -035b60 h
1F87 4856D800   +1  5053     ch_200: db  48h,56h,0d8h,00;200000 -030d40 h
1F8B 461C4000   +1  5054     ch_10th:db  46h,1ch,40h,00;10000-2710h
1F8F 41200000   +1  5055     ch_10:  db      41h,20h,00,00;10d
1F93 48742400   +1  5056     ch_250: db      48h,74h,24h,00;250000
1F97 000186A0   +1  5057     chk:            db      00,01,86h,0a0h;
1F9B 00000320   +1  5058     ch320h: db      00,00,03h,20h;320h=800d
1F9F 00000150   +1  5059     ch150h: db      00,00,01h,50h;150h
                +1  5060     ;r1- мл байт 2х байтного числа
1FA3            +1  5061     tenmin:         ;-10
1FA3 C3         +1  5062                             clr             c
1FA4 E7         +1  5063                     mov             a,@r1
1FA5 9405       +1  5064                             subb    a,#5;10
1FA7 F7         +1  5065                             mov             @r1,a
1FA8 19         +1  5066                             dec             r1
1FA9 E7         +1  5067                             mov             a,@r1
1FAA 9400       +1  5068                             subb    a,#0
1FAC F7         +1  5069                             mov             @r1,a
1FAD 22         +1  5070                             ret
                +1  5071       ;r0-обнуление ячеек памяти  
1FAE 7F04       +1  5072       clear4:        mov    r7,#4
1FB0 E4         +1  5073                             clr             a
1FB1 F6         +1  5074       cl4:          mov             @r0,a
1FB2 08         +1  5075                             inc             r0
1FB3 DFFC       +1  5076                             djnz    r7,cl4
1FB5 22         +1  5077                             ret     
                +1  5078     
                +1  5079      ;r0-обнуление ячеек памяти 
                +1  5080      ;R7- 
1FB6            +1  5081       clearN:        
1FB6 E4         +1  5082                             clr             a
1FB7 F6         +1  5083       cl4N:         mov             @r0,a
1FB8 08         +1  5084                             inc             r0
1FB9 DFFC       +1  5085                             djnz    r7,cl4N
1FBB 22         +1  5086                             ret     
                +1  5087     
                +1  5088       ;чтение номера байта с индикатора(2байта)
                +1  5089     ;bufind+8..bufind+9
                +1  5090     ;-  - - -
                +1  5091     ;- - - - - - - - - -
                +1  5092     ;adec..adec+9
                +1  5093     ;ст            мл
1FBC 7848       +1  5094     upak2:  mov             r0,#bufind+8;
1FBE 795C       +1  5095                     mov             r1,#adec+9
1FC0 7F02       +1  5096                     mov             r7,#2;2bait
1FC2 C3         +1  5097     upa2:   clr             c
1FC3 E6         +1  5098                     mov             a,@r0
1FC4 9430       +1  5099                     subb    a,#30h
1FC6 F7         +1  5100                     mov             @r1,a
1FC7 18         +1  5101                     dec             r0
1FC8 19         +1  5102                     dec             r1
1FC9 DFF7       +1  5103                     djnz    r7,upa2
1FCB 22         +1  5104                     ret  
                +1  5105     
                +1  5106     
                +1  5107         
                +1  5108      ;bufind+4..bufind+9
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    81

                +1  5109     ;-  - - -
                +1  5110     ;- - - - - - - - - -
                +1  5111     ;adec..adec+9
                +1  5112     ;ст            мл
1FCC 7849       +1  5113     upak:   mov             r0,#bufind+9;
1FCE 795C       +1  5114                     mov             r1,#adec+9
1FD0 7F06       +1  5115                     mov             r7,#6
1FD2 C3         +1  5116     upa:    clr             c
1FD3 E6         +1  5117                     mov             a,@r0
1FD4 9430       +1  5118                     subb    a,#30h
1FD6 F7         +1  5119                     mov             @r1,a
1FD7 18         +1  5120                     dec             r0
1FD8 19         +1  5121                     dec             r1
1FD9 DFF7       +1  5122                     djnz    r7,upa
1FDB 22         +1  5123                     ret
                +1  5124     
                +1  5125      ;чтение номера байта с индикатора(3байта)
                +1  5126     ;bufind+3..bufind+9
                +1  5127     ;-  - - -
                +1  5128     ;- - - - - - - - - -
                +1  5129     ;adec..adec+9
                +1  5130     ;ст            мл
1FDC 7849       +1  5131     upak3:  mov             r0,#bufind+9;
1FDE 795C       +1  5132                     mov             r1,#adec+9
1FE0 7F03       +1  5133                     mov             r7,#3;3bait
1FE2 C3         +1  5134     upa1:   clr             c
1FE3 E6         +1  5135                     mov             a,@r0
1FE4 9430       +1  5136                     subb    a,#30h
1FE6 F7         +1  5137                     mov             @r1,a
1FE7 18         +1  5138                     dec             r0
1FE8 19         +1  5139                     dec             r1
1FE9 DFF7       +1  5140                     djnz    r7,upa1
1FEB 22         +1  5141                     ret
                +1  5142     
                +1  5143     ;вых-r2,r3-адрес ячее памяти прогр
1FEC            +1  5144     findkoef:
1FEC 79AE       +1  5145                                     mov             r1,#diap
1FEE E7         +1  5146                                     mov             a,@r1
1FEF 23         +1  5147                                     rl              a                                          
                                          ;diap*2(2bait )
1FF0 FC         +1  5148                                     mov             r4,a                                    ;sa
                             ve
1FF1 900000   F +1  5149                                     mov             dptr,#diKDw             ;адрес таблицы поис
                             ка коффициентов
                +1  5150                                     
1FF4 93         +1  5151                                     movc    a,@a+dptr                       ;ст байт
1FF5 FA         +1  5152                                     mov             r2,a
1FF6 A3         +1  5153                                     inc             dptr
1FF7 EC         +1  5154                                     mov             a,r4
1FF8 93         +1  5155                                     movc    a,@a+dptr
1FF9 FB         +1  5156                                     mov             r3,a                    ;мл байт
1FFA 22         +1  5157                                     ret
                +1  5158     ;r2..r5 в опр яч внешн озу
1FFB            +1  5159     findext:
1FFB 79AE       +1  5160                                     mov             r1,#diap
1FFD E7         +1  5161                                     mov             a,@r1
1FFE 23         +1  5162                                     rl              a                                          
                                          ;diap*2(2bait )
1FFF 23         +1  5163                                     rl              a                                          
                                          ;diap*2(2bait )
2000 F9         +1  5164                                     mov             r1,a                                    ;r1
                             -номер ячейки внешнего озу
                +1  5165                                     
2001 22         +1  5166                                     ret
                +1  5167     
                +1  5168     ;адрес ячеек прзу  коффициентов диапазона KD
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    82

                +1  5169     ;(5000h..5027h)
2002 5000       +1  5170     diKDw:  dw              5000h                   ;10-2
2004 5004       +1  5171                                     dw              5004h                   ;10-3
2006 5008       +1  5172                                     dw              5008h                   ;10-4
2008 500C       +1  5173                                     dw              500ch                   ;10-5
200A 5010       +1  5174                                     dw              5010h                   ;10-6
200C 5014       +1  5175                                     dw              5014h                   ;10-7
200E 5018       +1  5176                                     dw              5018h                   ;10-8
2010 501C       +1  5177                                     dw              501ch                   ;10-9
2012 5020       +1  5178                                     dw              5020h                   ;10-10
2014 5024       +1  5179                                     dw              5024h                   ;10-11
2016 5028       +1  5180     dipar:  dw              5028h                   ;parol
                +1  5181     
2018 000186A0   +1  5182     chthou: db      00,01,86h,0a0h  ;100.000
                +1  5183     
201C AA08       +1  5184     move82:         mov     r2,ltemp                        ;ltemp->r2..r5
201E AB09       +1  5185                                             mov     r3,ltemp+1
2020 AC0A       +1  5186                                             mov     r4,ltemp+2
2022 AD0B       +1  5187                                             mov     r5,ltemp+3
2024 22         +1  5188                                             ret
                +1  5189     ;bufind+4..bufind+9
                +1  5190     ;-  - - -
                +1  5191     ;- - - - - - - - - -
                +1  5192     ;adec..adec+9
                +1  5193     ;ст            мл
2025 7847       +1  5194     upakA:  mov             r0,#bufind+7;
2027 795C       +1  5195                     mov             r1,#adec+9
2029 7F04       +1  5196                     mov             r7,#4
202B C3         +1  5197     upaa4:  clr             c
202C E6         +1  5198                     mov             a,@r0
202D 9430       +1  5199                     subb    a,#30h
202F F7         +1  5200                     mov             @r1,a
2030 18         +1  5201                     dec             r0
2031 19         +1  5202                     dec             r1
2032 DFF7       +1  5203                     djnz    r7,upaa4
2034 22         +1  5204                     ret
                +1  5205     
                +1  5206     ;bufind+4..bufind+9
                +1  5207     ;-  - - -
                +1  5208     ;- - - - - - - - - -
                +1  5209     ;adec..adec+9
                +1  5210     ;ст            мл
2035 7848       +1  5211     upakB:  mov             r0,#bufind+8;
2037 795C       +1  5212                     mov             r1,#adec+9
2039 7F05       +1  5213                     mov             r7,#5
203B C3         +1  5214     upab:   clr             c
203C E6         +1  5215                     mov             a,@r0
203D 9430       +1  5216                     subb    a,#30h
203F F7         +1  5217                     mov             @r1,a
2040 18         +1  5218                     dec             r0
2041 19         +1  5219                     dec             r1
2042 DFF7       +1  5220                     djnz    r7,upab
2044 C21B       +1  5221                     clr                     bitznB
2046 E543       +1  5222                     mov             a,bufind+3
2048 B42D02     +1  5223                     cjne            a,#2dh,abret
204B D21B       +1  5224                     setb            bitznB
204D            +1  5225     abret:
204D 22         +1  5226                     ret
204E            +1  5227     CH_B:                   db      ;       4bh,18h,96h,80h;989680h=10 **7
204E 4E6E6AA8   +1  5228                                             db      4eh,6eh,6ah,0a8h;10**9
2052 43FA0000   +1  5229     CH_500:         db              43h,0fah,00,00;1fah=500
2056 4856D800   +1  5230     CH_22T:         db              48h,56h,0d8h,00;46h,0abh,0e0h,00;55f0h=22000
205A 49742400   +1  5231     CH_fl:  db      49h,74h,24h,00;47h,0c3h,50h,00;100000
                +1  5232     
                +1  5233     
                +1  5234     
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    83

                +1  5235     ;управление AD7731
                +1  5236     ;r4=b1 r5=b2
205E            +1  5237     iniacp: ;управление AD7731
205E 7403       +1  5238                             mov             a,#03
                +1  5239     
2060 120000   F +1  5240                             call    write
2063 EC         +1  5241                             mov             a,r4;#80h
2064 120000   F +1  5242                             call    write
2067 ED         +1  5243                             mov             a,r5;#04
2068 120000   F +1  5244                             call    write
206B 7402       +1  5245                             mov             a,#02
206D 120000   F +1  5246                             call    write
2070 74A1       +1  5247                             mov             a,#0a1h
2072 120000   F +1  5248                             call    write
2075 7474       +1  5249                             mov             a,#74h
2077 120000   F +1  5250                             call    write
207A 2095FD     +1  5251                             jb              p1.5,$;p1.3,$
207D 7402       +1  5252                             mov             a,#02
207F 120000   F +1  5253                             call    write
2082 7481       +1  5254                             mov             a,#81h
2084 120000   F +1  5255                             call    write
2087 7474       +1  5256                             mov             a,#74h
2089 120000   F +1  5257                             call    write
208C 2095FD     +1  5258                             jb              p1.5,$;p1.3,$
208F 7402       +1  5259                             mov             a,#02
2091 120000   F +1  5260                             call    write
2094 7421       +1  5261                             mov             a,#21h
2096 120000   F +1  5262                             call    write
2099 7474       +1  5263                             mov             a,#74h
209B 120000   F +1  5264                             call    write
209E 22         +1  5265                             ret
                +1  5266                             ;;;;;;;;;;;;;;;;
                +1  5267     ;;;;;;;;;;;;;;;;;
                +1  5268     ;;;;;;;;;;;;;;;;;
209F 0000       +1  5269     tabB1_2:                db              00,00            ;B1,B2 в соотв с Tизм  
20A1 6000       +1  5270                                     db              60h,00h;40h,04h         ;10s
20A3 6000       +1  5271                                     db              60h,00;40h,04h          ;1s
20A5 6000       +1  5272                                     db              60h,00h;40h,04h         ;0,1s
20A7 6000       +1  5273                                     db              60h,00h;20h,04h         ;50ms
20A9 6000       +1  5274                                     db              60h,00h;20h,04h          ;10ms
20AB 1332       +1  5275                                     db              13h,32h         ;2ms
                +1  5276     
                +1  5277     ;загр В1,В2 в завис от Т                                
20AD 799A       +1  5278     loab12:                 mov             r1,#parT
20AF 900000   F +1  5279                                     mov             dptr,#tabB1_2
20B2 E7         +1  5280                                     mov             a,@r1
20B3 23         +1  5281                                     rl              a;*2
20B4 FF         +1  5282                                     mov             r7,a                    ;save a
20B5 93         +1  5283                                     movc    a,@a+dptr
20B6 FC         +1  5284                                     mov             r4,a   ;b1
20B7 0F         +1  5285                                     inc             r7
20B8 EF         +1  5286                                     mov             a,r7
20B9 93         +1  5287                                     movc    a,@a+dptr
20BA FD         +1  5288                                     mov             r5,a
                +1  5289                                     ;после загр В1,2 загр упр слово для нового Т
                +1  5290                             
20BB 22         +1  5291                                     ret
                +1  5292     
                +1  5293     
20BC 7852       +1  5294     loadr2: mov             r0,#abin+3              ;r2..r5
20BE E6         +1  5295                     mov             a,@r0                   ; ст мл   
20BF FA         +1  5296                     mov             r2,a
20C0 18         +1  5297                     dec             r0
20C1 E6         +1  5298                     mov             a,@r0
20C2 FB         +1  5299                     mov             r3,a
20C3 18         +1  5300                     dec             r0
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    84

20C4 E6         +1  5301                     mov             a,@r0
20C5 FC         +1  5302                     mov             r4,a
20C6 18         +1  5303                     dec             r0
20C7 E6         +1  5304                     mov             a,@r0
20C8 FD         +1  5305                     mov             r5,a
20C9 22         +1  5306                     ret
                +1  5307                                             
                +1  5308      ;;;;;;;;;;;;;;;;;;;      
                +1  5309      ;загрузка KD в зависимости от диап изм  
                +1  5310      ;koef->r8..r11
20CA 78AE       +1  5311     loadKD:                 mov             r0,#diap
20CC E6         +1  5312                                     mov             a,@r0
20CD 900000   F +1  5313                                     mov             dptr,#diKDn
20D0 75F004     +1  5314                                     mov             b,#4
20D3 A4         +1  5315                                     mul             ab
20D4 FF         +1  5316                                     mov             r7,a;save
20D5 93         +1  5317                                     movc    a,@a+dptr
20D6 F508       +1  5318                                     mov             r8,a
20D8 A3         +1  5319                                     inc             dptr
20D9 EF         +1  5320                                     mov             a,r7
20DA 93         +1  5321                                     movc    a,@a+dptr
20DB F509       +1  5322                                     mov             r9,a
20DD A3         +1  5323                                     inc             dptr
20DE EF         +1  5324                                     mov             a,r7
20DF 93         +1  5325                                     movc    a,@a+dptr
20E0 F50A       +1  5326                                     mov             r10,a
20E2 A3         +1  5327                                     inc             dptr
20E3 EF         +1  5328                                     mov             a,r7
20E4 93         +1  5329                                     movc    a,@a+dptr
20E5 F50B       +1  5330                                     mov             r11,a
20E7 22         +1  5331                                     ret
                +1  5332     
20E8 3F506B7B   +1  5333      diKDn:                 db              3fh,50h,6bh,7bh;3fh,80h,00,00           ;10-2
20EC 3F507FCC   +1  5334                                     db              3fh,50h,7fh,0cch;3fh,80h,00,00          ;10
                             -3
20F0 3F4F9D0B   +1  5335                                     db              3fh,4fh,9dh,0bh;3fh,80h,00,00           ;10
                             -4
20F4 3F4FE869   +1  5336                                     db              3fh,4fh,0e8h,69h;3fh,80h,00,00          ;10
                             -5
20F8 3F50294A   +1  5337                                     db              3fh,50h,29h,4ah;3fh,80h,00,00;4fh,0e9h,11h 
                                  ;0,81215   10-6
20FC 3F50639E   +1  5338                                      db             3fh,50h,63h,9eh;3fh,80h,00,00           ;10
                             -7
2100 3F4BC9F0   +1  5339                                     db              3fh,4bh,0c9h,0f0h;3fh,80h,00,00         ;10
                             -8
2104 3F4C063B   +1  5340                                     db              3fh,4ch,06h,3bh;3fh,80h,00,00           ;10
                             -9
2108 3F50EFDD   +1  5341                                     db              3fh,50h,0efh,0ddh;3fh,80h,00,00         ;10
                             -10
210C 3F512AD9   +1  5342                                     db              3fh,51h,2ah,0d9h;3fh,80h,00,00          ;10
                             -11
                +1  5343     
2110 00000039   +1  5344     ch57:   db      00,00,00,39h;57
2114 00000014   +1  5345     ch20:   db      00,00,00,14h;20
                +1  5346     
                +1  5347     ;загр ус для тестов ацп 
                +1  5348     ;dptr-
2118 78B1       +1  5349     lotpus: mov             r0,#vichR
211A B6210D     +1  5350                                     cjne    @r0,#21h,te22
211D 900000   F +1  5351                                     mov                     dptr,#tabt11;заслать ус 11А
2120 E4         +1  5352     lotp:           clr             a
2121 93         +1  5353                             movc    a,@a+dptr                               ;high byte
2122 F584       +1  5354                             mov             p4,a
2124 A3         +1  5355                             inc             dptr
2125 E4         +1  5356                             clr             a
2126 93         +1  5357                             movc    a,@a+dptr                               ;low byte
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    85

2127 F585       +1  5358                             mov             p5,a
2129 22         +1  5359                             ret
212A B62205     +1  5360     te22:                   cjne    @r0,#22h,te23
212D 900000   F +1  5361                             mov                     dptr,#tabt9;заслать ус 9А       
2130 80EE       +1  5362                             jmp                     lotp
                +1  5363     
2132 900000   F +1  5364     te23:   mov                     dptr,#tabt7;заслать ус 7А       
2135 80E9       +1  5365                             jmp                     lotp
                +1  5366     
                +1  5367     
                +1  5368     
                +1  5369     
                +1  5370     
2137 02030405   +1  5371     Tabn:           db              2,3,4,5,6,7,8,9,10,11                           ;порядок ди
                             апазонов степени
213B 06070809                
213F 0A0B                    
                +1  5372     
2141 78AE       +1  5373     findR:                  mov                     r0,#diap
2143 E6         +1  5374                                                     mov                     a,@r0
2144 900000   F +1  5375                                                     mov                     dptr,#Tabn
2147 93         +1  5376                                                     movc            a,@a+dptr
2148 22         +1  5377                                                     ret
                +1  5378     
                +1  5379     ;bufind=30h..39h                                                                           
                                           ;
2149 C219       +1  5380     vvchif:                 clr             bitmig
214B 79B2       +1  5381                                     mov             r1,#marker
214D E7         +1  5382                                     mov             a,@r1                   ;изм цифры
214E 7840       +1  5383                                     mov             r0,#bufind                      ;0000
2150 28         +1  5384                                     add             a,r0
2151 F8         +1  5385                                     mov             r0,a
2152 06         +1  5386                                     inc             @r0
2153 B63A02     +1  5387                                     cjne    @r0,#3ah,chif
2156 7630       +1  5388                                     mov             @r0,#30h
2158            +1  5389     chif:   
2158 22         +1  5390                             ret
2159            +1  5391     vvchibl:        ;mov                    r0,#level
                +1  5392                                             ;cjne           @r0,#32h,vvchibl4;при наборе цифр в
                              блоке
2159 80EE       +1  5393                                             jmp                     vvchif  ;при наборе цифр в 
                             интервале                                    
215B            +1  5394     vvchibl4:
215B C219       +1  5395                             clr             bitmig
215D 79B2       +1  5396                                     mov             r1,#marker
215F E7         +1  5397                                     mov             a,@r1                   ;изм цифры
2160 7840       +1  5398                                     mov             r0,#bufind                      ;1..4
2162 28         +1  5399                                     add             a,r0
2163 F8         +1  5400                                     mov             r0,a
2164 06         +1  5401                                     inc             @r0
2165 B63504     +1  5402                                     cjne    @r0,#35h,chifb
2168 7631       +1  5403                                     mov             @r0,#31h
216A 8005       +1  5404                                     jmp             chifb1
216C B63002     +1  5405     chifb:  cjne    @r0,#30h,chifb1
216F 7631       +1  5406                                     mov             @r0,#31h
2171            +1  5407     chifb1:
2171 22         +1  5408             ret
                +1  5409       ;перевод маркера влево
2172            +1  5410     marle:  
2172 C219       +1  5411                     clr             bitmig
                +1  5412                     ;mov            savba,#0   нельзя обнулять
2174 78B2       +1  5413             mov             r0,#marker
2176 16         +1  5414                     dec             @r0
2177 E6         +1  5415                     mov             a,@r0
2178 C3         +1  5416                     clr             c
2179 953A       +1  5417                     subb    a,movleft         ;крайне левое положение
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    86

217B 5001       +1  5418                     jnc             rler
217D 06         +1  5419                     inc             @r0
217E 22         +1  5420     rler:   ret
                +1  5421         
                +1  5422     ;перевод маркера вправо
217F C219       +1  5423     marri:  clr             bitmig
2181 78B2       +1  5424                     mov             r0,#marker
2183 06         +1  5425                     inc         @r0
2184 E53B       +1  5426                     mov             a,movrig           ;крайне правое положение
2186 C3         +1  5427                     clr             c
2187 96         +1  5428                     subb    a,@r0
2188 5001       +1  5429                     jnc             rrir
218A 16         +1  5430                     dec             @r0
218B 22         +1  5431     rrir:   ret
                +1  5432         
                +1  5433     ;konstA->bufind+4..bufind+7
218C 78BC       +1  5434     outA:           mov                     r0,#konstA
218E 120000   F +1  5435                                     call            resar2
2191 120343     +1  5436                                     call            ftol                    ;->hex
2194 784F       +1  5437                                     mov             r0,#abin
2196 120000   F +1  5438                                     call            saver2
2199 7853       +1  5439                                     mov                     r0,#adec
219B 7952       +1  5440                                     mov             r1,#abin+3
219D 120000   F +1  5441                                     call            bindec
21A0 785C       +1  5442                                     mov                     r0,#adec+9
21A2 7947       +1  5443                                     mov                     r1,#bufind+7
21A4 7F04       +1  5444                                     mov                     r7,#4
21A6 E6         +1  5445     outa2:  mov             a,@r0
21A7 2430       +1  5446                               add           a,#30h
21A9 F7         +1  5447                                     mov             @r1,a
21AA 19         +1  5448                                     dec             r1
21AB 18         +1  5449                                     dec             r0
21AC DFF8       +1  5450                                     djnz    r7,outa2
21AE 22         +1  5451                                     ret
                +1  5452                                             
                +1  5453     ;konstB->bufind+4..bufind+8
21AF 78C0       +1  5454     outB:           mov                     r0,#konstB
21B1 120000   F +1  5455                                     call            resar2
21B4 EA         +1  5456                                     mov                     a,r2
21B5 5480       +1  5457                                     anl                     a,#80h
21B7 6007       +1  5458                                     jz                      outb3
21B9 EA         +1  5459     mov                     a,r2
21BA 547F       +1  5460                                     anl                     a,#7fh
21BC FA         +1  5461                                     mov                     r2,a
21BD 75432D     +1  5462                                     mov                     bufind+3,#2dh
21C0 120343     +1  5463     outb3:  call            ftol                    ;->hex
21C3 784F       +1  5464                                     mov             r0,#abin
21C5 120000   F +1  5465                                     call            saver2
21C8 7853       +1  5466                                     mov                     r0,#adec
21CA 7952       +1  5467                                     mov             r1,#abin+3
21CC 120000   F +1  5468                                     call            bindec
21CF 785C       +1  5469                                     mov                     r0,#adec+9
21D1 7948       +1  5470                                     mov                     r1,#bufind+8
21D3 7F05       +1  5471                                     mov                     r7,#5
21D5 E6         +1  5472     outb2:  mov             a,@r0
21D6 2430       +1  5473                               add           a,#30h
21D8 F7         +1  5474                                     mov             @r1,a
21D9 19         +1  5475                                     dec             r1
21DA 18         +1  5476                                     dec             r0
21DB DFF8       +1  5477                                     djnz    r7,outb2
21DD 22         +1  5478                                     ret
                +1  5479     
                +1  5480     
                +1  5481     ;пп мигания индикации
21DE 78B2       +1  5482     mign:           mov             r0,#marker
                +1  5483                                     
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    87

21E0 B6FF03     +1  5484                                     cjne    @r0,#0ffh,mignn
                +1  5485                                     ;реж изм мигает *
21E3 C219       +1  5486                                     clr             bitmig
21E5 22         +1  5487                                     ret
                +1  5488     
21E6            +1  5489     mignn:                  ;clr            c
21E6 7440       +1  5490                                     mov             a,#bufind
21E8 26         +1  5491                                     add             a,@r0                   ;a=bufind+marker
21E9 F9         +1  5492                                     mov             r1,a
21EA 201907     +1  5493                                     jb              bitmig,onmig
21ED 873C       +1  5494                                     mov             savba,@r1
                +1  5495                             ;       mov             a,@r1
                +1  5496                             ;       mov             savba,a
21EF 7720       +1  5497                                     mov             @r1,#" "
                +1  5498                                     
21F1 D219       +1  5499                                     setb    bitmig
21F3 22         +1  5500                                     ret
                +1  5501     
21F4 A73C       +1  5502     onmig:                  mov             @r1,savba
                +1  5503                                     ;mov            a,savba
                +1  5504                                     ; mov           @r1,a
21F6 C219       +1  5505                                     clr             bitmig
21F8 120000   F +1  5506                                     call    z_01s
21FB 22         +1  5507                                     ret
                +1  5508     ;номер ошибки bufind+6
21FC 900000   F +1  5509     error:          mov             dptr,#teERR
21FF 120000   F +1  5510                                             call    lotext
2202 853946     +1  5511                                             mov             bufind+6,nuerr
2205 22         +1  5512                                     ret
                +1  5513     
                +1  5514     
2206            +1  5515     textT:          
2206 FD543D32   +1  5516                             db              0fdh,"T","=",32h,"m",67h,0fdh,0fdh,0fdh,0fdh ;load=
                             0..5
220A 6D67FDFD                
220E FDFD                    
2210 FD543D31   +1  5517                             db              0fdh,"T","=",31h,30h,"m",67h,0fdh,0fdh,0fdh
2214 306D67FD                
2218 FDFD                    
221A FD543D35   +1  5518                             db              0fdh,"T","=",35h,30h,"m",67h,0fdh,0fdh,0fdh
221E 306D67FD                
2222 FDFD                    
2224 FD543D64   +1  5519                             db              0fdh,"T","=",64h,31h,67h,0fdh,0fdh,0fdh,0fdh
2228 3167FDFD                
222C FDFD                    
222E 20202054   +1  5520                             db              " "," "," ","T","=",31h,67h," "," "," "
2232 3D316720                
2236 2020                    
2238 2020543D   +1  5521                             db              " "," ","T","=",31h,30h,67h," "," "," "  
223C 31306720                
2240 2020                    
                +1  5522     ;teNO:          db              0fdh,0fdh,0fdh,"H","E","T",0fdh,0fdh,0fdh,0fdh
                +1  5523     
2242 42753474   +1  5524     teVICH: db              "B",75h,34h,74h,79h,76h,74h,"T",77h," ";вычислить
2246 79767454                
224A 7720                    
224C 20413D20   +1  5525     teAequ0:        db              " ",'A','='," "," "," "," "," "," ",65h
2250 20202020                
2254 2065                    
2256 20423D2B   +1  5526     teBequ0:        db              " ",'B','=','+'," "," "," "," "," "," "
225A 20202020                
225E 2020                    
2260 20207145   +1  5527     teMENU: db              " "," ",71h,"E","H",72h," "," "," "," "
2264 48722020                
2268 2020                    
                +1  5528     
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    88

226A 20544579   +1  5529     teTESI: db      " ","T","E",79h,"T",2dh,74h,33h,71h," ";ТЕСТ -ИЗМ    11
226E 542D7433                
2272 7120                    
2274 54457954   +1  5530     teTESR: db      "T","E",79h,"T"," ","R",35h," "," "," ";ТЕСТ RS 12
2278 20523520                
227C 2020                    
227E 20794B30   +1  5531     teSKOR: db      " ",79h,'K',30h,"P"," ","R",35h," "," ";СКОР 232      13
2282 50205235                
2286 2020                    
2288 20204142   +1  5532     teAVK:  db      " "," ",'A','B','K'," "," "," "," "," "  ;AВK                              
                                  14
228C 4B202020                
2290 2020                    
2292 204B4176   +1  5533     teKALIB:         db     " " ,'K','A',76h,74h,73h,"P "," "," "," ";КАЛИБР    15
2296 74735020                
229A 202020                  
                +1  5534     
229D 20544579   +1  5535     teTE11:         db              " ",'T',"E",79h,'T'," ",2dh,31h,31h,'A';          21
22A1 54202D31                
22A5 3141                    
22A7 20544579   +1  5536     teTE9:          db              " ",'T',"E",79h,'T'," ",2dh,30h,39h,'A';                   
                                                  22
22AB 54202D30                
22AF 3941                    
22B1 20544579   +1  5537     teTE7:          db              " ",'T',"E",79h,'T'," ",2dh,30h,37h,'A';                   
                                                  23
22B5 54202D30                
22B9 3741                    
                +1  5538     
                +1  5539     
22BB 20203537   +1  5540     teS57_6:                db              " "," ",35h,37h,36h," "," "," "," "," ";57.6
22BF 36202020                
22C3 2020                    
22C5 20203139   +1  5541     teS19_2:                db              " "," ",31h,39h,32h," "," "," "," "," ";19,2
22C9 32202020                
22CD 2020                    
                +1  5542     
22CF 61415030   +1  5543     tePAR:          db              61h,'A',"P",30h,76h,77h," ",30h,30h,30h;пароль
22D3 76772030                
22D7 3030                    
22D9 20303030   +1  5544     teKD:                   db              " ",30h,30h,30h,30h,30h," "," "," ",'A';00000
22DD 30302020                
22E1 2041                    
22E3 74337120   +1  5545     teIZMK: db      74h,33h,71h," ","K",30h,"H",79h,"T"," "
22E7 4B304879                
22EB 5420                    
22ED 20204275   +1  5546     teOUT:          db      " "," ","B",75h,"X",30h,78h," "," "," "  ;ВЫХОД
22F1 58307820                
22F5 2020                    
22F7 2020304C   +1  5547     teOLL:          db      " "," ",30h,'L','L'," "," "," "," "," "  ;OLL
22FB 4C202020                
22FF 2020                    
2301 20203034   +1  5548     teCLE:          db      " "," ",30h,34h,74h,79h,'T','K','A' ," " ;ОЧИСТКА
2305 7479544B                
2309 4120                    
230B 20203041   +1  5549     teMEM:          db      " "," ",30h,'A',71h,79h,'T'," " ; ПАМЯТЬ
230F 71795420                
2313 20203341   +1  5550     teWR:           db      " "," ",33h,'A',61h,74h,79h,77h," "," ";ЗАПИСЬ
2317 61747977                
231B 2020                    
231D 20206150   +1  5551     teLIST: db      " "," ",61h,'P',30h,79h,71h,30h,"T","P ";;ПРОСМОТР
2321 30797130                
2325 545020                  
2328 20206130   +1  5552     teFULL: db      " "," ",61h,30h,76h,"H",'A',62h," "," ";ПОЛНАЯ
232C 76484162                
2330 2020                    
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    89

2332 20744854   +1  5553     teINT:  db      " ",74h,"H",'T'," ",30h,30h,30h,30h,67h;ИНТ 0000
2336 20303030                
233A 3067                    
233C 20207376   +1  5554     teBL:           db      " "," ",73h,76h,30h,'K'," "," "," "," ";БЛОК
2340 304B2020                
2344 2020                    
2346 20207376   +1  5555     teBL0:  db      " "," ",73h,76h,30h,'K'," ",30h," "," ";БЛОК 0
234A 304B2030                
234E 2020                    
2350 30547934   +1  5556     teCH:           db      30h,'T',79h,34h,"E",'T'," ",30h,30h,30h;ОТСЧЕТ 000
2354 45542030                
2358 3030                    
235A 79544154   +1  5557     teSTAT:         db      79h,'T','A','T',74h,79h,'T',74h,'K','A';СТАТИСТИКА
235E 74795474                
2362 4B41                    
2364 71744820   +1  5558     teMIN:  db      71h,74h,"H"," "," "," "," "," "," "," ";МИН  00000
2368 20202020                
236C 2020                    
236E 71414B79   +1  5559     teMAX:  db      71h,'A','K',79h," "," "," "," "," "," ";МАКС 00000
2372 20202020                
2376 2020                    
2378 79504578   +1  5560     teMID:  db      79h,"P","E",78h," "," "," "," "," "," ";СРЕД 00000
237C 20202020                
2380 2020                    
                +1  5561      ;;;;;;;;;;;;;;;;;;;         
2382 2020304C   +1  5562     teOLI:  db              " "," ",30h,"L","L"," ","I"," "," "," "
2386 4C204920                
238A 2020                    
238C 2020304C   +1  5563     teOLR:  db              " "," ",30h,"L","L"," ",66h," "," "," "
2390 4C206620                
2394 2020                    
2396 20204552   +1  5564     teERR:  db              " "," ","E","R","R"," "," "," "," "," " ;ERR
239A 52202020                
239E 2020                    
23A0 2020454E   +1  5565     teEND:  db              " "," ","E","N","D"," "," "," "," "," " ;END
23A4 44202020                
23A8 2020                    
                +1  5566     
                +1  5567     ;dptr+4-приемник
                +1  5568     ;dptr-источник
                +1  5569     ;r7-кол байт  
23AA            +1  5570     xCIKLWR:
23AA 7F04       +1  5571                             mov             r7,#4   
23AC E0         +1  5572     lwrx:   movx    a,@dptr
23AD C083       +1  5573                             push    dph
23AF C082       +1  5574                             push    dpl
23B1 A3         +1  5575                             inc             dptr
23B2 A3         +1  5576                             inc             dptr
23B3 A3         +1  5577                             inc             dptr
23B4 A3         +1  5578                             inc             dptr
23B5 F0         +1  5579                             movx    @dptr,a
23B6 D082       +1  5580                             pop             dpl
23B8 D083       +1  5581                             pop             dph
                +1  5582                             
23BA A3         +1  5583                             inc             dptr
23BB DFEF       +1  5584                             djnz    r7,lwrx
23BD 22         +1  5585                             ret
                +1  5586     ;r2..r5->@dptr..@dptr+3                         
23BE EA         +1  5587     saveIr2:                mov     a,r2
23BF F0         +1  5588                                             movx    @dptr,a
23C0 A3         +1  5589                                             inc     dptr
23C1 EB         +1  5590                                             mov     a,r3
23C2 F0         +1  5591                                             movx    @dptr,a
23C3 A3         +1  5592                                             inc     dptr
23C4 EC         +1  5593                                             mov     a,r4
23C5 F0         +1  5594                                             movx    @dptr,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    90

23C6 A3         +1  5595                                             inc     dptr
23C7 ED         +1  5596                                             mov     a,r5
23C8 F0         +1  5597                                             movx    @dptr,a
23C9 22         +1  5598                                             ret
                +1  5599     ;r2..r5-> @r0..@r0+3
                +1  5600     
23CA EA         +1  5601     saver2:         mov     a,r2
23CB F6         +1  5602                                             mov     @r0,a
23CC 08         +1  5603                                             inc     r0
23CD EB         +1  5604                                             mov     a,r3
23CE F6         +1  5605                                             mov     @r0,a
23CF 08         +1  5606                                             inc     r0
23D0 EC         +1  5607                                             mov     a,r4
23D1 F6         +1  5608                                             mov     @r0,a
23D2 08         +1  5609                                             inc     r0
23D3 ED         +1  5610                                             mov     a,r5
23D4 F6         +1  5611                                             mov     @r0,a
23D5 22         +1  5612                                             ret 
23D6 7F50       +1  5613     clmassix:       mov                     r7,#50h;28h
23D8 900100     +1  5614                             mov     dptr,#MASS0        ;забить массив A нулями
23DB 7400       +1  5615     clmax:          mov          a,#00h
23DD F0         +1  5616                  movx    @dptr,a
23DE A3         +1  5617                  inc     dptr
23DF DFFA       +1  5618                 djnz                r7,clmax                
23E1 F56E       +1  5619                  mov     chmas,a
23E3 C201       +1  5620                  clr     bitmas
23E5 22         +1  5621                 ret
                +1  5622     ;r1-яЁшхьшъ
                +1  5623     ;r0-шёЄюўшъ
                +1  5624     ;r7-ъюы срщЄ  
23E6            +1  5625     CIKLWR:
23E6 7F04       +1  5626                             mov             r7,#4   
23E8 E6         +1  5627     lwr:    mov     a,@r0
23E9 F7         +1  5628                             mov     @r1,a
23EA 09         +1  5629                             inc             r1
23EB 08         +1  5630                             inc             r0
23EC DFFA       +1  5631                             djnz    r7,lwr
23EE 22         +1  5632                             ret     
                +1  5633     ;r2..r5-> @dptr..@dptr+3
                +1  5634     
23EF 120000   F +1  5635     zmul:   call    maform
23F2 120000   F +1  5636                     call    lmul
23F5 120000   F +1  5637                     call    bform
23F8 22         +1  5638                     ret
                +1  5639     
23F9 120000   F +1  5640     zdiv:   call    maform
23FC 120000   F +1  5641                     call    divide
23FF 120000   F +1  5642                     call    bform
2402 22         +1  5643                     ret
                +1  5644     
2403 EA         +1  5645     maform: mov a,r2
2404 33         +1  5646             rlc a
2405 5006       +1  5647             jnc             fo1m
2407 D202       +1  5648                     setb            znmat
2409 120000   F +1  5649                     call   form4
240C 22         +1  5650                     ret
240D C202       +1  5651     fo1m:   clr             znmat
240F 22         +1  5652                     ret
                +1  5653     
2410 300203     +1  5654     bform:  jnb             znmat,fo2m
2413 120000   F +1  5655                     call    form4
2416 22         +1  5656     fo2m:   ret
                +1  5657       
                +1  5658     ;r2..r5 яхЁхтхёЄш т фюя ъюф
2417 ED         +1  5659     form4:          mov a,r5
2418 F4         +1  5660             cpl a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    91

2419 2401       +1  5661             add a,#1
241B FD         +1  5662             mov r5,a
241C EC         +1  5663             mov a,r4
241D F4         +1  5664             cpl a
241E 3400       +1  5665             addc    a,#0
2420 FC         +1  5666             mov r4,a
2421 EB         +1  5667             mov a,r3
2422 F4         +1  5668                 cpl a
2423 3400       +1  5669             addc    a,#0
2425 FB         +1  5670             mov r3,a
2426 EA         +1  5671             mov a,r2
2427 F4         +1  5672             cpl a
2428 3400       +1  5673             addc    a,#0
242A FA         +1  5674             mov r2,a
242B 22         +1  5675             ret
                +1  5676     
242C 120000   F +1  5677     zcmp:   call            maform
242F 120000   F +1  5678                     call            lcmp
2432 C0D0       +1  5679                     push            psw
2434 120000   F +1  5680                     call    bform
2437 D0D0       +1  5681                     pop             psw
2439 22         +1  5682                     ret
                +1  5683     
                +1  5684     
                +1  5685     ;@r0..@r0+3->r8..r11
                +1  5686     
243A E6         +1  5687     resar8: mov     a,@r0
243B F508       +1  5688                     mov     ltemp,a
243D 08         +1  5689                     inc     r0
243E E6         +1  5690                     mov     a,@r0
243F F509       +1  5691                     mov     ltemp+1,a
2441 08         +1  5692                     inc     r0
2442 E6         +1  5693                     mov     a,@r0
2443 F50A       +1  5694                     mov     ltemp+2,a
2445 08         +1  5695                     inc     r0
2446 E6         +1  5696                     mov     a,@r0
2447 F50B       +1  5697                     mov     ltemp+3,a
2449 22         +1  5698                     ret
                +1  5699     
                +1  5700     ;
                +1  5701     ;r0- рфЁхё _ўхщъш єяръютрюую фтюшўюую ўшёыр  
                +1  5702     ;r2,a фтюшўюх ўшёыю 2 срщЄр 
                +1  5703     ;т_ї- @r0 єяръютрюх фхё_Єшўюх ўшёыю BCD 3 срщЄр 
                +1  5704     ;r2 a    ўшёыю 180
                +1  5705     ;00 b4
                +1  5706     ;т_ї- mabin..mabin+2
                +1  5707     ;     80 01 00
                +1  5708      
244A C8         +1  5709     cond:   xch     a,r0    
244B F9         +1  5710                     mov     r1,a
244C C8         +1  5711                     xch     a,r0
244D 7C03       +1  5712                     mov     r4,#03
244F 7700       +1  5713     dcoa:   mov     @r1,#00
2451 09         +1  5714                     inc     r1
2452 DCFB       +1  5715                     djnz    r4,dcoa
2454 7B10       +1  5716                     mov     r3,#10h
2456 C3         +1  5717     dcob:   clr     c
2457 33         +1  5718                     rlc     a
2458 CA         +1  5719                     xch     a,r2
2459 33         +1  5720                     rlc     a
245A CA         +1  5721                     xch     a,r2
245B C8         +1  5722                     xch     a,r0
245C F9         +1  5723                     mov     r1,a
245D C8         +1  5724                     xch     a,r0
245E 7C03       +1  5725                     mov     r4,#03
2460 FD         +1  5726                     mov     r5,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    92

2461 E7         +1  5727     dcoc:   mov     a,@r1 
2462 37         +1  5728                     addc    a,@r1
2463 D4         +1  5729                     da      a
2464 F7         +1  5730                     mov     @r1,a
2465 09         +1  5731                     inc     r1
2466 DCF9       +1  5732                     djnz    r4,dcoc
2468 ED         +1  5733                     mov     a,r5
2469 4003       +1  5734                     jc      dcod
246B DBE9       +1  5735                     djnz    r3,dcob
246D C3         +1  5736                     clr     c
246E 00         +1  5737     dcod:   nop
246F 22         +1  5738                     ret
                +1  5739     
2470 8A08       +1  5740     move28: mov     ltemp,r2                        ;r2..r5->ltemp
2472 850309     +1  5741                     mov     ltemp+1,3
2475 85040A     +1  5742                     mov     ltemp+2,4
2478 85050B     +1  5743                     mov     ltemp+3,5
247B 22         +1  5744                     ret
                +1  5745     
                +1  5746     ;@r0..@r0+3->r2..r5
                +1  5747     
247C E6         +1  5748     resar2: mov     a,@r0
247D FA         +1  5749                     mov     r2,a
247E 08         +1  5750                     inc     r0
247F E6         +1  5751                     mov     a,@r0
2480 FB         +1  5752                     mov     r3,a
2481 08         +1  5753                     inc     r0
2482 E6         +1  5754                     mov     a,@r0
2483 FC         +1  5755                     mov     r4,a
2484 08         +1  5756                     inc     r0
2485 E6         +1  5757                     mov     a,@r0
2486 FD         +1  5758                     mov     r5,a
2487 22         +1  5759                     ret
                +1  5760     
                +1  5761     ;25mkc !!!!!!!!!!!!!!!1
2488 7B4B       +1  5762     z_9:      mov R3,#4Bh      ;загрузка числа
248A DBFE       +1  5763                    djnz R3,$
248C 22         +1  5764               ret
                +1  5765     
                +1  5766     ;запись   передаваемый байт в acc
                +1  5767     ;передача байта послед кодом старшими разрядами  вперед
248D 7A08       +1  5768     write:     mov R2,#8
248F C3         +1  5769                             clr  c  
2490 C297       +1  5770     wr1:            clr             p1.7;P1.2
2492 00         +1  5771                         nop 
2493 33         +1  5772                             rlc A
2494 9296       +1  5773                             mov P1.6,C;P1.1,C
2496 120000   F +1  5774                        call tim2
2499 D297       +1  5775                        setb P1.7;P1.2
249B 120000   F +1  5776                call tim2
249E DAF0       +1  5777                       djnz R2,wr1
24A0 C296       +1  5778                       clr P1.6;P1.1
24A2 22         +1  5779                                              ret
                +1  5780     
                +1  5781     ;чтение номера байта с индикатора(2байта)
                +1  5782     ;bufind+8..bufind+9
                +1  5783     ;-  - - -
                +1  5784     ;- - - - - - - - - -
                +1  5785     ;adec..adec+9
                +1  5786     ;ст            мл
24A3 7847       +1  5787     upak1:  mov             r0,#bufind+7;
24A5 795C       +1  5788                                     mov             r1,#adec+9
24A7 C3         +1  5789                                     clr             c
24A8 E6         +1  5790                                     mov             a,@r0
24A9 9430       +1  5791                                     subb    a,#30h
24AB FF         +1  5792                                     mov             r7,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    93

24AC C3         +1  5793                                     clr             c
24AD 9405       +1  5794                                     subb    a,#5
24AF 4004       +1  5795                                     jc              upk1
24B1 7404       +1  5796                                     mov             a,#4
24B3 8001       +1  5797                                     jmp             upk2
24B5 EF         +1  5798     upk1:           mov             a,r7
24B6 F7         +1  5799     upk2:           mov             @r1,a
24B7 22         +1  5800                                     ret  
                +1  5801     ;r1-мл байт счетчика ячеек
24B8 C3         +1  5802     chminus:        clr                     c
24B9 E7         +1  5803                                             mov                     a,@r1
24BA 9401       +1  5804                                             subb            a,#01
24BC F7         +1  5805                                             mov                     @r1,a;low
24BD 19         +1  5806                                             dec                     r1
24BE E7         +1  5807                                             mov                     a,@r1
24BF 9400       +1  5808                                             subb            a,#00
24C1 F7         +1  5809                                             mov                     @r1,a
24C2 22         +1  5810                                             ret
                +1  5811     
                +1  5812     
                +1  5813     ;чтение номера байта с индикатора(4байта)
                +1  5814     ;bufind+6..bufind+9
                +1  5815     ;-  - - -
                +1  5816     ;- - - - - - - - - -
                +1  5817     ;adec..adec+9
                +1  5818     ;ст            мл
24C3 7848       +1  5819     upak4:  mov             r0,#bufind+8;
24C5 795C       +1  5820                     mov             r1,#adec+9
24C7 7F04       +1  5821                     mov             r7,#4
24C9 C3         +1  5822     upaa:   clr             c
24CA E6         +1  5823                     mov             a,@r0
24CB 9430       +1  5824                     subb    a,#30h
24CD F7         +1  5825                     mov             @r1,a
24CE 18         +1  5826                     dec             r0
24CF 19         +1  5827                     dec             r1
24D0 DFF7       +1  5828                     djnz    r7,upaa
24D2 22         +1  5829                     ret
                +1  5830     
                +1  5831     ;dptr-адр ячейки 1й соотв блока 
24D3 E538       +1  5832     adrblok:         mov            a,nblok
24D5 C3         +1  5833                              clr            c
24D6 9401       +1  5834                              subb           a,#1
24D8 FD         +1  5835                              mov            r5,a
24D9 E4         +1  5836                              clr            a
24DA FC         +1  5837                              mov            r4,a
24DB FB         +1  5838                              mov            r3,a
24DC FA         +1  5839                              mov            r2,a
24DD 900000   F +1  5840                                     mov                     dptr,#ch320h
24E0 120000   F +1  5841                                     CALL   ldc_ltemp                 ; ltemp <-320
24E3 120000   F +1  5842                                     call            lmul;r2..r5
24E6 ED         +1  5843                                     mov                     a,r5
24E7 2450       +1  5844                                     add                     a,#50h
24E9 F582       +1  5845                                     mov                     dpl,a
24EB EC         +1  5846                                     mov                     a,r4
24EC 3401       +1  5847                                     addc            a,#01           
24EE F583       +1  5848                                     mov                     dph,a                   ;dptr-
24F0 22         +1  5849                                     ret
                +1  5850     
                +1  5851     ;
                +1  5852     ;saven_bl<-dptr  адрес след ячейки внешн озу 
24F1 79D3       +1  5853     save_hl:                mov             r1,#saven_bl
24F3 E583       +1  5854                                                     mov             a,dph
24F5 F7         +1  5855                                               mov           @r1,a
24F6 09         +1  5856                                                     inc             r1
24F7 E582       +1  5857                                                     mov             a,dpl
24F9 F7         +1  5858                                                     mov             @r1,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    94

                +1  5859                                                     ;;;;;;;;;не конец ли блока
                +1  5860                             
                +1  5861     
24FA 79D6       +1  5862                                     mov                     r1,#volume+1;work+1
24FC 120000   F +1  5863                                     call            chminus
24FF 78D5       +1  5864                                     mov             r0,#volume
2501 E6         +1  5865                                     mov             a,@r0
2502 30E702     +1  5866                                     jnb             acc.7,noendli
2505 C20A       +1  5867                                     clr                     bitbon                  ;блок закон
                             чился
                +1  5868                             
2507            +1  5869     noendli:        
2507 22         +1  5870                                             ret
                +1  5871     ;загрузка dptr сохр ранее значением адреса ячейки
2508 79D3       +1  5872     resa_hl:                mov             r1,#saven_bl
250A E7         +1  5873                                                     mov             a,@r1
250B F583       +1  5874                                                     mov             dph,a
                +1  5875                                               
250D 09         +1  5876                                                     inc             r1
250E E7         +1  5877                                                     mov             a,@r1
250F F582       +1  5878                                                     mov             dpl,a
2511 22         +1  5879                                                     ret
                +1  5880     ;загрузка rez_A3 в соотв яч внешн озу
2512 789C       +1  5881     loA3_X:                 mov             r0,#rez_A3
2514 120000   F +1  5882                                                     call    resar2
                +1  5883                                                     
2517 EA         +1  5884                                                     mov             a,r2                    ;
2518 F0         +1  5885                                                     movx    @dptr,a
2519 A3         +1  5886                                                     inc             dptr
251A EB         +1  5887                                                     mov             a,r3
251B F0         +1  5888                                                     movx    @dptr,a
251C A3         +1  5889                                                     inc             dptr
251D EC         +1  5890                                                     mov             a,r4
251E F0         +1  5891                                                     movx    @dptr,a
251F A3         +1  5892                                                     inc             dptr
2520 ED         +1  5893                                                     mov             a,r5
2521 F0         +1  5894                                                     movx    @dptr,a
2522 A3         +1  5895                                                     inc             dptr;адрес след ячейки внеш
                             н озу храним
2523 22         +1  5896                                                     ret             ;в ячейке saven_bl
                +1  5897     ;чтение в rez_A3 из соотв яч внешн озу
2524            +1  5898     reA3_X:         
                +1  5899                                                     
2524 E0         +1  5900                                                     movx    a,@dptr
2525 FA         +1  5901                                                     mov             r2,a
2526 A3         +1  5902                                                     inc             dptr
2527 E0         +1  5903                                                     movx    a,@dptr
2528 FB         +1  5904                                                     mov             r3,a
2529 A3         +1  5905                                                     inc             dptr
252A E0         +1  5906                                                     movx    a,@dptr
252B FC         +1  5907                                                     mov             r4,a
252C A3         +1  5908                                                     inc             dptr
252D E0         +1  5909                                                     movx    a,@dptr
252E FD         +1  5910                                                     mov             r5,a
252F A3         +1  5911                                                     inc             dptr
2530 789C       +1  5912                                                     mov             r0,#rez_A3
2532 120000   F +1  5913                                                     call    saver2
2535 22         +1  5914                                                     ret
                    5915     
                    5916     ;$include (d:\amp\sarifm3.asm) 
                +1  5917     ; ” ©« SARIFM.ASM 8.11.95
                +1  5918     ;файл арифметики
                +1  5919       
  0008          +1  5920     ltemp    equ       8           ;long temporary
  000C          +1  5921     xtemp    equ       12          ;other temporaries
  000A          +1  5922     DECSIZE  EQU       10
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    95

  0004          +1  5923     NUMSIZE  EQU       4
  0004          +1  5924     RR4  EQU       4
  0005          +1  5925     RR5  EQU       5
                +1  5926     
                +1  5927                                                     
                +1  5928     
                +1  5929                 ; rseg     ARIF          ; Switch to this code segment.
                +1  5930     ;             using    0              ; Specify register bank for the following
                +1  5931                                            ; program code.
                +1  5932     ;                                               cseg AT 400h
                +1  5933     ; Arithmetics:  CLEARING string
                +1  5934     ; Input:
                +1  5935     ; R0 - pointer to string,
                +1  5936     ; NUMSIZE - byte count if CLRNUM used,
                +1  5937     ; DECSIZE - byte count if CLRDEC used,
                +1  5938     ; R2 - byte count if CLEAR used;
                +1  5939     ; Output:  none.
                +1  5940     
2536            +1  5941     CLRDEC:
2536 7A0A       +1  5942         MOV R2, #DECSIZE
2538 8002       +1  5943         SJMP    CLEAR
253A            +1  5944     CLRNUM:
253A 7A04       +1  5945         MOV R2, #NUMSIZE
                +1  5946         ;JMP    CLEAR
253C            +1  5947     CLEAR:
253C E4         +1  5948         CLR A
253D F6         +1  5949     CLR11:  MOV @R0, A
253E 08         +1  5950         INC R0
253F DAFC       +1  5951         DJNZ    R2, CLR11
2541 22         +1  5952         RET
                +1  5953     
                +1  5954     ;**********************************
                +1  5955     ;mov    r1,#abin+3
                +1  5956     ;mov    r0,#adec
                +1  5957     ; _ _ _ _
                +1  5958     ;     03ff
                +1  5959     ;ст     мл   - вход
                +1  5960     ; _ _ _ _ _ _ _ _ _ _
                +1  5961     ;             1 0 2 3
                +1  5962     ;ст                мл 
                +1  5963     ;**********************************
                +1  5964     
2542            +1  5965     BINDEC:
                +1  5966     ; Arithmetics:  CONVERTING from binary into decimal "4->10"
                +1  5967     ; Input:
                +1  5968     ; R0 - pointer to destination (high digit is the first),
                +1  5969     ; R1 - pointer to source,
                +1  5970     ; NUMSIZE - byte count in binary number;
                +1  5971     ; DECSIZE - byte count in decimal number;
                +1  5972     ; Output:  none.
                +1  5973     ; Source saved
                +1  5974     
                +1  5975         ; 1. Clear result
2542 7A05       +1  5976         MOV R2, #DECSIZE/2
2544 120000   F +1  5977         CALL   CLEAR  ; incrementing R0
                +1  5978     
                +1  5979         ; 2. Prepare convertion
2547 18         +1  5980         DEC R0
2548 8804       +1  5981         MOV RR4, R0 ; R4 - pointer to low byte of packed decimal result
254A 8905       +1  5982         MOV RR5, R1 ; R5 - pointer to low byte of binary number
254C 7B20       +1  5983         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  5984     
                +1  5985         ; 3. Convert cyrcle
254E            +1  5986     BIN30:
                +1  5987     
                +1  5988         ; 3.1. Rotate binary number one bit to left and prepare <Carry>
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    96

254E A905       +1  5989         MOV R1, RR5
2550 7A04       +1  5990         MOV R2, #NUMSIZE
2552 E7         +1  5991     BIN31:  MOV A, @R1
2553 33         +1  5992         RLC A
2554 F7         +1  5993         MOV @R1, A
2555 19         +1  5994         DEC R1
2556 DAFA       +1  5995         DJNZ    R2, BIN31
2558 A905       +1  5996         MOV R1, RR5
255A E7         +1  5997         MOV A, @R1
255B 92E0       +1  5998         MOV ACC.0, C
255D F7         +1  5999         MOV @R1, A
                +1  6000     
                +1  6001         ; 3.2. Doubling decimal result with <Carry>
255E A804       +1  6002         MOV R0, RR4
2560 7A05       +1  6003         MOV R2, #DECSIZE/2
2562 E6         +1  6004     BIN32:  MOV A, @R0
2563 36         +1  6005         ADDC    A, @R0
2564 D4         +1  6006         DA  A
2565 F6         +1  6007         MOV @R0, A
2566 18         +1  6008         DEC R0
2567 DAF9       +1  6009         DJNZ    R2, BIN32
                +1  6010     
                +1  6011         ; 3.3. End of convert cyrcle
2569 DBE3       +1  6012         DJNZ    R3, BIN30
                +1  6013     
                +1  6014         ; 4. Make bytes from half-bytes
256B E8         +1  6015         MOV A, R0
256C 240A       +1  6016         ADD A, #DECSIZE
256E F8         +1  6017         MOV R0, A   ; R0 - pointer to low byte of unpacked decimal result
256F A904       +1  6018         MOV R1, RR4 ; R1 - pointer to low byte of packed decimal result
2571 7A05       +1  6019         MOV R2, #DECSIZE/2
2573 E7         +1  6020     BIN41:  MOV A, @R1
2574 540F       +1  6021         ANL A, #00FH
2576 F6         +1  6022         MOV @R0, A
2577 18         +1  6023         DEC R0
2578 E7         +1  6024         MOV A, @R1
2579 C4         +1  6025         SWAP    A
257A 540F       +1  6026         ANL A, #00FH
257C F6         +1  6027         MOV @R0, A
257D 18         +1  6028         DEC R0
257E 19         +1  6029         DEC R1
257F DAF2       +1  6030         DJNZ    R2, BIN41
2581 22         +1  6031         RET
                +1  6032     
                +1  6033     
                +1  6034     ;*********************************
                +1  6035     ;mov    r0,#abin
                +1  6036     ;mov    r1,#adec
                +1  6037     ; _ _ _ _       -выход
                +1  6038     ; ff0000
                +1  6039     ;0004
                +1  6040     ;мл      ст
                +1  6041     
                +1  6042     ;ст                       мл
                +1  6043     ;_ _ _ _ _ _ _ _ _ _     вход
                +1  6044     ;                       2 5 5
                +1  6045     ;                   1 0 2 4
                +1  6046     
2582            +1  6047     DECBIN:
                +1  6048     ; Arithmetics:  CONVERTING from decimal into binary "10->4"
                +1  6049     ; Input:
                +1  6050     ; R0 - pointer to destination,
                +1  6051     ; R1 - pointer to source (high digit is the first),
                +1  6052     ; NUMSIZE - byte count in binary number;
                +1  6053     ; DECSIZE - byte count in decimal number;
                +1  6054     ; Output:  none
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    97

                +1  6055     ; Source cleared
                +1  6056     
                +1  6057         ; 1. Clear result
2582 120000   F +1  6058         CALL    CLRNUM    ; + increment R0 by NUMSIZE
                +1  6059     
                +1  6060         ; 2. Prepare convertion
2585 18         +1  6061         DEC R0
2586 8804       +1  6062         MOV RR4, R0 ; R4 - pointer to high byte of binary result
2588 8905       +1  6063         MOV RR5, R1 ; R5 - pointer to high byte of packed decimal number
258A 900000   F +1  6064         MOV DPTR, #DECT2
258D 7B20       +1  6065         MOV R3, #NUMSIZE*8  ; R3 - bit counter in binary number
                +1  6066     
                +1  6067         ; 3. Convert cyrcle
258F            +1  6068     DEC30:
                +1  6069     
                +1  6070         ; 3.1. Divide decimal number by 2 and prepare <Carry>
258F C3         +1  6071         CLR C
2590 A905       +1  6072         MOV R1, RR5
2592 7A0A       +1  6073         MOV R2, #DECSIZE
2594 E7         +1  6074     DEC31:  MOV A, @R1
2595 540F       +1  6075         ANL A, #00FH
2597 92E4       +1  6076         MOV ACC.4, C
2599 93         +1  6077         MOVC    A,@A+DPTR
259A F7         +1  6078         MOV @R1, A
259B A2E7       +1  6079         MOV C, ACC.7
259D 09         +1  6080         INC R1
259E DAF4       +1  6081         DJNZ    R2, DEC31
                +1  6082     
                +1  6083         ; 3.2. Rotate binary result one bit to right with <Carry>
25A0 A804       +1  6084         MOV R0, RR4
25A2 7A04       +1  6085         MOV R2, #NUMSIZE
25A4 E6         +1  6086     DEC32:  MOV A, @R0
25A5 13         +1  6087         RRC A
25A6 F6         +1  6088         MOV @R0, A
25A7 18         +1  6089         DEC R0
25A8 DAFA       +1  6090         DJNZ    R2, DEC32
                +1  6091     
                +1  6092         ; 3.3. End of convert cyrcle
25AA DBE3       +1  6093         DJNZ    R3, DEC30
25AC 22         +1  6094         RET
                +1  6095     
25AD 00800181   +1  6096     DECT2:  DB  00,80H,001,81H,02,82H,03,83H,04,84H
25B1 02820383                
25B5 0484                    
25B7 00000000   +1  6097         DB  00,00,00,00,00,00
25BB 0000                    
25BD 05850686   +1  6098         DB  05,85H,06,86H,07,87H,08H,88H,09H,89H
25C1 07870888                
25C5 0989                    
                +1  6099     
                +1  6100     ;   Long comparison
                +1  6101     ;   Lcmp - called with arg1 in r2-r5 and arg2 in ltemp - returns with
                +1  6102     ;   flags and acc set as though a long subtraction was done.
                +1  6103     ;*******************************
                +1  6104     ;сравнить r2..r5 с (ltemp..ltemp+3)
                +1  6105     ;c=1     r2..r5< ltemp..ltemp+3     a<b
                +1  6106     ;c=0       r2..r5> ltemp..ltemp+3   a>b
                +1  6107     ;*******************************
25C7            +1  6108     lcmp:
25C7 C3         +1  6109         clr c
25C8 EA         +1  6110         mov a,r2
25C9 9508       +1  6111         subb    a,8
25CB 700F       +1  6112         jnz done
25CD EB         +1  6113         mov a,r3
25CE 9509       +1  6114         subb    a,9
25D0 7008       +1  6115         jnz done1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    98

25D2 EC         +1  6116         mov a,r4
25D3 950A       +1  6117         subb    a,10
25D5 7003       +1  6118         jnz done1
25D7 ED         +1  6119         mov a,r5
25D8 950B       +1  6120         subb    a,11
25DA            +1  6121     done1:
25DA C2D2       +1  6122         clr ov      ;overflow is significant only for top byte
25DC            +1  6123     done:
25DC 22         +1  6124         ret
                +1  6125     
                +1  6126     ;   Load long into r2-5 from [dptr]
                +1  6127     
25DD            +1  6128     ldc_long:
25DD E583       +1  6129         mov a,dph       ;is it in on board memory
25DF 6010       +1  6130         jz  onboard     ;yes
25E1 E4         +1  6131         clr a
25E2 93         +1  6132         movc    a,@a+dptr
25E3 FA         +1  6133         mov r2,a
25E4 7401       +1  6134         mov a,#1
25E6 93         +1  6135         movc    a,@a+dptr
25E7 FB         +1  6136         mov r3,a
25E8 7402       +1  6137         mov a,#2
25EA 93         +1  6138         movc    a,@a+dptr
25EB FC         +1  6139         mov r4,a
25EC 7403       +1  6140         mov a,#3
25EE 93         +1  6141         movc    a,@a+dptr
25EF FD         +1  6142         mov r5,a
25F0 22         +1  6143         ret
25F1            +1  6144     onboard:
25F1 A882       +1  6145         mov r0,dpl
25F3 E6         +1  6146         mov a,@r0
25F4 FA         +1  6147         mov r2,a
25F5 08         +1  6148         inc r0
25F6 E6         +1  6149         mov a,@r0
25F7 FB         +1  6150         mov r3,a
25F8 08         +1  6151         inc r0
25F9 E6         +1  6152         mov a,@r0
25FA FC         +1  6153         mov r4,a
25FB 08         +1  6154         inc r0
25FC E6         +1  6155         mov a,@r0
25FD FD         +1  6156         mov r5,a
25FE 22         +1  6157         ret
                +1  6158     
                +1  6159     ;**************************************
                +1  6160     ;загрузить ltemp...+3 из памяти программ
                +1  6161     ;mov    dptr,#CH5
                +1  6162     ;call   ldc_ltemp        ltemp <--5
                +1  6163     ;**************************************
25FF            +1  6164     ldc_ltemp:
25FF E583       +1  6165         mov a,dph       ;is it in on board memory
2601 6014       +1  6166         jz  oboard      ;yes
2603 E4         +1  6167         clr a
2604 93         +1  6168         movc    a,@a+dptr
2605 F508       +1  6169         mov 8,a
2607 7401       +1  6170         mov a,#1
2609 93         +1  6171         movc    a,@a+dptr
260A F509       +1  6172         mov 9,a
260C 7402       +1  6173         mov a,#2
260E 93         +1  6174         movc    a,@a+dptr
260F F50A       +1  6175         mov 10,a
2611 7403       +1  6176         mov a,#3
2613 93         +1  6177         movc    a,@a+dptr
2614 F50B       +1  6178         mov 11,a
2616 22         +1  6179         ret
2617            +1  6180     oboard:
2617 A882       +1  6181         mov r0,dpl
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE    99

2619 8608       +1  6182         mov 8,@r0
261B 08         +1  6183         inc r0
261C 8609       +1  6184         mov 9,@r0
261E 08         +1  6185         inc r0
261F 860A       +1  6186         mov 10,@r0
2621 08         +1  6187         inc r0
2622 860B       +1  6188         mov 11,@r0
2624 22         +1  6189         ret
                +1  6190     
                +1  6191     ;*****************************
                +1  6192     ;mov    dptr,#k1
                +1  6193     ;call   ldx_long
                +1  6194     ;k1->r2..r5
                +1  6195     ;*****************************
                +1  6196     ;   Load long into r2-5 from [dptr]
                +1  6197     ;
                +1  6198     ; 01/30/90 JLZ      Updated from new library; added save/restore DPH, DPL
2625            +1  6199     ldx_long:
2625 E583       +1  6200         mov a,dph       ;is it in on board memory
2627 6014       +1  6201         jz  onboar1        ;yes
2629 C082       +1  6202         push    dpl
262B C083       +1  6203         push    dph
262D E0         +1  6204         movx    a,@dptr
262E FA         +1  6205         mov r2,a
262F A3         +1  6206         inc dptr
2630 E0         +1  6207         movx    a,@dptr
2631 FB         +1  6208         mov r3,a
2632 A3         +1  6209         inc dptr
2633 E0         +1  6210         movx    a,@dptr
2634 FC         +1  6211         mov r4,a
2635 A3         +1  6212         inc dptr
2636 E0         +1  6213         movx    a,@dptr
2637 FD         +1  6214         mov r5,a
2638 D083       +1  6215         pop dph
263A D082       +1  6216         pop dpl
263C 22         +1  6217         ret
263D            +1  6218     onboar1:
263D A882       +1  6219         mov r0,dpl
263F E6         +1  6220         mov a,@r0
2640 FA         +1  6221         mov r2,a
2641 08         +1  6222         inc r0
2642 E6         +1  6223         mov a,@r0
2643 FB         +1  6224         mov r3,a
2644 08         +1  6225         inc r0
2645 E6         +1  6226         mov a,@r0
2646 FC         +1  6227         mov r4,a
2647 08         +1  6228         inc r0
2648 E6         +1  6229         mov a,@r0
2649 FD         +1  6230         mov r5,a
264A 22         +1  6231         ret
                +1  6232     
                +1  6233     ;*********************************
                +1  6234     ;mov    dptr,#k2
                +1  6235     ;call   ldx_ltemp       ;k2->ltemp..ltemp+3
                +1  6236     ;**********************************
264B            +1  6237     ldx_ltemp:
264B E583       +1  6238         mov a,dph       ;is it in on board memory
264D 6010       +1  6239         jz  oboard1     ;yes
264F E0         +1  6240         movx    a,@dptr
2650 F508       +1  6241         mov 8,a
2652 A3         +1  6242         inc dptr
2653 E0         +1  6243         movx    a,@dptr
2654 F509       +1  6244         mov 9,a
2656 A3         +1  6245         inc dptr
2657 E0         +1  6246         movx    a,@dptr
2658 F50A       +1  6247         mov 10,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   100

265A A3         +1  6248         inc dptr
265B E0         +1  6249         movx    a,@dptr
265C F50B       +1  6250         mov 11,a
265E 22         +1  6251         ret
265F            +1  6252     oboard1:
265F A882       +1  6253         mov r0,dpl
2661 8608       +1  6254         mov 8,@r0
2663 08         +1  6255         inc r0
2664 8609       +1  6256         mov 9,@r0
2666 08         +1  6257         inc r0
2667 860A       +1  6258         mov 10,@r0
2669 08         +1  6259         inc r0
266A 860B       +1  6260         mov 11,@r0
266C 22         +1  6261         ret
                +1  6262     ;   Long division routines for 8051
                +1  6263     ;   Divide is called with the divisor in ltemp, the dividend in r5-r2
                +1  6264     ;   It returns with the quotient in r5-r2 and the remainder in ltemp
                +1  6265     ;   The top of bank 1 (locations 12-15) are used as a long temporary
                +1  6266     ;   and registers r0 and r1 in bank 0 are used as temporaries. R0 and
                +1  6267     ;   r1 must be saved by the caller.
                +1  6268     ;   This is long unsigned division.
                +1  6269     
                +1  6270     
                +1  6271     ;   Register usage:
                +1  6272     ;       r0 loop counter
                +1  6273     ;       xtemp (12-15) accumulates quotient
                +1  6274     ;       r5-r2 holds dividend
                +1  6275     ;       ltemp holds divisor
                +1  6276     
                +1  6277     ;************************************
                +1  6278     ;r2..r5-делимое
                +1  6279     ;ltemp..-делитель
                +1  6280     ;частное -r2..r5
                +1  6281     ;*************************************
266D            +1  6282     divide:
266D E4         +1  6283         clr a
266E F8         +1  6284         mov r0,a        ;initialize count
266F F50C       +1  6285         mov xtemp,a     ;zero quotient
2671 F50D       +1  6286         mov xtemp+1,a
2673 F50E       +1  6287         mov xtemp+2,a
2675 F50F       +1  6288         mov xtemp+3,a
2677 ED         +1  6289         mov a,r5        ;check for zero dividend
2678 4C         +1  6290         orl a,r4
2679 4B         +1  6291         orl a,r3
267A 4A         +1  6292         orl a,r2
267B 600B       +1  6293         jz  jfinis
267D E508       +1  6294         mov a,ltemp     ;check for zero divisor
267F 4509       +1  6295         orl a,ltemp+1
2681 450A       +1  6296         orl a,ltemp+2
2683 450B       +1  6297         orl a,ltemp+3
2685 7037       +1  6298         jnz midl
2687 22         +1  6299         ret
                +1  6300     
2688 020000   F +1  6301     jfinis: jmp finis
                +1  6302     
268B            +1  6303     loops:
268B EA         +1  6304         mov a,r2
268C C3         +1  6305         clr c
268D 9508       +1  6306         subb    a,ltemp+0   ;is divisor greater than dividend yet
268F 4033       +1  6307         jc  yes     ;yes, go no further
2691 7013       +1  6308         jnz no
2693 EB         +1  6309         mov a,r3
2694 9509       +1  6310         subb    a,ltemp+1
2696 402C       +1  6311         jc  yes
2698 700C       +1  6312         jnz no
269A EC         +1  6313         mov a,r4
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   101

269B 950A       +1  6314         subb    a,ltemp+2
269D 4025       +1  6315         jc  yes
269F 7005       +1  6316         jnz no
26A1 ED         +1  6317         mov a,r5
26A2 950B       +1  6318         subb    a,ltemp+3
26A4 401E       +1  6319         jc  yes
26A6            +1  6320     no:
26A6 E50B       +1  6321         mov a,ltemp+3   ;shift divisor up one bit
26A8 250B       +1  6322         add a,ltemp+3
26AA F50B       +1  6323         mov ltemp+3,a
26AC E50A       +1  6324         mov a,ltemp+2
26AE 350A       +1  6325         addc    a,ltemp+2
26B0 F50A       +1  6326         mov ltemp+2,a
26B2 E509       +1  6327         mov a,ltemp+1
26B4 3509       +1  6328         addc    a,ltemp+1
26B6 F509       +1  6329         mov ltemp+1,a
26B8 E508       +1  6330         mov a,ltemp+0
26BA 3508       +1  6331         addc    a,ltemp+0
26BC F508       +1  6332         mov ltemp+0,a
26BE            +1  6333     midl:
26BE 08         +1  6334         inc r0      ;increment count
26BF E508       +1  6335         mov a,ltemp+0   ;check for safe to shift some more
26C1 30E7C7     +1  6336         jnb acc.7,loops  ;loop if top bit clear
26C4            +1  6337     yes:
26C4 E508       +1  6338         mov a,ltemp+0
26C6 C3         +1  6339         clr c
26C7 9A         +1  6340         subb    a,r2        ;can we subtract now?
26C8 401A       +1  6341         jc  dosub       ;yes, go and do it
26CA 7015       +1  6342         jnz nosub
26CC E509       +1  6343         mov a,ltemp+1
26CE 9B         +1  6344         subb    a,r3
26CF 4013       +1  6345         jc  dosub
26D1 700E       +1  6346         jnz nosub
26D3 E50A       +1  6347         mov a,ltemp+2
26D5 9C         +1  6348         subb    a,r4
26D6 400C       +1  6349         jc  dosub
26D8 7007       +1  6350         jnz nosub
26DA E50B       +1  6351         mov a,ltemp+3
26DC 9D         +1  6352         subb    a,r5
26DD 4005       +1  6353         jc  dosub
26DF 6003       +1  6354         jz  dosub
26E1            +1  6355     nosub:
26E1 C3         +1  6356         clr c
26E2 8012       +1  6357         sjmp    dosh
26E4            +1  6358     dosub:
26E4 C3         +1  6359         clr c       ;subtract divisor from dividend
26E5 ED         +1  6360         mov a,r5
26E6 950B       +1  6361         subb    a,ltemp+3
26E8 FD         +1  6362         mov r5,a
26E9 EC         +1  6363         mov a,r4
26EA 950A       +1  6364         subb    a,ltemp+2
26EC FC         +1  6365         mov r4,a
26ED EB         +1  6366         mov a,r3
26EE 9509       +1  6367         subb    a,ltemp+1
26F0 FB         +1  6368         mov r3,a
26F1 EA         +1  6369         mov a,r2
26F2 9508       +1  6370         subb    a,ltemp+0
26F4 FA         +1  6371         mov r2,a
26F5 D3         +1  6372         setb    c       ;now set bit for quotient
26F6            +1  6373     dosh:
26F6 E50F       +1  6374         mov a,xtemp+3
26F8 33         +1  6375         rlc a
26F9 F50F       +1  6376         mov xtemp+3,a
26FB E50E       +1  6377         mov a,xtemp+2
26FD 33         +1  6378         rlc a
26FE F50E       +1  6379         mov xtemp+2,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   102

2700 E50D       +1  6380         mov a,xtemp+1
2702 33         +1  6381         rlc a
2703 F50D       +1  6382         mov xtemp+1,a
2705 E50C       +1  6383         mov a,xtemp+0
2707 33         +1  6384         rlc a
2708 F50C       +1  6385         mov xtemp+0,a
270A E508       +1  6386         mov a,ltemp+0       ;shift divisor down
270C C3         +1  6387         clr c
270D 13         +1  6388         rrc a
270E F508       +1  6389         mov ltemp+0,a
2710 E509       +1  6390         mov a,ltemp+1
2712 13         +1  6391         rrc a
2713 F509       +1  6392         mov ltemp+1,a
2715 E50A       +1  6393         mov a,ltemp+2
2717 13         +1  6394         rrc a
2718 F50A       +1  6395         mov ltemp+2,a
271A E50B       +1  6396         mov a,ltemp+3
271C 13         +1  6397         rrc a
271D F50B       +1  6398         mov ltemp+3,a
                +1  6399     
271F D8A3       +1  6400         djnz    r0,yes      ;and continue with the rest
                +1  6401     
2721            +1  6402     finis:
2721 8D0B       +1  6403         mov ltemp+3,r5
2723 8C0A       +1  6404         mov ltemp+2,r4
2725 8B09       +1  6405         mov ltemp+1,r3
2727 8A08       +1  6406         mov ltemp+0,r2
2729 AD0F       +1  6407         mov r5,xtemp+3
272B AC0E       +1  6408         mov r4,xtemp+2
272D AB0D       +1  6409         mov r3,xtemp+1
272F AA0C       +1  6410         mov r2,xtemp+0
2731 22         +1  6411         ret         ;and return with the satisfaction of a job well done
                +1  6412     
                +1  6413     
                +1  6414     ;   Long multiplication
                +1  6415     ;   The main multiply thingo. Called with one operand in r5-r2 and the
                +1  6416     ;   other in ltemp. It really doesn't matter which one is where.
                +1  6417     
                +1  6418     ;**********************************
                +1  6419     ;(r2..r5)*(ltemp..ltemp+3)=r2..r5
                +1  6420     ;ст  мл
                +1  6421     ;**********************************
2732            +1  6422     llmul:
2732            +1  6423     almul:
2732            +1  6424     lmul:
2732 ED         +1  6425         mov a,r5        ;low order byte
2733 850BF0     +1  6426         mov b,ltemp+3       ;times low order byte
2736 A4         +1  6427         mul ab
2737 F50F       +1  6428         mov xtemp+3,a       ;store low
2739 85F00E     +1  6429         mov xtemp+2,b   ;and high
273C ED         +1  6430         mov a,r5        ;low order
273D 850AF0     +1  6431         mov b,ltemp+2   ;times next
2740 A4         +1  6432         mul ab
2741 250E       +1  6433         add a,xtemp+2   ;add in
2743 F50E       +1  6434         mov xtemp+2,a
2745 E5F0       +1  6435         mov a,b
2747 3400       +1  6436         addc    a,#0
2749 F50D       +1  6437         mov xtemp+1,a
274B ED         +1  6438         mov a,r5
274C 8509F0     +1  6439         mov b,ltemp+1
274F A4         +1  6440         mul ab
2750 250D       +1  6441         add a,xtemp+1
2752 F50D       +1  6442         mov xtemp+1,a
2754 E5F0       +1  6443         mov a,b
2756 3400       +1  6444         addc    a,#0
2758 F50C       +1  6445         mov xtemp+0,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   103

275A ED         +1  6446         mov a,r5
275B 8508F0     +1  6447         mov b,ltemp+0
275E A4         +1  6448         mul ab
275F 250C       +1  6449         add a,xtemp+0
2761 F50C       +1  6450         mov xtemp+0,a
2763 EC         +1  6451         mov a,r4
2764 850BF0     +1  6452         mov b,ltemp+3
2767 A4         +1  6453         mul ab
2768 250E       +1  6454         add a,xtemp+2
276A F50E       +1  6455         mov xtemp+2,a
276C E5F0       +1  6456         mov a,b
276E 350D       +1  6457         addc    a,xtemp+1
2770 F50D       +1  6458         mov xtemp+1,a
2772 E50C       +1  6459         mov a,xtemp+0
2774 3400       +1  6460         addc    a,#0
2776 F50C       +1  6461         mov xtemp+0,a
2778 EC         +1  6462         mov a,r4
2779 850AF0     +1  6463         mov b,ltemp+2
277C A4         +1  6464         mul ab
277D 250D       +1  6465         add a,xtemp+1
277F F50D       +1  6466         mov xtemp+1,a
2781 E5F0       +1  6467         mov a,b
2783 350C       +1  6468         addc    a,xtemp+0
2785 F50C       +1  6469         mov xtemp+0,a
2787 EC         +1  6470         mov a,r4
2788 8509F0     +1  6471         mov b,ltemp+1
278B A4         +1  6472         mul ab
278C 250C       +1  6473         add a,xtemp+0
278E F50C       +1  6474         mov xtemp+0,a
                +1  6475     
2790 EB         +1  6476         mov a,r3
2791 850BF0     +1  6477         mov b,ltemp+3
2794 A4         +1  6478         mul ab
2795 250D       +1  6479         add a,xtemp+1
2797 F50D       +1  6480         mov xtemp+1,a
2799 E5F0       +1  6481         mov a,b
279B 350C       +1  6482         addc    a,xtemp+0
279D F50C       +1  6483         mov xtemp+0,a
279F EB         +1  6484         mov a,r3
27A0 850AF0     +1  6485         mov b,ltemp+2
27A3 A4         +1  6486         mul ab
27A4 250C       +1  6487         add a,xtemp+0
27A6 F50C       +1  6488         mov xtemp+0,a
                +1  6489     
27A8 EA         +1  6490         mov a,r2
27A9 850BF0     +1  6491         mov b,ltemp+3
27AC A4         +1  6492         mul ab
27AD 250C       +1  6493         add a,xtemp+0
27AF FA         +1  6494         mov r2,a
27B0 AB0D       +1  6495         mov r3,xtemp+1
27B2 AC0E       +1  6496         mov r4,xtemp+2
27B4 AD0F       +1  6497         mov r5,xtemp+3
                +1  6498     
27B6 22         +1  6499         ret         ;all done
                +1  6500     ;******************************
                +1  6501     ;из содержимого  r2-r5  вычесть
                +1  6502     ;содержимое          ltemp..ltemp+3
                +1  6503     ;******************************
27B7            +1  6504     llsub:
27B7            +1  6505      lsub:
27B7 ED         +1  6506         mov a,r5
27B8 C3         +1  6507         clr c
27B9 950B       +1  6508         subb    a,11
27BB FD         +1  6509         mov r5,a
27BC EC         +1  6510         mov a,r4
27BD 950A       +1  6511         subb    a,10
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   104

27BF FC         +1  6512         mov r4,a
27C0 EB         +1  6513         mov a,r3
27C1 9509       +1  6514         subb    a,9
27C3 FB         +1  6515         mov r3,a
27C4 EA         +1  6516         mov a,r2
27C5 9508       +1  6517         subb    a,8
27C7 FA         +1  6518         mov r2,a
27C8 22         +1  6519         ret
                +1  6520     
                +1  6521     ;***********************************************
                +1  6522     ;                                                      ст мл
                +1  6523     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6524     ;  r0- адрес младшего байта !!!
                +1  6525     ;результат- r2..r5
                +1  6526     ;***********************************************
                +1  6527     
27C9 C3         +1  6528     ladd:    clr       c
27CA ED         +1  6529          mov       a,r5
27CB 26         +1  6530          add       a,@r0
27CC FD         +1  6531          mov       r5,a
27CD 18         +1  6532          dec       r0
27CE EC         +1  6533          mov       a,r4
27CF 36         +1  6534          addc      a,@r0
27D0 FC         +1  6535          mov       r4,a
27D1 18         +1  6536          dec       r0
27D2 EB         +1  6537          mov       a,r3
27D3 36         +1  6538          addc      a,@r0
27D4 FB         +1  6539          mov       r3,a
27D5 18         +1  6540          dec       r0
27D6 EA         +1  6541          mov       a,r2
27D7 36         +1  6542          addc      a,@r0
27D8 FA         +1  6543          mov       r2,a
27D9 22         +1  6544          ret
                +1  6545     ;***********************************************
                +1  6546     ;                                                      ст мл
                +1  6547     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6548     ;  r0- адрес младшего байта !!!
                +1  6549     ;результат- r2..r5
                +1  6550     ;***********************************************
                +1  6551     
27DA C3         +1  6552     laddx:    clr       c
27DB E2         +1  6553                                             movx            a,@r0
27DC 2D         +1  6554                                             add                     a,r5
27DD FD         +1  6555               mov     r5,a
27DE 18         +1  6556                             dec     r0
27DF E2         +1  6557                             movx    a,@r0
27E0 3C         +1  6558                             addc    a,r4
27E1 FC         +1  6559                             mov     r4,a
27E2 18         +1  6560                             dec     r0
27E3 E2         +1  6561                             movx    a,@r0
27E4 3B         +1  6562                             addc    a,r3
27E5 FB         +1  6563                             mov     r3,a
27E6 18         +1  6564                             dec     r0
27E7 E2         +1  6565                             movx    a,@r0
27E8 3A         +1  6566                             addc    a,r2
27E9 FA         +1  6567                             mov       r2,a
27EA 22         +1  6568                             ret
                +1  6569     
                +1  6570     ;***********************************************
                +1  6571     ;                                                      ст мл
                +1  6572     ; cложение содержимого  r2..r5 с числом по адресу
                +1  6573     ;  dptr- адрес младшего байта !!!
                +1  6574     ;результат- r2..r5
                +1  6575     ;***********************************************
                +1  6576     
27EB C3         +1  6577     addx:    clr       c
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   105

27EC E0         +1  6578                                             movx            a,@dptr
27ED 2D         +1  6579                                             add                     a,r5
27EE FD         +1  6580               mov     r5,a
27EF 120000   F +1  6581                             call            dedptr;dec     dptr
27F2 E0         +1  6582                             movx    a,@dptr
27F3 3C         +1  6583                             addc    a,r4
27F4 FC         +1  6584                             mov     r4,a
27F5 120000   F +1  6585                             call            dedptr;dec     dptr
27F8 E0         +1  6586                             movx    a,@dptr
27F9 3B         +1  6587                             addc    a,r3
27FA FB         +1  6588                             mov     r3,a
27FB 120000   F +1  6589                             call            dedptr;dec     dptr
27FE E0         +1  6590                             movx    a,@dptr
27FF 3A         +1  6591                             addc    a,r2
2800 FA         +1  6592                             mov       r2,a
2801 22         +1  6593                             ret
                +1  6594     
2802 C0D0       +1  6595     dedptr:         push    psw
2804 C3         +1  6596                                             clr             c
2805 E582       +1  6597                                             mov             a,dpl
2807 9401       +1  6598                                             subb    a,#1
2809 F582       +1  6599                                             mov             dpl,a
280B E583       +1  6600                                             mov             a,dph
280D 9400       +1  6601                                             subb    a,#0
280F F583       +1  6602                                             mov             dph,a
2811 D0D0       +1  6603                                             pop             psw
2813 22         +1  6604                                             ret
                    6605     
                    6606     ;$include (d:\amp\floatm.asm)
                +1  6607     ;       Copyright (C) 1988 HI-TECH Software
                +1  6608     
                +1  6609     ;       Single Precision Floating point arithmetic routines for 8051
                +1  6610     
                +1  6611     ;       The format of floating point numbers is as follows:
                +1  6612     
                +1  6613     ;       -----------------
                +1  6614     ;       *     sign      *  1 bit
                +1  6615     ;       -----------------
                +1  6616     ;       *   exponent    *  8 bits
                +1  6617     ;       -----------------
                +1  6618     ;       *   mantissa    *  23 bits + 1 implied bit = 24 bits
                +1  6619     ;       -----------------
                +1  6620     
                +1  6621     
                +1  6622     ;       As usual for the 8051 the memory layout has the most significant
                +1  6623     ;       byte (i.e. that containing the sign) coming first, i.e. at the
                +1  6624     ;       lowest address.
                +1  6625     
                +1  6626     ;       Calling conventions:
                +1  6627     
                +1  6628     ;       Left operand in r2-r5, right operand in ltemp (r0'-r3')
                +1  6629     ;
                +1  6630     ;       Return value is in r2-r5
                +1  6631     
                +1  6632     ;       Naming conventions: A routine name is constructed by
                +1  6633     
                +1  6634     ;             ASOP
                +1  6635     
                +1  6636     ;       Where A is the arithmetic type (f for float), and op is the operation,
                +1  6637     ;       one of mul, div, mod, add, sub and cmp. S is the size, always l.
                +1  6638     ;       Conversion routines are named
                +1  6639     
                +1  6640     ;               AStof
                +1  6641     
                +1  6642     ;       where A is the arithmetic type (a for integer, l for unsigned)
                +1  6643     ;       S is the integer size, one of b (byte), w (word) or l (long).
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   106

                +1  6644     ;       Conversion from float to integer is ftol.
                +1  6645     
                +1  6646     ;               .ORG  5000h
                +1  6647     ;               .CODE
                +1  6648     ;       seg     c_text
                +1  6649     
                +1  6650     ;;      $MOD812
----            +1  6651             CSEG
                +1  6652             ;ORG 1000h
                +1  6653     
                +1  6654                     ;;;PUBLIC       flmul,fldiv,fladd,flsub,flcmp
                +1  6655             ;;;PUBLIC       ftol,altof,lltof,awtof,lwtof,abtof,lbtof
                +1  6656     
                +1  6657     ;       EXTERNAL DELAY,KKOFU0,AKNCH,XNULLU
                +1  6658     ;       macros
                +1  6659     
                +1  6660     saveregs        macro
                +1  6661             push    7
                +1  6662             push    6
                +1  6663             push    1
                +1  6664             push    0
                +1  6665             endm
                +1  6666     
                +1  6667     restregs        macro
                +1  6668             pop     0
                +1  6669             pop     1
                +1  6670             pop     6
                +1  6671             pop     7
                +1  6672             endm
                +1  6673     
                +1  6674     ;addr   
                +1  6675     dan     macro   pad
                +1  6676             mov     a,r5
                +1  6677             add     a,pad+3
                +1  6678             mov     pad+3,a
                +1  6679             mov     a,pad+2
                +1  6680             addc    a,r4
                +1  6681             mov     pad+2,a
                +1  6682             mov     a,pad+1
                +1  6683             addc    a,r3
                +1  6684             mov     pad+1,a
                +1  6685             mov     a,pad+0
                +1  6686             addc    a,r2
                +1  6687             mov     pad,a
                +1  6688             endm
                +1  6689     
                +1  6690     addl    macro  addr
                +1  6691             mov     a,r5
                +1  6692             add     a,addr+3
                +1  6693             mov     r5,a
                +1  6694             mov     a,addr+2
                +1  6695             addc    a,r4
                +1  6696             mov     r4,a
                +1  6697             mov     a,addr+1
                +1  6698             addc    a,r3
                +1  6699             mov     r3,a
                +1  6700             mov     a,addr+0
                +1  6701             addc    a,r2
                +1  6702             mov     r2,a
                +1  6703             endm
                +1  6704     
                +1  6705     
                +1  6706     add1    macro
                +1  6707             mov     a,r5
                +1  6708             add     a,#1
                +1  6709             mov     r5,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   107

                +1  6710             clr     a
                +1  6711             addc    a,r4
                +1  6712             mov     r4,a
                +1  6713             clr     a
                +1  6714             addc    a,r3
                +1  6715             mov     r3,a
                +1  6716             clr     a
                +1  6717             addc    a,r2
                +1  6718             mov     r2,a
                +1  6719             endm
                +1  6720     
                +1  6721     shfdn   macro  addr
                +1  6722             clr     c
                +1  6723             mov     a,addr
                +1  6724             rrc     a
                +1  6725             mov     addr,a
                +1  6726             mov     a,addr+1
                +1  6727             rrc     a
                +1  6728             mov     addr+1,a
                +1  6729             mov     a,addr+2
                +1  6730             rrc     a
                +1  6731             mov     addr+2,a
                +1  6732             mov     a,addr+3
                +1  6733             rrc     a
                +1  6734             mov     addr+3,a
                +1  6735             endm
                +1  6736     
                +1  6737     shfup   macro  addr
                +1  6738             clr     c
                +1  6739             mov     a,addr+3
                +1  6740             rlc     a
                +1  6741             mov     addr+3,a
                +1  6742             mov     a,addr+2
                +1  6743             rlc     a
                +1  6744             mov     addr+2,a
                +1  6745             mov     a,addr+1
                +1  6746             rlc     a
                +1  6747             mov     addr+1,a
                +1  6748             mov     a,addr
                +1  6749             rlc     a
                +1  6750             mov     addr,a
                +1  6751             endm
                +1  6752     
                +1  6753     rshift  macro
                +1  6754             clr     c
                +1  6755             mov     a,r2
                +1  6756             rrc     a
                +1  6757             mov     r2,a
                +1  6758             mov     a,r3
                +1  6759             rrc     a
                +1  6760             mov     r3,a
                +1  6761             mov     a,r4
                +1  6762             rrc     a
                +1  6763             mov     r4,a
                +1  6764             mov     a,r5
                +1  6765             rrc     a
                +1  6766             mov     r5,a
                +1  6767             endm
                +1  6768     rshift1 macro
                +1  6769             setb    c
                +1  6770             mov     a,r2
                +1  6771             rrc     a
                +1  6772             mov     r2,a
                +1  6773             mov     a,r3
                +1  6774             rrc     a
                +1  6775             mov     r3,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   108

                +1  6776             mov     a,r4
                +1  6777             rrc     a
                +1  6778             mov     r4,a
                +1  6779             mov     a,r5
                +1  6780             rrc     a
                +1  6781             mov     r5,a
                +1  6782             endm
                +1  6783     
                +1  6784     
                +1  6785     lshift  macro
                +1  6786             mov     a,r5
                +1  6787             rlc     a
                +1  6788             mov     r5,a
                +1  6789             mov     a,r4
                +1  6790             rlc     a
                +1  6791             mov     r4,a
                +1  6792             mov     a,r3
                +1  6793             rlc     a
                +1  6794             mov     r3,a
                +1  6795             mov     a,r2
                +1  6796             rlc     a
                +1  6797             mov     r2,a
                +1  6798             endm
                +1  6799     
                +1  6800     neg1    macro
                +1  6801             clr     c
                +1  6802             clr     a
                +1  6803             subb    a,r5
                +1  6804             mov     r5,a
                +1  6805             clr     a
                +1  6806             subb    a,r4
                +1  6807             mov     r4,a
                +1  6808             clr     a
                +1  6809             subb    a,r3
                +1  6810             mov     r3,a
                +1  6811             clr     a
                +1  6812             subb    a,r2
                +1  6813             mov     r2,a
                +1  6814             endm
                +1  6815     
                +1  6816     negm    macro  addr
                +1  6817             clr     c
                +1  6818             clr     a
                +1  6819             subb    a,addr+3
                +1  6820             mov     addr+3,a
                +1  6821             clr     a
                +1  6822             subb    a,addr+2
                +1  6823             mov     addr+2,a
                +1  6824             clr     a
                +1  6825             subb    a,addr+1
                +1  6826             mov     addr+1,a
                +1  6827             clr     a
                +1  6828             subb    a,addr
                +1  6829             mov     addr,a
                +1  6830             endm
                +1  6831     
                +1  6832     copytor macro  addr
                +1  6833             mov     r2,addr
                +1  6834             mov     r3,addr+1
                +1  6835             mov     r4,addr+2
                +1  6836             mov     r5,addr+3
                +1  6837             endm
                +1  6838     
                +1  6839     
                +1  6840     copyrto macro  addr
                +1  6841             mov     addr,r2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   109

                +1  6842             mov     addr+1,r3
                +1  6843             mov     addr+2,r4
                +1  6844             mov     addr+3,r5
                +1  6845             endm
                +1  6846     
                +1  6847     
                +1  6848     ;       Internal representation: in this set of routines a floating number
                +1  6849     ;       is unpacked into seperate mantissa, exponent and sign parts.
                +1  6850     
                +1  6851     ;       Stack offset values
                +1  6852     ;ltemp   equ     28h
                +1  6853     
  0006          +1  6854     cntr    equ     6               ;r6 is the counter
  0007          +1  6855     sign    equ     7               ;signs in r7 - left sign in bit 7, right in 6
  0000          +1  6856     exp1    equ     0               ;exponent 1 in r0
  0002          +1  6857     mant1   equ     2               ;mantissa 1 in r2-5
  0001          +1  6858     exp2    equ     1               ;exponent 1 in r1
  0008          +1  6859     mant2   equ     ltemp           ;mantissa 2 in ltemp
  000C          +1  6860     prod    equ     ltemp+4         ;product/quotient in ltemp+4 (r4'-r7')
                +1  6861     
                +1  6862     
                +1  6863     
                +1  6864     
                +1  6865     
                +1  6866     ;DECSIZE EQU     10
                +1  6867     ;NUMSIZE EQU     4
                +1  6868     ;RR4     EQU     4
                +1  6869     ;RR5     EQU     5
                +1  6870     
                +1  6871     ;       unpack1 - unpacks the left operand
                +1  6872     
009E            +1  6873     unpack1:
009E EA         +1  6874             mov     a,r2            ;get sign
009F 5480       +1  6875             anl     a,#80h
00A1 530740     +1  6876             anl     sign,#40h       ;clear other bits
00A4 4207       +1  6877             orl     sign,a          ;store sign
00A6 EB         +1  6878             mov     a,r3            ;get lsb of exponent
00A7 33         +1  6879             rlc     a               ;rotate into carry
00A8 EA         +1  6880             mov     a,r2            ;get rest of exponent
00A9 33         +1  6881             rlc     a               ;and make it 8 bits
00AA F8         +1  6882             mov     r0,a            ;store it
00AB 6006       +1  6883             jz      zer1            ;if zero, the whole thing is zero
00AD 430380     +1  6884             orl     mant1+1,#80h    ;set hidden bit
00B0 7A00       +1  6885             mov     r2,#0           ;clear upper byte of mantissa
00B2 22         +1  6886             ret
00B3            +1  6887     zer1:
00B3 E4         +1  6888             clr     a
00B4 FA         +1  6889             mov     r2,a
00B5 FB         +1  6890             mov     r3,a
00B6 FC         +1  6891             mov     r4,a
00B7 FD         +1  6892             mov     r5,a            ;zero mantissa
00B8 F8         +1  6893             mov     r0,a            ;zero exponent
00B9 22         +1  6894             ret
                +1  6895     
                +1  6896     ;       unpack2 - unpacks right operand
                +1  6897     
00BA            +1  6898     unpack2:
00BA E508       +1  6899             mov     a,ltemp         ;get sign
00BC 13         +1  6900             rrc     a               ;shift down
00BD 5440       +1  6901             anl     a,#40h          ;mask out sign
00BF 530780     +1  6902             anl     sign,#80h       ;clear old bit
00C2 4207       +1  6903             orl     sign,a
00C4 E509       +1  6904             mov     a,ltemp+1       ;get lsb of exponent
00C6 33         +1  6905             rlc     a               ;rotate into carry
00C7 E508       +1  6906             mov     a,ltemp         ;get rest of exponent
00C9 33         +1  6907             rlc     a               ;and make it 8 bits
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   110

00CA F9         +1  6908             mov     r1,a            ;store it
00CB 6007       +1  6909             jz      zer2            ;if zero, the whole thing is zero
00CD 430980     +1  6910             orl     mant2+1,#80h    ;set hidden bit
00D0 750800     +1  6911             mov     mant2,#0        ;clear upper byte
00D3 22         +1  6912             ret
00D4            +1  6913     zer2:
00D4 E4         +1  6914             clr     a
00D5 F508       +1  6915             mov     ltemp,a
00D7 F509       +1  6916             mov     ltemp+1,a
00D9 F50A       +1  6917             mov     ltemp+2,a
00DB F50B       +1  6918             mov     ltemp+3,a               ;zero mantissa
00DD 22         +1  6919             ret
                +1  6920     
                +1  6921     ;       pack1 - put operand 1 back into float format
                +1  6922     
00DE            +1  6923     pack1:
00DE E8         +1  6924             mov     a,r0            ;get exponent
00DF C3         +1  6925             clr     c
00E0 13         +1  6926             rrc     a               ;shift down 1 bit
00E1 530780     +1  6927             anl     sign,#80h       ;mask sign bit
00E4 4F         +1  6928             orl     a,r7            ;or in sign bit
00E5 FA         +1  6929             mov     r2,a            ;store
00E6 E8         +1  6930             mov     a,r0            ;get other bit
00E7 03         +1  6931             rr      a               ;rotate into hi bit
00E8 5480       +1  6932             anl     a,#80h          ;mask
00EA 53037F     +1  6933             anl     mant1+1,#7Fh    ;clear hidden bit
00ED 4203       +1  6934             orl     mant1+1,a       ;put in
00EF 22         +1  6935             ret
                +1  6936     
                +1  6937     
                +1  6938     ;       norm1 - normalize the unpacked value in 1
                +1  6939     
00F0            +1  6940     norm1:
00F0 E8         +1  6941             mov     a,r0            ;get exponent
00F1 60C0       +1  6942             jz      zer1            ;zero the mantissa if so
00F3 EA         +1  6943             mov     a,r2            ;get hi byte
00F4 6023       +1  6944             jz      norup           ;zero, so shift up if anything
00F6            +1  6945     nordn:
00F6 EA         +1  6946             mov     a,r2            ;get hi byte
00F7 B4010D     +1  6947             cjne    a,#1,nordn1     ;if not about to do last shift, skip
                +1  6948+3           add1                    ;add in a rounding bit
00FA ED         +1  6949+1           mov     a,r5
00FB 2401       +1  6950+1           add     a,#1
00FD FD         +1  6951+1           mov     r5,a
00FE E4         +1  6952+1           clr     a
00FF 3C         +1  6953+1           addc    a,r4
0100 FC         +1  6954+1           mov     r4,a
0101 E4         +1  6955+1           clr     a
0102 3B         +1  6956+1           addc    a,r3
0103 FB         +1  6957+1           mov     r3,a
0104 E4         +1  6958+1           clr     a
0105 3A         +1  6959+1           addc    a,r2
0106 FA         +1  6960+1           mov     r2,a
0107            +1  6961     nordn1:
                +1  6962+3           rshift                  ;shift down 1 bit
0107 C3         +1  6963+1           clr     c
0108 EA         +1  6964+1           mov     a,r2
0109 13         +1  6965+1           rrc     a
010A FA         +1  6966+1           mov     r2,a
010B EB         +1  6967+1           mov     a,r3
010C 13         +1  6968+1           rrc     a
010D FB         +1  6969+1           mov     r3,a
010E EC         +1  6970+1           mov     a,r4
010F 13         +1  6971+1           rrc     a
0110 FC         +1  6972+1           mov     r4,a
0111 ED         +1  6973+1           mov     a,r5
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   111

0112 13         +1  6974+1           rrc     a
0113 FD         +1  6975+1           mov     r5,a
0114 08         +1  6976             inc     r0              ;adjust exponent
0115 EA         +1  6977             mov     a,r2            ;test high byte
0116 70DE       +1  6978             jnz     nordn           ;loop
0118 22         +1  6979             ret                     ;done
                +1  6980     
0119            +1  6981     norup:
0119 4B         +1  6982             orl     a,r3
011A 4C         +1  6983             orl     a,r4
011B 4D         +1  6984             orl     a,r5            ;test for zero mantissa
011C 6095       +1  6985             jz      zer1            ;it is - make it true zero
011E            +1  6986     norup1:
011E EB         +1  6987             mov     a,r3            ;get mantissa byte
011F 20E710     +1  6988             jb      acc.7,norup2    ;jump if set
0122 C3         +1  6989             clr     c
                +1  6990+3           lshift                  ;shift mantissa up
0123 ED         +1  6991+1           mov     a,r5
0124 33         +1  6992+1           rlc     a
0125 FD         +1  6993+1           mov     r5,a
0126 EC         +1  6994+1           mov     a,r4
0127 33         +1  6995+1           rlc     a
0128 FC         +1  6996+1           mov     r4,a
0129 EB         +1  6997+1           mov     a,r3
012A 33         +1  6998+1           rlc     a
012B FB         +1  6999+1           mov     r3,a
012C EA         +1  7000+1           mov     a,r2
012D 33         +1  7001+1           rlc     a
012E FA         +1  7002+1           mov     r2,a
012F 18         +1  7003             dec     r0              ;adjust exponent
0130 80EC       +1  7004             jmp     norup1
0132            +1  7005     norup2:
0132 22         +1  7006             ret                     ;finito
                +1  7007     
                +1  7008     
                +1  7009     ;       fpdenorm - denormalize one of the two operands so that their
                +1  7010     ;       exponents are equal. This requires the smaller number to have
                +1  7011     ;       its exponent incremented and its mantissa shifted right.
                +1  7012     
0133            +1  7013     denorm:
0133 E8         +1  7014             mov     a,r0
0134 C3         +1  7015             clr     c
0135 99         +1  7016             subb    a,r1            ;compare exponents
0136 5029       +1  7017             jnc     up2a            ;shift operand 2
0138            +1  7018     up1:
0138 08         +1  7019             inc     r0              ;increment exponent
                +1  7020+3           rshift                  ;shift mantissa down
0139 C3         +1  7021+1           clr     c
013A EA         +1  7022+1           mov     a,r2
013B 13         +1  7023+1           rrc     a
013C FA         +1  7024+1           mov     r2,a
013D EB         +1  7025+1           mov     a,r3
013E 13         +1  7026+1           rrc     a
013F FB         +1  7027+1           mov     r3,a
0140 EC         +1  7028+1           mov     a,r4
0141 13         +1  7029+1           rrc     a
0142 FC         +1  7030+1           mov     r4,a
0143 ED         +1  7031+1           mov     a,r5
0144 13         +1  7032+1           rrc     a
0145 FD         +1  7033+1           mov     r5,a
0146 E8         +1  7034             mov     a,r0
0147 B501EE     +1  7035             cjne    a,exp2,up1      ;loop if still not equal
014A 22         +1  7036             ret
                +1  7037     
014B            +1  7038     up2:
014B 09         +1  7039             inc     r1              ;increment exponent 2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   112

                +1  7040+3           shfdn   mant2           ;shift mantissa down
014C C3         +1  7041+1           clr     c
014D E508       +1  7042+1           mov     a,mant2
014F 13         +1  7043+1           rrc     a
0150 F508       +1  7044+1           mov     mant2,a
0152 E509       +1  7045+1           mov     a,mant2+1
0154 13         +1  7046+1           rrc     a
0155 F509       +1  7047+1           mov     mant2+1,a
0157 E50A       +1  7048+1           mov     a,mant2+2
0159 13         +1  7049+1           rrc     a
015A F50A       +1  7050+1           mov     mant2+2,a
015C E50B       +1  7051+1           mov     a,mant2+3
015E 13         +1  7052+1           rrc     a
015F F50B       +1  7053+1           mov     mant2+3,a
0161            +1  7054     up2a:
0161 E8         +1  7055             mov     a,r0            ;compare exponents
0162 B501E6     +1  7056             cjne    a,exp2,up2
0165 22         +1  7057             ret                     ;all done
                +1  7058     ;------------------------------------------------------------------
                +1  7059     ;       Add the number in op1 to the number in op2 and return the result in r2-r5
                +1  7060     
0166            +1  7061     fladd:
                +1  7062+3           saveregs
0166 C007       +1  7063+1           push    7
0168 C006       +1  7064+1           push    6
016A C001       +1  7065+1           push    1
016C C000       +1  7066+1           push    0
016E 119E       +1  7067             call    unpack1
0170 11BA       +1  7068             call    unpack2
0172 3133       +1  7069             call    denorm
0174 E507       +1  7070             mov     a,sign
0176 30E70D     +1  7071             jnb     acc.7,ok1       ;test left sign
                +1  7072+3           neg1                    ;negate op1
0179 C3         +1  7073+1           clr     c
017A E4         +1  7074+1           clr     a
017B 9D         +1  7075+1           subb    a,r5
017C FD         +1  7076+1           mov     r5,a
017D E4         +1  7077+1           clr     a
017E 9C         +1  7078+1           subb    a,r4
017F FC         +1  7079+1           mov     r4,a
0180 E4         +1  7080+1           clr     a
0181 9B         +1  7081+1           subb    a,r3
0182 FB         +1  7082+1           mov     r3,a
0183 E4         +1  7083+1           clr     a
0184 9A         +1  7084+1           subb    a,r2
0185 FA         +1  7085+1           mov     r2,a
0186            +1  7086     ok1:
0186 E507       +1  7087             mov     a,sign
0188 30E615     +1  7088             jnb     acc.6,ok2       ;test right sign
                +1  7089+3           negm    mant2           ;negate op2
018B C3         +1  7090+1           clr     c
018C E4         +1  7091+1           clr     a
018D 950B       +1  7092+1           subb    a,mant2+3
018F F50B       +1  7093+1           mov     mant2+3,a
0191 E4         +1  7094+1           clr     a
0192 950A       +1  7095+1           subb    a,mant2+2
0194 F50A       +1  7096+1           mov     mant2+2,a
0196 E4         +1  7097+1           clr     a
0197 9509       +1  7098+1           subb    a,mant2+1
0199 F509       +1  7099+1           mov     mant2+1,a
019B E4         +1  7100+1           clr     a
019C 9508       +1  7101+1           subb    a,mant2
019E F508       +1  7102+1           mov     mant2,a
01A0            +1  7103     ok2:
                +1  7104+3           addl    mant2           ;add mantissas
01A0 ED         +1  7105+1           mov     a,r5
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   113

01A1 250B       +1  7106+1           add     a,mant2+3
01A3 FD         +1  7107+1           mov     r5,a
01A4 E50A       +1  7108+1           mov     a,mant2+2
01A6 3C         +1  7109+1           addc    a,r4
01A7 FC         +1  7110+1           mov     r4,a
01A8 E509       +1  7111+1           mov     a,mant2+1
01AA 3B         +1  7112+1           addc    a,r3
01AB FB         +1  7113+1           mov     r3,a
01AC E508       +1  7114+1           mov     a,mant2+0
01AE 3A         +1  7115+1           addc    a,r2
01AF FA         +1  7116+1           mov     r2,a
01B0 E4         +1  7117             clr     a
01B1 FF         +1  7118             mov     r7,a            ;clear sign
01B2 EA         +1  7119             mov     a,r2            ;get sign of result
01B3 30E70E     +1  7120             jnb     acc.7,ok3       ;all ok
01B6 FF         +1  7121             mov     r7,a            ;store sign
                +1  7122+3           neg1                    ;negate mantissa
01B7 C3         +1  7123+1           clr     c
01B8 E4         +1  7124+1           clr     a
01B9 9D         +1  7125+1           subb    a,r5
01BA FD         +1  7126+1           mov     r5,a
01BB E4         +1  7127+1           clr     a
01BC 9C         +1  7128+1           subb    a,r4
01BD FC         +1  7129+1           mov     r4,a
01BE E4         +1  7130+1           clr     a
01BF 9B         +1  7131+1           subb    a,r3
01C0 FB         +1  7132+1           mov     r3,a
01C1 E4         +1  7133+1           clr     a
01C2 9A         +1  7134+1           subb    a,r2
01C3 FA         +1  7135+1           mov     r2,a
01C4            +1  7136     ok3:
01C4 11F0       +1  7137             call    norm1
01C6 11DE       +1  7138             call    pack1           ;pack normalized result
                +1  7139+3           restregs                ;and return
01C8 D000       +1  7140+1           pop     0
01CA D001       +1  7141+1           pop     1
01CC D006       +1  7142+1           pop     6
01CE D007       +1  7143+1           pop     7
01D0 22         +1  7144             ret
                +1  7145     ;-------------------------------------------------------------
                +1  7146     ;       Subtract the number ltemp from the number in r2-r5
                +1  7147     
01D1            +1  7148     flsub:
01D1 630880     +1  7149             xrl     ltemp,#80h      ;toggle sign bit
01D4 8090       +1  7150             jmp     fladd           ;and add!
                +1  7151     
                +1  7152     ;================================================================
                +1  7153     ;       Compare r2-r5 with the right operand and set flags accordingly
                +1  7154     
01D6            +1  7155     flcmp:
01D6 EA         +1  7156            mov     a,r2            ;get sign of left
01D7 6508       +1  7157            xrl     a,ltemp         ;calculate new sign
01D9 30E706     +1  7158            jnb     acc.7,cexp      ;same, go check exponent
                +1  7159     ;ifdef SMALL_MODEL
01DC EA         +1  7160             mov     a,r2            ;get sign of left again
01DD 33         +1  7161             rlc     a
01DE 5001       +1  7162             jnc     flout
                +1  7163     ;endif
01E0 D3         +1  7164             setb    c
01E1 22         +1  7165     flout:          ret                    ;return with acc < 0
                +1  7166     
01E2            +1  7167     cexp:
01E2 C3         +1  7168            clr     c
01E3 EA         +1  7169            mov     a,r2            ;compare exponent and mantissa
01E4 9508       +1  7170            subb    a,ltemp
01E6 7010       +1  7171            jnz     fnd
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   114

01E8 EB         +1  7172            mov     a,r3
01E9 9509       +1  7173            subb    a,ltemp+1
01EB 700B       +1  7174            jnz     fnd
01ED EC         +1  7175            mov     a,r4
01EE 950A       +1  7176            subb    a,ltemp+2
01F0 7006       +1  7177            jnz     fnd
01F2 ED         +1  7178            mov     a,r5
01F3 950B       +1  7179            subb    a,ltemp+3
01F5 7001       +1  7180            jnz     fnd
01F7            +1  7181     cdone:
01F7 22         +1  7182            ret                     ;return with acc == 0
01F8            +1  7183     fnd:
01F8 8AF0       +1  7184           mov     b,r2             ;get sign of left value
01FA 30F7FA     +1  7185          jnb     b.7,cdone       ;if positive, finished
01FD B2E7       +1  7186            cpl   acc.7             ;toggle sign???????/
01FF 4401       +1  7187                         orl         a,#1                          ;make non-zero
0201 B3         +1  7188             cpl     c               ;c=0->1,c=1->0
0202 22         +1  7189             ret
                +1  7190     ;==============================================================
                +1  7191     
                +1  7192     ;       Multiply the float in r2-r5 by the float in ltemp and return
                +1  7193     ;       the result in r2-r5
                +1  7194     
0203            +1  7195     flmul:
                +1  7196+3           saveregs
0203 C007       +1  7197+1           push    7
0205 C006       +1  7198+1           push    6
0207 C001       +1  7199+1           push    1
0209 C000       +1  7200+1           push    0
020B 119E       +1  7201             call    unpack1
020D 11BA       +1  7202             call    unpack2
020F E4         +1  7203             clr     a
0210 F50C       +1  7204             mov     prod,a
0212 F50D       +1  7205             mov     prod+1,a        ;clear product
0214 F50E       +1  7206             mov     prod+2,a
0216 F50F       +1  7207             mov     prod+3,a
0218 7E07       +1  7208             mov     r6,#7           ;initialize counter
021A            +1  7209     mup1:
                +1  7210+3           shfdn   mant2           ;shift multiplier right
021A C3         +1  7211+1           clr     c
021B E508       +1  7212+1           mov     a,mant2
021D 13         +1  7213+1           rrc     a
021E F508       +1  7214+1           mov     mant2,a
0220 E509       +1  7215+1           mov     a,mant2+1
0222 13         +1  7216+1           rrc     a
0223 F509       +1  7217+1           mov     mant2+1,a
0225 E50A       +1  7218+1           mov     a,mant2+2
0227 13         +1  7219+1           rrc     a
0228 F50A       +1  7220+1           mov     mant2+2,a
022A E50B       +1  7221+1           mov     a,mant2+3
022C 13         +1  7222+1           rrc     a
022D F50B       +1  7223+1           mov     mant2+3,a
022F 5014       +1  7224             jnc     nobit           ;skip if lsb was zero
                +1  7225+3           dan     prod            ;add multiplicand to product
0231 ED         +1  7226+1           mov     a,r5
0232 250F       +1  7227+1           add     a,prod+3
0234 F50F       +1  7228+1           mov     prod+3,a
0236 E50E       +1  7229+1           mov     a,prod+2
0238 3C         +1  7230+1           addc    a,r4
0239 F50E       +1  7231+1           mov     prod+2,a
023B E50D       +1  7232+1           mov     a,prod+1
023D 3B         +1  7233+1           addc    a,r3
023E F50D       +1  7234+1           mov     prod+1,a
0240 E50C       +1  7235+1           mov     a,prod+0
0242 3A         +1  7236+1           addc    a,r2
0243 F50C       +1  7237+1           mov     prod,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   115

0245            +1  7238     nobit:
                +1  7239+3           lshift                  ;shift multiplicand up
0245 ED         +1  7240+1           mov     a,r5
0246 33         +1  7241+1           rlc     a
0247 FD         +1  7242+1           mov     r5,a
0248 EC         +1  7243+1           mov     a,r4
0249 33         +1  7244+1           rlc     a
024A FC         +1  7245+1           mov     r4,a
024B EB         +1  7246+1           mov     a,r3
024C 33         +1  7247+1           rlc     a
024D FB         +1  7248+1           mov     r3,a
024E EA         +1  7249+1           mov     a,r2
024F 33         +1  7250+1           rlc     a
0250 FA         +1  7251+1           mov     r2,a
0251 DEC7       +1  7252             djnz    r6,mup1         ;loop if more
                +1  7253     
0253 7E11       +1  7254             mov     r6,#17          ;re-initalize counter
0255 8015       +1  7255             sjmp    mup3
0257            +1  7256     mup11:
                +1  7257+3           shfdn   prod            ;shift product right
0257 C3         +1  7258+1           clr     c
0258 E50C       +1  7259+1           mov     a,prod
025A 13         +1  7260+1           rrc     a
025B F50C       +1  7261+1           mov     prod,a
025D E50D       +1  7262+1           mov     a,prod+1
025F 13         +1  7263+1           rrc     a
0260 F50D       +1  7264+1           mov     prod+1,a
0262 E50E       +1  7265+1           mov     a,prod+2
0264 13         +1  7266+1           rrc     a
0265 F50E       +1  7267+1           mov     prod+2,a
0267 E50F       +1  7268+1           mov     a,prod+3
0269 13         +1  7269+1           rrc     a
026A F50F       +1  7270+1           mov     prod+3,a
026C            +1  7271     mup3:
                +1  7272+3           shfdn   mant2           ;shift multiplier down
026C C3         +1  7273+1           clr     c
026D E508       +1  7274+1           mov     a,mant2
026F 13         +1  7275+1           rrc     a
0270 F508       +1  7276+1           mov     mant2,a
0272 E509       +1  7277+1           mov     a,mant2+1
0274 13         +1  7278+1           rrc     a
0275 F509       +1  7279+1           mov     mant2+1,a
0277 E50A       +1  7280+1           mov     a,mant2+2
0279 13         +1  7281+1           rrc     a
027A F50A       +1  7282+1           mov     mant2+2,a
027C E50B       +1  7283+1           mov     a,mant2+3
027E 13         +1  7284+1           rrc     a
027F F50B       +1  7285+1           mov     mant2+3,a
0281 5014       +1  7286             jnc     mup2            ;skip if bit not set
                +1  7287+3           dan     prod            ;add to prod
0283 ED         +1  7288+1           mov     a,r5
0284 250F       +1  7289+1           add     a,prod+3
0286 F50F       +1  7290+1           mov     prod+3,a
0288 E50E       +1  7291+1           mov     a,prod+2
028A 3C         +1  7292+1           addc    a,r4
028B F50E       +1  7293+1           mov     prod+2,a
028D E50D       +1  7294+1           mov     a,prod+1
028F 3B         +1  7295+1           addc    a,r3
0290 F50D       +1  7296+1           mov     prod+1,a
0292 E50C       +1  7297+1           mov     a,prod+0
0294 3A         +1  7298+1           addc    a,r2
0295 F50C       +1  7299+1           mov     prod,a
0297            +1  7300     mup2:
0297 DEBE       +1  7301             djnz    r6,mup11        ;loop if more
0299 E8         +1  7302             mov     a,r0            ;get exp1
029A 29         +1  7303             add     a,r1            ;add exp2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   116

029B 247A       +1  7304             add     a,#7ah;;;;;;;;;;;;;;;;;;;(-127-7) & 0FFh    ;adjust
029D F8         +1  7305             mov     r0,a            ;store
029E EF         +1  7306             mov     a,r7            ;get sign
029F 23         +1  7307             rl      a               ;rotate bit into msb
02A0 6207       +1  7308             xrl     sign,a          ;xor with other bit
                +1  7309+3           copytor prod            ;copy prod to mant1
02A2 AA0C       +1  7310+1           mov     r2,prod
02A4 AB0D       +1  7311+1           mov     r3,prod+1
02A6 AC0E       +1  7312+1           mov     r4,prod+2
02A8 AD0F       +1  7313+1           mov     r5,prod+3
02AA 11F0       +1  7314             call    norm1           ;normalize
02AC 11DE       +1  7315             call    pack1
                +1  7316+3           restregs
02AE D000       +1  7317+1           pop     0
02B0 D001       +1  7318+1           pop     1
02B2 D006       +1  7319+1           pop     6
02B4 D007       +1  7320+1           pop     7
02B6 22         +1  7321             ret
                +1  7322     ;-----------------------------------------------------------
                +1  7323     ;       Floating divide: divide the number in r2-r5 by ltemp
                +1  7324     
02B7            +1  7325     fldiv:
                +1  7326+3           saveregs
02B7 C007       +1  7327+1           push    7
02B9 C006       +1  7328+1           push    6
02BB C001       +1  7329+1           push    1
02BD C000       +1  7330+1           push    0
02BF 119E       +1  7331             call    unpack1
02C1 11BA       +1  7332             call    unpack2
02C3 E4         +1  7333             clr     a
02C4 F50C       +1  7334             mov     prod,a
02C6 F50D       +1  7335             mov     prod+1,a
02C8 F50E       +1  7336             mov     prod+2,a
02CA F50F       +1  7337             mov     prod+3,a
02CC E9         +1  7338             mov     a,r1            ;check for zero divisor
02CD 6067       +1  7339             jz      div9
02CF E8         +1  7340             mov     a,r0            ;check for zero dividend
02D0 6064       +1  7341             jz      div9
02D2 C3         +1  7342             clr     c
02D3 99         +1  7343             subb    a,r1            ;compute new exponent
02D4 2478       +1  7344             add     a,#127-7        ;unbias
02D6 F8         +1  7345             mov     r0,a            ;store back
02D7 EF         +1  7346             mov     a,r7            ;get sign
02D8 23         +1  7347             rl      a
02D9 6207       +1  7348             xrl     sign,a          ;compute new sign
02DB 7E1F       +1  7349             mov     r6,#24+7        ;initialize counter
02DD            +1  7350     div1:
                +1  7351+3           shfup   prod            ;shift quotient up
02DD C3         +1  7352+1           clr     c
02DE E50F       +1  7353+1           mov     a,prod+3
02E0 33         +1  7354+1           rlc     a
02E1 F50F       +1  7355+1           mov     prod+3,a
02E3 E50E       +1  7356+1           mov     a,prod+2
02E5 33         +1  7357+1           rlc     a
02E6 F50E       +1  7358+1           mov     prod+2,a
02E8 E50D       +1  7359+1           mov     a,prod+1
02EA 33         +1  7360+1           rlc     a
02EB F50D       +1  7361+1           mov     prod+1,a
02ED E50C       +1  7362+1           mov     a,prod
02EF 33         +1  7363+1           rlc     a
02F0 F50C       +1  7364+1           mov     prod,a
02F2 C3         +1  7365             clr     c
02F3 EA         +1  7366             mov     a,r2            ;compare values
02F4 9508       +1  7367             subb    a,mant2
02F6 4028       +1  7368             jc      div2            ;skip if bigger
02F8 7013       +1  7369             jnz     div3
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   117

02FA EB         +1  7370             mov     a,r3            ;compare values
02FB 9509       +1  7371             subb    a,mant2+1
02FD 4021       +1  7372             jc      div2            ;skip if bigger
02FF 700C       +1  7373             jnz     div3
0301 EC         +1  7374             mov     a,r4            ;compare values
0302 950A       +1  7375             subb    a,mant2+2
0304 401A       +1  7376             jc      div2            ;skip if bigger
0306 7005       +1  7377             jnz     div3
0308 ED         +1  7378             mov     a,r5            ;compare values
0309 950B       +1  7379             subb    a,mant2+3
030B 4013       +1  7380             jc      div2            ;skip if bigger
030D            +1  7381     div3:
030D ED         +1  7382             mov     a,r5
030E 950B       +1  7383             subb    a,mant2+3
0310 FD         +1  7384             mov     r5,a
0311 EC         +1  7385             mov     a,r4
0312 950A       +1  7386             subb    a,mant2+2               ;do subtraction
0314 FC         +1  7387             mov     r4,a
0315 EB         +1  7388             mov     a,r3
0316 9509       +1  7389             subb    a,mant2+1               ;do subtraction
0318 FB         +1  7390             mov     r3,a
0319 EA         +1  7391             mov     a,r2
031A 9508       +1  7392             subb    a,mant2         ;do subtraction
031C FA         +1  7393             mov     r2,a
031D 430F01     +1  7394             orl     prod+3,#1       ;set lsb in quotient
0320            +1  7395     div2:
                +1  7396+3           lshift                  ;shift dividend up
0320 ED         +1  7397+1           mov     a,r5
0321 33         +1  7398+1           rlc     a
0322 FD         +1  7399+1           mov     r5,a
0323 EC         +1  7400+1           mov     a,r4
0324 33         +1  7401+1           rlc     a
0325 FC         +1  7402+1           mov     r4,a
0326 EB         +1  7403+1           mov     a,r3
0327 33         +1  7404+1           rlc     a
0328 FB         +1  7405+1           mov     r3,a
0329 EA         +1  7406+1           mov     a,r2
032A 33         +1  7407+1           rlc     a
032B FA         +1  7408+1           mov     r2,a
032C DEAF       +1  7409             djnz    r6,div1         ;loop if more
                +1  7410+3           copytor prod            ;copy quotient
032E AA0C       +1  7411+1           mov     r2,prod
0330 AB0D       +1  7412+1           mov     r3,prod+1
0332 AC0E       +1  7413+1           mov     r4,prod+2
0334 AD0F       +1  7414+1           mov     r5,prod+3
0336            +1  7415     div9:
0336 11F0       +1  7416             call    norm1           ;now normalize result
0338 11DE       +1  7417             call    pack1           ;pack it up
                +1  7418+3           restregs                ;restore registers
033A D000       +1  7419+1           pop     0
033C D001       +1  7420+1           pop     1
033E D006       +1  7421+1           pop     6
0340 D007       +1  7422+1           pop     7
0342 22         +1  7423             ret
                +1  7424     ;------------------------------------------------------------------
                +1  7425     
                +1  7426     ;       Float to long conversion: if the exponent is less than the
                +1  7427     ;       excess value, the result is zero. If the exponent is so large
                +1  7428     ;       that the value would be shifted out, the result is overflow.
                +1  7429     ;       Otherwise shift the mantissa up or down as required.
                +1  7430     
0343            +1  7431     ftol:
                +1  7432+3           saveregs
0343 C007       +1  7433+1           push    7
0345 C006       +1  7434+1           push    6
0347 C001       +1  7435+1           push    1
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   118

0349 C000       +1  7436+1           push    0
034B EA         +1  7437             mov     a,r2
034C B4BF09     +1  7438             cjne    a,#0bfh,ne05
034F EB         +1  7439             mov     a,r3
0350 7006       +1  7440             jnz     ne05
0352 EC         +1  7441             mov     a,r4
0353 7003       +1  7442             jnz     ne05
0355 ED         +1  7443             mov     a,r5
0356 6024       +1  7444             jz      ftol1
0358 119E       +1  7445     ne05:   call    unpack1
035A E8         +1  7446             mov     a,r0            ;get exponent
035B 2482       +1  7447             add     a,#-(127-1)     ;unbias
035D 20E71C     +1  7448             jb      acc.7,ftol1     ;jump if < 0
0360 EF         +1  7449             mov     a,r7            ;get sign
0361 30E70D     +1  7450             jnb     acc.7,ftol4     ;skip if +ve
                +1  7451+3           neg1                    ;negate it
0364 C3         +1  7452+1           clr     c
0365 E4         +1  7453+1           clr     a
0366 9D         +1  7454+1           subb    a,r5
0367 FD         +1  7455+1           mov     r5,a
0368 E4         +1  7456+1           clr     a
0369 9C         +1  7457+1           subb    a,r4
036A FC         +1  7458+1           mov     r4,a
036B E4         +1  7459+1           clr     a
036C 9B         +1  7460+1           subb    a,r3
036D FB         +1  7461+1           mov     r3,a
036E E4         +1  7462+1           clr     a
036F 9A         +1  7463+1           subb    a,r2
0370 FA         +1  7464+1           mov     r2,a
0371            +1  7465     ftol4:
0371 E8         +1  7466             mov     a,r0            ;get exponent
0372 246A       +1  7467             add     a,#6ah;;;;;;;;(-(127-1+23+1)) & 0FFh
0374 20E727     +1  7468             jb      acc.7,ftol2     ;shift has to be right
0377 F8         +1  7469             mov     r0,a            ;save it
0378 24F8       +1  7470             add     a,#-8           ;if > 8, too big
037A 500E       +1  7471             jnc     ftol3
037C            +1  7472     ftol1:
037C E4         +1  7473             clr     a
037D FA         +1  7474             mov     r2,a
037E FB         +1  7475             mov     r3,a
037F FC         +1  7476             mov     r4,a
0380 FD         +1  7477             mov     r5,a
0381            +1  7478     ftol9:
                +1  7479+3           restregs
0381 D000       +1  7480+1           pop     0
0383 D001       +1  7481+1           pop     1
0385 D006       +1  7482+1           pop     6
0387 D007       +1  7483+1           pop     7
0389 22         +1  7484             ret
038A            +1  7485     ftol3:
038A E8         +1  7486             mov     a,r0
038B FE         +1  7487             mov     r6,a            ;store in counter
038C 60F3       +1  7488             jz      ftol9           ;if zero, do nothing
038E            +1  7489     ftol33:
                +1  7490+3           lshift                  ;shift up
038E ED         +1  7491+1           mov     a,r5
038F 33         +1  7492+1           rlc     a
0390 FD         +1  7493+1           mov     r5,a
0391 EC         +1  7494+1           mov     a,r4
0392 33         +1  7495+1           rlc     a
0393 FC         +1  7496+1           mov     r4,a
0394 EB         +1  7497+1           mov     a,r3
0395 33         +1  7498+1           rlc     a
0396 FB         +1  7499+1           mov     r3,a
0397 EA         +1  7500+1           mov     a,r2
0398 33         +1  7501+1           rlc     a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   119

0399 FA         +1  7502+1           mov     r2,a
039A DEF2       +1  7503             djnz    r6,ftol33       ;and loop
039C 80E3       +1  7504             sjmp    ftol9
039E            +1  7505     ftol2:
039E F4         +1  7506             cpl     a               ;complement
039F FE         +1  7507             mov     r6,a
03A0 6022       +1  7508             jz      ftol22
03A2            +1  7509     ftol23:
03A2 EF         +1  7510             mov     a,r7
03A3 30E70F     +1  7511             jnb     acc.7,ftol24
                +1  7512+3           rshift1
03A6 D3         +1  7513+1           setb    c
03A7 EA         +1  7514+1           mov     a,r2
03A8 13         +1  7515+1           rrc     a
03A9 FA         +1  7516+1           mov     r2,a
03AA EB         +1  7517+1           mov     a,r3
03AB 13         +1  7518+1           rrc     a
03AC FB         +1  7519+1           mov     r3,a
03AD EC         +1  7520+1           mov     a,r4
03AE 13         +1  7521+1           rrc     a
03AF FC         +1  7522+1           mov     r4,a
03B0 ED         +1  7523+1           mov     a,r5
03B1 13         +1  7524+1           rrc     a
03B2 FD         +1  7525+1           mov     r5,a
03B3 800D       +1  7526             jmp     ftol25
03B5            +1  7527+3   ftol24: rshift                  ;shift down
03B5 C3         +1  7528+1           clr     c
03B6 EA         +1  7529+1           mov     a,r2
03B7 13         +1  7530+1           rrc     a
03B8 FA         +1  7531+1           mov     r2,a
03B9 EB         +1  7532+1           mov     a,r3
03BA 13         +1  7533+1           rrc     a
03BB FB         +1  7534+1           mov     r3,a
03BC EC         +1  7535+1           mov     a,r4
03BD 13         +1  7536+1           rrc     a
03BE FC         +1  7537+1           mov     r4,a
03BF ED         +1  7538+1           mov     a,r5
03C0 13         +1  7539+1           rrc     a
03C1 FD         +1  7540+1           mov     r5,a
03C2 DEDE       +1  7541     ftol25: djnz    r6,ftol23
03C4            +1  7542     ftol22:
                +1  7543+3           add1                    ;round
03C4 ED         +1  7544+1           mov     a,r5
03C5 2401       +1  7545+1           add     a,#1
03C7 FD         +1  7546+1           mov     r5,a
03C8 E4         +1  7547+1           clr     a
03C9 3C         +1  7548+1           addc    a,r4
03CA FC         +1  7549+1           mov     r4,a
03CB E4         +1  7550+1           clr     a
03CC 3B         +1  7551+1           addc    a,r3
03CD FB         +1  7552+1           mov     r3,a
03CE E4         +1  7553+1           clr     a
03CF 3A         +1  7554+1           addc    a,r2
03D0 FA         +1  7555+1           mov     r2,a
03D1 EF         +1  7556             mov     a,r7
03D2 30E70F     +1  7557             jnb     acc.7,ftol26
                +1  7558+3           rshift1
03D5 D3         +1  7559+1           setb    c
03D6 EA         +1  7560+1           mov     a,r2
03D7 13         +1  7561+1           rrc     a
03D8 FA         +1  7562+1           mov     r2,a
03D9 EB         +1  7563+1           mov     a,r3
03DA 13         +1  7564+1           rrc     a
03DB FB         +1  7565+1           mov     r3,a
03DC EC         +1  7566+1           mov     a,r4
03DD 13         +1  7567+1           rrc     a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   120

03DE FC         +1  7568+1           mov     r4,a
03DF ED         +1  7569+1           mov     a,r5
03E0 13         +1  7570+1           rrc     a
03E1 FD         +1  7571+1           mov     r5,a
03E2 809D       +1  7572             jmp     ftol9
03E4            +1  7573+3   ftol26: rshift
03E4 C3         +1  7574+1           clr     c
03E5 EA         +1  7575+1           mov     a,r2
03E6 13         +1  7576+1           rrc     a
03E7 FA         +1  7577+1           mov     r2,a
03E8 EB         +1  7578+1           mov     a,r3
03E9 13         +1  7579+1           rrc     a
03EA FB         +1  7580+1           mov     r3,a
03EB EC         +1  7581+1           mov     a,r4
03EC 13         +1  7582+1           rrc     a
03ED FC         +1  7583+1           mov     r4,a
03EE ED         +1  7584+1           mov     a,r5
03EF 13         +1  7585+1           rrc     a
03F0 FD         +1  7586+1           mov     r5,a
03F1 808E       +1  7587             jmp     ftol9
                +1  7588     
                +1  7589     ;       arithmetic integer to floating conversions
                +1  7590     
03F3            +1  7591     abtof:
03F3 ED         +1  7592             mov     a,r5
03F4 23         +1  7593             rl      a
03F5 FC         +1  7594             mov     r4,a
03F6 9C         +1  7595             subb    a,r4
03F7 FC         +1  7596             mov     r4,a
03F8 FB         +1  7597             mov     r3,a
03F9 FA         +1  7598             mov     r2,a
03FA 8006       +1  7599             jmp     altof
03FC            +1  7600     awtof:
03FC EC         +1  7601             mov     a,r4
03FD 23         +1  7602             rl      a
03FE FB         +1  7603             mov     r3,a
03FF 9B         +1  7604             subb    a,r3
0400 FB         +1  7605             mov     r3,a
0401 FA         +1  7606             mov     r2,a
0402            +1  7607     altof:
                +1  7608+3           saveregs
0402 C007       +1  7609+1           push    7
0404 C006       +1  7610+1           push    6
0406 C001       +1  7611+1           push    1
0408 C000       +1  7612+1           push    0
040A EA         +1  7613             mov     a,r2            ;get sign
040B 5480       +1  7614             anl     a,#80h
040D FF         +1  7615             mov     r7,a            ;store it
040E 30E70D     +1  7616             jnb     acc.7,altof1    ;skip if +ve
                +1  7617+3           neg1
0411 C3         +1  7618+1           clr     c
0412 E4         +1  7619+1           clr     a
0413 9D         +1  7620+1           subb    a,r5
0414 FD         +1  7621+1           mov     r5,a
0415 E4         +1  7622+1           clr     a
0416 9C         +1  7623+1           subb    a,r4
0417 FC         +1  7624+1           mov     r4,a
0418 E4         +1  7625+1           clr     a
0419 9B         +1  7626+1           subb    a,r3
041A FB         +1  7627+1           mov     r3,a
041B E4         +1  7628+1           clr     a
041C 9A         +1  7629+1           subb    a,r2
041D FA         +1  7630+1           mov     r2,a
041E            +1  7631     altof1:
041E 7896       +1  7632             mov     r0,#127+23      ;initialize exponent
0420 11F0       +1  7633             call    norm1           ;normalize it
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   121

0422 11DE       +1  7634             call    pack1           ;and pack up
                +1  7635+3           restregs
0424 D000       +1  7636+1           pop     0
0426 D001       +1  7637+1           pop     1
0428 D006       +1  7638+1           pop     6
042A D007       +1  7639+1           pop     7
042C 22         +1  7640             ret
                +1  7641     
042D            +1  7642     lbtof:
042D 7C00       +1  7643             mov     r4,#0
042F            +1  7644     lwtof:
042F E4         +1  7645             clr     a
0430 FB         +1  7646             mov     r3,a
0431 FA         +1  7647             mov     r2,a
0432            +1  7648     lltof:
                +1  7649+3           saveregs
0432 C007       +1  7650+1           push    7
0434 C006       +1  7651+1           push    6
0436 C001       +1  7652+1           push    1
0438 C000       +1  7653+1           push    0
043A 7F00       +1  7654             mov     r7,#0           ;zero sign
043C 80E0       +1  7655             sjmp    altof1
                +1  7656     
                +1  7657     ;-------------------------------------------------------
                +1  7658     
                +1  7659     
                    7660     
                    7661     ;$include (d:\amp\wriread.asm)
                +1  7662     ;dptr-адрес ячейки страницы памяти
043E 75A800     +1  7663     cle256:          mov            IE,#00H
0441 75B601     +1  7664                              mov            FLSCL,#01                       ;стирание страницы 
                             байт(запись в ячейки ff)
0444 758F03     +1  7665                              MOV            PSCTL,#03
                +1  7666                                             
0447 7400       +1  7667                                     mov             a,#00h  ;запись любого значения стирает стр
                             аницу
0449 F0         +1  7668                                     movx    @dptr,a                         ;wr
044A 758F00     +1  7669                                     mov             PSCTL,#00
044D 75B600     +1  7670                                 mov         FLSCL,#00
0450 75A880     +1  7671                               mov           IE,#80H
0453 22         +1  7672                                     ret
                +1  7673     
                +1  7674     ;чтение памяти программ в r8..r11
                +1  7675     ;вх-r2,r3-адр яч памяти прогр
0454 8A83       +1  7676     re4byte:        mov                     dph,r2
0456 8B82       +1  7677                                             mov                     dpl,r3
0458 E4         +1  7678                                             clr                     a
0459 93         +1  7679                                             movc            a,@a+dptr
045A F508       +1  7680                                             mov                     r8,a
045C A3         +1  7681                                             inc                     dptr
045D E4         +1  7682                                             clr                     a
045E 93         +1  7683                                             movc            a,@a+dptr
045F F509       +1  7684                                             mov                     r9,a
0461 A3         +1  7685                                             inc                     dptr
0462 E4         +1  7686                                             clr                     a
0463 93         +1  7687                                             movc            a,@a+dptr
0464 F50A       +1  7688                                             mov                     r10,a
0466 A3         +1  7689                                             inc                     dptr
0467 E4         +1  7690                                             clr                     a
0468 93         +1  7691                                             movc            a,@a+dptr
0469 F50B       +1  7692                                             mov                     r11,a                      
                                                  ;r8..r11
046B 22         +1  7693                                             ret
                +1  7694      ;чтение памяти программ в r2..r5
                +1  7695     ;вх-r2,r3-адр яч памяти прогр
046C 8A83       +1  7696     rebyte2:        mov                     dph,r2
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   122

046E 8B82       +1  7697                                             mov                     dpl,r3
0470 E4         +1  7698                                             clr                     a
0471 93         +1  7699                                             movc            a,@a+dptr
0472 FA         +1  7700                                             mov                     r2,a
0473 A3         +1  7701                                             inc                     dptr
0474 E4         +1  7702                                             clr                     a
0475 93         +1  7703                                             movc            a,@a+dptr
0476 FB         +1  7704                                             mov                     r3,a
0477 A3         +1  7705                                             inc                     dptr
0478 E4         +1  7706                                             clr                     a
0479 93         +1  7707                                             movc            a,@a+dptr
047A FC         +1  7708                                             mov                     r4,a
047B A3         +1  7709                                             inc                     dptr
047C E4         +1  7710                                             clr                     a
047D 93         +1  7711                                             movc            a,@a+dptr
047E FD         +1  7712                                             mov                     r5,a                       
                                                  ;r8..r11
047F 22         +1  7713                                             ret
                +1  7714      
                +1  7715     
                +1  7716      ;r7-количество байт
                +1  7717     ;dptr-адр ячейки для записи
                +1  7718     ;r1-адр ячейки  внешнего озу
                +1  7719     
0480 75A800     +1  7720     wrpage:  mov            IE,#00H
0483 75B601     +1  7721     WW5:     mov            FLSCL,#01               ;обязательно для каждого записи байта
0486 758F01     +1  7722                      mov            PSCTL,#01               ;обязательно для каждого записи бай
                             та
0489 E3         +1  7723                      movx           a,@r1
048A F0         +1  7724                      movx           @dptr,a                         ;wr
048B 758F00     +1  7725                      mov            PSCTL,#0
048E 75B600     +1  7726                      mov            FLSCL,#00
0491 A3         +1  7727                     inc                     dptr
0492 09         +1  7728                     inc                     r1
0493 DFEE       +1  7729                     djnz            r7,WW5
0495 75A880     +1  7730                     mov             IE,#80H
0498 22         +1  7731                     ret
                +1  7732                             
                +1  7733     
                +1  7734     
                +1  7735                                                             
                +1  7736     
                +1  7737     
                +1  7738     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7739     ;чтение памяти программ во внешнее озу
                +1  7740     ;вх-r2,r3-адр яч памяти прогр
                +1  7741     ;r1- яч внешнее озу
0499 8A83       +1  7742     copyPP:         mov                     dph,r2
049B 8B82       +1  7743                                             mov                     dpl,r3
049D 7FFF       +1  7744                                             mov                     r7,#0ffh
049F E4         +1  7745     copy1:          clr                     a
04A0 93         +1  7746                                             movc            a,@a+dptr
04A1 F3         +1  7747                                             movx                    @r1,a
04A2 A3         +1  7748                                             inc                     dptr
04A3 09         +1  7749                                             inc                     r1
04A4 DFF9       +1  7750                                             djnz            r7,copy1
04A6 22         +1  7751                                             ret
                +1  7752     ;;;;;;;;;;;;;;;;;;;;;;;;;
                +1  7753     
                +1  7754                                     
                +1  7755     
                +1  7756     ;r8..r11->@r0..@r0+3
                +1  7757     ;r0-адр ячейки
                +1  7758     ;сохранить в ячейке озу
04A7 E508       +1  7759     savelte:        mov     a,ltemp
04A9 F6         +1  7760                                             mov     @r0,a
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   123

04AA 08         +1  7761                                             inc     r0
04AB E509       +1  7762                                             mov     a,ltemp+1
04AD F6         +1  7763                                             mov     @r0,a
04AE 08         +1  7764                                             inc     r0
04AF E50A       +1  7765                                             mov     a,ltemp+2
04B1 F6         +1  7766                                             mov     @r0,a
04B2 08         +1  7767                                             inc     r0
04B3 E50B       +1  7768                                             mov     a,ltemp+3
04B5 F6         +1  7769                                             mov     @r0,a
04B6 22         +1  7770                                             ret
                +1  7771     
                +1  7772     ;
                +1  7773     
                +1  7774     
                +1  7775     
                +1  7776     
                +1  7777     
                +1  7778                     
                +1  7779     
                +1  7780     
                +1  7781     
                +1  7782     
                +1  7783      
                    7784     
                    7785                                                   
                    7786     END
                                                                             
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   124

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      182#
AAPAR. . . . . . .  C ADDR   0380H   R   SEG=MAIN   822#
ABIN . . . . . . .  D ADDR   004FH   A      300# 1392 1449 1474 1495 1499 1502 1503 1505 1612 1617 3556 3559 3592
                                           3684 3728 3731 3795 3799 3800 3801 3804 4012 4049 4050 4052 4126 4146 4237
                                           4241 4266 4269 4552 4557 4723 4728 5294 5437 5440 5464 5467
ABRET. . . . . . .  C ADDR   204DH   R   SEG=MAIN   5223 5225#
ABTOF. . . . . . .  C ADDR   03F3H   A      7591#
AC . . . . . . . .  B ADDR   00D0H.6 A      205#
ACC. . . . . . . .  D ADDR   00E0H   A      106# 654 701 709 717 725 727 747 1101 1112 1120 1197 1561 1744 1753 1762
                                           1771 1792 2168 2221 2243 2248 2252 2257 2260 2263 2266 2269 2440 2501 2547
                                           2558 2643 2652 2660 2669 2808 2826 2851 2856 2860 2863 2866 2869 2872 2875
                                           3186 3273 3304 3321 3339 3356 3376 4186 4192 4229 4300 5866 5998 6076 6079
                                           6336 6988 7071 7088 7120 7158 7186 7448 7450 7468 7511 7557 7616
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      222#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      225#
AD0INT . . . . . .  B ADDR   00E8H.5 A      223#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      218#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      220#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      221#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      224#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      219#
ADC0CF . . . . . .  D ADDR   00BCH   A      72#
ADC0CN . . . . . .  D ADDR   00E8H   A      114# 218 219 220 221 222 223 224 225
ADC0GTH. . . . . .  D ADDR   00C5H   A      81#
ADC0GTL. . . . . .  D ADDR   00C4H   A      80#
ADC0H. . . . . . .  D ADDR   00BFH   A      75#
ADC0L. . . . . . .  D ADDR   00BEH   A      74#
ADC0LTH. . . . . .  D ADDR   00C7H   A      83#
ADC0LTL. . . . . .  D ADDR   00C6H   A      82#
ADC1 . . . . . . .  D ADDR   009CH   A      43#
ADC1CF . . . . . .  D ADDR   00ABH   A      57#
ADC1CN . . . . . .  D ADDR   00AAH   A      56#
ADDX . . . . . . .  C ADDR   27EBH   R   SEG=MAIN   857 894 896 898 900 902 904 906 908 910 976 978 980 982 984 986
                                           988 990 992 995 997 999 1001 1003 1005 1007 1009 1011 1013 1032 1034 1036
                                           6577#
ADEC . . . . . . .  D ADDR   0053H   A      301# 1448 1460 1464 1479 1504 1507 1508 1616 1620 3553 3557 3589 3593
                                           3681 3685 3730 3734 3803 3816 4022 4036 4038 4040 4051 4054 4136 4147 4242
                                           4270 4556 4560 4727 4731 5095 5114 5132 5195 5212 5439 5442 5466 5469 5788
                                           5820
ADRBLOK. . . . . .  C ADDR   24D3H   R   SEG=MAIN   3257 3572 3702 4472 4642 4793 5832#
AFTERK . . . . . .  C ADDR   068DH   R   SEG=MAIN   1129 1206#
AGE2 . . . . . . .  C ADDR   01FCH   R   SEG=MAIN   584# 587
AGE9 . . . . . . .  C ADDR   080EH   R   SEG=MAIN   1396# 1399
AGEON. . . . . . .  C ADDR   020AH   R   SEG=MAIN   593# 595
ALESS0 . . . . . .  C ADDR   0943H   R   SEG=MAIN   1561 1582#
ALLSUM . . . . . .  C ADDR   031EH   R   SEG=MAIN   767# 802 819 835
ALMUL. . . . . . .  C ADDR   2732H   R   SEG=MAIN   6423#
ALTOF. . . . . . .  C ADDR   0402H   A      1095 1140 1191 1222 1230 1245 1256 1273 1286 1358 1857 1945 2006 2044
                                           3596 3690 4150 4245 4273 4399 4524 4542 4626 4688 4704 4777 4839 4854 7599
                                           7607#
ALTOF1 . . . . . .  C ADDR   041EH   A      7616 7631# 7655
AMX0CF . . . . . .  D ADDR   00BAH   A      70#
AMX0SL . . . . . .  D ADDR   00BBH   A      71#
AMX1SL . . . . . .  D ADDR   00ACH   A      58#
ANKOR. . . . . . .  C ADDR   05DDH   R   SEG=MAIN   1093 1109#
AN_T7. . . . . . .  C ADDR   1126H   R   SEG=MAIN   2876# 2943 2952
AUTOKA . . . . . .  C ADDR   0B6FH   R   SEG=MAIN   1127 1974#
AVPGO. . . . . . .  C ADDR   0795H   R   SEG=MAIN   1334 1336#
AVTDEC1. . . . . .  C ADDR   0652H   R   SEG=MAIN   1162 1171#
AWTOF. . . . . . .  C ADDR   03FCH   A      7600#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   125

B. . . . . . . . .  D ADDR   00F0H   A      122# 4950 5314 6426 6429 6431 6435 6439 6443 6447 6452 6456 6463 6467
                                           6471 6477 6481 6485 6491 7184 7185
BEGIN. . . . . . .  C ADDR   0100H   R   SEG=MAIN   249 451#
BFORM. . . . . . .  C ADDR   2410H   R   SEG=MAIN   5637 5642 5654# 5680
BIN30. . . . . . .  C ADDR   254EH   R   SEG=MAIN   5986# 6012
BIN31. . . . . . .  C ADDR   2552H   R   SEG=MAIN   5991# 5995
BIN32. . . . . . .  C ADDR   2562H   R   SEG=MAIN   6004# 6009
BIN41. . . . . . .  C ADDR   2573H   R   SEG=MAIN   6020# 6030
BINDEC . . . . . .  C ADDR   2542H   R   SEG=MAIN   1450 1506 1618 3732 3805 4053 4558 4729 5441 5468 5965#
BITAKT . . . . . .  B ADDR   0023H.2 A      349# 1699 1700 1703
BITAVP . . . . . .  B ADDR   0020H.5 A      320# 1292 1515 1689 2931 2932 2934
BITBON . . . . . .  B ADDR   0021H.2 A      327# 1724 1837 2278 2279 2285 5867
BITBUF . . . . . .  B ADDR   0021H.0 A      325#
BITEIZM. . . . . .  B ADDR   0022H.5 A      340# 1216 1707 2910 2922 3949 4869
BITIZM . . . . . .  B ADDR   0020H.4 A      319# 562 675 2249 2318 2403 2464 2857 2911 3024 3047 3121 3149 3172 3276
                                           3358 3576 3614 3639 3788 3904 3950 3997 4084 4159
BITKLB . . . . . .  B ADDR   0022H.2 A      337# 1266 1722 2254 2930 2937 4157 4449
BITMAS . . . . . .  B ADDR   0020H.1 A      316# 1043 1046 5620
BITMEM . . . . . .  B ADDR   0021H.3 A      328# 1602 2637 3152 3168 3179 3275 3357 3577 3613 3787
BITMENU. . . . . .  B ADDR   0022H.1 A      336# 1601 2463 2577 2912 3171 3621 3638 3909 3951 3996 4083 4156
BITMIG . . . . . .  B ADDR   0023H.1 A      348# 2540 2720 2815 3090 3405 3526 4115 4221 4307 5380 5395 5411 5423
                                           5486 5493 5499 5505
BITNUL . . . . . .  B ADDR   0021H.7 A      332# 1673 2954 2955 2962
BITOLL . . . . . .  B ADDR   0022H.7 A      342# 630 1522 1599
BITPAR . . . . . .  B ADDR   0022H.6 A      341# 3915 4450
BITPRD . . . . . .  B ADDR   0021H.1 A      326# 1836
BITRS. . . . . . .  B ADDR   0020H.3 A      318#
BITT2. . . . . . .  B ADDR   0022H.0 A      335# 1598 2404 2437 2969 3122
BITV19 . . . . . .  B ADDR   0022H.3 A      338# 508 512 2608 2611 2615 3893 3898 3979 3992 4089 4092 4096
BITVI11. . . . . .  B ADDR   0020H.6 A      321# 1293 2272 2274 2317 2462 2909 3023 3170
BITVICH. . . . . .  B ADDR   0022H.4 A      339# 1597 2273 2319 2329 2461 2469 2986 3046 3169
BITZNAK. . . . . .  B ADDR   0020H.0 A      315# 655 684
BITZNB . . . . . .  B ADDR   0023H.3 A      350# 4274 5221 5224
BITZUS . . . . . .  B ADDR   0020H.7 A      322# 1348 1538 1883 1886 2364
BLOKVV . . . . . .  C ADDR   152BH   R   SEG=MAIN   3480#
BLOKVVC. . . . . .  C ADDR   1535H   R   SEG=MAIN   3483 3486#
BL_LI. . . . . . .  C ADDR   14F9H   R   SEG=MAIN   3430 3438#
BMEM11 . . . . . .  B ADDR   0021H.4 A      329#
BOUT7. . . . . . .  C ADDR   12D9H   R   SEG=MAIN   3130# 3132
BRET . . . . . . .  C ADDR   1EA2H   R   SEG=MAIN   4890 4895 4899#
BUFDEC . . . . . .  C ADDR   0975H   R   SEG=MAIN   1623# 1628
BUFIND . . . . . .  D ADDR   0040H   A      298# 583 587 592 595 599 623 1395 1399 1465 1486 1507 1508 1509 1571 1576
                                           1621 1629 1631 1636 1671 1687 1693 1701 1704 1709 1723 1725 2100 2237 2515
                                           2533 2549 2551 2554 2715 2759 2778 2844 3025 3026 3073 3077 3103 3136 3142
                                           3153 3249 3400 3452 3481 3496 3497 3500 3501 3508 3509 3513 3528 3654 3661
                                           3735 3743 3745 3750 3806 3815 3817 4021 4054 4055 4058 4107 4135 4213 4256
                                           4257 4365 4561 4569 4573 4732 4740 4744 4948 4966 5094 5113 5131 5194 5211
                                           5222 5383 5398 5443 5462 5470 5490 5511 5787 5819
BUFMEA . . . . . .  C ADDR   1CC7H   R   SEG=MAIN   4563# 4568
BUFMIN . . . . . .  C ADDR   1DBAH   R   SEG=MAIN   4734# 4739
BUFON. . . . . . .  C ADDR   0D5BH   R   SEG=MAIN   2278 2285#
BUFR . . . . . . .  C ADDR   08B3H   R   SEG=MAIN   1488# 1493
BUFR2. . . . . . .  C ADDR   0895H   R   SEG=MAIN   1467# 1472
BUFR3. . . . . . .  C ADDR   088EH   R   SEG=MAIN   1458 1463#
BUFR30 . . . . . .  C ADDR   0891H   R   SEG=MAIN   1461 1465#
CCF0 . . . . . . .  B ADDR   00D8H.0 A      209#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      210#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      211#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      212#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      213#
CDONE. . . . . . .  C ADDR   01F7H   A      7181# 7185
CELLBIT. . . . . .  D ADDR   0020H   A      314# 315 316 317 318 319 320 321 322
CELLBIT1 . . . . .  D ADDR   0021H   A      324# 325 326 327 328 329 332
CELLBIT2 . . . . .  D ADDR   0022H   A      334# 335 336 337 338 339 340 341 342
CELLBIT3 . . . . .  D ADDR   0023H   A      346# 347 348 349 350
CEXP . . . . . . .  C ADDR   01E2H   A      7158 7167#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   126

CF . . . . . . . .  B ADDR   00D8H.7 A      215#
CH0. . . . . . . .  C ADDR   1F3FH   R   SEG=MAIN   2963 5032#
CH1. . . . . . . .  C ADDR   1F5FH   R   SEG=MAIN   2085 5043#
CH10 . . . . . . .  C ADDR   1F43H   R   SEG=MAIN   818 1057 3720 5033#
CH100. . . . . . .  C ADDR   1F57H   R   SEG=MAIN   766 1556 5038#
CH10000. . . . . .  C ADDR   1F53H   R   SEG=MAIN   5037#
CH150H . . . . . .  C ADDR   1F9FH   R   SEG=MAIN   5059#
CH2. . . . . . . .  C ADDR   1F5BH   R   SEG=MAIN   1052 5039#
CH20 . . . . . . .  C ADDR   2114H   R   SEG=MAIN   801 1062 5345#
CH2THO . . . . . .  C ADDR   1F7FH   R   SEG=MAIN   2013 2051 5051#
CH320H . . . . . .  C ADDR   1F9BH   R   SEG=MAIN   5058# 5840
CH4. . . . . . . .  C ADDR   1F4BH   R   SEG=MAIN   1066 5035#
CH43 . . . . . . .  C ADDR   171FH   R   SEG=MAIN   3737# 3742
CH43_42. . . . . .  C ADDR   17B1H   R   SEG=MAIN   3819# 3824
CH5. . . . . . . .  C ADDR   1F47H   R   SEG=MAIN   834 5034#
CH57 . . . . . . .  C ADDR   2110H   R   SEG=MAIN   5344#
CH954. . . . . . .  C ADDR   1F4FH   R   SEG=MAIN   5036#
CHAIBL . . . . . .  C ADDR   13DDH   R   SEG=MAIN   3251 3253#
CHAIPR . . . . . .  C ADDR   1674H   R   SEG=MAIN   3656 3658#
CHANMA . . . . . .  C ADDR   0F0BH   R   SEG=MAIN   2547 2556#
CHANZ. . . . . . .  C ADDR   0EF2H   R   SEG=MAIN   2501 2545#
CHAVT. . . . . . .  D ADDR   0081H   A      364# 542 1118 1163 1171 2067 3905
CHBEFORE . . . . .  D ADDR   009BH   A      374# 564 763 777 796 813 829
CHBLOK . . . . . .  D ADDR   00D6H   A      399# 4470 4531 4539 4640 4694 4791 4845
CHBUF. . . . . . .  D ADDR   00CFH   A      396# 575 1822 1827 1865 1892 3611
CHCMP. . . . . . .  C ADDR   0CB5H   R   SEG=MAIN   667 1124 2194#
CHDEC. . . . . . .  C ADDR   0C15H   R   SEG=MAIN   674 1172 1183 2077#
CHDEL. . . . . . .  D ADDR   0083H   A      365# 1914 1959 1981 2026 2061
CHDELMO. . . . . .  C ADDR   0B57H   R   SEG=MAIN   1929 1959# 1964
CHIF . . . . . . .  C ADDR   2158H   R   SEG=MAIN   5387 5389#
CHIFB. . . . . . .  C ADDR   216CH   R   SEG=MAIN   5402 5405#
CHIFB1 . . . . . .  C ADDR   2171H   R   SEG=MAIN   5404 5405 5407#
CHIND. . . . . . .  D ADDR   00ACH   A      380# 1307 1729
CHINKOR. . . . . .  D ADDR   0098H   A      363# 537 745 1110 1123 1165 1179 1182 1966
CHK. . . . . . . .  C ADDR   1F97H   R   SEG=MAIN   1267 5057#
CHKL . . . . . . .  D ADDR   003DH   A      305# 666 673 2382 2410 2452 2890 3156 3779 4162
CHMAS. . . . . . .  D ADDR   006EH   A      302# 1040 1047 1070 5619
CHMASN . . . . . .  D ADDR   003FH   A      306# 752 761 797 814 830 846 1045 1047 1048
CHMINUS. . . . . .  C ADDR   24B8H   R   SEG=MAIN   3270 3301 3318 3336 3353 5802# 5863
CHTADC . . . . . .  C ADDR   0C5FH   R   SEG=MAIN   2126#
CHTHO. . . . . . .  C ADDR   1F77H   R   SEG=MAIN   1141 1274 4408 5049#
CHTHOU . . . . . .  C ADDR   2018H   R   SEG=MAIN   5182#
CHZAP. . . . . . .  C ADDR   1F3BH   R   SEG=MAIN   1811 5031#
CH_1 . . . . . . .  C ADDR   1F67H   R   SEG=MAIN   567 1412 1435 1824 1829 1894 3691 5045#
CH_10. . . . . . .  C ADDR   1F8FH   R   SEG=MAIN   1237 1418 1441 1870 4151 4547 4717 5055#
CH_10TH. . . . . .  C ADDR   1F8BH   R   SEG=MAIN   1329 5054#
CH_2 . . . . . . .  C ADDR   1F6BH   R   SEG=MAIN   1862 5046#
CH_200 . . . . . .  C ADDR   1F87H   R   SEG=MAIN   5053#
CH_220 . . . . . .  C ADDR   1F83H   R   SEG=MAIN   1287 5052#
CH_22T . . . . . .  C ADDR   2056H   R   SEG=MAIN   1368 5230#
CH_250 . . . . . .  C ADDR   1F93H   R   SEG=MAIN   1211 5056#
CH_4 . . . . . . .  C ADDR   1F6FH   R   SEG=MAIN   3694 5047#
CH_500 . . . . . .  C ADDR   2052H   R   SEG=MAIN   1364 5229#
CH_953 . . . . . .  C ADDR   1F73H   R   SEG=MAIN   5048#
CH_B . . . . . . .  C ADDR   204EH   R   SEG=MAIN   1380 5227#
CH_FL. . . . . . .  C ADDR   205AH   R   SEG=MAIN   1404 5231#
CH_MLN . . . . . .  C ADDR   1F63H   R   SEG=MAIN   5044#
CIKLWR . . . . . .  C ADDR   23E6H   R   SEG=MAIN   5625#
CKCON. . . . . . .  D ADDR   008EH   A      30# 469 500
CL4. . . . . . . .  C ADDR   1FB1H   R   SEG=MAIN   5074# 5076
CL4N . . . . . . .  C ADDR   1FB7H   R   SEG=MAIN   5083# 5085
CLE20. . . . . . .  C ADDR   179EH   R   SEG=MAIN   3809# 3811
CLE256 . . . . . .  C ADDR   043EH   A      3985 4441 7663#
CLEAR. . . . . . .  C ADDR   253CH   R   SEG=MAIN   5943 5947# 5977
CLEAR4 . . . . . .  C ADDR   1FAEH   R   SEG=MAIN   775 1345 1347 1475 1496 1535 1537 2311 2313 2948 2950 4469 5072#
CLEARN . . . . . .  C ADDR   1FB6H   R   SEG=MAIN   3554 3590 3682 4013 4127 4238 4267 5081#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   127

CLMASSIX . . . . .  C ADDR   23D6H   R   SEG=MAIN   528 1343 1533 1970 2071 2309 2946 3120 5613#
CLMASV . . . . . .  C ADDR   079AH   R   SEG=MAIN   1338 1340#
CLMAX. . . . . . .  C ADDR   23DBH   R   SEG=MAIN   5615# 5618
CLR11. . . . . . .  C ADDR   253DH   R   SEG=MAIN   5949# 5951
CLRDEC . . . . . .  C ADDR   2536H   R   SEG=MAIN   5941#
CLRNUM . . . . . .  C ADDR   253AH   R   SEG=MAIN   5944# 6058
CLRVICH. . . . . .  C ADDR   124EH   R   SEG=MAIN   3046# 3063
CNTR . . . . . . .  N NUMB   0006H   A      6854#
CO02S. . . . . . .  C ADDR   1F23H   R   SEG=MAIN   5015# 5019
CO05S. . . . . . .  C ADDR   1F30H   R   SEG=MAIN   5024# 5028
CO1S . . . . . . .  C ADDR   1F1AH   R   SEG=MAIN   5009# 5009
CO2S . . . . . . .  C ADDR   1F16H   R   SEG=MAIN   5007# 5011
COMPA1 . . . . . .  C ADDR   082AH   R   SEG=MAIN   1412# 1421
COMPA2 . . . . . .  C ADDR   0860H   R   SEG=MAIN   1435# 1444
COND . . . . . . .  C ADDR   244AH   R   SEG=MAIN   5709#
COPY1. . . . . . .  C ADDR   049FH   A      7745# 7750
COPYPP . . . . . .  C ADDR   0499H   A      3972 4420 7742#
COPY_HL. . . . . .  D ADDR   00D7H   A      400# 4462 4478 4493 4633 4648 4663 4784 4799 4814
COUNT. . . . . . .  C ADDR   1EF8H   R   SEG=MAIN   4981# 4981
CPRL2. . . . . . .  B ADDR   00C8H.0 A      189#
CPT0CN . . . . . .  D ADDR   009EH   A      45#
CPT1CN . . . . . .  D ADDR   009FH   A      46#
CR . . . . . . . .  B ADDR   00D8H.6 A      214#
CT . . . . . . . .  C ADDR   1EFFH   R   SEG=MAIN   4987# 4987
CT2. . . . . . . .  B ADDR   00C8H.1 A      190#
CY . . . . . . . .  B ADDR   00D0H.7 A      206#
DAC0CN . . . . . .  D ADDR   00D4H   A      95# 474
DAC0H. . . . . . .  D ADDR   00D3H   A      94# 1563 1584
DAC0L. . . . . . .  D ADDR   00D2H   A      93# 1566 1588
DAC1CN . . . . . .  D ADDR   00D7H   A      98# 475
DAC1H. . . . . . .  D ADDR   00D6H   A      97# 1819
DAC1L. . . . . . .  D ADDR   00D5H   A      96# 1816
DCOA . . . . . . .  C ADDR   244FH   R   SEG=MAIN   5713# 5715
DCOB . . . . . . .  C ADDR   2456H   R   SEG=MAIN   5717# 5735
DCOC . . . . . . .  C ADDR   2461H   R   SEG=MAIN   5727# 5732
DCOD . . . . . . .  C ADDR   246EH   R   SEG=MAIN   5734 5737#
DD . . . . . . . .  C ADDR   0236H   R   SEG=MAIN   621#
DDOUTF . . . . . .  C ADDR   14B4H   R   SEG=MAIN   3240 3281 3386 3394# 3476
DDOUTFR. . . . . .  C ADDR   13C1H   R   SEG=MAIN   3240# 3246
DEC30. . . . . . .  C ADDR   258FH   R   SEG=MAIN   6068# 6093
DEC31. . . . . . .  C ADDR   2594H   R   SEG=MAIN   6074# 6081
DEC32. . . . . . .  C ADDR   25A4H   R   SEG=MAIN   6086# 6090
DECBIN . . . . . .  C ADDR   2582H   R   SEG=MAIN   3558 3594 3686 4148 4243 4271 6047#
DECSIZE. . . . . .  N NUMB   000AH   A      5922# 5942 5976 6003 6016 6019 6073
DECT2. . . . . . .  C ADDR   25ADH   R   SEG=MAIN   6064 6096#
DEDPTR . . . . . .  C ADDR   2802H   R   SEG=MAIN   6581 6585 6589 6595#
DENORM . . . . . .  C ADDR   0133H   A      7013# 7069
DGOTO7 . . . . . .  C ADDR   1601H   R   SEG=MAIN   3597# 3605
DIAP . . . . . . .  D ADDR   00AEH   A      382# 556 1333 1517 1635 2303 2335 2939 3749 4057 4870 4891 5145 5160 5311
                                           5373
DIINC. . . . . . .  C ADDR   0D7AH   R   SEG=MAIN   2306 2309#
DIKDN. . . . . . .  C ADDR   20E8H   R   SEG=MAIN   5313 5333#
DIKDW. . . . . . .  C ADDR   2002H   R   SEG=MAIN   5149 5170#
DIPAR. . . . . . .  C ADDR   2016H   R   SEG=MAIN   5180#
DIV1 . . . . . . .  C ADDR   02DDH   A      7350# 7409
DIV2 . . . . . . .  C ADDR   0320H   A      7368 7372 7376 7380 7395#
DIV3 . . . . . . .  C ADDR   030DH   A      7369 7373 7377 7381#
DIV9 . . . . . . .  C ADDR   0336H   A      7339 7341 7415#
DIVIDE . . . . . .  C ADDR   266DH   R   SEG=MAIN   5641 6282#
DONE . . . . . . .  C ADDR   25DCH   R   SEG=MAIN   6112 6123#
DONE1. . . . . . .  C ADDR   25DAH   R   SEG=MAIN   6115 6118 6121#
DOSH . . . . . . .  C ADDR   26F6H   R   SEG=MAIN   6357 6373#
DOSUB. . . . . . .  C ADDR   26E4H   R   SEG=MAIN   6341 6345 6349 6353 6354 6358#
DPH. . . . . . . .  D ADDR   0083H   A      19# 534 2837 3712 3714 3835 3840 4289 4463 4475 4480 4489 4491 4494 4505
                                           4594 4596 4634 4645 4650 4659 4661 4664 4675 4785 4796 4801 4810 4812 4815
                                           4826 5573 5581 5848 5854 5874 6129 6165 6200 6203 6215 6238 6600 6602 7676
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   128

                                           7696 7742
DPL. . . . . . . .  D ADDR   0082H   A      18# 2836 3708 3710 3832 3843 4290 4466 4473 4483 4486 4488 4497 4501 4591
                                           4593 4637 4643 4653 4656 4658 4667 4671 4788 4794 4804 4807 4809 4818 4822
                                           5574 5580 5845 5857 5878 6145 6181 6202 6216 6219 6253 6597 6599 7677 7697
                                           7743
DVIG0. . . . . . .  C ADDR   0A53H   R   SEG=MAIN   1765# 1767
DVIG1. . . . . . .  C ADDR   0A48H   R   SEG=MAIN   1756# 1758
DVIG2. . . . . . .  C ADDR   0A3DH   R   SEG=MAIN   1747# 1749
DVIG3. . . . . . .  C ADDR   0A31H   R   SEG=MAIN   1738# 1740
DVIG4. . . . . . .  C ADDR   0A5FH   R   SEG=MAIN   1776# 1778
DVIG6. . . . . . .  C ADDR   0A81H   R   SEG=MAIN   1804# 1806
DVM. . . . . . . .  C ADDR   0A7FH   R   SEG=MAIN   1792 1803#
EA . . . . . . . .  B ADDR   00A8H.7 A      169#
EIE1 . . . . . . .  D ADDR   00E6H   A      112# 472
EIE2 . . . . . . .  D ADDR   00E7H   A      113# 515 2098 2110 2219 2810 2825 4306
EIP1 . . . . . . .  D ADDR   00F6H   A      128#
EIP2 . . . . . . .  D ADDR   00F7H   A      129#
EMI0CF . . . . . .  D ADDR   00A3H   A      49#
EMI0CN . . . . . .  D ADDR   00AFH   A      61#
EMI0TC . . . . . .  D ADDR   00A1H   A      48#
ENDKALIB . . . . .  C ADDR   1BB7H   R   SEG=MAIN   2928 4395#
ENDSDV . . . . . .  C ADDR   0A85H   R   SEG=MAIN   1798 1807#
ENDSUM . . . . . .  C ADDR   056BH   R   SEG=MAIN   858 911 1014 1039#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      186#
EQU0 . . . . . . .  C ADDR   085BH   R   SEG=MAIN   1415 1431#
EQU00. . . . . . .  C ADDR   0879H   R   SEG=MAIN   1433 1438 1447#
EQU1L. . . . . . .  C ADDR   1031H   R   SEG=MAIN   2726 2730#
EQU2L. . . . . . .  C ADDR   1514H   R   SEG=MAIN   3462 3467#
ERROR. . . . . . .  C ADDR   21FCH   R   SEG=MAIN   4080 4373 4387 5509#
ES . . . . . . . .  B ADDR   00A8H.4 A      167#
ET0. . . . . . . .  B ADDR   00A8H.1 A      164#
ET1. . . . . . . .  B ADDR   00A8H.3 A      166#
ET2. . . . . . . .  B ADDR   00A8H.5 A      168#
EX0. . . . . . . .  B ADDR   00A8H.0 A      163#
EX1. . . . . . . .  B ADDR   00A8H.2 A      165#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      192#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      195#
EXP1 . . . . . . .  N NUMB   0000H   A      6856#
EXP2 . . . . . . .  N NUMB   0001H   A      6858# 7035 7056
EXTCLE . . . . . .  C ADDR   01ACH   R   SEG=MAIN   531# 535
F0 . . . . . . . .  B ADDR   00D0H.5 A      204#
F1 . . . . . . . .  B ADDR   00D0H.1 A      200#
FINDEXT. . . . . .  C ADDR   1FFBH   R   SEG=MAIN   4422 5159#
FINDKOEF . . . . .  C ADDR   1FECH   R   SEG=MAIN   1137 1270 5144#
FINDMEM. . . . . .  C ADDR   0F95H   R   SEG=MAIN   2577 2637#
FINDR. . . . . . .  C ADDR   2141H   R   SEG=MAIN   1501 4048 5373#
FINIS. . . . . . .  C ADDR   2721H   R   SEG=MAIN   6301 6402#
FLACL. . . . . . .  D ADDR   00B7H   A      67#
FLADD. . . . . . .  C ADDR   0166H   A      1362 4528 7061# 7150
FLCMP. . . . . . .  C ADDR   01D6H   A      1213 1289 1331 1366 1370 1414 1437 1831 4690 4706 4841 4856 7155#
FLDIV. . . . . . .  C ADDR   02B7H   A      1143 1236 1276 1387 1406 1420 2015 2053 4406 4546 4549 4719 7325#
FLMUL. . . . . . .  C ADDR   0203H   A      1104 1148 1202 1239 1281 1382 1443 1864 3696 4153 4410 7195#
FLOUT. . . . . . .  C ADDR   01E1H   A      7162 7165#
FLSCL. . . . . . .  D ADDR   00B6H   A      66# 7664 7670 7721 7726
FLSUB. . . . . . .  C ADDR   01D1H   A      1194 1826 1896 2011 2049 3693 7148#
FND. . . . . . . .  C ADDR   01F8H   A      7171 7174 7177 7180 7183#
FO1M . . . . . . .  C ADDR   240DH   R   SEG=MAIN   5647 5651#
FO2M . . . . . . .  C ADDR   2416H   R   SEG=MAIN   5654 5656#
FORM4. . . . . . .  C ADDR   2417H   R   SEG=MAIN   5649 5655 5659#
FT1IZM . . . . . .  C ADDR   0E4BH   R   SEG=MAIN   2447#
FTOL . . . . . . .  C ADDR   0343H   A      1149 1283 1390 3697 4411 4550 4720 5436 5463 7431#
FTOL1. . . . . . .  C ADDR   037CH   A      7444 7448 7472#
FTOL2. . . . . . .  C ADDR   039EH   A      7468 7505#
FTOL22 . . . . . .  C ADDR   03C4H   A      7508 7542#
FTOL23 . . . . . .  C ADDR   03A2H   A      7509# 7541
FTOL24 . . . . . .  C ADDR   03B5H   A      7511 7527#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   129

FTOL25 . . . . . .  C ADDR   03C2H   A      7526 7541#
FTOL26 . . . . . .  C ADDR   03E4H   A      7557 7573#
FTOL3. . . . . . .  C ADDR   038AH   A      7471 7485#
FTOL33 . . . . . .  C ADDR   038EH   A      7489# 7503
FTOL4. . . . . . .  C ADDR   0371H   A      7450 7465#
FTOL9. . . . . . .  C ADDR   0381H   A      7478# 7488 7504 7572 7587
GENER. . . . . . .  C ADDR   0145H   R   SEG=MAIN   480# 481
GO23NO . . . . . .  C ADDR   1479H   R   SEG=MAIN   3286 3363#
GO31L. . . . . . .  C ADDR   1037H   R   SEG=MAIN   2704 2735#
GO41L. . . . . . .  C ADDR   103CH   R   SEG=MAIN   2735 2737#
GOA2 . . . . . . .  C ADDR   0753H   R   SEG=MAIN   1294# 1324
GOA3A2 . . . . . .  C ADDR   075DH   R   SEG=MAIN   1299#
GOCIKLE. . . . . .  C ADDR   0B02H   R   SEG=MAIN   1838 1867 1876 1883# 1890 1897
GOFULL . . . . . .  C ADDR   14ACH   R   SEG=MAIN   3369 3390#
GOKAA2 . . . . . .  C ADDR   0778H   R   SEG=MAIN   1322#
GOKLB. . . . . . .  C ADDR   0D49H   R   SEG=MAIN   2254 2276#
GOOFF1 . . . . . .  C ADDR   1418H   R   SEG=MAIN   3295# 3304
GOOFF2 . . . . . .  C ADDR   1430H   R   SEG=MAIN   3312# 3321
GOOFF3 . . . . . .  C ADDR   1448H   R   SEG=MAIN   3330# 3339
GOOFF4 . . . . . .  C ADDR   1460H   R   SEG=MAIN   3347# 3356
GOONIN . . . . . .  C ADDR   076AH   R   SEG=MAIN   1306# 1349 1523 1539
GOONIND. . . . . .  C ADDR   094CH   R   SEG=MAIN   1309 1589#
GOONOFF. . . . . .  C ADDR   13E9H   R   SEG=MAIN   3264# 3273
GOONT. . . . . . .  C ADDR   0AC8H   R   SEG=MAIN   1841 1848#
GOPAROL. . . . . .  C ADDR   194BH   R   SEG=MAIN   3914 4034 4042#
GOPAROM. . . . . .  C ADDR   1861H   R   SEG=MAIN   3912# 3915
GOPART . . . . . .  C ADDR   02FCH   R   SEG=MAIN   747 750#
GOSK19 . . . . . .  C ADDR   0F6DH   R   SEG=MAIN   2608 2613#
GOTO7. . . . . . .  C ADDR   1126H   R   SEG=MAIN   2889# 2960 2967 3004 3050 3079 3091 3130 3134 3175 3191 3200 3206
                                           3211 3217 3232 3279 3361 3415 3418 3429 3466 3469 3498 3510 3515 3541 3543
                                           3578 3597 3615 3667 3853 3860 4077 4087 4119 4170 4172 4188 4200 4258 4456
GOTOKD . . . . . .  C ADDR   05FFH   R   SEG=MAIN   1107 1131#
GOUT6. . . . . . .  C ADDR   0CFEH   R   SEG=MAIN   2244# 2272
GOVVLIST . . . . .  C ADDR   1698H   R   SEG=MAIN   3650 3672#
GOZNAK . . . . . .  C ADDR   02AEH   R   SEG=MAIN   661 690#
HNOR11 . . . . . .  C ADDR   1259H   R   SEG=MAIN   3015 3054#
HNOR12 . . . . . .  C ADDR   1208H   R   SEG=MAIN   3005 3009#
HNOT1. . . . . . .  C ADDR   12A2H   R   SEG=MAIN   2981 3100#
HNOT2. . . . . . .  C ADDR   11D6H   R   SEG=MAIN   2978#
HR12 . . . . . . .  C ADDR   11FEH   R   SEG=MAIN   3000 3005#
HVI1113. . . . . .  C ADDR   11F8H   R   SEG=MAIN   3003# 3008 3013
IE . . . . . . . .  D ADDR   00A8H   A      54# 163 164 165 166 167 168 169 516 4353 7663 7671 7720 7730
IE0. . . . . . . .  B ADDR   0088H.1 A      144#
IE1. . . . . . . .  B ADDR   0088H.3 A      146#
INCT . . . . . . .  C ADDR   11D2H   R   SEG=MAIN   2973 2975#
IND. . . . . . . .  C ADDR   0C2DH   R   SEG=MAIN   588 596 621 678 1425 1429 1726 2098# 2296 3774 3825 4081 4369
                                           4375 4389 4453
INDA3. . . . . . .  C ADDR   0913H   R   SEG=MAIN   1554#
INDOLL . . . . . .  C ADDR   08EAH   R   SEG=MAIN   1515 1516 1520#
INIACP . . . . . .  C ADDR   205EH   R   SEG=MAIN   627 3118 5237#
INNOT1_2 . . . . .  C ADDR   1570H   R   SEG=MAIN   3507 3512#
INNOT3 . . . . . .  C ADDR   1561H   R   SEG=MAIN   3499 3504#
INNOT6 . . . . . .  C ADDR   1555H   R   SEG=MAIN   3495 3499#
INTERVA. . . . . .  D ADDR   00CDH   A      395# 1848 3560
INTMUL . . . . . .  C ADDR   0AE0H   R   SEG=MAIN   1864# 1872
INTN . . . . . . .  C ADDR   15EAH   R   SEG=MAIN   3588#
IP . . . . . . . .  D ADDR   00B8H   A      68# 172 173 174 175 176 177
IT0. . . . . . . .  B ADDR   0088H.0 A      143#
IT1. . . . . . . .  B ADDR   0088H.2 A      145#
IZCHI. . . . . . .  C ADDR   128AH   R   SEG=MAIN   3081#
IZMAN. . . . . . .  C ADDR   0DCEH   R   SEG=MAIN   2217 2356#
IZMFUN . . . . . .  C ADDR   0DDDH   R   SEG=MAIN   2297 2308 2315 2360 2363#
IZMPAT . . . . . .  C ADDR   0DE1H   R   SEG=MAIN   2270 2284 2286 2332 2367#
IZMT2. . . . . . .  C ADDR   0DF0H   R   SEG=MAIN   2383 2388#
IZMT3. . . . . . .  C ADDR   0DFBH   R   SEG=MAIN   2388 2394#
JFINIS . . . . . .  C ADDR   2688H   R   SEG=MAIN   6293 6301#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   130

KD . . . . . . . .  C ADDR   1F7BH   R   SEG=MAIN   5050#
KEYB1. . . . . . .  C ADDR   0CD7H   R   SEG=MAIN   283 2218#
KEYB2. . . . . . .  C ADDR   10BDH   R   SEG=MAIN   286 2824#
KFULL. . . . . . .  C ADDR   1483H   R   SEG=MAIN   3233 3368#
KFULLR . . . . . .  C ADDR   13B0H   R   SEG=MAIN   3228 3233#
KGO23. . . . . . .  C ADDR   1405H   R   SEG=MAIN   3227 3284#
KLEV1. . . . . . .  C ADDR   138AH   R   SEG=MAIN   3183 3218#
KLEV2. . . . . . .  C ADDR   138FH   R   SEG=MAIN   3218 3220#
KLEV21 . . . . . .  C ADDR   13B3H   R   SEG=MAIN   3225 3234#
KLEV22 . . . . . .  C ADDR   1399H   R   SEG=MAIN   3213 3222 3225#
KLEV23 . . . . . .  C ADDR   13C4H   R   SEG=MAIN   3234 3242#
KLEV3. . . . . . .  C ADDR   1394H   R   SEG=MAIN   3220 3222#
KLMAS. . . . . . .  C ADDR   03A9H   R   SEG=MAIN   779 845#
KNAVP. . . . . . .  C ADDR   1171H   R   SEG=MAIN   2869 2930#
KNIZM. . . . . . .  B ADDR   0023H.0 A      347# 1291 1516 1695 2334 2356 2357 2361
KNIZMON. . . . . .  C ADDR   0DD8H   R   SEG=MAIN   2356 2361#
KNKMP. . . . . . .  C ADDR   10AEH   R   SEG=MAIN   2819# 2863
KNLEFT . . . . . .  C ADDR   1181H   R   SEG=MAIN   2823 2937#
KNMEM. . . . . . .  C ADDR   12F7H   R   SEG=MAIN   2818 3149#
KNMENU . . . . . .  C ADDR   1148H   R   SEG=MAIN   2875 2909#
KNNUL. . . . . . .  C ADDR   119FH   R   SEG=MAIN   2822 2954#
KNOPT. . . . . . .  C ADDR   0E03H   R   SEG=MAIN   2216 2402#
KNRAZR . . . . . .  C ADDR   0E18H   R   SEG=MAIN   2215 2416#
KNRIGHT. . . . . .  C ADDR   0D70H   R   SEG=MAIN   2260 2301#
KNVICH . . . . . .  C ADDR   0D8CH   R   SEG=MAIN   2269 2317#
KOEFKD . . . . . .  D ADDR   00A0H   A      377# 573 4413 4423
KOEFKM . . . . . .  D ADDR   0094H   A      371# 571 1102 1200 2057
KOEFKP . . . . . .  D ADDR   0090H   A      370# 569 1099 1195 2019
KOMUL. . . . . . .  C ADDR   071DH   R   SEG=MAIN   1269 1273#
KOMULPZ. . . . . .  C ADDR   0717H   R   SEG=MAIN   1266 1270#
KONSTA . . . . . .  D ADDR   00BCH   A      390# 1378 4246 5434
KONSTB . . . . . .  D ADDR   00C0H   A      391# 1352 4278 5454
KON_B. . . . . . .  C ADDR   0ED6H   R   SEG=MAIN   2503 2522#
KOR0US . . . . . .  C ADDR   1EB6H   R   SEG=MAIN   1927 4924#
KOR0_AN. . . . . .  D ADDR   0084H   A      367# 1192 1946 2009 2047
KORDEC1. . . . . .  C ADDR   0665H   R   SEG=MAIN   1177 1182#
KORDEC10 . . . . .  C ADDR   0648H   R   SEG=MAIN   1165#
KORNUL . . . . . .  C ADDR   0B37H   R   SEG=MAIN   1114 1914#
KVVOD0 . . . . . .  C ADDR   149FH   R   SEG=MAIN   3193 3376 3385#
LABEL43. . . . . .  C ADDR   168FH   R   SEG=MAIN   3668# 3676
LABEL7 . . . . . .  C ADDR   1764H   R   SEG=MAIN   3668 3779# 3791
LABELA . . . . . .  C ADDR   0283H   R   SEG=MAIN   664# 682 1887
LABELB . . . . . .  C ADDR   0A2AH   R   SEG=MAIN   1157 1542 1731# 1902 1906 1908
LABELC . . . . . .  C ADDR   0E18H   R   SEG=MAIN   2417#
LABELE . . . . . .  C ADDR   0DE1H   R   SEG=MAIN   2365 2381# 2422 2425 2429 2433
LABELF . . . . . .  C ADDR   0E37H   R   SEG=MAIN   2214 2436#
LABELH . . . . . .  C ADDR   11C1H   R   SEG=MAIN   2821 2969#
LABELI . . . . . .  C ADDR   1A34H   R   SEG=MAIN   2984 3039 3093 4183#
LABELI2. . . . . .  C ADDR   123EH   R   SEG=MAIN   3039# 3040
LABELK . . . . . .  C ADDR   132EH   R   SEG=MAIN   2983 3176#
LABELL . . . . . .  C ADDR   0FF2H   R   SEG=MAIN   2575 2666 2674#
LABELL1. . . . . .  C ADDR   0F13H   R   SEG=MAIN   2560# 2630 2742 2791
LABELN . . . . . .  C ADDR   1056H   R   SEG=MAIN   2631 2751#
LABELP . . . . . .  C ADDR   1665H   R   SEG=MAIN   3601 3621 3650# 3862
LABELS . . . . . .  C ADDR   1630H   R   SEG=MAIN   3372 3621#
LABELS1. . . . . .  C ADDR   18C2H   R   SEG=MAIN   3930 3960#
LABELS13 . . . . .  C ADDR   19BDH   R   SEG=MAIN   4001 4099#
LABELS3. . . . . .  C ADDR   1A47H   R   SEG=MAIN   4193#
LABELS4. . . . . .  C ADDR   1A22H   R   SEG=MAIN   4000 4174#
LABL2. . . . . . .  C ADDR   1018H   R   SEG=MAIN   2707# 3237
LABM . . . . . . .  C ADDR   151AH   R   SEG=MAIN   3238 3472#
LADD . . . . . . .  C ADDR   27C9H   R   SEG=MAIN   758 793 810 826 1814 6528#
LADDX. . . . . . .  C ADDR   27DAH   R   SEG=MAIN   6552#
LBTOF. . . . . . .  C ADDR   042DH   A      7642#
LCMP . . . . . . .  C ADDR   25C7H   R   SEG=MAIN   2204 5678 6108#
LDC_LONG . . . . .  C ADDR   25DDH   R   SEG=MAIN   568 1268 1812 2014 2052 2964 6128#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   131

LDC_LTEMP. . . . .  C ADDR   25FFH   R   SEG=MAIN   767 1053 1058 1063 1067 1142 1212 1238 1275 1288 1330 1365 1369
                                           1381 1405 1413 1419 1436 1442 1557 1825 1830 1863 1871 1895 2086 3692 3695
                                           3721 4152 4409 4548 4718 5841 6164#
LDX_LONG . . . . .  C ADDR   2625H   R   SEG=MAIN   6199#
LDX_LTEMP. . . . .  C ADDR   264BH   R   SEG=MAIN   6237#
LEFCUR . . . . . .  C ADDR   157FH   R   SEG=MAIN   3521# 3583 3599
LEFKL. . . . . . .  C ADDR   118BH   R   SEG=MAIN   2937 2943#
LEFMEM11 . . . . .  C ADDR   133CH   R   SEG=MAIN   3184# 3219 3221 3223
LEFT21 . . . . . .  C ADDR   14CDH   R   SEG=MAIN   3411 3416#
LEFT_S . . . . . .  C ADDR   18BFH   R   SEG=MAIN   3959# 3962
LEFT_SK. . . . . .  C ADDR   19A4H   R   SEG=MAIN   3959 4089#
LEV220 . . . . . .  C ADDR   139CH   R   SEG=MAIN   3226# 3235
LEV2GO . . . . . .  C ADDR   107CH   R   SEG=MAIN   2750 2787#
LEVEL. . . . . . .  D ADDR   00B0H   A      384# 2288 2638 2676 3154 3164 3182 3387
LI21 . . . . . . .  C ADDR   1294H   R   SEG=MAIN   3088 3090#
LI42_43. . . . . .  C ADDR   16FEH   R   SEG=MAIN   3718# 3845
LIST_43. . . . . .  C ADDR   176EH   R   SEG=MAIN   3670 3784#
LLDI2. . . . . . .  C ADDR   0DC7H   R   SEG=MAIN   2347 2351#
LLDI23 . . . . . .  C ADDR   0DBBH   R   SEG=MAIN   2339 2344#
LLDI3. . . . . . .  C ADDR   0DC2H   R   SEG=MAIN   2346 2348#
LLEV2. . . . . . .  C ADDR   1041H   R   SEG=MAIN   2706 2740#
LLMUL. . . . . . .  C ADDR   2732H   R   SEG=MAIN   6422#
LLSUB. . . . . . .  C ADDR   27B7H   R   SEG=MAIN   6504#
LLTOF. . . . . . .  C ADDR   0432H   A      7648#
LMUL . . . . . . .  C ADDR   2732H   R   SEG=MAIN   5636 5842 6424#
LOA3_X . . . . . .  C ADDR   2512H   R   SEG=MAIN   1844 5881#
LOAB12 . . . . . .  C ADDR   20ADH   R   SEG=MAIN   3116 5278#
LOAD . . . . . . .  D ADDR   00B7H   A      388# 2405 2441 2971 3112 4947
LOADB. . . . . . .  C ADDR   12B3H   R   SEG=MAIN   3107 3110# 3140 3146
LOADB2 . . . . . .  C ADDR   12DCH   R   SEG=MAIN   3128 3132#
LOADCLE. . . . . .  C ADDR   135AH   R   SEG=MAIN   3198# 3379
LOADKD . . . . . .  C ADDR   20CAH   R   SEG=MAIN   5311#
LOADR2 . . . . . .  C ADDR   20BCH   R   SEG=MAIN   3595 3687 4149 4244 4272 5294#
LOADT. . . . . . .  C ADDR   1ED1H   R   SEG=MAIN   2407 2447 2977 4947#
LOADUS . . . . . .  C ADDR   1E70H   R   SEG=MAIN   628 1341 1530 1958 2060 2314 2362 2923 2951 3119 4868#
LOAHL_R2 . . . . .  C ADDR   1CDCH   R   SEG=MAIN   4577# 4686 4702 4837 4852
LOBLOK . . . . . .  C ADDR   14D8H   R   SEG=MAIN   3366 3423# 3439
LOCLE. . . . . . .  C ADDR   1355H   R   SEG=MAIN   3187 3196#
LOD1 . . . . . . .  C ADDR   1EE0H   R   SEG=MAIN   4955# 4960
LODT . . . . . . .  C ADDR   1EECH   R   SEG=MAIN   4967# 4972
LOIZMK . . . . . .  C ADDR   120BH   R   SEG=MAIN   3010# 3044
LOKAME1. . . . . .  C ADDR   181AH   R   SEG=MAIN   3875#
LOLEVT . . . . . .  C ADDR   1ED3H   R   SEG=MAIN   2294 4948#
LOLIST . . . . . .  C ADDR   1349H   R   SEG=MAIN   3189#
LOME1. . . . . . .  C ADDR   1B1DH   R   SEG=MAIN   4317# 4321 4324 4327 4330 4334 4337 4340 4343 4347
LOMENU . . . . . .  C ADDR   1B15H   R   SEG=MAIN   2590 2603 3875 3917 3940 4314#
LOOP . . . . . . .  C ADDR   0C9CH   R   SEG=MAIN   2167# 2168
LOOPS. . . . . . .  C ADDR   268BH   R   SEG=MAIN   6303# 6336
LOSPUS . . . . . .  C ADDR   1EAAH   R   SEG=MAIN   1928 4907#
LOSTAT . . . . . .  C ADDR   1371H   R   SEG=MAIN   3202 3208#
LOTEXT . . . . . .  C ADDR   1EE8H   R   SEG=MAIN   1424 1428 1521 2325 2478 2486 2494 2610 2614 2646 2655 2663 2672
                                           2680 2914 3003 3070 3151 3190 3199 3205 3210 3216 3231 3391 3424 3433 3488
                                           3636 3660 3814 3850 3858 3871 3892 3897 3936 4045 4091 4095 4254 4317 4452
                                           4964# 5510
LOTP . . . . . . .  C ADDR   2120H   R   SEG=MAIN   5352# 5362 5365
LOTPUS . . . . . .  C ADDR   2118H   R   SEG=MAIN   3948 4902 5349#
LOU. . . . . . . .  C ADDR   0DCDH   R   SEG=MAIN   2334 2350 2354#
LOUIZM . . . . . .  C ADDR   0DAAH   R   SEG=MAIN   2334# 2359 4899
LOUTF. . . . . . .  C ADDR   1034H   R   SEG=MAIN   2732# 2741 2748
LOVICH . . . . . .  C ADDR   1201H   R   SEG=MAIN   3006# 3037 3058 4285
LOWR . . . . . . .  C ADDR   1363H   R   SEG=MAIN   3196 3202#
LOWR1. . . . . . .  C ADDR   1368H   R   SEG=MAIN   3204# 3383
LSUB . . . . . . .  C ADDR   27B7H   R   SEG=MAIN   1154 1302 2087 6505#
LTEMP. . . . . . .  N NUMB   0008H   A      1070 1072 1073 1074 5184 5185 5186 5187 5688 5691 5694 5697 5740 5741
                                           5742 5743 5920# 6294 6295 6296 6297 6306 6310 6314 6318 6321 6322 6323
                                           6324 6325 6326 6327 6328 6329 6330 6331 6332 6335 6338 6343 6347 6351 6361
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   132

                                           6364 6367 6370 6386 6389 6390 6392 6393 6395 6396 6398 6403 6404 6405 6406
                                           6426 6431 6439 6447 6452 6463 6471 6477 6485 6491 6859 6860 6899 6904 6906
                                           6915 6916 6917 6918 7149 7157 7170 7173 7176 7179 7759 7762 7765 7768
LWR. . . . . . . .  C ADDR   23E8H   R   SEG=MAIN   5627# 5631
LWRX . . . . . . .  C ADDR   23ACH   R   SEG=MAIN   5572# 5584
LWTOF. . . . . . .  C ADDR   042FH   A      7644#
MABIN. . . . . . .  D ADDR   006FH   A      303#
MAFORM . . . . . .  C ADDR   2403H   R   SEG=MAIN   1611 3724 4551 4722 5635 5640 5645# 5677
MAIN . . . . . . .  C SEG    2814H       REL=UNIT   237 294# 444
MANT1. . . . . . .  N NUMB   0002H   A      6857# 6884 6933 6934
MANT2. . . . . . .  N NUMB   0008H   A      6859# 6910 6911 7042 7044 7045 7047 7048 7050 7051 7053 7092 7093 7095
                                           7096 7098 7099 7101 7102 7106 7108 7111 7114 7212 7214 7215 7217 7218 7220
                                           7221 7223 7274 7276 7277 7279 7280 7282 7283 7285 7367 7371 7375 7379 7383
                                           7386 7389 7392
MARK0_8. . . . . .  C ADDR   0EDDH   R   SEG=MAIN   2505 2523 2525#
MARKER . . . . . .  D ADDR   00B2H   A      386# 547 2236 2465 2504 2514 2522 2532 2538 2714 2722 2758 2765 2777 2843
                                           3048 3065 3086 3173 3277 3359 3399 3407 3425 3451 3458 3490 3527 3534 3574
                                           3607 3662 3678 3789 3918 4072 4085 4106 4113 4160 4193 4212 4219 4249 4281
                                           5381 5396 5413 5424 5482
MARLE. . . . . . .  C ADDR   2172H   R   SEG=MAIN   3542 5410#
MARRI. . . . . . .  C ADDR   217FH   R   SEG=MAIN   2785 5423#
MAS10. . . . . . .  C ADDR   03C8H   R   SEG=MAIN   847 860#
MAS20. . . . . . .  C ADDR   0448H   R   SEG=MAIN   860 915#
MAS4 . . . . . . .  C ADDR   053CH   R   SEG=MAIN   913 1016#
MAS5DIV. . . . . .  C ADDR   05B0H   R   SEG=MAIN   1054 1059 1064 1068 1076#
MASFULL. . . . . .  C ADDR   0577H   R   SEG=MAIN   1043 1047#
MASS0. . . . . . .  X ADDR   0100H   A      407 408# 848 853 882 890 964 972 1021 1028 5614
MASS1. . . . . . .  X ADDR   0104H   A      409# 856 879 893 961 975 1019 1031
MASS10 . . . . . .  X ADDR   0128H   A      418# 937 994
MASS11 . . . . . .  X ADDR   012CH   A      419# 934 996
MASS12 . . . . . .  X ADDR   0130H   A      420# 931 998
MASS13 . . . . . .  X ADDR   0134H   A      421# 928 1000
MASS14 . . . . . .  X ADDR   0138H   A      422# 925 1002
MASS15 . . . . . .  X ADDR   013CH   A      423# 922 1004
MASS16 . . . . . .  X ADDR   0140H   A      424# 920 1006
MASS17 . . . . . .  X ADDR   0144H   A      425# 918 1008
MASS18 . . . . . .  X ADDR   0148H   A      426# 916 1010
MASS19 . . . . . .  X ADDR   014CH   A      427# 1012
MASS2. . . . . . .  X ADDR   0108H   A      410# 876 895 958 977 1017 1033
MASS3. . . . . . .  X ADDR   010CH   A      411# 873 897 955 979 1035
MASS4. . . . . . .  X ADDR   0110H   A      412# 870 899 952 981
MASS5. . . . . . .  X ADDR   0114H   A      413# 867 901 949 983
MASS6. . . . . . .  X ADDR   0118H   A      414# 865 903 947 985
MASS7. . . . . . .  X ADDR   011CH   A      415# 863 905 945 987
MASS8. . . . . . .  X ADDR   0120H   A      416# 861 907 943 989
MASS9. . . . . . .  X ADDR   0124H   A      417# 909 940 991
MASX5. . . . . . .  C ADDR   05A6H   R   SEG=MAIN   1045 1070#
MAXG . . . . . . .  C ADDR   1E03H   R   SEG=MAIN   4793# 4847
MAXVIX . . . . . .  C ADDR   1E6DH   R   SEG=MAIN   4857 4862#
ME11_15DE. . . . .  C ADDR   162AH   R   SEG=MAIN   3617# 3633
ME11_15DEC . . . .  C ADDR   1819H   R   SEG=MAIN   3617 3874#
ME21_22. . . . . .  C ADDR   0FFCH   R   SEG=MAIN   2680# 2688
ME21_23. . . . . .  C ADDR   187DH   R   SEG=MAIN   3647 3926#
ME21_23DEC . . . .  C ADDR   1899H   R   SEG=MAIN   3933 3938#
MEAVP. . . . . . .  C ADDR   117CH   R   SEG=MAIN   2931 2934#
MECLE. . . . . . .  C ADDR   0199H   R   SEG=MAIN   520# 522
MEFF . . . . . . .  C ADDR   01A0H   R   SEG=MAIN   524# 527
MEM12NO. . . . . .  C ADDR   149AH   R   SEG=MAIN   3377 3381#
MENG . . . . . . .  C ADDR   1C38H   R   SEG=MAIN   4472# 4533
MENU12 . . . . . .  C ADDR   1B21H   R   SEG=MAIN   4315 4319#
MENU13 . . . . . .  C ADDR   1B29H   R   SEG=MAIN   4319 4322#
MENU14 . . . . . .  C ADDR   1B31H   R   SEG=MAIN   4322 4325#
MENU15 . . . . . .  C ADDR   1B39H   R   SEG=MAIN   4325 4328#
MENU21 . . . . . .  C ADDR   1B41H   R   SEG=MAIN   4328 4332#
MENU22 . . . . . .  C ADDR   1B49H   R   SEG=MAIN   4332 4335#
MENU23 . . . . . .  C ADDR   1B51H   R   SEG=MAIN   4335 4338#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   133

MENU31 . . . . . .  C ADDR   1B59H   R   SEG=MAIN   4338 4341#
MENU41 . . . . . .  C ADDR   1B61H   R   SEG=MAIN   4341 4345#
MENUOFF. . . . . .  C ADDR   115FH   R   SEG=MAIN   2910 2919#
MENUON . . . . . .  C ADDR   1657H   R   SEG=MAIN   3638#
MERR . . . . . . .  C ADDR   1145H   R   SEG=MAIN   2906# 2909
ME_14. . . . . . .  C ADDR   137CH   R   SEG=MAIN   3213#
ME_41. . . . . . .  C ADDR   190EH   R   SEG=MAIN   3960 4003#
MIDL . . . . . . .  C ADDR   26BEH   R   SEG=MAIN   6298 6333#
MIGN . . . . . . .  C ADDR   21DEH   R   SEG=MAIN   2099 5482#
MIGNN. . . . . . .  C ADDR   21E6H   R   SEG=MAIN   5484 5489#
MIN4_HL. . . . . .  C ADDR   1CE8H   R   SEG=MAIN   4590# 4604 4630 4755 4781
MING . . . . . . .  C ADDR   1D2AH   R   SEG=MAIN   4642# 4696
MINIVIX. . . . . .  C ADDR   1D94H   R   SEG=MAIN   4707 4712# 4862
MLABL2 . . . . . .  C ADDR   14FDH   R   SEG=MAIN   3392 3443# 3474 3671
MLABL2R. . . . . .  C ADDR   1695H   R   SEG=MAIN   3671# 3674
MMM. . . . . . . .  C ADDR   027EH   R   SEG=MAIN   659#
MO220. . . . . . .  C ADDR   08DFH   R   SEG=MAIN   1169 1320 1515#
MO500I . . . . . .  C ADDR   084FH   R   SEG=MAIN   1371 1427#
MO500R . . . . . .  C ADDR   0843H   R   SEG=MAIN   1367 1423#
MODF . . . . . . .  B ADDR   00F8H.5 A      233#
MOUTF. . . . . . .  C ADDR   0F8FH   R   SEG=MAIN   2632# 2643 2652 2660 2669
MOUTKMEM . . . . .  C ADDR   162DH   R   SEG=MAIN   3618# 3623
MOVE28 . . . . . .  C ADDR   2470H   R   SEG=MAIN   1144 1231 1277 1354 1373 2012 2050 4403 4525 4543 4685 4701 4836
                                           4851 5740#
MOVE82 . . . . . .  C ADDR   201CH   R   SEG=MAIN   5184#
MOVEA3 . . . . . .  C ADDR   094CH   R   SEG=MAIN   1567 1592#
MOVLEFT. . . . . .  D ADDR   003AH   A      309# 2506 2730 2770 3067 3365 3408 3416 3467 3493 3535 3665 3921 4074
                                           4116 4194 4222 4252 5417
MOVRIG . . . . . .  D ADDR   003BH   A      308# 2502 2723 2727 2766 3068 3364 3412 3459 3463 3492 3539 3664 3920
                                           4075 4198 4251 5426
MSTEN. . . . . . .  B ADDR   00F8H.1 A      229#
MUP1 . . . . . . .  C ADDR   021AH   A      7209# 7252
MUP11. . . . . . .  C ADDR   0257H   A      7256# 7301
MUP2 . . . . . . .  C ADDR   0297H   A      7286 7300#
MUP3 . . . . . . .  C ADDR   026CH   A      7255 7271#
MVV11. . . . . . .  C ADDR   14D3H   R   SEG=MAIN   3388 3421#
MVV12. . . . . . .  C ADDR   14E5H   R   SEG=MAIN   3421 3430#
N12DELCH . . . . .  C ADDR   0C11H   R   SEG=MAIN   2065 2073#
N4DELCH. . . . . .  C ADDR   0BC2H   R   SEG=MAIN   1992 2030#
N8DELCH. . . . . .  C ADDR   0BFFH   R   SEG=MAIN   2030 2065#
NBIMENU. . . . . .  C ADDR   0F95H   R   SEG=MAIN   2636#
NBLOK. . . . . . .  D ADDR   0038H   A      311# 3253 3486 3658 5832
NE05 . . . . . . .  C ADDR   0358H   A      7438 7440 7442 7445#
NELEM. . . . . . .  D ADDR   0037H   A      312# 3689 3794 3797
NEXIN. . . . . . .  C ADDR   0C37H   R   SEG=MAIN   2102# 2109
NEXTMAX. . . . . .  C ADDR   1E38H   R   SEG=MAIN   4825 4833#
NEXTMEA. . . . . .  C ADDR   1C6DH   R   SEG=MAIN   4504 4512#
NEXTMIN. . . . . .  C ADDR   1D5FH   R   SEG=MAIN   4674 4682#
NMINUS . . . . . .  C ADDR   0682H   R   SEG=MAIN   1197 1201#
NMINUS3. . . . . .  C ADDR   05D0H   R   SEG=MAIN   1101 1103#
NNDELCH. . . . . .  C ADDR   0B82H   R   SEG=MAIN   1982 1992#
NNMEMB . . . . . .  C ADDR   1088H   R   SEG=MAIN   2634 2793#
NNNUL. . . . . . .  C ADDR   09C3H   R   SEG=MAIN   1673 1676#
NO . . . . . . . .  C ADDR   26A6H   R   SEG=MAIN   6308 6312 6316 6320#
NO0KEY . . . . . .  C ADDR   0290H   R   SEG=MAIN   668 673#
NO11V6 . . . . . .  C ADDR   0E8FH   R   SEG=MAIN   2473 2481#
NO12V6 . . . . . .  C ADDR   0EA2H   R   SEG=MAIN   2481 2489#
NO13V6 . . . . . .  C ADDR   0EB5H   R   SEG=MAIN   2489 2499#
NO21P7 . . . . . .  C ADDR   1AC0H   R   SEG=MAIN   4232 4263#
NO23RI . . . . . .  C ADDR   0F59H   R   SEG=MAIN   2601 2605#
NO2PARN. . . . . .  C ADDR   0938H   R   SEG=MAIN   1569 1575#
NO31N. . . . . . .  C ADDR   159EH   R   SEG=MAIN   3548#
NO31RI . . . . . .  C ADDR   0F78H   R   SEG=MAIN   2607 2622#
NO3PARN. . . . . .  C ADDR   092EH   R   SEG=MAIN   1569# 1654
NO4DEL . . . . . .  C ADDR   0B5DH   R   SEG=MAIN   1932 1963#
NOAVK. . . . . . .  C ADDR   0657H   R   SEG=MAIN   1125 1174#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   134

NOAVP. . . . . . .  C ADDR   0750H   R   SEG=MAIN   1291 1293# 1332 1335
NOBAVP . . . . . .  C ADDR   09E2H   R   SEG=MAIN   1426 1430 1510 1689 1693#
NOBEF99. . . . . .  C ADDR   0339H   R   SEG=MAIN   764 780# 799 816 832
NOBIT. . . . . . .  C ADDR   0245H   A      7224 7238#
NOBITIZM . . . . .  C ADDR   09EBH   R   SEG=MAIN   1695 1698#
NOBL21 . . . . . .  C ADDR   1005H   R   SEG=MAIN   2677 2684#
NOBL22 . . . . . .  C ADDR   100FH   R   SEG=MAIN   2684 2704#
NOBUF. . . . . . .  C ADDR   0A20H   R   SEG=MAIN   1724 1726#
NOBUF0 . . . . . .  C ADDR   0B12H   R   SEG=MAIN   1835 1892#
NOCHI0 . . . . . .  C ADDR   090FH   R   SEG=MAIN   1321 1541#
NOCHN10. . . . . .  C ADDR   0593H   R   SEG=MAIN   1056 1061#
NOCHN2 . . . . . .  C ADDR   0588H   R   SEG=MAIN   1051 1056#
NOCHN20. . . . . .  C ADDR   059EH   R   SEG=MAIN   1061 1066#
NODI2. . . . . . .  C ADDR   08F5H   R   SEG=MAIN   1518 1525#
NODI6. . . . . . .  C ADDR   118DH   R   SEG=MAIN   2941 2945#
NODI8. . . . . . .  C ADDR   099AH   R   SEG=MAIN   1638 1644#
NODI8K . . . . . .  C ADDR   1978H   R   SEG=MAIN   4060 4065#
NODI8_43 . . . . .  C ADDR   1744H   R   SEG=MAIN   3752 3758#
NODI9. . . . . . .  C ADDR   08FAH   R   SEG=MAIN   1527 1530#
NODI9_43 . . . . .  C ADDR   174FH   R   SEG=MAIN   3758 3766#
NODIS9 . . . . . .  C ADDR   09A9H   R   SEG=MAIN   1644 1656#
NODISK9. . . . . .  C ADDR   1980H   R   SEG=MAIN   4064 4065 4072#
NOENDLI. . . . . .  C ADDR   2507H   R   SEG=MAIN   5866 5869#
NOEQU1 . . . . . .  C ADDR   106DH   R   SEG=MAIN   2769 2773#
NOEQU2 . . . . . .  C ADDR   1598H   R   SEG=MAIN   3538 3542#
NOFIZM . . . . . .  C ADDR   0E71H   R   SEG=MAIN   2437 2469#
NOFT1. . . . . . .  C ADDR   0E4AH   R   SEG=MAIN   2442 2446#
NOFZ . . . . . . .  C ADDR   0B0DH   R   SEG=MAIN   1883 1887#
NOH37. . . . . . .  C ADDR   1219H   R   SEG=MAIN   2999 3020# 3031
NOHNOT1. . . . . .  C ADDR   12ECH   R   SEG=MAIN   3102 3141#
NOHNOT2. . . . . .  C ADDR   12E4H   R   SEG=MAIN   3135# 3141
NOKLB. . . . . . .  C ADDR   0A1AH   R   SEG=MAIN   1722 1724#
NOKORR . . . . . .  C ADDR   05E6H   R   SEG=MAIN   1112 1115#
NOLAH. . . . . . .  C ADDR   11E2H   R   SEG=MAIN   2969 2986#
NOLI_43. . . . . .  C ADDR   17C2H   R   SEG=MAIN   3784 3828#
NOM31. . . . . . .  C ADDR   1576H   R   SEG=MAIN   3472 3517#
NOM32. . . . . . .  C ADDR   15D9H   R   SEG=MAIN   3517 3581#
NOM33. . . . . . .  C ADDR   1607H   R   SEG=MAIN   3581 3601#
NOMARL . . . . . .  C ADDR   1A5CH   R   SEG=MAIN   4196 4202 4206#
NOMAXI . . . . . .  C ADDR   1E50H   R   SEG=MAIN   4842 4845#
NOME11 . . . . . .  C ADDR   148AH   R   SEG=MAIN   3374#
NOMEM11. . . . . .  C ADDR   0FB0H   R   SEG=MAIN   2639 2649#
NOMEM12. . . . . .  C ADDR   0FC6H   R   SEG=MAIN   2649 2657#
NOMEM13. . . . . .  C ADDR   0FDCH   R   SEG=MAIN   2657 2666#
NOMEMK . . . . . .  C ADDR   1487H   R   SEG=MAIN   3162 3372#
NOMINI . . . . . .  C ADDR   1D77H   R   SEG=MAIN   4691 4694#
NON1C. . . . . . .  C ADDR   0E29H   R   SEG=MAIN   2423 2427#
NONULAVT . . . . .  C ADDR   063CH   R   SEG=MAIN   1120 1159#
NONULDEL . . . . .  C ADDR   0B44H   R   SEG=MAIN   1915 1931#
NOP3_0 . . . . . .  C ADDR   0913H   R   SEG=MAIN   1547#
NOPART1. . . . . .  C ADDR   033DH   R   SEG=MAIN   753 787#
NOPART2. . . . . .  C ADDR   035DH   R   SEG=MAIN   787 806#
NOPART3. . . . . .  C ADDR   037DH   R   SEG=MAIN   806 821#
NOPART4. . . . . .  C ADDR   039DH   R   SEG=MAIN   821 838#
NOPLUS . . . . . .  C ADDR   0F05H   R   SEG=MAIN   2550 2553#
NOPOIN7. . . . . .  C ADDR   1A73H   R   SEG=MAIN   4192 4227#
NOPOINT. . . . . .  C ADDR   1A3FH   R   SEG=MAIN   4186 4190#
NOR11. . . . . . .  C ADDR   0F19H   R   SEG=MAIN   2564#
NORDN. . . . . . .  C ADDR   00F6H   A      6945# 6978
NORDN1 . . . . . .  C ADDR   0107H   A      6947 6961#
NORIG2 . . . . . .  C ADDR   104AH   R   SEG=MAIN   2737 2745#
NORIM6 . . . . . .  C ADDR   1088H   R   SEG=MAIN   2797#
NORIME . . . . . .  C ADDR   0F3FH   R   SEG=MAIN   2588 2592#
NORIME1. . . . . .  C ADDR   0F39H   R   SEG=MAIN   2590# 2593 2606
NORM1. . . . . . .  C ADDR   00F0H   A      6940# 7137 7314 7416 7633
NORR11 . . . . . .  C ADDR   1231H   R   SEG=MAIN   3033#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   135

NORR12 . . . . . .  C ADDR   1241H   R   SEG=MAIN   3033 3040# 3054
NORUP. . . . . . .  C ADDR   0119H   A      6944 6981#
NORUP1 . . . . . .  C ADDR   011EH   A      6986# 7004
NORUP2 . . . . . .  C ADDR   0132H   A      6988 7005#
NORVICH. . . . . .  C ADDR   0A23H   R   SEG=MAIN   1653 1727#
NOSUB. . . . . . .  C ADDR   26E1H   R   SEG=MAIN   6342 6346 6350 6355#
NOT1IN . . . . . .  C ADDR   0B22H   R   SEG=MAIN   1800 1900#
NOT1_7 . . . . . .  C ADDR   1135H   R   SEG=MAIN   2891 2898#
NOT2IN . . . . . .  C ADDR   0B2AH   R   SEG=MAIN   1900 1904#
NOT2_7 . . . . . .  C ADDR   1140H   R   SEG=MAIN   2898 2903#
NOT3IN . . . . . .  C ADDR   0B32H   R   SEG=MAIN   1904 1907#
NOTAKT . . . . . .  C ADDR   09F5H   R   SEG=MAIN   1699 1703#
NOTE21 . . . . . .  C ADDR   06D9H   R   SEG=MAIN   1218 1241#
NOTE22 . . . . . .  C ADDR   06F4H   R   SEG=MAIN   1241 1253#
NOTESTIZM. . . . .  C ADDR   070CH   R   SEG=MAIN   1216 1265#
NOTT1. . . . . . .  C ADDR   0AEAH   R   SEG=MAIN   1860 1869#
NOTT2. . . . . . .  C ADDR   0AF5H   R   SEG=MAIN   1869 1874#
NOTT5. . . . . . .  C ADDR   0AFAH   R   SEG=MAIN   1874 1878#
NOT_1. . . . . . .  C ADDR   0E30H   R   SEG=MAIN   2427 2432#
NOT_10 . . . . . .  C ADDR   0E30H   R   SEG=MAIN   2431#
NOVIR. . . . . . .  C ADDR   0F21H   R   SEG=MAIN   2458 2577#
NOVIR1 . . . . . .  C ADDR   0E5BH   R   SEG=MAIN   2458# 2469
NOZMEA . . . . . .  C ADDR   1CD8H   R   SEG=MAIN   4571 4573#
NOZMIN . . . . . .  C ADDR   1DCBH   R   SEG=MAIN   4742 4744#
NOZZMI . . . . . .  C ADDR   098AH   R   SEG=MAIN   1633 1635#
NOZZMI43 . . . . .  C ADDR   1734H   R   SEG=MAIN   3747 3749#
NSEC01 . . . . . .  C ADDR   09CCH   R   SEG=MAIN   1677 1680#
NSEC1. . . . . . .  C ADDR   09D3H   R   SEG=MAIN   1680 1683#
NSEC10 . . . . . .  C ADDR   09D8H   R   SEG=MAIN   1679 1682 1683 1687#
NUERR. . . . . . .  D ADDR   0039H   A      310# 4079 4372 4386 5511
NULAVT . . . . . .  C ADDR   0B6FH   R   SEG=MAIN   1980#
NUMSIZE. . . . . .  N NUMB   0004H   A      5923# 5945 5983 5990 6065 6085
OBOARD . . . . . .  C ADDR   2617H   R   SEG=MAIN   6166 6180#
OBOARD1. . . . . .  C ADDR   265FH   R   SEG=MAIN   6239 6252#
OK1. . . . . . . .  C ADDR   0186H   A      7071 7086#
OK2. . . . . . . .  C ADDR   01A0H   A      7088 7103#
OK3. . . . . . . .  C ADDR   01C4H   A      7120 7136#
ONBOAR1. . . . . .  C ADDR   263DH   R   SEG=MAIN   6201 6218#
ONBOARD. . . . . .  C ADDR   25F1H   R   SEG=MAIN   6130 6144#
ONMEM11. . . . . .  C ADDR   1308H   R   SEG=MAIN   2918 2933 2935 3156# 3637 3643 3872 3876 3881 3895 3900 3923 3937
                                           3941 3952
ONMEM12. . . . . .  C ADDR   18A0H   R   SEG=MAIN   3942# 3945 3964
ONMEM13. . . . . .  C ADDR   1A1FH   R   SEG=MAIN   4117 4172# 4176 4178
ONMIG. . . . . . .  C ADDR   21F4H   R   SEG=MAIN   5493 5502#
ONVICH . . . . . .  C ADDR   0DA2H   R   SEG=MAIN   2317 2329#
OSCICN . . . . . .  D ADDR   00B2H   A      64# 483
OSCXCN . . . . . .  D ADDR   00B1H   A      63# 476 480
OUT43. . . . . . .  C ADDR   175BH   R   SEG=MAIN   3774#
OUT6 . . . . . . .  C ADDR   1088H   R   SEG=MAIN   2213 2276 2387 2392 2397 2414 2444 2449 2456 2467 2591 2604 2612
                                           2616 2798#
OUT7 . . . . . . .  C ADDR   1AEEH   R   SEG=MAIN   2819 2820 2895 2902 2906 2924 2974 2979 3027 3160 3239 3436 3503
                                           3776 3783 3827 3910 3998 4093 4097 4167 4181 4224 4229 4260 4288#
OUTA . . . . . . .  C ADDR   218CH   R   SEG=MAIN   3072 5434#
OUTA2. . . . . . .  C ADDR   21A6H   R   SEG=MAIN   5445# 5450
OUTB . . . . . . .  C ADDR   21AFH   R   SEG=MAIN   4255 5454#
OUTB2. . . . . . .  C ADDR   21D5H   R   SEG=MAIN   5472# 5477
OUTB3. . . . . . .  C ADDR   21C0H   R   SEG=MAIN   5458 5463#
OUTF . . . . . . .  C ADDR   0E51H   R   SEG=MAIN   2440 2452# 2475 2479 2483 2487 2491 2495 2520 2543 2552 2555 2562
                                           2632 2647 2656 2664 2673 2682 2729 2732 2772 2786 2789 3018 3942
OUTFL. . . . . . .  C ADDR   0F16H   R   SEG=MAIN   2558 2562#
OUTKMEM. . . . . .  C ADDR   1315H   R   SEG=MAIN   3164# 3181 3618
OUTMA. . . . . . .  C ADDR   0EEFH   R   SEG=MAIN   2541 2543#
OUTMAX . . . . . .  C ADDR   1E55H   R   SEG=MAIN   4829 4848#
OUTMEA . . . . . .  C ADDR   1C90H   R   SEG=MAIN   4508 4534#
OUTMENU. . . . . .  C ADDR   185CH   R   SEG=MAIN   3909#
OUTMIN . . . . . .  C ADDR   1D7CH   R   SEG=MAIN   4678 4698#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   136

OUTR . . . . . . .  C ADDR   08A6H   R   SEG=MAIN   1456 1479#
OUTR5. . . . . . .  C ADDR   08C2H   R   SEG=MAIN   1477 1498#
OUTSKO . . . . . .  C ADDR   1901H   R   SEG=MAIN   3994 3996#
OUTSKO1. . . . . .  C ADDR   18FEH   R   SEG=MAIN   3992 3995#
OUTVICH. . . . . .  C ADDR   0E5EH   R   SEG=MAIN   2459# 2471
OUTVIR . . . . . .  C ADDR   0D42H   R   SEG=MAIN   2243 2272#
OV . . . . . . . .  B ADDR   00D0H.2 A      201# 6122
P. . . . . . . . .  B ADDR   00D0H.0 A      199#
P0 . . . . . . . .  D ADDR   0080H   A      16# 2102 2106
P0MDOUT. . . . . .  D ADDR   00A4H   A      50# 454
P1 . . . . . . . .  D ADDR   0090H   A      32# 631 632 2115 2117 2120 2123 2127 2129 2130 2182 2184 2186 5251 5258
                                           5770 5773 5775 5778
P1MDIN . . . . . .  D ADDR   00BDH   A      73#
P1MDOUT. . . . . .  D ADDR   00A5H   A      51# 455
P2 . . . . . . . .  D ADDR   00A0H   A      47# 2148 2152 2161
P2MDOUT. . . . . .  D ADDR   00A6H   A      52# 456
P3 . . . . . . . .  D ADDR   00B0H   A      62# 465 2147 2149 2151 2157 2158 2159 2162 2163 2242 2244 2246 2247 2250
                                           2251 2255 2256 2258 2259 2261 2262 2264 2265 2267 2268 2438 2439 2470 2471
                                           2474 2475 2482 2483 2490 2491 2499 2500 2545 2546 2556 2557 2585 2586 2599
                                           2600 2626 2627 2628 2629 2641 2642 2650 2651 2658 2659 2667 2668 2705 2706
                                           2740 2741 2749 2750 2787 2788 2814 2850 2852 2854 2855 2858 2859 2861 2862
                                           2864 2865 2867 2868 2870 2871 2873 2874 2970 2972 2998 2999 3020 3021 3034
                                           3035 3041 3042 3055 3056 3100 3101 3180 3181 3184 3185 3226 3227 3243 3244
                                           3245 3246 3284 3285 3374 3375 3385 3386 3473 3474 3475 3476 3518 3519 3548
                                           3549 3582 3583 3584 3585 3602 3603 3604 3605 3622 3623 3630 3631 3673 3674
                                           3675 3676 3785 3786 3864 3865 3931 3932 3944 3945 3961 3962 3963 3964 4004
                                           4005 4006 4007 4175 4176 4177 4178 4184 4185 4190 4191 4227 4228 4304
P3IF . . . . . . .  D ADDR   00ADH   A      59# 2811 2813 4301 4303
P3MDOUT. . . . . .  D ADDR   00A7H   A      53# 458
P4 . . . . . . . .  D ADDR   0084H   A      20# 2341 2343 4877 4880 4896 4898 5354
P5 . . . . . . . .  D ADDR   0085H   A      21# 553 561 1983 1988 2023 2025 2351 2353 4885 4888 4918 4921 5358
P6 . . . . . . . .  D ADDR   0086H   A      22# 633 635 639 641
P7 . . . . . . . .  D ADDR   0096H   A      38#
P74OUT . . . . . .  D ADDR   00B5H   A      65# 459
PACK1. . . . . . .  C ADDR   00DEH   A      6923# 7138 7315 7417 7634
PARERR . . . . . .  C ADDR   198DH   R   SEG=MAIN   4036 4038 4040 4079#
PARN . . . . . . .  D ADDR   00AFH   A      383# 558 1667 2418 3125
PAROL. . . . . . .  D ADDR   00A8H   A      379#
PART . . . . . . .  D ADDR   009AH   A      373# 554 751 1090 1132 1159 1174 1676 1728 1859 1879 2381 2419 2889 3110
                                           3124 3494 4889 5278
PCA0CN . . . . . .  D ADDR   00D8H   A      99# 209 210 211 212 213 214 215
PCA0CPH0 . . . . .  D ADDR   00FAH   A      132#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      133#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      134#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      135#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      136#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      116#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      117#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      118#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      119#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      120#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      101#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      102#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      103#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      104#
PCA0CPM4 . . . . .  D ADDR   00DEH   A      105#
PCA0H. . . . . . .  D ADDR   00F9H   A      131#
PCA0L. . . . . . .  D ADDR   00E9H   A      115# 452
PCA0MD . . . . . .  D ADDR   00D9H   A      100# 453
PCON . . . . . . .  D ADDR   0087H   A      23# 499
POIN3. . . . . . .  C ADDR   1A72H   R   SEG=MAIN   4225# 4261
POINA. . . . . . .  C ADDR   1ABBH   R   SEG=MAIN   4223 4260#
POINA1 . . . . . .  C ADDR   1A57H   R   SEG=MAIN   4195 4202#
POINA2 . . . . . .  C ADDR   1A51H   R   SEG=MAIN   4198# 4203
POZB . . . . . . .  C ADDR   1ADEH   R   SEG=MAIN   4274 4278#
PROD . . . . . . .  N NUMB   000CH   A      6860# 7204 7205 7206 7207 7227 7228 7229 7231 7232 7234 7235 7237 7259
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   137

                                           7261 7262 7264 7265 7267 7268 7270 7289 7290 7291 7293 7294 7296 7297 7299
                                           7310 7311 7312 7313 7334 7335 7336 7337 7353 7355 7356 7358 7359 7361 7362
                                           7364 7394 7411 7412 7413 7414
PS . . . . . . . .  B ADDR   00B8H.4 A      176#
PSCTL. . . . . . .  D ADDR   008FH   A      31# 7665 7669 7722 7725
PSW. . . . . . . .  D ADDR   00D0H   A      91# 199 200 201 202 203 204 205 206 2222 2807 2827 4299 5679 5681 6595
                                           6603
PT0. . . . . . . .  B ADDR   00B8H.1 A      173#
PT1. . . . . . . .  B ADDR   00B8H.3 A      175#
PT2. . . . . . . .  B ADDR   00B8H.5 A      177#
PX0. . . . . . . .  B ADDR   00B8H.0 A      172#
PX1. . . . . . . .  B ADDR   00B8H.2 A      174#
PYSKST . . . . . .  C ADDR   0D4CH   R   SEG=MAIN   2266 2278#
QUES . . . . . . .  C ADDR   13BEH   R   SEG=MAIN   3239# 3244
R10. . . . . . . .  N NUMB   000AH   A      439# 664 1121 1376 1384 4039 5326 7688
R11. . . . . . . .  N NUMB   000BH   A      440# 665 1122 1377 1383 5330 7692
R8 . . . . . . . .  N NUMB   0008H   A      437# 506 1374 1386 2202 3889 4035 5318 7680
R9 . . . . . . . .  N NUMB   0009H   A      438# 1375 1385 2203 4037 5322 7684
RAFTERK. . . . . .  C ADDR   05FCH   R   SEG=MAIN   1129# 1135
RB8. . . . . . . .  B ADDR   0098H.2 A      155#
RCAP2H . . . . . .  D ADDR   00CBH   A      87#
RCAP2L . . . . . .  D ADDR   00CAH   A      86#
RCAP4H . . . . . .  D ADDR   00E5H   A      111#
RCAP4L . . . . . .  D ADDR   00E4H   A      110#
RCLK . . . . . . .  B ADDR   00C8H.5 A      194#
RDDOUTF. . . . . .  C ADDR   1402H   R   SEG=MAIN   3281# 3285
RE1. . . . . . . .  C ADDR   0CA5H   R   SEG=MAIN   2182# 2188
RE11_7 . . . . . .  C ADDR   06BAH   R   SEG=MAIN   1229# 1252 1263
RE4BYTE. . . . . .  C ADDR   0454H   A      505 3888 4033 7676#
REA3_X . . . . . .  C ADDR   2524H   R   SEG=MAIN   3719 5898#
REACP. . . . . . .  D ADDR   0077H   A      304# 646 648 650 652 692 708 716 724 733 740 755 790 807 823 839 1997
                                           1999 2001 2003 2035 2037 2039 2041
READ . . . . . . .  C ADDR   0CA3H   R   SEG=MAIN   645 647 649 2181#
READYACP . . . . .  C ADDR   02F4H   R   SEG=MAIN   734 744#
READ_X2. . . . . .  C ADDR   0C8BH   R   SEG=MAIN   2156# 2167
REBYTE . . . . . .  C ADDR   0249H   R   SEG=MAIN   630# 675 781 1961 1971 1990 2028 2063 2072 2074
REBYTE2. . . . . .  C ADDR   046CH   A      1138 1221 1229 1244 1255 1271 7696#
REF0CN . . . . . .  D ADDR   00D1H   A      92# 460
REN. . . . . . . .  B ADDR   0098H.4 A      157#
RENDKALIB. . . . .  C ADDR   116EH   R   SEG=MAIN   2928# 2930
RESAR2 . . . . . .  C ADDR   247CH   R   SEG=MAIN   756 791 808 824 840 852 888 970 1026 1147 1190 1279 1296 1353
                                           1356 1379 1402 1555 1609 1823 1893 1935 2957 4397 4405 4424 4527 4545 4625
                                           4683 4699 4713 4776 4834 4849 5435 5455 5748# 5882
RESAR8 . . . . . .  C ADDR   243AH   R   SEG=MAIN   1103 1153 1193 1201 1301 2010 2048 5687#
RESA_HL. . . . . .  C ADDR   2508H   R   SEG=MAIN   1843 4461 4601 4751 5872#
REZAM. . . . . . .  D ADDR   008CH   A      369# 2045
REZAP. . . . . . .  D ADDR   0088H   A      368# 2007
REZMUL . . . . . .  C ADDR   066AH   R   SEG=MAIN   1167 1181 1188#
REZ_A. . . . . . .  D ADDR   0062H   A      358# 769 841 851 887 969 1025 1934
REZ_A0 . . . . . .  D ADDR   006AH   A      360# 1152 1300 1346 1536 2312 2949 2958 2965
REZ_A1 . . . . . .  D ADDR   0066H   A      359# 1084 1150 1189 1284 1295 1322 1355
REZ_A2 . . . . . .  D ADDR   007BH   A      361# 1297
REZ_A3 . . . . . .  D ADDR   009CH   A      375# 1155 1303 1554 1608 1733 2956 4396 5881 5912
REZ_AK . . . . . .  D ADDR   00A4H   A      378# 4154 4404
REZ_AME. . . . . .  D ADDR   005EH   A      356# 1096 1105 1146 1203 1278
REZ_DEL. . . . . .  D ADDR   00C5H   A      393# 771
REZ_R. . . . . . .  D ADDR   00C9H   A      394# 1388 1401
RGOTO7 . . . . . .  C ADDR   1573H   R   SEG=MAIN   3515# 3549 3585
RHNOR11. . . . . .  C ADDR   1212H   R   SEG=MAIN   2997 3009 3015#
RHNOT1 . . . . . .  C ADDR   11D9H   R   SEG=MAIN   2972 2981#
RI . . . . . . . .  B ADDR   0098H.0 A      153#
RI21_23. . . . . .  C ADDR   0F42H   R   SEG=MAIN   2583 2595#
RI6. . . . . . . .  C ADDR   0F3CH   R   SEG=MAIN   2586 2591# 2600 2625 2629
RIGBLO . . . . . .  C ADDR   1012H   R   SEG=MAIN   2705# 2736 2738
RIGBLOK. . . . . .  C ADDR   1050H   R   SEG=MAIN   2749#
RIGHT2 . . . . . .  C ADDR   0D67H   R   SEG=MAIN   2289 2293#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   138

RIGHT3 . . . . . .  C ADDR   0D6BH   R   SEG=MAIN   2291 2296#
RIKN . . . . . . .  C ADDR   0EC7H   R   SEG=MAIN   2506# 2524
RIZMAN . . . . . .  C ADDR   0CD4H   R   SEG=MAIN   2217# 2252
RI_31. . . . . . .  C ADDR   0F5CH   R   SEG=MAIN   2598 2607#
RKNLEFT. . . . . .  C ADDR   10BAH   R   SEG=MAIN   2823# 2866
RKNMEM . . . . . .  C ADDR   10ABH   R   SEG=MAIN   2818# 2872
RKNNUL . . . . . .  C ADDR   10B7H   R   SEG=MAIN   2822# 2860
RKNOPT . . . . . .  C ADDR   0CD1H   R   SEG=MAIN   2216# 2263
RKNRAZR. . . . . .  C ADDR   0CCEH   R   SEG=MAIN   2215# 2257
RKVVOD0. . . . . .  C ADDR   1352H   R   SEG=MAIN   3186 3193#
RLABELF. . . . . .  C ADDR   0CCBH   R   SEG=MAIN   2214# 2249
RLABELH. . . . . .  C ADDR   10B4H   R   SEG=MAIN   2821# 2857
RLABELI. . . . . .  C ADDR   11DFH   R   SEG=MAIN   2984#
RLABELK. . . . . .  C ADDR   11DCH   R   SEG=MAIN   2983# 2986
RLABELL. . . . . .  C ADDR   0F1EH   R   SEG=MAIN   2575#
RLABELL1 . . . . .  C ADDR   1085H   R   SEG=MAIN   2788 2791#
RLABELN. . . . . .  C ADDR   0F8CH   R   SEG=MAIN   2627 2631#
RLABELP. . . . . .  C ADDR   1800H   R   SEG=MAIN   3862# 3865
RLABELS13. . . . .  C ADDR   190BH   R   SEG=MAIN   4001# 4005
RLABELS4 . . . . .  C ADDR   1908H   R   SEG=MAIN   4000# 4003
RLABL2 . . . . . .  C ADDR   13B8H   R   SEG=MAIN   3237#
RLABM. . . . . . .  C ADDR   13BBH   R   SEG=MAIN   3238# 3242
RLEFCUR. . . . . .  C ADDR   1604H   R   SEG=MAIN   3599# 3603
RLER . . . . . . .  C ADDR   217EH   R   SEG=MAIN   5418 5420#
RLIST_43 . . . . .  C ADDR   1692H   R   SEG=MAIN   3670# 3672
RMAS4. . . . . . .  C ADDR   0445H   R   SEG=MAIN   913# 915
RME21_23 . . . . .  C ADDR   1662H   R   SEG=MAIN   3628 3647#
RMO220 . . . . . .  C ADDR   064FH   R   SEG=MAIN   1169# 1214
RNNMEMB. . . . . .  C ADDR   0F92H   R   SEG=MAIN   2634# 2637
RNO3PARN . . . . .  C ADDR   09A7H   R   SEG=MAIN   1654# 1668
RNOCHI0. . . . . .  C ADDR   0775H   R   SEG=MAIN   1308 1321#
RNOH37 . . . . . .  C ADDR   122FH   R   SEG=MAIN   3031# 3035 3042 3056
RNOMEMK. . . . . .  C ADDR   1312H   R   SEG=MAIN   3162# 3179
RNORVICH . . . . .  C ADDR   09A5H   R   SEG=MAIN   1597 1598 1653#
RNOT1IN. . . . . .  C ADDR   0A7CH   R   SEG=MAIN   1730 1800#
ROUT6. . . . . . .  C ADDR   0CC8H   R   SEG=MAIN   2213# 2248
ROUT7. . . . . . .  C ADDR   10B1H   R   SEG=MAIN   2820# 2851 2856
ROUTF. . . . . . .  C ADDR   122CH   R   SEG=MAIN   3027# 3101
RR0. . . . . . . .  N NUMB   0000H   A      430# 2223 2806 2828 4298
RR1. . . . . . . .  N NUMB   0001H   A      431# 2224 2805 2829 4297
RR2. . . . . . . .  N NUMB   0002H   A      433# 1223 1235 1246 1257 2083 2225 2804 2830 3698 3706 4296
RR3. . . . . . . .  N NUMB   0003H   A      434# 1224 1234 1247 1258 2084 2226 2803 2831 3699 3705 4295
RR4. . . . . . . .  N NUMB   0004H   A      1225 1233 1248 1259 2227 2802 2832 3700 3704 4294 5924# 5981 6002 6018
                                           6062 6084
RR5. . . . . . . .  N NUMB   0005H   A      1226 1232 1249 1260 2228 2801 2833 3701 3703 4293 5925# 5982 5989 5996
                                           6063 6072
RR6. . . . . . . .  N NUMB   0006H   A      432# 2229 2800 2834 4292
RR7. . . . . . . .  N NUMB   0007H   A      435# 2230 2799 2835 4291
RRIR . . . . . . .  C ADDR   218BH   R   SEG=MAIN   5429 5431#
RRMO220. . . . . .  C ADDR   0772H   R   SEG=MAIN   1290 1320#
RS0. . . . . . . .  B ADDR   00D0H.3 A      202#
RS1. . . . . . . .  B ADDR   00D0H.4 A      203#
RSEEIND. . . . . .  C ADDR   0941H   R   SEG=MAIN   1581# 1599 1601 1602
RSTSRC . . . . . .  D ADDR   00EFH   A      121# 490 2925
RTIZMRI. . . . . .  C ADDR   0E34H   R   SEG=MAIN   2435#
RVVIZKO. . . . . .  C ADDR   1214H   R   SEG=MAIN   3017# 3022
RXOVRN . . . . . .  B ADDR   00F8H.4 A      232#
SADDR0 . . . . . .  D ADDR   00A9H   A      55#
SADDR1 . . . . . .  D ADDR   00F3H   A      125#
SADEN0 . . . . . .  D ADDR   00B9H   A      69#
SADEN1 . . . . . .  D ADDR   00AEH   A      60#
SAVBA. . . . . . .  D ADDR   003CH   A      307# 2240 2519 2537 2719 2763 2783 2847 3404 3456 3532 4111 4217 5494
                                           5502
SAVEIR2. . . . . .  C ADDR   23BEH   R   SEG=MAIN   854 891 973 1029 5587#
SAVELTE. . . . . .  C ADDR   04A7H   A      7759#
SAVEN_BL . . . . .  D ADDR   00D3H   A      397# 3707 3830 5853 5872
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   139

SAVER2 . . . . . .  C ADDR   23CAH   R   SEG=MAIN   570 572 574 576 760 770 772 795 812 828 842 1085 1097 1106 1151
                                           1156 1204 1285 1298 1304 1323 1389 1393 1613 1828 1866 1947 2008 2020 2046
                                           2058 2959 2966 3729 4155 4247 4279 4414 4530 4553 4628 4693 4709 4724 4779
                                           4844 4859 5438 5465 5601# 5913
SAVE_HL. . . . . .  C ADDR   24F1H   R   SEG=MAIN   1846 3573 5853#
SBUF0. . . . . . .  D ADDR   0099H   A      40# 4354 4360
SBUF1. . . . . . .  D ADDR   00F2H   A      124#
SCON0. . . . . . .  D ADDR   0098H   A      39# 153 154 155 156 157 158 159 160 498 4355 4359 4362 4363 4384
SCON1. . . . . . .  D ADDR   00F1H   A      123#
SDV. . . . . . . .  C ADDR   0C4DH   R   SEG=MAIN   2115# 2122
SDV1 . . . . . . .  C ADDR   0C61H   R   SEG=MAIN   2127# 2133
SDVIG0 . . . . . .  C ADDR   02D5H   R   SEG=MAIN   720# 722
SDVIG1 . . . . . .  C ADDR   02CAH   R   SEG=MAIN   712# 714
SDVIG2 . . . . . .  C ADDR   02BFH   R   SEG=MAIN   704# 706
SDVIG3 . . . . . .  C ADDR   02B3H   R   SEG=MAIN   695# 697
SDVIG4 . . . . . .  C ADDR   02E4H   R   SEG=MAIN   730# 732
SDVIG6 . . . . . .  C ADDR   02EEH   R   SEG=MAIN   737# 739
SDVM . . . . . . .  C ADDR   02ECH   R   SEG=MAIN   727 736#
SEEGOON. . . . . .  C ADDR   09ACH   R   SEG=MAIN   1643 1651 1658#
SEEIND . . . . . .  C ADDR   09BAH   R   SEG=MAIN   1573 1580 1581 1670#
SEE_L43. . . . . .  C ADDR   1752H   R   SEG=MAIN   3757 3765 3768#
SI . . . . . . . .  B ADDR   00C0H.3 A      183#
SIGN . . . . . . .  N NUMB   0007H   A      6855# 6876 6877 6902 6903 6927 7070 7087 7308 7348
SKOR19 . . . . . .  C ADDR   1845H   R   SEG=MAIN   3890 3896#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      230#
SM0. . . . . . . .  B ADDR   0098H.7 A      160#
SM1. . . . . . . .  B ADDR   0098H.6 A      159#
SM2. . . . . . . .  B ADDR   0098H.5 A      158#
SMB0ADR. . . . . .  D ADDR   00C3H   A      79#
SMB0CN . . . . . .  D ADDR   00C0H   A      76# 180 181 182 183 184 185 186
SMB0CR . . . . . .  D ADDR   00CFH   A      90#
SMB0DAT. . . . . .  D ADDR   00C2H   A      78#
SMB0STA. . . . . .  D ADDR   00C1H   A      77#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      181#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      180#
SOOTV. . . . . . .  C ADDR   129CH   R   SEG=MAIN   3096# 3111
SP . . . . . . . .  D ADDR   0081H   A      17# 451
SPI0CFG. . . . . .  D ADDR   009AH   A      41#
SPI0CKR. . . . . .  D ADDR   009DH   A      44# 496
SPI0CN . . . . . .  D ADDR   00F8H   A      130# 228 229 230 231 232 233 234 235 495
SPI0DAT. . . . . .  D ADDR   009BH   A      42# 2104
SPIEN. . . . . . .  B ADDR   00F8H.0 A      228#
SPIF . . . . . . .  B ADDR   00F8H.7 A      235#
SPWRI. . . . . . .  C ADDR   18E3H   R   SEG=MAIN   3979 3981#
SS1. . . . . . . .  C ADDR   1F0DH   R   SEG=MAIN   4999# 5001
STA. . . . . . . .  B ADDR   00C0H.5 A      185#
STO. . . . . . . .  B ADDR   00C0H.4 A      184#
SUMMA. . . . . . .  D ADDR   00B3H   A      387# 757 759 774 792 794 809 811 825 827 1344 1534 2310 2947
SUMT2. . . . . . .  C ADDR   0340H   R   SEG=MAIN   748 789#
T2CON. . . . . . .  D ADDR   00C8H   A      84# 189 190 191 192 193 194 195 196
T4CON. . . . . . .  D ADDR   00C9H   A      85#
TABB1_2. . . . . .  C ADDR   209FH   R   SEG=MAIN   5269# 5279
TABN . . . . . . .  C ADDR   2137H   R   SEG=MAIN   5371# 5375
TABT11 . . . . . .  C ADDR   1ECBH   R   SEG=MAIN   4938# 5351
TABT7. . . . . . .  C ADDR   1ECFH   R   SEG=MAIN   4942# 5364
TABT9. . . . . . .  C ADDR   1ECDH   R   SEG=MAIN   4940# 5361
TABUS. . . . . . .  C ADDR   1EB7H   R   SEG=MAIN   4874 4927#
TAKTIND. . . . . .  C ADDR   09FAH   R   SEG=MAIN   1702 1705#
TB8. . . . . . . .  B ADDR   0098H.3 A      156#
TCLK . . . . . . .  B ADDR   00C8H.4 A      193#
TCON . . . . . . .  D ADDR   0088H   A      24# 143 144 145 146 147 148 149 150 487 488 502
TE22 . . . . . . .  C ADDR   212AH   R   SEG=MAIN   5350 5360#
TE23 . . . . . . .  C ADDR   2132H   R   SEG=MAIN   5360 5364#
TEAEQU0. . . . . .  C ADDR   224CH   R   SEG=MAIN   3069 5525#
TEAVK. . . . . . .  C ADDR   2288H   R   SEG=MAIN   4326 5532#
TEBEQU0. . . . . .  C ADDR   2256H   R   SEG=MAIN   4253 5526#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   140

TEBL . . . . . . .  C ADDR   233CH   R   SEG=MAIN   2679 3230 5554#
TEBL0. . . . . . .  C ADDR   2346H   R   SEG=MAIN   3423 5555#
TECH . . . . . . .  C ADDR   2350H   R   SEG=MAIN   3659 3813 5556#
TECLE. . . . . . .  C ADDR   2301H   R   SEG=MAIN   2671 3150 3198 5548#
TEEND. . . . . . .  C ADDR   23A0H   R   SEG=MAIN   4451 5565#
TEERR. . . . . . .  C ADDR   2396H   R   SEG=MAIN   5509 5564#
TEFULL . . . . . .  C ADDR   2328H   R   SEG=MAIN   2685 3390 5552#
TEINT. . . . . . .  C ADDR   2332H   R   SEG=MAIN   3487 5553#
TEIZMK . . . . . .  C ADDR   22E3H   R   SEG=MAIN   2477 3011 5545#
TEKALIB. . . . . .  C ADDR   2292H   R   SEG=MAIN   3635 4329 5533#
TEKD . . . . . . .  C ADDR   22D9H   R   SEG=MAIN   4044 5544#
TELIST . . . . . .  C ADDR   231DH   R   SEG=MAIN   2654 3209 3215 5551#
TEMAX. . . . . . .  C ADDR   236EH   R   SEG=MAIN   3849 5559#
TEMEM. . . . . . .  C ADDR   230BH   R   SEG=MAIN   5549#
TEMENU . . . . . .  C ADDR   2260H   R   SEG=MAIN   5527#
TEMID. . . . . . .  C ADDR   2378H   R   SEG=MAIN   3857 5560#
TEMIN. . . . . . .  C ADDR   2364H   R   SEG=MAIN   3432 5558#
TEMUL. . . . . . .  C ADDR   0729H   R   SEG=MAIN   1240 1277#
TENMIN . . . . . .  C ADDR   1FA3H   R   SEG=MAIN   1164 1166 1180 5061#
TEOLI. . . . . . .  C ADDR   2382H   R   SEG=MAIN   1427 5562#
TEOLL. . . . . . .  C ADDR   22F7H   R   SEG=MAIN   1520 5547#
TEOLR. . . . . . .  C ADDR   238CH   R   SEG=MAIN   1423 5563#
TEOUT. . . . . . .  C ADDR   22EDH   R   SEG=MAIN   2485 2566 3002 5546#
TEPAR. . . . . . .  C ADDR   22CFH   R   SEG=MAIN   4346 5543#
TES19_2. . . . . .  C ADDR   22C5H   R   SEG=MAIN   511 2613 3896 4094 5541#
TES57_6. . . . . .  C ADDR   22BBH   R   SEG=MAIN   2609 3891 4090 4342 5540#
TESKOR . . . . . .  C ADDR   227EH   R   SEG=MAIN   4323 5531#
TEST01 . . . . . .  C ADDR   1B72H   R   SEG=MAIN   4359# 4382
TEST02 . . . . . .  C ADDR   1BA1H   R   SEG=MAIN   4379 4381#
TEST04 . . . . . .  C ADDR   1B82H   R   SEG=MAIN   4366# 4368
TEST1. . . . . . .  C ADDR   1B68H   R   SEG=MAIN   4354# 4370 4391
TEST2. . . . . . .  C ADDR   1B9AH   R   SEG=MAIN   4359 4378#
TEST22 . . . . . .  C ADDR   18B8H   R   SEG=MAIN   3946 3953#
TEST23 . . . . . .  C ADDR   18BDH   R   SEG=MAIN   3953 3956#
TEST3. . . . . . .  C ADDR   1B8CH   R   SEG=MAIN   4361 4371#
TEST4. . . . . . .  C ADDR   1B7AH   R   SEG=MAIN   4362# 4377
TEST5. . . . . . .  C ADDR   1BA4H   R   SEG=MAIN   4380 4383#
TEST7I . . . . . .  C ADDR   0A12H   R   SEG=MAIN   1715 1718#
TEST9I . . . . . .  C ADDR   0A0BH   R   SEG=MAIN   1710 1715#
TESTAT . . . . . .  C ADDR   235AH   R   SEG=MAIN   2662 3189 5557#
TESTRS . . . . . .  C ADDR   1B66H   R   SEG=MAIN   3880 4352#
TESTS. . . . . . .  C ADDR   18ACH   R   SEG=MAIN   3948# 3955 3958
TETE11 . . . . . .  C ADDR   229DH   R   SEG=MAIN   3870 4333 5535#
TETE7. . . . . . .  C ADDR   22B1H   R   SEG=MAIN   3935 4339 5537#
TETE9. . . . . . .  C ADDR   22A7H   R   SEG=MAIN   4336 5536#
TETESI . . . . . .  C ADDR   226AH   R   SEG=MAIN   2913 4316 5529#
TETESR . . . . . .  C ADDR   2274H   R   SEG=MAIN   4320 5530#
TEVICH . . . . . .  C ADDR   2242H   R   SEG=MAIN   2324 2493 3007 5524#
TEWR . . . . . . .  C ADDR   2313H   R   SEG=MAIN   2645 3204 5550#
TEXTT. . . . . . .  C ADDR   2206H   R   SEG=MAIN   4954 5515#
TF0. . . . . . . .  B ADDR   0088H.5 A      148#
TF1. . . . . . . .  B ADDR   0088H.7 A      150#
TF2. . . . . . . .  B ADDR   00C8H.7 A      196#
TH0. . . . . . . .  D ADDR   008CH   A      28# 470
TH1. . . . . . . .  D ADDR   008DH   A      29# 509 513 3993 3995
TH2. . . . . . . .  D ADDR   00CDH   A      89#
TH4. . . . . . . .  D ADDR   00F5H   A      127#
TI . . . . . . . .  B ADDR   0098H.1 A      154#
TIM. . . . . . . .  C ADDR   0C71H   R   SEG=MAIN   2136#
TIM1 . . . . . . .  C ADDR   0C73H   R   SEG=MAIN   2137# 2137
TIM2 . . . . . . .  C ADDR   0C76H   R   SEG=MAIN   2118 2121 2128 2132 2140# 2183 2187 5774 5776
TIM3 . . . . . . .  C ADDR   0C78H   R   SEG=MAIN   2141# 2141
TIZMRI . . . . . .  C ADDR   0D60H   R   SEG=MAIN   2288# 2435
TL0. . . . . . . .  D ADDR   008AH   A      26# 471
TL1. . . . . . . .  D ADDR   008BH   A      27#
TL2. . . . . . . .  D ADDR   00CCH   A      88#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   141

TL4. . . . . . . .  D ADDR   00F4H   A      126#
TLABELI. . . . . .  C ADDR   1299H   R   SEG=MAIN   3081 3093#
TMOD . . . . . . .  D ADDR   0089H   A      25# 468 501
TMR2RLH. . . . . .  D ADDR   00CBH   A      292# 485
TMR2RLL. . . . . .  D ADDR   00CAH   A      291# 484
TMR3CN . . . . . .  D ADDR   0091H   A      33#
TMR3H. . . . . . .  D ADDR   0095H   A      37#
TMR3L. . . . . . .  D ADDR   0094H   A      36#
TMR3RLH. . . . . .  D ADDR   0093H   A      35#
TMR3RLL. . . . . .  D ADDR   0092H   A      34#
TOME13 . . . . . .  C ADDR   1829H   R   SEG=MAIN   3878 3883#
TOME14 . . . . . .  C ADDR   1850H   R   SEG=MAIN   3883 3903#
TOME15 . . . . . .  C ADDR   1868H   R   SEG=MAIN   3903 3915#
TOME21 . . . . . .  C ADDR   1820H   R   SEG=MAIN   3868 3878#
TOSK19 . . . . . .  C ADDR   19B2H   R   SEG=MAIN   4089 4094#
TOUTF. . . . . . .  C ADDR   1216H   R   SEG=MAIN   3018# 3021
TR0. . . . . . . .  B ADDR   0088H.4 A      147#
TR1. . . . . . . .  B ADDR   0088H.6 A      149#
TR2. . . . . . . .  B ADDR   00C8H.2 A      191#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      231# 2105
UNPACK1. . . . . .  C ADDR   009EH   A      6873# 7067 7201 7331 7445
UNPACK2. . . . . .  C ADDR   00BAH   A      6898# 7068 7202 7332
UP1. . . . . . . .  C ADDR   0138H   A      7018# 7035
UP2. . . . . . . .  C ADDR   014BH   A      7038# 7056
UP2A . . . . . . .  C ADDR   0161H   A      7017 7054#
UPA. . . . . . . .  C ADDR   1FD2H   R   SEG=MAIN   5116# 5122
UPA1 . . . . . . .  C ADDR   1FE2H   R   SEG=MAIN   5134# 5140
UPA2 . . . . . . .  C ADDR   1FC2H   R   SEG=MAIN   5097# 5103
UPAA . . . . . . .  C ADDR   24C9H   R   SEG=MAIN   5822# 5828
UPAA4. . . . . . .  C ADDR   202BH   R   SEG=MAIN   5197# 5203
UPAB . . . . . . .  C ADDR   203BH   R   SEG=MAIN   5214# 5220
UPAK . . . . . . .  C ADDR   1FCCH   R   SEG=MAIN   5113#
UPAK1. . . . . . .  C ADDR   24A3H   R   SEG=MAIN   5787#
UPAK2. . . . . . .  C ADDR   1FBCH   R   SEG=MAIN   5094#
UPAK3. . . . . . .  C ADDR   1FDCH   R   SEG=MAIN   3591 3683 5131#
UPAK4. . . . . . .  C ADDR   24C3H   R   SEG=MAIN   3555 5819#
UPAKA. . . . . . .  C ADDR   2025H   R   SEG=MAIN   4239 5194#
UPAKB. . . . . . .  C ADDR   2035H   R   SEG=MAIN   4268 5211#
UPAV1. . . . . . .  C ADDR   192AH   R   SEG=MAIN   4024# 4030
UPAV2. . . . . . .  C ADDR   19E1H   R   SEG=MAIN   4138# 4144
UPK1 . . . . . . .  C ADDR   24B5H   R   SEG=MAIN   5795 5798#
UPK2 . . . . . . .  C ADDR   24B6H   R   SEG=MAIN   5797 5799#
VICHMAX. . . . . .  C ADDR   1DCFH   R   SEG=MAIN   3851 4750#
VICHMEAN . . . . .  C ADDR   1C23H   R   SEG=MAIN   3859 4460#
VICHMIN. . . . . .  C ADDR   1CF6H   R   SEG=MAIN   3434 4600#
VICHR. . . . . . .  D ADDR   00B1H   A      385# 1217 1708 2321 2330 2459 2472 2579 2587 2916 2920 2996 3060 3166
                                           3624 3632 3641 3863 3912 3926 4042 4230 4283 4314 5349
VIG0 . . . . . . .  C ADDR   0A68H   R   SEG=MAIN   1784# 1786
VIG4 . . . . . . .  C ADDR   0A76H   R   SEG=MAIN   1795# 1797
VIOUT. . . . . . .  C ADDR   0E0EH   R   SEG=MAIN   2327 2410#
VODM11_15. . . . .  C ADDR   1627H   R   SEG=MAIN   3616# 3631
VOLUME . . . . . .  D ADDR   00D5H   A      398# 2280 3568 5862 5864
VV21_23. . . . . .  C ADDR   18A3H   R   SEG=MAIN   3932 3944#
VVCHIBL. . . . . .  C ADDR   2159H   R   SEG=MAIN   2560 5391#
VVCHIBL4 . . . . .  C ADDR   215BH   R   SEG=MAIN   5394#
VVCHIF . . . . . .  C ADDR   2149H   R   SEG=MAIN   5380# 5393
VVINTE . . . . . .  C ADDR   159EH   R   SEG=MAIN   3519 3547#
VVIZKO . . . . . .  C ADDR   1266H   R   SEG=MAIN   3017 3060#
VVKALI52 . . . . .  C ADDR   19D4H   R   SEG=MAIN   4122# 4174
VVMENU . . . . . .  C ADDR   198AH   R   SEG=MAIN   4007 4077#
VVOD43 . . . . . .  C ADDR   1781H   R   SEG=MAIN   3786 3793#
VVODM11_15 . . . .  C ADDR   1803H   R   SEG=MAIN   3616 3863#
VVOSTA . . . . . .  C ADDR   17DEH   R   SEG=MAIN   3828 3847#
VVOSTAD. . . . . .  C ADDR   17F2H   R   SEG=MAIN   3847 3855#
VVRR6. . . . . . .  C ADDR   0E87H   R   SEG=MAIN   2477#
WCOL . . . . . . .  B ADDR   00F8H.6 A      234#
A51 MACRO ASSEMBLER  AMP27                                                                02/01/2007 17:08:34 PAGE   142

WDTCN. . . . . . .  D ADDR   00FFH   A      137# 466 467
WORK . . . . . . .  D ADDR   00B8H   A      389# 1408 1410 1416 1432 1439 1455 1476 1481 1497 1735 1813 3259 3269
                                           3271 3290 3300 3302 3307 3317 3319 3325 3335 3337 3342 3352 3354 4356 4378
                                           4468 4526 4529 4544 4606 4624 4627 4682 4692 4698 4708 4712 4757 4775 4778
                                           4833 4843 4848 4858
WR1. . . . . . . .  C ADDR   2490H   R   SEG=MAIN   5770# 5777
WRITE. . . . . . .  C ADDR   248DH   R   SEG=MAIN   643 5240 5242 5244 5246 5248 5250 5253 5255 5257 5260 5262 5264
                                           5768#
WRITED_X1. . . . .  C ADDR   0C7CH   R   SEG=MAIN   2146#
WRITE_X1 . . . . .  C ADDR   0C7BH   R   SEG=MAIN   2145#
WRPAGE . . . . . .  C ADDR   0480H   A      3990 4446 7720#
WW5. . . . . . . .  C ADDR   0483H   A      7721# 7729
XBR0 . . . . . . .  D ADDR   00E1H   A      107# 462 494
XBR1 . . . . . . .  D ADDR   00E2H   A      108# 463
XBR2 . . . . . . .  D ADDR   00E3H   A      109# 464 493
XCIKLWR. . . . . .  C ADDR   23AAH   R   SEG=MAIN   849 862 864 866 869 872 875 878 881 884 917 919 921 924 927 930
                                           933 936 939 941 944 946 948 951 954 957 960 963 966 1018 1020 1022 5570#
XTEMP. . . . . . .  N NUMB   000CH   A      5921# 6285 6286 6287 6288 6374 6376 6377 6379 6380 6382 6383 6385 6407
                                           6408 6409 6410 6428 6429 6433 6434 6437 6441 6442 6445 6449 6450 6454 6455
                                           6457 6458 6459 6461 6465 6466 6468 6469 6473 6474 6479 6480 6482 6483 6487
                                           6488 6493 6495 6496 6497
YBNUL. . . . . . .  C ADDR   11B1H   R   SEG=MAIN   2954 2962#
YES. . . . . . . .  C ADDR   26C4H   R   SEG=MAIN   6307 6311 6315 6319 6337# 6400
YESAVP . . . . . .  C ADDR   077FH   R   SEG=MAIN   1292 1326#
YESBUF . . . . . .  C ADDR   0ABFH   R   SEG=MAIN   1837 1842#
YESIND . . . . . .  C ADDR   0A14H   R   SEG=MAIN   1707 1714 1717 1721#
YESPRD . . . . . .  C ADDR   0ABDH   R   SEG=MAIN   1836 1840#
YESTEST. . . . . .  C ADDR   1EA6H   R   SEG=MAIN   4869 4901#
YESTT5 . . . . . .  C ADDR   0B10H   R   SEG=MAIN   1882 1890#
YESVICH. . . . . .  C ADDR   07AEH   R   SEG=MAIN   1293 1351#
YST1 . . . . . . .  C ADDR   0190H   R   SEG=MAIN   510 514#
YST19. . . . . . .  C ADDR   0188H   R   SEG=MAIN   507 511#
Z01S . . . . . . .  C ADDR   1F25H   R   SEG=MAIN   5016# 5018
Z05S . . . . . . .  C ADDR   1F32H   R   SEG=MAIN   5025# 5027
Z100 . . . . . . .  C ADDR   1EF6H   R   SEG=MAIN   4980# 4982
Z15. . . . . . . .  C ADDR   1F04H   R   SEG=MAIN   4992# 4994
Z1S. . . . . . . .  C ADDR   1F18H   R   SEG=MAIN   5008# 5010
ZAPADC . . . . . .  C ADDR   0C4BH   R   SEG=MAIN   2114#
ZCMP . . . . . . .  C ADDR   242CH   R   SEG=MAIN   5677#
ZDIV . . . . . . .  C ADDR   23F9H   R   SEG=MAIN   768 1077 1558 3722 5640#
ZER1 . . . . . . .  C ADDR   00B3H   A      6883 6887# 6942 6985
ZER2 . . . . . . .  C ADDR   00D4H   A      6909 6913#
ZMUL . . . . . . .  C ADDR   23EFH   R   SEG=MAIN   5635#
ZNMAT. . . . . . .  B ADDR   0020H.2 A      317# 1633 3747 4571 4742 5648 5651 5654
ZNPLUS . . . . . .  C ADDR   02A6H   R   SEG=MAIN   654 684#
ZZ . . . . . . . .  C ADDR   1F06H   R   SEG=MAIN   4993# 4993
Z_01S. . . . . . .  C ADDR   1F21H   R   SEG=MAIN   679 680 681 2233 2840 4376 4390 5014# 5506
Z_05S. . . . . . .  C ADDR   1F2EH   R   SEG=MAIN   1884 1885 2681 5023#
Z_100. . . . . . .  C ADDR   1EF4H   R   SEG=MAIN   4979#
Z_15 . . . . . . .  C ADDR   1F02H   R   SEG=MAIN   622 4991#
Z_1MS. . . . . . .  C ADDR   1F0BH   R   SEG=MAIN   4383 4998#
Z_1S . . . . . . .  C ADDR   1F14H   R   SEG=MAIN   589 597 2326 3435 3666 3775 3826 3852 4082 4166 4454 4455 5006#
Z_5. . . . . . . .  C ADDR   1EFDH   R   SEG=MAIN   2150 2160 4986#
Z_9. . . . . . . .  C ADDR   2488H   R   SEG=MAIN   2107 5762#


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
